<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: XshCmd::DrawingSubtitutionUndo Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>XshCmd</b></li><li class="navelem"><a class="el" href="class_xsh_cmd_1_1_drawing_subtitution_undo.html">DrawingSubtitutionUndo</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="class_xsh_cmd_1_1_drawing_subtitution_undo-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">XshCmd::DrawingSubtitutionUndo Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for XshCmd::DrawingSubtitutionUndo:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_xsh_cmd_1_1_drawing_subtitution_undo.png" usemap="#XshCmd::DrawingSubtitutionUndo_map" alt=""/>
  <map id="XshCmd::DrawingSubtitutionUndo_map" name="XshCmd::DrawingSubtitutionUndo_map">
<area href="class_t_undo.html" alt="TUndo" shape="rect" coords="0,0,199,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abb39d7baae9a17b829362b51e245ae19"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsh_cmd_1_1_drawing_subtitution_undo.html#abb39d7baae9a17b829362b51e245ae19">DrawingSubtitutionUndo</a> (int dir, <a class="el" href="class_t_cell_selection_1_1_range.html">TCellSelection::Range</a> range, int row, int col, bool selected)</td></tr>
<tr class="separator:abb39d7baae9a17b829362b51e245ae19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7210c281701ad7ef3c345fabf713d37f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsh_cmd_1_1_drawing_subtitution_undo.html#a7210c281701ad7ef3c345fabf713d37f">undo</a> () const override</td></tr>
<tr class="separator:a7210c281701ad7ef3c345fabf713d37f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa552f4db23091b9c301f2f0320233ba1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsh_cmd_1_1_drawing_subtitution_undo.html#aa552f4db23091b9c301f2f0320233ba1">redo</a> () const override</td></tr>
<tr class="separator:aa552f4db23091b9c301f2f0320233ba1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51b61ce2d5a14b4a7478df90ca6731f6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsh_cmd_1_1_drawing_subtitution_undo.html#a51b61ce2d5a14b4a7478df90ca6731f6">getSize</a> () const override</td></tr>
<tr class="separator:a51b61ce2d5a14b4a7478df90ca6731f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaff68abc5752109fce93b392af1ebb61"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsh_cmd_1_1_drawing_subtitution_undo.html#aaff68abc5752109fce93b392af1ebb61">getHistoryString</a> () override</td></tr>
<tr class="separator:aaff68abc5752109fce93b392af1ebb61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa57c27a10ee86f268233cdc0ea6d955a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsh_cmd_1_1_drawing_subtitution_undo.html#aa57c27a10ee86f268233cdc0ea6d955a">getHistoryType</a> () override</td></tr>
<tr class="separator:aa57c27a10ee86f268233cdc0ea6d955a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_t_undo"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_t_undo')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_t_undo.html">TUndo</a></td></tr>
<tr class="memitem:a9189fc632d7a4f6d7ab0c4239e1dc6f6 inherit pub_methods_class_t_undo"><td class="memItemLeft" align="right" valign="top"><a id="a9189fc632d7a4f6d7ab0c4239e1dc6f6" name="a9189fc632d7a4f6d7ab0c4239e1dc6f6"></a>
virtual int&#160;</td><td class="memItemRight" valign="bottom"><b>getSize</b> () const =0</td></tr>
<tr class="separator:a9189fc632d7a4f6d7ab0c4239e1dc6f6 inherit pub_methods_class_t_undo"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a543bce149452ee86ddbf8c039e8a496d inherit pub_methods_class_t_undo"><td class="memItemLeft" align="right" valign="top"><a id="a543bce149452ee86ddbf8c039e8a496d" name="a543bce149452ee86ddbf8c039e8a496d"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>undo</b> () const =0</td></tr>
<tr class="separator:a543bce149452ee86ddbf8c039e8a496d inherit pub_methods_class_t_undo"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3af1bc05a1d1bb5e828ccae906507df inherit pub_methods_class_t_undo"><td class="memItemLeft" align="right" valign="top"><a id="aa3af1bc05a1d1bb5e828ccae906507df" name="aa3af1bc05a1d1bb5e828ccae906507df"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>redo</b> () const =0</td></tr>
<tr class="separator:aa3af1bc05a1d1bb5e828ccae906507df inherit pub_methods_class_t_undo"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c84cc00af4a85306762a3d7b08f5ce4 inherit pub_methods_class_t_undo"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_undo.html#a3c84cc00af4a85306762a3d7b08f5ce4">onAdd</a> ()</td></tr>
<tr class="separator:a3c84cc00af4a85306762a3d7b08f5ce4 inherit pub_methods_class_t_undo"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5df5b230edbe035d275b0f02ce4ff9e inherit pub_methods_class_t_undo"><td class="memItemLeft" align="right" valign="top">virtual QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_undo.html#ab5df5b230edbe035d275b0f02ce4ff9e">getHistoryString</a> ()</td></tr>
<tr class="separator:ab5df5b230edbe035d275b0f02ce4ff9e inherit pub_methods_class_t_undo"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d47d97b624a7b5e24878a7a2d89fe57 inherit pub_methods_class_t_undo"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_undo.html#a5d47d97b624a7b5e24878a7a2d89fe57">getHistoryType</a> ()</td></tr>
<tr class="separator:a5d47d97b624a7b5e24878a7a2d89fe57 inherit pub_methods_class_t_undo"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-methods" name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a05455cbef992782ca04f256cec70c0e6"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsh_cmd_1_1_drawing_subtitution_undo.html#a05455cbef992782ca04f256cec70c0e6">changeDrawing</a> (int delta, int row, int col)</td></tr>
<tr class="separator:a05455cbef992782ca04f256cec70c0e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51476b831b601563bc5e038b815d9750"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsh_cmd_1_1_drawing_subtitution_undo.html#a51476b831b601563bc5e038b815d9750">setDrawing</a> (const <a class="el" href="class_t_frame_id.html">TFrameId</a> &amp;fid, int row, int col, <a class="el" href="class_t_xsh_cell.html">TXshCell</a> cell, <a class="el" href="class_t_xsh_level.html">TXshLevel</a> *level)</td></tr>
<tr class="separator:a51476b831b601563bc5e038b815d9750"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:ad82b1513858ee2faa8aeae678c0eae79"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsh_cmd_1_1_drawing_subtitution_undo.html#ad82b1513858ee2faa8aeae678c0eae79">DrawingSubtitutionGroupUndo</a></td></tr>
<tr class="separator:ad82b1513858ee2faa8aeae678c0eae79"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_attribs_class_t_undo"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_class_t_undo')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="class_t_undo.html">TUndo</a></td></tr>
<tr class="memitem:a46a7d82085c8572e084be5e6baa5ff5d inherit pub_attribs_class_t_undo"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_undo.html#a46a7d82085c8572e084be5e6baa5ff5d">m_isLastInBlock</a></td></tr>
<tr class="separator:a46a7d82085c8572e084be5e6baa5ff5d inherit pub_attribs_class_t_undo"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a173818ef2969f3905e1f84b14c016e4c inherit pub_attribs_class_t_undo"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_undo.html#a173818ef2969f3905e1f84b14c016e4c">m_isLastInRedoBlock</a></td></tr>
<tr class="separator:a173818ef2969f3905e1f84b14c016e4c inherit pub_attribs_class_t_undo"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="abb39d7baae9a17b829362b51e245ae19" name="abb39d7baae9a17b829362b51e245ae19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb39d7baae9a17b829362b51e245ae19">&#9670;&nbsp;</a></span>DrawingSubtitutionUndo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">XshCmd::DrawingSubtitutionUndo::DrawingSubtitutionUndo </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_cell_selection_1_1_range.html">TCellSelection::Range</a>&#160;</td>
          <td class="paramname"><em>range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>selected</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  577</span>      : m_direction(dir)</div>
<div class="line"><span class="lineno">  578</span>      , m_range(range)</div>
<div class="line"><span class="lineno">  579</span>      , m_row(row)</div>
<div class="line"><span class="lineno">  580</span>      , m_col(col)</div>
<div class="line"><span class="lineno">  581</span>      , m_selected(selected) {</div>
<div class="line"><span class="lineno">  582</span>    <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene()-&gt;<a class="code hl_function" href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">getXsheet</a>();</div>
<div class="line"><span class="lineno">  583</span>    <span class="keywordtype">int</span> tempCol, tempRow;</div>
<div class="line"><span class="lineno">  584</span>    <span class="keywordtype">int</span> c = m_range.m_c0;</div>
<div class="line"><span class="lineno">  585</span>    <span class="keywordtype">int</span> r = m_range.m_r0;</div>
<div class="line"><span class="lineno">  586</span>    <span class="keywordflow">while</span> (c &lt;= m_range.m_c1) {</div>
<div class="line"><span class="lineno">  587</span>      tempCol = c;</div>
<div class="line"><span class="lineno">  588</span>      <span class="keywordflow">while</span> (r &lt;= m_range.m_r1) {</div>
<div class="line"><span class="lineno">  589</span>        tempRow = r;</div>
<div class="line"><span class="lineno">  590</span>        <span class="keywordflow">if</span> (xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(tempRow, tempCol).<a class="code hl_function" href="class_t_xsh_cell.html#a5d20229e7bcd19957b123959e58a833e">isEmpty</a>()) {</div>
<div class="line"><span class="lineno">  591</span>          emptyCells.push_back(std::make_pair(tempRow, tempCol));</div>
<div class="line"><span class="lineno">  592</span>        }</div>
<div class="line"><span class="lineno">  593</span>        r++;</div>
<div class="line"><span class="lineno">  594</span>      }</div>
<div class="line"><span class="lineno">  595</span>      r = m_range.m_r0;</div>
<div class="line"><span class="lineno">  596</span>      c++;</div>
<div class="line"><span class="lineno">  597</span>    }</div>
<div class="line"><span class="lineno">  598</span>  }</div>
<div class="ttc" id="aclass_t_app_html_a24088f8647d5d9447fcec6b9b9bbf9eb"><div class="ttname"><a href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a></div><div class="ttdeci">static TApp * instance()</div><div class="ttdef"><b>Definition:</b> tapp.cpp:215</div></div>
<div class="ttc" id="aclass_t_app_html_abbbf1fae564e9e510826eda4f6637d20"><div class="ttname"><a href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">TApp::getCurrentScene</a></div><div class="ttdeci">TSceneHandle * getCurrentScene() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:106</div></div>
<div class="ttc" id="aclass_t_xsh_cell_html_a5d20229e7bcd19957b123959e58a833e"><div class="ttname"><a href="class_t_xsh_cell.html#a5d20229e7bcd19957b123959e58a833e">TXshCell::isEmpty</a></div><div class="ttdeci">bool isEmpty() const</div><div class="ttdef"><b>Definition:</b> txshcell.h:78</div></div>
<div class="ttc" id="aclass_t_xsheet_html"><div class="ttname"><a href="class_t_xsheet.html">TXsheet</a></div><div class="ttdef"><b>Definition:</b> txsheet.h:132</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a1ae81edf03bc7527176c84478c350f57"><div class="ttname"><a href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">TXsheet::getCell</a></div><div class="ttdeci">const TXshCell &amp; getCell(int row, int col) const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:233</div></div>
<div class="ttc" id="aclass_toonz_scene_html_ae3c828e3223fd809fd59189233d0576a"><div class="ttname"><a href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">ToonzScene::getXsheet</a></div><div class="ttdeci">TXsheet * getXsheet() const</div><div class="ttdoc">Returns a pointer to the scene's current xsheet.</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:957</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a05455cbef992782ca04f256cec70c0e6" name="a05455cbef992782ca04f256cec70c0e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05455cbef992782ca04f256cec70c0e6">&#9670;&nbsp;</a></span>changeDrawing()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool XshCmd::DrawingSubtitutionUndo::changeDrawing </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>delta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>col</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  790</span>                                                                      {</div>
<div class="line"><span class="lineno">  791</span>  <a class="code hl_class" href="class_t_application.html">TTool::Application</a> *app = TTool::getApplication();</div>
<div class="line"><span class="lineno">  792</span>  <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh            = app-&gt;getCurrentScene()-&gt;getScene()-&gt;<a class="code hl_function" href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">getXsheet</a>();</div>
<div class="line"><span class="lineno">  793</span>  <a class="code hl_class" href="class_t_xsh_cell.html">TXshCell</a> cell           = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(row, col);</div>
<div class="line"><span class="lineno">  794</span>  <span class="keywordtype">bool</span> usePrevCell        = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  795</span>  <span class="keywordflow">if</span> (cell.<a class="code hl_function" href="class_t_xsh_cell.html#a5d20229e7bcd19957b123959e58a833e">isEmpty</a>()) {</div>
<div class="line"><span class="lineno">  796</span>    <a class="code hl_class" href="class_t_xsh_cell.html">TXshCell</a> prevCell = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(row - 1, col);</div>
<div class="line"><span class="lineno">  797</span>    <span class="keywordflow">if</span> (prevCell.<a class="code hl_function" href="class_t_xsh_cell.html#a5d20229e7bcd19957b123959e58a833e">isEmpty</a>() || !(prevCell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">getSimpleLevel</a>() ||</div>
<div class="line"><span class="lineno">  798</span>                                prevCell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a6ef7d48e41f4f214b414e959512e6377">getChildLevel</a>() ||</div>
<div class="line"><span class="lineno">  799</span>                                prevCell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a855d1db152d4484e44f87e777f8207b3">getSoundTextLevel</a>()))</div>
<div class="line"><span class="lineno">  800</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  801</span>    cell        = prevCell;</div>
<div class="line"><span class="lineno">  802</span>    usePrevCell = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  803</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!cell.m_level || !(cell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">getSimpleLevel</a>() ||</div>
<div class="line"><span class="lineno">  804</span>                                cell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a6ef7d48e41f4f214b414e959512e6377">getChildLevel</a>() ||</div>
<div class="line"><span class="lineno">  805</span>                                cell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a855d1db152d4484e44f87e777f8207b3">getSoundTextLevel</a>()))</div>
<div class="line"><span class="lineno">  806</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  807</span>  <a class="code hl_class" href="class_t_xsh_level.html">TXshLevel</a> *level = cell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">getSimpleLevel</a>();</div>
<div class="line"><span class="lineno">  808</span>  <span class="keywordflow">if</span> (!level) level = cell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a6ef7d48e41f4f214b414e959512e6377">getChildLevel</a>();</div>
<div class="line"><span class="lineno">  809</span>  <span class="keywordflow">if</span> (!level) level = cell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a855d1db152d4484e44f87e777f8207b3">getSoundTextLevel</a>();</div>
<div class="line"><span class="lineno">  810</span> </div>
<div class="line"><span class="lineno">  811</span>  std::vector&lt;TFrameId&gt; fids;</div>
<div class="line"><span class="lineno">  812</span>  <span class="keywordtype">int</span> framesTextSize = 0;</div>
<div class="line"><span class="lineno">  813</span>  <span class="keywordtype">int</span> n, index;</div>
<div class="line"><span class="lineno">  814</span>  <span class="keywordtype">bool</span> usingSoundText = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  815</span>  <a class="code hl_class" href="class_t_frame_id.html">TFrameId</a> cellFrameId;</div>
<div class="line"><span class="lineno">  816</span>  <span class="keywordflow">if</span> (cell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">getSimpleLevel</a>())</div>
<div class="line"><span class="lineno">  817</span>    cell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">getSimpleLevel</a>()-&gt;<a class="code hl_function" href="class_t_xsh_simple_level.html#a567daee4ca12a0e92445bcf98a6541f1">getFids</a>(fids);</div>
<div class="line"><span class="lineno">  818</span>  <span class="keywordflow">if</span> (cell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a6ef7d48e41f4f214b414e959512e6377">getChildLevel</a>())</div>
<div class="line"><span class="lineno">  819</span>    cell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a6ef7d48e41f4f214b414e959512e6377">getChildLevel</a>()-&gt;<a class="code hl_function" href="class_t_xsh_child_level.html#ac95021e1f2e394be3928adc6f274e624">getFids</a>(fids);</div>
<div class="line"><span class="lineno">  820</span>  <span class="keywordflow">if</span> (cell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a855d1db152d4484e44f87e777f8207b3">getSoundTextLevel</a>()) {</div>
<div class="line"><span class="lineno">  821</span>    n              = cell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a855d1db152d4484e44f87e777f8207b3">getSoundTextLevel</a>()-&gt;m_framesText.size();</div>
<div class="line"><span class="lineno">  822</span>    usingSoundText = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  823</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  824</span>    n = fids.size();</div>
<div class="line"><span class="lineno">  825</span> </div>
<div class="line"><span class="lineno">  826</span>  <span class="keywordflow">if</span> (n &lt; 2) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  827</span> </div>
<div class="line"><span class="lineno">  828</span>  <span class="keywordflow">if</span> (!usingSoundText) {</div>
<div class="line"><span class="lineno">  829</span>    std::vector&lt;TFrameId&gt;::iterator it;</div>
<div class="line"><span class="lineno">  830</span>    it = std::find(fids.begin(), fids.end(), cell.m_frameId);</div>
<div class="line"><span class="lineno">  831</span> </div>
<div class="line"><span class="lineno">  832</span>    <span class="keywordflow">if</span> (it == fids.end()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  833</span> </div>
<div class="line"><span class="lineno">  834</span>    index = std::distance(fids.begin(), it);</div>
<div class="line"><span class="lineno">  835</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  836</span>    index = cell.<a class="code hl_function" href="class_t_xsh_cell.html#a5a1965b96c2c698d6f0fb42a80c03406">getFrameId</a>().getNumber();</div>
<div class="line"><span class="lineno">  837</span> </div>
<div class="line"><span class="lineno">  838</span>  <span class="keywordflow">if</span> (usePrevCell) {</div>
<div class="line"><span class="lineno">  839</span>    index -= delta;</div>
<div class="line"><span class="lineno">  840</span>    cell = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(row, col);</div>
<div class="line"><span class="lineno">  841</span>  }</div>
<div class="line"><span class="lineno">  842</span> </div>
<div class="line"><span class="lineno">  843</span>  <span class="comment">// if negative direction, add the size to the direction to avoid a negative</span></div>
<div class="line"><span class="lineno">  844</span>  <span class="comment">// modulo</span></div>
<div class="line"><span class="lineno">  845</span>  <span class="keywordflow">while</span> (delta &lt; 0) delta += n;</div>
<div class="line"><span class="lineno">  846</span>  <span class="comment">// the index is the remainder</span></div>
<div class="line"><span class="lineno">  847</span>  index = (index + delta) % n;</div>
<div class="line"><span class="lineno">  848</span>  assert(index &lt; n);</div>
<div class="line"><span class="lineno">  849</span> </div>
<div class="line"><span class="lineno">  850</span>  <span class="comment">// sound text levels can&#39;t have a 0 index frame id</span></div>
<div class="line"><span class="lineno">  851</span>  <span class="comment">// the index points to a qlist&lt;qstring&gt;</span></div>
<div class="line"><span class="lineno">  852</span>  <span class="comment">// reading 1 below the frameid number</span></div>
<div class="line"><span class="lineno">  853</span>  <span class="comment">// and you can&#39;t have a -1 index on a qlist</span></div>
<div class="line"><span class="lineno">  854</span>  <span class="keywordflow">if</span> (usingSoundText &amp;&amp; index == 0) index = n;</div>
<div class="line"><span class="lineno">  855</span> </div>
<div class="line"><span class="lineno">  856</span>  <span class="keywordflow">if</span> (!usingSoundText)</div>
<div class="line"><span class="lineno">  857</span>    cellFrameId = fids[index];</div>
<div class="line"><span class="lineno">  858</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  859</span>    cellFrameId = <a class="code hl_class" href="class_t_frame_id.html">TFrameId</a>(index);</div>
<div class="line"><span class="lineno">  860</span> </div>
<div class="line"><span class="lineno">  861</span>  setDrawing(cellFrameId, row, col, cell, level);</div>
<div class="line"><span class="lineno">  862</span> </div>
<div class="line"><span class="lineno">  863</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  864</span>}</div>
<div class="ttc" id="aclass_t_application_html"><div class="ttname"><a href="class_t_application.html">TApplication</a></div><div class="ttdef"><b>Definition:</b> tapplication.h:31</div></div>
<div class="ttc" id="aclass_t_frame_id_html"><div class="ttname"><a href="class_t_frame_id.html">TFrameId</a></div><div class="ttdef"><b>Definition:</b> tfilepath.h:29</div></div>
<div class="ttc" id="aclass_t_xsh_cell_html"><div class="ttname"><a href="class_t_xsh_cell.html">TXshCell</a></div><div class="ttdef"><b>Definition:</b> txshcell.h:35</div></div>
<div class="ttc" id="aclass_t_xsh_cell_html_a5a1965b96c2c698d6f0fb42a80c03406"><div class="ttname"><a href="class_t_xsh_cell.html#a5a1965b96c2c698d6f0fb42a80c03406">TXshCell::getFrameId</a></div><div class="ttdeci">TFrameId getFrameId() const</div><div class="ttdef"><b>Definition:</b> txshcell.h:120</div></div>
<div class="ttc" id="aclass_t_xsh_child_level_html_ac95021e1f2e394be3928adc6f274e624"><div class="ttname"><a href="class_t_xsh_child_level.html#ac95021e1f2e394be3928adc6f274e624">TXshChildLevel::getFids</a></div><div class="ttdeci">void getFids(std::vector&lt; TFrameId &gt; &amp;fids) const override</div><div class="ttdef"><b>Definition:</b> txshchildlevel.cpp:95</div></div>
<div class="ttc" id="aclass_t_xsh_level_html"><div class="ttname"><a href="class_t_xsh_level.html">TXshLevel</a></div><div class="ttdoc">The TXshLevel class is the base class of level managers in xsheet.</div><div class="ttdef"><b>Definition:</b> txshlevel.h:50</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_a023065559cff76164ecb6344c586ba27"><div class="ttname"><a href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">TXshLevel::getSimpleLevel</a></div><div class="ttdeci">virtual TXshSimpleLevel * getSimpleLevel()</div><div class="ttdoc">Method (to be overridden in subclasses) to downcast to TXshSimpleLevel.</div><div class="ttdef"><b>Definition:</b> txshlevel.h:95</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_a6ef7d48e41f4f214b414e959512e6377"><div class="ttname"><a href="class_t_xsh_level.html#a6ef7d48e41f4f214b414e959512e6377">TXshLevel::getChildLevel</a></div><div class="ttdeci">virtual TXshChildLevel * getChildLevel()</div><div class="ttdoc">Method (to be overridden in subclasses) to downcast to TXshChildLevel.</div><div class="ttdef"><b>Definition:</b> txshlevel.h:98</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_a855d1db152d4484e44f87e777f8207b3"><div class="ttname"><a href="class_t_xsh_level.html#a855d1db152d4484e44f87e777f8207b3">TXshLevel::getSoundTextLevel</a></div><div class="ttdeci">virtual TXshSoundTextLevel * getSoundTextLevel()</div><div class="ttdef"><b>Definition:</b> txshlevel.h:112</div></div>
<div class="ttc" id="aclass_t_xsh_simple_level_html_a567daee4ca12a0e92445bcf98a6541f1"><div class="ttname"><a href="class_t_xsh_simple_level.html#a567daee4ca12a0e92445bcf98a6541f1">TXshSimpleLevel::getFids</a></div><div class="ttdeci">std::vector&lt; TFrameId &gt; getFids() const</div><div class="ttdoc">Returns a copy of the level's frame ids.</div><div class="ttdef"><b>Definition:</b> txshsimplelevel.cpp:448</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaff68abc5752109fce93b392af1ebb61" name="aaff68abc5752109fce93b392af1ebb61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaff68abc5752109fce93b392af1ebb61">&#9670;&nbsp;</a></span>getHistoryString()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QString XshCmd::DrawingSubtitutionUndo::getHistoryString </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="class_t_undo.html">TUndo</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  664</span>                                      {</div>
<div class="line"><span class="lineno">  665</span>    <span class="keywordflow">return</span> QObject::tr(<span class="stringliteral">&quot;Change current drawing %1&quot;</span>)</div>
<div class="line"><span class="lineno">  666</span>        .arg(QString::number(m_direction));</div>
<div class="line"><span class="lineno">  667</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa57c27a10ee86f268233cdc0ea6d955a" name="aa57c27a10ee86f268233cdc0ea6d955a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa57c27a10ee86f268233cdc0ea6d955a">&#9670;&nbsp;</a></span>getHistoryType()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int XshCmd::DrawingSubtitutionUndo::getHistoryType </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="class_t_undo.html">TUndo</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  669</span>{ <span class="keywordflow">return</span> HistoryType::Xsheet; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a51b61ce2d5a14b4a7478df90ca6731f6" name="a51b61ce2d5a14b4a7478df90ca6731f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51b61ce2d5a14b4a7478df90ca6731f6">&#9670;&nbsp;</a></span>getSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int XshCmd::DrawingSubtitutionUndo::getSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_undo.html">TUndo</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  662</span>{ <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(*this); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa552f4db23091b9c301f2f0320233ba1" name="aa552f4db23091b9c301f2f0320233ba1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa552f4db23091b9c301f2f0320233ba1">&#9670;&nbsp;</a></span>redo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XshCmd::DrawingSubtitutionUndo::redo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_undo.html">TUndo</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  637</span>                             {</div>
<div class="line"><span class="lineno">  638</span>    <span class="keywordflow">if</span> (!m_selected) {</div>
<div class="line"><span class="lineno">  639</span>      changeDrawing(m_direction, m_row, m_col);</div>
<div class="line"><span class="lineno">  640</span>      <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()-&gt;notifyXsheetChanged();</div>
<div class="line"><span class="lineno">  641</span>      <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;setDirtyFlag(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  642</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  643</span>    }</div>
<div class="line"><span class="lineno">  644</span> </div>
<div class="line"><span class="lineno">  645</span>    <span class="keywordtype">int</span> col, row;</div>
<div class="line"><span class="lineno">  646</span>    <span class="keywordtype">int</span> c = m_range.m_c0;</div>
<div class="line"><span class="lineno">  647</span>    <span class="keywordtype">int</span> r = m_range.m_r0;</div>
<div class="line"><span class="lineno">  648</span>    <span class="keywordflow">while</span> (c &lt;= m_range.m_c1) {</div>
<div class="line"><span class="lineno">  649</span>      col = c;</div>
<div class="line"><span class="lineno">  650</span>      <span class="keywordflow">while</span> (r &lt;= m_range.m_r1) {</div>
<div class="line"><span class="lineno">  651</span>        row = r;</div>
<div class="line"><span class="lineno">  652</span>        changeDrawing(m_direction, row, col);</div>
<div class="line"><span class="lineno">  653</span>        r++;</div>
<div class="line"><span class="lineno">  654</span>      }</div>
<div class="line"><span class="lineno">  655</span>      r = m_range.m_r0;</div>
<div class="line"><span class="lineno">  656</span>      c++;</div>
<div class="line"><span class="lineno">  657</span>    }</div>
<div class="line"><span class="lineno">  658</span>    <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()-&gt;notifyXsheetChanged();</div>
<div class="line"><span class="lineno">  659</span>    <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;setDirtyFlag(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  660</span>  }</div>
<div class="ttc" id="aclass_t_app_html_a13f509e753824cb0500787f68bb51a09"><div class="ttname"><a href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">TApp::getCurrentXsheet</a></div><div class="ttdeci">TXsheetHandle * getCurrentXsheet() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:110</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a51476b831b601563bc5e038b815d9750" name="a51476b831b601563bc5e038b815d9750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51476b831b601563bc5e038b815d9750">&#9670;&nbsp;</a></span>setDrawing()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XshCmd::DrawingSubtitutionUndo::setDrawing </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_frame_id.html">TFrameId</a> &amp;&#160;</td>
          <td class="paramname"><em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_xsh_cell.html">TXshCell</a>&#160;</td>
          <td class="paramname"><em>cell</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_xsh_level.html">TXshLevel</a> *&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  867</span>                                                                         {</div>
<div class="line"><span class="lineno">  868</span>  <a class="code hl_class" href="class_t_application.html">TTool::Application</a> *app = TTool::getApplication();</div>
<div class="line"><span class="lineno">  869</span>  <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh            = app-&gt;getCurrentScene()-&gt;getScene()-&gt;<a class="code hl_function" href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">getXsheet</a>();</div>
<div class="line"><span class="lineno">  870</span>  cell.m_frameId          = fid;</div>
<div class="line"><span class="lineno">  871</span>  cell.m_level            = level;</div>
<div class="line"><span class="lineno">  872</span>  xsh-&gt;setCell(row, col, cell);</div>
<div class="line"><span class="lineno">  873</span>  <a class="code hl_class" href="class_t_stage_object.html">TStageObject</a> *pegbar = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">getStageObject</a>(TStageObjectId::ColumnId(col));</div>
<div class="line"><span class="lineno">  874</span>  pegbar-&gt;<a class="code hl_function" href="class_t_stage_object.html#a6e3e9725839b34216225a943cbfb3f0a">setOffset</a>(pegbar-&gt;<a class="code hl_function" href="class_t_stage_object.html#acca88f20b53a77f07ef090cc871ce43a">getOffset</a>());</div>
<div class="line"><span class="lineno">  875</span>}</div>
<div class="ttc" id="aclass_t_stage_object_html"><div class="ttname"><a href="class_t_stage_object.html">TStageObject</a></div><div class="ttdef"><b>Definition:</b> tstageobject.h:95</div></div>
<div class="ttc" id="aclass_t_stage_object_html_a6e3e9725839b34216225a943cbfb3f0a"><div class="ttname"><a href="class_t_stage_object.html#a6e3e9725839b34216225a943cbfb3f0a">TStageObject::setOffset</a></div><div class="ttdeci">void setOffset(const TPointD &amp;off)</div><div class="ttdoc">Sets the offset of the object.</div><div class="ttdef"><b>Definition:</b> tstageobject.cpp:752</div></div>
<div class="ttc" id="aclass_t_stage_object_html_acca88f20b53a77f07ef090cc871ce43a"><div class="ttname"><a href="class_t_stage_object.html#acca88f20b53a77f07ef090cc871ce43a">TStageObject::getOffset</a></div><div class="ttdeci">TPointD getOffset() const</div><div class="ttdoc">Returns the offset of the object.</div><div class="ttdef"><b>Definition:</b> tstageobject.cpp:748</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a13d9b9c08ca8dde39769f5644e046ee5"><div class="ttname"><a href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">TXsheet::getStageObject</a></div><div class="ttdeci">TStageObject * getStageObject(const TStageObjectId &amp;id) const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:542</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7210c281701ad7ef3c345fabf713d37f" name="a7210c281701ad7ef3c345fabf713d37f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7210c281701ad7ef3c345fabf713d37f">&#9670;&nbsp;</a></span>undo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XshCmd::DrawingSubtitutionUndo::undo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_undo.html">TUndo</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  600</span>                             {</div>
<div class="line"><span class="lineno">  601</span>    <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene()-&gt;<a class="code hl_function" href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">getXsheet</a>();</div>
<div class="line"><span class="lineno">  602</span> </div>
<div class="line"><span class="lineno">  603</span>    <span class="keywordflow">if</span> (!m_selected) {</div>
<div class="line"><span class="lineno">  604</span>      changeDrawing(-m_direction, m_row, m_col);</div>
<div class="line"><span class="lineno">  605</span>      <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;setDirtyFlag(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  606</span>      <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()-&gt;notifyXsheetChanged();</div>
<div class="line"><span class="lineno">  607</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  608</span>    }</div>
<div class="line"><span class="lineno">  609</span>    <span class="keywordtype">int</span> col, row;</div>
<div class="line"><span class="lineno">  610</span>    <span class="keywordtype">int</span> c = m_range.m_c0;</div>
<div class="line"><span class="lineno">  611</span>    <span class="keywordtype">int</span> r = m_range.m_r0;</div>
<div class="line"><span class="lineno">  612</span>    <span class="keywordflow">while</span> (c &lt;= m_range.m_c1) {</div>
<div class="line"><span class="lineno">  613</span>      col = c;</div>
<div class="line"><span class="lineno">  614</span>      <span class="keywordflow">while</span> (r &lt;= m_range.m_r1) {</div>
<div class="line"><span class="lineno">  615</span>        row        = r;</div>
<div class="line"><span class="lineno">  616</span>        <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  617</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; emptyCells.size(); i++) {</div>
<div class="line"><span class="lineno">  618</span>          <span class="keywordflow">if</span> (emptyCells[i].first == row &amp;&amp; emptyCells[i].second == col) {</div>
<div class="line"><span class="lineno">  619</span>            xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a28381fbf27f33822b68cf66f689266da">clearCells</a>(row, col);</div>
<div class="line"><span class="lineno">  620</span>            found = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  621</span>          }</div>
<div class="line"><span class="lineno">  622</span>        }</div>
<div class="line"><span class="lineno">  623</span>        <span class="keywordflow">if</span> (found) {</div>
<div class="line"><span class="lineno">  624</span>          r++;</div>
<div class="line"><span class="lineno">  625</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  626</span>        }</div>
<div class="line"><span class="lineno">  627</span>        changeDrawing(-m_direction, row, col);</div>
<div class="line"><span class="lineno">  628</span>        r++;</div>
<div class="line"><span class="lineno">  629</span>      }</div>
<div class="line"><span class="lineno">  630</span>      r = m_range.m_r0;</div>
<div class="line"><span class="lineno">  631</span>      c++;</div>
<div class="line"><span class="lineno">  632</span>    }</div>
<div class="line"><span class="lineno">  633</span>    <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()-&gt;notifyXsheetChanged();</div>
<div class="line"><span class="lineno">  634</span>    <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;setDirtyFlag(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  635</span>  }</div>
<div class="ttc" id="aclass_t_xsheet_html_a28381fbf27f33822b68cf66f689266da"><div class="ttname"><a href="class_t_xsheet.html#a28381fbf27f33822b68cf66f689266da">TXsheet::clearCells</a></div><div class="ttdeci">void clearCells(int row, int col, int rowCount=1)</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:423</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="ad82b1513858ee2faa8aeae678c0eae79" name="ad82b1513858ee2faa8aeae678c0eae79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad82b1513858ee2faa8aeae678c0eae79">&#9670;&nbsp;</a></span>DrawingSubtitutionGroupUndo</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="class_xsh_cmd_1_1_drawing_subtitution_group_undo.html">DrawingSubtitutionGroupUndo</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>E:/opentoonz/toonz/sources/toonz/<a class="el" href="">xsheetcmd.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
