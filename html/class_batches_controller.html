<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: BatchesController Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-slots">Public Slots</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="class_batches_controller-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">BatchesController Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for BatchesController:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_batches_controller.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller_1_1_observer.html">Observer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-slots" name="pub-slots"></a>
Public Slots</h2></td></tr>
<tr class="memitem:a78297b26c178f7637bd26a80919c93c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#a78297b26c178f7637bd26a80919c93c4">onExit</a> (bool &amp;)</td></tr>
<tr class="separator:a78297b26c178f7637bd26a80919c93c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac94898c42a31de28e94114dfdb189305"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#ac94898c42a31de28e94114dfdb189305">setDirtyFlag</a> (bool state)</td></tr>
<tr class="separator:ac94898c42a31de28e94114dfdb189305"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe88f2d87a18a90a6bb895ca0e8b969b"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#afe88f2d87a18a90a6bb895ca0e8b969b">getListName</a> () const</td></tr>
<tr class="separator:afe88f2d87a18a90a6bb895ca0e8b969b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9381c8608c85f17287fa3c80b351950"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#ac9381c8608c85f17287fa3c80b351950">addComposerTask</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;taskFilePath)</td></tr>
<tr class="separator:ac9381c8608c85f17287fa3c80b351950"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab829c6486c9f458671580691e0f54fb9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#ab829c6486c9f458671580691e0f54fb9">addCleanupTask</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;taskFilePath)</td></tr>
<tr class="separator:ab829c6486c9f458671580691e0f54fb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a763114c21b6a43cbf1d024373cf5cfd4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#a763114c21b6a43cbf1d024373cf5cfd4">addTask</a> (const QString &amp;id, <a class="el" href="class_t_farm_task.html">TFarmTask</a> *task, bool doUpdate=true)</td></tr>
<tr class="separator:a763114c21b6a43cbf1d024373cf5cfd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad92494a02d0fde7e4da51cedba78e0bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#ad92494a02d0fde7e4da51cedba78e0bf">removeTask</a> (const QString &amp;id)</td></tr>
<tr class="separator:ad92494a02d0fde7e4da51cedba78e0bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dda8208547576d66ea7541a801f888a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#a3dda8208547576d66ea7541a801f888a">removeAllTasks</a> ()</td></tr>
<tr class="separator:a3dda8208547576d66ea7541a801f888a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1406df29a4281536df3cc5ea67a2d105"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#a1406df29a4281536df3cc5ea67a2d105">getTaskCount</a> () const</td></tr>
<tr class="separator:a1406df29a4281536df3cc5ea67a2d105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcb6113509056b61eff95fd16047e329"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#adcb6113509056b61eff95fd16047e329">getTaskId</a> (int index) const</td></tr>
<tr class="separator:adcb6113509056b61eff95fd16047e329"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c6fb61e5ef6c55a18e114fe658615dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_farm_task.html">TFarmTask</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#a2c6fb61e5ef6c55a18e114fe658615dd">getTask</a> (int index) const</td></tr>
<tr class="separator:a2c6fb61e5ef6c55a18e114fe658615dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a348ea610e745a1d6b063a53de02c53e7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_farm_task.html">TFarmTask</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#a348ea610e745a1d6b063a53de02c53e7">getTask</a> (const QString &amp;id) const</td></tr>
<tr class="separator:a348ea610e745a1d6b063a53de02c53e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c7e0f94ac7b01b62a84a8a785ffd0d3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#a8c7e0f94ac7b01b62a84a8a785ffd0d3">getTaskInfo</a> (const QString &amp;id, QString &amp;parent, QString &amp;name, TaskState &amp;status)</td></tr>
<tr class="separator:a8c7e0f94ac7b01b62a84a8a785ffd0d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a275e0fdb3ab3aaee8503e35a5599a4b7"><td class="memItemLeft" align="right" valign="top">TaskState&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#a275e0fdb3ab3aaee8503e35a5599a4b7">getTaskStatus</a> (const QString &amp;id) const</td></tr>
<tr class="separator:a275e0fdb3ab3aaee8503e35a5599a4b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d40b3c5326e114dfc0d227897921fac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#a5d40b3c5326e114dfc0d227897921fac">loadTask</a> (bool isRenderTask)</td></tr>
<tr class="separator:a5d40b3c5326e114dfc0d227897921fac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a405f14ff2b5da5c7d8370b182f8d93bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#a405f14ff2b5da5c7d8370b182f8d93bd">getTasks</a> (const QString &amp;parentId, std::vector&lt; QString &gt; &amp;tasks) const</td></tr>
<tr class="separator:a405f14ff2b5da5c7d8370b182f8d93bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4fb1bff8a363a183971890e1dfbfd4b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#aa4fb1bff8a363a183971890e1dfbfd4b">setTasksTree</a> (<a class="el" href="class_task_tree_model.html">TaskTreeModel</a> *tree)</td></tr>
<tr class="separator:aa4fb1bff8a363a183971890e1dfbfd4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbf82c21d303ec546d67cf5c39cbafd2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_task_tree_model.html">TaskTreeModel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#afbf82c21d303ec546d67cf5c39cbafd2">getTasksTree</a> ()</td></tr>
<tr class="separator:afbf82c21d303ec546d67cf5c39cbafd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7e89a6a6b82ede790b0a78217804dee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#ad7e89a6a6b82ede790b0a78217804dee">startAll</a> ()</td></tr>
<tr class="separator:ad7e89a6a6b82ede790b0a78217804dee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bb156b170444bb414301052e005c3d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#a6bb156b170444bb414301052e005c3d8">start</a> (const QString &amp;taskId)</td></tr>
<tr class="separator:a6bb156b170444bb414301052e005c3d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a795de86a203d8d242d7dae193aee2a9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#a795de86a203d8d242d7dae193aee2a9f">stopAll</a> ()</td></tr>
<tr class="separator:a795de86a203d8d242d7dae193aee2a9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd9928485e42f6fe4914d8cf9386f2d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#afd9928485e42f6fe4914d8cf9386f2d9">stop</a> (const QString &amp;taskId)</td></tr>
<tr class="separator:afd9928485e42f6fe4914d8cf9386f2d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae6c7b6875e9d20c4f078d30e2052a00"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#aae6c7b6875e9d20c4f078d30e2052a00">load</a> ()</td></tr>
<tr class="separator:aae6c7b6875e9d20c4f078d30e2052a00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc9b6a6a2f819c89501d3fcbba22be3d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#afc9b6a6a2f819c89501d3fcbba22be3d">doLoad</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;fp)</td></tr>
<tr class="separator:afc9b6a6a2f819c89501d3fcbba22be3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afca4f3611db70966953975898a3d336b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#afca4f3611db70966953975898a3d336b">save</a> ()</td></tr>
<tr class="separator:afca4f3611db70966953975898a3d336b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b415b1d1d977be10e0922080575538d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#a2b415b1d1d977be10e0922080575538d">saveas</a> ()</td></tr>
<tr class="separator:a2b415b1d1d977be10e0922080575538d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0914619e8d5891a6ad29db74ed0d8e6f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#a0914619e8d5891a6ad29db74ed0d8e6f">doSave</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;fp=<a class="el" href="class_t_file_path.html">TFilePath</a>())</td></tr>
<tr class="separator:a0914619e8d5891a6ad29db74ed0d8e6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb96d1312f14d7de762bafdce4fdc797"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#aeb96d1312f14d7de762bafdce4fdc797">attach</a> (<a class="el" href="class_batches_controller_1_1_observer.html">Observer</a> *obs)</td></tr>
<tr class="separator:aeb96d1312f14d7de762bafdce4fdc797"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab140396deccc7a1758f18c2a5754362e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#ab140396deccc7a1758f18c2a5754362e">detach</a> (<a class="el" href="class_batches_controller_1_1_observer.html">Observer</a> *obs)</td></tr>
<tr class="separator:ab140396deccc7a1758f18c2a5754362e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0c4381ebf25d652679a1870ba9c55a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#af0c4381ebf25d652679a1870ba9c55a8">notify</a> ()</td></tr>
<tr class="separator:af0c4381ebf25d652679a1870ba9c55a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae179d66b33eb3ddc15689ea5cee9695b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#ae179d66b33eb3ddc15689ea5cee9695b">setController</a> (<a class="el" href="class_t_farm_controller.html">TFarmController</a> *controller)</td></tr>
<tr class="separator:ae179d66b33eb3ddc15689ea5cee9695b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c8269bdeb87cde7867fce2ab1537b9a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_farm_controller.html">TFarmController</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#a5c8269bdeb87cde7867fce2ab1537b9a">getController</a> () const</td></tr>
<tr class="separator:a5c8269bdeb87cde7867fce2ab1537b9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada2ea43207cdc70fe3d165e79d160ef7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#ada2ea43207cdc70fe3d165e79d160ef7">update</a> ()</td></tr>
<tr class="separator:ada2ea43207cdc70fe3d165e79d160ef7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a2526727f29f49f8fe56b74f5b2aece76"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_batches_controller.html">BatchesController</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_batches_controller.html#a2526727f29f49f8fe56b74f5b2aece76">instance</a> ()</td></tr>
<tr class="separator:a2526727f29f49f8fe56b74f5b2aece76"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a840d4eb5326d72258c00ddfd6408ec4f"><td class="memItemLeft" align="right" valign="top"><a id="a840d4eb5326d72258c00ddfd6408ec4f" name="a840d4eb5326d72258c00ddfd6408ec4f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>BatchesController</b> (const <a class="el" href="class_batches_controller.html">BatchesController</a> &amp;)</td></tr>
<tr class="separator:a840d4eb5326d72258c00ddfd6408ec4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a155a9664d5886980561f5d172396c411"><td class="memItemLeft" align="right" valign="top"><a id="a155a9664d5886980561f5d172396c411" name="a155a9664d5886980561f5d172396c411"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="class_batches_controller.html">BatchesController</a> &amp;)</td></tr>
<tr class="separator:a155a9664d5886980561f5d172396c411"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9e7b5b8b56929610702b40c7cecdf681" name="a9e7b5b8b56929610702b40c7cecdf681"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e7b5b8b56929610702b40c7cecdf681">&#9670;&nbsp;</a></span>BatchesController()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BatchesController::BatchesController </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  277</span>    : m_controller(0), m_tasksTree(0), m_filepath(), m_dirtyFlag(<span class="keyword">false</span>) {}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa719bdc411da2434c42fc173e3b2fe12" name="aa719bdc411da2434c42fc173e3b2fe12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa719bdc411da2434c42fc173e3b2fe12">&#9670;&nbsp;</a></span>~BatchesController()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BatchesController::~BatchesController </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  281</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab829c6486c9f458671580691e0f54fb9" name="ab829c6486c9f458671580691e0f54fb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab829c6486c9f458671580691e0f54fb9">&#9670;&nbsp;</a></span>addCleanupTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::addCleanupTask </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>taskFilePath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  301</span>                                                                    {</div>
<div class="line"><span class="lineno">  302</span>  setDirtyFlag(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  303</span>  QString <span class="keywordtype">id</span> = QString::number(TaskCounter++);</div>
<div class="line"><span class="lineno">  304</span>  <span class="keywordflow">while</span> (BatchesController::instance()-&gt;getTask(<span class="keywordtype">id</span>))</div>
<div class="line"><span class="lineno">  305</span>    <span class="keywordtype">id</span> = QString::number(TaskCounter++);</div>
<div class="line"><span class="lineno">  306</span> </div>
<div class="line"><span class="lineno">  307</span>  <a class="code hl_class" href="class_t_farm_task_group.html">TFarmTaskGroup</a> *taskGroup = <span class="keyword">new</span> <a class="code hl_class" href="class_t_farm_task_group.html">TFarmTaskGroup</a>(</div>
<div class="line"><span class="lineno">  308</span>      <span class="keywordtype">id</span>,                                              <span class="comment">// id</span></div>
<div class="line"><span class="lineno">  309</span>      QString::fromStdString(taskFilePath.<a class="code hl_function" href="class_t_file_path.html#af94f9b0aeceb6cdb980fa1789473503a">getName</a>()),  <span class="comment">// name</span></div>
<div class="line"><span class="lineno">  310</span>      TSystem::getUserName(),                          <span class="comment">// user</span></div>
<div class="line"><span class="lineno">  311</span>      TSystem::getHostName(),                          <span class="comment">// host</span></div>
<div class="line"><span class="lineno">  312</span>      1,                                               <span class="comment">// stepCount</span></div>
<div class="line"><span class="lineno">  313</span>      50,                                              <span class="comment">// priority</span></div>
<div class="line"><span class="lineno">  314</span>      taskFilePath,                                    <span class="comment">// taskFilePath</span></div>
<div class="line"><span class="lineno">  315</span>      Overwrite_Off,                                   <span class="comment">// Overwrite</span></div>
<div class="line"><span class="lineno">  316</span>      <span class="keyword">false</span>);                                          <span class="comment">// onlyvisible</span></div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  319</span>    BatchesController::instance()-&gt;addTask(<span class="keywordtype">id</span>, taskGroup);</div>
<div class="line"><span class="lineno">  320</span>  } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;) {</div>
<div class="line"><span class="lineno">  321</span>  }</div>
<div class="line"><span class="lineno">  322</span>}</div>
<div class="ttc" id="aclass_t_exception_html"><div class="ttname"><a href="class_t_exception.html">TException</a></div><div class="ttdef"><b>Definition:</b> texception.h:18</div></div>
<div class="ttc" id="aclass_t_farm_task_group_html"><div class="ttname"><a href="class_t_farm_task_group.html">TFarmTaskGroup</a></div><div class="ttdef"><b>Definition:</b> tfarmtask.h:147</div></div>
<div class="ttc" id="aclass_t_file_path_html_af94f9b0aeceb6cdb980fa1789473503a"><div class="ttname"><a href="class_t_file_path.html#af94f9b0aeceb6cdb980fa1789473503a">TFilePath::getName</a></div><div class="ttdeci">std::string getName() const</div><div class="ttdef"><b>Definition:</b> tfilepath.cpp:636</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac9381c8608c85f17287fa3c80b351950" name="ac9381c8608c85f17287fa3c80b351950"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9381c8608c85f17287fa3c80b351950">&#9670;&nbsp;</a></span>addComposerTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::addComposerTask </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>taskFilePath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  326</span>                                                                      {</div>
<div class="line"><span class="lineno">  327</span>  setDirtyFlag(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  328</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> taskFilePath;</div>
<div class="line"><span class="lineno">  329</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  330</span>    taskFilePath = TSystem::toUNC(_taskFilePath);</div>
<div class="line"><span class="lineno">  331</span>  } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;) {</div>
<div class="line"><span class="lineno">  332</span>  }</div>
<div class="line"><span class="lineno">  333</span> </div>
<div class="line"><span class="lineno">  334</span>  <a class="code hl_class" href="class_toonz_scene.html">ToonzScene</a> scene;</div>
<div class="line"><span class="lineno">  335</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  336</span>    scene.<a class="code hl_function" href="class_toonz_scene.html#ac1c6f51c86f8feba26ea8633a2283125">loadNoResources</a>(taskFilePath);</div>
<div class="line"><span class="lineno">  337</span>  } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  338</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  339</span>  }</div>
<div class="line"><span class="lineno">  340</span> </div>
<div class="line"><span class="lineno">  341</span>  <a class="code hl_class" href="class_t_scene_properties.html">TSceneProperties</a> *sprop      = scene.<a class="code hl_function" href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">getProperties</a>();</div>
<div class="line"><span class="lineno">  342</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_t_output_properties.html">TOutputProperties</a> &amp;out = *sprop-&gt;<a class="code hl_function" href="class_t_scene_properties.html#abea7b4b8e4f0cedbf753b26ec30b5331">getOutputProperties</a>();</div>
<div class="line"><span class="lineno">  343</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_t_render_settings.html">TRenderSettings</a> &amp;rs    = out.<a class="code hl_function" href="class_t_output_properties.html#afa7c771452b57b50047aa4afc6032cad">getRenderSettings</a>();</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>  QString name = QString::fromStdString(taskFilePath.<a class="code hl_function" href="class_t_file_path.html#af94f9b0aeceb6cdb980fa1789473503a">getName</a>());</div>
<div class="line"><span class="lineno">  346</span>  <span class="keywordtype">int</span> r0, r1, step;</div>
<div class="line"><span class="lineno">  347</span>  out.<a class="code hl_function" href="class_t_output_properties.html#aae127cbd8b19eaed0b0fbaf589349176">getRange</a>(r0, r1, step);</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span>  <span class="keywordtype">int</span> sceneFrameCount = scene.<a class="code hl_function" href="class_toonz_scene.html#ab5cd3ad6f894b1acc5656ca747a80627">getFrameCount</a>();</div>
<div class="line"><span class="lineno">  350</span>  <span class="keywordflow">if</span> (r0 &lt; 0) r0      = 0;</div>
<div class="line"><span class="lineno">  351</span>  <span class="keywordflow">if</span> (r1 &gt;= sceneFrameCount)</div>
<div class="line"><span class="lineno">  352</span>    r1 = sceneFrameCount - 1;</div>
<div class="line"><span class="lineno">  353</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r1 &lt; r0)</div>
<div class="line"><span class="lineno">  354</span>    r1 = sceneFrameCount - 1;</div>
<div class="line"><span class="lineno">  355</span> </div>
<div class="line"><span class="lineno">  356</span>  r0++, r1++;</div>
<div class="line"><span class="lineno">  357</span>  <span class="keywordtype">int</span> shrink = rs.<a class="code hl_variable" href="class_t_render_settings.html#a52dd41881bbf6aaf953fe300be2e233e">m_shrinkX</a>;</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>  <span class="keywordtype">int</span> multimedia       = out.getMultimediaRendering();</div>
<div class="line"><span class="lineno">  360</span>  <span class="keywordtype">int</span> threadsIndex     = out.getThreadIndex();</div>
<div class="line"><span class="lineno">  361</span>  <span class="keywordtype">int</span> maxTileSizeIndex = out.getMaxTileSizeIndex();</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> outputPath =</div>
<div class="line"><span class="lineno">  364</span>      scene.<a class="code hl_function" href="class_toonz_scene.html#aa2ed57dfbae7f8cf02a4abe47ed533c6">decodeFilePath</a>(sprop-&gt;<a class="code hl_function" href="class_t_scene_properties.html#abea7b4b8e4f0cedbf753b26ec30b5331">getOutputProperties</a>()-&gt;<a class="code hl_function" href="class_t_output_properties.html#ab082a7e84177a558484d648215e4b4f7">getPath</a>());</div>
<div class="line"><span class="lineno">  365</span>  <span class="keywordflow">if</span> (outputPath.getWideName() == L<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno">  366</span>    outputPath = outputPath.<a class="code hl_function" href="class_t_file_path.html#a3ebf9ced558cfef97a60bba536b23c6f">withName</a>(scene.<a class="code hl_function" href="class_toonz_scene.html#ad42b52b671b094f66e003c4b7ebefd45">getScenePath</a>().<a class="code hl_function" href="class_t_file_path.html#af94f9b0aeceb6cdb980fa1789473503a">getName</a>());</div>
<div class="line"><span class="lineno">  367</span>  <span class="keywordtype">int</span> taskChunkSize;</div>
<div class="line"><span class="lineno">  368</span>  <span class="keywordflow">if</span> (isMovieType(outputPath.<a class="code hl_function" href="class_t_file_path.html#aefca624df1a5468a4c78ec6d5dbfae26">getType</a>()))</div>
<div class="line"><span class="lineno">  369</span>    taskChunkSize = sceneFrameCount;</div>
<div class="line"><span class="lineno">  370</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  371</span>    <span class="keywordtype">int</span> size = Preferences::instance()-&gt;getDefaultTaskChunkSize();</div>
<div class="line"><span class="lineno">  372</span>    <span class="keywordflow">if</span> (r1 - r0 + 1 &lt; size)</div>
<div class="line"><span class="lineno">  373</span>      taskChunkSize = r1 - r0 + 1;</div>
<div class="line"><span class="lineno">  374</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  375</span>      taskChunkSize = size;</div>
<div class="line"><span class="lineno">  376</span>  }</div>
<div class="line"><span class="lineno">  377</span> </div>
<div class="line"><span class="lineno">  378</span>  QString <span class="keywordtype">id</span> = QString::number(TaskCounter++);</div>
<div class="line"><span class="lineno">  379</span>  <span class="keywordflow">while</span> (BatchesController::instance()-&gt;getTask(<span class="keywordtype">id</span>))</div>
<div class="line"><span class="lineno">  380</span>    <span class="keywordtype">id</span> = QString::number(TaskCounter++);</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>  <a class="code hl_class" href="class_t_farm_task_group.html">TFarmTaskGroup</a> *taskGroup = <span class="keyword">new</span> <a class="code hl_class" href="class_t_farm_task_group.html">TFarmTaskGroup</a>(</div>
<div class="line"><span class="lineno">  383</span>      <span class="keywordtype">id</span>, name, TSystem::getUserName(), TSystem::getHostName(), sceneFrameCount,</div>
<div class="line"><span class="lineno">  384</span>      50, taskFilePath, outputPath, r0, r1, step, shrink, multimedia,</div>
<div class="line"><span class="lineno">  385</span>      taskChunkSize, threadsIndex, maxTileSizeIndex);</div>
<div class="line"><span class="lineno">  386</span> </div>
<div class="line"><span class="lineno">  387</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  388</span>    BatchesController::instance()-&gt;addTask(<span class="keywordtype">id</span>, taskGroup);</div>
<div class="line"><span class="lineno">  389</span>  } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;) {</div>
<div class="line"><span class="lineno">  390</span>    <span class="comment">// TMessage::error(toString(e.getMessage()));</span></div>
<div class="line"><span class="lineno">  391</span>  }</div>
<div class="line"><span class="lineno">  392</span>  <span class="comment">// m_data-&gt;m_scene.setProject( mainprogramProj);</span></div>
<div class="line"><span class="lineno">  393</span>  <span class="comment">// TModalPopup::closePopup();</span></div>
<div class="line"><span class="lineno">  394</span>}</div>
<div class="ttc" id="aclass_t_file_path_html"><div class="ttname"><a href="class_t_file_path.html">TFilePath</a></div><div class="ttdef"><b>Definition:</b> tfilepath.h:134</div></div>
<div class="ttc" id="aclass_t_file_path_html_a3ebf9ced558cfef97a60bba536b23c6f"><div class="ttname"><a href="class_t_file_path.html#a3ebf9ced558cfef97a60bba536b23c6f">TFilePath::withName</a></div><div class="ttdeci">TFilePath withName(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> tfilepath.cpp:802</div></div>
<div class="ttc" id="aclass_t_file_path_html_aefca624df1a5468a4c78ec6d5dbfae26"><div class="ttname"><a href="class_t_file_path.html#aefca624df1a5468a4c78ec6d5dbfae26">TFilePath::getType</a></div><div class="ttdeci">std::string getType() const</div><div class="ttdef"><b>Definition:</b> tfilepath.h:225</div></div>
<div class="ttc" id="aclass_t_output_properties_html"><div class="ttname"><a href="class_t_output_properties.html">TOutputProperties</a></div><div class="ttdef"><b>Definition:</b> toutputproperties.h:63</div></div>
<div class="ttc" id="aclass_t_output_properties_html_aae127cbd8b19eaed0b0fbaf589349176"><div class="ttname"><a href="class_t_output_properties.html#aae127cbd8b19eaed0b0fbaf589349176">TOutputProperties::getRange</a></div><div class="ttdeci">bool getRange(int &amp;r0, int &amp;r1, int &amp;step) const</div><div class="ttdef"><b>Definition:</b> outputproperties.cpp:128</div></div>
<div class="ttc" id="aclass_t_output_properties_html_ab082a7e84177a558484d648215e4b4f7"><div class="ttname"><a href="class_t_output_properties.html#ab082a7e84177a558484d648215e4b4f7">TOutputProperties::getPath</a></div><div class="ttdeci">TFilePath getPath() const</div><div class="ttdef"><b>Definition:</b> outputproperties.cpp:116</div></div>
<div class="ttc" id="aclass_t_output_properties_html_afa7c771452b57b50047aa4afc6032cad"><div class="ttname"><a href="class_t_output_properties.html#afa7c771452b57b50047aa4afc6032cad">TOutputProperties::getRenderSettings</a></div><div class="ttdeci">const TRenderSettings &amp; getRenderSettings() const</div><div class="ttdef"><b>Definition:</b> toutputproperties.h:181</div></div>
<div class="ttc" id="aclass_t_render_settings_html"><div class="ttname"><a href="class_t_render_settings.html">TRenderSettings</a></div><div class="ttdoc">Data class containing the relevant additional information needed in a render process.</div><div class="ttdef"><b>Definition:</b> trasterfx.h:61</div></div>
<div class="ttc" id="aclass_t_render_settings_html_a52dd41881bbf6aaf953fe300be2e233e"><div class="ttname"><a href="class_t_render_settings.html#a52dd41881bbf6aaf953fe300be2e233e">TRenderSettings::m_shrinkX</a></div><div class="ttdeci">int m_shrinkX</div><div class="ttdef"><b>Definition:</b> trasterfx.h:125</div></div>
<div class="ttc" id="aclass_t_scene_properties_html"><div class="ttname"><a href="class_t_scene_properties.html">TSceneProperties</a></div><div class="ttdef"><b>Definition:</b> sceneproperties.h:49</div></div>
<div class="ttc" id="aclass_t_scene_properties_html_abea7b4b8e4f0cedbf753b26ec30b5331"><div class="ttname"><a href="class_t_scene_properties.html#abea7b4b8e4f0cedbf753b26ec30b5331">TSceneProperties::getOutputProperties</a></div><div class="ttdeci">TOutputProperties * getOutputProperties() const</div><div class="ttdef"><b>Definition:</b> sceneproperties.h:145</div></div>
<div class="ttc" id="aclass_toonz_scene_html"><div class="ttname"><a href="class_toonz_scene.html">ToonzScene</a></div><div class="ttdef"><b>Definition:</b> toonzscene.h:42</div></div>
<div class="ttc" id="aclass_toonz_scene_html_a8ef96fedc17d7def810ac419b0939254"><div class="ttname"><a href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">ToonzScene::getProperties</a></div><div class="ttdeci">TSceneProperties * getProperties() const</div><div class="ttdoc">&lt; Returns a pointer to the scene's properties.</div><div class="ttdef"><b>Definition:</b> toonzscene.h:87</div></div>
<div class="ttc" id="aclass_toonz_scene_html_aa2ed57dfbae7f8cf02a4abe47ed533c6"><div class="ttname"><a href="class_toonz_scene.html#aa2ed57dfbae7f8cf02a4abe47ed533c6">ToonzScene::decodeFilePath</a></div><div class="ttdeci">TFilePath decodeFilePath(const TFilePath &amp;) const</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:1231</div></div>
<div class="ttc" id="aclass_toonz_scene_html_ab5cd3ad6f894b1acc5656ca747a80627"><div class="ttname"><a href="class_toonz_scene.html#ab5cd3ad6f894b1acc5656ca747a80627">ToonzScene::getFrameCount</a></div><div class="ttdeci">int getFrameCount() const</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:704</div></div>
<div class="ttc" id="aclass_toonz_scene_html_ac1c6f51c86f8feba26ea8633a2283125"><div class="ttname"><a href="class_toonz_scene.html#ac1c6f51c86f8feba26ea8633a2283125">ToonzScene::loadNoResources</a></div><div class="ttdeci">void loadNoResources(const TFilePath &amp;path)</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:394</div></div>
<div class="ttc" id="aclass_toonz_scene_html_ad42b52b671b094f66e003c4b7ebefd45"><div class="ttname"><a href="class_toonz_scene.html#ad42b52b671b094f66e003c4b7ebefd45">ToonzScene::getScenePath</a></div><div class="ttdeci">TFilePath getScenePath() const</div><div class="ttdoc">Returns the scene's file path.</div><div class="ttdef"><b>Definition:</b> toonzscene.h:59</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a763114c21b6a43cbf1d024373cf5cfd4" name="a763114c21b6a43cbf1d024373cf5cfd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a763114c21b6a43cbf1d024373cf5cfd4">&#9670;&nbsp;</a></span>addTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::addTask </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_farm_task.html">TFarmTask</a> *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>doUpdate</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  400</span>                                               {</div>
<div class="line"><span class="lineno">  401</span><span class="preprocessor">#ifdef _DEBUG</span></div>
<div class="line"><span class="lineno">  402</span>  std::map&lt;QString, TFarmTask *&gt;::iterator it = m_tasks.find(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  403</span><span class="comment">// assert(it == m_tasks.end());</span></div>
<div class="line"><span class="lineno">  404</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  405</span>  <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>.isEmpty()) task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a> = id;</div>
<div class="line"><span class="lineno">  406</span> </div>
<div class="line"><span class="lineno">  407</span>  task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a>         = Suspended;</div>
<div class="line"><span class="lineno">  408</span>  task-&gt;m_submissionDate = QDateTime::currentDateTime();</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>  m_tasks.insert(std::make_pair(<span class="keywordtype">id</span>, task));</div>
<div class="line"><span class="lineno">  411</span> </div>
<div class="line"><span class="lineno">  412</span>  <span class="keywordtype">int</span> count = task-&gt;getTaskCount();</div>
<div class="line"><span class="lineno">  413</span>  <span class="keywordflow">if</span> (count == 1 &amp;&amp; task-&gt;getTask(0) == task) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; ++i) {</div>
<div class="line"><span class="lineno">  416</span>    <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *subtask = task-&gt;getTask(i);</div>
<div class="line"><span class="lineno">  417</span>    assert(subtask);</div>
<div class="line"><span class="lineno">  418</span>    addTask(subtask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>, subtask);</div>
<div class="line"><span class="lineno">  419</span>  }</div>
<div class="line"><span class="lineno">  420</span>  <span class="keywordflow">if</span> (doUpdate) update();</div>
<div class="line"><span class="lineno">  421</span>}</div>
<div class="ttc" id="aclass_t_farm_task_html"><div class="ttname"><a href="class_t_farm_task.html">TFarmTask</a></div><div class="ttdef"><b>Definition:</b> tfarmtask.h:41</div></div>
<div class="ttc" id="aclass_t_farm_task_html_a2be81cd241bf4cbc9aa039b7183e7c98"><div class="ttname"><a href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">TFarmTask::m_status</a></div><div class="ttdeci">TaskState m_status</div><div class="ttdoc">The task's status (completed, work in progress... etc)</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:85</div></div>
<div class="ttc" id="aclass_t_farm_task_html_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6"><div class="ttname"><a href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">TFarmTask::m_id</a></div><div class="ttdeci">Id m_id</div><div class="ttdoc">Internal task identifier.</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:68</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb96d1312f14d7de762bafdce4fdc797" name="aeb96d1312f14d7de762bafdce4fdc797"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb96d1312f14d7de762bafdce4fdc797">&#9670;&nbsp;</a></span>attach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::attach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_batches_controller_1_1_observer.html">BatchesController::Observer</a> *&#160;</td>
          <td class="paramname"><em>obs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  919</span>                                                             {</div>
<div class="line"><span class="lineno">  920</span>  m_observers.insert(obs);</div>
<div class="line"><span class="lineno">  921</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab140396deccc7a1758f18c2a5754362e" name="ab140396deccc7a1758f18c2a5754362e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab140396deccc7a1758f18c2a5754362e">&#9670;&nbsp;</a></span>detach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::detach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_batches_controller_1_1_observer.html">BatchesController::Observer</a> *&#160;</td>
          <td class="paramname"><em>obs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  925</span>                                                             {</div>
<div class="line"><span class="lineno">  926</span>  m_observers.erase(obs);</div>
<div class="line"><span class="lineno">  927</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afc9b6a6a2f819c89501d3fcbba22be3d" name="afc9b6a6a2f819c89501d3fcbba22be3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc9b6a6a2f819c89501d3fcbba22be3d">&#9670;&nbsp;</a></span>doLoad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::doLoad </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  796</span>                                                  {</div>
<div class="line"><span class="lineno">  797</span>  <span class="keywordflow">if</span> (m_dirtyFlag) {</div>
<div class="line"><span class="lineno">  798</span>    <span class="keywordtype">int</span> ret =</div>
<div class="line"><span class="lineno">  799</span>        DVGui::MsgBox(QString(tr(<span class="stringliteral">&quot;The current task list has been modified.\nDo &quot;</span></div>
<div class="line"><span class="lineno">  800</span>                                 <span class="stringliteral">&quot;you want to save your changes?&quot;</span>)),</div>
<div class="line"><span class="lineno">  801</span>                      tr(<span class="stringliteral">&quot;Save&quot;</span>), tr(<span class="stringliteral">&quot;Discard&quot;</span>), tr(<span class="stringliteral">&quot;Cancel&quot;</span>));</div>
<div class="line"><span class="lineno">  802</span>    <span class="keywordflow">if</span> (ret == 1)</div>
<div class="line"><span class="lineno">  803</span>      save();</div>
<div class="line"><span class="lineno">  804</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ret == 3 || ret == 0)</div>
<div class="line"><span class="lineno">  805</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  806</span>  }</div>
<div class="line"><span class="lineno">  807</span> </div>
<div class="line"><span class="lineno">  808</span>  setDirtyFlag(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  809</span> </div>
<div class="line"><span class="lineno">  810</span>  m_tasks.clear();</div>
<div class="line"><span class="lineno">  811</span>  m_farmIdsTable.clear();</div>
<div class="line"><span class="lineno">  812</span> </div>
<div class="line"><span class="lineno">  813</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  814</span>    <a class="code hl_class" href="class_t_i_stream.html">TIStream</a> is(fp);</div>
<div class="line"><span class="lineno">  815</span>    <span class="keywordflow">if</span> (is) {</div>
<div class="line"><span class="lineno">  816</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  817</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(fp.getWideString() + L<span class="stringliteral">&quot;: Can&#39;t open file&quot;</span>);</div>
<div class="line"><span class="lineno">  818</span> </div>
<div class="line"><span class="lineno">  819</span>    m_filepath = fp;</div>
<div class="line"><span class="lineno">  820</span> </div>
<div class="line"><span class="lineno">  821</span>    std::string tagName = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno">  822</span>    <span class="keywordflow">if</span> (!is.matchTag(tagName)) <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;Bad file format&quot;</span>);</div>
<div class="line"><span class="lineno">  823</span> </div>
<div class="line"><span class="lineno">  824</span>    <span class="keywordflow">if</span> (tagName == <span class="stringliteral">&quot;tnzbatches&quot;</span>) {</div>
<div class="line"><span class="lineno">  825</span>      std::string rootTagName = tagName;</div>
<div class="line"><span class="lineno">  826</span>      std::string v           = is.getTagAttribute(<span class="stringliteral">&quot;version&quot;</span>);</div>
<div class="line"><span class="lineno">  827</span>      <span class="keywordflow">while</span> (is.matchTag(tagName)) {</div>
<div class="line"><span class="lineno">  828</span>        <span class="keywordflow">if</span> (tagName == <span class="stringliteral">&quot;generator&quot;</span>) {</div>
<div class="line"><span class="lineno">  829</span>          std::string program = is.getString();</div>
<div class="line"><span class="lineno">  830</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tagName == <span class="stringliteral">&quot;batch&quot;</span>) {</div>
<div class="line"><span class="lineno">  831</span>          <span class="keywordflow">while</span> (!is.eos()) {</div>
<div class="line"><span class="lineno">  832</span>            <a class="code hl_class" href="class_t_persist.html">TPersist</a> *p = 0;</div>
<div class="line"><span class="lineno">  833</span>            is &gt;&gt; p;</div>
<div class="line"><span class="lineno">  834</span>            <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *task = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *<span class="keyword">&gt;</span>(p);</div>
<div class="line"><span class="lineno">  835</span>            <span class="keywordflow">if</span> (task) addTask(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>, task, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  836</span>          }</div>
<div class="line"><span class="lineno">  837</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  838</span>          <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(tagName + <span class="stringliteral">&quot; : unexpected tag&quot;</span>);</div>
<div class="line"><span class="lineno">  839</span>        }</div>
<div class="line"><span class="lineno">  840</span> </div>
<div class="line"><span class="lineno">  841</span>        <span class="keywordflow">if</span> (!is.matchEndTag()) <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(tagName + <span class="stringliteral">&quot; : missing end tag&quot;</span>);</div>
<div class="line"><span class="lineno">  842</span>      }</div>
<div class="line"><span class="lineno">  843</span>      <span class="keywordflow">if</span> (!is.matchEndTag())</div>
<div class="line"><span class="lineno">  844</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(rootTagName + <span class="stringliteral">&quot; : missing end tag&quot;</span>);</div>
<div class="line"><span class="lineno">  845</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  846</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;Bad file format&quot;</span>);</div>
<div class="line"><span class="lineno">  847</span>    }</div>
<div class="line"><span class="lineno">  848</span>  } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;e) {</div>
<div class="line"><span class="lineno">  849</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  850</span>  } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  851</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;Loading error.&quot;</span>);</div>
<div class="line"><span class="lineno">  852</span>  }</div>
<div class="line"><span class="lineno">  853</span>  update();</div>
<div class="line"><span class="lineno">  854</span>  notify();</div>
<div class="line"><span class="lineno">  855</span>}</div>
<div class="ttc" id="aclass_t_i_stream_html"><div class="ttname"><a href="class_t_i_stream.html">TIStream</a></div><div class="ttdoc">Toonz's XML-like input file parser.</div><div class="ttdef"><b>Definition:</b> tstream.h:47</div></div>
<div class="ttc" id="aclass_t_persist_html"><div class="ttname"><a href="class_t_persist.html">TPersist</a></div><div class="ttdef"><b>Definition:</b> tpersist.h:30</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0914619e8d5891a6ad29db74ed0d8e6f" name="a0914619e8d5891a6ad29db74ed0d8e6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0914619e8d5891a6ad29db74ed0d8e6f">&#9670;&nbsp;</a></span>doSave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::doSave </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>fp</em> = <code><a class="el" href="class_t_file_path.html">TFilePath</a>()</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  887</span>                                                   {</div>
<div class="line"><span class="lineno">  888</span>  setDirtyFlag(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  889</span> </div>
<div class="line"><span class="lineno">  890</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> fp;</div>
<div class="line"><span class="lineno">  891</span>  <span class="keywordflow">if</span> (_fp == <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>())</div>
<div class="line"><span class="lineno">  892</span>    fp = m_filepath;</div>
<div class="line"><span class="lineno">  893</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  894</span>    fp = m_filepath = _fp;</div>
<div class="line"><span class="lineno">  895</span> </div>
<div class="line"><span class="lineno">  896</span>  <a class="code hl_class" href="class_t_o_stream.html">TOStream</a> os(fp);</div>
<div class="line"><span class="lineno">  897</span> </div>
<div class="line"><span class="lineno">  898</span>  std::map&lt;std::string, std::string&gt; attr;</div>
<div class="line"><span class="lineno">  899</span>  attr[<span class="stringliteral">&quot;version&quot;</span>] = <span class="stringliteral">&quot;1.0&quot;</span>;</div>
<div class="line"><span class="lineno">  900</span> </div>
<div class="line"><span class="lineno">  901</span>  os.openChild(<span class="stringliteral">&quot;tnzbatches&quot;</span>, attr);</div>
<div class="line"><span class="lineno">  902</span>  os.child(<span class="stringliteral">&quot;generator&quot;</span>) &lt;&lt; TEnv::getApplicationFullName();</div>
<div class="line"><span class="lineno">  903</span> </div>
<div class="line"><span class="lineno">  904</span>  os.openChild(<span class="stringliteral">&quot;batch&quot;</span>);</div>
<div class="line"><span class="lineno">  905</span>  std::map&lt;QString, TFarmTask *&gt;::const_iterator it = m_tasks.begin();</div>
<div class="line"><span class="lineno">  906</span>  <span class="keywordflow">for</span> (; it != m_tasks.end(); ++it) {</div>
<div class="line"><span class="lineno">  907</span>    <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *task = it-&gt;second;</div>
<div class="line"><span class="lineno">  908</span>    assert(task);</div>
<div class="line"><span class="lineno">  909</span>    os &lt;&lt; task;</div>
<div class="line"><span class="lineno">  910</span>  }</div>
<div class="line"><span class="lineno">  911</span>  os.closeChild();  <span class="comment">// &quot;batch&quot;</span></div>
<div class="line"><span class="lineno">  912</span>  os.closeChild();  <span class="comment">// &quot;tnzbatches&quot;</span></div>
<div class="line"><span class="lineno">  913</span> </div>
<div class="line"><span class="lineno">  914</span>  update();</div>
<div class="line"><span class="lineno">  915</span>}</div>
<div class="ttc" id="aclass_t_o_stream_html"><div class="ttname"><a href="class_t_o_stream.html">TOStream</a></div><div class="ttdoc">Toonz's XML-like output file parser.</div><div class="ttdef"><b>Definition:</b> tstream.h:186</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5c8269bdeb87cde7867fce2ab1537b9a" name="a5c8269bdeb87cde7867fce2ab1537b9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c8269bdeb87cde7867fce2ab1537b9a">&#9670;&nbsp;</a></span>getController()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_farm_controller.html">TFarmController</a> * BatchesController::getController </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  948</span>                                                        {</div>
<div class="line"><span class="lineno">  949</span>  <span class="keywordflow">return</span> m_controller;</div>
<div class="line"><span class="lineno">  950</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afe88f2d87a18a90a6bb895ca0e8b969b" name="afe88f2d87a18a90a6bb895ca0e8b969b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe88f2d87a18a90a6bb895ca0e8b969b">&#9670;&nbsp;</a></span>getListName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QString BatchesController::getListName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  859</span>                                             {</div>
<div class="line"><span class="lineno">  860</span>  QString str = (m_filepath == <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>()</div>
<div class="line"><span class="lineno">  861</span>                     ? tr(<span class="stringliteral">&quot;Tasks&quot;</span>)</div>
<div class="line"><span class="lineno">  862</span>                     : QString::fromStdString(m_filepath.getName()));</div>
<div class="line"><span class="lineno">  863</span>  <span class="keywordflow">return</span> str + (m_dirtyFlag ? <span class="stringliteral">&quot;*&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  864</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a348ea610e745a1d6b063a53de02c53e7" name="a348ea610e745a1d6b063a53de02c53e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a348ea610e745a1d6b063a53de02c53e7">&#9670;&nbsp;</a></span>getTask() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_farm_task.html">TFarmTask</a> * BatchesController::getTask </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  524</span>                                                             {</div>
<div class="line"><span class="lineno">  525</span>  std::map&lt;QString, TFarmTask *&gt;::const_iterator it = m_tasks.find(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  526</span>  <span class="keywordflow">if</span> (it != m_tasks.end()) <span class="keywordflow">return</span> it-&gt;second;</div>
<div class="line"><span class="lineno">  527</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  528</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2c6fb61e5ef6c55a18e114fe658615dd" name="a2c6fb61e5ef6c55a18e114fe658615dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c6fb61e5ef6c55a18e114fe658615dd">&#9670;&nbsp;</a></span>getTask() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_farm_task.html">TFarmTask</a> * BatchesController::getTask </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  515</span>                                                     {</div>
<div class="line"><span class="lineno">  516</span>  assert(index &gt;= 0 &amp;&amp; index &lt; (<span class="keywordtype">int</span>)m_tasks.size());</div>
<div class="line"><span class="lineno">  517</span>  std::map&lt;QString, TFarmTask *&gt;::const_iterator it = m_tasks.begin();</div>
<div class="line"><span class="lineno">  518</span>  std::advance(it, index);</div>
<div class="line"><span class="lineno">  519</span>  <span class="keywordflow">return</span> it-&gt;second;</div>
<div class="line"><span class="lineno">  520</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1406df29a4281536df3cc5ea67a2d105" name="a1406df29a4281536df3cc5ea67a2d105"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1406df29a4281536df3cc5ea67a2d105">&#9670;&nbsp;</a></span>getTaskCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BatchesController::getTaskCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  502</span>{ <span class="keywordflow">return</span> m_tasks.size(); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="adcb6113509056b61eff95fd16047e329" name="adcb6113509056b61eff95fd16047e329"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcb6113509056b61eff95fd16047e329">&#9670;&nbsp;</a></span>getTaskId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QString BatchesController::getTaskId </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  506</span>                                                    {</div>
<div class="line"><span class="lineno">  507</span>  assert(index &gt;= 0 &amp;&amp; index &lt; (<span class="keywordtype">int</span>)m_tasks.size());</div>
<div class="line"><span class="lineno">  508</span>  std::map&lt;QString, TFarmTask *&gt;::const_iterator it = m_tasks.begin();</div>
<div class="line"><span class="lineno">  509</span>  std::advance(it, index);</div>
<div class="line"><span class="lineno">  510</span>  <span class="keywordflow">return</span> it-&gt;first;</div>
<div class="line"><span class="lineno">  511</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c7e0f94ac7b01b62a84a8a785ffd0d3" name="a8c7e0f94ac7b01b62a84a8a785ffd0d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c7e0f94ac7b01b62a84a8a785ffd0d3">&#9670;&nbsp;</a></span>getTaskInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BatchesController::getTaskInfo </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString &amp;&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TaskState &amp;&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  533</span>                                                                      {</div>
<div class="line"><span class="lineno">  534</span>  <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *task = getTask(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  535</span>  <span class="keywordflow">if</span> (task) {</div>
<div class="line"><span class="lineno">  536</span>    parent = task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a>;</div>
<div class="line"><span class="lineno">  537</span>    name   = task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a14686e563d198398938fa8a9ed8ffff2">m_name</a>;</div>
<div class="line"><span class="lineno">  538</span>    status = task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a>;</div>
<div class="line"><span class="lineno">  539</span>  }</div>
<div class="line"><span class="lineno">  540</span> </div>
<div class="line"><span class="lineno">  541</span>  <span class="keywordflow">return</span> task != 0;</div>
<div class="line"><span class="lineno">  542</span>}</div>
<div class="ttc" id="aclass_t_farm_task_html_a14686e563d198398938fa8a9ed8ffff2"><div class="ttname"><a href="class_t_farm_task.html#a14686e563d198398938fa8a9ed8ffff2">TFarmTask::m_name</a></div><div class="ttdeci">QString m_name</div><div class="ttdoc">User-readable name.</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:74</div></div>
<div class="ttc" id="aclass_t_farm_task_html_a93df061d1b990dc0c8f8149616b3fb0e"><div class="ttname"><a href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">TFarmTask::m_parentId</a></div><div class="ttdeci">Id m_parentId</div><div class="ttdoc">Task id of the parent task (if any)</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:69</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a405f14ff2b5da5c7d8370b182f8d93bd" name="a405f14ff2b5da5c7d8370b182f8d93bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a405f14ff2b5da5c7d8370b182f8d93bd">&#9670;&nbsp;</a></span>getTasks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::getTasks </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>parentId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; QString &gt; &amp;&#160;</td>
          <td class="paramname"><em>tasks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  573</span>                                                                  {</div>
<div class="line"><span class="lineno">  574</span>  std::map&lt;QString, TFarmTask *&gt;::const_iterator it = m_tasks.begin();</div>
<div class="line"><span class="lineno">  575</span>  <span class="keywordflow">for</span> (; it != m_tasks.end(); ++it) {</div>
<div class="line"><span class="lineno">  576</span>    <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *task = it-&gt;second;</div>
<div class="line"><span class="lineno">  577</span>    assert(task);</div>
<div class="line"><span class="lineno">  578</span>    <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a> == parentId) tasks.push_back(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>);</div>
<div class="line"><span class="lineno">  579</span>  }</div>
<div class="line"><span class="lineno">  580</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a275e0fdb3ab3aaee8503e35a5599a4b7" name="a275e0fdb3ab3aaee8503e35a5599a4b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a275e0fdb3ab3aaee8503e35a5599a4b7">&#9670;&nbsp;</a></span>getTaskStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TaskState BatchesController::getTaskStatus </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  546</span>                                                                  {</div>
<div class="line"><span class="lineno">  547</span>  <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *task = getTask(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  548</span>  <span class="keywordflow">if</span> (task)</div>
<div class="line"><span class="lineno">  549</span>    <span class="keywordflow">return</span> task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a>;</div>
<div class="line"><span class="lineno">  550</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  551</span>    <span class="keywordflow">return</span> TaskUnknown;</div>
<div class="line"><span class="lineno">  552</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afbf82c21d303ec546d67cf5c39cbafd2" name="afbf82c21d303ec546d67cf5c39cbafd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbf82c21d303ec546d67cf5c39cbafd2">&#9670;&nbsp;</a></span>getTasksTree()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_task_tree_model.html">TaskTreeModel</a> * BatchesController::getTasksTree </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   54</span>{ <span class="keywordflow">return</span> m_tasksTree; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2526727f29f49f8fe56b74f5b2aece76" name="a2526727f29f49f8fe56b74f5b2aece76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2526727f29f49f8fe56b74f5b2aece76">&#9670;&nbsp;</a></span>instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_batches_controller.html">BatchesController</a> * BatchesController::instance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1206</span>                                               {</div>
<div class="line"><span class="lineno"> 1207</span>  <span class="keywordflow">if</span> (!m_instance) {</div>
<div class="line"><span class="lineno"> 1208</span>    m_instance = <span class="keyword">new</span> <a class="code hl_class" href="class_batches_controller.html">BatchesController</a>;</div>
<div class="line"><span class="lineno"> 1209</span> </div>
<div class="line"><span class="lineno"> 1210</span>    <span class="comment">// scandisce un range di porte fino a troverne una libera da utilizzare come</span></div>
<div class="line"><span class="lineno"> 1211</span>    <span class="comment">// porta del local controller</span></div>
<div class="line"><span class="lineno"> 1212</span> </div>
<div class="line"><span class="lineno"> 1213</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> portRangeSize = 100;</div>
<div class="line"><span class="lineno"> 1214</span> </div>
<div class="line"><span class="lineno"> 1215</span>    <span class="keywordtype">int</span> i          = 0;</div>
<div class="line"><span class="lineno"> 1216</span>    <span class="keywordtype">int</span> portNumber = cPortNumber;</div>
<div class="line"><span class="lineno"> 1217</span>    <span class="keywordflow">for</span> (; i &lt; portRangeSize; ++i, ++portNumber) {</div>
<div class="line"><span class="lineno"> 1218</span>      <span class="keywordtype">bool</span> portBusy = TFarmStuff::testConnection(<span class="stringliteral">&quot;localhost&quot;</span>, portNumber);</div>
<div class="line"><span class="lineno"> 1219</span>      <span class="keywordflow">if</span> (!portBusy) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1220</span>    }</div>
<div class="line"><span class="lineno"> 1221</span> </div>
<div class="line"><span class="lineno"> 1222</span>    <span class="keywordflow">if</span> (i &lt; portRangeSize) {</div>
<div class="line"><span class="lineno"> 1223</span>      m_instance-&gt;m_localControllerPortNumber = portNumber;</div>
<div class="line"><span class="lineno"> 1224</span> </div>
<div class="line"><span class="lineno"> 1225</span>      <span class="comment">//      static MyLocalControllerController *TheLocalController =</span></div>
<div class="line"><span class="lineno"> 1226</span>      <span class="keyword">new</span> MyLocalControllerController(portNumber);</div>
<div class="line"><span class="lineno"> 1227</span>    }</div>
<div class="line"><span class="lineno"> 1228</span>  }</div>
<div class="line"><span class="lineno"> 1229</span>  <span class="keywordflow">return</span> m_instance;</div>
<div class="line"><span class="lineno"> 1230</span>}</div>
<div class="ttc" id="aclass_batches_controller_html"><div class="ttname"><a href="class_batches_controller.html">BatchesController</a></div><div class="ttdef"><b>Definition:</b> batches.h:28</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aae6c7b6875e9d20c4f078d30e2052a00" name="aae6c7b6875e9d20c4f078d30e2052a00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae6c7b6875e9d20c4f078d30e2052a00">&#9670;&nbsp;</a></span>load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::load </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  781</span>                             {</div>
<div class="line"><span class="lineno">  782</span>  <span class="keyword">static</span> <a class="code hl_class" href="class_load_task_list_popup.html">LoadTaskListPopup</a> *popup = 0;</div>
<div class="line"><span class="lineno">  783</span> </div>
<div class="line"><span class="lineno">  784</span>  <span class="keywordflow">if</span> (!popup) popup = <span class="keyword">new</span> <a class="code hl_class" href="class_load_task_list_popup.html">LoadTaskListPopup</a>();</div>
<div class="line"><span class="lineno">  785</span>  popup-&gt;exec();</div>
<div class="line"><span class="lineno">  786</span>}</div>
<div class="ttc" id="aclass_load_task_list_popup_html"><div class="ttname"><a href="class_load_task_list_popup.html">LoadTaskListPopup</a></div><div class="ttdef"><b>Definition:</b> batches.h:109</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d40b3c5326e114dfc0d227897921fac" name="a5d40b3c5326e114dfc0d227897921fac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d40b3c5326e114dfc0d227897921fac">&#9670;&nbsp;</a></span>loadTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::loadTask </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isRenderTask</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  789</span>                                                  {</div>
<div class="line"><span class="lineno">  790</span>  <span class="keyword">static</span> <a class="code hl_class" href="class_load_task_popup.html">LoadTaskPopup</a> *popup = <span class="keyword">new</span> <a class="code hl_class" href="class_load_task_popup.html">LoadTaskPopup</a>();</div>
<div class="line"><span class="lineno">  791</span>  popup-&gt;open(isRenderTask);</div>
<div class="line"><span class="lineno">  792</span>}</div>
<div class="ttc" id="aclass_load_task_popup_html"><div class="ttname"><a href="class_load_task_popup.html">LoadTaskPopup</a></div><div class="ttdef"><b>Definition:</b> batches.h:120</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af0c4381ebf25d652679a1870ba9c55a8" name="af0c4381ebf25d652679a1870ba9c55a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0c4381ebf25d652679a1870ba9c55a8">&#9670;&nbsp;</a></span>notify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::notify </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  936</span>                               {</div>
<div class="line"><span class="lineno">  937</span>  std::for_each(m_observers.begin(), m_observers.end(), notifyObserver);</div>
<div class="line"><span class="lineno">  938</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a78297b26c178f7637bd26a80919c93c4" name="a78297b26c178f7637bd26a80919c93c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78297b26c178f7637bd26a80919c93c4">&#9670;&nbsp;</a></span>onExit</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::onExit </td>
          <td>(</td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>ret</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  763</span>                                        {</div>
<div class="line"><span class="lineno">  764</span>  <span class="keywordtype">int</span> answer = 0;</div>
<div class="line"><span class="lineno">  765</span> </div>
<div class="line"><span class="lineno">  766</span>  <span class="keywordflow">if</span> (m_dirtyFlag)</div>
<div class="line"><span class="lineno">  767</span>    answer =</div>
<div class="line"><span class="lineno">  768</span>        DVGui::MsgBox(QString(tr(<span class="stringliteral">&quot;The current task list has been modified.\nDo &quot;</span></div>
<div class="line"><span class="lineno">  769</span>                                 <span class="stringliteral">&quot;you want to save your changes?&quot;</span>)),</div>
<div class="line"><span class="lineno">  770</span>                      tr(<span class="stringliteral">&quot;Save&quot;</span>), tr(<span class="stringliteral">&quot;Discard&quot;</span>), tr(<span class="stringliteral">&quot;Cancel&quot;</span>), 1);</div>
<div class="line"><span class="lineno">  771</span> </div>
<div class="line"><span class="lineno">  772</span>  ret = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  773</span>  <span class="keywordflow">if</span> (answer == 3)</div>
<div class="line"><span class="lineno">  774</span>    ret = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  775</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (answer == 1)</div>
<div class="line"><span class="lineno">  776</span>    save();</div>
<div class="line"><span class="lineno">  777</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3dda8208547576d66ea7541a801f888a" name="a3dda8208547576d66ea7541a801f888a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dda8208547576d66ea7541a801f888a">&#9670;&nbsp;</a></span>removeAllTasks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::removeAllTasks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  483</span>                                       {</div>
<div class="line"><span class="lineno">  484</span>  std::map&lt;QString, TFarmTask *&gt;::iterator tt, tEnd(m_tasks.end());</div>
<div class="line"><span class="lineno">  485</span>  <span class="keywordflow">for</span> (tt = m_tasks.begin(); tt != tEnd; ++tt) {</div>
<div class="line"><span class="lineno">  486</span>    <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *task = tt-&gt;second;</div>
<div class="line"><span class="lineno">  487</span>    <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Running || task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Waiting) {</div>
<div class="line"><span class="lineno">  488</span>      DVGui::warning(taskBusyStr().arg(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a14686e563d198398938fa8a9ed8ffff2">m_name</a>));</div>
<div class="line"><span class="lineno">  489</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  490</span>    }</div>
<div class="line"><span class="lineno">  491</span>  }</div>
<div class="line"><span class="lineno">  492</span> </div>
<div class="line"><span class="lineno">  493</span>  m_filepath = <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>();</div>
<div class="line"><span class="lineno">  494</span>  setDirtyFlag(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  495</span> </div>
<div class="line"><span class="lineno">  496</span>  m_tasks.clear();</div>
<div class="line"><span class="lineno">  497</span>  notify();</div>
<div class="line"><span class="lineno">  498</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad92494a02d0fde7e4da51cedba78e0bf" name="ad92494a02d0fde7e4da51cedba78e0bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad92494a02d0fde7e4da51cedba78e0bf">&#9670;&nbsp;</a></span>removeTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::removeTask </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  433</span>                                                    {</div>
<div class="line"><span class="lineno">  434</span>  std::map&lt;QString, TFarmTask *&gt;::iterator it = m_tasks.find(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  435</span>  <span class="keywordflow">if</span> (it == m_tasks.end()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  436</span> </div>
<div class="line"><span class="lineno">  437</span>  <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *task = it-&gt;second;</div>
<div class="line"><span class="lineno">  438</span>  <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Running || task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Waiting) {</div>
<div class="line"><span class="lineno">  439</span>    DVGui::warning(taskBusyStr().arg(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a14686e563d198398938fa8a9ed8ffff2">m_name</a>));</div>
<div class="line"><span class="lineno">  440</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  441</span>  }</div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span>  setDirtyFlag(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span>  <span class="keywordflow">if</span> (!task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a>.isEmpty()) {</div>
<div class="line"><span class="lineno">  446</span>    it                     = m_tasks.find(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a>);</div>
<div class="line"><span class="lineno">  447</span>    <a class="code hl_class" href="class_t_farm_task_group.html">TFarmTaskGroup</a> *parent = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_t_farm_task_group.html">TFarmTaskGroup</a> *<span class="keyword">&gt;</span>(it-&gt;second);</div>
<div class="line"><span class="lineno">  448</span>    assert(parent);</div>
<div class="line"><span class="lineno">  449</span>    parent-&gt;removeTask(task);</div>
<div class="line"><span class="lineno">  450</span>  }</div>
<div class="line"><span class="lineno">  451</span> </div>
<div class="line"><span class="lineno">  452</span>  <a class="code hl_class" href="class_t_farm_task_group.html">TFarmTaskGroup</a> *taskGroup = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_t_farm_task_group.html">TFarmTaskGroup</a> *<span class="keyword">&gt;</span>(task);</div>
<div class="line"><span class="lineno">  453</span>  <span class="keywordflow">if</span> (taskGroup) {</div>
<div class="line"><span class="lineno">  454</span>    <span class="keywordflow">if</span> (m_controller) {</div>
<div class="line"><span class="lineno">  455</span>      <span class="comment">// si sta usando la farm</span></div>
<div class="line"><span class="lineno">  456</span>      std::map&lt;QString, QString&gt;::iterator it = m_farmIdsTable.find(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  457</span>      <span class="keywordflow">if</span> (it != m_farmIdsTable.end()) {</div>
<div class="line"><span class="lineno">  458</span>        m_controller-&gt;suspendTask(it-&gt;second);</div>
<div class="line"><span class="lineno">  459</span>      }</div>
<div class="line"><span class="lineno">  460</span>    }</div>
<div class="line"><span class="lineno">  461</span> </div>
<div class="line"><span class="lineno">  462</span>    <span class="comment">// rimuove i subtask</span></div>
<div class="line"><span class="lineno">  463</span>    <span class="keywordtype">int</span> taskCount = taskGroup-&gt;getTaskCount();</div>
<div class="line"><span class="lineno">  464</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; taskCount; ++i) {</div>
<div class="line"><span class="lineno">  465</span>      <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *subTask = taskGroup-&gt;getTask(i);</div>
<div class="line"><span class="lineno">  466</span>      assert(subTask);</div>
<div class="line"><span class="lineno">  467</span>      m_tasks.erase(subTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>);</div>
<div class="line"><span class="lineno">  468</span>    }</div>
<div class="line"><span class="lineno">  469</span>  }</div>
<div class="line"><span class="lineno">  470</span> </div>
<div class="line"><span class="lineno">  471</span>  m_tasks.erase(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  472</span>  <span class="keyword">delete</span> task;</div>
<div class="line"><span class="lineno">  473</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afca4f3611db70966953975898a3d336b" name="afca4f3611db70966953975898a3d336b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afca4f3611db70966953975898a3d336b">&#9670;&nbsp;</a></span>save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::save </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  880</span>                             {</div>
<div class="line"><span class="lineno">  881</span>  <span class="keywordflow">if</span> (m_filepath.isEmpty())</div>
<div class="line"><span class="lineno">  882</span>    saveas();</div>
<div class="line"><span class="lineno">  883</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  884</span>    doSave();</div>
<div class="line"><span class="lineno">  885</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2b415b1d1d977be10e0922080575538d" name="a2b415b1d1d977be10e0922080575538d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b415b1d1d977be10e0922080575538d">&#9670;&nbsp;</a></span>saveas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::saveas </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  868</span>                               {</div>
<div class="line"><span class="lineno">  869</span>  <span class="keywordflow">if</span> (getTaskCount() == 0) {</div>
<div class="line"><span class="lineno">  870</span>    DVGui::warning(tr(<span class="stringliteral">&quot;The Task List is empty!&quot;</span>));</div>
<div class="line"><span class="lineno">  871</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  872</span>  }</div>
<div class="line"><span class="lineno">  873</span> </div>
<div class="line"><span class="lineno">  874</span>  <span class="keyword">static</span> <a class="code hl_class" href="class_save_task_list_popup.html">SaveTaskListPopup</a> *popup = 0;</div>
<div class="line"><span class="lineno">  875</span>  <span class="keywordflow">if</span> (!popup) popup               = <span class="keyword">new</span> <a class="code hl_class" href="class_save_task_list_popup.html">SaveTaskListPopup</a>();</div>
<div class="line"><span class="lineno">  876</span> </div>
<div class="line"><span class="lineno">  877</span>  popup-&gt;exec();</div>
<div class="line"><span class="lineno">  878</span>}</div>
<div class="ttc" id="aclass_save_task_list_popup_html"><div class="ttname"><a href="class_save_task_list_popup.html">SaveTaskListPopup</a></div><div class="ttdef"><b>Definition:</b> batches.h:134</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae179d66b33eb3ddc15689ea5cee9695b" name="ae179d66b33eb3ddc15689ea5cee9695b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae179d66b33eb3ddc15689ea5cee9695b">&#9670;&nbsp;</a></span>setController()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::setController </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_farm_controller.html">TFarmController</a> *&#160;</td>
          <td class="paramname"><em>controller</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  942</span>                                                                 {</div>
<div class="line"><span class="lineno">  943</span>  m_controller = controller;</div>
<div class="line"><span class="lineno">  944</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac94898c42a31de28e94114dfdb189305" name="ac94898c42a31de28e94114dfdb189305"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac94898c42a31de28e94114dfdb189305">&#9670;&nbsp;</a></span>setDirtyFlag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::setDirtyFlag </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  554</span>                                               {</div>
<div class="line"><span class="lineno">  555</span>  <span class="keyword">static</span> <span class="keywordtype">bool</span> FirstTime = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  556</span> </div>
<div class="line"><span class="lineno">  557</span>  <span class="keywordflow">if</span> (FirstTime) {</div>
<div class="line"><span class="lineno">  558</span>    FirstTime = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  559</span>    <span class="keywordtype">bool</span> ret  = connect(<a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;getMainWindow(), SIGNAL(exit(<span class="keywordtype">bool</span> &amp;)),</div>
<div class="line"><span class="lineno">  560</span>                       SLOT(onExit(<span class="keywordtype">bool</span> &amp;)));</div>
<div class="line"><span class="lineno">  561</span>    assert(ret);</div>
<div class="line"><span class="lineno">  562</span>  }</div>
<div class="line"><span class="lineno">  563</span> </div>
<div class="line"><span class="lineno">  564</span>  <span class="keywordflow">if</span> (state == m_dirtyFlag) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  565</span> </div>
<div class="line"><span class="lineno">  566</span>  m_dirtyFlag = state;</div>
<div class="line"><span class="lineno">  567</span>  update();</div>
<div class="line"><span class="lineno">  568</span>}</div>
<div class="ttc" id="aclass_t_app_html_a24088f8647d5d9447fcec6b9b9bbf9eb"><div class="ttname"><a href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a></div><div class="ttdeci">static TApp * instance()</div><div class="ttdef"><b>Definition:</b> tapp.cpp:215</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa4fb1bff8a363a183971890e1dfbfd4b" name="aa4fb1bff8a363a183971890e1dfbfd4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4fb1bff8a363a183971890e1dfbfd4b">&#9670;&nbsp;</a></span>setTasksTree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::setTasksTree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_task_tree_model.html">TaskTreeModel</a> *&#160;</td>
          <td class="paramname"><em>tree</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  285</span>                                                        {</div>
<div class="line"><span class="lineno">  286</span>  m_tasksTree = tree;</div>
<div class="line"><span class="lineno">  287</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6bb156b170444bb414301052e005c3d8" name="a6bb156b170444bb414301052e005c3d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bb156b170444bb414301052e005c3d8">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::start </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>taskId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  622</span>                                                   {</div>
<div class="line"><span class="lineno">  623</span>  QString computerName = QHostInfo().localHostName();</div>
<div class="line"><span class="lineno">  624</span> </div>
<div class="line"><span class="lineno">  625</span>  std::map&lt;QString, TFarmTask *&gt;::const_iterator it = m_tasks.find(taskId);</div>
<div class="line"><span class="lineno">  626</span>  assert(it != m_tasks.end());</div>
<div class="line"><span class="lineno">  627</span>  <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *task = it-&gt;second;</div>
<div class="line"><span class="lineno">  628</span>  assert(task);</div>
<div class="line"><span class="lineno">  629</span>  task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a>      = Waiting;</div>
<div class="line"><span class="lineno">  630</span>  task-&gt;m_failedSteps = task-&gt;m_successfullSteps = 0;</div>
<div class="line"><span class="lineno">  631</span>  task-&gt;m_completionDate = task-&gt;m_startDate = QDateTime();</div>
<div class="line"><span class="lineno">  632</span>  task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2bc14475ca393f8103b1d73fffd62e8d">m_callerMachineName</a>                  = computerName;</div>
<div class="line"><span class="lineno">  633</span>  <span class="keywordtype">int</span> count                                  = task-&gt;getTaskCount();</div>
<div class="line"><span class="lineno">  634</span>  <span class="keywordflow">if</span> (count &gt; 1)</div>
<div class="line"><span class="lineno">  635</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; ++i) {</div>
<div class="line"><span class="lineno">  636</span>      <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *subtask = task-&gt;getTask(i);</div>
<div class="line"><span class="lineno">  637</span>      assert(subtask);</div>
<div class="line"><span class="lineno">  638</span>      subtask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a>      = Waiting;</div>
<div class="line"><span class="lineno">  639</span>      subtask-&gt;m_failedSteps = subtask-&gt;m_successfullSteps = 0;</div>
<div class="line"><span class="lineno">  640</span>      subtask-&gt;m_completionDate = subtask-&gt;m_startDate = QDateTime();</div>
<div class="line"><span class="lineno">  641</span>      subtask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2bc14475ca393f8103b1d73fffd62e8d">m_callerMachineName</a>                     = computerName;</div>
<div class="line"><span class="lineno">  642</span>    }</div>
<div class="line"><span class="lineno">  643</span> </div>
<div class="line"><span class="lineno">  644</span>  <span class="comment">// viene usata la farm &lt;==&gt; m_controller != 0</span></div>
<div class="line"><span class="lineno">  645</span>  <span class="keywordflow">if</span> (!m_controller) {</div>
<div class="line"><span class="lineno">  646</span>    m_localExecutor.<a class="code hl_function" href="class_t_thread_1_1_executor.html#af31c8db8ac72df4c342e7769e95e2135">addTask</a>(<span class="keyword">new</span> <a class="code hl_class" href="class_task_runner.html">TaskRunner</a>(task, m_localControllerPortNumber));</div>
<div class="line"><span class="lineno">  647</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  648</span>    std::map&lt;QString, QString&gt;::iterator ktor = m_farmIdsTable.find(taskId);</div>
<div class="line"><span class="lineno">  649</span>    <span class="keywordflow">if</span> (ktor != m_farmIdsTable.end()) {</div>
<div class="line"><span class="lineno">  650</span>      QString farmTaskId = ktor-&gt;second;</div>
<div class="line"><span class="lineno">  651</span>      m_controller-&gt;restartTask(farmTaskId);</div>
<div class="line"><span class="lineno">  652</span> </div>
<div class="line"><span class="lineno">  653</span>      <span class="keywordflow">if</span> (<span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_t_farm_task_group.html">TFarmTaskGroup</a> *<span class="keyword">&gt;</span>(task)) {</div>
<div class="line"><span class="lineno">  654</span>        std::vector&lt;QString&gt; subtasks;</div>
<div class="line"><span class="lineno">  655</span>        m_controller-&gt;getTasks(farmTaskId, subtasks);</div>
<div class="line"><span class="lineno">  656</span> </div>
<div class="line"><span class="lineno">  657</span>        <span class="keywordflow">if</span> (!subtasks.empty()) {</div>
<div class="line"><span class="lineno">  658</span>          assert((<span class="keywordtype">int</span>)subtasks.size() == task-&gt;getTaskCount());</div>
<div class="line"><span class="lineno">  659</span> </div>
<div class="line"><span class="lineno">  660</span>          std::vector&lt;QString&gt;::iterator jtor = subtasks.begin();</div>
<div class="line"><span class="lineno">  661</span>          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; task-&gt;getTaskCount(); ++i, ++jtor)</div>
<div class="line"><span class="lineno">  662</span>            m_farmIdsTable.insert(</div>
<div class="line"><span class="lineno">  663</span>                std::make_pair(task-&gt;getTask(i)-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>, *jtor));</div>
<div class="line"><span class="lineno">  664</span>        }</div>
<div class="line"><span class="lineno">  665</span>      }</div>
<div class="line"><span class="lineno">  666</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  667</span>      <span class="keywordtype">bool</span> suspended = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  668</span>      QString <span class="keywordtype">id</span>     = m_controller-&gt;addTask(*task, suspended);</div>
<div class="line"><span class="lineno">  669</span>      m_farmIdsTable.insert(std::make_pair(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>, <span class="keywordtype">id</span>));</div>
<div class="line"><span class="lineno">  670</span> </div>
<div class="line"><span class="lineno">  671</span>      <span class="keywordflow">if</span> (<span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_t_farm_task_group.html">TFarmTaskGroup</a> *<span class="keyword">&gt;</span>(task)) {</div>
<div class="line"><span class="lineno">  672</span>        std::vector&lt;QString&gt; subtasks;</div>
<div class="line"><span class="lineno">  673</span>        m_controller-&gt;getTasks(<span class="keywordtype">id</span>, subtasks);</div>
<div class="line"><span class="lineno">  674</span>        assert((<span class="keywordtype">int</span>)subtasks.size() == task-&gt;getTaskCount());</div>
<div class="line"><span class="lineno">  675</span> </div>
<div class="line"><span class="lineno">  676</span>        std::vector&lt;QString&gt;::iterator jtor = subtasks.begin();</div>
<div class="line"><span class="lineno">  677</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; task-&gt;getTaskCount(); ++i, ++jtor)</div>
<div class="line"><span class="lineno">  678</span>          m_farmIdsTable.insert(std::make_pair(task-&gt;getTask(i)-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>, *jtor));</div>
<div class="line"><span class="lineno">  679</span>      }</div>
<div class="line"><span class="lineno">  680</span>    }</div>
<div class="line"><span class="lineno">  681</span>  }</div>
<div class="line"><span class="lineno">  682</span>  notify();</div>
<div class="line"><span class="lineno">  683</span>}</div>
<div class="ttc" id="aclass_t_farm_task_html_a2bc14475ca393f8103b1d73fffd62e8d"><div class="ttname"><a href="class_t_farm_task.html#a2bc14475ca393f8103b1d73fffd62e8d">TFarmTask::m_callerMachineName</a></div><div class="ttdeci">QString m_callerMachineName</div><div class="ttdoc">Name of the... caller (submitter?) machine.</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:77</div></div>
<div class="ttc" id="aclass_t_thread_1_1_executor_html_af31c8db8ac72df4c342e7769e95e2135"><div class="ttname"><a href="class_t_thread_1_1_executor.html#af31c8db8ac72df4c342e7769e95e2135">TThread::Executor::addTask</a></div><div class="ttdeci">void addTask(RunnableP task)</div><div class="ttdef"><b>Definition:</b> tthread.cpp:804</div></div>
<div class="ttc" id="aclass_task_runner_html"><div class="ttname"><a href="class_task_runner.html">TaskRunner</a></div><div class="ttdef"><b>Definition:</b> batches.cpp:140</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad7e89a6a6b82ede790b0a78217804dee" name="ad7e89a6a6b82ede790b0a78217804dee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7e89a6a6b82ede790b0a78217804dee">&#9670;&nbsp;</a></span>startAll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::startAll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  584</span>                                 {</div>
<div class="line"><span class="lineno">  585</span>  <span class="comment">// viene usata la farm &lt;==&gt; m_controller != 0</span></div>
<div class="line"><span class="lineno">  586</span>  <span class="keywordflow">if</span> (!m_controller) {</div>
<div class="line"><span class="lineno">  587</span>    <span class="comment">// uso una multimap per ordinare rispetto alla priority</span></div>
<div class="line"><span class="lineno">  588</span>    std::multimap&lt;int, TFarmTask *&gt; tasksByPriority;</div>
<div class="line"><span class="lineno">  589</span> </div>
<div class="line"><span class="lineno">  590</span>    std::map&lt;QString, TFarmTask *&gt;::reverse_iterator it = m_tasks.rbegin();</div>
<div class="line"><span class="lineno">  591</span>    <span class="comment">// uso il reverse iterator anche qui altrimenti se ho task con priorita&#39;</span></div>
<div class="line"><span class="lineno">  592</span>    <span class="comment">// uguale li esegue dall&#39;ultimo al primo</span></div>
<div class="line"><span class="lineno">  593</span>    <span class="keywordflow">for</span> (; it != m_tasks.rend(); ++it) {</div>
<div class="line"><span class="lineno">  594</span>      <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *task = it-&gt;second;</div>
<div class="line"><span class="lineno">  595</span>      tasksByPriority.insert(std::make_pair(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a7b0083ed49f8937a93c2de029352995c">m_priority</a>, task));</div>
<div class="line"><span class="lineno">  596</span>    }</div>
<div class="line"><span class="lineno">  597</span> </div>
<div class="line"><span class="lineno">  598</span>    std::multimap&lt;int, TFarmTask *&gt;::reverse_iterator it2 =</div>
<div class="line"><span class="lineno">  599</span>        tasksByPriority.rbegin();</div>
<div class="line"><span class="lineno">  600</span>    <span class="keywordflow">for</span> (; it2 != tasksByPriority.rend(); ++it2) {</div>
<div class="line"><span class="lineno">  601</span>      <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *task = it2-&gt;second;</div>
<div class="line"><span class="lineno">  602</span>      assert(task);</div>
<div class="line"><span class="lineno">  603</span>      task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = Waiting;</div>
<div class="line"><span class="lineno">  604</span>      <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a>.isEmpty())</div>
<div class="line"><span class="lineno">  605</span>        m_localExecutor.<a class="code hl_function" href="class_t_thread_1_1_executor.html#af31c8db8ac72df4c342e7769e95e2135">addTask</a>(</div>
<div class="line"><span class="lineno">  606</span>            <span class="keyword">new</span> <a class="code hl_class" href="class_task_runner.html">TaskRunner</a>(task, m_localControllerPortNumber));</div>
<div class="line"><span class="lineno">  607</span>    }</div>
<div class="line"><span class="lineno">  608</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  609</span>    std::map&lt;QString, TFarmTask *&gt;::const_iterator it = m_tasks.begin();</div>
<div class="line"><span class="lineno">  610</span>    <span class="keywordflow">for</span> (; it != m_tasks.end(); ++it) {</div>
<div class="line"><span class="lineno">  611</span>      <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *task = it-&gt;second;</div>
<div class="line"><span class="lineno">  612</span>      assert(task);</div>
<div class="line"><span class="lineno">  613</span>      <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a>.isEmpty()) start(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>);</div>
<div class="line"><span class="lineno">  614</span>    }</div>
<div class="line"><span class="lineno">  615</span>  }</div>
<div class="line"><span class="lineno">  616</span> </div>
<div class="line"><span class="lineno">  617</span>  notify();</div>
<div class="line"><span class="lineno">  618</span>}</div>
<div class="ttc" id="aclass_t_farm_task_html_a7b0083ed49f8937a93c2de029352995c"><div class="ttname"><a href="class_t_farm_task.html#a7b0083ed49f8937a93c2de029352995c">TFarmTask::m_priority</a></div><div class="ttdeci">int m_priority</div><div class="ttdoc">Priority value used for scheduling order.</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:79</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afd9928485e42f6fe4914d8cf9386f2d9" name="afd9928485e42f6fe4914d8cf9386f2d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd9928485e42f6fe4914d8cf9386f2d9">&#9670;&nbsp;</a></span>stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::stop </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>taskId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  687</span>                                                  {</div>
<div class="line"><span class="lineno">  688</span>  std::map&lt;QString, TFarmTask *&gt;::const_iterator it = m_tasks.find(taskId);</div>
<div class="line"><span class="lineno">  689</span>  <span class="keywordflow">if</span> (it == m_tasks.end()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  690</span> </div>
<div class="line"><span class="lineno">  691</span>  <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *task = it-&gt;second;</div>
<div class="line"><span class="lineno">  692</span>  assert(task);</div>
<div class="line"><span class="lineno">  693</span> </div>
<div class="line"><span class="lineno">  694</span>  <span class="comment">// Update the task status</span></div>
<div class="line"><span class="lineno">  695</span>  <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Waiting) task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = Suspended;</div>
<div class="line"><span class="lineno">  696</span> </div>
<div class="line"><span class="lineno">  697</span>  <span class="comment">// Local farm &lt;==&gt; m_controller != 0</span></div>
<div class="line"><span class="lineno">  698</span>  <span class="keywordflow">if</span> (!m_controller) {</div>
<div class="line"><span class="lineno">  699</span>    QMutexLocker sl(&amp;TasksMutex);</div>
<div class="line"><span class="lineno">  700</span>    std::map&lt;QString, QProcess *&gt;::iterator it;</div>
<div class="line"><span class="lineno">  701</span> </div>
<div class="line"><span class="lineno">  702</span>    <span class="comment">// Kill the associated process if any</span></div>
<div class="line"><span class="lineno">  703</span>    <span class="keywordflow">if</span> ((it = RunningTasks.find(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>)) != RunningTasks.end()) {</div>
<div class="line"><span class="lineno">  704</span>      it-&gt;second-&gt;kill();</div>
<div class="line"><span class="lineno">  705</span>      RunningTasks.erase(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>);</div>
<div class="line"><span class="lineno">  706</span>    }</div>
<div class="line"><span class="lineno">  707</span> </div>
<div class="line"><span class="lineno">  708</span>    <span class="comment">// Do the same for child tasks</span></div>
<div class="line"><span class="lineno">  709</span>    <span class="keywordtype">int</span> count = task-&gt;getTaskCount();</div>
<div class="line"><span class="lineno">  710</span>    <span class="keywordflow">if</span> (count &gt; 1) {</div>
<div class="line"><span class="lineno">  711</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; ++i) {</div>
<div class="line"><span class="lineno">  712</span>        <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *subtask                                  = task-&gt;getTask(i);</div>
<div class="line"><span class="lineno">  713</span>        <span class="keywordflow">if</span> (subtask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Waiting) subtask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = Suspended;</div>
<div class="line"><span class="lineno">  714</span>        <span class="keywordflow">if</span> ((it = RunningTasks.find(subtask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>)) != RunningTasks.end()) {</div>
<div class="line"><span class="lineno">  715</span>          it-&gt;second-&gt;kill();</div>
<div class="line"><span class="lineno">  716</span>          RunningTasks.erase(subtask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>);</div>
<div class="line"><span class="lineno">  717</span>        }</div>
<div class="line"><span class="lineno">  718</span>      }</div>
<div class="line"><span class="lineno">  719</span>    }</div>
<div class="line"><span class="lineno">  720</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  721</span>    std::map&lt;QString, QString&gt;::iterator it = m_farmIdsTable.find(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>);</div>
<div class="line"><span class="lineno">  722</span>    <span class="keywordflow">if</span> (it != m_farmIdsTable.end()) {</div>
<div class="line"><span class="lineno">  723</span>      QString farmId = it-&gt;second;</div>
<div class="line"><span class="lineno">  724</span>      m_controller-&gt;suspendTask(farmId);</div>
<div class="line"><span class="lineno">  725</span>    }</div>
<div class="line"><span class="lineno">  726</span>  }</div>
<div class="line"><span class="lineno">  727</span>  notify();</div>
<div class="line"><span class="lineno">  728</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a795de86a203d8d242d7dae193aee2a9f" name="a795de86a203d8d242d7dae193aee2a9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a795de86a203d8d242d7dae193aee2a9f">&#9670;&nbsp;</a></span>stopAll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::stopAll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  732</span>                                {</div>
<div class="line"><span class="lineno">  733</span>  <span class="keywordflow">if</span> (!m_controller) {</div>
<div class="line"><span class="lineno">  734</span>    <span class="comment">// Stop all running QProcesses</span></div>
<div class="line"><span class="lineno">  735</span>    QMutexLocker sl(&amp;TasksMutex);</div>
<div class="line"><span class="lineno">  736</span> </div>
<div class="line"><span class="lineno">  737</span>    std::map&lt;QString, QProcess *&gt;::iterator it;</div>
<div class="line"><span class="lineno">  738</span>    <span class="keywordflow">for</span> (it = RunningTasks.begin(); it != RunningTasks.end(); ++it)</div>
<div class="line"><span class="lineno">  739</span>      it-&gt;second-&gt;kill();</div>
<div class="line"><span class="lineno">  740</span> </div>
<div class="line"><span class="lineno">  741</span>    RunningTasks.clear();</div>
<div class="line"><span class="lineno">  742</span>    m_localExecutor.<a class="code hl_function" href="class_t_thread_1_1_executor.html#a3ebba69410a233ff1e5774d7e4d1246f">cancelAll</a>();</div>
<div class="line"><span class="lineno">  743</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  744</span>    <span class="comment">// Suspend all farmIds</span></div>
<div class="line"><span class="lineno">  745</span>    std::map&lt;QString, QString&gt;::iterator it;</div>
<div class="line"><span class="lineno">  746</span>    <span class="keywordflow">for</span> (it = m_farmIdsTable.begin(); it != m_farmIdsTable.end(); ++it) {</div>
<div class="line"><span class="lineno">  747</span>      QString farmId = it-&gt;second;</div>
<div class="line"><span class="lineno">  748</span>      m_controller-&gt;suspendTask(farmId);</div>
<div class="line"><span class="lineno">  749</span>    }</div>
<div class="line"><span class="lineno">  750</span>  }</div>
<div class="line"><span class="lineno">  751</span> </div>
<div class="line"><span class="lineno">  752</span>  <span class="comment">// Update all waiting task status</span></div>
<div class="line"><span class="lineno">  753</span>  std::map&lt;QString, TFarmTask *&gt;::iterator jt;</div>
<div class="line"><span class="lineno">  754</span>  <span class="keywordflow">for</span> (jt = m_tasks.begin(); jt != m_tasks.end(); ++jt) {</div>
<div class="line"><span class="lineno">  755</span>    <span class="keywordflow">if</span> (jt-&gt;second-&gt;m_status == Waiting) jt-&gt;second-&gt;m_status = Suspended;</div>
<div class="line"><span class="lineno">  756</span>  }</div>
<div class="line"><span class="lineno">  757</span> </div>
<div class="line"><span class="lineno">  758</span>  notify();</div>
<div class="line"><span class="lineno">  759</span>}</div>
<div class="ttc" id="aclass_t_thread_1_1_executor_html_a3ebba69410a233ff1e5774d7e4d1246f"><div class="ttname"><a href="class_t_thread_1_1_executor.html#a3ebba69410a233ff1e5774d7e4d1246f">TThread::Executor::cancelAll</a></div><div class="ttdeci">void cancelAll()</div><div class="ttdef"><b>Definition:</b> tthread.cpp:860</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ada2ea43207cdc70fe3d165e79d160ef7" name="ada2ea43207cdc70fe3d165e79d160ef7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada2ea43207cdc70fe3d165e79d160ef7">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BatchesController::update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  975</span>                               {</div>
<div class="line"><span class="lineno">  976</span>  <span class="keywordflow">if</span> (m_controller) {</div>
<div class="line"><span class="lineno">  977</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  978</span>      std::map&lt;QString, QString&gt;::iterator it = m_farmIdsTable.begin();</div>
<div class="line"><span class="lineno">  979</span>      <span class="keywordflow">for</span> (; it != m_farmIdsTable.end(); ++it) {</div>
<div class="line"><span class="lineno">  980</span>        QString farmTaskId    = it-&gt;second;</div>
<div class="line"><span class="lineno">  981</span>        QString batchesTaskId = it-&gt;first;</div>
<div class="line"><span class="lineno">  982</span> </div>
<div class="line"><span class="lineno">  983</span>        <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *batchesTask = getTask(batchesTaskId);</div>
<div class="line"><span class="lineno">  984</span>        <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> farmTask     = *batchesTask;</div>
<div class="line"><span class="lineno">  985</span> </div>
<div class="line"><span class="lineno">  986</span>        <span class="keywordflow">if</span> (batchesTask) {</div>
<div class="line"><span class="lineno">  987</span>          QString batchesTaskParentId = batchesTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a>;</div>
<div class="line"><span class="lineno">  988</span>          m_controller-&gt;queryTaskInfo(farmTaskId, farmTask);</div>
<div class="line"><span class="lineno">  989</span>          <span class="keywordtype">int</span> chunkSize            = batchesTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a9ea9d7e43106ac9bcde3a4d47885b4cf">m_chunkSize</a>;</div>
<div class="line"><span class="lineno">  990</span>          *batchesTask             = farmTask;</div>
<div class="line"><span class="lineno">  991</span>          batchesTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a9ea9d7e43106ac9bcde3a4d47885b4cf">m_chunkSize</a> = chunkSize;</div>
<div class="line"><span class="lineno">  992</span>          batchesTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>        = batchesTaskId;</div>
<div class="line"><span class="lineno">  993</span>          batchesTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a>  = batchesTaskParentId;</div>
<div class="line"><span class="lineno">  994</span>        }</div>
<div class="line"><span class="lineno">  995</span>      }</div>
<div class="line"><span class="lineno">  996</span>    } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;e) {</div>
<div class="line"><span class="lineno">  997</span>      ControllerFailureMsg(e).send();</div>
<div class="line"><span class="lineno">  998</span>    }</div>
<div class="line"><span class="lineno">  999</span>  }</div>
<div class="line"><span class="lineno"> 1000</span> </div>
<div class="line"><span class="lineno"> 1001</span>  std::map&lt;QString, TFarmTask *&gt;::iterator jtor = m_tasks.begin();</div>
<div class="line"><span class="lineno"> 1002</span>  <span class="keywordflow">for</span> (; jtor != m_tasks.end(); ++jtor) {</div>
<div class="line"><span class="lineno"> 1003</span>    <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *task = jtor-&gt;second;</div>
<div class="line"><span class="lineno"> 1004</span>    assert(task);</div>
<div class="line"><span class="lineno"> 1005</span>    <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Completed) m_farmIdsTable.erase(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>);</div>
<div class="line"><span class="lineno"> 1006</span>  }</div>
<div class="line"><span class="lineno"> 1007</span> </div>
<div class="line"><span class="lineno"> 1008</span>  assert(m_tasksTree);</div>
<div class="line"><span class="lineno"> 1009</span>  m_tasksTree-&gt;<a class="code hl_slot" href="class_task_tree_model.html#a233ffc1f04bbeeb77a32924656babe5a">setupModelData</a>();</div>
<div class="line"><span class="lineno"> 1010</span> </div>
<div class="line"><span class="lineno"> 1011</span>  notify();</div>
<div class="line"><span class="lineno"> 1012</span>}</div>
<div class="ttc" id="aclass_t_farm_task_html_a9ea9d7e43106ac9bcde3a4d47885b4cf"><div class="ttname"><a href="class_t_farm_task.html#a9ea9d7e43106ac9bcde3a4d47885b4cf">TFarmTask::m_chunkSize</a></div><div class="ttdeci">int m_chunkSize</div><div class="ttdoc">Sub-tasks size.</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:97</div></div>
<div class="ttc" id="aclass_task_tree_model_html_a233ffc1f04bbeeb77a32924656babe5a"><div class="ttname"><a href="class_task_tree_model.html#a233ffc1f04bbeeb77a32924656babe5a">TaskTreeModel::setupModelData</a></div><div class="ttdeci">void setupModelData()</div><div class="ttdoc">setupModelData() : refresh the model</div><div class="ttdef"><b>Definition:</b> tasksviewer.cpp:1336</div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>E:/opentoonz/toonz/sources/toonz/<a class="el" href="">batches.h</a></li>
<li>E:/opentoonz/toonz/sources/toonz/<a class="el" href="">batches.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
