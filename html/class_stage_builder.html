<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: StageBuilder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="class_stage_builder-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">StageBuilder Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_stage_builder_1_1_sub_x_sheet.html">SubXSheet</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a51495f271352c5cdd526ebcd3f1f9363"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><b>ShiftTraceGhostId</b> { <b>NO_GHOST</b>
, <b>FIRST_GHOST</b>
, <b>SECOND_GHOST</b>
, <b>TRACED</b>
 }</td></tr>
<tr class="separator:a51495f271352c5cdd526ebcd3f1f9363"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2aa20a61ca250dab7f1c780602aef2da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a2aa20a61ca250dab7f1c780602aef2da">addCell</a> (PlayerSet &amp;players, <a class="el" href="class_toonz_scene.html">ToonzScene</a> *scene, <a class="el" href="class_t_xsheet.html">TXsheet</a> *xsh, int row, int col, int level, int subSheetColIndex=-1)</td></tr>
<tr class="separator:a2aa20a61ca250dab7f1c780602aef2da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c1c9a8ab1830b4848e663d1d66c7d27"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a4c1c9a8ab1830b4848e663d1d66c7d27">addCellWithOnionSkin</a> (PlayerSet &amp;players, <a class="el" href="class_toonz_scene.html">ToonzScene</a> *scene, <a class="el" href="class_t_xsheet.html">TXsheet</a> *xsh, int row, int col, int level, int subSheetColIndex=-1)</td></tr>
<tr class="separator:a4c1c9a8ab1830b4848e663d1d66c7d27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aece86e937e6a719d64cbf75d4dc03e5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#aece86e937e6a719d64cbf75d4dc03e5e">addFrame</a> (PlayerSet &amp;players, <a class="el" href="class_toonz_scene.html">ToonzScene</a> *scene, <a class="el" href="class_t_xsheet.html">TXsheet</a> *xsh, int row, int level, bool includeUnvisible, bool checkPreviewVisibility, int subSheetColIndex=-1)</td></tr>
<tr class="separator:aece86e937e6a719d64cbf75d4dc03e5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfa9ec0326e2d6aff34e4d94a1c12f03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#acfa9ec0326e2d6aff34e4d94a1c12f03">addSimpleLevelFrame</a> (PlayerSet &amp;players, <a class="el" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a> *level, const <a class="el" href="class_t_frame_id.html">TFrameId</a> &amp;fid)</td></tr>
<tr class="separator:acfa9ec0326e2d6aff34e4d94a1c12f03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c5d29002a29453763337c7f6a32b4aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a4c5d29002a29453763337c7f6a32b4aa">visit</a> (PlayerSet &amp;players, <a class="el" href="class_stage_1_1_visitor.html">Visitor</a> &amp;visitor, bool isPlaying=false)</td></tr>
<tr class="separator:a4c5d29002a29453763337c7f6a32b4aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a29690cb79fcdc47365573678cfd8c238"><td class="memItemLeft" align="right" valign="top">PlayerSet&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a29690cb79fcdc47365573678cfd8c238">m_players</a></td></tr>
<tr class="separator:a29690cb79fcdc47365573678cfd8c238"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1335bb8e496143277ffef8066fa15c5e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; PlayerSet * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a1335bb8e496143277ffef8066fa15c5e">m_maskPool</a></td></tr>
<tr class="separator:a1335bb8e496143277ffef8066fa15c5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1740ffd9aec53133b88ff7ad04d893e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="class_z_placement.html">ZPlacement</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#aa1740ffd9aec53133b88ff7ad04d893e">m_placementStack</a></td></tr>
<tr class="separator:aa1740ffd9aec53133b88ff7ad04d893e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cb3d97d88ef502d767e619d7ad4e7ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_z_placement.html">ZPlacement</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a2cb3d97d88ef502d767e619d7ad4e7ef">m_cameraPlacement</a></td></tr>
<tr class="separator:a2cb3d97d88ef502d767e619d7ad4e7ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eb221fb6d49134f1e8a0254f39332cd"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="struct_stage_builder_1_1_sub_x_sheet.html">SubXSheet</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a1eb221fb6d49134f1e8a0254f39332cd">m_subXSheetStack</a></td></tr>
<tr class="separator:a1eb221fb6d49134f1e8a0254f39332cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e17a6dbe026d2e10604e7e2b83d399d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a5e17a6dbe026d2e10604e7e2b83d399d">m_masks</a></td></tr>
<tr class="separator:a5e17a6dbe026d2e10604e7e2b83d399d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ee60374e2f5f4d915793cd503a7bdaf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a6ee60374e2f5f4d915793cd503a7bdaf">m_onionSkinDistance</a></td></tr>
<tr class="separator:a6ee60374e2f5f4d915793cd503a7bdaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0464c80c751ac882d18cb8fc6aafcf21"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a0464c80c751ac882d18cb8fc6aafcf21">m_fade</a></td></tr>
<tr class="separator:a0464c80c751ac882d18cb8fc6aafcf21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3005326426895889a3f801efb998174d"><td class="memItemLeft" align="right" valign="top">ShiftTraceGhostId&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a3005326426895889a3f801efb998174d">m_shiftTraceGhostId</a></td></tr>
<tr class="separator:a3005326426895889a3f801efb998174d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc794dfbc4a98780a91a7f024cec2ee4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#afc794dfbc4a98780a91a7f024cec2ee4">m_camera3d</a></td></tr>
<tr class="separator:afc794dfbc4a98780a91a7f024cec2ee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb78f63ffe6a93c9e1f78bff0c330f71"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_onion_skin_mask.html">OnionSkinMask</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#abb78f63ffe6a93c9e1f78bff0c330f71">m_onionSkinMask</a></td></tr>
<tr class="separator:abb78f63ffe6a93c9e1f78bff0c330f71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a399a33c8cf38bb96c8769b57440f12a8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a399a33c8cf38bb96c8769b57440f12a8">m_currentColumnIndex</a></td></tr>
<tr class="separator:a399a33c8cf38bb96c8769b57440f12a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6280867b1af1dd143f20d97bc517b6c4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a6280867b1af1dd143f20d97bc517b6c4">m_ancestorColumnIndex</a></td></tr>
<tr class="separator:a6280867b1af1dd143f20d97bc517b6c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbea32a889325bbd8e72644a174d5193"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#afbea32a889325bbd8e72644a174d5193">m_currentXsheetLevel</a></td></tr>
<tr class="separator:afbea32a889325bbd8e72644a174d5193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1821428a800e68dcaa32c825bac33c9a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a1821428a800e68dcaa32c825bac33c9a">m_xsheetLevel</a></td></tr>
<tr class="separator:a1821428a800e68dcaa32c825bac33c9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a637b384da6847085e9d5d90846cc5f52"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_frame_id.html">TFrameId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a637b384da6847085e9d5d90846cc5f52">m_currentFrameId</a></td></tr>
<tr class="separator:a637b384da6847085e9d5d90846cc5f52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91d13b870eea5f0d2b4831470f86394a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a91d13b870eea5f0d2b4831470f86394a">m_isGuidedDrawingEnabled</a></td></tr>
<tr class="separator:a91d13b870eea5f0d2b4831470f86394a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7354ca81fdb2151131e9f399d2783498"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a7354ca81fdb2151131e9f399d2783498">m_guidedFrontStroke</a> = -1</td></tr>
<tr class="separator:a7354ca81fdb2151131e9f399d2783498"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d58ffedfaea24f2b262333b4075d472"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a4d58ffedfaea24f2b262333b4075d472">m_guidedBackStroke</a> = -1</td></tr>
<tr class="separator:a4d58ffedfaea24f2b262333b4075d472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3589395e6aca83cbb0d55d0386392f16"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="class_t_xsh_column.html">TXshColumn</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a3589395e6aca83cbb0d55d0386392f16">m_ancestors</a></td></tr>
<tr class="separator:a3589395e6aca83cbb0d55d0386392f16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a098288a79a7dd1c808c5005cf5b517bb"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_image_painter_1_1_visual_settings.html">ImagePainter::VisualSettings</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_stage_builder.html#a098288a79a7dd1c808c5005cf5b517bb">m_vs</a></td></tr>
<tr class="separator:a098288a79a7dd1c808c5005cf5b517bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >The <a class="el" href="class_stage_builder.html">StageBuilder</a> class finds and provides data for frame visualization. <br  />
 The class contains a <b>PlayerSet</b>, a vector of player, of all necessary information. </p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a51495f271352c5cdd526ebcd3f1f9363" name="a51495f271352c5cdd526ebcd3f1f9363"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51495f271352c5cdd526ebcd3f1f9363">&#9670;&nbsp;</a></span>ShiftTraceGhostId</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum StageBuilder::ShiftTraceGhostId</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  180</span>{ NO_GHOST, FIRST_GHOST, SECOND_GHOST, TRACED };</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a99b8dcb57bab53409592baf2f8da3e1b" name="a99b8dcb57bab53409592baf2f8da3e1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99b8dcb57bab53409592baf2f8da3e1b">&#9670;&nbsp;</a></span>StageBuilder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StageBuilder::StageBuilder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  281</span>    : m_onionSkinDistance(c_noOnionSkin)</div>
<div class="line"><span class="lineno">  282</span>    , m_camera3d(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  283</span>    , m_currentColumnIndex(-1)</div>
<div class="line"><span class="lineno">  284</span>    , m_ancestorColumnIndex(-1)</div>
<div class="line"><span class="lineno">  285</span>    , m_fade(0)</div>
<div class="line"><span class="lineno">  286</span>    , m_shiftTraceGhostId(NO_GHOST)</div>
<div class="line"><span class="lineno">  287</span>    , m_currentXsheetLevel(0)</div>
<div class="line"><span class="lineno">  288</span>    , m_xsheetLevel(0) {</div>
<div class="line"><span class="lineno">  289</span>  m_placementStack.push_back(<a class="code hl_class" href="class_z_placement.html">ZPlacement</a>());</div>
<div class="line"><span class="lineno">  290</span>}</div>
<div class="ttc" id="aclass_z_placement_html"><div class="ttname"><a href="class_z_placement.html">ZPlacement</a></div><div class="ttdef"><b>Definition:</b> stage.cpp:125</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abd3a25baa811fb300343baa92f9fbb13" name="abd3a25baa811fb300343baa92f9fbb13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd3a25baa811fb300343baa92f9fbb13">&#9670;&nbsp;</a></span>~StageBuilder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">StageBuilder::~StageBuilder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  294</span>{ clearPointerContainer(m_maskPool); }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2aa20a61ca250dab7f1c780602aef2da" name="a2aa20a61ca250dab7f1c780602aef2da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2aa20a61ca250dab7f1c780602aef2da">&#9670;&nbsp;</a></span>addCell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StageBuilder::addCell </td>
          <td>(</td>
          <td class="paramtype">PlayerSet &amp;&#160;</td>
          <td class="paramname"><em>players</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_toonz_scene.html">ToonzScene</a> *&#160;</td>
          <td class="paramname"><em>scene</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_xsheet.html">TXsheet</a> *&#160;</td>
          <td class="paramname"><em>xsh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>subSheetColIndex</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Add in <b>players</b> vector information about specify cell. <br  />
 Analyze cell in row <b>row</b> and column <b>col</b> of xsheet <b>xsh</b>. If level containing this cell is a simple level, <b><a class="el" href="class_t_xsh_simple_level.html" title="The TXshLevel specialization for image levels.">TXshSimpleLevel</a></b>, create a Pleyer object with information of the cell. Else if level is a child level, <b><a class="el" href="class_t_xsh_child_level.html">TXshChildLevel</a></b>, recall <b><a class="el" href="class_stage_builder.html#aece86e937e6a719d64cbf75d4dc03e5e">addFrame()</a></b>. </p>
<div class="fragment"><div class="line"><span class="lineno">  331</span>                                                                              {</div>
<div class="line"><span class="lineno">  332</span>  <span class="comment">// Local functions</span></div>
<div class="line"><span class="lineno">  333</span>  <span class="keyword">struct </span>locals {</div>
<div class="line"><span class="lineno">  334</span>    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> isMeshDeformed(<a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh, <a class="code hl_class" href="class_t_stage_object.html">TStageObject</a> *obj,</div>
<div class="line"><span class="lineno">  335</span>                                      <span class="keyword">const</span> <a class="code hl_class" href="class_image_painter_1_1_visual_settings.html">ImagePainter::VisualSettings</a> *vs) {</div>
<div class="line"><span class="lineno">  336</span>      <span class="keyword">const</span> <a class="code hl_class" href="class_t_stage_object_id.html">TStageObjectId</a> &amp;parentId = obj-&gt;<a class="code hl_function" href="class_t_stage_object.html#afb4724a8cc2ef7eb2c6c7585834210f2">getParent</a>();</div>
<div class="line"><span class="lineno">  337</span>      <span class="keywordflow">if</span> (parentId.<a class="code hl_function" href="class_t_stage_object_id.html#af6d13fcf31e7e10eef28f085855f469c">isColumn</a>() &amp;&amp; obj-&gt;<a class="code hl_function" href="class_t_stage_object.html#a6025ddfaaae4ebe384894230d69f0b46">getParentHandle</a>()[0] != <span class="charliteral">&#39;H&#39;</span>) {</div>
<div class="line"><span class="lineno">  338</span>        <a class="code hl_class" href="class_t_stage_object.html">TStageObject</a> *parentObj = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">getStageObject</a>(parentId);</div>
<div class="line"><span class="lineno">  339</span>        <span class="keywordflow">if</span> (!parentObj-&gt;<a class="code hl_function" href="class_t_stage_object.html#af2c5d9f172e73e4cb09b769700df3acb">getPlasticSkeletonDeformation</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  340</span> </div>
<div class="line"><span class="lineno">  341</span>        <a class="code hl_class" href="class_t_xsh_column.html">TXshColumn</a> *parentCol = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">getColumn</a>(parentId.getIndex());</div>
<div class="line"><span class="lineno">  342</span>        <span class="keywordflow">return</span> (parentCol-&gt;getColumnType() == TXshColumn::eMeshType) &amp;&amp;</div>
<div class="line"><span class="lineno">  343</span>               (parentCol != vs-&gt;<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#aafe14ec520424843ecd9aca4abf02bf0">m_plasticVisualSettings</a>.<a class="code hl_variable" href="struct_plastic_visual_settings.html#adff7a25870734f8d9e0d56ba0dd7486e">m_showOriginalColumn</a>);</div>
<div class="line"><span class="lineno">  344</span>      }</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  347</span>    }</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span>    <span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> applyPlasticDeform(</div>
<div class="line"><span class="lineno">  352</span>        <a class="code hl_class" href="class_t_xsh_column.html">TXshColumn</a> *col, <span class="keyword">const</span> <a class="code hl_class" href="class_image_painter_1_1_visual_settings.html">ImagePainter::VisualSettings</a> *vs) {</div>
<div class="line"><span class="lineno">  353</span>      <span class="keyword">const</span> <a class="code hl_struct" href="struct_plastic_visual_settings.html">PlasticVisualSettings</a> &amp;pvs = vs-&gt;<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#aafe14ec520424843ecd9aca4abf02bf0">m_plasticVisualSettings</a>;</div>
<div class="line"><span class="lineno">  354</span>      <span class="keywordflow">return</span> pvs.<a class="code hl_variable" href="struct_plastic_visual_settings.html#a59b9745ab0c48c32043c3742a4fc3c69">m_applyPlasticDeformation</a> &amp;&amp; (col != pvs.<a class="code hl_variable" href="struct_plastic_visual_settings.html#adff7a25870734f8d9e0d56ba0dd7486e">m_showOriginalColumn</a>);</div>
<div class="line"><span class="lineno">  355</span>    }</div>
<div class="line"><span class="lineno">  356</span>  };  <span class="comment">// locals</span></div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TXshColumnP</a> column = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">getColumn</a>(col);</div>
<div class="line"><span class="lineno">  359</span>  assert(column);</div>
<div class="line"><span class="lineno">  360</span> </div>
<div class="line"><span class="lineno">  361</span>  <a class="code hl_class" href="class_t_stage_object.html">TStageObject</a> *pegbar = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">getStageObject</a>(TStageObjectId::ColumnId(col));</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span>  <span class="comment">// Build affine placements</span></div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>  <a class="code hl_class" href="class_t_affine.html">TAffine</a> columnAff     = pegbar-&gt;getPlacement(row);</div>
<div class="line"><span class="lineno">  366</span>  <span class="keywordtype">double</span> columnZ        = pegbar-&gt;<a class="code hl_function" href="class_t_stage_object.html#a52b1a3ec50ed35fbc07c9a3b64ecc21c">getZ</a>(row);</div>
<div class="line"><span class="lineno">  367</span>  <span class="keywordtype">double</span> columnNoScaleZ = pegbar-&gt;<a class="code hl_function" href="class_t_stage_object.html#a5d01b3f25af51c058e46982ca047312d">getGlobalNoScaleZ</a>();</div>
<div class="line"><span class="lineno">  368</span> </div>
<div class="line"><span class="lineno">  369</span>  <a class="code hl_class" href="class_t_xsh_cell.html">TXshCell</a> cell = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(row, col);</div>
<div class="line"><span class="lineno">  370</span>  <a class="code hl_class" href="class_t_xsh_level.html">TXshLevel</a> *xl = cell.m_level.getPointer();</div>
<div class="line"><span class="lineno">  371</span> </div>
<div class="line"><span class="lineno">  372</span><span class="preprocessor">#if defined(x64)</span></div>
<div class="line"><span class="lineno">  373</span>  <span class="comment">// check the previous row for a stop motion layer</span></div>
<div class="line"><span class="lineno">  374</span>  <span class="keywordflow">if</span> (!xl) {</div>
<div class="line"><span class="lineno">  375</span>    <span class="keywordflow">if</span> (!m_liveViewImage) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  376</span>    cell = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(row - 1, col);</div>
<div class="line"><span class="lineno">  377</span>    xl   = cell.m_level.getPointer();</div>
<div class="line"><span class="lineno">  378</span>    <span class="keywordflow">if</span> (!xl) {</div>
<div class="line"><span class="lineno">  379</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  380</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  381</span>      xl                  = cell.m_level.getPointer();</div>
<div class="line"><span class="lineno">  382</span>      <a class="code hl_class" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a> *sl = xl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">getSimpleLevel</a>();</div>
<div class="line"><span class="lineno">  383</span>      <span class="keywordflow">if</span> (sl &amp;&amp; sl == m_liveViewPlayer.m_sl) {</div>
<div class="line"><span class="lineno">  384</span>        row -= 1;</div>
<div class="line"><span class="lineno">  385</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  386</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  387</span>    }</div>
<div class="line"><span class="lineno">  388</span>  }</div>
<div class="line"><span class="lineno">  389</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  390</span>  <span class="keywordflow">if</span> (!xl) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  391</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  392</span> </div>
<div class="line"><span class="lineno">  393</span>  <a class="code hl_class" href="class_z_placement.html">ZPlacement</a> cameraPlacement;</div>
<div class="line"><span class="lineno">  394</span>  <span class="keywordflow">if</span> (m_subXSheetStack.empty())</div>
<div class="line"><span class="lineno">  395</span>    cameraPlacement = m_cameraPlacement;</div>
<div class="line"><span class="lineno">  396</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  397</span>    cameraPlacement = m_subXSheetStack.back().m_camera;</div>
<div class="line"><span class="lineno">  398</span>  <a class="code hl_class" href="class_t_affine.html">TAffine</a> columnZaff;</div>
<div class="line"><span class="lineno">  399</span>  <span class="keywordtype">bool</span> columnBehindCamera = <a class="code hl_function" href="class_t_stage_object.html#a0f219cbc4e42269c0fbd073a62253218">TStageObject::perspective</a>(</div>
<div class="line"><span class="lineno">  400</span>      columnZaff, cameraPlacement.m_aff, cameraPlacement.m_z, columnAff,</div>
<div class="line"><span class="lineno">  401</span>      columnZ, columnNoScaleZ);</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>  <span class="keywordflow">if</span> (!columnBehindCamera) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  404</span> </div>
<div class="line"><span class="lineno">  405</span>  <a class="code hl_class" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a> *sl = xl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">getSimpleLevel</a>();</div>
<div class="line"><span class="lineno">  406</span> </div>
<div class="line"><span class="lineno">  407</span>  <span class="keywordtype">bool</span> storePlayer =</div>
<div class="line"><span class="lineno">  408</span>      sl || (xl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a6ef7d48e41f4f214b414e959512e6377">getChildLevel</a>() &amp;&amp;</div>
<div class="line"><span class="lineno">  409</span>             locals::applyPlasticDeform(column.getPointer(), m_vs) &amp;&amp;</div>
<div class="line"><span class="lineno">  410</span>             locals::isMeshDeformed(xsh, pegbar, m_vs));</div>
<div class="line"><span class="lineno">  411</span> </div>
<div class="line"><span class="lineno">  412</span>  <span class="keywordflow">if</span> (storePlayer) {</div>
<div class="line"><span class="lineno">  413</span>    <span class="comment">// Build and store a player</span></div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span>    <a class="code hl_class" href="class_stage_1_1_player.html">Player</a> player;</div>
<div class="line"><span class="lineno">  416</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#a6230d77933caf93b9699bd5e2de0d2b0">m_sl</a>                     = sl;</div>
<div class="line"><span class="lineno">  417</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#aba5bf8d012d1017e5fe66d5c4b1e27df">m_fid</a>                    = cell.m_frameId;</div>
<div class="line"><span class="lineno">  418</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#a7c4c0ed3570aba38a036023360724606">m_xsh</a>                    = xsh;</div>
<div class="line"><span class="lineno">  419</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#ac79a243d283085682ddcdb75f8a6e185">m_column</a>                 = col;</div>
<div class="line"><span class="lineno">  420</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#af88189b51ebf5b86f87f77281aba0ce1">m_frame</a>                  = row;</div>
<div class="line"><span class="lineno">  421</span>    player.m_currentFrameId         = m_currentFrameId;</div>
<div class="line"><span class="lineno">  422</span>    player.m_isGuidedDrawingEnabled = m_isGuidedDrawingEnabled;</div>
<div class="line"><span class="lineno">  423</span>    player.m_guidedFrontStroke      = m_guidedFrontStroke;</div>
<div class="line"><span class="lineno">  424</span>    player.m_guidedBackStroke       = m_guidedBackStroke;</div>
<div class="line"><span class="lineno">  425</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#a0495491ce47344daba1cd55e1b64905a">m_dpiAff</a> = sl ? getDpiAffine(sl, cell.m_frameId) : <a class="code hl_class" href="class_t_affine.html">TAffine</a>();</div>
<div class="line"><span class="lineno">  426</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#ae9146f2fdcb1837482abf535fc5622ef">m_onionSkinDistance</a> = m_onionSkinDistance;</div>
<div class="line"><span class="lineno">  427</span>    <span class="comment">// when visiting the subxsheet, valuate the subxsheet column index</span></div>
<div class="line"><span class="lineno">  428</span>    <span class="keywordtype">bool</span> isCurrent = (subSheetColIndex &gt;= 0)</div>
<div class="line"><span class="lineno">  429</span>                         ? (subSheetColIndex == m_currentColumnIndex)</div>
<div class="line"><span class="lineno">  430</span>                         : (col == m_currentColumnIndex);</div>
<div class="line"><span class="lineno">  431</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#aba32c099fd49a4343580c28ade32e144">m_isCurrentColumn</a>     = isCurrent;</div>
<div class="line"><span class="lineno">  432</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#affd2dfe55cdffea6d55be757f502df72">m_ancestorColumnIndex</a> = m_ancestorColumnIndex;</div>
<div class="line"><span class="lineno">  433</span>    player.m_masks               = m_masks;</div>
<div class="line"><span class="lineno">  434</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#a2b05fa8fdc95ac04a532fc2d227a3a81">m_opacity</a>             = column-&gt;getOpacity();</div>
<div class="line"><span class="lineno">  435</span>    player.m_filterColor         = column-&gt;getFilterColor();</div>
<div class="line"><span class="lineno">  436</span> </div>
<div class="line"><span class="lineno">  437</span>    <span class="keywordflow">if</span> (m_subXSheetStack.empty()) {</div>
<div class="line"><span class="lineno">  438</span>      player.<a class="code hl_variable" href="class_stage_1_1_player.html#a547b8839d602f6998a4b61a819478e6a">m_z</a>         = columnZ;</div>
<div class="line"><span class="lineno">  439</span>      player.<a class="code hl_variable" href="class_stage_1_1_player.html#a99c9004772f5575fb627dcfb29137459">m_placement</a> = m_camera3d ? columnAff : columnZaff;</div>
<div class="line"><span class="lineno">  440</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  441</span>      <span class="keyword">const</span> SubXSheet &amp;parent = m_subXSheetStack.back();</div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span>      player.<a class="code hl_variable" href="class_stage_1_1_player.html#a547b8839d602f6998a4b61a819478e6a">m_z</a> = parent.m_z;</div>
<div class="line"><span class="lineno">  444</span>      player.<a class="code hl_variable" href="class_stage_1_1_player.html#a99c9004772f5575fb627dcfb29137459">m_placement</a> =</div>
<div class="line"><span class="lineno">  445</span>          (m_camera3d ? parent.m_aff : parent.m_zaff) * columnZaff;</div>
<div class="line"><span class="lineno">  446</span>    }</div>
<div class="line"><span class="lineno">  447</span> </div>
<div class="line"><span class="lineno">  448</span>    <span class="keywordflow">if</span> (m_shiftTraceGhostId != NO_GHOST) {</div>
<div class="line"><span class="lineno">  449</span>      <span class="comment">// if F1, F2 or F3 key is pressed, then draw only the corresponding ghost</span></div>
<div class="line"><span class="lineno">  450</span>      <span class="keywordtype">int</span> flipKey = m_onionSkinMask.getGhostFlipKey();</div>
<div class="line"><span class="lineno">  451</span>      <span class="keywordflow">if</span> (Qt::Key_F1 &lt;= flipKey &amp;&amp; flipKey &lt;= Qt::Key_F3) {</div>
<div class="line"><span class="lineno">  452</span>        <span class="keywordflow">if</span> (m_shiftTraceGhostId == TRACED &amp;&amp; flipKey == Qt::Key_F2) {</div>
<div class="line"><span class="lineno">  453</span>          players.push_back(player);</div>
<div class="line"><span class="lineno">  454</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_shiftTraceGhostId == FIRST_GHOST &amp;&amp;</div>
<div class="line"><span class="lineno">  455</span>                   flipKey == Qt::Key_F1) {</div>
<div class="line"><span class="lineno">  456</span>          player.<a class="code hl_variable" href="class_stage_1_1_player.html#a99c9004772f5575fb627dcfb29137459">m_placement</a> =</div>
<div class="line"><span class="lineno">  457</span>              m_onionSkinMask.getShiftTraceGhostAff(0) * player.<a class="code hl_variable" href="class_stage_1_1_player.html#a99c9004772f5575fb627dcfb29137459">m_placement</a>;</div>
<div class="line"><span class="lineno">  458</span>          players.push_back(player);</div>
<div class="line"><span class="lineno">  459</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_shiftTraceGhostId == SECOND_GHOST &amp;&amp;</div>
<div class="line"><span class="lineno">  460</span>                   flipKey == Qt::Key_F3) {</div>
<div class="line"><span class="lineno">  461</span>          player.<a class="code hl_variable" href="class_stage_1_1_player.html#a99c9004772f5575fb627dcfb29137459">m_placement</a> =</div>
<div class="line"><span class="lineno">  462</span>              m_onionSkinMask.getShiftTraceGhostAff(1) * player.<a class="code hl_variable" href="class_stage_1_1_player.html#a99c9004772f5575fb627dcfb29137459">m_placement</a>;</div>
<div class="line"><span class="lineno">  463</span>          players.push_back(player);</div>
<div class="line"><span class="lineno">  464</span>        }</div>
<div class="line"><span class="lineno">  465</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  466</span>      }</div>
<div class="line"><span class="lineno">  467</span> </div>
<div class="line"><span class="lineno">  468</span>      <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  469</span>        <span class="keywordtype">int</span> opacity         = player.<a class="code hl_variable" href="class_stage_1_1_player.html#a2b05fa8fdc95ac04a532fc2d227a3a81">m_opacity</a>;</div>
<div class="line"><span class="lineno">  470</span>        player.<a class="code hl_variable" href="class_stage_1_1_player.html#aab56aced982252aafc6c06f1b66dbdac">m_bingoOrder</a> = 10;</div>
<div class="line"><span class="lineno">  471</span>        <span class="keywordflow">if</span> (m_onionSkinMask.getShiftTraceStatus() !=</div>
<div class="line"><span class="lineno">  472</span>            OnionSkinMask::ENABLED_WITHOUT_GHOST_MOVEMENTS) {</div>
<div class="line"><span class="lineno">  473</span>          <span class="keywordflow">if</span> (m_shiftTraceGhostId == FIRST_GHOST) {</div>
<div class="line"><span class="lineno">  474</span>            player.<a class="code hl_variable" href="class_stage_1_1_player.html#a2b05fa8fdc95ac04a532fc2d227a3a81">m_opacity</a> = 30;</div>
<div class="line"><span class="lineno">  475</span>            players.push_back(player);</div>
<div class="line"><span class="lineno">  476</span>            player.<a class="code hl_variable" href="class_stage_1_1_player.html#a2b05fa8fdc95ac04a532fc2d227a3a81">m_opacity</a>           = opacity;</div>
<div class="line"><span class="lineno">  477</span>            player.<a class="code hl_variable" href="class_stage_1_1_player.html#ae9146f2fdcb1837482abf535fc5622ef">m_onionSkinDistance</a> = -1;</div>
<div class="line"><span class="lineno">  478</span>            player.<a class="code hl_variable" href="class_stage_1_1_player.html#a99c9004772f5575fb627dcfb29137459">m_placement</a> =</div>
<div class="line"><span class="lineno">  479</span>                m_onionSkinMask.getShiftTraceGhostAff(0) * player.<a class="code hl_variable" href="class_stage_1_1_player.html#a99c9004772f5575fb627dcfb29137459">m_placement</a>;</div>
<div class="line"><span class="lineno">  480</span>          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_shiftTraceGhostId == SECOND_GHOST) {</div>
<div class="line"><span class="lineno">  481</span>            player.<a class="code hl_variable" href="class_stage_1_1_player.html#a2b05fa8fdc95ac04a532fc2d227a3a81">m_opacity</a> = 30;</div>
<div class="line"><span class="lineno">  482</span>            players.push_back(player);</div>
<div class="line"><span class="lineno">  483</span>            player.<a class="code hl_variable" href="class_stage_1_1_player.html#a2b05fa8fdc95ac04a532fc2d227a3a81">m_opacity</a>           = opacity;</div>
<div class="line"><span class="lineno">  484</span>            player.<a class="code hl_variable" href="class_stage_1_1_player.html#ae9146f2fdcb1837482abf535fc5622ef">m_onionSkinDistance</a> = 1;</div>
<div class="line"><span class="lineno">  485</span>            player.<a class="code hl_variable" href="class_stage_1_1_player.html#a99c9004772f5575fb627dcfb29137459">m_placement</a> =</div>
<div class="line"><span class="lineno">  486</span>                m_onionSkinMask.getShiftTraceGhostAff(1) * player.<a class="code hl_variable" href="class_stage_1_1_player.html#a99c9004772f5575fb627dcfb29137459">m_placement</a>;</div>
<div class="line"><span class="lineno">  487</span>          }</div>
<div class="line"><span class="lineno">  488</span>        }</div>
<div class="line"><span class="lineno">  489</span>      }</div>
<div class="line"><span class="lineno">  490</span>    }</div>
<div class="line"><span class="lineno">  491</span> </div>
<div class="line"><span class="lineno">  492</span>    players.push_back(player);</div>
<div class="line"><span class="lineno">  493</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_class" href="class_t_xsh_child_level.html">TXshChildLevel</a> *cl = xl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a6ef7d48e41f4f214b414e959512e6377">getChildLevel</a>()) {</div>
<div class="line"><span class="lineno">  494</span>    <span class="keywordtype">int</span> childRow         = cell.m_frameId.getNumber() - 1;</div>
<div class="line"><span class="lineno">  495</span>    <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *childXsheet = cl-&gt;getXsheet();</div>
<div class="line"><span class="lineno">  496</span>    <a class="code hl_class" href="class_t_stage_object_id.html">TStageObjectId</a> childCameraId =</div>
<div class="line"><span class="lineno">  497</span>        childXsheet-&gt;<a class="code hl_function" href="class_t_xsheet.html#a5dc925584e35e1678f5678b79c470959">getStageObjectTree</a>()-&gt;<a class="code hl_function" href="class_t_stage_object_tree.html#a7d63ae5d60c3a3aacf5da58c108ac167">getCurrentCameraId</a>();</div>
<div class="line"><span class="lineno">  498</span>    <a class="code hl_class" href="class_t_stage_object.html">TStageObject</a> *childCamera = childXsheet-&gt;<a class="code hl_function" href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">getStageObject</a>(childCameraId);</div>
<div class="line"><span class="lineno">  499</span>    <a class="code hl_class" href="class_t_affine.html">TAffine</a> childCameraAff    = childCamera-&gt;getPlacement(childRow);</div>
<div class="line"><span class="lineno">  500</span>    <span class="keywordtype">double</span> childCameraZ       = childCamera-&gt;<a class="code hl_function" href="class_t_stage_object.html#a52b1a3ec50ed35fbc07c9a3b64ecc21c">getZ</a>(childRow);</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>    std::vector&lt;UCHAR&gt; originalOpacity(childXsheet-&gt;<a class="code hl_function" href="class_t_xsheet.html#a17464dc5617cf87a46f03e1a52d36cc1">getColumnCount</a>());</div>
<div class="line"><span class="lineno">  503</span> </div>
<div class="line"><span class="lineno">  504</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = 0; c &lt; childXsheet-&gt;<a class="code hl_function" href="class_t_xsheet.html#a17464dc5617cf87a46f03e1a52d36cc1">getColumnCount</a>(); c++) {</div>
<div class="line"><span class="lineno">  505</span>      originalOpacity[c] = childXsheet-&gt;<a class="code hl_function" href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">getColumn</a>(c)-&gt;<a class="code hl_function" href="class_t_xsh_column.html#a265aebf0e35c7b434949c67076084cb8">getOpacity</a>();</div>
<div class="line"><span class="lineno">  506</span>      childXsheet-&gt;<a class="code hl_function" href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">getColumn</a>(c)-&gt;<a class="code hl_function" href="class_t_xsh_column.html#a603f665f9a11b08798a839cca4e0c8b3">setOpacity</a>(column-&gt;getOpacity());</div>
<div class="line"><span class="lineno">  507</span>    }</div>
<div class="line"><span class="lineno">  508</span> </div>
<div class="line"><span class="lineno">  509</span>    SubXSheet subXSheet;</div>
<div class="line"><span class="lineno">  510</span>    subXSheet.m_camera = <a class="code hl_class" href="class_z_placement.html">ZPlacement</a>(childCameraAff, childCameraZ);</div>
<div class="line"><span class="lineno">  511</span>    subXSheet.m_z      = columnZ;</div>
<div class="line"><span class="lineno">  512</span> </div>
<div class="line"><span class="lineno">  513</span>    <a class="code hl_class" href="class_t_affine.html">TAffine</a> childCameraZaff =</div>
<div class="line"><span class="lineno">  514</span>        childCameraAff *</div>
<div class="line"><span class="lineno">  515</span>        <a class="code hl_class" href="class_t_scale.html">TScale</a>((1000 + childCameraZ) / 1000);  <span class="comment">// TODO: put in some lib</span></div>
<div class="line"><span class="lineno">  516</span>    <a class="code hl_class" href="class_t_affine.html">TAffine</a> invChildCameraZaff = childCameraZaff.<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>();</div>
<div class="line"><span class="lineno">  517</span> </div>
<div class="line"><span class="lineno">  518</span>    subXSheet.m_aff  = columnAff * invChildCameraZaff;</div>
<div class="line"><span class="lineno">  519</span>    subXSheet.m_zaff = columnZaff * invChildCameraZaff;</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span>    <span class="keywordflow">if</span> (!m_subXSheetStack.empty()) {</div>
<div class="line"><span class="lineno">  522</span>      <span class="keyword">const</span> SubXSheet &amp;parentXSheet = m_subXSheetStack.back();</div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>      subXSheet.m_z =</div>
<div class="line"><span class="lineno">  525</span>          m_subXSheetStack.front().m_z;  <span class="comment">// Top-level xsheet cell&#39;s z</span></div>
<div class="line"><span class="lineno">  526</span>      subXSheet.m_aff  = parentXSheet.m_aff * subXSheet.m_aff;</div>
<div class="line"><span class="lineno">  527</span>      subXSheet.m_zaff = parentXSheet.m_zaff * subXSheet.m_zaff;</div>
<div class="line"><span class="lineno">  528</span>    }</div>
<div class="line"><span class="lineno">  529</span> </div>
<div class="line"><span class="lineno">  530</span>    m_subXSheetStack.push_back(subXSheet);</div>
<div class="line"><span class="lineno">  531</span> </div>
<div class="line"><span class="lineno">  532</span>    ++m_currentXsheetLevel;</div>
<div class="line"><span class="lineno">  533</span>    <span class="comment">// inherit the column index when visiting grandchild (sub-sub) sheet</span></div>
<div class="line"><span class="lineno">  534</span>    <span class="keywordtype">int</span> subCol = (subSheetColIndex &gt;= 0) ? subSheetColIndex : col;</div>
<div class="line"><span class="lineno">  535</span>    <a class="code hl_function" href="class_stage_builder.html#aece86e937e6a719d64cbf75d4dc03e5e">addFrame</a>(players, scene, childXsheet, childRow, level + 1, <span class="keyword">false</span>, <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  536</span>             subCol);</div>
<div class="line"><span class="lineno">  537</span>    --m_currentXsheetLevel;</div>
<div class="line"><span class="lineno">  538</span> </div>
<div class="line"><span class="lineno">  539</span>    m_subXSheetStack.pop_back();</div>
<div class="line"><span class="lineno">  540</span> </div>
<div class="line"><span class="lineno">  541</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = 0; c &lt; childXsheet-&gt;<a class="code hl_function" href="class_t_xsheet.html#a17464dc5617cf87a46f03e1a52d36cc1">getColumnCount</a>(); c++)</div>
<div class="line"><span class="lineno">  542</span>      childXsheet-&gt;<a class="code hl_function" href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">getColumn</a>(c)-&gt;<a class="code hl_function" href="class_t_xsh_column.html#a603f665f9a11b08798a839cca4e0c8b3">setOpacity</a>(originalOpacity[c]);</div>
<div class="line"><span class="lineno">  543</span>  }</div>
<div class="line"><span class="lineno">  544</span>}</div>
<div class="ttc" id="aclass_image_painter_1_1_visual_settings_html"><div class="ttname"><a href="class_image_painter_1_1_visual_settings.html">ImagePainter::VisualSettings</a></div><div class="ttdoc">Stores generic settings used by Toonz painters to draw images.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:41</div></div>
<div class="ttc" id="aclass_image_painter_1_1_visual_settings_html_aafe14ec520424843ecd9aca4abf02bf0"><div class="ttname"><a href="class_image_painter_1_1_visual_settings.html#aafe14ec520424843ecd9aca4abf02bf0">ImagePainter::VisualSettings::m_plasticVisualSettings</a></div><div class="ttdeci">PlasticVisualSettings m_plasticVisualSettings</div><div class="ttdef"><b>Definition:</b> imagepainter.h:53</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html"><div class="ttname"><a href="class_stage_1_1_player.html">Stage::Player</a></div><div class="ttdef"><b>Definition:</b> stageplayer.h:67</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html_a0495491ce47344daba1cd55e1b64905a"><div class="ttname"><a href="class_stage_1_1_player.html#a0495491ce47344daba1cd55e1b64905a">Stage::Player::m_dpiAff</a></div><div class="ttdeci">TAffine m_dpiAff</div><div class="ttdoc">The affine corresponding to m_image's dpi.</div><div class="ttdef"><b>Definition:</b> stageplayer.h:72</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html_a2b05fa8fdc95ac04a532fc2d227a3a81"><div class="ttname"><a href="class_stage_1_1_player.html#a2b05fa8fdc95ac04a532fc2d227a3a81">Stage::Player::m_opacity</a></div><div class="ttdeci">UCHAR m_opacity</div><div class="ttdoc">Opacity the image should be rendered with.</div><div class="ttdef"><b>Definition:</b> stageplayer.h:104</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html_a547b8839d602f6998a4b61a819478e6a"><div class="ttname"><a href="class_stage_1_1_player.html#a547b8839d602f6998a4b61a819478e6a">Stage::Player::m_z</a></div><div class="ttdeci">double m_z</div><div class="ttdoc">Z coordinate of the rendered image (? cumulative ?)</div><div class="ttdef"><b>Definition:</b> stageplayer.h:74</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html_a6230d77933caf93b9699bd5e2de0d2b0"><div class="ttname"><a href="class_stage_1_1_player.html#a6230d77933caf93b9699bd5e2de0d2b0">Stage::Player::m_sl</a></div><div class="ttdeci">TXshSimpleLevel * m_sl</div><div class="ttdoc">(not owned) The player's simple level</div><div class="ttdef"><b>Definition:</b> stageplayer.h:91</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html_a7c4c0ed3570aba38a036023360724606"><div class="ttname"><a href="class_stage_1_1_player.html#a7c4c0ed3570aba38a036023360724606">Stage::Player::m_xsh</a></div><div class="ttdeci">TXsheet * m_xsh</div><div class="ttdoc">(not owned) The player's xsheet</div><div class="ttdef"><b>Definition:</b> stageplayer.h:95</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html_a99c9004772f5575fb627dcfb29137459"><div class="ttname"><a href="class_stage_1_1_player.html#a99c9004772f5575fb627dcfb29137459">Stage::Player::m_placement</a></div><div class="ttdeci">TAffine m_placement</div><div class="ttdoc">Placement affine (no dpi)</div><div class="ttdef"><b>Definition:</b> stageplayer.h:71</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html_aab56aced982252aafc6c06f1b66dbdac"><div class="ttname"><a href="class_stage_1_1_player.html#aab56aced982252aafc6c06f1b66dbdac">Stage::Player::m_bingoOrder</a></div><div class="ttdeci">int m_bingoOrder</div><div class="ttdoc">Probably obsolete. Ignore it.</div><div class="ttdef"><b>Definition:</b> stageplayer.h:105</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html_aba32c099fd49a4343580c28ade32e144"><div class="ttname"><a href="class_stage_1_1_player.html#aba32c099fd49a4343580c28ade32e144">Stage::Player::m_isCurrentColumn</a></div><div class="ttdeci">bool m_isCurrentColumn</div><div class="ttdef"><b>Definition:</b> stageplayer.h:82</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html_aba5bf8d012d1017e5fe66d5c4b1e27df"><div class="ttname"><a href="class_stage_1_1_player.html#aba5bf8d012d1017e5fe66d5c4b1e27df">Stage::Player::m_fid</a></div><div class="ttdeci">TFrameId m_fid</div><div class="ttdoc">The player's frame in m_sl.</div><div class="ttdef"><b>Definition:</b> stageplayer.h:92</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html_ac79a243d283085682ddcdb75f8a6e185"><div class="ttname"><a href="class_stage_1_1_player.html#ac79a243d283085682ddcdb75f8a6e185">Stage::Player::m_column</a></div><div class="ttdeci">int m_column</div><div class="ttdoc">The player's xsheet column.</div><div class="ttdef"><b>Definition:</b> stageplayer.h:96</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html_ae9146f2fdcb1837482abf535fc5622ef"><div class="ttname"><a href="class_stage_1_1_player.html#ae9146f2fdcb1837482abf535fc5622ef">Stage::Player::m_onionSkinDistance</a></div><div class="ttdeci">int m_onionSkinDistance</div><div class="ttdef"><b>Definition:</b> stageplayer.h:77</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html_af88189b51ebf5b86f87f77281aba0ce1"><div class="ttname"><a href="class_stage_1_1_player.html#af88189b51ebf5b86f87f77281aba0ce1">Stage::Player::m_frame</a></div><div class="ttdeci">int m_frame</div><div class="ttdef"><b>Definition:</b> stageplayer.h:97</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html_affd2dfe55cdffea6d55be757f502df72"><div class="ttname"><a href="class_stage_1_1_player.html#affd2dfe55cdffea6d55be757f502df72">Stage::Player::m_ancestorColumnIndex</a></div><div class="ttdeci">int m_ancestorColumnIndex</div><div class="ttdef"><b>Definition:</b> stageplayer.h:80</div></div>
<div class="ttc" id="aclass_stage_builder_html_aece86e937e6a719d64cbf75d4dc03e5e"><div class="ttname"><a href="class_stage_builder.html#aece86e937e6a719d64cbf75d4dc03e5e">StageBuilder::addFrame</a></div><div class="ttdeci">void addFrame(PlayerSet &amp;players, ToonzScene *scene, TXsheet *xsh, int row, int level, bool includeUnvisible, bool checkPreviewVisibility, int subSheetColIndex=-1)</div><div class="ttdef"><b>Definition:</b> stage.cpp:662</div></div>
<div class="ttc" id="aclass_t_affine_html"><div class="ttname"><a href="class_t_affine.html">TAffine</a></div><div class="ttdoc">This is the base class for the affine transformations.</div><div class="ttdef"><b>Definition:</b> tgeometry.h:864</div></div>
<div class="ttc" id="aclass_t_affine_html_a570529b96b1ec5abc711aaa9aac09ff9"><div class="ttname"><a href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">TAffine::inv</a></div><div class="ttdeci">TAffine inv() const</div><div class="ttdef"><b>Definition:</b> tgeometry.cpp:55</div></div>
<div class="ttc" id="aclass_t_scale_html"><div class="ttname"><a href="class_t_scale.html">TScale</a></div><div class="ttdef"><b>Definition:</b> tgeometry.h:1133</div></div>
<div class="ttc" id="aclass_t_smart_pointer_t_html"><div class="ttname"><a href="class_t_smart_pointer_t.html">TSmartPointerT&lt; TXshColumn &gt;</a></div></div>
<div class="ttc" id="aclass_t_stage_object_html"><div class="ttname"><a href="class_t_stage_object.html">TStageObject</a></div><div class="ttdef"><b>Definition:</b> tstageobject.h:95</div></div>
<div class="ttc" id="aclass_t_stage_object_html_a0f219cbc4e42269c0fbd073a62253218"><div class="ttname"><a href="class_t_stage_object.html#a0f219cbc4e42269c0fbd073a62253218">TStageObject::perspective</a></div><div class="ttdeci">static bool perspective(TAffine &amp;aff, const TAffine &amp;cameraAff, double cameraZ, const TAffine &amp;objectAff, double objectZ, double objectNoScaleZ)</div><div class="ttdef"><b>Definition:</b> tstageobject.cpp:1945</div></div>
<div class="ttc" id="aclass_t_stage_object_html_a52b1a3ec50ed35fbc07c9a3b64ecc21c"><div class="ttname"><a href="class_t_stage_object.html#a52b1a3ec50ed35fbc07c9a3b64ecc21c">TStageObject::getZ</a></div><div class="ttdeci">double getZ(double frame)</div><div class="ttdef"><b>Definition:</b> tstageobject.cpp:1423</div></div>
<div class="ttc" id="aclass_t_stage_object_html_a5d01b3f25af51c058e46982ca047312d"><div class="ttname"><a href="class_t_stage_object.html#a5d01b3f25af51c058e46982ca047312d">TStageObject::getGlobalNoScaleZ</a></div><div class="ttdeci">double getGlobalNoScaleZ() const</div><div class="ttdoc">Returns the absolute depth with no scale factor.</div><div class="ttdef"><b>Definition:</b> tstageobject.cpp:1443</div></div>
<div class="ttc" id="aclass_t_stage_object_html_a6025ddfaaae4ebe384894230d69f0b46"><div class="ttname"><a href="class_t_stage_object.html#a6025ddfaaae4ebe384894230d69f0b46">TStageObject::getParentHandle</a></div><div class="ttdeci">const std::string &amp; getParentHandle() const</div><div class="ttdef"><b>Definition:</b> tstageobject.h:277</div></div>
<div class="ttc" id="aclass_t_stage_object_html_af2c5d9f172e73e4cb09b769700df3acb"><div class="ttname"><a href="class_t_stage_object.html#af2c5d9f172e73e4cb09b769700df3acb">TStageObject::getPlasticSkeletonDeformation</a></div><div class="ttdeci">PlasticSkeletonDeformationP getPlasticSkeletonDeformation() const</div><div class="ttdoc">Returns the stored skeleton deformation, if any.</div><div class="ttdef"><b>Definition:</b> tstageobject.cpp:1144</div></div>
<div class="ttc" id="aclass_t_stage_object_html_afb4724a8cc2ef7eb2c6c7585834210f2"><div class="ttname"><a href="class_t_stage_object.html#afb4724a8cc2ef7eb2c6c7585834210f2">TStageObject::getParent</a></div><div class="ttdeci">TStageObjectId getParent() const</div><div class="ttdef"><b>Definition:</b> tstageobject.cpp:632</div></div>
<div class="ttc" id="aclass_t_stage_object_id_html"><div class="ttname"><a href="class_t_stage_object_id.html">TStageObjectId</a></div><div class="ttdef"><b>Definition:</b> tstageobjectid.h:36</div></div>
<div class="ttc" id="aclass_t_stage_object_id_html_af6d13fcf31e7e10eef28f085855f469c"><div class="ttname"><a href="class_t_stage_object_id.html#af6d13fcf31e7e10eef28f085855f469c">TStageObjectId::isColumn</a></div><div class="ttdeci">bool isColumn() const</div><div class="ttdef"><b>Definition:</b> tstageobject.cpp:180</div></div>
<div class="ttc" id="aclass_t_stage_object_tree_html_a7d63ae5d60c3a3aacf5da58c108ac167"><div class="ttname"><a href="class_t_stage_object_tree.html#a7d63ae5d60c3a3aacf5da58c108ac167">TStageObjectTree::getCurrentCameraId</a></div><div class="ttdeci">TStageObjectId getCurrentCameraId() const</div><div class="ttdef"><b>Definition:</b> tstageobjecttree.cpp:508</div></div>
<div class="ttc" id="aclass_t_xsh_cell_html"><div class="ttname"><a href="class_t_xsh_cell.html">TXshCell</a></div><div class="ttdef"><b>Definition:</b> txshcell.h:35</div></div>
<div class="ttc" id="aclass_t_xsh_child_level_html"><div class="ttname"><a href="class_t_xsh_child_level.html">TXshChildLevel</a></div><div class="ttdef"><b>Definition:</b> txshchildlevel.h:39</div></div>
<div class="ttc" id="aclass_t_xsh_column_html"><div class="ttname"><a href="class_t_xsh_column.html">TXshColumn</a></div><div class="ttdoc">The TXshColumn class is the base class of column managers in xsheet.</div><div class="ttdef"><b>Definition:</b> txshcolumn.h:65</div></div>
<div class="ttc" id="aclass_t_xsh_column_html_a265aebf0e35c7b434949c67076084cb8"><div class="ttname"><a href="class_t_xsh_column.html#a265aebf0e35c7b434949c67076084cb8">TXshColumn::getOpacity</a></div><div class="ttdeci">UCHAR getOpacity() const</div><div class="ttdef"><b>Definition:</b> txshcolumn.h:164</div></div>
<div class="ttc" id="aclass_t_xsh_column_html_a603f665f9a11b08798a839cca4e0c8b3"><div class="ttname"><a href="class_t_xsh_column.html#a603f665f9a11b08798a839cca4e0c8b3">TXshColumn::setOpacity</a></div><div class="ttdeci">void setOpacity(UCHAR val)</div><div class="ttdef"><b>Definition:</b> txshcolumn.h:170</div></div>
<div class="ttc" id="aclass_t_xsh_level_html"><div class="ttname"><a href="class_t_xsh_level.html">TXshLevel</a></div><div class="ttdoc">The TXshLevel class is the base class of level managers in xsheet.</div><div class="ttdef"><b>Definition:</b> txshlevel.h:50</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_a023065559cff76164ecb6344c586ba27"><div class="ttname"><a href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">TXshLevel::getSimpleLevel</a></div><div class="ttdeci">virtual TXshSimpleLevel * getSimpleLevel()</div><div class="ttdoc">Method (to be overridden in subclasses) to downcast to TXshSimpleLevel.</div><div class="ttdef"><b>Definition:</b> txshlevel.h:95</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_a6ef7d48e41f4f214b414e959512e6377"><div class="ttname"><a href="class_t_xsh_level.html#a6ef7d48e41f4f214b414e959512e6377">TXshLevel::getChildLevel</a></div><div class="ttdeci">virtual TXshChildLevel * getChildLevel()</div><div class="ttdoc">Method (to be overridden in subclasses) to downcast to TXshChildLevel.</div><div class="ttdef"><b>Definition:</b> txshlevel.h:98</div></div>
<div class="ttc" id="aclass_t_xsh_simple_level_html"><div class="ttname"><a href="class_t_xsh_simple_level.html">TXshSimpleLevel</a></div><div class="ttdoc">The TXshLevel specialization for image levels.</div><div class="ttdef"><b>Definition:</b> txshsimplelevel.h:60</div></div>
<div class="ttc" id="aclass_t_xsheet_html"><div class="ttname"><a href="class_t_xsheet.html">TXsheet</a></div><div class="ttdef"><b>Definition:</b> txsheet.h:132</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a13d9b9c08ca8dde39769f5644e046ee5"><div class="ttname"><a href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">TXsheet::getStageObject</a></div><div class="ttdeci">TStageObject * getStageObject(const TStageObjectId &amp;id) const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:542</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a17464dc5617cf87a46f03e1a52d36cc1"><div class="ttname"><a href="class_t_xsheet.html#a17464dc5617cf87a46f03e1a52d36cc1">TXsheet::getColumnCount</a></div><div class="ttdeci">int getColumnCount() const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:1425</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a1ae81edf03bc7527176c84478c350f57"><div class="ttname"><a href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">TXsheet::getCell</a></div><div class="ttdeci">const TXshCell &amp; getCell(int row, int col) const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:233</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a3e1a216c019a0ebdf73d95acac95d8d0"><div class="ttname"><a href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">TXsheet::getColumn</a></div><div class="ttdeci">TXshColumn * getColumn(int index) const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:1418</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a5dc925584e35e1678f5678b79c470959"><div class="ttname"><a href="class_t_xsheet.html#a5dc925584e35e1678f5678b79c470959">TXsheet::getStageObjectTree</a></div><div class="ttdeci">TStageObjectTree * getStageObjectTree() const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:549</div></div>
<div class="ttc" id="astruct_plastic_visual_settings_html"><div class="ttname"><a href="struct_plastic_visual_settings.html">PlasticVisualSettings</a></div><div class="ttdef"><b>Definition:</b> plasticvisualsettings.h:22</div></div>
<div class="ttc" id="astruct_plastic_visual_settings_html_a59b9745ab0c48c32043c3742a4fc3c69"><div class="ttname"><a href="struct_plastic_visual_settings.html#a59b9745ab0c48c32043c3742a4fc3c69">PlasticVisualSettings::m_applyPlasticDeformation</a></div><div class="ttdeci">bool m_applyPlasticDeformation</div><div class="ttdoc">the original image should be displayed instead.</div><div class="ttdef"><b>Definition:</b> plasticvisualsettings.h:23</div></div>
<div class="ttc" id="astruct_plastic_visual_settings_html_adff7a25870734f8d9e0d56ba0dd7486e"><div class="ttname"><a href="struct_plastic_visual_settings.html#adff7a25870734f8d9e0d56ba0dd7486e">PlasticVisualSettings::m_showOriginalColumn</a></div><div class="ttdeci">TXshColumn * m_showOriginalColumn</div><div class="ttdef"><b>Definition:</b> plasticvisualsettings.h:26</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00662">addFrame()</a>, <a class="el" href="#l00233">TXsheet::getCell()</a>, <a class="el" href="#l00098">TXshLevel::getChildLevel()</a>, <a class="el" href="#l01418">TXsheet::getColumn()</a>, <a class="el" href="#l01425">TXsheet::getColumnCount()</a>, <a class="el" href="#l00508">TStageObjectTree::getCurrentCameraId()</a>, <a class="el" href="#l01443">TStageObject::getGlobalNoScaleZ()</a>, <a class="el" href="#l00164">TXshColumn::getOpacity()</a>, <a class="el" href="#l00632">TStageObject::getParent()</a>, <a class="el" href="#l00277">TStageObject::getParentHandle()</a>, <a class="el" href="#l01144">TStageObject::getPlasticSkeletonDeformation()</a>, <a class="el" href="#l00095">TXshLevel::getSimpleLevel()</a>, <a class="el" href="#l00542">TXsheet::getStageObject()</a>, <a class="el" href="#l00549">TXsheet::getStageObjectTree()</a>, <a class="el" href="#l01423">TStageObject::getZ()</a>, <a class="el" href="#l00055">TAffine::inv()</a>, <a class="el" href="#l00180">TStageObjectId::isColumn()</a>, <a class="el" href="#l00080">Stage::Player::m_ancestorColumnIndex</a>, <a class="el" href="#l00023">PlasticVisualSettings::m_applyPlasticDeformation</a>, <a class="el" href="#l00105">Stage::Player::m_bingoOrder</a>, <a class="el" href="#l00096">Stage::Player::m_column</a>, <a class="el" href="#l00072">Stage::Player::m_dpiAff</a>, <a class="el" href="#l00092">Stage::Player::m_fid</a>, <a class="el" href="#l00097">Stage::Player::m_frame</a>, <a class="el" href="#l00082">Stage::Player::m_isCurrentColumn</a>, <a class="el" href="#l00077">Stage::Player::m_onionSkinDistance</a>, <a class="el" href="#l00104">Stage::Player::m_opacity</a>, <a class="el" href="#l00071">Stage::Player::m_placement</a>, <a class="el" href="#l00053">ImagePainter::VisualSettings::m_plasticVisualSettings</a>, <a class="el" href="#l00026">PlasticVisualSettings::m_showOriginalColumn</a>, <a class="el" href="#l00091">Stage::Player::m_sl</a>, <a class="el" href="#l00095">Stage::Player::m_xsh</a>, <a class="el" href="#l00074">Stage::Player::m_z</a>, <a class="el" href="#l01945">TStageObject::perspective()</a>, and <a class="el" href="#l00170">TXshColumn::setOpacity()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00560">addCellWithOnionSkin()</a>.</p>

</div>
</div>
<a id="a4c1c9a8ab1830b4848e663d1d66c7d27" name="a4c1c9a8ab1830b4848e663d1d66c7d27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c1c9a8ab1830b4848e663d1d66c7d27">&#9670;&nbsp;</a></span>addCellWithOnionSkin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StageBuilder::addCellWithOnionSkin </td>
          <td>(</td>
          <td class="paramtype">PlayerSet &amp;&#160;</td>
          <td class="paramname"><em>players</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_toonz_scene.html">ToonzScene</a> *&#160;</td>
          <td class="paramname"><em>scene</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_xsheet.html">TXsheet</a> *&#160;</td>
          <td class="paramname"><em>xsh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>subSheetColIndex</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Verify if onion-skin is active and recall <b><a class="el" href="class_stage_builder.html#a2aa20a61ca250dab7f1c780602aef2da">addCell()</a></b>. <br  />
 Compute the distance between each cell with active onion-skin and current cell and recall <b><a class="el" href="class_stage_builder.html#a2aa20a61ca250dab7f1c780602aef2da">addCell()</a></b>. If onion-skin is not active recall <b><a class="el" href="class_stage_builder.html#a2aa20a61ca250dab7f1c780602aef2da">addCell()</a></b> with argument current cell. </p>
<div class="fragment"><div class="line"><span class="lineno">  562</span>                                                                         {</div>
<div class="line"><span class="lineno">  563</span>  <span class="keyword">struct </span>locals {</div>
<div class="line"><span class="lineno">  564</span>    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> hasOnionSkinnedMeshParent(<a class="code hl_class" href="class_stage_builder.html">StageBuilder</a> *sb, <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh,</div>
<div class="line"><span class="lineno">  565</span>                                                 <span class="keywordtype">int</span> col) {</div>
<div class="line"><span class="lineno">  566</span>      <span class="keyword">const</span> <a class="code hl_class" href="class_t_stage_object_id.html">TStageObjectId</a> &amp;parentId =</div>
<div class="line"><span class="lineno">  567</span>          xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">getStageObject</a>(TStageObjectId::ColumnId(col))-&gt;<a class="code hl_function" href="class_t_stage_object.html#afb4724a8cc2ef7eb2c6c7585834210f2">getParent</a>();</div>
<div class="line"><span class="lineno">  568</span> </div>
<div class="line"><span class="lineno">  569</span>      <span class="keywordflow">return</span> parentId.<a class="code hl_function" href="class_t_stage_object_id.html#af6d13fcf31e7e10eef28f085855f469c">isColumn</a>() &amp;&amp;</div>
<div class="line"><span class="lineno">  570</span>             (parentId.getIndex() == sb-&gt;m_currentColumnIndex);</div>
<div class="line"><span class="lineno">  571</span>    }</div>
<div class="line"><span class="lineno">  572</span> </div>
<div class="line"><span class="lineno">  573</span>    <span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><span class="lineno">  574</span> </div>
<div class="line"><span class="lineno">  575</span>    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> doStandardOnionSkin(<a class="code hl_class" href="class_stage_builder.html">StageBuilder</a> *sb, <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh,</div>
<div class="line"><span class="lineno">  576</span>                                           <span class="keywordtype">int</span> level, <span class="keywordtype">int</span> col) {</div>
<div class="line"><span class="lineno">  577</span>      <span class="keyword">const</span> <a class="code hl_class" href="class_onion_skin_mask.html">OnionSkinMask</a> &amp;osm = sb-&gt;m_onionSkinMask;</div>
<div class="line"><span class="lineno">  578</span> </div>
<div class="line"><span class="lineno">  579</span>      <span class="keywordflow">return</span> level == sb-&gt;m_xsheetLevel &amp;&amp; osm.isEnabled() &amp;&amp; !osm.isEmpty() &amp;&amp;</div>
<div class="line"><span class="lineno">  580</span>             (osm.isWholeScene() || col == sb-&gt;m_currentColumnIndex ||</div>
<div class="line"><span class="lineno">  581</span>              locals::hasOnionSkinnedMeshParent(sb, xsh, col));</div>
<div class="line"><span class="lineno">  582</span>    }</div>
<div class="line"><span class="lineno">  583</span>  };  <span class="comment">// locals</span></div>
<div class="line"><span class="lineno">  584</span> </div>
<div class="line"><span class="lineno">  585</span>  <span class="keywordflow">if</span> (m_onionSkinMask.isShiftTraceEnabled()) {</div>
<div class="line"><span class="lineno">  586</span>    <span class="comment">// when visiting the subxsheet, valuate the subxsheet column index</span></div>
<div class="line"><span class="lineno">  587</span>    <span class="keywordtype">bool</span> isCurrent = (subSheetColIndex &gt;= 0)</div>
<div class="line"><span class="lineno">  588</span>                         ? (subSheetColIndex == m_currentColumnIndex)</div>
<div class="line"><span class="lineno">  589</span>                         : (col == m_currentColumnIndex);</div>
<div class="line"><span class="lineno">  590</span>    <span class="keywordflow">if</span> (isCurrent) {</div>
<div class="line"><span class="lineno">  591</span>      <a class="code hl_class" href="class_t_xsh_cell.html">TXshCell</a> cell = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(row, col);</div>
<div class="line"><span class="lineno">  592</span> </div>
<div class="line"><span class="lineno">  593</span>      <span class="comment">// First Ghost</span></div>
<div class="line"><span class="lineno">  594</span>      <span class="keywordtype">int</span> r;</div>
<div class="line"><span class="lineno">  595</span>      r = row + m_onionSkinMask.getShiftTraceGhostFrameOffset(0);</div>
<div class="line"><span class="lineno">  596</span>      <span class="keywordflow">if</span> (r &gt;= 0 &amp;&amp; xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(r, col) != cell &amp;&amp;</div>
<div class="line"><span class="lineno">  597</span>          (cell.<a class="code hl_function" href="class_t_xsh_cell.html#a8898cc47eba24e59477bfba8e2511f1d">getSimpleLevel</a>() == 0 ||</div>
<div class="line"><span class="lineno">  598</span>           xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(r, col).<a class="code hl_function" href="class_t_xsh_cell.html#a8898cc47eba24e59477bfba8e2511f1d">getSimpleLevel</a>() == cell.<a class="code hl_function" href="class_t_xsh_cell.html#a8898cc47eba24e59477bfba8e2511f1d">getSimpleLevel</a>())) {</div>
<div class="line"><span class="lineno">  599</span>        m_shiftTraceGhostId = FIRST_GHOST;</div>
<div class="line"><span class="lineno">  600</span>        <a class="code hl_function" href="class_stage_builder.html#a2aa20a61ca250dab7f1c780602aef2da">addCell</a>(players, scene, xsh, r, col, level, subSheetColIndex);</div>
<div class="line"><span class="lineno">  601</span>      }</div>
<div class="line"><span class="lineno">  602</span> </div>
<div class="line"><span class="lineno">  603</span>      r = row + m_onionSkinMask.getShiftTraceGhostFrameOffset(1);</div>
<div class="line"><span class="lineno">  604</span>      <span class="keywordflow">if</span> (r &gt;= 0 &amp;&amp; xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(r, col) != cell &amp;&amp;</div>
<div class="line"><span class="lineno">  605</span>          (cell.<a class="code hl_function" href="class_t_xsh_cell.html#a8898cc47eba24e59477bfba8e2511f1d">getSimpleLevel</a>() == 0 ||</div>
<div class="line"><span class="lineno">  606</span>           xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(r, col).<a class="code hl_function" href="class_t_xsh_cell.html#a8898cc47eba24e59477bfba8e2511f1d">getSimpleLevel</a>() == cell.<a class="code hl_function" href="class_t_xsh_cell.html#a8898cc47eba24e59477bfba8e2511f1d">getSimpleLevel</a>())) {</div>
<div class="line"><span class="lineno">  607</span>        m_shiftTraceGhostId = SECOND_GHOST;</div>
<div class="line"><span class="lineno">  608</span>        <a class="code hl_function" href="class_stage_builder.html#a2aa20a61ca250dab7f1c780602aef2da">addCell</a>(players, scene, xsh, r, col, level, subSheetColIndex);</div>
<div class="line"><span class="lineno">  609</span>      }</div>
<div class="line"><span class="lineno">  610</span> </div>
<div class="line"><span class="lineno">  611</span>      <span class="comment">// draw current working frame</span></div>
<div class="line"><span class="lineno">  612</span>      <span class="keywordflow">if</span> (!cell.<a class="code hl_function" href="class_t_xsh_cell.html#a5d20229e7bcd19957b123959e58a833e">isEmpty</a>()) {</div>
<div class="line"><span class="lineno">  613</span>        m_shiftTraceGhostId = TRACED;</div>
<div class="line"><span class="lineno">  614</span>        <a class="code hl_function" href="class_stage_builder.html#a2aa20a61ca250dab7f1c780602aef2da">addCell</a>(players, scene, xsh, row, col, level, subSheetColIndex);</div>
<div class="line"><span class="lineno">  615</span>        m_shiftTraceGhostId = NO_GHOST;</div>
<div class="line"><span class="lineno">  616</span>      }</div>
<div class="line"><span class="lineno">  617</span>    }</div>
<div class="line"><span class="lineno">  618</span>    <span class="comment">// flip non-current columns as well</span></div>
<div class="line"><span class="lineno">  619</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  620</span>      <span class="keywordtype">int</span> flipKey = m_onionSkinMask.getGhostFlipKey();</div>
<div class="line"><span class="lineno">  621</span>      <span class="keywordflow">if</span> (flipKey == Qt::Key_F1) {</div>
<div class="line"><span class="lineno">  622</span>        <span class="keywordtype">int</span> r = row + m_onionSkinMask.getShiftTraceGhostFrameOffset(0);</div>
<div class="line"><span class="lineno">  623</span>        <a class="code hl_function" href="class_stage_builder.html#a2aa20a61ca250dab7f1c780602aef2da">addCell</a>(players, scene, xsh, r, col, level, subSheetColIndex);</div>
<div class="line"><span class="lineno">  624</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flipKey == Qt::Key_F3) {</div>
<div class="line"><span class="lineno">  625</span>        <span class="keywordtype">int</span> r = row + m_onionSkinMask.getShiftTraceGhostFrameOffset(1);</div>
<div class="line"><span class="lineno">  626</span>        <a class="code hl_function" href="class_stage_builder.html#a2aa20a61ca250dab7f1c780602aef2da">addCell</a>(players, scene, xsh, r, col, level, subSheetColIndex);</div>
<div class="line"><span class="lineno">  627</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  628</span>        <a class="code hl_function" href="class_stage_builder.html#a2aa20a61ca250dab7f1c780602aef2da">addCell</a>(players, scene, xsh, row, col, level, subSheetColIndex);</div>
<div class="line"><span class="lineno">  629</span>    }</div>
<div class="line"><span class="lineno">  630</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (locals::doStandardOnionSkin(<span class="keyword">this</span>, xsh, level, col)) {</div>
<div class="line"><span class="lineno">  631</span>    std::vector&lt;int&gt; rows;</div>
<div class="line"><span class="lineno">  632</span>    m_onionSkinMask.<a class="code hl_function" href="class_onion_skin_mask.html#a9e64f221d9750268f449668afb614c11">getAll</a>(row, rows);</div>
<div class="line"><span class="lineno">  633</span>    std::vector&lt;int&gt;::iterator it = rows.begin();</div>
<div class="line"><span class="lineno">  634</span>    <span class="keywordflow">while</span> (it != rows.end() &amp;&amp; *it &lt; row) it++;</div>
<div class="line"><span class="lineno">  635</span>    std::sort(rows.begin(), it, descending);</div>
<div class="line"><span class="lineno">  636</span> </div>
<div class="line"><span class="lineno">  637</span>    <span class="keywordtype">int</span> frontPos = 0, backPos = 0;</div>
<div class="line"><span class="lineno">  638</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; (int)rows.size(); i++) {</div>
<div class="line"><span class="lineno">  639</span>      <span class="keywordflow">if</span> (rows[i] == row) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  640</span> </div>
<div class="line"><span class="lineno">  641</span><span class="preprocessor">#ifdef NUOVO_ONION</span></div>
<div class="line"><span class="lineno">  642</span>      m_onionSkinDistance = rows[i] - row;</div>
<div class="line"><span class="lineno">  643</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  644</span>      <span class="keywordflow">if</span> (!Preferences::instance()-&gt;isAnimationSheetEnabled() ||</div>
<div class="line"><span class="lineno">  645</span>          !alreadyAdded(xsh, row, i, rows, col)) {</div>
<div class="line"><span class="lineno">  646</span>        m_onionSkinDistance = (rows[i] - row) &lt; 0 ? --backPos : ++frontPos;</div>
<div class="line"><span class="lineno">  647</span>        <a class="code hl_function" href="class_stage_builder.html#a2aa20a61ca250dab7f1c780602aef2da">addCell</a>(players, scene, xsh, rows[i], col, level, subSheetColIndex);</div>
<div class="line"><span class="lineno">  648</span>      }</div>
<div class="line"><span class="lineno">  649</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  650</span>    }</div>
<div class="line"><span class="lineno">  651</span> </div>
<div class="line"><span class="lineno">  652</span>    m_onionSkinDistance = 0;</div>
<div class="line"><span class="lineno">  653</span>    <a class="code hl_function" href="class_stage_builder.html#a2aa20a61ca250dab7f1c780602aef2da">addCell</a>(players, scene, xsh, row, col, level, subSheetColIndex);</div>
<div class="line"><span class="lineno">  654</span> </div>
<div class="line"><span class="lineno">  655</span>    m_onionSkinDistance = c_noOnionSkin;</div>
<div class="line"><span class="lineno">  656</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  657</span>    <a class="code hl_function" href="class_stage_builder.html#a2aa20a61ca250dab7f1c780602aef2da">addCell</a>(players, scene, xsh, row, col, level, subSheetColIndex);</div>
<div class="line"><span class="lineno">  658</span>}</div>
<div class="ttc" id="aclass_onion_skin_mask_html"><div class="ttname"><a href="class_onion_skin_mask.html">OnionSkinMask</a></div><div class="ttdef"><b>Definition:</b> onionskinmask.h:39</div></div>
<div class="ttc" id="aclass_onion_skin_mask_html_a9e64f221d9750268f449668afb614c11"><div class="ttname"><a href="class_onion_skin_mask.html#a9e64f221d9750268f449668afb614c11">OnionSkinMask::getAll</a></div><div class="ttdeci">void getAll(int currentRow, std::vector&lt; int &gt; &amp;output) const</div><div class="ttdoc">Fills in the output vector with the absolute frames to be onion-skinned.</div><div class="ttdef"><b>Definition:</b> onionskinmask.cpp:73</div></div>
<div class="ttc" id="aclass_stage_builder_html"><div class="ttname"><a href="class_stage_builder.html">StageBuilder</a></div><div class="ttdef"><b>Definition:</b> stage.cpp:171</div></div>
<div class="ttc" id="aclass_stage_builder_html_a2aa20a61ca250dab7f1c780602aef2da"><div class="ttname"><a href="class_stage_builder.html#a2aa20a61ca250dab7f1c780602aef2da">StageBuilder::addCell</a></div><div class="ttdeci">void addCell(PlayerSet &amp;players, ToonzScene *scene, TXsheet *xsh, int row, int col, int level, int subSheetColIndex=-1)</div><div class="ttdef"><b>Definition:</b> stage.cpp:330</div></div>
<div class="ttc" id="aclass_t_xsh_cell_html_a5d20229e7bcd19957b123959e58a833e"><div class="ttname"><a href="class_t_xsh_cell.html#a5d20229e7bcd19957b123959e58a833e">TXshCell::isEmpty</a></div><div class="ttdeci">bool isEmpty() const</div><div class="ttdef"><b>Definition:</b> txshcell.h:78</div></div>
<div class="ttc" id="aclass_t_xsh_cell_html_a8898cc47eba24e59477bfba8e2511f1d"><div class="ttname"><a href="class_t_xsh_cell.html#a8898cc47eba24e59477bfba8e2511f1d">TXshCell::getSimpleLevel</a></div><div class="ttdeci">TXshSimpleLevel * getSimpleLevel() const</div><div class="ttdef"><b>Definition:</b> txshcell.cpp:19</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00330">addCell()</a>, <a class="el" href="#l00073">OnionSkinMask::getAll()</a>, <a class="el" href="#l00233">TXsheet::getCell()</a>, <a class="el" href="#l00632">TStageObject::getParent()</a>, <a class="el" href="#l00019">TXshCell::getSimpleLevel()</a>, <a class="el" href="#l00542">TXsheet::getStageObject()</a>, <a class="el" href="#l00180">TStageObjectId::isColumn()</a>, and <a class="el" href="#l00078">TXshCell::isEmpty()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00662">addFrame()</a>.</p>

</div>
</div>
<a id="aece86e937e6a719d64cbf75d4dc03e5e" name="aece86e937e6a719d64cbf75d4dc03e5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aece86e937e6a719d64cbf75d4dc03e5e">&#9670;&nbsp;</a></span>addFrame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StageBuilder::addFrame </td>
          <td>(</td>
          <td class="paramtype">PlayerSet &amp;&#160;</td>
          <td class="paramname"><em>players</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_toonz_scene.html">ToonzScene</a> *&#160;</td>
          <td class="paramname"><em>scene</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_xsheet.html">TXsheet</a> *&#160;</td>
          <td class="paramname"><em>xsh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>includeUnvisible</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>checkPreviewVisibility</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>subSheetColIndex</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Recall <b><a class="el" href="class_stage_builder.html#a4c1c9a8ab1830b4848e663d1d66c7d27">addCellWithOnionSkin()</a></b> for each cell of row <b>row</b>. </p>
<div class="fragment"><div class="line"><span class="lineno">  664</span>                                                                               {</div>
<div class="line"><span class="lineno">  665</span>  <span class="keywordtype">int</span> columnCount        = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a17464dc5617cf87a46f03e1a52d36cc1">getColumnCount</a>();</div>
<div class="line"><span class="lineno">  666</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maskCount = m_masks.size();</div>
<div class="line"><span class="lineno">  667</span> </div>
<div class="line"><span class="lineno">  668</span>  std::vector&lt;std::pair&lt;double, int&gt;&gt; shuffle;</div>
<div class="line"><span class="lineno">  669</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = 0; c &lt; columnCount; c++) {</div>
<div class="line"><span class="lineno">  670</span>    <a class="code hl_class" href="class_t_smart_pointer_t.html">TXshColumnP</a> column = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">getColumn</a>(c);</div>
<div class="line"><span class="lineno">  671</span>    assert(column);</div>
<div class="line"><span class="lineno">  672</span>    <a class="code hl_class" href="class_t_stage_object.html">TStageObject</a> *pegbar = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">getStageObject</a>(TStageObjectId::ColumnId(c));</div>
<div class="line"><span class="lineno">  673</span>    <span class="keywordtype">double</span> columnSO      = pegbar-&gt;<a class="code hl_function" href="class_t_stage_object.html#a2e5f4f8ee682964cbc769aeaeee24291">getSO</a>(row);</div>
<div class="line"><span class="lineno">  674</span>    shuffle.push_back(std::make_pair(columnSO, c));</div>
<div class="line"><span class="lineno">  675</span>  }</div>
<div class="line"><span class="lineno">  676</span>  std::stable_sort(shuffle.begin(), shuffle.end(), <a class="code hl_class" href="class_stacking_order.html">StackingOrder</a>());</div>
<div class="line"><span class="lineno">  677</span> </div>
<div class="line"><span class="lineno">  678</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; columnCount; i++) {</div>
<div class="line"><span class="lineno">  679</span>    <span class="keywordtype">int</span> c = shuffle[i].second;</div>
<div class="line"><span class="lineno">  680</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="class_camera_test_check.html#adc1033b93dea95f49db36d8fb668e16d">CameraTestCheck::instance</a>()-&gt;isEnabled() &amp;&amp; c != m_currentColumnIndex)</div>
<div class="line"><span class="lineno">  681</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  682</span>    <span class="keywordflow">if</span> (level == 0) {</div>
<div class="line"><span class="lineno">  683</span>      <span class="comment">// m_isCurrentColumn = (c == m_currentColumnIndex);</span></div>
<div class="line"><span class="lineno">  684</span>      m_ancestorColumnIndex = c;</div>
<div class="line"><span class="lineno">  685</span>    }</div>
<div class="line"><span class="lineno">  686</span>    <a class="code hl_class" href="class_t_xsh_column.html">TXshColumn</a> *column = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">getColumn</a>(c);</div>
<div class="line"><span class="lineno">  687</span>    <span class="keywordtype">bool</span> isMask        = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  688</span>    <span class="keywordflow">if</span> (column &amp;&amp; !column-&gt;isEmpty() &amp;&amp; !column-&gt;getSoundColumn()) {</div>
<div class="line"><span class="lineno">  689</span>      <span class="keywordflow">if</span> (!column-&gt;isPreviewVisible() &amp;&amp; checkPreviewVisibility) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  690</span>      <span class="keywordflow">if</span> (column-&gt;isCamstandVisible() ||</div>
<div class="line"><span class="lineno">  691</span>          includeUnvisible)  <span class="comment">// se l&#39;&quot;occhietto&quot; non e&#39; chiuso</span></div>
<div class="line"><span class="lineno">  692</span>      {</div>
<div class="line"><span class="lineno">  693</span>        <span class="keywordflow">if</span> (column-&gt;isMask())  <span class="comment">// se e&#39; una maschera (usate solo in tab pro)</span></div>
<div class="line"><span class="lineno">  694</span>        {</div>
<div class="line"><span class="lineno">  695</span>          isMask = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  696</span>          std::vector&lt;int&gt; saveMasks;</div>
<div class="line"><span class="lineno">  697</span>          saveMasks.swap(m_masks);</div>
<div class="line"><span class="lineno">  698</span>          <span class="keywordtype">int</span> maskIndex   = m_maskPool.size();</div>
<div class="line"><span class="lineno">  699</span>          PlayerSet *mask = <span class="keyword">new</span> PlayerSet();</div>
<div class="line"><span class="lineno">  700</span>          m_maskPool.push_back(mask);</div>
<div class="line"><span class="lineno">  701</span>          <a class="code hl_function" href="class_stage_builder.html#a4c1c9a8ab1830b4848e663d1d66c7d27">addCellWithOnionSkin</a>(*mask, scene, xsh, row, c, level);</div>
<div class="line"><span class="lineno">  702</span>          std::stable_sort(mask-&gt;begin(), mask-&gt;end(), <a class="code hl_class" href="class_player_lt.html">PlayerLt</a>());</div>
<div class="line"><span class="lineno">  703</span>          saveMasks.swap(m_masks);</div>
<div class="line"><span class="lineno">  704</span>          m_masks.push_back(maskIndex);</div>
<div class="line"><span class="lineno">  705</span>        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  706</span>          <a class="code hl_function" href="class_stage_builder.html#a4c1c9a8ab1830b4848e663d1d66c7d27">addCellWithOnionSkin</a>(players, scene, xsh, row, c, level,</div>
<div class="line"><span class="lineno">  707</span>                               subSheetColIndex);</div>
<div class="line"><span class="lineno">  708</span>      }</div>
<div class="line"><span class="lineno">  709</span>    }</div>
<div class="line"><span class="lineno">  710</span>    <span class="keywordflow">if</span> (!isMask) {</div>
<div class="line"><span class="lineno">  711</span>      <span class="keywordflow">while</span> (m_masks.size() &gt; maskCount) m_masks.pop_back();</div>
<div class="line"><span class="lineno">  712</span>    }</div>
<div class="line"><span class="lineno">  713</span>  }</div>
<div class="line"><span class="lineno">  714</span>  <span class="keywordflow">if</span> (level == 0) std::stable_sort(players.begin(), players.end(), <a class="code hl_class" href="class_player_lt.html">PlayerLt</a>());</div>
<div class="line"><span class="lineno">  715</span>}</div>
<div class="ttc" id="aclass_camera_test_check_html_adc1033b93dea95f49db36d8fb668e16d"><div class="ttname"><a href="class_camera_test_check.html#adc1033b93dea95f49db36d8fb668e16d">CameraTestCheck::instance</a></div><div class="ttdeci">static CameraTestCheck * instance()</div><div class="ttdef"><b>Definition:</b> stage2.cpp:52</div></div>
<div class="ttc" id="aclass_player_lt_html"><div class="ttname"><a href="class_player_lt.html">PlayerLt</a></div><div class="ttdef"><b>Definition:</b> stage.cpp:139</div></div>
<div class="ttc" id="aclass_stacking_order_html"><div class="ttname"><a href="class_stacking_order.html">StackingOrder</a></div><div class="ttdef"><b>Definition:</b> stage.cpp:153</div></div>
<div class="ttc" id="aclass_stage_builder_html_a4c1c9a8ab1830b4848e663d1d66c7d27"><div class="ttname"><a href="class_stage_builder.html#a4c1c9a8ab1830b4848e663d1d66c7d27">StageBuilder::addCellWithOnionSkin</a></div><div class="ttdeci">void addCellWithOnionSkin(PlayerSet &amp;players, ToonzScene *scene, TXsheet *xsh, int row, int col, int level, int subSheetColIndex=-1)</div><div class="ttdef"><b>Definition:</b> stage.cpp:560</div></div>
<div class="ttc" id="aclass_t_stage_object_html_a2e5f4f8ee682964cbc769aeaeee24291"><div class="ttname"><a href="class_t_stage_object.html#a2e5f4f8ee682964cbc769aeaeee24291">TStageObject::getSO</a></div><div class="ttdeci">double getSO(double frame)</div><div class="ttdoc">Returns the object's stacking order at specified frame.</div><div class="ttdef"><b>Definition:</b> tstageobject.cpp:1433</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00560">addCellWithOnionSkin()</a>, <a class="el" href="#l01418">TXsheet::getColumn()</a>, <a class="el" href="#l01425">TXsheet::getColumnCount()</a>, <a class="el" href="#l01433">TStageObject::getSO()</a>, <a class="el" href="#l00542">TXsheet::getStageObject()</a>, and <a class="el" href="#l00052">CameraTestCheck::instance()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00330">addCell()</a>, and <a class="el" href="#l00911">Stage::visit()</a>.</p>

</div>
</div>
<a id="acfa9ec0326e2d6aff34e4d94a1c12f03" name="acfa9ec0326e2d6aff34e4d94a1c12f03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfa9ec0326e2d6aff34e4d94a1c12f03">&#9670;&nbsp;</a></span>addSimpleLevelFrame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StageBuilder::addSimpleLevelFrame </td>
          <td>(</td>
          <td class="paramtype">PlayerSet &amp;&#160;</td>
          <td class="paramname"><em>players</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a> *&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_frame_id.html">TFrameId</a> &amp;&#160;</td>
          <td class="paramname"><em>fid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Add in <b>players</b> vector information about <b>level</b> cell with <b><a class="el" href="class_t_frame_id.html">TFrameId</a></b> <b>fid</b>. <br  />
 Compute information for all cell with active onion-skin, if onion-skin is not active compute information only for current cell. </p>
<div class="fragment"><div class="line"><span class="lineno">  721</span>                                                            {</div>
<div class="line"><span class="lineno">  722</span>  <span class="keyword">auto</span> addGhost = [&amp;](<span class="keywordtype">int</span> ghostIndex, <span class="keywordtype">int</span> ghostRow, <span class="keywordtype">bool</span> fullOpac = <span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno">  723</span>    <span class="keyword">const</span> <a class="code hl_class" href="class_t_frame_id.html">TFrameId</a> &amp;ghostFid = level-&gt;<a class="code hl_function" href="class_t_xsh_simple_level.html#a07279a40ffad2c6ccc597c0a418f78fb">index2fid</a>(ghostRow);</div>
<div class="line"><span class="lineno">  724</span> </div>
<div class="line"><span class="lineno">  725</span>    <a class="code hl_class" href="class_stage_1_1_player.html">Player</a> player;</div>
<div class="line"><span class="lineno">  726</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#a6230d77933caf93b9699bd5e2de0d2b0">m_sl</a>                     = level;</div>
<div class="line"><span class="lineno">  727</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#af88189b51ebf5b86f87f77281aba0ce1">m_frame</a>                  = level-&gt;<a class="code hl_function" href="class_t_xsh_simple_level.html#af30a02239ef0900c095a0af366dea26a">guessIndex</a>(ghostFid);</div>
<div class="line"><span class="lineno">  728</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#aba5bf8d012d1017e5fe66d5c4b1e27df">m_fid</a>                    = ghostFid;</div>
<div class="line"><span class="lineno">  729</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#aba32c099fd49a4343580c28ade32e144">m_isCurrentColumn</a>        = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  730</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#af5564bb7e4d82fec3c47554161bf2c91">m_isCurrentXsheetLevel</a>   = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  731</span>    player.m_isEditingLevel         = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  732</span>    player.m_currentFrameId         = m_currentFrameId;</div>
<div class="line"><span class="lineno">  733</span>    player.m_isGuidedDrawingEnabled = m_isGuidedDrawingEnabled;</div>
<div class="line"><span class="lineno">  734</span>    player.m_guidedFrontStroke      = m_guidedFrontStroke;</div>
<div class="line"><span class="lineno">  735</span>    player.m_guidedBackStroke       = m_guidedBackStroke;</div>
<div class="line"><span class="lineno">  736</span>    player.m_isVisibleinOSM         = ghostRow &gt;= 0;</div>
<div class="line"><span class="lineno">  737</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#ae9146f2fdcb1837482abf535fc5622ef">m_onionSkinDistance</a>      = m_onionSkinDistance;</div>
<div class="line"><span class="lineno">  738</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#a0495491ce47344daba1cd55e1b64905a">m_dpiAff</a>                 = getDpiAffine(level, ghostFid);</div>
<div class="line"><span class="lineno">  739</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#affd2dfe55cdffea6d55be757f502df72">m_ancestorColumnIndex</a>    = -1;</div>
<div class="line"><span class="lineno">  740</span> </div>
<div class="line"><span class="lineno">  741</span>    <span class="keywordflow">if</span> (fullOpac) {</div>
<div class="line"><span class="lineno">  742</span>      player.<a class="code hl_variable" href="class_stage_1_1_player.html#a99c9004772f5575fb627dcfb29137459">m_placement</a> = m_onionSkinMask.getShiftTraceGhostAff(ghostIndex) *</div>
<div class="line"><span class="lineno">  743</span>                           player.<a class="code hl_variable" href="class_stage_1_1_player.html#a99c9004772f5575fb627dcfb29137459">m_placement</a>;</div>
<div class="line"><span class="lineno">  744</span>      players.push_back(player);</div>
<div class="line"><span class="lineno">  745</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  746</span>    }</div>
<div class="line"><span class="lineno">  747</span> </div>
<div class="line"><span class="lineno">  748</span>    <span class="keywordtype">int</span> opacity         = player.<a class="code hl_variable" href="class_stage_1_1_player.html#a2b05fa8fdc95ac04a532fc2d227a3a81">m_opacity</a>;</div>
<div class="line"><span class="lineno">  749</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#aab56aced982252aafc6c06f1b66dbdac">m_bingoOrder</a> = 10;</div>
<div class="line"><span class="lineno">  750</span>    <span class="keywordflow">if</span> (m_onionSkinMask.getShiftTraceStatus() !=</div>
<div class="line"><span class="lineno">  751</span>        OnionSkinMask::ENABLED_WITHOUT_GHOST_MOVEMENTS) {</div>
<div class="line"><span class="lineno">  752</span>      player.<a class="code hl_variable" href="class_stage_1_1_player.html#a2b05fa8fdc95ac04a532fc2d227a3a81">m_opacity</a> = 30;</div>
<div class="line"><span class="lineno">  753</span>      players.push_back(player);</div>
<div class="line"><span class="lineno">  754</span>      player.<a class="code hl_variable" href="class_stage_1_1_player.html#a2b05fa8fdc95ac04a532fc2d227a3a81">m_opacity</a>           = opacity;</div>
<div class="line"><span class="lineno">  755</span>      player.<a class="code hl_variable" href="class_stage_1_1_player.html#ae9146f2fdcb1837482abf535fc5622ef">m_onionSkinDistance</a> = (ghostIndex == 0) ? -1 : 1;</div>
<div class="line"><span class="lineno">  756</span>      player.<a class="code hl_variable" href="class_stage_1_1_player.html#a99c9004772f5575fb627dcfb29137459">m_placement</a> = m_onionSkinMask.getShiftTraceGhostAff(ghostIndex) *</div>
<div class="line"><span class="lineno">  757</span>                           player.<a class="code hl_variable" href="class_stage_1_1_player.html#a99c9004772f5575fb627dcfb29137459">m_placement</a>;</div>
<div class="line"><span class="lineno">  758</span>    }</div>
<div class="line"><span class="lineno">  759</span>    players.push_back(player);</div>
<div class="line"><span class="lineno">  760</span>  };</div>
<div class="line"><span class="lineno">  761</span> </div>
<div class="line"><span class="lineno">  762</span>  <span class="keywordtype">int</span> index = -1;</div>
<div class="line"><span class="lineno">  763</span> </div>
<div class="line"><span class="lineno">  764</span>  <span class="keywordtype">int</span> row = level-&gt;<a class="code hl_function" href="class_t_xsh_simple_level.html#af30a02239ef0900c095a0af366dea26a">guessIndex</a>(fid);</div>
<div class="line"><span class="lineno">  765</span> </div>
<div class="line"><span class="lineno">  766</span>  <span class="comment">// Shift &amp; Trace</span></div>
<div class="line"><span class="lineno">  767</span>  <span class="keywordflow">if</span> (m_onionSkinMask.isShiftTraceEnabled()) {</div>
<div class="line"><span class="lineno">  768</span>    <span class="keywordtype">int</span> previousOffset = m_onionSkinMask.getShiftTraceGhostFrameOffset(0);</div>
<div class="line"><span class="lineno">  769</span>    <span class="keywordtype">int</span> forwardOffset  = m_onionSkinMask.getShiftTraceGhostFrameOffset(1);</div>
<div class="line"><span class="lineno">  770</span> </div>
<div class="line"><span class="lineno">  771</span>    <span class="comment">// If F1, F2 or F3 key is pressed, then only</span></div>
<div class="line"><span class="lineno">  772</span>    <span class="comment">// display the corresponding ghost</span></div>
<div class="line"><span class="lineno">  773</span>    <span class="keywordtype">int</span> flipKey = m_onionSkinMask.getGhostFlipKey();</div>
<div class="line"><span class="lineno">  774</span>    <span class="keywordflow">if</span> (Qt::Key_F1 &lt;= flipKey &amp;&amp; flipKey &lt;= Qt::Key_F3) {</div>
<div class="line"><span class="lineno">  775</span>      <span class="keywordflow">if</span> (flipKey == Qt::Key_F1 &amp;&amp; previousOffset != 0) {</div>
<div class="line"><span class="lineno">  776</span>        addGhost(0, row + previousOffset, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  777</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  778</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flipKey == Qt::Key_F3 &amp;&amp; forwardOffset != 0) {</div>
<div class="line"><span class="lineno">  779</span>        addGhost(1, row + forwardOffset, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  780</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  781</span>      }</div>
<div class="line"><span class="lineno">  782</span>    }</div>
<div class="line"><span class="lineno">  783</span> </div>
<div class="line"><span class="lineno">  784</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  785</span>      <span class="comment">// draw the first ghost</span></div>
<div class="line"><span class="lineno">  786</span>      <span class="keywordflow">if</span> (previousOffset != 0) addGhost(0, row + previousOffset);</div>
<div class="line"><span class="lineno">  787</span>      <span class="keywordflow">if</span> (forwardOffset != 0) addGhost(1, row + forwardOffset);</div>
<div class="line"><span class="lineno">  788</span>    }</div>
<div class="line"><span class="lineno">  789</span>  }</div>
<div class="line"><span class="lineno">  790</span>  <span class="comment">// Onion Skin</span></div>
<div class="line"><span class="lineno">  791</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!m_onionSkinMask.isEmpty() &amp;&amp; m_onionSkinMask.isEnabled()) {</div>
<div class="line"><span class="lineno">  792</span>    std::vector&lt;int&gt; rows;</div>
<div class="line"><span class="lineno">  793</span>    m_onionSkinMask.<a class="code hl_function" href="class_onion_skin_mask.html#a9e64f221d9750268f449668afb614c11">getAll</a>(row, rows);</div>
<div class="line"><span class="lineno">  794</span> </div>
<div class="line"><span class="lineno">  795</span>    std::vector&lt;int&gt;::iterator it = rows.begin();</div>
<div class="line"><span class="lineno">  796</span>    <span class="keywordflow">while</span> (it != rows.end() &amp;&amp; *it &lt; row) ++it;</div>
<div class="line"><span class="lineno">  797</span>    std::sort(rows.begin(), it, descending);</div>
<div class="line"><span class="lineno">  798</span>    m_onionSkinDistance = 0;</div>
<div class="line"><span class="lineno">  799</span>    <span class="keywordtype">int</span> frontPos = 0, backPos = 0;</div>
<div class="line"><span class="lineno">  800</span> </div>
<div class="line"><span class="lineno">  801</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; (int)rows.size(); i++) {</div>
<div class="line"><span class="lineno">  802</span>      <span class="keyword">const</span> <a class="code hl_class" href="class_t_frame_id.html">TFrameId</a> &amp;fid2 = level-&gt;<a class="code hl_function" href="class_t_xsh_simple_level.html#a07279a40ffad2c6ccc597c0a418f78fb">index2fid</a>(rows[i]);</div>
<div class="line"><span class="lineno">  803</span>      <span class="keywordflow">if</span> (fid2 == fid) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  804</span>      players.push_back(<a class="code hl_class" href="class_stage_1_1_player.html">Player</a>());</div>
<div class="line"><span class="lineno">  805</span>      <a class="code hl_class" href="class_stage_1_1_player.html">Player</a> &amp;player                  = players.back();</div>
<div class="line"><span class="lineno">  806</span>      player.<a class="code hl_variable" href="class_stage_1_1_player.html#a6230d77933caf93b9699bd5e2de0d2b0">m_sl</a>                     = level;</div>
<div class="line"><span class="lineno">  807</span>      player.<a class="code hl_variable" href="class_stage_1_1_player.html#af88189b51ebf5b86f87f77281aba0ce1">m_frame</a>                  = level-&gt;<a class="code hl_function" href="class_t_xsh_simple_level.html#af30a02239ef0900c095a0af366dea26a">guessIndex</a>(fid);</div>
<div class="line"><span class="lineno">  808</span>      player.<a class="code hl_variable" href="class_stage_1_1_player.html#aba5bf8d012d1017e5fe66d5c4b1e27df">m_fid</a>                    = fid2;</div>
<div class="line"><span class="lineno">  809</span>      player.<a class="code hl_variable" href="class_stage_1_1_player.html#aba32c099fd49a4343580c28ade32e144">m_isCurrentColumn</a>        = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  810</span>      player.<a class="code hl_variable" href="class_stage_1_1_player.html#af5564bb7e4d82fec3c47554161bf2c91">m_isCurrentXsheetLevel</a>   = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  811</span>      player.m_isEditingLevel         = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  812</span>      player.m_currentFrameId         = m_currentFrameId;</div>
<div class="line"><span class="lineno">  813</span>      player.m_isGuidedDrawingEnabled = m_isGuidedDrawingEnabled;</div>
<div class="line"><span class="lineno">  814</span>      player.m_guidedFrontStroke      = m_guidedFrontStroke;</div>
<div class="line"><span class="lineno">  815</span>      player.m_guidedBackStroke       = m_guidedBackStroke;</div>
<div class="line"><span class="lineno">  816</span>      player.m_isVisibleinOSM         = rows[i] &gt;= 0;</div>
<div class="line"><span class="lineno">  817</span><span class="preprocessor">#ifdef NUOVO_ONION</span></div>
<div class="line"><span class="lineno">  818</span>      player.<a class="code hl_variable" href="class_stage_1_1_player.html#ae9146f2fdcb1837482abf535fc5622ef">m_onionSkinDistance</a> = rows[i] - row;</div>
<div class="line"><span class="lineno">  819</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  820</span>      player.<a class="code hl_variable" href="class_stage_1_1_player.html#ae9146f2fdcb1837482abf535fc5622ef">m_onionSkinDistance</a> = rows[i] - row &lt; 0 ? --backPos : ++frontPos;</div>
<div class="line"><span class="lineno">  821</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  822</span>      player.<a class="code hl_variable" href="class_stage_1_1_player.html#a0495491ce47344daba1cd55e1b64905a">m_dpiAff</a> = getDpiAffine(level, fid2);</div>
<div class="line"><span class="lineno">  823</span>    }</div>
<div class="line"><span class="lineno">  824</span>  }</div>
<div class="line"><span class="lineno">  825</span>  players.push_back(<a class="code hl_class" href="class_stage_1_1_player.html">Player</a>());</div>
<div class="line"><span class="lineno">  826</span>  <a class="code hl_class" href="class_stage_1_1_player.html">Player</a> &amp;player = players.back();</div>
<div class="line"><span class="lineno">  827</span>  player.<a class="code hl_variable" href="class_stage_1_1_player.html#a6230d77933caf93b9699bd5e2de0d2b0">m_sl</a>    = level;</div>
<div class="line"><span class="lineno">  828</span>  player.<a class="code hl_variable" href="class_stage_1_1_player.html#af88189b51ebf5b86f87f77281aba0ce1">m_frame</a> = level-&gt;<a class="code hl_function" href="class_t_xsh_simple_level.html#af30a02239ef0900c095a0af366dea26a">guessIndex</a>(fid);</div>
<div class="line"><span class="lineno">  829</span>  player.<a class="code hl_variable" href="class_stage_1_1_player.html#aba5bf8d012d1017e5fe66d5c4b1e27df">m_fid</a>   = fid;</div>
<div class="line"><span class="lineno">  830</span>  <span class="keywordflow">if</span> (!m_onionSkinMask.isEmpty() &amp;&amp; m_onionSkinMask.isEnabled())</div>
<div class="line"><span class="lineno">  831</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#ae9146f2fdcb1837482abf535fc5622ef">m_onionSkinDistance</a> = 0;</div>
<div class="line"><span class="lineno">  832</span>  player.<a class="code hl_variable" href="class_stage_1_1_player.html#aba32c099fd49a4343580c28ade32e144">m_isCurrentColumn</a>      = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  833</span>  player.<a class="code hl_variable" href="class_stage_1_1_player.html#af5564bb7e4d82fec3c47554161bf2c91">m_isCurrentXsheetLevel</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  834</span>  player.m_isEditingLevel       = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  835</span>  player.<a class="code hl_variable" href="class_stage_1_1_player.html#affd2dfe55cdffea6d55be757f502df72">m_ancestorColumnIndex</a>  = -1;</div>
<div class="line"><span class="lineno">  836</span>  player.<a class="code hl_variable" href="class_stage_1_1_player.html#a0495491ce47344daba1cd55e1b64905a">m_dpiAff</a>               = getDpiAffine(level, fid);</div>
<div class="line"><span class="lineno">  837</span>}</div>
<div class="ttc" id="aclass_stage_1_1_player_html_af5564bb7e4d82fec3c47554161bf2c91"><div class="ttname"><a href="class_stage_1_1_player.html#af5564bb7e4d82fec3c47554161bf2c91">Stage::Player::m_isCurrentXsheetLevel</a></div><div class="ttdeci">bool m_isCurrentXsheetLevel</div><div class="ttdef"><b>Definition:</b> stageplayer.h:84</div></div>
<div class="ttc" id="aclass_t_frame_id_html"><div class="ttname"><a href="class_t_frame_id.html">TFrameId</a></div><div class="ttdef"><b>Definition:</b> tfilepath.h:29</div></div>
<div class="ttc" id="aclass_t_xsh_simple_level_html_a07279a40ffad2c6ccc597c0a418f78fb"><div class="ttname"><a href="class_t_xsh_simple_level.html#a07279a40ffad2c6ccc597c0a418f78fb">TXshSimpleLevel::index2fid</a></div><div class="ttdeci">TFrameId index2fid(int index) const</div><div class="ttdef"><b>Definition:</b> txshsimplelevel.cpp:544</div></div>
<div class="ttc" id="aclass_t_xsh_simple_level_html_af30a02239ef0900c095a0af366dea26a"><div class="ttname"><a href="class_t_xsh_simple_level.html#af30a02239ef0900c095a0af366dea26a">TXshSimpleLevel::guessIndex</a></div><div class="ttdeci">int guessIndex(const TFrameId &amp;fid) const</div><div class="ttdef"><b>Definition:</b> txshsimplelevel.cpp:524</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00073">OnionSkinMask::getAll()</a>, <a class="el" href="#l00524">TXshSimpleLevel::guessIndex()</a>, <a class="el" href="#l00544">TXshSimpleLevel::index2fid()</a>, <a class="el" href="#l00080">Stage::Player::m_ancestorColumnIndex</a>, <a class="el" href="#l00105">Stage::Player::m_bingoOrder</a>, <a class="el" href="#l00072">Stage::Player::m_dpiAff</a>, <a class="el" href="#l00092">Stage::Player::m_fid</a>, <a class="el" href="#l00097">Stage::Player::m_frame</a>, <a class="el" href="#l00082">Stage::Player::m_isCurrentColumn</a>, <a class="el" href="#l00084">Stage::Player::m_isCurrentXsheetLevel</a>, <a class="el" href="#l00077">Stage::Player::m_onionSkinDistance</a>, <a class="el" href="#l00104">Stage::Player::m_opacity</a>, <a class="el" href="#l00071">Stage::Player::m_placement</a>, and <a class="el" href="#l00091">Stage::Player::m_sl</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00979">Stage::visit()</a>.</p>

</div>
</div>
<a id="a4c5d29002a29453763337c7f6a32b4aa" name="a4c5d29002a29453763337c7f6a32b4aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c5d29002a29453763337c7f6a32b4aa">&#9670;&nbsp;</a></span>visit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StageBuilder::visit </td>
          <td>(</td>
          <td class="paramtype">PlayerSet &amp;&#160;</td>
          <td class="paramname"><em>players</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_stage_1_1_visitor.html">Visitor</a> &amp;&#160;</td>
          <td class="paramname"><em>visitor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isPlaying</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Recall <b>visitor.onImage(player)</b> for each <b>player</b> contained in <b>players</b> vector. </p>
<div class="fragment"><div class="line"><span class="lineno">  841</span>                                                                             {</div>
<div class="line"><span class="lineno">  842</span>  std::vector&lt;int&gt; masks;</div>
<div class="line"><span class="lineno">  843</span>  <span class="keywordtype">int</span> m                = players.size();</div>
<div class="line"><span class="lineno">  844</span>  <span class="keywordtype">int</span> h                = 0;</div>
<div class="line"><span class="lineno">  845</span>  <span class="keywordtype">bool</span> stopMotionShown = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  846</span>  <span class="keywordflow">for</span> (; h &lt; m; h++) {</div>
<div class="line"><span class="lineno">  847</span>    <a class="code hl_class" href="class_stage_1_1_player.html">Player</a> &amp;player = players[h];</div>
<div class="line"><span class="lineno">  848</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><span class="lineno">  849</span>    <span class="comment">// vale solo per TAB pro</span></div>
<div class="line"><span class="lineno">  850</span>    <span class="keywordflow">for</span> (; i &lt; masks.size() &amp;&amp; i &lt; player.m_masks.size(); i++)</div>
<div class="line"><span class="lineno">  851</span>      <span class="keywordflow">if</span> (masks[i] != player.m_masks[i]) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  852</span>    <span class="comment">// vale solo per TAB pro</span></div>
<div class="line"><span class="lineno">  853</span>    <span class="keywordflow">if</span> (i &lt; masks.size() || i &lt; player.m_masks.size()) {</div>
<div class="line"><span class="lineno">  854</span>      <span class="keywordflow">while</span> (i &lt; masks.size()) {</div>
<div class="line"><span class="lineno">  855</span>        masks.pop_back();</div>
<div class="line"><span class="lineno">  856</span>        visitor.disableMask();</div>
<div class="line"><span class="lineno">  857</span>      }</div>
<div class="line"><span class="lineno">  858</span>      <span class="keywordflow">while</span> (i &lt; player.m_masks.size()) {</div>
<div class="line"><span class="lineno">  859</span>        <span class="keywordtype">int</span> maskIndex = player.m_masks[i];</div>
<div class="line"><span class="lineno">  860</span>        visitor.beginMask();</div>
<div class="line"><span class="lineno">  861</span>        <a class="code hl_function" href="class_stage_builder.html#a4c5d29002a29453763337c7f6a32b4aa">visit</a>(*m_maskPool[maskIndex], visitor, isPlaying);</div>
<div class="line"><span class="lineno">  862</span>        visitor.endMask();</div>
<div class="line"><span class="lineno">  863</span>        masks.push_back(maskIndex);</div>
<div class="line"><span class="lineno">  864</span>        visitor.enableMask();</div>
<div class="line"><span class="lineno">  865</span>        i++;</div>
<div class="line"><span class="lineno">  866</span>      }</div>
<div class="line"><span class="lineno">  867</span>    }</div>
<div class="line"><span class="lineno">  868</span>    player.<a class="code hl_variable" href="class_stage_1_1_player.html#a2a22d160f4fa74226fbbbf7e677da4b3">m_isPlaying</a> = isPlaying;</div>
<div class="line"><span class="lineno">  869</span> </div>
<div class="line"><span class="lineno">  870</span><span class="preprocessor">#if defined(x64)</span></div>
<div class="line"><span class="lineno">  871</span>    <span class="keywordflow">if</span> (m_liveViewImage &amp;&amp; player.<a class="code hl_variable" href="class_stage_1_1_player.html#a6230d77933caf93b9699bd5e2de0d2b0">m_sl</a> == m_liveViewPlayer.m_sl) {</div>
<div class="line"><span class="lineno">  872</span>      <span class="keywordflow">if</span> (m_lineupImage) {</div>
<div class="line"><span class="lineno">  873</span>        m_lineupPlayer.m_sl = NULL;</div>
<div class="line"><span class="lineno">  874</span>        visitor.onRasterImage(m_lineupImage.getPointer(), m_lineupPlayer);</div>
<div class="line"><span class="lineno">  875</span>        stopMotionShown = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  876</span>      }</div>
<div class="line"><span class="lineno">  877</span>      <span class="keywordflow">if</span> (m_liveViewImage) {</div>
<div class="line"><span class="lineno">  878</span>        m_liveViewPlayer.m_sl = NULL;</div>
<div class="line"><span class="lineno">  879</span>        visitor.onRasterImage(m_liveViewImage.getPointer(), m_liveViewPlayer);</div>
<div class="line"><span class="lineno">  880</span>        stopMotionShown = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  881</span>      }</div>
<div class="line"><span class="lineno">  882</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  883</span>      visitor.<a class="code hl_function" href="class_stage_1_1_visitor.html#a4f6fa9bc6e68aaf2d1a2f5a69a0f8c53">onImage</a>(player);</div>
<div class="line"><span class="lineno">  884</span>    }</div>
<div class="line"><span class="lineno">  885</span>  }</div>
<div class="line"><span class="lineno">  886</span>  <span class="keywordflow">if</span> (!stopMotionShown &amp;&amp; (m_liveViewImage || m_lineupImage)) {</div>
<div class="line"><span class="lineno">  887</span>    <span class="keywordflow">if</span> (m_lineupImage) {</div>
<div class="line"><span class="lineno">  888</span>      m_lineupPlayer.m_sl = NULL;</div>
<div class="line"><span class="lineno">  889</span>      visitor.onRasterImage(m_lineupImage.getPointer(), m_lineupPlayer);</div>
<div class="line"><span class="lineno">  890</span>    }</div>
<div class="line"><span class="lineno">  891</span>    <span class="keywordflow">if</span> (m_liveViewImage) {</div>
<div class="line"><span class="lineno">  892</span>      m_liveViewPlayer.m_sl = NULL;</div>
<div class="line"><span class="lineno">  893</span>      visitor.onRasterImage(m_liveViewImage.getPointer(), m_liveViewPlayer);</div>
<div class="line"><span class="lineno">  894</span>    }</div>
<div class="line"><span class="lineno">  895</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  896</span>    visitor.<a class="code hl_function" href="class_stage_1_1_visitor.html#a4f6fa9bc6e68aaf2d1a2f5a69a0f8c53">onImage</a>(player);</div>
<div class="line"><span class="lineno">  897</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  898</span>  }</div>
<div class="line"><span class="lineno">  899</span>  <span class="comment">// vale solo per TAB pro</span></div>
<div class="line"><span class="lineno">  900</span>  <span class="keywordflow">for</span> (h = 0; h &lt; (int)masks.size(); h++) visitor.disableMask();</div>
<div class="line"><span class="lineno">  901</span>}</div>
<div class="ttc" id="aclass_stage_1_1_player_html_a2a22d160f4fa74226fbbbf7e677da4b3"><div class="ttname"><a href="class_stage_1_1_player.html#a2a22d160f4fa74226fbbbf7e677da4b3">Stage::Player::m_isPlaying</a></div><div class="ttdeci">bool m_isPlaying</div><div class="ttdoc">image rendering. I guess. Don't know why this should be useful.</div><div class="ttdef"><b>Definition:</b> stageplayer.h:100</div></div>
<div class="ttc" id="aclass_stage_1_1_visitor_html_a4f6fa9bc6e68aaf2d1a2f5a69a0f8c53"><div class="ttname"><a href="class_stage_1_1_visitor.html#a4f6fa9bc6e68aaf2d1a2f5a69a0f8c53">Stage::Visitor::onImage</a></div><div class="ttdeci">virtual void onImage(const Player &amp;player)=0</div><div class="ttdoc">The visitation function.</div></div>
<div class="ttc" id="aclass_stage_builder_html_a4c5d29002a29453763337c7f6a32b4aa"><div class="ttname"><a href="class_stage_builder.html#a4c5d29002a29453763337c7f6a32b4aa">StageBuilder::visit</a></div><div class="ttdeci">void visit(PlayerSet &amp;players, Visitor &amp;visitor, bool isPlaying=false)</div><div class="ttdef"><b>Definition:</b> stage.cpp:841</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00100">Stage::Player::m_isPlaying</a>, <a class="el" href="#l00091">Stage::Player::m_sl</a>, <a class="el" href="class_stage_1_1_visitor.html#a4f6fa9bc6e68aaf2d1a2f5a69a0f8c53">Stage::Visitor::onImage()</a>, and <a class="el" href="#l00841">visit()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00841">visit()</a>, and <a class="el" href="#l00911">Stage::visit()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6280867b1af1dd143f20d97bc517b6c4" name="a6280867b1af1dd143f20d97bc517b6c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6280867b1af1dd143f20d97bc517b6c4">&#9670;&nbsp;</a></span>m_ancestorColumnIndex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int StageBuilder::m_ancestorColumnIndex</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3589395e6aca83cbb0d55d0386392f16" name="a3589395e6aca83cbb0d55d0386392f16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3589395e6aca83cbb0d55d0386392f16">&#9670;&nbsp;</a></span>m_ancestors</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="class_t_xsh_column.html">TXshColumn</a> *&gt; StageBuilder::m_ancestors</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afc794dfbc4a98780a91a7f024cec2ee4" name="afc794dfbc4a98780a91a7f024cec2ee4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc794dfbc4a98780a91a7f024cec2ee4">&#9670;&nbsp;</a></span>m_camera3d</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool StageBuilder::m_camera3d</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2cb3d97d88ef502d767e619d7ad4e7ef" name="a2cb3d97d88ef502d767e619d7ad4e7ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cb3d97d88ef502d767e619d7ad4e7ef">&#9670;&nbsp;</a></span>m_cameraPlacement</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_z_placement.html">ZPlacement</a> StageBuilder::m_cameraPlacement</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a399a33c8cf38bb96c8769b57440f12a8" name="a399a33c8cf38bb96c8769b57440f12a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a399a33c8cf38bb96c8769b57440f12a8">&#9670;&nbsp;</a></span>m_currentColumnIndex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int StageBuilder::m_currentColumnIndex</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a637b384da6847085e9d5d90846cc5f52" name="a637b384da6847085e9d5d90846cc5f52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a637b384da6847085e9d5d90846cc5f52">&#9670;&nbsp;</a></span>m_currentFrameId</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_frame_id.html">TFrameId</a> StageBuilder::m_currentFrameId</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afbea32a889325bbd8e72644a174d5193" name="afbea32a889325bbd8e72644a174d5193"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbea32a889325bbd8e72644a174d5193">&#9670;&nbsp;</a></span>m_currentXsheetLevel</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int StageBuilder::m_currentXsheetLevel</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0464c80c751ac882d18cb8fc6aafcf21" name="a0464c80c751ac882d18cb8fc6aafcf21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0464c80c751ac882d18cb8fc6aafcf21">&#9670;&nbsp;</a></span>m_fade</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double StageBuilder::m_fade</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4d58ffedfaea24f2b262333b4075d472" name="a4d58ffedfaea24f2b262333b4075d472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d58ffedfaea24f2b262333b4075d472">&#9670;&nbsp;</a></span>m_guidedBackStroke</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int StageBuilder::m_guidedBackStroke = -1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7354ca81fdb2151131e9f399d2783498" name="a7354ca81fdb2151131e9f399d2783498"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7354ca81fdb2151131e9f399d2783498">&#9670;&nbsp;</a></span>m_guidedFrontStroke</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int StageBuilder::m_guidedFrontStroke = -1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a91d13b870eea5f0d2b4831470f86394a" name="a91d13b870eea5f0d2b4831470f86394a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91d13b870eea5f0d2b4831470f86394a">&#9670;&nbsp;</a></span>m_isGuidedDrawingEnabled</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int StageBuilder::m_isGuidedDrawingEnabled</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1335bb8e496143277ffef8066fa15c5e" name="a1335bb8e496143277ffef8066fa15c5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1335bb8e496143277ffef8066fa15c5e">&#9670;&nbsp;</a></span>m_maskPool</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;PlayerSet *&gt; StageBuilder::m_maskPool</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5e17a6dbe026d2e10604e7e2b83d399d" name="a5e17a6dbe026d2e10604e7e2b83d399d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e17a6dbe026d2e10604e7e2b83d399d">&#9670;&nbsp;</a></span>m_masks</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; StageBuilder::m_masks</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6ee60374e2f5f4d915793cd503a7bdaf" name="a6ee60374e2f5f4d915793cd503a7bdaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ee60374e2f5f4d915793cd503a7bdaf">&#9670;&nbsp;</a></span>m_onionSkinDistance</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int StageBuilder::m_onionSkinDistance</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="abb78f63ffe6a93c9e1f78bff0c330f71" name="abb78f63ffe6a93c9e1f78bff0c330f71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb78f63ffe6a93c9e1f78bff0c330f71">&#9670;&nbsp;</a></span>m_onionSkinMask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_onion_skin_mask.html">OnionSkinMask</a> StageBuilder::m_onionSkinMask</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa1740ffd9aec53133b88ff7ad04d893e" name="aa1740ffd9aec53133b88ff7ad04d893e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1740ffd9aec53133b88ff7ad04d893e">&#9670;&nbsp;</a></span>m_placementStack</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="class_z_placement.html">ZPlacement</a>&gt; StageBuilder::m_placementStack</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a29690cb79fcdc47365573678cfd8c238" name="a29690cb79fcdc47365573678cfd8c238"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29690cb79fcdc47365573678cfd8c238">&#9670;&nbsp;</a></span>m_players</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PlayerSet StageBuilder::m_players</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3005326426895889a3f801efb998174d" name="a3005326426895889a3f801efb998174d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3005326426895889a3f801efb998174d">&#9670;&nbsp;</a></span>m_shiftTraceGhostId</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ShiftTraceGhostId StageBuilder::m_shiftTraceGhostId</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1eb221fb6d49134f1e8a0254f39332cd" name="a1eb221fb6d49134f1e8a0254f39332cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1eb221fb6d49134f1e8a0254f39332cd">&#9670;&nbsp;</a></span>m_subXSheetStack</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="struct_stage_builder_1_1_sub_x_sheet.html">SubXSheet</a>&gt; StageBuilder::m_subXSheetStack</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a098288a79a7dd1c808c5005cf5b517bb" name="a098288a79a7dd1c808c5005cf5b517bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a098288a79a7dd1c808c5005cf5b517bb">&#9670;&nbsp;</a></span>m_vs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_image_painter_1_1_visual_settings.html">ImagePainter::VisualSettings</a>* StageBuilder::m_vs</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1821428a800e68dcaa32c825bac33c9a" name="a1821428a800e68dcaa32c825bac33c9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1821428a800e68dcaa32c825bac33c9a">&#9670;&nbsp;</a></span>m_xsheetLevel</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int StageBuilder::m_xsheetLevel</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>E:/opentoonz/toonz/sources/toonzlib/<a class="el" href="">stage.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
