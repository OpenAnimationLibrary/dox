<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: Ruler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="class_ruler-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Ruler Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="">ruler.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Ruler:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_ruler.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a84fbb315e3ddc8f46cb983264a3d3266"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#a84fbb315e3ddc8f46cb983264a3d3266">Ruler</a> (QWidget *parent, <a class="el" href="class_scene_viewer.html">SceneViewer</a> *viewer, bool vertical)</td></tr>
<tr class="separator:a84fbb315e3ddc8f46cb983264a3d3266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafaac93a7c6a2c0b727381501530c7d0"><td class="memItemLeft" align="right" valign="top">Guides &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#aafaac93a7c6a2c0b727381501530c7d0">getGuides</a> () const</td></tr>
<tr class="separator:aafaac93a7c6a2c0b727381501530c7d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4770d7a4243ac52990bd63ec308c5602"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#a4770d7a4243ac52990bd63ec308c5602">getGuideCount</a> () const</td></tr>
<tr class="separator:a4770d7a4243ac52990bd63ec308c5602"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38083690961c3361476941b03da77d8a"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#a38083690961c3361476941b03da77d8a">getGuide</a> (int index) const</td></tr>
<tr class="separator:a38083690961c3361476941b03da77d8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1663e473fd044202b326806d5051eb45"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#a1663e473fd044202b326806d5051eb45">getUnit</a> () const</td></tr>
<tr class="separator:a1663e473fd044202b326806d5051eb45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69d23a3d5ea2026554f052af6be36cee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#a69d23a3d5ea2026554f052af6be36cee">getIndices</a> (double origin, double iunit, int size, int &amp;i0, int &amp;i1, int &amp;ic) const</td></tr>
<tr class="separator:a69d23a3d5ea2026554f052af6be36cee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add8b3740abd6a3cbb79d5b225ef83e21"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#add8b3740abd6a3cbb79d5b225ef83e21">getZoomScale</a> () const</td></tr>
<tr class="separator:add8b3740abd6a3cbb79d5b225ef83e21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7b24acdc4e9e0555d8ba8fc4294fbad"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#ac7b24acdc4e9e0555d8ba8fc4294fbad">getPan</a> () const</td></tr>
<tr class="separator:ac7b24acdc4e9e0555d8ba8fc4294fbad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc155a99f3304ec88c58a3e546ba1f30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#afc155a99f3304ec88c58a3e546ba1f30">drawVertical</a> (QPainter &amp;)</td></tr>
<tr class="separator:afc155a99f3304ec88c58a3e546ba1f30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa54853f1c9777143d80c357ba72bb775"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#aa54853f1c9777143d80c357ba72bb775">drawHorizontal</a> (QPainter &amp;)</td></tr>
<tr class="separator:aa54853f1c9777143d80c357ba72bb775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38f7295e7e26e1d373d6fa8daf081ae8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#a38f7295e7e26e1d373d6fa8daf081ae8">paintEvent</a> (QPaintEvent *) override</td></tr>
<tr class="separator:a38f7295e7e26e1d373d6fa8daf081ae8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25929db0096652642e3dc3d738cf769f"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#a25929db0096652642e3dc3d738cf769f">posToValue</a> (const QPoint &amp;p) const</td></tr>
<tr class="separator:a25929db0096652642e3dc3d738cf769f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab149bb8f330fc5af9e09be12f5b743d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#ab149bb8f330fc5af9e09be12f5b743d0">mousePressEvent</a> (QMouseEvent *e) override</td></tr>
<tr class="separator:ab149bb8f330fc5af9e09be12f5b743d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61c89219cad7340f64d44c4850201766"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#a61c89219cad7340f64d44c4850201766">mouseMoveEvent</a> (QMouseEvent *e) override</td></tr>
<tr class="separator:a61c89219cad7340f64d44c4850201766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2cfd10ee4c1da473d9e7f757c0d5608"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#af2cfd10ee4c1da473d9e7f757c0d5608">mouseReleaseEvent</a> (QMouseEvent *e) override</td></tr>
<tr class="separator:af2cfd10ee4c1da473d9e7f757c0d5608"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c6923d9cd1ad74d13c5a87cef1fca20"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#a2c6923d9cd1ad74d13c5a87cef1fca20">contextMenuEvent</a> (QContextMenuEvent *event) override</td></tr>
<tr class="separator:a2c6923d9cd1ad74d13c5a87cef1fca20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0b141923bc65ba2fe42159f97291715"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#ab0b141923bc65ba2fe42159f97291715">setTransform</a> (double unit, double pan, double vOrigin=0)</td></tr>
<tr class="separator:ab0b141923bc65ba2fe42159f97291715"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb7efa152c029f34780aea291e5e7498"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#acb7efa152c029f34780aea291e5e7498">setRange</a> (int x0, int x1)</td></tr>
<tr class="separator:acb7efa152c029f34780aea291e5e7498"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af59772d14a806264c2c76d817fd02fad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#af59772d14a806264c2c76d817fd02fad">setMinLabelDistance</a> (int distance)</td></tr>
<tr class="separator:af59772d14a806264c2c76d817fd02fad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72bdd3f87f88342f266be162fdd075b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#a72bdd3f87f88342f266be162fdd075b9">setMinDistance</a> (int distance)</td></tr>
<tr class="separator:a72bdd3f87f88342f266be162fdd075b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a064ee24d0059cce691034e5bd2603eec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#a064ee24d0059cce691034e5bd2603eec">setMinStep</a> (double step)</td></tr>
<tr class="separator:a064ee24d0059cce691034e5bd2603eec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af85e761f368e87141715ad3da2992b95"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#af85e761f368e87141715ad3da2992b95">compute</a> ()</td></tr>
<tr class="separator:af85e761f368e87141715ad3da2992b95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4663f088ca7e6108c3faf7c72e30ac1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#ab4663f088ca7e6108c3faf7c72e30ac1">getTickCount</a> () const</td></tr>
<tr class="separator:ab4663f088ca7e6108c3faf7c72e30ac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affd326dd6e173de611cff343c0205486"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#affd326dd6e173de611cff343c0205486">getTick</a> (int index) const</td></tr>
<tr class="separator:affd326dd6e173de611cff343c0205486"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2b2702c6567cac30cb09f385c82e422"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#aa2b2702c6567cac30cb09f385c82e422">isLabel</a> (int index) const</td></tr>
<tr class="separator:aa2b2702c6567cac30cb09f385c82e422"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="properties" name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a02dc34469c79889a8abe32aaf4f5ab16"><td class="memItemLeft" align="right" valign="top">QColor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#a02dc34469c79889a8abe32aaf4f5ab16">ParentBGColor</a></td></tr>
<tr class="separator:a02dc34469c79889a8abe32aaf4f5ab16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9d2b1eaef5c4acf469c54e26385c01f"><td class="memItemLeft" align="right" valign="top">QColor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#ab9d2b1eaef5c4acf469c54e26385c01f">ScaleColor</a></td></tr>
<tr class="separator:ab9d2b1eaef5c4acf469c54e26385c01f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac0aa89c995437e15e9d7df2ab142726"><td class="memItemLeft" align="right" valign="top">QColor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#aac0aa89c995437e15e9d7df2ab142726">BorderColor</a></td></tr>
<tr class="separator:aac0aa89c995437e15e9d7df2ab142726"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ddadbccd2de995bd7ab724e242e5b26"><td class="memItemLeft" align="right" valign="top">QColor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#a6ddadbccd2de995bd7ab724e242e5b26">HandleColor</a></td></tr>
<tr class="separator:a6ddadbccd2de995bd7ab724e242e5b26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4d5056315596137ce96c501f19b3842"><td class="memItemLeft" align="right" valign="top">QColor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ruler.html#aa4d5056315596137ce96c501f19b3842">HandleDragColor</a></td></tr>
<tr class="separator:aa4d5056315596137ce96c501f19b3842"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >La classe si occupa della visualizzazione e della gestione di una linea guida (puo' essere orizzontale o verticale) </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a84fbb315e3ddc8f46cb983264a3d3266" name="a84fbb315e3ddc8f46cb983264a3d3266"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84fbb315e3ddc8f46cb983264a3d3266">&#9670;&nbsp;</a></span>Ruler() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Ruler::Ruler </td>
          <td>(</td>
          <td class="paramtype">QWidget *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_scene_viewer.html">SceneViewer</a> *&#160;</td>
          <td class="paramname"><em>viewer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>vertical</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   21</span>    : QWidget(parent)</div>
<div class="line"><span class="lineno">   22</span>    , m_viewer(viewer)</div>
<div class="line"><span class="lineno">   23</span>    , m_vertical(vertical)</div>
<div class="line"><span class="lineno">   24</span>    , m_moving(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">   25</span>    , m_hiding(<span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno">   26</span>  <span class="keywordflow">if</span> (vertical) {</div>
<div class="line"><span class="lineno">   27</span>    setSizePolicy(QSizePolicy::Fixed, QSizePolicy::Expanding);</div>
<div class="line"><span class="lineno">   28</span>    setFixedWidth(12);</div>
<div class="line"><span class="lineno">   29</span>    setToolTip(tr(<span class="stringliteral">&quot;Click to create an horizontal guide&quot;</span>));</div>
<div class="line"><span class="lineno">   30</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   31</span>    setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Fixed);</div>
<div class="line"><span class="lineno">   32</span>    setFixedHeight(12);</div>
<div class="line"><span class="lineno">   33</span>    setToolTip(tr(<span class="stringliteral">&quot;Click to create a vertical guide&quot;</span>));</div>
<div class="line"><span class="lineno">   34</span>  }</div>
<div class="line"><span class="lineno">   35</span>  setMouseTracking(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">   36</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a758f797ec166b06b7987f71d09c2a311" name="a758f797ec166b06b7987f71d09c2a311"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a758f797ec166b06b7987f71d09c2a311">&#9670;&nbsp;</a></span>Ruler() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Ruler::Ruler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  134</span>    : m_minValue(0)</div>
<div class="line"><span class="lineno">  135</span>    , m_step(1)</div>
<div class="line"><span class="lineno">  136</span>    , m_labelPeriod(2)</div>
<div class="line"><span class="lineno">  137</span>    , m_labelOffset(0)</div>
<div class="line"><span class="lineno">  138</span>    , m_tickCount(0)</div>
<div class="line"><span class="lineno">  139</span>    , m_unit(1)</div>
<div class="line"><span class="lineno">  140</span>    , m_pan(0)</div>
<div class="line"><span class="lineno">  141</span>    , m_x0(0)</div>
<div class="line"><span class="lineno">  142</span>    , m_x1(100)</div>
<div class="line"><span class="lineno">  143</span>    , m_minLabelDistance(20)</div>
<div class="line"><span class="lineno">  144</span>    , m_minDistance(5)</div>
<div class="line"><span class="lineno">  145</span>    , m_minStep(0) {}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af85e761f368e87141715ad3da2992b95" name="af85e761f368e87141715ad3da2992b95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af85e761f368e87141715ad3da2992b95">&#9670;&nbsp;</a></span>compute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ruler::compute </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  149</span>                    {</div>
<div class="line"><span class="lineno">  150</span>  assert(m_x0 &lt; m_x1);</div>
<div class="line"><span class="lineno">  151</span>  assert(m_unit != 0.0);</div>
<div class="line"><span class="lineno">  152</span>  assert(m_minLabelDistance &gt; 0);</div>
<div class="line"><span class="lineno">  153</span>  assert(m_minDistance &gt;= 0);</div>
<div class="line"><span class="lineno">  154</span>  <span class="comment">// compute m_step (world distance between two adjacent ticks)</span></div>
<div class="line"><span class="lineno">  155</span>  <span class="comment">// and m_labelPeriod (number of ticks between two adjacent labels)</span></div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>  <span class="comment">// the distance (world units) between two labels must be &gt;=</span></div>
<div class="line"><span class="lineno">  158</span>  <span class="comment">// minLabelWorldDistance</span></div>
<div class="line"><span class="lineno">  159</span>  <span class="keyword">const</span> <span class="keywordtype">double</span> absUnit               = std::abs(m_unit);</div>
<div class="line"><span class="lineno">  160</span>  <span class="keyword">const</span> <span class="keywordtype">double</span> minLabelWorldDistance = m_minLabelDistance / absUnit;</div>
<div class="line"><span class="lineno">  161</span>  <span class="keyword">const</span> <span class="keywordtype">double</span> minWorldDistance      = m_minDistance / absUnit;</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>  <span class="comment">// we want the minimum step with:</span></div>
<div class="line"><span class="lineno">  164</span>  <span class="comment">//    step*labelPeriod (i.e. label distance) &gt;=  minLabelWorldDistance</span></div>
<div class="line"><span class="lineno">  165</span>  <span class="comment">//    step (i.e. tick distance) &gt;= minWorldDistance</span></div>
<div class="line"><span class="lineno">  166</span>  <span class="comment">// Note: labelPeriod alternates between 5 and 2 =&gt; labelPeriod&#39; =</span></div>
<div class="line"><span class="lineno">  167</span>  <span class="comment">// 7-labelPeriod</span></div>
<div class="line"><span class="lineno">  168</span>  m_step        = 1;</div>
<div class="line"><span class="lineno">  169</span>  m_labelPeriod = 5;</div>
<div class="line"><span class="lineno">  170</span>  <span class="keywordflow">if</span> (m_step * m_labelPeriod &gt;= minLabelWorldDistance &amp;&amp;</div>
<div class="line"><span class="lineno">  171</span>      m_step &gt;= minWorldDistance) {</div>
<div class="line"><span class="lineno">  172</span>    <span class="keywordflow">while</span> (m_step &gt;= minLabelWorldDistance &amp;&amp;</div>
<div class="line"><span class="lineno">  173</span>           m_step / (7 - m_labelPeriod) &gt;= minWorldDistance) {</div>
<div class="line"><span class="lineno">  174</span>      m_labelPeriod = 7 - m_labelPeriod;</div>
<div class="line"><span class="lineno">  175</span>      m_step /= m_labelPeriod;</div>
<div class="line"><span class="lineno">  176</span>    }</div>
<div class="line"><span class="lineno">  177</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  178</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno">  179</span>      m_step *= m_labelPeriod;</div>
<div class="line"><span class="lineno">  180</span>      m_labelPeriod =</div>
<div class="line"><span class="lineno">  181</span>          7 - m_labelPeriod;  <span class="comment">// m_labelPeriod alternates between 5 and 2</span></div>
<div class="line"><span class="lineno">  182</span>    } <span class="keywordflow">while</span> (m_step * m_labelPeriod &lt; minLabelWorldDistance ||</div>
<div class="line"><span class="lineno">  183</span>             m_step &lt; minWorldDistance);</div>
<div class="line"><span class="lineno">  184</span>  }</div>
<div class="line"><span class="lineno">  185</span> </div>
<div class="line"><span class="lineno">  186</span>  <span class="keywordflow">if</span> (m_step &gt;= minLabelWorldDistance) {</div>
<div class="line"><span class="lineno">  187</span>    m_labelPeriod = 1;</div>
<div class="line"><span class="lineno">  188</span>  }</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>  <span class="keywordflow">if</span> (m_step * m_labelPeriod &lt; m_minStep) {</div>
<div class="line"><span class="lineno">  191</span>    m_step        = m_minStep;</div>
<div class="line"><span class="lineno">  192</span>    m_labelPeriod = 1;</div>
<div class="line"><span class="lineno">  193</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_step &lt; m_minStep) {</div>
<div class="line"><span class="lineno">  194</span>    m_step *= m_labelPeriod;</div>
<div class="line"><span class="lineno">  195</span>    m_labelPeriod = 1;</div>
<div class="line"><span class="lineno">  196</span>  }</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>  <span class="comment">// compute range</span></div>
<div class="line"><span class="lineno">  199</span>  <span class="keywordtype">double</span> v0 = (m_x0 - m_pan) / m_unit;  <span class="comment">// left margin (world units)</span></div>
<div class="line"><span class="lineno">  200</span>  <span class="keywordtype">double</span> v1 = (m_x1 - m_pan) / m_unit;  <span class="comment">// right margin (world units)</span></div>
<div class="line"><span class="lineno">  201</span>  <span class="keywordflow">if</span> (m_unit &lt; 0) std::swap(v0, v1);</div>
<div class="line"><span class="lineno">  202</span>  <span class="keywordtype">int</span> i0 =</div>
<div class="line"><span class="lineno">  203</span>      tfloor((v0 - m_vOrigin) / m_step);  <span class="comment">// largest tick &lt;=v0 is i0 * m_step</span></div>
<div class="line"><span class="lineno">  204</span>  <span class="keywordtype">int</span> i1 =</div>
<div class="line"><span class="lineno">  205</span>      tceil((v1 - m_vOrigin) / m_step);  <span class="comment">// smallest tick &gt;=v1 is i1 * m_step</span></div>
<div class="line"><span class="lineno">  206</span>  m_minValue  = i0 * m_step + m_vOrigin;</div>
<div class="line"><span class="lineno">  207</span>  m_tickCount = i1 - i0 + 1;</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>  m_labelOffset = i0 &gt;= 0 ? (i0 % m_labelPeriod)</div>
<div class="line"><span class="lineno">  210</span>                          : (m_labelPeriod - ((-i0) % m_labelPeriod));</div>
<div class="line"><span class="lineno">  211</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2c6923d9cd1ad74d13c5a87cef1fca20" name="a2c6923d9cd1ad74d13c5a87cef1fca20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c6923d9cd1ad74d13c5a87cef1fca20">&#9670;&nbsp;</a></span>contextMenuEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Ruler::contextMenuEvent </td>
          <td>(</td>
          <td class="paramtype">QContextMenuEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  341</span>                                                     {</div>
<div class="line"><span class="lineno">  342</span>  <span class="comment">// do nothing. just accept event to prevent context menu to open</span></div>
<div class="line"><span class="lineno">  343</span>  <span class="keyword">event</span>-&gt;accept();</div>
<div class="line"><span class="lineno">  344</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa54853f1c9777143d80c357ba72bb775" name="aa54853f1c9777143d80c357ba72bb775"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa54853f1c9777143d80c357ba72bb775">&#9670;&nbsp;</a></span>drawHorizontal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ruler::drawHorizontal </td>
          <td>(</td>
          <td class="paramtype">QPainter &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  173</span>                                      {</div>
<div class="line"><span class="lineno">  174</span>  <span class="keywordtype">int</span> w          = width();</div>
<div class="line"><span class="lineno">  175</span>  <span class="keywordtype">int</span> h          = height();</div>
<div class="line"><span class="lineno">  176</span>  Guides &amp;guides = getGuides();</div>
<div class="line"><span class="lineno">  177</span>  <span class="keywordtype">int</span> y0         = 0;</div>
<div class="line"><span class="lineno">  178</span>  <span class="keywordtype">int</span> y1         = h - 1;</div>
<div class="line"><span class="lineno">  179</span>  p.setPen(Qt::DotLine);</div>
<div class="line"><span class="lineno">  180</span>  p.setPen(getBorderColor());</div>
<div class="line"><span class="lineno">  181</span>  p.drawLine(0, y1, w - 1, y1);</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>  <span class="keywordtype">double</span> origin = getPan() + 0.5 * w;</div>
<div class="line"><span class="lineno">  184</span>  <span class="keywordtype">double</span> unit   = getUnit();</div>
<div class="line"><span class="lineno">  185</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>  QColor color = m_scaleColor;</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>  <span class="keywordtype">int</span> count = guides.size();</div>
<div class="line"><span class="lineno">  190</span>  <span class="keywordflow">if</span> (m_hiding) count--;</div>
<div class="line"><span class="lineno">  191</span>  <span class="keywordtype">double</span> zoom = getZoomScale();</div>
<div class="line"><span class="lineno">  192</span>  <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div>
<div class="line"><span class="lineno">  193</span>    QColor color = (m_moving &amp;&amp; count - 1 == i ? QColor(getHandleDragColor())</div>
<div class="line"><span class="lineno">  194</span>                                               : QColor(getHandleColor()));</div>
<div class="line"><span class="lineno">  195</span>    <span class="keywordtype">double</span> v     = guides[i] / (double)getDevPixRatio();</div>
<div class="line"><span class="lineno">  196</span>    <span class="keywordtype">int</span> x        = (int)(origin + zoom * v);</div>
<div class="line"><span class="lineno">  197</span>    p.fillRect(QRect(x - 1, y0, 2, y1 - y0), QBrush(color));</div>
<div class="line"><span class="lineno">  198</span>  }</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>  <span class="keywordtype">int</span> i0, i1, ic;</div>
<div class="line"><span class="lineno">  201</span>  getIndices(origin, 1 / unit, w, i0, i1, ic);</div>
<div class="line"><span class="lineno">  202</span>  <span class="keywordflow">for</span> (i = i0; i &lt;= i1; i++) {</div>
<div class="line"><span class="lineno">  203</span>    <span class="keywordtype">int</span> x  = tfloor(origin + unit * (i - ic));</div>
<div class="line"><span class="lineno">  204</span>    <span class="keywordtype">int</span> yb = y1 - 1, ya;</div>
<div class="line"><span class="lineno">  205</span>    <span class="keywordflow">if</span> (i == ic) {</div>
<div class="line"><span class="lineno">  206</span>      p.setPen(m_scaleColor);</div>
<div class="line"><span class="lineno">  207</span>      ya = 1;</div>
<div class="line"><span class="lineno">  208</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  209</span>      p.setPen(color);</div>
<div class="line"><span class="lineno">  210</span>      <span class="keywordtype">int</span> h = i % 10;</div>
<div class="line"><span class="lineno">  211</span>      <span class="keywordflow">if</span> (h == 0)</div>
<div class="line"><span class="lineno">  212</span>        ya = yb - 5;</div>
<div class="line"><span class="lineno">  213</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (h == 5)</div>
<div class="line"><span class="lineno">  214</span>        ya = yb - 3;</div>
<div class="line"><span class="lineno">  215</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  216</span>        ya = yb - 2;</div>
<div class="line"><span class="lineno">  217</span>    }</div>
<div class="line"><span class="lineno">  218</span>    p.drawLine(x, ya, x, yb);</div>
<div class="line"><span class="lineno">  219</span>  }</div>
<div class="line"><span class="lineno">  220</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afc155a99f3304ec88c58a3e546ba1f30" name="afc155a99f3304ec88c58a3e546ba1f30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc155a99f3304ec88c58a3e546ba1f30">&#9670;&nbsp;</a></span>drawVertical()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ruler::drawVertical </td>
          <td>(</td>
          <td class="paramtype">QPainter &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  118</span>                                    {</div>
<div class="line"><span class="lineno">  119</span>  <span class="keywordtype">int</span> w = width();</div>
<div class="line"><span class="lineno">  120</span>  <span class="keywordtype">int</span> h = height();</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>  Guides &amp;guides = getGuides();</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>  <span class="keywordtype">int</span> x0 = 0, x1 = w - 1;</div>
<div class="line"><span class="lineno">  125</span>  p.setPen(Qt::DotLine);</div>
<div class="line"><span class="lineno">  126</span>  p.setPen(getBorderColor());</div>
<div class="line"><span class="lineno">  127</span>  p.drawLine(x1, 0, x1, h - 1);</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>  <span class="keywordtype">double</span> origin = -getPan() + 0.5 * h;</div>
<div class="line"><span class="lineno">  130</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  131</span>  <span class="keywordtype">int</span> count = guides.size();</div>
<div class="line"><span class="lineno">  132</span>  <span class="keywordflow">if</span> (m_hiding) count--;</div>
<div class="line"><span class="lineno">  133</span>  <span class="keywordtype">double</span> zoom = getZoomScale();</div>
<div class="line"><span class="lineno">  134</span>  <span class="keywordflow">if</span> (m_viewer-&gt;getIsFlippedX() != m_viewer-&gt;getIsFlippedY()) {</div>
<div class="line"><span class="lineno">  135</span>    zoom = -zoom;</div>
<div class="line"><span class="lineno">  136</span>  }</div>
<div class="line"><span class="lineno">  137</span>  <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div>
<div class="line"><span class="lineno">  138</span>    QColor color = (m_moving &amp;&amp; count - 1 == i ? QColor(getHandleDragColor())</div>
<div class="line"><span class="lineno">  139</span>                                               : QColor(getHandleColor()));</div>
<div class="line"><span class="lineno">  140</span>    <span class="keywordtype">double</span> v     = guides[i] / (double)getDevPixRatio();</div>
<div class="line"><span class="lineno">  141</span>    <span class="keywordtype">int</span> y        = (int)(origin - zoom * v);</div>
<div class="line"><span class="lineno">  142</span>    p.fillRect(QRect(x0, y - 1, x1 - x0, 2), QBrush(color));</div>
<div class="line"><span class="lineno">  143</span>  }</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>  <span class="keywordtype">double</span> unit = getUnit() / UnitParameters::getFieldGuideAspectRatio();</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>  QColor color = m_scaleColor;</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>  <span class="keywordtype">int</span> i0, i1, ic;</div>
<div class="line"><span class="lineno">  150</span>  getIndices(origin, 1 / unit, h, i0, i1, ic);</div>
<div class="line"><span class="lineno">  151</span>  <span class="keywordflow">for</span> (i = i0; i &lt;= i1; i++) {</div>
<div class="line"><span class="lineno">  152</span>    <span class="keywordtype">int</span> y  = tround(origin + unit * (i - ic));</div>
<div class="line"><span class="lineno">  153</span>    <span class="keywordtype">int</span> xb = x1 - 1, xa;</div>
<div class="line"><span class="lineno">  154</span>    <span class="keywordflow">if</span> (i == ic) {</div>
<div class="line"><span class="lineno">  155</span>      p.setPen(m_scaleColor);</div>
<div class="line"><span class="lineno">  156</span>      xa = 1;</div>
<div class="line"><span class="lineno">  157</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  158</span>      p.setPen(color);</div>
<div class="line"><span class="lineno">  159</span>      <span class="keywordtype">int</span> h = i % 10;</div>
<div class="line"><span class="lineno">  160</span>      <span class="keywordflow">if</span> (h == 0)</div>
<div class="line"><span class="lineno">  161</span>        xa = xb - 5;</div>
<div class="line"><span class="lineno">  162</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (h == 5)</div>
<div class="line"><span class="lineno">  163</span>        xa = xb - 3;</div>
<div class="line"><span class="lineno">  164</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  165</span>        xa = xb - 2;</div>
<div class="line"><span class="lineno">  166</span>    }</div>
<div class="line"><span class="lineno">  167</span>    p.drawLine(xa, y, xb, y);</div>
<div class="line"><span class="lineno">  168</span>  }</div>
<div class="line"><span class="lineno">  169</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a38083690961c3361476941b03da77d8a" name="a38083690961c3361476941b03da77d8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38083690961c3361476941b03da77d8a">&#9670;&nbsp;</a></span>getGuide()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Ruler::getGuide </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   52</span>                                      {</div>
<div class="line"><span class="lineno">   53</span>  Guides &amp;guides = getGuides();</div>
<div class="line"><span class="lineno">   54</span>  assert(0 &lt;= index &amp;&amp; index &lt; (<span class="keywordtype">int</span>)guides.size());</div>
<div class="line"><span class="lineno">   55</span>  <span class="keywordflow">return</span> guides[index];</div>
<div class="line"><span class="lineno">   56</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4770d7a4243ac52990bd63ec308c5602" name="a4770d7a4243ac52990bd63ec308c5602"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4770d7a4243ac52990bd63ec308c5602">&#9670;&nbsp;</a></span>getGuideCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Ruler::getGuideCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   48</span>{ <span class="keywordflow">return</span> getGuides().size(); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aafaac93a7c6a2c0b727381501530c7d0" name="aafaac93a7c6a2c0b727381501530c7d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafaac93a7c6a2c0b727381501530c7d0">&#9670;&nbsp;</a></span>getGuides()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Ruler::Guides &amp; Ruler::getGuides </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   40</span>                                    {</div>
<div class="line"><span class="lineno">   41</span>  <a class="code hl_class" href="class_t_scene_properties.html">TSceneProperties</a> *sprop =</div>
<div class="line"><span class="lineno">   42</span>      <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene()-&gt;<a class="code hl_function" href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">getProperties</a>();</div>
<div class="line"><span class="lineno">   43</span>  <span class="keywordflow">return</span> m_vertical ? sprop-&gt;<a class="code hl_function" href="class_t_scene_properties.html#a39eceace5e8002d5e952d6535e188c44">getVGuides</a>() : sprop-&gt;<a class="code hl_function" href="class_t_scene_properties.html#a2620e65377b1c547a5a04905fba7605e">getHGuides</a>();</div>
<div class="line"><span class="lineno">   44</span>}</div>
<div class="ttc" id="aclass_t_app_html_a24088f8647d5d9447fcec6b9b9bbf9eb"><div class="ttname"><a href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a></div><div class="ttdeci">static TApp * instance()</div><div class="ttdef"><b>Definition:</b> tapp.cpp:215</div></div>
<div class="ttc" id="aclass_t_app_html_abbbf1fae564e9e510826eda4f6637d20"><div class="ttname"><a href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">TApp::getCurrentScene</a></div><div class="ttdeci">TSceneHandle * getCurrentScene() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:106</div></div>
<div class="ttc" id="aclass_t_scene_properties_html"><div class="ttname"><a href="class_t_scene_properties.html">TSceneProperties</a></div><div class="ttdef"><b>Definition:</b> sceneproperties.h:49</div></div>
<div class="ttc" id="aclass_t_scene_properties_html_a2620e65377b1c547a5a04905fba7605e"><div class="ttname"><a href="class_t_scene_properties.html#a2620e65377b1c547a5a04905fba7605e">TSceneProperties::getHGuides</a></div><div class="ttdeci">Guides &amp; getHGuides()</div><div class="ttdef"><b>Definition:</b> sceneproperties.h:124</div></div>
<div class="ttc" id="aclass_t_scene_properties_html_a39eceace5e8002d5e952d6535e188c44"><div class="ttname"><a href="class_t_scene_properties.html#a39eceace5e8002d5e952d6535e188c44">TSceneProperties::getVGuides</a></div><div class="ttdeci">Guides &amp; getVGuides()</div><div class="ttdef"><b>Definition:</b> sceneproperties.h:130</div></div>
<div class="ttc" id="aclass_toonz_scene_html_a8ef96fedc17d7def810ac419b0939254"><div class="ttname"><a href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">ToonzScene::getProperties</a></div><div class="ttdeci">TSceneProperties * getProperties() const</div><div class="ttdoc">&lt; Returns a pointer to the scene's properties.</div><div class="ttdef"><b>Definition:</b> toonzscene.h:87</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a69d23a3d5ea2026554f052af6be36cee" name="a69d23a3d5ea2026554f052af6be36cee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69d23a3d5ea2026554f052af6be36cee">&#9670;&nbsp;</a></span>getIndices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ruler::getIndices </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>origin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>iunit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>i0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>i1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>ic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   68</span>                                      {</div>
<div class="line"><span class="lineno">   69</span>  i0 = 0;</div>
<div class="line"><span class="lineno">   70</span>  i1 = -1;</div>
<div class="line"><span class="lineno">   71</span>  ic = 0;</div>
<div class="line"><span class="lineno">   72</span>  <span class="keywordflow">if</span> (origin &gt;= 0) {</div>
<div class="line"><span class="lineno">   73</span>    i0    = -tfloor(origin * iunit);</div>
<div class="line"><span class="lineno">   74</span>    i1    = i0 + tfloor(size * iunit);</div>
<div class="line"><span class="lineno">   75</span>    <span class="keywordtype">int</span> d = tceil(-i0, 10);</div>
<div class="line"><span class="lineno">   76</span>    i0 += d;</div>
<div class="line"><span class="lineno">   77</span>    i1 += d;</div>
<div class="line"><span class="lineno">   78</span>    ic += d;</div>
<div class="line"><span class="lineno">   79</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   80</span>    i0 = tceil(-origin * iunit);</div>
<div class="line"><span class="lineno">   81</span>    i1 = i0 + tfloor(size * iunit);</div>
<div class="line"><span class="lineno">   82</span>    ic = 0;</div>
<div class="line"><span class="lineno">   83</span>  }</div>
<div class="line"><span class="lineno">   84</span>  <span class="keywordflow">if</span> (m_viewer-&gt;getIsFlippedX()) {</div>
<div class="line"><span class="lineno">   85</span>    i0 = i0 + i1;</div>
<div class="line"><span class="lineno">   86</span>    i1 = i0 - i1;</div>
<div class="line"><span class="lineno">   87</span>    i0 = i0 - i1;</div>
<div class="line"><span class="lineno">   88</span>  }</div>
<div class="line"><span class="lineno">   89</span>  <span class="comment">// assert(i0&gt;=0);</span></div>
<div class="line"><span class="lineno">   90</span>  <span class="comment">// assert((ic%10)==0);</span></div>
<div class="line"><span class="lineno">   91</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac7b24acdc4e9e0555d8ba8fc4294fbad" name="ac7b24acdc4e9e0555d8ba8fc4294fbad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7b24acdc4e9e0555d8ba8fc4294fbad">&#9670;&nbsp;</a></span>getPan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Ruler::getPan </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  104</span>                           {</div>
<div class="line"><span class="lineno">  105</span>  <a class="code hl_class" href="class_t_affine.html">TAffine</a> aff = m_viewer-&gt;<a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>();</div>
<div class="line"><span class="lineno">  106</span>  <span class="keywordflow">if</span> (m_vertical)</div>
<div class="line"><span class="lineno">  107</span>    <span class="keywordflow">if</span> (m_viewer-&gt;is3DView())  <span class="comment">// Vertical   3D</span></div>
<div class="line"><span class="lineno">  108</span>      <span class="keywordflow">return</span> m_viewer-&gt;getPan3D().y;</div>
<div class="line"><span class="lineno">  109</span>    <span class="keywordflow">else</span>  <span class="comment">// Vertical   2D</span></div>
<div class="line"><span class="lineno">  110</span>      <span class="keywordflow">return</span> aff.a23 / getDevPixRatio();</div>
<div class="line"><span class="lineno">  111</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_viewer-&gt;is3DView())  <span class="comment">// Horizontal 3D</span></div>
<div class="line"><span class="lineno">  112</span>    <span class="keywordflow">return</span> m_viewer-&gt;getPan3D().x;</div>
<div class="line"><span class="lineno">  113</span>  <span class="keywordflow">return</span> aff.a13 / getDevPixRatio();  <span class="comment">// Horizontal 2D</span></div>
<div class="line"><span class="lineno">  114</span>}</div>
<div class="ttc" id="aclass_scene_viewer_html_a3f746b9c53dc17030711cac65d96f625"><div class="ttname"><a href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">SceneViewer::getViewMatrix</a></div><div class="ttdeci">TAffine getViewMatrix() const override</div><div class="ttdef"><b>Definition:</b> sceneviewer.cpp:2211</div></div>
<div class="ttc" id="aclass_t_affine_html"><div class="ttname"><a href="class_t_affine.html">TAffine</a></div><div class="ttdoc">This is the base class for the affine transformations.</div><div class="ttdef"><b>Definition:</b> tgeometry.h:864</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="affd326dd6e173de611cff343c0205486" name="affd326dd6e173de611cff343c0205486"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affd326dd6e173de611cff343c0205486">&#9670;&nbsp;</a></span>getTick()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double Ruler::getTick </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  125</span>{ <span class="keywordflow">return</span> m_minValue + index * m_step; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab4663f088ca7e6108c3faf7c72e30ac1" name="ab4663f088ca7e6108c3faf7c72e30ac1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4663f088ca7e6108c3faf7c72e30ac1">&#9670;&nbsp;</a></span>getTickCount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Ruler::getTickCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  124</span>{ <span class="keywordflow">return</span> m_tickCount; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1663e473fd044202b326806d5051eb45" name="a1663e473fd044202b326806d5051eb45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1663e473fd044202b326806d5051eb45">&#9670;&nbsp;</a></span>getUnit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Ruler::getUnit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   60</span>                            {</div>
<div class="line"><span class="lineno">   61</span>  <span class="keywordtype">double</span> unit = getZoomScale() * <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a>;</div>
<div class="line"><span class="lineno">   62</span>  <span class="keywordflow">return</span> unit;</div>
<div class="line"><span class="lineno">   63</span>}</div>
<div class="ttc" id="anamespace_stage_html_ad3e22e31e2bb6fc1d95a572facce2d5b"><div class="ttname"><a href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a></div><div class="ttdeci">DVVAR const double inch</div><div class="ttdef"><b>Definition:</b> stageplayer.h:37</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="add8b3740abd6a3cbb79d5b225ef83e21" name="add8b3740abd6a3cbb79d5b225ef83e21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add8b3740abd6a3cbb79d5b225ef83e21">&#9670;&nbsp;</a></span>getZoomScale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Ruler::getZoomScale </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   95</span>                                 {</div>
<div class="line"><span class="lineno">   96</span>  <span class="keywordflow">if</span> (m_viewer-&gt;is3DView())</div>
<div class="line"><span class="lineno">   97</span>    <span class="keywordflow">return</span> m_viewer-&gt;getZoomScale3D();</div>
<div class="line"><span class="lineno">   98</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   99</span>    <span class="keywordflow">return</span> m_viewer-&gt;<a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>().a11;</div>
<div class="line"><span class="lineno">  100</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa2b2702c6567cac30cb09f385c82e422" name="aa2b2702c6567cac30cb09f385c82e422"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2b2702c6567cac30cb09f385c82e422">&#9670;&nbsp;</a></span>isLabel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Ruler::isLabel </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  126</span>                                {</div>
<div class="line"><span class="lineno">  127</span>    <span class="keywordflow">return</span> ((m_labelOffset + index) % m_labelPeriod) == 0;</div>
<div class="line"><span class="lineno">  128</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a61c89219cad7340f64d44c4850201766" name="a61c89219cad7340f64d44c4850201766"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61c89219cad7340f64d44c4850201766">&#9670;&nbsp;</a></span>mouseMoveEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Ruler::mouseMoveEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  294</span>                                         {</div>
<div class="line"><span class="lineno">  295</span>  <span class="keywordflow">if</span> (m_moving) {</div>
<div class="line"><span class="lineno">  296</span>    m_hiding           = m_vertical ? (e-&gt;pos().x() &lt; 0) : (e-&gt;pos().y() &lt; 0);</div>
<div class="line"><span class="lineno">  297</span>    getGuides().back() = posToValue(e-&gt;pos()) * getDevPixRatio();</div>
<div class="line"><span class="lineno">  298</span>    <span class="comment">// aggiorna sprop!!!!</span></div>
<div class="line"><span class="lineno">  299</span>    update();</div>
<div class="line"><span class="lineno">  300</span>    m_viewer-&gt;update();</div>
<div class="line"><span class="lineno">  301</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  302</span>  }</div>
<div class="line"><span class="lineno">  303</span> </div>
<div class="line"><span class="lineno">  304</span>  Guides &amp;guides = getGuides();</div>
<div class="line"><span class="lineno">  305</span>  <span class="keywordtype">double</span> v       = posToValue(e-&gt;pos());</div>
<div class="line"><span class="lineno">  306</span>  m_hiding       = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  307</span>  m_moving       = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  308</span> </div>
<div class="line"><span class="lineno">  309</span>  <span class="keywordtype">int</span> count = guides.size();</div>
<div class="line"><span class="lineno">  310</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; i++) {</div>
<div class="line"><span class="lineno">  311</span>    <span class="keywordtype">double</span> g     = guides[i] / (double)getDevPixRatio();</div>
<div class="line"><span class="lineno">  312</span>    <span class="keywordtype">double</span> dist2 = (g - v) * (g - v);</div>
<div class="line"><span class="lineno">  313</span>    <span class="keywordflow">if</span> (dist2 &lt; 25) {</div>
<div class="line"><span class="lineno">  314</span>      setToolTip(tr(</div>
<div class="line"><span class="lineno">  315</span>          <span class="stringliteral">&quot;Left-click and drag to move guide, right-click to delete guide.&quot;</span>));</div>
<div class="line"><span class="lineno">  316</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  317</span>    }</div>
<div class="line"><span class="lineno">  318</span>  }</div>
<div class="line"><span class="lineno">  319</span>  <span class="comment">// in case no guides are found near the cursor</span></div>
<div class="line"><span class="lineno">  320</span>  <span class="keywordflow">if</span> (m_vertical)</div>
<div class="line"><span class="lineno">  321</span>    setToolTip(tr(<span class="stringliteral">&quot;Click to create a horizontal guide&quot;</span>));</div>
<div class="line"><span class="lineno">  322</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  323</span>    setToolTip(tr(<span class="stringliteral">&quot;Click to create a vertical guide&quot;</span>));</div>
<div class="line"><span class="lineno">  324</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab149bb8f330fc5af9e09be12f5b743d0" name="ab149bb8f330fc5af9e09be12f5b743d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab149bb8f330fc5af9e09be12f5b743d0">&#9670;&nbsp;</a></span>mousePressEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Ruler::mousePressEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  250</span>                                          {</div>
<div class="line"><span class="lineno">  251</span>  <span class="keywordflow">if</span> (e-&gt;button() != Qt::LeftButton &amp;&amp; e-&gt;button() != Qt::RightButton) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  252</span>  Guides &amp;guides  = getGuides();</div>
<div class="line"><span class="lineno">  253</span>  <span class="keywordtype">double</span> v        = posToValue(e-&gt;pos());</div>
<div class="line"><span class="lineno">  254</span>  m_hiding        = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  255</span>  m_moving        = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  256</span>  <span class="keywordtype">int</span> selected    = -1;</div>
<div class="line"><span class="lineno">  257</span>  <span class="keywordtype">double</span> minDist2 = 0;</div>
<div class="line"><span class="lineno">  258</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  259</span>  <span class="keywordtype">int</span> count = guides.size();</div>
<div class="line"><span class="lineno">  260</span>  <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div>
<div class="line"><span class="lineno">  261</span>    <span class="keywordtype">double</span> g     = guides[i] / (double)getDevPixRatio();</div>
<div class="line"><span class="lineno">  262</span>    <span class="keywordtype">double</span> dist2 = (g - v) * (g - v);</div>
<div class="line"><span class="lineno">  263</span>    <span class="keywordflow">if</span> (selected &lt; 0 || dist2 &lt; minDist2) {</div>
<div class="line"><span class="lineno">  264</span>      minDist2 = dist2;</div>
<div class="line"><span class="lineno">  265</span>      selected = i;</div>
<div class="line"><span class="lineno">  266</span>    }</div>
<div class="line"><span class="lineno">  267</span>  }</div>
<div class="line"><span class="lineno">  268</span>  <span class="keywordflow">if</span> (e-&gt;button() == Qt::LeftButton) {</div>
<div class="line"><span class="lineno">  269</span>    <span class="keywordflow">if</span> (selected &lt; 0 || minDist2 &gt; 25) {</div>
<div class="line"><span class="lineno">  270</span>      <span class="comment">// crea una nuova guida</span></div>
<div class="line"><span class="lineno">  271</span>      guides.push_back(v * getDevPixRatio());</div>
<div class="line"><span class="lineno">  272</span>      m_viewer-&gt;update();</div>
<div class="line"><span class="lineno">  273</span>      <span class="comment">// aggiorna sprop!!!!</span></div>
<div class="line"><span class="lineno">  274</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (selected &lt; count - 1)</div>
<div class="line"><span class="lineno">  275</span>      std::swap(guides[selected], guides.back());</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>    m_moving = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  278</span>    update();</div>
<div class="line"><span class="lineno">  279</span>    assert(guides.size() &gt; 0);</div>
<div class="line"><span class="lineno">  280</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e-&gt;button() == Qt::RightButton) {</div>
<div class="line"><span class="lineno">  281</span>    <span class="keywordflow">if</span> (selected &lt; count - 1) std::swap(guides[selected], guides.back());</div>
<div class="line"><span class="lineno">  282</span>    <span class="keywordflow">if</span> (count &gt; 0 &amp;&amp; minDist2 &lt;= 25) {</div>
<div class="line"><span class="lineno">  283</span>      assert(!guides.empty());</div>
<div class="line"><span class="lineno">  284</span>      guides.pop_back();</div>
<div class="line"><span class="lineno">  285</span>      update();</div>
<div class="line"><span class="lineno">  286</span>      m_viewer-&gt;update();</div>
<div class="line"><span class="lineno">  287</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  288</span>    }</div>
<div class="line"><span class="lineno">  289</span>  }</div>
<div class="line"><span class="lineno">  290</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af2cfd10ee4c1da473d9e7f757c0d5608" name="af2cfd10ee4c1da473d9e7f757c0d5608"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2cfd10ee4c1da473d9e7f757c0d5608">&#9670;&nbsp;</a></span>mouseReleaseEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Ruler::mouseReleaseEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  328</span>                                            {</div>
<div class="line"><span class="lineno">  329</span>  <span class="keywordflow">if</span> (!m_moving) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  330</span>  <span class="keywordflow">if</span> (m_hiding) {</div>
<div class="line"><span class="lineno">  331</span>    assert(!getGuides().empty());</div>
<div class="line"><span class="lineno">  332</span>    getGuides().pop_back();</div>
<div class="line"><span class="lineno">  333</span>  }</div>
<div class="line"><span class="lineno">  334</span>  m_moving = m_hiding = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  335</span>  update();</div>
<div class="line"><span class="lineno">  336</span>  m_viewer-&gt;update();</div>
<div class="line"><span class="lineno">  337</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a38f7295e7e26e1d373d6fa8daf081ae8" name="a38f7295e7e26e1d373d6fa8daf081ae8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38f7295e7e26e1d373d6fa8daf081ae8">&#9670;&nbsp;</a></span>paintEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Ruler::paintEvent </td>
          <td>(</td>
          <td class="paramtype">QPaintEvent *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  224</span>                                    {</div>
<div class="line"><span class="lineno">  225</span>  QPainter p(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  226</span>  p.fillRect(QRect(0, 0, width(), height()), QBrush(m_parentBgColor));</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>  <span class="keywordflow">if</span> (m_vertical)</div>
<div class="line"><span class="lineno">  229</span>    drawVertical(p);</div>
<div class="line"><span class="lineno">  230</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  231</span>    drawHorizontal(p);</div>
<div class="line"><span class="lineno">  232</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a25929db0096652642e3dc3d738cf769f" name="a25929db0096652642e3dc3d738cf769f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25929db0096652642e3dc3d738cf769f">&#9670;&nbsp;</a></span>posToValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Ruler::posToValue </td>
          <td>(</td>
          <td class="paramtype">const QPoint &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  236</span>                                              {</div>
<div class="line"><span class="lineno">  237</span>  <span class="keywordtype">double</span> v;</div>
<div class="line"><span class="lineno">  238</span>  <span class="keywordflow">if</span> (m_vertical)</div>
<div class="line"><span class="lineno">  239</span>    <span class="keywordflow">if</span> (m_viewer-&gt;getIsFlippedX() != m_viewer-&gt;getIsFlippedY()) {</div>
<div class="line"><span class="lineno">  240</span>      v = (-p.y() + height() / 2 - getPan()) / -getZoomScale();</div>
<div class="line"><span class="lineno">  241</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  242</span>      v = (-p.y() + height() / 2 - getPan()) / getZoomScale();</div>
<div class="line"><span class="lineno">  243</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  244</span>    v = (p.x() - width() / 2 - getPan()) / getZoomScale();</div>
<div class="line"><span class="lineno">  245</span>  <span class="keywordflow">return</span> v;</div>
<div class="line"><span class="lineno">  246</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a72bdd3f87f88342f266be162fdd075b9" name="a72bdd3f87f88342f266be162fdd075b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72bdd3f87f88342f266be162fdd075b9">&#9670;&nbsp;</a></span>setMinDistance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Ruler::setMinDistance </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>distance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  116</span>{ m_minDistance = distance; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="af59772d14a806264c2c76d817fd02fad" name="af59772d14a806264c2c76d817fd02fad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af59772d14a806264c2c76d817fd02fad">&#9670;&nbsp;</a></span>setMinLabelDistance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Ruler::setMinLabelDistance </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>distance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  114</span>{ m_minLabelDistance = distance; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a064ee24d0059cce691034e5bd2603eec" name="a064ee24d0059cce691034e5bd2603eec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a064ee24d0059cce691034e5bd2603eec">&#9670;&nbsp;</a></span>setMinStep()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Ruler::setMinStep </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>step</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  120</span>{ m_minStep = step; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="acb7efa152c029f34780aea291e5e7498" name="acb7efa152c029f34780aea291e5e7498"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb7efa152c029f34780aea291e5e7498">&#9670;&nbsp;</a></span>setRange()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Ruler::setRange </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  108</span>                                {</div>
<div class="line"><span class="lineno">  109</span>    m_x0 = x0;</div>
<div class="line"><span class="lineno">  110</span>    m_x1 = x1;</div>
<div class="line"><span class="lineno">  111</span>  }  <span class="comment">// [x0,x1] is the pixel range</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab0b141923bc65ba2fe42159f97291715" name="ab0b141923bc65ba2fe42159f97291715"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0b141923bc65ba2fe42159f97291715">&#9670;&nbsp;</a></span>setTransform()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Ruler::setTransform </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>unit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>pan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>vOrigin</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  102</span>                                                                 {</div>
<div class="line"><span class="lineno">  103</span>    m_unit    = unit;</div>
<div class="line"><span class="lineno">  104</span>    m_pan     = pan;</div>
<div class="line"><span class="lineno">  105</span>    m_vOrigin = vOrigin;</div>
<div class="line"><span class="lineno">  106</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a id="aac0aa89c995437e15e9d7df2ab142726" name="aac0aa89c995437e15e9d7df2ab142726"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac0aa89c995437e15e9d7df2ab142726">&#9670;&nbsp;</a></span>BorderColor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QColor Ruler::BorderColor</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">write</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6ddadbccd2de995bd7ab724e242e5b26" name="a6ddadbccd2de995bd7ab724e242e5b26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ddadbccd2de995bd7ab724e242e5b26">&#9670;&nbsp;</a></span>HandleColor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QColor Ruler::HandleColor</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">write</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa4d5056315596137ce96c501f19b3842" name="aa4d5056315596137ce96c501f19b3842"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4d5056315596137ce96c501f19b3842">&#9670;&nbsp;</a></span>HandleDragColor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QColor Ruler::HandleDragColor</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">write</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a02dc34469c79889a8abe32aaf4f5ab16" name="a02dc34469c79889a8abe32aaf4f5ab16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02dc34469c79889a8abe32aaf4f5ab16">&#9670;&nbsp;</a></span>ParentBGColor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QColor Ruler::ParentBGColor</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">write</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab9d2b1eaef5c4acf469c54e26385c01f" name="ab9d2b1eaef5c4acf469c54e26385c01f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9d2b1eaef5c4acf469c54e26385c01f">&#9670;&nbsp;</a></span>ScaleColor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QColor Ruler::ScaleColor</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">write</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>E:/opentoonz/toonz/sources/toonz/<a class="el" href="">ruler.h</a></li>
<li>E:/opentoonz/toonz/sources/toonzqt/<a class="el" href="">functionpanel.cpp</a></li>
<li>E:/opentoonz/toonz/sources/toonz/<a class="el" href="">ruler.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
