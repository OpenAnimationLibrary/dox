<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: ToonzScene Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_toonz_scene-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ToonzScene Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afec1477d4fe0bb1e1152e80c3a0b20ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_project.html">TProject</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#afec1477d4fe0bb1e1152e80c3a0b20ab">getProject</a> () const</td></tr>
<tr class="memdesc:afec1477d4fe0bb1e1152e80c3a0b20ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a pointer to the project holding a scene instance.  <a href="class_toonz_scene.html#afec1477d4fe0bb1e1152e80c3a0b20ab">More...</a><br /></td></tr>
<tr class="separator:afec1477d4fe0bb1e1152e80c3a0b20ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7aac33fc53c47ea5baff597e5f18a9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#aa7aac33fc53c47ea5baff597e5f18a9b">setProject</a> (<a class="el" href="class_t_project.html">TProject</a> *)</td></tr>
<tr class="memdesc:aa7aac33fc53c47ea5baff597e5f18a9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associates a scene to a project.  <a href="class_toonz_scene.html#aa7aac33fc53c47ea5baff597e5f18a9b">More...</a><br /></td></tr>
<tr class="separator:aa7aac33fc53c47ea5baff597e5f18a9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a815ecf4f07a92f9f9fef693f762c1228"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a815ecf4f07a92f9f9fef693f762c1228">setScenePath</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;p)</td></tr>
<tr class="memdesc:a815ecf4f07a92f9f9fef693f762c1228"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the scene's file path.  <a href="class_toonz_scene.html#a815ecf4f07a92f9f9fef693f762c1228">More...</a><br /></td></tr>
<tr class="separator:a815ecf4f07a92f9f9fef693f762c1228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad42b52b671b094f66e003c4b7ebefd45"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_file_path.html">TFilePath</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#ad42b52b671b094f66e003c4b7ebefd45">getScenePath</a> () const</td></tr>
<tr class="memdesc:ad42b52b671b094f66e003c4b7ebefd45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the scene's file path.  <a href="class_toonz_scene.html#ad42b52b671b094f66e003c4b7ebefd45">More...</a><br /></td></tr>
<tr class="separator:ad42b52b671b094f66e003c4b7ebefd45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c168c9551d1ac99ad3ce4849d36a464"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a8c168c9551d1ac99ad3ce4849d36a464">setSceneName</a> (std::wstring name)</td></tr>
<tr class="memdesc:a8c168c9551d1ac99ad3ce4849d36a464"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the scene's name.  <a href="class_toonz_scene.html#a8c168c9551d1ac99ad3ce4849d36a464">More...</a><br /></td></tr>
<tr class="separator:a8c168c9551d1ac99ad3ce4849d36a464"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fa0a1cbf9eb6360d980392acc99924b"><td class="memItemLeft" align="right" valign="top">std::wstring&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a1fa0a1cbf9eb6360d980392acc99924b">getSceneName</a> () const</td></tr>
<tr class="memdesc:a1fa0a1cbf9eb6360d980392acc99924b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the scene's name.  <a href="class_toonz_scene.html#a1fa0a1cbf9eb6360d980392acc99924b">More...</a><br /></td></tr>
<tr class="separator:a1fa0a1cbf9eb6360d980392acc99924b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5e0cf52431bcf95e54faa416f0fc21d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#ad5e0cf52431bcf95e54faa416f0fc21d">setUntitled</a> ()</td></tr>
<tr class="memdesc:ad5e0cf52431bcf95e54faa416f0fc21d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks the scene as explicitly untitled.  <a href="class_toonz_scene.html#ad5e0cf52431bcf95e54faa416f0fc21d">More...</a><br /></td></tr>
<tr class="separator:ad5e0cf52431bcf95e54faa416f0fc21d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53cbaf09f551658479eb743e153ab6bc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a53cbaf09f551658479eb743e153ab6bc">isUntitled</a> () const</td></tr>
<tr class="separator:a53cbaf09f551658479eb743e153ab6bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3c828e3223fd809fd59189233d0576a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_xsheet.html">TXsheet</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">getXsheet</a> () const</td></tr>
<tr class="memdesc:ae3c828e3223fd809fd59189233d0576a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a pointer to the scene's <em>current</em> xsheet.  <a href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">More...</a><br /></td></tr>
<tr class="separator:ae3c828e3223fd809fd59189233d0576a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaffd562eebbd8faba4caeaed69bfcc18"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_xsheet.html">TXsheet</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#aaffd562eebbd8faba4caeaed69bfcc18">getTopXsheet</a> () const</td></tr>
<tr class="separator:aaffd562eebbd8faba4caeaed69bfcc18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2cbc582144c92adc5076cd5f556c95a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_child_stack.html">ChildStack</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#ae2cbc582144c92adc5076cd5f556c95a">getChildStack</a> () const</td></tr>
<tr class="memdesc:ae2cbc582144c92adc5076cd5f556c95a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a pointer to the xsheets hierarchy.  <a href="class_toonz_scene.html#ae2cbc582144c92adc5076cd5f556c95a">More...</a><br /></td></tr>
<tr class="separator:ae2cbc582144c92adc5076cd5f556c95a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ef96fedc17d7def810ac419b0939254"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_scene_properties.html">TSceneProperties</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">getProperties</a> () const</td></tr>
<tr class="memdesc:a8ef96fedc17d7def810ac419b0939254"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt; Returns a pointer to the scene's properties.  <a href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">More...</a><br /></td></tr>
<tr class="separator:a8ef96fedc17d7def810ac419b0939254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1a8bf0d2cec4f59c87b0001991264b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_level_set.html">TLevelSet</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#ac1a8bf0d2cec4f59c87b0001991264b5">getLevelSet</a> () const</td></tr>
<tr class="memdesc:ac1a8bf0d2cec4f59c87b0001991264b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a pointer to the scene's <em>Level Set</em>.  <a href="class_toonz_scene.html#ac1a8bf0d2cec4f59c87b0001991264b5">More...</a><br /></td></tr>
<tr class="separator:ac1a8bf0d2cec4f59c87b0001991264b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad63e1050bdbe8f213f5da4bc852c6f7a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#ad63e1050bdbe8f213f5da4bc852c6f7a">clear</a> ()</td></tr>
<tr class="memdesc:ad63e1050bdbe8f213f5da4bc852c6f7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the scene.  <a href="class_toonz_scene.html#ad63e1050bdbe8f213f5da4bc852c6f7a">More...</a><br /></td></tr>
<tr class="separator:ad63e1050bdbe8f213f5da4bc852c6f7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac65f5b13baf094ba58e2e74c6949df61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#ac65f5b13baf094ba58e2e74c6949df61">save</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;path, <a class="el" href="class_t_xsheet.html">TXsheet</a> *subxsheet=0)</td></tr>
<tr class="separator:ac65f5b13baf094ba58e2e74c6949df61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac16c1eaa9cba08a24be952e8f3d62a8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#ac16c1eaa9cba08a24be952e8f3d62a8f">loadTnzFile</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;path)</td></tr>
<tr class="separator:ac16c1eaa9cba08a24be952e8f3d62a8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1c6f51c86f8feba26ea8633a2283125"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#ac1c6f51c86f8feba26ea8633a2283125">loadNoResources</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;path)</td></tr>
<tr class="separator:ac1c6f51c86f8feba26ea8633a2283125"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1379cb7299d5c0c1f764cd7a629fcef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#af1379cb7299d5c0c1f764cd7a629fcef">loadResources</a> (bool withProgressDialog=false)</td></tr>
<tr class="memdesc:af1379cb7299d5c0c1f764cd7a629fcef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads the scene resources.  <a href="class_toonz_scene.html#af1379cb7299d5c0c1f764cd7a629fcef">More...</a><br /></td></tr>
<tr class="separator:af1379cb7299d5c0c1f764cd7a629fcef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8765c2df661b90822547a9137e77aba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#ac8765c2df661b90822547a9137e77aba">load</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;path, bool withProgressDialog=false)</td></tr>
<tr class="separator:ac8765c2df661b90822547a9137e77aba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26d8d4a1f92e962e8c1d40f3a1d37a45"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_file_path.html">TFilePath</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a26d8d4a1f92e962e8c1d40f3a1d37a45">getImportedLevelPath</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> path) const</td></tr>
<tr class="memdesc:a26d8d4a1f92e962e8c1d40f3a1d37a45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a scene from file.  <a href="class_toonz_scene.html#a26d8d4a1f92e962e8c1d40f3a1d37a45">More...</a><br /></td></tr>
<tr class="separator:a26d8d4a1f92e962e8c1d40f3a1d37a45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8d5a080e48a1ab0241c410ce3a0f485"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#ad8d5a080e48a1ab0241c410ce3a0f485">convertLevelIfNeeded</a> (<a class="el" href="class_t_file_path.html">TFilePath</a> &amp;levelPath)</td></tr>
<tr class="separator:ad8d5a080e48a1ab0241c410ce3a0f485"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6bd7d22f6310011d48dfb5176344015"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_xsh_level.html">TXshLevel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#ae6bd7d22f6310011d48dfb5176344015">loadLevel</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;actualPath, const <a class="el" href="class_level_options.html">LevelOptions</a> *options=0, std::wstring levelName=L&quot;&quot;, const std::vector&lt; <a class="el" href="class_t_frame_id.html">TFrameId</a> &gt; &amp;fIds=std::vector&lt; <a class="el" href="class_t_frame_id.html">TFrameId</a> &gt;())</td></tr>
<tr class="separator:ae6bd7d22f6310011d48dfb5176344015"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5839f9331bbd43c14fcf51d700e731f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a5839f9331bbd43c14fcf51d700e731f1">renderFrame</a> (const <a class="el" href="class_t_raster_p_t.html">TRaster32P</a> &amp;ras, int row, const <a class="el" href="class_t_xsheet.html">TXsheet</a> *xsh=0, bool checkFlags=true) const</td></tr>
<tr class="separator:a5839f9331bbd43c14fcf51d700e731f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbc821048387af2b6fe21c0c1223060e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#afbc821048387af2b6fe21c0c1223060e">renderFrame</a> (const <a class="el" href="class_t_raster_p_t.html">TRaster32P</a> &amp;ras, int row, const <a class="el" href="class_t_xsheet.html">TXsheet</a> *xsh, const <a class="el" href="class_t_rect_t.html">TRectD</a> &amp;placedRect, const <a class="el" href="class_t_affine.html">TAffine</a> &amp;worldToPlacedAff) const</td></tr>
<tr class="separator:afbc821048387af2b6fe21c0c1223060e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5cd3ad6f894b1acc5656ca747a80627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#ab5cd3ad6f894b1acc5656ca747a80627">getFrameCount</a> () const</td></tr>
<tr class="separator:ab5cd3ad6f894b1acc5656ca747a80627"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22171559a050d37bdf6763e8abcaf73c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a22171559a050d37bdf6763e8abcaf73c">loadFrameCount</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;fp)</td></tr>
<tr class="separator:a22171559a050d37bdf6763e8abcaf73c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8791183db4daa28bdffdd40e15c3b9e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_xsh_level.html">TXshLevel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#ac8791183db4daa28bdffdd40e15c3b9e">createNewLevel</a> (int type, std::wstring levelName=L&quot;&quot;, const <a class="el" href="class_t_dimension_t.html">TDimension</a> &amp;dim=<a class="el" href="class_t_dimension_t.html">TDimension</a>(), double dpi=0, <a class="el" href="class_t_file_path.html">TFilePath</a> fp=<a class="el" href="class_t_file_path.html">TFilePath</a>())</td></tr>
<tr class="separator:ac8791183db4daa28bdffdd40e15c3b9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb12422205be4336c3dee1aa5fbdc5e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_file_path.html">TFilePath</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#abb12422205be4336c3dee1aa5fbdc5e5">codeFilePath</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;) const</td></tr>
<tr class="separator:abb12422205be4336c3dee1aa5fbdc5e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ed57dfbae7f8cf02a4abe47ed533c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_file_path.html">TFilePath</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#aa2ed57dfbae7f8cf02a4abe47ed533c6">decodeFilePath</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;) const</td></tr>
<tr class="separator:aa2ed57dfbae7f8cf02a4abe47ed533c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a657e45d8e257f7c2047022b75dc8600d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a657e45d8e257f7c2047022b75dc8600d">isExternPath</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;fp) const</td></tr>
<tr class="separator:a657e45d8e257f7c2047022b75dc8600d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f7940ad6794546ba923304231820f00"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_file_path.html">TFilePath</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a3f7940ad6794546ba923304231820f00">getDefaultLevelPath</a> (int levelType, std::wstring levelName=L&quot;a&quot;) const</td></tr>
<tr class="separator:a3f7940ad6794546ba923304231820f00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef65f946258e28f8cc6dd7b83fb304a8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_file_path.html">TFilePath</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#aef65f946258e28f8cc6dd7b83fb304a8">codeSavePath</a> (<a class="el" href="class_t_file_path.html">TFilePath</a>) const</td></tr>
<tr class="separator:aef65f946258e28f8cc6dd7b83fb304a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a988041b1acd57d079881147224cf1ebe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_file_path.html">TFilePath</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a988041b1acd57d079881147224cf1ebe">decodeSavePath</a> (<a class="el" href="class_t_file_path.html">TFilePath</a>) const</td></tr>
<tr class="separator:a988041b1acd57d079881147224cf1ebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a750b5ab623ccec744013b0c83bf20abc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_camera.html">TCamera</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a750b5ab623ccec744013b0c83bf20abc">getCurrentCamera</a> ()</td></tr>
<tr class="separator:a750b5ab623ccec744013b0c83bf20abc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78f568fb7c0bd57f0212e5f69bd06f16"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_camera.html">TCamera</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a78f568fb7c0bd57f0212e5f69bd06f16">getCurrentPreviewCamera</a> ()</td></tr>
<tr class="separator:a78f568fb7c0bd57f0212e5f69bd06f16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8bd378d5af03124df8ee54f216a09d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#ac8bd378d5af03124df8ee54f216a09d3">getSoundColumns</a> (std::vector&lt; <a class="el" href="class_t_xsh_sound_column.html">TXshSoundColumn</a> * &gt; &amp;columns)</td></tr>
<tr class="separator:ac8bd378d5af03124df8ee54f216a09d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9304aa6099f4b83540c0261e64d17a25"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a9304aa6099f4b83540c0261e64d17a25">updateSoundColumnFrameRate</a> ()</td></tr>
<tr class="separator:a9304aa6099f4b83540c0261e64d17a25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab706bb783e2ff91a76423e12fce6e7fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_file_path.html">TFilePath</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#ab706bb783e2ff91a76423e12fce6e7fe">getIconPath</a> () const</td></tr>
<tr class="separator:ab706bb783e2ff91a76423e12fce6e7fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27f04f65e52c9c9a4ebc55ea25f0ddbb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_file_path.html">TFilePath</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a27f04f65e52c9c9a4ebc55ea25f0ddbb">getSavePath</a> () const</td></tr>
<tr class="separator:a27f04f65e52c9c9a4ebc55ea25f0ddbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3c27b7146c62da156c5d5bffca0e9d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_content_history.html">TContentHistory</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#ae3c27b7146c62da156c5d5bffca0e9d7">getContentHistory</a> (bool createIfNeeded=false)</td></tr>
<tr class="memdesc:ae3c27b7146c62da156c5d5bffca0e9d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">gets the contentHistory. possibly creates a new one (if createIfNeeded)  <a href="class_toonz_scene.html#ae3c27b7146c62da156c5d5bffca0e9d7">More...</a><br /></td></tr>
<tr class="separator:ae3c27b7146c62da156c5d5bffca0e9d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a190e3b95a8a40384fcd3a15a116cc651"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a190e3b95a8a40384fcd3a15a116cc651">shiftCameraX</a> (double val)</td></tr>
<tr class="separator:a190e3b95a8a40384fcd3a15a116cc651"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a335bc842d433ec40bcdc697821916cf8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a335bc842d433ec40bcdc697821916cf8">setVersionNumber</a> (VersionNumber version)</td></tr>
<tr class="separator:a335bc842d433ec40bcdc697821916cf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedb528bcece52278325ab31d664faf20"><td class="memItemLeft" align="right" valign="top">VersionNumber&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#aedb528bcece52278325ab31d664faf20">getVersionNumber</a> ()</td></tr>
<tr class="separator:aedb528bcece52278325ab31d664faf20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd9f530d887f647cb58cd8ab96445a89"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#acd9f530d887f647cb58cd8ab96445a89">codeFilePathWithSceneFolder</a> (<a class="el" href="class_t_file_path.html">TFilePath</a> &amp;path) const</td></tr>
<tr class="separator:acd9f530d887f647cb58cd8ab96445a89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78b979156507dc35586cdd435e0f26cb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a78b979156507dc35586cdd435e0f26cb">isLoading</a> ()</td></tr>
<tr class="separator:a78b979156507dc35586cdd435e0f26cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58a128eb8be9f67ead32ac5c674a51f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a58a128eb8be9f67ead32ac5c674a51f1">setIsLoading</a> (bool isLoading)</td></tr>
<tr class="separator:a58a128eb8be9f67ead32ac5c674a51f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51bbbe2c6a6f8433c1009215f712ede9"><td class="memItemLeft" align="right" valign="top">std::wstring&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a51bbbe2c6a6f8433c1009215f712ede9">getLevelNameWithoutSceneNumber</a> (std::wstring orgName)</td></tr>
<tr class="separator:a51bbbe2c6a6f8433c1009215f712ede9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a2d97e9b3647bb45c0c992a6c92c659eb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_t_file_path.html">TFilePath</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_toonz_scene.html#a2d97e9b3647bb45c0c992a6c92c659eb">getIconPath</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;scenePath)</td></tr>
<tr class="separator:a2d97e9b3647bb45c0c992a6c92c659eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a922033446879d3f278daae6e31b6147e" name="a922033446879d3f278daae6e31b6147e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a922033446879d3f278daae6e31b6147e">&#9670;&nbsp;</a></span>ToonzScene()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ToonzScene::ToonzScene </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  280</span>    : m_contentHistory(0), m_isUntitled(<span class="keyword">true</span>), m_isLoading(<span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno">  281</span>  m_childStack = <span class="keyword">new</span> <a class="code hl_class" href="class_child_stack.html">ChildStack</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  282</span>  m_properties = <span class="keyword">new</span> <a class="code hl_class" href="class_t_scene_properties.html">TSceneProperties</a>();</div>
<div class="line"><span class="lineno">  283</span>  m_levelSet   = <span class="keyword">new</span> <a class="code hl_class" href="class_t_level_set.html">TLevelSet</a>();</div>
<div class="line"><span class="lineno">  284</span>  m_project    = <span class="keyword">new</span> <a class="code hl_class" href="class_t_project.html">TProject</a>();</div>
<div class="line"><span class="lineno">  285</span>  m_project-&gt;addRef();</div>
<div class="line"><span class="lineno">  286</span>}</div>
<div class="ttc" id="aclass_child_stack_html"><div class="ttname"><a href="class_child_stack.html">ChildStack</a></div><div class="ttdoc">The ChildStack class provides a stack of xsheet and allows its management.</div><div class="ttdef"><b>Definition:</b> childstack.h:41</div></div>
<div class="ttc" id="aclass_t_level_set_html"><div class="ttname"><a href="class_t_level_set.html">TLevelSet</a></div><div class="ttdef"><b>Definition:</b> levelset.h:63</div></div>
<div class="ttc" id="aclass_t_project_html"><div class="ttname"><a href="class_t_project.html">TProject</a></div><div class="ttdoc">Define and handle a toonz project.</div><div class="ttdef"><b>Definition:</b> tproject.h:24</div></div>
<div class="ttc" id="aclass_t_scene_properties_html"><div class="ttname"><a href="class_t_scene_properties.html">TSceneProperties</a></div><div class="ttdef"><b>Definition:</b> sceneproperties.h:49</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b8a8e33aa3d2315c6d7aadda3d159d8" name="a3b8a8e33aa3d2315c6d7aadda3d159d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b8a8e33aa3d2315c6d7aadda3d159d8">&#9670;&nbsp;</a></span>~ToonzScene()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ToonzScene::~ToonzScene </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  290</span>                        {</div>
<div class="line"><span class="lineno">  291</span>  <span class="keyword">delete</span> m_properties;</div>
<div class="line"><span class="lineno">  292</span>  <span class="keyword">delete</span> m_levelSet;</div>
<div class="line"><span class="lineno">  293</span>  <span class="keyword">delete</span> m_childStack;</div>
<div class="line"><span class="lineno">  294</span>  <span class="keyword">delete</span> m_contentHistory;</div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span>  assert(m_project);</div>
<div class="line"><span class="lineno">  297</span>  <span class="keywordflow">if</span> (m_project) m_project-&gt;release();</div>
<div class="line"><span class="lineno">  298</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad63e1050bdbe8f213f5da4bc852c6f7a" name="ad63e1050bdbe8f213f5da4bc852c6f7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad63e1050bdbe8f213f5da4bc852c6f7a">&#9670;&nbsp;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ToonzScene::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clears the scene. </p>
<div class="fragment"><div class="line"><span class="lineno">  308</span>                       {</div>
<div class="line"><span class="lineno">  309</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="class_toonz_scene.html#a53cbaf09f551658479eb743e153ab6bc">isUntitled</a>()) deleteUntitledScene(<a class="code hl_function" href="class_toonz_scene.html#ad42b52b671b094f66e003c4b7ebefd45">getScenePath</a>().getParentDir());</div>
<div class="line"><span class="lineno">  310</span> </div>
<div class="line"><span class="lineno">  311</span>  m_childStack-&gt;<a class="code hl_function" href="class_child_stack.html#a45ee4c46f539dc56bc687a10c27caa57">clear</a>();</div>
<div class="line"><span class="lineno">  312</span> </div>
<div class="line"><span class="lineno">  313</span>  m_scenePath                  = <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>();</div>
<div class="line"><span class="lineno">  314</span>  <a class="code hl_class" href="class_t_scene_properties.html">TSceneProperties</a> *properties = m_properties;</div>
<div class="line"><span class="lineno">  315</span>  m_properties                 = <span class="keyword">new</span> <a class="code hl_class" href="class_t_scene_properties.html">TSceneProperties</a>();</div>
<div class="line"><span class="lineno">  316</span>  <span class="keyword">delete</span> properties;</div>
<div class="line"><span class="lineno">  317</span>  m_levelSet-&gt;clear();</div>
<div class="line"><span class="lineno">  318</span>}</div>
<div class="ttc" id="aclass_child_stack_html_a45ee4c46f539dc56bc687a10c27caa57"><div class="ttname"><a href="class_child_stack.html#a45ee4c46f539dc56bc687a10c27caa57">ChildStack::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> childstack.cpp:49</div></div>
<div class="ttc" id="aclass_t_file_path_html"><div class="ttname"><a href="class_t_file_path.html">TFilePath</a></div><div class="ttdef"><b>Definition:</b> tfilepath.h:134</div></div>
<div class="ttc" id="aclass_toonz_scene_html_a53cbaf09f551658479eb743e153ab6bc"><div class="ttname"><a href="class_toonz_scene.html#a53cbaf09f551658479eb743e153ab6bc">ToonzScene::isUntitled</a></div><div class="ttdeci">bool isUntitled() const</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:345</div></div>
<div class="ttc" id="aclass_toonz_scene_html_ad42b52b671b094f66e003c4b7ebefd45"><div class="ttname"><a href="class_toonz_scene.html#ad42b52b671b094f66e003c4b7ebefd45">ToonzScene::getScenePath</a></div><div class="ttdeci">TFilePath getScenePath() const</div><div class="ttdoc">Returns the scene's file path.</div><div class="ttdef"><b>Definition:</b> toonzscene.h:59</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00049">ChildStack::clear()</a>, <a class="el" href="#l00059">getScenePath()</a>, and <a class="el" href="#l00345">isUntitled()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00394">loadNoResources()</a>.</p>

</div>
</div>
<a id="abb12422205be4336c3dee1aa5fbdc5e5" name="abb12422205be4336c3dee1aa5fbdc5e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb12422205be4336c3dee1aa5fbdc5e5">&#9670;&nbsp;</a></span>codeFilePath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_file_path.html">TFilePath</a> ToonzScene::codeFilePath </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Code file path <b><a class="el" href="class_t_file_path.html">TFilePath</a></b>. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="class_toonz_scene.html#aa2ed57dfbae7f8cf02a4abe47ed533c6">decodeFilePath()</a> </dd></dl>
<div class="fragment"><div class="line"><span class="lineno"> 1328</span>                                                              {</div>
<div class="line"><span class="lineno"> 1329</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> fp(path);</div>
<div class="line"><span class="lineno"> 1330</span>  <a class="code hl_class" href="class_t_project.html">TProject</a> *project = <a class="code hl_function" href="class_toonz_scene.html#afec1477d4fe0bb1e1152e80c3a0b20ab">getProject</a>();</div>
<div class="line"><span class="lineno"> 1331</span> </div>
<div class="line"><span class="lineno"> 1332</span>  Preferences::PathAliasPriority priority =</div>
<div class="line"><span class="lineno"> 1333</span>      Preferences::instance()-&gt;getPathAliasPriority();</div>
<div class="line"><span class="lineno"> 1334</span>  <span class="keywordflow">if</span> (priority == Preferences::SceneFolderAlias &amp;&amp;</div>
<div class="line"><span class="lineno"> 1335</span>      codeFilePathWithSceneFolder(fp)) {</div>
<div class="line"><span class="lineno"> 1336</span>    <span class="keywordflow">return</span> fp;</div>
<div class="line"><span class="lineno"> 1337</span>  }</div>
<div class="line"><span class="lineno"> 1338</span> </div>
<div class="line"><span class="lineno"> 1339</span>  <span class="keywordflow">if</span> (project)</div>
<div class="line"><span class="lineno"> 1340</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; project-&gt;<a class="code hl_function" href="class_t_project.html#a26ebcdd853071adf3bfb4e80aabed84f">getFolderCount</a>(); i++) {</div>
<div class="line"><span class="lineno"> 1341</span>      <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> folderName(<span class="stringliteral">&quot;+&quot;</span> + project-&gt;<a class="code hl_function" href="class_t_project.html#ab7cd33e579f84763bee6421daeb3bde5">getFolderName</a>(i));</div>
<div class="line"><span class="lineno"> 1342</span>      <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> folderPath = <a class="code hl_function" href="class_toonz_scene.html#aa2ed57dfbae7f8cf02a4abe47ed533c6">decodeFilePath</a>(folderName);</div>
<div class="line"><span class="lineno"> 1343</span>      <span class="keywordflow">if</span> (folderPath.isAncestorOf(fp)) {</div>
<div class="line"><span class="lineno"> 1344</span>        fp = folderName + (fp - folderPath);</div>
<div class="line"><span class="lineno"> 1345</span>        <span class="keywordflow">return</span> fp;</div>
<div class="line"><span class="lineno"> 1346</span>      }</div>
<div class="line"><span class="lineno"> 1347</span>    }</div>
<div class="line"><span class="lineno"> 1348</span> </div>
<div class="line"><span class="lineno"> 1349</span>  <span class="keywordflow">if</span> (priority == Preferences::ProjectFolderAliases)</div>
<div class="line"><span class="lineno"> 1350</span>    codeFilePathWithSceneFolder(fp);</div>
<div class="line"><span class="lineno"> 1351</span> </div>
<div class="line"><span class="lineno"> 1352</span>  <span class="keywordflow">return</span> fp;</div>
<div class="line"><span class="lineno"> 1353</span>}</div>
<div class="ttc" id="aclass_t_project_html_a26ebcdd853071adf3bfb4e80aabed84f"><div class="ttname"><a href="class_t_project.html#a26ebcdd853071adf3bfb4e80aabed84f">TProject::getFolderCount</a></div><div class="ttdeci">int getFolderCount() const</div><div class="ttdoc">Returns the number of the folders contained in the project folder.</div><div class="ttdef"><b>Definition:</b> tproject.cpp:384</div></div>
<div class="ttc" id="aclass_t_project_html_ab7cd33e579f84763bee6421daeb3bde5"><div class="ttname"><a href="class_t_project.html#ab7cd33e579f84763bee6421daeb3bde5">TProject::getFolderName</a></div><div class="ttdeci">std::string getFolderName(int index) const</div><div class="ttdoc">Returns the name of the folder indexed with index.</div><div class="ttdef"><b>Definition:</b> tproject.cpp:388</div></div>
<div class="ttc" id="aclass_toonz_scene_html_aa2ed57dfbae7f8cf02a4abe47ed533c6"><div class="ttname"><a href="class_toonz_scene.html#aa2ed57dfbae7f8cf02a4abe47ed533c6">ToonzScene::decodeFilePath</a></div><div class="ttdeci">TFilePath decodeFilePath(const TFilePath &amp;) const</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:1231</div></div>
<div class="ttc" id="aclass_toonz_scene_html_afec1477d4fe0bb1e1152e80c3a0b20ab"><div class="ttname"><a href="class_toonz_scene.html#afec1477d4fe0bb1e1152e80c3a0b20ab">ToonzScene::getProject</a></div><div class="ttdeci">TProject * getProject() const</div><div class="ttdoc">Returns a pointer to the project holding a scene instance.</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:334</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01231">decodeFilePath()</a>, <a class="el" href="#l00384">TProject::getFolderCount()</a>, <a class="el" href="#l00388">TProject::getFolderName()</a>, and <a class="el" href="#l00334">getProject()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l02076">ReplaceParentDirectoryPopup::execute()</a>, <a class="el" href="#l01122">loadLevel()</a>, <a class="el" href="#l00968">OutputSettingsPopup::onPathChanged()</a>, and <a class="el" href="#l00242">Vectorizer::setLevel()</a>.</p>

</div>
</div>
<a id="acd9f530d887f647cb58cd8ab96445a89" name="acd9f530d887f647cb58cd8ab96445a89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd9f530d887f647cb58cd8ab96445a89">&#9670;&nbsp;</a></span>codeFilePathWithSceneFolder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ToonzScene::codeFilePathWithSceneFolder </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1358</span>                                                                  {</div>
<div class="line"><span class="lineno"> 1359</span>  <span class="comment">// if the scene is untitled, then do nothing and return false</span></div>
<div class="line"><span class="lineno"> 1360</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="class_toonz_scene.html#a53cbaf09f551658479eb743e153ab6bc">isUntitled</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1361</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> sceneFolderPath = m_scenePath.<a class="code hl_function" href="class_t_file_path.html#a1f5014e9c396bc2268820c19bc15657d">getParentDir</a>();</div>
<div class="line"><span class="lineno"> 1362</span>  <span class="keywordflow">if</span> (sceneFolderPath.isAncestorOf(path)) {</div>
<div class="line"><span class="lineno"> 1363</span>    path = <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(<span class="stringliteral">&quot;$scenefolder&quot;</span>) + (path - sceneFolderPath);</div>
<div class="line"><span class="lineno"> 1364</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1365</span>  }</div>
<div class="line"><span class="lineno"> 1366</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1367</span>}</div>
<div class="ttc" id="aclass_t_file_path_html_a1f5014e9c396bc2268820c19bc15657d"><div class="ttname"><a href="class_t_file_path.html#a1f5014e9c396bc2268820c19bc15657d">TFilePath::getParentDir</a></div><div class="ttdeci">TFilePath getParentDir() const</div><div class="ttdef"><b>Definition:</b> tfilepath.cpp:683</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aef65f946258e28f8cc6dd7b83fb304a8" name="aef65f946258e28f8cc6dd7b83fb304a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef65f946258e28f8cc6dd7b83fb304a8">&#9670;&nbsp;</a></span>codeSavePath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_file_path.html">TFilePath</a> ToonzScene::codeSavePath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_file_path.html">TFilePath</a>&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Code save path. Es. +drawings/seq1/scena1/a.pli -&gt; +drawings/$savepath/a.pli </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="class_toonz_scene.html#a988041b1acd57d079881147224cf1ebe">decodeSavePath()</a> </dd></dl>
<div class="fragment"><div class="line"><span class="lineno"> 1412</span>                                                       {</div>
<div class="line"><span class="lineno"> 1413</span>  <span class="keywordflow">if</span> (path == <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>()) <span class="keywordflow">return</span> path;</div>
<div class="line"><span class="lineno"> 1414</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> savePath = <a class="code hl_function" href="class_toonz_scene.html#a27f04f65e52c9c9a4ebc55ea25f0ddbb">getSavePath</a>();</div>
<div class="line"><span class="lineno"> 1415</span>  <span class="keywordflow">if</span> (savePath == <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>()) <span class="keywordflow">return</span> path;  <span class="comment">// non dovrebbe succedere mai</span></div>
<div class="line"><span class="lineno"> 1416</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> filename;</div>
<div class="line"><span class="lineno"> 1417</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> originalPath = path;</div>
<div class="line"><span class="lineno"> 1418</span>  <span class="keywordflow">if</span> (savePath.<a class="code hl_function" href="class_t_file_path.html#ac17d65d827432f0fae28fed699bf4afa">withoutParentDir</a>() != path.<a class="code hl_function" href="class_t_file_path.html#ac17d65d827432f0fae28fed699bf4afa">withoutParentDir</a>()) {</div>
<div class="line"><span class="lineno"> 1419</span>    <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> parentDir = path.<a class="code hl_function" href="class_t_file_path.html#a1f5014e9c396bc2268820c19bc15657d">getParentDir</a>();</div>
<div class="line"><span class="lineno"> 1420</span>    <span class="keywordflow">if</span> (parentDir != <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>() &amp;&amp; !parentDir.isRoot()) {</div>
<div class="line"><span class="lineno"> 1421</span>      filename = path.<a class="code hl_function" href="class_t_file_path.html#ac17d65d827432f0fae28fed699bf4afa">withoutParentDir</a>();</div>
<div class="line"><span class="lineno"> 1422</span>      path     = parentDir;</div>
<div class="line"><span class="lineno"> 1423</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1424</span>      <span class="keywordflow">return</span> originalPath;</div>
<div class="line"><span class="lineno"> 1425</span>  }</div>
<div class="line"><span class="lineno"> 1426</span> </div>
<div class="line"><span class="lineno"> 1427</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> head;</div>
<div class="line"><span class="lineno"> 1428</span>  <span class="keywordflow">if</span> (!checkTail(path, savePath, head)) <span class="keywordflow">return</span> originalPath;</div>
<div class="line"><span class="lineno"> 1429</span>  <span class="keywordflow">if</span> (head.<a class="code hl_function" href="class_t_file_path.html#a1f5014e9c396bc2268820c19bc15657d">getParentDir</a>() != <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>() || head == <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>() ||</div>
<div class="line"><span class="lineno"> 1430</span>      head.getWideString()[0] != L<span class="charliteral">&#39;+&#39;</span>)</div>
<div class="line"><span class="lineno"> 1431</span>    <span class="keywordflow">return</span> originalPath;</div>
<div class="line"><span class="lineno"> 1432</span>  std::string folderName = ::to_string(head.getWideString().substr(1));</div>
<div class="line"><span class="lineno"> 1433</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="class_toonz_scene.html#afec1477d4fe0bb1e1152e80c3a0b20ab">getProject</a>()-&gt;getUseScenePath(folderName)) <span class="keywordflow">return</span> originalPath;</div>
<div class="line"><span class="lineno"> 1434</span>  <span class="keywordflow">return</span> head + savePathString + filename;</div>
<div class="line"><span class="lineno"> 1435</span>}</div>
<div class="ttc" id="aclass_t_file_path_html_ac17d65d827432f0fae28fed699bf4afa"><div class="ttname"><a href="class_t_file_path.html#ac17d65d827432f0fae28fed699bf4afa">TFilePath::withoutParentDir</a></div><div class="ttdeci">TFilePath withoutParentDir() const</div><div class="ttdef"><b>Definition:</b> tfilepath.h:264</div></div>
<div class="ttc" id="aclass_toonz_scene_html_a27f04f65e52c9c9a4ebc55ea25f0ddbb"><div class="ttname"><a href="class_toonz_scene.html#a27f04f65e52c9c9a4ebc55ea25f0ddbb">ToonzScene::getSavePath</a></div><div class="ttdeci">TFilePath getSavePath() const</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:1558</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00683">TFilePath::getParentDir()</a>, <a class="el" href="#l00334">getProject()</a>, <a class="el" href="#l01558">getSavePath()</a>, and <a class="el" href="#l00264">TFilePath::withoutParentDir()</a>.</p>

</div>
</div>
<a id="ad8d5a080e48a1ab0241c410ce3a0f485" name="ad8d5a080e48a1ab0241c410ce3a0f485"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8d5a080e48a1ab0241c410ce3a0f485">&#9670;&nbsp;</a></span>convertLevelIfNeeded()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ToonzScene::convertLevelIfNeeded </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>levelPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >If conversion is required, a new level file will be created and <code>levelPath</code> will be substituted with its new path.</p>
<dl class="section return"><dt>Returns</dt><dd>Whether the level doesn't need to be converted or the conversion succeeded. <br  />
 Checks if the given levelPath is a file path </dd></dl>
<div class="fragment"><div class="line"><span class="lineno"> 1058</span>                                                          {</div>
<div class="line"><span class="lineno"> 1059</span>  <a class="code hl_struct" href="struct_level_type.html">LevelType</a> ltype = getLevelType(levelPath);</div>
<div class="line"><span class="lineno"> 1060</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> fp    = levelPath;</div>
<div class="line"><span class="lineno"> 1061</span>  <span class="keywordflow">if</span> (ltype.m_vectorNotPli) {</div>
<div class="line"><span class="lineno"> 1062</span>    <span class="comment">// livello flash o svg</span></div>
<div class="line"><span class="lineno"> 1063</span>    levelPath = levelPath.<a class="code hl_function" href="class_t_file_path.html#a1437b0e0720e9258b622f68b6858e95d">withType</a>(<span class="stringliteral">&quot;pli&quot;</span>);</div>
<div class="line"><span class="lineno"> 1064</span>    <a class="code hl_class" href="class_t_level_writer_p.html">TLevelWriterP</a> lw(levelPath);</div>
<div class="line"><span class="lineno"> 1065</span>    <a class="code hl_class" href="class_t_level_reader_p.html">TLevelReaderP</a> lr(fp);</div>
<div class="line"><span class="lineno"> 1066</span>    <span class="keywordflow">if</span> (!lr) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1067</span>    <a class="code hl_class" href="class_t_level_p.html">TLevelP</a> inLevel = lr-&gt;loadInfo();</div>
<div class="line"><span class="lineno"> 1068</span>    <span class="keywordflow">if</span> (!inLevel || inLevel-&gt;getFrameCount() == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1069</span>    <a class="code hl_class" href="class_t_level_p.html">TLevelP</a> outLevel;</div>
<div class="line"><span class="lineno"> 1070</span>    <span class="keywordflow">for</span> (TLevel::Iterator it = inLevel-&gt;begin(); it != inLevel-&gt;end(); ++it) {</div>
<div class="line"><span class="lineno"> 1071</span>      <a class="code hl_class" href="class_t_vector_image_p.html">TVectorImageP</a> img = lr-&gt;getFrameReader(it-&gt;first)-&gt;load();</div>
<div class="line"><span class="lineno"> 1072</span>      <span class="keywordflow">if</span> (!img) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1073</span>      lw-&gt;getFrameWriter(it-&gt;first)-&gt;save(img);</div>
<div class="line"><span class="lineno"> 1074</span>    }</div>
<div class="line"><span class="lineno"> 1075</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ltype.m_oldLevelFlag) {</div>
<div class="line"><span class="lineno"> 1076</span>    <a class="code hl_class" href="class_t_level_p.html">TLevelP</a> outLevel;</div>
<div class="line"><span class="lineno"> 1077</span>    <span class="comment">// livello Toonz 4.6</span></div>
<div class="line"><span class="lineno"> 1078</span>    levelPath = <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(levelPath.<a class="code hl_function" href="class_t_file_path.html#a1f5014e9c396bc2268820c19bc15657d">getParentDir</a>().getWideString() + L<span class="stringliteral">&quot;\\&quot;</span> +</div>
<div class="line"><span class="lineno"> 1079</span>                          levelPath.getWideName() + L<span class="stringliteral">&quot;.tlv&quot;</span>);</div>
<div class="line"><span class="lineno"> 1080</span>    <span class="keywordflow">if</span> (TSystem::doesExistFileOrLevel(levelPath))</div>
<div class="line"><span class="lineno"> 1081</span>      TSystem::removeFileOrLevel(levelPath);</div>
<div class="line"><span class="lineno"> 1082</span>    <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> pltPath = <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(levelPath.<a class="code hl_function" href="class_t_file_path.html#a1f5014e9c396bc2268820c19bc15657d">getParentDir</a>().getWideString() +</div>
<div class="line"><span class="lineno"> 1083</span>                                  L<span class="stringliteral">&quot;\\&quot;</span> + levelPath.getWideName() + L<span class="stringliteral">&quot;.tpl&quot;</span>);</div>
<div class="line"><span class="lineno"> 1084</span>    <span class="keywordflow">if</span> (TSystem::doesExistFileOrLevel(pltPath))</div>
<div class="line"><span class="lineno"> 1085</span>      TSystem::removeFileOrLevel(pltPath);</div>
<div class="line"><span class="lineno"> 1086</span> </div>
<div class="line"><span class="lineno"> 1087</span>    <a class="code hl_class" href="class_t_level_writer_p.html">TLevelWriterP</a> lw(levelPath);</div>
<div class="line"><span class="lineno"> 1088</span>    lw-&gt;setIconSize(Preferences::instance()-&gt;getIconSize());</div>
<div class="line"><span class="lineno"> 1089</span>    <a class="code hl_class" href="class_t_smart_pointer_t.html">TPaletteP</a> palette =</div>
<div class="line"><span class="lineno"> 1090</span>        ToonzImageUtils::loadTzPalette(fp.<a class="code hl_function" href="class_t_file_path.html#a1437b0e0720e9258b622f68b6858e95d">withType</a>(<span class="stringliteral">&quot;plt&quot;</span>).withNoFrame());</div>
<div class="line"><span class="lineno"> 1091</span>    <a class="code hl_class" href="class_t_level_reader_p.html">TLevelReaderP</a> lr(fp);</div>
<div class="line"><span class="lineno"> 1092</span>    <span class="keywordflow">if</span> (!lr) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1093</span>    <a class="code hl_class" href="class_t_level_p.html">TLevelP</a> inLevel = lr-&gt;loadInfo();</div>
<div class="line"><span class="lineno"> 1094</span>    <span class="keywordflow">if</span> (!inLevel || inLevel-&gt;getFrameCount() == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1095</span>    outLevel-&gt;setPalette(palette.getPointer());</div>
<div class="line"><span class="lineno"> 1096</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1097</span>      <span class="keywordflow">for</span> (TLevel::Iterator it = inLevel-&gt;begin(); it != inLevel-&gt;end(); ++it) {</div>
<div class="line"><span class="lineno"> 1098</span>        <a class="code hl_class" href="class_t_toonz_image_p.html">TToonzImageP</a> img = lr-&gt;getFrameReader(it-&gt;first)-&gt;load();</div>
<div class="line"><span class="lineno"> 1099</span>        <span class="keywordflow">if</span> (!img) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1100</span>        img-&gt;setPalette(palette.getPointer());</div>
<div class="line"><span class="lineno"> 1101</span>        lw-&gt;getFrameWriter(it-&gt;first)-&gt;save(img);</div>
<div class="line"><span class="lineno"> 1102</span>      }</div>
<div class="line"><span class="lineno"> 1103</span>    } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;e) {</div>
<div class="line"><span class="lineno"> 1104</span>      <span class="comment">// devo buttare il tlv che stavo salvando!</span></div>
<div class="line"><span class="lineno"> 1105</span>      QString msg = QString::fromStdWString(e.getMessage());</div>
<div class="line"><span class="lineno"> 1106</span>      <span class="keywordflow">if</span> (msg == QString(<span class="stringliteral">&quot;Old 4.1 Palette&quot;</span>)) {</div>
<div class="line"><span class="lineno"> 1107</span>        lw = <a class="code hl_class" href="class_t_level_writer_p.html">TLevelWriterP</a>();</div>
<div class="line"><span class="lineno"> 1108</span>        <span class="keywordflow">if</span> (TSystem::doesExistFileOrLevel(levelPath))</div>
<div class="line"><span class="lineno"> 1109</span>          TSystem::removeFileOrLevel(levelPath);</div>
<div class="line"><span class="lineno"> 1110</span>        <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno"> 1111</span>      }</div>
<div class="line"><span class="lineno"> 1112</span>    }</div>
<div class="line"><span class="lineno"> 1113</span>    lw = <a class="code hl_class" href="class_t_level_writer_p.html">TLevelWriterP</a>();  <span class="comment">// bisogna liberare prima lw di outLevel,</span></div>
<div class="line"><span class="lineno"> 1114</span>    <span class="comment">// altrimenti la paletta che lw vuole scrivere e&#39; gia&#39; stata</span></div>
<div class="line"><span class="lineno"> 1115</span>    <span class="comment">// loutLeveliberata.</span></div>
<div class="line"><span class="lineno"> 1116</span>  }</div>
<div class="line"><span class="lineno"> 1117</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1118</span>}</div>
<div class="ttc" id="aclass_t_exception_html"><div class="ttname"><a href="class_t_exception.html">TException</a></div><div class="ttdef"><b>Definition:</b> texception.h:18</div></div>
<div class="ttc" id="aclass_t_file_path_html_a1437b0e0720e9258b622f68b6858e95d"><div class="ttname"><a href="class_t_file_path.html#a1437b0e0720e9258b622f68b6858e95d">TFilePath::withType</a></div><div class="ttdeci">TFilePath withType(const std::string &amp;type) const</div><div class="ttdef"><b>Definition:</b> tfilepath.cpp:774</div></div>
<div class="ttc" id="aclass_t_level_p_html"><div class="ttname"><a href="class_t_level_p.html">TLevelP</a></div><div class="ttdef"><b>Definition:</b> tlevel.h:77</div></div>
<div class="ttc" id="aclass_t_level_reader_p_html"><div class="ttname"><a href="class_t_level_reader_p.html">TLevelReaderP</a></div><div class="ttdef"><b>Definition:</b> tlevel_io.h:109</div></div>
<div class="ttc" id="aclass_t_level_writer_p_html"><div class="ttname"><a href="class_t_level_writer_p.html">TLevelWriterP</a></div><div class="ttdef"><b>Definition:</b> tlevel_io.h:214</div></div>
<div class="ttc" id="aclass_t_smart_pointer_t_html"><div class="ttname"><a href="class_t_smart_pointer_t.html">TSmartPointerT&lt; TPalette &gt;</a></div></div>
<div class="ttc" id="aclass_t_toonz_image_p_html"><div class="ttname"><a href="class_t_toonz_image_p.html">TToonzImageP</a></div><div class="ttdef"><b>Definition:</b> ttoonzimage.h:126</div></div>
<div class="ttc" id="aclass_t_vector_image_p_html"><div class="ttname"><a href="class_t_vector_image_p.html">TVectorImageP</a></div><div class="ttdef"><b>Definition:</b> tvectorimage.h:417</div></div>
<div class="ttc" id="astruct_level_type_html"><div class="ttname"><a href="struct_level_type.html">LevelType</a></div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:967</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00683">TFilePath::getParentDir()</a>, and <a class="el" href="#l00774">TFilePath::withType()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l01122">loadLevel()</a>.</p>

</div>
</div>
<a id="ac8791183db4daa28bdffdd40e15c3b9e" name="ac8791183db4daa28bdffdd40e15c3b9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8791183db4daa28bdffdd40e15c3b9e">&#9670;&nbsp;</a></span>createNewLevel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_xsh_level.html">TXshLevel</a> * ToonzScene::createNewLevel </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::wstring&#160;</td>
          <td class="paramname"><em>levelName</em> = <code>L&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_dimension_t.html">TDimension</a> &amp;&#160;</td>
          <td class="paramname"><em>dim</em> = <code><a class="el" href="class_t_dimension_t.html">TDimension</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dpi</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_file_path.html">TFilePath</a>&#160;</td>
          <td class="paramname"><em>fp</em> = <code><a class="el" href="class_t_file_path.html">TFilePath</a>()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Return a pointer to <b><a class="el" href="class_t_xsh_level.html" title="The TXshLevel class is the base class of level managers in xsheet.">TXshLevel</a></b>, a new level. <br  />
Create a new level with <b>type</b> defined in <b><a class="el" href="">txshleveltypes.h</a></b> and <b>levelName</b>. <b>wstring</b> <b>levelName</b> force an anambiguos name. </p>
<div class="fragment"><div class="line"><span class="lineno">  866</span>                                                    {</div>
<div class="line"><span class="lineno">  867</span>  <a class="code hl_class" href="class_t_level_set.html">TLevelSet</a> *levelSet = <a class="code hl_function" href="class_toonz_scene.html#ac1a8bf0d2cec4f59c87b0001991264b5">getLevelSet</a>();</div>
<div class="line"><span class="lineno">  868</span> </div>
<div class="line"><span class="lineno">  869</span>  <span class="keywordflow">if</span> (type == TZI_XSHLEVEL)  <span class="comment">// TZI type corresponds to the &#39;Scan Level&#39;</span></div>
<div class="line"><span class="lineno">  870</span>    type = OVL_XSHLEVEL;     <span class="comment">// default option. See Toonz Preferences class.</span></div>
<div class="line"><span class="lineno">  871</span> </div>
<div class="line"><span class="lineno">  872</span>  <span class="keywordflow">if</span> (type == CHILD_XSHLEVEL &amp;&amp; levelName == L<span class="stringliteral">&quot;&quot;</span>) levelName = L<span class="stringliteral">&quot;sub&quot;</span>;</div>
<div class="line"><span class="lineno">  873</span> </div>
<div class="line"><span class="lineno">  874</span>  <span class="comment">// Select a different unique level name in case it already exists (either in</span></div>
<div class="line"><span class="lineno">  875</span>  <span class="comment">// scene or on disk)</span></div>
<div class="line"><span class="lineno">  876</span>  {</div>
<div class="line"><span class="lineno">  877</span>    <span class="keyword">const</span> std::unique_ptr&lt;NameBuilder&gt; nameBuilder(</div>
<div class="line"><span class="lineno">  878</span>        NameBuilder::getBuilder(levelName));</div>
<div class="line"><span class="lineno">  879</span> </div>
<div class="line"><span class="lineno">  880</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno">  881</span>      levelName = nameBuilder-&gt;getNext();</div>
<div class="line"><span class="lineno">  882</span>      <span class="comment">/*-- level --*/</span></div>
<div class="line"><span class="lineno">  883</span>      <span class="keywordflow">if</span> (m_levelSet-&gt;getLevel(levelName) != 0) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  884</span> </div>
<div class="line"><span class="lineno">  885</span>      <span class="comment">/*-- LevelSetLevel --*/</span></div>
<div class="line"><span class="lineno">  886</span>      <span class="keywordflow">if</span> (type != CHILD_XSHLEVEL &amp;&amp; type != PLT_XSHLEVEL) {</div>
<div class="line"><span class="lineno">  887</span>        <span class="keywordflow">if</span> (fp.isEmpty()) fp = <a class="code hl_function" href="class_toonz_scene.html#a3f7940ad6794546ba923304231820f00">getDefaultLevelPath</a>(type, levelName);</div>
<div class="line"><span class="lineno">  888</span>        <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> actualFp = <a class="code hl_function" href="class_toonz_scene.html#aa2ed57dfbae7f8cf02a4abe47ed533c6">decodeFilePath</a>(fp);</div>
<div class="line"><span class="lineno">  889</span> </div>
<div class="line"><span class="lineno">  890</span>        <span class="keywordflow">if</span> (TSystem::doesExistFileOrLevel(</div>
<div class="line"><span class="lineno">  891</span>                actualFp))  <span class="comment">// if(TFileStatus(actualFp).doesExist()) continue;</span></div>
<div class="line"><span class="lineno">  892</span>        {</div>
<div class="line"><span class="lineno">  893</span>          fp = <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>();</div>
<div class="line"><span class="lineno">  894</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  895</span>        }</div>
<div class="line"><span class="lineno">  896</span> </div>
<div class="line"><span class="lineno">  897</span>        <span class="keywordtype">int</span> l, lCount = levelSet-&gt;getLevelCount();</div>
<div class="line"><span class="lineno">  898</span>        <span class="keywordflow">for</span> (l = 0; l != lCount; ++l) {</div>
<div class="line"><span class="lineno">  899</span>          <a class="code hl_class" href="class_t_xsh_level.html">TXshLevel</a> *xl = levelSet-&gt;getLevel(l);</div>
<div class="line"><span class="lineno">  900</span>          <span class="keywordflow">if</span> (!xl) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  901</span> </div>
<div class="line"><span class="lineno">  902</span>          <a class="code hl_class" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a> *sl = xl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">getSimpleLevel</a>();</div>
<div class="line"><span class="lineno">  903</span>          <span class="keywordflow">if</span> (!sl) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  904</span> </div>
<div class="line"><span class="lineno">  905</span>          <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> lfp = <a class="code hl_function" href="class_toonz_scene.html#aa2ed57dfbae7f8cf02a4abe47ed533c6">decodeFilePath</a>(sl-&gt;<a class="code hl_function" href="class_t_xsh_simple_level.html#a668293d53a70cca8811db28d87011c55">getPath</a>());</div>
<div class="line"><span class="lineno">  906</span>          <span class="keywordflow">if</span> (actualFp == lfp) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  907</span>        }</div>
<div class="line"><span class="lineno">  908</span> </div>
<div class="line"><span class="lineno">  909</span>        <span class="keywordflow">if</span> (l &lt; lCount) {</div>
<div class="line"><span class="lineno">  910</span>          <span class="comment">/*-- fpLevel --*/</span></div>
<div class="line"><span class="lineno">  911</span>          fp = <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>();</div>
<div class="line"><span class="lineno">  912</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  913</span>        }</div>
<div class="line"><span class="lineno">  914</span>      }</div>
<div class="line"><span class="lineno">  915</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  916</span>    }</div>
<div class="line"><span class="lineno">  917</span>  }</div>
<div class="line"><span class="lineno">  918</span> </div>
<div class="line"><span class="lineno">  919</span>  <a class="code hl_class" href="class_t_xsh_level.html">TXshLevel</a> *xl = 0;</div>
<div class="line"><span class="lineno">  920</span>  <span class="keywordflow">if</span> (type == CHILD_XSHLEVEL) {</div>
<div class="line"><span class="lineno">  921</span>    <a class="code hl_class" href="class_t_xsh_child_level.html">TXshChildLevel</a> *cl = <span class="keyword">new</span> <a class="code hl_class" href="class_t_xsh_child_level.html">TXshChildLevel</a>(levelName);</div>
<div class="line"><span class="lineno">  922</span>    cl-&gt;<a class="code hl_function" href="class_t_xsh_child_level.html#a10691f4c9edb22c1b8af2c1c2bab4f21">setScene</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  923</span>    cl-&gt;<a class="code hl_function" href="class_t_xsh_child_level.html#ad2676276ae1db83a898a3eef10e0ace8">getXsheet</a>()-&gt;<a class="code hl_function" href="class_t_xsheet.html#acb634f75579e77275e6dd5fad3ead2b6">setScene</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  924</span>    xl = cl;</div>
<div class="line"><span class="lineno">  925</span> </div>
<div class="line"><span class="lineno">  926</span>    <span class="comment">// Include the project&#39;s default cameras</span></div>
<div class="line"><span class="lineno">  927</span>    <span class="keyword">const</span> <a class="code hl_class" href="class_t_scene_properties.html">TSceneProperties</a> &amp;props =</div>
<div class="line"><span class="lineno">  928</span>        <a class="code hl_function" href="class_t_project_manager.html#a150ca0d6e2eb171b8117b0c5f03dbfad">TProjectManager::instance</a>()-&gt;<a class="code hl_function" href="class_t_project_manager.html#a5267cfeae48d4e7585c3fc56d8d5b0b3">getCurrentProject</a>()-&gt;getSceneProperties();</div>
<div class="line"><span class="lineno">  929</span> </div>
<div class="line"><span class="lineno">  930</span>    props.<a class="code hl_function" href="class_t_scene_properties.html#ab7c40fadf71826d7774df4cadb28f991">cloneCamerasTo</a>(cl-&gt;<a class="code hl_function" href="class_t_xsh_child_level.html#ad2676276ae1db83a898a3eef10e0ace8">getXsheet</a>()-&gt;<a class="code hl_function" href="class_t_xsheet.html#a5dc925584e35e1678f5678b79c470959">getStageObjectTree</a>());</div>
<div class="line"><span class="lineno">  931</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == PLT_XSHLEVEL) {</div>
<div class="line"><span class="lineno">  932</span>    <a class="code hl_class" href="class_t_xsh_palette_level.html">TXshPaletteLevel</a> *pl = <span class="keyword">new</span> <a class="code hl_class" href="class_t_xsh_palette_level.html">TXshPaletteLevel</a>(levelName);</div>
<div class="line"><span class="lineno">  933</span>    pl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a3c0052e5b6496d5bd9c697f678761e5c">setScene</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  934</span>    xl = pl;</div>
<div class="line"><span class="lineno">  935</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  936</span>    <a class="code hl_class" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a> *sl = <span class="keyword">new</span> <a class="code hl_class" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a>(levelName);</div>
<div class="line"><span class="lineno">  937</span> </div>
<div class="line"><span class="lineno">  938</span>    sl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a3c0052e5b6496d5bd9c697f678761e5c">setScene</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  939</span>    sl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#ad2cb5812d9f36e9f5d570874dad8d3bd">setType</a>(type);</div>
<div class="line"><span class="lineno">  940</span>    sl-&gt;setPath(fp);</div>
<div class="line"><span class="lineno">  941</span>    sl-&gt;<a class="code hl_function" href="class_t_xsh_simple_level.html#a2d43337766628739707849f8808bf300">setDirtyFlag</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  942</span> </div>
<div class="line"><span class="lineno">  943</span>    sl-&gt;initializePalette();</div>
<div class="line"><span class="lineno">  944</span>    sl-&gt;initializeResolutionAndDpi();</div>
<div class="line"><span class="lineno">  945</span> </div>
<div class="line"><span class="lineno">  946</span>    xl = sl;</div>
<div class="line"><span class="lineno">  947</span>  }</div>
<div class="line"><span class="lineno">  948</span> </div>
<div class="line"><span class="lineno">  949</span>  m_levelSet-&gt;insertLevel(xl);</div>
<div class="line"><span class="lineno">  950</span>  TNotifier::instance()-&gt;notify(<a class="code hl_class" href="class_t_cast_change.html">TCastChange</a>());</div>
<div class="line"><span class="lineno">  951</span> </div>
<div class="line"><span class="lineno">  952</span>  <span class="keywordflow">return</span> xl;</div>
<div class="line"><span class="lineno">  953</span>}</div>
<div class="ttc" id="aclass_t_cast_change_html"><div class="ttname"><a href="class_t_cast_change.html">TCastChange</a></div><div class="ttdef"><b>Definition:</b> observer.h:271</div></div>
<div class="ttc" id="aclass_t_project_manager_html_a150ca0d6e2eb171b8117b0c5f03dbfad"><div class="ttname"><a href="class_t_project_manager.html#a150ca0d6e2eb171b8117b0c5f03dbfad">TProjectManager::instance</a></div><div class="ttdeci">static TProjectManager * instance()</div><div class="ttdef"><b>Definition:</b> tproject.cpp:777</div></div>
<div class="ttc" id="aclass_t_project_manager_html_a5267cfeae48d4e7585c3fc56d8d5b0b3"><div class="ttname"><a href="class_t_project_manager.html#a5267cfeae48d4e7585c3fc56d8d5b0b3">TProjectManager::getCurrentProject</a></div><div class="ttdeci">TProjectP getCurrentProject()</div><div class="ttdef"><b>Definition:</b> tproject.cpp:993</div></div>
<div class="ttc" id="aclass_t_scene_properties_html_ab7c40fadf71826d7774df4cadb28f991"><div class="ttname"><a href="class_t_scene_properties.html#ab7c40fadf71826d7774df4cadb28f991">TSceneProperties::cloneCamerasTo</a></div><div class="ttdeci">void cloneCamerasTo(TStageObjectTree *stageObjects) const</div><div class="ttdef"><b>Definition:</b> sceneproperties.cpp:779</div></div>
<div class="ttc" id="aclass_t_xsh_child_level_html"><div class="ttname"><a href="class_t_xsh_child_level.html">TXshChildLevel</a></div><div class="ttdef"><b>Definition:</b> txshchildlevel.h:39</div></div>
<div class="ttc" id="aclass_t_xsh_child_level_html_a10691f4c9edb22c1b8af2c1c2bab4f21"><div class="ttname"><a href="class_t_xsh_child_level.html#a10691f4c9edb22c1b8af2c1c2bab4f21">TXshChildLevel::setScene</a></div><div class="ttdeci">void setScene(ToonzScene *scene) override</div><div class="ttdef"><b>Definition:</b> txshchildlevel.cpp:74</div></div>
<div class="ttc" id="aclass_t_xsh_child_level_html_ad2676276ae1db83a898a3eef10e0ace8"><div class="ttname"><a href="class_t_xsh_child_level.html#ad2676276ae1db83a898a3eef10e0ace8">TXshChildLevel::getXsheet</a></div><div class="ttdeci">TXsheet * getXsheet()</div><div class="ttdef"><b>Definition:</b> txshchildlevel.h:65</div></div>
<div class="ttc" id="aclass_t_xsh_level_html"><div class="ttname"><a href="class_t_xsh_level.html">TXshLevel</a></div><div class="ttdoc">The TXshLevel class is the base class of level managers in xsheet.</div><div class="ttdef"><b>Definition:</b> txshlevel.h:50</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_a023065559cff76164ecb6344c586ba27"><div class="ttname"><a href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">TXshLevel::getSimpleLevel</a></div><div class="ttdeci">virtual TXshSimpleLevel * getSimpleLevel()</div><div class="ttdoc">Method (to be overridden in subclasses) to downcast to TXshSimpleLevel.</div><div class="ttdef"><b>Definition:</b> txshlevel.h:95</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_a3c0052e5b6496d5bd9c697f678761e5c"><div class="ttname"><a href="class_t_xsh_level.html#a3c0052e5b6496d5bd9c697f678761e5c">TXshLevel::setScene</a></div><div class="ttdeci">virtual void setScene(ToonzScene *scene)</div><div class="ttdef"><b>Definition:</b> txshlevel.cpp:24</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_ad2cb5812d9f36e9f5d570874dad8d3bd"><div class="ttname"><a href="class_t_xsh_level.html#ad2cb5812d9f36e9f5d570874dad8d3bd">TXshLevel::setType</a></div><div class="ttdeci">void setType(int type)</div><div class="ttdoc">change the level type;</div><div class="ttdef"><b>Definition:</b> txshlevel.h:84</div></div>
<div class="ttc" id="aclass_t_xsh_palette_level_html"><div class="ttname"><a href="class_t_xsh_palette_level.html">TXshPaletteLevel</a></div><div class="ttdoc">The TXshPaletteLevel class represents a palette uncoupled from a level.</div><div class="ttdef"><b>Definition:</b> txshpalettelevel.h:33</div></div>
<div class="ttc" id="aclass_t_xsh_simple_level_html"><div class="ttname"><a href="class_t_xsh_simple_level.html">TXshSimpleLevel</a></div><div class="ttdoc">The TXshLevel specialization for image levels.</div><div class="ttdef"><b>Definition:</b> txshsimplelevel.h:60</div></div>
<div class="ttc" id="aclass_t_xsh_simple_level_html_a2d43337766628739707849f8808bf300"><div class="ttname"><a href="class_t_xsh_simple_level.html#a2d43337766628739707849f8808bf300">TXshSimpleLevel::setDirtyFlag</a></div><div class="ttdeci">void setDirtyFlag(bool on) override</div><div class="ttdoc">Mark the level as &quot;modified&quot;.</div><div class="ttdef"><b>Definition:</b> txshsimplelevel.cpp:320</div></div>
<div class="ttc" id="aclass_t_xsh_simple_level_html_a668293d53a70cca8811db28d87011c55"><div class="ttname"><a href="class_t_xsh_simple_level.html#a668293d53a70cca8811db28d87011c55">TXshSimpleLevel::getPath</a></div><div class="ttdeci">TFilePath getPath() const override</div><div class="ttdoc">Return the file path associated with the level.</div><div class="ttdef"><b>Definition:</b> txshsimplelevel.h:120</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a5dc925584e35e1678f5678b79c470959"><div class="ttname"><a href="class_t_xsheet.html#a5dc925584e35e1678f5678b79c470959">TXsheet::getStageObjectTree</a></div><div class="ttdeci">TStageObjectTree * getStageObjectTree() const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:549</div></div>
<div class="ttc" id="aclass_t_xsheet_html_acb634f75579e77275e6dd5fad3ead2b6"><div class="ttname"><a href="class_t_xsheet.html#acb634f75579e77275e6dd5fad3ead2b6">TXsheet::setScene</a></div><div class="ttdeci">void setScene(ToonzScene *scene)</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:1579</div></div>
<div class="ttc" id="aclass_toonz_scene_html_a3f7940ad6794546ba923304231820f00"><div class="ttname"><a href="class_toonz_scene.html#a3f7940ad6794546ba923304231820f00">ToonzScene::getDefaultLevelPath</a></div><div class="ttdeci">TFilePath getDefaultLevelPath(int levelType, std::wstring levelName=L&quot;a&quot;) const</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:1371</div></div>
<div class="ttc" id="aclass_toonz_scene_html_ac1a8bf0d2cec4f59c87b0001991264b5"><div class="ttname"><a href="class_toonz_scene.html#ac1a8bf0d2cec4f59c87b0001991264b5">ToonzScene::getLevelSet</a></div><div class="ttdeci">TLevelSet * getLevelSet() const</div><div class="ttdoc">Returns a pointer to the scene's Level Set.</div><div class="ttdef"><b>Definition:</b> toonzscene.h:93</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00779">TSceneProperties::cloneCamerasTo()</a>, <a class="el" href="#l01231">decodeFilePath()</a>, <a class="el" href="#l00993">TProjectManager::getCurrentProject()</a>, <a class="el" href="#l01371">getDefaultLevelPath()</a>, <a class="el" href="#l00093">getLevelSet()</a>, <a class="el" href="#l00120">TXshSimpleLevel::getPath()</a>, <a class="el" href="#l00095">TXshLevel::getSimpleLevel()</a>, <a class="el" href="#l00549">TXsheet::getStageObjectTree()</a>, <a class="el" href="#l00065">TXshChildLevel::getXsheet()</a>, <a class="el" href="#l00777">TProjectManager::instance()</a>, <a class="el" href="#l00320">TXshSimpleLevel::setDirtyFlag()</a>, <a class="el" href="#l01579">TXsheet::setScene()</a>, <a class="el" href="#l00024">TXshLevel::setScene()</a>, <a class="el" href="#l00074">TXshChildLevel::setScene()</a>, and <a class="el" href="#l00084">TXshLevel::setType()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00128">ChildStack::createChild()</a>, <a class="el" href="#l00242">Vectorizer::setLevel()</a>, and <a class="el" href="#l00294">TTool::touchImage()</a>.</p>

</div>
</div>
<a id="aa2ed57dfbae7f8cf02a4abe47ed533c6" name="aa2ed57dfbae7f8cf02a4abe47ed533c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2ed57dfbae7f8cf02a4abe47ed533c6">&#9670;&nbsp;</a></span>decodeFilePath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_file_path.html">TFilePath</a> ToonzScene::decodeFilePath </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Decode file path <b><a class="el" href="class_t_file_path.html">TFilePath</a></b>. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="class_toonz_scene.html#abb12422205be4336c3dee1aa5fbdc5e5">codeFilePath()</a> </dd></dl>
<div class="fragment"><div class="line"><span class="lineno"> 1231</span>                                                                {</div>
<div class="line"><span class="lineno"> 1232</span>  <a class="code hl_class" href="class_t_project.html">TProject</a> *project   = <a class="code hl_function" href="class_toonz_scene.html#afec1477d4fe0bb1e1152e80c3a0b20ab">getProject</a>();</div>
<div class="line"><span class="lineno"> 1233</span>  <span class="keywordtype">bool</span> projectIsEmpty = project-&gt;<a class="code hl_function" href="class_t_project.html#a26ebcdd853071adf3bfb4e80aabed84f">getFolderCount</a>() ? false : <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1234</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> fp        = path;</div>
<div class="line"><span class="lineno"> 1235</span> </div>
<div class="line"><span class="lineno"> 1236</span>  std::wstring head;</div>
<div class="line"><span class="lineno"> 1237</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> tail;</div>
<div class="line"><span class="lineno"> 1238</span>  path.split(head, tail);</div>
<div class="line"><span class="lineno"> 1239</span> </div>
<div class="line"><span class="lineno"> 1240</span>  std::string h;</div>
<div class="line"><span class="lineno"> 1241</span>  std::wstring s;</div>
<div class="line"><span class="lineno"> 1242</span>  <span class="keywordflow">if</span> (head != L<span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1243</span>    <span class="comment">// in case of the project folder aliases</span></div>
<div class="line"><span class="lineno"> 1244</span>    <span class="keywordflow">if</span> (head[0] == L<span class="charliteral">&#39;+&#39;</span>) {</div>
<div class="line"><span class="lineno"> 1245</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="class_t_project_manager.html#a150ca0d6e2eb171b8117b0c5f03dbfad">TProjectManager::instance</a>()-&gt;isTabModeEnabled()) {</div>
<div class="line"><span class="lineno"> 1246</span>        <span class="keywordflow">return</span> m_scenePath.<a class="code hl_function" href="class_t_file_path.html#a1f5014e9c396bc2268820c19bc15657d">getParentDir</a>() +</div>
<div class="line"><span class="lineno"> 1247</span>               (m_scenePath.getWideName() + L<span class="stringliteral">&quot;_files&quot;</span>) + tail;</div>
<div class="line"><span class="lineno"> 1248</span>      }</div>
<div class="line"><span class="lineno"> 1249</span> </div>
<div class="line"><span class="lineno"> 1250</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="class_t_project_manager.html#a150ca0d6e2eb171b8117b0c5f03dbfad">TProjectManager::instance</a>()-&gt;isTabKidsModeEnabled()) {</div>
<div class="line"><span class="lineno"> 1251</span>        <span class="keywordflow">return</span> m_scenePath.<a class="code hl_function" href="class_t_file_path.html#a1f5014e9c396bc2268820c19bc15657d">getParentDir</a>() + m_scenePath.getWideName() + tail;</div>
<div class="line"><span class="lineno"> 1252</span>      }</div>
<div class="line"><span class="lineno"> 1253</span> </div>
<div class="line"><span class="lineno"> 1254</span>      <span class="keywordflow">if</span> (projectIsEmpty) {</div>
<div class="line"><span class="lineno"> 1255</span>        <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> dir = m_scenePath.<a class="code hl_function" href="class_t_file_path.html#a1f5014e9c396bc2268820c19bc15657d">getParentDir</a>();</div>
<div class="line"><span class="lineno"> 1256</span>        <span class="keywordflow">if</span> (dir.<a class="code hl_function" href="class_t_file_path.html#af94f9b0aeceb6cdb980fa1789473503a">getName</a>() == <span class="stringliteral">&quot;scenes&quot;</span>)</div>
<div class="line"><span class="lineno"> 1257</span>          <span class="keywordflow">return</span> dir.<a class="code hl_function" href="class_t_file_path.html#a3ebf9ced558cfef97a60bba536b23c6f">withName</a>(head.substr(1)) + tail;</div>
<div class="line"><span class="lineno"> 1258</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1259</span>          <span class="keywordflow">return</span> dir + tail;</div>
<div class="line"><span class="lineno"> 1260</span>      }</div>
<div class="line"><span class="lineno"> 1261</span>      <span class="keywordflow">if</span> (project) {</div>
<div class="line"><span class="lineno"> 1262</span>        h           = ::to_string(head.substr(1));</div>
<div class="line"><span class="lineno"> 1263</span>        <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> f = project-&gt;<a class="code hl_function" href="class_t_project.html#ac0967db66b75e4cf0afe5b1df73a03c7">getFolder</a>(h);</div>
<div class="line"><span class="lineno"> 1264</span>        <span class="keywordflow">if</span> (f != <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>()) s = f.getWideString();</div>
<div class="line"><span class="lineno"> 1265</span>      }</div>
<div class="line"><span class="lineno"> 1266</span>    }</div>
<div class="line"><span class="lineno"> 1267</span>    <span class="comment">// in case of the scene folder alias</span></div>
<div class="line"><span class="lineno"> 1268</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (head == L<span class="stringliteral">&quot;$scenefolder&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1269</span>      <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> dir = m_scenePath.<a class="code hl_function" href="class_t_file_path.html#a1f5014e9c396bc2268820c19bc15657d">getParentDir</a>();</div>
<div class="line"><span class="lineno"> 1270</span>      <span class="keywordflow">return</span> dir + tail;</div>
<div class="line"><span class="lineno"> 1271</span>    }</div>
<div class="line"><span class="lineno"> 1272</span>  }</div>
<div class="line"><span class="lineno"> 1273</span>  <span class="keywordflow">if</span> (s != L<span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1274</span>    std::map&lt;std::wstring, std::wstring&gt; table;</div>
<div class="line"><span class="lineno"> 1275</span> </div>
<div class="line"><span class="lineno"> 1276</span>    <span class="comment">// if the scene is untitled and path expansion depends on the scene</span></div>
<div class="line"><span class="lineno"> 1277</span>    <span class="comment">// (because the expansion contains $ scenename, $ scenepath, or it uses the</span></div>
<div class="line"><span class="lineno"> 1278</span>    <span class="comment">// savepath)</span></div>
<div class="line"><span class="lineno"> 1279</span>    <span class="keywordflow">if</span> (m_isUntitled &amp;&amp;</div>
<div class="line"><span class="lineno"> 1280</span>        (s.find(L<span class="stringliteral">&quot;$scene&quot;</span>) != std::wstring::npos ||</div>
<div class="line"><span class="lineno"> 1281</span>         project-&gt;getUseScenePath(h) ||</div>
<div class="line"><span class="lineno"> 1282</span>         fp.<a class="code hl_function" href="class_t_file_path.html#a1f5014e9c396bc2268820c19bc15657d">getParentDir</a>().<a class="code hl_function" href="class_t_file_path.html#af94f9b0aeceb6cdb980fa1789473503a">getName</a>() == <a class="code hl_function" href="class_toonz_scene.html#ad42b52b671b094f66e003c4b7ebefd45">getScenePath</a>().getName())) {</div>
<div class="line"><span class="lineno"> 1283</span>      <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> parentDir = <a class="code hl_function" href="class_toonz_scene.html#ad42b52b671b094f66e003c4b7ebefd45">getScenePath</a>().<a class="code hl_function" href="class_t_file_path.html#a1f5014e9c396bc2268820c19bc15657d">getParentDir</a>();</div>
<div class="line"><span class="lineno"> 1284</span>      fp                  = parentDir + head.substr(1) + tail;</div>
<div class="line"><span class="lineno"> 1285</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1286</span>      <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> scenePath = <a class="code hl_function" href="class_toonz_scene.html#ad42b52b671b094f66e003c4b7ebefd45">getScenePath</a>();</div>
<div class="line"><span class="lineno"> 1287</span>      <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> scenePathRoot;</div>
<div class="line"><span class="lineno"> 1288</span>      <span class="keywordflow">if</span> (project)</div>
<div class="line"><span class="lineno"> 1289</span>        scenePathRoot = project-&gt;<a class="code hl_function" href="class_t_project.html#ac0967db66b75e4cf0afe5b1df73a03c7">getFolder</a>(<a class="code hl_variable" href="class_t_project.html#afa1aca692a03ae826a4d22565c7361cb">TProject::Scenes</a>);</div>
<div class="line"><span class="lineno"> 1290</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1291</span>        scenePathRoot = scenePath.<a class="code hl_function" href="class_t_file_path.html#a1f5014e9c396bc2268820c19bc15657d">getParentDir</a>();</div>
<div class="line"><span class="lineno"> 1292</span> </div>
<div class="line"><span class="lineno"> 1293</span>      <span class="keywordflow">if</span> (scenePathRoot != <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>() &amp;&amp; !scenePathRoot.isAbsolute() &amp;&amp;</div>
<div class="line"><span class="lineno"> 1294</span>          project)</div>
<div class="line"><span class="lineno"> 1295</span>        scenePathRoot = project-&gt;<a class="code hl_function" href="class_t_project.html#a593eef0243c736a73e92e459fb0ed71d">getProjectFolder</a>() + scenePathRoot;</div>
<div class="line"><span class="lineno"> 1296</span> </div>
<div class="line"><span class="lineno"> 1297</span>      <span class="keywordflow">if</span> (TSystem::isUNC(scenePath) &amp;&amp; !TSystem::isUNC(scenePathRoot))</div>
<div class="line"><span class="lineno"> 1298</span>        scenePathRoot = TSystem::toUNC(scenePathRoot);</div>
<div class="line"><span class="lineno"> 1299</span> </div>
<div class="line"><span class="lineno"> 1300</span>      <span class="keywordflow">if</span> (scenePathRoot.isAncestorOf(scenePath))</div>
<div class="line"><span class="lineno"> 1301</span>        scenePath = scenePath - scenePathRoot;</div>
<div class="line"><span class="lineno"> 1302</span> </div>
<div class="line"><span class="lineno"> 1303</span>      table[L<span class="stringliteral">&quot;$scenepath&quot;</span>] = scenePath.<a class="code hl_function" href="class_t_file_path.html#a1437b0e0720e9258b622f68b6858e95d">withType</a>(<span class="stringliteral">&quot;&quot;</span>).getWideString();</div>
<div class="line"><span class="lineno"> 1304</span>      table[L<span class="stringliteral">&quot;$scenename&quot;</span>] = scenePath.<a class="code hl_function" href="class_t_file_path.html#a1437b0e0720e9258b622f68b6858e95d">withType</a>(<span class="stringliteral">&quot;&quot;</span>).getWideString();</div>
<div class="line"><span class="lineno"> 1305</span> </div>
<div class="line"><span class="lineno"> 1306</span>      std::map&lt;std::wstring, std::wstring&gt;::reverse_iterator it;</div>
<div class="line"><span class="lineno"> 1307</span>      <span class="keywordflow">for</span> (it = table.rbegin(); it != table.rend(); ++it) {</div>
<div class="line"><span class="lineno"> 1308</span>        std::wstring keyword = it-&gt;first;</div>
<div class="line"><span class="lineno"> 1309</span>        <span class="keywordtype">int</span> i                = 0;</div>
<div class="line"><span class="lineno"> 1310</span>        <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno"> 1311</span>          <span class="keywordtype">int</span> j = s.find(keyword, i);</div>
<div class="line"><span class="lineno"> 1312</span>          <span class="keywordflow">if</span> (j == (<span class="keywordtype">int</span>)std::wstring::npos) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1313</span>          s.replace(j, keyword.length(), it-&gt;second);</div>
<div class="line"><span class="lineno"> 1314</span>          i = j;</div>
<div class="line"><span class="lineno"> 1315</span>        }</div>
<div class="line"><span class="lineno"> 1316</span>      }</div>
<div class="line"><span class="lineno"> 1317</span>      fp = <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(s) + tail;</div>
<div class="line"><span class="lineno"> 1318</span>    }</div>
<div class="line"><span class="lineno"> 1319</span>  }</div>
<div class="line"><span class="lineno"> 1320</span> </div>
<div class="line"><span class="lineno"> 1321</span>  <span class="keywordflow">if</span> (fp != <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>() &amp;&amp; !fp.isAbsolute() &amp;&amp; project)</div>
<div class="line"><span class="lineno"> 1322</span>    fp = project-&gt;<a class="code hl_function" href="class_t_project.html#a593eef0243c736a73e92e459fb0ed71d">getProjectFolder</a>() + fp;</div>
<div class="line"><span class="lineno"> 1323</span>  <span class="keywordflow">return</span> fp;</div>
<div class="line"><span class="lineno"> 1324</span>}</div>
<div class="ttc" id="aclass_t_file_path_html_a3ebf9ced558cfef97a60bba536b23c6f"><div class="ttname"><a href="class_t_file_path.html#a3ebf9ced558cfef97a60bba536b23c6f">TFilePath::withName</a></div><div class="ttdeci">TFilePath withName(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> tfilepath.cpp:802</div></div>
<div class="ttc" id="aclass_t_file_path_html_af94f9b0aeceb6cdb980fa1789473503a"><div class="ttname"><a href="class_t_file_path.html#af94f9b0aeceb6cdb980fa1789473503a">TFilePath::getName</a></div><div class="ttdeci">std::string getName() const</div><div class="ttdef"><b>Definition:</b> tfilepath.cpp:636</div></div>
<div class="ttc" id="aclass_t_project_html_a593eef0243c736a73e92e459fb0ed71d"><div class="ttname"><a href="class_t_project.html#a593eef0243c736a73e92e459fb0ed71d">TProject::getProjectFolder</a></div><div class="ttdeci">TFilePath getProjectFolder() const</div><div class="ttdef"><b>Definition:</b> tproject.h:51</div></div>
<div class="ttc" id="aclass_t_project_html_ac0967db66b75e4cf0afe5b1df73a03c7"><div class="ttname"><a href="class_t_project.html#ac0967db66b75e4cf0afe5b1df73a03c7">TProject::getFolder</a></div><div class="ttdeci">TFilePath getFolder(int index) const</div><div class="ttdef"><b>Definition:</b> tproject.cpp:366</div></div>
<div class="ttc" id="aclass_t_project_html_afa1aca692a03ae826a4d22565c7361cb"><div class="ttname"><a href="class_t_project.html#afa1aca692a03ae826a4d22565c7361cb">TProject::Scenes</a></div><div class="ttdeci">static const std::string Scenes</div><div class="ttdef"><b>Definition:</b> tproject.h:37</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00366">TProject::getFolder()</a>, <a class="el" href="#l00384">TProject::getFolderCount()</a>, <a class="el" href="#l00636">TFilePath::getName()</a>, <a class="el" href="#l00683">TFilePath::getParentDir()</a>, <a class="el" href="#l00334">getProject()</a>, <a class="el" href="#l00051">TProject::getProjectFolder()</a>, <a class="el" href="#l00059">getScenePath()</a>, <a class="el" href="#l00777">TProjectManager::instance()</a>, <a class="el" href="#l00037">TProject::Scenes</a>, <a class="el" href="#l00802">TFilePath::withName()</a>, and <a class="el" href="#l00774">TFilePath::withType()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l01328">codeFilePath()</a>, <a class="el" href="#l00864">createNewLevel()</a>, <a class="el" href="#l00712">CleanupSettingsModel::getClnPath()</a>, <a class="el" href="#l01558">getSavePath()</a>, <a class="el" href="#l01457">isExternPath()</a>, <a class="el" href="#l00074">TXshPaletteLevel::load()</a>, <a class="el" href="#l01083">TXshSimpleLevel::load()</a>, <a class="el" href="#l02357">IoCmd::loadResources()</a>, <a class="el" href="#l00269">LevelUpdater::open()</a>, <a class="el" href="#l00379">ScenePalette::save()</a>, <a class="el" href="#l00209">SceneLevel::save()</a>, <a class="el" href="#l00432">SceneSound::save()</a>, <a class="el" href="#l00101">TXshPaletteLevel::save()</a>, <a class="el" href="#l01404">TXshSimpleLevel::save()</a>, <a class="el" href="#l00590">save()</a>, <a class="el" href="#l00190">SceneLevel::SceneLevel()</a>, <a class="el" href="#l00211">TXshSimpleLevel::setEditableRange()</a>, and <a class="el" href="#l00242">Vectorizer::setLevel()</a>.</p>

</div>
</div>
<a id="a988041b1acd57d079881147224cf1ebe" name="a988041b1acd57d079881147224cf1ebe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a988041b1acd57d079881147224cf1ebe">&#9670;&nbsp;</a></span>decodeSavePath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_file_path.html">TFilePath</a> ToonzScene::decodeSavePath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_file_path.html">TFilePath</a>&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Decode save path. es. +drawings/$savepath/a.pli -&gt; +drawings/seq1/scena1/a.pli </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="class_toonz_scene.html#aef65f946258e28f8cc6dd7b83fb304a8">codeSavePath()</a> </dd></dl>
<div class="fragment"><div class="line"><span class="lineno"> 1439</span>                                                         {</div>
<div class="line"><span class="lineno"> 1440</span>  std::wstring s = path.getWideString();</div>
<div class="line"><span class="lineno"> 1441</span>  <span class="keywordtype">int</span> i          = s.find(savePathString);</div>
<div class="line"><span class="lineno"> 1442</span>  <span class="keywordflow">if</span> (i != (<span class="keywordtype">int</span>)std::wstring::npos) {</div>
<div class="line"><span class="lineno"> 1443</span>    <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> savePath = <a class="code hl_function" href="class_toonz_scene.html#a27f04f65e52c9c9a4ebc55ea25f0ddbb">getSavePath</a>();</div>
<div class="line"><span class="lineno"> 1444</span>    s.replace(i, savePathString.length(), savePath.getWideString());</div>
<div class="line"><span class="lineno"> 1445</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(s);</div>
<div class="line"><span class="lineno"> 1446</span>  }</div>
<div class="line"><span class="lineno"> 1447</span>  <span class="comment">// in case of the scene folder alias (start with &quot;$scenefolder&quot;)</span></div>
<div class="line"><span class="lineno"> 1448</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (s.find(L<span class="stringliteral">&quot;$scenefolder&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno"> 1449</span>    s.replace(0, 12, m_scenePath.<a class="code hl_function" href="class_t_file_path.html#a1f5014e9c396bc2268820c19bc15657d">getParentDir</a>().getWideString());</div>
<div class="line"><span class="lineno"> 1450</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(s);</div>
<div class="line"><span class="lineno"> 1451</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1452</span>    <span class="keywordflow">return</span> path;</div>
<div class="line"><span class="lineno"> 1453</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00683">TFilePath::getParentDir()</a>, and <a class="el" href="#l01558">getSavePath()</a>.</p>

</div>
</div>
<a id="ae2cbc582144c92adc5076cd5f556c95a" name="ae2cbc582144c92adc5076cd5f556c95a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2cbc582144c92adc5076cd5f556c95a">&#9670;&nbsp;</a></span>getChildStack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_child_stack.html">ChildStack</a> * ToonzScene::getChildStack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a pointer to the xsheets hierarchy. </p>

<p class="reference">Referenced by <a class="el" href="#l01669">XsheetViewer::changeWindowTitle()</a>, and <a class="el" href="#l01492">getSoundColumns()</a>.</p>

</div>
</div>
<a id="ae3c27b7146c62da156c5d5bffca0e9d7" name="ae3c27b7146c62da156c5d5bffca0e9d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3c27b7146c62da156c5d5bffca0e9d7">&#9670;&nbsp;</a></span>getContentHistory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_content_history.html">TContentHistory</a> * ToonzScene::getContentHistory </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>createIfNeeded</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gets the contentHistory. possibly creates a new one (if createIfNeeded) </p>
<div class="fragment"><div class="line"><span class="lineno"> 1484</span>                                                                  {</div>
<div class="line"><span class="lineno"> 1485</span>  <span class="keywordflow">if</span> (!m_contentHistory &amp;&amp; createIfNeeded)</div>
<div class="line"><span class="lineno"> 1486</span>    m_contentHistory = <span class="keyword">new</span> <a class="code hl_class" href="class_t_content_history.html">TContentHistory</a>(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1487</span>  <span class="keywordflow">return</span> m_contentHistory;</div>
<div class="line"><span class="lineno"> 1488</span>}</div>
<div class="ttc" id="aclass_t_content_history_html"><div class="ttname"><a href="class_t_content_history.html">TContentHistory</a></div><div class="ttdef"><b>Definition:</b> tcontenthistory.h:28</div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00443">loadTnzFile()</a>, and <a class="el" href="#l00590">save()</a>.</p>

</div>
</div>
<a id="a750b5ab623ccec744013b0c83bf20abc" name="a750b5ab623ccec744013b0c83bf20abc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a750b5ab623ccec744013b0c83bf20abc">&#9670;&nbsp;</a></span>getCurrentCamera()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_camera.html">TCamera</a> * ToonzScene::getCurrentCamera </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Return a pointer to current camera <b><a class="el" href="class_t_camera.html" title="The TCamera class provides a camera and allows its management.">TCamera</a></b>. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1472</span>                                      {</div>
<div class="line"><span class="lineno"> 1473</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">getXsheet</a>()-&gt;<a class="code hl_function" href="class_t_xsheet.html#a5dc925584e35e1678f5678b79c470959">getStageObjectTree</a>()-&gt;<a class="code hl_function" href="class_t_stage_object_tree.html#ada891076099087125f94f933cd49d592">getCurrentCamera</a>();</div>
<div class="line"><span class="lineno"> 1474</span>}</div>
<div class="ttc" id="aclass_t_stage_object_tree_html_ada891076099087125f94f933cd49d592"><div class="ttname"><a href="class_t_stage_object_tree.html#ada891076099087125f94f933cd49d592">TStageObjectTree::getCurrentCamera</a></div><div class="ttdeci">TCamera * getCurrentCamera()</div><div class="ttdef"><b>Definition:</b> tstageobjecttree.h:277</div></div>
<div class="ttc" id="aclass_toonz_scene_html_ae3c828e3223fd809fd59189233d0576a"><div class="ttname"><a href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">ToonzScene::getXsheet</a></div><div class="ttdeci">TXsheet * getXsheet() const</div><div class="ttdoc">Returns a pointer to the scene's current xsheet.</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:957</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00277">TStageObjectTree::getCurrentCamera()</a>, <a class="el" href="#l00549">TXsheet::getStageObjectTree()</a>, and <a class="el" href="#l00957">getXsheet()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00338">PreviewSubCameraManager::deleteSubCamera()</a>, <a class="el" href="#l01416">EditTool::draw()</a>, <a class="el" href="#l02386">SceneViewer::getDpiFactor()</a>, <a class="el" href="#l02451">SceneViewer::getZoomScaleFittingWithScreen()</a>, <a class="el" href="#l01122">loadLevel()</a>, <a class="el" href="#l00721">RenderCommand::multimediaRender()</a>, <a class="el" href="#l01185">RasterSelection::pasteSelection()</a>, and <a class="el" href="#l01372">FxSettings::setFx()</a>.</p>

</div>
</div>
<a id="a78f568fb7c0bd57f0212e5f69bd06f16" name="a78f568fb7c0bd57f0212e5f69bd06f16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78f568fb7c0bd57f0212e5f69bd06f16">&#9670;&nbsp;</a></span>getCurrentPreviewCamera()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_camera.html">TCamera</a> * ToonzScene::getCurrentPreviewCamera </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1478</span>                                             {</div>
<div class="line"><span class="lineno"> 1479</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">getXsheet</a>()-&gt;<a class="code hl_function" href="class_t_xsheet.html#a5dc925584e35e1678f5678b79c470959">getStageObjectTree</a>()-&gt;getCurrentPreviewCamera();</div>
<div class="line"><span class="lineno"> 1480</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3f7940ad6794546ba923304231820f00" name="a3f7940ad6794546ba923304231820f00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f7940ad6794546ba923304231820f00">&#9670;&nbsp;</a></span>getDefaultLevelPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_file_path.html">TFilePath</a> ToonzScene::getDefaultLevelPath </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>levelType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::wstring&#160;</td>
          <td class="paramname"><em>levelName</em> = <code>L&quot;a&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Return the default <b><a class="el" href="class_t_file_path.html">TFilePath</a></b> of a <b>levelType</b> level </p>
<div class="fragment"><div class="line"><span class="lineno"> 1372</span>                                                                      {</div>
<div class="line"><span class="lineno"> 1373</span>  <a class="code hl_class" href="class_t_project.html">TProject</a> *project = <a class="code hl_function" href="class_toonz_scene.html#afec1477d4fe0bb1e1152e80c3a0b20ab">getProject</a>();</div>
<div class="line"><span class="lineno"> 1374</span>  assert(project);</div>
<div class="line"><span class="lineno"> 1375</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> levelPath;</div>
<div class="line"><span class="lineno"> 1376</span>  QString scanLevelType;</div>
<div class="line"><span class="lineno"> 1377</span>  <span class="keywordflow">switch</span> (levelType) {</div>
<div class="line"><span class="lineno"> 1378</span>  <span class="keywordflow">case</span> TZI_XSHLEVEL:</div>
<div class="line"><span class="lineno"> 1379</span>    scanLevelType = Preferences::instance()-&gt;getScanLevelType();</div>
<div class="line"><span class="lineno"> 1380</span>    levelPath     = <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(levelName + L<span class="stringliteral">&quot;..&quot;</span> + scanLevelType.toStdWString());</div>
<div class="line"><span class="lineno"> 1381</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1382</span>  <span class="keywordflow">case</span> PLI_XSHLEVEL:</div>
<div class="line"><span class="lineno"> 1383</span>    levelPath = <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(levelName).<a class="code hl_function" href="class_t_file_path.html#a1437b0e0720e9258b622f68b6858e95d">withType</a>(<span class="stringliteral">&quot;pli&quot;</span>);</div>
<div class="line"><span class="lineno"> 1384</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1385</span>  <span class="keywordflow">case</span> TZP_XSHLEVEL:</div>
<div class="line"><span class="lineno"> 1386</span>    levelPath = <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(levelName).<a class="code hl_function" href="class_t_file_path.html#a1437b0e0720e9258b622f68b6858e95d">withType</a>(<span class="stringliteral">&quot;tlv&quot;</span>);</div>
<div class="line"><span class="lineno"> 1387</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1388</span>  <span class="keywordflow">case</span> OVL_XSHLEVEL:</div>
<div class="line"><span class="lineno"> 1389</span>    levelPath = <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(levelName + L<span class="stringliteral">&quot;..tif&quot;</span>);</div>
<div class="line"><span class="lineno"> 1390</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1391</span>  <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1392</span>    levelPath = <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(levelName + L<span class="stringliteral">&quot;..png&quot;</span>);</div>
<div class="line"><span class="lineno"> 1393</span>  }</div>
<div class="line"><span class="lineno"> 1394</span> </div>
<div class="line"><span class="lineno"> 1395</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="class_toonz_scene.html#a53cbaf09f551658479eb743e153ab6bc">isUntitled</a>() &amp;&amp; Preferences::instance()-&gt;getPathAliasPriority() ==</div>
<div class="line"><span class="lineno"> 1396</span>                           Preferences::SceneFolderAlias)</div>
<div class="line"><span class="lineno"> 1397</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(<span class="stringliteral">&quot;$scenefolder&quot;</span>) + levelPath;</div>
<div class="line"><span class="lineno"> 1398</span> </div>
<div class="line"><span class="lineno"> 1399</span>  std::string folderName = getFolderName(levelType);</div>
<div class="line"><span class="lineno"> 1400</span>  <span class="keywordflow">if</span> (project-&gt;getUseScenePath(folderName))</div>
<div class="line"><span class="lineno"> 1401</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(<span class="stringliteral">&quot;+&quot;</span> + folderName) + <a class="code hl_function" href="class_toonz_scene.html#a27f04f65e52c9c9a4ebc55ea25f0ddbb">getSavePath</a>() + levelPath;</div>
<div class="line"><span class="lineno"> 1402</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1403</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(<span class="stringliteral">&quot;+&quot;</span> + folderName) + levelPath;</div>
<div class="line"><span class="lineno"> 1404</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00334">getProject()</a>, <a class="el" href="#l01558">getSavePath()</a>, <a class="el" href="#l00345">isUntitled()</a>, and <a class="el" href="#l00774">TFilePath::withType()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00864">createNewLevel()</a>, and <a class="el" href="#l01029">getImportedLevelPath()</a>.</p>

</div>
</div>
<a id="ab5cd3ad6f894b1acc5656ca747a80627" name="ab5cd3ad6f894b1acc5656ca747a80627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5cd3ad6f894b1acc5656ca747a80627">&#9670;&nbsp;</a></span>getFrameCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ToonzScene::getFrameCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Return scene frame count. </p>
<div class="fragment"><div class="line"><span class="lineno">  704</span>                                    {</div>
<div class="line"><span class="lineno">  705</span>  <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh = <a class="code hl_function" href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">getXsheet</a>();</div>
<div class="line"><span class="lineno">  706</span>  <span class="keywordflow">return</span> xsh ? xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a12a62da7dc04395088112e492d73374f">getFrameCount</a>() : 0;</div>
<div class="line"><span class="lineno">  707</span>}</div>
<div class="ttc" id="aclass_t_xsheet_html"><div class="ttname"><a href="class_t_xsheet.html">TXsheet</a></div><div class="ttdef"><b>Definition:</b> txsheet.h:132</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a12a62da7dc04395088112e492d73374f"><div class="ttname"><a href="class_t_xsheet.html#a12a62da7dc04395088112e492d73374f">TXsheet::getFrameCount</a></div><div class="ttdeci">int getFrameCount() const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:229</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00229">TXsheet::getFrameCount()</a>, and <a class="el" href="#l00957">getXsheet()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l01669">XsheetViewer::changeWindowTitle()</a>, <a class="el" href="#l00113">OnRenderCompleted::onDeliver()</a>, and <a class="el" href="#l00802">OutputSettingsPopup::updateField()</a>.</p>

</div>
</div>
<a id="ab706bb783e2ff91a76423e12fce6e7fe" name="ab706bb783e2ff91a76423e12fce6e7fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab706bb783e2ff91a76423e12fce6e7fe">&#9670;&nbsp;</a></span>getIconPath() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_file_path.html">TFilePath</a> ToonzScene::getIconPath </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  241</span>{ <span class="keywordflow">return</span> <a class="code hl_function" href="class_toonz_scene.html#a2d97e9b3647bb45c0c992a6c92c659eb">getIconPath</a>(<a class="code hl_function" href="class_toonz_scene.html#ad42b52b671b094f66e003c4b7ebefd45">getScenePath</a>()); }</div>
<div class="ttc" id="aclass_toonz_scene_html_a2d97e9b3647bb45c0c992a6c92c659eb"><div class="ttname"><a href="class_toonz_scene.html#a2d97e9b3647bb45c0c992a6c92c659eb">ToonzScene::getIconPath</a></div><div class="ttdeci">static TFilePath getIconPath(const TFilePath &amp;scenePath)</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:1547</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2d97e9b3647bb45c0c992a6c92c659eb" name="a2d97e9b3647bb45c0c992a6c92c659eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d97e9b3647bb45c0c992a6c92c659eb">&#9670;&nbsp;</a></span>getIconPath() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_file_path.html">TFilePath</a> ToonzScene::getIconPath </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>scenePath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Returns the path of the icon related to the scene </p>
<div class="fragment"><div class="line"><span class="lineno"> 1547</span>                                                            {</div>
<div class="line"><span class="lineno"> 1548</span>  <span class="keywordflow">return</span> scenePath.<a class="code hl_function" href="class_t_file_path.html#a1f5014e9c396bc2268820c19bc15657d">getParentDir</a>() + <span class="stringliteral">&quot;sceneIcons&quot;</span> +</div>
<div class="line"><span class="lineno"> 1549</span>         (scenePath.getWideName() + L<span class="stringliteral">&quot; .png&quot;</span>);</div>
<div class="line"><span class="lineno"> 1550</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01547">getIconPath()</a>, and <a class="el" href="#l00683">TFilePath::getParentDir()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l01547">getIconPath()</a>.</p>

</div>
</div>
<a id="a26d8d4a1f92e962e8c1d40f3a1d37a45" name="a26d8d4a1f92e962e8c1d40f3a1d37a45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26d8d4a1f92e962e8c1d40f3a1d37a45">&#9670;&nbsp;</a></span>getImportedLevelPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_file_path.html">TFilePath</a> ToonzScene::getImportedLevelPath </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a>&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads a scene from file. </p>
<dl class="section return"><dt>Returns</dt><dd>The <em>coded</em> path to be used for import. Builds the path to be used during a level import operation. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno"> 1029</span>                                                                     {</div>
<div class="line"><span class="lineno"> 1030</span>  <span class="keywordflow">if</span> (TFileType::getInfo(path) == TFileType::AUDIO_LEVEL)</div>
<div class="line"><span class="lineno"> 1031</span>    <span class="keywordflow">return</span> path.<a class="code hl_function" href="class_t_file_path.html#a09d12d68c4264183e0268dde6f592b2e">withParentDir</a>(<a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(<span class="stringliteral">&quot;+extras&quot;</span>));</div>
<div class="line"><span class="lineno"> 1032</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TFileType::getInfo(path) == TFileType::PALETTE_LEVEL)</div>
<div class="line"><span class="lineno"> 1033</span>    <span class="keywordflow">return</span> path.<a class="code hl_function" href="class_t_file_path.html#a09d12d68c4264183e0268dde6f592b2e">withParentDir</a>(<a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(<span class="stringliteral">&quot;+palettes&quot;</span>));</div>
<div class="line"><span class="lineno"> 1034</span> </div>
<div class="line"><span class="lineno"> 1035</span>  <span class="keyword">const</span> <a class="code hl_struct" href="struct_level_type.html">LevelType</a> &amp;ltype = getLevelType(path);</div>
<div class="line"><span class="lineno"> 1036</span>  <span class="keywordflow">if</span> (ltype.m_ltype == UNKNOWN_XSHLEVEL) <span class="keywordflow">return</span> path;</div>
<div class="line"><span class="lineno"> 1037</span> </div>
<div class="line"><span class="lineno"> 1038</span>  <span class="keyword">const</span> std::wstring &amp;levelName = path.getWideName();</div>
<div class="line"><span class="lineno"> 1039</span>  <span class="keyword">const</span> std::string &amp;dots       = path.<a class="code hl_function" href="class_t_file_path.html#a698bbf714436eb6923359044900cde2b">getDots</a>();</div>
<div class="line"><span class="lineno"> 1040</span> </div>
<div class="line"><span class="lineno"> 1041</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> importedLevelPath =</div>
<div class="line"><span class="lineno"> 1042</span>      <a class="code hl_function" href="class_toonz_scene.html#a3f7940ad6794546ba923304231820f00">getDefaultLevelPath</a>(ltype.m_ltype, levelName).<a class="code hl_function" href="class_t_file_path.html#a1f5014e9c396bc2268820c19bc15657d">getParentDir</a>() +</div>
<div class="line"><span class="lineno"> 1043</span>      path.getLevelNameW();</div>
<div class="line"><span class="lineno"> 1044</span> </div>
<div class="line"><span class="lineno"> 1045</span>  <span class="keywordflow">if</span> (dots == <span class="stringliteral">&quot;..&quot;</span>)</div>
<div class="line"><span class="lineno"> 1046</span>    importedLevelPath = importedLevelPath.<a class="code hl_function" href="class_t_file_path.html#a12f35b225e1882372ad7e02ad7fce543">withFrame</a>(TFrameId::EMPTY_FRAME);</div>
<div class="line"><span class="lineno"> 1047</span> </div>
<div class="line"><span class="lineno"> 1048</span>  <span class="keywordflow">if</span> (importedLevelPath.<a class="code hl_function" href="class_t_file_path.html#aefca624df1a5468a4c78ec6d5dbfae26">getType</a>() == <span class="stringliteral">&quot;tlv&quot;</span>)  <span class="comment">// Type shouldn&#39;t have changed...</span></div>
<div class="line"><span class="lineno"> 1049</span>    importedLevelPath =</div>
<div class="line"><span class="lineno"> 1050</span>        importedLevelPath.withNoFrame();  <span class="comment">// Plus, should be unnecessary...</span></div>
<div class="line"><span class="lineno"> 1051</span> </div>
<div class="line"><span class="lineno"> 1052</span>  <span class="keywordflow">return</span> importedLevelPath;</div>
<div class="line"><span class="lineno"> 1053</span>}</div>
<div class="ttc" id="aclass_t_file_path_html_a09d12d68c4264183e0268dde6f592b2e"><div class="ttname"><a href="class_t_file_path.html#a09d12d68c4264183e0268dde6f592b2e">TFilePath::withParentDir</a></div><div class="ttdeci">TFilePath withParentDir(const TFilePath &amp;dir) const</div><div class="ttdef"><b>Definition:</b> tfilepath.cpp:853</div></div>
<div class="ttc" id="aclass_t_file_path_html_a12f35b225e1882372ad7e02ad7fce543"><div class="ttname"><a href="class_t_file_path.html#a12f35b225e1882372ad7e02ad7fce543">TFilePath::withFrame</a></div><div class="ttdeci">TFilePath withFrame(const TFrameId &amp;frame, TFrameId::FrameFormat format=TFrameId::USE_CURRENT_FORMAT) const</div><div class="ttdef"><b>Definition:</b> tfilepath.cpp:860</div></div>
<div class="ttc" id="aclass_t_file_path_html_a698bbf714436eb6923359044900cde2b"><div class="ttname"><a href="class_t_file_path.html#a698bbf714436eb6923359044900cde2b">TFilePath::getDots</a></div><div class="ttdeci">std::string getDots() const</div><div class="ttdef"><b>Definition:</b> tfilepath.cpp:539</div></div>
<div class="ttc" id="aclass_t_file_path_html_aefca624df1a5468a4c78ec6d5dbfae26"><div class="ttname"><a href="class_t_file_path.html#aefca624df1a5468a4c78ec6d5dbfae26">TFilePath::getType</a></div><div class="ttdeci">std::string getType() const</div><div class="ttdef"><b>Definition:</b> tfilepath.h:225</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01371">getDefaultLevelPath()</a>, <a class="el" href="#l00539">TFilePath::getDots()</a>, <a class="el" href="#l00683">TFilePath::getParentDir()</a>, <a class="el" href="#l00225">TFilePath::getType()</a>, <a class="el" href="#l00860">TFilePath::withFrame()</a>, and <a class="el" href="#l00853">TFilePath::withParentDir()</a>.</p>

</div>
</div>
<a id="a51bbbe2c6a6f8433c1009215f712ede9" name="a51bbbe2c6a6f8433c1009215f712ede9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51bbbe2c6a6f8433c1009215f712ede9">&#9670;&nbsp;</a></span>getLevelNameWithoutSceneNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::wstring ToonzScene::getLevelNameWithoutSceneNumber </td>
          <td>(</td>
          <td class="paramtype">std::wstring&#160;</td>
          <td class="paramname"><em>orgName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1583</span>                                                                        {</div>
<div class="line"><span class="lineno"> 1584</span>  <span class="keywordflow">if</span> (!Preferences::instance()-&gt;isRemoveSceneNumberFromLoadedLevelNameEnabled())</div>
<div class="line"><span class="lineno"> 1585</span>    <span class="keywordflow">return</span> orgName;</div>
<div class="line"><span class="lineno"> 1586</span> </div>
<div class="line"><span class="lineno"> 1587</span>  QString orgNameQstr = QString::fromStdWString(orgName);</div>
<div class="line"><span class="lineno"> 1588</span> </div>
<div class="line"><span class="lineno"> 1589</span>  <span class="comment">// do nothing if the file name has less than 7 letters</span></div>
<div class="line"><span class="lineno"> 1590</span>  <span class="keywordflow">if</span> (orgNameQstr.size() &lt;= 6) <span class="keywordflow">return</span> orgName;</div>
<div class="line"><span class="lineno"> 1591</span> </div>
<div class="line"><span class="lineno"> 1592</span>  QString sceneName = QString::fromStdWString(<a class="code hl_function" href="class_toonz_scene.html#a1fa0a1cbf9eb6360d980392acc99924b">getSceneName</a>()).left(5);</div>
<div class="line"><span class="lineno"> 1593</span> </div>
<div class="line"><span class="lineno"> 1594</span>  <span class="comment">// check if the first 5 letters of the level name is the same as the scene</span></div>
<div class="line"><span class="lineno"> 1595</span>  <span class="comment">// name.</span></div>
<div class="line"><span class="lineno"> 1596</span>  <span class="comment">// note that we must consider following both cases; &quot;c0001_hogehoge.tif&quot; and</span></div>
<div class="line"><span class="lineno"> 1597</span>  <span class="comment">// &quot;c0001A_####.tif&quot;</span></div>
<div class="line"><span class="lineno"> 1598</span>  <span class="keywordflow">if</span> (!orgNameQstr.startsWith(sceneName)) <span class="keywordflow">return</span> orgName;</div>
<div class="line"><span class="lineno"> 1599</span> </div>
<div class="line"><span class="lineno"> 1600</span>  <span class="keywordflow">if</span> (!orgNameQstr.contains(<span class="stringliteral">&quot;_&quot;</span>)) <span class="keywordflow">return</span> orgName;</div>
<div class="line"><span class="lineno"> 1601</span> </div>
<div class="line"><span class="lineno"> 1602</span>  <span class="keywordflow">return</span> orgNameQstr.right(orgNameQstr.size() - orgNameQstr.indexOf(<span class="stringliteral">&quot;_&quot;</span>) - 1)</div>
<div class="line"><span class="lineno"> 1603</span>      .toStdWString();</div>
<div class="line"><span class="lineno"> 1604</span>}</div>
<div class="ttc" id="aclass_toonz_scene_html_a1fa0a1cbf9eb6360d980392acc99924b"><div class="ttname"><a href="class_toonz_scene.html#a1fa0a1cbf9eb6360d980392acc99924b">ToonzScene::getSceneName</a></div><div class="ttdeci">std::wstring getSceneName() const</div><div class="ttdoc">Returns the scene's name.</div><div class="ttdef"><b>Definition:</b> toonzscene.h:64</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac1a8bf0d2cec4f59c87b0001991264b5" name="ac1a8bf0d2cec4f59c87b0001991264b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1a8bf0d2cec4f59c87b0001991264b5">&#9670;&nbsp;</a></span>getLevelSet()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_level_set.html">TLevelSet</a> * ToonzScene::getLevelSet </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a pointer to the scene's <em>Level Set</em>. </p>

<p class="reference">Referenced by <a class="el" href="#l00864">createNewLevel()</a>, <a class="el" href="#l01550">SaveLevelAsPopup::execute()</a>, <a class="el" href="#l02357">IoCmd::loadResources()</a>, <a class="el" href="#l04004">XsheetGUI::CellArea::onReplaceByCastedLevel()</a>, <a class="el" href="#l00242">Vectorizer::setLevel()</a>, <a class="el" href="#l00705">TXshSoundColumn::setXsheet()</a>, and <a class="el" href="#l01610">Filmstrip::updateChooseLevelComboItems()</a>.</p>

</div>
</div>
<a id="afec1477d4fe0bb1e1152e80c3a0b20ab" name="afec1477d4fe0bb1e1152e80c3a0b20ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afec1477d4fe0bb1e1152e80c3a0b20ab">&#9670;&nbsp;</a></span>getProject()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_project.html">TProject</a> * ToonzScene::getProject </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a pointer to the project holding a scene instance. </p>
<p >The project associated with a scene could be different from the <em>current</em> project. </p>
<div class="fragment"><div class="line"><span class="lineno">  334</span>{ <span class="keywordflow">return</span> m_project; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l01669">XsheetViewer::changeWindowTitle()</a>, <a class="el" href="#l01328">codeFilePath()</a>, <a class="el" href="#l01412">codeSavePath()</a>, <a class="el" href="#l01231">decodeFilePath()</a>, <a class="el" href="#l01371">getDefaultLevelPath()</a>, and <a class="el" href="#l01106">TProjectManager::initializeScene()</a>.</p>

</div>
</div>
<a id="a8ef96fedc17d7def810ac419b0939254" name="a8ef96fedc17d7def810ac419b0939254"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ef96fedc17d7def810ac419b0939254">&#9670;&nbsp;</a></span>getProperties()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_scene_properties.html">TSceneProperties</a> * ToonzScene::getProperties </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt; Returns a pointer to the scene's properties. </p>
<div class="fragment"><div class="line"><span class="lineno">   89</span>  {</div>
<div class="line"><span class="lineno">   90</span>    <span class="keywordflow">return</span> m_properties;</div>
<div class="line"><span class="lineno">   91</span>  }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00914">VectorizerPopup::apply()</a>, <a class="el" href="#l00729">StudioPaletteTreeViewer::dropEvent()</a>, <a class="el" href="#l00413">IoCmd::exportLevel()</a>, <a class="el" href="#l02386">SceneViewer::getDpiFactor()</a>, <a class="el" href="#l00728">OutputSettingsPopup::getProperties()</a>, <a class="el" href="#l01106">TProjectManager::initializeScene()</a>, <a class="el" href="#l01122">loadLevel()</a>, <a class="el" href="#l00787">FxBuilder::makePF()</a>, <a class="el" href="#l00721">RenderCommand::multimediaRender()</a>, <a class="el" href="#l01175">SetScanCropboxTool::onActivate()</a>, <a class="el" href="#l00113">OnRenderCompleted::onDeliver()</a>, <a class="el" href="#l01183">SetScanCropboxTool::onEnter()</a>, <a class="el" href="#l01126">TProjectManager::saveTemplate()</a>, <a class="el" href="#l00050">TXshSoundLevel::setScene()</a>, <a class="el" href="#l00705">TXshSoundColumn::setXsheet()</a>, and <a class="el" href="#l01528">updateSoundColumnFrameRate()</a>.</p>

</div>
</div>
<a id="a27f04f65e52c9c9a4ebc55ea25f0ddbb" name="a27f04f65e52c9c9a4ebc55ea25f0ddbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27f04f65e52c9c9a4ebc55ea25f0ddbb">&#9670;&nbsp;</a></span>getSavePath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_file_path.html">TFilePath</a> ToonzScene::getSavePath </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Return save path of <b>scene</b>. If <b>scene</b> is in +scenes/name.tnz return name, <br  />
 if <b>scene</b> is in +scenes/folder/name.tnz return folder/name <br  />
 if <b>scene</b> is untitledxxx.tnz return untitledxxx. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1558</span>                                        {</div>
<div class="line"><span class="lineno"> 1559</span>  std::string sceneName = <a class="code hl_function" href="class_toonz_scene.html#ad42b52b671b094f66e003c4b7ebefd45">getScenePath</a>().<a class="code hl_function" href="class_t_file_path.html#af94f9b0aeceb6cdb980fa1789473503a">getName</a>();</div>
<div class="line"><span class="lineno"> 1560</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="class_toonz_scene.html#a53cbaf09f551658479eb743e153ab6bc">isUntitled</a>()) <span class="keywordflow">return</span> <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(sceneName);</div>
<div class="line"><span class="lineno"> 1561</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> sceneRoot = <a class="code hl_function" href="class_toonz_scene.html#aa2ed57dfbae7f8cf02a4abe47ed533c6">decodeFilePath</a>(<a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(<span class="stringliteral">&quot;+&quot;</span> + <a class="code hl_variable" href="class_t_project.html#afa1aca692a03ae826a4d22565c7361cb">TProject::Scenes</a>));</div>
<div class="line"><span class="lineno"> 1562</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> scenePath = <a class="code hl_function" href="class_toonz_scene.html#ad42b52b671b094f66e003c4b7ebefd45">getScenePath</a>().<a class="code hl_function" href="class_t_file_path.html#a1437b0e0720e9258b622f68b6858e95d">withType</a>(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 1563</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> savePath(sceneName);</div>
<div class="line"><span class="lineno"> 1564</span>  <span class="keywordflow">if</span> (sceneRoot.isAncestorOf(scenePath)) savePath = scenePath - sceneRoot;</div>
<div class="line"><span class="lineno"> 1565</span>  <span class="keywordflow">return</span> savePath;</div>
<div class="line"><span class="lineno"> 1566</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01231">decodeFilePath()</a>, <a class="el" href="#l00636">TFilePath::getName()</a>, <a class="el" href="#l00059">getScenePath()</a>, <a class="el" href="#l00345">isUntitled()</a>, <a class="el" href="#l00037">TProject::Scenes</a>, and <a class="el" href="#l00774">TFilePath::withType()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l01412">codeSavePath()</a>, <a class="el" href="#l01439">decodeSavePath()</a>, <a class="el" href="#l01371">getDefaultLevelPath()</a>, and <a class="el" href="#l00179">SceneResource::updatePath()</a>.</p>

</div>
</div>
<a id="a1fa0a1cbf9eb6360d980392acc99924b" name="a1fa0a1cbf9eb6360d980392acc99924b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fa0a1cbf9eb6360d980392acc99924b">&#9670;&nbsp;</a></span>getSceneName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::wstring ToonzScene::getSceneName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the scene's name. </p>
<div class="fragment"><div class="line"><span class="lineno">   65</span>  {</div>
<div class="line"><span class="lineno">   66</span>    <span class="keywordflow">return</span> m_scenePath.getWideName();</div>
<div class="line"><span class="lineno">   67</span>  }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l01669">XsheetViewer::changeWindowTitle()</a>.</p>

</div>
</div>
<a id="ad42b52b671b094f66e003c4b7ebefd45" name="ad42b52b671b094f66e003c4b7ebefd45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad42b52b671b094f66e003c4b7ebefd45">&#9670;&nbsp;</a></span>getScenePath()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_file_path.html">TFilePath</a> ToonzScene::getScenePath </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the scene's file path. </p>

<p class="reference">Referenced by <a class="el" href="#l00308">clear()</a>, <a class="el" href="#l01231">decodeFilePath()</a>, <a class="el" href="#l01558">getSavePath()</a>, <a class="el" href="#l00990">OutputSettingsPopup::onNameChanged()</a>, <a class="el" href="#l00590">save()</a>, and <a class="el" href="#l00802">OutputSettingsPopup::updateField()</a>.</p>

</div>
</div>
<a id="ac8bd378d5af03124df8ee54f216a09d3" name="ac8bd378d5af03124df8ee54f216a09d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8bd378d5af03124df8ee54f216a09d3">&#9670;&nbsp;</a></span>getSoundColumns()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ToonzScene::getSoundColumns </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="class_t_xsh_sound_column.html">TXshSoundColumn</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>columns</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Insert in <b>vector</b> <b>columns</b> all sound column of scene <b>scene</b>. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1492</span>                                                                      {</div>
<div class="line"><span class="lineno"> 1493</span>  <a class="code hl_class" href="class_toonz_scene.html">ToonzScene</a> *scene = <span class="keyword">this</span>;</div>
<div class="line"><span class="lineno"> 1494</span>  std::set&lt;TXsheet *&gt; visited, toVisit;</div>
<div class="line"><span class="lineno"> 1495</span>  <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh = scene-&gt;<a class="code hl_function" href="class_toonz_scene.html#ae2cbc582144c92adc5076cd5f556c95a">getChildStack</a>()-&gt;<a class="code hl_function" href="class_child_stack.html#acc3acc547e134c1571b01ec5e75e9705">getTopXsheet</a>();</div>
<div class="line"><span class="lineno"> 1496</span>  visited.insert(xsh);</div>
<div class="line"><span class="lineno"> 1497</span>  toVisit.insert(xsh);</div>
<div class="line"><span class="lineno"> 1498</span>  <span class="keywordflow">while</span> (!toVisit.empty()) {</div>
<div class="line"><span class="lineno"> 1499</span>    xsh = *toVisit.begin();</div>
<div class="line"><span class="lineno"> 1500</span>    toVisit.erase(xsh);</div>
<div class="line"><span class="lineno"> 1501</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a17464dc5617cf87a46f03e1a52d36cc1">getColumnCount</a>(); i++) {</div>
<div class="line"><span class="lineno"> 1502</span>      <a class="code hl_class" href="class_t_xsh_column.html">TXshColumn</a> *column = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">getColumn</a>(i);</div>
<div class="line"><span class="lineno"> 1503</span>      <span class="keywordflow">if</span> (!column) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1504</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="class_t_xsh_sound_column.html">TXshSoundColumn</a> *sc = column-&gt;getSoundColumn())</div>
<div class="line"><span class="lineno"> 1505</span>        columns.push_back(sc);</div>
<div class="line"><span class="lineno"> 1506</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_class" href="class_t_xsh_cell_column.html">TXshCellColumn</a> *cc = column-&gt;getCellColumn()) {</div>
<div class="line"><span class="lineno"> 1507</span>        <span class="keywordtype">int</span> r0 = 0, r1 = -1;</div>
<div class="line"><span class="lineno"> 1508</span>        cc-&gt;getRange(r0, r1);</div>
<div class="line"><span class="lineno"> 1509</span>        <span class="keywordflow">if</span> (!cc-&gt;isEmpty() &amp;&amp; r0 &lt;= r1) {</div>
<div class="line"><span class="lineno"> 1510</span>          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> r = r0; r &lt;= r1; r++) {</div>
<div class="line"><span class="lineno"> 1511</span>            <a class="code hl_class" href="class_t_xsh_cell.html">TXshCell</a> cell = cc-&gt;getCell(r);</div>
<div class="line"><span class="lineno"> 1512</span>            <span class="keywordflow">if</span> (cell.m_level &amp;&amp; cell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a6ef7d48e41f4f214b414e959512e6377">getChildLevel</a>()) {</div>
<div class="line"><span class="lineno"> 1513</span>              <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *subxsh = cell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a6ef7d48e41f4f214b414e959512e6377">getChildLevel</a>()-&gt;<a class="code hl_function" href="class_t_xsh_child_level.html#ad2676276ae1db83a898a3eef10e0ace8">getXsheet</a>();</div>
<div class="line"><span class="lineno"> 1514</span>              <span class="keywordflow">if</span> (visited.find(subxsh) == visited.end()) {</div>
<div class="line"><span class="lineno"> 1515</span>                visited.insert(subxsh);</div>
<div class="line"><span class="lineno"> 1516</span>                toVisit.insert(subxsh);</div>
<div class="line"><span class="lineno"> 1517</span>              }</div>
<div class="line"><span class="lineno"> 1518</span>            }</div>
<div class="line"><span class="lineno"> 1519</span>          }</div>
<div class="line"><span class="lineno"> 1520</span>        }</div>
<div class="line"><span class="lineno"> 1521</span>      }</div>
<div class="line"><span class="lineno"> 1522</span>    }</div>
<div class="line"><span class="lineno"> 1523</span>  }</div>
<div class="line"><span class="lineno"> 1524</span>}</div>
<div class="ttc" id="aclass_child_stack_html_acc3acc547e134c1571b01ec5e75e9705"><div class="ttname"><a href="class_child_stack.html#acc3acc547e134c1571b01ec5e75e9705">ChildStack::getTopXsheet</a></div><div class="ttdeci">TXsheet * getTopXsheet() const</div><div class="ttdef"><b>Definition:</b> childstack.cpp:142</div></div>
<div class="ttc" id="aclass_t_xsh_cell_column_html"><div class="ttname"><a href="class_t_xsh_cell_column.html">TXshCellColumn</a></div><div class="ttdef"><b>Definition:</b> txshcolumn.h:303</div></div>
<div class="ttc" id="aclass_t_xsh_cell_html"><div class="ttname"><a href="class_t_xsh_cell.html">TXshCell</a></div><div class="ttdef"><b>Definition:</b> txshcell.h:35</div></div>
<div class="ttc" id="aclass_t_xsh_column_html"><div class="ttname"><a href="class_t_xsh_column.html">TXshColumn</a></div><div class="ttdoc">The TXshColumn class is the base class of column managers in xsheet.</div><div class="ttdef"><b>Definition:</b> txshcolumn.h:65</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_a6ef7d48e41f4f214b414e959512e6377"><div class="ttname"><a href="class_t_xsh_level.html#a6ef7d48e41f4f214b414e959512e6377">TXshLevel::getChildLevel</a></div><div class="ttdeci">virtual TXshChildLevel * getChildLevel()</div><div class="ttdoc">Method (to be overridden in subclasses) to downcast to TXshChildLevel.</div><div class="ttdef"><b>Definition:</b> txshlevel.h:98</div></div>
<div class="ttc" id="aclass_t_xsh_sound_column_html"><div class="ttname"><a href="class_t_xsh_sound_column.html">TXshSoundColumn</a></div><div class="ttdef"><b>Definition:</b> txshsoundcolumn.h:96</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a17464dc5617cf87a46f03e1a52d36cc1"><div class="ttname"><a href="class_t_xsheet.html#a17464dc5617cf87a46f03e1a52d36cc1">TXsheet::getColumnCount</a></div><div class="ttdeci">int getColumnCount() const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:1425</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a3e1a216c019a0ebdf73d95acac95d8d0"><div class="ttname"><a href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">TXsheet::getColumn</a></div><div class="ttdeci">TXshColumn * getColumn(int index) const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:1418</div></div>
<div class="ttc" id="aclass_toonz_scene_html"><div class="ttname"><a href="class_toonz_scene.html">ToonzScene</a></div><div class="ttdef"><b>Definition:</b> toonzscene.h:42</div></div>
<div class="ttc" id="aclass_toonz_scene_html_ae2cbc582144c92adc5076cd5f556c95a"><div class="ttname"><a href="class_toonz_scene.html#ae2cbc582144c92adc5076cd5f556c95a">ToonzScene::getChildStack</a></div><div class="ttdeci">ChildStack * getChildStack() const</div><div class="ttdoc">Returns a pointer to the xsheets hierarchy.</div><div class="ttdef"><b>Definition:</b> toonzscene.h:83</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00098">TXshLevel::getChildLevel()</a>, <a class="el" href="#l00083">getChildStack()</a>, <a class="el" href="#l01418">TXsheet::getColumn()</a>, <a class="el" href="#l01425">TXsheet::getColumnCount()</a>, <a class="el" href="#l00142">ChildStack::getTopXsheet()</a>, and <a class="el" href="#l00065">TXshChildLevel::getXsheet()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l01528">updateSoundColumnFrameRate()</a>.</p>

</div>
</div>
<a id="aaffd562eebbd8faba4caeaed69bfcc18" name="aaffd562eebbd8faba4caeaed69bfcc18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaffd562eebbd8faba4caeaed69bfcc18">&#9670;&nbsp;</a></span>getTopXsheet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_xsheet.html">TXsheet</a> * ToonzScene::getTopXsheet </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Returns the <em>topmost</em> xsheet in the scene's xsheet hierarchy. </p>
<div class="fragment"><div class="line"><span class="lineno">  961</span>                                        {</div>
<div class="line"><span class="lineno">  962</span>  <span class="keywordflow">return</span> m_childStack-&gt;<a class="code hl_function" href="class_child_stack.html#acc3acc547e134c1571b01ec5e75e9705">getTopXsheet</a>();</div>
<div class="line"><span class="lineno">  963</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00142">ChildStack::getTopXsheet()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l01106">TProjectManager::initializeScene()</a>, <a class="el" href="#l00993">Stage::RasterPainter::onRasterImage()</a>, <a class="el" href="#l00294">TTool::touchImage()</a>, and <a class="el" href="#l01610">Filmstrip::updateChooseLevelComboItems()</a>.</p>

</div>
</div>
<a id="aedb528bcece52278325ab31d664faf20" name="aedb528bcece52278325ab31d664faf20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedb528bcece52278325ab31d664faf20">&#9670;&nbsp;</a></span>getVersionNumber()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">VersionNumber ToonzScene::getVersionNumber </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  257</span>{ <span class="keywordflow">return</span> m_versionNumber; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae3c828e3223fd809fd59189233d0576a" name="ae3c828e3223fd809fd59189233d0576a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3c828e3223fd809fd59189233d0576a">&#9670;&nbsp;</a></span>getXsheet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_xsheet.html">TXsheet</a> * ToonzScene::getXsheet </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a pointer to the scene's <em>current</em> xsheet. </p>
<div class="fragment"><div class="line"><span class="lineno">  957</span>{ <span class="keywordflow">return</span> m_childStack-&gt;<a class="code hl_function" href="class_child_stack.html#aeb633c4351ac8fb0e72782c9f9d1e2b4">getXsheet</a>(); }</div>
<div class="ttc" id="aclass_child_stack_html_aeb633c4351ac8fb0e72782c9f9d1e2b4"><div class="ttname"><a href="class_child_stack.html#aeb633c4351ac8fb0e72782c9f9d1e2b4">ChildStack::getXsheet</a></div><div class="ttdeci">TXsheet * getXsheet() const</div><div class="ttdef"><b>Definition:</b> childstack.h:98</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00098">ChildStack::getXsheet()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00914">VectorizerPopup::apply()</a>, <a class="el" href="#l01472">getCurrentCamera()</a>, <a class="el" href="#l00704">getFrameCount()</a>, <a class="el" href="#l01122">loadLevel()</a>, <a class="el" href="#l00394">loadNoResources()</a>, <a class="el" href="#l00411">loadResources()</a>, <a class="el" href="#l02357">IoCmd::loadResources()</a>, <a class="el" href="#l00443">loadTnzFile()</a>, <a class="el" href="#l01102">OutputSettingsPopup::onCameraChanged()</a>, <a class="el" href="#l00711">renderFrame()</a>, <a class="el" href="#l01126">TProjectManager::saveTemplate()</a>, and <a class="el" href="#l00802">OutputSettingsPopup::updateField()</a>.</p>

</div>
</div>
<a id="a657e45d8e257f7c2047022b75dc8600d" name="a657e45d8e257f7c2047022b75dc8600d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a657e45d8e257f7c2047022b75dc8600d">&#9670;&nbsp;</a></span>isExternPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ToonzScene::isExternPath </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Return true if <b><a class="el" href="class_t_file_path.html">TFilePath</a></b> <b>fp</b> is not contained in a project folder. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1457</span>                                                       {</div>
<div class="line"><span class="lineno"> 1458</span>  <a class="code hl_class" href="class_t_project.html">TProject</a> *project = m_project;</div>
<div class="line"><span class="lineno"> 1459</span>  assert(project);</div>
<div class="line"><span class="lineno"> 1460</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; project-&gt;<a class="code hl_function" href="class_t_project.html#a26ebcdd853071adf3bfb4e80aabed84f">getFolderCount</a>(); i++) {</div>
<div class="line"><span class="lineno"> 1461</span>    <span class="keywordflow">if</span> (project-&gt;<a class="code hl_function" href="class_t_project.html#ab7cd33e579f84763bee6421daeb3bde5">getFolderName</a>(i) == <span class="stringliteral">&quot;scenes&quot;</span>) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1462</span> </div>
<div class="line"><span class="lineno"> 1463</span>    <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> folderPath =</div>
<div class="line"><span class="lineno"> 1464</span>        <a class="code hl_function" href="class_toonz_scene.html#aa2ed57dfbae7f8cf02a4abe47ed533c6">decodeFilePath</a>(<a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(<span class="stringliteral">&quot;+&quot;</span> + project-&gt;<a class="code hl_function" href="class_t_project.html#ab7cd33e579f84763bee6421daeb3bde5">getFolderName</a>(i)));</div>
<div class="line"><span class="lineno"> 1465</span>    <span class="keywordflow">if</span> (folderPath.isAncestorOf(fp)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1466</span>  }</div>
<div class="line"><span class="lineno"> 1467</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1468</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01231">decodeFilePath()</a>, <a class="el" href="#l00384">TProject::getFolderCount()</a>, and <a class="el" href="#l00388">TProject::getFolderName()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00521">IoCmd::loadResourceFolders()</a>, and <a class="el" href="#l02357">IoCmd::loadResources()</a>.</p>

</div>
</div>
<a id="a78b979156507dc35586cdd435e0f26cb" name="a78b979156507dc35586cdd435e0f26cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78b979156507dc35586cdd435e0f26cb">&#9670;&nbsp;</a></span>isLoading()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ToonzScene::isLoading </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  262</span>{ <span class="keywordflow">return</span> m_isLoading; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a53cbaf09f551658479eb743e153ab6bc" name="a53cbaf09f551658479eb743e153ab6bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53cbaf09f551658479eb743e153ab6bc">&#9670;&nbsp;</a></span>isUntitled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ToonzScene::isUntitled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Returns whether the scene path is empty, or the scene is explicitly untitled. </p><dl class="section see"><dt>See also</dt><dd>Member function <a class="el" href="class_toonz_scene.html#ad5e0cf52431bcf95e54faa416f0fc21d" title="Marks the scene as explicitly untitled.">setUntitled()</a>. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  345</span>                                  {</div>
<div class="line"><span class="lineno">  346</span>  <span class="keywordflow">return</span> m_scenePath == <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>() || m_isUntitled;</div>
<div class="line"><span class="lineno">  347</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00308">clear()</a>, <a class="el" href="#l01371">getDefaultLevelPath()</a>, <a class="el" href="#l01558">getSavePath()</a>, and <a class="el" href="#l00590">save()</a>.</p>

</div>
</div>
<a id="ac8765c2df661b90822547a9137e77aba" name="ac8765c2df661b90822547a9137e77aba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8765c2df661b90822547a9137e77aba">&#9670;&nbsp;</a></span>load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ToonzScene::load </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>withProgressDialog</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  351</span>                                                                    {</div>
<div class="line"><span class="lineno">  352</span>  setIsLoading(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  353</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  354</span>    <a class="code hl_function" href="class_toonz_scene.html#ac1c6f51c86f8feba26ea8633a2283125">loadNoResources</a>(path);</div>
<div class="line"><span class="lineno">  355</span>    <a class="code hl_function" href="class_toonz_scene.html#af1379cb7299d5c0c1f764cd7a629fcef">loadResources</a>(withProgressDialog);</div>
<div class="line"><span class="lineno">  356</span>  } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  357</span>    setIsLoading(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  358</span>    <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  359</span>  }</div>
<div class="line"><span class="lineno">  360</span>  setIsLoading(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  361</span>}</div>
<div class="ttc" id="aclass_toonz_scene_html_ac1c6f51c86f8feba26ea8633a2283125"><div class="ttname"><a href="class_toonz_scene.html#ac1c6f51c86f8feba26ea8633a2283125">ToonzScene::loadNoResources</a></div><div class="ttdeci">void loadNoResources(const TFilePath &amp;path)</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:394</div></div>
<div class="ttc" id="aclass_toonz_scene_html_af1379cb7299d5c0c1f764cd7a629fcef"><div class="ttname"><a href="class_toonz_scene.html#af1379cb7299d5c0c1f764cd7a629fcef">ToonzScene::loadResources</a></div><div class="ttdeci">void loadResources(bool withProgressDialog=false)</div><div class="ttdoc">Loads the scene resources.</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:411</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a22171559a050d37bdf6763e8abcaf73c" name="a22171559a050d37bdf6763e8abcaf73c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22171559a050d37bdf6763e8abcaf73c">&#9670;&nbsp;</a></span>loadFrameCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ToonzScene::loadFrameCount </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Returns frame count stored in the scene header. Quicker than load(fp); <a class="el" href="class_toonz_scene.html#ab5cd3ad6f894b1acc5656ca747a80627">getFrameCount()</a> </p>
<div class="fragment"><div class="line"><span class="lineno">  367</span>                                                  {</div>
<div class="line"><span class="lineno">  368</span>  <a class="code hl_class" href="class_t_i_stream.html">TIStream</a> is(fp);</div>
<div class="line"><span class="lineno">  369</span>  <span class="keywordflow">if</span> (!is) <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(fp.getWideString() + L<span class="stringliteral">&quot;: Can&#39;t open file&quot;</span>);</div>
<div class="line"><span class="lineno">  370</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  371</span>    <span class="comment">// Leggo il primo tag (&lt;tnz/tab&gt;) ed estraggo il framecount (se c&#39;e&#39;)</span></div>
<div class="line"><span class="lineno">  372</span>    std::string tagName = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno">  373</span>    <span class="keywordflow">if</span> (!is.matchTag(tagName)) <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;Bad file format&quot;</span>);</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span>    <span class="keywordflow">if</span> (tagName == <span class="stringliteral">&quot;tab&quot;</span> || tagName == <span class="stringliteral">&quot;tnz&quot;</span>) {</div>
<div class="line"><span class="lineno">  376</span>      <span class="keywordtype">int</span> frameCount;</div>
<div class="line"><span class="lineno">  377</span>      <span class="keywordflow">if</span> (is.getTagParam(<span class="stringliteral">&quot;framecount&quot;</span>, frameCount))</div>
<div class="line"><span class="lineno">  378</span>        <span class="keywordflow">return</span> frameCount;</div>
<div class="line"><span class="lineno">  379</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  380</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  381</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  382</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;Bad file format&quot;</span>);</div>
<div class="line"><span class="lineno">  383</span>  } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;e) {</div>
<div class="line"><span class="lineno">  384</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_i_stream_exception.html">TIStreamException</a>(is, e);</div>
<div class="line"><span class="lineno">  385</span>  } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  386</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_i_stream_exception.html">TIStreamException</a>(is);</div>
<div class="line"><span class="lineno">  387</span>  }</div>
<div class="line"><span class="lineno">  388</span> </div>
<div class="line"><span class="lineno">  389</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  390</span>}</div>
<div class="ttc" id="aclass_t_i_stream_exception_html"><div class="ttname"><a href="class_t_i_stream_exception.html">TIStreamException</a></div><div class="ttdef"><b>Definition:</b> tstreamexception.h:25</div></div>
<div class="ttc" id="aclass_t_i_stream_html"><div class="ttname"><a href="class_t_i_stream.html">TIStream</a></div><div class="ttdoc">Toonz's XML-like input file parser.</div><div class="ttdef"><b>Definition:</b> tstream.h:47</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="class_t_i_stream.html#a530540f44de1a1031cebfee0d34ffcfe">TIStream::getTagParam()</a>, and <a class="el" href="#l01178">TIStream::matchTag()</a>.</p>

</div>
</div>
<a id="ae6bd7d22f6310011d48dfb5176344015" name="ae6bd7d22f6310011d48dfb5176344015"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6bd7d22f6310011d48dfb5176344015">&#9670;&nbsp;</a></span>loadLevel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_xsh_level.html">TXshLevel</a> * ToonzScene::loadLevel </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>actualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_level_options.html">LevelOptions</a> *&#160;</td>
          <td class="paramname"><em>options</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::wstring&#160;</td>
          <td class="paramname"><em>levelName</em> = <code>L&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="class_t_frame_id.html">TFrameId</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fIds</em> = <code>std::vector&lt;<a class="el" href="class_t_frame_id.html">TFrameId</a>&gt;()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >of an old Toonz level, and converts it if needed.</p>
<p >The <a class="el" href="class_toonz_scene.html#ae6bd7d22f6310011d48dfb5176344015">loadLevel()</a> function accepts an optional pointer to the <a class="el" href="class_level_options.html" title="User-editable level properties.">LevelOptions</a> to be used by the level. If no option is explicitly specified, a level format match will be looked up in the application preferences; if none is found the default ones will be used.</p>
<dl class="section return"><dt>Returns</dt><dd>A Pointer to the loaded level. <br  />
 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">options</td><td>Loads a level from the specified <em>decoded</em> path. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno"> 1125</span>                                                                  {</div>
<div class="line"><span class="lineno"> 1126</span>  <a class="code hl_struct" href="struct_level_type.html">LevelType</a> ltype = getLevelType(actualPath);</div>
<div class="line"><span class="lineno"> 1127</span>  <span class="keywordflow">if</span> (ltype.m_ltype == UNKNOWN_XSHLEVEL) <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1128</span> </div>
<div class="line"><span class="lineno"> 1129</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> levelPath = actualPath;</div>
<div class="line"><span class="lineno"> 1130</span> </div>
<div class="line"><span class="lineno"> 1131</span>  <span class="comment">// Ensure the level name is unique</span></div>
<div class="line"><span class="lineno"> 1132</span> </div>
<div class="line"><span class="lineno"> 1133</span>  <span class="keywordflow">if</span> (QString::fromStdWString(levelName).isEmpty()) {</div>
<div class="line"><span class="lineno"> 1134</span>    <span class="comment">// if the option is set in the preferences,</span></div>
<div class="line"><span class="lineno"> 1135</span>    <span class="comment">// remove the scene numbers(&quot;c####_&quot;) from the file name</span></div>
<div class="line"><span class="lineno"> 1136</span>    levelName = getLevelNameWithoutSceneNumber(levelPath.getWideName());</div>
<div class="line"><span class="lineno"> 1137</span>  }</div>
<div class="line"><span class="lineno"> 1138</span> </div>
<div class="line"><span class="lineno"> 1139</span>  <a class="code hl_class" href="class_name_modifier.html">NameModifier</a> nm(levelName);</div>
<div class="line"><span class="lineno"> 1140</span>  levelName = nm.getNext();</div>
<div class="line"><span class="lineno"> 1141</span>  <span class="keywordflow">while</span> (m_levelSet-&gt;hasLevel(levelName)) levelName = nm.getNext();</div>
<div class="line"><span class="lineno"> 1142</span> </div>
<div class="line"><span class="lineno"> 1143</span>  <span class="comment">// Discriminate sound levels</span></div>
<div class="line"><span class="lineno"> 1144</span>  <span class="keywordflow">if</span> (ltype.m_ltype == SND_XSHLEVEL) {</div>
<div class="line"><span class="lineno"> 1145</span>    <a class="code hl_class" href="class_t_xsh_sound_level.html">TXshSoundLevel</a> *sl = <span class="keyword">new</span> <a class="code hl_class" href="class_t_xsh_sound_level.html">TXshSoundLevel</a>(levelName);</div>
<div class="line"><span class="lineno"> 1146</span>    sl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#ad2cb5812d9f36e9f5d570874dad8d3bd">setType</a>(ltype.m_ltype);</div>
<div class="line"><span class="lineno"> 1147</span>    sl-&gt;<a class="code hl_function" href="class_t_xsh_sound_level.html#a37015e50c3396926e2759996de36358e">setScene</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1148</span>    sl-&gt;setPath(<a class="code hl_function" href="class_toonz_scene.html#abb12422205be4336c3dee1aa5fbdc5e5">codeFilePath</a>(levelPath));</div>
<div class="line"><span class="lineno"> 1149</span> </div>
<div class="line"><span class="lineno"> 1150</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1151</span>      sl-&gt;<a class="code hl_function" href="class_t_xsh_sound_level.html#a65ea115874ac4e9d80e5996014d9c1c1">load</a>();</div>
<div class="line"><span class="lineno"> 1152</span>    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::string &amp;msg)  <span class="comment">// Intercepting std::string exceptions</span></div>
<div class="line"><span class="lineno"> 1153</span>    {</div>
<div class="line"><span class="lineno"> 1154</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(msg);</div>
<div class="line"><span class="lineno"> 1155</span>    }  <span class="comment">// from load, and rethrowing... curious!</span></div>
<div class="line"><span class="lineno"> 1156</span> </div>
<div class="line"><span class="lineno"> 1157</span>    m_levelSet-&gt;insertLevel(sl);</div>
<div class="line"><span class="lineno"> 1158</span>    <span class="keywordflow">return</span> sl;</div>
<div class="line"><span class="lineno"> 1159</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1160</span>    <a class="code hl_class" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a> *xl = <span class="keyword">new</span> <a class="code hl_class" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a>(levelName);</div>
<div class="line"><span class="lineno"> 1161</span>    xl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#ad2cb5812d9f36e9f5d570874dad8d3bd">setType</a>(ltype.m_ltype);</div>
<div class="line"><span class="lineno"> 1162</span>    xl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a3c0052e5b6496d5bd9c697f678761e5c">setScene</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1163</span> </div>
<div class="line"><span class="lineno"> 1164</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="class_toonz_scene.html#ad8d5a080e48a1ab0241c410ce3a0f485">convertLevelIfNeeded</a>(levelPath))</div>
<div class="line"><span class="lineno"> 1165</span>      <span class="keywordflow">return</span> 0;  <span class="comment">// Conversion failed, bail out</span></div>
<div class="line"><span class="lineno"> 1166</span> </div>
<div class="line"><span class="lineno"> 1167</span>    xl-&gt;setPath(<a class="code hl_function" href="class_toonz_scene.html#abb12422205be4336c3dee1aa5fbdc5e5">codeFilePath</a>(levelPath), <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1168</span> </div>
<div class="line"><span class="lineno"> 1169</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1170</span>      <span class="keywordflow">if</span> (fIds.size() != 0 &amp;&amp; !ltype.m_oldLevelFlag)</div>
<div class="line"><span class="lineno"> 1171</span>        xl-&gt;<a class="code hl_function" href="class_t_xsh_simple_level.html#a0020922626c177cd3134a05e274aecee">load</a>(fIds);</div>
<div class="line"><span class="lineno"> 1172</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1173</span>        xl-&gt;<a class="code hl_function" href="class_t_xsh_simple_level.html#a0020922626c177cd3134a05e274aecee">load</a>();</div>
<div class="line"><span class="lineno"> 1174</span>    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::string &amp;msg) {</div>
<div class="line"><span class="lineno"> 1175</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(msg);</div>
<div class="line"><span class="lineno"> 1176</span>    }</div>
<div class="line"><span class="lineno"> 1177</span> </div>
<div class="line"><span class="lineno"> 1178</span>    <span class="keywordflow">if</span> (ltype.m_oldLevelFlag)</div>
<div class="line"><span class="lineno"> 1179</span>      xl-&gt;<a class="code hl_function" href="class_t_xsh_simple_level.html#a2d43337766628739707849f8808bf300">setDirtyFlag</a>(<span class="keyword">true</span>);  <span class="comment">// Not set on old level formats?</span></div>
<div class="line"><span class="lineno"> 1180</span> </div>
<div class="line"><span class="lineno"> 1181</span>    <a class="code hl_class" href="class_level_properties.html">LevelProperties</a> *lp = xl-&gt;<a class="code hl_function" href="class_t_xsh_simple_level.html#ad412dd5c3a6ae3ff20a480dc728b26d2">getProperties</a>();</div>
<div class="line"><span class="lineno"> 1182</span>    assert(lp);</div>
<div class="line"><span class="lineno"> 1183</span> </div>
<div class="line"><span class="lineno"> 1184</span>    <span class="keywordflow">if</span> (levelOptions)</div>
<div class="line"><span class="lineno"> 1185</span>      lp-&gt;<a class="code hl_function" href="class_level_properties.html#ab664f199fc6df760127065d20be89e90">options</a>() = *levelOptions;</div>
<div class="line"><span class="lineno"> 1186</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1187</span>      <span class="keyword">const</span> <a class="code hl_class" href="class_preferences.html">Preferences</a> &amp;prefs = *Preferences::instance();</div>
<div class="line"><span class="lineno"> 1188</span>      <span class="keywordtype">int</span> formatIdx            = prefs.<a class="code hl_function" href="class_preferences.html#ae9bb42f98e4a2e746a7400b133c5d6e8">matchLevelFormat</a>(</div>
<div class="line"><span class="lineno"> 1189</span>          levelPath);  <span class="comment">// Should I use actualPath here? It&#39;s mostly</span></div>
<div class="line"><span class="lineno"> 1190</span>                                  <span class="comment">// irrelevant anyway, it&#39;s for old tzp/tzu...</span></div>
<div class="line"><span class="lineno"> 1191</span>      <span class="keywordflow">if</span> (formatIdx &gt;= 0)</div>
<div class="line"><span class="lineno"> 1192</span>        lp-&gt;<a class="code hl_function" href="class_level_properties.html#ab664f199fc6df760127065d20be89e90">options</a>() = prefs.<a class="code hl_function" href="class_preferences.html#a067169d62e7dfa4125a74ed4dfafb6f6">levelFormat</a>(formatIdx).<a class="code hl_variable" href="struct_preferences_1_1_level_format.html#a66f0d4296393ddb6ad989d9f63ad41eb">m_options</a>;</div>
<div class="line"><span class="lineno"> 1193</span>      <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1194</span>        <span class="comment">// Default subsampling values are assigned from scene properties</span></div>
<div class="line"><span class="lineno"> 1195</span>        <span class="keywordflow">if</span> (xl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a1a147f1e970a62120c0bbaf0020a8932">getType</a>() == OVL_XSHLEVEL)</div>
<div class="line"><span class="lineno"> 1196</span>          lp-&gt;<a class="code hl_function" href="class_level_properties.html#a2591ae6df7e874a982e1539395462174">setSubsampling</a>(<a class="code hl_function" href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">getProperties</a>()-&gt;getFullcolorSubsampling());</div>
<div class="line"><span class="lineno"> 1197</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a1a147f1e970a62120c0bbaf0020a8932">getType</a>() == TZP_XSHLEVEL)</div>
<div class="line"><span class="lineno"> 1198</span>          lp-&gt;<a class="code hl_function" href="class_level_properties.html#a2591ae6df7e874a982e1539395462174">setSubsampling</a>(<a class="code hl_function" href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">getProperties</a>()-&gt;getTlvSubsampling());</div>
<div class="line"><span class="lineno"> 1199</span>      }</div>
<div class="line"><span class="lineno"> 1200</span>    }</div>
<div class="line"><span class="lineno"> 1201</span> </div>
<div class="line"><span class="lineno"> 1202</span>    <span class="keywordflow">if</span> (lp-&gt;<a class="code hl_function" href="class_level_properties.html#af80d4404a0da97a8e45d0947f9bd7278">getDpiPolicy</a>() == LevelProperties::DP_ImageDpi) {</div>
<div class="line"><span class="lineno"> 1203</span>      <span class="comment">// We must check whether the image actually has a dpi.</span></div>
<div class="line"><span class="lineno"> 1204</span>      <span class="keyword">const</span> <a class="code hl_class" href="class_t_point_t.html">TPointD</a> &amp;imageDpi = xl-&gt;getImageDpi();</div>
<div class="line"><span class="lineno"> 1205</span> </div>
<div class="line"><span class="lineno"> 1206</span>      <span class="keywordflow">if</span> (imageDpi == <a class="code hl_class" href="class_t_point_t.html">TPointD</a>() ||</div>
<div class="line"><span class="lineno"> 1207</span>          Preferences::instance()-&gt;getUnits() == <span class="stringliteral">&quot;pixel&quot;</span> ||</div>
<div class="line"><span class="lineno"> 1208</span>          Preferences::instance()-&gt;isIgnoreImageDpiEnabled()) {</div>
<div class="line"><span class="lineno"> 1209</span>        <span class="comment">// Change to &quot;Custom Dpi&quot; policy and use camera dpi</span></div>
<div class="line"><span class="lineno"> 1210</span>        <a class="code hl_class" href="class_t_stage_object_id.html">TStageObjectId</a> cameraId =</div>
<div class="line"><span class="lineno"> 1211</span>            <a class="code hl_function" href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">getXsheet</a>()-&gt;<a class="code hl_function" href="class_t_xsheet.html#a5dc925584e35e1678f5678b79c470959">getStageObjectTree</a>()-&gt;<a class="code hl_function" href="class_t_stage_object_tree.html#a7d63ae5d60c3a3aacf5da58c108ac167">getCurrentCameraId</a>();</div>
<div class="line"><span class="lineno"> 1212</span> </div>
<div class="line"><span class="lineno"> 1213</span>        lp-&gt;<a class="code hl_function" href="class_level_properties.html#aef6e555a773c2f69d2089dc9c009f8be">setDpiPolicy</a>(LevelProperties::DP_CustomDpi);</div>
<div class="line"><span class="lineno"> 1214</span>        lp-&gt;<a class="code hl_function" href="class_level_properties.html#abdaea012fce05b1617350a174790f473">setDpi</a>(<a class="code hl_function" href="class_toonz_scene.html#a750b5ab623ccec744013b0c83bf20abc">getCurrentCamera</a>()-&gt;getDpi());</div>
<div class="line"><span class="lineno"> 1215</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1216</span>        <span class="comment">// Has dpi alright - assign it to custom dpi, too</span></div>
<div class="line"><span class="lineno"> 1217</span>        lp-&gt;<a class="code hl_function" href="class_level_properties.html#abdaea012fce05b1617350a174790f473">setDpi</a>(imageDpi);</div>
<div class="line"><span class="lineno"> 1218</span>      }</div>
<div class="line"><span class="lineno"> 1219</span>    }</div>
<div class="line"><span class="lineno"> 1220</span> </div>
<div class="line"><span class="lineno"> 1221</span>    m_levelSet-&gt;insertLevel(xl);</div>
<div class="line"><span class="lineno"> 1222</span> </div>
<div class="line"><span class="lineno"> 1223</span>    <span class="keywordflow">return</span> xl;</div>
<div class="line"><span class="lineno"> 1224</span>  }</div>
<div class="line"><span class="lineno"> 1225</span> </div>
<div class="line"><span class="lineno"> 1226</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1227</span>}</div>
<div class="ttc" id="aclass_level_properties_html"><div class="ttname"><a href="class_level_properties.html">LevelProperties</a></div><div class="ttdoc">Stores the possible properties of a Toonz level.</div><div class="ttdef"><b>Definition:</b> levelproperties.h:75</div></div>
<div class="ttc" id="aclass_level_properties_html_a2591ae6df7e874a982e1539395462174"><div class="ttname"><a href="class_level_properties.html#a2591ae6df7e874a982e1539395462174">LevelProperties::setSubsampling</a></div><div class="ttdeci">void setSubsampling(int s)</div><div class="ttdoc">Sets the level subsampling.</div><div class="ttdef"><b>Definition:</b> levelproperties.cpp:74</div></div>
<div class="ttc" id="aclass_level_properties_html_ab664f199fc6df760127065d20be89e90"><div class="ttname"><a href="class_level_properties.html#ab664f199fc6df760127065d20be89e90">LevelProperties::options</a></div><div class="ttdeci">const LevelOptions &amp; options() const</div><div class="ttdoc">Returns user-accessible options.</div><div class="ttdef"><b>Definition:</b> levelproperties.h:92</div></div>
<div class="ttc" id="aclass_level_properties_html_abdaea012fce05b1617350a174790f473"><div class="ttname"><a href="class_level_properties.html#abdaea012fce05b1617350a174790f473">LevelProperties::setDpi</a></div><div class="ttdeci">void setDpi(const TPointD &amp;dpi)</div><div class="ttdoc">Sets the level's custom dpi.</div><div class="ttdef"><b>Definition:</b> levelproperties.cpp:60</div></div>
<div class="ttc" id="aclass_level_properties_html_aef6e555a773c2f69d2089dc9c009f8be"><div class="ttname"><a href="class_level_properties.html#aef6e555a773c2f69d2089dc9c009f8be">LevelProperties::setDpiPolicy</a></div><div class="ttdeci">void setDpiPolicy(DpiPolicy dpiPolicy)</div><div class="ttdoc">Sets the level's DpiPolicy.</div><div class="ttdef"><b>Definition:</b> levelproperties.cpp:48</div></div>
<div class="ttc" id="aclass_level_properties_html_af80d4404a0da97a8e45d0947f9bd7278"><div class="ttname"><a href="class_level_properties.html#af80d4404a0da97a8e45d0947f9bd7278">LevelProperties::getDpiPolicy</a></div><div class="ttdeci">DpiPolicy getDpiPolicy() const</div><div class="ttdoc">Returns the level's DpiPolicy.</div><div class="ttdef"><b>Definition:</b> levelproperties.cpp:54</div></div>
<div class="ttc" id="aclass_name_modifier_html"><div class="ttname"><a href="class_name_modifier.html">NameModifier</a></div><div class="ttdef"><b>Definition:</b> namebuilder.h:48</div></div>
<div class="ttc" id="aclass_preferences_html"><div class="ttname"><a href="class_preferences.html">Preferences</a></div><div class="ttdef"><b>Definition:</b> preferences.h:72</div></div>
<div class="ttc" id="aclass_preferences_html_a067169d62e7dfa4125a74ed4dfafb6f6"><div class="ttname"><a href="class_preferences.html#a067169d62e7dfa4125a74ed4dfafb6f6">Preferences::levelFormat</a></div><div class="ttdeci">const LevelFormat &amp; levelFormat(int formatIdx) const</div><div class="ttdoc">Retrieves a level format.</div><div class="ttdef"><b>Definition:</b> preferences.cpp:1050</div></div>
<div class="ttc" id="aclass_preferences_html_ae9bb42f98e4a2e746a7400b133c5d6e8"><div class="ttname"><a href="class_preferences.html#ae9bb42f98e4a2e746a7400b133c5d6e8">Preferences::matchLevelFormat</a></div><div class="ttdeci">int matchLevelFormat(const TFilePath &amp;fp) const</div><div class="ttdef"><b>Definition:</b> preferences.cpp:1063</div></div>
<div class="ttc" id="aclass_t_point_t_html"><div class="ttname"><a href="class_t_point_t.html">TPointT&lt; double &gt;</a></div></div>
<div class="ttc" id="aclass_t_stage_object_id_html"><div class="ttname"><a href="class_t_stage_object_id.html">TStageObjectId</a></div><div class="ttdef"><b>Definition:</b> tstageobjectid.h:36</div></div>
<div class="ttc" id="aclass_t_stage_object_tree_html_a7d63ae5d60c3a3aacf5da58c108ac167"><div class="ttname"><a href="class_t_stage_object_tree.html#a7d63ae5d60c3a3aacf5da58c108ac167">TStageObjectTree::getCurrentCameraId</a></div><div class="ttdeci">TStageObjectId getCurrentCameraId() const</div><div class="ttdef"><b>Definition:</b> tstageobjecttree.cpp:508</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_a1a147f1e970a62120c0bbaf0020a8932"><div class="ttname"><a href="class_t_xsh_level.html#a1a147f1e970a62120c0bbaf0020a8932">TXshLevel::getType</a></div><div class="ttdeci">int getType() const</div><div class="ttdef"><b>Definition:</b> txshlevel.h:81</div></div>
<div class="ttc" id="aclass_t_xsh_simple_level_html_a0020922626c177cd3134a05e274aecee"><div class="ttname"><a href="class_t_xsh_simple_level.html#a0020922626c177cd3134a05e274aecee">TXshSimpleLevel::load</a></div><div class="ttdeci">void load() override</div><div class="ttdef"><b>Definition:</b> txshsimplelevel.cpp:1083</div></div>
<div class="ttc" id="aclass_t_xsh_simple_level_html_ad412dd5c3a6ae3ff20a480dc728b26d2"><div class="ttname"><a href="class_t_xsh_simple_level.html#ad412dd5c3a6ae3ff20a480dc728b26d2">TXshSimpleLevel::getProperties</a></div><div class="ttdeci">LevelProperties * getProperties() const</div><div class="ttdoc">&lt; Returns a pointer to the owned level properties.</div><div class="ttdef"><b>Definition:</b> txshsimplelevel.h:109</div></div>
<div class="ttc" id="aclass_t_xsh_sound_level_html"><div class="ttname"><a href="class_t_xsh_sound_level.html">TXshSoundLevel</a></div><div class="ttdef"><b>Definition:</b> txshsoundlevel.h:24</div></div>
<div class="ttc" id="aclass_t_xsh_sound_level_html_a37015e50c3396926e2759996de36358e"><div class="ttname"><a href="class_t_xsh_sound_level.html#a37015e50c3396926e2759996de36358e">TXshSoundLevel::setScene</a></div><div class="ttdeci">void setScene(ToonzScene *scene) override</div><div class="ttdef"><b>Definition:</b> txshsoundlevel.cpp:50</div></div>
<div class="ttc" id="aclass_t_xsh_sound_level_html_a65ea115874ac4e9d80e5996014d9c1c1"><div class="ttname"><a href="class_t_xsh_sound_level.html#a65ea115874ac4e9d80e5996014d9c1c1">TXshSoundLevel::load</a></div><div class="ttdeci">void load() override</div><div class="ttdoc">Load the level content from the associated path.</div><div class="ttdef"><b>Definition:</b> txshsoundlevel.cpp:95</div></div>
<div class="ttc" id="aclass_toonz_scene_html_a750b5ab623ccec744013b0c83bf20abc"><div class="ttname"><a href="class_toonz_scene.html#a750b5ab623ccec744013b0c83bf20abc">ToonzScene::getCurrentCamera</a></div><div class="ttdeci">TCamera * getCurrentCamera()</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:1472</div></div>
<div class="ttc" id="aclass_toonz_scene_html_a8ef96fedc17d7def810ac419b0939254"><div class="ttname"><a href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">ToonzScene::getProperties</a></div><div class="ttdeci">TSceneProperties * getProperties() const</div><div class="ttdoc">&lt; Returns a pointer to the scene's properties.</div><div class="ttdef"><b>Definition:</b> toonzscene.h:87</div></div>
<div class="ttc" id="aclass_toonz_scene_html_abb12422205be4336c3dee1aa5fbdc5e5"><div class="ttname"><a href="class_toonz_scene.html#abb12422205be4336c3dee1aa5fbdc5e5">ToonzScene::codeFilePath</a></div><div class="ttdeci">TFilePath codeFilePath(const TFilePath &amp;) const</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:1328</div></div>
<div class="ttc" id="aclass_toonz_scene_html_ad8d5a080e48a1ab0241c410ce3a0f485"><div class="ttname"><a href="class_toonz_scene.html#ad8d5a080e48a1ab0241c410ce3a0f485">ToonzScene::convertLevelIfNeeded</a></div><div class="ttdeci">bool convertLevelIfNeeded(TFilePath &amp;levelPath)</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:1058</div></div>
<div class="ttc" id="astruct_preferences_1_1_level_format_html_a66f0d4296393ddb6ad989d9f63ad41eb"><div class="ttname"><a href="struct_preferences_1_1_level_format.html#a66f0d4296393ddb6ad989d9f63ad41eb">Preferences::LevelFormat::m_options</a></div><div class="ttdeci">LevelOptions m_options</div><div class="ttdoc">Options associated to levels in the format.</div><div class="ttdef"><b>Definition:</b> preferences.h:81</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01328">codeFilePath()</a>, <a class="el" href="#l01058">convertLevelIfNeeded()</a>, <a class="el" href="#l01472">getCurrentCamera()</a>, <a class="el" href="#l00508">TStageObjectTree::getCurrentCameraId()</a>, <a class="el" href="#l00054">LevelProperties::getDpiPolicy()</a>, <a class="el" href="#l00087">getProperties()</a>, <a class="el" href="#l00109">TXshSimpleLevel::getProperties()</a>, <a class="el" href="#l00549">TXsheet::getStageObjectTree()</a>, <a class="el" href="#l00081">TXshLevel::getType()</a>, <a class="el" href="#l00957">getXsheet()</a>, <a class="el" href="#l01050">Preferences::levelFormat()</a>, <a class="el" href="#l01083">TXshSimpleLevel::load()</a>, <a class="el" href="#l00095">TXshSoundLevel::load()</a>, <a class="el" href="#l00081">Preferences::LevelFormat::m_options</a>, <a class="el" href="#l01063">Preferences::matchLevelFormat()</a>, <a class="el" href="#l00092">LevelProperties::options()</a>, <a class="el" href="#l00320">TXshSimpleLevel::setDirtyFlag()</a>, <a class="el" href="#l00060">LevelProperties::setDpi()</a>, <a class="el" href="#l00048">LevelProperties::setDpiPolicy()</a>, <a class="el" href="#l00024">TXshLevel::setScene()</a>, <a class="el" href="#l00050">TXshSoundLevel::setScene()</a>, <a class="el" href="#l00074">LevelProperties::setSubsampling()</a>, and <a class="el" href="#l00084">TXshLevel::setType()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00242">Vectorizer::setLevel()</a>.</p>

</div>
</div>
<a id="ac1c6f51c86f8feba26ea8633a2283125" name="ac1c6f51c86f8feba26ea8633a2283125"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1c6f51c86f8feba26ea8633a2283125">&#9670;&nbsp;</a></span>loadNoResources()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ToonzScene::loadNoResources </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Loads a scene <em>without</em> loading its resources. </p>
<div class="fragment"><div class="line"><span class="lineno">  394</span>                                                    {</div>
<div class="line"><span class="lineno">  395</span>  <a class="code hl_function" href="class_toonz_scene.html#ad63e1050bdbe8f213f5da4bc852c6f7a">clear</a>();</div>
<div class="line"><span class="lineno">  396</span> </div>
<div class="line"><span class="lineno">  397</span>  <a class="code hl_class" href="class_t_project_manager.html">TProjectManager</a> *pm    = <a class="code hl_function" href="class_t_project_manager.html#a150ca0d6e2eb171b8117b0c5f03dbfad">TProjectManager::instance</a>();</div>
<div class="line"><span class="lineno">  398</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TProjectP</a> sceneProject = pm-&gt;<a class="code hl_function" href="class_t_project_manager.html#adcc7fc8cb7656b12f54b773ee6448735">loadSceneProject</a>(fp);</div>
<div class="line"><span class="lineno">  399</span>  <span class="keywordflow">if</span> (!sceneProject) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  400</span> </div>
<div class="line"><span class="lineno">  401</span>  <a class="code hl_function" href="class_toonz_scene.html#aa7aac33fc53c47ea5baff597e5f18a9b">setProject</a>(sceneProject.getPointer());</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>  <a class="code hl_function" href="class_toonz_scene.html#ac16c1eaa9cba08a24be952e8f3d62a8f">loadTnzFile</a>(fp);</div>
<div class="line"><span class="lineno">  404</span>  <a class="code hl_function" href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">getXsheet</a>()-&gt;<a class="code hl_function" href="class_t_xsheet.html#ac5e05acb2ce9809c0dcadd2a8b06b393">updateFrameCount</a>();</div>
<div class="line"><span class="lineno">  405</span>}</div>
<div class="ttc" id="aclass_t_project_manager_html"><div class="ttname"><a href="class_t_project_manager.html">TProjectManager</a></div><div class="ttdoc">Manages all toonz projects. The class provides all needed method to retrieve projects paths,...</div><div class="ttdef"><b>Definition:</b> tproject.h:106</div></div>
<div class="ttc" id="aclass_t_project_manager_html_adcc7fc8cb7656b12f54b773ee6448735"><div class="ttname"><a href="class_t_project_manager.html#adcc7fc8cb7656b12f54b773ee6448735">TProjectManager::loadSceneProject</a></div><div class="ttdeci">TProjectP loadSceneProject(const TFilePath &amp;scenePath)</div><div class="ttdef"><b>Definition:</b> tproject.cpp:1015</div></div>
<div class="ttc" id="aclass_t_xsheet_html_ac5e05acb2ce9809c0dcadd2a8b06b393"><div class="ttname"><a href="class_t_xsheet.html#ac5e05acb2ce9809c0dcadd2a8b06b393">TXsheet::updateFrameCount</a></div><div class="ttdeci">void updateFrameCount()</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:1166</div></div>
<div class="ttc" id="aclass_toonz_scene_html_aa7aac33fc53c47ea5baff597e5f18a9b"><div class="ttname"><a href="class_toonz_scene.html#aa7aac33fc53c47ea5baff597e5f18a9b">ToonzScene::setProject</a></div><div class="ttdeci">void setProject(TProject *)</div><div class="ttdoc">Associates a scene to a project.</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:322</div></div>
<div class="ttc" id="aclass_toonz_scene_html_ac16c1eaa9cba08a24be952e8f3d62a8f"><div class="ttname"><a href="class_toonz_scene.html#ac16c1eaa9cba08a24be952e8f3d62a8f">ToonzScene::loadTnzFile</a></div><div class="ttdeci">void loadTnzFile(const TFilePath &amp;path)</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:443</div></div>
<div class="ttc" id="aclass_toonz_scene_html_ad63e1050bdbe8f213f5da4bc852c6f7a"><div class="ttname"><a href="class_toonz_scene.html#ad63e1050bdbe8f213f5da4bc852c6f7a">ToonzScene::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Clears the scene.</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:308</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00308">clear()</a>, <a class="el" href="#l00957">getXsheet()</a>, <a class="el" href="#l00777">TProjectManager::instance()</a>, <a class="el" href="#l01015">TProjectManager::loadSceneProject()</a>, <a class="el" href="#l00443">loadTnzFile()</a>, <a class="el" href="#l00322">setProject()</a>, and <a class="el" href="#l01166">TXsheet::updateFrameCount()</a>.</p>

</div>
</div>
<a id="af1379cb7299d5c0c1f764cd7a629fcef" name="af1379cb7299d5c0c1f764cd7a629fcef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1379cb7299d5c0c1f764cd7a629fcef">&#9670;&nbsp;</a></span>loadResources()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ToonzScene::loadResources </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>withProgressDialog</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads the scene resources. </p>
<div class="fragment"><div class="line"><span class="lineno">  411</span>                                                      {</div>
<div class="line"><span class="lineno">  412</span>  <span class="comment">/*--- m_levelSet-&gt;getLevelCount()10---*/</span></div>
<div class="line"><span class="lineno">  413</span>  QProgressDialog *progressDialog = 0;</div>
<div class="line"><span class="lineno">  414</span>  <span class="keywordflow">if</span> (withProgressDialog &amp;&amp; m_levelSet-&gt;getLevelCount() &gt;= 10) {</div>
<div class="line"><span class="lineno">  415</span>    progressDialog = <span class="keyword">new</span> QProgressDialog(<span class="stringliteral">&quot;Loading Scene Resources&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, 0,</div>
<div class="line"><span class="lineno">  416</span>                                         m_levelSet-&gt;getLevelCount());</div>
<div class="line"><span class="lineno">  417</span>    progressDialog-&gt;setModal(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  418</span>    progressDialog-&gt;setAutoReset(</div>
<div class="line"><span class="lineno">  419</span>        <span class="keyword">true</span>); <span class="comment">/*--maximumreset--*/</span></div>
<div class="line"><span class="lineno">  420</span>    progressDialog-&gt;setAutoClose(<span class="keyword">true</span>); <span class="comment">/*--reset--*/</span></div>
<div class="line"><span class="lineno">  421</span>    progressDialog-&gt;setAttribute(Qt::WA_DeleteOnClose,</div>
<div class="line"><span class="lineno">  422</span>                                 <span class="keyword">true</span>); <span class="comment">/*--Delete--*/</span></div>
<div class="line"><span class="lineno">  423</span>    progressDialog-&gt;setCancelButton(0);</div>
<div class="line"><span class="lineno">  424</span>    progressDialog-&gt;setValue(0);</div>
<div class="line"><span class="lineno">  425</span>    progressDialog-&gt;show();</div>
<div class="line"><span class="lineno">  426</span>  }</div>
<div class="line"><span class="lineno">  427</span> </div>
<div class="line"><span class="lineno">  428</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  429</span>  <span class="keywordflow">for</span> (i = 0; i &lt; m_levelSet-&gt;getLevelCount(); i++) {</div>
<div class="line"><span class="lineno">  430</span>    <span class="keywordflow">if</span> (progressDialog) progressDialog-&gt;setValue(i + 1);</div>
<div class="line"><span class="lineno">  431</span> </div>
<div class="line"><span class="lineno">  432</span>    <a class="code hl_class" href="class_t_xsh_level.html">TXshLevel</a> *level = m_levelSet-&gt;getLevel(i);</div>
<div class="line"><span class="lineno">  433</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  434</span>      level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a3fe5db60912aecd08a751208b5e3feae">load</a>();</div>
<div class="line"><span class="lineno">  435</span>    } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  436</span>    }</div>
<div class="line"><span class="lineno">  437</span>  }</div>
<div class="line"><span class="lineno">  438</span>  <a class="code hl_function" href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">getXsheet</a>()-&gt;<a class="code hl_function" href="class_t_xsheet.html#ac5e05acb2ce9809c0dcadd2a8b06b393">updateFrameCount</a>();</div>
<div class="line"><span class="lineno">  439</span>}</div>
<div class="ttc" id="aclass_t_xsh_level_html_a3fe5db60912aecd08a751208b5e3feae"><div class="ttname"><a href="class_t_xsh_level.html#a3fe5db60912aecd08a751208b5e3feae">TXshLevel::load</a></div><div class="ttdeci">virtual void load()=0</div><div class="ttdoc">Load the level content from the associated path.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00957">getXsheet()</a>, <a class="el" href="class_t_xsh_level.html#a3fe5db60912aecd08a751208b5e3feae">TXshLevel::load()</a>, and <a class="el" href="#l01166">TXsheet::updateFrameCount()</a>.</p>

</div>
</div>
<a id="ac16c1eaa9cba08a24be952e8f3d62a8f" name="ac16c1eaa9cba08a24be952e8f3d62a8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac16c1eaa9cba08a24be952e8f3d62a8f">&#9670;&nbsp;</a></span>loadTnzFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ToonzScene::loadTnzFile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Loads scene data from file, <em>excluding</em> the associated project and the scene resources. </p>
<div class="fragment"><div class="line"><span class="lineno">  443</span>                                                {</div>
<div class="line"><span class="lineno">  444</span>  <span class="keywordtype">bool</span> reading22 = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  445</span>  <a class="code hl_class" href="class_t_i_stream.html">TIStream</a> is(fp);</div>
<div class="line"><span class="lineno">  446</span>  <span class="keywordflow">if</span> (!is) <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(fp.getWideString() + L<span class="stringliteral">&quot;: Can&#39;t open file&quot;</span>);</div>
<div class="line"><span class="lineno">  447</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  448</span>    std::string tagName = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno">  449</span>    <span class="keywordflow">if</span> (!is.matchTag(tagName)) <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;Bad file format&quot;</span>);</div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>    <span class="keywordflow">if</span> (tagName == <span class="stringliteral">&quot;tab&quot;</span> || tagName == <span class="stringliteral">&quot;tnz&quot;</span>) {</div>
<div class="line"><span class="lineno">  452</span>      std::string rootTagName = tagName;</div>
<div class="line"><span class="lineno">  453</span>      std::string v           = is.getTagAttribute(<span class="stringliteral">&quot;version&quot;</span>);</div>
<div class="line"><span class="lineno">  454</span>      VersionNumber versionNumber(0, 0);</div>
<div class="line"><span class="lineno">  455</span>      <span class="keywordtype">int</span> k = v.find(<span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><span class="lineno">  456</span>      <span class="keywordflow">if</span> (k != (<span class="keywordtype">int</span>)std::string::npos &amp;&amp; 0 &lt; k &amp;&amp; k &lt; (<span class="keywordtype">int</span>)v.length()) {</div>
<div class="line"><span class="lineno">  457</span>        versionNumber.first  = std::stoi(v.substr(0, k));</div>
<div class="line"><span class="lineno">  458</span>        versionNumber.second = std::stoi(v.substr(k + 1));</div>
<div class="line"><span class="lineno">  459</span>      }</div>
<div class="line"><span class="lineno">  460</span>      <span class="keywordflow">if</span> (versionNumber == VersionNumber(0, 0))</div>
<div class="line"><span class="lineno">  461</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;Bad version number :&quot;</span> + v);</div>
<div class="line"><span class="lineno">  462</span>      setVersionNumber(versionNumber);</div>
<div class="line"><span class="lineno">  463</span>      is.setVersion(versionNumber);</div>
<div class="line"><span class="lineno">  464</span>      <span class="keywordflow">while</span> (is.matchTag(tagName)) {</div>
<div class="line"><span class="lineno">  465</span>        <span class="keywordflow">if</span> (tagName == <span class="stringliteral">&quot;generator&quot;</span>) {</div>
<div class="line"><span class="lineno">  466</span>          std::string program = is.getString();</div>
<div class="line"><span class="lineno">  467</span>          <span class="comment">// TODO: This obsolete condition should be removed before releasing OT</span></div>
<div class="line"><span class="lineno">  468</span>          <span class="comment">// v2.2 !</span></div>
<div class="line"><span class="lineno">  469</span>          reading22 = program.find(<span class="stringliteral">&quot;2.2&quot;</span>) != std::string::npos;</div>
<div class="line"><span class="lineno">  470</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tagName == <span class="stringliteral">&quot;properties&quot;</span>)</div>
<div class="line"><span class="lineno">  471</span>          m_properties-&gt;<a class="code hl_function" href="class_t_scene_properties.html#a2dab8c56b747756cae8f9a31d8047d1e">loadData</a>(is, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  472</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tagName == <span class="stringliteral">&quot;palette&quot;</span>)  <span class="comment">// per compatibilita&#39; beta1</span></div>
<div class="line"><span class="lineno">  473</span>        {</div>
<div class="line"><span class="lineno">  474</span>          <a class="code hl_class" href="class_t_palette.html">TPalette</a> *palette = <span class="keyword">new</span> <a class="code hl_class" href="class_t_palette.html">TPalette</a>;</div>
<div class="line"><span class="lineno">  475</span>          is &gt;&gt; *palette;</div>
<div class="line"><span class="lineno">  476</span>          <span class="keyword">delete</span> palette;</div>
<div class="line"><span class="lineno">  477</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tagName == <span class="stringliteral">&quot;levelSet&quot;</span>)</div>
<div class="line"><span class="lineno">  478</span>          m_levelSet-&gt;loadData(is);</div>
<div class="line"><span class="lineno">  479</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tagName == <span class="stringliteral">&quot;levels&quot;</span>) {</div>
<div class="line"><span class="lineno">  480</span>          <span class="comment">// obsoleto</span></div>
<div class="line"><span class="lineno">  481</span>          <span class="keywordflow">if</span> (!reading22) assert(0);</div>
<div class="line"><span class="lineno">  482</span>          <span class="keywordflow">while</span> (!is.eos()) {</div>
<div class="line"><span class="lineno">  483</span>            <a class="code hl_class" href="class_t_persist.html">TPersist</a> *p = 0;</div>
<div class="line"><span class="lineno">  484</span>            is &gt;&gt; p;</div>
<div class="line"><span class="lineno">  485</span>            <a class="code hl_class" href="class_t_xsh_level.html">TXshLevel</a> *xshLevel = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_t_xsh_level.html">TXshLevel</a> *<span class="keyword">&gt;</span>(p);</div>
<div class="line"><span class="lineno">  486</span>            <span class="keywordflow">if</span> (xshLevel) {</div>
<div class="line"><span class="lineno">  487</span>              xshLevel-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a3c0052e5b6496d5bd9c697f678761e5c">setScene</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  488</span>              <a class="code hl_class" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a> *sl = xshLevel-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">getSimpleLevel</a>();</div>
<div class="line"><span class="lineno">  489</span>              <span class="keywordflow">if</span> (reading22 &amp;&amp; sl &amp;&amp; sl-&gt;<a class="code hl_function" href="class_t_xsh_simple_level.html#a668293d53a70cca8811db28d87011c55">getPath</a>() == <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>()) {</div>
<div class="line"><span class="lineno">  490</span>                sl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#ad2cb5812d9f36e9f5d570874dad8d3bd">setType</a>(PLI_XSHLEVEL);</div>
<div class="line"><span class="lineno">  491</span>                sl-&gt;setPath(<a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(<span class="stringliteral">&quot;+drawings/&quot;</span>) +</div>
<div class="line"><span class="lineno">  492</span>                            (sl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a3a59fb1bd3261baee4e889a9edbf0ae8">getName</a>() + L<span class="stringliteral">&quot;.pli&quot;</span>));</div>
<div class="line"><span class="lineno">  493</span>              }</div>
<div class="line"><span class="lineno">  494</span>              m_levelSet-&gt;insertLevel(xshLevel);</div>
<div class="line"><span class="lineno">  495</span>            }</div>
<div class="line"><span class="lineno">  496</span>          }</div>
<div class="line"><span class="lineno">  497</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tagName == <span class="stringliteral">&quot;xsheet&quot;</span>)</div>
<div class="line"><span class="lineno">  498</span>          is &gt;&gt; *<a class="code hl_function" href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">getXsheet</a>();</div>
<div class="line"><span class="lineno">  499</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tagName == <span class="stringliteral">&quot;history&quot;</span>) {</div>
<div class="line"><span class="lineno">  500</span>          std::string historyData, s;</div>
<div class="line"><span class="lineno">  501</span>          <span class="keywordflow">while</span> (!is.eos()) {</div>
<div class="line"><span class="lineno">  502</span>            is &gt;&gt; s;</div>
<div class="line"><span class="lineno">  503</span>            historyData += s;</div>
<div class="line"><span class="lineno">  504</span>          }</div>
<div class="line"><span class="lineno">  505</span>          <a class="code hl_class" href="class_t_content_history.html">TContentHistory</a> *history = <a class="code hl_function" href="class_toonz_scene.html#ae3c27b7146c62da156c5d5bffca0e9d7">getContentHistory</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  506</span>          history-&gt;deserialize(QString::fromStdString(historyData));</div>
<div class="line"><span class="lineno">  507</span>        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  508</span>          <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(tagName + <span class="stringliteral">&quot; : unexpected tag&quot;</span>);</div>
<div class="line"><span class="lineno">  509</span> </div>
<div class="line"><span class="lineno">  510</span>        <span class="keywordflow">if</span> (!is.matchEndTag()) <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(tagName + <span class="stringliteral">&quot; : missing end tag&quot;</span>);</div>
<div class="line"><span class="lineno">  511</span>      }</div>
<div class="line"><span class="lineno">  512</span>      <span class="keywordflow">if</span> (!is.matchEndTag())</div>
<div class="line"><span class="lineno">  513</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(rootTagName + <span class="stringliteral">&quot; : missing end tag&quot;</span>);</div>
<div class="line"><span class="lineno">  514</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  515</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;Bad file format&quot;</span>);</div>
<div class="line"><span class="lineno">  516</span> </div>
<div class="line"><span class="lineno">  517</span>    <a class="code hl_function" href="class_toonz_scene.html#a815ecf4f07a92f9f9fef693f762c1228">setScenePath</a>(fp);</div>
<div class="line"><span class="lineno">  518</span> </div>
<div class="line"><span class="lineno">  519</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m_levelSet-&gt;getLevelCount(); i++)</div>
<div class="line"><span class="lineno">  520</span>      m_levelSet-&gt;getLevel(i)-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a3c0052e5b6496d5bd9c697f678761e5c">setScene</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  521</span> </div>
<div class="line"><span class="lineno">  522</span>  } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;e) {</div>
<div class="line"><span class="lineno">  523</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_i_stream_exception.html">TIStreamException</a>(is, e);</div>
<div class="line"><span class="lineno">  524</span>  } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  525</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_i_stream_exception.html">TIStreamException</a>(is);</div>
<div class="line"><span class="lineno">  526</span>  }</div>
<div class="line"><span class="lineno">  527</span> </div>
<div class="line"><span class="lineno">  528</span>  m_properties-&gt;<a class="code hl_function" href="class_t_scene_properties.html#ab7c40fadf71826d7774df4cadb28f991">cloneCamerasTo</a>(<a class="code hl_function" href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">getXsheet</a>()-&gt;getStageObjectTree());</div>
<div class="line"><span class="lineno">  529</span>  fixBiancoProblem(<span class="keyword">this</span>, <a class="code hl_function" href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">getXsheet</a>());</div>
<div class="line"><span class="lineno">  530</span>}</div>
<div class="ttc" id="aclass_t_palette_html"><div class="ttname"><a href="class_t_palette.html">TPalette</a></div><div class="ttdoc">The class representing a Toonz palette object.</div><div class="ttdef"><b>Definition:</b> tpalette.h:85</div></div>
<div class="ttc" id="aclass_t_persist_html"><div class="ttname"><a href="class_t_persist.html">TPersist</a></div><div class="ttdef"><b>Definition:</b> tpersist.h:30</div></div>
<div class="ttc" id="aclass_t_scene_properties_html_a2dab8c56b747756cae8f9a31d8047d1e"><div class="ttname"><a href="class_t_scene_properties.html#a2dab8c56b747756cae8f9a31d8047d1e">TSceneProperties::loadData</a></div><div class="ttdeci">void loadData(TIStream &amp;is, bool isLoadingProject)</div><div class="ttdef"><b>Definition:</b> sceneproperties.cpp:359</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_a3a59fb1bd3261baee4e889a9edbf0ae8"><div class="ttname"><a href="class_t_xsh_level.html#a3a59fb1bd3261baee4e889a9edbf0ae8">TXshLevel::getName</a></div><div class="ttdeci">std::wstring getName() const</div><div class="ttdoc">Return level name.</div><div class="ttdef"><b>Definition:</b> txshlevel.h:115</div></div>
<div class="ttc" id="aclass_toonz_scene_html_a815ecf4f07a92f9f9fef693f762c1228"><div class="ttname"><a href="class_toonz_scene.html#a815ecf4f07a92f9f9fef693f762c1228">ToonzScene::setScenePath</a></div><div class="ttdeci">void setScenePath(const TFilePath &amp;p)</div><div class="ttdoc">Sets the scene's file path.</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:338</div></div>
<div class="ttc" id="aclass_toonz_scene_html_ae3c27b7146c62da156c5d5bffca0e9d7"><div class="ttname"><a href="class_toonz_scene.html#ae3c27b7146c62da156c5d5bffca0e9d7">ToonzScene::getContentHistory</a></div><div class="ttdeci">TContentHistory * getContentHistory(bool createIfNeeded=false)</div><div class="ttdoc">gets the contentHistory. possibly creates a new one (if createIfNeeded)</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:1484</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00779">TSceneProperties::cloneCamerasTo()</a>, <a class="el" href="#l01169">TIStream::eos()</a>, <a class="el" href="#l01484">getContentHistory()</a>, <a class="el" href="#l00115">TXshLevel::getName()</a>, <a class="el" href="#l00120">TXshSimpleLevel::getPath()</a>, <a class="el" href="#l00095">TXshLevel::getSimpleLevel()</a>, <a class="el" href="#l01026">TIStream::getString()</a>, <a class="el" href="#l01190">TIStream::getTagAttribute()</a>, <a class="el" href="#l00957">getXsheet()</a>, <a class="el" href="#l00359">TSceneProperties::loadData()</a>, <a class="el" href="#l01156">TIStream::matchEndTag()</a>, <a class="el" href="#l01178">TIStream::matchTag()</a>, <a class="el" href="#l00024">TXshLevel::setScene()</a>, <a class="el" href="#l00338">setScenePath()</a>, <a class="el" href="#l00084">TXshLevel::setType()</a>, and <a class="el" href="#l01277">TIStream::setVersion()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00394">loadNoResources()</a>.</p>

</div>
</div>
<a id="afbc821048387af2b6fe21c0c1223060e" name="afbc821048387af2b6fe21c0c1223060e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbc821048387af2b6fe21c0c1223060e">&#9670;&nbsp;</a></span>renderFrame() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ToonzScene::renderFrame </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRaster32P</a> &amp;&#160;</td>
          <td class="paramname"><em>ras</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_xsheet.html">TXsheet</a> *&#160;</td>
          <td class="paramname"><em>xsh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_rect_t.html">TRectD</a> &amp;&#160;</td>
          <td class="paramname"><em>placedRect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_affine.html">TAffine</a> &amp;&#160;</td>
          <td class="paramname"><em>worldToPlacedAff</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Performs a camera-stand render of the specified xsheet in the specified placedRect, with known world/placed reference change - and returns the result on top of the specified 32-bit raster.</p>
<p >Performs a camera-stand render of the specified xsheet in the specified placedRect, with known world/placed reference change - and returns the result in a 32-bit raster. </p>
<div class="fragment"><div class="line"><span class="lineno">  767</span>                                                                    {</div>
<div class="line"><span class="lineno">  768</span>  <span class="comment">// Build reference change affines</span></div>
<div class="line"><span class="lineno">  769</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_t_affine.html">TAffine</a> &amp;placedToOglRefAff =</div>
<div class="line"><span class="lineno">  770</span>      <a class="code hl_class" href="class_t_scale.html">TScale</a>(ras-&gt;getLx() / placedRect.getLx(),</div>
<div class="line"><span class="lineno">  771</span>             ras-&gt;getLy() / placedRect.getLy()) *</div>
<div class="line"><span class="lineno">  772</span>      <a class="code hl_class" href="class_t_translation.html">TTranslation</a>(-0.5 * (placedRect.<a class="code hl_variable" href="class_t_rect_t.html#ac008cbc625f50d8b3c180c8eb2594cdb">x0</a> + placedRect.x1),</div>
<div class="line"><span class="lineno">  773</span>                   -0.5 * (placedRect.y0 + placedRect.y1));</div>
<div class="line"><span class="lineno">  774</span> </div>
<div class="line"><span class="lineno">  775</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_t_affine.html">TAffine</a> &amp;cameraAff =</div>
<div class="line"><span class="lineno">  776</span>      xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#abd766f516cac9898a2a952463618a9fe">getPlacement</a>(xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a5dc925584e35e1678f5678b79c470959">getStageObjectTree</a>()-&gt;<a class="code hl_function" href="class_t_stage_object_tree.html#a7d63ae5d60c3a3aacf5da58c108ac167">getCurrentCameraId</a>(), row);</div>
<div class="line"><span class="lineno">  777</span> </div>
<div class="line"><span class="lineno">  778</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_t_affine.html">TAffine</a> &amp;worldToOglRefAff =</div>
<div class="line"><span class="lineno">  779</span>      placedToOglRefAff * worldToPlacedAff * cameraAff.<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>();</div>
<div class="line"><span class="lineno">  780</span> </div>
<div class="line"><span class="lineno">  781</span>  <a class="code hl_class" href="class_t_rect_t.html">TRect</a> clipRect(ras-&gt;getBounds());</div>
<div class="line"><span class="lineno">  782</span> </div>
<div class="line"><span class="lineno">  783</span><span class="comment">// fix for plastic tool applied to subxsheet</span></div>
<div class="line"><span class="lineno">  784</span><span class="preprocessor">#ifdef MACOSX</span></div>
<div class="line"><span class="lineno">  785</span>  QSurfaceFormat format;</div>
<div class="line"><span class="lineno">  786</span>  format.setProfile(QSurfaceFormat::CompatibilityProfile);</div>
<div class="line"><span class="lineno">  787</span> </div>
<div class="line"><span class="lineno">  788</span>  std::unique_ptr&lt;QOffscreenSurface&gt; surface(<span class="keyword">new</span> QOffscreenSurface());</div>
<div class="line"><span class="lineno">  789</span>  surface-&gt;setFormat(format);</div>
<div class="line"><span class="lineno">  790</span>  surface-&gt;create();</div>
<div class="line"><span class="lineno">  791</span> </div>
<div class="line"><span class="lineno">  792</span>  glPushAttrib(GL_ALL_ATTRIB_BITS);</div>
<div class="line"><span class="lineno">  793</span>  glMatrixMode(GL_MODELVIEW), glPushMatrix();</div>
<div class="line"><span class="lineno">  794</span>  glMatrixMode(GL_PROJECTION), glPushMatrix();</div>
<div class="line"><span class="lineno">  795</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  796</span>  <a class="code hl_class" href="class_t_offline_g_l.html">TOfflineGL</a> ogl(ras-&gt;getSize());</div>
<div class="line"><span class="lineno">  797</span>  currentOfflineGL = &amp;ogl;</div>
<div class="line"><span class="lineno">  798</span>  ogl.makeCurrent();</div>
<div class="line"><span class="lineno">  799</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  800</span>  {</div>
<div class="line"><span class="lineno">  801</span><span class="preprocessor">#ifdef MACOSX</span></div>
<div class="line"><span class="lineno">  802</span>    std::unique_ptr&lt;QOpenGLFramebufferObject&gt; fb(</div>
<div class="line"><span class="lineno">  803</span>        <span class="keyword">new</span> QOpenGLFramebufferObject(ras-&gt;getLx(), ras-&gt;getLy()));</div>
<div class="line"><span class="lineno">  804</span> </div>
<div class="line"><span class="lineno">  805</span>    fb-&gt;bind();</div>
<div class="line"><span class="lineno">  806</span>    assert(glGetError() == GL_NO_ERROR);</div>
<div class="line"><span class="lineno">  807</span> </div>
<div class="line"><span class="lineno">  808</span>    glViewport(0, 0, ras-&gt;getLx(), ras-&gt;getLy());</div>
<div class="line"><span class="lineno">  809</span> </div>
<div class="line"><span class="lineno">  810</span>    glMatrixMode(GL_PROJECTION);</div>
<div class="line"><span class="lineno">  811</span>    glLoadIdentity();</div>
<div class="line"><span class="lineno">  812</span>    gluOrtho2D(0, ras-&gt;getLx(), 0, ras-&gt;getLy());</div>
<div class="line"><span class="lineno">  813</span> </div>
<div class="line"><span class="lineno">  814</span>    glMatrixMode(GL_MODELVIEW);</div>
<div class="line"><span class="lineno">  815</span>    glLoadIdentity();</div>
<div class="line"><span class="lineno">  816</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  817</span>    glTranslated(0.5 * ras-&gt;getLx(), 0.5 * ras-&gt;getLy(), 0.0);</div>
<div class="line"><span class="lineno">  818</span> </div>
<div class="line"><span class="lineno">  819</span>    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);</div>
<div class="line"><span class="lineno">  820</span>    glClear(GL_COLOR_BUFFER_BIT);</div>
<div class="line"><span class="lineno">  821</span> </div>
<div class="line"><span class="lineno">  822</span>    <a class="code hl_class" href="class_image_painter_1_1_visual_settings.html">ImagePainter::VisualSettings</a> vs;</div>
<div class="line"><span class="lineno">  823</span>    vs.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#aafe14ec520424843ecd9aca4abf02bf0">m_plasticVisualSettings</a>.<a class="code hl_variable" href="struct_plastic_visual_settings.html#a0eedc983dcb0d83144b509b10f602116">m_drawMeshesWireframe</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  824</span> </div>
<div class="line"><span class="lineno">  825</span>    <a class="code hl_class" href="class_stage_1_1_raster_painter.html">Stage::RasterPainter</a> painter(ras-&gt;getSize(), worldToOglRefAff, clipRect, vs,</div>
<div class="line"><span class="lineno">  826</span>                                 <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  827</span>    <a class="code hl_function" href="namespace_stage.html#a28ab15860508cccd59a31483a9b8afa1">Stage::visit</a>(painter, <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="class_toonz_scene.html">ToonzScene</a> *<span class="keyword">&gt;</span>(<span class="keyword">this</span>),</div>
<div class="line"><span class="lineno">  828</span>                 <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *<span class="keyword">&gt;</span>(xsh), row);</div>
<div class="line"><span class="lineno">  829</span> </div>
<div class="line"><span class="lineno">  830</span>    painter.flushRasterImages();</div>
<div class="line"><span class="lineno">  831</span>    glFlush();</div>
<div class="line"><span class="lineno">  832</span><span class="preprocessor">#ifdef MACOSX</span></div>
<div class="line"><span class="lineno">  833</span>    QImage img =</div>
<div class="line"><span class="lineno">  834</span>        fb-&gt;toImage().scaled(QSize(ras-&gt;getLx(), ras-&gt;getLy()),</div>
<div class="line"><span class="lineno">  835</span>                             Qt::IgnoreAspectRatio, Qt::SmoothTransformation);</div>
<div class="line"><span class="lineno">  836</span> </div>
<div class="line"><span class="lineno">  837</span>    <span class="keywordtype">int</span> wrap      = ras-&gt;getLx() * <span class="keyword">sizeof</span>(TPixel32);</div>
<div class="line"><span class="lineno">  838</span>    uchar *srcPix = img.bits();</div>
<div class="line"><span class="lineno">  839</span>    uchar *dstPix = ras-&gt;getRawData() + wrap * (ras-&gt;getLy() - 1);</div>
<div class="line"><span class="lineno">  840</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; ras-&gt;getLy(); y++) {</div>
<div class="line"><span class="lineno">  841</span>      memcpy(dstPix, srcPix, wrap);</div>
<div class="line"><span class="lineno">  842</span>      dstPix -= wrap;</div>
<div class="line"><span class="lineno">  843</span>      srcPix += wrap;</div>
<div class="line"><span class="lineno">  844</span>    }</div>
<div class="line"><span class="lineno">  845</span>    fb-&gt;release();</div>
<div class="line"><span class="lineno">  846</span>    assert(glGetError() == GL_NO_ERROR);</div>
<div class="line"><span class="lineno">  847</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  848</span>    <a class="code hl_function" href="namespace_t_rop.html#ae5fd1fb0c2f625e1da14fe92ae0e5122">TRop::over</a>(ras, ogl.getRaster());</div>
<div class="line"><span class="lineno">  849</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  850</span>  }</div>
<div class="line"><span class="lineno">  851</span><span class="preprocessor">#ifdef MACOSX</span></div>
<div class="line"><span class="lineno">  852</span>  glMatrixMode(GL_MODELVIEW), glPopMatrix();</div>
<div class="line"><span class="lineno">  853</span>  glMatrixMode(GL_PROJECTION), glPopMatrix();</div>
<div class="line"><span class="lineno">  854</span> </div>
<div class="line"><span class="lineno">  855</span>  glPopAttrib();</div>
<div class="line"><span class="lineno">  856</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  857</span>  ogl.doneCurrent();</div>
<div class="line"><span class="lineno">  858</span>  currentOfflineGL = 0;</div>
<div class="line"><span class="lineno">  859</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  860</span>}</div>
<div class="ttc" id="aclass_image_painter_1_1_visual_settings_html"><div class="ttname"><a href="class_image_painter_1_1_visual_settings.html">ImagePainter::VisualSettings</a></div><div class="ttdoc">Stores generic settings used by Toonz painters to draw images.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:41</div></div>
<div class="ttc" id="aclass_image_painter_1_1_visual_settings_html_aafe14ec520424843ecd9aca4abf02bf0"><div class="ttname"><a href="class_image_painter_1_1_visual_settings.html#aafe14ec520424843ecd9aca4abf02bf0">ImagePainter::VisualSettings::m_plasticVisualSettings</a></div><div class="ttdeci">PlasticVisualSettings m_plasticVisualSettings</div><div class="ttdef"><b>Definition:</b> imagepainter.h:53</div></div>
<div class="ttc" id="aclass_stage_1_1_raster_painter_html"><div class="ttname"><a href="class_stage_1_1_raster_painter.html">Stage::RasterPainter</a></div><div class="ttdef"><b>Definition:</b> stagevisitor.h:199</div></div>
<div class="ttc" id="aclass_t_affine_html"><div class="ttname"><a href="class_t_affine.html">TAffine</a></div><div class="ttdoc">This is the base class for the affine transformations.</div><div class="ttdef"><b>Definition:</b> tgeometry.h:864</div></div>
<div class="ttc" id="aclass_t_affine_html_a570529b96b1ec5abc711aaa9aac09ff9"><div class="ttname"><a href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">TAffine::inv</a></div><div class="ttdeci">TAffine inv() const</div><div class="ttdef"><b>Definition:</b> tgeometry.cpp:55</div></div>
<div class="ttc" id="aclass_t_offline_g_l_html"><div class="ttname"><a href="class_t_offline_g_l.html">TOfflineGL</a></div><div class="ttdef"><b>Definition:</b> tofflinegl.h:35</div></div>
<div class="ttc" id="aclass_t_rect_t_html"><div class="ttname"><a href="class_t_rect_t.html">TRectT&lt; int &gt;</a></div></div>
<div class="ttc" id="aclass_t_rect_t_html_ac008cbc625f50d8b3c180c8eb2594cdb"><div class="ttname"><a href="class_t_rect_t.html#ac008cbc625f50d8b3c180c8eb2594cdb">TRectT::x0</a></div><div class="ttdeci">T x0</div><div class="ttdef"><b>Definition:</b> tgeometry.h:557</div></div>
<div class="ttc" id="aclass_t_scale_html"><div class="ttname"><a href="class_t_scale.html">TScale</a></div><div class="ttdef"><b>Definition:</b> tgeometry.h:1133</div></div>
<div class="ttc" id="aclass_t_translation_html"><div class="ttname"><a href="class_t_translation.html">TTranslation</a></div><div class="ttdef"><b>Definition:</b> tgeometry.h:1074</div></div>
<div class="ttc" id="aclass_t_xsheet_html_abd766f516cac9898a2a952463618a9fe"><div class="ttname"><a href="class_t_xsheet.html#abd766f516cac9898a2a952463618a9fe">TXsheet::getPlacement</a></div><div class="ttdeci">TAffine getPlacement(const TStageObjectId &amp;id, int frame) const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:555</div></div>
<div class="ttc" id="anamespace_stage_html_a28ab15860508cccd59a31483a9b8afa1"><div class="ttname"><a href="namespace_stage.html#a28ab15860508cccd59a31483a9b8afa1">Stage::visit</a></div><div class="ttdeci">DVAPI void visit(Visitor &amp;visitor, const VisitArgs &amp;args)</div><div class="ttdef"><b>Definition:</b> stage.cpp:911</div></div>
<div class="ttc" id="anamespace_t_rop_html_ae5fd1fb0c2f625e1da14fe92ae0e5122"><div class="ttname"><a href="namespace_t_rop.html#ae5fd1fb0c2f625e1da14fe92ae0e5122">TRop::over</a></div><div class="ttdeci">DVAPI void over(const TRasterP &amp;out, const TRasterP &amp;dn, const TRasterP &amp;up)</div><div class="ttdef"><b>Definition:</b> tover.cpp:285</div></div>
<div class="ttc" id="astruct_plastic_visual_settings_html_a0eedc983dcb0d83144b509b10f602116"><div class="ttname"><a href="struct_plastic_visual_settings.html#a0eedc983dcb0d83144b509b10f602116">PlasticVisualSettings::m_drawMeshesWireframe</a></div><div class="ttdeci">bool m_drawMeshesWireframe</div><div class="ttdef"><b>Definition:</b> plasticvisualsettings.h:30</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00508">TStageObjectTree::getCurrentCameraId()</a>, <a class="el" href="#l00555">TXsheet::getPlacement()</a>, <a class="el" href="#l00549">TXsheet::getStageObjectTree()</a>, <a class="el" href="#l00055">TAffine::inv()</a>, <a class="el" href="#l00030">PlasticVisualSettings::m_drawMeshesWireframe</a>, <a class="el" href="#l00053">ImagePainter::VisualSettings::m_plasticVisualSettings</a>, <a class="el" href="#l00285">TRop::over()</a>, <a class="el" href="#l00911">Stage::visit()</a>, and <a class="el" href="#l00557">TRectT&lt; T &gt;::x0</a>.</p>

</div>
</div>
<a id="a5839f9331bbd43c14fcf51d700e731f1" name="a5839f9331bbd43c14fcf51d700e731f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5839f9331bbd43c14fcf51d700e731f1">&#9670;&nbsp;</a></span>renderFrame() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ToonzScene::renderFrame </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRaster32P</a> &amp;&#160;</td>
          <td class="paramname"><em>ras</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_xsheet.html">TXsheet</a> *&#160;</td>
          <td class="paramname"><em>xsh</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>checkFlags</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Performs a camera-stand render of the specified xsheet (or the main one in case none was specified), on its currently selected camera, and returns the result on top of the specified 32-bit raster. </p>
<div class="fragment"><div class="line"><span class="lineno">  712</span>                                                    {</div>
<div class="line"><span class="lineno">  713</span>  <span class="keywordflow">if</span> (xsh == 0) xsh = <a class="code hl_function" href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">getXsheet</a>();</div>
<div class="line"><span class="lineno">  714</span> </div>
<div class="line"><span class="lineno">  715</span>  <a class="code hl_class" href="class_t_camera.html">TCamera</a> *camera        = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a5dc925584e35e1678f5678b79c470959">getStageObjectTree</a>()-&gt;<a class="code hl_function" href="class_t_stage_object_tree.html#ada891076099087125f94f933cd49d592">getCurrentCamera</a>();</div>
<div class="line"><span class="lineno">  716</span>  <a class="code hl_class" href="class_t_dimension_t.html">TDimension</a> cameraRes   = camera-&gt;<a class="code hl_function" href="class_t_camera.html#a9a7c573e7a2c397ffae4b747809ea2a5">getRes</a>();</div>
<div class="line"><span class="lineno">  717</span>  <a class="code hl_class" href="class_t_dimension_t.html">TDimensionD</a> cameraSize = camera-&gt;<a class="code hl_function" href="class_t_camera.html#a6f561eca912177c2150b3e57816f02f6">getSize</a>();</div>
<div class="line"><span class="lineno">  718</span> </div>
<div class="line"><span class="lineno">  719</span>  <span class="comment">// voglio che la camera sia completamente contenuta dentro raster</span></div>
<div class="line"><span class="lineno">  720</span>  <span class="keywordtype">double</span> sx = (double)ras-&gt;getLx() / (double)cameraSize.lx;</div>
<div class="line"><span class="lineno">  721</span>  <span class="keywordtype">double</span> sy = (<span class="keywordtype">double</span>)ras-&gt;getLy() / (double)cameraSize.ly;</div>
<div class="line"><span class="lineno">  722</span>  <span class="keywordtype">double</span> sc = (sx &lt; sy) ? sx : sy;</div>
<div class="line"><span class="lineno">  723</span> </div>
<div class="line"><span class="lineno">  724</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_t_affine.html">TAffine</a> &amp;cameraAff =</div>
<div class="line"><span class="lineno">  725</span>      xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#abd766f516cac9898a2a952463618a9fe">getPlacement</a>(xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a5dc925584e35e1678f5678b79c470959">getStageObjectTree</a>()-&gt;<a class="code hl_function" href="class_t_stage_object_tree.html#a7d63ae5d60c3a3aacf5da58c108ac167">getCurrentCameraId</a>(), row);</div>
<div class="line"><span class="lineno">  726</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_t_affine.html">TAffine</a> &amp;viewAff = <a class="code hl_class" href="class_t_scale.html">TScale</a>(sc / <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a>) * cameraAff.<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>();</div>
<div class="line"><span class="lineno">  727</span> </div>
<div class="line"><span class="lineno">  728</span>  <a class="code hl_class" href="class_t_rect_t.html">TRect</a> clipRect(ras-&gt;getBounds());</div>
<div class="line"><span class="lineno">  729</span>  <a class="code hl_class" href="class_t_offline_g_l.html">TOfflineGL</a> ogl(ras-&gt;getSize());</div>
<div class="line"><span class="lineno">  730</span>  currentOfflineGL = &amp;ogl;</div>
<div class="line"><span class="lineno">  731</span> </div>
<div class="line"><span class="lineno">  732</span>  ogl.makeCurrent();</div>
<div class="line"><span class="lineno">  733</span>  {</div>
<div class="line"><span class="lineno">  734</span>    glTranslated(0.5 * ras-&gt;getLx(), 0.5 * ras-&gt;getLy(), 0.0);</div>
<div class="line"><span class="lineno">  735</span> </div>
<div class="line"><span class="lineno">  736</span>    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);</div>
<div class="line"><span class="lineno">  737</span>    glClear(GL_COLOR_BUFFER_BIT);</div>
<div class="line"><span class="lineno">  738</span> </div>
<div class="line"><span class="lineno">  739</span>    <a class="code hl_class" href="class_image_painter_1_1_visual_settings.html">ImagePainter::VisualSettings</a> vs;</div>
<div class="line"><span class="lineno">  740</span>    vs.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#aafe14ec520424843ecd9aca4abf02bf0">m_plasticVisualSettings</a>.<a class="code hl_variable" href="struct_plastic_visual_settings.html#a0eedc983dcb0d83144b509b10f602116">m_drawMeshesWireframe</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  741</span>    vs.m_forSceneIcon                                = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  742</span> </div>
<div class="line"><span class="lineno">  743</span>    <a class="code hl_class" href="class_stage_1_1_raster_painter.html">Stage::RasterPainter</a> painter(ras-&gt;getSize(), viewAff, clipRect, vs,</div>
<div class="line"><span class="lineno">  744</span>                                 checkFlags);</div>
<div class="line"><span class="lineno">  745</span>    <a class="code hl_function" href="namespace_stage.html#a28ab15860508cccd59a31483a9b8afa1">Stage::visit</a>(painter, <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="class_toonz_scene.html">ToonzScene</a> *<span class="keyword">&gt;</span>(<span class="keyword">this</span>),</div>
<div class="line"><span class="lineno">  746</span>                 <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *<span class="keyword">&gt;</span>(xsh), row);</div>
<div class="line"><span class="lineno">  747</span> </div>
<div class="line"><span class="lineno">  748</span>    painter.flushRasterImages();</div>
<div class="line"><span class="lineno">  749</span>    glFlush();</div>
<div class="line"><span class="lineno">  750</span> </div>
<div class="line"><span class="lineno">  751</span>    <a class="code hl_function" href="namespace_t_rop.html#ae5fd1fb0c2f625e1da14fe92ae0e5122">TRop::over</a>(ras, ogl.getRaster());</div>
<div class="line"><span class="lineno">  752</span>  }</div>
<div class="line"><span class="lineno">  753</span>  ogl.doneCurrent();</div>
<div class="line"><span class="lineno">  754</span> </div>
<div class="line"><span class="lineno">  755</span>  currentOfflineGL = 0;</div>
<div class="line"><span class="lineno">  756</span>}</div>
<div class="ttc" id="aclass_t_camera_html"><div class="ttname"><a href="class_t_camera.html">TCamera</a></div><div class="ttdoc">The TCamera class provides a camera and allows its management.</div><div class="ttdef"><b>Definition:</b> tcamera.h:33</div></div>
<div class="ttc" id="aclass_t_camera_html_a6f561eca912177c2150b3e57816f02f6"><div class="ttname"><a href="class_t_camera.html#a6f561eca912177c2150b3e57816f02f6">TCamera::getSize</a></div><div class="ttdeci">const TDimensionD &amp; getSize() const</div><div class="ttdef"><b>Definition:</b> tcamera.h:55</div></div>
<div class="ttc" id="aclass_t_camera_html_a9a7c573e7a2c397ffae4b747809ea2a5"><div class="ttname"><a href="class_t_camera.html#a9a7c573e7a2c397ffae4b747809ea2a5">TCamera::getRes</a></div><div class="ttdeci">const TDimension &amp; getRes() const</div><div class="ttdef"><b>Definition:</b> tcamera.h:72</div></div>
<div class="ttc" id="aclass_t_dimension_t_html"><div class="ttname"><a href="class_t_dimension_t.html">TDimensionT&lt; int &gt;</a></div></div>
<div class="ttc" id="anamespace_stage_html_ad3e22e31e2bb6fc1d95a572facce2d5b"><div class="ttname"><a href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a></div><div class="ttdeci">DVVAR const double inch</div><div class="ttdef"><b>Definition:</b> stageplayer.h:37</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00277">TStageObjectTree::getCurrentCamera()</a>, <a class="el" href="#l00508">TStageObjectTree::getCurrentCameraId()</a>, <a class="el" href="#l00555">TXsheet::getPlacement()</a>, <a class="el" href="#l00072">TCamera::getRes()</a>, <a class="el" href="#l00055">TCamera::getSize()</a>, <a class="el" href="#l00549">TXsheet::getStageObjectTree()</a>, <a class="el" href="#l00957">getXsheet()</a>, <a class="el" href="#l00037">Stage::inch</a>, <a class="el" href="#l00055">TAffine::inv()</a>, <a class="el" href="#l00030">PlasticVisualSettings::m_drawMeshesWireframe</a>, <a class="el" href="#l00053">ImagePainter::VisualSettings::m_plasticVisualSettings</a>, <a class="el" href="#l00285">TRop::over()</a>, and <a class="el" href="#l00911">Stage::visit()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00170">texture_utils::getTextureData()</a>.</p>

</div>
</div>
<a id="ac65f5b13baf094ba58e2e74c6949df61" name="ac65f5b13baf094ba58e2e74c6949df61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac65f5b13baf094ba58e2e74c6949df61">&#9670;&nbsp;</a></span>save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ToonzScene::save </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_xsheet.html">TXsheet</a> *&#160;</td>
          <td class="paramname"><em>subxsheet</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Saves the scene (or a sub-xsheet) at the specified path. </p>
<div class="fragment"><div class="line"><span class="lineno">  590</span>                                                          {</div>
<div class="line"><span class="lineno">  591</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> oldScenePath = <a class="code hl_function" href="class_toonz_scene.html#ad42b52b671b094f66e003c4b7ebefd45">getScenePath</a>();</div>
<div class="line"><span class="lineno">  592</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> newScenePath = fp;</div>
<div class="line"><span class="lineno">  593</span> </div>
<div class="line"><span class="lineno">  594</span>  <a class="code hl_class" href="class_camera_redirection.html">CameraRedirection</a> redir(<span class="keyword">this</span>, subxsh);</div>
<div class="line"><span class="lineno">  595</span> </div>
<div class="line"><span class="lineno">  596</span>  <span class="keywordtype">bool</span> wasUntitled = <a class="code hl_function" href="class_toonz_scene.html#a53cbaf09f551658479eb743e153ab6bc">isUntitled</a>();</div>
<div class="line"><span class="lineno">  597</span> </div>
<div class="line"><span class="lineno">  598</span>  <a class="code hl_function" href="class_toonz_scene.html#a815ecf4f07a92f9f9fef693f762c1228">setScenePath</a>(fp);</div>
<div class="line"><span class="lineno">  599</span> </div>
<div class="line"><span class="lineno">  600</span>  <a class="code hl_class" href="class_t_file_status.html">TFileStatus</a> fs(newScenePath);</div>
<div class="line"><span class="lineno">  601</span>  <span class="keywordflow">if</span> (fs.doesExist() &amp;&amp; !fs.isWritable())</div>
<div class="line"><span class="lineno">  602</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_system_exception.html">TSystemException</a>(newScenePath,</div>
<div class="line"><span class="lineno">  603</span>                           <span class="stringliteral">&quot;The scene cannot be saved: it is a read only &quot;</span></div>
<div class="line"><span class="lineno">  604</span>                           <span class="stringliteral">&quot;scene.\n All resources have been saved.&quot;</span>);</div>
<div class="line"><span class="lineno">  605</span> </div>
<div class="line"><span class="lineno">  606</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> scenePath = <a class="code hl_function" href="class_toonz_scene.html#aa2ed57dfbae7f8cf02a4abe47ed533c6">decodeFilePath</a>(fp);</div>
<div class="line"><span class="lineno">  607</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> scenePathTemp(scenePath.getWideString() +</div>
<div class="line"><span class="lineno">  608</span>                          QString(<span class="stringliteral">&quot;.tmp&quot;</span>).toStdWString());</div>
<div class="line"><span class="lineno">  609</span> </div>
<div class="line"><span class="lineno">  610</span>  <span class="keywordflow">if</span> (Preferences::instance()-&gt;isBackupEnabled() &amp;&amp;</div>
<div class="line"><span class="lineno">  611</span>      oldScenePath == newScenePath &amp;&amp; <a class="code hl_class" href="class_t_file_status.html">TFileStatus</a>(scenePath).doesExist())</div>
<div class="line"><span class="lineno">  612</span>    saveBackup(scenePath);</div>
<div class="line"><span class="lineno">  613</span> </div>
<div class="line"><span class="lineno">  614</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="class_t_file_status.html">TFileStatus</a>(scenePathTemp).doesExist())</div>
<div class="line"><span class="lineno">  615</span>    TSystem::removeFileOrLevel(scenePathTemp);</div>
<div class="line"><span class="lineno">  616</span> </div>
<div class="line"><span class="lineno">  617</span>  <span class="comment">//  TSystem::touchFile(scenePath);</span></div>
<div class="line"><span class="lineno">  618</span>  TSystem::touchFile(scenePathTemp);</div>
<div class="line"><span class="lineno">  619</span>  makeSceneIcon(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  620</span> </div>
<div class="line"><span class="lineno">  621</span>  <span class="comment">// TOStream os(scenePath, compressionEnabled);</span></div>
<div class="line"><span class="lineno">  622</span>  <span class="comment">//  TOStream os(scenePath, false);</span></div>
<div class="line"><span class="lineno">  623</span>  {</div>
<div class="line"><span class="lineno">  624</span>    <a class="code hl_class" href="class_t_o_stream.html">TOStream</a> os(scenePathTemp, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  625</span>    <span class="keywordflow">if</span> (!os.checkStatus())</div>
<div class="line"><span class="lineno">  626</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;Could not open temporary save file&quot;</span>);</div>
<div class="line"><span class="lineno">  627</span> </div>
<div class="line"><span class="lineno">  628</span>    <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh = subxsh;</div>
<div class="line"><span class="lineno">  629</span>    <span class="keywordflow">if</span> (xsh == 0) xsh = m_childStack-&gt;<a class="code hl_function" href="class_child_stack.html#acc3acc547e134c1571b01ec5e75e9705">getTopXsheet</a>();</div>
<div class="line"><span class="lineno">  630</span> </div>
<div class="line"><span class="lineno">  631</span>    std::map&lt;std::string, std::string&gt; attr;</div>
<div class="line"><span class="lineno">  632</span>    attr[<span class="stringliteral">&quot;version&quot;</span>] =</div>
<div class="line"><span class="lineno">  633</span>        (QString::number(l_currentVersion.first) +</div>
<div class="line"><span class="lineno">  634</span>         <span class="stringliteral">&quot;.&quot;</span>  <span class="comment">// From now on, version numbers in saved files will have</span></div>
<div class="line"><span class="lineno">  635</span>         + QString::number(</div>
<div class="line"><span class="lineno">  636</span>               l_currentVersion.second))  <span class="comment">// the signature &quot;MAJOR.MINOR&quot;, where:</span></div>
<div class="line"><span class="lineno">  637</span>            .toStdString();               <span class="comment">//</span></div>
<div class="line"><span class="lineno">  638</span>    attr[<span class="stringliteral">&quot;framecount&quot;</span>] =</div>
<div class="line"><span class="lineno">  639</span>        QString::number(  <span class="comment">//    MAJOR = Toonz version number * 10 (eg 7.0 =&gt; 70)</span></div>
<div class="line"><span class="lineno">  640</span>            xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a12a62da7dc04395088112e492d73374f">getFrameCount</a>())</div>
<div class="line"><span class="lineno">  641</span>            .toStdString();  <span class="comment">//    MINOR = Reset to 0 after each major</span></div>
<div class="line"><span class="lineno">  642</span>                             <span class="comment">//    increment,</span></div>
<div class="line"><span class="lineno">  643</span>                             <span class="comment">//    and</span></div>
<div class="line"><span class="lineno">  644</span>    <span class="comment">//            advancing on its own when fixing bugs.</span></div>
<div class="line"><span class="lineno">  645</span>    os.openChild(<span class="stringliteral">&quot;tnz&quot;</span>, attr);</div>
<div class="line"><span class="lineno">  646</span> </div>
<div class="line"><span class="lineno">  647</span>    os.child(<span class="stringliteral">&quot;generator&quot;</span>) &lt;&lt; TEnv::getApplicationFullName();</div>
<div class="line"><span class="lineno">  648</span>    os.openChild(<span class="stringliteral">&quot;properties&quot;</span>);</div>
<div class="line"><span class="lineno">  649</span>    m_properties-&gt;saveData(os);</div>
<div class="line"><span class="lineno">  650</span>    os.closeChild();</div>
<div class="line"><span class="lineno">  651</span> </div>
<div class="line"><span class="lineno">  652</span>    <span class="keywordflow">if</span> (subxsh) {</div>
<div class="line"><span class="lineno">  653</span>      std::set&lt;TXshLevel *&gt; saveSet;</div>
<div class="line"><span class="lineno">  654</span>      subxsh-&gt;getUsedLevels(saveSet);</div>
<div class="line"><span class="lineno">  655</span>      m_levelSet-&gt;<a class="code hl_function" href="class_t_level_set.html#a906b8261a4386f8081c038ebe11aec1c">setSaveSet</a>(saveSet);</div>
<div class="line"><span class="lineno">  656</span>    }</div>
<div class="line"><span class="lineno">  657</span>    os.openChild(<span class="stringliteral">&quot;levelSet&quot;</span>);</div>
<div class="line"><span class="lineno">  658</span>    m_levelSet-&gt;saveData(os);</div>
<div class="line"><span class="lineno">  659</span>    os.closeChild();</div>
<div class="line"><span class="lineno">  660</span>    std::set&lt;TXshLevel *&gt; emptySaveSet;</div>
<div class="line"><span class="lineno">  661</span>    m_levelSet-&gt;<a class="code hl_function" href="class_t_level_set.html#a906b8261a4386f8081c038ebe11aec1c">setSaveSet</a>(emptySaveSet);</div>
<div class="line"><span class="lineno">  662</span> </div>
<div class="line"><span class="lineno">  663</span>    os.openChild(<span class="stringliteral">&quot;xsheet&quot;</span>);</div>
<div class="line"><span class="lineno">  664</span>    os &lt;&lt; *xsh;</div>
<div class="line"><span class="lineno">  665</span>    os.closeChild();</div>
<div class="line"><span class="lineno">  666</span> </div>
<div class="line"><span class="lineno">  667</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="class_toonz_scene.html#ae3c27b7146c62da156c5d5bffca0e9d7">getContentHistory</a>()) {</div>
<div class="line"><span class="lineno">  668</span>      os.openChild(<span class="stringliteral">&quot;history&quot;</span>);</div>
<div class="line"><span class="lineno">  669</span>      QString data = <a class="code hl_function" href="class_toonz_scene.html#ae3c27b7146c62da156c5d5bffca0e9d7">getContentHistory</a>()-&gt;<a class="code hl_function" href="class_t_content_history.html#aac53dd08c6fc7fa07ba1c8c5beb51131">serialize</a>();</div>
<div class="line"><span class="lineno">  670</span>      <span class="keywordtype">int</span> i        = 0, j;</div>
<div class="line"><span class="lineno">  671</span>      <span class="comment">// non scrivo tutta la std::string di seguito per evitare problemi se</span></div>
<div class="line"><span class="lineno">  672</span>      <span class="comment">// diventa</span></div>
<div class="line"><span class="lineno">  673</span>      <span class="comment">// troppo lunga. Cerco di spezzarla in modo che sia &quot;bella da leggere&quot; nel</span></div>
<div class="line"><span class="lineno">  674</span>      <span class="comment">// tnz</span></div>
<div class="line"><span class="lineno">  675</span>      <span class="keywordflow">while</span> ((j = data.indexOf(<span class="stringliteral">&quot;||&quot;</span>, i)) &gt;= i) {</div>
<div class="line"><span class="lineno">  676</span>        os &lt;&lt; data.mid(i, j - i + 1).toStdWString();</div>
<div class="line"><span class="lineno">  677</span>        os.cr();</div>
<div class="line"><span class="lineno">  678</span>        i = j + 1;</div>
<div class="line"><span class="lineno">  679</span>      }</div>
<div class="line"><span class="lineno">  680</span>      os &lt;&lt; data.mid(i).toStdWString();</div>
<div class="line"><span class="lineno">  681</span>      os.closeChild();</div>
<div class="line"><span class="lineno">  682</span>    }</div>
<div class="line"><span class="lineno">  683</span> </div>
<div class="line"><span class="lineno">  684</span>    os.closeChild();</div>
<div class="line"><span class="lineno">  685</span>    <span class="keywordtype">bool</span> status = os.checkStatus();</div>
<div class="line"><span class="lineno">  686</span>    <span class="keywordflow">if</span> (!status) <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;Could not complete the temporary save&quot;</span>);</div>
<div class="line"><span class="lineno">  687</span>  }</div>
<div class="line"><span class="lineno">  688</span> </div>
<div class="line"><span class="lineno">  689</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="class_t_file_status.html">TFileStatus</a>(scenePathTemp).doesExist())</div>
<div class="line"><span class="lineno">  690</span>    TSystem::renameFile(scenePath, scenePathTemp, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  691</span> </div>
<div class="line"><span class="lineno">  692</span>  <span class="keywordflow">if</span> (subxsh) {</div>
<div class="line"><span class="lineno">  693</span>    <a class="code hl_function" href="class_toonz_scene.html#a815ecf4f07a92f9f9fef693f762c1228">setScenePath</a>(oldScenePath);</div>
<div class="line"><span class="lineno">  694</span>    <span class="keywordflow">if</span> (wasUntitled) <a class="code hl_function" href="class_toonz_scene.html#ad5e0cf52431bcf95e54faa416f0fc21d">setUntitled</a>();</div>
<div class="line"><span class="lineno">  695</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  696</span>    <span class="keywordflow">if</span> (wasUntitled) deleteUntitledScene(oldScenePath.<a class="code hl_function" href="class_t_file_path.html#a1f5014e9c396bc2268820c19bc15657d">getParentDir</a>());</div>
<div class="line"><span class="lineno">  697</span>  }</div>
<div class="line"><span class="lineno">  698</span>  <span class="comment">// update the last saved version</span></div>
<div class="line"><span class="lineno">  699</span>  setVersionNumber(l_currentVersion);</div>
<div class="line"><span class="lineno">  700</span>}</div>
<div class="ttc" id="aclass_camera_redirection_html"><div class="ttname"><a href="class_camera_redirection.html">CameraRedirection</a></div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:569</div></div>
<div class="ttc" id="aclass_t_content_history_html_aac53dd08c6fc7fa07ba1c8c5beb51131"><div class="ttname"><a href="class_t_content_history.html#aac53dd08c6fc7fa07ba1c8c5beb51131">TContentHistory::serialize</a></div><div class="ttdeci">const QString serialize() const</div><div class="ttdoc">the returned string is only for visualitation and serialization</div><div class="ttdef"><b>Definition:</b> tcontenthistory.cpp:180</div></div>
<div class="ttc" id="aclass_t_file_status_html"><div class="ttname"><a href="class_t_file_status.html">TFileStatus</a></div><div class="ttdef"><b>Definition:</b> tsystem.h:36</div></div>
<div class="ttc" id="aclass_t_level_set_html_a906b8261a4386f8081c038ebe11aec1c"><div class="ttname"><a href="class_t_level_set.html#a906b8261a4386f8081c038ebe11aec1c">TLevelSet::setSaveSet</a></div><div class="ttdeci">void setSaveSet(const std::set&lt; TXshLevel * &gt; &amp;saveSet)</div><div class="ttdef"><b>Definition:</b> levelset.h:114</div></div>
<div class="ttc" id="aclass_t_o_stream_html"><div class="ttname"><a href="class_t_o_stream.html">TOStream</a></div><div class="ttdoc">Toonz's XML-like output file parser.</div><div class="ttdef"><b>Definition:</b> tstream.h:186</div></div>
<div class="ttc" id="aclass_t_system_exception_html"><div class="ttname"><a href="class_t_system_exception.html">TSystemException</a></div><div class="ttdef"><b>Definition:</b> tsystem.h:65</div></div>
<div class="ttc" id="aclass_toonz_scene_html_ad5e0cf52431bcf95e54faa416f0fc21d"><div class="ttname"><a href="class_toonz_scene.html#ad5e0cf52431bcf95e54faa416f0fc21d">ToonzScene::setUntitled</a></div><div class="ttdeci">void setUntitled()</div><div class="ttdoc">Marks the scene as explicitly untitled.</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:538</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00583">TOStream::checkStatus()</a>, <a class="el" href="#l00482">TOStream::child()</a>, <a class="el" href="#l00520">TOStream::closeChild()</a>, <a class="el" href="#l00471">TOStream::cr()</a>, <a class="el" href="#l01231">decodeFilePath()</a>, <a class="el" href="#l01484">getContentHistory()</a>, <a class="el" href="#l00229">TXsheet::getFrameCount()</a>, <a class="el" href="#l00683">TFilePath::getParentDir()</a>, <a class="el" href="#l00059">getScenePath()</a>, <a class="el" href="#l00142">ChildStack::getTopXsheet()</a>, <a class="el" href="#l00489">TXsheet::getUsedLevels()</a>, <a class="el" href="#l00345">isUntitled()</a>, <a class="el" href="class_t_o_stream.html#a38fe0f56d934f1c25e2b5d8156415673">TOStream::openChild()</a>, <a class="el" href="#l00180">TContentHistory::serialize()</a>, <a class="el" href="#l00114">TLevelSet::setSaveSet()</a>, <a class="el" href="#l00338">setScenePath()</a>, and <a class="el" href="#l00538">setUntitled()</a>.</p>

</div>
</div>
<a id="a58a128eb8be9f67ead32ac5c674a51f1" name="a58a128eb8be9f67ead32ac5c674a51f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58a128eb8be9f67ead32ac5c674a51f1">&#9670;&nbsp;</a></span>setIsLoading()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ToonzScene::setIsLoading </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isLoading</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  263</span>{ m_isLoading = isLoading; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa7aac33fc53c47ea5baff597e5f18a9b" name="aa7aac33fc53c47ea5baff597e5f18a9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7aac33fc53c47ea5baff597e5f18a9b">&#9670;&nbsp;</a></span>setProject()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ToonzScene::setProject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_project.html">TProject</a> *&#160;</td>
          <td class="paramname"><em>project</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Associates a scene to a project. </p>
<div class="fragment"><div class="line"><span class="lineno">  322</span>                                             {</div>
<div class="line"><span class="lineno">  323</span>  assert(project);</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>  <span class="keywordflow">if</span> (project != m_project) {</div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordflow">if</span> (project) project-&gt;addRef();</div>
<div class="line"><span class="lineno">  327</span>    <span class="keywordflow">if</span> (m_project) m_project-&gt;release();</div>
<div class="line"><span class="lineno">  328</span>    m_project = project;</div>
<div class="line"><span class="lineno">  329</span>  }</div>
<div class="line"><span class="lineno">  330</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00394">loadNoResources()</a>.</p>

</div>
</div>
<a id="a8c168c9551d1ac99ad3ce4849d36a464" name="a8c168c9551d1ac99ad3ce4849d36a464"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c168c9551d1ac99ad3ce4849d36a464">&#9670;&nbsp;</a></span>setSceneName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ToonzScene::setSceneName </td>
          <td>(</td>
          <td class="paramtype">std::wstring&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the scene's name. </p>
<div class="fragment"><div class="line"><span class="lineno">  302</span>                                             {</div>
<div class="line"><span class="lineno">  303</span>  m_scenePath = m_scenePath.<a class="code hl_function" href="class_t_file_path.html#a3ebf9ced558cfef97a60bba536b23c6f">withName</a>(name);</div>
<div class="line"><span class="lineno">  304</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00802">TFilePath::withName()</a>.</p>

</div>
</div>
<a id="a815ecf4f07a92f9f9fef693f762c1228" name="a815ecf4f07a92f9f9fef693f762c1228"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a815ecf4f07a92f9f9fef693f762c1228">&#9670;&nbsp;</a></span>setScenePath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ToonzScene::setScenePath </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the scene's file path. </p>
<div class="fragment"><div class="line"><span class="lineno">  338</span>                                                 {</div>
<div class="line"><span class="lineno">  339</span>  m_scenePath  = fp;</div>
<div class="line"><span class="lineno">  340</span>  m_isUntitled = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  341</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00443">loadTnzFile()</a>, and <a class="el" href="#l00590">save()</a>.</p>

</div>
</div>
<a id="ad5e0cf52431bcf95e54faa416f0fc21d" name="ad5e0cf52431bcf95e54faa416f0fc21d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5e0cf52431bcf95e54faa416f0fc21d">&#9670;&nbsp;</a></span>setUntitled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ToonzScene::setUntitled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Marks the scene as explicitly untitled. </p>
<p >An untitled scene generates unique temporary paths hosting any newly created scene content. Said content is then moved once a proper path is specified by the user. <br  />
 </p>
<div class="fragment"><div class="line"><span class="lineno">  538</span>                             {</div>
<div class="line"><span class="lineno">  539</span>  m_isUntitled               = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  540</span>  <span class="keyword">const</span> std::string baseName = <span class="stringliteral">&quot;untitled&quot;</span>;</div>
<div class="line"><span class="lineno">  541</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> tempDir          = getUntitledScenesDir();</div>
<div class="line"><span class="lineno">  542</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="class_t_file_status.html">TFileStatus</a>(tempDir).doesExist() == <span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno">  543</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  544</span>      TSystem::mkDir(tempDir);</div>
<div class="line"><span class="lineno">  545</span>    } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  546</span>    }</div>
<div class="line"><span class="lineno">  547</span>  }</div>
<div class="line"><span class="lineno">  548</span> </div>
<div class="line"><span class="lineno">  549</span>  std::string name = baseName;</div>
<div class="line"><span class="lineno">  550</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="class_t_file_status.html">TFileStatus</a>(tempDir + name).doesExist()) {</div>
<div class="line"><span class="lineno">  551</span>    <span class="keywordtype">int</span> count = 2;</div>
<div class="line"><span class="lineno">  552</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno">  553</span>      name = baseName + std::to_string(count++);</div>
<div class="line"><span class="lineno">  554</span>    } <span class="keywordflow">while</span> (<a class="code hl_class" href="class_t_file_status.html">TFileStatus</a>(tempDir + name).doesExist());</div>
<div class="line"><span class="lineno">  555</span>  }</div>
<div class="line"><span class="lineno">  556</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> fp = tempDir + name + (name + <span class="stringliteral">&quot;.tnz&quot;</span>);</div>
<div class="line"><span class="lineno">  557</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  558</span>    TSystem::touchParentDir(fp);</div>
<div class="line"><span class="lineno">  559</span>  } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  560</span>    assert(0);</div>
<div class="line"><span class="lineno">  561</span>  }</div>
<div class="line"><span class="lineno">  562</span>  m_scenePath = fp;</div>
<div class="line"><span class="lineno">  563</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l01106">TProjectManager::initializeScene()</a>, and <a class="el" href="#l00590">save()</a>.</p>

</div>
</div>
<a id="a335bc842d433ec40bcdc697821916cf8" name="a335bc842d433ec40bcdc697821916cf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a335bc842d433ec40bcdc697821916cf8">&#9670;&nbsp;</a></span>setVersionNumber()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ToonzScene::setVersionNumber </td>
          <td>(</td>
          <td class="paramtype">VersionNumber&#160;</td>
          <td class="paramname"><em>version</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  256</span>{ m_versionNumber = version; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a190e3b95a8a40384fcd3a15a116cc651" name="a190e3b95a8a40384fcd3a15a116cc651"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a190e3b95a8a40384fcd3a15a116cc651">&#9670;&nbsp;</a></span>shiftCameraX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double ToonzScene::shiftCameraX </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1570</span>                                          {</div>
<div class="line"><span class="lineno"> 1571</span>  <a class="code hl_class" href="class_t_stage_object_tree.html">TStageObjectTree</a> *tree = <a class="code hl_function" href="class_toonz_scene.html#ae3c828e3223fd809fd59189233d0576a">getXsheet</a>()-&gt;<a class="code hl_function" href="class_t_xsheet.html#a5dc925584e35e1678f5678b79c470959">getStageObjectTree</a>();</div>
<div class="line"><span class="lineno"> 1572</span> </div>
<div class="line"><span class="lineno"> 1573</span>  <a class="code hl_class" href="class_t_stage_object.html">TStageObject</a> *stageObject = tree-&gt;<a class="code hl_function" href="class_t_stage_object_tree.html#a688e5b4f2f5730afb0cb10264f13a113">getStageObject</a>(tree-&gt;<a class="code hl_function" href="class_t_stage_object_tree.html#a7d63ae5d60c3a3aacf5da58c108ac167">getCurrentCameraId</a>());</div>
<div class="line"><span class="lineno"> 1574</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> ret               = stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#acca88f20b53a77f07ef090cc871ce43a">getOffset</a>();</div>
<div class="line"><span class="lineno"> 1575</span>  stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#a6e3e9725839b34216225a943cbfb3f0a">setOffset</a>(<a class="code hl_class" href="class_t_point_t.html">TPointD</a>(ret.x + val, ret.y));</div>
<div class="line"><span class="lineno"> 1576</span>  <span class="keywordflow">return</span> ret.x;</div>
<div class="line"><span class="lineno"> 1577</span>}</div>
<div class="ttc" id="aclass_t_stage_object_html"><div class="ttname"><a href="class_t_stage_object.html">TStageObject</a></div><div class="ttdef"><b>Definition:</b> tstageobject.h:95</div></div>
<div class="ttc" id="aclass_t_stage_object_html_a6e3e9725839b34216225a943cbfb3f0a"><div class="ttname"><a href="class_t_stage_object.html#a6e3e9725839b34216225a943cbfb3f0a">TStageObject::setOffset</a></div><div class="ttdeci">void setOffset(const TPointD &amp;off)</div><div class="ttdoc">Sets the offset of the object.</div><div class="ttdef"><b>Definition:</b> tstageobject.cpp:752</div></div>
<div class="ttc" id="aclass_t_stage_object_html_acca88f20b53a77f07ef090cc871ce43a"><div class="ttname"><a href="class_t_stage_object.html#acca88f20b53a77f07ef090cc871ce43a">TStageObject::getOffset</a></div><div class="ttdeci">TPointD getOffset() const</div><div class="ttdoc">Returns the offset of the object.</div><div class="ttdef"><b>Definition:</b> tstageobject.cpp:748</div></div>
<div class="ttc" id="aclass_t_stage_object_tree_html"><div class="ttname"><a href="class_t_stage_object_tree.html">TStageObjectTree</a></div><div class="ttdef"><b>Definition:</b> tstageobjecttree.h:86</div></div>
<div class="ttc" id="aclass_t_stage_object_tree_html_a688e5b4f2f5730afb0cb10264f13a113"><div class="ttname"><a href="class_t_stage_object_tree.html#a688e5b4f2f5730afb0cb10264f13a113">TStageObjectTree::getStageObject</a></div><div class="ttdeci">TStageObject * getStageObject(const TStageObjectId &amp;id, bool create=true)</div><div class="ttdef"><b>Definition:</b> tstageobjecttree.cpp:164</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9304aa6099f4b83540c0261e64d17a25" name="a9304aa6099f4b83540c0261e64d17a25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9304aa6099f4b83540c0261e64d17a25">&#9670;&nbsp;</a></span>updateSoundColumnFrameRate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ToonzScene::updateSoundColumnFrameRate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Set output properties frameRate to all sound column of scene. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1528</span>                                            {</div>
<div class="line"><span class="lineno"> 1529</span>  std::vector&lt;TXshSoundColumn *&gt; soundColumns;</div>
<div class="line"><span class="lineno"> 1530</span>  <a class="code hl_function" href="class_toonz_scene.html#ac8bd378d5af03124df8ee54f216a09d3">getSoundColumns</a>(soundColumns);</div>
<div class="line"><span class="lineno"> 1531</span> </div>
<div class="line"><span class="lineno"> 1532</span>  <a class="code hl_class" href="class_t_scene_properties.html">TSceneProperties</a> *properties = <a class="code hl_function" href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">getProperties</a>();</div>
<div class="line"><span class="lineno"> 1533</span>  <span class="keywordflow">if</span> (!properties) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1534</span> </div>
<div class="line"><span class="lineno"> 1535</span>  <a class="code hl_class" href="class_t_output_properties.html">TOutputProperties</a> *outputProperties = properties-&gt;<a class="code hl_function" href="class_t_scene_properties.html#abea7b4b8e4f0cedbf753b26ec30b5331">getOutputProperties</a>();</div>
<div class="line"><span class="lineno"> 1536</span>  <span class="keywordflow">if</span> (!outputProperties) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1537</span> </div>
<div class="line"><span class="lineno"> 1538</span>  <span class="keywordtype">double</span> frameRate = outputProperties-&gt;<a class="code hl_function" href="class_t_output_properties.html#a0d9662971bc33097aa1b55111965b967">getFrameRate</a>();</div>
<div class="line"><span class="lineno"> 1539</span> </div>
<div class="line"><span class="lineno"> 1540</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno"> 1541</span>  <span class="keywordflow">for</span> (i = 0; i &lt; (int)soundColumns.size(); i++)</div>
<div class="line"><span class="lineno"> 1542</span>    soundColumns[i]-&gt;updateFrameRate(frameRate);</div>
<div class="line"><span class="lineno"> 1543</span>}</div>
<div class="ttc" id="aclass_t_output_properties_html"><div class="ttname"><a href="class_t_output_properties.html">TOutputProperties</a></div><div class="ttdef"><b>Definition:</b> toutputproperties.h:63</div></div>
<div class="ttc" id="aclass_t_output_properties_html_a0d9662971bc33097aa1b55111965b967"><div class="ttname"><a href="class_t_output_properties.html#a0d9662971bc33097aa1b55111965b967">TOutputProperties::getFrameRate</a></div><div class="ttdeci">double getFrameRate() const</div><div class="ttdef"><b>Definition:</b> toutputproperties.h:175</div></div>
<div class="ttc" id="aclass_t_scene_properties_html_abea7b4b8e4f0cedbf753b26ec30b5331"><div class="ttname"><a href="class_t_scene_properties.html#abea7b4b8e4f0cedbf753b26ec30b5331">TSceneProperties::getOutputProperties</a></div><div class="ttdeci">TOutputProperties * getOutputProperties() const</div><div class="ttdef"><b>Definition:</b> sceneproperties.h:145</div></div>
<div class="ttc" id="aclass_toonz_scene_html_ac8bd378d5af03124df8ee54f216a09d3"><div class="ttname"><a href="class_toonz_scene.html#ac8bd378d5af03124df8ee54f216a09d3">ToonzScene::getSoundColumns</a></div><div class="ttdeci">void getSoundColumns(std::vector&lt; TXshSoundColumn * &gt; &amp;columns)</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:1492</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00175">TOutputProperties::getFrameRate()</a>, <a class="el" href="#l00145">TSceneProperties::getOutputProperties()</a>, <a class="el" href="#l00087">getProperties()</a>, and <a class="el" href="#l01492">getSoundColumns()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>E:/opentoonz/toonz/sources/include/toonz/<a class="el" href="">toonzscene.h</a></li>
<li>E:/opentoonz/toonz/sources/toonzlib/<a class="el" href="">toonzscene.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
