<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: FunctionSheetColumnHeadViewer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="class_function_sheet_column_head_viewer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">FunctionSheetColumnHeadViewer Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for FunctionSheetColumnHeadViewer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_function_sheet_column_head_viewer.png" usemap="#FunctionSheetColumnHeadViewer_map" alt=""/>
  <map id="FunctionSheetColumnHeadViewer_map" name="FunctionSheetColumnHeadViewer_map">
<area href="class_spreadsheet_1_1_column_panel.html" alt="Spreadsheet::ColumnPanel" shape="rect" coords="0,112,205,136"/>
<area href="class_spreadsheet_1_1_generic_panel.html" alt="Spreadsheet::GenericPanel" shape="rect" coords="0,56,205,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a826ee65fe88fa0aa5199cc7201106ca8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_function_sheet_column_head_viewer.html#a826ee65fe88fa0aa5199cc7201106ca8">FunctionSheetColumnHeadViewer</a> (<a class="el" href="class_function_sheet.html">FunctionSheet</a> *parent)</td></tr>
<tr class="separator:a826ee65fe88fa0aa5199cc7201106ca8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_spreadsheet_1_1_column_panel"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_spreadsheet_1_1_column_panel')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_spreadsheet_1_1_column_panel.html">Spreadsheet::ColumnPanel</a></td></tr>
<tr class="memitem:a95bdb55b8a4c688604bd8809d080e43e inherit pub_methods_class_spreadsheet_1_1_column_panel"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_spreadsheet_1_1_column_panel.html#a95bdb55b8a4c688604bd8809d080e43e">ColumnPanel</a> (<a class="el" href="class_spreadsheet_viewer.html">SpreadsheetViewer</a> *viewer)</td></tr>
<tr class="separator:a95bdb55b8a4c688604bd8809d080e43e inherit pub_methods_class_spreadsheet_1_1_column_panel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_spreadsheet_1_1_generic_panel"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_spreadsheet_1_1_generic_panel')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_spreadsheet_1_1_generic_panel.html">Spreadsheet::GenericPanel</a></td></tr>
<tr class="memitem:a57ca3b72e3553e537a2ca4fd1f4d7dd0 inherit pub_methods_class_spreadsheet_1_1_generic_panel"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_spreadsheet_1_1_generic_panel.html#a57ca3b72e3553e537a2ca4fd1f4d7dd0">GenericPanel</a> (<a class="el" href="class_spreadsheet_viewer.html">SpreadsheetViewer</a> *viewer)</td></tr>
<tr class="separator:a57ca3b72e3553e537a2ca4fd1f4d7dd0 inherit pub_methods_class_spreadsheet_1_1_generic_panel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a331feb9d27b4da37cde67597329dc140 inherit pub_methods_class_spreadsheet_1_1_generic_panel"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_spreadsheet_viewer.html">SpreadsheetViewer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_spreadsheet_1_1_generic_panel.html#a331feb9d27b4da37cde67597329dc140">getViewer</a> () const</td></tr>
<tr class="separator:a331feb9d27b4da37cde67597329dc140 inherit pub_methods_class_spreadsheet_1_1_generic_panel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dfe7e95fd9e80c7618b96a771ce0a54 inherit pub_methods_class_spreadsheet_1_1_generic_panel"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_spreadsheet_1_1_drag_tool.html">DragTool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_spreadsheet_1_1_generic_panel.html#a0dfe7e95fd9e80c7618b96a771ce0a54">createDragTool</a> (QMouseEvent *)</td></tr>
<tr class="separator:a0dfe7e95fd9e80c7618b96a771ce0a54 inherit pub_methods_class_spreadsheet_1_1_generic_panel"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a633b757468fb9ce985d582bfc2916238"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_function_sheet_column_head_viewer.html#a633b757468fb9ce985d582bfc2916238">paintEvent</a> (QPaintEvent *) override</td></tr>
<tr class="separator:a633b757468fb9ce985d582bfc2916238"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45ba8bc0dad2353655fda630c5541b46"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_function_sheet_column_head_viewer.html#a45ba8bc0dad2353655fda630c5541b46">mousePressEvent</a> (QMouseEvent *) override</td></tr>
<tr class="separator:a45ba8bc0dad2353655fda630c5541b46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2aebb12ea53cf6b32955e1444c31917"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_function_sheet_column_head_viewer.html#ae2aebb12ea53cf6b32955e1444c31917">mouseMoveEvent</a> (QMouseEvent *) override</td></tr>
<tr class="separator:ae2aebb12ea53cf6b32955e1444c31917"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdf6bcf18f7beb875b3a2b9df3fe5984"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_function_sheet_column_head_viewer.html#acdf6bcf18f7beb875b3a2b9df3fe5984">contextMenuEvent</a> (QContextMenuEvent *) override</td></tr>
<tr class="separator:acdf6bcf18f7beb875b3a2b9df3fe5984"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_class_spreadsheet_1_1_generic_panel"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_class_spreadsheet_1_1_generic_panel')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="class_spreadsheet_1_1_generic_panel.html">Spreadsheet::GenericPanel</a></td></tr>
<tr class="memitem:aeb038375549890e7ce206ea1a6c2d859 inherit pro_methods_class_spreadsheet_1_1_generic_panel"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_spreadsheet_1_1_generic_panel.html#aeb038375549890e7ce206ea1a6c2d859">paintEvent</a> (QPaintEvent *) override</td></tr>
<tr class="separator:aeb038375549890e7ce206ea1a6c2d859 inherit pro_methods_class_spreadsheet_1_1_generic_panel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20fc34c8053a13b42fbf9c0336fa8da5 inherit pro_methods_class_spreadsheet_1_1_generic_panel"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_spreadsheet_1_1_generic_panel.html#a20fc34c8053a13b42fbf9c0336fa8da5">mousePressEvent</a> (QMouseEvent *) override</td></tr>
<tr class="separator:a20fc34c8053a13b42fbf9c0336fa8da5 inherit pro_methods_class_spreadsheet_1_1_generic_panel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0c39fc8b53140cd68fc1f7ca203de inherit pro_methods_class_spreadsheet_1_1_generic_panel"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_spreadsheet_1_1_generic_panel.html#a4fb0c39fc8b53140cd68fc1f7ca203de">mouseReleaseEvent</a> (QMouseEvent *) override</td></tr>
<tr class="separator:a4fb0c39fc8b53140cd68fc1f7ca203de inherit pro_methods_class_spreadsheet_1_1_generic_panel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9adec79cdfe4fd698d7dbd0615e6df2b inherit pro_methods_class_spreadsheet_1_1_generic_panel"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_spreadsheet_1_1_generic_panel.html#a9adec79cdfe4fd698d7dbd0615e6df2b">mouseMoveEvent</a> (QMouseEvent *) override</td></tr>
<tr class="separator:a9adec79cdfe4fd698d7dbd0615e6df2b inherit pro_methods_class_spreadsheet_1_1_generic_panel"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a826ee65fe88fa0aa5199cc7201106ca8" name="a826ee65fe88fa0aa5199cc7201106ca8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a826ee65fe88fa0aa5199cc7201106ca8">&#9670;&nbsp;</a></span>FunctionSheetColumnHeadViewer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FunctionSheetColumnHeadViewer::FunctionSheetColumnHeadViewer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_function_sheet.html">FunctionSheet</a> *&#160;</td>
          <td class="paramname"><em>parent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  288</span>    : <a class="code hl_class" href="class_spreadsheet_1_1_column_panel.html">Spreadsheet::ColumnPanel</a>(parent), m_sheet(parent), m_draggingChannel(0) {</div>
<div class="line"><span class="lineno">  289</span>  setMouseTracking(<span class="keyword">true</span>);  <span class="comment">// for updating the tooltip</span></div>
<div class="line"><span class="lineno">  290</span>  setFocusPolicy(Qt::NoFocus);</div>
<div class="line"><span class="lineno">  291</span>}</div>
<div class="ttc" id="aclass_spreadsheet_1_1_column_panel_html"><div class="ttname"><a href="class_spreadsheet_1_1_column_panel.html">Spreadsheet::ColumnPanel</a></div><div class="ttdef"><b>Definition:</b> spreadsheetviewer.h:202</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acdf6bcf18f7beb875b3a2b9df3fe5984" name="acdf6bcf18f7beb875b3a2b9df3fe5984"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdf6bcf18f7beb875b3a2b9df3fe5984">&#9670;&nbsp;</a></span>contextMenuEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FunctionSheetColumnHeadViewer::contextMenuEvent </td>
          <td>(</td>
          <td class="paramtype">QContextMenuEvent *&#160;</td>
          <td class="paramname"><em>ce</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  552</span>                                                                          {</div>
<div class="line"><span class="lineno">  553</span>  <span class="comment">// First, select column under cursor</span></div>
<div class="line"><span class="lineno">  554</span>  <span class="keyword">const</span> QPoint &amp;pos = ce-&gt;pos();</div>
<div class="line"><span class="lineno">  555</span>  <span class="keywordtype">int</span> cursorCol     = getViewer()-&gt;<a class="code hl_function" href="class_spreadsheet_viewer.html#abdf7d777f22954ef57404d3edde69a16">xyToPosition</a>(pos).layer();</div>
<div class="line"><span class="lineno">  556</span> </div>
<div class="line"><span class="lineno">  557</span>  <span class="keywordflow">if</span> (cursorCol &lt; 0 || cursorCol &gt;= m_sheet-&gt;getChannelCount()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  558</span> </div>
<div class="line"><span class="lineno">  559</span>  <a class="code hl_class" href="class_function_tree_model_1_1_channel.html">FunctionTreeModel::Channel</a> *channel = m_sheet-&gt;getChannel(cursorCol);</div>
<div class="line"><span class="lineno">  560</span>  <span class="keywordflow">if</span> (!channel) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  561</span> </div>
<div class="line"><span class="lineno">  562</span>  <span class="comment">// Ok, now let&#39;s summon a context menu with appropriate options</span></div>
<div class="line"><span class="lineno">  563</span>  <a class="code hl_class" href="class_function_viewer.html">FunctionViewer</a> *fv = m_sheet-&gt;getViewer();</div>
<div class="line"><span class="lineno">  564</span>  <span class="keywordflow">if</span> (!fv) {</div>
<div class="line"><span class="lineno">  565</span>    assert(fv);</div>
<div class="line"><span class="lineno">  566</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  567</span>  }</div>
<div class="line"><span class="lineno">  568</span> </div>
<div class="line"><span class="lineno">  569</span>  <span class="keyword">const</span> QPoint &amp;globalPos = mapToGlobal(pos);</div>
<div class="line"><span class="lineno">  570</span> </div>
<div class="line"><span class="lineno">  571</span>  <span class="keywordflow">if</span> (pos.y() &gt;= cChannelNameY)</div>
<div class="line"><span class="lineno">  572</span>    fv-&gt;openContextMenu(channel, globalPos);</div>
<div class="line"><span class="lineno">  573</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  574</span>    <a class="code hl_class" href="class_function_tree_model_1_1_channel_group.html">FunctionTreeModel::ChannelGroup</a> *group = channel-&gt;getChannelGroup();</div>
<div class="line"><span class="lineno">  575</span> </div>
<div class="line"><span class="lineno">  576</span>    <span class="comment">// In this case, commands are different from the tree view. Rather than</span></div>
<div class="line"><span class="lineno">  577</span>    <span class="comment">// showing in the tree,</span></div>
<div class="line"><span class="lineno">  578</span>    <span class="comment">// channels get ACTIVATED</span></div>
<div class="line"><span class="lineno">  579</span>    QMenu menu;</div>
<div class="line"><span class="lineno">  580</span> </div>
<div class="line"><span class="lineno">  581</span>    QAction showAnimatedOnly(FunctionTreeView::tr(<span class="stringliteral">&quot;Show Animated Only&quot;</span>), 0);</div>
<div class="line"><span class="lineno">  582</span>    QAction showAll(FunctionTreeView::tr(<span class="stringliteral">&quot;Show All&quot;</span>), 0);</div>
<div class="line"><span class="lineno">  583</span>    QAction hideSelected(FunctionTreeView::tr(<span class="stringliteral">&quot;Hide Selected&quot;</span>), 0);</div>
<div class="line"><span class="lineno">  584</span>    menu.addAction(&amp;showAnimatedOnly);</div>
<div class="line"><span class="lineno">  585</span>    menu.addAction(&amp;showAll);</div>
<div class="line"><span class="lineno">  586</span>    menu.addAction(&amp;hideSelected);</div>
<div class="line"><span class="lineno">  587</span> </div>
<div class="line"><span class="lineno">  588</span>    <span class="comment">// execute menu</span></div>
<div class="line"><span class="lineno">  589</span>    QAction *action = menu.exec(globalPos);</div>
<div class="line"><span class="lineno">  590</span> </div>
<div class="line"><span class="lineno">  591</span>    <span class="comment">// Process action</span></div>
<div class="line"><span class="lineno">  592</span>    <span class="keywordflow">if</span> (action == &amp;showAll) {</div>
<div class="line"><span class="lineno">  593</span>      <span class="keywordtype">int</span> c, cCount = group-&gt;getChildCount();</div>
<div class="line"><span class="lineno">  594</span>      <span class="keywordflow">for</span> (c = 0; c != cCount; ++c) {</div>
<div class="line"><span class="lineno">  595</span>        <a class="code hl_class" href="class_function_tree_model_1_1_channel.html">FunctionTreeModel::Channel</a> *channel =</div>
<div class="line"><span class="lineno">  596</span>            <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_function_tree_model_1_1_channel.html">FunctionTreeModel::Channel</a> *<span class="keyword">&gt;</span>(group-&gt;getChild(c));</div>
<div class="line"><span class="lineno">  597</span>        <span class="keywordflow">if</span> (channel &amp;&amp; !channel-&gt;isHidden()) channel-&gt;setIsActive(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  598</span>      }</div>
<div class="line"><span class="lineno">  599</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (action == &amp;showAnimatedOnly) {</div>
<div class="line"><span class="lineno">  600</span>      <span class="keywordtype">int</span> c, cCount = group-&gt;getChildCount();</div>
<div class="line"><span class="lineno">  601</span>      <span class="keywordflow">for</span> (c = 0; c != cCount; ++c) {</div>
<div class="line"><span class="lineno">  602</span>        <a class="code hl_class" href="class_function_tree_model_1_1_channel.html">FunctionTreeModel::Channel</a> *channel =</div>
<div class="line"><span class="lineno">  603</span>            <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_function_tree_model_1_1_channel.html">FunctionTreeModel::Channel</a> *<span class="keyword">&gt;</span>(group-&gt;getChild(c));</div>
<div class="line"><span class="lineno">  604</span>        <span class="keywordflow">if</span> (channel &amp;&amp; !channel-&gt;isHidden())</div>
<div class="line"><span class="lineno">  605</span>          channel-&gt;setIsActive(channel-&gt;isAnimated());</div>
<div class="line"><span class="lineno">  606</span>      }</div>
<div class="line"><span class="lineno">  607</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (action == &amp;hideSelected) {</div>
<div class="line"><span class="lineno">  608</span>      QRect selectedCells = getViewer()-&gt;getSelectedCells();</div>
<div class="line"><span class="lineno">  609</span>      <span class="comment">// hide the selected columns from the right to the left</span></div>
<div class="line"><span class="lineno">  610</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> col = selectedCells.right(); col &gt;= selectedCells.left();</div>
<div class="line"><span class="lineno">  611</span>           col--) {</div>
<div class="line"><span class="lineno">  612</span>        <a class="code hl_class" href="class_function_tree_model_1_1_channel.html">FunctionTreeModel::Channel</a> *chan = m_sheet-&gt;getChannel(col);</div>
<div class="line"><span class="lineno">  613</span>        <span class="keywordflow">if</span> (chan) chan-&gt;setIsActive(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  614</span>      }</div>
<div class="line"><span class="lineno">  615</span>      <span class="comment">// clear cell selection</span></div>
<div class="line"><span class="lineno">  616</span>      getViewer()-&gt;selectCells(QRect());</div>
<div class="line"><span class="lineno">  617</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  618</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  619</span> </div>
<div class="line"><span class="lineno">  620</span>    fv-&gt;update();</div>
<div class="line"><span class="lineno">  621</span>  }</div>
<div class="line"><span class="lineno">  622</span>}</div>
<div class="ttc" id="aclass_function_tree_model_1_1_channel_group_html"><div class="ttname"><a href="class_function_tree_model_1_1_channel_group.html">FunctionTreeModel::ChannelGroup</a></div><div class="ttdoc">The model item representing a channels group.</div><div class="ttdef"><b>Definition:</b> functiontreeviewer.h:95</div></div>
<div class="ttc" id="aclass_function_tree_model_1_1_channel_html"><div class="ttname"><a href="class_function_tree_model_1_1_channel.html">FunctionTreeModel::Channel</a></div><div class="ttdoc">The model item representing a channel (i.e. a real-valued function).</div><div class="ttdef"><b>Definition:</b> functiontreeviewer.h:161</div></div>
<div class="ttc" id="aclass_function_viewer_html"><div class="ttname"><a href="class_function_viewer.html">FunctionViewer</a></div><div class="ttdef"><b>Definition:</b> functionviewer.h:70</div></div>
<div class="ttc" id="aclass_spreadsheet_viewer_html_abdf7d777f22954ef57404d3edde69a16"><div class="ttname"><a href="class_spreadsheet_viewer.html#abdf7d777f22954ef57404d3edde69a16">SpreadsheetViewer::xyToPosition</a></div><div class="ttdeci">CellPosition xyToPosition(const QPoint &amp;point) const</div><div class="ttdef"><b>Definition:</b> spreadsheetviewer.cpp:783</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae2aebb12ea53cf6b32955e1444c31917" name="ae2aebb12ea53cf6b32955e1444c31917"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2aebb12ea53cf6b32955e1444c31917">&#9670;&nbsp;</a></span>mouseMoveEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FunctionSheetColumnHeadViewer::mouseMoveEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >update tooltips </p>
<div class="fragment"><div class="line"><span class="lineno">  432</span>                                                                 {</div>
<div class="line"><span class="lineno">  433</span>  <span class="keywordflow">if</span> ((e-&gt;buttons() &amp; Qt::MidButton) &amp;&amp; m_draggingChannel &amp;&amp;</div>
<div class="line"><span class="lineno">  434</span>      (e-&gt;pos() - m_dragStartPosition).manhattanLength() &gt;=</div>
<div class="line"><span class="lineno">  435</span>          QApplication::startDragDistance()) {</div>
<div class="line"><span class="lineno">  436</span>    QDrag *drag         = <span class="keyword">new</span> QDrag(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  437</span>    QMimeData *mimeData = <span class="keyword">new</span> QMimeData;</div>
<div class="line"><span class="lineno">  438</span>    mimeData-&gt;setText(m_draggingChannel-&gt;<a class="code hl_function" href="class_function_tree_model_1_1_channel.html#a7d4b2a9a71e40bf4377663d95e9eab73">getExprRefName</a>());</div>
<div class="line"><span class="lineno">  439</span>    drag-&gt;setMimeData(mimeData);</div>
<div class="line"><span class="lineno">  440</span>    <span class="keyword">static</span> <span class="keyword">const</span> QPixmap cursorPixmap(<span class="stringliteral">&quot;:Resources/dragcursor_exp_text.png&quot;</span>);</div>
<div class="line"><span class="lineno">  441</span>    drag-&gt;setDragCursor(cursorPixmap, Qt::MoveAction);</div>
<div class="line"><span class="lineno">  442</span>    Qt::DropAction dropAction = drag-&gt;exec();</div>
<div class="line"><span class="lineno">  443</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  444</span>  }</div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>  <span class="comment">// get the column under the cursor</span></div>
<div class="line"><span class="lineno">  447</span>  <span class="keywordtype">int</span> col = getViewer()-&gt;<a class="code hl_function" href="class_spreadsheet_viewer.html#abdf7d777f22954ef57404d3edde69a16">xyToPosition</a>(e-&gt;pos()).layer();</div>
<div class="line"><span class="lineno">  448</span>  <a class="code hl_class" href="class_function_tree_model_1_1_channel.html">FunctionTreeModel::Channel</a> *channel = m_sheet-&gt;getChannel(col);</div>
<div class="line"><span class="lineno">  449</span>  <span class="keywordflow">if</span> (!channel) {</div>
<div class="line"><span class="lineno">  450</span>    setToolTip(QString(<span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><span class="lineno">  451</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  452</span>    QString tooltip = channel-&gt;<a class="code hl_function" href="class_function_tree_model_1_1_channel.html#a7d4b2a9a71e40bf4377663d95e9eab73">getExprRefName</a>();</div>
<div class="line"><span class="lineno">  453</span>    <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh    = m_sheet-&gt;getViewer()-&gt;getXsheetHandle()-&gt;getXsheet();</div>
<div class="line"><span class="lineno">  454</span>    <span class="keywordflow">if</span> (xsh-&gt;isReferenceManagementIgnored(channel-&gt;getParam()))</div>
<div class="line"><span class="lineno">  455</span>      tooltip +=</div>
<div class="line"><span class="lineno">  456</span>          <span class="stringliteral">&quot;\n&quot;</span> + tr(<span class="stringliteral">&quot;Some key(s) in this parameter loses original reference in &quot;</span></div>
<div class="line"><span class="lineno">  457</span>                    <span class="stringliteral">&quot;expression.\nManually changing any keyframe will clear &quot;</span></div>
<div class="line"><span class="lineno">  458</span>                    <span class="stringliteral">&quot;the warning.&quot;</span>);</div>
<div class="line"><span class="lineno">  459</span> </div>
<div class="line"><span class="lineno">  460</span>    setToolTip(tooltip);</div>
<div class="line"><span class="lineno">  461</span>  }</div>
<div class="line"><span class="lineno">  462</span> </div>
<div class="line"><span class="lineno">  463</span>  <span class="comment">// modify selected channel by left dragging</span></div>
<div class="line"><span class="lineno">  464</span>  <span class="keywordflow">if</span> (m_clickedColumn &gt;= 0 &amp;&amp; channel &amp;&amp; e-&gt;buttons() &amp; Qt::LeftButton) {</div>
<div class="line"><span class="lineno">  465</span>    <span class="keywordtype">int</span> fromC      = std::min(m_clickedColumn, col);</div>
<div class="line"><span class="lineno">  466</span>    <span class="keywordtype">int</span> toC        = std::max(m_clickedColumn, col);</div>
<div class="line"><span class="lineno">  467</span>    <span class="keywordtype">int</span> lastKeyPos = 0;</div>
<div class="line"><span class="lineno">  468</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = fromC; c &lt;= toC; c++) {</div>
<div class="line"><span class="lineno">  469</span>      <a class="code hl_class" href="class_function_tree_model_1_1_channel.html">FunctionTreeModel::Channel</a> *tmpChan = m_sheet-&gt;getChannel(c);</div>
<div class="line"><span class="lineno">  470</span>      <span class="keywordflow">if</span> (!tmpChan) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  471</span>      std::set&lt;double&gt; frames;</div>
<div class="line"><span class="lineno">  472</span>      tmpChan-&gt;getParam()-&gt;<a class="code hl_function" href="class_t_double_param.html#a18e0a8f08eb53c18255c6f398c073c96">getKeyframes</a>(frames);</div>
<div class="line"><span class="lineno">  473</span>      <span class="keywordflow">if</span> (!frames.empty())</div>
<div class="line"><span class="lineno">  474</span>        lastKeyPos = std::max(lastKeyPos, (<span class="keywordtype">int</span>)*frames.rbegin());</div>
<div class="line"><span class="lineno">  475</span>    }</div>
<div class="line"><span class="lineno">  476</span>    QRect rect(std::min(m_clickedColumn, col), 0,</div>
<div class="line"><span class="lineno">  477</span>               std::abs(col - m_clickedColumn) + 1, lastKeyPos + 1);</div>
<div class="line"><span class="lineno">  478</span>    getViewer()-&gt;selectCells(rect);</div>
<div class="line"><span class="lineno">  479</span>  }</div>
<div class="line"><span class="lineno">  480</span>}</div>
<div class="ttc" id="aclass_function_tree_model_1_1_channel_html_a7d4b2a9a71e40bf4377663d95e9eab73"><div class="ttname"><a href="class_function_tree_model_1_1_channel.html#a7d4b2a9a71e40bf4377663d95e9eab73">FunctionTreeModel::Channel::getExprRefName</a></div><div class="ttdeci">QString getExprRefName() const</div><div class="ttdef"><b>Definition:</b> functiontreeviewer.cpp:682</div></div>
<div class="ttc" id="aclass_t_double_param_html_a18e0a8f08eb53c18255c6f398c073c96"><div class="ttname"><a href="class_t_double_param.html#a18e0a8f08eb53c18255c6f398c073c96">TDoubleParam::getKeyframes</a></div><div class="ttdeci">void getKeyframes(std::set&lt; double &gt; &amp;frames) const override</div><div class="ttdef"><b>Definition:</b> tdoubleparam.cpp:870</div></div>
<div class="ttc" id="aclass_t_xsheet_html"><div class="ttname"><a href="class_t_xsheet.html">TXsheet</a></div><div class="ttdef"><b>Definition:</b> txsheet.h:132</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00682">FunctionTreeModel::Channel::getExprRefName()</a>, <a class="el" href="#l00870">TDoubleParam::getKeyframes()</a>, and <a class="el" href="#l00783">SpreadsheetViewer::xyToPosition()</a>.</p>

</div>
</div>
<a id="a45ba8bc0dad2353655fda630c5541b46" name="a45ba8bc0dad2353655fda630c5541b46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45ba8bc0dad2353655fda630c5541b46">&#9670;&nbsp;</a></span>mousePressEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FunctionSheetColumnHeadViewer::mousePressEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  484</span>                                                                  {</div>
<div class="line"><span class="lineno">  485</span>  QPoint pos                          = e-&gt;pos();</div>
<div class="line"><span class="lineno">  486</span>  <span class="keywordtype">int</span> currentC                        = getViewer()-&gt;<a class="code hl_function" href="class_spreadsheet_viewer.html#abdf7d777f22954ef57404d3edde69a16">xyToPosition</a>(pos).layer();</div>
<div class="line"><span class="lineno">  487</span>  <a class="code hl_class" href="class_function_tree_model_1_1_channel.html">FunctionTreeModel::Channel</a> *channel = m_sheet-&gt;getChannel(currentC);</div>
<div class="line"><span class="lineno">  488</span>  <span class="keywordflow">if</span> (!channel) {</div>
<div class="line"><span class="lineno">  489</span>    m_clickedColumn = -1;</div>
<div class="line"><span class="lineno">  490</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  491</span>  }</div>
<div class="line"><span class="lineno">  492</span> </div>
<div class="line"><span class="lineno">  493</span>  <span class="keywordflow">if</span> (e-&gt;button() == Qt::MidButton) {</div>
<div class="line"><span class="lineno">  494</span>    m_draggingChannel   = channel;</div>
<div class="line"><span class="lineno">  495</span>    m_dragStartPosition = e-&gt;pos();</div>
<div class="line"><span class="lineno">  496</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  497</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  498</span>    channel-&gt;setIsCurrent(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  499</span>  m_draggingChannel = 0;</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>  <span class="keywordflow">if</span> (e-&gt;button() == Qt::LeftButton) {</div>
<div class="line"><span class="lineno">  502</span>    <span class="keywordtype">int</span> lastKeyPos = 0;</div>
<div class="line"><span class="lineno">  503</span>    <span class="comment">// if the current selection does not contain the first cell in m_firstColumn</span></div>
<div class="line"><span class="lineno">  504</span>    <span class="comment">// then we assume that the selection has been modified and treat shift+click</span></div>
<div class="line"><span class="lineno">  505</span>    <span class="comment">// as normal click.</span></div>
<div class="line"><span class="lineno">  506</span>    <span class="keywordflow">if</span> (getViewer()-&gt;getSelectedCells().contains(m_clickedColumn, 0) &amp;&amp;</div>
<div class="line"><span class="lineno">  507</span>        (e-&gt;modifiers() &amp; Qt::ShiftModifier)) {</div>
<div class="line"><span class="lineno">  508</span>      <span class="keywordtype">int</span> fromC = std::min(m_clickedColumn, currentC);</div>
<div class="line"><span class="lineno">  509</span>      <span class="keywordtype">int</span> toC   = std::max(m_clickedColumn, currentC);</div>
<div class="line"><span class="lineno">  510</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = fromC; c &lt;= toC; c++) {</div>
<div class="line"><span class="lineno">  511</span>        <a class="code hl_class" href="class_function_tree_model_1_1_channel.html">FunctionTreeModel::Channel</a> *tmpChan = m_sheet-&gt;getChannel(c);</div>
<div class="line"><span class="lineno">  512</span>        <span class="keywordflow">if</span> (!tmpChan) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  513</span>        std::set&lt;double&gt; frames;</div>
<div class="line"><span class="lineno">  514</span>        tmpChan-&gt;getParam()-&gt;<a class="code hl_function" href="class_t_double_param.html#a18e0a8f08eb53c18255c6f398c073c96">getKeyframes</a>(frames);</div>
<div class="line"><span class="lineno">  515</span>        <span class="keywordflow">if</span> (!frames.empty())</div>
<div class="line"><span class="lineno">  516</span>          lastKeyPos = std::max(lastKeyPos, (<span class="keywordtype">int</span>)*frames.rbegin());</div>
<div class="line"><span class="lineno">  517</span>      }</div>
<div class="line"><span class="lineno">  518</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  519</span>      <span class="comment">// Open folder</span></div>
<div class="line"><span class="lineno">  520</span>      <a class="code hl_class" href="class_function_tree_model_1_1_channel_group.html">FunctionTreeModel::ChannelGroup</a> *channelGroup =</div>
<div class="line"><span class="lineno">  521</span>          channel-&gt;getChannelGroup();</div>
<div class="line"><span class="lineno">  522</span>      <span class="keywordflow">if</span> (!channelGroup-&gt;isOpen())</div>
<div class="line"><span class="lineno">  523</span>        channelGroup-&gt;getModel()-&gt;setExpandedItem(channelGroup-&gt;createIndex(),</div>
<div class="line"><span class="lineno">  524</span>                                                  <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  525</span>      <span class="comment">// Select all segment</span></div>
<div class="line"><span class="lineno">  526</span>      std::set&lt;double&gt; frames;</div>
<div class="line"><span class="lineno">  527</span>      channel-&gt;getParam()-&gt;<a class="code hl_function" href="class_t_double_param.html#a18e0a8f08eb53c18255c6f398c073c96">getKeyframes</a>(frames);</div>
<div class="line"><span class="lineno">  528</span>      <span class="keywordflow">if</span> (!frames.empty()) lastKeyPos = (int)*frames.rbegin();</div>
<div class="line"><span class="lineno">  529</span>      m_clickedColumn = currentC;</div>
<div class="line"><span class="lineno">  530</span>    }</div>
<div class="line"><span class="lineno">  531</span>    QRect rect(std::min(m_clickedColumn, currentC), 0,</div>
<div class="line"><span class="lineno">  532</span>               std::abs(currentC - m_clickedColumn) + 1, lastKeyPos + 1);</div>
<div class="line"><span class="lineno">  533</span> </div>
<div class="line"><span class="lineno">  534</span>    getViewer()-&gt;selectCells(rect);</div>
<div class="line"><span class="lineno">  535</span>  }</div>
<div class="line"><span class="lineno">  536</span>  <span class="comment">// Switch selection before opening the context menu</span></div>
<div class="line"><span class="lineno">  537</span>  <span class="comment">// if the clicked column is out of the selection</span></div>
<div class="line"><span class="lineno">  538</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e-&gt;button() == Qt::RightButton) {</div>
<div class="line"><span class="lineno">  539</span>    QRect selectedCell = getViewer()-&gt;getSelectedCells();</div>
<div class="line"><span class="lineno">  540</span>    <span class="keywordflow">if</span> (selectedCell.left() &gt; currentC || selectedCell.right() &lt; currentC) {</div>
<div class="line"><span class="lineno">  541</span>      <span class="keywordtype">int</span> lastKeyPos = 0;</div>
<div class="line"><span class="lineno">  542</span>      std::set&lt;double&gt; frames;</div>
<div class="line"><span class="lineno">  543</span>      channel-&gt;getParam()-&gt;<a class="code hl_function" href="class_t_double_param.html#a18e0a8f08eb53c18255c6f398c073c96">getKeyframes</a>(frames);</div>
<div class="line"><span class="lineno">  544</span>      <span class="keywordflow">if</span> (!frames.empty()) lastKeyPos = (int)*frames.rbegin();</div>
<div class="line"><span class="lineno">  545</span>      getViewer()-&gt;selectCells(QRect(currentC, 0, 1, lastKeyPos + 1));</div>
<div class="line"><span class="lineno">  546</span>    }</div>
<div class="line"><span class="lineno">  547</span>  }</div>
<div class="line"><span class="lineno">  548</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a633b757468fb9ce985d582bfc2916238" name="a633b757468fb9ce985d582bfc2916238"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a633b757468fb9ce985d582bfc2916238">&#9670;&nbsp;</a></span>paintEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FunctionSheetColumnHeadViewer::paintEvent </td>
          <td>(</td>
          <td class="paramtype">QPaintEvent *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  295</span>                                                             {</div>
<div class="line"><span class="lineno">  296</span>  QPainter painter(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span>  QRect toBeUpdated = e-&gt;rect();</div>
<div class="line"><span class="lineno">  299</span>  painter.setClipRect(toBeUpdated);</div>
<div class="line"><span class="lineno">  300</span> </div>
<div class="line"><span class="lineno">  301</span>  <span class="comment">// visible columns range</span></div>
<div class="line"><span class="lineno">  302</span>  <a class="code hl_class" href="class_cell_range.html">CellRange</a> visible = getViewer()-&gt;xyRectToRange(toBeUpdated);</div>
<div class="line"><span class="lineno">  303</span>  <span class="keywordtype">int</span> c0            = visible.from().layer();</div>
<div class="line"><span class="lineno">  304</span>  <span class="keywordtype">int</span> c1            = visible.to().layer();</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>  <span class="keywordflow">if</span> (c0 &gt; c1) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span>  <span class="keywordtype">int</span> n = c1 - c0 + 1 + 2;</div>
<div class="line"><span class="lineno">  309</span> </div>
<div class="line"><span class="lineno">  310</span>  <a class="code hl_class" href="class_function_tree_model_1_1_channel_group.html">FunctionTreeModel::ChannelGroup</a> *currentGroup = 0;</div>
<div class="line"><span class="lineno">  311</span> </div>
<div class="line"><span class="lineno">  312</span>  <span class="comment">/*--- Display range + right and left 1 column range ChannelGroup. If there is</span></div>
<div class="line"><span class="lineno">  313</span><span class="comment">   * none, put 0</span></div>
<div class="line"><span class="lineno">  314</span><span class="comment">   * ---*/</span></div>
<div class="line"><span class="lineno">  315</span>  std::vector&lt;FunctionTreeModel::ChannelGroup *&gt; channelGroups(n);</div>
<div class="line"><span class="lineno">  316</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; ++i) {</div>
<div class="line"><span class="lineno">  317</span>    channelGroups[i] = 0;</div>
<div class="line"><span class="lineno">  318</span> </div>
<div class="line"><span class="lineno">  319</span>    <span class="keywordtype">int</span> c = c0 - 1 + i;</div>
<div class="line"><span class="lineno">  320</span>    <span class="keywordflow">if</span> (c &lt; 0) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  321</span> </div>
<div class="line"><span class="lineno">  322</span>    <a class="code hl_class" href="class_function_tree_model_1_1_channel.html">FunctionTreeModel::Channel</a> *channel = m_sheet-&gt;getChannel(c);</div>
<div class="line"><span class="lineno">  323</span>    <span class="keywordflow">if</span> (!channel) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>    channelGroups[i] = channel-&gt;getChannelGroup();</div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordflow">if</span> (!currentGroup &amp;&amp; channel-&gt;isCurrent()) currentGroup = channelGroups[i];</div>
<div class="line"><span class="lineno">  327</span>  }</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span>  <span class="keywordtype">int</span> y0 = 0;</div>
<div class="line"><span class="lineno">  330</span>  <span class="keywordtype">int</span> y1 = 17;  <span class="comment">// needs work</span></div>
<div class="line"><span class="lineno">  331</span>  <span class="keywordtype">int</span> y3 = 53;</div>
<div class="line"><span class="lineno">  332</span>  <span class="keywordflow">if</span> (m_sheet-&gt;isSmallHeader()) y3 = 34;</div>
<div class="line"><span class="lineno">  333</span> </div>
<div class="line"><span class="lineno">  334</span>  <span class="comment">/*--- Fill header with background color ---*/</span></div>
<div class="line"><span class="lineno">  335</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = c0; c &lt;= c1; c++) {</div>
<div class="line"><span class="lineno">  336</span>    <a class="code hl_class" href="class_function_tree_model_1_1_channel.html">FunctionTreeModel::Channel</a> *channel = m_sheet-&gt;getChannel(c);</div>
<div class="line"><span class="lineno">  337</span>    <span class="keywordflow">if</span> (!channel) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  338</span>    <span class="keywordtype">int</span> x0 = getViewer()-&gt;columnToX(c);</div>
<div class="line"><span class="lineno">  339</span>    <span class="keywordtype">int</span> x1 = getViewer()-&gt;columnToX(c + 1) - 1;</div>
<div class="line"><span class="lineno">  340</span>    <span class="comment">// Column Width</span></div>
<div class="line"><span class="lineno">  341</span>    <span class="keywordtype">int</span> width = x1 - x0 + 1;</div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span>    painter.fillRect(x0, y0, width, y3 - y0, getViewer()-&gt;getBGColor());</div>
<div class="line"><span class="lineno">  344</span>  }</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = c0; c &lt;= c1; ++c) {</div>
<div class="line"><span class="lineno">  347</span>    <a class="code hl_class" href="class_function_tree_model_1_1_channel.html">FunctionTreeModel::Channel</a> *channel = m_sheet-&gt;getChannel(c);</div>
<div class="line"><span class="lineno">  348</span>    <span class="keywordflow">if</span> (!channel) {</div>
<div class="line"><span class="lineno">  349</span>      <span class="keywordflow">if</span> (c != c0) {</div>
<div class="line"><span class="lineno">  350</span>        <span class="comment">// draw &quot;the end&quot; border</span></div>
<div class="line"><span class="lineno">  351</span>        <span class="keywordtype">int</span> x0 = getViewer()-&gt;columnToX(c);</div>
<div class="line"><span class="lineno">  352</span>        painter.setPen(getViewer()-&gt;getColumnHeaderBorderColor());</div>
<div class="line"><span class="lineno">  353</span>        painter.drawLine(x0, y0, x0, y3);</div>
<div class="line"><span class="lineno">  354</span>      }</div>
<div class="line"><span class="lineno">  355</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  356</span>    }</div>
<div class="line"><span class="lineno">  357</span>    <span class="keywordtype">int</span> i = c - c0 + 1;</div>
<div class="line"><span class="lineno">  358</span>    <span class="comment">/*---- Channel Column of the current Column and the preceding and following</span></div>
<div class="line"><span class="lineno">  359</span><span class="comment">     * Columns ---*/</span></div>
<div class="line"><span class="lineno">  360</span>    <a class="code hl_class" href="class_function_tree_model_1_1_channel_group.html">FunctionTreeModel::ChannelGroup</a> *prevGroup = channelGroups[c - c0],</div>
<div class="line"><span class="lineno">  361</span>                                    *group     = channelGroups[c - c0 + 1],</div>
<div class="line"><span class="lineno">  362</span>                                    *nextGroup = channelGroups[c - c0 + 2];</div>
<div class="line"><span class="lineno">  363</span> </div>
<div class="line"><span class="lineno">  364</span>    <span class="comment">/*---- If the group is different from the before and after, flags are set</span></div>
<div class="line"><span class="lineno">  365</span><span class="comment">     * respectively ---*/</span></div>
<div class="line"><span class="lineno">  366</span>    <span class="keywordtype">bool</span> firstGroupColumn = prevGroup != group;</div>
<div class="line"><span class="lineno">  367</span>    <span class="keywordtype">bool</span> lastGroupColumn  = nextGroup != group;</div>
<div class="line"><span class="lineno">  368</span> </div>
<div class="line"><span class="lineno">  369</span>    <span class="comment">/*--- The left and right coordinates of the current column ---*/</span></div>
<div class="line"><span class="lineno">  370</span>    <span class="keywordtype">int</span> x0 = getViewer()-&gt;columnToX(c);</div>
<div class="line"><span class="lineno">  371</span>    <span class="keywordtype">int</span> x1 = getViewer()-&gt;columnToX(c + 1) - 1;</div>
<div class="line"><span class="lineno">  372</span>    <span class="comment">// Column width</span></div>
<div class="line"><span class="lineno">  373</span>    <span class="keywordtype">int</span> width = x1 - x0 + 1;</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span>    QRect selectedRect = m_sheet-&gt;getSelectedCells();</div>
<div class="line"><span class="lineno">  376</span>    <span class="keywordtype">bool</span> isSelected =</div>
<div class="line"><span class="lineno">  377</span>        (selectedRect.left() &lt;= c &amp;&amp; c &lt;= selectedRect.right()) ? <span class="keyword">true</span> : <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>    <span class="comment">// paint with light color if selected</span></div>
<div class="line"><span class="lineno">  380</span>    <span class="keywordflow">if</span> (isSelected)</div>
<div class="line"><span class="lineno">  381</span>      painter.fillRect(x0, y1, width, y3 - y1,</div>
<div class="line"><span class="lineno">  382</span>                       getViewer()-&gt;getCurrentRowBgColor());</div>
<div class="line"><span class="lineno">  383</span> </div>
<div class="line"><span class="lineno">  384</span>    <span class="comment">// draw horizonntal lines</span></div>
<div class="line"><span class="lineno">  385</span>    painter.setPen(QPen(getViewer()-&gt;getColumnHeaderBorderColor(), 3));</div>
<div class="line"><span class="lineno">  386</span>    painter.drawLine(x0, y0, x1, y0);</div>
<div class="line"><span class="lineno">  387</span>    painter.setPen(getViewer()-&gt;getColumnHeaderBorderColor());</div>
<div class="line"><span class="lineno">  388</span>    painter.drawLine(x0, y1, x1, y1);</div>
<div class="line"><span class="lineno">  389</span> </div>
<div class="line"><span class="lineno">  390</span>    <span class="comment">// draw vertical bar</span></div>
<div class="line"><span class="lineno">  391</span>    painter.fillRect(x0, y1, 6, y3 - y1,</div>
<div class="line"><span class="lineno">  392</span>                     getViewer()-&gt;getColumnHeaderBorderColor());</div>
<div class="line"><span class="lineno">  393</span>    <span class="keywordflow">if</span> (firstGroupColumn)</div>
<div class="line"><span class="lineno">  394</span>      painter.fillRect(x0, y0, 6, y1 - y0,</div>
<div class="line"><span class="lineno">  395</span>                       getViewer()-&gt;getColumnHeaderBorderColor());</div>
<div class="line"><span class="lineno">  396</span> </div>
<div class="line"><span class="lineno">  397</span>    <span class="comment">// channel name</span></div>
<div class="line"><span class="lineno">  398</span>    painter.setPen(getViewer()-&gt;getTextColor());</div>
<div class="line"><span class="lineno">  399</span>    <span class="keywordflow">if</span> (channel-&gt;isCurrent())</div>
<div class="line"><span class="lineno">  400</span>      painter.setPen(m_sheet-&gt;getViewer()-&gt;getCurrentTextColor());</div>
<div class="line"><span class="lineno">  401</span> </div>
<div class="line"><span class="lineno">  402</span>    QString text = channel-&gt;getShortName();</div>
<div class="line"><span class="lineno">  403</span>    <span class="keywordtype">int</span> d        = 8;</div>
<div class="line"><span class="lineno">  404</span>    <span class="keywordtype">int</span> flags    = Qt::AlignLeft | Qt::AlignVCenter;</div>
<div class="line"><span class="lineno">  405</span>    <span class="keywordflow">if</span> (!m_sheet-&gt;isSmallHeader()) flags |= Qt::TextWrapAnywhere;</div>
<div class="line"><span class="lineno">  406</span>    painter.drawText(x0 + d, y1, width - d, y3 - y1 + 1, flags, text);</div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span>    <span class="comment">// warning of losing expression reference</span></div>
<div class="line"><span class="lineno">  409</span>    <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh = m_sheet-&gt;getViewer()-&gt;getXsheetHandle()-&gt;getXsheet();</div>
<div class="line"><span class="lineno">  410</span>    <span class="keywordflow">if</span> (xsh-&gt;isReferenceManagementIgnored(channel-&gt;getParam())) {</div>
<div class="line"><span class="lineno">  411</span>      <span class="keyword">static</span> QIcon paramIgnoredIcon(<span class="stringliteral">&quot;:Resources/paramignored_on.svg&quot;</span>);</div>
<div class="line"><span class="lineno">  412</span>      painter.drawPixmap(QPoint(x0 + 30, y1 + 20),</div>
<div class="line"><span class="lineno">  413</span>                         paramIgnoredIcon.pixmap(21, 17));</div>
<div class="line"><span class="lineno">  414</span>    }</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span>    <span class="comment">// group name</span></div>
<div class="line"><span class="lineno">  417</span>    <span class="keywordflow">if</span> (firstGroupColumn) {</div>
<div class="line"><span class="lineno">  418</span>      <span class="keywordtype">int</span> tmpwidth = (lastGroupColumn) ? width : width * 2;</div>
<div class="line"><span class="lineno">  419</span>      painter.setPen(getViewer()-&gt;getTextColor());</div>
<div class="line"><span class="lineno">  420</span>      <span class="keywordflow">if</span> (group == currentGroup)</div>
<div class="line"><span class="lineno">  421</span>        painter.setPen(m_sheet-&gt;getViewer()-&gt;getCurrentTextColor());</div>
<div class="line"><span class="lineno">  422</span>      text = group-&gt;getShortName();</div>
<div class="line"><span class="lineno">  423</span>      painter.drawText(x0 + d, y0, tmpwidth - d, y1 - y0 + 1,</div>
<div class="line"><span class="lineno">  424</span>                       Qt::AlignLeft | Qt::AlignVCenter, text);</div>
<div class="line"><span class="lineno">  425</span>    }</div>
<div class="line"><span class="lineno">  426</span>  }</div>
<div class="line"><span class="lineno">  427</span>}</div>
<div class="ttc" id="aclass_cell_range_html"><div class="ttname"><a href="class_cell_range.html">CellRange</a></div><div class="ttdef"><b>Definition:</b> cellposition.h:40</div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>E:/opentoonz/toonz/sources/include/toonzqt/<a class="el" href="">functionsheet.h</a></li>
<li>E:/opentoonz/toonz/sources/toonzqt/<a class="el" href="">functionsheet.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
