<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: SceneViewer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-slots">Public Slots</a> &#124;
<a href="#signals">Signals</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="class_scene_viewer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">SceneViewer Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for SceneViewer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_scene_viewer.png" usemap="#SceneViewer_map" alt=""/>
  <map id="SceneViewer_map" name="SceneViewer_map">
<area href="class_g_l_widget_for_high_dpi.html" alt="GLWidgetForHighDpi" shape="rect" coords="70,56,201,80"/>
<area href="class_t_tool_1_1_viewer.html" title="The TTool::Viewer class is the abstract base class that provides an interface for TTool viewer widget..." alt="TTool::Viewer" shape="rect" coords="211,56,342,80"/>
<area href="class_previewer_1_1_listener.html" alt="Previewer::Listener" shape="rect" coords="352,56,483,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aabb37d26967c0e0f76f24a8b0be68bd9"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><b>ReferenceMode</b> { <b>NORMAL_REFERENCE</b> = 1
, <b>CAMERA3D_REFERENCE</b> = 2
, <b>CAMERA_REFERENCE</b> = 3
, <b>LEVEL_MODE</b> = 128
 }</td></tr>
<tr class="separator:aabb37d26967c0e0f76f24a8b0be68bd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a29da05639b81af39e9598f7f681812"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><b>ViewMode</b> { <b>SCENE_VIEWMODE</b> = 0
, <b>LEVEL_VIEWMODE</b> = 1
 }</td></tr>
<tr class="separator:a3a29da05639b81af39e9598f7f681812"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7cb6feddf6a1dbda62aeeb52d01a8ea"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><b>PreviewMode</b> { <b>NO_PREVIEW</b> = 0
, <b>FULL_PREVIEW</b> = 1
, <b>SUBCAMERA_PREVIEW</b> = 2
 }</td></tr>
<tr class="separator:ab7cb6feddf6a1dbda62aeeb52d01a8ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-slots" name="pub-slots"></a>
Public Slots</h2></td></tr>
<tr class="memitem:a486ab2b8322a8922ccda934272da2bc1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a486ab2b8322a8922ccda934272da2bc1">resetSceneViewer</a> ()</td></tr>
<tr class="separator:a486ab2b8322a8922ccda934272da2bc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19a9898446b10c6a9367171b5c43ca1a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a19a9898446b10c6a9367171b5c43ca1a">resetZoom</a> ()</td></tr>
<tr class="separator:a19a9898446b10c6a9367171b5c43ca1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b5067774331d9aae76bce92a2088614"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a1b5067774331d9aae76bce92a2088614">resetRotation</a> ()</td></tr>
<tr class="separator:a1b5067774331d9aae76bce92a2088614"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8e0eddc3c301fbbcead3dc55188e8c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ae8e0eddc3c301fbbcead3dc55188e8c4">resetPosition</a> ()</td></tr>
<tr class="separator:ae8e0eddc3c301fbbcead3dc55188e8c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ca6c2ca955f598e104d76cfccf108f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a8ca6c2ca955f598e104d76cfccf108f0">setActualPixelSize</a> ()</td></tr>
<tr class="separator:a8ca6c2ca955f598e104d76cfccf108f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7aa63e40d31ff8087f5d4cceb5fd1fc0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a7aa63e40d31ff8087f5d4cceb5fd1fc0">flipX</a> ()</td></tr>
<tr class="separator:a7aa63e40d31ff8087f5d4cceb5fd1fc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d72cb1162232646e8bc69b72c55dc5b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a8d72cb1162232646e8bc69b72c55dc5b">flipY</a> ()</td></tr>
<tr class="separator:a8d72cb1162232646e8bc69b72c55dc5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d4cced2ccad45e662e734ec7be5a856"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a2d4cced2ccad45e662e734ec7be5a856">zoomIn</a> ()</td></tr>
<tr class="separator:a2d4cced2ccad45e662e734ec7be5a856"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bbf29560bedb29d0004a13159e56d29"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a3bbf29560bedb29d0004a13159e56d29">zoomOut</a> ()</td></tr>
<tr class="separator:a3bbf29560bedb29d0004a13159e56d29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aead4b11fab3fec8993abc0679820b948"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#aead4b11fab3fec8993abc0679820b948">onXsheetChanged</a> ()</td></tr>
<tr class="separator:aead4b11fab3fec8993abc0679820b948"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e8e688d6369e5fb243a853e9d91ce53"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a4e8e688d6369e5fb243a853e9d91ce53">onObjectSwitched</a> ()</td></tr>
<tr class="separator:a4e8e688d6369e5fb243a853e9d91ce53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a950ace4dc4b0afb962fb4884a107d00a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a950ace4dc4b0afb962fb4884a107d00a">onToolChanged</a> ()</td></tr>
<tr class="separator:a950ace4dc4b0afb962fb4884a107d00a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dbd9c2f6053b706f1ee02c8d3d3ed4d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a4dbd9c2f6053b706f1ee02c8d3d3ed4d">onToolSwitched</a> ()</td></tr>
<tr class="separator:a4dbd9c2f6053b706f1ee02c8d3d3ed4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d328a1e864429727d539adb0549ce94"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a5d328a1e864429727d539adb0549ce94">onSceneChanged</a> ()</td></tr>
<tr class="separator:a5d328a1e864429727d539adb0549ce94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0454f71591bde07203a2e6ac030e9b5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a0454f71591bde07203a2e6ac030e9b5d">onLevelChanged</a> ()</td></tr>
<tr class="separator:a0454f71591bde07203a2e6ac030e9b5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c5ebcc7632efbf13fd8640531e95766"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a4c5ebcc7632efbf13fd8640531e95766">onLevelSwitched</a> ()</td></tr>
<tr class="separator:a4c5ebcc7632efbf13fd8640531e95766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76cd7a43b0be7f97a5493ed93bd768d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a76cd7a43b0be7f97a5493ed93bd768d4">onFrameSwitched</a> ()</td></tr>
<tr class="separator:a76cd7a43b0be7f97a5493ed93bd768d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a034053ccfdd1dc475139a0c119e2f07a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a034053ccfdd1dc475139a0c119e2f07a">onOnionSkinMaskChanged</a> ()</td></tr>
<tr class="separator:a034053ccfdd1dc475139a0c119e2f07a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a356c3d5f2a1694bf7e598c29b9fe03e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a356c3d5f2a1694bf7e598c29b9fe03e5">setReferenceMode</a> (int referenceMode)</td></tr>
<tr class="separator:a356c3d5f2a1694bf7e598c29b9fe03e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4964c1394b70da1420b770d872659dca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a4964c1394b70da1420b770d872659dca">enablePreview</a> (int previewMode)</td></tr>
<tr class="separator:a4964c1394b70da1420b770d872659dca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afee23545d546ce0e24be09d45a079831"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#afee23545d546ce0e24be09d45a079831">freeze</a> (bool on)</td></tr>
<tr class="separator:afee23545d546ce0e24be09d45a079831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53550576897c429393bef675c5d13fbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a53550576897c429393bef675c5d13fbe">onButtonPressed</a> (FlipConsole::EGadget button)</td></tr>
<tr class="separator:a53550576897c429393bef675c5d13fbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28b51b06c0d341adf5e3479e610eff47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a28b51b06c0d341adf5e3479e610eff47">fitToCamera</a> ()</td></tr>
<tr class="separator:a28b51b06c0d341adf5e3479e610eff47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abacde6b68591e1ad86c3146516dda792"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#abacde6b68591e1ad86c3146516dda792">fitToCameraOutline</a> ()</td></tr>
<tr class="separator:abacde6b68591e1ad86c3146516dda792"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a706c39b5ae56033e32d2394142198301"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a706c39b5ae56033e32d2394142198301">swapCompared</a> ()</td></tr>
<tr class="separator:a706c39b5ae56033e32d2394142198301"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cb8080e8128fb721c2517ae938994b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a6cb8080e8128fb721c2517ae938994b0">regeneratePreviewFrame</a> ()</td></tr>
<tr class="separator:a6cb8080e8128fb721c2517ae938994b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a240af6e63f2de67f32661dead9763b0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a240af6e63f2de67f32661dead9763b0b">regeneratePreview</a> ()</td></tr>
<tr class="separator:a240af6e63f2de67f32661dead9763b0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adea94782b23124e656a813ccc6155210"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#adea94782b23124e656a813ccc6155210">doDeleteSubCamera</a> ()</td></tr>
<tr class="separator:adea94782b23124e656a813ccc6155210"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad14f2cc4168a38882b4c23bbb8e7ed61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ad14f2cc4168a38882b4c23bbb8e7ed61">resetTabletStatus</a> ()</td></tr>
<tr class="separator:ad14f2cc4168a38882b4c23bbb8e7ed61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4ab9fcfdf2823447ed005ec1cc95fc8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ad4ab9fcfdf2823447ed005ec1cc95fc8">releaseBusyOnTabletMove</a> ()</td></tr>
<tr class="separator:ad4ab9fcfdf2823447ed005ec1cc95fc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa78eb4bdab0b03f3e4ac1fc4af67e05"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#afa78eb4bdab0b03f3e4ac1fc4af67e05">onContextAboutToBeDestroyed</a> ()</td></tr>
<tr class="separator:afa78eb4bdab0b03f3e4ac1fc4af67e05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a747bce47ff0499a9dd5a6043ca83fb1a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a747bce47ff0499a9dd5a6043ca83fb1a">onPreferenceChanged</a> (const QString &amp;prefName)</td></tr>
<tr class="separator:a747bce47ff0499a9dd5a6043ca83fb1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="signals" name="signals"></a>
Signals</h2></td></tr>
<tr class="memitem:ac2f62085d7ede300d5467a99969ca243"><td class="memItemLeft" align="right" valign="top"><a id="ac2f62085d7ede300d5467a99969ca243" name="ac2f62085d7ede300d5467a99969ca243"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>onZoomChanged</b> ()</td></tr>
<tr class="separator:ac2f62085d7ede300d5467a99969ca243"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab35976a15d15eaf3d0148c3f6dc8146e"><td class="memItemLeft" align="right" valign="top"><a id="ab35976a15d15eaf3d0148c3f6dc8146e" name="ab35976a15d15eaf3d0148c3f6dc8146e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>onFlipHChanged</b> (bool)</td></tr>
<tr class="separator:ab35976a15d15eaf3d0148c3f6dc8146e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab54c65f54a93768512380aca7129c63a"><td class="memItemLeft" align="right" valign="top"><a id="ab54c65f54a93768512380aca7129c63a" name="ab54c65f54a93768512380aca7129c63a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>onFlipVChanged</b> (bool)</td></tr>
<tr class="separator:ab54c65f54a93768512380aca7129c63a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f82cc3fec87d1534a900ddd4b520215"><td class="memItemLeft" align="right" valign="top"><a id="a8f82cc3fec87d1534a900ddd4b520215" name="a8f82cc3fec87d1534a900ddd4b520215"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>freezeStateChanged</b> (bool)</td></tr>
<tr class="separator:a8f82cc3fec87d1534a900ddd4b520215"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcab8a2cb5677b53adf1e1001cd20967"><td class="memItemLeft" align="right" valign="top"><a id="adcab8a2cb5677b53adf1e1001cd20967" name="adcab8a2cb5677b53adf1e1001cd20967"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>previewStatusChanged</b> ()</td></tr>
<tr class="separator:adcab8a2cb5677b53adf1e1001cd20967"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ebfe16a4020aafc782158422e08bbd1"><td class="memItemLeft" align="right" valign="top"><a id="a3ebfe16a4020aafc782158422e08bbd1" name="a3ebfe16a4020aafc782158422e08bbd1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>refreshNavi</b> ()</td></tr>
<tr class="separator:a3ebfe16a4020aafc782158422e08bbd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d0267e74bc538a9f117856062fba503"><td class="memItemLeft" align="right" valign="top"><a id="a5d0267e74bc538a9f117856062fba503" name="a5d0267e74bc538a9f117856062fba503"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>previewToggled</b> ()</td></tr>
<tr class="separator:a5d0267e74bc538a9f117856062fba503"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7647e4aa2b9e25ff900b511a9228a3ce"><td class="memItemLeft" align="right" valign="top"><a id="a7647e4aa2b9e25ff900b511a9228a3ce" name="a7647e4aa2b9e25ff900b511a9228a3ce"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>aboutToBeDestroyed</b> ()</td></tr>
<tr class="separator:a7647e4aa2b9e25ff900b511a9228a3ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adb67280796f09a6800e531a389eb7dae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#adb67280796f09a6800e531a389eb7dae">SceneViewer</a> (<a class="el" href="class_image_utils_1_1_full_screen_widget.html">ImageUtils::FullScreenWidget</a> *parent)</td></tr>
<tr class="separator:adb67280796f09a6800e531a389eb7dae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c7c61456c1f6403bfd86c0729f52207"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a3c7c61456c1f6403bfd86c0729f52207">getPixelSize</a> () const override</td></tr>
<tr class="separator:a3c7c61456c1f6403bfd86c0729f52207"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d6ff236dc014acbe3fa2d3650dbb0ea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_rect_t.html">TRectD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a3d6ff236dc014acbe3fa2d3650dbb0ea">getPreviewRect</a> () const override</td></tr>
<tr class="separator:a3d6ff236dc014acbe3fa2d3650dbb0ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a779d8af0ab00573fb2a3dd925cc2d546"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a779d8af0ab00573fb2a3dd925cc2d546">onRenderStarted</a> (int frame) override</td></tr>
<tr class="separator:a779d8af0ab00573fb2a3dd925cc2d546"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd3362a77941869edd9ada55709279ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#abd3362a77941869edd9ada55709279ad">onRenderCompleted</a> (int frame) override</td></tr>
<tr class="separator:abd3362a77941869edd9ada55709279ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cea138440514d78c2580d09f0ebe518"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a9cea138440514d78c2580d09f0ebe518">onPreviewUpdate</a> () override</td></tr>
<tr class="separator:a9cea138440514d78c2580d09f0ebe518"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a951018a0f767f1b40094e839332d896a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a951018a0f767f1b40094e839332d896a">isPreviewEnabled</a> () const</td></tr>
<tr class="separator:a951018a0f767f1b40094e839332d896a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb52de98a6c2cd11dfd482437ebddf66"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#acb52de98a6c2cd11dfd482437ebddf66">getPreviewMode</a> () const</td></tr>
<tr class="separator:acb52de98a6c2cd11dfd482437ebddf66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99f8875eb64f5e9e7f3001fb6556bafd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a99f8875eb64f5e9e7f3001fb6556bafd">setVisual</a> (const <a class="el" href="class_image_painter_1_1_visual_settings.html">ImagePainter::VisualSettings</a> &amp;settings)</td></tr>
<tr class="separator:a99f8875eb64f5e9e7f3001fb6556bafd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46de6de255d707906df8cfcfdf3a1ead"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_rect_t.html">TRect</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a46de6de255d707906df8cfcfdf3a1ead">getActualClipRect</a> (const <a class="el" href="class_t_affine.html">TAffine</a> &amp;aff)</td></tr>
<tr class="separator:a46de6de255d707906df8cfcfdf3a1ead"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f746b9c53dc17030711cac65d96f625"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_affine.html">TAffine</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a> () const override</td></tr>
<tr class="separator:a3f746b9c53dc17030711cac65d96f625"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71c3b2c826bd5efa2762dc38b695edfb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_affine.html">TAffine</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a71c3b2c826bd5efa2762dc38b695edfb">getSceneMatrix</a> () const</td></tr>
<tr class="separator:a71c3b2c826bd5efa2762dc38b695edfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81053fcd8115b5854c5b7dff0af0cf5a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a81053fcd8115b5854c5b7dff0af0cf5a">setViewMatrix</a> (const <a class="el" href="class_t_affine.html">TAffine</a> &amp;aff, int viewMode)</td></tr>
<tr class="separator:a81053fcd8115b5854c5b7dff0af0cf5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac03615cda02f9ecf6a96c6839918fc79"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ac03615cda02f9ecf6a96c6839918fc79">getFPS</a> ()</td></tr>
<tr class="separator:ac03615cda02f9ecf6a96c6839918fc79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d36b46e11aebf1a2a0fb8f618c4f627"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a6d36b46e11aebf1a2a0fb8f618c4f627">setRulers</a> (<a class="el" href="class_ruler.html">Ruler</a> *v, <a class="el" href="class_ruler.html">Ruler</a> *h)</td></tr>
<tr class="separator:a6d36b46e11aebf1a2a0fb8f618c4f627"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32224c92271386a53b52fdfa99cbce82"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a32224c92271386a53b52fdfa99cbce82">is3DView</a> () const override</td></tr>
<tr class="separator:a32224c92271386a53b52fdfa99cbce82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17c5430ffb3cea34704430a7f623dba1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_dimension_t.html">TDimension</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a17c5430ffb3cea34704430a7f623dba1">getViewportSize</a> () const</td></tr>
<tr class="separator:a17c5430ffb3cea34704430a7f623dba1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9865bf9cec6524de9d751f34702aab0f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a9865bf9cec6524de9d751f34702aab0f">invalidateAll</a> () override</td></tr>
<tr class="separator:a9865bf9cec6524de9d751f34702aab0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab96170500b3df72aa36a3deb5f69cc11"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ab96170500b3df72aa36a3deb5f69cc11">GLInvalidateAll</a> () override</td></tr>
<tr class="separator:ab96170500b3df72aa36a3deb5f69cc11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5973b384a0f6d4a76fa06ae6343c43f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ae5973b384a0f6d4a76fa06ae6343c43f">GLInvalidateRect</a> (const <a class="el" href="class_t_rect_t.html">TRectD</a> &amp;rect) override</td></tr>
<tr class="separator:ae5973b384a0f6d4a76fa06ae6343c43f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51e41da45c96d39493ac2753b89d5407"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a51e41da45c96d39493ac2753b89d5407">invalidateToolStatus</a> () override</td></tr>
<tr class="separator:a51e41da45c96d39493ac2753b89d5407"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4f030a7fcd3eb03e217442ddfb1ee82"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_point_t.html">TPointD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#aa4f030a7fcd3eb03e217442ddfb1ee82">getPan3D</a> () const</td></tr>
<tr class="separator:aa4f030a7fcd3eb03e217442ddfb1ee82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a504e74706e339c8b92df181000b143a1"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a504e74706e339c8b92df181000b143a1">getZoomScale3D</a> () const</td></tr>
<tr class="separator:a504e74706e339c8b92df181000b143a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1baf121661d1bbabbb869411e4687a4d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a1baf121661d1bbabbb869411e4687a4d">projectToZ</a> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;delta) override</td></tr>
<tr class="separator:a1baf121661d1bbabbb869411e4687a4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a7faf3b67ff28e82ad7294924b6cb74"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_point_t.html">TPointD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a2a7faf3b67ff28e82ad7294924b6cb74">getDpiScale</a> () const override</td></tr>
<tr class="separator:a2a7faf3b67ff28e82ad7294924b6cb74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee4ed44d7e7e472a7fc22cf7c9db1360"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#aee4ed44d7e7e472a7fc22cf7c9db1360">zoomQt</a> (bool forward, bool reset)</td></tr>
<tr class="separator:aee4ed44d7e7e472a7fc22cf7c9db1360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14d04fa24b2fb8f29cec3d17a2237ad7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_affine.html">TAffine</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a14d04fa24b2fb8f29cec3d17a2237ad7">getNormalZoomScale</a> ()</td></tr>
<tr class="separator:a14d04fa24b2fb8f29cec3d17a2237ad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07090c8e03ffdbaa5e79726cecbe7106"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a07090c8e03ffdbaa5e79726cecbe7106">canSwapCompared</a> () const</td></tr>
<tr class="separator:a07090c8e03ffdbaa5e79726cecbe7106"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b6c96570548ac253cacccd977820c5c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a3b6c96570548ac253cacccd977820c5c">isEditPreviewSubcamera</a> () const</td></tr>
<tr class="separator:a3b6c96570548ac253cacccd977820c5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a867728dd5a6af616e3bb10472441553a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a867728dd5a6af616e3bb10472441553a">getIsFlippedX</a> () const override</td></tr>
<tr class="separator:a867728dd5a6af616e3bb10472441553a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ee26ba62d6500895dc7b18a3d9c0451"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a0ee26ba62d6500895dc7b18a3d9c0451">getIsFlippedY</a> () const override</td></tr>
<tr class="separator:a0ee26ba62d6500895dc7b18a3d9c0451"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62353c28294f128e596558065ba41e8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a62353c28294f128e596558065ba41e8f">setEditPreviewSubcamera</a> (bool enabled)</td></tr>
<tr class="separator:a62353c28294f128e596558065ba41e8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7417b1376a06cff118bba954c3f67a05"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a7417b1376a06cff118bba954c3f67a05">navigatorPan</a> (const QPoint &amp;delta)</td></tr>
<tr class="separator:a7417b1376a06cff118bba954c3f67a05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fd1e40caee87c57edd5d890dc41b8c8"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a7fd1e40caee87c57edd5d890dc41b8c8">getDpiFactor</a> ()</td></tr>
<tr class="separator:a7fd1e40caee87c57edd5d890dc41b8c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc2a1a75cd067ec5588dfdbd583d483b"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#abc2a1a75cd067ec5588dfdbd583d483b">getZoomScaleFittingWithScreen</a> ()</td></tr>
<tr class="separator:abc2a1a75cd067ec5588dfdbd583d483b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7894cec2d508ff6e264616df00b26479"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_rect_t.html">TRectD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a7894cec2d508ff6e264616df00b26479">getGeometry</a> () const override</td></tr>
<tr class="separator:a7894cec2d508ff6e264616df00b26479"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90c77460ec4fc143817b3e9479a50f1a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a90c77460ec4fc143817b3e9479a50f1a">setFocus</a> (Qt::FocusReason reason)</td></tr>
<tr class="separator:a90c77460ec4fc143817b3e9479a50f1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e743c887ede3ea67132600c6661d823"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a4e743c887ede3ea67132600c6661d823">setIsLocator</a> ()</td></tr>
<tr class="separator:a4e743c887ede3ea67132600c6661d823"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aa0bac14417aeeb458439dfed626dae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a1aa0bac14417aeeb458439dfed626dae">setIsStyleShortcutSwitchable</a> ()</td></tr>
<tr class="separator:a1aa0bac14417aeeb458439dfed626dae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a841545e56b0e1d20f2475b2b214b5f09"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a841545e56b0e1d20f2475b2b214b5f09">getVGuideCount</a> () override</td></tr>
<tr class="separator:a841545e56b0e1d20f2475b2b214b5f09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0f2d483de9e3552346138f343c585c7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ab0f2d483de9e3552346138f343c585c7">getHGuideCount</a> () override</td></tr>
<tr class="separator:ab0f2d483de9e3552346138f343c585c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd65e1634747cdfd37a49c7c57778973"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#acd65e1634747cdfd37a49c7c57778973">getVGuide</a> (int index) override</td></tr>
<tr class="separator:acd65e1634747cdfd37a49c7c57778973"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d249c7f77f675cecbc6ad0afdf8cc69"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a6d249c7f77f675cecbc6ad0afdf8cc69">getHGuide</a> (int index) override</td></tr>
<tr class="separator:a6d249c7f77f675cecbc6ad0afdf8cc69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4227c932f0d4a15dd88bd17492c318c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ab4227c932f0d4a15dd88bd17492c318c">bindFBO</a> () override</td></tr>
<tr class="separator:ab4227c932f0d4a15dd88bd17492c318c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae331d555c43f941e0d5576fefc5f8774"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ae331d555c43f941e0d5576fefc5f8774">releaseFBO</a> () override</td></tr>
<tr class="separator:ae331d555c43f941e0d5576fefc5f8774"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae85206a6a0c35c8ea2374f1442575f39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ae85206a6a0c35c8ea2374f1442575f39">setTimerAndTargetInstant</a> (QElapsedTimer *timer, qint64 target)</td></tr>
<tr class="separator:ae85206a6a0c35c8ea2374f1442575f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1a70ad1c9fc56002d67b8a6f6609e55"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_point_t.html">TPointD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ac1a70ad1c9fc56002d67b8a6f6609e55">winToWorld</a> (const QPointF &amp;pos) const</td></tr>
<tr class="separator:ac1a70ad1c9fc56002d67b8a6f6609e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66e2243fc4447eddb73d6fc09d1a112b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_point_t.html">TPointD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a66e2243fc4447eddb73d6fc09d1a112b">winToWorld</a> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;winPos) const override</td></tr>
<tr class="separator:a66e2243fc4447eddb73d6fc09d1a112b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb3a1d375ff7172f35364adc9cc0500e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_point_t.html">TPointD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#aeb3a1d375ff7172f35364adc9cc0500e">worldToPos</a> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;worldPos) const override</td></tr>
<tr class="memdesc:aeb3a1d375ff7172f35364adc9cc0500e"><td class="mdescLeft">&#160;</td><td class="mdescRight">return pos in pixel, bottom-left origin  <a href="class_scene_viewer.html#aeb3a1d375ff7172f35364adc9cc0500e">More...</a><br /></td></tr>
<tr class="separator:aeb3a1d375ff7172f35364adc9cc0500e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_g_l_widget_for_high_dpi"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_g_l_widget_for_high_dpi')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_g_l_widget_for_high_dpi.html">GLWidgetForHighDpi</a></td></tr>
<tr class="memitem:aa309bf8bc3d804cc71c632683ec78a1c inherit pub_methods_class_g_l_widget_for_high_dpi"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_l_widget_for_high_dpi.html#aa309bf8bc3d804cc71c632683ec78a1c">GLWidgetForHighDpi</a> (QWidget *parent=nullptr, Qt::WindowFlags f=Qt::WindowFlags())</td></tr>
<tr class="separator:aa309bf8bc3d804cc71c632683ec78a1c inherit pub_methods_class_g_l_widget_for_high_dpi"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8887952fbcb70f7abfdd396d9a9eec8b inherit pub_methods_class_g_l_widget_for_high_dpi"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_l_widget_for_high_dpi.html#a8887952fbcb70f7abfdd396d9a9eec8b">width</a> () const</td></tr>
<tr class="separator:a8887952fbcb70f7abfdd396d9a9eec8b inherit pub_methods_class_g_l_widget_for_high_dpi"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fceed3d91df49ace2b4799a7ae1b65a inherit pub_methods_class_g_l_widget_for_high_dpi"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_l_widget_for_high_dpi.html#a3fceed3d91df49ace2b4799a7ae1b65a">height</a> () const</td></tr>
<tr class="separator:a3fceed3d91df49ace2b4799a7ae1b65a inherit pub_methods_class_g_l_widget_for_high_dpi"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a693785d4893cf9078c96cb0cbd03b234 inherit pub_methods_class_g_l_widget_for_high_dpi"><td class="memItemLeft" align="right" valign="top">QRect&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_l_widget_for_high_dpi.html#a693785d4893cf9078c96cb0cbd03b234">rect</a> () const</td></tr>
<tr class="separator:a693785d4893cf9078c96cb0cbd03b234 inherit pub_methods_class_g_l_widget_for_high_dpi"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_t_tool_1_1_viewer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_t_tool_1_1_viewer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a></td></tr>
<tr class="memitem:a1c652f2c45c7dcb2c1a3f81710f18fc5 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_image_painter_1_1_visual_settings.html">ImagePainter::VisualSettings</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a1c652f2c45c7dcb2c1a3f81710f18fc5">visualSettings</a> () const</td></tr>
<tr class="separator:a1c652f2c45c7dcb2c1a3f81710f18fc5 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc648a59b91375bde05a15a861dd9b8e inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_image_painter_1_1_visual_settings.html">ImagePainter::VisualSettings</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#acc648a59b91375bde05a15a861dd9b8e">visualSettings</a> ()</td></tr>
<tr class="separator:acc648a59b91375bde05a15a861dd9b8e inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e87a68354646cc8c05128437b7df35d inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">virtual double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a0e87a68354646cc8c05128437b7df35d">getPixelSize</a> () const =0</td></tr>
<tr class="separator:a0e87a68354646cc8c05128437b7df35d inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c78921157249891a6ec73eb94501d2a inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a3c78921157249891a6ec73eb94501d2a">invalidateAll</a> ()=0</td></tr>
<tr class="separator:a3c78921157249891a6ec73eb94501d2a inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e256660e14db34f8b1d3d74b62e8851 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a4e256660e14db34f8b1d3d74b62e8851">GLInvalidateAll</a> ()=0</td></tr>
<tr class="separator:a4e256660e14db34f8b1d3d74b62e8851 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ca66eeb722bff291bc1d0d5463a706b inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a3ca66eeb722bff291bc1d0d5463a706b">GLInvalidateRect</a> (const <a class="el" href="class_t_rect_t.html">TRectD</a> &amp;rect)=0</td></tr>
<tr class="separator:a3ca66eeb722bff291bc1d0d5463a706b inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9783019e219f37d1c4bc038302e3485 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#ac9783019e219f37d1c4bc038302e3485">invalidateToolStatus</a> ()=0</td></tr>
<tr class="separator:ac9783019e219f37d1c4bc038302e3485 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97b71c149134c5a3d0ba0d5333b0b3c2 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_t_affine.html">TAffine</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a97b71c149134c5a3d0ba0d5333b0b3c2">getViewMatrix</a> () const</td></tr>
<tr class="separator:a97b71c149134c5a3d0ba0d5333b0b3c2 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39e1e08bc287e5ca5a9ff6e7ac968ca2 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a39e1e08bc287e5ca5a9ff6e7ac968ca2">posToColumnIndex</a> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;p, double distance, bool includeInvisible=true) const =0</td></tr>
<tr class="separator:a39e1e08bc287e5ca5a9ff6e7ac968ca2 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a540f625211287abf8eb989a91a7c55fd inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a id="a540f625211287abf8eb989a91a7c55fd" name="a540f625211287abf8eb989a91a7c55fd"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>posToColumnIndexes</b> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;p, std::vector&lt; int &gt; &amp;indexes, double distance, bool includeInvisible=true) const =0</td></tr>
<tr class="separator:a540f625211287abf8eb989a91a7c55fd inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa68aee09530696a8996e835801ea59f2 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#aa68aee09530696a8996e835801ea59f2">posToRow</a> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;p, double distance, bool includeInvisible=true, bool currentColumnOnly=false) const =0</td></tr>
<tr class="separator:aa68aee09530696a8996e835801ea59f2 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00ad8f88b4832e92cfd91b3f5ba8efd6 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_t_point_t.html">TPointD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a00ad8f88b4832e92cfd91b3f5ba8efd6">worldToPos</a> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;worldPos) const =0</td></tr>
<tr class="memdesc:a00ad8f88b4832e92cfd91b3f5ba8efd6 inherit pub_methods_class_t_tool_1_1_viewer"><td class="mdescLeft">&#160;</td><td class="mdescRight">return pos in pixel, bottom-left origin  <a href="class_t_tool_1_1_viewer.html#a00ad8f88b4832e92cfd91b3f5ba8efd6">More...</a><br /></td></tr>
<tr class="separator:a00ad8f88b4832e92cfd91b3f5ba8efd6 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25c39c87c36587cf9cb0fdc09c59e6d4 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a25c39c87c36587cf9cb0fdc09c59e6d4">pick</a> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;point)=0</td></tr>
<tr class="separator:a25c39c87c36587cf9cb0fdc09c59e6d4 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f110543c4241a1ae7965363753a7fb9 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a id="a7f110543c4241a1ae7965363753a7fb9" name="a7f110543c4241a1ae7965363753a7fb9"></a>
virtual <a class="el" href="class_t_point_t.html">TPointD</a>&#160;</td><td class="memItemRight" valign="bottom"><b>winToWorld</b> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;winPos) const =0</td></tr>
<tr class="separator:a7f110543c4241a1ae7965363753a7fb9 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac746aac1759b2656f004ed3e20125891 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a id="ac746aac1759b2656f004ed3e20125891" name="ac746aac1759b2656f004ed3e20125891"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>pan</b> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;delta)=0</td></tr>
<tr class="separator:ac746aac1759b2656f004ed3e20125891 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a295b39f4cea2720861b2e7c67651e1c5 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a id="a295b39f4cea2720861b2e7c67651e1c5" name="a295b39f4cea2720861b2e7c67651e1c5"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>zoom</b> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;center, double scaleFactor)=0</td></tr>
<tr class="separator:a295b39f4cea2720861b2e7c67651e1c5 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae254bcd7f0eaa2a13cd1eb75afc8f792 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a id="ae254bcd7f0eaa2a13cd1eb75afc8f792" name="ae254bcd7f0eaa2a13cd1eb75afc8f792"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>rotate</b> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;center, double angle)=0</td></tr>
<tr class="separator:ae254bcd7f0eaa2a13cd1eb75afc8f792 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aace068c2a1088f162b333101f43e30bf inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a id="aace068c2a1088f162b333101f43e30bf" name="aace068c2a1088f162b333101f43e30bf"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>rotate3D</b> (double dPhi, double dTheta)=0</td></tr>
<tr class="separator:aace068c2a1088f162b333101f43e30bf inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5bda84317221131a561194de11ee3c0 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a id="ae5bda84317221131a561194de11ee3c0" name="ae5bda84317221131a561194de11ee3c0"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><b>is3DView</b> () const =0</td></tr>
<tr class="separator:ae5bda84317221131a561194de11ee3c0 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad19cd3ed1b61a4355df93ce722cc05aa inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a id="ad19cd3ed1b61a4355df93ce722cc05aa" name="ad19cd3ed1b61a4355df93ce722cc05aa"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><b>getIsFlippedX</b> () const =0</td></tr>
<tr class="separator:ad19cd3ed1b61a4355df93ce722cc05aa inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a538a1ec861ab138ab8e74ea356ba89 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a id="a2a538a1ec861ab138ab8e74ea356ba89" name="a2a538a1ec861ab138ab8e74ea356ba89"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><b>getIsFlippedY</b> () const =0</td></tr>
<tr class="separator:a2a538a1ec861ab138ab8e74ea356ba89 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8c80c704e84c0c6f9cf3f95206a5d82 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a id="af8c80c704e84c0c6f9cf3f95206a5d82" name="af8c80c704e84c0c6f9cf3f95206a5d82"></a>
virtual double&#160;</td><td class="memItemRight" valign="bottom"><b>projectToZ</b> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;delta)=0</td></tr>
<tr class="separator:af8c80c704e84c0c6f9cf3f95206a5d82 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac00e6f870feace689b91e4ae66e40a91 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a id="ac00e6f870feace689b91e4ae66e40a91" name="ac00e6f870feace689b91e4ae66e40a91"></a>
virtual <a class="el" href="class_t_point_t.html">TPointD</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getDpiScale</b> () const =0</td></tr>
<tr class="separator:ac00e6f870feace689b91e4ae66e40a91 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a312e2195a6cc72ff07cc53c7cefbda16 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a id="a312e2195a6cc72ff07cc53c7cefbda16" name="a312e2195a6cc72ff07cc53c7cefbda16"></a>
virtual int&#160;</td><td class="memItemRight" valign="bottom"><b>getVGuideCount</b> ()=0</td></tr>
<tr class="separator:a312e2195a6cc72ff07cc53c7cefbda16 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b0ea906d9ac4a4e0a5d7a0def468b75 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a id="a3b0ea906d9ac4a4e0a5d7a0def468b75" name="a3b0ea906d9ac4a4e0a5d7a0def468b75"></a>
virtual int&#160;</td><td class="memItemRight" valign="bottom"><b>getHGuideCount</b> ()=0</td></tr>
<tr class="separator:a3b0ea906d9ac4a4e0a5d7a0def468b75 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab58cb341b7773d6c44bb4f84aae980ff inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a id="ab58cb341b7773d6c44bb4f84aae980ff" name="ab58cb341b7773d6c44bb4f84aae980ff"></a>
virtual double&#160;</td><td class="memItemRight" valign="bottom"><b>getHGuide</b> (int index)=0</td></tr>
<tr class="separator:ab58cb341b7773d6c44bb4f84aae980ff inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9881535948552cce5fbdbc6bb49d5c3a inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a id="a9881535948552cce5fbdbc6bb49d5c3a" name="a9881535948552cce5fbdbc6bb49d5c3a"></a>
virtual double&#160;</td><td class="memItemRight" valign="bottom"><b>getVGuide</b> (int index)=0</td></tr>
<tr class="separator:a9881535948552cce5fbdbc6bb49d5c3a inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a136a548ece008efc93c60ba09862c9e1 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a id="a136a548ece008efc93c60ba09862c9e1" name="a136a548ece008efc93c60ba09862c9e1"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>resetInputMethod</b> ()=0</td></tr>
<tr class="separator:a136a548ece008efc93c60ba09862c9e1 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add0c29b288d7e5aa46c7cf63263d0872 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a id="add0c29b288d7e5aa46c7cf63263d0872" name="add0c29b288d7e5aa46c7cf63263d0872"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>setFocus</b> ()=0</td></tr>
<tr class="separator:add0c29b288d7e5aa46c7cf63263d0872 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37c413739d42d4b3abeeaed84867ff5c inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_t_rect_t.html">TRectD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a37c413739d42d4b3abeeaed84867ff5c">getGeometry</a> () const =0</td></tr>
<tr class="separator:a37c413739d42d4b3abeeaed84867ff5c inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5d0ab86aa73c34601b19080a00be58d inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#aa5d0ab86aa73c34601b19080a00be58d">bindFBO</a> ()</td></tr>
<tr class="separator:aa5d0ab86aa73c34601b19080a00be58d inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a680dda0c06643606d2476e49eb62e6b3 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a680dda0c06643606d2476e49eb62e6b3">releaseFBO</a> ()</td></tr>
<tr class="separator:a680dda0c06643606d2476e49eb62e6b3 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26083caaca4f26eae37897af3413bbe9 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a26083caaca4f26eae37897af3413bbe9">getGuidedStrokePickerMode</a> ()</td></tr>
<tr class="separator:a26083caaca4f26eae37897af3413bbe9 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4397ff48c2444856a83202cd19a69364 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a4397ff48c2444856a83202cd19a69364">setGuidedStrokePickerMode</a> (int mode)</td></tr>
<tr class="separator:a4397ff48c2444856a83202cd19a69364 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af22f078ad00d926e66a9a63ec4ed944d inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#af22f078ad00d926e66a9a63ec4ed944d">getGuidedStrokePickerCursor</a> ()</td></tr>
<tr class="separator:af22f078ad00d926e66a9a63ec4ed944d inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e261d3b57c728e9f9e96db4b3651c5a inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a6e261d3b57c728e9f9e96db4b3651c5a">getGuidedFrontStroke</a> ()</td></tr>
<tr class="separator:a6e261d3b57c728e9f9e96db4b3651c5a inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d438f1bcbaf0f45f507a55728bdb89f inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a8d438f1bcbaf0f45f507a55728bdb89f">setGuidedFrontStroke</a> (int strokeIdx)</td></tr>
<tr class="separator:a8d438f1bcbaf0f45f507a55728bdb89f inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa822aaf22656671bf97bdc6684c78431 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#aa822aaf22656671bf97bdc6684c78431">getGuidedBackStroke</a> ()</td></tr>
<tr class="separator:aa822aaf22656671bf97bdc6684c78431 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63667f56d4a66f8c1bf86dab2dcaab34 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a63667f56d4a66f8c1bf86dab2dcaab34">setGuidedBackStroke</a> (int strokeIdx)</td></tr>
<tr class="separator:a63667f56d4a66f8c1bf86dab2dcaab34 inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b7f7c2caab568bf9e536d658359299f inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a6b7f7c2caab568bf9e536d658359299f">getGuidedFrameIdx</a> (int *backIdx, int *frontIdx)</td></tr>
<tr class="separator:a6b7f7c2caab568bf9e536d658359299f inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad280e427e1890baa149a8c61bca1fd9c inherit pub_methods_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#ad280e427e1890baa149a8c61bca1fd9c">doPickGuideStroke</a> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;pos)</td></tr>
<tr class="separator:ad280e427e1890baa149a8c61bca1fd9c inherit pub_methods_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_previewer_1_1_listener"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_previewer_1_1_listener')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_previewer_1_1_listener.html">Previewer::Listener</a></td></tr>
<tr class="memitem:ad477a92980127ae38e77140008f9b030 inherit pub_methods_class_previewer_1_1_listener"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_previewer_1_1_listener.html#ad477a92980127ae38e77140008f9b030">requestTimedRefresh</a> ()</td></tr>
<tr class="separator:ad477a92980127ae38e77140008f9b030 inherit pub_methods_class_previewer_1_1_listener"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6185ed5ce6f6822a400dcdd5a772d431 inherit pub_methods_class_previewer_1_1_listener"><td class="memItemLeft" align="right" valign="top"><a id="a6185ed5ce6f6822a400dcdd5a772d431" name="a6185ed5ce6f6822a400dcdd5a772d431"></a>
virtual <a class="el" href="class_t_rect_t.html">TRectD</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getPreviewRect</b> () const =0</td></tr>
<tr class="separator:a6185ed5ce6f6822a400dcdd5a772d431 inherit pub_methods_class_previewer_1_1_listener"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01acd96391e32610abff4938b2e55a3b inherit pub_methods_class_previewer_1_1_listener"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_previewer_1_1_listener.html#a01acd96391e32610abff4938b2e55a3b">onRenderStarted</a> (int frame)</td></tr>
<tr class="separator:a01acd96391e32610abff4938b2e55a3b inherit pub_methods_class_previewer_1_1_listener"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35adefa4532f787915f5556b64a2f3a7 inherit pub_methods_class_previewer_1_1_listener"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_previewer_1_1_listener.html#a35adefa4532f787915f5556b64a2f3a7">onRenderCompleted</a> (int frame)</td></tr>
<tr class="separator:a35adefa4532f787915f5556b64a2f3a7 inherit pub_methods_class_previewer_1_1_listener"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb2e4126299c263ca96c4ca7e50e727c inherit pub_methods_class_previewer_1_1_listener"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_previewer_1_1_listener.html#adb2e4126299c263ca96c4ca7e50e727c">onRenderFailed</a> (int frame)</td></tr>
<tr class="separator:adb2e4126299c263ca96c4ca7e50e727c inherit pub_methods_class_previewer_1_1_listener"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6cf1dd11838fa3dd8d4717f165f305d inherit pub_methods_class_previewer_1_1_listener"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_previewer_1_1_listener.html#ad6cf1dd11838fa3dd8d4717f165f305d">onPreviewUpdate</a> ()</td></tr>
<tr class="separator:ad6cf1dd11838fa3dd8d4717f165f305d inherit pub_methods_class_previewer_1_1_listener"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a82bd279f9e7a5cd329511874367ff6ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a82bd279f9e7a5cd329511874367ff6ac">drawBuildVars</a> ()</td></tr>
<tr class="separator:a82bd279f9e7a5cd329511874367ff6ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a682781eebe470f3d40740d46180a1b6c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a682781eebe470f3d40740d46180a1b6c">drawEnableScissor</a> ()</td></tr>
<tr class="separator:a682781eebe470f3d40740d46180a1b6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a841bc094686713386e52af05c0e1be10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a841bc094686713386e52af05c0e1be10">drawDisableScissor</a> ()</td></tr>
<tr class="separator:a841bc094686713386e52af05c0e1be10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe39eb304a79ac869b11b663e9f109c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#afe39eb304a79ac869b11b663e9f109c8">drawBackground</a> ()</td></tr>
<tr class="separator:afe39eb304a79ac869b11b663e9f109c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7c81725cc6d3628d8f3ffa69a9e351f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#aa7c81725cc6d3628d8f3ffa69a9e351f">drawCameraStand</a> ()</td></tr>
<tr class="separator:aa7c81725cc6d3628d8f3ffa69a9e351f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68ece13279180dee8c61f1dcdc1944e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a68ece13279180dee8c61f1dcdc1944e4">drawPreview</a> ()</td></tr>
<tr class="separator:a68ece13279180dee8c61f1dcdc1944e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f65aa9285528e26a555615fd8693128"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a7f65aa9285528e26a555615fd8693128">drawOverlay</a> ()</td></tr>
<tr class="separator:a7f65aa9285528e26a555615fd8693128"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac126cf528301b58b48221eb2e546b1c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ac126cf528301b58b48221eb2e546b1c2">drawScene</a> ()</td></tr>
<tr class="separator:ac126cf528301b58b48221eb2e546b1c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59d806d19ba61c8edb09edcd2964dc5c"><td class="memItemLeft" align="right" valign="top"><a id="a59d806d19ba61c8edb09edcd2964dc5c" name="a59d806d19ba61c8edb09edcd2964dc5c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>drawToolGadgets</b> ()</td></tr>
<tr class="separator:a59d806d19ba61c8edb09edcd2964dc5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f9f1e732b1f8df97c86b88d0a3d563f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a1f9f1e732b1f8df97c86b88d0a3d563f">mult3DMatrix</a> ()</td></tr>
<tr class="separator:a1f9f1e732b1f8df97c86b88d0a3d563f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a877c189291e741328d2162a37550bde6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a877c189291e741328d2162a37550bde6">initializeGL</a> () override</td></tr>
<tr class="separator:a877c189291e741328d2162a37550bde6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e7b35a10fc6a43dc5fd50c572de22a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a2e7b35a10fc6a43dc5fd50c572de22a8">resizeGL</a> (int width, int height) override</td></tr>
<tr class="separator:a2e7b35a10fc6a43dc5fd50c572de22a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa02c109040f40886e29f8e8c89725d91"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#aa02c109040f40886e29f8e8c89725d91">paintGL</a> () override</td></tr>
<tr class="separator:aa02c109040f40886e29f8e8c89725d91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac3340c7d8289f8c4eb7eb1789f72751"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#aac3340c7d8289f8c4eb7eb1789f72751">showEvent</a> (QShowEvent *) override</td></tr>
<tr class="separator:aac3340c7d8289f8c4eb7eb1789f72751"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a713eb48131c80efb39184a049c28e16d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a713eb48131c80efb39184a049c28e16d">hideEvent</a> (QHideEvent *) override</td></tr>
<tr class="separator:a713eb48131c80efb39184a049c28e16d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5b1db8cc53709170924278943aad036"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ab5b1db8cc53709170924278943aad036">gestureEvent</a> (QGestureEvent *e)</td></tr>
<tr class="separator:ab5b1db8cc53709170924278943aad036"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab24ab9bd8c81be905d366154463b81df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ab24ab9bd8c81be905d366154463b81df">touchEvent</a> (QTouchEvent *e, int type)</td></tr>
<tr class="separator:ab24ab9bd8c81be905d366154463b81df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70971e0b0f88badc18059b6c0474e0fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a70971e0b0f88badc18059b6c0474e0fd">tabletEvent</a> (QTabletEvent *) override</td></tr>
<tr class="separator:a70971e0b0f88badc18059b6c0474e0fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8133ba061ff2aceb093eb09e925a2c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ab8133ba061ff2aceb093eb09e925a2c4">leaveEvent</a> (QEvent *) override</td></tr>
<tr class="separator:ab8133ba061ff2aceb093eb09e925a2c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba4c135ce293af822b5cfcebaf7d9d87"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#aba4c135ce293af822b5cfcebaf7d9d87">enterEvent</a> (QEvent *) override</td></tr>
<tr class="separator:aba4c135ce293af822b5cfcebaf7d9d87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65b09e0b6928385784425398c9c4b978"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a65b09e0b6928385784425398c9c4b978">mouseMoveEvent</a> (QMouseEvent *event) override</td></tr>
<tr class="separator:a65b09e0b6928385784425398c9c4b978"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4fb14b4bbe05a40d312fb386cad6018"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ae4fb14b4bbe05a40d312fb386cad6018">mousePressEvent</a> (QMouseEvent *event) override</td></tr>
<tr class="separator:ae4fb14b4bbe05a40d312fb386cad6018"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20d80b32173efe5203eacf2544bb3800"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a20d80b32173efe5203eacf2544bb3800">mouseReleaseEvent</a> (QMouseEvent *event) override</td></tr>
<tr class="separator:a20d80b32173efe5203eacf2544bb3800"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8583e80119b74761b7f2e08378cc05a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ac8583e80119b74761b7f2e08378cc05a">mouseDoubleClickEvent</a> (QMouseEvent *event) override</td></tr>
<tr class="separator:ac8583e80119b74761b7f2e08378cc05a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a815593940281a159efb32f5db1a10276"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a815593940281a159efb32f5db1a10276">onPress</a> (const <a class="el" href="class_t_mouse_event.html">TMouseEvent</a> &amp;event)</td></tr>
<tr class="separator:a815593940281a159efb32f5db1a10276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a147e36c46189dce4600beccc005e50d2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a147e36c46189dce4600beccc005e50d2">onMove</a> (const <a class="el" href="class_t_mouse_event.html">TMouseEvent</a> &amp;event)</td></tr>
<tr class="separator:a147e36c46189dce4600beccc005e50d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51cdfd5bdc5782706c1c319888b42d4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a51cdfd5bdc5782706c1c319888b42d4f">onRelease</a> (const <a class="el" href="class_t_mouse_event.html">TMouseEvent</a> &amp;event)</td></tr>
<tr class="separator:a51cdfd5bdc5782706c1c319888b42d4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ebf805abb82191cbde483dc14fa8896"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a8ebf805abb82191cbde483dc14fa8896">onContextMenu</a> (const QPoint &amp;pos, const QPoint &amp;globalPos)</td></tr>
<tr class="separator:a8ebf805abb82191cbde483dc14fa8896"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f3074198bf23399e5701d53fec54a78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a0f3074198bf23399e5701d53fec54a78">onEnter</a> ()</td></tr>
<tr class="separator:a0f3074198bf23399e5701d53fec54a78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8ac929204cd5dbe735e893d16302970"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ac8ac929204cd5dbe735e893d16302970">onLeave</a> ()</td></tr>
<tr class="separator:ac8ac929204cd5dbe735e893d16302970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91ae075d7414f6b91b6e8336c05d6936"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a91ae075d7414f6b91b6e8336c05d6936">wheelEvent</a> (QWheelEvent *) override</td></tr>
<tr class="separator:a91ae075d7414f6b91b6e8336c05d6936"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0075f82c0dcd4bdcad064d7ec937f7bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a0075f82c0dcd4bdcad064d7ec937f7bf">keyPressEvent</a> (QKeyEvent *event) override</td></tr>
<tr class="separator:a0075f82c0dcd4bdcad064d7ec937f7bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c718a9876f69f618e6b20bdc9c48c75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a0c718a9876f69f618e6b20bdc9c48c75">keyReleaseEvent</a> (QKeyEvent *event) override</td></tr>
<tr class="separator:a0c718a9876f69f618e6b20bdc9c48c75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a469f52509581e555b01fa0c80f90003f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a469f52509581e555b01fa0c80f90003f">contextMenuEvent</a> (QContextMenuEvent *event) override</td></tr>
<tr class="separator:a469f52509581e555b01fa0c80f90003f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39991122d25bf859b7eefd06ed1b4aae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a39991122d25bf859b7eefd06ed1b4aae">inputMethodEvent</a> (QInputMethodEvent *) override</td></tr>
<tr class="separator:a39991122d25bf859b7eefd06ed1b4aae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89fea0dae8ff2f1d79c289a3b03e1617"><td class="memItemLeft" align="right" valign="top"><a id="a89fea0dae8ff2f1d79c289a3b03e1617" name="a89fea0dae8ff2f1d79c289a3b03e1617"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>drawCompared</b> ()</td></tr>
<tr class="separator:a89fea0dae8ff2f1d79c289a3b03e1617"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7198c31eb441b64ad016abdb4bdb255"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ab7198c31eb441b64ad016abdb4bdb255">event</a> (QEvent *event) override</td></tr>
<tr class="separator:ab7198c31eb441b64ad016abdb4bdb255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b750121ec0e522ef3c43decb62ec86d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a1b750121ec0e522ef3c43decb62ec86d">panQt</a> (const QPointF &amp;delta)</td></tr>
<tr class="separator:a1b750121ec0e522ef3c43decb62ec86d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a474e47442ee803ddb71c6d5484806b28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a474e47442ee803ddb71c6d5484806b28">zoomQt</a> (const QPoint &amp;center, double scaleFactor)</td></tr>
<tr class="separator:a474e47442ee803ddb71c6d5484806b28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa2e6bab02b6f9719b262b3f38d8f86f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#afa2e6bab02b6f9719b262b3f38d8f86f">pan</a> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;delta) override</td></tr>
<tr class="separator:afa2e6bab02b6f9719b262b3f38d8f86f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1144b3007e23076105bd42b02a127e9d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a1144b3007e23076105bd42b02a127e9d">zoom</a> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;center, double factor) override</td></tr>
<tr class="separator:a1144b3007e23076105bd42b02a127e9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dfe29f7fe83caa0ccde4ea0f35ee3ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a0dfe29f7fe83caa0ccde4ea0f35ee3ed">rotate</a> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;center, double angle) override</td></tr>
<tr class="separator:a0dfe29f7fe83caa0ccde4ea0f35ee3ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98b5fbea26ca3b3cc40521d73984dc96"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a98b5fbea26ca3b3cc40521d73984dc96">rotate3D</a> (double dPhi, double dTheta) override</td></tr>
<tr class="separator:a98b5fbea26ca3b3cc40521d73984dc96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf27145f1257de7de0b1d90c6ed1191a"><td class="memItemLeft" align="right" valign="top"><a id="acf27145f1257de7de0b1d90c6ed1191a" name="acf27145f1257de7de0b1d90c6ed1191a"></a>
<a class="el" href="class_t_affine.html">TAffine</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getToolMatrix</b> () const</td></tr>
<tr class="separator:acf27145f1257de7de0b1d90c6ed1191a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1163bd98365b4eb35ce09634ea16aff6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a1163bd98365b4eb35ce09634ea16aff6">pick</a> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;point) override</td></tr>
<tr class="separator:a1163bd98365b4eb35ce09634ea16aff6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af778bc35f05229be9939d407b964ad9d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#af778bc35f05229be9939d407b964ad9d">posToColumnIndex</a> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;p, double distance, bool includeInvisible=true) const override</td></tr>
<tr class="separator:af778bc35f05229be9939d407b964ad9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc621b10faeca523c68f80bc50a9939e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#adc621b10faeca523c68f80bc50a9939e">posToColumnIndexes</a> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;p, std::vector&lt; int &gt; &amp;indexes, double distance, bool includeInvisible=true) const override</td></tr>
<tr class="separator:adc621b10faeca523c68f80bc50a9939e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2973e9567ddbbfd62d853f96ba26c7a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#aa2973e9567ddbbfd62d853f96ba26c7a">posToRow</a> (const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;p, double distance, bool includeInvisible=true, bool currentColumnOnly=false) const override</td></tr>
<tr class="separator:aa2973e9567ddbbfd62d853f96ba26c7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1909248612d4efaec74072bd9856b121"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a1909248612d4efaec74072bd9856b121">dragEnterEvent</a> (QDragEnterEvent *event) override</td></tr>
<tr class="separator:a1909248612d4efaec74072bd9856b121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4247b4210012d911d749cdfc0262a194"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a4247b4210012d911d749cdfc0262a194">dropEvent</a> (QDropEvent *event) override</td></tr>
<tr class="separator:a4247b4210012d911d749cdfc0262a194"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f6aba7f3c756ab3f44b6d3c706098df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a8f6aba7f3c756ab3f44b6d3c706098df">resetInputMethod</a> () override</td></tr>
<tr class="separator:a8f6aba7f3c756ab3f44b6d3c706098df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a815ed36c49a2b65f33464544a229056b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a815ed36c49a2b65f33464544a229056b">set3DLeftSideView</a> ()</td></tr>
<tr class="separator:a815ed36c49a2b65f33464544a229056b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6ce34accfa0ad79675753a48cdec07c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ac6ce34accfa0ad79675753a48cdec07c">set3DRightSideView</a> ()</td></tr>
<tr class="separator:ac6ce34accfa0ad79675753a48cdec07c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbd7edc9abfe7a258f50fcdfe3ac32a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#adbd7edc9abfe7a258f50fcdfe3ac32a7">set3DTopView</a> ()</td></tr>
<tr class="separator:adbd7edc9abfe7a258f50fcdfe3ac32a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80e2fb17aa36a8a882331be5b2025726"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a80e2fb17aa36a8a882331be5b2025726">setFocus</a> () override</td></tr>
<tr class="separator:a80e2fb17aa36a8a882331be5b2025726"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa48b27ed062e2d8a0e98566adcad6084"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#aa48b27ed062e2d8a0e98566adcad6084">registerContext</a> ()</td></tr>
<tr class="separator:aa48b27ed062e2d8a0e98566adcad6084"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a72a668b675b54e9c1518c473d9a34193"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_affine.html">TAffine</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a72a668b675b54e9c1518c473d9a34193">m_drawCameraAff</a></td></tr>
<tr class="separator:a72a668b675b54e9c1518c473d9a34193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf3c82f7af6c36fc5950e84c8e400ffb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_affine.html">TAffine</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#aaf3c82f7af6c36fc5950e84c8e400ffb">m_drawTableAff</a></td></tr>
<tr class="separator:aaf3c82f7af6c36fc5950e84c8e400ffb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad23acf9952775fe08a93239d56b7c241"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#ad23acf9952775fe08a93239d56b7c241">m_draw3DMode</a></td></tr>
<tr class="separator:ad23acf9952775fe08a93239d56b7c241"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a458f78b423b3f1447987aa9c1190de47"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a458f78b423b3f1447987aa9c1190de47">m_drawCameraTest</a></td></tr>
<tr class="separator:a458f78b423b3f1447987aa9c1190de47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab69590762709fa8e8a3ae1c1a459145"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#aab69590762709fa8e8a3ae1c1a459145">m_drawIsTableVisible</a></td></tr>
<tr class="separator:aab69590762709fa8e8a3ae1c1a459145"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a080fbba06260c062057ceca5e9bb164e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a080fbba06260c062057ceca5e9bb164e">m_drawEditingLevel</a></td></tr>
<tr class="separator:a080fbba06260c062057ceca5e9bb164e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a121d535ed9bd89cfa48c5542ca468828"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_rect_t.html">TRect</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene_viewer.html#a121d535ed9bd89cfa48c5542ca468828">m_actualClipRect</a></td></tr>
<tr class="separator:a121d535ed9bd89cfa48c5542ca468828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_class_t_tool_1_1_viewer"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_class_t_tool_1_1_viewer')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a></td></tr>
<tr class="memitem:acf21c5c07a1d6db104fb0518d654e5f3 inherit pro_attribs_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_image_painter_1_1_visual_settings.html">ImagePainter::VisualSettings</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a></td></tr>
<tr class="memdesc:acf21c5c07a1d6db104fb0518d654e5f3 inherit pro_attribs_class_t_tool_1_1_viewer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Settings used by the <a class="el" href="class_t_tool_1_1_viewer.html" title="The TTool::Viewer class is the abstract base class that provides an interface for TTool viewer widget...">Viewer</a> to draw scene contents.  <a href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">More...</a><br /></td></tr>
<tr class="separator:acf21c5c07a1d6db104fb0518d654e5f3 inherit pro_attribs_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a910c8d6d88decdec480370f2eda2f0ba inherit pro_attribs_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a910c8d6d88decdec480370f2eda2f0ba">guidedStrokePickMode</a> = 0</td></tr>
<tr class="separator:a910c8d6d88decdec480370f2eda2f0ba inherit pro_attribs_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55cb0816989148d89ec1d88f3ef0a4d7 inherit pro_attribs_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a55cb0816989148d89ec1d88f3ef0a4d7">m_guidedFrontStroke</a> = -1</td></tr>
<tr class="separator:a55cb0816989148d89ec1d88f3ef0a4d7 inherit pro_attribs_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bd87fda9c05517963c40fe4de3f1ce0 inherit pro_attribs_class_t_tool_1_1_viewer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tool_1_1_viewer.html#a1bd87fda9c05517963c40fe4de3f1ce0">m_guidedBackStroke</a> = -1</td></tr>
<tr class="separator:a1bd87fda9c05517963c40fe4de3f1ce0 inherit pro_attribs_class_t_tool_1_1_viewer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_attribs_class_previewer_1_1_listener"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_class_previewer_1_1_listener')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="class_previewer_1_1_listener.html">Previewer::Listener</a></td></tr>
<tr class="memitem:a55676d79fad6bcf7393ef7e6f790b3d7 inherit pub_attribs_class_previewer_1_1_listener"><td class="memItemLeft" align="right" valign="top">QTimer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_previewer_1_1_listener.html#a55676d79fad6bcf7393ef7e6f790b3d7">m_refreshTimer</a></td></tr>
<tr class="separator:a55676d79fad6bcf7393ef7e6f790b3d7 inherit pub_attribs_class_previewer_1_1_listener"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="ab7cb6feddf6a1dbda62aeeb52d01a8ea" name="ab7cb6feddf6a1dbda62aeeb52d01a8ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7cb6feddf6a1dbda62aeeb52d01a8ea">&#9670;&nbsp;</a></span>PreviewMode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum SceneViewer::PreviewMode</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  208</span>{ NO_PREVIEW = 0, FULL_PREVIEW = 1, SUBCAMERA_PREVIEW = 2 };</div>
</div><!-- fragment -->
</div>
</div>
<a id="aabb37d26967c0e0f76f24a8b0be68bd9" name="aabb37d26967c0e0f76f24a8b0be68bd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabb37d26967c0e0f76f24a8b0be68bd9">&#9670;&nbsp;</a></span>ReferenceMode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum SceneViewer::ReferenceMode</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  198</span>                     {</div>
<div class="line"><span class="lineno">  199</span>    NORMAL_REFERENCE   = 1,</div>
<div class="line"><span class="lineno">  200</span>    CAMERA3D_REFERENCE = 2,</div>
<div class="line"><span class="lineno">  201</span>    CAMERA_REFERENCE   = 3,</div>
<div class="line"><span class="lineno">  202</span>    LEVEL_MODE         = 128,</div>
<div class="line"><span class="lineno">  203</span>  };</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3a29da05639b81af39e9598f7f681812" name="a3a29da05639b81af39e9598f7f681812"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a29da05639b81af39e9598f7f681812">&#9670;&nbsp;</a></span>ViewMode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum SceneViewer::ViewMode</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  206</span>{ SCENE_VIEWMODE = 0, LEVEL_VIEWMODE = 1 };</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="adb67280796f09a6800e531a389eb7dae" name="adb67280796f09a6800e531a389eb7dae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb67280796f09a6800e531a389eb7dae">&#9670;&nbsp;</a></span>SceneViewer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SceneViewer::SceneViewer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_image_utils_1_1_full_screen_widget.html">ImageUtils::FullScreenWidget</a> *&#160;</td>
          <td class="paramname"><em>parent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  743</span>    : <a class="code hl_class" href="class_g_l_widget_for_high_dpi.html">GLWidgetForHighDpi</a>(parent)</div>
<div class="line"><span class="lineno">  744</span>    , m_pressure(0)</div>
<div class="line"><span class="lineno">  745</span>    , m_lastMousePos(0, 0)</div>
<div class="line"><span class="lineno">  746</span>    , m_mouseButton(Qt::NoButton)</div>
<div class="line"><span class="lineno">  747</span>    , m_foregroundDrawing(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  748</span>    , m_tabletEvent(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  749</span>    , m_tabletMove(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  750</span>    , m_buttonClicked(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  751</span>    , m_referenceMode(NORMAL_REFERENCE)</div>
<div class="line"><span class="lineno">  752</span>    , m_previewMode(NO_PREVIEW)</div>
<div class="line"><span class="lineno">  753</span>    , m_isMouseEntered(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  754</span>    , m_forceGlFlush(<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  755</span>    , m_freezedStatus(NO_FREEZED)</div>
<div class="line"><span class="lineno">  756</span>    , m_viewGrabImage(0)</div>
<div class="line"><span class="lineno">  757</span>    , m_FPS(0)</div>
<div class="line"><span class="lineno">  758</span>    , m_hRuler(0)</div>
<div class="line"><span class="lineno">  759</span>    , m_vRuler(0)</div>
<div class="line"><span class="lineno">  760</span>    , m_viewMode(SCENE_VIEWMODE)</div>
<div class="line"><span class="lineno">  761</span>    , m_pos(0, 0)</div>
<div class="line"><span class="lineno">  762</span>    , m_pan3D(<a class="code hl_class" href="class_t_point_t.html">TPointD</a>(0, 0))</div>
<div class="line"><span class="lineno">  763</span>    , m_zoomScale3D(0.1)</div>
<div class="line"><span class="lineno">  764</span>    , m_theta3D(20)</div>
<div class="line"><span class="lineno">  765</span>    , m_phi3D(30)</div>
<div class="line"><span class="lineno">  766</span>    , m_dpiScale(<a class="code hl_class" href="class_t_point_t.html">TPointD</a>(1, 1))</div>
<div class="line"><span class="lineno">  767</span>    , m_compareSettings()</div>
<div class="line"><span class="lineno">  768</span>    , m_minZ(0)</div>
<div class="line"><span class="lineno">  769</span>    , m_tableDLId(-1)</div>
<div class="line"><span class="lineno">  770</span>    , m_groupIndexToBeEntered(-1)</div>
<div class="line"><span class="lineno">  771</span>    , m_pixelSize(1)</div>
<div class="line"><span class="lineno">  772</span>    , m_eraserPointerOn(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  773</span>    , m_backupTool(<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno">  774</span>    , m_clipRect()</div>
<div class="line"><span class="lineno">  775</span>    , m_isPicking(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  776</span>    , m_current3DDevice(NONE)</div>
<div class="line"><span class="lineno">  777</span>    , m_sideRasterPos()</div>
<div class="line"><span class="lineno">  778</span>    , m_topRasterPos()</div>
<div class="line"><span class="lineno">  779</span>    , m_toolDisableReason(<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno">  780</span>    , m_editPreviewSubCamera(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  781</span>    , m_locator(NULL)</div>
<div class="line"><span class="lineno">  782</span>    , m_isLocator(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  783</span>    , m_isBusyOnTabletMove(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  784</span>    , m_timer(<span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  785</span>  <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#ab6461a28653bae19432d998149564b43">m_sceneProperties</a> =</div>
<div class="line"><span class="lineno">  786</span>      <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene()-&gt;<a class="code hl_function" href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">getProperties</a>();</div>
<div class="line"><span class="lineno">  787</span><span class="preprocessor">#if defined(x64)</span></div>
<div class="line"><span class="lineno">  788</span>  m_stopMotion = StopMotion::instance();</div>
<div class="line"><span class="lineno">  789</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  790</span>  <span class="comment">// Enables multiple key input.</span></div>
<div class="line"><span class="lineno">  791</span>  setAttribute(Qt::WA_KeyCompression);</div>
<div class="line"><span class="lineno">  792</span>  <span class="comment">// Enables input methods for Asian languages.</span></div>
<div class="line"><span class="lineno">  793</span>  setAttribute(Qt::WA_InputMethodEnabled);</div>
<div class="line"><span class="lineno">  794</span>  setFocusPolicy(Qt::StrongFocus);</div>
<div class="line"><span class="lineno">  795</span>  setAcceptDrops(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  796</span>  this-&gt;setMouseTracking(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  797</span><span class="comment">// introduced from Qt 5.9</span></div>
<div class="line"><span class="lineno">  798</span><span class="preprocessor">#if QT_VERSION &gt;= 0x050900</span></div>
<div class="line"><span class="lineno">  799</span>  this-&gt;setTabletTracking(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  800</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  801</span> </div>
<div class="line"><span class="lineno">  802</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m_viewAff.size(); ++i) {</div>
<div class="line"><span class="lineno">  803</span>    setViewMatrix(getNormalZoomScale(), i);</div>
<div class="line"><span class="lineno">  804</span>    m_rotationAngle[i] = 0.0;</div>
<div class="line"><span class="lineno">  805</span>  }</div>
<div class="line"><span class="lineno">  806</span> </div>
<div class="line"><span class="lineno">  807</span>  m_3DSideR = rasterFromQPixmap(svgToPixmap(<span class="stringliteral">&quot;:Resources/3Dside_r.svg&quot;</span>));</div>
<div class="line"><span class="lineno">  808</span>  m_3DSideL = rasterFromQPixmap(svgToPixmap(<span class="stringliteral">&quot;:Resources/3Dside_l.svg&quot;</span>));</div>
<div class="line"><span class="lineno">  809</span>  m_3DTop   = rasterFromQPixmap(svgToPixmap(<span class="stringliteral">&quot;:Resources/3Dtop.svg&quot;</span>));</div>
<div class="line"><span class="lineno">  810</span> </div>
<div class="line"><span class="lineno">  811</span>  setAttribute(Qt::WA_AcceptTouchEvents);</div>
<div class="line"><span class="lineno">  812</span>  grabGesture(Qt::SwipeGesture);</div>
<div class="line"><span class="lineno">  813</span>  grabGesture(Qt::PanGesture);</div>
<div class="line"><span class="lineno">  814</span>  grabGesture(Qt::PinchGesture);</div>
<div class="line"><span class="lineno">  815</span> </div>
<div class="line"><span class="lineno">  816</span>  setUpdateBehavior(QOpenGLWidget::PartialUpdate);</div>
<div class="line"><span class="lineno">  817</span> </div>
<div class="line"><span class="lineno">  818</span>  <span class="keywordflow">if</span> (Preferences::instance()-&gt;isColorCalibrationEnabled())</div>
<div class="line"><span class="lineno">  819</span>    m_lutCalibrator = <span class="keyword">new</span> <a class="code hl_class" href="class_lut_calibrator.html">LutCalibrator</a>();</div>
<div class="line"><span class="lineno">  820</span>  <span class="keywordflow">if</span> (Preferences::instance()-&gt;is30bitDisplayEnabled())</div>
<div class="line"><span class="lineno">  821</span>    setTextureFormat(TGL_TexFmt10);</div>
<div class="line"><span class="lineno">  822</span>}</div>
<div class="ttc" id="aclass_g_l_widget_for_high_dpi_html"><div class="ttname"><a href="class_g_l_widget_for_high_dpi.html">GLWidgetForHighDpi</a></div><div class="ttdef"><b>Definition:</b> glwidget_for_highdpi.h:12</div></div>
<div class="ttc" id="aclass_image_painter_1_1_visual_settings_html_ab6461a28653bae19432d998149564b43"><div class="ttname"><a href="class_image_painter_1_1_visual_settings.html#ab6461a28653bae19432d998149564b43">ImagePainter::VisualSettings::m_sceneProperties</a></div><div class="ttdeci">TSceneProperties * m_sceneProperties</div><div class="ttdef"><b>Definition:</b> imagepainter.h:50</div></div>
<div class="ttc" id="aclass_lut_calibrator_html"><div class="ttname"><a href="class_lut_calibrator.html">LutCalibrator</a></div><div class="ttdef"><b>Definition:</b> lutcalibrator.h:32</div></div>
<div class="ttc" id="aclass_t_app_html_a24088f8647d5d9447fcec6b9b9bbf9eb"><div class="ttname"><a href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a></div><div class="ttdeci">static TApp * instance()</div><div class="ttdef"><b>Definition:</b> tapp.cpp:215</div></div>
<div class="ttc" id="aclass_t_app_html_abbbf1fae564e9e510826eda4f6637d20"><div class="ttname"><a href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">TApp::getCurrentScene</a></div><div class="ttdeci">TSceneHandle * getCurrentScene() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:106</div></div>
<div class="ttc" id="aclass_t_point_t_html"><div class="ttname"><a href="class_t_point_t.html">TPointT&lt; double &gt;</a></div></div>
<div class="ttc" id="aclass_t_tool_1_1_viewer_html_acf21c5c07a1d6db104fb0518d654e5f3"><div class="ttname"><a href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">TTool::Viewer::m_visualSettings</a></div><div class="ttdeci">ImagePainter::VisualSettings m_visualSettings</div><div class="ttdoc">Settings used by the Viewer to draw scene contents.</div><div class="ttdef"><b>Definition:</b> tool.h:592</div></div>
<div class="ttc" id="aclass_toonz_scene_html_a8ef96fedc17d7def810ac419b0939254"><div class="ttname"><a href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">ToonzScene::getProperties</a></div><div class="ttdeci">TSceneProperties * getProperties() const</div><div class="ttdoc">&lt; Returns a pointer to the scene's properties.</div><div class="ttdef"><b>Definition:</b> toonzscene.h:87</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad371d5a2deaf8b4459670ca8748ba663" name="ad371d5a2deaf8b4459670ca8748ba663"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad371d5a2deaf8b4459670ca8748ba663">&#9670;&nbsp;</a></span>~SceneViewer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SceneViewer::~SceneViewer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  838</span>                          {</div>
<div class="line"><span class="lineno">  839</span>  <span class="comment">// notify FilmStripFrames and safely disconnect with this</span></div>
<div class="line"><span class="lineno">  840</span>  emit aboutToBeDestroyed();</div>
<div class="line"><span class="lineno">  841</span> </div>
<div class="line"><span class="lineno">  842</span>  <span class="keywordflow">if</span> (m_fbo) <span class="keyword">delete</span> m_fbo;</div>
<div class="line"><span class="lineno">  843</span> </div>
<div class="line"><span class="lineno">  844</span>  <span class="comment">// release all the registered context (once when exit the software)</span></div>
<div class="line"><span class="lineno">  845</span>  std::set&lt;TGlContext&gt;::iterator ct, cEnd(l_contexts.end());</div>
<div class="line"><span class="lineno">  846</span>  <span class="keywordflow">for</span> (ct = l_contexts.begin(); ct != cEnd; ++ct)</div>
<div class="line"><span class="lineno">  847</span>    TGLDisplayListsManager::instance()-&gt;<a class="code hl_function" href="class_t_g_l_display_lists_manager.html#a9b723e490c97425b39b238a2d7ad5877">releaseContext</a>(*ct);</div>
<div class="line"><span class="lineno">  848</span>  l_contexts.clear();</div>
<div class="line"><span class="lineno">  849</span>}</div>
<div class="ttc" id="aclass_t_g_l_display_lists_manager_html_a9b723e490c97425b39b238a2d7ad5877"><div class="ttname"><a href="class_t_g_l_display_lists_manager.html#a9b723e490c97425b39b238a2d7ad5877">TGLDisplayListsManager::releaseContext</a></div><div class="ttdeci">void releaseContext(TGlContext context)</div><div class="ttdef"><b>Definition:</b> tgldisplaylistsmanager.cpp:61</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab4227c932f0d4a15dd88bd17492c318c" name="ab4227c932f0d4a15dd88bd17492c318c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4227c932f0d4a15dd88bd17492c318c">&#9670;&nbsp;</a></span>bindFBO()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::bindFBO </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3282</span>                          {</div>
<div class="line"><span class="lineno"> 3283</span>  <span class="keywordflow">if</span> (m_fbo) m_fbo-&gt;bind();</div>
<div class="line"><span class="lineno"> 3284</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a07090c8e03ffdbaa5e79726cecbe7106" name="a07090c8e03ffdbaa5e79726cecbe7106"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07090c8e03ffdbaa5e79726cecbe7106">&#9670;&nbsp;</a></span>canSwapCompared()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SceneViewer::canSwapCompared </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3222</span>                                        {</div>
<div class="line"><span class="lineno"> 3223</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#af46b586bd61bf70e606713bee68c3aad">m_doCompare</a> &amp;&amp; m_previewMode != NO_PREVIEW;</div>
<div class="line"><span class="lineno"> 3224</span>}</div>
<div class="ttc" id="aclass_image_painter_1_1_visual_settings_html_af46b586bd61bf70e606713bee68c3aad"><div class="ttname"><a href="class_image_painter_1_1_visual_settings.html#af46b586bd61bf70e606713bee68c3aad">ImagePainter::VisualSettings::m_doCompare</a></div><div class="ttdeci">bool m_doCompare</div><div class="ttdoc">Whether must compare between two images.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:58</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a469f52509581e555b01fa0c80f90003f" name="a469f52509581e555b01fa0c80f90003f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a469f52509581e555b01fa0c80f90003f">&#9670;&nbsp;</a></span>contextMenuEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::contextMenuEvent </td>
          <td>(</td>
          <td class="paramtype">QContextMenuEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1635</span>                                                       {</div>
<div class="line"><span class="lineno"> 1636</span>  <span class="keywordflow">if</span> (m_tabletEvent) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1637</span><span class="preprocessor">#ifndef _WIN32</span></div>
<div class="line"><span class="lineno"> 1638</span>  <span class="comment">/* On windows the widget receive the release event before the menu</span></div>
<div class="line"><span class="lineno"> 1639</span><span class="comment">     is shown, on linux and osx the release event is lost, never</span></div>
<div class="line"><span class="lineno"> 1640</span><span class="comment">     received by the widget */</span></div>
<div class="line"><span class="lineno"> 1641</span>  QMouseEvent fakeRelease(QEvent::MouseButtonRelease, e-&gt;pos(), Qt::RightButton,</div>
<div class="line"><span class="lineno"> 1642</span>                          Qt::NoButton, Qt::NoModifier);</div>
<div class="line"><span class="lineno"> 1643</span> </div>
<div class="line"><span class="lineno"> 1644</span>  QApplication::instance()-&gt;sendEvent(<span class="keyword">this</span>, &amp;fakeRelease);</div>
<div class="line"><span class="lineno"> 1645</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1646</span> </div>
<div class="line"><span class="lineno"> 1647</span>  onContextMenu(e-&gt;pos(), e-&gt;globalPos());</div>
<div class="line"><span class="lineno"> 1648</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="adea94782b23124e656a813ccc6155210" name="adea94782b23124e656a813ccc6155210"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adea94782b23124e656a813ccc6155210">&#9670;&nbsp;</a></span>doDeleteSubCamera</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::doDeleteSubCamera </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >delete preview - subcamera executed from context menu </p>
<div class="fragment"><div class="line"><span class="lineno"> 3276</span>                                    {</div>
<div class="line"><span class="lineno"> 3277</span>  PreviewSubCameraManager::instance()-&gt;<a class="code hl_function" href="class_preview_sub_camera_manager.html#a31de45a99c892ac1a693462722a1e489">deleteSubCamera</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 3278</span>}</div>
<div class="ttc" id="aclass_preview_sub_camera_manager_html_a31de45a99c892ac1a693462722a1e489"><div class="ttname"><a href="class_preview_sub_camera_manager.html#a31de45a99c892ac1a693462722a1e489">PreviewSubCameraManager::deleteSubCamera</a></div><div class="ttdeci">void deleteSubCamera(SceneViewer *viewer)</div><div class="ttdef"><b>Definition:</b> subcameramanager.cpp:338</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00338">PreviewSubCameraManager::deleteSubCamera()</a>.</p>

</div>
</div>
<a id="a1909248612d4efaec74072bd9856b121" name="a1909248612d4efaec74072bd9856b121"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1909248612d4efaec74072bd9856b121">&#9670;&nbsp;</a></span>dragEnterEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::dragEnterEvent </td>
          <td>(</td>
          <td class="paramtype">QDragEnterEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1707</span>                                                       {</div>
<div class="line"><span class="lineno"> 1708</span>  <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1709</span> </div>
<div class="line"><span class="lineno"> 1710</span>  <span class="keyword">const</span> QMimeData *mimeData = <span class="keyword">event</span>-&gt;mimeData();</div>
<div class="line"><span class="lineno"> 1711</span> </div>
<div class="line"><span class="lineno"> 1712</span>  <span class="keywordflow">if</span> (acceptResourceOrFolderDrop(mimeData-&gt;urls())) {</div>
<div class="line"><span class="lineno"> 1713</span>    <span class="comment">// Force CopyAction</span></div>
<div class="line"><span class="lineno"> 1714</span>    <span class="keyword">event</span>-&gt;setDropAction(Qt::CopyAction);</div>
<div class="line"><span class="lineno"> 1715</span>    <span class="keyword">event</span>-&gt;accept();</div>
<div class="line"><span class="lineno"> 1716</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1717</span>    <span class="keyword">event</span>-&gt;ignore();</div>
<div class="line"><span class="lineno"> 1718</span>  }</div>
<div class="line"><span class="lineno"> 1719</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afe39eb304a79ac869b11b663e9f109c8" name="afe39eb304a79ac869b11b663e9f109c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe39eb304a79ac869b11b663e9f109c8">&#9670;&nbsp;</a></span>drawBackground()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::drawBackground </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1367</span>                                 {</div>
<div class="line"><span class="lineno"> 1368</span>  <a class="code hl_class" href="class_t_app.html">TApp</a> *app         = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>();</div>
<div class="line"><span class="lineno"> 1369</span>  <a class="code hl_class" href="class_toonz_scene.html">ToonzScene</a> *scene = app-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene();</div>
<div class="line"><span class="lineno"> 1370</span> </div>
<div class="line"><span class="lineno"> 1371</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#a84bb519ec0ab16029cba33ff0f3f794f">m_colorMask</a> == 0) {</div>
<div class="line"><span class="lineno"> 1372</span>    TPixel32 bgColor;</div>
<div class="line"><span class="lineno"> 1373</span> </div>
<div class="line"><span class="lineno"> 1374</span>    <span class="keywordflow">if</span> (isPreviewEnabled())</div>
<div class="line"><span class="lineno"> 1375</span>      bgColor = Preferences::instance()-&gt;getPreviewBgColor();</div>
<div class="line"><span class="lineno"> 1376</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1377</span>      bgColor = Preferences::instance()-&gt;getViewerBgColor();</div>
<div class="line"><span class="lineno"> 1378</span>    glClearColor(bgColor.r / 255.0f, bgColor.g / 255.0f, bgColor.b / 255.0f,</div>
<div class="line"><span class="lineno"> 1379</span>                 1.0);</div>
<div class="line"><span class="lineno"> 1380</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1381</span>    glClearColor(0, 0, 0, 1.0);</div>
<div class="line"><span class="lineno"> 1382</span> </div>
<div class="line"><span class="lineno"> 1383</span>  glClear(GL_COLOR_BUFFER_BIT);</div>
<div class="line"><span class="lineno"> 1384</span>  <span class="keywordflow">if</span> (glGetError() == GL_INVALID_FRAMEBUFFER_OPERATION) {</div>
<div class="line"><span class="lineno"> 1385</span>    <span class="comment">/*  GL_FRAMEBUFFER_COMPLETE  invalid operation</span></div>
<div class="line"><span class="lineno"> 1386</span><span class="comment">     *   */</span></div>
<div class="line"><span class="lineno"> 1387</span>    GLenum status = 0;</div>
<div class="line"><span class="lineno"> 1388</span><span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><span class="lineno"> 1389</span>    PROC proc = wglGetProcAddress(<span class="stringliteral">&quot;glCheckFramebufferStatusEXT&quot;</span>);</div>
<div class="line"><span class="lineno"> 1390</span>    <span class="keywordflow">if</span> (proc != <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 1391</span>      status = <span class="keyword">reinterpret_cast&lt;</span>PFNGLCHECKFRAMEBUFFERSTATUSEXTPROC<span class="keyword">&gt;</span>(proc)(</div>
<div class="line"><span class="lineno"> 1392</span>          GL_FRAMEBUFFER);</div>
<div class="line"><span class="lineno"> 1393</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1394</span>    status = glCheckFramebufferStatus(GL_FRAMEBUFFER);</div>
<div class="line"><span class="lineno"> 1395</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1396</span>    printf(<span class="stringliteral">&quot;GL_INVALID_FRAMEBUFFER_OPERATION: framebuffer:%d\n&quot;</span>, status);</div>
<div class="line"><span class="lineno"> 1397</span>  }</div>
<div class="line"><span class="lineno"> 1398</span>}</div>
<div class="ttc" id="aclass_image_painter_1_1_visual_settings_html_a84bb519ec0ab16029cba33ff0f3f794f"><div class="ttname"><a href="class_image_painter_1_1_visual_settings.html#a84bb519ec0ab16029cba33ff0f3f794f">ImagePainter::VisualSettings::m_colorMask</a></div><div class="ttdeci">int m_colorMask</div><div class="ttdoc">Note: 0 means rChan | gChan | bChan (draw all channels).</div><div class="ttdef"><b>Definition:</b> imagepainter.h:43</div></div>
<div class="ttc" id="aclass_t_app_html"><div class="ttname"><a href="class_t_app.html">TApp</a></div><div class="ttdoc">This is the instance of the main application.</div><div class="ttdef"><b>Definition:</b> tapp.h:66</div></div>
<div class="ttc" id="aclass_toonz_scene_html"><div class="ttname"><a href="class_toonz_scene.html">ToonzScene</a></div><div class="ttdef"><b>Definition:</b> toonzscene.h:42</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a82bd279f9e7a5cd329511874367ff6ac" name="a82bd279f9e7a5cd329511874367ff6ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82bd279f9e7a5cd329511874367ff6ac">&#9670;&nbsp;</a></span>drawBuildVars()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::drawBuildVars </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1297</span>                                {</div>
<div class="line"><span class="lineno"> 1298</span>  <a class="code hl_class" href="class_t_app.html">TApp</a> *app = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>();</div>
<div class="line"><span class="lineno"> 1299</span> </div>
<div class="line"><span class="lineno"> 1300</span>  <span class="keywordtype">int</span> frame    = app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFrame();</div>
<div class="line"><span class="lineno"> 1301</span>  <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh = app-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()-&gt;getXsheet();</div>
<div class="line"><span class="lineno"> 1302</span> </div>
<div class="line"><span class="lineno"> 1303</span>  <span class="comment">// Camera affine</span></div>
<div class="line"><span class="lineno"> 1304</span>  <a class="code hl_class" href="class_t_stage_object_id.html">TStageObjectId</a> cameraId = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a5dc925584e35e1678f5678b79c470959">getStageObjectTree</a>()-&gt;<a class="code hl_function" href="class_t_stage_object_tree.html#a7d63ae5d60c3a3aacf5da58c108ac167">getCurrentCameraId</a>();</div>
<div class="line"><span class="lineno"> 1305</span>  <a class="code hl_class" href="class_t_stage_object.html">TStageObject</a> *camera    = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">getStageObject</a>(cameraId);</div>
<div class="line"><span class="lineno"> 1306</span>  <a class="code hl_class" href="class_t_affine.html">TAffine</a> cameraPlacement = camera-&gt;getPlacement(frame);</div>
<div class="line"><span class="lineno"> 1307</span>  <span class="keywordtype">double</span> cameraZ          = camera-&gt;<a class="code hl_function" href="class_t_stage_object.html#a52b1a3ec50ed35fbc07c9a3b64ecc21c">getZ</a>(frame);</div>
<div class="line"><span class="lineno"> 1308</span> </div>
<div class="line"><span class="lineno"> 1309</span>  m_drawCameraAff =</div>
<div class="line"><span class="lineno"> 1310</span>      <a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>() * cameraPlacement * <a class="code hl_class" href="class_t_scale.html">TScale</a>((1000 + cameraZ) / 1000);</div>
<div class="line"><span class="lineno"> 1311</span> </div>
<div class="line"><span class="lineno"> 1312</span>  <span class="comment">// Table affine</span></div>
<div class="line"><span class="lineno"> 1313</span>  <a class="code hl_class" href="class_t_stage_object.html">TStageObject</a> *table    = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">getStageObject</a>(TStageObjectId::TableId);</div>
<div class="line"><span class="lineno"> 1314</span>  <a class="code hl_class" href="class_t_affine.html">TAffine</a> tablePlacement = table-&gt;getPlacement(frame);</div>
<div class="line"><span class="lineno"> 1315</span>  <span class="keywordtype">double</span> tableZ          = table-&gt;<a class="code hl_function" href="class_t_stage_object.html#a52b1a3ec50ed35fbc07c9a3b64ecc21c">getZ</a>(frame);</div>
<div class="line"><span class="lineno"> 1316</span>  <a class="code hl_class" href="class_t_affine.html">TAffine</a> placement;</div>
<div class="line"><span class="lineno"> 1317</span> </div>
<div class="line"><span class="lineno"> 1318</span>  m_drawIsTableVisible = <a class="code hl_function" href="class_t_stage_object.html#a0f219cbc4e42269c0fbd073a62253218">TStageObject::perspective</a>(</div>
<div class="line"><span class="lineno"> 1319</span>      placement, cameraPlacement, cameraZ, tablePlacement, tableZ, 0);</div>
<div class="line"><span class="lineno"> 1320</span>  m_drawTableAff = <a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>() * tablePlacement;</div>
<div class="line"><span class="lineno"> 1321</span> </div>
<div class="line"><span class="lineno"> 1322</span>  <span class="comment">// Camera test check</span></div>
<div class="line"><span class="lineno"> 1323</span>  m_drawCameraTest = <a class="code hl_function" href="class_camera_test_check.html#adc1033b93dea95f49db36d8fb668e16d">CameraTestCheck::instance</a>()-&gt;isEnabled();</div>
<div class="line"><span class="lineno"> 1324</span> </div>
<div class="line"><span class="lineno"> 1325</span>  <span class="keywordflow">if</span> (m_previewMode == NO_PREVIEW) {</div>
<div class="line"><span class="lineno"> 1326</span>    m_drawEditingLevel = app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;isEditingLevel();</div>
<div class="line"><span class="lineno"> 1327</span>    m_viewMode         = m_drawEditingLevel ? LEVEL_VIEWMODE : SCENE_VIEWMODE;</div>
<div class="line"><span class="lineno"> 1328</span>    m_draw3DMode       = is3DView() &amp;&amp; (m_previewMode != SUBCAMERA_PREVIEW);</div>
<div class="line"><span class="lineno"> 1329</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1330</span>    m_drawEditingLevel = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1331</span>    m_viewMode         = app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;isEditingLevel();</div>
<div class="line"><span class="lineno"> 1332</span>    m_draw3DMode       = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1333</span>  }</div>
<div class="line"><span class="lineno"> 1334</span> </div>
<div class="line"><span class="lineno"> 1335</span>  <span class="comment">// Clip rect</span></div>
<div class="line"><span class="lineno"> 1336</span>  <span class="keywordflow">if</span> (!m_clipRect.<a class="code hl_function" href="class_t_rect_t.html#a53ce09c6112f8a019b43ad82d721a93b">isEmpty</a>() &amp;&amp; !m_draw3DMode) {</div>
<div class="line"><span class="lineno"> 1337</span>    m_actualClipRect = getActualClipRect(<a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>());</div>
<div class="line"><span class="lineno"> 1338</span>    m_actualClipRect += <a class="code hl_class" href="class_t_point_t.html">TPoint</a>(width() * 0.5, height() * 0.5);</div>
<div class="line"><span class="lineno"> 1339</span>  }</div>
<div class="line"><span class="lineno"> 1340</span> </div>
<div class="line"><span class="lineno"> 1341</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = app-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 1342</span>  <span class="keywordflow">if</span> (tool &amp;&amp; !m_isLocator) tool-&gt;setViewer(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1343</span>}</div>
<div class="ttc" id="aclass_camera_test_check_html_adc1033b93dea95f49db36d8fb668e16d"><div class="ttname"><a href="class_camera_test_check.html#adc1033b93dea95f49db36d8fb668e16d">CameraTestCheck::instance</a></div><div class="ttdeci">static CameraTestCheck * instance()</div><div class="ttdef"><b>Definition:</b> stage2.cpp:52</div></div>
<div class="ttc" id="aclass_scene_viewer_html_a3f746b9c53dc17030711cac65d96f625"><div class="ttname"><a href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">SceneViewer::getViewMatrix</a></div><div class="ttdeci">TAffine getViewMatrix() const override</div><div class="ttdef"><b>Definition:</b> sceneviewer.cpp:2211</div></div>
<div class="ttc" id="aclass_t_affine_html"><div class="ttname"><a href="class_t_affine.html">TAffine</a></div><div class="ttdoc">This is the base class for the affine transformations.</div><div class="ttdef"><b>Definition:</b> tgeometry.h:864</div></div>
<div class="ttc" id="aclass_t_app_html_a13f509e753824cb0500787f68bb51a09"><div class="ttname"><a href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">TApp::getCurrentXsheet</a></div><div class="ttdeci">TXsheetHandle * getCurrentXsheet() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:110</div></div>
<div class="ttc" id="aclass_t_app_html_a35516f8175dab3ccdf3d6d3c3e5f59ae"><div class="ttname"><a href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">TApp::getCurrentFrame</a></div><div class="ttdeci">TFrameHandle * getCurrentFrame() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:114</div></div>
<div class="ttc" id="aclass_t_app_html_ad70b447aff489792cfc3dbac7150a540"><div class="ttname"><a href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">TApp::getCurrentTool</a></div><div class="ttdeci">ToolHandle * getCurrentTool() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:126</div></div>
<div class="ttc" id="aclass_t_rect_t_html_a53ce09c6112f8a019b43ad82d721a93b"><div class="ttname"><a href="class_t_rect_t.html#a53ce09c6112f8a019b43ad82d721a93b">TRectT::isEmpty</a></div><div class="ttdeci">bool isEmpty() const</div></div>
<div class="ttc" id="aclass_t_scale_html"><div class="ttname"><a href="class_t_scale.html">TScale</a></div><div class="ttdef"><b>Definition:</b> tgeometry.h:1133</div></div>
<div class="ttc" id="aclass_t_stage_object_html"><div class="ttname"><a href="class_t_stage_object.html">TStageObject</a></div><div class="ttdef"><b>Definition:</b> tstageobject.h:95</div></div>
<div class="ttc" id="aclass_t_stage_object_html_a0f219cbc4e42269c0fbd073a62253218"><div class="ttname"><a href="class_t_stage_object.html#a0f219cbc4e42269c0fbd073a62253218">TStageObject::perspective</a></div><div class="ttdeci">static bool perspective(TAffine &amp;aff, const TAffine &amp;cameraAff, double cameraZ, const TAffine &amp;objectAff, double objectZ, double objectNoScaleZ)</div><div class="ttdef"><b>Definition:</b> tstageobject.cpp:1945</div></div>
<div class="ttc" id="aclass_t_stage_object_html_a52b1a3ec50ed35fbc07c9a3b64ecc21c"><div class="ttname"><a href="class_t_stage_object.html#a52b1a3ec50ed35fbc07c9a3b64ecc21c">TStageObject::getZ</a></div><div class="ttdeci">double getZ(double frame)</div><div class="ttdef"><b>Definition:</b> tstageobject.cpp:1423</div></div>
<div class="ttc" id="aclass_t_stage_object_id_html"><div class="ttname"><a href="class_t_stage_object_id.html">TStageObjectId</a></div><div class="ttdef"><b>Definition:</b> tstageobjectid.h:36</div></div>
<div class="ttc" id="aclass_t_stage_object_tree_html_a7d63ae5d60c3a3aacf5da58c108ac167"><div class="ttname"><a href="class_t_stage_object_tree.html#a7d63ae5d60c3a3aacf5da58c108ac167">TStageObjectTree::getCurrentCameraId</a></div><div class="ttdeci">TStageObjectId getCurrentCameraId() const</div><div class="ttdef"><b>Definition:</b> tstageobjecttree.cpp:508</div></div>
<div class="ttc" id="aclass_t_tool_html"><div class="ttname"><a href="class_t_tool.html">TTool</a></div><div class="ttdoc">TTool is the abstract base class defining the interface for Toonz tools - the ones accessible from th...</div><div class="ttdef"><b>Definition:</b> tool.h:258</div></div>
<div class="ttc" id="aclass_t_xsheet_html"><div class="ttname"><a href="class_t_xsheet.html">TXsheet</a></div><div class="ttdef"><b>Definition:</b> txsheet.h:132</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a13d9b9c08ca8dde39769f5644e046ee5"><div class="ttname"><a href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">TXsheet::getStageObject</a></div><div class="ttdeci">TStageObject * getStageObject(const TStageObjectId &amp;id) const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:542</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a5dc925584e35e1678f5678b79c470959"><div class="ttname"><a href="class_t_xsheet.html#a5dc925584e35e1678f5678b79c470959">TXsheet::getStageObjectTree</a></div><div class="ttdeci">TStageObjectTree * getStageObjectTree() const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:549</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa7c81725cc6d3628d8f3ffa69a9e351f" name="aa7c81725cc6d3628d8f3ffa69a9e351f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7c81725cc6d3628d8f3ffa69a9e351f">&#9670;&nbsp;</a></span>drawCameraStand()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::drawCameraStand </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1434</span>                                  {</div>
<div class="line"><span class="lineno"> 1435</span>  GLint e = glGetError();</div>
<div class="line"><span class="lineno"> 1436</span>  check_framebuffer_status();</div>
<div class="line"><span class="lineno"> 1437</span>  assert(e == GL_NO_ERROR);</div>
<div class="line"><span class="lineno"> 1438</span> </div>
<div class="line"><span class="lineno"> 1439</span>  TXshSimpleLevel::m_rasterizePli = rasterizePliToggle.getStatus();</div>
<div class="line"><span class="lineno"> 1440</span> </div>
<div class="line"><span class="lineno"> 1441</span>  <span class="comment">// clear</span></div>
<div class="line"><span class="lineno"> 1442</span>  <span class="keywordflow">if</span> (m_draw3DMode) {</div>
<div class="line"><span class="lineno"> 1443</span>    glEnable(GL_DEPTH_TEST);</div>
<div class="line"><span class="lineno"> 1444</span>    glDepthFunc(GL_ALWAYS);</div>
<div class="line"><span class="lineno"> 1445</span>    glClear(GL_DEPTH_BUFFER_BIT);</div>
<div class="line"><span class="lineno"> 1446</span>    glPushMatrix();</div>
<div class="line"><span class="lineno"> 1447</span>    mult3DMatrix();</div>
<div class="line"><span class="lineno"> 1448</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1449</span>    glDisable(GL_DEPTH_TEST);</div>
<div class="line"><span class="lineno"> 1450</span> </div>
<div class="line"><span class="lineno"> 1451</span>  assert(glGetError() == GL_NO_ERROR);</div>
<div class="line"><span class="lineno"> 1452</span> </div>
<div class="line"><span class="lineno"> 1453</span>  <span class="comment">// draw table</span></div>
<div class="line"><span class="lineno"> 1454</span>  <span class="keywordflow">if</span> (!m_draw3DMode &amp;&amp; viewTableToggle.getStatus() &amp;&amp; m_drawIsTableVisible &amp;&amp;</div>
<div class="line"><span class="lineno"> 1455</span>      <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#a84bb519ec0ab16029cba33ff0f3f794f">m_colorMask</a> == 0 &amp;&amp; m_drawEditingLevel == <span class="keyword">false</span> &amp;&amp;</div>
<div class="line"><span class="lineno"> 1456</span>      !m_drawCameraTest) {</div>
<div class="line"><span class="lineno"> 1457</span>    glPushMatrix();</div>
<div class="line"><span class="lineno"> 1458</span>    tglMultMatrix(m_drawTableAff);</div>
<div class="line"><span class="lineno"> 1459</span>    ViewerDraw::drawDisk(m_tableDLId);</div>
<div class="line"><span class="lineno"> 1460</span>    glPopMatrix();</div>
<div class="line"><span class="lineno"> 1461</span>  }</div>
<div class="line"><span class="lineno"> 1462</span> </div>
<div class="line"><span class="lineno"> 1463</span>  <span class="comment">// draw colorcard (with camera BG color)</span></div>
<div class="line"><span class="lineno"> 1464</span>  <span class="comment">// Hide camera BG when level editing mode.</span></div>
<div class="line"><span class="lineno"> 1465</span>  <span class="keywordflow">if</span> (m_drawEditingLevel == <span class="keyword">false</span> &amp;&amp; viewClcToggle.getStatus() &amp;&amp;</div>
<div class="line"><span class="lineno"> 1466</span>      !m_drawCameraTest) {</div>
<div class="line"><span class="lineno"> 1467</span>    glPushMatrix();</div>
<div class="line"><span class="lineno"> 1468</span>    tglMultMatrix(m_drawCameraAff);</div>
<div class="line"><span class="lineno"> 1469</span>    glEnable(GL_BLEND);</div>
<div class="line"><span class="lineno"> 1470</span>    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</div>
<div class="line"><span class="lineno"> 1471</span>    ViewerDraw::drawColorcard(<a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#a84bb519ec0ab16029cba33ff0f3f794f">m_colorMask</a>);</div>
<div class="line"><span class="lineno"> 1472</span>    glDisable(GL_BLEND);</div>
<div class="line"><span class="lineno"> 1473</span>    glPopMatrix();</div>
<div class="line"><span class="lineno"> 1474</span>  }</div>
<div class="line"><span class="lineno"> 1475</span> </div>
<div class="line"><span class="lineno"> 1476</span>  <span class="comment">// Show white background when level editing mode.</span></div>
<div class="line"><span class="lineno"> 1477</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 1478</span>  <span class="keywordflow">if</span> (m_drawEditingLevel &amp;&amp; tool &amp;&amp; tool-&gt;isEnabled()) {</div>
<div class="line"><span class="lineno"> 1479</span>    <span class="keywordflow">if</span> (!m_isLocator) tool-&gt;setViewer(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1480</span>    glPushMatrix();</div>
<div class="line"><span class="lineno"> 1481</span>    <span class="keywordflow">if</span> (m_referenceMode == CAMERA3D_REFERENCE) {</div>
<div class="line"><span class="lineno"> 1482</span>      mult3DMatrix();</div>
<div class="line"><span class="lineno"> 1483</span>      tglMultMatrix(tool-&gt;getMatrix());</div>
<div class="line"><span class="lineno"> 1484</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1485</span>      tglMultMatrix(<a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>() * tool-&gt;getMatrix());</div>
<div class="line"><span class="lineno"> 1486</span>    }</div>
<div class="line"><span class="lineno"> 1487</span>    glScaled(m_dpiScale.x, m_dpiScale.y, 1);</div>
<div class="line"><span class="lineno"> 1488</span> </div>
<div class="line"><span class="lineno"> 1489</span>    <a class="code hl_class" href="class_t_smart_pointer_t.html">TImageP</a> image = tool-&gt;<a class="code hl_function" href="class_t_tool.html#a947d2af39fd4df397577bbf8602abfd4">getImage</a>(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1490</span> </div>
<div class="line"><span class="lineno"> 1491</span>    <a class="code hl_class" href="class_t_toonz_image_p.html">TToonzImageP</a> ti  = image;</div>
<div class="line"><span class="lineno"> 1492</span>    <a class="code hl_class" href="class_t_raster_image_p.html">TRasterImageP</a> ri = image;</div>
<div class="line"><span class="lineno"> 1493</span>    <span class="keywordflow">if</span> (ti) {</div>
<div class="line"><span class="lineno"> 1494</span>      <a class="code hl_class" href="class_t_rect_t.html">TRect</a> imgRect(0, 0, ti-&gt;getSize().lx - 1, ti-&gt;getSize().ly - 1);</div>
<div class="line"><span class="lineno"> 1495</span>      <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> bbox = ToonzImageUtils::convertRasterToWorld(imgRect, ti);</div>
<div class="line"><span class="lineno"> 1496</span> </div>
<div class="line"><span class="lineno"> 1497</span>      TPixel32 imgRectColor;</div>
<div class="line"><span class="lineno"> 1498</span>      <span class="comment">// draw black rectangle instead, if the BlackBG check is ON</span></div>
<div class="line"><span class="lineno"> 1499</span>      <span class="keywordflow">if</span> (ToonzCheck::instance()-&gt;getChecks() &amp; <a class="code hl_enumvalue" href="class_toonz_check.html#add5b28b42f552cf90e3cfcde9e737876ab6d35869ac2f7cfc956d498b2089a1ff">ToonzCheck::eBlackBg</a>)</div>
<div class="line"><span class="lineno"> 1500</span>        imgRectColor = TPixel::Black;</div>
<div class="line"><span class="lineno"> 1501</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1502</span>        imgRectColor = Preferences::instance()-&gt;getLevelEditorBoxColor();</div>
<div class="line"><span class="lineno"> 1503</span>      ToolUtils::fillRect(bbox * ti-&gt;getSubsampling(), imgRectColor);</div>
<div class="line"><span class="lineno"> 1504</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ri) {</div>
<div class="line"><span class="lineno"> 1505</span>      <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> bbox = ri-&gt;getBBox();</div>
<div class="line"><span class="lineno"> 1506</span>      bbox.<a class="code hl_variable" href="class_t_rect_t.html#ac008cbc625f50d8b3c180c8eb2594cdb">x0</a> -= ri-&gt;getBBox().getLx() * 0.5;</div>
<div class="line"><span class="lineno"> 1507</span>      bbox.x1 -= ri-&gt;getBBox().getLx() * 0.5;</div>
<div class="line"><span class="lineno"> 1508</span>      bbox.y0 -= ri-&gt;getBBox().getLy() * 0.5;</div>
<div class="line"><span class="lineno"> 1509</span>      bbox.y1 -= ri-&gt;getBBox().getLy() * 0.5;</div>
<div class="line"><span class="lineno"> 1510</span> </div>
<div class="line"><span class="lineno"> 1511</span>      TPixel32 imgRectColor;</div>
<div class="line"><span class="lineno"> 1512</span>      <span class="comment">// draw black rectangle instead, if the BlackBG check is ON</span></div>
<div class="line"><span class="lineno"> 1513</span>      <span class="keywordflow">if</span> (ToonzCheck::instance()-&gt;getChecks() &amp; <a class="code hl_enumvalue" href="class_toonz_check.html#add5b28b42f552cf90e3cfcde9e737876ab6d35869ac2f7cfc956d498b2089a1ff">ToonzCheck::eBlackBg</a>)</div>
<div class="line"><span class="lineno"> 1514</span>        imgRectColor = TPixel::Black;</div>
<div class="line"><span class="lineno"> 1515</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1516</span>        imgRectColor = Preferences::instance()-&gt;getLevelEditorBoxColor();</div>
<div class="line"><span class="lineno"> 1517</span>      ToolUtils::fillRect(bbox * ri-&gt;getSubsampling(), imgRectColor);</div>
<div class="line"><span class="lineno"> 1518</span>    }</div>
<div class="line"><span class="lineno"> 1519</span>    glPopMatrix();</div>
<div class="line"><span class="lineno"> 1520</span>  }</div>
<div class="line"><span class="lineno"> 1521</span> </div>
<div class="line"><span class="lineno"> 1522</span>  <span class="comment">// draw 3dframe</span></div>
<div class="line"><span class="lineno"> 1523</span>  <span class="keywordflow">if</span> (m_draw3DMode) {</div>
<div class="line"><span class="lineno"> 1524</span>    glDepthFunc(GL_LEQUAL);</div>
<div class="line"><span class="lineno"> 1525</span>    ViewerDraw::draw3DFrame(m_minZ, m_phi3D);</div>
<div class="line"><span class="lineno"> 1526</span>    glDepthFunc(GL_ALWAYS);</div>
<div class="line"><span class="lineno"> 1527</span>  }</div>
<div class="line"><span class="lineno"> 1528</span> </div>
<div class="line"><span class="lineno"> 1529</span>  <span class="comment">// draw scene</span></div>
<div class="line"><span class="lineno"> 1530</span>  assert(glGetError() == GL_NO_ERROR);</div>
<div class="line"><span class="lineno"> 1531</span>  drawScene();</div>
<div class="line"><span class="lineno"> 1532</span>  assert((glGetError()) == GL_NO_ERROR);</div>
<div class="line"><span class="lineno"> 1533</span>}</div>
<div class="ttc" id="aclass_t_raster_image_p_html"><div class="ttname"><a href="class_t_raster_image_p.html">TRasterImageP</a></div><div class="ttdef"><b>Definition:</b> trasterimage.h:148</div></div>
<div class="ttc" id="aclass_t_rect_t_html"><div class="ttname"><a href="class_t_rect_t.html">TRectT&lt; int &gt;</a></div></div>
<div class="ttc" id="aclass_t_rect_t_html_ac008cbc625f50d8b3c180c8eb2594cdb"><div class="ttname"><a href="class_t_rect_t.html#ac008cbc625f50d8b3c180c8eb2594cdb">TRectT::x0</a></div><div class="ttdeci">T x0</div><div class="ttdef"><b>Definition:</b> tgeometry.h:557</div></div>
<div class="ttc" id="aclass_t_smart_pointer_t_html"><div class="ttname"><a href="class_t_smart_pointer_t.html">TSmartPointerT&lt; TImage &gt;</a></div></div>
<div class="ttc" id="aclass_t_tool_html_a947d2af39fd4df397577bbf8602abfd4"><div class="ttname"><a href="class_t_tool.html#a947d2af39fd4df397577bbf8602abfd4">TTool::getImage</a></div><div class="ttdeci">static TImage * getImage(bool toBeModified, int subsampling=0)</div><div class="ttdoc">Returns the image to be edited by the tool.</div><div class="ttdef"><b>Definition:</b> tool.cpp:276</div></div>
<div class="ttc" id="aclass_t_toonz_image_p_html"><div class="ttname"><a href="class_t_toonz_image_p.html">TToonzImageP</a></div><div class="ttdef"><b>Definition:</b> ttoonzimage.h:126</div></div>
<div class="ttc" id="aclass_toonz_check_html_add5b28b42f552cf90e3cfcde9e737876ab6d35869ac2f7cfc956d498b2089a1ff"><div class="ttname"><a href="class_toonz_check.html#add5b28b42f552cf90e3cfcde9e737876ab6d35869ac2f7cfc956d498b2089a1ff">ToonzCheck::eBlackBg</a></div><div class="ttdeci">@ eBlackBg</div><div class="ttdoc">Black background check.</div><div class="ttdef"><b>Definition:</b> stage2.h:44</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a841bc094686713386e52af05c0e1be10" name="a841bc094686713386e52af05c0e1be10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a841bc094686713386e52af05c0e1be10">&#9670;&nbsp;</a></span>drawDisableScissor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::drawDisableScissor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1357</span>                                     {</div>
<div class="line"><span class="lineno"> 1358</span>  <span class="keywordflow">if</span> (!m_clipRect.<a class="code hl_function" href="class_t_rect_t.html#a53ce09c6112f8a019b43ad82d721a93b">isEmpty</a>() &amp;&amp; !m_draw3DMode) {</div>
<div class="line"><span class="lineno"> 1359</span>    glDisable(GL_SCISSOR_TEST);</div>
<div class="line"><span class="lineno"> 1360</span>  }</div>
<div class="line"><span class="lineno"> 1361</span>  <span class="comment">// clear the clipping rect</span></div>
<div class="line"><span class="lineno"> 1362</span>  m_clipRect.empty();</div>
<div class="line"><span class="lineno"> 1363</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a682781eebe470f3d40740d46180a1b6c" name="a682781eebe470f3d40740d46180a1b6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a682781eebe470f3d40740d46180a1b6c">&#9670;&nbsp;</a></span>drawEnableScissor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::drawEnableScissor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1347</span>                                    {</div>
<div class="line"><span class="lineno"> 1348</span>  <span class="keywordflow">if</span> (!m_clipRect.<a class="code hl_function" href="class_t_rect_t.html#a53ce09c6112f8a019b43ad82d721a93b">isEmpty</a>() &amp;&amp; !m_draw3DMode) {</div>
<div class="line"><span class="lineno"> 1349</span>    glEnable(GL_SCISSOR_TEST);</div>
<div class="line"><span class="lineno"> 1350</span>    glScissor(m_actualClipRect.<a class="code hl_variable" href="class_t_rect_t.html#ac008cbc625f50d8b3c180c8eb2594cdb">x0</a>, m_actualClipRect.y0,</div>
<div class="line"><span class="lineno"> 1351</span>              m_actualClipRect.getLx(), m_actualClipRect.getLy());</div>
<div class="line"><span class="lineno"> 1352</span>  }</div>
<div class="line"><span class="lineno"> 1353</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f65aa9285528e26a555615fd8693128" name="a7f65aa9285528e26a555615fd8693128"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f65aa9285528e26a555615fd8693128">&#9670;&nbsp;</a></span>drawOverlay()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::drawOverlay </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >cameraTest</p>
<div class="fragment"><div class="line"><span class="lineno"> 1598</span>                              {</div>
<div class="line"><span class="lineno"> 1599</span>  <a class="code hl_class" href="class_t_app.html">TApp</a> *app = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>();</div>
<div class="line"><span class="lineno"> 1600</span> </div>
<div class="line"><span class="lineno"> 1601</span>  <span class="comment">// draw camera mask</span></div>
<div class="line"><span class="lineno"> 1602</span>  <span class="keywordflow">if</span> (m_referenceMode == CAMERA_REFERENCE &amp;&amp; !m_drawCameraTest) {</div>
<div class="line"><span class="lineno"> 1603</span>    glPushMatrix();</div>
<div class="line"><span class="lineno"> 1604</span>    tglMultMatrix(m_drawCameraAff);</div>
<div class="line"><span class="lineno"> 1605</span>    ViewerDraw::drawCameraMask(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1606</span>    glPopMatrix();</div>
<div class="line"><span class="lineno"> 1607</span>  }</div>
<div class="line"><span class="lineno"> 1608</span> </div>
<div class="line"><span class="lineno"> 1609</span>  <span class="comment">// draw FieldGuide</span></div>
<div class="line"><span class="lineno"> 1610</span>  <span class="keywordflow">if</span> (fieldGuideToggle.getStatus()) {</div>
<div class="line"><span class="lineno"> 1611</span>    glPushMatrix();</div>
<div class="line"><span class="lineno"> 1612</span>    tglMultMatrix(m_drawTableAff);</div>
<div class="line"><span class="lineno"> 1613</span>    ViewerDraw::drawFieldGuide();</div>
<div class="line"><span class="lineno"> 1614</span>    glPopMatrix();</div>
<div class="line"><span class="lineno"> 1615</span>  }</div>
<div class="line"><span class="lineno"> 1616</span> </div>
<div class="line"><span class="lineno"> 1617</span>  <span class="keywordflow">if</span> (!m_drawCameraTest) {</div>
<div class="line"><span class="lineno"> 1618</span>    <span class="comment">// draw grid &amp; guides</span></div>
<div class="line"><span class="lineno"> 1619</span>    <span class="keywordflow">if</span> (viewGuideToggle.getStatus() &amp;&amp;</div>
<div class="line"><span class="lineno"> 1620</span>        ((m_vRuler &amp;&amp; m_vRuler-&gt;getGuideCount()) ||</div>
<div class="line"><span class="lineno"> 1621</span>         (m_hRuler &amp;&amp; m_hRuler-&gt;getGuideCount()))) {</div>
<div class="line"><span class="lineno"> 1622</span>      glPushMatrix();</div>
<div class="line"><span class="lineno"> 1623</span>      tglMultMatrix(<a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>());</div>
<div class="line"><span class="lineno"> 1624</span>      ViewerDraw::drawGridAndGuides(</div>
<div class="line"><span class="lineno"> 1625</span>          <span class="keyword">this</span>, (m_draw3DMode) ? m_zoomScale3D : m_viewAff[m_viewMode].det(),</div>
<div class="line"><span class="lineno"> 1626</span>          m_vRuler, m_hRuler, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1627</span>      glPopMatrix();</div>
<div class="line"><span class="lineno"> 1628</span>    }</div>
<div class="line"><span class="lineno"> 1629</span> </div>
<div class="line"><span class="lineno"> 1630</span>    <span class="comment">// draw camera</span></div>
<div class="line"><span class="lineno"> 1631</span>    <span class="keywordflow">if</span> (viewCameraToggle.getStatus() &amp;&amp; m_drawEditingLevel == <span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno"> 1632</span>      <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> f = 0;</div>
<div class="line"><span class="lineno"> 1633</span>      <span class="keywordflow">if</span> (m_referenceMode == CAMERA_REFERENCE)</div>
<div class="line"><span class="lineno"> 1634</span>        f |= ViewerDraw::CAMERA_REFERENCE;</div>
<div class="line"><span class="lineno"> 1635</span>      <span class="keywordflow">if</span> (m_draw3DMode) f |= ViewerDraw::CAMERA_3D;</div>
<div class="line"><span class="lineno"> 1636</span>      <span class="keywordflow">if</span> (m_previewMode == SUBCAMERA_PREVIEW || m_editPreviewSubCamera)</div>
<div class="line"><span class="lineno"> 1637</span>        f |= ViewerDraw::SUBCAMERA;</div>
<div class="line"><span class="lineno"> 1638</span>      <span class="keywordflow">if</span> (m_draw3DMode)</div>
<div class="line"><span class="lineno"> 1639</span>        ViewerDraw::draw3DCamera(f, m_minZ, m_phi3D);</div>
<div class="line"><span class="lineno"> 1640</span>      <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1641</span>        glPushMatrix();</div>
<div class="line"><span class="lineno"> 1642</span>        tglMultMatrix(m_drawCameraAff);</div>
<div class="line"><span class="lineno"> 1643</span>        m_pixelSize = sqrt(tglGetPixelSize2()) * getDevPixRatio();</div>
<div class="line"><span class="lineno"> 1644</span>        ViewerDraw::drawCamera(f, m_pixelSize);</div>
<div class="line"><span class="lineno"> 1645</span>        glPopMatrix();</div>
<div class="line"><span class="lineno"> 1646</span>      }</div>
<div class="line"><span class="lineno"> 1647</span>    }</div>
<div class="line"><span class="lineno"> 1648</span> </div>
<div class="line"><span class="lineno"> 1649</span><span class="preprocessor">#ifdef WITH_CANON</span></div>
<div class="line"><span class="lineno"> 1650</span>    <span class="keywordflow">if</span> (m_stopMotion-&gt;m_liveViewStatus == StopMotion::LiveViewOpen &amp;&amp;</div>
<div class="line"><span class="lineno"> 1651</span>        app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFrame() ==</div>
<div class="line"><span class="lineno"> 1652</span>            m_stopMotion-&gt;getXSheetFrameNumber() - 1) {</div>
<div class="line"><span class="lineno"> 1653</span>      <span class="keywordtype">int</span> x0, x1, y0, y1;</div>
<div class="line"><span class="lineno"> 1654</span>      rect().getCoords(&amp;x0, &amp;y0, &amp;x1, &amp;y1);</div>
<div class="line"><span class="lineno"> 1655</span>      x0 = (-(x1 / 2)) + 15;</div>
<div class="line"><span class="lineno"> 1656</span>      y0 = ((y1 / 2)) - 15;</div>
<div class="line"><span class="lineno"> 1657</span>      tglDrawDisk(<a class="code hl_class" href="class_t_point_t.html">TPointD</a>(x0, y0), 10);</div>
<div class="line"><span class="lineno"> 1658</span>    }</div>
<div class="line"><span class="lineno"> 1659</span> </div>
<div class="line"><span class="lineno"> 1660</span>    <span class="comment">// draw Stop Motion Zoom Box</span></div>
<div class="line"><span class="lineno"> 1661</span>    <span class="keywordflow">if</span> (m_stopMotion-&gt;m_liveViewStatus == 2 &amp;&amp;</div>
<div class="line"><span class="lineno"> 1662</span>        m_stopMotion-&gt;m_canon-&gt;m_pickLiveViewZoom) {</div>
<div class="line"><span class="lineno"> 1663</span>      glPushMatrix();</div>
<div class="line"><span class="lineno"> 1664</span>      tglMultMatrix(m_drawCameraAff);</div>
<div class="line"><span class="lineno"> 1665</span>      m_pixelSize = sqrt(tglGetPixelSize2()) * getDevPixRatio();</div>
<div class="line"><span class="lineno"> 1666</span>      <a class="code hl_class" href="class_t_rect_t.html">TRect</a> rect  = m_stopMotion-&gt;m_canon-&gt;m_zoomRect;</div>
<div class="line"><span class="lineno"> 1667</span> </div>
<div class="line"><span class="lineno"> 1668</span>      glColor3d(1.0, 0.0, 0.0);</div>
<div class="line"><span class="lineno"> 1669</span> </div>
<div class="line"><span class="lineno"> 1670</span>      <span class="comment">// border</span></div>
<div class="line"><span class="lineno"> 1671</span>      glBegin(GL_LINE_STRIP);</div>
<div class="line"><span class="lineno"> 1672</span>      glVertex2d(rect.<a class="code hl_variable" href="class_t_rect_t.html#ac008cbc625f50d8b3c180c8eb2594cdb">x0</a>, rect.y0);</div>
<div class="line"><span class="lineno"> 1673</span>      glVertex2d(rect.<a class="code hl_variable" href="class_t_rect_t.html#ac008cbc625f50d8b3c180c8eb2594cdb">x0</a>, rect.y1 - m_pixelSize);</div>
<div class="line"><span class="lineno"> 1674</span>      glVertex2d(rect.x1 - m_pixelSize, rect.y1 - m_pixelSize);</div>
<div class="line"><span class="lineno"> 1675</span>      glVertex2d(rect.x1 - m_pixelSize, rect.y0);</div>
<div class="line"><span class="lineno"> 1676</span>      glVertex2d(rect.<a class="code hl_variable" href="class_t_rect_t.html#ac008cbc625f50d8b3c180c8eb2594cdb">x0</a>, rect.y0);</div>
<div class="line"><span class="lineno"> 1677</span>      glEnd();</div>
<div class="line"><span class="lineno"> 1678</span> </div>
<div class="line"><span class="lineno"> 1679</span>      glPopMatrix();</div>
<div class="line"><span class="lineno"> 1680</span>    }</div>
<div class="line"><span class="lineno"> 1681</span> </div>
<div class="line"><span class="lineno"> 1682</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1683</span> </div>
<div class="line"><span class="lineno"> 1684</span>    <span class="comment">// safe area</span></div>
<div class="line"><span class="lineno"> 1685</span>    <span class="keywordflow">if</span> (safeAreaToggle.getStatus() &amp;&amp; m_drawEditingLevel == <span class="keyword">false</span> &amp;&amp;</div>
<div class="line"><span class="lineno"> 1686</span>        !is3DView()) {</div>
<div class="line"><span class="lineno"> 1687</span>      glPushMatrix();</div>
<div class="line"><span class="lineno"> 1688</span>      tglMultMatrix(m_drawCameraAff);</div>
<div class="line"><span class="lineno"> 1689</span>      ViewerDraw::drawSafeArea();</div>
<div class="line"><span class="lineno"> 1690</span>      glPopMatrix();</div>
<div class="line"><span class="lineno"> 1691</span>    }</div>
<div class="line"><span class="lineno"> 1692</span> </div>
<div class="line"><span class="lineno"> 1693</span>    <span class="comment">// record fps (frame per second)</span></div>
<div class="line"><span class="lineno"> 1694</span>    <span class="keywordflow">if</span> (app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;isPlaying())</div>
<div class="line"><span class="lineno"> 1695</span>      m_FPS = getActualFrameRate();</div>
<div class="line"><span class="lineno"> 1696</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1697</span>      m_FPS = 0;</div>
<div class="line"><span class="lineno"> 1698</span> </div>
<div class="line"><span class="lineno"> 1699</span>    <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) {</div>
<div class="line"><span class="lineno"> 1700</span>      tglColor(TPixel32::Red);</div>
<div class="line"><span class="lineno"> 1701</span>      tglDrawText(<a class="code hl_class" href="class_t_point_t.html">TPointD</a>(0, 0), <span class="stringliteral">&quot;FROZEN&quot;</span>);</div>
<div class="line"><span class="lineno"> 1702</span>    }</div>
<div class="line"><span class="lineno"> 1703</span>    assert(glGetError() == GL_NO_ERROR);</div>
<div class="line"><span class="lineno"> 1704</span> </div>
<div class="line"><span class="lineno"> 1705</span>  }  </div>
<div class="line"><span class="lineno"> 1706</span> </div>
<div class="line"><span class="lineno"> 1707</span>  <span class="comment">// draw 3d Top/Side Buttons</span></div>
<div class="line"><span class="lineno"> 1708</span>  <span class="keywordflow">if</span> (m_draw3DMode &amp;&amp; !m_isPicking) {</div>
<div class="line"><span class="lineno"> 1709</span>    tglColor(TPixel32::Black);</div>
<div class="line"><span class="lineno"> 1710</span> </div>
<div class="line"><span class="lineno"> 1711</span>    GLdouble modelView3D[16];</div>
<div class="line"><span class="lineno"> 1712</span>    GLdouble projection3D[16];</div>
<div class="line"><span class="lineno"> 1713</span>    GLint viewport3D[4];</div>
<div class="line"><span class="lineno"> 1714</span> </div>
<div class="line"><span class="lineno"> 1715</span>    glGetDoublev(GL_MODELVIEW_MATRIX, modelView3D);</div>
<div class="line"><span class="lineno"> 1716</span>    glGetDoublev(GL_PROJECTION_MATRIX, projection3D);</div>
<div class="line"><span class="lineno"> 1717</span>    glGetIntegerv(GL_VIEWPORT, viewport3D);</div>
<div class="line"><span class="lineno"> 1718</span> </div>
<div class="line"><span class="lineno"> 1719</span>    <span class="keywordflow">if</span> (m_phi3D &gt; 0) {</div>
<div class="line"><span class="lineno"> 1720</span>      <a class="code hl_class" href="class_t3_d_point_t.html">T3DPointD</a> topRasterPos3D = computeNew3DPosition(</div>
<div class="line"><span class="lineno"> 1721</span>          <a class="code hl_class" href="class_t3_d_point_t.html">T3DPointD</a>(500, 500, 1000), <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(-10, -10), m_topRasterPos,</div>
<div class="line"><span class="lineno"> 1722</span>          modelView3D, projection3D, viewport3D, getDevPixRatio());</div>
<div class="line"><span class="lineno"> 1723</span>      glRasterPos3f(topRasterPos3D.x, topRasterPos3D.y, topRasterPos3D.z);</div>
<div class="line"><span class="lineno"> 1724</span>      glPixelStorei(GL_UNPACK_ROW_LENGTH, 0);</div>
<div class="line"><span class="lineno"> 1725</span>      glDrawPixels(m_3DTop-&gt;getWrap(), m_3DTop-&gt;getLy(), TGL_FMT, TGL_TYPE,</div>
<div class="line"><span class="lineno"> 1726</span>                   m_3DTop-&gt;getRawData());</div>
<div class="line"><span class="lineno"> 1727</span> </div>
<div class="line"><span class="lineno"> 1728</span>      <a class="code hl_class" href="class_t3_d_point_t.html">T3DPointD</a> sideRasterPos3D = computeNew3DPosition(</div>
<div class="line"><span class="lineno"> 1729</span>          <a class="code hl_class" href="class_t3_d_point_t.html">T3DPointD</a>(-500, -500, 1000), <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(-10, -10), m_sideRasterPos,</div>
<div class="line"><span class="lineno"> 1730</span>          modelView3D, projection3D, viewport3D, getDevPixRatio());</div>
<div class="line"><span class="lineno"> 1731</span>      glRasterPos3f(sideRasterPos3D.x, sideRasterPos3D.y, sideRasterPos3D.z);</div>
<div class="line"><span class="lineno"> 1732</span>      glPixelStorei(GL_UNPACK_ROW_LENGTH, 0);</div>
<div class="line"><span class="lineno"> 1733</span>      glDrawPixels(m_3DSideR-&gt;getWrap(), m_3DSideR-&gt;getLy(), TGL_FMT, TGL_TYPE,</div>
<div class="line"><span class="lineno"> 1734</span>                   m_3DSideR-&gt;getRawData());</div>
<div class="line"><span class="lineno"> 1735</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1736</span>      <a class="code hl_class" href="class_t3_d_point_t.html">T3DPointD</a> topRasterPos3D = computeNew3DPosition(</div>
<div class="line"><span class="lineno"> 1737</span>          <a class="code hl_class" href="class_t3_d_point_t.html">T3DPointD</a>(-500, 500, 1000), <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(-10, -10), m_topRasterPos,</div>
<div class="line"><span class="lineno"> 1738</span>          modelView3D, projection3D, viewport3D, getDevPixRatio());</div>
<div class="line"><span class="lineno"> 1739</span>      glRasterPos3f(topRasterPos3D.x, topRasterPos3D.y, topRasterPos3D.z);</div>
<div class="line"><span class="lineno"> 1740</span>      glPixelStorei(GL_UNPACK_ROW_LENGTH, 0);</div>
<div class="line"><span class="lineno"> 1741</span>      glDrawPixels(m_3DTop-&gt;getWrap(), m_3DTop-&gt;getLy(), TGL_FMT, TGL_TYPE,</div>
<div class="line"><span class="lineno"> 1742</span>                   m_3DTop-&gt;getRawData());</div>
<div class="line"><span class="lineno"> 1743</span> </div>
<div class="line"><span class="lineno"> 1744</span>      <a class="code hl_class" href="class_t3_d_point_t.html">T3DPointD</a> sideRasterPos3D = computeNew3DPosition(</div>
<div class="line"><span class="lineno"> 1745</span>          <a class="code hl_class" href="class_t3_d_point_t.html">T3DPointD</a>(500, -500, 1000), <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(-10, -10), m_sideRasterPos,</div>
<div class="line"><span class="lineno"> 1746</span>          modelView3D, projection3D, viewport3D, getDevPixRatio());</div>
<div class="line"><span class="lineno"> 1747</span>      glRasterPos3f(sideRasterPos3D.x, sideRasterPos3D.y, sideRasterPos3D.z);</div>
<div class="line"><span class="lineno"> 1748</span>      glPixelStorei(GL_UNPACK_ROW_LENGTH, 0);</div>
<div class="line"><span class="lineno"> 1749</span>      glDrawPixels(m_3DSideL-&gt;getWrap(), m_3DSideL-&gt;getLy(), TGL_FMT, TGL_TYPE,</div>
<div class="line"><span class="lineno"> 1750</span>                   m_3DSideL-&gt;getRawData());</div>
<div class="line"><span class="lineno"> 1751</span>    }</div>
<div class="line"><span class="lineno"> 1752</span>  }</div>
<div class="line"><span class="lineno"> 1753</span> </div>
<div class="line"><span class="lineno"> 1754</span>  <span class="keywordflow">if</span> (m_draw3DMode) {</div>
<div class="line"><span class="lineno"> 1755</span>    glDisable(GL_DEPTH_TEST);</div>
<div class="line"><span class="lineno"> 1756</span>    glPopMatrix();</div>
<div class="line"><span class="lineno"> 1757</span>    assert(glGetError() == GL_NO_ERROR);</div>
<div class="line"><span class="lineno"> 1758</span>  }</div>
<div class="line"><span class="lineno"> 1759</span> </div>
<div class="line"><span class="lineno"> 1760</span>  <span class="comment">// draw tool gadgets</span></div>
<div class="line"><span class="lineno"> 1761</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool         = app-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 1762</span>  <a class="code hl_class" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a> *sl = app-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>()-&gt;getSimpleLevel();</div>
<div class="line"><span class="lineno"> 1763</span>  <span class="comment">// Call tool-&gt;draw() even if the level is read only (i.e. to show hooks)</span></div>
<div class="line"><span class="lineno"> 1764</span>  <span class="keywordflow">if</span> (tool &amp;&amp; (tool-&gt;isEnabled() || (sl &amp;&amp; sl-&gt;isReadOnly()))) {</div>
<div class="line"><span class="lineno"> 1765</span>    <span class="comment">// tool-&gt;setViewer(this);                            // Moved at</span></div>
<div class="line"><span class="lineno"> 1766</span>    <span class="comment">// drawBuildVars(), before drawing anything</span></div>
<div class="line"><span class="lineno"> 1767</span>    glPushMatrix();</div>
<div class="line"><span class="lineno"> 1768</span>    <span class="keywordflow">if</span> (m_draw3DMode) {</div>
<div class="line"><span class="lineno"> 1769</span>      mult3DMatrix();</div>
<div class="line"><span class="lineno"> 1770</span>      tglMultMatrix(tool-&gt;getMatrix());</div>
<div class="line"><span class="lineno"> 1771</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1772</span>      tglMultMatrix(<a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>() * tool-&gt;getMatrix());</div>
<div class="line"><span class="lineno"> 1773</span>    <span class="keywordflow">if</span> (tool-&gt;getToolType() &amp; TTool::LevelTool &amp;&amp;</div>
<div class="line"><span class="lineno"> 1774</span>        !app-&gt;<a class="code hl_function" href="class_t_app.html#a0d91c122eec2b756b7c4780014e49f9e">getCurrentObject</a>()-&gt;isSpline())</div>
<div class="line"><span class="lineno"> 1775</span>      glScaled(m_dpiScale.x, m_dpiScale.y, 1);</div>
<div class="line"><span class="lineno"> 1776</span>    m_pixelSize = sqrt(tglGetPixelSize2()) * getDevPixRatio();</div>
<div class="line"><span class="lineno"> 1777</span>    tool-&gt;<a class="code hl_function" href="class_t_tool.html#a058bf656d73bf3cd63b9826cbaaf48e0">draw</a>();</div>
<div class="line"><span class="lineno"> 1778</span>    glPopMatrix();</div>
<div class="line"><span class="lineno"> 1779</span>    <span class="comment">// Used (only in the T_RGBPicker tool) to notify and set the currentColor</span></div>
<div class="line"><span class="lineno"> 1780</span>    <span class="comment">// outside the draw() methods:</span></div>
<div class="line"><span class="lineno"> 1781</span>    <span class="comment">// using special style there was a conflict between the draw() methods of</span></div>
<div class="line"><span class="lineno"> 1782</span>    <span class="comment">// the tool</span></div>
<div class="line"><span class="lineno"> 1783</span>    <span class="comment">// and the generation of the icon inside the style editor (makeIcon()) which</span></div>
<div class="line"><span class="lineno"> 1784</span>    <span class="comment">// use</span></div>
<div class="line"><span class="lineno"> 1785</span>    <span class="comment">// another glContext</span></div>
<div class="line"><span class="lineno"> 1786</span>    <span class="keywordflow">if</span> (tool-&gt;getName() == <span class="stringliteral">&quot;T_RGBPicker&quot;</span>) tool-&gt;<a class="code hl_function" href="class_t_tool.html#aaf1e021290e74c1b085e4b095668e1ed">onImageChanged</a>();</div>
<div class="line"><span class="lineno"> 1787</span> </div>
<div class="line"><span class="lineno"> 1788</span>    <span class="comment">// draw cross at the center of the locator window</span></div>
<div class="line"><span class="lineno"> 1789</span>    <span class="keywordflow">if</span> (m_isLocator) {</div>
<div class="line"><span class="lineno"> 1790</span>      glColor3d(1.0, 0.0, 0.0);</div>
<div class="line"><span class="lineno"> 1791</span>      tglDrawSegment(<a class="code hl_class" href="class_t_point_t.html">TPointD</a>(-4, 0), <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(5, 0));</div>
<div class="line"><span class="lineno"> 1792</span>      tglDrawSegment(<a class="code hl_class" href="class_t_point_t.html">TPointD</a>(0, -4), <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(0, 5));</div>
<div class="line"><span class="lineno"> 1793</span>    }</div>
<div class="line"><span class="lineno"> 1794</span>  }</div>
<div class="line"><span class="lineno"> 1795</span>}</div>
<div class="ttc" id="aclass_t3_d_point_t_html"><div class="ttname"><a href="class_t3_d_point_t.html">T3DPointT&lt; double &gt;</a></div></div>
<div class="ttc" id="aclass_t_app_html_a0d91c122eec2b756b7c4780014e49f9e"><div class="ttname"><a href="class_t_app.html#a0d91c122eec2b756b7c4780014e49f9e">TApp::getCurrentObject</a></div><div class="ttdeci">TObjectHandle * getCurrentObject() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:130</div></div>
<div class="ttc" id="aclass_t_app_html_ad2923c9feaaa44ecd9cdd0fa029aa8aa"><div class="ttname"><a href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">TApp::getCurrentLevel</a></div><div class="ttdeci">TXshLevelHandle * getCurrentLevel() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:122</div></div>
<div class="ttc" id="aclass_t_tool_html_a058bf656d73bf3cd63b9826cbaaf48e0"><div class="ttname"><a href="class_t_tool.html#a058bf656d73bf3cd63b9826cbaaf48e0">TTool::draw</a></div><div class="ttdeci">virtual void draw()</div><div class="ttdoc">Draws the tool on the viewer.</div><div class="ttdef"><b>Definition:</b> tool.h:416</div></div>
<div class="ttc" id="aclass_t_tool_html_aaf1e021290e74c1b085e4b095668e1ed"><div class="ttname"><a href="class_t_tool.html#aaf1e021290e74c1b085e4b095668e1ed">TTool::onImageChanged</a></div><div class="ttdeci">virtual void onImageChanged()</div><div class="ttdoc">Notifies changes in the image in use.</div><div class="ttdef"><b>Definition:</b> tool.h:403</div></div>
<div class="ttc" id="aclass_t_xsh_simple_level_html"><div class="ttname"><a href="class_t_xsh_simple_level.html">TXshSimpleLevel</a></div><div class="ttdoc">The TXshLevel specialization for image levels.</div><div class="ttdef"><b>Definition:</b> txshsimplelevel.h:60</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00416">TTool::draw()</a>, <a class="el" href="#l00114">TApp::getCurrentFrame()</a>, <a class="el" href="#l00122">TApp::getCurrentLevel()</a>, <a class="el" href="#l00130">TApp::getCurrentObject()</a>, <a class="el" href="#l00126">TApp::getCurrentTool()</a>, <a class="el" href="#l02211">getViewMatrix()</a>, <a class="el" href="#l00215">TApp::instance()</a>, <a class="el" href="#l00403">TTool::onImageChanged()</a>, and <a class="el" href="#l00557">TRectT&lt; T &gt;::x0</a>.</p>

</div>
</div>
<a id="a68ece13279180dee8c61f1dcdc1944e4" name="a68ece13279180dee8c61f1dcdc1944e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68ece13279180dee8c61f1dcdc1944e4">&#9670;&nbsp;</a></span>drawPreview()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::drawPreview </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1537</span>                              {</div>
<div class="line"><span class="lineno"> 1538</span>  <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">inch</a>   = <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a>;</div>
<div class="line"><span class="lineno"> 1539</span>  <a class="code hl_class" href="class_t_app.html">TApp</a> *app           = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>();</div>
<div class="line"><span class="lineno"> 1540</span>  <span class="keywordtype">int</span> row             = app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFrame();</div>
<div class="line"><span class="lineno"> 1541</span>  <a class="code hl_class" href="class_t_camera.html">TCamera</a> *currCamera = app-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene()-&gt;<a class="code hl_function" href="class_toonz_scene.html#a750b5ab623ccec744013b0c83bf20abc">getCurrentCamera</a>();</div>
<div class="line"><span class="lineno"> 1542</span>  <a class="code hl_class" href="class_t_dimension_t.html">TDimensionD</a> cameraSize = currCamera-&gt;<a class="code hl_function" href="class_t_camera.html#a6f561eca912177c2150b3e57816f02f6">getSize</a>();</div>
<div class="line"><span class="lineno"> 1543</span> </div>
<div class="line"><span class="lineno"> 1544</span>  <a class="code hl_class" href="class_previewer.html">Previewer</a> *previewer =</div>
<div class="line"><span class="lineno"> 1545</span>      <a class="code hl_function" href="class_previewer.html#a5eb765b66490a3d99d432f90864bfacd">Previewer::instance</a>(m_previewMode == SUBCAMERA_PREVIEW);</div>
<div class="line"><span class="lineno"> 1546</span> </div>
<div class="line"><span class="lineno"> 1547</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> ras =</div>
<div class="line"><span class="lineno"> 1548</span>      previewer-&gt;<a class="code hl_function" href="class_previewer.html#afb0f0a5c7ca1fb9366996407ea58d4cc">getRaster</a>(row, <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>.m_recomputeIfNeeded);</div>
<div class="line"><span class="lineno"> 1549</span>  <span class="keywordflow">if</span> (ras) {</div>
<div class="line"><span class="lineno"> 1550</span>    <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> previewStageRectD, cameraStageRectD = currCamera-&gt;<a class="code hl_function" href="class_t_camera.html#afbdcee0cf26df414d787c11beb675140">getStageRect</a>();</div>
<div class="line"><span class="lineno"> 1551</span> </div>
<div class="line"><span class="lineno"> 1552</span>    <a class="code hl_class" href="class_t_rect_t.html">TRect</a> subCameraRect(currCamera-&gt;<a class="code hl_function" href="class_t_camera.html#ad95e2b9f128939f1ce9777623643c69c">getInterestRect</a>());</div>
<div class="line"><span class="lineno"> 1553</span>    <span class="keywordflow">if</span> (m_previewMode == SUBCAMERA_PREVIEW &amp;&amp; subCameraRect.getLx() &gt; 0 &amp;&amp;</div>
<div class="line"><span class="lineno"> 1554</span>        subCameraRect.getLy() &gt; 0)</div>
<div class="line"><span class="lineno"> 1555</span>      previewStageRectD = currCamera-&gt;<a class="code hl_function" href="class_t_camera.html#a4008034b1ffbe06c1aac816c3bfa5144">getInterestStageRect</a>();</div>
<div class="line"><span class="lineno"> 1556</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1557</span>      previewStageRectD = cameraStageRectD;</div>
<div class="line"><span class="lineno"> 1558</span> </div>
<div class="line"><span class="lineno"> 1559</span>    <a class="code hl_class" href="class_t_affine.html">TAffine</a> rasterToStageRef(</div>
<div class="line"><span class="lineno"> 1560</span>        previewStageRectD.getLx() / ras-&gt;getLx(), 0.0,</div>
<div class="line"><span class="lineno"> 1561</span>        previewStageRectD.<a class="code hl_variable" href="class_t_rect_t.html#ac008cbc625f50d8b3c180c8eb2594cdb">x0</a> + 0.5 * previewStageRectD.getLx(), 0.0,</div>
<div class="line"><span class="lineno"> 1562</span>        previewStageRectD.getLy() / ras-&gt;getLy(),</div>
<div class="line"><span class="lineno"> 1563</span>        previewStageRectD.y0 + 0.5 * previewStageRectD.getLy());</div>
<div class="line"><span class="lineno"> 1564</span> </div>
<div class="line"><span class="lineno"> 1565</span>    <a class="code hl_class" href="class_t_dimension_t.html">TDimension</a> dim(width(), height());</div>
<div class="line"><span class="lineno"> 1566</span>    <a class="code hl_class" href="class_t_affine.html">TAffine</a> finalAff              = m_drawCameraAff * rasterToStageRef;</div>
<div class="line"><span class="lineno"> 1567</span>    <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#a60f22526b35976230076ec07cff4a701">m_useTexture</a> = !Preferences::instance()-&gt;useDrawPixel();</div>
<div class="line"><span class="lineno"> 1568</span>    ImagePainter::paintImage(<a class="code hl_class" href="class_t_raster_image_p.html">TRasterImageP</a>(ras), ras-&gt;getSize(), dim, finalAff,</div>
<div class="line"><span class="lineno"> 1569</span>                             <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>, m_compareSettings, <a class="code hl_class" href="class_t_rect_t.html">TRect</a>());</div>
<div class="line"><span class="lineno"> 1570</span>  }</div>
<div class="line"><span class="lineno"> 1571</span> </div>
<div class="line"><span class="lineno"> 1572</span>  glPushMatrix();</div>
<div class="line"><span class="lineno"> 1573</span>  tglMultMatrix(m_drawCameraAff);</div>
<div class="line"><span class="lineno"> 1574</span> </div>
<div class="line"><span class="lineno"> 1575</span>  <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> frameRect(cameraSize);</div>
<div class="line"><span class="lineno"> 1576</span>  frameRect.x1 *= <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">inch</a>;</div>
<div class="line"><span class="lineno"> 1577</span>  frameRect.y1 *= <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">inch</a>;</div>
<div class="line"><span class="lineno"> 1578</span>  frameRect -= 0.5 * (frameRect.getP00() + frameRect.getP11());</div>
<div class="line"><span class="lineno"> 1579</span> </div>
<div class="line"><span class="lineno"> 1580</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#af07ee76dc91b927f4dc22d44fcc13495">m_blankColor</a> != TPixel::Transparent) {</div>
<div class="line"><span class="lineno"> 1581</span>    tglColor(<a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#af07ee76dc91b927f4dc22d44fcc13495">m_blankColor</a>);</div>
<div class="line"><span class="lineno"> 1582</span>    tglFillRect(frameRect);</div>
<div class="line"><span class="lineno"> 1583</span>  }</div>
<div class="line"><span class="lineno"> 1584</span> </div>
<div class="line"><span class="lineno"> 1585</span>  <span class="keywordflow">if</span> (!previewer-&gt;<a class="code hl_function" href="class_previewer.html#a43b83e2f98aa1ee5fc316fe9eeeaea15">isFrameReady</a>(row) ||</div>
<div class="line"><span class="lineno"> 1586</span>      (app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;isPlaying() &amp;&amp; previewer-&gt;isBusy())) {</div>
<div class="line"><span class="lineno"> 1587</span>    glColor3d(1, 0, 0);</div>
<div class="line"><span class="lineno"> 1588</span> </div>
<div class="line"><span class="lineno"> 1589</span>    tglDrawRect(frameRect);</div>
<div class="line"><span class="lineno"> 1590</span>    tglDrawRect(frameRect.enlarge(5));</div>
<div class="line"><span class="lineno"> 1591</span>  }</div>
<div class="line"><span class="lineno"> 1592</span> </div>
<div class="line"><span class="lineno"> 1593</span>  glPopMatrix();</div>
<div class="line"><span class="lineno"> 1594</span>}</div>
<div class="ttc" id="aclass_image_painter_1_1_visual_settings_html_a60f22526b35976230076ec07cff4a701"><div class="ttname"><a href="class_image_painter_1_1_visual_settings.html#a60f22526b35976230076ec07cff4a701">ImagePainter::VisualSettings::m_useTexture</a></div><div class="ttdeci">bool m_useTexture</div><div class="ttdef"><b>Definition:</b> imagepainter.h:64</div></div>
<div class="ttc" id="aclass_image_painter_1_1_visual_settings_html_af07ee76dc91b927f4dc22d44fcc13495"><div class="ttname"><a href="class_image_painter_1_1_visual_settings.html#af07ee76dc91b927f4dc22d44fcc13495">ImagePainter::VisualSettings::m_blankColor</a></div><div class="ttdeci">TPixel32 m_blankColor</div><div class="ttdoc">The color of blank frames during playback.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:62</div></div>
<div class="ttc" id="aclass_previewer_html"><div class="ttname"><a href="class_previewer.html">Previewer</a></div><div class="ttdef"><b>Definition:</b> previewer.h:31</div></div>
<div class="ttc" id="aclass_previewer_html_a43b83e2f98aa1ee5fc316fe9eeeaea15"><div class="ttname"><a href="class_previewer.html#a43b83e2f98aa1ee5fc316fe9eeeaea15">Previewer::isFrameReady</a></div><div class="ttdeci">bool isFrameReady(int frame) const</div><div class="ttdoc">Verifica se frame e' nella cache, cioe' se il frame e' disponibile.</div><div class="ttdef"><b>Definition:</b> previewer.cpp:1188</div></div>
<div class="ttc" id="aclass_previewer_html_a5eb765b66490a3d99d432f90864bfacd"><div class="ttname"><a href="class_previewer.html#a5eb765b66490a3d99d432f90864bfacd">Previewer::instance</a></div><div class="ttdeci">static Previewer * instance(bool subcameraPreview=false)</div><div class="ttdoc">Ritorna l'istanza del Previewer.</div><div class="ttdef"><b>Definition:</b> previewer.cpp:1060</div></div>
<div class="ttc" id="aclass_previewer_html_afb0f0a5c7ca1fb9366996407ea58d4cc"><div class="ttname"><a href="class_previewer.html#afb0f0a5c7ca1fb9366996407ea58d4cc">Previewer::getRaster</a></div><div class="ttdeci">TRasterP getRaster(int frame, bool renderIfNeeded=true) const</div><div class="ttdef"><b>Definition:</b> previewer.cpp:1143</div></div>
<div class="ttc" id="aclass_t_camera_html"><div class="ttname"><a href="class_t_camera.html">TCamera</a></div><div class="ttdoc">The TCamera class provides a camera and allows its management.</div><div class="ttdef"><b>Definition:</b> tcamera.h:33</div></div>
<div class="ttc" id="aclass_t_camera_html_a4008034b1ffbe06c1aac816c3bfa5144"><div class="ttname"><a href="class_t_camera.html#a4008034b1ffbe06c1aac816c3bfa5144">TCamera::getInterestStageRect</a></div><div class="ttdeci">TRectD getInterestStageRect() const</div><div class="ttdef"><b>Definition:</b> tcamera.cpp:126</div></div>
<div class="ttc" id="aclass_t_camera_html_a6f561eca912177c2150b3e57816f02f6"><div class="ttname"><a href="class_t_camera.html#a6f561eca912177c2150b3e57816f02f6">TCamera::getSize</a></div><div class="ttdeci">const TDimensionD &amp; getSize() const</div><div class="ttdef"><b>Definition:</b> tcamera.h:55</div></div>
<div class="ttc" id="aclass_t_camera_html_ad95e2b9f128939f1ce9777623643c69c"><div class="ttname"><a href="class_t_camera.html#ad95e2b9f128939f1ce9777623643c69c">TCamera::getInterestRect</a></div><div class="ttdeci">TRect getInterestRect() const</div><div class="ttdef"><b>Definition:</b> tcamera.h:115</div></div>
<div class="ttc" id="aclass_t_camera_html_afbdcee0cf26df414d787c11beb675140"><div class="ttname"><a href="class_t_camera.html#afbdcee0cf26df414d787c11beb675140">TCamera::getStageRect</a></div><div class="ttdeci">TRectD getStageRect() const</div><div class="ttdef"><b>Definition:</b> tcamera.cpp:100</div></div>
<div class="ttc" id="aclass_t_dimension_t_html"><div class="ttname"><a href="class_t_dimension_t.html">TDimensionT&lt; double &gt;</a></div></div>
<div class="ttc" id="aclass_toonz_scene_html_a750b5ab623ccec744013b0c83bf20abc"><div class="ttname"><a href="class_toonz_scene.html#a750b5ab623ccec744013b0c83bf20abc">ToonzScene::getCurrentCamera</a></div><div class="ttdeci">TCamera * getCurrentCamera()</div><div class="ttdef"><b>Definition:</b> toonzscene.cpp:1472</div></div>
<div class="ttc" id="anamespace_stage_html_ad3e22e31e2bb6fc1d95a572facce2d5b"><div class="ttname"><a href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a></div><div class="ttdeci">DVVAR const double inch</div><div class="ttdef"><b>Definition:</b> stageplayer.h:37</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac126cf528301b58b48221eb2e546b1c2" name="ac126cf528301b58b48221eb2e546b1c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac126cf528301b58b48221eb2e546b1c2">&#9670;&nbsp;</a></span>drawScene()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::drawScene </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1952</span>                            {</div>
<div class="line"><span class="lineno"> 1953</span>  <a class="code hl_class" href="class_t_app.html">TApp</a> *app         = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>();</div>
<div class="line"><span class="lineno"> 1954</span>  <a class="code hl_class" href="class_toonz_scene.html">ToonzScene</a> *scene = app-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene();</div>
<div class="line"><span class="lineno"> 1955</span>  <span class="keywordtype">int</span> frame         = app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFrame();</div>
<div class="line"><span class="lineno"> 1956</span>  <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh      = app-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()-&gt;getXsheet();</div>
<div class="line"><span class="lineno"> 1957</span>  <a class="code hl_class" href="class_t_rect_t.html">TRect</a> clipRect    = getActualClipRect(<a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>());</div>
<div class="line"><span class="lineno"> 1958</span>  clipRect += <a class="code hl_class" href="class_t_point_t.html">TPoint</a>(width() * 0.5, height() * 0.5);</div>
<div class="line"><span class="lineno"> 1959</span> </div>
<div class="line"><span class="lineno"> 1960</span>  <a class="code hl_class" href="class_child_stack.html">ChildStack</a> *childStack = scene-&gt;<a class="code hl_function" href="class_toonz_scene.html#ae2cbc582144c92adc5076cd5f556c95a">getChildStack</a>();</div>
<div class="line"><span class="lineno"> 1961</span>  <span class="keywordtype">bool</span> editInPlace       = editInPlaceToggle.getStatus() &amp;&amp;</div>
<div class="line"><span class="lineno"> 1962</span>                     !app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;isEditingLevel();</div>
<div class="line"><span class="lineno"> 1963</span> </div>
<div class="line"><span class="lineno"> 1964</span>  <span class="keywordtype">bool</span> fillFullColorRaster = TXshSimpleLevel::m_fillFullColorRaster;</div>
<div class="line"><span class="lineno"> 1965</span>  TXshSimpleLevel::m_fillFullColorRaster = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1966</span> </div>
<div class="line"><span class="lineno"> 1967</span>  <span class="comment">// Guided Drawing Check</span></div>
<div class="line"><span class="lineno"> 1968</span>  <span class="keywordtype">int</span> useGuidedDrawing  = Preferences::instance()-&gt;getGuidedDrawingType();</div>
<div class="line"><span class="lineno"> 1969</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool           = app-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 1970</span>  <span class="keywordtype">int</span> guidedFrontStroke = tool ? tool-&gt;getViewer()-&gt;getGuidedFrontStroke() : -1;</div>
<div class="line"><span class="lineno"> 1971</span>  <span class="keywordtype">int</span> guidedBackStroke  = tool ? tool-&gt;getViewer()-&gt;getGuidedBackStroke() : -1;</div>
<div class="line"><span class="lineno"> 1972</span> </div>
<div class="line"><span class="lineno"> 1973</span>  m_minZ = 0;</div>
<div class="line"><span class="lineno"> 1974</span>  <span class="keywordflow">if</span> (is3DView()) {</div>
<div class="line"><span class="lineno"> 1975</span>    <a class="code hl_class" href="class_stage_1_1_open_gl_painter.html">Stage::OpenGlPainter</a> painter(<a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>(), clipRect, <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>,</div>
<div class="line"><span class="lineno"> 1976</span>                                 <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1977</span>    painter.enableCamera3D(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1978</span>    painter.setPhi(m_phi3D);</div>
<div class="line"><span class="lineno"> 1979</span>    <span class="keywordtype">int</span> xsheetLevel = 0;</div>
<div class="line"><span class="lineno"> 1980</span>    std::pair&lt;TXsheet *, int&gt; xr;</div>
<div class="line"><span class="lineno"> 1981</span>    <span class="keywordflow">if</span> (editInPlace) {</div>
<div class="line"><span class="lineno"> 1982</span>      xr          = childStack-&gt;<a class="code hl_function" href="class_child_stack.html#a6cddfa0ca994527a3b90a3456eb8656f">getAncestor</a>(frame);</div>
<div class="line"><span class="lineno"> 1983</span>      xsheetLevel = childStack-&gt;<a class="code hl_function" href="class_child_stack.html#adf32015ee9da2ea3255ba9bd2597f899">getAncestorCount</a>();</div>
<div class="line"><span class="lineno"> 1984</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1985</span>      xr = std::make_pair(xsh, frame);</div>
<div class="line"><span class="lineno"> 1986</span> </div>
<div class="line"><span class="lineno"> 1987</span>    <a class="code hl_struct" href="struct_stage_1_1_visit_args.html">Stage::VisitArgs</a> args;</div>
<div class="line"><span class="lineno"> 1988</span>    args.m_scene       = scene;</div>
<div class="line"><span class="lineno"> 1989</span>    args.m_xsh         = xr.first;</div>
<div class="line"><span class="lineno"> 1990</span>    args.m_row         = xr.second;</div>
<div class="line"><span class="lineno"> 1991</span>    args.m_col         = app-&gt;<a class="code hl_function" href="class_t_app.html#a1e294e7cff300851d12a8c3d196943f6">getCurrentColumn</a>()-&gt;getColumnIndex();</div>
<div class="line"><span class="lineno"> 1992</span>    <a class="code hl_class" href="class_onion_skin_mask.html">OnionSkinMask</a> osm  = app-&gt;<a class="code hl_function" href="class_t_app.html#afcdd56d9130b7c39a5227de08a0b65e4">getCurrentOnionSkin</a>()-&gt;getOnionSkinMask();</div>
<div class="line"><span class="lineno"> 1993</span>    args.m_osm         = &amp;osm;</div>
<div class="line"><span class="lineno"> 1994</span>    args.m_camera3d    = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1995</span>    args.m_xsheetLevel = xsheetLevel;</div>
<div class="line"><span class="lineno"> 1996</span>    args.m_currentFrameId =</div>
<div class="line"><span class="lineno"> 1997</span>        app-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()</div>
<div class="line"><span class="lineno"> 1998</span>            -&gt;getXsheet()</div>
<div class="line"><span class="lineno"> 1999</span>            -&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFrame(), args.m_col)</div>
<div class="line"><span class="lineno"> 2000</span>            .<a class="code hl_function" href="class_t_xsh_cell.html#a5a1965b96c2c698d6f0fb42a80c03406">getFrameId</a>();</div>
<div class="line"><span class="lineno"> 2001</span>    args.m_isGuidedDrawingEnabled = useGuidedDrawing;</div>
<div class="line"><span class="lineno"> 2002</span>    args.m_guidedFrontStroke      = guidedFrontStroke;</div>
<div class="line"><span class="lineno"> 2003</span>    args.m_guidedBackStroke       = guidedBackStroke;</div>
<div class="line"><span class="lineno"> 2004</span> </div>
<div class="line"><span class="lineno"> 2005</span>    <span class="comment">// args.m_currentFrameId = app-&gt;getCurrentFrame()-&gt;getFid();</span></div>
<div class="line"><span class="lineno"> 2006</span>    <a class="code hl_function" href="namespace_stage.html#a28ab15860508cccd59a31483a9b8afa1">Stage::visit</a>(painter, args);</div>
<div class="line"><span class="lineno"> 2007</span> </div>
<div class="line"><span class="lineno"> 2008</span>    m_minZ = painter.getMinZ();</div>
<div class="line"><span class="lineno"> 2009</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2010</span>    <span class="comment">// camera 2D (normale)</span></div>
<div class="line"><span class="lineno"> 2011</span>    <a class="code hl_class" href="class_t_dimension_t.html">TDimension</a> viewerSize(width(), height());</div>
<div class="line"><span class="lineno"> 2012</span> </div>
<div class="line"><span class="lineno"> 2013</span>    <a class="code hl_class" href="class_t_affine.html">TAffine</a> viewAff = <a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>();</div>
<div class="line"><span class="lineno"> 2014</span> </div>
<div class="line"><span class="lineno"> 2015</span>    <span class="keywordflow">if</span> (editInPlace) {</div>
<div class="line"><span class="lineno"> 2016</span>      <a class="code hl_class" href="class_t_affine.html">TAffine</a> aff;</div>
<div class="line"><span class="lineno"> 2017</span>      <span class="keywordflow">if</span> (scene-&gt;<a class="code hl_function" href="class_toonz_scene.html#ae2cbc582144c92adc5076cd5f556c95a">getChildStack</a>()-&gt;<a class="code hl_function" href="class_child_stack.html#a8f1fa04ddb083c41ceb3c958e6423744">getAncestorAffine</a>(aff, frame))</div>
<div class="line"><span class="lineno"> 2018</span>        viewAff = viewAff * aff.<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>();</div>
<div class="line"><span class="lineno"> 2019</span>    }</div>
<div class="line"><span class="lineno"> 2020</span> </div>
<div class="line"><span class="lineno"> 2021</span>    <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#a354c3bf432a933b627c3f3c5ea0ab9bf">m_showBBox</a> = viewBBoxToggle.getStatus();</div>
<div class="line"><span class="lineno"> 2022</span> </div>
<div class="line"><span class="lineno"> 2023</span>    <a class="code hl_class" href="class_stage_1_1_raster_painter.html">Stage::RasterPainter</a> painter(viewerSize, viewAff, clipRect,</div>
<div class="line"><span class="lineno"> 2024</span>                                 <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 2025</span> </div>
<div class="line"><span class="lineno"> 2026</span>    <span class="comment">// darken blended view mode for viewing the non-cleanuped and stacked</span></div>
<div class="line"><span class="lineno"> 2027</span>    <span class="comment">// drawings</span></div>
<div class="line"><span class="lineno"> 2028</span>    painter.setRasterDarkenBlendedView(</div>
<div class="line"><span class="lineno"> 2029</span>        Preferences::instance()</div>
<div class="line"><span class="lineno"> 2030</span>            -&gt;isShowRasterImagesDarkenBlendedInViewerEnabled());</div>
<div class="line"><span class="lineno"> 2031</span> </div>
<div class="line"><span class="lineno"> 2032</span>    <a class="code hl_class" href="class_t_frame_handle.html">TFrameHandle</a> *frameHandle = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>();</div>
<div class="line"><span class="lineno"> 2033</span>    <span class="keywordflow">if</span> (app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;isEditingLevel()) {</div>
<div class="line"><span class="lineno"> 2034</span>      <a class="code hl_function" href="namespace_stage.html#a28ab15860508cccd59a31483a9b8afa1">Stage::visit</a>(painter, app-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>()-&gt;getLevel(),</div>
<div class="line"><span class="lineno"> 2035</span>                   app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFid(),</div>
<div class="line"><span class="lineno"> 2036</span>                   app-&gt;<a class="code hl_function" href="class_t_app.html#afcdd56d9130b7c39a5227de08a0b65e4">getCurrentOnionSkin</a>()-&gt;getOnionSkinMask(),</div>
<div class="line"><span class="lineno"> 2037</span>                   frameHandle-&gt;isPlaying(), useGuidedDrawing, guidedBackStroke,</div>
<div class="line"><span class="lineno"> 2038</span>                   guidedFrontStroke);</div>
<div class="line"><span class="lineno"> 2039</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2040</span>      std::pair&lt;TXsheet *, int&gt; xr;</div>
<div class="line"><span class="lineno"> 2041</span>      <span class="keywordtype">int</span> xsheetLevel = 0;</div>
<div class="line"><span class="lineno"> 2042</span>      <span class="keywordflow">if</span> (editInPlace) {</div>
<div class="line"><span class="lineno"> 2043</span>        xr          = scene-&gt;<a class="code hl_function" href="class_toonz_scene.html#ae2cbc582144c92adc5076cd5f556c95a">getChildStack</a>()-&gt;<a class="code hl_function" href="class_child_stack.html#a6cddfa0ca994527a3b90a3456eb8656f">getAncestor</a>(frame);</div>
<div class="line"><span class="lineno"> 2044</span>        xsheetLevel = scene-&gt;<a class="code hl_function" href="class_toonz_scene.html#ae2cbc582144c92adc5076cd5f556c95a">getChildStack</a>()-&gt;<a class="code hl_function" href="class_child_stack.html#adf32015ee9da2ea3255ba9bd2597f899">getAncestorCount</a>();</div>
<div class="line"><span class="lineno"> 2045</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2046</span>        xr = std::make_pair(xsh, frame);</div>
<div class="line"><span class="lineno"> 2047</span> </div>
<div class="line"><span class="lineno"> 2048</span>      <a class="code hl_struct" href="struct_stage_1_1_visit_args.html">Stage::VisitArgs</a> args;</div>
<div class="line"><span class="lineno"> 2049</span>      args.m_scene       = scene;</div>
<div class="line"><span class="lineno"> 2050</span>      args.m_xsh         = xr.first;</div>
<div class="line"><span class="lineno"> 2051</span>      args.m_row         = xr.second;</div>
<div class="line"><span class="lineno"> 2052</span>      args.m_col         = app-&gt;<a class="code hl_function" href="class_t_app.html#a1e294e7cff300851d12a8c3d196943f6">getCurrentColumn</a>()-&gt;getColumnIndex();</div>
<div class="line"><span class="lineno"> 2053</span>      <a class="code hl_class" href="class_onion_skin_mask.html">OnionSkinMask</a> osm  = app-&gt;<a class="code hl_function" href="class_t_app.html#afcdd56d9130b7c39a5227de08a0b65e4">getCurrentOnionSkin</a>()-&gt;getOnionSkinMask();</div>
<div class="line"><span class="lineno"> 2054</span>      args.m_osm         = &amp;osm;</div>
<div class="line"><span class="lineno"> 2055</span>      args.m_xsheetLevel = xsheetLevel;</div>
<div class="line"><span class="lineno"> 2056</span>      args.m_isPlaying   = frameHandle-&gt;isPlaying();</div>
<div class="line"><span class="lineno"> 2057</span>      <span class="keywordflow">if</span> (app-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>() &amp;&amp; app-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>()-&gt;getLevel() &amp;&amp;</div>
<div class="line"><span class="lineno"> 2058</span>          !app-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>()-&gt;getLevel()-&gt;<a class="code hl_function" href="class_t_xsh_level.html#aa26f1638f7685304949b33befc0bfcc9">getSoundLevel</a>())</div>
<div class="line"><span class="lineno"> 2059</span>        args.m_currentFrameId =</div>
<div class="line"><span class="lineno"> 2060</span>            app-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()</div>
<div class="line"><span class="lineno"> 2061</span>                -&gt;getXsheet()</div>
<div class="line"><span class="lineno"> 2062</span>                -&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFrame(), args.m_col)</div>
<div class="line"><span class="lineno"> 2063</span>                .<a class="code hl_function" href="class_t_xsh_cell.html#a5a1965b96c2c698d6f0fb42a80c03406">getFrameId</a>();</div>
<div class="line"><span class="lineno"> 2064</span>      args.m_isGuidedDrawingEnabled = useGuidedDrawing;</div>
<div class="line"><span class="lineno"> 2065</span>      args.m_guidedFrontStroke      = guidedFrontStroke;</div>
<div class="line"><span class="lineno"> 2066</span>      args.m_guidedBackStroke       = guidedBackStroke;</div>
<div class="line"><span class="lineno"> 2067</span> </div>
<div class="line"><span class="lineno"> 2068</span><span class="preprocessor">#if defined(x64)</span></div>
<div class="line"><span class="lineno"> 2069</span>      <span class="keywordflow">if</span> (m_stopMotion-&gt;m_alwaysUseLiveViewImages &amp;&amp;</div>
<div class="line"><span class="lineno"> 2070</span>          m_stopMotion-&gt;m_liveViewStatus &gt; 0 &amp;&amp;</div>
<div class="line"><span class="lineno"> 2071</span>          frame != m_stopMotion-&gt;getXSheetFrameNumber() - 1 &amp;&amp;</div>
<div class="line"><span class="lineno"> 2072</span>          m_hasStopMotionImage &amp;&amp; !m_stopMotion-&gt;m_reviewTimer-&gt;isActive()) {</div>
<div class="line"><span class="lineno"> 2073</span>        <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> image;</div>
<div class="line"><span class="lineno"> 2074</span>        <span class="keywordtype">bool</span> hasImage = m_stopMotion-&gt;loadLiveViewImage(frame, image);</div>
<div class="line"><span class="lineno"> 2075</span>        <span class="keywordflow">if</span> (hasImage) {</div>
<div class="line"><span class="lineno"> 2076</span>          <a class="code hl_class" href="class_stage_1_1_player.html">Stage::Player</a> smPlayer;</div>
<div class="line"><span class="lineno"> 2077</span>          <span class="keywordtype">double</span> dpiX, dpiY;</div>
<div class="line"><span class="lineno"> 2078</span>          m_stopMotionImage-&gt;getDpi(dpiX, dpiY);</div>
<div class="line"><span class="lineno"> 2079</span>          smPlayer.<a class="code hl_variable" href="class_stage_1_1_player.html#a0495491ce47344daba1cd55e1b64905a">m_dpiAff</a>    = <a class="code hl_class" href="class_t_scale.html">TScale</a>(<a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / dpiX, <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / dpiY);</div>
<div class="line"><span class="lineno"> 2080</span>          smPlayer.<a class="code hl_variable" href="class_stage_1_1_player.html#a2b05fa8fdc95ac04a532fc2d227a3a81">m_opacity</a>   = 255;</div>
<div class="line"><span class="lineno"> 2081</span>          smPlayer.<a class="code hl_variable" href="class_stage_1_1_player.html#a6230d77933caf93b9699bd5e2de0d2b0">m_sl</a>        = m_stopMotion-&gt;m_sl;</div>
<div class="line"><span class="lineno"> 2082</span>          args.m_liveViewImage = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="class_t_raster_image_p.html">TRasterImageP</a><span class="keyword">&gt;</span>(image);</div>
<div class="line"><span class="lineno"> 2083</span>          args.m_liveViewPlayer = smPlayer;</div>
<div class="line"><span class="lineno"> 2084</span>          <span class="comment">// painter.onRasterImage(static_cast&lt;TRasterImageP&gt;(image).getPointer(),</span></div>
<div class="line"><span class="lineno"> 2085</span>          <span class="comment">//                      smPlayer);</span></div>
<div class="line"><span class="lineno"> 2086</span>        }</div>
<div class="line"><span class="lineno"> 2087</span>      }</div>
<div class="line"><span class="lineno"> 2088</span>      <span class="keywordflow">if</span> (  </div>
<div class="line"><span class="lineno"> 2089</span>          m_stopMotion-&gt;m_liveViewStatus == 2 &amp;&amp;</div>
<div class="line"><span class="lineno"> 2090</span>          (  </div>
<div class="line"><span class="lineno"> 2091</span>              frame == m_stopMotion-&gt;getXSheetFrameNumber() - 1)) {</div>
<div class="line"><span class="lineno"> 2092</span>        <span class="keywordflow">if</span> (m_hasStopMotionLineUpImage &amp;&amp; m_stopMotion-&gt;m_showLineUpImage) {</div>
<div class="line"><span class="lineno"> 2093</span>          <a class="code hl_class" href="class_stage_1_1_player.html">Stage::Player</a> smPlayer;</div>
<div class="line"><span class="lineno"> 2094</span>          <span class="keywordtype">double</span> dpiX, dpiY;</div>
<div class="line"><span class="lineno"> 2095</span>          m_stopMotionLineUpImage-&gt;getDpi(dpiX, dpiY);</div>
<div class="line"><span class="lineno"> 2096</span>          smPlayer.<a class="code hl_variable" href="class_stage_1_1_player.html#a0495491ce47344daba1cd55e1b64905a">m_dpiAff</a>   = <a class="code hl_class" href="class_t_scale.html">TScale</a>(<a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / dpiX, <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / dpiY);</div>
<div class="line"><span class="lineno"> 2097</span>          smPlayer.<a class="code hl_variable" href="class_stage_1_1_player.html#a2b05fa8fdc95ac04a532fc2d227a3a81">m_opacity</a>  = 255;</div>
<div class="line"><span class="lineno"> 2098</span>          smPlayer.<a class="code hl_variable" href="class_stage_1_1_player.html#a6230d77933caf93b9699bd5e2de0d2b0">m_sl</a>       = m_stopMotion-&gt;m_sl;</div>
<div class="line"><span class="lineno"> 2099</span>          args.m_lineupImage  = m_stopMotionLineUpImage;</div>
<div class="line"><span class="lineno"> 2100</span>          args.m_lineupPlayer = smPlayer;</div>
<div class="line"><span class="lineno"> 2101</span>          <span class="comment">// painter.onRasterImage(m_stopMotionLineUpImage.getPointer(),</span></div>
<div class="line"><span class="lineno"> 2102</span>          <span class="comment">// smPlayer);</span></div>
<div class="line"><span class="lineno"> 2103</span>        }</div>
<div class="line"><span class="lineno"> 2104</span>        <span class="keywordflow">if</span> (m_hasStopMotionImage) {</div>
<div class="line"><span class="lineno"> 2105</span>          <a class="code hl_class" href="class_stage_1_1_player.html">Stage::Player</a> smPlayer;</div>
<div class="line"><span class="lineno"> 2106</span>          <span class="keywordtype">double</span> dpiX, dpiY;</div>
<div class="line"><span class="lineno"> 2107</span>          m_stopMotionImage-&gt;getDpi(dpiX, dpiY);</div>
<div class="line"><span class="lineno"> 2108</span>          smPlayer.<a class="code hl_variable" href="class_stage_1_1_player.html#a0495491ce47344daba1cd55e1b64905a">m_dpiAff</a> = <a class="code hl_class" href="class_t_scale.html">TScale</a>(<a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / dpiX, <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / dpiY);</div>
<div class="line"><span class="lineno"> 2109</span>          <span class="keywordtype">bool</span> hide_opacity = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2110</span><span class="preprocessor">#ifdef WITH_CANON</span></div>
<div class="line"><span class="lineno"> 2111</span>          hide_opacity = m_stopMotion-&gt;m_canon-&gt;m_zooming ||</div>
<div class="line"><span class="lineno"> 2112</span>                         m_stopMotion-&gt;m_canon-&gt;m_pickLiveViewZoom ||</div>
<div class="line"><span class="lineno"> 2113</span>                         !m_hasStopMotionLineUpImage;</div>
<div class="line"><span class="lineno"> 2114</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2115</span>          smPlayer.<a class="code hl_variable" href="class_stage_1_1_player.html#a2b05fa8fdc95ac04a532fc2d227a3a81">m_opacity</a> =</div>
<div class="line"><span class="lineno"> 2116</span>              hide_opacity ? 255.0 : m_stopMotion-&gt;getOpacity();</div>
<div class="line"><span class="lineno"> 2117</span>          smPlayer.<a class="code hl_variable" href="class_stage_1_1_player.html#a6230d77933caf93b9699bd5e2de0d2b0">m_sl</a>         = m_stopMotion-&gt;m_sl;</div>
<div class="line"><span class="lineno"> 2118</span>          args.m_liveViewImage  = m_stopMotionImage;</div>
<div class="line"><span class="lineno"> 2119</span>          args.m_liveViewPlayer = smPlayer;</div>
<div class="line"><span class="lineno"> 2120</span>          <span class="comment">// painter.onRasterImage(m_stopMotionImage.getPointer(), smPlayer);</span></div>
<div class="line"><span class="lineno"> 2121</span>        }</div>
<div class="line"><span class="lineno"> 2122</span>      }</div>
<div class="line"><span class="lineno"> 2123</span><span class="preprocessor">#endif  </span><span class="comment">// x64</span></div>
<div class="line"><span class="lineno"> 2124</span>      <a class="code hl_function" href="namespace_stage.html#a28ab15860508cccd59a31483a9b8afa1">Stage::visit</a>(painter, args);</div>
<div class="line"><span class="lineno"> 2125</span>    }</div>
<div class="line"><span class="lineno"> 2126</span> </div>
<div class="line"><span class="lineno"> 2127</span>    assert(glGetError() == 0);</div>
<div class="line"><span class="lineno"> 2128</span>    painter.flushRasterImages();</div>
<div class="line"><span class="lineno"> 2129</span> </div>
<div class="line"><span class="lineno"> 2130</span>    TXshSimpleLevel::m_fillFullColorRaster = fillFullColorRaster;</div>
<div class="line"><span class="lineno"> 2131</span> </div>
<div class="line"><span class="lineno"> 2132</span>    assert(glGetError() == 0);</div>
<div class="line"><span class="lineno"> 2133</span>    <span class="keywordflow">if</span> (m_viewMode != LEVEL_VIEWMODE)</div>
<div class="line"><span class="lineno"> 2134</span>      drawSpline(<a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>(), clipRect,</div>
<div class="line"><span class="lineno"> 2135</span>                 m_referenceMode == CAMERA3D_REFERENCE, m_pixelSize);</div>
<div class="line"><span class="lineno"> 2136</span>    assert(glGetError() == 0);</div>
<div class="line"><span class="lineno"> 2137</span> </div>
<div class="line"><span class="lineno"> 2138</span>    <span class="comment">// gather animated guide strokes&#39; bounding boxes</span></div>
<div class="line"><span class="lineno"> 2139</span>    <span class="comment">// it is used for updating viewer next time</span></div>
<div class="line"><span class="lineno"> 2140</span>    std::vector&lt;TStroke *&gt; guidedStrokes = painter.getGuidedStrokes();</div>
<div class="line"><span class="lineno"> 2141</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> itr = guidedStrokes.begin(); itr != guidedStrokes.end(); ++itr) {</div>
<div class="line"><span class="lineno"> 2142</span>      m_guidedDrawingBBox += (*itr)-&gt;getBBox();</div>
<div class="line"><span class="lineno"> 2143</span>    }</div>
<div class="line"><span class="lineno"> 2144</span>  }</div>
<div class="line"><span class="lineno"> 2145</span>}</div>
<div class="ttc" id="aclass_child_stack_html"><div class="ttname"><a href="class_child_stack.html">ChildStack</a></div><div class="ttdoc">The ChildStack class provides a stack of xsheet and allows its management.</div><div class="ttdef"><b>Definition:</b> childstack.h:41</div></div>
<div class="ttc" id="aclass_child_stack_html_a6cddfa0ca994527a3b90a3456eb8656f"><div class="ttname"><a href="class_child_stack.html#a6cddfa0ca994527a3b90a3456eb8656f">ChildStack::getAncestor</a></div><div class="ttdeci">std::pair&lt; TXsheet *, int &gt; getAncestor(int row) const</div><div class="ttdef"><b>Definition:</b> childstack.cpp:148</div></div>
<div class="ttc" id="aclass_child_stack_html_a8f1fa04ddb083c41ceb3c958e6423744"><div class="ttname"><a href="class_child_stack.html#a8f1fa04ddb083c41ceb3c958e6423744">ChildStack::getAncestorAffine</a></div><div class="ttdeci">bool getAncestorAffine(TAffine &amp;aff, int row) const</div><div class="ttdef"><b>Definition:</b> childstack.cpp:163</div></div>
<div class="ttc" id="aclass_child_stack_html_adf32015ee9da2ea3255ba9bd2597f899"><div class="ttname"><a href="class_child_stack.html#adf32015ee9da2ea3255ba9bd2597f899">ChildStack::getAncestorCount</a></div><div class="ttdeci">int getAncestorCount() const</div><div class="ttdef"><b>Definition:</b> childstack.cpp:138</div></div>
<div class="ttc" id="aclass_image_painter_1_1_visual_settings_html_a354c3bf432a933b627c3f3c5ea0ab9bf"><div class="ttname"><a href="class_image_painter_1_1_visual_settings.html#a354c3bf432a933b627c3f3c5ea0ab9bf">ImagePainter::VisualSettings::m_showBBox</a></div><div class="ttdeci">bool m_showBBox</div><div class="ttdoc">Show the bounding box of current level.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:48</div></div>
<div class="ttc" id="aclass_onion_skin_mask_html"><div class="ttname"><a href="class_onion_skin_mask.html">OnionSkinMask</a></div><div class="ttdef"><b>Definition:</b> onionskinmask.h:39</div></div>
<div class="ttc" id="aclass_stage_1_1_open_gl_painter_html"><div class="ttname"><a href="class_stage_1_1_open_gl_painter.html">Stage::OpenGlPainter</a></div><div class="ttdoc">The derived Stage::Visitor responsible for camera-stand rendering in 3D mode.</div><div class="ttdef"><b>Definition:</b> stagevisitor.h:337</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html"><div class="ttname"><a href="class_stage_1_1_player.html">Stage::Player</a></div><div class="ttdef"><b>Definition:</b> stageplayer.h:67</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html_a0495491ce47344daba1cd55e1b64905a"><div class="ttname"><a href="class_stage_1_1_player.html#a0495491ce47344daba1cd55e1b64905a">Stage::Player::m_dpiAff</a></div><div class="ttdeci">TAffine m_dpiAff</div><div class="ttdoc">The affine corresponding to m_image's dpi.</div><div class="ttdef"><b>Definition:</b> stageplayer.h:72</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html_a2b05fa8fdc95ac04a532fc2d227a3a81"><div class="ttname"><a href="class_stage_1_1_player.html#a2b05fa8fdc95ac04a532fc2d227a3a81">Stage::Player::m_opacity</a></div><div class="ttdeci">UCHAR m_opacity</div><div class="ttdoc">Opacity the image should be rendered with.</div><div class="ttdef"><b>Definition:</b> stageplayer.h:104</div></div>
<div class="ttc" id="aclass_stage_1_1_player_html_a6230d77933caf93b9699bd5e2de0d2b0"><div class="ttname"><a href="class_stage_1_1_player.html#a6230d77933caf93b9699bd5e2de0d2b0">Stage::Player::m_sl</a></div><div class="ttdeci">TXshSimpleLevel * m_sl</div><div class="ttdoc">(not owned) The player's simple level</div><div class="ttdef"><b>Definition:</b> stageplayer.h:91</div></div>
<div class="ttc" id="aclass_stage_1_1_raster_painter_html"><div class="ttname"><a href="class_stage_1_1_raster_painter.html">Stage::RasterPainter</a></div><div class="ttdef"><b>Definition:</b> stagevisitor.h:199</div></div>
<div class="ttc" id="aclass_t_affine_html_a570529b96b1ec5abc711aaa9aac09ff9"><div class="ttname"><a href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">TAffine::inv</a></div><div class="ttdeci">TAffine inv() const</div><div class="ttdef"><b>Definition:</b> tgeometry.cpp:55</div></div>
<div class="ttc" id="aclass_t_app_html_a1e294e7cff300851d12a8c3d196943f6"><div class="ttname"><a href="class_t_app.html#a1e294e7cff300851d12a8c3d196943f6">TApp::getCurrentColumn</a></div><div class="ttdeci">TColumnHandle * getCurrentColumn() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:118</div></div>
<div class="ttc" id="aclass_t_app_html_afcdd56d9130b7c39a5227de08a0b65e4"><div class="ttname"><a href="class_t_app.html#afcdd56d9130b7c39a5227de08a0b65e4">TApp::getCurrentOnionSkin</a></div><div class="ttdeci">TOnionSkinMaskHandle * getCurrentOnionSkin() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:140</div></div>
<div class="ttc" id="aclass_t_frame_handle_html"><div class="ttname"><a href="class_t_frame_handle.html">TFrameHandle</a></div><div class="ttdef"><b>Definition:</b> tframehandle.h:30</div></div>
<div class="ttc" id="aclass_t_raster_p_t_html"><div class="ttname"><a href="class_t_raster_p_t.html">TRasterPT&lt; TPixel32 &gt;</a></div></div>
<div class="ttc" id="aclass_t_xsh_cell_html_a5a1965b96c2c698d6f0fb42a80c03406"><div class="ttname"><a href="class_t_xsh_cell.html#a5a1965b96c2c698d6f0fb42a80c03406">TXshCell::getFrameId</a></div><div class="ttdeci">TFrameId getFrameId() const</div><div class="ttdef"><b>Definition:</b> txshcell.h:120</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_aa26f1638f7685304949b33befc0bfcc9"><div class="ttname"><a href="class_t_xsh_level.html#aa26f1638f7685304949b33befc0bfcc9">TXshLevel::getSoundLevel</a></div><div class="ttdeci">virtual TXshSoundLevel * getSoundLevel()</div><div class="ttdoc">Method (to be overridden in subclasses) to downcast to TXshSoundLevel.</div><div class="ttdef"><b>Definition:</b> txshlevel.h:108</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a1ae81edf03bc7527176c84478c350f57"><div class="ttname"><a href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">TXsheet::getCell</a></div><div class="ttdeci">const TXshCell &amp; getCell(int row, int col) const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:233</div></div>
<div class="ttc" id="aclass_toonz_scene_html_ae2cbc582144c92adc5076cd5f556c95a"><div class="ttname"><a href="class_toonz_scene.html#ae2cbc582144c92adc5076cd5f556c95a">ToonzScene::getChildStack</a></div><div class="ttdeci">ChildStack * getChildStack() const</div><div class="ttdoc">Returns a pointer to the xsheets hierarchy.</div><div class="ttdef"><b>Definition:</b> toonzscene.h:83</div></div>
<div class="ttc" id="anamespace_stage_html_a28ab15860508cccd59a31483a9b8afa1"><div class="ttname"><a href="namespace_stage.html#a28ab15860508cccd59a31483a9b8afa1">Stage::visit</a></div><div class="ttdeci">DVAPI void visit(Visitor &amp;visitor, const VisitArgs &amp;args)</div><div class="ttdef"><b>Definition:</b> stage.cpp:911</div></div>
<div class="ttc" id="astruct_stage_1_1_visit_args_html"><div class="ttname"><a href="struct_stage_1_1_visit_args.html">Stage::VisitArgs</a></div><div class="ttdef"><b>Definition:</b> stagevisitor.h:123</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4247b4210012d911d749cdfc0262a194" name="a4247b4210012d911d749cdfc0262a194"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4247b4210012d911d749cdfc0262a194">&#9670;&nbsp;</a></span>dropEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::dropEvent </td>
          <td>(</td>
          <td class="paramtype">QDropEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1723</span>                                         {</div>
<div class="line"><span class="lineno"> 1724</span>  <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1725</span> </div>
<div class="line"><span class="lineno"> 1726</span>  <span class="keyword">const</span> QMimeData *mimeData = e-&gt;mimeData();</div>
<div class="line"><span class="lineno"> 1727</span>  <span class="keywordflow">if</span> (mimeData-&gt;hasUrls()) {</div>
<div class="line"><span class="lineno"> 1728</span>    <a class="code hl_struct" href="struct_io_cmd_1_1_load_resource_arguments.html">IoCmd::LoadResourceArguments</a> args;</div>
<div class="line"><span class="lineno"> 1729</span> </div>
<div class="line"><span class="lineno"> 1730</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> QUrl &amp;url : mimeData-&gt;urls()) {</div>
<div class="line"><span class="lineno"> 1731</span>      <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> fp(url.toLocalFile().toStdWString());</div>
<div class="line"><span class="lineno"> 1732</span>      args.<a class="code hl_variable" href="struct_io_cmd_1_1_load_resource_arguments.html#a5175016c278fd5a031f149abf4f77cb1">resourceDatas</a>.push_back(fp);</div>
<div class="line"><span class="lineno"> 1733</span>    }</div>
<div class="line"><span class="lineno"> 1734</span> </div>
<div class="line"><span class="lineno"> 1735</span>    <a class="code hl_function" href="namespace_io_cmd.html#a107f6d3100b922e0c09e9b4aa1a8602a">IoCmd::loadResources</a>(args);</div>
<div class="line"><span class="lineno"> 1736</span> </div>
<div class="line"><span class="lineno"> 1737</span>    <span class="keywordflow">if</span> (acceptResourceOrFolderDrop(mimeData-&gt;urls())) {</div>
<div class="line"><span class="lineno"> 1738</span>      <span class="comment">// Force Copy Action</span></div>
<div class="line"><span class="lineno"> 1739</span>      e-&gt;setDropAction(Qt::CopyAction);</div>
<div class="line"><span class="lineno"> 1740</span>      <span class="comment">// For files, don&#39;t accept original proposed action in case it&#39;s a move</span></div>
<div class="line"><span class="lineno"> 1741</span>      e-&gt;accept();</div>
<div class="line"><span class="lineno"> 1742</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1743</span>    }</div>
<div class="line"><span class="lineno"> 1744</span>  }</div>
<div class="line"><span class="lineno"> 1745</span>  e-&gt;acceptProposedAction();</div>
<div class="line"><span class="lineno"> 1746</span>}</div>
<div class="ttc" id="aclass_t_file_path_html"><div class="ttname"><a href="class_t_file_path.html">TFilePath</a></div><div class="ttdef"><b>Definition:</b> tfilepath.h:134</div></div>
<div class="ttc" id="anamespace_io_cmd_html_a107f6d3100b922e0c09e9b4aa1a8602a"><div class="ttname"><a href="namespace_io_cmd.html#a107f6d3100b922e0c09e9b4aa1a8602a">IoCmd::loadResources</a></div><div class="ttdeci">int loadResources(LoadResourceArguments &amp;args, bool updateRecentFiles=true, LoadResourceArguments::ScopedBlock *sb=0)</div><div class="ttdef"><b>Definition:</b> iocommand.cpp:2357</div></div>
<div class="ttc" id="astruct_io_cmd_1_1_load_resource_arguments_html"><div class="ttname"><a href="struct_io_cmd_1_1_load_resource_arguments.html">IoCmd::LoadResourceArguments</a></div><div class="ttdoc">Composite data used describing a group of Toonz resources to be loaded.</div><div class="ttdef"><b>Definition:</b> iocommand.h:59</div></div>
<div class="ttc" id="astruct_io_cmd_1_1_load_resource_arguments_html_a5175016c278fd5a031f149abf4f77cb1"><div class="ttname"><a href="struct_io_cmd_1_1_load_resource_arguments.html#a5175016c278fd5a031f149abf4f77cb1">IoCmd::LoadResourceArguments::resourceDatas</a></div><div class="ttdeci">std::vector&lt; ResourceData &gt; resourceDatas</div><div class="ttdoc">[In/Out] Data identifying a single resource.</div><div class="ttdef"><b>Definition:</b> iocommand.h:105</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4964c1394b70da1420b770d872659dca" name="a4964c1394b70da1420b770d872659dca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4964c1394b70da1420b770d872659dca">&#9670;&nbsp;</a></span>enablePreview</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::enablePreview </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>previewMode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  927</span>                                               {</div>
<div class="line"><span class="lineno">  928</span>  <span class="keywordflow">if</span> (m_previewMode == previewMode) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  929</span> </div>
<div class="line"><span class="lineno">  930</span>  <a class="code hl_class" href="class_t_app.html">TApp</a> *app = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>();</div>
<div class="line"><span class="lineno">  931</span>  <span class="keywordflow">if</span> (app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;isEditingLevel() &amp;&amp; previewMode != NO_PREVIEW)</div>
<div class="line"><span class="lineno">  932</span>    app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;setFrame(app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFrame());</div>
<div class="line"><span class="lineno">  933</span> </div>
<div class="line"><span class="lineno">  934</span>  <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) {</div>
<div class="line"><span class="lineno">  935</span>    freeze(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  936</span>    emit freezeStateChanged(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  937</span>  }</div>
<div class="line"><span class="lineno">  938</span> </div>
<div class="line"><span class="lineno">  939</span>  <span class="keywordflow">if</span> (m_previewMode != NO_PREVIEW)</div>
<div class="line"><span class="lineno">  940</span>    <a class="code hl_function" href="class_previewer.html#a5eb765b66490a3d99d432f90864bfacd">Previewer::instance</a>(m_previewMode == SUBCAMERA_PREVIEW)</div>
<div class="line"><span class="lineno">  941</span>        -&gt;removeListener(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  942</span> </div>
<div class="line"><span class="lineno">  943</span>  <span class="comment">// Schedule as a listener to Previewer.</span></div>
<div class="line"><span class="lineno">  944</span>  <span class="keywordflow">if</span> (previewMode != NO_PREVIEW) {</div>
<div class="line"><span class="lineno">  945</span>    <a class="code hl_class" href="class_previewer.html">Previewer</a> *previewer =</div>
<div class="line"><span class="lineno">  946</span>        <a class="code hl_function" href="class_previewer.html#a5eb765b66490a3d99d432f90864bfacd">Previewer::instance</a>(previewMode == SUBCAMERA_PREVIEW);</div>
<div class="line"><span class="lineno">  947</span>    previewer-&gt;addListener(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  948</span>    previewer-&gt;<a class="code hl_slot" href="class_previewer.html#a4f2238933e3e040b9c568525d487dbde">update</a>();</div>
<div class="line"><span class="lineno">  949</span>  }</div>
<div class="line"><span class="lineno">  950</span> </div>
<div class="line"><span class="lineno">  951</span>  m_previewMode = previewMode;</div>
<div class="line"><span class="lineno">  952</span> </div>
<div class="line"><span class="lineno">  953</span>  <a class="code hl_function" href="class_scene_viewer.html#ab96170500b3df72aa36a3deb5f69cc11">GLInvalidateAll</a>();</div>
<div class="line"><span class="lineno">  954</span> </div>
<div class="line"><span class="lineno">  955</span>  <span class="comment">// for updating the title bar</span></div>
<div class="line"><span class="lineno">  956</span>  emit previewToggled();</div>
<div class="line"><span class="lineno">  957</span>}</div>
<div class="ttc" id="aclass_previewer_html_a4f2238933e3e040b9c568525d487dbde"><div class="ttname"><a href="class_previewer.html#a4f2238933e3e040b9c568525d487dbde">Previewer::update</a></div><div class="ttdeci">void update()</div><div class="ttdoc">Refreshes all scene frames.</div><div class="ttdef"><b>Definition:</b> previewer.cpp:1248</div></div>
<div class="ttc" id="aclass_scene_viewer_html_ab96170500b3df72aa36a3deb5f69cc11"><div class="ttname"><a href="class_scene_viewer.html#ab96170500b3df72aa36a3deb5f69cc11">SceneViewer::GLInvalidateAll</a></div><div class="ttdeci">void GLInvalidateAll() override</div><div class="ttdef"><b>Definition:</b> sceneviewer.cpp:2269</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aba4c135ce293af822b5cfcebaf7d9d87" name="aba4c135ce293af822b5cfcebaf7d9d87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba4c135ce293af822b5cfcebaf7d9d87">&#9670;&nbsp;</a></span>enterEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::enterEvent </td>
          <td>(</td>
          <td class="paramtype">QEvent *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  438</span>{ onEnter(); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab7198c31eb441b64ad016abdb4bdb255" name="ab7198c31eb441b64ad016abdb4bdb255"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7198c31eb441b64ad016abdb4bdb255">&#9670;&nbsp;</a></span>event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SceneViewer::event </td>
          <td>(</td>
          <td class="paramtype">QEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1144</span>                                 {</div>
<div class="line"><span class="lineno"> 1145</span>  <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1146</span><span class="comment">  switch (e-&gt;type()) {</span></div>
<div class="line"><span class="lineno"> 1147</span><span class="comment">  //    case QEvent::Enter:</span></div>
<div class="line"><span class="lineno"> 1148</span><span class="comment">  //    qDebug() &lt;&lt; &quot;[enter] ************************** Enter&quot;;</span></div>
<div class="line"><span class="lineno"> 1149</span><span class="comment">  //    break;</span></div>
<div class="line"><span class="lineno"> 1150</span><span class="comment">  //    case QEvent::Leave:</span></div>
<div class="line"><span class="lineno"> 1151</span><span class="comment">  //    qDebug() &lt;&lt; &quot;[enter] ************************** Leave&quot;;</span></div>
<div class="line"><span class="lineno"> 1152</span><span class="comment">  //    break;</span></div>
<div class="line"><span class="lineno"> 1153</span><span class="comment"></span> </div>
<div class="line"><span class="lineno"> 1154</span><span class="comment">  case QEvent::TabletPress: {</span></div>
<div class="line"><span class="lineno"> 1155</span><span class="comment">    QTabletEvent *te = static_cast&lt;QTabletEvent *&gt;(e);</span></div>
<div class="line"><span class="lineno"> 1156</span><span class="comment">    qDebug() &lt;&lt; &quot;[enter] ************************** TabletPress mouseState(&quot;</span></div>
<div class="line"><span class="lineno"> 1157</span><span class="comment">             &lt;&lt; m_mouseState &lt;&lt; &quot;) tabletState(&quot; &lt;&lt; m_tabletState</span></div>
<div class="line"><span class="lineno"> 1158</span><span class="comment">             &lt;&lt; &quot;) pressure(&quot; &lt;&lt; m_pressure &lt;&lt; &quot;) pointerType(&quot;</span></div>
<div class="line"><span class="lineno"> 1159</span><span class="comment">             &lt;&lt; te-&gt;pointerType() &lt;&lt; &quot;) device(&quot; &lt;&lt; te-&gt;device() &lt;&lt; &quot;)&quot;;</span></div>
<div class="line"><span class="lineno"> 1160</span><span class="comment">  } break;</span></div>
<div class="line"><span class="lineno"> 1161</span><span class="comment">  //    case QEvent::TabletMove:</span></div>
<div class="line"><span class="lineno"> 1162</span><span class="comment">  //    qDebug() &lt;&lt; &quot;[enter] ************************** TabletMove</span></div>
<div class="line"><span class="lineno"> 1163</span><span class="comment">  //mouseState(&quot;&lt;&lt;m_mouseState&lt;&lt;&quot;) tabletState(&quot;&lt;&lt;m_tabletState&lt;&lt;&quot;) pressure(&quot;</span></div>
<div class="line"><span class="lineno"> 1164</span><span class="comment">  //&lt;&lt; m_pressure &lt;&lt; &quot;)&quot;;</span></div>
<div class="line"><span class="lineno"> 1165</span><span class="comment">  //    break;</span></div>
<div class="line"><span class="lineno"> 1166</span><span class="comment">  case QEvent::TabletRelease:</span></div>
<div class="line"><span class="lineno"> 1167</span><span class="comment">    qDebug() &lt;&lt; &quot;[enter] ************************** TabletRelease mouseState(&quot;</span></div>
<div class="line"><span class="lineno"> 1168</span><span class="comment">             &lt;&lt; m_mouseState &lt;&lt; &quot;) tabletState(&quot; &lt;&lt; m_tabletState &lt;&lt; &quot;)&quot;;</span></div>
<div class="line"><span class="lineno"> 1169</span><span class="comment">    break;</span></div>
<div class="line"><span class="lineno"> 1170</span><span class="comment"></span> </div>
<div class="line"><span class="lineno"> 1171</span><span class="comment">  case QEvent::TouchBegin:</span></div>
<div class="line"><span class="lineno"> 1172</span><span class="comment">    qDebug() &lt;&lt; &quot;[enter] ************************** TouchBegin&quot;;</span></div>
<div class="line"><span class="lineno"> 1173</span><span class="comment">    break;</span></div>
<div class="line"><span class="lineno"> 1174</span><span class="comment">  case QEvent::TouchEnd:</span></div>
<div class="line"><span class="lineno"> 1175</span><span class="comment">    qDebug() &lt;&lt; &quot;[enter] ************************** TouchEnd&quot;;</span></div>
<div class="line"><span class="lineno"> 1176</span><span class="comment">    break;</span></div>
<div class="line"><span class="lineno"> 1177</span><span class="comment">  case QEvent::TouchCancel:</span></div>
<div class="line"><span class="lineno"> 1178</span><span class="comment">    qDebug() &lt;&lt; &quot;[enter] ************************** TouchCancel&quot;;</span></div>
<div class="line"><span class="lineno"> 1179</span><span class="comment">    break;</span></div>
<div class="line"><span class="lineno"> 1180</span><span class="comment"></span> </div>
<div class="line"><span class="lineno"> 1181</span><span class="comment">  case QEvent::Gesture:</span></div>
<div class="line"><span class="lineno"> 1182</span><span class="comment">    qDebug() &lt;&lt; &quot;[enter] ************************** Gesture&quot;;</span></div>
<div class="line"><span class="lineno"> 1183</span><span class="comment">    break;</span></div>
<div class="line"><span class="lineno"> 1184</span><span class="comment"></span> </div>
<div class="line"><span class="lineno"> 1185</span><span class="comment">  case QEvent::MouseButtonPress:</span></div>
<div class="line"><span class="lineno"> 1186</span><span class="comment">    qDebug()</span></div>
<div class="line"><span class="lineno"> 1187</span><span class="comment">        &lt;&lt; &quot;[enter] ************************** MouseButtonPress mouseState(&quot;</span></div>
<div class="line"><span class="lineno"> 1188</span><span class="comment">        &lt;&lt; m_mouseState &lt;&lt; &quot;) tabletState(&quot; &lt;&lt; m_tabletState &lt;&lt; &quot;) pressure(&quot;</span></div>
<div class="line"><span class="lineno"> 1189</span><span class="comment">        &lt;&lt; m_pressure &lt;&lt; &quot;) tabletEvent(&quot; &lt;&lt; m_tabletEvent &lt;&lt; &quot;)&quot;;</span></div>
<div class="line"><span class="lineno"> 1190</span><span class="comment">    break;</span></div>
<div class="line"><span class="lineno"> 1191</span><span class="comment">  //    case QEvent::MouseMove:</span></div>
<div class="line"><span class="lineno"> 1192</span><span class="comment">  //    qDebug() &lt;&lt; &quot;[enter] ************************** MouseMove mouseState(&quot;</span></div>
<div class="line"><span class="lineno"> 1193</span><span class="comment">  //&lt;&lt; m_mouseState &lt;&lt; &quot;) tabletState(&quot;&lt;&lt;m_tabletState&lt;&lt;&quot;) pressure(&quot; &lt;&lt;</span></div>
<div class="line"><span class="lineno"> 1194</span><span class="comment">  //m_pressure &lt;&lt; &quot;)&quot;;</span></div>
<div class="line"><span class="lineno"> 1195</span><span class="comment">  //    break;</span></div>
<div class="line"><span class="lineno"> 1196</span><span class="comment">  case QEvent::MouseButtonRelease:</span></div>
<div class="line"><span class="lineno"> 1197</span><span class="comment">    qDebug()</span></div>
<div class="line"><span class="lineno"> 1198</span><span class="comment">        &lt;&lt; &quot;[enter] ************************** MouseButtonRelease mouseState(&quot;</span></div>
<div class="line"><span class="lineno"> 1199</span><span class="comment">        &lt;&lt; m_mouseState &lt;&lt; &quot;) tabletState(&quot; &lt;&lt; m_tabletState &lt;&lt; &quot;)&quot;;</span></div>
<div class="line"><span class="lineno"> 1200</span><span class="comment">    break;</span></div>
<div class="line"><span class="lineno"> 1201</span><span class="comment"></span> </div>
<div class="line"><span class="lineno"> 1202</span><span class="comment">  case QEvent::MouseButtonDblClick:</span></div>
<div class="line"><span class="lineno"> 1203</span><span class="comment">    qDebug() &lt;&lt; &quot;[enter] ============================== MouseButtonDblClick&quot;;</span></div>
<div class="line"><span class="lineno"> 1204</span><span class="comment">    break;</span></div>
<div class="line"><span class="lineno"> 1205</span><span class="comment">  }</span></div>
<div class="line"><span class="lineno"> 1206</span><span class="comment">  */</span></div>
<div class="line"><span class="lineno"> 1207</span>  <span class="keywordflow">if</span> (e-&gt;type() == QEvent::Gesture &amp;&amp; CommandManager::instance()</div>
<div class="line"><span class="lineno"> 1208</span>                                          -&gt;getAction(MI_TouchGestureControl)</div>
<div class="line"><span class="lineno"> 1209</span>                                          -&gt;isChecked()) {</div>
<div class="line"><span class="lineno"> 1210</span>    gestureEvent(<span class="keyword">static_cast&lt;</span>QGestureEvent *<span class="keyword">&gt;</span>(e));</div>
<div class="line"><span class="lineno"> 1211</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1212</span>  }</div>
<div class="line"><span class="lineno"> 1213</span>  <span class="keywordflow">if</span> ((e-&gt;type() == QEvent::TouchBegin || e-&gt;type() == QEvent::TouchEnd ||</div>
<div class="line"><span class="lineno"> 1214</span>       e-&gt;type() == QEvent::TouchCancel || e-&gt;type() == QEvent::TouchUpdate) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1215</span>      CommandManager::instance()</div>
<div class="line"><span class="lineno"> 1216</span>          -&gt;getAction(MI_TouchGestureControl)</div>
<div class="line"><span class="lineno"> 1217</span>          -&gt;isChecked()) {</div>
<div class="line"><span class="lineno"> 1218</span>    touchEvent(<span class="keyword">static_cast&lt;</span>QTouchEvent *<span class="keyword">&gt;</span>(e), e-&gt;type());</div>
<div class="line"><span class="lineno"> 1219</span>    m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1220</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1221</span>  }</div>
<div class="line"><span class="lineno"> 1222</span>  <span class="keywordflow">if</span> (e-&gt;type() == QEvent::ShortcutOverride || e-&gt;type() == QEvent::KeyPress) {</div>
<div class="line"><span class="lineno"> 1223</span>    <span class="keywordflow">if</span> (!((QKeyEvent *)e)-&gt;isAutoRepeat()) {</div>
<div class="line"><span class="lineno"> 1224</span>      <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;storeTool();</div>
<div class="line"><span class="lineno"> 1225</span>    }</div>
<div class="line"><span class="lineno"> 1226</span>  }</div>
<div class="line"><span class="lineno"> 1227</span>  <span class="keywordflow">if</span> (e-&gt;type() == QEvent::ShortcutOverride) {</div>
<div class="line"><span class="lineno"> 1228</span>    <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 1229</span>    <span class="keywordflow">if</span> (tool &amp;&amp; tool-&gt;isEnabled() &amp;&amp; tool-&gt;getName() == T_Type &amp;&amp;</div>
<div class="line"><span class="lineno"> 1230</span>        tool-&gt;<a class="code hl_function" href="class_t_tool.html#a6225a72c8bc7ad1ad6eff6b81ac6b0a6">isActive</a>())</div>
<div class="line"><span class="lineno"> 1231</span>      e-&gt;accept();</div>
<div class="line"><span class="lineno"> 1232</span>    <span class="comment">// for other tools, check if the pressed keys should be catched instead of</span></div>
<div class="line"><span class="lineno"> 1233</span>    <span class="comment">// triggering the shortcut command actions</span></div>
<div class="line"><span class="lineno"> 1234</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tool &amp;&amp; tool-&gt;isEventAcceptable(e)) {</div>
<div class="line"><span class="lineno"> 1235</span>      e-&gt;accept();</div>
<div class="line"><span class="lineno"> 1236</span>    }</div>
<div class="line"><span class="lineno"> 1237</span>    <span class="comment">// if the Shift &amp; Trace mode is active, then override F1, F2 and F3 key</span></div>
<div class="line"><span class="lineno"> 1238</span>    <span class="comment">// actions by flipping feature</span></div>
<div class="line"><span class="lineno"> 1239</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CommandManager::instance()</div>
<div class="line"><span class="lineno"> 1240</span>                 -&gt;getAction(MI_ShiftTrace)</div>
<div class="line"><span class="lineno"> 1241</span>                 -&gt;isChecked() &amp;&amp;</div>
<div class="line"><span class="lineno"> 1242</span>             TTool::getTool(<span class="stringliteral">&quot;T_ShiftTrace&quot;</span>, <a class="code hl_enumvalue" href="class_t_tool.html#adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1">TTool::ToonzImage</a>)</div>
<div class="line"><span class="lineno"> 1243</span>                 -&gt;isEventAcceptable(e)) {</div>
<div class="line"><span class="lineno"> 1244</span>      e-&gt;accept();</div>
<div class="line"><span class="lineno"> 1245</span>    }</div>
<div class="line"><span class="lineno"> 1246</span> </div>
<div class="line"><span class="lineno"> 1247</span>    <span class="comment">// Disable keyboard shortcuts while the tool is busy with a mouse drag</span></div>
<div class="line"><span class="lineno"> 1248</span>    <span class="comment">// operation.</span></div>
<div class="line"><span class="lineno"> 1249</span>    <span class="keywordflow">if</span> (tool-&gt;isDragging()) {</div>
<div class="line"><span class="lineno"> 1250</span>      e-&gt;accept();</div>
<div class="line"><span class="lineno"> 1251</span>    }</div>
<div class="line"><span class="lineno"> 1252</span> </div>
<div class="line"><span class="lineno"> 1253</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1254</span>  }</div>
<div class="line"><span class="lineno"> 1255</span>  <span class="keywordflow">if</span> (e-&gt;type() == QEvent::KeyRelease) {</div>
<div class="line"><span class="lineno"> 1256</span>    <span class="keywordflow">if</span> (!((QKeyEvent *)e)-&gt;isAutoRepeat()) {</div>
<div class="line"><span class="lineno"> 1257</span>      QWidget *focusWidget = QApplication::focusWidget();</div>
<div class="line"><span class="lineno"> 1258</span>      <span class="keywordflow">if</span> (focusWidget == 0 ||</div>
<div class="line"><span class="lineno"> 1259</span>          QString(focusWidget-&gt;metaObject()-&gt;className()) == <span class="stringliteral">&quot;SceneViewer&quot;</span>)</div>
<div class="line"><span class="lineno"> 1260</span>        <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;restoreTool();</div>
<div class="line"><span class="lineno"> 1261</span>    }</div>
<div class="line"><span class="lineno"> 1262</span>  }</div>
<div class="line"><span class="lineno"> 1263</span> </div>
<div class="line"><span class="lineno"> 1264</span>  <span class="comment">// discard too frequent move events</span></div>
<div class="line"><span class="lineno"> 1265</span>  <span class="keyword">static</span> QTime clock;</div>
<div class="line"><span class="lineno"> 1266</span>  <span class="keywordflow">if</span> (e-&gt;type() == QEvent::MouseButtonPress)</div>
<div class="line"><span class="lineno"> 1267</span>    clock.start();</div>
<div class="line"><span class="lineno"> 1268</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e-&gt;type() == QEvent::MouseMove) {</div>
<div class="line"><span class="lineno"> 1269</span>    <span class="keywordflow">if</span> (clock.isValid() &amp;&amp; clock.elapsed() &lt; 10) {</div>
<div class="line"><span class="lineno"> 1270</span>      e-&gt;accept();</div>
<div class="line"><span class="lineno"> 1271</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1272</span>    }</div>
<div class="line"><span class="lineno"> 1273</span>    clock.start();</div>
<div class="line"><span class="lineno"> 1274</span>  }</div>
<div class="line"><span class="lineno"> 1275</span> </div>
<div class="line"><span class="lineno"> 1276</span>  <span class="keywordflow">return</span> QOpenGLWidget::event(e);</div>
<div class="line"><span class="lineno"> 1277</span>}</div>
<div class="ttc" id="aclass_t_tool_html_a6225a72c8bc7ad1ad6eff6b81ac6b0a6"><div class="ttname"><a href="class_t_tool.html#a6225a72c8bc7ad1ad6eff6b81ac6b0a6">TTool::isActive</a></div><div class="ttdeci">bool isActive() const</div><div class="ttdoc">Used to know if a tool is active, (used in TextTool only).</div><div class="ttdef"><b>Definition:</b> tool.h:418</div></div>
<div class="ttc" id="aclass_t_tool_html_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1"><div class="ttname"><a href="class_t_tool.html#adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1">TTool::ToonzImage</a></div><div class="ttdeci">@ ToonzImage</div><div class="ttdoc">Will work on colormap (tlv) images.</div><div class="ttdef"><b>Definition:</b> tool.h:279</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a28b51b06c0d341adf5e3479e610eff47" name="a28b51b06c0d341adf5e3479e610eff47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28b51b06c0d341adf5e3479e610eff47">&#9670;&nbsp;</a></span>fitToCamera</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::fitToCamera </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2637</span>                              {</div>
<div class="line"><span class="lineno"> 2638</span>  <span class="comment">// Reset the view scale to 1:1.</span></div>
<div class="line"><span class="lineno"> 2639</span>  <span class="keywordtype">bool</span> tempIsFlippedX = m_isFlippedX;</div>
<div class="line"><span class="lineno"> 2640</span>  <span class="keywordtype">bool</span> tempIsFlippedY = m_isFlippedY;</div>
<div class="line"><span class="lineno"> 2641</span>  resetSceneViewer();</div>
<div class="line"><span class="lineno"> 2642</span> </div>
<div class="line"><span class="lineno"> 2643</span>  m_isFlippedX = tempIsFlippedX;</div>
<div class="line"><span class="lineno"> 2644</span>  m_isFlippedY = tempIsFlippedY;</div>
<div class="line"><span class="lineno"> 2645</span> </div>
<div class="line"><span class="lineno"> 2646</span>  <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh            = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()-&gt;getXsheet();</div>
<div class="line"><span class="lineno"> 2647</span>  <span class="keywordtype">int</span> frame               = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFrame();</div>
<div class="line"><span class="lineno"> 2648</span>  <a class="code hl_class" href="class_t_stage_object_id.html">TStageObjectId</a> cameraId = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a5dc925584e35e1678f5678b79c470959">getStageObjectTree</a>()-&gt;<a class="code hl_function" href="class_t_stage_object_tree.html#a7d63ae5d60c3a3aacf5da58c108ac167">getCurrentCameraId</a>();</div>
<div class="line"><span class="lineno"> 2649</span>  <a class="code hl_class" href="class_t_stage_object.html">TStageObject</a> *camera    = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">getStageObject</a>(cameraId);</div>
<div class="line"><span class="lineno"> 2650</span>  <a class="code hl_class" href="class_t_affine.html">TAffine</a> cameraPlacement = camera-&gt;getPlacement(frame);</div>
<div class="line"><span class="lineno"> 2651</span>  <span class="keywordtype">double</span> cameraZ          = camera-&gt;<a class="code hl_function" href="class_t_stage_object.html#a52b1a3ec50ed35fbc07c9a3b64ecc21c">getZ</a>(frame);</div>
<div class="line"><span class="lineno"> 2652</span>  <a class="code hl_class" href="class_t_affine.html">TAffine</a> cameraAff =</div>
<div class="line"><span class="lineno"> 2653</span>      <a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>() * cameraPlacement * <a class="code hl_class" href="class_t_scale.html">TScale</a>((1000 + cameraZ) / 1000);</div>
<div class="line"><span class="lineno"> 2654</span> </div>
<div class="line"><span class="lineno"> 2655</span>  QRect viewRect    = rect();</div>
<div class="line"><span class="lineno"> 2656</span>  <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> cameraRect = ViewerDraw::getCameraRect();</div>
<div class="line"><span class="lineno"> 2657</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> P00       = cameraAff * cameraRect.getP00();</div>
<div class="line"><span class="lineno"> 2658</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> P10       = cameraAff * cameraRect.getP10();</div>
<div class="line"><span class="lineno"> 2659</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> P01       = cameraAff * cameraRect.getP01();</div>
<div class="line"><span class="lineno"> 2660</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> P11       = cameraAff * cameraRect.getP11();</div>
<div class="line"><span class="lineno"> 2661</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> p0        = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(std::min({P00.x, P01.x, P10.x, P11.x}),</div>
<div class="line"><span class="lineno"> 2662</span>                       std::min({P00.y, P01.y, P10.y, P11.y}));</div>
<div class="line"><span class="lineno"> 2663</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> p1        = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(std::max({P00.x, P01.x, P10.x, P11.x}),</div>
<div class="line"><span class="lineno"> 2664</span>                       std::max({P00.y, P01.y, P10.y, P11.y}));</div>
<div class="line"><span class="lineno"> 2665</span>  cameraRect        = <a class="code hl_class" href="class_t_rect_t.html">TRectD</a>(p0.x, p0.y, p1.x, p1.y);</div>
<div class="line"><span class="lineno"> 2666</span> </div>
<div class="line"><span class="lineno"> 2667</span>  <span class="comment">// Pan</span></div>
<div class="line"><span class="lineno"> 2668</span>  <span class="keywordflow">if</span> (!is3DView()) {</div>
<div class="line"><span class="lineno"> 2669</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> cameraCenter = (cameraRect.getP00() + cameraRect.getP11()) * 0.5;</div>
<div class="line"><span class="lineno"> 2670</span>    panQt(QPoint(-cameraCenter.x, cameraCenter.y));</div>
<div class="line"><span class="lineno"> 2671</span>  }</div>
<div class="line"><span class="lineno"> 2672</span> </div>
<div class="line"><span class="lineno"> 2673</span>  <span class="keywordtype">double</span> xratio = (double)viewRect.width() / cameraRect.getLx();</div>
<div class="line"><span class="lineno"> 2674</span>  <span class="keywordtype">double</span> yratio = (double)viewRect.height() / cameraRect.getLy();</div>
<div class="line"><span class="lineno"> 2675</span>  <span class="keywordtype">double</span> ratio  = std::min(xratio, yratio);</div>
<div class="line"><span class="lineno"> 2676</span>  <span class="keywordflow">if</span> (ratio == 0.0) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2677</span>  <span class="keywordflow">if</span> (tempIsFlippedX)</div>
<div class="line"><span class="lineno"> 2678</span>    setViewMatrix(<a class="code hl_class" href="class_t_scale.html">TScale</a>(-1, 1) * m_viewAff[m_viewMode], m_viewMode);</div>
<div class="line"><span class="lineno"> 2679</span>  <span class="keywordflow">if</span> (tempIsFlippedY)</div>
<div class="line"><span class="lineno"> 2680</span>    setViewMatrix(<a class="code hl_class" href="class_t_scale.html">TScale</a>(1, -1) * m_viewAff[m_viewMode], m_viewMode);</div>
<div class="line"><span class="lineno"> 2681</span>  <span class="comment">// Scale and center on the center of \a rect.</span></div>
<div class="line"><span class="lineno"> 2682</span>  QPoint c = viewRect.center();</div>
<div class="line"><span class="lineno"> 2683</span>  zoom(<a class="code hl_class" href="class_t_point_t.html">TPointD</a>(c.x(), c.y()), ratio);</div>
<div class="line"><span class="lineno"> 2684</span>  emit onFlipHChanged(m_isFlippedX);</div>
<div class="line"><span class="lineno"> 2685</span>  emit onFlipVChanged(m_isFlippedY);</div>
<div class="line"><span class="lineno"> 2686</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abacde6b68591e1ad86c3146516dda792" name="abacde6b68591e1ad86c3146516dda792"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abacde6b68591e1ad86c3146516dda792">&#9670;&nbsp;</a></span>fitToCameraOutline</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::fitToCameraOutline </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2690</span>                                     {</div>
<div class="line"><span class="lineno"> 2691</span>  <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh            = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()-&gt;getXsheet();</div>
<div class="line"><span class="lineno"> 2692</span>  <span class="keywordtype">int</span> frame               = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFrame();</div>
<div class="line"><span class="lineno"> 2693</span>  <a class="code hl_class" href="class_t_stage_object_id.html">TStageObjectId</a> cameraId = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a5dc925584e35e1678f5678b79c470959">getStageObjectTree</a>()-&gt;<a class="code hl_function" href="class_t_stage_object_tree.html#a7d63ae5d60c3a3aacf5da58c108ac167">getCurrentCameraId</a>();</div>
<div class="line"><span class="lineno"> 2694</span>  <a class="code hl_class" href="class_t_stage_object.html">TStageObject</a> *camera    = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">getStageObject</a>(cameraId);</div>
<div class="line"><span class="lineno"> 2695</span>  <a class="code hl_class" href="class_t_affine.html">TAffine</a> cameraPlacement = camera-&gt;getPlacement(frame);</div>
<div class="line"><span class="lineno"> 2696</span>  <span class="keywordtype">double</span> cameraZ          = camera-&gt;<a class="code hl_function" href="class_t_stage_object.html#a52b1a3ec50ed35fbc07c9a3b64ecc21c">getZ</a>(frame);</div>
<div class="line"><span class="lineno"> 2697</span>  <a class="code hl_class" href="class_t_affine.html">TAffine</a> cameraAff =</div>
<div class="line"><span class="lineno"> 2698</span>      <a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>() * cameraPlacement * <a class="code hl_class" href="class_t_scale.html">TScale</a>((1000 + cameraZ) / 1000);</div>
<div class="line"><span class="lineno"> 2699</span> </div>
<div class="line"><span class="lineno"> 2700</span>  QRect viewRect    = rect();</div>
<div class="line"><span class="lineno"> 2701</span>  <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> cameraRect = ViewerDraw::getCameraRect();</div>
<div class="line"><span class="lineno"> 2702</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> P00       = cameraAff * cameraRect.getP00();</div>
<div class="line"><span class="lineno"> 2703</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> P10       = cameraAff * cameraRect.getP10();</div>
<div class="line"><span class="lineno"> 2704</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> P01       = cameraAff * cameraRect.getP01();</div>
<div class="line"><span class="lineno"> 2705</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> P11       = cameraAff * cameraRect.getP11();</div>
<div class="line"><span class="lineno"> 2706</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> p0        = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(std::min({P00.x, P01.x, P10.x, P11.x}),</div>
<div class="line"><span class="lineno"> 2707</span>                       std::min({P00.y, P01.y, P10.y, P11.y}));</div>
<div class="line"><span class="lineno"> 2708</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> p1        = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(std::max({P00.x, P01.x, P10.x, P11.x}),</div>
<div class="line"><span class="lineno"> 2709</span>                       std::max({P00.y, P01.y, P10.y, P11.y}));</div>
<div class="line"><span class="lineno"> 2710</span>  cameraRect        = <a class="code hl_class" href="class_t_rect_t.html">TRectD</a>(p0.x, p0.y, p1.x, p1.y);</div>
<div class="line"><span class="lineno"> 2711</span> </div>
<div class="line"><span class="lineno"> 2712</span>  <span class="comment">// Pan</span></div>
<div class="line"><span class="lineno"> 2713</span>  <span class="keywordflow">if</span> (!is3DView()) {</div>
<div class="line"><span class="lineno"> 2714</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> cameraCenter = (cameraRect.getP00() + cameraRect.getP11()) * 0.5;</div>
<div class="line"><span class="lineno"> 2715</span>    panQt(QPoint(-cameraCenter.x, cameraCenter.y));</div>
<div class="line"><span class="lineno"> 2716</span>  }</div>
<div class="line"><span class="lineno"> 2717</span> </div>
<div class="line"><span class="lineno"> 2718</span>  <span class="keywordtype">double</span> xratio = (double)viewRect.width() / cameraRect.getLx();</div>
<div class="line"><span class="lineno"> 2719</span>  <span class="keywordtype">double</span> yratio = (double)viewRect.height() / cameraRect.getLy();</div>
<div class="line"><span class="lineno"> 2720</span>  <span class="keywordtype">double</span> ratio  = std::min(xratio, yratio);</div>
<div class="line"><span class="lineno"> 2721</span>  <span class="keywordflow">if</span> (ratio == 0.0) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2722</span> </div>
<div class="line"><span class="lineno"> 2723</span>  <span class="comment">// Scale and center on the center of \a rect.</span></div>
<div class="line"><span class="lineno"> 2724</span>  QPoint c = viewRect.center();</div>
<div class="line"><span class="lineno"> 2725</span>  zoom(<a class="code hl_class" href="class_t_point_t.html">TPointD</a>(c.x(), c.y()), ratio);</div>
<div class="line"><span class="lineno"> 2726</span>  zoom(<a class="code hl_class" href="class_t_point_t.html">TPointD</a>(c.x(), c.y()), 0.95);</div>
<div class="line"><span class="lineno"> 2727</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7aa63e40d31ff8087f5d4cceb5fd1fc0" name="a7aa63e40d31ff8087f5d4cceb5fd1fc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7aa63e40d31ff8087f5d4cceb5fd1fc0">&#9670;&nbsp;</a></span>flipX</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::flipX </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2537</span>                        {</div>
<div class="line"><span class="lineno"> 2538</span>  <span class="keywordtype">double</span> flipAngle0 = (m_rotationAngle[0] * -1) * 2;</div>
<div class="line"><span class="lineno"> 2539</span>  <span class="keywordtype">double</span> flipAngle1 = (m_rotationAngle[1] * -1) * 2;</div>
<div class="line"><span class="lineno"> 2540</span>  m_rotationAngle[0] += flipAngle0;</div>
<div class="line"><span class="lineno"> 2541</span>  m_rotationAngle[1] += flipAngle1;</div>
<div class="line"><span class="lineno"> 2542</span>  <span class="keywordflow">if</span> (m_isFlippedX != m_isFlippedY) {</div>
<div class="line"><span class="lineno"> 2543</span>    flipAngle0 = -flipAngle0;</div>
<div class="line"><span class="lineno"> 2544</span>    flipAngle1 = -flipAngle1;</div>
<div class="line"><span class="lineno"> 2545</span>  }</div>
<div class="line"><span class="lineno"> 2546</span>  m_viewAff[0] = m_viewAff[0] * <a class="code hl_class" href="class_t_rotation.html">TRotation</a>(flipAngle0) * <a class="code hl_class" href="class_t_scale.html">TScale</a>(-1, 1);</div>
<div class="line"><span class="lineno"> 2547</span>  m_viewAff[1] = m_viewAff[1] * <a class="code hl_class" href="class_t_rotation.html">TRotation</a>(flipAngle1) * <a class="code hl_class" href="class_t_scale.html">TScale</a>(-1, 1);</div>
<div class="line"><span class="lineno"> 2548</span>  m_viewAff[0].a13 *= -1;</div>
<div class="line"><span class="lineno"> 2549</span>  m_viewAff[1].a13 *= -1;</div>
<div class="line"><span class="lineno"> 2550</span>  m_isFlippedX = !m_isFlippedX;</div>
<div class="line"><span class="lineno"> 2551</span>  <a class="code hl_function" href="class_scene_viewer.html#a9865bf9cec6524de9d751f34702aab0f">invalidateAll</a>();</div>
<div class="line"><span class="lineno"> 2552</span>  emit onZoomChanged();</div>
<div class="line"><span class="lineno"> 2553</span>  emit onFlipHChanged(m_isFlippedX);</div>
<div class="line"><span class="lineno"> 2554</span>}</div>
<div class="ttc" id="aclass_scene_viewer_html_a9865bf9cec6524de9d751f34702aab0f"><div class="ttname"><a href="class_scene_viewer.html#a9865bf9cec6524de9d751f34702aab0f">SceneViewer::invalidateAll</a></div><div class="ttdeci">void invalidateAll() override</div><div class="ttdef"><b>Definition:</b> sceneviewer.cpp:2252</div></div>
<div class="ttc" id="aclass_t_rotation_html"><div class="ttname"><a href="class_t_rotation.html">TRotation</a></div><div class="ttdef"><b>Definition:</b> tgeometry.h:1083</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8d72cb1162232646e8bc69b72c55dc5b" name="a8d72cb1162232646e8bc69b72c55dc5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d72cb1162232646e8bc69b72c55dc5b">&#9670;&nbsp;</a></span>flipY</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::flipY </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2558</span>                        {</div>
<div class="line"><span class="lineno"> 2559</span>  <span class="keywordtype">double</span> flipAngle0 = (m_rotationAngle[0] * -1) * 2;</div>
<div class="line"><span class="lineno"> 2560</span>  <span class="keywordtype">double</span> flipAngle1 = (m_rotationAngle[1] * -1) * 2;</div>
<div class="line"><span class="lineno"> 2561</span>  m_rotationAngle[0] += flipAngle0;</div>
<div class="line"><span class="lineno"> 2562</span>  m_rotationAngle[1] += flipAngle1;</div>
<div class="line"><span class="lineno"> 2563</span>  <span class="keywordflow">if</span> (m_isFlippedX != m_isFlippedY) {</div>
<div class="line"><span class="lineno"> 2564</span>    flipAngle0 = -flipAngle0;</div>
<div class="line"><span class="lineno"> 2565</span>    flipAngle1 = -flipAngle1;</div>
<div class="line"><span class="lineno"> 2566</span>  }</div>
<div class="line"><span class="lineno"> 2567</span>  m_viewAff[0] = m_viewAff[0] * <a class="code hl_class" href="class_t_rotation.html">TRotation</a>(flipAngle0) * <a class="code hl_class" href="class_t_scale.html">TScale</a>(1, -1);</div>
<div class="line"><span class="lineno"> 2568</span>  m_viewAff[1] = m_viewAff[1] * <a class="code hl_class" href="class_t_rotation.html">TRotation</a>(flipAngle1) * <a class="code hl_class" href="class_t_scale.html">TScale</a>(1, -1);</div>
<div class="line"><span class="lineno"> 2569</span>  m_viewAff[0].a23 *= -1;</div>
<div class="line"><span class="lineno"> 2570</span>  m_viewAff[1].a23 *= -1;</div>
<div class="line"><span class="lineno"> 2571</span>  m_isFlippedY = !m_isFlippedY;</div>
<div class="line"><span class="lineno"> 2572</span>  <a class="code hl_function" href="class_scene_viewer.html#a9865bf9cec6524de9d751f34702aab0f">invalidateAll</a>();</div>
<div class="line"><span class="lineno"> 2573</span>  emit onZoomChanged();</div>
<div class="line"><span class="lineno"> 2574</span>  emit onFlipVChanged(m_isFlippedY);</div>
<div class="line"><span class="lineno"> 2575</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afee23545d546ce0e24be09d45a079831" name="afee23545d546ce0e24be09d45a079831"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afee23545d546ce0e24be09d45a079831">&#9670;&nbsp;</a></span>freeze</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::freeze </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>on</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  914</span>                                {</div>
<div class="line"><span class="lineno">  915</span>  <span class="keywordflow">if</span> (!on) {</div>
<div class="line"><span class="lineno">  916</span>    m_viewGrabImage = <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>();</div>
<div class="line"><span class="lineno">  917</span>    m_freezedStatus = NO_FREEZED;</div>
<div class="line"><span class="lineno">  918</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  919</span>    setCursor(Qt::ForbiddenCursor);</div>
<div class="line"><span class="lineno">  920</span>    m_freezedStatus = UPDATE_FREEZED;</div>
<div class="line"><span class="lineno">  921</span>  }</div>
<div class="line"><span class="lineno">  922</span>  <a class="code hl_function" href="class_scene_viewer.html#ab96170500b3df72aa36a3deb5f69cc11">GLInvalidateAll</a>();</div>
<div class="line"><span class="lineno">  923</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5b1db8cc53709170924278943aad036" name="ab5b1db8cc53709170924278943aad036"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5b1db8cc53709170924278943aad036">&#9670;&nbsp;</a></span>gestureEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::gestureEvent </td>
          <td>(</td>
          <td class="paramtype">QGestureEvent *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1012</span>                                               {</div>
<div class="line"><span class="lineno"> 1013</span>  m_gestureActive = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1014</span>  <span class="keywordflow">if</span> (QGesture *swipe = e-&gt;gesture(Qt::SwipeGesture)) {</div>
<div class="line"><span class="lineno"> 1015</span>    m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1016</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (QGesture *pan = e-&gt;gesture(Qt::PanGesture)) {</div>
<div class="line"><span class="lineno"> 1017</span>    m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1018</span>  }</div>
<div class="line"><span class="lineno"> 1019</span>  <span class="keywordflow">if</span> (QGesture *pinch = e-&gt;gesture(Qt::PinchGesture)) {</div>
<div class="line"><span class="lineno"> 1020</span>    QPinchGesture *gesture = <span class="keyword">static_cast&lt;</span>QPinchGesture *<span class="keyword">&gt;</span>(pinch);</div>
<div class="line"><span class="lineno"> 1021</span>    QPinchGesture::ChangeFlags changeFlags = gesture-&gt;changeFlags();</div>
<div class="line"><span class="lineno"> 1022</span>    QPoint firstCenter                     = gesture-&gt;centerPoint().toPoint();</div>
<div class="line"><span class="lineno"> 1023</span>    <span class="keywordflow">if</span> (m_touchDevice == QTouchDevice::TouchScreen)</div>
<div class="line"><span class="lineno"> 1024</span>      firstCenter = mapFromGlobal(firstCenter);</div>
<div class="line"><span class="lineno"> 1025</span> </div>
<div class="line"><span class="lineno"> 1026</span>    <span class="keywordflow">if</span> (gesture-&gt;state() == Qt::GestureStarted) {</div>
<div class="line"><span class="lineno"> 1027</span>      m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1028</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (gesture-&gt;state() == Qt::GestureFinished) {</div>
<div class="line"><span class="lineno"> 1029</span>      m_gestureActive = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1030</span>      m_rotating      = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1031</span>      m_zooming       = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1032</span>      m_scaleFactor   = 0.0;</div>
<div class="line"><span class="lineno"> 1033</span>      m_rotationDelta = 0.0;</div>
<div class="line"><span class="lineno"> 1034</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1035</span>      <span class="keywordflow">if</span> (changeFlags &amp; QPinchGesture::ScaleFactorChanged) {</div>
<div class="line"><span class="lineno"> 1036</span>        <span class="keywordtype">double</span> scaleFactor = gesture-&gt;scaleFactor();</div>
<div class="line"><span class="lineno"> 1037</span>        <span class="comment">// the scale factor makes for too sensitive scaling</span></div>
<div class="line"><span class="lineno"> 1038</span>        <span class="comment">// divide the change in half</span></div>
<div class="line"><span class="lineno"> 1039</span>        <span class="keywordflow">if</span> (scaleFactor &gt; 1) {</div>
<div class="line"><span class="lineno"> 1040</span>          <span class="keywordtype">double</span> decimalValue = scaleFactor - 1;</div>
<div class="line"><span class="lineno"> 1041</span>          decimalValue /= 1.5;</div>
<div class="line"><span class="lineno"> 1042</span>          scaleFactor = 1 + decimalValue;</div>
<div class="line"><span class="lineno"> 1043</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (scaleFactor &lt; 1) {</div>
<div class="line"><span class="lineno"> 1044</span>          <span class="keywordtype">double</span> decimalValue = 1 - scaleFactor;</div>
<div class="line"><span class="lineno"> 1045</span>          decimalValue /= 1.5;</div>
<div class="line"><span class="lineno"> 1046</span>          scaleFactor = 1 - decimalValue;</div>
<div class="line"><span class="lineno"> 1047</span>        }</div>
<div class="line"><span class="lineno"> 1048</span>        <span class="keywordflow">if</span> (!m_rotating &amp;&amp; !m_zooming) {</div>
<div class="line"><span class="lineno"> 1049</span>          <span class="keywordtype">double</span> delta = scaleFactor - 1;</div>
<div class="line"><span class="lineno"> 1050</span>          m_scaleFactor += delta;</div>
<div class="line"><span class="lineno"> 1051</span>          <span class="keywordflow">if</span> (m_scaleFactor &gt; .2 || m_scaleFactor &lt; -.2) {</div>
<div class="line"><span class="lineno"> 1052</span>            m_zooming = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1053</span>          }</div>
<div class="line"><span class="lineno"> 1054</span>        }</div>
<div class="line"><span class="lineno"> 1055</span>        <span class="keywordflow">if</span> (m_zooming) {</div>
<div class="line"><span class="lineno"> 1056</span>          zoomQt(firstCenter * getDevPixRatio(), scaleFactor);</div>
<div class="line"><span class="lineno"> 1057</span>          m_panning = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1058</span>        }</div>
<div class="line"><span class="lineno"> 1059</span>        m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1060</span>      }</div>
<div class="line"><span class="lineno"> 1061</span>      <span class="keywordflow">if</span> (changeFlags &amp; QPinchGesture::RotationAngleChanged) {</div>
<div class="line"><span class="lineno"> 1062</span>        qreal rotationDelta =</div>
<div class="line"><span class="lineno"> 1063</span>            gesture-&gt;rotationAngle() - gesture-&gt;lastRotationAngle();</div>
<div class="line"><span class="lineno"> 1064</span>        <span class="keywordflow">if</span> (m_isFlippedX != m_isFlippedY) rotationDelta = -rotationDelta;</div>
<div class="line"><span class="lineno"> 1065</span>        <a class="code hl_class" href="class_t_affine.html">TAffine</a> aff    = <a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>().<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>();</div>
<div class="line"><span class="lineno"> 1066</span>        <a class="code hl_class" href="class_t_point_t.html">TPointD</a> center = aff * <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(0, 0);</div>
<div class="line"><span class="lineno"> 1067</span>        <span class="keywordflow">if</span> (!m_rotating &amp;&amp; !m_zooming) {</div>
<div class="line"><span class="lineno"> 1068</span>          m_rotationDelta += rotationDelta;</div>
<div class="line"><span class="lineno"> 1069</span>          <span class="keywordtype">double</span> absDelta = std::abs(m_rotationDelta);</div>
<div class="line"><span class="lineno"> 1070</span>          <span class="keywordflow">if</span> (absDelta &gt;= 10) {</div>
<div class="line"><span class="lineno"> 1071</span>            m_rotating = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1072</span>          }</div>
<div class="line"><span class="lineno"> 1073</span>        }</div>
<div class="line"><span class="lineno"> 1074</span>        <span class="keywordflow">if</span> (m_rotating) {</div>
<div class="line"><span class="lineno"> 1075</span>          rotate(center, -rotationDelta);</div>
<div class="line"><span class="lineno"> 1076</span>        }</div>
<div class="line"><span class="lineno"> 1077</span>      }</div>
<div class="line"><span class="lineno"> 1078</span> </div>
<div class="line"><span class="lineno"> 1079</span>      <span class="keywordflow">if</span> (changeFlags &amp; QPinchGesture::CenterPointChanged) {</div>
<div class="line"><span class="lineno"> 1080</span>        QPointF centerDelta = (gesture-&gt;centerPoint() * getDevPixRatio()) -</div>
<div class="line"><span class="lineno"> 1081</span>                              (gesture-&gt;lastCenterPoint() * getDevPixRatio());</div>
<div class="line"><span class="lineno"> 1082</span>        <span class="keywordflow">if</span> (centerDelta.manhattanLength() &gt; 1) {</div>
<div class="line"><span class="lineno"> 1083</span>          <span class="comment">// panQt(centerDelta.toPoint());</span></div>
<div class="line"><span class="lineno"> 1084</span>        }</div>
<div class="line"><span class="lineno"> 1085</span>        m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1086</span>      }</div>
<div class="line"><span class="lineno"> 1087</span>    }</div>
<div class="line"><span class="lineno"> 1088</span>  }</div>
<div class="line"><span class="lineno"> 1089</span>  e-&gt;accept();</div>
<div class="line"><span class="lineno"> 1090</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a46de6de255d707906df8cfcfdf3a1ead" name="a46de6de255d707906df8cfcfdf3a1ead"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46de6de255d707906df8cfcfdf3a1ead">&#9670;&nbsp;</a></span>getActualClipRect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_rect_t.html">TRect</a> SceneViewer::getActualClipRect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_affine.html">TAffine</a> &amp;&#160;</td>
          <td class="paramname"><em>aff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2184</span>                                                       {</div>
<div class="line"><span class="lineno"> 2185</span>  <a class="code hl_class" href="class_t_dimension_t.html">TDimensionD</a> viewerSize(width(), height());</div>
<div class="line"><span class="lineno"> 2186</span>  <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> clipRect(viewerSize);</div>
<div class="line"><span class="lineno"> 2187</span> </div>
<div class="line"><span class="lineno"> 2188</span>  <span class="keywordflow">if</span> (is3DView()) {</div>
<div class="line"><span class="lineno"> 2189</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> p00 = winToWorld(clipRect.getP00());</div>
<div class="line"><span class="lineno"> 2190</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> p01 = winToWorld(clipRect.getP01());</div>
<div class="line"><span class="lineno"> 2191</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> p10 = winToWorld(clipRect.getP10());</div>
<div class="line"><span class="lineno"> 2192</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> p11 = winToWorld(clipRect.getP11());</div>
<div class="line"><span class="lineno"> 2193</span>    clipRect = <a class="code hl_class" href="class_t_rect_t.html">TRectD</a>(<a class="code hl_class" href="class_t_point_t.html">TPointD</a>(std::min(p00.x, p01.x), std::min(p00.y, p10.y)),</div>
<div class="line"><span class="lineno"> 2194</span>                      <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(std::max(p11.x, p10.x), std::max(p11.y, p01.y)));</div>
<div class="line"><span class="lineno"> 2195</span>  }</div>
<div class="line"><span class="lineno"> 2196</span>  <span class="comment">// this condition will catch both cases of m_clipRect == empty and</span></div>
<div class="line"><span class="lineno"> 2197</span>  <span class="comment">// m_clipRect == InvalidateAllRect</span></div>
<div class="line"><span class="lineno"> 2198</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_clipRect.<a class="code hl_function" href="class_t_rect_t.html#a53ce09c6112f8a019b43ad82d721a93b">isEmpty</a>())</div>
<div class="line"><span class="lineno"> 2199</span>    clipRect -= <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(viewerSize.lx / 2, viewerSize.ly / 2);</div>
<div class="line"><span class="lineno"> 2200</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2201</span>    <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> app = aff * (m_clipRect.enlarge(3));</div>
<div class="line"><span class="lineno"> 2202</span>    clipRect =</div>
<div class="line"><span class="lineno"> 2203</span>        <a class="code hl_class" href="class_t_rect_t.html">TRectD</a>(tceil(app.<a class="code hl_variable" href="class_t_rect_t.html#ac008cbc625f50d8b3c180c8eb2594cdb">x0</a>), tceil(app.y0), tfloor(app.x1), tfloor(app.y1));</div>
<div class="line"><span class="lineno"> 2204</span>  }</div>
<div class="line"><span class="lineno"> 2205</span> </div>
<div class="line"><span class="lineno"> 2206</span>  <span class="keywordflow">return</span> convert(clipRect);</div>
<div class="line"><span class="lineno"> 2207</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7fd1e40caee87c57edd5d890dc41b8c8" name="a7fd1e40caee87c57edd5d890dc41b8c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fd1e40caee87c57edd5d890dc41b8c8">&#9670;&nbsp;</a></span>getDpiFactor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double SceneViewer::getDpiFactor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >a factor for getting pixel-based zoom ratio </p>
<div class="fragment"><div class="line"><span class="lineno"> 2386</span>                                 {</div>
<div class="line"><span class="lineno"> 2387</span>  <span class="comment">// When the current unit is &quot;pixels&quot;, always use a standard dpi</span></div>
<div class="line"><span class="lineno"> 2388</span>  <span class="keywordtype">double</span> cameraDpi = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()</div>
<div class="line"><span class="lineno"> 2389</span>                         -&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()</div>
<div class="line"><span class="lineno"> 2390</span>                         -&gt;getScene()</div>
<div class="line"><span class="lineno"> 2391</span>                         -&gt;<a class="code hl_function" href="class_toonz_scene.html#a750b5ab623ccec744013b0c83bf20abc">getCurrentCamera</a>()</div>
<div class="line"><span class="lineno"> 2392</span>                         -&gt;<a class="code hl_function" href="class_t_camera.html#adf45510b5dc53f6481308ef489fbd5a9">getDpi</a>()</div>
<div class="line"><span class="lineno"> 2393</span>                         .x;</div>
<div class="line"><span class="lineno"> 2394</span>  <span class="keywordflow">if</span> (Preferences::instance()-&gt;getPixelsOnly()) {</div>
<div class="line"><span class="lineno"> 2395</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / Stage::standardDpi;</div>
<div class="line"><span class="lineno"> 2396</span>  }</div>
<div class="line"><span class="lineno"> 2397</span> </div>
<div class="line"><span class="lineno"> 2398</span>  <span class="comment">// When preview mode, use a camera DPI</span></div>
<div class="line"><span class="lineno"> 2399</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isPreviewEnabled()) {</div>
<div class="line"><span class="lineno"> 2400</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / cameraDpi;</div>
<div class="line"><span class="lineno"> 2401</span>  }</div>
<div class="line"><span class="lineno"> 2402</span>  <span class="comment">// When level editing mode, use an image DPI</span></div>
<div class="line"><span class="lineno"> 2403</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;getCurrentFrame()-&gt;isEditingLevel()) {</div>
<div class="line"><span class="lineno"> 2404</span>    <a class="code hl_class" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a> *sl;</div>
<div class="line"><span class="lineno"> 2405</span>    sl = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>()-&gt;getSimpleLevel();</div>
<div class="line"><span class="lineno"> 2406</span>    <span class="keywordflow">if</span> (!sl) <span class="keywordflow">return</span> <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / cameraDpi;</div>
<div class="line"><span class="lineno"> 2407</span>    <span class="keywordflow">if</span> (sl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a1a147f1e970a62120c0bbaf0020a8932">getType</a>() == PLI_XSHLEVEL) <span class="keywordflow">return</span> <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / cameraDpi;</div>
<div class="line"><span class="lineno"> 2408</span>    <span class="keywordflow">if</span> (sl-&gt;getImageDpi() != <a class="code hl_class" href="class_t_point_t.html">TPointD</a>())</div>
<div class="line"><span class="lineno"> 2409</span>      <span class="keywordflow">return</span> <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / sl-&gt;getImageDpi().x;</div>
<div class="line"><span class="lineno"> 2410</span>    <span class="keywordflow">if</span> (sl-&gt;getDpi() != <a class="code hl_class" href="class_t_point_t.html">TPointD</a>()) <span class="keywordflow">return</span> <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / sl-&gt;getDpi().x;</div>
<div class="line"><span class="lineno"> 2411</span>    <span class="comment">// no valid dpi, use camera dpi</span></div>
<div class="line"><span class="lineno"> 2412</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / cameraDpi;</div>
<div class="line"><span class="lineno"> 2413</span>  }</div>
<div class="line"><span class="lineno"> 2414</span>  <span class="comment">// When the special case in the scene editing mode:</span></div>
<div class="line"><span class="lineno"> 2415</span>  <span class="comment">// If the option &quot;ActualPixelViewOnSceneEditingMode&quot; is ON,</span></div>
<div class="line"><span class="lineno"> 2416</span>  <span class="comment">// use  current level&#39;s DPI set in the level settings.</span></div>
<div class="line"><span class="lineno"> 2417</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Preferences::instance()</div>
<div class="line"><span class="lineno"> 2418</span>               -&gt;isActualPixelViewOnSceneEditingModeEnabled()) {</div>
<div class="line"><span class="lineno"> 2419</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="class_cleanup_preview_check.html#a231efbbe4e3356757b725452d5efb62d">CleanupPreviewCheck::instance</a>()-&gt;isEnabled() ||</div>
<div class="line"><span class="lineno"> 2420</span>        <a class="code hl_function" href="class_camera_test_check.html#adc1033b93dea95f49db36d8fb668e16d">CameraTestCheck::instance</a>()-&gt;isEnabled()) {</div>
<div class="line"><span class="lineno"> 2421</span>      <span class="keywordtype">double</span> cleanupCameraDpi = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()</div>
<div class="line"><span class="lineno"> 2422</span>                                    -&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()</div>
<div class="line"><span class="lineno"> 2423</span>                                    -&gt;getScene()</div>
<div class="line"><span class="lineno"> 2424</span>                                    -&gt;<a class="code hl_function" href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">getProperties</a>()</div>
<div class="line"><span class="lineno"> 2425</span>                                    -&gt;<a class="code hl_function" href="class_t_scene_properties.html#a84e6735bb0b0ea5054b9592c9612aff9">getCleanupParameters</a>()</div>
<div class="line"><span class="lineno"> 2426</span>                                    -&gt;m_camera.<a class="code hl_function" href="class_t_camera.html#adf45510b5dc53f6481308ef489fbd5a9">getDpi</a>()</div>
<div class="line"><span class="lineno"> 2427</span>                                    .x;</div>
<div class="line"><span class="lineno"> 2428</span>      <span class="keywordflow">return</span> <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / cleanupCameraDpi;</div>
<div class="line"><span class="lineno"> 2429</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2430</span>      <a class="code hl_class" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a> *sl;</div>
<div class="line"><span class="lineno"> 2431</span>      sl = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>()-&gt;getSimpleLevel();</div>
<div class="line"><span class="lineno"> 2432</span>      <span class="keywordflow">if</span> (!sl) <span class="keywordflow">return</span> <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / cameraDpi;</div>
<div class="line"><span class="lineno"> 2433</span>      <span class="keywordflow">if</span> (sl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a1a147f1e970a62120c0bbaf0020a8932">getType</a>() == PLI_XSHLEVEL) <span class="keywordflow">return</span> <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / cameraDpi;</div>
<div class="line"><span class="lineno"> 2434</span>      <span class="keywordflow">if</span> (sl-&gt;getDpi() == <a class="code hl_class" href="class_t_point_t.html">TPointD</a>()) <span class="keywordflow">return</span> <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / cameraDpi;</div>
<div class="line"><span class="lineno"> 2435</span>      <span class="comment">// use default value for the argument of getDpi() (=TFrameId::NO_FRAME</span></div>
<div class="line"><span class="lineno"> 2436</span>      <span class="comment">// so that the dpi of the first frame in the level will be returned.</span></div>
<div class="line"><span class="lineno"> 2437</span>      <span class="keywordflow">return</span> <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / sl-&gt;getDpi().x;</div>
<div class="line"><span class="lineno"> 2438</span>    }</div>
<div class="line"><span class="lineno"> 2439</span>  }</div>
<div class="line"><span class="lineno"> 2440</span>  <span class="comment">// When the scene editing mode without any option, use the camera dpi</span></div>
<div class="line"><span class="lineno"> 2441</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2442</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> / cameraDpi;</div>
<div class="line"><span class="lineno"> 2443</span>  }</div>
<div class="line"><span class="lineno"> 2444</span>}</div>
<div class="ttc" id="aclass_cleanup_preview_check_html_a231efbbe4e3356757b725452d5efb62d"><div class="ttname"><a href="class_cleanup_preview_check.html#a231efbbe4e3356757b725452d5efb62d">CleanupPreviewCheck::instance</a></div><div class="ttdeci">static CleanupPreviewCheck * instance()</div><div class="ttdef"><b>Definition:</b> stage2.cpp:93</div></div>
<div class="ttc" id="aclass_t_camera_html_adf45510b5dc53f6481308ef489fbd5a9"><div class="ttname"><a href="class_t_camera.html#adf45510b5dc53f6481308ef489fbd5a9">TCamera::getDpi</a></div><div class="ttdeci">TPointD getDpi() const</div><div class="ttdef"><b>Definition:</b> tcamera.cpp:62</div></div>
<div class="ttc" id="aclass_t_scene_properties_html_a84e6735bb0b0ea5054b9592c9612aff9"><div class="ttname"><a href="class_t_scene_properties.html#a84e6735bb0b0ea5054b9592c9612aff9">TSceneProperties::getCleanupParameters</a></div><div class="ttdeci">CleanupParameters * getCleanupParameters() const</div><div class="ttdef"><b>Definition:</b> sceneproperties.h:159</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_a1a147f1e970a62120c0bbaf0020a8932"><div class="ttname"><a href="class_t_xsh_level.html#a1a147f1e970a62120c0bbaf0020a8932">TXshLevel::getType</a></div><div class="ttdeci">int getType() const</div><div class="ttdef"><b>Definition:</b> txshlevel.h:81</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00159">TSceneProperties::getCleanupParameters()</a>, <a class="el" href="#l01472">ToonzScene::getCurrentCamera()</a>, <a class="el" href="#l00122">TApp::getCurrentLevel()</a>, <a class="el" href="#l00106">TApp::getCurrentScene()</a>, <a class="el" href="#l00062">TCamera::getDpi()</a>, <a class="el" href="#l00087">ToonzScene::getProperties()</a>, <a class="el" href="#l00081">TXshLevel::getType()</a>, <a class="el" href="#l00037">Stage::inch</a>, <a class="el" href="#l00052">CameraTestCheck::instance()</a>, <a class="el" href="#l00093">CleanupPreviewCheck::instance()</a>, and <a class="el" href="#l00215">TApp::instance()</a>.</p>

</div>
</div>
<a id="a2a7faf3b67ff28e82ad7294924b6cb74" name="a2a7faf3b67ff28e82ad7294924b6cb74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a7faf3b67ff28e82ad7294924b6cb74">&#9670;&nbsp;</a></span>getDpiScale()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_point_t.html">TPointD</a> SceneViewer::getDpiScale </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  261</span>{ <span class="keywordflow">return</span> m_dpiScale; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac03615cda02f9ecf6a96c6839918fc79" name="ac03615cda02f9ecf6a96c6839918fc79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac03615cda02f9ecf6a96c6839918fc79">&#9670;&nbsp;</a></span>getFPS()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int SceneViewer::getFPS </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  241</span>{ <span class="keywordflow">return</span> m_FPS; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7894cec2d508ff6e264616df00b26479" name="a7894cec2d508ff6e264616df00b26479"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7894cec2d508ff6e264616df00b26479">&#9670;&nbsp;</a></span>getGeometry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_rect_t.html">TRectD</a> SceneViewer::getGeometry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >return the viewer geometry in order to avoid picking the style outside of the viewer when using the stylepicker and the finger tools </p>

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3254</span>                                      {</div>
<div class="line"><span class="lineno"> 3255</span>  <span class="keywordtype">int</span> devPixRatio = getDevPixRatio();</div>
<div class="line"><span class="lineno"> 3256</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool     = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 3257</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> topLeft =</div>
<div class="line"><span class="lineno"> 3258</span>      tool-&gt;getMatrix().<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>() * winToWorld(geometry().topLeft() * devPixRatio);</div>
<div class="line"><span class="lineno"> 3259</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> bottomRight = tool-&gt;getMatrix().<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>() *</div>
<div class="line"><span class="lineno"> 3260</span>                        winToWorld(geometry().bottomRight() * devPixRatio);</div>
<div class="line"><span class="lineno"> 3261</span> </div>
<div class="line"><span class="lineno"> 3262</span>  <a class="code hl_class" href="class_t_object_handle.html">TObjectHandle</a> *objHandle = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a0d91c122eec2b756b7c4780014e49f9e">getCurrentObject</a>();</div>
<div class="line"><span class="lineno"> 3263</span>  <span class="keywordflow">if</span> (tool-&gt;getToolType() &amp; TTool::LevelTool &amp;&amp; !objHandle-&gt;isSpline()) {</div>
<div class="line"><span class="lineno"> 3264</span>    topLeft.x /= m_dpiScale.x;</div>
<div class="line"><span class="lineno"> 3265</span>    topLeft.y /= m_dpiScale.y;</div>
<div class="line"><span class="lineno"> 3266</span>    bottomRight.x /= m_dpiScale.x;</div>
<div class="line"><span class="lineno"> 3267</span>    bottomRight.y /= m_dpiScale.y;</div>
<div class="line"><span class="lineno"> 3268</span>  }</div>
<div class="line"><span class="lineno"> 3269</span> </div>
<div class="line"><span class="lineno"> 3270</span>  <span class="keywordflow">return</span> <a class="code hl_class" href="class_t_rect_t.html">TRectD</a>(topLeft, bottomRight);</div>
<div class="line"><span class="lineno"> 3271</span>}</div>
<div class="ttc" id="aclass_t_object_handle_html"><div class="ttname"><a href="class_t_object_handle.html">TObjectHandle</a></div><div class="ttdef"><b>Definition:</b> tobjecthandle.h:35</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00130">TApp::getCurrentObject()</a>, <a class="el" href="#l00126">TApp::getCurrentTool()</a>, <a class="el" href="#l00215">TApp::instance()</a>, and <a class="el" href="#l00055">TAffine::inv()</a>.</p>

</div>
</div>
<a id="a6d249c7f77f675cecbc6ad0afdf8cc69" name="a6d249c7f77f675cecbc6ad0afdf8cc69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d249c7f77f675cecbc6ad0afdf8cc69">&#9670;&nbsp;</a></span>getHGuide()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double SceneViewer::getHGuide </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1166</span>{ <span class="keywordflow">return</span> m_hRuler-&gt;getGuide(index); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab0f2d483de9e3552346138f343c585c7" name="ab0f2d483de9e3552346138f343c585c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0f2d483de9e3552346138f343c585c7">&#9670;&nbsp;</a></span>getHGuideCount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int SceneViewer::getHGuideCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1158</span>                                {</div>
<div class="line"><span class="lineno"> 1159</span>  <span class="keywordflow">if</span> (viewGuideToggle.getStatus())</div>
<div class="line"><span class="lineno"> 1160</span>    <span class="keywordflow">return</span> m_hRuler-&gt;getGuideCount();</div>
<div class="line"><span class="lineno"> 1161</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1162</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1163</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a867728dd5a6af616e3bb10472441553a" name="a867728dd5a6af616e3bb10472441553a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a867728dd5a6af616e3bb10472441553a">&#9670;&nbsp;</a></span>getIsFlippedX()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SceneViewer::getIsFlippedX </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  268</span>{ <span class="keywordflow">return</span> m_isFlippedX; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0ee26ba62d6500895dc7b18a3d9c0451" name="a0ee26ba62d6500895dc7b18a3d9c0451"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ee26ba62d6500895dc7b18a3d9c0451">&#9670;&nbsp;</a></span>getIsFlippedY()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SceneViewer::getIsFlippedY </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  269</span>{ <span class="keywordflow">return</span> m_isFlippedY; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a14d04fa24b2fb8f29cec3d17a2237ad7" name="a14d04fa24b2fb8f29cec3d17a2237ad7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14d04fa24b2fb8f29cec3d17a2237ad7">&#9670;&nbsp;</a></span>getNormalZoomScale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_affine.html">TAffine</a> SceneViewer::getNormalZoomScale </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3228</span>                                        {</div>
<div class="line"><span class="lineno"> 3229</span>  <span class="keywordflow">return</span> <a class="code hl_class" href="class_t_scale.html">TScale</a>(<a class="code hl_function" href="class_scene_viewer.html#a7fd1e40caee87c57edd5d890dc41b8c8">getDpiFactor</a>()).<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>();</div>
<div class="line"><span class="lineno"> 3230</span>}</div>
<div class="ttc" id="aclass_scene_viewer_html_a7fd1e40caee87c57edd5d890dc41b8c8"><div class="ttname"><a href="class_scene_viewer.html#a7fd1e40caee87c57edd5d890dc41b8c8">SceneViewer::getDpiFactor</a></div><div class="ttdeci">double getDpiFactor()</div><div class="ttdef"><b>Definition:</b> sceneviewer.cpp:2386</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa4f030a7fcd3eb03e217442ddfb1ee82" name="aa4f030a7fcd3eb03e217442ddfb1ee82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4f030a7fcd3eb03e217442ddfb1ee82">&#9670;&nbsp;</a></span>getPan3D()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_point_t.html">TPointD</a> SceneViewer::getPan3D </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  256</span>{ <span class="keywordflow">return</span> m_pan3D; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c7c61456c1f6403bfd86c0729f52207" name="a3c7c61456c1f6403bfd86c0729f52207"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c7c61456c1f6403bfd86c0729f52207">&#9670;&nbsp;</a></span>getPixelSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double SceneViewer::getPixelSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Returns the length of a pixel in current OpenGL coordinates </p>

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html#a0e87a68354646cc8c05128437b7df35d">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  213</span>{ <span class="keywordflow">return</span> m_pixelSize; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="acb52de98a6c2cd11dfd482437ebddf66" name="acb52de98a6c2cd11dfd482437ebddf66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb52de98a6c2cd11dfd482437ebddf66">&#9670;&nbsp;</a></span>getPreviewMode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int SceneViewer::getPreviewMode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  222</span>{ <span class="keywordflow">return</span> m_previewMode; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3d6ff236dc014acbe3fa2d3650dbb0ea" name="a3d6ff236dc014acbe3fa2d3650dbb0ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d6ff236dc014acbe3fa2d3650dbb0ea">&#9670;&nbsp;</a></span>getPreviewRect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_rect_t.html">TRectD</a> SceneViewer::getPreviewRect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_previewer_1_1_listener.html">Previewer::Listener</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  854</span>                                         {</div>
<div class="line"><span class="lineno">  855</span>  <a class="code hl_class" href="class_t_app.html">TApp</a> *app               = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>();</div>
<div class="line"><span class="lineno">  856</span>  <span class="keywordtype">int</span> row                 = app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFrame();</div>
<div class="line"><span class="lineno">  857</span>  <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh            = app-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()-&gt;getXsheet();</div>
<div class="line"><span class="lineno">  858</span>  <a class="code hl_class" href="class_t_stage_object_id.html">TStageObjectId</a> cameraId = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a5dc925584e35e1678f5678b79c470959">getStageObjectTree</a>()-&gt;<a class="code hl_function" href="class_t_stage_object_tree.html#a7d63ae5d60c3a3aacf5da58c108ac167">getCurrentCameraId</a>();</div>
<div class="line"><span class="lineno">  859</span>  <span class="keywordtype">double</span> cameraZ          = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#ac3cff0937663af24b324430b134ed8b2">getZ</a>(cameraId, row);</div>
<div class="line"><span class="lineno">  860</span>  <a class="code hl_class" href="class_t_affine.html">TAffine</a> cameraAff =</div>
<div class="line"><span class="lineno">  861</span>      xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#abd766f516cac9898a2a952463618a9fe">getPlacement</a>(cameraId, row) * <a class="code hl_class" href="class_t_scale.html">TScale</a>((1000 + cameraZ) / 1000);</div>
<div class="line"><span class="lineno">  862</span> </div>
<div class="line"><span class="lineno">  863</span>  <a class="code hl_class" href="class_t_dimension_t.html">TDimensionD</a> cameraSize =</div>
<div class="line"><span class="lineno">  864</span>      app-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene()-&gt;<a class="code hl_function" href="class_toonz_scene.html#a750b5ab623ccec744013b0c83bf20abc">getCurrentCamera</a>()-&gt;<a class="code hl_function" href="class_t_camera.html#a6f561eca912177c2150b3e57816f02f6">getSize</a>();</div>
<div class="line"><span class="lineno">  865</span>  <a class="code hl_class" href="class_t_dimension_t.html">TDimension</a> cameraRes =</div>
<div class="line"><span class="lineno">  866</span>      app-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene()-&gt;<a class="code hl_function" href="class_toonz_scene.html#a750b5ab623ccec744013b0c83bf20abc">getCurrentCamera</a>()-&gt;<a class="code hl_function" href="class_t_camera.html#a9a7c573e7a2c397ffae4b747809ea2a5">getRes</a>();</div>
<div class="line"><span class="lineno">  867</span>  <a class="code hl_class" href="class_t_scale.html">TScale</a> cameraScale(<a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> * cameraSize.lx / cameraRes.lx,</div>
<div class="line"><span class="lineno">  868</span>                     <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a> * cameraSize.ly / cameraRes.ly);</div>
<div class="line"><span class="lineno">  869</span> </div>
<div class="line"><span class="lineno">  870</span>  <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> viewRect(-width() * 0.5, -height() * 0.5, width() * 0.5,</div>
<div class="line"><span class="lineno">  871</span>                  height() * 0.5);</div>
<div class="line"><span class="lineno">  872</span> </div>
<div class="line"><span class="lineno">  873</span>  <span class="keywordflow">return</span> (<a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>() * cameraAff * cameraScale).inv() * viewRect;</div>
<div class="line"><span class="lineno">  874</span>}</div>
<div class="ttc" id="aclass_t_camera_html_a9a7c573e7a2c397ffae4b747809ea2a5"><div class="ttname"><a href="class_t_camera.html#a9a7c573e7a2c397ffae4b747809ea2a5">TCamera::getRes</a></div><div class="ttdeci">const TDimension &amp; getRes() const</div><div class="ttdef"><b>Definition:</b> tcamera.h:72</div></div>
<div class="ttc" id="aclass_t_xsheet_html_abd766f516cac9898a2a952463618a9fe"><div class="ttname"><a href="class_t_xsheet.html#abd766f516cac9898a2a952463618a9fe">TXsheet::getPlacement</a></div><div class="ttdeci">TAffine getPlacement(const TStageObjectId &amp;id, int frame) const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:555</div></div>
<div class="ttc" id="aclass_t_xsheet_html_ac3cff0937663af24b324430b134ed8b2"><div class="ttname"><a href="class_t_xsheet.html#ac3cff0937663af24b324430b134ed8b2">TXsheet::getZ</a></div><div class="ttdeci">double getZ(const TStageObjectId &amp;id, int frame) const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:562</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a71c3b2c826bd5efa2762dc38b695edfb" name="a71c3b2c826bd5efa2762dc38b695edfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71c3b2c826bd5efa2762dc38b695edfb">&#9670;&nbsp;</a></span>getSceneMatrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_affine.html">TAffine</a> SceneViewer::getSceneMatrix </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Return the view matrix. The view matrix is a matrix contained in <b>m_viewAff</b> </p>
<div class="fragment"><div class="line"><span class="lineno"> 2227</span>                                          {</div>
<div class="line"><span class="lineno"> 2228</span>  <span class="keywordtype">int</span> viewMode = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;isEditingLevel()</div>
<div class="line"><span class="lineno"> 2229</span>                     ? LEVEL_VIEWMODE</div>
<div class="line"><span class="lineno"> 2230</span>                     : SCENE_VIEWMODE;</div>
<div class="line"><span class="lineno"> 2231</span>  <span class="keywordflow">if</span> (is3DView()) <span class="keywordflow">return</span> <a class="code hl_class" href="class_t_affine.html">TAffine</a>();</div>
<div class="line"><span class="lineno"> 2232</span>  <span class="keywordflow">return</span> m_viewAff[viewMode];</div>
<div class="line"><span class="lineno"> 2233</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00114">TApp::getCurrentFrame()</a>, and <a class="el" href="#l00215">TApp::instance()</a>.</p>

</div>
</div>
<a id="acd65e1634747cdfd37a49c7c57778973" name="acd65e1634747cdfd37a49c7c57778973"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd65e1634747cdfd37a49c7c57778973">&#9670;&nbsp;</a></span>getVGuide()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double SceneViewer::getVGuide </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1165</span>{ <span class="keywordflow">return</span> m_vRuler-&gt;getGuide(index); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a841545e56b0e1d20f2475b2b214b5f09" name="a841545e56b0e1d20f2475b2b214b5f09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a841545e56b0e1d20f2475b2b214b5f09">&#9670;&nbsp;</a></span>getVGuideCount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int SceneViewer::getVGuideCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1152</span>                                {</div>
<div class="line"><span class="lineno"> 1153</span>  <span class="keywordflow">if</span> (viewGuideToggle.getStatus())</div>
<div class="line"><span class="lineno"> 1154</span>    <span class="keywordflow">return</span> m_vRuler-&gt;getGuideCount();</div>
<div class="line"><span class="lineno"> 1155</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1156</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1157</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3f746b9c53dc17030711cac65d96f625" name="a3f746b9c53dc17030711cac65d96f625"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f746b9c53dc17030711cac65d96f625">&#9670;&nbsp;</a></span>getViewMatrix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_affine.html">TAffine</a> SceneViewer::getViewMatrix </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Return the view matrix. The view matrix is a matrix contained in <b>m_viewAff</b>; if the <a class="el" href="class_scene_viewer.html">SceneViewer</a> in showing images in Camera view Mode (m_referenceMode = CAMERA_REFERENCE) the returned affine is composed with camera transformation. </p>

<p>Reimplemented from <a class="el" href="class_t_tool_1_1_viewer.html#a97b71c149134c5a3d0ba0d5333b0b3c2">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2211</span>                                         {</div>
<div class="line"><span class="lineno"> 2212</span>  <span class="keywordtype">int</span> viewMode = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;isEditingLevel()</div>
<div class="line"><span class="lineno"> 2213</span>                     ? LEVEL_VIEWMODE</div>
<div class="line"><span class="lineno"> 2214</span>                     : SCENE_VIEWMODE;</div>
<div class="line"><span class="lineno"> 2215</span>  <span class="keywordflow">if</span> (is3DView()) <span class="keywordflow">return</span> <a class="code hl_class" href="class_t_affine.html">TAffine</a>();</div>
<div class="line"><span class="lineno"> 2216</span>  <span class="keywordflow">if</span> (m_referenceMode == CAMERA_REFERENCE) {</div>
<div class="line"><span class="lineno"> 2217</span>    <span class="keywordtype">int</span> frame    = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFrame();</div>
<div class="line"><span class="lineno"> 2218</span>    <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()-&gt;getXsheet();</div>
<div class="line"><span class="lineno"> 2219</span>    <a class="code hl_class" href="class_t_affine.html">TAffine</a> aff  = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#ac08197d98e00154a4a974d5b6a5e04d7">getCameraAff</a>(frame);</div>
<div class="line"><span class="lineno"> 2220</span>    <span class="keywordflow">return</span> m_viewAff[viewMode] * aff.<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>();</div>
<div class="line"><span class="lineno"> 2221</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2222</span>    <span class="keywordflow">return</span> m_viewAff[viewMode];</div>
<div class="line"><span class="lineno"> 2223</span>}</div>
<div class="ttc" id="aclass_t_xsheet_html_ac08197d98e00154a4a974d5b6a5e04d7"><div class="ttname"><a href="class_t_xsheet.html#ac08197d98e00154a4a974d5b6a5e04d7">TXsheet::getCameraAff</a></div><div class="ttdeci">TAffine getCameraAff(int frame) const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:620</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00620">TXsheet::getCameraAff()</a>, <a class="el" href="#l00114">TApp::getCurrentFrame()</a>, <a class="el" href="#l00110">TApp::getCurrentXsheet()</a>, <a class="el" href="#l00215">TApp::instance()</a>, and <a class="el" href="#l00055">TAffine::inv()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l01598">drawOverlay()</a>, <a class="el" href="#l03064">posToRow()</a>, and <a class="el" href="#l01007">worldToPos()</a>.</p>

</div>
</div>
<a id="a17c5430ffb3cea34704430a7f623dba1" name="a17c5430ffb3cea34704430a7f623dba1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17c5430ffb3cea34704430a7f623dba1">&#9670;&nbsp;</a></span>getViewportSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_dimension_t.html">TDimension</a> SceneViewer::getViewportSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  249</span>{ <span class="keywordflow">return</span> <a class="code hl_class" href="class_t_dimension_t.html">TDimension</a>(width(), height()); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a504e74706e339c8b92df181000b143a1" name="a504e74706e339c8b92df181000b143a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a504e74706e339c8b92df181000b143a1">&#9670;&nbsp;</a></span>getZoomScale3D()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double SceneViewer::getZoomScale3D </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  257</span>{ <span class="keywordflow">return</span> m_zoomScale3D; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="abc2a1a75cd067ec5588dfdbd583d483b" name="abc2a1a75cd067ec5588dfdbd583d483b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc2a1a75cd067ec5588dfdbd583d483b">&#9670;&nbsp;</a></span>getZoomScaleFittingWithScreen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double SceneViewer::getZoomScaleFittingWithScreen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >when showing the viewer with full-screen mode, add a zoom factor which can show image fitting with the screen size </p>
<div class="fragment"><div class="line"><span class="lineno"> 2451</span>                                                  {</div>
<div class="line"><span class="lineno"> 2452</span>  <a class="code hl_class" href="class_t_dimension_t.html">TDimension</a> imgSize;</div>
<div class="line"><span class="lineno"> 2453</span> </div>
<div class="line"><span class="lineno"> 2454</span>  <span class="comment">// get the image size to be rendered</span></div>
<div class="line"><span class="lineno"> 2455</span> </div>
<div class="line"><span class="lineno"> 2456</span>  <span class="keywordflow">if</span> (isPreviewEnabled())</div>
<div class="line"><span class="lineno"> 2457</span>    imgSize = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()</div>
<div class="line"><span class="lineno"> 2458</span>                  -&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()</div>
<div class="line"><span class="lineno"> 2459</span>                  -&gt;getScene()</div>
<div class="line"><span class="lineno"> 2460</span>                  -&gt;<a class="code hl_function" href="class_toonz_scene.html#a750b5ab623ccec744013b0c83bf20abc">getCurrentCamera</a>()</div>
<div class="line"><span class="lineno"> 2461</span>                  -&gt;<a class="code hl_function" href="class_t_camera.html#a9a7c573e7a2c397ffae4b747809ea2a5">getRes</a>();</div>
<div class="line"><span class="lineno"> 2462</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;getCurrentFrame()-&gt;isEditingLevel()) {</div>
<div class="line"><span class="lineno"> 2463</span>    <a class="code hl_class" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a> *sl = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>()-&gt;getSimpleLevel();</div>
<div class="line"><span class="lineno"> 2464</span>    <span class="keywordflow">if</span> (!sl || sl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a1a147f1e970a62120c0bbaf0020a8932">getType</a>() == PLI_XSHLEVEL || sl-&gt;getImageDpi() == <a class="code hl_class" href="class_t_point_t.html">TPointD</a>())</div>
<div class="line"><span class="lineno"> 2465</span>      <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><span class="lineno"> 2466</span> </div>
<div class="line"><span class="lineno"> 2467</span>    imgSize = sl-&gt;getResolution();</div>
<div class="line"><span class="lineno"> 2468</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Preferences::instance()</div>
<div class="line"><span class="lineno"> 2469</span>                 -&gt;isActualPixelViewOnSceneEditingModeEnabled() &amp;&amp;</div>
<div class="line"><span class="lineno"> 2470</span>             !<a class="code hl_function" href="class_cleanup_preview_check.html#a231efbbe4e3356757b725452d5efb62d">CleanupPreviewCheck::instance</a>()-&gt;isEnabled() &amp;&amp;</div>
<div class="line"><span class="lineno"> 2471</span>             !<a class="code hl_function" href="class_camera_test_check.html#adc1033b93dea95f49db36d8fb668e16d">CameraTestCheck::instance</a>()-&gt;isEnabled()) {</div>
<div class="line"><span class="lineno"> 2472</span>    <a class="code hl_class" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a> *sl = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>()-&gt;getSimpleLevel();</div>
<div class="line"><span class="lineno"> 2473</span>    <span class="keywordflow">if</span> (!sl || sl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a1a147f1e970a62120c0bbaf0020a8932">getType</a>() == PLI_XSHLEVEL || sl-&gt;getDpi() == <a class="code hl_class" href="class_t_point_t.html">TPointD</a>())</div>
<div class="line"><span class="lineno"> 2474</span>      <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><span class="lineno"> 2475</span>    imgSize = sl-&gt;getResolution();</div>
<div class="line"><span class="lineno"> 2476</span> </div>
<div class="line"><span class="lineno"> 2477</span>  } <span class="keywordflow">else</span>  <span class="comment">// SCENE_VIEWMODE</span></div>
<div class="line"><span class="lineno"> 2478</span>    <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><span class="lineno"> 2479</span> </div>
<div class="line"><span class="lineno"> 2480</span>  <span class="comment">// add small margin on the edge of the image</span></div>
<div class="line"><span class="lineno"> 2481</span>  <span class="keywordtype">int</span> margin = 20;</div>
<div class="line"><span class="lineno"> 2482</span>  <span class="comment">// get the desktop resolution</span></div>
<div class="line"><span class="lineno"> 2483</span>  QRect rec = QApplication::desktop()-&gt;screenGeometry();</div>
<div class="line"><span class="lineno"> 2484</span> </div>
<div class="line"><span class="lineno"> 2485</span>  <span class="comment">// fit to either direction</span></div>
<div class="line"><span class="lineno"> 2486</span>  <span class="keywordtype">int</span> moni_x = rec.width() - (margin * 2);</div>
<div class="line"><span class="lineno"> 2487</span>  <span class="keywordtype">int</span> moni_y = rec.height() - (margin * 2);</div>
<div class="line"><span class="lineno"> 2488</span>  <span class="keywordflow">return</span> std::min((<span class="keywordtype">double</span>)moni_x / (<span class="keywordtype">double</span>)imgSize.lx,</div>
<div class="line"><span class="lineno"> 2489</span>                  (<span class="keywordtype">double</span>)moni_y / (<span class="keywordtype">double</span>)imgSize.ly);</div>
<div class="line"><span class="lineno"> 2490</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01472">ToonzScene::getCurrentCamera()</a>, <a class="el" href="#l00122">TApp::getCurrentLevel()</a>, <a class="el" href="#l00106">TApp::getCurrentScene()</a>, <a class="el" href="#l00072">TCamera::getRes()</a>, <a class="el" href="#l00081">TXshLevel::getType()</a>, <a class="el" href="#l00052">CameraTestCheck::instance()</a>, <a class="el" href="#l00093">CleanupPreviewCheck::instance()</a>, and <a class="el" href="#l00215">TApp::instance()</a>.</p>

</div>
</div>
<a id="ab96170500b3df72aa36a3deb5f69cc11" name="ab96170500b3df72aa36a3deb5f69cc11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab96170500b3df72aa36a3deb5f69cc11">&#9670;&nbsp;</a></span>GLInvalidateAll()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::GLInvalidateAll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Redraws the entire viewer, bypassing Qt's event system </p>

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html#a4e256660e14db34f8b1d3d74b62e8851">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2269</span>                                  {</div>
<div class="line"><span class="lineno"> 2270</span>  m_clipRect = InvalidateAllRect;</div>
<div class="line"><span class="lineno"> 2271</span>  update();</div>
<div class="line"><span class="lineno"> 2272</span>  <span class="keywordflow">if</span> (m_vRuler) m_vRuler-&gt;update();</div>
<div class="line"><span class="lineno"> 2273</span>  <span class="keywordflow">if</span> (m_hRuler) m_hRuler-&gt;update();</div>
<div class="line"><span class="lineno"> 2274</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l02914">onToolChanged()</a>.</p>

</div>
</div>
<a id="ae5973b384a0f6d4a76fa06ae6343c43f" name="ae5973b384a0f6d4a76fa06ae6343c43f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5973b384a0f6d4a76fa06ae6343c43f">&#9670;&nbsp;</a></span>GLInvalidateRect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::GLInvalidateRect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_rect_t.html">TRectD</a> &amp;&#160;</td>
          <td class="paramname"><em>rect</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Same as <a class="el" href="class_scene_viewer.html#ab96170500b3df72aa36a3deb5f69cc11">GLInvalidateAll()</a>, </p>

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html#a3ca66eeb722bff291bc1d0d5463a706b">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2278</span>                                                     {</div>
<div class="line"><span class="lineno"> 2279</span>  <span class="comment">// in case that GLInvalidateAll is called just before coming here,</span></div>
<div class="line"><span class="lineno"> 2280</span>  <span class="comment">// ignore the clip rect and refresh entire viewer</span></div>
<div class="line"><span class="lineno"> 2281</span>  <span class="keywordflow">if</span> (m_clipRect == InvalidateAllRect)</div>
<div class="line"><span class="lineno"> 2282</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2283</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rect.<a class="code hl_function" href="class_t_rect_t.html#a53ce09c6112f8a019b43ad82d721a93b">isEmpty</a>())</div>
<div class="line"><span class="lineno"> 2284</span>    m_clipRect = InvalidateAllRect;</div>
<div class="line"><span class="lineno"> 2285</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2286</span>    m_clipRect += rect;</div>
<div class="line"><span class="lineno"> 2287</span>    <span class="keywordflow">if</span> (!m_guidedDrawingBBox.<a class="code hl_function" href="class_t_rect_t.html#a53ce09c6112f8a019b43ad82d721a93b">isEmpty</a>()) {</div>
<div class="line"><span class="lineno"> 2288</span>      <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool         = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 2289</span>      <a class="code hl_class" href="class_t_point_t.html">TPointD</a> topLeft     = tool-&gt;getMatrix() * m_guidedDrawingBBox.getP00();</div>
<div class="line"><span class="lineno"> 2290</span>      <a class="code hl_class" href="class_t_point_t.html">TPointD</a> bottomRight = tool-&gt;getMatrix() * m_guidedDrawingBBox.getP11();</div>
<div class="line"><span class="lineno"> 2291</span>      m_clipRect += <a class="code hl_class" href="class_t_rect_t.html">TRectD</a>(topLeft, bottomRight);</div>
<div class="line"><span class="lineno"> 2292</span>    }</div>
<div class="line"><span class="lineno"> 2293</span>  }</div>
<div class="line"><span class="lineno"> 2294</span>  update();</div>
<div class="line"><span class="lineno"> 2295</span>  <span class="keywordflow">if</span> (m_vRuler) m_vRuler-&gt;update();</div>
<div class="line"><span class="lineno"> 2296</span>  <span class="keywordflow">if</span> (m_hRuler) m_hRuler-&gt;update();</div>
<div class="line"><span class="lineno"> 2297</span>  m_guidedDrawingBBox.empty();</div>
<div class="line"><span class="lineno"> 2298</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00126">TApp::getCurrentTool()</a>, <a class="el" href="#l00215">TApp::instance()</a>, and <a class="el" href="class_t_rect_t.html#a53ce09c6112f8a019b43ad82d721a93b">TRectT&lt; T &gt;::isEmpty()</a>.</p>

</div>
</div>
<a id="a713eb48131c80efb39184a049c28e16d" name="a713eb48131c80efb39184a049c28e16d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a713eb48131c80efb39184a049c28e16d">&#9670;&nbsp;</a></span>hideEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::hideEvent </td>
          <td>(</td>
          <td class="paramtype">QHideEvent *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1104</span>                                        {</div>
<div class="line"><span class="lineno"> 1105</span>  <span class="comment">// Se il viewer e&#39; hide e il preview e&#39; attivo rimuovo il listner dal preview</span></div>
<div class="line"><span class="lineno"> 1106</span>  <span class="keywordflow">if</span> (m_previewMode != NO_PREVIEW)</div>
<div class="line"><span class="lineno"> 1107</span>    <a class="code hl_function" href="class_previewer.html#a5eb765b66490a3d99d432f90864bfacd">Previewer::instance</a>(m_previewMode == SUBCAMERA_PREVIEW)</div>
<div class="line"><span class="lineno"> 1108</span>        -&gt;removeListener(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1109</span> </div>
<div class="line"><span class="lineno"> 1110</span>  <a class="code hl_class" href="class_t_app.html">TApp</a> *app = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>();</div>
<div class="line"><span class="lineno"> 1111</span> </div>
<div class="line"><span class="lineno"> 1112</span>  <a class="code hl_class" href="class_t_scene_handle.html">TSceneHandle</a> *sceneHandle = app-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>();</div>
<div class="line"><span class="lineno"> 1113</span>  <span class="keywordflow">if</span> (sceneHandle) sceneHandle-&gt;disconnect(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1114</span> </div>
<div class="line"><span class="lineno"> 1115</span>  <a class="code hl_class" href="class_t_frame_handle.html">TFrameHandle</a> *frameHandle = app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>();</div>
<div class="line"><span class="lineno"> 1116</span>  <span class="keywordflow">if</span> (frameHandle) frameHandle-&gt;disconnect(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1117</span> </div>
<div class="line"><span class="lineno"> 1118</span>  <a class="code hl_class" href="class_t_palette_handle.html">TPaletteHandle</a> *paletteHandle =</div>
<div class="line"><span class="lineno"> 1119</span>      app-&gt;getPaletteController()-&gt;getCurrentLevelPalette();</div>
<div class="line"><span class="lineno"> 1120</span>  <span class="keywordflow">if</span> (paletteHandle) paletteHandle-&gt;disconnect(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1121</span> </div>
<div class="line"><span class="lineno"> 1122</span>  <a class="code hl_class" href="class_t_object_handle.html">TObjectHandle</a> *objectHandle = app-&gt;<a class="code hl_function" href="class_t_app.html#a0d91c122eec2b756b7c4780014e49f9e">getCurrentObject</a>();</div>
<div class="line"><span class="lineno"> 1123</span>  <span class="keywordflow">if</span> (objectHandle) objectHandle-&gt;disconnect(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1124</span> </div>
<div class="line"><span class="lineno"> 1125</span>  <a class="code hl_class" href="class_t_onion_skin_mask_handle.html">TOnionSkinMaskHandle</a> *onionHandle = app-&gt;<a class="code hl_function" href="class_t_app.html#afcdd56d9130b7c39a5227de08a0b65e4">getCurrentOnionSkin</a>();</div>
<div class="line"><span class="lineno"> 1126</span>  <span class="keywordflow">if</span> (onionHandle) onionHandle-&gt;disconnect(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1127</span> </div>
<div class="line"><span class="lineno"> 1128</span>  <a class="code hl_class" href="class_t_xsh_level_handle.html">TXshLevelHandle</a> *levelHandle = app-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>();</div>
<div class="line"><span class="lineno"> 1129</span>  <span class="keywordflow">if</span> (levelHandle) levelHandle-&gt;disconnect(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1130</span> </div>
<div class="line"><span class="lineno"> 1131</span>  <a class="code hl_class" href="class_t_xsheet_handle.html">TXsheetHandle</a> *xsheetHandle = app-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>();</div>
<div class="line"><span class="lineno"> 1132</span>  <span class="keywordflow">if</span> (xsheetHandle) xsheetHandle-&gt;disconnect(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1133</span> </div>
<div class="line"><span class="lineno"> 1134</span>  <a class="code hl_class" href="class_tool_handle.html">ToolHandle</a> *toolHandle = app-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>();</div>
<div class="line"><span class="lineno"> 1135</span>  <span class="keywordflow">if</span> (toolHandle) toolHandle-&gt;disconnect(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1136</span> </div>
<div class="line"><span class="lineno"> 1137</span>  disconnect(app, SIGNAL(tabletLeft()), <span class="keyword">this</span>, SLOT(resetTabletStatus()));</div>
<div class="line"><span class="lineno"> 1138</span> </div>
<div class="line"><span class="lineno"> 1139</span><span class="preprocessor">#if defined(x64)</span></div>
<div class="line"><span class="lineno"> 1140</span>  <span class="keywordflow">if</span> (m_stopMotion) {</div>
<div class="line"><span class="lineno"> 1141</span>    disconnect(m_stopMotion, SIGNAL(newImageReady()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 1142</span>               SLOT(onNewStopMotionImageReady()));</div>
<div class="line"><span class="lineno"> 1143</span>    disconnect(m_stopMotion, SIGNAL(liveViewStopped()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 1144</span>               SLOT(onStopMotionLiveViewStopped()));</div>
<div class="line"><span class="lineno"> 1145</span>  }</div>
<div class="line"><span class="lineno"> 1146</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1147</span> </div>
<div class="line"><span class="lineno"> 1148</span>  <span class="comment">// hide locator</span></div>
<div class="line"><span class="lineno"> 1149</span>  <span class="keywordflow">if</span> (m_locator &amp;&amp; m_locator-&gt;isVisible()) m_locator-&gt;hide();</div>
<div class="line"><span class="lineno"> 1150</span>}</div>
<div class="ttc" id="aclass_t_onion_skin_mask_handle_html"><div class="ttname"><a href="class_t_onion_skin_mask_handle.html">TOnionSkinMaskHandle</a></div><div class="ttdef"><b>Definition:</b> tonionskinmaskhandle.h:28</div></div>
<div class="ttc" id="aclass_t_palette_handle_html"><div class="ttname"><a href="class_t_palette_handle.html">TPaletteHandle</a></div><div class="ttdef"><b>Definition:</b> tpalettehandle.h:27</div></div>
<div class="ttc" id="aclass_t_scene_handle_html"><div class="ttname"><a href="class_t_scene_handle.html">TSceneHandle</a></div><div class="ttdef"><b>Definition:</b> tscenehandle.h:28</div></div>
<div class="ttc" id="aclass_t_xsh_level_handle_html"><div class="ttname"><a href="class_t_xsh_level_handle.html">TXshLevelHandle</a></div><div class="ttdef"><b>Definition:</b> txshlevelhandle.h:24</div></div>
<div class="ttc" id="aclass_t_xsheet_handle_html"><div class="ttname"><a href="class_t_xsheet_handle.html">TXsheetHandle</a></div><div class="ttdef"><b>Definition:</b> txsheethandle.h:27</div></div>
<div class="ttc" id="aclass_tool_handle_html"><div class="ttname"><a href="class_tool_handle.html">ToolHandle</a></div><div class="ttdef"><b>Definition:</b> toolhandle.h:31</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a877c189291e741328d2162a37550bde6" name="a877c189291e741328d2162a37550bde6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a877c189291e741328d2162a37550bde6">&#9670;&nbsp;</a></span>initializeGL()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::initializeGL </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1233</span>                               {</div>
<div class="line"><span class="lineno"> 1234</span>  initializeOpenGLFunctions();</div>
<div class="line"><span class="lineno"> 1235</span> </div>
<div class="line"><span class="lineno"> 1236</span>  registerContext();</div>
<div class="line"><span class="lineno"> 1237</span> </div>
<div class="line"><span class="lineno"> 1238</span>  <span class="comment">// to be computed once through the software</span></div>
<div class="line"><span class="lineno"> 1239</span>  <span class="keywordflow">if</span> (m_lutCalibrator &amp;&amp; !m_lutCalibrator-&gt;isInitialized()) {</div>
<div class="line"><span class="lineno"> 1240</span>    m_lutCalibrator-&gt;initialize();</div>
<div class="line"><span class="lineno"> 1241</span>    connect(context(), SIGNAL(aboutToBeDestroyed()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 1242</span>            SLOT(onContextAboutToBeDestroyed()));</div>
<div class="line"><span class="lineno"> 1243</span>  }</div>
<div class="line"><span class="lineno"> 1244</span> </div>
<div class="line"><span class="lineno"> 1245</span>  <span class="comment">// glClearColor(1.0,1.0,1.0,1);</span></div>
<div class="line"><span class="lineno"> 1246</span>  glClear(GL_COLOR_BUFFER_BIT);</div>
<div class="line"><span class="lineno"> 1247</span> </div>
<div class="line"><span class="lineno"> 1248</span>  <span class="keywordflow">if</span> (m_firstInitialized)</div>
<div class="line"><span class="lineno"> 1249</span>    m_firstInitialized = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1250</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1251</span>    resizeGL(width(), height());</div>
<div class="line"><span class="lineno"> 1252</span>    update();</div>
<div class="line"><span class="lineno"> 1253</span>  }</div>
<div class="line"><span class="lineno"> 1254</span>  <span class="comment">// re-computing the display list for the table</span></div>
<div class="line"><span class="lineno"> 1255</span>  m_tableDLId = -1;</div>
<div class="line"><span class="lineno"> 1256</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a39991122d25bf859b7eefd06ed1b4aae" name="a39991122d25bf859b7eefd06ed1b4aae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39991122d25bf859b7eefd06ed1b4aae">&#9670;&nbsp;</a></span>inputMethodEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::inputMethodEvent </td>
          <td>(</td>
          <td class="paramtype">QInputMethodEvent *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1697</span>                                                       {</div>
<div class="line"><span class="lineno"> 1698</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 1699</span>  <span class="keywordflow">if</span> (tool &amp;&amp; tool-&gt;isEnabled()) {</div>
<div class="line"><span class="lineno"> 1700</span>    tool-&gt;onInputText(e-&gt;preeditString().toStdWString(),</div>
<div class="line"><span class="lineno"> 1701</span>                      e-&gt;commitString().toStdWString(), e-&gt;replacementStart(),</div>
<div class="line"><span class="lineno"> 1702</span>                      e-&gt;replacementLength());</div>
<div class="line"><span class="lineno"> 1703</span>  }</div>
<div class="line"><span class="lineno"> 1704</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9865bf9cec6524de9d751f34702aab0f" name="a9865bf9cec6524de9d751f34702aab0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9865bf9cec6524de9d751f34702aab0f">&#9670;&nbsp;</a></span>invalidateAll()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::invalidateAll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Redraws the entire viewer, passing through Qt's event system </p>

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html#a3c78921157249891a6ec73eb94501d2a">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2252</span>                                {</div>
<div class="line"><span class="lineno"> 2253</span>  m_clipRect = InvalidateAllRect;</div>
<div class="line"><span class="lineno"> 2254</span>  update();</div>
<div class="line"><span class="lineno"> 2255</span>  <span class="keywordflow">if</span> (m_vRuler) m_vRuler-&gt;update();</div>
<div class="line"><span class="lineno"> 2256</span>  <span class="keywordflow">if</span> (m_hRuler) m_hRuler-&gt;update();</div>
<div class="line"><span class="lineno"> 2257</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a51e41da45c96d39493ac2753b89d5407" name="a51e41da45c96d39493ac2753b89d5407"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51e41da45c96d39493ac2753b89d5407">&#9670;&nbsp;</a></span>invalidateToolStatus()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::invalidateToolStatus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >for a specific clipping rect Forces the viewer to update the perceived status of tools </p>

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html#ac9783019e219f37d1c4bc038302e3485">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3234</span>                                       {</div>
<div class="line"><span class="lineno"> 3235</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 3236</span>  <span class="keywordflow">if</span> (tool) {</div>
<div class="line"><span class="lineno"> 3237</span>    m_toolDisableReason = tool-&gt;<a class="code hl_function" href="class_t_tool.html#a3638517d39dffe6abec0a4e1bcf990d3">updateEnabled</a>();</div>
<div class="line"><span class="lineno"> 3238</span>    <span class="keywordflow">if</span> (tool-&gt;isEnabled()) {</div>
<div class="line"><span class="lineno"> 3239</span>      setToolCursor(<span class="keyword">this</span>, tool-&gt;<a class="code hl_function" href="class_t_tool.html#a1768a57b8b6d1480618fd923fad15f1d">getCursorId</a>());</div>
<div class="line"><span class="lineno"> 3240</span>      tool-&gt;setViewer(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 3241</span>      tool-&gt;<a class="code hl_function" href="class_t_tool.html#a1a5f380464a6b36947212e2f8d5b314c">updateMatrix</a>();</div>
<div class="line"><span class="lineno"> 3242</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3243</span>      setCursor(Qt::ForbiddenCursor);</div>
<div class="line"><span class="lineno"> 3244</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3245</span>    setCursor(Qt::ForbiddenCursor);</div>
<div class="line"><span class="lineno"> 3246</span>}</div>
<div class="ttc" id="aclass_t_tool_html_a1768a57b8b6d1480618fd923fad15f1d"><div class="ttname"><a href="class_t_tool.html#a1768a57b8b6d1480618fd923fad15f1d">TTool::getCursorId</a></div><div class="ttdeci">virtual int getCursorId() const</div><div class="ttdoc">Returns the type of cursor used by the tool.</div><div class="ttdef"><b>Definition:</b> tool.h:438</div></div>
<div class="ttc" id="aclass_t_tool_html_a1a5f380464a6b36947212e2f8d5b314c"><div class="ttname"><a href="class_t_tool.html#a1a5f380464a6b36947212e2f8d5b314c">TTool::updateMatrix</a></div><div class="ttdeci">virtual void updateMatrix()</div><div class="ttdef"><b>Definition:</b> tool.cpp:801</div></div>
<div class="ttc" id="aclass_t_tool_html_a3638517d39dffe6abec0a4e1bcf990d3"><div class="ttname"><a href="class_t_tool.html#a3638517d39dffe6abec0a4e1bcf990d3">TTool::updateEnabled</a></div><div class="ttdeci">QString updateEnabled()</div><div class="ttdef"><b>Definition:</b> tool.cpp:828</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00126">TApp::getCurrentTool()</a>, <a class="el" href="#l00438">TTool::getCursorId()</a>, <a class="el" href="#l00215">TApp::instance()</a>, <a class="el" href="#l00828">TTool::updateEnabled()</a>, and <a class="el" href="#l00801">TTool::updateMatrix()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l02858">onLevelSwitched()</a>.</p>

</div>
</div>
<a id="a32224c92271386a53b52fdfa99cbce82" name="a32224c92271386a53b52fdfa99cbce82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32224c92271386a53b52fdfa99cbce82">&#9670;&nbsp;</a></span>is3DView()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SceneViewer::is3DView </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2245</span>                                 {</div>
<div class="line"><span class="lineno"> 2246</span>  <span class="keywordtype">bool</span> isCameraTest = <a class="code hl_function" href="class_camera_test_check.html#adc1033b93dea95f49db36d8fb668e16d">CameraTestCheck::instance</a>()-&gt;isEnabled();</div>
<div class="line"><span class="lineno"> 2247</span>  <span class="keywordflow">return</span> (m_referenceMode == CAMERA3D_REFERENCE &amp;&amp; !isCameraTest);</div>
<div class="line"><span class="lineno"> 2248</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b6c96570548ac253cacccd977820c5c" name="a3b6c96570548ac253cacccd977820c5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b6c96570548ac253cacccd977820c5c">&#9670;&nbsp;</a></span>isEditPreviewSubcamera()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SceneViewer::isEditPreviewSubcamera </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  267</span>{ <span class="keywordflow">return</span> m_editPreviewSubCamera; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a951018a0f767f1b40094e839332d896a" name="a951018a0f767f1b40094e839332d896a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a951018a0f767f1b40094e839332d896a">&#9670;&nbsp;</a></span>isPreviewEnabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SceneViewer::isPreviewEnabled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  221</span>{ <span class="keywordflow">return</span> m_previewMode != NO_PREVIEW; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0075f82c0dcd4bdcad064d7ec937f7bf" name="a0075f82c0dcd4bdcad064d7ec937f7bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0075f82c0dcd4bdcad064d7ec937f7bf">&#9670;&nbsp;</a></span>keyPressEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::keyPressEvent </td>
          <td>(</td>
          <td class="paramtype">QKeyEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1376</span>                                                {</div>
<div class="line"><span class="lineno"> 1377</span>  <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1378</span>  <span class="keywordtype">int</span> key = <span class="keyword">event</span>-&gt;key();</div>
<div class="line"><span class="lineno"> 1379</span> </div>
<div class="line"><span class="lineno"> 1380</span><span class="preprocessor">#ifdef WITH_CANON</span></div>
<div class="line"><span class="lineno"> 1381</span>  <span class="keywordflow">if</span> ((m_stopMotion-&gt;m_canon-&gt;m_pickLiveViewZoom ||</div>
<div class="line"><span class="lineno"> 1382</span>       m_stopMotion-&gt;m_canon-&gt;m_zooming) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1383</span>      (key == Qt::Key_Left || key == Qt::Key_Right || key == Qt::Key_Up ||</div>
<div class="line"><span class="lineno"> 1384</span>       key == Qt::Key_Down || key == Qt::Key_2 || key == Qt::Key_4 ||</div>
<div class="line"><span class="lineno"> 1385</span>       key == Qt::Key_6 || key == Qt::Key_8)) {</div>
<div class="line"><span class="lineno"> 1386</span>    <span class="keywordflow">if</span> (m_stopMotion-&gt;m_canon-&gt;m_liveViewZoomReadyToPick == <span class="keyword">true</span>) {</div>
<div class="line"><span class="lineno"> 1387</span>      <span class="keywordflow">if</span> (key == Qt::Key_Left || key == Qt::Key_4) {</div>
<div class="line"><span class="lineno"> 1388</span>        m_stopMotion-&gt;m_canon-&gt;m_liveViewZoomPickPoint.x -= 10;</div>
<div class="line"><span class="lineno"> 1389</span>      }</div>
<div class="line"><span class="lineno"> 1390</span>      <span class="keywordflow">if</span> (key == Qt::Key_Right || key == Qt::Key_6) {</div>
<div class="line"><span class="lineno"> 1391</span>        m_stopMotion-&gt;m_canon-&gt;m_liveViewZoomPickPoint.x += 10;</div>
<div class="line"><span class="lineno"> 1392</span>      }</div>
<div class="line"><span class="lineno"> 1393</span>      <span class="keywordflow">if</span> (key == Qt::Key_Up || key == Qt::Key_8) {</div>
<div class="line"><span class="lineno"> 1394</span>        m_stopMotion-&gt;m_canon-&gt;m_liveViewZoomPickPoint.y += 10;</div>
<div class="line"><span class="lineno"> 1395</span>      }</div>
<div class="line"><span class="lineno"> 1396</span>      <span class="keywordflow">if</span> (key == Qt::Key_Down || key == Qt::Key_2) {</div>
<div class="line"><span class="lineno"> 1397</span>        m_stopMotion-&gt;m_canon-&gt;m_liveViewZoomPickPoint.y -= 10;</div>
<div class="line"><span class="lineno"> 1398</span>      }</div>
<div class="line"><span class="lineno"> 1399</span>      <span class="keywordflow">if</span> (m_stopMotion-&gt;m_canon-&gt;m_zooming) {</div>
<div class="line"><span class="lineno"> 1400</span>        m_stopMotion-&gt;m_canon-&gt;setZoomPoint();</div>
<div class="line"><span class="lineno"> 1401</span>      }</div>
<div class="line"><span class="lineno"> 1402</span>    }</div>
<div class="line"><span class="lineno"> 1403</span>    m_stopMotion-&gt;m_canon-&gt;calculateZoomPoint();</div>
<div class="line"><span class="lineno"> 1404</span>    <span class="keyword">event</span>-&gt;accept();</div>
<div class="line"><span class="lineno"> 1405</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1406</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_stopMotion-&gt;m_canon-&gt;m_pickLiveViewZoom &amp;&amp;</div>
<div class="line"><span class="lineno"> 1407</span>             (key == Qt::Key_Escape || key == Qt::Key_Enter ||</div>
<div class="line"><span class="lineno"> 1408</span>              key == Qt::Key_Return)) {</div>
<div class="line"><span class="lineno"> 1409</span>    m_stopMotion-&gt;m_canon-&gt;toggleZoomPicking();</div>
<div class="line"><span class="lineno"> 1410</span>    <span class="keyword">event</span>-&gt;accept();</div>
<div class="line"><span class="lineno"> 1411</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1412</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1413</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1414</span><span class="preprocessor">#if defined(x64)</span></div>
<div class="line"><span class="lineno"> 1415</span>      <span class="keywordflow">if</span> (m_stopMotion-&gt;m_liveViewStatus == 2 &amp;&amp;</div>
<div class="line"><span class="lineno"> 1416</span>          (key == Qt::Key_Enter || key == Qt::Key_Return)) {</div>
<div class="line"><span class="lineno"> 1417</span>    m_stopMotion-&gt;captureImage();</div>
<div class="line"><span class="lineno"> 1418</span>    <span class="keyword">event</span>-&gt;accept();</div>
<div class="line"><span class="lineno"> 1419</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1420</span>  }</div>
<div class="line"><span class="lineno"> 1421</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1422</span> </div>
<div class="line"><span class="lineno"> 1423</span>  <span class="comment">// resolving priority and tool-specific key events in this lambda</span></div>
<div class="line"><span class="lineno"> 1424</span>  <span class="keyword">auto</span> ret = [&amp;]() -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><span class="lineno"> 1425</span>    <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 1426</span>    <span class="keywordflow">if</span> (!tool) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1427</span> </div>
<div class="line"><span class="lineno"> 1428</span>    <span class="keywordtype">bool</span> isTextToolActive = tool-&gt;getName() == T_Type &amp;&amp; tool-&gt;<a class="code hl_function" href="class_t_tool.html#a6225a72c8bc7ad1ad6eff6b81ac6b0a6">isActive</a>();</div>
<div class="line"><span class="lineno"> 1429</span> </div>
<div class="line"><span class="lineno"> 1430</span>    <span class="keywordflow">if</span> (!isTextToolActive) {</div>
<div class="line"><span class="lineno"> 1431</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="class_viewer_zoomer.html">ViewerZoomer</a>(<span class="keyword">this</span>).exec(event)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1432</span>      <span class="keywordflow">if</span> (SceneViewerShortcutReceiver(<span class="keyword">this</span>).exec(event)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1433</span>      <span class="comment">// If this object is child of Viewer or ComboViewer</span></div>
<div class="line"><span class="lineno"> 1434</span>      <span class="comment">// (m_isStyleShortcutSelective = true),</span></div>
<div class="line"><span class="lineno"> 1435</span>      <span class="comment">// then consider about shortcut for the current style selection.</span></div>
<div class="line"><span class="lineno"> 1436</span>      <span class="keywordflow">if</span> (m_isStyleShortcutSwitchable &amp;&amp;</div>
<div class="line"><span class="lineno"> 1437</span>          Preferences::instance()-&gt;isUseNumpadForSwitchingStylesEnabled() &amp;&amp;</div>
<div class="line"><span class="lineno"> 1438</span>          (event-&gt;modifiers() == Qt::NoModifier ||</div>
<div class="line"><span class="lineno"> 1439</span>           event-&gt;modifiers() == Qt::ShiftModifier ||</div>
<div class="line"><span class="lineno"> 1440</span>           event-&gt;modifiers() == Qt::KeypadModifier) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1441</span>          ((Qt::Key_0 &lt;= key &amp;&amp; key &lt;= Qt::Key_9) || key == Qt::Key_Tab ||</div>
<div class="line"><span class="lineno"> 1442</span>           key == Qt::Key_Backtab)) {</div>
<div class="line"><span class="lineno"> 1443</span>        <span class="comment">// When the viewer is in full screen mode, directly call the style</span></div>
<div class="line"><span class="lineno"> 1444</span>        <span class="comment">// shortcut function since the viewer is retrieved from the parent</span></div>
<div class="line"><span class="lineno"> 1445</span>        <span class="comment">// panel.</span></div>
<div class="line"><span class="lineno"> 1446</span>        <span class="keywordflow">if</span> (parentWidget() &amp;&amp;</div>
<div class="line"><span class="lineno"> 1447</span>            parentWidget()-&gt;windowState() &amp; Qt::WindowFullScreen) {</div>
<div class="line"><span class="lineno"> 1448</span>          StyleShortcutSwitchablePanel::onKeyPress(event);</div>
<div class="line"><span class="lineno"> 1449</span>          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1450</span>        }</div>
<div class="line"><span class="lineno"> 1451</span> </div>
<div class="line"><span class="lineno"> 1452</span>        <span class="keyword">event</span>-&gt;ignore();</div>
<div class="line"><span class="lineno"> 1453</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1454</span>      }</div>
<div class="line"><span class="lineno"> 1455</span>      <span class="comment">// pressing F1, F2 or F3 key will flip between corresponding ghost</span></div>
<div class="line"><span class="lineno"> 1456</span>      <span class="keywordflow">if</span> (CommandManager::instance()-&gt;getAction(MI_ShiftTrace)-&gt;isChecked() &amp;&amp;</div>
<div class="line"><span class="lineno"> 1457</span>          (Qt::Key_F1 &lt;= key &amp;&amp; key &lt;= Qt::Key_F3)) {</div>
<div class="line"><span class="lineno"> 1458</span>        <a class="code hl_class" href="class_onion_skin_mask.html">OnionSkinMask</a> osm =</div>
<div class="line"><span class="lineno"> 1459</span>            <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#afcdd56d9130b7c39a5227de08a0b65e4">getCurrentOnionSkin</a>()-&gt;getOnionSkinMask();</div>
<div class="line"><span class="lineno"> 1460</span>        <span class="keywordflow">if</span> (osm.getGhostFlipKey() != key) {</div>
<div class="line"><span class="lineno"> 1461</span>          osm.appendGhostFlipKey(key);</div>
<div class="line"><span class="lineno"> 1462</span>          <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#afcdd56d9130b7c39a5227de08a0b65e4">getCurrentOnionSkin</a>()-&gt;setOnionSkinMask(osm);</div>
<div class="line"><span class="lineno"> 1463</span>          <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#afcdd56d9130b7c39a5227de08a0b65e4">getCurrentOnionSkin</a>()-&gt;notifyOnionSkinMaskChanged();</div>
<div class="line"><span class="lineno"> 1464</span>        }</div>
<div class="line"><span class="lineno"> 1465</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1466</span>      }</div>
<div class="line"><span class="lineno"> 1467</span>    }</div>
<div class="line"><span class="lineno"> 1468</span> </div>
<div class="line"><span class="lineno"> 1469</span>    <span class="keywordflow">if</span> (!tool-&gt;isEnabled()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1470</span> </div>
<div class="line"><span class="lineno"> 1471</span>    tool-&gt;setViewer(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1472</span> </div>
<div class="line"><span class="lineno"> 1473</span>    <span class="keywordflow">if</span> (key == Qt::Key_Shift || key == Qt::Key_Control || key == Qt::Key_Alt ||</div>
<div class="line"><span class="lineno"> 1474</span>        key == Qt::Key_AltGr) {</div>
<div class="line"><span class="lineno"> 1475</span>      <span class="comment">// quando l&#39;utente preme shift/ctrl ecc. alcuni tool (es. pinch) devono</span></div>
<div class="line"><span class="lineno"> 1476</span>      <span class="comment">// cambiare subito la forma del cursore, senza aspettare il prossimo move</span></div>
<div class="line"><span class="lineno"> 1477</span>      <a class="code hl_class" href="class_t_mouse_event.html">TMouseEvent</a> toonzEvent;</div>
<div class="line"><span class="lineno"> 1478</span>      initToonzEvent(toonzEvent, event);</div>
<div class="line"><span class="lineno"> 1479</span>      toonzEvent.<a class="code hl_variable" href="class_t_mouse_event.html#a05a3f2378eb2179d121e2e46766916de">m_pos</a> = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(m_lastMousePos.x(),</div>
<div class="line"><span class="lineno"> 1480</span>                                 (<span class="keywordtype">double</span>)(height() - 1) - m_lastMousePos.y());</div>
<div class="line"><span class="lineno"> 1481</span> </div>
<div class="line"><span class="lineno"> 1482</span>      <a class="code hl_class" href="class_t_point_t.html">TPointD</a> pos = tool-&gt;getMatrix().<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>() * winToWorld(m_lastMousePos);</div>
<div class="line"><span class="lineno"> 1483</span> </div>
<div class="line"><span class="lineno"> 1484</span>      <a class="code hl_class" href="class_t_object_handle.html">TObjectHandle</a> *objHandle = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a0d91c122eec2b756b7c4780014e49f9e">getCurrentObject</a>();</div>
<div class="line"><span class="lineno"> 1485</span>      <span class="keywordflow">if</span> (tool-&gt;getToolType() &amp; TTool::LevelTool &amp;&amp; !objHandle-&gt;isSpline()) {</div>
<div class="line"><span class="lineno"> 1486</span>        pos.x /= m_dpiScale.x;</div>
<div class="line"><span class="lineno"> 1487</span>        pos.y /= m_dpiScale.y;</div>
<div class="line"><span class="lineno"> 1488</span>      }</div>
<div class="line"><span class="lineno"> 1489</span> </div>
<div class="line"><span class="lineno"> 1490</span>      tool-&gt;mouseMove(pos, toonzEvent);</div>
<div class="line"><span class="lineno"> 1491</span>      setToolCursor(<span class="keyword">this</span>, tool-&gt;<a class="code hl_function" href="class_t_tool.html#a1768a57b8b6d1480618fd923fad15f1d">getCursorId</a>());</div>
<div class="line"><span class="lineno"> 1492</span>    }</div>
<div class="line"><span class="lineno"> 1493</span> </div>
<div class="line"><span class="lineno"> 1494</span>    <span class="keywordflow">if</span> (key == Qt::Key_Menu || key == Qt::Key_Meta) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1495</span> </div>
<div class="line"><span class="lineno"> 1496</span>    <span class="keywordflow">return</span> tool-&gt;keyDown(event);</div>
<div class="line"><span class="lineno"> 1497</span>  }();</div>
<div class="line"><span class="lineno"> 1498</span> </div>
<div class="line"><span class="lineno"> 1499</span>  <span class="keywordflow">if</span> (!ret) {</div>
<div class="line"><span class="lineno"> 1500</span>    <span class="keywordflow">if</span> (changeFrameSkippingHolds(event)) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1501</span> </div>
<div class="line"><span class="lineno"> 1502</span>    <a class="code hl_class" href="class_t_frame_handle.html">TFrameHandle</a> *fh = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>();</div>
<div class="line"><span class="lineno"> 1503</span>    <span class="keywordtype">int</span> origFrame    = fh-&gt;getFrame();</div>
<div class="line"><span class="lineno"> 1504</span> </div>
<div class="line"><span class="lineno"> 1505</span>    <span class="keywordflow">if</span> (key == Qt::Key_Up || key == Qt::Key_Left)</div>
<div class="line"><span class="lineno"> 1506</span>      fh-&gt;prevFrame();</div>
<div class="line"><span class="lineno"> 1507</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == Qt::Key_Down || key == Qt::Key_Right) {</div>
<div class="line"><span class="lineno"> 1508</span>      <span class="comment">// If on a level frame pass the frame id after the last frame to allow</span></div>
<div class="line"><span class="lineno"> 1509</span>      <span class="comment">// creating a new frame with the down arrow key</span></div>
<div class="line"><span class="lineno"> 1510</span>      <a class="code hl_class" href="class_t_frame_id.html">TFrameId</a> newId = 0;</div>
<div class="line"><span class="lineno"> 1511</span>      <span class="keywordflow">if</span> (Preferences::instance()-&gt;getDownArrowLevelStripNewFrame() &amp;&amp;</div>
<div class="line"><span class="lineno"> 1512</span>          fh-&gt;getFrameType() == TFrameHandle::LevelFrame) {</div>
<div class="line"><span class="lineno"> 1513</span>        <a class="code hl_class" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a> *level =</div>
<div class="line"><span class="lineno"> 1514</span>            <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>()-&gt;getLevel()-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">getSimpleLevel</a>();</div>
<div class="line"><span class="lineno"> 1515</span>        <span class="keywordflow">if</span> (level) {</div>
<div class="line"><span class="lineno"> 1516</span>          std::vector&lt;TFrameId&gt; fids;</div>
<div class="line"><span class="lineno"> 1517</span>          level-&gt;<a class="code hl_function" href="class_t_xsh_simple_level.html#a567daee4ca12a0e92445bcf98a6541f1">getFids</a>(fids);</div>
<div class="line"><span class="lineno"> 1518</span>          <span class="keywordflow">if</span> (!fids.empty()) {</div>
<div class="line"><span class="lineno"> 1519</span>            <span class="keywordtype">int</span> frameCount = (int)fids.size();</div>
<div class="line"><span class="lineno"> 1520</span>            newId          = level-&gt;<a class="code hl_function" href="class_t_xsh_simple_level.html#a07279a40ffad2c6ccc597c0a418f78fb">index2fid</a>(frameCount);</div>
<div class="line"><span class="lineno"> 1521</span>          }</div>
<div class="line"><span class="lineno"> 1522</span>        }</div>
<div class="line"><span class="lineno"> 1523</span>      }</div>
<div class="line"><span class="lineno"> 1524</span>      fh-&gt;nextFrame(newId);</div>
<div class="line"><span class="lineno"> 1525</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == Qt::Key_Home)</div>
<div class="line"><span class="lineno"> 1526</span>      fh-&gt;firstFrame();</div>
<div class="line"><span class="lineno"> 1527</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == Qt::Key_End)</div>
<div class="line"><span class="lineno"> 1528</span>      fh-&gt;lastFrame();</div>
<div class="line"><span class="lineno"> 1529</span> </div>
<div class="line"><span class="lineno"> 1530</span>    <span class="comment">// Use arrow keys to shift the cell selection.</span></div>
<div class="line"><span class="lineno"> 1531</span>    <span class="keywordflow">if</span> (Preferences::instance()-&gt;isUseArrowKeyToShiftCellSelectionEnabled() &amp;&amp;</div>
<div class="line"><span class="lineno"> 1532</span>        fh-&gt;getFrameType() != TFrameHandle::LevelFrame) {</div>
<div class="line"><span class="lineno"> 1533</span>      <a class="code hl_class" href="class_t_cell_selection.html">TCellSelection</a> *cellSel =</div>
<div class="line"><span class="lineno"> 1534</span>          <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_t_cell_selection.html">TCellSelection</a> *<span class="keyword">&gt;</span>(TSelection::getCurrent());</div>
<div class="line"><span class="lineno"> 1535</span>      <span class="keywordflow">if</span> (cellSel &amp;&amp; !cellSel-&gt;isEmpty()) {</div>
<div class="line"><span class="lineno"> 1536</span>        <span class="keywordtype">int</span> r0, c0, r1, c1;</div>
<div class="line"><span class="lineno"> 1537</span>        cellSel-&gt;getSelectedCells(r0, c0, r1, c1);</div>
<div class="line"><span class="lineno"> 1538</span>        <span class="keywordtype">int</span> shiftFrame = fh-&gt;getFrame() - origFrame;</div>
<div class="line"><span class="lineno"> 1539</span> </div>
<div class="line"><span class="lineno"> 1540</span>        cellSel-&gt;<a class="code hl_function" href="class_t_cell_selection.html#ac081c8305a9b9269fbf82eb0c9e06bc3">selectCells</a>(r0 + shiftFrame, c0, r1 + shiftFrame, c1);</div>
<div class="line"><span class="lineno"> 1541</span>        <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a6e0ee1978807a89009571ed5ce44323b">getCurrentSelection</a>()-&gt;notifySelectionChanged();</div>
<div class="line"><span class="lineno"> 1542</span>      }</div>
<div class="line"><span class="lineno"> 1543</span>    }</div>
<div class="line"><span class="lineno"> 1544</span>  }</div>
<div class="line"><span class="lineno"> 1545</span>  update();</div>
<div class="line"><span class="lineno"> 1546</span>  <span class="comment">// TODO: devo accettare l&#39;evento?</span></div>
<div class="line"><span class="lineno"> 1547</span>}</div>
<div class="ttc" id="aclass_t_app_html_a6e0ee1978807a89009571ed5ce44323b"><div class="ttname"><a href="class_t_app.html#a6e0ee1978807a89009571ed5ce44323b">TApp::getCurrentSelection</a></div><div class="ttdeci">TSelectionHandle * getCurrentSelection() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:134</div></div>
<div class="ttc" id="aclass_t_cell_selection_html"><div class="ttname"><a href="class_t_cell_selection.html">TCellSelection</a></div><div class="ttdef"><b>Definition:</b> cellselection.h:19</div></div>
<div class="ttc" id="aclass_t_cell_selection_html_ac081c8305a9b9269fbf82eb0c9e06bc3"><div class="ttname"><a href="class_t_cell_selection.html#ac081c8305a9b9269fbf82eb0c9e06bc3">TCellSelection::selectCells</a></div><div class="ttdeci">void selectCells(int r0, int c0, int r1, int c1)</div><div class="ttdef"><b>Definition:</b> cellselection.cpp:1534</div></div>
<div class="ttc" id="aclass_t_frame_id_html"><div class="ttname"><a href="class_t_frame_id.html">TFrameId</a></div><div class="ttdef"><b>Definition:</b> tfilepath.h:29</div></div>
<div class="ttc" id="aclass_t_mouse_event_html"><div class="ttname"><a href="class_t_mouse_event.html">TMouseEvent</a></div><div class="ttdef"><b>Definition:</b> tool.h:70</div></div>
<div class="ttc" id="aclass_t_mouse_event_html_a05a3f2378eb2179d121e2e46766916de"><div class="ttname"><a href="class_t_mouse_event.html#a05a3f2378eb2179d121e2e46766916de">TMouseEvent::m_pos</a></div><div class="ttdeci">TPointD m_pos</div><div class="ttdoc">Mouse position in window coordinates, bottom-left origin.</div><div class="ttdef"><b>Definition:</b> tool.h:88</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_a023065559cff76164ecb6344c586ba27"><div class="ttname"><a href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">TXshLevel::getSimpleLevel</a></div><div class="ttdeci">virtual TXshSimpleLevel * getSimpleLevel()</div><div class="ttdoc">Method (to be overridden in subclasses) to downcast to TXshSimpleLevel.</div><div class="ttdef"><b>Definition:</b> txshlevel.h:95</div></div>
<div class="ttc" id="aclass_t_xsh_simple_level_html_a07279a40ffad2c6ccc597c0a418f78fb"><div class="ttname"><a href="class_t_xsh_simple_level.html#a07279a40ffad2c6ccc597c0a418f78fb">TXshSimpleLevel::index2fid</a></div><div class="ttdeci">TFrameId index2fid(int index) const</div><div class="ttdef"><b>Definition:</b> txshsimplelevel.cpp:544</div></div>
<div class="ttc" id="aclass_t_xsh_simple_level_html_a567daee4ca12a0e92445bcf98a6541f1"><div class="ttname"><a href="class_t_xsh_simple_level.html#a567daee4ca12a0e92445bcf98a6541f1">TXshSimpleLevel::getFids</a></div><div class="ttdeci">std::vector&lt; TFrameId &gt; getFids() const</div><div class="ttdoc">Returns a copy of the level's frame ids.</div><div class="ttdef"><b>Definition:</b> txshsimplelevel.cpp:448</div></div>
<div class="ttc" id="aclass_viewer_zoomer_html"><div class="ttname"><a href="class_viewer_zoomer.html">ViewerZoomer</a></div><div class="ttdef"><b>Definition:</b> sceneviewerevents.cpp:1281</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0c718a9876f69f618e6b20bdc9c48c75" name="a0c718a9876f69f618e6b20bdc9c48c75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c718a9876f69f618e6b20bdc9c48c75">&#9670;&nbsp;</a></span>keyReleaseEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::keyReleaseEvent </td>
          <td>(</td>
          <td class="paramtype">QKeyEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1551</span>                                                  {</div>
<div class="line"><span class="lineno"> 1552</span>  <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1553</span> </div>
<div class="line"><span class="lineno"> 1554</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 1555</span>  <span class="keywordflow">if</span> (!tool || !tool-&gt;isEnabled()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1556</span>  tool-&gt;setViewer(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1557</span> </div>
<div class="line"><span class="lineno"> 1558</span>  <span class="keywordtype">int</span> key = <span class="keyword">event</span>-&gt;key();</div>
<div class="line"><span class="lineno"> 1559</span> </div>
<div class="line"><span class="lineno"> 1560</span>  <span class="keywordflow">if</span> (key == Qt::Key_Shift || key == Qt::Key_Control || key == Qt::Key_Alt ||</div>
<div class="line"><span class="lineno"> 1561</span>      key == Qt::Key_AltGr) {</div>
<div class="line"><span class="lineno"> 1562</span>    <span class="comment">// quando l&#39;utente preme shift/ctrl ecc. alcuni tool (es. pinch) devono</span></div>
<div class="line"><span class="lineno"> 1563</span>    <span class="comment">// cambiare subito la forma del cursore, senza aspettare il prossimo move</span></div>
<div class="line"><span class="lineno"> 1564</span>    <a class="code hl_class" href="class_t_mouse_event.html">TMouseEvent</a> toonzEvent;</div>
<div class="line"><span class="lineno"> 1565</span>    initToonzEvent(toonzEvent, event);</div>
<div class="line"><span class="lineno"> 1566</span>    toonzEvent.<a class="code hl_variable" href="class_t_mouse_event.html#a05a3f2378eb2179d121e2e46766916de">m_pos</a> = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(m_lastMousePos.x(),</div>
<div class="line"><span class="lineno"> 1567</span>                               (<span class="keywordtype">double</span>)(height() - 1) - m_lastMousePos.y());</div>
<div class="line"><span class="lineno"> 1568</span> </div>
<div class="line"><span class="lineno"> 1569</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> pos = tool-&gt;getMatrix().<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>() * winToWorld(m_lastMousePos);</div>
<div class="line"><span class="lineno"> 1570</span> </div>
<div class="line"><span class="lineno"> 1571</span>    <a class="code hl_class" href="class_t_object_handle.html">TObjectHandle</a> *objHandle = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a0d91c122eec2b756b7c4780014e49f9e">getCurrentObject</a>();</div>
<div class="line"><span class="lineno"> 1572</span>    <span class="keywordflow">if</span> (tool-&gt;getToolType() &amp; TTool::LevelTool &amp;&amp; !objHandle-&gt;isSpline()) {</div>
<div class="line"><span class="lineno"> 1573</span>      pos.x /= m_dpiScale.x;</div>
<div class="line"><span class="lineno"> 1574</span>      pos.y /= m_dpiScale.y;</div>
<div class="line"><span class="lineno"> 1575</span>    }</div>
<div class="line"><span class="lineno"> 1576</span> </div>
<div class="line"><span class="lineno"> 1577</span>    tool-&gt;mouseMove(pos, toonzEvent);</div>
<div class="line"><span class="lineno"> 1578</span>    setToolCursor(<span class="keyword">this</span>, tool-&gt;<a class="code hl_function" href="class_t_tool.html#a1768a57b8b6d1480618fd923fad15f1d">getCursorId</a>());</div>
<div class="line"><span class="lineno"> 1579</span>  }</div>
<div class="line"><span class="lineno"> 1580</span> </div>
<div class="line"><span class="lineno"> 1581</span>  <span class="keywordflow">if</span> (CommandManager::instance()-&gt;getAction(MI_ShiftTrace)-&gt;isChecked() &amp;&amp;</div>
<div class="line"><span class="lineno"> 1582</span>      (Qt::Key_F1 &lt;= key &amp;&amp; key &lt;= Qt::Key_F3)) {</div>
<div class="line"><span class="lineno"> 1583</span>    <a class="code hl_class" href="class_onion_skin_mask.html">OnionSkinMask</a> osm =</div>
<div class="line"><span class="lineno"> 1584</span>        <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#afcdd56d9130b7c39a5227de08a0b65e4">getCurrentOnionSkin</a>()-&gt;getOnionSkinMask();</div>
<div class="line"><span class="lineno"> 1585</span>    osm.removeGhostFlipKey(key);</div>
<div class="line"><span class="lineno"> 1586</span>    <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#afcdd56d9130b7c39a5227de08a0b65e4">getCurrentOnionSkin</a>()-&gt;setOnionSkinMask(osm);</div>
<div class="line"><span class="lineno"> 1587</span>    <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#afcdd56d9130b7c39a5227de08a0b65e4">getCurrentOnionSkin</a>()-&gt;notifyOnionSkinMaskChanged();</div>
<div class="line"><span class="lineno"> 1588</span>  }</div>
<div class="line"><span class="lineno"> 1589</span> </div>
<div class="line"><span class="lineno"> 1590</span>  <span class="keywordflow">if</span> (tool-&gt;getName() == T_Type)</div>
<div class="line"><span class="lineno"> 1591</span>    <span class="keyword">event</span>-&gt;accept();</div>
<div class="line"><span class="lineno"> 1592</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1593</span>    <span class="keyword">event</span>-&gt;ignore();</div>
<div class="line"><span class="lineno"> 1594</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab8133ba061ff2aceb093eb09e925a2c4" name="ab8133ba061ff2aceb093eb09e925a2c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8133ba061ff2aceb093eb09e925a2c4">&#9670;&nbsp;</a></span>leaveEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::leaveEvent </td>
          <td>(</td>
          <td class="paramtype">QEvent *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  416</span>{ onLeave(); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac8583e80119b74761b7f2e08378cc05a" name="ac8583e80119b74761b7f2e08378cc05a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8583e80119b74761b7f2e08378cc05a">&#9670;&nbsp;</a></span>mouseDoubleClickEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::mouseDoubleClickEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1598</span>                                                          {</div>
<div class="line"><span class="lineno"> 1599</span>  <span class="keywordflow">if</span> (m_gestureActive) {</div>
<div class="line"><span class="lineno"> 1600</span>    fitToCamera();</div>
<div class="line"><span class="lineno"> 1601</span>    m_gestureActive = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1602</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1603</span>  }</div>
<div class="line"><span class="lineno"> 1604</span>  <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1605</span> </div>
<div class="line"><span class="lineno"> 1606</span>  <span class="keywordtype">int</span> frame = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFrame();</div>
<div class="line"><span class="lineno"> 1607</span>  <span class="keywordflow">if</span> (frame == -1) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1608</span> </div>
<div class="line"><span class="lineno"> 1609</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 1610</span>  <span class="keywordflow">if</span> (!tool || !tool-&gt;isEnabled()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1611</span>  <a class="code hl_class" href="class_t_mouse_event.html">TMouseEvent</a> toonzEvent;</div>
<div class="line"><span class="lineno"> 1612</span>  initToonzEvent(toonzEvent, event, height(), 1.0, getDevPixRatio());</div>
<div class="line"><span class="lineno"> 1613</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> pos =</div>
<div class="line"><span class="lineno"> 1614</span>      tool-&gt;getMatrix().<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>() * winToWorld(event-&gt;pos() * getDevPixRatio());</div>
<div class="line"><span class="lineno"> 1615</span>  <a class="code hl_class" href="class_t_object_handle.html">TObjectHandle</a> *objHandle = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a0d91c122eec2b756b7c4780014e49f9e">getCurrentObject</a>();</div>
<div class="line"><span class="lineno"> 1616</span>  <span class="keywordflow">if</span> (tool-&gt;getToolType() &amp; TTool::LevelTool &amp;&amp; !objHandle-&gt;isSpline()) {</div>
<div class="line"><span class="lineno"> 1617</span>    pos.x /= m_dpiScale.x;</div>
<div class="line"><span class="lineno"> 1618</span>    pos.y /= m_dpiScale.y;</div>
<div class="line"><span class="lineno"> 1619</span>  }</div>
<div class="line"><span class="lineno"> 1620</span> </div>
<div class="line"><span class="lineno"> 1621</span>  <span class="keywordflow">if</span> (event-&gt;button() == Qt::LeftButton)</div>
<div class="line"><span class="lineno"> 1622</span>    tool-&gt;leftButtonDoubleClick(pos, toonzEvent);</div>
<div class="line"><span class="lineno"> 1623</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a65b09e0b6928385784425398c9c4b978" name="a65b09e0b6928385784425398c9c4b978"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65b09e0b6928385784425398c9c4b978">&#9670;&nbsp;</a></span>mouseMoveEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::mouseMoveEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  486</span>                                                   {</div>
<div class="line"><span class="lineno">  487</span>  <span class="comment">// if this is called just after tabletEvent, skip the execution</span></div>
<div class="line"><span class="lineno">  488</span>  <span class="keywordflow">if</span> (m_tabletEvent) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  489</span>  <span class="comment">// and touchscreens but not touchpads...</span></div>
<div class="line"><span class="lineno">  490</span>  <span class="keywordflow">if</span> (m_gestureActive &amp;&amp; m_touchDevice == QTouchDevice::TouchScreen) {</div>
<div class="line"><span class="lineno">  491</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  492</span>  }</div>
<div class="line"><span class="lineno">  493</span>  <span class="comment">// there are three cases to come here :</span></div>
<div class="line"><span class="lineno">  494</span>  <span class="comment">// 1. on mouse is moved (no tablet is used)</span></div>
<div class="line"><span class="lineno">  495</span>  <span class="comment">// 2. on tablet is moved, with middle or right button is pressed</span></div>
<div class="line"><span class="lineno">  496</span>  <span class="comment">// 3. on tablet is moved, BUT tabletEvent was not called</span></div>
<div class="line"><span class="lineno">  497</span>  <span class="comment">// 4. on tablet is moved without pen touching (i.e. floating move)</span></div>
<div class="line"><span class="lineno">  498</span>  <span class="comment">// the case 3 sometimes occurs on OSX. (reporteed in QTBUG-26532 for Qt4, but</span></div>
<div class="line"><span class="lineno">  499</span>  <span class="comment">// not confirmed in Qt5)</span></div>
<div class="line"><span class="lineno">  500</span>  <span class="comment">// the case 4 can be removed once start using Qt5.9 and call</span></div>
<div class="line"><span class="lineno">  501</span>  <span class="comment">// setTabletTracking(true).</span></div>
<div class="line"><span class="lineno">  502</span> </div>
<div class="line"><span class="lineno">  503</span>  <a class="code hl_class" href="class_t_mouse_event.html">TMouseEvent</a> mouseEvent;</div>
<div class="line"><span class="lineno">  504</span>  initToonzEvent(mouseEvent, event, height(), 1.0, getDevPixRatio());</div>
<div class="line"><span class="lineno">  505</span>  onMove(mouseEvent);</div>
<div class="line"><span class="lineno">  506</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae4fb14b4bbe05a40d312fb386cad6018" name="ae4fb14b4bbe05a40d312fb386cad6018"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4fb14b4bbe05a40d312fb386cad6018">&#9670;&nbsp;</a></span>mousePressEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::mousePressEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  671</span>                                                    {</div>
<div class="line"><span class="lineno">  672</span>  <span class="comment">// source can be useful for detecting touch vs mouse,</span></div>
<div class="line"><span class="lineno">  673</span>  <span class="comment">// but has reports of being unreliable on mac</span></div>
<div class="line"><span class="lineno">  674</span>  <span class="comment">// so m_gestureActive is the marker for rejecting touch events</span></div>
<div class="line"><span class="lineno">  675</span>  <span class="keywordtype">int</span> source = <span class="keyword">event</span>-&gt;source();</div>
<div class="line"><span class="lineno">  676</span>  <span class="comment">// if this is called just after tabletEvent, skip the execution</span></div>
<div class="line"><span class="lineno">  677</span>  <span class="keywordflow">if</span> (m_tabletEvent) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  678</span>  <span class="comment">// and touchscreens but not touchpads...</span></div>
<div class="line"><span class="lineno">  679</span>  <span class="keywordflow">if</span> (m_gestureActive &amp;&amp; m_touchDevice == QTouchDevice::TouchScreen) {</div>
<div class="line"><span class="lineno">  680</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  681</span>  }</div>
<div class="line"><span class="lineno">  682</span>  <span class="comment">// For now OSX has a critical problem that mousePressEvent is called just</span></div>
<div class="line"><span class="lineno">  683</span>  <span class="comment">// after releasing the stylus, which causes the irregular stroke while</span></div>
<div class="line"><span class="lineno">  684</span>  <span class="comment">// float-moving.</span></div>
<div class="line"><span class="lineno">  685</span>  <span class="comment">// In such case resetTabletStatus() will be called on</span></div>
<div class="line"><span class="lineno">  686</span>  <span class="comment">// QEvent::TabletLeaveProximity</span></div>
<div class="line"><span class="lineno">  687</span>  <span class="comment">// and will cancel the onPress operation called here.</span></div>
<div class="line"><span class="lineno">  688</span> </div>
<div class="line"><span class="lineno">  689</span>  <a class="code hl_class" href="class_t_mouse_event.html">TMouseEvent</a> mouseEvent;</div>
<div class="line"><span class="lineno">  690</span>  m_mouseState = Touched;</div>
<div class="line"><span class="lineno">  691</span>  initToonzEvent(mouseEvent, event, height(), 1.0, getDevPixRatio());</div>
<div class="line"><span class="lineno">  692</span>  onPress(mouseEvent);</div>
<div class="line"><span class="lineno">  693</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a20d80b32173efe5203eacf2544bb3800" name="a20d80b32173efe5203eacf2544bb3800"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20d80b32173efe5203eacf2544bb3800">&#9670;&nbsp;</a></span>mouseReleaseEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::mouseReleaseEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  812</span>                                                      {</div>
<div class="line"><span class="lineno">  813</span>  <span class="comment">// if this is called just after tabletEvent, skip the execution</span></div>
<div class="line"><span class="lineno">  814</span>  <span class="keywordflow">if</span> (m_tabletEvent) {</div>
<div class="line"><span class="lineno">  815</span>    <span class="comment">// mouseRelease should not clear flag if we are starting or in middle of</span></div>
<div class="line"><span class="lineno">  816</span>    <span class="comment">// stroke</span></div>
<div class="line"><span class="lineno">  817</span>    <span class="comment">// initiated by tableEvent. All other cases, it&#39;s ok to clear flag</span></div>
<div class="line"><span class="lineno">  818</span>    <span class="keywordflow">if</span> (m_tabletState == Released || m_tabletState == None)</div>
<div class="line"><span class="lineno">  819</span>      m_tabletEvent = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  820</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  821</span>  }</div>
<div class="line"><span class="lineno">  822</span>  <span class="comment">// for touchscreens but not touchpads...</span></div>
<div class="line"><span class="lineno">  823</span>  <span class="keywordflow">if</span> (m_gestureActive &amp;&amp; m_touchDevice == QTouchDevice::TouchScreen) {</div>
<div class="line"><span class="lineno">  824</span>    m_gestureActive = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  825</span>    m_rotating      = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  826</span>    m_zooming       = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  827</span>    m_panning       = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  828</span>    m_scaleFactor   = 0.0;</div>
<div class="line"><span class="lineno">  829</span>    m_rotationDelta = 0.0;</div>
<div class="line"><span class="lineno">  830</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  831</span>  }</div>
<div class="line"><span class="lineno">  832</span> </div>
<div class="line"><span class="lineno">  833</span>  <a class="code hl_class" href="class_t_mouse_event.html">TMouseEvent</a> mouseEvent;</div>
<div class="line"><span class="lineno">  834</span>  <span class="keywordflow">if</span> (m_mouseState != None) m_mouseState = Released;</div>
<div class="line"><span class="lineno">  835</span>  initToonzEvent(mouseEvent, event, height(), 1.0, getDevPixRatio());</div>
<div class="line"><span class="lineno">  836</span>  onRelease(mouseEvent);</div>
<div class="line"><span class="lineno">  837</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f9f1e732b1f8df97c86b88d0a3d563f" name="a1f9f1e732b1f8df97c86b88d0a3d563f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f9f1e732b1f8df97c86b88d0a3d563f">&#9670;&nbsp;</a></span>mult3DMatrix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::mult3DMatrix </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2149</span>                               {</div>
<div class="line"><span class="lineno"> 2150</span>  glTranslated(m_pan3D.x, m_pan3D.y, 0);</div>
<div class="line"><span class="lineno"> 2151</span>  glScaled(m_zoomScale3D, m_zoomScale3D, 1);</div>
<div class="line"><span class="lineno"> 2152</span>  glRotated(m_theta3D, 1, 0, 0);</div>
<div class="line"><span class="lineno"> 2153</span>  glRotated(m_phi3D, 0, 1, 0);</div>
<div class="line"><span class="lineno"> 2154</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7417b1376a06cff118bba954c3f67a05" name="a7417b1376a06cff118bba954c3f67a05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7417b1376a06cff118bba954c3f67a05">&#9670;&nbsp;</a></span>navigatorPan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::navigatorPan </td>
          <td>(</td>
          <td class="paramtype">const QPoint &amp;&#160;</td>
          <td class="paramname"><em>delta</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Pan the viewer by using "navigator" (red rectangle) in level strip </p>
<div class="fragment"><div class="line"><span class="lineno"> 2262</span>                                                  {</div>
<div class="line"><span class="lineno"> 2263</span>  panQt(delta);</div>
<div class="line"><span class="lineno"> 2264</span>  m_pos += delta;</div>
<div class="line"><span class="lineno"> 2265</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a53550576897c429393bef675c5d13fbe" name="a53550576897c429393bef675c5d13fbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53550576897c429393bef675c5d13fbe">&#9670;&nbsp;</a></span>onButtonPressed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onButtonPressed </td>
          <td>(</td>
          <td class="paramtype">FlipConsole::EGadget&#160;</td>
          <td class="paramname"><em>button</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  174</span>                                                           {</div>
<div class="line"><span class="lineno">  175</span>  <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  176</span>  <span class="keywordflow">switch</span> (button) {</div>
<div class="line"><span class="lineno">  177</span>  <span class="keywordflow">case</span> FlipConsole::eSaveImg: {</div>
<div class="line"><span class="lineno">  178</span>    <span class="keywordflow">if</span> (m_previewMode == NO_PREVIEW) {</div>
<div class="line"><span class="lineno">  179</span>      DVGui::warning(QObject::tr(</div>
<div class="line"><span class="lineno">  180</span>          <span class="stringliteral">&quot;It is not possible to save images in camera stand view.&quot;</span>));</div>
<div class="line"><span class="lineno">  181</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  182</span>    }</div>
<div class="line"><span class="lineno">  183</span>    <a class="code hl_class" href="class_t_app.html">TApp</a> *app = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>();</div>
<div class="line"><span class="lineno">  184</span>    <span class="keywordtype">int</span> row   = app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFrame();</div>
<div class="line"><span class="lineno">  185</span> </div>
<div class="line"><span class="lineno">  186</span>    <a class="code hl_class" href="class_previewer.html">Previewer</a> *previewer =</div>
<div class="line"><span class="lineno">  187</span>        <a class="code hl_function" href="class_previewer.html#a5eb765b66490a3d99d432f90864bfacd">Previewer::instance</a>(m_previewMode == SUBCAMERA_PREVIEW);</div>
<div class="line"><span class="lineno">  188</span>    <span class="keywordflow">if</span> (!previewer-&gt;<a class="code hl_function" href="class_previewer.html#a43b83e2f98aa1ee5fc316fe9eeeaea15">isFrameReady</a>(row)) {</div>
<div class="line"><span class="lineno">  189</span>      DVGui::warning(QObject::tr(<span class="stringliteral">&quot;The preview images are not ready yet.&quot;</span>));</div>
<div class="line"><span class="lineno">  190</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  191</span>    }</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>    <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> ras =</div>
<div class="line"><span class="lineno">  194</span>        previewer-&gt;<a class="code hl_function" href="class_previewer.html#afb0f0a5c7ca1fb9366996407ea58d4cc">getRaster</a>(row, <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>.m_recomputeIfNeeded);</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>    TImageCache::instance()-&gt;<a class="code hl_function" href="class_t_image_cache.html#a124eae4cf370288f42c22b3477cb5163">add</a>(QString(<span class="stringliteral">&quot;TnzCompareImg&quot;</span>),</div>
<div class="line"><span class="lineno">  197</span>                                 <a class="code hl_class" href="class_t_raster_image_p.html">TRasterImageP</a>(ras-&gt;clone()));</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  200</span>  }</div>
<div class="line"><span class="lineno">  201</span> </div>
<div class="line"><span class="lineno">  202</span>  <span class="keywordflow">case</span> FlipConsole::eSave:</div>
<div class="line"><span class="lineno">  203</span>    <a class="code hl_function" href="class_previewer.html#a5eb765b66490a3d99d432f90864bfacd">Previewer::instance</a>(m_previewMode == SUBCAMERA_PREVIEW)</div>
<div class="line"><span class="lineno">  204</span>        -&gt;saveRenderedFrames();</div>
<div class="line"><span class="lineno">  205</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>  <span class="keywordflow">case</span> FlipConsole::eHisto: {</div>
<div class="line"><span class="lineno">  208</span>    QAction *action = CommandManager::instance()-&gt;getAction(MI_Histogram);</div>
<div class="line"><span class="lineno">  209</span>    action-&gt;trigger();</div>
<div class="line"><span class="lineno">  210</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  211</span>  }</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>  <span class="keywordflow">case</span> FlipConsole::eDefineSubCamera:</div>
<div class="line"><span class="lineno">  214</span>    m_editPreviewSubCamera = !m_editPreviewSubCamera;</div>
<div class="line"><span class="lineno">  215</span>    update();</div>
<div class="line"><span class="lineno">  216</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>  <span class="comment">// open locator. Create one for the first time</span></div>
<div class="line"><span class="lineno">  219</span>  <span class="keywordflow">case</span> FlipConsole::eLocator:</div>
<div class="line"><span class="lineno">  220</span>    <span class="keywordflow">if</span> (!m_locator) m_locator = <span class="keyword">new</span> <a class="code hl_class" href="class_locator_popup.html">LocatorPopup</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  221</span>    m_locator-&gt;show();</div>
<div class="line"><span class="lineno">  222</span>    m_locator-&gt;raise();</div>
<div class="line"><span class="lineno">  223</span>    m_locator-&gt;activateWindow();</div>
<div class="line"><span class="lineno">  224</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>  <span class="keywordflow">case</span> FlipConsole::eZoomIn:</div>
<div class="line"><span class="lineno">  227</span>    zoomIn();</div>
<div class="line"><span class="lineno">  228</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  229</span>  <span class="keywordflow">case</span> FlipConsole::eZoomOut:</div>
<div class="line"><span class="lineno">  230</span>    zoomOut();</div>
<div class="line"><span class="lineno">  231</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  232</span>  <span class="keywordflow">case</span> FlipConsole::eFlipHorizontal:</div>
<div class="line"><span class="lineno">  233</span>    flipX();</div>
<div class="line"><span class="lineno">  234</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  235</span>  <span class="keywordflow">case</span> FlipConsole::eFlipVertical:</div>
<div class="line"><span class="lineno">  236</span>    flipY();</div>
<div class="line"><span class="lineno">  237</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  238</span>  <span class="keywordflow">case</span> FlipConsole::eResetView:</div>
<div class="line"><span class="lineno">  239</span>    resetSceneViewer();</div>
<div class="line"><span class="lineno">  240</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  241</span>  <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  242</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  243</span>  }</div>
<div class="line"><span class="lineno">  244</span>}</div>
<div class="ttc" id="aclass_locator_popup_html"><div class="ttname"><a href="class_locator_popup.html">LocatorPopup</a></div><div class="ttdef"><b>Definition:</b> locatorpopup.h:15</div></div>
<div class="ttc" id="aclass_t_image_cache_html_a124eae4cf370288f42c22b3477cb5163"><div class="ttname"><a href="class_t_image_cache.html#a124eae4cf370288f42c22b3477cb5163">TImageCache::add</a></div><div class="ttdeci">void add(const std::string &amp;id, const TImageP &amp;img, bool overwrite=true)</div><div class="ttdef"><b>Definition:</b> timagecache.cpp:1153</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afa78eb4bdab0b03f3e4ac1fc4af67e05" name="afa78eb4bdab0b03f3e4ac1fc4af67e05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa78eb4bdab0b03f3e4ac1fc4af67e05">&#9670;&nbsp;</a></span>onContextAboutToBeDestroyed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onContextAboutToBeDestroyed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3294</span>                                              {</div>
<div class="line"><span class="lineno"> 3295</span>  <span class="keywordflow">if</span> (!m_lutCalibrator) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3296</span>  makeCurrent();</div>
<div class="line"><span class="lineno"> 3297</span>  m_lutCalibrator-&gt;cleanup();</div>
<div class="line"><span class="lineno"> 3298</span>  doneCurrent();</div>
<div class="line"><span class="lineno"> 3299</span>  disconnect(context(), SIGNAL(aboutToBeDestroyed()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 3300</span>             SLOT(onContextAboutToBeDestroyed()));</div>
<div class="line"><span class="lineno"> 3301</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ebf805abb82191cbde483dc14fa8896" name="a8ebf805abb82191cbde483dc14fa8896"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ebf805abb82191cbde483dc14fa8896">&#9670;&nbsp;</a></span>onContextMenu()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onContextMenu </td>
          <td>(</td>
          <td class="paramtype">const QPoint &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QPoint &amp;&#160;</td>
          <td class="paramname"><em>globalPos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1652</span>                                                                          {</div>
<div class="line"><span class="lineno"> 1653</span>  <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1654</span>  <span class="keywordflow">if</span> (m_isLocator) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1655</span>  <span class="keyword">static</span> <span class="keywordtype">bool</span> menuVisible = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1656</span>  <span class="keywordflow">if</span> (menuVisible) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1657</span>  menuVisible     = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1658</span>  <span class="keywordtype">int</span> devPixRatio = getDevPixRatio();</div>
<div class="line"><span class="lineno"> 1659</span>  <a class="code hl_class" href="class_t_point_t.html">TPoint</a> winPos(pos.x() * devPixRatio, height() - pos.y() * devPixRatio);</div>
<div class="line"><span class="lineno"> 1660</span>  std::vector&lt;int&gt; columnIndices;</div>
<div class="line"><span class="lineno"> 1661</span>  <span class="comment">// enable to select all the columns regardless of the click position</span></div>
<div class="line"><span class="lineno"> 1662</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0;</div>
<div class="line"><span class="lineno"> 1663</span>       i &lt; <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()-&gt;getXsheet()-&gt;<a class="code hl_function" href="class_t_xsheet.html#a17464dc5617cf87a46f03e1a52d36cc1">getColumnCount</a>();</div>
<div class="line"><span class="lineno"> 1664</span>       i++)</div>
<div class="line"><span class="lineno"> 1665</span>    columnIndices.push_back(i);</div>
<div class="line"><span class="lineno"> 1666</span> </div>
<div class="line"><span class="lineno"> 1667</span>  <a class="code hl_class" href="class_scene_viewer_context_menu.html">SceneViewerContextMenu</a> *menu = <span class="keyword">new</span> <a class="code hl_class" href="class_scene_viewer_context_menu.html">SceneViewerContextMenu</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1668</span> </div>
<div class="line"><span class="lineno"> 1669</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 1670</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> p   = ((tool) ? tool-&gt;getMatrix().<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>() : <a class="code hl_class" href="class_t_affine.html">TAffine</a>()) *</div>
<div class="line"><span class="lineno"> 1671</span>              winToWorld(pos * devPixRatio);</div>
<div class="line"><span class="lineno"> 1672</span>  menu-&gt;addEnterGroupCommands(p);</div>
<div class="line"><span class="lineno"> 1673</span> </div>
<div class="line"><span class="lineno"> 1674</span>  menu-&gt;addLevelCommands(columnIndices);</div>
<div class="line"><span class="lineno"> 1675</span> </div>
<div class="line"><span class="lineno"> 1676</span>  <a class="code hl_class" href="class_combo_viewer_panel.html">ComboViewerPanel</a> *cvp =</div>
<div class="line"><span class="lineno"> 1677</span>      qobject_cast&lt;ComboViewerPanel *&gt;(parentWidget()-&gt;parentWidget());</div>
<div class="line"><span class="lineno"> 1678</span>  <span class="keywordflow">if</span> (cvp) {</div>
<div class="line"><span class="lineno"> 1679</span>    menu-&gt;addSeparator();</div>
<div class="line"><span class="lineno"> 1680</span>    cvp-&gt;addShowHideContextMenu(menu);</div>
<div class="line"><span class="lineno"> 1681</span>  }</div>
<div class="line"><span class="lineno"> 1682</span> </div>
<div class="line"><span class="lineno"> 1683</span>  <a class="code hl_class" href="class_scene_viewer_panel.html">SceneViewerPanel</a> *svp = qobject_cast&lt;SceneViewerPanel *&gt;(</div>
<div class="line"><span class="lineno"> 1684</span>      parentWidget()-&gt;parentWidget()-&gt;parentWidget());</div>
<div class="line"><span class="lineno"> 1685</span>  <span class="keywordflow">if</span> (svp) {</div>
<div class="line"><span class="lineno"> 1686</span>    menu-&gt;addSeparator();</div>
<div class="line"><span class="lineno"> 1687</span>    svp-&gt;addShowHideContextMenu(menu);</div>
<div class="line"><span class="lineno"> 1688</span>  }</div>
<div class="line"><span class="lineno"> 1689</span> </div>
<div class="line"><span class="lineno"> 1690</span>  menu-&gt;exec(globalPos);</div>
<div class="line"><span class="lineno"> 1691</span>  <span class="keyword">delete</span> menu;</div>
<div class="line"><span class="lineno"> 1692</span>  menuVisible = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1693</span>}</div>
<div class="ttc" id="aclass_combo_viewer_panel_html"><div class="ttname"><a href="class_combo_viewer_panel.html">ComboViewerPanel</a></div><div class="ttdef"><b>Definition:</b> comboviewerpane.h:47</div></div>
<div class="ttc" id="aclass_scene_viewer_context_menu_html"><div class="ttname"><a href="class_scene_viewer_context_menu.html">SceneViewerContextMenu</a></div><div class="ttdef"><b>Definition:</b> sceneviewercontextmenu.h:13</div></div>
<div class="ttc" id="aclass_scene_viewer_panel_html"><div class="ttname"><a href="class_scene_viewer_panel.html">SceneViewerPanel</a></div><div class="ttdef"><b>Definition:</b> viewerpane.h:32</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a17464dc5617cf87a46f03e1a52d36cc1"><div class="ttname"><a href="class_t_xsheet.html#a17464dc5617cf87a46f03e1a52d36cc1">TXsheet::getColumnCount</a></div><div class="ttdeci">int getColumnCount() const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:1425</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0f3074198bf23399e5701d53fec54a78" name="a0f3074198bf23399e5701d53fec54a78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f3074198bf23399e5701d53fec54a78">&#9670;&nbsp;</a></span>onEnter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onEnter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  442</span>                          {</div>
<div class="line"><span class="lineno">  443</span>  <span class="keywordflow">if</span> (m_isMouseEntered) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span>  m_isMouseEntered = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span>  <a class="code hl_class" href="class_t_app.html">TApp</a> *app = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>();</div>
<div class="line"><span class="lineno">  448</span>  app-&gt;setActiveViewer(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  449</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool      = app-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno">  450</span>  <a class="code hl_class" href="class_t_xsh_level.html">TXshLevel</a> *level = app-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>()-&gt;getLevel();</div>
<div class="line"><span class="lineno">  451</span>  <span class="keywordflow">if</span> (level &amp;&amp; level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">getSimpleLevel</a>())</div>
<div class="line"><span class="lineno">  452</span>    m_dpiScale =</div>
<div class="line"><span class="lineno">  453</span>        getCurrentDpiScale(level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">getSimpleLevel</a>(), tool-&gt;<a class="code hl_function" href="class_t_tool.html#ae7db6c4288b721fd95f283419883a4b2">getCurrentFid</a>());</div>
<div class="line"><span class="lineno">  454</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  455</span>    m_dpiScale = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(1, 1);</div>
<div class="line"><span class="lineno">  456</span> </div>
<div class="line"><span class="lineno">  457</span>  <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  458</span> </div>
<div class="line"><span class="lineno">  459</span>  <a class="code hl_function" href="class_scene_viewer.html#a51e41da45c96d39493ac2753b89d5407">invalidateToolStatus</a>();</div>
<div class="line"><span class="lineno">  460</span>  <span class="keywordflow">if</span> (tool &amp;&amp; tool-&gt;isEnabled()) {</div>
<div class="line"><span class="lineno">  461</span>    tool-&gt;setViewer(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  462</span>    tool-&gt;<a class="code hl_function" href="class_t_tool.html#a1a5f380464a6b36947212e2f8d5b314c">updateMatrix</a>();</div>
<div class="line"><span class="lineno">  463</span>    tool-&gt;<a class="code hl_function" href="class_t_tool.html#a3e775cfcd05aa3c35048b11fa40ab3e4">onEnter</a>();</div>
<div class="line"><span class="lineno">  464</span>  }</div>
<div class="line"><span class="lineno">  465</span> </div>
<div class="line"><span class="lineno">  466</span>  <span class="comment">// grab the focus, unless a line-edit is focused currently</span></div>
<div class="line"><span class="lineno">  467</span>  <span class="keywordtype">bool</span> shouldSetFocus = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  468</span> </div>
<div class="line"><span class="lineno">  469</span>  QWidget *focusWidget = qApp-&gt;focusWidget();</div>
<div class="line"><span class="lineno">  470</span>  <span class="keywordflow">if</span> (focusWidget) {</div>
<div class="line"><span class="lineno">  471</span>    QLineEdit *lineEdit = <span class="keyword">dynamic_cast&lt;</span>QLineEdit *<span class="keyword">&gt;</span>(focusWidget);</div>
<div class="line"><span class="lineno">  472</span>    <span class="keywordflow">if</span> (lineEdit) {</div>
<div class="line"><span class="lineno">  473</span>      shouldSetFocus = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  474</span>    }</div>
<div class="line"><span class="lineno">  475</span>  }</div>
<div class="line"><span class="lineno">  476</span> </div>
<div class="line"><span class="lineno">  477</span>  <span class="keywordflow">if</span> (shouldSetFocus) {</div>
<div class="line"><span class="lineno">  478</span>    setFocus();</div>
<div class="line"><span class="lineno">  479</span>  }</div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span>  update();</div>
<div class="line"><span class="lineno">  482</span>}</div>
<div class="ttc" id="aclass_scene_viewer_html_a51e41da45c96d39493ac2753b89d5407"><div class="ttname"><a href="class_scene_viewer.html#a51e41da45c96d39493ac2753b89d5407">SceneViewer::invalidateToolStatus</a></div><div class="ttdeci">void invalidateToolStatus() override</div><div class="ttdef"><b>Definition:</b> sceneviewer.cpp:3234</div></div>
<div class="ttc" id="aclass_t_tool_html_a3e775cfcd05aa3c35048b11fa40ab3e4"><div class="ttname"><a href="class_t_tool.html#a3e775cfcd05aa3c35048b11fa40ab3e4">TTool::onEnter</a></div><div class="ttdeci">virtual void onEnter()</div><div class="ttdoc">Callback for the mouse entering the viewer area.</div><div class="ttdef"><b>Definition:</b> tool.h:405</div></div>
<div class="ttc" id="aclass_t_tool_html_ae7db6c4288b721fd95f283419883a4b2"><div class="ttname"><a href="class_t_tool.html#ae7db6c4288b721fd95f283419883a4b2">TTool::getCurrentFid</a></div><div class="ttdeci">TFrameId getCurrentFid() const</div><div class="ttdoc">Returns the number of the actual editing frame.</div><div class="ttdef"><b>Definition:</b> tool.cpp:688</div></div>
<div class="ttc" id="aclass_t_xsh_level_html"><div class="ttname"><a href="class_t_xsh_level.html">TXshLevel</a></div><div class="ttdoc">The TXshLevel class is the base class of level managers in xsheet.</div><div class="ttdef"><b>Definition:</b> txshlevel.h:50</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76cd7a43b0be7f97a5493ed93bd768d4" name="a76cd7a43b0be7f97a5493ed93bd768d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76cd7a43b0be7f97a5493ed93bd768d4">&#9670;&nbsp;</a></span>onFrameSwitched</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onFrameSwitched </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2898</span>                                  {</div>
<div class="line"><span class="lineno"> 2899</span>  <a class="code hl_function" href="class_scene_viewer.html#a51e41da45c96d39493ac2753b89d5407">invalidateToolStatus</a>();</div>
<div class="line"><span class="lineno"> 2900</span> </div>
<div class="line"><span class="lineno"> 2901</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 2902</span>  <span class="keywordflow">if</span> (tool &amp;&amp; tool-&gt;isEnabled()) {</div>
<div class="line"><span class="lineno"> 2903</span>    tool-&gt;setViewer(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 2904</span>    tool-&gt;<a class="code hl_function" href="class_t_tool.html#a1a5f380464a6b36947212e2f8d5b314c">updateMatrix</a>();</div>
<div class="line"><span class="lineno"> 2905</span>    tool-&gt;<a class="code hl_function" href="class_t_tool.html#a3e775cfcd05aa3c35048b11fa40ab3e4">onEnter</a>();</div>
<div class="line"><span class="lineno"> 2906</span>  }</div>
<div class="line"><span class="lineno"> 2907</span> </div>
<div class="line"><span class="lineno"> 2908</span>  <a class="code hl_function" href="class_scene_viewer.html#ab96170500b3df72aa36a3deb5f69cc11">GLInvalidateAll</a>();</div>
<div class="line"><span class="lineno"> 2909</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac8ac929204cd5dbe735e893d16302970" name="ac8ac929204cd5dbe735e893d16302970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8ac929204cd5dbe735e893d16302970">&#9670;&nbsp;</a></span>onLeave()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onLeave </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  420</span>                          {</div>
<div class="line"><span class="lineno">  421</span>  <span class="keywordflow">if</span> (!m_isMouseEntered) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>  m_isMouseEntered = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span>  <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  426</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno">  427</span>  <span class="keywordflow">if</span> (tool &amp;&amp; tool-&gt;isEnabled()) tool-&gt;<a class="code hl_function" href="class_t_tool.html#af7fb05265a94131da081da654e271a22">onLeave</a>();</div>
<div class="line"><span class="lineno">  428</span> </div>
<div class="line"><span class="lineno">  429</span>  <span class="comment">// force reset the flipping of shift &amp; trace</span></div>
<div class="line"><span class="lineno">  430</span>  <span class="keywordflow">if</span> (CommandManager::instance()-&gt;getAction(MI_ShiftTrace)-&gt;isChecked())</div>
<div class="line"><span class="lineno">  431</span>    TTool::getTool(<span class="stringliteral">&quot;T_ShiftTrace&quot;</span>, <a class="code hl_enumvalue" href="class_t_tool.html#adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1">TTool::ToonzImage</a>)-&gt;<a class="code hl_function" href="class_t_tool.html#af7fb05265a94131da081da654e271a22">onLeave</a>();</div>
<div class="line"><span class="lineno">  432</span> </div>
<div class="line"><span class="lineno">  433</span>  update();</div>
<div class="line"><span class="lineno">  434</span>}</div>
<div class="ttc" id="aclass_t_tool_html_af7fb05265a94131da081da654e271a22"><div class="ttname"><a href="class_t_tool.html#af7fb05265a94131da081da654e271a22">TTool::onLeave</a></div><div class="ttdeci">virtual void onLeave()</div><div class="ttdoc">Callback for the mouse leaving the viewer area.</div><div class="ttdef"><b>Definition:</b> tool.h:407</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0454f71591bde07203a2e6ac030e9b5d" name="a0454f71591bde07203a2e6ac030e9b5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0454f71591bde07203a2e6ac030e9b5d">&#9670;&nbsp;</a></span>onLevelChanged</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onLevelChanged </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2843</span>                                 {</div>
<div class="line"><span class="lineno"> 2844</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 2845</span>  <span class="keywordflow">if</span> (tool) {</div>
<div class="line"><span class="lineno"> 2846</span>    <a class="code hl_class" href="class_t_xsh_level.html">TXshLevel</a> *level = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>()-&gt;getLevel();</div>
<div class="line"><span class="lineno"> 2847</span>    <span class="keywordflow">if</span> (level &amp;&amp; level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">getSimpleLevel</a>())</div>
<div class="line"><span class="lineno"> 2848</span>      m_dpiScale =</div>
<div class="line"><span class="lineno"> 2849</span>          getCurrentDpiScale(level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">getSimpleLevel</a>(), tool-&gt;<a class="code hl_function" href="class_t_tool.html#ae7db6c4288b721fd95f283419883a4b2">getCurrentFid</a>());</div>
<div class="line"><span class="lineno"> 2850</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2851</span>      m_dpiScale = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(1, 1);</div>
<div class="line"><span class="lineno"> 2852</span>  }</div>
<div class="line"><span class="lineno"> 2853</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4c5ebcc7632efbf13fd8640531e95766" name="a4c5ebcc7632efbf13fd8640531e95766"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c5ebcc7632efbf13fd8640531e95766">&#9670;&nbsp;</a></span>onLevelSwitched</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onLevelSwitched </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >when level is switched, update m_dpiScale in order to show white background for Ink&amp;Paint work properly </p>
<div class="fragment"><div class="line"><span class="lineno"> 2858</span>                                  {</div>
<div class="line"><span class="lineno"> 2859</span>  <a class="code hl_function" href="class_scene_viewer.html#a51e41da45c96d39493ac2753b89d5407">invalidateToolStatus</a>();</div>
<div class="line"><span class="lineno"> 2860</span>  <a class="code hl_class" href="class_t_app.html">TApp</a> *app        = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>();</div>
<div class="line"><span class="lineno"> 2861</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool      = app-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 2862</span>  <a class="code hl_class" href="class_t_xsh_level.html">TXshLevel</a> *level = app-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>()-&gt;getLevel();</div>
<div class="line"><span class="lineno"> 2863</span>  <span class="keywordflow">if</span> (level &amp;&amp; level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">getSimpleLevel</a>())</div>
<div class="line"><span class="lineno"> 2864</span>    m_dpiScale =</div>
<div class="line"><span class="lineno"> 2865</span>        getCurrentDpiScale(level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">getSimpleLevel</a>(), tool-&gt;<a class="code hl_function" href="class_t_tool.html#ae7db6c4288b721fd95f283419883a4b2">getCurrentFid</a>());</div>
<div class="line"><span class="lineno"> 2866</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2867</span>    m_dpiScale = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(1, 1);</div>
<div class="line"><span class="lineno"> 2868</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00688">TTool::getCurrentFid()</a>, <a class="el" href="#l00122">TApp::getCurrentLevel()</a>, <a class="el" href="#l00126">TApp::getCurrentTool()</a>, <a class="el" href="#l00095">TXshLevel::getSimpleLevel()</a>, <a class="el" href="#l00215">TApp::instance()</a>, and <a class="el" href="#l03234">invalidateToolStatus()</a>.</p>

</div>
</div>
<a id="a147e36c46189dce4600beccc005e50d2" name="a147e36c46189dce4600beccc005e50d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a147e36c46189dce4600beccc005e50d2">&#9670;&nbsp;</a></span>onMove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onMove </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_mouse_event.html">TMouseEvent</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  509</span>                                                 {</div>
<div class="line"><span class="lineno">  510</span>  <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  511</span> </div>
<div class="line"><span class="lineno">  512</span>  <span class="keywordtype">int</span> devPixRatio = getDevPixRatio();</div>
<div class="line"><span class="lineno">  513</span>  QPointF curPos  = <span class="keyword">event</span>.mousePos() * devPixRatio;</div>
<div class="line"><span class="lineno">  514</span>  <span class="keywordtype">bool</span> cursorSet  = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  515</span>  m_lastMousePos  = curPos;</div>
<div class="line"><span class="lineno">  516</span> </div>
<div class="line"><span class="lineno">  517</span>  <span class="keywordflow">if</span> (m_editPreviewSubCamera) {</div>
<div class="line"><span class="lineno">  518</span>    <span class="keywordflow">if</span> (!PreviewSubCameraManager::instance()-&gt;mouseMoveEvent(<span class="keyword">this</span>, event))</div>
<div class="line"><span class="lineno">  519</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  520</span>  }</div>
<div class="line"><span class="lineno">  521</span> </div>
<div class="line"><span class="lineno">  522</span>  <span class="comment">// if the &quot;compare with snapshot&quot; mode is activated, change the mouse cursor</span></div>
<div class="line"><span class="lineno">  523</span>  <span class="comment">// on the border handle</span></div>
<div class="line"><span class="lineno">  524</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#af46b586bd61bf70e606713bee68c3aad">m_doCompare</a> &amp;&amp; isPreviewEnabled()) {</div>
<div class="line"><span class="lineno">  525</span>    <span class="keywordflow">if</span> (std::abs(curPos.x() - width() * m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#ac544bac665ef86ee2ef3cfc214e89430">m_compareX</a>) &lt; 20) {</div>
<div class="line"><span class="lineno">  526</span>      cursorSet = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  527</span>      setToolCursor(<span class="keyword">this</span>, ToolCursor::ScaleHCursor);</div>
<div class="line"><span class="lineno">  528</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (std::abs((height() - curPos.y()) -</div>
<div class="line"><span class="lineno">  529</span>                        height() * m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#aef7ad2a36c8fe81f397f225df3fc1095">m_compareY</a>) &lt; 20) {</div>
<div class="line"><span class="lineno">  530</span>      cursorSet = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  531</span>      setToolCursor(<span class="keyword">this</span>, ToolCursor::ScaleVCursor);</div>
<div class="line"><span class="lineno">  532</span>    }</div>
<div class="line"><span class="lineno">  533</span> </div>
<div class="line"><span class="lineno">  534</span>    <span class="comment">// control of the border handle when the &quot;compare with snapshot&quot; mode is</span></div>
<div class="line"><span class="lineno">  535</span>    <span class="comment">// activated</span></div>
<div class="line"><span class="lineno">  536</span>    <span class="keywordflow">if</span> (m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a5c7c87c21fafb25dc1ba31ac6574397f">m_dragCompareX</a> || m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a3458a525867577308cefaf2d33f6639b">m_dragCompareY</a>) {</div>
<div class="line"><span class="lineno">  537</span>      <span class="keywordflow">if</span> (m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a5c7c87c21fafb25dc1ba31ac6574397f">m_dragCompareX</a>)</div>
<div class="line"><span class="lineno">  538</span>        m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#ac544bac665ef86ee2ef3cfc214e89430">m_compareX</a> +=</div>
<div class="line"><span class="lineno">  539</span>            ((double)(curPos.x() - m_pos.x())) / width();</div>
<div class="line"><span class="lineno">  540</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a3458a525867577308cefaf2d33f6639b">m_dragCompareY</a>)</div>
<div class="line"><span class="lineno">  541</span>        m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#aef7ad2a36c8fe81f397f225df3fc1095">m_compareY</a> -=</div>
<div class="line"><span class="lineno">  542</span>            ((double)(curPos.y() - m_pos.y())) / height();</div>
<div class="line"><span class="lineno">  543</span>      m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#ac544bac665ef86ee2ef3cfc214e89430">m_compareX</a> =</div>
<div class="line"><span class="lineno">  544</span>          tcrop(m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#ac544bac665ef86ee2ef3cfc214e89430">m_compareX</a>, 0.0, 1.0);</div>
<div class="line"><span class="lineno">  545</span>      m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#aef7ad2a36c8fe81f397f225df3fc1095">m_compareY</a> =</div>
<div class="line"><span class="lineno">  546</span>          tcrop(m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#aef7ad2a36c8fe81f397f225df3fc1095">m_compareY</a>, 0.0, 1.0);</div>
<div class="line"><span class="lineno">  547</span> </div>
<div class="line"><span class="lineno">  548</span>      update();</div>
<div class="line"><span class="lineno">  549</span> </div>
<div class="line"><span class="lineno">  550</span>      m_pos = curPos;</div>
<div class="line"><span class="lineno">  551</span>    }</div>
<div class="line"><span class="lineno">  552</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_mouseButton == Qt::NoButton || m_mouseButton == Qt::LeftButton) {</div>
<div class="line"><span class="lineno">  553</span>    <span class="keywordflow">if</span> (is3DView()) {</div>
<div class="line"><span class="lineno">  554</span>      <span class="keywordflow">if</span> (m_current3DDevice != NONE &amp;&amp; m_mouseButton == Qt::LeftButton)</div>
<div class="line"><span class="lineno">  555</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  556</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_mouseButton == Qt::NoButton) {</div>
<div class="line"><span class="lineno">  557</span>        <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> rect = <a class="code hl_class" href="class_t_rect_t.html">TRectD</a>(<a class="code hl_class" href="class_t_point_t.html">TPointD</a>(m_topRasterPos.x, m_topRasterPos.y),</div>
<div class="line"><span class="lineno">  558</span>                             <a class="code hl_class" href="class_t_dimension_t.html">TDimensionD</a>(20 * devPixRatio, 20 * devPixRatio));</div>
<div class="line"><span class="lineno">  559</span>        <span class="keywordflow">if</span> (rect.contains(<a class="code hl_class" href="class_t_point_t.html">TPointD</a>(curPos.x(), curPos.y())))</div>
<div class="line"><span class="lineno">  560</span>          m_current3DDevice = TOP_3D;</div>
<div class="line"><span class="lineno">  561</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  562</span>          rect = <a class="code hl_class" href="class_t_rect_t.html">TRectD</a>(<a class="code hl_class" href="class_t_point_t.html">TPointD</a>(m_sideRasterPos.x, m_sideRasterPos.y),</div>
<div class="line"><span class="lineno">  563</span>                        <a class="code hl_class" href="class_t_dimension_t.html">TDimensionD</a>(20 * devPixRatio, 20 * devPixRatio));</div>
<div class="line"><span class="lineno">  564</span>          <span class="keywordflow">if</span> (rect.contains(<a class="code hl_class" href="class_t_point_t.html">TPointD</a>(curPos.x(), curPos.y()))) {</div>
<div class="line"><span class="lineno">  565</span>            <span class="keywordflow">if</span> (m_phi3D &gt; 0)</div>
<div class="line"><span class="lineno">  566</span>              m_current3DDevice = SIDE_RIGHT_3D;</div>
<div class="line"><span class="lineno">  567</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  568</span>              m_current3DDevice = SIDE_LEFT_3D;</div>
<div class="line"><span class="lineno">  569</span>          } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  570</span>            m_current3DDevice = NONE;</div>
<div class="line"><span class="lineno">  571</span>        }</div>
<div class="line"><span class="lineno">  572</span>        <span class="keywordflow">if</span> (m_current3DDevice != NONE) {</div>
<div class="line"><span class="lineno">  573</span>          cursorSet = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  574</span>          setToolCursor(<span class="keyword">this</span>, ToolCursor::CURSOR_ARROW);</div>
<div class="line"><span class="lineno">  575</span>        }</div>
<div class="line"><span class="lineno">  576</span>      }</div>
<div class="line"><span class="lineno">  577</span>    }</div>
<div class="line"><span class="lineno">  578</span> </div>
<div class="line"><span class="lineno">  579</span>    <span class="comment">// if the middle mouse button is pressed while dragging, then do panning</span></div>
<div class="line"><span class="lineno">  580</span>    <span class="keywordflow">if</span> (event.buttons() &amp; Qt::MidButton) {</div>
<div class="line"><span class="lineno">  581</span>      <span class="comment">// panning</span></div>
<div class="line"><span class="lineno">  582</span>      QPointF p = curPos - m_pos;</div>
<div class="line"><span class="lineno">  583</span>      <span class="keywordflow">if</span> (m_pos == QPointF() &amp;&amp; p.manhattanLength() &gt; 300) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  584</span>      panQt(curPos - m_pos);</div>
<div class="line"><span class="lineno">  585</span>      m_pos = curPos;</div>
<div class="line"><span class="lineno">  586</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  587</span>    }</div>
<div class="line"><span class="lineno">  588</span> </div>
<div class="line"><span class="lineno">  589</span>    <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno">  590</span>    <span class="keywordflow">if</span> (!tool || !tool-&gt;isEnabled()) {</div>
<div class="line"><span class="lineno">  591</span>      m_tabletEvent = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  592</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  593</span>    }</div>
<div class="line"><span class="lineno">  594</span>    tool-&gt;setViewer(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  595</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> worldPos = winToWorld(curPos);</div>
<div class="line"><span class="lineno">  596</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> pos      = tool-&gt;getMatrix().<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>() * worldPos;</div>
<div class="line"><span class="lineno">  597</span> </div>
<div class="line"><span class="lineno">  598</span><span class="preprocessor">#ifdef WITH_CANON</span></div>
<div class="line"><span class="lineno">  599</span>    <span class="comment">// grab screen picking for stop motion live view zoom</span></div>
<div class="line"><span class="lineno">  600</span>    <span class="keywordflow">if</span> ((event.buttons() &amp; Qt::LeftButton) &amp;&amp;</div>
<div class="line"><span class="lineno">  601</span>        StopMotion::instance()-&gt;m_canon-&gt;m_pickLiveViewZoom) {</div>
<div class="line"><span class="lineno">  602</span>      StopMotion::instance()-&gt;m_canon-&gt;makeZoomPoint(pos);</div>
<div class="line"><span class="lineno">  603</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  604</span>    }</div>
<div class="line"><span class="lineno">  605</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  606</span> </div>
<div class="line"><span class="lineno">  607</span>    <span class="keywordflow">if</span> (m_locator) {</div>
<div class="line"><span class="lineno">  608</span>      m_locator-&gt;onChangeViewAff(worldPos);</div>
<div class="line"><span class="lineno">  609</span>    }</div>
<div class="line"><span class="lineno">  610</span> </div>
<div class="line"><span class="lineno">  611</span>    <a class="code hl_class" href="class_t_object_handle.html">TObjectHandle</a> *objHandle = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a0d91c122eec2b756b7c4780014e49f9e">getCurrentObject</a>();</div>
<div class="line"><span class="lineno">  612</span>    <span class="keywordflow">if</span> (tool-&gt;getToolType() &amp; TTool::LevelTool &amp;&amp; !objHandle-&gt;isSpline()) {</div>
<div class="line"><span class="lineno">  613</span>      pos.x /= m_dpiScale.x;</div>
<div class="line"><span class="lineno">  614</span>      pos.y /= m_dpiScale.y;</div>
<div class="line"><span class="lineno">  615</span>    }</div>
<div class="line"><span class="lineno">  616</span> </div>
<div class="line"><span class="lineno">  617</span>    <span class="comment">// qDebug() &lt;&lt; &quot;mouseMoveEvent. &quot;  &lt;&lt; (m_tabletEvent?&quot;tablet&quot;:&quot;mouse&quot;)</span></div>
<div class="line"><span class="lineno">  618</span>    <span class="comment">//         &lt;&lt; &quot; pressure=&quot; &lt;&lt; m_pressure &lt;&lt; &quot; mouseButton=&quot; &lt;&lt; m_mouseButton</span></div>
<div class="line"><span class="lineno">  619</span>    <span class="comment">//         &lt;&lt; &quot; buttonClicked=&quot; &lt;&lt; m_buttonClicked;</span></div>
<div class="line"><span class="lineno">  620</span> </div>
<div class="line"><span class="lineno">  621</span>    <span class="comment">// separate tablet events from mouse events</span></div>
<div class="line"><span class="lineno">  622</span>    <span class="keywordflow">if</span> (m_tabletEvent &amp;&amp;</div>
<div class="line"><span class="lineno">  623</span>        (m_tabletState == OnStroke || m_tabletState == StartStroke) &amp;&amp;</div>
<div class="line"><span class="lineno">  624</span>        m_tabletMove) {</div>
<div class="line"><span class="lineno">  625</span>      <span class="keywordflow">if</span> (m_toolSwitched) tool-&gt;leftButtonDown(pos, event);</div>
<div class="line"><span class="lineno">  626</span>      tool-&gt;leftButtonDrag(pos, event);</div>
<div class="line"><span class="lineno">  627</span>      m_tabletState = OnStroke;</div>
<div class="line"><span class="lineno">  628</span>    }</div>
<div class="line"><span class="lineno">  629</span> </div>
<div class="line"><span class="lineno">  630</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_mouseButton == Qt::LeftButton) {</div>
<div class="line"><span class="lineno">  631</span>      <span class="comment">// sometimes the mousePressedEvent is postponed to a wrong  mouse move</span></div>
<div class="line"><span class="lineno">  632</span>      <span class="comment">// event!</span></div>
<div class="line"><span class="lineno">  633</span>      <span class="comment">//      if (m_buttonClicked &amp;&amp; !m_toolSwitched) tool-&gt;leftButtonDrag(pos,</span></div>
<div class="line"><span class="lineno">  634</span>      <span class="comment">//      event);</span></div>
<div class="line"><span class="lineno">  635</span>      <span class="keywordflow">if</span> (m_toolSwitched) tool-&gt;leftButtonDown(pos, event);</div>
<div class="line"><span class="lineno">  636</span>      tool-&gt;leftButtonDrag(pos, event);</div>
<div class="line"><span class="lineno">  637</span>      m_mouseState = OnStroke;</div>
<div class="line"><span class="lineno">  638</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_pressure == 0.0) {</div>
<div class="line"><span class="lineno">  639</span>      tool-&gt;mouseMove(pos, event);</div>
<div class="line"><span class="lineno">  640</span>    }</div>
<div class="line"><span class="lineno">  641</span>    <span class="keywordflow">if</span> (!cursorSet) setToolCursor(<span class="keyword">this</span>, tool-&gt;<a class="code hl_function" href="class_t_tool.html#a1768a57b8b6d1480618fd923fad15f1d">getCursorId</a>());</div>
<div class="line"><span class="lineno">  642</span> </div>
<div class="line"><span class="lineno">  643</span><span class="preprocessor">#ifdef WITH_CANON</span></div>
<div class="line"><span class="lineno">  644</span>    <span class="keywordflow">if</span> (StopMotion::instance()-&gt;m_canon-&gt;m_pickLiveViewZoom)</div>
<div class="line"><span class="lineno">  645</span>      setToolCursor(<span class="keyword">this</span>, ToolCursor::ZoomCursor);</div>
<div class="line"><span class="lineno">  646</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  647</span>    m_pos          = curPos;</div>
<div class="line"><span class="lineno">  648</span>    m_tabletMove   = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  649</span>    m_toolSwitched = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  650</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_mouseButton == Qt::MidButton) {</div>
<div class="line"><span class="lineno">  651</span>    <span class="keywordflow">if</span> ((event.buttons() &amp; Qt::MidButton) == 0) m_mouseButton = Qt::NoButton;</div>
<div class="line"><span class="lineno">  652</span>    <span class="comment">// scrub with shift and middle click</span></div>
<div class="line"><span class="lineno">  653</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event.isShiftPressed() &amp;&amp; event.isCtrlPressed()) {</div>
<div class="line"><span class="lineno">  654</span>      <span class="keywordflow">if</span> (curPos.x() &gt; m_pos.x()) {</div>
<div class="line"><span class="lineno">  655</span>        CommandManager::instance()-&gt;execute(<span class="stringliteral">&quot;MI_NextFrame&quot;</span>);</div>
<div class="line"><span class="lineno">  656</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (curPos.x() &lt; m_pos.x()) {</div>
<div class="line"><span class="lineno">  657</span>        CommandManager::instance()-&gt;execute(<span class="stringliteral">&quot;MI_PrevFrame&quot;</span>);</div>
<div class="line"><span class="lineno">  658</span>      }</div>
<div class="line"><span class="lineno">  659</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  660</span>      <span class="comment">// panning</span></div>
<div class="line"><span class="lineno">  661</span>      panQt(curPos - m_pos);</div>
<div class="line"><span class="lineno">  662</span>    }</div>
<div class="line"><span class="lineno">  663</span>    m_pos = curPos;</div>
<div class="line"><span class="lineno">  664</span> </div>
<div class="line"><span class="lineno">  665</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  666</span>  }</div>
<div class="line"><span class="lineno">  667</span>}</div>
<div class="ttc" id="aclass_image_painter_1_1_compare_settings_html_a3458a525867577308cefaf2d33f6639b"><div class="ttname"><a href="class_image_painter_1_1_compare_settings.html#a3458a525867577308cefaf2d33f6639b">ImagePainter::CompareSettings::m_dragCompareY</a></div><div class="ttdeci">bool m_dragCompareY</div><div class="ttdoc">Used to change compared image height.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:91</div></div>
<div class="ttc" id="aclass_image_painter_1_1_compare_settings_html_a5c7c87c21fafb25dc1ba31ac6574397f"><div class="ttname"><a href="class_image_painter_1_1_compare_settings.html#a5c7c87c21fafb25dc1ba31ac6574397f">ImagePainter::CompareSettings::m_dragCompareX</a></div><div class="ttdeci">bool m_dragCompareX</div><div class="ttdoc">Used to change compared image width.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:89</div></div>
<div class="ttc" id="aclass_image_painter_1_1_compare_settings_html_ac544bac665ef86ee2ef3cfc214e89430"><div class="ttname"><a href="class_image_painter_1_1_compare_settings.html#ac544bac665ef86ee2ef3cfc214e89430">ImagePainter::CompareSettings::m_compareX</a></div><div class="ttdeci">double m_compareX</div><div class="ttdoc">Used to set compared image width.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:84</div></div>
<div class="ttc" id="aclass_image_painter_1_1_compare_settings_html_aef7ad2a36c8fe81f397f225df3fc1095"><div class="ttname"><a href="class_image_painter_1_1_compare_settings.html#aef7ad2a36c8fe81f397f225df3fc1095">ImagePainter::CompareSettings::m_compareY</a></div><div class="ttdeci">double m_compareY</div><div class="ttdoc">Used to set compared image height.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:86</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4e8e688d6369e5fb243a853e9d91ce53" name="a4e8e688d6369e5fb243a853e9d91ce53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e8e688d6369e5fb243a853e9d91ce53">&#9670;&nbsp;</a></span>onObjectSwitched</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onObjectSwitched </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2882</span>                                   {</div>
<div class="line"><span class="lineno"> 2883</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 2884</span>  <span class="keywordflow">if</span> (tool &amp;&amp; tool-&gt;isEnabled()) tool-&gt;<a class="code hl_function" href="class_t_tool.html#a1a5f380464a6b36947212e2f8d5b314c">updateMatrix</a>();</div>
<div class="line"><span class="lineno"> 2885</span>  onLevelChanged();</div>
<div class="line"><span class="lineno"> 2886</span>  <a class="code hl_function" href="class_scene_viewer.html#ab96170500b3df72aa36a3deb5f69cc11">GLInvalidateAll</a>();</div>
<div class="line"><span class="lineno"> 2887</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a034053ccfdd1dc475139a0c119e2f07a" name="a034053ccfdd1dc475139a0c119e2f07a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a034053ccfdd1dc475139a0c119e2f07a">&#9670;&nbsp;</a></span>onOnionSkinMaskChanged</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onOnionSkinMaskChanged </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  437</span>{ <a class="code hl_function" href="class_scene_viewer.html#ab96170500b3df72aa36a3deb5f69cc11">GLInvalidateAll</a>(); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a747bce47ff0499a9dd5a6043ca83fb1a" name="a747bce47ff0499a9dd5a6043ca83fb1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a747bce47ff0499a9dd5a6043ca83fb1a">&#9670;&nbsp;</a></span>onPreferenceChanged</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onPreferenceChanged </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>prefName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1204</span>                                                             {</div>
<div class="line"><span class="lineno"> 1205</span>  <span class="keywordflow">if</span> (prefName == <span class="stringliteral">&quot;ColorCalibration&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1206</span>    <span class="keywordflow">if</span> (Preferences::instance()-&gt;isColorCalibrationEnabled()) {</div>
<div class="line"><span class="lineno"> 1207</span>      <span class="comment">// if the window is so shriked that the gl widget is empty,</span></div>
<div class="line"><span class="lineno"> 1208</span>      <span class="comment">// showEvent can be called before creating the context.</span></div>
<div class="line"><span class="lineno"> 1209</span>      <span class="keywordflow">if</span> (!context()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1210</span>      makeCurrent();</div>
<div class="line"><span class="lineno"> 1211</span>      <span class="keywordflow">if</span> (!m_lutCalibrator)</div>
<div class="line"><span class="lineno"> 1212</span>        m_lutCalibrator = <span class="keyword">new</span> <a class="code hl_class" href="class_lut_calibrator.html">LutCalibrator</a>();</div>
<div class="line"><span class="lineno"> 1213</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1214</span>        m_lutCalibrator-&gt;cleanup();</div>
<div class="line"><span class="lineno"> 1215</span>      m_lutCalibrator-&gt;initialize();</div>
<div class="line"><span class="lineno"> 1216</span>      connect(context(), SIGNAL(aboutToBeDestroyed()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 1217</span>              SLOT(onContextAboutToBeDestroyed()));</div>
<div class="line"><span class="lineno"> 1218</span>      <span class="keywordflow">if</span> (m_lutCalibrator-&gt;isValid() &amp;&amp; !m_fbo) {</div>
<div class="line"><span class="lineno"> 1219</span>        <span class="keywordflow">if</span> (Preferences::instance()-&gt;is30bitDisplayEnabled()) {</div>
<div class="line"><span class="lineno"> 1220</span>          QOpenGLFramebufferObjectFormat format;</div>
<div class="line"><span class="lineno"> 1221</span>          format.setInternalTextureFormat(TGL_TexFmt10);</div>
<div class="line"><span class="lineno"> 1222</span>          m_fbo = <span class="keyword">new</span> QOpenGLFramebufferObject(width(), height(), format);</div>
<div class="line"><span class="lineno"> 1223</span>        } <span class="keywordflow">else</span>  <span class="comment">// normally, initialize with GL_RGBA8 format</span></div>
<div class="line"><span class="lineno"> 1224</span>          m_fbo = <span class="keyword">new</span> QOpenGLFramebufferObject(width(), height());</div>
<div class="line"><span class="lineno"> 1225</span>      }</div>
<div class="line"><span class="lineno"> 1226</span>      doneCurrent();</div>
<div class="line"><span class="lineno"> 1227</span>    }</div>
<div class="line"><span class="lineno"> 1228</span>    update();</div>
<div class="line"><span class="lineno"> 1229</span>  }</div>
<div class="line"><span class="lineno"> 1230</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a815593940281a159efb32f5db1a10276" name="a815593940281a159efb32f5db1a10276"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a815593940281a159efb32f5db1a10276">&#9670;&nbsp;</a></span>onPress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onPress </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_mouse_event.html">TMouseEvent</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  697</span>                                                  {</div>
<div class="line"><span class="lineno">  698</span>  <span class="keywordflow">if</span> (m_mouseButton != Qt::NoButton) {</div>
<div class="line"><span class="lineno">  699</span>    <span class="keywordflow">if</span> (event.m_isTablet &amp;&amp; m_mouseState != None) {</div>
<div class="line"><span class="lineno">  700</span>      <span class="comment">//      qDebug() &lt;&lt; &quot;[onPress] Switched from MousePress to TabletPress&quot;;</span></div>
<div class="line"><span class="lineno">  701</span>      <span class="comment">// TabletPress came immediately after MousePress. Let&#39;s switch to</span></div>
<div class="line"><span class="lineno">  702</span>      <span class="comment">// tabletPress but not end the prior action or it leaves an extra</span></div>
<div class="line"><span class="lineno">  703</span>      <span class="comment">// stroke</span></div>
<div class="line"><span class="lineno">  704</span>      m_mouseState    = None;</div>
<div class="line"><span class="lineno">  705</span>      m_buttonClicked = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  706</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  707</span>      <span class="comment">// if some button is pressed while another button being active,</span></div>
<div class="line"><span class="lineno">  708</span>      <span class="comment">// finish the action for the previous button first.</span></div>
<div class="line"><span class="lineno">  709</span>      <a class="code hl_class" href="class_t_mouse_event.html">TMouseEvent</a> preEvent = event;</div>
<div class="line"><span class="lineno">  710</span>      preEvent.m_button    = m_mouseButton;</div>
<div class="line"><span class="lineno">  711</span>      onRelease(preEvent);</div>
<div class="line"><span class="lineno">  712</span>    }</div>
<div class="line"><span class="lineno">  713</span>  }</div>
<div class="line"><span class="lineno">  714</span> </div>
<div class="line"><span class="lineno">  715</span>  <span class="comment">// evita i press ripetuti</span></div>
<div class="line"><span class="lineno">  716</span>  <span class="keywordflow">if</span> (m_buttonClicked) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  717</span>  m_buttonClicked = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  718</span>  m_toolSwitched  = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  719</span>  <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  720</span> </div>
<div class="line"><span class="lineno">  721</span>  m_pos         = <span class="keyword">event</span>.mousePos() * getDevPixRatio();</div>
<div class="line"><span class="lineno">  722</span>  m_mouseButton = <span class="keyword">event</span>.button();</div>
<div class="line"><span class="lineno">  723</span> </div>
<div class="line"><span class="lineno">  724</span>  <span class="comment">// when using tablet, avoid unexpected drawing behavior occurs when</span></div>
<div class="line"><span class="lineno">  725</span>  <span class="comment">// middle-click</span></div>
<div class="line"><span class="lineno">  726</span>  <span class="keywordflow">if</span> (m_tabletEvent &amp;&amp; m_mouseButton == Qt::MidButton &amp;&amp;</div>
<div class="line"><span class="lineno">  727</span>      event.isLeftButtonPressed()) {</div>
<div class="line"><span class="lineno">  728</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  729</span>  }</div>
<div class="line"><span class="lineno">  730</span> </div>
<div class="line"><span class="lineno">  731</span>  <span class="keywordflow">if</span> (is3DView() &amp;&amp; m_current3DDevice != NONE &amp;&amp;</div>
<div class="line"><span class="lineno">  732</span>      m_mouseButton == Qt::LeftButton)</div>
<div class="line"><span class="lineno">  733</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  734</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_mouseButton == Qt::LeftButton &amp;&amp; m_editPreviewSubCamera) {</div>
<div class="line"><span class="lineno">  735</span>    <span class="keywordflow">if</span> (!PreviewSubCameraManager::instance()-&gt;mousePressEvent(<span class="keyword">this</span>, event))</div>
<div class="line"><span class="lineno">  736</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  737</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_mouseButton == Qt::LeftButton &amp;&amp; <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#af46b586bd61bf70e606713bee68c3aad">m_doCompare</a>) {</div>
<div class="line"><span class="lineno">  738</span>    <span class="keywordflow">if</span> (std::abs(m_pos.x() - width() * m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#ac544bac665ef86ee2ef3cfc214e89430">m_compareX</a>) &lt; 20) {</div>
<div class="line"><span class="lineno">  739</span>      m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a5c7c87c21fafb25dc1ba31ac6574397f">m_dragCompareX</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  740</span>      m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a3458a525867577308cefaf2d33f6639b">m_dragCompareY</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  741</span>      m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#aef7ad2a36c8fe81f397f225df3fc1095">m_compareY</a>     = ImagePainter::DefaultCompareValue;</div>
<div class="line"><span class="lineno">  742</span>      update();</div>
<div class="line"><span class="lineno">  743</span>      m_tabletEvent = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  744</span>      m_tabletState = None;</div>
<div class="line"><span class="lineno">  745</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  746</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (std::abs((height() - m_pos.y()) -</div>
<div class="line"><span class="lineno">  747</span>                        height() * m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#aef7ad2a36c8fe81f397f225df3fc1095">m_compareY</a>) &lt; 20) {</div>
<div class="line"><span class="lineno">  748</span>      m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a3458a525867577308cefaf2d33f6639b">m_dragCompareY</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  749</span>      m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a5c7c87c21fafb25dc1ba31ac6574397f">m_dragCompareX</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  750</span>      m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#ac544bac665ef86ee2ef3cfc214e89430">m_compareX</a>     = ImagePainter::DefaultCompareValue;</div>
<div class="line"><span class="lineno">  751</span>      update();</div>
<div class="line"><span class="lineno">  752</span>      m_tabletEvent = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  753</span>      m_tabletState = None;</div>
<div class="line"><span class="lineno">  754</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  755</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  756</span>      m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a5c7c87c21fafb25dc1ba31ac6574397f">m_dragCompareX</a> = m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a3458a525867577308cefaf2d33f6639b">m_dragCompareY</a> =</div>
<div class="line"><span class="lineno">  757</span>          <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  758</span>  }</div>
<div class="line"><span class="lineno">  759</span> </div>
<div class="line"><span class="lineno">  760</span>  <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  761</span> </div>
<div class="line"><span class="lineno">  762</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno">  763</span>  <span class="keywordflow">if</span> (!tool || !tool-&gt;isEnabled()) {</div>
<div class="line"><span class="lineno">  764</span>    m_tabletEvent = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  765</span>    m_tabletState = None;</div>
<div class="line"><span class="lineno">  766</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  767</span>  }</div>
<div class="line"><span class="lineno">  768</span>  tool-&gt;setViewer(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  769</span>  <span class="keywordflow">if</span> (m_mouseButton == Qt::LeftButton &amp;&amp; tool-&gt;<a class="code hl_function" href="class_t_tool.html#a11d2c27110689caf7fa6f49519808073">preLeftButtonDown</a>()) {</div>
<div class="line"><span class="lineno">  770</span>    tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno">  771</span>    <span class="keywordflow">if</span> (!tool || !tool-&gt;isEnabled()) {</div>
<div class="line"><span class="lineno">  772</span>      m_tabletEvent = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  773</span>      m_tabletState = None;</div>
<div class="line"><span class="lineno">  774</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  775</span>    }</div>
<div class="line"><span class="lineno">  776</span>    tool-&gt;setViewer(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  777</span>  }</div>
<div class="line"><span class="lineno">  778</span> </div>
<div class="line"><span class="lineno">  779</span>  <span class="comment">// if(!m_tabletEvent) qDebug() &lt;&lt; &quot;-----------------MOUSE PRESS &#39;PURO&#39;.</span></div>
<div class="line"><span class="lineno">  780</span>  <span class="comment">// POSSIBILE EMBOLO&quot;;</span></div>
<div class="line"><span class="lineno">  781</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> pos = tool-&gt;getMatrix().<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>() * winToWorld(m_pos);</div>
<div class="line"><span class="lineno">  782</span> </div>
<div class="line"><span class="lineno">  783</span>  <a class="code hl_class" href="class_t_object_handle.html">TObjectHandle</a> *objHandle = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a0d91c122eec2b756b7c4780014e49f9e">getCurrentObject</a>();</div>
<div class="line"><span class="lineno">  784</span>  <span class="keywordflow">if</span> (tool-&gt;getToolType() &amp; TTool::LevelTool &amp;&amp; !objHandle-&gt;isSpline()) {</div>
<div class="line"><span class="lineno">  785</span>    pos.x /= m_dpiScale.x;</div>
<div class="line"><span class="lineno">  786</span>    pos.y /= m_dpiScale.y;</div>
<div class="line"><span class="lineno">  787</span>  }</div>
<div class="line"><span class="lineno">  788</span> </div>
<div class="line"><span class="lineno">  789</span><span class="preprocessor">#ifdef WITH_CANON</span></div>
<div class="line"><span class="lineno">  790</span>  <span class="comment">// grab screen picking for stop motion live view zoom</span></div>
<div class="line"><span class="lineno">  791</span>  <span class="keywordflow">if</span> (StopMotion::instance()-&gt;m_canon-&gt;m_pickLiveViewZoom) {</div>
<div class="line"><span class="lineno">  792</span>    StopMotion::instance()-&gt;m_canon-&gt;makeZoomPoint(pos);</div>
<div class="line"><span class="lineno">  793</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  794</span>  }</div>
<div class="line"><span class="lineno">  795</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  796</span> </div>
<div class="line"><span class="lineno">  797</span>  <span class="comment">// separate tablet and mouse events</span></div>
<div class="line"><span class="lineno">  798</span>  <span class="keywordflow">if</span> (m_tabletEvent &amp;&amp; m_tabletState == Touched) {</div>
<div class="line"><span class="lineno">  799</span>    <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;setToolBusy(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  800</span>    m_tabletState = StartStroke;</div>
<div class="line"><span class="lineno">  801</span>    tool-&gt;leftButtonDown(pos, event);</div>
<div class="line"><span class="lineno">  802</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_mouseButton == Qt::LeftButton) {</div>
<div class="line"><span class="lineno">  803</span>    m_mouseState = StartStroke;</div>
<div class="line"><span class="lineno">  804</span>    <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;setToolBusy(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  805</span>    tool-&gt;leftButtonDown(pos, event);</div>
<div class="line"><span class="lineno">  806</span>  }</div>
<div class="line"><span class="lineno">  807</span>  <span class="keywordflow">if</span> (m_mouseButton == Qt::RightButton) tool-&gt;rightButtonDown(pos, event);</div>
<div class="line"><span class="lineno">  808</span>}</div>
<div class="ttc" id="aclass_t_tool_html_a11d2c27110689caf7fa6f49519808073"><div class="ttname"><a href="class_t_tool.html#a11d2c27110689caf7fa6f49519808073">TTool::preLeftButtonDown</a></div><div class="ttdeci">virtual bool preLeftButtonDown()</div><div class="ttdef"><b>Definition:</b> tool.h:384</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9cea138440514d78c2580d09f0ebe518" name="a9cea138440514d78c2580d09f0ebe518"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cea138440514d78c2580d09f0ebe518">&#9670;&nbsp;</a></span>onPreviewUpdate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onPreviewUpdate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="class_previewer_1_1_listener.html">Previewer::Listener</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  889</span>                                  {</div>
<div class="line"><span class="lineno">  890</span>  update();</div>
<div class="line"><span class="lineno">  891</span>  emit previewStatusChanged();</div>
<div class="line"><span class="lineno">  892</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a51cdfd5bdc5782706c1c319888b42d4f" name="a51cdfd5bdc5782706c1c319888b42d4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51cdfd5bdc5782706c1c319888b42d4f">&#9670;&nbsp;</a></span>onRelease()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onRelease </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_mouse_event.html">TMouseEvent</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  840</span>                                                    {</div>
<div class="line"><span class="lineno">  841</span>  <span class="comment">// evita i release ripetuti</span></div>
<div class="line"><span class="lineno">  842</span>  <span class="keywordflow">if</span> (!m_buttonClicked) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  843</span>  m_buttonClicked = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  844</span> </div>
<div class="line"><span class="lineno">  845</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno">  846</span>  <span class="keywordflow">if</span> (!tool || !tool-&gt;isEnabled()) {</div>
<div class="line"><span class="lineno">  847</span>    <span class="keywordflow">if</span> (!m_toolDisableReason.isEmpty() &amp;&amp; m_mouseButton == Qt::LeftButton &amp;&amp;</div>
<div class="line"><span class="lineno">  848</span>        !m_editPreviewSubCamera)</div>
<div class="line"><span class="lineno">  849</span>      DVGui::warning(m_toolDisableReason);</div>
<div class="line"><span class="lineno">  850</span>  }</div>
<div class="line"><span class="lineno">  851</span> </div>
<div class="line"><span class="lineno">  852</span>  <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  853</span> </div>
<div class="line"><span class="lineno">  854</span>  <span class="keywordflow">if</span> (m_mouseButton != event.button()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  855</span> </div>
<div class="line"><span class="lineno">  856</span>  <span class="keywordflow">if</span> (m_current3DDevice != NONE) {</div>
<div class="line"><span class="lineno">  857</span>    m_mouseButton = Qt::NoButton;</div>
<div class="line"><span class="lineno">  858</span>    m_tabletEvent = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  859</span>    m_pressure    = 0;</div>
<div class="line"><span class="lineno">  860</span>    <span class="keywordflow">if</span> (m_current3DDevice == SIDE_LEFT_3D)</div>
<div class="line"><span class="lineno">  861</span>      set3DLeftSideView();</div>
<div class="line"><span class="lineno">  862</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_current3DDevice == SIDE_RIGHT_3D)</div>
<div class="line"><span class="lineno">  863</span>      set3DRightSideView();</div>
<div class="line"><span class="lineno">  864</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_current3DDevice == TOP_3D)</div>
<div class="line"><span class="lineno">  865</span>      set3DTopView();</div>
<div class="line"><span class="lineno">  866</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  867</span>  }</div>
<div class="line"><span class="lineno">  868</span> </div>
<div class="line"><span class="lineno">  869</span>  <span class="keywordflow">if</span> (m_mouseButton == Qt::LeftButton &amp;&amp; m_editPreviewSubCamera) {</div>
<div class="line"><span class="lineno">  870</span>    <span class="keywordflow">if</span> (!PreviewSubCameraManager::instance()-&gt;mouseReleaseEvent(<span class="keyword">this</span>))</div>
<div class="line"><span class="lineno">  871</span>      <span class="keywordflow">goto</span> quit;</div>
<div class="line"><span class="lineno">  872</span>  }</div>
<div class="line"><span class="lineno">  873</span> </div>
<div class="line"><span class="lineno">  874</span>  <span class="keywordflow">if</span> (m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a5c7c87c21fafb25dc1ba31ac6574397f">m_dragCompareX</a> || m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a3458a525867577308cefaf2d33f6639b">m_dragCompareY</a>) {</div>
<div class="line"><span class="lineno">  875</span>    m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a5c7c87c21fafb25dc1ba31ac6574397f">m_dragCompareX</a> = m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a3458a525867577308cefaf2d33f6639b">m_dragCompareY</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  876</span>    <span class="keywordflow">goto</span> quit;</div>
<div class="line"><span class="lineno">  877</span>  }</div>
<div class="line"><span class="lineno">  878</span> </div>
<div class="line"><span class="lineno">  879</span>  m_pos = QPointF();</div>
<div class="line"><span class="lineno">  880</span>  <span class="keywordflow">if</span> (!tool || !tool-&gt;isEnabled()) <span class="keywordflow">goto</span> quit;</div>
<div class="line"><span class="lineno">  881</span> </div>
<div class="line"><span class="lineno">  882</span>  tool-&gt;setViewer(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  883</span> </div>
<div class="line"><span class="lineno">  884</span>  {</div>
<div class="line"><span class="lineno">  885</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> pos = tool-&gt;getMatrix().<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>() *</div>
<div class="line"><span class="lineno">  886</span>                  winToWorld(event.mousePos() * getDevPixRatio());</div>
<div class="line"><span class="lineno">  887</span> </div>
<div class="line"><span class="lineno">  888</span>    <a class="code hl_class" href="class_t_object_handle.html">TObjectHandle</a> *objHandle = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a0d91c122eec2b756b7c4780014e49f9e">getCurrentObject</a>();</div>
<div class="line"><span class="lineno">  889</span>    <span class="keywordflow">if</span> (tool-&gt;getToolType() &amp; TTool::LevelTool &amp;&amp; !objHandle-&gt;isSpline()) {</div>
<div class="line"><span class="lineno">  890</span>      pos.x /= m_dpiScale.x;</div>
<div class="line"><span class="lineno">  891</span>      pos.y /= m_dpiScale.y;</div>
<div class="line"><span class="lineno">  892</span>    }</div>
<div class="line"><span class="lineno">  893</span> </div>
<div class="line"><span class="lineno">  894</span>    <span class="keywordflow">if</span> (m_mouseButton == Qt::LeftButton || m_tabletState == Released) {</div>
<div class="line"><span class="lineno">  895</span>      <span class="keywordflow">if</span> (!m_toolSwitched) tool-&gt;leftButtonUp(pos, event);</div>
<div class="line"><span class="lineno">  896</span>      <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;setToolBusy(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  897</span>    }</div>
<div class="line"><span class="lineno">  898</span>  }</div>
<div class="line"><span class="lineno">  899</span> </div>
<div class="line"><span class="lineno">  900</span>quit:</div>
<div class="line"><span class="lineno">  901</span>  m_mouseButton = Qt::NoButton;</div>
<div class="line"><span class="lineno">  902</span>  <span class="comment">// Leave m_tabletEvent as-is in order to check whether the onRelease is called</span></div>
<div class="line"><span class="lineno">  903</span>  <span class="comment">// from tabletEvent or not in mouseReleaseEvent.</span></div>
<div class="line"><span class="lineno">  904</span>  <span class="keywordflow">if</span> (m_tabletState == Released)  <span class="comment">// only clear if tabletRelease event</span></div>
<div class="line"><span class="lineno">  905</span>    m_tabletEvent = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  906</span>  <span class="comment">// If m_tabletState is &quot;Touched&quot;, we&#39;ve been called by tabletPress event.</span></div>
<div class="line"><span class="lineno">  907</span>  <span class="comment">// Don&#39;t clear it out table state so the tablePress event will process</span></div>
<div class="line"><span class="lineno">  908</span>  <span class="comment">// correctly.</span></div>
<div class="line"><span class="lineno">  909</span>  <span class="keywordflow">if</span> (m_tabletState != Touched) m_tabletState = None;</div>
<div class="line"><span class="lineno">  910</span>  m_mouseState = None;</div>
<div class="line"><span class="lineno">  911</span>  m_tabletMove = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  912</span>  m_pressure   = 0;</div>
<div class="line"><span class="lineno">  913</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abd3362a77941869edd9ada55709279ad" name="abd3362a77941869edd9ada55709279ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd3362a77941869edd9ada55709279ad">&#9670;&nbsp;</a></span>onRenderCompleted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onRenderCompleted </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="class_previewer_1_1_listener.html">Previewer::Listener</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  882</span>                                             {</div>
<div class="line"><span class="lineno">  883</span>  <a class="code hl_function" href="class_scene_viewer.html#a9865bf9cec6524de9d751f34702aab0f">invalidateAll</a>();</div>
<div class="line"><span class="lineno">  884</span>  emit previewStatusChanged();</div>
<div class="line"><span class="lineno">  885</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a779d8af0ab00573fb2a3dd925cc2d546" name="a779d8af0ab00573fb2a3dd925cc2d546"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a779d8af0ab00573fb2a3dd925cc2d546">&#9670;&nbsp;</a></span>onRenderStarted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onRenderStarted </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="class_previewer_1_1_listener.html">Previewer::Listener</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  878</span>{ emit previewStatusChanged(); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d328a1e864429727d539adb0549ce94" name="a5d328a1e864429727d539adb0549ce94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d328a1e864429727d539adb0549ce94">&#9670;&nbsp;</a></span>onSceneChanged</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onSceneChanged </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2891</span>                                 {</div>
<div class="line"><span class="lineno"> 2892</span>  onLevelChanged();</div>
<div class="line"><span class="lineno"> 2893</span>  <a class="code hl_function" href="class_scene_viewer.html#ab96170500b3df72aa36a3deb5f69cc11">GLInvalidateAll</a>();</div>
<div class="line"><span class="lineno"> 2894</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a950ace4dc4b0afb962fb4884a107d00a" name="a950ace4dc4b0afb962fb4884a107d00a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a950ace4dc4b0afb962fb4884a107d00a">&#9670;&nbsp;</a></span>onToolChanged</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onToolChanged </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >when tool options are changed, update tooltip immediately </p>
<div class="fragment"><div class="line"><span class="lineno"> 2914</span>                                {</div>
<div class="line"><span class="lineno"> 2915</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 2916</span>  <span class="keywordflow">if</span> (tool) setToolCursor(<span class="keyword">this</span>, tool-&gt;<a class="code hl_function" href="class_t_tool.html#a1768a57b8b6d1480618fd923fad15f1d">getCursorId</a>());</div>
<div class="line"><span class="lineno"> 2917</span>  <a class="code hl_function" href="class_scene_viewer.html#ab96170500b3df72aa36a3deb5f69cc11">GLInvalidateAll</a>();</div>
<div class="line"><span class="lineno"> 2918</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00126">TApp::getCurrentTool()</a>, <a class="el" href="#l00438">TTool::getCursorId()</a>, <a class="el" href="#l02269">GLInvalidateAll()</a>, and <a class="el" href="#l00215">TApp::instance()</a>.</p>

</div>
</div>
<a id="a4dbd9c2f6053b706f1ee02c8d3d3ed4d" name="a4dbd9c2f6053b706f1ee02c8d3d3ed4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dbd9c2f6053b706f1ee02c8d3d3ed4d">&#9670;&nbsp;</a></span>onToolSwitched</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onToolSwitched </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1750</span>                                 {</div>
<div class="line"><span class="lineno"> 1751</span>  m_forceGlFlush = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1752</span>  m_toolSwitched = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1753</span>  <a class="code hl_function" href="class_scene_viewer.html#a51e41da45c96d39493ac2753b89d5407">invalidateToolStatus</a>();</div>
<div class="line"><span class="lineno"> 1754</span> </div>
<div class="line"><span class="lineno"> 1755</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 1756</span>  <span class="keywordflow">if</span> (tool) {</div>
<div class="line"><span class="lineno"> 1757</span>    tool-&gt;<a class="code hl_function" href="class_t_tool.html#a1a5f380464a6b36947212e2f8d5b314c">updateMatrix</a>();</div>
<div class="line"><span class="lineno"> 1758</span>    <span class="keywordflow">if</span> (tool-&gt;getViewer()) tool-&gt;getViewer()-&gt;setGuidedStrokePickerMode(0);</div>
<div class="line"><span class="lineno"> 1759</span>  }</div>
<div class="line"><span class="lineno"> 1760</span> </div>
<div class="line"><span class="lineno"> 1761</span>  onLevelChanged();</div>
<div class="line"><span class="lineno"> 1762</span>  update();</div>
<div class="line"><span class="lineno"> 1763</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aead4b11fab3fec8993abc0679820b948" name="aead4b11fab3fec8993abc0679820b948"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aead4b11fab3fec8993abc0679820b948">&#9670;&nbsp;</a></span>onXsheetChanged</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::onXsheetChanged </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2872</span>                                  {</div>
<div class="line"><span class="lineno"> 2873</span>  m_forceGlFlush = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2874</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool    = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 2875</span>  <span class="keywordflow">if</span> (tool &amp;&amp; tool-&gt;isEnabled()) tool-&gt;<a class="code hl_function" href="class_t_tool.html#a1a5f380464a6b36947212e2f8d5b314c">updateMatrix</a>();</div>
<div class="line"><span class="lineno"> 2876</span>  onLevelChanged();</div>
<div class="line"><span class="lineno"> 2877</span>  <a class="code hl_function" href="class_scene_viewer.html#ab96170500b3df72aa36a3deb5f69cc11">GLInvalidateAll</a>();</div>
<div class="line"><span class="lineno"> 2878</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa02c109040f40886e29f8e8c89725d91" name="aa02c109040f40886e29f8e8c89725d91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa02c109040f40886e29f8e8c89725d91">&#9670;&nbsp;</a></span>paintGL()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::paintGL </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1842</span>                          {</div>
<div class="line"><span class="lineno"> 1843</span><span class="preprocessor">#ifdef _DEBUG</span></div>
<div class="line"><span class="lineno"> 1844</span>  <span class="keywordflow">if</span> (!check_framebuffer_status()) {</div>
<div class="line"><span class="lineno"> 1845</span>    <span class="comment">/* QGLWidget  widget /(platform ?)</span></div>
<div class="line"><span class="lineno"> 1846</span><span class="comment">     * GL_FRAMEBUFFER_UNDEFINED  paintGL()  */</span></div>
<div class="line"><span class="lineno"> 1847</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1848</span>  }</div>
<div class="line"><span class="lineno"> 1849</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1850</span><span class="preprocessor">#ifdef MACOSX</span></div>
<div class="line"><span class="lineno"> 1851</span>  <span class="comment">// following lines are necessary to solve a problem on iMac20</span></div>
<div class="line"><span class="lineno"> 1852</span>  <span class="comment">// It seems that for some errors in the openGl implementation, buffers are not</span></div>
<div class="line"><span class="lineno"> 1853</span>  <span class="comment">// set correctly.</span></div>
<div class="line"><span class="lineno"> 1854</span>  <span class="keywordflow">if</span> (m_isMouseEntered &amp;&amp; m_forceGlFlush) {</div>
<div class="line"><span class="lineno"> 1855</span>    m_isMouseEntered = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1856</span>    m_forceGlFlush   = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1857</span>    glDrawBuffer(GL_FRONT);</div>
<div class="line"><span class="lineno"> 1858</span>    glFlush();</div>
<div class="line"><span class="lineno"> 1859</span>    glDrawBuffer(GL_BACK);</div>
<div class="line"><span class="lineno"> 1860</span>  }</div>
<div class="line"><span class="lineno"> 1861</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1862</span> </div>
<div class="line"><span class="lineno"> 1863</span><span class="preprocessor">#ifdef FPS_HISTOGRAM</span></div>
<div class="line"><span class="lineno"> 1864</span>  QTime time;</div>
<div class="line"><span class="lineno"> 1865</span>  time.start();</div>
<div class="line"><span class="lineno"> 1866</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1867</span> </div>
<div class="line"><span class="lineno"> 1868</span>  <span class="keywordflow">if</span> (!m_isPicking &amp;&amp; m_lutCalibrator &amp;&amp; m_lutCalibrator-&gt;isValid())</div>
<div class="line"><span class="lineno"> 1869</span>    m_fbo-&gt;bind();</div>
<div class="line"><span class="lineno"> 1870</span> </div>
<div class="line"><span class="lineno"> 1871</span>  <span class="keywordflow">if</span> (m_hRuler &amp;&amp; m_vRuler) {</div>
<div class="line"><span class="lineno"> 1872</span>    <span class="keywordflow">if</span> (!viewRulerToggle.getStatus() &amp;&amp;</div>
<div class="line"><span class="lineno"> 1873</span>        (m_hRuler-&gt;isVisible() || m_vRuler-&gt;isVisible())) {</div>
<div class="line"><span class="lineno"> 1874</span>      m_hRuler-&gt;hide();</div>
<div class="line"><span class="lineno"> 1875</span>      m_vRuler-&gt;hide();</div>
<div class="line"><span class="lineno"> 1876</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (viewRulerToggle.getStatus() &amp;&amp;</div>
<div class="line"><span class="lineno"> 1877</span>               (!m_hRuler-&gt;isVisible() || !m_vRuler-&gt;isVisible())) {</div>
<div class="line"><span class="lineno"> 1878</span>      m_hRuler-&gt;show();</div>
<div class="line"><span class="lineno"> 1879</span>      m_vRuler-&gt;show();</div>
<div class="line"><span class="lineno"> 1880</span>    }</div>
<div class="line"><span class="lineno"> 1881</span>  }</div>
<div class="line"><span class="lineno"> 1882</span> </div>
<div class="line"><span class="lineno"> 1883</span>  <span class="comment">// Il freezed e&#39; attivo ed e&#39; in stato &quot;normale&quot;: mostro l&#39;immagine grabbata.</span></div>
<div class="line"><span class="lineno"> 1884</span>  <span class="keywordflow">if</span> (m_freezedStatus == NORMAL_FREEZED) {</div>
<div class="line"><span class="lineno"> 1885</span>    assert(!!m_viewGrabImage);</div>
<div class="line"><span class="lineno"> 1886</span>    m_viewGrabImage-&gt;lock();</div>
<div class="line"><span class="lineno"> 1887</span>    glPushMatrix();</div>
<div class="line"><span class="lineno"> 1888</span>    glLoadIdentity();</div>
<div class="line"><span class="lineno"> 1889</span> </div>
<div class="line"><span class="lineno"> 1890</span>    glRasterPos2d(0, 0);</div>
<div class="line"><span class="lineno"> 1891</span>    glPixelStorei(GL_UNPACK_ROW_LENGTH, 0);</div>
<div class="line"><span class="lineno"> 1892</span> </div>
<div class="line"><span class="lineno"> 1893</span>    glDrawPixels(m_viewGrabImage-&gt;getLx(), m_viewGrabImage-&gt;getLy(), TGL_FMT,</div>
<div class="line"><span class="lineno"> 1894</span>                 TGL_TYPE, m_viewGrabImage-&gt;getRawData());</div>
<div class="line"><span class="lineno"> 1895</span> </div>
<div class="line"><span class="lineno"> 1896</span>    glPopMatrix();</div>
<div class="line"><span class="lineno"> 1897</span>    m_viewGrabImage-&gt;unlock();</div>
<div class="line"><span class="lineno"> 1898</span> </div>
<div class="line"><span class="lineno"> 1899</span>    <span class="keywordflow">if</span> (!m_isPicking &amp;&amp; m_lutCalibrator &amp;&amp; m_lutCalibrator-&gt;isValid())</div>
<div class="line"><span class="lineno"> 1900</span>      m_lutCalibrator-&gt;onEndDraw(m_fbo);</div>
<div class="line"><span class="lineno"> 1901</span> </div>
<div class="line"><span class="lineno"> 1902</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1903</span>  }</div>
<div class="line"><span class="lineno"> 1904</span> </div>
<div class="line"><span class="lineno"> 1905</span>  drawBuildVars();</div>
<div class="line"><span class="lineno"> 1906</span> </div>
<div class="line"><span class="lineno"> 1907</span>  <span class="comment">// This seems not to be necessary for now.</span></div>
<div class="line"><span class="lineno"> 1908</span>  <span class="comment">// copyFrontBufferToBackBuffer();</span></div>
<div class="line"><span class="lineno"> 1909</span> </div>
<div class="line"><span class="lineno"> 1910</span>  drawEnableScissor();</div>
<div class="line"><span class="lineno"> 1911</span>  drawBackground();</div>
<div class="line"><span class="lineno"> 1912</span> </div>
<div class="line"><span class="lineno"> 1913</span>  <span class="keywordflow">if</span> (m_previewMode != FULL_PREVIEW) {</div>
<div class="line"><span class="lineno"> 1914</span>    drawCameraStand();</div>
<div class="line"><span class="lineno"> 1915</span>  }</div>
<div class="line"><span class="lineno"> 1916</span> </div>
<div class="line"><span class="lineno"> 1917</span>  <span class="keywordflow">if</span> (isPreviewEnabled()) drawPreview();</div>
<div class="line"><span class="lineno"> 1918</span> </div>
<div class="line"><span class="lineno"> 1919</span>  <a class="code hl_function" href="class_scene_viewer.html#a7f65aa9285528e26a555615fd8693128">drawOverlay</a>();</div>
<div class="line"><span class="lineno"> 1920</span> </div>
<div class="line"><span class="lineno"> 1921</span>  drawDisableScissor();</div>
<div class="line"><span class="lineno"> 1922</span> </div>
<div class="line"><span class="lineno"> 1923</span>  <span class="comment">// Il freezed e&#39; attivo ed e&#39; in stato &quot;update&quot;: faccio il grab del viewer.</span></div>
<div class="line"><span class="lineno"> 1924</span>  <span class="keywordflow">if</span> (m_freezedStatus == UPDATE_FREEZED) {</div>
<div class="line"><span class="lineno"> 1925</span>    m_viewGrabImage = rasterFromQImage(grabFramebuffer());</div>
<div class="line"><span class="lineno"> 1926</span>    m_freezedStatus = NORMAL_FREEZED;</div>
<div class="line"><span class="lineno"> 1927</span>  }</div>
<div class="line"><span class="lineno"> 1928</span> </div>
<div class="line"><span class="lineno"> 1929</span><span class="preprocessor">#ifdef FPS_HISTOGRAM</span></div>
<div class="line"><span class="lineno"> 1930</span>  <span class="keywordtype">int</span> t0 = time.elapsed();</div>
<div class="line"><span class="lineno"> 1931</span>  glFlush();</div>
<div class="line"><span class="lineno"> 1932</span>  glFinish();</div>
<div class="line"><span class="lineno"> 1933</span>  <span class="keywordtype">int</span> t1 = time.elapsed();</div>
<div class="line"><span class="lineno"> 1934</span>  drawFpsGraph(t0, t1);</div>
<div class="line"><span class="lineno"> 1935</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1936</span>  <span class="comment">// TOfflineGL::setContextManager(0);</span></div>
<div class="line"><span class="lineno"> 1937</span> </div>
<div class="line"><span class="lineno"> 1938</span>  <span class="keywordflow">if</span> (!m_isPicking &amp;&amp; m_lutCalibrator &amp;&amp; m_lutCalibrator-&gt;isValid())</div>
<div class="line"><span class="lineno"> 1939</span>    m_lutCalibrator-&gt;onEndDraw(m_fbo);</div>
<div class="line"><span class="lineno"> 1940</span> </div>
<div class="line"><span class="lineno"> 1941</span>  <span class="comment">// wait to achieve precise fps</span></div>
<div class="line"><span class="lineno"> 1942</span>  <span class="keywordflow">if</span> (m_timer &amp;&amp; m_timer-&gt;isValid()) {</div>
<div class="line"><span class="lineno"> 1943</span>    qint64 currentInstant = m_timer-&gt;nsecsElapsed();</div>
<div class="line"><span class="lineno"> 1944</span>    <span class="keywordflow">while</span> (currentInstant &lt; m_targetInstant) {</div>
<div class="line"><span class="lineno"> 1945</span>      currentInstant = m_timer-&gt;nsecsElapsed();</div>
<div class="line"><span class="lineno"> 1946</span>    }</div>
<div class="line"><span class="lineno"> 1947</span>  }</div>
<div class="line"><span class="lineno"> 1948</span>}</div>
<div class="ttc" id="aclass_scene_viewer_html_a7f65aa9285528e26a555615fd8693128"><div class="ttname"><a href="class_scene_viewer.html#a7f65aa9285528e26a555615fd8693128">SceneViewer::drawOverlay</a></div><div class="ttdeci">void drawOverlay()</div><div class="ttdef"><b>Definition:</b> sceneviewer.cpp:1598</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afa2e6bab02b6f9719b262b3f38d8f86f" name="afa2e6bab02b6f9719b262b3f38d8f86f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa2e6bab02b6f9719b262b3f38d8f86f">&#9670;&nbsp;</a></span>pan()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::pan </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;&#160;</td>
          <td class="paramname"><em>delta</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  375</span>{ panQt(QPointF(delta.x, delta.y)); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b750121ec0e522ef3c43decb62ec86d" name="a1b750121ec0e522ef3c43decb62ec86d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b750121ec0e522ef3c43decb62ec86d">&#9670;&nbsp;</a></span>panQt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::panQt </td>
          <td>(</td>
          <td class="paramtype">const QPointF &amp;&#160;</td>
          <td class="paramname"><em>delta</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2302</span>                                            {</div>
<div class="line"><span class="lineno"> 2303</span>  <span class="keywordflow">if</span> (delta == QPointF()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2304</span>  <span class="keywordflow">if</span> (is3DView())</div>
<div class="line"><span class="lineno"> 2305</span>    m_pan3D += <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(delta.x(), -delta.y());</div>
<div class="line"><span class="lineno"> 2306</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2307</span>    <span class="comment">// TAffine &amp;viewAff = m_viewAff[m_viewMode];</span></div>
<div class="line"><span class="lineno"> 2308</span>    <span class="comment">// viewAff = TTranslation(delta.x(), -delta.y()) * viewAff;</span></div>
<div class="line"><span class="lineno"> 2309</span>    setViewMatrix(<a class="code hl_class" href="class_t_translation.html">TTranslation</a>(delta.x(), -delta.y()) * m_viewAff[m_viewMode],</div>
<div class="line"><span class="lineno"> 2310</span>                  m_viewMode);</div>
<div class="line"><span class="lineno"> 2311</span>  }</div>
<div class="line"><span class="lineno"> 2312</span>  <a class="code hl_function" href="class_scene_viewer.html#a9865bf9cec6524de9d751f34702aab0f">invalidateAll</a>();</div>
<div class="line"><span class="lineno"> 2313</span>  emit refreshNavi();</div>
<div class="line"><span class="lineno"> 2314</span>}</div>
<div class="ttc" id="aclass_t_translation_html"><div class="ttname"><a href="class_t_translation.html">TTranslation</a></div><div class="ttdef"><b>Definition:</b> tgeometry.h:1074</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1163bd98365b4eb35ce09634ea16aff6" name="a1163bd98365b4eb35ce09634ea16aff6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1163bd98365b4eb35ce09634ea16aff6">&#9670;&nbsp;</a></span>pick()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int SceneViewer::pick </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;&#160;</td>
          <td class="paramname"><em>point</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >return the column index of the drawing intersecting point <b>p</b> (window coordinate, pixels, bottom-left origin) </p>

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html#a25c39c87c36587cf9cb0fdc09c59e6d4">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2922</span>                                          {</div>
<div class="line"><span class="lineno"> 2923</span>  <span class="comment">// pick is typically called in a mouse event handler.</span></div>
<div class="line"><span class="lineno"> 2924</span>  <span class="comment">// QGLWidget::makeCurrent() is not automatically called in these events.</span></div>
<div class="line"><span class="lineno"> 2925</span>  <span class="comment">// (to exploit the bug: open the FxEditor preview and then select the edit</span></div>
<div class="line"><span class="lineno"> 2926</span>  <span class="comment">// tool)</span></div>
<div class="line"><span class="lineno"> 2927</span>  m_isPicking = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2928</span>  makeCurrent();</div>
<div class="line"><span class="lineno"> 2929</span>  assert(glGetError() == GL_NO_ERROR);</div>
<div class="line"><span class="lineno"> 2930</span>  GLint viewport[4];</div>
<div class="line"><span class="lineno"> 2931</span>  glGetIntegerv(GL_VIEWPORT, viewport);</div>
<div class="line"><span class="lineno"> 2932</span>  std::array&lt;GLuint, 512&gt; selectBuffer;</div>
<div class="line"><span class="lineno"> 2933</span>  glSelectBuffer(selectBuffer.size(), selectBuffer.data());</div>
<div class="line"><span class="lineno"> 2934</span>  glRenderMode(GL_SELECT);</div>
<div class="line"><span class="lineno"> 2935</span> </div>
<div class="line"><span class="lineno"> 2936</span>  <span class="comment">// definisco la matrice di proiezione</span></div>
<div class="line"><span class="lineno"> 2937</span>  glMatrixMode(GL_PROJECTION);</div>
<div class="line"><span class="lineno"> 2938</span>  GLdouble mat[16];</div>
<div class="line"><span class="lineno"> 2939</span>  glGetDoublev(GL_PROJECTION_MATRIX, mat);</div>
<div class="line"><span class="lineno"> 2940</span>  glPushMatrix();</div>
<div class="line"><span class="lineno"> 2941</span>  glLoadIdentity();</div>
<div class="line"><span class="lineno"> 2942</span>  gluPickMatrix(point.x, point.y, 5, 5, viewport);</div>
<div class="line"><span class="lineno"> 2943</span>  glMultMatrixd(mat);</div>
<div class="line"><span class="lineno"> 2944</span>  assert(glGetError() == GL_NO_ERROR);</div>
<div class="line"><span class="lineno"> 2945</span> </div>
<div class="line"><span class="lineno"> 2946</span>  <span class="comment">// disegno la scena</span></div>
<div class="line"><span class="lineno"> 2947</span>  glMatrixMode(GL_MODELVIEW);</div>
<div class="line"><span class="lineno"> 2948</span>  glPushMatrix();</div>
<div class="line"><span class="lineno"> 2949</span>  glInitNames();</div>
<div class="line"><span class="lineno"> 2950</span>  assert(glGetError() == GL_NO_ERROR);</div>
<div class="line"><span class="lineno"> 2951</span> </div>
<div class="line"><span class="lineno"> 2952</span>  <span class="comment">// WARNING: We have to draw the scene in CAMERASTAND mode. Observe that the</span></div>
<div class="line"><span class="lineno"> 2953</span>  <span class="comment">// preview mode may</span></div>
<div class="line"><span class="lineno"> 2954</span>  <span class="comment">// invoke event processing - therefore triggering other pick events while in</span></div>
<div class="line"><span class="lineno"> 2955</span>  <span class="comment">// GL_SELECT</span></div>
<div class="line"><span class="lineno"> 2956</span>  <span class="comment">// render mode...</span></div>
<div class="line"><span class="lineno"> 2957</span>  <span class="keywordtype">int</span> previewMode = m_previewMode;</div>
<div class="line"><span class="lineno"> 2958</span>  m_previewMode   = NO_PREVIEW;</div>
<div class="line"><span class="lineno"> 2959</span> </div>
<div class="line"><span class="lineno"> 2960</span>  <span class="comment">//   OPTIMIZATION / QUICK FIX</span></div>
<div class="line"><span class="lineno"> 2961</span>  <span class="comment">// A 1x1 clipping rect around the picked pos can very well be used instead of</span></div>
<div class="line"><span class="lineno"> 2962</span>  <span class="comment">// redrawing</span></div>
<div class="line"><span class="lineno"> 2963</span>  <span class="comment">// the *entire viewer*.</span></div>
<div class="line"><span class="lineno"> 2964</span>  <span class="comment">// This is needed especially since some graphic cards (all NVidias we have</span></div>
<div class="line"><span class="lineno"> 2965</span>  <span class="comment">// tested) are</span></div>
<div class="line"><span class="lineno"> 2966</span>  <span class="comment">// very slow otherwise. This could be due to this particular rendering mode -</span></div>
<div class="line"><span class="lineno"> 2967</span>  <span class="comment">// or because</span></div>
<div class="line"><span class="lineno"> 2968</span>  <span class="comment">// we could be painting OUTSIDE a paintEvent()...</span></div>
<div class="line"><span class="lineno"> 2969</span> </div>
<div class="line"><span class="lineno"> 2970</span>  <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> oldClipRect(m_clipRect);</div>
<div class="line"><span class="lineno"> 2971</span>  m_clipRect = <a class="code hl_class" href="class_t_rect_t.html">TRectD</a>(point.x, point.y, point.x + 1, point.y + 1);</div>
<div class="line"><span class="lineno"> 2972</span> </div>
<div class="line"><span class="lineno"> 2973</span>  paintGL();  <span class="comment">// draw identifiable objects</span></div>
<div class="line"><span class="lineno"> 2974</span> </div>
<div class="line"><span class="lineno"> 2975</span>  m_clipRect = oldClipRect;</div>
<div class="line"><span class="lineno"> 2976</span> </div>
<div class="line"><span class="lineno"> 2977</span>  m_previewMode = previewMode;</div>
<div class="line"><span class="lineno"> 2978</span> </div>
<div class="line"><span class="lineno"> 2979</span>  assert(glGetError() == GL_NO_ERROR);</div>
<div class="line"><span class="lineno"> 2980</span>  glPopMatrix();</div>
<div class="line"><span class="lineno"> 2981</span> </div>
<div class="line"><span class="lineno"> 2982</span>  <span class="comment">// rimetto a posto la matrice di proiezione</span></div>
<div class="line"><span class="lineno"> 2983</span>  glMatrixMode(GL_PROJECTION);</div>
<div class="line"><span class="lineno"> 2984</span>  glPopMatrix();</div>
<div class="line"><span class="lineno"> 2985</span>  glMatrixMode(GL_MODELVIEW);</div>
<div class="line"><span class="lineno"> 2986</span> </div>
<div class="line"><span class="lineno"> 2987</span>  assert(glGetError() == GL_NO_ERROR);</div>
<div class="line"><span class="lineno"> 2988</span> </div>
<div class="line"><span class="lineno"> 2989</span>  <span class="comment">// conto gli hits</span></div>
<div class="line"><span class="lineno"> 2990</span>  <span class="keywordtype">int</span> ret      = -1;</div>
<div class="line"><span class="lineno"> 2991</span>  <span class="keywordtype">int</span> hitCount = glRenderMode(GL_RENDER);</div>
<div class="line"><span class="lineno"> 2992</span>  GLuint *p    = selectBuffer.data();</div>
<div class="line"><span class="lineno"> 2993</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; hitCount; ++i) {</div>
<div class="line"><span class="lineno"> 2994</span>    GLuint nameCount = *p++;</div>
<div class="line"><span class="lineno"> 2995</span>    GLuint zmin      = *p++;</div>
<div class="line"><span class="lineno"> 2996</span>    GLuint zmax      = *p++;</div>
<div class="line"><span class="lineno"> 2997</span>    <span class="keywordflow">if</span> (nameCount &gt; 0) {</div>
<div class="line"><span class="lineno"> 2998</span>      GLuint name = *p;</div>
<div class="line"><span class="lineno"> 2999</span>      ret         = name;  <span class="comment">// items.push_back(PickItem(name, zmin, zmax));</span></div>
<div class="line"><span class="lineno"> 3000</span>    }</div>
<div class="line"><span class="lineno"> 3001</span>    p += nameCount;</div>
<div class="line"><span class="lineno"> 3002</span>  }</div>
<div class="line"><span class="lineno"> 3003</span>  assert(glGetError() == GL_NO_ERROR);</div>
<div class="line"><span class="lineno"> 3004</span>  m_isPicking = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3005</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno"> 3006</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af778bc35f05229be9939d407b964ad9d" name="af778bc35f05229be9939d407b964ad9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af778bc35f05229be9939d407b964ad9d">&#9670;&nbsp;</a></span>posToColumnIndex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int SceneViewer::posToColumnIndex </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>distance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>includeInvisible</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >return the column indexes of the drawings intersecting point <b>p</b> (window coordinate, pixels, bottom-left origin) </p>

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html#a39e1e08bc287e5ca5a9ff6e7ac968ca2">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3011</span>                                                               {</div>
<div class="line"><span class="lineno"> 3012</span>  std::vector&lt;int&gt; ret;</div>
<div class="line"><span class="lineno"> 3013</span>  posToColumnIndexes(p, ret, distance, includeInvisible);</div>
<div class="line"><span class="lineno"> 3014</span>  <span class="keywordflow">return</span> ret.empty() ? -1 : ret.back();</div>
<div class="line"><span class="lineno"> 3015</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="adc621b10faeca523c68f80bc50a9939e" name="adc621b10faeca523c68f80bc50a9939e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc621b10faeca523c68f80bc50a9939e">&#9670;&nbsp;</a></span>posToColumnIndexes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::posToColumnIndexes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>indexes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>distance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>includeInvisible</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3021</span>                                                                  {</div>
<div class="line"><span class="lineno"> 3022</span>  <span class="keywordtype">int</span> oldRasterizePli    = TXshSimpleLevel::m_rasterizePli;</div>
<div class="line"><span class="lineno"> 3023</span>  <a class="code hl_class" href="class_t_app.html">TApp</a> *app              = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>();</div>
<div class="line"><span class="lineno"> 3024</span>  <a class="code hl_class" href="class_toonz_scene.html">ToonzScene</a> *scene      = app-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene();</div>
<div class="line"><span class="lineno"> 3025</span>  <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh           = app-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()-&gt;getXsheet();</div>
<div class="line"><span class="lineno"> 3026</span>  <span class="keywordtype">int</span> frame              = app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFrame();</div>
<div class="line"><span class="lineno"> 3027</span>  <span class="keywordtype">int</span> currentColumnIndex = app-&gt;<a class="code hl_function" href="class_t_app.html#a1e294e7cff300851d12a8c3d196943f6">getCurrentColumn</a>()-&gt;getColumnIndex();</div>
<div class="line"><span class="lineno"> 3028</span>  <a class="code hl_class" href="class_onion_skin_mask.html">OnionSkinMask</a> osm      = app-&gt;<a class="code hl_function" href="class_t_app.html#afcdd56d9130b7c39a5227de08a0b65e4">getCurrentOnionSkin</a>()-&gt;getOnionSkinMask();</div>
<div class="line"><span class="lineno"> 3029</span> </div>
<div class="line"><span class="lineno"> 3030</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> pos = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(p.x - width() / 2, p.y - height() / 2);</div>
<div class="line"><span class="lineno"> 3031</span>  <a class="code hl_class" href="class_stage_1_1_picker.html">Stage::Picker</a> picker(<a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>(), pos, <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>,</div>
<div class="line"><span class="lineno"> 3032</span>                       getDevPixRatio());</div>
<div class="line"><span class="lineno"> 3033</span>  picker.setMinimumDistance(distance);</div>
<div class="line"><span class="lineno"> 3034</span> </div>
<div class="line"><span class="lineno"> 3035</span>  TXshSimpleLevel::m_rasterizePli = 0;</div>
<div class="line"><span class="lineno"> 3036</span> </div>
<div class="line"><span class="lineno"> 3037</span>  <a class="code hl_struct" href="struct_stage_1_1_visit_args.html">Stage::VisitArgs</a> args;</div>
<div class="line"><span class="lineno"> 3038</span>  args.m_scene       = scene;</div>
<div class="line"><span class="lineno"> 3039</span>  args.m_xsh         = xsh;</div>
<div class="line"><span class="lineno"> 3040</span>  args.m_row         = frame;</div>
<div class="line"><span class="lineno"> 3041</span>  args.m_col         = currentColumnIndex;</div>
<div class="line"><span class="lineno"> 3042</span>  args.m_osm         = &amp;osm;</div>
<div class="line"><span class="lineno"> 3043</span>  args.m_onlyVisible = includeInvisible;</div>
<div class="line"><span class="lineno"> 3044</span> </div>
<div class="line"><span class="lineno"> 3045</span>  <a class="code hl_function" href="namespace_stage.html#a28ab15860508cccd59a31483a9b8afa1">Stage::visit</a>(picker, args); <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3046</span><span class="comment">picker,</span></div>
<div class="line"><span class="lineno"> 3047</span><span class="comment">scene,</span></div>
<div class="line"><span class="lineno"> 3048</span><span class="comment">xsh,</span></div>
<div class="line"><span class="lineno"> 3049</span><span class="comment">frame,</span></div>
<div class="line"><span class="lineno"> 3050</span><span class="comment">currentColumnIndex,</span></div>
<div class="line"><span class="lineno"> 3051</span><span class="comment">osm,</span></div>
<div class="line"><span class="lineno"> 3052</span><span class="comment">false,</span></div>
<div class="line"><span class="lineno"> 3053</span><span class="comment">0,</span></div>
<div class="line"><span class="lineno"> 3054</span><span class="comment">false,</span></div>
<div class="line"><span class="lineno"> 3055</span><span class="comment">includeInvisible);</span></div>
<div class="line"><span class="lineno"> 3056</span><span class="comment">*/</span></div>
<div class="line"><span class="lineno"> 3057</span> </div>
<div class="line"><span class="lineno"> 3058</span>  TXshSimpleLevel::m_rasterizePli = oldRasterizePli;</div>
<div class="line"><span class="lineno"> 3059</span>  picker.getColumnIndexes(indexes);</div>
<div class="line"><span class="lineno"> 3060</span>}</div>
<div class="ttc" id="aclass_stage_1_1_picker_html"><div class="ttname"><a href="class_stage_1_1_picker.html">Stage::Picker</a></div><div class="ttdef"><b>Definition:</b> stagevisitor.h:302</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa2973e9567ddbbfd62d853f96ba26c7a" name="aa2973e9567ddbbfd62d853f96ba26c7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2973e9567ddbbfd62d853f96ba26c7a">&#9670;&nbsp;</a></span>posToRow()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int SceneViewer::posToRow </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>distance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>includeInvisible</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>currentColumnOnly</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >return the row of the drawings intersecting point <b>p</b> (used with onion skins) (window coordinate, pixels, bottom-left origin) </p>

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html#aa68aee09530696a8996e835801ea59f2">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3065</span>                                                                               {</div>
<div class="line"><span class="lineno"> 3066</span>  <span class="keywordtype">int</span> oldRasterizePli = TXshSimpleLevel::m_rasterizePli;</div>
<div class="line"><span class="lineno"> 3067</span>  <a class="code hl_class" href="class_t_app.html">TApp</a> *app           = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>();</div>
<div class="line"><span class="lineno"> 3068</span>  <a class="code hl_class" href="class_onion_skin_mask.html">OnionSkinMask</a> osm   = app-&gt;<a class="code hl_function" href="class_t_app.html#afcdd56d9130b7c39a5227de08a0b65e4">getCurrentOnionSkin</a>()-&gt;getOnionSkinMask();</div>
<div class="line"><span class="lineno"> 3069</span> </div>
<div class="line"><span class="lineno"> 3070</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> pos = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(p.x - width() / 2, p.y - height() / 2);</div>
<div class="line"><span class="lineno"> 3071</span>  <a class="code hl_class" href="class_stage_1_1_picker.html">Stage::Picker</a> picker(<a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>(), pos, <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>,</div>
<div class="line"><span class="lineno"> 3072</span>                       getDevPixRatio());</div>
<div class="line"><span class="lineno"> 3073</span>  picker.setMinimumDistance(distance);</div>
<div class="line"><span class="lineno"> 3074</span> </div>
<div class="line"><span class="lineno"> 3075</span>  <span class="keywordflow">if</span> (app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;isEditingLevel()) {</div>
<div class="line"><span class="lineno"> 3076</span>    <a class="code hl_function" href="namespace_stage.html#a28ab15860508cccd59a31483a9b8afa1">Stage::visit</a>(picker, app-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>()-&gt;getLevel(),</div>
<div class="line"><span class="lineno"> 3077</span>                 app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFid(), osm,</div>
<div class="line"><span class="lineno"> 3078</span>                 app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;isPlaying(), <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 3079</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3080</span>    <a class="code hl_class" href="class_toonz_scene.html">ToonzScene</a> *scene      = app-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene();</div>
<div class="line"><span class="lineno"> 3081</span>    <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh           = app-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()-&gt;getXsheet();</div>
<div class="line"><span class="lineno"> 3082</span>    <span class="keywordtype">int</span> frame              = app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFrame();</div>
<div class="line"><span class="lineno"> 3083</span>    <span class="keywordtype">int</span> currentColumnIndex = app-&gt;<a class="code hl_function" href="class_t_app.html#a1e294e7cff300851d12a8c3d196943f6">getCurrentColumn</a>()-&gt;getColumnIndex();</div>
<div class="line"><span class="lineno"> 3084</span> </div>
<div class="line"><span class="lineno"> 3085</span>    TXshSimpleLevel::m_rasterizePli = 0;</div>
<div class="line"><span class="lineno"> 3086</span> </div>
<div class="line"><span class="lineno"> 3087</span>    <a class="code hl_struct" href="struct_stage_1_1_visit_args.html">Stage::VisitArgs</a> args;</div>
<div class="line"><span class="lineno"> 3088</span>    args.m_scene       = scene;</div>
<div class="line"><span class="lineno"> 3089</span>    args.m_xsh         = xsh;</div>
<div class="line"><span class="lineno"> 3090</span>    args.m_row         = frame;</div>
<div class="line"><span class="lineno"> 3091</span>    args.m_col         = currentColumnIndex;</div>
<div class="line"><span class="lineno"> 3092</span>    args.m_osm         = &amp;osm;</div>
<div class="line"><span class="lineno"> 3093</span>    args.m_onlyVisible = includeInvisible;</div>
<div class="line"><span class="lineno"> 3094</span> </div>
<div class="line"><span class="lineno"> 3095</span>    <span class="keywordflow">if</span> (currentColumnOnly) picker.setCurrentColumnIndex(currentColumnIndex);</div>
<div class="line"><span class="lineno"> 3096</span> </div>
<div class="line"><span class="lineno"> 3097</span>    <a class="code hl_function" href="namespace_stage.html#a28ab15860508cccd59a31483a9b8afa1">Stage::visit</a>(picker, args);</div>
<div class="line"><span class="lineno"> 3098</span>  }</div>
<div class="line"><span class="lineno"> 3099</span>  TXshSimpleLevel::m_rasterizePli = oldRasterizePli;</div>
<div class="line"><span class="lineno"> 3100</span>  <span class="keywordflow">return</span> picker.getRow();</div>
<div class="line"><span class="lineno"> 3101</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00118">TApp::getCurrentColumn()</a>, <a class="el" href="#l00114">TApp::getCurrentFrame()</a>, <a class="el" href="#l00122">TApp::getCurrentLevel()</a>, <a class="el" href="#l00140">TApp::getCurrentOnionSkin()</a>, <a class="el" href="#l00106">TApp::getCurrentScene()</a>, <a class="el" href="#l00110">TApp::getCurrentXsheet()</a>, <a class="el" href="#l02211">getViewMatrix()</a>, <a class="el" href="#l00215">TApp::instance()</a>, <a class="el" href="#l00592">TTool::Viewer::m_visualSettings</a>, and <a class="el" href="#l00911">Stage::visit()</a>.</p>

</div>
</div>
<a id="a1baf121661d1bbabbb869411e4687a4d" name="a1baf121661d1bbabbb869411e4687a4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1baf121661d1bbabbb869411e4687a4d">&#9670;&nbsp;</a></span>projectToZ()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double SceneViewer::projectToZ </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;&#160;</td>
          <td class="paramname"><em>delta</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2158</span>                                                   {</div>
<div class="line"><span class="lineno"> 2159</span>  glPushMatrix();</div>
<div class="line"><span class="lineno"> 2160</span>  mult3DMatrix();</div>
<div class="line"><span class="lineno"> 2161</span>  GLint viewport[4];</div>
<div class="line"><span class="lineno"> 2162</span>  <span class="keywordtype">double</span> modelview[16], <a class="code hl_function" href="namespacetcg_1_1point__ops.html#a9649a6ac6d347e067adc06325fc07a7f">projection</a>[16];</div>
<div class="line"><span class="lineno"> 2163</span>  glGetIntegerv(GL_VIEWPORT, viewport);</div>
<div class="line"><span class="lineno"> 2164</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 16; i++)</div>
<div class="line"><span class="lineno"> 2165</span>    projection[i] = (<span class="keywordtype">double</span>)m_projectionMatrix.constData()[i];</div>
<div class="line"><span class="lineno"> 2166</span>  glGetDoublev(GL_MODELVIEW_MATRIX, modelview);</div>
<div class="line"><span class="lineno"> 2167</span> </div>
<div class="line"><span class="lineno"> 2168</span>  <span class="keywordtype">double</span> ax, ay, az, bx, by, bz;</div>
<div class="line"><span class="lineno"> 2169</span>  gluProject(0, 0, 0, modelview, projection, viewport, &amp;ax, &amp;ay, &amp;az);</div>
<div class="line"><span class="lineno"> 2170</span>  gluProject(0, 0, 1, modelview, projection, viewport, &amp;bx, &amp;by, &amp;bz);</div>
<div class="line"><span class="lineno"> 2171</span> </div>
<div class="line"><span class="lineno"> 2172</span>  glPopMatrix();</div>
<div class="line"><span class="lineno"> 2173</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> zdir(bx - ax, by - ay);</div>
<div class="line"><span class="lineno"> 2174</span>  <span class="keywordtype">double</span> zdirLength2 = norm2(zdir);</div>
<div class="line"><span class="lineno"> 2175</span>  <span class="keywordflow">if</span> (zdirLength2 &gt; 0.0) {</div>
<div class="line"><span class="lineno"> 2176</span>    <span class="keywordtype">double</span> dz = (delta * zdir) / zdirLength2;</div>
<div class="line"><span class="lineno"> 2177</span>    <span class="keywordflow">return</span> dz;</div>
<div class="line"><span class="lineno"> 2178</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2179</span>    <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><span class="lineno"> 2180</span>}</div>
<div class="ttc" id="anamespacetcg_1_1point__ops_html_a9649a6ac6d347e067adc06325fc07a7f"><div class="ttname"><a href="namespacetcg_1_1point__ops.html#a9649a6ac6d347e067adc06325fc07a7f">tcg::point_ops::projection</a></div><div class="ttdeci">Point projection(const Point &amp;p, const Point &amp;a, const Point &amp;d)</div><div class="ttdoc">Returns the projection of point p on line a -&gt; d</div><div class="ttdef"><b>Definition:</b> point_ops.h:209</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a240af6e63f2de67f32661dead9763b0b" name="a240af6e63f2de67f32661dead9763b0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a240af6e63f2de67f32661dead9763b0b">&#9670;&nbsp;</a></span>regeneratePreview</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::regeneratePreview </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2614</span>                                    {</div>
<div class="line"><span class="lineno"> 2615</span>  <a class="code hl_function" href="class_previewer.html#a5eb765b66490a3d99d432f90864bfacd">Previewer::instance</a>(m_previewMode == SUBCAMERA_PREVIEW)-&gt;clear();</div>
<div class="line"><span class="lineno"> 2616</span>  update();</div>
<div class="line"><span class="lineno"> 2617</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6cb8080e8128fb721c2517ae938994b0" name="a6cb8080e8128fb721c2517ae938994b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cb8080e8128fb721c2517ae938994b0">&#9670;&nbsp;</a></span>regeneratePreviewFrame</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::regeneratePreviewFrame </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2621</span>                                         {</div>
<div class="line"><span class="lineno"> 2622</span>  <a class="code hl_function" href="class_previewer.html#a5eb765b66490a3d99d432f90864bfacd">Previewer::instance</a>(m_previewMode == SUBCAMERA_PREVIEW)</div>
<div class="line"><span class="lineno"> 2623</span>      -&gt;clear(<a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;getCurrentFrame()-&gt;getFrame());</div>
<div class="line"><span class="lineno"> 2624</span> </div>
<div class="line"><span class="lineno"> 2625</span>  update();</div>
<div class="line"><span class="lineno"> 2626</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa48b27ed062e2d8a0e98566adcad6084" name="aa48b27ed062e2d8a0e98566adcad6084"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa48b27ed062e2d8a0e98566adcad6084">&#9670;&nbsp;</a></span>registerContext()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::registerContext </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3306</span>                                  {</div>
<div class="line"><span class="lineno"> 3307</span>  <span class="comment">// release the old context, if any</span></div>
<div class="line"><span class="lineno"> 3308</span>  <span class="comment">// this will be happen when dock / float the viewer panel.</span></div>
<div class="line"><span class="lineno"> 3309</span>  <span class="keywordtype">bool</span> hasOldContext;</div>
<div class="line"><span class="lineno"> 3310</span><span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><span class="lineno"> 3311</span>  hasOldContext =</div>
<div class="line"><span class="lineno"> 3312</span>      (m_currentContext.first != <span class="keyword">nullptr</span> &amp;&amp; m_currentContext.second != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 3313</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 3314</span>  hasOldContext = m_currentContext != <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 3315</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3316</span>  <span class="keywordflow">if</span> (hasOldContext) {</div>
<div class="line"><span class="lineno"> 3317</span>    <span class="keywordtype">int</span> ret = l_contexts.erase(m_currentContext);</div>
<div class="line"><span class="lineno"> 3318</span>    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><span class="lineno"> 3319</span>      TGLDisplayListsManager::instance()-&gt;<a class="code hl_function" href="class_t_g_l_display_lists_manager.html#a9b723e490c97425b39b238a2d7ad5877">releaseContext</a>(m_currentContext);</div>
<div class="line"><span class="lineno"> 3320</span>  }</div>
<div class="line"><span class="lineno"> 3321</span> </div>
<div class="line"><span class="lineno"> 3322</span>  <span class="comment">// then, register context and the space Id correspondent to it.</span></div>
<div class="line"><span class="lineno"> 3323</span>  <span class="keywordtype">int</span> displayListId;</div>
<div class="line"><span class="lineno"> 3324</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;getMainWindow() &amp;&amp;</div>
<div class="line"><span class="lineno"> 3325</span>      <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;getMainWindow()-&gt;isAncestorOf(<span class="keyword">this</span>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 3326</span>      QThread::currentThread() == qGuiApp-&gt;thread()) {</div>
<div class="line"><span class="lineno"> 3327</span>    <span class="comment">// obtain displaySpaceId for main thread</span></div>
<div class="line"><span class="lineno"> 3328</span>    <span class="keywordflow">if</span> (l_mainDisplayListsSpaceId == -1)</div>
<div class="line"><span class="lineno"> 3329</span>      l_mainDisplayListsSpaceId =</div>
<div class="line"><span class="lineno"> 3330</span>          TGLDisplayListsManager::instance()-&gt;<a class="code hl_function" href="class_t_g_l_display_lists_manager.html#ae2b9d27f1f22373a4d14d4ce7fc1b484">storeProxy</a>(<span class="keyword">new</span> DummyProxy);</div>
<div class="line"><span class="lineno"> 3331</span> </div>
<div class="line"><span class="lineno"> 3332</span>    displayListId = l_mainDisplayListsSpaceId;</div>
<div class="line"><span class="lineno"> 3333</span>  }</div>
<div class="line"><span class="lineno"> 3334</span>  <span class="comment">// for the other cases (such as for floating viewer), it can&#39;t share the</span></div>
<div class="line"><span class="lineno"> 3335</span>  <span class="comment">// context so</span></div>
<div class="line"><span class="lineno"> 3336</span>  <span class="comment">// obtain different id</span></div>
<div class="line"><span class="lineno"> 3337</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3338</span>    displayListId =</div>
<div class="line"><span class="lineno"> 3339</span>        TGLDisplayListsManager::instance()-&gt;<a class="code hl_function" href="class_t_g_l_display_lists_manager.html#ae2b9d27f1f22373a4d14d4ce7fc1b484">storeProxy</a>(<span class="keyword">new</span> DummyProxy);</div>
<div class="line"><span class="lineno"> 3340</span>  TGlContext tglContext(tglGetCurrentContext());</div>
<div class="line"><span class="lineno"> 3341</span>  TGLDisplayListsManager::instance()-&gt;<a class="code hl_function" href="class_t_g_l_display_lists_manager.html#ab755606608fb45cc60b01e14396fd20b">attachContext</a>(displayListId, tglContext);</div>
<div class="line"><span class="lineno"> 3342</span>  l_contexts.insert(tglContext);</div>
<div class="line"><span class="lineno"> 3343</span>}</div>
<div class="ttc" id="aclass_t_g_l_display_lists_manager_html_ab755606608fb45cc60b01e14396fd20b"><div class="ttname"><a href="class_t_g_l_display_lists_manager.html#ab755606608fb45cc60b01e14396fd20b">TGLDisplayListsManager::attachContext</a></div><div class="ttdeci">void attachContext(int dlSpaceId, TGlContext context)</div><div class="ttdef"><b>Definition:</b> tgldisplaylistsmanager.cpp:54</div></div>
<div class="ttc" id="aclass_t_g_l_display_lists_manager_html_ae2b9d27f1f22373a4d14d4ce7fc1b484"><div class="ttname"><a href="class_t_g_l_display_lists_manager.html#ae2b9d27f1f22373a4d14d4ce7fc1b484">TGLDisplayListsManager::storeProxy</a></div><div class="ttdeci">int storeProxy(TGLDisplayListsProxy *proxy)</div><div class="ttdef"><b>Definition:</b> tgldisplaylistsmanager.cpp:48</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad4ab9fcfdf2823447ed005ec1cc95fc8" name="ad4ab9fcfdf2823447ed005ec1cc95fc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4ab9fcfdf2823447ed005ec1cc95fc8">&#9670;&nbsp;</a></span>releaseBusyOnTabletMove</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::releaseBusyOnTabletMove </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  455</span>{ m_isBusyOnTabletMove = <span class="keyword">false</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae331d555c43f941e0d5576fefc5f8774" name="ae331d555c43f941e0d5576fefc5f8774"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae331d555c43f941e0d5576fefc5f8774">&#9670;&nbsp;</a></span>releaseFBO()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::releaseFBO </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3288</span>                             {</div>
<div class="line"><span class="lineno"> 3289</span>  <span class="keywordflow">if</span> (m_fbo) m_fbo-&gt;release();</div>
<div class="line"><span class="lineno"> 3290</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8f6aba7f3c756ab3f44b6d3c706098df" name="a8f6aba7f3c756ab3f44b6d3c706098df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f6aba7f3c756ab3f44b6d3c706098df">&#9670;&nbsp;</a></span>resetInputMethod()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::resetInputMethod </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3188</span>                                   {</div>
<div class="line"><span class="lineno"> 3189</span><span class="preprocessor">#if QT_VERSION &gt;= 0x050000</span></div>
<div class="line"><span class="lineno"> 3190</span>  QGuiApplication::inputMethod()-&gt;reset();</div>
<div class="line"><span class="lineno"> 3191</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 3192</span>  qApp-&gt;inputContext()-&gt;reset();</div>
<div class="line"><span class="lineno"> 3193</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3194</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae8e0eddc3c301fbbcead3dc55188e8c4" name="ae8e0eddc3c301fbbcead3dc55188e8c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8e0eddc3c301fbbcead3dc55188e8c4">&#9670;&nbsp;</a></span>resetPosition</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::resetPosition </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2787</span>                                {</div>
<div class="line"><span class="lineno"> 2788</span>  m_viewAff[m_viewMode].a13 = 0.0;</div>
<div class="line"><span class="lineno"> 2789</span>  m_viewAff[m_viewMode].a23 = 0.0;</div>
<div class="line"><span class="lineno"> 2790</span>  <a class="code hl_function" href="class_scene_viewer.html#a9865bf9cec6524de9d751f34702aab0f">invalidateAll</a>();</div>
<div class="line"><span class="lineno"> 2791</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b5067774331d9aae76bce92a2088614" name="a1b5067774331d9aae76bce92a2088614"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b5067774331d9aae76bce92a2088614">&#9670;&nbsp;</a></span>resetRotation</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::resetRotation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2771</span>                                {</div>
<div class="line"><span class="lineno"> 2772</span>  <span class="keywordtype">double</span> reverseRotatation = m_rotationAngle[m_viewMode] * -1;</div>
<div class="line"><span class="lineno"> 2773</span>  <span class="keywordflow">if</span> (m_isFlippedX) reverseRotatation *= -1;</div>
<div class="line"><span class="lineno"> 2774</span>  <span class="keywordflow">if</span> (m_isFlippedY) reverseRotatation *= -1;</div>
<div class="line"><span class="lineno"> 2775</span>  <a class="code hl_class" href="class_t_tool.html">TTool</a> *tool    = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;getTool();</div>
<div class="line"><span class="lineno"> 2776</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> center = m_viewAff[m_viewMode].inv() * <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(0, 0);</div>
<div class="line"><span class="lineno"> 2777</span>  <span class="keywordflow">if</span> (tool-&gt;getName() == <span class="stringliteral">&quot;T_Rotate&quot;</span> &amp;&amp;</div>
<div class="line"><span class="lineno"> 2778</span>      tool-&gt;getProperties(0)</div>
<div class="line"><span class="lineno"> 2779</span>              -&gt;<a class="code hl_function" href="class_t_property_group.html#afb08f3145e5f77da6f163cdc9decad2f">getProperty</a>(<span class="stringliteral">&quot;Rotate On Camera Center&quot;</span>)</div>
<div class="line"><span class="lineno"> 2780</span>              -&gt;getValueAsString() == <span class="stringliteral">&quot;1&quot;</span>)</div>
<div class="line"><span class="lineno"> 2781</span>    center = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(0, 0);</div>
<div class="line"><span class="lineno"> 2782</span>  rotate(center, reverseRotatation);</div>
<div class="line"><span class="lineno"> 2783</span>}</div>
<div class="ttc" id="aclass_t_property_group_html_afb08f3145e5f77da6f163cdc9decad2f"><div class="ttname"><a href="class_t_property_group.html#afb08f3145e5f77da6f163cdc9decad2f">TPropertyGroup::getProperty</a></div><div class="ttdeci">TProperty * getProperty(std::string name)</div><div class="ttdoc">returns 0 if the property doesn't exist</div><div class="ttdef"><b>Definition:</b> tproperty.cpp:67</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a486ab2b8322a8922ccda934272da2bc1" name="a486ab2b8322a8922ccda934272da2bc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a486ab2b8322a8922ccda934272da2bc1">&#9670;&nbsp;</a></span>resetSceneViewer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::resetSceneViewer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2731</span>                                   {</div>
<div class="line"><span class="lineno"> 2732</span>  <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#ab6461a28653bae19432d998149564b43">m_sceneProperties</a> =</div>
<div class="line"><span class="lineno"> 2733</span>      <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene()-&gt;<a class="code hl_function" href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">getProperties</a>();</div>
<div class="line"><span class="lineno"> 2734</span> </div>
<div class="line"><span class="lineno"> 2735</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m_viewAff.size(); ++i) {</div>
<div class="line"><span class="lineno"> 2736</span>    setViewMatrix(getNormalZoomScale(), i);</div>
<div class="line"><span class="lineno"> 2737</span>    m_rotationAngle[i] = 0.0;</div>
<div class="line"><span class="lineno"> 2738</span>  }</div>
<div class="line"><span class="lineno"> 2739</span> </div>
<div class="line"><span class="lineno"> 2740</span>  m_pos         = QPoint(0, 0);</div>
<div class="line"><span class="lineno"> 2741</span>  m_pan3D       = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(0, 0);</div>
<div class="line"><span class="lineno"> 2742</span>  m_zoomScale3D = 0.1;</div>
<div class="line"><span class="lineno"> 2743</span>  m_theta3D     = 20;</div>
<div class="line"><span class="lineno"> 2744</span>  m_phi3D       = 30;</div>
<div class="line"><span class="lineno"> 2745</span>  m_isFlippedX  = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2746</span>  m_isFlippedY  = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2747</span>  fitToCameraOutline();</div>
<div class="line"><span class="lineno"> 2748</span>  emit onZoomChanged();</div>
<div class="line"><span class="lineno"> 2749</span>  emit onFlipHChanged(m_isFlippedX);</div>
<div class="line"><span class="lineno"> 2750</span>  emit onFlipVChanged(m_isFlippedY);</div>
<div class="line"><span class="lineno"> 2751</span>  <a class="code hl_function" href="class_scene_viewer.html#a9865bf9cec6524de9d751f34702aab0f">invalidateAll</a>();</div>
<div class="line"><span class="lineno"> 2752</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad14f2cc4168a38882b4c23bbb8e7ed61" name="ad14f2cc4168a38882b4c23bbb8e7ed61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad14f2cc4168a38882b4c23bbb8e7ed61">&#9670;&nbsp;</a></span>resetTabletStatus</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::resetTabletStatus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  923</span>                                    {</div>
<div class="line"><span class="lineno">  924</span>  <span class="keywordflow">if</span> (!m_buttonClicked) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  925</span>  m_mouseButton   = Qt::NoButton;</div>
<div class="line"><span class="lineno">  926</span>  m_tabletEvent   = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  927</span>  m_tabletState   = None;</div>
<div class="line"><span class="lineno">  928</span>  m_tabletMove    = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  929</span>  m_pressure      = 0;</div>
<div class="line"><span class="lineno">  930</span>  m_buttonClicked = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  931</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;getCurrentTool()-&gt;isToolBusy())</div>
<div class="line"><span class="lineno">  932</span>    <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;setToolBusy(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  933</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a19a9898446b10c6a9367171b5c43ca1a" name="a19a9898446b10c6a9367171b5c43ca1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19a9898446b10c6a9367171b5c43ca1a">&#9670;&nbsp;</a></span>resetZoom</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::resetZoom </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2756</span>                            {</div>
<div class="line"><span class="lineno"> 2757</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> realCenter(m_viewAff[m_viewMode].a13, m_viewAff[m_viewMode].a23);</div>
<div class="line"><span class="lineno"> 2758</span>  <a class="code hl_class" href="class_t_affine.html">TAffine</a> aff =</div>
<div class="line"><span class="lineno"> 2759</span>      getNormalZoomScale() * <a class="code hl_class" href="class_t_rotation.html">TRotation</a>(realCenter, m_rotationAngle[m_viewMode]);</div>
<div class="line"><span class="lineno"> 2760</span>  aff.a13 = realCenter.x;</div>
<div class="line"><span class="lineno"> 2761</span>  aff.a23 = realCenter.y;</div>
<div class="line"><span class="lineno"> 2762</span>  <span class="keywordflow">if</span> (m_isFlippedX) aff = aff * <a class="code hl_class" href="class_t_scale.html">TScale</a>(-1, 1);</div>
<div class="line"><span class="lineno"> 2763</span>  <span class="keywordflow">if</span> (m_isFlippedY) aff = aff * <a class="code hl_class" href="class_t_scale.html">TScale</a>(1, -1);</div>
<div class="line"><span class="lineno"> 2764</span>  setViewMatrix(aff, m_viewMode);</div>
<div class="line"><span class="lineno"> 2765</span>  <a class="code hl_function" href="class_scene_viewer.html#a9865bf9cec6524de9d751f34702aab0f">invalidateAll</a>();</div>
<div class="line"><span class="lineno"> 2766</span>  emit onZoomChanged();</div>
<div class="line"><span class="lineno"> 2767</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e7b35a10fc6a43dc5fd50c572de22a8" name="a2e7b35a10fc6a43dc5fd50c572de22a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e7b35a10fc6a43dc5fd50c572de22a8">&#9670;&nbsp;</a></span>resizeGL()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::resizeGL </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1260</span>                                       {</div>
<div class="line"><span class="lineno"> 1261</span>  w *= getDevPixRatio();</div>
<div class="line"><span class="lineno"> 1262</span>  h *= getDevPixRatio();</div>
<div class="line"><span class="lineno"> 1263</span>  glViewport(0, 0, w, h);</div>
<div class="line"><span class="lineno"> 1264</span>  glMatrixMode(GL_PROJECTION);</div>
<div class="line"><span class="lineno"> 1265</span>  glLoadIdentity();</div>
<div class="line"><span class="lineno"> 1266</span>  glOrtho(0, w, 0, h, -4000, 4000);</div>
<div class="line"><span class="lineno"> 1267</span>  m_projectionMatrix.setToIdentity();</div>
<div class="line"><span class="lineno"> 1268</span>  m_projectionMatrix.ortho(0, w, 0, h, -4000, 4000);</div>
<div class="line"><span class="lineno"> 1269</span> </div>
<div class="line"><span class="lineno"> 1270</span>  glMatrixMode(GL_MODELVIEW);</div>
<div class="line"><span class="lineno"> 1271</span>  glLoadIdentity();</div>
<div class="line"><span class="lineno"> 1272</span>  glTranslatef(0.375, 0.375, 0.0);</div>
<div class="line"><span class="lineno"> 1273</span>  <span class="comment">// make the center of the viewer = origin</span></div>
<div class="line"><span class="lineno"> 1274</span>  glTranslated(w * 0.5, h * 0.5, 0);</div>
<div class="line"><span class="lineno"> 1275</span> </div>
<div class="line"><span class="lineno"> 1276</span>  <span class="keywordflow">if</span> (m_freezedStatus == NORMAL_FREEZED) m_freezedStatus = UPDATE_FREEZED;</div>
<div class="line"><span class="lineno"> 1277</span> </div>
<div class="line"><span class="lineno"> 1278</span>  <span class="keywordflow">if</span> (m_previewMode != NO_PREVIEW) requestTimedRefresh();</div>
<div class="line"><span class="lineno"> 1279</span> </div>
<div class="line"><span class="lineno"> 1280</span>  <span class="comment">// remake fbo with new size</span></div>
<div class="line"><span class="lineno"> 1281</span>  <span class="keywordflow">if</span> (m_lutCalibrator &amp;&amp; m_lutCalibrator-&gt;isValid()) {</div>
<div class="line"><span class="lineno"> 1282</span>    <span class="keywordflow">if</span> (m_fbo) <span class="keyword">delete</span> m_fbo;</div>
<div class="line"><span class="lineno"> 1283</span>    <span class="keywordflow">if</span> (Preferences::instance()-&gt;is30bitDisplayEnabled()) {</div>
<div class="line"><span class="lineno"> 1284</span>      QOpenGLFramebufferObjectFormat format;</div>
<div class="line"><span class="lineno"> 1285</span>      format.setInternalTextureFormat(TGL_TexFmt10);</div>
<div class="line"><span class="lineno"> 1286</span>      m_fbo = <span class="keyword">new</span> QOpenGLFramebufferObject(w, h, format);</div>
<div class="line"><span class="lineno"> 1287</span>    } <span class="keywordflow">else</span>  <span class="comment">// normally, initialize with GL_RGBA8 format</span></div>
<div class="line"><span class="lineno"> 1288</span>      m_fbo = <span class="keyword">new</span> QOpenGLFramebufferObject(w, h);</div>
<div class="line"><span class="lineno"> 1289</span>  }</div>
<div class="line"><span class="lineno"> 1290</span> </div>
<div class="line"><span class="lineno"> 1291</span>  <span class="comment">// for updating the navigator in levelstrip</span></div>
<div class="line"><span class="lineno"> 1292</span>  emit refreshNavi();</div>
<div class="line"><span class="lineno"> 1293</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0dfe29f7fe83caa0ccde4ea0f35ee3ed" name="a0dfe29f7fe83caa0ccde4ea0f35ee3ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dfe29f7fe83caa0ccde4ea0f35ee3ed">&#9670;&nbsp;</a></span>rotate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::rotate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;&#160;</td>
          <td class="paramname"><em>center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>angle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2593</span>                                                            {</div>
<div class="line"><span class="lineno"> 2594</span>  <span class="keywordflow">if</span> (angle == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2595</span>  <span class="keywordflow">if</span> (m_isFlippedX != m_isFlippedY) angle = -angle;</div>
<div class="line"><span class="lineno"> 2596</span>  m_rotationAngle[m_viewMode] += angle;</div>
<div class="line"><span class="lineno"> 2597</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> realCenter = m_viewAff[m_viewMode] * center;</div>
<div class="line"><span class="lineno"> 2598</span>  setViewMatrix(<a class="code hl_class" href="class_t_rotation.html">TRotation</a>(realCenter, angle) * m_viewAff[m_viewMode],</div>
<div class="line"><span class="lineno"> 2599</span>                m_viewMode);</div>
<div class="line"><span class="lineno"> 2600</span>  <a class="code hl_function" href="class_scene_viewer.html#a9865bf9cec6524de9d751f34702aab0f">invalidateAll</a>();</div>
<div class="line"><span class="lineno"> 2601</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a98b5fbea26ca3b3cc40521d73984dc96" name="a98b5fbea26ca3b3cc40521d73984dc96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98b5fbea26ca3b3cc40521d73984dc96">&#9670;&nbsp;</a></span>rotate3D()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::rotate3D </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dPhi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dTheta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2605</span>                                                     {</div>
<div class="line"><span class="lineno"> 2606</span>  <span class="keywordflow">if</span> (dPhi == 0 &amp;&amp; dTheta == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2607</span>  m_phi3D   = (float)tcrop(m_phi3D + dPhi, -90.0, 90.0);</div>
<div class="line"><span class="lineno"> 2608</span>  m_theta3D = (float)tcrop(m_theta3D + dTheta, 0.0, 90.0);</div>
<div class="line"><span class="lineno"> 2609</span>  <a class="code hl_function" href="class_scene_viewer.html#a9865bf9cec6524de9d751f34702aab0f">invalidateAll</a>();</div>
<div class="line"><span class="lineno"> 2610</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a815ed36c49a2b65f33464544a229056b" name="a815ed36c49a2b65f33464544a229056b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a815ed36c49a2b65f33464544a229056b">&#9670;&nbsp;</a></span>set3DLeftSideView()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::set3DLeftSideView </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3198</span>                                    {</div>
<div class="line"><span class="lineno"> 3199</span>  m_phi3D   = -90;</div>
<div class="line"><span class="lineno"> 3200</span>  m_theta3D = 0;</div>
<div class="line"><span class="lineno"> 3201</span>  <a class="code hl_function" href="class_scene_viewer.html#a9865bf9cec6524de9d751f34702aab0f">invalidateAll</a>();</div>
<div class="line"><span class="lineno"> 3202</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6ce34accfa0ad79675753a48cdec07c" name="ac6ce34accfa0ad79675753a48cdec07c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6ce34accfa0ad79675753a48cdec07c">&#9670;&nbsp;</a></span>set3DRightSideView()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::set3DRightSideView </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3206</span>                                     {</div>
<div class="line"><span class="lineno"> 3207</span>  m_phi3D   = 90;</div>
<div class="line"><span class="lineno"> 3208</span>  m_theta3D = 0;</div>
<div class="line"><span class="lineno"> 3209</span>  <a class="code hl_function" href="class_scene_viewer.html#a9865bf9cec6524de9d751f34702aab0f">invalidateAll</a>();</div>
<div class="line"><span class="lineno"> 3210</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="adbd7edc9abfe7a258f50fcdfe3ac32a7" name="adbd7edc9abfe7a258f50fcdfe3ac32a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbd7edc9abfe7a258f50fcdfe3ac32a7">&#9670;&nbsp;</a></span>set3DTopView()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::set3DTopView </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3214</span>                               {</div>
<div class="line"><span class="lineno"> 3215</span>  m_phi3D   = 0;</div>
<div class="line"><span class="lineno"> 3216</span>  m_theta3D = 90;</div>
<div class="line"><span class="lineno"> 3217</span>  <a class="code hl_function" href="class_scene_viewer.html#a9865bf9cec6524de9d751f34702aab0f">invalidateAll</a>();</div>
<div class="line"><span class="lineno"> 3218</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ca6c2ca955f598e104d76cfccf108f0" name="a8ca6c2ca955f598e104d76cfccf108f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ca6c2ca955f598e104d76cfccf108f0">&#9670;&nbsp;</a></span>setActualPixelSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::setActualPixelSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2795</span>                                     {</div>
<div class="line"><span class="lineno"> 2796</span>  <a class="code hl_class" href="class_t_app.html">TApp</a> *app           = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>();</div>
<div class="line"><span class="lineno"> 2797</span>  <a class="code hl_class" href="class_t_xsh_level.html">TXshLevel</a> *l        = app-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>()-&gt;getLevel();</div>
<div class="line"><span class="lineno"> 2798</span>  <a class="code hl_class" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a> *sl = l ? l-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a023065559cff76164ecb6344c586ba27">getSimpleLevel</a>() : 0;</div>
<div class="line"><span class="lineno"> 2799</span>  <span class="keywordflow">if</span> (!sl) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2800</span> </div>
<div class="line"><span class="lineno"> 2801</span>  <a class="code hl_class" href="class_t_frame_id.html">TFrameId</a> fid(app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFid());</div>
<div class="line"><span class="lineno"> 2802</span> </div>
<div class="line"><span class="lineno"> 2803</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> dpi;</div>
<div class="line"><span class="lineno"> 2804</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="class_cleanup_preview_check.html#a231efbbe4e3356757b725452d5efb62d">CleanupPreviewCheck::instance</a>()-&gt;isEnabled()) {</div>
<div class="line"><span class="lineno"> 2805</span>    <span class="comment">// The previewed cleanup image has no image infos yet - retrieve the dpi</span></div>
<div class="line"><span class="lineno"> 2806</span>    <span class="comment">// through</span></div>
<div class="line"><span class="lineno"> 2807</span>    <span class="comment">// the cleanup camera data</span></div>
<div class="line"><span class="lineno"> 2808</span>    <a class="code hl_class" href="class_cleanup_parameters.html">CleanupParameters</a> *cleanupParams = app-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()</div>
<div class="line"><span class="lineno"> 2809</span>                                           -&gt;getScene()</div>
<div class="line"><span class="lineno"> 2810</span>                                           -&gt;<a class="code hl_function" href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">getProperties</a>()</div>
<div class="line"><span class="lineno"> 2811</span>                                           -&gt;<a class="code hl_function" href="class_t_scene_properties.html#a84e6735bb0b0ea5054b9592c9612aff9">getCleanupParameters</a>();</div>
<div class="line"><span class="lineno"> 2812</span> </div>
<div class="line"><span class="lineno"> 2813</span>    <a class="code hl_class" href="class_t_dimension_t.html">TDimension</a> dim(0, 0);</div>
<div class="line"><span class="lineno"> 2814</span>    cleanupParams-&gt;getOutputImageInfo(dim, dpi.x, dpi.y);</div>
<div class="line"><span class="lineno"> 2815</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2816</span>    dpi = sl-&gt;getDpi(fid);</div>
<div class="line"><span class="lineno"> 2817</span> </div>
<div class="line"><span class="lineno"> 2818</span>  <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">inch</a> = <a class="code hl_variable" href="namespace_stage.html#ad3e22e31e2bb6fc1d95a572facce2d5b">Stage::inch</a>;</div>
<div class="line"><span class="lineno"> 2819</span>  <a class="code hl_class" href="class_t_affine.html">TAffine</a> tempAff   = getNormalZoomScale();</div>
<div class="line"><span class="lineno"> 2820</span>  <span class="keywordflow">if</span> (m_isFlippedX) tempAff = tempAff * <a class="code hl_class" href="class_t_scale.html">TScale</a>(-1, 1);</div>
<div class="line"><span class="lineno"> 2821</span>  <span class="keywordflow">if</span> (m_isFlippedY) tempAff = tempAff * <a class="code hl_class" href="class_t_scale.html">TScale</a>(1, -1);</div>
<div class="line"><span class="lineno"> 2822</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> tempScale = dpi;</div>
<div class="line"><span class="lineno"> 2823</span>  <span class="keywordflow">if</span> (m_isFlippedX) tempScale.x = -tempScale.x;</div>
<div class="line"><span class="lineno"> 2824</span>  <span class="keywordflow">if</span> (m_isFlippedY) tempScale.y = -tempScale.y;</div>
<div class="line"><span class="lineno"> 2825</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m_viewAff.size(); ++i)</div>
<div class="line"><span class="lineno"> 2826</span>    setViewMatrix(dpi == <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(0, 0)</div>
<div class="line"><span class="lineno"> 2827</span>                      ? tempAff</div>
<div class="line"><span class="lineno"> 2828</span>                      : <a class="code hl_class" href="class_t_scale.html">TScale</a>(tempScale.x / inch, tempScale.y / inch),</div>
<div class="line"><span class="lineno"> 2829</span>                  i);</div>
<div class="line"><span class="lineno"> 2830</span> </div>
<div class="line"><span class="lineno"> 2831</span>  m_pos         = QPoint(0, 0);</div>
<div class="line"><span class="lineno"> 2832</span>  m_pan3D       = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(0, 0);</div>
<div class="line"><span class="lineno"> 2833</span>  m_zoomScale3D = 0.1;</div>
<div class="line"><span class="lineno"> 2834</span>  m_theta3D     = 20;</div>
<div class="line"><span class="lineno"> 2835</span>  m_phi3D       = 30;</div>
<div class="line"><span class="lineno"> 2836</span>  emit onZoomChanged();</div>
<div class="line"><span class="lineno"> 2837</span> </div>
<div class="line"><span class="lineno"> 2838</span>  <a class="code hl_function" href="class_scene_viewer.html#a9865bf9cec6524de9d751f34702aab0f">invalidateAll</a>();</div>
<div class="line"><span class="lineno"> 2839</span>}</div>
<div class="ttc" id="aclass_cleanup_parameters_html"><div class="ttname"><a href="class_cleanup_parameters.html">CleanupParameters</a></div><div class="ttdef"><b>Definition:</b> cleanupparameters.h:128</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a62353c28294f128e596558065ba41e8f" name="a62353c28294f128e596558065ba41e8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62353c28294f128e596558065ba41e8f">&#9670;&nbsp;</a></span>setEditPreviewSubcamera()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::setEditPreviewSubcamera </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enabled</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  270</span>                                             {</div>
<div class="line"><span class="lineno">  271</span>    m_editPreviewSubCamera = enabled;</div>
<div class="line"><span class="lineno">  272</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a80e2fb17aa36a8a882331be5b2025726" name="a80e2fb17aa36a8a882331be5b2025726"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80e2fb17aa36a8a882331be5b2025726">&#9670;&nbsp;</a></span>setFocus() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::setFocus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  411</span>{ QWidget::setFocus(); };</div>
</div><!-- fragment -->
</div>
</div>
<a id="a90c77460ec4fc143817b3e9479a50f1a" name="a90c77460ec4fc143817b3e9479a50f1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90c77460ec4fc143817b3e9479a50f1a">&#9670;&nbsp;</a></span>setFocus() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::setFocus </td>
          <td>(</td>
          <td class="paramtype">Qt::FocusReason&#160;</td>
          <td class="paramname"><em>reason</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  286</span>{ QWidget::setFocus(reason); };</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4e743c887ede3ea67132600c6661d823" name="a4e743c887ede3ea67132600c6661d823"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e743c887ede3ea67132600c6661d823">&#9670;&nbsp;</a></span>setIsLocator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::setIsLocator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  288</span>{ m_isLocator = <span class="keyword">true</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1aa0bac14417aeeb458439dfed626dae" name="a1aa0bac14417aeeb458439dfed626dae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1aa0bac14417aeeb458439dfed626dae">&#9670;&nbsp;</a></span>setIsStyleShortcutSwitchable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::setIsStyleShortcutSwitchable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  289</span>{ m_isStyleShortcutSwitchable = <span class="keyword">true</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a356c3d5f2a1694bf7e598c29b9fe03e5" name="a356c3d5f2a1694bf7e598c29b9fe03e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a356c3d5f2a1694bf7e598c29b9fe03e5">&#9670;&nbsp;</a></span>setReferenceMode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::setReferenceMode </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>referenceMode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  896</span>                                                    {</div>
<div class="line"><span class="lineno">  897</span>  <span class="keywordflow">if</span> (m_referenceMode == referenceMode) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  898</span> </div>
<div class="line"><span class="lineno">  899</span>  <a class="code hl_class" href="class_t_app.html">TApp</a> *app = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>();</div>
<div class="line"><span class="lineno">  900</span>  <span class="keywordflow">if</span> (app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;isEditingLevel())</div>
<div class="line"><span class="lineno">  901</span>    app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;setFrame(app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>()-&gt;getFrame());</div>
<div class="line"><span class="lineno">  902</span>  <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) {</div>
<div class="line"><span class="lineno">  903</span>    freeze(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  904</span>    emit freezeStateChanged(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  905</span>  }</div>
<div class="line"><span class="lineno">  906</span> </div>
<div class="line"><span class="lineno">  907</span>  m_referenceMode = referenceMode;</div>
<div class="line"><span class="lineno">  908</span>  <a class="code hl_function" href="class_scene_viewer.html#a9865bf9cec6524de9d751f34702aab0f">invalidateAll</a>();</div>
<div class="line"><span class="lineno">  909</span>  emit onZoomChanged();</div>
<div class="line"><span class="lineno">  910</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d36b46e11aebf1a2a0fb8f618c4f627" name="a6d36b46e11aebf1a2a0fb8f618c4f627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d36b46e11aebf1a2a0fb8f618c4f627">&#9670;&nbsp;</a></span>setRulers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::setRulers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ruler.html">Ruler</a> *&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_ruler.html">Ruler</a> *&#160;</td>
          <td class="paramname"><em>h</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  243</span>                                     {</div>
<div class="line"><span class="lineno">  244</span>    m_vRuler = v;</div>
<div class="line"><span class="lineno">  245</span>    m_hRuler = h;</div>
<div class="line"><span class="lineno">  246</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae85206a6a0c35c8ea2374f1442575f39" name="ae85206a6a0c35c8ea2374f1442575f39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae85206a6a0c35c8ea2374f1442575f39">&#9670;&nbsp;</a></span>setTimerAndTargetInstant()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::setTimerAndTargetInstant </td>
          <td>(</td>
          <td class="paramtype">QElapsedTimer *&#160;</td>
          <td class="paramname"><em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qint64&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  298</span>                                                                     {</div>
<div class="line"><span class="lineno">  299</span>    m_timer         = timer;</div>
<div class="line"><span class="lineno">  300</span>    m_targetInstant = target;</div>
<div class="line"><span class="lineno">  301</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a81053fcd8115b5854c5b7dff0af0cf5a" name="a81053fcd8115b5854c5b7dff0af0cf5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81053fcd8115b5854c5b7dff0af0cf5a">&#9670;&nbsp;</a></span>setViewMatrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::setViewMatrix </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_affine.html">TAffine</a> &amp;&#160;</td>
          <td class="paramname"><em>aff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>viewMode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2237</span>                                                                {</div>
<div class="line"><span class="lineno"> 2238</span>  m_viewAff[viewMode] = aff;</div>
<div class="line"><span class="lineno"> 2239</span>  <span class="comment">// In case the previewer is on, request a delayed update</span></div>
<div class="line"><span class="lineno"> 2240</span>  <span class="keywordflow">if</span> (m_previewMode != NO_PREVIEW) requestTimedRefresh();</div>
<div class="line"><span class="lineno"> 2241</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a99f8875eb64f5e9e7f3001fb6556bafd" name="a99f8875eb64f5e9e7f3001fb6556bafd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99f8875eb64f5e9e7f3001fb6556bafd">&#9670;&nbsp;</a></span>setVisual()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::setVisual </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_image_painter_1_1_visual_settings.html">ImagePainter::VisualSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>settings</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  826</span>                                                                      {</div>
<div class="line"><span class="lineno">  827</span>  <span class="comment">// m_visualSettings.m_blankColor = settings.m_blankColor;//for the blank</span></div>
<div class="line"><span class="lineno">  828</span>  <span class="comment">// frames, I don&#39;t have to repaint the viewer are using updateGl!</span></div>
<div class="line"><span class="lineno">  829</span>  <span class="keywordtype">bool</span> repaint     = <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>.needRepaint(settings);</div>
<div class="line"><span class="lineno">  830</span>  <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a> = settings;</div>
<div class="line"><span class="lineno">  831</span>  <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#ab6461a28653bae19432d998149564b43">m_sceneProperties</a> =</div>
<div class="line"><span class="lineno">  832</span>      <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene()-&gt;<a class="code hl_function" href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">getProperties</a>();</div>
<div class="line"><span class="lineno">  833</span>  <span class="keywordflow">if</span> (repaint) <a class="code hl_function" href="class_scene_viewer.html#ab96170500b3df72aa36a3deb5f69cc11">GLInvalidateAll</a>();</div>
<div class="line"><span class="lineno">  834</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aac3340c7d8289f8c4eb7eb1789f72751" name="aac3340c7d8289f8c4eb7eb1789f72751"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac3340c7d8289f8c4eb7eb1789f72751">&#9670;&nbsp;</a></span>showEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::showEvent </td>
          <td>(</td>
          <td class="paramtype">QShowEvent *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1014</span>                                        {</div>
<div class="line"><span class="lineno"> 1015</span>  <a class="code hl_variable" href="class_t_tool_1_1_viewer.html#acf21c5c07a1d6db104fb0518d654e5f3">m_visualSettings</a>.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#ab6461a28653bae19432d998149564b43">m_sceneProperties</a> =</div>
<div class="line"><span class="lineno"> 1016</span>      <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene()-&gt;<a class="code hl_function" href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">getProperties</a>();</div>
<div class="line"><span class="lineno"> 1017</span> </div>
<div class="line"><span class="lineno"> 1018</span>  <span class="comment">// Se il viewer e&#39; show e il preview e&#39; attivo aggiungo il listner al preview</span></div>
<div class="line"><span class="lineno"> 1019</span>  <span class="keywordflow">if</span> (m_previewMode != NO_PREVIEW)</div>
<div class="line"><span class="lineno"> 1020</span>    <a class="code hl_function" href="class_previewer.html#a5eb765b66490a3d99d432f90864bfacd">Previewer::instance</a>(m_previewMode == SUBCAMERA_PREVIEW)-&gt;addListener(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1021</span> </div>
<div class="line"><span class="lineno"> 1022</span>  <a class="code hl_class" href="class_t_app.html">TApp</a> *app = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>();</div>
<div class="line"><span class="lineno"> 1023</span> </div>
<div class="line"><span class="lineno"> 1024</span>  <a class="code hl_class" href="class_t_scene_handle.html">TSceneHandle</a> *sceneHandle = app-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>();</div>
<div class="line"><span class="lineno"> 1025</span>  <span class="keywordtype">bool</span> ret = connect(sceneHandle, SIGNAL(sceneSwitched()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 1026</span>                     SLOT(resetSceneViewer()));</div>
<div class="line"><span class="lineno"> 1027</span>  ret      = ret &amp;&amp; connect(sceneHandle, SIGNAL(sceneChanged()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 1028</span>                       SLOT(onSceneChanged()));</div>
<div class="line"><span class="lineno"> 1029</span>  ret = ret &amp;&amp; connect(sceneHandle, SIGNAL(preferenceChanged(<span class="keyword">const</span> QString &amp;)),</div>
<div class="line"><span class="lineno"> 1030</span>                       <span class="keyword">this</span>, SLOT(onPreferenceChanged(<span class="keyword">const</span> QString &amp;)));</div>
<div class="line"><span class="lineno"> 1031</span> </div>
<div class="line"><span class="lineno"> 1032</span>  <a class="code hl_class" href="class_t_frame_handle.html">TFrameHandle</a> *frameHandle = app-&gt;<a class="code hl_function" href="class_t_app.html#a35516f8175dab3ccdf3d6d3c3e5f59ae">getCurrentFrame</a>();</div>
<div class="line"><span class="lineno"> 1033</span>  ret = ret &amp;&amp; connect(frameHandle, SIGNAL(frameSwitched()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 1034</span>                       SLOT(onFrameSwitched()));</div>
<div class="line"><span class="lineno"> 1035</span> </div>
<div class="line"><span class="lineno"> 1036</span>  <a class="code hl_class" href="class_t_palette_handle.html">TPaletteHandle</a> *paletteHandle =</div>
<div class="line"><span class="lineno"> 1037</span>      app-&gt;getPaletteController()-&gt;getCurrentLevelPalette();</div>
<div class="line"><span class="lineno"> 1038</span>  ret = ret &amp;&amp; connect(paletteHandle, SIGNAL(colorStyleChanged(<span class="keywordtype">bool</span>)), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 1039</span>                       SLOT(update()));</div>
<div class="line"><span class="lineno"> 1040</span> </div>
<div class="line"><span class="lineno"> 1041</span>  ret = ret &amp;&amp; connect(app-&gt;<a class="code hl_function" href="class_t_app.html#a0d91c122eec2b756b7c4780014e49f9e">getCurrentObject</a>(), SIGNAL(objectSwitched()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 1042</span>                       SLOT(onObjectSwitched()));</div>
<div class="line"><span class="lineno"> 1043</span>  ret = ret &amp;&amp; connect(app-&gt;<a class="code hl_function" href="class_t_app.html#a0d91c122eec2b756b7c4780014e49f9e">getCurrentObject</a>(), SIGNAL(objectChanged(<span class="keywordtype">bool</span>)),</div>
<div class="line"><span class="lineno"> 1044</span>                       <span class="keyword">this</span>, SLOT(update()));</div>
<div class="line"><span class="lineno"> 1045</span> </div>
<div class="line"><span class="lineno"> 1046</span>  ret =</div>
<div class="line"><span class="lineno"> 1047</span>      ret &amp;&amp; connect(app-&gt;<a class="code hl_function" href="class_t_app.html#afcdd56d9130b7c39a5227de08a0b65e4">getCurrentOnionSkin</a>(), SIGNAL(onionSkinMaskChanged()),</div>
<div class="line"><span class="lineno"> 1048</span>                     <span class="keyword">this</span>, SLOT(onOnionSkinMaskChanged()));</div>
<div class="line"><span class="lineno"> 1049</span> </div>
<div class="line"><span class="lineno"> 1050</span>  ret = ret &amp;&amp; connect(app-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>(), SIGNAL(xshLevelChanged()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 1051</span>                       SLOT(update()));</div>
<div class="line"><span class="lineno"> 1052</span>  ret = ret &amp;&amp; connect(app-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>(), SIGNAL(xshCanvasSizeChanged()),</div>
<div class="line"><span class="lineno"> 1053</span>                       <span class="keyword">this</span>, SLOT(update()));</div>
<div class="line"><span class="lineno"> 1054</span>  <span class="comment">// when level is switched, update m_dpiScale in order to show white background</span></div>
<div class="line"><span class="lineno"> 1055</span>  <span class="comment">// for Ink&amp;Paint work properly</span></div>
<div class="line"><span class="lineno"> 1056</span>  ret = ret &amp;&amp;</div>
<div class="line"><span class="lineno"> 1057</span>        connect(app-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>(), SIGNAL(xshLevelSwitched(<a class="code hl_class" href="class_t_xsh_level.html">TXshLevel</a> *)),</div>
<div class="line"><span class="lineno"> 1058</span>                <span class="keyword">this</span>, SLOT(<a class="code hl_slot" href="class_scene_viewer.html#a4c5ebcc7632efbf13fd8640531e95766">onLevelSwitched</a>()));</div>
<div class="line"><span class="lineno"> 1059</span> </div>
<div class="line"><span class="lineno"> 1060</span>  ret = ret &amp;&amp; connect(app-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>(), SIGNAL(xsheetChanged()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 1061</span>                       SLOT(onXsheetChanged()));</div>
<div class="line"><span class="lineno"> 1062</span>  ret = ret &amp;&amp; connect(app-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>(), SIGNAL(xsheetSwitched()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 1063</span>                       SLOT(update()));</div>
<div class="line"><span class="lineno"> 1064</span> </div>
<div class="line"><span class="lineno"> 1065</span>  <span class="comment">// update tooltip when tool options are changed</span></div>
<div class="line"><span class="lineno"> 1066</span>  ret = ret &amp;&amp; connect(app-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>(), SIGNAL(toolChanged()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 1067</span>                       SLOT(<a class="code hl_slot" href="class_scene_viewer.html#a950ace4dc4b0afb962fb4884a107d00a">onToolChanged</a>()));</div>
<div class="line"><span class="lineno"> 1068</span>  ret = ret &amp;&amp; connect(app-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>(), SIGNAL(toolCursorTypeChanged()),</div>
<div class="line"><span class="lineno"> 1069</span>                       <span class="keyword">this</span>, SLOT(<a class="code hl_slot" href="class_scene_viewer.html#a950ace4dc4b0afb962fb4884a107d00a">onToolChanged</a>()));</div>
<div class="line"><span class="lineno"> 1070</span> </div>
<div class="line"><span class="lineno"> 1071</span>  ret = ret &amp;&amp;</div>
<div class="line"><span class="lineno"> 1072</span>        connect(app, SIGNAL(tabletLeft()), <span class="keyword">this</span>, SLOT(resetTabletStatus()));</div>
<div class="line"><span class="lineno"> 1073</span><span class="preprocessor">#if defined(x64)</span></div>
<div class="line"><span class="lineno"> 1074</span>  <span class="keywordflow">if</span> (m_stopMotion) {</div>
<div class="line"><span class="lineno"> 1075</span>    ret = ret &amp;&amp; connect(m_stopMotion, SIGNAL(newLiveViewImageReady()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 1076</span>                         SLOT(onNewStopMotionImageReady()));</div>
<div class="line"><span class="lineno"> 1077</span>    ret = ret &amp;&amp; connect(m_stopMotion, SIGNAL(liveViewStopped()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 1078</span>                         SLOT(onStopMotionLiveViewStopped()));</div>
<div class="line"><span class="lineno"> 1079</span>  }</div>
<div class="line"><span class="lineno"> 1080</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1081</span>  assert(ret);</div>
<div class="line"><span class="lineno"> 1082</span> </div>
<div class="line"><span class="lineno"> 1083</span>  <span class="keywordflow">if</span> (m_hRuler &amp;&amp; m_vRuler) {</div>
<div class="line"><span class="lineno"> 1084</span>    <span class="keywordflow">if</span> (!viewRulerToggle.getStatus()) {</div>
<div class="line"><span class="lineno"> 1085</span>      m_hRuler-&gt;hide();</div>
<div class="line"><span class="lineno"> 1086</span>      m_vRuler-&gt;hide();</div>
<div class="line"><span class="lineno"> 1087</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1088</span>      m_hRuler-&gt;show();</div>
<div class="line"><span class="lineno"> 1089</span>      m_vRuler-&gt;show();</div>
<div class="line"><span class="lineno"> 1090</span>    }</div>
<div class="line"><span class="lineno"> 1091</span>  }</div>
<div class="line"><span class="lineno"> 1092</span>  <span class="keywordflow">if</span> (m_shownOnce == <span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno"> 1093</span>    fitToCamera();</div>
<div class="line"><span class="lineno"> 1094</span>    m_shownOnce = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1095</span>  }</div>
<div class="line"><span class="lineno"> 1096</span>  <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;setActiveViewer(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1097</span> </div>
<div class="line"><span class="lineno"> 1098</span>  onPreferenceChanged(<span class="stringliteral">&quot;ColorCalibration&quot;</span>);</div>
<div class="line"><span class="lineno"> 1099</span>  update();</div>
<div class="line"><span class="lineno"> 1100</span>}</div>
<div class="ttc" id="aclass_scene_viewer_html_a4c5ebcc7632efbf13fd8640531e95766"><div class="ttname"><a href="class_scene_viewer.html#a4c5ebcc7632efbf13fd8640531e95766">SceneViewer::onLevelSwitched</a></div><div class="ttdeci">void onLevelSwitched()</div><div class="ttdef"><b>Definition:</b> sceneviewer.cpp:2858</div></div>
<div class="ttc" id="aclass_scene_viewer_html_a950ace4dc4b0afb962fb4884a107d00a"><div class="ttname"><a href="class_scene_viewer.html#a950ace4dc4b0afb962fb4884a107d00a">SceneViewer::onToolChanged</a></div><div class="ttdeci">void onToolChanged()</div><div class="ttdef"><b>Definition:</b> sceneviewer.cpp:2914</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a706c39b5ae56033e32d2394142198301" name="a706c39b5ae56033e32d2394142198301"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a706c39b5ae56033e32d2394142198301">&#9670;&nbsp;</a></span>swapCompared</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::swapCompared </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2630</span>                               {</div>
<div class="line"><span class="lineno"> 2631</span>  m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#afe3ed555ed9a43177446841f0978e58c">m_swapCompared</a> = !m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#afe3ed555ed9a43177446841f0978e58c">m_swapCompared</a>;</div>
<div class="line"><span class="lineno"> 2632</span>  update();</div>
<div class="line"><span class="lineno"> 2633</span>}</div>
<div class="ttc" id="aclass_image_painter_1_1_compare_settings_html_afe3ed555ed9a43177446841f0978e58c"><div class="ttname"><a href="class_image_painter_1_1_compare_settings.html#afe3ed555ed9a43177446841f0978e58c">ImagePainter::CompareSettings::m_swapCompared</a></div><div class="ttdeci">bool m_swapCompared</div><div class="ttdoc">Used to swap compared images.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:94</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a70971e0b0f88badc18059b6c0474e0fd" name="a70971e0b0f88badc18059b6c0474e0fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70971e0b0f88badc18059b6c0474e0fd">&#9670;&nbsp;</a></span>tabletEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::tabletEvent </td>
          <td>(</td>
          <td class="paramtype">QTabletEvent *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  251</span>                                             {</div>
<div class="line"><span class="lineno">  252</span>  <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>  m_tabletEvent = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  255</span>  m_pressure    = e-&gt;pressure();</div>
<div class="line"><span class="lineno">  256</span>  m_tabletMove  = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  257</span>  <span class="comment">// Management of the Eraser pointer</span></div>
<div class="line"><span class="lineno">  258</span>  <a class="code hl_class" href="class_tool_handle.html">ToolHandle</a> *toolHandle = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>();</div>
<div class="line"><span class="lineno">  259</span>  <span class="keywordflow">if</span> (e-&gt;pointerType() == QTabletEvent::Eraser) {</div>
<div class="line"><span class="lineno">  260</span>    <span class="keywordflow">if</span> (!m_eraserPointerOn) {</div>
<div class="line"><span class="lineno">  261</span>      <span class="keywordflow">if</span> (toolHandle-&gt;getTool()-&gt;getName() != T_Eraser) {</div>
<div class="line"><span class="lineno">  262</span>        <span class="comment">// Save the current tool</span></div>
<div class="line"><span class="lineno">  263</span>        m_backupTool = QString::fromStdString(toolHandle-&gt;getTool()-&gt;getName());</div>
<div class="line"><span class="lineno">  264</span>        <span class="comment">// Switch to the Eraser tool</span></div>
<div class="line"><span class="lineno">  265</span>        toolHandle-&gt;setTool(T_Eraser);</div>
<div class="line"><span class="lineno">  266</span>        m_eraserPointerOn = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  267</span>      }</div>
<div class="line"><span class="lineno">  268</span>    }</div>
<div class="line"><span class="lineno">  269</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  270</span>    <span class="keywordflow">if</span> (m_eraserPointerOn) {</div>
<div class="line"><span class="lineno">  271</span>      <span class="comment">// Restore the previous tool</span></div>
<div class="line"><span class="lineno">  272</span>      toolHandle-&gt;setTool(m_backupTool);</div>
<div class="line"><span class="lineno">  273</span>      m_eraserPointerOn = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  274</span>    }</div>
<div class="line"><span class="lineno">  275</span>  }</div>
<div class="line"><span class="lineno">  276</span>  <span class="keywordflow">switch</span> (e-&gt;type()) {</div>
<div class="line"><span class="lineno">  277</span>  <span class="keywordflow">case</span> QEvent::TabletPress: {</div>
<div class="line"><span class="lineno">  278</span><span class="preprocessor">#ifdef MACOSX</span></div>
<div class="line"><span class="lineno">  279</span>    <span class="comment">// In OSX tablet action may cause only tabletEvent, not followed by</span></div>
<div class="line"><span class="lineno">  280</span>    <span class="comment">// mousePressEvent.</span></div>
<div class="line"><span class="lineno">  281</span>    <span class="comment">// So call onPress here in order to enable processing.</span></div>
<div class="line"><span class="lineno">  282</span>    <span class="keywordflow">if</span> (e-&gt;button() == Qt::LeftButton) m_tabletState = Touched;</div>
<div class="line"><span class="lineno">  283</span>    <a class="code hl_class" href="class_t_mouse_event.html">TMouseEvent</a> mouseEvent;</div>
<div class="line"><span class="lineno">  284</span>    initToonzEvent(mouseEvent, e, height(), m_pressure, getDevPixRatio());</div>
<div class="line"><span class="lineno">  285</span>    onPress(mouseEvent);</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>    <span class="comment">// create context menu on right click here</span></div>
<div class="line"><span class="lineno">  288</span>    <span class="keywordflow">if</span> (e-&gt;button() == Qt::RightButton) {</div>
<div class="line"><span class="lineno">  289</span>      m_mouseButton = Qt::NoButton;</div>
<div class="line"><span class="lineno">  290</span>      onContextMenu(e-&gt;pos(), e-&gt;globalPos());</div>
<div class="line"><span class="lineno">  291</span>    }</div>
<div class="line"><span class="lineno">  292</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  293</span>    <span class="comment">// for Windows, use tabletEvent only for the left Button</span></div>
<div class="line"><span class="lineno">  294</span>    <span class="comment">// (regular pen touch), because</span></div>
<div class="line"><span class="lineno">  295</span>    <span class="comment">// the current Qt seems to fail to catch the Wacom&#39;s button binding properly</span></div>
<div class="line"><span class="lineno">  296</span>    <span class="comment">// with QTabletEvent-&gt;button() when pressing middle or right button.</span></div>
<div class="line"><span class="lineno">  297</span>    <span class="comment">// So, in such case set m_tabletEvent = FALSE and let the mousePressEvent to</span></div>
<div class="line"><span class="lineno">  298</span>    <span class="comment">// work.</span></div>
<div class="line"><span class="lineno">  299</span>    <span class="keywordflow">if</span> (e-&gt;button() == Qt::LeftButton) {</div>
<div class="line"><span class="lineno">  300</span>      <span class="comment">// Process the 1st tabletPress encountered and ignore back-to-back</span></div>
<div class="line"><span class="lineno">  301</span>      <span class="comment">// tabletPress events. Treat it as if it happened so a following</span></div>
<div class="line"><span class="lineno">  302</span>      <span class="comment">// mousePressEvent gets ignored</span></div>
<div class="line"><span class="lineno">  303</span>      <span class="keywordflow">if</span> (m_tabletState == Released || m_tabletState == None) {</div>
<div class="line"><span class="lineno">  304</span>        <a class="code hl_class" href="class_t_mouse_event.html">TMouseEvent</a> mouseEvent;</div>
<div class="line"><span class="lineno">  305</span>        initToonzEvent(mouseEvent, e, height(), m_pressure, getDevPixRatio());</div>
<div class="line"><span class="lineno">  306</span>        m_tabletState = Touched;</div>
<div class="line"><span class="lineno">  307</span>        onPress(mouseEvent);</div>
<div class="line"><span class="lineno">  308</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_tabletState == Touched) {</div>
<div class="line"><span class="lineno">  309</span>        m_tabletState = StartStroke;</div>
<div class="line"><span class="lineno">  310</span>      }</div>
<div class="line"><span class="lineno">  311</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  312</span>      m_tabletEvent = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  313</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  314</span> </div>
<div class="line"><span class="lineno">  315</span><span class="preprocessor">#if defined(LINUX) || defined(FREEBSD)</span></div>
<div class="line"><span class="lineno">  316</span>    <span class="comment">// for Linux, create context menu on right click here.</span></div>
<div class="line"><span class="lineno">  317</span>    <span class="comment">// could possibly merge with OSX code above</span></div>
<div class="line"><span class="lineno">  318</span>    <span class="keywordflow">if</span> (e-&gt;button() == Qt::RightButton) {</div>
<div class="line"><span class="lineno">  319</span>      m_mouseButton = Qt::NoButton;</div>
<div class="line"><span class="lineno">  320</span>      onContextMenu(e-&gt;pos(), e-&gt;globalPos());</div>
<div class="line"><span class="lineno">  321</span>    }</div>
<div class="line"><span class="lineno">  322</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  323</span> </div>
<div class="line"><span class="lineno">  324</span>  } <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  325</span>  <span class="keywordflow">case</span> QEvent::TabletRelease: {</div>
<div class="line"><span class="lineno">  326</span><span class="preprocessor">#ifdef MACOSX</span></div>
<div class="line"><span class="lineno">  327</span>    <span class="keywordflow">if</span> (m_tabletState == StartStroke || m_tabletState == OnStroke)</div>
<div class="line"><span class="lineno">  328</span>      m_tabletState = Released;</div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span>    <a class="code hl_class" href="class_t_mouse_event.html">TMouseEvent</a> mouseEvent;</div>
<div class="line"><span class="lineno">  331</span>    initToonzEvent(mouseEvent, e, height(), m_pressure, getDevPixRatio());</div>
<div class="line"><span class="lineno">  332</span>    onRelease(mouseEvent);</div>
<div class="line"><span class="lineno">  333</span> </div>
<div class="line"><span class="lineno">  334</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;getCurrentTool()-&gt;isToolBusy())</div>
<div class="line"><span class="lineno">  335</span>      <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad70b447aff489792cfc3dbac7150a540">getCurrentTool</a>()-&gt;setToolBusy(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  336</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  337</span>    <span class="keywordflow">if</span> (m_tabletState == StartStroke || m_tabletState == OnStroke) {</div>
<div class="line"><span class="lineno">  338</span>      m_tabletState = Released;</div>
<div class="line"><span class="lineno">  339</span>      <a class="code hl_class" href="class_t_mouse_event.html">TMouseEvent</a> mouseEvent;</div>
<div class="line"><span class="lineno">  340</span>      initToonzEvent(mouseEvent, e, height(), m_pressure, getDevPixRatio());</div>
<div class="line"><span class="lineno">  341</span>      onRelease(mouseEvent);</div>
<div class="line"><span class="lineno">  342</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  343</span>      m_tabletEvent = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  344</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  345</span>  } <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  346</span>  <span class="keywordflow">case</span> QEvent::TabletMove: {</div>
<div class="line"><span class="lineno">  347</span><span class="preprocessor">#ifdef MACOSX</span></div>
<div class="line"><span class="lineno">  348</span>    <span class="comment">// for now OSX seems to fail to call enter/leaveEvent properly while</span></div>
<div class="line"><span class="lineno">  349</span>    <span class="comment">// the tablet is floating</span></div>
<div class="line"><span class="lineno">  350</span>    <span class="keywordtype">bool</span> isHoveringInsideViewer =</div>
<div class="line"><span class="lineno">  351</span>        !rect().marginsRemoved(QMargins(5, 5, 5, 5)).contains(e-&gt;pos());</div>
<div class="line"><span class="lineno">  352</span>    <span class="comment">// call the fake enter event</span></div>
<div class="line"><span class="lineno">  353</span>    <span class="keywordflow">if</span> (isHoveringInsideViewer) onEnter();</div>
<div class="line"><span class="lineno">  354</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  355</span>    <span class="comment">// for Windowsm, use tabletEvent only for the left Button</span></div>
<div class="line"><span class="lineno">  356</span>    <span class="keywordflow">if</span> (m_tabletState != StartStroke &amp;&amp; m_tabletState != OnStroke) {</div>
<div class="line"><span class="lineno">  357</span>      m_tabletEvent = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  358</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  359</span>    }</div>
<div class="line"><span class="lineno">  360</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  361</span>    QPointF curPos = e-&gt;posF() * getDevPixRatio();</div>
<div class="line"><span class="lineno">  362</span><span class="preprocessor">#if defined(_WIN32) &amp;&amp; QT_VERSION &gt;= QT_VERSION_CHECK(5, 10, 0)</span></div>
<div class="line"><span class="lineno">  363</span>    <span class="comment">// Use the application attribute Qt::AA_CompressTabletEvents instead of the</span></div>
<div class="line"><span class="lineno">  364</span>    <span class="comment">// delay timer</span></div>
<div class="line"><span class="lineno">  365</span>    <span class="comment">// 21/4/2021 High frequent tablet event caused slowness when deforming with</span></div>
<div class="line"><span class="lineno">  366</span>    <span class="comment">// Raster Selection Tool. So I re-introduced the delay timer to make</span></div>
<div class="line"><span class="lineno">  367</span>    <span class="comment">// necessary interval for it. Deformation will be processed at interval of</span></div>
<div class="line"><span class="lineno">  368</span>    <span class="comment">// 20msec. (See RasterSelectionTool::leftButtonDrag())</span></div>
<div class="line"><span class="lineno">  369</span>    <span class="keywordflow">if</span> (curPos != m_lastMousePos) {</div>
<div class="line"><span class="lineno">  370</span>      <a class="code hl_class" href="class_t_mouse_event.html">TMouseEvent</a> mouseEvent;</div>
<div class="line"><span class="lineno">  371</span>      initToonzEvent(mouseEvent, e, height(), m_pressure, getDevPixRatio(),</div>
<div class="line"><span class="lineno">  372</span>                     m_isBusyOnTabletMove);</div>
<div class="line"><span class="lineno">  373</span>      <span class="keywordflow">if</span> (!m_isBusyOnTabletMove) {</div>
<div class="line"><span class="lineno">  374</span>        m_isBusyOnTabletMove = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  375</span>        QTimer::singleShot(20, <span class="keyword">this</span>, SLOT(releaseBusyOnTabletMove()));</div>
<div class="line"><span class="lineno">  376</span>      }</div>
<div class="line"><span class="lineno">  377</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  378</span>    <span class="comment">// It seems that the tabletEvent is called more often than mouseMoveEvent.</span></div>
<div class="line"><span class="lineno">  379</span>    <span class="comment">// So I fire the interval timer in order to limit the following process</span></div>
<div class="line"><span class="lineno">  380</span>    <span class="comment">// to be called in 50fps in maximum.</span></div>
<div class="line"><span class="lineno">  381</span>    <span class="keywordflow">if</span> (curPos != m_lastMousePos &amp;&amp; !m_isBusyOnTabletMove) {</div>
<div class="line"><span class="lineno">  382</span>      m_isBusyOnTabletMove = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  383</span>      <a class="code hl_class" href="class_t_mouse_event.html">TMouseEvent</a> mouseEvent;</div>
<div class="line"><span class="lineno">  384</span>      initToonzEvent(mouseEvent, e, height(), m_pressure, getDevPixRatio());</div>
<div class="line"><span class="lineno">  385</span>      QTimer::singleShot(20, <span class="keyword">this</span>, SLOT(releaseBusyOnTabletMove()));</div>
<div class="line"><span class="lineno">  386</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span>      <span class="comment">// cancel stroke to prevent drawing while floating</span></div>
<div class="line"><span class="lineno">  389</span>      <span class="comment">// 23/1/2018 There is a case that the pressure becomes zero at the start</span></div>
<div class="line"><span class="lineno">  390</span>      <span class="comment">// and the end of stroke. For such case, stroke should not be cancelled.</span></div>
<div class="line"><span class="lineno">  391</span>      <span class="comment">// So, added a process to finish stroke here instead of cancelling.</span></div>
<div class="line"><span class="lineno">  392</span>      <span class="comment">// This will be called only if the state is OnStroke so at the start</span></div>
<div class="line"><span class="lineno">  393</span>      <span class="comment">// of the stroke this condition will be passed.</span></div>
<div class="line"><span class="lineno">  394</span>      <span class="keywordflow">if</span> (m_tabletState == OnStroke &amp;&amp; m_pressure == 0.0) {</div>
<div class="line"><span class="lineno">  395</span>        m_tabletState       = Released;</div>
<div class="line"><span class="lineno">  396</span>        mouseEvent.m_button = Qt::LeftButton;</div>
<div class="line"><span class="lineno">  397</span>        onRelease(mouseEvent);</div>
<div class="line"><span class="lineno">  398</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  399</span>        m_tabletMove = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  400</span>        onMove(mouseEvent);  <span class="comment">// m_tabletState is set to OnStrole here</span></div>
<div class="line"><span class="lineno">  401</span>      }</div>
<div class="line"><span class="lineno">  402</span>    }</div>
<div class="line"><span class="lineno">  403</span><span class="preprocessor">#ifdef MACOSX</span></div>
<div class="line"><span class="lineno">  404</span>    <span class="comment">// call the fake leave event if the pen is hovering the viewer edge</span></div>
<div class="line"><span class="lineno">  405</span>    <span class="keywordflow">if</span> (!isHoveringInsideViewer) onLeave();</div>
<div class="line"><span class="lineno">  406</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  407</span>  } <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  408</span>  <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  409</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  410</span>  }</div>
<div class="line"><span class="lineno">  411</span>  e-&gt;accept();</div>
<div class="line"><span class="lineno">  412</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab24ab9bd8c81be905d366154463b81df" name="ab24ab9bd8c81be905d366154463b81df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab24ab9bd8c81be905d366154463b81df">&#9670;&nbsp;</a></span>touchEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::touchEvent </td>
          <td>(</td>
          <td class="paramtype">QTouchEvent *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1092</span>                                                     {</div>
<div class="line"><span class="lineno"> 1093</span>  <span class="keywordflow">if</span> (type == QEvent::TouchBegin) {</div>
<div class="line"><span class="lineno"> 1094</span>    <span class="keywordflow">if</span> (m_tabletEvent) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1095</span> </div>
<div class="line"><span class="lineno"> 1096</span>    m_touchActive   = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1097</span>    m_firstPanPoint = e-&gt;touchPoints().at(0).pos();</div>
<div class="line"><span class="lineno"> 1098</span>    m_undoPoint     = m_firstPanPoint;</div>
<div class="line"><span class="lineno"> 1099</span>    <span class="comment">// obtain device type</span></div>
<div class="line"><span class="lineno"> 1100</span>    m_touchDevice = e-&gt;device()-&gt;type();</div>
<div class="line"><span class="lineno"> 1101</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_touchActive) {</div>
<div class="line"><span class="lineno"> 1102</span>    <span class="comment">// touchpads must have 2 finger panning for tools and navigation to be</span></div>
<div class="line"><span class="lineno"> 1103</span>    <span class="comment">// functional</span></div>
<div class="line"><span class="lineno"> 1104</span>    <span class="comment">// on other devices, 1 finger panning is preferred</span></div>
<div class="line"><span class="lineno"> 1105</span>    <span class="keywordflow">if</span> ((e-&gt;touchPoints().count() == 2 &amp;&amp;</div>
<div class="line"><span class="lineno"> 1106</span>         m_touchDevice == QTouchDevice::TouchPad) ||</div>
<div class="line"><span class="lineno"> 1107</span>        (e-&gt;touchPoints().count() == 1 &amp;&amp;</div>
<div class="line"><span class="lineno"> 1108</span>         m_touchDevice == QTouchDevice::TouchScreen)) {</div>
<div class="line"><span class="lineno"> 1109</span>      QTouchEvent::TouchPoint panPoint = e-&gt;touchPoints().at(0);</div>
<div class="line"><span class="lineno"> 1110</span>      <span class="keywordflow">if</span> (!m_panning) {</div>
<div class="line"><span class="lineno"> 1111</span>        QPointF deltaPoint = panPoint.pos() - m_firstPanPoint;</div>
<div class="line"><span class="lineno"> 1112</span>        <span class="comment">// minimize accidental and jerky zooming/rotating during 2 finger</span></div>
<div class="line"><span class="lineno"> 1113</span>        <span class="comment">// panning</span></div>
<div class="line"><span class="lineno"> 1114</span>        <span class="keywordflow">if</span> ((deltaPoint.manhattanLength() &gt; 100) &amp;&amp; !m_zooming &amp;&amp; !m_rotating) {</div>
<div class="line"><span class="lineno"> 1115</span>          m_panning = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1116</span>        }</div>
<div class="line"><span class="lineno"> 1117</span>      }</div>
<div class="line"><span class="lineno"> 1118</span>      <span class="keywordflow">if</span> (m_panning) {</div>
<div class="line"><span class="lineno"> 1119</span>        QPointF centerDelta = (panPoint.pos() * getDevPixRatio()) -</div>
<div class="line"><span class="lineno"> 1120</span>                              (panPoint.lastPos() * getDevPixRatio());</div>
<div class="line"><span class="lineno"> 1121</span>        panQt(centerDelta.toPoint());</div>
<div class="line"><span class="lineno"> 1122</span>      }</div>
<div class="line"><span class="lineno"> 1123</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e-&gt;touchPoints().count() == 3) {</div>
<div class="line"><span class="lineno"> 1124</span>      QPointF newPoint = e-&gt;touchPoints().at(0).pos();</div>
<div class="line"><span class="lineno"> 1125</span>      <span class="keywordflow">if</span> (m_undoPoint.x() - newPoint.x() &gt; 100) {</div>
<div class="line"><span class="lineno"> 1126</span>        CommandManager::instance()-&gt;execute(<span class="stringliteral">&quot;MI_Undo&quot;</span>);</div>
<div class="line"><span class="lineno"> 1127</span>        m_undoPoint = newPoint;</div>
<div class="line"><span class="lineno"> 1128</span>      }</div>
<div class="line"><span class="lineno"> 1129</span>      <span class="keywordflow">if</span> (m_undoPoint.x() - newPoint.x() &lt; -100) {</div>
<div class="line"><span class="lineno"> 1130</span>        CommandManager::instance()-&gt;execute(<span class="stringliteral">&quot;MI_Redo&quot;</span>);</div>
<div class="line"><span class="lineno"> 1131</span>        m_undoPoint = newPoint;</div>
<div class="line"><span class="lineno"> 1132</span>      }</div>
<div class="line"><span class="lineno"> 1133</span>    }</div>
<div class="line"><span class="lineno"> 1134</span>  }</div>
<div class="line"><span class="lineno"> 1135</span>  <span class="keywordflow">if</span> (type == QEvent::TouchEnd || type == QEvent::TouchCancel) {</div>
<div class="line"><span class="lineno"> 1136</span>    m_touchActive = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1137</span>    m_panning     = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1138</span>  }</div>
<div class="line"><span class="lineno"> 1139</span>  e-&gt;accept();</div>
<div class="line"><span class="lineno"> 1140</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a91ae075d7414f6b91b6e8336c05d6936" name="a91ae075d7414f6b91b6e8336c05d6936"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91ae075d7414f6b91b6e8336c05d6936">&#9670;&nbsp;</a></span>wheelEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::wheelEvent </td>
          <td>(</td>
          <td class="paramtype">QWheelEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  937</span>                                               {</div>
<div class="line"><span class="lineno">  938</span>  <span class="keywordflow">if</span> (m_freezedStatus != NO_FREEZED) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  939</span> </div>
<div class="line"><span class="lineno">  940</span>  <span class="keywordtype">int</span> delta = 0;</div>
<div class="line"><span class="lineno">  941</span>  <span class="keywordflow">switch</span> (event-&gt;source()) {</div>
<div class="line"><span class="lineno">  942</span>  <span class="keywordflow">case</span> Qt::MouseEventNotSynthesized: {</div>
<div class="line"><span class="lineno">  943</span>    <span class="keywordflow">if</span> (event-&gt;modifiers() &amp; Qt::AltModifier)</div>
<div class="line"><span class="lineno">  944</span>      delta = <span class="keyword">event</span>-&gt;angleDelta().x();</div>
<div class="line"><span class="lineno">  945</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  946</span>      delta = <span class="keyword">event</span>-&gt;angleDelta().y();</div>
<div class="line"><span class="lineno">  947</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  948</span>  }</div>
<div class="line"><span class="lineno">  949</span> </div>
<div class="line"><span class="lineno">  950</span>  <span class="keywordflow">case</span> Qt::MouseEventSynthesizedBySystem: {</div>
<div class="line"><span class="lineno">  951</span>    QPoint numPixels  = <span class="keyword">event</span>-&gt;pixelDelta();</div>
<div class="line"><span class="lineno">  952</span>    QPoint numDegrees = <span class="keyword">event</span>-&gt;angleDelta() / 8;</div>
<div class="line"><span class="lineno">  953</span>    <span class="keywordflow">if</span> (!numPixels.isNull()) {</div>
<div class="line"><span class="lineno">  954</span>      delta = <span class="keyword">event</span>-&gt;pixelDelta().y();</div>
<div class="line"><span class="lineno">  955</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!numDegrees.isNull()) {</div>
<div class="line"><span class="lineno">  956</span>      QPoint numSteps = numDegrees / 15;</div>
<div class="line"><span class="lineno">  957</span>      delta           = numSteps.y();</div>
<div class="line"><span class="lineno">  958</span>    }</div>
<div class="line"><span class="lineno">  959</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  960</span>  }</div>
<div class="line"><span class="lineno">  961</span> </div>
<div class="line"><span class="lineno">  962</span>  <span class="keywordflow">default</span>:  <span class="comment">// Qt::MouseEventSynthesizedByQt,</span></div>
<div class="line"><span class="lineno">  963</span>            <span class="comment">// Qt::MouseEventSynthesizedByApplication</span></div>
<div class="line"><span class="lineno">  964</span>  {</div>
<div class="line"><span class="lineno">  965</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;not supported event: Qt::MouseEventSynthesizedByQt, &quot;</span></div>
<div class="line"><span class="lineno">  966</span>                 <span class="stringliteral">&quot;Qt::MouseEventSynthesizedByApplication&quot;</span></div>
<div class="line"><span class="lineno">  967</span>              &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  968</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  969</span>  }</div>
<div class="line"><span class="lineno">  970</span> </div>
<div class="line"><span class="lineno">  971</span>  }  <span class="comment">// end switch</span></div>
<div class="line"><span class="lineno">  972</span> </div>
<div class="line"><span class="lineno">  973</span>  <span class="keywordflow">if</span> (abs(delta) &gt; 0) {</div>
<div class="line"><span class="lineno">  974</span>    <span class="comment">// scrub with mouse wheel</span></div>
<div class="line"><span class="lineno">  975</span>    <span class="keywordflow">if</span> ((event-&gt;modifiers() &amp; Qt::AltModifier) &amp;&amp;</div>
<div class="line"><span class="lineno">  976</span>        (event-&gt;modifiers() &amp; Qt::ShiftModifier) &amp;&amp;</div>
<div class="line"><span class="lineno">  977</span>        (event-&gt;modifiers() &amp; Qt::ControlModifier)) {</div>
<div class="line"><span class="lineno">  978</span>      <span class="keywordflow">if</span> (delta &lt; 0) {</div>
<div class="line"><span class="lineno">  979</span>        CommandManager::instance()-&gt;execute(<span class="stringliteral">&quot;MI_NextStep&quot;</span>);</div>
<div class="line"><span class="lineno">  980</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (delta &gt; 0) {</div>
<div class="line"><span class="lineno">  981</span>        CommandManager::instance()-&gt;execute(<span class="stringliteral">&quot;MI_PrevStep&quot;</span>);</div>
<div class="line"><span class="lineno">  982</span>      }</div>
<div class="line"><span class="lineno">  983</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((event-&gt;modifiers() &amp; Qt::ControlModifier) &amp;&amp;</div>
<div class="line"><span class="lineno">  984</span>               (event-&gt;modifiers() &amp; Qt::ShiftModifier)) {</div>
<div class="line"><span class="lineno">  985</span>      <span class="keywordflow">if</span> (delta &lt; 0) {</div>
<div class="line"><span class="lineno">  986</span>        CommandManager::instance()-&gt;execute(<span class="stringliteral">&quot;MI_NextFrame&quot;</span>);</div>
<div class="line"><span class="lineno">  987</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (delta &gt; 0) {</div>
<div class="line"><span class="lineno">  988</span>        CommandManager::instance()-&gt;execute(<span class="stringliteral">&quot;MI_PrevFrame&quot;</span>);</div>
<div class="line"><span class="lineno">  989</span>      }</div>
<div class="line"><span class="lineno">  990</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((event-&gt;modifiers() &amp; Qt::ShiftModifier) &amp;&amp;</div>
<div class="line"><span class="lineno">  991</span>               (event-&gt;modifiers() &amp; Qt::AltModifier)) {</div>
<div class="line"><span class="lineno">  992</span>      <span class="keywordflow">if</span> (delta &lt; 0) {</div>
<div class="line"><span class="lineno">  993</span>        CommandManager::instance()-&gt;execute(<span class="stringliteral">&quot;MI_NextDrawing&quot;</span>);</div>
<div class="line"><span class="lineno">  994</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (delta &gt; 0) {</div>
<div class="line"><span class="lineno">  995</span>        CommandManager::instance()-&gt;execute(<span class="stringliteral">&quot;MI_PrevDrawing&quot;</span>);</div>
<div class="line"><span class="lineno">  996</span>      }</div>
<div class="line"><span class="lineno">  997</span>    }</div>
<div class="line"><span class="lineno">  998</span>    <span class="comment">// Mouse wheel zoom interfered with touchpad panning (touch enabled)</span></div>
<div class="line"><span class="lineno">  999</span>    <span class="comment">// Now if touch is enabled, touchpads ignore the mouse wheel zoom</span></div>
<div class="line"><span class="lineno"> 1000</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((m_gestureActive == <span class="keyword">true</span> &amp;&amp;</div>
<div class="line"><span class="lineno"> 1001</span>              m_touchDevice == QTouchDevice::TouchScreen) ||</div>
<div class="line"><span class="lineno"> 1002</span>             m_gestureActive == <span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno"> 1003</span>      zoomQt(event-&gt;pos() * getDevPixRatio(), exp(0.001 * delta));</div>
<div class="line"><span class="lineno"> 1004</span>      m_panning = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1005</span>    }</div>
<div class="line"><span class="lineno"> 1006</span>  }</div>
<div class="line"><span class="lineno"> 1007</span>  <span class="keyword">event</span>-&gt;accept();</div>
<div class="line"><span class="lineno"> 1008</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac1a70ad1c9fc56002d67b8a6f6609e55" name="ac1a70ad1c9fc56002d67b8a6f6609e55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1a70ad1c9fc56002d67b8a6f6609e55">&#9670;&nbsp;</a></span>winToWorld() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_point_t.html">TPointD</a> SceneViewer::winToWorld </td>
          <td>(</td>
          <td class="paramtype">const QPointF &amp;&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  961</span>                                                        {</div>
<div class="line"><span class="lineno">  962</span>  <span class="comment">// coordinate window (origine in alto a sinistra) -&gt; coordinate colonna</span></div>
<div class="line"><span class="lineno">  963</span>  <span class="comment">// (origine al centro dell&#39;immagine)</span></div>
<div class="line"><span class="lineno">  964</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> pp(pos.x() - (<span class="keywordtype">double</span>)width() / 2.0,</div>
<div class="line"><span class="lineno">  965</span>             -pos.y() + (<span class="keywordtype">double</span>)height() / 2.0);</div>
<div class="line"><span class="lineno">  966</span>  <span class="keywordflow">if</span> (is3DView()) {</div>
<div class="line"><span class="lineno">  967</span>    <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh            = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()-&gt;getXsheet();</div>
<div class="line"><span class="lineno">  968</span>    <a class="code hl_class" href="class_t_stage_object_id.html">TStageObjectId</a> cameraId = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a5dc925584e35e1678f5678b79c470959">getStageObjectTree</a>()-&gt;<a class="code hl_function" href="class_t_stage_object_tree.html#a7d63ae5d60c3a3aacf5da58c108ac167">getCurrentCameraId</a>();</div>
<div class="line"><span class="lineno">  969</span>    <span class="keywordtype">double</span> z                = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">getStageObject</a>(cameraId)-&gt;<a class="code hl_function" href="class_t_stage_object.html#a52b1a3ec50ed35fbc07c9a3b64ecc21c">getZ</a>(</div>
<div class="line"><span class="lineno">  970</span>        <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;getCurrentFrame()-&gt;getFrame());</div>
<div class="line"><span class="lineno">  971</span> </div>
<div class="line"><span class="lineno">  972</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> p(pp.x - m_pan3D.x, pp.y - m_pan3D.y);</div>
<div class="line"><span class="lineno">  973</span>    p               = p * (1 / m_zoomScale3D);</div>
<div class="line"><span class="lineno">  974</span>    <span class="keywordtype">double</span> theta    = m_theta3D * M_PI_180;</div>
<div class="line"><span class="lineno">  975</span>    <span class="keywordtype">double</span> phi      = m_phi3D * M_PI_180;</div>
<div class="line"><span class="lineno">  976</span>    <span class="keywordtype">double</span> cs_phi   = cos(phi);</div>
<div class="line"><span class="lineno">  977</span>    <span class="keywordtype">double</span> sn_phi   = sin(phi);</div>
<div class="line"><span class="lineno">  978</span>    <span class="keywordtype">double</span> cs_theta = cos(theta);</div>
<div class="line"><span class="lineno">  979</span>    <span class="keywordtype">double</span> sn_theta = sin(theta);</div>
<div class="line"><span class="lineno">  980</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> a(cs_phi, sn_theta * sn_phi);   <span class="comment">// proiezione di (1,0,0)</span></div>
<div class="line"><span class="lineno">  981</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> b(0, cs_theta);                 <span class="comment">// proiezione di (0,1,0)</span></div>
<div class="line"><span class="lineno">  982</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> c(sn_phi, -sn_theta * cs_phi);  <span class="comment">// proiezione di (0,0,1)</span></div>
<div class="line"><span class="lineno">  983</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> aa = rotate90(a);</div>
<div class="line"><span class="lineno">  984</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> bb = rotate90(b);</div>
<div class="line"><span class="lineno">  985</span> </div>
<div class="line"><span class="lineno">  986</span>    <span class="keywordtype">double</span> abb = a * bb;</div>
<div class="line"><span class="lineno">  987</span>    <span class="keywordtype">double</span> baa = b * aa;</div>
<div class="line"><span class="lineno">  988</span>    <span class="keywordflow">if</span> (fabs(abb) &gt; 0.001 &amp;&amp; fabs(baa) &gt; 0.001) {</div>
<div class="line"><span class="lineno">  989</span>      p -= c * z;</div>
<div class="line"><span class="lineno">  990</span>      <a class="code hl_class" href="class_t_point_t.html">TPointD</a> g((p * bb) / (a * bb), (p * aa) / (b * aa));</div>
<div class="line"><span class="lineno">  991</span>      <span class="keywordflow">return</span> <a class="code hl_class" href="class_t_affine.html">TAffine</a>() * g;</div>
<div class="line"><span class="lineno">  992</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  993</span>      <span class="keywordflow">return</span> <a class="code hl_class" href="class_t_affine.html">TAffine</a>() * <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(0, 0);</div>
<div class="line"><span class="lineno">  994</span>  }</div>
<div class="line"><span class="lineno">  995</span> </div>
<div class="line"><span class="lineno">  996</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>().<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>() * pp;</div>
<div class="line"><span class="lineno">  997</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a66e2243fc4447eddb73d6fc09d1a112b" name="a66e2243fc4447eddb73d6fc09d1a112b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66e2243fc4447eddb73d6fc09d1a112b">&#9670;&nbsp;</a></span>winToWorld() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_point_t.html">TPointD</a> SceneViewer::winToWorld </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;&#160;</td>
          <td class="paramname"><em>winPos</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1001</span>                                                           {</div>
<div class="line"><span class="lineno"> 1002</span>  <span class="keywordflow">return</span> winToWorld(QPointF(winPos.x, height() - winPos.y));</div>
<div class="line"><span class="lineno"> 1003</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb3a1d375ff7172f35364adc9cc0500e" name="aeb3a1d375ff7172f35364adc9cc0500e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb3a1d375ff7172f35364adc9cc0500e">&#9670;&nbsp;</a></span>worldToPos()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_point_t.html">TPointD</a> SceneViewer::worldToPos </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;&#160;</td>
          <td class="paramname"><em>worldPos</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>return pos in pixel, bottom-left origin </p>

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html#a00ad8f88b4832e92cfd91b3f5ba8efd6">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1007</span>                                                             {</div>
<div class="line"><span class="lineno"> 1008</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> p = <a class="code hl_function" href="class_scene_viewer.html#a3f746b9c53dc17030711cac65d96f625">getViewMatrix</a>() * worldPos;</div>
<div class="line"><span class="lineno"> 1009</span>  <span class="keywordflow">return</span> <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(width() / 2 + p.x, height() / 2 + p.y);</div>
<div class="line"><span class="lineno"> 1010</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l02211">getViewMatrix()</a>.</p>

</div>
</div>
<a id="a1144b3007e23076105bd42b02a127e9d" name="a1144b3007e23076105bd42b02a127e9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1144b3007e23076105bd42b02a127e9d">&#9670;&nbsp;</a></span>zoom()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::zoom </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;&#160;</td>
          <td class="paramname"><em>center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>factor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_tool_1_1_viewer.html">TTool::Viewer</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2531</span>                                                           {</div>
<div class="line"><span class="lineno"> 2532</span>  zoomQt(QPoint(center.x, height() - center.y), factor);</div>
<div class="line"><span class="lineno"> 2533</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2d4cced2ccad45e662e734ec7be5a856" name="a2d4cced2ccad45e662e734ec7be5a856"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d4cced2ccad45e662e734ec7be5a856">&#9670;&nbsp;</a></span>zoomIn</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::zoomIn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2579</span>                         {</div>
<div class="line"><span class="lineno"> 2580</span>  m_lastMousePos = rect().center();</div>
<div class="line"><span class="lineno"> 2581</span>  zoomQt(<span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 2582</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3bbf29560bedb29d0004a13159e56d29" name="a3bbf29560bedb29d0004a13159e56d29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bbf29560bedb29d0004a13159e56d29">&#9670;&nbsp;</a></span>zoomOut</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::zoomOut </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2586</span>                          {</div>
<div class="line"><span class="lineno"> 2587</span>  m_lastMousePos = rect().center();</div>
<div class="line"><span class="lineno"> 2588</span>  zoomQt(<span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 2589</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aee4ed44d7e7e472a7fc22cf7c9db1360" name="aee4ed44d7e7e472a7fc22cf7c9db1360"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee4ed44d7e7e472a7fc22cf7c9db1360">&#9670;&nbsp;</a></span>zoomQt() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::zoomQt </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>forward</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>reset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2318</span>                                                 {</div>
<div class="line"><span class="lineno"> 2319</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> delta(m_lastMousePos.x() - width() / 2,</div>
<div class="line"><span class="lineno"> 2320</span>                -m_lastMousePos.y() + height() / 2);</div>
<div class="line"><span class="lineno"> 2321</span> </div>
<div class="line"><span class="lineno"> 2322</span>  <span class="keywordflow">if</span> (is3DView()) {</div>
<div class="line"><span class="lineno"> 2323</span>    <span class="keywordflow">if</span> (reset || ((m_zoomScale3D &lt; 500 || !forward) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2324</span>                  (m_zoomScale3D &gt; 0.01 || forward))) {</div>
<div class="line"><span class="lineno"> 2325</span>      <span class="keywordtype">double</span> oldZoomScale = m_zoomScale3D;</div>
<div class="line"><span class="lineno"> 2326</span>      m_zoomScale3D =</div>
<div class="line"><span class="lineno"> 2327</span>          reset ? 1</div>
<div class="line"><span class="lineno"> 2328</span>                : ImageUtils::getQuantizedZoomFactor(m_zoomScale3D, forward);</div>
<div class="line"><span class="lineno"> 2329</span> </div>
<div class="line"><span class="lineno"> 2330</span>      m_pan3D = -(m_zoomScale3D / oldZoomScale) * -m_pan3D;</div>
<div class="line"><span class="lineno"> 2331</span>    }</div>
<div class="line"><span class="lineno"> 2332</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2333</span>    <span class="comment">// a factor for getting pixel-based zoom ratio</span></div>
<div class="line"><span class="lineno"> 2334</span>    <span class="keywordtype">double</span> dpiFactor = <a class="code hl_function" href="class_scene_viewer.html#a7fd1e40caee87c57edd5d890dc41b8c8">getDpiFactor</a>();</div>
<div class="line"><span class="lineno"> 2335</span>    <span class="comment">// when showing the viewer with full-screen mode,</span></div>
<div class="line"><span class="lineno"> 2336</span>    <span class="comment">// add a zoom factor which can show image fitting with the screen size</span></div>
<div class="line"><span class="lineno"> 2337</span>    <span class="keywordtype">double</span> zoomScaleFittingWithScreen = 0.0f;</div>
<div class="line"><span class="lineno"> 2338</span>    <span class="keywordflow">if</span> (dpiFactor != 1.0) {</div>
<div class="line"><span class="lineno"> 2339</span>      <span class="comment">// check if the viewer is in full screen mode</span></div>
<div class="line"><span class="lineno"> 2340</span>      <a class="code hl_class" href="class_image_utils_1_1_full_screen_widget.html">ImageUtils::FullScreenWidget</a> *fsWidget =</div>
<div class="line"><span class="lineno"> 2341</span>          <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_image_utils_1_1_full_screen_widget.html">ImageUtils::FullScreenWidget</a> *<span class="keyword">&gt;</span>(parentWidget());</div>
<div class="line"><span class="lineno"> 2342</span>      <span class="keywordflow">if</span> (fsWidget &amp;&amp; (fsWidget-&gt;windowState() &amp; Qt::WindowFullScreen) != 0)</div>
<div class="line"><span class="lineno"> 2343</span>        zoomScaleFittingWithScreen = <a class="code hl_function" href="class_scene_viewer.html#abc2a1a75cd067ec5588dfdbd583d483b">getZoomScaleFittingWithScreen</a>();</div>
<div class="line"><span class="lineno"> 2344</span>    }</div>
<div class="line"><span class="lineno"> 2345</span> </div>
<div class="line"><span class="lineno"> 2346</span>    <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno"> 2347</span> </div>
<div class="line"><span class="lineno"> 2348</span>    <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++) {</div>
<div class="line"><span class="lineno"> 2349</span>      <a class="code hl_class" href="class_t_affine.html">TAffine</a> &amp;viewAff = m_viewAff[i];</div>
<div class="line"><span class="lineno"> 2350</span>      <span class="keywordflow">if</span> (m_isFlippedX) viewAff = viewAff * <a class="code hl_class" href="class_t_scale.html">TScale</a>(-1, 1);</div>
<div class="line"><span class="lineno"> 2351</span>      <span class="keywordflow">if</span> (m_isFlippedX) viewAff = viewAff * <a class="code hl_class" href="class_t_scale.html">TScale</a>(1, -1);</div>
<div class="line"><span class="lineno"> 2352</span>      <span class="keywordtype">double</span> scale2 = std::abs(viewAff.det());</div>
<div class="line"><span class="lineno"> 2353</span>      <span class="keywordflow">if</span> (m_isFlippedX) viewAff = viewAff * <a class="code hl_class" href="class_t_scale.html">TScale</a>(-1, 1);</div>
<div class="line"><span class="lineno"> 2354</span>      <span class="keywordflow">if</span> (m_isFlippedX) viewAff = viewAff * <a class="code hl_class" href="class_t_scale.html">TScale</a>(1, -1);</div>
<div class="line"><span class="lineno"> 2355</span>      <span class="keywordflow">if</span> (reset || ((scale2 &lt; 100000 || !forward) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2356</span>                    (scale2 &gt; 0.001 * 0.05 || forward))) {</div>
<div class="line"><span class="lineno"> 2357</span>        <span class="keywordtype">double</span> oldZoomScale = sqrt(scale2) * dpiFactor;</div>
<div class="line"><span class="lineno"> 2358</span>        <span class="keywordtype">double</span> zoomScale =</div>
<div class="line"><span class="lineno"> 2359</span>            reset ? 1</div>
<div class="line"><span class="lineno"> 2360</span>                  : ImageUtils::getQuantizedZoomFactor(oldZoomScale, forward);</div>
<div class="line"><span class="lineno"> 2361</span> </div>
<div class="line"><span class="lineno"> 2362</span>        <span class="comment">// threshold value -0.001 is intended to absorb the error of calculation</span></div>
<div class="line"><span class="lineno"> 2363</span>        <span class="keywordflow">if</span> ((oldZoomScale - zoomScaleFittingWithScreen) *</div>
<div class="line"><span class="lineno"> 2364</span>                (zoomScale - zoomScaleFittingWithScreen) &lt;</div>
<div class="line"><span class="lineno"> 2365</span>            -0.001)</div>
<div class="line"><span class="lineno"> 2366</span>          zoomScale = zoomScaleFittingWithScreen;</div>
<div class="line"><span class="lineno"> 2367</span>        <span class="comment">// zoom center = viewer center</span></div>
<div class="line"><span class="lineno"> 2368</span>        <span class="keywordflow">if</span> (Preferences::instance()-&gt;getViewerZoomCenter())</div>
<div class="line"><span class="lineno"> 2369</span>          setViewMatrix(<a class="code hl_class" href="class_t_scale.html">TScale</a>(zoomScale / oldZoomScale) * viewAff, i);</div>
<div class="line"><span class="lineno"> 2370</span>        <span class="comment">// zoom center = mouse pos</span></div>
<div class="line"><span class="lineno"> 2371</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2372</span>          setViewMatrix(<a class="code hl_class" href="class_t_translation.html">TTranslation</a>(delta) * <a class="code hl_class" href="class_t_scale.html">TScale</a>(zoomScale / oldZoomScale) *</div>
<div class="line"><span class="lineno"> 2373</span>                            <a class="code hl_class" href="class_t_translation.html">TTranslation</a>(-delta) * viewAff,</div>
<div class="line"><span class="lineno"> 2374</span>                        i);</div>
<div class="line"><span class="lineno"> 2375</span>      }</div>
<div class="line"><span class="lineno"> 2376</span>    }</div>
<div class="line"><span class="lineno"> 2377</span>  }</div>
<div class="line"><span class="lineno"> 2378</span> </div>
<div class="line"><span class="lineno"> 2379</span>  <a class="code hl_function" href="class_scene_viewer.html#ab96170500b3df72aa36a3deb5f69cc11">GLInvalidateAll</a>();</div>
<div class="line"><span class="lineno"> 2380</span>  emit onZoomChanged();</div>
<div class="line"><span class="lineno"> 2381</span>}</div>
<div class="ttc" id="aclass_image_utils_1_1_full_screen_widget_html"><div class="ttname"><a href="class_image_utils_1_1_full_screen_widget.html">ImageUtils::FullScreenWidget</a></div><div class="ttdoc">Temporary class used to deal with QTBUG #7556 - QGLWidgets going fullscreen need a containing widget ...</div><div class="ttdef"><b>Definition:</b> imageutils.h:160</div></div>
<div class="ttc" id="aclass_scene_viewer_html_abc2a1a75cd067ec5588dfdbd583d483b"><div class="ttname"><a href="class_scene_viewer.html#abc2a1a75cd067ec5588dfdbd583d483b">SceneViewer::getZoomScaleFittingWithScreen</a></div><div class="ttdeci">double getZoomScaleFittingWithScreen()</div><div class="ttdef"><b>Definition:</b> sceneviewer.cpp:2451</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a474e47442ee803ddb71c6d5484806b28" name="a474e47442ee803ddb71c6d5484806b28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a474e47442ee803ddb71c6d5484806b28">&#9670;&nbsp;</a></span>zoomQt() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SceneViewer::zoomQt </td>
          <td>(</td>
          <td class="paramtype">const QPoint &amp;&#160;</td>
          <td class="paramname"><em>center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>scaleFactor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2495</span>                                                            {</div>
<div class="line"><span class="lineno"> 2496</span>  <span class="keywordflow">if</span> (factor == 1.0) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2497</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> delta(center.x() - width() / 2, -center.y() + height() / 2);</div>
<div class="line"><span class="lineno"> 2498</span>  <span class="keywordtype">double</span> oldZoomScale = m_zoomScale3D;</div>
<div class="line"><span class="lineno"> 2499</span> </div>
<div class="line"><span class="lineno"> 2500</span>  <span class="keywordflow">if</span> (is3DView()) {</div>
<div class="line"><span class="lineno"> 2501</span>    <span class="keywordflow">if</span> ((m_zoomScale3D &lt; 500 || factor &lt; 1) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2502</span>        (m_zoomScale3D &gt; 0.01 || factor &gt; 1)) {</div>
<div class="line"><span class="lineno"> 2503</span>      m_zoomScale3D *= factor;</div>
<div class="line"><span class="lineno"> 2504</span>      m_pan3D = -(m_zoomScale3D / oldZoomScale) * (delta - m_pan3D) + delta;</div>
<div class="line"><span class="lineno"> 2505</span>    }</div>
<div class="line"><span class="lineno"> 2506</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2507</span>    <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno"> 2508</span>    <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++) {</div>
<div class="line"><span class="lineno"> 2509</span>      <a class="code hl_class" href="class_t_affine.html">TAffine</a> &amp;viewAff = m_viewAff[i];</div>
<div class="line"><span class="lineno"> 2510</span>      <span class="keywordtype">double</span> scale2    = fabs(viewAff.det());</div>
<div class="line"><span class="lineno"> 2511</span>      <span class="keywordflow">if</span> ((scale2 &lt; 100000 || factor &lt; 1) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2512</span>          (scale2 &gt; 0.001 * 0.05 || factor &gt; 1)) {</div>
<div class="line"><span class="lineno"> 2513</span>        <span class="keywordflow">if</span> (i == m_viewMode) {</div>
<div class="line"><span class="lineno"> 2514</span>          <span class="comment">// viewAff = TTranslation(delta) * TScale(factor) *</span></div>
<div class="line"><span class="lineno"> 2515</span>          <span class="comment">// TTranslation(-delta) * viewAff;</span></div>
<div class="line"><span class="lineno"> 2516</span>          setViewMatrix(<a class="code hl_class" href="class_t_translation.html">TTranslation</a>(delta) * <a class="code hl_class" href="class_t_scale.html">TScale</a>(factor) *</div>
<div class="line"><span class="lineno"> 2517</span>                            <a class="code hl_class" href="class_t_translation.html">TTranslation</a>(-delta) * viewAff,</div>
<div class="line"><span class="lineno"> 2518</span>                        i);</div>
<div class="line"><span class="lineno"> 2519</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2520</span>          <span class="comment">// viewAff = TScale(factor) * viewAff;</span></div>
<div class="line"><span class="lineno"> 2521</span>          setViewMatrix(<a class="code hl_class" href="class_t_scale.html">TScale</a>(factor) * viewAff, i);</div>
<div class="line"><span class="lineno"> 2522</span>        }</div>
<div class="line"><span class="lineno"> 2523</span>      }</div>
<div class="line"><span class="lineno"> 2524</span>    }</div>
<div class="line"><span class="lineno"> 2525</span>  }</div>
<div class="line"><span class="lineno"> 2526</span> </div>
<div class="line"><span class="lineno"> 2527</span>  <a class="code hl_function" href="class_scene_viewer.html#ab96170500b3df72aa36a3deb5f69cc11">GLInvalidateAll</a>();</div>
<div class="line"><span class="lineno"> 2528</span>  emit onZoomChanged();</div>
<div class="line"><span class="lineno"> 2529</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a121d535ed9bd89cfa48c5542ca468828" name="a121d535ed9bd89cfa48c5542ca468828"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a121d535ed9bd89cfa48c5542ca468828">&#9670;&nbsp;</a></span>m_actualClipRect</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_rect_t.html">TRect</a> SceneViewer::m_actualClipRect</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad23acf9952775fe08a93239d56b7c241" name="ad23acf9952775fe08a93239d56b7c241"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad23acf9952775fe08a93239d56b7c241">&#9670;&nbsp;</a></span>m_draw3DMode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SceneViewer::m_draw3DMode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a72a668b675b54e9c1518c473d9a34193" name="a72a668b675b54e9c1518c473d9a34193"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72a668b675b54e9c1518c473d9a34193">&#9670;&nbsp;</a></span>m_drawCameraAff</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_affine.html">TAffine</a> SceneViewer::m_drawCameraAff</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a458f78b423b3f1447987aa9c1190de47" name="a458f78b423b3f1447987aa9c1190de47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a458f78b423b3f1447987aa9c1190de47">&#9670;&nbsp;</a></span>m_drawCameraTest</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SceneViewer::m_drawCameraTest</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a080fbba06260c062057ceca5e9bb164e" name="a080fbba06260c062057ceca5e9bb164e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a080fbba06260c062057ceca5e9bb164e">&#9670;&nbsp;</a></span>m_drawEditingLevel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SceneViewer::m_drawEditingLevel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aab69590762709fa8e8a3ae1c1a459145" name="aab69590762709fa8e8a3ae1c1a459145"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab69590762709fa8e8a3ae1c1a459145">&#9670;&nbsp;</a></span>m_drawIsTableVisible</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SceneViewer::m_drawIsTableVisible</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aaf3c82f7af6c36fc5950e84c8e400ffb" name="aaf3c82f7af6c36fc5950e84c8e400ffb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf3c82f7af6c36fc5950e84c8e400ffb">&#9670;&nbsp;</a></span>m_drawTableAff</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_affine.html">TAffine</a> SceneViewer::m_drawTableAff</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>E:/opentoonz/toonz/sources/toonz/<a class="el" href="">sceneviewer.h</a></li>
<li>E:/opentoonz/toonz/sources/toonz/<a class="el" href="">sceneviewer.cpp</a></li>
<li>E:/opentoonz/toonz/sources/toonz/<a class="el" href="">sceneviewerevents.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
