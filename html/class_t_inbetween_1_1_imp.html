<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: TInbetween::Imp Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="class_t_inbetween.html">TInbetween</a></li><li class="navelem"><a class="el" href="class_t_inbetween_1_1_imp.html">Imp</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="class_t_inbetween_1_1_imp-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">TInbetween::Imp Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t_inbetween_1_1_imp_1_1_stroke_transform.html">StrokeTransform</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5bad5c0878940bbb1b3ff6389be938f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_inbetween_1_1_imp.html#a5bad5c0878940bbb1b3ff6389be938f8">computeTransformation</a> ()</td></tr>
<tr class="separator:a5bad5c0878940bbb1b3ff6389be938f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d3f6735f918019ac5446468187153ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_inbetween_1_1_imp.html#a9d3f6735f918019ac5446468187153ae">transferColor</a> (const <a class="el" href="class_t_vector_image_p.html">TVectorImageP</a> &amp;destination) const</td></tr>
<tr class="separator:a9d3f6735f918019ac5446468187153ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9dc889db4cf3c6998deee9f4543550a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_vector_image_p.html">TVectorImageP</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_inbetween_1_1_imp.html#ab9dc889db4cf3c6998deee9f4543550a">tween</a> (double t) const</td></tr>
<tr class="separator:ab9dc889db4cf3c6998deee9f4543550a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0e44b063c8f41161e17769399e5a6f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_inbetween_1_1_imp.html#aa0e44b063c8f41161e17769399e5a6f1">Imp</a> (const <a class="el" href="class_t_vector_image_p.html">TVectorImageP</a> firstImage, const <a class="el" href="class_t_vector_image_p.html">TVectorImageP</a> lastImage)</td></tr>
<tr class="separator:aa0e44b063c8f41161e17769399e5a6f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a53608fabb6ec9c3cc76349f37de5b409"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_vector_image_p.html">TVectorImageP</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_inbetween_1_1_imp.html#a53608fabb6ec9c3cc76349f37de5b409">m_firstImage</a></td></tr>
<tr class="separator:a53608fabb6ec9c3cc76349f37de5b409"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf45afcd077dfbbb421f152b2b290e96"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_vector_image_p.html">TVectorImageP</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_inbetween_1_1_imp.html#adf45afcd077dfbbb421f152b2b290e96">m_lastImage</a></td></tr>
<tr class="separator:adf45afcd077dfbbb421f152b2b290e96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e7599588d83d065476e14508c4499f9"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="struct_t_inbetween_1_1_imp_1_1_stroke_transform.html">StrokeTransform</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_inbetween_1_1_imp.html#a8e7599588d83d065476e14508c4499f9">m_transformation</a></td></tr>
<tr class="separator:a8e7599588d83d065476e14508c4499f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa0e44b063c8f41161e17769399e5a6f1" name="aa0e44b063c8f41161e17769399e5a6f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0e44b063c8f41161e17769399e5a6f1">&#9670;&nbsp;</a></span>Imp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TInbetween::Imp::Imp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_vector_image_p.html">TVectorImageP</a>&#160;</td>
          <td class="paramname"><em>firstImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_vector_image_p.html">TVectorImageP</a>&#160;</td>
          <td class="paramname"><em>lastImage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  664</span>      : m_firstImage(firstImage), m_lastImage(lastImage) {</div>
<div class="line"><span class="lineno">  665</span>    <a class="code hl_function" href="class_t_inbetween_1_1_imp.html#a5bad5c0878940bbb1b3ff6389be938f8">computeTransformation</a>();</div>
<div class="line"><span class="lineno">  666</span>  }</div>
<div class="ttc" id="aclass_t_inbetween_1_1_imp_html_a5bad5c0878940bbb1b3ff6389be938f8"><div class="ttname"><a href="class_t_inbetween_1_1_imp.html#a5bad5c0878940bbb1b3ff6389be938f8">TInbetween::Imp::computeTransformation</a></div><div class="ttdeci">void computeTransformation()</div><div class="ttdef"><b>Definition:</b> tinbetween.cpp:680</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5bad5c0878940bbb1b3ff6389be938f8" name="a5bad5c0878940bbb1b3ff6389be938f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bad5c0878940bbb1b3ff6389be938f8">&#9670;&nbsp;</a></span>computeTransformation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TInbetween::Imp::computeTransformation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >compute centre of Rotation and Scaling</p>
<div class="fragment"><div class="line"><span class="lineno">  680</span>                                          {</div>
<div class="line"><span class="lineno">  681</span>  <span class="keyword">const</span> UINT samplingPointNumber = 10;</div>
<div class="line"><span class="lineno">  682</span>  <span class="keyword">const</span> UINT bboxSamplingWeight  = samplingPointNumber / 2;</div>
<div class="line"><span class="lineno">  683</span> </div>
<div class="line"><span class="lineno">  684</span>  StrokeTransform transform;</div>
<div class="line"><span class="lineno">  685</span>  <span class="keywordtype">double</span> cs, sn, totalLen1, totalLen2, constK, constQ, constB, constD, constA;</div>
<div class="line"><span class="lineno">  686</span>  UINT cpCount1, cpCount2;</div>
<div class="line"><span class="lineno">  687</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> stroke1Centroid, stroke2Centroid, stroke1Begin, stroke2Begin,</div>
<div class="line"><span class="lineno">  688</span>      stroke1End, stroke2End, versor1, versor2;</div>
<div class="line"><span class="lineno">  689</span>  std::vector&lt;TPointD&gt; samplingPoint1(samplingPointNumber),</div>
<div class="line"><span class="lineno">  690</span>      samplingPoint2(samplingPointNumber);</div>
<div class="line"><span class="lineno">  691</span>  <a class="code hl_struct" href="class_t_stroke.html">TStroke</a> *stroke1, *stroke2;</div>
<div class="line"><span class="lineno">  692</span>  std::vector&lt;double&gt; ratioSampling, weights, subStrokeXScaling,</div>
<div class="line"><span class="lineno">  693</span>      subStrokeYScaling;</div>
<div class="line"><span class="lineno">  694</span> </div>
<div class="line"><span class="lineno">  695</span>  UINT strokeCount1 = m_firstImage-&gt;getStrokeCount();</div>
<div class="line"><span class="lineno">  696</span>  UINT strokeCount2 = m_lastImage-&gt;getStrokeCount();</div>
<div class="line"><span class="lineno">  697</span>  <span class="keywordflow">if</span> (strokeCount1 &gt; strokeCount2) strokeCount1 = strokeCount2;</div>
<div class="line"><span class="lineno">  698</span> </div>
<div class="line"><span class="lineno">  699</span>  m_transformation.clear();</div>
<div class="line"><span class="lineno">  700</span>  m_transformation.reserve(strokeCount1);</div>
<div class="line"><span class="lineno">  701</span> </div>
<div class="line"><span class="lineno">  702</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> maxSubSetNum = (strokeCount1) ? 1000 / strokeCount1 : 1;</div>
<div class="line"><span class="lineno">  703</span> </div>
<div class="line"><span class="lineno">  704</span>  UINT j, p;</div>
<div class="line"><span class="lineno">  705</span> </div>
<div class="line"><span class="lineno">  706</span>  <span class="keywordflow">for</span> (UINT i = 0; i &lt; strokeCount1; i++) {</div>
<div class="line"><span class="lineno">  707</span>    stroke1 = m_firstImage-&gt;getStroke(i);</div>
<div class="line"><span class="lineno">  708</span>    stroke2 = m_lastImage-&gt;getStroke(i);</div>
<div class="line"><span class="lineno">  709</span> </div>
<div class="line"><span class="lineno">  710</span>    <span class="comment">// check if the strokes are equal</span></div>
<div class="line"><span class="lineno">  711</span>    cpCount1 = stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a45101afd31e40d08100fdf23c89fb49e">getControlPointCount</a>();</div>
<div class="line"><span class="lineno">  712</span>    cpCount2 = stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a45101afd31e40d08100fdf23c89fb49e">getControlPointCount</a>();</div>
<div class="line"><span class="lineno">  713</span> </div>
<div class="line"><span class="lineno">  714</span>    transform.m_firstStrokeCornerIndexes.clear();</div>
<div class="line"><span class="lineno">  715</span>    transform.m_secondStrokeCornerIndexes.clear();</div>
<div class="line"><span class="lineno">  716</span>    transform.m_translate              = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>();</div>
<div class="line"><span class="lineno">  717</span>    transform.m_rotationAndScaleCenter = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>();</div>
<div class="line"><span class="lineno">  718</span>    transform.m_scaleX                 = 0;</div>
<div class="line"><span class="lineno">  719</span>    transform.m_scaleY                 = 0;</div>
<div class="line"><span class="lineno">  720</span>    transform.m_rotation               = 0;</div>
<div class="line"><span class="lineno">  721</span> </div>
<div class="line"><span class="lineno">  722</span>    <span class="keywordtype">bool</span> isEqual = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  723</span> </div>
<div class="line"><span class="lineno">  724</span>    <span class="keywordflow">if</span> (cpCount1 == cpCount2) {</div>
<div class="line"><span class="lineno">  725</span>      <span class="keywordflow">for</span> (j = 0; j &lt; cpCount1 &amp;&amp; isEqual; j++) {</div>
<div class="line"><span class="lineno">  726</span>        isEqual = (stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a9b60f87075b703360efe4b38097d923f">getControlPoint</a>(j) == stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a9b60f87075b703360efe4b38097d923f">getControlPoint</a>(j));</div>
<div class="line"><span class="lineno">  727</span>      }</div>
<div class="line"><span class="lineno">  728</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  729</span>      isEqual = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  730</span> </div>
<div class="line"><span class="lineno">  731</span>    <span class="keywordflow">if</span> (isEqual) {</div>
<div class="line"><span class="lineno">  732</span>      transform.m_type = StrokeTransform::EQUAL;</div>
<div class="line"><span class="lineno">  733</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  734</span>      totalLen1 = stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a079a513cb8a60d9a759b4f0c8211eab4">getLength</a>();</div>
<div class="line"><span class="lineno">  735</span>      totalLen2 = stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a079a513cb8a60d9a759b4f0c8211eab4">getLength</a>();</div>
<div class="line"><span class="lineno">  736</span> </div>
<div class="line"><span class="lineno">  737</span>      <span class="keywordflow">if</span> (totalLen1 == 0 || totalLen2 == 0) {</div>
<div class="line"><span class="lineno">  738</span>        <span class="keywordflow">if</span> (totalLen1 == 0 &amp;&amp; totalLen2 == 0) {</div>
<div class="line"><span class="lineno">  739</span>          transform.m_type = StrokeTransform::POINT;</div>
<div class="line"><span class="lineno">  740</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  741</span>          transform.m_inverse = <a class="code hl_class" href="class_t_affine.html">TAffine</a>();</div>
<div class="line"><span class="lineno">  742</span>          transform.m_firstStrokeCornerIndexes.resize(2);</div>
<div class="line"><span class="lineno">  743</span>          transform.m_firstStrokeCornerIndexes[0] = 0;</div>
<div class="line"><span class="lineno">  744</span>          transform.m_firstStrokeCornerIndexes[1] = stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>();</div>
<div class="line"><span class="lineno">  745</span>          transform.m_secondStrokeCornerIndexes.resize(2);</div>
<div class="line"><span class="lineno">  746</span>          transform.m_secondStrokeCornerIndexes[0] = 0;</div>
<div class="line"><span class="lineno">  747</span>          transform.m_secondStrokeCornerIndexes[1] = stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>();</div>
<div class="line"><span class="lineno">  748</span>        }</div>
<div class="line"><span class="lineno">  749</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  750</span>        <span class="keyword">const</span> <span class="keywordtype">double</span> startMinAngle = 30.0;</div>
<div class="line"><span class="lineno">  751</span>        std::vector&lt;std::pair&lt;int, double&gt;&gt; angles1, angles2;</div>
<div class="line"><span class="lineno">  752</span> </div>
<div class="line"><span class="lineno">  753</span>        transform.m_type = StrokeTransform::GENERAL;</div>
<div class="line"><span class="lineno">  754</span> </div>
<div class="line"><span class="lineno">  755</span>        <span class="keywordtype">double</span> minAngle, maxAngle;</div>
<div class="line"><span class="lineno">  756</span>        <span class="keywordtype">int</span> minAngle1, maxAngle1, minAngle2, maxAngle2;</div>
<div class="line"><span class="lineno">  757</span> </div>
<div class="line"><span class="lineno">  758</span>        angles1.clear();</div>
<div class="line"><span class="lineno">  759</span>        angles2.clear();</div>
<div class="line"><span class="lineno">  760</span> </div>
<div class="line"><span class="lineno">  761</span>        <span class="comment">//        TDebugMessage::getStream()&lt;&lt;j&lt;&lt;&quot; stroke1 corner detection&quot;;</span></div>
<div class="line"><span class="lineno">  762</span>        <span class="comment">//        TDebugMessage::flush();</span></div>
<div class="line"><span class="lineno">  763</span> </div>
<div class="line"><span class="lineno">  764</span>        detectCorners(stroke1, startMinAngle, angles1, minAngle, maxAngle);</div>
<div class="line"><span class="lineno">  765</span>        minAngle1 = (int)minAngle;</div>
<div class="line"><span class="lineno">  766</span>        maxAngle1 = (int)maxAngle;</div>
<div class="line"><span class="lineno">  767</span> </div>
<div class="line"><span class="lineno">  768</span>        <span class="comment">//        TDebugMessage::getStream()&lt;&lt;j&lt;&lt;&quot; stroke2 corner detection&quot;;</span></div>
<div class="line"><span class="lineno">  769</span>        <span class="comment">//        TDebugMessage::flush();</span></div>
<div class="line"><span class="lineno">  770</span> </div>
<div class="line"><span class="lineno">  771</span>        detectCorners(stroke2, startMinAngle, angles2, minAngle, maxAngle);</div>
<div class="line"><span class="lineno">  772</span>        minAngle2 = (int)minAngle;</div>
<div class="line"><span class="lineno">  773</span>        maxAngle2 = (int)maxAngle;</div>
<div class="line"><span class="lineno">  774</span> </div>
<div class="line"><span class="lineno">  775</span>        <span class="keywordflow">if</span> (angles1.empty()) angles2.clear();</div>
<div class="line"><span class="lineno">  776</span>        <span class="keywordflow">if</span> (angles2.empty()) angles1.clear();</div>
<div class="line"><span class="lineno">  777</span> </div>
<div class="line"><span class="lineno">  778</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  779</span><span class="comment">debugStream.open(&quot;c:\\temp\\inbetween.txt&quot;, ios_base::out);</span></div>
<div class="line"><span class="lineno">  780</span><span class="comment">debugStream &lt;&lt;&quot;num angoli 1: &quot;&lt;&lt; angles1.size() &lt;&lt; endl;</span></div>
<div class="line"><span class="lineno">  781</span><span class="comment">debugStream &lt;&lt;&quot;num angoli 2: &quot;&lt;&lt; angles2.size() &lt;&lt; endl;</span></div>
<div class="line"><span class="lineno">  782</span><span class="comment">*/</span></div>
<div class="line"><span class="lineno">  783</span> </div>
<div class="line"><span class="lineno">  784</span>        <span class="keywordtype">double</span> bestValue = (std::numeric_limits&lt;double&gt;::max)();</div>
<div class="line"><span class="lineno">  785</span> </div>
<div class="line"><span class="lineno">  786</span>        <span class="keywordflow">if</span> (angles1.size() != angles2.size()) {</div>
<div class="line"><span class="lineno">  787</span>          bestValue = (std::numeric_limits&lt;double&gt;::max)();</div>
<div class="line"><span class="lineno">  788</span> </div>
<div class="line"><span class="lineno">  789</span>          <span class="comment">//--------------------------------------------------------------------------</span></div>
<div class="line"><span class="lineno">  790</span> </div>
<div class="line"><span class="lineno">  791</span>          <span class="keywordflow">if</span> (isTooComplex(angles1.size(), angles2.size(), maxSubSetNum)) {</div>
<div class="line"><span class="lineno">  792</span>            <span class="comment">// debugStream &lt;&lt;&quot;is too complex&quot; &lt;&lt; endl;</span></div>
<div class="line"><span class="lineno">  793</span>            <span class="keywordtype">int</span> firstAngle =</div>
<div class="line"><span class="lineno">  794</span>                (int)((angles1.size() &lt; angles2.size()) ? minAngle2</div>
<div class="line"><span class="lineno">  795</span>                                                        : minAngle1);</div>
<div class="line"><span class="lineno">  796</span>            <span class="keywordtype">int</span> lastAngle =</div>
<div class="line"><span class="lineno">  797</span>                (int)((angles1.size() &lt; angles2.size()) ? maxAngle1</div>
<div class="line"><span class="lineno">  798</span>                                                        : maxAngle2);</div>
<div class="line"><span class="lineno">  799</span>            <span class="keywordtype">int</span> bestAngle = (int)startMinAngle;</div>
<div class="line"><span class="lineno">  800</span> </div>
<div class="line"><span class="lineno">  801</span>            <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)(angles1.size() + angles2.size()) &lt;</div>
<div class="line"><span class="lineno">  802</span>                lastAngle - firstAngle + 1) {</div>
<div class="line"><span class="lineno">  803</span>              <span class="keywordtype">double</span> tempAngle;</div>
<div class="line"><span class="lineno">  804</span>              std::vector&lt;double&gt; sortedAngles1, sortedAngles2;</div>
<div class="line"><span class="lineno">  805</span>              sortedAngles1.reserve(angles1.size());</div>
<div class="line"><span class="lineno">  806</span>              sortedAngles2.reserve(angles2.size());</div>
<div class="line"><span class="lineno">  807</span>              <span class="keywordflow">for</span> (j = 0; j &lt; angles1.size(); j++) {</div>
<div class="line"><span class="lineno">  808</span>                tempAngle = angles1[j].second;</div>
<div class="line"><span class="lineno">  809</span>                <span class="keywordflow">if</span> (tempAngle &gt;= firstAngle &amp;&amp; tempAngle &lt;= lastAngle)</div>
<div class="line"><span class="lineno">  810</span>                  sortedAngles1.push_back(tempAngle);</div>
<div class="line"><span class="lineno">  811</span>              }</div>
<div class="line"><span class="lineno">  812</span>              <span class="keywordflow">for</span> (j = 0; j &lt; angles2.size(); j++) {</div>
<div class="line"><span class="lineno">  813</span>                tempAngle = angles2[j].second;</div>
<div class="line"><span class="lineno">  814</span>                <span class="keywordflow">if</span> (tempAngle &gt;= firstAngle &amp;&amp; tempAngle &lt;= lastAngle)</div>
<div class="line"><span class="lineno">  815</span>                  sortedAngles2.push_back(tempAngle);</div>
<div class="line"><span class="lineno">  816</span>              }</div>
<div class="line"><span class="lineno">  817</span>              std::vector&lt;double&gt; sortedAngles(sortedAngles1.size() +</div>
<div class="line"><span class="lineno">  818</span>                                               sortedAngles2.size());</div>
<div class="line"><span class="lineno">  819</span> </div>
<div class="line"><span class="lineno">  820</span>              std::sort(sortedAngles1.begin(), sortedAngles1.end());</div>
<div class="line"><span class="lineno">  821</span>              std::sort(sortedAngles2.begin(), sortedAngles2.end());</div>
<div class="line"><span class="lineno">  822</span>              std::merge(sortedAngles1.begin(), sortedAngles1.end(),</div>
<div class="line"><span class="lineno">  823</span>                         sortedAngles2.begin(), sortedAngles2.end(),</div>
<div class="line"><span class="lineno">  824</span>                         sortedAngles.begin());</div>
<div class="line"><span class="lineno">  825</span> </div>
<div class="line"><span class="lineno">  826</span>              <span class="keywordflow">for</span> (j = 0; j &lt; sortedAngles.size(); j++) {</div>
<div class="line"><span class="lineno">  827</span>                <span class="keywordtype">int</span> numAng1 = angleNumber(angles1, sortedAngles[j]);</div>
<div class="line"><span class="lineno">  828</span>                <span class="keywordtype">int</span> numAng2 = angleNumber(angles2, sortedAngles[j]);</div>
<div class="line"><span class="lineno">  829</span>                <span class="keywordtype">double</span> val  = (numAng1 == numAng2)</div>
<div class="line"><span class="lineno">  830</span>                                 ? 0</div>
<div class="line"><span class="lineno">  831</span>                                 : fabs((<span class="keywordtype">float</span>)(numAng1 - numAng2)) /</div>
<div class="line"><span class="lineno">  832</span>                                       (numAng1 + numAng2);</div>
<div class="line"><span class="lineno">  833</span>                <span class="keywordflow">if</span> (val &lt; bestValue) {</div>
<div class="line"><span class="lineno">  834</span>                  bestValue = val;</div>
<div class="line"><span class="lineno">  835</span>                  bestAngle = (int)(sortedAngles[j]);</div>
<div class="line"><span class="lineno">  836</span>                  <span class="keywordflow">if</span> (bestValue == 0 ||</div>
<div class="line"><span class="lineno">  837</span>                      !isTooComplex(numAng1, numAng2, maxSubSetNum))</div>
<div class="line"><span class="lineno">  838</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  839</span>                }</div>
<div class="line"><span class="lineno">  840</span>              }</div>
<div class="line"><span class="lineno">  841</span> </div>
<div class="line"><span class="lineno">  842</span>            } <span class="keywordflow">else</span>  <span class="comment">//-----------------------------------------------------</span></div>
<div class="line"><span class="lineno">  843</span>            {</div>
<div class="line"><span class="lineno">  844</span>              <span class="keywordflow">for</span> (<span class="keywordtype">int</span> angle = firstAngle; angle &lt;= lastAngle; angle++) {</div>
<div class="line"><span class="lineno">  845</span>                <span class="keywordtype">int</span> numAng1 = angleNumber(angles1, angle);</div>
<div class="line"><span class="lineno">  846</span>                <span class="keywordtype">int</span> numAng2 = angleNumber(angles2, angle);</div>
<div class="line"><span class="lineno">  847</span>                <span class="keywordtype">double</span> val  = (numAng1 == numAng2)</div>
<div class="line"><span class="lineno">  848</span>                                 ? 0</div>
<div class="line"><span class="lineno">  849</span>                                 : fabs((<span class="keywordtype">float</span>)(numAng1 - numAng2)) /</div>
<div class="line"><span class="lineno">  850</span>                                       (numAng1 + numAng2);</div>
<div class="line"><span class="lineno">  851</span>                <span class="keywordflow">if</span> (val &lt; bestValue) {</div>
<div class="line"><span class="lineno">  852</span>                  bestValue = val;</div>
<div class="line"><span class="lineno">  853</span>                  bestAngle = angle;</div>
<div class="line"><span class="lineno">  854</span>                  <span class="keywordflow">if</span> (bestValue == 0 ||</div>
<div class="line"><span class="lineno">  855</span>                      !isTooComplex(numAng1, numAng2, maxSubSetNum))</div>
<div class="line"><span class="lineno">  856</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  857</span>                }</div>
<div class="line"><span class="lineno">  858</span>              }</div>
<div class="line"><span class="lineno">  859</span>            }</div>
<div class="line"><span class="lineno">  860</span> </div>
<div class="line"><span class="lineno">  861</span>            eraseSmallAngles(angles1, bestAngle);</div>
<div class="line"><span class="lineno">  862</span>            eraseSmallAngles(angles2, bestAngle);</div>
<div class="line"><span class="lineno">  863</span> </div>
<div class="line"><span class="lineno">  864</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  865</span><span class="comment">debugStream &lt;&lt;&quot;bestAngle: &quot;&lt;&lt; bestAngle &lt;&lt; endl;</span></div>
<div class="line"><span class="lineno">  866</span><span class="comment">debugStream &lt;&lt;&quot;num angoli 1: &quot;&lt;&lt; angles1.size() &lt;&lt; endl;</span></div>
<div class="line"><span class="lineno">  867</span><span class="comment">debugStream &lt;&lt;&quot;num angoli 2: &quot;&lt;&lt; angles2.size() &lt;&lt; endl;</span></div>
<div class="line"><span class="lineno">  868</span><span class="comment">*/</span></div>
<div class="line"><span class="lineno">  869</span>          }</div>
<div class="line"><span class="lineno">  870</span>          <span class="comment">//--------------------------------------------------------------------------</span></div>
<div class="line"><span class="lineno">  871</span> </div>
<div class="line"><span class="lineno">  872</span>          bestValue = (std::numeric_limits&lt;double&gt;::max)();</div>
<div class="line"><span class="lineno">  873</span> </div>
<div class="line"><span class="lineno">  874</span>          <span class="keywordflow">if</span> (angles1.size() == angles2.size()) {</div>
<div class="line"><span class="lineno">  875</span>            transform.m_firstStrokeCornerIndexes.push_back(0);</div>
<div class="line"><span class="lineno">  876</span>            <span class="keywordflow">for</span> (j = 0; j &lt; angles1.size(); j++)</div>
<div class="line"><span class="lineno">  877</span>              transform.m_firstStrokeCornerIndexes.push_back(angles1[j].first);</div>
<div class="line"><span class="lineno">  878</span>            transform.m_firstStrokeCornerIndexes.push_back(</div>
<div class="line"><span class="lineno">  879</span>                stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>());</div>
<div class="line"><span class="lineno">  880</span> </div>
<div class="line"><span class="lineno">  881</span>            transform.m_secondStrokeCornerIndexes.push_back(0);</div>
<div class="line"><span class="lineno">  882</span>            <span class="keywordflow">for</span> (j = 0; j &lt; angles2.size(); j++)</div>
<div class="line"><span class="lineno">  883</span>              transform.m_secondStrokeCornerIndexes.push_back(angles2[j].first);</div>
<div class="line"><span class="lineno">  884</span>            transform.m_secondStrokeCornerIndexes.push_back(</div>
<div class="line"><span class="lineno">  885</span>                stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>());</div>
<div class="line"><span class="lineno">  886</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  887</span>            <span class="keywordflow">if</span> (isTooComplex(angles1.size(), angles2.size(), maxSubSetNum)) {</div>
<div class="line"><span class="lineno">  888</span>              <span class="keywordflow">if</span> (angles1.size() &gt; angles2.size()) {</div>
<div class="line"><span class="lineno">  889</span>                transform.m_firstStrokeCornerIndexes.resize(angles2.size());</div>
<div class="line"><span class="lineno">  890</span>                trivialSolution(stroke1, stroke2, angles1, angles2,</div>
<div class="line"><span class="lineno">  891</span>                                transform.m_firstStrokeCornerIndexes);</div>
<div class="line"><span class="lineno">  892</span>                transform.m_firstStrokeCornerIndexes.insert(</div>
<div class="line"><span class="lineno">  893</span>                    transform.m_firstStrokeCornerIndexes.begin(), 0);</div>
<div class="line"><span class="lineno">  894</span>                transform.m_firstStrokeCornerIndexes.push_back(</div>
<div class="line"><span class="lineno">  895</span>                    stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>());</div>
<div class="line"><span class="lineno">  896</span> </div>
<div class="line"><span class="lineno">  897</span>                transform.m_secondStrokeCornerIndexes.push_back(0);</div>
<div class="line"><span class="lineno">  898</span>                <span class="keywordflow">for</span> (j = 0; j &lt; angles2.size(); j++)</div>
<div class="line"><span class="lineno">  899</span>                  transform.m_secondStrokeCornerIndexes.push_back(</div>
<div class="line"><span class="lineno">  900</span>                      angles2[j].first);</div>
<div class="line"><span class="lineno">  901</span>                transform.m_secondStrokeCornerIndexes.push_back(</div>
<div class="line"><span class="lineno">  902</span>                    stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>());</div>
<div class="line"><span class="lineno">  903</span>              } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  904</span>                transform.m_firstStrokeCornerIndexes.push_back(0);</div>
<div class="line"><span class="lineno">  905</span>                <span class="keywordflow">for</span> (j = 0; j &lt; angles1.size(); j++)</div>
<div class="line"><span class="lineno">  906</span>                  transform.m_firstStrokeCornerIndexes.push_back(</div>
<div class="line"><span class="lineno">  907</span>                      angles1[j].first);</div>
<div class="line"><span class="lineno">  908</span>                transform.m_firstStrokeCornerIndexes.push_back(</div>
<div class="line"><span class="lineno">  909</span>                    stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>());</div>
<div class="line"><span class="lineno">  910</span> </div>
<div class="line"><span class="lineno">  911</span>                transform.m_secondStrokeCornerIndexes.resize(angles1.size());</div>
<div class="line"><span class="lineno">  912</span>                trivialSolution(stroke2, stroke1, angles2, angles1,</div>
<div class="line"><span class="lineno">  913</span>                                transform.m_secondStrokeCornerIndexes);</div>
<div class="line"><span class="lineno">  914</span>                transform.m_secondStrokeCornerIndexes.insert(</div>
<div class="line"><span class="lineno">  915</span>                    transform.m_secondStrokeCornerIndexes.begin(), 0);</div>
<div class="line"><span class="lineno">  916</span>                transform.m_secondStrokeCornerIndexes.push_back(</div>
<div class="line"><span class="lineno">  917</span>                    stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>());</div>
<div class="line"><span class="lineno">  918</span>              }</div>
<div class="line"><span class="lineno">  919</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  920</span>              <span class="keywordflow">if</span> (angles1.size() &gt; angles2.size()) {</div>
<div class="line"><span class="lineno">  921</span>                transform.m_firstStrokeCornerIndexes.resize(angles2.size());</div>
<div class="line"><span class="lineno">  922</span>                findBestSolution(stroke1, stroke2, angles1, angles2, bestValue,</div>
<div class="line"><span class="lineno">  923</span>                                 transform.m_firstStrokeCornerIndexes);</div>
<div class="line"><span class="lineno">  924</span>                transform.m_firstStrokeCornerIndexes.insert(</div>
<div class="line"><span class="lineno">  925</span>                    transform.m_firstStrokeCornerIndexes.begin(), 0);</div>
<div class="line"><span class="lineno">  926</span>                transform.m_firstStrokeCornerIndexes.push_back(</div>
<div class="line"><span class="lineno">  927</span>                    stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>());</div>
<div class="line"><span class="lineno">  928</span> </div>
<div class="line"><span class="lineno">  929</span>                transform.m_secondStrokeCornerIndexes.push_back(0);</div>
<div class="line"><span class="lineno">  930</span>                <span class="keywordflow">for</span> (j = 0; j &lt; angles2.size(); j++)</div>
<div class="line"><span class="lineno">  931</span>                  transform.m_secondStrokeCornerIndexes.push_back(</div>
<div class="line"><span class="lineno">  932</span>                      angles2[j].first);</div>
<div class="line"><span class="lineno">  933</span>                transform.m_secondStrokeCornerIndexes.push_back(</div>
<div class="line"><span class="lineno">  934</span>                    stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>());</div>
<div class="line"><span class="lineno">  935</span>              } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  936</span>                transform.m_firstStrokeCornerIndexes.push_back(0);</div>
<div class="line"><span class="lineno">  937</span>                <span class="keywordflow">for</span> (j = 0; j &lt; angles1.size(); j++)</div>
<div class="line"><span class="lineno">  938</span>                  transform.m_firstStrokeCornerIndexes.push_back(</div>
<div class="line"><span class="lineno">  939</span>                      angles1[j].first);</div>
<div class="line"><span class="lineno">  940</span>                transform.m_firstStrokeCornerIndexes.push_back(</div>
<div class="line"><span class="lineno">  941</span>                    stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>());</div>
<div class="line"><span class="lineno">  942</span> </div>
<div class="line"><span class="lineno">  943</span>                transform.m_secondStrokeCornerIndexes.resize(angles1.size());</div>
<div class="line"><span class="lineno">  944</span>                findBestSolution(stroke2, stroke1, angles2, angles1, bestValue,</div>
<div class="line"><span class="lineno">  945</span>                                 transform.m_secondStrokeCornerIndexes);</div>
<div class="line"><span class="lineno">  946</span>                transform.m_secondStrokeCornerIndexes.insert(</div>
<div class="line"><span class="lineno">  947</span>                    transform.m_secondStrokeCornerIndexes.begin(), 0);</div>
<div class="line"><span class="lineno">  948</span>                transform.m_secondStrokeCornerIndexes.push_back(</div>
<div class="line"><span class="lineno">  949</span>                    stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>());</div>
<div class="line"><span class="lineno">  950</span>              }</div>
<div class="line"><span class="lineno">  951</span>            }</div>
<div class="line"><span class="lineno">  952</span>          }</div>
<div class="line"><span class="lineno">  953</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  954</span>          transform.m_firstStrokeCornerIndexes.push_back(0);</div>
<div class="line"><span class="lineno">  955</span>          <span class="keywordflow">for</span> (j = 0; j &lt; angles1.size(); j++)</div>
<div class="line"><span class="lineno">  956</span>            transform.m_firstStrokeCornerIndexes.push_back(angles1[j].first);</div>
<div class="line"><span class="lineno">  957</span>          transform.m_firstStrokeCornerIndexes.push_back(</div>
<div class="line"><span class="lineno">  958</span>              stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>());</div>
<div class="line"><span class="lineno">  959</span> </div>
<div class="line"><span class="lineno">  960</span>          transform.m_secondStrokeCornerIndexes.push_back(0);</div>
<div class="line"><span class="lineno">  961</span>          <span class="keywordflow">for</span> (j = 0; j &lt; angles2.size(); j++)</div>
<div class="line"><span class="lineno">  962</span>            transform.m_secondStrokeCornerIndexes.push_back(angles2[j].first);</div>
<div class="line"><span class="lineno">  963</span>          transform.m_secondStrokeCornerIndexes.push_back(</div>
<div class="line"><span class="lineno">  964</span>              stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>());</div>
<div class="line"><span class="lineno">  965</span>        }</div>
<div class="line"><span class="lineno">  966</span> </div>
<div class="line"><span class="lineno">  967</span>        UINT cornerSize = transform.m_firstStrokeCornerIndexes.size();</div>
<div class="line"><span class="lineno">  968</span>        assert(cornerSize == transform.m_secondStrokeCornerIndexes.size());</div>
<div class="line"><span class="lineno">  969</span>        assert(cornerSize &gt;= 2);</div>
<div class="line"><span class="lineno">  970</span> </div>
<div class="line"><span class="lineno">  971</span>        <span class="keywordtype">double</span> totalRadRotation = 0;</div>
<div class="line"><span class="lineno">  972</span> </div>
<div class="line"><span class="lineno">  973</span>        <a class="code hl_struct" href="class_t_stroke.html">TStroke</a> *subStroke1 = 0;</div>
<div class="line"><span class="lineno">  974</span>        <a class="code hl_struct" href="class_t_stroke.html">TStroke</a> *subStroke2 = 0;</div>
<div class="line"><span class="lineno">  975</span> </div>
<div class="line"><span class="lineno">  976</span>        stroke1Centroid = stroke1-&gt;getCentroid();</div>
<div class="line"><span class="lineno">  977</span>        stroke2Centroid = stroke2-&gt;getCentroid();</div>
<div class="line"><span class="lineno">  978</span> </div>
<div class="line"><span class="lineno">  979</span><span class="preprocessor">#ifdef _DEBUG</span></div>
<div class="line"><span class="lineno">  980</span>        assert(transform.m_firstStrokeCornerIndexes[0] == 0);</div>
<div class="line"><span class="lineno">  981</span>        assert(transform.m_secondStrokeCornerIndexes[0] == 0);</div>
<div class="line"><span class="lineno">  982</span>        assert(transform.m_firstStrokeCornerIndexes[cornerSize - 1] ==</div>
<div class="line"><span class="lineno">  983</span>               stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>());</div>
<div class="line"><span class="lineno">  984</span>        assert(transform.m_secondStrokeCornerIndexes[cornerSize - 1] ==</div>
<div class="line"><span class="lineno">  985</span>               stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>());</div>
<div class="line"><span class="lineno">  986</span>        <span class="keywordflow">for</span> (j = 0; j &lt; cornerSize - 1; j++) {</div>
<div class="line"><span class="lineno">  987</span>          assert(transform.m_firstStrokeCornerIndexes[j] &lt;</div>
<div class="line"><span class="lineno">  988</span>                 transform.m_firstStrokeCornerIndexes[j + 1]);</div>
<div class="line"><span class="lineno">  989</span>          assert(transform.m_secondStrokeCornerIndexes[j] &lt;</div>
<div class="line"><span class="lineno">  990</span>                 transform.m_secondStrokeCornerIndexes[j + 1]);</div>
<div class="line"><span class="lineno">  991</span> </div>
<div class="line"><span class="lineno">  992</span>          assert(transform.m_firstStrokeCornerIndexes[j] &lt;</div>
<div class="line"><span class="lineno">  993</span>                 stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>());</div>
<div class="line"><span class="lineno">  994</span>          assert(transform.m_secondStrokeCornerIndexes[j] &lt;</div>
<div class="line"><span class="lineno">  995</span>                 stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">getChunkCount</a>());</div>
<div class="line"><span class="lineno">  996</span>        }</div>
<div class="line"><span class="lineno">  997</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  998</span> </div>
<div class="line"><span class="lineno">  999</span>        <span class="keywordflow">for</span> (j = 0; j &lt; cornerSize - 1; j++) {</div>
<div class="line"><span class="lineno"> 1001</span> </div>
<div class="line"><span class="lineno"> 1002</span>          subStroke1 = extract(stroke1, transform.m_firstStrokeCornerIndexes[j],</div>
<div class="line"><span class="lineno"> 1003</span>                               transform.m_firstStrokeCornerIndexes[j + 1] - 1);</div>
<div class="line"><span class="lineno"> 1004</span>          sample(subStroke1, samplingPointNumber, samplingPoint1);</div>
<div class="line"><span class="lineno"> 1005</span>          subStroke2 =</div>
<div class="line"><span class="lineno"> 1006</span>              extract(stroke2, transform.m_secondStrokeCornerIndexes[j],</div>
<div class="line"><span class="lineno"> 1007</span>                      transform.m_secondStrokeCornerIndexes[j + 1] - 1);</div>
<div class="line"><span class="lineno"> 1008</span>          sample(subStroke2, samplingPointNumber, samplingPoint2);</div>
<div class="line"><span class="lineno"> 1009</span> </div>
<div class="line"><span class="lineno"> 1011</span> </div>
<div class="line"><span class="lineno"> 1012</span>          ratioSampling.clear();</div>
<div class="line"><span class="lineno"> 1013</span>          ratioSampling.reserve(samplingPointNumber);</div>
<div class="line"><span class="lineno"> 1014</span>          weights.clear();</div>
<div class="line"><span class="lineno"> 1015</span>          weights.reserve(samplingPointNumber);</div>
<div class="line"><span class="lineno"> 1016</span> </div>
<div class="line"><span class="lineno"> 1017</span>          <a class="code hl_class" href="class_t_point_t.html">TPointD</a> pOld, pNew;</div>
<div class="line"><span class="lineno"> 1018</span>          <span class="comment">// double totalW=0;</span></div>
<div class="line"><span class="lineno"> 1019</span> </div>
<div class="line"><span class="lineno"> 1020</span>          <span class="keywordflow">for</span> (p = 0; p &lt; samplingPointNumber; p++) {</div>
<div class="line"><span class="lineno"> 1021</span>            pOld = samplingPoint1[p];</div>
<div class="line"><span class="lineno"> 1022</span>            pNew = samplingPoint2[p];</div>
<div class="line"><span class="lineno"> 1023</span>            <span class="keywordflow">if</span> (pOld == stroke1Centroid) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1024</span>            <span class="keywordflow">if</span> (pNew == stroke2Centroid) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1025</span>            versor1 = normalize(pOld - stroke1Centroid);</div>
<div class="line"><span class="lineno"> 1026</span>            versor2 = normalize(pNew - stroke2Centroid);</div>
<div class="line"><span class="lineno"> 1027</span>            weights.push_back(tdistance(pOld, stroke1Centroid) +</div>
<div class="line"><span class="lineno"> 1028</span>                              tdistance(pNew, stroke2Centroid));</div>
<div class="line"><span class="lineno"> 1029</span>            cs       = versor1 * versor2;</div>
<div class="line"><span class="lineno"> 1030</span>            sn       = cross(versor1, versor2);</div>
<div class="line"><span class="lineno"> 1031</span>            <span class="keywordtype">double</span> v = atan2(sn, cs);</div>
<div class="line"><span class="lineno"> 1032</span>            ratioSampling.push_back(v);</div>
<div class="line"><span class="lineno"> 1033</span>          }</div>
<div class="line"><span class="lineno"> 1034</span>          <span class="keyword">delete</span> subStroke1;</div>
<div class="line"><span class="lineno"> 1035</span>          <span class="keyword">delete</span> subStroke2;</div>
<div class="line"><span class="lineno"> 1036</span>          subStroke1 = 0;</div>
<div class="line"><span class="lineno"> 1037</span>          subStroke2 = 0;</div>
<div class="line"><span class="lineno"> 1038</span> </div>
<div class="line"><span class="lineno"> 1039</span>          <span class="keywordtype">double</span> radRotation = weightedAverage(ratioSampling, weights);</div>
<div class="line"><span class="lineno"> 1040</span> </div>
<div class="line"><span class="lineno"> 1041</span>          totalRadRotation += radRotation;</div>
<div class="line"><span class="lineno"> 1042</span>        }</div>
<div class="line"><span class="lineno"> 1043</span>        totalRadRotation /= (cornerSize - 1);</div>
<div class="line"><span class="lineno"> 1044</span>        transform.m_rotation = totalRadRotation * M_180_PI;</div>
<div class="line"><span class="lineno"> 1045</span> </div>
<div class="line"><span class="lineno"> 1046</span>        <span class="keywordflow">if</span> (isAlmostZero(transform.m_rotation, 2)) {</div>
<div class="line"><span class="lineno"> 1047</span>          transform.m_rotation = 0.0;</div>
<div class="line"><span class="lineno"> 1048</span>          totalRadRotation     = 0.0;</div>
<div class="line"><span class="lineno"> 1049</span>        }</div>
<div class="line"><span class="lineno"> 1050</span> </div>
<div class="line"><span class="lineno"> 1051</span><span class="preprocessor">#ifdef _DEBUG</span></div>
<div class="line"><span class="lineno"> 1052</span><span class="comment">//        TDebugMessage::getStream()&lt;&lt;&quot;rotation &quot;&lt;&lt; transform.m_rotation;</span></div>
<div class="line"><span class="lineno"> 1053</span><span class="comment">//        TDebugMessage::flush();</span></div>
<div class="line"><span class="lineno"> 1054</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1055</span> </div>
<div class="line"><span class="lineno"> 1057</span> </div>
<div class="line"><span class="lineno"> 1058</span>        <span class="keywordflow">if</span> (transform.m_rotation == 0.0) {</div>
<div class="line"><span class="lineno"> 1059</span>          subStrokeXScaling.clear();</div>
<div class="line"><span class="lineno"> 1060</span>          subStrokeXScaling.reserve(cornerSize - 1);</div>
<div class="line"><span class="lineno"> 1061</span>          subStrokeYScaling.clear();</div>
<div class="line"><span class="lineno"> 1062</span>          subStrokeYScaling.reserve(cornerSize - 1);</div>
<div class="line"><span class="lineno"> 1063</span> </div>
<div class="line"><span class="lineno"> 1064</span>          <span class="keywordflow">for</span> (j = 0; j &lt; cornerSize - 1; j++) {</div>
<div class="line"><span class="lineno"> 1066</span> </div>
<div class="line"><span class="lineno"> 1067</span>            subStroke1 =</div>
<div class="line"><span class="lineno"> 1068</span>                extract(stroke1, transform.m_firstStrokeCornerIndexes[j],</div>
<div class="line"><span class="lineno"> 1069</span>                        transform.m_firstStrokeCornerIndexes[j + 1] - 1);</div>
<div class="line"><span class="lineno"> 1070</span>            sample(subStroke1, samplingPointNumber, samplingPoint1);</div>
<div class="line"><span class="lineno"> 1071</span>            subStroke2 =</div>
<div class="line"><span class="lineno"> 1072</span>                extract(stroke2, transform.m_secondStrokeCornerIndexes[j],</div>
<div class="line"><span class="lineno"> 1073</span>                        transform.m_secondStrokeCornerIndexes[j + 1] - 1);</div>
<div class="line"><span class="lineno"> 1074</span>            sample(subStroke2, samplingPointNumber, samplingPoint2);</div>
<div class="line"><span class="lineno"> 1075</span> </div>
<div class="line"><span class="lineno"> 1077</span> </div>
<div class="line"><span class="lineno"> 1078</span>            ratioSampling.clear();</div>
<div class="line"><span class="lineno"> 1079</span>            ratioSampling.reserve(samplingPointNumber + bboxSamplingWeight);</div>
<div class="line"><span class="lineno"> 1080</span>            <span class="keywordtype">double</span> appX, appY;</div>
<div class="line"><span class="lineno"> 1081</span> </div>
<div class="line"><span class="lineno"> 1082</span>            <a class="code hl_class" href="class_t_point_t.html">TPointD</a> appPoint;</div>
<div class="line"><span class="lineno"> 1083</span>            <span class="keywordtype">double</span> bboxXMin, bboxYMin, bboxXMax, bboxYMax;</div>
<div class="line"><span class="lineno"> 1084</span>            bboxXMin = bboxYMin = (std::numeric_limits&lt;double&gt;::max)();</div>
<div class="line"><span class="lineno"> 1085</span>            bboxXMax = bboxYMax = -(std::numeric_limits&lt;double&gt;::max)();</div>
<div class="line"><span class="lineno"> 1086</span>            <span class="keywordtype">int</span> h;</div>
<div class="line"><span class="lineno"> 1087</span> </div>
<div class="line"><span class="lineno"> 1088</span>            <span class="keywordflow">for</span> (h = 0; h &lt; subStroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a45101afd31e40d08100fdf23c89fb49e">getControlPointCount</a>(); ++h) {</div>
<div class="line"><span class="lineno"> 1089</span>              appPoint = subStroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a9b60f87075b703360efe4b38097d923f">getControlPoint</a>(h);</div>
<div class="line"><span class="lineno"> 1090</span>              <span class="keywordflow">if</span> (appPoint.x &lt; bboxXMin) bboxXMin = appPoint.x;</div>
<div class="line"><span class="lineno"> 1091</span>              <span class="keywordflow">if</span> (appPoint.x &gt; bboxXMax) bboxXMax = appPoint.x;</div>
<div class="line"><span class="lineno"> 1092</span>              <span class="keywordflow">if</span> (appPoint.y &lt; bboxYMin) bboxYMin = appPoint.y;</div>
<div class="line"><span class="lineno"> 1093</span>              <span class="keywordflow">if</span> (appPoint.y &gt; bboxYMax) bboxYMax = appPoint.y;</div>
<div class="line"><span class="lineno"> 1094</span>            }</div>
<div class="line"><span class="lineno"> 1095</span> </div>
<div class="line"><span class="lineno"> 1096</span>            appX = bboxXMax - bboxXMin;</div>
<div class="line"><span class="lineno"> 1097</span>            appY = bboxYMax - bboxYMin;</div>
<div class="line"><span class="lineno"> 1098</span> </div>
<div class="line"><span class="lineno"> 1099</span>            <span class="keywordflow">if</span> (appX) {</div>
<div class="line"><span class="lineno"> 1100</span>              bboxXMin = (std::numeric_limits&lt;double&gt;::max)();</div>
<div class="line"><span class="lineno"> 1101</span>              bboxXMax = -(std::numeric_limits&lt;double&gt;::max)();</div>
<div class="line"><span class="lineno"> 1102</span>              <span class="keywordflow">for</span> (h = 0; h &lt; subStroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a45101afd31e40d08100fdf23c89fb49e">getControlPointCount</a>(); ++h) {</div>
<div class="line"><span class="lineno"> 1103</span>                appPoint = subStroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a9b60f87075b703360efe4b38097d923f">getControlPoint</a>(h);</div>
<div class="line"><span class="lineno"> 1104</span>                <span class="keywordflow">if</span> (appPoint.x &lt; bboxXMin) bboxXMin = appPoint.x;</div>
<div class="line"><span class="lineno"> 1105</span>                <span class="keywordflow">if</span> (appPoint.x &gt; bboxXMax) bboxXMax = appPoint.x;</div>
<div class="line"><span class="lineno"> 1106</span>              }</div>
<div class="line"><span class="lineno"> 1107</span>              appX = (isAlmostZero(appX, 1e-01)) ? -1</div>
<div class="line"><span class="lineno"> 1108</span>                                                 : (bboxXMax - bboxXMin) / appX;</div>
<div class="line"><span class="lineno"> 1109</span>              <span class="keywordflow">for</span> (UINT tms = 0; tms &lt; bboxSamplingWeight &amp;&amp; appX &gt;= 0; tms++)</div>
<div class="line"><span class="lineno"> 1110</span>                ratioSampling.push_back(appX);</div>
<div class="line"><span class="lineno"> 1111</span> </div>
<div class="line"><span class="lineno"> 1112</span>              <span class="keywordflow">for</span> (p = 0; p &lt; samplingPointNumber; p++) {</div>
<div class="line"><span class="lineno"> 1113</span>                appX = fabs(samplingPoint1[p].x - stroke1Centroid.x);</div>
<div class="line"><span class="lineno"> 1114</span>                <span class="keywordflow">if</span> (appX)</div>
<div class="line"><span class="lineno"> 1115</span>                  ratioSampling.push_back(</div>
<div class="line"><span class="lineno"> 1116</span>                      fabs(samplingPoint2[p].x - stroke2Centroid.x) / appX);</div>
<div class="line"><span class="lineno"> 1117</span>              }</div>
<div class="line"><span class="lineno"> 1118</span> </div>
<div class="line"><span class="lineno"> 1119</span>              <span class="keywordflow">if</span> (!ratioSampling.empty()) {</div>
<div class="line"><span class="lineno"> 1120</span>                subStrokeXScaling.push_back(average(ratioSampling));</div>
<div class="line"><span class="lineno"> 1121</span>              }</div>
<div class="line"><span class="lineno"> 1122</span>            }</div>
<div class="line"><span class="lineno"> 1123</span> </div>
<div class="line"><span class="lineno"> 1125</span> </div>
<div class="line"><span class="lineno"> 1126</span>            ratioSampling.clear();</div>
<div class="line"><span class="lineno"> 1127</span>            ratioSampling.reserve(samplingPointNumber + bboxSamplingWeight);</div>
<div class="line"><span class="lineno"> 1128</span> </div>
<div class="line"><span class="lineno"> 1129</span>            <span class="keywordflow">if</span> (appY) {</div>
<div class="line"><span class="lineno"> 1130</span>              bboxYMin = (std::numeric_limits&lt;double&gt;::max)();</div>
<div class="line"><span class="lineno"> 1131</span>              bboxYMax = -(std::numeric_limits&lt;double&gt;::max)();</div>
<div class="line"><span class="lineno"> 1132</span>              <span class="keywordflow">for</span> (h = 0; h &lt; subStroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a45101afd31e40d08100fdf23c89fb49e">getControlPointCount</a>(); ++h) {</div>
<div class="line"><span class="lineno"> 1133</span>                appPoint = subStroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a9b60f87075b703360efe4b38097d923f">getControlPoint</a>(h);</div>
<div class="line"><span class="lineno"> 1134</span>                <span class="keywordflow">if</span> (appPoint.y &lt; bboxYMin) bboxYMin = appPoint.y;</div>
<div class="line"><span class="lineno"> 1135</span>                <span class="keywordflow">if</span> (appPoint.y &gt; bboxYMax) bboxYMax = appPoint.y;</div>
<div class="line"><span class="lineno"> 1136</span>              }</div>
<div class="line"><span class="lineno"> 1137</span> </div>
<div class="line"><span class="lineno"> 1138</span>              appY = (isAlmostZero(appY, 1e-01)) ? -1</div>
<div class="line"><span class="lineno"> 1139</span>                                                 : (bboxYMax - bboxYMin) / appY;</div>
<div class="line"><span class="lineno"> 1140</span>              <span class="keywordflow">for</span> (UINT tms = 0; tms &lt; bboxSamplingWeight &amp;&amp; appY &gt;= 0; tms++)</div>
<div class="line"><span class="lineno"> 1141</span>                ratioSampling.push_back(appY);</div>
<div class="line"><span class="lineno"> 1142</span> </div>
<div class="line"><span class="lineno"> 1143</span>              <span class="keywordflow">for</span> (p = 0; p &lt; samplingPointNumber; p++) {</div>
<div class="line"><span class="lineno"> 1144</span>                appY = fabs(samplingPoint1[p].y - stroke1Centroid.y);</div>
<div class="line"><span class="lineno"> 1145</span>                <span class="keywordflow">if</span> (appY)</div>
<div class="line"><span class="lineno"> 1146</span>                  ratioSampling.push_back(</div>
<div class="line"><span class="lineno"> 1147</span>                      fabs(samplingPoint2[p].y - stroke2Centroid.y) / appY);</div>
<div class="line"><span class="lineno"> 1148</span>              }</div>
<div class="line"><span class="lineno"> 1149</span> </div>
<div class="line"><span class="lineno"> 1150</span>              <span class="keywordflow">if</span> (!ratioSampling.empty()) {</div>
<div class="line"><span class="lineno"> 1151</span>                subStrokeYScaling.push_back(average(ratioSampling));</div>
<div class="line"><span class="lineno"> 1152</span>              }</div>
<div class="line"><span class="lineno"> 1153</span>            }</div>
<div class="line"><span class="lineno"> 1154</span> </div>
<div class="line"><span class="lineno"> 1155</span>            <span class="keyword">delete</span> subStroke1;</div>
<div class="line"><span class="lineno"> 1156</span>            <span class="keyword">delete</span> subStroke2;</div>
<div class="line"><span class="lineno"> 1157</span>            subStroke1 = 0;</div>
<div class="line"><span class="lineno"> 1158</span>            subStroke2 = 0;</div>
<div class="line"><span class="lineno"> 1159</span>          }</div>
<div class="line"><span class="lineno"> 1160</span> </div>
<div class="line"><span class="lineno"> 1161</span>          <span class="keywordflow">if</span> (subStrokeXScaling.empty()) {</div>
<div class="line"><span class="lineno"> 1162</span>            transform.m_scaleX = 1.0;</div>
<div class="line"><span class="lineno"> 1163</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1164</span>            transform.m_scaleX = average(subStrokeXScaling);</div>
<div class="line"><span class="lineno"> 1165</span>            <span class="keywordflow">if</span> (isAlmostZero(transform.m_scaleX - 1.0))</div>
<div class="line"><span class="lineno"> 1166</span>              transform.m_scaleX = 1.0;</div>
<div class="line"><span class="lineno"> 1167</span>          }</div>
<div class="line"><span class="lineno"> 1168</span> </div>
<div class="line"><span class="lineno"> 1169</span>          <span class="keywordflow">if</span> (subStrokeYScaling.empty()) {</div>
<div class="line"><span class="lineno"> 1170</span>            transform.m_scaleY = 1.0;</div>
<div class="line"><span class="lineno"> 1171</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1172</span>            transform.m_scaleY = average(subStrokeYScaling);</div>
<div class="line"><span class="lineno"> 1173</span>            <span class="keywordflow">if</span> (isAlmostZero(transform.m_scaleY - 1.0))</div>
<div class="line"><span class="lineno"> 1174</span>              transform.m_scaleY = 1.0;</div>
<div class="line"><span class="lineno"> 1175</span>          }</div>
<div class="line"><span class="lineno"> 1176</span>          <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1177</span><span class="comment">#ifdef _DEBUG</span></div>
<div class="line"><span class="lineno"> 1178</span><span class="comment"></span> </div>
<div class="line"><span class="lineno"> 1179</span><span class="comment">TDebugMessage::getStream()&lt;&lt;&quot;x scale &quot;&lt;&lt; transform.m_scaleX ;</span></div>
<div class="line"><span class="lineno"> 1180</span><span class="comment">TDebugMessage::flush();</span></div>
<div class="line"><span class="lineno"> 1181</span><span class="comment">TDebugMessage::getStream()&lt;&lt;&quot;y scale &quot;&lt;&lt; transform.m_scaleY ;</span></div>
<div class="line"><span class="lineno"> 1182</span><span class="comment">TDebugMessage::flush();</span></div>
<div class="line"><span class="lineno"> 1183</span><span class="comment">#endif</span></div>
<div class="line"><span class="lineno"> 1184</span><span class="comment">*/</span></div>
<div class="line"><span class="lineno"> 1185</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1186</span>          subStrokeXScaling.clear();</div>
<div class="line"><span class="lineno"> 1187</span>          subStrokeXScaling.reserve(cornerSize - 1);</div>
<div class="line"><span class="lineno"> 1188</span> </div>
<div class="line"><span class="lineno"> 1189</span>          <span class="keywordflow">for</span> (j = 0; j &lt; cornerSize - 1; j++) {</div>
<div class="line"><span class="lineno"> 1191</span> </div>
<div class="line"><span class="lineno"> 1192</span>            subStroke1 =</div>
<div class="line"><span class="lineno"> 1193</span>                extract(stroke1, transform.m_firstStrokeCornerIndexes[j],</div>
<div class="line"><span class="lineno"> 1194</span>                        transform.m_firstStrokeCornerIndexes[j + 1] - 1);</div>
<div class="line"><span class="lineno"> 1195</span>            sample(subStroke1, samplingPointNumber, samplingPoint1);</div>
<div class="line"><span class="lineno"> 1196</span>            subStroke2 =</div>
<div class="line"><span class="lineno"> 1197</span>                extract(stroke2, transform.m_secondStrokeCornerIndexes[j],</div>
<div class="line"><span class="lineno"> 1198</span>                        transform.m_secondStrokeCornerIndexes[j + 1] - 1);</div>
<div class="line"><span class="lineno"> 1199</span>            sample(subStroke2, samplingPointNumber, samplingPoint2);</div>
<div class="line"><span class="lineno"> 1200</span> </div>
<div class="line"><span class="lineno"> 1202</span> </div>
<div class="line"><span class="lineno"> 1203</span>            ratioSampling.clear();</div>
<div class="line"><span class="lineno"> 1204</span>            ratioSampling.reserve(samplingPointNumber + bboxSamplingWeight);</div>
<div class="line"><span class="lineno"> 1205</span> </div>
<div class="line"><span class="lineno"> 1206</span>            <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> bbox1 = subStroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a456bedcae5e8af3a84823cb251584957">getBBox</a>();</div>
<div class="line"><span class="lineno"> 1207</span>            <span class="keywordtype">double</span> app   = tdistance2(bbox1.getP00(), bbox1.getP11());</div>
<div class="line"><span class="lineno"> 1208</span>            <span class="keywordflow">if</span> (app) {</div>
<div class="line"><span class="lineno"> 1209</span>              <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> bbox2 =</div>
<div class="line"><span class="lineno"> 1210</span>                  <a class="code hl_class" href="class_t_rotation.html">TRotation</a>(transform.m_rotation).<a class="code hl_function" href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">inv</a>() * subStroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a456bedcae5e8af3a84823cb251584957">getBBox</a>();</div>
<div class="line"><span class="lineno"> 1211</span>              app = sqrt(tdistance2(bbox2.getP00(), bbox2.getP11()) / app);</div>
<div class="line"><span class="lineno"> 1212</span> </div>
<div class="line"><span class="lineno"> 1213</span>              <span class="keywordflow">for</span> (UINT tms = 0; tms &lt; bboxSamplingWeight; tms++)</div>
<div class="line"><span class="lineno"> 1214</span>                ratioSampling.push_back(app);</div>
<div class="line"><span class="lineno"> 1215</span> </div>
<div class="line"><span class="lineno"> 1216</span>              <span class="keywordtype">double</span> app;</div>
<div class="line"><span class="lineno"> 1217</span>              <span class="keywordflow">for</span> (p = 0; p &lt; samplingPointNumber; p++) {</div>
<div class="line"><span class="lineno"> 1218</span>                app = tdistance(samplingPoint1[p], stroke1Centroid);</div>
<div class="line"><span class="lineno"> 1219</span>                <span class="keywordflow">if</span> (app) {</div>
<div class="line"><span class="lineno"> 1220</span>                  ratioSampling.push_back(</div>
<div class="line"><span class="lineno"> 1221</span>                      tdistance(samplingPoint2[p], stroke2Centroid) / app);</div>
<div class="line"><span class="lineno"> 1222</span>                }</div>
<div class="line"><span class="lineno"> 1223</span>              }</div>
<div class="line"><span class="lineno"> 1224</span>            }</div>
<div class="line"><span class="lineno"> 1225</span>            <span class="keywordflow">if</span> (!ratioSampling.empty()) {</div>
<div class="line"><span class="lineno"> 1226</span>              subStrokeXScaling.push_back(average(ratioSampling));</div>
<div class="line"><span class="lineno"> 1227</span>            }</div>
<div class="line"><span class="lineno"> 1228</span> </div>
<div class="line"><span class="lineno"> 1229</span>            <span class="keyword">delete</span> subStroke1;</div>
<div class="line"><span class="lineno"> 1230</span>            <span class="keyword">delete</span> subStroke2;</div>
<div class="line"><span class="lineno"> 1231</span>            subStroke1 = 0;</div>
<div class="line"><span class="lineno"> 1232</span>            subStroke2 = 0;</div>
<div class="line"><span class="lineno"> 1233</span>          }</div>
<div class="line"><span class="lineno"> 1234</span> </div>
<div class="line"><span class="lineno"> 1235</span>          <span class="keywordflow">if</span> (subStrokeXScaling.empty()) {</div>
<div class="line"><span class="lineno"> 1236</span>            transform.m_scaleX = transform.m_scaleY = 1.0;</div>
<div class="line"><span class="lineno"> 1237</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1238</span>            transform.m_scaleX = transform.m_scaleY =</div>
<div class="line"><span class="lineno"> 1239</span>                average(subStrokeXScaling);</div>
<div class="line"><span class="lineno"> 1240</span>            <span class="keywordflow">if</span> (isAlmostZero(transform.m_scaleX - 1.0, 0.00001))</div>
<div class="line"><span class="lineno"> 1241</span>              transform.m_scaleX = transform.m_scaleY = 1.0;</div>
<div class="line"><span class="lineno"> 1242</span>          }</div>
<div class="line"><span class="lineno"> 1243</span>          <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1244</span><span class="comment">#ifdef _DEBUG</span></div>
<div class="line"><span class="lineno"> 1245</span><span class="comment"></span> </div>
<div class="line"><span class="lineno"> 1246</span><span class="comment">TDebugMessage::getStream()&lt;&lt;&quot;scale &quot;&lt;&lt; transform.m_scaleX ;</span></div>
<div class="line"><span class="lineno"> 1247</span><span class="comment">TDebugMessage::flush();</span></div>
<div class="line"><span class="lineno"> 1248</span><span class="comment">#endif</span></div>
<div class="line"><span class="lineno"> 1249</span><span class="comment">*/</span></div>
<div class="line"><span class="lineno"> 1250</span>        }</div>
<div class="line"><span class="lineno"> 1251</span> </div>
<div class="line"><span class="lineno"> 1254</span> </div>
<div class="line"><span class="lineno"> 1255</span>        std::vector&lt;TPointD&gt; vpOld(cornerSize), vpNew(cornerSize);</div>
<div class="line"><span class="lineno"> 1256</span>        <a class="code hl_class" href="class_t_point_t.html">TPointD</a> pOld, pNew;</div>
<div class="line"><span class="lineno"> 1257</span> </div>
<div class="line"><span class="lineno"> 1258</span>        <span class="keywordflow">for</span> (j = 0; j &lt; cornerSize - 1; j++) {</div>
<div class="line"><span class="lineno"> 1259</span>          vpOld[j] = stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a06b18ffed330411aad73ef1748a3f263">getChunk</a>(transform.m_firstStrokeCornerIndexes[j])</div>
<div class="line"><span class="lineno"> 1260</span>                         -&gt;<a class="code hl_function" href="class_t_quadratic.html#a1ee0984c7cd5c818840f6e688727ddcf">getP0</a>();</div>
<div class="line"><span class="lineno"> 1261</span>          vpNew[j] = stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a06b18ffed330411aad73ef1748a3f263">getChunk</a>(transform.m_secondStrokeCornerIndexes[j])</div>
<div class="line"><span class="lineno"> 1262</span>                         -&gt;<a class="code hl_function" href="class_t_quadratic.html#a1ee0984c7cd5c818840f6e688727ddcf">getP0</a>();</div>
<div class="line"><span class="lineno"> 1263</span>        }</div>
<div class="line"><span class="lineno"> 1264</span>        vpOld[j] = stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a9b60f87075b703360efe4b38097d923f">getControlPoint</a>(stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a45101afd31e40d08100fdf23c89fb49e">getControlPointCount</a>());</div>
<div class="line"><span class="lineno"> 1265</span>        vpNew[j] = stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a9b60f87075b703360efe4b38097d923f">getControlPoint</a>(stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a45101afd31e40d08100fdf23c89fb49e">getControlPointCount</a>());</div>
<div class="line"><span class="lineno"> 1266</span> </div>
<div class="line"><span class="lineno"> 1267</span>        <span class="keywordflow">if</span> (transform.m_rotation == 0.0) {</div>
<div class="line"><span class="lineno"> 1268</span>          <span class="keywordflow">if</span> (transform.m_scaleX == 1.0 &amp;&amp; transform.m_scaleY == 1.0) {</div>
<div class="line"><span class="lineno"> 1269</span>            transform.m_translate = stroke2Centroid - stroke1Centroid;</div>
<div class="line"><span class="lineno"> 1270</span>            transform.m_rotationAndScaleCenter = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>();</div>
<div class="line"><span class="lineno"> 1271</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1272</span>            <span class="keywordflow">if</span> (transform.m_scaleX == 1.0) {</div>
<div class="line"><span class="lineno"> 1273</span>              transform.m_rotationAndScaleCenter.x = 0;</div>
<div class="line"><span class="lineno"> 1274</span>              transform.m_translate.x              = 0;</div>
<div class="line"><span class="lineno"> 1275</span>              <span class="keywordflow">for</span> (j = 0; j &lt; cornerSize; j++) {</div>
<div class="line"><span class="lineno"> 1276</span>                transform.m_translate.x += vpNew[j].x - vpOld[j].x;</div>
<div class="line"><span class="lineno"> 1277</span>              }</div>
<div class="line"><span class="lineno"> 1278</span>              transform.m_translate.x = transform.m_translate.x / cornerSize;</div>
<div class="line"><span class="lineno"> 1279</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1280</span>              transform.m_rotationAndScaleCenter.x = 0;</div>
<div class="line"><span class="lineno"> 1281</span> </div>
<div class="line"><span class="lineno"> 1282</span>              <span class="keywordflow">for</span> (j = 0; j &lt; cornerSize; j++) {</div>
<div class="line"><span class="lineno"> 1283</span>                pOld = vpOld[j];</div>
<div class="line"><span class="lineno"> 1284</span>                pNew = vpNew[j];</div>
<div class="line"><span class="lineno"> 1285</span>                transform.m_rotationAndScaleCenter.x +=</div>
<div class="line"><span class="lineno"> 1286</span>                    (transform.m_scaleX * pOld.x - pNew.x) /</div>
<div class="line"><span class="lineno"> 1287</span>                    (transform.m_scaleX - 1.0);</div>
<div class="line"><span class="lineno"> 1288</span>              }</div>
<div class="line"><span class="lineno"> 1289</span>              transform.m_rotationAndScaleCenter.x =</div>
<div class="line"><span class="lineno"> 1290</span>                  transform.m_rotationAndScaleCenter.x / cornerSize;</div>
<div class="line"><span class="lineno"> 1291</span>              transform.m_translate.x = 0;</div>
<div class="line"><span class="lineno"> 1292</span>            }</div>
<div class="line"><span class="lineno"> 1293</span> </div>
<div class="line"><span class="lineno"> 1294</span>            <span class="keywordflow">if</span> (transform.m_scaleY == 1.0) {</div>
<div class="line"><span class="lineno"> 1295</span>              transform.m_rotationAndScaleCenter.y = 0;</div>
<div class="line"><span class="lineno"> 1296</span>              transform.m_translate.y              = 0;</div>
<div class="line"><span class="lineno"> 1297</span>              <span class="keywordflow">for</span> (j = 0; j &lt; cornerSize; j++) {</div>
<div class="line"><span class="lineno"> 1298</span>                transform.m_translate.y += vpNew[j].y - vpOld[j].y;</div>
<div class="line"><span class="lineno"> 1299</span>              }</div>
<div class="line"><span class="lineno"> 1300</span>              transform.m_translate.y = transform.m_translate.y / cornerSize;</div>
<div class="line"><span class="lineno"> 1301</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1302</span>              transform.m_rotationAndScaleCenter.y = 0;</div>
<div class="line"><span class="lineno"> 1303</span> </div>
<div class="line"><span class="lineno"> 1304</span>              <span class="keywordflow">for</span> (j = 0; j &lt; cornerSize; j++) {</div>
<div class="line"><span class="lineno"> 1305</span>                pOld = vpOld[j];</div>
<div class="line"><span class="lineno"> 1306</span>                pNew = vpNew[j];</div>
<div class="line"><span class="lineno"> 1307</span>                transform.m_rotationAndScaleCenter.y +=</div>
<div class="line"><span class="lineno"> 1308</span>                    (transform.m_scaleY * pOld.y - pNew.y) /</div>
<div class="line"><span class="lineno"> 1309</span>                    (transform.m_scaleY - 1.0);</div>
<div class="line"><span class="lineno"> 1310</span>              }</div>
<div class="line"><span class="lineno"> 1311</span>              transform.m_rotationAndScaleCenter.y =</div>
<div class="line"><span class="lineno"> 1312</span>                  transform.m_rotationAndScaleCenter.y / cornerSize;</div>
<div class="line"><span class="lineno"> 1313</span>              transform.m_translate.y = 0;</div>
<div class="line"><span class="lineno"> 1314</span>            }</div>
<div class="line"><span class="lineno"> 1315</span>          }</div>
<div class="line"><span class="lineno"> 1316</span> </div>
<div class="line"><span class="lineno"> 1317</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1318</span>          assert(transform.m_scaleX == transform.m_scaleY);</div>
<div class="line"><span class="lineno"> 1319</span> </div>
<div class="line"><span class="lineno"> 1320</span>          cs = transform.m_scaleX * cos(totalRadRotation);</div>
<div class="line"><span class="lineno"> 1321</span>          sn = transform.m_scaleX * sin(totalRadRotation);</div>
<div class="line"><span class="lineno"> 1322</span> </div>
<div class="line"><span class="lineno"> 1323</span>          <span class="comment">// scelgo punti da usare come vincolo, per ottenere la translazione,</span></div>
<div class="line"><span class="lineno"> 1324</span>          <span class="comment">// dato un centro di rotazione</span></div>
<div class="line"><span class="lineno"> 1325</span> </div>
<div class="line"><span class="lineno"> 1326</span>          <span class="comment">// dato il punto pOld e pNew si calcola analiticamnete il punto di</span></div>
<div class="line"><span class="lineno"> 1327</span>          <span class="comment">// rotazione e scala</span></div>
<div class="line"><span class="lineno"> 1328</span>          <span class="comment">// che minimizza la traslazione aggiuntiva e la traslazione stessa</span></div>
<div class="line"><span class="lineno"> 1329</span> </div>
<div class="line"><span class="lineno"> 1330</span>          <span class="keywordflow">for</span> (j = 0; j &lt; cornerSize; j++) {</div>
<div class="line"><span class="lineno"> 1331</span>            pOld   = vpOld[j];</div>
<div class="line"><span class="lineno"> 1332</span>            pNew   = vpNew[j];</div>
<div class="line"><span class="lineno"> 1333</span>            constK = pNew.x - cs * pOld.x + sn * pOld.y;</div>
<div class="line"><span class="lineno"> 1334</span>            constQ = pNew.y - sn * pOld.x - cs * pOld.y;</div>
<div class="line"><span class="lineno"> 1335</span>            constB = 2 * (constK * (cs - 1.) + sn * constQ);</div>
<div class="line"><span class="lineno"> 1336</span>            constD = 2 * (constQ * (cs - 1.) - sn * constK);</div>
<div class="line"><span class="lineno"> 1337</span>            constA = transform.m_scaleX * transform.m_scaleX + 1 - 2 * cs;</div>
<div class="line"><span class="lineno"> 1338</span>            assert(constA &gt; 0);</div>
<div class="line"><span class="lineno"> 1339</span>            constA = 1.0 / (2 * constA);</div>
<div class="line"><span class="lineno"> 1340</span>            transform.m_rotationAndScaleCenter.x += -constB * constA;</div>
<div class="line"><span class="lineno"> 1341</span>            transform.m_rotationAndScaleCenter.y += -constD * constA;</div>
<div class="line"><span class="lineno"> 1342</span>          }</div>
<div class="line"><span class="lineno"> 1343</span> </div>
<div class="line"><span class="lineno"> 1344</span>          transform.m_rotationAndScaleCenter =</div>
<div class="line"><span class="lineno"> 1345</span>              transform.m_rotationAndScaleCenter * (1.0 / (double)cornerSize);</div>
<div class="line"><span class="lineno"> 1346</span> </div>
<div class="line"><span class="lineno"> 1347</span>          transform.m_translate.x =</div>
<div class="line"><span class="lineno"> 1348</span>              (cs - 1.0) * transform.m_rotationAndScaleCenter.x -</div>
<div class="line"><span class="lineno"> 1349</span>              sn * transform.m_rotationAndScaleCenter.y + constK;</div>
<div class="line"><span class="lineno"> 1350</span> </div>
<div class="line"><span class="lineno"> 1351</span>          transform.m_translate.y =</div>
<div class="line"><span class="lineno"> 1352</span>              sn * transform.m_rotationAndScaleCenter.x +</div>
<div class="line"><span class="lineno"> 1353</span>              (cs - 1.0) * transform.m_rotationAndScaleCenter.y + constQ;</div>
<div class="line"><span class="lineno"> 1354</span>        }</div>
<div class="line"><span class="lineno"> 1355</span> </div>
<div class="line"><span class="lineno"> 1357</span> </div>
<div class="line"><span class="lineno"> 1358</span>        transform.m_inverse = (<a class="code hl_class" href="class_t_translation.html">TTranslation</a>(transform.m_translate) *</div>
<div class="line"><span class="lineno"> 1359</span>                               <a class="code hl_class" href="class_t_scale.html">TScale</a>(transform.m_rotationAndScaleCenter,</div>
<div class="line"><span class="lineno"> 1360</span>                                      transform.m_scaleX, transform.m_scaleY) *</div>
<div class="line"><span class="lineno"> 1361</span>                               <a class="code hl_class" href="class_t_rotation.html">TRotation</a>(transform.m_rotationAndScaleCenter,</div>
<div class="line"><span class="lineno"> 1362</span>                                         transform.m_rotation))</div>
<div class="line"><span class="lineno"> 1363</span>                                  .inv();</div>
<div class="line"><span class="lineno"> 1364</span> </div>
<div class="line"><span class="lineno"> 1365</span>        <span class="comment">// debugStream.close();</span></div>
<div class="line"><span class="lineno"> 1366</span>      }  <span class="comment">// end if !isPoint</span></div>
<div class="line"><span class="lineno"> 1367</span> </div>
<div class="line"><span class="lineno"> 1368</span>    }  <span class="comment">// end if !isEqual</span></div>
<div class="line"><span class="lineno"> 1369</span> </div>
<div class="line"><span class="lineno"> 1370</span>    m_transformation.push_back(transform);</div>
<div class="line"><span class="lineno"> 1371</span> </div>
<div class="line"><span class="lineno"> 1372</span>  }  <span class="comment">// end for each stroke</span></div>
<div class="line"><span class="lineno"> 1373</span>}</div>
<div class="ttc" id="aclass_t_affine_html"><div class="ttname"><a href="class_t_affine.html">TAffine</a></div><div class="ttdoc">This is the base class for the affine transformations.</div><div class="ttdef"><b>Definition:</b> tgeometry.h:864</div></div>
<div class="ttc" id="aclass_t_affine_html_a570529b96b1ec5abc711aaa9aac09ff9"><div class="ttname"><a href="class_t_affine.html#a570529b96b1ec5abc711aaa9aac09ff9">TAffine::inv</a></div><div class="ttdeci">TAffine inv() const</div><div class="ttdef"><b>Definition:</b> tgeometry.cpp:55</div></div>
<div class="ttc" id="aclass_t_point_t_html"><div class="ttname"><a href="class_t_point_t.html">TPointT&lt; double &gt;</a></div></div>
<div class="ttc" id="aclass_t_quadratic_html_a1ee0984c7cd5c818840f6e688727ddcf"><div class="ttname"><a href="class_t_quadratic.html#a1ee0984c7cd5c818840f6e688727ddcf">TQuadratic::getP0</a></div><div class="ttdeci">TPointD getP0() const</div><div class="ttdoc">Return first control point P0.</div><div class="ttdef"><b>Definition:</b> tcurves.h:138</div></div>
<div class="ttc" id="aclass_t_rect_t_html"><div class="ttname"><a href="class_t_rect_t.html">TRectT&lt; double &gt;</a></div></div>
<div class="ttc" id="aclass_t_rotation_html"><div class="ttname"><a href="class_t_rotation.html">TRotation</a></div><div class="ttdef"><b>Definition:</b> tgeometry.h:1083</div></div>
<div class="ttc" id="aclass_t_scale_html"><div class="ttname"><a href="class_t_scale.html">TScale</a></div><div class="ttdef"><b>Definition:</b> tgeometry.h:1133</div></div>
<div class="ttc" id="aclass_t_stroke_html"><div class="ttname"><a href="class_t_stroke.html">TStroke</a></div><div class="ttdef"><b>Definition:</b> tstroke.h:47</div></div>
<div class="ttc" id="aclass_t_stroke_html_a06b18ffed330411aad73ef1748a3f263"><div class="ttname"><a href="class_t_stroke.html#a06b18ffed330411aad73ef1748a3f263">TStroke::getChunk</a></div><div class="ttdeci">const TThickQuadratic * getChunk(int index) const</div><div class="ttdef"><b>Definition:</b> tstroke.cpp:1855</div></div>
<div class="ttc" id="aclass_t_stroke_html_a079a513cb8a60d9a759b4f0c8211eab4"><div class="ttname"><a href="class_t_stroke.html#a079a513cb8a60d9a759b4f0c8211eab4">TStroke::getLength</a></div><div class="ttdeci">double getLength(int chunk, double t) const</div><div class="ttdoc">Returns the length of the stroke at passed chunk-param.</div><div class="ttdef"><b>Definition:</b> tstroke.cpp:1591</div></div>
<div class="ttc" id="aclass_t_stroke_html_a45101afd31e40d08100fdf23c89fb49e"><div class="ttname"><a href="class_t_stroke.html#a45101afd31e40d08100fdf23c89fb49e">TStroke::getControlPointCount</a></div><div class="ttdeci">int getControlPointCount() const</div><div class="ttdoc">Return number of control points in a stroke.</div><div class="ttdef"><b>Definition:</b> tstroke.cpp:1849</div></div>
<div class="ttc" id="aclass_t_stroke_html_a456bedcae5e8af3a84823cb251584957"><div class="ttname"><a href="class_t_stroke.html#a456bedcae5e8af3a84823cb251584957">TStroke::getBBox</a></div><div class="ttdeci">TRectD getBBox(double w0=0.0, double w1=1.0) const</div><div class="ttdoc">Return the bbox of the stroke.</div><div class="ttdef"><b>Definition:</b> tstroke.cpp:1861</div></div>
<div class="ttc" id="aclass_t_stroke_html_a81b63663a798724333d8de692fdbcac0"><div class="ttname"><a href="class_t_stroke.html#a81b63663a798724333d8de692fdbcac0">TStroke::getChunkCount</a></div><div class="ttdeci">int getChunkCount() const</div><div class="ttdef"><b>Definition:</b> tstroke.cpp:1845</div></div>
<div class="ttc" id="aclass_t_stroke_html_a9b60f87075b703360efe4b38097d923f"><div class="ttname"><a href="class_t_stroke.html#a9b60f87075b703360efe4b38097d923f">TStroke::getControlPoint</a></div><div class="ttdeci">TThickPoint getControlPoint(int n) const</div><div class="ttdef"><b>Definition:</b> tstroke.cpp:1352</div></div>
<div class="ttc" id="aclass_t_translation_html"><div class="ttname"><a href="class_t_translation.html">TTranslation</a></div><div class="ttdef"><b>Definition:</b> tgeometry.h:1074</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01861">TStroke::getBBox()</a>, <a class="el" href="#l01855">TStroke::getChunk()</a>, <a class="el" href="#l01845">TStroke::getChunkCount()</a>, <a class="el" href="#l01352">TStroke::getControlPoint()</a>, <a class="el" href="#l01849">TStroke::getControlPointCount()</a>, <a class="el" href="#l01591">TStroke::getLength()</a>, <a class="el" href="#l00138">TQuadratic::getP0()</a>, and <a class="el" href="#l00055">TAffine::inv()</a>.</p>

</div>
</div>
<a id="a9d3f6735f918019ac5446468187153ae" name="a9d3f6735f918019ac5446468187153ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d3f6735f918019ac5446468187153ae">&#9670;&nbsp;</a></span>transferColor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TInbetween::Imp::transferColor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_vector_image_p.html">TVectorImageP</a> &amp;&#160;</td>
          <td class="paramname"><em>destination</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1536</span>                                                                        {</div>
<div class="line"><span class="lineno"> 1537</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_t_vector_image_p.html">TVectorImageP</a> &amp;original = m_firstImage;</div>
<div class="line"><span class="lineno"> 1538</span>  destination-&gt;setPalette(original-&gt;getPalette());</div>
<div class="line"><span class="lineno"> 1539</span> </div>
<div class="line"><span class="lineno"> 1540</span>  destination-&gt;findRegions();</div>
<div class="line"><span class="lineno"> 1541</span> </div>
<div class="line"><span class="lineno"> 1542</span>  <span class="keywordflow">if</span> (destination-&gt;getRegionCount()) {</div>
<div class="line"><span class="lineno"> 1543</span>    UINT strokeCount1 = original-&gt;getStrokeCount();</div>
<div class="line"><span class="lineno"> 1544</span>    UINT strokeCount2 = destination-&gt;getStrokeCount();</div>
<div class="line"><span class="lineno"> 1545</span>    <span class="keywordflow">if</span> (strokeCount1 &gt; strokeCount2) strokeCount1 = strokeCount2;</div>
<div class="line"><span class="lineno"> 1546</span> </div>
<div class="line"><span class="lineno"> 1547</span>    <span class="keywordflow">for</span> (UINT i = 0; i &lt; strokeCount1; i++) {</div>
<div class="line"><span class="lineno"> 1548</span>      <a class="code hl_function" href="class_t_vector_image.html#a484c802b55b763ae00e5e44706055b09">TVectorImage::transferStrokeColors</a>(original, i, destination, i);</div>
<div class="line"><span class="lineno"> 1549</span>    }</div>
<div class="line"><span class="lineno"> 1550</span>  }</div>
<div class="line"><span class="lineno"> 1551</span>}</div>
<div class="ttc" id="aclass_t_vector_image_html_a484c802b55b763ae00e5e44706055b09"><div class="ttname"><a href="class_t_vector_image.html#a484c802b55b763ae00e5e44706055b09">TVectorImage::transferStrokeColors</a></div><div class="ttdeci">static void transferStrokeColors(TVectorImageP sourceImage, int sourceStroke, TVectorImageP destinationImage, int destinationStroke)</div><div class="ttdef"><b>Definition:</b> tvectorimage.cpp:1017</div></div>
<div class="ttc" id="aclass_t_vector_image_p_html"><div class="ttname"><a href="class_t_vector_image_p.html">TVectorImageP</a></div><div class="ttdef"><b>Definition:</b> tvectorimage.h:417</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab9dc889db4cf3c6998deee9f4543550a" name="ab9dc889db4cf3c6998deee9f4543550a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9dc889db4cf3c6998deee9f4543550a">&#9670;&nbsp;</a></span>tween()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_vector_image_p.html">TVectorImageP</a> TInbetween::Imp::tween </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1377</span>                                                 {</div>
<div class="line"><span class="lineno"> 1378</span>  <span class="keyword">const</span> <span class="keywordtype">double</span> step             = 5.0;</div>
<div class="line"><span class="lineno"> 1379</span>  <span class="keyword">const</span> <span class="keywordtype">double</span> interpolateError = 1.0;</div>
<div class="line"><span class="lineno"> 1380</span> </div>
<div class="line"><span class="lineno"> 1381</span>  <a class="code hl_class" href="class_t_vector_image_p.html">TVectorImageP</a> vi = <span class="keyword">new</span> <a class="code hl_class" href="class_t_vector_image.html">TVectorImage</a>;</div>
<div class="line"><span class="lineno"> 1382</span> </div>
<div class="line"><span class="lineno"> 1383</span>  UINT strokeCount1 = m_firstImage-&gt;getStrokeCount();</div>
<div class="line"><span class="lineno"> 1384</span>  UINT strokeCount2 = m_lastImage-&gt;getStrokeCount();</div>
<div class="line"><span class="lineno"> 1385</span>  vi-&gt;setPalette(m_firstImage-&gt;getPalette());</div>
<div class="line"><span class="lineno"> 1386</span>  <span class="keywordflow">if</span> (strokeCount1 &gt; strokeCount2) strokeCount1 = strokeCount2;</div>
<div class="line"><span class="lineno"> 1387</span> </div>
<div class="line"><span class="lineno"> 1388</span>  assert(m_transformation.size() == strokeCount1);</div>
<div class="line"><span class="lineno"> 1389</span> </div>
<div class="line"><span class="lineno"> 1390</span>  <span class="keywordtype">double</span> totalLen1, totalLen2, len1, len2, step1, step2;</div>
<div class="line"><span class="lineno"> 1391</span>  std::vector&lt;TThickPoint&gt; points;</div>
<div class="line"><span class="lineno"> 1392</span>  <a class="code hl_struct" href="class_t_stroke.html">TStroke</a> *stroke1, *stroke2, *subStroke1, *subStroke2, *stroke;</div>
<div class="line"><span class="lineno"> 1393</span> </div>
<div class="line"><span class="lineno"> 1394</span>  <a class="code hl_class" href="class_t_affine.html">TAffine</a> mt, invMatrix;</div>
<div class="line"><span class="lineno"> 1395</span>  <a class="code hl_class" href="class_t_thick_point.html">TThickPoint</a> point2, finalPoint;</div>
<div class="line"><span class="lineno"> 1396</span>  UINT i, j, cp, cpSize;</div>
<div class="line"><span class="lineno"> 1397</span> </div>
<div class="line"><span class="lineno"> 1398</span>  <span class="keywordflow">for</span> (i = 0; i &lt; strokeCount1; i++) {</div>
<div class="line"><span class="lineno"> 1399</span>    stroke1 = m_firstImage-&gt;getStroke(i);</div>
<div class="line"><span class="lineno"> 1400</span>    stroke2 = m_lastImage-&gt;getStroke(i);</div>
<div class="line"><span class="lineno"> 1401</span> </div>
<div class="line"><span class="lineno"> 1402</span>    <span class="keywordflow">if</span> (m_transformation[i].m_type == StrokeTransform::EQUAL) {</div>
<div class="line"><span class="lineno"> 1403</span>      stroke = <span class="keyword">new</span> <a class="code hl_struct" href="class_t_stroke.html">TStroke</a>(*stroke1);</div>
<div class="line"><span class="lineno"> 1404</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1405</span>      points.clear();</div>
<div class="line"><span class="lineno"> 1406</span>      totalLen1 = stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a079a513cb8a60d9a759b4f0c8211eab4">getLength</a>();</div>
<div class="line"><span class="lineno"> 1407</span>      totalLen2 = stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a079a513cb8a60d9a759b4f0c8211eab4">getLength</a>();</div>
<div class="line"><span class="lineno"> 1408</span>      ;</div>
<div class="line"><span class="lineno"> 1409</span> </div>
<div class="line"><span class="lineno"> 1410</span>      <span class="keywordflow">if</span> (stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a45101afd31e40d08100fdf23c89fb49e">getControlPointCount</a>() == stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a45101afd31e40d08100fdf23c89fb49e">getControlPointCount</a>() &amp;&amp;</div>
<div class="line"><span class="lineno"> 1411</span>          stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a3565d6c34d3eb02fb1a6993ca626425c">isSelfLoop</a>() &amp;&amp; stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a3565d6c34d3eb02fb1a6993ca626425c">isSelfLoop</a>()) {</div>
<div class="line"><span class="lineno"> 1412</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a45101afd31e40d08100fdf23c89fb49e">getControlPointCount</a>(); i++) {</div>
<div class="line"><span class="lineno"> 1413</span>          <a class="code hl_class" href="class_t_thick_point.html">TThickPoint</a> p0 = stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a9b60f87075b703360efe4b38097d923f">getControlPoint</a>(i);</div>
<div class="line"><span class="lineno"> 1414</span>          <a class="code hl_class" href="class_t_thick_point.html">TThickPoint</a> p1 = stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a9b60f87075b703360efe4b38097d923f">getControlPoint</a>(i);</div>
<div class="line"><span class="lineno"> 1415</span>          points.push_back(p0 * (1 - t) + p1 * t);</div>
<div class="line"><span class="lineno"> 1416</span>        }</div>
<div class="line"><span class="lineno"> 1417</span>        stroke = <span class="keyword">new</span> <a class="code hl_struct" href="class_t_stroke.html">TStroke</a>(points);</div>
<div class="line"><span class="lineno"> 1418</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_transformation[i].m_type == StrokeTransform::POINT) {</div>
<div class="line"><span class="lineno"> 1419</span>        <a class="code hl_class" href="class_t_thick_point.html">TThickPoint</a> pOld = stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a08496981e0538356833d4c6513af38b0">getThickPointAtLength</a>(0.5 * totalLen1);</div>
<div class="line"><span class="lineno"> 1420</span>        <a class="code hl_class" href="class_t_thick_point.html">TThickPoint</a> pNew = stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a08496981e0538356833d4c6513af38b0">getThickPointAtLength</a>(0.5 * totalLen2);</div>
<div class="line"><span class="lineno"> 1421</span>        points.push_back(pOld * (1 - t) + pNew * t);</div>
<div class="line"><span class="lineno"> 1422</span>        points.push_back(points[0]);</div>
<div class="line"><span class="lineno"> 1423</span>        points.push_back(points[0]);</div>
<div class="line"><span class="lineno"> 1424</span>        stroke = <span class="keyword">new</span> <a class="code hl_struct" href="class_t_stroke.html">TStroke</a>(points);</div>
<div class="line"><span class="lineno"> 1425</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1426</span>        mt = (m_transformation[i].m_inverse.isIdentity())</div>
<div class="line"><span class="lineno"> 1427</span>                 ? <a class="code hl_class" href="class_t_affine.html">TAffine</a>()</div>
<div class="line"><span class="lineno"> 1428</span>                 : <a class="code hl_class" href="class_t_translation.html">TTranslation</a>(m_transformation[i].m_translate * t) *</div>
<div class="line"><span class="lineno"> 1429</span>                       <a class="code hl_class" href="class_t_scale.html">TScale</a>(m_transformation[i].m_rotationAndScaleCenter,</div>
<div class="line"><span class="lineno"> 1430</span>                              (1 - t) + t * m_transformation[i].m_scaleX,</div>
<div class="line"><span class="lineno"> 1431</span>                              (1 - t) + t * m_transformation[i].m_scaleY) *</div>
<div class="line"><span class="lineno"> 1432</span>                       <a class="code hl_class" href="class_t_rotation.html">TRotation</a>(m_transformation[i].m_rotationAndScaleCenter,</div>
<div class="line"><span class="lineno"> 1433</span>                                 m_transformation[i].m_rotation * t);</div>
<div class="line"><span class="lineno"> 1434</span> </div>
<div class="line"><span class="lineno"> 1435</span>        UINT cornerSize = m_transformation[i].m_firstStrokeCornerIndexes.size();</div>
<div class="line"><span class="lineno"> 1436</span>        assert(cornerSize ==</div>
<div class="line"><span class="lineno"> 1437</span>               m_transformation[i].m_secondStrokeCornerIndexes.size());</div>
<div class="line"><span class="lineno"> 1438</span>        <span class="keywordflow">if</span> (cornerSize &gt; m_transformation[i].m_secondStrokeCornerIndexes.size())</div>
<div class="line"><span class="lineno"> 1439</span>          cornerSize = m_transformation[i].m_secondStrokeCornerIndexes.size();</div>
<div class="line"><span class="lineno"> 1440</span> </div>
<div class="line"><span class="lineno"> 1441</span>        assert(cornerSize &gt;= 2);</div>
<div class="line"><span class="lineno"> 1442</span> </div>
<div class="line"><span class="lineno"> 1443</span>        std::vector&lt;TThickPoint&gt; controlPoints;</div>
<div class="line"><span class="lineno"> 1444</span> </div>
<div class="line"><span class="lineno"> 1445</span>        <span class="comment">// if not m_transformation[i].m_findCorners =&gt; detect corner return</span></div>
<div class="line"><span class="lineno"> 1446</span>        <span class="comment">// different size =&gt;cornerSize==2</span></div>
<div class="line"><span class="lineno"> 1447</span>        <span class="comment">// assert(!m_transformation[i].m_findCorners || cornerSize==2);</span></div>
<div class="line"><span class="lineno"> 1448</span> </div>
<div class="line"><span class="lineno"> 1449</span>        <span class="keywordflow">for</span> (j = 0; j &lt; cornerSize - 1; j++) {</div>
<div class="line"><span class="lineno"> 1450</span>          points.clear();</div>
<div class="line"><span class="lineno"> 1451</span>          subStroke1 = extract(</div>
<div class="line"><span class="lineno"> 1452</span>              stroke1, m_transformation[i].m_firstStrokeCornerIndexes[j],</div>
<div class="line"><span class="lineno"> 1453</span>              m_transformation[i].m_firstStrokeCornerIndexes[j + 1] - 1);</div>
<div class="line"><span class="lineno"> 1454</span>          subStroke2 = extract(</div>
<div class="line"><span class="lineno"> 1455</span>              stroke2, m_transformation[i].m_secondStrokeCornerIndexes[j],</div>
<div class="line"><span class="lineno"> 1456</span>              m_transformation[i].m_secondStrokeCornerIndexes[j + 1] - 1);</div>
<div class="line"><span class="lineno"> 1457</span> </div>
<div class="line"><span class="lineno"> 1458</span>          totalLen1 = subStroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a079a513cb8a60d9a759b4f0c8211eab4">getLength</a>();</div>
<div class="line"><span class="lineno"> 1459</span>          totalLen2 = subStroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a079a513cb8a60d9a759b4f0c8211eab4">getLength</a>();</div>
<div class="line"><span class="lineno"> 1460</span> </div>
<div class="line"><span class="lineno"> 1461</span>          <span class="keywordflow">if</span> (totalLen1 &gt; totalLen2) {</div>
<div class="line"><span class="lineno"> 1462</span>            step1 = step;</div>
<div class="line"><span class="lineno"> 1463</span>            step2 = (totalLen2 / totalLen1) * step;</div>
<div class="line"><span class="lineno"> 1464</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1465</span>            step1 = (totalLen1 / totalLen2) * step;</div>
<div class="line"><span class="lineno"> 1466</span>            step2 = step;</div>
<div class="line"><span class="lineno"> 1467</span>          }</div>
<div class="line"><span class="lineno"> 1468</span> </div>
<div class="line"><span class="lineno"> 1469</span>          len1 = 0;</div>
<div class="line"><span class="lineno"> 1470</span>          len2 = 0;</div>
<div class="line"><span class="lineno"> 1471</span> </div>
<div class="line"><span class="lineno"> 1472</span>          <span class="keywordflow">while</span> (len1 &lt;= totalLen1 &amp;&amp; len2 &lt;= totalLen2) {</div>
<div class="line"><span class="lineno"> 1473</span>            point2 = subStroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a08496981e0538356833d4c6513af38b0">getThickPointAtLength</a>(len2);</div>
<div class="line"><span class="lineno"> 1474</span>            point2 = <a class="code hl_class" href="class_t_thick_point.html">TThickPoint</a>(m_transformation[i].m_inverse *</div>
<div class="line"><span class="lineno"> 1475</span>                                     subStroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a08496981e0538356833d4c6513af38b0">getThickPointAtLength</a>(len2),</div>
<div class="line"><span class="lineno"> 1476</span>                                 point2.thick);</div>
<div class="line"><span class="lineno"> 1477</span>            finalPoint =</div>
<div class="line"><span class="lineno"> 1478</span>                subStroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a08496981e0538356833d4c6513af38b0">getThickPointAtLength</a>(len1) * (1 - t) + t * point2;</div>
<div class="line"><span class="lineno"> 1479</span> </div>
<div class="line"><span class="lineno"> 1480</span>            points.push_back(<a class="code hl_class" href="class_t_thick_point.html">TThickPoint</a>(mt * (finalPoint), finalPoint.thick));</div>
<div class="line"><span class="lineno"> 1481</span>            len1 += step1;</div>
<div class="line"><span class="lineno"> 1482</span>            len2 += step2;</div>
<div class="line"><span class="lineno"> 1483</span>          }</div>
<div class="line"><span class="lineno"> 1484</span>          point2     = subStroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a08496981e0538356833d4c6513af38b0">getThickPointAtLength</a>(totalLen2);</div>
<div class="line"><span class="lineno"> 1485</span>          point2     = <a class="code hl_class" href="class_t_thick_point.html">TThickPoint</a>(m_transformation[i].m_inverse *</div>
<div class="line"><span class="lineno"> 1486</span>                                   subStroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a08496981e0538356833d4c6513af38b0">getThickPointAtLength</a>(totalLen2),</div>
<div class="line"><span class="lineno"> 1487</span>                               point2.thick);</div>
<div class="line"><span class="lineno"> 1488</span>          finalPoint = subStroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a08496981e0538356833d4c6513af38b0">getThickPointAtLength</a>(totalLen1) * (1 - t) +</div>
<div class="line"><span class="lineno"> 1489</span>                       t * point2;</div>
<div class="line"><span class="lineno"> 1490</span> </div>
<div class="line"><span class="lineno"> 1491</span>          points.push_back(<a class="code hl_class" href="class_t_thick_point.html">TThickPoint</a>(mt * (finalPoint), finalPoint.thick));</div>
<div class="line"><span class="lineno"> 1492</span> </div>
<div class="line"><span class="lineno"> 1493</span>          stroke = <a class="code hl_function" href="class_t_stroke.html#a4d47a76de56f5a121aeae50098d6cc8f">TStroke::interpolate</a>(points, interpolateError, <span class="keyword">false</span></div>
<div class="line"><span class="lineno"> 1494</span>                                        <span class="comment">/*m_transformation[i].m_findCorners*/</span>);</div>
<div class="line"><span class="lineno"> 1495</span> </div>
<div class="line"><span class="lineno"> 1496</span>          <span class="keywordflow">if</span> (j == 0)</div>
<div class="line"><span class="lineno"> 1497</span>            controlPoints.push_back(stroke-&gt;<a class="code hl_function" href="class_t_stroke.html#a9b60f87075b703360efe4b38097d923f">getControlPoint</a>(0));</div>
<div class="line"><span class="lineno"> 1498</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1499</span>            controlPoints.back() =</div>
<div class="line"><span class="lineno"> 1500</span>                (controlPoints.back() + stroke-&gt;<a class="code hl_function" href="class_t_stroke.html#a9b60f87075b703360efe4b38097d923f">getControlPoint</a>(0)) * 0.5;</div>
<div class="line"><span class="lineno"> 1501</span> </div>
<div class="line"><span class="lineno"> 1502</span>          cpSize = stroke-&gt;<a class="code hl_function" href="class_t_stroke.html#a45101afd31e40d08100fdf23c89fb49e">getControlPointCount</a>();</div>
<div class="line"><span class="lineno"> 1503</span>          <span class="keywordflow">for</span> (cp = 1; cp &lt; cpSize; cp++) {</div>
<div class="line"><span class="lineno"> 1504</span>            controlPoints.push_back(stroke-&gt;<a class="code hl_function" href="class_t_stroke.html#a9b60f87075b703360efe4b38097d923f">getControlPoint</a>(cp));</div>
<div class="line"><span class="lineno"> 1505</span>          }</div>
<div class="line"><span class="lineno"> 1506</span> </div>
<div class="line"><span class="lineno"> 1507</span>          <span class="keyword">delete</span> subStroke1;</div>
<div class="line"><span class="lineno"> 1508</span>          <span class="keyword">delete</span> subStroke2;</div>
<div class="line"><span class="lineno"> 1509</span>          <span class="keyword">delete</span> stroke;</div>
<div class="line"><span class="lineno"> 1510</span>          subStroke1 = 0;</div>
<div class="line"><span class="lineno"> 1511</span>          subStroke2 = 0;</div>
<div class="line"><span class="lineno"> 1512</span>          stroke     = 0;</div>
<div class="line"><span class="lineno"> 1513</span>        }</div>
<div class="line"><span class="lineno"> 1514</span> </div>
<div class="line"><span class="lineno"> 1515</span>        stroke = <span class="keyword">new</span> <a class="code hl_struct" href="class_t_stroke.html">TStroke</a>(controlPoints);</div>
<div class="line"><span class="lineno"> 1516</span>      }</div>
<div class="line"><span class="lineno"> 1517</span>    }</div>
<div class="line"><span class="lineno"> 1518</span> </div>
<div class="line"><span class="lineno"> 1519</span>    <span class="keywordflow">if</span> (stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#a3565d6c34d3eb02fb1a6993ca626425c">isSelfLoop</a>() &amp;&amp; stroke2-&gt;<a class="code hl_function" href="class_t_stroke.html#a3565d6c34d3eb02fb1a6993ca626425c">isSelfLoop</a>()) stroke-&gt;<a class="code hl_function" href="class_t_stroke.html#afa2c66ae11a70e68b3de3ce0b4cfb049">setSelfLoop</a>();</div>
<div class="line"><span class="lineno"> 1520</span> </div>
<div class="line"><span class="lineno"> 1521</span>    stroke-&gt;<a class="code hl_function" href="class_t_stroke.html#a33f59dfbed74b577700351eac8c2fc7b">setStyle</a>(stroke1-&gt;<a class="code hl_function" href="class_t_stroke.html#ab77068d7894a29cc1878e173f46ed785">getStyle</a>());</div>
<div class="line"><span class="lineno"> 1522</span>    stroke-&gt;outlineOptions() = stroke1-&gt;outlineOptions();</div>
<div class="line"><span class="lineno"> 1523</span>    <a class="code hl_class" href="class_v_i_stroke.html">VIStroke</a> *vs =</div>
<div class="line"><span class="lineno"> 1524</span>        <span class="keyword">new</span> <a class="code hl_class" href="class_v_i_stroke.html">VIStroke</a>(stroke, m_firstImage-&gt;getVIStroke(i)-&gt;m_groupId);</div>
<div class="line"><span class="lineno"> 1525</span>    vi-&gt;m_imp-&gt;m_strokes.push_back(vs);</div>
<div class="line"><span class="lineno"> 1526</span> </div>
<div class="line"><span class="lineno"> 1527</span>  }  <span class="comment">// end for each stroke</span></div>
<div class="line"><span class="lineno"> 1528</span> </div>
<div class="line"><span class="lineno"> 1529</span>  <span class="keywordflow">if</span> (m_firstImage-&gt;isComputedRegionAlmostOnce()) transferColor(vi);</div>
<div class="line"><span class="lineno"> 1530</span> </div>
<div class="line"><span class="lineno"> 1531</span>  <span class="keywordflow">return</span> vi;</div>
<div class="line"><span class="lineno"> 1532</span>}</div>
<div class="ttc" id="aclass_t_stroke_html_a08496981e0538356833d4c6513af38b0"><div class="ttname"><a href="class_t_stroke.html#a08496981e0538356833d4c6513af38b0">TStroke::getThickPointAtLength</a></div><div class="ttdeci">TThickPoint getThickPointAtLength(double s) const</div><div class="ttdef"><b>Definition:</b> tstroke.cpp:1934</div></div>
<div class="ttc" id="aclass_t_stroke_html_a33f59dfbed74b577700351eac8c2fc7b"><div class="ttname"><a href="class_t_stroke.html#a33f59dfbed74b577700351eac8c2fc7b">TStroke::setStyle</a></div><div class="ttdeci">void setStyle(int styleId)</div><div class="ttdef"><b>Definition:</b> tstroke.cpp:2370</div></div>
<div class="ttc" id="aclass_t_stroke_html_a3565d6c34d3eb02fb1a6993ca626425c"><div class="ttname"><a href="class_t_stroke.html#a3565d6c34d3eb02fb1a6993ca626425c">TStroke::isSelfLoop</a></div><div class="ttdeci">bool isSelfLoop() const</div><div class="ttdoc">Return true if the stroke is looped.</div><div class="ttdef"><b>Definition:</b> tstroke.cpp:2488</div></div>
<div class="ttc" id="aclass_t_stroke_html_a4d47a76de56f5a121aeae50098d6cc8f"><div class="ttname"><a href="class_t_stroke.html#a4d47a76de56f5a121aeae50098d6cc8f">TStroke::interpolate</a></div><div class="ttdeci">static TStroke * interpolate(const std::vector&lt; TThickPoint &gt; &amp;points, double error, bool findCorners=true)</div><div class="ttdoc">Get a stroke from a TThickPoint vector.</div><div class="ttdef"><b>Definition:</b> tstroke.cpp:3720</div></div>
<div class="ttc" id="aclass_t_stroke_html_ab77068d7894a29cc1878e173f46ed785"><div class="ttname"><a href="class_t_stroke.html#ab77068d7894a29cc1878e173f46ed785">TStroke::getStyle</a></div><div class="ttdeci">int getStyle() const</div><div class="ttdef"><b>Definition:</b> tstroke.cpp:2366</div></div>
<div class="ttc" id="aclass_t_stroke_html_afa2c66ae11a70e68b3de3ce0b4cfb049"><div class="ttname"><a href="class_t_stroke.html#afa2c66ae11a70e68b3de3ce0b4cfb049">TStroke::setSelfLoop</a></div><div class="ttdeci">void setSelfLoop(bool loop=true)</div><div class="ttdoc">Set a loop stroke.</div><div class="ttdef"><b>Definition:</b> tstroke.cpp:2469</div></div>
<div class="ttc" id="aclass_t_thick_point_html"><div class="ttname"><a href="class_t_thick_point.html">TThickPoint</a></div><div class="ttdef"><b>Definition:</b> tgeometry.h:366</div></div>
<div class="ttc" id="aclass_t_vector_image_html"><div class="ttname"><a href="class_t_vector_image.html">TVectorImage</a></div><div class="ttdef"><b>Definition:</b> tvectorimage.h:58</div></div>
<div class="ttc" id="aclass_v_i_stroke_html"><div class="ttname"><a href="class_v_i_stroke.html">VIStroke</a></div><div class="ttdef"><b>Definition:</b> tvectorimageP.h:62</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a53608fabb6ec9c3cc76349f37de5b409" name="a53608fabb6ec9c3cc76349f37de5b409"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53608fabb6ec9c3cc76349f37de5b409">&#9670;&nbsp;</a></span>m_firstImage</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_vector_image_p.html">TVectorImageP</a> TInbetween::Imp::m_firstImage</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="adf45afcd077dfbbb421f152b2b290e96" name="adf45afcd077dfbbb421f152b2b290e96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf45afcd077dfbbb421f152b2b290e96">&#9670;&nbsp;</a></span>m_lastImage</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_vector_image_p.html">TVectorImageP</a> TInbetween::Imp::m_lastImage</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8e7599588d83d065476e14508c4499f9" name="a8e7599588d83d065476e14508c4499f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e7599588d83d065476e14508c4499f9">&#9670;&nbsp;</a></span>m_transformation</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="struct_t_inbetween_1_1_imp_1_1_stroke_transform.html">StrokeTransform</a>&gt; TInbetween::Imp::m_transformation</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>E:/opentoonz/toonz/sources/common/tvrender/<a class="el" href="">tinbetween.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
