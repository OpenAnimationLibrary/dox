<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: TRop Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">TRop Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_rop_1_1_cmapped_quickput_settings.html">CmappedQuickputSettings</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t_rop_1_1_raylit_params.html">RaylitParams</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a2780cb0189f5717b67b6aca3f5471168"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168">ResampleFilterType</a> { <br />
&#160;&#160;<b>None</b>
, <a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168af59a8bad64d2b117020f864efd67b2b5">Triangle</a>
, <a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168adaa7b87b985724e085f7281d2817dfb6">Mitchell</a>
, <a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a5299db768d5b5c8554907b73a6075ce1">Cubic5</a>
, <br />
&#160;&#160;<a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168ad232a671a97d1958fa9caa4696f3efa7">Cubic75</a>
, <a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a4932c6c099d4f68848d72736be6f321e">Cubic1</a>
, <a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a8142bce9410b8ca2682b7f41d0fe1cda">Hann2</a>
, <a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168ad1a6a213a56880e3be5f9df4632a903d">Hann3</a>
, <br />
&#160;&#160;<a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168ad74259f9d68bb2918533b70790355a6c">Hamming2</a>
, <a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168adbd720438a66e557e65a1419610d9ef9">Hamming3</a>
, <a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a4e7a2bc406cecb691f8f0d5fa1d9d84c">Lanczos2</a>
, <a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a5fef44f41eda4cbf63092b0634616095">Lanczos3</a>
, <br />
&#160;&#160;<a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a6fd64688f6f661bd7c76dee932d048ca">Gauss</a>
, <a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a92694e20fb1c18f7987cda447d4553ff">ClosestPixel</a>
, <a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a152d46ac03e804c799ed08f703eeeb4e">Bilinear</a>
, <b>HowMany</b>
<br />
 }</td></tr>
<tr class="separator:a2780cb0189f5717b67b6aca3f5471168"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1489562a4d82f9d71613c87584bf3821"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><b>ColorMask</b> { <b>RChan</b> = 0x1
, <b>GChan</b> = 0x2
, <b>BChan</b> = 0x4
, <b>MChan</b> = 0x8
 }</td></tr>
<tr class="separator:a1489562a4d82f9d71613c87584bf3821"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f8c5a1cb56f7482862e506adb15a04e"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><b>ErodilateMaskType</b> { <b>ED_rectangular</b>
, <b>ED_circular</b>
 }</td></tr>
<tr class="separator:a9f8c5a1cb56f7482862e506adb15a04e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a66da5845870f824caab9c6fc47d6b8bd"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a66da5845870f824caab9c6fc47d6b8bd">rgbmScale</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rout, <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rin, const double *k, const double *a, const int *out0, const int *out1)</td></tr>
<tr class="memdesc:a66da5845870f824caab9c6fc47d6b8bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies first order mappings to each of <b>rin's</b> channels.  <a href="namespace_t_rop.html#a66da5845870f824caab9c6fc47d6b8bd">More...</a><br /></td></tr>
<tr class="separator:a66da5845870f824caab9c6fc47d6b8bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fad2c1d5d972dfdf8547efc9386c986"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a5fad2c1d5d972dfdf8547efc9386c986">rgbmScale</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rout, <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rin, double kr, double kg, double kb, double km, double ar=0.0, double ag=0.0, double ab=0.0, double am=0.0)</td></tr>
<tr class="separator:a5fad2c1d5d972dfdf8547efc9386c986"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2160d9b4cacd0527c741e83181f17be"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#ae2160d9b4cacd0527c741e83181f17be">rgbmAdjust</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rout, <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rin, const int *in0, const int *in1, const int *out0, const int *out1)</td></tr>
<tr class="separator:ae2160d9b4cacd0527c741e83181f17be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaea09eab581fd066c34b2b2ecec92f41"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#aaea09eab581fd066c34b2b2ecec92f41">checkBoard</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rout, const TPixel32 &amp;, const TPixel32 &amp;, const <a class="el" href="class_t_dimension_t.html">TDimensionD</a> &amp;, const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;)</td></tr>
<tr class="memdesc:aaea09eab581fd066c34b2b2ecec92f41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a checkoboard in <b>rout</b>.  <a href="namespace_t_rop.html#aaea09eab581fd066c34b2b2ecec92f41">More...</a><br /></td></tr>
<tr class="separator:aaea09eab581fd066c34b2b2ecec92f41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5fd1fb0c2f625e1da14fe92ae0e5122"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#ae5fd1fb0c2f625e1da14fe92ae0e5122">over</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;out, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;dn, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;up)</td></tr>
<tr class="separator:ae5fd1fb0c2f625e1da14fe92ae0e5122"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae58b5d8cb3097667c3d494780fa35b8"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#aae58b5d8cb3097667c3d494780fa35b8">over</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;out, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;up, const <a class="el" href="class_t_point_t.html">TPoint</a> &amp;pos=<a class="el" href="class_t_point_t.html">TPoint</a>())</td></tr>
<tr class="separator:aae58b5d8cb3097667c3d494780fa35b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91b87be89fbd668e1e88bff94085b4ec"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a91b87be89fbd668e1e88bff94085b4ec">over</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;out, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;up, const <a class="el" href="class_t_affine.html">TAffine</a> &amp;aff, <a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168">ResampleFilterType</a> filterType=<a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168af59a8bad64d2b117020f864efd67b2b5">Triangle</a>)</td></tr>
<tr class="memdesc:a91b87be89fbd668e1e88bff94085b4ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make the image over of the <b>up</b> raster on the <b>out</b> raster.  <a href="namespace_t_rop.html#a91b87be89fbd668e1e88bff94085b4ec">More...</a><br /></td></tr>
<tr class="separator:a91b87be89fbd668e1e88bff94085b4ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a744bf34f97ad2828655221fc27dffadf"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a744bf34f97ad2828655221fc27dffadf">over</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;out, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;up, const <a class="el" href="class_t_point_t.html">TPoint</a> &amp;pos, const <a class="el" href="class_t_affine.html">TAffine</a> &amp;aff, <a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168">ResampleFilterType</a> filterType=<a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168af59a8bad64d2b117020f864efd67b2b5">Triangle</a>)</td></tr>
<tr class="separator:a744bf34f97ad2828655221fc27dffadf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f1ee78ab7b55ece2630b90c93ba339f"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a9f1ee78ab7b55ece2630b90c93ba339f">over</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;out, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;dn, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;up, const <a class="el" href="class_t_raster_p_t.html">TRasterGR8P</a> &amp;mask)</td></tr>
<tr class="separator:a9f1ee78ab7b55ece2630b90c93ba339f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedc165465ce6743825508055f5207aa8"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#aedc165465ce6743825508055f5207aa8">over</a> (<a class="el" href="class_t_raster_p_t.html">TRaster32P</a> rout, const <a class="el" href="class_t_raster_p_t.html">TRasterGR8P</a> &amp;rup, const TPixel32 &amp;color)</td></tr>
<tr class="separator:aedc165465ce6743825508055f5207aa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab40288730d28adc27b76cadca035beaa"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#ab40288730d28adc27b76cadca035beaa">over</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rout, const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;rup, <a class="el" href="class_t_palette.html">TPalette</a> *palette, const <a class="el" href="class_t_point_t.html">TPoint</a> &amp;point=<a class="el" href="class_t_point_t.html">TPoint</a>(), const <a class="el" href="class_t_affine.html">TAffine</a> &amp;aff=<a class="el" href="class_t_affine.html">TAffine</a>())</td></tr>
<tr class="separator:ab40288730d28adc27b76cadca035beaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e39bc748039afe42001ba44f2d2a073"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a5e39bc748039afe42001ba44f2d2a073">resample</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;out, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;in, const <a class="el" href="class_t_affine.html">TAffine</a> &amp;aff, <a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168">ResampleFilterType</a> filterType=<a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168af59a8bad64d2b117020f864efd67b2b5">Triangle</a>, double <a class="el" href="namespace_t_rop.html#a9baa771ae6b7beb73d594266761d2cf2">blur</a>=1.)</td></tr>
<tr class="separator:a5e39bc748039afe42001ba44f2d2a073"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f6b04b4725e957a0d554e198e26a117"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a1f6b04b4725e957a0d554e198e26a117">quickPut</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;out, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;up, const <a class="el" href="class_t_affine.html">TAffine</a> &amp;aff, const TPixel32 &amp;colorScale=TPixel::Black, bool doPremultiply=false, bool <a class="el" href="namespace_t_rop.html#a35fb11523175f84027df48cc51d45d28">whiteTransp</a>=false, bool firstColumn=false, bool doRasterDarkenBlendedView=false)</td></tr>
<tr class="memdesc:a1f6b04b4725e957a0d554e198e26a117"><td class="mdescLeft">&#160;</td><td class="mdescRight">Like the over function, but only uses closest_pixel filter.  <a href="namespace_t_rop.html#a1f6b04b4725e957a0d554e198e26a117">More...</a><br /></td></tr>
<tr class="separator:a1f6b04b4725e957a0d554e198e26a117"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af44cb7fab841ce051f1414a5828bfbff"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#af44cb7fab841ce051f1414a5828bfbff">quickPut</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;out, const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;up, const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;plt, const <a class="el" href="class_t_affine.html">TAffine</a> &amp;aff, const TPixel32 &amp;globalColorScale=TPixel::Black, bool inksOnly=false)</td></tr>
<tr class="memdesc:af44cb7fab841ce051f1414a5828bfbff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Like the over function but up image must be cmapped.  <a href="namespace_t_rop.html#af44cb7fab841ce051f1414a5828bfbff">More...</a><br /></td></tr>
<tr class="separator:af44cb7fab841ce051f1414a5828bfbff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43c9517b928a4d6c9fb68867884a22ce"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a43c9517b928a4d6c9fb68867884a22ce">quickPut</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;dn, const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;upCM32, const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;plt, const <a class="el" href="class_t_affine.html">TAffine</a> &amp;aff, const <a class="el" href="class_t_rop_1_1_cmapped_quickput_settings.html">CmappedQuickputSettings</a> &amp;settings)</td></tr>
<tr class="separator:a43c9517b928a4d6c9fb68867884a22ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a709bde5ef9b1c9a1b205855f9e8f7329"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a709bde5ef9b1c9a1b205855f9e8f7329">quickResampleColorFilter</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;dn, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;up, const <a class="el" href="class_t_affine.html">TAffine</a> &amp;aff, const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;plt, UCHAR colorMask)</td></tr>
<tr class="separator:a709bde5ef9b1c9a1b205855f9e8f7329"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bf930e46aa120ad8522b0e39540e4b6"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a1bf930e46aa120ad8522b0e39540e4b6">convolve_3_i</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rout, <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rin, int dx, int dy, double conv[])</td></tr>
<tr class="separator:a1bf930e46aa120ad8522b0e39540e4b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d086c7fcdee2a2fcec03005d7f7eda7"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a5d086c7fcdee2a2fcec03005d7f7eda7">convolve_i</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rout, <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rin, int dx, int dy, double conv[], int radius)</td></tr>
<tr class="separator:a5d086c7fcdee2a2fcec03005d7f7eda7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8af2a2c23b1112d7582523b6d3add109"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a8af2a2c23b1112d7582523b6d3add109">fracmove</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rout, <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rin, double dx, double dy)</td></tr>
<tr class="separator:a8af2a2c23b1112d7582523b6d3add109"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45a08fb48dd7d33ec629d722081d55c6"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a45a08fb48dd7d33ec629d722081d55c6">convert</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> dst, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;src)</td></tr>
<tr class="memdesc:a45a08fb48dd7d33ec629d722081d55c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert <b>src</b> raster in raster type <b>dst</b>.  <a href="namespace_t_rop.html#a45a08fb48dd7d33ec629d722081d55c6">More...</a><br /></td></tr>
<tr class="separator:a45a08fb48dd7d33ec629d722081d55c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a229eb7fd85c23c325ea4ba55478d5712"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a229eb7fd85c23c325ea4ba55478d5712">copy</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> dst, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;src)</td></tr>
<tr class="memdesc:a229eb7fd85c23c325ea4ba55478d5712"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy <b>src</b> in <b>dst</b>.  <a href="namespace_t_rop.html#a229eb7fd85c23c325ea4ba55478d5712">More...</a><br /></td></tr>
<tr class="separator:a229eb7fd85c23c325ea4ba55478d5712"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc7ac986d64b4e8ee8270846b454e4d8"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#adc7ac986d64b4e8ee8270846b454e4d8">brush</a> (<a class="el" href="class_t_raster_p_t.html">TRaster32P</a> ras, const <a class="el" href="class_t_point_t.html">TPoint</a> &amp;a, const <a class="el" href="class_t_point_t.html">TPoint</a> &amp;b, int radius, const TPixel32 &amp;color)</td></tr>
<tr class="separator:adc7ac986d64b4e8ee8270846b454e4d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dfdba06d4f71d86755d8e0833a7a071"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a1dfdba06d4f71d86755d8e0833a7a071">computeBBox</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> ras, <a class="el" href="class_t_rect_t.html">TRect</a> &amp;bbox)</td></tr>
<tr class="memdesc:a1dfdba06d4f71d86755d8e0833a7a071"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get <b>bbox</b> of <b>ras</b> raster.  <a href="namespace_t_rop.html#a1dfdba06d4f71d86755d8e0833a7a071">More...</a><br /></td></tr>
<tr class="separator:a1dfdba06d4f71d86755d8e0833a7a071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a789f797a79d572d97182478cc9826c8a"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a789f797a79d572d97182478cc9826c8a">addBackground</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> ras, const TPixel32 &amp;col)</td></tr>
<tr class="memdesc:a789f797a79d572d97182478cc9826c8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add background of color <b>col</b> to the <b>ras</b> raster.  <a href="namespace_t_rop.html#a789f797a79d572d97182478cc9826c8a">More...</a><br /></td></tr>
<tr class="separator:a789f797a79d572d97182478cc9826c8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa724b97c8915446922e99821756d2275"><td class="memItemLeft" align="right" valign="top">DVAPI bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#aa724b97c8915446922e99821756d2275">isOpaque</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> ras)</td></tr>
<tr class="memdesc:aa724b97c8915446922e99821756d2275"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if <b>ras</b> is opaque.  <a href="namespace_t_rop.html#aa724b97c8915446922e99821756d2275">More...</a><br /></td></tr>
<tr class="separator:aa724b97c8915446922e99821756d2275"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d8e2ff30b65313b6a82376d17be65cf"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a1d8e2ff30b65313b6a82376d17be65cf">invert</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> ras, bool invRed=true, bool invGreen=true, bool invBlue=true, bool invMatte=false)</td></tr>
<tr class="separator:a1d8e2ff30b65313b6a82376d17be65cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d74d2e7b5135fe978af69553d6bd3da"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a0d74d2e7b5135fe978af69553d6bd3da">add</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rup, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rdown, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout, double v)</td></tr>
<tr class="separator:a0d74d2e7b5135fe978af69553d6bd3da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f513936a4a4450e3839a01eacb1d962"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a2f513936a4a4450e3839a01eacb1d962">add</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rup, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rdown, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout)</td></tr>
<tr class="memdesc:a2f513936a4a4450e3839a01eacb1d962"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add <b>rdown</b> pixels to <b>rup</b> pixels and put the resulting raster in <b>rout</b>.  <a href="namespace_t_rop.html#a2f513936a4a4450e3839a01eacb1d962">More...</a><br /></td></tr>
<tr class="separator:a2f513936a4a4450e3839a01eacb1d962"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0809dd38dcd6506bcfbd7c07b17220e7"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a0809dd38dcd6506bcfbd7c07b17220e7">colordodge</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rup, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rdown, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout)</td></tr>
<tr class="separator:a0809dd38dcd6506bcfbd7c07b17220e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a224ebd85bbce4f5eb5085ecd79d5f76c"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a224ebd85bbce4f5eb5085ecd79d5f76c">colorburn</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rup, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rdown, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout)</td></tr>
<tr class="separator:a224ebd85bbce4f5eb5085ecd79d5f76c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2abcebe9e3631cd03f07055b838cc92b"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a2abcebe9e3631cd03f07055b838cc92b">screen</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rup, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rdown, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout)</td></tr>
<tr class="separator:a2abcebe9e3631cd03f07055b838cc92b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdf19f6890d2f927af99c25e6a125435"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#afdf19f6890d2f927af99c25e6a125435">sub</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rup, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rdown, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout, bool matte)</td></tr>
<tr class="separator:afdf19f6890d2f927af99c25e6a125435"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76f8b77a1eff52235e1124540365aba2"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a76f8b77a1eff52235e1124540365aba2">mult</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rup, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rdown, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout, int v, bool matte)</td></tr>
<tr class="separator:a76f8b77a1eff52235e1124540365aba2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06c4a7a2cea0acf26c099c4b5554bdab"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a06c4a7a2cea0acf26c099c4b5554bdab">ropin</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;source, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;matte, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout)</td></tr>
<tr class="separator:a06c4a7a2cea0acf26c099c4b5554bdab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d075919a2603d7734e42c1b6ebc8cb8"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a6d075919a2603d7734e42c1b6ebc8cb8">ropout</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;source, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;matte, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout)</td></tr>
<tr class="separator:a6d075919a2603d7734e42c1b6ebc8cb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a572bb66b608047361c1d599a795c4fe7"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a572bb66b608047361c1d599a795c4fe7">atop</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rup, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rdown, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout)</td></tr>
<tr class="separator:a572bb66b608047361c1d599a795c4fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac40128e0f0e7941fa551849ef6f14036"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#ac40128e0f0e7941fa551849ef6f14036">txor</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rup, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rdown, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout)</td></tr>
<tr class="separator:ac40128e0f0e7941fa551849ef6f14036"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac115e66f53280dbca21075c52259b084"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#ac115e66f53280dbca21075c52259b084">crossDissolve</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rup, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rdown, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout, UCHAR v)</td></tr>
<tr class="separator:ac115e66f53280dbca21075c52259b084"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99c6bf2fd7d769ac68ef2663b6bb5870"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a99c6bf2fd7d769ac68ef2663b6bb5870">lighten</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rup, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rdown, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout)</td></tr>
<tr class="separator:a99c6bf2fd7d769ac68ef2663b6bb5870"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49f90a16ba17adf6e194d8aefff4e172"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a49f90a16ba17adf6e194d8aefff4e172">darken</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rup, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rdown, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout)</td></tr>
<tr class="separator:a49f90a16ba17adf6e194d8aefff4e172"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cf1cee72615a6140aa04f91f4d345f2"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a0cf1cee72615a6140aa04f91f4d345f2">ropmin</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rup, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rdown, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout, bool matte)</td></tr>
<tr class="separator:a0cf1cee72615a6140aa04f91f4d345f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e4be06e2ffe44d151a50c35a5cc25b3"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a1e4be06e2ffe44d151a50c35a5cc25b3">ropmax</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rup, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rdown, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout)</td></tr>
<tr class="separator:a1e4be06e2ffe44d151a50c35a5cc25b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69a13be2091e3060864a17534b00af7b"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a69a13be2091e3060864a17534b00af7b">linearburn</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rup, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rdown, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout)</td></tr>
<tr class="separator:a69a13be2091e3060864a17534b00af7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73e7c02af837288795455fb0280ab614"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a73e7c02af837288795455fb0280ab614">overlay</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rup, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rdown, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout)</td></tr>
<tr class="separator:a73e7c02af837288795455fb0280ab614"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8671761db1d55d696b4b8bb71f8b2e4"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#aa8671761db1d55d696b4b8bb71f8b2e4">premultiply</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;ras)</td></tr>
<tr class="memdesc:aa8671761db1d55d696b4b8bb71f8b2e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a premultiply of all raster pixels.  <a href="namespace_t_rop.html#aa8671761db1d55d696b4b8bb71f8b2e4">More...</a><br /></td></tr>
<tr class="separator:aa8671761db1d55d696b4b8bb71f8b2e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add7d14f883c53c3d68ca0f256c42689f"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#add7d14f883c53c3d68ca0f256c42689f">depremultiply</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;ras)</td></tr>
<tr class="memdesc:add7d14f883c53c3d68ca0f256c42689f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a depremultiply of all raster pixels.  <a href="namespace_t_rop.html#add7d14f883c53c3d68ca0f256c42689f">More...</a><br /></td></tr>
<tr class="separator:add7d14f883c53c3d68ca0f256c42689f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b092782761fe2b3ce0dfb289b3dd02e"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a8b092782761fe2b3ce0dfb289b3dd02e">expandColor</a> (const <a class="el" href="class_t_raster_p_t.html">TRaster32P</a> &amp;ras32, bool precise)</td></tr>
<tr class="separator:a8b092782761fe2b3ce0dfb289b3dd02e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35fb11523175f84027df48cc51d45d28"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a35fb11523175f84027df48cc51d45d28">whiteTransp</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;ras)</td></tr>
<tr class="memdesc:a35fb11523175f84027df48cc51d45d28"><td class="mdescLeft">&#160;</td><td class="mdescRight">all white pixels are set to transparent  <a href="namespace_t_rop.html#a35fb11523175f84027df48cc51d45d28">More...</a><br /></td></tr>
<tr class="separator:a35fb11523175f84027df48cc51d45d28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea1238f9b183113d9a097177c9ef2f17"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#aea1238f9b183113d9a097177c9ef2f17">applyColorScale</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;ras, const TPixel32 &amp;colorScale)</td></tr>
<tr class="memdesc:aea1238f9b183113d9a097177c9ef2f17"><td class="mdescLeft">&#160;</td><td class="mdescRight">apply color filter and semi-transparency of column to the render result  <a href="namespace_t_rop.html#aea1238f9b183113d9a097177c9ef2f17">More...</a><br /></td></tr>
<tr class="separator:aea1238f9b183113d9a097177c9ef2f17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb73976f88b3ec3d0a3b2cf822dff605"><td class="memItemLeft" align="right" valign="top">DVAPI <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#abb73976f88b3ec3d0a3b2cf822dff605">shrink</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rin, int shrink)</td></tr>
<tr class="separator:abb73976f88b3ec3d0a3b2cf822dff605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4babe6813c171b27ede85b106642bf2"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#ad4babe6813c171b27ede85b106642bf2">gammaCorrect</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> raster, double gamma)</td></tr>
<tr class="memdesc:ad4babe6813c171b27ede85b106642bf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a <b>gamma</b> correct in the <b>raster</b>.  <a href="namespace_t_rop.html#ad4babe6813c171b27ede85b106642bf2">More...</a><br /></td></tr>
<tr class="separator:ad4babe6813c171b27ede85b106642bf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae49245fbc12b809384cb6e1bf03c9b76"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#ae49245fbc12b809384cb6e1bf03c9b76">gammaCorrectRGBM</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> raster, double gammar, double gammag, double gammab, double gammam)</td></tr>
<tr class="memdesc:ae49245fbc12b809384cb6e1bf03c9b76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a <b>gamma</b> correct in the <b>raster</b>.  <a href="namespace_t_rop.html#ae49245fbc12b809384cb6e1bf03c9b76">More...</a><br /></td></tr>
<tr class="separator:ae49245fbc12b809384cb6e1bf03c9b76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6809ae7f416ba30d31d3e7305be87f9"><td class="memItemLeft" align="right" valign="top">DVAPI int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#ae6809ae7f416ba30d31d3e7305be87f9">getBlurBorder</a> (double <a class="el" href="namespace_t_rop.html#a9baa771ae6b7beb73d594266761d2cf2">blur</a>)</td></tr>
<tr class="memdesc:ae6809ae7f416ba30d31d3e7305be87f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the pixel size of the <b>blur</b> border.  <a href="namespace_t_rop.html#ae6809ae7f416ba30d31d3e7305be87f9">More...</a><br /></td></tr>
<tr class="separator:ae6809ae7f416ba30d31d3e7305be87f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a6326a4ee5b8a7fd5e928d67926a8e6"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a7a6326a4ee5b8a7fd5e928d67926a8e6">antialias</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;src, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;dst, int threshold, int softness)</td></tr>
<tr class="separator:a7a6326a4ee5b8a7fd5e928d67926a8e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dd60c2e85a75e42d593ee351876d614"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a6dd60c2e85a75e42d593ee351876d614">majorityDespeckle</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;ras, int sizeThreshold)</td></tr>
<tr class="separator:a6dd60c2e85a75e42d593ee351876d614"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9baa771ae6b7beb73d594266761d2cf2"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a9baa771ae6b7beb73d594266761d2cf2">blur</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;dstRas, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;srcRas, double blur, int dx, int dy, bool useSSE=false)</td></tr>
<tr class="memdesc:a9baa771ae6b7beb73d594266761d2cf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make blur effect on <b>srcRas</b> raster and put the result in <b>dstRas</b>.  <a href="namespace_t_rop.html#a9baa771ae6b7beb73d594266761d2cf2">More...</a><br /></td></tr>
<tr class="separator:a9baa771ae6b7beb73d594266761d2cf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6e615dabc3bd3a4f7681ca7d0a743f1"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#ac6e615dabc3bd3a4f7681ca7d0a743f1">raylit</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;dstRas, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;srcRas, const <a class="el" href="struct_t_rop_1_1_raylit_params.html">RaylitParams</a> &amp;params)</td></tr>
<tr class="memdesc:ac6e615dabc3bd3a4f7681ca7d0a743f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make raylit effect on <b>srcRas</b> raster and put the result in <b>dstRas</b>.  <a href="namespace_t_rop.html#ac6e615dabc3bd3a4f7681ca7d0a743f1">More...</a><br /></td></tr>
<tr class="separator:ac6e615dabc3bd3a4f7681ca7d0a743f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ed7aee971d5bb0c6a7304a76c161b51"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a6ed7aee971d5bb0c6a7304a76c161b51">glassRaylit</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;dstRas, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;srcRas, const <a class="el" href="struct_t_rop_1_1_raylit_params.html">RaylitParams</a> &amp;params)</td></tr>
<tr class="separator:a6ed7aee971d5bb0c6a7304a76c161b51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60b42d98c73278e9767aa2932c43f6a5"><td class="memItemLeft" align="right" valign="top"><a id="a60b42d98c73278e9767aa2932c43f6a5" name="a60b42d98c73278e9767aa2932c43f6a5"></a>
DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><b>despeckle</b> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;ras, int sizeThreshold, bool check, bool trasparentIsWhite=false)</td></tr>
<tr class="separator:a60b42d98c73278e9767aa2932c43f6a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46b386c0153301c1e78f6b7a3997677a"><td class="memItemLeft" align="right" valign="top"><a id="a46b386c0153301c1e78f6b7a3997677a" name="a46b386c0153301c1e78f6b7a3997677a"></a>
DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><b>despeckle</b> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rin, int sizeThreshold, bool check)</td></tr>
<tr class="separator:a46b386c0153301c1e78f6b7a3997677a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec16db9b546d40b13e1e5b0946417b07"><td class="memItemLeft" align="right" valign="top">DVAPI <a class="el" href="class_t_raster_p_t.html">TRaster32P</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#aec16db9b546d40b13e1e5b0946417b07">copyAndSwapRBChannels</a> (const <a class="el" href="class_t_raster_p_t.html">TRaster32P</a> &amp;srcRaster)</td></tr>
<tr class="memdesc:aec16db9b546d40b13e1e5b0946417b07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a raster with r b channels swapped.  <a href="namespace_t_rop.html#aec16db9b546d40b13e1e5b0946417b07">More...</a><br /></td></tr>
<tr class="separator:aec16db9b546d40b13e1e5b0946417b07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ffa1a15060b77c5386240cdcb06394f"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a8ffa1a15060b77c5386240cdcb06394f">makeStereoRaster</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;left, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;right)</td></tr>
<tr class="separator:a8ffa1a15060b77c5386240cdcb06394f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac744a16161fdfd8ce7de4cd12cd0307d"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#ac744a16161fdfd8ce7de4cd12cd0307d">setChannel</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rin, <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rout, UCHAR chan, bool greytones)</td></tr>
<tr class="separator:ac744a16161fdfd8ce7de4cd12cd0307d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9c480cced8c0b7b1cb8402e99c5af8d"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#ae9c480cced8c0b7b1cb8402e99c5af8d">erodilate</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rin, const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;rout, double radius, ErodilateMaskType type)</td></tr>
<tr class="separator:ae9c480cced8c0b7b1cb8402e99c5af8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fc864590b3faf072c5468255ee9f3ea"><td class="memItemLeft" align="right" valign="top">DVAPI <a class="el" href="struct___r_a_s_t_e_r.html">_RASTER</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a6fc864590b3faf072c5468255ee9f3ea">convertRaster50to46</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;inRas, const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;inPalette)</td></tr>
<tr class="memdesc:a6fc864590b3faf072c5468255ee9f3ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert TRasterP in an old toonz raster!  <a href="namespace_t_rop.html#a6fc864590b3faf072c5468255ee9f3ea">More...</a><br /></td></tr>
<tr class="separator:a6fc864590b3faf072c5468255ee9f3ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d7ac440af02d94cf688b9273e5a7d42"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a8d7ac440af02d94cf688b9273e5a7d42">releaseRaster46</a> (<a class="el" href="struct___r_a_s_t_e_r.html">_RASTER</a> *&amp;r, bool doReleaseBuffer=false)</td></tr>
<tr class="memdesc:a8d7ac440af02d94cf688b9273e5a7d42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release the old toonz raster.  <a href="namespace_t_rop.html#a8d7ac440af02d94cf688b9273e5a7d42">More...</a><br /></td></tr>
<tr class="separator:a8d7ac440af02d94cf688b9273e5a7d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a275dd3a1daddba779d05f13b89b44db1"><td class="memItemLeft" align="right" valign="top">DVAPI <a class="el" href="struct___r_a_s_t_e_r.html">_RASTER</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a275dd3a1daddba779d05f13b89b44db1">readRaster46</a> (const char *filename)</td></tr>
<tr class="memdesc:a275dd3a1daddba779d05f13b89b44db1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read an image in the path <b>filename</b> and put it in an old toonz raster.  <a href="namespace_t_rop.html#a275dd3a1daddba779d05f13b89b44db1">More...</a><br /></td></tr>
<tr class="separator:a275dd3a1daddba779d05f13b89b44db1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0403b9158edb19e8b805ef2cfffc8900"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a0403b9158edb19e8b805ef2cfffc8900">lockRaster</a> (<a class="el" href="struct___r_a_s_t_e_r.html">_RASTER</a> *raster)</td></tr>
<tr class="separator:a0403b9158edb19e8b805ef2cfffc8900"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaf9411cf1fb10df32870e97d82043a0"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#afaf9411cf1fb10df32870e97d82043a0">unlockRaster</a> (<a class="el" href="struct___r_a_s_t_e_r.html">_RASTER</a> *raster)</td></tr>
<tr class="separator:afaf9411cf1fb10df32870e97d82043a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae62af9d021cc9d4428b4a996c2c40918"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#ae62af9d021cc9d4428b4a996c2c40918">convert</a> (const <a class="el" href="class_t_raster_p_t.html">TRaster32P</a> &amp;rasOut, const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;rasIn, const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> palette, bool transparencyCheck=false)</td></tr>
<tr class="separator:ae62af9d021cc9d4428b4a996c2c40918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86eca3417474265356482b543841bc90"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a86eca3417474265356482b543841bc90">convert</a> (const <a class="el" href="class_t_raster_p_t.html">TRaster32P</a> &amp;rasOut, const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;rasIn, <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> palette, const <a class="el" href="class_t_rect_t.html">TRect</a> &amp;theClipRect, bool transparencyCheck=false, bool applyFx=false)</td></tr>
<tr class="separator:a86eca3417474265356482b543841bc90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ffbde782744822c73ea95817bbaf9ed"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a2ffbde782744822c73ea95817bbaf9ed">convert</a> (const <a class="el" href="class_t_tile.html">TTile</a> &amp;dst, const <a class="el" href="class_t_tile.html">TTile</a> &amp;src, const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> plt, bool transparencyCheck, bool applyFxs)</td></tr>
<tr class="separator:a2ffbde782744822c73ea95817bbaf9ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d6489eab1d284da27d796df4a860d5c"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a0d6489eab1d284da27d796df4a860d5c">applyMatchLines</a> (<a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> rasOut, const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;rasUp, const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;pltOut, const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;matchPlt, int inkIndex, int matchlinePrevalence, std::map&lt; int, int &gt; &amp;usedInks)</td></tr>
<tr class="separator:a0d6489eab1d284da27d796df4a860d5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d9a6165e4b1e6b7d9ca75b471d4318b"><td class="memItemLeft" align="right" valign="top"><a id="a7d9a6165e4b1e6b7d9ca75b471d4318b" name="a7d9a6165e4b1e6b7d9ca75b471d4318b"></a>
DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><b>mergeCmapped</b> (<a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> rasOut, const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;rasUp, const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;pltOut, int matchlinePrevalence, std::map&lt; int, int &gt; &amp;usedColors)</td></tr>
<tr class="separator:a7d9a6165e4b1e6b7d9ca75b471d4318b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98a26ca9c2980b8a0a33ee8475f7db64"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a98a26ca9c2980b8a0a33ee8475f7db64">overlayCmapped</a> (<a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> rasOut, const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;rasUp, const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;pltOut, const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;upPlt, std::map&lt; int, int &gt; &amp;usedColors)</td></tr>
<tr class="separator:a98a26ca9c2980b8a0a33ee8475f7db64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab11c9fa6fc9221ea22161a5c148ef2e9"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#ab11c9fa6fc9221ea22161a5c148ef2e9">eraseColors</a> (<a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> ras, std::vector&lt; int &gt; *colorIds, bool eraseInks, bool noGap=false)</td></tr>
<tr class="separator:ab11c9fa6fc9221ea22161a5c148ef2e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af64e0fbf864d2bcffd3a959020dd4007"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#af64e0fbf864d2bcffd3a959020dd4007">eraseStyleIds</a> (<a class="el" href="class_t_toonz_image.html">TToonzImage</a> *image, const std::vector&lt; int &gt; styleIds)</td></tr>
<tr class="separator:af64e0fbf864d2bcffd3a959020dd4007"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab35a3fe8769547a6b9cdd219a630a296"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#ab35a3fe8769547a6b9cdd219a630a296">resample</a> (const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;out, const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;in, const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> palette, const <a class="el" href="class_t_affine.html">TAffine</a> &amp;aff, <a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168">ResampleFilterType</a> filterType=<a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168af59a8bad64d2b117020f864efd67b2b5">Triangle</a>, double <a class="el" href="namespace_t_rop.html#a9baa771ae6b7beb73d594266761d2cf2">blur</a>=1.)</td></tr>
<tr class="separator:ab35a3fe8769547a6b9cdd219a630a296"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c6dae8ce37af1d30fded509f9ea7546"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a4c6dae8ce37af1d30fded509f9ea7546">convolve_3_i</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rout, <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> rin, const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;palette, int dx, int dy, double conv[])</td></tr>
<tr class="separator:a4c6dae8ce37af1d30fded509f9ea7546"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c1b6b5ed6465346721de15ac07de8e6"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a3c1b6b5ed6465346721de15ac07de8e6">convolve_i</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rout, <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> rin, const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;palette, int dx, int dy, double conv[], int radius)</td></tr>
<tr class="separator:a3c1b6b5ed6465346721de15ac07de8e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdc4625a0fab7775638e375c71404b4c"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#abdc4625a0fab7775638e375c71404b4c">fracmove</a> (<a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> rout, <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> rin, const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;palette, double dx, double dy)</td></tr>
<tr class="separator:abdc4625a0fab7775638e375c71404b4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7759afc120e9dfb5d0afb9539d0278c"><td class="memItemLeft" align="right" valign="top"><a id="ad7759afc120e9dfb5d0afb9539d0278c" name="ad7759afc120e9dfb5d0afb9539d0278c"></a>
DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><b>zoomOutCm32Rgbm</b> (const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;rin, <a class="el" href="class_t_raster_p_t.html">TRaster32P</a> &amp;rout, const <a class="el" href="class_t_palette.html">TPalette</a> &amp;plt, int x1, int y1, int x2, int y2, int newx, int newy, int absZoomLevel)</td></tr>
<tr class="separator:ad7759afc120e9dfb5d0afb9539d0278c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35179ddf5774082da20b53eb7baf0e96"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a35179ddf5774082da20b53eb7baf0e96">makeIcon</a> (<a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;rout, const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;rin)</td></tr>
<tr class="separator:a35179ddf5774082da20b53eb7baf0e96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fd8400a235f04da06f526186d439291"><td class="memItemLeft" align="right" valign="top">DVAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_t_rop.html#a4fd8400a235f04da06f526186d439291">expandPaint</a> (const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;rasCM)</td></tr>
<tr class="separator:a4fd8400a235f04da06f526186d439291"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >The <a class="el" href="namespace_t_rop.html">TRop</a> namespace provides various algorithms to operate with Toonz's raster types</p>
<p >The TRop::borders namespace contains functions and classes that perform contours extraction of a specified raster (either greyscale, fullcolor or colormap).</p>
<p >Image contours are currently extracted in a not-hierarchycal fashion (ie in succession) and supplied through a reimplementable reader class. </p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a1489562a4d82f9d71613c87584bf3821" name="a1489562a4d82f9d71613c87584bf3821"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1489562a4d82f9d71613c87584bf3821">&#9670;&nbsp;</a></span>ColorMask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum TRop::ColorMask</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   88</span>{ RChan = 0x1, GChan = 0x2, BChan = 0x4, MChan = 0x8 };</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9f8c5a1cb56f7482862e506adb15a04e" name="a9f8c5a1cb56f7482862e506adb15a04e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f8c5a1cb56f7482862e506adb15a04e">&#9670;&nbsp;</a></span>ErodilateMaskType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum TRop::ErodilateMaskType</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   90</span>{ ED_rectangular, ED_circular };</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2780cb0189f5717b67b6aca3f5471168" name="a2780cb0189f5717b67b6aca3f5471168"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2780cb0189f5717b67b6aca3f5471168">&#9670;&nbsp;</a></span>ResampleFilterType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168">TRop::ResampleFilterType</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a2780cb0189f5717b67b6aca3f5471168af59a8bad64d2b117020f864efd67b2b5" name="a2780cb0189f5717b67b6aca3f5471168af59a8bad64d2b117020f864efd67b2b5"></a>Triangle&#160;</td><td class="fielddoc"><p >triangle filter </p>
</td></tr>
<tr><td class="fieldname"><a id="a2780cb0189f5717b67b6aca3f5471168adaa7b87b985724e085f7281d2817dfb6" name="a2780cb0189f5717b67b6aca3f5471168adaa7b87b985724e085f7281d2817dfb6"></a>Mitchell&#160;</td><td class="fielddoc"><p >Mitchell-Netravali filter. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2780cb0189f5717b67b6aca3f5471168a5299db768d5b5c8554907b73a6075ce1" name="a2780cb0189f5717b67b6aca3f5471168a5299db768d5b5c8554907b73a6075ce1"></a>Cubic5&#160;</td><td class="fielddoc"><p >cubic convolution, a = .5 </p>
</td></tr>
<tr><td class="fieldname"><a id="a2780cb0189f5717b67b6aca3f5471168ad232a671a97d1958fa9caa4696f3efa7" name="a2780cb0189f5717b67b6aca3f5471168ad232a671a97d1958fa9caa4696f3efa7"></a>Cubic75&#160;</td><td class="fielddoc"><p >cubic convolution, a = .75 </p>
</td></tr>
<tr><td class="fieldname"><a id="a2780cb0189f5717b67b6aca3f5471168a4932c6c099d4f68848d72736be6f321e" name="a2780cb0189f5717b67b6aca3f5471168a4932c6c099d4f68848d72736be6f321e"></a>Cubic1&#160;</td><td class="fielddoc"><p >cubic convolution, a = 1 </p>
</td></tr>
<tr><td class="fieldname"><a id="a2780cb0189f5717b67b6aca3f5471168a8142bce9410b8ca2682b7f41d0fe1cda" name="a2780cb0189f5717b67b6aca3f5471168a8142bce9410b8ca2682b7f41d0fe1cda"></a>Hann2&#160;</td><td class="fielddoc"><p >Hann window, rad = 2. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2780cb0189f5717b67b6aca3f5471168ad1a6a213a56880e3be5f9df4632a903d" name="a2780cb0189f5717b67b6aca3f5471168ad1a6a213a56880e3be5f9df4632a903d"></a>Hann3&#160;</td><td class="fielddoc"><p >Hann window, rad = 3. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2780cb0189f5717b67b6aca3f5471168ad74259f9d68bb2918533b70790355a6c" name="a2780cb0189f5717b67b6aca3f5471168ad74259f9d68bb2918533b70790355a6c"></a>Hamming2&#160;</td><td class="fielddoc"><p >Hamming window, rad = 2. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2780cb0189f5717b67b6aca3f5471168adbd720438a66e557e65a1419610d9ef9" name="a2780cb0189f5717b67b6aca3f5471168adbd720438a66e557e65a1419610d9ef9"></a>Hamming3&#160;</td><td class="fielddoc"><p >Hamming window, rad = 3. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2780cb0189f5717b67b6aca3f5471168a4e7a2bc406cecb691f8f0d5fa1d9d84c" name="a2780cb0189f5717b67b6aca3f5471168a4e7a2bc406cecb691f8f0d5fa1d9d84c"></a>Lanczos2&#160;</td><td class="fielddoc"><p >Lanczos window, rad = 2. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2780cb0189f5717b67b6aca3f5471168a5fef44f41eda4cbf63092b0634616095" name="a2780cb0189f5717b67b6aca3f5471168a5fef44f41eda4cbf63092b0634616095"></a>Lanczos3&#160;</td><td class="fielddoc"><p >Lanczos window, rad = 3. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2780cb0189f5717b67b6aca3f5471168a6fd64688f6f661bd7c76dee932d048ca" name="a2780cb0189f5717b67b6aca3f5471168a6fd64688f6f661bd7c76dee932d048ca"></a>Gauss&#160;</td><td class="fielddoc"><p >Gaussian convolution. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2780cb0189f5717b67b6aca3f5471168a92694e20fb1c18f7987cda447d4553ff" name="a2780cb0189f5717b67b6aca3f5471168a92694e20fb1c18f7987cda447d4553ff"></a>ClosestPixel&#160;</td><td class="fielddoc"><p >'Quick' filter </p>
</td></tr>
<tr><td class="fieldname"><a id="a2780cb0189f5717b67b6aca3f5471168a152d46ac03e804c799ed08f703eeeb4e" name="a2780cb0189f5717b67b6aca3f5471168a152d46ac03e804c799ed08f703eeeb4e"></a>Bilinear&#160;</td><td class="fielddoc"><p >'Quick' filter </p>
</td></tr>
</table>
<div class="fragment"><div class="line"><span class="lineno">   54</span>                        {</div>
<div class="line"><span class="lineno">   55</span>  None,</div>
<div class="line"><span class="lineno">   57</span>  <a class="code hl_enumvalue" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168af59a8bad64d2b117020f864efd67b2b5">Triangle</a>,</div>
<div class="line"><span class="lineno">   59</span>  <a class="code hl_enumvalue" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168adaa7b87b985724e085f7281d2817dfb6">Mitchell</a>,</div>
<div class="line"><span class="lineno">   61</span>  <a class="code hl_enumvalue" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a5299db768d5b5c8554907b73a6075ce1">Cubic5</a>,</div>
<div class="line"><span class="lineno">   63</span>  <a class="code hl_enumvalue" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168ad232a671a97d1958fa9caa4696f3efa7">Cubic75</a>,</div>
<div class="line"><span class="lineno">   65</span>  <a class="code hl_enumvalue" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a4932c6c099d4f68848d72736be6f321e">Cubic1</a>,</div>
<div class="line"><span class="lineno">   67</span>  <a class="code hl_enumvalue" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a8142bce9410b8ca2682b7f41d0fe1cda">Hann2</a>,</div>
<div class="line"><span class="lineno">   69</span>  <a class="code hl_enumvalue" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168ad1a6a213a56880e3be5f9df4632a903d">Hann3</a>,</div>
<div class="line"><span class="lineno">   71</span>  <a class="code hl_enumvalue" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168ad74259f9d68bb2918533b70790355a6c">Hamming2</a>,</div>
<div class="line"><span class="lineno">   73</span>  <a class="code hl_enumvalue" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168adbd720438a66e557e65a1419610d9ef9">Hamming3</a>,</div>
<div class="line"><span class="lineno">   75</span>  <a class="code hl_enumvalue" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a4e7a2bc406cecb691f8f0d5fa1d9d84c">Lanczos2</a>,</div>
<div class="line"><span class="lineno">   77</span>  <a class="code hl_enumvalue" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a5fef44f41eda4cbf63092b0634616095">Lanczos3</a>,</div>
<div class="line"><span class="lineno">   79</span>  <a class="code hl_enumvalue" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a6fd64688f6f661bd7c76dee932d048ca">Gauss</a>,</div>
<div class="line"><span class="lineno">   81</span>  <a class="code hl_enumvalue" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a92694e20fb1c18f7987cda447d4553ff">ClosestPixel</a>,</div>
<div class="line"><span class="lineno">   83</span>  <a class="code hl_enumvalue" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a152d46ac03e804c799ed08f703eeeb4e">Bilinear</a>,</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>  HowMany</div>
<div class="line"><span class="lineno">   86</span>};</div>
<div class="ttc" id="anamespace_t_rop_html_a2780cb0189f5717b67b6aca3f5471168a152d46ac03e804c799ed08f703eeeb4e"><div class="ttname"><a href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a152d46ac03e804c799ed08f703eeeb4e">TRop::Bilinear</a></div><div class="ttdeci">@ Bilinear</div><div class="ttdoc">'Quick' filter</div><div class="ttdef"><b>Definition:</b> trop.h:83</div></div>
<div class="ttc" id="anamespace_t_rop_html_a2780cb0189f5717b67b6aca3f5471168a4932c6c099d4f68848d72736be6f321e"><div class="ttname"><a href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a4932c6c099d4f68848d72736be6f321e">TRop::Cubic1</a></div><div class="ttdeci">@ Cubic1</div><div class="ttdoc">cubic convolution, a = 1</div><div class="ttdef"><b>Definition:</b> trop.h:65</div></div>
<div class="ttc" id="anamespace_t_rop_html_a2780cb0189f5717b67b6aca3f5471168a4e7a2bc406cecb691f8f0d5fa1d9d84c"><div class="ttname"><a href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a4e7a2bc406cecb691f8f0d5fa1d9d84c">TRop::Lanczos2</a></div><div class="ttdeci">@ Lanczos2</div><div class="ttdoc">Lanczos window, rad = 2.</div><div class="ttdef"><b>Definition:</b> trop.h:75</div></div>
<div class="ttc" id="anamespace_t_rop_html_a2780cb0189f5717b67b6aca3f5471168a5299db768d5b5c8554907b73a6075ce1"><div class="ttname"><a href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a5299db768d5b5c8554907b73a6075ce1">TRop::Cubic5</a></div><div class="ttdeci">@ Cubic5</div><div class="ttdoc">cubic convolution, a = .5</div><div class="ttdef"><b>Definition:</b> trop.h:61</div></div>
<div class="ttc" id="anamespace_t_rop_html_a2780cb0189f5717b67b6aca3f5471168a5fef44f41eda4cbf63092b0634616095"><div class="ttname"><a href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a5fef44f41eda4cbf63092b0634616095">TRop::Lanczos3</a></div><div class="ttdeci">@ Lanczos3</div><div class="ttdoc">Lanczos window, rad = 3.</div><div class="ttdef"><b>Definition:</b> trop.h:77</div></div>
<div class="ttc" id="anamespace_t_rop_html_a2780cb0189f5717b67b6aca3f5471168a6fd64688f6f661bd7c76dee932d048ca"><div class="ttname"><a href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a6fd64688f6f661bd7c76dee932d048ca">TRop::Gauss</a></div><div class="ttdeci">@ Gauss</div><div class="ttdoc">Gaussian convolution.</div><div class="ttdef"><b>Definition:</b> trop.h:79</div></div>
<div class="ttc" id="anamespace_t_rop_html_a2780cb0189f5717b67b6aca3f5471168a8142bce9410b8ca2682b7f41d0fe1cda"><div class="ttname"><a href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a8142bce9410b8ca2682b7f41d0fe1cda">TRop::Hann2</a></div><div class="ttdeci">@ Hann2</div><div class="ttdoc">Hann window, rad = 2.</div><div class="ttdef"><b>Definition:</b> trop.h:67</div></div>
<div class="ttc" id="anamespace_t_rop_html_a2780cb0189f5717b67b6aca3f5471168a92694e20fb1c18f7987cda447d4553ff"><div class="ttname"><a href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168a92694e20fb1c18f7987cda447d4553ff">TRop::ClosestPixel</a></div><div class="ttdeci">@ ClosestPixel</div><div class="ttdoc">'Quick' filter</div><div class="ttdef"><b>Definition:</b> trop.h:81</div></div>
<div class="ttc" id="anamespace_t_rop_html_a2780cb0189f5717b67b6aca3f5471168ad1a6a213a56880e3be5f9df4632a903d"><div class="ttname"><a href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168ad1a6a213a56880e3be5f9df4632a903d">TRop::Hann3</a></div><div class="ttdeci">@ Hann3</div><div class="ttdoc">Hann window, rad = 3.</div><div class="ttdef"><b>Definition:</b> trop.h:69</div></div>
<div class="ttc" id="anamespace_t_rop_html_a2780cb0189f5717b67b6aca3f5471168ad232a671a97d1958fa9caa4696f3efa7"><div class="ttname"><a href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168ad232a671a97d1958fa9caa4696f3efa7">TRop::Cubic75</a></div><div class="ttdeci">@ Cubic75</div><div class="ttdoc">cubic convolution, a = .75</div><div class="ttdef"><b>Definition:</b> trop.h:63</div></div>
<div class="ttc" id="anamespace_t_rop_html_a2780cb0189f5717b67b6aca3f5471168ad74259f9d68bb2918533b70790355a6c"><div class="ttname"><a href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168ad74259f9d68bb2918533b70790355a6c">TRop::Hamming2</a></div><div class="ttdeci">@ Hamming2</div><div class="ttdoc">Hamming window, rad = 2.</div><div class="ttdef"><b>Definition:</b> trop.h:71</div></div>
<div class="ttc" id="anamespace_t_rop_html_a2780cb0189f5717b67b6aca3f5471168adaa7b87b985724e085f7281d2817dfb6"><div class="ttname"><a href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168adaa7b87b985724e085f7281d2817dfb6">TRop::Mitchell</a></div><div class="ttdeci">@ Mitchell</div><div class="ttdoc">Mitchell-Netravali filter.</div><div class="ttdef"><b>Definition:</b> trop.h:59</div></div>
<div class="ttc" id="anamespace_t_rop_html_a2780cb0189f5717b67b6aca3f5471168adbd720438a66e557e65a1419610d9ef9"><div class="ttname"><a href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168adbd720438a66e557e65a1419610d9ef9">TRop::Hamming3</a></div><div class="ttdeci">@ Hamming3</div><div class="ttdoc">Hamming window, rad = 3.</div><div class="ttdef"><b>Definition:</b> trop.h:73</div></div>
<div class="ttc" id="anamespace_t_rop_html_a2780cb0189f5717b67b6aca3f5471168af59a8bad64d2b117020f864efd67b2b5"><div class="ttname"><a href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168af59a8bad64d2b117020f864efd67b2b5">TRop::Triangle</a></div><div class="ttdeci">@ Triangle</div><div class="ttdoc">triangle filter</div><div class="ttdef"><b>Definition:</b> trop.h:57</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2f513936a4a4450e3839a01eacb1d962" name="a2f513936a4a4450e3839a01eacb1d962"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f513936a4a4450e3839a01eacb1d962">&#9670;&nbsp;</a></span>add() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::add </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rdown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add <b>rdown</b> pixels to <b>rup</b> pixels and put the resulting raster in <b>rout</b>. </p>
<div class="fragment"><div class="line"><span class="lineno">  173</span>                                     {</div>
<div class="line"><span class="lineno">  174</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32   = rup;</div>
<div class="line"><span class="lineno">  175</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> down32 = rdown;</div>
<div class="line"><span class="lineno">  176</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32  = rout;</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>  <span class="keywordflow">if</span> (up32 &amp;&amp; down32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno">  179</span>    FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>    USHORT r, g, b, m;</div>
<div class="line"><span class="lineno">  182</span>    r = downPix-&gt;r + upPix-&gt;r;</div>
<div class="line"><span class="lineno">  183</span>    g = downPix-&gt;g + upPix-&gt;g;</div>
<div class="line"><span class="lineno">  184</span>    b = downPix-&gt;b + upPix-&gt;b;</div>
<div class="line"><span class="lineno">  185</span>    m = downPix-&gt;m + upPix-&gt;m;</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>    outPix-&gt;r = (UCHAR)tcrop&lt;USHORT&gt;(r, 0, 255);</div>
<div class="line"><span class="lineno">  188</span>    outPix-&gt;g = (UCHAR)tcrop&lt;USHORT&gt;(g, 0, 255);</div>
<div class="line"><span class="lineno">  189</span>    outPix-&gt;b = (UCHAR)tcrop&lt;USHORT&gt;(b, 0, 255);</div>
<div class="line"><span class="lineno">  190</span>    outPix-&gt;m = (UCHAR)tcrop&lt;USHORT&gt;(m, 0, 255);</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>    FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno">  193</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  194</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64   = rup;</div>
<div class="line"><span class="lineno">  195</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> down64 = rdown;</div>
<div class="line"><span class="lineno">  196</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64  = rout;</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>    <span class="keywordflow">if</span> (up64 &amp;&amp; down64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno">  199</span>      FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>      TINT32 r, g, b, m;</div>
<div class="line"><span class="lineno">  202</span>      r = downPix-&gt;r + upPix-&gt;r;</div>
<div class="line"><span class="lineno">  203</span>      g = downPix-&gt;g + upPix-&gt;g;</div>
<div class="line"><span class="lineno">  204</span>      b = downPix-&gt;b + upPix-&gt;b;</div>
<div class="line"><span class="lineno">  205</span>      m = downPix-&gt;m + upPix-&gt;m;</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>      outPix-&gt;r = (USHORT)tcrop&lt;TINT32&gt;(r, 0, 0xffff);</div>
<div class="line"><span class="lineno">  208</span>      outPix-&gt;g = (USHORT)tcrop&lt;TINT32&gt;(g, 0, 0xffff);</div>
<div class="line"><span class="lineno">  209</span>      outPix-&gt;b = (USHORT)tcrop&lt;TINT32&gt;(b, 0, 0xffff);</div>
<div class="line"><span class="lineno">  210</span>      outPix-&gt;m = (USHORT)tcrop&lt;TINT32&gt;(m, 0, 0xffff);</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>      FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno">  213</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  214</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> up8   = rup;</div>
<div class="line"><span class="lineno">  215</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> down8 = rdown;</div>
<div class="line"><span class="lineno">  216</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> out8  = rout;</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>      <span class="keywordflow">if</span> (up8 &amp;&amp; down8 &amp;&amp; out8) {</div>
<div class="line"><span class="lineno">  219</span>        FOR_EACH_PIXEL_8_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  220</span> </div>
<div class="line"><span class="lineno">  221</span>        USHORT value = upPix-&gt;value + downPix-&gt;value;</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>        outPix-&gt;value = (UCHAR)tcrop&lt;USHORT&gt;(value, 0, 255);</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>        FOR_EACH_PIXEL_8_END_LOOP</div>
<div class="line"><span class="lineno">  226</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  227</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::add invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno">  228</span>    }</div>
<div class="line"><span class="lineno">  229</span>  }</div>
<div class="line"><span class="lineno">  230</span>}</div>
<div class="ttc" id="aclass_t_raster_p_t_html"><div class="ttname"><a href="class_t_raster_p_t.html">TRasterPT&lt; TPixel32 &gt;</a></div></div>
<div class="ttc" id="aclass_t_rop_exception_html"><div class="ttname"><a href="class_t_rop_exception.html">TRopException</a></div><div class="ttdef"><b>Definition:</b> trop.h:36</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0d74d2e7b5135fe978af69553d6bd3da" name="a0d74d2e7b5135fe978af69553d6bd3da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d74d2e7b5135fe978af69553d6bd3da">&#9670;&nbsp;</a></span>add() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::add </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rdown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Add <b>rdown</b> pixels to <b>rup</b> pixels in according with the factor <b>v</b> and put the resulting raster in <b>rout</b> </p>
<div class="fragment"><div class="line"><span class="lineno">  108</span>                         {</div>
<div class="line"><span class="lineno">  109</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32   = rup;</div>
<div class="line"><span class="lineno">  110</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> down32 = rdown;</div>
<div class="line"><span class="lineno">  111</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32  = rout;</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>  <span class="keywordflow">if</span> (up32 &amp;&amp; down32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno">  114</span>    FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>    TINT32 r, g, b, m;</div>
<div class="line"><span class="lineno">  117</span>    <span class="keywordflow">if</span> (upPix-&gt;m == 0)</div>
<div class="line"><span class="lineno">  118</span>      *outPix = *downPix;</div>
<div class="line"><span class="lineno">  119</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  120</span>      r         = downPix-&gt;r + tround(upPix-&gt;r * v);</div>
<div class="line"><span class="lineno">  121</span>      g         = downPix-&gt;g + tround(upPix-&gt;g * v);</div>
<div class="line"><span class="lineno">  122</span>      b         = downPix-&gt;b + tround(upPix-&gt;b * v);</div>
<div class="line"><span class="lineno">  123</span>      m         = downPix-&gt;m + tround(upPix-&gt;m * v);</div>
<div class="line"><span class="lineno">  124</span>      outPix-&gt;r = (UCHAR)tcrop&lt;TINT32&gt;(r, (TINT32)0, (TINT32)255);</div>
<div class="line"><span class="lineno">  125</span>      outPix-&gt;g = (UCHAR)tcrop&lt;TINT32&gt;(g, (TINT32)0, (TINT32)255);</div>
<div class="line"><span class="lineno">  126</span>      outPix-&gt;b = (UCHAR)tcrop&lt;TINT32&gt;(b, (TINT32)0, (TINT32)255);</div>
<div class="line"><span class="lineno">  127</span>      outPix-&gt;m = (UCHAR)tcrop&lt;TINT32&gt;(m, (TINT32)0, (TINT32)255);</div>
<div class="line"><span class="lineno">  128</span>    }</div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>    FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno">  131</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  132</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64   = rup;</div>
<div class="line"><span class="lineno">  133</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> down64 = rdown;</div>
<div class="line"><span class="lineno">  134</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64  = rout;</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>    <span class="keywordflow">if</span> (up64 &amp;&amp; down64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno">  137</span>      FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>      TINT32 r, g, b, m;</div>
<div class="line"><span class="lineno">  140</span>      r = downPix-&gt;r + tround(upPix-&gt;r * v);</div>
<div class="line"><span class="lineno">  141</span>      g = downPix-&gt;g + tround(upPix-&gt;g * v);</div>
<div class="line"><span class="lineno">  142</span>      b = downPix-&gt;b + tround(upPix-&gt;b * v);</div>
<div class="line"><span class="lineno">  143</span>      m = downPix-&gt;m + tround(upPix-&gt;m * v);</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>      outPix-&gt;r = (USHORT)tcrop&lt;TINT32&gt;(r, 0, 0xffff);</div>
<div class="line"><span class="lineno">  146</span>      outPix-&gt;g = (USHORT)tcrop&lt;TINT32&gt;(g, 0, 0xffff);</div>
<div class="line"><span class="lineno">  147</span>      outPix-&gt;b = (USHORT)tcrop&lt;TINT32&gt;(b, 0, 0xffff);</div>
<div class="line"><span class="lineno">  148</span>      outPix-&gt;m = (USHORT)tcrop&lt;TINT32&gt;(m, 0, 0xffff);</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>      FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno">  151</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  152</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> up8   = rup;</div>
<div class="line"><span class="lineno">  153</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> down8 = rdown;</div>
<div class="line"><span class="lineno">  154</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> out8  = rout;</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>      <span class="keywordflow">if</span> (up8 &amp;&amp; down8 &amp;&amp; out8) {</div>
<div class="line"><span class="lineno">  157</span>        FOR_EACH_PIXEL_8_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>        USHORT value = troundp(upPix-&gt;value * v) + downPix-&gt;value;</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>        outPix-&gt;value = (UCHAR)tcrop&lt;USHORT&gt;(value, 0, 255);</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>        FOR_EACH_PIXEL_8_END_LOOP</div>
<div class="line"><span class="lineno">  164</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  165</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::add invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno">  166</span>    }</div>
<div class="line"><span class="lineno">  167</span>  }</div>
<div class="line"><span class="lineno">  168</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00276">AddFx::process()</a>.</p>

</div>
</div>
<a id="a789f797a79d572d97182478cc9826c8a" name="a789f797a79d572d97182478cc9826c8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a789f797a79d572d97182478cc9826c8a">&#9670;&nbsp;</a></span>addBackground()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::addBackground </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>ras</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TPixel32 &amp;&#160;</td>
          <td class="paramname"><em>col</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add background of color <b>col</b> to the <b>ras</b> raster. </p>
<div class="fragment"><div class="line"><span class="lineno">  387</span>                                                          {</div>
<div class="line"><span class="lineno">  388</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> ras32 = ras;</div>
<div class="line"><span class="lineno">  389</span>  <span class="keywordflow">if</span> (ras32)</div>
<div class="line"><span class="lineno">  390</span>    addBackground32(ras32, col);</div>
<div class="line"><span class="lineno">  391</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  392</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  393</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00569">TCleanupper::process()</a>, and <a class="el" href="#l00086">CustomStyleManager::StyleLoaderTask::run()</a>.</p>

</div>
</div>
<a id="a7a6326a4ee5b8a7fd5e928d67926a8e6" name="a7a6326a4ee5b8a7fd5e928d67926a8e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a6326a4ee5b8a7fd5e928d67926a8e6">&#9670;&nbsp;</a></span>antialias()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::antialias </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>threshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>softness</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Inserts antialias around jaggy lines. Threshold is a pixel distance intended from 0 to 256. Softness may vary from 0 to 100. </p>
<div class="fragment"><div class="line"><span class="lineno">  379</span>                                   {</div>
<div class="line"><span class="lineno">  380</span>  assert(src-&gt;getSize() == dst-&gt;getSize());</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> src32(src), dst32(dst);</div>
<div class="line"><span class="lineno">  383</span>  <span class="keywordflow">if</span> (src32 &amp;&amp; dst32) {</div>
<div class="line"><span class="lineno">  384</span>    makeAntialias&lt;TPixel32&gt;(src32, dst32, threshold, softness);</div>
<div class="line"><span class="lineno">  385</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  386</span>  }</div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> src64(src), dst64(dst);</div>
<div class="line"><span class="lineno">  389</span>  <span class="keywordflow">if</span> (src64 &amp;&amp; dst64) {</div>
<div class="line"><span class="lineno">  390</span>    makeAntialias&lt;TPixel64&gt;(src64, dst64, threshold &lt;&lt; 8, softness);</div>
<div class="line"><span class="lineno">  391</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  392</span>  }</div>
<div class="line"><span class="lineno">  393</span> </div>
<div class="line"><span class="lineno">  394</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRasterCM32P</a> srcCM(src), dstCM(dst);</div>
<div class="line"><span class="lineno">  395</span>  <span class="keywordflow">if</span> (srcCM &amp;&amp; dstCM) {</div>
<div class="line"><span class="lineno">  396</span>    makeAntialias&lt;TPixelCM32&gt;(srcCM, dstCM, threshold, softness);</div>
<div class="line"><span class="lineno">  397</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  398</span>  }</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>  assert(!<span class="stringliteral">&quot;Source and destination rasters must be of the same type!&quot;</span>);</div>
<div class="line"><span class="lineno">  401</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aea1238f9b183113d9a097177c9ef2f17" name="aea1238f9b183113d9a097177c9ef2f17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea1238f9b183113d9a097177c9ef2f17">&#9670;&nbsp;</a></span>applyColorScale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::applyColorScale </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>ras</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TPixel32 &amp;&#160;</td>
          <td class="paramname"><em>colorScale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>apply color filter and semi-transparency of column to the render result </p>
<div class="fragment"><div class="line"><span class="lineno"> 1694</span>                                                                          {</div>
<div class="line"><span class="lineno"> 1695</span>  ras-&gt;lock();</div>
<div class="line"><span class="lineno"> 1696</span> </div>
<div class="line"><span class="lineno"> 1697</span>  <a class="code hl_function" href="namespace_t_rop.html#add7d14f883c53c3d68ca0f256c42689f">TRop::depremultiply</a>(ras);</div>
<div class="line"><span class="lineno"> 1698</span> </div>
<div class="line"><span class="lineno"> 1699</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> ras32 = ras;</div>
<div class="line"><span class="lineno"> 1700</span>  <span class="keywordtype">int</span> maxCh        = TPixel32::maxChannelValue;</div>
<div class="line"><span class="lineno"> 1701</span>  <span class="keywordflow">if</span> (ras32) {</div>
<div class="line"><span class="lineno"> 1702</span>    TPixel32 *endPix, *upPix = 0, *upRow = ras32-&gt;pixels();</div>
<div class="line"><span class="lineno"> 1703</span>    TPixel32 *lastPix =</div>
<div class="line"><span class="lineno"> 1704</span>        upRow + ras32-&gt;getWrap() * (ras32-&gt;getLy() - 1) + ras32-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1705</span> </div>
<div class="line"><span class="lineno"> 1706</span>    <span class="keywordflow">while</span> (upPix &lt; lastPix) {</div>
<div class="line"><span class="lineno"> 1707</span>      upPix  = upRow;</div>
<div class="line"><span class="lineno"> 1708</span>      endPix = upPix + ras32-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1709</span>      <span class="keywordflow">while</span> (upPix &lt; endPix) {</div>
<div class="line"><span class="lineno"> 1710</span>        <span class="keywordtype">int</span> maxCh = TPixel32::maxChannelValue;</div>
<div class="line"><span class="lineno"> 1711</span>        <span class="keywordtype">int</span> r  = maxCh - (maxCh - (*upPix).r) * (maxCh - colorScale.r) / maxCh;</div>
<div class="line"><span class="lineno"> 1712</span>        <span class="keywordtype">int</span> g  = maxCh - (maxCh - (*upPix).g) * (maxCh - colorScale.g) / maxCh;</div>
<div class="line"><span class="lineno"> 1713</span>        <span class="keywordtype">int</span> b  = maxCh - (maxCh - (*upPix).b) * (maxCh - colorScale.b) / maxCh;</div>
<div class="line"><span class="lineno"> 1714</span>        <span class="keywordtype">int</span> m  = (*upPix).m * colorScale.m / maxCh;</div>
<div class="line"><span class="lineno"> 1715</span>        *upPix = TPixel32(r, g, b, m);</div>
<div class="line"><span class="lineno"> 1716</span>        ++upPix;</div>
<div class="line"><span class="lineno"> 1717</span>      }</div>
<div class="line"><span class="lineno"> 1718</span>      upRow += ras32-&gt;getWrap();</div>
<div class="line"><span class="lineno"> 1719</span>    }</div>
<div class="line"><span class="lineno"> 1720</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1721</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> ras64 = ras;</div>
<div class="line"><span class="lineno"> 1722</span>    <span class="keywordflow">if</span> (ras64) {</div>
<div class="line"><span class="lineno"> 1723</span>      TPixel64 *endPix, *upPix = 0, *upRow = ras64-&gt;pixels();</div>
<div class="line"><span class="lineno"> 1724</span>      TPixel64 *lastPix =</div>
<div class="line"><span class="lineno"> 1725</span>          upRow + ras64-&gt;getWrap() * (ras64-&gt;getLy() - 1) + ras64-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1726</span> </div>
<div class="line"><span class="lineno"> 1727</span>      <span class="keywordtype">int</span> maxCh64 = TPixel64::maxChannelValue;</div>
<div class="line"><span class="lineno"> 1728</span>      <span class="keywordflow">while</span> (upPix &lt; lastPix) {</div>
<div class="line"><span class="lineno"> 1729</span>        upPix  = upRow;</div>
<div class="line"><span class="lineno"> 1730</span>        endPix = upPix + ras64-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1731</span>        <span class="keywordflow">while</span> (upPix &lt; endPix) {</div>
<div class="line"><span class="lineno"> 1732</span>          <span class="keywordtype">int</span> r =</div>
<div class="line"><span class="lineno"> 1733</span>              maxCh64 - (maxCh64 - (*upPix).r) * (maxCh - colorScale.r) / maxCh;</div>
<div class="line"><span class="lineno"> 1734</span>          <span class="keywordtype">int</span> g =</div>
<div class="line"><span class="lineno"> 1735</span>              maxCh64 - (maxCh64 - (*upPix).g) * (maxCh - colorScale.g) / maxCh;</div>
<div class="line"><span class="lineno"> 1736</span>          <span class="keywordtype">int</span> b =</div>
<div class="line"><span class="lineno"> 1737</span>              maxCh64 - (maxCh64 - (*upPix).b) * (maxCh - colorScale.b) / maxCh;</div>
<div class="line"><span class="lineno"> 1738</span>          <span class="keywordtype">int</span> m  = (*upPix).m * colorScale.m / maxCh;</div>
<div class="line"><span class="lineno"> 1739</span>          *upPix = TPixel64(r, g, b, m);</div>
<div class="line"><span class="lineno"> 1740</span>          ++upPix;</div>
<div class="line"><span class="lineno"> 1741</span>        }</div>
<div class="line"><span class="lineno"> 1742</span>        upRow += ras64-&gt;getWrap();</div>
<div class="line"><span class="lineno"> 1743</span>      }</div>
<div class="line"><span class="lineno"> 1744</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1745</span>      ras-&gt;unlock();</div>
<div class="line"><span class="lineno"> 1746</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;TRop::premultiply invalid raster type&quot;</span>);</div>
<div class="line"><span class="lineno"> 1747</span>    }</div>
<div class="line"><span class="lineno"> 1748</span>  }</div>
<div class="line"><span class="lineno"> 1749</span>  <a class="code hl_function" href="namespace_t_rop.html#aa8671761db1d55d696b4b8bb71f8b2e4">TRop::premultiply</a>(ras);</div>
<div class="line"><span class="lineno"> 1750</span>  ras-&gt;unlock();</div>
<div class="line"><span class="lineno"> 1751</span>}</div>
<div class="ttc" id="aclass_t_exception_html"><div class="ttname"><a href="class_t_exception.html">TException</a></div><div class="ttdef"><b>Definition:</b> texception.h:18</div></div>
<div class="ttc" id="anamespace_t_rop_html_aa8671761db1d55d696b4b8bb71f8b2e4"><div class="ttname"><a href="namespace_t_rop.html#aa8671761db1d55d696b4b8bb71f8b2e4">TRop::premultiply</a></div><div class="ttdeci">DVAPI void premultiply(const TRasterP &amp;ras)</div><div class="ttdoc">Make a premultiply of all raster pixels.</div><div class="ttdef"><b>Definition:</b> toperators.cpp:1503</div></div>
<div class="ttc" id="anamespace_t_rop_html_add7d14f883c53c3d68ca0f256c42689f"><div class="ttname"><a href="namespace_t_rop.html#add7d14f883c53c3d68ca0f256c42689f">TRop::depremultiply</a></div><div class="ttdeci">DVAPI void depremultiply(const TRasterP &amp;ras)</div><div class="ttdoc">Make a depremultiply of all raster pixels.</div><div class="ttdef"><b>Definition:</b> toperators.cpp:1546</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01546">depremultiply()</a>, and <a class="el" href="#l01503">premultiply()</a>.</p>

</div>
</div>
<a id="a0d6489eab1d284da27d796df4a860d5c" name="a0d6489eab1d284da27d796df4a860d5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d6489eab1d284da27d796df4a860d5c">&#9670;&nbsp;</a></span>applyMatchLines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::applyMatchLines </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a>&#160;</td>
          <td class="paramname"><em>rasOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;&#160;</td>
          <td class="paramname"><em>rasUp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;&#160;</td>
          <td class="paramname"><em>pltOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;&#160;</td>
          <td class="paramname"><em>matchPlt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>inkIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>matchlinePrevalence</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; int, int &gt; &amp;&#160;</td>
          <td class="paramname"><em>usedInks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  860</span>                                                       {</div>
<div class="line"><span class="lineno">  861</span>  assert(matchlinePrevalence &gt;= 0);</div>
<div class="line"><span class="lineno">  862</span>  <span class="keywordflow">if</span> (inkIndex == -1)</div>
<div class="line"><span class="lineno">  863</span>    doMergeCmapped(rasOut, rasUp, pltOut, matchPlt, <span class="keyword">true</span>, matchlinePrevalence,</div>
<div class="line"><span class="lineno">  864</span>                   usedInks, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  865</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (inkIndex == -2)</div>
<div class="line"><span class="lineno">  866</span>    doMergeCmapped(rasOut, rasUp, pltOut, matchPlt, <span class="keyword">true</span>, matchlinePrevalence,</div>
<div class="line"><span class="lineno">  867</span>                   usedInks, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  868</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  869</span>    doApplyMatchLines(rasOut, rasUp, inkIndex, matchlinePrevalence);</div>
<div class="line"><span class="lineno">  870</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a572bb66b608047361c1d599a795c4fe7" name="a572bb66b608047361c1d599a795c4fe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a572bb66b608047361c1d599a795c4fe7">&#9670;&nbsp;</a></span>atop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::atop </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rdown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  930</span>                                      {</div>
<div class="line"><span class="lineno">  931</span>  <span class="comment">// calcola rup ATOP rdown</span></div>
<div class="line"><span class="lineno">  932</span> </div>
<div class="line"><span class="lineno">  933</span>  <span class="comment">// da ottimizzare...</span></div>
<div class="line"><span class="lineno">  934</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32   = rup;</div>
<div class="line"><span class="lineno">  935</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> down32 = rdown;</div>
<div class="line"><span class="lineno">  936</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32  = rout;</div>
<div class="line"><span class="lineno">  937</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64   = rup;</div>
<div class="line"><span class="lineno">  938</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> down64 = rdown;</div>
<div class="line"><span class="lineno">  939</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64  = rout;</div>
<div class="line"><span class="lineno">  940</span> </div>
<div class="line"><span class="lineno">  941</span>  <span class="keywordflow">if</span> (up32 &amp;&amp; down32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno">  942</span>    FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  943</span> </div>
<div class="line"><span class="lineno">  944</span>    TPixel32 tmpPix(0, 0, 0, 0);</div>
<div class="line"><span class="lineno">  945</span>    <span class="keywordflow">if</span> (downPix-&gt;m != 0) {</div>
<div class="line"><span class="lineno">  946</span>      <span class="keyword">const</span> <span class="keywordtype">int</span> MAGICFAC = (257U * 256U + 1U);</div>
<div class="line"><span class="lineno">  947</span>      UINT fac           = MAGICFAC * downPix-&gt;m;</div>
<div class="line"><span class="lineno">  948</span> </div>
<div class="line"><span class="lineno">  949</span>      tmpPix.r = (UINT)(upPix-&gt;r * fac + (1U &lt;&lt; 23)) &gt;&gt; 24;</div>
<div class="line"><span class="lineno">  950</span>      tmpPix.g = (UINT)(upPix-&gt;g * fac + (1U &lt;&lt; 23)) &gt;&gt; 24;</div>
<div class="line"><span class="lineno">  951</span>      tmpPix.b = (UINT)(upPix-&gt;b * fac + (1U &lt;&lt; 23)) &gt;&gt; 24;</div>
<div class="line"><span class="lineno">  952</span>      tmpPix.m = (UINT)(upPix-&gt;m * fac + (1U &lt;&lt; 23)) &gt;&gt; 24;</div>
<div class="line"><span class="lineno">  953</span>    }</div>
<div class="line"><span class="lineno">  954</span> </div>
<div class="line"><span class="lineno">  955</span>    overPix&lt;TPixel32, UCHAR&gt;(*outPix, *downPix, tmpPix);</div>
<div class="line"><span class="lineno">  956</span> </div>
<div class="line"><span class="lineno">  957</span>    FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno">  958</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (up64 &amp;&amp; down64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno">  959</span>    FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  960</span> </div>
<div class="line"><span class="lineno">  961</span>    TPixel64 tmpPix(0, 0, 0, 0);</div>
<div class="line"><span class="lineno">  962</span>    <span class="keywordflow">if</span> (downPix-&gt;m != 0) {</div>
<div class="line"><span class="lineno">  963</span>      <span class="keywordtype">double</span> fac = downPix-&gt;m / 65535.0;</div>
<div class="line"><span class="lineno">  964</span> </div>
<div class="line"><span class="lineno">  965</span>      tmpPix.r = (USHORT)(upPix-&gt;r * fac);</div>
<div class="line"><span class="lineno">  966</span>      tmpPix.g = (USHORT)(upPix-&gt;g * fac);</div>
<div class="line"><span class="lineno">  967</span>      tmpPix.b = (USHORT)(upPix-&gt;b * fac);</div>
<div class="line"><span class="lineno">  968</span>      tmpPix.m = (USHORT)(upPix-&gt;m * fac);</div>
<div class="line"><span class="lineno">  969</span>    }</div>
<div class="line"><span class="lineno">  970</span> </div>
<div class="line"><span class="lineno">  971</span>    overPix&lt;TPixel64, USHORT&gt;(*outPix, *downPix, tmpPix);</div>
<div class="line"><span class="lineno">  972</span> </div>
<div class="line"><span class="lineno">  973</span>    FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno">  974</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  975</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::atop invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno">  976</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9baa771ae6b7beb73d594266761d2cf2" name="a9baa771ae6b7beb73d594266761d2cf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9baa771ae6b7beb73d594266761d2cf2">&#9670;&nbsp;</a></span>blur()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::blur </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>dstRas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>srcRas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>blur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>useSSE</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make blur effect on <b>srcRas</b> raster and put the result in <b>dstRas</b>. </p>
<div class="fragment"><div class="line"><span class="lineno">  958</span>                                             {</div>
<div class="line"><span class="lineno">  959</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> dstRas32 = dstRas;</div>
<div class="line"><span class="lineno">  960</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> srcRas32 = srcRas;</div>
<div class="line"><span class="lineno">  961</span> </div>
<div class="line"><span class="lineno">  962</span>  <span class="keywordflow">if</span> (dstRas32 &amp;&amp; srcRas32)</div>
<div class="line"><span class="lineno">  963</span>    doBlurRgb&lt;TPixel32, UCHAR, float&gt;(dstRas32, srcRas32, blur, dx, dy, useSSE);</div>
<div class="line"><span class="lineno">  964</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  965</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> dstRas64 = dstRas;</div>
<div class="line"><span class="lineno">  966</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> srcRas64 = srcRas;</div>
<div class="line"><span class="lineno">  967</span>    <span class="keywordflow">if</span> (dstRas64 &amp;&amp; srcRas64)</div>
<div class="line"><span class="lineno">  968</span>      doBlurRgb&lt;TPixel64, USHORT, double&gt;(dstRas64, srcRas64, blur, dx, dy,</div>
<div class="line"><span class="lineno">  969</span>                                          useSSE);</div>
<div class="line"><span class="lineno">  970</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  971</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> dstRasGR8 = dstRas;</div>
<div class="line"><span class="lineno">  972</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> srcRasGR8 = srcRas;</div>
<div class="line"><span class="lineno">  973</span> </div>
<div class="line"><span class="lineno">  974</span>      <span class="keywordflow">if</span> (dstRasGR8 &amp;&amp; srcRasGR8)</div>
<div class="line"><span class="lineno">  975</span>        doBlurGray&lt;TPixelGR8&gt;(dstRasGR8, srcRasGR8, blur, dx, dy);</div>
<div class="line"><span class="lineno">  976</span>      <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  977</span>        <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR16P</a> dstRasGR16 = dstRas;</div>
<div class="line"><span class="lineno">  978</span>        <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR16P</a> srcRasGR16 = srcRas;</div>
<div class="line"><span class="lineno">  979</span> </div>
<div class="line"><span class="lineno">  980</span>        <span class="keywordflow">if</span> (dstRasGR16 &amp;&amp; srcRasGR16)</div>
<div class="line"><span class="lineno">  981</span>          doBlurGray&lt;TPixelGR16&gt;(dstRasGR16, srcRasGR16, blur, dx, dy);</div>
<div class="line"><span class="lineno">  982</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  983</span>          <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;TRop::blur unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  984</span>      }</div>
<div class="line"><span class="lineno">  985</span>    }</div>
<div class="line"><span class="lineno">  986</span>  }</div>
<div class="line"><span class="lineno">  987</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="adc7ac986d64b4e8ee8270846b454e4d8" name="adc7ac986d64b4e8ee8270846b454e4d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc7ac986d64b4e8ee8270846b454e4d8">&#9670;&nbsp;</a></span>brush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::brush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_raster_p_t.html">TRaster32P</a>&#160;</td>
          <td class="paramname"><em>ras</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_point_t.html">TPoint</a> &amp;&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_point_t.html">TPoint</a> &amp;&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TPixel32 &amp;&#160;</td>
          <td class="paramname"><em>color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   48</span>                                      {</div>
<div class="line"><span class="lineno">   49</span>  <a class="code hl_class" href="class_t_point_t.html">TPoint</a> a = aa;</div>
<div class="line"><span class="lineno">   50</span>  <a class="code hl_class" href="class_t_point_t.html">TPoint</a> b = bb;</div>
<div class="line"><span class="lineno">   51</span>  <span class="keywordflow">if</span> (a.y &gt; b.y) std::swap(a, b);  <span class="comment">//  a e&#39; piu&#39; in basso di b</span></div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span>  <span class="keywordtype">int</span> lx = ras-&gt;getLx();</div>
<div class="line"><span class="lineno">   54</span>  <span class="keywordtype">int</span> ly = ras-&gt;getLy();</div>
<div class="line"><span class="lineno">   55</span>  ras-&gt;lock();</div>
<div class="line"><span class="lineno">   56</span> </div>
<div class="line"><span class="lineno">   57</span>  <span class="comment">// ----- radius = 0</span></div>
<div class="line"><span class="lineno">   58</span>  <span class="keywordflow">if</span> (radius == 0) {</div>
<div class="line"><span class="lineno">   59</span>    <span class="comment">//  k = +1/-1 se il rettangolo e&#39; inclinato positivamente</span></div>
<div class="line"><span class="lineno">   60</span>    <span class="comment">//  (0&lt;=m)/negativamente (m&lt;0)</span></div>
<div class="line"><span class="lineno">   61</span>    <span class="comment">//  (se k&lt;0 viene fatta una riflessione sulle ascisse prima di tornare alle</span></div>
<div class="line"><span class="lineno">   62</span>    <span class="comment">//  coordinate &quot;di schermo&quot;)</span></div>
<div class="line"><span class="lineno">   63</span>    <span class="keywordtype">int</span> k  = 1;</div>
<div class="line"><span class="lineno">   64</span>    <span class="keywordtype">int</span> dy = b.y - a.y;</div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordtype">int</span> dx = b.x - a.x;</div>
<div class="line"><span class="lineno">   66</span>    <span class="keywordflow">if</span> (dx &lt; 0) {</div>
<div class="line"><span class="lineno">   67</span>      dx = -dx;</div>
<div class="line"><span class="lineno">   68</span>      k  = -1;</div>
<div class="line"><span class="lineno">   69</span>    }</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>    assert(dx &gt;= 0);</div>
<div class="line"><span class="lineno">   72</span>    assert(dy &gt;= 0);</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>    <span class="keywordtype">double</span> m;  <span class="comment">//  m sara&#39; definita solo per dx!=0)</span></div>
<div class="line"><span class="lineno">   75</span>    <span class="keywordflow">if</span> (dx &gt; 0) {</div>
<div class="line"><span class="lineno">   76</span>      m = dy / (double)dx;</div>
<div class="line"><span class="lineno">   77</span>    }</div>
<div class="line"><span class="lineno">   78</span>    <span class="comment">// double length = sqrt(dx*dx + dy*dy);</span></div>
<div class="line"><span class="lineno">   79</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> alpha = dy, beta = -dx;</div>
<div class="line"><span class="lineno">   80</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> incE  = alpha;</div>
<div class="line"><span class="lineno">   81</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> incNE = alpha + beta;</div>
<div class="line"><span class="lineno">   82</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> incN  = beta;</div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span>    <span class="comment">//  N.B. le coordinate sono relative ad un sist. di rif. con l&#39;origine in a</span></div>
<div class="line"><span class="lineno">   85</span>    <span class="comment">//  l&#39;eq. della retta e&#39; alpha * x + beta * y = 0</span></div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>    <span class="keywordtype">int</span> yMin = std::max(a.y, 0) - a.y;  <span class="comment">//  clipping y + cambio  riferimento</span></div>
<div class="line"><span class="lineno">   88</span>    <span class="keywordtype">int</span> yMax = std::min(b.y, ly - 1) - a.y;  <span class="comment">//  (trasporto dell&#39;origine in a)</span></div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">if</span> (dx &gt; 0 &amp;&amp; m &lt;= 1) {</div>
<div class="line"><span class="lineno">   90</span>      <span class="comment">//  midpoint algorithm</span></div>
<div class="line"><span class="lineno">   91</span>      <a class="code hl_class" href="class_t_point_t.html">TPoint</a> segm;</div>
<div class="line"><span class="lineno">   92</span>      <span class="keywordflow">if</span> (dy == 0)  <span class="comment">//  segmento orizzontale: inizializza segm</span></div>
<div class="line"><span class="lineno">   93</span>      {</div>
<div class="line"><span class="lineno">   94</span>        segm.x = 0;</div>
<div class="line"><span class="lineno">   95</span>        segm.y = yMin;</div>
<div class="line"><span class="lineno">   96</span>      } <span class="keywordflow">else</span>  <span class="comment">//  0&lt;m&lt;=1 :  inizializza segm</span></div>
<div class="line"><span class="lineno">   97</span>      {</div>
<div class="line"><span class="lineno">   98</span>        segm.x = tceil((yMin - 0.5) / m);</div>
<div class="line"><span class="lineno">   99</span>        segm.y = yMin;</div>
<div class="line"><span class="lineno">  100</span>      }</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>      <span class="keywordtype">int</span> dSegm = tfloor(alpha * (segm.x + 1) + beta * (segm.y + 0.5));</div>
<div class="line"><span class="lineno">  103</span>      <span class="keywordflow">while</span> (segm.y &lt;= yMax) {</div>
<div class="line"><span class="lineno">  104</span>        <span class="keywordtype">int</span> count =</div>
<div class="line"><span class="lineno">  105</span>            0;  <span class="comment">//  i trati orizzontali di segm vengono disegnati in &quot;blocco&quot;</span></div>
<div class="line"><span class="lineno">  106</span>        <span class="keywordflow">while</span> (dSegm &lt; 0 &amp;&amp; segm.x &lt;= dx)  <span class="comment">//  Est:  segm.x&lt;=dx evita il ciclo</span></div>
<div class="line"><span class="lineno">  107</span>        {                                  <span class="comment">//  infinito quando m=0 (incE=0)</span></div>
<div class="line"><span class="lineno">  108</span>          dSegm = dSegm + incE;</div>
<div class="line"><span class="lineno">  109</span>          segm.x++;</div>
<div class="line"><span class="lineno">  110</span>          count++;</div>
<div class="line"><span class="lineno">  111</span>        }</div>
<div class="line"><span class="lineno">  112</span>        <span class="comment">//  NordEst</span></div>
<div class="line"><span class="lineno">  113</span>        <span class="keywordtype">int</span> xMin, xMax;</div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">if</span> (k &gt; 0) {</div>
<div class="line"><span class="lineno">  115</span>          xMin = std::max(</div>
<div class="line"><span class="lineno">  116</span>              {a.x + segm.x - count, a.x, 0});  <span class="comment">//  clipping x + ritorno alle</span></div>
<div class="line"><span class="lineno">  117</span>          xMax = std::min(</div>
<div class="line"><span class="lineno">  118</span>              {a.x + segm.x, b.x, lx - 1});  <span class="comment">//  coordinate &quot;di schermo&quot;</span></div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  120</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  121</span>          xMin = std::max({a.x - segm.x, a.x - dx,</div>
<div class="line"><span class="lineno">  122</span>                           0});  <span class="comment">//  clipping x + riflessione + ritorno</span></div>
<div class="line"><span class="lineno">  123</span>          xMax = std::min({a.x - segm.x + count, a.x,</div>
<div class="line"><span class="lineno">  124</span>                           lx - 1});  <span class="comment">//  alle  coordinate &quot;di schermo&quot;</span></div>
<div class="line"><span class="lineno">  125</span>        }</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>        TPixel32 *p = ras-&gt;pixels(segm.y + a.y) + xMin;</div>
<div class="line"><span class="lineno">  128</span>        TPixel32 *q = p + (xMax - xMin);</div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>        <span class="keywordflow">while</span> (p &lt;= q) *p++ = col;</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>        dSegm = dSegm + incNE;</div>
<div class="line"><span class="lineno">  133</span>        segm.x++;</div>
<div class="line"><span class="lineno">  134</span>        segm.y++;</div>
<div class="line"><span class="lineno">  135</span>      }</div>
<div class="line"><span class="lineno">  136</span>    } <span class="keywordflow">else</span>  <span class="comment">//  m&gt;1 oppure segmento verticale</span></div>
<div class="line"><span class="lineno">  137</span>    {</div>
<div class="line"><span class="lineno">  138</span>      <span class="comment">//  midpoint algorithm</span></div>
<div class="line"><span class="lineno">  139</span>      <a class="code hl_class" href="class_t_point_t.html">TPoint</a> segm;</div>
<div class="line"><span class="lineno">  140</span>      <span class="keywordflow">if</span> (dx == 0)  <span class="comment">//  segmento verticale: inizializza segm</span></div>
<div class="line"><span class="lineno">  141</span>      {</div>
<div class="line"><span class="lineno">  142</span>        segm.x = 0;</div>
<div class="line"><span class="lineno">  143</span>        segm.y = yMin;</div>
<div class="line"><span class="lineno">  144</span>      } <span class="keywordflow">else</span>  <span class="comment">//  m&gt;1 :  inizializza segm</span></div>
<div class="line"><span class="lineno">  145</span>      {</div>
<div class="line"><span class="lineno">  146</span>        segm.x = tround(yMin / m);</div>
<div class="line"><span class="lineno">  147</span>        segm.y = yMin;</div>
<div class="line"><span class="lineno">  148</span>      }</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>      <span class="keywordtype">int</span> dSegm = tfloor(alpha * (segm.x + 0.5) + beta * (segm.y + 1));</div>
<div class="line"><span class="lineno">  151</span>      <span class="keywordflow">while</span> (segm.y &lt;= yMax) {</div>
<div class="line"><span class="lineno">  152</span>        <span class="keywordtype">int</span> xMin, xMax;</div>
<div class="line"><span class="lineno">  153</span>        <span class="keywordflow">if</span> (k &gt; 0) {</div>
<div class="line"><span class="lineno">  154</span>          xMin = std::max(a.x + segm.x, 0);       <span class="comment">//  clipping x + ritorno alle</span></div>
<div class="line"><span class="lineno">  155</span>          xMax = std::min(a.x + segm.x, lx - 1);  <span class="comment">//  coordinate &quot;di schermo&quot;</span></div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  158</span>          xMin =</div>
<div class="line"><span class="lineno">  159</span>              std::max(a.x - segm.x, 0);  <span class="comment">//  clipping x + riflessione + ritorno</span></div>
<div class="line"><span class="lineno">  160</span>          xMax =</div>
<div class="line"><span class="lineno">  161</span>              std::min(a.x - segm.x, lx - 1);  <span class="comment">//  alle  coordinate &quot;di schermo&quot;</span></div>
<div class="line"><span class="lineno">  162</span>        }</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>        TPixel32 *p = ras-&gt;pixels(segm.y + a.y) + xMin;</div>
<div class="line"><span class="lineno">  165</span>        TPixel32 *q = p + (xMax - xMin);</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>        <span class="keywordflow">while</span> (p &lt;= q) *p++ = col;</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>        <span class="keywordflow">if</span> (dSegm &lt;= 0)  <span class="comment">//  NordEst</span></div>
<div class="line"><span class="lineno">  170</span>        {</div>
<div class="line"><span class="lineno">  171</span>          dSegm = dSegm + incNE;</div>
<div class="line"><span class="lineno">  172</span>          segm.x++;</div>
<div class="line"><span class="lineno">  173</span>        } <span class="keywordflow">else</span>  <span class="comment">//  Nord</span></div>
<div class="line"><span class="lineno">  174</span>        {</div>
<div class="line"><span class="lineno">  175</span>          dSegm = dSegm + incN;</div>
<div class="line"><span class="lineno">  176</span>        }</div>
<div class="line"><span class="lineno">  177</span>        segm.y++;</div>
<div class="line"><span class="lineno">  178</span>      }</div>
<div class="line"><span class="lineno">  179</span>    }</div>
<div class="line"><span class="lineno">  180</span>    ras-&gt;unlock();</div>
<div class="line"><span class="lineno">  181</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  182</span>  }</div>
<div class="line"><span class="lineno">  183</span> </div>
<div class="line"><span class="lineno">  184</span>  <a class="code hl_class" href="class_half_cord.html">HalfCord</a> halfCord(radius);</div>
<div class="line"><span class="lineno">  185</span> </div>
<div class="line"><span class="lineno">  186</span>  <span class="keywordtype">int</span> x, y;</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>  <span class="comment">// ----- punti iniziali coincidenti: disegna un cerchio</span></div>
<div class="line"><span class="lineno">  189</span>  <span class="keywordflow">if</span> (a == b) {</div>
<div class="line"><span class="lineno">  190</span>    <span class="keywordtype">int</span> yMin = std::max(a.y - radius, 0);       <span class="comment">//  clipping y</span></div>
<div class="line"><span class="lineno">  191</span>    <span class="keywordtype">int</span> yMax = std::min(a.y + radius, ly - 1);  <span class="comment">//  clipping y</span></div>
<div class="line"><span class="lineno">  192</span>    <span class="keywordflow">for</span> (y = yMin; y &lt;= yMax; y++) {</div>
<div class="line"><span class="lineno">  193</span>      <span class="keywordtype">int</span> deltay = abs(y - a.y);</div>
<div class="line"><span class="lineno">  194</span>      <span class="keywordtype">int</span> xMin   = std::max(a.x - halfCord.getCord(deltay), 0);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  195</span>      <span class="keywordtype">int</span> xMax =</div>
<div class="line"><span class="lineno">  196</span>          std::min(a.x + halfCord.getCord(deltay), lx - 1);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  197</span>      TPixel32 *p         = ras-&gt;pixels(y) + xMin;</div>
<div class="line"><span class="lineno">  198</span>      TPixel32 *q         = p + (xMax - xMin);</div>
<div class="line"><span class="lineno">  199</span>      <span class="keywordflow">while</span> (p &lt;= q) *p++ = col;</div>
<div class="line"><span class="lineno">  200</span>    }</div>
<div class="line"><span class="lineno">  201</span>    ras-&gt;unlock();</div>
<div class="line"><span class="lineno">  202</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  203</span>  }</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>  <span class="comment">// -----  rettangolo orizzontale (a.y = b.y, a.x != b.x)</span></div>
<div class="line"><span class="lineno">  206</span>  <span class="keywordflow">if</span> (a.y == b.y) {</div>
<div class="line"><span class="lineno">  207</span>    <span class="keywordtype">int</span> yMin   = std::max((a.y - radius), 0);       <span class="comment">//  clipping y</span></div>
<div class="line"><span class="lineno">  208</span>    <span class="keywordtype">int</span> yMax   = std::min((a.y + radius), ly - 1);  <span class="comment">//  clipping y</span></div>
<div class="line"><span class="lineno">  209</span>    <span class="keywordtype">int</span> xLeft  = std::min(a.x, b.x);</div>
<div class="line"><span class="lineno">  210</span>    <span class="keywordtype">int</span> xRight = std::max(a.x, b.x);</div>
<div class="line"><span class="lineno">  211</span>    <span class="keywordflow">for</span> (y = yMin; y &lt;= yMax; y++) {</div>
<div class="line"><span class="lineno">  212</span>      <span class="keywordtype">int</span> deltay = abs(y - a.y);</div>
<div class="line"><span class="lineno">  213</span>      <span class="keywordtype">int</span> xMin = std::max(xLeft - halfCord.getCord(deltay), 0);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  214</span>      <span class="keywordtype">int</span> xMax =</div>
<div class="line"><span class="lineno">  215</span>          std::min(xRight + halfCord.getCord(deltay), lx - 1);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  216</span>      TPixel32 *p         = ras-&gt;pixels(y) + xMin;</div>
<div class="line"><span class="lineno">  217</span>      TPixel32 *q         = p + (xMax - xMin);</div>
<div class="line"><span class="lineno">  218</span>      <span class="keywordflow">while</span> (p &lt;= q) *p++ = col;</div>
<div class="line"><span class="lineno">  219</span>    }</div>
<div class="line"><span class="lineno">  220</span>    ras-&gt;unlock();</div>
<div class="line"><span class="lineno">  221</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  222</span>  }</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>  <span class="comment">// -----  rettangolo verticale (a.x = b.x, a.y != b.y)</span></div>
<div class="line"><span class="lineno">  225</span>  <span class="keywordflow">if</span> (a.x == b.x) {</div>
<div class="line"><span class="lineno">  226</span>    <span class="keywordtype">int</span> xMin = std::max(a.x - radius, 0);       <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  227</span>    <span class="keywordtype">int</span> xMax = std::min(a.x + radius, lx - 1);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  228</span>    <span class="keywordflow">for</span> (x = xMin; x &lt;= xMax; x++) {</div>
<div class="line"><span class="lineno">  229</span>      <span class="keywordtype">int</span> deltax = abs(x - a.x);</div>
<div class="line"><span class="lineno">  230</span>      <span class="keywordtype">int</span> yMin   = std::max(a.y - halfCord.getCord(deltax), 0);  <span class="comment">//  clipping y</span></div>
<div class="line"><span class="lineno">  231</span>      <span class="keywordtype">int</span> yMax =</div>
<div class="line"><span class="lineno">  232</span>          std::min(b.y + halfCord.getCord(deltax), ly - 1);  <span class="comment">//  clipping y</span></div>
<div class="line"><span class="lineno">  233</span>      <span class="keywordflow">if</span> (yMin &lt;= yMax) {</div>
<div class="line"><span class="lineno">  234</span>        TPixel32 *p = ras-&gt;pixels(yMin) + x;</div>
<div class="line"><span class="lineno">  235</span>        TPixel32 *q = ras-&gt;pixels(yMax) + x;</div>
<div class="line"><span class="lineno">  236</span>        <span class="keywordtype">int</span> wrap    = ras-&gt;getWrap();</div>
<div class="line"><span class="lineno">  237</span>        <span class="keywordflow">while</span> (p &lt;= q) {</div>
<div class="line"><span class="lineno">  238</span>          *p = col;</div>
<div class="line"><span class="lineno">  239</span>          p += wrap;</div>
<div class="line"><span class="lineno">  240</span>        }</div>
<div class="line"><span class="lineno">  241</span>      }</div>
<div class="line"><span class="lineno">  242</span>    }</div>
<div class="line"><span class="lineno">  243</span>    ras-&gt;unlock();</div>
<div class="line"><span class="lineno">  244</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  245</span>  }</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span>  <span class="comment">// -----  rettangolo inclinato</span></div>
<div class="line"><span class="lineno">  248</span>  <span class="comment">//    k = +1/-1 se il rettangolo e&#39; inclinato positivamente/negativamente</span></div>
<div class="line"><span class="lineno">  249</span>  <span class="keywordtype">int</span> k  = 1;</div>
<div class="line"><span class="lineno">  250</span>  <span class="keywordtype">int</span> dx = b.x - a.x;</div>
<div class="line"><span class="lineno">  251</span>  <span class="keywordflow">if</span> (dx &lt; 0) {</div>
<div class="line"><span class="lineno">  252</span>    dx = -dx;</div>
<div class="line"><span class="lineno">  253</span>    k  = -1;</div>
<div class="line"><span class="lineno">  254</span>  }</div>
<div class="line"><span class="lineno">  255</span>  <span class="keywordtype">int</span> dy = b.y - a.y;</div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span>  assert(dx &gt; 0);</div>
<div class="line"><span class="lineno">  258</span>  assert(dy &gt; 0);</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span>  <span class="keywordtype">double</span> length  = sqrt((<span class="keywordtype">double</span>)(dx * dx + dy * dy));</div>
<div class="line"><span class="lineno">  261</span>  <span class="keyword">const</span> <span class="keywordtype">double</span> m = dy / (double)dx;</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>  <span class="comment">// punto di tangenza superiore nel sistema di riferimento del cerchio</span></div>
<div class="line"><span class="lineno">  264</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> up(-radius * dy / length, radius * dx / length);</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>  <span class="comment">// semi-ampiezza orizzontale delle &quot;calotte&quot; circolari</span></div>
<div class="line"><span class="lineno">  267</span>  <span class="keywordtype">int</span> halfAmplCap = tfloor(-up.x);</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>  <span class="comment">//  A meno di intersezioni relative tra le diverse zone:</span></div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>  <span class="comment">//  le scanline della &quot;calotta&quot; circolare superiore sono</span></div>
<div class="line"><span class="lineno">  272</span>  <span class="comment">//  (b.y+cutExt,b.y+radius]</span></div>
<div class="line"><span class="lineno">  273</span>  <span class="comment">//  le scanline del trapezoide circolare superiore sono [b.y-cutIn,b.y+cutExt]</span></div>
<div class="line"><span class="lineno">  274</span>  <span class="comment">//  le scanline del parallelogramma sono (a.y+cutIn,b.y-cutIn)</span></div>
<div class="line"><span class="lineno">  275</span>  <span class="comment">//  le scanline del trapezoide circolare inferiore sono [a.y-cutExt,a.y+cutIn]</span></div>
<div class="line"><span class="lineno">  276</span>  <span class="comment">//  le scanline della &quot;calotta&quot; circolare inferiore sono</span></div>
<div class="line"><span class="lineno">  277</span>  <span class="comment">//  [a.y-radius,a.y-cutExt)</span></div>
<div class="line"><span class="lineno">  278</span>  <span class="keywordtype">int</span> cutExt, cutIn;</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>  <span class="comment">// vertici del parallelogramma</span></div>
<div class="line"><span class="lineno">  281</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> rightUp;</div>
<div class="line"><span class="lineno">  282</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> rightDown;</div>
<div class="line"><span class="lineno">  283</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> leftUp;</div>
<div class="line"><span class="lineno">  284</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> leftDown;</div>
<div class="line"><span class="lineno">  285</span>  <span class="keywordtype">double</span> mParall;  <span class="comment">// coeff. angolare parallelogramma</span></div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>  <span class="comment">//  NOTA BENE:  halfAmplCap=0 &lt;=&gt; (radius=0 (caso a parte) , 1)</span></div>
<div class="line"><span class="lineno">  288</span>  <span class="keywordflow">if</span> (radius &gt; 1) {</div>
<div class="line"><span class="lineno">  289</span>    <span class="keywordflow">for</span> (cutExt = radius;</div>
<div class="line"><span class="lineno">  290</span>         cutExt &gt;= 0 &amp;&amp; halfCord.getCord(cutExt) &lt;= halfAmplCap; cutExt--)</div>
<div class="line"><span class="lineno">  291</span>      ;</div>
<div class="line"><span class="lineno">  292</span>    cutIn       = cutExt;  <span class="comment">//  vedi else successivo</span></div>
<div class="line"><span class="lineno">  293</span>    rightUp.x   = dx + halfCord.getCord(cutIn);</div>
<div class="line"><span class="lineno">  294</span>    rightUp.y   = dy - cutIn;</div>
<div class="line"><span class="lineno">  295</span>    rightDown.x = halfCord.getCord(cutIn);</div>
<div class="line"><span class="lineno">  296</span>    rightDown.y = -cutIn;</div>
<div class="line"><span class="lineno">  297</span>    leftUp.x    = dx - halfCord.getCord(cutIn);</div>
<div class="line"><span class="lineno">  298</span>    leftUp.y    = dy + cutIn;</div>
<div class="line"><span class="lineno">  299</span>    leftDown.x  = -halfCord.getCord(cutIn);</div>
<div class="line"><span class="lineno">  300</span>    leftDown.y  = cutIn;</div>
<div class="line"><span class="lineno">  301</span>    mParall     = dy / (double)dx;</div>
<div class="line"><span class="lineno">  302</span>  } <span class="keywordflow">else</span>  <span class="comment">//  N.B. cutExt != cutIn solo quando radius=1</span></div>
<div class="line"><span class="lineno">  303</span>  {</div>
<div class="line"><span class="lineno">  304</span>    cutExt = radius;  <span class="comment">//  radius=1 =&gt; halfAmplCap=0 (non ci sono mai le</span></div>
<div class="line"><span class="lineno">  305</span>                      <span class="comment">//  &quot;calotte&quot; circolari)</span></div>
<div class="line"><span class="lineno">  306</span>    cutIn = 0;        <span class="comment">//  anche per radius=1 il limite &quot;interno&quot; dei trapezoidi</span></div>
<div class="line"><span class="lineno">  307</span>                      <span class="comment">//  circolari e&#39; &lt; radius</span></div>
<div class="line"><span class="lineno">  308</span>    rightUp.x   = dx - up.x;</div>
<div class="line"><span class="lineno">  309</span>    rightUp.y   = dy - up.y;</div>
<div class="line"><span class="lineno">  310</span>    rightDown.x = -up.x;</div>
<div class="line"><span class="lineno">  311</span>    rightDown.y = -up.y;</div>
<div class="line"><span class="lineno">  312</span>    leftUp.x    = dx + up.x;</div>
<div class="line"><span class="lineno">  313</span>    leftUp.y    = dy + up.y;</div>
<div class="line"><span class="lineno">  314</span>    leftDown.x  = up.x;</div>
<div class="line"><span class="lineno">  315</span>    leftDown.y  = up.y;</div>
<div class="line"><span class="lineno">  316</span>    mParall     = m;</div>
<div class="line"><span class="lineno">  317</span>  }</div>
<div class="line"><span class="lineno">  318</span>  <span class="comment">// -----  riempie &quot;calotte&quot; circolari</span></div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span>  <span class="comment">// -----  riempie &quot;calotta&quot; circolare inferiore</span></div>
<div class="line"><span class="lineno">  321</span>  <span class="keywordtype">int</span> yMin = std::max(a.y - radius, 0);           <span class="comment">//  clipping y</span></div>
<div class="line"><span class="lineno">  322</span>  <span class="keywordtype">int</span> yMax = std::min(a.y - cutExt - 1, ly - 1);  <span class="comment">//  clipping y</span></div>
<div class="line"><span class="lineno">  323</span>  <span class="keywordflow">for</span> (y = yMin; y &lt;= yMax; y++) {</div>
<div class="line"><span class="lineno">  324</span>    <span class="keywordtype">int</span> r               = halfCord.getCord(a.y - y);</div>
<div class="line"><span class="lineno">  325</span>    <span class="keywordtype">int</span> xMin            = std::max(a.x - r, 0);       <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordtype">int</span> xMax            = std::min(a.x + r, lx - 1);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  327</span>    TPixel32 *p         = ras-&gt;pixels(y) + xMin;</div>
<div class="line"><span class="lineno">  328</span>    TPixel32 *q         = p + (xMax - xMin);</div>
<div class="line"><span class="lineno">  329</span>    <span class="keywordflow">while</span> (p &lt;= q) *p++ = col;</div>
<div class="line"><span class="lineno">  330</span>  }</div>
<div class="line"><span class="lineno">  331</span>  <span class="comment">// -----  riempie &quot;calotta&quot; circolare superiore</span></div>
<div class="line"><span class="lineno">  332</span>  yMin = std::max(b.y + cutExt + 1, 0);   <span class="comment">//  clipping y</span></div>
<div class="line"><span class="lineno">  333</span>  yMax = std::min(b.y + radius, ly - 1);  <span class="comment">//  clipping y</span></div>
<div class="line"><span class="lineno">  334</span>  <span class="keywordflow">for</span> (y = yMin; y &lt;= yMax; y++) {</div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordtype">int</span> r               = halfCord.getCord(y - b.y);</div>
<div class="line"><span class="lineno">  336</span>    <span class="keywordtype">int</span> xMin            = std::max(b.x - r, 0);       <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  337</span>    <span class="keywordtype">int</span> xMax            = std::min(b.x + r, lx - 1);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  338</span>    TPixel32 *p         = ras-&gt;pixels(y) + xMin;</div>
<div class="line"><span class="lineno">  339</span>    TPixel32 *q         = p + (xMax - xMin);</div>
<div class="line"><span class="lineno">  340</span>    <span class="keywordflow">while</span> (p &lt;= q) *p++ = col;</div>
<div class="line"><span class="lineno">  341</span>  }</div>
<div class="line"><span class="lineno">  342</span>  <span class="comment">// -----  riempie trapezoidi</span></div>
<div class="line"><span class="lineno">  343</span> </div>
<div class="line"><span class="lineno">  344</span>  <span class="comment">// (se k&lt;0 viene fatta una riflessione sulle ascisse prima di tornare alle</span></div>
<div class="line"><span class="lineno">  345</span>  <span class="comment">// coordinate &quot;di schermo&quot;)</span></div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>  <span class="comment">//  limite destro assoluto delle scanline trapezoide:</span></div>
<div class="line"><span class="lineno">  348</span>  <span class="keywordtype">int</span> xSegmMax = tround(dx - up.x);  <span class="comment">//  coordinata x del punto di tangenza</span></div>
<div class="line"><span class="lineno">  349</span>                                     <span class="comment">//  inferiore sul cerchio superiore</span></div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>  <span class="comment">//  limite sinistro assoluto delle scanline:</span></div>
<div class="line"><span class="lineno">  352</span>  <span class="keywordtype">int</span> xSegmMin = tround(up.x);  <span class="comment">//  coordinata x del punto di tangenza superiore</span></div>
<div class="line"><span class="lineno">  353</span>                                <span class="comment">//  sul cerchio inferiore</span></div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>  <span class="comment">// -----  riempie trapezoide inferiore</span></div>
<div class="line"><span class="lineno">  356</span> </div>
<div class="line"><span class="lineno">  357</span>  <span class="comment">// N.B. le coordinate sono relative ad un sist. di rif. con l&#39;origine sul</span></div>
<div class="line"><span class="lineno">  358</span>  <span class="comment">// centro</span></div>
<div class="line"><span class="lineno">  359</span>  <span class="comment">// del cerchio inferiore</span></div>
<div class="line"><span class="lineno">  360</span> </div>
<div class="line"><span class="lineno">  361</span>  yMin = std::max(a.y - cutExt, 0) - a.y;                         <span class="comment">//  clipping y</span></div>
<div class="line"><span class="lineno">  362</span>  yMax = std::min({a.y + cutIn, b.y - cutIn - 1, ly - 1}) - a.y;  <span class="comment">//  clipping y</span></div>
<div class="line"><span class="lineno">  363</span> </div>
<div class="line"><span class="lineno">  364</span>  <span class="comment">// l&#39;eq. della retta e&#39; alpha * x + beta * y + gammaRight = 0</span></div>
<div class="line"><span class="lineno">  365</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> alpha = dy, beta = -dx;</div>
<div class="line"><span class="lineno">  366</span>  <span class="keyword">const</span> <span class="keywordtype">double</span> gammaRight = rightDown.y * dx - rightDown.x * dy;</div>
<div class="line"><span class="lineno">  367</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> incE          = alpha;</div>
<div class="line"><span class="lineno">  368</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> incNE         = alpha + beta;</div>
<div class="line"><span class="lineno">  369</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> incN          = beta;</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>  if (m &lt;= 1) {</div>
<div class="line"><span class="lineno">  372</span>    <span class="comment">//  midpoint algorithm; le scanline vengono disegnate solo</span></div>
<div class="line"><span class="lineno">  373</span>    <span class="comment">//  sul NordEst. L&#39;ultima scanline non viene disegnata</span></div>
<div class="line"><span class="lineno">  374</span>    <a class="code hl_class" href="class_t_point_t.html">TPoint</a> segmRight(</div>
<div class="line"><span class="lineno">  375</span>        tceil((yMin + 0.5 - rightDown.y) / mParall + rightDown.x) - 1, yMin);</div>
<div class="line"><span class="lineno">  376</span>    <span class="keywordtype">int</span> dSegmRight = tfloor(alpha * (segmRight.x + 1) +</div>
<div class="line"><span class="lineno">  377</span>                            beta * (segmRight.y + 0.5) + gammaRight);</div>
<div class="line"><span class="lineno">  378</span>    <span class="keywordflow">while</span> (segmRight.y &lt;= yMax) {</div>
<div class="line"><span class="lineno">  379</span>      <span class="keywordflow">if</span> (dSegmRight &lt; 0)  <span class="comment">//  Est</span></div>
<div class="line"><span class="lineno">  380</span>      {</div>
<div class="line"><span class="lineno">  381</span>        dSegmRight = dSegmRight + incE;</div>
<div class="line"><span class="lineno">  382</span>        segmRight.x++;</div>
<div class="line"><span class="lineno">  383</span>      } <span class="keywordflow">else</span>  <span class="comment">//  NordEst</span></div>
<div class="line"><span class="lineno">  384</span>      {</div>
<div class="line"><span class="lineno">  385</span>        <span class="keywordtype">int</span> xMin, xMax;</div>
<div class="line"><span class="lineno">  386</span>        <span class="keywordflow">if</span> (k &gt; 0) {</div>
<div class="line"><span class="lineno">  387</span>          xMin = std::max(a.x - halfCord.getCord(abs(segmRight.y)),</div>
<div class="line"><span class="lineno">  388</span>                          0);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  389</span>          xMax = std::min(a.x + std::min(segmRight.x, xSegmMax),</div>
<div class="line"><span class="lineno">  390</span>                          lx - 1);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  391</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  392</span>          xMin = std::max(a.x - std::min(segmRight.x, xSegmMax),</div>
<div class="line"><span class="lineno">  393</span>                          0);  <span class="comment">//  clipping x + ritorno alle</span></div>
<div class="line"><span class="lineno">  394</span>          xMax = std::min(a.x + halfCord.getCord(abs(segmRight.y)),</div>
<div class="line"><span class="lineno">  395</span>                          lx - 1);  <span class="comment">//   coordinate &quot;di schermo&quot;</span></div>
<div class="line"><span class="lineno">  396</span>        }</div>
<div class="line"><span class="lineno">  397</span>        TPixel32 *p         = ras-&gt;pixels(segmRight.y + a.y) + xMin;</div>
<div class="line"><span class="lineno">  398</span>        TPixel32 *q         = p + (xMax - xMin);</div>
<div class="line"><span class="lineno">  399</span>        <span class="keywordflow">while</span> (p &lt;= q) *p++ = col;</div>
<div class="line"><span class="lineno">  400</span> </div>
<div class="line"><span class="lineno">  401</span>        dSegmRight = dSegmRight + incNE;</div>
<div class="line"><span class="lineno">  402</span>        segmRight.x++;</div>
<div class="line"><span class="lineno">  403</span>        segmRight.y++;</div>
<div class="line"><span class="lineno">  404</span>      }</div>
<div class="line"><span class="lineno">  405</span>    }</div>
<div class="line"><span class="lineno">  406</span>  } <span class="keywordflow">else</span>  <span class="comment">//  m&gt;1</span></div>
<div class="line"><span class="lineno">  407</span>  {</div>
<div class="line"><span class="lineno">  408</span>    <span class="comment">//  midpoint algorithm; le scanline vengono disegnate sempre</span></div>
<div class="line"><span class="lineno">  409</span>    <a class="code hl_class" href="class_t_point_t.html">TPoint</a> segmRight(tround((yMin - rightDown.y) / mParall + rightDown.x),</div>
<div class="line"><span class="lineno">  410</span>                     yMin);</div>
<div class="line"><span class="lineno">  411</span>    <span class="keywordtype">int</span> dSegmRight = tfloor(alpha * (segmRight.x + 0.5) +</div>
<div class="line"><span class="lineno">  412</span>                            beta * (segmRight.y + 1) + gammaRight);</div>
<div class="line"><span class="lineno">  413</span>    <span class="keywordflow">while</span> (segmRight.y &lt;= yMax) {</div>
<div class="line"><span class="lineno">  414</span>      <span class="keywordtype">int</span> xMin, xMax;</div>
<div class="line"><span class="lineno">  415</span>      <span class="keywordflow">if</span> (k &gt; 0) {</div>
<div class="line"><span class="lineno">  416</span>        xMin = std::max(a.x - halfCord.getCord(abs(segmRight.y)),</div>
<div class="line"><span class="lineno">  417</span>                        0);                          <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  418</span>        xMax = std::min(a.x + segmRight.x, lx - 1);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  419</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  420</span>        xMin = std::max(a.x - segmRight.x,</div>
<div class="line"><span class="lineno">  421</span>                        0);  <span class="comment">//  clipping x + ritorno alle coordinate</span></div>
<div class="line"><span class="lineno">  422</span>        xMax = std::min(a.x + halfCord.getCord(abs(segmRight.y)),</div>
<div class="line"><span class="lineno">  423</span>                        lx - 1);  <span class="comment">//  &quot;di schermo&quot;</span></div>
<div class="line"><span class="lineno">  424</span>      }</div>
<div class="line"><span class="lineno">  425</span>      TPixel32 *p         = ras-&gt;pixels(segmRight.y + a.y) + xMin;</div>
<div class="line"><span class="lineno">  426</span>      TPixel32 *q         = p + (xMax - xMin);</div>
<div class="line"><span class="lineno">  427</span>      <span class="keywordflow">while</span> (p &lt;= q) *p++ = col;</div>
<div class="line"><span class="lineno">  428</span> </div>
<div class="line"><span class="lineno">  429</span>      <span class="keywordflow">if</span> (dSegmRight &lt;= 0)  <span class="comment">//  NordEst</span></div>
<div class="line"><span class="lineno">  430</span>      {</div>
<div class="line"><span class="lineno">  431</span>        dSegmRight = dSegmRight + incNE;</div>
<div class="line"><span class="lineno">  432</span>        segmRight.x++;</div>
<div class="line"><span class="lineno">  433</span>      } <span class="keywordflow">else</span>  <span class="comment">//  Nord</span></div>
<div class="line"><span class="lineno">  434</span>      {</div>
<div class="line"><span class="lineno">  435</span>        dSegmRight = dSegmRight + incN;</div>
<div class="line"><span class="lineno">  436</span>      }</div>
<div class="line"><span class="lineno">  437</span>      segmRight.y++;</div>
<div class="line"><span class="lineno">  438</span>    }</div>
<div class="line"><span class="lineno">  439</span>  }</div>
<div class="line"><span class="lineno">  440</span> </div>
<div class="line"><span class="lineno">  441</span>  <span class="comment">// -----  riempie trapezoide superiore</span></div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span>  <span class="comment">//  N.B. le coordinate sono relative ad un sist. di rif. con l&#39;origine sul</span></div>
<div class="line"><span class="lineno">  444</span>  <span class="comment">//  centro</span></div>
<div class="line"><span class="lineno">  445</span>  <span class="comment">//  del cerchio superiore</span></div>
<div class="line"><span class="lineno">  446</span>  yMin = std::max({b.y - cutIn, a.y + cutIn + 1, 0}) - b.y;  <span class="comment">//  clipping y</span></div>
<div class="line"><span class="lineno">  447</span>  yMax = std::min(b.y + cutExt, ly - 1) - b.y;               <span class="comment">//  clipping y</span></div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>  <span class="comment">//   l&#39;eq. della retta e&#39; alpha * x + beta * y + gammaLeft = 0</span></div>
<div class="line"><span class="lineno">  450</span>  <span class="keyword">const</span> <span class="keywordtype">double</span> gammaLeft = leftDown.y * dx - leftDown.x * dy;</div>
<div class="line"><span class="lineno">  451</span> </div>
<div class="line"><span class="lineno">  452</span>  <span class="keywordflow">if</span> (m &lt;= 1) {</div>
<div class="line"><span class="lineno">  453</span>    <span class="comment">//  midpoint algorithm; le scanline vengono disegnate solo</span></div>
<div class="line"><span class="lineno">  454</span>    <span class="comment">//  sul NordEst. L&#39;ultima scanline non viene disegnata</span></div>
<div class="line"><span class="lineno">  455</span>    <a class="code hl_class" href="class_t_point_t.html">TPoint</a> segmLeft(tceil((yMin - 0.5 - leftDown.y) / mParall + leftDown.x),</div>
<div class="line"><span class="lineno">  456</span>                    yMin);</div>
<div class="line"><span class="lineno">  457</span>    <span class="keywordtype">int</span> dSegmLeft = tfloor(alpha * (segmLeft.x + 1) +</div>
<div class="line"><span class="lineno">  458</span>                           beta * (segmLeft.y + 0.5) + gammaLeft);</div>
<div class="line"><span class="lineno">  459</span>    <span class="keywordflow">while</span> (segmLeft.y &lt;= yMax) {</div>
<div class="line"><span class="lineno">  460</span>      <span class="keywordtype">int</span> xMin, xMax;</div>
<div class="line"><span class="lineno">  461</span>      <span class="keywordflow">if</span> (k &gt; 0) {</div>
<div class="line"><span class="lineno">  462</span>        xMin = std::max(b.x + std::max(segmLeft.x, xSegmMin - dx),</div>
<div class="line"><span class="lineno">  463</span>                        0);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  464</span>        xMax = std::min(b.x + halfCord.getCord(abs(segmLeft.y)),</div>
<div class="line"><span class="lineno">  465</span>                        lx - 1);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  466</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  467</span>        xMin = std::max(b.x - halfCord.getCord(abs(segmLeft.y)),</div>
<div class="line"><span class="lineno">  468</span>                        0);  <span class="comment">//  clipping x + ritorno alle</span></div>
<div class="line"><span class="lineno">  469</span>        xMax = std::min(b.x - std::max(segmLeft.x, xSegmMin - dx),</div>
<div class="line"><span class="lineno">  470</span>                        lx - 1);  <span class="comment">//   coordinate &quot;di schermo&quot;</span></div>
<div class="line"><span class="lineno">  471</span>      }</div>
<div class="line"><span class="lineno">  472</span>      TPixel32 *p = ras-&gt;pixels(segmLeft.y + b.y) + xMin;</div>
<div class="line"><span class="lineno">  473</span>      TPixel32 *q = p + (xMax - xMin);</div>
<div class="line"><span class="lineno">  474</span> </div>
<div class="line"><span class="lineno">  475</span>      <span class="keywordflow">while</span> (p &lt;= q) *p++ = col;</div>
<div class="line"><span class="lineno">  476</span>      <span class="keywordflow">while</span> (dSegmLeft &lt; 0) {</div>
<div class="line"><span class="lineno">  477</span>        dSegmLeft = dSegmLeft + incE;</div>
<div class="line"><span class="lineno">  478</span>        segmLeft.x++;</div>
<div class="line"><span class="lineno">  479</span>      }</div>
<div class="line"><span class="lineno">  480</span>      dSegmLeft = dSegmLeft + incNE;</div>
<div class="line"><span class="lineno">  481</span>      segmLeft.x++;</div>
<div class="line"><span class="lineno">  482</span>      segmLeft.y++;</div>
<div class="line"><span class="lineno">  483</span>    }</div>
<div class="line"><span class="lineno">  484</span>  } <span class="keywordflow">else</span>  <span class="comment">//  m&gt;1</span></div>
<div class="line"><span class="lineno">  485</span>  {</div>
<div class="line"><span class="lineno">  486</span>    <span class="comment">//  midpoint algorithm; le scanline vengono disegnate sempre</span></div>
<div class="line"><span class="lineno">  487</span>    <a class="code hl_class" href="class_t_point_t.html">TPoint</a> segmLeft(tround((yMin - leftDown.y) / mParall + leftDown.x), yMin);</div>
<div class="line"><span class="lineno">  488</span>    <span class="keywordtype">int</span> dSegmLeft = tfloor(alpha * (segmLeft.x + 0.5) +</div>
<div class="line"><span class="lineno">  489</span>                           beta * (segmLeft.y + 1) + gammaLeft);</div>
<div class="line"><span class="lineno">  490</span>    <span class="keywordflow">while</span> (segmLeft.y &lt;= yMax) {</div>
<div class="line"><span class="lineno">  491</span>      <span class="keywordtype">int</span> xMin, xMax;</div>
<div class="line"><span class="lineno">  492</span>      <span class="keywordflow">if</span> (k &gt; 0) {</div>
<div class="line"><span class="lineno">  493</span>        xMin = std::max(b.x + segmLeft.x, 0);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  494</span>        xMax = std::min(b.x + halfCord.getCord(abs(segmLeft.y)),</div>
<div class="line"><span class="lineno">  495</span>                        lx - 1);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  496</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  497</span>        xMin = std::max(b.x - halfCord.getCord(abs(segmLeft.y)),</div>
<div class="line"><span class="lineno">  498</span>                        0);  <span class="comment">//  clipping x + ritorno alle</span></div>
<div class="line"><span class="lineno">  499</span>        xMax = std::min(b.x - segmLeft.x, lx - 1);  <span class="comment">//   coordinate &quot;di schermo&quot;</span></div>
<div class="line"><span class="lineno">  500</span>      }</div>
<div class="line"><span class="lineno">  501</span>      TPixel32 *p = ras-&gt;pixels(segmLeft.y + b.y) + xMin;</div>
<div class="line"><span class="lineno">  502</span>      TPixel32 *q = p + (xMax - xMin);</div>
<div class="line"><span class="lineno">  503</span> </div>
<div class="line"><span class="lineno">  504</span>      <span class="keywordflow">while</span> (p &lt;= q) *p++ = col;</div>
<div class="line"><span class="lineno">  505</span> </div>
<div class="line"><span class="lineno">  506</span>      <span class="keywordflow">if</span> (dSegmLeft &lt;= 0)  <span class="comment">//  NordEst</span></div>
<div class="line"><span class="lineno">  507</span>      {</div>
<div class="line"><span class="lineno">  508</span>        dSegmLeft = dSegmLeft + incNE;</div>
<div class="line"><span class="lineno">  509</span>        segmLeft.x++;</div>
<div class="line"><span class="lineno">  510</span>      } <span class="keywordflow">else</span>  <span class="comment">//  Nord</span></div>
<div class="line"><span class="lineno">  511</span>      {</div>
<div class="line"><span class="lineno">  512</span>        dSegmLeft = dSegmLeft + incN;</div>
<div class="line"><span class="lineno">  513</span>      }</div>
<div class="line"><span class="lineno">  514</span>      segmLeft.y++;</div>
<div class="line"><span class="lineno">  515</span>    }</div>
<div class="line"><span class="lineno">  516</span>  }</div>
<div class="line"><span class="lineno">  517</span> </div>
<div class="line"><span class="lineno">  518</span>  <span class="comment">// -----  parallelogramma (in alternativa a &quot;parallelogrammoide circolare&quot;)</span></div>
<div class="line"><span class="lineno">  519</span> </div>
<div class="line"><span class="lineno">  520</span>  <span class="comment">// N.B. le coordinate sono relative ad un sist. di rif. con l&#39;origine sul</span></div>
<div class="line"><span class="lineno">  521</span>  <span class="comment">// centro</span></div>
<div class="line"><span class="lineno">  522</span>  <span class="comment">// del cerchio inferiore</span></div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>  <span class="comment">//  retta destra di equaz.   alpha * x + beta * y + gammaRight = 0</span></div>
<div class="line"><span class="lineno">  525</span>  <span class="comment">//  retta sinistra di equaz. alpha * x + beta * y + gammaLeft = 0</span></div>
<div class="line"><span class="lineno">  526</span> </div>
<div class="line"><span class="lineno">  527</span>  yMin = std::max(a.y + cutIn + 1, 0) - a.y;       <span class="comment">// clipping y</span></div>
<div class="line"><span class="lineno">  528</span>  yMax = std::min(b.y - cutIn - 1, ly - 1) - a.y;  <span class="comment">// clipping y</span></div>
<div class="line"><span class="lineno">  529</span>  <span class="keywordflow">if</span> (m &lt;= 1) {</div>
<div class="line"><span class="lineno">  530</span>    <span class="comment">//  midpoint algorithm; le scanline vengono disegnate solo</span></div>
<div class="line"><span class="lineno">  531</span>    <span class="comment">//  sul NordEst. L&#39;ultima scanline non viene disegnata</span></div>
<div class="line"><span class="lineno">  532</span>    <a class="code hl_class" href="class_t_point_t.html">TPoint</a> segmRight(</div>
<div class="line"><span class="lineno">  533</span>        tceil((yMin + 0.5 - rightDown.y) / mParall + rightDown.x) - 1, yMin);</div>
<div class="line"><span class="lineno">  534</span>    <a class="code hl_class" href="class_t_point_t.html">TPoint</a> segmLeft =</div>
<div class="line"><span class="lineno">  535</span>        <a class="code hl_class" href="class_t_point_t.html">TPoint</a>(tceil((yMin - 0.5 - leftDown.y) / mParall + leftDown.x), yMin);</div>
<div class="line"><span class="lineno">  536</span>    <span class="keywordtype">int</span> dSegmRight = tfloor(alpha * (segmRight.x + 1) +</div>
<div class="line"><span class="lineno">  537</span>                            beta * (segmRight.y + 0.5) + gammaRight);</div>
<div class="line"><span class="lineno">  538</span>    <span class="keywordtype">int</span> dSegmLeft = tfloor(alpha * (segmLeft.x + 1) +</div>
<div class="line"><span class="lineno">  539</span>                           beta * (segmLeft.y + 0.5) + gammaLeft);</div>
<div class="line"><span class="lineno">  540</span>    <span class="keywordflow">while</span> (segmRight.y &lt;= yMax) {</div>
<div class="line"><span class="lineno">  541</span>      <span class="keywordflow">if</span> (dSegmRight &lt; 0)  <span class="comment">//  segmRight a Est</span></div>
<div class="line"><span class="lineno">  542</span>      {</div>
<div class="line"><span class="lineno">  543</span>        dSegmRight = dSegmRight + incE;</div>
<div class="line"><span class="lineno">  544</span>        segmRight.x++;</div>
<div class="line"><span class="lineno">  545</span>      } <span class="keywordflow">else</span>  <span class="comment">//  segmRight a NordEst</span></div>
<div class="line"><span class="lineno">  546</span>      {</div>
<div class="line"><span class="lineno">  547</span>        <span class="keywordtype">int</span> xMin, xMax;</div>
<div class="line"><span class="lineno">  548</span>        <span class="keywordflow">if</span> (k &gt; 0) {</div>
<div class="line"><span class="lineno">  549</span>          xMin =</div>
<div class="line"><span class="lineno">  550</span>              std::max(a.x + std::max(segmLeft.x, xSegmMin), 0);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  551</span>          xMax = std::min(a.x + std::min(segmRight.x, xSegmMax),</div>
<div class="line"><span class="lineno">  552</span>                          lx - 1);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  553</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  554</span>          xMin = std::max(a.x - std::min(segmRight.x, xSegmMax),</div>
<div class="line"><span class="lineno">  555</span>                          0);  <span class="comment">//  clipping x + ritorno alle</span></div>
<div class="line"><span class="lineno">  556</span>          xMax = std::min(a.x - std::max(segmLeft.x, xSegmMin),</div>
<div class="line"><span class="lineno">  557</span>                          lx - 1);  <span class="comment">//   coordinate &quot;di schermo&quot;</span></div>
<div class="line"><span class="lineno">  558</span>        }</div>
<div class="line"><span class="lineno">  559</span> </div>
<div class="line"><span class="lineno">  560</span>        TPixel32 *p = ras-&gt;pixels(segmRight.y + a.y) + xMin;</div>
<div class="line"><span class="lineno">  561</span>        TPixel32 *q = p + (xMax - xMin);</div>
<div class="line"><span class="lineno">  562</span> </div>
<div class="line"><span class="lineno">  563</span>        <span class="keywordflow">while</span> (p &lt;= q) *p++ = col;</div>
<div class="line"><span class="lineno">  564</span> </div>
<div class="line"><span class="lineno">  565</span>        dSegmRight = dSegmRight + incNE;</div>
<div class="line"><span class="lineno">  566</span>        segmRight.x++;</div>
<div class="line"><span class="lineno">  567</span>        segmRight.y++;</div>
<div class="line"><span class="lineno">  568</span> </div>
<div class="line"><span class="lineno">  569</span>        <span class="keywordflow">while</span> (dSegmLeft &lt; 0)  <span class="comment">//  segmLeft a Est</span></div>
<div class="line"><span class="lineno">  570</span>        {</div>
<div class="line"><span class="lineno">  571</span>          dSegmLeft = dSegmLeft + incE;</div>
<div class="line"><span class="lineno">  572</span>          segmLeft.x++;</div>
<div class="line"><span class="lineno">  573</span>        }</div>
<div class="line"><span class="lineno">  574</span>        <span class="comment">//  segmLeft a NordEst</span></div>
<div class="line"><span class="lineno">  575</span>        dSegmLeft = dSegmLeft + incNE;</div>
<div class="line"><span class="lineno">  576</span>        segmLeft.x++;</div>
<div class="line"><span class="lineno">  577</span>        segmLeft.y++;</div>
<div class="line"><span class="lineno">  578</span>      }</div>
<div class="line"><span class="lineno">  579</span>    }</div>
<div class="line"><span class="lineno">  580</span>  } <span class="keywordflow">else</span>  <span class="comment">//  m&gt;1</span></div>
<div class="line"><span class="lineno">  581</span>  {</div>
<div class="line"><span class="lineno">  582</span>    <span class="comment">//  midpoint algorithm; le scanline vengono disegnate sempre</span></div>
<div class="line"><span class="lineno">  583</span>    <a class="code hl_class" href="class_t_point_t.html">TPoint</a> segmRight(tround((yMin - rightDown.y) / mParall + rightDown.x),</div>
<div class="line"><span class="lineno">  584</span>                     yMin);</div>
<div class="line"><span class="lineno">  585</span>    <a class="code hl_class" href="class_t_point_t.html">TPoint</a> segmLeft(tround((yMin - leftDown.y) / mParall + leftDown.x), yMin);</div>
<div class="line"><span class="lineno">  586</span>    <span class="keywordtype">int</span> dSegmRight = tfloor(alpha * (segmRight.x + 0.5) +</div>
<div class="line"><span class="lineno">  587</span>                            beta * (segmRight.y + 1) + gammaRight);</div>
<div class="line"><span class="lineno">  588</span>    <span class="keywordtype">int</span> dSegmLeft = tfloor(alpha * (segmLeft.x + 0.5) +</div>
<div class="line"><span class="lineno">  589</span>                           beta * (segmLeft.y + 1) + gammaLeft);</div>
<div class="line"><span class="lineno">  590</span>    <span class="keywordflow">while</span> (segmRight.y &lt;= yMax) {</div>
<div class="line"><span class="lineno">  591</span>      <span class="keywordtype">int</span> xMin, xMax;</div>
<div class="line"><span class="lineno">  592</span>      <span class="keywordflow">if</span> (k &gt; 0) {</div>
<div class="line"><span class="lineno">  593</span>        xMin = std::max(a.x + segmLeft.x, 0);        <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  594</span>        xMax = std::min(a.x + segmRight.x, lx - 1);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  595</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  596</span>        xMin = std::max(a.x - segmRight.x, 0);  <span class="comment">//  clipping x + ritorno alle</span></div>
<div class="line"><span class="lineno">  597</span>        xMax = std::min(a.x - segmLeft.x, lx - 1);  <span class="comment">//   coordinate &quot;di schermo&quot;</span></div>
<div class="line"><span class="lineno">  598</span>      }</div>
<div class="line"><span class="lineno">  599</span> </div>
<div class="line"><span class="lineno">  600</span>      TPixel32 *p = ras-&gt;pixels(segmRight.y + a.y) + xMin;</div>
<div class="line"><span class="lineno">  601</span>      TPixel32 *q = p + (xMax - xMin);</div>
<div class="line"><span class="lineno">  602</span> </div>
<div class="line"><span class="lineno">  603</span>      <span class="keywordflow">while</span> (p &lt;= q) *p++ = col;</div>
<div class="line"><span class="lineno">  604</span> </div>
<div class="line"><span class="lineno">  605</span>      <span class="keywordflow">if</span> (dSegmRight &lt;= 0)  <span class="comment">//  segmRight a NordEst</span></div>
<div class="line"><span class="lineno">  606</span>      {</div>
<div class="line"><span class="lineno">  607</span>        dSegmRight = dSegmRight + incNE;</div>
<div class="line"><span class="lineno">  608</span>        segmRight.x++;</div>
<div class="line"><span class="lineno">  609</span>      } <span class="keywordflow">else</span>  <span class="comment">//  segmRight a Nord</span></div>
<div class="line"><span class="lineno">  610</span>      {</div>
<div class="line"><span class="lineno">  611</span>        dSegmRight = dSegmRight + incN;</div>
<div class="line"><span class="lineno">  612</span>      }</div>
<div class="line"><span class="lineno">  613</span>      segmRight.y++;</div>
<div class="line"><span class="lineno">  614</span> </div>
<div class="line"><span class="lineno">  615</span>      <span class="keywordflow">if</span> (dSegmLeft &lt;= 0)  <span class="comment">//  segmLeft a NordEst</span></div>
<div class="line"><span class="lineno">  616</span>      {</div>
<div class="line"><span class="lineno">  617</span>        dSegmLeft = dSegmLeft + incNE;</div>
<div class="line"><span class="lineno">  618</span>        segmLeft.x++;</div>
<div class="line"><span class="lineno">  619</span>      } <span class="keywordflow">else</span>  <span class="comment">//  segmLeft a Nord</span></div>
<div class="line"><span class="lineno">  620</span>      {</div>
<div class="line"><span class="lineno">  621</span>        dSegmLeft = dSegmLeft + incN;</div>
<div class="line"><span class="lineno">  622</span>      }</div>
<div class="line"><span class="lineno">  623</span>    }</div>
<div class="line"><span class="lineno">  624</span>  }</div>
<div class="line"><span class="lineno">  625</span> </div>
<div class="line"><span class="lineno">  626</span>  <span class="comment">// ----  parallelogrammoide circolare (in alternativa a parallelogramma)</span></div>
<div class="line"><span class="lineno">  627</span> </div>
<div class="line"><span class="lineno">  628</span>  <span class="comment">// N.B. coordinate di schermo (riflessione per k&lt;0 )</span></div>
<div class="line"><span class="lineno">  629</span> </div>
<div class="line"><span class="lineno">  630</span>  yMin = std::max(b.y - cutIn, 0);</div>
<div class="line"><span class="lineno">  631</span>  yMax = std::min(a.y + cutIn, ly - 1);</div>
<div class="line"><span class="lineno">  632</span>  <span class="keywordflow">for</span> (y = yMin; y &lt;= yMax; y++) {</div>
<div class="line"><span class="lineno">  633</span>    <span class="keywordtype">int</span> xMin, xMax;</div>
<div class="line"><span class="lineno">  634</span>    <span class="keywordflow">if</span> (k &gt; 0) {</div>
<div class="line"><span class="lineno">  635</span>      xMin = std::max(a.x - halfCord.getCord(abs(y - a.y)), 0);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  636</span>      xMax = std::min(b.x + halfCord.getCord(abs(b.y - y)),</div>
<div class="line"><span class="lineno">  637</span>                      lx - 1);  <span class="comment">//  clipping x</span></div>
<div class="line"><span class="lineno">  638</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  639</span>      xMin = std::max(b.x - halfCord.getCord(abs(b.y - y)),</div>
<div class="line"><span class="lineno">  640</span>                      0);  <span class="comment">//  clipping x + ritorno alle</span></div>
<div class="line"><span class="lineno">  641</span>      xMax = std::min(a.x + halfCord.getCord(abs(y - a.y)),</div>
<div class="line"><span class="lineno">  642</span>                      lx - 1);  <span class="comment">//   coordinate &quot;di schermo&quot;</span></div>
<div class="line"><span class="lineno">  643</span>    }</div>
<div class="line"><span class="lineno">  644</span>    TPixel32 *p         = ras-&gt;pixels(y) + xMin;</div>
<div class="line"><span class="lineno">  645</span>    TPixel32 *q         = p + (xMax - xMin);</div>
<div class="line"><span class="lineno">  646</span>    <span class="keywordflow">while</span> (p &lt;= q) *p++ = col;</div>
<div class="line"><span class="lineno">  647</span>  }</div>
<div class="line"><span class="lineno">  648</span>  ras-&gt;unlock();</div>
<div class="line"><span class="lineno">  649</span>}</div>
<div class="ttc" id="aclass_half_cord_html"><div class="ttname"><a href="class_half_cord.html">HalfCord</a></div><div class="ttdef"><b>Definition:</b> brush.cpp:8</div></div>
<div class="ttc" id="aclass_t_point_t_html"><div class="ttname"><a href="class_t_point_t.html">TPointT&lt; int &gt;</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaea09eab581fd066c34b2b2ecec92f41" name="aaea09eab581fd066c34b2b2ecec92f41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaea09eab581fd066c34b2b2ecec92f41">&#9670;&nbsp;</a></span>checkBoard()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::checkBoard </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TPixel32 &amp;&#160;</td>
          <td class="paramname"><em>pix1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TPixel32 &amp;&#160;</td>
          <td class="paramname"><em>pix2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_dimension_t.html">TDimensionD</a> &amp;&#160;</td>
          <td class="paramname"><em>dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_point_t.html">TPointD</a> &amp;&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make a checkoboard in <b>rout</b>. </p>
<p >Two variables <b>TPixel32</b> describe the checkboard color, <b>TDimension</b> are checkboard dimension and <b>TPoinD</b> the position </p><div class="fragment"></div><!-- fragment --> <div class="fragment"><div class="line"><span class="lineno">   81</span>                                                                     {</div>
<div class="line"><span class="lineno">   82</span>  <span class="comment">// assert(offset.x&lt;=dim.lx &amp;&amp; offset.y&lt;=dim.ly);</span></div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> rout32 = rout;</div>
<div class="line"><span class="lineno">   85</span>  <span class="keywordflow">if</span> (rout32)</div>
<div class="line"><span class="lineno">   86</span>    do_checkBoard&lt;TPixel32&gt;(rout32, pix1, pix2, dim, offset);</div>
<div class="line"><span class="lineno">   87</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   88</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> rout64 = rout;</div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">if</span> (rout64)</div>
<div class="line"><span class="lineno">   90</span>      do_checkBoard&lt;TPixel64&gt;(rout64, toPixel64(pix1), toPixel64(pix2), dim,</div>
<div class="line"><span class="lineno">   91</span>                              offset);</div>
<div class="line"><span class="lineno">   92</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   93</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">   94</span>  }</div>
<div class="line"><span class="lineno">   95</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a224ebd85bbce4f5eb5085ecd79d5f76c" name="a224ebd85bbce4f5eb5085ecd79d5f76c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a224ebd85bbce4f5eb5085ecd79d5f76c">&#9670;&nbsp;</a></span>colorburn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::colorburn </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rdown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  302</span>                                           {</div>
<div class="line"><span class="lineno">  303</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32   = rup;</div>
<div class="line"><span class="lineno">  304</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> down32 = rdown;</div>
<div class="line"><span class="lineno">  305</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32  = rout;</div>
<div class="line"><span class="lineno">  306</span>  <span class="keywordflow">if</span> (up32 &amp;&amp; down32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno">  307</span>    FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  308</span>    <span class="comment">//  downPix-&gt;r=0;</span></div>
<div class="line"><span class="lineno">  309</span>    <span class="comment">//  downPix-&gt;g=255;</span></div>
<div class="line"><span class="lineno">  310</span>    <span class="comment">//  downPix-&gt;b=0;</span></div>
<div class="line"><span class="lineno">  311</span>    <span class="keywordtype">double</span> r, g, b;</div>
<div class="line"><span class="lineno">  312</span>    <span class="keywordflow">if</span> (upPix-&gt;m) {</div>
<div class="line"><span class="lineno">  313</span>      <span class="keywordflow">if</span> (downPix-&gt;r == 0 || downPix-&gt;r == 255)</div>
<div class="line"><span class="lineno">  314</span>        r = downPix-&gt;r;</div>
<div class="line"><span class="lineno">  315</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (upPix-&gt;r)</div>
<div class="line"><span class="lineno">  316</span>        r = 255 - (((255 - downPix-&gt;r) &lt;&lt; 8) / (double)upPix-&gt;r);</div>
<div class="line"><span class="lineno">  317</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  318</span>        r = 0;</div>
<div class="line"><span class="lineno">  319</span>      <span class="keywordflow">if</span> (downPix-&gt;g == 0 || downPix-&gt;g == 255)</div>
<div class="line"><span class="lineno">  320</span>        g = downPix-&gt;g;</div>
<div class="line"><span class="lineno">  321</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (upPix-&gt;g)</div>
<div class="line"><span class="lineno">  322</span>        g = 255 - (((255 - downPix-&gt;g) &lt;&lt; 8) / (double)upPix-&gt;g);</div>
<div class="line"><span class="lineno">  323</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  324</span>        g = 0;</div>
<div class="line"><span class="lineno">  325</span>      <span class="keywordflow">if</span> (downPix-&gt;b == 0 || downPix-&gt;b == 255)</div>
<div class="line"><span class="lineno">  326</span>        b = downPix-&gt;b;</div>
<div class="line"><span class="lineno">  327</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (upPix-&gt;b)</div>
<div class="line"><span class="lineno">  328</span>        b = 255 - (((255 - downPix-&gt;b) &lt;&lt; 8) / (double)upPix-&gt;b);</div>
<div class="line"><span class="lineno">  329</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  330</span>        b = 0;</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>      <span class="keywordflow">if</span> (upPix-&gt;m != 255) {</div>
<div class="line"><span class="lineno">  333</span>        TPixel32 tmpPix;</div>
<div class="line"><span class="lineno">  334</span>        tmpPix.r = (UCHAR)tcrop&lt;double&gt;(r, .0, 255.0);</div>
<div class="line"><span class="lineno">  335</span>        tmpPix.g = (UCHAR)tcrop&lt;double&gt;(g, .0, 255.0);</div>
<div class="line"><span class="lineno">  336</span>        tmpPix.b = (UCHAR)tcrop&lt;double&gt;(b, .0, 255.0);</div>
<div class="line"><span class="lineno">  337</span>        tmpPix.m = upPix-&gt;m;</div>
<div class="line"><span class="lineno">  338</span>        ;</div>
<div class="line"><span class="lineno">  339</span>        overPix&lt;TPixel32, UCHAR&gt;(*outPix, *downPix, tmpPix);</div>
<div class="line"><span class="lineno">  340</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  341</span>        outPix-&gt;r = (UCHAR)tcrop&lt;double&gt;(r, .0, 255.0);</div>
<div class="line"><span class="lineno">  342</span>        outPix-&gt;g = (UCHAR)tcrop&lt;double&gt;(g, .0, 255.0);</div>
<div class="line"><span class="lineno">  343</span>        outPix-&gt;b = (UCHAR)tcrop&lt;double&gt;(b, .0, 255.0);</div>
<div class="line"><span class="lineno">  344</span>        outPix-&gt;m = downPix-&gt;m;</div>
<div class="line"><span class="lineno">  345</span>      }</div>
<div class="line"><span class="lineno">  346</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  347</span>      outPix = downPix;</div>
<div class="line"><span class="lineno">  348</span>    }</div>
<div class="line"><span class="lineno">  349</span>    FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno">  350</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  351</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64   = rup;</div>
<div class="line"><span class="lineno">  352</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> down64 = rdown;</div>
<div class="line"><span class="lineno">  353</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64  = rout;</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>    <span class="keywordflow">if</span> (up64 &amp;&amp; down64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno">  356</span>      FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  357</span>      <span class="keywordtype">double</span> r, g, b;</div>
<div class="line"><span class="lineno">  358</span>      <span class="keywordflow">if</span> (upPix-&gt;m) {</div>
<div class="line"><span class="lineno">  359</span>        <span class="keywordflow">if</span> (downPix-&gt;r == 0 || downPix-&gt;r == 65535)</div>
<div class="line"><span class="lineno">  360</span>          r = downPix-&gt;r;</div>
<div class="line"><span class="lineno">  361</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (upPix-&gt;r)</div>
<div class="line"><span class="lineno">  362</span>          r = 65535 - 65536 * ((65535.0 - downPix-&gt;r) / (<span class="keywordtype">double</span>)upPix-&gt;r);</div>
<div class="line"><span class="lineno">  363</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  364</span>          r = 0;</div>
<div class="line"><span class="lineno">  365</span>        <span class="keywordflow">if</span> (downPix-&gt;g == 0 || downPix-&gt;g == 65535)</div>
<div class="line"><span class="lineno">  366</span>          g = downPix-&gt;g;</div>
<div class="line"><span class="lineno">  367</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (upPix-&gt;g)</div>
<div class="line"><span class="lineno">  368</span>          g = 65535 - 65536 * ((65535.0 - downPix-&gt;g) / (<span class="keywordtype">double</span>)upPix-&gt;g);</div>
<div class="line"><span class="lineno">  369</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  370</span>          g = 0;</div>
<div class="line"><span class="lineno">  371</span>        <span class="keywordflow">if</span> (downPix-&gt;b == 0 || downPix-&gt;b == 65535)</div>
<div class="line"><span class="lineno">  372</span>          b = downPix-&gt;b;</div>
<div class="line"><span class="lineno">  373</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (upPix-&gt;b)</div>
<div class="line"><span class="lineno">  374</span>          b = 65535 - 65536 * ((65535.0 - downPix-&gt;b) / (<span class="keywordtype">double</span>)upPix-&gt;b);</div>
<div class="line"><span class="lineno">  375</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  376</span>          b = 0;</div>
<div class="line"><span class="lineno">  377</span> </div>
<div class="line"><span class="lineno">  378</span>        <span class="keywordflow">if</span> (upPix-&gt;m != 65535) {</div>
<div class="line"><span class="lineno">  379</span>          TPixel64 tmpPix;</div>
<div class="line"><span class="lineno">  380</span>          tmpPix.r = (USHORT)tcrop&lt;double&gt;(r, .0, 65535.0);</div>
<div class="line"><span class="lineno">  381</span>          tmpPix.g = (USHORT)tcrop&lt;double&gt;(g, .0, 65535.0);</div>
<div class="line"><span class="lineno">  382</span>          tmpPix.b = (USHORT)tcrop&lt;double&gt;(b, .0, 65535.0);</div>
<div class="line"><span class="lineno">  383</span>          tmpPix.m = upPix-&gt;m;</div>
<div class="line"><span class="lineno">  384</span>          overPix&lt;TPixel64, USHORT&gt;(*outPix, *downPix, tmpPix);</div>
<div class="line"><span class="lineno">  385</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  386</span>          outPix-&gt;r = (USHORT)tcrop&lt;double&gt;(r, .0, 65535.0);</div>
<div class="line"><span class="lineno">  387</span>          outPix-&gt;g = (USHORT)tcrop&lt;double&gt;(g, .0, 65535.0);</div>
<div class="line"><span class="lineno">  388</span>          outPix-&gt;b = (USHORT)tcrop&lt;double&gt;(b, .0, 65535.0);</div>
<div class="line"><span class="lineno">  389</span>          outPix-&gt;m = downPix-&gt;m;</div>
<div class="line"><span class="lineno">  390</span>        }</div>
<div class="line"><span class="lineno">  391</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  392</span>        outPix = downPix;</div>
<div class="line"><span class="lineno">  393</span>      }</div>
<div class="line"><span class="lineno">  394</span>      FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno">  395</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  396</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::color burn invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno">  397</span>  }</div>
<div class="line"><span class="lineno">  398</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0809dd38dcd6506bcfbd7c07b17220e7" name="a0809dd38dcd6506bcfbd7c07b17220e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0809dd38dcd6506bcfbd7c07b17220e7">&#9670;&nbsp;</a></span>colordodge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::colordodge </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rdown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  235</span>                                            {</div>
<div class="line"><span class="lineno">  236</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32   = rup;</div>
<div class="line"><span class="lineno">  237</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> down32 = rdown;</div>
<div class="line"><span class="lineno">  238</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32  = rout;</div>
<div class="line"><span class="lineno">  239</span>  <span class="keywordflow">if</span> (up32 &amp;&amp; down32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno">  240</span>    FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>    USHORT r, g, b, m;</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>    r = (USHORT)((downPix-&gt;r &lt;&lt; 8) / (256.0 - upPix-&gt;r));</div>
<div class="line"><span class="lineno">  245</span>    g = (USHORT)((downPix-&gt;g &lt;&lt; 8) / (256.0 - upPix-&gt;g));</div>
<div class="line"><span class="lineno">  246</span>    b = (USHORT)((downPix-&gt;b &lt;&lt; 8) / (256.0 - upPix-&gt;b));</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>    m = downPix-&gt;m + upPix-&gt;m;</div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span>    outPix-&gt;r = (UCHAR)tcrop&lt;USHORT&gt;(r, 0, 255);</div>
<div class="line"><span class="lineno">  251</span>    outPix-&gt;g = (UCHAR)tcrop&lt;USHORT&gt;(g, 0, 255);</div>
<div class="line"><span class="lineno">  252</span>    outPix-&gt;b = (UCHAR)tcrop&lt;USHORT&gt;(b, 0, 255);</div>
<div class="line"><span class="lineno">  253</span>    outPix-&gt;m = (UCHAR)tcrop&lt;USHORT&gt;(m, 0, 255);</div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>    FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno">  256</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  257</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64   = rup;</div>
<div class="line"><span class="lineno">  258</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> down64 = rdown;</div>
<div class="line"><span class="lineno">  259</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64  = rout;</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span>    <span class="keywordflow">if</span> (up64 &amp;&amp; down64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno">  262</span>      FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>      TINT32 r, g, b, m;</div>
<div class="line"><span class="lineno">  265</span>      r = (TINT32)(65536.0 * (downPix-&gt;r / (65536.0 - upPix-&gt;r)));</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>      g = (TINT32)(65536.0 * (downPix-&gt;g / (65536.0 - upPix-&gt;g)));</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>      b = (TINT32)(65536.0 * (downPix-&gt;b / (65536.0 - upPix-&gt;b)));</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>      m = downPix-&gt;m + upPix-&gt;m;</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>      outPix-&gt;r = (USHORT)tcrop&lt;TINT32&gt;(r, 0, 0xffff);</div>
<div class="line"><span class="lineno">  274</span>      outPix-&gt;g = (USHORT)tcrop&lt;TINT32&gt;(g, 0, 0xffff);</div>
<div class="line"><span class="lineno">  275</span>      outPix-&gt;b = (USHORT)tcrop&lt;TINT32&gt;(b, 0, 0xffff);</div>
<div class="line"><span class="lineno">  276</span>      outPix-&gt;m = (USHORT)tcrop&lt;TINT32&gt;(m, 0, 0xffff);</div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>      FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno">  279</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  280</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> up8   = rup;</div>
<div class="line"><span class="lineno">  281</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> down8 = rdown;</div>
<div class="line"><span class="lineno">  282</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> out8  = rout;</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>      <span class="keywordflow">if</span> (up8 &amp;&amp; down8 &amp;&amp; out8) {</div>
<div class="line"><span class="lineno">  285</span>        FOR_EACH_PIXEL_8_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  286</span>        USHORT value;</div>
<div class="line"><span class="lineno">  287</span>        <span class="keywordflow">if</span> (downPix-&gt;value)</div>
<div class="line"><span class="lineno">  288</span>          value = (USHORT)((downPix-&gt;value &lt;&lt; 8) / (255.0 - upPix-&gt;value));</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>        outPix-&gt;value = (UCHAR)tcrop&lt;USHORT&gt;(value, 0, 255);</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span>        FOR_EACH_PIXEL_8_END_LOOP</div>
<div class="line"><span class="lineno">  293</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  294</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::color dodge invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno">  295</span>    }</div>
<div class="line"><span class="lineno">  296</span>  }</div>
<div class="line"><span class="lineno">  297</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1dfdba06d4f71d86755d8e0833a7a071" name="a1dfdba06d4f71d86755d8e0833a7a071"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dfdba06d4f71d86755d8e0833a7a071">&#9670;&nbsp;</a></span>computeBBox()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::computeBBox </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>ras</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_rect_t.html">TRect</a> &amp;&#160;</td>
          <td class="paramname"><em>bbox</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get <b>bbox</b> of <b>ras</b> raster. </p>
<div class="fragment"><div class="line"><span class="lineno">  190</span>                                                {</div>
<div class="line"><span class="lineno">  191</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> ras32 = ras;</div>
<div class="line"><span class="lineno">  192</span>  <span class="keywordflow">if</span> (ras32) {</div>
<div class="line"><span class="lineno">  193</span>    ::computeBBox&lt;TPixel32, UCHAR&gt;(ras32, bbox);</div>
<div class="line"><span class="lineno">  194</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  195</span>  }</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> ras64 = ras;</div>
<div class="line"><span class="lineno">  198</span>  <span class="keywordflow">if</span> (ras64) {</div>
<div class="line"><span class="lineno">  199</span>    ::computeBBox&lt;TPixel64, USHORT&gt;(ras64, bbox);</div>
<div class="line"><span class="lineno">  200</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  201</span>  }</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRasterCM32P</a> rasCM32 = ras;</div>
<div class="line"><span class="lineno">  204</span>  <span class="keywordflow">if</span> (rasCM32) {</div>
<div class="line"><span class="lineno">  205</span>    computeBBoxCM32(rasCM32, bbox);</div>
<div class="line"><span class="lineno">  206</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  207</span>  }</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> ras8 = ras;</div>
<div class="line"><span class="lineno">  210</span>  <span class="keywordflow">if</span> (ras8) {</div>
<div class="line"><span class="lineno">  211</span>    bbox = ras-&gt;getBounds();</div>
<div class="line"><span class="lineno">  212</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  213</span>  }</div>
<div class="line"><span class="lineno">  214</span>  assert(0);</div>
<div class="line"><span class="lineno">  215</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae62af9d021cc9d4428b4a996c2c40918" name="ae62af9d021cc9d4428b4a996c2c40918"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae62af9d021cc9d4428b4a996c2c40918">&#9670;&nbsp;</a></span>convert() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::convert </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRaster32P</a> &amp;&#160;</td>
          <td class="paramname"><em>rasOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;&#160;</td>
          <td class="paramname"><em>rasIn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a>&#160;</td>
          <td class="paramname"><em>palette</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>transparencyCheck</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   64</span>                                                                    {</div>
<div class="line"><span class="lineno">   65</span>  <span class="keywordtype">int</span> count = palette-&gt;getStyleCount();</div>
<div class="line"><span class="lineno">   66</span>  <span class="keywordtype">int</span> count2 =</div>
<div class="line"><span class="lineno">   67</span>      std::max({count, TPixelCM32::getMaxInk(), TPixelCM32::getMaxPaint()});</div>
<div class="line"><span class="lineno">   68</span> </div>
<div class="line"><span class="lineno">   69</span>  <span class="comment">// per poter utilizzare lo switch (piu&#39; efficiente) si utilizza 255</span></div>
<div class="line"><span class="lineno">   70</span>  <span class="comment">// anziche&#39; TPixelCM32::getMaxTone()</span></div>
<div class="line"><span class="lineno">   71</span>  assert(TPixelCM32::getMaxTone() == 255);</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>  <span class="keywordtype">int</span> rasLx = rasOut-&gt;getLx();</div>
<div class="line"><span class="lineno">   74</span>  <span class="keywordtype">int</span> rasLy = rasOut-&gt;getLy();</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>  rasOut-&gt;lock();</div>
<div class="line"><span class="lineno">   77</span>  rasIn-&gt;lock();</div>
<div class="line"><span class="lineno">   78</span><span class="preprocessor">#ifdef USE_SSE2</span></div>
<div class="line"><span class="lineno">   79</span>  <span class="keywordflow">if</span> (TSystem::getCPUExtensions() &amp; TSystem::CpuSupportsSse2) {</div>
<div class="line"><span class="lineno">   80</span>    __m128i zeros = _mm_setzero_si128();</div>
<div class="line"><span class="lineno">   81</span>    TPixelFloat *paints =</div>
<div class="line"><span class="lineno">   82</span>        (TPixelFloat *)_aligned_malloc(count2 * <span class="keyword">sizeof</span>(TPixelFloat), 16);</div>
<div class="line"><span class="lineno">   83</span>    TPixelFloat *inks =</div>
<div class="line"><span class="lineno">   84</span>        (TPixelFloat *)_aligned_malloc(count2 * <span class="keyword">sizeof</span>(TPixelFloat), 16);</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>    std::vector&lt;TPixel32&gt; paints2(count2);</div>
<div class="line"><span class="lineno">   87</span>    std::vector&lt;TPixel32&gt; inks2(count2);</div>
<div class="line"><span class="lineno">   88</span>    <span class="keywordflow">if</span> (transparencyCheck) {</div>
<div class="line"><span class="lineno">   89</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; palette-&gt;getStyleCount(); i++) {</div>
<div class="line"><span class="lineno">   90</span>        paints2[i] = c_transparencyCheckPaint;</div>
<div class="line"><span class="lineno">   91</span>        inks2[i]   = c_transparencyCheckInk;</div>
<div class="line"><span class="lineno">   92</span>        paints[i]  = TPixelFloat(paints2[i]);</div>
<div class="line"><span class="lineno">   93</span>        inks[i]    = TPixelFloat(inks2[i]);</div>
<div class="line"><span class="lineno">   94</span>      }</div>
<div class="line"><span class="lineno">   95</span>      paints2[0] = TPixel32::Transparent;</div>
<div class="line"><span class="lineno">   96</span>      paints[0]  = TPixelFloat(TPixel32::Transparent);</div>
<div class="line"><span class="lineno">   97</span>    }</div>
<div class="line"><span class="lineno">   98</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">   99</span><span class="comment">else if (true)</span></div>
<div class="line"><span class="lineno">  100</span><span class="comment">{</span></div>
<div class="line"><span class="lineno">  101</span><span class="comment">            for(int i=0;i&lt;palette-&gt;getStyleCount();i++)</span></div>
<div class="line"><span class="lineno">  102</span><span class="comment">{</span></div>
<div class="line"><span class="lineno">  103</span><span class="comment">paints2[i] = c_transparencyCheckPaint;</span></div>
<div class="line"><span class="lineno">  104</span><span class="comment">                    inks2[i]   = c_transparencyCheckInk;</span></div>
<div class="line"><span class="lineno">  105</span><span class="comment">paints[i]  = TPixelFloat(paints2[i]);</span></div>
<div class="line"><span class="lineno">  106</span><span class="comment">                    inks[i]    = TPixelFloat(inks2[i]);</span></div>
<div class="line"><span class="lineno">  107</span><span class="comment">            paints2[i] = TPixel32::Transparent;</span></div>
<div class="line"><span class="lineno">  108</span><span class="comment">            paints[i] = TPixelFloat(TPixel32::Transparent);</span></div>
<div class="line"><span class="lineno">  109</span><span class="comment">}</span></div>
<div class="line"><span class="lineno">  110</span><span class="comment">            paints2[0] = TPixel32::Transparent;</span></div>
<div class="line"><span class="lineno">  111</span><span class="comment">            paints[0] = TPixelFloat(TPixel32::Transparent);</span></div>
<div class="line"><span class="lineno">  112</span><span class="comment">}</span></div>
<div class="line"><span class="lineno">  113</span><span class="comment">*/</span></div>
<div class="line"><span class="lineno">  114</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  115</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; palette-&gt;getStyleCount(); i++) {</div>
<div class="line"><span class="lineno">  116</span>        TPixel32 color = ::premultiply(palette-&gt;getStyle(i)-&gt;getAverageColor());</div>
<div class="line"><span class="lineno">  117</span>        paints[i] = inks[i] = TPixelFloat(color);</div>
<div class="line"><span class="lineno">  118</span>        paints2[i] = inks2[i] = color;</div>
<div class="line"><span class="lineno">  119</span>      }</div>
<div class="line"><span class="lineno">  120</span> </div>
<div class="line"><span class="lineno">  121</span>    <span class="keywordtype">float</span> maxTone     = (float)TPixelCM32::getMaxTone();</div>
<div class="line"><span class="lineno">  122</span>    __m128 den_packed = _mm_load1_ps(&amp;maxTone);</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; rasLy; ++y) {</div>
<div class="line"><span class="lineno">  125</span>      TPixel32 *pix32   = rasOut-&gt;pixels(y);</div>
<div class="line"><span class="lineno">  126</span>      <a class="code hl_class" href="class_t_pixel_c_m32.html">TPixelCM32</a> *pixIn = rasIn-&gt;pixels(y);</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>      <a class="code hl_class" href="class_t_pixel_c_m32.html">TPixelCM32</a> *endPixIn = pixIn + rasLx;</div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>      <span class="keywordflow">while</span> (pixIn &lt; endPixIn) {</div>
<div class="line"><span class="lineno">  131</span>        <span class="keywordtype">int</span> tt = pixIn-&gt;getTone();</div>
<div class="line"><span class="lineno">  132</span>        <span class="keywordtype">int</span> p  = pixIn-&gt;getPaint();</div>
<div class="line"><span class="lineno">  133</span>        <span class="keywordtype">int</span> i  = pixIn-&gt;getInk();</div>
<div class="line"><span class="lineno">  134</span>        <span class="keywordflow">switch</span> (tt) {</div>
<div class="line"><span class="lineno">  135</span>        <span class="keywordflow">case</span> 255:</div>
<div class="line"><span class="lineno">  136</span>          *pix32++ = paints2[p];</div>
<div class="line"><span class="lineno">  137</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  138</span>        <span class="keywordflow">case</span> 0:</div>
<div class="line"><span class="lineno">  139</span>          *pix32++ = inks2[i];</div>
<div class="line"><span class="lineno">  140</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  141</span>        <span class="keywordflow">default</span>: {</div>
<div class="line"><span class="lineno">  142</span>          <span class="keywordtype">float</span> t         = (float)tt;</div>
<div class="line"><span class="lineno">  143</span>          __m128 a_packed = _mm_load_ps((<span class="keywordtype">float</span> *)&amp;(inks[i]));</div>
<div class="line"><span class="lineno">  144</span>          __m128 b_packed = _mm_load_ps((<span class="keywordtype">float</span> *)&amp;(paints[p]));</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>          __m128 num_packed  = _mm_load1_ps(&amp;t);</div>
<div class="line"><span class="lineno">  147</span>          __m128 diff_packed = _mm_sub_ps(den_packed, num_packed);</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>          <span class="comment">// calcola in modo vettoriale out = ((den-num)*a + num*b)/den</span></div>
<div class="line"><span class="lineno">  150</span>          __m128 outPix_packed = _mm_mul_ps(diff_packed, a_packed);</div>
<div class="line"><span class="lineno">  151</span>          __m128 tmpPix_packed = _mm_mul_ps(num_packed, b_packed);</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>          outPix_packed = _mm_add_ps(outPix_packed, tmpPix_packed);</div>
<div class="line"><span class="lineno">  154</span>          outPix_packed = _mm_div_ps(outPix_packed, den_packed);</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>          <span class="comment">// converte i canali da float a char</span></div>
<div class="line"><span class="lineno">  157</span>          __m128i outPix_packed_i = _mm_cvtps_epi32(outPix_packed);</div>
<div class="line"><span class="lineno">  158</span>          outPix_packed_i         = _mm_packs_epi32(outPix_packed_i, zeros);</div>
<div class="line"><span class="lineno">  159</span>          outPix_packed_i         = _mm_packus_epi16(outPix_packed_i, zeros);</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>          *(DWORD *)(pix32) = _mm_cvtsi128_si32(outPix_packed_i);</div>
<div class="line"><span class="lineno">  162</span>          ++pix32;</div>
<div class="line"><span class="lineno">  163</span>        }</div>
<div class="line"><span class="lineno">  164</span>        }</div>
<div class="line"><span class="lineno">  165</span>        ++pixIn;</div>
<div class="line"><span class="lineno">  166</span>      }</div>
<div class="line"><span class="lineno">  167</span>    }</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>    _aligned_free(paints);</div>
<div class="line"><span class="lineno">  170</span>    _aligned_free(inks);</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>  } <span class="keywordflow">else</span>  <span class="comment">// SSE2 not supported</span></div>
<div class="line"><span class="lineno">  173</span><span class="preprocessor">#endif    </span><span class="comment">// _WIN32</span></div>
<div class="line"><span class="lineno">  174</span>  {</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>    std::vector&lt;TPixel32&gt; paints(count2, TPixel32(255, 0, 0));</div>
<div class="line"><span class="lineno">  177</span>    std::vector&lt;TPixel32&gt; inks(count2, TPixel32(255, 0, 0));</div>
<div class="line"><span class="lineno">  178</span>    <span class="keywordflow">if</span> (transparencyCheck) {</div>
<div class="line"><span class="lineno">  179</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; palette-&gt;getStyleCount(); i++) {</div>
<div class="line"><span class="lineno">  180</span>        paints[i] = c_transparencyCheckPaint;</div>
<div class="line"><span class="lineno">  181</span>        inks[i]   = c_transparencyCheckInk;</div>
<div class="line"><span class="lineno">  182</span>      }</div>
<div class="line"><span class="lineno">  183</span>      paints[0] = TPixel32::Transparent;</div>
<div class="line"><span class="lineno">  184</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  185</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; palette-&gt;getStyleCount(); i++)</div>
<div class="line"><span class="lineno">  186</span>        paints[i] = inks[i] =</div>
<div class="line"><span class="lineno">  187</span>            ::premultiply(palette-&gt;getStyle(i)-&gt;getAverageColor());</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; rasLy; ++y) {</div>
<div class="line"><span class="lineno">  190</span>      TPixel32 *pix32      = rasOut-&gt;pixels(y);</div>
<div class="line"><span class="lineno">  191</span>      <a class="code hl_class" href="class_t_pixel_c_m32.html">TPixelCM32</a> *pixIn    = rasIn-&gt;pixels(y);</div>
<div class="line"><span class="lineno">  192</span>      <a class="code hl_class" href="class_t_pixel_c_m32.html">TPixelCM32</a> *endPixIn = pixIn + rasLx;</div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>      <span class="keywordflow">while</span> (pixIn &lt; endPixIn) {</div>
<div class="line"><span class="lineno">  195</span>        <span class="keywordtype">int</span> t = pixIn-&gt;getTone();</div>
<div class="line"><span class="lineno">  196</span>        <span class="keywordtype">int</span> p = pixIn-&gt;getPaint();</div>
<div class="line"><span class="lineno">  197</span>        <span class="keywordtype">int</span> i = pixIn-&gt;getInk();</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>        <span class="keywordflow">if</span> (t == TPixelCM32::getMaxTone())</div>
<div class="line"><span class="lineno">  200</span>          *pix32++ = paints[p];</div>
<div class="line"><span class="lineno">  201</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (t == 0)</div>
<div class="line"><span class="lineno">  202</span>          *pix32++ = inks[i];</div>
<div class="line"><span class="lineno">  203</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  204</span>          *pix32++ = blend(inks[i], paints[p], t, TPixelCM32::getMaxTone());</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>        ++pixIn;</div>
<div class="line"><span class="lineno">  207</span>      }</div>
<div class="line"><span class="lineno">  208</span>    }</div>
<div class="line"><span class="lineno">  209</span>  }</div>
<div class="line"><span class="lineno">  210</span>  rasOut-&gt;unlock();</div>
<div class="line"><span class="lineno">  211</span>  rasIn-&gt;unlock();</div>
<div class="line"><span class="lineno">  212</span>}</div>
<div class="ttc" id="aclass_t_pixel_c_m32_html"><div class="ttname"><a href="class_t_pixel_c_m32.html">TPixelCM32</a></div><div class="ttdoc">Toonz5.0 color-map, 12+12+8 bits (ink,paint,tone)</div><div class="ttdef"><b>Definition:</b> tpixelcm.h:22</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a86eca3417474265356482b543841bc90" name="a86eca3417474265356482b543841bc90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86eca3417474265356482b543841bc90">&#9670;&nbsp;</a></span>convert() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::convert </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRaster32P</a> &amp;&#160;</td>
          <td class="paramname"><em>rasOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;&#160;</td>
          <td class="paramname"><em>rasIn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a>&#160;</td>
          <td class="paramname"><em>palette</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_rect_t.html">TRect</a> &amp;&#160;</td>
          <td class="paramname"><em>theClipRect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>transparencyCheck</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>applyFx</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  247</span>                                          {</div>
<div class="line"><span class="lineno">  248</span>  assert(palette);</div>
<div class="line"><span class="lineno">  249</span>  assert(rasIn &amp;&amp; rasOut);</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>  <a class="code hl_class" href="class_t_rect_t.html">TRect</a> clipRect(theClipRect);</div>
<div class="line"><span class="lineno">  252</span>  <span class="keywordflow">if</span> (clipRect.isEmpty())</div>
<div class="line"><span class="lineno">  253</span>    clipRect = rasIn-&gt;getBounds();</div>
<div class="line"><span class="lineno">  254</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  255</span>    <span class="keywordflow">if</span> (!clipRect.overlaps(rasIn-&gt;getBounds())) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  256</span>    clipRect = clipRect * rasIn-&gt;getBounds();</div>
<div class="line"><span class="lineno">  257</span>  }</div>
<div class="line"><span class="lineno">  258</span>  <span class="keywordflow">if</span> (clipRect.isEmpty()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span>  <a class="code hl_class" href="class_t_rect_t.html">TRect</a> clipRectIn, clipRectOut;</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>  <span class="keywordflow">if</span> (applyFx &amp;&amp; palette-&gt;getFxRects(clipRect, clipRectIn, clipRectOut)) {</div>
<div class="line"><span class="lineno">  263</span>    <a class="code hl_class" href="class_t_rect_t.html">TRect</a> rAux = clipRectIn;</div>
<div class="line"><span class="lineno">  264</span>    <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> rAuxIn =</div>
<div class="line"><span class="lineno">  265</span>        rasIn-&gt;extract(clipRectIn);  <span class="comment">// la extract modifica clipRectIn</span></div>
<div class="line"><span class="lineno">  266</span>    <span class="keywordflow">if</span> (rAux != clipRectIn &amp;&amp; rAux != rasIn-&gt;getBounds()) {</div>
<div class="line"><span class="lineno">  267</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterCM32P</a> rNew(rAux.getSize());</div>
<div class="line"><span class="lineno">  268</span>      <a class="code hl_class" href="class_t_rect_t.html">TRect</a> tmpRect = clipRectIn - rAux.getP00();</div>
<div class="line"><span class="lineno">  269</span>      rNew-&gt;extract(tmpRect)-&gt;copy(rAuxIn);</div>
<div class="line"><span class="lineno">  270</span>      rAuxIn     = rNew;</div>
<div class="line"><span class="lineno">  271</span>      clipRectIn = rAux;</div>
<div class="line"><span class="lineno">  272</span>    }</div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>    <a class="code hl_class" href="class_t_tile.html">TTile</a> tileIn(rAuxIn, <a class="code hl_function" href="class_t_point_t.html#adbdd512f2e40a9c9f908ced6f4ec5cbd">::convert</a>(clipRectIn.getP00()));</div>
<div class="line"><span class="lineno">  275</span> </div>
<div class="line"><span class="lineno">  276</span>    rAux = clipRectOut;</div>
<div class="line"><span class="lineno">  277</span>    <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> rAuxOut =</div>
<div class="line"><span class="lineno">  278</span>        rasOut-&gt;extract(clipRectOut);  <span class="comment">// la extract modifica clipRectOut</span></div>
<div class="line"><span class="lineno">  279</span>    <a class="code hl_class" href="class_t_tile.html">TTile</a> tileOut(rAuxOut, <a class="code hl_function" href="class_t_point_t.html#adbdd512f2e40a9c9f908ced6f4ec5cbd">::convert</a>(clipRectOut.getP00()));</div>
<div class="line"><span class="lineno">  280</span>    <a class="code hl_function" href="namespace_t_rop.html#a45a08fb48dd7d33ec629d722081d55c6">TRop::convert</a>(tileOut, tileIn, palette, transparencyCheck, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  281</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  282</span>    <a class="code hl_class" href="class_t_rect_t.html">TRect</a> clipRectIn  = clipRect;</div>
<div class="line"><span class="lineno">  283</span>    <a class="code hl_class" href="class_t_rect_t.html">TRect</a> clipRectOut = clipRect;</div>
<div class="line"><span class="lineno">  284</span>    <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> _rasOut  = rasOut-&gt;extract(clipRectOut);</div>
<div class="line"><span class="lineno">  285</span>    <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> _rasIn   = rasIn-&gt;extract(clipRectIn);</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>    <a class="code hl_class" href="class_t_tile.html">TTile</a> t1(_rasOut, <a class="code hl_function" href="class_t_point_t.html#adbdd512f2e40a9c9f908ced6f4ec5cbd">::convert</a>(clipRectOut.getP00()));</div>
<div class="line"><span class="lineno">  288</span>    <a class="code hl_class" href="class_t_tile.html">TTile</a> t2(_rasIn, <a class="code hl_function" href="class_t_point_t.html#adbdd512f2e40a9c9f908ced6f4ec5cbd">::convert</a>(clipRectIn.getP00()));</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>    <a class="code hl_function" href="namespace_t_rop.html#a45a08fb48dd7d33ec629d722081d55c6">TRop::convert</a>(t1, t2, palette, transparencyCheck, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  291</span>  }</div>
<div class="line"><span class="lineno">  292</span>}</div>
<div class="ttc" id="aclass_t_point_t_html_adbdd512f2e40a9c9f908ced6f4ec5cbd"><div class="ttname"><a href="class_t_point_t.html#adbdd512f2e40a9c9f908ced6f4ec5cbd">TPointT::convert</a></div><div class="ttdeci">TPointD convert(const TPoint &amp;p)</div><div class="ttdef"><b>Definition:</b> tgeometry.h:172</div></div>
<div class="ttc" id="aclass_t_rect_t_html"><div class="ttname"><a href="class_t_rect_t.html">TRectT&lt; int &gt;</a></div></div>
<div class="ttc" id="aclass_t_smart_pointer_t_html"><div class="ttname"><a href="class_t_smart_pointer_t.html">TSmartPointerT&lt; TRaster &gt;</a></div></div>
<div class="ttc" id="aclass_t_tile_html"><div class="ttname"><a href="class_t_tile.html">TTile</a></div><div class="ttdef"><b>Definition:</b> ttile.h:20</div></div>
<div class="ttc" id="anamespace_t_rop_html_a45a08fb48dd7d33ec629d722081d55c6"><div class="ttname"><a href="namespace_t_rop.html#a45a08fb48dd7d33ec629d722081d55c6">TRop::convert</a></div><div class="ttdeci">DVAPI void convert(TRasterP dst, const TRasterP &amp;src)</div><div class="ttdoc">Convert src raster in raster type dst.</div><div class="ttdef"><b>Definition:</b> tconvert.cpp:336</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2ffbde782744822c73ea95817bbaf9ed" name="a2ffbde782744822c73ea95817bbaf9ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ffbde782744822c73ea95817bbaf9ed">&#9670;&nbsp;</a></span>convert() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::convert </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_tile.html">TTile</a> &amp;&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_tile.html">TTile</a> &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a>&#160;</td>
          <td class="paramname"><em>plt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>transparencyCheck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>applyFxs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  297</span>                                                          {</div>
<div class="line"><span class="lineno">  298</span>  <span class="comment">// if (dst-&gt;getSize() != src-&gt;getSize())</span></div>
<div class="line"><span class="lineno">  299</span>  <span class="comment">//  throw TRopException(&quot;convert: size mismatch&quot;);</span></div>
<div class="line"><span class="lineno">  300</span> </div>
<div class="line"><span class="lineno">  301</span>  <span class="comment">// assert(plt);</span></div>
<div class="line"><span class="lineno">  302</span>  <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)dst.getRaster())</div>
<div class="line"><span class="lineno">  303</span>    do_convert(dst, src, plt, transparencyCheck, applyFxs);</div>
<div class="line"><span class="lineno">  304</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)dst.getRaster()) {</div>
<div class="line"><span class="lineno">  305</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> aux(dst.getRaster()-&gt;getLx(), dst.getRaster()-&gt;getLy());</div>
<div class="line"><span class="lineno">  306</span>    <a class="code hl_class" href="class_t_tile.html">TTile</a> taux(aux, dst.m_pos);</div>
<div class="line"><span class="lineno">  307</span>    do_convert(taux, src, plt, transparencyCheck, applyFxs);</div>
<div class="line"><span class="lineno">  308</span>    <a class="code hl_function" href="namespace_t_rop.html#a45a08fb48dd7d33ec629d722081d55c6">TRop::convert</a>(dst.getRaster(), aux);</div>
<div class="line"><span class="lineno">  309</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  310</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  311</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a45a08fb48dd7d33ec629d722081d55c6" name="a45a08fb48dd7d33ec629d722081d55c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45a08fb48dd7d33ec629d722081d55c6">&#9670;&nbsp;</a></span>convert() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::convert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert <b>src</b> raster in raster type <b>dst</b>. </p>
<div class="fragment"><div class="line"><span class="lineno">  336</span>                                                    {</div>
<div class="line"><span class="lineno">  337</span>  <span class="keywordflow">if</span> (dst-&gt;getSize() != src-&gt;getSize())</div>
<div class="line"><span class="lineno">  338</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;convert: size mismatch&quot;</span>);</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> dst32   = dst;</div>
<div class="line"><span class="lineno">  341</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> dst8   = dst;</div>
<div class="line"><span class="lineno">  342</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR16P</a> dst16 = dst;</div>
<div class="line"><span class="lineno">  343</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> dst64   = dst;</div>
<div class="line"><span class="lineno">  344</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRasterCM32P</a> dstCm = dst;</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> src32      = src;</div>
<div class="line"><span class="lineno">  347</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> src8      = src;</div>
<div class="line"><span class="lineno">  348</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> src64      = src;</div>
<div class="line"><span class="lineno">  349</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRasterYUV422P</a> srcYUV = src;</div>
<div class="line"><span class="lineno">  350</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRasterYUV422P</a> dstYUV = dst;</div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span>  src-&gt;lock();</div>
<div class="line"><span class="lineno">  353</span>  dst-&gt;lock();</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>  <span class="keywordflow">if</span> (dst64 &amp;&amp; src32)</div>
<div class="line"><span class="lineno">  356</span>    do_convert(dst64, src32);</div>
<div class="line"><span class="lineno">  357</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dst8 &amp;&amp; src32)</div>
<div class="line"><span class="lineno">  358</span>    do_convert(dst8, src32);</div>
<div class="line"><span class="lineno">  359</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dst16 &amp;&amp; src32)</div>
<div class="line"><span class="lineno">  360</span>    do_convert(dst16, src32);</div>
<div class="line"><span class="lineno">  361</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dst32 &amp;&amp; src64)</div>
<div class="line"><span class="lineno">  362</span>    ditherConvert(src64, dst32);</div>
<div class="line"><span class="lineno">  363</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dst16 &amp;&amp; src64)</div>
<div class="line"><span class="lineno">  364</span>    do_convert(dst16, src64);</div>
<div class="line"><span class="lineno">  365</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dst32 &amp;&amp; src8)</div>
<div class="line"><span class="lineno">  366</span>    do_convert(dst32, src8);</div>
<div class="line"><span class="lineno">  367</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dstYUV &amp;&amp; src32)</div>
<div class="line"><span class="lineno">  368</span>    do_convert(dstYUV, src32);  <span class="comment">// Obsolete conversions</span></div>
<div class="line"><span class="lineno">  369</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dst32 &amp;&amp; srcYUV)</div>
<div class="line"><span class="lineno">  370</span>    do_convert(dst32, srcYUV);  <span class="comment">//</span></div>
<div class="line"><span class="lineno">  371</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dstCm &amp;&amp; src32)</div>
<div class="line"><span class="lineno">  372</span>    do_convert(dstCm, src32);  <span class="comment">//</span></div>
<div class="line"><span class="lineno">  373</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dstCm &amp;&amp; src8)</div>
<div class="line"><span class="lineno">  374</span>    do_convert(dstCm, src8);  <span class="comment">//</span></div>
<div class="line"><span class="lineno">  375</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  376</span>    dst-&gt;unlock();</div>
<div class="line"><span class="lineno">  377</span>    src-&gt;unlock();</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  380</span>  }</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>  dst-&gt;unlock();</div>
<div class="line"><span class="lineno">  383</span>  src-&gt;unlock();</div>
<div class="line"><span class="lineno">  384</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00093">copy()</a>, <a class="el" href="#l00316">over()</a>, <a class="el" href="#l04648">resample()</a>, and <a class="el" href="#l00382">MovieRenderer::Imp::saveFrame()</a>.</p>

</div>
</div>
<a id="a6fc864590b3faf072c5468255ee9f3ea" name="a6fc864590b3faf072c5468255ee9f3ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fc864590b3faf072c5468255ee9f3ea">&#9670;&nbsp;</a></span>convertRaster50to46()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct___r_a_s_t_e_r.html">_RASTER</a> * TRop::convertRaster50to46 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>inRas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;&#160;</td>
          <td class="paramname"><em>inPalette</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert TRasterP in an old toonz raster! </p>
<p >Use the same buffer, not creates a new raster (the palette is new instead!) </p>
<div class="fragment"><div class="line"><span class="lineno"> 1044</span>                                                               {</div>
<div class="line"><span class="lineno"> 1045</span>  <span class="keywordtype">int</span> lx   = inRas-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1046</span>  <span class="keywordtype">int</span> ly   = inRas-&gt;getLy();</div>
<div class="line"><span class="lineno"> 1047</span>  <span class="keywordtype">int</span> wrap = inRas-&gt;<a class="code hl_function" href="class_t_raster.html#a760946b6cb48d7414f90cd421078912c">getWrap</a>();</div>
<div class="line"><span class="lineno"> 1048</span> </div>
<div class="line"><span class="lineno"> 1049</span>  assert(lx &gt; 0 &amp;&amp; ly &gt; 0);</div>
<div class="line"><span class="lineno"> 1050</span>  assert(inRas-&gt;<a class="code hl_function" href="class_t_raster.html#a5ce02b7e8a5b8b594863aa272d8dcdbc">getRawData</a>());</div>
<div class="line"><span class="lineno"> 1051</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> rgr8   = (<a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a>)inRas;</div>
<div class="line"><span class="lineno"> 1052</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR16P</a> rgr16 = (<a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR16P</a>)inRas;</div>
<div class="line"><span class="lineno"> 1053</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> r32     = (<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)inRas;</div>
<div class="line"><span class="lineno"> 1054</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> r64     = (<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)inRas;</div>
<div class="line"><span class="lineno"> 1055</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRasterCM32P</a> rcm   = (<a class="code hl_class" href="class_t_raster_p_t.html">TRasterCM32P</a>)inRas;</div>
<div class="line"><span class="lineno"> 1056</span> </div>
<div class="line"><span class="lineno"> 1057</span>  <a class="code hl_struct" href="struct___r_a_s_t_e_r.html">RASTER</a> *rout = <span class="keyword">new</span> <a class="code hl_struct" href="struct___r_a_s_t_e_r.html">RASTER</a>;</div>
<div class="line"><span class="lineno"> 1058</span>  memset(rout, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct___r_a_s_t_e_r.html">RASTER</a>));</div>
<div class="line"><span class="lineno"> 1059</span> </div>
<div class="line"><span class="lineno"> 1060</span>  std::string id(TImageCache::instance()-&gt;getUniqueId());</div>
<div class="line"><span class="lineno"> 1061</span>  rout-&gt;cacheIdLength = <span class="keywordtype">id</span>.size();</div>
<div class="line"><span class="lineno"> 1062</span>  rout-&gt;cacheId       = <span class="keyword">new</span> <span class="keywordtype">char</span>[rout-&gt;cacheIdLength];</div>
<div class="line"><span class="lineno"> 1063</span>  memcpy(rout-&gt;cacheId, <span class="keywordtype">id</span>.data(), <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * rout-&gt;cacheIdLength);</div>
<div class="line"><span class="lineno"> 1064</span>  {</div>
<div class="line"><span class="lineno"> 1065</span>    <a class="code hl_class" href="class_t_smart_pointer_t.html">TImageP</a> img;</div>
<div class="line"><span class="lineno"> 1066</span>    <span class="keywordflow">if</span> (rcm)</div>
<div class="line"><span class="lineno"> 1067</span>      img = <a class="code hl_class" href="class_t_toonz_image_p.html">TToonzImageP</a>(rcm, rcm-&gt;getBounds());  <span class="comment">// saveBox is not considered</span></div>
<div class="line"><span class="lineno"> 1068</span>                                                  <span class="comment">// in RASTER struct anyway</span></div>
<div class="line"><span class="lineno"> 1069</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1070</span>      img = <a class="code hl_class" href="class_t_raster_image_p.html">TRasterImageP</a>(inRas);</div>
<div class="line"><span class="lineno"> 1071</span>    TImageCache::instance()-&gt;<a class="code hl_function" href="class_t_image_cache.html#a124eae4cf370288f42c22b3477cb5163">add</a>(<span class="keywordtype">id</span>, img);</div>
<div class="line"><span class="lineno"> 1072</span>  }</div>
<div class="line"><span class="lineno"> 1073</span>  inRas-&gt;addRef();</div>
<div class="line"><span class="lineno"> 1074</span> </div>
<div class="line"><span class="lineno"> 1075</span>  rout-&gt;buffer        = inRas-&gt;<a class="code hl_function" href="class_t_raster.html#a5ce02b7e8a5b8b594863aa272d8dcdbc">getRawData</a>();</div>
<div class="line"><span class="lineno"> 1076</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> parent     = inRas-&gt;getParent();</div>
<div class="line"><span class="lineno"> 1077</span>  rout-&gt;native_buffer = (parent) ? parent-&gt;<a class="code hl_function" href="class_t_raster.html#a5ce02b7e8a5b8b594863aa272d8dcdbc">getRawData</a>() : inRas-&gt;<a class="code hl_function" href="class_t_raster.html#a5ce02b7e8a5b8b594863aa272d8dcdbc">getRawData</a>();</div>
<div class="line"><span class="lineno"> 1078</span>  rout-&gt;lx            = lx;</div>
<div class="line"><span class="lineno"> 1079</span>  rout-&gt;ly            = ly;</div>
<div class="line"><span class="lineno"> 1080</span>  rout-&gt;wrap          = wrap;</div>
<div class="line"><span class="lineno"> 1081</span> </div>
<div class="line"><span class="lineno"> 1082</span>  <span class="keywordflow">if</span> (rgr8)</div>
<div class="line"><span class="lineno"> 1083</span>    rout-&gt;type = RAS_GR8;</div>
<div class="line"><span class="lineno"> 1084</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rgr16)</div>
<div class="line"><span class="lineno"> 1085</span>    rout-&gt;type = RAS_GR16;</div>
<div class="line"><span class="lineno"> 1086</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r32)</div>
<div class="line"><span class="lineno"> 1087</span>    rout-&gt;type = RAS_RGBM;</div>
<div class="line"><span class="lineno"> 1088</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r64)</div>
<div class="line"><span class="lineno"> 1089</span>    rout-&gt;type = RAS_RGBM64;</div>
<div class="line"><span class="lineno"> 1090</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rcm)</div>
<div class="line"><span class="lineno"> 1091</span>    rout-&gt;type = RAS_CM32;</div>
<div class="line"><span class="lineno"> 1092</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1093</span>    assert(!<span class="stringliteral">&quot;raster type not convertible!&quot;</span>);</div>
<div class="line"><span class="lineno"> 1094</span> </div>
<div class="line"><span class="lineno"> 1095</span>  <span class="keywordflow">if</span> (rout-&gt;type != RAS_CM32) <span class="keywordflow">return</span> rout;</div>
<div class="line"><span class="lineno"> 1096</span> </div>
<div class="line"><span class="lineno"> 1097</span>  <span class="keywordflow">if</span> (!inPalette) {</div>
<div class="line"><span class="lineno"> 1098</span>    assert(!<span class="stringliteral">&quot;missing palette!&quot;</span>);</div>
<div class="line"><span class="lineno"> 1099</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1100</span>  }</div>
<div class="line"><span class="lineno"> 1101</span> </div>
<div class="line"><span class="lineno"> 1102</span>  rout-&gt;cmap.info   = Tcm_32_default_info;</div>
<div class="line"><span class="lineno"> 1103</span>  rout-&gt;cmap.buffer = <span class="keyword">new</span> <a class="code hl_struct" href="struct_l_p_i_x_e_l.html">LPIXEL</a>[TCM_CMAP_PENBUFFER_SIZE(rout-&gt;cmap.info)];</div>
<div class="line"><span class="lineno"> 1104</span>  <span class="comment">// rout-&gt;cmap.penbuffer = new LPIXEL[TCM_CMAP_PENBUFFER_SIZE</span></div>
<div class="line"><span class="lineno"> 1105</span>  <span class="comment">// (rout-&gt;cmap.info)];</span></div>
<div class="line"><span class="lineno"> 1106</span>  <span class="comment">// rout-&gt;cmap.colbuffer = new LPIXEL[TCM_CMAP_COLBUFFER_SIZE</span></div>
<div class="line"><span class="lineno"> 1107</span>  <span class="comment">// (rout-&gt;cmap.info)];</span></div>
<div class="line"><span class="lineno"> 1108</span> </div>
<div class="line"><span class="lineno"> 1109</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; inPalette-&gt;<a class="code hl_function" href="class_t_palette.html#a5a562f2d3a5fa256fcb4bb2be5b45534">getStyleCount</a>(); i++)</div>
<div class="line"><span class="lineno"> 1110</span>    rout-&gt;cmap.buffer[i] =</div>
<div class="line"><span class="lineno"> 1111</span>        ::premultiplyLPIXEL(inPalette-&gt;<a class="code hl_function" href="class_t_palette.html#a0f6a4eda7dafb0a9f2b43160cfec81e4">getStyle</a>(i)-&gt;<a class="code hl_function" href="class_t_color_style.html#af5907c6146db5067fcf000edeb8e403b">getAverageColor</a>());</div>
<div class="line"><span class="lineno"> 1112</span>  <span class="comment">// fillCmapRamp (rout-&gt;cmap, inPalette-&gt;getStyle(i)-&gt;getMainColor(), i);</span></div>
<div class="line"><span class="lineno"> 1113</span> </div>
<div class="line"><span class="lineno"> 1114</span>  <span class="keywordflow">return</span> rout;</div>
<div class="line"><span class="lineno"> 1115</span>}</div>
<div class="ttc" id="aclass_t_color_style_html_af5907c6146db5067fcf000edeb8e403b"><div class="ttname"><a href="class_t_color_style.html#af5907c6146db5067fcf000edeb8e403b">TColorStyle::getAverageColor</a></div><div class="ttdeci">virtual TPixel32 getAverageColor() const</div><div class="ttdoc">Returns a color representing the average of all the style's colors.</div><div class="ttdef"><b>Definition:</b> tcolorstyles.h:270</div></div>
<div class="ttc" id="aclass_t_image_cache_html_a124eae4cf370288f42c22b3477cb5163"><div class="ttname"><a href="class_t_image_cache.html#a124eae4cf370288f42c22b3477cb5163">TImageCache::add</a></div><div class="ttdeci">void add(const std::string &amp;id, const TImageP &amp;img, bool overwrite=true)</div><div class="ttdef"><b>Definition:</b> timagecache.cpp:1153</div></div>
<div class="ttc" id="aclass_t_palette_html_a0f6a4eda7dafb0a9f2b43160cfec81e4"><div class="ttname"><a href="class_t_palette.html#a0f6a4eda7dafb0a9f2b43160cfec81e4">TPalette::getStyle</a></div><div class="ttdeci">TColorStyle * getStyle(int styleId) const</div><div class="ttdef"><b>Definition:</b> tpalette.cpp:283</div></div>
<div class="ttc" id="aclass_t_palette_html_a5a562f2d3a5fa256fcb4bb2be5b45534"><div class="ttname"><a href="class_t_palette.html#a5a562f2d3a5fa256fcb4bb2be5b45534">TPalette::getStyleCount</a></div><div class="ttdeci">int getStyleCount() const</div><div class="ttdoc">Returns the number of the color styles in the palette.</div><div class="ttdef"><b>Definition:</b> tpalette.h:255</div></div>
<div class="ttc" id="aclass_t_raster_html_a5ce02b7e8a5b8b594863aa272d8dcdbc"><div class="ttname"><a href="class_t_raster.html#a5ce02b7e8a5b8b594863aa272d8dcdbc">TRaster::getRawData</a></div><div class="ttdeci">const UCHAR * getRawData() const</div><div class="ttdoc">Returns a pointer to the image buffer.</div><div class="ttdef"><b>Definition:</b> traster.h:158</div></div>
<div class="ttc" id="aclass_t_raster_html_a760946b6cb48d7414f90cd421078912c"><div class="ttname"><a href="class_t_raster.html#a760946b6cb48d7414f90cd421078912c">TRaster::getWrap</a></div><div class="ttdeci">int getWrap() const</div><div class="ttdoc">Returns the length of a row in pixel.</div><div class="ttdef"><b>Definition:</b> traster.h:121</div></div>
<div class="ttc" id="aclass_t_raster_image_p_html"><div class="ttname"><a href="class_t_raster_image_p.html">TRasterImageP</a></div><div class="ttdef"><b>Definition:</b> trasterimage.h:148</div></div>
<div class="ttc" id="aclass_t_toonz_image_p_html"><div class="ttname"><a href="class_t_toonz_image_p.html">TToonzImageP</a></div><div class="ttdef"><b>Definition:</b> ttoonzimage.h:126</div></div>
<div class="ttc" id="astruct___r_a_s_t_e_r_html"><div class="ttname"><a href="struct___r_a_s_t_e_r.html">_RASTER</a></div><div class="ttdef"><b>Definition:</b> raster.h:67</div></div>
<div class="ttc" id="astruct_l_p_i_x_e_l_html"><div class="ttname"><a href="struct_l_p_i_x_e_l.html">LPIXEL</a></div><div class="ttdef"><b>Definition:</b> tnz4.h:32</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01153">TImageCache::add()</a>, <a class="el" href="#l00270">TColorStyle::getAverageColor()</a>, <a class="el" href="#l00158">TRaster::getRawData()</a>, <a class="el" href="#l00283">TPalette::getStyle()</a>, <a class="el" href="#l00255">TPalette::getStyleCount()</a>, and <a class="el" href="#l00121">TRaster::getWrap()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l01176">readRaster46()</a>.</p>

</div>
</div>
<a id="a4c6dae8ce37af1d30fded509f9ea7546" name="a4c6dae8ce37af1d30fded509f9ea7546"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c6dae8ce37af1d30fded509f9ea7546">&#9670;&nbsp;</a></span>convolve_3_i() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::convolve_3_i </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a>&#160;</td>
          <td class="paramname"><em>rin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;&#160;</td>
          <td class="paramname"><em>palette</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>conv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  571</span>                                       {</div>
<div class="line"><span class="lineno">  572</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> rout32 = rout;</div>
<div class="line"><span class="lineno">  573</span> </div>
<div class="line"><span class="lineno">  574</span>  <span class="keywordflow">if</span> (rout32) {</div>
<div class="line"><span class="lineno">  575</span>    doConvolve_cm32_3_i&lt;TPixel32&gt;(rout32, rin, palette, dx, dy, conv);</div>
<div class="line"><span class="lineno">  576</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  577</span>  }</div>
<div class="line"><span class="lineno">  578</span> </div>
<div class="line"><span class="lineno">  579</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> rout64 = rout;</div>
<div class="line"><span class="lineno">  580</span>  <span class="keywordflow">if</span> (rout64) {</div>
<div class="line"><span class="lineno">  581</span>    doConvolve_cm32_3_i&lt;TPixel64&gt;(rout64, rin, palette, dx, dy, conv);</div>
<div class="line"><span class="lineno">  582</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  583</span>  }</div>
<div class="line"><span class="lineno">  584</span> </div>
<div class="line"><span class="lineno">  585</span>  <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::convolve_3_i: unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  586</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1bf930e46aa120ad8522b0e39540e4b6" name="a1bf930e46aa120ad8522b0e39540e4b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bf930e46aa120ad8522b0e39540e4b6">&#9670;&nbsp;</a></span>convolve_3_i() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::convolve_3_i </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>conv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  532</span>                                       {</div>
<div class="line"><span class="lineno">  533</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> rin32 = rin;</div>
<div class="line"><span class="lineno">  534</span> </div>
<div class="line"><span class="lineno">  535</span>  <span class="keywordflow">if</span> (rin32) {</div>
<div class="line"><span class="lineno">  536</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> rout32 = rout;</div>
<div class="line"><span class="lineno">  537</span>    <span class="keywordflow">if</span> (rout32) {</div>
<div class="line"><span class="lineno">  538</span>      doConvolve_3_i&lt;TPixel32, TPixel32&gt;(rout32, rin32, dx, dy, conv);</div>
<div class="line"><span class="lineno">  539</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  540</span>    }</div>
<div class="line"><span class="lineno">  541</span> </div>
<div class="line"><span class="lineno">  542</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> rout64 = rout;</div>
<div class="line"><span class="lineno">  543</span>    <span class="keywordflow">if</span> (rout64) {</div>
<div class="line"><span class="lineno">  544</span>      doConvolve_3_i&lt;TPixel64, TPixel32&gt;(rout64, rin32, dx, dy, conv);</div>
<div class="line"><span class="lineno">  545</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  546</span>    }</div>
<div class="line"><span class="lineno">  547</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  548</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> rin64 = rin;</div>
<div class="line"><span class="lineno">  549</span>    <span class="keywordflow">if</span> (rin64) {</div>
<div class="line"><span class="lineno">  550</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> rout32 = rout;</div>
<div class="line"><span class="lineno">  551</span>      <span class="keywordflow">if</span> (rout32) {</div>
<div class="line"><span class="lineno">  552</span>        doConvolve_3_i&lt;TPixel32, TPixel64&gt;(rout32, rin64, dx, dy, conv);</div>
<div class="line"><span class="lineno">  553</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  554</span>      }</div>
<div class="line"><span class="lineno">  555</span> </div>
<div class="line"><span class="lineno">  556</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> rout64 = rout;</div>
<div class="line"><span class="lineno">  557</span>      <span class="keywordflow">if</span> (rout64) {</div>
<div class="line"><span class="lineno">  558</span>        doConvolve_3_i&lt;TPixel64, TPixel64&gt;(rout64, rin64, dx, dy, conv);</div>
<div class="line"><span class="lineno">  559</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  560</span>      }</div>
<div class="line"><span class="lineno">  561</span>    }</div>
<div class="line"><span class="lineno">  562</span>  }</div>
<div class="line"><span class="lineno">  563</span> </div>
<div class="line"><span class="lineno">  564</span>  <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::convolve_3_i: unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  565</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c1b6b5ed6465346721de15ac07de8e6" name="a3c1b6b5ed6465346721de15ac07de8e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c1b6b5ed6465346721de15ac07de8e6">&#9670;&nbsp;</a></span>convolve_i() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::convolve_i </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a>&#160;</td>
          <td class="paramname"><em>rin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;&#160;</td>
          <td class="paramname"><em>palette</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>conv</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>radius</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  629</span>                                                                 {</div>
<div class="line"><span class="lineno">  630</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> rout32 = rout;</div>
<div class="line"><span class="lineno">  631</span> </div>
<div class="line"><span class="lineno">  632</span>  <span class="keywordflow">if</span> (rout32) {</div>
<div class="line"><span class="lineno">  633</span>    doConvolve_cm32_i&lt;TPixel32&gt;(rout32, rin, palette, dx, dy, conv, radius);</div>
<div class="line"><span class="lineno">  634</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  635</span>  }</div>
<div class="line"><span class="lineno">  636</span> </div>
<div class="line"><span class="lineno">  637</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> rout64 = rout;</div>
<div class="line"><span class="lineno">  638</span>  <span class="keywordflow">if</span> (rout64) {</div>
<div class="line"><span class="lineno">  639</span>    doConvolve_cm32_i&lt;TPixel64&gt;(rout64, rin, palette, dx, dy, conv, radius);</div>
<div class="line"><span class="lineno">  640</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  641</span>  }</div>
<div class="line"><span class="lineno">  642</span> </div>
<div class="line"><span class="lineno">  643</span>  <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::convolve_i: unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  644</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d086c7fcdee2a2fcec03005d7f7eda7" name="a5d086c7fcdee2a2fcec03005d7f7eda7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d086c7fcdee2a2fcec03005d7f7eda7">&#9670;&nbsp;</a></span>convolve_i() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::convolve_i </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>conv</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>radius</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  591</span>                                                 {</div>
<div class="line"><span class="lineno">  592</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> rin32 = rin;</div>
<div class="line"><span class="lineno">  593</span> </div>
<div class="line"><span class="lineno">  594</span>  <span class="keywordflow">if</span> (rin32) {</div>
<div class="line"><span class="lineno">  595</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> rout32 = rout;</div>
<div class="line"><span class="lineno">  596</span>    <span class="keywordflow">if</span> (rout32) {</div>
<div class="line"><span class="lineno">  597</span>      doConvolve_i&lt;TPixel32, TPixel32&gt;(rout32, rin32, dx, dy, conv, radius);</div>
<div class="line"><span class="lineno">  598</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  599</span>    }</div>
<div class="line"><span class="lineno">  600</span> </div>
<div class="line"><span class="lineno">  601</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> rout64 = rout;</div>
<div class="line"><span class="lineno">  602</span>    <span class="keywordflow">if</span> (rout64) {</div>
<div class="line"><span class="lineno">  603</span>      doConvolve_i&lt;TPixel64, TPixel32&gt;(rout64, rin32, dx, dy, conv, radius);</div>
<div class="line"><span class="lineno">  604</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  605</span>    }</div>
<div class="line"><span class="lineno">  606</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  607</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> rin64 = rin;</div>
<div class="line"><span class="lineno">  608</span>    <span class="keywordflow">if</span> (rin64) {</div>
<div class="line"><span class="lineno">  609</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> rout32 = rout;</div>
<div class="line"><span class="lineno">  610</span>      <span class="keywordflow">if</span> (rout32) {</div>
<div class="line"><span class="lineno">  611</span>        doConvolve_i&lt;TPixel32, TPixel64&gt;(rout32, rin64, dx, dy, conv, radius);</div>
<div class="line"><span class="lineno">  612</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  613</span>      }</div>
<div class="line"><span class="lineno">  614</span> </div>
<div class="line"><span class="lineno">  615</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> rout64 = rout;</div>
<div class="line"><span class="lineno">  616</span>      <span class="keywordflow">if</span> (rout64) {</div>
<div class="line"><span class="lineno">  617</span>        doConvolve_i&lt;TPixel64, TPixel64&gt;(rout64, rin64, dx, dy, conv, radius);</div>
<div class="line"><span class="lineno">  618</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  619</span>      }</div>
<div class="line"><span class="lineno">  620</span>    }</div>
<div class="line"><span class="lineno">  621</span>  }</div>
<div class="line"><span class="lineno">  622</span> </div>
<div class="line"><span class="lineno">  623</span>  <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::convolve_i: unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  624</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a229eb7fd85c23c325ea4ba55478d5712" name="a229eb7fd85c23c325ea4ba55478d5712"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a229eb7fd85c23c325ea4ba55478d5712">&#9670;&nbsp;</a></span>copy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::copy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy <b>src</b> in <b>dst</b>. </p>
<div class="fragment"><div class="line"><span class="lineno">   93</span>                                                 {</div>
<div class="line"><span class="lineno">   94</span>  assert(!((<a class="code hl_class" href="class_t_raster_p_t.html">TRasterCM32P</a>)src) || (<a class="code hl_class" href="class_t_raster_p_t.html">TRasterCM32P</a>)dst);</div>
<div class="line"><span class="lineno">   95</span>  <span class="keywordflow">if</span> (dst-&gt;getPixelSize() == src-&gt;getPixelSize())</div>
<div class="line"><span class="lineno">   96</span>    dst-&gt;<a class="code hl_function" href="class_t_raster.html#a3c590c4ebe4cb8c1f352437692ffd20e">copy</a>(src);</div>
<div class="line"><span class="lineno">   97</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   98</span>    <span class="keywordflow">if</span> (dst-&gt;getBounds() != src-&gt;getBounds()) {</div>
<div class="line"><span class="lineno">   99</span>      <a class="code hl_class" href="class_t_rect_t.html">TRect</a> rect = dst-&gt;getBounds() * src-&gt;getBounds();</div>
<div class="line"><span class="lineno">  100</span>      <span class="keywordflow">if</span> (rect.<a class="code hl_function" href="class_t_rect_t.html#a53ce09c6112f8a019b43ad82d721a93b">isEmpty</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  101</span>      <a class="code hl_function" href="namespace_t_rop.html#a45a08fb48dd7d33ec629d722081d55c6">TRop::convert</a>(dst-&gt;extract(rect), src-&gt;extract(rect));</div>
<div class="line"><span class="lineno">  102</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  103</span>      <a class="code hl_function" href="namespace_t_rop.html#a45a08fb48dd7d33ec629d722081d55c6">TRop::convert</a>(dst, src);</div>
<div class="line"><span class="lineno">  104</span>  }</div>
<div class="line"><span class="lineno">  105</span>}</div>
<div class="ttc" id="aclass_t_raster_html_a3c590c4ebe4cb8c1f352437692ffd20e"><div class="ttname"><a href="class_t_raster.html#a3c590c4ebe4cb8c1f352437692ffd20e">TRaster::copy</a></div><div class="ttdeci">void copy(const TRasterP &amp;src, const TPoint &amp;offset=TPoint())</div><div class="ttdef"><b>Definition:</b> traster.cpp:263</div></div>
<div class="ttc" id="aclass_t_rect_t_html_a53ce09c6112f8a019b43ad82d721a93b"><div class="ttname"><a href="class_t_rect_t.html#a53ce09c6112f8a019b43ad82d721a93b">TRectT::isEmpty</a></div><div class="ttdeci">bool isEmpty() const</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00336">convert()</a>, <a class="el" href="#l00263">TRaster::copy()</a>, and <a class="el" href="class_t_rect_t.html#a53ce09c6112f8a019b43ad82d721a93b">TRectT&lt; T &gt;::isEmpty()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00511">TCacheResource::download()</a>, <a class="el" href="#l00316">over()</a>, <a class="el" href="#l00569">TCleanupper::process()</a>, and <a class="el" href="#l00449">TCacheResource::upload()</a>.</p>

</div>
</div>
<a id="aec16db9b546d40b13e1e5b0946417b07" name="aec16db9b546d40b13e1e5b0946417b07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec16db9b546d40b13e1e5b0946417b07">&#9670;&nbsp;</a></span>copyAndSwapRBChannels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_raster_p_t.html">TRaster32P</a> TRop::copyAndSwapRBChannels </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRaster32P</a> &amp;&#160;</td>
          <td class="paramname"><em>srcRaster</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return a raster with r b channels swapped. </p>
<div class="fragment"><div class="line"><span class="lineno">   68</span>                                                                  {</div>
<div class="line"><span class="lineno">   69</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> newRaster(srcRaster-&gt;getSize());</div>
<div class="line"><span class="lineno">   70</span>  <span class="keywordtype">int</span> lx = srcRaster-&gt;getLx();</div>
<div class="line"><span class="lineno">   71</span>  <span class="keywordtype">int</span> y  = srcRaster-&gt;getLy();</div>
<div class="line"><span class="lineno">   72</span>  srcRaster-&gt;lock();</div>
<div class="line"><span class="lineno">   73</span>  newRaster-&gt;lock();</div>
<div class="line"><span class="lineno">   74</span>  <span class="keywordflow">while</span> (--y &gt;= 0) {</div>
<div class="line"><span class="lineno">   75</span>    TPixel32 *pix    = srcRaster-&gt;pixels(y);</div>
<div class="line"><span class="lineno">   76</span>    TPixel32 *newpix = newRaster-&gt;pixels(y);</div>
<div class="line"><span class="lineno">   77</span>    TPixel32 *endPix = pix + lx;</div>
<div class="line"><span class="lineno">   78</span>    <span class="keywordflow">while</span> (pix &lt; endPix) {</div>
<div class="line"><span class="lineno">   79</span>      newpix-&gt;r = pix-&gt;b;</div>
<div class="line"><span class="lineno">   80</span>      newpix-&gt;g = pix-&gt;g;</div>
<div class="line"><span class="lineno">   81</span>      newpix-&gt;b = pix-&gt;r;</div>
<div class="line"><span class="lineno">   82</span>      newpix-&gt;m = pix-&gt;m;</div>
<div class="line"><span class="lineno">   83</span>      ++pix;</div>
<div class="line"><span class="lineno">   84</span>      ++newpix;</div>
<div class="line"><span class="lineno">   85</span>    }</div>
<div class="line"><span class="lineno">   86</span>  }</div>
<div class="line"><span class="lineno">   87</span>  srcRaster-&gt;unlock();</div>
<div class="line"><span class="lineno">   88</span>  newRaster-&gt;unlock();</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>  <span class="keywordflow">return</span> newRaster;</div>
<div class="line"><span class="lineno">   91</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac115e66f53280dbca21075c52259b084" name="ac115e66f53280dbca21075c52259b084"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac115e66f53280dbca21075c52259b084">&#9670;&nbsp;</a></span>crossDissolve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::crossDissolve </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rdown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UCHAR&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1027</span>                                                        {</div>
<div class="line"><span class="lineno"> 1028</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32   = rup;</div>
<div class="line"><span class="lineno"> 1029</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> down32 = rdown;</div>
<div class="line"><span class="lineno"> 1030</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32  = rout;</div>
<div class="line"><span class="lineno"> 1031</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64   = rup;</div>
<div class="line"><span class="lineno"> 1032</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> down64 = rdown;</div>
<div class="line"><span class="lineno"> 1033</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64  = rout;</div>
<div class="line"><span class="lineno"> 1034</span> </div>
<div class="line"><span class="lineno"> 1035</span>  <span class="keywordflow">if</span> (up32 &amp;&amp; down32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno"> 1036</span>    FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1037</span> </div>
<div class="line"><span class="lineno"> 1038</span>    outPix-&gt;r = (upPix-&gt;r * v + downPix-&gt;r * (255 - v)) / 255;</div>
<div class="line"><span class="lineno"> 1039</span>    outPix-&gt;g = (upPix-&gt;g * v + downPix-&gt;g * (255 - v)) / 255;</div>
<div class="line"><span class="lineno"> 1040</span>    outPix-&gt;b = (upPix-&gt;b * v + downPix-&gt;b * (255 - v)) / 255;</div>
<div class="line"><span class="lineno"> 1041</span>    outPix-&gt;m = (upPix-&gt;m * v + downPix-&gt;m * (255 - v)) / 255;</div>
<div class="line"><span class="lineno"> 1042</span> </div>
<div class="line"><span class="lineno"> 1043</span>    FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno"> 1044</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (up64 &amp;&amp; down64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno"> 1045</span>    USHORT vv = v * 257;</div>
<div class="line"><span class="lineno"> 1046</span> </div>
<div class="line"><span class="lineno"> 1047</span>    FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1048</span> </div>
<div class="line"><span class="lineno"> 1049</span>    outPix-&gt;r = (upPix-&gt;r * vv + downPix-&gt;r * (65535 - vv)) / 65535;</div>
<div class="line"><span class="lineno"> 1050</span>    outPix-&gt;g = (upPix-&gt;g * vv + downPix-&gt;g * (65535 - vv)) / 65535;</div>
<div class="line"><span class="lineno"> 1051</span>    outPix-&gt;b = (upPix-&gt;b * vv + downPix-&gt;b * (65535 - vv)) / 65535;</div>
<div class="line"><span class="lineno"> 1052</span>    outPix-&gt;m = (upPix-&gt;m * vv + downPix-&gt;m * (65535 - vv)) / 65535;</div>
<div class="line"><span class="lineno"> 1053</span> </div>
<div class="line"><span class="lineno"> 1054</span>    FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno"> 1055</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1056</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::crossDissolve invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno"> 1057</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a49f90a16ba17adf6e194d8aefff4e172" name="a49f90a16ba17adf6e194d8aefff4e172"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49f90a16ba17adf6e194d8aefff4e172">&#9670;&nbsp;</a></span>darken()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::darken </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rdown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1062</span>                                        {</div>
<div class="line"><span class="lineno"> 1063</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32   = rup;</div>
<div class="line"><span class="lineno"> 1064</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> down32 = rdown;</div>
<div class="line"><span class="lineno"> 1065</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32  = rout;</div>
<div class="line"><span class="lineno"> 1066</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64   = rup;</div>
<div class="line"><span class="lineno"> 1067</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> down64 = rdown;</div>
<div class="line"><span class="lineno"> 1068</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64  = rout;</div>
<div class="line"><span class="lineno"> 1069</span> </div>
<div class="line"><span class="lineno"> 1070</span>  <span class="keywordflow">if</span> (up32 &amp;&amp; down32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno"> 1071</span>    FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1072</span> </div>
<div class="line"><span class="lineno"> 1073</span>    <span class="keywordtype">double</span> value0 = luminance(upPix);</div>
<div class="line"><span class="lineno"> 1074</span>    <span class="keywordtype">double</span> value1 = luminance(downPix);</div>
<div class="line"><span class="lineno"> 1075</span> </div>
<div class="line"><span class="lineno"> 1076</span>    <span class="keywordflow">if</span> (value0 &lt; value1)</div>
<div class="line"><span class="lineno"> 1077</span>      *outPix = *upPix;</div>
<div class="line"><span class="lineno"> 1078</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1079</span>      *outPix = *downPix;</div>
<div class="line"><span class="lineno"> 1080</span> </div>
<div class="line"><span class="lineno"> 1081</span>    FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno"> 1082</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (up64 &amp;&amp; down64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno"> 1083</span>    FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1084</span> </div>
<div class="line"><span class="lineno"> 1085</span>    <span class="keywordtype">double</span> value0 = luminance(upPix);</div>
<div class="line"><span class="lineno"> 1086</span>    <span class="keywordtype">double</span> value1 = luminance(downPix);</div>
<div class="line"><span class="lineno"> 1087</span> </div>
<div class="line"><span class="lineno"> 1088</span>    <span class="keywordflow">if</span> (value0 &lt; value1)</div>
<div class="line"><span class="lineno"> 1089</span>      *outPix = *upPix;</div>
<div class="line"><span class="lineno"> 1090</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1091</span>      *outPix = *downPix;</div>
<div class="line"><span class="lineno"> 1092</span> </div>
<div class="line"><span class="lineno"> 1093</span>    FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno"> 1094</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1095</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::darken invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno"> 1096</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="add7d14f883c53c3d68ca0f256c42689f" name="add7d14f883c53c3d68ca0f256c42689f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add7d14f883c53c3d68ca0f256c42689f">&#9670;&nbsp;</a></span>depremultiply()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::depremultiply </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>ras</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make a depremultiply of all raster pixels. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1546</span>                                            {</div>
<div class="line"><span class="lineno"> 1547</span>  ras-&gt;lock();</div>
<div class="line"><span class="lineno"> 1548</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> ras32 = ras;</div>
<div class="line"><span class="lineno"> 1549</span>  <span class="keywordflow">if</span> (ras32) {</div>
<div class="line"><span class="lineno"> 1550</span>    TPixel32 *endPix, *upPix = 0, *upRow = ras32-&gt;pixels();</div>
<div class="line"><span class="lineno"> 1551</span>    TPixel32 *lastPix =</div>
<div class="line"><span class="lineno"> 1552</span>        upRow + ras32-&gt;getWrap() * (ras32-&gt;getLy() - 1) + ras32-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1553</span> </div>
<div class="line"><span class="lineno"> 1554</span>    <span class="keywordflow">while</span> (upPix &lt; lastPix) {</div>
<div class="line"><span class="lineno"> 1555</span>      upPix  = upRow;</div>
<div class="line"><span class="lineno"> 1556</span>      endPix = upPix + ras32-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1557</span>      <span class="keywordflow">while</span> (upPix &lt; endPix) {</div>
<div class="line"><span class="lineno"> 1558</span>        <span class="keywordflow">if</span> (upPix-&gt;m != 0) depremult(*upPix);</div>
<div class="line"><span class="lineno"> 1559</span>        ++upPix;</div>
<div class="line"><span class="lineno"> 1560</span>      }</div>
<div class="line"><span class="lineno"> 1561</span>      upRow += ras32-&gt;getWrap();</div>
<div class="line"><span class="lineno"> 1562</span>    }</div>
<div class="line"><span class="lineno"> 1563</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1564</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> ras64 = ras;</div>
<div class="line"><span class="lineno"> 1565</span>    <span class="keywordflow">if</span> (ras64) {</div>
<div class="line"><span class="lineno"> 1566</span>      TPixel64 *endPix, *upPix = 0, *upRow = ras64-&gt;pixels();</div>
<div class="line"><span class="lineno"> 1567</span>      TPixel64 *lastPix =</div>
<div class="line"><span class="lineno"> 1568</span>          upRow + ras64-&gt;getWrap() * (ras64-&gt;getLy() - 1) + ras64-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1569</span> </div>
<div class="line"><span class="lineno"> 1570</span>      <span class="keywordflow">while</span> (upPix &lt; lastPix) {</div>
<div class="line"><span class="lineno"> 1571</span>        upPix  = upRow;</div>
<div class="line"><span class="lineno"> 1572</span>        endPix = upPix + ras64-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1573</span>        <span class="keywordflow">while</span> (upPix &lt; endPix) {</div>
<div class="line"><span class="lineno"> 1574</span>          <span class="keywordflow">if</span> (upPix-&gt;m != 0) depremult(*upPix);</div>
<div class="line"><span class="lineno"> 1575</span>          ++upPix;</div>
<div class="line"><span class="lineno"> 1576</span>        }</div>
<div class="line"><span class="lineno"> 1577</span>        upRow += ras64-&gt;getWrap();</div>
<div class="line"><span class="lineno"> 1578</span>      }</div>
<div class="line"><span class="lineno"> 1579</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1580</span>      ras-&gt;unlock();</div>
<div class="line"><span class="lineno"> 1581</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;TRop::depremultiply invalid raster type&quot;</span>);</div>
<div class="line"><span class="lineno"> 1582</span>    }</div>
<div class="line"><span class="lineno"> 1583</span>  }</div>
<div class="line"><span class="lineno"> 1584</span>  ras-&gt;unlock();</div>
<div class="line"><span class="lineno"> 1585</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l01694">applyColorScale()</a>, and <a class="el" href="#l00170">texture_utils::getTextureData()</a>.</p>

</div>
</div>
<a id="ab11c9fa6fc9221ea22161a5c148ef2e9" name="ab11c9fa6fc9221ea22161a5c148ef2e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab11c9fa6fc9221ea22161a5c148ef2e9">&#9670;&nbsp;</a></span>eraseColors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::eraseColors </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a>&#160;</td>
          <td class="paramname"><em>ras</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; *&#160;</td>
          <td class="paramname"><em>colorIds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>eraseInks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>noGap</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  806</span>                                                   {</div>
<div class="line"><span class="lineno">  807</span>  <span class="comment">// noGap option is available only when erasing Inks</span></div>
<div class="line"><span class="lineno">  808</span>  assert(eraseInks || !noGap);</div>
<div class="line"><span class="lineno">  809</span>  <span class="keywordflow">if</span> (colorIds) std::sort(colorIds-&gt;begin(), colorIds-&gt;end());</div>
<div class="line"><span class="lineno">  810</span> </div>
<div class="line"><span class="lineno">  811</span>  <span class="keywordtype">bool</span> hasGapPixel = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  812</span> </div>
<div class="line"><span class="lineno">  813</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; ras-&gt;getLy(); y++) {</div>
<div class="line"><span class="lineno">  814</span>    <a class="code hl_class" href="class_t_pixel_c_m32.html">TPixelCM32</a> *pix = ras-&gt;pixels(y), *endPix = pix + ras-&gt;getLx();</div>
<div class="line"><span class="lineno">  815</span> </div>
<div class="line"><span class="lineno">  816</span>    <span class="keywordflow">for</span> (; pix &lt; endPix; pix++) {</div>
<div class="line"><span class="lineno">  817</span>      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><span class="lineno">  818</span>      <span class="keywordtype">int</span> color      = eraseInks ? pix-&gt;getInk() : pix-&gt;getPaint();</div>
<div class="line"><span class="lineno">  819</span> </div>
<div class="line"><span class="lineno">  820</span>      <span class="keywordflow">if</span> (color == 0) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  821</span> </div>
<div class="line"><span class="lineno">  822</span>      <span class="keywordflow">if</span> (colorIds &amp;&amp;</div>
<div class="line"><span class="lineno">  823</span>          !std::binary_search(colorIds-&gt;begin(), colorIds-&gt;end(), color))</div>
<div class="line"><span class="lineno">  824</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  825</span> </div>
<div class="line"><span class="lineno">  826</span>      <span class="keywordflow">if</span> (eraseInks) {</div>
<div class="line"><span class="lineno">  827</span>        <span class="comment">// no-gap case.</span></div>
<div class="line"><span class="lineno">  828</span>        <span class="comment">// even if some area is filled under the solid line, delete it and</span></div>
<div class="line"><span class="lineno">  829</span>        <span class="comment">// expand-fill again to make sure the colors will be separated at the</span></div>
<div class="line"><span class="lineno">  830</span>        <span class="comment">// center of the lines.</span></div>
<div class="line"><span class="lineno">  831</span>        <span class="keywordflow">if</span> (noGap &amp;&amp; pix-&gt;getTone() == 0) {</div>
<div class="line"><span class="lineno">  832</span>          pix-&gt;setPaint(</div>
<div class="line"><span class="lineno">  833</span>              TPixelCM32::getMaxPaint());  <span class="comment">// use paintId = 4095 as mark of</span></div>
<div class="line"><span class="lineno">  834</span>                                           <span class="comment">// pixels to be filled</span></div>
<div class="line"><span class="lineno">  835</span>          hasGapPixel = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  836</span>        }</div>
<div class="line"><span class="lineno">  837</span>        pix-&gt;setInk(0);</div>
<div class="line"><span class="lineno">  838</span>        pix-&gt;setTone(TPixelCM32::getMaxTone());</div>
<div class="line"><span class="lineno">  839</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  840</span>        pix-&gt;setPaint(0);</div>
<div class="line"><span class="lineno">  841</span>    }</div>
<div class="line"><span class="lineno">  842</span>  }</div>
<div class="line"><span class="lineno">  843</span> </div>
<div class="line"><span class="lineno">  844</span>  <span class="keywordflow">if</span> (hasGapPixel) expandAreaAndFillGaps(ras);</div>
<div class="line"><span class="lineno">  845</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af64e0fbf864d2bcffd3a959020dd4007" name="af64e0fbf864d2bcffd3a959020dd4007"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af64e0fbf864d2bcffd3a959020dd4007">&#9670;&nbsp;</a></span>eraseStyleIds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::eraseStyleIds </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_toonz_image.html">TToonzImage</a> *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int &gt;&#160;</td>
          <td class="paramname"><em>styleIds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  874</span>                                                                          {</div>
<div class="line"><span class="lineno">  875</span>  assert(image);</div>
<div class="line"><span class="lineno">  876</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRasterCM32P</a> ras = image-&gt;<a class="code hl_function" href="class_t_toonz_image.html#ae04ea13c3803157ac69b01a83ad65865">getRaster</a>();</div>
<div class="line"><span class="lineno">  877</span> </div>
<div class="line"><span class="lineno">  878</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  879</span>  <span class="keywordflow">for</span> (i = 0; i &lt; (int)styleIds.size(); i++) {</div>
<div class="line"><span class="lineno">  880</span>    <span class="keywordtype">int</span> styleId = styleIds[i];</div>
<div class="line"><span class="lineno">  881</span>    ras-&gt;lock();</div>
<div class="line"><span class="lineno">  882</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; ras-&gt;getLy(); y++) {</div>
<div class="line"><span class="lineno">  883</span>      <a class="code hl_class" href="class_t_pixel_c_m32.html">TPixelCM32</a> *pix = ras-&gt;pixels(y), *endPix = pix + ras-&gt;getLx();</div>
<div class="line"><span class="lineno">  884</span>      <span class="keywordflow">while</span> (pix &lt; endPix) {</div>
<div class="line"><span class="lineno">  885</span>        <span class="keywordtype">bool</span> isPaint = (pix-&gt;getPaint() == styleId);</div>
<div class="line"><span class="lineno">  886</span>        <span class="keywordtype">bool</span> isInk   = (pix-&gt;getInk() == styleId);</div>
<div class="line"><span class="lineno">  887</span>        <span class="keywordflow">if</span> (!isPaint &amp;&amp; !isInk) {</div>
<div class="line"><span class="lineno">  888</span>          pix++;</div>
<div class="line"><span class="lineno">  889</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  890</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isPaint &amp;&amp; !isInk)</div>
<div class="line"><span class="lineno">  891</span>          *pix = <a class="code hl_class" href="class_t_pixel_c_m32.html">TPixelCM32</a>(pix-&gt;getInk(), 0, pix-&gt;getTone());</div>
<div class="line"><span class="lineno">  892</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!isPaint &amp;&amp; isInk)</div>
<div class="line"><span class="lineno">  893</span>          *pix = <a class="code hl_class" href="class_t_pixel_c_m32.html">TPixelCM32</a>(0, pix-&gt;getPaint(), TPixelCM32::getMaxTone());</div>
<div class="line"><span class="lineno">  894</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isPaint &amp;&amp; isInk)</div>
<div class="line"><span class="lineno">  895</span>          *pix = <a class="code hl_class" href="class_t_pixel_c_m32.html">TPixelCM32</a>(0, 0, pix-&gt;getTone());</div>
<div class="line"><span class="lineno">  896</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  897</span>          assert(0);</div>
<div class="line"><span class="lineno">  898</span>        pix++;</div>
<div class="line"><span class="lineno">  899</span>      }</div>
<div class="line"><span class="lineno">  900</span>    }</div>
<div class="line"><span class="lineno">  901</span>    ras-&gt;unlock();</div>
<div class="line"><span class="lineno">  902</span>  }</div>
<div class="line"><span class="lineno">  903</span>}</div>
<div class="ttc" id="aclass_t_toonz_image_html_ae04ea13c3803157ac69b01a83ad65865"><div class="ttname"><a href="class_t_toonz_image.html#ae04ea13c3803157ac69b01a83ad65865">TToonzImage::getRaster</a></div><div class="ttdeci">TRasterCM32P getRaster() const</div><div class="ttdoc">Return the image's raster.</div><div class="ttdef"><b>Definition:</b> ttoonzimage.h:106</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae9c480cced8c0b7b1cb8402e99c5af8d" name="ae9c480cced8c0b7b1cb8402e99c5af8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9c480cced8c0b7b1cb8402e99c5af8d">&#9670;&nbsp;</a></span>erodilate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::erodilate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ErodilateMaskType&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Applies classical morphological erosion/dilation to the specified input raster. </p><dl class="section note"><dt>Note</dt><dd>Supports rin == rout. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  496</span>                                             {</div>
<div class="line"><span class="lineno">  497</span>  assert(src-&gt;getSize() == dst-&gt;getSize());</div>
<div class="line"><span class="lineno">  498</span> </div>
<div class="line"><span class="lineno">  499</span>  src-&gt;lock(), dst-&gt;lock();</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>  <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)src &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)dst) <span class="keywordflow">switch</span> (type) {</div>
<div class="line"><span class="lineno">  502</span>    <span class="keywordflow">case</span> ED_rectangular:</div>
<div class="line"><span class="lineno">  503</span>      ::rect_erodilate&lt;TPixel32&gt;(src, dst, radius);</div>
<div class="line"><span class="lineno">  504</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  505</span>    <span class="keywordflow">case</span> ED_circular:</div>
<div class="line"><span class="lineno">  506</span>      ::circular_erodilate&lt;TPixel32&gt;(src, dst, radius);</div>
<div class="line"><span class="lineno">  507</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  508</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  509</span>      assert(!<span class="stringliteral">&quot;Unknown mask type&quot;</span>);</div>
<div class="line"><span class="lineno">  510</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  511</span>    }</div>
<div class="line"><span class="lineno">  512</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)src &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)dst)</div>
<div class="line"><span class="lineno">  513</span>    <span class="keywordflow">switch</span> (type) {</div>
<div class="line"><span class="lineno">  514</span>    <span class="keywordflow">case</span> ED_rectangular:</div>
<div class="line"><span class="lineno">  515</span>      ::rect_erodilate&lt;TPixel64&gt;(src, dst, radius);</div>
<div class="line"><span class="lineno">  516</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  517</span>    <span class="keywordflow">case</span> ED_circular:</div>
<div class="line"><span class="lineno">  518</span>      ::circular_erodilate&lt;TPixel64&gt;(src, dst, radius);</div>
<div class="line"><span class="lineno">  519</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  520</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  521</span>      assert(!<span class="stringliteral">&quot;Unknown mask type&quot;</span>);</div>
<div class="line"><span class="lineno">  522</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  523</span>    }</div>
<div class="line"><span class="lineno">  524</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  525</span>    assert(!<span class="stringliteral">&quot;Unsupported raster type!&quot;</span>);</div>
<div class="line"><span class="lineno">  526</span> </div>
<div class="line"><span class="lineno">  527</span>  src-&gt;unlock(), dst-&gt;unlock();</div>
<div class="line"><span class="lineno">  528</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b092782761fe2b3ce0dfb289b3dd02e" name="a8b092782761fe2b3ce0dfb289b3dd02e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b092782761fe2b3ce0dfb289b3dd02e">&#9670;&nbsp;</a></span>expandColor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::expandColor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRaster32P</a> &amp;&#160;</td>
          <td class="paramname"><em>ras32</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>precise</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1589</span>                                                            {</div>
<div class="line"><span class="lineno"> 1590</span>  <span class="keyword">struct </span>locals {</div>
<div class="line"><span class="lineno"> 1591</span>    <span class="keyword">static</span> <span class="keywordtype">void</span> copyRGB(TPixel32 *dst, TPixel32 *src) {</div>
<div class="line"><span class="lineno"> 1592</span>      dst-&gt;r = src-&gt;r;</div>
<div class="line"><span class="lineno"> 1593</span>      dst-&gt;g = src-&gt;g;</div>
<div class="line"><span class="lineno"> 1594</span>      dst-&gt;b = src-&gt;b;</div>
<div class="line"><span class="lineno"> 1595</span>    }</div>
<div class="line"><span class="lineno"> 1596</span>  };  <span class="comment">// locals</span></div>
<div class="line"><span class="lineno"> 1597</span>  ras32-&gt;lock();</div>
<div class="line"><span class="lineno"> 1598</span>  TPixel32 *endPix, *upPix = 0, *upRow = ras32-&gt;pixels();</div>
<div class="line"><span class="lineno"> 1599</span>  TPixel32 *lastPix =</div>
<div class="line"><span class="lineno"> 1600</span>      upRow + ras32-&gt;getWrap() * (ras32-&gt;getLy() - 1) + ras32-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1601</span>  <span class="keywordtype">int</span> currentRow = 0;</div>
<div class="line"><span class="lineno"> 1602</span>  <span class="keywordflow">while</span> (upPix &lt; lastPix) {</div>
<div class="line"><span class="lineno"> 1603</span>    upPix  = upRow;</div>
<div class="line"><span class="lineno"> 1604</span>    endPix = upPix + ras32-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1605</span>    <span class="keywordflow">while</span> (upPix &lt; endPix) {</div>
<div class="line"><span class="lineno"> 1606</span>      <span class="keywordflow">if</span> (upPix-&gt;m == 0) {</div>
<div class="line"><span class="lineno"> 1607</span>        <span class="comment">// search 4-neighbor pixels</span></div>
<div class="line"><span class="lineno"> 1608</span>        <span class="comment">// left</span></div>
<div class="line"><span class="lineno"> 1609</span>        <span class="keywordflow">if</span> (upPix != upRow &amp;&amp; (upPix - 1)-&gt;m != 0)</div>
<div class="line"><span class="lineno"> 1610</span>          locals::copyRGB(upPix, upPix - 1);</div>
<div class="line"><span class="lineno"> 1611</span>        <span class="comment">// right</span></div>
<div class="line"><span class="lineno"> 1612</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (upPix != endPix - 1 &amp;&amp; (upPix + 1)-&gt;m != 0)</div>
<div class="line"><span class="lineno"> 1613</span>          locals::copyRGB(upPix, upPix + 1);</div>
<div class="line"><span class="lineno"> 1614</span>        <span class="comment">// up</span></div>
<div class="line"><span class="lineno"> 1615</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (currentRow != 0 &amp;&amp; (upPix - ras32-&gt;getWrap())-&gt;m != 0)</div>
<div class="line"><span class="lineno"> 1616</span>          locals::copyRGB(upPix, upPix - ras32-&gt;getWrap());</div>
<div class="line"><span class="lineno"> 1617</span>        <span class="comment">// down</span></div>
<div class="line"><span class="lineno"> 1618</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (currentRow != ras32-&gt;getLy() - 1 &amp;&amp;</div>
<div class="line"><span class="lineno"> 1619</span>                 (upPix + ras32-&gt;getWrap())-&gt;m != 0)</div>
<div class="line"><span class="lineno"> 1620</span>          locals::copyRGB(upPix, upPix + ras32-&gt;getWrap());</div>
<div class="line"><span class="lineno"> 1621</span>        <span class="comment">// search 8-neighbor pixels</span></div>
<div class="line"><span class="lineno"> 1622</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (precise) {</div>
<div class="line"><span class="lineno"> 1623</span>          <span class="comment">// upper left</span></div>
<div class="line"><span class="lineno"> 1624</span>          <span class="keywordflow">if</span> (currentRow != 0 &amp;&amp; upPix != upRow &amp;&amp;</div>
<div class="line"><span class="lineno"> 1625</span>              (upPix - ras32-&gt;getWrap() - 1)-&gt;m != 0)</div>
<div class="line"><span class="lineno"> 1626</span>            locals::copyRGB(upPix, upPix - ras32-&gt;getWrap() - 1);</div>
<div class="line"><span class="lineno"> 1627</span>          <span class="comment">// upper right</span></div>
<div class="line"><span class="lineno"> 1628</span>          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (currentRow != 0 &amp;&amp; upPix != endPix - 1 &amp;&amp;</div>
<div class="line"><span class="lineno"> 1629</span>                   (upPix - ras32-&gt;getWrap() + 1)-&gt;m != 0)</div>
<div class="line"><span class="lineno"> 1630</span>            locals::copyRGB(upPix, upPix - ras32-&gt;getWrap() + 1);</div>
<div class="line"><span class="lineno"> 1631</span>          <span class="comment">// lower left</span></div>
<div class="line"><span class="lineno"> 1632</span>          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (currentRow != ras32-&gt;getLy() - 1 &amp;&amp; upPix != upRow &amp;&amp;</div>
<div class="line"><span class="lineno"> 1633</span>                   (upPix + ras32-&gt;getWrap() - 1)-&gt;m != 0)</div>
<div class="line"><span class="lineno"> 1634</span>            locals::copyRGB(upPix, upPix + ras32-&gt;getWrap() - 1);</div>
<div class="line"><span class="lineno"> 1635</span>          <span class="comment">// lower right</span></div>
<div class="line"><span class="lineno"> 1636</span>          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (currentRow != ras32-&gt;getLy() - 1 &amp;&amp; upPix != endPix - 1 &amp;&amp;</div>
<div class="line"><span class="lineno"> 1637</span>                   (upPix + ras32-&gt;getWrap() + 1)-&gt;m != 0)</div>
<div class="line"><span class="lineno"> 1638</span>            locals::copyRGB(upPix, upPix + ras32-&gt;getWrap() + 1);</div>
<div class="line"><span class="lineno"> 1639</span>        }</div>
<div class="line"><span class="lineno"> 1640</span>      }</div>
<div class="line"><span class="lineno"> 1641</span>      ++upPix;</div>
<div class="line"><span class="lineno"> 1642</span>    }</div>
<div class="line"><span class="lineno"> 1643</span>    upRow += ras32-&gt;getWrap();</div>
<div class="line"><span class="lineno"> 1644</span>    currentRow++;</div>
<div class="line"><span class="lineno"> 1645</span>  }</div>
<div class="line"><span class="lineno"> 1646</span>  ras32-&gt;unlock();</div>
<div class="line"><span class="lineno"> 1647</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fd8400a235f04da06f526186d439291" name="a4fd8400a235f04da06f526186d439291"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fd8400a235f04da06f526186d439291">&#9670;&nbsp;</a></span>expandPaint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::expandPaint </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;&#160;</td>
          <td class="paramname"><em>rasCM</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  238</span>                                                {</div>
<div class="line"><span class="lineno">  239</span>  distanceTransform(rasCM, SomePaint(), CopyPaint());</div>
<div class="line"><span class="lineno">  240</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abdc4625a0fab7775638e375c71404b4c" name="abdc4625a0fab7775638e375c71404b4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdc4625a0fab7775638e375c71404b4c">&#9670;&nbsp;</a></span>fracmove() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::fracmove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a>&#160;</td>
          <td class="paramname"><em>rin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;&#160;</td>
          <td class="paramname"><em>palette</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   93</span>                                          {</div>
<div class="line"><span class="lineno">   94</span>  <span class="keywordtype">double</span> w[4] = {1, 0, 0, 0};</div>
<div class="line"><span class="lineno">   95</span>  <span class="keywordtype">double</span> sum  = 0;</div>
<div class="line"><span class="lineno">   96</span> </div>
<div class="line"><span class="lineno">   97</span>  <span class="keywordtype">int</span> idx      = tfloor(dx);</div>
<div class="line"><span class="lineno">   98</span>  <span class="keywordtype">int</span> idy      = tfloor(dy);</div>
<div class="line"><span class="lineno">   99</span>  <span class="keywordtype">double</span> fracX = dx - idx;</div>
<div class="line"><span class="lineno">  100</span>  <span class="keywordtype">double</span> fracY = dy - idy;</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>  <span class="keywordtype">int</span> i, j;</div>
<div class="line"><span class="lineno">  103</span>  <span class="keywordflow">for</span> (i = 0; i &lt; 2; ++i)</div>
<div class="line"><span class="lineno">  104</span>    <span class="keywordflow">for</span> (j                = 0; j &lt; 2; ++j)</div>
<div class="line"><span class="lineno">  105</span>      sum += w[j + 2 * i] = fabs(fracX - j) * fabs(fracY - i);</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>  <span class="keywordflow">for</span> (i = 0; i &lt; 4; ++i) w[i] /= sum;</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>  TRop::convolve_i(rout, rin, idx, idy, w, 2);</div>
<div class="line"><span class="lineno">  110</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8af2a2c23b1112d7582523b6d3add109" name="a8af2a2c23b1112d7582523b6d3add109"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8af2a2c23b1112d7582523b6d3add109">&#9670;&nbsp;</a></span>fracmove() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::fracmove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   67</span>                                                                     {</div>
<div class="line"><span class="lineno">   68</span>  <span class="comment">// Using a bilinear filter is best - consider that only 4 pixels should</span></div>
<div class="line"><span class="lineno">   69</span>  <span class="comment">// contribute</span></div>
<div class="line"><span class="lineno">   70</span>  <span class="comment">// to a fractionarily shifted one, with weights proportional to the</span></div>
<div class="line"><span class="lineno">   71</span>  <span class="comment">// intersection areas.</span></div>
<div class="line"><span class="lineno">   72</span>  <span class="keywordtype">double</span> w[4] = {1, 0, 0, 0};</div>
<div class="line"><span class="lineno">   73</span>  <span class="keywordtype">double</span> sum  = 0;</div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span>  <span class="keywordtype">int</span> idx      = tfloor(dx);</div>
<div class="line"><span class="lineno">   76</span>  <span class="keywordtype">int</span> idy      = tfloor(dy);</div>
<div class="line"><span class="lineno">   77</span>  <span class="keywordtype">double</span> fracX = dx - idx;</div>
<div class="line"><span class="lineno">   78</span>  <span class="keywordtype">double</span> fracY = dy - idy;</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>  <span class="keywordtype">int</span> i, j;</div>
<div class="line"><span class="lineno">   81</span>  <span class="keywordflow">for</span> (i = 0; i &lt; 2; ++i)</div>
<div class="line"><span class="lineno">   82</span>    <span class="keywordflow">for</span> (j                = 0; j &lt; 2; ++j)</div>
<div class="line"><span class="lineno">   83</span>      sum += w[j + 2 * i] = fabs(fracX - j) * fabs(fracY - i);</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>  <span class="keywordflow">for</span> (i = 0; i &lt; 4; ++i) w[i] /= sum;</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>  TRop::convolve_i(rout, rin, idx, idy, w, 2);</div>
<div class="line"><span class="lineno">   88</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad4babe6813c171b27ede85b106642bf2" name="ad4babe6813c171b27ede85b106642bf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4babe6813c171b27ede85b106642bf2">&#9670;&nbsp;</a></span>gammaCorrect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::gammaCorrect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>raster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>gamma</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make a <b>gamma</b> correct in the <b>raster</b>. </p>
<div class="fragment"><div class="line"><span class="lineno">  173</span>                                                     {</div>
<div class="line"><span class="lineno">  174</span>  <span class="keywordflow">if</span> (gamma &lt;= 0) gamma = 0.01;</div>
<div class="line"><span class="lineno">  175</span>  raster-&gt;lock();</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>  <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)raster)</div>
<div class="line"><span class="lineno">  178</span>    doGammaCorrect&lt;TPixel32, UCHAR&gt;(raster, gamma);</div>
<div class="line"><span class="lineno">  179</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)raster)</div>
<div class="line"><span class="lineno">  180</span>    doGammaCorrect&lt;TPixel64, USHORT&gt;(raster, gamma);</div>
<div class="line"><span class="lineno">  181</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  182</span>    raster-&gt;unlock();</div>
<div class="line"><span class="lineno">  183</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;isOpaque: unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  184</span>  }</div>
<div class="line"><span class="lineno">  185</span>  raster-&gt;unlock();</div>
<div class="line"><span class="lineno">  186</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00644">Previewer::Imp::onRenderRasterCompleted()</a>, and <a class="el" href="#l00382">MovieRenderer::Imp::saveFrame()</a>.</p>

</div>
</div>
<a id="ae49245fbc12b809384cb6e1bf03c9b76" name="ae49245fbc12b809384cb6e1bf03c9b76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae49245fbc12b809384cb6e1bf03c9b76">&#9670;&nbsp;</a></span>gammaCorrectRGBM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::gammaCorrectRGBM </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>raster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>gammar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>gammag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>gammab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>gammam</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make a <b>gamma</b> correct in the <b>raster</b>. </p>
<div class="fragment"><div class="line"><span class="lineno">  190</span>                                                          {</div>
<div class="line"><span class="lineno">  191</span>  <span class="keywordflow">if</span> (gammar &lt;= 0) gammar = 0.01;</div>
<div class="line"><span class="lineno">  192</span>  <span class="keywordflow">if</span> (gammag &lt;= 0) gammag = 0.01;</div>
<div class="line"><span class="lineno">  193</span>  <span class="keywordflow">if</span> (gammab &lt;= 0) gammab = 0.01;</div>
<div class="line"><span class="lineno">  194</span>  <span class="keywordflow">if</span> (gammam &lt;= 0) gammam = 0.01;</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>  raster-&gt;lock();</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>  <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)raster)</div>
<div class="line"><span class="lineno">  199</span>    doGammaCorrectRGBM&lt;TPixel32, UCHAR&gt;(raster, gammar, gammag, gammab, gammam);</div>
<div class="line"><span class="lineno">  200</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)raster)</div>
<div class="line"><span class="lineno">  201</span>    doGammaCorrectRGBM&lt;TPixel64, USHORT&gt;(raster, gammar, gammag, gammab,</div>
<div class="line"><span class="lineno">  202</span>                                         gammam);</div>
<div class="line"><span class="lineno">  203</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  204</span>    raster-&gt;unlock();</div>
<div class="line"><span class="lineno">  205</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;isOpaque: unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  206</span>  }</div>
<div class="line"><span class="lineno">  207</span>  raster-&gt;unlock();</div>
<div class="line"><span class="lineno">  208</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae6809ae7f416ba30d31d3e7305be87f9" name="ae6809ae7f416ba30d31d3e7305be87f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6809ae7f416ba30d31d3e7305be87f9">&#9670;&nbsp;</a></span>getBlurBorder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int TRop::getBlurBorder </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>blur</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the pixel size of the <b>blur</b> border. </p>
<div class="fragment"><div class="line"><span class="lineno">  948</span>                                   {</div>
<div class="line"><span class="lineno">  949</span>  <span class="keywordtype">int</span> brad = (int)ceil(blur); <span class="comment">/* number of pixels involved in the filtering */</span></div>
<div class="line"><span class="lineno">  950</span> </div>
<div class="line"><span class="lineno">  951</span>  <span class="keywordtype">int</span> border = brad * 2;  <span class="comment">// per sicurezza</span></div>
<div class="line"><span class="lineno">  952</span>  <span class="keywordflow">return</span> border;</div>
<div class="line"><span class="lineno">  953</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6ed7aee971d5bb0c6a7304a76c161b51" name="a6ed7aee971d5bb0c6a7304a76c161b51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ed7aee971d5bb0c6a7304a76c161b51">&#9670;&nbsp;</a></span>glassRaylit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::glassRaylit </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>dstRas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>srcRas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_t_rop_1_1_raylit_params.html">RaylitParams</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  471</span>                                                   {</div>
<div class="line"><span class="lineno">  472</span>  <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)dstRas &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)srcRas)</div>
<div class="line"><span class="lineno">  473</span>    doRaylit&lt;TPixel32&gt;(srcRas, dstRas, params, &amp;performColorRaylit&lt;TPixel32&gt;);</div>
<div class="line"><span class="lineno">  474</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)dstRas &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)srcRas)</div>
<div class="line"><span class="lineno">  475</span>    doRaylit&lt;TPixel64&gt;(srcRas, dstRas, params, &amp;performColorRaylit&lt;TPixel64&gt;);</div>
<div class="line"><span class="lineno">  476</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  477</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;TRop::raylit unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  478</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1d8e2ff30b65313b6a82376d17be65cf" name="a1d8e2ff30b65313b6a82376d17be65cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d8e2ff30b65313b6a82376d17be65cf">&#9670;&nbsp;</a></span>invert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::invert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>ras</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>invRed</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>invGreen</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>invBlue</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>invMatte</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Invert <b>ras</b> color in according with <b>invRed</b>, <b>invGreen</b>, <b>invBlue</b>, <b>invMatte</b> </p>
<div class="fragment"><div class="line"><span class="lineno">   82</span>                                 {</div>
<div class="line"><span class="lineno">   83</span>  <span class="keywordflow">if</span> (!invRed &amp;&amp; !invGreen &amp;&amp; !invBlue) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   84</span>  <span class="keywordtype">bool</span> flag = invRed &amp;&amp; invGreen &amp;&amp; invBlue &amp;&amp; !invMatte;</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> ras32 = ras;</div>
<div class="line"><span class="lineno">   87</span>  ras-&gt;lock();</div>
<div class="line"><span class="lineno">   88</span>  <span class="keywordflow">if</span> (ras32)</div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">if</span> (flag)</div>
<div class="line"><span class="lineno">   90</span>      do_invert&lt;TPixel32&gt;(ras32);</div>
<div class="line"><span class="lineno">   91</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   92</span>      do_invert&lt;TPixel32&gt;(ras, invRed, invGreen, invBlue, invMatte);</div>
<div class="line"><span class="lineno">   93</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   94</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> ras64 = ras;</div>
<div class="line"><span class="lineno">   95</span>    <span class="keywordflow">if</span> (ras64)</div>
<div class="line"><span class="lineno">   96</span>      <span class="keywordflow">if</span> (flag)</div>
<div class="line"><span class="lineno">   97</span>        do_invert&lt;TPixel64&gt;(ras64);</div>
<div class="line"><span class="lineno">   98</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   99</span>        do_invert&lt;TPixel64&gt;(ras64, invRed, invGreen, invBlue, invMatte);</div>
<div class="line"><span class="lineno">  100</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  101</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> ras8 = ras;</div>
<div class="line"><span class="lineno">  102</span>      <span class="keywordflow">if</span> (ras8)</div>
<div class="line"><span class="lineno">  103</span>        do_invert&lt;TPixelGR8&gt;(ras8);</div>
<div class="line"><span class="lineno">  104</span>      <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  105</span>        ras-&gt;unlock();</div>
<div class="line"><span class="lineno">  106</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  107</span>      }</div>
<div class="line"><span class="lineno">  108</span>    }</div>
<div class="line"><span class="lineno">  109</span>  }</div>
<div class="line"><span class="lineno">  110</span>  ras-&gt;unlock();</div>
<div class="line"><span class="lineno">  111</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa724b97c8915446922e99821756d2275" name="aa724b97c8915446922e99821756d2275"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa724b97c8915446922e99821756d2275">&#9670;&nbsp;</a></span>isOpaque()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TRop::isOpaque </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>ras</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return true if <b>ras</b> is opaque. </p>
<div class="fragment"><div class="line"><span class="lineno">   41</span>                                {</div>
<div class="line"><span class="lineno">   42</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> ras32 = ras;</div>
<div class="line"><span class="lineno">   43</span>  <span class="keywordflow">if</span> (ras32)</div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordflow">return</span> isOpaque32(ras32);</div>
<div class="line"><span class="lineno">   45</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a>(ras))</div>
<div class="line"><span class="lineno">   46</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   47</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   48</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;isOpaque: unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">   49</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a99c6bf2fd7d769ac68ef2663b6bb5870" name="a99c6bf2fd7d769ac68ef2663b6bb5870"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99c6bf2fd7d769ac68ef2663b6bb5870">&#9670;&nbsp;</a></span>lighten()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::lighten </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rdown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1101</span>                                         {</div>
<div class="line"><span class="lineno"> 1102</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32   = rup;</div>
<div class="line"><span class="lineno"> 1103</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> down32 = rdown;</div>
<div class="line"><span class="lineno"> 1104</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32  = rout;</div>
<div class="line"><span class="lineno"> 1105</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64   = rup;</div>
<div class="line"><span class="lineno"> 1106</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> down64 = rdown;</div>
<div class="line"><span class="lineno"> 1107</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64  = rout;</div>
<div class="line"><span class="lineno"> 1108</span> </div>
<div class="line"><span class="lineno"> 1109</span>  <span class="keywordflow">if</span> (up32 &amp;&amp; down32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno"> 1110</span>    FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1111</span> </div>
<div class="line"><span class="lineno"> 1112</span>    <span class="keywordtype">double</span> value0 = luminance(upPix);</div>
<div class="line"><span class="lineno"> 1113</span>    <span class="keywordtype">double</span> value1 = luminance(downPix);</div>
<div class="line"><span class="lineno"> 1114</span> </div>
<div class="line"><span class="lineno"> 1115</span>    <span class="keywordflow">if</span> (value0 &gt; value1) {</div>
<div class="line"><span class="lineno"> 1116</span>      TINT32 r, g, b, m;</div>
<div class="line"><span class="lineno"> 1117</span>      <span class="keywordflow">if</span> (upPix-&gt;m == 0)</div>
<div class="line"><span class="lineno"> 1118</span>        *outPix = *downPix;</div>
<div class="line"><span class="lineno"> 1119</span>      <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1120</span>        r         = downPix-&gt;r + upPix-&gt;r;</div>
<div class="line"><span class="lineno"> 1121</span>        g         = downPix-&gt;g + upPix-&gt;g;</div>
<div class="line"><span class="lineno"> 1122</span>        b         = downPix-&gt;b + upPix-&gt;b;</div>
<div class="line"><span class="lineno"> 1123</span>        m         = downPix-&gt;m + upPix-&gt;m;</div>
<div class="line"><span class="lineno"> 1124</span>        outPix-&gt;r = (UCHAR)tcrop&lt;TINT32&gt;(r, (TINT32)0, (TINT32)255);</div>
<div class="line"><span class="lineno"> 1125</span>        outPix-&gt;g = (UCHAR)tcrop&lt;TINT32&gt;(g, (TINT32)0, (TINT32)255);</div>
<div class="line"><span class="lineno"> 1126</span>        outPix-&gt;b = (UCHAR)tcrop&lt;TINT32&gt;(b, (TINT32)0, (TINT32)255);</div>
<div class="line"><span class="lineno"> 1127</span>        outPix-&gt;m = (UCHAR)tcrop&lt;TINT32&gt;(m, (TINT32)0, (TINT32)255);</div>
<div class="line"><span class="lineno"> 1128</span>      }</div>
<div class="line"><span class="lineno"> 1129</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1130</span>      *outPix = *downPix;</div>
<div class="line"><span class="lineno"> 1131</span>    }</div>
<div class="line"><span class="lineno"> 1132</span> </div>
<div class="line"><span class="lineno"> 1133</span>    FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno"> 1134</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (up64 &amp;&amp; down64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno"> 1135</span>    FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1136</span> </div>
<div class="line"><span class="lineno"> 1137</span>    <span class="keywordtype">double</span> value0 = luminance(upPix);</div>
<div class="line"><span class="lineno"> 1138</span>    <span class="keywordtype">double</span> value1 = luminance(downPix);</div>
<div class="line"><span class="lineno"> 1139</span> </div>
<div class="line"><span class="lineno"> 1140</span>    <span class="keywordflow">if</span> (value0 &gt; value1) {</div>
<div class="line"><span class="lineno"> 1141</span>      TINT32 r, g, b, m;</div>
<div class="line"><span class="lineno"> 1142</span>      <span class="keywordflow">if</span> (upPix-&gt;m == 0)</div>
<div class="line"><span class="lineno"> 1143</span>        *outPix = *downPix;</div>
<div class="line"><span class="lineno"> 1144</span>      <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1145</span>        r         = downPix-&gt;r + upPix-&gt;r;</div>
<div class="line"><span class="lineno"> 1146</span>        g         = downPix-&gt;g + upPix-&gt;g;</div>
<div class="line"><span class="lineno"> 1147</span>        b         = downPix-&gt;b + upPix-&gt;b;</div>
<div class="line"><span class="lineno"> 1148</span>        m         = downPix-&gt;m + upPix-&gt;m;</div>
<div class="line"><span class="lineno"> 1149</span>        outPix-&gt;r = (USHORT)tcrop&lt;TINT32&gt;(r, (TINT32)0, (TINT32)65535);</div>
<div class="line"><span class="lineno"> 1150</span>        outPix-&gt;g = (USHORT)tcrop&lt;TINT32&gt;(g, (TINT32)0, (TINT32)65535);</div>
<div class="line"><span class="lineno"> 1151</span>        outPix-&gt;b = (USHORT)tcrop&lt;TINT32&gt;(b, (TINT32)0, (TINT32)65535);</div>
<div class="line"><span class="lineno"> 1152</span>        outPix-&gt;m = (USHORT)tcrop&lt;TINT32&gt;(m, (TINT32)0, (TINT32)65535);</div>
<div class="line"><span class="lineno"> 1153</span>      }</div>
<div class="line"><span class="lineno"> 1154</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1155</span>      *outPix = *downPix;</div>
<div class="line"><span class="lineno"> 1156</span>    }</div>
<div class="line"><span class="lineno"> 1157</span> </div>
<div class="line"><span class="lineno"> 1158</span>    FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno"> 1159</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1160</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::lighten invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno"> 1161</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a69a13be2091e3060864a17534b00af7b" name="a69a13be2091e3060864a17534b00af7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69a13be2091e3060864a17534b00af7b">&#9670;&nbsp;</a></span>linearburn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::linearburn </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rdown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1309</span>                                            {</div>
<div class="line"><span class="lineno"> 1310</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32   = rup;</div>
<div class="line"><span class="lineno"> 1311</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> down32 = rdown;</div>
<div class="line"><span class="lineno"> 1312</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32  = rout;</div>
<div class="line"><span class="lineno"> 1313</span> </div>
<div class="line"><span class="lineno"> 1314</span>  <span class="keywordflow">if</span> (up32 &amp;&amp; down32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno"> 1315</span>    FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1316</span>    <span class="keywordflow">if</span> (upPix-&gt;m) {</div>
<div class="line"><span class="lineno"> 1317</span>      TPixel32 app;</div>
<div class="line"><span class="lineno"> 1318</span>      <span class="keywordflow">if</span> (downPix-&gt;m) {</div>
<div class="line"><span class="lineno"> 1319</span>        TINT32 r, g, b, m;</div>
<div class="line"><span class="lineno"> 1320</span>        TPixel32 tmpPix;</div>
<div class="line"><span class="lineno"> 1321</span>        tmpPix = depremultiply(*downPix);</div>
<div class="line"><span class="lineno"> 1322</span>        r      = tmpPix.r + upPix-&gt;r - 255;</div>
<div class="line"><span class="lineno"> 1323</span>        g      = tmpPix.g + upPix-&gt;g - 255;</div>
<div class="line"><span class="lineno"> 1324</span>        b      = tmpPix.b + upPix-&gt;b - 255;</div>
<div class="line"><span class="lineno"> 1325</span>        m      = tmpPix.m + upPix-&gt;m - 255;</div>
<div class="line"><span class="lineno"> 1326</span> </div>
<div class="line"><span class="lineno"> 1327</span>        app.r = (UCHAR)tcrop&lt;TINT32&gt;(r, (TINT32)0, (TINT32)255);</div>
<div class="line"><span class="lineno"> 1328</span>        app.g = (UCHAR)tcrop&lt;TINT32&gt;(g, (TINT32)0, (TINT32)255);</div>
<div class="line"><span class="lineno"> 1329</span>        app.b = (UCHAR)tcrop&lt;TINT32&gt;(b, (TINT32)0, (TINT32)255);</div>
<div class="line"><span class="lineno"> 1330</span>        <span class="comment">// app.m = (UCHAR)tcrop&lt;TINT32&gt; (m, (TINT32)0, (TINT32)255);</span></div>
<div class="line"><span class="lineno"> 1331</span>        app.m = upPix-&gt;m;</div>
<div class="line"><span class="lineno"> 1332</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1333</span>        app = *upPix;</div>
<div class="line"><span class="lineno"> 1334</span>      overPix&lt;TPixel32, UCHAR&gt;(*outPix, *downPix, app);</div>
<div class="line"><span class="lineno"> 1335</span>    }</div>
<div class="line"><span class="lineno"> 1336</span>    FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno"> 1337</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1338</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64   = rup;</div>
<div class="line"><span class="lineno"> 1339</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> down64 = rdown;</div>
<div class="line"><span class="lineno"> 1340</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64  = rout;</div>
<div class="line"><span class="lineno"> 1341</span> </div>
<div class="line"><span class="lineno"> 1342</span>    <span class="keywordflow">if</span> (up64 &amp;&amp; down64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno"> 1343</span>      FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1344</span> </div>
<div class="line"><span class="lineno"> 1345</span>      <span class="keywordflow">if</span> (upPix-&gt;m) {</div>
<div class="line"><span class="lineno"> 1346</span>        TPixel64 app;</div>
<div class="line"><span class="lineno"> 1347</span>        <span class="keywordflow">if</span> (downPix-&gt;m) {</div>
<div class="line"><span class="lineno"> 1348</span>          TINT32 r, g, b, m;</div>
<div class="line"><span class="lineno"> 1349</span>          TPixel64 tmpPix;</div>
<div class="line"><span class="lineno"> 1350</span>          tmpPix = depremultiply(*downPix);</div>
<div class="line"><span class="lineno"> 1351</span>          r      = tmpPix.r + upPix-&gt;r - 65535;</div>
<div class="line"><span class="lineno"> 1352</span>          g      = tmpPix.g + upPix-&gt;g - 65535;</div>
<div class="line"><span class="lineno"> 1353</span>          b      = tmpPix.b + upPix-&gt;b - 65535;</div>
<div class="line"><span class="lineno"> 1354</span>          m      = tmpPix.m + upPix-&gt;m - 65535;</div>
<div class="line"><span class="lineno"> 1355</span> </div>
<div class="line"><span class="lineno"> 1356</span>          app.r = (USHORT)tcrop&lt;TINT32&gt;(r, 0, 0xffff);</div>
<div class="line"><span class="lineno"> 1357</span>          app.g = (USHORT)tcrop&lt;TINT32&gt;(g, 0, 0xffff);</div>
<div class="line"><span class="lineno"> 1358</span>          app.b = (USHORT)tcrop&lt;TINT32&gt;(b, 0, 0xffff);</div>
<div class="line"><span class="lineno"> 1359</span>          <span class="comment">// app.m = (UCHAR)tcrop&lt;TINT32&gt; (m, (TINT32)0, (TINT32)255);</span></div>
<div class="line"><span class="lineno"> 1360</span>          app.m = upPix-&gt;m;</div>
<div class="line"><span class="lineno"> 1361</span>        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1362</span>          app = *upPix;</div>
<div class="line"><span class="lineno"> 1363</span>        overPix&lt;TPixel64, USHORT&gt;(*outPix, *downPix, app);</div>
<div class="line"><span class="lineno"> 1364</span>      }</div>
<div class="line"><span class="lineno"> 1365</span> </div>
<div class="line"><span class="lineno"> 1366</span>      FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno"> 1367</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1368</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> up8   = rup;</div>
<div class="line"><span class="lineno"> 1369</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> down8 = rdown;</div>
<div class="line"><span class="lineno"> 1370</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> out8  = rout;</div>
<div class="line"><span class="lineno"> 1371</span> </div>
<div class="line"><span class="lineno"> 1372</span>      <span class="keywordflow">if</span> (up8 &amp;&amp; down8 &amp;&amp; out8) {</div>
<div class="line"><span class="lineno"> 1373</span>        FOR_EACH_PIXEL_8_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1374</span>        USHORT value = troundp(upPix-&gt;value + downPix-&gt;value - 255);</div>
<div class="line"><span class="lineno"> 1375</span> </div>
<div class="line"><span class="lineno"> 1376</span>        outPix-&gt;value = (UCHAR)tcrop&lt;USHORT&gt;(value, 0, 255);</div>
<div class="line"><span class="lineno"> 1377</span> </div>
<div class="line"><span class="lineno"> 1378</span>        FOR_EACH_PIXEL_8_END_LOOP</div>
<div class="line"><span class="lineno"> 1379</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1380</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::max invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno"> 1381</span>    }</div>
<div class="line"><span class="lineno"> 1382</span>  }</div>
<div class="line"><span class="lineno"> 1383</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0403b9158edb19e8b805ef2cfffc8900" name="a0403b9158edb19e8b805ef2cfffc8900"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0403b9158edb19e8b805ef2cfffc8900">&#9670;&nbsp;</a></span>lockRaster()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::lockRaster </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct___r_a_s_t_e_r.html">_RASTER</a> *&#160;</td>
          <td class="paramname"><em>raster</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Retrieves the input raster from Toonz internal cache. Need to call it before using the raster. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1144</span>                                    {</div>
<div class="line"><span class="lineno"> 1145</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TImageP</a> img(TImageCache::instance()-&gt;get(</div>
<div class="line"><span class="lineno"> 1146</span>      std::string(raster-&gt;cacheId, raster-&gt;cacheIdLength), <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno"> 1147</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> cacheRas;</div>
<div class="line"><span class="lineno"> 1148</span>  <span class="keywordflow">if</span> (raster-&gt;type == RAS_CM32)</div>
<div class="line"><span class="lineno"> 1149</span>    cacheRas = <a class="code hl_class" href="class_t_toonz_image_p.html">TToonzImageP</a>(img)-&gt;getRaster();</div>
<div class="line"><span class="lineno"> 1150</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1151</span>    cacheRas = <a class="code hl_class" href="class_t_raster_image_p.html">TRasterImageP</a>(img)-&gt;getRaster();</div>
<div class="line"><span class="lineno"> 1152</span>  cacheRas-&gt;addRef();</div>
<div class="line"><span class="lineno"> 1153</span>  raster-&gt;buffer  = cacheRas-&gt;<a class="code hl_function" href="class_t_raster.html#a5ce02b7e8a5b8b594863aa272d8dcdbc">getRawData</a>();</div>
<div class="line"><span class="lineno"> 1154</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> parent = cacheRas-&gt;getParent();</div>
<div class="line"><span class="lineno"> 1155</span>  raster-&gt;native_buffer =</div>
<div class="line"><span class="lineno"> 1156</span>      (parent) ? parent-&gt;<a class="code hl_function" href="class_t_raster.html#a5ce02b7e8a5b8b594863aa272d8dcdbc">getRawData</a>() : cacheRas-&gt;<a class="code hl_function" href="class_t_raster.html#a5ce02b7e8a5b8b594863aa272d8dcdbc">getRawData</a>();</div>
<div class="line"><span class="lineno"> 1157</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00158">TRaster::getRawData()</a>.</p>

</div>
</div>
<a id="a6dd60c2e85a75e42d593ee351876d614" name="a6dd60c2e85a75e42d593ee351876d614"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dd60c2e85a75e42d593ee351876d614">&#9670;&nbsp;</a></span>majorityDespeckle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DVAPI void TRop::majorityDespeckle </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>ras</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sizeThreshold</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Performs despeckling by replacing the color of small uniform areas (those enclosable in a square of specified edge length) with that most occurring along the area border. </p>

</div>
</div>
<a id="a35179ddf5774082da20b53eb7baf0e96" name="a35179ddf5774082da20b53eb7baf0e96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35179ddf5774082da20b53eb7baf0e96">&#9670;&nbsp;</a></span>makeIcon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::makeIcon </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;&#160;</td>
          <td class="paramname"><em>rin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1437</span>                                                                {</div>
<div class="line"><span class="lineno"> 1438</span>  <span class="keywordtype">int</span> i, j;</div>
<div class="line"><span class="lineno"> 1439</span>  <span class="keywordtype">int</span> lx = rin-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1440</span>  <span class="keywordtype">int</span> ly = rin-&gt;getLy();</div>
<div class="line"><span class="lineno"> 1441</span> </div>
<div class="line"><span class="lineno"> 1442</span>  <a class="code hl_class" href="class_t_dimension_t.html">TDimension</a> dim(_rout-&gt;getSize());</div>
<div class="line"><span class="lineno"> 1443</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRasterCM32P</a> rout;</div>
<div class="line"><span class="lineno"> 1444</span> </div>
<div class="line"><span class="lineno"> 1445</span>  rout = _rout;</div>
<div class="line"><span class="lineno"> 1446</span> </div>
<div class="line"><span class="lineno"> 1447</span>  rout-&gt;lock();</div>
<div class="line"><span class="lineno"> 1448</span>  rin-&gt;lock();</div>
<div class="line"><span class="lineno"> 1449</span>  <a class="code hl_class" href="class_t_pixel_c_m32.html">TPixelCM32</a> *pixOut0 = (<a class="code hl_class" href="class_t_pixel_c_m32.html">TPixelCM32</a> *)rout-&gt;getRawData();</div>
<div class="line"><span class="lineno"> 1450</span> </div>
<div class="line"><span class="lineno"> 1451</span>  <span class="keywordtype">int</span> countY  = 0;</div>
<div class="line"><span class="lineno"> 1452</span>  <span class="keywordtype">bool</span> newRow = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1453</span> </div>
<div class="line"><span class="lineno"> 1454</span>  <span class="keywordflow">for</span> (i = 0; i &lt; ly; i++) {</div>
<div class="line"><span class="lineno"> 1455</span>    <a class="code hl_class" href="class_t_pixel_c_m32.html">TPixelCM32</a> *pixIn  = (<a class="code hl_class" href="class_t_pixel_c_m32.html">TPixelCM32</a> *)rin-&gt;pixels(i);</div>
<div class="line"><span class="lineno"> 1456</span>    <a class="code hl_class" href="class_t_pixel_c_m32.html">TPixelCM32</a> *pixOut = pixOut0;</div>
<div class="line"><span class="lineno"> 1457</span>    <span class="keywordtype">int</span> countX         = 0;</div>
<div class="line"><span class="lineno"> 1458</span>    <span class="keywordtype">bool</span> newColumn     = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1459</span>    <span class="keywordflow">for</span> (j = 0; j &lt; lx; j++) {</div>
<div class="line"><span class="lineno"> 1460</span>      <span class="keywordflow">if</span> ((newRow &amp;&amp; newColumn) || pixOut-&gt;getTone() &gt; pixIn-&gt;getTone())</div>
<div class="line"><span class="lineno"> 1461</span>        *pixOut = *pixIn;</div>
<div class="line"><span class="lineno"> 1462</span> </div>
<div class="line"><span class="lineno"> 1463</span>      pixIn++;</div>
<div class="line"><span class="lineno"> 1464</span>      countX += dim.lx;</div>
<div class="line"><span class="lineno"> 1465</span>      <span class="keywordflow">if</span> (countX &gt;= lx) {</div>
<div class="line"><span class="lineno"> 1466</span>        countX -= lx, pixOut++;</div>
<div class="line"><span class="lineno"> 1467</span>        newColumn = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1468</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1469</span>        newColumn = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1470</span>    }</div>
<div class="line"><span class="lineno"> 1471</span> </div>
<div class="line"><span class="lineno"> 1472</span>    countY += dim.ly;</div>
<div class="line"><span class="lineno"> 1473</span>    <span class="keywordflow">if</span> (countY &gt;= ly) {</div>
<div class="line"><span class="lineno"> 1474</span>      countY -= ly;</div>
<div class="line"><span class="lineno"> 1475</span>      pixOut0 += rout-&gt;getWrap();</div>
<div class="line"><span class="lineno"> 1476</span>      newRow = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1477</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1478</span>      newRow = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1479</span>  }</div>
<div class="line"><span class="lineno"> 1480</span>  rout-&gt;unlock();</div>
<div class="line"><span class="lineno"> 1481</span>  rin-&gt;unlock();</div>
<div class="line"><span class="lineno"> 1482</span>}</div>
<div class="ttc" id="aclass_t_dimension_t_html"><div class="ttname"><a href="class_t_dimension_t.html">TDimensionT&lt; int &gt;</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ffa1a15060b77c5386240cdcb06394f" name="a8ffa1a15060b77c5386240cdcb06394f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ffa1a15060b77c5386240cdcb06394f">&#9670;&nbsp;</a></span>makeStereoRaster()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::makeStereoRaster </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  325</span>                                                                       {</div>
<div class="line"><span class="lineno">  326</span>  assert(left-&gt;getSize() == right-&gt;getSize());</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>  left-&gt;lock();</div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span>  <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)left &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)right)</div>
<div class="line"><span class="lineno">  331</span>    doMakeStereoRaster&lt;TPixel32&gt;(left, right);</div>
<div class="line"><span class="lineno">  332</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)left &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)right)</div>
<div class="line"><span class="lineno">  333</span>    doMakeStereoRaster&lt;TPixel64&gt;(left, right);</div>
<div class="line"><span class="lineno">  334</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  335</span>    left-&gt;unlock();</div>
<div class="line"><span class="lineno">  336</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;setChannel: unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  337</span>  }</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span>  left-&gt;unlock();</div>
<div class="line"><span class="lineno">  340</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a76f8b77a1eff52235e1124540365aba2" name="a76f8b77a1eff52235e1124540365aba2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76f8b77a1eff52235e1124540365aba2">&#9670;&nbsp;</a></span>mult()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::mult </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rdown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>matte</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  592</span>                                                         {</div>
<div class="line"><span class="lineno">  593</span>  <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  594</span><span class="comment">Let U be &#39;up&#39;, D be &#39;down&#39; and M be &#39;multiplied&#39; (the result), and suppose for</span></div>
<div class="line"><span class="lineno">  595</span><span class="comment">the moment</span></div>
<div class="line"><span class="lineno">  596</span><span class="comment">that pixels are both NOT premultiplied and normalized to [0, 1].</span></div>
<div class="line"><span class="lineno">  597</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  598</span><span class="comment">The additional value v is used to add to RGB components of the U pixel:</span></div>
<div class="line"><span class="lineno">  599</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  600</span><span class="comment">U&#39;_rgb = (U_rgb + v / 255)</span></div>
<div class="line"><span class="lineno">  601</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  602</span><span class="comment">The matte component is either U_m D_m in case (matte == true), or D_m in case</span></div>
<div class="line"><span class="lineno">  603</span><span class="comment">(matte == false).</span></div>
<div class="line"><span class="lineno">  604</span><span class="comment">Please, observe that in the case (matte == false) that choice makes the product</span></div>
<div class="line"><span class="lineno">  605</span><span class="comment">NOT COMMUTATIVE,</span></div>
<div class="line"><span class="lineno">  606</span><span class="comment">but I think that&#39;s justified - it&#39;s simply the most obvious use case.</span></div>
<div class="line"><span class="lineno">  607</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  608</span><span class="comment">In case (matte == true), each channel is multiplied independently, and that&#39;s</span></div>
<div class="line"><span class="lineno">  609</span><span class="comment">it.</span></div>
<div class="line"><span class="lineno">  610</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  611</span><span class="comment">The matter is more complicated when (matte == false). The problem in this case</span></div>
<div class="line"><span class="lineno">  612</span><span class="comment">is dealing with rgb</span></div>
<div class="line"><span class="lineno">  613</span><span class="comment">components when U and D both have some transparency.  When U is fully</span></div>
<div class="line"><span class="lineno">  614</span><span class="comment">transparent, we expect the</span></div>
<div class="line"><span class="lineno">  615</span><span class="comment">result to be D, and vice-versa, which is non-trivial.</span></div>
<div class="line"><span class="lineno">  616</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  617</span><span class="comment">We REQUIRE that (let&#39;s denote r only here):</span></div>
<div class="line"><span class="lineno">  618</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  619</span><span class="comment">M_r = M_r_u = U_r (1 - D_m) + U_r D_r D_m,   when  U_m == 1    (When U is fully</span></div>
<div class="line"><span class="lineno">  620</span><span class="comment">opaque, M_r is a D_m-linear</span></div>
<div class="line"><span class="lineno">  621</span><span class="comment">                                                                combination of</span></div>
<div class="line"><span class="lineno">  622</span><span class="comment">U_r and U_r D_r)</span></div>
<div class="line"><span class="lineno">  623</span><span class="comment">M_r = M_r_d = D_r (1 - U_m) + U_r D_r U_m,   when  D_m == 1    (Vice-versa, when</span></div>
<div class="line"><span class="lineno">  624</span><span class="comment">it&#39;s D that is fully opaque)</span></div>
<div class="line"><span class="lineno">  625</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  626</span><span class="comment">Finally, we&#39;re building a weighted sum, by U_m and D_m of the two above:</span></div>
<div class="line"><span class="lineno">  627</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  628</span><span class="comment">M_r = (M_r_u * U_m + M_r_d * D_m) / (U_m + D_m) =</span></div>
<div class="line"><span class="lineno">  629</span><span class="comment">    = (...) =</span></div>
<div class="line"><span class="lineno">  630</span><span class="comment">    = [ U_r U_m (1 - D_m) + D_r D_m (1 - U_m) + 2 U_r U_m  D_r D_m ] / (U_m +</span></div>
<div class="line"><span class="lineno">  631</span><span class="comment">D_m)</span></div>
<div class="line"><span class="lineno">  632</span><span class="comment">*/</span></div>
<div class="line"><span class="lineno">  633</span> </div>
<div class="line"><span class="lineno">  634</span>  <span class="comment">// 32-bit images case</span></div>
<div class="line"><span class="lineno">  635</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32 = rup, down32 = rdown, out32 = rout;</div>
<div class="line"><span class="lineno">  636</span> </div>
<div class="line"><span class="lineno">  637</span>  <span class="keywordflow">if</span> (up32 &amp;&amp; down32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno">  638</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span> maxChannelF = float(TPixel32::maxChannelValue);</div>
<div class="line"><span class="lineno">  639</span>    <span class="keyword">static</span> <span class="keyword">const</span> UCHAR maxChannelC = UCHAR(TPixel32::maxChannelValue);</div>
<div class="line"><span class="lineno">  640</span> </div>
<div class="line"><span class="lineno">  641</span>    <span class="keywordtype">float</span> vf = v;</div>
<div class="line"><span class="lineno">  642</span> </div>
<div class="line"><span class="lineno">  643</span>    <span class="keywordflow">if</span> (matte) {</div>
<div class="line"><span class="lineno">  644</span>      <span class="keywordtype">float</span> dnMf, upMf_norm, outMf;</div>
<div class="line"><span class="lineno">  645</span> </div>
<div class="line"><span class="lineno">  646</span>      FOR_EACH_PIXEL_32_BEGIN_LOOP  <span class="comment">// Awful... should be explicit...</span></div>
<div class="line"><span class="lineno">  647</span> </div>
<div class="line"><span class="lineno">  648</span>          dnMf  = downPix-&gt;m;</div>
<div class="line"><span class="lineno">  649</span>      upMf_norm = upPix-&gt;m / maxChannelF;</div>
<div class="line"><span class="lineno">  650</span> </div>
<div class="line"><span class="lineno">  651</span>      outMf = downPix-&gt;m * upMf_norm;</div>
<div class="line"><span class="lineno">  652</span> </div>
<div class="line"><span class="lineno">  653</span>      outPix-&gt;r =</div>
<div class="line"><span class="lineno">  654</span>          tcrop((upPix-&gt;r / upMf_norm + vf) * (downPix-&gt;r / dnMf), 0.0f, outMf);</div>
<div class="line"><span class="lineno">  655</span>      outPix-&gt;g =</div>
<div class="line"><span class="lineno">  656</span>          tcrop((upPix-&gt;g / upMf_norm + vf) * (downPix-&gt;g / dnMf), 0.0f, outMf);</div>
<div class="line"><span class="lineno">  657</span>      outPix-&gt;b =</div>
<div class="line"><span class="lineno">  658</span>          tcrop((upPix-&gt;b / upMf_norm + vf) * (downPix-&gt;b / dnMf), 0.0f, outMf);</div>
<div class="line"><span class="lineno">  659</span>      outPix-&gt;m = outMf;</div>
<div class="line"><span class="lineno">  660</span> </div>
<div class="line"><span class="lineno">  661</span>      <span class="comment">// NOTE:  + 0.5f in the crop arguments could take care of rounding...</span></div>
<div class="line"><span class="lineno">  662</span> </div>
<div class="line"><span class="lineno">  663</span>      FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno">  664</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  665</span>      <span class="keywordtype">float</span> umf_norm, dmf_norm, umdmf_norm, outMf;</div>
<div class="line"><span class="lineno">  666</span>      <span class="keywordtype">float</span> mSumf, uf, df, ufdf, normalizer;</div>
<div class="line"><span class="lineno">  667</span> </div>
<div class="line"><span class="lineno">  668</span>      FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  669</span> </div>
<div class="line"><span class="lineno">  670</span>      mSumf = upPix-&gt;m + float(downPix-&gt;m);</div>
<div class="line"><span class="lineno">  671</span>      <span class="keywordflow">if</span> (mSumf &gt; 0.0f) {</div>
<div class="line"><span class="lineno">  672</span>        umf_norm = upPix-&gt;m / maxChannelF, dmf_norm = downPix-&gt;m / maxChannelF;</div>
<div class="line"><span class="lineno">  673</span>        outMf = upPix-&gt;m +</div>
<div class="line"><span class="lineno">  674</span>                (1.0f - umf_norm) *</div>
<div class="line"><span class="lineno">  675</span>                    downPix-&gt;m;  <span class="comment">// umf_norm should be ensured in [0.0, 1.0].</span></div>
<div class="line"><span class="lineno">  676</span>        <span class="comment">// Convex combination should be in the conversion range.</span></div>
<div class="line"><span class="lineno">  677</span>        normalizer = outMf / (maxChannelF * mSumf);</div>
<div class="line"><span class="lineno">  678</span>        umdmf_norm = umf_norm * dmf_norm;</div>
<div class="line"><span class="lineno">  679</span> </div>
<div class="line"><span class="lineno">  680</span>        uf = upPix-&gt;r + vf * umdmf_norm, df = downPix-&gt;r, ufdf = uf * df;</div>
<div class="line"><span class="lineno">  681</span>        outPix-&gt;r = tcrop((uf * (maxChannelC - downPix-&gt;m) +</div>
<div class="line"><span class="lineno">  682</span>                           df * (maxChannelC - upPix-&gt;m) + ufdf + ufdf) *</div>
<div class="line"><span class="lineno">  683</span>                              normalizer,</div>
<div class="line"><span class="lineno">  684</span>                          0.0f, outMf);</div>
<div class="line"><span class="lineno">  685</span> </div>
<div class="line"><span class="lineno">  686</span>        uf = upPix-&gt;g + vf * umdmf_norm, df = downPix-&gt;g, ufdf = uf * df;</div>
<div class="line"><span class="lineno">  687</span>        outPix-&gt;g = tcrop((uf * (maxChannelC - downPix-&gt;m) +</div>
<div class="line"><span class="lineno">  688</span>                           df * (maxChannelC - upPix-&gt;m) + ufdf + ufdf) *</div>
<div class="line"><span class="lineno">  689</span>                              normalizer,</div>
<div class="line"><span class="lineno">  690</span>                          0.0f, outMf);</div>
<div class="line"><span class="lineno">  691</span> </div>
<div class="line"><span class="lineno">  692</span>        uf = upPix-&gt;b + vf * umdmf_norm, df = downPix-&gt;b, ufdf = uf * df;</div>
<div class="line"><span class="lineno">  693</span>        outPix-&gt;b = tcrop((uf * (maxChannelC - downPix-&gt;m) +</div>
<div class="line"><span class="lineno">  694</span>                           df * (maxChannelC - upPix-&gt;m) + ufdf + ufdf) *</div>
<div class="line"><span class="lineno">  695</span>                              normalizer,</div>
<div class="line"><span class="lineno">  696</span>                          0.0f, outMf);</div>
<div class="line"><span class="lineno">  697</span> </div>
<div class="line"><span class="lineno">  698</span>        outPix-&gt;m = outMf;</div>
<div class="line"><span class="lineno">  699</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  700</span>        *outPix = TPixel32::Transparent;</div>
<div class="line"><span class="lineno">  701</span> </div>
<div class="line"><span class="lineno">  702</span>      FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno">  703</span>    }</div>
<div class="line"><span class="lineno">  704</span> </div>
<div class="line"><span class="lineno">  705</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  706</span>  }</div>
<div class="line"><span class="lineno">  707</span> </div>
<div class="line"><span class="lineno">  708</span>  <span class="comment">// 64-bit images case</span></div>
<div class="line"><span class="lineno">  709</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64 = rup, down64 = rdown, out64 = rout;</div>
<div class="line"><span class="lineno">  710</span> </div>
<div class="line"><span class="lineno">  711</span>  <span class="keywordflow">if</span> (up64 &amp;&amp; down64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno">  712</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> maxChannelF = double(TPixel64::maxChannelValue);</div>
<div class="line"><span class="lineno">  713</span>    <span class="keyword">static</span> <span class="keyword">const</span> USHORT maxChannelC = USHORT(TPixel64::maxChannelValue);</div>
<div class="line"><span class="lineno">  714</span> </div>
<div class="line"><span class="lineno">  715</span>    <span class="keywordtype">double</span> vf =</div>
<div class="line"><span class="lineno">  716</span>        v * (TPixel64::maxChannelValue / double(TPixel32::maxChannelValue));</div>
<div class="line"><span class="lineno">  717</span> </div>
<div class="line"><span class="lineno">  718</span>    <span class="keywordflow">if</span> (matte) {</div>
<div class="line"><span class="lineno">  719</span>      <span class="keywordtype">double</span> dnMf, upMf_norm, outMf;</div>
<div class="line"><span class="lineno">  720</span> </div>
<div class="line"><span class="lineno">  721</span>      FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  722</span> </div>
<div class="line"><span class="lineno">  723</span>      dnMf      = downPix-&gt;m;</div>
<div class="line"><span class="lineno">  724</span>      upMf_norm = upPix-&gt;m / maxChannelF;</div>
<div class="line"><span class="lineno">  725</span> </div>
<div class="line"><span class="lineno">  726</span>      outMf = downPix-&gt;m * upMf_norm;</div>
<div class="line"><span class="lineno">  727</span> </div>
<div class="line"><span class="lineno">  728</span>      outPix-&gt;r =</div>
<div class="line"><span class="lineno">  729</span>          tcrop((upPix-&gt;r / upMf_norm + vf) * (downPix-&gt;r / dnMf), 0.0, outMf);</div>
<div class="line"><span class="lineno">  730</span>      outPix-&gt;g =</div>
<div class="line"><span class="lineno">  731</span>          tcrop((upPix-&gt;g / upMf_norm + vf) * (downPix-&gt;g / dnMf), 0.0, outMf);</div>
<div class="line"><span class="lineno">  732</span>      outPix-&gt;b =</div>
<div class="line"><span class="lineno">  733</span>          tcrop((upPix-&gt;b / upMf_norm + vf) * (downPix-&gt;b / dnMf), 0.0, outMf);</div>
<div class="line"><span class="lineno">  734</span>      outPix-&gt;m = outMf;</div>
<div class="line"><span class="lineno">  735</span> </div>
<div class="line"><span class="lineno">  736</span>      FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno">  737</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  738</span>      <span class="keywordtype">double</span> umf_norm, dmf_norm, umdmf_norm, outMf;</div>
<div class="line"><span class="lineno">  739</span>      <span class="keywordtype">double</span> mSumf, uf, df, ufdf, normalizer;</div>
<div class="line"><span class="lineno">  740</span> </div>
<div class="line"><span class="lineno">  741</span>      FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  742</span> </div>
<div class="line"><span class="lineno">  743</span>      mSumf = upPix-&gt;m + double(downPix-&gt;m);</div>
<div class="line"><span class="lineno">  744</span>      <span class="keywordflow">if</span> (mSumf &gt; 0.0) {</div>
<div class="line"><span class="lineno">  745</span>        umf_norm = upPix-&gt;m / maxChannelF, dmf_norm = downPix-&gt;m / maxChannelF;</div>
<div class="line"><span class="lineno">  746</span>        outMf = upPix-&gt;m + (1.0 - umf_norm) * downPix-&gt;m;</div>
<div class="line"><span class="lineno">  747</span> </div>
<div class="line"><span class="lineno">  748</span>        normalizer = outMf / (maxChannelF * mSumf);</div>
<div class="line"><span class="lineno">  749</span>        umdmf_norm = umf_norm * dmf_norm;</div>
<div class="line"><span class="lineno">  750</span> </div>
<div class="line"><span class="lineno">  751</span>        uf = upPix-&gt;r + vf * umdmf_norm, df = downPix-&gt;r, ufdf = uf * df;</div>
<div class="line"><span class="lineno">  752</span>        outPix-&gt;r = tcrop((uf * (maxChannelC - downPix-&gt;m) +</div>
<div class="line"><span class="lineno">  753</span>                           df * (maxChannelC - upPix-&gt;m) + ufdf + ufdf) *</div>
<div class="line"><span class="lineno">  754</span>                              normalizer,</div>
<div class="line"><span class="lineno">  755</span>                          0.0, outMf);</div>
<div class="line"><span class="lineno">  756</span> </div>
<div class="line"><span class="lineno">  757</span>        uf = upPix-&gt;g + vf * umdmf_norm, df = downPix-&gt;g, ufdf = uf * df;</div>
<div class="line"><span class="lineno">  758</span>        outPix-&gt;g = tcrop((uf * (maxChannelC - downPix-&gt;m) +</div>
<div class="line"><span class="lineno">  759</span>                           df * (maxChannelC - upPix-&gt;m) + ufdf + ufdf) *</div>
<div class="line"><span class="lineno">  760</span>                              normalizer,</div>
<div class="line"><span class="lineno">  761</span>                          0.0, outMf);</div>
<div class="line"><span class="lineno">  762</span> </div>
<div class="line"><span class="lineno">  763</span>        uf = upPix-&gt;b + vf * umdmf_norm, df = downPix-&gt;b, ufdf = uf * df;</div>
<div class="line"><span class="lineno">  764</span>        outPix-&gt;b = tcrop((uf * (maxChannelC - downPix-&gt;m) +</div>
<div class="line"><span class="lineno">  765</span>                           df * (maxChannelC - upPix-&gt;m) + ufdf + ufdf) *</div>
<div class="line"><span class="lineno">  766</span>                              normalizer,</div>
<div class="line"><span class="lineno">  767</span>                          0.0, outMf);</div>
<div class="line"><span class="lineno">  768</span> </div>
<div class="line"><span class="lineno">  769</span>        outPix-&gt;m = outMf;</div>
<div class="line"><span class="lineno">  770</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  771</span>        *outPix = TPixel64::Transparent;</div>
<div class="line"><span class="lineno">  772</span> </div>
<div class="line"><span class="lineno">  773</span>      FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno">  774</span>    }</div>
<div class="line"><span class="lineno">  775</span> </div>
<div class="line"><span class="lineno">  776</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  777</span>  }</div>
<div class="line"><span class="lineno">  778</span> </div>
<div class="line"><span class="lineno">  779</span>  <span class="comment">// According to the specifics, throw an exception. I think it&#39;s not</span></div>
<div class="line"><span class="lineno">  780</span>  <span class="comment">// appropriate, though.</span></div>
<div class="line"><span class="lineno">  781</span>  <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::mult invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno">  782</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae5fd1fb0c2f625e1da14fe92ae0e5122" name="ae5fd1fb0c2f625e1da14fe92ae0e5122"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5fd1fb0c2f625e1da14fe92ae0e5122">&#9670;&nbsp;</a></span>over() <span class="overload">[1/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::over </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>dn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>up</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Make the image over of the <b>up</b> raster on the <b>dn</b> raster and put the resulting raster in <b>rout</b> </p>
<div class="fragment"></div><!-- fragment --> <div class="fragment"><div class="line"><span class="lineno">  286</span>                                     {</div>
<div class="line"><span class="lineno">  287</span>  <a class="code hl_class" href="class_t_rect_t.html">TRect</a> rect = rout-&gt;getBounds() * rdn-&gt;getBounds() * rup-&gt;getBounds();</div>
<div class="line"><span class="lineno">  288</span>  <span class="keywordflow">if</span> (rect.<a class="code hl_function" href="class_t_rect_t.html#a53ce09c6112f8a019b43ad82d721a93b">isEmpty</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> cRout = rout-&gt;extract(rect);</div>
<div class="line"><span class="lineno">  291</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> cRdn  = rdn-&gt;extract(rect);</div>
<div class="line"><span class="lineno">  292</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> cRup  = rup-&gt;extract(rect);</div>
<div class="line"><span class="lineno">  293</span>  rout-&gt;lock();</div>
<div class="line"><span class="lineno">  294</span>  rdn-&gt;lock();</div>
<div class="line"><span class="lineno">  295</span>  rup-&gt;lock();</div>
<div class="line"><span class="lineno">  296</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> rout32 = cRout, rdn32 = cRdn, rup32 = cRup;</div>
<div class="line"><span class="lineno">  297</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> rout64 = cRout, rdn64 = cRdn, rup64 = cRup;</div>
<div class="line"><span class="lineno">  298</span>  <span class="keywordflow">if</span> (rout32 &amp;&amp; rdn32 &amp;&amp; rup32)</div>
<div class="line"><span class="lineno">  299</span>    do_overT3&lt;TPixel32&gt;(rout32, rdn32, rup32);</div>
<div class="line"><span class="lineno">  300</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rout64 &amp;&amp; rdn64 &amp;&amp; rup64)</div>
<div class="line"><span class="lineno">  301</span>    do_overT3&lt;TPixel64&gt;(rout64, rdn64, rup64);</div>
<div class="line"><span class="lineno">  302</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  303</span>    rout-&gt;unlock();</div>
<div class="line"><span class="lineno">  304</span>    rdn-&gt;unlock();</div>
<div class="line"><span class="lineno">  305</span>    rup-&gt;unlock();</div>
<div class="line"><span class="lineno">  306</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  307</span>  }</div>
<div class="line"><span class="lineno">  308</span> </div>
<div class="line"><span class="lineno">  309</span>  rout-&gt;unlock();</div>
<div class="line"><span class="lineno">  310</span>  rdn-&gt;unlock();</div>
<div class="line"><span class="lineno">  311</span>  rup-&gt;unlock();</div>
<div class="line"><span class="lineno">  312</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="class_t_rect_t.html#a53ce09c6112f8a019b43ad82d721a93b">TRectT&lt; T &gt;::isEmpty()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00438">over()</a>, <a class="el" href="#l00260">OverFx::process()</a>, and <a class="el" href="#l00711">ToonzScene::renderFrame()</a>.</p>

</div>
</div>
<a id="a9f1ee78ab7b55ece2630b90c93ba339f" name="a9f1ee78ab7b55ece2630b90c93ba339f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f1ee78ab7b55ece2630b90c93ba339f">&#9670;&nbsp;</a></span>over() <span class="overload">[2/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::over </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>dn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>up</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRasterGR8P</a> &amp;&#160;</td>
          <td class="paramname"><em>mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Make the image over of the <b>up</b> raster on the <b>dn</b> raster using a <b>mask</b> and put the resulting raster in <b>rout</b> </p>
<div class="fragment"><div class="line"><span class="lineno">  476</span>                                         {</div>
<div class="line"><span class="lineno">  477</span>  out-&gt;lock();</div>
<div class="line"><span class="lineno">  478</span>  up-&gt;lock();</div>
<div class="line"><span class="lineno">  479</span>  dn-&gt;lock();</div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32 = out;</div>
<div class="line"><span class="lineno">  482</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> dn32  = dn;</div>
<div class="line"><span class="lineno">  483</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32  = up;</div>
<div class="line"><span class="lineno">  484</span> </div>
<div class="line"><span class="lineno">  485</span>  <span class="keywordflow">if</span> (out32 &amp;&amp; dn32 &amp;&amp; up32)</div>
<div class="line"><span class="lineno">  486</span>    do_over&lt;TPixel32, TPixel32, TPixel32&gt;(out32, dn32, up32, mask);</div>
<div class="line"><span class="lineno">  487</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  488</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64 = out;</div>
<div class="line"><span class="lineno">  489</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> dn64  = dn;</div>
<div class="line"><span class="lineno">  490</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64  = up;</div>
<div class="line"><span class="lineno">  491</span>    <span class="keywordflow">if</span> (out64 &amp;&amp; dn64 &amp;&amp; up64)</div>
<div class="line"><span class="lineno">  492</span>      do_over&lt;TPixel64, TPixel64, TPixel64&gt;(out64, dn64, up64, mask);</div>
<div class="line"><span class="lineno">  493</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  494</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  495</span>  }</div>
<div class="line"><span class="lineno">  496</span>  out-&gt;unlock();</div>
<div class="line"><span class="lineno">  497</span>  up-&gt;unlock();</div>
<div class="line"><span class="lineno">  498</span>  dn-&gt;unlock();</div>
<div class="line"><span class="lineno">  499</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a91b87be89fbd668e1e88bff94085b4ec" name="a91b87be89fbd668e1e88bff94085b4ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91b87be89fbd668e1e88bff94085b4ec">&#9670;&nbsp;</a></span>over() <span class="overload">[3/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::over </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>up</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_affine.html">TAffine</a> &amp;&#160;</td>
          <td class="paramname"><em>aff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168">ResampleFilterType</a>&#160;</td>
          <td class="paramname"><em>filterType</em> = <code><a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168af59a8bad64d2b117020f864efd67b2b5">Triangle</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make the image over of the <b>up</b> raster on the <b>out</b> raster. </p>
<div class="fragment"><div class="line"><span class="lineno">  417</span>                                               {</div>
<div class="line"><span class="lineno">  418</span>  out-&gt;lock();</div>
<div class="line"><span class="lineno">  419</span>  up-&gt;lock();</div>
<div class="line"><span class="lineno">  420</span> </div>
<div class="line"><span class="lineno">  421</span>  <span class="keywordflow">if</span> (filterType == ClosestPixel || filterType == Bilinear)</div>
<div class="line"><span class="lineno">  422</span>    ::quickPut(out, up, aff, filterType);</div>
<div class="line"><span class="lineno">  423</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  424</span>    <a class="code hl_class" href="class_t_rect_t.html">TRect</a> rasterBounds = up-&gt;getBounds();</div>
<div class="line"><span class="lineno">  425</span>    <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> dbounds(rasterBounds.<a class="code hl_variable" href="class_t_rect_t.html#ac008cbc625f50d8b3c180c8eb2594cdb">x0</a>, rasterBounds.y0, rasterBounds.x1 + 1,</div>
<div class="line"><span class="lineno">  426</span>                   rasterBounds.y1 + 1);</div>
<div class="line"><span class="lineno">  427</span>    dbounds = aff * dbounds;</div>
<div class="line"><span class="lineno">  428</span>    <a class="code hl_class" href="class_t_rect_t.html">TRect</a> bounds(tfloor(dbounds.x0), tfloor(dbounds.y0), tceil(dbounds.x1) - 1,</div>
<div class="line"><span class="lineno">  429</span>                 tceil(dbounds.y1) - 1);</div>
<div class="line"><span class="lineno">  430</span>    <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> tmp = up-&gt;create(bounds.getLx(), bounds.getLy());</div>
<div class="line"><span class="lineno">  431</span>    <a class="code hl_function" href="namespace_t_rop.html#a5e39bc748039afe42001ba44f2d2a073">resample</a>(tmp, up, <a class="code hl_class" href="class_t_translation.html">TTranslation</a>(-bounds.x0, -bounds.y0) * aff, filterType);</div>
<div class="line"><span class="lineno">  432</span>    over(out, tmp, bounds.getP00());</div>
<div class="line"><span class="lineno">  433</span>  }</div>
<div class="line"><span class="lineno">  434</span>  out-&gt;unlock();</div>
<div class="line"><span class="lineno">  435</span>  up-&gt;unlock();</div>
<div class="line"><span class="lineno">  436</span>}</div>
<div class="ttc" id="aclass_t_rect_t_html_ac008cbc625f50d8b3c180c8eb2594cdb"><div class="ttname"><a href="class_t_rect_t.html#ac008cbc625f50d8b3c180c8eb2594cdb">TRectT::x0</a></div><div class="ttdeci">T x0</div><div class="ttdef"><b>Definition:</b> tgeometry.h:557</div></div>
<div class="ttc" id="aclass_t_translation_html"><div class="ttname"><a href="class_t_translation.html">TTranslation</a></div><div class="ttdef"><b>Definition:</b> tgeometry.h:1074</div></div>
<div class="ttc" id="anamespace_t_rop_html_a5e39bc748039afe42001ba44f2d2a073"><div class="ttname"><a href="namespace_t_rop.html#a5e39bc748039afe42001ba44f2d2a073">TRop::resample</a></div><div class="ttdeci">DVAPI void resample(const TRasterP &amp;out, const TRasterP &amp;in, const TAffine &amp;aff, ResampleFilterType filterType=Triangle, double blur=1.)</div><div class="ttdef"><b>Definition:</b> tresample.cpp:4648</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00083">Bilinear</a>, <a class="el" href="#l00081">ClosestPixel</a>, <a class="el" href="#l04648">resample()</a>, and <a class="el" href="#l00557">TRectT&lt; T &gt;::x0</a>.</p>

</div>
</div>
<a id="a744bf34f97ad2828655221fc27dffadf" name="a744bf34f97ad2828655221fc27dffadf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a744bf34f97ad2828655221fc27dffadf">&#9670;&nbsp;</a></span>over() <span class="overload">[4/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::over </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>up</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_point_t.html">TPoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_affine.html">TAffine</a> &amp;&#160;</td>
          <td class="paramname"><em>aff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168">ResampleFilterType</a>&#160;</td>
          <td class="paramname"><em>filterType</em> = <code><a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168af59a8bad64d2b117020f864efd67b2b5">Triangle</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Make the image over of the <b>up</b> raster on the <b>out</b> raster starting from <b>pos</b>. Position <b>pos</b> must be already transformed using <b>aff</b>. </p>
<div class="fragment"><div class="line"><span class="lineno">  439</span>                                                                   {</div>
<div class="line"><span class="lineno">  440</span>  <span class="keywordflow">if</span> (aff.<a class="code hl_function" href="class_t_affine.html#a5671bcda5ebc9262ec1681bb96cf8633">isIdentity</a>())</div>
<div class="line"><span class="lineno">  441</span>    <span class="comment">// simple over with offset</span></div>
<div class="line"><span class="lineno">  442</span>    <a class="code hl_function" href="namespace_t_rop.html#ae5fd1fb0c2f625e1da14fe92ae0e5122">TRop::over</a>(out, up, pos);</div>
<div class="line"><span class="lineno">  443</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  444</span>    <a class="code hl_class" href="class_t_rect_t.html">TRect</a> rasterBounds = up-&gt;getBounds();</div>
<div class="line"><span class="lineno">  445</span>    <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> dbounds(rasterBounds.<a class="code hl_variable" href="class_t_rect_t.html#ac008cbc625f50d8b3c180c8eb2594cdb">x0</a>, rasterBounds.y0, rasterBounds.x1,</div>
<div class="line"><span class="lineno">  446</span>                   rasterBounds.y1);</div>
<div class="line"><span class="lineno">  447</span>    dbounds = aff * dbounds;</div>
<div class="line"><span class="lineno">  448</span>    <a class="code hl_class" href="class_t_rect_t.html">TRect</a> bounds(tfloor(dbounds.x0), tfloor(dbounds.y0), tceil(dbounds.x1),</div>
<div class="line"><span class="lineno">  449</span>                 tceil(dbounds.y1));</div>
<div class="line"><span class="lineno">  450</span>    <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> tmp = up-&gt;create(bounds.getLx(), bounds.getLy());</div>
<div class="line"><span class="lineno">  451</span>    <a class="code hl_function" href="namespace_t_rop.html#a5e39bc748039afe42001ba44f2d2a073">resample</a>(tmp, up, <a class="code hl_class" href="class_t_translation.html">TTranslation</a>(-dbounds.getP00()) * aff, filterType);</div>
<div class="line"><span class="lineno">  452</span>    <a class="code hl_function" href="namespace_t_rop.html#ae5fd1fb0c2f625e1da14fe92ae0e5122">TRop::over</a>(out, tmp, pos);</div>
<div class="line"><span class="lineno">  453</span>  }</div>
<div class="line"><span class="lineno">  454</span>}</div>
<div class="ttc" id="aclass_t_affine_html_a5671bcda5ebc9262ec1681bb96cf8633"><div class="ttname"><a href="class_t_affine.html#a5671bcda5ebc9262ec1681bb96cf8633">TAffine::isIdentity</a></div><div class="ttdeci">bool isIdentity(double err=1.e-8) const</div><div class="ttdef"><b>Definition:</b> tgeometry.cpp:96</div></div>
<div class="ttc" id="anamespace_t_rop_html_ae5fd1fb0c2f625e1da14fe92ae0e5122"><div class="ttname"><a href="namespace_t_rop.html#ae5fd1fb0c2f625e1da14fe92ae0e5122">TRop::over</a></div><div class="ttdeci">DVAPI void over(const TRasterP &amp;out, const TRasterP &amp;dn, const TRasterP &amp;up)</div><div class="ttdef"><b>Definition:</b> tover.cpp:285</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00096">TAffine::isIdentity()</a>, <a class="el" href="#l00285">over()</a>, <a class="el" href="#l04648">resample()</a>, and <a class="el" href="#l00557">TRectT&lt; T &gt;::x0</a>.</p>

</div>
</div>
<a id="aae58b5d8cb3097667c3d494780fa35b8" name="aae58b5d8cb3097667c3d494780fa35b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae58b5d8cb3097667c3d494780fa35b8">&#9670;&nbsp;</a></span>over() <span class="overload">[5/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::over </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>up</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_point_t.html">TPoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em> = <code><a class="el" href="class_t_point_t.html">TPoint</a>()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Make the image over of the <b>up</b> raster on the <b>out</b> raster starting from <b>pos</b> </p>
<div class="fragment"><div class="line"><span class="lineno">  316</span>                                                                            {</div>
<div class="line"><span class="lineno">  317</span>  <a class="code hl_class" href="class_t_rect_t.html">TRect</a> outRect(rout-&gt;getBounds());</div>
<div class="line"><span class="lineno">  318</span>  <a class="code hl_class" href="class_t_rect_t.html">TRect</a> upRect(rup-&gt;getBounds() + pos);</div>
<div class="line"><span class="lineno">  319</span>  <a class="code hl_class" href="class_t_rect_t.html">TRect</a> intersection = outRect * upRect;</div>
<div class="line"><span class="lineno">  320</span>  <span class="keywordflow">if</span> (intersection.isEmpty()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  321</span> </div>
<div class="line"><span class="lineno">  322</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> cRout = rout-&gt;extract(intersection);</div>
<div class="line"><span class="lineno">  323</span>  <a class="code hl_class" href="class_t_rect_t.html">TRect</a> r        = intersection - pos;</div>
<div class="line"><span class="lineno">  324</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> cRup  = rup-&gt;extract(r);</div>
<div class="line"><span class="lineno">  325</span> </div>
<div class="line"><span class="lineno">  326</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> rout32 = cRout, rup32 = cRup;</div>
<div class="line"><span class="lineno">  327</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> rout64 = cRout, rup64 = cRup;</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> rout8 = cRout, rup8 = cRup;</div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRasterCM32P</a> routCM32 = cRout, rupCM32 = cRup;</div>
<div class="line"><span class="lineno">  332</span> </div>
<div class="line"><span class="lineno">  333</span>  rout-&gt;lock();</div>
<div class="line"><span class="lineno">  334</span>  rup-&gt;lock();</div>
<div class="line"><span class="lineno">  335</span> </div>
<div class="line"><span class="lineno">  336</span>  <span class="comment">// TRaster64P rout64 = rout, rin64 = rin;</span></div>
<div class="line"><span class="lineno">  337</span>  <span class="keywordflow">if</span> (rout32 &amp;&amp; rup32) {</div>
<div class="line"><span class="lineno">  338</span><span class="preprocessor">#ifdef USE_SSE2</span></div>
<div class="line"><span class="lineno">  339</span>    <span class="keywordflow">if</span> (TSystem::getCPUExtensions() &amp; TSystem::CpuSupportsSse2)</div>
<div class="line"><span class="lineno">  340</span>      do_over_SSE2(rout32, rup32);</div>
<div class="line"><span class="lineno">  341</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  342</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  343</span>      do_overT2&lt;TPixel32, UCHAR&gt;(rout32, rup32);</div>
<div class="line"><span class="lineno">  344</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rout64) {</div>
<div class="line"><span class="lineno">  345</span>    <span class="keywordflow">if</span> (!rup64) {</div>
<div class="line"><span class="lineno">  346</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> raux(cRup-&gt;getSize());</div>
<div class="line"><span class="lineno">  347</span>      <a class="code hl_function" href="namespace_t_rop.html#a45a08fb48dd7d33ec629d722081d55c6">TRop::convert</a>(raux, cRup);</div>
<div class="line"><span class="lineno">  348</span>      rup64 = raux;</div>
<div class="line"><span class="lineno">  349</span>    }</div>
<div class="line"><span class="lineno">  350</span>    do_overT2&lt;TPixel64, USHORT&gt;(rout64, rup64);</div>
<div class="line"><span class="lineno">  351</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rout32 &amp;&amp; rup8)</div>
<div class="line"><span class="lineno">  352</span>    do_over(rout32, rup8);</div>
<div class="line"><span class="lineno">  353</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rout8 &amp;&amp; rup32)</div>
<div class="line"><span class="lineno">  354</span>    do_over(rout8, rup32);</div>
<div class="line"><span class="lineno">  355</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rout8 &amp;&amp; rup8)</div>
<div class="line"><span class="lineno">  356</span>    <a class="code hl_function" href="namespace_t_rop.html#a229eb7fd85c23c325ea4ba55478d5712">TRop::copy</a>(rout8, rup8);</div>
<div class="line"><span class="lineno">  357</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (routCM32 &amp;&amp; rupCM32)</div>
<div class="line"><span class="lineno">  358</span>    do_over(routCM32, rupCM32);</div>
<div class="line"><span class="lineno">  359</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  360</span>    rout-&gt;unlock();</div>
<div class="line"><span class="lineno">  361</span>    rup-&gt;unlock();</div>
<div class="line"><span class="lineno">  362</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  363</span>  }</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>  rout-&gt;unlock();</div>
<div class="line"><span class="lineno">  366</span>  rup-&gt;unlock();</div>
<div class="line"><span class="lineno">  367</span>}</div>
<div class="ttc" id="anamespace_t_rop_html_a229eb7fd85c23c325ea4ba55478d5712"><div class="ttname"><a href="namespace_t_rop.html#a229eb7fd85c23c325ea4ba55478d5712">TRop::copy</a></div><div class="ttdeci">DVAPI void copy(TRasterP dst, const TRasterP &amp;src)</div><div class="ttdoc">Copy src in dst.</div><div class="ttdef"><b>Definition:</b> trop.cpp:93</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00336">convert()</a>, and <a class="el" href="#l00093">copy()</a>.</p>

</div>
</div>
<a id="aedc165465ce6743825508055f5207aa8" name="aedc165465ce6743825508055f5207aa8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedc165465ce6743825508055f5207aa8">&#9670;&nbsp;</a></span>over() <span class="overload">[6/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::over </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_raster_p_t.html">TRaster32P</a>&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRasterGR8P</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TPixel32 &amp;&#160;</td>
          <td class="paramname"><em>color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Make a coloring of <b>rup</b> with <b>color</b> and put the resulting raster in <b>rout</b> </p>
<div class="fragment"><div class="line"><span class="lineno">  277</span>                                       {</div>
<div class="line"><span class="lineno">  278</span>  rout-&gt;lock();</div>
<div class="line"><span class="lineno">  279</span>  do_over(rout, rup, color);</div>
<div class="line"><span class="lineno">  280</span>  rout-&gt;unlock();</div>
<div class="line"><span class="lineno">  281</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab40288730d28adc27b76cadca035beaa" name="ab40288730d28adc27b76cadca035beaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab40288730d28adc27b76cadca035beaa">&#9670;&nbsp;</a></span>over() <span class="overload">[7/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::over </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_palette.html">TPalette</a> *&#160;</td>
          <td class="paramname"><em>palette</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_point_t.html">TPoint</a> &amp;&#160;</td>
          <td class="paramname"><em>point</em> = <code><a class="el" href="class_t_point_t.html">TPoint</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_affine.html">TAffine</a> &amp;&#160;</td>
          <td class="paramname"><em>aff</em> = <code><a class="el" href="class_t_affine.html">TAffine</a>()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  457</span>                                                         {</div>
<div class="line"><span class="lineno">  458</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> app(rup-&gt;getSize());</div>
<div class="line"><span class="lineno">  459</span>  <a class="code hl_function" href="namespace_t_rop.html#a45a08fb48dd7d33ec629d722081d55c6">TRop::convert</a>(app, rup, palette);</div>
<div class="line"><span class="lineno">  460</span>  <a class="code hl_function" href="namespace_t_rop.html#ae5fd1fb0c2f625e1da14fe92ae0e5122">TRop::over</a>(rout, app, point, aff);</div>
<div class="line"><span class="lineno">  461</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a73e7c02af837288795455fb0280ab614" name="a73e7c02af837288795455fb0280ab614"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73e7c02af837288795455fb0280ab614">&#9670;&nbsp;</a></span>overlay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::overlay </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rdown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1388</span>                                         {</div>
<div class="line"><span class="lineno"> 1389</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32   = rup;</div>
<div class="line"><span class="lineno"> 1390</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> down32 = rdown;</div>
<div class="line"><span class="lineno"> 1391</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32  = rout;</div>
<div class="line"><span class="lineno"> 1392</span> </div>
<div class="line"><span class="lineno"> 1393</span>  <span class="keywordflow">if</span> (up32 &amp;&amp; down32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno"> 1394</span>    FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1395</span>    <span class="keywordflow">if</span> (upPix-&gt;m) {</div>
<div class="line"><span class="lineno"> 1396</span>      TPixel32 app;</div>
<div class="line"><span class="lineno"> 1397</span>      TPixel32 tmpPix, tmp2Pix;</div>
<div class="line"><span class="lineno"> 1398</span>      <span class="keywordflow">if</span> (downPix-&gt;m) {</div>
<div class="line"><span class="lineno"> 1399</span>        tmpPix  = *downPix;</div>
<div class="line"><span class="lineno"> 1400</span>        tmp2Pix = depremultiply(*upPix);</div>
<div class="line"><span class="lineno"> 1401</span>        <span class="keywordflow">if</span> (tmpPix.r &lt; 128)</div>
<div class="line"><span class="lineno"> 1402</span>          app.r = troundp(2 * tmp2Pix.r * (tmpPix.r / 255.0));</div>
<div class="line"><span class="lineno"> 1403</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1404</span>          SHORT r =</div>
<div class="line"><span class="lineno"> 1405</span>              255 *</div>
<div class="line"><span class="lineno"> 1406</span>              (1 - 2 * (1.0 - tmpPix.r / 255.0) * (1.0 - tmp2Pix.r / 255.0));</div>
<div class="line"><span class="lineno"> 1407</span>          app.r = (UCHAR)tcrop&lt;SHORT&gt;(r, 0, 255);</div>
<div class="line"><span class="lineno"> 1408</span>        }</div>
<div class="line"><span class="lineno"> 1409</span>        <span class="keywordflow">if</span> (tmpPix.g &lt; 128)</div>
<div class="line"><span class="lineno"> 1410</span>          app.g = troundp(2 * tmp2Pix.g * (tmpPix.g / 255.0));</div>
<div class="line"><span class="lineno"> 1411</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1412</span>          SHORT g =</div>
<div class="line"><span class="lineno"> 1413</span>              255 *</div>
<div class="line"><span class="lineno"> 1414</span>              (1 - 2 * (1.0 - tmpPix.g / 255.0) * (1.0 - tmp2Pix.g / 255.0));</div>
<div class="line"><span class="lineno"> 1415</span>          app.g = (UCHAR)tcrop&lt;SHORT&gt;(g, 0, 255);</div>
<div class="line"><span class="lineno"> 1416</span>        }</div>
<div class="line"><span class="lineno"> 1417</span>        <span class="keywordflow">if</span> (tmpPix.b &lt; 128)</div>
<div class="line"><span class="lineno"> 1418</span>          app.b = troundp(2 * tmp2Pix.b * (tmpPix.b / 255.0));</div>
<div class="line"><span class="lineno"> 1419</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1420</span>          SHORT b =</div>
<div class="line"><span class="lineno"> 1421</span>              255 *</div>
<div class="line"><span class="lineno"> 1422</span>              (1 - 2 * (1.0 - tmpPix.b / 255.0) * (1.0 - tmp2Pix.b / 255.0));</div>
<div class="line"><span class="lineno"> 1423</span>          app.b = (UCHAR)tcrop&lt;SHORT&gt;(b, 0, 255);</div>
<div class="line"><span class="lineno"> 1424</span>        }</div>
<div class="line"><span class="lineno"> 1425</span>        app.m = tmp2Pix.m;</div>
<div class="line"><span class="lineno"> 1426</span>        app   = premultiply(app);</div>
<div class="line"><span class="lineno"> 1427</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1428</span>        app = *upPix;</div>
<div class="line"><span class="lineno"> 1429</span>      overPix&lt;TPixel32, UCHAR&gt;(*outPix, *downPix, app);</div>
<div class="line"><span class="lineno"> 1430</span>    }</div>
<div class="line"><span class="lineno"> 1431</span>    FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno"> 1432</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1433</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64   = rup;</div>
<div class="line"><span class="lineno"> 1434</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> down64 = rdown;</div>
<div class="line"><span class="lineno"> 1435</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64  = rout;</div>
<div class="line"><span class="lineno"> 1436</span> </div>
<div class="line"><span class="lineno"> 1437</span>    <span class="keywordflow">if</span> (up64 &amp;&amp; down64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno"> 1438</span>      FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1439</span> </div>
<div class="line"><span class="lineno"> 1440</span>      <span class="keywordflow">if</span> (upPix-&gt;m) {</div>
<div class="line"><span class="lineno"> 1441</span>        TPixel64 app;</div>
<div class="line"><span class="lineno"> 1442</span>        TPixel64 tmpPix, tmp2Pix;</div>
<div class="line"><span class="lineno"> 1443</span>        <span class="keywordflow">if</span> (downPix-&gt;m) {</div>
<div class="line"><span class="lineno"> 1444</span>          tmpPix  = *downPix;</div>
<div class="line"><span class="lineno"> 1445</span>          tmp2Pix = depremultiply(*upPix);</div>
<div class="line"><span class="lineno"> 1446</span>          <span class="keywordflow">if</span> (tmpPix.r &lt; 32768)</div>
<div class="line"><span class="lineno"> 1447</span>            app.r = troundp(2 * tmp2Pix.r * (tmpPix.r / 65535.0));</div>
<div class="line"><span class="lineno"> 1448</span>          <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1449</span>            SHORT r = 65535 * (1 -</div>
<div class="line"><span class="lineno"> 1450</span>                               2 * (1.0 - tmpPix.r / 65535.0) *</div>
<div class="line"><span class="lineno"> 1451</span>                                   (1.0 - tmp2Pix.r / 65535.0));</div>
<div class="line"><span class="lineno"> 1452</span>            app.r = (USHORT)tcrop&lt;TINT32&gt;(r, 0, 65535);</div>
<div class="line"><span class="lineno"> 1453</span>          }</div>
<div class="line"><span class="lineno"> 1454</span>          <span class="keywordflow">if</span> (tmpPix.g &lt; 32768)</div>
<div class="line"><span class="lineno"> 1455</span>            app.g = troundp(2 * tmp2Pix.g * (tmpPix.g / 65535.0));</div>
<div class="line"><span class="lineno"> 1456</span>          <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1457</span>            SHORT g = 65535 * (1 -</div>
<div class="line"><span class="lineno"> 1458</span>                               2 * (1.0 - tmpPix.g / 65535.0) *</div>
<div class="line"><span class="lineno"> 1459</span>                                   (1.0 - tmp2Pix.g / 65535.0));</div>
<div class="line"><span class="lineno"> 1460</span>            app.g = (USHORT)tcrop&lt;TINT32&gt;(g, 0, 65535);</div>
<div class="line"><span class="lineno"> 1461</span>          }</div>
<div class="line"><span class="lineno"> 1462</span>          <span class="keywordflow">if</span> (tmpPix.b &lt; 32768)</div>
<div class="line"><span class="lineno"> 1463</span>            app.b = troundp(2 * tmp2Pix.b * (tmpPix.b / 65535.0));</div>
<div class="line"><span class="lineno"> 1464</span>          <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1465</span>            SHORT b = 65535 * (1 -</div>
<div class="line"><span class="lineno"> 1466</span>                               2 * (1.0 - tmpPix.b / 65535.0) *</div>
<div class="line"><span class="lineno"> 1467</span>                                   (1.0 - tmp2Pix.b / 65535.0));</div>
<div class="line"><span class="lineno"> 1468</span>            app.b = (USHORT)tcrop&lt;TINT32&gt;(b, 0, 65535);</div>
<div class="line"><span class="lineno"> 1469</span>          }</div>
<div class="line"><span class="lineno"> 1470</span>          app.m = tmp2Pix.m;</div>
<div class="line"><span class="lineno"> 1471</span>          app   = premultiply(app);</div>
<div class="line"><span class="lineno"> 1472</span>        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1473</span>          app = *upPix;</div>
<div class="line"><span class="lineno"> 1474</span>        overPix&lt;TPixel64, USHORT&gt;(*outPix, *downPix, app);</div>
<div class="line"><span class="lineno"> 1475</span>      }</div>
<div class="line"><span class="lineno"> 1476</span>      FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno"> 1477</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1478</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> up8   = rup;</div>
<div class="line"><span class="lineno"> 1479</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> down8 = rdown;</div>
<div class="line"><span class="lineno"> 1480</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> out8  = rout;</div>
<div class="line"><span class="lineno"> 1481</span> </div>
<div class="line"><span class="lineno"> 1482</span>      <span class="keywordflow">if</span> (up8 &amp;&amp; down8 &amp;&amp; out8) {</div>
<div class="line"><span class="lineno"> 1483</span>        FOR_EACH_PIXEL_8_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1484</span> </div>
<div class="line"><span class="lineno"> 1485</span>        USHORT value;</div>
<div class="line"><span class="lineno"> 1486</span>        <span class="keywordflow">if</span> (downPix-&gt;value &lt; 128)</div>
<div class="line"><span class="lineno"> 1487</span>          value = troundp(2 * upPix-&gt;value * (downPix-&gt;value / 255.0));</div>
<div class="line"><span class="lineno"> 1488</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1489</span>          value = 255 * (1 -</div>
<div class="line"><span class="lineno"> 1490</span>                         2 * (1.0 - downPix-&gt;value / 255.0) *</div>
<div class="line"><span class="lineno"> 1491</span>                             (1.0 - upPix-&gt;value / 255.0));</div>
<div class="line"><span class="lineno"> 1492</span>        outPix-&gt;value = (UCHAR)tcrop&lt;USHORT&gt;(value, 0, 255);</div>
<div class="line"><span class="lineno"> 1493</span> </div>
<div class="line"><span class="lineno"> 1494</span>        FOR_EACH_PIXEL_8_END_LOOP</div>
<div class="line"><span class="lineno"> 1495</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1496</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::max invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno"> 1497</span>    }</div>
<div class="line"><span class="lineno"> 1498</span>  }</div>
<div class="line"><span class="lineno"> 1499</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a98a26ca9c2980b8a0a33ee8475f7db64" name="a98a26ca9c2980b8a0a33ee8475f7db64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98a26ca9c2980b8a0a33ee8475f7db64">&#9670;&nbsp;</a></span>overlayCmapped()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::overlayCmapped </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a>&#160;</td>
          <td class="paramname"><em>rasOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;&#160;</td>
          <td class="paramname"><em>rasUp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;&#160;</td>
          <td class="paramname"><em>pltOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;&#160;</td>
          <td class="paramname"><em>upPlt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; int, int &gt; &amp;&#160;</td>
          <td class="paramname"><em>usedColors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  913</span>                                                        {</div>
<div class="line"><span class="lineno">  914</span>  assert(rasOut &amp;&amp; rasUp);</div>
<div class="line"><span class="lineno">  915</span>  assert(rasOut-&gt;getSize() == rasUp-&gt;getSize());</div>
<div class="line"><span class="lineno">  916</span> </div>
<div class="line"><span class="lineno">  917</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TPaletteP</a> downPlt = pltOut-&gt;<a class="code hl_function" href="class_t_palette.html#abc3ef5824d89e65687b32c530cf25325">clone</a>();</div>
<div class="line"><span class="lineno">  918</span>  std::map&lt;int, int&gt;::iterator it;</div>
<div class="line"><span class="lineno">  919</span>  <span class="keywordflow">for</span> (it = usedColors.begin(); it != usedColors.end(); it++)</div>
<div class="line"><span class="lineno">  920</span>    downPlt-&gt;<a class="code hl_function" href="class_t_palette.html#a25f83b7baf3eb774e50c726fa702056c">getPage</a>(0)-&gt;<a class="code hl_function" href="class_t_palette_1_1_page.html#a6836aae497ab21f4ec1af5f026c68d5f">addStyle</a>(TPixel32::Red);</div>
<div class="line"><span class="lineno">  921</span> </div>
<div class="line"><span class="lineno">  922</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; rasOut-&gt;getLy(); y++) {</div>
<div class="line"><span class="lineno">  923</span>    <a class="code hl_class" href="class_t_pixel_c_m32.html">TPixelCM32</a> *pixDown = rasOut-&gt;pixels(y);</div>
<div class="line"><span class="lineno">  924</span>    <a class="code hl_class" href="class_t_pixel_c_m32.html">TPixelCM32</a> *pixUp   = rasUp-&gt;pixels(y);</div>
<div class="line"><span class="lineno">  925</span> </div>
<div class="line"><span class="lineno">  926</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; rasOut-&gt;getLx(); x++, pixUp++, pixDown++) {</div>
<div class="line"><span class="lineno">  927</span>      <span class="keywordflow">if</span> (isTransparent(pixUp))  <span class="comment">// WARNING! cannot check transparent pixels</span></div>
<div class="line"><span class="lineno">  928</span>                                 <span class="comment">// with *pixup==TPixelCM32() since also</span></div>
<div class="line"><span class="lineno">  929</span>                                 <span class="comment">// 0x183000ff i.e., is a valid transparent</span></div>
<div class="line"><span class="lineno">  930</span>                                 <span class="comment">// value</span></div>
<div class="line"><span class="lineno">  931</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  932</span>      <span class="keywordtype">int</span> tone = pixUp-&gt;getTone();</div>
<div class="line"><span class="lineno">  933</span>      <span class="keywordflow">if</span> (isTransparent(pixDown) || tone == 255 || tone == 0 ||</div>
<div class="line"><span class="lineno">  934</span>          pixUp-&gt;getPaint() !=</div>
<div class="line"><span class="lineno">  935</span>              0)  <span class="comment">// up e&#39; punto interno, o esterno non antialiasato</span></div>
<div class="line"><span class="lineno">  936</span>      {</div>
<div class="line"><span class="lineno">  937</span>        addColors(*pixUp, downPlt, upPlt, usedColors);</div>
<div class="line"><span class="lineno">  938</span>        pixDown-&gt;setInk(usedColors[pixUp-&gt;getInk()]);</div>
<div class="line"><span class="lineno">  939</span>        pixDown-&gt;setPaint(usedColors[pixUp-&gt;getPaint()]);</div>
<div class="line"><span class="lineno">  940</span>        pixDown-&gt;setTone(tone);</div>
<div class="line"><span class="lineno">  941</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tone &lt;= pixDown-&gt;getTone() || tone &lt; 128)  <span class="comment">// up e&#39; bordo</span></div>
<div class="line"><span class="lineno">  942</span>                                                            <span class="comment">// esterno</span></div>
<div class="line"><span class="lineno">  943</span>                                                            <span class="comment">// antialiasato piu&#39;</span></div>
<div class="line"><span class="lineno">  944</span>                                                            <span class="comment">// opaco di down</span></div>
<div class="line"><span class="lineno">  945</span>      {</div>
<div class="line"><span class="lineno">  946</span>        <span class="keywordtype">int</span> ink = pixUp-&gt;getInk();</div>
<div class="line"><span class="lineno">  947</span>        <span class="keywordflow">if</span> (usedColors.find(ink) == usedColors.end())</div>
<div class="line"><span class="lineno">  948</span>          addColor(downPlt, ink, upPlt, usedColors);</div>
<div class="line"><span class="lineno">  949</span>        pixDown-&gt;setInk(usedColors[ink]);</div>
<div class="line"><span class="lineno">  950</span>        pixDown-&gt;setTone(tone &lt; 128 ? 0 : tone);</div>
<div class="line"><span class="lineno">  951</span>      }</div>
<div class="line"><span class="lineno">  952</span>    }</div>
<div class="line"><span class="lineno">  953</span>  }</div>
<div class="line"><span class="lineno">  954</span>}</div>
<div class="ttc" id="aclass_t_palette_1_1_page_html_a6836aae497ab21f4ec1af5f026c68d5f"><div class="ttname"><a href="class_t_palette_1_1_page.html#a6836aae497ab21f4ec1af5f026c68d5f">TPalette::Page::addStyle</a></div><div class="ttdeci">int addStyle(int styleId)</div><div class="ttdef"><b>Definition:</b> tpalette.cpp:142</div></div>
<div class="ttc" id="aclass_t_palette_html_a25f83b7baf3eb774e50c726fa702056c"><div class="ttname"><a href="class_t_palette.html#a25f83b7baf3eb774e50c726fa702056c">TPalette::getPage</a></div><div class="ttdeci">Page * getPage(int pageIndex)</div><div class="ttdef"><b>Definition:</b> tpalette.cpp:372</div></div>
<div class="ttc" id="aclass_t_palette_html_abc3ef5824d89e65687b32c530cf25325"><div class="ttname"><a href="class_t_palette.html#abc3ef5824d89e65687b32c530cf25325">TPalette::clone</a></div><div class="ttdeci">TPalette * clone() const</div><div class="ttdoc">Allocates a new copy of this palette instance.</div><div class="ttdef"><b>Definition:</b> tpalette.cpp:275</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa8671761db1d55d696b4b8bb71f8b2e4" name="aa8671761db1d55d696b4b8bb71f8b2e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8671761db1d55d696b4b8bb71f8b2e4">&#9670;&nbsp;</a></span>premultiply()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::premultiply </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>ras</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make a premultiply of all raster pixels. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1503</span>                                          {</div>
<div class="line"><span class="lineno"> 1504</span>  ras-&gt;lock();</div>
<div class="line"><span class="lineno"> 1505</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> ras32 = ras;</div>
<div class="line"><span class="lineno"> 1506</span>  <span class="keywordflow">if</span> (ras32) {</div>
<div class="line"><span class="lineno"> 1507</span>    TPixel32 *endPix, *upPix = 0, *upRow = ras32-&gt;pixels();</div>
<div class="line"><span class="lineno"> 1508</span>    TPixel32 *lastPix =</div>
<div class="line"><span class="lineno"> 1509</span>        upRow + ras32-&gt;getWrap() * (ras32-&gt;getLy() - 1) + ras32-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1510</span> </div>
<div class="line"><span class="lineno"> 1511</span>    <span class="keywordflow">while</span> (upPix &lt; lastPix) {</div>
<div class="line"><span class="lineno"> 1512</span>      upPix  = upRow;</div>
<div class="line"><span class="lineno"> 1513</span>      endPix = upPix + ras32-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1514</span>      <span class="keywordflow">while</span> (upPix &lt; endPix) {</div>
<div class="line"><span class="lineno"> 1515</span>        premult(*upPix);</div>
<div class="line"><span class="lineno"> 1516</span>        ++upPix;</div>
<div class="line"><span class="lineno"> 1517</span>      }</div>
<div class="line"><span class="lineno"> 1518</span>      upRow += ras32-&gt;getWrap();</div>
<div class="line"><span class="lineno"> 1519</span>    }</div>
<div class="line"><span class="lineno"> 1520</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1521</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> ras64 = ras;</div>
<div class="line"><span class="lineno"> 1522</span>    <span class="keywordflow">if</span> (ras64) {</div>
<div class="line"><span class="lineno"> 1523</span>      TPixel64 *endPix, *upPix = 0, *upRow = ras64-&gt;pixels();</div>
<div class="line"><span class="lineno"> 1524</span>      TPixel64 *lastPix =</div>
<div class="line"><span class="lineno"> 1525</span>          upRow + ras64-&gt;getWrap() * (ras64-&gt;getLy() - 1) + ras64-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1526</span> </div>
<div class="line"><span class="lineno"> 1527</span>      <span class="keywordflow">while</span> (upPix &lt; lastPix) {</div>
<div class="line"><span class="lineno"> 1528</span>        upPix  = upRow;</div>
<div class="line"><span class="lineno"> 1529</span>        endPix = upPix + ras64-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1530</span>        <span class="keywordflow">while</span> (upPix &lt; endPix) {</div>
<div class="line"><span class="lineno"> 1531</span>          premult(*upPix);</div>
<div class="line"><span class="lineno"> 1532</span>          ++upPix;</div>
<div class="line"><span class="lineno"> 1533</span>        }</div>
<div class="line"><span class="lineno"> 1534</span>        upRow += ras64-&gt;getWrap();</div>
<div class="line"><span class="lineno"> 1535</span>      }</div>
<div class="line"><span class="lineno"> 1536</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1537</span>      ras-&gt;unlock();</div>
<div class="line"><span class="lineno"> 1538</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;TRop::premultiply invalid raster type&quot;</span>);</div>
<div class="line"><span class="lineno"> 1539</span>    }</div>
<div class="line"><span class="lineno"> 1540</span>  }</div>
<div class="line"><span class="lineno"> 1541</span>  ras-&gt;unlock();</div>
<div class="line"><span class="lineno"> 1542</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l01694">applyColorScale()</a>.</p>

</div>
</div>
<a id="a43c9517b928a4d6c9fb68867884a22ce" name="a43c9517b928a4d6c9fb68867884a22ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43c9517b928a4d6c9fb68867884a22ce">&#9670;&nbsp;</a></span>quickPut() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::quickPut </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>dn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;&#160;</td>
          <td class="paramname"><em>upCM32</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;&#160;</td>
          <td class="paramname"><em>plt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_affine.html">TAffine</a> &amp;&#160;</td>
          <td class="paramname"><em>aff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_rop_1_1_cmapped_quickput_settings.html">CmappedQuickputSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>settings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4668</span>{</div>
<div class="line"><span class="lineno"> 4669</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> dn32 = dn;</div>
<div class="line"><span class="lineno"> 4670</span>  <span class="keywordflow">if</span> (dn32 &amp;&amp; upCM32)</div>
<div class="line"><span class="lineno"> 4671</span>    doQuickPutCmapped(dn32, upCM32, plt, aff,</div>
<div class="line"><span class="lineno"> 4672</span>                      settings);  <span class="comment">// globalColorScale, inksOnly,</span></div>
<div class="line"><span class="lineno"> 4673</span>                                  <span class="comment">// transparencyCheck, blackBgCheck, inkIndex,</span></div>
<div class="line"><span class="lineno"> 4674</span>                                  <span class="comment">// paintIndex);</span></div>
<div class="line"><span class="lineno"> 4675</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4676</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;raster type mismatch&quot;</span>);</div>
<div class="line"><span class="lineno"> 4677</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af44cb7fab841ce051f1414a5828bfbff" name="af44cb7fab841ce051f1414a5828bfbff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af44cb7fab841ce051f1414a5828bfbff">&#9670;&nbsp;</a></span>quickPut() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::quickPut </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;&#160;</td>
          <td class="paramname"><em>up</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;&#160;</td>
          <td class="paramname"><em>plt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_affine.html">TAffine</a> &amp;&#160;</td>
          <td class="paramname"><em>aff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TPixel32 &amp;&#160;</td>
          <td class="paramname"><em>globalColorScale</em> = <code>TPixel::Black</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>inksOnly</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Like the over function but up image must be cmapped. </p>
<p >Only uses closest_pixel filter. GlobalMatte is the opacity, used for onionskinning </p>
<div class="fragment"><div class="line"><span class="lineno"> 4642</span>                                                                     {</div>
<div class="line"><span class="lineno"> 4643</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> dn32 = dn;</div>
<div class="line"><span class="lineno"> 4644</span>  <span class="keywordflow">if</span> (dn32 &amp;&amp; upCM32)</div>
<div class="line"><span class="lineno"> 4645</span>    <span class="keywordflow">if</span> (areAlmostEqual(aff.a12, 0) &amp;&amp; areAlmostEqual(aff.a21, 0))</div>
<div class="line"><span class="lineno"> 4646</span>      doQuickPutCmapped(dn32, upCM32, plt, aff.a11, aff.a22, aff.a13, aff.a23,</div>
<div class="line"><span class="lineno"> 4647</span>                        globalColorScale, inksOnly);</div>
<div class="line"><span class="lineno"> 4648</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4649</span>      doQuickPutCmapped(dn32, upCM32, plt, aff, globalColorScale, inksOnly);</div>
<div class="line"><span class="lineno"> 4650</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4651</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;raster type mismatch&quot;</span>);</div>
<div class="line"><span class="lineno"> 4652</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f6b04b4725e957a0d554e198e26a117" name="a1f6b04b4725e957a0d554e198e26a117"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f6b04b4725e957a0d554e198e26a117">&#9670;&nbsp;</a></span>quickPut() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::quickPut </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>up</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_affine.html">TAffine</a> &amp;&#160;</td>
          <td class="paramname"><em>aff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TPixel32 &amp;&#160;</td>
          <td class="paramname"><em>colorScale</em> = <code>TPixel::Black</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>doPremultiply</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>whiteTransp</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>firstColumn</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>doRasterDarkenBlendedView</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Like the over function, but only uses closest_pixel filter. </p>
<div class="fragment"><div class="line"><span class="lineno">  468</span>                                                    {</div>
<div class="line"><span class="lineno">  469</span>  ::quickPut(out, up, aff, ClosestPixel, colorScale, doPremultiply, whiteTransp,</div>
<div class="line"><span class="lineno">  470</span>             firstColumn, doRasterDarkenBlendedView);</div>
<div class="line"><span class="lineno">  471</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00081">ClosestPixel</a>, and <a class="el" href="#l01651">whiteTransp()</a>.</p>

</div>
</div>
<a id="a709bde5ef9b1c9a1b205855f9e8f7329" name="a709bde5ef9b1c9a1b205855f9e8f7329"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a709bde5ef9b1c9a1b205855f9e8f7329">&#9670;&nbsp;</a></span>quickResampleColorFilter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::quickResampleColorFilter </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>dn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>up</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_affine.html">TAffine</a> &amp;&#160;</td>
          <td class="paramname"><em>aff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a> &amp;&#160;</td>
          <td class="paramname"><em>plt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UCHAR&#160;</td>
          <td class="paramname"><em>colorMask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4681</span>                                                     {</div>
<div class="line"><span class="lineno"> 4682</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> dn32     = dn;</div>
<div class="line"><span class="lineno"> 4683</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32     = up;</div>
<div class="line"><span class="lineno"> 4684</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64     = up;</div>
<div class="line"><span class="lineno"> 4685</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRasterCM32P</a> upCM32 = up;</div>
<div class="line"><span class="lineno"> 4686</span>  <span class="keywordflow">if</span> (dn32 &amp;&amp; up32)</div>
<div class="line"><span class="lineno"> 4687</span>    doQuickResampleColorFilter(dn32, up32, aff, colorMask);</div>
<div class="line"><span class="lineno"> 4688</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dn32 &amp;&amp; upCM32)</div>
<div class="line"><span class="lineno"> 4689</span>    doQuickResampleColorFilter(dn32, upCM32, plt, aff, colorMask);</div>
<div class="line"><span class="lineno"> 4690</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dn32 &amp;&amp; up64)</div>
<div class="line"><span class="lineno"> 4691</span>    doQuickResampleColorFilter(dn32, up64, aff, colorMask);</div>
<div class="line"><span class="lineno"> 4692</span>  <span class="comment">// else if (dn32 &amp;&amp; upCM32)</span></div>
<div class="line"><span class="lineno"> 4693</span>  <span class="comment">//  doQuickResampleColorFilter(dn32, upCM32, aff, plt, colorMask);</span></div>
<div class="line"><span class="lineno"> 4694</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4695</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;raster type mismatch&quot;</span>);</div>
<div class="line"><span class="lineno"> 4696</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6e615dabc3bd3a4f7681ca7d0a743f1" name="ac6e615dabc3bd3a4f7681ca7d0a743f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6e615dabc3bd3a4f7681ca7d0a743f1">&#9670;&nbsp;</a></span>raylit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::raylit </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>dstRas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>srcRas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_t_rop_1_1_raylit_params.html">RaylitParams</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make raylit effect on <b>srcRas</b> raster and put the result in <b>dstRas</b>. </p>
<div class="fragment"><div class="line"><span class="lineno">  457</span>                                              {</div>
<div class="line"><span class="lineno">  458</span>  <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)dstRas &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)srcRas)</div>
<div class="line"><span class="lineno">  459</span>    doRaylit&lt;TPixel32&gt;(srcRas, dstRas, params,</div>
<div class="line"><span class="lineno">  460</span>                       &amp;performStandardRaylit&lt;TPixel32&gt;);</div>
<div class="line"><span class="lineno">  461</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)dstRas &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)srcRas)</div>
<div class="line"><span class="lineno">  462</span>    doRaylit&lt;TPixel64&gt;(srcRas, dstRas, params,</div>
<div class="line"><span class="lineno">  463</span>                       &amp;performStandardRaylit&lt;TPixel64&gt;);</div>
<div class="line"><span class="lineno">  464</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  465</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;TRop::raylit unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  466</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a275dd3a1daddba779d05f13b89b44db1" name="a275dd3a1daddba779d05f13b89b44db1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a275dd3a1daddba779d05f13b89b44db1">&#9670;&nbsp;</a></span>readRaster46()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct___r_a_s_t_e_r.html">_RASTER</a> * TRop::readRaster46 </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read an image in the path <b>filename</b> and put it in an old toonz raster. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1176</span>                                                {</div>
<div class="line"><span class="lineno"> 1177</span>  <span class="comment">// No more called in Toonz...</span></div>
<div class="line"><span class="lineno"> 1178</span> </div>
<div class="line"><span class="lineno"> 1179</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TImageP</a> img;</div>
<div class="line"><span class="lineno"> 1180</span> </div>
<div class="line"><span class="lineno"> 1181</span>  <a class="code hl_function" href="class_t_image_reader.html#ade3cafcda8a3e691b08892fb9cb3a97a">TImageReader::load</a>(<a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(filename), img);</div>
<div class="line"><span class="lineno"> 1182</span> </div>
<div class="line"><span class="lineno"> 1183</span>  <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_toonz_image_p.html">TToonzImageP</a>)img) <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1184</span> </div>
<div class="line"><span class="lineno"> 1185</span>  <a class="code hl_class" href="class_t_raster_image_p.html">TRasterImageP</a> rimg = (<a class="code hl_class" href="class_t_raster_image_p.html">TRasterImageP</a>)img;</div>
<div class="line"><span class="lineno"> 1186</span> </div>
<div class="line"><span class="lineno"> 1187</span>  <span class="keywordflow">if</span> (!rimg) <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1188</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> ras = rimg-&gt;getRaster();</div>
<div class="line"><span class="lineno"> 1189</span> </div>
<div class="line"><span class="lineno"> 1190</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespace_t_rop.html#a6fc864590b3faf072c5468255ee9f3ea">TRop::convertRaster50to46</a>(ras, 0);</div>
<div class="line"><span class="lineno"> 1191</span>}</div>
<div class="ttc" id="aclass_t_file_path_html"><div class="ttname"><a href="class_t_file_path.html">TFilePath</a></div><div class="ttdef"><b>Definition:</b> tfilepath.h:134</div></div>
<div class="ttc" id="aclass_t_image_reader_html_ade3cafcda8a3e691b08892fb9cb3a97a"><div class="ttname"><a href="class_t_image_reader.html#ade3cafcda8a3e691b08892fb9cb3a97a">TImageReader::load</a></div><div class="ttdeci">virtual TImageP load()</div><div class="ttdef"><b>Definition:</b> timage_io.cpp:155</div></div>
<div class="ttc" id="anamespace_t_rop_html_a6fc864590b3faf072c5468255ee9f3ea"><div class="ttname"><a href="namespace_t_rop.html#a6fc864590b3faf072c5468255ee9f3ea">TRop::convertRaster50to46</a></div><div class="ttdeci">DVAPI _RASTER * convertRaster50to46(const TRasterP &amp;inRas, const TPaletteP &amp;inPalette)</div><div class="ttdoc">Convert TRasterP in an old toonz raster!</div><div class="ttdef"><b>Definition:</b> tropcm.cpp:1043</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01043">convertRaster50to46()</a>, and <a class="el" href="#l00155">TImageReader::load()</a>.</p>

</div>
</div>
<a id="a8d7ac440af02d94cf688b9273e5a7d42" name="a8d7ac440af02d94cf688b9273e5a7d42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d7ac440af02d94cf688b9273e5a7d42">&#9670;&nbsp;</a></span>releaseRaster46()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::releaseRaster46 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct___r_a_s_t_e_r.html">_RASTER</a> *&amp;&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>doReleaseBuffer</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release the old toonz raster. </p>
<p >If the <b>doReleaseBuffer</b> is true, the buffer is released (the palette is always deleted!) </p>
<div class="fragment"><div class="line"><span class="lineno"> 1119</span>                                                            {</div>
<div class="line"><span class="lineno"> 1120</span>  <span class="comment">// Buffer release no more supported. These are now intended as smart</span></div>
<div class="line"><span class="lineno"> 1121</span>  <span class="comment">// pointers to rasters - they release themselves on their own.</span></div>
<div class="line"><span class="lineno"> 1122</span>  assert(!doReleaseBuffer);</div>
<div class="line"><span class="lineno"> 1123</span> </div>
<div class="line"><span class="lineno"> 1124</span>  <span class="keywordflow">if</span> (r-&gt;type == RAS_CM32) {</div>
<div class="line"><span class="lineno"> 1125</span>    <span class="keyword">delete</span>[] r-&gt;cmap.buffer;</div>
<div class="line"><span class="lineno"> 1126</span>    <span class="comment">// delete [] r-&gt;cmap.penbuffer;</span></div>
<div class="line"><span class="lineno"> 1127</span>    <span class="comment">// delete [] r-&gt;cmap.colbuffer;</span></div>
<div class="line"><span class="lineno"> 1128</span>  }</div>
<div class="line"><span class="lineno"> 1129</span> </div>
<div class="line"><span class="lineno"> 1130</span>  <span class="keywordflow">if</span> (doReleaseBuffer &amp;&amp; r-&gt;native_buffer == r-&gt;buffer)</div>
<div class="line"><span class="lineno"> 1131</span>    <span class="keyword">delete</span> r-&gt;buffer;  <span class="comment">// Should not happen</span></div>
<div class="line"><span class="lineno"> 1132</span> </div>
<div class="line"><span class="lineno"> 1133</span>  <span class="comment">// Unlock if locked, and remove the cache reference</span></div>
<div class="line"><span class="lineno"> 1134</span>  <span class="keywordflow">if</span> (r-&gt;buffer) unlockRaster(r);</div>
<div class="line"><span class="lineno"> 1135</span>  TImageCache::instance()-&gt;<a class="code hl_function" href="class_t_image_cache.html#a57d63227dfe2532b0aed22c47113be66">remove</a>(std::string(r-&gt;cacheId, r-&gt;cacheIdLength));</div>
<div class="line"><span class="lineno"> 1136</span>  <span class="keyword">delete</span>[] r-&gt;cacheId;</div>
<div class="line"><span class="lineno"> 1137</span> </div>
<div class="line"><span class="lineno"> 1138</span>  <span class="keyword">delete</span> r;</div>
<div class="line"><span class="lineno"> 1139</span>  r = 0;</div>
<div class="line"><span class="lineno"> 1140</span>}</div>
<div class="ttc" id="aclass_t_image_cache_html_a57d63227dfe2532b0aed22c47113be66"><div class="ttname"><a href="class_t_image_cache.html#a57d63227dfe2532b0aed22c47113be66">TImageCache::remove</a></div><div class="ttdeci">void remove(const std::string &amp;id)</div><div class="ttdoc">Removes from the image cache the image associated to passed id.</div><div class="ttdef"><b>Definition:</b> timagecache.cpp:1260</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01260">TImageCache::remove()</a>, and <a class="el" href="#l01161">unlockRaster()</a>.</p>

</div>
</div>
<a id="ab35a3fe8769547a6b9cdd219a630a296" name="ab35a3fe8769547a6b9cdd219a630a296"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab35a3fe8769547a6b9cdd219a630a296">&#9670;&nbsp;</a></span>resample() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::resample </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_raster_p_t.html">TRasterCM32P</a> &amp;&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TPaletteP</a>&#160;</td>
          <td class="paramname"><em>palette</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_affine.html">TAffine</a> &amp;&#160;</td>
          <td class="paramname"><em>aff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168">TRop::ResampleFilterType</a>&#160;</td>
          <td class="paramname"><em>filterType</em> = <code><a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168af59a8bad64d2b117020f864efd67b2b5">Triangle</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>blur</em> = <code>1.</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4622</span>                                                                    {</div>
<div class="line"><span class="lineno"> 4623</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> rin      = in;</div>
<div class="line"><span class="lineno"> 4624</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> rout32 = out;</div>
<div class="line"><span class="lineno"> 4625</span>  in-&gt;lock();</div>
<div class="line"><span class="lineno"> 4626</span>  out-&gt;lock();</div>
<div class="line"><span class="lineno"> 4627</span>  <span class="keywordflow">if</span> (rout32)</div>
<div class="line"><span class="lineno"> 4628</span>    rop_resample_rgbm_2&lt;TPixel32&gt;(rout32, rin, aff, filterType, blur,</div>
<div class="line"><span class="lineno"> 4629</span>                                  palette.getPointer());</div>
<div class="line"><span class="lineno"> 4630</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4631</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> rout64 = out;</div>
<div class="line"><span class="lineno"> 4632</span>    <span class="keywordflow">if</span> (rout64)</div>
<div class="line"><span class="lineno"> 4633</span>      rop_resample_rgbm_2&lt;TPixel64&gt;(rout64, rin, aff, filterType, blur,</div>
<div class="line"><span class="lineno"> 4634</span>                                    palette.getPointer());</div>
<div class="line"><span class="lineno"> 4635</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4636</span>      in-&gt;unlock();</div>
<div class="line"><span class="lineno"> 4637</span>      out-&gt;unlock();</div>
<div class="line"><span class="lineno"> 4638</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno"> 4639</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4640</span>    }</div>
<div class="line"><span class="lineno"> 4641</span>  }</div>
<div class="line"><span class="lineno"> 4642</span>  in-&gt;unlock();</div>
<div class="line"><span class="lineno"> 4643</span>  out-&gt;unlock();</div>
<div class="line"><span class="lineno"> 4644</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5e39bc748039afe42001ba44f2d2a073" name="a5e39bc748039afe42001ba44f2d2a073"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e39bc748039afe42001ba44f2d2a073">&#9670;&nbsp;</a></span>resample() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::resample </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_affine.html">TAffine</a> &amp;&#160;</td>
          <td class="paramname"><em>aff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168">ResampleFilterType</a>&#160;</td>
          <td class="paramname"><em>filterType</em> = <code><a class="el" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168af59a8bad64d2b117020f864efd67b2b5">Triangle</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>blur</em> = <code>1.</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Apply the transformation <b>aff</b> to the raster <b>in</b> and put the resulting raster in <b>rout</b> </p>
<p >It can be specified a resample filter type and a blur factor. </p><div class="fragment"></div><!-- fragment --> <div class="fragment"><div class="line"><span class="lineno"> 4650</span>                                 {</div>
<div class="line"><span class="lineno"> 4651</span>  rin-&gt;lock();</div>
<div class="line"><span class="lineno"> 4652</span>  rout-&gt;lock();</div>
<div class="line"><span class="lineno"> 4653</span> </div>
<div class="line"><span class="lineno"> 4654</span>  <span class="keywordflow">if</span> (filterType == ClosestPixel || filterType == Bilinear) {</div>
<div class="line"><span class="lineno"> 4655</span>    <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)rout || (<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)rin)</div>
<div class="line"><span class="lineno"> 4656</span>      filterType = <a class="code hl_enumvalue" href="namespace_t_rop.html#a2780cb0189f5717b67b6aca3f5471168af59a8bad64d2b117020f864efd67b2b5">Triangle</a>;</div>
<div class="line"><span class="lineno"> 4657</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4658</span>      quickResample(rout, rin, aff, filterType);</div>
<div class="line"><span class="lineno"> 4659</span>      rin-&gt;unlock();</div>
<div class="line"><span class="lineno"> 4660</span>      rout-&gt;unlock();</div>
<div class="line"><span class="lineno"> 4661</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4662</span>    }</div>
<div class="line"><span class="lineno"> 4663</span>  }</div>
<div class="line"><span class="lineno"> 4664</span> </div>
<div class="line"><span class="lineno"> 4665</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> rout32 = rout, rin32 = rin;</div>
<div class="line"><span class="lineno"> 4666</span>  <span class="keywordflow">if</span> (rout32) {</div>
<div class="line"><span class="lineno"> 4667</span>    <span class="keywordflow">if</span> (!rin32) {</div>
<div class="line"><span class="lineno"> 4668</span>      rin32 = <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>(rin-&gt;getLx(), rin-&gt;getLy());</div>
<div class="line"><span class="lineno"> 4669</span>      <a class="code hl_function" href="namespace_t_rop.html#a45a08fb48dd7d33ec629d722081d55c6">TRop::convert</a>(rin32, rin);</div>
<div class="line"><span class="lineno"> 4670</span>    }</div>
<div class="line"><span class="lineno"> 4671</span>    do_resample&lt;TPixel32&gt;(rout32, rin32, aff, filterType, blur);</div>
<div class="line"><span class="lineno"> 4672</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4673</span><span class="preprocessor">#ifndef TNZCORE_LIGHT</span></div>
<div class="line"><span class="lineno"> 4674</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRasterCM32P</a> routCM32 = rout, rinCM32 = rin;</div>
<div class="line"><span class="lineno"> 4675</span>    <span class="keywordflow">if</span> (routCM32 &amp;&amp; rinCM32)</div>
<div class="line"><span class="lineno"> 4676</span>      do_resample(routCM32, rinCM32, aff);</div>
<div class="line"><span class="lineno"> 4677</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4678</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4679</span>    {</div>
<div class="line"><span class="lineno"> 4680</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> rout64 = rout, rin64 = rin;</div>
<div class="line"><span class="lineno"> 4681</span>      <span class="keywordflow">if</span> (rout64) {</div>
<div class="line"><span class="lineno"> 4682</span>        <span class="keywordflow">if</span> (!rin64) {</div>
<div class="line"><span class="lineno"> 4683</span>          rin64 = <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>(rin-&gt;getLx(), rin-&gt;getLy());</div>
<div class="line"><span class="lineno"> 4684</span>          <a class="code hl_function" href="namespace_t_rop.html#a45a08fb48dd7d33ec629d722081d55c6">TRop::convert</a>(rin64, rin);</div>
<div class="line"><span class="lineno"> 4685</span>        }</div>
<div class="line"><span class="lineno"> 4686</span>        do_resample&lt;TPixel64&gt;(rout64, rin64, aff, filterType, blur);</div>
<div class="line"><span class="lineno"> 4687</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4688</span>        <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> routGR8 = rout, rinGR8 = rin;</div>
<div class="line"><span class="lineno"> 4689</span>        <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> rin32 = rin;</div>
<div class="line"><span class="lineno"> 4690</span>        <span class="keywordflow">if</span> (routGR8 &amp;&amp; rinGR8)</div>
<div class="line"><span class="lineno"> 4691</span>          do_resample(routGR8, rinGR8, aff, filterType, blur);</div>
<div class="line"><span class="lineno"> 4692</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (routGR8 &amp;&amp; rin32)</div>
<div class="line"><span class="lineno"> 4693</span>          do_resample(routGR8, rin32, aff, filterType, blur);</div>
<div class="line"><span class="lineno"> 4694</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4695</span>          rin-&gt;unlock();</div>
<div class="line"><span class="lineno"> 4696</span>          rout-&gt;unlock();</div>
<div class="line"><span class="lineno"> 4697</span>          <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno"> 4698</span>        }</div>
<div class="line"><span class="lineno"> 4699</span>      }</div>
<div class="line"><span class="lineno"> 4700</span>    }</div>
<div class="line"><span class="lineno"> 4701</span>  }</div>
<div class="line"><span class="lineno"> 4702</span>  rin-&gt;unlock();</div>
<div class="line"><span class="lineno"> 4703</span>  rout-&gt;unlock();</div>
<div class="line"><span class="lineno"> 4704</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00083">Bilinear</a>, <a class="el" href="#l00081">ClosestPixel</a>, <a class="el" href="#l00336">convert()</a>, and <a class="el" href="#l00057">Triangle</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00076">TRasterImage::makeIcon()</a>, <a class="el" href="#l00416">over()</a>, <a class="el" href="#l00569">TCleanupper::process()</a>, and <a class="el" href="#l00086">CustomStyleManager::StyleLoaderTask::run()</a>.</p>

</div>
</div>
<a id="ae2160d9b4cacd0527c741e83181f17be" name="ae2160d9b4cacd0527c741e83181f17be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2160d9b4cacd0527c741e83181f17be">&#9670;&nbsp;</a></span>rgbmAdjust()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::rgbmAdjust </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>in0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>in1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>out0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>out1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Transforms each input channel interval into the corresponding channel interval, cropping values if necessary.</p>
<p >Specified pointers are associated to int[5] arrays representing the 5-ple (RGB, R, G, B, M) - where RGBM adjustment apply first. Then, Global apply equally on RGB channels (but not on M).</p>
<dl class="section note"><dt>Note</dt><dd>The input and output rasters must have the same size and pixel type. Supports rout == rin. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  279</span>                                                                        {</div>
<div class="line"><span class="lineno">  280</span>  <span class="keywordflow">if</span> (rout-&gt;getSize() != rin-&gt;getSize()) <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;size mismatch&quot;</span>);</div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span>  rout-&gt;lock();</div>
<div class="line"><span class="lineno">  283</span>  rin-&gt;lock();</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>  <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)rout &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)rin)</div>
<div class="line"><span class="lineno">  286</span>    do_rgbmAdjust&lt;TPixel32&gt;(rout, rin, &amp;do_rgbmScale_lut&lt;TPixel32&gt;, in0, in1,</div>
<div class="line"><span class="lineno">  287</span>                            out0, out1);</div>
<div class="line"><span class="lineno">  288</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)rout &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)rin) {</div>
<div class="line"><span class="lineno">  289</span>    <span class="keywordflow">if</span> (rin-&gt;getLx() * rin-&gt;getLy() &lt; TPixel64::maxChannelValue)</div>
<div class="line"><span class="lineno">  290</span>      do_rgbmAdjust&lt;TPixel64&gt;(rout, rin, &amp;do_rgbmScale&lt;TPixel64&gt;, in0, in1,</div>
<div class="line"><span class="lineno">  291</span>                              out0, out1);</div>
<div class="line"><span class="lineno">  292</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  293</span>      do_rgbmAdjust&lt;TPixel64&gt;(rout, rin, &amp;do_rgbmScale_lut&lt;TPixel64&gt;, in0, in1,</div>
<div class="line"><span class="lineno">  294</span>                              out0, out1);</div>
<div class="line"><span class="lineno">  295</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a>)rout &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a>)rin)</div>
<div class="line"><span class="lineno">  296</span>    do_greyAdjust&lt;TPixelGR8&gt;(rout, rin, in0[0], in1[0], out0[0], out1[0]);</div>
<div class="line"><span class="lineno">  297</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR16P</a>)rout &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR16P</a>)rin)</div>
<div class="line"><span class="lineno">  298</span>    do_greyAdjust&lt;TPixelGR16&gt;(rout, rin, in0[0], in1[0], out0[0], out1[0]);</div>
<div class="line"><span class="lineno">  299</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  300</span>    rout-&gt;unlock();</div>
<div class="line"><span class="lineno">  301</span>    rin-&gt;unlock();</div>
<div class="line"><span class="lineno">  302</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;pixel type mismatch&quot;</span>);</div>
<div class="line"><span class="lineno">  303</span>  }</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span>  rout-&gt;unlock();</div>
<div class="line"><span class="lineno">  306</span>  rin-&gt;unlock();</div>
<div class="line"><span class="lineno">  307</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a66da5845870f824caab9c6fc47d6b8bd" name="a66da5845870f824caab9c6fc47d6b8bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66da5845870f824caab9c6fc47d6b8bd">&#9670;&nbsp;</a></span>rgbmScale() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::rgbmScale </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>out0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>out1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Applies first order mappings to each of <b>rin's</b> channels. </p>
<dl class="section note"><dt>Note</dt><dd>The input and output rasters must have the same size and pixel type. Supports rout == rin. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  231</span>                                                                        {</div>
<div class="line"><span class="lineno">  232</span>  <span class="keywordflow">if</span> (rout-&gt;getSize() != rin-&gt;getSize()) <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;size mismatch&quot;</span>);</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>  rout-&gt;lock();</div>
<div class="line"><span class="lineno">  235</span>  rin-&gt;lock();</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>  <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)rout &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)rin)</div>
<div class="line"><span class="lineno">  238</span>    do_rgbmScale_lut&lt;TPixel32&gt;(rout, rin, a, k, out0, out1);</div>
<div class="line"><span class="lineno">  239</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)rout &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)rin) {</div>
<div class="line"><span class="lineno">  240</span>    <span class="keywordflow">if</span> (rin-&gt;getLx() * rin-&gt;getLy() &lt; TPixel64::maxChannelValue)</div>
<div class="line"><span class="lineno">  241</span>      do_rgbmScale&lt;TPixel64&gt;(rout, rin, a, k, out0, out1);</div>
<div class="line"><span class="lineno">  242</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  243</span>      do_rgbmScale_lut&lt;TPixel64&gt;(rout, rin, a, k, out0, out1);</div>
<div class="line"><span class="lineno">  244</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a>)rout &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a>)rin)</div>
<div class="line"><span class="lineno">  245</span>    do_greyScale_lut&lt;TPixelGR8&gt;(rout, rin, a[0], k[0], out0[0], out1[0]);</div>
<div class="line"><span class="lineno">  246</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR16P</a>)rout &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR16P</a>)rin)</div>
<div class="line"><span class="lineno">  247</span>    do_greyScale_lut&lt;TPixelGR16&gt;(rout, rin, a[0], k[0], out0[0], out1[0]);</div>
<div class="line"><span class="lineno">  248</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  249</span>    rout-&gt;unlock();</div>
<div class="line"><span class="lineno">  250</span>    rin-&gt;unlock();</div>
<div class="line"><span class="lineno">  251</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;pixel type mismatch&quot;</span>);</div>
<div class="line"><span class="lineno">  252</span>  }</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>  rout-&gt;unlock();</div>
<div class="line"><span class="lineno">  255</span>  rin-&gt;unlock();</div>
<div class="line"><span class="lineno">  256</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5fad2c1d5d972dfdf8547efc9386c986" name="a5fad2c1d5d972dfdf8547efc9386c986"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fad2c1d5d972dfdf8547efc9386c986">&#9670;&nbsp;</a></span>rgbmScale() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::rgbmScale </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>kr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>kg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>kb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>km</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>ar</em> = <code>0.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>ag</em> = <code>0.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>ab</em> = <code>0.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>am</em> = <code>0.0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  262</span>                                {</div>
<div class="line"><span class="lineno">  263</span>  <span class="keywordtype">double</span> k[4], a[4];</div>
<div class="line"><span class="lineno">  264</span> </div>
<div class="line"><span class="lineno">  265</span>  a[0] = ar, a[1] = ag, a[2] = ab, a[3] = am;</div>
<div class="line"><span class="lineno">  266</span>  k[0] = kr, k[1] = kg, k[2] = kb, k[3] = km;</div>
<div class="line"><span class="lineno">  267</span> </div>
<div class="line"><span class="lineno">  268</span>  <span class="keywordtype">int</span> out0[4], out1[4];</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>  out0[0] = out0[1] = out0[2] = out0[3] = 0;</div>
<div class="line"><span class="lineno">  271</span>  out1[0] = out1[1] = out1[2] = out1[3] = 255;</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>  <a class="code hl_function" href="namespace_t_rop.html#a66da5845870f824caab9c6fc47d6b8bd">rgbmScale</a>(rout, rin, k, a, out0, out1);</div>
<div class="line"><span class="lineno">  274</span>}</div>
<div class="ttc" id="anamespace_t_rop_html_a66da5845870f824caab9c6fc47d6b8bd"><div class="ttname"><a href="namespace_t_rop.html#a66da5845870f824caab9c6fc47d6b8bd">TRop::rgbmScale</a></div><div class="ttdeci">DVAPI void rgbmScale(TRasterP rout, TRasterP rin, const double *k, const double *a, const int *out0, const int *out1)</div><div class="ttdoc">Applies first order mappings to each of rin's channels.</div><div class="ttdef"><b>Definition:</b> trgbmscale.cpp:230</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a06c4a7a2cea0acf26c099c4b5554bdab" name="a06c4a7a2cea0acf26c099c4b5554bdab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06c4a7a2cea0acf26c099c4b5554bdab">&#9670;&nbsp;</a></span>ropin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::ropin </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>matte</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  787</span>                                       {</div>
<div class="line"><span class="lineno">  788</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> source32 = source;</div>
<div class="line"><span class="lineno">  789</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> matte32  = matte;</div>
<div class="line"><span class="lineno">  790</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32    = rout;</div>
<div class="line"><span class="lineno">  791</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> source64 = source;</div>
<div class="line"><span class="lineno">  792</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> matte64  = matte;</div>
<div class="line"><span class="lineno">  793</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64    = rout;</div>
<div class="line"><span class="lineno">  794</span> </div>
<div class="line"><span class="lineno">  795</span>  <span class="keywordflow">if</span> (source32 &amp;&amp; matte32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno">  796</span>    FOR_EACH_PIXEL_BEGIN_LOOP(TPixelRGBM32, source32, TPixelRGBM32, matte32,</div>
<div class="line"><span class="lineno">  797</span>                              TPixelRGBM32, out32)</div>
<div class="line"><span class="lineno">  798</span> </div>
<div class="line"><span class="lineno">  799</span>    <span class="keywordflow">if</span> (downPix-&gt;m == 0)</div>
<div class="line"><span class="lineno">  800</span>      outPix-&gt;r = outPix-&gt;g = outPix-&gt;b = outPix-&gt;m = 0;</div>
<div class="line"><span class="lineno">  801</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (downPix-&gt;m == 255)</div>
<div class="line"><span class="lineno">  802</span>      *outPix = *upPix;</div>
<div class="line"><span class="lineno">  803</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  804</span>      <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  805</span><span class="comment">__m128i zeros = _mm_setzero_si128();</span></div>
<div class="line"><span class="lineno">  806</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  807</span><span class="comment">__m128i upPix_packed_i= _mm_unpacklo_epi8(_mm_cvtsi32_si128(*(DWORD*)upPix),</span></div>
<div class="line"><span class="lineno">  808</span><span class="comment">zeros);</span></div>
<div class="line"><span class="lineno">  809</span><span class="comment">__m128  upPix_packed  = _mm_cvtepi32_ps(_mm_unpacklo_epi16(upPix_packed_i,</span></div>
<div class="line"><span class="lineno">  810</span><span class="comment">zeros));</span></div>
<div class="line"><span class="lineno">  811</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  812</span><span class="comment">float fac = downPix-&gt;m / 255.0;</span></div>
<div class="line"><span class="lineno">  813</span><span class="comment">__m128 fac_packed = _mm_load1_ps(&amp;fac);</span></div>
<div class="line"><span class="lineno">  814</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  815</span><span class="comment">upPix_packed = _mm_mul_ps(upPix_packed, fac_packed);</span></div>
<div class="line"><span class="lineno">  816</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  817</span><span class="comment">__m128i outPix_packed_i = _mm_cvtps_epi32(upPix_packed);</span></div>
<div class="line"><span class="lineno">  818</span><span class="comment">outPix_packed_i = _mm_packs_epi32(outPix_packed_i, zeros);</span></div>
<div class="line"><span class="lineno">  819</span><span class="comment">outPix_packed_i = _mm_packus_epi16(outPix_packed_i, zeros);</span></div>
<div class="line"><span class="lineno">  820</span><span class="comment">*(DWORD*)(outPix) = _mm_cvtsi128_si32(outPix_packed_i);</span></div>
<div class="line"><span class="lineno">  821</span><span class="comment">*/</span></div>
<div class="line"><span class="lineno">  822</span> </div>
<div class="line"><span class="lineno">  823</span>      <span class="keyword">const</span> <span class="keywordtype">int</span> MAGICFAC = (257U * 256U + 1U);</div>
<div class="line"><span class="lineno">  824</span>      UINT fac           = MAGICFAC * downPix-&gt;m;</div>
<div class="line"><span class="lineno">  825</span> </div>
<div class="line"><span class="lineno">  826</span>      outPix-&gt;r = (UINT)(upPix-&gt;r * fac + (1U &lt;&lt; 23)) &gt;&gt; 24;</div>
<div class="line"><span class="lineno">  827</span>      outPix-&gt;g = (UINT)(upPix-&gt;g * fac + (1U &lt;&lt; 23)) &gt;&gt; 24;</div>
<div class="line"><span class="lineno">  828</span>      outPix-&gt;b = (UINT)(upPix-&gt;b * fac + (1U &lt;&lt; 23)) &gt;&gt; 24;</div>
<div class="line"><span class="lineno">  829</span>      outPix-&gt;m = (UINT)(upPix-&gt;m * fac + (1U &lt;&lt; 23)) &gt;&gt; 24;</div>
<div class="line"><span class="lineno">  830</span>    }</div>
<div class="line"><span class="lineno">  831</span> </div>
<div class="line"><span class="lineno">  832</span>    FOR_EACH_PIXEL_END_LOOP(source32, matte32, out32)</div>
<div class="line"><span class="lineno">  833</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (source64 &amp;&amp; matte64 &amp;&amp; out64)</div>
<div class="line"><span class="lineno">  834</span> </div>
<div class="line"><span class="lineno">  835</span>  {</div>
<div class="line"><span class="lineno">  836</span>    FOR_EACH_PIXEL_BEGIN_LOOP(TPixelRGBM64, source64, TPixelRGBM64, matte64,</div>
<div class="line"><span class="lineno">  837</span>                              TPixelRGBM64, out64)</div>
<div class="line"><span class="lineno">  838</span> </div>
<div class="line"><span class="lineno">  839</span>    <span class="keywordflow">if</span> (downPix-&gt;m == 0)</div>
<div class="line"><span class="lineno">  840</span>      outPix-&gt;r = outPix-&gt;g = outPix-&gt;b = outPix-&gt;m = 0;</div>
<div class="line"><span class="lineno">  841</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (downPix-&gt;m == 65535)</div>
<div class="line"><span class="lineno">  842</span>      *outPix = *upPix;</div>
<div class="line"><span class="lineno">  843</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  844</span>      <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  845</span><span class="comment">__m128i zeros = _mm_setzero_si128();</span></div>
<div class="line"><span class="lineno">  846</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  847</span><span class="comment">__m128i upPix_packed_i= _mm_unpacklo_epi8(_mm_cvtsi32_si128(*(DWORD*)upPix),</span></div>
<div class="line"><span class="lineno">  848</span><span class="comment">zeros);</span></div>
<div class="line"><span class="lineno">  849</span><span class="comment">__m128  upPix_packed  = _mm_cvtepi32_ps(_mm_unpacklo_epi16(upPix_packed_i,</span></div>
<div class="line"><span class="lineno">  850</span><span class="comment">zeros));</span></div>
<div class="line"><span class="lineno">  851</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  852</span><span class="comment">float fac = downPix-&gt;m / 255.0;</span></div>
<div class="line"><span class="lineno">  853</span><span class="comment">__m128 fac_packed = _mm_load1_ps(&amp;fac);</span></div>
<div class="line"><span class="lineno">  854</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  855</span><span class="comment">upPix_packed = _mm_mul_ps(upPix_packed, fac_packed);</span></div>
<div class="line"><span class="lineno">  856</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  857</span><span class="comment">__m128i outPix_packed_i = _mm_cvtps_epi32(upPix_packed);</span></div>
<div class="line"><span class="lineno">  858</span><span class="comment">outPix_packed_i = _mm_packs_epi32(outPix_packed_i, zeros);</span></div>
<div class="line"><span class="lineno">  859</span><span class="comment">outPix_packed_i = _mm_packus_epi16(outPix_packed_i, zeros);</span></div>
<div class="line"><span class="lineno">  860</span><span class="comment">*(DWORD*)(outPix) = _mm_cvtsi128_si32(outPix_packed_i);</span></div>
<div class="line"><span class="lineno">  861</span><span class="comment">*/</span></div>
<div class="line"><span class="lineno">  862</span>      <span class="keywordtype">double</span> fac = downPix-&gt;m / 65535.0;</div>
<div class="line"><span class="lineno">  863</span> </div>
<div class="line"><span class="lineno">  864</span>      outPix-&gt;r = (USHORT)(upPix-&gt;r * fac);</div>
<div class="line"><span class="lineno">  865</span>      outPix-&gt;g = (USHORT)(upPix-&gt;g * fac);</div>
<div class="line"><span class="lineno">  866</span>      outPix-&gt;b = (USHORT)(upPix-&gt;b * fac);</div>
<div class="line"><span class="lineno">  867</span>      outPix-&gt;m = (USHORT)(upPix-&gt;m * fac);</div>
<div class="line"><span class="lineno">  868</span>    }</div>
<div class="line"><span class="lineno">  869</span> </div>
<div class="line"><span class="lineno">  870</span>    FOR_EACH_PIXEL_END_LOOP(source64, matte64, out64)</div>
<div class="line"><span class="lineno">  871</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  872</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::in invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno">  873</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1e4be06e2ffe44d151a50c35a5cc25b3" name="a1e4be06e2ffe44d151a50c35a5cc25b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e4be06e2ffe44d151a50c35a5cc25b3">&#9670;&nbsp;</a></span>ropmax()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::ropmax </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rdown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1261</span>                                        {</div>
<div class="line"><span class="lineno"> 1262</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32   = rup;</div>
<div class="line"><span class="lineno"> 1263</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> down32 = rdown;</div>
<div class="line"><span class="lineno"> 1264</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32  = rout;</div>
<div class="line"><span class="lineno"> 1265</span> </div>
<div class="line"><span class="lineno"> 1266</span>  <span class="keywordflow">if</span> (up32 &amp;&amp; down32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno"> 1267</span>    FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1268</span> </div>
<div class="line"><span class="lineno"> 1269</span>    outPix-&gt;r = upPix-&gt;r &gt; downPix-&gt;r ? upPix-&gt;r : downPix-&gt;r;</div>
<div class="line"><span class="lineno"> 1270</span>    outPix-&gt;g = upPix-&gt;g &gt; downPix-&gt;g ? upPix-&gt;g : downPix-&gt;g;</div>
<div class="line"><span class="lineno"> 1271</span>    outPix-&gt;b = upPix-&gt;b &gt; downPix-&gt;b ? upPix-&gt;b : downPix-&gt;b;</div>
<div class="line"><span class="lineno"> 1272</span>    outPix-&gt;m = upPix-&gt;m &gt; downPix-&gt;m ? upPix-&gt;m : downPix-&gt;m;</div>
<div class="line"><span class="lineno"> 1273</span> </div>
<div class="line"><span class="lineno"> 1274</span>    FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno"> 1275</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1276</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64   = rup;</div>
<div class="line"><span class="lineno"> 1277</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> down64 = rdown;</div>
<div class="line"><span class="lineno"> 1278</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64  = rout;</div>
<div class="line"><span class="lineno"> 1279</span> </div>
<div class="line"><span class="lineno"> 1280</span>    <span class="keywordflow">if</span> (up64 &amp;&amp; down64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno"> 1281</span>      FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1282</span> </div>
<div class="line"><span class="lineno"> 1283</span>      outPix-&gt;r = upPix-&gt;r &gt; downPix-&gt;r ? upPix-&gt;r : downPix-&gt;r;</div>
<div class="line"><span class="lineno"> 1284</span>      outPix-&gt;g = upPix-&gt;g &gt; downPix-&gt;g ? upPix-&gt;g : downPix-&gt;g;</div>
<div class="line"><span class="lineno"> 1285</span>      outPix-&gt;b = upPix-&gt;b &gt; downPix-&gt;b ? upPix-&gt;b : downPix-&gt;b;</div>
<div class="line"><span class="lineno"> 1286</span>      outPix-&gt;m = upPix-&gt;m &gt; downPix-&gt;m ? upPix-&gt;m : downPix-&gt;m;</div>
<div class="line"><span class="lineno"> 1287</span> </div>
<div class="line"><span class="lineno"> 1288</span>      FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno"> 1289</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1290</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> up8   = rup;</div>
<div class="line"><span class="lineno"> 1291</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> down8 = rdown;</div>
<div class="line"><span class="lineno"> 1292</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> out8  = rout;</div>
<div class="line"><span class="lineno"> 1293</span> </div>
<div class="line"><span class="lineno"> 1294</span>      <span class="keywordflow">if</span> (up8 &amp;&amp; down8 &amp;&amp; out8) {</div>
<div class="line"><span class="lineno"> 1295</span>        FOR_EACH_PIXEL_8_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1296</span> </div>
<div class="line"><span class="lineno"> 1297</span>        outPix-&gt;value =</div>
<div class="line"><span class="lineno"> 1298</span>            upPix-&gt;value &gt; downPix-&gt;value ? upPix-&gt;value : downPix-&gt;value;</div>
<div class="line"><span class="lineno"> 1299</span> </div>
<div class="line"><span class="lineno"> 1300</span>        FOR_EACH_PIXEL_8_END_LOOP</div>
<div class="line"><span class="lineno"> 1301</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1302</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::max invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno"> 1303</span>    }</div>
<div class="line"><span class="lineno"> 1304</span>  }</div>
<div class="line"><span class="lineno"> 1305</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0cf1cee72615a6140aa04f91f4d345f2" name="a0cf1cee72615a6140aa04f91f4d345f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cf1cee72615a6140aa04f91f4d345f2">&#9670;&nbsp;</a></span>ropmin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::ropmin </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rdown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>matte</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1166</span>                                                    {</div>
<div class="line"><span class="lineno"> 1167</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32   = rup;</div>
<div class="line"><span class="lineno"> 1168</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> down32 = rdown;</div>
<div class="line"><span class="lineno"> 1169</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32  = rout;</div>
<div class="line"><span class="lineno"> 1170</span> </div>
<div class="line"><span class="lineno"> 1171</span>  <span class="keywordflow">if</span> (up32 &amp;&amp; down32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno"> 1172</span>    <span class="keywordflow">if</span> (matte) {</div>
<div class="line"><span class="lineno"> 1173</span>      FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1174</span> </div>
<div class="line"><span class="lineno"> 1175</span>      outPix-&gt;r = upPix-&gt;r &lt; downPix-&gt;r ? upPix-&gt;r : downPix-&gt;r;</div>
<div class="line"><span class="lineno"> 1176</span>      outPix-&gt;g = upPix-&gt;g &lt; downPix-&gt;g ? upPix-&gt;g : downPix-&gt;g;</div>
<div class="line"><span class="lineno"> 1177</span>      outPix-&gt;b = upPix-&gt;b &lt; downPix-&gt;b ? upPix-&gt;b : downPix-&gt;b;</div>
<div class="line"><span class="lineno"> 1178</span>      outPix-&gt;m = upPix-&gt;m &lt; downPix-&gt;m ? upPix-&gt;m : downPix-&gt;m;</div>
<div class="line"><span class="lineno"> 1179</span> </div>
<div class="line"><span class="lineno"> 1180</span>      FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno"> 1181</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1182</span>      FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1183</span>      <span class="keywordflow">if</span> (upPix-&gt;m &gt;= 255) {</div>
<div class="line"><span class="lineno"> 1184</span>        outPix-&gt;r = upPix-&gt;r &lt; downPix-&gt;r ? upPix-&gt;r : downPix-&gt;r;</div>
<div class="line"><span class="lineno"> 1185</span>        outPix-&gt;g = upPix-&gt;g &lt; downPix-&gt;g ? upPix-&gt;g : downPix-&gt;g;</div>
<div class="line"><span class="lineno"> 1186</span>        outPix-&gt;b = upPix-&gt;b &lt; downPix-&gt;b ? upPix-&gt;b : downPix-&gt;b;</div>
<div class="line"><span class="lineno"> 1187</span>        outPix-&gt;m = upPix-&gt;m &lt; downPix-&gt;m ? upPix-&gt;m : downPix-&gt;m;</div>
<div class="line"><span class="lineno"> 1188</span> </div>
<div class="line"><span class="lineno"> 1189</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (upPix-&gt;m) {</div>
<div class="line"><span class="lineno"> 1190</span>        TPixel32 tmp;</div>
<div class="line"><span class="lineno"> 1191</span>        tmp.r = upPix-&gt;r &lt; downPix-&gt;r ? upPix-&gt;r : downPix-&gt;r;</div>
<div class="line"><span class="lineno"> 1192</span>        tmp.g = upPix-&gt;g &lt; downPix-&gt;g ? upPix-&gt;g : downPix-&gt;g;</div>
<div class="line"><span class="lineno"> 1193</span>        tmp.b = upPix-&gt;b &lt; downPix-&gt;b ? upPix-&gt;b : downPix-&gt;b;</div>
<div class="line"><span class="lineno"> 1194</span>        <span class="comment">// tmp.m = upPix-&gt;m &lt; downPix-&gt;m ? upPix-&gt;m : downPix-&gt;m;</span></div>
<div class="line"><span class="lineno"> 1195</span>        outPix-&gt;r = upPix-&gt;m * (tmp.r - downPix-&gt;r) / 255.0 + downPix-&gt;r;</div>
<div class="line"><span class="lineno"> 1196</span>        outPix-&gt;g = upPix-&gt;m * (tmp.g - downPix-&gt;g) / 255.0 + downPix-&gt;g;</div>
<div class="line"><span class="lineno"> 1197</span>        outPix-&gt;b = upPix-&gt;m * (tmp.b - downPix-&gt;b) / 255.0 + downPix-&gt;b;</div>
<div class="line"><span class="lineno"> 1198</span>        outPix-&gt;m = upPix-&gt;m * (tmp.m - downPix-&gt;m) / 255.0 + downPix-&gt;m;</div>
<div class="line"><span class="lineno"> 1199</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1200</span>        *outPix = *downPix;</div>
<div class="line"><span class="lineno"> 1201</span>      FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno"> 1202</span>    }</div>
<div class="line"><span class="lineno"> 1203</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1204</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64   = rup;</div>
<div class="line"><span class="lineno"> 1205</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> down64 = rdown;</div>
<div class="line"><span class="lineno"> 1206</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64  = rout;</div>
<div class="line"><span class="lineno"> 1207</span> </div>
<div class="line"><span class="lineno"> 1208</span>    <span class="keywordflow">if</span> (up64 &amp;&amp; down64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno"> 1209</span>      <span class="keywordflow">if</span> (matte) {</div>
<div class="line"><span class="lineno"> 1210</span>        FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1211</span> </div>
<div class="line"><span class="lineno"> 1212</span>        outPix-&gt;r = upPix-&gt;r &lt; downPix-&gt;r ? upPix-&gt;r : downPix-&gt;r;</div>
<div class="line"><span class="lineno"> 1213</span>        outPix-&gt;g = upPix-&gt;g &lt; downPix-&gt;g ? upPix-&gt;g : downPix-&gt;g;</div>
<div class="line"><span class="lineno"> 1214</span>        outPix-&gt;b = upPix-&gt;b &lt; downPix-&gt;b ? upPix-&gt;b : downPix-&gt;b;</div>
<div class="line"><span class="lineno"> 1215</span>        outPix-&gt;m = upPix-&gt;m &lt; downPix-&gt;m ? upPix-&gt;m : downPix-&gt;m;</div>
<div class="line"><span class="lineno"> 1216</span> </div>
<div class="line"><span class="lineno"> 1217</span>        FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno"> 1218</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1219</span>        FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1220</span>        <span class="keywordflow">if</span> (upPix-&gt;m &gt;= 65535) {</div>
<div class="line"><span class="lineno"> 1221</span>          outPix-&gt;r = upPix-&gt;r &lt; downPix-&gt;r ? upPix-&gt;r : downPix-&gt;r;</div>
<div class="line"><span class="lineno"> 1222</span>          outPix-&gt;g = upPix-&gt;g &lt; downPix-&gt;g ? upPix-&gt;g : downPix-&gt;g;</div>
<div class="line"><span class="lineno"> 1223</span>          outPix-&gt;b = upPix-&gt;b &lt; downPix-&gt;b ? upPix-&gt;b : downPix-&gt;b;</div>
<div class="line"><span class="lineno"> 1224</span>          outPix-&gt;m = upPix-&gt;m &lt; downPix-&gt;m ? upPix-&gt;m : downPix-&gt;m;</div>
<div class="line"><span class="lineno"> 1225</span> </div>
<div class="line"><span class="lineno"> 1226</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (upPix-&gt;m) {</div>
<div class="line"><span class="lineno"> 1227</span>          TPixel32 tmp;</div>
<div class="line"><span class="lineno"> 1228</span>          tmp.r = upPix-&gt;r &lt; downPix-&gt;r ? upPix-&gt;r : downPix-&gt;r;</div>
<div class="line"><span class="lineno"> 1229</span>          tmp.g = upPix-&gt;g &lt; downPix-&gt;g ? upPix-&gt;g : downPix-&gt;g;</div>
<div class="line"><span class="lineno"> 1230</span>          tmp.b = upPix-&gt;b &lt; downPix-&gt;b ? upPix-&gt;b : downPix-&gt;b;</div>
<div class="line"><span class="lineno"> 1231</span>          <span class="comment">// tmp.m = upPix-&gt;m &lt; downPix-&gt;m ? upPix-&gt;m : downPix-&gt;m;</span></div>
<div class="line"><span class="lineno"> 1232</span>          outPix-&gt;r = upPix-&gt;m * (tmp.r - downPix-&gt;r) / 65535.0 + downPix-&gt;r;</div>
<div class="line"><span class="lineno"> 1233</span>          outPix-&gt;g = upPix-&gt;m * (tmp.g - downPix-&gt;g) / 65535.0 + downPix-&gt;g;</div>
<div class="line"><span class="lineno"> 1234</span>          outPix-&gt;b = upPix-&gt;m * (tmp.b - downPix-&gt;b) / 65535.0 + downPix-&gt;b;</div>
<div class="line"><span class="lineno"> 1235</span>          outPix-&gt;m = upPix-&gt;m * (tmp.m - downPix-&gt;m) / 65535.0 + downPix-&gt;m;</div>
<div class="line"><span class="lineno"> 1236</span>        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1237</span>          *outPix = *downPix;</div>
<div class="line"><span class="lineno"> 1238</span>        FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno"> 1239</span>      }</div>
<div class="line"><span class="lineno"> 1240</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1241</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> up8   = rup;</div>
<div class="line"><span class="lineno"> 1242</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> down8 = rdown;</div>
<div class="line"><span class="lineno"> 1243</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> out8  = rout;</div>
<div class="line"><span class="lineno"> 1244</span> </div>
<div class="line"><span class="lineno"> 1245</span>      <span class="keywordflow">if</span> (up8 &amp;&amp; down8 &amp;&amp; out8) {</div>
<div class="line"><span class="lineno"> 1246</span>        FOR_EACH_PIXEL_8_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1247</span> </div>
<div class="line"><span class="lineno"> 1248</span>        outPix-&gt;value =</div>
<div class="line"><span class="lineno"> 1249</span>            upPix-&gt;value &lt; downPix-&gt;value ? upPix-&gt;value : downPix-&gt;value;</div>
<div class="line"><span class="lineno"> 1250</span> </div>
<div class="line"><span class="lineno"> 1251</span>        FOR_EACH_PIXEL_8_END_LOOP</div>
<div class="line"><span class="lineno"> 1252</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1253</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::min invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno"> 1254</span>    }</div>
<div class="line"><span class="lineno"> 1255</span>  }</div>
<div class="line"><span class="lineno"> 1256</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d075919a2603d7734e42c1b6ebc8cb8" name="a6d075919a2603d7734e42c1b6ebc8cb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d075919a2603d7734e42c1b6ebc8cb8">&#9670;&nbsp;</a></span>ropout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::ropout </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>matte</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  878</span>                                        {</div>
<div class="line"><span class="lineno">  879</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> source32 = source;</div>
<div class="line"><span class="lineno">  880</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> matte32  = matte;</div>
<div class="line"><span class="lineno">  881</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32    = rout;</div>
<div class="line"><span class="lineno">  882</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> source64 = source;</div>
<div class="line"><span class="lineno">  883</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> matte64  = matte;</div>
<div class="line"><span class="lineno">  884</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64    = rout;</div>
<div class="line"><span class="lineno">  885</span> </div>
<div class="line"><span class="lineno">  886</span>  <span class="keywordflow">if</span> (source32 &amp;&amp; matte32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno">  887</span>    FOR_EACH_PIXEL_BEGIN_LOOP(TPixelRGBM32, source32, TPixelRGBM32, matte32,</div>
<div class="line"><span class="lineno">  888</span>                              TPixelRGBM32, out32)</div>
<div class="line"><span class="lineno">  889</span> </div>
<div class="line"><span class="lineno">  890</span>    <span class="keywordflow">if</span> (downPix-&gt;m == 255)</div>
<div class="line"><span class="lineno">  891</span>      outPix-&gt;r = outPix-&gt;g = outPix-&gt;b = outPix-&gt;m = 0;</div>
<div class="line"><span class="lineno">  892</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (downPix-&gt;m == 0)</div>
<div class="line"><span class="lineno">  893</span>      *outPix = *upPix;</div>
<div class="line"><span class="lineno">  894</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  895</span>      <span class="keyword">const</span> <span class="keywordtype">int</span> MAGICFAC = (257U * 256U + 1U);</div>
<div class="line"><span class="lineno">  896</span>      UINT fac           = MAGICFAC * (255 - downPix-&gt;m);</div>
<div class="line"><span class="lineno">  897</span> </div>
<div class="line"><span class="lineno">  898</span>      outPix-&gt;r = (UINT)(upPix-&gt;r * fac + (1U &lt;&lt; 23)) &gt;&gt; 24;</div>
<div class="line"><span class="lineno">  899</span>      outPix-&gt;g = (UINT)(upPix-&gt;g * fac + (1U &lt;&lt; 23)) &gt;&gt; 24;</div>
<div class="line"><span class="lineno">  900</span>      outPix-&gt;b = (UINT)(upPix-&gt;b * fac + (1U &lt;&lt; 23)) &gt;&gt; 24;</div>
<div class="line"><span class="lineno">  901</span>      outPix-&gt;m = (UINT)(upPix-&gt;m * fac + (1U &lt;&lt; 23)) &gt;&gt; 24;</div>
<div class="line"><span class="lineno">  902</span>    }</div>
<div class="line"><span class="lineno">  903</span> </div>
<div class="line"><span class="lineno">  904</span>    FOR_EACH_PIXEL_END_LOOP(source32, matte32, out32)</div>
<div class="line"><span class="lineno">  905</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (source64 &amp;&amp; matte64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno">  906</span>    FOR_EACH_PIXEL_BEGIN_LOOP(TPixelRGBM64, source64, TPixelRGBM64, matte64,</div>
<div class="line"><span class="lineno">  907</span>                              TPixelRGBM64, out64)</div>
<div class="line"><span class="lineno">  908</span> </div>
<div class="line"><span class="lineno">  909</span>    <span class="keywordflow">if</span> (downPix-&gt;m == 65535)</div>
<div class="line"><span class="lineno">  910</span>      outPix-&gt;r = outPix-&gt;g = outPix-&gt;b = outPix-&gt;m = 0;</div>
<div class="line"><span class="lineno">  911</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (downPix-&gt;m == 0)</div>
<div class="line"><span class="lineno">  912</span>      *outPix = *upPix;</div>
<div class="line"><span class="lineno">  913</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  914</span>      <span class="keywordtype">double</span> fac = (65535 - downPix-&gt;m) / 65535.0;</div>
<div class="line"><span class="lineno">  915</span> </div>
<div class="line"><span class="lineno">  916</span>      outPix-&gt;r = (USHORT)(upPix-&gt;r * fac);</div>
<div class="line"><span class="lineno">  917</span>      outPix-&gt;g = (USHORT)(upPix-&gt;g * fac);</div>
<div class="line"><span class="lineno">  918</span>      outPix-&gt;b = (USHORT)(upPix-&gt;b * fac);</div>
<div class="line"><span class="lineno">  919</span>      outPix-&gt;m = (USHORT)(upPix-&gt;m * fac);</div>
<div class="line"><span class="lineno">  920</span>    }</div>
<div class="line"><span class="lineno">  921</span> </div>
<div class="line"><span class="lineno">  922</span>    FOR_EACH_PIXEL_END_LOOP(source64, matte64, out64)</div>
<div class="line"><span class="lineno">  923</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  924</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::out invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno">  925</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2abcebe9e3631cd03f07055b838cc92b" name="a2abcebe9e3631cd03f07055b838cc92b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2abcebe9e3631cd03f07055b838cc92b">&#9670;&nbsp;</a></span>screen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::screen </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rdown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  403</span>                                        {</div>
<div class="line"><span class="lineno">  404</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32   = rup;</div>
<div class="line"><span class="lineno">  405</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> down32 = rdown;</div>
<div class="line"><span class="lineno">  406</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32  = rout;</div>
<div class="line"><span class="lineno">  407</span>  <span class="keywordflow">if</span> (up32 &amp;&amp; down32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno">  408</span>    FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>    <span class="keywordtype">double</span> r, g, b;</div>
<div class="line"><span class="lineno">  411</span>    r = 256 - ((256 - upPix-&gt;r) * (256 - downPix-&gt;r) &gt;&gt; 8);</div>
<div class="line"><span class="lineno">  412</span>    g = 256 - ((256 - upPix-&gt;g) * (256 - downPix-&gt;g) &gt;&gt; 8);</div>
<div class="line"><span class="lineno">  413</span>    b = 256 - ((256 - upPix-&gt;b) * (256 - downPix-&gt;b) &gt;&gt; 8);</div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span>    <span class="keywordflow">if</span> (upPix-&gt;m != 255) {</div>
<div class="line"><span class="lineno">  416</span>      <span class="keywordtype">double</span> m;</div>
<div class="line"><span class="lineno">  417</span>      m = 256 - ((256 - upPix-&gt;m) * (256 - downPix-&gt;m) &gt;&gt; 8);</div>
<div class="line"><span class="lineno">  418</span>      TPixel32 tmpPix;</div>
<div class="line"><span class="lineno">  419</span>      tmpPix.r = (UCHAR)tcrop&lt;double&gt;(r, 0, 255);</div>
<div class="line"><span class="lineno">  420</span>      tmpPix.g = (UCHAR)tcrop&lt;double&gt;(g, 0, 255);</div>
<div class="line"><span class="lineno">  421</span>      tmpPix.b = (UCHAR)tcrop&lt;double&gt;(b, 0, 255);</div>
<div class="line"><span class="lineno">  422</span>      tmpPix.m = (UCHAR)tcrop&lt;double&gt;(m, 0, 255);</div>
<div class="line"><span class="lineno">  423</span>      overPix&lt;TPixel32, UCHAR&gt;(*outPix, *downPix, tmpPix);</div>
<div class="line"><span class="lineno">  424</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  425</span>      outPix-&gt;r = (UCHAR)tcrop&lt;double&gt;(r, 0, 255);</div>
<div class="line"><span class="lineno">  426</span>      outPix-&gt;g = (UCHAR)tcrop&lt;double&gt;(g, 0, 255);</div>
<div class="line"><span class="lineno">  427</span>      outPix-&gt;b = (UCHAR)tcrop&lt;double&gt;(b, 0, 255);</div>
<div class="line"><span class="lineno">  428</span>      outPix-&gt;m = upPix-&gt;m;</div>
<div class="line"><span class="lineno">  429</span>    }</div>
<div class="line"><span class="lineno">  430</span>    FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno">  431</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  432</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64   = rup;</div>
<div class="line"><span class="lineno">  433</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> down64 = rdown;</div>
<div class="line"><span class="lineno">  434</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64  = rout;</div>
<div class="line"><span class="lineno">  435</span> </div>
<div class="line"><span class="lineno">  436</span>    <span class="keywordflow">if</span> (up64 &amp;&amp; down64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno">  437</span>      FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  438</span> </div>
<div class="line"><span class="lineno">  439</span>      <span class="keywordtype">double</span> r, g, b;</div>
<div class="line"><span class="lineno">  440</span>      r = 65536 - (65536 - upPix-&gt;r) * ((65536 - downPix-&gt;r) / 65536.0);</div>
<div class="line"><span class="lineno">  441</span>      g = 65536 - (65536 - upPix-&gt;g) * ((65536 - downPix-&gt;g) / 65536.0);</div>
<div class="line"><span class="lineno">  442</span>      b = 65536 - (65536 - upPix-&gt;b) * ((65536 - downPix-&gt;b) / 65536.0);</div>
<div class="line"><span class="lineno">  443</span> </div>
<div class="line"><span class="lineno">  444</span>      <span class="keywordflow">if</span> (upPix-&gt;m != 65535) {</div>
<div class="line"><span class="lineno">  445</span>        <span class="keywordtype">double</span> m;</div>
<div class="line"><span class="lineno">  446</span>        m = 65536 - (65536 - upPix-&gt;m) * ((65536 - downPix-&gt;m) / 65536.0);</div>
<div class="line"><span class="lineno">  447</span>        TPixel64 tmpPix;</div>
<div class="line"><span class="lineno">  448</span>        tmpPix.r = (USHORT)tcrop&lt;double&gt;(r, 0, 65535);</div>
<div class="line"><span class="lineno">  449</span>        tmpPix.g = (USHORT)tcrop&lt;double&gt;(g, 0, 65535);</div>
<div class="line"><span class="lineno">  450</span>        tmpPix.b = (USHORT)tcrop&lt;double&gt;(b, 0, 65535);</div>
<div class="line"><span class="lineno">  451</span>        tmpPix.m = (USHORT)tcrop&lt;double&gt;(m, 0, 65535);</div>
<div class="line"><span class="lineno">  452</span>        overPix&lt;TPixel64, USHORT&gt;(*outPix, *downPix, tmpPix);</div>
<div class="line"><span class="lineno">  453</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  454</span>        outPix-&gt;r = (USHORT)tcrop&lt;double&gt;(r, 0, 65535);</div>
<div class="line"><span class="lineno">  455</span>        outPix-&gt;g = (USHORT)tcrop&lt;double&gt;(g, 0, 65535);</div>
<div class="line"><span class="lineno">  456</span>        outPix-&gt;b = (USHORT)tcrop&lt;double&gt;(b, 0, 65535);</div>
<div class="line"><span class="lineno">  457</span>        outPix-&gt;m = upPix-&gt;m;</div>
<div class="line"><span class="lineno">  458</span>      }</div>
<div class="line"><span class="lineno">  459</span> </div>
<div class="line"><span class="lineno">  460</span>      FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno">  461</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  462</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> up8   = rup;</div>
<div class="line"><span class="lineno">  463</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> down8 = rdown;</div>
<div class="line"><span class="lineno">  464</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> out8  = rout;</div>
<div class="line"><span class="lineno">  465</span> </div>
<div class="line"><span class="lineno">  466</span>      <span class="keywordflow">if</span> (up8 &amp;&amp; down8 &amp;&amp; out8) {</div>
<div class="line"><span class="lineno">  467</span>        FOR_EACH_PIXEL_8_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  468</span>        USHORT value;</div>
<div class="line"><span class="lineno">  469</span>        <span class="keywordflow">if</span> (downPix-&gt;value)</div>
<div class="line"><span class="lineno">  470</span>          value = (USHORT)((downPix-&gt;value &lt;&lt; 8) / (255.0 - upPix-&gt;value));</div>
<div class="line"><span class="lineno">  471</span> </div>
<div class="line"><span class="lineno">  472</span>        outPix-&gt;value = (UCHAR)tcrop&lt;USHORT&gt;(value, 0, 255);</div>
<div class="line"><span class="lineno">  473</span> </div>
<div class="line"><span class="lineno">  474</span>        FOR_EACH_PIXEL_8_END_LOOP</div>
<div class="line"><span class="lineno">  475</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  476</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::color dodge invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno">  477</span>    }</div>
<div class="line"><span class="lineno">  478</span>  }</div>
<div class="line"><span class="lineno">  479</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac744a16161fdfd8ce7de4cd12cd0307d" name="ac744a16161fdfd8ce7de4cd12cd0307d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac744a16161fdfd8ce7de4cd12cd0307d">&#9670;&nbsp;</a></span>setChannel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::setChannel </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UCHAR&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>greytones</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  255</span>                                      {</div>
<div class="line"><span class="lineno">  256</span>  assert(rin-&gt;getSize() == rout-&gt;getSize());</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>  rout-&gt;lock();</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span>  <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)rin &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)rout)</div>
<div class="line"><span class="lineno">  261</span>    doSetChannel&lt;TPixel32&gt;(rin, rout, chan, greytones);</div>
<div class="line"><span class="lineno">  262</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)rin &amp;&amp; (<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)rout)</div>
<div class="line"><span class="lineno">  263</span>    doSetChannel&lt;TPixel64&gt;(rin, rout, chan, greytones);</div>
<div class="line"><span class="lineno">  264</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  265</span>    rout-&gt;unlock();</div>
<div class="line"><span class="lineno">  266</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;setChannel: unsupported pixel type&quot;</span>);</div>
<div class="line"><span class="lineno">  267</span>  }</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>  rout-&gt;unlock();</div>
<div class="line"><span class="lineno">  270</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abb73976f88b3ec3d0a3b2cf822dff605" name="abb73976f88b3ec3d0a3b2cf822dff605"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb73976f88b3ec3d0a3b2cf822dff605">&#9670;&nbsp;</a></span>shrink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> TRop::shrink </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TRasterP</a>&#160;</td>
          <td class="paramname"><em>rin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>shrink</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  274</span>                                              {</div>
<div class="line"><span class="lineno">  275</span>  <span class="keywordtype">int</span> pixelSize = rin-&gt;getPixelSize();</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>  <span class="keywordtype">int</span> lx = (rin-&gt;getLx() - 1) / shrink + 1;</div>
<div class="line"><span class="lineno">  278</span>  <span class="keywordtype">int</span> ly = (rin-&gt;getLy() - 1) / shrink + 1;</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> rout;</div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span>  <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>)rin)</div>
<div class="line"><span class="lineno">  283</span>    rout = <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a>(lx, ly);</div>
<div class="line"><span class="lineno">  284</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>)rin)</div>
<div class="line"><span class="lineno">  285</span>    rout                      = <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a>(lx, ly);</div>
<div class="line"><span class="lineno">  286</span>  <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRasterCM32P</a>)rin) rout = <a class="code hl_class" href="class_t_raster_p_t.html">TRasterCM32P</a>(lx, ly);</div>
<div class="line"><span class="lineno">  287</span>  <span class="keywordflow">if</span> ((<a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a>)rin) rout  = <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a>(lx, ly);</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>  <span class="keywordtype">int</span> i, j;</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>  <span class="keywordflow">for</span> (i = 0; i &lt; ly; i++) {</div>
<div class="line"><span class="lineno">  292</span>    UCHAR *bufin =</div>
<div class="line"><span class="lineno">  293</span>        (UCHAR *)rin-&gt;<a class="code hl_function" href="class_t_raster.html#a5ce02b7e8a5b8b594863aa272d8dcdbc">getRawData</a>() + (i * shrink) * rin-&gt;<a class="code hl_function" href="class_t_raster.html#a760946b6cb48d7414f90cd421078912c">getWrap</a>() * pixelSize;</div>
<div class="line"><span class="lineno">  294</span>    UCHAR *bufout =</div>
<div class="line"><span class="lineno">  295</span>        (UCHAR *)rout-&gt;getRawData() + i * rout-&gt;getWrap() * pixelSize;</div>
<div class="line"><span class="lineno">  296</span>    <span class="keywordflow">for</span> (j = 0; j &lt; lx; j++) {</div>
<div class="line"><span class="lineno">  297</span>      memcpy(bufout, bufin, pixelSize);</div>
<div class="line"><span class="lineno">  298</span>      bufin += shrink * pixelSize;</div>
<div class="line"><span class="lineno">  299</span>      bufout += pixelSize;</div>
<div class="line"><span class="lineno">  300</span>    }</div>
<div class="line"><span class="lineno">  301</span>  }</div>
<div class="line"><span class="lineno">  302</span>  <span class="keywordflow">return</span> rout;</div>
<div class="line"><span class="lineno">  303</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afdf19f6890d2f927af99c25e6a125435" name="afdf19f6890d2f927af99c25e6a125435"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdf19f6890d2f927af99c25e6a125435">&#9670;&nbsp;</a></span>sub()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::sub </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rdown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>matte</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Subtract <b>rdown</b> pixels to <b>rup</b> pixels and put the resulting raster in <b>rout</b> </p>
<div class="fragment"><div class="line"><span class="lineno">  484</span>                           {</div>
<div class="line"><span class="lineno">  485</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32   = rup;</div>
<div class="line"><span class="lineno">  486</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> down32 = rdown;</div>
<div class="line"><span class="lineno">  487</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32  = rout;</div>
<div class="line"><span class="lineno">  488</span>  <span class="keywordflow">if</span> (matte) {</div>
<div class="line"><span class="lineno">  489</span>    <span class="keywordflow">if</span> (up32 &amp;&amp; down32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno">  490</span>      FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  491</span> </div>
<div class="line"><span class="lineno">  492</span>      SHORT r = downPix-&gt;r - upPix-&gt;r;</div>
<div class="line"><span class="lineno">  493</span>      SHORT g = downPix-&gt;g - upPix-&gt;g;</div>
<div class="line"><span class="lineno">  494</span>      SHORT b = downPix-&gt;b - upPix-&gt;b;</div>
<div class="line"><span class="lineno">  495</span>      SHORT m = downPix-&gt;m - upPix-&gt;m;</div>
<div class="line"><span class="lineno">  496</span> </div>
<div class="line"><span class="lineno">  497</span>      outPix-&gt;r = (UCHAR)tcrop&lt;SHORT&gt;(r, 0, 255);</div>
<div class="line"><span class="lineno">  498</span>      outPix-&gt;g = (UCHAR)tcrop&lt;SHORT&gt;(g, 0, 255);</div>
<div class="line"><span class="lineno">  499</span>      outPix-&gt;b = (UCHAR)tcrop&lt;SHORT&gt;(b, 0, 255);</div>
<div class="line"><span class="lineno">  500</span>      outPix-&gt;m = (UCHAR)tcrop&lt;SHORT&gt;(m, 0, 255);</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>      FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno">  503</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  504</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64   = rup;</div>
<div class="line"><span class="lineno">  505</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> down64 = rdown;</div>
<div class="line"><span class="lineno">  506</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64  = rout;</div>
<div class="line"><span class="lineno">  507</span> </div>
<div class="line"><span class="lineno">  508</span>      <span class="keywordflow">if</span> (up64 &amp;&amp; down64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno">  509</span>        FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  510</span> </div>
<div class="line"><span class="lineno">  511</span>        TINT32 r  = downPix-&gt;r - upPix-&gt;r;</div>
<div class="line"><span class="lineno">  512</span>        TINT32 g  = downPix-&gt;g - upPix-&gt;g;</div>
<div class="line"><span class="lineno">  513</span>        TINT32 b  = downPix-&gt;b - upPix-&gt;b;</div>
<div class="line"><span class="lineno">  514</span>        TINT32 m  = downPix-&gt;m - upPix-&gt;m;</div>
<div class="line"><span class="lineno">  515</span>        outPix-&gt;r = (USHORT)tcrop&lt;TINT32&gt;(r, 0, 0xffff);</div>
<div class="line"><span class="lineno">  516</span>        outPix-&gt;g = (USHORT)tcrop&lt;TINT32&gt;(g, 0, 0xffff);</div>
<div class="line"><span class="lineno">  517</span>        outPix-&gt;b = (USHORT)tcrop&lt;TINT32&gt;(b, 0, 0xffff);</div>
<div class="line"><span class="lineno">  518</span>        outPix-&gt;m = (USHORT)tcrop&lt;TINT32&gt;(m, 0, 0xffff);</div>
<div class="line"><span class="lineno">  519</span> </div>
<div class="line"><span class="lineno">  520</span>        FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno">  521</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  522</span>        <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> up8   = rup;</div>
<div class="line"><span class="lineno">  523</span>        <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> down8 = rdown;</div>
<div class="line"><span class="lineno">  524</span>        <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> out8  = rout;</div>
<div class="line"><span class="lineno">  525</span> </div>
<div class="line"><span class="lineno">  526</span>        <span class="keywordflow">if</span> (up8 &amp;&amp; down8 &amp;&amp; out8) {</div>
<div class="line"><span class="lineno">  527</span>          FOR_EACH_PIXEL_8_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  528</span> </div>
<div class="line"><span class="lineno">  529</span>          SHORT value   = upPix-&gt;value - downPix-&gt;value;</div>
<div class="line"><span class="lineno">  530</span>          outPix-&gt;value = (UCHAR)tcrop&lt;SHORT&gt;(value, 0, 255);</div>
<div class="line"><span class="lineno">  531</span> </div>
<div class="line"><span class="lineno">  532</span>          FOR_EACH_PIXEL_8_END_LOOP</div>
<div class="line"><span class="lineno">  533</span>        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  534</span>          <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::sub invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno">  535</span>      }</div>
<div class="line"><span class="lineno">  536</span>    }</div>
<div class="line"><span class="lineno">  537</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  538</span>    <span class="keywordflow">if</span> (up32 &amp;&amp; down32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno">  539</span>      FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  540</span> </div>
<div class="line"><span class="lineno">  541</span>      SHORT r = downPix-&gt;r - upPix-&gt;r;</div>
<div class="line"><span class="lineno">  542</span>      SHORT g = downPix-&gt;g - upPix-&gt;g;</div>
<div class="line"><span class="lineno">  543</span>      SHORT b = downPix-&gt;b - upPix-&gt;b;</div>
<div class="line"><span class="lineno">  544</span>      SHORT m = downPix-&gt;m;  <span class="comment">// - upPix-&gt;m;</span></div>
<div class="line"><span class="lineno">  545</span> </div>
<div class="line"><span class="lineno">  546</span>      outPix-&gt;r = (UCHAR)tcrop&lt;SHORT&gt;(r, 0, 255);</div>
<div class="line"><span class="lineno">  547</span>      outPix-&gt;g = (UCHAR)tcrop&lt;SHORT&gt;(g, 0, 255);</div>
<div class="line"><span class="lineno">  548</span>      outPix-&gt;b = (UCHAR)tcrop&lt;SHORT&gt;(b, 0, 255);</div>
<div class="line"><span class="lineno">  549</span>      outPix-&gt;m = (UCHAR)tcrop&lt;SHORT&gt;(m, 0, 255);</div>
<div class="line"><span class="lineno">  550</span> </div>
<div class="line"><span class="lineno">  551</span>      FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno">  552</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  553</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64   = rup;</div>
<div class="line"><span class="lineno">  554</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> down64 = rdown;</div>
<div class="line"><span class="lineno">  555</span>      <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64  = rout;</div>
<div class="line"><span class="lineno">  556</span> </div>
<div class="line"><span class="lineno">  557</span>      <span class="keywordflow">if</span> (up64 &amp;&amp; down64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno">  558</span>        FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  559</span> </div>
<div class="line"><span class="lineno">  560</span>        TINT32 r  = downPix-&gt;r - upPix-&gt;r;</div>
<div class="line"><span class="lineno">  561</span>        TINT32 g  = downPix-&gt;g - upPix-&gt;g;</div>
<div class="line"><span class="lineno">  562</span>        TINT32 b  = downPix-&gt;b - upPix-&gt;b;</div>
<div class="line"><span class="lineno">  563</span>        TINT32 m  = downPix-&gt;m;  <span class="comment">// - upPix-&gt;m;</span></div>
<div class="line"><span class="lineno">  564</span>        outPix-&gt;r = (USHORT)tcrop&lt;TINT32&gt;(r, 0, 0xffff);</div>
<div class="line"><span class="lineno">  565</span>        outPix-&gt;g = (USHORT)tcrop&lt;TINT32&gt;(g, 0, 0xffff);</div>
<div class="line"><span class="lineno">  566</span>        outPix-&gt;b = (USHORT)tcrop&lt;TINT32&gt;(b, 0, 0xffff);</div>
<div class="line"><span class="lineno">  567</span>        outPix-&gt;m = (USHORT)tcrop&lt;TINT32&gt;(m, 0, 0xffff);</div>
<div class="line"><span class="lineno">  568</span> </div>
<div class="line"><span class="lineno">  569</span>        FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno">  570</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  571</span>        <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> up8   = rup;</div>
<div class="line"><span class="lineno">  572</span>        <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> down8 = rdown;</div>
<div class="line"><span class="lineno">  573</span>        <a class="code hl_class" href="class_t_raster_p_t.html">TRasterGR8P</a> out8  = rout;</div>
<div class="line"><span class="lineno">  574</span> </div>
<div class="line"><span class="lineno">  575</span>        <span class="keywordflow">if</span> (up8 &amp;&amp; down8 &amp;&amp; out8) {</div>
<div class="line"><span class="lineno">  576</span>          FOR_EACH_PIXEL_8_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  577</span> </div>
<div class="line"><span class="lineno">  578</span>          SHORT value   = upPix-&gt;value - downPix-&gt;value;</div>
<div class="line"><span class="lineno">  579</span>          outPix-&gt;value = (UCHAR)tcrop&lt;SHORT&gt;(value, 0, 255);</div>
<div class="line"><span class="lineno">  580</span> </div>
<div class="line"><span class="lineno">  581</span>          FOR_EACH_PIXEL_8_END_LOOP</div>
<div class="line"><span class="lineno">  582</span>        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  583</span>          <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::sub invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno">  584</span>      }</div>
<div class="line"><span class="lineno">  585</span>    }</div>
<div class="line"><span class="lineno">  586</span>  }</div>
<div class="line"><span class="lineno">  587</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00343">SubFx::process()</a>.</p>

</div>
</div>
<a id="ac40128e0f0e7941fa551849ef6f14036" name="ac40128e0f0e7941fa551849ef6f14036"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac40128e0f0e7941fa551849ef6f14036">&#9670;&nbsp;</a></span>txor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::txor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rdown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>rout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  981</span>                                      {</div>
<div class="line"><span class="lineno">  982</span>  <span class="comment">// da ottimizzare...</span></div>
<div class="line"><span class="lineno">  983</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> up32   = rup;</div>
<div class="line"><span class="lineno">  984</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> down32 = rdown;</div>
<div class="line"><span class="lineno">  985</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> out32  = rout;</div>
<div class="line"><span class="lineno">  986</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> up64   = rup;</div>
<div class="line"><span class="lineno">  987</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> down64 = rdown;</div>
<div class="line"><span class="lineno">  988</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> out64  = rout;</div>
<div class="line"><span class="lineno">  989</span> </div>
<div class="line"><span class="lineno">  990</span>  <span class="keywordflow">if</span> (up32 &amp;&amp; down32 &amp;&amp; out32) {</div>
<div class="line"><span class="lineno">  991</span>    FOR_EACH_PIXEL_32_BEGIN_LOOP</div>
<div class="line"><span class="lineno">  992</span> </div>
<div class="line"><span class="lineno">  993</span>    TUINT32 notUpM   = 255 - upPix-&gt;m;</div>
<div class="line"><span class="lineno">  994</span>    TUINT32 notDownM = 255 - downPix-&gt;m;</div>
<div class="line"><span class="lineno">  995</span> </div>
<div class="line"><span class="lineno">  996</span>    TUINT32 r = notUpM + upPix-&gt;r * (notDownM);</div>
<div class="line"><span class="lineno">  997</span>    TUINT32 g = notUpM + upPix-&gt;g * (notDownM);</div>
<div class="line"><span class="lineno">  998</span>    TUINT32 b = notUpM + upPix-&gt;b * (notDownM);</div>
<div class="line"><span class="lineno">  999</span> </div>
<div class="line"><span class="lineno"> 1000</span>    outPix-&gt;r = (UCHAR)tcrop&lt;TUINT32&gt;(0, 255, r);</div>
<div class="line"><span class="lineno"> 1001</span>    outPix-&gt;g = (UCHAR)tcrop&lt;TUINT32&gt;(0, 255, g);</div>
<div class="line"><span class="lineno"> 1002</span>    outPix-&gt;b = (UCHAR)tcrop&lt;TUINT32&gt;(0, 255, b);</div>
<div class="line"><span class="lineno"> 1003</span> </div>
<div class="line"><span class="lineno"> 1004</span>    FOR_EACH_PIXEL_32_END_LOOP</div>
<div class="line"><span class="lineno"> 1005</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (up64 &amp;&amp; down64 &amp;&amp; out64) {</div>
<div class="line"><span class="lineno"> 1006</span>    FOR_EACH_PIXEL_64_BEGIN_LOOP</div>
<div class="line"><span class="lineno"> 1007</span> </div>
<div class="line"><span class="lineno"> 1008</span>    TUINT32 notUpM   = 65535 - upPix-&gt;m;</div>
<div class="line"><span class="lineno"> 1009</span>    TUINT32 notDownM = 65535 - downPix-&gt;m;</div>
<div class="line"><span class="lineno"> 1010</span> </div>
<div class="line"><span class="lineno"> 1011</span>    TUINT32 r = notUpM + upPix-&gt;r * (notDownM);</div>
<div class="line"><span class="lineno"> 1012</span>    TUINT32 g = notUpM + upPix-&gt;g * (notDownM);</div>
<div class="line"><span class="lineno"> 1013</span>    TUINT32 b = notUpM + upPix-&gt;b * (notDownM);</div>
<div class="line"><span class="lineno"> 1014</span> </div>
<div class="line"><span class="lineno"> 1015</span>    outPix-&gt;r = (USHORT)tcrop&lt;TUINT32&gt;(0, 65535, r);</div>
<div class="line"><span class="lineno"> 1016</span>    outPix-&gt;g = (USHORT)tcrop&lt;TUINT32&gt;(0, 65535, g);</div>
<div class="line"><span class="lineno"> 1017</span>    outPix-&gt;b = (USHORT)tcrop&lt;TUINT32&gt;(0, 65535, b);</div>
<div class="line"><span class="lineno"> 1018</span> </div>
<div class="line"><span class="lineno"> 1019</span>    FOR_EACH_PIXEL_64_END_LOOP</div>
<div class="line"><span class="lineno"> 1020</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1021</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_rop_exception.html">TRopException</a>(<span class="stringliteral">&quot;TRop::xor invalid raster combination&quot;</span>);</div>
<div class="line"><span class="lineno"> 1022</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afaf9411cf1fb10df32870e97d82043a0" name="afaf9411cf1fb10df32870e97d82043a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afaf9411cf1fb10df32870e97d82043a0">&#9670;&nbsp;</a></span>unlockRaster()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::unlockRaster </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct___r_a_s_t_e_r.html">_RASTER</a> *&#160;</td>
          <td class="paramname"><em>raster</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Surrenders the input raster's buffer to the cache. Should be called before inactivity periods. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1161</span>                                      {</div>
<div class="line"><span class="lineno"> 1162</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TImageP</a> img(TImageCache::instance()-&gt;get(</div>
<div class="line"><span class="lineno"> 1163</span>      std::string(raster-&gt;cacheId, raster-&gt;cacheIdLength), <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno"> 1164</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TRasterP</a> cacheRas;</div>
<div class="line"><span class="lineno"> 1165</span>  <span class="keywordflow">if</span> (raster-&gt;type == RAS_CM32)</div>
<div class="line"><span class="lineno"> 1166</span>    cacheRas = <a class="code hl_class" href="class_t_toonz_image_p.html">TToonzImageP</a>(img)-&gt;getRaster();</div>
<div class="line"><span class="lineno"> 1167</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1168</span>    cacheRas = <a class="code hl_class" href="class_t_raster_image_p.html">TRasterImageP</a>(img)-&gt;getRaster();</div>
<div class="line"><span class="lineno"> 1169</span>  cacheRas-&gt;release();</div>
<div class="line"><span class="lineno"> 1170</span>  raster-&gt;buffer        = 0;</div>
<div class="line"><span class="lineno"> 1171</span>  raster-&gt;native_buffer = 0;</div>
<div class="line"><span class="lineno"> 1172</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l01119">releaseRaster46()</a>.</p>

</div>
</div>
<a id="a35fb11523175f84027df48cc51d45d28" name="a35fb11523175f84027df48cc51d45d28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35fb11523175f84027df48cc51d45d28">&#9670;&nbsp;</a></span>whiteTransp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TRop::whiteTransp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TRasterP</a> &amp;&#160;</td>
          <td class="paramname"><em>ras</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>all white pixels are set to transparent </p>
<div class="fragment"><div class="line"><span class="lineno"> 1651</span>                                          {</div>
<div class="line"><span class="lineno"> 1652</span>  ras-&gt;lock();</div>
<div class="line"><span class="lineno"> 1653</span>  <a class="code hl_class" href="class_t_raster_p_t.html">TRaster32P</a> ras32 = ras;</div>
<div class="line"><span class="lineno"> 1654</span>  <span class="keywordflow">if</span> (ras32) {</div>
<div class="line"><span class="lineno"> 1655</span>    TPixel32 *endPix, *upPix = 0, *upRow = ras32-&gt;pixels();</div>
<div class="line"><span class="lineno"> 1656</span>    TPixel32 *lastPix =</div>
<div class="line"><span class="lineno"> 1657</span>        upRow + ras32-&gt;getWrap() * (ras32-&gt;getLy() - 1) + ras32-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1658</span> </div>
<div class="line"><span class="lineno"> 1659</span>    <span class="keywordflow">while</span> (upPix &lt; lastPix) {</div>
<div class="line"><span class="lineno"> 1660</span>      upPix  = upRow;</div>
<div class="line"><span class="lineno"> 1661</span>      endPix = upPix + ras32-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1662</span>      <span class="keywordflow">while</span> (upPix &lt; endPix) {</div>
<div class="line"><span class="lineno"> 1663</span>        <span class="keywordflow">if</span> (*upPix == TPixel::White) *upPix = TPixel::Transparent;</div>
<div class="line"><span class="lineno"> 1664</span>        ++upPix;</div>
<div class="line"><span class="lineno"> 1665</span>      }</div>
<div class="line"><span class="lineno"> 1666</span>      upRow += ras32-&gt;getWrap();</div>
<div class="line"><span class="lineno"> 1667</span>    }</div>
<div class="line"><span class="lineno"> 1668</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1669</span>    <a class="code hl_class" href="class_t_raster_p_t.html">TRaster64P</a> ras64 = ras;</div>
<div class="line"><span class="lineno"> 1670</span>    <span class="keywordflow">if</span> (ras64) {</div>
<div class="line"><span class="lineno"> 1671</span>      TPixel64 *endPix, *upPix = 0, *upRow = ras64-&gt;pixels();</div>
<div class="line"><span class="lineno"> 1672</span>      TPixel64 *lastPix =</div>
<div class="line"><span class="lineno"> 1673</span>          upRow + ras64-&gt;getWrap() * (ras64-&gt;getLy() - 1) + ras64-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1674</span> </div>
<div class="line"><span class="lineno"> 1675</span>      <span class="keywordflow">while</span> (upPix &lt; lastPix) {</div>
<div class="line"><span class="lineno"> 1676</span>        upPix  = upRow;</div>
<div class="line"><span class="lineno"> 1677</span>        endPix = upPix + ras64-&gt;getLx();</div>
<div class="line"><span class="lineno"> 1678</span>        <span class="keywordflow">while</span> (upPix &lt; endPix) {</div>
<div class="line"><span class="lineno"> 1679</span>          <span class="keywordflow">if</span> (*upPix == TPixel64::White) *upPix = TPixel64::Transparent;</div>
<div class="line"><span class="lineno"> 1680</span>          ++upPix;</div>
<div class="line"><span class="lineno"> 1681</span>        }</div>
<div class="line"><span class="lineno"> 1682</span>        upRow += ras64-&gt;getWrap();</div>
<div class="line"><span class="lineno"> 1683</span>      }</div>
<div class="line"><span class="lineno"> 1684</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1685</span>      ras-&gt;unlock();</div>
<div class="line"><span class="lineno"> 1686</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;TRop::premultiply invalid raster type&quot;</span>);</div>
<div class="line"><span class="lineno"> 1687</span>    }</div>
<div class="line"><span class="lineno"> 1688</span>  }</div>
<div class="line"><span class="lineno"> 1689</span>  ras-&gt;unlock();</div>
<div class="line"><span class="lineno"> 1690</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00465">quickPut()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
