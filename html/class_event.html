<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: Event Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="class_event-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Event Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a2abf13b5be49315e9e362af02029f058"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#a2abf13b5be49315e9e362af02029f058">Type</a> { <br />
&#160;&#160;<a class="el" href="class_event.html#a2abf13b5be49315e9e362af02029f058a7ad1738a3a40a0d489e1b356c9a42afa">special</a>
, <a class="el" href="class_event.html#a2abf13b5be49315e9e362af02029f058a79f281ada0933ebcb72973baa65084e0">edge</a>
, <a class="el" href="class_event.html#a2abf13b5be49315e9e362af02029f058a7342b521191201997425f7da42bbfc63">vertex</a>
, <a class="el" href="class_event.html#a2abf13b5be49315e9e362af02029f058a29519734363d4a5a64fdf77c4a22268a">split_regenerate</a>
, <br />
&#160;&#160;<a class="el" href="class_event.html#a2abf13b5be49315e9e362af02029f058a9d37ce59e247639e42f47a451da5a428">split</a>
, <b>failure</b>
<br />
 }</td></tr>
<tr class="memdesc:a2abf13b5be49315e9e362af02029f058"><td class="mdescLeft">&#160;</td><td class="mdescRight">An event's possible types.  <a href="class_event.html#a2abf13b5be49315e9e362af02029f058">More...</a><br /></td></tr>
<tr class="separator:a2abf13b5be49315e9e362af02029f058"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a70e67ac47f4303099fec356d7473dd45"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#a70e67ac47f4303099fec356d7473dd45">Event</a> (<a class="el" href="class_contour_node.html">ContourNode</a> *generator, <a class="el" href="struct_vectorization_context.html">VectorizationContext</a> *context)</td></tr>
<tr class="separator:a70e67ac47f4303099fec356d7473dd45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ee84a890732a0f0ef63db343d6ea016"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#a3ee84a890732a0f0ef63db343d6ea016">calculateEdgeEvent</a> ()</td></tr>
<tr class="separator:a3ee84a890732a0f0ef63db343d6ea016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4333bb342b7686bf4e2538a8592814bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#a4333bb342b7686bf4e2538a8592814bf">calculateSplitEvent</a> ()</td></tr>
<tr class="separator:a4333bb342b7686bf4e2538a8592814bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2218c3412c6cef5fc0fe40a6aadfc85f"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#a2218c3412c6cef5fc0fe40a6aadfc85f">splitDisplacementWith</a> (<a class="el" href="class_contour_node.html">ContourNode</a> *plane)</td></tr>
<tr class="separator:a2218c3412c6cef5fc0fe40a6aadfc85f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bfd1eeb0acbc314e8d9a8afed7ae940"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#a2bfd1eeb0acbc314e8d9a8afed7ae940">tryRayEdgeCollisionWith</a> (<a class="el" href="class_contour_node.html">ContourNode</a> *<a class="el" href="class_event.html#a2abf13b5be49315e9e362af02029f058a79f281ada0933ebcb72973baa65084e0">edge</a>)</td></tr>
<tr class="separator:a2bfd1eeb0acbc314e8d9a8afed7ae940"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a3ecd1738a86cd57a74c82a0f4106fd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#a4a3ecd1738a86cd57a74c82a0f4106fd">process</a> ()</td></tr>
<tr class="separator:a4a3ecd1738a86cd57a74c82a0f4106fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6d5d0b2d1fd642475589ea08c9ba895"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#ac6d5d0b2d1fd642475589ea08c9ba895">processEdgeEvent</a> ()</td></tr>
<tr class="separator:ac6d5d0b2d1fd642475589ea08c9ba895"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46e9058fb54959eed3d29b690507a1f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#a46e9058fb54959eed3d29b690507a1f9">processMaxEvent</a> ()</td></tr>
<tr class="separator:a46e9058fb54959eed3d29b690507a1f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4696f065e96ac3de881594c83085b87"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#af4696f065e96ac3de881594c83085b87">processSplitEvent</a> ()</td></tr>
<tr class="separator:af4696f065e96ac3de881594c83085b87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2358301510ae0ac99df023dcef6f7448"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#a2358301510ae0ac99df023dcef6f7448">processVertexEvent</a> ()</td></tr>
<tr class="separator:a2358301510ae0ac99df023dcef6f7448"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34f51130fb0ea63029c7e0feadecfa40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#a34f51130fb0ea63029c7e0feadecfa40">processSpecialEvent</a> ()</td></tr>
<tr class="separator:a34f51130fb0ea63029c7e0feadecfa40"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a2528d8a045ab31c5377e92f9c9b92006"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#a2528d8a045ab31c5377e92f9c9b92006">m_height</a></td></tr>
<tr class="separator:a2528d8a045ab31c5377e92f9c9b92006"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af442c2cf88f49433232c047536662119"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#af442c2cf88f49433232c047536662119">m_displacement</a></td></tr>
<tr class="separator:af442c2cf88f49433232c047536662119"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58affae3e7156b2c9543868c267585ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_contour_node.html">ContourNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#a58affae3e7156b2c9543868c267585ff">m_generator</a></td></tr>
<tr class="separator:a58affae3e7156b2c9543868c267585ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab610811752d3a04c91db57d212ac1f25"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_contour_node.html">ContourNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#ab610811752d3a04c91db57d212ac1f25">m_coGenerator</a></td></tr>
<tr class="separator:ab610811752d3a04c91db57d212ac1f25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b6df7508772bf848466b71623666c97"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_event.html#a2abf13b5be49315e9e362af02029f058">Type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#a4b6df7508772bf848466b71623666c97">m_type</a></td></tr>
<tr class="separator:a4b6df7508772bf848466b71623666c97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad64e3eda5ff0f1b86c910b701953be6e"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#ad64e3eda5ff0f1b86c910b701953be6e">m_algoritmicTime</a></td></tr>
<tr class="separator:ad64e3eda5ff0f1b86c910b701953be6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeee3995902cd8cafb2e78b1a910b4de3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_vectorization_context.html">VectorizationContext</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_event.html#aeee3995902cd8cafb2e78b1a910b4de3">m_context</a></td></tr>
<tr class="separator:aeee3995902cd8cafb2e78b1a910b4de3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a2abf13b5be49315e9e362af02029f058" name="a2abf13b5be49315e9e362af02029f058"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2abf13b5be49315e9e362af02029f058">&#9670;&nbsp;</a></span>Type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_event.html#a2abf13b5be49315e9e362af02029f058">Event::Type</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An event's possible types. </p>
<dl class="section remark"><dt>Remarks</dt><dd>Values are sorted by preference at simultaneous events. <br  />
 </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a2abf13b5be49315e9e362af02029f058a7ad1738a3a40a0d489e1b356c9a42afa" name="a2abf13b5be49315e9e362af02029f058a7ad1738a3a40a0d489e1b356c9a42afa"></a>special&#160;</td><td class="fielddoc"><p >A vertex event that is also an edge event (V case). </p>
</td></tr>
<tr><td class="fieldname"><a id="a2abf13b5be49315e9e362af02029f058a79f281ada0933ebcb72973baa65084e0" name="a2abf13b5be49315e9e362af02029f058a79f281ada0933ebcb72973baa65084e0"></a>edge&#160;</td><td class="fielddoc"><p >An edge shrinks to 0 length. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2abf13b5be49315e9e362af02029f058a7342b521191201997425f7da42bbfc63" name="a2abf13b5be49315e9e362af02029f058a7342b521191201997425f7da42bbfc63"></a>vertex&#160;</td><td class="fielddoc"><p >Two contour nodes clash. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2abf13b5be49315e9e362af02029f058a29519734363d4a5a64fdf77c4a22268a" name="a2abf13b5be49315e9e362af02029f058a29519734363d4a5a64fdf77c4a22268a"></a>split_regenerate&#160;</td><td class="fielddoc"><p >Placeholder type for split events that must be regenerated. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2abf13b5be49315e9e362af02029f058a9d37ce59e247639e42f47a451da5a428" name="a2abf13b5be49315e9e362af02029f058a9d37ce59e247639e42f47a451da5a428"></a>split&#160;</td><td class="fielddoc"><p >An edge is split by a clashing contour node. </p>
</td></tr>
</table>
<div class="fragment"><div class="line"><span class="lineno">  143</span>  { <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a7ad1738a3a40a0d489e1b356c9a42afa">special</a>,           </div>
<div class="line"><span class="lineno">  144</span>    <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a79f281ada0933ebcb72973baa65084e0">edge</a>,              </div>
<div class="line"><span class="lineno">  145</span>    <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a7342b521191201997425f7da42bbfc63">vertex</a>,            </div>
<div class="line"><span class="lineno">  146</span>    <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a29519734363d4a5a64fdf77c4a22268a">split_regenerate</a>,  </div>
<div class="line"><span class="lineno">  148</span>    <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a9d37ce59e247639e42f47a451da5a428">split</a>,             </div>
<div class="line"><span class="lineno">  149</span>    failure };</div>
<div class="ttc" id="aclass_event_html_a2abf13b5be49315e9e362af02029f058a29519734363d4a5a64fdf77c4a22268a"><div class="ttname"><a href="class_event.html#a2abf13b5be49315e9e362af02029f058a29519734363d4a5a64fdf77c4a22268a">Event::split_regenerate</a></div><div class="ttdeci">@ split_regenerate</div><div class="ttdef"><b>Definition:</b> tcenterlineskeletonizer.cpp:146</div></div>
<div class="ttc" id="aclass_event_html_a2abf13b5be49315e9e362af02029f058a7342b521191201997425f7da42bbfc63"><div class="ttname"><a href="class_event.html#a2abf13b5be49315e9e362af02029f058a7342b521191201997425f7da42bbfc63">Event::vertex</a></div><div class="ttdeci">@ vertex</div><div class="ttdoc">Two contour nodes clash.</div><div class="ttdef"><b>Definition:</b> tcenterlineskeletonizer.cpp:145</div></div>
<div class="ttc" id="aclass_event_html_a2abf13b5be49315e9e362af02029f058a79f281ada0933ebcb72973baa65084e0"><div class="ttname"><a href="class_event.html#a2abf13b5be49315e9e362af02029f058a79f281ada0933ebcb72973baa65084e0">Event::edge</a></div><div class="ttdeci">@ edge</div><div class="ttdoc">An edge shrinks to 0 length.</div><div class="ttdef"><b>Definition:</b> tcenterlineskeletonizer.cpp:144</div></div>
<div class="ttc" id="aclass_event_html_a2abf13b5be49315e9e362af02029f058a7ad1738a3a40a0d489e1b356c9a42afa"><div class="ttname"><a href="class_event.html#a2abf13b5be49315e9e362af02029f058a7ad1738a3a40a0d489e1b356c9a42afa">Event::special</a></div><div class="ttdeci">@ special</div><div class="ttdoc">A vertex event that is also an edge event (V case).</div><div class="ttdef"><b>Definition:</b> tcenterlineskeletonizer.cpp:143</div></div>
<div class="ttc" id="aclass_event_html_a2abf13b5be49315e9e362af02029f058a9d37ce59e247639e42f47a451da5a428"><div class="ttname"><a href="class_event.html#a2abf13b5be49315e9e362af02029f058a9d37ce59e247639e42f47a451da5a428">Event::split</a></div><div class="ttdeci">@ split</div><div class="ttdoc">An edge is split by a clashing contour node.</div><div class="ttdef"><b>Definition:</b> tcenterlineskeletonizer.cpp:148</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a70e67ac47f4303099fec356d7473dd45" name="a70e67ac47f4303099fec356d7473dd45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70e67ac47f4303099fec356d7473dd45">&#9670;&nbsp;</a></span>Event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Event::Event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_contour_node.html">ContourNode</a> *&#160;</td>
          <td class="paramname"><em>generator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_vectorization_context.html">VectorizationContext</a> *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  717</span>    : m_height(infinity)</div>
<div class="line"><span class="lineno">  718</span>    , m_displacement(infinity)</div>
<div class="line"><span class="lineno">  719</span>    , m_generator(generator)</div>
<div class="line"><span class="lineno">  720</span>    , m_type(failure)</div>
<div class="line"><span class="lineno">  721</span>    , m_algoritmicTime(context-&gt;m_algoritmicTime)</div>
<div class="line"><span class="lineno">  722</span>    , m_context(context) {</div>
<div class="line"><span class="lineno">  723</span>  <span class="keywordflow">if</span> (generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a19555660302217faf473dea41dbcfc17">m_concave</a>)</div>
<div class="line"><span class="lineno">  724</span>    calculateSplitEvent();</div>
<div class="line"><span class="lineno">  725</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  726</span>    calculateEdgeEvent();</div>
<div class="line"><span class="lineno">  727</span>}</div>
<div class="ttc" id="aclass_contour_node_html_a19555660302217faf473dea41dbcfc17"><div class="ttname"><a href="class_contour_node.html#a19555660302217faf473dea41dbcfc17">ContourNode::m_concave</a></div><div class="ttdeci">bool m_concave</div><div class="ttdoc">Whether the node represents a concave angle.</div><div class="ttdef"><b>Definition:</b> tcenterlinevectP.h:289</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3ee84a890732a0f0ef63db343d6ea016" name="a3ee84a890732a0f0ef63db343d6ea016"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ee84a890732a0f0ef63db343d6ea016">&#9670;&nbsp;</a></span>calculateEdgeEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Event::calculateEdgeEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  735</span>                                      {</div>
<div class="line"><span class="lineno">  736</span>  <span class="keyword">struct </span>locals {</div>
<div class="line"><span class="lineno">  737</span>    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> buildDisplacements(<a class="code hl_class" href="class_contour_node.html">ContourNode</a> *edgeFirst, <span class="keywordtype">double</span> &amp;d1,</div>
<div class="line"><span class="lineno">  738</span>                                          <span class="keywordtype">double</span> &amp;d2) {</div>
<div class="line"><span class="lineno">  739</span>      <a class="code hl_class" href="class_contour_node.html">ContourNode</a> *edgeSecond = edgeFirst-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>;</div>
<div class="line"><span class="lineno">  740</span> </div>
<div class="line"><span class="lineno">  741</span>      <span class="comment">// If bisectors are almost opposite, avoid: there must be another bisector</span></div>
<div class="line"><span class="lineno">  742</span>      <span class="comment">// colliding with m_generator *before* coGenerator - allowing a positive</span></div>
<div class="line"><span class="lineno">  743</span>      <span class="comment">// result here may interfere with it.</span></div>
<div class="line"><span class="lineno">  744</span>      <span class="keywordflow">if</span> ((edgeFirst-&gt;<a class="code hl_variable" href="class_contour_node.html#a19555660302217faf473dea41dbcfc17">m_concave</a> &amp;&amp; edgeSecond-&gt;<a class="code hl_variable" href="class_contour_node.html#a19555660302217faf473dea41dbcfc17">m_concave</a>) ||</div>
<div class="line"><span class="lineno">  745</span>          edgeFirst-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a> * edgeSecond-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a> &lt; -0.9) {</div>
<div class="line"><span class="lineno">  746</span>        d1 = d2 = -1.0;</div>
<div class="line"><span class="lineno">  747</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  748</span>      }</div>
<div class="line"><span class="lineno">  749</span> </div>
<div class="line"><span class="lineno">  750</span>      <span class="keywordtype">double</span> det = edgeFirst-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>.y * edgeSecond-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>.x -</div>
<div class="line"><span class="lineno">  751</span>                   edgeFirst-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>.x * edgeSecond-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>.y;</div>
<div class="line"><span class="lineno">  752</span> </div>
<div class="line"><span class="lineno">  753</span>      <span class="keywordtype">double</span> cx = edgeSecond-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a>.x - edgeFirst-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a>.x,</div>
<div class="line"><span class="lineno">  754</span>             cy = edgeSecond-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a>.y - edgeFirst-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a>.y;</div>
<div class="line"><span class="lineno">  755</span> </div>
<div class="line"><span class="lineno">  756</span>      d1 = (edgeSecond-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>.x * cy - edgeSecond-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>.y * cx) /</div>
<div class="line"><span class="lineno">  757</span>           det;</div>
<div class="line"><span class="lineno">  758</span>      d2 =</div>
<div class="line"><span class="lineno">  759</span>          (edgeFirst-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>.x * cy - edgeFirst-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>.y * cx) / det;</div>
<div class="line"><span class="lineno">  760</span>    }</div>
<div class="line"><span class="lineno">  761</span> </div>
<div class="line"><span class="lineno">  762</span>    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">double</span> height(<a class="code hl_class" href="class_contour_node.html">ContourNode</a> *node, <span class="keywordtype">double</span> displacement) {</div>
<div class="line"><span class="lineno">  763</span>      <span class="keywordflow">return</span> node-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a>.z + displacement * node-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>.z;</div>
<div class="line"><span class="lineno">  764</span>    }</div>
<div class="line"><span class="lineno">  765</span>  };  <span class="comment">// locals</span></div>
<div class="line"><span class="lineno">  766</span> </div>
<div class="line"><span class="lineno">  767</span>  <span class="keywordtype">double</span> minHeight, minDisplacement;</div>
<div class="line"><span class="lineno">  768</span>  <span class="keywordtype">bool</span> positiveEdgeDispl;</div>
<div class="line"><span class="lineno">  769</span> </div>
<div class="line"><span class="lineno">  770</span>  m_type = <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a79f281ada0933ebcb72973baa65084e0">edge</a>;</div>
<div class="line"><span class="lineno">  771</span> </div>
<div class="line"><span class="lineno">  772</span>  <span class="comment">// Calculate the two possible displacement parameters</span></div>
<div class="line"><span class="lineno">  773</span>  <span class="keywordtype">double</span> firstDisplacement, prevDisplacement, nextDisplacement,</div>
<div class="line"><span class="lineno">  774</span>      lastDisplacement;</div>
<div class="line"><span class="lineno">  775</span> </div>
<div class="line"><span class="lineno">  776</span>  <span class="comment">// right == prev</span></div>
<div class="line"><span class="lineno">  777</span> </div>
<div class="line"><span class="lineno">  778</span>  locals::buildDisplacements(m_generator, nextDisplacement, lastDisplacement);</div>
<div class="line"><span class="lineno">  779</span>  locals::buildDisplacements(m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>, firstDisplacement,</div>
<div class="line"><span class="lineno">  780</span>                             prevDisplacement);</div>
<div class="line"><span class="lineno">  781</span> </div>
<div class="line"><span class="lineno">  782</span>  <span class="comment">// Take the smallest positive between them and assign the co-generator</span></div>
<div class="line"><span class="lineno">  783</span>  <span class="comment">// NOTE: In a missed vertex event, the threshold value is to compare with the</span></div>
<div class="line"><span class="lineno">  784</span>  <span class="comment">// possible pushes at the end of processSplit</span></div>
<div class="line"><span class="lineno">  785</span>  <span class="comment">// However, admitting slightly negative displacements should be ok: due to the</span></div>
<div class="line"><span class="lineno">  786</span>  <span class="comment">// weak linear axis imposed for concave</span></div>
<div class="line"><span class="lineno">  787</span>  <span class="comment">// vertices, it is impossible to have little negative displacements apart from</span></div>
<div class="line"><span class="lineno">  788</span>  <span class="comment">// the above mentioned pushed case.</span></div>
<div class="line"><span class="lineno">  789</span>  <span class="comment">//   ..currently almost true..</span></div>
<div class="line"><span class="lineno">  790</span> </div>
<div class="line"><span class="lineno">  791</span>  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> minusTol = -0.03;</div>
<div class="line"><span class="lineno">  792</span> </div>
<div class="line"><span class="lineno">  793</span>  <span class="keywordtype">bool</span> prevDispPositive = (prevDisplacement &gt; minusTol);</div>
<div class="line"><span class="lineno">  794</span>  <span class="keywordtype">bool</span> nextDispPositive = (nextDisplacement &gt; minusTol);</div>
<div class="line"><span class="lineno">  795</span> </div>
<div class="line"><span class="lineno">  796</span>  <span class="keywordflow">if</span> (nextDispPositive) {</div>
<div class="line"><span class="lineno">  797</span>    <span class="keywordflow">if</span> (!prevDispPositive || nextDisplacement &lt; prevDisplacement) {</div>
<div class="line"><span class="lineno">  798</span>      m_coGenerator     = m_generator;</div>
<div class="line"><span class="lineno">  799</span>      minDisplacement   = nextDisplacement;</div>
<div class="line"><span class="lineno">  800</span>      minHeight         = locals::height(m_coGenerator, nextDisplacement);</div>
<div class="line"><span class="lineno">  801</span>      positiveEdgeDispl = (nextDispPositive &amp;&amp; lastDisplacement &gt; minusTol);</div>
<div class="line"><span class="lineno">  802</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  803</span>      m_coGenerator   = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>;</div>
<div class="line"><span class="lineno">  804</span>      minDisplacement = prevDisplacement;</div>
<div class="line"><span class="lineno">  805</span>      minHeight       = locals::height(</div>
<div class="line"><span class="lineno">  806</span>          m_coGenerator,</div>
<div class="line"><span class="lineno">  807</span>          firstDisplacement);  <span class="comment">// Height is built on the edge&#39;s first</span></div>
<div class="line"><span class="lineno">  808</span>      positiveEdgeDispl =</div>
<div class="line"><span class="lineno">  809</span>          (prevDispPositive &amp;&amp;</div>
<div class="line"><span class="lineno">  810</span>           firstDisplacement &gt;</div>
<div class="line"><span class="lineno">  811</span>               minusTol);  <span class="comment">// endpoint to have the same values on adjacent</span></div>
<div class="line"><span class="lineno">  812</span>    }                      <span class="comment">// generators. It&#39;s important for SPECIAL events.</span></div>
<div class="line"><span class="lineno">  813</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (prevDispPositive) {</div>
<div class="line"><span class="lineno">  814</span>    m_coGenerator   = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>;</div>
<div class="line"><span class="lineno">  815</span>    minDisplacement = prevDisplacement;</div>
<div class="line"><span class="lineno">  816</span>    minHeight = locals::height(m_coGenerator, firstDisplacement);  <span class="comment">// Same here</span></div>
<div class="line"><span class="lineno">  817</span>    positiveEdgeDispl = (prevDispPositive &amp;&amp; firstDisplacement &gt; minusTol);</div>
<div class="line"><span class="lineno">  818</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  819</span>    m_type = failure;</div>
<div class="line"><span class="lineno">  820</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  821</span>  }</div>
<div class="line"><span class="lineno">  822</span> </div>
<div class="line"><span class="lineno">  823</span>  <span class="comment">// NOTA: Le const di tolleranza sono da confrontare tra:</span></div>
<div class="line"><span class="lineno">  824</span>  <span class="comment">// a) i push alla fine di processSplit per evitare rogne coi vertex multipli</span></div>
<div class="line"><span class="lineno">  825</span>  <span class="comment">// b) Le condizioni di esclusione su side1 e side2 in trySplit che evitano a)</span></div>
<div class="line"><span class="lineno">  826</span>  <span class="comment">// c) Le condizioni di riconoscimento di vertex e special events - perche&#39; se</span></div>
<div class="line"><span class="lineno">  827</span>  <span class="comment">// mancano...</span></div>
<div class="line"><span class="lineno">  828</span> </div>
<div class="line"><span class="lineno">  829</span>  <span class="comment">// Special cases: (forse da raffinare le condizioni - comunque ora sono</span></div>
<div class="line"><span class="lineno">  830</span>  <span class="comment">// efficaci)</span></div>
<div class="line"><span class="lineno">  831</span>  <span class="keywordflow">if</span> (nextDispPositive &amp;&amp; !m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a19555660302217faf473dea41dbcfc17">m_concave</a>) {</div>
<div class="line"><span class="lineno">  832</span>    <span class="keywordflow">if</span> (m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a19555660302217faf473dea41dbcfc17">m_concave</a> &amp;&amp; m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a19555660302217faf473dea41dbcfc17">m_concave</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  833</span>        fabs(nextDisplacement - prevDisplacement) &lt;</div>
<div class="line"><span class="lineno">  834</span>            0.1)  <span class="comment">// condizione debole per escludere subito i casi evidentemente</span></div>
<div class="line"><span class="lineno">  835</span>                  <span class="comment">// innocenti</span></div>
<div class="line"><span class="lineno">  836</span>    {</div>
<div class="line"><span class="lineno">  837</span>      <span class="comment">// Check &#39;V&#39; (special) event - can generate a new concave vertex</span></div>
<div class="line"><span class="lineno">  838</span>      <a class="code hl_class" href="class_contour_node.html">ContourNode</a> *prevRay = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>,</div>
<div class="line"><span class="lineno">  839</span>                  *nextRay = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>;</div>
<div class="line"><span class="lineno">  840</span> </div>
<div class="line"><span class="lineno">  841</span>      <span class="keywordtype">double</span> side = prevRay-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a> * nextRay-&gt;m_AngularMomentum +</div>
<div class="line"><span class="lineno">  842</span>                    nextRay-&gt;m_direction * prevRay-&gt;<a class="code hl_variable" href="class_contour_node.html#a69fa12cf76cbb0351128739bddd03d66">m_AngularMomentum</a>;</div>
<div class="line"><span class="lineno">  843</span> </div>
<div class="line"><span class="lineno">  844</span>      <span class="comment">// NOTE: fabs(side) / || prevRay-&gt;dir x nextRay-&gt;dir ||  is the distance</span></div>
<div class="line"><span class="lineno">  845</span>      <span class="comment">// between the two rays.</span></div>
<div class="line"><span class="lineno">  846</span>      <span class="keywordflow">if</span> (fabs(side) &lt;</div>
<div class="line"><span class="lineno">  847</span>          0.03 * norm(cross(prevRay-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>, nextRay-&gt;m_direction)))</div>
<div class="line"><span class="lineno">  848</span>        m_type = <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a7ad1738a3a40a0d489e1b356c9a42afa">special</a>, m_coGenerator = m_generator;</div>
<div class="line"><span class="lineno">  849</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fabs(nextDisplacement - prevDisplacement) &lt; 0.01) {</div>
<div class="line"><span class="lineno">  850</span>      <span class="comment">// Then choose to make the event with a concave vertex (to resemble the</span></div>
<div class="line"><span class="lineno">  851</span>      <span class="comment">// &#39;LL&#39; case)</span></div>
<div class="line"><span class="lineno">  852</span>      m_coGenerator =</div>
<div class="line"><span class="lineno">  853</span>          m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a19555660302217faf473dea41dbcfc17">m_concave</a> ? m_generator : m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>;</div>
<div class="line"><span class="lineno">  854</span>    }</div>
<div class="line"><span class="lineno">  855</span>  }</div>
<div class="line"><span class="lineno">  856</span> </div>
<div class="line"><span class="lineno">  857</span>  <span class="comment">// Now, if calculated height is coherent, this Event is valid.</span></div>
<div class="line"><span class="lineno">  858</span>  <span class="keywordflow">if</span> (positiveEdgeDispl  <span class="comment">// Edges shrinking to a point after a FORWARD</span></div>
<div class="line"><span class="lineno">  859</span>      ||</div>
<div class="line"><span class="lineno">  860</span>      minHeight &gt; m_context-&gt;m_currentHeight -</div>
<div class="line"><span class="lineno">  861</span>                      0.01)  <span class="comment">// displacement are processable - this dominates</span></div>
<div class="line"><span class="lineno">  862</span>    m_height = minHeight,</div>
<div class="line"><span class="lineno">  863</span>    m_displacement =</div>
<div class="line"><span class="lineno">  864</span>        minDisplacement;  <span class="comment">// height considerations which may be affected by</span></div>
<div class="line"><span class="lineno">  865</span>  <span class="keywordflow">else</span>                    <span class="comment">// numerical errors</span></div>
<div class="line"><span class="lineno">  866</span>    m_type = failure;</div>
<div class="line"><span class="lineno">  867</span>}</div>
<div class="ttc" id="aclass_contour_node_html"><div class="ttname"><a href="class_contour_node.html">ContourNode</a></div><div class="ttdef"><b>Definition:</b> tcenterlinevectP.h:266</div></div>
<div class="ttc" id="aclass_contour_node_html_a160411550051be248c686852654ccd36"><div class="ttname"><a href="class_contour_node.html#a160411550051be248c686852654ccd36">ContourNode::m_next</a></div><div class="ttdeci">ContourNode * m_next</div><div class="ttdoc">Next node on the contour.</div><div class="ttdef"><b>Definition:</b> tcenterlinevectP.h:303</div></div>
<div class="ttc" id="aclass_contour_node_html_a4c3d561d582e192cba5c841382df8aa7"><div class="ttname"><a href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">ContourNode::m_position</a></div><div class="ttdeci">T3DPointD m_position</div><div class="ttdoc">Node's position.</div><div class="ttdef"><b>Definition:</b> tcenterlinevectP.h:282</div></div>
<div class="ttc" id="aclass_contour_node_html_a69fa12cf76cbb0351128739bddd03d66"><div class="ttname"><a href="class_contour_node.html#a69fa12cf76cbb0351128739bddd03d66">ContourNode::m_AngularMomentum</a></div><div class="ttdeci">T3DPointD m_AngularMomentum</div><div class="ttdoc">Angular momentum with the next node's edge.</div><div class="ttdef"><b>Definition:</b> tcenterlinevectP.h:284</div></div>
<div class="ttc" id="aclass_contour_node_html_a6d7344a3b36514eef1995fdca6e47741"><div class="ttname"><a href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">ContourNode::m_direction</a></div><div class="ttdeci">T3DPointD m_direction</div><div class="ttdoc">Node's direction.</div><div class="ttdef"><b>Definition:</b> tcenterlinevectP.h:283</div></div>
<div class="ttc" id="aclass_contour_node_html_ac4ef2b1947b66623cc66de831ebf1248"><div class="ttname"><a href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">ContourNode::m_prev</a></div><div class="ttdeci">ContourNode * m_prev</div><div class="ttdoc">Previous node on the contour.</div><div class="ttdef"><b>Definition:</b> tcenterlinevectP.h:304</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4333bb342b7686bf4e2538a8592814bf" name="a4333bb342b7686bf4e2538a8592814bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4333bb342b7686bf4e2538a8592814bf">&#9670;&nbsp;</a></span>calculateSplitEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Event::calculateSplitEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  871</span>                                       {</div>
<div class="line"><span class="lineno">  872</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  873</span>  <span class="keywordtype">bool</span> forceFirst;</div>
<div class="line"><span class="lineno">  874</span>  <a class="code hl_class" href="class_contour_node.html">ContourNode</a> *opposite, *first, *last;</div>
<div class="line"><span class="lineno">  875</span>  std::list&lt;ContourNode *&gt;::iterator currentContour;</div>
<div class="line"><span class="lineno">  876</span> </div>
<div class="line"><span class="lineno">  877</span>  <span class="comment">// Sign *edges* not to be taken as possible opposites</span></div>
<div class="line"><span class="lineno">  878</span>  <span class="keywordflow">for</span> (i = 0; i &lt; m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a14c308ca63e367045d7f0ff76ef9e575">m_notOpposites</a>.size(); ++i)</div>
<div class="line"><span class="lineno">  879</span>    m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a14c308ca63e367045d7f0ff76ef9e575">m_notOpposites</a>[i]-&gt;setAttribute(ContourEdge::NOT_OPPOSITE);</div>
<div class="line"><span class="lineno">  880</span> </div>
<div class="line"><span class="lineno">  881</span>  <span class="comment">// Check adjacent edge events</span></div>
<div class="line"><span class="lineno">  882</span>  calculateEdgeEvent();  <span class="comment">// DO NOT REMOVE - adjacent convexes may have</span></div>
<div class="line"><span class="lineno">  883</span>                         <span class="comment">// been calculated too earlier</span></div>
<div class="line"><span class="lineno">  884</span>  <span class="comment">// First check opposites in the m_generator active contour</span></div>
<div class="line"><span class="lineno">  885</span>  first =</div>
<div class="line"><span class="lineno">  886</span>      m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>;     <span class="comment">// Adjacent edges were already considered</span></div>
<div class="line"><span class="lineno">  887</span>  last = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>;  <span class="comment">// by calculateEdgeEvents()</span></div>
<div class="line"><span class="lineno">  888</span>  <span class="keywordflow">for</span> (opposite = first; opposite != last; opposite = opposite-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>) {</div>
<div class="line"><span class="lineno">  889</span>    <span class="keywordflow">if</span> (!opposite-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a>-&gt;hasAttribute(ContourEdge::NOT_OPPOSITE))</div>
<div class="line"><span class="lineno">  890</span>      tryRayEdgeCollisionWith(opposite);</div>
<div class="line"><span class="lineno">  891</span>  }</div>
<div class="line"><span class="lineno">  892</span> </div>
<div class="line"><span class="lineno">  893</span>  <a class="code hl_class" href="class_index_table.html">IndexTable</a> &amp;activeTable = m_context-&gt;m_activeTable;</div>
<div class="line"><span class="lineno">  894</span> </div>
<div class="line"><span class="lineno">  895</span>  <span class="comment">// Then, try in the remaining active contours whose identifier is != our</span></div>
<div class="line"><span class="lineno">  896</span>  <span class="keywordflow">for</span> (i = 0; i &lt; activeTable.<a class="code hl_variable" href="class_index_table.html#ae5ad9fe1aa08464501459f1739d815cc">m_columns</a>.size(); ++i) {</div>
<div class="line"><span class="lineno">  897</span>    <span class="keywordflow">for</span> (currentContour = activeTable[i]-&gt;begin();</div>
<div class="line"><span class="lineno">  898</span>         currentContour != activeTable[i]-&gt;end(); currentContour++) {</div>
<div class="line"><span class="lineno">  899</span>      <span class="comment">// Da spostare sopra il 2o for</span></div>
<div class="line"><span class="lineno">  900</span>      <span class="keywordflow">if</span> (activeTable.<a class="code hl_variable" href="class_index_table.html#ae787501a8b7b54425762e7e6aefdd74a">m_identifiers</a>[(*currentContour)-&gt;m_ancestorContour] !=</div>
<div class="line"><span class="lineno">  901</span>          activeTable.<a class="code hl_variable" href="class_index_table.html#ae787501a8b7b54425762e7e6aefdd74a">m_identifiers</a>[m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>]) {</div>
<div class="line"><span class="lineno">  902</span>        first = *currentContour;</div>
<div class="line"><span class="lineno">  903</span>        <span class="keywordflow">for</span> (opposite = first, forceFirst = 1;</div>
<div class="line"><span class="lineno">  904</span>             <span class="comment">// Better the first next cond. - in case of thinning errors, at</span></div>
<div class="line"><span class="lineno">  905</span>             <span class="comment">// least it does not get loop&#39;d.</span></div>
<div class="line"><span class="lineno">  906</span>             !opposite-&gt;hasAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>)  <span class="comment">// opposite!=first</span></div>
<div class="line"><span class="lineno">  907</span>             || (forceFirst ? forceFirst = 0, 1 : 0);</div>
<div class="line"><span class="lineno">  908</span>             opposite = opposite-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>) {</div>
<div class="line"><span class="lineno">  909</span>          <span class="keywordflow">if</span> (!opposite-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a>-&gt;hasAttribute(ContourEdge::NOT_OPPOSITE))</div>
<div class="line"><span class="lineno">  910</span>            tryRayEdgeCollisionWith(opposite);</div>
<div class="line"><span class="lineno">  911</span>        }</div>
<div class="line"><span class="lineno">  912</span>      }</div>
<div class="line"><span class="lineno">  913</span>    }</div>
<div class="line"><span class="lineno">  914</span>  }</div>
<div class="line"><span class="lineno">  915</span> </div>
<div class="line"><span class="lineno">  916</span>  <span class="comment">// Restore edge attributes</span></div>
<div class="line"><span class="lineno">  917</span>  <span class="keywordflow">for</span> (i = 0; i &lt; m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a14c308ca63e367045d7f0ff76ef9e575">m_notOpposites</a>.size(); ++i)</div>
<div class="line"><span class="lineno">  918</span>    m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a14c308ca63e367045d7f0ff76ef9e575">m_notOpposites</a>[i]-&gt;clearAttribute(ContourEdge::NOT_OPPOSITE);</div>
<div class="line"><span class="lineno">  919</span>}</div>
<div class="ttc" id="aclass_contour_node_html_a14c308ca63e367045d7f0ff76ef9e575"><div class="ttname"><a href="class_contour_node.html#a14c308ca63e367045d7f0ff76ef9e575">ContourNode::m_notOpposites</a></div><div class="ttdeci">std::vector&lt; ContourEdge * &gt; m_notOpposites</div><div class="ttdef"><b>Definition:</b> tcenterlinevectP.h:295</div></div>
<div class="ttc" id="aclass_contour_node_html_a6c6887bbb84d6d8062fbeddde04a5882"><div class="ttname"><a href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">ContourNode::m_ancestorContour</a></div><div class="ttdeci">unsigned int m_ancestorContour</div><div class="ttdef"><b>Definition:</b> tcenterlinevectP.h:293</div></div>
<div class="ttc" id="aclass_contour_node_html_a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb"><div class="ttname"><a href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a></div><div class="ttdeci">@ HEAD</div><div class="ttdoc">Node is the 'first' of a nodes ring.</div><div class="ttdef"><b>Definition:</b> tcenterlinevectP.h:269</div></div>
<div class="ttc" id="aclass_contour_node_html_aaa9b7bea9e4ec0064e8b740bcad37b1b"><div class="ttname"><a href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">ContourNode::m_edge</a></div><div class="ttdeci">ContourEdge * m_edge</div><div class="ttdef"><b>Definition:</b> tcenterlinevectP.h:300</div></div>
<div class="ttc" id="aclass_index_table_html"><div class="ttname"><a href="class_index_table.html">IndexTable</a></div><div class="ttdef"><b>Definition:</b> tcenterlineskeletonizer.cpp:107</div></div>
<div class="ttc" id="aclass_index_table_html_ae5ad9fe1aa08464501459f1739d815cc"><div class="ttname"><a href="class_index_table.html#ae5ad9fe1aa08464501459f1739d815cc">IndexTable::m_columns</a></div><div class="ttdeci">std::vector&lt; IndexColumn &gt; m_columns</div><div class="ttdoc">Contours set by 'column identifier'.</div><div class="ttdef"><b>Definition:</b> tcenterlineskeletonizer.cpp:112</div></div>
<div class="ttc" id="aclass_index_table_html_ae787501a8b7b54425762e7e6aefdd74a"><div class="ttname"><a href="class_index_table.html#ae787501a8b7b54425762e7e6aefdd74a">IndexTable::m_identifiers</a></div><div class="ttdeci">std::vector&lt; int &gt; m_identifiers</div><div class="ttdoc">Column identifiers by original contour index.</div><div class="ttdef"><b>Definition:</b> tcenterlineskeletonizer.cpp:114</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4a3ecd1738a86cd57a74c82a0f4106fd" name="a4a3ecd1738a86cd57a74c82a0f4106fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a3ecd1738a86cd57a74c82a0f4106fd">&#9670;&nbsp;</a></span>process()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Event::process </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1112</span>                           {</div>
<div class="line"><span class="lineno"> 1113</span>  <a class="code hl_class" href="class_timeline.html">Timeline</a> &amp;timeline           = m_context-&gt;m_timeline;</div>
<div class="line"><span class="lineno"> 1114</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp;algoritmicTime = m_context-&gt;m_algoritmicTime;</div>
<div class="line"><span class="lineno"> 1115</span> </div>
<div class="line"><span class="lineno"> 1116</span>  <span class="keywordflow">if</span> (!m_generator-&gt;hasAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>)) {</div>
<div class="line"><span class="lineno"> 1117</span>    <span class="keywordflow">switch</span> (m_type) {</div>
<div class="line"><span class="lineno"> 1118</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a7ad1738a3a40a0d489e1b356c9a42afa">special</a>:</div>
<div class="line"><span class="lineno"> 1119</span>      assert(!m_coGenerator-&gt;hasAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>));</div>
<div class="line"><span class="lineno"> 1120</span> </div>
<div class="line"><span class="lineno"> 1121</span>      <span class="keywordflow">if</span> (m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>-&gt;hasAttribute(</div>
<div class="line"><span class="lineno"> 1122</span>              <a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>) ||  <span class="comment">// These two are most probably</span></div>
<div class="line"><span class="lineno"> 1123</span>                                           <span class="comment">// useless - could</span></div>
<div class="line"><span class="lineno"> 1124</span>          m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;hasAttribute(</div>
<div class="line"><span class="lineno"> 1125</span>              <a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>) ||  <span class="comment">// try to remove them once I&#39;m in for</span></div>
<div class="line"><span class="lineno"> 1126</span>                                           <span class="comment">// some testing...</span></div>
<div class="line"><span class="lineno"> 1127</span>          m_algoritmicTime &lt; m_coGenerator-&gt;m_prev-&gt;m_updateTime ||</div>
<div class="line"><span class="lineno"> 1128</span>          m_algoritmicTime &lt; m_coGenerator-&gt;m_next-&gt;m_updateTime) {</div>
<div class="line"><span class="lineno"> 1129</span>        <span class="comment">// recalculate event</span></div>
<div class="line"><span class="lineno"> 1130</span>        <a class="code hl_class" href="class_event.html">Event</a> newEvent(m_generator, m_context);</div>
<div class="line"><span class="lineno"> 1131</span>        <span class="keywordflow">if</span> (newEvent.m_type != failure) timeline.push(newEvent);</div>
<div class="line"><span class="lineno"> 1132</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1133</span>      }</div>
<div class="line"><span class="lineno"> 1134</span> </div>
<div class="line"><span class="lineno"> 1135</span>      <span class="comment">// else allow processing</span></div>
<div class="line"><span class="lineno"> 1136</span>      algoritmicTime++;</div>
<div class="line"><span class="lineno"> 1137</span>      processSpecialEvent();</div>
<div class="line"><span class="lineno"> 1138</span> </div>
<div class="line"><span class="lineno"> 1139</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1140</span> </div>
<div class="line"><span class="lineno"> 1141</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a79f281ada0933ebcb72973baa65084e0">edge</a>:</div>
<div class="line"><span class="lineno"> 1142</span>      <span class="keywordflow">if</span> (m_coGenerator-&gt;hasAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>) ||</div>
<div class="line"><span class="lineno"> 1143</span>          m_algoritmicTime &lt; m_coGenerator-&gt;m_next-&gt;m_updateTime) {</div>
<div class="line"><span class="lineno"> 1144</span>        <span class="comment">// recalculate event</span></div>
<div class="line"><span class="lineno"> 1145</span>        <a class="code hl_class" href="class_event.html">Event</a> newEvent(m_generator, m_context);</div>
<div class="line"><span class="lineno"> 1146</span>        <span class="keywordflow">if</span> (newEvent.m_type != failure) timeline.push(newEvent);</div>
<div class="line"><span class="lineno"> 1147</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1148</span>      }</div>
<div class="line"><span class="lineno"> 1149</span> </div>
<div class="line"><span class="lineno"> 1150</span>      <span class="comment">// Deal with edge superposition cases *only* when m_generator has the</span></div>
<div class="line"><span class="lineno"> 1151</span>      <span class="comment">// m_direction.z == 0.0</span></div>
<div class="line"><span class="lineno"> 1152</span>      <span class="keywordflow">if</span> ((m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>.z == 0.0 &amp;&amp;</div>
<div class="line"><span class="lineno"> 1153</span>           m_coGenerator != m_generator) ||</div>
<div class="line"><span class="lineno"> 1154</span>          (m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>.z == 0.0 &amp;&amp;</div>
<div class="line"><span class="lineno"> 1155</span>           m_coGenerator == m_generator))</div>
<div class="line"><span class="lineno"> 1156</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1157</span> </div>
<div class="line"><span class="lineno"> 1158</span>      <span class="comment">// else allow processing</span></div>
<div class="line"><span class="lineno"> 1159</span>      algoritmicTime++;  <span class="comment">// global</span></div>
<div class="line"><span class="lineno"> 1160</span>      <span class="keywordflow">if</span> (m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a> == m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>)</div>
<div class="line"><span class="lineno"> 1161</span>        processMaxEvent();</div>
<div class="line"><span class="lineno"> 1162</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1163</span>        processEdgeEvent();</div>
<div class="line"><span class="lineno"> 1164</span> </div>
<div class="line"><span class="lineno"> 1165</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1166</span> </div>
<div class="line"><span class="lineno"> 1167</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a7342b521191201997425f7da42bbfc63">vertex</a>:</div>
<div class="line"><span class="lineno"> 1168</span>      <span class="keywordflow">if</span> (m_coGenerator-&gt;hasAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>)) {</div>
<div class="line"><span class="lineno"> 1169</span>        <span class="comment">// recalculate event</span></div>
<div class="line"><span class="lineno"> 1170</span>        <a class="code hl_class" href="class_event.html">Event</a> newEvent(m_generator, m_context);</div>
<div class="line"><span class="lineno"> 1171</span>        <span class="keywordflow">if</span> (newEvent.m_type != failure) timeline.push(newEvent);</div>
<div class="line"><span class="lineno"> 1172</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1173</span>      }</div>
<div class="line"><span class="lineno"> 1174</span> </div>
<div class="line"><span class="lineno"> 1175</span>      <span class="comment">// Unlike the split case, we don&#39;t need to rebuild if</span></div>
<div class="line"><span class="lineno"> 1176</span>      <span class="comment">// the event is not up to date with m_coGenerator - since</span></div>
<div class="line"><span class="lineno"> 1177</span>      <span class="comment">// the event is not about splitting an edge</span></div>
<div class="line"><span class="lineno"> 1178</span> </div>
<div class="line"><span class="lineno"> 1179</span>      <span class="keywordflow">if</span> (m_coGenerator ==</div>
<div class="line"><span class="lineno"> 1180</span>              m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a></div>
<div class="line"><span class="lineno"> 1181</span>                  -&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>  <span class="comment">// CAN devolve to a special event - which should</span></div>
<div class="line"><span class="lineno"> 1182</span>          ||</div>
<div class="line"><span class="lineno"> 1183</span>          m_coGenerator ==</div>
<div class="line"><span class="lineno"> 1184</span>              m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a></div>
<div class="line"><span class="lineno"> 1185</span>                  -&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>)  <span class="comment">// already be present in the timeline</span></div>
<div class="line"><span class="lineno"> 1186</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1187</span> </div>
<div class="line"><span class="lineno"> 1188</span>      <span class="comment">// then, process it</span></div>
<div class="line"><span class="lineno"> 1189</span>      algoritmicTime++;</div>
<div class="line"><span class="lineno"> 1190</span>      processVertexEvent();</div>
<div class="line"><span class="lineno"> 1191</span> </div>
<div class="line"><span class="lineno"> 1192</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1193</span> </div>
<div class="line"><span class="lineno"> 1194</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a29519734363d4a5a64fdf77c4a22268a">split_regenerate</a>:</div>
<div class="line"><span class="lineno"> 1195</span>      <span class="keywordflow">if</span> (m_coGenerator-&gt;hasAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>) ||</div>
<div class="line"><span class="lineno"> 1196</span>          (m_algoritmicTime &lt; m_coGenerator-&gt;m_next-&gt;m_updateTime)) {</div>
<div class="line"><span class="lineno"> 1197</span>        <span class="comment">// recalculate event</span></div>
<div class="line"><span class="lineno"> 1198</span>        <a class="code hl_class" href="class_event.html">Event</a> newEvent(m_generator, m_context);</div>
<div class="line"><span class="lineno"> 1199</span>        <span class="keywordflow">if</span> (newEvent.m_type != failure) timeline.push(newEvent);</div>
<div class="line"><span class="lineno"> 1200</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1201</span>      }</div>
<div class="line"><span class="lineno"> 1202</span> </div>
<div class="line"><span class="lineno"> 1203</span>    <span class="comment">// This may actually happen on current implementation, due to quirky event</span></div>
<div class="line"><span class="lineno"> 1204</span>    <span class="comment">// generation and preferential events rejection. See function tryRay..()</span></div>
<div class="line"><span class="lineno"> 1205</span>    <span class="comment">// around the end. Historically resolved to a split event, so we maintain</span></div>
<div class="line"><span class="lineno"> 1206</span>    <span class="comment">// that.</span></div>
<div class="line"><span class="lineno"> 1207</span> </div>
<div class="line"><span class="lineno"> 1208</span>    <span class="comment">// assert(false);</span></div>
<div class="line"><span class="lineno"> 1209</span> </div>
<div class="line"><span class="lineno"> 1210</span>    <span class="comment">/* fallthrough */</span></div>
<div class="line"><span class="lineno"> 1211</span> </div>
<div class="line"><span class="lineno"> 1212</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a9d37ce59e247639e42f47a451da5a428">split</a>:  <span class="comment">// No break is intended</span></div>
<div class="line"><span class="lineno"> 1213</span>      <span class="keywordflow">if</span> (m_coGenerator-&gt;hasAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>) ||</div>
<div class="line"><span class="lineno"> 1214</span>          (m_algoritmicTime &lt; m_coGenerator-&gt;m_next-&gt;m_updateTime)) {</div>
<div class="line"><span class="lineno"> 1215</span>        <span class="comment">// recalculate event</span></div>
<div class="line"><span class="lineno"> 1216</span>        <a class="code hl_class" href="class_event.html">Event</a> newEvent(m_generator, m_context);</div>
<div class="line"><span class="lineno"> 1217</span>        <span class="keywordflow">if</span> (newEvent.m_type != failure) timeline.push(newEvent);</div>
<div class="line"><span class="lineno"> 1218</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1219</span>      }</div>
<div class="line"><span class="lineno"> 1220</span> </div>
<div class="line"><span class="lineno"> 1221</span>      <span class="comment">// else allow processing (but check these conditions)</span></div>
<div class="line"><span class="lineno"> 1222</span>      <span class="keywordflow">if</span> (m_coGenerator != m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 1223</span>          m_coGenerator !=</div>
<div class="line"><span class="lineno"> 1224</span>              m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a></div>
<div class="line"><span class="lineno"> 1225</span>                  -&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>)  <span class="comment">// Because another edge already occurs at his place</span></div>
<div class="line"><span class="lineno"> 1226</span>      {</div>
<div class="line"><span class="lineno"> 1227</span>        algoritmicTime++;</div>
<div class="line"><span class="lineno"> 1228</span>        processSplitEvent();</div>
<div class="line"><span class="lineno"> 1229</span>      }</div>
<div class="line"><span class="lineno"> 1230</span> </div>
<div class="line"><span class="lineno"> 1231</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1232</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1233</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1234</span>    }</div>
<div class="line"><span class="lineno"> 1235</span>  }</div>
<div class="line"><span class="lineno"> 1236</span> </div>
<div class="line"><span class="lineno"> 1237</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// Processing succeeded</span></div>
<div class="line"><span class="lineno"> 1238</span>}</div>
<div class="ttc" id="aclass_contour_node_html_a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9"><div class="ttname"><a href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a></div><div class="ttdeci">@ ELIMINATED</div><div class="ttdoc">Node was eliminated by the SS process.</div><div class="ttdef"><b>Definition:</b> tcenterlinevectP.h:270</div></div>
<div class="ttc" id="aclass_event_html"><div class="ttname"><a href="class_event.html">Event</a></div><div class="ttdef"><b>Definition:</b> tcenterlineskeletonizer.cpp:138</div></div>
<div class="ttc" id="aclass_timeline_html"><div class="ttname"><a href="class_timeline.html">Timeline</a></div><div class="ttdef"><b>Definition:</b> tcenterlineskeletonizer.cpp:198</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6d5d0b2d1fd642475589ea08c9ba895" name="ac6d5d0b2d1fd642475589ea08c9ba895"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6d5d0b2d1fd642475589ea08c9ba895">&#9670;&nbsp;</a></span>processEdgeEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Event::processEdgeEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1252</span>                                    {</div>
<div class="line"><span class="lineno"> 1253</span>  <a class="code hl_class" href="class_contour_node.html">ContourNode</a> *newNode;</div>
<div class="line"><span class="lineno"> 1254</span>  <a class="code hl_class" href="class_t3_d_point_t.html">T3DPointD</a> position(m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a> +</div>
<div class="line"><span class="lineno"> 1255</span>                     m_displacement * m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>);</div>
<div class="line"><span class="lineno"> 1256</span> </div>
<div class="line"><span class="lineno"> 1257</span>  <span class="comment">// Eliminate and unlink extremities of m_coGenerator&#39;s edge</span></div>
<div class="line"><span class="lineno"> 1258</span>  m_coGenerator-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>);</div>
<div class="line"><span class="lineno"> 1259</span>  m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>);</div>
<div class="line"><span class="lineno"> 1260</span> </div>
<div class="line"><span class="lineno"> 1261</span>  <span class="comment">// Then, take a node from heap and insert it at their place.</span></div>
<div class="line"><span class="lineno"> 1262</span>  newNode             = m_context-&gt;getNode();</div>
<div class="line"><span class="lineno"> 1263</span>  newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a> = position;</div>
<div class="line"><span class="lineno"> 1264</span> </div>
<div class="line"><span class="lineno"> 1265</span>  newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>                       = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>;</div>
<div class="line"><span class="lineno"> 1266</span>  m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a> = newNode;</div>
<div class="line"><span class="lineno"> 1267</span> </div>
<div class="line"><span class="lineno"> 1268</span>  newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>               = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>;</div>
<div class="line"><span class="lineno"> 1269</span>  m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a> = newNode;</div>
<div class="line"><span class="lineno"> 1270</span> </div>
<div class="line"><span class="lineno"> 1271</span>  <span class="comment">// Then, initialize new node (however, 3rd component is m_height...)</span></div>
<div class="line"><span class="lineno"> 1272</span>  newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a> =</div>
<div class="line"><span class="lineno"> 1273</span>      m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a> + m_displacement * m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>;</div>
<div class="line"><span class="lineno"> 1274</span>  newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a> = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a>;</div>
<div class="line"><span class="lineno"> 1275</span> </div>
<div class="line"><span class="lineno"> 1276</span>  newNode-&gt;buildNodeInfos(1);  <span class="comment">// 1 =&gt; Force convex node</span></div>
<div class="line"><span class="lineno"> 1277</span> </div>
<div class="line"><span class="lineno"> 1278</span>  newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a2e86dc6e196ffd3ff3fc98f09047caf5">m_ancestor</a>        = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a2e86dc6e196ffd3ff3fc98f09047caf5">m_ancestor</a>;</div>
<div class="line"><span class="lineno"> 1279</span>  newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a> = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>;</div>
<div class="line"><span class="lineno"> 1280</span>  newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a6e2399be686ff186ce6e2aa1f001f8c4">m_updateTime</a>      = m_context-&gt;m_algoritmicTime;</div>
<div class="line"><span class="lineno"> 1281</span> </div>
<div class="line"><span class="lineno"> 1282</span>  <span class="comment">// We allocate an output vertex on newNode&#39;s position under these conditions</span></div>
<div class="line"><span class="lineno"> 1283</span>  <span class="comment">// NOTE: Update once graph_old is replaced</span></div>
<div class="line"><span class="lineno"> 1284</span>  <span class="keywordflow">if</span> (newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>.z &lt; 0.7 ||</div>
<div class="line"><span class="lineno"> 1285</span>      m_coGenerator-&gt;hasAttribute(ContourNode::SK_NODE_DROPPED) ||</div>
<div class="line"><span class="lineno"> 1286</span>      m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;hasAttribute(ContourNode::SK_NODE_DROPPED)) {</div>
<div class="line"><span class="lineno"> 1287</span>    newNode-&gt;setAttribute(ContourNode::SK_NODE_DROPPED);</div>
<div class="line"><span class="lineno"> 1288</span>    newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aedb2bc3a508f9abd678aa94e82139c8b">m_outputNode</a> = m_context-&gt;m_output-&gt;newNode(position);</div>
<div class="line"><span class="lineno"> 1289</span>    m_context-&gt;newSkeletonLink(newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aedb2bc3a508f9abd678aa94e82139c8b">m_outputNode</a>, m_coGenerator);</div>
<div class="line"><span class="lineno"> 1290</span>    m_context-&gt;newSkeletonLink(newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aedb2bc3a508f9abd678aa94e82139c8b">m_outputNode</a>, m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>);</div>
<div class="line"><span class="lineno"> 1291</span>  }</div>
<div class="line"><span class="lineno"> 1292</span> </div>
<div class="line"><span class="lineno"> 1293</span>  <span class="comment">// If m_coGenerator or its m_next is HEAD of this contour, then</span></div>
<div class="line"><span class="lineno"> 1294</span>  <span class="comment">// redefine newNode as the new head.</span></div>
<div class="line"><span class="lineno"> 1295</span>  <span class="keywordflow">if</span> (m_coGenerator-&gt;hasAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>) ||</div>
<div class="line"><span class="lineno"> 1296</span>      m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;hasAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>)) {</div>
<div class="line"><span class="lineno"> 1297</span>    std::list&lt;ContourNode *&gt;::iterator it;</div>
<div class="line"><span class="lineno"> 1298</span>    std::list&lt;ContourNode *&gt; &amp;column =</div>
<div class="line"><span class="lineno"> 1299</span>        m_context-&gt;m_activeTable.columnOfId(m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>);</div>
<div class="line"><span class="lineno"> 1300</span> </div>
<div class="line"><span class="lineno"> 1301</span>    <span class="keywordflow">for</span> (it = column.begin(); !(*it)-&gt;hasAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>);</div>
<div class="line"><span class="lineno"> 1302</span>         ++it)</div>
<div class="line"><span class="lineno"> 1303</span>      ;</div>
<div class="line"><span class="lineno"> 1304</span> </div>
<div class="line"><span class="lineno"> 1305</span>    <span class="comment">// assert(*it == m_coGenerator || *it == m_coGenerator-&gt;m_next);</span></div>
<div class="line"><span class="lineno"> 1306</span> </div>
<div class="line"><span class="lineno"> 1307</span>    *it = newNode, newNode-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>);</div>
<div class="line"><span class="lineno"> 1308</span>  }</div>
<div class="line"><span class="lineno"> 1309</span> </div>
<div class="line"><span class="lineno"> 1310</span>  <span class="comment">// Finally, calculate the Event raising by newNode</span></div>
<div class="line"><span class="lineno"> 1311</span>  <a class="code hl_class" href="class_event.html">Event</a> newEvent(newNode, m_context);</div>
<div class="line"><span class="lineno"> 1312</span>  <span class="keywordflow">if</span> (newEvent.m_type != Event::failure) m_context-&gt;m_timeline.push(newEvent);</div>
<div class="line"><span class="lineno"> 1313</span>}</div>
<div class="ttc" id="aclass_contour_node_html_a2e86dc6e196ffd3ff3fc98f09047caf5"><div class="ttname"><a href="class_contour_node.html#a2e86dc6e196ffd3ff3fc98f09047caf5">ContourNode::m_ancestor</a></div><div class="ttdeci">unsigned int m_ancestor</div><div class="ttdoc">Index of the original node from which this one evolved.</div><div class="ttdef"><b>Definition:</b> tcenterlinevectP.h:292</div></div>
<div class="ttc" id="aclass_contour_node_html_a6e2399be686ff186ce6e2aa1f001f8c4"><div class="ttname"><a href="class_contour_node.html#a6e2399be686ff186ce6e2aa1f001f8c4">ContourNode::m_updateTime</a></div><div class="ttdeci">unsigned int m_updateTime</div><div class="ttdoc">Algorithmic time in which the node was updated.</div><div class="ttdef"><b>Definition:</b> tcenterlinevectP.h:291</div></div>
<div class="ttc" id="aclass_contour_node_html_aedb2bc3a508f9abd678aa94e82139c8b"><div class="ttname"><a href="class_contour_node.html#aedb2bc3a508f9abd678aa94e82139c8b">ContourNode::m_outputNode</a></div><div class="ttdeci">int m_outputNode</div><div class="ttdoc">Skeleton node produced by this ContourNode.</div><div class="ttdef"><b>Definition:</b> tcenterlinevectP.h:297</div></div>
<div class="ttc" id="aclass_t3_d_point_t_html"><div class="ttname"><a href="class_t3_d_point_t.html">T3DPointT&lt; double &gt;</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a46e9058fb54959eed3d29b690507a1f9" name="a46e9058fb54959eed3d29b690507a1f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46e9058fb54959eed3d29b690507a1f9">&#9670;&nbsp;</a></span>processMaxEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Event::processMaxEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1319</span>                                   {</div>
<div class="line"><span class="lineno"> 1320</span>  <a class="code hl_class" href="class_t3_d_point_t.html">T3DPointD</a> position(m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a> +</div>
<div class="line"><span class="lineno"> 1321</span>                     m_displacement * m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>);</div>
<div class="line"><span class="lineno"> 1322</span> </div>
<div class="line"><span class="lineno"> 1323</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> outputNode = m_context-&gt;m_output-&gt;newNode(position);</div>
<div class="line"><span class="lineno"> 1324</span> </div>
<div class="line"><span class="lineno"> 1325</span>  m_context-&gt;newSkeletonLink(outputNode, m_generator);</div>
<div class="line"><span class="lineno"> 1326</span>  m_context-&gt;newSkeletonLink(outputNode, m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>);</div>
<div class="line"><span class="lineno"> 1327</span>  m_context-&gt;newSkeletonLink(outputNode, m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>);</div>
<div class="line"><span class="lineno"> 1328</span> </div>
<div class="line"><span class="lineno"> 1329</span>  <span class="comment">// Then remove active contour and eliminate nodes</span></div>
<div class="line"><span class="lineno"> 1330</span>  std::list&lt;ContourNode *&gt;::iterator eventVertexIndex =</div>
<div class="line"><span class="lineno"> 1331</span>      m_context-&gt;m_activeTable.find(m_generator);</div>
<div class="line"><span class="lineno"> 1332</span> </div>
<div class="line"><span class="lineno"> 1333</span>  m_context-&gt;m_activeTable.remove(eventVertexIndex);</div>
<div class="line"><span class="lineno"> 1334</span> </div>
<div class="line"><span class="lineno"> 1335</span>  m_generator-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>);</div>
<div class="line"><span class="lineno"> 1336</span>  m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>);</div>
<div class="line"><span class="lineno"> 1337</span>  m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>);</div>
<div class="line"><span class="lineno"> 1338</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a34f51130fb0ea63029c7e0feadecfa40" name="a34f51130fb0ea63029c7e0feadecfa40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34f51130fb0ea63029c7e0feadecfa40">&#9670;&nbsp;</a></span>processSpecialEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Event::processSpecialEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1592</span>                                       {</div>
<div class="line"><span class="lineno"> 1593</span>  <a class="code hl_class" href="class_contour_node.html">ContourNode</a> *newNode;</div>
<div class="line"><span class="lineno"> 1594</span>  <a class="code hl_class" href="class_t3_d_point_t.html">T3DPointD</a> position(m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a> +</div>
<div class="line"><span class="lineno"> 1595</span>                     m_displacement * m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>);</div>
<div class="line"><span class="lineno"> 1596</span> </div>
<div class="line"><span class="lineno"> 1597</span>  m_coGenerator-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>);</div>
<div class="line"><span class="lineno"> 1598</span>  m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>);</div>
<div class="line"><span class="lineno"> 1599</span>  m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>);</div>
<div class="line"><span class="lineno"> 1600</span> </div>
<div class="line"><span class="lineno"> 1601</span>  <span class="comment">// Get and link newNode to the rest of this contour</span></div>
<div class="line"><span class="lineno"> 1602</span>  newNode             = m_context-&gt;getNode();</div>
<div class="line"><span class="lineno"> 1603</span>  newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a> = position;</div>
<div class="line"><span class="lineno"> 1604</span> </div>
<div class="line"><span class="lineno"> 1605</span>  m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a> = newNode;</div>
<div class="line"><span class="lineno"> 1606</span>  newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>                       = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>;</div>
<div class="line"><span class="lineno"> 1607</span> </div>
<div class="line"><span class="lineno"> 1608</span>  m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a> = newNode;</div>
<div class="line"><span class="lineno"> 1609</span>  newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>                       = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>;</div>
<div class="line"><span class="lineno"> 1610</span> </div>
<div class="line"><span class="lineno"> 1611</span>  <span class="comment">// Then, initialize newNode infos</span></div>
<div class="line"><span class="lineno"> 1612</span>  newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a> = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a>;</div>
<div class="line"><span class="lineno"> 1613</span> </div>
<div class="line"><span class="lineno"> 1614</span>  newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a2e86dc6e196ffd3ff3fc98f09047caf5">m_ancestor</a>        = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a2e86dc6e196ffd3ff3fc98f09047caf5">m_ancestor</a>;</div>
<div class="line"><span class="lineno"> 1615</span>  newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a> = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>;</div>
<div class="line"><span class="lineno"> 1616</span> </div>
<div class="line"><span class="lineno"> 1617</span>  <span class="comment">// Neither this case can be forced convex</span></div>
<div class="line"><span class="lineno"> 1618</span>  newNode-&gt;buildNodeInfos();</div>
<div class="line"><span class="lineno"> 1619</span>  newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a6e2399be686ff186ce6e2aa1f001f8c4">m_updateTime</a> = m_context-&gt;m_algoritmicTime;</div>
<div class="line"><span class="lineno"> 1620</span> </div>
<div class="line"><span class="lineno"> 1621</span>  <span class="comment">// Now build output</span></div>
<div class="line"><span class="lineno"> 1622</span>  newNode-&gt;setAttribute(ContourNode::SK_NODE_DROPPED);</div>
<div class="line"><span class="lineno"> 1623</span>  newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aedb2bc3a508f9abd678aa94e82139c8b">m_outputNode</a> = m_context-&gt;m_output-&gt;newNode(position);</div>
<div class="line"><span class="lineno"> 1624</span>  m_context-&gt;newSkeletonLink(newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aedb2bc3a508f9abd678aa94e82139c8b">m_outputNode</a>, m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>);</div>
<div class="line"><span class="lineno"> 1625</span>  m_context-&gt;newSkeletonLink(newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aedb2bc3a508f9abd678aa94e82139c8b">m_outputNode</a>, m_coGenerator);</div>
<div class="line"><span class="lineno"> 1626</span>  m_context-&gt;newSkeletonLink(newNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aedb2bc3a508f9abd678aa94e82139c8b">m_outputNode</a>, m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>);</div>
<div class="line"><span class="lineno"> 1627</span> </div>
<div class="line"><span class="lineno"> 1628</span>  <span class="comment">// If m_coGenerator or one of his adjacents is HEAD of this contour, then</span></div>
<div class="line"><span class="lineno"> 1629</span>  <span class="comment">// redefine newNode as the new head.</span></div>
<div class="line"><span class="lineno"> 1630</span>  <span class="keywordflow">if</span> (m_coGenerator-&gt;hasAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>) ||</div>
<div class="line"><span class="lineno"> 1631</span>      m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;hasAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>) ||</div>
<div class="line"><span class="lineno"> 1632</span>      m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>-&gt;hasAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>)) {</div>
<div class="line"><span class="lineno"> 1633</span>    std::list&lt;ContourNode *&gt;::iterator it;</div>
<div class="line"><span class="lineno"> 1634</span>    std::list&lt;ContourNode *&gt; &amp;column =</div>
<div class="line"><span class="lineno"> 1635</span>        m_context-&gt;m_activeTable.columnOfId(m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>);</div>
<div class="line"><span class="lineno"> 1636</span> </div>
<div class="line"><span class="lineno"> 1637</span>    <span class="keywordflow">for</span> (it = column.begin(); !(*it)-&gt;hasAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>);</div>
<div class="line"><span class="lineno"> 1638</span>         ++it)</div>
<div class="line"><span class="lineno"> 1639</span>      ;</div>
<div class="line"><span class="lineno"> 1640</span> </div>
<div class="line"><span class="lineno"> 1641</span>    <span class="comment">// assert(*it == m_coGenerator || *it == m_coGenerator-&gt;m_next || *it ==</span></div>
<div class="line"><span class="lineno"> 1642</span>    <span class="comment">// m_coGenerator-&gt;m_prev);</span></div>
<div class="line"><span class="lineno"> 1643</span> </div>
<div class="line"><span class="lineno"> 1644</span>    *it = newNode, newNode-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>);</div>
<div class="line"><span class="lineno"> 1645</span>  }</div>
<div class="line"><span class="lineno"> 1646</span> </div>
<div class="line"><span class="lineno"> 1647</span>  <span class="comment">// Finally, calculate the Event raising by newNode</span></div>
<div class="line"><span class="lineno"> 1648</span>  <a class="code hl_class" href="class_event.html">Event</a> newEvent(newNode, m_context);</div>
<div class="line"><span class="lineno"> 1649</span>  <span class="keywordflow">if</span> (newEvent.m_type != Event::failure) m_context-&gt;m_timeline.push(newEvent);</div>
<div class="line"><span class="lineno"> 1650</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af4696f065e96ac3de881594c83085b87" name="af4696f065e96ac3de881594c83085b87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4696f065e96ac3de881594c83085b87">&#9670;&nbsp;</a></span>processSplitEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Event::processSplitEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1352</span>                                     {</div>
<div class="line"><span class="lineno"> 1353</span>  <a class="code hl_class" href="class_contour_node.html">ContourNode</a> *newLeftNode,</div>
<div class="line"><span class="lineno"> 1354</span>      *newRightNode;  <span class="comment">// left-right in the sense of the picture</span></div>
<div class="line"><span class="lineno"> 1355</span>  <a class="code hl_class" href="class_t3_d_point_t.html">T3DPointD</a> position(m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a> +</div>
<div class="line"><span class="lineno"> 1356</span>                     m_displacement * m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>);</div>
<div class="line"><span class="lineno"> 1357</span>  <a class="code hl_class" href="class_index_table.html">IndexTable</a> &amp;activeTable      = m_context-&gt;m_activeTable;</div>
<div class="line"><span class="lineno"> 1358</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp;algoritmicTime = m_context-&gt;m_algoritmicTime;</div>
<div class="line"><span class="lineno"> 1359</span> </div>
<div class="line"><span class="lineno"> 1360</span>  <span class="comment">// First, we find in the Index Table the contours involved</span></div>
<div class="line"><span class="lineno"> 1361</span>  std::list&lt;ContourNode *&gt;::iterator genContour, coGenContour;</div>
<div class="line"><span class="lineno"> 1362</span>  genContour = activeTable.find(m_generator);</div>
<div class="line"><span class="lineno"> 1363</span> </div>
<div class="line"><span class="lineno"> 1364</span>  <span class="keywordflow">if</span> (activeTable.<a class="code hl_variable" href="class_index_table.html#ae787501a8b7b54425762e7e6aefdd74a">m_identifiers</a>[m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>] !=</div>
<div class="line"><span class="lineno"> 1365</span>      activeTable.<a class="code hl_variable" href="class_index_table.html#ae787501a8b7b54425762e7e6aefdd74a">m_identifiers</a>[m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>]) {</div>
<div class="line"><span class="lineno"> 1366</span>    <span class="comment">// We have two different contours, that merge in one</span></div>
<div class="line"><span class="lineno"> 1367</span>    coGenContour = activeTable.find(m_coGenerator);</div>
<div class="line"><span class="lineno"> 1368</span>  }</div>
<div class="line"><span class="lineno"> 1369</span> </div>
<div class="line"><span class="lineno"> 1370</span>  <span class="comment">// Now, update known nodes</span></div>
<div class="line"><span class="lineno"> 1371</span>  m_generator-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>);</div>
<div class="line"><span class="lineno"> 1372</span> </div>
<div class="line"><span class="lineno"> 1373</span>  <span class="comment">// Allocate 2 new nodes and link the following way:</span></div>
<div class="line"><span class="lineno"> 1374</span>  newLeftNode             = m_context-&gt;getNode();</div>
<div class="line"><span class="lineno"> 1375</span>  newRightNode            = m_context-&gt;getNode();</div>
<div class="line"><span class="lineno"> 1376</span>  newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a> = newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a> = position;</div>
<div class="line"><span class="lineno"> 1377</span> </div>
<div class="line"><span class="lineno"> 1378</span>  <span class="comment">// On the right side</span></div>
<div class="line"><span class="lineno"> 1379</span>  m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a> = newRightNode;</div>
<div class="line"><span class="lineno"> 1380</span>  newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>          = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>;</div>
<div class="line"><span class="lineno"> 1381</span>  m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>   = newRightNode;</div>
<div class="line"><span class="lineno"> 1382</span>  newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>          = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>;</div>
<div class="line"><span class="lineno"> 1383</span> </div>
<div class="line"><span class="lineno"> 1384</span>  <span class="comment">// On the left side</span></div>
<div class="line"><span class="lineno"> 1385</span>  m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>       = newLeftNode;</div>
<div class="line"><span class="lineno"> 1386</span>  newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>         = m_coGenerator;</div>
<div class="line"><span class="lineno"> 1387</span>  m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a> = newLeftNode;</div>
<div class="line"><span class="lineno"> 1388</span>  newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>         = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>;</div>
<div class="line"><span class="lineno"> 1389</span> </div>
<div class="line"><span class="lineno"> 1390</span>  <span class="comment">// Assign and calculate the new nodes&#39; information</span></div>
<div class="line"><span class="lineno"> 1391</span>  newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a>  = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a>;</div>
<div class="line"><span class="lineno"> 1392</span>  newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a> = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a>;</div>
<div class="line"><span class="lineno"> 1393</span> </div>
<div class="line"><span class="lineno"> 1394</span>  newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a2e86dc6e196ffd3ff3fc98f09047caf5">m_ancestor</a>         = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a2e86dc6e196ffd3ff3fc98f09047caf5">m_ancestor</a>;</div>
<div class="line"><span class="lineno"> 1395</span>  newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>  = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>;</div>
<div class="line"><span class="lineno"> 1396</span>  newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a2e86dc6e196ffd3ff3fc98f09047caf5">m_ancestor</a>        = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a2e86dc6e196ffd3ff3fc98f09047caf5">m_ancestor</a>;</div>
<div class="line"><span class="lineno"> 1397</span>  newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a> = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>;</div>
<div class="line"><span class="lineno"> 1398</span> </div>
<div class="line"><span class="lineno"> 1399</span>  <span class="comment">// We can force the new nodes to be convex</span></div>
<div class="line"><span class="lineno"> 1400</span>  newLeftNode-&gt;buildNodeInfos(1);</div>
<div class="line"><span class="lineno"> 1401</span>  newRightNode-&gt;buildNodeInfos(1);</div>
<div class="line"><span class="lineno"> 1402</span> </div>
<div class="line"><span class="lineno"> 1403</span>  newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a6e2399be686ff186ce6e2aa1f001f8c4">m_updateTime</a> = newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a6e2399be686ff186ce6e2aa1f001f8c4">m_updateTime</a> = algoritmicTime;</div>
<div class="line"><span class="lineno"> 1404</span> </div>
<div class="line"><span class="lineno"> 1405</span>  <span class="comment">// Now, output the found interaction</span></div>
<div class="line"><span class="lineno"> 1406</span>  newLeftNode-&gt;setAttribute(ContourNode::SK_NODE_DROPPED);</div>
<div class="line"><span class="lineno"> 1407</span>  newRightNode-&gt;setAttribute(ContourNode::SK_NODE_DROPPED);</div>
<div class="line"><span class="lineno"> 1408</span>  newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aedb2bc3a508f9abd678aa94e82139c8b">m_outputNode</a>  = m_context-&gt;m_output-&gt;newNode(position);</div>
<div class="line"><span class="lineno"> 1409</span>  newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aedb2bc3a508f9abd678aa94e82139c8b">m_outputNode</a> = newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aedb2bc3a508f9abd678aa94e82139c8b">m_outputNode</a>;</div>
<div class="line"><span class="lineno"> 1410</span>  m_context-&gt;newSkeletonLink(newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aedb2bc3a508f9abd678aa94e82139c8b">m_outputNode</a>, m_generator);</div>
<div class="line"><span class="lineno"> 1411</span> </div>
<div class="line"><span class="lineno"> 1412</span>  <span class="comment">// Update the active Index Table:</span></div>
<div class="line"><span class="lineno"> 1413</span>  <span class="keywordflow">if</span> (activeTable.<a class="code hl_variable" href="class_index_table.html#ae787501a8b7b54425762e7e6aefdd74a">m_identifiers</a>[m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>] !=</div>
<div class="line"><span class="lineno"> 1414</span>      activeTable.<a class="code hl_variable" href="class_index_table.html#ae787501a8b7b54425762e7e6aefdd74a">m_identifiers</a>[m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>]) {</div>
<div class="line"><span class="lineno"> 1415</span>    <span class="comment">// If we have two different contours, they merge in one</span></div>
<div class="line"><span class="lineno"> 1416</span>    <span class="comment">// We keep coGenContour and remove genContour</span></div>
<div class="line"><span class="lineno"> 1417</span>    (*genContour)-&gt;clearAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>);</div>
<div class="line"><span class="lineno"> 1418</span>    activeTable.merge(coGenContour, genContour);</div>
<div class="line"><span class="lineno"> 1419</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1420</span>    <span class="comment">// Else we have only one contour, which splits in two</span></div>
<div class="line"><span class="lineno"> 1421</span>    (*genContour)-&gt;clearAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>);</div>
<div class="line"><span class="lineno"> 1422</span>    *genContour = newLeftNode;</div>
<div class="line"><span class="lineno"> 1423</span> </div>
<div class="line"><span class="lineno"> 1424</span>    newLeftNode-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>);</div>
<div class="line"><span class="lineno"> 1425</span>    newRightNode-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>);</div>
<div class="line"><span class="lineno"> 1426</span> </div>
<div class="line"><span class="lineno"> 1427</span>    activeTable.columnOfId(m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>)</div>
<div class="line"><span class="lineno"> 1428</span>        .push_back(newRightNode);</div>
<div class="line"><span class="lineno"> 1429</span>  }</div>
<div class="line"><span class="lineno"> 1430</span> </div>
<div class="line"><span class="lineno"> 1431</span>  <span class="comment">// (Vertex compatibility): Moving newRightNode a bit on</span></div>
<div class="line"><span class="lineno"> 1432</span>  newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a> += 0.02 * newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>;</div>
<div class="line"><span class="lineno"> 1433</span> </div>
<div class="line"><span class="lineno"> 1434</span>  <span class="comment">// Finally, calculate the new left and right Events</span></div>
<div class="line"><span class="lineno"> 1435</span>  <a class="code hl_class" href="class_event.html">Event</a> newLeftEvent(newLeftNode, m_context);</div>
<div class="line"><span class="lineno"> 1436</span>  <span class="keywordflow">if</span> (newLeftEvent.m_type != Event::failure)</div>
<div class="line"><span class="lineno"> 1437</span>    m_context-&gt;m_timeline.push(newLeftEvent);</div>
<div class="line"><span class="lineno"> 1438</span> </div>
<div class="line"><span class="lineno"> 1439</span>  <a class="code hl_class" href="class_event.html">Event</a> newRightEvent(newRightNode, m_context);</div>
<div class="line"><span class="lineno"> 1440</span>  <span class="keywordflow">if</span> (newRightEvent.m_type != Event::failure)</div>
<div class="line"><span class="lineno"> 1441</span>    m_context-&gt;m_timeline.push(newRightEvent);</div>
<div class="line"><span class="lineno"> 1442</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2358301510ae0ac99df023dcef6f7448" name="a2358301510ae0ac99df023dcef6f7448"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2358301510ae0ac99df023dcef6f7448">&#9670;&nbsp;</a></span>processVertexEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Event::processVertexEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1457</span>                                      {</div>
<div class="line"><span class="lineno"> 1458</span>  <a class="code hl_class" href="class_contour_node.html">ContourNode</a> *newLeftNode,</div>
<div class="line"><span class="lineno"> 1459</span>      *newRightNode;  <span class="comment">// left-right in the sense of the picture</span></div>
<div class="line"><span class="lineno"> 1460</span>  <a class="code hl_class" href="class_t3_d_point_t.html">T3DPointD</a> position(m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a> +</div>
<div class="line"><span class="lineno"> 1461</span>                     m_displacement * m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>);</div>
<div class="line"><span class="lineno"> 1462</span>  <a class="code hl_class" href="class_index_table.html">IndexTable</a> &amp;activeTable      = m_context-&gt;m_activeTable;</div>
<div class="line"><span class="lineno"> 1463</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp;algoritmicTime = m_context-&gt;m_algoritmicTime;</div>
<div class="line"><span class="lineno"> 1464</span> </div>
<div class="line"><span class="lineno"> 1465</span>  <span class="comment">// First, we find in the Index Table the contours involved</span></div>
<div class="line"><span class="lineno"> 1466</span>  std::list&lt;ContourNode *&gt;::iterator genContour, coGenContour;</div>
<div class="line"><span class="lineno"> 1467</span>  genContour = activeTable.find(m_generator);</div>
<div class="line"><span class="lineno"> 1468</span> </div>
<div class="line"><span class="lineno"> 1469</span>  <span class="keywordflow">if</span> (activeTable.<a class="code hl_variable" href="class_index_table.html#ae787501a8b7b54425762e7e6aefdd74a">m_identifiers</a>[m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>] !=</div>
<div class="line"><span class="lineno"> 1470</span>      activeTable.<a class="code hl_variable" href="class_index_table.html#ae787501a8b7b54425762e7e6aefdd74a">m_identifiers</a>[m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>]) {</div>
<div class="line"><span class="lineno"> 1471</span>    <span class="comment">// We have two different contours, that merge in one</span></div>
<div class="line"><span class="lineno"> 1472</span>    coGenContour = activeTable.find(m_coGenerator);</div>
<div class="line"><span class="lineno"> 1473</span>  }</div>
<div class="line"><span class="lineno"> 1474</span> </div>
<div class="line"><span class="lineno"> 1475</span>  <span class="comment">// Now, update known nodes</span></div>
<div class="line"><span class="lineno"> 1476</span>  m_generator-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>);</div>
<div class="line"><span class="lineno"> 1477</span>  m_coGenerator-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93ea063f58d6ee7fc591e634c8de9a0f2bf9">ContourNode::ELIMINATED</a>);</div>
<div class="line"><span class="lineno"> 1478</span> </div>
<div class="line"><span class="lineno"> 1479</span>  <span class="comment">// Allocate 2 new nodes and link the following way:</span></div>
<div class="line"><span class="lineno"> 1480</span>  newLeftNode             = m_context-&gt;getNode();</div>
<div class="line"><span class="lineno"> 1481</span>  newRightNode            = m_context-&gt;getNode();</div>
<div class="line"><span class="lineno"> 1482</span>  newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a> = newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a> = position;</div>
<div class="line"><span class="lineno"> 1483</span> </div>
<div class="line"><span class="lineno"> 1484</span>  <span class="comment">// On the right side</span></div>
<div class="line"><span class="lineno"> 1485</span>  m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a> = newRightNode;</div>
<div class="line"><span class="lineno"> 1486</span>  newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>          = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>;</div>
<div class="line"><span class="lineno"> 1487</span>  m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>   = newRightNode;</div>
<div class="line"><span class="lineno"> 1488</span>  newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>          = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>;</div>
<div class="line"><span class="lineno"> 1489</span> </div>
<div class="line"><span class="lineno"> 1490</span>  <span class="comment">// On the left side</span></div>
<div class="line"><span class="lineno"> 1491</span>  m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a> = newLeftNode;</div>
<div class="line"><span class="lineno"> 1492</span>  newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>           = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>;</div>
<div class="line"><span class="lineno"> 1493</span>  m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>   = newLeftNode;</div>
<div class="line"><span class="lineno"> 1494</span>  newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>           = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>;</div>
<div class="line"><span class="lineno"> 1495</span> </div>
<div class="line"><span class="lineno"> 1496</span>  <span class="comment">// Assign and calculate the new nodes&#39; information</span></div>
<div class="line"><span class="lineno"> 1497</span>  newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a>  = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a>;</div>
<div class="line"><span class="lineno"> 1498</span>  newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a> = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a>;</div>
<div class="line"><span class="lineno"> 1499</span> </div>
<div class="line"><span class="lineno"> 1500</span>  newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a2e86dc6e196ffd3ff3fc98f09047caf5">m_ancestor</a>         = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a2e86dc6e196ffd3ff3fc98f09047caf5">m_ancestor</a>;</div>
<div class="line"><span class="lineno"> 1501</span>  newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>  = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>;</div>
<div class="line"><span class="lineno"> 1502</span>  newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a2e86dc6e196ffd3ff3fc98f09047caf5">m_ancestor</a>        = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a2e86dc6e196ffd3ff3fc98f09047caf5">m_ancestor</a>;</div>
<div class="line"><span class="lineno"> 1503</span>  newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a> = m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>;</div>
<div class="line"><span class="lineno"> 1504</span> </div>
<div class="line"><span class="lineno"> 1505</span>  <span class="comment">// We *CAN&#39;T* force the new nodes to be convex here</span></div>
<div class="line"><span class="lineno"> 1506</span>  newLeftNode-&gt;buildNodeInfos();</div>
<div class="line"><span class="lineno"> 1507</span>  newRightNode-&gt;buildNodeInfos();</div>
<div class="line"><span class="lineno"> 1508</span> </div>
<div class="line"><span class="lineno"> 1509</span>  newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a6e2399be686ff186ce6e2aa1f001f8c4">m_updateTime</a> = newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a6e2399be686ff186ce6e2aa1f001f8c4">m_updateTime</a> = algoritmicTime;</div>
<div class="line"><span class="lineno"> 1510</span> </div>
<div class="line"><span class="lineno"> 1511</span>  <span class="comment">// Now, output the found interaction</span></div>
<div class="line"><span class="lineno"> 1512</span>  newLeftNode-&gt;setAttribute(ContourNode::SK_NODE_DROPPED);</div>
<div class="line"><span class="lineno"> 1513</span>  newRightNode-&gt;setAttribute(ContourNode::SK_NODE_DROPPED);</div>
<div class="line"><span class="lineno"> 1514</span>  newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aedb2bc3a508f9abd678aa94e82139c8b">m_outputNode</a>  = m_context-&gt;m_output-&gt;newNode(position);</div>
<div class="line"><span class="lineno"> 1515</span>  newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aedb2bc3a508f9abd678aa94e82139c8b">m_outputNode</a> = newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aedb2bc3a508f9abd678aa94e82139c8b">m_outputNode</a>;</div>
<div class="line"><span class="lineno"> 1516</span>  m_context-&gt;newSkeletonLink(newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aedb2bc3a508f9abd678aa94e82139c8b">m_outputNode</a>, m_generator);</div>
<div class="line"><span class="lineno"> 1517</span>  m_context-&gt;newSkeletonLink(newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aedb2bc3a508f9abd678aa94e82139c8b">m_outputNode</a>, m_coGenerator);</div>
<div class="line"><span class="lineno"> 1518</span> </div>
<div class="line"><span class="lineno"> 1519</span>  <span class="comment">// Update the active Index Table</span></div>
<div class="line"><span class="lineno"> 1520</span>  <span class="keywordflow">if</span> (activeTable.<a class="code hl_variable" href="class_index_table.html#ae787501a8b7b54425762e7e6aefdd74a">m_identifiers</a>[m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>] !=</div>
<div class="line"><span class="lineno"> 1521</span>      activeTable.<a class="code hl_variable" href="class_index_table.html#ae787501a8b7b54425762e7e6aefdd74a">m_identifiers</a>[m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>]) {</div>
<div class="line"><span class="lineno"> 1522</span>    <span class="comment">// If we have two different contours, they merge in one</span></div>
<div class="line"><span class="lineno"> 1523</span>    (*coGenContour)-&gt;clearAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>);</div>
<div class="line"><span class="lineno"> 1524</span>    activeTable.merge(genContour, coGenContour);</div>
<div class="line"><span class="lineno"> 1525</span> </div>
<div class="line"><span class="lineno"> 1526</span>    <span class="comment">// Check if the generator is head, if so update.</span></div>
<div class="line"><span class="lineno"> 1527</span>    <span class="keywordflow">if</span> (m_generator-&gt;hasAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>)) {</div>
<div class="line"><span class="lineno"> 1528</span>      newLeftNode-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>);</div>
<div class="line"><span class="lineno"> 1529</span>      *genContour = newLeftNode;</div>
<div class="line"><span class="lineno"> 1530</span>    }</div>
<div class="line"><span class="lineno"> 1531</span> </div>
<div class="line"><span class="lineno"> 1532</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1533</span>    <span class="comment">// Else we have only one contour, which splits in two</span></div>
<div class="line"><span class="lineno"> 1534</span>    (*genContour)-&gt;clearAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>);</div>
<div class="line"><span class="lineno"> 1535</span>    *genContour = newLeftNode;</div>
<div class="line"><span class="lineno"> 1536</span> </div>
<div class="line"><span class="lineno"> 1537</span>    newLeftNode-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>);</div>
<div class="line"><span class="lineno"> 1538</span>    newRightNode-&gt;setAttribute(<a class="code hl_enumvalue" href="class_contour_node.html#a7a113f0a25502174a87d6880481bd93eabc7a9d16bfe65fc23691a4ec9adf38cb">ContourNode::HEAD</a>);</div>
<div class="line"><span class="lineno"> 1539</span> </div>
<div class="line"><span class="lineno"> 1540</span>    activeTable.columnOfId(m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6c6887bbb84d6d8062fbeddde04a5882">m_ancestorContour</a>)</div>
<div class="line"><span class="lineno"> 1541</span>        .push_back(newRightNode);</div>
<div class="line"><span class="lineno"> 1542</span>  }</div>
<div class="line"><span class="lineno"> 1543</span> </div>
<div class="line"><span class="lineno"> 1544</span>  <span class="comment">// Before calculating the new interactions, to each new node we assign</span></div>
<div class="line"><span class="lineno"> 1545</span>  <span class="comment">// as impossible opposite edges the adjacent of the other node.</span></div>
<div class="line"><span class="lineno"> 1546</span>  <span class="keywordflow">if</span> (newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a19555660302217faf473dea41dbcfc17">m_concave</a>) {</div>
<div class="line"><span class="lineno"> 1547</span>    newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a14c308ca63e367045d7f0ff76ef9e575">m_notOpposites</a> = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a14c308ca63e367045d7f0ff76ef9e575">m_notOpposites</a>;</div>
<div class="line"><span class="lineno"> 1548</span>    append&lt;std::vector&lt;ContourEdge *&gt;,</div>
<div class="line"><span class="lineno"> 1549</span>           std::vector&lt;ContourEdge *&gt;::reverse_iterator&gt;(</div>
<div class="line"><span class="lineno"> 1550</span>        newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a14c308ca63e367045d7f0ff76ef9e575">m_notOpposites</a>, m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a14c308ca63e367045d7f0ff76ef9e575">m_notOpposites</a>);</div>
<div class="line"><span class="lineno"> 1551</span> </div>
<div class="line"><span class="lineno"> 1552</span>    newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a14c308ca63e367045d7f0ff76ef9e575">m_notOpposites</a>.push_back(newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a>);</div>
<div class="line"><span class="lineno"> 1553</span>    newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a14c308ca63e367045d7f0ff76ef9e575">m_notOpposites</a>.push_back(newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a>);</div>
<div class="line"><span class="lineno"> 1554</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a19555660302217faf473dea41dbcfc17">m_concave</a>) {</div>
<div class="line"><span class="lineno"> 1555</span>    newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a14c308ca63e367045d7f0ff76ef9e575">m_notOpposites</a> = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a14c308ca63e367045d7f0ff76ef9e575">m_notOpposites</a>;</div>
<div class="line"><span class="lineno"> 1556</span>    append&lt;std::vector&lt;ContourEdge *&gt;,</div>
<div class="line"><span class="lineno"> 1557</span>           std::vector&lt;ContourEdge *&gt;::reverse_iterator&gt;(</div>
<div class="line"><span class="lineno"> 1558</span>        newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a14c308ca63e367045d7f0ff76ef9e575">m_notOpposites</a>, m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#a14c308ca63e367045d7f0ff76ef9e575">m_notOpposites</a>);</div>
<div class="line"><span class="lineno"> 1559</span> </div>
<div class="line"><span class="lineno"> 1560</span>    newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a14c308ca63e367045d7f0ff76ef9e575">m_notOpposites</a>.push_back(newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a>);</div>
<div class="line"><span class="lineno"> 1561</span>    newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a14c308ca63e367045d7f0ff76ef9e575">m_notOpposites</a>.push_back(newLeftNode-&gt;<a class="code hl_variable" href="class_contour_node.html#ac4ef2b1947b66623cc66de831ebf1248">m_prev</a>-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a>);</div>
<div class="line"><span class="lineno"> 1562</span>  }</div>
<div class="line"><span class="lineno"> 1563</span> </div>
<div class="line"><span class="lineno"> 1564</span>  <span class="comment">// We also forbid newRightNode to be involved in events at the same location</span></div>
<div class="line"><span class="lineno"> 1565</span>  <span class="comment">// of this one.</span></div>
<div class="line"><span class="lineno"> 1566</span>  <span class="comment">// We just push its position in the m_direction by 0.02.</span></div>
<div class="line"><span class="lineno"> 1567</span>  newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a> += 0.02 * newRightNode-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>;</div>
<div class="line"><span class="lineno"> 1568</span> </div>
<div class="line"><span class="lineno"> 1569</span>  <span class="comment">// Finally, calculate the new left and right Events</span></div>
<div class="line"><span class="lineno"> 1570</span>  <a class="code hl_class" href="class_event.html">Event</a> newLeftEvent(newLeftNode, m_context);</div>
<div class="line"><span class="lineno"> 1571</span>  <span class="keywordflow">if</span> (newLeftEvent.m_type != Event::failure)</div>
<div class="line"><span class="lineno"> 1572</span>    m_context-&gt;m_timeline.push(newLeftEvent);</div>
<div class="line"><span class="lineno"> 1573</span> </div>
<div class="line"><span class="lineno"> 1574</span>  <a class="code hl_class" href="class_event.html">Event</a> newRightEvent(newRightNode, m_context);</div>
<div class="line"><span class="lineno"> 1575</span>  <span class="keywordflow">if</span> (newRightEvent.m_type != Event::failure)</div>
<div class="line"><span class="lineno"> 1576</span>    m_context-&gt;m_timeline.push(newRightEvent);</div>
<div class="line"><span class="lineno"> 1577</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2218c3412c6cef5fc0fe40a6aadfc85f" name="a2218c3412c6cef5fc0fe40a6aadfc85f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2218c3412c6cef5fc0fe40a6aadfc85f">&#9670;&nbsp;</a></span>splitDisplacementWith()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double Event::splitDisplacementWith </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_contour_node.html">ContourNode</a> *&#160;</td>
          <td class="paramname"><em>plane</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1086</span>                                                            {</div>
<div class="line"><span class="lineno"> 1087</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> slabLeftOrthogonal(-slab-&gt;m_edge-&gt;m_direction.y,</div>
<div class="line"><span class="lineno"> 1088</span>                             slab-&gt;m_edge-&gt;m_direction.x);</div>
<div class="line"><span class="lineno"> 1089</span>  <span class="keywordtype">double</span> denom = m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>.z +</div>
<div class="line"><span class="lineno"> 1090</span>                 slabLeftOrthogonal * <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>.x,</div>
<div class="line"><span class="lineno"> 1091</span>                                              m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a>.y);</div>
<div class="line"><span class="lineno"> 1092</span> </div>
<div class="line"><span class="lineno"> 1093</span>  <span class="keywordflow">if</span> (denom &lt; 0.01)</div>
<div class="line"><span class="lineno"> 1094</span>    <span class="keywordflow">return</span> -1;  <span class="comment">// generator-emitted ray is almost parallel to slab</span></div>
<div class="line"><span class="lineno"> 1095</span> </div>
<div class="line"><span class="lineno"> 1096</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> difference =</div>
<div class="line"><span class="lineno"> 1097</span>      planeProjection(slab-&gt;m_position - m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a>);</div>
<div class="line"><span class="lineno"> 1098</span> </div>
<div class="line"><span class="lineno"> 1099</span>  <span class="keywordflow">return</span> (slabLeftOrthogonal * difference + slab-&gt;m_position.z -</div>
<div class="line"><span class="lineno"> 1100</span>          m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a4c3d561d582e192cba5c841382df8aa7">m_position</a>.z) /</div>
<div class="line"><span class="lineno"> 1101</span>         denom;</div>
<div class="line"><span class="lineno"> 1102</span>}</div>
<div class="ttc" id="aclass_t_point_t_html"><div class="ttname"><a href="class_t_point_t.html">TPointT&lt; double &gt;</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2bfd1eeb0acbc314e8d9a8afed7ae940" name="a2bfd1eeb0acbc314e8d9a8afed7ae940"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bfd1eeb0acbc314e8d9a8afed7ae940">&#9670;&nbsp;</a></span>tryRayEdgeCollisionWith()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Event::tryRayEdgeCollisionWith </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_contour_node.html">ContourNode</a> *&#160;</td>
          <td class="paramname"><em>edge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1011</span>                                                                {</div>
<div class="line"><span class="lineno"> 1012</span>  <a class="code hl_class" href="class_contour_node.html">ContourNode</a> *newCoGenerator;</div>
<div class="line"><span class="lineno"> 1013</span>  Type type;</div>
<div class="line"><span class="lineno"> 1014</span> </div>
<div class="line"><span class="lineno"> 1015</span>  <span class="keywordtype">double</span> displacement, height, side1, side2;</div>
<div class="line"><span class="lineno"> 1016</span> </div>
<div class="line"><span class="lineno"> 1017</span>  <span class="keywordflow">if</span> (testRayEdgeCollision(opposite, displacement, height, side1, side2)) {</div>
<div class="line"><span class="lineno"> 1018</span>    type           = <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a29519734363d4a5a64fdf77c4a22268a">split_regenerate</a>;</div>
<div class="line"><span class="lineno"> 1019</span>    newCoGenerator = opposite;</div>
<div class="line"><span class="lineno"> 1020</span> </div>
<div class="line"><span class="lineno"> 1021</span>    <span class="comment">// Check against the REAL slab guards for type deduction</span></div>
<div class="line"><span class="lineno"> 1022</span>    <span class="keywordtype">double</span> firstSide =</div>
<div class="line"><span class="lineno"> 1023</span>               opposite-&gt;<a class="code hl_variable" href="class_contour_node.html#a19555660302217faf473dea41dbcfc17">m_concave</a></div>
<div class="line"><span class="lineno"> 1024</span>                   ? side1</div>
<div class="line"><span class="lineno"> 1025</span>                   : m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a> * opposite-&gt;m_AngularMomentum +</div>
<div class="line"><span class="lineno"> 1026</span>                         opposite-&gt;m_direction * m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a69fa12cf76cbb0351128739bddd03d66">m_AngularMomentum</a>,</div>
<div class="line"><span class="lineno"> 1027</span>           secondSide = opposite-&gt;m_next-&gt;m_concave</div>
<div class="line"><span class="lineno"> 1028</span>                            ? side2</div>
<div class="line"><span class="lineno"> 1029</span>                            : m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a6d7344a3b36514eef1995fdca6e47741">m_direction</a> *</div>
<div class="line"><span class="lineno"> 1030</span>                                      opposite-&gt;m_next-&gt;m_AngularMomentum +</div>
<div class="line"><span class="lineno"> 1031</span>                                  opposite-&gt;m_next-&gt;m_direction *</div>
<div class="line"><span class="lineno"> 1032</span>                                      m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#a69fa12cf76cbb0351128739bddd03d66">m_AngularMomentum</a>;</div>
<div class="line"><span class="lineno"> 1033</span> </div>
<div class="line"><span class="lineno"> 1034</span>    <span class="keywordflow">if</span> (firstSide &gt; -0.01 &amp;&amp; secondSide &lt; 0.01) {</div>
<div class="line"><span class="lineno"> 1035</span>      <span class="keywordtype">double</span> displacement_, height_;</div>
<div class="line"><span class="lineno"> 1036</span> </div>
<div class="line"><span class="lineno"> 1037</span>      <span class="keywordflow">if</span> (firstSide &lt; 0.01) {</div>
<div class="line"><span class="lineno"> 1038</span>        <span class="comment">// Ray hits first extremity of edge</span></div>
<div class="line"><span class="lineno"> 1039</span>        <span class="keywordflow">if</span> (opposite-&gt;m_concave ||</div>
<div class="line"><span class="lineno"> 1040</span>            testRayEdgeCollision(opposite-&gt;m_prev, displacement_, height_,</div>
<div class="line"><span class="lineno"> 1041</span>                                 side1, side2))</div>
<div class="line"><span class="lineno"> 1042</span>          type = <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a7342b521191201997425f7da42bbfc63">vertex</a>;</div>
<div class="line"><span class="lineno"> 1043</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (secondSide &gt; -0.01) {</div>
<div class="line"><span class="lineno"> 1044</span>        <span class="comment">// Ray hits second extremity of edge</span></div>
<div class="line"><span class="lineno"> 1045</span>        <span class="keywordflow">if</span> (opposite-&gt;m_next-&gt;m_concave ||</div>
<div class="line"><span class="lineno"> 1046</span>            testRayEdgeCollision(opposite-&gt;m_next, displacement_, height_,</div>
<div class="line"><span class="lineno"> 1047</span>                                 side1, side2)) {</div>
<div class="line"><span class="lineno"> 1048</span>          type           = <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a7342b521191201997425f7da42bbfc63">vertex</a>;</div>
<div class="line"><span class="lineno"> 1049</span>          newCoGenerator = opposite-&gt;<a class="code hl_variable" href="class_contour_node.html#a160411550051be248c686852654ccd36">m_next</a>;</div>
<div class="line"><span class="lineno"> 1050</span>        }</div>
<div class="line"><span class="lineno"> 1051</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1052</span>        type = <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a9d37ce59e247639e42f47a451da5a428">split</a>;</div>
<div class="line"><span class="lineno"> 1053</span>    }</div>
<div class="line"><span class="lineno"> 1054</span> </div>
<div class="line"><span class="lineno"> 1055</span>    <span class="keywordflow">if</span> (type == <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a29519734363d4a5a64fdf77c4a22268a">split_regenerate</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 1056</span>        height &lt;=</div>
<div class="line"><span class="lineno"> 1057</span>            m_context</div>
<div class="line"><span class="lineno"> 1058</span>                -&gt;m_currentHeight)  <span class="comment">// Split regeneration is allowed only at</span></div>
<div class="line"><span class="lineno"> 1059</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;                 <span class="comment">// future times</span></div>
<div class="line"><span class="lineno"> 1060</span> </div>
<div class="line"><span class="lineno"> 1061</span>    <span class="comment">// If competing with another event split/vertex, approve replacement only if</span></div>
<div class="line"><span class="lineno"> 1062</span>    <span class="comment">// the angle</span></div>
<div class="line"><span class="lineno"> 1063</span>    <span class="comment">// between m_generator and newCoGenerator is &lt; than with current</span></div>
<div class="line"><span class="lineno"> 1064</span>    <span class="comment">// m_coGenerator.</span></div>
<div class="line"><span class="lineno"> 1065</span>    <span class="keywordflow">if</span> (m_type != <a class="code hl_enumvalue" href="class_event.html#a2abf13b5be49315e9e362af02029f058a79f281ada0933ebcb72973baa65084e0">edge</a> &amp;&amp; fabs(displacement - m_displacement) &lt; 0.01 &amp;&amp;</div>
<div class="line"><span class="lineno"> 1066</span>        angleLess(m_coGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a>-&gt;m_direction,</div>
<div class="line"><span class="lineno"> 1067</span>                  newCoGenerator-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a>-&gt;m_direction,</div>
<div class="line"><span class="lineno"> 1068</span>                  m_generator-&gt;<a class="code hl_variable" href="class_contour_node.html#aaa9b7bea9e4ec0064e8b740bcad37b1b">m_edge</a>-&gt;m_direction))</div>
<div class="line"><span class="lineno"> 1069</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1070</span> </div>
<div class="line"><span class="lineno"> 1071</span>    <span class="comment">// Pero&#39; nel caso di quasi contemporaneo con un convesso, puo&#39; permettere di</span></div>
<div class="line"><span class="lineno"> 1072</span>    <span class="comment">// scegliere quello con Displacement &gt; !! ...</span></div>
<div class="line"><span class="lineno"> 1073</span>    <span class="comment">// Da rivedere... (cmq succede raramente che crei grossi problemi)</span></div>
<div class="line"><span class="lineno"> 1074</span> </div>
<div class="line"><span class="lineno"> 1075</span>    m_type = type, m_coGenerator = newCoGenerator;</div>
<div class="line"><span class="lineno"> 1076</span>    m_displacement = displacement, m_height = height;</div>
<div class="line"><span class="lineno"> 1077</span> </div>
<div class="line"><span class="lineno"> 1078</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1079</span>  }</div>
<div class="line"><span class="lineno"> 1080</span> </div>
<div class="line"><span class="lineno"> 1081</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1082</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ad64e3eda5ff0f1b86c910b701953be6e" name="ad64e3eda5ff0f1b86c910b701953be6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad64e3eda5ff0f1b86c910b701953be6e">&#9670;&nbsp;</a></span>m_algoritmicTime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int Event::m_algoritmicTime</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab610811752d3a04c91db57d212ac1f25" name="ab610811752d3a04c91db57d212ac1f25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab610811752d3a04c91db57d212ac1f25">&#9670;&nbsp;</a></span>m_coGenerator</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_contour_node.html">ContourNode</a>* Event::m_coGenerator</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aeee3995902cd8cafb2e78b1a910b4de3" name="aeee3995902cd8cafb2e78b1a910b4de3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeee3995902cd8cafb2e78b1a910b4de3">&#9670;&nbsp;</a></span>m_context</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_vectorization_context.html">VectorizationContext</a>* Event::m_context</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af442c2cf88f49433232c047536662119" name="af442c2cf88f49433232c047536662119"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af442c2cf88f49433232c047536662119">&#9670;&nbsp;</a></span>m_displacement</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Event::m_displacement</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a58affae3e7156b2c9543868c267585ff" name="a58affae3e7156b2c9543868c267585ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58affae3e7156b2c9543868c267585ff">&#9670;&nbsp;</a></span>m_generator</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_contour_node.html">ContourNode</a>* Event::m_generator</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2528d8a045ab31c5377e92f9c9b92006" name="a2528d8a045ab31c5377e92f9c9b92006"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2528d8a045ab31c5377e92f9c9b92006">&#9670;&nbsp;</a></span>m_height</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Event::m_height</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4b6df7508772bf848466b71623666c97" name="a4b6df7508772bf848466b71623666c97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b6df7508772bf848466b71623666c97">&#9670;&nbsp;</a></span>m_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_event.html#a2abf13b5be49315e9e362af02029f058">Type</a> Event::m_type</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>E:/opentoonz/toonz/sources/toonzlib/<a class="el" href="">tcenterlineskeletonizer.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
