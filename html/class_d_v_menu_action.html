<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: DVMenuAction Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-slots">Public Slots</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_d_v_menu_action-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">DVMenuAction Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for DVMenuAction:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_d_v_menu_action.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-slots" name="pub-slots"></a>
Public Slots</h2></td></tr>
<tr class="memitem:a16c8fcdf938a626ec69ee0b791d57cc0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_v_menu_action.html#a16c8fcdf938a626ec69ee0b791d57cc0">onTriggered</a> (QAction *action)</td></tr>
<tr class="separator:a16c8fcdf938a626ec69ee0b791d57cc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a71736768847c4c83cec62ed4edaea674"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_v_menu_action.html#a71736768847c4c83cec62ed4edaea674">DVMenuAction</a> (const QString &amp;text, QWidget *parent, QList&lt; QString &gt; actions)</td></tr>
<tr class="separator:a71736768847c4c83cec62ed4edaea674"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac19626a0c38aac033ecaaca18c779c4e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_v_menu_action.html#ac19626a0c38aac033ecaaca18c779c4e">setActions</a> (QList&lt; QString &gt; actions)</td></tr>
<tr class="separator:ac19626a0c38aac033ecaaca18c779c4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b3ef221119f22479e2de359aca5291e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_v_menu_action.html#a4b3ef221119f22479e2de359aca5291e">getTriggeredActionIndex</a> ()</td></tr>
<tr class="separator:a4b3ef221119f22479e2de359aca5291e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a71736768847c4c83cec62ed4edaea674" name="a71736768847c4c83cec62ed4edaea674"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71736768847c4c83cec62ed4edaea674">&#9670;&nbsp;</a></span>DVMenuAction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DVMenuAction::DVMenuAction </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QWidget *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QList&lt; QString &gt;&#160;</td>
          <td class="paramname"><em>actions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >It is a menu' with action defined in <b>actions</b>. Actions can contain CommandId or simple action name. In first case action triggered is connected with action command execute directly. In second case action triggered is connected with menu action command execute; is helpful to use <b>m_triggeredActionIndex</b> to distingue action. </p>
<div class="fragment"><div class="line"><span class="lineno">  487</span>    : QMenu(text, parent), m_triggeredActionIndex(-1) {</div>
<div class="line"><span class="lineno">  488</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  489</span>  <span class="keywordflow">for</span> (i = 0; i &lt; actions.size(); i++) addAction(actions.at(i));</div>
<div class="line"><span class="lineno">  490</span>  connect(<span class="keyword">this</span>, SIGNAL(triggered(QAction *)), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno">  491</span>          SLOT(onTriggered(QAction *)));</div>
<div class="line"><span class="lineno">  492</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4b3ef221119f22479e2de359aca5291e" name="a4b3ef221119f22479e2de359aca5291e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b3ef221119f22479e2de359aca5291e">&#9670;&nbsp;</a></span>getTriggeredActionIndex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int DVMenuAction::getTriggeredActionIndex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  274</span>{ <span class="keywordflow">return</span> m_triggeredActionIndex; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a16c8fcdf938a626ec69ee0b791d57cc0" name="a16c8fcdf938a626ec69ee0b791d57cc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16c8fcdf938a626ec69ee0b791d57cc0">&#9670;&nbsp;</a></span>onTriggered</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DVMenuAction::onTriggered </td>
          <td>(</td>
          <td class="paramtype">QAction *&#160;</td>
          <td class="paramname"><em>action</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  534</span>                                              {</div>
<div class="line"><span class="lineno">  535</span>  QVariant data = action-&gt;data();</div>
<div class="line"><span class="lineno">  536</span>  <span class="keywordflow">if</span> (data.isValid()) m_triggeredActionIndex = data.toInt();</div>
<div class="line"><span class="lineno">  537</span>  CommandManager::instance()-&gt;execute(action, menuAction());</div>
<div class="line"><span class="lineno">  538</span>  <span class="keywordtype">int</span> oldIndex = m_triggeredActionIndex;</div>
<div class="line"><span class="lineno">  539</span>  <span class="keywordflow">if</span> (m_triggeredActionIndex != -1) m_triggeredActionIndex = -1;</div>
<div class="line"><span class="lineno">  540</span>  QString str = data.toString();</div>
<div class="line"><span class="lineno">  541</span>  QAction *tableAction =</div>
<div class="line"><span class="lineno">  542</span>      CommandManager::instance()-&gt;getAction(str.toStdString().c_str());</div>
<div class="line"><span class="lineno">  543</span>  <span class="keywordflow">if</span> (tableAction || oldIndex == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  544</span>  QList&lt;QAction *&gt; acts = actions();</div>
<div class="line"><span class="lineno">  545</span>  removeAction(action);</div>
<div class="line"><span class="lineno">  546</span>  insertAction(acts[0], action);</div>
<div class="line"><span class="lineno">  547</span> </div>
<div class="line"><span class="lineno">  548</span>  acts = actions();</div>
<div class="line"><span class="lineno">  549</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  550</span>  <span class="keywordflow">for</span> (i = 0; i &lt;= oldIndex; i++) {</div>
<div class="line"><span class="lineno">  551</span>    QAction *a     = acts.at(i);</div>
<div class="line"><span class="lineno">  552</span>    QString newTxt = changeStringNumber(a-&gt;text(), i);</div>
<div class="line"><span class="lineno">  553</span>    a-&gt;setText(newTxt);</div>
<div class="line"><span class="lineno">  554</span>    a-&gt;setData(QVariant(i));</div>
<div class="line"><span class="lineno">  555</span>  }</div>
<div class="line"><span class="lineno">  556</span>  m_triggeredActionIndex = -1;</div>
<div class="line"><span class="lineno">  557</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac19626a0c38aac033ecaaca18c779c4e" name="ac19626a0c38aac033ecaaca18c779c4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac19626a0c38aac033ecaaca18c779c4e">&#9670;&nbsp;</a></span>setActions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DVMenuAction::setActions </td>
          <td>(</td>
          <td class="paramtype">QList&lt; QString &gt;&#160;</td>
          <td class="paramname"><em>actions</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Set a new list of action to menu'. NB. If action list is composed by action menaged and action to create pay attention to inserted order. </p>
<div class="fragment"><div class="line"><span class="lineno">  499</span>                                                    {</div>
<div class="line"><span class="lineno">  500</span>  <span class="keywordflow">if</span> (m_triggeredActionIndex != -1)  <span class="comment">// Sta facendo l&#39;onTriggered</span></div>
<div class="line"><span class="lineno">  501</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  502</span>  clear();</div>
<div class="line"><span class="lineno">  503</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  504</span>  <span class="keywordflow">for</span> (i = 0; i &lt; actions.size(); i++) {</div>
<div class="line"><span class="lineno">  505</span>    QString actionId = actions.at(i);</div>
<div class="line"><span class="lineno">  506</span>    <span class="comment">// Se l&#39;azione e&#39; definita da un CommandId la aggiungo.</span></div>
<div class="line"><span class="lineno">  507</span>    QAction *action =</div>
<div class="line"><span class="lineno">  508</span>        CommandManager::instance()-&gt;getAction(actionId.toStdString().c_str());</div>
<div class="line"><span class="lineno">  509</span>    <span class="keywordflow">if</span> (action) {</div>
<div class="line"><span class="lineno">  510</span>      addAction(action);</div>
<div class="line"><span class="lineno">  511</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  512</span>    }</div>
<div class="line"><span class="lineno">  513</span>    <span class="comment">// Altrimenti creo una nuova azione e la aggiungo.</span></div>
<div class="line"><span class="lineno">  514</span>    action = addAction(actionId);</div>
<div class="line"><span class="lineno">  515</span>    action-&gt;setData(QVariant(i));</div>
<div class="line"><span class="lineno">  516</span>  }</div>
<div class="line"><span class="lineno">  517</span>}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>E:/opentoonz/toonz/sources/include/toonzqt/<a class="el" href="">menubarcommand.h</a></li>
<li>E:/opentoonz/toonz/sources/toonzqt/<a class="el" href="">menubarcommand.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
