<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: ImageViewer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-slots">Public Slots</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="class_image_viewer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ImageViewer Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="class_image_viewer.html" title="The ImageViewer class provides to view an image.">ImageViewer</a> class provides to view an image.  
 <a href="class_image_viewer.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for ImageViewer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_image_viewer.png" usemap="#ImageViewer_map" alt=""/>
  <map id="ImageViewer_map" name="ImageViewer_map">
<area href="class_g_l_widget_for_high_dpi.html" alt="GLWidgetForHighDpi" shape="rect" coords="70,56,201,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-slots" name="pub-slots"></a>
Public Slots</h2></td></tr>
<tr class="memitem:ae72f79ae8b4bae6b1bdfc94022414be3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#ae72f79ae8b4bae6b1bdfc94022414be3">updateImageViewer</a> ()</td></tr>
<tr class="separator:ae72f79ae8b4bae6b1bdfc94022414be3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dc088198a0839240e14a624dc77043b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a1dc088198a0839240e14a624dc77043b">resetView</a> ()</td></tr>
<tr class="separator:a1dc088198a0839240e14a624dc77043b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8acb0c934a9dc97be7f456e2ea4e8e74"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a8acb0c934a9dc97be7f456e2ea4e8e74">fitView</a> ()</td></tr>
<tr class="separator:a8acb0c934a9dc97be7f456e2ea4e8e74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f26f765f12d2feff9f3d11452be54b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a4f26f765f12d2feff9f3d11452be54b4">showHistogram</a> ()</td></tr>
<tr class="separator:a4f26f765f12d2feff9f3d11452be54b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a1aa26cb294de9d191411352d3d6c14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a1a1aa26cb294de9d191411352d3d6c14">swapCompared</a> ()</td></tr>
<tr class="separator:a1a1aa26cb294de9d191411352d3d6c14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bbac27221577b3644eb2a0be761640f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a0bbac27221577b3644eb2a0be761640f">onContextAboutToBeDestroyed</a> ()</td></tr>
<tr class="separator:a0bbac27221577b3644eb2a0be761640f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac455bcbc5ebc2c8dd7c32ceca85d1b62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#ac455bcbc5ebc2c8dd7c32ceca85d1b62">onPreferenceChanged</a> (const QString &amp;prefName)</td></tr>
<tr class="separator:ac455bcbc5ebc2c8dd7c32ceca85d1b62"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1dd752c3edc1aa2f9f8663d0f2583216"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a1dd752c3edc1aa2f9f8663d0f2583216">ImageViewer</a> (QWidget *parent, <a class="el" href="class_flip_book.html">FlipBook</a> *flipbook, bool showHistogram)</td></tr>
<tr class="separator:a1dd752c3edc1aa2f9f8663d0f2583216"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25d0c3880d457fbfb8aef8dbdac5f3e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a25d0c3880d457fbfb8aef8dbdac5f3e5">setIsColorModel</a> (bool isColorModel)</td></tr>
<tr class="separator:a25d0c3880d457fbfb8aef8dbdac5f3e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc21f7d424db53f0b81a03e2c7fed524"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#afc21f7d424db53f0b81a03e2c7fed524">isColorModel</a> ()</td></tr>
<tr class="separator:afc21f7d424db53f0b81a03e2c7fed524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd5a4c3961e00f3fac5193d971ad0650"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#abd5a4c3961e00f3fac5193d971ad0650">setVisual</a> (const <a class="el" href="class_image_painter_1_1_visual_settings.html">ImagePainter::VisualSettings</a> &amp;settings)</td></tr>
<tr class="separator:abd5a4c3961e00f3fac5193d971ad0650"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af514a3d90ce0f99a9217874bb3ef95dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#af514a3d90ce0f99a9217874bb3ef95dc">setImage</a> (<a class="el" href="class_t_smart_pointer_t.html">TImageP</a> image)</td></tr>
<tr class="separator:af514a3d90ce0f99a9217874bb3ef95dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af80b9641df537a1bf3b0c98f2c431420"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_smart_pointer_t.html">TImageP</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#af80b9641df537a1bf3b0c98f2c431420">getImage</a> ()</td></tr>
<tr class="separator:af80b9641df537a1bf3b0c98f2c431420"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3ae5a695b9e5ec53364d657d6f51e07"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_affine.html">TAffine</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#ad3ae5a695b9e5ec53364d657d6f51e07">getViewAff</a> ()</td></tr>
<tr class="separator:ad3ae5a695b9e5ec53364d657d6f51e07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ec516026bd15dc6c7c0154ea9070c00"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a4ec516026bd15dc6c7c0154ea9070c00">setViewAff</a> (<a class="el" href="class_t_affine.html">TAffine</a> viewAff)</td></tr>
<tr class="separator:a4ec516026bd15dc6c7c0154ea9070c00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f412d451a497d7c346c04c89d3c8865"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_affine.html">TAffine</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a5f412d451a497d7c346c04c89d3c8865">getImgToWidgetAffine</a> (const <a class="el" href="class_t_rect_t.html">TRectD</a> &amp;imgBounds) const</td></tr>
<tr class="memdesc:a5f412d451a497d7c346c04c89d3c8865"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the affine transform from image reference to widget's pixel one.  <a href="class_image_viewer.html#a5f412d451a497d7c346c04c89d3c8865">More...</a><br /></td></tr>
<tr class="separator:a5f412d451a497d7c346c04c89d3c8865"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60f9f5a22c83e6f2f15b4e7a224047d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_affine.html">TAffine</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a60f9f5a22c83e6f2f15b4e7a224047d3">getImgToWidgetAffine</a> () const</td></tr>
<tr class="separator:a60f9f5a22c83e6f2f15b4e7a224047d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad85948c9cf34353112cb7d4b2e117a81"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#ad85948c9cf34353112cb7d4b2e117a81">setHistogramTitle</a> (QString levelName)</td></tr>
<tr class="separator:ad85948c9cf34353112cb7d4b2e117a81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08439b4de1e9dbe8107c7d6d0ca05ba2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a08439b4de1e9dbe8107c7d6d0ca05ba2">setHistogramEnable</a> (bool enable)</td></tr>
<tr class="separator:a08439b4de1e9dbe8107c7d6d0ca05ba2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5510dd98281795f946aa0f9a0ec9a060"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a5510dd98281795f946aa0f9a0ec9a060">hideHistogram</a> ()</td></tr>
<tr class="separator:a5510dd98281795f946aa0f9a0ec9a060"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae32677b4e8710e66a535bfabd9bfd84d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#ae32677b4e8710e66a535bfabd9bfd84d">zoomQt</a> (bool forward, bool reset)</td></tr>
<tr class="separator:ae32677b4e8710e66a535bfabd9bfd84d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b9b55471bdccb502526c7e5573c4775"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a2b9b55471bdccb502526c7e5573c4775">resetZoom</a> ()</td></tr>
<tr class="separator:a2b9b55471bdccb502526c7e5573c4775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3f2e0f11a0e98019187c0aab85f0e6e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#ab3f2e0f11a0e98019187c0aab85f0e6e">setIsRemakingPreviewFx</a> (bool on)</td></tr>
<tr class="separator:ab3f2e0f11a0e98019187c0aab85f0e6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adddffa737d898a47a37e6566b5f9bbf0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#adddffa737d898a47a37e6566b5f9bbf0">isRemakingPreviewFx</a> ()</td></tr>
<tr class="separator:adddffa737d898a47a37e6566b5f9bbf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaad0ef7fa1fb0ed91e36026e5e520e6d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#aaad0ef7fa1fb0ed91e36026e5e520e6d">adaptView</a> (const <a class="el" href="class_t_rect_t.html">TRect</a> &amp;imgRect, const <a class="el" href="class_t_rect_t.html">TRect</a> &amp;viewRect)</td></tr>
<tr class="separator:aaad0ef7fa1fb0ed91e36026e5e520e6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a459f7ae77903ec1f288cc46853c0bb36"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a459f7ae77903ec1f288cc46853c0bb36">adaptView</a> (const QRect &amp;viewerRect)</td></tr>
<tr class="separator:a459f7ae77903ec1f288cc46853c0bb36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a406dda31710bdc8b6fad7c95312cffff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a406dda31710bdc8b6fad7c95312cffff">doSwapBuffers</a> ()</td></tr>
<tr class="separator:a406dda31710bdc8b6fad7c95312cffff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35353ea99a3bfe729648c6f06928f4f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a35353ea99a3bfe729648c6f06928f4f4">changeSwapBehavior</a> (bool enable)</td></tr>
<tr class="separator:a35353ea99a3bfe729648c6f06928f4f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac52c145b068ed3527496a0045a911188"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#ac52c145b068ed3527496a0045a911188">invalidateCompHisto</a> ()</td></tr>
<tr class="separator:ac52c145b068ed3527496a0045a911188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05c8912b53633fd251c30da998d2082f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a05c8912b53633fd251c30da998d2082f">setTimerAndTargetInstant</a> (QElapsedTimer *timer, qint64 target)</td></tr>
<tr class="separator:a05c8912b53633fd251c30da998d2082f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_g_l_widget_for_high_dpi"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_g_l_widget_for_high_dpi')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_g_l_widget_for_high_dpi.html">GLWidgetForHighDpi</a></td></tr>
<tr class="memitem:aa309bf8bc3d804cc71c632683ec78a1c inherit pub_methods_class_g_l_widget_for_high_dpi"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_l_widget_for_high_dpi.html#aa309bf8bc3d804cc71c632683ec78a1c">GLWidgetForHighDpi</a> (QWidget *parent=nullptr, Qt::WindowFlags f=Qt::WindowFlags())</td></tr>
<tr class="separator:aa309bf8bc3d804cc71c632683ec78a1c inherit pub_methods_class_g_l_widget_for_high_dpi"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8887952fbcb70f7abfdd396d9a9eec8b inherit pub_methods_class_g_l_widget_for_high_dpi"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_l_widget_for_high_dpi.html#a8887952fbcb70f7abfdd396d9a9eec8b">width</a> () const</td></tr>
<tr class="separator:a8887952fbcb70f7abfdd396d9a9eec8b inherit pub_methods_class_g_l_widget_for_high_dpi"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fceed3d91df49ace2b4799a7ae1b65a inherit pub_methods_class_g_l_widget_for_high_dpi"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_l_widget_for_high_dpi.html#a3fceed3d91df49ace2b4799a7ae1b65a">height</a> () const</td></tr>
<tr class="separator:a3fceed3d91df49ace2b4799a7ae1b65a inherit pub_methods_class_g_l_widget_for_high_dpi"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a693785d4893cf9078c96cb0cbd03b234 inherit pub_methods_class_g_l_widget_for_high_dpi"><td class="memItemLeft" align="right" valign="top">QRect&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_l_widget_for_high_dpi.html#a693785d4893cf9078c96cb0cbd03b234">rect</a> () const</td></tr>
<tr class="separator:a693785d4893cf9078c96cb0cbd03b234 inherit pub_methods_class_g_l_widget_for_high_dpi"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ac75bc3d9cc31cfed77ee667b9b76543c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#ac75bc3d9cc31cfed77ee667b9b76543c">contextMenuEvent</a> (QContextMenuEvent *event) override</td></tr>
<tr class="separator:ac75bc3d9cc31cfed77ee667b9b76543c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf92fe62a79015b6b9948e1f724dbb6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#acf92fe62a79015b6b9948e1f724dbb6a">initializeGL</a> () override</td></tr>
<tr class="separator:acf92fe62a79015b6b9948e1f724dbb6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1ce6245e214b9cc4f065699b312e3fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#ae1ce6245e214b9cc4f065699b312e3fb">resizeGL</a> (int width, int height) override</td></tr>
<tr class="separator:ae1ce6245e214b9cc4f065699b312e3fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2edbf42c08020efed6eaf23f0dbf56cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a2edbf42c08020efed6eaf23f0dbf56cf">paintGL</a> () override</td></tr>
<tr class="separator:a2edbf42c08020efed6eaf23f0dbf56cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab465328eb07b6ceef99d9ec471d4fbc2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#ab465328eb07b6ceef99d9ec471d4fbc2">showEvent</a> (QShowEvent *) override</td></tr>
<tr class="separator:ab465328eb07b6ceef99d9ec471d4fbc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50d7077526fd7d10817a460fc98a1458"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a50d7077526fd7d10817a460fc98a1458">hideEvent</a> (QHideEvent *) override</td></tr>
<tr class="separator:a50d7077526fd7d10817a460fc98a1458"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b7cdb5e8e09f7090f47933a6008b9d2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a2b7cdb5e8e09f7090f47933a6008b9d2">mouseMoveEvent</a> (QMouseEvent *event) override</td></tr>
<tr class="separator:a2b7cdb5e8e09f7090f47933a6008b9d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7372584cca321456fd2b29794e69c00"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#ae7372584cca321456fd2b29794e69c00">mousePressEvent</a> (QMouseEvent *event) override</td></tr>
<tr class="separator:ae7372584cca321456fd2b29794e69c00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62cdfb855b556cec0fff8ec46a4f27f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a62cdfb855b556cec0fff8ec46a4f27f5">mouseReleaseEvent</a> (QMouseEvent *event) override</td></tr>
<tr class="separator:a62cdfb855b556cec0fff8ec46a4f27f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0e59973f96d412a056f3dea158c76c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#aa0e59973f96d412a056f3dea158c76c8">keyPressEvent</a> (QKeyEvent *event) override</td></tr>
<tr class="separator:aa0e59973f96d412a056f3dea158c76c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c9350c1cfbac2cd51a2c8cb2b61b5eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a5c9350c1cfbac2cd51a2c8cb2b61b5eb">mouseDoubleClickEvent</a> (QMouseEvent *event) override</td></tr>
<tr class="separator:a5c9350c1cfbac2cd51a2c8cb2b61b5eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa10c8e25017a6e4efc3b017f40e5a6e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#afa10c8e25017a6e4efc3b017f40e5a6e">wheelEvent</a> (QWheelEvent *) override</td></tr>
<tr class="separator:afa10c8e25017a6e4efc3b017f40e5a6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a574ebcd95b038e59de03f0bb6e6a9dd2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a574ebcd95b038e59de03f0bb6e6a9dd2">panQt</a> (const QPoint &amp;delta)</td></tr>
<tr class="separator:a574ebcd95b038e59de03f0bb6e6a9dd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b00ca265e005c2de288ac04858e46cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a4b00ca265e005c2de288ac04858e46cd">zoomQt</a> (const QPoint &amp;center, double factor)</td></tr>
<tr class="separator:a4b00ca265e005c2de288ac04858e46cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d19df8eb374f916b259213729b34dbd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a6d19df8eb374f916b259213729b34dbd">dragCompare</a> (const QPoint &amp;dp)</td></tr>
<tr class="separator:a6d19df8eb374f916b259213729b34dbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa60f2e0498eca8a566b89a3ff199294"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#afa60f2e0498eca8a566b89a3ff199294">tabletEvent</a> (QTabletEvent *e) override</td></tr>
<tr class="separator:afa60f2e0498eca8a566b89a3ff199294"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05adf92e840fa8abb104d668c0ed68c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a05adf92e840fa8abb104d668c0ed68c5">touchEvent</a> (QTouchEvent *e, int type)</td></tr>
<tr class="separator:a05adf92e840fa8abb104d668c0ed68c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba700519a34c72294def6f5137b198c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#aba700519a34c72294def6f5137b198c8">gestureEvent</a> (QGestureEvent *e)</td></tr>
<tr class="separator:aba700519a34c72294def6f5137b198c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2aabe840fa48d58f2f480f9d0ab493f4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_viewer.html#a2aabe840fa48d58f2f480f9d0ab493f4">event</a> (QEvent *e) override</td></tr>
<tr class="separator:a2aabe840fa48d58f2f480f9d0ab493f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >The <a class="el" href="class_image_viewer.html" title="The ImageViewer class provides to view an image.">ImageViewer</a> class provides to view an image. </p>
<p >Inherits <b>QOpenGLWidget</b>.</p>
<p >The object allows also to manage pan and zoom event. It's possible to set a color mask TRop::ColorMask to image view. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1dd752c3edc1aa2f9f8663d0f2583216" name="a1dd752c3edc1aa2f9f8663d0f2583216"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dd752c3edc1aa2f9f8663d0f2583216">&#9670;&nbsp;</a></span>ImageViewer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ImageViewer::ImageViewer </td>
          <td>(</td>
          <td class="paramtype">QWidget *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_flip_book.html">FlipBook</a> *&#160;</td>
          <td class="paramname"><em>flipbook</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>showHistogram</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  212</span>    : <a class="code hl_class" href="class_g_l_widget_for_high_dpi.html">GLWidgetForHighDpi</a>(parent)</div>
<div class="line"><span class="lineno">  213</span>    , m_pressedMousePos(0, 0)</div>
<div class="line"><span class="lineno">  214</span>    , m_mouseButton(Qt::NoButton)</div>
<div class="line"><span class="lineno">  215</span>    , m_draggingZoomSelection(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  216</span>    , m_image()</div>
<div class="line"><span class="lineno">  217</span>    , m_FPS(0)</div>
<div class="line"><span class="lineno">  218</span>    , m_viewAff()</div>
<div class="line"><span class="lineno">  219</span>    , m_pos(0, 0)</div>
<div class="line"><span class="lineno">  220</span>    , m_visualSettings()</div>
<div class="line"><span class="lineno">  221</span>    , m_compareSettings()</div>
<div class="line"><span class="lineno">  222</span>    , m_isHistogramEnable(showHistogram)</div>
<div class="line"><span class="lineno">  223</span>    , m_flipbook(flipbook)</div>
<div class="line"><span class="lineno">  224</span>    , m_isColorModel(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  225</span>    , m_histogramPopup(0)</div>
<div class="line"><span class="lineno">  226</span>    , m_isRemakingPreviewFx(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  227</span>    , m_rectRGBPick(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  228</span>    , m_firstImage(<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  229</span>    , m_timer(<span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  230</span>  m_visualSettings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#ab6461a28653bae19432d998149564b43">m_sceneProperties</a> =</div>
<div class="line"><span class="lineno">  231</span>      <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene()-&gt;<a class="code hl_function" href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">getProperties</a>();</div>
<div class="line"><span class="lineno">  232</span>  m_visualSettings.m_drawExternalBG = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  233</span>  setAttribute(Qt::WA_KeyCompression);</div>
<div class="line"><span class="lineno">  234</span>  setFocusPolicy(Qt::StrongFocus);</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span>  setMouseTracking(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>  setAttribute(Qt::WA_AcceptTouchEvents);</div>
<div class="line"><span class="lineno">  239</span>  grabGesture(Qt::SwipeGesture);</div>
<div class="line"><span class="lineno">  240</span>  grabGesture(Qt::PanGesture);</div>
<div class="line"><span class="lineno">  241</span>  grabGesture(Qt::PinchGesture);</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>  <span class="keywordflow">if</span> (m_isHistogramEnable)</div>
<div class="line"><span class="lineno">  244</span>    m_histogramPopup = <span class="keyword">new</span> <a class="code hl_class" href="class_histogram_popup.html">HistogramPopup</a>(tr(<span class="stringliteral">&quot;Flipbook Histogram&quot;</span>));</div>
<div class="line"><span class="lineno">  245</span> </div>
<div class="line"><span class="lineno">  246</span>  <span class="keywordflow">if</span> (Preferences::instance()-&gt;isColorCalibrationEnabled())</div>
<div class="line"><span class="lineno">  247</span>    m_lutCalibrator = <span class="keyword">new</span> <a class="code hl_class" href="class_lut_calibrator.html">LutCalibrator</a>();</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>  <span class="keywordflow">if</span> (Preferences::instance()-&gt;is30bitDisplayEnabled())</div>
<div class="line"><span class="lineno">  250</span>    setTextureFormat(TGL_TexFmt10);</div>
<div class="line"><span class="lineno">  251</span>}</div>
<div class="ttc" id="aclass_g_l_widget_for_high_dpi_html"><div class="ttname"><a href="class_g_l_widget_for_high_dpi.html">GLWidgetForHighDpi</a></div><div class="ttdef"><b>Definition:</b> glwidget_for_highdpi.h:12</div></div>
<div class="ttc" id="aclass_histogram_popup_html"><div class="ttname"><a href="class_histogram_popup.html">HistogramPopup</a></div><div class="ttdoc">The HistogramPopup class provides a dialog to show an histogram Histogram.</div><div class="ttdef"><b>Definition:</b> histogrampopup.h:16</div></div>
<div class="ttc" id="aclass_image_painter_1_1_visual_settings_html_ab6461a28653bae19432d998149564b43"><div class="ttname"><a href="class_image_painter_1_1_visual_settings.html#ab6461a28653bae19432d998149564b43">ImagePainter::VisualSettings::m_sceneProperties</a></div><div class="ttdeci">TSceneProperties * m_sceneProperties</div><div class="ttdef"><b>Definition:</b> imagepainter.h:50</div></div>
<div class="ttc" id="aclass_lut_calibrator_html"><div class="ttname"><a href="class_lut_calibrator.html">LutCalibrator</a></div><div class="ttdef"><b>Definition:</b> lutcalibrator.h:32</div></div>
<div class="ttc" id="aclass_t_app_html_a24088f8647d5d9447fcec6b9b9bbf9eb"><div class="ttname"><a href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a></div><div class="ttdeci">static TApp * instance()</div><div class="ttdef"><b>Definition:</b> tapp.cpp:215</div></div>
<div class="ttc" id="aclass_t_app_html_abbbf1fae564e9e510826eda4f6637d20"><div class="ttname"><a href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">TApp::getCurrentScene</a></div><div class="ttdeci">TSceneHandle * getCurrentScene() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:106</div></div>
<div class="ttc" id="aclass_toonz_scene_html_a8ef96fedc17d7def810ac419b0939254"><div class="ttname"><a href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">ToonzScene::getProperties</a></div><div class="ttdeci">TSceneProperties * getProperties() const</div><div class="ttdoc">&lt; Returns a pointer to the scene's properties.</div><div class="ttdef"><b>Definition:</b> toonzscene.h:87</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afe2b04078dd9112aad6b104f1ac60359" name="afe2b04078dd9112aad6b104f1ac60359"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe2b04078dd9112aad6b104f1ac60359">&#9670;&nbsp;</a></span>~ImageViewer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ImageViewer::~ImageViewer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  389</span>                          {</div>
<div class="line"><span class="lineno">  390</span>  <span class="comment">// iwsw commented out temporarily</span></div>
<div class="line"><span class="lineno">  391</span>  <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  392</span><span class="comment">  if (m_ghibli3DLutUtil)</span></div>
<div class="line"><span class="lineno">  393</span><span class="comment">  {</span></div>
<div class="line"><span class="lineno">  394</span><span class="comment">          m_ghibli3DLutUtil-&gt;onEnd();</span></div>
<div class="line"><span class="lineno">  395</span><span class="comment">          delete m_ghibli3DLutUtil;</span></div>
<div class="line"><span class="lineno">  396</span><span class="comment">  }</span></div>
<div class="line"><span class="lineno">  397</span><span class="comment">  */</span></div>
<div class="line"><span class="lineno">  398</span>  <span class="keywordflow">if</span> (m_fbo) <span class="keyword">delete</span> m_fbo;</div>
<div class="line"><span class="lineno">  399</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a459f7ae77903ec1f288cc46853c0bb36" name="a459f7ae77903ec1f288cc46853c0bb36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a459f7ae77903ec1f288cc46853c0bb36">&#9670;&nbsp;</a></span>adaptView() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::adaptView </td>
          <td>(</td>
          <td class="paramtype">const QRect &amp;&#160;</td>
          <td class="paramname"><em>geomRect</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Adapts image viewer's affine to display the passed viewer rect at maximized ratio </p>
<div class="fragment"><div class="line"><span class="lineno"> 1384</span>                                                 {</div>
<div class="line"><span class="lineno"> 1385</span>  <span class="keywordflow">if</span> (!m_image) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1386</span> </div>
<div class="line"><span class="lineno"> 1387</span>  <span class="comment">// Retrieve the rect in image reference and call the associated adaptView</span></div>
<div class="line"><span class="lineno"> 1388</span>  <a class="code hl_class" href="class_t_rect_t.html">TRect</a> imgBounds(getImageBounds(m_image));</div>
<div class="line"><span class="lineno"> 1389</span>  <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> imgBoundsD(imgBounds.x0, imgBounds.y0, imgBounds.x1 + 1,</div>
<div class="line"><span class="lineno"> 1390</span>                    imgBounds.y1 + 1);</div>
<div class="line"><span class="lineno"> 1391</span> </div>
<div class="line"><span class="lineno"> 1392</span>  <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> geomRectD(geomRect.left(), geomRect.top(), geomRect.right() + 1,</div>
<div class="line"><span class="lineno"> 1393</span>                   geomRect.bottom() + 1);</div>
<div class="line"><span class="lineno"> 1394</span>  <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> viewRectD(<a class="code hl_function" href="class_image_viewer.html#a5f412d451a497d7c346c04c89d3c8865">getImgToWidgetAffine</a>().inv() * geomRectD);</div>
<div class="line"><span class="lineno"> 1395</span>  <a class="code hl_class" href="class_t_rect_t.html">TRect</a> viewRect(tfloor(viewRectD.x0), tfloor(viewRectD.y0),</div>
<div class="line"><span class="lineno"> 1396</span>                 tceil(viewRectD.x1) - 1, tceil(viewRectD.y1) - 1);</div>
<div class="line"><span class="lineno"> 1397</span> </div>
<div class="line"><span class="lineno"> 1398</span>  <a class="code hl_function" href="class_image_viewer.html#aaad0ef7fa1fb0ed91e36026e5e520e6d">adaptView</a>(imgBounds, viewRect);</div>
<div class="line"><span class="lineno"> 1399</span>}</div>
<div class="ttc" id="aclass_image_viewer_html_a5f412d451a497d7c346c04c89d3c8865"><div class="ttname"><a href="class_image_viewer.html#a5f412d451a497d7c346c04c89d3c8865">ImageViewer::getImgToWidgetAffine</a></div><div class="ttdeci">TAffine getImgToWidgetAffine(const TRectD &amp;imgBounds) const</div><div class="ttdoc">Returns the affine transform from image reference to widget's pixel one.</div><div class="ttdef"><b>Definition:</b> imageviewer.cpp:1345</div></div>
<div class="ttc" id="aclass_image_viewer_html_aaad0ef7fa1fb0ed91e36026e5e520e6d"><div class="ttname"><a href="class_image_viewer.html#aaad0ef7fa1fb0ed91e36026e5e520e6d">ImageViewer::adaptView</a></div><div class="ttdeci">void adaptView(const TRect &amp;imgRect, const TRect &amp;viewRect)</div><div class="ttdef"><b>Definition:</b> imageviewer.cpp:1362</div></div>
<div class="ttc" id="aclass_t_rect_t_html"><div class="ttname"><a href="class_t_rect_t.html">TRectT&lt; int &gt;</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01362">adaptView()</a>, <a class="el" href="#l01345">getImgToWidgetAffine()</a>, and <a class="el" href="#l00557">TRectT&lt; T &gt;::x0</a>.</p>

</div>
</div>
<a id="aaad0ef7fa1fb0ed91e36026e5e520e6d" name="aaad0ef7fa1fb0ed91e36026e5e520e6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaad0ef7fa1fb0ed91e36026e5e520e6d">&#9670;&nbsp;</a></span>adaptView() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::adaptView </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_rect_t.html">TRect</a> &amp;&#160;</td>
          <td class="paramname"><em>imgRect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_rect_t.html">TRect</a> &amp;&#160;</td>
          <td class="paramname"><em>viewRect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Adapts image viewer's affine to display the passed image rect at maximized ratio </p>
<div class="fragment"><div class="line"><span class="lineno"> 1362</span>                                                                       {</div>
<div class="line"><span class="lineno"> 1363</span>  QRect viewerRect(rect());</div>
<div class="line"><span class="lineno"> 1364</span> </div>
<div class="line"><span class="lineno"> 1365</span>  <span class="keywordflow">if</span> (viewerRect.isEmpty()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1366</span> </div>
<div class="line"><span class="lineno"> 1367</span>  <span class="keywordtype">double</span> imageScale = std::min(viewerRect.width() / (<span class="keywordtype">double</span>)viewRect.getLx(),</div>
<div class="line"><span class="lineno"> 1368</span>                               viewerRect.height() / (<span class="keywordtype">double</span>)viewRect.getLy());</div>
<div class="line"><span class="lineno"> 1369</span> </div>
<div class="line"><span class="lineno"> 1370</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> viewRectCenter((viewRect.<a class="code hl_variable" href="class_t_rect_t.html#ac008cbc625f50d8b3c180c8eb2594cdb">x0</a> + viewRect.x1 + 1) * 0.5,</div>
<div class="line"><span class="lineno"> 1371</span>                         (viewRect.y0 + viewRect.y1 + 1) * 0.5);</div>
<div class="line"><span class="lineno"> 1372</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> imgRectCenter((imgRect.<a class="code hl_variable" href="class_t_rect_t.html#ac008cbc625f50d8b3c180c8eb2594cdb">x0</a> + imgRect.x1 + 1) * 0.5,</div>
<div class="line"><span class="lineno"> 1373</span>                        (imgRect.y0 + imgRect.y1 + 1) * 0.5);</div>
<div class="line"><span class="lineno"> 1374</span> </div>
<div class="line"><span class="lineno"> 1375</span>  <a class="code hl_class" href="class_t_affine.html">TAffine</a> newViewAff(<a class="code hl_class" href="class_t_scale.html">TScale</a>(imageScale, imageScale) *</div>
<div class="line"><span class="lineno"> 1376</span>                     <a class="code hl_class" href="class_t_translation.html">TTranslation</a>(imgRectCenter - viewRectCenter));</div>
<div class="line"><span class="lineno"> 1377</span>  setViewAff(newViewAff);</div>
<div class="line"><span class="lineno"> 1378</span>}</div>
<div class="ttc" id="aclass_t_affine_html"><div class="ttname"><a href="class_t_affine.html">TAffine</a></div><div class="ttdoc">This is the base class for the affine transformations.</div><div class="ttdef"><b>Definition:</b> tgeometry.h:864</div></div>
<div class="ttc" id="aclass_t_point_t_html"><div class="ttname"><a href="class_t_point_t.html">TPointT&lt; double &gt;</a></div></div>
<div class="ttc" id="aclass_t_rect_t_html_ac008cbc625f50d8b3c180c8eb2594cdb"><div class="ttname"><a href="class_t_rect_t.html#ac008cbc625f50d8b3c180c8eb2594cdb">TRectT::x0</a></div><div class="ttdeci">T x0</div><div class="ttdef"><b>Definition:</b> tgeometry.h:557</div></div>
<div class="ttc" id="aclass_t_scale_html"><div class="ttname"><a href="class_t_scale.html">TScale</a></div><div class="ttdef"><b>Definition:</b> tgeometry.h:1133</div></div>
<div class="ttc" id="aclass_t_translation_html"><div class="ttname"><a href="class_t_translation.html">TTranslation</a></div><div class="ttdef"><b>Definition:</b> tgeometry.h:1074</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00557">TRectT&lt; T &gt;::x0</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l01384">adaptView()</a>, and <a class="el" href="#l01206">mouseReleaseEvent()</a>.</p>

</div>
</div>
<a id="a35353ea99a3bfe729648c6f06928f4f4" name="a35353ea99a3bfe729648c6f06928f4f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35353ea99a3bfe729648c6f06928f4f4">&#9670;&nbsp;</a></span>changeSwapBehavior()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::changeSwapBehavior </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1403</span>                                                {</div>
<div class="line"><span class="lineno"> 1404</span>  <span class="comment">// do nothing for now as setUpdateBehavior is not available with QGLWidget</span></div>
<div class="line"><span class="lineno"> 1405</span>  <span class="comment">// setUpdateBehavior(enable ? PartialUpdate : NoPartialUpdate);</span></div>
<div class="line"><span class="lineno"> 1406</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac75bc3d9cc31cfed77ee667b9b76543c" name="ac75bc3d9cc31cfed77ee667b9b76543c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac75bc3d9cc31cfed77ee667b9b76543c">&#9670;&nbsp;</a></span>contextMenuEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::contextMenuEvent </td>
          <td>(</td>
          <td class="paramtype">QContextMenuEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  255</span>                                                           {</div>
<div class="line"><span class="lineno">  256</span>  QAction *action;</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>  <span class="keywordflow">if</span> (m_isColorModel) {</div>
<div class="line"><span class="lineno">  259</span>    <span class="keyword">event</span>-&gt;ignore();</div>
<div class="line"><span class="lineno">  260</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  261</span>  }</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>  QMenu *menu = <span class="keyword">new</span> QMenu(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  264</span> </div>
<div class="line"><span class="lineno">  265</span>  <span class="keywordflow">if</span> (m_flipbook) {</div>
<div class="line"><span class="lineno">  266</span>    <span class="keywordflow">if</span> (m_flipbook-&gt;getPreviewedFx()) {</div>
<div class="line"><span class="lineno">  267</span>      <span class="keywordflow">if</span> (!(windowState() &amp; Qt::WindowFullScreen)) {</div>
<div class="line"><span class="lineno">  268</span>        action = menu-&gt;addAction(tr(<span class="stringliteral">&quot;Clone Preview&quot;</span>));</div>
<div class="line"><span class="lineno">  269</span>        action-&gt;setShortcut(QKeySequence(</div>
<div class="line"><span class="lineno">  270</span>            CommandManager::instance()-&gt;getKeyFromId(MI_ClonePreview)));</div>
<div class="line"><span class="lineno">  271</span>        connect(action, SIGNAL(triggered()), m_flipbook, SLOT(clonePreview()));</div>
<div class="line"><span class="lineno">  272</span>      }</div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>      <span class="keywordflow">if</span> (m_flipbook-&gt;isFreezed()) {</div>
<div class="line"><span class="lineno">  275</span>        action = menu-&gt;addAction(tr(<span class="stringliteral">&quot;Unfreeze Preview&quot;</span>));</div>
<div class="line"><span class="lineno">  276</span>        action-&gt;setShortcut(QKeySequence(</div>
<div class="line"><span class="lineno">  277</span>            CommandManager::instance()-&gt;getKeyFromId(MI_FreezePreview)));</div>
<div class="line"><span class="lineno">  278</span>        connect(action, SIGNAL(triggered()), m_flipbook,</div>
<div class="line"><span class="lineno">  279</span>                SLOT(unfreezePreview()));</div>
<div class="line"><span class="lineno">  280</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  281</span>        action = menu-&gt;addAction(tr(<span class="stringliteral">&quot;Freeze Preview&quot;</span>));</div>
<div class="line"><span class="lineno">  282</span>        action-&gt;setShortcut(QKeySequence(</div>
<div class="line"><span class="lineno">  283</span>            CommandManager::instance()-&gt;getKeyFromId(MI_FreezePreview)));</div>
<div class="line"><span class="lineno">  284</span>        connect(action, SIGNAL(triggered()), m_flipbook, SLOT(freezePreview()));</div>
<div class="line"><span class="lineno">  285</span>      }</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>      action = menu-&gt;addAction(tr(<span class="stringliteral">&quot;Regenerate Preview&quot;</span>));</div>
<div class="line"><span class="lineno">  288</span>      action-&gt;setShortcut(QKeySequence(</div>
<div class="line"><span class="lineno">  289</span>          CommandManager::instance()-&gt;getKeyFromId(MI_RegeneratePreview)));</div>
<div class="line"><span class="lineno">  290</span>      connect(action, SIGNAL(triggered()), m_flipbook, SLOT(regenerate()));</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span>      action = menu-&gt;addAction(tr(<span class="stringliteral">&quot;Regenerate Frame Preview&quot;</span>));</div>
<div class="line"><span class="lineno">  293</span>      action-&gt;setShortcut(QKeySequence(</div>
<div class="line"><span class="lineno">  294</span>          CommandManager::instance()-&gt;getKeyFromId(MI_RegenerateFramePr)));</div>
<div class="line"><span class="lineno">  295</span>      connect(action, SIGNAL(triggered()), m_flipbook, SLOT(regenerateFrame()));</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>      menu-&gt;addSeparator();</div>
<div class="line"><span class="lineno">  298</span>    }</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>    action = menu-&gt;addAction(tr(<span class="stringliteral">&quot;Load / Append Images&quot;</span>));</div>
<div class="line"><span class="lineno">  301</span>    connect(action, SIGNAL(triggered()), m_flipbook, SLOT(loadImages()));</div>
<div class="line"><span class="lineno">  302</span> </div>
<div class="line"><span class="lineno">  303</span>    <span class="comment">// history of the loaded paths of flipbook</span></div>
<div class="line"><span class="lineno">  304</span>    action = CommandManager::instance()-&gt;getAction(MI_LoadRecentImage);</div>
<div class="line"><span class="lineno">  305</span>    menu-&gt;addAction(action);</div>
<div class="line"><span class="lineno">  306</span>    action-&gt;setParent(m_flipbook);</div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span>    menu-&gt;addSeparator();</div>
<div class="line"><span class="lineno">  309</span>  }</div>
<div class="line"><span class="lineno">  310</span> </div>
<div class="line"><span class="lineno">  311</span>  QAction *reset = menu-&gt;addAction(tr(<span class="stringliteral">&quot;Reset View&quot;</span>));</div>
<div class="line"><span class="lineno">  312</span>  reset-&gt;setShortcut(</div>
<div class="line"><span class="lineno">  313</span>      QKeySequence(CommandManager::instance()-&gt;getKeyFromId(V_ViewReset)));</div>
<div class="line"><span class="lineno">  314</span>  connect(reset, SIGNAL(triggered()), SLOT(resetView()));</div>
<div class="line"><span class="lineno">  315</span> </div>
<div class="line"><span class="lineno">  316</span>  QAction *fit = menu-&gt;addAction(tr(<span class="stringliteral">&quot;Fit To Window&quot;</span>));</div>
<div class="line"><span class="lineno">  317</span>  fit-&gt;setShortcut(</div>
<div class="line"><span class="lineno">  318</span>      QKeySequence(CommandManager::instance()-&gt;getKeyFromId(V_ZoomFit)));</div>
<div class="line"><span class="lineno">  319</span>  connect(fit, SIGNAL(triggered()), SLOT(fitView()));</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span>  <span class="keywordflow">if</span> (m_flipbook) {</div>
<div class="line"><span class="lineno">  322</span><span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><span class="lineno">  323</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="class_image_utils_1_1_full_screen_widget.html">ImageUtils::FullScreenWidget</a> *fsWidget =</div>
<div class="line"><span class="lineno">  324</span>            <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_image_utils_1_1_full_screen_widget.html">ImageUtils::FullScreenWidget</a> *<span class="keyword">&gt;</span>(parentWidget())) {</div>
<div class="line"><span class="lineno">  325</span>      <span class="keywordtype">bool</span> isFullScreen = (fsWidget-&gt;windowState() &amp; Qt::WindowFullScreen) != 0;</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>      action = menu-&gt;addAction(isFullScreen ? tr(<span class="stringliteral">&quot;Exit Full Screen Mode&quot;</span>)</div>
<div class="line"><span class="lineno">  328</span>                                            : tr(<span class="stringliteral">&quot;Full Screen Mode&quot;</span>));</div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span>      action-&gt;setShortcut(QKeySequence(</div>
<div class="line"><span class="lineno">  331</span>          CommandManager::instance()-&gt;getKeyFromId(V_ShowHideFullScreen)));</div>
<div class="line"><span class="lineno">  332</span>      connect(action, SIGNAL(triggered()), fsWidget, SLOT(toggleFullScreen()));</div>
<div class="line"><span class="lineno">  333</span>    }</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  336</span> </div>
<div class="line"><span class="lineno">  337</span>    <span class="keywordtype">bool</span> addedSep = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span>    <span class="keywordflow">if</span> (m_isHistogramEnable &amp;&amp;</div>
<div class="line"><span class="lineno">  340</span>        visibleRegion().contains(event-&gt;pos() * getDevPixRatio())) {</div>
<div class="line"><span class="lineno">  341</span>      menu-&gt;addSeparator();</div>
<div class="line"><span class="lineno">  342</span>      addedSep = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  343</span>      action   = menu-&gt;addAction(tr(<span class="stringliteral">&quot;Show Histogram&quot;</span>));</div>
<div class="line"><span class="lineno">  344</span>      connect(action, SIGNAL(triggered()), SLOT(showHistogram()));</div>
<div class="line"><span class="lineno">  345</span>    }</div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>    <span class="keywordflow">if</span> (m_visualSettings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#af46b586bd61bf70e606713bee68c3aad">m_doCompare</a>) {</div>
<div class="line"><span class="lineno">  348</span>      <span class="keywordflow">if</span> (!addedSep) {</div>
<div class="line"><span class="lineno">  349</span>        menu-&gt;addSeparator();</div>
<div class="line"><span class="lineno">  350</span>        addedSep = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  351</span>      }</div>
<div class="line"><span class="lineno">  352</span>      action = menu-&gt;addAction(tr(<span class="stringliteral">&quot;Swap Compared Images&quot;</span>));</div>
<div class="line"><span class="lineno">  353</span>      connect(action, SIGNAL(triggered()), SLOT(swapCompared()));</div>
<div class="line"><span class="lineno">  354</span>    }</div>
<div class="line"><span class="lineno">  355</span> </div>
<div class="line"><span class="lineno">  356</span>    <span class="keywordflow">if</span> (m_flipbook-&gt;isSavable()) {</div>
<div class="line"><span class="lineno">  357</span>      <span class="keywordflow">if</span> (!addedSep) menu-&gt;addSeparator();</div>
<div class="line"><span class="lineno">  358</span>      action = menu-&gt;addAction(tr(<span class="stringliteral">&quot;Save Images&quot;</span>));</div>
<div class="line"><span class="lineno">  359</span>      connect(action, SIGNAL(triggered()), m_flipbook, SLOT(saveImages()));</div>
<div class="line"><span class="lineno">  360</span>    }</div>
<div class="line"><span class="lineno">  361</span>  }</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span>  menu-&gt;exec(event-&gt;globalPos());</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>  <span class="keywordflow">if</span> (m_flipbook) {</div>
<div class="line"><span class="lineno">  366</span>    action = CommandManager::instance()-&gt;getAction(MI_LoadRecentImage);</div>
<div class="line"><span class="lineno">  367</span>    action-&gt;setParent(0);</div>
<div class="line"><span class="lineno">  368</span>  }</div>
<div class="line"><span class="lineno">  369</span> </div>
<div class="line"><span class="lineno">  370</span>  <span class="keyword">delete</span> menu;</div>
<div class="line"><span class="lineno">  371</span>  update();</div>
<div class="line"><span class="lineno">  372</span>}</div>
<div class="ttc" id="aclass_image_painter_1_1_visual_settings_html_af46b586bd61bf70e606713bee68c3aad"><div class="ttname"><a href="class_image_painter_1_1_visual_settings.html#af46b586bd61bf70e606713bee68c3aad">ImagePainter::VisualSettings::m_doCompare</a></div><div class="ttdeci">bool m_doCompare</div><div class="ttdoc">Whether must compare between two images.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:58</div></div>
<div class="ttc" id="aclass_image_utils_1_1_full_screen_widget_html"><div class="ttname"><a href="class_image_utils_1_1_full_screen_widget.html">ImageUtils::FullScreenWidget</a></div><div class="ttdoc">Temporary class used to deal with QTBUG #7556 - QGLWidgets going fullscreen need a containing widget ...</div><div class="ttdef"><b>Definition:</b> imageutils.h:160</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a406dda31710bdc8b6fad7c95312cffff" name="a406dda31710bdc8b6fad7c95312cffff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a406dda31710bdc8b6fad7c95312cffff">&#9670;&nbsp;</a></span>doSwapBuffers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::doSwapBuffers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1401</span>{ glFlush(); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d19df8eb374f916b259213729b34dbd" name="a6d19df8eb374f916b259213729b34dbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d19df8eb374f916b259213729b34dbd">&#9670;&nbsp;</a></span>dragCompare()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::dragCompare </td>
          <td>(</td>
          <td class="paramtype">const QPoint &amp;&#160;</td>
          <td class="paramname"><em>dp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  737</span>                                              {</div>
<div class="line"><span class="lineno">  738</span>  <span class="keywordflow">if</span> (m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a5c7c87c21fafb25dc1ba31ac6574397f">m_dragCompareX</a>)</div>
<div class="line"><span class="lineno">  739</span>    m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#ac544bac665ef86ee2ef3cfc214e89430">m_compareX</a> += ((double)dp.x()) / width();</div>
<div class="line"><span class="lineno">  740</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a3458a525867577308cefaf2d33f6639b">m_dragCompareY</a>)</div>
<div class="line"><span class="lineno">  741</span>    m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#aef7ad2a36c8fe81f397f225df3fc1095">m_compareY</a> -= ((double)dp.y()) / height();</div>
<div class="line"><span class="lineno">  742</span> </div>
<div class="line"><span class="lineno">  743</span>  m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#ac544bac665ef86ee2ef3cfc214e89430">m_compareX</a> = tcrop(m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#ac544bac665ef86ee2ef3cfc214e89430">m_compareX</a>, 0.0, 1.0);</div>
<div class="line"><span class="lineno">  744</span>  m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#aef7ad2a36c8fe81f397f225df3fc1095">m_compareY</a> = tcrop(m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#aef7ad2a36c8fe81f397f225df3fc1095">m_compareY</a>, 0.0, 1.0);</div>
<div class="line"><span class="lineno">  745</span> </div>
<div class="line"><span class="lineno">  746</span>  update();</div>
<div class="line"><span class="lineno">  747</span>}</div>
<div class="ttc" id="aclass_image_painter_1_1_compare_settings_html_a3458a525867577308cefaf2d33f6639b"><div class="ttname"><a href="class_image_painter_1_1_compare_settings.html#a3458a525867577308cefaf2d33f6639b">ImagePainter::CompareSettings::m_dragCompareY</a></div><div class="ttdeci">bool m_dragCompareY</div><div class="ttdoc">Used to change compared image height.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:91</div></div>
<div class="ttc" id="aclass_image_painter_1_1_compare_settings_html_a5c7c87c21fafb25dc1ba31ac6574397f"><div class="ttname"><a href="class_image_painter_1_1_compare_settings.html#a5c7c87c21fafb25dc1ba31ac6574397f">ImagePainter::CompareSettings::m_dragCompareX</a></div><div class="ttdeci">bool m_dragCompareX</div><div class="ttdoc">Used to change compared image width.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:89</div></div>
<div class="ttc" id="aclass_image_painter_1_1_compare_settings_html_ac544bac665ef86ee2ef3cfc214e89430"><div class="ttname"><a href="class_image_painter_1_1_compare_settings.html#ac544bac665ef86ee2ef3cfc214e89430">ImagePainter::CompareSettings::m_compareX</a></div><div class="ttdeci">double m_compareX</div><div class="ttdoc">Used to set compared image width.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:84</div></div>
<div class="ttc" id="aclass_image_painter_1_1_compare_settings_html_aef7ad2a36c8fe81f397f225df3fc1095"><div class="ttname"><a href="class_image_painter_1_1_compare_settings.html#aef7ad2a36c8fe81f397f225df3fc1095">ImagePainter::CompareSettings::m_compareY</a></div><div class="ttdeci">double m_compareY</div><div class="ttdoc">Used to set compared image height.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:86</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2aabe840fa48d58f2f480f9d0ab493f4" name="a2aabe840fa48d58f2f480f9d0ab493f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2aabe840fa48d58f2f480f9d0ab493f4">&#9670;&nbsp;</a></span>event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ImageViewer::event </td>
          <td>(</td>
          <td class="paramtype">QEvent *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1582</span>                                 {</div>
<div class="line"><span class="lineno"> 1583</span>  <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1584</span><span class="comment">  switch (e-&gt;type()) {</span></div>
<div class="line"><span class="lineno"> 1585</span><span class="comment">  case QEvent::TabletPress: {</span></div>
<div class="line"><span class="lineno"> 1586</span><span class="comment">  QTabletEvent *te = static_cast&lt;QTabletEvent *&gt;(e);</span></div>
<div class="line"><span class="lineno"> 1587</span><span class="comment">  qDebug() &lt;&lt; &quot;[event] TabletPress: pointerType(&quot; &lt;&lt; te-&gt;pointerType()</span></div>
<div class="line"><span class="lineno"> 1588</span><span class="comment">  &lt;&lt; &quot;) device(&quot; &lt;&lt; te-&gt;device() &lt;&lt; &quot;)&quot;;</span></div>
<div class="line"><span class="lineno"> 1589</span><span class="comment">  } break;</span></div>
<div class="line"><span class="lineno"> 1590</span><span class="comment">  case QEvent::TabletRelease:</span></div>
<div class="line"><span class="lineno"> 1591</span><span class="comment">  qDebug() &lt;&lt; &quot;[event] TabletRelease&quot;;</span></div>
<div class="line"><span class="lineno"> 1592</span><span class="comment">  break;</span></div>
<div class="line"><span class="lineno"> 1593</span><span class="comment">  case QEvent::TouchBegin:</span></div>
<div class="line"><span class="lineno"> 1594</span><span class="comment">  qDebug() &lt;&lt; &quot;[event] TouchBegin&quot;;</span></div>
<div class="line"><span class="lineno"> 1595</span><span class="comment">  break;</span></div>
<div class="line"><span class="lineno"> 1596</span><span class="comment">  case QEvent::TouchEnd:</span></div>
<div class="line"><span class="lineno"> 1597</span><span class="comment">  qDebug() &lt;&lt; &quot;[event] TouchEnd&quot;;</span></div>
<div class="line"><span class="lineno"> 1598</span><span class="comment">  break;</span></div>
<div class="line"><span class="lineno"> 1599</span><span class="comment">  case QEvent::TouchCancel:</span></div>
<div class="line"><span class="lineno"> 1600</span><span class="comment">  qDebug() &lt;&lt; &quot;[event] TouchCancel&quot;;</span></div>
<div class="line"><span class="lineno"> 1601</span><span class="comment">  break;</span></div>
<div class="line"><span class="lineno"> 1602</span><span class="comment">  case QEvent::MouseButtonPress:</span></div>
<div class="line"><span class="lineno"> 1603</span><span class="comment">  qDebug() &lt;&lt; &quot;[event] MouseButtonPress&quot;;</span></div>
<div class="line"><span class="lineno"> 1604</span><span class="comment">  break;</span></div>
<div class="line"><span class="lineno"> 1605</span><span class="comment">  case QEvent::MouseButtonDblClick:</span></div>
<div class="line"><span class="lineno"> 1606</span><span class="comment">  qDebug() &lt;&lt; &quot;[event] MouseButtonDblClick&quot;;</span></div>
<div class="line"><span class="lineno"> 1607</span><span class="comment">  break;</span></div>
<div class="line"><span class="lineno"> 1608</span><span class="comment">  case QEvent::MouseButtonRelease:</span></div>
<div class="line"><span class="lineno"> 1609</span><span class="comment">  qDebug() &lt;&lt; &quot;[event] MouseButtonRelease&quot;;</span></div>
<div class="line"><span class="lineno"> 1610</span><span class="comment">  break;</span></div>
<div class="line"><span class="lineno"> 1611</span><span class="comment">  case QEvent::Gesture:</span></div>
<div class="line"><span class="lineno"> 1612</span><span class="comment">  qDebug() &lt;&lt; &quot;[event] Gesture&quot;;</span></div>
<div class="line"><span class="lineno"> 1613</span><span class="comment">  break;</span></div>
<div class="line"><span class="lineno"> 1614</span><span class="comment">  default:</span></div>
<div class="line"><span class="lineno"> 1615</span><span class="comment">  break;</span></div>
<div class="line"><span class="lineno"> 1616</span><span class="comment">  }</span></div>
<div class="line"><span class="lineno"> 1617</span><span class="comment">  */</span></div>
<div class="line"><span class="lineno"> 1618</span> </div>
<div class="line"><span class="lineno"> 1619</span>  <span class="keywordflow">if</span> (e-&gt;type() == QEvent::Gesture &amp;&amp; CommandManager::instance()</div>
<div class="line"><span class="lineno"> 1620</span>                                          -&gt;getAction(MI_TouchGestureControl)</div>
<div class="line"><span class="lineno"> 1621</span>                                          -&gt;isChecked()) {</div>
<div class="line"><span class="lineno"> 1622</span>    gestureEvent(<span class="keyword">static_cast&lt;</span>QGestureEvent *<span class="keyword">&gt;</span>(e));</div>
<div class="line"><span class="lineno"> 1623</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1624</span>  }</div>
<div class="line"><span class="lineno"> 1625</span>  <span class="keywordflow">if</span> ((e-&gt;type() == QEvent::TouchBegin || e-&gt;type() == QEvent::TouchEnd ||</div>
<div class="line"><span class="lineno"> 1626</span>       e-&gt;type() == QEvent::TouchCancel || e-&gt;type() == QEvent::TouchUpdate) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1627</span>      CommandManager::instance()</div>
<div class="line"><span class="lineno"> 1628</span>          -&gt;getAction(MI_TouchGestureControl)</div>
<div class="line"><span class="lineno"> 1629</span>          -&gt;isChecked()) {</div>
<div class="line"><span class="lineno"> 1630</span>    touchEvent(<span class="keyword">static_cast&lt;</span>QTouchEvent *<span class="keyword">&gt;</span>(e), e-&gt;type());</div>
<div class="line"><span class="lineno"> 1631</span>    m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1632</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1633</span>  }</div>
<div class="line"><span class="lineno"> 1634</span>  <span class="keywordflow">return</span> GLWidgetForHighDpi::event(e);</div>
<div class="line"><span class="lineno"> 1635</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8acb0c934a9dc97be7f456e2ea4e8e74" name="a8acb0c934a9dc97be7f456e2ea4e8e74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8acb0c934a9dc97be7f456e2ea4e8e74">&#9670;&nbsp;</a></span>fitView</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::fitView </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1319</span>                          {</div>
<div class="line"><span class="lineno"> 1320</span>  <span class="keywordflow">if</span> (!m_image) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1321</span>  <a class="code hl_class" href="class_t_rect_t.html">TRect</a> imgBounds(getImageBounds(m_image));</div>
<div class="line"><span class="lineno"> 1322</span>  <a class="code hl_function" href="class_image_viewer.html#aaad0ef7fa1fb0ed91e36026e5e520e6d">adaptView</a>(imgBounds, imgBounds);</div>
<div class="line"><span class="lineno"> 1323</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aba700519a34c72294def6f5137b198c8" name="aba700519a34c72294def6f5137b198c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba700519a34c72294def6f5137b198c8">&#9670;&nbsp;</a></span>gestureEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::gestureEvent </td>
          <td>(</td>
          <td class="paramtype">QGestureEvent *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1479</span>                                               {</div>
<div class="line"><span class="lineno"> 1480</span>  <span class="comment">// qDebug() &lt;&lt; &quot;[gestureEvent]&quot;;</span></div>
<div class="line"><span class="lineno"> 1481</span>  m_gestureActive = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1482</span>  <span class="keywordflow">if</span> (QGesture *swipe = e-&gt;gesture(Qt::SwipeGesture)) {</div>
<div class="line"><span class="lineno"> 1483</span>    m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1484</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (QGesture *pan = e-&gt;gesture(Qt::PanGesture)) {</div>
<div class="line"><span class="lineno"> 1485</span>    m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1486</span>  }</div>
<div class="line"><span class="lineno"> 1487</span>  <span class="keywordflow">if</span> (QGesture *pinch = e-&gt;gesture(Qt::PinchGesture)) {</div>
<div class="line"><span class="lineno"> 1488</span>    QPinchGesture *gesture = <span class="keyword">static_cast&lt;</span>QPinchGesture *<span class="keyword">&gt;</span>(pinch);</div>
<div class="line"><span class="lineno"> 1489</span>    QPinchGesture::ChangeFlags changeFlags = gesture-&gt;changeFlags();</div>
<div class="line"><span class="lineno"> 1490</span>    QPoint firstCenter                     = gesture-&gt;centerPoint().toPoint();</div>
<div class="line"><span class="lineno"> 1491</span>    <span class="keywordflow">if</span> (m_touchDevice == QTouchDevice::TouchScreen)</div>
<div class="line"><span class="lineno"> 1492</span>      firstCenter = mapFromGlobal(firstCenter);</div>
<div class="line"><span class="lineno"> 1493</span> </div>
<div class="line"><span class="lineno"> 1494</span>    <span class="keywordflow">if</span> (gesture-&gt;state() == Qt::GestureStarted) {</div>
<div class="line"><span class="lineno"> 1495</span>      m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1496</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (gesture-&gt;state() == Qt::GestureFinished) {</div>
<div class="line"><span class="lineno"> 1497</span>      m_gestureActive = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1498</span>      m_zooming       = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1499</span>      m_scaleFactor   = 0.0;</div>
<div class="line"><span class="lineno"> 1500</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1501</span>      <span class="keywordflow">if</span> (changeFlags &amp; QPinchGesture::ScaleFactorChanged) {</div>
<div class="line"><span class="lineno"> 1502</span>        <span class="keywordtype">double</span> scaleFactor = gesture-&gt;scaleFactor();</div>
<div class="line"><span class="lineno"> 1503</span>        <span class="comment">// the scale factor makes for too sensitive scaling</span></div>
<div class="line"><span class="lineno"> 1504</span>        <span class="comment">// divide the change in half</span></div>
<div class="line"><span class="lineno"> 1505</span>        <span class="keywordflow">if</span> (scaleFactor &gt; 1) {</div>
<div class="line"><span class="lineno"> 1506</span>          <span class="keywordtype">double</span> decimalValue = scaleFactor - 1;</div>
<div class="line"><span class="lineno"> 1507</span>          decimalValue /= 1.5;</div>
<div class="line"><span class="lineno"> 1508</span>          scaleFactor = 1 + decimalValue;</div>
<div class="line"><span class="lineno"> 1509</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (scaleFactor &lt; 1) {</div>
<div class="line"><span class="lineno"> 1510</span>          <span class="keywordtype">double</span> decimalValue = 1 - scaleFactor;</div>
<div class="line"><span class="lineno"> 1511</span>          decimalValue /= 1.5;</div>
<div class="line"><span class="lineno"> 1512</span>          scaleFactor = 1 - decimalValue;</div>
<div class="line"><span class="lineno"> 1513</span>        }</div>
<div class="line"><span class="lineno"> 1514</span>        <span class="keywordflow">if</span> (!m_zooming) {</div>
<div class="line"><span class="lineno"> 1515</span>          <span class="keywordtype">double</span> delta = scaleFactor - 1;</div>
<div class="line"><span class="lineno"> 1516</span>          m_scaleFactor += delta;</div>
<div class="line"><span class="lineno"> 1517</span>          <span class="keywordflow">if</span> (m_scaleFactor &gt; .2 || m_scaleFactor &lt; -.2) {</div>
<div class="line"><span class="lineno"> 1518</span>            m_zooming = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1519</span>          }</div>
<div class="line"><span class="lineno"> 1520</span>        }</div>
<div class="line"><span class="lineno"> 1521</span>        <span class="keywordflow">if</span> (m_zooming) {</div>
<div class="line"><span class="lineno"> 1522</span>          <span class="keyword">const</span> QPoint center(</div>
<div class="line"><span class="lineno"> 1523</span>              firstCenter.x() * getDevPixRatio() - width() / 2,</div>
<div class="line"><span class="lineno"> 1524</span>              -firstCenter.y() * getDevPixRatio() + height() / 2);</div>
<div class="line"><span class="lineno"> 1525</span>          zoomQt(center, scaleFactor);</div>
<div class="line"><span class="lineno"> 1526</span>          m_panning = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1527</span>        }</div>
<div class="line"><span class="lineno"> 1528</span>        m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1529</span>      }</div>
<div class="line"><span class="lineno"> 1530</span> </div>
<div class="line"><span class="lineno"> 1531</span>      <span class="keywordflow">if</span> (changeFlags &amp; QPinchGesture::CenterPointChanged) {</div>
<div class="line"><span class="lineno"> 1532</span>        QPointF centerDelta = (gesture-&gt;centerPoint() * getDevPixRatio()) -</div>
<div class="line"><span class="lineno"> 1533</span>                              (gesture-&gt;lastCenterPoint() * getDevPixRatio());</div>
<div class="line"><span class="lineno"> 1534</span>        <span class="keywordflow">if</span> (centerDelta.manhattanLength() &gt; 1) {</div>
<div class="line"><span class="lineno"> 1535</span>          <span class="comment">// panQt(centerDelta.toPoint());</span></div>
<div class="line"><span class="lineno"> 1536</span>        }</div>
<div class="line"><span class="lineno"> 1537</span>        m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1538</span>      }</div>
<div class="line"><span class="lineno"> 1539</span>    }</div>
<div class="line"><span class="lineno"> 1540</span>  }</div>
<div class="line"><span class="lineno"> 1541</span>  e-&gt;accept();</div>
<div class="line"><span class="lineno"> 1542</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af80b9641df537a1bf3b0c98f2c431420" name="af80b9641df537a1bf3b0c98f2c431420"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af80b9641df537a1bf3b0c98f2c431420">&#9670;&nbsp;</a></span>getImage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_smart_pointer_t.html">TImageP</a> ImageViewer::getImage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Return current image viewer. </p>
<div class="fragment"><div class="line"><span class="lineno">  108</span>{ <span class="keywordflow">return</span> m_image; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00287">ColorModelViewer::pick()</a>.</p>

</div>
</div>
<a id="a60f9f5a22c83e6f2f15b4e7a224047d3" name="a60f9f5a22c83e6f2f15b4e7a224047d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60f9f5a22c83e6f2f15b4e7a224047d3">&#9670;&nbsp;</a></span>getImgToWidgetAffine() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_affine.html">TAffine</a> ImageViewer::getImgToWidgetAffine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1337</span>                                                {</div>
<div class="line"><span class="lineno"> 1338</span>  assert(m_image);</div>
<div class="line"><span class="lineno"> 1339</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="class_image_viewer.html#a5f412d451a497d7c346c04c89d3c8865">getImgToWidgetAffine</a>(getImageBoundsD(m_image));</div>
<div class="line"><span class="lineno"> 1340</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5f412d451a497d7c346c04c89d3c8865" name="a5f412d451a497d7c346c04c89d3c8865"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f412d451a497d7c346c04c89d3c8865">&#9670;&nbsp;</a></span>getImgToWidgetAffine() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_affine.html">TAffine</a> ImageViewer::getImgToWidgetAffine </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_rect_t.html">TRectD</a> &amp;&#160;</td>
          <td class="paramname"><em>imgBounds</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the affine transform from image reference to widget's pixel one. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1345</span>                                                                  {</div>
<div class="line"><span class="lineno"> 1346</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> geomCenter((geom.x0 + geom.x1) * 0.5, (geom.y0 + geom.y1) * 0.5);</div>
<div class="line"><span class="lineno"> 1347</span> </div>
<div class="line"><span class="lineno"> 1348</span>  QRect widGeom(rect());</div>
<div class="line"><span class="lineno"> 1349</span> </div>
<div class="line"><span class="lineno"> 1350</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> viewerCenter((widGeom.left() + widGeom.right() + 1) * 0.5,</div>
<div class="line"><span class="lineno"> 1351</span>                       (widGeom.top() + widGeom.bottom() + 1) * 0.5);</div>
<div class="line"><span class="lineno"> 1352</span> </div>
<div class="line"><span class="lineno"> 1353</span>  <span class="keywordflow">return</span> <a class="code hl_class" href="class_t_affine.html">TAffine</a>(<a class="code hl_class" href="class_t_affine.html">TAffine</a>(1.0, 0.0, 0.0, 0.0, -1.0, height()) *</div>
<div class="line"><span class="lineno"> 1354</span>                 <a class="code hl_class" href="class_t_translation.html">TTranslation</a>(viewerCenter) * m_viewAff *</div>
<div class="line"><span class="lineno"> 1355</span>                 <a class="code hl_class" href="class_t_translation.html">TTranslation</a>(-geomCenter));</div>
<div class="line"><span class="lineno"> 1356</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01345">getImgToWidgetAffine()</a>, and <a class="el" href="#l00557">TRectT&lt; T &gt;::x0</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l01968">FlipBook::adaptGeometryForFullPreview()</a>, <a class="el" href="#l01384">adaptView()</a>, and <a class="el" href="#l01345">getImgToWidgetAffine()</a>.</p>

</div>
</div>
<a id="ad3ae5a695b9e5ec53364d657d6f51e07" name="ad3ae5a695b9e5ec53364d657d6f51e07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3ae5a695b9e5ec53364d657d6f51e07">&#9670;&nbsp;</a></span>getViewAff()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_affine.html">TAffine</a> ImageViewer::getViewAff </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Return current viewer matrix transformation. </p>
<div class="fragment"><div class="line"><span class="lineno">  110</span>{ <span class="keywordflow">return</span> m_viewAff; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l01996">FlipBook::adaptWidGeometry()</a>, and <a class="el" href="#l00287">ColorModelViewer::pick()</a>.</p>

</div>
</div>
<a id="a50d7077526fd7d10817a460fc98a1458" name="a50d7077526fd7d10817a460fc98a1458"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50d7077526fd7d10817a460fc98a1458">&#9670;&nbsp;</a></span>hideEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::hideEvent </td>
          <td>(</td>
          <td class="paramtype">QHideEvent *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  817</span>                                        {</div>
<div class="line"><span class="lineno">  818</span>  <a class="code hl_class" href="class_t_scene_handle.html">TSceneHandle</a> *sceneHandle = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>();</div>
<div class="line"><span class="lineno">  819</span>  <span class="keywordflow">if</span> (sceneHandle) sceneHandle-&gt;disconnect(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  820</span>}</div>
<div class="ttc" id="aclass_t_scene_handle_html"><div class="ttname"><a href="class_t_scene_handle.html">TSceneHandle</a></div><div class="ttdef"><b>Definition:</b> tscenehandle.h:28</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5510dd98281795f946aa0f9a0ec9a060" name="a5510dd98281795f946aa0f9a0ec9a060"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5510dd98281795f946aa0f9a0ec9a060">&#9670;&nbsp;</a></span>hideHistogram()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::hideHistogram </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >If histogram popup exist and is open, it is set to default and is hidden. </p>
<div class="fragment"><div class="line"><span class="lineno">  444</span>                                {</div>
<div class="line"><span class="lineno">  445</span>  <span class="keywordflow">if</span> (!m_isHistogramEnable) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  446</span>  m_histogramPopup-&gt;setImage(<a class="code hl_class" href="class_t_smart_pointer_t.html">TImageP</a>());</div>
<div class="line"><span class="lineno">  447</span>  <span class="keywordflow">if</span> (m_histogramPopup-&gt;isVisible()) {</div>
<div class="line"><span class="lineno">  448</span>    m_histogramPopup-&gt;hide();</div>
<div class="line"><span class="lineno">  449</span>    m_histogramPopup-&gt;setTitle(tr(<span class="stringliteral">&quot;Flipbook Histogram&quot;</span>));</div>
<div class="line"><span class="lineno">  450</span>  }</div>
<div class="line"><span class="lineno">  451</span>}</div>
<div class="ttc" id="aclass_t_smart_pointer_t_html"><div class="ttname"><a href="class_t_smart_pointer_t.html">TSmartPointerT&lt; TImage &gt;</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acf92fe62a79015b6b9948e1f724dbb6a" name="acf92fe62a79015b6b9948e1f724dbb6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf92fe62a79015b6b9948e1f724dbb6a">&#9670;&nbsp;</a></span>initializeGL()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::initializeGL </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  455</span>                               {</div>
<div class="line"><span class="lineno">  456</span>  initializeOpenGLFunctions();</div>
<div class="line"><span class="lineno">  457</span> </div>
<div class="line"><span class="lineno">  458</span>  <span class="comment">// to be computed once through the software</span></div>
<div class="line"><span class="lineno">  459</span>  <span class="keywordflow">if</span> (m_lutCalibrator &amp;&amp; !m_lutCalibrator-&gt;isInitialized()) {</div>
<div class="line"><span class="lineno">  460</span>    m_lutCalibrator-&gt;initialize();</div>
<div class="line"><span class="lineno">  461</span>    connect(context(), SIGNAL(aboutToBeDestroyed()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno">  462</span>            SLOT(onContextAboutToBeDestroyed()));</div>
<div class="line"><span class="lineno">  463</span>  }</div>
<div class="line"><span class="lineno">  464</span> </div>
<div class="line"><span class="lineno">  465</span>  <span class="comment">// glClearColor(1.0,1.0,1.0,1);</span></div>
<div class="line"><span class="lineno">  466</span>  glClear(GL_COLOR_BUFFER_BIT);</div>
<div class="line"><span class="lineno">  467</span> </div>
<div class="line"><span class="lineno">  468</span>  <span class="keywordflow">if</span> (m_firstInitialized)</div>
<div class="line"><span class="lineno">  469</span>    m_firstInitialized = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  470</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  471</span>    resizeGL(width(), height());</div>
<div class="line"><span class="lineno">  472</span>    update();</div>
<div class="line"><span class="lineno">  473</span>  }</div>
<div class="line"><span class="lineno">  474</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac52c145b068ed3527496a0045a911188" name="ac52c145b068ed3527496a0045a911188"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac52c145b068ed3527496a0045a911188">&#9670;&nbsp;</a></span>invalidateCompHisto()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::invalidateCompHisto </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1410</span>                                      {</div>
<div class="line"><span class="lineno"> 1411</span>  <span class="keywordflow">if</span> (!m_isHistogramEnable || !m_histogramPopup) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1412</span>  m_histogramPopup-&gt;invalidateCompHisto();</div>
<div class="line"><span class="lineno"> 1413</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afc21f7d424db53f0b81a03e2c7fed524" name="afc21f7d424db53f0b81a03e2c7fed524"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc21f7d424db53f0b81a03e2c7fed524">&#9670;&nbsp;</a></span>isColorModel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ImageViewer::isColorModel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  103</span>{ <span class="keywordflow">return</span> m_isColorModel; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="adddffa737d898a47a37e6566b5f9bbf0" name="adddffa737d898a47a37e6566b5f9bbf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adddffa737d898a47a37e6566b5f9bbf0">&#9670;&nbsp;</a></span>isRemakingPreviewFx()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ImageViewer::isRemakingPreviewFx </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  131</span>{ <span class="keywordflow">return</span> m_isRemakingPreviewFx; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa0e59973f96d412a056f3dea158c76c8" name="aa0e59973f96d412a056f3dea158c76c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0e59973f96d412a056f3dea158c76c8">&#9670;&nbsp;</a></span>keyPressEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::keyPressEvent </td>
          <td>(</td>
          <td class="paramtype">QKeyEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1417</span>                                                {</div>
<div class="line"><span class="lineno"> 1418</span>  <span class="keywordflow">if</span> (FlipZoomer(<span class="keyword">this</span>).exec(event)) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1419</span> </div>
<div class="line"><span class="lineno"> 1420</span>  ImageViewerShortcutReceiver(m_flipbook).exec(event);</div>
<div class="line"><span class="lineno"> 1421</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5c9350c1cfbac2cd51a2c8cb2b61b5eb" name="a5c9350c1cfbac2cd51a2c8cb2b61b5eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c9350c1cfbac2cd51a2c8cb2b61b5eb">&#9670;&nbsp;</a></span>mouseDoubleClickEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::mouseDoubleClickEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1130</span>                                                          {</div>
<div class="line"><span class="lineno"> 1131</span>  <span class="keywordflow">if</span> (!m_image) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1132</span>  <span class="comment">// qDebug() &lt;&lt; &quot;[mouseDoubleClickEvent]&quot;;</span></div>
<div class="line"><span class="lineno"> 1133</span>  <span class="keywordflow">if</span> (m_gestureActive &amp;&amp; !m_stylusUsed) {</div>
<div class="line"><span class="lineno"> 1134</span>    m_gestureActive = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1135</span>    fitView();</div>
<div class="line"><span class="lineno"> 1136</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1137</span>  }</div>
<div class="line"><span class="lineno"> 1138</span> </div>
<div class="line"><span class="lineno"> 1139</span>  <span class="keywordflow">if</span> (m_visualSettings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#a9f828dd6214db63baf8c86d2b7c039ef">m_defineLoadbox</a> &amp;&amp; m_flipbook) {</div>
<div class="line"><span class="lineno"> 1140</span>    m_flipbook-&gt;setLoadbox(<a class="code hl_class" href="class_t_rect_t.html">TRect</a>());</div>
<div class="line"><span class="lineno"> 1141</span>    update();</div>
<div class="line"><span class="lineno"> 1142</span>    <span class="keyword">event</span>-&gt;ignore();</div>
<div class="line"><span class="lineno"> 1143</span>  }</div>
<div class="line"><span class="lineno"> 1144</span>}</div>
<div class="ttc" id="aclass_image_painter_1_1_visual_settings_html_a9f828dd6214db63baf8c86d2b7c039ef"><div class="ttname"><a href="class_image_painter_1_1_visual_settings.html#a9f828dd6214db63baf8c86d2b7c039ef">ImagePainter::VisualSettings::m_defineLoadbox</a></div><div class="ttdeci">bool m_defineLoadbox</div><div class="ttdoc">Flipbook-specific.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:59</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2b7cdb5e8e09f7090f47933a6008b9d2" name="a2b7cdb5e8e09f7090f47933a6008b9d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b7cdb5e8e09f7090f47933a6008b9d2">&#9670;&nbsp;</a></span>mouseMoveEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::mouseMoveEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >If middle button is pressed pan the image. Update current mouse position. </p>
<div class="fragment"><div class="line"><span class="lineno">  825</span>                                                   {</div>
<div class="line"><span class="lineno">  826</span>  <span class="keywordflow">if</span> (!m_image) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  827</span> </div>
<div class="line"><span class="lineno">  828</span>  <span class="keywordflow">if</span> (m_gestureActive &amp;&amp; m_touchDevice == QTouchDevice::TouchScreen &amp;&amp;</div>
<div class="line"><span class="lineno">  829</span>      !m_stylusUsed) {</div>
<div class="line"><span class="lineno">  830</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  831</span>  }</div>
<div class="line"><span class="lineno">  832</span> </div>
<div class="line"><span class="lineno">  833</span>  QPoint curQPos = <span class="keyword">event</span>-&gt;pos() * getDevPixRatio();</div>
<div class="line"><span class="lineno">  834</span> </div>
<div class="line"><span class="lineno">  835</span>  <a class="code hl_class" href="class_t_point_t.html">TPoint</a> curPos = <a class="code hl_class" href="class_t_point_t.html">TPoint</a>(curQPos.x(), curQPos.y());</div>
<div class="line"><span class="lineno">  836</span> </div>
<div class="line"><span class="lineno">  837</span>  <span class="keywordflow">if</span> (m_visualSettings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#a9f828dd6214db63baf8c86d2b7c039ef">m_defineLoadbox</a> &amp;&amp; m_flipbook) {</div>
<div class="line"><span class="lineno">  838</span>    <span class="keywordflow">if</span> (m_mouseButton == Qt::LeftButton)</div>
<div class="line"><span class="lineno">  839</span>      updateLoadbox(curPos);</div>
<div class="line"><span class="lineno">  840</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_mouseButton == Qt::MidButton)</div>
<div class="line"><span class="lineno">  841</span>      <a class="code hl_function" href="class_image_viewer.html#a574ebcd95b038e59de03f0bb6e6a9dd2">panQt</a>(curQPos - m_pos);</div>
<div class="line"><span class="lineno">  842</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  843</span>      updateCursor(curPos);</div>
<div class="line"><span class="lineno">  844</span>    update();</div>
<div class="line"><span class="lineno">  845</span>    <span class="keyword">event</span>-&gt;ignore();</div>
<div class="line"><span class="lineno">  846</span>    m_pos = curQPos;</div>
<div class="line"><span class="lineno">  847</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  848</span>  }</div>
<div class="line"><span class="lineno">  849</span> </div>
<div class="line"><span class="lineno">  850</span>  <span class="comment">// setting the cursors</span></div>
<div class="line"><span class="lineno">  851</span>  <span class="keywordflow">if</span> (!m_isColorModel) {</div>
<div class="line"><span class="lineno">  852</span>    <span class="comment">// when the histogram window is opened, switch to the RGB picker tool</span></div>
<div class="line"><span class="lineno">  853</span>    <span class="keywordflow">if</span> (m_isHistogramEnable &amp;&amp; m_histogramPopup-&gt;isVisible())</div>
<div class="line"><span class="lineno">  854</span>      setToolCursor(<span class="keyword">this</span>, ToolCursor::PickerRGB);</div>
<div class="line"><span class="lineno">  855</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  856</span>      setCursor(Qt::ArrowCursor);</div>
<div class="line"><span class="lineno">  857</span>  }</div>
<div class="line"><span class="lineno">  858</span> </div>
<div class="line"><span class="lineno">  859</span>  <span class="keywordflow">if</span> (m_visualSettings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#af46b586bd61bf70e606713bee68c3aad">m_doCompare</a> &amp;&amp; m_mouseButton == Qt::NoButton) {</div>
<div class="line"><span class="lineno">  860</span>    <span class="keywordflow">if</span> (fabs(curPos.x - width() * m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#ac544bac665ef86ee2ef3cfc214e89430">m_compareX</a>) &lt; 20)</div>
<div class="line"><span class="lineno">  861</span>      setToolCursor(<span class="keyword">this</span>, ToolCursor::ScaleHCursor);</div>
<div class="line"><span class="lineno">  862</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fabs((height() - curPos.y) -</div>
<div class="line"><span class="lineno">  863</span>                  height() * m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#aef7ad2a36c8fe81f397f225df3fc1095">m_compareY</a>) &lt; 20)</div>
<div class="line"><span class="lineno">  864</span>      setToolCursor(<span class="keyword">this</span>, ToolCursor::ScaleVCursor);</div>
<div class="line"><span class="lineno">  865</span>  }</div>
<div class="line"><span class="lineno">  866</span> </div>
<div class="line"><span class="lineno">  867</span>  <span class="keywordflow">if</span> (m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a5c7c87c21fafb25dc1ba31ac6574397f">m_dragCompareX</a> || m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a3458a525867577308cefaf2d33f6639b">m_dragCompareY</a>)</div>
<div class="line"><span class="lineno">  868</span>    dragCompare(curQPos - m_pos);</div>
<div class="line"><span class="lineno">  869</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_mouseButton == Qt::MidButton)</div>
<div class="line"><span class="lineno">  870</span>    <a class="code hl_function" href="class_image_viewer.html#a574ebcd95b038e59de03f0bb6e6a9dd2">panQt</a>(curQPos - m_pos);</div>
<div class="line"><span class="lineno">  871</span> </div>
<div class="line"><span class="lineno">  872</span>  m_pos = curQPos;</div>
<div class="line"><span class="lineno">  873</span> </div>
<div class="line"><span class="lineno">  874</span>  <span class="comment">// pick the color if the histogram popup is opened</span></div>
<div class="line"><span class="lineno">  875</span>  <span class="keywordflow">if</span> (m_isHistogramEnable &amp;&amp; m_histogramPopup-&gt;isVisible() &amp;&amp; !m_isColorModel) {</div>
<div class="line"><span class="lineno">  876</span>    <span class="comment">// Rect Pick</span></div>
<div class="line"><span class="lineno">  877</span>    <span class="keywordflow">if</span> (m_mouseButton == Qt::LeftButton &amp;&amp;</div>
<div class="line"><span class="lineno">  878</span>        (event-&gt;modifiers() &amp; Qt::ControlModifier)) {</div>
<div class="line"><span class="lineno">  879</span>      <span class="keywordflow">if</span> (!m_rectRGBPick &amp;&amp; !m_visualSettings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#a9f828dd6214db63baf8c86d2b7c039ef">m_defineLoadbox</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  880</span>          (abs(m_pos.x() - m_pressedMousePos.x) &gt; 10 ||</div>
<div class="line"><span class="lineno">  881</span>           abs(m_pos.y() - m_pressedMousePos.y) &gt; 10) &amp;&amp;</div>
<div class="line"><span class="lineno">  882</span>          !(m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a5c7c87c21fafb25dc1ba31ac6574397f">m_dragCompareX</a> ||</div>
<div class="line"><span class="lineno">  883</span>            m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a3458a525867577308cefaf2d33f6639b">m_dragCompareY</a>) &amp;&amp;</div>
<div class="line"><span class="lineno">  884</span>          m_flipbook)</div>
<div class="line"><span class="lineno">  885</span>        m_rectRGBPick = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  886</span> </div>
<div class="line"><span class="lineno">  887</span>      <span class="keywordflow">if</span> (m_rectRGBPick) {</div>
<div class="line"><span class="lineno">  888</span>        update();</div>
<div class="line"><span class="lineno">  889</span>        <span class="comment">// do not pick vector image while dragging as a portion of the red</span></div>
<div class="line"><span class="lineno">  890</span>        <span class="comment">// rubber band may affect the result</span></div>
<div class="line"><span class="lineno">  891</span>        <a class="code hl_class" href="class_t_smart_pointer_t.html">TImageP</a> img = getPickedImage(m_pos);</div>
<div class="line"><span class="lineno">  892</span>        <span class="keywordflow">if</span> (img &amp;&amp; img-&gt;<a class="code hl_function" href="class_t_image.html#acab19efe21f788a8016f0604c4c71912">raster</a>()) rectPickColor();</div>
<div class="line"><span class="lineno">  893</span>      }</div>
<div class="line"><span class="lineno">  894</span>    }</div>
<div class="line"><span class="lineno">  895</span> </div>
<div class="line"><span class="lineno">  896</span>    update();</div>
<div class="line"><span class="lineno">  897</span>    pickColor(event);</div>
<div class="line"><span class="lineno">  898</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  899</span>  }</div>
<div class="line"><span class="lineno">  900</span> </div>
<div class="line"><span class="lineno">  901</span>  <span class="keywordflow">if</span> (m_mouseButton == Qt::LeftButton &amp;&amp; !m_isColorModel &amp;&amp;</div>
<div class="line"><span class="lineno">  902</span>      (event-&gt;modifiers() &amp; Qt::AltModifier)) {</div>
<div class="line"><span class="lineno">  903</span>    <span class="keywordflow">if</span> (!m_draggingZoomSelection &amp;&amp; !m_visualSettings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#a9f828dd6214db63baf8c86d2b7c039ef">m_defineLoadbox</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  904</span>        (abs(m_pos.x() - m_pressedMousePos.x) &gt; 10 ||</div>
<div class="line"><span class="lineno">  905</span>         abs(m_pos.y() - m_pressedMousePos.y) &gt; 10) &amp;&amp;</div>
<div class="line"><span class="lineno">  906</span>        !(m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a5c7c87c21fafb25dc1ba31ac6574397f">m_dragCompareX</a> ||</div>
<div class="line"><span class="lineno">  907</span>          m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a3458a525867577308cefaf2d33f6639b">m_dragCompareY</a>) &amp;&amp;</div>
<div class="line"><span class="lineno">  908</span>        m_flipbook)</div>
<div class="line"><span class="lineno">  909</span>      m_draggingZoomSelection = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  910</span> </div>
<div class="line"><span class="lineno">  911</span>    <span class="keywordflow">if</span> (m_draggingZoomSelection) update();</div>
<div class="line"><span class="lineno">  912</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  913</span>    m_draggingZoomSelection = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  914</span> </div>
<div class="line"><span class="lineno">  915</span>  <span class="keywordflow">if</span> (m_isColorModel &amp;&amp; m_mouseButton == Qt::LeftButton) {</div>
<div class="line"><span class="lineno">  916</span>    <span class="keyword">event</span>-&gt;ignore();</div>
<div class="line"><span class="lineno">  917</span>  }</div>
<div class="line"><span class="lineno">  918</span>}</div>
<div class="ttc" id="aclass_image_viewer_html_a574ebcd95b038e59de03f0bb6e6a9dd2"><div class="ttname"><a href="class_image_viewer.html#a574ebcd95b038e59de03f0bb6e6a9dd2">ImageViewer::panQt</a></div><div class="ttdeci">void panQt(const QPoint &amp;delta)</div><div class="ttdef"><b>Definition:</b> imageviewer.cpp:666</div></div>
<div class="ttc" id="aclass_t_image_html_acab19efe21f788a8016f0604c4c71912"><div class="ttname"><a href="class_t_image.html#acab19efe21f788a8016f0604c4c71912">TImage::raster</a></div><div class="ttdeci">virtual TRasterP raster() const</div><div class="ttdef"><b>Definition:</b> timage.h:77</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00084">ImagePainter::CompareSettings::m_compareX</a>, <a class="el" href="#l00086">ImagePainter::CompareSettings::m_compareY</a>, <a class="el" href="#l00059">ImagePainter::VisualSettings::m_defineLoadbox</a>, <a class="el" href="#l00058">ImagePainter::VisualSettings::m_doCompare</a>, <a class="el" href="#l00089">ImagePainter::CompareSettings::m_dragCompareX</a>, <a class="el" href="#l00091">ImagePainter::CompareSettings::m_dragCompareY</a>, <a class="el" href="#l00666">panQt()</a>, and <a class="el" href="#l00077">TImage::raster()</a>.</p>

</div>
</div>
<a id="ae7372584cca321456fd2b29794e69c00" name="ae7372584cca321456fd2b29794e69c00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7372584cca321456fd2b29794e69c00">&#9670;&nbsp;</a></span>mousePressEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::mousePressEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1148</span>                                                    {</div>
<div class="line"><span class="lineno"> 1149</span>  <span class="keywordflow">if</span> (!m_image) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1150</span> </div>
<div class="line"><span class="lineno"> 1151</span>  <span class="comment">// qDebug() &lt;&lt; &quot;[mousePressEvent]&quot;;</span></div>
<div class="line"><span class="lineno"> 1152</span>  <span class="keywordflow">if</span> (m_gestureActive &amp;&amp; m_touchDevice == QTouchDevice::TouchScreen &amp;&amp;</div>
<div class="line"><span class="lineno"> 1153</span>      !m_stylusUsed) {</div>
<div class="line"><span class="lineno"> 1154</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1155</span>  }</div>
<div class="line"><span class="lineno"> 1156</span> </div>
<div class="line"><span class="lineno"> 1157</span>  m_pos                   = <span class="keyword">event</span>-&gt;pos() * getDevPixRatio();</div>
<div class="line"><span class="lineno"> 1158</span>  m_pressedMousePos       = <a class="code hl_class" href="class_t_point_t.html">TPoint</a>(m_pos.x(), m_pos.y());</div>
<div class="line"><span class="lineno"> 1159</span>  m_mouseButton           = <span class="keyword">event</span>-&gt;button();</div>
<div class="line"><span class="lineno"> 1160</span>  m_draggingZoomSelection = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1161</span> </div>
<div class="line"><span class="lineno"> 1162</span>  QPointF winPosMousePos = <span class="keyword">event</span>-&gt;windowPos() * getDevPixRatio() - m_pos;</div>
<div class="line"><span class="lineno"> 1163</span>  m_winPosMousePosOffset = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(winPosMousePos.x(), winPosMousePos.y());</div>
<div class="line"><span class="lineno"> 1164</span> </div>
<div class="line"><span class="lineno"> 1165</span>  <span class="keywordflow">if</span> (m_mouseButton != Qt::LeftButton) {</div>
<div class="line"><span class="lineno"> 1166</span>    <span class="keyword">event</span>-&gt;ignore();</div>
<div class="line"><span class="lineno"> 1167</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1168</span>  }</div>
<div class="line"><span class="lineno"> 1169</span>  <span class="keywordflow">if</span> (m_visualSettings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#a9f828dd6214db63baf8c86d2b7c039ef">m_defineLoadbox</a> &amp;&amp; m_flipbook)</div>
<div class="line"><span class="lineno"> 1170</span>    m_dragType = getDragType(</div>
<div class="line"><span class="lineno"> 1171</span>        m_pressedMousePos,</div>
<div class="line"><span class="lineno"> 1172</span>        convert(<a class="code hl_function" href="class_image_viewer.html#a5f412d451a497d7c346c04c89d3c8865">getImgToWidgetAffine</a>() * convert(m_flipbook-&gt;getLoadbox())));</div>
<div class="line"><span class="lineno"> 1173</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_visualSettings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#af46b586bd61bf70e606713bee68c3aad">m_doCompare</a>) {</div>
<div class="line"><span class="lineno"> 1174</span>    <span class="keywordflow">if</span> (fabs(m_pos.x() - width() * m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#ac544bac665ef86ee2ef3cfc214e89430">m_compareX</a>) &lt; 20) {</div>
<div class="line"><span class="lineno"> 1175</span>      m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a5c7c87c21fafb25dc1ba31ac6574397f">m_dragCompareX</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1176</span>      m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a3458a525867577308cefaf2d33f6639b">m_dragCompareY</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1177</span>      m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#aef7ad2a36c8fe81f397f225df3fc1095">m_compareY</a>     = ImagePainter::DefaultCompareValue;</div>
<div class="line"><span class="lineno"> 1178</span>      update();</div>
<div class="line"><span class="lineno"> 1179</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fabs((height() - m_pos.y()) -</div>
<div class="line"><span class="lineno"> 1180</span>                    height() * m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#aef7ad2a36c8fe81f397f225df3fc1095">m_compareY</a>) &lt; 20) {</div>
<div class="line"><span class="lineno"> 1181</span>      m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a3458a525867577308cefaf2d33f6639b">m_dragCompareY</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1182</span>      m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a5c7c87c21fafb25dc1ba31ac6574397f">m_dragCompareX</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1183</span>      m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#ac544bac665ef86ee2ef3cfc214e89430">m_compareX</a>     = ImagePainter::DefaultCompareValue;</div>
<div class="line"><span class="lineno"> 1184</span>      update();</div>
<div class="line"><span class="lineno"> 1185</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1186</span>      m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a5c7c87c21fafb25dc1ba31ac6574397f">m_dragCompareX</a> = m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a3458a525867577308cefaf2d33f6639b">m_dragCompareY</a> =</div>
<div class="line"><span class="lineno"> 1187</span>          <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1188</span>  }</div>
<div class="line"><span class="lineno"> 1189</span> </div>
<div class="line"><span class="lineno"> 1190</span>  <span class="comment">// pick color and throw it to the style editor</span></div>
<div class="line"><span class="lineno"> 1191</span>  <span class="keywordflow">if</span> (m_isHistogramEnable &amp;&amp; m_histogramPopup-&gt;isVisible() &amp;&amp; !m_isColorModel &amp;&amp;</div>
<div class="line"><span class="lineno"> 1192</span>      !(event-&gt;modifiers() &amp; Qt::ControlModifier))  <span class="comment">// if ctrl button is</span></div>
<div class="line"><span class="lineno"> 1193</span>                                                    <span class="comment">// pressed, which means</span></div>
<div class="line"><span class="lineno"> 1194</span>                                                    <span class="comment">// rectangular pick</span></div>
<div class="line"><span class="lineno"> 1195</span>  {</div>
<div class="line"><span class="lineno"> 1196</span>    update();</div>
<div class="line"><span class="lineno"> 1197</span>    pickColor(event, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1198</span>  }</div>
<div class="line"><span class="lineno"> 1199</span> </div>
<div class="line"><span class="lineno"> 1200</span>  <span class="keyword">event</span>-&gt;ignore();</div>
<div class="line"><span class="lineno"> 1201</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a62cdfb855b556cec0fff8ec46a4f27f5" name="a62cdfb855b556cec0fff8ec46a4f27f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62cdfb855b556cec0fff8ec46a4f27f5">&#9670;&nbsp;</a></span>mouseReleaseEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::mouseReleaseEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Reset current mouse position and current mouse button event. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1206</span>                                                      {</div>
<div class="line"><span class="lineno"> 1207</span>  <span class="keywordflow">if</span> (!m_image) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1208</span>  <span class="keywordflow">if</span> (m_draggingZoomSelection &amp;&amp; !m_visualSettings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#a9f828dd6214db63baf8c86d2b7c039ef">m_defineLoadbox</a>) {</div>
<div class="line"><span class="lineno"> 1209</span>    m_draggingZoomSelection = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1210</span> </div>
<div class="line"><span class="lineno"> 1211</span>    <span class="keywordtype">int</span> left, right, top, bottom;</div>
<div class="line"><span class="lineno"> 1212</span>    <span class="keywordflow">if</span> (m_pos.x() &lt; m_pressedMousePos.x)</div>
<div class="line"><span class="lineno"> 1213</span>      left = m_pos.x(), right = m_pressedMousePos.x;</div>
<div class="line"><span class="lineno"> 1214</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1215</span>      right = m_pos.x(), left = m_pressedMousePos.x;</div>
<div class="line"><span class="lineno"> 1216</span>    <span class="keywordflow">if</span> (m_pos.y() &lt; m_pressedMousePos.y)</div>
<div class="line"><span class="lineno"> 1217</span>      top = m_pos.y(), bottom = m_pressedMousePos.y;</div>
<div class="line"><span class="lineno"> 1218</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1219</span>      bottom = m_pos.y(), top = m_pressedMousePos.y;</div>
<div class="line"><span class="lineno"> 1220</span> </div>
<div class="line"><span class="lineno"> 1221</span>    <a class="code hl_function" href="class_image_viewer.html#aaad0ef7fa1fb0ed91e36026e5e520e6d">adaptView</a>(QRect(QPoint(left, top), QPoint(right, bottom)));</div>
<div class="line"><span class="lineno"> 1222</span>  }</div>
<div class="line"><span class="lineno"> 1223</span> </div>
<div class="line"><span class="lineno"> 1224</span>  <span class="keywordflow">if</span> (m_rectRGBPick) {</div>
<div class="line"><span class="lineno"> 1225</span>    <span class="comment">// pick color in the rectangular region</span></div>
<div class="line"><span class="lineno"> 1226</span>    rectPickColor(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1227</span>    <span class="comment">// release the flag</span></div>
<div class="line"><span class="lineno"> 1228</span>    m_rectRGBPick = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1229</span>    update();</div>
<div class="line"><span class="lineno"> 1230</span>  }</div>
<div class="line"><span class="lineno"> 1231</span> </div>
<div class="line"><span class="lineno"> 1232</span>  m_pos                            = QPoint(0, 0);</div>
<div class="line"><span class="lineno"> 1233</span>  m_mouseButton                    = Qt::NoButton;</div>
<div class="line"><span class="lineno"> 1234</span>  m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a5c7c87c21fafb25dc1ba31ac6574397f">m_dragCompareX</a> = m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#a3458a525867577308cefaf2d33f6639b">m_dragCompareY</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1235</span> </div>
<div class="line"><span class="lineno"> 1236</span>  m_gestureActive = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1237</span>  m_zooming       = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1238</span>  m_panning       = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1239</span>  m_stylusUsed    = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1240</span> </div>
<div class="line"><span class="lineno"> 1241</span>  <span class="keyword">event</span>-&gt;ignore();</div>
<div class="line"><span class="lineno"> 1242</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01362">adaptView()</a>, <a class="el" href="#l00059">ImagePainter::VisualSettings::m_defineLoadbox</a>, <a class="el" href="#l00089">ImagePainter::CompareSettings::m_dragCompareX</a>, and <a class="el" href="#l00091">ImagePainter::CompareSettings::m_dragCompareY</a>.</p>

</div>
</div>
<a id="a0bbac27221577b3644eb2a0be761640f" name="a0bbac27221577b3644eb2a0be761640f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bbac27221577b3644eb2a0be761640f">&#9670;&nbsp;</a></span>onContextAboutToBeDestroyed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::onContextAboutToBeDestroyed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1425</span>                                              {</div>
<div class="line"><span class="lineno"> 1426</span>  <span class="keywordflow">if</span> (!m_lutCalibrator) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1427</span>  makeCurrent();</div>
<div class="line"><span class="lineno"> 1428</span>  m_lutCalibrator-&gt;cleanup();</div>
<div class="line"><span class="lineno"> 1429</span>  doneCurrent();</div>
<div class="line"><span class="lineno"> 1430</span>  disconnect(context(), SIGNAL(aboutToBeDestroyed()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 1431</span>             SLOT(onContextAboutToBeDestroyed()));</div>
<div class="line"><span class="lineno"> 1432</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac455bcbc5ebc2c8dd7c32ceca85d1b62" name="ac455bcbc5ebc2c8dd7c32ceca85d1b62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac455bcbc5ebc2c8dd7c32ceca85d1b62">&#9670;&nbsp;</a></span>onPreferenceChanged</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::onPreferenceChanged </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>prefName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1436</span>                                                             {</div>
<div class="line"><span class="lineno"> 1437</span>  <span class="keywordflow">if</span> (prefName == <span class="stringliteral">&quot;ColorCalibration&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1438</span>    <span class="keywordflow">if</span> (Preferences::instance()-&gt;isColorCalibrationEnabled()) {</div>
<div class="line"><span class="lineno"> 1439</span>      <span class="comment">// if the window is so shriked that the gl widget is empty,</span></div>
<div class="line"><span class="lineno"> 1440</span>      <span class="comment">// showEvent can be called before creating the context.</span></div>
<div class="line"><span class="lineno"> 1441</span>      <span class="keywordflow">if</span> (!context()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1442</span>      makeCurrent();</div>
<div class="line"><span class="lineno"> 1443</span>      <span class="keywordflow">if</span> (!m_lutCalibrator)</div>
<div class="line"><span class="lineno"> 1444</span>        m_lutCalibrator = <span class="keyword">new</span> <a class="code hl_class" href="class_lut_calibrator.html">LutCalibrator</a>();</div>
<div class="line"><span class="lineno"> 1445</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1446</span>        m_lutCalibrator-&gt;cleanup();</div>
<div class="line"><span class="lineno"> 1447</span>      m_lutCalibrator-&gt;initialize();</div>
<div class="line"><span class="lineno"> 1448</span>      connect(context(), SIGNAL(aboutToBeDestroyed()), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 1449</span>              SLOT(onContextAboutToBeDestroyed()));</div>
<div class="line"><span class="lineno"> 1450</span>      <span class="keywordflow">if</span> (m_lutCalibrator-&gt;isValid() &amp;&amp; !m_fbo) {</div>
<div class="line"><span class="lineno"> 1451</span>        <span class="keywordflow">if</span> (Preferences::instance()-&gt;is30bitDisplayEnabled()) {</div>
<div class="line"><span class="lineno"> 1452</span>          QOpenGLFramebufferObjectFormat format;</div>
<div class="line"><span class="lineno"> 1453</span>          format.setInternalTextureFormat(TGL_TexFmt10);</div>
<div class="line"><span class="lineno"> 1454</span>          m_fbo = <span class="keyword">new</span> QOpenGLFramebufferObject(width(), height(), format);</div>
<div class="line"><span class="lineno"> 1455</span>        } <span class="keywordflow">else</span>  <span class="comment">// normally, initialize with GL_RGBA8 format</span></div>
<div class="line"><span class="lineno"> 1456</span>          m_fbo = <span class="keyword">new</span> QOpenGLFramebufferObject(width(), height());</div>
<div class="line"><span class="lineno"> 1457</span>      }</div>
<div class="line"><span class="lineno"> 1458</span>      doneCurrent();</div>
<div class="line"><span class="lineno"> 1459</span>    }</div>
<div class="line"><span class="lineno"> 1460</span>    update();</div>
<div class="line"><span class="lineno"> 1461</span>  }</div>
<div class="line"><span class="lineno"> 1462</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2edbf42c08020efed6eaf23f0dbf56cf" name="a2edbf42c08020efed6eaf23f0dbf56cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2edbf42c08020efed6eaf23f0dbf56cf">&#9670;&nbsp;</a></span>paintGL()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::paintGL </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  507</span>                          {</div>
<div class="line"><span class="lineno">  508</span>  initializeOpenGLFunctions();</div>
<div class="line"><span class="lineno">  509</span>  <span class="keywordflow">if</span> (m_lutCalibrator &amp;&amp; m_lutCalibrator-&gt;isValid()) m_fbo-&gt;bind();</div>
<div class="line"><span class="lineno">  510</span> </div>
<div class="line"><span class="lineno">  511</span>  <a class="code hl_class" href="class_t_dimension_t.html">TDimension</a> viewerSize(width(), height());</div>
<div class="line"><span class="lineno">  512</span>  <a class="code hl_class" href="class_t_affine.html">TAffine</a> aff = m_viewAff;</div>
<div class="line"><span class="lineno">  513</span> </div>
<div class="line"><span class="lineno">  514</span>  <span class="comment">// if (!m_visualSettings.m_defineLoadbox &amp;&amp; m_flipbook &amp;&amp;</span></div>
<div class="line"><span class="lineno">  515</span>  <span class="comment">// m_flipbook-&gt;getLoadbox()!=TRect())</span></div>
<div class="line"><span class="lineno">  516</span>  <span class="comment">//  offs =</span></div>
<div class="line"><span class="lineno">  517</span>  <span class="comment">//  convert(m_flipbook-&gt;getLoadbox().getP00())-TPointD(m_flipbook-&gt;getImageSize().lx/2.0,</span></div>
<div class="line"><span class="lineno">  518</span>  <span class="comment">//  m_flipbook-&gt;getImageSize().ly/2.0);</span></div>
<div class="line"><span class="lineno">  519</span> </div>
<div class="line"><span class="lineno">  520</span>  <a class="code hl_class" href="class_t_dimension_t.html">TDimension</a> imageSize;</div>
<div class="line"><span class="lineno">  521</span>  <a class="code hl_class" href="class_t_rect_t.html">TRect</a> loadbox;</div>
<div class="line"><span class="lineno">  522</span> </div>
<div class="line"><span class="lineno">  523</span>  <span class="keywordflow">if</span> (m_flipbook) {</div>
<div class="line"><span class="lineno">  524</span>    QString title =</div>
<div class="line"><span class="lineno">  525</span>        (!m_image)</div>
<div class="line"><span class="lineno">  526</span>            ? m_flipbook-&gt;getTitle() + tr(<span class="stringliteral">&quot;  ::  Zoom : &quot;</span>) +</div>
<div class="line"><span class="lineno">  527</span>                  QString::number(tround(sqrt(m_viewAff.det()) * 100)) + <span class="stringliteral">&quot; %&quot;</span></div>
<div class="line"><span class="lineno">  528</span>            : m_flipbook-&gt;getLevelZoomTitle() + tr(<span class="stringliteral">&quot;  ::  Zoom : &quot;</span>) +</div>
<div class="line"><span class="lineno">  529</span>                  QString::number(tround(sqrt(m_viewAff.det()) * 100)) + <span class="stringliteral">&quot; %&quot;</span>;</div>
<div class="line"><span class="lineno">  530</span>    m_flipbook-&gt;parentWidget()-&gt;setWindowTitle(title);</div>
<div class="line"><span class="lineno">  531</span>    imageSize = m_flipbook-&gt;getImageSize();</div>
<div class="line"><span class="lineno">  532</span>    <span class="keywordflow">if</span> (m_visualSettings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#a1f71f1efab191eb50dd82ce0f099dda0">m_useLoadbox</a> &amp;&amp; m_flipbook-&gt;getLoadbox() != <a class="code hl_class" href="class_t_rect_t.html">TRect</a>())</div>
<div class="line"><span class="lineno">  533</span>      loadbox = m_flipbook-&gt;getLoadbox();</div>
<div class="line"><span class="lineno">  534</span>  }</div>
<div class="line"><span class="lineno">  535</span>  m_visualSettings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#ab6461a28653bae19432d998149564b43">m_sceneProperties</a> =</div>
<div class="line"><span class="lineno">  536</span>      <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene()-&gt;<a class="code hl_function" href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">getProperties</a>();</div>
<div class="line"><span class="lineno">  537</span>  <span class="comment">// enable checks only in the color model</span></div>
<div class="line"><span class="lineno">  538</span>  m_visualSettings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#aa5cb3950ff8ee132a7869d7b433d6938">m_useChecks</a> = m_isColorModel;</div>
<div class="line"><span class="lineno">  539</span>  ImagePainter::paintImage(m_image, imageSize, viewerSize, aff,</div>
<div class="line"><span class="lineno">  540</span>                           m_visualSettings, m_compareSettings, loadbox);</div>
<div class="line"><span class="lineno">  541</span> </div>
<div class="line"><span class="lineno">  542</span>  <span class="comment">// when fx parameter is modified with showing the fx preview,</span></div>
<div class="line"><span class="lineno">  543</span>  <span class="comment">// a flipbook shows a red border line before the rendered result is shown.</span></div>
<div class="line"><span class="lineno">  544</span>  <span class="keywordflow">if</span> (m_isRemakingPreviewFx) {</div>
<div class="line"><span class="lineno">  545</span>    glPushMatrix();</div>
<div class="line"><span class="lineno">  546</span>    glLoadIdentity();</div>
<div class="line"><span class="lineno">  547</span>    glColor3d(1.0, 0.0, 0.0);</div>
<div class="line"><span class="lineno">  548</span> </div>
<div class="line"><span class="lineno">  549</span>    glBegin(GL_LINE_LOOP);</div>
<div class="line"><span class="lineno">  550</span>    glVertex2d(5, 5);</div>
<div class="line"><span class="lineno">  551</span>    glVertex2d(5, height() - 5);</div>
<div class="line"><span class="lineno">  552</span>    glVertex2d(width() - 5, height() - 5);</div>
<div class="line"><span class="lineno">  553</span>    glVertex2d(width() - 5, 5);</div>
<div class="line"><span class="lineno">  554</span>    glEnd();</div>
<div class="line"><span class="lineno">  555</span> </div>
<div class="line"><span class="lineno">  556</span>    glBegin(GL_LINE_LOOP);</div>
<div class="line"><span class="lineno">  557</span>    glVertex2d(10, 10);</div>
<div class="line"><span class="lineno">  558</span>    glVertex2d(10, height() - 10);</div>
<div class="line"><span class="lineno">  559</span>    glVertex2d(width() - 10, height() - 10);</div>
<div class="line"><span class="lineno">  560</span>    glVertex2d(width() - 10, 10);</div>
<div class="line"><span class="lineno">  561</span>    glEnd();</div>
<div class="line"><span class="lineno">  562</span>    glPopMatrix();</div>
<div class="line"><span class="lineno">  563</span>  }</div>
<div class="line"><span class="lineno">  564</span> </div>
<div class="line"><span class="lineno">  565</span>  <span class="keywordflow">if</span> (!m_image) {</div>
<div class="line"><span class="lineno">  566</span>    <span class="keywordflow">if</span> (m_lutCalibrator &amp;&amp; m_lutCalibrator-&gt;isValid())</div>
<div class="line"><span class="lineno">  567</span>      m_lutCalibrator-&gt;onEndDraw(m_fbo);</div>
<div class="line"><span class="lineno">  568</span>    <span class="keywordflow">if</span> (m_timer &amp;&amp; m_timer-&gt;isValid()) {</div>
<div class="line"><span class="lineno">  569</span>      qint64 currentInstant = m_timer-&gt;nsecsElapsed();</div>
<div class="line"><span class="lineno">  570</span>      <span class="keywordflow">while</span> (currentInstant &lt; m_targetInstant) {</div>
<div class="line"><span class="lineno">  571</span>        currentInstant = m_timer-&gt;nsecsElapsed();</div>
<div class="line"><span class="lineno">  572</span>      }</div>
<div class="line"><span class="lineno">  573</span>    }</div>
<div class="line"><span class="lineno">  574</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  575</span>  }</div>
<div class="line"><span class="lineno">  576</span> </div>
<div class="line"><span class="lineno">  577</span>  <span class="keywordflow">if</span> (safeAreaToggle.getStatus() &amp;&amp; !m_isColorModel) {</div>
<div class="line"><span class="lineno">  578</span>    <a class="code hl_class" href="class_t_raster_image_p.html">TRasterImageP</a> rimg = (<a class="code hl_class" href="class_t_raster_image_p.html">TRasterImageP</a>)m_image;</div>
<div class="line"><span class="lineno">  579</span>    <a class="code hl_class" href="class_t_vector_image_p.html">TVectorImageP</a> vimg = (<a class="code hl_class" href="class_t_vector_image_p.html">TVectorImageP</a>)m_image;</div>
<div class="line"><span class="lineno">  580</span>    <a class="code hl_class" href="class_t_toonz_image_p.html">TToonzImageP</a> timg  = (<a class="code hl_class" href="class_t_toonz_image_p.html">TToonzImageP</a>)m_image;</div>
<div class="line"><span class="lineno">  581</span>    <a class="code hl_class" href="class_t_rect_t.html">TRect</a> bbox;</div>
<div class="line"><span class="lineno">  582</span> </div>
<div class="line"><span class="lineno">  583</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> centerD;</div>
<div class="line"><span class="lineno">  584</span>    <a class="code hl_class" href="class_t_rect_t.html">TRect</a> bounds;</div>
<div class="line"><span class="lineno">  585</span>    <span class="keywordflow">if</span> (rimg) {</div>
<div class="line"><span class="lineno">  586</span>      centerD = rimg-&gt;getRaster()-&gt;getCenterD();</div>
<div class="line"><span class="lineno">  587</span>      bounds  = rimg-&gt;getRaster()-&gt;getBounds();</div>
<div class="line"><span class="lineno">  588</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (timg) {</div>
<div class="line"><span class="lineno">  589</span>      centerD = timg-&gt;getRaster()-&gt;getCenterD();</div>
<div class="line"><span class="lineno">  590</span>      bounds  = timg-&gt;getRaster()-&gt;getBounds();</div>
<div class="line"><span class="lineno">  591</span>    }</div>
<div class="line"><span class="lineno">  592</span> </div>
<div class="line"><span class="lineno">  593</span>    <span class="keywordflow">if</span> (!vimg) {</div>
<div class="line"><span class="lineno">  594</span>      <a class="code hl_class" href="class_t_affine.html">TAffine</a> aff = <a class="code hl_class" href="class_t_translation.html">TTranslation</a>(viewerSize.lx * 0.5, viewerSize.ly * 0.5) *</div>
<div class="line"><span class="lineno">  595</span>                    m_viewAff * <a class="code hl_class" href="class_t_translation.html">TTranslation</a>(-centerD);</div>
<div class="line"><span class="lineno">  596</span>      <a class="code hl_class" href="class_t_rect_t.html">TRectD</a> bbox = aff * <a class="code hl_class" href="class_t_rect_t.html">TRectD</a>(0, 0, bounds.getLx() - 1, bounds.getLy() - 1);</div>
<div class="line"><span class="lineno">  597</span>      drawSafeArea(bbox);</div>
<div class="line"><span class="lineno">  598</span>    }</div>
<div class="line"><span class="lineno">  599</span>  }</div>
<div class="line"><span class="lineno">  600</span>  <a class="code hl_class" href="class_t_point_t.html">TPoint</a> fromPos, toPos;</div>
<div class="line"><span class="lineno">  601</span> </div>
<div class="line"><span class="lineno">  602</span>  <span class="keywordflow">if</span> (m_visualSettings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#a9f828dd6214db63baf8c86d2b7c039ef">m_defineLoadbox</a> &amp;&amp; m_flipbook) {</div>
<div class="line"><span class="lineno">  603</span>    <a class="code hl_class" href="class_t_rect_t.html">TRect</a> loadbox =</div>
<div class="line"><span class="lineno">  604</span>        convert(<a class="code hl_function" href="class_image_viewer.html#a5f412d451a497d7c346c04c89d3c8865">getImgToWidgetAffine</a>() * convert(m_flipbook-&gt;getLoadbox()));</div>
<div class="line"><span class="lineno">  605</span>    <span class="keywordflow">if</span> (loadbox != <a class="code hl_class" href="class_t_rect_t.html">TRect</a>()) {</div>
<div class="line"><span class="lineno">  606</span>      <a class="code hl_class" href="class_t_point_t.html">TPoint</a> p00 = loadbox.getP00();</div>
<div class="line"><span class="lineno">  607</span>      <a class="code hl_class" href="class_t_point_t.html">TPoint</a> p11 = loadbox.getP11();</div>
<div class="line"><span class="lineno">  608</span>      fromPos =</div>
<div class="line"><span class="lineno">  609</span>          <a class="code hl_class" href="class_t_point_t.html">TPoint</a>(p00.x - width() * 0.5,</div>
<div class="line"><span class="lineno">  610</span>                 height() * 0.5 - p00.y);  <span class="comment">// m_flipbook-&gt;getLoadbox().getP00();</span></div>
<div class="line"><span class="lineno">  611</span>      toPos =</div>
<div class="line"><span class="lineno">  612</span>          <a class="code hl_class" href="class_t_point_t.html">TPoint</a>(p11.x - width() * 0.5,</div>
<div class="line"><span class="lineno">  613</span>                 height() * 0.5 - p11.y);  <span class="comment">// m_flipbook-&gt;getLoadbox().getP11();</span></div>
<div class="line"><span class="lineno">  614</span>    }</div>
<div class="line"><span class="lineno">  615</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_draggingZoomSelection || m_rectRGBPick) {</div>
<div class="line"><span class="lineno">  616</span>    fromPos = <a class="code hl_class" href="class_t_point_t.html">TPoint</a>(m_pressedMousePos.x - width() * 0.5,</div>
<div class="line"><span class="lineno">  617</span>                     height() * 0.5 - m_pressedMousePos.y);</div>
<div class="line"><span class="lineno">  618</span>    toPos   = <a class="code hl_class" href="class_t_point_t.html">TPoint</a>(m_pos.x() - width() * 0.5, height() * 0.5 - m_pos.y());</div>
<div class="line"><span class="lineno">  619</span>  }</div>
<div class="line"><span class="lineno">  620</span>  <span class="keywordflow">if</span> (fromPos != <a class="code hl_class" href="class_t_point_t.html">TPoint</a>() || toPos != <a class="code hl_class" href="class_t_point_t.html">TPoint</a>()) {</div>
<div class="line"><span class="lineno">  621</span>    <span class="keywordflow">if</span> (m_rectRGBPick) {</div>
<div class="line"><span class="lineno">  622</span>      tglColor(TPixel32::Red);</div>
<div class="line"><span class="lineno">  623</span>      <span class="comment">// TODO: glLineStipple is deprecated in the latest OpenGL. Need to be</span></div>
<div class="line"><span class="lineno">  624</span>      <span class="comment">// replaced. (shun_iwasawa 2015/12/25)</span></div>
<div class="line"><span class="lineno">  625</span>      glLineStipple(1, 0x3F33);</div>
<div class="line"><span class="lineno">  626</span>      glEnable(GL_LINE_STIPPLE);</div>
<div class="line"><span class="lineno">  627</span> </div>
<div class="line"><span class="lineno">  628</span>      glBegin(GL_LINE_STRIP);</div>
<div class="line"><span class="lineno">  629</span>      <span class="comment">// do not draw the rect around the mouse cursor</span></div>
<div class="line"><span class="lineno">  630</span>      <span class="keywordtype">int</span> margin = (fromPos.y &lt; toPos.y) ? -3 : 3;</div>
<div class="line"><span class="lineno">  631</span>      glVertex2i(toPos.x, toPos.y + margin);</div>
<div class="line"><span class="lineno">  632</span>      glVertex2i(toPos.x, fromPos.y);</div>
<div class="line"><span class="lineno">  633</span>      glVertex2i(fromPos.x, fromPos.y);</div>
<div class="line"><span class="lineno">  634</span>      glVertex2i(fromPos.x, toPos.y);</div>
<div class="line"><span class="lineno">  635</span>      margin = (fromPos.x &lt; toPos.x) ? -3 : 3;</div>
<div class="line"><span class="lineno">  636</span>      glVertex2i(toPos.x + margin, toPos.y);</div>
<div class="line"><span class="lineno">  637</span>      glEnd();</div>
<div class="line"><span class="lineno">  638</span>      glDisable(GL_LINE_STIPPLE);</div>
<div class="line"><span class="lineno">  639</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  640</span>      tglColor(m_draggingZoomSelection ? TPixel32::Red : TPixel32::Blue);</div>
<div class="line"><span class="lineno">  641</span>      glBegin(GL_LINE_STRIP);</div>
<div class="line"><span class="lineno">  642</span>      glVertex2i(fromPos.x, fromPos.y);</div>
<div class="line"><span class="lineno">  643</span>      glVertex2i(fromPos.x, toPos.y);</div>
<div class="line"><span class="lineno">  644</span>      glVertex2i(toPos.x, toPos.y);</div>
<div class="line"><span class="lineno">  645</span>      glVertex2i(toPos.x, fromPos.y);</div>
<div class="line"><span class="lineno">  646</span>      glVertex2i(fromPos.x, fromPos.y);</div>
<div class="line"><span class="lineno">  647</span>      glEnd();</div>
<div class="line"><span class="lineno">  648</span>    }</div>
<div class="line"><span class="lineno">  649</span>  }</div>
<div class="line"><span class="lineno">  650</span> </div>
<div class="line"><span class="lineno">  651</span>  <span class="keywordflow">if</span> (m_lutCalibrator &amp;&amp; m_lutCalibrator-&gt;isValid())</div>
<div class="line"><span class="lineno">  652</span>    m_lutCalibrator-&gt;onEndDraw(m_fbo);</div>
<div class="line"><span class="lineno">  653</span> </div>
<div class="line"><span class="lineno">  654</span>  <span class="comment">// wait to achieve precise fps</span></div>
<div class="line"><span class="lineno">  655</span>  <span class="keywordflow">if</span> (m_timer &amp;&amp; m_timer-&gt;isValid()) {</div>
<div class="line"><span class="lineno">  656</span>    qint64 currentInstant = m_timer-&gt;nsecsElapsed();</div>
<div class="line"><span class="lineno">  657</span>    <span class="keywordflow">while</span> (currentInstant &lt; m_targetInstant) {</div>
<div class="line"><span class="lineno">  658</span>      currentInstant = m_timer-&gt;nsecsElapsed();</div>
<div class="line"><span class="lineno">  659</span>    }</div>
<div class="line"><span class="lineno">  660</span>  }</div>
<div class="line"><span class="lineno">  661</span>}</div>
<div class="ttc" id="aclass_image_painter_1_1_visual_settings_html_a1f71f1efab191eb50dd82ce0f099dda0"><div class="ttname"><a href="class_image_painter_1_1_visual_settings.html#a1f71f1efab191eb50dd82ce0f099dda0">ImagePainter::VisualSettings::m_useLoadbox</a></div><div class="ttdeci">bool m_useLoadbox</div><div class="ttdoc">Flipbook-specific.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:60</div></div>
<div class="ttc" id="aclass_image_painter_1_1_visual_settings_html_aa5cb3950ff8ee132a7869d7b433d6938"><div class="ttname"><a href="class_image_painter_1_1_visual_settings.html#aa5cb3950ff8ee132a7869d7b433d6938">ImagePainter::VisualSettings::m_useChecks</a></div><div class="ttdeci">bool m_useChecks</div><div class="ttdoc">whether to consider paint check and ink check</div><div class="ttdef"><b>Definition:</b> imagepainter.h:68</div></div>
<div class="ttc" id="aclass_t_dimension_t_html"><div class="ttname"><a href="class_t_dimension_t.html">TDimensionT&lt; int &gt;</a></div></div>
<div class="ttc" id="aclass_t_raster_image_p_html"><div class="ttname"><a href="class_t_raster_image_p.html">TRasterImageP</a></div><div class="ttdef"><b>Definition:</b> trasterimage.h:148</div></div>
<div class="ttc" id="aclass_t_toonz_image_p_html"><div class="ttname"><a href="class_t_toonz_image_p.html">TToonzImageP</a></div><div class="ttdef"><b>Definition:</b> ttoonzimage.h:126</div></div>
<div class="ttc" id="aclass_t_vector_image_p_html"><div class="ttname"><a href="class_t_vector_image_p.html">TVectorImageP</a></div><div class="ttdef"><b>Definition:</b> tvectorimage.h:417</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a574ebcd95b038e59de03f0bb6e6a9dd2" name="a574ebcd95b038e59de03f0bb6e6a9dd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a574ebcd95b038e59de03f0bb6e6a9dd2">&#9670;&nbsp;</a></span>panQt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::panQt </td>
          <td>(</td>
          <td class="paramtype">const QPoint &amp;&#160;</td>
          <td class="paramname"><em>delta</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Add to current transformation matrix a <b>delta</b> translation. </p>
<div class="fragment"><div class="line"><span class="lineno">  666</span>                                           {</div>
<div class="line"><span class="lineno">  667</span>  <span class="keywordflow">if</span> (delta == QPoint()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  668</span> </div>
<div class="line"><span class="lineno">  669</span>  <span class="comment">// stop panning when the image is at the edge of window</span></div>
<div class="line"><span class="lineno">  670</span>  QPoint delta_(delta.x(), delta.y());</div>
<div class="line"><span class="lineno">  671</span> </div>
<div class="line"><span class="lineno">  672</span>  <a class="code hl_class" href="class_t_toonz_image_p.html">TToonzImageP</a> timg  = (<a class="code hl_class" href="class_t_toonz_image_p.html">TToonzImageP</a>)m_image;</div>
<div class="line"><span class="lineno">  673</span>  <a class="code hl_class" href="class_t_raster_image_p.html">TRasterImageP</a> rimg = (<a class="code hl_class" href="class_t_raster_image_p.html">TRasterImageP</a>)m_image;</div>
<div class="line"><span class="lineno">  674</span>  <span class="keywordflow">if</span> (timg || rimg) {</div>
<div class="line"><span class="lineno">  675</span>    <span class="keywordtype">bool</span> isXPlus = delta.x() &gt; 0;</div>
<div class="line"><span class="lineno">  676</span>    <span class="keywordtype">bool</span> isYPlus = delta.y() &gt; 0;</div>
<div class="line"><span class="lineno">  677</span> </div>
<div class="line"><span class="lineno">  678</span>    <a class="code hl_class" href="class_t_dimension_t.html">TDimension</a> imgSize((timg) ? timg-&gt;getSize() : rimg-&gt;getRaster()-&gt;getSize());</div>
<div class="line"><span class="lineno">  679</span>    <span class="keywordtype">int</span> subSampling = (timg) ? timg-&gt;getSubsampling() : rimg-&gt;getSubsampling();</div>
<div class="line"><span class="lineno">  680</span> </div>
<div class="line"><span class="lineno">  681</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> cornerPos = <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(imgSize.lx * ((isXPlus) ? -1 : 1),</div>
<div class="line"><span class="lineno">  682</span>                                imgSize.ly * ((isYPlus) ? 1 : -1)) *</div>
<div class="line"><span class="lineno">  683</span>                        (0.5 / (double)subSampling);</div>
<div class="line"><span class="lineno">  684</span>    cornerPos = m_viewAff * cornerPos;</div>
<div class="line"><span class="lineno">  685</span> </div>
<div class="line"><span class="lineno">  686</span>    <span class="keywordflow">if</span> ((cornerPos.x &gt; 0) == isXPlus) delta_.setX(0);</div>
<div class="line"><span class="lineno">  687</span>    <span class="keywordflow">if</span> ((cornerPos.y &lt; 0) == isYPlus) delta_.setY(0);</div>
<div class="line"><span class="lineno">  688</span>  }</div>
<div class="line"><span class="lineno">  689</span> </div>
<div class="line"><span class="lineno">  690</span>  setViewAff(<a class="code hl_class" href="class_t_translation.html">TTranslation</a>(delta_.x(), -delta_.y()) * m_viewAff);</div>
<div class="line"><span class="lineno">  691</span> </div>
<div class="line"><span class="lineno">  692</span>  update();</div>
<div class="line"><span class="lineno">  693</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00825">mouseMoveEvent()</a>.</p>

</div>
</div>
<a id="a1dc088198a0839240e14a624dc77043b" name="a1dc088198a0839240e14a624dc77043b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dc088198a0839240e14a624dc77043b">&#9670;&nbsp;</a></span>resetView</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::resetView </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1315</span>{ zoomQt(<span class="keyword">false</span>, <span class="keyword">true</span>); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2b9b55471bdccb502526c7e5573c4775" name="a2b9b55471bdccb502526c7e5573c4775"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b9b55471bdccb502526c7e5573c4775">&#9670;&nbsp;</a></span>resetZoom()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::resetZoom </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  729</span>                            {</div>
<div class="line"><span class="lineno">  730</span>  <span class="keywordtype">double</span> oldZoomScale = sqrt(m_viewAff.det());</div>
<div class="line"><span class="lineno">  731</span>  setViewAff(<a class="code hl_class" href="class_t_scale.html">TScale</a>(1.0 / oldZoomScale) * m_viewAff);</div>
<div class="line"><span class="lineno">  732</span>  update();</div>
<div class="line"><span class="lineno">  733</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae1ce6245e214b9cc4f065699b312e3fb" name="ae1ce6245e214b9cc4f065699b312e3fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1ce6245e214b9cc4f065699b312e3fb">&#9670;&nbsp;</a></span>resizeGL()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::resizeGL </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  478</span>                                       {</div>
<div class="line"><span class="lineno">  479</span>  w *= getDevPixRatio();</div>
<div class="line"><span class="lineno">  480</span>  h *= getDevPixRatio();</div>
<div class="line"><span class="lineno">  481</span>  glViewport(0, 0, w, h);</div>
<div class="line"><span class="lineno">  482</span>  glMatrixMode(GL_PROJECTION);</div>
<div class="line"><span class="lineno">  483</span>  glLoadIdentity();</div>
<div class="line"><span class="lineno">  484</span>  <span class="keywordtype">double</span> nearPlane   = 100;</div>
<div class="line"><span class="lineno">  485</span>  <span class="keywordtype">double</span> farPlane    = 2500;</div>
<div class="line"><span class="lineno">  486</span>  <span class="keywordtype">double</span> centerPlane = 1100;</div>
<div class="line"><span class="lineno">  487</span>  glOrtho(0, w, 0, h, -4000, 4000);</div>
<div class="line"><span class="lineno">  488</span>  glMatrixMode(GL_MODELVIEW);</div>
<div class="line"><span class="lineno">  489</span>  glLoadIdentity();</div>
<div class="line"><span class="lineno">  490</span>  glTranslatef(0.375, 0.375, 0.0);</div>
<div class="line"><span class="lineno">  491</span>  glTranslated(w * 0.5, h * 0.5, 0);</div>
<div class="line"><span class="lineno">  492</span> </div>
<div class="line"><span class="lineno">  493</span>  <span class="comment">// remake fbo with new size</span></div>
<div class="line"><span class="lineno">  494</span>  <span class="keywordflow">if</span> (m_lutCalibrator &amp;&amp; m_lutCalibrator-&gt;isValid()) {</div>
<div class="line"><span class="lineno">  495</span>    <span class="keywordflow">if</span> (m_fbo) <span class="keyword">delete</span> m_fbo;</div>
<div class="line"><span class="lineno">  496</span>    <span class="keywordflow">if</span> (Preferences::instance()-&gt;is30bitDisplayEnabled()) {</div>
<div class="line"><span class="lineno">  497</span>      QOpenGLFramebufferObjectFormat format;</div>
<div class="line"><span class="lineno">  498</span>      format.setInternalTextureFormat(TGL_TexFmt10);</div>
<div class="line"><span class="lineno">  499</span>      m_fbo = <span class="keyword">new</span> QOpenGLFramebufferObject(w, h, format);</div>
<div class="line"><span class="lineno">  500</span>    } <span class="keywordflow">else</span>  <span class="comment">// normally, initialize with GL_RGBA8 format</span></div>
<div class="line"><span class="lineno">  501</span>      m_fbo = <span class="keyword">new</span> QOpenGLFramebufferObject(w, h);</div>
<div class="line"><span class="lineno">  502</span>  }</div>
<div class="line"><span class="lineno">  503</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a08439b4de1e9dbe8107c7d6d0ca05ba2" name="a08439b4de1e9dbe8107c7d6d0ca05ba2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08439b4de1e9dbe8107c7d6d0ca05ba2">&#9670;&nbsp;</a></span>setHistogramEnable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::setHistogramEnable </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  436</span>                                                {</div>
<div class="line"><span class="lineno">  437</span>  m_isHistogramEnable = enable;</div>
<div class="line"><span class="lineno">  438</span>  <span class="keywordflow">if</span> (m_isHistogramEnable &amp;&amp; !m_histogramPopup)</div>
<div class="line"><span class="lineno">  439</span>    m_histogramPopup = <span class="keyword">new</span> <a class="code hl_class" href="class_histogram_popup.html">HistogramPopup</a>(tr(<span class="stringliteral">&quot;Flipbook Histogram&quot;</span>));</div>
<div class="line"><span class="lineno">  440</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad85948c9cf34353112cb7d4b2e117a81" name="ad85948c9cf34353112cb7d4b2e117a81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad85948c9cf34353112cb7d4b2e117a81">&#9670;&nbsp;</a></span>setHistogramTitle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::setHistogramTitle </td>
          <td>(</td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>levelName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >If histogram popup exist and is open set its title to "Histogram: level
name" if level Name is not empty. </p>
<div class="fragment"><div class="line"><span class="lineno">  428</span>                                                     {</div>
<div class="line"><span class="lineno">  429</span>  <span class="keywordflow">if</span> (m_isHistogramEnable &amp;&amp; m_histogramPopup-&gt;isVisible()) {</div>
<div class="line"><span class="lineno">  430</span>    QString histogramTitle = QString(<span class="stringliteral">&quot;Histogram  ::  &quot;</span>) + levelName;</div>
<div class="line"><span class="lineno">  431</span>    m_histogramPopup-&gt;setTitle(histogramTitle);</div>
<div class="line"><span class="lineno">  432</span>  }</div>
<div class="line"><span class="lineno">  433</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l01024">FlipBook::setLevel()</a>.</p>

</div>
</div>
<a id="af514a3d90ce0f99a9217874bb3ef95dc" name="af514a3d90ce0f99a9217874bb3ef95dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af514a3d90ce0f99a9217874bb3ef95dc">&#9670;&nbsp;</a></span>setImage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::setImage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_smart_pointer_t.html">TImageP</a>&#160;</td>
          <td class="paramname"><em>image</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Set current image to <b>image</b> and update. If <a class="el" href="class_histogram.html">Histogram</a> is visible set its image. </p>
<div class="fragment"><div class="line"><span class="lineno">  405</span>                                        {</div>
<div class="line"><span class="lineno">  406</span>  m_image = image;</div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span>  <span class="keywordflow">if</span> (m_image &amp;&amp; m_firstImage) {</div>
<div class="line"><span class="lineno">  409</span>    m_firstImage = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  410</span>    fitView();</div>
<div class="line"><span class="lineno">  411</span>    <span class="comment">// when the viewer size is large enough, limit the zoom ratio to 100% so</span></div>
<div class="line"><span class="lineno">  412</span>    <span class="comment">// that the image is shown in actual pixel size without jaggies due to</span></div>
<div class="line"><span class="lineno">  413</span>    <span class="comment">// resampling.</span></div>
<div class="line"><span class="lineno">  414</span>    <span class="keywordflow">if</span> (fabs(m_viewAff.det()) &gt; 1.0) resetView();</div>
<div class="line"><span class="lineno">  415</span>  }</div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>  <span class="keywordflow">if</span> (m_isHistogramEnable &amp;&amp; m_histogramPopup-&gt;isVisible())</div>
<div class="line"><span class="lineno">  418</span>    m_histogramPopup-&gt;setImage(image);</div>
<div class="line"><span class="lineno">  419</span> </div>
<div class="line"><span class="lineno">  420</span>  <span class="comment">// make sure to redraw the frame here.</span></div>
<div class="line"><span class="lineno">  421</span>  <span class="comment">// repaint() does NOT immediately redraw the frame for QOpenGLWidget</span></div>
<div class="line"><span class="lineno">  422</span>  update();</div>
<div class="line"><span class="lineno">  423</span>  <span class="keywordflow">if</span> (!isColorModel()) qApp-&gt;processEvents();</div>
<div class="line"><span class="lineno">  424</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00504">ColorModelViewer::loadCurrentFrame()</a>, <a class="el" href="#l01671">FlipBook::onDrawFrame()</a>, and <a class="el" href="#l00029">ColorModelViewer::resetImageViewer()</a>.</p>

</div>
</div>
<a id="a25d0c3880d457fbfb8aef8dbdac5f3e5" name="a25d0c3880d457fbfb8aef8dbdac5f3e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25d0c3880d457fbfb8aef8dbdac5f3e5">&#9670;&nbsp;</a></span>setIsColorModel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::setIsColorModel </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isColorModel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  102</span>{ m_isColorModel = isColorModel; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab3f2e0f11a0e98019187c0aab85f0e6e" name="ab3f2e0f11a0e98019187c0aab85f0e6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3f2e0f11a0e98019187c0aab85f0e6e">&#9670;&nbsp;</a></span>setIsRemakingPreviewFx()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::setIsRemakingPreviewFx </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>on</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  127</span>                                       {</div>
<div class="line"><span class="lineno">  128</span>    m_isRemakingPreviewFx = on;</div>
<div class="line"><span class="lineno">  129</span>    update();</div>
<div class="line"><span class="lineno">  130</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a05c8912b53633fd251c30da998d2082f" name="a05c8912b53633fd251c30da998d2082f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05c8912b53633fd251c30da998d2082f">&#9670;&nbsp;</a></span>setTimerAndTargetInstant()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::setTimerAndTargetInstant </td>
          <td>(</td>
          <td class="paramtype">QElapsedTimer *&#160;</td>
          <td class="paramname"><em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qint64&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  140</span>                                                                     {</div>
<div class="line"><span class="lineno">  141</span>    m_timer         = timer;</div>
<div class="line"><span class="lineno">  142</span>    m_targetInstant = target;</div>
<div class="line"><span class="lineno">  143</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ec516026bd15dc6c7c0154ea9070c00" name="a4ec516026bd15dc6c7c0154ea9070c00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ec516026bd15dc6c7c0154ea9070c00">&#9670;&nbsp;</a></span>setViewAff()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::setViewAff </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_affine.html">TAffine</a>&#160;</td>
          <td class="paramname"><em>viewAff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1305</span>                                            {</div>
<div class="line"><span class="lineno"> 1306</span>  m_viewAff = viewAff;</div>
<div class="line"><span class="lineno"> 1307</span>  update();</div>
<div class="line"><span class="lineno"> 1308</span>  <span class="keywordflow">if</span> (m_flipbook &amp;&amp; m_flipbook-&gt;getPreviewedFx())</div>
<div class="line"><span class="lineno"> 1309</span>    <span class="comment">// Update the observable fx region</span></div>
<div class="line"><span class="lineno"> 1310</span>    m_flipbook-&gt;schedulePreviewedFxUpdate();</div>
<div class="line"><span class="lineno"> 1311</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abd5a4c3961e00f3fac5193d971ad0650" name="abd5a4c3961e00f3fac5193d971ad0650"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd5a4c3961e00f3fac5193d971ad0650">&#9670;&nbsp;</a></span>setVisual()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::setVisual </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_image_painter_1_1_visual_settings.html">ImagePainter::VisualSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>settings</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  376</span>                                                                      {</div>
<div class="line"><span class="lineno">  377</span>  <span class="keywordflow">if</span> (m_isHistogramEnable &amp;&amp; m_histogramPopup &amp;&amp;</div>
<div class="line"><span class="lineno">  378</span>      settings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#af46b586bd61bf70e606713bee68c3aad">m_doCompare</a> != m_visualSettings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#af46b586bd61bf70e606713bee68c3aad">m_doCompare</a>) {</div>
<div class="line"><span class="lineno">  379</span>    m_histogramPopup-&gt;setShowCompare(settings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#af46b586bd61bf70e606713bee68c3aad">m_doCompare</a>);</div>
<div class="line"><span class="lineno">  380</span>  }</div>
<div class="line"><span class="lineno">  381</span>  m_visualSettings = settings;</div>
<div class="line"><span class="lineno">  382</span>  m_visualSettings.<a class="code hl_variable" href="class_image_painter_1_1_visual_settings.html#ab6461a28653bae19432d998149564b43">m_sceneProperties</a> =</div>
<div class="line"><span class="lineno">  383</span>      <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene()-&gt;<a class="code hl_function" href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">getProperties</a>();</div>
<div class="line"><span class="lineno">  384</span>  m_visualSettings.m_drawExternalBG = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  385</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab465328eb07b6ceef99d9ec471d4fbc2" name="ab465328eb07b6ceef99d9ec471d4fbc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab465328eb07b6ceef99d9ec471d4fbc2">&#9670;&nbsp;</a></span>showEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::showEvent </td>
          <td>(</td>
          <td class="paramtype">QShowEvent *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  807</span>                                        {</div>
<div class="line"><span class="lineno">  808</span>  <a class="code hl_class" href="class_t_scene_handle.html">TSceneHandle</a> *sceneHandle = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>();</div>
<div class="line"><span class="lineno">  809</span>  <span class="keywordtype">bool</span> ret = connect(sceneHandle, SIGNAL(preferenceChanged(<span class="keyword">const</span> QString &amp;)),</div>
<div class="line"><span class="lineno">  810</span>                     <span class="keyword">this</span>, SLOT(onPreferenceChanged(<span class="keyword">const</span> QString &amp;)));</div>
<div class="line"><span class="lineno">  811</span>  onPreferenceChanged(<span class="stringliteral">&quot;ColorCalibration&quot;</span>);</div>
<div class="line"><span class="lineno">  812</span>  assert(ret);</div>
<div class="line"><span class="lineno">  813</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4f26f765f12d2feff9f3d11452be54b4" name="a4f26f765f12d2feff9f3d11452be54b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f26f765f12d2feff9f3d11452be54b4">&#9670;&nbsp;</a></span>showHistogram</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::showHistogram </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1764</span>                                {</div>
<div class="line"><span class="lineno"> 1765</span>  <span class="keywordflow">if</span> (!m_isHistogramEnable) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1766</span>  <span class="keywordflow">if</span> (m_histogramPopup-&gt;isVisible())</div>
<div class="line"><span class="lineno"> 1767</span>    m_histogramPopup-&gt;raise();</div>
<div class="line"><span class="lineno"> 1768</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1769</span>    m_histogramPopup-&gt;setImage(<a class="code hl_function" href="class_image_viewer.html#af80b9641df537a1bf3b0c98f2c431420">getImage</a>());</div>
<div class="line"><span class="lineno"> 1770</span>    m_histogramPopup-&gt;show();</div>
<div class="line"><span class="lineno"> 1771</span>  }</div>
<div class="line"><span class="lineno"> 1772</span>}</div>
<div class="ttc" id="aclass_image_viewer_html_af80b9641df537a1bf3b0c98f2c431420"><div class="ttname"><a href="class_image_viewer.html#af80b9641df537a1bf3b0c98f2c431420">ImageViewer::getImage</a></div><div class="ttdeci">TImageP getImage()</div><div class="ttdef"><b>Definition:</b> imageviewer.h:108</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a1aa26cb294de9d191411352d3d6c14" name="a1a1aa26cb294de9d191411352d3d6c14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a1aa26cb294de9d191411352d3d6c14">&#9670;&nbsp;</a></span>swapCompared</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::swapCompared </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1298</span>                               {</div>
<div class="line"><span class="lineno"> 1299</span>  m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#afe3ed555ed9a43177446841f0978e58c">m_swapCompared</a> = !m_compareSettings.<a class="code hl_variable" href="class_image_painter_1_1_compare_settings.html#afe3ed555ed9a43177446841f0978e58c">m_swapCompared</a>;</div>
<div class="line"><span class="lineno"> 1300</span>  update();</div>
<div class="line"><span class="lineno"> 1301</span>}</div>
<div class="ttc" id="aclass_image_painter_1_1_compare_settings_html_afe3ed555ed9a43177446841f0978e58c"><div class="ttname"><a href="class_image_painter_1_1_compare_settings.html#afe3ed555ed9a43177446841f0978e58c">ImagePainter::CompareSettings::m_swapCompared</a></div><div class="ttdeci">bool m_swapCompared</div><div class="ttdoc">Used to swap compared images.</div><div class="ttdef"><b>Definition:</b> imagepainter.h:94</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afa60f2e0498eca8a566b89a3ff199294" name="afa60f2e0498eca8a566b89a3ff199294"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa60f2e0498eca8a566b89a3ff199294">&#9670;&nbsp;</a></span>tabletEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::tabletEvent </td>
          <td>(</td>
          <td class="paramtype">QTabletEvent *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1466</span>                                             {</div>
<div class="line"><span class="lineno"> 1467</span>  <span class="comment">// qDebug() &lt;&lt; &quot;[tabletEvent]&quot;;</span></div>
<div class="line"><span class="lineno"> 1468</span>  <span class="keywordflow">if</span> (e-&gt;type() == QTabletEvent::TabletPress) {</div>
<div class="line"><span class="lineno"> 1469</span>    m_stylusUsed = e-&gt;pointerType() ? true : <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1470</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e-&gt;type() == QTabletEvent::TabletRelease) {</div>
<div class="line"><span class="lineno"> 1471</span>    m_stylusUsed = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1472</span>  }</div>
<div class="line"><span class="lineno"> 1473</span> </div>
<div class="line"><span class="lineno"> 1474</span>  e-&gt;accept();</div>
<div class="line"><span class="lineno"> 1475</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a05adf92e840fa8abb104d668c0ed68c5" name="a05adf92e840fa8abb104d668c0ed68c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05adf92e840fa8abb104d668c0ed68c5">&#9670;&nbsp;</a></span>touchEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::touchEvent </td>
          <td>(</td>
          <td class="paramtype">QTouchEvent *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1544</span>                                                     {</div>
<div class="line"><span class="lineno"> 1545</span>  <span class="comment">// qDebug() &lt;&lt; &quot;[touchEvent]&quot;;</span></div>
<div class="line"><span class="lineno"> 1546</span>  <span class="keywordflow">if</span> (type == QEvent::TouchBegin) {</div>
<div class="line"><span class="lineno"> 1547</span>    m_touchActive   = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1548</span>    m_firstPanPoint = e-&gt;touchPoints().at(0).pos();</div>
<div class="line"><span class="lineno"> 1549</span>    <span class="comment">// obtain device type</span></div>
<div class="line"><span class="lineno"> 1550</span>    m_touchDevice = e-&gt;device()-&gt;type();</div>
<div class="line"><span class="lineno"> 1551</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_touchActive) {</div>
<div class="line"><span class="lineno"> 1552</span>    <span class="comment">// touchpads must have 2 finger panning for tools and navigation to be</span></div>
<div class="line"><span class="lineno"> 1553</span>    <span class="comment">// functional on other devices, 1 finger panning is preferred</span></div>
<div class="line"><span class="lineno"> 1554</span>    <span class="keywordflow">if</span> ((e-&gt;touchPoints().count() == 2 &amp;&amp;</div>
<div class="line"><span class="lineno"> 1555</span>         m_touchDevice == QTouchDevice::TouchPad) ||</div>
<div class="line"><span class="lineno"> 1556</span>        (e-&gt;touchPoints().count() == 1 &amp;&amp;</div>
<div class="line"><span class="lineno"> 1557</span>         m_touchDevice == QTouchDevice::TouchScreen)) {</div>
<div class="line"><span class="lineno"> 1558</span>      QTouchEvent::TouchPoint panPoint = e-&gt;touchPoints().at(0);</div>
<div class="line"><span class="lineno"> 1559</span>      <span class="keywordflow">if</span> (!m_panning) {</div>
<div class="line"><span class="lineno"> 1560</span>        QPointF deltaPoint = panPoint.pos() - m_firstPanPoint;</div>
<div class="line"><span class="lineno"> 1561</span>        <span class="comment">// minimize accidental and jerky zooming/rotating during 2 finger</span></div>
<div class="line"><span class="lineno"> 1562</span>        <span class="comment">// panning</span></div>
<div class="line"><span class="lineno"> 1563</span>        <span class="keywordflow">if</span> ((deltaPoint.manhattanLength() &gt; 100) &amp;&amp; !m_zooming) {</div>
<div class="line"><span class="lineno"> 1564</span>          m_panning = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1565</span>        }</div>
<div class="line"><span class="lineno"> 1566</span>      }</div>
<div class="line"><span class="lineno"> 1567</span>      <span class="keywordflow">if</span> (m_panning) {</div>
<div class="line"><span class="lineno"> 1568</span>        QPoint curPos      = panPoint.pos().toPoint() * getDevPixRatio();</div>
<div class="line"><span class="lineno"> 1569</span>        QPoint lastPos     = panPoint.lastPos().toPoint() * getDevPixRatio();</div>
<div class="line"><span class="lineno"> 1570</span>        QPoint centerDelta = curPos - lastPos;</div>
<div class="line"><span class="lineno"> 1571</span>        <a class="code hl_function" href="class_image_viewer.html#a574ebcd95b038e59de03f0bb6e6a9dd2">panQt</a>(centerDelta);</div>
<div class="line"><span class="lineno"> 1572</span>      }</div>
<div class="line"><span class="lineno"> 1573</span>    }</div>
<div class="line"><span class="lineno"> 1574</span>  }</div>
<div class="line"><span class="lineno"> 1575</span>  <span class="keywordflow">if</span> (type == QEvent::TouchEnd || type == QEvent::TouchCancel) {</div>
<div class="line"><span class="lineno"> 1576</span>    m_touchActive = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1577</span>    m_panning     = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1578</span>  }</div>
<div class="line"><span class="lineno"> 1579</span>  e-&gt;accept();</div>
<div class="line"><span class="lineno"> 1580</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae72f79ae8b4bae6b1bdfc94022414be3" name="ae72f79ae8b4bae6b1bdfc94022414be3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae72f79ae8b4bae6b1bdfc94022414be3">&#9670;&nbsp;</a></span>updateImageViewer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::updateImageViewer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Update image viewer, reset current matrix transformation, current position and update view. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1329</span>                                    {</div>
<div class="line"><span class="lineno"> 1330</span>  setViewAff(<a class="code hl_class" href="class_t_affine.html">TAffine</a>());</div>
<div class="line"><span class="lineno"> 1331</span>  m_pos = QPoint(0, 0);</div>
<div class="line"><span class="lineno"> 1332</span>  update();</div>
<div class="line"><span class="lineno"> 1333</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afa10c8e25017a6e4efc3b017f40e5a6e" name="afa10c8e25017a6e4efc3b017f40e5a6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa10c8e25017a6e4efc3b017f40e5a6e">&#9670;&nbsp;</a></span>wheelEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::wheelEvent </td>
          <td>(</td>
          <td class="paramtype">QWheelEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Apply zoom. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1247</span>                                               {</div>
<div class="line"><span class="lineno"> 1248</span>  <span class="keywordflow">if</span> (!m_image) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1249</span>  <span class="keywordflow">if</span> (event-&gt;orientation() == Qt::Horizontal) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1250</span>  <span class="keywordtype">int</span> delta = 0;</div>
<div class="line"><span class="lineno"> 1251</span>  <span class="keywordflow">switch</span> (event-&gt;source()) {</div>
<div class="line"><span class="lineno"> 1252</span>  <span class="keywordflow">case</span> Qt::MouseEventNotSynthesized: {</div>
<div class="line"><span class="lineno"> 1253</span>    <span class="keywordflow">if</span> (event-&gt;modifiers() &amp; Qt::AltModifier)</div>
<div class="line"><span class="lineno"> 1254</span>      delta = <span class="keyword">event</span>-&gt;angleDelta().x();</div>
<div class="line"><span class="lineno"> 1255</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1256</span>      delta = <span class="keyword">event</span>-&gt;angleDelta().y();</div>
<div class="line"><span class="lineno"> 1257</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1258</span>  }</div>
<div class="line"><span class="lineno"> 1259</span> </div>
<div class="line"><span class="lineno"> 1260</span>  <span class="keywordflow">case</span> Qt::MouseEventSynthesizedBySystem: {</div>
<div class="line"><span class="lineno"> 1261</span>    QPoint numPixels  = <span class="keyword">event</span>-&gt;pixelDelta();</div>
<div class="line"><span class="lineno"> 1262</span>    QPoint numDegrees = <span class="keyword">event</span>-&gt;angleDelta() / 8;</div>
<div class="line"><span class="lineno"> 1263</span>    <span class="keywordflow">if</span> (!numPixels.isNull()) {</div>
<div class="line"><span class="lineno"> 1264</span>      delta = <span class="keyword">event</span>-&gt;pixelDelta().y();</div>
<div class="line"><span class="lineno"> 1265</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!numDegrees.isNull()) {</div>
<div class="line"><span class="lineno"> 1266</span>      QPoint numSteps = numDegrees / 15;</div>
<div class="line"><span class="lineno"> 1267</span>      delta           = numSteps.y();</div>
<div class="line"><span class="lineno"> 1268</span>    }</div>
<div class="line"><span class="lineno"> 1269</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1270</span>  }</div>
<div class="line"><span class="lineno"> 1271</span> </div>
<div class="line"><span class="lineno"> 1272</span>  <span class="keywordflow">default</span>:  <span class="comment">// Qt::MouseEventSynthesizedByQt,</span></div>
<div class="line"><span class="lineno"> 1273</span>            <span class="comment">// Qt::MouseEventSynthesizedByApplication</span></div>
<div class="line"><span class="lineno"> 1274</span>  {</div>
<div class="line"><span class="lineno"> 1275</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;not supported event: Qt::MouseEventSynthesizedByQt, &quot;</span></div>
<div class="line"><span class="lineno"> 1276</span>                 <span class="stringliteral">&quot;Qt::MouseEventSynthesizedByApplication&quot;</span></div>
<div class="line"><span class="lineno"> 1277</span>              &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 1278</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1279</span>  }</div>
<div class="line"><span class="lineno"> 1280</span> </div>
<div class="line"><span class="lineno"> 1281</span>  }  <span class="comment">// end switch</span></div>
<div class="line"><span class="lineno"> 1282</span> </div>
<div class="line"><span class="lineno"> 1283</span>  <span class="keywordflow">if</span> (abs(delta) &gt; 0) {</div>
<div class="line"><span class="lineno"> 1284</span>    <span class="keywordflow">if</span> ((m_gestureActive == <span class="keyword">true</span> &amp;&amp;</div>
<div class="line"><span class="lineno"> 1285</span>         m_touchDevice == QTouchDevice::TouchScreen) ||</div>
<div class="line"><span class="lineno"> 1286</span>        m_gestureActive == <span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno"> 1287</span>      <span class="keywordtype">int</span> delta = <span class="keyword">event</span>-&gt;delta() &gt; 0 ? 120 : -120;</div>
<div class="line"><span class="lineno"> 1288</span>      QPoint center(event-&gt;pos().x() * getDevPixRatio() - width() / 2,</div>
<div class="line"><span class="lineno"> 1289</span>                    -event-&gt;pos().y() * getDevPixRatio() + height() / 2);</div>
<div class="line"><span class="lineno"> 1290</span>      zoomQt(center, exp(0.001 * delta));</div>
<div class="line"><span class="lineno"> 1291</span>    }</div>
<div class="line"><span class="lineno"> 1292</span>  }</div>
<div class="line"><span class="lineno"> 1293</span>  <span class="keyword">event</span>-&gt;accept();</div>
<div class="line"><span class="lineno"> 1294</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae32677b4e8710e66a535bfabd9bfd84d" name="ae32677b4e8710e66a535bfabd9bfd84d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae32677b4e8710e66a535bfabd9bfd84d">&#9670;&nbsp;</a></span>zoomQt() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::zoomQt </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>forward</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>reset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  713</span>                                                 {</div>
<div class="line"><span class="lineno">  714</span>  <span class="keywordtype">double</span> scale2 = m_viewAff.det();</div>
<div class="line"><span class="lineno">  715</span>  <span class="keywordflow">if</span> (reset)</div>
<div class="line"><span class="lineno">  716</span>    setViewAff(<a class="code hl_class" href="class_t_affine.html">TAffine</a>());</div>
<div class="line"><span class="lineno">  717</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((scale2 &lt; 100000 || !forward) &amp;&amp;</div>
<div class="line"><span class="lineno">  718</span>            (scale2 &gt; 0.001 * 0.05 || forward))) {</div>
<div class="line"><span class="lineno">  719</span>    <span class="keywordtype">double</span> oldZoomScale = sqrt(scale2);</div>
<div class="line"><span class="lineno">  720</span>    <span class="keywordtype">double</span> zoomScale =</div>
<div class="line"><span class="lineno">  721</span>        reset ? 1 : ImageUtils::getQuantizedZoomFactor(oldZoomScale, forward);</div>
<div class="line"><span class="lineno">  722</span>    setViewAff(<a class="code hl_class" href="class_t_scale.html">TScale</a>(zoomScale / oldZoomScale) * m_viewAff);</div>
<div class="line"><span class="lineno">  723</span>  }</div>
<div class="line"><span class="lineno">  724</span>  update();</div>
<div class="line"><span class="lineno">  725</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4b00ca265e005c2de288ac04858e46cd" name="a4b00ca265e005c2de288ac04858e46cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b00ca265e005c2de288ac04858e46cd">&#9670;&nbsp;</a></span>zoomQt() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageViewer::zoomQt </td>
          <td>(</td>
          <td class="paramtype">const QPoint &amp;&#160;</td>
          <td class="paramname"><em>center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>factor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Add to current transformation matrix a <b>center</b> translation matched with a scale of factor <b>factor</b>. Apply a zoom of factor <b>factor</b> with center <b>center</b>. </p>
<div class="fragment"><div class="line"><span class="lineno">  701</span>                                                            {</div>
<div class="line"><span class="lineno">  702</span>  <span class="keywordflow">if</span> (factor == 1.0) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  703</span>  <a class="code hl_class" href="class_t_point_t.html">TPointD</a> delta(center.x(), center.y());</div>
<div class="line"><span class="lineno">  704</span>  <span class="keywordtype">double</span> scale2 = fabs(m_viewAff.det());</div>
<div class="line"><span class="lineno">  705</span>  <span class="keywordflow">if</span> ((scale2 &lt; 100000 || factor &lt; 1) &amp;&amp; (scale2 &gt; 0.001 * 0.05 || factor &gt; 1))</div>
<div class="line"><span class="lineno">  706</span>    setViewAff(<a class="code hl_class" href="class_t_translation.html">TTranslation</a>(delta) * <a class="code hl_class" href="class_t_scale.html">TScale</a>(factor) * <a class="code hl_class" href="class_t_translation.html">TTranslation</a>(-delta) *</div>
<div class="line"><span class="lineno">  707</span>               m_viewAff);</div>
<div class="line"><span class="lineno">  708</span>  update();</div>
<div class="line"><span class="lineno">  709</span>}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>E:/opentoonz/toonz/sources/toonz/<a class="el" href="">imageviewer.h</a></li>
<li>E:/opentoonz/toonz/sources/toonz/<a class="el" href="">flipbook.cpp</a></li>
<li>E:/opentoonz/toonz/sources/toonz/<a class="el" href="">imageviewer.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
