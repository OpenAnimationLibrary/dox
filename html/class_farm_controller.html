<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: FarmController Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="class_farm_controller-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">FarmController Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for FarmController:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_farm_controller.png" usemap="#FarmController_map" alt=""/>
  <map id="FarmController_map" name="FarmController_map">
<area href="class_t_farm_executor.html" alt="TFarmExecutor" shape="rect" coords="0,112,104,136"/>
<area href="class_t_farm_controller.html" alt="TFarmController" shape="rect" coords="114,112,218,136"/>
<area href="class_t_tcp_ip_server.html" alt="TTcpIpServer" shape="rect" coords="0,56,104,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a58c7b72da5c960c02aefd2295d9dd7c1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a58c7b72da5c960c02aefd2295d9dd7c1">FarmController</a> (const QString &amp;hostName, const QString &amp;addr, int port, <a class="el" href="class_t_user_log.html">TUserLog</a> *log)</td></tr>
<tr class="separator:a58c7b72da5c960c02aefd2295d9dd7c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b2ce70799797e9ef316603481758f0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a0b2ce70799797e9ef316603481758f0d">loadServersData</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;globalRoot)</td></tr>
<tr class="separator:a0b2ce70799797e9ef316603481758f0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa734a34673db78dc72e4bd004046c1aa"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#aa734a34673db78dc72e4bd004046c1aa">execute</a> (const <a class="el" href="classvector.html">vector</a>&lt; QString &gt; &amp;argv) override</td></tr>
<tr class="separator:aa734a34673db78dc72e4bd004046c1aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45afe05a7a803431e602de4b158db377"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a45afe05a7a803431e602de4b158db377">addTask</a> (const QString &amp;name, const QString &amp;cmdline, const QString &amp;user, const QString &amp;host, bool suspended, int priority, TFarmPlatform platform)</td></tr>
<tr class="separator:a45afe05a7a803431e602de4b158db377"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade71efec5885b08dbeb2564aa9e31d0e"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#ade71efec5885b08dbeb2564aa9e31d0e">addTask</a> (const <a class="el" href="class_t_farm_task.html">TFarmTask</a> &amp;task, bool suspended) override</td></tr>
<tr class="separator:ade71efec5885b08dbeb2564aa9e31d0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09dda7508f791eadc49c38586525741b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a09dda7508f791eadc49c38586525741b">removeTask</a> (const QString &amp;id) override</td></tr>
<tr class="separator:a09dda7508f791eadc49c38586525741b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77108086fc40e698eec6125559b02dfe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a77108086fc40e698eec6125559b02dfe">suspendTask</a> (const QString &amp;id) override</td></tr>
<tr class="separator:a77108086fc40e698eec6125559b02dfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a5f9090b17ba2c9e7c984790b558947"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a0a5f9090b17ba2c9e7c984790b558947">activateTask</a> (const QString &amp;id) override</td></tr>
<tr class="separator:a0a5f9090b17ba2c9e7c984790b558947"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf97cb2bc29ff2d3317013540db1f77a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#adf97cb2bc29ff2d3317013540db1f77a">restartTask</a> (const QString &amp;id) override</td></tr>
<tr class="separator:adf97cb2bc29ff2d3317013540db1f77a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af68943f16973d15d549751696d0bf1c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#af68943f16973d15d549751696d0bf1c6">getTasks</a> (<a class="el" href="classvector.html">vector</a>&lt; QString &gt; &amp;tasks) override</td></tr>
<tr class="separator:af68943f16973d15d549751696d0bf1c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4789807c7039fbb5fe1193f3baaeba5a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a4789807c7039fbb5fe1193f3baaeba5a">getTasks</a> (const QString &amp;parentId, <a class="el" href="classvector.html">vector</a>&lt; QString &gt; &amp;tasks) override</td></tr>
<tr class="separator:a4789807c7039fbb5fe1193f3baaeba5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ec7fe53f587f17ad91ecff738f4d12a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a5ec7fe53f587f17ad91ecff738f4d12a">getTasks</a> (const QString &amp;parentId, <a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="class_task_short_info.html">TaskShortInfo</a> &gt; &amp;tasks) override</td></tr>
<tr class="separator:a5ec7fe53f587f17ad91ecff738f4d12a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99fe26bd6e19e30b15fda13e4cd193e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a99fe26bd6e19e30b15fda13e4cd193e2">queryTaskInfo</a> (const QString &amp;id, <a class="el" href="class_t_farm_task.html">TFarmTask</a> &amp;task) override</td></tr>
<tr class="separator:a99fe26bd6e19e30b15fda13e4cd193e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a280eeb3f0ba1db5df54f0394054a8078"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a280eeb3f0ba1db5df54f0394054a8078">queryTaskShortInfo</a> (const QString &amp;id, QString &amp;parentId, QString &amp;name, TaskState &amp;status) override</td></tr>
<tr class="separator:a280eeb3f0ba1db5df54f0394054a8078"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a872e8913017de5b828dc0d95e3723c4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a872e8913017de5b828dc0d95e3723c4c">attachServer</a> (const QString &amp;name, const QString &amp;addr, int port) override</td></tr>
<tr class="separator:a872e8913017de5b828dc0d95e3723c4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08f94f57e1eb693ee525cc123e801ce2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a08f94f57e1eb693ee525cc123e801ce2">detachServer</a> (const QString &amp;name, const QString &amp;addr, int port) override</td></tr>
<tr class="separator:a08f94f57e1eb693ee525cc123e801ce2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bcc0592cd4fb4bb9733bcbb05e0e4f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a7bcc0592cd4fb4bb9733bcbb05e0e4f4">taskSubmissionError</a> (const QString &amp;taskId, int errCode) override</td></tr>
<tr class="separator:a7bcc0592cd4fb4bb9733bcbb05e0e4f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d5429427f1121760cf5982877d95eee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a5d5429427f1121760cf5982877d95eee">taskProgress</a> (const QString &amp;taskId, int step, int stepCount, int frameNumber, FrameState state) override</td></tr>
<tr class="separator:a5d5429427f1121760cf5982877d95eee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1365d9bd2b148a156f063cb5a2f7ae1b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a1365d9bd2b148a156f063cb5a2f7ae1b">taskCompleted</a> (const QString &amp;taskId, int exitCode) override</td></tr>
<tr class="separator:a1365d9bd2b148a156f063cb5a2f7ae1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba9d90d93cc4900e7df0ea08ef514e2c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#aba9d90d93cc4900e7df0ea08ef514e2c">getServers</a> (<a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="class_server_identity.html">ServerIdentity</a> &gt; &amp;servers) override</td></tr>
<tr class="separator:aba9d90d93cc4900e7df0ea08ef514e2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab539ebd037b8f0b4c293304ead88e539"><td class="memItemLeft" align="right" valign="top">ServerState&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#ab539ebd037b8f0b4c293304ead88e539">queryServerState2</a> (const QString &amp;id) override</td></tr>
<tr class="separator:ab539ebd037b8f0b4c293304ead88e539"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dea6e6db4c704a287dfa9491ed81de5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a0dea6e6db4c704a287dfa9491ed81de5">queryServerInfo</a> (const QString &amp;id, <a class="el" href="class_server_info.html">ServerInfo</a> &amp;info) override</td></tr>
<tr class="separator:a0dea6e6db4c704a287dfa9491ed81de5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f3f679487b0173df9e852f46e6ce17e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a7f3f679487b0173df9e852f46e6ce17e">activateServer</a> (const QString &amp;id) override</td></tr>
<tr class="separator:a7f3f679487b0173df9e852f46e6ce17e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8a8a1ac47d67f0fef5b1c5e9e4000e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#af8a8a1ac47d67f0fef5b1c5e9e4000e3">deactivateServer</a> (const QString &amp;id, bool completeRunningTasks) override</td></tr>
<tr class="separator:af8a8a1ac47d67f0fef5b1c5e9e4000e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb5e4e9cd73abc3b76825043af3ce321"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#abb5e4e9cd73abc3b76825043af3ce321">doAddTask</a> (const QString &amp;id, const QString &amp;parentId, const QString &amp;name, const QString &amp;cmdline, const QString &amp;user, const QString &amp;host, bool suspended, int stepCount, int priority, TFarmPlatform platform)</td></tr>
<tr class="separator:abb5e4e9cd73abc3b76825043af3ce321"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0078fcec754f34a153da6559886d2da5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a0078fcec754f34a153da6559886d2da5">startTask</a> (<a class="el" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task, <a class="el" href="class_farm_server_proxy.html">FarmServerProxy</a> *server)</td></tr>
<tr class="separator:a0078fcec754f34a153da6559886d2da5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bd6793647784ee2dae83d1e0d97c06d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a3bd6793647784ee2dae83d1e0d97c06d">getTaskToStart</a> (<a class="el" href="class_farm_server_proxy.html">FarmServerProxy</a> *server=0)</td></tr>
<tr class="separator:a3bd6793647784ee2dae83d1e0d97c06d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a325905caa8033aa67fae2ef5c652c6ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a325905caa8033aa67fae2ef5c652c6ca">getNextTaskToStart</a> (<a class="el" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task, <a class="el" href="class_farm_server_proxy.html">FarmServerProxy</a> *server)</td></tr>
<tr class="separator:a325905caa8033aa67fae2ef5c652c6ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af906eaf2bcb3dab4b2b72d73a68bb9ff"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#af906eaf2bcb3dab4b2b72d73a68bb9ff">tryToStartTask</a> (<a class="el" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task)</td></tr>
<tr class="separator:af906eaf2bcb3dab4b2b72d73a68bb9ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeae3f4ef04cdaab0e6e5aaebe0f1385b"><td class="memItemLeft" align="right" valign="top">ServerState&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#aeae3f4ef04cdaab0e6e5aaebe0f1385b">getServerState</a> (<a class="el" href="class_farm_server_proxy.html">FarmServerProxy</a> *server, QString &amp;taskId)</td></tr>
<tr class="separator:aeae3f4ef04cdaab0e6e5aaebe0f1385b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabd707c063df8b9900668deee0c5e7bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#aabd707c063df8b9900668deee0c5e7bc">initServer</a> (<a class="el" href="class_farm_server_proxy.html">FarmServerProxy</a> *server)</td></tr>
<tr class="separator:aabd707c063df8b9900668deee0c5e7bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb6dc1e346ff64133b9be0063b0f91da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#aeb6dc1e346ff64133b9be0063b0f91da">load</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;fp)</td></tr>
<tr class="separator:aeb6dc1e346ff64133b9be0063b0f91da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad99f421b99dfdf554ed0275bf23996e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#ad99f421b99dfdf554ed0275bf23996e8">save</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;fp) const</td></tr>
<tr class="separator:ad99f421b99dfdf554ed0275bf23996e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a287bf05b58ad6b81a4ea857d48a2ed72"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a287bf05b58ad6b81a4ea857d48a2ed72">doRestartTask</a> (const QString &amp;id, bool fromClient, <a class="el" href="class_farm_server_proxy.html">FarmServerProxy</a> *server)</td></tr>
<tr class="separator:a287bf05b58ad6b81a4ea857d48a2ed72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a286a1578819b87d889108ccdbe3e1d6f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a286a1578819b87d889108ccdbe3e1d6f">activateReadyServers</a> ()</td></tr>
<tr class="separator:a286a1578819b87d889108ccdbe3e1d6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_t_farm_executor"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_t_farm_executor')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_t_farm_executor.html">TFarmExecutor</a></td></tr>
<tr class="memitem:a23755a2dcf1bee135699d627c22ada42 inherit pub_methods_class_t_farm_executor"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_farm_executor.html#a23755a2dcf1bee135699d627c22ada42">TFarmExecutor</a> (int port)</td></tr>
<tr class="separator:a23755a2dcf1bee135699d627c22ada42 inherit pub_methods_class_t_farm_executor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a9a05298e4008a0ba84b32572203308 inherit pub_methods_class_t_farm_executor"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_farm_executor.html#a6a9a05298e4008a0ba84b32572203308">onReceive</a> (int socket, const QString &amp;data) override</td></tr>
<tr class="separator:a6a9a05298e4008a0ba84b32572203308 inherit pub_methods_class_t_farm_executor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_t_tcp_ip_server"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_t_tcp_ip_server')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_t_tcp_ip_server.html">TTcpIpServer</a></td></tr>
<tr class="memitem:a2b7dfe4527ac7e2f4830cc5de5d14027 inherit pub_methods_class_t_tcp_ip_server"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tcp_ip_server.html#a2b7dfe4527ac7e2f4830cc5de5d14027">TTcpIpServer</a> (int port)</td></tr>
<tr class="separator:a2b7dfe4527ac7e2f4830cc5de5d14027 inherit pub_methods_class_t_tcp_ip_server"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a165b98205e00b83d68b8aad8f51968f4 inherit pub_methods_class_t_tcp_ip_server"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tcp_ip_server.html#a165b98205e00b83d68b8aad8f51968f4">getPort</a> () const</td></tr>
<tr class="separator:a165b98205e00b83d68b8aad8f51968f4 inherit pub_methods_class_t_tcp_ip_server"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83cfa25ef4a85bbea8ebb8c711da2402 inherit pub_methods_class_t_tcp_ip_server"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tcp_ip_server.html#a83cfa25ef4a85bbea8ebb8c711da2402">run</a> ()</td></tr>
<tr class="separator:a83cfa25ef4a85bbea8ebb8c711da2402 inherit pub_methods_class_t_tcp_ip_server"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a731c24eadb505c40eaca742f3da8ad44 inherit pub_methods_class_t_tcp_ip_server"><td class="memItemLeft" align="right" valign="top"><a id="a731c24eadb505c40eaca742f3da8ad44" name="a731c24eadb505c40eaca742f3da8ad44"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>shutdown</b> ()</td></tr>
<tr class="separator:a731c24eadb505c40eaca742f3da8ad44 inherit pub_methods_class_t_tcp_ip_server"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91eafa28255d6812e048be5f414caef9 inherit pub_methods_class_t_tcp_ip_server"><td class="memItemLeft" align="right" valign="top"><a id="a91eafa28255d6812e048be5f414caef9" name="a91eafa28255d6812e048be5f414caef9"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>onReceive</b> (int socket, const QString &amp;data)=0</td></tr>
<tr class="separator:a91eafa28255d6812e048be5f414caef9 inherit pub_methods_class_t_tcp_ip_server"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e5900d218e3409be856ae584b7622b5 inherit pub_methods_class_t_tcp_ip_server"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tcp_ip_server.html#a9e5900d218e3409be856ae584b7622b5">sendReply</a> (int socket, const QString &amp;reply)</td></tr>
<tr class="separator:a9e5900d218e3409be856ae584b7622b5 inherit pub_methods_class_t_tcp_ip_server"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2aa546325fdcb468af61633f329682d inherit pub_methods_class_t_tcp_ip_server"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_tcp_ip_server.html#ac2aa546325fdcb468af61633f329682d">getExitCode</a> () const</td></tr>
<tr class="separator:ac2aa546325fdcb468af61633f329682d inherit pub_methods_class_t_tcp_ip_server"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_t_farm_controller"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_t_farm_controller')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_t_farm_controller.html">TFarmController</a></td></tr>
<tr class="memitem:aa666456632f4f8c11da712c196f0a9a0 inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="aa666456632f4f8c11da712c196f0a9a0" name="aa666456632f4f8c11da712c196f0a9a0"></a>
virtual QString&#160;</td><td class="memItemRight" valign="bottom"><b>addTask</b> (const <a class="el" href="class_t_farm_task.html">TFarmTask</a> &amp;task, bool suspended)=0</td></tr>
<tr class="separator:aa666456632f4f8c11da712c196f0a9a0 inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1a01f4c696f831913fc02c768cb82ae inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="ae1a01f4c696f831913fc02c768cb82ae" name="ae1a01f4c696f831913fc02c768cb82ae"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>removeTask</b> (const QString &amp;id)=0</td></tr>
<tr class="separator:ae1a01f4c696f831913fc02c768cb82ae inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dab8e701a37f60468352bfc3660165f inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="a2dab8e701a37f60468352bfc3660165f" name="a2dab8e701a37f60468352bfc3660165f"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>suspendTask</b> (const QString &amp;id)=0</td></tr>
<tr class="separator:a2dab8e701a37f60468352bfc3660165f inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f6cdf5ad68b7cefafe44bf88098ab31 inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="a0f6cdf5ad68b7cefafe44bf88098ab31" name="a0f6cdf5ad68b7cefafe44bf88098ab31"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>activateTask</b> (const QString &amp;id)=0</td></tr>
<tr class="separator:a0f6cdf5ad68b7cefafe44bf88098ab31 inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ac1a81ea471fd1e78098f8459afbc6b inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="a0ac1a81ea471fd1e78098f8459afbc6b" name="a0ac1a81ea471fd1e78098f8459afbc6b"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>restartTask</b> (const QString &amp;id)=0</td></tr>
<tr class="separator:a0ac1a81ea471fd1e78098f8459afbc6b inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a633e64da515c12db339b1196c205bb70 inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="a633e64da515c12db339b1196c205bb70" name="a633e64da515c12db339b1196c205bb70"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>getTasks</b> (std::vector&lt; QString &gt; &amp;tasks)=0</td></tr>
<tr class="separator:a633e64da515c12db339b1196c205bb70 inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace5e3777da5c3ebf8f460c8fd6808cc9 inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="ace5e3777da5c3ebf8f460c8fd6808cc9" name="ace5e3777da5c3ebf8f460c8fd6808cc9"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>getTasks</b> (const QString &amp;parentId, std::vector&lt; QString &gt; &amp;tasks)=0</td></tr>
<tr class="separator:ace5e3777da5c3ebf8f460c8fd6808cc9 inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a703cd13a15b39a664dd01179dd992a2b inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="a703cd13a15b39a664dd01179dd992a2b" name="a703cd13a15b39a664dd01179dd992a2b"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>getTasks</b> (const QString &amp;parentId, std::vector&lt; <a class="el" href="class_task_short_info.html">TaskShortInfo</a> &gt; &amp;tasks)=0</td></tr>
<tr class="separator:a703cd13a15b39a664dd01179dd992a2b inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a866a250be336544a8095053879671df7 inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="a866a250be336544a8095053879671df7" name="a866a250be336544a8095053879671df7"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>queryTaskInfo</b> (const QString &amp;id, <a class="el" href="class_t_farm_task.html">TFarmTask</a> &amp;task)=0</td></tr>
<tr class="separator:a866a250be336544a8095053879671df7 inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86ff83f6d762b2080a715207504ac35e inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="a86ff83f6d762b2080a715207504ac35e" name="a86ff83f6d762b2080a715207504ac35e"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>queryTaskShortInfo</b> (const QString &amp;id, QString &amp;parentId, QString &amp;name, TaskState &amp;status)=0</td></tr>
<tr class="separator:a86ff83f6d762b2080a715207504ac35e inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1295b00616093f0768457d831514f791 inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="a1295b00616093f0768457d831514f791" name="a1295b00616093f0768457d831514f791"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>attachServer</b> (const QString &amp;name, const QString &amp;addr, int port)=0</td></tr>
<tr class="separator:a1295b00616093f0768457d831514f791 inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af12aeedc357fdedd7c7f5d5e8dd734e9 inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="af12aeedc357fdedd7c7f5d5e8dd734e9" name="af12aeedc357fdedd7c7f5d5e8dd734e9"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>detachServer</b> (const QString &amp;name, const QString &amp;addr, int port)=0</td></tr>
<tr class="separator:af12aeedc357fdedd7c7f5d5e8dd734e9 inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fbe33a7b8b7f6f6fd75bd399c5a897c inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="a2fbe33a7b8b7f6f6fd75bd399c5a897c" name="a2fbe33a7b8b7f6f6fd75bd399c5a897c"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>taskSubmissionError</b> (const QString &amp;taskId, int errCode)=0</td></tr>
<tr class="separator:a2fbe33a7b8b7f6f6fd75bd399c5a897c inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4401b35a5bb585e280d5bfe23bf21efb inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="a4401b35a5bb585e280d5bfe23bf21efb" name="a4401b35a5bb585e280d5bfe23bf21efb"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>taskProgress</b> (const QString &amp;taskId, int step, int stepCount, int frameNumber, FrameState state)=0</td></tr>
<tr class="separator:a4401b35a5bb585e280d5bfe23bf21efb inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f2729135eeddf1420a66c80a30b2db9 inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="a8f2729135eeddf1420a66c80a30b2db9" name="a8f2729135eeddf1420a66c80a30b2db9"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>taskCompleted</b> (const QString &amp;taskId, int exitCode)=0</td></tr>
<tr class="separator:a8f2729135eeddf1420a66c80a30b2db9 inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70e86a2db6077819e96a807952b49c1c inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="a70e86a2db6077819e96a807952b49c1c" name="a70e86a2db6077819e96a807952b49c1c"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>getServers</b> (std::vector&lt; <a class="el" href="class_server_identity.html">ServerIdentity</a> &gt; &amp;servers)=0</td></tr>
<tr class="separator:a70e86a2db6077819e96a807952b49c1c inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5cebc672423f6a744686d5ae4bd5ff9 inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="ae5cebc672423f6a744686d5ae4bd5ff9" name="ae5cebc672423f6a744686d5ae4bd5ff9"></a>
virtual ServerState&#160;</td><td class="memItemRight" valign="bottom"><b>queryServerState2</b> (const QString &amp;id)=0</td></tr>
<tr class="separator:ae5cebc672423f6a744686d5ae4bd5ff9 inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a604427df4272a40dc0ade96a0b4f3ead inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="a604427df4272a40dc0ade96a0b4f3ead" name="a604427df4272a40dc0ade96a0b4f3ead"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>queryServerInfo</b> (const QString &amp;id, <a class="el" href="class_server_info.html">ServerInfo</a> &amp;info)=0</td></tr>
<tr class="separator:a604427df4272a40dc0ade96a0b4f3ead inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab77a1047ee700da1e7ae58fd13679f26 inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="ab77a1047ee700da1e7ae58fd13679f26" name="ab77a1047ee700da1e7ae58fd13679f26"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>activateServer</b> (const QString &amp;id)=0</td></tr>
<tr class="separator:ab77a1047ee700da1e7ae58fd13679f26 inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac52ba532df2e3c2e08a7402a0c79bec5 inherit pub_methods_class_t_farm_controller"><td class="memItemLeft" align="right" valign="top"><a id="ac52ba532df2e3c2e08a7402a0c79bec5" name="ac52ba532df2e3c2e08a7402a0c79bec5"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>deactivateServer</b> (const QString &amp;id, bool completeRunningTasks=true)=0</td></tr>
<tr class="separator:ac52ba532df2e3c2e08a7402a0c79bec5 inherit pub_methods_class_t_farm_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a559334fb6431abf9cb4a2cdbd0b22200"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a559334fb6431abf9cb4a2cdbd0b22200">m_hostName</a></td></tr>
<tr class="separator:a559334fb6431abf9cb4a2cdbd0b22200"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a350ad3adb4c2088f9e76ced2db2b20bd"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a350ad3adb4c2088f9e76ced2db2b20bd">m_addr</a></td></tr>
<tr class="separator:a350ad3adb4c2088f9e76ced2db2b20bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c1d4ccc9818d180417ae5f4e931c6d7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a2c1d4ccc9818d180417ae5f4e931c6d7">m_port</a></td></tr>
<tr class="separator:a2c1d4ccc9818d180417ae5f4e931c6d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5103e7b8ebe5e0767d9abcf50bb7d518"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_user_log.html">TUserLog</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a5103e7b8ebe5e0767d9abcf50bb7d518">m_userLog</a></td></tr>
<tr class="separator:a5103e7b8ebe5e0767d9abcf50bb7d518"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a447713751e2346d4ccdfff2f76edf916"><td class="memItemLeft" align="right" valign="top">map&lt; <a class="el" href="class_task_id.html">TaskId</a>, <a class="el" href="class_ctrl_farm_task.html">CtrlFarmTask</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a447713751e2346d4ccdfff2f76edf916">m_tasks</a></td></tr>
<tr class="separator:a447713751e2346d4ccdfff2f76edf916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35b30d893ff236eebcb2f9140c1daa15"><td class="memItemLeft" align="right" valign="top">map&lt; QString, <a class="el" href="class_farm_server_proxy.html">FarmServerProxy</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a35b30d893ff236eebcb2f9140c1daa15">m_servers</a></td></tr>
<tr class="separator:a35b30d893ff236eebcb2f9140c1daa15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada66986ce4916c439d1ae008b300160d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_thread_1_1_mutex.html">TThread::Mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#ada66986ce4916c439d1ae008b300160d">m_mutex</a></td></tr>
<tr class="separator:ada66986ce4916c439d1ae008b300160d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a36b3e560d89afd22439a5d50d4f5c27f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_farm_controller.html#a36b3e560d89afd22439a5d50d4f5c27f">NextTaskId</a> = 0</td></tr>
<tr class="separator:a36b3e560d89afd22439a5d50d4f5c27f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_class_t_farm_executor"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_class_t_farm_executor')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="class_t_farm_executor.html">TFarmExecutor</a></td></tr>
<tr class="memitem:a928bcb24958e962ea46db54048d0297c inherit pro_methods_class_t_farm_executor"><td class="memItemLeft" align="right" valign="top"><a id="a928bcb24958e962ea46db54048d0297c" name="a928bcb24958e962ea46db54048d0297c"></a>
virtual QString&#160;</td><td class="memItemRight" valign="bottom"><b>execute</b> (const std::vector&lt; QString &gt; &amp;argv)=0</td></tr>
<tr class="separator:a928bcb24958e962ea46db54048d0297c inherit pro_methods_class_t_farm_executor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a58c7b72da5c960c02aefd2295d9dd7c1" name="a58c7b72da5c960c02aefd2295d9dd7c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58c7b72da5c960c02aefd2295d9dd7c1">&#9670;&nbsp;</a></span>FarmController()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FarmController::FarmController </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>hostName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_user_log.html">TUserLog</a> *&#160;</td>
          <td class="paramname"><em>log</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  699</span>    : <a class="code hl_class" href="class_t_farm_executor.html">TFarmExecutor</a>(port)</div>
<div class="line"><span class="lineno">  700</span>    , m_hostName(hostName)</div>
<div class="line"><span class="lineno">  701</span>    , m_addr(addr)</div>
<div class="line"><span class="lineno">  702</span>    , m_port(port)</div>
<div class="line"><span class="lineno">  703</span>    , m_userLog(log) {</div>
<div class="line"><span class="lineno">  704</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> rootDir            = getGlobalRoot();</div>
<div class="line"><span class="lineno">  705</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> lastUsedIdFilePath = rootDir + <span class="stringliteral">&quot;config&quot;</span> + <span class="stringliteral">&quot;id.txt&quot;</span>;</div>
<div class="line"><span class="lineno">  706</span>  <a class="code hl_class" href="class_tifstream.html">Tifstream</a> is(lastUsedIdFilePath);</div>
<div class="line"><span class="lineno">  707</span>  <span class="keywordflow">if</span> (is.good()) is &gt;&gt; NextTaskId;</div>
<div class="line"><span class="lineno">  708</span>}</div>
<div class="ttc" id="aclass_t_farm_executor_html"><div class="ttname"><a href="class_t_farm_executor.html">TFarmExecutor</a></div><div class="ttdef"><b>Definition:</b> tfarmexecutor.h:28</div></div>
<div class="ttc" id="aclass_t_file_path_html"><div class="ttname"><a href="class_t_file_path.html">TFilePath</a></div><div class="ttdef"><b>Definition:</b> tfilepath.h:134</div></div>
<div class="ttc" id="aclass_tifstream_html"><div class="ttname"><a href="class_tifstream.html">Tifstream</a></div><div class="ttdef"><b>Definition:</b> tfilepath_io.h:62</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a286a1578819b87d889108ccdbe3e1d6f" name="a286a1578819b87d889108ccdbe3e1d6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a286a1578819b87d889108ccdbe3e1d6f">&#9670;&nbsp;</a></span>activateReadyServers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::activateReadyServers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2167</span>                                          {</div>
<div class="line"><span class="lineno"> 2168</span>  QMutexLocker sl(&amp;m_mutex);</div>
<div class="line"><span class="lineno"> 2169</span> </div>
<div class="line"><span class="lineno"> 2170</span>  map&lt;QString, FarmServerProxy *&gt;::iterator it = m_servers.begin();</div>
<div class="line"><span class="lineno"> 2171</span>  <span class="keywordflow">for</span> (; it != m_servers.end(); ++it) {</div>
<div class="line"><span class="lineno"> 2172</span>    <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *server = it-&gt;second;</div>
<div class="line"><span class="lineno"> 2173</span> </div>
<div class="line"><span class="lineno"> 2174</span>    ServerState state = queryServerState2(server-&gt;getId());</div>
<div class="line"><span class="lineno"> 2175</span>    <span class="keywordtype">int</span> tasksCount    = server-&gt;m_tasks.size();</div>
<div class="line"><span class="lineno"> 2176</span>    <span class="keywordflow">if</span> (state == Ready ||</div>
<div class="line"><span class="lineno"> 2177</span>        (state == Busy &amp;&amp; tasksCount &lt; server-&gt;m_maxTaskCount)) {</div>
<div class="line"><span class="lineno"> 2178</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; (server-&gt;m_maxTaskCount - tasksCount); ++i) {</div>
<div class="line"><span class="lineno"> 2179</span>        <span class="comment">// cerca un task da sottomettere al server</span></div>
<div class="line"><span class="lineno"> 2180</span>        <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = getTaskToStart(server);</div>
<div class="line"><span class="lineno"> 2181</span>        <span class="keywordflow">if</span> (task) {</div>
<div class="line"><span class="lineno"> 2182</span>          <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 2183</span>            <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Aborted) {</div>
<div class="line"><span class="lineno"> 2184</span>              vector&lt;QString&gt;::iterator it =</div>
<div class="line"><span class="lineno"> 2185</span>                  find(task-&gt;m_failedOnServers.begin(),</div>
<div class="line"><span class="lineno"> 2186</span>                       task-&gt;m_failedOnServers.end(), server-&gt;getId());</div>
<div class="line"><span class="lineno"> 2187</span> </div>
<div class="line"><span class="lineno"> 2188</span>              <span class="keywordflow">if</span> (it == task-&gt;m_failedOnServers.end())</div>
<div class="line"><span class="lineno"> 2189</span>                doRestartTask(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>, <span class="keyword">false</span>, server);</div>
<div class="line"><span class="lineno"> 2190</span>              <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2191</span>                doRestartTask(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>, <span class="keyword">false</span>, 0);</div>
<div class="line"><span class="lineno"> 2192</span>                <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *nextTask = getNextTaskToStart(task, server);</div>
<div class="line"><span class="lineno"> 2193</span>                <span class="keywordflow">if</span> (nextTask) startTask(nextTask, server);</div>
<div class="line"><span class="lineno"> 2194</span>              }</div>
<div class="line"><span class="lineno"> 2195</span>            } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2196</span>              startTask(task, server);</div>
<div class="line"><span class="lineno"> 2197</span>          } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp; <span class="comment">/*e*/</span>) {</div>
<div class="line"><span class="lineno"> 2198</span>          }</div>
<div class="line"><span class="lineno"> 2199</span>        }</div>
<div class="line"><span class="lineno"> 2200</span>      }</div>
<div class="line"><span class="lineno"> 2201</span>    }</div>
<div class="line"><span class="lineno"> 2202</span>  }</div>
<div class="line"><span class="lineno"> 2203</span>}</div>
<div class="ttc" id="aclass_ctrl_farm_task_html"><div class="ttname"><a href="class_ctrl_farm_task.html">CtrlFarmTask</a></div><div class="ttdef"><b>Definition:</b> tfarmcontroller.cpp:200</div></div>
<div class="ttc" id="aclass_farm_server_proxy_html"><div class="ttname"><a href="class_farm_server_proxy.html">FarmServerProxy</a></div><div class="ttdef"><b>Definition:</b> tfarmcontroller.cpp:367</div></div>
<div class="ttc" id="aclass_t_exception_html"><div class="ttname"><a href="class_t_exception.html">TException</a></div><div class="ttdef"><b>Definition:</b> texception.h:18</div></div>
<div class="ttc" id="aclass_t_farm_task_html_a2be81cd241bf4cbc9aa039b7183e7c98"><div class="ttname"><a href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">TFarmTask::m_status</a></div><div class="ttdeci">TaskState m_status</div><div class="ttdoc">The task's status (completed, work in progress... etc)</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:85</div></div>
<div class="ttc" id="aclass_t_farm_task_html_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6"><div class="ttname"><a href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">TFarmTask::m_id</a></div><div class="ttdeci">Id m_id</div><div class="ttdoc">Internal task identifier.</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:68</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f3f679487b0173df9e852f46e6ce17e" name="a7f3f679487b0173df9e852f46e6ce17e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f3f679487b0173df9e852f46e6ce17e">&#9670;&nbsp;</a></span>activateServer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::activateServer </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2048</span>                                                     {</div>
<div class="line"><span class="lineno"> 2049</span>  map&lt;QString, FarmServerProxy *&gt;::iterator it = m_servers.find(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 2050</span>  <span class="keywordflow">if</span> (it != m_servers.end()) {</div>
<div class="line"><span class="lineno"> 2051</span>    <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *server = it-&gt;second;</div>
<div class="line"><span class="lineno"> 2052</span>    server-&gt;m_offline       = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2053</span> </div>
<div class="line"><span class="lineno"> 2054</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; server-&gt;m_maxTaskCount; ++i) {</div>
<div class="line"><span class="lineno"> 2055</span>      <span class="comment">// cerca un task da sottomettere al server</span></div>
<div class="line"><span class="lineno"> 2056</span>      <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = getTaskToStart(server);</div>
<div class="line"><span class="lineno"> 2057</span>      <span class="keywordflow">if</span> (task) {</div>
<div class="line"><span class="lineno"> 2058</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 2059</span>          <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Aborted) {</div>
<div class="line"><span class="lineno"> 2060</span>            vector&lt;QString&gt;::iterator it =</div>
<div class="line"><span class="lineno"> 2061</span>                find(task-&gt;m_failedOnServers.begin(),</div>
<div class="line"><span class="lineno"> 2062</span>                     task-&gt;m_failedOnServers.end(), server-&gt;getId());</div>
<div class="line"><span class="lineno"> 2063</span> </div>
<div class="line"><span class="lineno"> 2064</span>            <span class="keywordflow">if</span> (it == task-&gt;m_failedOnServers.end())</div>
<div class="line"><span class="lineno"> 2065</span>              doRestartTask(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>, <span class="keyword">false</span>, server);</div>
<div class="line"><span class="lineno"> 2066</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2067</span>              doRestartTask(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>, <span class="keyword">false</span>, 0);</div>
<div class="line"><span class="lineno"> 2068</span>              <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *nextTask = getNextTaskToStart(task, server);</div>
<div class="line"><span class="lineno"> 2069</span>              <span class="keywordflow">if</span> (nextTask) startTask(nextTask, server);</div>
<div class="line"><span class="lineno"> 2070</span>            }</div>
<div class="line"><span class="lineno"> 2071</span>          } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2072</span>            startTask(task, server);</div>
<div class="line"><span class="lineno"> 2073</span>        } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp; <span class="comment">/*e*/</span>) {</div>
<div class="line"><span class="lineno"> 2074</span>        }</div>
<div class="line"><span class="lineno"> 2075</span>      }</div>
<div class="line"><span class="lineno"> 2076</span>    }</div>
<div class="line"><span class="lineno"> 2077</span>  }</div>
<div class="line"><span class="lineno"> 2078</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0a5f9090b17ba2c9e7c984790b558947" name="a0a5f9090b17ba2c9e7c984790b558947"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a5f9090b17ba2c9e7c984790b558947">&#9670;&nbsp;</a></span>activateTask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::activateTask </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1577</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a45afe05a7a803431e602de4b158db377" name="a45afe05a7a803431e602de4b158db377"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45afe05a7a803431e602de4b158db377">&#9670;&nbsp;</a></span>addTask() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QString FarmController::addTask </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>cmdline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>suspended</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TFarmPlatform&#160;</td>
          <td class="paramname"><em>platform</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1401</span>                                                        {</div>
<div class="line"><span class="lineno"> 1402</span>  QString parentId = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1403</span>  <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task =</div>
<div class="line"><span class="lineno"> 1404</span>      doAddTask(QString::number(NextTaskId++), parentId, name, cmdline, user,</div>
<div class="line"><span class="lineno"> 1405</span>                host, suspended, 1, priority, platform);</div>
<div class="line"><span class="lineno"> 1406</span> </div>
<div class="line"><span class="lineno"> 1407</span>  <span class="keywordflow">return</span> task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>;</div>
<div class="line"><span class="lineno"> 1408</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ade71efec5885b08dbeb2564aa9e31d0e" name="ade71efec5885b08dbeb2564aa9e31d0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade71efec5885b08dbeb2564aa9e31d0e">&#9670;&nbsp;</a></span>addTask() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QString FarmController::addTask </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_farm_task.html">TFarmTask</a> &amp;&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>suspended</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1437</span>                                                                     {</div>
<div class="line"><span class="lineno"> 1438</span>  QString <span class="keywordtype">id</span> = QString::number(NextTaskId++);</div>
<div class="line"><span class="lineno"> 1439</span> </div>
<div class="line"><span class="lineno"> 1440</span>  <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *myTask = 0;</div>
<div class="line"><span class="lineno"> 1441</span> </div>
<div class="line"><span class="lineno"> 1442</span>  <span class="keywordtype">int</span> count = task.getTaskCount();</div>
<div class="line"><span class="lineno"> 1443</span>  <span class="keywordflow">if</span> (count == 1) {</div>
<div class="line"><span class="lineno"> 1444</span>    QString parentId = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1445</span>    myTask = doAddTask(<span class="keywordtype">id</span>, parentId, task.<a class="code hl_variable" href="class_t_farm_task.html#a14686e563d198398938fa8a9ed8ffff2">m_name</a>, task.getCommandLine(),</div>
<div class="line"><span class="lineno"> 1446</span>                       task.<a class="code hl_variable" href="class_t_farm_task.html#ac7cb8ba23c446b6b1e0f3cf789dcb9f1">m_user</a>, task.<a class="code hl_variable" href="class_t_farm_task.html#a212e26b598b0ceeafa2e21b0ca94f898">m_hostName</a>, suspended,</div>
<div class="line"><span class="lineno"> 1447</span>                       task.m_stepCount, task.<a class="code hl_variable" href="class_t_farm_task.html#a7b0083ed49f8937a93c2de029352995c">m_priority</a>, task.m_platform);</div>
<div class="line"><span class="lineno"> 1448</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1449</span>    myTask =</div>
<div class="line"><span class="lineno"> 1450</span>        <span class="keyword">new</span> <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a>(<span class="keywordtype">id</span>, task.<a class="code hl_variable" href="class_t_farm_task.html#a14686e563d198398938fa8a9ed8ffff2">m_name</a>, task.getCommandLine(), task.<a class="code hl_variable" href="class_t_farm_task.html#ac7cb8ba23c446b6b1e0f3cf789dcb9f1">m_user</a>,</div>
<div class="line"><span class="lineno"> 1451</span>                         task.<a class="code hl_variable" href="class_t_farm_task.html#a212e26b598b0ceeafa2e21b0ca94f898">m_hostName</a>, task.m_stepCount, task.<a class="code hl_variable" href="class_t_farm_task.html#a7b0083ed49f8937a93c2de029352995c">m_priority</a>);</div>
<div class="line"><span class="lineno"> 1452</span> </div>
<div class="line"><span class="lineno"> 1453</span>    myTask-&gt;m_submissionDate = QDateTime::currentDateTime();</div>
<div class="line"><span class="lineno"> 1454</span>    myTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a>       = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1455</span>    myTask-&gt;m_dependencies = <span class="keyword">new</span> <a class="code hl_class" href="class_t_farm_task_1_1_dependencies.html">TFarmTask::Dependencies</a>(*task.m_dependencies);</div>
<div class="line"><span class="lineno"> 1456</span> </div>
<div class="line"><span class="lineno"> 1457</span>    <span class="keywordflow">if</span> (suspended) myTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = Suspended;</div>
<div class="line"><span class="lineno"> 1458</span> </div>
<div class="line"><span class="lineno"> 1459</span>    m_tasks.insert(std::make_pair(<a class="code hl_class" href="class_task_id.html">TaskId</a>(<span class="keywordtype">id</span>), myTask));</div>
<div class="line"><span class="lineno"> 1460</span> </div>
<div class="line"><span class="lineno"> 1461</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; ++i) {</div>
<div class="line"><span class="lineno"> 1462</span>      QString subTaskId  = <span class="keywordtype">id</span> + <span class="stringliteral">&quot;.&quot;</span> + QString::number(i);</div>
<div class="line"><span class="lineno"> 1463</span>      <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> &amp;tt      = <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> &amp;<span class="keyword">&gt;</span>(task);</div>
<div class="line"><span class="lineno"> 1464</span>      <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *subtask = tt.getTask(i);</div>
<div class="line"><span class="lineno"> 1465</span> </div>
<div class="line"><span class="lineno"> 1466</span>      <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *mySubTask = doAddTask(</div>
<div class="line"><span class="lineno"> 1467</span>          subTaskId, myTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>, subtask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a14686e563d198398938fa8a9ed8ffff2">m_name</a>, subtask-&gt;getCommandLine(),</div>
<div class="line"><span class="lineno"> 1468</span>          subtask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#ac7cb8ba23c446b6b1e0f3cf789dcb9f1">m_user</a>, subtask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a212e26b598b0ceeafa2e21b0ca94f898">m_hostName</a>, suspended, subtask-&gt;m_stepCount,</div>
<div class="line"><span class="lineno"> 1469</span>          subtask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a7b0083ed49f8937a93c2de029352995c">m_priority</a>, task.m_platform);</div>
<div class="line"><span class="lineno"> 1470</span> </div>
<div class="line"><span class="lineno"> 1471</span>      mySubTask-&gt;m_dependencies =</div>
<div class="line"><span class="lineno"> 1472</span>          <span class="keyword">new</span> <a class="code hl_class" href="class_t_farm_task_1_1_dependencies.html">TFarmTask::Dependencies</a>(*task.m_dependencies);</div>
<div class="line"><span class="lineno"> 1473</span> </div>
<div class="line"><span class="lineno"> 1474</span>      myTask-&gt;m_subTasks.push_back(subTaskId);</div>
<div class="line"><span class="lineno"> 1475</span>    }</div>
<div class="line"><span class="lineno"> 1476</span>  }</div>
<div class="line"><span class="lineno"> 1477</span> </div>
<div class="line"><span class="lineno"> 1478</span>  <a class="code hl_class" href="class_t_thread_1_1_executor.html">TThread::Executor</a> executor;</div>
<div class="line"><span class="lineno"> 1479</span>  executor.<a class="code hl_function" href="class_t_thread_1_1_executor.html#af31c8db8ac72df4c342e7769e95e2135">addTask</a>(<span class="keyword">new</span> <a class="code hl_class" href="class_task_starter.html">TaskStarter</a>(<span class="keyword">this</span>, myTask));</div>
<div class="line"><span class="lineno"> 1480</span> </div>
<div class="line"><span class="lineno"> 1481</span>  <span class="keywordflow">return</span> id;</div>
<div class="line"><span class="lineno"> 1482</span>}</div>
<div class="ttc" id="aclass_t_farm_task_1_1_dependencies_html"><div class="ttname"><a href="class_t_farm_task_1_1_dependencies.html">TFarmTask::Dependencies</a></div><div class="ttdef"><b>Definition:</b> tfarmtask.h:45</div></div>
<div class="ttc" id="aclass_t_farm_task_html"><div class="ttname"><a href="class_t_farm_task.html">TFarmTask</a></div><div class="ttdef"><b>Definition:</b> tfarmtask.h:41</div></div>
<div class="ttc" id="aclass_t_farm_task_html_a14686e563d198398938fa8a9ed8ffff2"><div class="ttname"><a href="class_t_farm_task.html#a14686e563d198398938fa8a9ed8ffff2">TFarmTask::m_name</a></div><div class="ttdeci">QString m_name</div><div class="ttdoc">User-readable name.</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:74</div></div>
<div class="ttc" id="aclass_t_farm_task_html_a212e26b598b0ceeafa2e21b0ca94f898"><div class="ttname"><a href="class_t_farm_task.html#a212e26b598b0ceeafa2e21b0ca94f898">TFarmTask::m_hostName</a></div><div class="ttdeci">QString m_hostName</div><div class="ttdoc">Machine on which the task was submitted.</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:82</div></div>
<div class="ttc" id="aclass_t_farm_task_html_a7b0083ed49f8937a93c2de029352995c"><div class="ttname"><a href="class_t_farm_task.html#a7b0083ed49f8937a93c2de029352995c">TFarmTask::m_priority</a></div><div class="ttdeci">int m_priority</div><div class="ttdoc">Priority value used for scheduling order.</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:79</div></div>
<div class="ttc" id="aclass_t_farm_task_html_a93df061d1b990dc0c8f8149616b3fb0e"><div class="ttname"><a href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">TFarmTask::m_parentId</a></div><div class="ttdeci">Id m_parentId</div><div class="ttdoc">Task id of the parent task (if any)</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:69</div></div>
<div class="ttc" id="aclass_t_farm_task_html_ac7cb8ba23c446b6b1e0f3cf789dcb9f1"><div class="ttname"><a href="class_t_farm_task.html#ac7cb8ba23c446b6b1e0f3cf789dcb9f1">TFarmTask::m_user</a></div><div class="ttdeci">QString m_user</div><div class="ttdoc">User who submitted the task.</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:81</div></div>
<div class="ttc" id="aclass_t_thread_1_1_executor_html"><div class="ttname"><a href="class_t_thread_1_1_executor.html">TThread::Executor</a></div><div class="ttdef"><b>Definition:</b> tthread.h:211</div></div>
<div class="ttc" id="aclass_t_thread_1_1_executor_html_af31c8db8ac72df4c342e7769e95e2135"><div class="ttname"><a href="class_t_thread_1_1_executor.html#af31c8db8ac72df4c342e7769e95e2135">TThread::Executor::addTask</a></div><div class="ttdeci">void addTask(RunnableP task)</div><div class="ttdef"><b>Definition:</b> tthread.cpp:804</div></div>
<div class="ttc" id="aclass_task_id_html"><div class="ttname"><a href="class_task_id.html">TaskId</a></div><div class="ttdef"><b>Definition:</b> tfarmcontroller.cpp:538</div></div>
<div class="ttc" id="aclass_task_starter_html"><div class="ttname"><a href="class_task_starter.html">TaskStarter</a></div><div class="ttdef"><b>Definition:</b> tfarmcontroller.cpp:1412</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a872e8913017de5b828dc0d95e3723c4c" name="a872e8913017de5b828dc0d95e3723c4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a872e8913017de5b828dc0d95e3723c4c">&#9670;&nbsp;</a></span>attachServer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::attachServer </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1703</span>                                            {</div>
<div class="line"><span class="lineno"> 1704</span>  <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *server                      = 0;</div>
<div class="line"><span class="lineno"> 1705</span>  map&lt;QString, FarmServerProxy *&gt;::iterator it = m_servers.begin();</div>
<div class="line"><span class="lineno"> 1706</span>  <span class="keywordflow">for</span> (; it != m_servers.end(); ++it) {</div>
<div class="line"><span class="lineno"> 1707</span>    <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *s = it-&gt;second;</div>
<div class="line"><span class="lineno"> 1708</span> </div>
<div class="line"><span class="lineno"> 1709</span>    <span class="keywordflow">if</span> (STRICMP(s-&gt;getHostName(), name) == 0 ||</div>
<div class="line"><span class="lineno"> 1710</span>        STRICMP(s-&gt;getIpAddress(), addr) == 0) {</div>
<div class="line"><span class="lineno"> 1711</span>      server = s;</div>
<div class="line"><span class="lineno"> 1712</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1713</span>    }</div>
<div class="line"><span class="lineno"> 1714</span>  }</div>
<div class="line"><span class="lineno"> 1715</span> </div>
<div class="line"><span class="lineno"> 1716</span>  <span class="keywordflow">if</span> (!server) {</div>
<div class="line"><span class="lineno"> 1717</span>    server = <span class="keyword">new</span> <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a>(name, addr, port);</div>
<div class="line"><span class="lineno"> 1718</span>    m_servers.insert(make_pair(QString(addr), server));</div>
<div class="line"><span class="lineno"> 1719</span>  }</div>
<div class="line"><span class="lineno"> 1720</span> </div>
<div class="line"><span class="lineno"> 1721</span>  initServer(server);</div>
<div class="line"><span class="lineno"> 1722</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af8a8a1ac47d67f0fef5b1c5e9e4000e3" name="af8a8a1ac47d67f0fef5b1c5e9e4000e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8a8a1ac47d67f0fef5b1c5e9e4000e3">&#9670;&nbsp;</a></span>deactivateServer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::deactivateServer </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>completeRunningTasks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2083</span>                                                                 {</div>
<div class="line"><span class="lineno"> 2084</span>  map&lt;QString, FarmServerProxy *&gt;::iterator it = m_servers.find(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 2085</span>  <span class="keywordflow">if</span> (it != m_servers.end()) {</div>
<div class="line"><span class="lineno"> 2086</span>    <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *server = it-&gt;second;</div>
<div class="line"><span class="lineno"> 2087</span> </div>
<div class="line"><span class="lineno"> 2088</span>    QString taskId;</div>
<div class="line"><span class="lineno"> 2089</span>    ServerState state = getServerState(server, taskId);</div>
<div class="line"><span class="lineno"> 2090</span>    <span class="keywordflow">if</span> (state == Busy) {</div>
<div class="line"><span class="lineno"> 2091</span>      <span class="keyword">const</span> <a class="code hl_class" href="classvector.html">vector&lt;QString&gt;</a> &amp;tasks       = server-&gt;getTasks();</div>
<div class="line"><span class="lineno"> 2092</span>      vector&lt;QString&gt;::const_iterator it = tasks.begin();</div>
<div class="line"><span class="lineno"> 2093</span>      <span class="keywordflow">for</span> (; it != tasks.end(); ++it) {</div>
<div class="line"><span class="lineno"> 2094</span>        server-&gt;terminateTask(*it);</div>
<div class="line"><span class="lineno"> 2095</span>      }</div>
<div class="line"><span class="lineno"> 2096</span> </div>
<div class="line"><span class="lineno"> 2097</span>      server-&gt;m_offline = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2098</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2099</span>      server-&gt;m_offline = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2100</span>  }</div>
<div class="line"><span class="lineno"> 2101</span>}</div>
<div class="ttc" id="aclassvector_html"><div class="ttname"><a href="classvector.html">vector&lt; QString &gt;</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a08f94f57e1eb693ee525cc123e801ce2" name="a08f94f57e1eb693ee525cc123e801ce2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08f94f57e1eb693ee525cc123e801ce2">&#9670;&nbsp;</a></span>detachServer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::detachServer </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1727</span>                                            {</div>
<div class="line"><span class="lineno"> 1728</span>  map&lt;QString, FarmServerProxy *&gt;::iterator it = m_servers.begin();</div>
<div class="line"><span class="lineno"> 1729</span>  <span class="keywordflow">for</span> (; it != m_servers.end(); ++it) {</div>
<div class="line"><span class="lineno"> 1730</span>    <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *s = it-&gt;second;</div>
<div class="line"><span class="lineno"> 1731</span>    <span class="keywordflow">if</span> (STRICMP(s-&gt;getHostName(), name) == 0 ||</div>
<div class="line"><span class="lineno"> 1732</span>        STRICMP(s-&gt;getIpAddress(), addr) == 0) {</div>
<div class="line"><span class="lineno"> 1733</span>      s-&gt;m_attached = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1734</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1735</span>    }</div>
<div class="line"><span class="lineno"> 1736</span>  }</div>
<div class="line"><span class="lineno"> 1737</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abb5e4e9cd73abc3b76825043af3ce321" name="abb5e4e9cd73abc3b76825043af3ce321"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb5e4e9cd73abc3b76825043af3ce321">&#9670;&nbsp;</a></span>doAddTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ctrl_farm_task.html">CtrlFarmTask</a> * FarmController::doAddTask </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>parentId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>cmdline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>suspended</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stepCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TFarmPlatform&#160;</td>
          <td class="paramname"><em>platform</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1065</span>                                                                         {</div>
<div class="line"><span class="lineno"> 1066</span>  <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task =</div>
<div class="line"><span class="lineno"> 1067</span>      <span class="keyword">new</span> <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a>(<span class="keywordtype">id</span>, name, cmdline, user, host, stepCount, priority);</div>
<div class="line"><span class="lineno"> 1068</span>  task-&gt;m_submissionDate = QDateTime::currentDateTime();</div>
<div class="line"><span class="lineno"> 1069</span>  task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a>       = parentId;</div>
<div class="line"><span class="lineno"> 1070</span>  task-&gt;m_platform       = platform;</div>
<div class="line"><span class="lineno"> 1071</span> </div>
<div class="line"><span class="lineno"> 1072</span>  m_tasks.insert(std::make_pair(<a class="code hl_class" href="class_task_id.html">TaskId</a>(<span class="keywordtype">id</span>), task));</div>
<div class="line"><span class="lineno"> 1073</span> </div>
<div class="line"><span class="lineno"> 1074</span>  m_userLog-&gt;info(<span class="stringliteral">&quot;Task &quot;</span> + task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a> + <span class="stringliteral">&quot; received at &quot;</span> +</div>
<div class="line"><span class="lineno"> 1075</span>                  task-&gt;m_submissionDate.toString() + <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 1076</span>  m_userLog-&gt;info(<span class="stringliteral">&quot;\&quot;&quot;</span> + task-&gt;getCommandLine() + <span class="stringliteral">&quot;\&quot;\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 1077</span> </div>
<div class="line"><span class="lineno"> 1078</span>  <span class="keywordflow">if</span> (suspended) task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = Suspended;</div>
<div class="line"><span class="lineno"> 1079</span> </div>
<div class="line"><span class="lineno"> 1080</span>  <span class="keywordflow">return</span> task;</div>
<div class="line"><span class="lineno"> 1081</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a287bf05b58ad6b81a4ea857d48a2ed72" name="a287bf05b58ad6b81a4ea857d48a2ed72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a287bf05b58ad6b81a4ea857d48a2ed72">&#9670;&nbsp;</a></span>doRestartTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::doRestartTask </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fromClient</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_farm_server_proxy.html">FarmServerProxy</a> *&#160;</td>
          <td class="paramname"><em>server</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1590</span>                                                            {</div>
<div class="line"><span class="lineno"> 1591</span>  map&lt;TaskId, CtrlFarmTask *&gt;::iterator it = m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(<span class="keywordtype">id</span>));</div>
<div class="line"><span class="lineno"> 1592</span>  <span class="keywordflow">if</span> (it != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1593</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = it-&gt;second;</div>
<div class="line"><span class="lineno"> 1594</span>    <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> != Running) {</div>
<div class="line"><span class="lineno"> 1595</span>      <span class="keywordflow">if</span> (fromClient) {</div>
<div class="line"><span class="lineno"> 1596</span>        task-&gt;m_failedOnServers.clear();</div>
<div class="line"><span class="lineno"> 1597</span>        task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = Waiting;</div>
<div class="line"><span class="lineno"> 1598</span>      }</div>
<div class="line"><span class="lineno"> 1599</span> </div>
<div class="line"><span class="lineno"> 1600</span>      task-&gt;m_completionDate = QDateTime();</div>
<div class="line"><span class="lineno"> 1601</span>      task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#af74d2cb63a6c62785364b7c87b9e2aff">m_server</a>         = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1602</span>      task-&gt;m_serverId       = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1603</span>      task-&gt;m_failedSteps = task-&gt;m_successfullSteps = 0;</div>
<div class="line"><span class="lineno"> 1604</span>      task-&gt;m_failureCount                           = 0;</div>
<div class="line"><span class="lineno"> 1605</span> </div>
<div class="line"><span class="lineno"> 1606</span>      <span class="keywordflow">if</span> (!task-&gt;m_subTasks.empty()) {</div>
<div class="line"><span class="lineno"> 1607</span>        vector&lt;QString&gt;::iterator itSubTaskId = task-&gt;m_subTasks.begin();</div>
<div class="line"><span class="lineno"> 1608</span>        <span class="keywordflow">for</span> (; itSubTaskId != task-&gt;m_subTasks.end(); ++itSubTaskId) {</div>
<div class="line"><span class="lineno"> 1609</span>          map&lt;TaskId, CtrlFarmTask *&gt;::iterator itSubTask =</div>
<div class="line"><span class="lineno"> 1610</span>              m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(*itSubTaskId));</div>
<div class="line"><span class="lineno"> 1611</span>          <span class="keywordflow">if</span> (itSubTask != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1612</span>            <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *subtask = itSubTask-&gt;second;</div>
<div class="line"><span class="lineno"> 1613</span>            <span class="keywordflow">if</span> (fromClient) {</div>
<div class="line"><span class="lineno"> 1614</span>              subtask-&gt;m_failedOnServers.clear();</div>
<div class="line"><span class="lineno"> 1615</span>              subtask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = Waiting;</div>
<div class="line"><span class="lineno"> 1616</span>            }</div>
<div class="line"><span class="lineno"> 1617</span> </div>
<div class="line"><span class="lineno"> 1618</span>            subtask-&gt;m_completionDate = QDateTime();</div>
<div class="line"><span class="lineno"> 1619</span>            subtask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#af74d2cb63a6c62785364b7c87b9e2aff">m_server</a>         = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1620</span>            subtask-&gt;m_serverId       = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1621</span>            subtask-&gt;m_failedSteps = subtask-&gt;m_successfullSteps = 0;</div>
<div class="line"><span class="lineno"> 1622</span>            subtask-&gt;m_failureCount                              = 0;</div>
<div class="line"><span class="lineno"> 1623</span>          }</div>
<div class="line"><span class="lineno"> 1624</span>        }</div>
<div class="line"><span class="lineno"> 1625</span>      }</div>
<div class="line"><span class="lineno"> 1626</span> </div>
<div class="line"><span class="lineno"> 1627</span>      <a class="code hl_class" href="class_t_thread_1_1_executor.html">TThread::Executor</a> executor;</div>
<div class="line"><span class="lineno"> 1628</span>      executor.<a class="code hl_function" href="class_t_thread_1_1_executor.html#af31c8db8ac72df4c342e7769e95e2135">addTask</a>(<span class="keyword">new</span> <a class="code hl_class" href="class_task_starter.html">TaskStarter</a>(<span class="keyword">this</span>, task, server));</div>
<div class="line"><span class="lineno"> 1629</span>    }</div>
<div class="line"><span class="lineno"> 1630</span>  }</div>
<div class="line"><span class="lineno"> 1631</span>}</div>
<div class="ttc" id="aclass_t_farm_task_html_af74d2cb63a6c62785364b7c87b9e2aff"><div class="ttname"><a href="class_t_farm_task.html#af74d2cb63a6c62785364b7c87b9e2aff">TFarmTask::m_server</a></div><div class="ttdeci">QString m_server</div><div class="ttdoc">Server node (name) the task was supplied to.</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:86</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa734a34673db78dc72e4bd004046c1aa" name="aa734a34673db78dc72e4bd004046c1aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa734a34673db78dc72e4bd004046c1aa">&#9670;&nbsp;</a></span>execute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QString FarmController::execute </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classvector.html">vector</a>&lt; QString &gt; &amp;&#160;</td>
          <td class="paramname"><em>argv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  807</span>                                                           {</div>
<div class="line"><span class="lineno">  808</span>  QMutexLocker sl(&amp;m_mutex);</div>
<div class="line"><span class="lineno">  809</span> </div>
<div class="line"><span class="lineno">  810</span>  <span class="keywordflow">if</span> (argv.size() &gt; 0) {</div>
<div class="line"><span class="lineno">  811</span><span class="preprocessor">#ifdef TRACE</span></div>
<div class="line"><span class="lineno">  812</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; argv.size(); i++) {</div>
<div class="line"><span class="lineno">  813</span>      m_userLog-&gt;info(argv[i]);</div>
<div class="line"><span class="lineno">  814</span>    }</div>
<div class="line"><span class="lineno">  815</span>    m_userLog-&gt;info(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno">  816</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  817</span> </div>
<div class="line"><span class="lineno">  818</span>    <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;addTask@string@string&quot;</span> &amp;&amp; argv.size() &gt; 5) {</div>
<div class="line"><span class="lineno">  819</span>      <span class="comment">// ordine degli argomenti:</span></div>
<div class="line"><span class="lineno">  820</span>      <span class="comment">// name, cmdline, user, host, suspended, priority, platform</span></div>
<div class="line"><span class="lineno">  821</span> </div>
<div class="line"><span class="lineno">  822</span>      <span class="keywordtype">bool</span> suspended;</div>
<div class="line"><span class="lineno">  823</span>      fromStr((<span class="keywordtype">int</span> &amp;)suspended, argv[5]);</div>
<div class="line"><span class="lineno">  824</span> </div>
<div class="line"><span class="lineno">  825</span>      <span class="keywordtype">int</span> priority;</div>
<div class="line"><span class="lineno">  826</span>      fromStr(priority, argv[6]);</div>
<div class="line"><span class="lineno">  827</span> </div>
<div class="line"><span class="lineno">  828</span>      TFarmPlatform platform;</div>
<div class="line"><span class="lineno">  829</span>      fromStr((<span class="keywordtype">int</span> &amp;)platform, argv[7]);</div>
<div class="line"><span class="lineno">  830</span>      <span class="keywordflow">return</span> addTask(argv[1], argv[2], argv[3], argv[4], suspended, priority,</div>
<div class="line"><span class="lineno">  831</span>                     platform);</div>
<div class="line"><span class="lineno">  832</span> </div>
<div class="line"><span class="lineno">  833</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;addTask@TFarmTask&quot;</span> &amp;&amp; argv.size() &gt; 5) {</div>
<div class="line"><span class="lineno">  834</span>      <span class="comment">// ordine degli argomenti:</span></div>
<div class="line"><span class="lineno">  835</span>      <span class="comment">// name, cmdline, user, host, suspended, priority,</span></div>
<div class="line"><span class="lineno">  836</span> </div>
<div class="line"><span class="lineno">  837</span>      <span class="keywordtype">bool</span> suspended;</div>
<div class="line"><span class="lineno">  838</span> </div>
<div class="line"><span class="lineno">  839</span>      fromStr((<span class="keywordtype">int</span> &amp;)suspended, argv[5]);</div>
<div class="line"><span class="lineno">  840</span> </div>
<div class="line"><span class="lineno">  841</span>      <span class="keywordtype">int</span> priority;</div>
<div class="line"><span class="lineno">  842</span>      fromStr(priority, argv[6]);</div>
<div class="line"><span class="lineno">  843</span> </div>
<div class="line"><span class="lineno">  844</span>      <a class="code hl_class" href="class_t_farm_task_group.html">TFarmTaskGroup</a> task(<span class="stringliteral">&quot;&quot;</span>, argv[1], argv[2], argv[3], argv[4], priority, 50);</div>
<div class="line"><span class="lineno">  845</span> </div>
<div class="line"><span class="lineno">  846</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 7; i &lt; (int)argv.size(); i += 5) {</div>
<div class="line"><span class="lineno">  847</span>        <span class="comment">// ordine degli argomenti:</span></div>
<div class="line"><span class="lineno">  848</span>        <span class="comment">// name, cmdline, user, host, priority,</span></div>
<div class="line"><span class="lineno">  849</span> </div>
<div class="line"><span class="lineno">  850</span>        <span class="keywordtype">int</span> subTaskPriority;</div>
<div class="line"><span class="lineno">  851</span> </div>
<div class="line"><span class="lineno">  852</span>        fromStr(subTaskPriority, argv[i + 4]);</div>
<div class="line"><span class="lineno">  853</span> </div>
<div class="line"><span class="lineno">  854</span>        <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *subTask =</div>
<div class="line"><span class="lineno">  855</span>            <span class="keyword">new</span> <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a>(<span class="stringliteral">&quot;&quot;</span>, argv[i], argv[i + 1], argv[i + 2], argv[i + 3],</div>
<div class="line"><span class="lineno">  856</span>                          subTaskPriority, 50);</div>
<div class="line"><span class="lineno">  857</span> </div>
<div class="line"><span class="lineno">  858</span>        task.addTask(subTask);</div>
<div class="line"><span class="lineno">  859</span>      }</div>
<div class="line"><span class="lineno">  860</span> </div>
<div class="line"><span class="lineno">  861</span>      <span class="keywordflow">return</span> addTask(task, suspended);</div>
<div class="line"><span class="lineno">  862</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;addTask@TFarmTask_2&quot;</span> &amp;&amp; argv.size() &gt; 7) {</div>
<div class="line"><span class="lineno">  863</span>      <span class="comment">// ordine degli argomenti:</span></div>
<div class="line"><span class="lineno">  864</span>      <span class="comment">// name, cmdline, user, host, suspended, stepCount, priority, platform</span></div>
<div class="line"><span class="lineno">  865</span> </div>
<div class="line"><span class="lineno">  866</span>      <span class="keywordtype">int</span> suspended;</div>
<div class="line"><span class="lineno">  867</span>      fromStr(suspended, argv[5]);</div>
<div class="line"><span class="lineno">  868</span> </div>
<div class="line"><span class="lineno">  869</span>      <span class="keywordtype">int</span> stepCount;</div>
<div class="line"><span class="lineno">  870</span>      fromStr(stepCount, argv[6]);</div>
<div class="line"><span class="lineno">  871</span> </div>
<div class="line"><span class="lineno">  872</span>      <span class="keywordtype">int</span> priority;</div>
<div class="line"><span class="lineno">  873</span>      fromStr(priority, argv[7]);</div>
<div class="line"><span class="lineno">  874</span> </div>
<div class="line"><span class="lineno">  875</span>      TFarmPlatform platform;</div>
<div class="line"><span class="lineno">  876</span>      fromStr((<span class="keywordtype">int</span> &amp;)platform, argv[8]);</div>
<div class="line"><span class="lineno">  877</span> </div>
<div class="line"><span class="lineno">  878</span>      <a class="code hl_class" href="class_t_farm_task_group.html">TFarmTaskGroup</a> task(<span class="stringliteral">&quot;&quot;</span>, argv[1], argv[2], argv[3], argv[4], stepCount,</div>
<div class="line"><span class="lineno">  879</span>                          priority);</div>
<div class="line"><span class="lineno">  880</span>      task.m_platform = platform;</div>
<div class="line"><span class="lineno">  881</span> </div>
<div class="line"><span class="lineno">  882</span>      <span class="keywordtype">int</span> depCount;</div>
<div class="line"><span class="lineno">  883</span>      fromStr(depCount, argv[9]);</div>
<div class="line"><span class="lineno">  884</span> </div>
<div class="line"><span class="lineno">  885</span>      <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><span class="lineno">  886</span>      <span class="keywordflow">for</span> (; i &lt; depCount; ++i) {</div>
<div class="line"><span class="lineno">  887</span>        QString depTaskId = argv[10 + i];</div>
<div class="line"><span class="lineno">  888</span>        task.m_dependencies-&gt;add(depTaskId);</div>
<div class="line"><span class="lineno">  889</span>      }</div>
<div class="line"><span class="lineno">  890</span> </div>
<div class="line"><span class="lineno">  891</span>      <span class="keywordflow">for</span> (i = 10 + depCount; i &lt; (int)argv.size(); i += 6) {</div>
<div class="line"><span class="lineno">  892</span>        <span class="comment">// ordine degli argomenti:</span></div>
<div class="line"><span class="lineno">  893</span>        <span class="comment">// name, cmdline, user, host, stepCount, priority,</span></div>
<div class="line"><span class="lineno">  894</span> </div>
<div class="line"><span class="lineno">  895</span>        <span class="keywordtype">int</span> subTaskStepCount;</div>
<div class="line"><span class="lineno">  896</span>        fromStr(subTaskStepCount, argv[i + 4]);</div>
<div class="line"><span class="lineno">  897</span> </div>
<div class="line"><span class="lineno">  898</span>        <span class="keywordtype">int</span> subTaskPriority;</div>
<div class="line"><span class="lineno">  899</span>        fromStr(subTaskPriority, argv[i + 5]);</div>
<div class="line"><span class="lineno">  900</span> </div>
<div class="line"><span class="lineno">  901</span>        <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *subTask =</div>
<div class="line"><span class="lineno">  902</span>            <span class="keyword">new</span> <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a>(<span class="stringliteral">&quot;&quot;</span>, argv[i], argv[i + 1], argv[i + 2], argv[i + 3],</div>
<div class="line"><span class="lineno">  903</span>                          subTaskStepCount, subTaskPriority);</div>
<div class="line"><span class="lineno">  904</span> </div>
<div class="line"><span class="lineno">  905</span>        subTask-&gt;m_dependencies =</div>
<div class="line"><span class="lineno">  906</span>            <span class="keyword">new</span> <a class="code hl_class" href="class_t_farm_task_1_1_dependencies.html">TFarmTask::Dependencies</a>(*task.m_dependencies);</div>
<div class="line"><span class="lineno">  907</span>        subTask-&gt;m_platform = platform;</div>
<div class="line"><span class="lineno">  908</span> </div>
<div class="line"><span class="lineno">  909</span>        task.addTask(subTask);</div>
<div class="line"><span class="lineno">  910</span>      }</div>
<div class="line"><span class="lineno">  911</span> </div>
<div class="line"><span class="lineno">  912</span>      <span class="keywordflow">return</span> addTask(task, suspended != 0);</div>
<div class="line"><span class="lineno">  913</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;removeTask&quot;</span> &amp;&amp; argv.size() &gt; 0) {</div>
<div class="line"><span class="lineno">  914</span>      removeTask(argv[1]);</div>
<div class="line"><span class="lineno">  915</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;suspendTask&quot;</span> &amp;&amp; argv.size() &gt; 0) {</div>
<div class="line"><span class="lineno">  916</span>      suspendTask(argv[1]);</div>
<div class="line"><span class="lineno">  917</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;activateTask&quot;</span> &amp;&amp; argv.size() &gt; 0) {</div>
<div class="line"><span class="lineno">  918</span>      activateTask(argv[1]);</div>
<div class="line"><span class="lineno">  919</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;restartTask&quot;</span> &amp;&amp; argv.size() &gt; 0) {</div>
<div class="line"><span class="lineno">  920</span>      restartTask(argv[1]);</div>
<div class="line"><span class="lineno">  921</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;getTasks@vector&quot;</span>) {</div>
<div class="line"><span class="lineno">  922</span>      <a class="code hl_class" href="classvector.html">vector&lt;QString&gt;</a> tasks;</div>
<div class="line"><span class="lineno">  923</span>      getTasks(tasks);</div>
<div class="line"><span class="lineno">  924</span> </div>
<div class="line"><span class="lineno">  925</span>      QString reply;</div>
<div class="line"><span class="lineno">  926</span>      std::vector&lt;QString&gt;::iterator it = tasks.begin();</div>
<div class="line"><span class="lineno">  927</span>      <span class="keywordflow">for</span> (; it != tasks.end(); ++it) {</div>
<div class="line"><span class="lineno">  928</span>        reply += *it;</div>
<div class="line"><span class="lineno">  929</span>        reply += <span class="stringliteral">&quot;,&quot;</span>;</div>
<div class="line"><span class="lineno">  930</span>      }</div>
<div class="line"><span class="lineno">  931</span> </div>
<div class="line"><span class="lineno">  932</span>      <span class="keywordflow">return</span> reply;</div>
<div class="line"><span class="lineno">  933</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;getTasks@string@vector&quot;</span>) {</div>
<div class="line"><span class="lineno">  934</span>      QString parentId;</div>
<div class="line"><span class="lineno">  935</span>      <span class="keywordflow">if</span> (argv.size() &gt; 1) parentId = argv[1];</div>
<div class="line"><span class="lineno">  936</span> </div>
<div class="line"><span class="lineno">  937</span>      <a class="code hl_class" href="classvector.html">vector&lt;QString&gt;</a> tasks;</div>
<div class="line"><span class="lineno">  938</span>      getTasks(parentId, tasks);</div>
<div class="line"><span class="lineno">  939</span> </div>
<div class="line"><span class="lineno">  940</span>      QString reply;</div>
<div class="line"><span class="lineno">  941</span>      std::vector&lt;QString&gt;::iterator it = tasks.begin();</div>
<div class="line"><span class="lineno">  942</span>      <span class="keywordflow">for</span> (; it != tasks.end(); ++it) {</div>
<div class="line"><span class="lineno">  943</span>        reply += *it;</div>
<div class="line"><span class="lineno">  944</span>        reply += <span class="stringliteral">&quot;,&quot;</span>;</div>
<div class="line"><span class="lineno">  945</span>      }</div>
<div class="line"><span class="lineno">  946</span> </div>
<div class="line"><span class="lineno">  947</span>      <span class="keywordflow">if</span> (reply.length() &gt; 0) reply = reply.left(reply.length() - 1);</div>
<div class="line"><span class="lineno">  948</span>      <span class="keywordflow">return</span> reply;</div>
<div class="line"><span class="lineno">  949</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;getTasks@string@vector$TaskShortInfo&quot;</span> &amp;&amp;</div>
<div class="line"><span class="lineno">  950</span>               argv.size() &gt; 0) {</div>
<div class="line"><span class="lineno">  951</span>      vector&lt;TaskShortInfo&gt; tasks;</div>
<div class="line"><span class="lineno">  952</span>      getTasks(argv[1], tasks);</div>
<div class="line"><span class="lineno">  953</span> </div>
<div class="line"><span class="lineno">  954</span>      QString reply;</div>
<div class="line"><span class="lineno">  955</span>      std::vector&lt;TaskShortInfo&gt;::iterator it = tasks.begin();</div>
<div class="line"><span class="lineno">  956</span>      <span class="keywordflow">for</span> (; it != tasks.end(); ++it) {</div>
<div class="line"><span class="lineno">  957</span>        reply += (*it).m_id;</div>
<div class="line"><span class="lineno">  958</span>        reply += <span class="stringliteral">&quot;,&quot;</span>;</div>
<div class="line"><span class="lineno">  959</span>        reply += (*it).m_name;</div>
<div class="line"><span class="lineno">  960</span>        reply += <span class="stringliteral">&quot;,&quot;</span>;</div>
<div class="line"><span class="lineno">  961</span>        reply += QString::number((*it).m_status);</div>
<div class="line"><span class="lineno">  962</span>        reply += <span class="stringliteral">&quot;,&quot;</span>;</div>
<div class="line"><span class="lineno">  963</span>      }</div>
<div class="line"><span class="lineno">  964</span>      <span class="keywordflow">if</span> (reply.length() &gt; 0) reply = reply.left(reply.size() - 1);</div>
<div class="line"><span class="lineno">  965</span> </div>
<div class="line"><span class="lineno">  966</span>      <span class="keywordflow">return</span> reply;</div>
<div class="line"><span class="lineno">  967</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;queryTaskInfo&quot;</span> &amp;&amp; argv.size() &gt; 1) {</div>
<div class="line"><span class="lineno">  968</span>      <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> task;</div>
<div class="line"><span class="lineno">  969</span>      queryTaskInfo(argv[1], task);</div>
<div class="line"><span class="lineno">  970</span>      <span class="keywordflow">return</span> toString(task, 1);</div>
<div class="line"><span class="lineno">  971</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;queryTaskInfo_2&quot;</span> &amp;&amp; argv.size() &gt; 1) {</div>
<div class="line"><span class="lineno">  972</span>      <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> task;</div>
<div class="line"><span class="lineno">  973</span>      queryTaskInfo(argv[1], task);</div>
<div class="line"><span class="lineno">  974</span>      <span class="keywordflow">return</span> toString(task, 2);</div>
<div class="line"><span class="lineno">  975</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;queryTaskShortInfo&quot;</span> &amp;&amp; argv.size() &gt; 1) {</div>
<div class="line"><span class="lineno">  976</span>      QString parentId, name;</div>
<div class="line"><span class="lineno">  977</span>      TaskState status;</div>
<div class="line"><span class="lineno">  978</span>      queryTaskShortInfo(argv[1], parentId, name, status);</div>
<div class="line"><span class="lineno">  979</span> </div>
<div class="line"><span class="lineno">  980</span>      QString reply;</div>
<div class="line"><span class="lineno">  981</span>      reply += parentId;</div>
<div class="line"><span class="lineno">  982</span>      reply += <span class="stringliteral">&quot;,&quot;</span>;</div>
<div class="line"><span class="lineno">  983</span>      reply += name;</div>
<div class="line"><span class="lineno">  984</span>      reply += <span class="stringliteral">&quot;,&quot;</span>;</div>
<div class="line"><span class="lineno">  985</span>      reply += QString::number((<span class="keywordtype">int</span>)(status));</div>
<div class="line"><span class="lineno">  986</span>      <span class="keywordflow">return</span> reply;</div>
<div class="line"><span class="lineno">  987</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;taskSubmissionError&quot;</span> &amp;&amp; argv.size() &gt; 2) {</div>
<div class="line"><span class="lineno">  988</span>      QString taskId = argv[1];</div>
<div class="line"><span class="lineno">  989</span>      <span class="keywordtype">int</span> errCode;</div>
<div class="line"><span class="lineno">  990</span>      fromStr(errCode, argv[2]);</div>
<div class="line"><span class="lineno">  991</span>      taskSubmissionError(taskId, errCode);</div>
<div class="line"><span class="lineno">  992</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno">  993</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;taskProgress&quot;</span> &amp;&amp; argv.size() &gt; 5) {</div>
<div class="line"><span class="lineno">  994</span>      <span class="keywordtype">int</span> step, stepCount, frameNumber;</div>
<div class="line"><span class="lineno">  995</span>      step        = argv[2].toInt();</div>
<div class="line"><span class="lineno">  996</span>      stepCount   = argv[3].toInt();</div>
<div class="line"><span class="lineno">  997</span>      frameNumber = argv[4].toInt();</div>
<div class="line"><span class="lineno">  998</span> </div>
<div class="line"><span class="lineno">  999</span>      FrameState state;</div>
<div class="line"><span class="lineno"> 1000</span>      state = (FrameState)argv[5].toInt();</div>
<div class="line"><span class="lineno"> 1001</span>      taskProgress(argv[1], step, stepCount, frameNumber, state);</div>
<div class="line"><span class="lineno"> 1002</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1003</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;taskCompleted&quot;</span> &amp;&amp; argv.size() &gt; 2) {</div>
<div class="line"><span class="lineno"> 1004</span>      QString taskId = argv[1];</div>
<div class="line"><span class="lineno"> 1005</span>      <span class="keywordtype">int</span> exitCode;</div>
<div class="line"><span class="lineno"> 1006</span>      exitCode = argv[2].toInt();</div>
<div class="line"><span class="lineno"> 1007</span> </div>
<div class="line"><span class="lineno"> 1008</span>      taskCompleted(taskId, exitCode);</div>
<div class="line"><span class="lineno"> 1009</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1010</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;getServers&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1011</span>      vector&lt;ServerIdentity&gt; servers;</div>
<div class="line"><span class="lineno"> 1012</span>      getServers(servers);</div>
<div class="line"><span class="lineno"> 1013</span> </div>
<div class="line"><span class="lineno"> 1014</span>      QString reply;</div>
<div class="line"><span class="lineno"> 1015</span>      std::vector&lt;ServerIdentity&gt;::iterator it = servers.begin();</div>
<div class="line"><span class="lineno"> 1016</span>      <span class="keywordflow">for</span> (; it != servers.end(); ++it) {</div>
<div class="line"><span class="lineno"> 1017</span>        reply += (*it).m_id;</div>
<div class="line"><span class="lineno"> 1018</span>        reply += <span class="stringliteral">&quot;,&quot;</span>;</div>
<div class="line"><span class="lineno"> 1019</span>        reply += (*it).m_name;</div>
<div class="line"><span class="lineno"> 1020</span>        reply += <span class="stringliteral">&quot;,&quot;</span>;</div>
<div class="line"><span class="lineno"> 1021</span>      }</div>
<div class="line"><span class="lineno"> 1022</span> </div>
<div class="line"><span class="lineno"> 1023</span>      <span class="keywordflow">if</span> (reply.length() &gt; 0) reply = reply.left(reply.size() - 1);</div>
<div class="line"><span class="lineno"> 1024</span> </div>
<div class="line"><span class="lineno"> 1025</span>      <span class="keywordflow">return</span> reply;</div>
<div class="line"><span class="lineno"> 1026</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;queryServerState2&quot;</span> &amp;&amp; argv.size() &gt; 0) {</div>
<div class="line"><span class="lineno"> 1027</span>      ServerState state = queryServerState2(argv[1]);</div>
<div class="line"><span class="lineno"> 1028</span>      <span class="keywordflow">return</span> QString::number(state);</div>
<div class="line"><span class="lineno"> 1029</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;queryServerInfo&quot;</span> &amp;&amp; argv.size() &gt; 0) {</div>
<div class="line"><span class="lineno"> 1030</span>      <a class="code hl_class" href="class_server_info.html">ServerInfo</a> info;</div>
<div class="line"><span class="lineno"> 1031</span>      queryServerInfo(argv[1], info);</div>
<div class="line"><span class="lineno"> 1032</span>      <span class="keywordflow">return</span> toString(info);</div>
<div class="line"><span class="lineno"> 1033</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;activateServer&quot;</span> &amp;&amp; argv.size() &gt; 0) {</div>
<div class="line"><span class="lineno"> 1034</span>      activateServer(argv[1]);</div>
<div class="line"><span class="lineno"> 1035</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1036</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;deactivateServer&quot;</span> &amp;&amp; argv.size() &gt; 1) {</div>
<div class="line"><span class="lineno"> 1037</span>      <span class="keywordtype">int</span> completeRunningTask = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1038</span>      fromStr(completeRunningTask, argv[2]);</div>
<div class="line"><span class="lineno"> 1039</span>      deactivateServer(argv[1], !!completeRunningTask);</div>
<div class="line"><span class="lineno"> 1040</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1041</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;attachServer&quot;</span> &amp;&amp; argv.size() &gt; 3) {</div>
<div class="line"><span class="lineno"> 1042</span>      <span class="keywordtype">int</span> port;</div>
<div class="line"><span class="lineno"> 1043</span>      fromStr(port, argv[3]);</div>
<div class="line"><span class="lineno"> 1044</span>      attachServer(argv[1], argv[2], port);</div>
<div class="line"><span class="lineno"> 1045</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1046</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[0] == <span class="stringliteral">&quot;detachServer&quot;</span> &amp;&amp; argv.size() &gt; 3) {</div>
<div class="line"><span class="lineno"> 1047</span>      <span class="keywordtype">int</span> port;</div>
<div class="line"><span class="lineno"> 1048</span>      fromStr(port, argv[3]);</div>
<div class="line"><span class="lineno"> 1049</span>      detachServer(argv[1], argv[2], port);</div>
<div class="line"><span class="lineno"> 1050</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1051</span>    }</div>
<div class="line"><span class="lineno"> 1052</span>  }</div>
<div class="line"><span class="lineno"> 1053</span><span class="preprocessor">#ifdef TRACE</span></div>
<div class="line"><span class="lineno"> 1054</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1055</span>    m_userLog-&gt;info(<span class="stringliteral">&quot;empty command\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 1056</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1057</span>  <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1058</span>}</div>
<div class="ttc" id="aclass_server_info_html"><div class="ttname"><a href="class_server_info.html">ServerInfo</a></div><div class="ttdef"><b>Definition:</b> tfarmcontroller.h:42</div></div>
<div class="ttc" id="aclass_t_farm_task_group_html"><div class="ttname"><a href="class_t_farm_task_group.html">TFarmTaskGroup</a></div><div class="ttdef"><b>Definition:</b> tfarmtask.h:147</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a325905caa8033aa67fae2ef5c652c6ca" name="a325905caa8033aa67fae2ef5c652c6ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a325905caa8033aa67fae2ef5c652c6ca">&#9670;&nbsp;</a></span>getNextTaskToStart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ctrl_farm_task.html">CtrlFarmTask</a> * FarmController::getNextTaskToStart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_farm_server_proxy.html">FarmServerProxy</a> *&#160;</td>
          <td class="paramname"><em>server</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1198</span>                                                                          {</div>
<div class="line"><span class="lineno"> 1199</span>  QMutexLocker sl(&amp;m_mutex);</div>
<div class="line"><span class="lineno"> 1200</span> </div>
<div class="line"><span class="lineno"> 1201</span>  <span class="keywordtype">int</span> maxPriority         = 0;</div>
<div class="line"><span class="lineno"> 1202</span>  <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *candidate = 0;</div>
<div class="line"><span class="lineno"> 1203</span> </div>
<div class="line"><span class="lineno"> 1204</span>  map&lt;TaskId, CtrlFarmTask *&gt;::iterator itTask = m_tasks.begin();</div>
<div class="line"><span class="lineno"> 1205</span>  <span class="keywordflow">for</span> (; itTask != m_tasks.end(); ++itTask) {</div>
<div class="line"><span class="lineno"> 1206</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = itTask-&gt;second;</div>
<div class="line"><span class="lineno"> 1207</span>    <span class="keywordflow">if</span> (except == task) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1208</span>    <span class="keywordflow">if</span> ((task-&gt;m_platform == NoPlatform ||</div>
<div class="line"><span class="lineno"> 1209</span>         task-&gt;m_platform == server-&gt;m_platform) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1210</span>        task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Waiting &amp;&amp; task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a7b0083ed49f8937a93c2de029352995c">m_priority</a> &gt; maxPriority) {</div>
<div class="line"><span class="lineno"> 1211</span>      <span class="keywordtype">bool</span> dependenciesCompleted = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1212</span> </div>
<div class="line"><span class="lineno"> 1213</span>      <span class="keywordflow">if</span> (task-&gt;m_dependencies) {</div>
<div class="line"><span class="lineno"> 1214</span>        <span class="keywordtype">int</span> count = task-&gt;m_dependencies-&gt;getTaskCount();</div>
<div class="line"><span class="lineno"> 1215</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; ++i) {</div>
<div class="line"><span class="lineno"> 1216</span>          TFarmTask::Id <span class="keywordtype">id</span> = task-&gt;m_dependencies-&gt;getTaskId(i);</div>
<div class="line"><span class="lineno"> 1217</span>          map&lt;TaskId, CtrlFarmTask *&gt;::iterator itDepTask =</div>
<div class="line"><span class="lineno"> 1218</span>              m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(<span class="keywordtype">id</span>));</div>
<div class="line"><span class="lineno"> 1219</span>          <span class="keywordflow">if</span> (itDepTask != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1220</span>            <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *depTask = itDepTask-&gt;second;</div>
<div class="line"><span class="lineno"> 1221</span>            <span class="keywordflow">if</span> (depTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> != Completed) {</div>
<div class="line"><span class="lineno"> 1222</span>              dependenciesCompleted = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1223</span>              <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1224</span>            }</div>
<div class="line"><span class="lineno"> 1225</span>          }</div>
<div class="line"><span class="lineno"> 1226</span>        }</div>
<div class="line"><span class="lineno"> 1227</span>      }</div>
<div class="line"><span class="lineno"> 1228</span> </div>
<div class="line"><span class="lineno"> 1229</span>      <span class="keywordflow">if</span> (dependenciesCompleted) {</div>
<div class="line"><span class="lineno"> 1230</span>        maxPriority = task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a7b0083ed49f8937a93c2de029352995c">m_priority</a>;</div>
<div class="line"><span class="lineno"> 1231</span>        candidate   = task;</div>
<div class="line"><span class="lineno"> 1232</span>      }</div>
<div class="line"><span class="lineno"> 1233</span>    }</div>
<div class="line"><span class="lineno"> 1234</span>  }</div>
<div class="line"><span class="lineno"> 1235</span> </div>
<div class="line"><span class="lineno"> 1236</span>  <span class="keywordflow">return</span> candidate;</div>
<div class="line"><span class="lineno"> 1237</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aba9d90d93cc4900e7df0ea08ef514e2c" name="aba9d90d93cc4900e7df0ea08ef514e2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba9d90d93cc4900e7df0ea08ef514e2c">&#9670;&nbsp;</a></span>getServers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::getServers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="class_server_identity.html">ServerIdentity</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>servers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1997</span>                                                               {</div>
<div class="line"><span class="lineno"> 1998</span>  map&lt;QString, FarmServerProxy *&gt;::iterator it = m_servers.begin();</div>
<div class="line"><span class="lineno"> 1999</span>  <span class="keywordflow">for</span> (; it != m_servers.end(); ++it) {</div>
<div class="line"><span class="lineno"> 2000</span>    <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *server = it-&gt;second;</div>
<div class="line"><span class="lineno"> 2001</span>    servers.push_back(<a class="code hl_class" href="class_server_identity.html">ServerIdentity</a>(server-&gt;m_addr, server-&gt;m_hostName));</div>
<div class="line"><span class="lineno"> 2002</span>  }</div>
<div class="line"><span class="lineno"> 2003</span>}</div>
<div class="ttc" id="aclass_server_identity_html"><div class="ttname"><a href="class_server_identity.html">ServerIdentity</a></div><div class="ttdef"><b>Definition:</b> tfarmcontroller.h:33</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeae3f4ef04cdaab0e6e5aaebe0f1385b" name="aeae3f4ef04cdaab0e6e5aaebe0f1385b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeae3f4ef04cdaab0e6e5aaebe0f1385b">&#9670;&nbsp;</a></span>getServerState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ServerState FarmController::getServerState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_farm_server_proxy.html">FarmServerProxy</a> *&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString &amp;&#160;</td>
          <td class="paramname"><em>taskId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1334</span>                                                            {</div>
<div class="line"><span class="lineno"> 1335</span>  ServerState state;</div>
<div class="line"><span class="lineno"> 1336</span> </div>
<div class="line"><span class="lineno"> 1337</span>  <span class="keywordtype">bool</span> connected = server-&gt;testConnection(500);</div>
<div class="line"><span class="lineno"> 1338</span>  <span class="keywordflow">if</span> (!connected) {</div>
<div class="line"><span class="lineno"> 1339</span>    taskId = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1340</span>    state  = Down;</div>
<div class="line"><span class="lineno"> 1341</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1342</span>    <span class="keywordflow">if</span> (server-&gt;m_offline)</div>
<div class="line"><span class="lineno"> 1343</span>      <span class="keywordflow">return</span> Offline;</div>
<div class="line"><span class="lineno"> 1344</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (server-&gt;getTasks().size() &gt; 0) {</div>
<div class="line"><span class="lineno"> 1345</span>      taskId = server-&gt;getTasks()[0];</div>
<div class="line"><span class="lineno"> 1346</span>      state  = Busy;</div>
<div class="line"><span class="lineno"> 1347</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1348</span>      taskId = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1349</span>      state  = Ready;</div>
<div class="line"><span class="lineno"> 1350</span>    }</div>
<div class="line"><span class="lineno"> 1351</span>  }</div>
<div class="line"><span class="lineno"> 1352</span>  <span class="keywordflow">return</span> state;</div>
<div class="line"><span class="lineno"> 1353</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4789807c7039fbb5fe1193f3baaeba5a" name="a4789807c7039fbb5fe1193f3baaeba5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4789807c7039fbb5fe1193f3baaeba5a">&#9670;&nbsp;</a></span>getTasks() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::getTasks </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>parentId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classvector.html">vector</a>&lt; QString &gt; &amp;&#160;</td>
          <td class="paramname"><em>tasks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1645</span>                                                                             {</div>
<div class="line"><span class="lineno"> 1646</span>  map&lt;TaskId, CtrlFarmTask *&gt;::iterator it = m_tasks.begin();</div>
<div class="line"><span class="lineno"> 1647</span>  <span class="keywordflow">for</span> (; it != m_tasks.end(); ++it) {</div>
<div class="line"><span class="lineno"> 1648</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = it-&gt;second;</div>
<div class="line"><span class="lineno"> 1649</span>    <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a> == parentId) tasks.push_back(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>);</div>
<div class="line"><span class="lineno"> 1650</span>  }</div>
<div class="line"><span class="lineno"> 1651</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5ec7fe53f587f17ad91ecff738f4d12a" name="a5ec7fe53f587f17ad91ecff738f4d12a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ec7fe53f587f17ad91ecff738f4d12a">&#9670;&nbsp;</a></span>getTasks() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::getTasks </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>parentId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="class_task_short_info.html">TaskShortInfo</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>tasks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1656</span>                                                            {</div>
<div class="line"><span class="lineno"> 1657</span>  tasks.clear();</div>
<div class="line"><span class="lineno"> 1658</span> </div>
<div class="line"><span class="lineno"> 1659</span>  map&lt;TaskId, CtrlFarmTask *&gt;::iterator it = m_tasks.begin();</div>
<div class="line"><span class="lineno"> 1660</span>  <span class="keywordflow">for</span> (; it != m_tasks.end(); ++it) {</div>
<div class="line"><span class="lineno"> 1661</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = it-&gt;second;</div>
<div class="line"><span class="lineno"> 1662</span>    <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a> == parentId)</div>
<div class="line"><span class="lineno"> 1663</span>      tasks.push_back(<a class="code hl_class" href="class_task_short_info.html">TaskShortInfo</a>(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>, task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a14686e563d198398938fa8a9ed8ffff2">m_name</a>, task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a>));</div>
<div class="line"><span class="lineno"> 1664</span>  }</div>
<div class="line"><span class="lineno"> 1665</span>}</div>
<div class="ttc" id="aclass_task_short_info_html"><div class="ttname"><a href="class_task_short_info.html">TaskShortInfo</a></div><div class="ttdef"><b>Definition:</b> tfarmcontroller.h:64</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af68943f16973d15d549751696d0bf1c6" name="af68943f16973d15d549751696d0bf1c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af68943f16973d15d549751696d0bf1c6">&#9670;&nbsp;</a></span>getTasks() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::getTasks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classvector.html">vector</a>&lt; QString &gt; &amp;&#160;</td>
          <td class="paramname"><em>tasks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1635</span>                                                    {</div>
<div class="line"><span class="lineno"> 1636</span>  map&lt;TaskId, CtrlFarmTask *&gt;::iterator it = m_tasks.begin();</div>
<div class="line"><span class="lineno"> 1637</span>  <span class="keywordflow">for</span> (; it != m_tasks.end(); ++it) {</div>
<div class="line"><span class="lineno"> 1638</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = it-&gt;second;</div>
<div class="line"><span class="lineno"> 1639</span>    tasks.push_back(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>);</div>
<div class="line"><span class="lineno"> 1640</span>  }</div>
<div class="line"><span class="lineno"> 1641</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3bd6793647784ee2dae83d1e0d97c06d" name="a3bd6793647784ee2dae83d1e0d97c06d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bd6793647784ee2dae83d1e0d97c06d">&#9670;&nbsp;</a></span>getTaskToStart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ctrl_farm_task.html">CtrlFarmTask</a> * FarmController::getTaskToStart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_farm_server_proxy.html">FarmServerProxy</a> *&#160;</td>
          <td class="paramname"><em>server</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1150</span>                                                                    {</div>
<div class="line"><span class="lineno"> 1151</span>  QMutexLocker sl(&amp;m_mutex);</div>
<div class="line"><span class="lineno"> 1152</span> </div>
<div class="line"><span class="lineno"> 1153</span>  <span class="keywordtype">int</span> maxPriority         = 0;</div>
<div class="line"><span class="lineno"> 1154</span>  <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *candidate = 0;</div>
<div class="line"><span class="lineno"> 1155</span> </div>
<div class="line"><span class="lineno"> 1156</span>  map&lt;TaskId, CtrlFarmTask *&gt;::iterator itTask = m_tasks.begin();</div>
<div class="line"><span class="lineno"> 1157</span>  <span class="keywordflow">for</span> (; itTask != m_tasks.end(); ++itTask) {</div>
<div class="line"><span class="lineno"> 1158</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = itTask-&gt;second;</div>
<div class="line"><span class="lineno"> 1159</span>    <span class="keywordflow">if</span> ((!server || (task-&gt;m_platform == NoPlatform ||</div>
<div class="line"><span class="lineno"> 1160</span>                     task-&gt;m_platform == server-&gt;m_platform)) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1161</span>        (((task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Waiting &amp;&amp; task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a7b0083ed49f8937a93c2de029352995c">m_priority</a> &gt; maxPriority) ||</div>
<div class="line"><span class="lineno"> 1162</span>          (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Aborted &amp;&amp; task-&gt;m_failureCount &lt; 3)) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1163</span>             task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a> != <span class="stringliteral">&quot;&quot;</span>)) {</div>
<div class="line"><span class="lineno"> 1164</span>      <span class="keywordtype">bool</span> dependenciesCompleted = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1165</span> </div>
<div class="line"><span class="lineno"> 1166</span>      <span class="keywordflow">if</span> (task-&gt;m_dependencies) {</div>
<div class="line"><span class="lineno"> 1167</span>        <span class="keywordtype">int</span> count = task-&gt;m_dependencies-&gt;getTaskCount();</div>
<div class="line"><span class="lineno"> 1168</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; ++i) {</div>
<div class="line"><span class="lineno"> 1169</span>          TFarmTask::Id <span class="keywordtype">id</span> = task-&gt;m_dependencies-&gt;getTaskId(i);</div>
<div class="line"><span class="lineno"> 1170</span>          map&lt;TaskId, CtrlFarmTask *&gt;::iterator itDepTask =</div>
<div class="line"><span class="lineno"> 1171</span>              m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(<span class="keywordtype">id</span>));</div>
<div class="line"><span class="lineno"> 1172</span>          <span class="keywordflow">if</span> (itDepTask != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1173</span>            <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *depTask = itDepTask-&gt;second;</div>
<div class="line"><span class="lineno"> 1174</span>            <span class="keywordflow">if</span> (depTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> != Completed) {</div>
<div class="line"><span class="lineno"> 1175</span>              dependenciesCompleted = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1176</span>              <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1177</span>            }</div>
<div class="line"><span class="lineno"> 1178</span>          }</div>
<div class="line"><span class="lineno"> 1179</span>        }</div>
<div class="line"><span class="lineno"> 1180</span>      }</div>
<div class="line"><span class="lineno"> 1181</span> </div>
<div class="line"><span class="lineno"> 1182</span>      <span class="keywordflow">if</span> (dependenciesCompleted) {</div>
<div class="line"><span class="lineno"> 1183</span>        maxPriority = task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a7b0083ed49f8937a93c2de029352995c">m_priority</a>;</div>
<div class="line"><span class="lineno"> 1184</span>        candidate   = task;</div>
<div class="line"><span class="lineno"> 1185</span>      }</div>
<div class="line"><span class="lineno"> 1186</span>    }</div>
<div class="line"><span class="lineno"> 1187</span>  }</div>
<div class="line"><span class="lineno"> 1188</span> </div>
<div class="line"><span class="lineno"> 1189</span>  <span class="keywordflow">return</span> candidate;</div>
<div class="line"><span class="lineno"> 1190</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aabd707c063df8b9900668deee0c5e7bc" name="aabd707c063df8b9900668deee0c5e7bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabd707c063df8b9900668deee0c5e7bc">&#9670;&nbsp;</a></span>initServer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::initServer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_farm_server_proxy.html">FarmServerProxy</a> *&#160;</td>
          <td class="paramname"><em>server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1379</span>                                                       {</div>
<div class="line"><span class="lineno"> 1380</span>  <a class="code hl_class" href="class_t_farm_server_1_1_hw_info.html">TFarmServer::HwInfo</a> hwInfo;</div>
<div class="line"><span class="lineno"> 1381</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1382</span>    server-&gt;queryHwInfo(hwInfo);</div>
<div class="line"><span class="lineno"> 1383</span>  } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp; <span class="comment">/*e*/</span>) {</div>
<div class="line"><span class="lineno"> 1384</span>    <a class="code hl_class" href="class_t_thread_1_1_executor.html">TThread::Executor</a> exec;</div>
<div class="line"><span class="lineno"> 1385</span>    exec.<a class="code hl_function" href="class_t_thread_1_1_executor.html#af31c8db8ac72df4c342e7769e95e2135">addTask</a>(<span class="keyword">new</span> <a class="code hl_class" href="class_server_initializer.html">ServerInitializer</a>(server));</div>
<div class="line"><span class="lineno"> 1386</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1387</span>  }</div>
<div class="line"><span class="lineno"> 1388</span> </div>
<div class="line"><span class="lineno"> 1389</span>  server-&gt;m_attached = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1390</span>  <span class="comment">// server-&gt;m_maxTaskCount = hwInfo.m_cpuCount;</span></div>
<div class="line"><span class="lineno"> 1391</span>  server-&gt;m_maxTaskCount = 1;</div>
<div class="line"><span class="lineno"> 1392</span> </div>
<div class="line"><span class="lineno"> 1393</span>  server-&gt;m_platform = hwInfo.m_type;</div>
<div class="line"><span class="lineno"> 1394</span>}</div>
<div class="ttc" id="aclass_server_initializer_html"><div class="ttname"><a href="class_server_initializer.html">ServerInitializer</a></div><div class="ttdef"><b>Definition:</b> tfarmcontroller.cpp:1357</div></div>
<div class="ttc" id="aclass_t_farm_server_1_1_hw_info_html"><div class="ttname"><a href="class_t_farm_server_1_1_hw_info.html">TFarmServer::HwInfo</a></div><div class="ttdef"><b>Definition:</b> tfarmserver.h:34</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb6dc1e346ff64133b9be0063b0f91da" name="aeb6dc1e346ff64133b9be0063b0f91da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb6dc1e346ff64133b9be0063b0f91da">&#9670;&nbsp;</a></span>load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::load </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2105</span>                                             {</div>
<div class="line"><span class="lineno"> 2106</span>  <a class="code hl_class" href="class_t_i_stream.html">TIStream</a> is(fp);</div>
<div class="line"><span class="lineno"> 2107</span> </div>
<div class="line"><span class="lineno"> 2108</span>  m_tasks.clear();</div>
<div class="line"><span class="lineno"> 2109</span> </div>
<div class="line"><span class="lineno"> 2110</span>  <span class="keywordtype">string</span> tagName;</div>
<div class="line"><span class="lineno"> 2111</span>  is.openChild(tagName);</div>
<div class="line"><span class="lineno"> 2112</span> </div>
<div class="line"><span class="lineno"> 2113</span>  <span class="keywordflow">if</span> (tagName == <span class="stringliteral">&quot;tfarmdata&quot;</span>) {</div>
<div class="line"><span class="lineno"> 2114</span>    is.openChild(tagName);</div>
<div class="line"><span class="lineno"> 2115</span>    <span class="keywordflow">if</span> (tagName == <span class="stringliteral">&quot;tfarmtasks&quot;</span>) {</div>
<div class="line"><span class="lineno"> 2116</span>      <span class="keywordflow">while</span> (!is.eos()) {</div>
<div class="line"><span class="lineno"> 2117</span>        <a class="code hl_class" href="class_t_persist.html">TPersist</a> *p;</div>
<div class="line"><span class="lineno"> 2118</span>        is &gt;&gt; p;</div>
<div class="line"><span class="lineno"> 2119</span> </div>
<div class="line"><span class="lineno"> 2120</span>        <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *<span class="keyword">&gt;</span>(p);</div>
<div class="line"><span class="lineno"> 2121</span>        <span class="keywordflow">if</span> (task) m_tasks.insert(make_pair(<a class="code hl_class" href="class_task_id.html">TaskId</a>(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>), task));</div>
<div class="line"><span class="lineno"> 2122</span>      }</div>
<div class="line"><span class="lineno"> 2123</span> </div>
<div class="line"><span class="lineno"> 2124</span>      is.closeChild();</div>
<div class="line"><span class="lineno"> 2125</span>    }</div>
<div class="line"><span class="lineno"> 2126</span>  }</div>
<div class="line"><span class="lineno"> 2127</span> </div>
<div class="line"><span class="lineno"> 2128</span>  is.closeChild();</div>
<div class="line"><span class="lineno"> 2129</span> </div>
<div class="line"><span class="lineno"> 2130</span>  map&lt;TaskId, CtrlFarmTask *&gt;::const_iterator it = m_tasks.begin();</div>
<div class="line"><span class="lineno"> 2131</span>  <span class="keywordflow">for</span> (; it != m_tasks.end(); ++it) {</div>
<div class="line"><span class="lineno"> 2132</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = it-&gt;second;</div>
<div class="line"><span class="lineno"> 2133</span>    <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a> != <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><span class="lineno"> 2134</span>      map&lt;TaskId, CtrlFarmTask *&gt;::const_iterator it2 =</div>
<div class="line"><span class="lineno"> 2135</span>          m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a>));</div>
<div class="line"><span class="lineno"> 2136</span> </div>
<div class="line"><span class="lineno"> 2137</span>      <span class="keywordflow">if</span> (it2 != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 2138</span>        <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *parent = it2-&gt;second;</div>
<div class="line"><span class="lineno"> 2139</span>        parent-&gt;m_subTasks.push_back(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>);</div>
<div class="line"><span class="lineno"> 2140</span>      }</div>
<div class="line"><span class="lineno"> 2141</span>    }</div>
<div class="line"><span class="lineno"> 2142</span>  }</div>
<div class="line"><span class="lineno"> 2143</span>}</div>
<div class="ttc" id="aclass_t_i_stream_html"><div class="ttname"><a href="class_t_i_stream.html">TIStream</a></div><div class="ttdoc">Toonz's XML-like input file parser.</div><div class="ttdef"><b>Definition:</b> tstream.h:47</div></div>
<div class="ttc" id="aclass_t_persist_html"><div class="ttname"><a href="class_t_persist.html">TPersist</a></div><div class="ttdef"><b>Definition:</b> tpersist.h:30</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0b2ce70799797e9ef316603481758f0d" name="a0b2ce70799797e9ef316603481758f0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b2ce70799797e9ef316603481758f0d">&#9670;&nbsp;</a></span>loadServersData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::loadServersData </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>globalRoot</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  712</span>                                                                {</div>
<div class="line"><span class="lineno">  713</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> fp = globalRoot + <span class="stringliteral">&quot;config&quot;</span> + <span class="stringliteral">&quot;servers.txt&quot;</span>;</div>
<div class="line"><span class="lineno">  714</span> </div>
<div class="line"><span class="lineno">  715</span>  <a class="code hl_class" href="class_tifstream.html">Tifstream</a> is(fp);</div>
<div class="line"><span class="lineno">  716</span>  <span class="keywordflow">while</span> (!is.eof()) {</div>
<div class="line"><span class="lineno">  717</span>    <span class="keywordtype">char</span> line[80];</div>
<div class="line"><span class="lineno">  718</span>    is.getline(line, 80);</div>
<div class="line"><span class="lineno">  719</span> </div>
<div class="line"><span class="lineno">  720</span>    <span class="keywordflow">if</span> (line[0] != <span class="charliteral">&#39;#&#39;</span> &amp;&amp; QString(line) != <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><span class="lineno">  721</span>      stringstream iss(line);</div>
<div class="line"><span class="lineno">  722</span> </div>
<div class="line"><span class="lineno">  723</span>      <span class="keywordtype">char</span> hostName[512];</div>
<div class="line"><span class="lineno">  724</span>      <span class="keywordtype">char</span> ipAddr[80];</div>
<div class="line"><span class="lineno">  725</span>      <span class="keywordtype">int</span> port;</div>
<div class="line"><span class="lineno">  726</span> </div>
<div class="line"><span class="lineno">  727</span>      iss &gt;&gt; hostName &gt;&gt; ipAddr &gt;&gt; port;</div>
<div class="line"><span class="lineno">  728</span> </div>
<div class="line"><span class="lineno">  729</span>      <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *server = <span class="keyword">new</span> <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a>(hostName, ipAddr, port);</div>
<div class="line"><span class="lineno">  730</span>      m_servers.insert(make_pair(QString(ipAddr), server));</div>
<div class="line"><span class="lineno">  731</span> </div>
<div class="line"><span class="lineno">  732</span>      <span class="keywordflow">if</span> (server-&gt;testConnection(500)) {</div>
<div class="line"><span class="lineno">  733</span>        initServer(server);</div>
<div class="line"><span class="lineno">  734</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  735</span>          server-&gt;attachController(m_hostName, m_addr, m_port);</div>
<div class="line"><span class="lineno">  736</span>        } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;) {</div>
<div class="line"><span class="lineno">  737</span>        }</div>
<div class="line"><span class="lineno">  738</span>      }</div>
<div class="line"><span class="lineno">  739</span>    }</div>
<div class="line"><span class="lineno">  740</span>  }</div>
<div class="line"><span class="lineno">  741</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0dea6e6db4c704a287dfa9491ed81de5" name="a0dea6e6db4c704a287dfa9491ed81de5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dea6e6db4c704a287dfa9491ed81de5">&#9670;&nbsp;</a></span>queryServerInfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::queryServerInfo </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_server_info.html">ServerInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2023</span>                                                                        {</div>
<div class="line"><span class="lineno"> 2024</span>  map&lt;QString, FarmServerProxy *&gt;::iterator it = m_servers.find(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 2025</span>  <span class="keywordflow">if</span> (it != m_servers.end()) {</div>
<div class="line"><span class="lineno"> 2026</span>    <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *server = it-&gt;second;</div>
<div class="line"><span class="lineno"> 2027</span> </div>
<div class="line"><span class="lineno"> 2028</span>    info.m_name       = server-&gt;getHostName();</div>
<div class="line"><span class="lineno"> 2029</span>    info.m_ipAddress  = server-&gt;getIpAddress();</div>
<div class="line"><span class="lineno"> 2030</span>    info.m_portNumber = QString::number(server-&gt;getPort());</div>
<div class="line"><span class="lineno"> 2031</span> </div>
<div class="line"><span class="lineno"> 2032</span>    info.m_state = getServerState(server, info.m_currentTaskId);</div>
<div class="line"><span class="lineno"> 2033</span>    <span class="keywordflow">if</span> (info.m_state != Down &amp;&amp; info.m_state != ServerUnknown) {</div>
<div class="line"><span class="lineno"> 2034</span>      <a class="code hl_class" href="class_t_farm_server_1_1_hw_info.html">TFarmServer::HwInfo</a> hwInfo;</div>
<div class="line"><span class="lineno"> 2035</span>      server-&gt;queryHwInfo(hwInfo);</div>
<div class="line"><span class="lineno"> 2036</span> </div>
<div class="line"><span class="lineno"> 2037</span>      info.m_cpuCount     = hwInfo.m_cpuCount;</div>
<div class="line"><span class="lineno"> 2038</span>      info.m_totPhysMem   = hwInfo.m_totPhysMem;</div>
<div class="line"><span class="lineno"> 2039</span>      info.m_totVirtMem   = hwInfo.m_totVirtMem;</div>
<div class="line"><span class="lineno"> 2040</span>      info.m_availPhysMem = hwInfo.m_availPhysMem;</div>
<div class="line"><span class="lineno"> 2041</span>      info.m_availVirtMem = hwInfo.m_availVirtMem;</div>
<div class="line"><span class="lineno"> 2042</span>    }</div>
<div class="line"><span class="lineno"> 2043</span>  }</div>
<div class="line"><span class="lineno"> 2044</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab539ebd037b8f0b4c293304ead88e539" name="ab539ebd037b8f0b4c293304ead88e539"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab539ebd037b8f0b4c293304ead88e539">&#9670;&nbsp;</a></span>queryServerState2()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ServerState FarmController::queryServerState2 </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2007</span>                                                               {</div>
<div class="line"><span class="lineno"> 2008</span>  ServerState state = ServerUnknown;</div>
<div class="line"><span class="lineno"> 2009</span> </div>
<div class="line"><span class="lineno"> 2010</span>  map&lt;QString, FarmServerProxy *&gt;::iterator it = m_servers.find(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 2011</span>  <span class="keywordflow">if</span> (it != m_servers.end()) {</div>
<div class="line"><span class="lineno"> 2012</span>    <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *server = it-&gt;second;</div>
<div class="line"><span class="lineno"> 2013</span> </div>
<div class="line"><span class="lineno"> 2014</span>    QString taskId;</div>
<div class="line"><span class="lineno"> 2015</span>    state = getServerState(server, taskId);</div>
<div class="line"><span class="lineno"> 2016</span>  }</div>
<div class="line"><span class="lineno"> 2017</span> </div>
<div class="line"><span class="lineno"> 2018</span>  <span class="keywordflow">return</span> state;</div>
<div class="line"><span class="lineno"> 2019</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a99fe26bd6e19e30b15fda13e4cd193e2" name="a99fe26bd6e19e30b15fda13e4cd193e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99fe26bd6e19e30b15fda13e4cd193e2">&#9670;&nbsp;</a></span>queryTaskInfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::queryTaskInfo </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_farm_task.html">TFarmTask</a> &amp;&#160;</td>
          <td class="paramname"><em>task</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1669</span>                                                                     {</div>
<div class="line"><span class="lineno"> 1670</span>  map&lt;TaskId, CtrlFarmTask *&gt;::iterator it = m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(<span class="keywordtype">id</span>));</div>
<div class="line"><span class="lineno"> 1671</span>  <span class="keywordflow">if</span> (it != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1672</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *tt = it-&gt;second;</div>
<div class="line"><span class="lineno"> 1673</span>    task             = *tt;</div>
<div class="line"><span class="lineno"> 1674</span> </div>
<div class="line"><span class="lineno"> 1675</span>    map&lt;QString, FarmServerProxy *&gt;::iterator it2 =</div>
<div class="line"><span class="lineno"> 1676</span>        m_servers.find(it-&gt;second-&gt;m_serverId);</div>
<div class="line"><span class="lineno"> 1677</span>    <span class="keywordflow">if</span> (it2 != m_servers.end()) {</div>
<div class="line"><span class="lineno"> 1678</span>      <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *server = it2-&gt;second;</div>
<div class="line"><span class="lineno"> 1679</span>      task.<a class="code hl_variable" href="class_t_farm_task.html#af74d2cb63a6c62785364b7c87b9e2aff">m_server</a>           = server-&gt;getHostName();</div>
<div class="line"><span class="lineno"> 1680</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1681</span>      task.<a class="code hl_variable" href="class_t_farm_task.html#af74d2cb63a6c62785364b7c87b9e2aff">m_server</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1682</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1683</span>    task.<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = TaskUnknown;</div>
<div class="line"><span class="lineno"> 1684</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a280eeb3f0ba1db5df54f0394054a8078" name="a280eeb3f0ba1db5df54f0394054a8078"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a280eeb3f0ba1db5df54f0394054a8078">&#9670;&nbsp;</a></span>queryTaskShortInfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::queryTaskShortInfo </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString &amp;&#160;</td>
          <td class="paramname"><em>parentId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TaskState &amp;&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1689</span>                                                                          {</div>
<div class="line"><span class="lineno"> 1690</span>  map&lt;TaskId, CtrlFarmTask *&gt;::iterator it = m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(<span class="keywordtype">id</span>));</div>
<div class="line"><span class="lineno"> 1691</span>  <span class="keywordflow">if</span> (it != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1692</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = it-&gt;second;</div>
<div class="line"><span class="lineno"> 1693</span>    parentId           = task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a>;</div>
<div class="line"><span class="lineno"> 1694</span>    name               = task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a14686e563d198398938fa8a9ed8ffff2">m_name</a>;</div>
<div class="line"><span class="lineno"> 1695</span>    status             = task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a>;</div>
<div class="line"><span class="lineno"> 1696</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1697</span>    status = TaskUnknown;</div>
<div class="line"><span class="lineno"> 1698</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a09dda7508f791eadc49c38586525741b" name="a09dda7508f791eadc49c38586525741b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09dda7508f791eadc49c38586525741b">&#9670;&nbsp;</a></span>removeTask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::removeTask </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1486</span>                                                 {</div>
<div class="line"><span class="lineno"> 1487</span>  map&lt;TaskId, CtrlFarmTask *&gt;::iterator it = m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(<span class="keywordtype">id</span>));</div>
<div class="line"><span class="lineno"> 1488</span>  <span class="keywordflow">if</span> (it != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1489</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = it-&gt;second;</div>
<div class="line"><span class="lineno"> 1490</span> </div>
<div class="line"><span class="lineno"> 1491</span>    <span class="keywordtype">bool</span> aSubtaskIsRunning = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1492</span> </div>
<div class="line"><span class="lineno"> 1493</span>    vector&lt;QString&gt;::iterator it2 = task-&gt;m_subTasks.begin();</div>
<div class="line"><span class="lineno"> 1494</span>    <span class="keywordflow">for</span> (; it2 != task-&gt;m_subTasks.end();) {</div>
<div class="line"><span class="lineno"> 1495</span>      QString subTaskId = *it2;</div>
<div class="line"><span class="lineno"> 1496</span>      map&lt;TaskId, CtrlFarmTask *&gt;::iterator it3 =</div>
<div class="line"><span class="lineno"> 1497</span>          m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(subTaskId));</div>
<div class="line"><span class="lineno"> 1498</span>      <span class="keywordflow">if</span> (it3 != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1499</span>        <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *subTask = it3-&gt;second;</div>
<div class="line"><span class="lineno"> 1500</span>        <span class="keywordflow">if</span> (subTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> != Running) {</div>
<div class="line"><span class="lineno"> 1501</span>          it2 = task-&gt;m_subTasks.erase(it2);</div>
<div class="line"><span class="lineno"> 1502</span>          m_tasks.erase(it3);</div>
<div class="line"><span class="lineno"> 1503</span>          <span class="keyword">delete</span> it3-&gt;second;</div>
<div class="line"><span class="lineno"> 1504</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1505</span>          it2 = task-&gt;m_subTasks.erase(it2);</div>
<div class="line"><span class="lineno"> 1506</span> </div>
<div class="line"><span class="lineno"> 1507</span>          map&lt;QString, FarmServerProxy *&gt;::iterator itServer =</div>
<div class="line"><span class="lineno"> 1508</span>              m_servers.find(subTask-&gt;m_serverId);</div>
<div class="line"><span class="lineno"> 1509</span> </div>
<div class="line"><span class="lineno"> 1510</span>          <span class="keywordflow">if</span> (itServer != m_servers.end()) {</div>
<div class="line"><span class="lineno"> 1511</span>            <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *server = itServer-&gt;second;</div>
<div class="line"><span class="lineno"> 1512</span>            <span class="keywordflow">if</span> (server) {</div>
<div class="line"><span class="lineno"> 1513</span>              vector&lt;QString&gt;::const_iterator it3 =</div>
<div class="line"><span class="lineno"> 1514</span>                  find(server-&gt;getTasks().begin(), server-&gt;getTasks().end(),</div>
<div class="line"><span class="lineno"> 1515</span>                       subTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>);</div>
<div class="line"><span class="lineno"> 1516</span> </div>
<div class="line"><span class="lineno"> 1517</span>              <span class="keywordflow">if</span> (it3 != server-&gt;getTasks().end()) {</div>
<div class="line"><span class="lineno"> 1518</span>                aSubtaskIsRunning = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1519</span>                server-&gt;terminateTask(subTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>);</div>
<div class="line"><span class="lineno"> 1520</span>              }</div>
<div class="line"><span class="lineno"> 1521</span>            }</div>
<div class="line"><span class="lineno"> 1522</span>          }</div>
<div class="line"><span class="lineno"> 1523</span> </div>
<div class="line"><span class="lineno"> 1524</span>          subTask-&gt;m_toBeDeleted = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1525</span>        }</div>
<div class="line"><span class="lineno"> 1526</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1527</span>        ++it2;</div>
<div class="line"><span class="lineno"> 1528</span>    }</div>
<div class="line"><span class="lineno"> 1529</span> </div>
<div class="line"><span class="lineno"> 1530</span>    <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> != Running || !aSubtaskIsRunning) {</div>
<div class="line"><span class="lineno"> 1531</span>      m_tasks.erase(it);</div>
<div class="line"><span class="lineno"> 1532</span>      <span class="keyword">delete</span> it-&gt;second;</div>
<div class="line"><span class="lineno"> 1533</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1534</span>      task-&gt;m_toBeDeleted = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1535</span>  }</div>
<div class="line"><span class="lineno"> 1536</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="adf97cb2bc29ff2d3317013540db1f77a" name="adf97cb2bc29ff2d3317013540db1f77a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf97cb2bc29ff2d3317013540db1f77a">&#9670;&nbsp;</a></span>restartTask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::restartTask </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1581</span>                                                  {</div>
<div class="line"><span class="lineno"> 1582</span>  <span class="comment">// la scelta del server e&#39; lasciata al controller</span></div>
<div class="line"><span class="lineno"> 1583</span>  <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *server = 0;</div>
<div class="line"><span class="lineno"> 1584</span>  doRestartTask(<span class="keywordtype">id</span>, <span class="keyword">true</span>, server);</div>
<div class="line"><span class="lineno"> 1585</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad99f421b99dfdf554ed0275bf23996e8" name="ad99f421b99dfdf554ed0275bf23996e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad99f421b99dfdf554ed0275bf23996e8">&#9670;&nbsp;</a></span>save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::save </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2147</span>                                                   {</div>
<div class="line"><span class="lineno"> 2148</span>  <a class="code hl_class" href="class_t_o_stream.html">TOStream</a> os(fp);</div>
<div class="line"><span class="lineno"> 2149</span> </div>
<div class="line"><span class="lineno"> 2150</span>  map&lt;std::string, string&gt; attributes;</div>
<div class="line"><span class="lineno"> 2151</span>  attributes.insert(make_pair(<span class="stringliteral">&quot;ver&quot;</span>, <span class="stringliteral">&quot;1.0&quot;</span>));</div>
<div class="line"><span class="lineno"> 2152</span>  os.openChild(<span class="stringliteral">&quot;tfarmdata&quot;</span>, attributes);</div>
<div class="line"><span class="lineno"> 2153</span>  os.openChild(<span class="stringliteral">&quot;tfarmtasks&quot;</span>);</div>
<div class="line"><span class="lineno"> 2154</span> </div>
<div class="line"><span class="lineno"> 2155</span>  map&lt;TaskId, CtrlFarmTask *&gt;::const_iterator it = m_tasks.begin();</div>
<div class="line"><span class="lineno"> 2156</span>  <span class="keywordflow">for</span> (; it != m_tasks.end(); ++it) {</div>
<div class="line"><span class="lineno"> 2157</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = it-&gt;second;</div>
<div class="line"><span class="lineno"> 2158</span>    os &lt;&lt; task;</div>
<div class="line"><span class="lineno"> 2159</span>  }</div>
<div class="line"><span class="lineno"> 2160</span> </div>
<div class="line"><span class="lineno"> 2161</span>  os.closeChild();</div>
<div class="line"><span class="lineno"> 2162</span>  os.closeChild();</div>
<div class="line"><span class="lineno"> 2163</span>}</div>
<div class="ttc" id="aclass_t_o_stream_html"><div class="ttname"><a href="class_t_o_stream.html">TOStream</a></div><div class="ttdoc">Toonz's XML-like output file parser.</div><div class="ttdef"><b>Definition:</b> tstream.h:186</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0078fcec754f34a153da6559886d2da5" name="a0078fcec754f34a153da6559886d2da5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0078fcec754f34a153da6559886d2da5">&#9670;&nbsp;</a></span>startTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::startTask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_farm_server_proxy.html">FarmServerProxy</a> *&#160;</td>
          <td class="paramname"><em>server</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1085</span>                                                                          {</div>
<div class="line"><span class="lineno"> 1086</span>  QMutexLocker sl(&amp;m_mutex);</div>
<div class="line"><span class="lineno"> 1087</span> </div>
<div class="line"><span class="lineno"> 1088</span>  <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *taskToBeSubmittedParent = 0;</div>
<div class="line"><span class="lineno"> 1089</span>  <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *taskToBeSubmitted       = 0;</div>
<div class="line"><span class="lineno"> 1090</span> </div>
<div class="line"><span class="lineno"> 1091</span>  <span class="keywordflow">if</span> (task-&gt;m_subTasks.empty()) {</div>
<div class="line"><span class="lineno"> 1092</span>    taskToBeSubmitted = task;</div>
<div class="line"><span class="lineno"> 1093</span>    <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a> != <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1094</span>      map&lt;TaskId, CtrlFarmTask *&gt;::iterator itTaskParent =</div>
<div class="line"><span class="lineno"> 1095</span>          m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a>));</div>
<div class="line"><span class="lineno"> 1096</span>      <span class="keywordflow">if</span> (itTaskParent != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1097</span>        taskToBeSubmittedParent = itTaskParent-&gt;second;</div>
<div class="line"><span class="lineno"> 1098</span>      }</div>
<div class="line"><span class="lineno"> 1099</span>    }</div>
<div class="line"><span class="lineno"> 1100</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1101</span>    taskToBeSubmittedParent = task;</div>
<div class="line"><span class="lineno"> 1102</span> </div>
<div class="line"><span class="lineno"> 1103</span>    <span class="comment">// cerca il primo subtask WAITING</span></div>
<div class="line"><span class="lineno"> 1104</span>    std::vector&lt;QString&gt;::iterator itSubTaskId = task-&gt;m_subTasks.begin();</div>
<div class="line"><span class="lineno"> 1105</span>    <span class="keywordflow">for</span> (; itSubTaskId != task-&gt;m_subTasks.end(); ++itSubTaskId) {</div>
<div class="line"><span class="lineno"> 1106</span>      QString subTaskId = *itSubTaskId;</div>
<div class="line"><span class="lineno"> 1107</span> </div>
<div class="line"><span class="lineno"> 1108</span>      map&lt;TaskId, CtrlFarmTask *&gt;::iterator itSubTask =</div>
<div class="line"><span class="lineno"> 1109</span>          m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(subTaskId));</div>
<div class="line"><span class="lineno"> 1110</span>      <span class="keywordflow">if</span> (itSubTask != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1111</span>        <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *subTask = itSubTask-&gt;second;</div>
<div class="line"><span class="lineno"> 1112</span>        <span class="keywordflow">if</span> (subTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Waiting) {</div>
<div class="line"><span class="lineno"> 1113</span>          taskToBeSubmitted = subTask;</div>
<div class="line"><span class="lineno"> 1114</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1115</span>        }</div>
<div class="line"><span class="lineno"> 1116</span>      }</div>
<div class="line"><span class="lineno"> 1117</span>    }</div>
<div class="line"><span class="lineno"> 1118</span>  }</div>
<div class="line"><span class="lineno"> 1119</span> </div>
<div class="line"><span class="lineno"> 1120</span>  <span class="keywordtype">int</span> rc = 0;</div>
<div class="line"><span class="lineno"> 1121</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1122</span>    server-&gt;addTask(taskToBeSubmitted);</div>
<div class="line"><span class="lineno"> 1123</span>  } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;e) {</div>
<div class="line"><span class="lineno"> 1124</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno"> 1125</span>  }</div>
<div class="line"><span class="lineno"> 1126</span> </div>
<div class="line"><span class="lineno"> 1127</span>  <span class="keywordflow">if</span> (rc == 0) {</div>
<div class="line"><span class="lineno"> 1128</span>    QDateTime startDate = QDateTime::currentDateTime();</div>
<div class="line"><span class="lineno"> 1129</span> </div>
<div class="line"><span class="lineno"> 1130</span>    <span class="keywordflow">if</span> (taskToBeSubmittedParent &amp;&amp;</div>
<div class="line"><span class="lineno"> 1131</span>        taskToBeSubmittedParent-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> != Running) {</div>
<div class="line"><span class="lineno"> 1132</span>      taskToBeSubmittedParent-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a>    = Running;</div>
<div class="line"><span class="lineno"> 1133</span>      taskToBeSubmittedParent-&gt;m_startDate = startDate;</div>
<div class="line"><span class="lineno"> 1134</span>    }</div>
<div class="line"><span class="lineno"> 1135</span> </div>
<div class="line"><span class="lineno"> 1136</span>    taskToBeSubmitted-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a>    = Running;</div>
<div class="line"><span class="lineno"> 1137</span>    taskToBeSubmitted-&gt;m_startDate = startDate;</div>
<div class="line"><span class="lineno"> 1138</span> </div>
<div class="line"><span class="lineno"> 1139</span>    taskToBeSubmitted-&gt;m_serverId = server-&gt;getId();</div>
<div class="line"><span class="lineno"> 1140</span> </div>
<div class="line"><span class="lineno"> 1141</span>    QString msg = <span class="stringliteral">&quot;Task &quot;</span> + taskToBeSubmitted-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a> + <span class="stringliteral">&quot; assigned to &quot;</span>;</div>
<div class="line"><span class="lineno"> 1142</span>    msg += server-&gt;getHostName();</div>
<div class="line"><span class="lineno"> 1143</span>    msg += <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 1144</span>    m_userLog-&gt;info(msg);</div>
<div class="line"><span class="lineno"> 1145</span>  }</div>
<div class="line"><span class="lineno"> 1146</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a77108086fc40e698eec6125559b02dfe" name="a77108086fc40e698eec6125559b02dfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77108086fc40e698eec6125559b02dfe">&#9670;&nbsp;</a></span>suspendTask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::suspendTask </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1540</span>                                                  {</div>
<div class="line"><span class="lineno"> 1541</span>  map&lt;TaskId, CtrlFarmTask *&gt;::iterator it = m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(<span class="keywordtype">id</span>));</div>
<div class="line"><span class="lineno"> 1542</span>  <span class="keywordflow">if</span> (it != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1543</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = it-&gt;second;</div>
<div class="line"><span class="lineno"> 1544</span> </div>
<div class="line"><span class="lineno"> 1545</span>    vector&lt;QString&gt;::iterator it2 = task-&gt;m_subTasks.begin();</div>
<div class="line"><span class="lineno"> 1546</span>    <span class="keywordflow">for</span> (; it2 != task-&gt;m_subTasks.end(); ++it2) {</div>
<div class="line"><span class="lineno"> 1547</span>      QString subTaskId = *it2;</div>
<div class="line"><span class="lineno"> 1548</span>      map&lt;TaskId, CtrlFarmTask *&gt;::iterator it3 =</div>
<div class="line"><span class="lineno"> 1549</span>          m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(subTaskId));</div>
<div class="line"><span class="lineno"> 1550</span>      <span class="keywordflow">if</span> (it3 != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1551</span>        <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *subTask = it3-&gt;second;</div>
<div class="line"><span class="lineno"> 1552</span>        <span class="keywordflow">if</span> (subTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Running) {</div>
<div class="line"><span class="lineno"> 1553</span>          map&lt;QString, FarmServerProxy *&gt;::iterator itServer =</div>
<div class="line"><span class="lineno"> 1554</span>              m_servers.find(subTask-&gt;m_serverId);</div>
<div class="line"><span class="lineno"> 1555</span> </div>
<div class="line"><span class="lineno"> 1556</span>          <span class="keywordflow">if</span> (itServer != m_servers.end()) {</div>
<div class="line"><span class="lineno"> 1557</span>            <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *server = itServer-&gt;second;</div>
<div class="line"><span class="lineno"> 1558</span>            <span class="keywordflow">if</span> (server) {</div>
<div class="line"><span class="lineno"> 1559</span>              vector&lt;QString&gt;::const_iterator it3 =</div>
<div class="line"><span class="lineno"> 1560</span>                  find(server-&gt;getTasks().begin(), server-&gt;getTasks().end(),</div>
<div class="line"><span class="lineno"> 1561</span>                       subTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>);</div>
<div class="line"><span class="lineno"> 1562</span> </div>
<div class="line"><span class="lineno"> 1563</span>              <span class="keywordflow">if</span> (it3 != server-&gt;getTasks().end())</div>
<div class="line"><span class="lineno"> 1564</span>                server-&gt;terminateTask(subTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>);</div>
<div class="line"><span class="lineno"> 1565</span>            }</div>
<div class="line"><span class="lineno"> 1566</span>          }</div>
<div class="line"><span class="lineno"> 1567</span>        }</div>
<div class="line"><span class="lineno"> 1568</span>        subTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = Suspended;</div>
<div class="line"><span class="lineno"> 1569</span>      }</div>
<div class="line"><span class="lineno"> 1570</span>    }</div>
<div class="line"><span class="lineno"> 1571</span>    task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = Suspended;</div>
<div class="line"><span class="lineno"> 1572</span>  }</div>
<div class="line"><span class="lineno"> 1573</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1365d9bd2b148a156f063cb5a2f7ae1b" name="a1365d9bd2b148a156f063cb5a2f7ae1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1365d9bd2b148a156f063cb5a2f7ae1b">&#9670;&nbsp;</a></span>taskCompleted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::taskCompleted </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>taskId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>exitCode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1844</span>                                                                      {</div>
<div class="line"><span class="lineno"> 1845</span><span class="preprocessor">#ifdef TRACE</span></div>
<div class="line"><span class="lineno"> 1846</span>  m_userLog-&gt;info(<span class="stringliteral">&quot;completed chiamata\n\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 1847</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1848</span> </div>
<div class="line"><span class="lineno"> 1849</span>  <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *server = 0;</div>
<div class="line"><span class="lineno"> 1850</span> </div>
<div class="line"><span class="lineno"> 1851</span>  map&lt;TaskId, CtrlFarmTask *&gt;::iterator itTask = m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(taskId));</div>
<div class="line"><span class="lineno"> 1852</span>  <span class="keywordflow">if</span> (itTask != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1853</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = itTask-&gt;second;</div>
<div class="line"><span class="lineno"> 1854</span> </div>
<div class="line"><span class="lineno"> 1855</span>    <span class="keywordflow">if</span> (task-&gt;getCommandLine().contains(<span class="stringliteral">&quot;runcasm&quot;</span>)) {</div>
<div class="line"><span class="lineno"> 1856</span>      <span class="keywordflow">if</span> (task-&gt;m_failedSteps == 0 &amp;&amp; task-&gt;m_successfullSteps &gt; 0)</div>
<div class="line"><span class="lineno"> 1857</span>        task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = Completed;</div>
<div class="line"><span class="lineno"> 1858</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1859</span>        task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = Aborted;</div>
<div class="line"><span class="lineno"> 1860</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1861</span>      <span class="keywordflow">switch</span> (exitCode) {</div>
<div class="line"><span class="lineno"> 1862</span>      <span class="keywordflow">case</span> 0:</div>
<div class="line"><span class="lineno"> 1863</span>        task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = Completed;</div>
<div class="line"><span class="lineno"> 1864</span>        <span class="keywordflow">if</span> (isAScript(task)) task-&gt;m_successfullSteps= task-&gt;m_stepCount;</div>
<div class="line"><span class="lineno"> 1865</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1866</span>      <span class="keywordflow">case</span> RENDER_LICENSE_NOT_FOUND:</div>
<div class="line"><span class="lineno"> 1867</span>        task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = Waiting;</div>
<div class="line"><span class="lineno"> 1868</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1869</span>      <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1870</span>        <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> != Suspended) task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = Aborted;</div>
<div class="line"><span class="lineno"> 1871</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1872</span>      }</div>
<div class="line"><span class="lineno"> 1873</span>    }</div>
<div class="line"><span class="lineno"> 1874</span> </div>
<div class="line"><span class="lineno"> 1875</span>    task-&gt;m_completionDate = QDateTime::currentDateTime();</div>
<div class="line"><span class="lineno"> 1876</span> </div>
<div class="line"><span class="lineno"> 1877</span>    <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Aborted) {</div>
<div class="line"><span class="lineno"> 1878</span>      task-&gt;m_failedOnServers.push_back(task-&gt;m_serverId);</div>
<div class="line"><span class="lineno"> 1879</span>      ++task-&gt;m_failureCount;</div>
<div class="line"><span class="lineno"> 1880</span>    }</div>
<div class="line"><span class="lineno"> 1881</span> </div>
<div class="line"><span class="lineno"> 1882</span>    <span class="keywordflow">if</span> (task-&gt;m_toBeDeleted) m_tasks.erase(itTask);</div>
<div class="line"><span class="lineno"> 1883</span> </div>
<div class="line"><span class="lineno"> 1884</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *parentTask = 0;</div>
<div class="line"><span class="lineno"> 1885</span> </div>
<div class="line"><span class="lineno"> 1886</span>    <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a> != <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1887</span>      map&lt;TaskId, CtrlFarmTask *&gt;::iterator itParent =</div>
<div class="line"><span class="lineno"> 1888</span>          m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a>));</div>
<div class="line"><span class="lineno"> 1889</span>      <span class="keywordflow">if</span> (itParent != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1890</span>        parentTask = itParent-&gt;second;</div>
<div class="line"><span class="lineno"> 1891</span> </div>
<div class="line"><span class="lineno"> 1892</span>        TaskState parentTaskState = Completed;</div>
<div class="line"><span class="lineno"> 1893</span>        <span class="keywordtype">bool</span> aSubTaskFailed       = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1894</span>        <span class="keywordtype">bool</span> noSubtaskRunning     = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1895</span> </div>
<div class="line"><span class="lineno"> 1896</span>        <span class="keywordflow">if</span> (parentTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> != Suspended &amp;&amp;</div>
<div class="line"><span class="lineno"> 1897</span>            parentTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> != Aborted) {</div>
<div class="line"><span class="lineno"> 1898</span>          std::vector&lt;QString&gt;::iterator itSubTaskId =</div>
<div class="line"><span class="lineno"> 1899</span>              parentTask-&gt;m_subTasks.begin();</div>
<div class="line"><span class="lineno"> 1900</span>          <span class="keywordflow">for</span> (; itSubTaskId != parentTask-&gt;m_subTasks.end(); ++itSubTaskId) {</div>
<div class="line"><span class="lineno"> 1901</span>            QString subTaskId = *itSubTaskId;</div>
<div class="line"><span class="lineno"> 1902</span>            map&lt;TaskId, CtrlFarmTask *&gt;::iterator itSubTask =</div>
<div class="line"><span class="lineno"> 1903</span>                m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(subTaskId));</div>
<div class="line"><span class="lineno"> 1904</span>            <span class="keywordflow">if</span> (itSubTask != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1905</span>              <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *subTask = itSubTask-&gt;second;</div>
<div class="line"><span class="lineno"> 1906</span> </div>
<div class="line"><span class="lineno"> 1907</span>              <span class="keywordflow">if</span> (subTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Running ||</div>
<div class="line"><span class="lineno"> 1908</span>                  subTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Waiting) {</div>
<div class="line"><span class="lineno"> 1909</span>                parentTaskState  = Running;</div>
<div class="line"><span class="lineno"> 1910</span>                noSubtaskRunning = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1911</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1912</span>              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (subTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Aborted)</div>
<div class="line"><span class="lineno"> 1913</span>                aSubTaskFailed = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1914</span>            }</div>
<div class="line"><span class="lineno"> 1915</span>          }</div>
<div class="line"><span class="lineno"> 1916</span>        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1917</span>          aSubTaskFailed = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1918</span>        ;  <span class="comment">// si arriva se e solo se il task padre e&#39; stato terminato</span></div>
<div class="line"><span class="lineno"> 1919</span> </div>
<div class="line"><span class="lineno"> 1920</span>        <span class="keywordflow">if</span> (aSubTaskFailed &amp;&amp; noSubtaskRunning)</div>
<div class="line"><span class="lineno"> 1921</span>          parentTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = Aborted;</div>
<div class="line"><span class="lineno"> 1922</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1923</span>          parentTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = parentTaskState;</div>
<div class="line"><span class="lineno"> 1924</span> </div>
<div class="line"><span class="lineno"> 1925</span>        <span class="keywordflow">if</span> (parentTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Completed ||</div>
<div class="line"><span class="lineno"> 1926</span>            parentTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Aborted) {</div>
<div class="line"><span class="lineno"> 1927</span>          parentTask-&gt;m_completionDate = task-&gt;m_completionDate;</div>
<div class="line"><span class="lineno"> 1928</span>          <span class="keywordflow">if</span> (parentTask-&gt;m_toBeDeleted) m_tasks.erase(itParent);</div>
<div class="line"><span class="lineno"> 1929</span>        }</div>
<div class="line"><span class="lineno"> 1930</span>      }</div>
<div class="line"><span class="lineno"> 1931</span>    }</div>
<div class="line"><span class="lineno"> 1932</span> </div>
<div class="line"><span class="lineno"> 1933</span>    map&lt;QString, FarmServerProxy *&gt;::iterator itServer =</div>
<div class="line"><span class="lineno"> 1934</span>        m_servers.find(task-&gt;m_serverId);</div>
<div class="line"><span class="lineno"> 1935</span>    <span class="keywordflow">if</span> (itServer != m_servers.end()) server = itServer-&gt;second;</div>
<div class="line"><span class="lineno"> 1936</span> </div>
<div class="line"><span class="lineno"> 1937</span>    <span class="keywordflow">if</span> (server) {</div>
<div class="line"><span class="lineno"> 1938</span>      <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Completed) {</div>
<div class="line"><span class="lineno"> 1939</span>        QString msg = <span class="stringliteral">&quot;Task &quot;</span> + taskId + <span class="stringliteral">&quot; completed on &quot;</span>;</div>
<div class="line"><span class="lineno"> 1940</span>        msg += server-&gt;getHostName();</div>
<div class="line"><span class="lineno"> 1941</span>        msg += <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 1942</span>        m_userLog-&gt;info(msg);</div>
<div class="line"><span class="lineno"> 1943</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1944</span>        QString msg = <span class="stringliteral">&quot;Task &quot;</span> + taskId + <span class="stringliteral">&quot; failed on &quot;</span>;</div>
<div class="line"><span class="lineno"> 1945</span>        msg += server-&gt;getHostName();</div>
<div class="line"><span class="lineno"> 1946</span>        msg += <span class="stringliteral">&quot; with exit code &quot;</span> + QString::number(exitCode);</div>
<div class="line"><span class="lineno"> 1947</span>        msg += <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 1948</span>        m_userLog-&gt;info(msg);</div>
<div class="line"><span class="lineno"> 1949</span>      }</div>
<div class="line"><span class="lineno"> 1950</span> </div>
<div class="line"><span class="lineno"> 1951</span>      server-&gt;removeTask(taskId);</div>
<div class="line"><span class="lineno"> 1952</span>    }</div>
<div class="line"><span class="lineno"> 1953</span> </div>
<div class="line"><span class="lineno"> 1954</span>    <span class="keywordtype">bool</span> allComplete = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1955</span>    <span class="keywordflow">if</span> (parentTask &amp;&amp; parentTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Completed) {</div>
<div class="line"><span class="lineno"> 1956</span>      m_userLog-&gt;info(<span class="stringliteral">&quot;Task &quot;</span> + parentTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a> + <span class="stringliteral">&quot; completed\n\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 1957</span>      allComplete = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1958</span>    }</div>
<div class="line"><span class="lineno"> 1959</span> </div>
<div class="line"><span class="lineno"> 1960</span>    <span class="keywordflow">if</span> (task-&gt;m_toBeDeleted) <span class="keyword">delete</span> task;</div>
<div class="line"><span class="lineno"> 1961</span>    <span class="keywordflow">if</span> (parentTask &amp;&amp; parentTask-&gt;m_toBeDeleted) <span class="keyword">delete</span> parentTask;</div>
<div class="line"><span class="lineno"> 1962</span>    <span class="comment">//*</span></div>
<div class="line"><span class="lineno"> 1963</span>    <span class="keywordflow">if</span> (allComplete) {</div>
<div class="line"><span class="lineno"> 1964</span>      activateReadyServers();</div>
<div class="line"><span class="lineno"> 1965</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1966</span>    }</div>
<div class="line"><span class="lineno"> 1967</span>    <span class="comment">//*/</span></div>
<div class="line"><span class="lineno"> 1968</span>  }</div>
<div class="line"><span class="lineno"> 1969</span> </div>
<div class="line"><span class="lineno"> 1970</span>  <span class="keywordflow">if</span> (server &amp;&amp; !server-&gt;m_offline &amp;&amp; exitCode != RENDER_LICENSE_NOT_FOUND) {</div>
<div class="line"><span class="lineno"> 1971</span>    <span class="comment">// cerca un task da sottomettere al server</span></div>
<div class="line"><span class="lineno"> 1972</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = getTaskToStart(server);</div>
<div class="line"><span class="lineno"> 1973</span>    <span class="keywordflow">if</span> (task) {</div>
<div class="line"><span class="lineno"> 1974</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1975</span>        <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Aborted) {</div>
<div class="line"><span class="lineno"> 1976</span>          vector&lt;QString&gt;::iterator it =</div>
<div class="line"><span class="lineno"> 1977</span>              find(task-&gt;m_failedOnServers.begin(),</div>
<div class="line"><span class="lineno"> 1978</span>                   task-&gt;m_failedOnServers.end(), server-&gt;getId());</div>
<div class="line"><span class="lineno"> 1979</span> </div>
<div class="line"><span class="lineno"> 1980</span>          <span class="keywordflow">if</span> (it == task-&gt;m_failedOnServers.end())</div>
<div class="line"><span class="lineno"> 1981</span>            doRestartTask(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>, <span class="keyword">false</span>, server);</div>
<div class="line"><span class="lineno"> 1982</span>          <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1983</span>            doRestartTask(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>, <span class="keyword">false</span>, 0);</div>
<div class="line"><span class="lineno"> 1984</span>            <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *nextTask = getNextTaskToStart(task, server);</div>
<div class="line"><span class="lineno"> 1985</span>            <span class="keywordflow">if</span> (nextTask) startTask(nextTask, server);</div>
<div class="line"><span class="lineno"> 1986</span>          }</div>
<div class="line"><span class="lineno"> 1987</span>        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1988</span>          startTask(task, server);</div>
<div class="line"><span class="lineno"> 1989</span>      } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp; <span class="comment">/*e*/</span>) {</div>
<div class="line"><span class="lineno"> 1990</span>      }</div>
<div class="line"><span class="lineno"> 1991</span>    }</div>
<div class="line"><span class="lineno"> 1992</span>  }</div>
<div class="line"><span class="lineno"> 1993</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d5429427f1121760cf5982877d95eee" name="a5d5429427f1121760cf5982877d95eee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d5429427f1121760cf5982877d95eee">&#9670;&nbsp;</a></span>taskProgress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::taskProgress </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>taskId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>step</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stepCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>frameNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FrameState&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1821</span>                                                    {</div>
<div class="line"><span class="lineno"> 1822</span>  map&lt;TaskId, CtrlFarmTask *&gt;::iterator itTask = m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(taskId));</div>
<div class="line"><span class="lineno"> 1823</span>  <span class="keywordflow">if</span> (itTask != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1824</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = itTask-&gt;second;</div>
<div class="line"><span class="lineno"> 1825</span>    <span class="keywordflow">if</span> (state == FrameDone)</div>
<div class="line"><span class="lineno"> 1826</span>      ++task-&gt;m_successfullSteps;</div>
<div class="line"><span class="lineno"> 1827</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1828</span>      ++task-&gt;m_failedSteps;</div>
<div class="line"><span class="lineno"> 1829</span> </div>
<div class="line"><span class="lineno"> 1830</span>    <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a> != <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1831</span>      map&lt;TaskId, CtrlFarmTask *&gt;::iterator itParentTask =</div>
<div class="line"><span class="lineno"> 1832</span>          m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a>));</div>
<div class="line"><span class="lineno"> 1833</span>      <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *parentTask = itParentTask-&gt;second;</div>
<div class="line"><span class="lineno"> 1834</span>      <span class="keywordflow">if</span> (state == FrameDone)</div>
<div class="line"><span class="lineno"> 1835</span>        ++parentTask-&gt;m_successfullSteps;</div>
<div class="line"><span class="lineno"> 1836</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1837</span>        ++parentTask-&gt;m_failedSteps;</div>
<div class="line"><span class="lineno"> 1838</span>    }</div>
<div class="line"><span class="lineno"> 1839</span>  }</div>
<div class="line"><span class="lineno"> 1840</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7bcc0592cd4fb4bb9733bcbb05e0e4f4" name="a7bcc0592cd4fb4bb9733bcbb05e0e4f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bcc0592cd4fb4bb9733bcbb05e0e4f4">&#9670;&nbsp;</a></span>taskSubmissionError()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FarmController::taskSubmissionError </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>taskId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>errCode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_t_farm_controller.html">TFarmController</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1741</span>                                                                           {</div>
<div class="line"><span class="lineno"> 1742</span>  <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *server = 0;</div>
<div class="line"><span class="lineno"> 1743</span> </div>
<div class="line"><span class="lineno"> 1744</span>  map&lt;TaskId, CtrlFarmTask *&gt;::iterator itTask = m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(taskId));</div>
<div class="line"><span class="lineno"> 1745</span>  <span class="keywordflow">if</span> (itTask != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1746</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = itTask-&gt;second;</div>
<div class="line"><span class="lineno"> 1747</span>    task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a>     = Aborted;</div>
<div class="line"><span class="lineno"> 1748</span> </div>
<div class="line"><span class="lineno"> 1749</span>    task-&gt;m_completionDate = QDateTime::currentDateTime();</div>
<div class="line"><span class="lineno"> 1750</span> </div>
<div class="line"><span class="lineno"> 1751</span>    <span class="keywordflow">if</span> (task-&gt;m_toBeDeleted) m_tasks.erase(itTask);</div>
<div class="line"><span class="lineno"> 1752</span> </div>
<div class="line"><span class="lineno"> 1753</span>    <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *parentTask = 0;</div>
<div class="line"><span class="lineno"> 1754</span> </div>
<div class="line"><span class="lineno"> 1755</span>    <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a> != <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1756</span>      map&lt;TaskId, CtrlFarmTask *&gt;::iterator itParent =</div>
<div class="line"><span class="lineno"> 1757</span>          m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a93df061d1b990dc0c8f8149616b3fb0e">m_parentId</a>));</div>
<div class="line"><span class="lineno"> 1758</span>      <span class="keywordflow">if</span> (itParent != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1759</span>        parentTask = itParent-&gt;second;</div>
<div class="line"><span class="lineno"> 1760</span> </div>
<div class="line"><span class="lineno"> 1761</span>        TaskState parentTaskState = Aborted;</div>
<div class="line"><span class="lineno"> 1762</span>        std::vector&lt;QString&gt;::iterator itSubTaskId =</div>
<div class="line"><span class="lineno"> 1763</span>            parentTask-&gt;m_subTasks.begin();</div>
<div class="line"><span class="lineno"> 1764</span>        <span class="keywordflow">for</span> (; itSubTaskId != parentTask-&gt;m_subTasks.end(); ++itSubTaskId) {</div>
<div class="line"><span class="lineno"> 1765</span>          QString subTaskId = *itSubTaskId;</div>
<div class="line"><span class="lineno"> 1766</span>          map&lt;TaskId, CtrlFarmTask *&gt;::iterator itSubTask =</div>
<div class="line"><span class="lineno"> 1767</span>              m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(subTaskId));</div>
<div class="line"><span class="lineno"> 1768</span>          <span class="keywordflow">if</span> (itSubTask != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1769</span>            <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *subTask = itSubTask-&gt;second;</div>
<div class="line"><span class="lineno"> 1770</span>            <span class="keywordflow">if</span> (subTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Running || subTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Waiting) {</div>
<div class="line"><span class="lineno"> 1771</span>              parentTaskState = Running;</div>
<div class="line"><span class="lineno"> 1772</span>              <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1773</span>            }</div>
<div class="line"><span class="lineno"> 1774</span>          }</div>
<div class="line"><span class="lineno"> 1775</span>        }</div>
<div class="line"><span class="lineno"> 1776</span> </div>
<div class="line"><span class="lineno"> 1777</span>        parentTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = parentTaskState;</div>
<div class="line"><span class="lineno"> 1778</span>        <span class="keywordflow">if</span> (parentTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Aborted ||</div>
<div class="line"><span class="lineno"> 1779</span>            parentTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Aborted) {</div>
<div class="line"><span class="lineno"> 1780</span>          parentTask-&gt;m_completionDate = task-&gt;m_completionDate;</div>
<div class="line"><span class="lineno"> 1781</span>          <span class="keywordflow">if</span> (parentTask-&gt;m_toBeDeleted) m_tasks.erase(itParent);</div>
<div class="line"><span class="lineno"> 1782</span>        }</div>
<div class="line"><span class="lineno"> 1783</span>      }</div>
<div class="line"><span class="lineno"> 1784</span>    }</div>
<div class="line"><span class="lineno"> 1785</span> </div>
<div class="line"><span class="lineno"> 1786</span>    map&lt;QString, FarmServerProxy *&gt;::iterator itServer =</div>
<div class="line"><span class="lineno"> 1787</span>        m_servers.find(task-&gt;m_serverId);</div>
<div class="line"><span class="lineno"> 1788</span>    <span class="keywordflow">if</span> (itServer != m_servers.end()) server = itServer-&gt;second;</div>
<div class="line"><span class="lineno"> 1789</span> </div>
<div class="line"><span class="lineno"> 1790</span>    <span class="keywordflow">if</span> (server) {</div>
<div class="line"><span class="lineno"> 1791</span>      server-&gt;removeTask(taskId);</div>
<div class="line"><span class="lineno"> 1792</span>    }</div>
<div class="line"><span class="lineno"> 1793</span> </div>
<div class="line"><span class="lineno"> 1794</span>    <span class="keywordflow">if</span> (task-&gt;m_toBeDeleted) <span class="keyword">delete</span> task;</div>
<div class="line"><span class="lineno"> 1795</span>    <span class="keywordflow">if</span> (parentTask &amp;&amp; parentTask-&gt;m_toBeDeleted) <span class="keyword">delete</span> parentTask;</div>
<div class="line"><span class="lineno"> 1796</span>  }</div>
<div class="line"><span class="lineno"> 1797</span> </div>
<div class="line"><span class="lineno"> 1798</span>  <span class="keywordflow">if</span> (server &amp;&amp; !server-&gt;m_offline) {</div>
<div class="line"><span class="lineno"> 1799</span>    <span class="comment">// cerca un task da sottomettere al server</span></div>
<div class="line"><span class="lineno"> 1800</span> </div>
<div class="line"><span class="lineno"> 1801</span>    itTask = m_tasks.begin();</div>
<div class="line"><span class="lineno"> 1802</span>    <span class="keywordflow">for</span> (; itTask != m_tasks.end(); ++itTask) {</div>
<div class="line"><span class="lineno"> 1803</span>      <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *task = itTask-&gt;second;</div>
<div class="line"><span class="lineno"> 1804</span>      <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Waiting) {</div>
<div class="line"><span class="lineno"> 1805</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1806</span>          startTask(task, server);</div>
<div class="line"><span class="lineno"> 1807</span>        } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp; <span class="comment">/*e*/</span>) {</div>
<div class="line"><span class="lineno"> 1808</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1809</span>        }</div>
<div class="line"><span class="lineno"> 1810</span> </div>
<div class="line"><span class="lineno"> 1811</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1812</span>      }</div>
<div class="line"><span class="lineno"> 1813</span>    }</div>
<div class="line"><span class="lineno"> 1814</span>  }</div>
<div class="line"><span class="lineno"> 1815</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af906eaf2bcb3dab4b2b72d73a68bb9ff" name="af906eaf2bcb3dab4b2b72d73a68bb9ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af906eaf2bcb3dab4b2b72d73a68bb9ff">&#9670;&nbsp;</a></span>tryToStartTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool FarmController::tryToStartTask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1241</span>                                                      {</div>
<div class="line"><span class="lineno"> 1242</span>  QMutexLocker sl(&amp;m_mutex);</div>
<div class="line"><span class="lineno"> 1243</span> </div>
<div class="line"><span class="lineno"> 1244</span>  <span class="keywordtype">bool</span> dependenciesCompleted = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1245</span> </div>
<div class="line"><span class="lineno"> 1246</span>  <span class="keywordflow">if</span> (task-&gt;m_dependencies) {</div>
<div class="line"><span class="lineno"> 1247</span>    <span class="keywordtype">int</span> count = task-&gt;m_dependencies-&gt;getTaskCount();</div>
<div class="line"><span class="lineno"> 1248</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; ++i) {</div>
<div class="line"><span class="lineno"> 1249</span>      TFarmTask::Id <span class="keywordtype">id</span> = task-&gt;m_dependencies-&gt;getTaskId(i);</div>
<div class="line"><span class="lineno"> 1250</span>      map&lt;TaskId, CtrlFarmTask *&gt;::iterator itDepTask =</div>
<div class="line"><span class="lineno"> 1251</span>          m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(<span class="keywordtype">id</span>));</div>
<div class="line"><span class="lineno"> 1252</span>      <span class="keywordflow">if</span> (itDepTask != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1253</span>        <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *depTask = itDepTask-&gt;second;</div>
<div class="line"><span class="lineno"> 1254</span>        <span class="keywordflow">if</span> (depTask-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> != Completed) {</div>
<div class="line"><span class="lineno"> 1255</span>          dependenciesCompleted = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1256</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1257</span>        }</div>
<div class="line"><span class="lineno"> 1258</span>      }</div>
<div class="line"><span class="lineno"> 1259</span>    }</div>
<div class="line"><span class="lineno"> 1260</span>  }</div>
<div class="line"><span class="lineno"> 1261</span> </div>
<div class="line"><span class="lineno"> 1262</span>  <span class="keywordflow">if</span> (!dependenciesCompleted) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1263</span> </div>
<div class="line"><span class="lineno"> 1264</span>  <span class="keywordflow">if</span> (task-&gt;m_subTasks.empty()) {</div>
<div class="line"><span class="lineno"> 1265</span>    vector&lt;FarmServerProxy *&gt; m_partiallyBusyServers;</div>
<div class="line"><span class="lineno"> 1266</span> </div>
<div class="line"><span class="lineno"> 1267</span>    map&lt;QString, FarmServerProxy *&gt;::iterator it = m_servers.begin();</div>
<div class="line"><span class="lineno"> 1268</span>    <span class="keywordflow">for</span> (; it != m_servers.end(); ++it) {</div>
<div class="line"><span class="lineno"> 1269</span>      <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *server = it-&gt;second;</div>
<div class="line"><span class="lineno"> 1270</span>      <span class="keywordflow">if</span> (server-&gt;m_attached &amp;&amp; !server-&gt;m_offline &amp;&amp;</div>
<div class="line"><span class="lineno"> 1271</span>          (<span class="keywordtype">int</span>)server-&gt;getTasks().size() &lt; server-&gt;m_maxTaskCount) {</div>
<div class="line"><span class="lineno"> 1272</span>        <span class="keywordflow">if</span> (!(task-&gt;m_platform == NoPlatform ||</div>
<div class="line"><span class="lineno"> 1273</span>              task-&gt;m_platform == server-&gt;m_platform))</div>
<div class="line"><span class="lineno"> 1274</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1275</span> </div>
<div class="line"><span class="lineno"> 1276</span>        vector&lt;QString&gt;::iterator its =</div>
<div class="line"><span class="lineno"> 1277</span>            find(task-&gt;m_failedOnServers.begin(), task-&gt;m_failedOnServers.end(),</div>
<div class="line"><span class="lineno"> 1278</span>                 server-&gt;getId());</div>
<div class="line"><span class="lineno"> 1279</span> </div>
<div class="line"><span class="lineno"> 1280</span>        <span class="keywordflow">if</span> (its != task-&gt;m_failedOnServers.end()) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1281</span> </div>
<div class="line"><span class="lineno"> 1282</span>        <span class="keywordflow">if</span> (server-&gt;testConnection(500)) {</div>
<div class="line"><span class="lineno"> 1283</span>          <span class="keywordflow">if</span> (server-&gt;getTasks().size() == 0) {</div>
<div class="line"><span class="lineno"> 1284</span>            <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1285</span>              startTask(task, server);</div>
<div class="line"><span class="lineno"> 1286</span>            } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp; <span class="comment">/*e*/</span>) {</div>
<div class="line"><span class="lineno"> 1287</span>              <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1288</span>            }</div>
<div class="line"><span class="lineno"> 1289</span> </div>
<div class="line"><span class="lineno"> 1290</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1291</span>          } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1292</span>            m_partiallyBusyServers.push_back(server);</div>
<div class="line"><span class="lineno"> 1293</span>        }</div>
<div class="line"><span class="lineno"> 1294</span>      }</div>
<div class="line"><span class="lineno"> 1295</span>    }</div>
<div class="line"><span class="lineno"> 1296</span> </div>
<div class="line"><span class="lineno"> 1297</span>    vector&lt;FarmServerProxy *&gt;::iterator it2 = m_partiallyBusyServers.begin();</div>
<div class="line"><span class="lineno"> 1298</span>    <span class="keywordflow">for</span> (; it2 != m_partiallyBusyServers.end(); ++it2) {</div>
<div class="line"><span class="lineno"> 1299</span>      <a class="code hl_class" href="class_farm_server_proxy.html">FarmServerProxy</a> *server = *it2;</div>
<div class="line"><span class="lineno"> 1300</span>      <span class="keywordflow">if</span> (server-&gt;testConnection(500)) {</div>
<div class="line"><span class="lineno"> 1301</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1302</span>          startTask(task, server);</div>
<div class="line"><span class="lineno"> 1303</span>        } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp; <span class="comment">/*e*/</span>) {</div>
<div class="line"><span class="lineno"> 1304</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1305</span>        }</div>
<div class="line"><span class="lineno"> 1306</span>      }</div>
<div class="line"><span class="lineno"> 1307</span> </div>
<div class="line"><span class="lineno"> 1308</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1309</span>    }</div>
<div class="line"><span class="lineno"> 1310</span> </div>
<div class="line"><span class="lineno"> 1311</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1312</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1313</span>    <span class="comment">// un task composto e&#39; considerato started sse e&#39; started almeno uno</span></div>
<div class="line"><span class="lineno"> 1314</span>    <span class="comment">// dei task che lo compongono</span></div>
<div class="line"><span class="lineno"> 1315</span> </div>
<div class="line"><span class="lineno"> 1316</span>    <span class="keywordtype">bool</span> started                          = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1317</span>    vector&lt;QString&gt;::iterator itSubTaskId = task-&gt;m_subTasks.begin();</div>
<div class="line"><span class="lineno"> 1318</span>    <span class="keywordflow">for</span> (; itSubTaskId != task-&gt;m_subTasks.end(); ++itSubTaskId) {</div>
<div class="line"><span class="lineno"> 1319</span>      map&lt;TaskId, CtrlFarmTask *&gt;::iterator itSubTask =</div>
<div class="line"><span class="lineno"> 1320</span>          m_tasks.find(<a class="code hl_class" href="class_task_id.html">TaskId</a>(*itSubTaskId));</div>
<div class="line"><span class="lineno"> 1321</span>      <span class="keywordflow">if</span> (itSubTask != m_tasks.end()) {</div>
<div class="line"><span class="lineno"> 1322</span>        <a class="code hl_class" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *subTask = itSubTask-&gt;second;</div>
<div class="line"><span class="lineno"> 1323</span>        <span class="keywordflow">if</span> (tryToStartTask(subTask)) started= <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1324</span>      }</div>
<div class="line"><span class="lineno"> 1325</span>    }</div>
<div class="line"><span class="lineno"> 1326</span> </div>
<div class="line"><span class="lineno"> 1327</span>    <span class="keywordflow">return</span> started;</div>
<div class="line"><span class="lineno"> 1328</span>  }</div>
<div class="line"><span class="lineno"> 1329</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a350ad3adb4c2088f9e76ced2db2b20bd" name="a350ad3adb4c2088f9e76ced2db2b20bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a350ad3adb4c2088f9e76ced2db2b20bd">&#9670;&nbsp;</a></span>m_addr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QString FarmController::m_addr</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a559334fb6431abf9cb4a2cdbd0b22200" name="a559334fb6431abf9cb4a2cdbd0b22200"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a559334fb6431abf9cb4a2cdbd0b22200">&#9670;&nbsp;</a></span>m_hostName</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QString FarmController::m_hostName</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ada66986ce4916c439d1ae008b300160d" name="ada66986ce4916c439d1ae008b300160d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada66986ce4916c439d1ae008b300160d">&#9670;&nbsp;</a></span>m_mutex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_thread_1_1_mutex.html">TThread::Mutex</a> FarmController::m_mutex</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2c1d4ccc9818d180417ae5f4e931c6d7" name="a2c1d4ccc9818d180417ae5f4e931c6d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c1d4ccc9818d180417ae5f4e931c6d7">&#9670;&nbsp;</a></span>m_port</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FarmController::m_port</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a35b30d893ff236eebcb2f9140c1daa15" name="a35b30d893ff236eebcb2f9140c1daa15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35b30d893ff236eebcb2f9140c1daa15">&#9670;&nbsp;</a></span>m_servers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">map&lt;QString, <a class="el" href="class_farm_server_proxy.html">FarmServerProxy</a> *&gt; FarmController::m_servers</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a447713751e2346d4ccdfff2f76edf916" name="a447713751e2346d4ccdfff2f76edf916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a447713751e2346d4ccdfff2f76edf916">&#9670;&nbsp;</a></span>m_tasks</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">map&lt;<a class="el" href="class_task_id.html">TaskId</a>, <a class="el" href="class_ctrl_farm_task.html">CtrlFarmTask</a> *&gt; FarmController::m_tasks</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5103e7b8ebe5e0767d9abcf50bb7d518" name="a5103e7b8ebe5e0767d9abcf50bb7d518"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5103e7b8ebe5e0767d9abcf50bb7d518">&#9670;&nbsp;</a></span>m_userLog</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_user_log.html">TUserLog</a>* FarmController::m_userLog</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a36b3e560d89afd22439a5d50d4f5c27f" name="a36b3e560d89afd22439a5d50d4f5c27f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36b3e560d89afd22439a5d50d4f5c27f">&#9670;&nbsp;</a></span>NextTaskId</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int FarmController::NextTaskId = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>E:/opentoonz/toonz/sources/toonzfarm/tfarmcontroller/<a class="el" href="">tfarmcontroller.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
