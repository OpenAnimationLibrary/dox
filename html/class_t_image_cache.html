<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: TImageCache Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_t_image_cache-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">TImageCache Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="">timagecache.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache_1_1_imp.html">Imp</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae4fef5421da2d9a31a25efb27b192706"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#ae4fef5421da2d9a31a25efb27b192706">getUniqueId</a> ()</td></tr>
<tr class="separator:ae4fef5421da2d9a31a25efb27b192706"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a55bc58e3f97d4ec6f3782b5acb704c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#a6a55bc58e3f97d4ec6f3782b5acb704c">setEnabled</a> (bool enable)</td></tr>
<tr class="separator:a6a55bc58e3f97d4ec6f3782b5acb704c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0da071a1466b04f8dc49052102d5e933"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#a0da071a1466b04f8dc49052102d5e933">isEnabled</a> ()</td></tr>
<tr class="memdesc:a0da071a1466b04f8dc49052102d5e933"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true or false whether the cache is active or not.  <a href="class_t_image_cache.html#a0da071a1466b04f8dc49052102d5e933">More...</a><br /></td></tr>
<tr class="separator:a0da071a1466b04f8dc49052102d5e933"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac40a531e42468563fa695fac90d1e257"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#ac40a531e42468563fa695fac90d1e257">setRootDir</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;fp)</td></tr>
<tr class="separator:ac40a531e42468563fa695fac90d1e257"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a124eae4cf370288f42c22b3477cb5163"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#a124eae4cf370288f42c22b3477cb5163">add</a> (const std::string &amp;id, const <a class="el" href="class_t_smart_pointer_t.html">TImageP</a> &amp;img, bool overwrite=true)</td></tr>
<tr class="separator:a124eae4cf370288f42c22b3477cb5163"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57d63227dfe2532b0aed22c47113be66"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#a57d63227dfe2532b0aed22c47113be66">remove</a> (const std::string &amp;id)</td></tr>
<tr class="memdesc:a57d63227dfe2532b0aed22c47113be66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes from the image cache the image associated to passed id.  <a href="class_t_image_cache.html#a57d63227dfe2532b0aed22c47113be66">More...</a><br /></td></tr>
<tr class="separator:a57d63227dfe2532b0aed22c47113be66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a55f603009d6f1d884f9d1afee94178"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#a4a55f603009d6f1d884f9d1afee94178">remap</a> (const std::string &amp;dstId, const std::string &amp;srcId)</td></tr>
<tr class="memdesc:a4a55f603009d6f1d884f9d1afee94178"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rebinds the association between a previously cached image and its id.  <a href="class_t_image_cache.html#a4a55f603009d6f1d884f9d1afee94178">More...</a><br /></td></tr>
<tr class="separator:a4a55f603009d6f1d884f9d1afee94178"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae960869d6789a4ec8538601ac4efcf7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#aae960869d6789a4ec8538601ac4efcf7">remapIcons</a> (const std::string &amp;dstId, const std::string &amp;srcId)</td></tr>
<tr class="separator:aae960869d6789a4ec8538601ac4efcf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ad930f92d348ab6231f50b46888c8cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#a6ad930f92d348ab6231f50b46888c8cf">clear</a> (bool deleteFolder=false)</td></tr>
<tr class="separator:a6ad930f92d348ab6231f50b46888c8cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d19207677efac341b81cb84a71924e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#a6d19207677efac341b81cb84a71924e4">clearSceneImages</a> ()</td></tr>
<tr class="separator:a6d19207677efac341b81cb84a71924e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef5ed676d5379c55c232c75f50ce4d0c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#aef5ed676d5379c55c232c75f50ce4d0c">isCached</a> (const std::string &amp;id) const</td></tr>
<tr class="separator:aef5ed676d5379c55c232c75f50ce4d0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad339a2d7d4efda3e4c9192f0094cfa2b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#ad339a2d7d4efda3e4c9192f0094cfa2b">getSubsampling</a> (const std::string &amp;id, int &amp;subs) const</td></tr>
<tr class="memdesc:ad339a2d7d4efda3e4c9192f0094cfa2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the subsampling level of the image under the specified id.  <a href="class_t_image_cache.html#ad339a2d7d4efda3e4c9192f0094cfa2b">More...</a><br /></td></tr>
<tr class="separator:ad339a2d7d4efda3e4c9192f0094cfa2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea3ac2752efd6fa9689f5a7c1e895e41"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_smart_pointer_t.html">TImageP</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#aea3ac2752efd6fa9689f5a7c1e895e41">get</a> (const std::string &amp;id, bool toBeModified) const</td></tr>
<tr class="separator:aea3ac2752efd6fa9689f5a7c1e895e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacf232d4ccaa09192a9eabaac4b22f40"><td class="memItemLeft" align="right" valign="top">UINT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#aacf232d4ccaa09192a9eabaac4b22f40">getMemUsage</a> () const</td></tr>
<tr class="memdesc:aacf232d4ccaa09192a9eabaac4b22f40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the RAM memory size (KB) occupied by the image cache.  <a href="class_t_image_cache.html#aacf232d4ccaa09192a9eabaac4b22f40">More...</a><br /></td></tr>
<tr class="separator:aacf232d4ccaa09192a9eabaac4b22f40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4aa5545031cb8cc3016107bb26d9739e"><td class="memItemLeft" align="right" valign="top">UINT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#a4aa5545031cb8cc3016107bb26d9739e">getDiskUsage</a> () const</td></tr>
<tr class="separator:a4aa5545031cb8cc3016107bb26d9739e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f6f7327e34bbf60a4aa00ef0718201b"><td class="memItemLeft" align="right" valign="top">UINT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#a5f6f7327e34bbf60a4aa00ef0718201b">getUncompressedMemUsage</a> (const std::string &amp;id) const</td></tr>
<tr class="separator:a5f6f7327e34bbf60a4aa00ef0718201b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc521ca28f12b9261b10e2a5c5174db1"><td class="memItemLeft" align="right" valign="top">UINT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#acc521ca28f12b9261b10e2a5c5174db1">getMemUsage</a> (const std::string &amp;id) const</td></tr>
<tr class="memdesc:acc521ca28f12b9261b10e2a5c5174db1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the RAM memory size (KB) of the image associated to passed id.  <a href="class_t_image_cache.html#acc521ca28f12b9261b10e2a5c5174db1">More...</a><br /></td></tr>
<tr class="separator:acc521ca28f12b9261b10e2a5c5174db1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6a52551d4b6c4d10183a17cd674b154"><td class="memItemLeft" align="right" valign="top">UINT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#af6a52551d4b6c4d10183a17cd674b154">getDiskUsage</a> (const std::string &amp;id) const</td></tr>
<tr class="separator:af6a52551d4b6c4d10183a17cd674b154"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a515a265a953dbe11d321516835c99ad9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#a515a265a953dbe11d321516835c99ad9">dump</a> (std::ostream &amp;os) const</td></tr>
<tr class="separator:a515a265a953dbe11d321516835c99ad9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2a3c6b224a17c86f63f65ec21dd63d1"><td class="memItemLeft" align="right" valign="top">UCHAR *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#aa2a3c6b224a17c86f63f65ec21dd63d1">compressAndMalloc</a> (TUINT32 requestedSize)</td></tr>
<tr class="separator:aa2a3c6b224a17c86f63f65ec21dd63d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60d19e45b309c08d6525f1630fc879ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#a60d19e45b309c08d6525f1630fc879ee">outputMap</a> (UINT chunkRequested, std::string filename)</td></tr>
<tr class="separator:a60d19e45b309c08d6525f1630fc879ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff9cc84974f653e857c54ce9e7fbcd06"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#aff9cc84974f653e857c54ce9e7fbcd06">hasBeenModified</a> (const std::string &amp;id, bool reset) const</td></tr>
<tr class="separator:aff9cc84974f653e857c54ce9e7fbcd06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04032caf7189664a8f0719b85f18f7da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#a04032caf7189664a8f0719b85f18f7da">add</a> (const QString &amp;id, const <a class="el" href="class_t_smart_pointer_t.html">TImageP</a> &amp;img, bool overwrite=true)</td></tr>
<tr class="separator:a04032caf7189664a8f0719b85f18f7da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af23322c9d0ea7231a9d06fc2ddf8f314"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#af23322c9d0ea7231a9d06fc2ddf8f314">remove</a> (const QString &amp;id)</td></tr>
<tr class="separator:af23322c9d0ea7231a9d06fc2ddf8f314"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a931afcdc1acca8b28bec0c57b3231206"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_smart_pointer_t.html">TImageP</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#a931afcdc1acca8b28bec0c57b3231206">get</a> (const QString &amp;id, bool toBeModified) const</td></tr>
<tr class="separator:a931afcdc1acca8b28bec0c57b3231206"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51f6d0d317918c58b109972ce68b3857"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#a51f6d0d317918c58b109972ce68b3857">compress</a> (const std::string &amp;id)</td></tr>
<tr class="separator:a51f6d0d317918c58b109972ce68b3857"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ac2540f2121531b94a532d7c40bcf3c3b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_t_image_cache.html">TImageCache</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_image_cache.html#ac2540f2121531b94a532d7c40bcf3c3b">instance</a> ()</td></tr>
<tr class="separator:ac2540f2121531b94a532d7c40bcf3c3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >The Image Cache is the global container used throughout Toonz to store images that need to be retrieved at later times.</p>
<p ><a class="el" href="class_t_image_cache.html">TImageCache</a> is Toonz's low-level manager singleton that deals with image storage. <br  />
<br  />
 The main task of <a class="el" href="class_t_image_cache.html">TImageCache</a> is that of acting as an associative container that maps a name (of std::string type) into an image smart pointer. Many-to-one relationships where multiple names map to the same image <em>are</em> supported. Thus, users can <a class="el" href="class_t_image_cache.html#a124eae4cf370288f42c22b3477cb5163">add()</a> an image and <a class="el" href="class_t_image_cache.html#aea3ac2752efd6fa9689f5a7c1e895e41">get()</a> it later, until comes the time to <a class="el" href="class_t_image_cache.html#a57d63227dfe2532b0aed22c47113be66" title="Removes from the image cache the image associated to passed id.">remove()</a> it. <br  />
<br  />
 An important reason to use <a class="el" href="class_t_image_cache.html">TImageCache</a> instead of direct storage of TImageP or TRasterP instances is that it takes care of verifying memory shortages in the process' virtual address space, and in case either compresses or ships to disk unreferenced images with last-access precedence.</p>
<dl class="section warning"><dt>Warning</dt><dd>Memory-hungry tasks should always use <a class="el" href="class_t_image_cache.html">TImageCache</a> to store images, since it prevents abuses of system memory. This is especially true on 32-bit OSes. </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a04032caf7189664a8f0719b85f18f7da" name="a04032caf7189664a8f0719b85f18f7da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04032caf7189664a8f0719b85f18f7da">&#9670;&nbsp;</a></span>add() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TImageCache::add </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TImageP</a> &amp;&#160;</td>
          <td class="paramname"><em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>overwrite</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1952</span>                                                                           {</div>
<div class="line"><span class="lineno"> 1953</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="class_t_image_cache.html#a0da071a1466b04f8dc49052102d5e933">isEnabled</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1954</span>  m_imp-&gt;add(<span class="keywordtype">id</span>.toStdString(), img, overwrite);</div>
<div class="line"><span class="lineno"> 1955</span>}</div>
<div class="ttc" id="aclass_t_image_cache_html_a0da071a1466b04f8dc49052102d5e933"><div class="ttname"><a href="class_t_image_cache.html#a0da071a1466b04f8dc49052102d5e933">TImageCache::isEnabled</a></div><div class="ttdeci">bool isEnabled()</div><div class="ttdoc">Returns true or false whether the cache is active or not.</div><div class="ttdef"><b>Definition:</b> timagecache.cpp:1111</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a124eae4cf370288f42c22b3477cb5163" name="a124eae4cf370288f42c22b3477cb5163"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a124eae4cf370288f42c22b3477cb5163">&#9670;&nbsp;</a></span>add() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TImageCache::add </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TImageP</a> &amp;&#160;</td>
          <td class="paramname"><em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>overwrite</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Adds the passed image to the cache, under the specified id. The optional <b>overwrite</b> parameter may be specified in case an image with the same id has already been cached. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1154</span>                                      {</div>
<div class="line"><span class="lineno"> 1155</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="class_t_image_cache.html#a0da071a1466b04f8dc49052102d5e933">isEnabled</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1156</span>  m_imp-&gt;add(<span class="keywordtype">id</span>, img, overwrite);</div>
<div class="line"><span class="lineno"> 1157</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01111">isEnabled()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l01043">TRop::convertRaster50to46()</a>, <a class="el" href="#l01360">PreviewFxManager::freeze()</a>, <a class="el" href="#l00310">ImageManager::getImage()</a>, <a class="el" href="#l00123">CSTPic&lt; P &gt;::initPic()</a>, <a class="el" href="#l02091">TXshSimpleLevel::renumber()</a>, <a class="el" href="#l00382">MovieRenderer::Imp::saveFrame()</a>, <a class="el" href="#l00445">ImageManager::setImage()</a>, and <a class="el" href="#l01992">TCachedImage::setImage()</a>.</p>

</div>
</div>
<a id="a6ad930f92d348ab6231f50b46888c8cf" name="a6ad930f92d348ab6231f50b46888c8cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ad930f92d348ab6231f50b46888c8cf">&#9670;&nbsp;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TImageCache::clear </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>deleteFolder</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Clears the image cache. After calling this method, every image in the cache is released - and optionally the cache swap folder is deleted. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1375</span>                                         {</div>
<div class="line"><span class="lineno"> 1376</span>  TThread::MutexLocker sl(&amp;m_imp-&gt;m_mutex);</div>
<div class="line"><span class="lineno"> 1377</span>  m_imp-&gt;m_uncompressedItems.clear();</div>
<div class="line"><span class="lineno"> 1378</span>  m_imp-&gt;m_itemHistory.clear();</div>
<div class="line"><span class="lineno"> 1379</span>  m_imp-&gt;m_compressedItems.clear();</div>
<div class="line"><span class="lineno"> 1380</span>  m_imp-&gt;m_duplicatedItems.clear();</div>
<div class="line"><span class="lineno"> 1381</span>  m_imp-&gt;m_itemsByImagePointer.clear();</div>
<div class="line"><span class="lineno"> 1382</span>  <span class="keywordflow">if</span> (deleteFolder &amp;&amp; m_imp-&gt;m_rootDir != <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>())</div>
<div class="line"><span class="lineno"> 1383</span>    TSystem::rmDirTree(m_imp-&gt;m_rootDir);</div>
<div class="line"><span class="lineno"> 1384</span>}</div>
<div class="ttc" id="aclass_t_file_path_html"><div class="ttname"><a href="class_t_file_path.html">TFilePath</a></div><div class="ttdef"><b>Definition:</b> tfilepath.h:134</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d19207677efac341b81cb84a71924e4" name="a6d19207677efac341b81cb84a71924e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d19207677efac341b81cb84a71924e4">&#9670;&nbsp;</a></span>clearSceneImages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TImageCache::clearSceneImages </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Clears the image cache of all images which belong to current scene. This spares images (typically file browser icons) which are scene-independent. <br  />
 <br  />
<b></b>{NOTE:} Scene-independent images are simply assumed to have the "$:" id prefix. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1388</span>                                   {</div>
<div class="line"><span class="lineno"> 1389</span>  TThread::MutexLocker sl(&amp;m_imp-&gt;m_mutex);</div>
<div class="line"><span class="lineno"> 1390</span> </div>
<div class="line"><span class="lineno"> 1391</span>  <span class="comment">// note the &#39;;&#39; - which follows &#39;:&#39; in the ascii table</span></div>
<div class="line"><span class="lineno"> 1392</span>  m_imp-&gt;m_uncompressedItems.erase(</div>
<div class="line"><span class="lineno"> 1393</span>      m_imp-&gt;m_uncompressedItems.begin(),</div>
<div class="line"><span class="lineno"> 1394</span>      m_imp-&gt;m_uncompressedItems.lower_bound(<span class="stringliteral">&quot;$:&quot;</span>));</div>
<div class="line"><span class="lineno"> 1395</span>  m_imp-&gt;m_uncompressedItems.erase(m_imp-&gt;m_uncompressedItems.lower_bound(<span class="stringliteral">&quot;$;&quot;</span>),</div>
<div class="line"><span class="lineno"> 1396</span>                                   m_imp-&gt;m_uncompressedItems.end());</div>
<div class="line"><span class="lineno"> 1397</span> </div>
<div class="line"><span class="lineno"> 1398</span>  m_imp-&gt;m_compressedItems.erase(m_imp-&gt;m_compressedItems.begin(),</div>
<div class="line"><span class="lineno"> 1399</span>                                 m_imp-&gt;m_compressedItems.lower_bound(<span class="stringliteral">&quot;$:&quot;</span>));</div>
<div class="line"><span class="lineno"> 1400</span>  m_imp-&gt;m_compressedItems.erase(m_imp-&gt;m_compressedItems.lower_bound(<span class="stringliteral">&quot;$;&quot;</span>),</div>
<div class="line"><span class="lineno"> 1401</span>                                 m_imp-&gt;m_compressedItems.end());</div>
<div class="line"><span class="lineno"> 1402</span> </div>
<div class="line"><span class="lineno"> 1403</span>  m_imp-&gt;m_duplicatedItems.erase(m_imp-&gt;m_duplicatedItems.begin(),</div>
<div class="line"><span class="lineno"> 1404</span>                                 m_imp-&gt;m_duplicatedItems.lower_bound(<span class="stringliteral">&quot;$:&quot;</span>));</div>
<div class="line"><span class="lineno"> 1405</span>  m_imp-&gt;m_duplicatedItems.erase(m_imp-&gt;m_duplicatedItems.lower_bound(<span class="stringliteral">&quot;$;&quot;</span>),</div>
<div class="line"><span class="lineno"> 1406</span>                                 m_imp-&gt;m_duplicatedItems.end());</div>
<div class="line"><span class="lineno"> 1407</span> </div>
<div class="line"><span class="lineno"> 1408</span>  <span class="comment">// Clear maps whose id is on the second of map pairs.</span></div>
<div class="line"><span class="lineno"> 1409</span> </div>
<div class="line"><span class="lineno"> 1410</span>  std::map&lt;TUINT32, std::string&gt;::iterator it;</div>
<div class="line"><span class="lineno"> 1411</span>  <span class="keywordflow">for</span> (it = m_imp-&gt;m_itemHistory.begin(); it != m_imp-&gt;m_itemHistory.end();) {</div>
<div class="line"><span class="lineno"> 1412</span>    <span class="keywordflow">if</span> (it-&gt;second.size() &gt;= 2 &amp;&amp; it-&gt;second[0] == <span class="charliteral">&#39;$&#39;</span> &amp;&amp; it-&gt;second[1] == <span class="charliteral">&#39;:&#39;</span>)</div>
<div class="line"><span class="lineno"> 1413</span>      ++it;</div>
<div class="line"><span class="lineno"> 1414</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1415</span>      std::map&lt;TUINT32, std::string&gt;::iterator app = it;</div>
<div class="line"><span class="lineno"> 1416</span>      app++;</div>
<div class="line"><span class="lineno"> 1417</span>      m_imp-&gt;m_itemHistory.erase(it);</div>
<div class="line"><span class="lineno"> 1418</span>      it = app;</div>
<div class="line"><span class="lineno"> 1419</span>    }</div>
<div class="line"><span class="lineno"> 1420</span>  }</div>
<div class="line"><span class="lineno"> 1421</span> </div>
<div class="line"><span class="lineno"> 1422</span>  std::map&lt;void *, std::string&gt;::iterator jt;</div>
<div class="line"><span class="lineno"> 1423</span>  <span class="keywordflow">for</span> (jt = m_imp-&gt;m_itemsByImagePointer.begin();</div>
<div class="line"><span class="lineno"> 1424</span>       jt != m_imp-&gt;m_itemsByImagePointer.end();) {</div>
<div class="line"><span class="lineno"> 1425</span>    <span class="keywordflow">if</span> (jt-&gt;second.size() &gt;= 2 &amp;&amp; jt-&gt;second[0] == <span class="charliteral">&#39;$&#39;</span> &amp;&amp; jt-&gt;second[1] == <span class="charliteral">&#39;:&#39;</span>)</div>
<div class="line"><span class="lineno"> 1426</span>      ++jt;</div>
<div class="line"><span class="lineno"> 1427</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1428</span>      std::map&lt;void *, std::string&gt;::iterator app = jt;</div>
<div class="line"><span class="lineno"> 1429</span>      app++;</div>
<div class="line"><span class="lineno"> 1430</span>      m_imp-&gt;m_itemsByImagePointer.erase(jt);</div>
<div class="line"><span class="lineno"> 1431</span>      jt = app;</div>
<div class="line"><span class="lineno"> 1432</span>    }</div>
<div class="line"><span class="lineno"> 1433</span>  }</div>
<div class="line"><span class="lineno"> 1434</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00269">ImageManager::clear()</a>.</p>

</div>
</div>
<a id="a51f6d0d317918c58b109972ce68b3857" name="a51f6d0d317918c58b109972ce68b3857"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51f6d0d317918c58b109972ce68b3857">&#9670;&nbsp;</a></span>compress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TImageCache::compress </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1946</span>{ m_imp-&gt;doCompress(<span class="keywordtype">id</span>); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa2a3c6b224a17c86f63f65ec21dd63d1" name="aa2a3c6b224a17c86f63f65ec21dd63d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2a3c6b224a17c86f63f65ec21dd63d1">&#9670;&nbsp;</a></span>compressAndMalloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UCHAR * TImageCache::compressAndMalloc </td>
          <td>(</td>
          <td class="paramtype">TUINT32&#160;</td>
          <td class="paramname"><em>requestedSize</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1147</span>                                                           {</div>
<div class="line"><span class="lineno"> 1148</span>  <span class="keywordflow">return</span> m_imp-&gt;compressAndMalloc(requestedSize);</div>
<div class="line"><span class="lineno"> 1149</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a515a265a953dbe11d321516835c99ad9" name="a515a265a953dbe11d321516835c99ad9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a515a265a953dbe11d321516835c99ad9">&#9670;&nbsp;</a></span>dump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TImageCache::dump </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1829</span>                                           {</div>
<div class="line"><span class="lineno"> 1830</span>  os &lt;&lt; <span class="stringliteral">&quot;mem: &quot;</span> &lt;&lt; <a class="code hl_function" href="class_t_image_cache.html#aacf232d4ccaa09192a9eabaac4b22f40">getMemUsage</a>() &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 1831</span>  std::map&lt;std::string, CacheItemP&gt;::iterator it =</div>
<div class="line"><span class="lineno"> 1832</span>      m_imp-&gt;m_uncompressedItems.begin();</div>
<div class="line"><span class="lineno"> 1833</span>  <span class="keywordflow">for</span> (; it != m_imp-&gt;m_uncompressedItems.end(); ++it) {</div>
<div class="line"><span class="lineno"> 1834</span>    os &lt;&lt; it-&gt;first &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 1835</span>  }</div>
<div class="line"><span class="lineno"> 1836</span>}</div>
<div class="ttc" id="aclass_t_image_cache_html_aacf232d4ccaa09192a9eabaac4b22f40"><div class="ttname"><a href="class_t_image_cache.html#aacf232d4ccaa09192a9eabaac4b22f40">TImageCache::getMemUsage</a></div><div class="ttdeci">UINT getMemUsage() const</div><div class="ttdoc">Returns the RAM memory size (KB) occupied by the image cache.</div><div class="ttdef"><b>Definition:</b> timagecache.cpp:1772</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a931afcdc1acca8b28bec0c57b3231206" name="a931afcdc1acca8b28bec0c57b3231206"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a931afcdc1acca8b28bec0c57b3231206">&#9670;&nbsp;</a></span>get() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_smart_pointer_t.html">TImageP</a> TImageCache::get </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>toBeModified</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1963</span>                                                                   {</div>
<div class="line"><span class="lineno"> 1964</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="class_t_image_cache.html#aea3ac2752efd6fa9689f5a7c1e895e41">get</a>(<span class="keywordtype">id</span>.toStdString(), toBeModified);</div>
<div class="line"><span class="lineno"> 1965</span>}</div>
<div class="ttc" id="aclass_t_image_cache_html_aea3ac2752efd6fa9689f5a7c1e895e41"><div class="ttname"><a href="class_t_image_cache.html#aea3ac2752efd6fa9689f5a7c1e895e41">TImageCache::get</a></div><div class="ttdeci">TImageP get(const std::string &amp;id, bool toBeModified) const</div><div class="ttdef"><b>Definition:</b> timagecache.cpp:1672</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aea3ac2752efd6fa9689f5a7c1e895e41" name="aea3ac2752efd6fa9689f5a7c1e895e41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea3ac2752efd6fa9689f5a7c1e895e41">&#9670;&nbsp;</a></span>get() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_smart_pointer_t.html">TImageP</a> TImageCache::get </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>toBeModified</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Retrieves the image associated to input <b>id</b>. Returns an empty pointer if no image was found. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1672</span>                                                                     {</div>
<div class="line"><span class="lineno"> 1673</span>  <span class="keywordflow">return</span> m_imp-&gt;get(<span class="keywordtype">id</span>, toBeModified);</div>
<div class="line"><span class="lineno"> 1674</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l01002">SetScanCropboxTool::draw()</a>, <a class="el" href="#l01360">PreviewFxManager::freeze()</a>, <a class="el" href="#l00310">ImageManager::getImage()</a>, <a class="el" href="#l01143">Previewer::getRaster()</a>, <a class="el" href="#l01998">TCachedImage::image()</a>, and <a class="el" href="#l00077">CSTPic&lt; P &gt;::lock()</a>.</p>

</div>
</div>
<a id="a4aa5545031cb8cc3016107bb26d9739e" name="a4aa5545031cb8cc3016107bb26d9739e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4aa5545031cb8cc3016107bb26d9739e">&#9670;&nbsp;</a></span>getDiskUsage() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT TImageCache::getDiskUsage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Returns the swap files size (KB) currently allocated by the image cache. <br  />
 <br  />
 <b></b>{NOTE:} This function is not implemented yet! </p>
<div class="fragment"><div class="line"><span class="lineno"> 1786</span>{ <span class="keywordflow">return</span> 0; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="af6a52551d4b6c4d10183a17cd674b154" name="af6a52551d4b6c4d10183a17cd674b154"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6a52551d4b6c4d10183a17cd674b154">&#9670;&nbsp;</a></span>getDiskUsage() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT TImageCache::getDiskUsage </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1825</span>{ <span class="keywordflow">return</span> 0; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aacf232d4ccaa09192a9eabaac4b22f40" name="aacf232d4ccaa09192a9eabaac4b22f40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacf232d4ccaa09192a9eabaac4b22f40">&#9670;&nbsp;</a></span>getMemUsage() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT TImageCache::getMemUsage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the RAM memory size (KB) occupied by the image cache. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1772</span>                                    {</div>
<div class="line"><span class="lineno"> 1773</span>  TThread::MutexLocker sl(&amp;m_imp-&gt;m_mutex);</div>
<div class="line"><span class="lineno"> 1774</span> </div>
<div class="line"><span class="lineno"> 1775</span>  <span class="keywordtype">int</span> ret = std::accumulate(m_imp-&gt;m_uncompressedItems.begin(),</div>
<div class="line"><span class="lineno"> 1776</span>                            m_imp-&gt;m_uncompressedItems.end(), 0,</div>
<div class="line"><span class="lineno"> 1777</span>                            AccumulateMemUsage());</div>
<div class="line"><span class="lineno"> 1778</span> </div>
<div class="line"><span class="lineno"> 1779</span>  <span class="keywordflow">return</span> ret + std::accumulate(m_imp-&gt;m_compressedItems.begin(),</div>
<div class="line"><span class="lineno"> 1780</span>                               m_imp-&gt;m_compressedItems.end(), 0,</div>
<div class="line"><span class="lineno"> 1781</span>                               AccumulateMemUsage());</div>
<div class="line"><span class="lineno"> 1782</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="acc521ca28f12b9261b10e2a5c5174db1" name="acc521ca28f12b9261b10e2a5c5174db1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc521ca28f12b9261b10e2a5c5174db1">&#9670;&nbsp;</a></span>getMemUsage() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT TImageCache::getMemUsage </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the RAM memory size (KB) of the image associated to passed id. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1790</span>                                                       {</div>
<div class="line"><span class="lineno"> 1791</span>  std::map&lt;std::string, CacheItemP&gt;::iterator it =</div>
<div class="line"><span class="lineno"> 1792</span>      m_imp-&gt;m_uncompressedItems.find(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1793</span>  <span class="keywordflow">if</span> (it != m_imp-&gt;m_uncompressedItems.end()) <span class="keywordflow">return</span> it-&gt;second-&gt;getSize();</div>
<div class="line"><span class="lineno"> 1794</span> </div>
<div class="line"><span class="lineno"> 1795</span>  it = m_imp-&gt;m_compressedItems.find(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1796</span>  <span class="keywordflow">if</span> (it != m_imp-&gt;m_compressedItems.end()) <span class="keywordflow">return</span> it-&gt;second-&gt;getSize();</div>
<div class="line"><span class="lineno"> 1797</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1798</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad339a2d7d4efda3e4c9192f0094cfa2b" name="ad339a2d7d4efda3e4c9192f0094cfa2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad339a2d7d4efda3e4c9192f0094cfa2b">&#9670;&nbsp;</a></span>getSubsampling()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TImageCache::getSubsampling </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>subs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the subsampling level of the image under the specified id. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1592</span>                                                                     {</div>
<div class="line"><span class="lineno"> 1593</span>  TThread::MutexLocker sl(&amp;m_imp-&gt;m_mutex);</div>
<div class="line"><span class="lineno"> 1594</span> </div>
<div class="line"><span class="lineno"> 1595</span>  std::map&lt;std::string, std::string&gt;::iterator it1;</div>
<div class="line"><span class="lineno"> 1596</span>  <span class="keywordflow">if</span> ((it1 = m_imp-&gt;m_duplicatedItems.find(<span class="keywordtype">id</span>)) !=</div>
<div class="line"><span class="lineno"> 1597</span>      m_imp-&gt;m_duplicatedItems.end()) {</div>
<div class="line"><span class="lineno"> 1598</span>    assert(m_imp-&gt;m_duplicatedItems.find(it1-&gt;second) ==</div>
<div class="line"><span class="lineno"> 1599</span>           m_imp-&gt;m_duplicatedItems.end());</div>
<div class="line"><span class="lineno"> 1600</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="class_t_image_cache.html#ad339a2d7d4efda3e4c9192f0094cfa2b">getSubsampling</a>(it1-&gt;second, subs);</div>
<div class="line"><span class="lineno"> 1601</span>  }</div>
<div class="line"><span class="lineno"> 1602</span> </div>
<div class="line"><span class="lineno"> 1603</span>  std::map&lt;std::string, CacheItemP&gt;::iterator it =</div>
<div class="line"><span class="lineno"> 1604</span>      m_imp-&gt;m_uncompressedItems.find(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1605</span>  <span class="keywordflow">if</span> (it != m_imp-&gt;m_uncompressedItems.end()) {</div>
<div class="line"><span class="lineno"> 1606</span>    <a class="code hl_class" href="class_t_derived_smart_pointer_t.html">UncompressedOnMemoryCacheItemP</a> uncompressed = it-&gt;second;</div>
<div class="line"><span class="lineno"> 1607</span>    assert(uncompressed);</div>
<div class="line"><span class="lineno"> 1608</span><span class="preprocessor">#ifndef TNZCORE_LIGHT</span></div>
<div class="line"><span class="lineno"> 1609</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="class_t_toonz_image_p.html">TToonzImageP</a> ti = uncompressed-&gt;getImage()) {</div>
<div class="line"><span class="lineno"> 1610</span>      subs = ti-&gt;getSubsampling();</div>
<div class="line"><span class="lineno"> 1611</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1612</span>    }</div>
<div class="line"><span class="lineno"> 1613</span> </div>
<div class="line"><span class="lineno"> 1614</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1615</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1616</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="class_t_raster_image_p.html">TRasterImageP</a> ri = uncompressed-&gt;getImage()) {</div>
<div class="line"><span class="lineno"> 1617</span>      subs = ri-&gt;getSubsampling();</div>
<div class="line"><span class="lineno"> 1618</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1619</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1620</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1621</span>  }</div>
<div class="line"><span class="lineno"> 1622</span>  std::map&lt;std::string, CacheItemP&gt;::iterator itc =</div>
<div class="line"><span class="lineno"> 1623</span>      m_imp-&gt;m_compressedItems.find(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1624</span>  <span class="keywordflow">if</span> (itc == m_imp-&gt;m_compressedItems.end()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1625</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">CacheItemP</a> cacheItem = itc-&gt;second;</div>
<div class="line"><span class="lineno"> 1626</span>  assert(cacheItem-&gt;m_imageInfo);</div>
<div class="line"><span class="lineno"> 1627</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="class_raster_image_info.html">RasterImageInfo</a> *rimageInfo =</div>
<div class="line"><span class="lineno"> 1628</span>          <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_raster_image_info.html">RasterImageInfo</a> *<span class="keyword">&gt;</span>(cacheItem-&gt;m_imageInfo)) {</div>
<div class="line"><span class="lineno"> 1629</span>    subs = rimageInfo-&gt;m_subs;</div>
<div class="line"><span class="lineno"> 1630</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1631</span>  }</div>
<div class="line"><span class="lineno"> 1632</span><span class="preprocessor">#ifndef TNZCORE_LIGHT</span></div>
<div class="line"><span class="lineno"> 1633</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_class" href="class_toonz_image_info.html">ToonzImageInfo</a> *timageInfo =</div>
<div class="line"><span class="lineno"> 1634</span>               <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_toonz_image_info.html">ToonzImageInfo</a> *<span class="keyword">&gt;</span>(cacheItem-&gt;m_imageInfo)) {</div>
<div class="line"><span class="lineno"> 1635</span>    subs = timageInfo-&gt;m_subs;</div>
<div class="line"><span class="lineno"> 1636</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1637</span>  }</div>
<div class="line"><span class="lineno"> 1638</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1639</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1640</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1641</span>}</div>
<div class="ttc" id="aclass_raster_image_info_html"><div class="ttname"><a href="class_raster_image_info.html">RasterImageInfo</a></div><div class="ttdef"><b>Definition:</b> timagecache.cpp:153</div></div>
<div class="ttc" id="aclass_t_derived_smart_pointer_t_html"><div class="ttname"><a href="class_t_derived_smart_pointer_t.html">TDerivedSmartPointerT</a></div><div class="ttdef"><b>Definition:</b> tsmartpointer.h:170</div></div>
<div class="ttc" id="aclass_t_image_cache_html_ad339a2d7d4efda3e4c9192f0094cfa2b"><div class="ttname"><a href="class_t_image_cache.html#ad339a2d7d4efda3e4c9192f0094cfa2b">TImageCache::getSubsampling</a></div><div class="ttdeci">bool getSubsampling(const std::string &amp;id, int &amp;subs) const</div><div class="ttdoc">Returns the subsampling level of the image under the specified id.</div><div class="ttdef"><b>Definition:</b> timagecache.cpp:1592</div></div>
<div class="ttc" id="aclass_t_raster_image_p_html"><div class="ttname"><a href="class_t_raster_image_p.html">TRasterImageP</a></div><div class="ttdef"><b>Definition:</b> trasterimage.h:148</div></div>
<div class="ttc" id="aclass_t_smart_pointer_t_html"><div class="ttname"><a href="class_t_smart_pointer_t.html">TSmartPointerT</a></div><div class="ttdef"><b>Definition:</b> tsmartpointer.h:105</div></div>
<div class="ttc" id="aclass_t_toonz_image_p_html"><div class="ttname"><a href="class_t_toonz_image_p.html">TToonzImageP</a></div><div class="ttdef"><b>Definition:</b> ttoonzimage.h:126</div></div>
<div class="ttc" id="aclass_toonz_image_info_html"><div class="ttname"><a href="class_toonz_image_info.html">ToonzImageInfo</a></div><div class="ttdef"><b>Definition:</b> timagecache.cpp:197</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01592">getSubsampling()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l01592">getSubsampling()</a>.</p>

</div>
</div>
<a id="a5f6f7327e34bbf60a4aa00ef0718201b" name="a5f6f7327e34bbf60a4aa00ef0718201b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f6f7327e34bbf60a4aa00ef0718201b">&#9670;&nbsp;</a></span>getUncompressedMemUsage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT TImageCache::getUncompressedMemUsage </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Returns the uncompressed image size (in KB) of the image associated with passd id, or 0 if none was found. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1804</span>                                                                   {</div>
<div class="line"><span class="lineno"> 1805</span>  std::map&lt;std::string, CacheItemP&gt;::iterator it =</div>
<div class="line"><span class="lineno"> 1806</span>      m_imp-&gt;m_uncompressedItems.find(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1807</span>  <span class="keywordflow">if</span> (it != m_imp-&gt;m_uncompressedItems.end()) <span class="keywordflow">return</span> it-&gt;second-&gt;getSize();</div>
<div class="line"><span class="lineno"> 1808</span> </div>
<div class="line"><span class="lineno"> 1809</span>  it = m_imp-&gt;m_compressedItems.find(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1810</span>  <span class="keywordflow">if</span> (it != m_imp-&gt;m_compressedItems.end()) <span class="keywordflow">return</span> it-&gt;second-&gt;getSize();</div>
<div class="line"><span class="lineno"> 1811</span> </div>
<div class="line"><span class="lineno"> 1812</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1813</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae4fef5421da2d9a31a25efb27b192706" name="ae4fef5421da2d9a31a25efb27b192706"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4fef5421da2d9a31a25efb27b192706">&#9670;&nbsp;</a></span>getUniqueId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string TImageCache::getUniqueId </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  678</span>                                       {</div>
<div class="line"><span class="lineno">  679</span>  <span class="keyword">static</span> <a class="code hl_class" href="class_t_atomic_var.html">TAtomicVar</a> count;</div>
<div class="line"><span class="lineno">  680</span>  std::stringstream ss;</div>
<div class="line"><span class="lineno">  681</span>  ss &lt;&lt; ++count;</div>
<div class="line"><span class="lineno">  682</span>  <span class="keywordflow">return</span> <span class="stringliteral">&quot;IMAGECACHEUNIQUEID&quot;</span> + ss.str();</div>
<div class="line"><span class="lineno">  683</span>}</div>
<div class="ttc" id="aclass_t_atomic_var_html"><div class="ttname"><a href="class_t_atomic_var.html">TAtomicVar</a></div><div class="ttdef"><b>Definition:</b> tatomicvar.h:18</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aff9cc84974f653e857c54ce9e7fbcd06" name="aff9cc84974f653e857c54ce9e7fbcd06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff9cc84974f653e857c54ce9e7fbcd06">&#9670;&nbsp;</a></span>hasBeenModified()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TImageCache::hasBeenModified </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>reset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1645</span>                                                                       {</div>
<div class="line"><span class="lineno"> 1646</span>  TThread::MutexLocker sl(&amp;m_imp-&gt;m_mutex);</div>
<div class="line"><span class="lineno"> 1647</span> </div>
<div class="line"><span class="lineno"> 1648</span>  std::map&lt;std::string, std::string&gt;::iterator it;</div>
<div class="line"><span class="lineno"> 1649</span>  <span class="keywordflow">if</span> ((it = m_imp-&gt;m_duplicatedItems.find(<span class="keywordtype">id</span>)) !=</div>
<div class="line"><span class="lineno"> 1650</span>      m_imp-&gt;m_duplicatedItems.end()) {</div>
<div class="line"><span class="lineno"> 1651</span>    assert(m_imp-&gt;m_duplicatedItems.find(it-&gt;second) ==</div>
<div class="line"><span class="lineno"> 1652</span>           m_imp-&gt;m_duplicatedItems.end());</div>
<div class="line"><span class="lineno"> 1653</span>    <span class="keywordflow">return</span> hasBeenModified(it-&gt;second, reset);</div>
<div class="line"><span class="lineno"> 1654</span>  }</div>
<div class="line"><span class="lineno"> 1655</span> </div>
<div class="line"><span class="lineno"> 1656</span>  <a class="code hl_class" href="class_t_smart_pointer_t.html">TImageP</a> img;</div>
<div class="line"><span class="lineno"> 1657</span> </div>
<div class="line"><span class="lineno"> 1658</span>  std::map&lt;std::string, CacheItemP&gt;::iterator itu =</div>
<div class="line"><span class="lineno"> 1659</span>      m_imp-&gt;m_uncompressedItems.find(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1660</span>  <span class="keywordflow">if</span> (itu != m_imp-&gt;m_uncompressedItems.end()) {</div>
<div class="line"><span class="lineno"> 1661</span>    <span class="keywordflow">if</span> (reset &amp;&amp; itu-&gt;second-&gt;m_modified) {</div>
<div class="line"><span class="lineno"> 1662</span>      itu-&gt;second-&gt;m_modified = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1663</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1664</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1665</span>      <span class="keywordflow">return</span> itu-&gt;second-&gt;m_modified;</div>
<div class="line"><span class="lineno"> 1666</span>  }</div>
<div class="line"><span class="lineno"> 1667</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// not present in cache==modified (for particle purposes...)</span></div>
<div class="line"><span class="lineno"> 1668</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac2540f2121531b94a532d7c40bcf3c3b" name="ac2540f2121531b94a532d7c40bcf3c3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2540f2121531b94a532d7c40bcf3c3b">&#9670;&nbsp;</a></span>instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_image_cache.html">TImageCache</a> * TImageCache::instance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1065</span>                                   {</div>
<div class="line"><span class="lineno"> 1066</span>  <span class="keywordflow">if</span> (CacheInstance == 0) CacheInstance = <span class="keyword">new</span> <a class="code hl_class" href="class_t_image_cache.html">TImageCache</a>();</div>
<div class="line"><span class="lineno"> 1067</span>  <span class="keywordflow">return</span> CacheInstance;</div>
<div class="line"><span class="lineno"> 1068</span>  <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1069</span><span class="comment">if (!ImageCache::m_instance)</span></div>
<div class="line"><span class="lineno"> 1070</span><span class="comment">{</span></div>
<div class="line"><span class="lineno"> 1071</span><span class="comment">ImageCache::m_instance = new ImageCache;</span></div>
<div class="line"><span class="lineno"> 1072</span><span class="comment">ImageCache::m_destroyer.m_imageCache = ImageCache::m_instance;</span></div>
<div class="line"><span class="lineno"> 1073</span><span class="comment">}</span></div>
<div class="line"><span class="lineno"> 1074</span><span class="comment">return ImageCache::m_instance;</span></div>
<div class="line"><span class="lineno"> 1075</span><span class="comment">  */</span></div>
<div class="line"><span class="lineno"> 1076</span>}</div>
<div class="ttc" id="aclass_t_image_cache_html"><div class="ttname"><a href="class_t_image_cache.html">TImageCache</a></div><div class="ttdef"><b>Definition:</b> timagecache.h:66</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aef5ed676d5379c55c232c75f50ce4d0c" name="aef5ed676d5379c55c232c75f50ce4d0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef5ed676d5379c55c232c75f50ce4d0c">&#9670;&nbsp;</a></span>isCached()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TImageCache::isCached </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Returns true or false whether an image under the passed id is found in the cache. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1438</span>                                                    {</div>
<div class="line"><span class="lineno"> 1439</span>  TThread::MutexLocker sl(&amp;m_imp-&gt;m_mutex);</div>
<div class="line"><span class="lineno"> 1440</span>  <span class="keywordflow">return</span> (m_imp-&gt;m_uncompressedItems.find(<span class="keywordtype">id</span>) !=</div>
<div class="line"><span class="lineno"> 1441</span>              m_imp-&gt;m_uncompressedItems.end() ||</div>
<div class="line"><span class="lineno"> 1442</span>          m_imp-&gt;m_compressedItems.find(<span class="keywordtype">id</span>) != m_imp-&gt;m_compressedItems.end() ||</div>
<div class="line"><span class="lineno"> 1443</span>          m_imp-&gt;m_duplicatedItems.find(<span class="keywordtype">id</span>) != m_imp-&gt;m_duplicatedItems.end());</div>
<div class="line"><span class="lineno"> 1444</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0da071a1466b04f8dc49052102d5e933" name="a0da071a1466b04f8dc49052102d5e933"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0da071a1466b04f8dc49052102d5e933">&#9670;&nbsp;</a></span>isEnabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TImageCache::isEnabled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true or false whether the cache is active or not. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1111</span>                            {</div>
<div class="line"><span class="lineno"> 1112</span><span class="preprocessor">#ifndef TNZCORE_LIGHT</span></div>
<div class="line"><span class="lineno"> 1113</span>  QThreadStorage&lt;bool *&gt; &amp;storage = m_imp-&gt;m_isEnabled;</div>
<div class="line"><span class="lineno"> 1114</span> </div>
<div class="line"><span class="lineno"> 1115</span>  <span class="keywordflow">if</span> (!storage.hasLocalData()) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1116</span>  <span class="keywordflow">return</span> *(storage.localData());</div>
<div class="line"><span class="lineno"> 1117</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1118</span>  <span class="keywordflow">return</span> m_isEnabled;</div>
<div class="line"><span class="lineno"> 1119</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1120</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l01153">add()</a>, <a class="el" href="#l00310">ImageManager::getImage()</a>, and <a class="el" href="#l01095">setEnabled()</a>.</p>

</div>
</div>
<a id="a60d19e45b309c08d6525f1630fc879ee" name="a60d19e45b309c08d6525f1630fc879ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60d19e45b309c08d6525f1630fc879ee">&#9670;&nbsp;</a></span>outputMap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TImageCache::outputMap </td>
          <td>(</td>
          <td class="paramtype">UINT&#160;</td>
          <td class="paramname"><em>chunkRequested</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1840</span>                                                                   {</div>
<div class="line"><span class="lineno"> 1841</span>  m_imp-&gt;outputMap(chunkRequested, filename);</div>
<div class="line"><span class="lineno"> 1842</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4a55f603009d6f1d884f9d1afee94178" name="a4a55f603009d6f1d884f9d1afee94178"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a55f603009d6f1d884f9d1afee94178">&#9670;&nbsp;</a></span>remap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TImageCache::remap </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dstId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>srcId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rebinds the association between a previously cached image and its id. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1317</span>                                                                      {</div>
<div class="line"><span class="lineno"> 1318</span>  m_imp-&gt;remap(dstId, srcId);</div>
<div class="line"><span class="lineno"> 1319</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00237">ImageManager::rebind()</a>, and <a class="el" href="#l02091">TXshSimpleLevel::renumber()</a>.</p>

</div>
</div>
<a id="aae960869d6789a4ec8538601ac4efcf7" name="aae960869d6789a4ec8538601ac4efcf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae960869d6789a4ec8538601ac4efcf7">&#9670;&nbsp;</a></span>remapIcons()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TImageCache::remapIcons </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dstId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>srcId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1357</span>                                                     {</div>
<div class="line"><span class="lineno"> 1358</span>  std::map&lt;std::string, CacheItemP&gt;::iterator it;</div>
<div class="line"><span class="lineno"> 1359</span>  std::map&lt;std::string, std::string&gt; table;</div>
<div class="line"><span class="lineno"> 1360</span>  std::string prefix = srcId + <span class="stringliteral">&quot;:&quot;</span>;</div>
<div class="line"><span class="lineno"> 1361</span>  <span class="keywordtype">int</span> j              = (int)prefix.length();</div>
<div class="line"><span class="lineno"> 1362</span>  <span class="keywordflow">for</span> (it = m_imp-&gt;m_uncompressedItems.begin();</div>
<div class="line"><span class="lineno"> 1363</span>       it != m_imp-&gt;m_uncompressedItems.end(); ++it) {</div>
<div class="line"><span class="lineno"> 1364</span>    std::string <span class="keywordtype">id</span>                      = it-&gt;first;</div>
<div class="line"><span class="lineno"> 1365</span>    <span class="keywordflow">if</span> (<span class="keywordtype">id</span>.find(prefix) == 0) table[<span class="keywordtype">id</span>] = dstId + <span class="stringliteral">&quot;:&quot;</span> + <span class="keywordtype">id</span>.substr(j);</div>
<div class="line"><span class="lineno"> 1366</span>  }</div>
<div class="line"><span class="lineno"> 1367</span>  <span class="keywordflow">for</span> (std::map&lt;std::string, std::string&gt;::iterator it2 = table.begin();</div>
<div class="line"><span class="lineno"> 1368</span>       it2 != table.end(); ++it2) {</div>
<div class="line"><span class="lineno"> 1369</span>    <a class="code hl_function" href="class_t_image_cache.html#a4a55f603009d6f1d884f9d1afee94178">remap</a>(it2-&gt;second, it2-&gt;first);</div>
<div class="line"><span class="lineno"> 1370</span>  }</div>
<div class="line"><span class="lineno"> 1371</span>}</div>
<div class="ttc" id="aclass_t_image_cache_html_a4a55f603009d6f1d884f9d1afee94178"><div class="ttname"><a href="class_t_image_cache.html#a4a55f603009d6f1d884f9d1afee94178">TImageCache::remap</a></div><div class="ttdeci">void remap(const std::string &amp;dstId, const std::string &amp;srcId)</div><div class="ttdoc">Rebinds the association between a previously cached image and its id.</div><div class="ttdef"><b>Definition:</b> timagecache.cpp:1317</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af23322c9d0ea7231a9d06fc2ddf8f314" name="af23322c9d0ea7231a9d06fc2ddf8f314"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af23322c9d0ea7231a9d06fc2ddf8f314">&#9670;&nbsp;</a></span>remove() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TImageCache::remove </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1959</span>{ m_imp-&gt;remove(<span class="keywordtype">id</span>.toStdString()); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a57d63227dfe2532b0aed22c47113be66" name="a57d63227dfe2532b0aed22c47113be66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57d63227dfe2532b0aed22c47113be66">&#9670;&nbsp;</a></span>remove() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TImageCache::remove </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes from the image cache the image associated to passed id. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1260</span>{ m_imp-&gt;remove(<span class="keywordtype">id</span>); }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00198">ImageManager::bind()</a>, <a class="el" href="#l00624">TCacheResource::clear()</a>, <a class="el" href="#l00426">ImageManager::invalidate()</a>, <a class="el" href="#l00113">OnRenderCompleted::onDeliver()</a>, <a class="el" href="#l01119">TRop::releaseRaster46()</a>, <a class="el" href="#l00385">PreviewFxInstance::reset()</a>, <a class="el" href="#l00214">ImageManager::unbind()</a>, and <a class="el" href="#l00031">TXshChildLevel::~TXshChildLevel()</a>.</p>

</div>
</div>
<a id="a6a55bc58e3f97d4ec6f3782b5acb704c" name="a6a55bc58e3f97d4ec6f3782b5acb704c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a55bc58e3f97d4ec6f3782b5acb704c">&#9670;&nbsp;</a></span>setEnabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TImageCache::setEnabled </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Enables or disables the image cache on current thread. When the cache is disabled, images can't be added to the cache. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1095</span>                                           {</div>
<div class="line"><span class="lineno"> 1096</span><span class="preprocessor">#ifndef TNZCORE_LIGHT</span></div>
<div class="line"><span class="lineno"> 1097</span>  QThreadStorage&lt;bool *&gt; &amp;storage = m_imp-&gt;m_isEnabled;</div>
<div class="line"><span class="lineno"> 1098</span> </div>
<div class="line"><span class="lineno"> 1099</span>  <span class="keywordflow">if</span> (storage.hasLocalData() &amp;&amp; *(storage.localData()) == <a class="code hl_function" href="class_t_image_cache.html#a0da071a1466b04f8dc49052102d5e933">isEnabled</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1100</span>  <span class="keywordflow">if</span> (!storage.hasLocalData())</div>
<div class="line"><span class="lineno"> 1101</span>    storage.setLocalData(<span class="keyword">new</span> <span class="keywordtype">bool</span>(<a class="code hl_function" href="class_t_image_cache.html#a0da071a1466b04f8dc49052102d5e933">isEnabled</a>));</div>
<div class="line"><span class="lineno"> 1102</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1103</span>    *(storage.localData()) = <a class="code hl_function" href="class_t_image_cache.html#a0da071a1466b04f8dc49052102d5e933">isEnabled</a>;</div>
<div class="line"><span class="lineno"> 1104</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1105</span>  m_imp-&gt;m_isEnabled = <a class="code hl_function" href="class_t_image_cache.html#a0da071a1466b04f8dc49052102d5e933">isEnabled</a>;</div>
<div class="line"><span class="lineno"> 1106</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1107</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01111">isEnabled()</a>.</p>

</div>
</div>
<a id="ac40a531e42468563fa695fac90d1e257" name="ac40a531e42468563fa695fac90d1e257"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac40a531e42468563fa695fac90d1e257">&#9670;&nbsp;</a></span>setRootDir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TImageCache::setRootDir </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Sets the hard disk swap directory. It is set by default in the \it{stuff\cache} folder. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1124</span>                                                      {</div>
<div class="line"><span class="lineno"> 1125</span>  <span class="keywordflow">if</span> (m_imp-&gt;m_rootDir != <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1126</span> </div>
<div class="line"><span class="lineno"> 1127</span>  m_imp-&gt;m_rootDir =</div>
<div class="line"><span class="lineno"> 1128</span>      cacheDir + <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(std::to_string(TSystem::getProcessId()));</div>
<div class="line"><span class="lineno"> 1129</span> </div>
<div class="line"><span class="lineno"> 1130</span><span class="preprocessor">#ifndef TNZCORE_LIGHT</span></div>
<div class="line"><span class="lineno"> 1131</span>  <a class="code hl_class" href="class_t_file_status.html">TFileStatus</a> fs1(m_imp-&gt;m_rootDir);</div>
<div class="line"><span class="lineno"> 1132</span> </div>
<div class="line"><span class="lineno"> 1133</span>  <span class="keywordflow">if</span> (!fs1.doesExist()) TSystem::mkDir(m_imp-&gt;m_rootDir);</div>
<div class="line"><span class="lineno"> 1134</span> </div>
<div class="line"><span class="lineno"> 1135</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1136</span>}</div>
<div class="ttc" id="aclass_t_file_status_html"><div class="ttname"><a href="class_t_file_status.html">TFileStatus</a></div><div class="ttdef"><b>Definition:</b> tsystem.h:36</div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>E:/opentoonz/toonz/sources/include/<a class="el" href="">timagecache.h</a></li>
<li>E:/opentoonz/toonz/sources/common/tcache/<a class="el" href="">timagecache.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
