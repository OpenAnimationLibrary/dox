<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: tipc::Stream Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacetipc.html">tipc</a></li><li class="navelem"><a class="el" href="classtipc_1_1_stream.html">Stream</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classtipc_1_1_stream-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">tipc::Stream Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="">tipc.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for tipc::Stream:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classtipc_1_1_stream.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad2beb9a4dd18549636560e40915f6ce0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtipc_1_1_stream.html#ad2beb9a4dd18549636560e40915f6ce0">Stream</a> (QLocalSocket *socket)</td></tr>
<tr class="separator:ad2beb9a4dd18549636560e40915f6ce0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad11fe09471ab9b7b3c829261530bd8eb"><td class="memItemLeft" align="right" valign="top">QLocalSocket *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtipc_1_1_stream.html#ad11fe09471ab9b7b3c829261530bd8eb">socket</a> ()</td></tr>
<tr class="separator:ad11fe09471ab9b7b3c829261530bd8eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a319d5b124ba1047d6ee40ac5a79dc03d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtipc_1_1_stream.html#a319d5b124ba1047d6ee40ac5a79dc03d">readSize</a> ()</td></tr>
<tr class="separator:a319d5b124ba1047d6ee40ac5a79dc03d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3be3f22c133dc28889f7334362e92b6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtipc_1_1_stream.html#ac3be3f22c133dc28889f7334362e92b6">messageReady</a> ()</td></tr>
<tr class="separator:ac3be3f22c133dc28889f7334362e92b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a293967e64b2b626d70c838ee52f863d1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtipc_1_1_stream.html#a293967e64b2b626d70c838ee52f863d1">readData</a> (char *data, qint64 dataSize, int msecs=-1)</td></tr>
<tr class="separator:a293967e64b2b626d70c838ee52f863d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcecdfe5a227fa2e64f4fd4d3bb7886b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtipc_1_1_stream.html#adcecdfe5a227fa2e64f4fd4d3bb7886b">readMessage</a> (<a class="el" href="classtipc_1_1_message.html">Message</a> &amp;msg, int msecs=-1)</td></tr>
<tr class="separator:adcecdfe5a227fa2e64f4fd4d3bb7886b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9530b0eaa53131ac2f8a6d9753434889"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtipc_1_1_stream.html#a9530b0eaa53131ac2f8a6d9753434889">readDataNB</a> (char *data, qint64 dataSize, int msecs=-1, QEventLoop::ProcessEventsFlag flag=QEventLoop::AllEvents)</td></tr>
<tr class="separator:a9530b0eaa53131ac2f8a6d9753434889"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4217859111bd3dab6811bebb10915e4d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtipc_1_1_stream.html#a4217859111bd3dab6811bebb10915e4d">readMessageNB</a> (<a class="el" href="classtipc_1_1_message.html">Message</a> &amp;msg, int msecs=-1, QEventLoop::ProcessEventsFlag flag=QEventLoop::AllEvents)</td></tr>
<tr class="separator:a4217859111bd3dab6811bebb10915e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0da21c97a71a36b3e3238d7c7621a75"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtipc_1_1_stream.html#ae0da21c97a71a36b3e3238d7c7621a75">flush</a> (int msecs=-1)</td></tr>
<tr class="separator:ae0da21c97a71a36b3e3238d7c7621a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >A <a class="el" href="classtipc_1_1_stream.html">tipc::Stream</a> is a specialized QDataStream designed to work with a tipc-based QLocalSocket instance. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad2beb9a4dd18549636560e40915f6ce0" name="ad2beb9a4dd18549636560e40915f6ce0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2beb9a4dd18549636560e40915f6ce0">&#9670;&nbsp;</a></span>Stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tipc::Stream::Stream </td>
          <td>(</td>
          <td class="paramtype">QLocalSocket *&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  129</span>: QDataStream(socket), m_socket(socket) {}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae0da21c97a71a36b3e3238d7c7621a75" name="ae0da21c97a71a36b3e3238d7c7621a75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0da21c97a71a36b3e3238d7c7621a75">&#9670;&nbsp;</a></span>flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tipc::Stream::flush </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>msecs</em> = <code>-1</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Flushes all data written to the stream. This function waits until all data written on the stream has been successfully delivered in output. Returns true if the operation was successful, false if it timed out or an error occurred. </p>
<div class="fragment"><div class="line"><span class="lineno">  206</span>                                {</div>
<div class="line"><span class="lineno">  207</span>  tipc_debug(qDebug(<span class="stringliteral">&quot;tipc:flush entry&quot;</span>));</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>  <span class="keywordflow">while</span> (m_socket-&gt;bytesToWrite() &gt; 0) {</div>
<div class="line"><span class="lineno">  210</span>    tipc_debug(qDebug() &lt;&lt; <span class="stringliteral">&quot;bytes to write:&quot;</span> &lt;&lt; m_socket-&gt;bytesToWrite());</div>
<div class="line"><span class="lineno">  211</span>    <span class="keywordtype">bool</span> ok = m_socket-&gt;flush();</div>
<div class="line"><span class="lineno">  212</span>    tipc_debug(qDebug() &lt;&lt; <span class="stringliteral">&quot;flush success:&quot;</span> &lt;&lt; ok</div>
<div class="line"><span class="lineno">  213</span>                        &lt;&lt; <span class="stringliteral">&quot;bytes to write:&quot;</span> &lt;&lt; m_socket-&gt;bytesToWrite());</div>
<div class="line"><span class="lineno">  214</span>    <span class="keywordflow">if</span> (m_socket-&gt;bytesToWrite() &gt; 0 &amp;&amp; !m_socket-&gt;waitForBytesWritten(msecs))</div>
<div class="line"><span class="lineno">  215</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  216</span>  }</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>  tipc_debug(qDebug() &lt;&lt; <span class="stringliteral">&quot;tipc:flush exit - bytes to write:&quot;</span></div>
<div class="line"><span class="lineno">  219</span>                      &lt;&lt; m_socket-&gt;bytesToWrite());</div>
<div class="line"><span class="lineno">  220</span>  <span class="keywordflow">return</span> (m_socket-&gt;bytesToWrite() == 0);</div>
<div class="line"><span class="lineno">  221</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00422">tipc::readMessage()</a>, and <a class="el" href="#l00682">tipc::readShMemBuffer()</a>.</p>

</div>
</div>
<a id="ac3be3f22c133dc28889f7334362e92b6" name="ac3be3f22c133dc28889f7334362e92b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3be3f22c133dc28889f7334362e92b6">&#9670;&nbsp;</a></span>messageReady()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tipc::Stream::messageReady </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   95</span>                              {</div>
<div class="line"><span class="lineno">   96</span>  TINT32 msgSize;</div>
<div class="line"><span class="lineno">   97</span>  <span class="keywordflow">return</span> (msgSize = readSize()) &gt;= 0 &amp;&amp; m_socket-&gt;bytesAvailable() &gt;= msgSize;</div>
<div class="line"><span class="lineno">   98</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a293967e64b2b626d70c838ee52f863d1" name="a293967e64b2b626d70c838ee52f863d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a293967e64b2b626d70c838ee52f863d1">&#9670;&nbsp;</a></span>readData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tipc::Stream::readData </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qint64&#160;</td>
          <td class="paramname"><em>dataSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>msecs</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  102</span>                                                                {</div>
<div class="line"><span class="lineno">  103</span>  tipc_debug(qDebug(<span class="stringliteral">&quot;tipc::Stream::readData entry&quot;</span>));</div>
<div class="line"><span class="lineno">  104</span>  qint64 r, dataRead = 0;</div>
<div class="line"><span class="lineno">  105</span>  <span class="keywordtype">char</span> *currData = data;</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>  <span class="keywordflow">while</span> (dataRead &lt; dataSize) {</div>
<div class="line"><span class="lineno">  108</span>    <span class="keywordflow">if</span> ((m_socket-&gt;bytesAvailable() == 0) &amp;&amp;</div>
<div class="line"><span class="lineno">  109</span>        !m_socket-&gt;waitForReadyRead(msecs)) {</div>
<div class="line"><span class="lineno">  110</span>      tipc_debug(</div>
<div class="line"><span class="lineno">  111</span>          qDebug(<span class="stringliteral">&quot;tipc::Stream::readData exit (unexpected loss of data)&quot;</span>));</div>
<div class="line"><span class="lineno">  112</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  113</span>    }</div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span>    <span class="comment">// Read the supplied data</span></div>
<div class="line"><span class="lineno">  116</span>    currData += r = m_socket-&gt;read(currData, dataSize - dataRead);</div>
<div class="line"><span class="lineno">  117</span>    dataRead += r;</div>
<div class="line"><span class="lineno">  118</span>  }</div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  120</span>  tipc_debug(qDebug(<span class="stringliteral">&quot;tipc::Stream::readData exit&quot;</span>));</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  123</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9530b0eaa53131ac2f8a6d9753434889" name="a9530b0eaa53131ac2f8a6d9753434889"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9530b0eaa53131ac2f8a6d9753434889">&#9670;&nbsp;</a></span>readDataNB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tipc::Stream::readDataNB </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qint64&#160;</td>
          <td class="paramname"><em>dataSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>msecs</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QEventLoop::ProcessEventsFlag&#160;</td>
          <td class="paramname"><em>flag</em> = <code>QEventLoop::AllEvents</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  128</span>                                                                {</div>
<div class="line"><span class="lineno">  129</span>  tipc_debug(qDebug(<span class="stringliteral">&quot;tipc::Stream::readDataNB entry&quot;</span>));</div>
<div class="line"><span class="lineno">  130</span>  qint64 r, dataRead = 0;</div>
<div class="line"><span class="lineno">  131</span>  <span class="keywordtype">char</span> *currData = data;</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>  QEventLoop loop;</div>
<div class="line"><span class="lineno">  134</span>  QObject::connect(m_socket, SIGNAL(readyRead()), &amp;loop, SLOT(quit()));</div>
<div class="line"><span class="lineno">  135</span>  QObject::connect(m_socket, SIGNAL(error(QLocalSocket::LocalSocketError)),</div>
<div class="line"><span class="lineno">  136</span>                   &amp;loop, SLOT(quit()));</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>  <span class="keywordflow">if</span> (msecs &gt;= 0) QTimer::singleShot(msecs, &amp;loop, SLOT(quit()));</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>  <span class="keywordflow">while</span> (dataRead &lt; dataSize) {</div>
<div class="line"><span class="lineno">  141</span>    <span class="keywordflow">if</span> (m_socket-&gt;bytesAvailable() == 0) {</div>
<div class="line"><span class="lineno">  142</span>      loop.exec(flag);</div>
<div class="line"><span class="lineno">  143</span>      <span class="keywordflow">if</span> (m_socket-&gt;bytesAvailable() == 0) {</div>
<div class="line"><span class="lineno">  144</span>        tipc_debug(</div>
<div class="line"><span class="lineno">  145</span>            qDebug(<span class="stringliteral">&quot;tipc::Stream::readDataNB exit (unexpected loss of data)&quot;</span>));</div>
<div class="line"><span class="lineno">  146</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  147</span>      }</div>
<div class="line"><span class="lineno">  148</span>    }</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>    <span class="comment">// Read the supplied data</span></div>
<div class="line"><span class="lineno">  151</span>    currData += r = m_socket-&gt;read(currData, dataSize - dataRead);</div>
<div class="line"><span class="lineno">  152</span>    dataRead += r;</div>
<div class="line"><span class="lineno">  153</span>  }</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>  tipc_debug(qDebug(<span class="stringliteral">&quot;tipc::Stream::readDataNB exit&quot;</span>));</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  158</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="adcecdfe5a227fa2e64f4fd4d3bb7886b" name="adcecdfe5a227fa2e64f4fd4d3bb7886b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcecdfe5a227fa2e64f4fd4d3bb7886b">&#9670;&nbsp;</a></span>readMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tipc::Stream::readMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtipc_1_1_message.html">Message</a> &amp;&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>msecs</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Reads the message and returns its header. This function reads a complete message from the socket, waiting until it is completely available. The function accepts an inactivity timeout which can be supplied to drop the operation after msecs milliseconds no data has been received. </p>
<div class="fragment"><div class="line"><span class="lineno">  169</span>                                                    {</div>
<div class="line"><span class="lineno">  170</span>  TINT32 msgSize = 0;</div>
<div class="line"><span class="lineno">  171</span>  <span class="keywordflow">if</span> (!readData((<span class="keywordtype">char</span> *)&amp;msgSize, <span class="keyword">sizeof</span>(TINT32), msecs)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  172</span> </div>
<div class="line"><span class="lineno">  173</span>  msg.ba().resize(msgSize);</div>
<div class="line"><span class="lineno">  174</span>  <span class="keywordflow">if</span> (!readData(msg.ba().data(), msgSize, msecs)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  177</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00422">tipc::readMessage()</a>.</p>

</div>
</div>
<a id="a4217859111bd3dab6811bebb10915e4d" name="a4217859111bd3dab6811bebb10915e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4217859111bd3dab6811bebb10915e4d">&#9670;&nbsp;</a></span>readMessageNB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tipc::Stream::readMessageNB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtipc_1_1_message.html">Message</a> &amp;&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>msecs</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QEventLoop::ProcessEventsFlag&#160;</td>
          <td class="paramname"><em>flag</em> = <code>QEventLoop::AllEvents</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >The non-blocking equivalent to <a class="el" href="classtipc_1_1_stream.html#adcecdfe5a227fa2e64f4fd4d3bb7886b">readMessage()</a>, this function performs event processing in a local event loop until all message data has been received. </p>
<div class="fragment"><div class="line"><span class="lineno">  187</span>                                                                   {</div>
<div class="line"><span class="lineno">  188</span>  TINT32 msgSize = 0;</div>
<div class="line"><span class="lineno">  189</span>  <span class="keywordflow">if</span> (!readDataNB((<span class="keywordtype">char</span> *)&amp;msgSize, <span class="keyword">sizeof</span>(TINT32), msecs, flag)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>  msg.ba().resize(msgSize);</div>
<div class="line"><span class="lineno">  192</span>  <span class="keywordflow">if</span> (!readDataNB(msg.ba().data(), msgSize, msecs, flag)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  195</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00437">tipc::readMessageNB()</a>.</p>

</div>
</div>
<a id="a319d5b124ba1047d6ee40ac5a79dc03d" name="a319d5b124ba1047d6ee40ac5a79dc03d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a319d5b124ba1047d6ee40ac5a79dc03d">&#9670;&nbsp;</a></span>readSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tipc::Stream::readSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   84</span>                         {</div>
<div class="line"><span class="lineno">   85</span>  <span class="keywordflow">if</span> (m_socket-&gt;bytesAvailable() &lt; <span class="keyword">sizeof</span>(TINT32)) <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>  TINT32 msgSize = -1;</div>
<div class="line"><span class="lineno">   88</span>  m_socket-&gt;peek((<span class="keywordtype">char</span> *)&amp;msgSize, <span class="keyword">sizeof</span>(TINT32));</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>  <span class="keywordflow">return</span> msgSize;</div>
<div class="line"><span class="lineno">   91</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad11fe09471ab9b7b3c829261530bd8eb" name="ad11fe09471ab9b7b3c829261530bd8eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad11fe09471ab9b7b3c829261530bd8eb">&#9670;&nbsp;</a></span>socket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QLocalSocket * tipc::Stream::socket </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  131</span>{ <span class="keywordflow">return</span> m_socket; }</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>E:/opentoonz/toonz/sources/include/<a class="el" href="">tipc.h</a></li>
<li>E:/opentoonz/toonz/sources/common/tipc/<a class="el" href="">tipc.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
