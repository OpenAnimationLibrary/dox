<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: XsheetGUI::CellArea Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>XsheetGUI</b></li><li class="navelem"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html">CellArea</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-slots">Protected Slots</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="class_xsheet_g_u_i_1_1_cell_area-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">XsheetGUI::CellArea Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>La classe si occupa della visualizzazione delle celle nel viewer.  
 <a href="class_xsheet_g_u_i_1_1_cell_area.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="">xshcellviewer.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for XsheetGUI::CellArea:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_xsheet_g_u_i_1_1_cell_area.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa5c433545c3feb53a0f234d29f1e2563"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#aa5c433545c3feb53a0f234d29f1e2563">CellArea</a> (<a class="el" href="class_xsheet_viewer.html">XsheetViewer</a> *parent, Qt::WFlags flags=0)</td></tr>
<tr class="separator:aa5c433545c3feb53a0f234d29f1e2563"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a908ae0a77b45e3907291d2be953148c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#a908ae0a77b45e3907291d2be953148c7">mouseMoveEvent</a> (QMouseEvent *event) override</td></tr>
<tr class="separator:a908ae0a77b45e3907291d2be953148c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27a66d5adde4142ac1c1b946342adb1b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#a27a66d5adde4142ac1c1b946342adb1b">onControlPressed</a> (bool pressed)</td></tr>
<tr class="separator:a27a66d5adde4142ac1c1b946342adb1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d5a29e2eb78b3411537780b5f113e23"><td class="memItemLeft" align="right" valign="top">const bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#a0d5a29e2eb78b3411537780b5f113e23">isControlPressed</a> ()</td></tr>
<tr class="separator:a0d5a29e2eb78b3411537780b5f113e23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14d74627e18efdae69a063cbce304039"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#a14d74627e18efdae69a063cbce304039">showRenameField</a> (int row, int col, bool multiColumnSelected=false)</td></tr>
<tr class="separator:a14d74627e18efdae69a063cbce304039"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f68217b6b4aa82a3a316b30dfda8247"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#a2f68217b6b4aa82a3a316b30dfda8247">hideRenameField</a> ()</td></tr>
<tr class="separator:a2f68217b6b4aa82a3a316b30dfda8247"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-slots" name="pro-slots"></a>
Protected Slots</h2></td></tr>
<tr class="memitem:ad52301a3b7e523ce4a6a62ea342165c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#ad52301a3b7e523ce4a6a62ea342165c8">openNote</a> ()</td></tr>
<tr class="separator:ad52301a3b7e523ce4a6a62ea342165c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b573be58a3e38d1dd1418d22f2f6046"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#a5b573be58a3e38d1dd1418d22f2f6046">deleteNote</a> ()</td></tr>
<tr class="separator:a5b573be58a3e38d1dd1418d22f2f6046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dd399c0ad4dca36c4c66c6f8031bb30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#a9dd399c0ad4dca36c4c66c6f8031bb30">onStepChanged</a> (QAction *)</td></tr>
<tr class="separator:a9dd399c0ad4dca36c4c66c6f8031bb30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8834bc87ebb88a6662b380587295f785"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#a8834bc87ebb88a6662b380587295f785">onReplaceByCastedLevel</a> (QAction *action)</td></tr>
<tr class="separator:a8834bc87ebb88a6662b380587295f785"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1075cc38246704488fc056df58e3e864"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#a1075cc38246704488fc056df58e3e864">onSetCellMark</a> ()</td></tr>
<tr class="separator:a1075cc38246704488fc056df58e3e864"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ae299ad0140bc908b93a99b062edf769c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#ae299ad0140bc908b93a99b062edf769c">paintEvent</a> (QPaintEvent *) override</td></tr>
<tr class="separator:ae299ad0140bc908b93a99b062edf769c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae025276e19351e2b2430720383ba1518"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#ae025276e19351e2b2430720383ba1518">mousePressEvent</a> (QMouseEvent *event) override</td></tr>
<tr class="separator:ae025276e19351e2b2430720383ba1518"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0f5b71c06e8170b16c1d33c5e288855"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#aa0f5b71c06e8170b16c1d33c5e288855">mouseReleaseEvent</a> (QMouseEvent *event) override</td></tr>
<tr class="separator:aa0f5b71c06e8170b16c1d33c5e288855"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90ddb8058286d19ca83ee0c05b67b06b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#a90ddb8058286d19ca83ee0c05b67b06b">mouseDoubleClickEvent</a> (QMouseEvent *event) override</td></tr>
<tr class="separator:a90ddb8058286d19ca83ee0c05b67b06b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad52503d710a0c28f77802345a378153f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#ad52503d710a0c28f77802345a378153f">contextMenuEvent</a> (QContextMenuEvent *event) override</td></tr>
<tr class="separator:ad52503d710a0c28f77802345a378153f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c382fbf8b9f30b6163c4abdb20284a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#a2c382fbf8b9f30b6163c4abdb20284a6">dragEnterEvent</a> (QDragEnterEvent *event) override</td></tr>
<tr class="separator:a2c382fbf8b9f30b6163c4abdb20284a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a199b99c41f49c666c03c2c2a8e38a07a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#a199b99c41f49c666c03c2c2a8e38a07a">dragLeaveEvent</a> (QDragLeaveEvent *event) override</td></tr>
<tr class="separator:a199b99c41f49c666c03c2c2a8e38a07a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd78e6d1f1050115fa21ba98160b672d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#abd78e6d1f1050115fa21ba98160b672d">dragMoveEvent</a> (QDragMoveEvent *event) override</td></tr>
<tr class="separator:abd78e6d1f1050115fa21ba98160b672d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3701a194f3309e7b632d5263d6e6cc5b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#a3701a194f3309e7b632d5263d6e6cc5b">dropEvent</a> (QDropEvent *event) override</td></tr>
<tr class="separator:a3701a194f3309e7b632d5263d6e6cc5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae40f89d46182a628b14e956c13357887"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#ae40f89d46182a628b14e956c13357887">event</a> (QEvent *event) override</td></tr>
<tr class="separator:ae40f89d46182a628b14e956c13357887"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a776b5b465ce6a03fc010a13fccb24a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#a5a776b5b465ce6a03fc010a13fccb24a">createCellMenu</a> (QMenu &amp;menu, bool isCellSelected, <a class="el" href="class_t_xsh_cell.html">TXshCell</a> cell, int row, int col)</td></tr>
<tr class="separator:a5a776b5b465ce6a03fc010a13fccb24a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f983304012306e204a4aba11514bfd5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#a4f983304012306e204a4aba11514bfd5">createKeyMenu</a> (QMenu &amp;menu)</td></tr>
<tr class="separator:a4f983304012306e204a4aba11514bfd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32990a254fbeec3d3a8f0f826adacce9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#a32990a254fbeec3d3a8f0f826adacce9">createKeyLineMenu</a> (QMenu &amp;menu, int row, int col)</td></tr>
<tr class="separator:a32990a254fbeec3d3a8f0f826adacce9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4db067a47b699d3b285eed81d4d1dd15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xsheet_g_u_i_1_1_cell_area.html#a4db067a47b699d3b285eed81d4d1dd15">createNoteMenu</a> (QMenu &amp;menu)</td></tr>
<tr class="memdesc:a4db067a47b699d3b285eed81d4d1dd15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Crea il menu' del tasto destro che si visualizza quando si sopra una nota.  <a href="class_xsheet_g_u_i_1_1_cell_area.html#a4db067a47b699d3b285eed81d4d1dd15">More...</a><br /></td></tr>
<tr class="separator:a4db067a47b699d3b285eed81d4d1dd15"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >La classe si occupa della visualizzazione delle celle nel viewer. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa5c433545c3feb53a0f234d29f1e2563" name="aa5c433545c3feb53a0f234d29f1e2563"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5c433545c3feb53a0f234d29f1e2563">&#9670;&nbsp;</a></span>CellArea()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">XsheetGUI::CellArea::CellArea </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_xsheet_viewer.html">XsheetViewer</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Qt::WFlags&#160;</td>
          <td class="paramname"><em>flags</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1124</span>    : QWidget(parent, flags)</div>
<div class="line"><span class="lineno"> 1125</span>    , m_viewer(parent)</div>
<div class="line"><span class="lineno"> 1126</span>    , m_levelExtenderRect()</div>
<div class="line"><span class="lineno"> 1127</span>    , m_soundLevelModifyRects()</div>
<div class="line"><span class="lineno"> 1128</span>    , m_isPanning(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno"> 1129</span>    , m_isMousePressed(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno"> 1130</span>    , m_pos(-1, -1)</div>
<div class="line"><span class="lineno"> 1131</span>    , m_tooltip(tr(<span class="stringliteral">&quot;&quot;</span>))</div>
<div class="line"><span class="lineno"> 1132</span>    , m_renameCell(<span class="keyword">new</span> RenameCellField(<span class="keyword">this</span>, m_viewer)) {</div>
<div class="line"><span class="lineno"> 1133</span>  setAcceptDrops(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1134</span>  setMouseTracking(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1135</span>  m_renameCell-&gt;hide();</div>
<div class="line"><span class="lineno"> 1136</span>  setFocusPolicy(Qt::NoFocus);</div>
<div class="line"><span class="lineno"> 1137</span>  setObjectName(<span class="stringliteral">&quot;XsheetCellArea&quot;</span>);</div>
<div class="line"><span class="lineno"> 1138</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2f2e2f6f13ca062fdff1beb03d82db0b" name="a2f2e2f6f13ca062fdff1beb03d82db0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f2e2f6f13ca062fdff1beb03d82db0b">&#9670;&nbsp;</a></span>~CellArea()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">XsheetGUI::CellArea::~CellArea </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1142</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad52503d710a0c28f77802345a378153f" name="ad52503d710a0c28f77802345a378153f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad52503d710a0c28f77802345a378153f">&#9670;&nbsp;</a></span>contextMenuEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::contextMenuEvent </td>
          <td>(</td>
          <td class="paramtype">QContextMenuEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3579</span>                                                        {</div>
<div class="line"><span class="lineno"> 3580</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_orientation.html">Orientation</a> *o = m_viewer-&gt;orientation();</div>
<div class="line"><span class="lineno"> 3581</span>  <a class="code hl_class" href="class_t_point_t.html">TPoint</a> pos(event-&gt;pos().x(), event-&gt;pos().y());</div>
<div class="line"><span class="lineno"> 3582</span>  <a class="code hl_class" href="class_cell_position.html">CellPosition</a> cellPosition = m_viewer-&gt;xyToPosition(event-&gt;pos());</div>
<div class="line"><span class="lineno"> 3583</span>  <span class="keywordtype">int</span> row                   = cellPosition.frame();</div>
<div class="line"><span class="lineno"> 3584</span>  <span class="keywordtype">int</span> col                   = cellPosition.layer();</div>
<div class="line"><span class="lineno"> 3585</span>  <a class="code hl_class" href="class_t_xsh_cell.html">TXshCell</a> cell             = m_viewer-&gt;getXsheet()-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(row, col);</div>
<div class="line"><span class="lineno"> 3586</span> </div>
<div class="line"><span class="lineno"> 3587</span>  QMenu menu(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 3588</span> </div>
<div class="line"><span class="lineno"> 3589</span>  <span class="comment">// Verifico se ho cliccato su una nota</span></div>
<div class="line"><span class="lineno"> 3590</span>  <a class="code hl_class" href="class_t_xsh_note_set.html">TXshNoteSet</a> *notes = m_viewer-&gt;getXsheet()-&gt;getNotes();</div>
<div class="line"><span class="lineno"> 3591</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno"> 3592</span>  <span class="keywordflow">for</span> (i = notes-&gt;getCount() - 1; i &gt;= 0; i--) {</div>
<div class="line"><span class="lineno"> 3593</span>    <span class="keywordtype">int</span> r       = notes-&gt;getNoteRow(i);</div>
<div class="line"><span class="lineno"> 3594</span>    <span class="keywordtype">int</span> c       = notes-&gt;getNoteCol(i);</div>
<div class="line"><span class="lineno"> 3595</span>    QPoint xy   = m_viewer-&gt;positionToXY(<a class="code hl_class" href="class_cell_position.html">CellPosition</a>(r, c));</div>
<div class="line"><span class="lineno"> 3596</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> pos = notes-&gt;getNotePos(i) + <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(xy.x(), xy.y());</div>
<div class="line"><span class="lineno"> 3597</span>    QRect rect  = o-&gt;rect(PredefinedRect::NOTE_ICON).translated(pos.x, pos.y);</div>
<div class="line"><span class="lineno"> 3598</span>    <span class="keywordflow">if</span> (!rect.contains(event-&gt;pos())) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3599</span>    m_viewer-&gt;setCurrentNoteIndex(i);</div>
<div class="line"><span class="lineno"> 3600</span>    <a class="code hl_function" href="class_xsheet_g_u_i_1_1_cell_area.html#a4db067a47b699d3b285eed81d4d1dd15">createNoteMenu</a>(menu);</div>
<div class="line"><span class="lineno"> 3601</span>    <span class="keywordflow">if</span> (!menu.isEmpty()) menu.exec(event-&gt;globalPos());</div>
<div class="line"><span class="lineno"> 3602</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3603</span>  }</div>
<div class="line"><span class="lineno"> 3604</span> </div>
<div class="line"><span class="lineno"> 3605</span>  <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh         = m_viewer-&gt;getXsheet();</div>
<div class="line"><span class="lineno"> 3606</span>  <span class="keywordtype">int</span> x0               = m_viewer-&gt;positionToXY(cellPosition).x();</div>
<div class="line"><span class="lineno"> 3607</span>  <span class="keywordtype">int</span> x                = pos.x - x0;</div>
<div class="line"><span class="lineno"> 3608</span>  <a class="code hl_class" href="class_t_stage_object.html">TStageObject</a> *pegbar = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">getStageObject</a>(m_viewer-&gt;<a class="code hl_function" href="class_xsheet_viewer.html#acef259f8c33344981f8c218590bca5d9">getObjectId</a>(col));</div>
<div class="line"><span class="lineno"> 3609</span>  <span class="keywordtype">int</span> k0, k1;</div>
<div class="line"><span class="lineno"> 3610</span>  <span class="keywordtype">int</span> r0, r1, c0, c1;</div>
<div class="line"><span class="lineno"> 3611</span>  m_viewer-&gt;getCellSelection()-&gt;getSelectedCells(r0, c0, r1, c1);</div>
<div class="line"><span class="lineno"> 3612</span> </div>
<div class="line"><span class="lineno"> 3613</span>  QPoint cellTopLeft = m_viewer-&gt;positionToXY(<a class="code hl_class" href="class_cell_position.html">CellPosition</a>(row, col));</div>
<div class="line"><span class="lineno"> 3614</span>  QPoint mouseInCell = <span class="keyword">event</span>-&gt;pos() - cellTopLeft;</div>
<div class="line"><span class="lineno"> 3615</span>  <span class="keywordtype">bool</span> isKeyframeFrame =</div>
<div class="line"><span class="lineno"> 3616</span>      Preferences::instance()-&gt;isShowKeyframesOnXsheetCellAreaEnabled() &amp;&amp;</div>
<div class="line"><span class="lineno"> 3617</span>      pegbar &amp;&amp; pegbar-&gt;getKeyframeRange(k0, k1) &amp;&amp; k0 &lt;= row &amp;&amp; row &lt;= k1 + 1;</div>
<div class="line"><span class="lineno"> 3618</span> </div>
<div class="line"><span class="lineno"> 3619</span>  <span class="keywordflow">if</span> (isKeyframeFrame &amp;&amp; isKeyFrameArea(col, row, mouseInCell)) {</div>
<div class="line"><span class="lineno"> 3620</span>    <a class="code hl_class" href="class_t_stage_object_id.html">TStageObjectId</a> objectId;</div>
<div class="line"><span class="lineno"> 3621</span>    <span class="keywordflow">if</span> (col &lt; 0)</div>
<div class="line"><span class="lineno"> 3622</span>      objectId = TStageObjectId::CameraId(xsh-&gt;getCameraColumnIndex());</div>
<div class="line"><span class="lineno"> 3623</span>    <span class="keywordflow">else</span> {  <span class="comment">// Set the current column and the current object</span></div>
<div class="line"><span class="lineno"> 3624</span>      objectId = TStageObjectId::ColumnId(col);</div>
<div class="line"><span class="lineno"> 3625</span>      m_viewer-&gt;setCurrentColumn(col);</div>
<div class="line"><span class="lineno"> 3626</span>    }</div>
<div class="line"><span class="lineno"> 3627</span>    <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a0d91c122eec2b756b7c4780014e49f9e">getCurrentObject</a>()-&gt;setObjectId(objectId);</div>
<div class="line"><span class="lineno"> 3628</span>    m_viewer-&gt;setCurrentRow(row);</div>
<div class="line"><span class="lineno"> 3629</span>    <span class="keywordflow">if</span> (pegbar-&gt;<a class="code hl_function" href="class_t_stage_object.html#af2c8c37f71b2b2e2c2a15c6eb73b8b38">isKeyframe</a>(row)) {  <span class="comment">// clicking on keyframes</span></div>
<div class="line"><span class="lineno"> 3630</span>      <a class="code hl_class" href="class_t_keyframe_selection.html">TKeyframeSelection</a> *keyframeSelection = m_viewer-&gt;getKeyframeSelection();</div>
<div class="line"><span class="lineno"> 3631</span>      keyframeSelection-&gt;select(row, col);</div>
<div class="line"><span class="lineno"> 3632</span>      keyframeSelection-&gt;makeCurrent();</div>
<div class="line"><span class="lineno"> 3633</span>      <a class="code hl_function" href="class_xsheet_g_u_i_1_1_cell_area.html#a4f983304012306e204a4aba11514bfd5">createKeyMenu</a>(menu);</div>
<div class="line"><span class="lineno"> 3634</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">getColumn</a>(col) ||</div>
<div class="line"><span class="lineno"> 3635</span>               !xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">getColumn</a>(col)</div>
<div class="line"><span class="lineno"> 3636</span>                    -&gt;<a class="code hl_function" href="class_t_xsh_column.html#a04953896aae8860ace46010956a28db9">isLocked</a>())  <span class="comment">// on the line between two keyframes</span></div>
<div class="line"><span class="lineno"> 3637</span>      <a class="code hl_function" href="class_xsheet_g_u_i_1_1_cell_area.html#a32990a254fbeec3d3a8f0f826adacce9">createKeyLineMenu</a>(menu, row, col);</div>
<div class="line"><span class="lineno"> 3638</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_viewer-&gt;getCellSelection()-&gt;isCellSelected(</div>
<div class="line"><span class="lineno"> 3639</span>                 row, col) &amp;&amp;  <span class="comment">// La cella e&#39; selezionata</span></div>
<div class="line"><span class="lineno"> 3640</span>             (abs(r1 - r0) &gt; 0 ||</div>
<div class="line"><span class="lineno"> 3641</span>              abs(c1 - c0) &gt;</div>
<div class="line"><span class="lineno"> 3642</span>                  0))  <span class="comment">// Il numero di celle selezionate e&#39; maggiore di 1</span></div>
<div class="line"><span class="lineno"> 3643</span>  {                    <span class="comment">// Sono su una selezione di celle</span></div>
<div class="line"><span class="lineno"> 3644</span>    m_viewer-&gt;setCurrentColumn(col);</div>
<div class="line"><span class="lineno"> 3645</span>    <span class="keywordtype">int</span> e, f;</div>
<div class="line"><span class="lineno"> 3646</span>    <span class="keywordtype">bool</span> areCellsEmpty = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3647</span>    <span class="keywordflow">for</span> (e = r0; e &lt;= r1; e++) {</div>
<div class="line"><span class="lineno"> 3648</span>      <span class="keywordflow">for</span> (f = c0; f &lt;= c1; f++)</div>
<div class="line"><span class="lineno"> 3649</span>        <span class="keywordflow">if</span> (!xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(e, f).<a class="code hl_function" href="class_t_xsh_cell.html#a5d20229e7bcd19957b123959e58a833e">isEmpty</a>()) {</div>
<div class="line"><span class="lineno"> 3650</span>          areCellsEmpty = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3651</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 3652</span>        }</div>
<div class="line"><span class="lineno"> 3653</span>      <span class="keywordflow">if</span> (areCellsEmpty) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 3654</span>    }</div>
<div class="line"><span class="lineno"> 3655</span>    <a class="code hl_function" href="class_xsheet_g_u_i_1_1_cell_area.html#a5a776b5b465ce6a03fc010a13fccb24a">createCellMenu</a>(menu, areCellsEmpty, cell, row, col);</div>
<div class="line"><span class="lineno"> 3656</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3657</span>    m_viewer-&gt;getCellSelection()-&gt;makeCurrent();</div>
<div class="line"><span class="lineno"> 3658</span>    m_viewer-&gt;getCellSelection()-&gt;selectCell(row, col);</div>
<div class="line"><span class="lineno"> 3659</span>    m_viewer-&gt;setCurrentColumn(col);</div>
<div class="line"><span class="lineno"> 3660</span> </div>
<div class="line"><span class="lineno"> 3661</span>    <a class="code hl_function" href="class_xsheet_g_u_i_1_1_cell_area.html#a5a776b5b465ce6a03fc010a13fccb24a">createCellMenu</a>(menu, !cell.<a class="code hl_function" href="class_t_xsh_cell.html#a5d20229e7bcd19957b123959e58a833e">isEmpty</a>(), cell, row, col);</div>
<div class="line"><span class="lineno"> 3662</span>  }</div>
<div class="line"><span class="lineno"> 3663</span> </div>
<div class="line"><span class="lineno"> 3664</span>  <span class="keywordflow">if</span> (!menu.isEmpty()) menu.exec(event-&gt;globalPos());</div>
<div class="line"><span class="lineno"> 3665</span>}</div>
<div class="ttc" id="aclass_cell_position_html"><div class="ttname"><a href="class_cell_position.html">CellPosition</a></div><div class="ttdef"><b>Definition:</b> cellposition.h:9</div></div>
<div class="ttc" id="aclass_orientation_html"><div class="ttname"><a href="class_orientation.html">Orientation</a></div><div class="ttdef"><b>Definition:</b> orientation.h:208</div></div>
<div class="ttc" id="aclass_t_app_html_a0d91c122eec2b756b7c4780014e49f9e"><div class="ttname"><a href="class_t_app.html#a0d91c122eec2b756b7c4780014e49f9e">TApp::getCurrentObject</a></div><div class="ttdeci">TObjectHandle * getCurrentObject() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:130</div></div>
<div class="ttc" id="aclass_t_app_html_a24088f8647d5d9447fcec6b9b9bbf9eb"><div class="ttname"><a href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a></div><div class="ttdeci">static TApp * instance()</div><div class="ttdef"><b>Definition:</b> tapp.cpp:215</div></div>
<div class="ttc" id="aclass_t_keyframe_selection_html"><div class="ttname"><a href="class_t_keyframe_selection.html">TKeyframeSelection</a></div><div class="ttdef"><b>Definition:</b> keyframeselection.h:13</div></div>
<div class="ttc" id="aclass_t_point_t_html"><div class="ttname"><a href="class_t_point_t.html">TPointT&lt; int &gt;</a></div></div>
<div class="ttc" id="aclass_t_stage_object_html"><div class="ttname"><a href="class_t_stage_object.html">TStageObject</a></div><div class="ttdef"><b>Definition:</b> tstageobject.h:95</div></div>
<div class="ttc" id="aclass_t_stage_object_html_af2c8c37f71b2b2e2c2a15c6eb73b8b38"><div class="ttname"><a href="class_t_stage_object.html#af2c8c37f71b2b2e2c2a15c6eb73b8b38">TStageObject::isKeyframe</a></div><div class="ttdeci">bool isKeyframe(int frame) const</div><div class="ttdoc">Returns true if frame is a keyframe.</div><div class="ttdef"><b>Definition:</b> tstageobject.cpp:807</div></div>
<div class="ttc" id="aclass_t_stage_object_id_html"><div class="ttname"><a href="class_t_stage_object_id.html">TStageObjectId</a></div><div class="ttdef"><b>Definition:</b> tstageobjectid.h:36</div></div>
<div class="ttc" id="aclass_t_xsh_cell_html"><div class="ttname"><a href="class_t_xsh_cell.html">TXshCell</a></div><div class="ttdef"><b>Definition:</b> txshcell.h:35</div></div>
<div class="ttc" id="aclass_t_xsh_cell_html_a5d20229e7bcd19957b123959e58a833e"><div class="ttname"><a href="class_t_xsh_cell.html#a5d20229e7bcd19957b123959e58a833e">TXshCell::isEmpty</a></div><div class="ttdeci">bool isEmpty() const</div><div class="ttdef"><b>Definition:</b> txshcell.h:78</div></div>
<div class="ttc" id="aclass_t_xsh_column_html_a04953896aae8860ace46010956a28db9"><div class="ttname"><a href="class_t_xsh_column.html#a04953896aae8860ace46010956a28db9">TXshColumn::isLocked</a></div><div class="ttdeci">bool isLocked() const</div><div class="ttdef"><b>Definition:</b> txshcolumn.cpp:657</div></div>
<div class="ttc" id="aclass_t_xsh_note_set_html"><div class="ttname"><a href="class_t_xsh_note_set.html">TXshNoteSet</a></div><div class="ttdef"><b>Definition:</b> txshnoteset.h:28</div></div>
<div class="ttc" id="aclass_t_xsheet_html"><div class="ttname"><a href="class_t_xsheet.html">TXsheet</a></div><div class="ttdef"><b>Definition:</b> txsheet.h:132</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a13d9b9c08ca8dde39769f5644e046ee5"><div class="ttname"><a href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">TXsheet::getStageObject</a></div><div class="ttdeci">TStageObject * getStageObject(const TStageObjectId &amp;id) const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:542</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a1ae81edf03bc7527176c84478c350f57"><div class="ttname"><a href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">TXsheet::getCell</a></div><div class="ttdeci">const TXshCell &amp; getCell(int row, int col) const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:233</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a3e1a216c019a0ebdf73d95acac95d8d0"><div class="ttname"><a href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">TXsheet::getColumn</a></div><div class="ttdeci">TXshColumn * getColumn(int index) const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:1418</div></div>
<div class="ttc" id="aclass_xsheet_g_u_i_1_1_cell_area_html_a32990a254fbeec3d3a8f0f826adacce9"><div class="ttname"><a href="class_xsheet_g_u_i_1_1_cell_area.html#a32990a254fbeec3d3a8f0f826adacce9">XsheetGUI::CellArea::createKeyLineMenu</a></div><div class="ttdeci">void createKeyLineMenu(QMenu &amp;menu, int row, int col)</div><div class="ttdef"><b>Definition:</b> xshcellviewer.cpp:4073</div></div>
<div class="ttc" id="aclass_xsheet_g_u_i_1_1_cell_area_html_a4db067a47b699d3b285eed81d4d1dd15"><div class="ttname"><a href="class_xsheet_g_u_i_1_1_cell_area.html#a4db067a47b699d3b285eed81d4d1dd15">XsheetGUI::CellArea::createNoteMenu</a></div><div class="ttdeci">void createNoteMenu(QMenu &amp;menu)</div><div class="ttdoc">Crea il menu' del tasto destro che si visualizza quando si sopra una nota.</div><div class="ttdef"><b>Definition:</b> xshcellviewer.cpp:4145</div></div>
<div class="ttc" id="aclass_xsheet_g_u_i_1_1_cell_area_html_a4f983304012306e204a4aba11514bfd5"><div class="ttname"><a href="class_xsheet_g_u_i_1_1_cell_area.html#a4f983304012306e204a4aba11514bfd5">XsheetGUI::CellArea::createKeyMenu</a></div><div class="ttdeci">void createKeyMenu(QMenu &amp;menu)</div><div class="ttdef"><b>Definition:</b> xshcellviewer.cpp:4047</div></div>
<div class="ttc" id="aclass_xsheet_g_u_i_1_1_cell_area_html_a5a776b5b465ce6a03fc010a13fccb24a"><div class="ttname"><a href="class_xsheet_g_u_i_1_1_cell_area.html#a5a776b5b465ce6a03fc010a13fccb24a">XsheetGUI::CellArea::createCellMenu</a></div><div class="ttdeci">void createCellMenu(QMenu &amp;menu, bool isCellSelected, TXshCell cell, int row, int col)</div><div class="ttdef"><b>Definition:</b> xshcellviewer.cpp:3750</div></div>
<div class="ttc" id="aclass_xsheet_viewer_html_acef259f8c33344981f8c218590bca5d9"><div class="ttname"><a href="class_xsheet_viewer.html#acef259f8c33344981f8c218590bca5d9">XsheetViewer::getObjectId</a></div><div class="ttdeci">TStageObjectId getObjectId(int col) const</div><div class="ttdoc">Restituisce la objectId corrispondente alla colonna col.</div><div class="ttdef"><b>Definition:</b> xsheetviewer.cpp:501</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5a776b5b465ce6a03fc010a13fccb24a" name="a5a776b5b465ce6a03fc010a13fccb24a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a776b5b465ce6a03fc010a13fccb24a">&#9670;&nbsp;</a></span>createCellMenu()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::createCellMenu </td>
          <td>(</td>
          <td class="paramtype">QMenu &amp;&#160;</td>
          <td class="paramname"><em>menu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isCellSelected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_xsh_cell.html">TXshCell</a>&#160;</td>
          <td class="paramname"><em>cell</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>col</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Crea il menu' del tasto destro che si visualizza quando si clicca sulla cella, distinguendo i due casi: cella piena, cella vuota. </p>
<div class="fragment"><div class="line"><span class="lineno"> 3751</span>                                                {</div>
<div class="line"><span class="lineno"> 3752</span>  <a class="code hl_class" href="class_command_manager.html">CommandManager</a> *cmdManager = CommandManager::instance();</div>
<div class="line"><span class="lineno"> 3753</span> </div>
<div class="line"><span class="lineno"> 3754</span>  <span class="keywordtype">bool</span> soundCellsSelected     = m_viewer-&gt;<a class="code hl_function" href="class_xsheet_viewer.html#a268e48f8420c2b83bc15f73733527d42">areSoundCellsSelected</a>();</div>
<div class="line"><span class="lineno"> 3755</span>  <span class="keywordtype">bool</span> soundTextCellsSelected = m_viewer-&gt;areSoundTextCellsSelected();</div>
<div class="line"><span class="lineno"> 3756</span>  <span class="keywordtype">bool</span> cameraCellsSelected    = m_viewer-&gt;areCameraCellsSelected();</div>
<div class="line"><span class="lineno"> 3757</span> </div>
<div class="line"><span class="lineno"> 3758</span>  menu.addSeparator();</div>
<div class="line"><span class="lineno"> 3759</span> </div>
<div class="line"><span class="lineno"> 3760</span>  <span class="keywordflow">if</span> (!soundCellsSelected) {</div>
<div class="line"><span class="lineno"> 3761</span>    menu.addAction(cmdManager-&gt;getAction(MI_LoadLevel));</div>
<div class="line"><span class="lineno"> 3762</span>    menu.addAction(cmdManager-&gt;getAction(MI_NewLevel));</div>
<div class="line"><span class="lineno"> 3763</span>    menu.addSeparator();</div>
<div class="line"><span class="lineno"> 3764</span>  }</div>
<div class="line"><span class="lineno"> 3765</span> </div>
<div class="line"><span class="lineno"> 3766</span>  <span class="keywordflow">if</span> (isCellSelected) {</div>
<div class="line"><span class="lineno"> 3767</span>    <span class="keywordtype">bool</span> addSeparator = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3768</span>    <span class="comment">// open fx settings instead of level settings when clicked on zerary fx</span></div>
<div class="line"><span class="lineno"> 3769</span>    <span class="comment">// level</span></div>
<div class="line"><span class="lineno"> 3770</span>    <span class="keywordflow">if</span> (cell.m_level &amp;&amp; cell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a903cb5c2c50f8f34fdda2b89ecdece7f">getZeraryFxLevel</a>()) {</div>
<div class="line"><span class="lineno"> 3771</span>      menu.addAction(cmdManager-&gt;getAction(MI_FxParamEditor));</div>
<div class="line"><span class="lineno"> 3772</span>      addSeparator = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3773</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!soundTextCellsSelected) {</div>
<div class="line"><span class="lineno"> 3774</span>      menu.addAction(cmdManager-&gt;getAction(MI_LevelSettings));</div>
<div class="line"><span class="lineno"> 3775</span>      addSeparator = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3776</span>    }</div>
<div class="line"><span class="lineno"> 3777</span>    <span class="keywordflow">if</span> (addSeparator) menu.addSeparator();</div>
<div class="line"><span class="lineno"> 3778</span> </div>
<div class="line"><span class="lineno"> 3779</span>    <span class="keywordflow">if</span> (!soundCellsSelected) {</div>
<div class="line"><span class="lineno"> 3780</span>      QMenu *reframeSubMenu = <span class="keyword">new</span> QMenu(tr(<span class="stringliteral">&quot;Reframe&quot;</span>), <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 3781</span>      {</div>
<div class="line"><span class="lineno"> 3782</span>        reframeSubMenu-&gt;addAction(cmdManager-&gt;getAction(MI_Reframe1));</div>
<div class="line"><span class="lineno"> 3783</span>        reframeSubMenu-&gt;addAction(cmdManager-&gt;getAction(MI_Reframe2));</div>
<div class="line"><span class="lineno"> 3784</span>        reframeSubMenu-&gt;addAction(cmdManager-&gt;getAction(MI_Reframe3));</div>
<div class="line"><span class="lineno"> 3785</span>        reframeSubMenu-&gt;addAction(cmdManager-&gt;getAction(MI_Reframe4));</div>
<div class="line"><span class="lineno"> 3786</span>        reframeSubMenu-&gt;addAction(</div>
<div class="line"><span class="lineno"> 3787</span>            cmdManager-&gt;getAction(MI_ReframeWithEmptyInbetweens));</div>
<div class="line"><span class="lineno"> 3788</span>      }</div>
<div class="line"><span class="lineno"> 3789</span>      menu.addMenu(reframeSubMenu);</div>
<div class="line"><span class="lineno"> 3790</span> </div>
<div class="line"><span class="lineno"> 3791</span>      QMenu *stepSubMenu = <span class="keyword">new</span> QMenu(tr(<span class="stringliteral">&quot;Step&quot;</span>), <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 3792</span>      {</div>
<div class="line"><span class="lineno"> 3793</span>        stepSubMenu-&gt;addAction(cmdManager-&gt;getAction(MI_Step2));</div>
<div class="line"><span class="lineno"> 3794</span>        stepSubMenu-&gt;addAction(cmdManager-&gt;getAction(MI_Step3));</div>
<div class="line"><span class="lineno"> 3795</span>        stepSubMenu-&gt;addAction(cmdManager-&gt;getAction(MI_Step4));</div>
<div class="line"><span class="lineno"> 3796</span>        stepSubMenu-&gt;addAction(cmdManager-&gt;getAction(MI_ResetStep));</div>
<div class="line"><span class="lineno"> 3797</span>        stepSubMenu-&gt;addAction(cmdManager-&gt;getAction(MI_IncreaseStep));</div>
<div class="line"><span class="lineno"> 3798</span>        stepSubMenu-&gt;addAction(cmdManager-&gt;getAction(MI_DecreaseStep));</div>
<div class="line"><span class="lineno"> 3799</span>      }</div>
<div class="line"><span class="lineno"> 3800</span>      menu.addMenu(stepSubMenu);</div>
<div class="line"><span class="lineno"> 3801</span>      QMenu *eachSubMenu = <span class="keyword">new</span> QMenu(tr(<span class="stringliteral">&quot;Each&quot;</span>), <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 3802</span>      {</div>
<div class="line"><span class="lineno"> 3803</span>        eachSubMenu-&gt;addAction(cmdManager-&gt;getAction(MI_Each2));</div>
<div class="line"><span class="lineno"> 3804</span>        eachSubMenu-&gt;addAction(cmdManager-&gt;getAction(MI_Each3));</div>
<div class="line"><span class="lineno"> 3805</span>        eachSubMenu-&gt;addAction(cmdManager-&gt;getAction(MI_Each4));</div>
<div class="line"><span class="lineno"> 3806</span>      }</div>
<div class="line"><span class="lineno"> 3807</span>      menu.addMenu(eachSubMenu);</div>
<div class="line"><span class="lineno"> 3808</span> </div>
<div class="line"><span class="lineno"> 3809</span>      <span class="keywordflow">if</span> (!soundTextCellsSelected) {</div>
<div class="line"><span class="lineno"> 3810</span>        QMenu *editCellNumbersMenu = <span class="keyword">new</span> QMenu(tr(<span class="stringliteral">&quot;Edit Cell Numbers&quot;</span>), <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 3811</span>        {</div>
<div class="line"><span class="lineno"> 3812</span>          editCellNumbersMenu-&gt;addAction(cmdManager-&gt;getAction(MI_Reverse));</div>
<div class="line"><span class="lineno"> 3813</span>          editCellNumbersMenu-&gt;addAction(cmdManager-&gt;getAction(MI_Swing));</div>
<div class="line"><span class="lineno"> 3814</span>          editCellNumbersMenu-&gt;addAction(cmdManager-&gt;getAction(MI_Random));</div>
<div class="line"><span class="lineno"> 3815</span>          editCellNumbersMenu-&gt;addAction(cmdManager-&gt;getAction(MI_Dup));</div>
<div class="line"><span class="lineno"> 3816</span>          editCellNumbersMenu-&gt;addAction(cmdManager-&gt;getAction(MI_Rollup));</div>
<div class="line"><span class="lineno"> 3817</span>          editCellNumbersMenu-&gt;addAction(cmdManager-&gt;getAction(MI_Rolldown));</div>
<div class="line"><span class="lineno"> 3818</span>          editCellNumbersMenu-&gt;addAction(cmdManager-&gt;getAction(MI_TimeStretch));</div>
<div class="line"><span class="lineno"> 3819</span>          editCellNumbersMenu-&gt;addAction(</div>
<div class="line"><span class="lineno"> 3820</span>              cmdManager-&gt;getAction(MI_AutoInputCellNumber));</div>
<div class="line"><span class="lineno"> 3821</span>        }</div>
<div class="line"><span class="lineno"> 3822</span>        menu.addMenu(editCellNumbersMenu);</div>
<div class="line"><span class="lineno"> 3823</span>      }</div>
<div class="line"><span class="lineno"> 3824</span>      menu.addAction(cmdManager-&gt;getAction(MI_FillEmptyCell));</div>
<div class="line"><span class="lineno"> 3825</span> </div>
<div class="line"><span class="lineno"> 3826</span>      menu.addSeparator();</div>
<div class="line"><span class="lineno"> 3827</span> </div>
<div class="line"><span class="lineno"> 3828</span>      <span class="keywordflow">if</span> (!soundTextCellsSelected)</div>
<div class="line"><span class="lineno"> 3829</span>        menu.addAction(cmdManager-&gt;getAction(MI_Autorenumber));</div>
<div class="line"><span class="lineno"> 3830</span>    }</div>
<div class="line"><span class="lineno"> 3831</span> </div>
<div class="line"><span class="lineno"> 3832</span>    <span class="keywordflow">if</span> (!soundTextCellsSelected) {</div>
<div class="line"><span class="lineno"> 3833</span>      QMenu *replaceLevelMenu = <span class="keyword">new</span> QMenu(tr(<span class="stringliteral">&quot;Replace Level&quot;</span>), <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 3834</span>      menu.addMenu(replaceLevelMenu);</div>
<div class="line"><span class="lineno"> 3835</span> </div>
<div class="line"><span class="lineno"> 3836</span>      replaceLevelMenu-&gt;addAction(cmdManager-&gt;getAction(MI_ReplaceLevel));</div>
<div class="line"><span class="lineno"> 3837</span> </div>
<div class="line"><span class="lineno"> 3838</span>      replaceLevelMenu-&gt;addAction(</div>
<div class="line"><span class="lineno"> 3839</span>          cmdManager-&gt;getAction(MI_ReplaceParentDirectory));</div>
<div class="line"><span class="lineno"> 3840</span> </div>
<div class="line"><span class="lineno"> 3841</span>      {</div>
<div class="line"><span class="lineno"> 3842</span>        <span class="comment">// replace with another level in scene cast</span></div>
<div class="line"><span class="lineno"> 3843</span>        std::vector&lt;TXshLevel *&gt; levels;</div>
<div class="line"><span class="lineno"> 3844</span>        <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()</div>
<div class="line"><span class="lineno"> 3845</span>            -&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()</div>
<div class="line"><span class="lineno"> 3846</span>            -&gt;getScene()</div>
<div class="line"><span class="lineno"> 3847</span>            -&gt;<a class="code hl_function" href="class_toonz_scene.html#ac1a8bf0d2cec4f59c87b0001991264b5">getLevelSet</a>()</div>
<div class="line"><span class="lineno"> 3848</span>            -&gt;listLevels(levels);</div>
<div class="line"><span class="lineno"> 3849</span>        <span class="keywordflow">if</span> (!levels.empty()) {</div>
<div class="line"><span class="lineno"> 3850</span>          QMenu *replaceMenu = replaceLevelMenu-&gt;addMenu(tr(<span class="stringliteral">&quot;Replace with&quot;</span>));</div>
<div class="line"><span class="lineno"> 3851</span>          connect(replaceMenu, SIGNAL(triggered(QAction *)), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 3852</span>                  SLOT(<a class="code hl_slot" href="class_xsheet_g_u_i_1_1_cell_area.html#a8834bc87ebb88a6662b380587295f785">onReplaceByCastedLevel</a>(QAction *)));</div>
<div class="line"><span class="lineno"> 3853</span>          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; (int)levels.size(); i++) {</div>
<div class="line"><span class="lineno"> 3854</span>            <span class="keywordflow">if</span> (!levels[i]-&gt;getSimpleLevel() &amp;&amp; !levels[i]-&gt;getChildLevel())</div>
<div class="line"><span class="lineno"> 3855</span>              <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3856</span> </div>
<div class="line"><span class="lineno"> 3857</span>            <span class="keywordflow">if</span> (levels[i]-&gt;getChildLevel() &amp;&amp;</div>
<div class="line"><span class="lineno"> 3858</span>                !<a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()-&gt;getXsheet()-&gt;<a class="code hl_function" href="class_t_xsheet.html#a2fbaf0d4ff704a20a333f605609c64a1">isLevelUsed</a>(</div>
<div class="line"><span class="lineno"> 3859</span>                    levels[i]))</div>
<div class="line"><span class="lineno"> 3860</span>              <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3861</span> </div>
<div class="line"><span class="lineno"> 3862</span>            QString tmpLevelName =</div>
<div class="line"><span class="lineno"> 3863</span>                QString::fromStdWString(levels[i]-&gt;getName());</div>
<div class="line"><span class="lineno"> 3864</span>            QAction *tmpAction = <span class="keyword">new</span> QAction(tmpLevelName, replaceMenu);</div>
<div class="line"><span class="lineno"> 3865</span>            tmpAction-&gt;setData(tmpLevelName);</div>
<div class="line"><span class="lineno"> 3866</span>            replaceMenu-&gt;addAction(tmpAction);</div>
<div class="line"><span class="lineno"> 3867</span>          }</div>
<div class="line"><span class="lineno"> 3868</span>        }</div>
<div class="line"><span class="lineno"> 3869</span>      }</div>
<div class="line"><span class="lineno"> 3870</span> </div>
<div class="line"><span class="lineno"> 3871</span>      <span class="keywordflow">if</span> (!soundCellsSelected &amp;&amp; !soundTextCellsSelected) {</div>
<div class="line"><span class="lineno"> 3872</span>        <span class="keywordflow">if</span> (selectionContainTlvImage(m_viewer-&gt;getCellSelection(),</div>
<div class="line"><span class="lineno"> 3873</span>                                     m_viewer-&gt;getXsheet()))</div>
<div class="line"><span class="lineno"> 3874</span>          replaceLevelMenu-&gt;addAction(</div>
<div class="line"><span class="lineno"> 3875</span>              cmdManager-&gt;getAction(MI_RevertToCleanedUp));</div>
<div class="line"><span class="lineno"> 3876</span>        <span class="keywordflow">if</span> (selectionContainLevelImage(m_viewer-&gt;getCellSelection(),</div>
<div class="line"><span class="lineno"> 3877</span>                                       m_viewer-&gt;getXsheet()))</div>
<div class="line"><span class="lineno"> 3878</span>          replaceLevelMenu-&gt;addAction(</div>
<div class="line"><span class="lineno"> 3879</span>              cmdManager-&gt;getAction(MI_RevertToLastSaved));</div>
<div class="line"><span class="lineno"> 3880</span>        menu.addAction(cmdManager-&gt;getAction(MI_SetKeyframes));</div>
<div class="line"><span class="lineno"> 3881</span>        menu.addAction(cmdManager-&gt;getAction(MI_ShiftKeyframesDown));</div>
<div class="line"><span class="lineno"> 3882</span>        menu.addAction(cmdManager-&gt;getAction(MI_ShiftKeyframesUp));</div>
<div class="line"><span class="lineno"> 3883</span>      }</div>
<div class="line"><span class="lineno"> 3884</span>      menu.addSeparator();</div>
<div class="line"><span class="lineno"> 3885</span>    }</div>
<div class="line"><span class="lineno"> 3886</span> </div>
<div class="line"><span class="lineno"> 3887</span>    menu.addAction(cmdManager-&gt;getAction(MI_Cut));</div>
<div class="line"><span class="lineno"> 3888</span>    menu.addAction(cmdManager-&gt;getAction(MI_Copy));</div>
<div class="line"><span class="lineno"> 3889</span>    menu.addAction(cmdManager-&gt;getAction(MI_Paste));</div>
<div class="line"><span class="lineno"> 3890</span> </div>
<div class="line"><span class="lineno"> 3891</span>    QMenu *pasteSpecialMenu = <span class="keyword">new</span> QMenu(tr(<span class="stringliteral">&quot;Paste Special&quot;</span>), <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 3892</span>    {</div>
<div class="line"><span class="lineno"> 3893</span>      pasteSpecialMenu-&gt;addAction(cmdManager-&gt;getAction(MI_PasteInto));</div>
<div class="line"><span class="lineno"> 3894</span>      pasteSpecialMenu-&gt;addAction(cmdManager-&gt;getAction(MI_PasteNumbers));</div>
<div class="line"><span class="lineno"> 3895</span>      <span class="keywordflow">if</span> (!soundTextCellsSelected) {</div>
<div class="line"><span class="lineno"> 3896</span>        pasteSpecialMenu-&gt;addAction(cmdManager-&gt;getAction(MI_PasteDuplicate));</div>
<div class="line"><span class="lineno"> 3897</span>      }</div>
<div class="line"><span class="lineno"> 3898</span>    }</div>
<div class="line"><span class="lineno"> 3899</span>    menu.addMenu(pasteSpecialMenu);</div>
<div class="line"><span class="lineno"> 3900</span> </div>
<div class="line"><span class="lineno"> 3901</span>    menu.addAction(cmdManager-&gt;getAction(MI_Clear));</div>
<div class="line"><span class="lineno"> 3902</span>    menu.addAction(cmdManager-&gt;getAction(MI_Insert));</div>
<div class="line"><span class="lineno"> 3903</span>    <span class="keywordflow">if</span> (!soundTextCellsSelected) {</div>
<div class="line"><span class="lineno"> 3904</span>      menu.addAction(cmdManager-&gt;getAction(MI_CreateBlankDrawing));</div>
<div class="line"><span class="lineno"> 3905</span>      menu.addAction(cmdManager-&gt;getAction(MI_Duplicate));</div>
<div class="line"><span class="lineno"> 3906</span>    }</div>
<div class="line"><span class="lineno"> 3907</span>    menu.addSeparator();</div>
<div class="line"><span class="lineno"> 3908</span> </div>
<div class="line"><span class="lineno"> 3909</span>    <a class="code hl_class" href="class_t_xsh_simple_level.html">TXshSimpleLevel</a> *sl = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">getCurrentLevel</a>()-&gt;getSimpleLevel();</div>
<div class="line"><span class="lineno"> 3910</span>    <span class="keywordflow">if</span> (sl || soundCellsSelected)</div>
<div class="line"><span class="lineno"> 3911</span>      menu.addAction(cmdManager-&gt;getAction(MI_FileInfo));</div>
<div class="line"><span class="lineno"> 3912</span>    <span class="keywordflow">if</span> (sl &amp;&amp; (sl-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a1a147f1e970a62120c0bbaf0020a8932">getType</a>() &amp; LEVELCOLUMN_XSHLEVEL))</div>
<div class="line"><span class="lineno"> 3913</span>      menu.addAction(cmdManager-&gt;getAction(MI_ViewFile));</div>
<div class="line"><span class="lineno"> 3914</span> </div>
<div class="line"><span class="lineno"> 3915</span>    menu.addSeparator();</div>
<div class="line"><span class="lineno"> 3916</span> </div>
<div class="line"><span class="lineno"> 3917</span>    <span class="keywordflow">if</span> (!cell.<a class="code hl_function" href="class_t_xsh_cell.html#a5d20229e7bcd19957b123959e58a833e">isEmpty</a>() &amp;&amp; cell.m_level &amp;&amp; cell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a6ef7d48e41f4f214b414e959512e6377">getChildLevel</a>()) {</div>
<div class="line"><span class="lineno"> 3918</span>      menu.addAction(cmdManager-&gt;getAction(MI_OpenChild));</div>
<div class="line"><span class="lineno"> 3919</span> </div>
<div class="line"><span class="lineno"> 3920</span>      menu.addSeparator();</div>
<div class="line"><span class="lineno"> 3921</span>    }</div>
<div class="line"><span class="lineno"> 3922</span> </div>
<div class="line"><span class="lineno"> 3923</span>    <span class="keywordflow">if</span> (selectionContainRasterImage(m_viewer-&gt;getCellSelection(),</div>
<div class="line"><span class="lineno"> 3924</span>                                    m_viewer-&gt;getXsheet())) {</div>
<div class="line"><span class="lineno"> 3925</span>      QMenu *editImageMenu = <span class="keyword">new</span> QMenu(tr(<span class="stringliteral">&quot;Edit Image&quot;</span>), <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 3926</span>      {</div>
<div class="line"><span class="lineno"> 3927</span>        editImageMenu-&gt;addAction(cmdManager-&gt;getAction(MI_AdjustLevels));</div>
<div class="line"><span class="lineno"> 3928</span>        editImageMenu-&gt;addAction(cmdManager-&gt;getAction(MI_LinesFade));</div>
<div class="line"><span class="lineno"> 3929</span>        editImageMenu-&gt;addAction(</div>
<div class="line"><span class="lineno"> 3930</span>            cmdManager-&gt;getAction(MI_BrightnessAndContrast));</div>
<div class="line"><span class="lineno"> 3931</span>        editImageMenu-&gt;addAction(cmdManager-&gt;getAction(MI_Antialias));</div>
<div class="line"><span class="lineno"> 3932</span>        editImageMenu-&gt;addAction(cmdManager-&gt;getAction(MI_CanvasSize));</div>
<div class="line"><span class="lineno"> 3933</span>      }</div>
<div class="line"><span class="lineno"> 3934</span>      menu.addMenu(editImageMenu);</div>
<div class="line"><span class="lineno"> 3935</span> </div>
<div class="line"><span class="lineno"> 3936</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (selectionContainTlvImage(m_viewer-&gt;getCellSelection(),</div>
<div class="line"><span class="lineno"> 3937</span>                                        m_viewer-&gt;getXsheet()))</div>
<div class="line"><span class="lineno"> 3938</span>      menu.addAction(cmdManager-&gt;getAction(MI_CanvasSize));</div>
<div class="line"><span class="lineno"> 3939</span> </div>
<div class="line"><span class="lineno"> 3940</span>    QMenu *lipSyncMenu = <span class="keyword">new</span> QMenu(tr(<span class="stringliteral">&quot;Lip Sync&quot;</span>), <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 3941</span>    {</div>
<div class="line"><span class="lineno"> 3942</span>      <span class="keywordflow">if</span> (sl ||</div>
<div class="line"><span class="lineno"> 3943</span>          (<a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;getCurrentLevel()-&gt;getLevel() &amp;&amp;</div>
<div class="line"><span class="lineno"> 3944</span>           <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;getCurrentLevel()-&gt;getLevel()-&gt;getChildLevel()))</div>
<div class="line"><span class="lineno"> 3945</span>        lipSyncMenu-&gt;addAction(cmdManager-&gt;getAction(MI_LipSyncPopup));</div>
<div class="line"><span class="lineno"> 3946</span>      <span class="keywordflow">if</span> (!soundCellsSelected)</div>
<div class="line"><span class="lineno"> 3947</span>        lipSyncMenu-&gt;addAction(cmdManager-&gt;getAction(MI_ImportMagpieFile));</div>
<div class="line"><span class="lineno"> 3948</span>    }</div>
<div class="line"><span class="lineno"> 3949</span>    <span class="keywordflow">if</span> (lipSyncMenu-&gt;actions().isEmpty())</div>
<div class="line"><span class="lineno"> 3950</span>      <span class="keyword">delete</span> lipSyncMenu;</div>
<div class="line"><span class="lineno"> 3951</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3952</span>      menu.addMenu(lipSyncMenu);</div>
<div class="line"><span class="lineno"> 3953</span> </div>
<div class="line"><span class="lineno"> 3954</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3955</span>    menu.addAction(cmdManager-&gt;getAction(MI_CreateBlankDrawing));</div>
<div class="line"><span class="lineno"> 3956</span>    menu.addSeparator();</div>
<div class="line"><span class="lineno"> 3957</span>    menu.addAction(cmdManager-&gt;getAction(MI_FillEmptyCell));</div>
<div class="line"><span class="lineno"> 3958</span>    <span class="keywordflow">if</span> (cameraCellsSelected) {</div>
<div class="line"><span class="lineno"> 3959</span>      menu.addSeparator();</div>
<div class="line"><span class="lineno"> 3960</span>      menu.addAction(cmdManager-&gt;getAction(MI_SetKeyframes));</div>
<div class="line"><span class="lineno"> 3961</span>      menu.addAction(cmdManager-&gt;getAction(MI_ShiftKeyframesDown));</div>
<div class="line"><span class="lineno"> 3962</span>      menu.addAction(cmdManager-&gt;getAction(MI_ShiftKeyframesUp));</div>
<div class="line"><span class="lineno"> 3963</span>    }</div>
<div class="line"><span class="lineno"> 3964</span>  }</div>
<div class="line"><span class="lineno"> 3965</span> </div>
<div class="line"><span class="lineno"> 3966</span>  <span class="comment">// cell mark menu</span></div>
<div class="line"><span class="lineno"> 3967</span>  <a class="code hl_class" href="class_t_xsh_cell_column.html">TXshCellColumn</a> *cellColumn =</div>
<div class="line"><span class="lineno"> 3968</span>      (m_viewer-&gt;getXsheet()-&gt;<a class="code hl_function" href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">getColumn</a>(col))</div>
<div class="line"><span class="lineno"> 3969</span>          ? m_viewer-&gt;getXsheet()-&gt;<a class="code hl_function" href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">getColumn</a>(col)-&gt;getCellColumn()</div>
<div class="line"><span class="lineno"> 3970</span>          : <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 3971</span>  <span class="keywordflow">if</span> (cellColumn) {</div>
<div class="line"><span class="lineno"> 3972</span>    QMenu *marksMenu    = <span class="keyword">new</span> QMenu(tr(<span class="stringliteral">&quot;Cell Mark&quot;</span>), <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 3973</span>    <span class="keywordtype">int</span> markId          = cellColumn-&gt;getCellMark(row);</div>
<div class="line"><span class="lineno"> 3974</span>    QAction *markAction = marksMenu-&gt;addAction(tr(<span class="stringliteral">&quot;None&quot;</span>));</div>
<div class="line"><span class="lineno"> 3975</span>    markAction-&gt;setCheckable(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 3976</span>    markAction-&gt;setChecked(markId == -1);</div>
<div class="line"><span class="lineno"> 3977</span>    markAction-&gt;setEnabled(markId != -1);</div>
<div class="line"><span class="lineno"> 3978</span>    markAction-&gt;setData(QList&lt;QVariant&gt;{row, col, -1});</div>
<div class="line"><span class="lineno"> 3979</span>    connect(markAction, SIGNAL(triggered()), <span class="keyword">this</span>, SLOT(onSetCellMark()));</div>
<div class="line"><span class="lineno"> 3980</span>    QList&lt;TSceneProperties::CellMark&gt; marks = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()</div>
<div class="line"><span class="lineno"> 3981</span>                                                  -&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()</div>
<div class="line"><span class="lineno"> 3982</span>                                                  -&gt;getScene()</div>
<div class="line"><span class="lineno"> 3983</span>                                                  -&gt;<a class="code hl_function" href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">getProperties</a>()</div>
<div class="line"><span class="lineno"> 3984</span>                                                  -&gt;getCellMarks();</div>
<div class="line"><span class="lineno"> 3985</span>    <span class="keywordtype">int</span> curId = 0;</div>
<div class="line"><span class="lineno"> 3986</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> mark : marks) {</div>
<div class="line"><span class="lineno"> 3987</span>      QString label = QString(<span class="stringliteral">&quot;%1: %2&quot;</span>).arg(curId).arg(mark.name);</div>
<div class="line"><span class="lineno"> 3988</span>      markAction    = marksMenu-&gt;addAction(getColorChipIcon(mark.color), label);</div>
<div class="line"><span class="lineno"> 3989</span>      markAction-&gt;setCheckable(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 3990</span>      markAction-&gt;setChecked(markId == curId);</div>
<div class="line"><span class="lineno"> 3991</span>      markAction-&gt;setEnabled(markId != curId);</div>
<div class="line"><span class="lineno"> 3992</span>      markAction-&gt;setData(QList&lt;QVariant&gt;{row, col, curId});</div>
<div class="line"><span class="lineno"> 3993</span>      connect(markAction, SIGNAL(triggered()), <span class="keyword">this</span>, SLOT(onSetCellMark()));</div>
<div class="line"><span class="lineno"> 3994</span>      curId++;</div>
<div class="line"><span class="lineno"> 3995</span>    }</div>
<div class="line"><span class="lineno"> 3996</span> </div>
<div class="line"><span class="lineno"> 3997</span>    menu.addMenu(marksMenu);</div>
<div class="line"><span class="lineno"> 3998</span>  }</div>
<div class="line"><span class="lineno"> 3999</span>}</div>
<div class="ttc" id="aclass_command_manager_html"><div class="ttname"><a href="class_command_manager.html">CommandManager</a></div><div class="ttdef"><b>Definition:</b> menubarcommand.h:102</div></div>
<div class="ttc" id="aclass_t_app_html_a13f509e753824cb0500787f68bb51a09"><div class="ttname"><a href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">TApp::getCurrentXsheet</a></div><div class="ttdeci">TXsheetHandle * getCurrentXsheet() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:110</div></div>
<div class="ttc" id="aclass_t_app_html_abbbf1fae564e9e510826eda4f6637d20"><div class="ttname"><a href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">TApp::getCurrentScene</a></div><div class="ttdeci">TSceneHandle * getCurrentScene() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:106</div></div>
<div class="ttc" id="aclass_t_app_html_ad2923c9feaaa44ecd9cdd0fa029aa8aa"><div class="ttname"><a href="class_t_app.html#ad2923c9feaaa44ecd9cdd0fa029aa8aa">TApp::getCurrentLevel</a></div><div class="ttdeci">TXshLevelHandle * getCurrentLevel() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:122</div></div>
<div class="ttc" id="aclass_t_xsh_cell_column_html"><div class="ttname"><a href="class_t_xsh_cell_column.html">TXshCellColumn</a></div><div class="ttdef"><b>Definition:</b> txshcolumn.h:303</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_a1a147f1e970a62120c0bbaf0020a8932"><div class="ttname"><a href="class_t_xsh_level.html#a1a147f1e970a62120c0bbaf0020a8932">TXshLevel::getType</a></div><div class="ttdeci">int getType() const</div><div class="ttdef"><b>Definition:</b> txshlevel.h:81</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_a6ef7d48e41f4f214b414e959512e6377"><div class="ttname"><a href="class_t_xsh_level.html#a6ef7d48e41f4f214b414e959512e6377">TXshLevel::getChildLevel</a></div><div class="ttdeci">virtual TXshChildLevel * getChildLevel()</div><div class="ttdoc">Method (to be overridden in subclasses) to downcast to TXshChildLevel.</div><div class="ttdef"><b>Definition:</b> txshlevel.h:98</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_a903cb5c2c50f8f34fdda2b89ecdece7f"><div class="ttname"><a href="class_t_xsh_level.html#a903cb5c2c50f8f34fdda2b89ecdece7f">TXshLevel::getZeraryFxLevel</a></div><div class="ttdeci">virtual TXshZeraryFxLevel * getZeraryFxLevel()</div><div class="ttdef"><b>Definition:</b> txshlevel.h:102</div></div>
<div class="ttc" id="aclass_t_xsh_simple_level_html"><div class="ttname"><a href="class_t_xsh_simple_level.html">TXshSimpleLevel</a></div><div class="ttdoc">The TXshLevel specialization for image levels.</div><div class="ttdef"><b>Definition:</b> txshsimplelevel.h:60</div></div>
<div class="ttc" id="aclass_t_xsheet_html_a2fbaf0d4ff704a20a333f605609c64a1"><div class="ttname"><a href="class_t_xsheet.html#a2fbaf0d4ff704a20a333f605609c64a1">TXsheet::isLevelUsed</a></div><div class="ttdeci">bool isLevelUsed(TXshLevel *) const</div><div class="ttdef"><b>Definition:</b> txsheet.cpp:534</div></div>
<div class="ttc" id="aclass_toonz_scene_html_a8ef96fedc17d7def810ac419b0939254"><div class="ttname"><a href="class_toonz_scene.html#a8ef96fedc17d7def810ac419b0939254">ToonzScene::getProperties</a></div><div class="ttdeci">TSceneProperties * getProperties() const</div><div class="ttdoc">&lt; Returns a pointer to the scene's properties.</div><div class="ttdef"><b>Definition:</b> toonzscene.h:87</div></div>
<div class="ttc" id="aclass_toonz_scene_html_ac1a8bf0d2cec4f59c87b0001991264b5"><div class="ttname"><a href="class_toonz_scene.html#ac1a8bf0d2cec4f59c87b0001991264b5">ToonzScene::getLevelSet</a></div><div class="ttdeci">TLevelSet * getLevelSet() const</div><div class="ttdoc">Returns a pointer to the scene's Level Set.</div><div class="ttdef"><b>Definition:</b> toonzscene.h:93</div></div>
<div class="ttc" id="aclass_xsheet_g_u_i_1_1_cell_area_html_a8834bc87ebb88a6662b380587295f785"><div class="ttname"><a href="class_xsheet_g_u_i_1_1_cell_area.html#a8834bc87ebb88a6662b380587295f785">XsheetGUI::CellArea::onReplaceByCastedLevel</a></div><div class="ttdeci">void onReplaceByCastedLevel(QAction *action)</div><div class="ttdef"><b>Definition:</b> xshcellviewer.cpp:4004</div></div>
<div class="ttc" id="aclass_xsheet_viewer_html_a268e48f8420c2b83bc15f73733527d42"><div class="ttname"><a href="class_xsheet_viewer.html#a268e48f8420c2b83bc15f73733527d42">XsheetViewer::areSoundCellsSelected</a></div><div class="ttdeci">bool areSoundCellsSelected()</div><div class="ttdef"><b>Definition:</b> xsheetviewer.cpp:944</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a32990a254fbeec3d3a8f0f826adacce9" name="a32990a254fbeec3d3a8f0f826adacce9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32990a254fbeec3d3a8f0f826adacce9">&#9670;&nbsp;</a></span>createKeyLineMenu()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::createKeyLineMenu </td>
          <td>(</td>
          <td class="paramtype">QMenu &amp;&#160;</td>
          <td class="paramname"><em>menu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>col</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Crea il menu' del tasto destro che si visualizza quando si clicca sulla linea tre due key frame. </p>
<div class="fragment"><div class="line"><span class="lineno"> 4073</span>                                                              {</div>
<div class="line"><span class="lineno"> 4074</span>  <a class="code hl_class" href="class_t_stage_object.html">TStageObject</a> *pegbar =</div>
<div class="line"><span class="lineno"> 4075</span>      m_viewer-&gt;getXsheet()-&gt;<a class="code hl_function" href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">getStageObject</a>(m_viewer-&gt;<a class="code hl_function" href="class_xsheet_viewer.html#acef259f8c33344981f8c218590bca5d9">getObjectId</a>(col));</div>
<div class="line"><span class="lineno"> 4076</span>  <a class="code hl_class" href="class_command_manager.html">CommandManager</a> *cmdManager = CommandManager::instance();</div>
<div class="line"><span class="lineno"> 4077</span>  <span class="keywordtype">int</span> r0, r1, rh0, rh1;</div>
<div class="line"><span class="lineno"> 4078</span>  <span class="keywordtype">double</span> e0, e1;</div>
<div class="line"><span class="lineno"> 4079</span>  <span class="keywordflow">if</span> (pegbar-&gt;getKeyframeSpan(row, r0, e0, r1, e1) &amp;&amp;</div>
<div class="line"><span class="lineno"> 4080</span>      getEaseHandles(r0, r1, e0, e1, rh0, rh1)) {</div>
<div class="line"><span class="lineno"> 4081</span>    menu.addAction(cmdManager-&gt;getAction(MI_SetAcceleration));</div>
<div class="line"><span class="lineno"> 4082</span>    menu.addAction(cmdManager-&gt;getAction(MI_SetDeceleration));</div>
<div class="line"><span class="lineno"> 4083</span>    menu.addAction(cmdManager-&gt;getAction(MI_SetConstantSpeed));</div>
<div class="line"><span class="lineno"> 4084</span>    menu.addSeparator();</div>
<div class="line"><span class="lineno"> 4085</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4086</span>    <span class="comment">// Se le due chiavi non sono linear aggiungo il comando ResetInterpolation</span></div>
<div class="line"><span class="lineno"> 4087</span>    <span class="keywordtype">bool</span> isR0FullK = pegbar-&gt;<a class="code hl_function" href="class_t_stage_object.html#acb0e456655902de4a39774f0f53a1940">isFullKeyframe</a>(r0);</div>
<div class="line"><span class="lineno"> 4088</span>    <span class="keywordtype">bool</span> isR1FullK = pegbar-&gt;<a class="code hl_function" href="class_t_stage_object.html#acb0e456655902de4a39774f0f53a1940">isFullKeyframe</a>(r1);</div>
<div class="line"><span class="lineno"> 4089</span>    TDoubleKeyframe::Type r0Type =</div>
<div class="line"><span class="lineno"> 4090</span>        pegbar-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a23087217a2f7436152fa0ee4b2362448">TStageObject::T_X</a>)-&gt;getKeyframeAt(r0).m_type;</div>
<div class="line"><span class="lineno"> 4091</span>    TDoubleKeyframe::Type r1Type =</div>
<div class="line"><span class="lineno"> 4092</span>        pegbar-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a23087217a2f7436152fa0ee4b2362448">TStageObject::T_X</a>)-&gt;getKeyframeAt(r1).m_prevType;</div>
<div class="line"><span class="lineno"> 4093</span>    <span class="keywordflow">if</span> (isGlobalKeyFrameWithSameTypeDiffFromLinear(pegbar, r0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 4094</span>        isGlobalKeyFrameWithSamePrevTypeDiffFromLinear(pegbar, r1)) {</div>
<div class="line"><span class="lineno"> 4095</span>      menu.addAction(cmdManager-&gt;getAction(MI_ResetInterpolation));</div>
<div class="line"><span class="lineno"> 4096</span>      menu.addSeparator();</div>
<div class="line"><span class="lineno"> 4097</span>    }</div>
<div class="line"><span class="lineno"> 4098</span>  }</div>
<div class="line"><span class="lineno"> 4099</span> </div>
<div class="line"><span class="lineno"> 4100</span>  TDoubleKeyframe::Type rType =</div>
<div class="line"><span class="lineno"> 4101</span>      pegbar-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a23087217a2f7436152fa0ee4b2362448">TStageObject::T_X</a>)-&gt;getKeyframeAt(r0).m_type;</div>
<div class="line"><span class="lineno"> 4102</span> </div>
<div class="line"><span class="lineno"> 4103</span>  <span class="keywordflow">if</span> (rType != TDoubleKeyframe::Constant)</div>
<div class="line"><span class="lineno"> 4104</span>    menu.addAction(cmdManager-&gt;getAction(MI_UseConstantInterpolation));</div>
<div class="line"><span class="lineno"> 4105</span>  <span class="keywordflow">if</span> (rType != TDoubleKeyframe::Linear)</div>
<div class="line"><span class="lineno"> 4106</span>    menu.addAction(cmdManager-&gt;getAction(MI_UseLinearInterpolation));</div>
<div class="line"><span class="lineno"> 4107</span>  <span class="keywordflow">if</span> (rType != TDoubleKeyframe::SpeedInOut)</div>
<div class="line"><span class="lineno"> 4108</span>    menu.addAction(cmdManager-&gt;getAction(MI_UseSpeedInOutInterpolation));</div>
<div class="line"><span class="lineno"> 4109</span>  <span class="keywordflow">if</span> (rType != TDoubleKeyframe::EaseInOut)</div>
<div class="line"><span class="lineno"> 4110</span>    menu.addAction(cmdManager-&gt;getAction(MI_UseEaseInOutInterpolation));</div>
<div class="line"><span class="lineno"> 4111</span>  <span class="keywordflow">if</span> (rType != TDoubleKeyframe::EaseInOutPercentage)</div>
<div class="line"><span class="lineno"> 4112</span>    menu.addAction(cmdManager-&gt;getAction(MI_UseEaseInOutPctInterpolation));</div>
<div class="line"><span class="lineno"> 4113</span>  <span class="keywordflow">if</span> (rType != TDoubleKeyframe::Exponential)</div>
<div class="line"><span class="lineno"> 4114</span>    menu.addAction(cmdManager-&gt;getAction(MI_UseExponentialInterpolation));</div>
<div class="line"><span class="lineno"> 4115</span> </div>
<div class="line"><span class="lineno"> 4116</span>  <span class="keywordflow">if</span> (col &lt; 0) {</div>
<div class="line"><span class="lineno"> 4117</span>    menu.addSeparator();</div>
<div class="line"><span class="lineno"> 4118</span>    menu.addAction(cmdManager-&gt;getAction(MI_SetKeyframes));</div>
<div class="line"><span class="lineno"> 4119</span>    menu.addAction(cmdManager-&gt;getAction(MI_ShiftKeyframesDown));</div>
<div class="line"><span class="lineno"> 4120</span>    menu.addAction(cmdManager-&gt;getAction(MI_ShiftKeyframesUp));</div>
<div class="line"><span class="lineno"> 4121</span>  }</div>
<div class="line"><span class="lineno"> 4122</span> </div>
<div class="line"><span class="lineno"> 4123</span>  menu.addSeparator();</div>
<div class="line"><span class="lineno"> 4124</span>  <span class="comment">// int paramStep             = getParamStep(pegbar, r0);</span></div>
<div class="line"><span class="lineno"> 4125</span>  QActionGroup *actionGroup = <span class="keyword">new</span> QActionGroup(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 4126</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno"> 4127</span>  <span class="keywordflow">for</span> (i = 1; i &lt;= 4; i++) {</div>
<div class="line"><span class="lineno"> 4128</span>    QAction *act = <span class="keyword">new</span> QAction(</div>
<div class="line"><span class="lineno"> 4129</span>        QString(<span class="stringliteral">&quot;Interpolation on &quot;</span>) + QString::number(i) + <span class="stringliteral">&quot;&#39;s&quot;</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 4130</span>    <span class="comment">// if (paramStep == i) act-&gt;setEnabled(false);</span></div>
<div class="line"><span class="lineno"> 4131</span>    QList&lt;QVariant&gt; list;</div>
<div class="line"><span class="lineno"> 4132</span>    list.append(QVariant(i));</div>
<div class="line"><span class="lineno"> 4133</span>    list.append(QVariant(r0));</div>
<div class="line"><span class="lineno"> 4134</span>    list.append(QVariant(col));</div>
<div class="line"><span class="lineno"> 4135</span>    act-&gt;setData(QVariant(list));</div>
<div class="line"><span class="lineno"> 4136</span>    actionGroup-&gt;addAction(act);</div>
<div class="line"><span class="lineno"> 4137</span>    menu.addAction(act);</div>
<div class="line"><span class="lineno"> 4138</span>  }</div>
<div class="line"><span class="lineno"> 4139</span>  connect(actionGroup, SIGNAL(triggered(QAction *)), <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno"> 4140</span>          SLOT(onStepChanged(QAction *)));</div>
<div class="line"><span class="lineno"> 4141</span>}</div>
<div class="ttc" id="aclass_t_stage_object_html_ac7a60ddc803173dc7591f784577cb439a23087217a2f7436152fa0ee4b2362448"><div class="ttname"><a href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a23087217a2f7436152fa0ee4b2362448">TStageObject::T_X</a></div><div class="ttdeci">@ T_X</div><div class="ttdoc">Local x coordinate in inches.</div><div class="ttdef"><b>Definition:</b> tstageobject.h:123</div></div>
<div class="ttc" id="aclass_t_stage_object_html_acb0e456655902de4a39774f0f53a1940"><div class="ttname"><a href="class_t_stage_object.html#acb0e456655902de4a39774f0f53a1940">TStageObject::isFullKeyframe</a></div><div class="ttdeci">bool isFullKeyframe(int frame) const</div><div class="ttdoc">Returns true if frame is a keyframe for all channels.</div><div class="ttdef"><b>Definition:</b> tstageobject.cpp:824</div></div>
<div class="ttc" id="aclass_t_stage_object_html_ae4cf64f5085310a14074ceb54d2b5177"><div class="ttname"><a href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">TStageObject::getParam</a></div><div class="ttdeci">double getParam(Channel type, double frame) const</div><div class="ttdoc">Returns the TStageObject::Channel value associated with the frame.</div><div class="ttdef"><b>Definition:</b> tstageobject.cpp:1080</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4f983304012306e204a4aba11514bfd5" name="a4f983304012306e204a4aba11514bfd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f983304012306e204a4aba11514bfd5">&#9670;&nbsp;</a></span>createKeyMenu()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::createKeyMenu </td>
          <td>(</td>
          <td class="paramtype">QMenu &amp;&#160;</td>
          <td class="paramname"><em>menu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Crea il menu' del tasto destro che si visualizza si clicca su un key frame. </p>
<div class="fragment"><div class="line"><span class="lineno"> 4047</span>                                        {</div>
<div class="line"><span class="lineno"> 4048</span>  <a class="code hl_class" href="class_command_manager.html">CommandManager</a> *cmdManager = CommandManager::instance();</div>
<div class="line"><span class="lineno"> 4049</span>  menu.addAction(cmdManager-&gt;getAction(MI_SelectRowKeyframes));</div>
<div class="line"><span class="lineno"> 4050</span>  menu.addAction(cmdManager-&gt;getAction(MI_SelectColumnKeyframes));</div>
<div class="line"><span class="lineno"> 4051</span>  menu.addAction(cmdManager-&gt;getAction(MI_SelectAllKeyframes));</div>
<div class="line"><span class="lineno"> 4052</span>  menu.addAction(cmdManager-&gt;getAction(MI_SelectAllKeyframesNotBefore));</div>
<div class="line"><span class="lineno"> 4053</span>  menu.addAction(cmdManager-&gt;getAction(MI_SelectAllKeyframesNotAfter));</div>
<div class="line"><span class="lineno"> 4054</span>  menu.addAction(cmdManager-&gt;getAction(MI_SelectPreviousKeysInColumn));</div>
<div class="line"><span class="lineno"> 4055</span>  menu.addAction(cmdManager-&gt;getAction(MI_SelectFollowingKeysInColumn));</div>
<div class="line"><span class="lineno"> 4056</span>  menu.addAction(cmdManager-&gt;getAction(MI_SelectPreviousKeysInRow));</div>
<div class="line"><span class="lineno"> 4057</span>  menu.addAction(cmdManager-&gt;getAction(MI_SelectFollowingKeysInRow));</div>
<div class="line"><span class="lineno"> 4058</span>  menu.addAction(cmdManager-&gt;getAction(MI_InvertKeyframeSelection));</div>
<div class="line"><span class="lineno"> 4059</span>  menu.addSeparator();</div>
<div class="line"><span class="lineno"> 4060</span>  menu.addAction(cmdManager-&gt;getAction(MI_Cut));</div>
<div class="line"><span class="lineno"> 4061</span>  menu.addAction(cmdManager-&gt;getAction(MI_Copy));</div>
<div class="line"><span class="lineno"> 4062</span>  menu.addAction(cmdManager-&gt;getAction(MI_Paste));</div>
<div class="line"><span class="lineno"> 4063</span>  menu.addAction(cmdManager-&gt;getAction(MI_Clear));</div>
<div class="line"><span class="lineno"> 4064</span>  menu.addSeparator();</div>
<div class="line"><span class="lineno"> 4065</span>  menu.addAction(cmdManager-&gt;getAction(MI_ShiftKeyframesDown));</div>
<div class="line"><span class="lineno"> 4066</span>  menu.addAction(cmdManager-&gt;getAction(MI_ShiftKeyframesUp));</div>
<div class="line"><span class="lineno"> 4067</span>  menu.addSeparator();</div>
<div class="line"><span class="lineno"> 4068</span>  menu.addAction(cmdManager-&gt;getAction(MI_OpenFunctionEditor));</div>
<div class="line"><span class="lineno"> 4069</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4db067a47b699d3b285eed81d4d1dd15" name="a4db067a47b699d3b285eed81d4d1dd15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4db067a47b699d3b285eed81d4d1dd15">&#9670;&nbsp;</a></span>createNoteMenu()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::createNoteMenu </td>
          <td>(</td>
          <td class="paramtype">QMenu &amp;&#160;</td>
          <td class="paramname"><em>menu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Crea il menu' del tasto destro che si visualizza quando si sopra una nota. </p>
<div class="fragment"><div class="line"><span class="lineno"> 4145</span>                                         {</div>
<div class="line"><span class="lineno"> 4146</span>  QAction *openAct   = menu.addAction(tr(<span class="stringliteral">&quot;Open Memo&quot;</span>));</div>
<div class="line"><span class="lineno"> 4147</span>  QAction *deleteAct = menu.addAction(tr(<span class="stringliteral">&quot;Delete Memo&quot;</span>));</div>
<div class="line"><span class="lineno"> 4148</span>  <span class="keywordtype">bool</span> ret = connect(openAct, SIGNAL(triggered()), <span class="keyword">this</span>, SLOT(openNote()));</div>
<div class="line"><span class="lineno"> 4149</span>  ret =</div>
<div class="line"><span class="lineno"> 4150</span>      ret &amp;&amp; connect(deleteAct, SIGNAL(triggered()), <span class="keyword">this</span>, SLOT(deleteNote()));</div>
<div class="line"><span class="lineno"> 4151</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5b573be58a3e38d1dd1418d22f2f6046" name="a5b573be58a3e38d1dd1418d22f2f6046"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b573be58a3e38d1dd1418d22f2f6046">&#9670;&nbsp;</a></span>deleteNote</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::deleteNote </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4163</span>                          {</div>
<div class="line"><span class="lineno"> 4164</span>  <a class="code hl_class" href="class_t_xsh_note_set.html">TXshNoteSet</a> *notes = m_viewer-&gt;getXsheet()-&gt;getNotes();</div>
<div class="line"><span class="lineno"> 4165</span>  <span class="keywordtype">int</span> currentIndex   = m_viewer-&gt;getCurrentNoteIndex();</div>
<div class="line"><span class="lineno"> 4166</span>  notes-&gt;removeNote(currentIndex);</div>
<div class="line"><span class="lineno"> 4167</span>  m_viewer-&gt;<a class="code hl_function" href="class_xsheet_viewer.html#a5b26ae9f867205f5ff7b8fe98f0e0d49">discardNoteWidget</a>();</div>
<div class="line"><span class="lineno"> 4168</span>}</div>
<div class="ttc" id="aclass_xsheet_viewer_html_a5b26ae9f867205f5ff7b8fe98f0e0d49"><div class="ttname"><a href="class_xsheet_viewer.html#a5b26ae9f867205f5ff7b8fe98f0e0d49">XsheetViewer::discardNoteWidget</a></div><div class="ttdeci">void discardNoteWidget()</div><div class="ttdoc">Discard Note Widget.</div><div class="ttdef"><b>Definition:</b> xsheetviewer.cpp:1592</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2c382fbf8b9f30b6163c4abdb20284a6" name="a2c382fbf8b9f30b6163c4abdb20284a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c382fbf8b9f30b6163c4abdb20284a6">&#9670;&nbsp;</a></span>dragEnterEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::dragEnterEvent </td>
          <td>(</td>
          <td class="paramtype">QDragEnterEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3669</span>                                                {</div>
<div class="line"><span class="lineno"> 3670</span>  <span class="keywordtype">bool</span> isResourceOrFolderDrop =</div>
<div class="line"><span class="lineno"> 3671</span>      acceptResourceOrFolderDrop(e-&gt;mimeData()-&gt;urls());</div>
<div class="line"><span class="lineno"> 3672</span>  <span class="keywordflow">if</span> (isResourceOrFolderDrop ||</div>
<div class="line"><span class="lineno"> 3673</span>      e-&gt;mimeData()-&gt;hasFormat(CastItems::getMimeFormat()) ||</div>
<div class="line"><span class="lineno"> 3674</span>      e-&gt;mimeData()-&gt;hasFormat(<span class="stringliteral">&quot;application/vnd.toonz.drawings&quot;</span>)) {</div>
<div class="line"><span class="lineno"> 3675</span>    setDragTool(XsheetGUI::DragTool::makeDragAndDropDataTool(m_viewer));</div>
<div class="line"><span class="lineno"> 3676</span>    <span class="comment">// For file dragging force CopyAction</span></div>
<div class="line"><span class="lineno"> 3677</span>    <span class="keywordflow">if</span> (isResourceOrFolderDrop) e-&gt;setDropAction(Qt::CopyAction);</div>
<div class="line"><span class="lineno"> 3678</span>    m_viewer-&gt;dragToolClick(e);</div>
<div class="line"><span class="lineno"> 3679</span>    <span class="comment">// For files, don&#39;t accept original proposed action in case it&#39;s a move</span></div>
<div class="line"><span class="lineno"> 3680</span>    isResourceOrFolderDrop ? e-&gt;accept() : e-&gt;acceptProposedAction();</div>
<div class="line"><span class="lineno"> 3681</span>  }</div>
<div class="line"><span class="lineno"> 3682</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a199b99c41f49c666c03c2c2a8e38a07a" name="a199b99c41f49c666c03c2c2a8e38a07a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a199b99c41f49c666c03c2c2a8e38a07a">&#9670;&nbsp;</a></span>dragLeaveEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::dragLeaveEvent </td>
          <td>(</td>
          <td class="paramtype">QDragLeaveEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3686</span>                                                {</div>
<div class="line"><span class="lineno"> 3687</span>  <span class="keywordflow">if</span> (!getDragTool()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3688</span>  m_viewer-&gt;dragToolLeave(e);</div>
<div class="line"><span class="lineno"> 3689</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abd78e6d1f1050115fa21ba98160b672d" name="abd78e6d1f1050115fa21ba98160b672d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd78e6d1f1050115fa21ba98160b672d">&#9670;&nbsp;</a></span>dragMoveEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::dragMoveEvent </td>
          <td>(</td>
          <td class="paramtype">QDragMoveEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3693</span>                                              {</div>
<div class="line"><span class="lineno"> 3694</span>  <span class="keywordflow">if</span> (!getDragTool()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3695</span>  <span class="keywordtype">bool</span> isResourceOrFolderDrop =</div>
<div class="line"><span class="lineno"> 3696</span>      acceptResourceOrFolderDrop(e-&gt;mimeData()-&gt;urls());</div>
<div class="line"><span class="lineno"> 3697</span>  <span class="comment">// For file dragging force CopyAction</span></div>
<div class="line"><span class="lineno"> 3698</span>  <span class="keywordflow">if</span> (isResourceOrFolderDrop) e-&gt;setDropAction(Qt::CopyAction);</div>
<div class="line"><span class="lineno"> 3699</span>  m_viewer-&gt;dragToolDrag(e);</div>
<div class="line"><span class="lineno"> 3700</span>  <span class="comment">// For files, don&#39;t accept original proposed action in case it&#39;s a move</span></div>
<div class="line"><span class="lineno"> 3701</span>  isResourceOrFolderDrop ? e-&gt;accept() : e-&gt;acceptProposedAction();</div>
<div class="line"><span class="lineno"> 3702</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3701a194f3309e7b632d5263d6e6cc5b" name="a3701a194f3309e7b632d5263d6e6cc5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3701a194f3309e7b632d5263d6e6cc5b">&#9670;&nbsp;</a></span>dropEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::dropEvent </td>
          <td>(</td>
          <td class="paramtype">QDropEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3706</span>                                      {</div>
<div class="line"><span class="lineno"> 3707</span>  <span class="keywordflow">if</span> (!getDragTool()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3708</span>  m_viewer-&gt;dragToolRelease(e);</div>
<div class="line"><span class="lineno"> 3709</span>  <span class="keywordflow">if</span> (e-&gt;source() == <span class="keyword">this</span>) {</div>
<div class="line"><span class="lineno"> 3710</span>    e-&gt;setDropAction(Qt::MoveAction);</div>
<div class="line"><span class="lineno"> 3711</span>    e-&gt;accept();</div>
<div class="line"><span class="lineno"> 3712</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (acceptResourceOrFolderDrop(e-&gt;mimeData()-&gt;urls())) {</div>
<div class="line"><span class="lineno"> 3713</span>    <span class="comment">// For file dragging force CopyAction</span></div>
<div class="line"><span class="lineno"> 3714</span>    e-&gt;setDropAction(Qt::CopyAction);</div>
<div class="line"><span class="lineno"> 3715</span>    <span class="comment">// For files, don&#39;t accept original proposed action in case it&#39;s a move</span></div>
<div class="line"><span class="lineno"> 3716</span>    e-&gt;accept();</div>
<div class="line"><span class="lineno"> 3717</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3718</span>    e-&gt;acceptProposedAction();</div>
<div class="line"><span class="lineno"> 3719</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae40f89d46182a628b14e956c13357887" name="ae40f89d46182a628b14e956c13357887"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae40f89d46182a628b14e956c13357887">&#9670;&nbsp;</a></span>event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool XsheetGUI::CellArea::event </td>
          <td>(</td>
          <td class="paramtype">QEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3723</span>                                  {</div>
<div class="line"><span class="lineno"> 3724</span>  QEvent::Type type = <span class="keyword">event</span>-&gt;type();</div>
<div class="line"><span class="lineno"> 3725</span>  <span class="keywordflow">if</span> (type == QEvent::ToolTip) {</div>
<div class="line"><span class="lineno"> 3726</span>    <span class="keywordflow">if</span> (!m_tooltip.isEmpty())</div>
<div class="line"><span class="lineno"> 3727</span>      QToolTip::showText(mapToGlobal(m_pos), m_tooltip);</div>
<div class="line"><span class="lineno"> 3728</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3729</span>      QToolTip::hideText();</div>
<div class="line"><span class="lineno"> 3730</span>  }</div>
<div class="line"><span class="lineno"> 3731</span>  <span class="keywordflow">if</span> (type == QEvent::WindowDeactivate &amp;&amp; m_isMousePressed) {</div>
<div class="line"><span class="lineno"> 3732</span>    QMouseEvent e(QEvent::MouseButtonRelease, m_pos, Qt::LeftButton,</div>
<div class="line"><span class="lineno"> 3733</span>                  Qt::NoButton, Qt::NoModifier);</div>
<div class="line"><span class="lineno"> 3734</span>    mouseReleaseEvent(&amp;e);</div>
<div class="line"><span class="lineno"> 3735</span>  }</div>
<div class="line"><span class="lineno"> 3736</span>  <span class="keywordflow">return</span> QWidget::event(event);</div>
<div class="line"><span class="lineno"> 3737</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2f68217b6b4aa82a3a316b30dfda8247" name="a2f68217b6b4aa82a3a316b30dfda8247"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f68217b6b4aa82a3a316b30dfda8247">&#9670;&nbsp;</a></span>hideRenameField()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::hideRenameField </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  155</span>{ m_renameCell-&gt;hide(); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0d5a29e2eb78b3411537780b5f113e23" name="a0d5a29e2eb78b3411537780b5f113e23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d5a29e2eb78b3411537780b5f113e23">&#9670;&nbsp;</a></span>isControlPressed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const bool XsheetGUI::CellArea::isControlPressed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3747</span>{ <span class="keywordflow">return</span> isCtrlPressed; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a90ddb8058286d19ca83ee0c05b67b06b" name="a90ddb8058286d19ca83ee0c05b67b06b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90ddb8058286d19ca83ee0c05b67b06b">&#9670;&nbsp;</a></span>mouseDoubleClickEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::mouseDoubleClickEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3532</span>                                                       {</div>
<div class="line"><span class="lineno"> 3533</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_orientation.html">Orientation</a> *o = m_viewer-&gt;orientation();</div>
<div class="line"><span class="lineno"> 3534</span>  <a class="code hl_class" href="class_t_point_t.html">TPoint</a> pos(event-&gt;pos().x(), event-&gt;pos().y());</div>
<div class="line"><span class="lineno"> 3535</span>  <a class="code hl_class" href="class_cell_position.html">CellPosition</a> cellPosition = m_viewer-&gt;xyToPosition(event-&gt;pos());</div>
<div class="line"><span class="lineno"> 3536</span>  <span class="keywordtype">int</span> row                   = cellPosition.frame();</div>
<div class="line"><span class="lineno"> 3537</span>  <span class="keywordtype">int</span> col                   = cellPosition.layer();</div>
<div class="line"><span class="lineno"> 3538</span>  <span class="comment">// Se la colonna e&#39; sound non devo fare nulla</span></div>
<div class="line"><span class="lineno"> 3539</span>  <a class="code hl_class" href="class_t_xsh_column.html">TXshColumn</a> *column = m_viewer-&gt;getXsheet()-&gt;<a class="code hl_function" href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">getColumn</a>(col);</div>
<div class="line"><span class="lineno"> 3540</span>  <span class="keywordflow">if</span> (column &amp;&amp; column-&gt;getSoundColumn()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3541</span> </div>
<div class="line"><span class="lineno"> 3542</span>  <span class="comment">// Se ho cliccato su una nota devo aprire il popup</span></div>
<div class="line"><span class="lineno"> 3543</span>  <a class="code hl_class" href="class_t_xsh_note_set.html">TXshNoteSet</a> *notes = m_viewer-&gt;getXsheet()-&gt;getNotes();</div>
<div class="line"><span class="lineno"> 3544</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno"> 3545</span>  <span class="keywordflow">for</span> (i = notes-&gt;getCount() - 1; i &gt;= 0; i--) {</div>
<div class="line"><span class="lineno"> 3546</span>    <span class="keywordtype">int</span> r       = notes-&gt;getNoteRow(i);</div>
<div class="line"><span class="lineno"> 3547</span>    <span class="keywordtype">int</span> c       = notes-&gt;getNoteCol(i);</div>
<div class="line"><span class="lineno"> 3548</span>    QPoint xy   = m_viewer-&gt;positionToXY(<a class="code hl_class" href="class_cell_position.html">CellPosition</a>(r, c));</div>
<div class="line"><span class="lineno"> 3549</span>    <a class="code hl_class" href="class_t_point_t.html">TPointD</a> pos = notes-&gt;getNotePos(i) + <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(xy.x(), xy.y());</div>
<div class="line"><span class="lineno"> 3550</span>    QRect rect  = o-&gt;rect(PredefinedRect::NOTE_ICON).translated(pos.x, pos.y);</div>
<div class="line"><span class="lineno"> 3551</span>    <span class="keywordflow">if</span> (!rect.contains(event-&gt;pos())) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3552</span>    m_viewer-&gt;setCurrentNoteIndex(i);</div>
<div class="line"><span class="lineno"> 3553</span>    m_viewer-&gt;getNotesWidget().at(i)-&gt;openNotePopup();</div>
<div class="line"><span class="lineno"> 3554</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3555</span>  }</div>
<div class="line"><span class="lineno"> 3556</span> </div>
<div class="line"><span class="lineno"> 3557</span>  <a class="code hl_class" href="class_t_object_handle.html">TObjectHandle</a> *oh = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a0d91c122eec2b756b7c4780014e49f9e">getCurrentObject</a>();</div>
<div class="line"><span class="lineno"> 3558</span>  oh-&gt;setObjectId(m_viewer-&gt;<a class="code hl_function" href="class_xsheet_viewer.html#acef259f8c33344981f8c218590bca5d9">getObjectId</a>(col));</div>
<div class="line"><span class="lineno"> 3559</span> </div>
<div class="line"><span class="lineno"> 3560</span>  <span class="keywordflow">if</span> (col == -1) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3561</span> </div>
<div class="line"><span class="lineno"> 3562</span>  <span class="comment">// in modalita&#39; xsheet as animation sheet non deve essere possibile creare</span></div>
<div class="line"><span class="lineno"> 3563</span>  <span class="comment">// livelli con doppio click: se la cella e&#39; vuota non bisogna fare nulla</span></div>
<div class="line"><span class="lineno"> 3564</span>  <span class="keywordflow">if</span> ((Preferences::instance()-&gt;isAnimationSheetEnabled() &amp;&amp;</div>
<div class="line"><span class="lineno"> 3565</span>       m_viewer-&gt;getXsheet()-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(row, col).<a class="code hl_function" href="class_t_xsh_cell.html#a5d20229e7bcd19957b123959e58a833e">isEmpty</a>())) {</div>
<div class="line"><span class="lineno"> 3566</span>    <a class="code hl_class" href="class_t_xsh_column.html">TXshColumn</a> *column = m_viewer-&gt;getXsheet()-&gt;<a class="code hl_function" href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">getColumn</a>(col);</div>
<div class="line"><span class="lineno"> 3567</span>    <span class="keywordflow">if</span> (!column ||</div>
<div class="line"><span class="lineno"> 3568</span>        column-&gt;getColumnType() != TXshColumn::ColumnType::eSoundTextType)</div>
<div class="line"><span class="lineno"> 3569</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3570</span>  }</div>
<div class="line"><span class="lineno"> 3571</span> </div>
<div class="line"><span class="lineno"> 3572</span>  <span class="keywordtype">int</span> colCount = m_viewer-&gt;getCellSelection()-&gt;getSelectedCells().getColCount();</div>
<div class="line"><span class="lineno"> 3573</span> </div>
<div class="line"><span class="lineno"> 3574</span>  m_renameCell-&gt;showInRowCol(row, col, colCount &gt; 1);</div>
<div class="line"><span class="lineno"> 3575</span>}</div>
<div class="ttc" id="aclass_t_object_handle_html"><div class="ttname"><a href="class_t_object_handle.html">TObjectHandle</a></div><div class="ttdef"><b>Definition:</b> tobjecthandle.h:35</div></div>
<div class="ttc" id="aclass_t_xsh_column_html"><div class="ttname"><a href="class_t_xsh_column.html">TXshColumn</a></div><div class="ttdoc">The TXshColumn class is the base class of column managers in xsheet.</div><div class="ttdef"><b>Definition:</b> txshcolumn.h:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a908ae0a77b45e3907291d2be953148c7" name="a908ae0a77b45e3907291d2be953148c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a908ae0a77b45e3907291d2be953148c7">&#9670;&nbsp;</a></span>mouseMoveEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::mouseMoveEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3391</span>                                                {</div>
<div class="line"><span class="lineno"> 3392</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_orientation.html">Orientation</a> *o = m_viewer-&gt;orientation();</div>
<div class="line"><span class="lineno"> 3393</span>  QPoint frameAdj      = m_viewer-&gt;getFrameZoomAdjustment();</div>
<div class="line"><span class="lineno"> 3394</span> </div>
<div class="line"><span class="lineno"> 3395</span>  m_viewer-&gt;setQtModifiers(event-&gt;modifiers());</div>
<div class="line"><span class="lineno"> 3396</span>  setCursor(Qt::ArrowCursor);</div>
<div class="line"><span class="lineno"> 3397</span>  QPoint pos        = <span class="keyword">event</span>-&gt;pos();</div>
<div class="line"><span class="lineno"> 3398</span>  QRect visibleRect = visibleRegion().boundingRect();</div>
<div class="line"><span class="lineno"> 3399</span>  <span class="keywordflow">if</span> (m_isPanning) {</div>
<div class="line"><span class="lineno"> 3400</span>    <span class="comment">// Pan tasto centrale</span></div>
<div class="line"><span class="lineno"> 3401</span>    m_viewer-&gt;scroll(m_pos - pos);</div>
<div class="line"><span class="lineno"> 3402</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3403</span>  }</div>
<div class="line"><span class="lineno"> 3404</span>  <span class="keywordflow">if</span> ((event-&gt;buttons() &amp; Qt::LeftButton) != 0 &amp;&amp;</div>
<div class="line"><span class="lineno"> 3405</span>      !visibleRegion().contains(pos)) {</div>
<div class="line"><span class="lineno"> 3406</span>    QRect bounds = visibleRegion().boundingRect();</div>
<div class="line"><span class="lineno"> 3407</span>    m_viewer-&gt;setAutoPanSpeed(bounds, pos);</div>
<div class="line"><span class="lineno"> 3408</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3409</span>    m_viewer-&gt;stopAutoPan();</div>
<div class="line"><span class="lineno"> 3410</span> </div>
<div class="line"><span class="lineno"> 3411</span>  m_pos = pos;</div>
<div class="line"><span class="lineno"> 3412</span>  <span class="keywordflow">if</span> (getDragTool()) {</div>
<div class="line"><span class="lineno"> 3413</span>    getDragTool()-&gt;onDrag(event);</div>
<div class="line"><span class="lineno"> 3414</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3415</span>  }</div>
<div class="line"><span class="lineno"> 3416</span> </div>
<div class="line"><span class="lineno"> 3417</span>  <a class="code hl_class" href="class_cell_position.html">CellPosition</a> cellPosition = m_viewer-&gt;xyToPosition(pos);</div>
<div class="line"><span class="lineno"> 3418</span>  <span class="keywordtype">int</span> row                   = cellPosition.frame();</div>
<div class="line"><span class="lineno"> 3419</span>  <span class="keywordtype">int</span> col                   = cellPosition.layer();</div>
<div class="line"><span class="lineno"> 3420</span>  QPoint cellTopLeft        = m_viewer-&gt;positionToXY(<a class="code hl_class" href="class_cell_position.html">CellPosition</a>(row, col));</div>
<div class="line"><span class="lineno"> 3421</span>  <span class="keywordtype">int</span> x                     = m_pos.x() - cellTopLeft.x();</div>
<div class="line"><span class="lineno"> 3422</span>  <span class="keywordtype">int</span> y                     = m_pos.y() - cellTopLeft.y();</div>
<div class="line"><span class="lineno"> 3423</span>  QPoint mouseInCell        = m_pos - cellTopLeft;</div>
<div class="line"><span class="lineno"> 3424</span> </div>
<div class="line"><span class="lineno"> 3425</span>  <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh = m_viewer-&gt;getXsheet();</div>
<div class="line"><span class="lineno"> 3426</span> </div>
<div class="line"><span class="lineno"> 3427</span>  <span class="comment">// Verifico se e&#39; una colonna sound</span></div>
<div class="line"><span class="lineno"> 3428</span>  <a class="code hl_class" href="class_t_xsh_column.html">TXshColumn</a> *column     = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">getColumn</a>(col);</div>
<div class="line"><span class="lineno"> 3429</span>  <span class="keywordtype">bool</span> isSoundColumn     = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3430</span>  <span class="keywordtype">bool</span> isZeraryColumn    = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3431</span>  <span class="keywordtype">bool</span> isSoundTextColumn = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3432</span>  <span class="keywordflow">if</span> (column) {</div>
<div class="line"><span class="lineno"> 3433</span>    <a class="code hl_class" href="class_t_xsh_sound_column.html">TXshSoundColumn</a> *soundColumn         = column-&gt;getSoundColumn();</div>
<div class="line"><span class="lineno"> 3434</span>    isSoundColumn                        = (!soundColumn) ? <span class="keyword">false</span> : <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3435</span>    <a class="code hl_class" href="class_t_xsh_zerary_fx_column.html">TXshZeraryFxColumn</a> *zeraryColumn     = column-&gt;getZeraryFxColumn();</div>
<div class="line"><span class="lineno"> 3436</span>    isZeraryColumn                       = (!zeraryColumn) ? <span class="keyword">false</span> : <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3437</span>    <a class="code hl_class" href="class_t_xsh_sound_text_column.html">TXshSoundTextColumn</a> *soundTextColumn = column-&gt;getSoundTextColumn();</div>
<div class="line"><span class="lineno"> 3438</span>    isSoundTextColumn                    = (!soundTextColumn) ? <span class="keyword">false</span> : <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3439</span>  }</div>
<div class="line"><span class="lineno"> 3440</span> </div>
<div class="line"><span class="lineno"> 3441</span>  <a class="code hl_class" href="class_t_stage_object.html">TStageObject</a> *pegbar = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">getStageObject</a>(m_viewer-&gt;<a class="code hl_function" href="class_xsheet_viewer.html#acef259f8c33344981f8c218590bca5d9">getObjectId</a>(col));</div>
<div class="line"><span class="lineno"> 3442</span>  <span class="keywordtype">int</span> k0, k1;</div>
<div class="line"><span class="lineno"> 3443</span>  <span class="keywordtype">bool</span> isKeyframeFrame =</div>
<div class="line"><span class="lineno"> 3444</span>      Preferences::instance()-&gt;isShowKeyframesOnXsheetCellAreaEnabled() &amp;&amp;</div>
<div class="line"><span class="lineno"> 3445</span>      pegbar &amp;&amp; pegbar-&gt;getKeyframeRange(k0, k1) &amp;&amp; k0 &lt;= row &amp;&amp; row &lt;= k1 + 1;</div>
<div class="line"><span class="lineno"> 3446</span> </div>
<div class="line"><span class="lineno"> 3447</span>  <span class="keywordflow">if</span> (isKeyframeFrame &amp;&amp; isKeyFrameArea(col, row, mouseInCell)) {</div>
<div class="line"><span class="lineno"> 3448</span>    <span class="keywordflow">if</span> (pegbar-&gt;<a class="code hl_function" href="class_t_stage_object.html#af2c8c37f71b2b2e2c2a15c6eb73b8b38">isKeyframe</a>(row))  <span class="comment">// key frame</span></div>
<div class="line"><span class="lineno"> 3449</span>      m_tooltip = tr(<span class="stringliteral">&quot;Click to select keyframe, drag to move it&quot;</span>);</div>
<div class="line"><span class="lineno"> 3450</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3451</span>      <span class="keywordtype">int</span> r0, r1;</div>
<div class="line"><span class="lineno"> 3452</span>      <span class="keywordtype">double</span> e0, e1;</div>
<div class="line"><span class="lineno"> 3453</span>      <span class="keywordtype">int</span> rh0, rh1;</div>
<div class="line"><span class="lineno"> 3454</span>      <span class="keywordflow">if</span> (pegbar-&gt;getKeyframeSpan(row, r0, e0, r1, e1) &amp;&amp;</div>
<div class="line"><span class="lineno"> 3455</span>          getEaseHandles(r0, r1, e0, e1, rh0,</div>
<div class="line"><span class="lineno"> 3456</span>                         rh1)) {  <span class="comment">// triangles in the segment between key frames</span></div>
<div class="line"><span class="lineno"> 3457</span>        <span class="keywordflow">if</span> (rh0 == row)</div>
<div class="line"><span class="lineno"> 3458</span>          m_tooltip = tr(<span class="stringliteral">&quot;Click and drag to set the acceleration range&quot;</span>);</div>
<div class="line"><span class="lineno"> 3459</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rh1 == row)</div>
<div class="line"><span class="lineno"> 3460</span>          m_tooltip = tr(<span class="stringliteral">&quot;Click and drag to set the deceleration range&quot;</span>);</div>
<div class="line"><span class="lineno"> 3461</span>      }</div>
<div class="line"><span class="lineno"> 3462</span>    }</div>
<div class="line"><span class="lineno"> 3463</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isKeyframeFrame &amp;&amp; row == k1 + 1 &amp;&amp;</div>
<div class="line"><span class="lineno"> 3464</span>             o-&gt;rect((col &lt; 0) ? PredefinedRect::CAMERA_LOOP_ICON</div>
<div class="line"><span class="lineno"> 3465</span>                               : PredefinedRect::LOOP_ICON)</div>
<div class="line"><span class="lineno"> 3466</span>                 .contains(mouseInCell))  <span class="comment">// cycle toggle of key frames</span></div>
<div class="line"><span class="lineno"> 3467</span>    m_tooltip = tr(<span class="stringliteral">&quot;Set the cycle of previous keyframes&quot;</span>);</div>
<div class="line"><span class="lineno"> 3468</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((!xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(row, col).<a class="code hl_function" href="class_t_xsh_cell.html#a5d20229e7bcd19957b123959e58a833e">isEmpty</a>()) &amp;&amp;</div>
<div class="line"><span class="lineno"> 3469</span>           o-&gt;rect(PredefinedRect::DRAG_AREA)</div>
<div class="line"><span class="lineno"> 3470</span>               .adjusted(0, 0, -frameAdj.x(), -frameAdj.y())</div>
<div class="line"><span class="lineno"> 3471</span>               .contains(mouseInCell))</div>
<div class="line"><span class="lineno"> 3472</span>    m_tooltip = tr(<span class="stringliteral">&quot;Click and drag to move the selection&quot;</span>);</div>
<div class="line"><span class="lineno"> 3473</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isZeraryColumn)</div>
<div class="line"><span class="lineno"> 3474</span>    m_tooltip = QString::fromStdWString(column-&gt;getZeraryFxColumn()</div>
<div class="line"><span class="lineno"> 3475</span>                                            -&gt;getZeraryColumnFx()</div>
<div class="line"><span class="lineno"> 3476</span>                                            -&gt;getZeraryFx()</div>
<div class="line"><span class="lineno"> 3477</span>                                            -&gt;getName());</div>
<div class="line"><span class="lineno"> 3478</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((!isSoundColumn &amp;&amp; !xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(row, col).<a class="code hl_function" href="class_t_xsh_cell.html#a5d20229e7bcd19957b123959e58a833e">isEmpty</a>()) &amp;&amp;  <span class="comment">// x &gt; 6 &amp;&amp;</span></div>
<div class="line"><span class="lineno"> 3479</span>           x &lt; (o-&gt;cellWidth() - frameAdj.x())) {</div>
<div class="line"><span class="lineno"> 3480</span>    <a class="code hl_class" href="class_t_xsh_cell.html">TXshCell</a> cell          = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(row, col);</div>
<div class="line"><span class="lineno"> 3481</span>    <a class="code hl_class" href="class_t_frame_id.html">TFrameId</a> fid           = cell.<a class="code hl_function" href="class_t_xsh_cell.html#a5a1965b96c2c698d6f0fb42a80c03406">getFrameId</a>();</div>
<div class="line"><span class="lineno"> 3482</span>    std::wstring levelName = cell.m_level-&gt;<a class="code hl_function" href="class_t_xsh_level.html#a3a59fb1bd3261baee4e889a9edbf0ae8">getName</a>();</div>
<div class="line"><span class="lineno"> 3483</span> </div>
<div class="line"><span class="lineno"> 3484</span>    <span class="comment">// convert the last one digit of the frame number to alphabet</span></div>
<div class="line"><span class="lineno"> 3485</span>    <span class="comment">// Ex.  12 -&gt; 1B    21 -&gt; 2A   30 -&gt; 3</span></div>
<div class="line"><span class="lineno"> 3486</span>    <span class="keywordflow">if</span> (isSoundTextColumn)</div>
<div class="line"><span class="lineno"> 3487</span>      m_tooltip = cell.<a class="code hl_function" href="class_t_xsh_cell.html#afabf22a14eb891c9f3affebe0535456a">getSoundTextLevel</a>()-&gt;getFrameText(</div>
<div class="line"><span class="lineno"> 3488</span>          cell.m_frameId.getNumber() - 1);</div>
<div class="line"><span class="lineno"> 3489</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Preferences::instance()-&gt;isShowFrameNumberWithLettersEnabled()) {</div>
<div class="line"><span class="lineno"> 3490</span>      m_tooltip =</div>
<div class="line"><span class="lineno"> 3491</span>          (fid.isEmptyFrame() || fid.isNoFrame())</div>
<div class="line"><span class="lineno"> 3492</span>              ? QString::fromStdWString(levelName)</div>
<div class="line"><span class="lineno"> 3493</span>              : QString::fromStdWString(levelName) + QString(<span class="stringliteral">&quot; &quot;</span>) +</div>
<div class="line"><span class="lineno"> 3494</span>                    m_viewer-&gt;<a class="code hl_function" href="class_xsheet_viewer.html#ae0642aaf7b9dae8978c26f20ea74ed49">getFrameNumberWithLetters</a>(fid.getNumber());</div>
<div class="line"><span class="lineno"> 3495</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3496</span>      QString frameNumber(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 3497</span>      <span class="keywordflow">if</span> (fid.getNumber() &gt;= 0) frameNumber = QString::number(fid.getNumber());</div>
<div class="line"><span class="lineno"> 3498</span>      <span class="keywordflow">if</span> (!fid.getLetter().isEmpty()) frameNumber += fid.getLetter();</div>
<div class="line"><span class="lineno"> 3499</span>      m_tooltip =</div>
<div class="line"><span class="lineno"> 3500</span>          QString((frameNumber.isEmpty()) ? QString::fromStdWString(levelName)</div>
<div class="line"><span class="lineno"> 3501</span>                                          : QString::fromStdWString(levelName) +</div>
<div class="line"><span class="lineno"> 3502</span>                                                QString(<span class="stringliteral">&quot; &quot;</span>) + frameNumber);</div>
<div class="line"><span class="lineno"> 3503</span>    }</div>
<div class="line"><span class="lineno"> 3504</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isSoundColumn &amp;&amp; o-&gt;rect(PredefinedRect::PREVIEW_TRACK)</div>
<div class="line"><span class="lineno"> 3505</span>                                  .adjusted(0, 0, -frameAdj.x(), -frameAdj.y())</div>
<div class="line"><span class="lineno"> 3506</span>                                  .contains(mouseInCell))</div>
<div class="line"><span class="lineno"> 3507</span>    m_tooltip = tr(<span class="stringliteral">&quot;Click and drag to play&quot;</span>);</div>
<div class="line"><span class="lineno"> 3508</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_levelExtenderRect.contains(pos))</div>
<div class="line"><span class="lineno"> 3509</span>    m_tooltip = tr(<span class="stringliteral">&quot;Click and drag to repeat selected cells&quot;</span>);</div>
<div class="line"><span class="lineno"> 3510</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isSoundColumn &amp;&amp; rectContainsPos(m_soundLevelModifyRects, pos)) {</div>
<div class="line"><span class="lineno"> 3511</span>    <span class="keywordflow">if</span> (o-&gt;isVerticalTimeline())</div>
<div class="line"><span class="lineno"> 3512</span>      setCursor(Qt::SplitVCursor);</div>
<div class="line"><span class="lineno"> 3513</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3514</span>      setCursor(Qt::SplitHCursor);</div>
<div class="line"><span class="lineno"> 3515</span>    m_tooltip = tr(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 3516</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3517</span>    m_tooltip = tr(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 3518</span>}</div>
<div class="ttc" id="aclass_t_frame_id_html"><div class="ttname"><a href="class_t_frame_id.html">TFrameId</a></div><div class="ttdef"><b>Definition:</b> tfilepath.h:29</div></div>
<div class="ttc" id="aclass_t_xsh_cell_html_a5a1965b96c2c698d6f0fb42a80c03406"><div class="ttname"><a href="class_t_xsh_cell.html#a5a1965b96c2c698d6f0fb42a80c03406">TXshCell::getFrameId</a></div><div class="ttdeci">TFrameId getFrameId() const</div><div class="ttdef"><b>Definition:</b> txshcell.h:120</div></div>
<div class="ttc" id="aclass_t_xsh_cell_html_afabf22a14eb891c9f3affebe0535456a"><div class="ttname"><a href="class_t_xsh_cell.html#afabf22a14eb891c9f3affebe0535456a">TXshCell::getSoundTextLevel</a></div><div class="ttdeci">TXshSoundTextLevel * getSoundTextLevel() const</div><div class="ttdef"><b>Definition:</b> txshcell.cpp:31</div></div>
<div class="ttc" id="aclass_t_xsh_level_html_a3a59fb1bd3261baee4e889a9edbf0ae8"><div class="ttname"><a href="class_t_xsh_level.html#a3a59fb1bd3261baee4e889a9edbf0ae8">TXshLevel::getName</a></div><div class="ttdeci">std::wstring getName() const</div><div class="ttdoc">Return level name.</div><div class="ttdef"><b>Definition:</b> txshlevel.h:115</div></div>
<div class="ttc" id="aclass_t_xsh_sound_column_html"><div class="ttname"><a href="class_t_xsh_sound_column.html">TXshSoundColumn</a></div><div class="ttdef"><b>Definition:</b> txshsoundcolumn.h:96</div></div>
<div class="ttc" id="aclass_t_xsh_sound_text_column_html"><div class="ttname"><a href="class_t_xsh_sound_text_column.html">TXshSoundTextColumn</a></div><div class="ttdef"><b>Definition:</b> txshsoundtextcolumn.h:27</div></div>
<div class="ttc" id="aclass_t_xsh_zerary_fx_column_html"><div class="ttname"><a href="class_t_xsh_zerary_fx_column.html">TXshZeraryFxColumn</a></div><div class="ttdef"><b>Definition:</b> txshzeraryfxcolumn.h:35</div></div>
<div class="ttc" id="aclass_xsheet_viewer_html_ae0642aaf7b9dae8978c26f20ea74ed49"><div class="ttname"><a href="class_xsheet_viewer.html#ae0642aaf7b9dae8978c26f20ea74ed49">XsheetViewer::getFrameNumberWithLetters</a></div><div class="ttdeci">QString getFrameNumberWithLetters(int frame)</div><div class="ttdef"><b>Definition:</b> xsheetviewer.cpp:1712</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae025276e19351e2b2430720383ba1518" name="ae025276e19351e2b2430720383ba1518"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae025276e19351e2b2430720383ba1518">&#9670;&nbsp;</a></span>mousePressEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::mousePressEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3213</span>                                                 {</div>
<div class="line"><span class="lineno"> 3214</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_orientation.html">Orientation</a> *o = m_viewer-&gt;orientation();</div>
<div class="line"><span class="lineno"> 3215</span> </div>
<div class="line"><span class="lineno"> 3216</span>  m_viewer-&gt;setQtModifiers(event-&gt;modifiers());</div>
<div class="line"><span class="lineno"> 3217</span>  assert(!m_isPanning);</div>
<div class="line"><span class="lineno"> 3218</span>  m_isMousePressed = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3219</span>  QPoint frameAdj  = m_viewer-&gt;getFrameZoomAdjustment();</div>
<div class="line"><span class="lineno"> 3220</span>  <span class="keywordflow">if</span> (event-&gt;button() == Qt::LeftButton) {</div>
<div class="line"><span class="lineno"> 3221</span>    assert(getDragTool() == 0);</div>
<div class="line"><span class="lineno"> 3222</span> </div>
<div class="line"><span class="lineno"> 3223</span>    <a class="code hl_class" href="class_t_point_t.html">TPoint</a> pos(event-&gt;pos().x(), event-&gt;pos().y());</div>
<div class="line"><span class="lineno"> 3224</span>    <a class="code hl_class" href="class_cell_position.html">CellPosition</a> cellPosition = m_viewer-&gt;xyToPosition(event-&gt;pos());</div>
<div class="line"><span class="lineno"> 3225</span>    <span class="keywordtype">int</span> row                   = cellPosition.frame();</div>
<div class="line"><span class="lineno"> 3226</span>    <span class="keywordtype">int</span> col                   = cellPosition.layer();</div>
<div class="line"><span class="lineno"> 3227</span>    QPoint cellTopLeft        = m_viewer-&gt;positionToXY(<a class="code hl_class" href="class_cell_position.html">CellPosition</a>(row, col));</div>
<div class="line"><span class="lineno"> 3228</span>    QPoint mouseInCell        = <span class="keyword">event</span>-&gt;pos() - cellTopLeft;</div>
<div class="line"><span class="lineno"> 3229</span>    <span class="keywordtype">int</span> x                     = mouseInCell.x();  <span class="comment">// where in the cell click is</span></div>
<div class="line"><span class="lineno"> 3230</span> </div>
<div class="line"><span class="lineno"> 3231</span>    <span class="comment">// Check if a note is clicked</span></div>
<div class="line"><span class="lineno"> 3232</span>    <a class="code hl_class" href="class_t_xsh_note_set.html">TXshNoteSet</a> *notes = m_viewer-&gt;getXsheet()-&gt;getNotes();</div>
<div class="line"><span class="lineno"> 3233</span>    <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno"> 3234</span>    <span class="keywordflow">for</span> (i = notes-&gt;getCount() - 1; i &gt;= 0; i--) {</div>
<div class="line"><span class="lineno"> 3235</span>      <span class="keywordtype">int</span> r       = notes-&gt;getNoteRow(i);</div>
<div class="line"><span class="lineno"> 3236</span>      <span class="keywordtype">int</span> c       = notes-&gt;getNoteCol(i);</div>
<div class="line"><span class="lineno"> 3237</span>      QPoint xy   = m_viewer-&gt;positionToXY(<a class="code hl_class" href="class_cell_position.html">CellPosition</a>(r, c));</div>
<div class="line"><span class="lineno"> 3238</span>      <a class="code hl_class" href="class_t_point_t.html">TPointD</a> pos = notes-&gt;getNotePos(i) + <a class="code hl_class" href="class_t_point_t.html">TPointD</a>(xy.x(), xy.y());</div>
<div class="line"><span class="lineno"> 3239</span>      QRect rect  = o-&gt;rect(PredefinedRect::NOTE_ICON).translated(pos.x, pos.y);</div>
<div class="line"><span class="lineno"> 3240</span>      <span class="keywordflow">if</span> (!rect.contains(event-&gt;pos())) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3241</span>      setDragTool(XsheetGUI::DragTool::makeNoteMoveTool(m_viewer));</div>
<div class="line"><span class="lineno"> 3242</span>      m_viewer-&gt;setCurrentNoteIndex(i);</div>
<div class="line"><span class="lineno"> 3243</span>      m_viewer-&gt;dragToolClick(event);</div>
<div class="line"><span class="lineno"> 3244</span>      <span class="keyword">event</span>-&gt;accept();</div>
<div class="line"><span class="lineno"> 3245</span>      update();</div>
<div class="line"><span class="lineno"> 3246</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3247</span>    }</div>
<div class="line"><span class="lineno"> 3248</span>    <span class="comment">// If I have not clicked on a note, and there&#39;s a note selected, deselect it</span></div>
<div class="line"><span class="lineno"> 3249</span>    <span class="keywordflow">if</span> (m_viewer-&gt;getCurrentNoteIndex() &gt;= 0) m_viewer-&gt;setCurrentNoteIndex(-1);</div>
<div class="line"><span class="lineno"> 3250</span> </div>
<div class="line"><span class="lineno"> 3251</span>    <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh       = m_viewer-&gt;getXsheet();</div>
<div class="line"><span class="lineno"> 3252</span>    <a class="code hl_class" href="class_t_xsh_column.html">TXshColumn</a> *column = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">getColumn</a>(col);</div>
<div class="line"><span class="lineno"> 3253</span> </div>
<div class="line"><span class="lineno"> 3254</span>    <span class="comment">// Check if it&#39;s the sound column</span></div>
<div class="line"><span class="lineno"> 3255</span>    <span class="keywordtype">bool</span> isSoundColumn = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3256</span>    <span class="keywordflow">if</span> (column) {</div>
<div class="line"><span class="lineno"> 3257</span>      <a class="code hl_class" href="class_t_xsh_sound_column.html">TXshSoundColumn</a> *soundColumn = column-&gt;getSoundColumn();</div>
<div class="line"><span class="lineno"> 3258</span>      isSoundColumn                = (!soundColumn) ? <span class="keyword">false</span> : <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3259</span>    }</div>
<div class="line"><span class="lineno"> 3260</span> </div>
<div class="line"><span class="lineno"> 3261</span>    <span class="comment">// TObjectHandle *oh = TApp::instance()-&gt;getCurrentObject();</span></div>
<div class="line"><span class="lineno"> 3262</span>    <span class="comment">// oh-&gt;setObjectId(m_viewer-&gt;getObjectId(col));</span></div>
<div class="line"><span class="lineno"> 3263</span> </div>
<div class="line"><span class="lineno"> 3264</span>    <span class="comment">// gmt, 28/12/2009. Non dovrebbe essere necessario, visto che dopo</span></div>
<div class="line"><span class="lineno"> 3265</span>    <span class="comment">// verra cambiata la colonna e quindi l&#39;oggetto corrente</span></div>
<div class="line"><span class="lineno"> 3266</span>    <span class="comment">// Inoltre, facendolo qui, c&#39;e&#39; un problema con il calcolo del dpi</span></div>
<div class="line"><span class="lineno"> 3267</span>    <span class="comment">// (cfr. SceneViewer::onLevelChanged()): setObjectId() chiama (in cascata)</span></div>
<div class="line"><span class="lineno"> 3268</span>    <span class="comment">// onLevelChanged(), ma la colonna corrente risulta ancora quella di prima e</span></div>
<div class="line"><span class="lineno"> 3269</span>    <span class="comment">// quindi</span></div>
<div class="line"><span class="lineno"> 3270</span>    <span class="comment">// il dpi viene calcolato male. Quando si cambia la colonna l&#39;oggetto</span></div>
<div class="line"><span class="lineno"> 3271</span>    <span class="comment">// corrente risulta</span></div>
<div class="line"><span class="lineno"> 3272</span>    <span class="comment">// gia&#39; aggiornato e quindi non ci sono altre chiamate a onLevelChanged()</span></div>
<div class="line"><span class="lineno"> 3273</span>    <span class="comment">// cfr bug#5235</span></div>
<div class="line"><span class="lineno"> 3274</span> </div>
<div class="line"><span class="lineno"> 3275</span>    <a class="code hl_class" href="class_t_stage_object.html">TStageObject</a> *pegbar = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">getStageObject</a>(m_viewer-&gt;<a class="code hl_function" href="class_xsheet_viewer.html#acef259f8c33344981f8c218590bca5d9">getObjectId</a>(col));</div>
<div class="line"><span class="lineno"> 3276</span> </div>
<div class="line"><span class="lineno"> 3277</span>    <span class="keywordflow">if</span> (Preferences::instance()-&gt;isShowKeyframesOnXsheetCellAreaEnabled()) {</div>
<div class="line"><span class="lineno"> 3278</span>      <span class="comment">// only if key frame area is active</span></div>
<div class="line"><span class="lineno"> 3279</span>      <span class="keywordtype">int</span> k0, k1;</div>
<div class="line"><span class="lineno"> 3280</span>      <span class="keywordtype">bool</span> isKeyframeFrame = pegbar &amp;&amp; pegbar-&gt;getKeyframeRange(k0, k1) &amp;&amp;</div>
<div class="line"><span class="lineno"> 3281</span>                             (k1 &gt; k0 || k0 == row) &amp;&amp; k0 &lt;= row &amp;&amp;</div>
<div class="line"><span class="lineno"> 3282</span>                             row &lt;= k1 + 1;</div>
<div class="line"><span class="lineno"> 3283</span>      <span class="keywordtype">bool</span> accept = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3284</span> </div>
<div class="line"><span class="lineno"> 3285</span>      <span class="keywordflow">if</span> (isKeyframeFrame &amp;&amp;</div>
<div class="line"><span class="lineno"> 3286</span>          isKeyFrameArea(col, row,</div>
<div class="line"><span class="lineno"> 3287</span>                         mouseInCell)) {  <span class="comment">// They are in the keyframe selection</span></div>
<div class="line"><span class="lineno"> 3288</span>        <span class="keywordflow">if</span> (pegbar-&gt;<a class="code hl_function" href="class_t_stage_object.html#af2c8c37f71b2b2e2c2a15c6eb73b8b38">isKeyframe</a>(row))      <span class="comment">// in the keyframe</span></div>
<div class="line"><span class="lineno"> 3289</span>        {</div>
<div class="line"><span class="lineno"> 3290</span>          m_viewer-&gt;setCurrentRow(</div>
<div class="line"><span class="lineno"> 3291</span>              row);  <span class="comment">// If you click on the key, change the current row as well</span></div>
<div class="line"><span class="lineno"> 3292</span>          setDragTool(XsheetGUI::DragTool::makeKeyframeMoverTool(m_viewer));</div>
<div class="line"><span class="lineno"> 3293</span>          accept = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3294</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3295</span>          <span class="keywordtype">int</span> r0, r1;</div>
<div class="line"><span class="lineno"> 3296</span>          <span class="keywordtype">double</span> e0, e1;</div>
<div class="line"><span class="lineno"> 3297</span>          <span class="keywordtype">int</span> rh0, rh1;</div>
<div class="line"><span class="lineno"> 3298</span>          <span class="keywordflow">if</span> (pegbar-&gt;getKeyframeSpan(row, r0, e0, r1, e1) &amp;&amp;</div>
<div class="line"><span class="lineno"> 3299</span>              getEaseHandles(r0, r1, e0, e1, rh0, rh1)) {</div>
<div class="line"><span class="lineno"> 3300</span>            <span class="keywordflow">if</span> (rh0 == row) {  <span class="comment">// in a keyframe handle</span></div>
<div class="line"><span class="lineno"> 3301</span>              setDragTool(XsheetGUI::DragTool::makeKeyFrameHandleMoverTool(</div>
<div class="line"><span class="lineno"> 3302</span>                  m_viewer, <span class="keyword">true</span>, r0));</div>
<div class="line"><span class="lineno"> 3303</span>              accept = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3304</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rh1 == row) {  <span class="comment">// in a keyframe handle</span></div>
<div class="line"><span class="lineno"> 3305</span>              setDragTool(XsheetGUI::DragTool::makeKeyFrameHandleMoverTool(</div>
<div class="line"><span class="lineno"> 3306</span>                  m_viewer, <span class="keyword">false</span>, r1));</div>
<div class="line"><span class="lineno"> 3307</span>              accept = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3308</span>            }</div>
<div class="line"><span class="lineno"> 3309</span>          }</div>
<div class="line"><span class="lineno"> 3310</span>        }</div>
<div class="line"><span class="lineno"> 3311</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isKeyframeFrame &amp;&amp; row == k1 + 1 &amp;&amp;</div>
<div class="line"><span class="lineno"> 3312</span>                 o-&gt;rect((col &lt; 0) ? PredefinedRect::CAMERA_LOOP_ICON</div>
<div class="line"><span class="lineno"> 3313</span>                                   : PredefinedRect::LOOP_ICON)</div>
<div class="line"><span class="lineno"> 3314</span>                     .contains(mouseInCell)) {  <span class="comment">// cycle toggle</span></div>
<div class="line"><span class="lineno"> 3315</span>        CycleUndo *undo = <span class="keyword">new</span> CycleUndo(pegbar, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 3316</span>        undo-&gt;redo();</div>
<div class="line"><span class="lineno"> 3317</span>        TUndoManager::manager()-&gt;add(undo);</div>
<div class="line"><span class="lineno"> 3318</span>        accept = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3319</span>      }</div>
<div class="line"><span class="lineno"> 3320</span>      <span class="keywordflow">if</span> (accept) {</div>
<div class="line"><span class="lineno"> 3321</span>        m_viewer-&gt;dragToolClick(event);</div>
<div class="line"><span class="lineno"> 3322</span>        <span class="keyword">event</span>-&gt;accept();</div>
<div class="line"><span class="lineno"> 3323</span>        update();</div>
<div class="line"><span class="lineno"> 3324</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3325</span>      }</div>
<div class="line"><span class="lineno"> 3326</span>      <span class="comment">// keep searching</span></div>
<div class="line"><span class="lineno"> 3327</span>    }</div>
<div class="line"><span class="lineno"> 3328</span> </div>
<div class="line"><span class="lineno"> 3329</span>    <span class="keywordflow">if</span> (m_levelExtenderRect.contains(pos.x, pos.y)) {</div>
<div class="line"><span class="lineno"> 3330</span>      m_viewer-&gt;getKeyframeSelection()-&gt;selectNone();</div>
<div class="line"><span class="lineno"> 3331</span>      <span class="keywordflow">if</span> (event-&gt;modifiers() &amp; Qt::ControlModifier)</div>
<div class="line"><span class="lineno"> 3332</span>        setDragTool(</div>
<div class="line"><span class="lineno"> 3333</span>            XsheetGUI::DragTool::makeLevelExtenderTool(m_viewer, <span class="keyword">false</span>));</div>
<div class="line"><span class="lineno"> 3334</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3335</span>        setDragTool(XsheetGUI::DragTool::makeLevelExtenderTool(m_viewer, <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno"> 3336</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event-&gt;modifiers() &amp; Qt::ControlModifier &amp;&amp;</div>
<div class="line"><span class="lineno"> 3337</span>               m_upperLevelExtenderRect.contains(pos.x, pos.y)) {</div>
<div class="line"><span class="lineno"> 3338</span>      m_viewer-&gt;getKeyframeSelection()-&gt;selectNone();</div>
<div class="line"><span class="lineno"> 3339</span>      setDragTool(</div>
<div class="line"><span class="lineno"> 3340</span>          XsheetGUI::DragTool::makeLevelExtenderTool(m_viewer, <span class="keyword">false</span>, <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno"> 3341</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((!xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(row, col).<a class="code hl_function" href="class_t_xsh_cell.html#a5d20229e7bcd19957b123959e58a833e">isEmpty</a>()) &amp;&amp;</div>
<div class="line"><span class="lineno"> 3342</span>               o-&gt;rect(PredefinedRect::DRAG_AREA)</div>
<div class="line"><span class="lineno"> 3343</span>                   .adjusted(0, 0, -frameAdj.x(), -frameAdj.y())</div>
<div class="line"><span class="lineno"> 3344</span>                   .contains(mouseInCell)) {</div>
<div class="line"><span class="lineno"> 3345</span>      <a class="code hl_class" href="class_t_xsh_column.html">TXshColumn</a> *column = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a3e1a216c019a0ebdf73d95acac95d8d0">getColumn</a>(col);</div>
<div class="line"><span class="lineno"> 3346</span>      <span class="keywordflow">if</span> (column &amp;&amp; !m_viewer-&gt;getCellSelection()-&gt;isCellSelected(row, col)) {</div>
<div class="line"><span class="lineno"> 3347</span>        <span class="keywordtype">int</span> r0, r1;</div>
<div class="line"><span class="lineno"> 3348</span>        column-&gt;getLevelRange(row, r0, r1);</div>
<div class="line"><span class="lineno"> 3349</span>        <span class="keywordflow">if</span> (event-&gt;modifiers() &amp; Qt::ControlModifier) {</div>
<div class="line"><span class="lineno"> 3350</span>          m_viewer-&gt;getCellKeyframeSelection()-&gt;makeCurrent();</div>
<div class="line"><span class="lineno"> 3351</span>          m_viewer-&gt;getCellKeyframeSelection()-&gt;<a class="code hl_function" href="class_t_cell_keyframe_selection.html#a398f9b96df010d52ae8137d52f7a60af">selectCellsKeyframes</a>(r0, col,</div>
<div class="line"><span class="lineno"> 3352</span>                                                                     r1, col);</div>
<div class="line"><span class="lineno"> 3353</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3354</span>          m_viewer-&gt;getKeyframeSelection()-&gt;selectNone();</div>
<div class="line"><span class="lineno"> 3355</span>          m_viewer-&gt;getCellSelection()-&gt;makeCurrent();</div>
<div class="line"><span class="lineno"> 3356</span>          m_viewer-&gt;getCellSelection()-&gt;<a class="code hl_function" href="class_t_cell_selection.html#ac081c8305a9b9269fbf82eb0c9e06bc3">selectCells</a>(r0, col, r1, col);</div>
<div class="line"><span class="lineno"> 3357</span>        }</div>
<div class="line"><span class="lineno"> 3358</span>        <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a6e0ee1978807a89009571ed5ce44323b">getCurrentSelection</a>()-&gt;notifySelectionChanged();</div>
<div class="line"><span class="lineno"> 3359</span>      }</div>
<div class="line"><span class="lineno"> 3360</span>      <a class="code hl_class" href="class_t_selection.html">TSelection</a> *selection =</div>
<div class="line"><span class="lineno"> 3361</span>          <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a6e0ee1978807a89009571ed5ce44323b">getCurrentSelection</a>()-&gt;getSelection();</div>
<div class="line"><span class="lineno"> 3362</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="class_t_cell_keyframe_selection.html">TCellKeyframeSelection</a> *cellKeyframeSelection =</div>
<div class="line"><span class="lineno"> 3363</span>              <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_t_cell_keyframe_selection.html">TCellKeyframeSelection</a> *<span class="keyword">&gt;</span>(selection))</div>
<div class="line"><span class="lineno"> 3364</span>        setDragTool(XsheetGUI::DragTool::makeCellKeyframeMoverTool(m_viewer));</div>
<div class="line"><span class="lineno"> 3365</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3366</span>        setDragTool(XsheetGUI::DragTool::makeLevelMoverTool(m_viewer));</div>
<div class="line"><span class="lineno"> 3367</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3368</span>      m_viewer-&gt;getKeyframeSelection()-&gt;selectNone();</div>
<div class="line"><span class="lineno"> 3369</span>      <span class="keywordflow">if</span> (isSoundColumn &amp;&amp; o-&gt;rect(PredefinedRect::PREVIEW_TRACK)</div>
<div class="line"><span class="lineno"> 3370</span>                               .adjusted(0, 0, -frameAdj.x(), -frameAdj.y())</div>
<div class="line"><span class="lineno"> 3371</span>                               .contains(mouseInCell))</div>
<div class="line"><span class="lineno"> 3372</span>        setDragTool(XsheetGUI::DragTool::makeSoundScrubTool(</div>
<div class="line"><span class="lineno"> 3373</span>            m_viewer, column-&gt;getSoundColumn()));</div>
<div class="line"><span class="lineno"> 3374</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isSoundColumn &amp;&amp;</div>
<div class="line"><span class="lineno"> 3375</span>               rectContainsPos(m_soundLevelModifyRects, event-&gt;pos()))</div>
<div class="line"><span class="lineno"> 3376</span>        setDragTool(XsheetGUI::DragTool::makeSoundLevelModifierTool(m_viewer));</div>
<div class="line"><span class="lineno"> 3377</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3378</span>        setDragTool(XsheetGUI::DragTool::makeSelectionTool(m_viewer));</div>
<div class="line"><span class="lineno"> 3379</span>    }</div>
<div class="line"><span class="lineno"> 3380</span>    m_viewer-&gt;dragToolClick(event);</div>
<div class="line"><span class="lineno"> 3381</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event-&gt;button() == Qt::MidButton) {</div>
<div class="line"><span class="lineno"> 3382</span>    m_pos       = <span class="keyword">event</span>-&gt;pos();</div>
<div class="line"><span class="lineno"> 3383</span>    m_isPanning = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3384</span>  }</div>
<div class="line"><span class="lineno"> 3385</span>  <span class="keyword">event</span>-&gt;accept();</div>
<div class="line"><span class="lineno"> 3386</span>  update();</div>
<div class="line"><span class="lineno"> 3387</span>}</div>
<div class="ttc" id="aclass_t_app_html_a6e0ee1978807a89009571ed5ce44323b"><div class="ttname"><a href="class_t_app.html#a6e0ee1978807a89009571ed5ce44323b">TApp::getCurrentSelection</a></div><div class="ttdeci">TSelectionHandle * getCurrentSelection() const override</div><div class="ttdef"><b>Definition:</b> tapp.h:134</div></div>
<div class="ttc" id="aclass_t_cell_keyframe_selection_html"><div class="ttname"><a href="class_t_cell_keyframe_selection.html">TCellKeyframeSelection</a></div><div class="ttdef"><b>Definition:</b> cellkeyframeselection.h:18</div></div>
<div class="ttc" id="aclass_t_cell_keyframe_selection_html_a398f9b96df010d52ae8137d52f7a60af"><div class="ttname"><a href="class_t_cell_keyframe_selection.html#a398f9b96df010d52ae8137d52f7a60af">TCellKeyframeSelection::selectCellsKeyframes</a></div><div class="ttdeci">void selectCellsKeyframes(int r0, int c0, int r1, int c1)</div><div class="ttdef"><b>Definition:</b> cellkeyframeselection.cpp:113</div></div>
<div class="ttc" id="aclass_t_cell_selection_html_ac081c8305a9b9269fbf82eb0c9e06bc3"><div class="ttname"><a href="class_t_cell_selection.html#ac081c8305a9b9269fbf82eb0c9e06bc3">TCellSelection::selectCells</a></div><div class="ttdeci">void selectCells(int r0, int c0, int r1, int c1)</div><div class="ttdef"><b>Definition:</b> cellselection.cpp:1534</div></div>
<div class="ttc" id="aclass_t_selection_html"><div class="ttname"><a href="class_t_selection.html">TSelection</a></div><div class="ttdef"><b>Definition:</b> selection.h:26</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa0f5b71c06e8170b16c1d33c5e288855" name="aa0f5b71c06e8170b16c1d33c5e288855"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0f5b71c06e8170b16c1d33c5e288855">&#9670;&nbsp;</a></span>mouseReleaseEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::mouseReleaseEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3522</span>                                                   {</div>
<div class="line"><span class="lineno"> 3523</span>  m_viewer-&gt;setQtModifiers(0);</div>
<div class="line"><span class="lineno"> 3524</span>  m_isMousePressed = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3525</span>  m_viewer-&gt;stopAutoPan();</div>
<div class="line"><span class="lineno"> 3526</span>  m_isPanning = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3527</span>  m_viewer-&gt;dragToolRelease(event);</div>
<div class="line"><span class="lineno"> 3528</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a27a66d5adde4142ac1c1b946342adb1b" name="a27a66d5adde4142ac1c1b946342adb1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27a66d5adde4142ac1c1b946342adb1b">&#9670;&nbsp;</a></span>onControlPressed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::onControlPressed </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>pressed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3740</span>                                            {</div>
<div class="line"><span class="lineno"> 3741</span>  isCtrlPressed = pressed;</div>
<div class="line"><span class="lineno"> 3742</span>  update();</div>
<div class="line"><span class="lineno"> 3743</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8834bc87ebb88a6662b380587295f785" name="a8834bc87ebb88a6662b380587295f785"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8834bc87ebb88a6662b380587295f785">&#9670;&nbsp;</a></span>onReplaceByCastedLevel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::onReplaceByCastedLevel </td>
          <td>(</td>
          <td class="paramtype">QAction *&#160;</td>
          <td class="paramname"><em>action</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >replace level with another level in the cast </p>
<div class="fragment"><div class="line"><span class="lineno"> 4004</span>                                                     {</div>
<div class="line"><span class="lineno"> 4005</span>  std::wstring levelName = action-&gt;data().toString().toStdWString();</div>
<div class="line"><span class="lineno"> 4006</span>  <a class="code hl_class" href="class_t_xsh_level.html">TXshLevel</a> *level =</div>
<div class="line"><span class="lineno"> 4007</span>      <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#abbbf1fae564e9e510826eda4f6637d20">getCurrentScene</a>()-&gt;getScene()-&gt;<a class="code hl_function" href="class_toonz_scene.html#ac1a8bf0d2cec4f59c87b0001991264b5">getLevelSet</a>()-&gt;getLevel(</div>
<div class="line"><span class="lineno"> 4008</span>          levelName);</div>
<div class="line"><span class="lineno"> 4009</span> </div>
<div class="line"><span class="lineno"> 4010</span>  <span class="keywordflow">if</span> (!level) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4011</span>  <a class="code hl_class" href="class_t_cell_selection.html">TCellSelection</a> *cellSelection = m_viewer-&gt;getCellSelection();</div>
<div class="line"><span class="lineno"> 4012</span>  <span class="keywordflow">if</span> (cellSelection-&gt;isEmpty()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4013</span>  <span class="keywordtype">int</span> r0, c0, r1, c1;</div>
<div class="line"><span class="lineno"> 4014</span>  cellSelection-&gt;getSelectedCells(r0, c0, r1, c1);</div>
<div class="line"><span class="lineno"> 4015</span> </div>
<div class="line"><span class="lineno"> 4016</span>  <span class="keywordtype">bool</span> changed = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 4017</span> </div>
<div class="line"><span class="lineno"> 4018</span>  <a class="code hl_class" href="class_t_undo_manager.html">TUndoManager</a> *um = TUndoManager::manager();</div>
<div class="line"><span class="lineno"> 4019</span>  um-&gt;beginBlock();</div>
<div class="line"><span class="lineno"> 4020</span> </div>
<div class="line"><span class="lineno"> 4021</span>  <a class="code hl_class" href="class_t_xsheet.html">TXsheet</a> *xsh = <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()-&gt;getXsheet();</div>
<div class="line"><span class="lineno"> 4022</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = c0; c &lt;= c1; c++) {</div>
<div class="line"><span class="lineno"> 4023</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> r = r0; r &lt;= r1; r++) {</div>
<div class="line"><span class="lineno"> 4024</span>      <a class="code hl_class" href="class_t_xsh_cell.html">TXshCell</a> cell = xsh-&gt;<a class="code hl_function" href="class_t_xsheet.html#a1ae81edf03bc7527176c84478c350f57">getCell</a>(r, c);</div>
<div class="line"><span class="lineno"> 4025</span>      <span class="keywordflow">if</span> (!cell.m_level.getPointer() || cell.m_level.getPointer() == level)</div>
<div class="line"><span class="lineno"> 4026</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 4027</span> </div>
<div class="line"><span class="lineno"> 4028</span>      <a class="code hl_class" href="class_t_xsh_cell.html">TXshCell</a> oldCell = cell;</div>
<div class="line"><span class="lineno"> 4029</span> </div>
<div class="line"><span class="lineno"> 4030</span>      cell.m_level = <a class="code hl_class" href="class_t_smart_pointer_t.html">TXshLevelP</a>(level);</div>
<div class="line"><span class="lineno"> 4031</span>      xsh-&gt;setCell(r, c, cell);</div>
<div class="line"><span class="lineno"> 4032</span> </div>
<div class="line"><span class="lineno"> 4033</span>      RenameCellUndo *undo = <span class="keyword">new</span> RenameCellUndo(r, c, oldCell, cell);</div>
<div class="line"><span class="lineno"> 4034</span>      um-&gt;add(undo);</div>
<div class="line"><span class="lineno"> 4035</span> </div>
<div class="line"><span class="lineno"> 4036</span>      changed = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 4037</span>    }</div>
<div class="line"><span class="lineno"> 4038</span>  }</div>
<div class="line"><span class="lineno"> 4039</span> </div>
<div class="line"><span class="lineno"> 4040</span>  <span class="keywordflow">if</span> (changed) <a class="code hl_function" href="class_t_app.html#a24088f8647d5d9447fcec6b9b9bbf9eb">TApp::instance</a>()-&gt;<a class="code hl_function" href="class_t_app.html#a13f509e753824cb0500787f68bb51a09">getCurrentXsheet</a>()-&gt;notifyXsheetChanged();</div>
<div class="line"><span class="lineno"> 4041</span> </div>
<div class="line"><span class="lineno"> 4042</span>  um-&gt;endBlock();</div>
<div class="line"><span class="lineno"> 4043</span>}</div>
<div class="ttc" id="aclass_t_cell_selection_html"><div class="ttname"><a href="class_t_cell_selection.html">TCellSelection</a></div><div class="ttdef"><b>Definition:</b> cellselection.h:19</div></div>
<div class="ttc" id="aclass_t_smart_pointer_t_html"><div class="ttname"><a href="class_t_smart_pointer_t.html">TSmartPointerT&lt; TXshLevel &gt;</a></div></div>
<div class="ttc" id="aclass_t_undo_manager_html"><div class="ttname"><a href="class_t_undo_manager.html">TUndoManager</a></div><div class="ttdef"><b>Definition:</b> tundo.h:63</div></div>
<div class="ttc" id="aclass_t_xsh_level_html"><div class="ttname"><a href="class_t_xsh_level.html">TXshLevel</a></div><div class="ttdoc">The TXshLevel class is the base class of level managers in xsheet.</div><div class="ttdef"><b>Definition:</b> txshlevel.h:50</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00233">TXsheet::getCell()</a>, <a class="el" href="#l00106">TApp::getCurrentScene()</a>, <a class="el" href="#l00110">TApp::getCurrentXsheet()</a>, <a class="el" href="#l00093">ToonzScene::getLevelSet()</a>, and <a class="el" href="#l00215">TApp::instance()</a>.</p>

</div>
</div>
<a id="a1075cc38246704488fc056df58e3e864" name="a1075cc38246704488fc056df58e3e864"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1075cc38246704488fc056df58e3e864">&#9670;&nbsp;</a></span>onSetCellMark</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::onSetCellMark </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4251</span>                             {</div>
<div class="line"><span class="lineno"> 4252</span>  QAction *senderAction = qobject_cast&lt;QAction *&gt;(sender());</div>
<div class="line"><span class="lineno"> 4253</span>  assert(senderAction);</div>
<div class="line"><span class="lineno"> 4254</span>  QList&lt;QVariant&gt; params = senderAction-&gt;data().toList();</div>
<div class="line"><span class="lineno"> 4255</span>  assert(params.count() == 3);</div>
<div class="line"><span class="lineno"> 4256</span>  <span class="keywordtype">int</span> row               = params[0].toInt();</div>
<div class="line"><span class="lineno"> 4257</span>  <span class="keywordtype">int</span> col               = params[1].toInt();</div>
<div class="line"><span class="lineno"> 4258</span>  <span class="keywordtype">int</span> <span class="keywordtype">id</span>                = params[2].toInt();</div>
<div class="line"><span class="lineno"> 4259</span>  SetCellMarkUndo *undo = <span class="keyword">new</span> SetCellMarkUndo(row, col, <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 4260</span>  undo-&gt;redo();</div>
<div class="line"><span class="lineno"> 4261</span>  TUndoManager::manager()-&gt;add(undo);</div>
<div class="line"><span class="lineno"> 4262</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9dd399c0ad4dca36c4c66c6f8031bb30" name="a9dd399c0ad4dca36c4c66c6f8031bb30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dd399c0ad4dca36c4c66c6f8031bb30">&#9670;&nbsp;</a></span>onStepChanged</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::onStepChanged </td>
          <td>(</td>
          <td class="paramtype">QAction *&#160;</td>
          <td class="paramname"><em>act</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4172</span>                                         {</div>
<div class="line"><span class="lineno"> 4173</span>  QList&lt;QVariant&gt; list = act-&gt;data().toList();</div>
<div class="line"><span class="lineno"> 4174</span>  <span class="keywordtype">int</span> step             = list.at(0).toInt();</div>
<div class="line"><span class="lineno"> 4175</span>  <span class="keywordtype">int</span> frame            = list.at(1).toInt();</div>
<div class="line"><span class="lineno"> 4176</span>  <span class="keywordtype">int</span> col              = list.at(2).toInt();</div>
<div class="line"><span class="lineno"> 4177</span> </div>
<div class="line"><span class="lineno"> 4178</span>  TUndoManager::manager()-&gt;beginBlock();</div>
<div class="line"><span class="lineno"> 4179</span>  <a class="code hl_class" href="class_t_stage_object.html">TStageObject</a> *stageObject =</div>
<div class="line"><span class="lineno"> 4180</span>      m_viewer-&gt;getXsheet()-&gt;<a class="code hl_function" href="class_t_xsheet.html#a13d9b9c08ca8dde39769f5644e046ee5">getStageObject</a>(m_viewer-&gt;<a class="code hl_function" href="class_xsheet_viewer.html#acef259f8c33344981f8c218590bca5d9">getObjectId</a>(col));</div>
<div class="line"><span class="lineno"> 4181</span>  <a class="code hl_class" href="class_t_double_param.html">TDoubleParam</a> *param = stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a08806eb331bdede66bb3113b1642a6ad">TStageObject::T_Angle</a>);</div>
<div class="line"><span class="lineno"> 4182</span>  <span class="keywordtype">int</span> keyFrameIndex   = param-&gt;getClosestKeyframe(frame);</div>
<div class="line"><span class="lineno"> 4183</span>  <span class="keywordflow">if</span> (keyFrameIndex &gt;= 0) {</div>
<div class="line"><span class="lineno"> 4184</span>    setParamStep(keyFrameIndex, step,</div>
<div class="line"><span class="lineno"> 4185</span>                 stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a08806eb331bdede66bb3113b1642a6ad">TStageObject::T_Angle</a>));</div>
<div class="line"><span class="lineno"> 4186</span>  }</div>
<div class="line"><span class="lineno"> 4187</span> </div>
<div class="line"><span class="lineno"> 4188</span>  param         = stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a23087217a2f7436152fa0ee4b2362448">TStageObject::T_X</a>);</div>
<div class="line"><span class="lineno"> 4189</span>  keyFrameIndex = param-&gt;getClosestKeyframe(frame);</div>
<div class="line"><span class="lineno"> 4190</span>  <span class="keywordflow">if</span> (keyFrameIndex &gt;= 0) {</div>
<div class="line"><span class="lineno"> 4191</span>    setParamStep(keyFrameIndex, step, stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a23087217a2f7436152fa0ee4b2362448">TStageObject::T_X</a>));</div>
<div class="line"><span class="lineno"> 4192</span>  }</div>
<div class="line"><span class="lineno"> 4193</span>  param         = stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a45e2b29d25f50909ebd06d1bd9c1944a">TStageObject::T_Y</a>);</div>
<div class="line"><span class="lineno"> 4194</span>  keyFrameIndex = param-&gt;getClosestKeyframe(frame);</div>
<div class="line"><span class="lineno"> 4195</span>  <span class="keywordflow">if</span> (keyFrameIndex &gt;= 0) {</div>
<div class="line"><span class="lineno"> 4196</span>    setParamStep(keyFrameIndex, step, stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a45e2b29d25f50909ebd06d1bd9c1944a">TStageObject::T_Y</a>));</div>
<div class="line"><span class="lineno"> 4197</span>  }</div>
<div class="line"><span class="lineno"> 4198</span>  param         = stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a6c8e9e0e35cdf4d4a5427a00eaeb255d">TStageObject::T_Z</a>);</div>
<div class="line"><span class="lineno"> 4199</span>  keyFrameIndex = param-&gt;getClosestKeyframe(frame);</div>
<div class="line"><span class="lineno"> 4200</span>  <span class="keywordflow">if</span> (keyFrameIndex &gt;= 0) {</div>
<div class="line"><span class="lineno"> 4201</span>    setParamStep(keyFrameIndex, step, stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a6c8e9e0e35cdf4d4a5427a00eaeb255d">TStageObject::T_Z</a>));</div>
<div class="line"><span class="lineno"> 4202</span>  }</div>
<div class="line"><span class="lineno"> 4203</span>  param         = stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a426bfbbf201379648fff0257dd067289">TStageObject::T_SO</a>);</div>
<div class="line"><span class="lineno"> 4204</span>  keyFrameIndex = param-&gt;getClosestKeyframe(frame);</div>
<div class="line"><span class="lineno"> 4205</span>  <span class="keywordflow">if</span> (keyFrameIndex &gt;= 0) {</div>
<div class="line"><span class="lineno"> 4206</span>    setParamStep(keyFrameIndex, step,</div>
<div class="line"><span class="lineno"> 4207</span>                 stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a426bfbbf201379648fff0257dd067289">TStageObject::T_SO</a>));</div>
<div class="line"><span class="lineno"> 4208</span>  }</div>
<div class="line"><span class="lineno"> 4209</span>  param         = stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a078a9701f533b38eb16dfe8914c45958">TStageObject::T_ScaleX</a>);</div>
<div class="line"><span class="lineno"> 4210</span>  keyFrameIndex = param-&gt;getClosestKeyframe(frame);</div>
<div class="line"><span class="lineno"> 4211</span>  <span class="keywordflow">if</span> (keyFrameIndex &gt;= 0) {</div>
<div class="line"><span class="lineno"> 4212</span>    setParamStep(keyFrameIndex, step,</div>
<div class="line"><span class="lineno"> 4213</span>                 stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a078a9701f533b38eb16dfe8914c45958">TStageObject::T_ScaleX</a>));</div>
<div class="line"><span class="lineno"> 4214</span>  }</div>
<div class="line"><span class="lineno"> 4215</span>  param         = stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a9bda4b3de61fbbebf8ce48749d22dd86">TStageObject::T_ScaleY</a>);</div>
<div class="line"><span class="lineno"> 4216</span>  keyFrameIndex = param-&gt;getClosestKeyframe(frame);</div>
<div class="line"><span class="lineno"> 4217</span>  <span class="keywordflow">if</span> (keyFrameIndex &gt;= 0) {</div>
<div class="line"><span class="lineno"> 4218</span>    setParamStep(keyFrameIndex, step,</div>
<div class="line"><span class="lineno"> 4219</span>                 stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a9bda4b3de61fbbebf8ce48749d22dd86">TStageObject::T_ScaleY</a>));</div>
<div class="line"><span class="lineno"> 4220</span>  }</div>
<div class="line"><span class="lineno"> 4221</span>  param         = stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(TStageObject::T_Scale);</div>
<div class="line"><span class="lineno"> 4222</span>  keyFrameIndex = param-&gt;getClosestKeyframe(frame);</div>
<div class="line"><span class="lineno"> 4223</span>  <span class="keywordflow">if</span> (keyFrameIndex &gt;= 0) {</div>
<div class="line"><span class="lineno"> 4224</span>    setParamStep(keyFrameIndex, step,</div>
<div class="line"><span class="lineno"> 4225</span>                 stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(TStageObject::T_Scale));</div>
<div class="line"><span class="lineno"> 4226</span>  }</div>
<div class="line"><span class="lineno"> 4227</span>  param         = stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439aa0630d9663bbf752a92702f3a1818e58">TStageObject::T_Path</a>);</div>
<div class="line"><span class="lineno"> 4228</span>  keyFrameIndex = param-&gt;getClosestKeyframe(frame);</div>
<div class="line"><span class="lineno"> 4229</span>  <span class="keywordflow">if</span> (keyFrameIndex &gt;= 0) {</div>
<div class="line"><span class="lineno"> 4230</span>    setParamStep(keyFrameIndex, step,</div>
<div class="line"><span class="lineno"> 4231</span>                 stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439aa0630d9663bbf752a92702f3a1818e58">TStageObject::T_Path</a>));</div>
<div class="line"><span class="lineno"> 4232</span>  }</div>
<div class="line"><span class="lineno"> 4233</span>  param         = stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a92fbb950a2ad460478a6fa7606196a17">TStageObject::T_ShearX</a>);</div>
<div class="line"><span class="lineno"> 4234</span>  keyFrameIndex = param-&gt;getClosestKeyframe(frame);</div>
<div class="line"><span class="lineno"> 4235</span>  <span class="keywordflow">if</span> (keyFrameIndex &gt;= 0) {</div>
<div class="line"><span class="lineno"> 4236</span>    setParamStep(keyFrameIndex, step,</div>
<div class="line"><span class="lineno"> 4237</span>                 stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a92fbb950a2ad460478a6fa7606196a17">TStageObject::T_ShearX</a>));</div>
<div class="line"><span class="lineno"> 4238</span>  }</div>
<div class="line"><span class="lineno"> 4239</span>  param         = stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a0c485ea820893a408d07bab60b9b7a0d">TStageObject::T_ShearY</a>);</div>
<div class="line"><span class="lineno"> 4240</span>  keyFrameIndex = param-&gt;getClosestKeyframe(frame);</div>
<div class="line"><span class="lineno"> 4241</span>  <span class="keywordflow">if</span> (keyFrameIndex &gt;= 0) {</div>
<div class="line"><span class="lineno"> 4242</span>    setParamStep(keyFrameIndex, step,</div>
<div class="line"><span class="lineno"> 4243</span>                 stageObject-&gt;<a class="code hl_function" href="class_t_stage_object.html#ae4cf64f5085310a14074ceb54d2b5177">getParam</a>(<a class="code hl_enumvalue" href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a0c485ea820893a408d07bab60b9b7a0d">TStageObject::T_ShearY</a>));</div>
<div class="line"><span class="lineno"> 4244</span>  }</div>
<div class="line"><span class="lineno"> 4245</span> </div>
<div class="line"><span class="lineno"> 4246</span>  TUndoManager::manager()-&gt;endBlock();</div>
<div class="line"><span class="lineno"> 4247</span>}</div>
<div class="ttc" id="aclass_t_double_param_html"><div class="ttname"><a href="class_t_double_param.html">TDoubleParam</a></div><div class="ttdef"><b>Definition:</b> tdoubleparam.h:54</div></div>
<div class="ttc" id="aclass_t_stage_object_html_ac7a60ddc803173dc7591f784577cb439a078a9701f533b38eb16dfe8914c45958"><div class="ttname"><a href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a078a9701f533b38eb16dfe8914c45958">TStageObject::T_ScaleX</a></div><div class="ttdeci">@ T_ScaleX</div><div class="ttdoc">X-axis scale factor.</div><div class="ttdef"><b>Definition:</b> tstageobject.h:127</div></div>
<div class="ttc" id="aclass_t_stage_object_html_ac7a60ddc803173dc7591f784577cb439a08806eb331bdede66bb3113b1642a6ad"><div class="ttname"><a href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a08806eb331bdede66bb3113b1642a6ad">TStageObject::T_Angle</a></div><div class="ttdeci">@ T_Angle</div><div class="ttdoc">Object's angle (rotation)</div><div class="ttdef"><b>Definition:</b> tstageobject.h:122</div></div>
<div class="ttc" id="aclass_t_stage_object_html_ac7a60ddc803173dc7591f784577cb439a0c485ea820893a408d07bab60b9b7a0d"><div class="ttname"><a href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a0c485ea820893a408d07bab60b9b7a0d">TStageObject::T_ShearY</a></div><div class="ttdeci">@ T_ShearY</div><div class="ttdoc">Shear along y-axis.</div><div class="ttdef"><b>Definition:</b> tstageobject.h:133</div></div>
<div class="ttc" id="aclass_t_stage_object_html_ac7a60ddc803173dc7591f784577cb439a426bfbbf201379648fff0257dd067289"><div class="ttname"><a href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a426bfbbf201379648fff0257dd067289">TStageObject::T_SO</a></div><div class="ttdeci">@ T_SO</div><div class="ttdoc">Stacking Order.</div><div class="ttdef"><b>Definition:</b> tstageobject.h:126</div></div>
<div class="ttc" id="aclass_t_stage_object_html_ac7a60ddc803173dc7591f784577cb439a45e2b29d25f50909ebd06d1bd9c1944a"><div class="ttname"><a href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a45e2b29d25f50909ebd06d1bd9c1944a">TStageObject::T_Y</a></div><div class="ttdeci">@ T_Y</div><div class="ttdoc">Local y coordinate in inches.</div><div class="ttdef"><b>Definition:</b> tstageobject.h:124</div></div>
<div class="ttc" id="aclass_t_stage_object_html_ac7a60ddc803173dc7591f784577cb439a6c8e9e0e35cdf4d4a5427a00eaeb255d"><div class="ttname"><a href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a6c8e9e0e35cdf4d4a5427a00eaeb255d">TStageObject::T_Z</a></div><div class="ttdeci">@ T_Z</div><div class="ttdoc">Layer depth.</div><div class="ttdef"><b>Definition:</b> tstageobject.h:125</div></div>
<div class="ttc" id="aclass_t_stage_object_html_ac7a60ddc803173dc7591f784577cb439a92fbb950a2ad460478a6fa7606196a17"><div class="ttname"><a href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a92fbb950a2ad460478a6fa7606196a17">TStageObject::T_ShearX</a></div><div class="ttdeci">@ T_ShearX</div><div class="ttdoc">Shear along x-axis.</div><div class="ttdef"><b>Definition:</b> tstageobject.h:132</div></div>
<div class="ttc" id="aclass_t_stage_object_html_ac7a60ddc803173dc7591f784577cb439a9bda4b3de61fbbebf8ce48749d22dd86"><div class="ttname"><a href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439a9bda4b3de61fbbebf8ce48749d22dd86">TStageObject::T_ScaleY</a></div><div class="ttdeci">@ T_ScaleY</div><div class="ttdoc">Y-axis scale factor.</div><div class="ttdef"><b>Definition:</b> tstageobject.h:128</div></div>
<div class="ttc" id="aclass_t_stage_object_html_ac7a60ddc803173dc7591f784577cb439aa0630d9663bbf752a92702f3a1818e58"><div class="ttname"><a href="class_t_stage_object.html#ac7a60ddc803173dc7591f784577cb439aa0630d9663bbf752a92702f3a1818e58">TStageObject::T_Path</a></div><div class="ttdeci">@ T_Path</div><div class="ttdef"><b>Definition:</b> tstageobject.h:130</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad52301a3b7e523ce4a6a62ea342165c8" name="ad52301a3b7e523ce4a6a62ea342165c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad52301a3b7e523ce4a6a62ea342165c8">&#9670;&nbsp;</a></span>openNote</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::openNote </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4155</span>                        {</div>
<div class="line"><span class="lineno"> 4156</span>  <a class="code hl_class" href="class_t_xsh_note_set.html">TXshNoteSet</a> *notes = m_viewer-&gt;getXsheet()-&gt;getNotes();</div>
<div class="line"><span class="lineno"> 4157</span>  <span class="keywordtype">int</span> currentIndex   = m_viewer-&gt;getCurrentNoteIndex();</div>
<div class="line"><span class="lineno"> 4158</span>  m_viewer-&gt;getNotesWidget().at(currentIndex)-&gt;openNotePopup();</div>
<div class="line"><span class="lineno"> 4159</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae299ad0140bc908b93a99b062edf769c" name="ae299ad0140bc908b93a99b062edf769c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae299ad0140bc908b93a99b062edf769c">&#9670;&nbsp;</a></span>paintEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::paintEvent </td>
          <td>(</td>
          <td class="paramtype">QPaintEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3105</span>                                            {</div>
<div class="line"><span class="lineno"> 3106</span>  QRect toBeUpdated = <span class="keyword">event</span>-&gt;rect();</div>
<div class="line"><span class="lineno"> 3107</span> </div>
<div class="line"><span class="lineno"> 3108</span>  QPainter p(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 3109</span>  p.setClipRect(toBeUpdated);</div>
<div class="line"><span class="lineno"> 3110</span> </div>
<div class="line"><span class="lineno"> 3111</span>  p.fillRect(toBeUpdated, QBrush(m_viewer-&gt;getEmptyCellColor()));</div>
<div class="line"><span class="lineno"> 3112</span> </div>
<div class="line"><span class="lineno"> 3113</span>  drawCells(p, toBeUpdated);</div>
<div class="line"><span class="lineno"> 3114</span>  <span class="keywordflow">if</span> (Preferences::instance()-&gt;isShowKeyframesOnXsheetCellAreaEnabled())</div>
<div class="line"><span class="lineno"> 3115</span>    drawKeyframe(p, toBeUpdated);</div>
<div class="line"><span class="lineno"> 3116</span>  drawNotes(p, toBeUpdated);</div>
<div class="line"><span class="lineno"> 3117</span> </div>
<div class="line"><span class="lineno"> 3118</span>  <span class="comment">// focus cell border</span></div>
<div class="line"><span class="lineno"> 3119</span>  QPoint frameAdj = m_viewer-&gt;getFrameZoomAdjustment();</div>
<div class="line"><span class="lineno"> 3120</span>  <span class="keywordtype">int</span> row         = m_viewer-&gt;getCurrentRow();</div>
<div class="line"><span class="lineno"> 3121</span>  <span class="keywordtype">int</span> col         = m_viewer-&gt;getCurrentColumn();</div>
<div class="line"><span class="lineno"> 3122</span>  QPoint xy       = m_viewer-&gt;positionToXY(<a class="code hl_class" href="class_cell_position.html">CellPosition</a>(row, col));</div>
<div class="line"><span class="lineno"> 3123</span>  QRect rect =</div>
<div class="line"><span class="lineno"> 3124</span>      m_viewer-&gt;orientation()</div>
<div class="line"><span class="lineno"> 3125</span>          -&gt;rect((col &lt; 0) ? PredefinedRect::CAMERA_CELL : PredefinedRect::CELL)</div>
<div class="line"><span class="lineno"> 3126</span>          .translated(xy)</div>
<div class="line"><span class="lineno"> 3127</span>          .adjusted(0, 0, -1 - frameAdj.x(), -frameAdj.y());</div>
<div class="line"><span class="lineno"> 3128</span>  p.setPen(m_viewer-&gt;getCellFocusColor());</div>
<div class="line"><span class="lineno"> 3129</span>  p.setBrush(Qt::NoBrush);</div>
<div class="line"><span class="lineno"> 3130</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; i++)  <span class="comment">// thick border within cell</span></div>
<div class="line"><span class="lineno"> 3131</span>    p.drawRect(QRect(rect.topLeft() + QPoint(i, i),</div>
<div class="line"><span class="lineno"> 3132</span>                     rect.size() - QSize(2 * i, 2 * i)));</div>
<div class="line"><span class="lineno"> 3133</span> </div>
<div class="line"><span class="lineno"> 3134</span>  <span class="keywordflow">if</span> (getDragTool()) getDragTool()-&gt;drawCellsArea(p);</div>
<div class="line"><span class="lineno"> 3135</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a14d74627e18efdae69a063cbce304039" name="a14d74627e18efdae69a063cbce304039"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14d74627e18efdae69a063cbce304039">&#9670;&nbsp;</a></span>showRenameField()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XsheetGUI::CellArea::showRenameField </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>multiColumnSelected</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  152</span>                                                                           {</div>
<div class="line"><span class="lineno">  153</span>    m_renameCell-&gt;showInRowCol(row, col, multiColumnSelected);</div>
<div class="line"><span class="lineno">  154</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>E:/opentoonz/toonz/sources/toonz/<a class="el" href="">xshcellviewer.h</a></li>
<li>E:/opentoonz/toonz/sources/toonz/<a class="el" href="">xshcellviewer.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
