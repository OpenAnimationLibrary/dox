<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: SchematicSceneViewer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-slots">Public Slots</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-slots">Protected Slots</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="class_schematic_scene_viewer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">SchematicSceneViewer Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for SchematicSceneViewer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_schematic_scene_viewer.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-slots" name="pub-slots"></a>
Public Slots</h2></td></tr>
<tr class="memitem:ac190e628b07e384c2fe815f194926a50"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#ac190e628b07e384c2fe815f194926a50">normalizeScene</a> ()</td></tr>
<tr class="separator:ac190e628b07e384c2fe815f194926a50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeae40db1bf7531c5953dc2c02a5c1c8d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#aeae40db1bf7531c5953dc2c02a5c1c8d">fitScene</a> ()</td></tr>
<tr class="separator:aeae40db1bf7531c5953dc2c02a5c1c8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac15a876e7d602359c89af6b43a6afbb5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#ac15a876e7d602359c89af6b43a6afbb5">SchematicSceneViewer</a> (QWidget *parent)</td></tr>
<tr class="separator:ac15a876e7d602359c89af6b43a6afbb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19f21cb3e1d187f8ec80f90b928cdf6b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#a19f21cb3e1d187f8ec80f90b928cdf6b">zoomQt</a> (bool zoomin, bool resetView)</td></tr>
<tr class="separator:a19f21cb3e1d187f8ec80f90b928cdf6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada1e0b68676079b1a62c0c5089ee2aed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#ada1e0b68676079b1a62c0c5089ee2aed">panQt</a> (const QPointF &amp;delta)</td></tr>
<tr class="separator:ada1e0b68676079b1a62c0c5089ee2aed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0faa536289fd00bb9b9dc6767f782a8"><td class="memItemLeft" align="right" valign="top">QPointF&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#ad0faa536289fd00bb9b9dc6767f782a8">getOldScenePos</a> ()</td></tr>
<tr class="separator:ad0faa536289fd00bb9b9dc6767f782a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a970a0a61942f52f8057e3f84371bb3c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#a970a0a61942f52f8057e3f84371bb3c4">setCursorMode</a> (CursorMode mode)</td></tr>
<tr class="separator:a970a0a61942f52f8057e3f84371bb3c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-slots" name="pro-slots"></a>
Protected Slots</h2></td></tr>
<tr class="memitem:acdbc387bc301532d00d653897794109f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#acdbc387bc301532d00d653897794109f">centerOnCurrent</a> ()</td></tr>
<tr class="separator:acdbc387bc301532d00d653897794109f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d5c575308b3d3e0d4df5d59758390ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#a2d5c575308b3d3e0d4df5d59758390ca">reorderScene</a> ()</td></tr>
<tr class="separator:a2d5c575308b3d3e0d4df5d59758390ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a10a659d2647767c1605ea7326425914c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#a10a659d2647767c1605ea7326425914c">mousePressEvent</a> (QMouseEvent *me) override</td></tr>
<tr class="separator:a10a659d2647767c1605ea7326425914c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36c4698625fb04f71ad94decb79f85c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#a36c4698625fb04f71ad94decb79f85c6">mouseMoveEvent</a> (QMouseEvent *me) override</td></tr>
<tr class="separator:a36c4698625fb04f71ad94decb79f85c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fae2863572d4af2971c2969e1e139a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#a3fae2863572d4af2971c2969e1e139a5">mouseReleaseEvent</a> (QMouseEvent *me) override</td></tr>
<tr class="separator:a3fae2863572d4af2971c2969e1e139a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50291e3a70027171e0e64300b5315dd9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#a50291e3a70027171e0e64300b5315dd9">keyPressEvent</a> (QKeyEvent *ke) override</td></tr>
<tr class="separator:a50291e3a70027171e0e64300b5315dd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3a738281ae3d0ddec41c32b22f72113"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#af3a738281ae3d0ddec41c32b22f72113">wheelEvent</a> (QWheelEvent *me) override</td></tr>
<tr class="separator:af3a738281ae3d0ddec41c32b22f72113"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7f769686bb2673cf7410ad8572a723e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#ae7f769686bb2673cf7410ad8572a723e">showEvent</a> (QShowEvent *se) override</td></tr>
<tr class="separator:ae7f769686bb2673cf7410ad8572a723e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4076159b9caf628324c4a1dec26d2aab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#a4076159b9caf628324c4a1dec26d2aab">enterEvent</a> (QEvent *e) override</td></tr>
<tr class="separator:a4076159b9caf628324c4a1dec26d2aab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5479549846de93b8755038b4c70786a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#ae5479549846de93b8755038b4c70786a">leaveEvent</a> (QEvent *e) override</td></tr>
<tr class="separator:ae5479549846de93b8755038b4c70786a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a583159b336cad2a68354b9db31d427c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#a583159b336cad2a68354b9db31d427c1">mouseDoubleClickEvent</a> (QMouseEvent *event) override</td></tr>
<tr class="separator:a583159b336cad2a68354b9db31d427c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10beba630958094586cfbdc5a0f89ddb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#a10beba630958094586cfbdc5a0f89ddb">tabletEvent</a> (QTabletEvent *e) override</td></tr>
<tr class="separator:a10beba630958094586cfbdc5a0f89ddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5365b2a0f3eabf90de4a487756cadd9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#a5365b2a0f3eabf90de4a487756cadd9f">touchEvent</a> (QTouchEvent *e, int type)</td></tr>
<tr class="separator:a5365b2a0f3eabf90de4a487756cadd9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2994b2d7e5cdc7a0a3ff645f92e1d525"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#a2994b2d7e5cdc7a0a3ff645f92e1d525">gestureEvent</a> (QGestureEvent *e)</td></tr>
<tr class="separator:a2994b2d7e5cdc7a0a3ff645f92e1d525"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a417b49127c17932369740c3574df873d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_schematic_scene_viewer.html#a417b49127c17932369740c3574df873d">event</a> (QEvent *event) override</td></tr>
<tr class="separator:a417b49127c17932369740c3574df873d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac15a876e7d602359c89af6b43a6afbb5" name="ac15a876e7d602359c89af6b43a6afbb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac15a876e7d602359c89af6b43a6afbb5">&#9670;&nbsp;</a></span>SchematicSceneViewer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SchematicSceneViewer::SchematicSceneViewer </td>
          <td>(</td>
          <td class="paramtype">QWidget *&#160;</td>
          <td class="paramname"><em>parent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  201</span>    : QGraphicsView(parent)</div>
<div class="line"><span class="lineno">  202</span>    , m_buttonState(Qt::NoButton)</div>
<div class="line"><span class="lineno">  203</span>    , m_oldWinPos()</div>
<div class="line"><span class="lineno">  204</span>    , m_oldScenePos()</div>
<div class="line"><span class="lineno">  205</span>    , m_firstShowing(<span class="keyword">true</span>) {</div>
<div class="line"><span class="lineno">  206</span>  setObjectName(<span class="stringliteral">&quot;SchematicSceneViewer&quot;</span>);</div>
<div class="line"><span class="lineno">  207</span> </div>
<div class="line"><span class="lineno">  208</span>  setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);</div>
<div class="line"><span class="lineno">  209</span>  setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);</div>
<div class="line"><span class="lineno">  210</span>  setDragMode(QGraphicsView::NoDrag);</div>
<div class="line"><span class="lineno">  211</span>  setTransformationAnchor(QGraphicsView::NoAnchor);</div>
<div class="line"><span class="lineno">  212</span>  setRenderHint(QPainter::SmoothPixmapTransform);</div>
<div class="line"><span class="lineno">  213</span>  setRenderHint(QPainter::TextAntialiasing);</div>
<div class="line"><span class="lineno">  214</span>  setRenderHint(QPainter::Antialiasing);</div>
<div class="line"><span class="lineno">  215</span>  setInteractive(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  216</span>  setViewportUpdateMode(QGraphicsView::SmartViewportUpdate);</div>
<div class="line"><span class="lineno">  217</span>  show();</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>  setAttribute(Qt::WA_AcceptTouchEvents);</div>
<div class="line"><span class="lineno">  220</span>  grabGesture(Qt::SwipeGesture);</div>
<div class="line"><span class="lineno">  221</span>  grabGesture(Qt::PanGesture);</div>
<div class="line"><span class="lineno">  222</span>  grabGesture(Qt::PinchGesture);</div>
<div class="line"><span class="lineno">  223</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa588113fc0a2b20c0a8a560bd819c2ce" name="aa588113fc0a2b20c0a8a560bd819c2ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa588113fc0a2b20c0a8a560bd819c2ce">&#9670;&nbsp;</a></span>~SchematicSceneViewer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SchematicSceneViewer::~SchematicSceneViewer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  227</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acdbc387bc301532d00d653897794109f" name="acdbc387bc301532d00d653897794109f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdbc387bc301532d00d653897794109f">&#9670;&nbsp;</a></span>centerOnCurrent</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::centerOnCurrent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  465</span>                                           {</div>
<div class="line"><span class="lineno">  466</span>  <a class="code hl_class" href="class_schematic_scene.html">SchematicScene</a> *schematicScene = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_schematic_scene.html">SchematicScene</a> *<span class="keyword">&gt;</span>(scene());</div>
<div class="line"><span class="lineno">  467</span>  QGraphicsItem *node            = schematicScene-&gt;getCurrentNode();</div>
<div class="line"><span class="lineno">  468</span>  <span class="keywordflow">if</span> (node) centerOn(node);</div>
<div class="line"><span class="lineno">  469</span>}</div>
<div class="ttc" id="aclass_schematic_scene_html"><div class="ttname"><a href="class_schematic_scene.html">SchematicScene</a></div><div class="ttdef"><b>Definition:</b> schematicviewer.h:72</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4076159b9caf628324c4a1dec26d2aab" name="a4076159b9caf628324c4a1dec26d2aab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4076159b9caf628324c4a1dec26d2aab">&#9670;&nbsp;</a></span>enterEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::enterEvent </td>
          <td>(</td>
          <td class="paramtype">QEvent *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  514</span>                                               {</div>
<div class="line"><span class="lineno">  515</span>  <span class="keywordflow">switch</span> (m_cursorMode) {</div>
<div class="line"><span class="lineno">  516</span>  <span class="keywordflow">case</span> CursorMode::Hand:</div>
<div class="line"><span class="lineno">  517</span>    setToolCursor(<span class="keyword">this</span>, ToolCursor::PanCursor);</div>
<div class="line"><span class="lineno">  518</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  519</span>  <span class="keywordflow">case</span> CursorMode::Zoom:</div>
<div class="line"><span class="lineno">  520</span>    setToolCursor(<span class="keyword">this</span>, ToolCursor::ZoomCursor);</div>
<div class="line"><span class="lineno">  521</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  522</span>  <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  523</span>    setToolCursor(<span class="keyword">this</span>, ToolCursor::StrokeSelectCursor);</div>
<div class="line"><span class="lineno">  524</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  525</span>  }</div>
<div class="line"><span class="lineno">  526</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a417b49127c17932369740c3574df873d" name="a417b49127c17932369740c3574df873d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a417b49127c17932369740c3574df873d">&#9670;&nbsp;</a></span>event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SchematicSceneViewer::event </td>
          <td>(</td>
          <td class="paramtype">QEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  653</span>                                          {</div>
<div class="line"><span class="lineno">  654</span>  <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  655</span><span class="comment">  switch (e-&gt;type()) {</span></div>
<div class="line"><span class="lineno">  656</span><span class="comment">  case QEvent::TabletPress: {</span></div>
<div class="line"><span class="lineno">  657</span><span class="comment">    QTabletEvent *te = static_cast&lt;QTabletEvent *&gt;(e);</span></div>
<div class="line"><span class="lineno">  658</span><span class="comment">    qDebug() &lt;&lt; &quot;[event] TabletPress: pointerType(&quot; &lt;&lt; te-&gt;pointerType()</span></div>
<div class="line"><span class="lineno">  659</span><span class="comment">             &lt;&lt; &quot;) device(&quot; &lt;&lt; te-&gt;device() &lt;&lt; &quot;)&quot;;</span></div>
<div class="line"><span class="lineno">  660</span><span class="comment">  } break;</span></div>
<div class="line"><span class="lineno">  661</span><span class="comment">  case QEvent::TabletRelease:</span></div>
<div class="line"><span class="lineno">  662</span><span class="comment">    qDebug() &lt;&lt; &quot;[event] TabletRelease&quot;;</span></div>
<div class="line"><span class="lineno">  663</span><span class="comment">    break;</span></div>
<div class="line"><span class="lineno">  664</span><span class="comment">  case QEvent::TouchBegin:</span></div>
<div class="line"><span class="lineno">  665</span><span class="comment">    qDebug() &lt;&lt; &quot;[event] TouchBegin&quot;;</span></div>
<div class="line"><span class="lineno">  666</span><span class="comment">    break;</span></div>
<div class="line"><span class="lineno">  667</span><span class="comment">  case QEvent::TouchEnd:</span></div>
<div class="line"><span class="lineno">  668</span><span class="comment">    qDebug() &lt;&lt; &quot;[event] TouchEnd&quot;;</span></div>
<div class="line"><span class="lineno">  669</span><span class="comment">    break;</span></div>
<div class="line"><span class="lineno">  670</span><span class="comment">  case QEvent::TouchCancel:</span></div>
<div class="line"><span class="lineno">  671</span><span class="comment">    qDebug() &lt;&lt; &quot;[event] TouchCancel&quot;;</span></div>
<div class="line"><span class="lineno">  672</span><span class="comment">    break;</span></div>
<div class="line"><span class="lineno">  673</span><span class="comment">  case QEvent::MouseButtonPress:</span></div>
<div class="line"><span class="lineno">  674</span><span class="comment">    qDebug() &lt;&lt; &quot;[event] MouseButtonPress&quot;;</span></div>
<div class="line"><span class="lineno">  675</span><span class="comment">    break;</span></div>
<div class="line"><span class="lineno">  676</span><span class="comment">  case QEvent::MouseButtonDblClick:</span></div>
<div class="line"><span class="lineno">  677</span><span class="comment">    qDebug() &lt;&lt; &quot;[event] MouseButtonDblClick&quot;;</span></div>
<div class="line"><span class="lineno">  678</span><span class="comment">    break;</span></div>
<div class="line"><span class="lineno">  679</span><span class="comment">  case QEvent::MouseButtonRelease:</span></div>
<div class="line"><span class="lineno">  680</span><span class="comment">    qDebug() &lt;&lt; &quot;[event] MouseButtonRelease&quot;;</span></div>
<div class="line"><span class="lineno">  681</span><span class="comment">    break;</span></div>
<div class="line"><span class="lineno">  682</span><span class="comment">  case QEvent::Gesture:</span></div>
<div class="line"><span class="lineno">  683</span><span class="comment">    qDebug() &lt;&lt; &quot;[event] Gesture&quot;;</span></div>
<div class="line"><span class="lineno">  684</span><span class="comment">    break;</span></div>
<div class="line"><span class="lineno">  685</span><span class="comment">  default:</span></div>
<div class="line"><span class="lineno">  686</span><span class="comment">    break;</span></div>
<div class="line"><span class="lineno">  687</span><span class="comment">  }</span></div>
<div class="line"><span class="lineno">  688</span><span class="comment">  */</span></div>
<div class="line"><span class="lineno">  689</span> </div>
<div class="line"><span class="lineno">  690</span>  <span class="keywordflow">if</span> (e-&gt;type() == QEvent::Gesture &amp;&amp; CommandManager::instance()</div>
<div class="line"><span class="lineno">  691</span>                                          -&gt;getAction(MI_TouchGestureControl)</div>
<div class="line"><span class="lineno">  692</span>                                          -&gt;isChecked()) {</div>
<div class="line"><span class="lineno">  693</span>    gestureEvent(<span class="keyword">static_cast&lt;</span>QGestureEvent *<span class="keyword">&gt;</span>(e));</div>
<div class="line"><span class="lineno">  694</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  695</span>  }</div>
<div class="line"><span class="lineno">  696</span>  <span class="keywordflow">if</span> ((e-&gt;type() == QEvent::TouchBegin || e-&gt;type() == QEvent::TouchEnd ||</div>
<div class="line"><span class="lineno">  697</span>       e-&gt;type() == QEvent::TouchCancel || e-&gt;type() == QEvent::TouchUpdate) &amp;&amp;</div>
<div class="line"><span class="lineno">  698</span>      CommandManager::instance()</div>
<div class="line"><span class="lineno">  699</span>          -&gt;getAction(MI_TouchGestureControl)</div>
<div class="line"><span class="lineno">  700</span>          -&gt;isChecked()) {</div>
<div class="line"><span class="lineno">  701</span>    touchEvent(<span class="keyword">static_cast&lt;</span>QTouchEvent *<span class="keyword">&gt;</span>(e), e-&gt;type());</div>
<div class="line"><span class="lineno">  702</span>    m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  703</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  704</span>  }</div>
<div class="line"><span class="lineno">  705</span>  <span class="keywordflow">return</span> QGraphicsView::event(e);</div>
<div class="line"><span class="lineno">  706</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aeae40db1bf7531c5953dc2c02a5c1c8d" name="aeae40db1bf7531c5953dc2c02a5c1c8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeae40db1bf7531c5953dc2c02a5c1c8d">&#9670;&nbsp;</a></span>fitScene</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::fitScene </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  456</span>                                    {</div>
<div class="line"><span class="lineno">  457</span>  <span class="keywordflow">if</span> (scene()) {</div>
<div class="line"><span class="lineno">  458</span>    QRectF rect = scene()-&gt;itemsBoundingRect();</div>
<div class="line"><span class="lineno">  459</span>    fitInView(rect, Qt::KeepAspectRatio);</div>
<div class="line"><span class="lineno">  460</span>  }</div>
<div class="line"><span class="lineno">  461</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2994b2d7e5cdc7a0a3ff645f92e1d525" name="a2994b2d7e5cdc7a0a3ff645f92e1d525"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2994b2d7e5cdc7a0a3ff645f92e1d525">&#9670;&nbsp;</a></span>gestureEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::gestureEvent </td>
          <td>(</td>
          <td class="paramtype">QGestureEvent *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  547</span>                                                        {</div>
<div class="line"><span class="lineno">  548</span>  <span class="comment">// qDebug() &lt;&lt; &quot;[gestureEvent]&quot;;</span></div>
<div class="line"><span class="lineno">  549</span>  m_gestureActive = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  550</span>  <span class="keywordflow">if</span> (QGesture *swipe = e-&gt;gesture(Qt::SwipeGesture)) {</div>
<div class="line"><span class="lineno">  551</span>    m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  552</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (QGesture *pan = e-&gt;gesture(Qt::PanGesture)) {</div>
<div class="line"><span class="lineno">  553</span>    m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  554</span>  }</div>
<div class="line"><span class="lineno">  555</span>  <span class="keywordflow">if</span> (QGesture *pinch = e-&gt;gesture(Qt::PinchGesture)) {</div>
<div class="line"><span class="lineno">  556</span>    QPinchGesture *gesture = <span class="keyword">static_cast&lt;</span>QPinchGesture *<span class="keyword">&gt;</span>(pinch);</div>
<div class="line"><span class="lineno">  557</span>    QPinchGesture::ChangeFlags changeFlags = gesture-&gt;changeFlags();</div>
<div class="line"><span class="lineno">  558</span>    QPoint firstCenter                     = gesture-&gt;centerPoint().toPoint();</div>
<div class="line"><span class="lineno">  559</span>    <span class="keywordflow">if</span> (m_touchDevice == QTouchDevice::TouchScreen)</div>
<div class="line"><span class="lineno">  560</span>      firstCenter = mapFromGlobal(firstCenter);</div>
<div class="line"><span class="lineno">  561</span> </div>
<div class="line"><span class="lineno">  562</span>    <span class="keywordflow">if</span> (gesture-&gt;state() == Qt::GestureStarted) {</div>
<div class="line"><span class="lineno">  563</span>      m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  564</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (gesture-&gt;state() == Qt::GestureFinished) {</div>
<div class="line"><span class="lineno">  565</span>      m_gestureActive = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  566</span>      m_zooming       = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  567</span>      m_scaleFactor   = 0.0;</div>
<div class="line"><span class="lineno">  568</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  569</span>      <span class="keywordflow">if</span> (changeFlags &amp; QPinchGesture::ScaleFactorChanged) {</div>
<div class="line"><span class="lineno">  570</span>        <span class="keywordtype">double</span> scaleFactor = gesture-&gt;scaleFactor();</div>
<div class="line"><span class="lineno">  571</span>        <span class="comment">// the scale factor makes for too sensitive scaling</span></div>
<div class="line"><span class="lineno">  572</span>        <span class="comment">// divide the change in half</span></div>
<div class="line"><span class="lineno">  573</span>        <span class="keywordflow">if</span> (scaleFactor &gt; 1) {</div>
<div class="line"><span class="lineno">  574</span>          <span class="keywordtype">double</span> decimalValue = scaleFactor - 1;</div>
<div class="line"><span class="lineno">  575</span>          decimalValue /= 1.5;</div>
<div class="line"><span class="lineno">  576</span>          scaleFactor = 1 + decimalValue;</div>
<div class="line"><span class="lineno">  577</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (scaleFactor &lt; 1) {</div>
<div class="line"><span class="lineno">  578</span>          <span class="keywordtype">double</span> decimalValue = 1 - scaleFactor;</div>
<div class="line"><span class="lineno">  579</span>          decimalValue /= 1.5;</div>
<div class="line"><span class="lineno">  580</span>          scaleFactor = 1 - decimalValue;</div>
<div class="line"><span class="lineno">  581</span>        }</div>
<div class="line"><span class="lineno">  582</span>        <span class="keywordflow">if</span> (!m_zooming) {</div>
<div class="line"><span class="lineno">  583</span>          <span class="keywordtype">double</span> delta = scaleFactor - 1;</div>
<div class="line"><span class="lineno">  584</span>          m_scaleFactor += delta;</div>
<div class="line"><span class="lineno">  585</span>          <span class="keywordflow">if</span> (m_scaleFactor &gt; .2 || m_scaleFactor &lt; -.2) {</div>
<div class="line"><span class="lineno">  586</span>            m_zooming = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  587</span>          }</div>
<div class="line"><span class="lineno">  588</span>        }</div>
<div class="line"><span class="lineno">  589</span>        <span class="keywordflow">if</span> (m_zooming) {</div>
<div class="line"><span class="lineno">  590</span>          changeScale(firstCenter, scaleFactor);</div>
<div class="line"><span class="lineno">  591</span>          m_panning = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  592</span>        }</div>
<div class="line"><span class="lineno">  593</span>        m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  594</span>      }</div>
<div class="line"><span class="lineno">  595</span> </div>
<div class="line"><span class="lineno">  596</span>      <span class="keywordflow">if</span> (changeFlags &amp; QPinchGesture::CenterPointChanged) {</div>
<div class="line"><span class="lineno">  597</span>        QPointF centerDelta = (gesture-&gt;centerPoint() * getDevPixRatio()) -</div>
<div class="line"><span class="lineno">  598</span>                              (gesture-&gt;lastCenterPoint() * getDevPixRatio());</div>
<div class="line"><span class="lineno">  599</span>        <span class="keywordflow">if</span> (centerDelta.manhattanLength() &gt; 1) {</div>
<div class="line"><span class="lineno">  600</span>          <span class="comment">// panQt(centerDelta.toPoint());</span></div>
<div class="line"><span class="lineno">  601</span>        }</div>
<div class="line"><span class="lineno">  602</span>        m_gestureActive = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  603</span>      }</div>
<div class="line"><span class="lineno">  604</span>    }</div>
<div class="line"><span class="lineno">  605</span>  }</div>
<div class="line"><span class="lineno">  606</span>  e-&gt;accept();</div>
<div class="line"><span class="lineno">  607</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad0faa536289fd00bb9b9dc6767f782a8" name="ad0faa536289fd00bb9b9dc6767f782a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0faa536289fd00bb9b9dc6767f782a8">&#9670;&nbsp;</a></span>getOldScenePos()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QPointF SchematicSceneViewer::getOldScenePos </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  143</span>{ <span class="keywordflow">return</span> m_oldScenePos; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a50291e3a70027171e0e64300b5315dd9" name="a50291e3a70027171e0e64300b5315dd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50291e3a70027171e0e64300b5315dd9">&#9670;&nbsp;</a></span>keyPressEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::keyPressEvent </td>
          <td>(</td>
          <td class="paramtype">QKeyEvent *&#160;</td>
          <td class="paramname"><em>ke</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  352</span>                                                      {</div>
<div class="line"><span class="lineno">  353</span>  ke-&gt;ignore();</div>
<div class="line"><span class="lineno">  354</span>  QGraphicsView::keyPressEvent(ke);</div>
<div class="line"><span class="lineno">  355</span>  <span class="keywordflow">if</span> (!ke-&gt;isAccepted()) SchematicZoomer(<span class="keyword">this</span>).exec(ke);</div>
<div class="line"><span class="lineno">  356</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae5479549846de93b8755038b4c70786a" name="ae5479549846de93b8755038b4c70786a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5479549846de93b8755038b4c70786a">&#9670;&nbsp;</a></span>leaveEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::leaveEvent </td>
          <td>(</td>
          <td class="paramtype">QEvent *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  530</span>{ setCursor(Qt::ArrowCursor); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a583159b336cad2a68354b9db31d427c1" name="a583159b336cad2a68354b9db31d427c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a583159b336cad2a68354b9db31d427c1">&#9670;&nbsp;</a></span>mouseDoubleClickEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::mouseDoubleClickEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  333</span>                                                                   {</div>
<div class="line"><span class="lineno">  334</span>  <span class="comment">// qDebug() &lt;&lt; &quot;[mouseDoubleClickEvent]&quot;;</span></div>
<div class="line"><span class="lineno">  335</span>  <span class="keywordflow">if</span> (m_gestureActive &amp;&amp; !m_stylusUsed) {</div>
<div class="line"><span class="lineno">  336</span>    m_gestureActive = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  337</span>    QGraphicsItem *item =</div>
<div class="line"><span class="lineno">  338</span>        scene()-&gt;itemAt(mapToScene(event-&gt;pos()), QTransform());</div>
<div class="line"><span class="lineno">  339</span>    <span class="keywordflow">if</span> (!item) {</div>
<div class="line"><span class="lineno">  340</span>      fitScene();</div>
<div class="line"><span class="lineno">  341</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  342</span>    }</div>
<div class="line"><span class="lineno">  343</span> </div>
<div class="line"><span class="lineno">  344</span>    <a class="code hl_function" href="class_schematic_scene_viewer.html#a10a659d2647767c1605ea7326425914c">mousePressEvent</a>(event);</div>
<div class="line"><span class="lineno">  345</span>  }</div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>  QGraphicsView::mouseDoubleClickEvent(event);</div>
<div class="line"><span class="lineno">  348</span>}</div>
<div class="ttc" id="aclass_schematic_scene_viewer_html_a10a659d2647767c1605ea7326425914c"><div class="ttname"><a href="class_schematic_scene_viewer.html#a10a659d2647767c1605ea7326425914c">SchematicSceneViewer::mousePressEvent</a></div><div class="ttdeci">void mousePressEvent(QMouseEvent *me) override</div><div class="ttdef"><b>Definition:</b> schematicviewer.cpp:233</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a36c4698625fb04f71ad94decb79f85c6" name="a36c4698625fb04f71ad94decb79f85c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36c4698625fb04f71ad94decb79f85c6">&#9670;&nbsp;</a></span>mouseMoveEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::mouseMoveEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>me</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Reimplemets the QGraphicsView::mouseMoveEvent() </p>
<div class="fragment"><div class="line"><span class="lineno">  282</span>                                                         {</div>
<div class="line"><span class="lineno">  283</span>  <span class="keywordflow">if</span> (m_gestureActive &amp;&amp; m_touchDevice == QTouchDevice::TouchScreen &amp;&amp;</div>
<div class="line"><span class="lineno">  284</span>      !m_stylusUsed) {</div>
<div class="line"><span class="lineno">  285</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  286</span>  }</div>
<div class="line"><span class="lineno">  287</span> </div>
<div class="line"><span class="lineno">  288</span>  QPoint currWinPos    = me-&gt;pos();</div>
<div class="line"><span class="lineno">  289</span>  QPointF currScenePos = mapToScene(currWinPos);</div>
<div class="line"><span class="lineno">  290</span>  <span class="keywordflow">if</span> ((m_cursorMode == CursorMode::Hand &amp;&amp; m_panning) ||</div>
<div class="line"><span class="lineno">  291</span>      m_buttonState == Qt::MidButton) {</div>
<div class="line"><span class="lineno">  292</span>    QPointF usePos = m_touchDevice == QTouchDevice::TouchScreen</div>
<div class="line"><span class="lineno">  293</span>                         ? mapToScene(me-&gt;pos())</div>
<div class="line"><span class="lineno">  294</span>                         : me-&gt;pos() * getDevPixRatio();</div>
<div class="line"><span class="lineno">  295</span>    QPointF deltaPoint = usePos - m_mousePanPoint;</div>
<div class="line"><span class="lineno">  296</span>    panQt(deltaPoint);</div>
<div class="line"><span class="lineno">  297</span>    m_mousePanPoint = m_touchDevice == QTouchDevice::TouchScreen</div>
<div class="line"><span class="lineno">  298</span>                          ? mapToScene(me-&gt;pos())</div>
<div class="line"><span class="lineno">  299</span>                          : me-&gt;pos() * getDevPixRatio();</div>
<div class="line"><span class="lineno">  300</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  301</span>    <span class="keywordflow">if</span> (m_cursorMode == CursorMode::Zoom &amp;&amp; m_zooming) {</div>
<div class="line"><span class="lineno">  302</span>      <span class="keywordtype">int</span> deltaY     = (m_oldWinPos.y() - me-&gt;pos().y()) * 10;</div>
<div class="line"><span class="lineno">  303</span>      <span class="keywordtype">double</span> factorY = exp(deltaY * 0.001);</div>
<div class="line"><span class="lineno">  304</span>      changeScale(m_zoomPoint, factorY);</div>
<div class="line"><span class="lineno">  305</span>      m_panning = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  306</span>    }</div>
<div class="line"><span class="lineno">  307</span>    m_oldWinPos   = currWinPos;</div>
<div class="line"><span class="lineno">  308</span>    m_oldScenePos = currScenePos;</div>
<div class="line"><span class="lineno">  309</span>  }</div>
<div class="line"><span class="lineno">  310</span>  QGraphicsView::mouseMoveEvent(me);</div>
<div class="line"><span class="lineno">  311</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a10a659d2647767c1605ea7326425914c" name="a10a659d2647767c1605ea7326425914c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10a659d2647767c1605ea7326425914c">&#9670;&nbsp;</a></span>mousePressEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::mousePressEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>me</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Reimplemets the QGraphicsView::mousePressEvent() </p>
<div class="fragment"><div class="line"><span class="lineno">  233</span>                                                          {</div>
<div class="line"><span class="lineno">  234</span>  <span class="comment">// qDebug() &lt;&lt; &quot;[mousePressEvent]&quot;;</span></div>
<div class="line"><span class="lineno">  235</span>  <span class="keywordflow">if</span> (m_gestureActive &amp;&amp; m_touchDevice == QTouchDevice::TouchScreen &amp;&amp;</div>
<div class="line"><span class="lineno">  236</span>      !m_stylusUsed) {</div>
<div class="line"><span class="lineno">  237</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  238</span>  }</div>
<div class="line"><span class="lineno">  239</span> </div>
<div class="line"><span class="lineno">  240</span>  m_buttonState = me-&gt;button();</div>
<div class="line"><span class="lineno">  241</span>  m_oldWinPos   = me-&gt;pos();</div>
<div class="line"><span class="lineno">  242</span>  m_oldScenePos = mapToScene(m_oldWinPos);</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>  <span class="keywordflow">if</span> (m_buttonState == Qt::LeftButton) {</div>
<div class="line"><span class="lineno">  245</span>    <span class="keywordflow">if</span> (m_cursorMode == CursorMode::Zoom) {</div>
<div class="line"><span class="lineno">  246</span>      m_zoomPoint = me-&gt;pos();</div>
<div class="line"><span class="lineno">  247</span>      m_zooming   = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  248</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  249</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_cursorMode == CursorMode::Hand) {</div>
<div class="line"><span class="lineno">  250</span>      m_mousePanPoint = m_touchDevice == QTouchDevice::TouchScreen</div>
<div class="line"><span class="lineno">  251</span>                            ? mapToScene(me-&gt;pos())</div>
<div class="line"><span class="lineno">  252</span>                            : me-&gt;pos() * getDevPixRatio();</div>
<div class="line"><span class="lineno">  253</span>      m_panning = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  254</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  255</span>    }</div>
<div class="line"><span class="lineno">  256</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_buttonState == Qt::MidButton) {</div>
<div class="line"><span class="lineno">  257</span>    m_mousePanPoint = m_touchDevice == QTouchDevice::TouchScreen</div>
<div class="line"><span class="lineno">  258</span>                          ? mapToScene(me-&gt;pos())</div>
<div class="line"><span class="lineno">  259</span>                          : me-&gt;pos() * getDevPixRatio();</div>
<div class="line"><span class="lineno">  260</span>  }</div>
<div class="line"><span class="lineno">  261</span>  <span class="keywordtype">bool</span> drawRect                       = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  262</span>  QList&lt;QGraphicsItem *&gt; pointedItems = items(me-&gt;pos());</div>
<div class="line"><span class="lineno">  263</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  264</span>  <span class="keywordflow">for</span> (i = 0; i &lt; pointedItems.size(); i++) {</div>
<div class="line"><span class="lineno">  265</span>    <a class="code hl_class" href="class_schematic_window_editor.html">SchematicWindowEditor</a> *editor =</div>
<div class="line"><span class="lineno">  266</span>        <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_schematic_window_editor.html">SchematicWindowEditor</a> *<span class="keyword">&gt;</span>(pointedItems[i]);</div>
<div class="line"><span class="lineno">  267</span>    <span class="keywordflow">if</span> (!editor) {</div>
<div class="line"><span class="lineno">  268</span>      drawRect = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  269</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  270</span>    }</div>
<div class="line"><span class="lineno">  271</span>  }</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>  <span class="keywordflow">if</span> (m_buttonState == Qt::LeftButton &amp;&amp; drawRect)</div>
<div class="line"><span class="lineno">  274</span>    setDragMode(QGraphicsView::RubberBandDrag);</div>
<div class="line"><span class="lineno">  275</span>  QGraphicsView::mousePressEvent(me);</div>
<div class="line"><span class="lineno">  276</span>}</div>
<div class="ttc" id="aclass_schematic_window_editor_html"><div class="ttname"><a href="class_schematic_window_editor.html">SchematicWindowEditor</a></div><div class="ttdef"><b>Definition:</b> schematicgroupeditor.h:35</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3fae2863572d4af2971c2969e1e139a5" name="a3fae2863572d4af2971c2969e1e139a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fae2863572d4af2971c2969e1e139a5">&#9670;&nbsp;</a></span>mouseReleaseEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::mouseReleaseEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>me</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Reimplemets the QGraphicsView::mouseReleaseEvent() </p>
<div class="fragment"><div class="line"><span class="lineno">  317</span>                                                            {</div>
<div class="line"><span class="lineno">  318</span>  <span class="comment">// qDebug() &lt;&lt; &quot;[mouseReleaseEvent]&quot;;</span></div>
<div class="line"><span class="lineno">  319</span>  m_gestureActive = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  320</span>  m_zooming       = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  321</span>  m_panning       = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  322</span>  m_stylusUsed    = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  323</span>  m_scaleFactor   = 0.0;</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>  m_buttonState = Qt::NoButton;</div>
<div class="line"><span class="lineno">  326</span>  QGraphicsView::mouseReleaseEvent(me);</div>
<div class="line"><span class="lineno">  327</span>  setDragMode(QGraphicsView::NoDrag);</div>
<div class="line"><span class="lineno">  328</span>  <span class="comment">// update();</span></div>
<div class="line"><span class="lineno">  329</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac190e628b07e384c2fe815f194926a50" name="ac190e628b07e384c2fe815f194926a50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac190e628b07e384c2fe815f194926a50">&#9670;&nbsp;</a></span>normalizeScene</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::normalizeScene </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  480</span>                                          {</div>
<div class="line"><span class="lineno">  481</span>  <span class="comment">// See QGraphicsView::mapToScene()&#39;s doc for details</span></div>
<div class="line"><span class="lineno">  482</span>  QPointF sceneCenter(mapToScene(rect().center()));</div>
<div class="line"><span class="lineno">  483</span>  resetMatrix();</div>
<div class="line"><span class="lineno">  484</span><span class="preprocessor">#if defined(MACOSX)</span></div>
<div class="line"><span class="lineno">  485</span>  scale(1.32, 1.32);</div>
<div class="line"><span class="lineno">  486</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  487</span>  centerOn(sceneCenter);</div>
<div class="line"><span class="lineno">  488</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ada1e0b68676079b1a62c0c5089ee2aed" name="ada1e0b68676079b1a62c0c5089ee2aed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada1e0b68676079b1a62c0c5089ee2aed">&#9670;&nbsp;</a></span>panQt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::panQt </td>
          <td>(</td>
          <td class="paramtype">const QPointF &amp;&#160;</td>
          <td class="paramname"><em>delta</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  491</span>                                                     {</div>
<div class="line"><span class="lineno">  492</span>  <span class="keywordflow">if</span> (delta == QPointF()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  493</span>  setInteractive(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  494</span>  <span class="comment">// I need to disable QGraphicsView event handling to avoid the generation of</span></div>
<div class="line"><span class="lineno">  495</span>  <span class="comment">// &#39;virtual&#39; mouseMoveEvent</span></div>
<div class="line"><span class="lineno">  496</span>  translate(delta.x(), delta.y());</div>
<div class="line"><span class="lineno">  497</span>  <span class="comment">// translate has changed the matrix affecting the mapToScene() method. I</span></div>
<div class="line"><span class="lineno">  498</span>  <span class="comment">// have to recompute currScenePos</span></div>
<div class="line"><span class="lineno">  499</span>  setInteractive(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  500</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2d5c575308b3d3e0d4df5d59758390ca" name="a2d5c575308b3d3e0d4df5d59758390ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d5c575308b3d3e0d4df5d59758390ca">&#9670;&nbsp;</a></span>reorderScene</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::reorderScene </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  473</span>                                        {</div>
<div class="line"><span class="lineno">  474</span>  <a class="code hl_class" href="class_schematic_scene.html">SchematicScene</a> *schematicScene = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_schematic_scene.html">SchematicScene</a> *<span class="keyword">&gt;</span>(scene());</div>
<div class="line"><span class="lineno">  475</span>  schematicScene-&gt;reorderScene();</div>
<div class="line"><span class="lineno">  476</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a970a0a61942f52f8057e3f84371bb3c4" name="a970a0a61942f52f8057e3f84371bb3c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a970a0a61942f52f8057e3f84371bb3c4">&#9670;&nbsp;</a></span>setCursorMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::setCursorMode </td>
          <td>(</td>
          <td class="paramtype">CursorMode&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  710</span>                                                              {</div>
<div class="line"><span class="lineno">  711</span>  m_cursorMode = cursorMode;</div>
<div class="line"><span class="lineno">  712</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae7f769686bb2673cf7410ad8572a723e" name="ae7f769686bb2673cf7410ad8572a723e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7f769686bb2673cf7410ad8572a723e">&#9670;&nbsp;</a></span>showEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::showEvent </td>
          <td>(</td>
          <td class="paramtype">QShowEvent *&#160;</td>
          <td class="paramname"><em>se</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  502</span>                                                   {</div>
<div class="line"><span class="lineno">  503</span>  QGraphicsView::showEvent(se);</div>
<div class="line"><span class="lineno">  504</span>  <span class="keywordflow">if</span> (m_firstShowing) {</div>
<div class="line"><span class="lineno">  505</span>    m_firstShowing = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  506</span>    QRectF rect    = scene()-&gt;itemsBoundingRect();</div>
<div class="line"><span class="lineno">  507</span>    resetMatrix();</div>
<div class="line"><span class="lineno">  508</span>    centerOn(rect.center());</div>
<div class="line"><span class="lineno">  509</span>  }</div>
<div class="line"><span class="lineno">  510</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a10beba630958094586cfbdc5a0f89ddb" name="a10beba630958094586cfbdc5a0f89ddb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10beba630958094586cfbdc5a0f89ddb">&#9670;&nbsp;</a></span>tabletEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::tabletEvent </td>
          <td>(</td>
          <td class="paramtype">QTabletEvent *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  534</span>                                                      {</div>
<div class="line"><span class="lineno">  535</span>  <span class="comment">// qDebug() &lt;&lt; &quot;[tabletEvent]&quot;;</span></div>
<div class="line"><span class="lineno">  536</span>  <span class="keywordflow">if</span> (e-&gt;type() == QTabletEvent::TabletPress) {</div>
<div class="line"><span class="lineno">  537</span>    m_stylusUsed = e-&gt;pointerType() ? true : <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  538</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e-&gt;type() == QTabletEvent::TabletRelease) {</div>
<div class="line"><span class="lineno">  539</span>    m_stylusUsed = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  540</span>  }</div>
<div class="line"><span class="lineno">  541</span> </div>
<div class="line"><span class="lineno">  542</span>  e-&gt;accept();</div>
<div class="line"><span class="lineno">  543</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5365b2a0f3eabf90de4a487756cadd9f" name="a5365b2a0f3eabf90de4a487756cadd9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5365b2a0f3eabf90de4a487756cadd9f">&#9670;&nbsp;</a></span>touchEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::touchEvent </td>
          <td>(</td>
          <td class="paramtype">QTouchEvent *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  609</span>                                                              {</div>
<div class="line"><span class="lineno">  610</span>  <span class="comment">// qDebug() &lt;&lt; &quot;[touchEvent]&quot;;</span></div>
<div class="line"><span class="lineno">  611</span>  <span class="keywordflow">if</span> (type == QEvent::TouchBegin) {</div>
<div class="line"><span class="lineno">  612</span>    m_touchActive   = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  613</span>    m_firstPanPoint = e-&gt;touchPoints().at(0).pos();</div>
<div class="line"><span class="lineno">  614</span>    <span class="comment">// obtain device type</span></div>
<div class="line"><span class="lineno">  615</span>    m_touchDevice = e-&gt;device()-&gt;type();</div>
<div class="line"><span class="lineno">  616</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_touchActive) {</div>
<div class="line"><span class="lineno">  617</span>    <span class="comment">// touchpads must have 2 finger panning for tools and navigation to be</span></div>
<div class="line"><span class="lineno">  618</span>    <span class="comment">// functional on other devices, 1 finger panning is preferred</span></div>
<div class="line"><span class="lineno">  619</span>    <span class="keywordflow">if</span> ((e-&gt;touchPoints().count() == 2 &amp;&amp;</div>
<div class="line"><span class="lineno">  620</span>         m_touchDevice == QTouchDevice::TouchPad) ||</div>
<div class="line"><span class="lineno">  621</span>        (e-&gt;touchPoints().count() == 1 &amp;&amp;</div>
<div class="line"><span class="lineno">  622</span>         m_touchDevice == QTouchDevice::TouchScreen)) {</div>
<div class="line"><span class="lineno">  623</span>      QTouchEvent::TouchPoint panPoint = e-&gt;touchPoints().at(0);</div>
<div class="line"><span class="lineno">  624</span>      <span class="keywordflow">if</span> (!m_panning) {</div>
<div class="line"><span class="lineno">  625</span>        QPointF deltaPoint = panPoint.pos() - m_firstPanPoint;</div>
<div class="line"><span class="lineno">  626</span>        <span class="comment">// minimize accidental and jerky zooming/rotating during 2 finger</span></div>
<div class="line"><span class="lineno">  627</span>        <span class="comment">// panning</span></div>
<div class="line"><span class="lineno">  628</span>        <span class="keywordflow">if</span> ((deltaPoint.manhattanLength() &gt; 100) &amp;&amp; !m_zooming) {</div>
<div class="line"><span class="lineno">  629</span>          m_panning = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  630</span>        }</div>
<div class="line"><span class="lineno">  631</span>      }</div>
<div class="line"><span class="lineno">  632</span>      <span class="keywordflow">if</span> (m_panning) {</div>
<div class="line"><span class="lineno">  633</span>        QPointF curPos =</div>
<div class="line"><span class="lineno">  634</span>            m_touchDevice == QTouchDevice::TouchScreen</div>
<div class="line"><span class="lineno">  635</span>                ? mapToScene(panPoint.pos().toPoint())</div>
<div class="line"><span class="lineno">  636</span>                : mapToScene(panPoint.pos().toPoint()) * getDevPixRatio();</div>
<div class="line"><span class="lineno">  637</span>        QPointF lastPos =</div>
<div class="line"><span class="lineno">  638</span>            m_touchDevice == QTouchDevice::TouchScreen</div>
<div class="line"><span class="lineno">  639</span>                ? mapToScene(panPoint.lastPos().toPoint())</div>
<div class="line"><span class="lineno">  640</span>                : mapToScene(panPoint.lastPos().toPoint()) * getDevPixRatio();</div>
<div class="line"><span class="lineno">  641</span>        QPointF centerDelta = curPos - lastPos;</div>
<div class="line"><span class="lineno">  642</span>        panQt(centerDelta);</div>
<div class="line"><span class="lineno">  643</span>      }</div>
<div class="line"><span class="lineno">  644</span>    }</div>
<div class="line"><span class="lineno">  645</span>  }</div>
<div class="line"><span class="lineno">  646</span>  <span class="keywordflow">if</span> (type == QEvent::TouchEnd || type == QEvent::TouchCancel) {</div>
<div class="line"><span class="lineno">  647</span>    m_touchActive = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  648</span>    m_panning     = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  649</span>  }</div>
<div class="line"><span class="lineno">  650</span>  e-&gt;accept();</div>
<div class="line"><span class="lineno">  651</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af3a738281ae3d0ddec41c32b22f72113" name="af3a738281ae3d0ddec41c32b22f72113"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3a738281ae3d0ddec41c32b22f72113">&#9670;&nbsp;</a></span>wheelEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::wheelEvent </td>
          <td>(</td>
          <td class="paramtype">QWheelEvent *&#160;</td>
          <td class="paramname"><em>me</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Reimplemets the QGraphicsView::wheelEvent() </p>
<div class="fragment"><div class="line"><span class="lineno">  362</span>                                                     {</div>
<div class="line"><span class="lineno">  363</span>  <span class="comment">// qDebug() &lt;&lt; &quot;[wheelEvent]&quot;;</span></div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>  <span class="keywordtype">int</span> delta = 0;</div>
<div class="line"><span class="lineno">  366</span>  <span class="keywordflow">switch</span> (me-&gt;source()) {</div>
<div class="line"><span class="lineno">  367</span>  <span class="keywordflow">case</span> Qt::MouseEventNotSynthesized: {</div>
<div class="line"><span class="lineno">  368</span>    <span class="keywordflow">if</span> (me-&gt;modifiers() &amp; Qt::AltModifier)</div>
<div class="line"><span class="lineno">  369</span>      delta = me-&gt;angleDelta().x();</div>
<div class="line"><span class="lineno">  370</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  371</span>      delta = me-&gt;angleDelta().y();</div>
<div class="line"><span class="lineno">  372</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  373</span>  }</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span>  <span class="keywordflow">case</span> Qt::MouseEventSynthesizedBySystem: {</div>
<div class="line"><span class="lineno">  376</span>    QPoint numPixels  = me-&gt;pixelDelta();</div>
<div class="line"><span class="lineno">  377</span>    QPoint numDegrees = me-&gt;angleDelta() / 8;</div>
<div class="line"><span class="lineno">  378</span>    <span class="keywordflow">if</span> (!numPixels.isNull()) {</div>
<div class="line"><span class="lineno">  379</span>      delta = me-&gt;pixelDelta().y();</div>
<div class="line"><span class="lineno">  380</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!numDegrees.isNull()) {</div>
<div class="line"><span class="lineno">  381</span>      QPoint numSteps = numDegrees / 15;</div>
<div class="line"><span class="lineno">  382</span>      delta           = numSteps.y();</div>
<div class="line"><span class="lineno">  383</span>    }</div>
<div class="line"><span class="lineno">  384</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  385</span>  }</div>
<div class="line"><span class="lineno">  386</span> </div>
<div class="line"><span class="lineno">  387</span>  <span class="keywordflow">default</span>:  <span class="comment">// Qt::MouseEventSynthesizedByQt,</span></div>
<div class="line"><span class="lineno">  388</span>            <span class="comment">// Qt::MouseEventSynthesizedByApplication</span></div>
<div class="line"><span class="lineno">  389</span>  {</div>
<div class="line"><span class="lineno">  390</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;not supported event: Qt::MouseEventSynthesizedByQt, &quot;</span></div>
<div class="line"><span class="lineno">  391</span>                 <span class="stringliteral">&quot;Qt::MouseEventSynthesizedByApplication&quot;</span></div>
<div class="line"><span class="lineno">  392</span>              &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  393</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  394</span>  }</div>
<div class="line"><span class="lineno">  395</span> </div>
<div class="line"><span class="lineno">  396</span>  }  <span class="comment">// end switch</span></div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span>  <span class="keywordflow">if</span> (abs(delta) &gt; 0) {</div>
<div class="line"><span class="lineno">  399</span>    <span class="keywordflow">if</span> ((m_gestureActive == <span class="keyword">true</span> &amp;&amp;</div>
<div class="line"><span class="lineno">  400</span>         m_touchDevice == QTouchDevice::TouchScreen) ||</div>
<div class="line"><span class="lineno">  401</span>        m_gestureActive == <span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno">  402</span>      <span class="keywordtype">double</span> factor = exp(delta * 0.001);</div>
<div class="line"><span class="lineno">  403</span>      changeScale(me-&gt;pos(), factor);</div>
<div class="line"><span class="lineno">  404</span>      m_panning = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  405</span>    }</div>
<div class="line"><span class="lineno">  406</span>  }</div>
<div class="line"><span class="lineno">  407</span>  me-&gt;accept();</div>
<div class="line"><span class="lineno">  408</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a19f21cb3e1d187f8ec80f90b928cdf6b" name="a19f21cb3e1d187f8ec80f90b928cdf6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19f21cb3e1d187f8ec80f90b928cdf6b">&#9670;&nbsp;</a></span>zoomQt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SchematicSceneViewer::zoomQt </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>zoomin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>resetView</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  412</span>                                                             {</div>
<div class="line"><span class="lineno">  413</span>  <span class="keywordflow">if</span> (resetView) {</div>
<div class="line"><span class="lineno">  414</span>    resetMatrix();</div>
<div class="line"><span class="lineno">  415</span>    <span class="comment">// resetting will set view to the center of items bounding</span></div>
<div class="line"><span class="lineno">  416</span>    centerOn(scene()-&gt;itemsBoundingRect().center());</div>
<div class="line"><span class="lineno">  417</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  418</span>  }</div>
<div class="line"><span class="lineno">  419</span> </div>
<div class="line"><span class="lineno">  420</span><span class="preprocessor">#if QT_VERSION &gt;= 0x050000</span></div>
<div class="line"><span class="lineno">  421</span>  <span class="keywordtype">double</span> scale2 = matrix().determinant();</div>
<div class="line"><span class="lineno">  422</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  423</span>  <span class="keywordtype">double</span> scale2 = matrix().det();</div>
<div class="line"><span class="lineno">  424</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  425</span>  <span class="keywordflow">if</span> ((scale2 &lt; 100000 || !zoomin) &amp;&amp; (scale2 &gt; 0.001 * 0.05 || zoomin)) {</div>
<div class="line"><span class="lineno">  426</span>    <span class="keywordtype">double</span> oldZoomScale = sqrt(scale2);</div>
<div class="line"><span class="lineno">  427</span>    <span class="keywordtype">double</span> zoomScale =</div>
<div class="line"><span class="lineno">  428</span>        resetView ? 1</div>
<div class="line"><span class="lineno">  429</span>                  : ImageUtils::getQuantizedZoomFactor(oldZoomScale, zoomin);</div>
<div class="line"><span class="lineno">  430</span>    QMatrix scale =</div>
<div class="line"><span class="lineno">  431</span>        QMatrix().scale(zoomScale / oldZoomScale, zoomScale / oldZoomScale);</div>
<div class="line"><span class="lineno">  432</span> </div>
<div class="line"><span class="lineno">  433</span>    <span class="comment">// See QGraphicsView::mapToScene()&#39;s doc for details</span></div>
<div class="line"><span class="lineno">  434</span>    QPointF sceneCenter(mapToScene(rect().center()));</div>
<div class="line"><span class="lineno">  435</span>    setMatrix(scale, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  436</span>    centerOn(sceneCenter);</div>
<div class="line"><span class="lineno">  437</span>  }</div>
<div class="line"><span class="lineno">  438</span>}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>E:/opentoonz/toonz/sources/include/toonzqt/<a class="el" href="">schematicviewer.h</a></li>
<li>E:/opentoonz/toonz/sources/toonzqt/<a class="el" href="">schematicviewer.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
