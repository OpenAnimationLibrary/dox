<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: TSoundInputDevice Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_t_sound_input_device-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">TSoundInputDevice Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="">tsound.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aaed02e6cf6ab5c62d665185c7e05d84e"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><b>Source</b> { <b>Mic</b> = 0
, <b>LineIn</b>
, <b>DigitalIn</b>
, <b>CdAudio</b>
 }</td></tr>
<tr class="separator:aaed02e6cf6ab5c62d665185c7e05d84e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a30cd0779baff7aa1060efd3ac370e624"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_sound_track_format.html">TSoundTrackFormat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_sound_input_device.html#a30cd0779baff7aa1060efd3ac370e624">getPreferredFormat</a> (TUINT32 sampleRate, int channelCount, int bitPerSample)</td></tr>
<tr class="memdesc:a30cd0779baff7aa1060efd3ac370e624"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the best format supported near the given parameters.  <a href="class_t_sound_input_device.html#a30cd0779baff7aa1060efd3ac370e624">More...</a><br /></td></tr>
<tr class="separator:a30cd0779baff7aa1060efd3ac370e624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1952b89ea6dbadc74baa7212157e7d32"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_sound_track_format.html">TSoundTrackFormat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_sound_input_device.html#a1952b89ea6dbadc74baa7212157e7d32">getPreferredFormat</a> (const <a class="el" href="class_t_sound_track_format.html">TSoundTrackFormat</a> &amp;)</td></tr>
<tr class="memdesc:a1952b89ea6dbadc74baa7212157e7d32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the best format supported near the given format.  <a href="class_t_sound_input_device.html#a1952b89ea6dbadc74baa7212157e7d32">More...</a><br /></td></tr>
<tr class="separator:a1952b89ea6dbadc74baa7212157e7d32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20f9c5dba9872fb5b34f39556ffc7c6d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_sound_input_device.html#a20f9c5dba9872fb5b34f39556ffc7c6d">supportsVolume</a> ()</td></tr>
<tr class="separator:a20f9c5dba9872fb5b34f39556ffc7c6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b8c0c91217cb9161e0d52e88ac99ea1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_sound_input_device.html#a2b8c0c91217cb9161e0d52e88ac99ea1">record</a> (const <a class="el" href="class_t_sound_track_format.html">TSoundTrackFormat</a> &amp;format, Source devtype=Mic)</td></tr>
<tr class="separator:a2b8c0c91217cb9161e0d52e88ac99ea1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a122b3c59f1a4f900a191a943df06de79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_sound_input_device.html#a122b3c59f1a4f900a191a943df06de79">record</a> (const <a class="el" href="class_t_smart_pointer_t.html">TSoundTrackP</a> &amp;st, Source src=Mic)</td></tr>
<tr class="separator:a122b3c59f1a4f900a191a943df06de79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82d298619922a95a868bd4417590ff75"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_smart_pointer_t.html">TSoundTrackP</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_sound_input_device.html#a82d298619922a95a868bd4417590ff75">stop</a> ()</td></tr>
<tr class="memdesc:a82d298619922a95a868bd4417590ff75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the recording and returns the result of recording.  <a href="class_t_sound_input_device.html#a82d298619922a95a868bd4417590ff75">More...</a><br /></td></tr>
<tr class="separator:a82d298619922a95a868bd4417590ff75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a610d415aebaaee1ea255cd535de474a5"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_sound_input_device.html#a610d415aebaaee1ea255cd535de474a5">getVolume</a> ()</td></tr>
<tr class="memdesc:a610d415aebaaee1ea255cd535de474a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the current value of the volume.  <a href="class_t_sound_input_device.html#a610d415aebaaee1ea255cd535de474a5">More...</a><br /></td></tr>
<tr class="separator:a610d415aebaaee1ea255cd535de474a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ede6e0a368f7d9c771f06acb17c9e43"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_sound_input_device.html#a9ede6e0a368f7d9c771f06acb17c9e43">setVolume</a> (double value)</td></tr>
<tr class="memdesc:a9ede6e0a368f7d9c771f06acb17c9e43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the value of the volume.  <a href="class_t_sound_input_device.html#a9ede6e0a368f7d9c771f06acb17c9e43">More...</a><br /></td></tr>
<tr class="separator:a9ede6e0a368f7d9c771f06acb17c9e43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aceafed32099c76e57527bc42d2308d9e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_sound_input_device.html#aceafed32099c76e57527bc42d2308d9e">isRecording</a> ()</td></tr>
<tr class="memdesc:aceafed32099c76e57527bc42d2308d9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if and only if the device is recording.  <a href="class_t_sound_input_device.html#aceafed32099c76e57527bc42d2308d9e">More...</a><br /></td></tr>
<tr class="separator:aceafed32099c76e57527bc42d2308d9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a455af2ec237ec8eda4501da35892fb39"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_sound_input_device.html#a455af2ec237ec8eda4501da35892fb39">installed</a> ()</td></tr>
<tr class="separator:a455af2ec237ec8eda4501da35892fb39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="fragment"></div><!-- fragment --><p >The class <a class="el" href="class_t_sound_input_device.html">TSoundInputDevice</a> permits the recording of a new sound track </p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="aaed02e6cf6ab5c62d665185c7e05d84e" name="aaed02e6cf6ab5c62d665185c7e05d84e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaed02e6cf6ab5c62d665185c7e05d84e">&#9670;&nbsp;</a></span>Source</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum TSoundInputDevice::Source</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  288</span>{ Mic = 0, LineIn, DigitalIn, CdAudio };</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7059013b15771bd29c66f4f651e60b41" name="a7059013b15771bd29c66f4f651e60b41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7059013b15771bd29c66f4f651e60b41">&#9670;&nbsp;</a></span>TSoundInputDevice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TSoundInputDevice::TSoundInputDevice </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1154</span>                                     : m_imp(<span class="keyword">new</span> <a class="code hl_class" href="class_t_sound_input_device_imp.html">TSoundInputDeviceImp</a>()) {</div>
<div class="line"><span class="lineno"> 1155</span>  m_imp-&gt;insertAllRate();</div>
<div class="line"><span class="lineno"> 1156</span>  <span class="keywordflow">if</span> (!m_imp-&gt;verifyRate())</div>
<div class="line"><span class="lineno"> 1157</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::FailedInit,</div>
<div class="line"><span class="lineno"> 1158</span>                                <span class="stringliteral">&quot;Unable to verify supported rates&quot;</span>);</div>
<div class="line"><span class="lineno"> 1159</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="class_t_sound_input_device.html#a20f9c5dba9872fb5b34f39556ffc7c6d">supportsVolume</a>()) m_imp-&gt;m_supportVolume = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1160</span>}</div>
<div class="ttc" id="aclass_t_sound_device_exception_html"><div class="ttname"><a href="class_t_sound_device_exception.html">TSoundDeviceException</a></div><div class="ttdef"><b>Definition:</b> tsound.h:248</div></div>
<div class="ttc" id="aclass_t_sound_input_device_html_a20f9c5dba9872fb5b34f39556ffc7c6d"><div class="ttname"><a href="class_t_sound_input_device.html#a20f9c5dba9872fb5b34f39556ffc7c6d">TSoundInputDevice::supportsVolume</a></div><div class="ttdeci">bool supportsVolume()</div><div class="ttdef"><b>Definition:</b> tsound_nt.cpp:1554</div></div>
<div class="ttc" id="aclass_t_sound_input_device_imp_html"><div class="ttname"><a href="class_t_sound_input_device_imp.html">TSoundInputDeviceImp</a></div><div class="ttdef"><b>Definition:</b> tsound_nt.cpp:1033</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abe02437de20d04cfa94fc5861574fe83" name="abe02437de20d04cfa94fc5861574fe83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe02437de20d04cfa94fc5861574fe83">&#9670;&nbsp;</a></span>~TSoundInputDevice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TSoundInputDevice::~TSoundInputDevice </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1164</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a1952b89ea6dbadc74baa7212157e7d32" name="a1952b89ea6dbadc74baa7212157e7d32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1952b89ea6dbadc74baa7212157e7d32">&#9670;&nbsp;</a></span>getPreferredFormat() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_sound_track_format.html">TSoundTrackFormat</a> TSoundInputDevice::getPreferredFormat </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_sound_track_format.html">TSoundTrackFormat</a> &amp;&#160;</td>
          <td class="paramname"><em>format</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the best format supported near the given format. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1742</span>                                     {</div>
<div class="line"><span class="lineno"> 1743</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1744</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="class_t_sound_input_device.html#a30cd0779baff7aa1060efd3ac370e624">getPreferredFormat</a>(format.m_sampleRate, format.m_channelCount,</div>
<div class="line"><span class="lineno"> 1745</span>                              format.m_bitPerSample);</div>
<div class="line"><span class="lineno"> 1746</span>  } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a> &amp;e) {</div>
<div class="line"><span class="lineno"> 1747</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnsupportedFormat,</div>
<div class="line"><span class="lineno"> 1748</span>                                e.getMessage());</div>
<div class="line"><span class="lineno"> 1749</span>  }</div>
<div class="line"><span class="lineno"> 1750</span>}</div>
<div class="ttc" id="aclass_t_sound_input_device_html_a30cd0779baff7aa1060efd3ac370e624"><div class="ttname"><a href="class_t_sound_input_device.html#a30cd0779baff7aa1060efd3ac370e624">TSoundInputDevice::getPreferredFormat</a></div><div class="ttdeci">TSoundTrackFormat getPreferredFormat(TUINT32 sampleRate, int channelCount, int bitPerSample)</div><div class="ttdoc">Returns the best format supported near the given parameters.</div><div class="ttdef"><b>Definition:</b> tsound_nt.cpp:1697</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01697">getPreferredFormat()</a>.</p>

</div>
</div>
<a id="a30cd0779baff7aa1060efd3ac370e624" name="a30cd0779baff7aa1060efd3ac370e624"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30cd0779baff7aa1060efd3ac370e624">&#9670;&nbsp;</a></span>getPreferredFormat() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_sound_track_format.html">TSoundTrackFormat</a> TSoundInputDevice::getPreferredFormat </td>
          <td>(</td>
          <td class="paramtype">TUINT32&#160;</td>
          <td class="paramname"><em>sampleRate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channelCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bitPerSample</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the best format supported near the given parameters. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1699</span>                                                                          {</div>
<div class="line"><span class="lineno"> 1700</span>  <a class="code hl_class" href="class_t_sound_track_format.html">TSoundTrackFormat</a> fmt;</div>
<div class="line"><span class="lineno"> 1701</span> </div>
<div class="line"><span class="lineno"> 1702</span>  <span class="comment">// avvvicinarsi al sample rate =&gt; dovrebbe esser OK avendo selezionato i piu&#39;</span></div>
<div class="line"><span class="lineno"> 1703</span>  <span class="comment">// vicini</span></div>
<div class="line"><span class="lineno"> 1704</span>  std::set&lt;int&gt;::iterator it = m_imp-&gt;m_supportedRate.lower_bound(sampleRate);</div>
<div class="line"><span class="lineno"> 1705</span>  <span class="keywordflow">if</span> (it == m_imp-&gt;m_supportedRate.end()) {</div>
<div class="line"><span class="lineno"> 1706</span>    it = std::max_element(m_imp-&gt;m_supportedRate.begin(),</div>
<div class="line"><span class="lineno"> 1707</span>                          m_imp-&gt;m_supportedRate.end());</div>
<div class="line"><span class="lineno"> 1708</span>    <span class="keywordflow">if</span> (it != m_imp-&gt;m_supportedRate.end())</div>
<div class="line"><span class="lineno"> 1709</span>      sampleRate = *(m_imp-&gt;m_supportedRate.rbegin());</div>
<div class="line"><span class="lineno"> 1710</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1711</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnsupportedFormat,</div>
<div class="line"><span class="lineno"> 1712</span>                                  <span class="stringliteral">&quot;There isn&#39;t a supported format&quot;</span>);</div>
<div class="line"><span class="lineno"> 1713</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1714</span>    sampleRate = *it;</div>
<div class="line"><span class="lineno"> 1715</span> </div>
<div class="line"><span class="lineno"> 1716</span>  <span class="keywordflow">if</span> (bitPerSample &lt;= 8)</div>
<div class="line"><span class="lineno"> 1717</span>    bitPerSample = 8;</div>
<div class="line"><span class="lineno"> 1718</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((bitPerSample &gt; 8 &amp;&amp; bitPerSample &lt; 16) || bitPerSample &gt;= 16)</div>
<div class="line"><span class="lineno"> 1719</span>    bitPerSample = 16;</div>
<div class="line"><span class="lineno"> 1720</span> </div>
<div class="line"><span class="lineno"> 1721</span>  <span class="keywordflow">if</span> (bitPerSample &gt;= 16)</div>
<div class="line"><span class="lineno"> 1722</span>    fmt.m_signedSample = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1723</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1724</span>    fmt.m_signedSample = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1725</span> </div>
<div class="line"><span class="lineno"> 1726</span>  <span class="comment">// switch mono/stereo</span></div>
<div class="line"><span class="lineno"> 1727</span>  <span class="keywordflow">if</span> (channelCount &lt;= 1)</div>
<div class="line"><span class="lineno"> 1728</span>    channelCount = 1;</div>
<div class="line"><span class="lineno"> 1729</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1730</span>    channelCount = 2;</div>
<div class="line"><span class="lineno"> 1731</span> </div>
<div class="line"><span class="lineno"> 1732</span>  fmt.m_bitPerSample = bitPerSample;</div>
<div class="line"><span class="lineno"> 1733</span>  fmt.m_channelCount = channelCount;</div>
<div class="line"><span class="lineno"> 1734</span>  fmt.m_sampleRate   = sampleRate;</div>
<div class="line"><span class="lineno"> 1735</span> </div>
<div class="line"><span class="lineno"> 1736</span>  <span class="keywordflow">return</span> fmt;</div>
<div class="line"><span class="lineno"> 1737</span>}</div>
<div class="ttc" id="aclass_t_sound_track_format_html"><div class="ttname"><a href="class_t_sound_track_format.html">TSoundTrackFormat</a></div><div class="ttdef"><b>Definition:</b> tsound.h:50</div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l01741">getPreferredFormat()</a>, and <a class="el" href="#l01178">record()</a>.</p>

</div>
</div>
<a id="a610d415aebaaee1ea255cd535de474a5" name="a610d415aebaaee1ea255cd535de474a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a610d415aebaaee1ea255cd535de474a5">&#9670;&nbsp;</a></span>getVolume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double TSoundInputDevice::getVolume </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the current value of the volume. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1460</span>                                    {</div>
<div class="line"><span class="lineno"> 1461</span>  DWORD dwVolumeControlID;</div>
<div class="line"><span class="lineno"> 1462</span> </div>
<div class="line"><span class="lineno"> 1463</span>  UINT nNumMixers;</div>
<div class="line"><span class="lineno"> 1464</span>  MMRESULT ret;</div>
<div class="line"><span class="lineno"> 1465</span>  MIXERLINE mxl;</div>
<div class="line"><span class="lineno"> 1466</span> </div>
<div class="line"><span class="lineno"> 1467</span>  nNumMixers = mixerGetNumDevs();</div>
<div class="line"><span class="lineno"> 1468</span> </div>
<div class="line"><span class="lineno"> 1469</span>  <span class="keywordflow">if</span> (nNumMixers == 0)</div>
<div class="line"><span class="lineno"> 1470</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::NoMixer,</div>
<div class="line"><span class="lineno"> 1471</span>                                <span class="stringliteral">&quot;Doesn&#39;t exist a audio mixer device&quot;</span>);</div>
<div class="line"><span class="lineno"> 1472</span> </div>
<div class="line"><span class="lineno"> 1473</span>  <span class="comment">// get dwLineID</span></div>
<div class="line"><span class="lineno"> 1474</span>  ret = getLineInfo((HMIXEROBJ)0, MIXERLINE_COMPONENTTYPE_DST_WAVEIN, mxl);</div>
<div class="line"><span class="lineno"> 1475</span>  <span class="keywordflow">if</span> (ret != MMSYSERR_NOERROR)</div>
<div class="line"><span class="lineno"> 1476</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnableVolume,</div>
<div class="line"><span class="lineno"> 1477</span>                                <span class="stringliteral">&quot;Error to obtain info by mixer&quot;</span>);</div>
<div class="line"><span class="lineno"> 1478</span> </div>
<div class="line"><span class="lineno"> 1479</span>  <span class="comment">// get dwControlID</span></div>
<div class="line"><span class="lineno"> 1480</span>  MIXERCONTROL mxc;</div>
<div class="line"><span class="lineno"> 1481</span>  ret = getLineControl(mxc, (HMIXEROBJ)0, mxl.dwLineID,</div>
<div class="line"><span class="lineno"> 1482</span>                       MIXERCONTROL_CONTROLTYPE_VOLUME);</div>
<div class="line"><span class="lineno"> 1483</span>  <span class="keywordflow">if</span> (ret == MIXERR_INVALCONTROL)</div>
<div class="line"><span class="lineno"> 1484</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(</div>
<div class="line"><span class="lineno"> 1485</span>        TSoundDeviceException::UnableVolume,</div>
<div class="line"><span class="lineno"> 1486</span>        <span class="stringliteral">&quot;Is not possible to obtain info of volume by mixer&quot;</span>);</div>
<div class="line"><span class="lineno"> 1487</span> </div>
<div class="line"><span class="lineno"> 1488</span>  <span class="keywordflow">if</span> (ret != MMSYSERR_NOERROR)</div>
<div class="line"><span class="lineno"> 1489</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnableVolume,</div>
<div class="line"><span class="lineno"> 1490</span>                                <span class="stringliteral">&quot;Error to obtain info by mixer&quot;</span>);</div>
<div class="line"><span class="lineno"> 1491</span> </div>
<div class="line"><span class="lineno"> 1492</span>  dwVolumeControlID = mxc.dwControlID;</div>
<div class="line"><span class="lineno"> 1493</span> </div>
<div class="line"><span class="lineno"> 1494</span>  MIXERCONTROLDETAILS_UNSIGNED mxcdVolume;</div>
<div class="line"><span class="lineno"> 1495</span> </div>
<div class="line"><span class="lineno"> 1496</span>  ret = getControlDetails((HMIXEROBJ)0, dwVolumeControlID, mxc.cMultipleItems,</div>
<div class="line"><span class="lineno"> 1497</span>                          &amp;mxcdVolume);</div>
<div class="line"><span class="lineno"> 1498</span>  <span class="keywordflow">if</span> (ret != MMSYSERR_NOERROR)</div>
<div class="line"><span class="lineno"> 1499</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnableVolume,</div>
<div class="line"><span class="lineno"> 1500</span>                                <span class="stringliteral">&quot;Error to obtain info by mixer&quot;</span>);</div>
<div class="line"><span class="lineno"> 1501</span> </div>
<div class="line"><span class="lineno"> 1502</span>  DWORD dwVal = mxcdVolume.dwValue;</div>
<div class="line"><span class="lineno"> 1503</span> </div>
<div class="line"><span class="lineno"> 1504</span>  <span class="keywordflow">return</span> (<span class="keywordtype">double</span>)dwVal * 10.0 / (double)mxc.Bounds.dwMaximum;</div>
<div class="line"><span class="lineno"> 1505</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a455af2ec237ec8eda4501da35892fb39" name="a455af2ec237ec8eda4501da35892fb39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a455af2ec237ec8eda4501da35892fb39">&#9670;&nbsp;</a></span>installed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool TSoundInputDevice::installed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Returns true if on the machine there is an audio card installed correctly </p>
<div class="fragment"><div class="line"><span class="lineno"> 1168</span>                                  {</div>
<div class="line"><span class="lineno"> 1169</span>  <span class="keywordtype">int</span> ndev = waveInGetNumDevs();</div>
<div class="line"><span class="lineno"> 1170</span>  <span class="keywordflow">if</span> (ndev &lt;= 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1171</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1172</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aceafed32099c76e57527bc42d2308d9e" name="aceafed32099c76e57527bc42d2308d9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aceafed32099c76e57527bc42d2308d9e">&#9670;&nbsp;</a></span>isRecording()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TSoundInputDevice::isRecording </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if and only if the device is recording. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1586</span>{ <span class="keywordflow">return</span> m_imp-&gt;m_isRecording; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2b8c0c91217cb9161e0d52e88ac99ea1" name="a2b8c0c91217cb9161e0d52e88ac99ea1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b8c0c91217cb9161e0d52e88ac99ea1">&#9670;&nbsp;</a></span>record() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TSoundInputDevice::record </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_sound_track_format.html">TSoundTrackFormat</a> &amp;&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TSoundInputDevice::Source&#160;</td>
          <td class="paramname"><em>type</em> = <code>Mic</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Starts the recording of a soundtrack with the given format from the given source. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1179</span>                                               {</div>
<div class="line"><span class="lineno"> 1180</span>  <span class="keywordflow">if</span> (m_imp-&gt;m_isRecording)</div>
<div class="line"><span class="lineno"> 1181</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::Busy,</div>
<div class="line"><span class="lineno"> 1182</span>                                <span class="stringliteral">&quot;Just another recoding is in progress&quot;</span>);</div>
<div class="line"><span class="lineno"> 1183</span> </div>
<div class="line"><span class="lineno"> 1184</span>  <span class="comment">/*if ((format.m_bitPerSample == 8 &amp;&amp; format.m_signedSample) ||</span></div>
<div class="line"><span class="lineno"> 1185</span><span class="comment">(format.m_bitPerSample == 24))</span></div>
<div class="line"><span class="lineno"> 1186</span><span class="comment">throw TException(&quot;This format is not supported for recording&quot;);*/</span></div>
<div class="line"><span class="lineno"> 1187</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1188</span>    <a class="code hl_class" href="class_t_sound_track_format.html">TSoundTrackFormat</a> fmt = <a class="code hl_function" href="class_t_sound_input_device.html#a30cd0779baff7aa1060efd3ac370e624">getPreferredFormat</a>(format);</div>
<div class="line"><span class="lineno"> 1189</span>    <span class="keywordflow">if</span> (fmt != format) {</div>
<div class="line"><span class="lineno"> 1190</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnsupportedFormat,</div>
<div class="line"><span class="lineno"> 1191</span>                                  <span class="stringliteral">&quot;Unsupported Format&quot;</span>);</div>
<div class="line"><span class="lineno"> 1192</span>    }</div>
<div class="line"><span class="lineno"> 1193</span>  } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a> &amp;e) {</div>
<div class="line"><span class="lineno"> 1194</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnsupportedFormat,</div>
<div class="line"><span class="lineno"> 1195</span>                                e.getMessage());</div>
<div class="line"><span class="lineno"> 1196</span>  }</div>
<div class="line"><span class="lineno"> 1197</span> </div>
<div class="line"><span class="lineno"> 1198</span>  <span class="keywordflow">if</span> (!setRecordLine(devtype))</div>
<div class="line"><span class="lineno"> 1199</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnableSetDevice,</div>
<div class="line"><span class="lineno"> 1200</span>                                <span class="stringliteral">&quot;Problems to set input source line to record&quot;</span>);</div>
<div class="line"><span class="lineno"> 1201</span> </div>
<div class="line"><span class="lineno"> 1202</span>  m_imp-&gt;m_format = format;</div>
<div class="line"><span class="lineno"> 1203</span>  m_imp-&gt;m_st     = 0;</div>
<div class="line"><span class="lineno"> 1204</span>  ResetEvent(m_imp-&gt;m_hLastBlockDone);</div>
<div class="line"><span class="lineno"> 1205</span>  ResetEvent(m_imp-&gt;m_hBlockDone);</div>
<div class="line"><span class="lineno"> 1206</span>  m_imp-&gt;m_allocateBuff = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1207</span>  m_imp-&gt;m_isRecording  = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1208</span>  m_imp-&gt;m_index        = 0;</div>
<div class="line"><span class="lineno"> 1209</span>  m_imp-&gt;m_recordedBlocks.clear();</div>
<div class="line"><span class="lineno"> 1210</span>  m_imp-&gt;m_byteRecorded = 0;</div>
<div class="line"><span class="lineno"> 1211</span>  TINT32 bytePerSec     = format.m_sampleRate *</div>
<div class="line"><span class="lineno"> 1212</span>                      ((format.m_bitPerSample * format.m_channelCount) &gt;&gt; 3);</div>
<div class="line"><span class="lineno"> 1213</span> </div>
<div class="line"><span class="lineno"> 1214</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1215</span>    <a class="code hl_class" href="class_wave_format.html">WaveFormat</a> wf(m_imp-&gt;m_format.m_channelCount, m_imp-&gt;m_format.m_sampleRate,</div>
<div class="line"><span class="lineno"> 1216</span>                  m_imp-&gt;m_format.m_bitPerSample);</div>
<div class="line"><span class="lineno"> 1217</span> </div>
<div class="line"><span class="lineno"> 1218</span>    m_imp-&gt;open(wf);</div>
<div class="line"><span class="lineno"> 1219</span>  } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;e) {</div>
<div class="line"><span class="lineno"> 1220</span>    m_imp-&gt;m_isRecording = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1221</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnableOpenDevice,</div>
<div class="line"><span class="lineno"> 1222</span>                                e.getMessage());</div>
<div class="line"><span class="lineno"> 1223</span>  }</div>
<div class="line"><span class="lineno"> 1224</span>  <span class="keywordflow">for</span> (; m_imp-&gt;m_index &lt; (int)(m_imp-&gt;m_whdr.size() - 1); ++m_imp-&gt;m_index) {</div>
<div class="line"><span class="lineno"> 1225</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1226</span>      m_imp-&gt;prepareHeader(<span class="keyword">new</span> <span class="keywordtype">char</span>[bytePerSec], bytePerSec,</div>
<div class="line"><span class="lineno"> 1227</span>                           m_imp-&gt;m_whdr[m_imp-&gt;m_index]);</div>
<div class="line"><span class="lineno"> 1228</span>      m_imp-&gt;addBlock(m_imp-&gt;m_whdr[m_imp-&gt;m_index]);</div>
<div class="line"><span class="lineno"> 1229</span>    } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;e) {</div>
<div class="line"><span class="lineno"> 1230</span>      m_imp-&gt;m_isRecording = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1231</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; (int)(m_imp-&gt;m_whdr.size() - 1); ++j) {</div>
<div class="line"><span class="lineno"> 1232</span>        <span class="keywordflow">if</span> (m_imp-&gt;m_whdr[j].dwFlags &amp; WHDR_PREPARED) {</div>
<div class="line"><span class="lineno"> 1233</span>          <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1234</span>            m_imp-&gt;unprepareHeader(m_imp-&gt;m_whdr[j]);</div>
<div class="line"><span class="lineno"> 1235</span>          } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;e) {</div>
<div class="line"><span class="lineno"> 1236</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(</div>
<div class="line"><span class="lineno"> 1237</span>                TSoundDeviceException::UnableCloseDevice, e.getMessage());</div>
<div class="line"><span class="lineno"> 1238</span>          }</div>
<div class="line"><span class="lineno"> 1239</span>          <span class="keyword">delete</span>[] m_imp-&gt;m_whdr[j].lpData;</div>
<div class="line"><span class="lineno"> 1240</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (j == m_imp-&gt;m_index)</div>
<div class="line"><span class="lineno"> 1241</span>          <span class="keyword">delete</span>[] m_imp-&gt;m_whdr[j].lpData;</div>
<div class="line"><span class="lineno"> 1242</span>      }</div>
<div class="line"><span class="lineno"> 1243</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnablePrepare,</div>
<div class="line"><span class="lineno"> 1244</span>                                  e.getMessage());</div>
<div class="line"><span class="lineno"> 1245</span>    }</div>
<div class="line"><span class="lineno"> 1246</span>  }</div>
<div class="line"><span class="lineno"> 1247</span> </div>
<div class="line"><span class="lineno"> 1248</span>  m_imp-&gt;m_executor.addTask(<span class="keyword">new</span> <a class="code hl_class" href="class_record_task.html">RecordTask</a>(m_imp));</div>
<div class="line"><span class="lineno"> 1249</span>}</div>
<div class="ttc" id="aclass_record_task_html"><div class="ttname"><a href="class_record_task.html">RecordTask</a></div><div class="ttdef"><b>Definition:</b> tsound_nt.cpp:1017</div></div>
<div class="ttc" id="aclass_t_exception_html"><div class="ttname"><a href="class_t_exception.html">TException</a></div><div class="ttdef"><b>Definition:</b> texception.h:18</div></div>
<div class="ttc" id="aclass_wave_format_html"><div class="ttname"><a href="class_wave_format.html">WaveFormat</a></div><div class="ttdef"><b>Definition:</b> tsound_nt.cpp:864</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l01697">getPreferredFormat()</a>.</p>

</div>
</div>
<a id="a122b3c59f1a4f900a191a943df06de79" name="a122b3c59f1a4f900a191a943df06de79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a122b3c59f1a4f900a191a943df06de79">&#9670;&nbsp;</a></span>record() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TSoundInputDevice::record </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_smart_pointer_t.html">TSoundTrackP</a> &amp;&#160;</td>
          <td class="paramname"><em>st</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TSoundInputDevice::Source&#160;</td>
          <td class="paramname"><em>type</em> = <code>Mic</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Starts the recording over the soundtrack st from the given source. If not stopped before, recording ends when the whole soundtrack has been overwritten. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1253</span>                                                                     {</div>
<div class="line"><span class="lineno"> 1254</span>  <span class="keywordflow">if</span> (m_imp-&gt;m_isRecording)</div>
<div class="line"><span class="lineno"> 1255</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::Busy,</div>
<div class="line"><span class="lineno"> 1256</span>                                <span class="stringliteral">&quot;Just another recoding is in progress&quot;</span>);</div>
<div class="line"><span class="lineno"> 1257</span> </div>
<div class="line"><span class="lineno"> 1258</span>  m_imp-&gt;m_format = st-&gt;<a class="code hl_function" href="class_t_sound_track.html#aa58db0cee313f7174bc023e295b701a9">getFormat</a>();</div>
<div class="line"><span class="lineno"> 1259</span>  <span class="comment">/*if ((m_imp-&gt;m_format.m_bitPerSample == 8 &amp;&amp; m_imp-&gt;m_format.m_signedSample)</span></div>
<div class="line"><span class="lineno"> 1260</span><span class="comment">||</span></div>
<div class="line"><span class="lineno"> 1261</span><span class="comment">(m_imp-&gt;m_format.m_bitPerSample == 24))</span></div>
<div class="line"><span class="lineno"> 1262</span><span class="comment">throw TException(&quot;This format is not supported for recording&quot;);*/</span></div>
<div class="line"><span class="lineno"> 1263</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1264</span>    <a class="code hl_class" href="class_t_sound_track_format.html">TSoundTrackFormat</a> fmt = <a class="code hl_function" href="class_t_sound_input_device.html#a30cd0779baff7aa1060efd3ac370e624">getPreferredFormat</a>(st-&gt;<a class="code hl_function" href="class_t_sound_track.html#aa58db0cee313f7174bc023e295b701a9">getFormat</a>());</div>
<div class="line"><span class="lineno"> 1265</span>    <span class="keywordflow">if</span> (fmt != st-&gt;<a class="code hl_function" href="class_t_sound_track.html#aa58db0cee313f7174bc023e295b701a9">getFormat</a>()) {</div>
<div class="line"><span class="lineno"> 1266</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnsupportedFormat,</div>
<div class="line"><span class="lineno"> 1267</span>                                  <span class="stringliteral">&quot;Unsupported Format&quot;</span>);</div>
<div class="line"><span class="lineno"> 1268</span>    }</div>
<div class="line"><span class="lineno"> 1269</span>  } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a> &amp;e) {</div>
<div class="line"><span class="lineno"> 1270</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnsupportedFormat,</div>
<div class="line"><span class="lineno"> 1271</span>                                e.getMessage());</div>
<div class="line"><span class="lineno"> 1272</span>  }</div>
<div class="line"><span class="lineno"> 1273</span> </div>
<div class="line"><span class="lineno"> 1274</span>  <span class="keywordflow">if</span> (!setRecordLine(devtype))</div>
<div class="line"><span class="lineno"> 1275</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnableSetDevice,</div>
<div class="line"><span class="lineno"> 1276</span>                                <span class="stringliteral">&quot;Problems to set input source line to record&quot;</span>);</div>
<div class="line"><span class="lineno"> 1277</span> </div>
<div class="line"><span class="lineno"> 1278</span>  m_imp-&gt;m_st           = st;</div>
<div class="line"><span class="lineno"> 1279</span>  m_imp-&gt;m_allocateBuff = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1280</span>  m_imp-&gt;m_isRecording  = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1281</span>  ResetEvent(m_imp-&gt;m_hLastBlockDone);</div>
<div class="line"><span class="lineno"> 1282</span>  ResetEvent(m_imp-&gt;m_hBlockDone);</div>
<div class="line"><span class="lineno"> 1283</span>  m_imp-&gt;m_index = 0;</div>
<div class="line"><span class="lineno"> 1284</span>  m_imp-&gt;m_recordedBlocks.clear();</div>
<div class="line"><span class="lineno"> 1285</span>  m_imp-&gt;m_byteRecorded = 0;</div>
<div class="line"><span class="lineno"> 1286</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1287</span>    <a class="code hl_class" href="class_wave_format.html">WaveFormat</a> wf(m_imp-&gt;m_format.m_channelCount, m_imp-&gt;m_format.m_sampleRate,</div>
<div class="line"><span class="lineno"> 1288</span>                  m_imp-&gt;m_format.m_bitPerSample);</div>
<div class="line"><span class="lineno"> 1289</span> </div>
<div class="line"><span class="lineno"> 1290</span>    m_imp-&gt;open(wf);</div>
<div class="line"><span class="lineno"> 1291</span>    m_imp-&gt;prepareHeader(</div>
<div class="line"><span class="lineno"> 1292</span>        (<span class="keywordtype">char</span> *)st-&gt;<a class="code hl_function" href="class_t_sound_track.html#ae47a8e255a18ddbc83d31b6c0c834e68">getRawData</a>(),</div>
<div class="line"><span class="lineno"> 1293</span>        st-&gt;getSampleCount() *</div>
<div class="line"><span class="lineno"> 1294</span>            ((st-&gt;getBitPerSample() * st-&gt;getChannelCount()) &gt;&gt; 3),</div>
<div class="line"><span class="lineno"> 1295</span>        m_imp-&gt;m_whdr[m_imp-&gt;m_index]);</div>
<div class="line"><span class="lineno"> 1296</span>    m_imp-&gt;addBlock(m_imp-&gt;m_whdr[m_imp-&gt;m_index]);</div>
<div class="line"><span class="lineno"> 1297</span>  } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;e) {</div>
<div class="line"><span class="lineno"> 1298</span>    m_imp-&gt;m_isRecording = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1299</span>    <span class="keywordflow">if</span> (m_imp-&gt;m_whdr[m_imp-&gt;m_index].dwFlags &amp; WHDR_PREPARED)</div>
<div class="line"><span class="lineno"> 1300</span>      m_imp-&gt;unprepareHeader(m_imp-&gt;m_whdr[m_imp-&gt;m_index]);</div>
<div class="line"><span class="lineno"> 1301</span> </div>
<div class="line"><span class="lineno"> 1302</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnablePrepare,</div>
<div class="line"><span class="lineno"> 1303</span>                                e.getMessage());</div>
<div class="line"><span class="lineno"> 1304</span>  }</div>
<div class="line"><span class="lineno"> 1305</span> </div>
<div class="line"><span class="lineno"> 1306</span>  m_imp-&gt;m_executor.addTask(<span class="keyword">new</span> <a class="code hl_class" href="class_record_task.html">RecordTask</a>(m_imp));</div>
<div class="line"><span class="lineno"> 1307</span>}</div>
<div class="ttc" id="aclass_t_sound_track_html_aa58db0cee313f7174bc023e295b701a9"><div class="ttname"><a href="class_t_sound_track.html#aa58db0cee313f7174bc023e295b701a9">TSoundTrack::getFormat</a></div><div class="ttdeci">TSoundTrackFormat getFormat() const</div><div class="ttdoc">Returns the soundtrack format.</div><div class="ttdef"><b>Definition:</b> tsound.cpp:250</div></div>
<div class="ttc" id="aclass_t_sound_track_html_ae47a8e255a18ddbc83d31b6c0c834e68"><div class="ttname"><a href="class_t_sound_track.html#ae47a8e255a18ddbc83d31b6c0c834e68">TSoundTrack::getRawData</a></div><div class="ttdeci">const UCHAR * getRawData() const</div><div class="ttdoc">Returns a pointer to the samples buffer.</div><div class="ttdef"><b>Definition:</b> tsound.h:150</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00250">TSoundTrack::getFormat()</a>, <a class="el" href="#l01697">getPreferredFormat()</a>, and <a class="el" href="#l00150">TSoundTrack::getRawData()</a>.</p>

</div>
</div>
<a id="a9ede6e0a368f7d9c771f06acb17c9e43" name="a9ede6e0a368f7d9c771f06acb17c9e43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ede6e0a368f7d9c771f06acb17c9e43">&#9670;&nbsp;</a></span>setVolume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TSoundInputDevice::setVolume </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the value of the volume. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1509</span>                                              {</div>
<div class="line"><span class="lineno"> 1510</span>  DWORD dwVolumeControlID, dwMaximum;</div>
<div class="line"><span class="lineno"> 1511</span> </div>
<div class="line"><span class="lineno"> 1512</span>  UINT nNumMixers;</div>
<div class="line"><span class="lineno"> 1513</span>  MMRESULT ret;</div>
<div class="line"><span class="lineno"> 1514</span>  MIXERLINE mxl;</div>
<div class="line"><span class="lineno"> 1515</span> </div>
<div class="line"><span class="lineno"> 1516</span>  nNumMixers = mixerGetNumDevs();</div>
<div class="line"><span class="lineno"> 1517</span> </div>
<div class="line"><span class="lineno"> 1518</span>  <span class="keywordflow">if</span> (nNumMixers == 0)</div>
<div class="line"><span class="lineno"> 1519</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::NoMixer,</div>
<div class="line"><span class="lineno"> 1520</span>                                <span class="stringliteral">&quot;Doesn&#39;t exist a audio mixer device&quot;</span>);</div>
<div class="line"><span class="lineno"> 1521</span> </div>
<div class="line"><span class="lineno"> 1522</span>  <span class="comment">// get dwLineID</span></div>
<div class="line"><span class="lineno"> 1523</span>  ret = getLineInfo((HMIXEROBJ)0, MIXERLINE_COMPONENTTYPE_DST_WAVEIN, mxl);</div>
<div class="line"><span class="lineno"> 1524</span>  <span class="keywordflow">if</span> (ret != MMSYSERR_NOERROR)</div>
<div class="line"><span class="lineno"> 1525</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_exception.html">TException</a>(<span class="stringliteral">&quot;Error to obtain info by mixer&quot;</span>);</div>
<div class="line"><span class="lineno"> 1526</span> </div>
<div class="line"><span class="lineno"> 1527</span>  <span class="comment">// get dwControlID</span></div>
<div class="line"><span class="lineno"> 1528</span>  MIXERCONTROL mxc;</div>
<div class="line"><span class="lineno"> 1529</span>  ret = getLineControl(mxc, (HMIXEROBJ)0, mxl.dwLineID,</div>
<div class="line"><span class="lineno"> 1530</span>                       MIXERCONTROL_CONTROLTYPE_VOLUME);</div>
<div class="line"><span class="lineno"> 1531</span>  <span class="keywordflow">if</span> (ret != MMSYSERR_NOERROR)</div>
<div class="line"><span class="lineno"> 1532</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnableVolume,</div>
<div class="line"><span class="lineno"> 1533</span>                                <span class="stringliteral">&quot;Error to obtain info by mixer&quot;</span>);</div>
<div class="line"><span class="lineno"> 1534</span> </div>
<div class="line"><span class="lineno"> 1535</span>  dwMaximum         = mxc.Bounds.dwMaximum;</div>
<div class="line"><span class="lineno"> 1536</span>  dwVolumeControlID = mxc.dwControlID;</div>
<div class="line"><span class="lineno"> 1537</span> </div>
<div class="line"><span class="lineno"> 1538</span>  <span class="keywordtype">int</span> newValue;</div>
<div class="line"><span class="lineno"> 1539</span>  <span class="keywordtype">double</span> fattProp = ((double)(mxc.Metrics.cSteps - 1) * value) / 10;</div>
<div class="line"><span class="lineno"> 1540</span>  <span class="keywordtype">double</span> delta    = (double)(dwMaximum / (mxc.Metrics.cSteps - 1));</div>
<div class="line"><span class="lineno"> 1541</span>  newValue        = (int)(tround(fattProp) * delta);</div>
<div class="line"><span class="lineno"> 1542</span> </div>
<div class="line"><span class="lineno"> 1543</span>  MIXERCONTROLDETAILS_UNSIGNED mxcdVolume = {newValue};</div>
<div class="line"><span class="lineno"> 1544</span>  ret = setControlDetails((HMIXEROBJ)0, dwVolumeControlID, mxc.cMultipleItems,</div>
<div class="line"><span class="lineno"> 1545</span>                          &amp;mxcdVolume);</div>
<div class="line"><span class="lineno"> 1546</span>  <span class="keywordflow">if</span> (ret != MMSYSERR_NOERROR)</div>
<div class="line"><span class="lineno"> 1547</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnableVolume,</div>
<div class="line"><span class="lineno"> 1548</span>                                <span class="stringliteral">&quot;Error to obtain info by mixer&quot;</span>);</div>
<div class="line"><span class="lineno"> 1549</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1550</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a82d298619922a95a868bd4417590ff75" name="a82d298619922a95a868bd4417590ff75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82d298619922a95a868bd4417590ff75">&#9670;&nbsp;</a></span>stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_smart_pointer_t.html">TSoundTrackP</a> TSoundInputDevice::stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops the recording and returns the result of recording. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1312</span>                                     {</div>
<div class="line"><span class="lineno"> 1313</span>  <span class="keywordflow">if</span> (!m_imp-&gt;m_isRecording) <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1314</span> </div>
<div class="line"><span class="lineno"> 1315</span>  m_imp-&gt;m_isRecording = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1316</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1317</span>    m_imp-&gt;reset();</div>
<div class="line"><span class="lineno"> 1318</span>  } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;e) {</div>
<div class="line"><span class="lineno"> 1319</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; (int)m_imp-&gt;m_whdr.size(); ++j) {</div>
<div class="line"><span class="lineno"> 1320</span>      <span class="keywordflow">if</span> (m_imp-&gt;m_whdr[j].dwFlags &amp; WHDR_PREPARED) {</div>
<div class="line"><span class="lineno"> 1321</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1322</span>          m_imp-&gt;unprepareHeader(m_imp-&gt;m_whdr[j]);</div>
<div class="line"><span class="lineno"> 1323</span>        } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;e) {</div>
<div class="line"><span class="lineno"> 1324</span>          <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnablePrepare,</div>
<div class="line"><span class="lineno"> 1325</span>                                      e.getMessage());</div>
<div class="line"><span class="lineno"> 1326</span>        }</div>
<div class="line"><span class="lineno"> 1327</span>        <span class="keyword">delete</span>[] m_imp-&gt;m_whdr[j].lpData;</div>
<div class="line"><span class="lineno"> 1328</span>      }</div>
<div class="line"><span class="lineno"> 1329</span>    }</div>
<div class="line"><span class="lineno"> 1330</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnableCloseDevice,</div>
<div class="line"><span class="lineno"> 1331</span>                                e.getMessage());</div>
<div class="line"><span class="lineno"> 1332</span>  }</div>
<div class="line"><span class="lineno"> 1333</span> </div>
<div class="line"><span class="lineno"> 1334</span>  <span class="keywordflow">if</span> (m_imp-&gt;m_allocateBuff) {</div>
<div class="line"><span class="lineno"> 1335</span>    WaitForSingleObject(m_imp-&gt;m_hLastBlockDone, INFINITE);</div>
<div class="line"><span class="lineno"> 1336</span> </div>
<div class="line"><span class="lineno"> 1337</span>    <a class="code hl_class" href="class_t_smart_pointer_t.html">TSoundTrackP</a> st = <a class="code hl_function" href="class_t_sound_track.html#a9a83177a9a5b9a7470f32b87e7f21f3d">TSoundTrack::create</a>(</div>
<div class="line"><span class="lineno"> 1338</span>        m_imp-&gt;m_format,</div>
<div class="line"><span class="lineno"> 1339</span>        m_imp-&gt;m_byteRecorded / ((m_imp-&gt;m_format.m_bitPerSample *</div>
<div class="line"><span class="lineno"> 1340</span>                                  m_imp-&gt;m_format.m_channelCount) &gt;&gt;</div>
<div class="line"><span class="lineno"> 1341</span>                                 3));</div>
<div class="line"><span class="lineno"> 1342</span> </div>
<div class="line"><span class="lineno"> 1343</span>    TINT32 bytePerSec =</div>
<div class="line"><span class="lineno"> 1344</span>        m_imp-&gt;m_format.m_sampleRate *</div>
<div class="line"><span class="lineno"> 1345</span>        ((m_imp-&gt;m_format.m_bitPerSample * m_imp-&gt;m_format.m_channelCount) &gt;&gt;</div>
<div class="line"><span class="lineno"> 1346</span>         3);</div>
<div class="line"><span class="lineno"> 1347</span> </div>
<div class="line"><span class="lineno"> 1348</span>    <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno"> 1349</span>    <span class="keywordflow">for</span> (i = 0; i &lt; (int)(m_imp-&gt;m_recordedBlocks.size() - 1); ++i) {</div>
<div class="line"><span class="lineno"> 1350</span>      memcpy((<span class="keywordtype">void</span> *)(st-&gt;<a class="code hl_function" href="class_t_sound_track.html#ae47a8e255a18ddbc83d31b6c0c834e68">getRawData</a>() + bytePerSec * i),</div>
<div class="line"><span class="lineno"> 1351</span>             m_imp-&gt;m_recordedBlocks[i], bytePerSec);</div>
<div class="line"><span class="lineno"> 1352</span>      <span class="keyword">delete</span>[] m_imp-&gt;m_recordedBlocks[i];</div>
<div class="line"><span class="lineno"> 1353</span>    }</div>
<div class="line"><span class="lineno"> 1354</span> </div>
<div class="line"><span class="lineno"> 1355</span>    TINT32 lastBlockSize = m_imp-&gt;m_byteRecorded - (bytePerSec * i);</div>
<div class="line"><span class="lineno"> 1356</span> </div>
<div class="line"><span class="lineno"> 1357</span>    <span class="keywordflow">if</span> (lastBlockSize != 0) {</div>
<div class="line"><span class="lineno"> 1358</span>      memcpy((<span class="keywordtype">void</span> *)(st-&gt;<a class="code hl_function" href="class_t_sound_track.html#ae47a8e255a18ddbc83d31b6c0c834e68">getRawData</a>() + bytePerSec * i),</div>
<div class="line"><span class="lineno"> 1359</span>             m_imp-&gt;m_recordedBlocks[i], lastBlockSize);</div>
<div class="line"><span class="lineno"> 1360</span>      <span class="keyword">delete</span>[] m_imp-&gt;m_recordedBlocks[i];</div>
<div class="line"><span class="lineno"> 1361</span>    }</div>
<div class="line"><span class="lineno"> 1362</span> </div>
<div class="line"><span class="lineno"> 1363</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1364</span>      m_imp-&gt;close();</div>
<div class="line"><span class="lineno"> 1365</span>    } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;e) {</div>
<div class="line"><span class="lineno"> 1366</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnableCloseDevice,</div>
<div class="line"><span class="lineno"> 1367</span>                                  e.getMessage());</div>
<div class="line"><span class="lineno"> 1368</span>    }</div>
<div class="line"><span class="lineno"> 1369</span>    <span class="keywordflow">return</span> st;</div>
<div class="line"><span class="lineno"> 1370</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1371</span>    WaitForSingleObject(m_imp-&gt;m_hLastBlockDone, INFINITE);</div>
<div class="line"><span class="lineno"> 1372</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1373</span>      m_imp-&gt;close();</div>
<div class="line"><span class="lineno"> 1374</span>    } <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_t_exception.html">TException</a> &amp;e) {</div>
<div class="line"><span class="lineno"> 1375</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnableCloseDevice,</div>
<div class="line"><span class="lineno"> 1376</span>                                  e.getMessage());</div>
<div class="line"><span class="lineno"> 1377</span>    }</div>
<div class="line"><span class="lineno"> 1378</span>    <span class="keywordflow">return</span> m_imp-&gt;m_st;</div>
<div class="line"><span class="lineno"> 1379</span>  }</div>
<div class="line"><span class="lineno"> 1380</span>}</div>
<div class="ttc" id="aclass_t_smart_pointer_t_html"><div class="ttname"><a href="class_t_smart_pointer_t.html">TSmartPointerT&lt; TSoundTrack &gt;</a></div></div>
<div class="ttc" id="aclass_t_sound_track_html_a9a83177a9a5b9a7470f32b87e7f21f3d"><div class="ttname"><a href="class_t_sound_track.html#a9a83177a9a5b9a7470f32b87e7f21f3d">TSoundTrack::create</a></div><div class="ttdeci">static TSoundTrackP create(TUINT32 sampleRate, int bitPerSample, int channelCount, TINT32 sampleCount, bool signedSample=true)</div><div class="ttdef"><b>Definition:</b> tsound.cpp:78</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00078">TSoundTrack::create()</a>, and <a class="el" href="#l00150">TSoundTrack::getRawData()</a>.</p>

</div>
</div>
<a id="a20f9c5dba9872fb5b34f39556ffc7c6d" name="a20f9c5dba9872fb5b34f39556ffc7c6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20f9c5dba9872fb5b34f39556ffc7c6d">&#9670;&nbsp;</a></span>supportsVolume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TSoundInputDevice::supportsVolume </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Returns true if is possible to change volume setting on current input interface </p>
<div class="fragment"><div class="line"><span class="lineno"> 1554</span>                                       {</div>
<div class="line"><span class="lineno"> 1555</span>  UINT nNumMixers;</div>
<div class="line"><span class="lineno"> 1556</span>  MMRESULT ret;</div>
<div class="line"><span class="lineno"> 1557</span>  MIXERLINE mxl;</div>
<div class="line"><span class="lineno"> 1558</span> </div>
<div class="line"><span class="lineno"> 1559</span>  nNumMixers = mixerGetNumDevs();</div>
<div class="line"><span class="lineno"> 1560</span> </div>
<div class="line"><span class="lineno"> 1561</span>  <span class="keywordflow">if</span> (nNumMixers == 0)</div>
<div class="line"><span class="lineno"> 1562</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::NoMixer,</div>
<div class="line"><span class="lineno"> 1563</span>                                <span class="stringliteral">&quot;Doesn&#39;t exist a audio mixer device&quot;</span>);</div>
<div class="line"><span class="lineno"> 1564</span> </div>
<div class="line"><span class="lineno"> 1565</span>  <span class="comment">// get dwLineID</span></div>
<div class="line"><span class="lineno"> 1566</span>  ret = getLineInfo((HMIXEROBJ)0, MIXERLINE_COMPONENTTYPE_DST_WAVEIN, mxl);</div>
<div class="line"><span class="lineno"> 1567</span>  <span class="keywordflow">if</span> (ret != MMSYSERR_NOERROR)</div>
<div class="line"><span class="lineno"> 1568</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnableVolume,</div>
<div class="line"><span class="lineno"> 1569</span>                                <span class="stringliteral">&quot;Error to obtain info by mixer&quot;</span>);</div>
<div class="line"><span class="lineno"> 1570</span> </div>
<div class="line"><span class="lineno"> 1571</span>  <span class="comment">// get dwControlID</span></div>
<div class="line"><span class="lineno"> 1572</span>  MIXERCONTROL mxc;</div>
<div class="line"><span class="lineno"> 1573</span>  ret = getLineControl(mxc, (HMIXEROBJ)0, mxl.dwLineID,</div>
<div class="line"><span class="lineno"> 1574</span>                       MIXERCONTROL_CONTROLTYPE_VOLUME);</div>
<div class="line"><span class="lineno"> 1575</span>  <span class="keywordflow">if</span> (ret == MIXERR_INVALCONTROL) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1576</span> </div>
<div class="line"><span class="lineno"> 1577</span>  <span class="keywordflow">if</span> (ret != MMSYSERR_NOERROR)</div>
<div class="line"><span class="lineno"> 1578</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="class_t_sound_device_exception.html">TSoundDeviceException</a>(TSoundDeviceException::UnableVolume,</div>
<div class="line"><span class="lineno"> 1579</span>                                <span class="stringliteral">&quot;Error to obtain info by mixer&quot;</span>);</div>
<div class="line"><span class="lineno"> 1580</span> </div>
<div class="line"><span class="lineno"> 1581</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1582</span>}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>E:/opentoonz/toonz/sources/include/<a class="el" href="">tsound.h</a></li>
<li>E:/opentoonz/toonz/sources/common/tsound/<a class="el" href="">tsound_nt.cpp</a></li>
<li>E:/opentoonz/toonz/sources/common/tsound/<a class="el" href="">tsound_qt.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
