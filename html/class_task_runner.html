<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: TaskRunner Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="class_task_runner-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">TaskRunner Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for TaskRunner:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_task_runner.png" usemap="#TaskRunner_map" alt=""/>
  <map id="TaskRunner_map" name="TaskRunner_map">
<area href="class_t_thread_1_1_runnable.html" alt="TThread::Runnable" shape="rect" coords="64,56,182,80"/>
<area href="class_t_smart_object.html" alt="TSmartObject" shape="rect" coords="128,0,246,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a270f7e7082cde27c564bb6765a88113a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_task_runner.html#a270f7e7082cde27c564bb6765a88113a">TaskRunner</a> (<a class="el" href="class_t_farm_task.html">TFarmTask</a> *task, int localControllerPort)</td></tr>
<tr class="separator:a270f7e7082cde27c564bb6765a88113a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b9df073863b93e0ee35a0c1949a8f6e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_task_runner.html#a2b9df073863b93e0ee35a0c1949a8f6e">run</a> () override</td></tr>
<tr class="memdesc:a2b9df073863b93e0ee35a0c1949a8f6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The central code of the task that is executed by a worker thread.  <a href="class_task_runner.html#a2b9df073863b93e0ee35a0c1949a8f6e">More...</a><br /></td></tr>
<tr class="separator:a2b9df073863b93e0ee35a0c1949a8f6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13742cc8e87e4fa14ff9c531508e1978"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_task_runner.html#a13742cc8e87e4fa14ff9c531508e1978">taskLoad</a> () override</td></tr>
<tr class="separator:a13742cc8e87e4fa14ff9c531508e1978"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cde2878cf52bf7e63a08d2ac1ed9dca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_task_runner.html#a5cde2878cf52bf7e63a08d2ac1ed9dca">doRun</a> (<a class="el" href="class_t_farm_task.html">TFarmTask</a> *task)</td></tr>
<tr class="separator:a5cde2878cf52bf7e63a08d2ac1ed9dca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e4c1a6b78a1c7e815342108ccee19bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_task_runner.html#a6e4c1a6b78a1c7e815342108ccee19bd">runCleanup</a> ()</td></tr>
<tr class="separator:a6e4c1a6b78a1c7e815342108ccee19bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_t_thread_1_1_runnable"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_t_thread_1_1_runnable')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_t_thread_1_1_runnable.html">TThread::Runnable</a></td></tr>
<tr class="memitem:ad3b8ee5e7b375bd169f7382fa26b00ef inherit pub_methods_class_t_thread_1_1_runnable"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_thread_1_1_runnable.html#ad3b8ee5e7b375bd169f7382fa26b00ef">run</a> ()=0</td></tr>
<tr class="memdesc:ad3b8ee5e7b375bd169f7382fa26b00ef inherit pub_methods_class_t_thread_1_1_runnable"><td class="mdescLeft">&#160;</td><td class="mdescRight">The central code of the task that is executed by a worker thread.  <a href="class_t_thread_1_1_runnable.html#ad3b8ee5e7b375bd169f7382fa26b00ef">More...</a><br /></td></tr>
<tr class="separator:ad3b8ee5e7b375bd169f7382fa26b00ef inherit pub_methods_class_t_thread_1_1_runnable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c08dc36ed7b4c9e35809ea696c91e95 inherit pub_methods_class_t_thread_1_1_runnable"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_thread_1_1_runnable.html#a9c08dc36ed7b4c9e35809ea696c91e95">taskLoad</a> ()</td></tr>
<tr class="separator:a9c08dc36ed7b4c9e35809ea696c91e95 inherit pub_methods_class_t_thread_1_1_runnable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e52533850da5433f3075d3d032182c1 inherit pub_methods_class_t_thread_1_1_runnable"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_thread_1_1_runnable.html#a7e52533850da5433f3075d3d032182c1">schedulingPriority</a> ()</td></tr>
<tr class="separator:a7e52533850da5433f3075d3d032182c1 inherit pub_methods_class_t_thread_1_1_runnable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7266725bb29e0ba78a4d3ddb728a5aac inherit pub_methods_class_t_thread_1_1_runnable"><td class="memItemLeft" align="right" valign="top">virtual QThread::Priority&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_thread_1_1_runnable.html#a7266725bb29e0ba78a4d3ddb728a5aac">runningPriority</a> ()</td></tr>
<tr class="separator:a7266725bb29e0ba78a4d3ddb728a5aac inherit pub_methods_class_t_thread_1_1_runnable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_t_smart_object"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_t_smart_object')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_t_smart_object.html">TSmartObject</a></td></tr>
<tr class="memitem:ab9a1e31b7e2b8c9b141fe9ce7e8cf489 inherit pub_methods_class_t_smart_object"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_smart_object.html#ab9a1e31b7e2b8c9b141fe9ce7e8cf489">TSmartObject</a> (ClassCode classCode)</td></tr>
<tr class="separator:ab9a1e31b7e2b8c9b141fe9ce7e8cf489 inherit pub_methods_class_t_smart_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a76a715c1785eb545fa3ef2f6e06928 inherit pub_methods_class_t_smart_object"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_smart_object.html#a4a76a715c1785eb545fa3ef2f6e06928">addRef</a> ()</td></tr>
<tr class="separator:a4a76a715c1785eb545fa3ef2f6e06928 inherit pub_methods_class_t_smart_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99750961461978d73f55a4a54e6f874e inherit pub_methods_class_t_smart_object"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_smart_object.html#a99750961461978d73f55a4a54e6f874e">release</a> ()</td></tr>
<tr class="separator:a99750961461978d73f55a4a54e6f874e inherit pub_methods_class_t_smart_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1f1dab21fd93f07fdf6c86661d738a5 inherit pub_methods_class_t_smart_object"><td class="memItemLeft" align="right" valign="top">TINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_smart_object.html#ac1f1dab21fd93f07fdf6c86661d738a5">getRefCount</a> () const</td></tr>
<tr class="separator:ac1f1dab21fd93f07fdf6c86661d738a5 inherit pub_methods_class_t_smart_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:addc6665bd3eab2a4ce566b420a68fec2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_farm_task.html">TFarmTask</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_task_runner.html#addc6665bd3eab2a4ce566b420a68fec2">m_task</a></td></tr>
<tr class="separator:addc6665bd3eab2a4ce566b420a68fec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dffef7eef41c3191de6d181d7a7c6cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_task_runner.html#a7dffef7eef41c3191de6d181d7a7c6cc">m_localControllerPort</a></td></tr>
<tr class="separator:a7dffef7eef41c3191de6d181d7a7c6cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_class_t_smart_object"><td colspan="2" onclick="javascript:toggleInherit('pub_types_class_t_smart_object')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="class_t_smart_object.html">TSmartObject</a></td></tr>
<tr class="memitem:a3bc37f54976a445f30c99753a478feae inherit pub_types_class_t_smart_object"><td class="memItemLeft" align="right" valign="top">typedef short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_smart_object.html#a3bc37f54976a445f30c99753a478feae">ClassCode</a></td></tr>
<tr class="separator:a3bc37f54976a445f30c99753a478feae inherit pub_types_class_t_smart_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_slots_class_t_thread_1_1_runnable"><td colspan="2" onclick="javascript:toggleInherit('pub_slots_class_t_thread_1_1_runnable')"><img src="closed.png" alt="-"/>&#160;Public Slots inherited from <a class="el" href="class_t_thread_1_1_runnable.html">TThread::Runnable</a></td></tr>
<tr class="memitem:a0857d4a039557f2853a12203ea854f01 inherit pub_slots_class_t_thread_1_1_runnable"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_thread_1_1_runnable.html#a0857d4a039557f2853a12203ea854f01">onStarted</a> (<a class="el" href="class_t_smart_pointer_t.html">TThread::RunnableP</a> sender)</td></tr>
<tr class="separator:a0857d4a039557f2853a12203ea854f01 inherit pub_slots_class_t_thread_1_1_runnable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae08796496a74b40c4e1940e386f7926f inherit pub_slots_class_t_thread_1_1_runnable"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_thread_1_1_runnable.html#ae08796496a74b40c4e1940e386f7926f">onFinished</a> (<a class="el" href="class_t_smart_pointer_t.html">TThread::RunnableP</a> sender)</td></tr>
<tr class="memdesc:ae08796496a74b40c4e1940e386f7926f inherit pub_slots_class_t_thread_1_1_runnable"><td class="mdescLeft">&#160;</td><td class="mdescRight">The analogous of <a class="el" href="class_t_thread_1_1_runnable.html#a0857d4a039557f2853a12203ea854f01">onStarted()</a> for the <a class="el" href="class_t_thread_1_1_runnable.html#a77da4aa600bdb892b55312efcd6e3a21">finished()</a> signal.  <a href="class_t_thread_1_1_runnable.html#ae08796496a74b40c4e1940e386f7926f">More...</a><br /></td></tr>
<tr class="separator:ae08796496a74b40c4e1940e386f7926f inherit pub_slots_class_t_thread_1_1_runnable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a6a991a0e5d2c1fe1885f43928c50ed inherit pub_slots_class_t_thread_1_1_runnable"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_thread_1_1_runnable.html#a1a6a991a0e5d2c1fe1885f43928c50ed">onException</a> (<a class="el" href="class_t_smart_pointer_t.html">TThread::RunnableP</a> sender)</td></tr>
<tr class="memdesc:a1a6a991a0e5d2c1fe1885f43928c50ed inherit pub_slots_class_t_thread_1_1_runnable"><td class="mdescLeft">&#160;</td><td class="mdescRight">The analogous of <a class="el" href="class_t_thread_1_1_runnable.html#a0857d4a039557f2853a12203ea854f01">onStarted()</a> for the <a class="el" href="class_t_thread_1_1_runnable.html#a9dd092bdcdc53e1ed45851562417e135">exception()</a> signal.  <a href="class_t_thread_1_1_runnable.html#a1a6a991a0e5d2c1fe1885f43928c50ed">More...</a><br /></td></tr>
<tr class="separator:a1a6a991a0e5d2c1fe1885f43928c50ed inherit pub_slots_class_t_thread_1_1_runnable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adec8792febe8d01c9fddf868a4605f65 inherit pub_slots_class_t_thread_1_1_runnable"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_thread_1_1_runnable.html#adec8792febe8d01c9fddf868a4605f65">onCanceled</a> (<a class="el" href="class_t_smart_pointer_t.html">TThread::RunnableP</a> sender)</td></tr>
<tr class="memdesc:adec8792febe8d01c9fddf868a4605f65 inherit pub_slots_class_t_thread_1_1_runnable"><td class="mdescLeft">&#160;</td><td class="mdescRight">The analogous of <a class="el" href="class_t_thread_1_1_runnable.html#a0857d4a039557f2853a12203ea854f01">onStarted()</a> for the <a class="el" href="class_t_thread_1_1_runnable.html#a87a003e7e55636146017bd05df73531a">canceled()</a> signal.  <a href="class_t_thread_1_1_runnable.html#adec8792febe8d01c9fddf868a4605f65">More...</a><br /></td></tr>
<tr class="separator:adec8792febe8d01c9fddf868a4605f65 inherit pub_slots_class_t_thread_1_1_runnable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a734635ad9bf10ec12afcc6f305af8c55 inherit pub_slots_class_t_thread_1_1_runnable"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_thread_1_1_runnable.html#a734635ad9bf10ec12afcc6f305af8c55">onTerminated</a> (<a class="el" href="class_t_smart_pointer_t.html">TThread::RunnableP</a> sender)</td></tr>
<tr class="memdesc:a734635ad9bf10ec12afcc6f305af8c55 inherit pub_slots_class_t_thread_1_1_runnable"><td class="mdescLeft">&#160;</td><td class="mdescRight">The analogous of <a class="el" href="class_t_thread_1_1_runnable.html#a0857d4a039557f2853a12203ea854f01">onStarted()</a> for the <a class="el" href="class_t_thread_1_1_runnable.html#afda69c2f2eb6df8d30d7668a4cdd60da">terminated()</a> signal.  <a href="class_t_thread_1_1_runnable.html#a734635ad9bf10ec12afcc6f305af8c55">More...</a><br /></td></tr>
<tr class="separator:a734635ad9bf10ec12afcc6f305af8c55 inherit pub_slots_class_t_thread_1_1_runnable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header signals_class_t_thread_1_1_runnable"><td colspan="2" onclick="javascript:toggleInherit('signals_class_t_thread_1_1_runnable')"><img src="closed.png" alt="-"/>&#160;Signals inherited from <a class="el" href="class_t_thread_1_1_runnable.html">TThread::Runnable</a></td></tr>
<tr class="memitem:a4603628ddbc41e9e73e027e8f817bff1 inherit signals_class_t_thread_1_1_runnable"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_thread_1_1_runnable.html#a4603628ddbc41e9e73e027e8f817bff1">started</a> (<a class="el" href="class_t_smart_pointer_t.html">TThread::RunnableP</a> sender)</td></tr>
<tr class="separator:a4603628ddbc41e9e73e027e8f817bff1 inherit signals_class_t_thread_1_1_runnable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77da4aa600bdb892b55312efcd6e3a21 inherit signals_class_t_thread_1_1_runnable"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_thread_1_1_runnable.html#a77da4aa600bdb892b55312efcd6e3a21">finished</a> (<a class="el" href="class_t_smart_pointer_t.html">TThread::RunnableP</a> sender)</td></tr>
<tr class="separator:a77da4aa600bdb892b55312efcd6e3a21 inherit signals_class_t_thread_1_1_runnable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dd092bdcdc53e1ed45851562417e135 inherit signals_class_t_thread_1_1_runnable"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_thread_1_1_runnable.html#a9dd092bdcdc53e1ed45851562417e135">exception</a> (<a class="el" href="class_t_smart_pointer_t.html">TThread::RunnableP</a> sender)</td></tr>
<tr class="separator:a9dd092bdcdc53e1ed45851562417e135 inherit signals_class_t_thread_1_1_runnable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87a003e7e55636146017bd05df73531a inherit signals_class_t_thread_1_1_runnable"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_thread_1_1_runnable.html#a87a003e7e55636146017bd05df73531a">canceled</a> (<a class="el" href="class_t_smart_pointer_t.html">TThread::RunnableP</a> sender)</td></tr>
<tr class="separator:a87a003e7e55636146017bd05df73531a inherit signals_class_t_thread_1_1_runnable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afda69c2f2eb6df8d30d7668a4cdd60da inherit signals_class_t_thread_1_1_runnable"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_thread_1_1_runnable.html#afda69c2f2eb6df8d30d7668a4cdd60da">terminated</a> (<a class="el" href="class_t_smart_pointer_t.html">TThread::RunnableP</a> sender)</td></tr>
<tr class="separator:afda69c2f2eb6df8d30d7668a4cdd60da inherit signals_class_t_thread_1_1_runnable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_methods_class_t_smart_object"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_class_t_smart_object')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="class_t_smart_object.html">TSmartObject</a></td></tr>
<tr class="memitem:a41e6552e87694c0edba6acc7e57b5752 inherit pub_static_methods_class_t_smart_object"><td class="memItemLeft" align="right" valign="top">static TINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_smart_object.html#a41e6552e87694c0edba6acc7e57b5752">getInstanceCount</a> (ClassCode code)</td></tr>
<tr class="separator:a41e6552e87694c0edba6acc7e57b5752 inherit pub_static_methods_class_t_smart_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a270f7e7082cde27c564bb6765a88113a" name="a270f7e7082cde27c564bb6765a88113a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a270f7e7082cde27c564bb6765a88113a">&#9670;&nbsp;</a></span>TaskRunner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TaskRunner::TaskRunner </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_farm_task.html">TFarmTask</a> *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>localControllerPort</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  143</span>      : m_task(task), m_localControllerPort(localControllerPort) {}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5cde2878cf52bf7e63a08d2ac1ed9dca" name="a5cde2878cf52bf7e63a08d2ac1ed9dca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cde2878cf52bf7e63a08d2ac1ed9dca">&#9670;&nbsp;</a></span>doRun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TaskRunner::doRun </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_farm_task.html">TFarmTask</a> *&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  178</span>                                      {</div>
<div class="line"><span class="lineno">  179</span>  <span class="comment">// Suspended tasks are not executed. (Should only waiting ones be executed?)</span></div>
<div class="line"><span class="lineno">  180</span>  <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Suspended) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>  <span class="keywordflow">if</span> (task-&gt;m_dependencies &amp;&amp; task-&gt;m_dependencies-&gt;getTaskCount() != 0) {</div>
<div class="line"><span class="lineno">  183</span>    task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = Waiting;</div>
<div class="line"><span class="lineno">  184</span>    <span class="keywordtype">int</span> depCount   = task-&gt;m_dependencies-&gt;getTaskCount();</div>
<div class="line"><span class="lineno">  185</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; depCount; ++i) {</div>
<div class="line"><span class="lineno">  186</span>      QString depTaskId  = task-&gt;m_dependencies-&gt;getTaskId(i);</div>
<div class="line"><span class="lineno">  187</span>      <a class="code hl_class" href="class_t_farm_task.html">TFarmTask</a> *depTask = BatchesController::instance()-&gt;getTask(depTaskId);</div>
<div class="line"><span class="lineno">  188</span>      <span class="keywordflow">if</span> (depTask) {</div>
<div class="line"><span class="lineno">  189</span>        doRun(depTask);</div>
<div class="line"><span class="lineno">  190</span>      }</div>
<div class="line"><span class="lineno">  191</span>    }</div>
<div class="line"><span class="lineno">  192</span>  }</div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>  task-&gt;m_successfullSteps = task-&gt;m_failedSteps = 0;</div>
<div class="line"><span class="lineno">  195</span>  task-&gt;m_completionDate                         = QDateTime();</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>  task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a>    = Running;</div>
<div class="line"><span class="lineno">  198</span>  task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#af74d2cb63a6c62785364b7c87b9e2aff">m_server</a>    = TSystem::getHostName();</div>
<div class="line"><span class="lineno">  199</span>  task-&gt;m_startDate = QDateTime::currentDateTime();</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>  NotifyMessage().send();</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>  <span class="keywordtype">int</span> count = task-&gt;getTaskCount();</div>
<div class="line"><span class="lineno">  204</span>  <span class="keywordflow">if</span> (count &gt; 1) {</div>
<div class="line"><span class="lineno">  205</span>    <span class="comment">// Launch each subtask</span></div>
<div class="line"><span class="lineno">  206</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; task-&gt;getTaskCount(); i++) {</div>
<div class="line"><span class="lineno">  207</span>      <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Suspended) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>      doRun(task-&gt;getTask(i));</div>
<div class="line"><span class="lineno">  210</span>    }</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>    <span class="comment">// Check their status</span></div>
<div class="line"><span class="lineno">  213</span>    task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a>           = Completed;</div>
<div class="line"><span class="lineno">  214</span>    task-&gt;m_successfullSteps = task-&gt;m_to - task-&gt;m_from + 1;</div>
<div class="line"><span class="lineno">  215</span>    task-&gt;m_completionDate   = QDateTime::currentDateTime();</div>
<div class="line"><span class="lineno">  216</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; task-&gt;getTaskCount(); i++) {</div>
<div class="line"><span class="lineno">  217</span>      <span class="keywordflow">if</span> (task-&gt;getTask(i)-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> == Aborted) task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a> = Aborted;</div>
<div class="line"><span class="lineno">  218</span>    }</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span>    NotifyMessage().send();</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  223</span>  }</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>  <span class="comment">// int exitCode;</span></div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  227</span>  <span class="comment">/*QString commandline = task-&gt;getCommandLine();</span></div>
<div class="line"><span class="lineno">  228</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  229</span><span class="comment">commandline += &quot; -farm &quot;;</span></div>
<div class="line"><span class="lineno">  230</span><span class="comment">commandline += QString::number(m_localControllerPort) + &quot;@localhost&quot;;</span></div>
<div class="line"><span class="lineno">  231</span><span class="comment">commandline += &quot; -id &quot; + task-&gt;m_id;*/</span></div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>  QProcess *process = <span class="keyword">new</span> QProcess();</div>
<div class="line"><span class="lineno">  234</span>  std::map&lt;QString, QProcess *&gt;::iterator it;</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span>  {</div>
<div class="line"><span class="lineno">  237</span>    QMutexLocker sl(&amp;TasksMutex);</div>
<div class="line"><span class="lineno">  238</span>    <span class="keywordflow">if</span> ((it = RunningTasks.find(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>)) != RunningTasks.end()) {</div>
<div class="line"><span class="lineno">  239</span>      it-&gt;second-&gt;kill();</div>
<div class="line"><span class="lineno">  240</span>      RunningTasks.erase(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>);</div>
<div class="line"><span class="lineno">  241</span>    }</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>    RunningTasks[task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>] = process;</div>
<div class="line"><span class="lineno">  244</span>  }</div>
<div class="line"><span class="lineno">  245</span> </div>
<div class="line"><span class="lineno">  246</span>  process-&gt;start(task-&gt;getCommandLine());</div>
<div class="line"><span class="lineno">  247</span>  process-&gt;waitForFinished(-1);</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>  {</div>
<div class="line"><span class="lineno">  250</span>    QMutexLocker sl(&amp;TasksMutex);</div>
<div class="line"><span class="lineno">  251</span>    RunningTasks.erase(task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">m_id</a>);</div>
<div class="line"><span class="lineno">  252</span>  }</div>
<div class="line"><span class="lineno">  253</span>  <span class="comment">// exitCode = QProcess::execute(task-&gt;getCommandLine());</span></div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>  <span class="keywordtype">int</span> error     = process-&gt;error();</div>
<div class="line"><span class="lineno">  256</span>  <span class="keywordtype">bool</span> statusOK = (error == QProcess::UnknownError) &amp;&amp;</div>
<div class="line"><span class="lineno">  257</span>                  (process-&gt;exitCode() == 0 ||</div>
<div class="line"><span class="lineno">  258</span>                   task-&gt;m_successfullSteps == task-&gt;m_stepCount);</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span>  <span class="keywordflow">if</span> (statusOK) {</div>
<div class="line"><span class="lineno">  261</span>    task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a>           = Completed;</div>
<div class="line"><span class="lineno">  262</span>    task-&gt;m_successfullSteps = task-&gt;m_to - task-&gt;m_from + 1;</div>
<div class="line"><span class="lineno">  263</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  264</span>    task-&gt;<a class="code hl_variable" href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">m_status</a>      = Aborted;</div>
<div class="line"><span class="lineno">  265</span>    task-&gt;m_failedSteps = task-&gt;m_to - task-&gt;m_from + 1;</div>
<div class="line"><span class="lineno">  266</span>  }</div>
<div class="line"><span class="lineno">  267</span> </div>
<div class="line"><span class="lineno">  268</span>  task-&gt;m_completionDate = QDateTime::currentDateTime();</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>  NotifyMessage().send();</div>
<div class="line"><span class="lineno">  271</span>}</div>
<div class="ttc" id="aclass_t_farm_task_html"><div class="ttname"><a href="class_t_farm_task.html">TFarmTask</a></div><div class="ttdef"><b>Definition:</b> tfarmtask.h:41</div></div>
<div class="ttc" id="aclass_t_farm_task_html_a2be81cd241bf4cbc9aa039b7183e7c98"><div class="ttname"><a href="class_t_farm_task.html#a2be81cd241bf4cbc9aa039b7183e7c98">TFarmTask::m_status</a></div><div class="ttdeci">TaskState m_status</div><div class="ttdoc">The task's status (completed, work in progress... etc)</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:85</div></div>
<div class="ttc" id="aclass_t_farm_task_html_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6"><div class="ttname"><a href="class_t_farm_task.html#a87ab2a7b7bcb3c5fc19ff3d38f8b93d6">TFarmTask::m_id</a></div><div class="ttdeci">Id m_id</div><div class="ttdoc">Internal task identifier.</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:68</div></div>
<div class="ttc" id="aclass_t_farm_task_html_af74d2cb63a6c62785364b7c87b9e2aff"><div class="ttname"><a href="class_t_farm_task.html#af74d2cb63a6c62785364b7c87b9e2aff">TFarmTask::m_server</a></div><div class="ttdeci">QString m_server</div><div class="ttdoc">Server node (name) the task was supplied to.</div><div class="ttdef"><b>Definition:</b> tfarmtask.h:86</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2b9df073863b93e0ee35a0c1949a8f6e" name="a2b9df073863b93e0ee35a0c1949a8f6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b9df073863b93e0ee35a0c1949a8f6e">&#9670;&nbsp;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TaskRunner::run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The central code of the task that is executed by a worker thread. </p>

<p>Implements <a class="el" href="class_t_thread_1_1_runnable.html#ad3b8ee5e7b375bd169f7382fa26b00ef">TThread::Runnable</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  157</span>{ doRun(m_task); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6e4c1a6b78a1c7e815342108ccee19bd" name="a6e4c1a6b78a1c7e815342108ccee19bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e4c1a6b78a1c7e815342108ccee19bd">&#9670;&nbsp;</a></span>runCleanup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TaskRunner::runCleanup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  151</span>{ BatchesController::instance()-&gt;notify(); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a13742cc8e87e4fa14ff9c531508e1978" name="a13742cc8e87e4fa14ff9c531508e1978"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13742cc8e87e4fa14ff9c531508e1978">&#9670;&nbsp;</a></span>taskLoad()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int TaskRunner::taskLoad </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Returns the predicted CPU load generated by the task, expressed in percentage of core usage (that is, 100 is intended to fully occupy one processing core). Appropriate task load calibration is an important step to take when implementing a new task; for this purpose, remember some rules to follow: </p><ul>
<li>
In every moment, the task manager ensures that the overall sum of the active task's load does not exceed the number of machine's processing cores multiplied by 100. This condition is <em>blocking</em> with respect to the execution of any other task - meaning that when a task is about to be executed the task manager <em>waits</em> until enough CPU resources are available to make it run. In particular, observe that a task's load <b>never</b> has to exceed the total CPU resources - doing so would surely result in a block of your application. The number of available cores can be accessed via the <b>TSystem::getProcessorCount()</b> or <b>QThread::idealThreadCount()</b>. </li>
<li>
The task load is considered constant for the duration of the task. Changing its value does not affect the task manager in any way once the task has been started. </li>
<li>
The default task load is 0, representing a very light task. If the task load is 0 the condition at point 1 always succeeds - so the task is always executed when encountered. Observe that a long succession of 0 task loads leads to the creation of a proportional number of threads simultaneously running to dispatch it; if this is a problem, consider the use of <b>Executor::setMaxActiveTasks()</b> to make only a certain number of tasks being executed at the same time. </li>
</ul>

<p>Reimplemented from <a class="el" href="class_t_thread_1_1_runnable.html#a9c08dc36ed7b4c9e35809ea696c91e95">TThread::Runnable</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  159</span>                         {</div>
<div class="line"><span class="lineno">  160</span>  <span class="comment">// We assume that CPU control is under the user&#39;s responsibility about</span></div>
<div class="line"><span class="lineno">  161</span>  <span class="comment">// tcomposer tasks - so they don&#39;t figure in CPU consumption calculations.</span></div>
<div class="line"><span class="lineno">  162</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  163</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7dffef7eef41c3191de6d181d7a7c6cc" name="a7dffef7eef41c3191de6d181d7a7c6cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dffef7eef41c3191de6d181d7a7c6cc">&#9670;&nbsp;</a></span>m_localControllerPort</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int TaskRunner::m_localControllerPort</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="addc6665bd3eab2a4ce566b420a68fec2" name="addc6665bd3eab2a4ce566b420a68fec2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addc6665bd3eab2a4ce566b420a68fec2">&#9670;&nbsp;</a></span>m_task</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_farm_task.html">TFarmTask</a>* TaskRunner::m_task</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>E:/opentoonz/toonz/sources/toonz/<a class="el" href="">batches.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
