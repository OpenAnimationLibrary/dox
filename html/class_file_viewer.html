<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>opentoonz: FileViewer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">opentoonz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="class_file_viewer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">FileViewer Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for FileViewer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_file_viewer.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a237399a847f0eccbd347a23e517c2a37"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_viewer.html#a237399a847f0eccbd347a23e517c2a37">FileViewer</a> (QWidget *parent=0, Qt::WFlags flags=Qt::Tool)</td></tr>
<tr class="separator:a237399a847f0eccbd347a23e517c2a37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7ef9796fa411274642f0e6165b7c8e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_viewer.html#aa7ef9796fa411274642f0e6165b7c8e0">setPath</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;fp, int from=0, int to=0, int step=0, <a class="el" href="class_t_sound_track.html">TSoundTrack</a> *snd=0)</td></tr>
<tr class="separator:aa7ef9796fa411274642f0e6165b7c8e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a649e0943e83737c5c8e0fc15da542a63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_viewer.html#a649e0943e83737c5c8e0fc15da542a63">clearViewerCache</a> ()</td></tr>
<tr class="separator:a649e0943e83737c5c8e0fc15da542a63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43aff05d6089dc9797677ab3cf4e2081"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_viewer.html#a43aff05d6089dc9797677ab3cf4e2081">updateFileInfo</a> (const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;fp)</td></tr>
<tr class="separator:a43aff05d6089dc9797677ab3cf4e2081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adad89f2e5c47b981f9955f0bdd9ba229"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_viewer.html#adad89f2e5c47b981f9955f0bdd9ba229">showFrame</a> (int frameIndex)</td></tr>
<tr class="separator:adad89f2e5c47b981f9955f0bdd9ba229"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a8a3b94f13628d8046733ccf4b76aecf6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_viewer.html#a8a3b94f13628d8046733ccf4b76aecf6">dragEnterEvent</a> (QDragEnterEvent *event)</td></tr>
<tr class="separator:a8a3b94f13628d8046733ccf4b76aecf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb7cf008f1a8aea85161e501e6d4f41c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_viewer.html#aeb7cf008f1a8aea85161e501e6d4f41c">dropEvent</a> (QDropEvent *event)</td></tr>
<tr class="separator:aeb7cf008f1a8aea85161e501e6d4f41c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cb4234ccf6cca2f329ef46223593f32"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_viewer.html#a2cb4234ccf6cca2f329ef46223593f32">paintEvent</a> (QPaintEvent *)</td></tr>
<tr class="separator:a2cb4234ccf6cca2f329ef46223593f32"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a237399a847f0eccbd347a23e517c2a37" name="a237399a847f0eccbd347a23e517c2a37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a237399a847f0eccbd347a23e517c2a37">&#9670;&nbsp;</a></span>FileViewer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FileViewer::FileViewer </td>
          <td>(</td>
          <td class="paramtype">QWidget *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Qt::WFlags&#160;</td>
          <td class="paramname"><em>flags</em> = <code>Qt::Tool</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   41</span>    : QWidget(parent), m_fileSize(0), m_player(0), m_snd(0), m_soundOn(<span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno">   42</span>  setAcceptDrops(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">   43</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a649e0943e83737c5c8e0fc15da542a63" name="a649e0943e83737c5c8e0fc15da542a63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a649e0943e83737c5c8e0fc15da542a63">&#9670;&nbsp;</a></span>clearViewerCache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FileViewer::clearViewerCache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  112</span>                                  {</div>
<div class="line"><span class="lineno">  113</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  114</span>  <span class="keywordflow">for</span> (i = 0; i &lt; (int)m_fids.size(); i++) {</div>
<div class="line"><span class="lineno">  115</span>    <a class="code hl_class" href="class_t_frame_id.html">TFrameId</a> fid = m_fids[i];</div>
<div class="line"><span class="lineno">  116</span>    <span class="keywordtype">string</span> <span class="keywordtype">id</span>    = toString(m_levelName) + toString(fid.getNumber());</div>
<div class="line"><span class="lineno">  117</span>    <span class="keywordflow">if</span> (TImageCache::instance()-&gt;isCached(<span class="keywordtype">id</span>))</div>
<div class="line"><span class="lineno">  118</span>      TImageCache::instance()-&gt;<a class="code hl_function" href="class_t_image_cache.html#a57d63227dfe2532b0aed22c47113be66">remove</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  119</span>  }</div>
<div class="line"><span class="lineno">  120</span>}</div>
<div class="ttc" id="aclass_t_frame_id_html"><div class="ttname"><a href="class_t_frame_id.html">TFrameId</a></div><div class="ttdef"><b>Definition:</b> tfilepath.h:29</div></div>
<div class="ttc" id="aclass_t_image_cache_html_a57d63227dfe2532b0aed22c47113be66"><div class="ttname"><a href="class_t_image_cache.html#a57d63227dfe2532b0aed22c47113be66">TImageCache::remove</a></div><div class="ttdeci">void remove(const std::string &amp;id)</div><div class="ttdoc">Removes from the image cache the image associated to passed id.</div><div class="ttdef"><b>Definition:</b> timagecache.cpp:1260</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8a3b94f13628d8046733ccf4b76aecf6" name="a8a3b94f13628d8046733ccf4b76aecf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a3b94f13628d8046733ccf4b76aecf6">&#9670;&nbsp;</a></span>dragEnterEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FileViewer::dragEnterEvent </td>
          <td>(</td>
          <td class="paramtype">QDragEnterEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   47</span>                                                      {</div>
<div class="line"><span class="lineno">   48</span>  <span class="keywordflow">if</span> (event-&gt;mimeData()-&gt;hasUrls()) <span class="keyword">event</span>-&gt;acceptProposedAction();</div>
<div class="line"><span class="lineno">   49</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb7cf008f1a8aea85161e501e6d4f41c" name="aeb7cf008f1a8aea85161e501e6d4f41c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb7cf008f1a8aea85161e501e6d4f41c">&#9670;&nbsp;</a></span>dropEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FileViewer::dropEvent </td>
          <td>(</td>
          <td class="paramtype">QDropEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   53</span>                                            {</div>
<div class="line"><span class="lineno">   54</span>  QList&lt;QUrl&gt; urls = <span class="keyword">event</span>-&gt;mimeData()-&gt;urls();</div>
<div class="line"><span class="lineno">   55</span>  <a class="code hl_class" href="class_t_file_path.html">TFilePath</a> path   = <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>(urls[0].toLocalFile().toStdString());</div>
<div class="line"><span class="lineno">   56</span>  <span class="keywordflow">if</span> (path.isEmpty()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   57</span>  setPath(path);</div>
<div class="line"><span class="lineno">   58</span>  <span class="keyword">event</span>-&gt;acceptProposedAction();</div>
<div class="line"><span class="lineno">   59</span>}</div>
<div class="ttc" id="aclass_t_file_path_html"><div class="ttname"><a href="class_t_file_path.html">TFilePath</a></div><div class="ttdef"><b>Definition:</b> tfilepath.h:134</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2cb4234ccf6cca2f329ef46223593f32" name="a2cb4234ccf6cca2f329ef46223593f32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cb4234ccf6cca2f329ef46223593f32">&#9670;&nbsp;</a></span>paintEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FileViewer::paintEvent </td>
          <td>(</td>
          <td class="paramtype">QPaintEvent *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  185</span>{ QPainter p(<span class="keyword">this</span>); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa7ef9796fa411274642f0e6165b7c8e0" name="aa7ef9796fa411274642f0e6165b7c8e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7ef9796fa411274642f0e6165b7c8e0">&#9670;&nbsp;</a></span>setPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FileViewer::setPath </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>from</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>to</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>step</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_sound_track.html">TSoundTrack</a> *&#160;</td>
          <td class="paramname"><em>snd</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   64</span>                                           {</div>
<div class="line"><span class="lineno">   65</span>  <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)m_fids.size() &gt; 0) clearViewerCache();</div>
<div class="line"><span class="lineno">   66</span>  m_path = fp;</div>
<div class="line"><span class="lineno">   67</span>  m_snd  = snd;</div>
<div class="line"><span class="lineno">   68</span>  m_fids.clear();</div>
<div class="line"><span class="lineno">   69</span>  m_index    = -1;</div>
<div class="line"><span class="lineno">   70</span>  m_fileSize = 0;</div>
<div class="line"><span class="lineno">   71</span>  m_fileDate = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno">   72</span>  <span class="keywordflow">if</span> (fp.<a class="code hl_function" href="class_t_file_path.html#a698bbf714436eb6923359044900cde2b">getDots</a>() == <span class="stringliteral">&quot;..&quot;</span>) {</div>
<div class="line"><span class="lineno">   73</span>    m_levelName = fp.<a class="code hl_function" href="class_t_file_path.html#ac17d65d827432f0fae28fed699bf4afa">withoutParentDir</a>().<a class="code hl_function" href="class_t_file_path.html#a12f35b225e1882372ad7e02ad7fce543">withFrame</a>().getWideString();</div>
<div class="line"><span class="lineno">   74</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   75</span>    m_levelName = fp.<a class="code hl_function" href="class_t_file_path.html#ac17d65d827432f0fae28fed699bf4afa">withoutParentDir</a>().getWideString();</div>
<div class="line"><span class="lineno">   76</span>    updateFileInfo(m_path);</div>
<div class="line"><span class="lineno">   77</span>  }</div>
<div class="line"><span class="lineno">   78</span>  m_lr = <a class="code hl_class" href="class_t_level_reader_p.html">TLevelReaderP</a>();</div>
<div class="line"><span class="lineno">   79</span>  <span class="keywordflow">if</span> (step != 0)  <span class="comment">// e&#39; un render</span></div>
<div class="line"><span class="lineno">   80</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = from; i &lt;= to; i += step) m_fids.push_back(<a class="code hl_class" href="class_t_frame_id.html">TFrameId</a>(i));</div>
<div class="line"><span class="lineno">   81</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fp != <a class="code hl_class" href="class_t_file_path.html">TFilePath</a>() &amp;&amp;</div>
<div class="line"><span class="lineno">   82</span>           TSystem::doesExistFileOrLevel(fp))  <span class="comment">// e&#39; un view</span></div>
<div class="line"><span class="lineno">   83</span>  {</div>
<div class="line"><span class="lineno">   84</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">   85</span>      m_lr          = <a class="code hl_class" href="class_t_level_reader_p.html">TLevelReaderP</a>(fp);</div>
<div class="line"><span class="lineno">   86</span>      <a class="code hl_class" href="class_t_level_p.html">TLevelP</a> level = m_lr-&gt;loadInfo();</div>
<div class="line"><span class="lineno">   87</span>      <span class="keywordflow">if</span> (!level || level-&gt;getFrameCount() == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   88</span>      m_palette = level-&gt;getPalette();</div>
<div class="line"><span class="lineno">   89</span>      <span class="keywordflow">if</span> (!m_palette &amp;&amp; (fp.<a class="code hl_function" href="class_t_file_path.html#aefca624df1a5468a4c78ec6d5dbfae26">getType</a>() == <span class="stringliteral">&quot;tzp&quot;</span> || fp.<a class="code hl_function" href="class_t_file_path.html#aefca624df1a5468a4c78ec6d5dbfae26">getType</a>() == <span class="stringliteral">&quot;tzu&quot;</span>))</div>
<div class="line"><span class="lineno">   90</span>        m_palette =</div>
<div class="line"><span class="lineno">   91</span>            ToonzImageUtils::loadTzPalette(fp.<a class="code hl_function" href="class_t_file_path.html#a1437b0e0720e9258b622f68b6858e95d">withType</a>(<span class="stringliteral">&quot;plt&quot;</span>).withNoFrame());</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>      <span class="keywordflow">for</span> (TLevel::Iterator it = level-&gt;begin(); it != level-&gt;end(); ++it)</div>
<div class="line"><span class="lineno">   94</span>        m_fids.push_back(it-&gt;first);</div>
<div class="line"><span class="lineno">   95</span>      showFrame(0);</div>
<div class="line"><span class="lineno">   96</span>    } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">   97</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   98</span>    }</div>
<div class="line"><span class="lineno">   99</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  100</span>    m_image = <a class="code hl_class" href="class_t_smart_pointer_t.html">TImageP</a>();</div>
<div class="line"><span class="lineno">  101</span>  <span class="comment">//  else</span></div>
<div class="line"><span class="lineno">  102</span>  <span class="comment">//    setImage(TImageP());</span></div>
<div class="line"><span class="lineno">  103</span>  <span class="comment">// resetZoom();</span></div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>  showFrame(0);</div>
<div class="line"><span class="lineno">  106</span>  <span class="comment">// configureNotify();</span></div>
<div class="line"><span class="lineno">  107</span>  <span class="comment">//  if(m_listener) m_listener-&gt;onPathChange(fp);</span></div>
<div class="line"><span class="lineno">  108</span>}</div>
<div class="ttc" id="aclass_t_file_path_html_a12f35b225e1882372ad7e02ad7fce543"><div class="ttname"><a href="class_t_file_path.html#a12f35b225e1882372ad7e02ad7fce543">TFilePath::withFrame</a></div><div class="ttdeci">TFilePath withFrame(const TFrameId &amp;frame, TFrameId::FrameFormat format=TFrameId::USE_CURRENT_FORMAT) const</div><div class="ttdef"><b>Definition:</b> tfilepath.cpp:860</div></div>
<div class="ttc" id="aclass_t_file_path_html_a1437b0e0720e9258b622f68b6858e95d"><div class="ttname"><a href="class_t_file_path.html#a1437b0e0720e9258b622f68b6858e95d">TFilePath::withType</a></div><div class="ttdeci">TFilePath withType(const std::string &amp;type) const</div><div class="ttdef"><b>Definition:</b> tfilepath.cpp:774</div></div>
<div class="ttc" id="aclass_t_file_path_html_a698bbf714436eb6923359044900cde2b"><div class="ttname"><a href="class_t_file_path.html#a698bbf714436eb6923359044900cde2b">TFilePath::getDots</a></div><div class="ttdeci">std::string getDots() const</div><div class="ttdef"><b>Definition:</b> tfilepath.cpp:539</div></div>
<div class="ttc" id="aclass_t_file_path_html_ac17d65d827432f0fae28fed699bf4afa"><div class="ttname"><a href="class_t_file_path.html#ac17d65d827432f0fae28fed699bf4afa">TFilePath::withoutParentDir</a></div><div class="ttdeci">TFilePath withoutParentDir() const</div><div class="ttdef"><b>Definition:</b> tfilepath.h:264</div></div>
<div class="ttc" id="aclass_t_file_path_html_aefca624df1a5468a4c78ec6d5dbfae26"><div class="ttname"><a href="class_t_file_path.html#aefca624df1a5468a4c78ec6d5dbfae26">TFilePath::getType</a></div><div class="ttdeci">std::string getType() const</div><div class="ttdef"><b>Definition:</b> tfilepath.h:225</div></div>
<div class="ttc" id="aclass_t_level_p_html"><div class="ttname"><a href="class_t_level_p.html">TLevelP</a></div><div class="ttdef"><b>Definition:</b> tlevel.h:77</div></div>
<div class="ttc" id="aclass_t_level_reader_p_html"><div class="ttname"><a href="class_t_level_reader_p.html">TLevelReaderP</a></div><div class="ttdef"><b>Definition:</b> tlevel_io.h:109</div></div>
<div class="ttc" id="aclass_t_smart_pointer_t_html"><div class="ttname"><a href="class_t_smart_pointer_t.html">TSmartPointerT&lt; TImage &gt;</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adad89f2e5c47b981f9955f0bdd9ba229" name="adad89f2e5c47b981f9955f0bdd9ba229"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adad89f2e5c47b981f9955f0bdd9ba229">&#9670;&nbsp;</a></span>showFrame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FileViewer::showFrame </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>frameIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  137</span>                                    {</div>
<div class="line"><span class="lineno">  138</span>  <span class="keywordflow">if</span> (m_fids.empty()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>  index   = tcrop(index, 0, (<span class="keywordtype">int</span>)(m_fids.size() - 1));</div>
<div class="line"><span class="lineno">  141</span>  m_index = index;</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>  <a class="code hl_class" href="class_t_frame_id.html">TFrameId</a> fid = m_fids[index];</div>
<div class="line"><span class="lineno">  144</span>  <span class="keywordtype">string</span> <span class="keywordtype">id</span>    = toString(m_levelName) + toString(fid.getNumber());</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  147</span>    <a class="code hl_class" href="class_t_smart_pointer_t.html">TImageP</a> img;</div>
<div class="line"><span class="lineno">  148</span>    <span class="keywordflow">if</span> (TImageCache::instance()-&gt;isCached(<span class="keywordtype">id</span>))</div>
<div class="line"><span class="lineno">  149</span>      img = TImageCache::instance()-&gt;<a class="code hl_function" href="class_t_image_cache.html#aea3ac2752efd6fa9689f5a7c1e895e41">get</a>(<span class="keywordtype">id</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_lr) {</div>
<div class="line"><span class="lineno">  151</span>      <a class="code hl_class" href="class_t_image_reader_p.html">TImageReaderP</a> ir = m_lr-&gt;getFrameReader(fid);</div>
<div class="line"><span class="lineno">  152</span>      <span class="keywordflow">if</span> (m_path.<a class="code hl_function" href="class_t_file_path.html#a698bbf714436eb6923359044900cde2b">getDots</a>() == <span class="stringliteral">&quot;..&quot;</span>) {</div>
<div class="line"><span class="lineno">  153</span>        <span class="keywordflow">if</span> (ir)</div>
<div class="line"><span class="lineno">  154</span>          updateFileInfo(ir-&gt;getFilePath());</div>
<div class="line"><span class="lineno">  155</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  156</span>          m_fileSize = 0;</div>
<div class="line"><span class="lineno">  157</span>          m_fileDate = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno">  158</span>        }</div>
<div class="line"><span class="lineno">  159</span>      }</div>
<div class="line"><span class="lineno">  160</span>      img = ir-&gt;load();</div>
<div class="line"><span class="lineno">  161</span>      <span class="keywordflow">if</span> (img) {</div>
<div class="line"><span class="lineno">  162</span>        <span class="keywordflow">if</span> (!img-&gt;getPalette() &amp;&amp; m_palette)</div>
<div class="line"><span class="lineno">  163</span>          img-&gt;<a class="code hl_function" href="class_t_image.html#a3377c18a849addff5c2cb238176ad04f">setPalette</a>(m_palette.getPointer());</div>
<div class="line"><span class="lineno">  164</span>        TImageCache::instance()-&gt;<a class="code hl_function" href="class_t_image_cache.html#a124eae4cf370288f42c22b3477cb5163">add</a>(<span class="keywordtype">id</span>, img);</div>
<div class="line"><span class="lineno">  165</span>      }</div>
<div class="line"><span class="lineno">  166</span>    }</div>
<div class="line"><span class="lineno">  167</span>    m_image = img;</div>
<div class="line"><span class="lineno">  168</span>    <span class="comment">//    setImage(img);</span></div>
<div class="line"><span class="lineno">  169</span>  } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  170</span>    m_image = <a class="code hl_class" href="class_t_smart_pointer_t.html">TImageP</a>();</div>
<div class="line"><span class="lineno">  171</span>    <span class="comment">//    setImage(TImageP());</span></div>
<div class="line"><span class="lineno">  172</span>  }</div>
<div class="line"><span class="lineno">  173</span>  <span class="comment">//  invalidate();</span></div>
<div class="line"><span class="lineno">  174</span>  update();</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>  <span class="comment">//  if(m_listener)</span></div>
<div class="line"><span class="lineno">  177</span>  <span class="comment">//  {</span></div>
<div class="line"><span class="lineno">  178</span>  <span class="comment">//      m_listener-&gt;onFrameChange(getFrameId());</span></div>
<div class="line"><span class="lineno">  179</span>  <span class="comment">//  }</span></div>
<div class="line"><span class="lineno">  180</span>  <span class="comment">//  playSound();</span></div>
<div class="line"><span class="lineno">  181</span>}</div>
<div class="ttc" id="aclass_t_image_cache_html_a124eae4cf370288f42c22b3477cb5163"><div class="ttname"><a href="class_t_image_cache.html#a124eae4cf370288f42c22b3477cb5163">TImageCache::add</a></div><div class="ttdeci">void add(const std::string &amp;id, const TImageP &amp;img, bool overwrite=true)</div><div class="ttdef"><b>Definition:</b> timagecache.cpp:1153</div></div>
<div class="ttc" id="aclass_t_image_cache_html_aea3ac2752efd6fa9689f5a7c1e895e41"><div class="ttname"><a href="class_t_image_cache.html#aea3ac2752efd6fa9689f5a7c1e895e41">TImageCache::get</a></div><div class="ttdeci">TImageP get(const std::string &amp;id, bool toBeModified) const</div><div class="ttdef"><b>Definition:</b> timagecache.cpp:1672</div></div>
<div class="ttc" id="aclass_t_image_html_a3377c18a849addff5c2cb238176ad04f"><div class="ttname"><a href="class_t_image.html#a3377c18a849addff5c2cb238176ad04f">TImage::setPalette</a></div><div class="ttdeci">virtual void setPalette(TPalette *palette)</div><div class="ttdef"><b>Definition:</b> timage.cpp:9</div></div>
<div class="ttc" id="aclass_t_image_reader_p_html"><div class="ttname"><a href="class_t_image_reader_p.html">TImageReaderP</a></div><div class="ttdef"><b>Definition:</b> timage_io.h:185</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a43aff05d6089dc9797677ab3cf4e2081" name="a43aff05d6089dc9797677ab3cf4e2081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43aff05d6089dc9797677ab3cf4e2081">&#9670;&nbsp;</a></span>updateFileInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FileViewer::updateFileInfo </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_file_path.html">TFilePath</a> &amp;&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  124</span>                                                   {</div>
<div class="line"><span class="lineno">  125</span>  <a class="code hl_class" href="class_t_file_status.html">TFileStatus</a> fs(fp);</div>
<div class="line"><span class="lineno">  126</span>  <span class="keywordflow">if</span> (fs.doesExist()) {</div>
<div class="line"><span class="lineno">  127</span>    m_fileSize = (int)((fs.getSize() + 1023) / 1024);</div>
<div class="line"><span class="lineno">  128</span>    m_fileDate = fs.getLastModificationTime().getFormattedString();</div>
<div class="line"><span class="lineno">  129</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  130</span>    m_fileSize = 0;</div>
<div class="line"><span class="lineno">  131</span>    m_fileDate = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno">  132</span>  }</div>
<div class="line"><span class="lineno">  133</span>}</div>
<div class="ttc" id="aclass_t_file_status_html"><div class="ttname"><a href="class_t_file_status.html">TFileStatus</a></div><div class="ttdef"><b>Definition:</b> tsystem.h:36</div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>E:/opentoonz/toonz/sources/toonz/<a class="el" href="">fileviewerpopup.h</a></li>
<li>E:/opentoonz/toonz/sources/toonz/<a class="el" href="">fileviewerpopup.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
