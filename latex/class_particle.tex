\hypertarget{class_particle}{}\doxysection{Particle Class Reference}
\label{class_particle}\index{Particle@{Particle}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_particle_ad8b1abc55649abb159e9b57022a6dc0e}{Particle}} (int lifetime, int seed, const std\+::map$<$ int, \mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ $>$ porttiles, const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&ranges, std\+::vector$<$ std\+::vector$<$ \mbox{\hyperlink{class_t_point_t}{TPointD}} $>$ $>$ \&myregions, int howmany, int first, int level, int last, std\+::vector$<$ std\+::vector$<$ int $>$ $>$ \&my\+Histogram, std\+::vector$<$ float $>$ \&my\+Weight)
\item 
void \mbox{\hyperlink{class_particle_a8810961a87b5b76ddf07142cabfd347d}{create\+\_\+\+Animation}} (const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, int first, int last)
\item 
int \mbox{\hyperlink{class_particle_afe7ddef23d8d1f94a029fa3d9cb3786d}{check\+\_\+\+Swing}} (const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values)
\item 
void \mbox{\hyperlink{class_particle_a5b2fcd24d17f6f9f898543aa0677ec05}{create\+\_\+\+Swing}} (const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&ranges, double randomxreference, double randomyreference)
\item 
void \mbox{\hyperlink{class_particle_ae5136a06605456ff1c0e80896e9723cf}{create\+\_\+\+Colors}} (const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&ranges, std\+::map$<$ int, \mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ $>$ porttiles)
\item 
void \mbox{\hyperlink{class_particle_a10ff701f7c6d53e09ebc8e2e662a8ef2}{move}} (const std\+::map$<$ int, \mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ $>$ porttiles, const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&ranges, float windx, float windy, float xgravity, float ygravity, float dpi, int lastframe)
\item 
void \mbox{\hyperlink{class_particle_ac82033ce7e9539275e2445aad266c172}{spread\+\_\+color}} (TPixel32 \&color, double range)
\item 
void \mbox{\hyperlink{class_particle_aaee9dbfbcb2edfe3dd72697a957bd0a4}{update\+\_\+\+Animation}} (const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, int first, int last, int keep)
\item 
void \mbox{\hyperlink{class_particle_ab5cf79b185436b05aa3f3d841d469d9d}{update\+\_\+\+Swing}} (const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&ranges, struct \mbox{\hyperlink{structpos__dummy}{pos\+\_\+dummy}} \&dummy, double randomxreference, double randomyreference)
\item 
void \mbox{\hyperlink{class_particle_aff61189a240ae72ef3e5174c1f2bdfad}{update\+\_\+\+Scale}} (const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&ranges, double scalereference, double scalestepreference)
\item 
double \mbox{\hyperlink{class_particle_a1416a86f3f396f44f685e39e868ab9c9}{set\+\_\+\+Opacity}} (std\+::map$<$ int, \mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ $>$ porttiles, const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, float opacity\+\_\+range, double dist\+\_\+frame)
\item 
void \mbox{\hyperlink{class_particle_ab23c57270045f8ff26fdc9e9a975c598}{modify\+\_\+colors}} (TPixel32 \&color, double \&intensity)
\item 
void \mbox{\hyperlink{class_particle_a2abf116d4acea19a3832e35c8dcf71ca}{modify\+\_\+colors\+\_\+and\+\_\+opacity}} (const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, float curr\+\_\+opacity, int dist\+\_\+frame, \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} raster)
\item 
bool \mbox{\hyperlink{class_particle_af70db3d757de3dca88757c9ec1b0acde}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame)
\item 
void \mbox{\hyperlink{class_particle_a4ae6a85e2bf770e16e072f9e9f99af75}{get\+\_\+image\+\_\+reference}} (\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ctrl1, const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, double \&imagereference, int type)
\item 
void \mbox{\hyperlink{class_particle_a8c78d411e747a6545f99492e4e6fda14}{get\+\_\+image\+\_\+reference}} (\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ctrl1, const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, TPixel32 \&color)
\item 
void \mbox{\hyperlink{class_particle_a257ab6d83bcfdea572a7b6eee9bb85eb}{get\+\_\+image\+\_\+gravity}} (\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ctrl1, const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, float \&gx, float \&gy)
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
double \mbox{\hyperlink{class_particle_a1e3e5e103cee69ae9acb9c3269d009d7}{x}}
\item 
double \mbox{\hyperlink{class_particle_a434ab690dde4422ac74ae10f6ace7a52}{y}}
\item 
double \mbox{\hyperlink{class_particle_ae325abc07c55c2c559710dbefdb8cb23}{oldx}}
\item 
double \mbox{\hyperlink{class_particle_a4fa80c02b5d30d208729f2d389279e68}{oldy}}
\item 
double \mbox{\hyperlink{class_particle_a53bf9654ce8a84bc294528b041027c3a}{vx}}
\item 
double \mbox{\hyperlink{class_particle_af5ec7ca65cc36f119586d446e42c6175}{vy}}
\item 
double \mbox{\hyperlink{class_particle_ae6d46dc24a6666d526f211151fecca5f}{mass}}
\item 
double \mbox{\hyperlink{class_particle_aa08690ad0e29e86f7e5b423abf17559d}{scale}}
\item 
double \mbox{\hyperlink{class_particle_af6bf98a3fdd43481cbc31f8f84619e50}{angle}}
\item 
double \mbox{\hyperlink{class_particle_a39d933a56b3408ac14a2f4a05e634012}{smswingx}}
\item 
double \mbox{\hyperlink{class_particle_a2fcd7a99f166f1c56aa0a87e8f0e0adf}{smswingy}}
\item 
double \mbox{\hyperlink{class_particle_a52ef8410720339c3350f8a48037c220e}{smswinga}}
\item 
int \mbox{\hyperlink{class_particle_a73af4a87115f6282e51dc49082ce5455}{smperiodx}}
\item 
int \mbox{\hyperlink{class_particle_aaa37f0c6d62ca9bc019d5f27c3384e3c}{smperiody}}
\item 
int \mbox{\hyperlink{class_particle_a9f76815ffdf8d5c854cf899db37dd9dc}{smperioda}}
\item 
int \mbox{\hyperlink{class_particle_a61015ac00caa47bc3c72459bd98e0aab}{lifetime}}
\item 
int \mbox{\hyperlink{class_particle_a94fc87233b7ef3ebecf05adbd70beb93}{genlifetime}}
\item 
int \mbox{\hyperlink{class_particle_a3893059fc32c2f14a4021b86d9576a03}{level}}
\item 
int \mbox{\hyperlink{class_particle_aa929471a216305bd7f530a632725c1f9}{frame}}
\item 
int \mbox{\hyperlink{class_particle_a2ec5f6ceaa972661fba7f2cf9ad0ffcc}{signx}}
\item 
int \mbox{\hyperlink{class_particle_a2e07f43372859f8f79db761da63f9fe7}{trail}}
\item 
\mbox{\hyperlink{structcoldata}{coldata}} \mbox{\hyperlink{class_particle_a4f605134383db2a2f0ef0014715aa0e3}{gencol}}
\item 
\mbox{\hyperlink{structcoldata}{coldata}} \mbox{\hyperlink{class_particle_a4c90e7d788973109b39a6d7764e05683}{fincol}}
\item 
\mbox{\hyperlink{structcoldata}{coldata}} \mbox{\hyperlink{class_particle_a722b9a34d26dbfa715ee6161e900b8a0}{foutcol}}
\item 
int \mbox{\hyperlink{class_particle_aaa02e9b3323211bd3493531a0fbb8a43}{changesignx}}
\item 
int \mbox{\hyperlink{class_particle_ad7fcf0671ab06781d2bf507898911fb1}{signy}}
\item 
int \mbox{\hyperlink{class_particle_a7ece439163031a35f892f0425f14a751}{changesigny}}
\item 
int \mbox{\hyperlink{class_particle_a6e0bbc810b679d01e5dcfaf3c86dfcfa}{signa}}
\item 
int \mbox{\hyperlink{class_particle_a81f2d110fe212bbab2049b2b39d5443b}{changesigna}}
\item 
bool \mbox{\hyperlink{class_particle_a4c04e813bc58d56473a88c8f9a398726}{animswing}}
\item 
\mbox{\hyperlink{class_t_random}{TRandom}} \mbox{\hyperlink{class_particle_aa92e89c0dfc7a610ab54c495b4994175}{random}}
\item 
int \mbox{\hyperlink{class_particle_a530e79063eb32e259a3ac31d4e97ee6f}{seed}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_particle_ad8b1abc55649abb159e9b57022a6dc0e}\label{class_particle_ad8b1abc55649abb159e9b57022a6dc0e}} 
\index{Particle@{Particle}!Particle@{Particle}}
\index{Particle@{Particle}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{Particle()}{Particle()}}
{\footnotesize\ttfamily Particle\+::\+Particle (\begin{DoxyParamCaption}\item[{int}]{lifetime,  }\item[{int}]{seed,  }\item[{const std\+::map$<$ int, \mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ $>$}]{porttiles,  }\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&}]{ranges,  }\item[{std\+::vector$<$ std\+::vector$<$ \mbox{\hyperlink{class_t_point_t}{TPointD}} $>$ $>$ \&}]{myregions,  }\item[{int}]{howmany,  }\item[{int}]{first,  }\item[{int}]{level,  }\item[{int}]{last,  }\item[{std\+::vector$<$ std\+::vector$<$ int $>$ $>$ \&}]{my\+Histogram,  }\item[{std\+::vector$<$ float $>$ \&}]{my\+Weight }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00041                                                \{}
\DoxyCodeLine{00042   \textcolor{keywordtype}{double} random\_s\_a\_range, random\_speed;}
\DoxyCodeLine{00043   std::map<int, double> imagereferences;}
\DoxyCodeLine{00044   random                  = \mbox{\hyperlink{class_t_random}{TRandom}}(seed);}
\DoxyCodeLine{00045   \textcolor{keywordtype}{double} randomxreference = 0.0;}
\DoxyCodeLine{00046   \textcolor{keywordtype}{double} randomyreference = 0.0;}
\DoxyCodeLine{00047   create\_Animation(values, 0, last);}
\DoxyCodeLine{00048   \textcolor{comment}{// lifetime=values.lifetime\_val.first+ranges.lifetime\_range*random-\/>getFloat();}}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050   this-\/>level = level;}
\DoxyCodeLine{00051 }
\DoxyCodeLine{00052   \textcolor{comment}{/*-\/ 初期座標値をつくる -\/*/}}
\DoxyCodeLine{00053   \textcolor{comment}{/*-\/-\/ Perspective DistributionがONかつ、SizeのControlImageが刺さっている場合}}
\DoxyCodeLine{00054 \textcolor{comment}{   * -\/-\/*/}}
\DoxyCodeLine{00055   \textcolor{keywordflow}{if} (myregions.size() \&\&}
\DoxyCodeLine{00056       porttiles.find(values.scale\_ctrl\_val) != porttiles.end() \&\&}
\DoxyCodeLine{00057       values.perspective\_distribution\_val) \{}
\DoxyCodeLine{00058     \textcolor{keywordtype}{float} size = myWeight[255];}
\DoxyCodeLine{00059     \textcolor{comment}{/*-\/ 候補の中のIndex -\/*/}}
\DoxyCodeLine{00060     \textcolor{keywordtype}{float} partindex = size * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}();}
\DoxyCodeLine{00061     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 256; i++) \{}
\DoxyCodeLine{00062       \textcolor{keywordflow}{if} (myWeight[i] > partindex) \{}
\DoxyCodeLine{00063         \textcolor{keywordtype}{int} m = 255 -\/ i;}
\DoxyCodeLine{00064         \textcolor{comment}{/*-\/ 明度からサイズ サイズから重みを計算 -\/*/}}
\DoxyCodeLine{00065         \textcolor{keywordtype}{float} scale =}
\DoxyCodeLine{00066             values.scale\_val.first + ranges.scale\_range * (float)m / 255.0f;}
\DoxyCodeLine{00067         \textcolor{keywordtype}{float} weight = 1.0f / (scale * scale);}
\DoxyCodeLine{00068         \textcolor{keywordflow}{if} (i > 0) partindex -\/= myWeight[i -\/ 1];}
\DoxyCodeLine{00069         \textcolor{keywordtype}{int} index = myHistogram[m][(int)(partindex / weight)];}
\DoxyCodeLine{00070         x         = myregions[0][index].x + (double)random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() -\/ 0.5;}
\DoxyCodeLine{00071         y         = myregions[0][index].y + (double)random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() -\/ 0.5;}
\DoxyCodeLine{00072         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00073       \}}
\DoxyCodeLine{00074     \}}
\DoxyCodeLine{00075   \}}
\DoxyCodeLine{00076   \textcolor{comment}{/*-\/ 領域がある かつ 発生領域のControlImageが刺さっている場合 -\/*/}}
\DoxyCodeLine{00077   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (myregions.size() \&\&}
\DoxyCodeLine{00078            porttiles.find(values.source\_ctrl\_val) != porttiles.end()) \{}
\DoxyCodeLine{00079     \textcolor{comment}{/*-\/ howmany：発生Particlesのうち、何番目に発生させたものか。}}
\DoxyCodeLine{00080 \textcolor{comment}{            myregionが複数有る場合は、均等に割り振ることになる。 -\/*/}}
\DoxyCodeLine{00081     \textcolor{keywordtype}{int} regionindex = howmany \% myregions.size();}
\DoxyCodeLine{00082     \textcolor{comment}{/*-\/ ウェイトを足しこむ -\/*/}}
\DoxyCodeLine{00083     \textcolor{keywordtype}{float} size;}
\DoxyCodeLine{00084     \textcolor{keywordflow}{if} (values.source\_gradation\_val \&\& !values.multi\_source\_val \&\&}
\DoxyCodeLine{00085         myregions.size() == 1)}
\DoxyCodeLine{00086       size = myWeight[254];}
\DoxyCodeLine{00087     \textcolor{keywordflow}{else} \textcolor{comment}{/*-\/ ウェイトがすべて１の場合 -\/*/}}
\DoxyCodeLine{00088       size = (float)myregions[regionindex].size();}
\DoxyCodeLine{00089     \textcolor{comment}{/*-\/ 候補の中のIndex -\/*/}}
\DoxyCodeLine{00090     \textcolor{keywordtype}{int} partindex = (int)(size * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}());}
\DoxyCodeLine{00091 }
\DoxyCodeLine{00092     \textcolor{comment}{/*-\/ ウェイトを引いていき、負になったインデックスを選択 -\/*/}}
\DoxyCodeLine{00093     \textcolor{keywordflow}{if} (values.source\_gradation\_val \&\& !values.multi\_source\_val \&\&}
\DoxyCodeLine{00094         myregions.size() == 1) \{}
\DoxyCodeLine{00095       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 255; i++) \{}
\DoxyCodeLine{00096         \textcolor{keywordflow}{if} (myWeight[i] > partindex) \{}
\DoxyCodeLine{00097           \textcolor{keywordtype}{int} m = 255 -\/ i;}
\DoxyCodeLine{00098           \textcolor{keywordflow}{if} (i > 0) partindex -\/= myWeight[i -\/ 1];}
\DoxyCodeLine{00099           \textcolor{keywordtype}{int} index = myHistogram[m][(int)(partindex / m)];}
\DoxyCodeLine{00100           x = myregions[regionindex][index].x + (double)random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() -\/ 0.5;}
\DoxyCodeLine{00101           y = myregions[regionindex][index].y + (double)random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() -\/ 0.5;}
\DoxyCodeLine{00102           \textcolor{keywordflow}{break};}
\DoxyCodeLine{00103         \}}
\DoxyCodeLine{00104       \}}
\DoxyCodeLine{00105     \} \textcolor{keywordflow}{else} \textcolor{comment}{/*-\/ ウェイトがすべて１の場合 -\/*/}}
\DoxyCodeLine{00106     \{}
\DoxyCodeLine{00107       x = myregions[regionindex][(int)partindex].x + (\textcolor{keywordtype}{double})random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() -\/}
\DoxyCodeLine{00108           0.5;}
\DoxyCodeLine{00109       y = myregions[regionindex][(int)partindex].y + (\textcolor{keywordtype}{double})random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() -\/}
\DoxyCodeLine{00110           0.5;}
\DoxyCodeLine{00111     \}}
\DoxyCodeLine{00112   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00113     x = values.x\_pos\_val + values.length\_val * (random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() -\/ 0.5);}
\DoxyCodeLine{00114     y = values.y\_pos\_val + values.height\_val * (random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() -\/ 0.5);}
\DoxyCodeLine{00115   \}}
\DoxyCodeLine{00116 }
\DoxyCodeLine{00117   \textcolor{keywordflow}{for} (std::map<int, TTile *>::iterator it = porttiles.begin();}
\DoxyCodeLine{00118        it != porttiles.end(); ++it) \{}
\DoxyCodeLine{00119     \textcolor{keywordflow}{if} ((values.lifetime\_ctrl\_val == it-\/>first ||}
\DoxyCodeLine{00120          values.speed\_ctrl\_val == it-\/>first ||}
\DoxyCodeLine{00121          values.scale\_ctrl\_val == it-\/>first ||}
\DoxyCodeLine{00122          values.rot\_ctrl\_val == it-\/>first}
\DoxyCodeLine{00123          \textcolor{comment}{/*-\/  Speed Angleを明るさでコントロールする場合 -\/*/}}
\DoxyCodeLine{00124          || (values.speeda\_ctrl\_val == it-\/>first \&\&}
\DoxyCodeLine{00125              !values.speeda\_use\_gradient\_val)) \&\&}
\DoxyCodeLine{00126         it-\/>second-\/>getRaster()) \{}
\DoxyCodeLine{00127       \textcolor{keywordtype}{double} tmpvalue;}
\DoxyCodeLine{00128       get\_image\_reference(it-\/>second, values, tmpvalue, ParticlesFx::GRAY\_REF);}
\DoxyCodeLine{00129       imagereferences[it-\/>first] = tmpvalue;}
\DoxyCodeLine{00130     \}}
\DoxyCodeLine{00131   \}}
\DoxyCodeLine{00132   \textcolor{keywordflow}{if} (values.lifetime\_ctrl\_val) \{}
\DoxyCodeLine{00133     \textcolor{keywordtype}{double} lifetimereference = 0.0;}
\DoxyCodeLine{00134     lifetimereference        = imagereferences[values.lifetime\_ctrl\_val];}
\DoxyCodeLine{00135     lifetime                 = g\_lifetime * lifetimereference;}
\DoxyCodeLine{00136   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00137     lifetime = g\_lifetime;}
\DoxyCodeLine{00138 }
\DoxyCodeLine{00139   \textcolor{comment}{// lifetime=g\_lifetime;}}
\DoxyCodeLine{00140   genlifetime = lifetime;}
\DoxyCodeLine{00141   \textcolor{keywordflow}{if} (values.speed\_ctrl\_val \&\&}
\DoxyCodeLine{00142       (porttiles.find(values.speed\_ctrl\_val) != porttiles.end())) \{}
\DoxyCodeLine{00143     \textcolor{keywordtype}{double} speedreference = 0.0;}
\DoxyCodeLine{00144     speedreference        = imagereferences[values.speed\_ctrl\_val];}
\DoxyCodeLine{00145     random\_speed =}
\DoxyCodeLine{00146         values.speed\_val.first + (ranges.speed\_range) * speedreference;}
\DoxyCodeLine{00147   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00148     random\_speed =}
\DoxyCodeLine{00149         values.speed\_val.first + (ranges.speed\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}();}
\DoxyCodeLine{00150 }
\DoxyCodeLine{00151   \textcolor{comment}{/*-\/ Speed Angleの制御。RangeモードとGradientモードがある -\/*/}}
\DoxyCodeLine{00152   \textcolor{keywordflow}{if} (values.speeda\_ctrl\_val \&\&}
\DoxyCodeLine{00153       (porttiles.find(values.speeda\_ctrl\_val) != porttiles.end() ||}
\DoxyCodeLine{00154        porttiles.find(values.speeda\_ctrl\_val + Ctrl\_64\_Offset) !=}
\DoxyCodeLine{00155            porttiles.end())) \{}
\DoxyCodeLine{00156     \textcolor{keywordflow}{if} (values.speeda\_use\_gradient\_val) \{}
\DoxyCodeLine{00157       \textcolor{comment}{/*-\/ 参照画像のGradientを得る関数を利用して角度を得る -\/*/}}
\DoxyCodeLine{00158       \textcolor{keywordtype}{float} dir\_x, dir\_y;}
\DoxyCodeLine{00159       get\_image\_gravity(porttiles[values.speeda\_ctrl\_val + Ctrl\_64\_Offset],}
\DoxyCodeLine{00160                         values, dir\_x, dir\_y);}
\DoxyCodeLine{00161       \textcolor{keywordflow}{if} (dir\_x == 0.0f \&\& dir\_y == 0.0f)}
\DoxyCodeLine{00162         random\_s\_a\_range = values.speed\_val.first;}
\DoxyCodeLine{00163       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00164         random\_s\_a\_range = atan2f(dir\_x, -\/dir\_y);}
\DoxyCodeLine{00165     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00166       \textcolor{keywordtype}{double} speedareference = 0.0;}
\DoxyCodeLine{00167       speedareference        = imagereferences[values.speeda\_ctrl\_val];}
\DoxyCodeLine{00168       random\_s\_a\_range =}
\DoxyCodeLine{00169           values.speeda\_val.first + (ranges.speeda\_range) * speedareference;}
\DoxyCodeLine{00170     \}}
\DoxyCodeLine{00171   \} \textcolor{keywordflow}{else} \textcolor{comment}{/*-\/ Control Imageが無ければランダム -\/*/}}
\DoxyCodeLine{00172     random\_s\_a\_range =}
\DoxyCodeLine{00173         values.speeda\_val.first + (ranges.speeda\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}();}
\DoxyCodeLine{00174 }
\DoxyCodeLine{00175   trail =}
\DoxyCodeLine{00176       (int)(values.trail\_val.first + (ranges.trail\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}());}
\DoxyCodeLine{00177   vx   = random\_speed * sin(random\_s\_a\_range);}
\DoxyCodeLine{00178   vy   = -\/random\_speed * cos(random\_s\_a\_range);}
\DoxyCodeLine{00179   oldx = 0;}
\DoxyCodeLine{00180   oldy = 0;}
\DoxyCodeLine{00181   mass = values.mass\_val.first + (ranges.mass\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}();}
\DoxyCodeLine{00182   \textcolor{keywordflow}{if} (values.scale\_ctrl\_val \&\&}
\DoxyCodeLine{00183       (porttiles.find(values.scale\_ctrl\_val) != porttiles.end())) \{}
\DoxyCodeLine{00184     \textcolor{keywordtype}{double} scalereference = 0.0;}
\DoxyCodeLine{00185     scalereference        = imagereferences[values.scale\_ctrl\_val];}
\DoxyCodeLine{00186     scale = values.scale\_val.first + (ranges.scale\_range) * scalereference;}
\DoxyCodeLine{00187   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00188     \textcolor{comment}{/*-\/}}
\DoxyCodeLine{00189 \textcolor{comment}{     * ONのとき、かつ、ScaleにControlが無い場合、粒子サイズが小さいほど(遠くにあるので)多く分布するようになる。-\/*/}}
\DoxyCodeLine{00190     \textcolor{keywordflow}{if} (values.perspective\_distribution\_val) \{}
\DoxyCodeLine{00191       scale =}
\DoxyCodeLine{00192           (values.scale\_val.first * values.scale\_val.second) /}
\DoxyCodeLine{00193           (values.scale\_val.second -\/ (ranges.scale\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}());}
\DoxyCodeLine{00194     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00195       scale = values.scale\_val.first + (ranges.scale\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}();}
\DoxyCodeLine{00196   \}}
\DoxyCodeLine{00197   \textcolor{keywordflow}{if} (values.rot\_ctrl\_val \&\&}
\DoxyCodeLine{00198       (porttiles.find(values.rot\_ctrl\_val) != porttiles.end())) \{}
\DoxyCodeLine{00199     \textcolor{keywordtype}{double} anglereference = 0.0;}
\DoxyCodeLine{00200     anglereference        = imagereferences[values.rot\_ctrl\_val];}
\DoxyCodeLine{00201     angle = -\/(values.rot\_val.first) -\/ (ranges.rot\_range) * anglereference;}
\DoxyCodeLine{00202   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00203     angle = -\/(values.rot\_val.first) -\/ (ranges.rot\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}();}
\DoxyCodeLine{00204 }
\DoxyCodeLine{00205   \textcolor{keywordflow}{if} (values.randomx\_ctrl\_val)}
\DoxyCodeLine{00206     randomxreference = imagereferences[values.randomx\_ctrl\_val];}
\DoxyCodeLine{00207   \textcolor{keywordflow}{if} (values.randomy\_ctrl\_val)}
\DoxyCodeLine{00208     randomyreference = imagereferences[values.randomy\_ctrl\_val];}
\DoxyCodeLine{00209   \textcolor{comment}{// if(check\_Swing(values))}}
\DoxyCodeLine{00210   create\_Swing(values, ranges, randomxreference, randomyreference);}
\DoxyCodeLine{00211 }
\DoxyCodeLine{00212   create\_Colors(values, ranges, porttiles);}
\DoxyCodeLine{00213 }
\DoxyCodeLine{00214   \textcolor{keywordflow}{if} (scale < 0.001) scale = 0;}
\DoxyCodeLine{00215 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_particle_ad030d0fe7b88cf81744b127c99244ff4}\label{class_particle_ad030d0fe7b88cf81744b127c99244ff4}} 
\index{Particle@{Particle}!````~Particle@{$\sim$Particle}}
\index{````~Particle@{$\sim$Particle}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{$\sim$Particle()}{~Particle()}}
{\footnotesize\ttfamily Particle\+::$\sim$\+Particle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00174 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_particle_af70db3d757de3dca88757c9ec1b0acde}\label{class_particle_af70db3d757de3dca88757c9ec1b0acde}} 
\index{Particle@{Particle}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool Particle\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00211 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_particle_afe7ddef23d8d1f94a029fa3d9cb3786d}\label{class_particle_afe7ddef23d8d1f94a029fa3d9cb3786d}} 
\index{Particle@{Particle}!check\_Swing@{check\_Swing}}
\index{check\_Swing@{check\_Swing}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{check\_Swing()}{check\_Swing()}}
{\footnotesize\ttfamily int Particle\+::check\+\_\+\+Swing (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00218                                                         \{}
\DoxyCodeLine{00219   \textcolor{keywordflow}{return} (values.randomx\_val.first || values.randomx\_val.second ||}
\DoxyCodeLine{00220           values.randomy\_val.first || values.randomy\_val.second ||}
\DoxyCodeLine{00221           values.rotsca\_val.first || values.rotsca\_val.second);}
\DoxyCodeLine{00222 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_particle_a8810961a87b5b76ddf07142cabfd347d}\label{class_particle_a8810961a87b5b76ddf07142cabfd347d}} 
\index{Particle@{Particle}!create\_Animation@{create\_Animation}}
\index{create\_Animation@{create\_Animation}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{create\_Animation()}{create\_Animation()}}
{\footnotesize\ttfamily void Particle\+::create\+\_\+\+Animation (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{int}]{first,  }\item[{int}]{last }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00015                                           \{}
\DoxyCodeLine{00016   \textcolor{keywordflow}{switch} (values.animation\_val) \{}
\DoxyCodeLine{00017   \textcolor{keywordflow}{case} ParticlesFx::ANIM\_CYCLE:}
\DoxyCodeLine{00018   \textcolor{keywordflow}{case} ParticlesFx::ANIM\_S\_CYCLE:}
\DoxyCodeLine{00019     frame     = first;}
\DoxyCodeLine{00020     animswing = 0; \textcolor{comment}{/*frame <0 perche' c'e' il preroll dialmeno un frame*/}}
\DoxyCodeLine{00021     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00022 }
\DoxyCodeLine{00023   \textcolor{keywordflow}{case} ParticlesFx::ANIM\_SR\_CYCLE:}
\DoxyCodeLine{00024     frame     = (int)(first + (random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}()) * (last -\/ first));}
\DoxyCodeLine{00025     animswing = random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() > 0.5 ? 1 : 0;}
\DoxyCodeLine{00026     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00027 }
\DoxyCodeLine{00028   \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00029     frame = (int)(first + (random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}()) * (last -\/ first));}
\DoxyCodeLine{00030     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00031   \}}
\DoxyCodeLine{00032 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_particle_ae5136a06605456ff1c0e80896e9723cf}\label{class_particle_ae5136a06605456ff1c0e80896e9723cf}} 
\index{Particle@{Particle}!create\_Colors@{create\_Colors}}
\index{create\_Colors@{create\_Colors}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{create\_Colors()}{create\_Colors()}}
{\footnotesize\ttfamily void Particle\+::create\+\_\+\+Colors (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&}]{ranges,  }\item[{std\+::map$<$ int, \mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ $>$}]{porttiles }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00265                                                              \{}
\DoxyCodeLine{00266   \textcolor{comment}{// TPixel32 color;}}
\DoxyCodeLine{00267 }
\DoxyCodeLine{00268   \textcolor{keywordflow}{if} (values.genfadecol\_val) \{}
\DoxyCodeLine{00269     TPixel32 color;}
\DoxyCodeLine{00270     \textcolor{keywordflow}{if} (values.gencol\_ctrl\_val \&\&}
\DoxyCodeLine{00271         (porttiles.find(values.gencol\_ctrl\_val) != porttiles.end()))}
\DoxyCodeLine{00272       get\_image\_reference(porttiles[values.gencol\_ctrl\_val], values, color);}
\DoxyCodeLine{00273     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00274       color = values.gencol\_val.getPremultipliedValue(random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}());}
\DoxyCodeLine{00275     gencol.fadecol = values.genfadecol\_val;}
\DoxyCodeLine{00276     \textcolor{keywordflow}{if} (values.gencol\_spread\_val) spread\_color(color, values.gencol\_spread\_val);}
\DoxyCodeLine{00277     gencol.col = color;}
\DoxyCodeLine{00278   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00279     gencol.col     = TPixel32::Transparent;}
\DoxyCodeLine{00280     gencol.fadecol = 0;}
\DoxyCodeLine{00281   \}}
\DoxyCodeLine{00282   \textcolor{keywordflow}{if} (values.finfadecol\_val) \{}
\DoxyCodeLine{00283     TPixel32 color;}
\DoxyCodeLine{00284     \textcolor{keywordflow}{if} (values.fincol\_ctrl\_val \&\&}
\DoxyCodeLine{00285         (porttiles.find(values.fincol\_ctrl\_val) != porttiles.end()))}
\DoxyCodeLine{00286       get\_image\_reference(porttiles[values.fincol\_ctrl\_val], values, color);}
\DoxyCodeLine{00287     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00288       color = values.fincol\_val.getPremultipliedValue(random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}());}
\DoxyCodeLine{00289     fincol.rangecol = (int)values.finrangecol\_val;}
\DoxyCodeLine{00290     fincol.fadecol  = values.finfadecol\_val;}
\DoxyCodeLine{00291     if (values.fincol\_spread\_val) spread\_color(color, values.fincol\_spread\_val);}
\DoxyCodeLine{00292     fincol.col = color;}
\DoxyCodeLine{00293   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00294     fincol.col      = TPixel32::Transparent;}
\DoxyCodeLine{00295     fincol.rangecol = 0;}
\DoxyCodeLine{00296     fincol.fadecol  = 0;}
\DoxyCodeLine{00297   \}}
\DoxyCodeLine{00298   \textcolor{keywordflow}{if} (values.foutfadecol\_val) \{}
\DoxyCodeLine{00299     TPixel32 color;}
\DoxyCodeLine{00300     \textcolor{keywordflow}{if} (values.foutcol\_ctrl\_val \&\&}
\DoxyCodeLine{00301         (porttiles.find(values.foutcol\_ctrl\_val) != porttiles.end()))}
\DoxyCodeLine{00302       get\_image\_reference(porttiles[values.foutcol\_ctrl\_val], values, color);}
\DoxyCodeLine{00303     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00304       color = values.foutcol\_val.getPremultipliedValue(random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}());}
\DoxyCodeLine{00305     ;}
\DoxyCodeLine{00306     foutcol.rangecol = (int)values.foutrangecol\_val;}
\DoxyCodeLine{00307     foutcol.fadecol  = values.foutfadecol\_val;}
\DoxyCodeLine{00308     if (values.foutcol\_spread\_val)}
\DoxyCodeLine{00309       spread\_color(color, values.foutcol\_spread\_val);}
\DoxyCodeLine{00310     foutcol.col = color;}
\DoxyCodeLine{00311   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00312     foutcol.col      = TPixel32::Transparent;}
\DoxyCodeLine{00313     foutcol.rangecol = 0;}
\DoxyCodeLine{00314     foutcol.fadecol  = 0;}
\DoxyCodeLine{00315   \}}
\DoxyCodeLine{00316 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_particle_a5b2fcd24d17f6f9f898543aa0677ec05}\label{class_particle_a5b2fcd24d17f6f9f898543aa0677ec05}} 
\index{Particle@{Particle}!create\_Swing@{create\_Swing}}
\index{create\_Swing@{create\_Swing}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{create\_Swing()}{create\_Swing()}}
{\footnotesize\ttfamily void Particle\+::create\+\_\+\+Swing (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&}]{ranges,  }\item[{double}]{randomxreference,  }\item[{double}]{randomyreference }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00228                                                                               \{}
\DoxyCodeLine{00229   changesignx =}
\DoxyCodeLine{00230       (int)(values.swing\_val.first + random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.swing\_range));}
\DoxyCodeLine{00231   changesigny =}
\DoxyCodeLine{00232       (int)(values.swing\_val.first + random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.swing\_range));}
\DoxyCodeLine{00233   changesigna = (int)(values.rotswing\_val.first +}
\DoxyCodeLine{00234                       random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.rotswing\_range));}
\DoxyCodeLine{00235   \textcolor{keywordflow}{if} (values.swingmode\_val == ParticlesFx::SWING\_SMOOTH) \{}
\DoxyCodeLine{00236     \textcolor{keywordflow}{if} (values.randomx\_ctrl\_val)}
\DoxyCodeLine{00237       smswingx = abs((\textcolor{keywordtype}{int})values.randomx\_val.first) +}
\DoxyCodeLine{00238                  randomxreference * (ranges.randomx\_range);}
\DoxyCodeLine{00239     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00240       smswingx = abs((\textcolor{keywordtype}{int})values.randomx\_val.first) +}
\DoxyCodeLine{00241                  random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.randomx\_range);}
\DoxyCodeLine{00242     \textcolor{keywordflow}{if} (values.randomy\_ctrl\_val)}
\DoxyCodeLine{00243       smswingy = abs((\textcolor{keywordtype}{int})values.randomy\_val.first) +}
\DoxyCodeLine{00244                  randomyreference * (ranges.randomy\_range);}
\DoxyCodeLine{00245     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00246       smswingy = abs((\textcolor{keywordtype}{int})values.randomy\_val.first) +}
\DoxyCodeLine{00247                  random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.randomy\_range);}
\DoxyCodeLine{00248     smperiodx = changesignx;}
\DoxyCodeLine{00249     smperiody = changesigny;}
\DoxyCodeLine{00250   \}}
\DoxyCodeLine{00251   \textcolor{keywordflow}{if} (values.rotswingmode\_val == ParticlesFx::SWING\_SMOOTH) \{}
\DoxyCodeLine{00252     smswinga  = abs((\textcolor{keywordtype}{int})(values.rotsca\_val.first +}
\DoxyCodeLine{00253                          random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.rotsca\_range)));}
\DoxyCodeLine{00254     smperioda = changesigna;}
\DoxyCodeLine{00255   \}}
\DoxyCodeLine{00256   signx = random.\mbox{\hyperlink{class_t_random_aaba89e229a3e3e7146d439bc5bbeb848}{getBool}}() ? 1 : -\/1;}
\DoxyCodeLine{00257   signy = random.\mbox{\hyperlink{class_t_random_aaba89e229a3e3e7146d439bc5bbeb848}{getBool}}() ? 1 : -\/1;}
\DoxyCodeLine{00258   signa = random.\mbox{\hyperlink{class_t_random_aaba89e229a3e3e7146d439bc5bbeb848}{getBool}}() ? 1 : -\/1;}
\DoxyCodeLine{00259 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_particle_a257ab6d83bcfdea572a7b6eee9bb85eb}\label{class_particle_a257ab6d83bcfdea572a7b6eee9bb85eb}} 
\index{Particle@{Particle}!get\_image\_gravity@{get\_image\_gravity}}
\index{get\_image\_gravity@{get\_image\_gravity}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{get\_image\_gravity()}{get\_image\_gravity()}}
{\footnotesize\ttfamily void Particle\+::get\+\_\+image\+\_\+gravity (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$}]{ctrl1,  }\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{float \&}]{gx,  }\item[{float \&}]{gy }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00562                                                        \{}
\DoxyCodeLine{00563   \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} raster64 = ctrl1-\/>getRaster();}
\DoxyCodeLine{00564   \mbox{\hyperlink{class_t_point_t}{TPointD}} tmp(x, y);}
\DoxyCodeLine{00565   tmp -\/= ctrl1-\/>m\_pos;}
\DoxyCodeLine{00566   \textcolor{keywordtype}{int} radius = 2;}
\DoxyCodeLine{00567   gx         = 0;}
\DoxyCodeLine{00568   gy         = 0;}
\DoxyCodeLine{00569   raster64-\/>lock();}
\DoxyCodeLine{00570   \textcolor{keywordflow}{if} (raster64 \&\& tmp.x >= radius \&\& tmp.x < raster64-\/>getLx() -\/ radius \&\&}
\DoxyCodeLine{00571       tmp.y >= radius \&\& tmp.y < raster64-\/>getLy() -\/ radius) \{}
\DoxyCodeLine{00572     TPixel64 *pix = \&(raster64-\/>pixels(troundp(tmp.y))[(int)tmp.x]);}
\DoxyCodeLine{00573 }
\DoxyCodeLine{00574     gx += 2 * TPixelGR16::from(*(pix + 1)).value;}
\DoxyCodeLine{00575     gx += TPixelGR16::from(*(pix + 1 + raster64-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00576     gx += TPixelGR16::from(*(pix + 1 -\/ raster64-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00577 }
\DoxyCodeLine{00578     gx -\/= 2 * TPixelGR16::from(*(pix -\/ 1)).value;}
\DoxyCodeLine{00579     gx -\/= TPixelGR16::from(*(pix -\/ 1 + raster64-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00580     gx -\/= TPixelGR16::from(*(pix -\/ 1 -\/ raster64-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00581 }
\DoxyCodeLine{00582     gy += 2 * TPixelGR16::from(*(pix + raster64-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00583     gy += TPixelGR16::from(*(pix + raster64-\/>getWrap() * 1 + 1)).value;}
\DoxyCodeLine{00584     gy += TPixelGR16::from(*(pix + raster64-\/>getWrap() * 1 -\/ 1)).value;}
\DoxyCodeLine{00585 }
\DoxyCodeLine{00586     gy -\/= 2 * TPixelGR16::from(*(pix -\/ raster64-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00587     gy -\/= TPixelGR16::from(*(pix -\/ raster64-\/>getWrap() * 1 + 1)).value;}
\DoxyCodeLine{00588     gy -\/= TPixelGR16::from(*(pix -\/ raster64-\/>getWrap() * 1 -\/ 1)).value;}
\DoxyCodeLine{00589 }
\DoxyCodeLine{00590     \textcolor{keywordtype}{double} norm = std::sqrt(gx * gx + gy * gy);}
\DoxyCodeLine{00591     \textcolor{keywordflow}{if} (norm) \{}
\DoxyCodeLine{00592       \textcolor{keywordtype}{double} inorm = 0.1 / norm;}
\DoxyCodeLine{00593       gx           = gx * inorm;}
\DoxyCodeLine{00594       gy           = gy * inorm;}
\DoxyCodeLine{00595     \}}
\DoxyCodeLine{00596   \}}
\DoxyCodeLine{00597   raster64-\/>unlock();}
\DoxyCodeLine{00598 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_particle_a4ae6a85e2bf770e16e072f9e9f99af75}\label{class_particle_a4ae6a85e2bf770e16e072f9e9f99af75}} 
\index{Particle@{Particle}!get\_image\_reference@{get\_image\_reference}}
\index{get\_image\_reference@{get\_image\_reference}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{get\_image\_reference()}{get\_image\_reference()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Particle\+::get\+\_\+image\+\_\+reference (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$}]{ctrl1,  }\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{double \&}]{imagereference,  }\item[{int}]{type }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00530                                                                      \{}
\DoxyCodeLine{00531   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} raster32 = ctrl-\/>getRaster();}
\DoxyCodeLine{00532   \mbox{\hyperlink{class_t_point_t}{TPointD}} tmp(x, y);}
\DoxyCodeLine{00533   tmp -\/= ctrl-\/>m\_pos;}
\DoxyCodeLine{00534   imagereference = 0.0;}
\DoxyCodeLine{00535   raster32-\/>lock();}
\DoxyCodeLine{00536   \textcolor{keywordflow}{switch} (type) \{}
\DoxyCodeLine{00537   \textcolor{keywordflow}{case} ParticlesFx::GRAY\_REF:}
\DoxyCodeLine{00538     \textcolor{keywordflow}{if} (raster32 \&\& tmp.x >= 0 \&\& tmp.x < raster32-\/>getLx() \&\& tmp.y >= 0 \&\&}
\DoxyCodeLine{00539         troundp(tmp.y) < raster32-\/>getLy()) \{}
\DoxyCodeLine{00540       TPixel32 pix = raster32-\/>pixels(troundp(tmp.y))[(int)tmp.x];}
\DoxyCodeLine{00541       imagereference =}
\DoxyCodeLine{00542           \mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(pix).value / (double)TPixelGR8::maxChannelValue;}
\DoxyCodeLine{00543     \}}
\DoxyCodeLine{00544     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00545 }
\DoxyCodeLine{00546   \textcolor{keywordflow}{case} ParticlesFx::H\_REF:}
\DoxyCodeLine{00547     \textcolor{keywordflow}{if} (raster32 \&\& tmp.x >= 0 \&\& tmp.x < raster32-\/>getLx() \&\& tmp.y >= 0 \&\&}
\DoxyCodeLine{00548         tround(tmp.y) < raster32-\/>getLy()) \{}
\DoxyCodeLine{00549       \textcolor{keywordtype}{double} aux = (double)TPixel32::maxChannelValue;}
\DoxyCodeLine{00550       \textcolor{keywordtype}{double} h, s, v;}
\DoxyCodeLine{00551       TPixel32 pix = raster32-\/>pixels(troundp(tmp.y))[(\textcolor{keywordtype}{int})tmp.x];}
\DoxyCodeLine{00552       OLDRGB2HSV(pix.r / aux, pix.g / aux, pix.b / aux, \&h, \&s, \&v);}
\DoxyCodeLine{00553       imagereference = h / 360.0;}
\DoxyCodeLine{00554     \}}
\DoxyCodeLine{00555     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00556   \}}
\DoxyCodeLine{00557   raster32-\/>unlock();}
\DoxyCodeLine{00558 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_particle_a8c78d411e747a6545f99492e4e6fda14}\label{class_particle_a8c78d411e747a6545f99492e4e6fda14}} 
\index{Particle@{Particle}!get\_image\_reference@{get\_image\_reference}}
\index{get\_image\_reference@{get\_image\_reference}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{get\_image\_reference()}{get\_image\_reference()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Particle\+::get\+\_\+image\+\_\+reference (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$}]{ctrl1,  }\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{TPixel32 \&}]{color }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00602                                                     \{}
\DoxyCodeLine{00603   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} raster32 = ctrl1-\/>getRaster();}
\DoxyCodeLine{00604   \mbox{\hyperlink{class_t_point_t}{TPointD}} tmp(x, y);}
\DoxyCodeLine{00605   tmp -\/= ctrl1-\/>m\_pos;}
\DoxyCodeLine{00606 }
\DoxyCodeLine{00607   \textcolor{keywordflow}{if} (raster32 \&\& tmp.x >= 0 \&\& tmp.x < raster32-\/>getLx() \&\& tmp.y >= 0 \&\&}
\DoxyCodeLine{00608       troundp(tmp.y) < raster32-\/>getLy()) \{}
\DoxyCodeLine{00609     color = raster32-\/>pixels(troundp(tmp.y))[(int)tmp.x];}
\DoxyCodeLine{00610   \}}
\DoxyCodeLine{00611   \textcolor{comment}{/*-\/-\/ 参照画像のBBoxの外側では、粒子を透明にする -\/-\/*/}}
\DoxyCodeLine{00612   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00613     color = TPixel32::Transparent;}
\DoxyCodeLine{00614 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_particle_ab23c57270045f8ff26fdc9e9a975c598}\label{class_particle_ab23c57270045f8ff26fdc9e9a975c598}} 
\index{Particle@{Particle}!modify\_colors@{modify\_colors}}
\index{modify\_colors@{modify\_colors}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{modify\_colors()}{modify\_colors()}}
{\footnotesize\ttfamily void Particle\+::modify\+\_\+colors (\begin{DoxyParamCaption}\item[{TPixel32 \&}]{color,  }\item[{double \&}]{intensity }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00322                                                                \{}
\DoxyCodeLine{00323   \textcolor{keywordtype}{float} percent = 0;}
\DoxyCodeLine{00324   \textcolor{keywordflow}{if} ((gencol.fadecol || fincol.fadecol) \&\&}
\DoxyCodeLine{00325       (genlifetime -\/ lifetime) <= fincol.rangecol) \{}
\DoxyCodeLine{00326     \textcolor{keywordflow}{if} (fincol.rangecol)}
\DoxyCodeLine{00327       percent = (genlifetime -\/ lifetime) / (\textcolor{keywordtype}{float})(fincol.rangecol);}
\DoxyCodeLine{00328     \textcolor{comment}{// color=gencol.col+percent*(fincol.col-\/gencol.col);}}
\DoxyCodeLine{00329     color     = blend(gencol.col, fincol.col, percent);}
\DoxyCodeLine{00330     intensity = gencol.fadecol + percent * (fincol.fadecol -\/ gencol.fadecol);}
\DoxyCodeLine{00331   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (foutcol.fadecol \&\& lifetime <= foutcol.rangecol) \{}
\DoxyCodeLine{00332     \textcolor{keywordflow}{if} (foutcol.rangecol)}
\DoxyCodeLine{00333       percent = 1 -\/ (lifetime -\/ 1) / (\textcolor{keywordtype}{float})(foutcol.rangecol);}
\DoxyCodeLine{00334     \textcolor{keywordflow}{if} (fincol.rangecol \&\& fincol.fadecol) \{}
\DoxyCodeLine{00335       color     = blend(fincol.col, foutcol.col, percent);}
\DoxyCodeLine{00336       intensity = fincol.fadecol + percent * (foutcol.fadecol -\/ fincol.fadecol);}
\DoxyCodeLine{00337     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00338       color     = blend(gencol.col, foutcol.col, percent);}
\DoxyCodeLine{00339       intensity = gencol.fadecol + percent * (foutcol.fadecol -\/ gencol.fadecol);}
\DoxyCodeLine{00340     \}}
\DoxyCodeLine{00341   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00342     \textcolor{keywordflow}{if} (fincol.fadecol \&\& fincol.rangecol) \{}
\DoxyCodeLine{00343       color     = fincol.col;}
\DoxyCodeLine{00344       intensity = fincol.fadecol;}
\DoxyCodeLine{00345     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00346       color     = gencol.col;}
\DoxyCodeLine{00347       intensity = gencol.fadecol;}
\DoxyCodeLine{00348     \}}
\DoxyCodeLine{00349   \}}
\DoxyCodeLine{00350 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_particle_a2abf116d4acea19a3832e35c8dcf71ca}\label{class_particle_a2abf116d4acea19a3832e35c8dcf71ca}} 
\index{Particle@{Particle}!modify\_colors\_and\_opacity@{modify\_colors\_and\_opacity}}
\index{modify\_colors\_and\_opacity@{modify\_colors\_and\_opacity}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{modify\_colors\_and\_opacity()}{modify\_colors\_and\_opacity()}}
{\footnotesize\ttfamily void Particle\+::modify\+\_\+colors\+\_\+and\+\_\+opacity (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{float}]{curr\+\_\+opacity,  }\item[{int}]{dist\+\_\+frame,  }\item[{\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}}]{raster }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00356                                                               \{}
\DoxyCodeLine{00357   \textcolor{keywordtype}{double} intensity = 0;}
\DoxyCodeLine{00358   TPixel32 col;}
\DoxyCodeLine{00359   \textcolor{keywordflow}{if} (gencol.fadecol || fincol.fadecol || foutcol.fadecol) \{}
\DoxyCodeLine{00360     modify\_colors(col, intensity);}
\DoxyCodeLine{00361     \textcolor{keywordtype}{int} j;}
\DoxyCodeLine{00362     raster32-\/>lock();}
\DoxyCodeLine{00363     \textcolor{keywordflow}{for} (j = 0; j < raster32-\/>getLy(); j++) \{}
\DoxyCodeLine{00364       TPixel32 *pix    = raster32-\/>pixels(j);}
\DoxyCodeLine{00365       TPixel32 *endPix = pix + raster32-\/>getLx();}
\DoxyCodeLine{00366       \textcolor{keywordflow}{while} (pix < endPix) \{}
\DoxyCodeLine{00367         \textcolor{keywordtype}{double} factor = pix-\/>m / 255.0;}
\DoxyCodeLine{00368         pix-\/>r        = (UCHAR)(pix-\/>r + intensity * (factor * col.r -\/ pix-\/>r));}
\DoxyCodeLine{00369         pix-\/>g        = (UCHAR)(pix-\/>g + intensity * (factor * col.g -\/ pix-\/>g));}
\DoxyCodeLine{00370         pix-\/>b        = (UCHAR)(pix-\/>b + intensity * (factor * col.b -\/ pix-\/>b));}
\DoxyCodeLine{00371         pix-\/>m        = (UCHAR)(pix-\/>m + intensity * (factor * col.m -\/ pix-\/>m));}
\DoxyCodeLine{00372         ++pix;}
\DoxyCodeLine{00373       \}}
\DoxyCodeLine{00374     \}}
\DoxyCodeLine{00375     raster32-\/>unlock();}
\DoxyCodeLine{00376     \textcolor{comment}{// pop\_rgbfade(pars, 0, 0, raster, raster, 1);}}
\DoxyCodeLine{00377   \}}
\DoxyCodeLine{00378 }
\DoxyCodeLine{00379   \textcolor{keywordflow}{if} (curr\_opacity != 1.0)}
\DoxyCodeLine{00380     \mbox{\hyperlink{namespace_t_rop_a66da5845870f824caab9c6fc47d6b8bd}{TRop::rgbmScale}}(raster32, raster32, 1, 1, 1, curr\_opacity);}
\DoxyCodeLine{00381 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_particle_a10ff701f7c6d53e09ebc8e2e662a8ef2}\label{class_particle_a10ff701f7c6d53e09ebc8e2e662a8ef2}} 
\index{Particle@{Particle}!move@{move}}
\index{move@{move}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{move()}{move()}}
{\footnotesize\ttfamily void Particle\+::move (\begin{DoxyParamCaption}\item[{const std\+::map$<$ int, \mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ $>$}]{porttiles,  }\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&}]{ranges,  }\item[{float}]{windx,  }\item[{float}]{windy,  }\item[{float}]{xgravity,  }\item[{float}]{ygravity,  }\item[{float}]{dpi,  }\item[{int}]{lastframe }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00631                                    \{}
\DoxyCodeLine{00632   \textcolor{keyword}{struct }\mbox{\hyperlink{structpos__dummy}{pos\_dummy}} dummy;}
\DoxyCodeLine{00633   \textcolor{comment}{// int time;}}
\DoxyCodeLine{00634   std::map<int, double> imagereferences;}
\DoxyCodeLine{00635   dummy.x = dummy.y = dummy.a = 0.0;}
\DoxyCodeLine{00636 }
\DoxyCodeLine{00637   \textcolor{keywordtype}{double} frictreference     = 1;}
\DoxyCodeLine{00638   \textcolor{keywordtype}{double} scalereference     = 0;}
\DoxyCodeLine{00639   \textcolor{keywordtype}{double} scalestepreference = 0;}
\DoxyCodeLine{00640   \textcolor{keywordtype}{double} randomxreference   = 1;}
\DoxyCodeLine{00641   \textcolor{keywordtype}{double} randomyreference   = 1;}
\DoxyCodeLine{00642 }
\DoxyCodeLine{00643   \textcolor{keywordflow}{for} (std::map<int, TTile *>::iterator it = porttiles.begin();}
\DoxyCodeLine{00644        it != porttiles.end(); ++it) \{}
\DoxyCodeLine{00645     \textcolor{keywordflow}{if} ((values.friction\_ctrl\_val == it-\/>first ||}
\DoxyCodeLine{00646          values.scale\_ctrl\_val == it-\/>first ||}
\DoxyCodeLine{00647          values.scalestep\_ctrl\_val == it-\/>first ||}
\DoxyCodeLine{00648          values.randomx\_ctrl\_val == it-\/>first ||}
\DoxyCodeLine{00649          values.randomy\_ctrl\_val == it-\/>first) \&\&}
\DoxyCodeLine{00650         it-\/>second-\/>getRaster()) \{}
\DoxyCodeLine{00651       \textcolor{keywordtype}{double} tmpvalue;}
\DoxyCodeLine{00652       get\_image\_reference(it-\/>second, values, tmpvalue, ParticlesFx::GRAY\_REF);}
\DoxyCodeLine{00653       imagereferences[it-\/>first] = tmpvalue;}
\DoxyCodeLine{00654     \}}
\DoxyCodeLine{00655   \}}
\DoxyCodeLine{00656 }
\DoxyCodeLine{00657   \textcolor{keywordflow}{if} (values.randomx\_ctrl\_val)}
\DoxyCodeLine{00658     randomxreference = imagereferences[values.randomx\_ctrl\_val];}
\DoxyCodeLine{00659   \textcolor{keywordflow}{if} (values.randomy\_ctrl\_val)}
\DoxyCodeLine{00660     randomyreference = imagereferences[values.randomy\_ctrl\_val];}
\DoxyCodeLine{00661 }
\DoxyCodeLine{00662   \textcolor{keywordflow}{if} (check\_Swing(values))}
\DoxyCodeLine{00663     update\_Swing(values, ranges, dummy, randomxreference, randomyreference);}
\DoxyCodeLine{00664 }
\DoxyCodeLine{00665   \textcolor{keywordflow}{if} (values.friction\_ctrl\_val)}
\DoxyCodeLine{00666     frictreference = imagereferences[values.friction\_ctrl\_val];}
\DoxyCodeLine{00667 }
\DoxyCodeLine{00668   \textcolor{keywordflow}{if} (values.scale\_ctrl\_val)}
\DoxyCodeLine{00669     scalereference = imagereferences[values.scale\_ctrl\_val];}
\DoxyCodeLine{00670   \textcolor{keywordflow}{if} (values.scalestep\_ctrl\_val)}
\DoxyCodeLine{00671     scalestepreference = imagereferences[values.scalestep\_ctrl\_val];}
\DoxyCodeLine{00672   lifetime-\/-\/;}
\DoxyCodeLine{00673   oldx = x;}
\DoxyCodeLine{00674   oldy = y;}
\DoxyCodeLine{00675   \textcolor{comment}{// time=genlifetime-\/lifetime-\/1;}}
\DoxyCodeLine{00676   \textcolor{comment}{// if(time<0) time=0;}}
\DoxyCodeLine{00677   \textcolor{keywordflow}{if} (values.gravity\_ctrl\_val \&\&}
\DoxyCodeLine{00678       (porttiles.find(values.gravity\_ctrl\_val + Ctrl\_64\_Offset) !=}
\DoxyCodeLine{00679        porttiles.end())) \{}
\DoxyCodeLine{00680     get\_image\_gravity(porttiles[values.gravity\_ctrl\_val + Ctrl\_64\_Offset],}
\DoxyCodeLine{00681                       values, xgravity, ygravity);}
\DoxyCodeLine{00682     xgravity *= values.gravity\_val;}
\DoxyCodeLine{00683     ygravity *= values.gravity\_val;}
\DoxyCodeLine{00684   \}}
\DoxyCodeLine{00685 }
\DoxyCodeLine{00686   \textcolor{keywordflow}{if} (\textcolor{keywordtype}{double} friction = values.friction\_val * frictreference) \{}
\DoxyCodeLine{00687     \textcolor{keywordflow}{if} (vx || vy) \{}
\DoxyCodeLine{00688       \textcolor{keywordtype}{double} v           = std::sqrt(vx * vx + vy * vy);}
\DoxyCodeLine{00689       \textcolor{keywordtype}{double} frictined\_v = v * (1 + friction) + (10 / v) * friction;}
\DoxyCodeLine{00690       \textcolor{keywordflow}{if} (frictined\_v < 0) frictined\_v = 0;}
\DoxyCodeLine{00691 }
\DoxyCodeLine{00692       \textcolor{keywordtype}{double} f\_ratio = frictined\_v / v;}
\DoxyCodeLine{00693       \textcolor{keywordflow}{if} (vx) vx *= f\_ratio;}
\DoxyCodeLine{00694       \textcolor{keywordflow}{if} (vy) vy *= f\_ratio;}
\DoxyCodeLine{00695     \}}
\DoxyCodeLine{00696     \textcolor{keywordflow}{if} (!vx \&\& fabs(friction * 10) > fabs(xgravity)) \{}
\DoxyCodeLine{00697       xgravity = 0;}
\DoxyCodeLine{00698       dummy.x  = 0;}
\DoxyCodeLine{00699       dummy.a  = 0;}
\DoxyCodeLine{00700       windx    = 0;}
\DoxyCodeLine{00701     \}}
\DoxyCodeLine{00702     \textcolor{keywordflow}{if} (!vy \&\& fabs(friction * 10) > fabs(xgravity)) \{}
\DoxyCodeLine{00703       xgravity = 0;}
\DoxyCodeLine{00704       dummy.x  = 0;}
\DoxyCodeLine{00705       dummy.a  = 0;}
\DoxyCodeLine{00706       windx    = 0;}
\DoxyCodeLine{00707     \}}
\DoxyCodeLine{00708   \}}
\DoxyCodeLine{00709 }
\DoxyCodeLine{00710   vx += xgravity * mass;}
\DoxyCodeLine{00711   vy += ygravity * mass;}
\DoxyCodeLine{00712   \textcolor{keywordflow}{if} (values.speedscale\_val) \{}
\DoxyCodeLine{00713     \textcolor{keywordtype}{float} scalecorr = scale / dpicorr;}
\DoxyCodeLine{00714     x += (vx + windx + dummy.x) * scalecorr;}
\DoxyCodeLine{00715     y += (vy + windy + dummy.y) * scalecorr;}
\DoxyCodeLine{00716   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00717     x += vx + windx + dummy.x;}
\DoxyCodeLine{00718     y += vy + windy + dummy.y;}
\DoxyCodeLine{00719   \}}
\DoxyCodeLine{00720   angle -\/= values.rotspeed\_val + dummy.a;}
\DoxyCodeLine{00721 }
\DoxyCodeLine{00722   \textcolor{keywordflow}{if} (!(lifetime \% values.step\_val) || (frame < 0)) \{}
\DoxyCodeLine{00723     update\_Animation(values, 0, lastframe, 0);}
\DoxyCodeLine{00724   \}}
\DoxyCodeLine{00725 }
\DoxyCodeLine{00726   update\_Scale(values, ranges, scalereference, scalestepreference);}
\DoxyCodeLine{00727 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_particle_a1416a86f3f396f44f685e39e868ab9c9}\label{class_particle_a1416a86f3f396f44f685e39e868ab9c9}} 
\index{Particle@{Particle}!set\_Opacity@{set\_Opacity}}
\index{set\_Opacity@{set\_Opacity}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{set\_Opacity()}{set\_Opacity()}}
{\footnotesize\ttfamily double Particle\+::set\+\_\+\+Opacity (\begin{DoxyParamCaption}\item[{std\+::map$<$ int, \mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ $>$}]{porttiles,  }\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{float}]{opacity\+\_\+range,  }\item[{double}]{dist\+\_\+frame }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00732                                                                      \{}
\DoxyCodeLine{00733   \textcolor{keywordtype}{double} opacity = 1.0, trailcorr;}
\DoxyCodeLine{00734 }
\DoxyCodeLine{00735   \textcolor{keywordflow}{if} (values.fadein\_val \&\& (genlifetime -\/ lifetime) < values.fadein\_val)}
\DoxyCodeLine{00736     opacity *= (genlifetime -\/ lifetime -\/ 1) / (values.fadein\_val);}
\DoxyCodeLine{00737   \textcolor{keywordflow}{if} (values.fadeout\_val \&\& lifetime < values.fadeout\_val)}
\DoxyCodeLine{00738     opacity *= (lifetime) / values.fadeout\_val;}
\DoxyCodeLine{00739 }
\DoxyCodeLine{00740   if (trail) \{}
\DoxyCodeLine{00741     trailcorr =}
\DoxyCodeLine{00742         values.trailopacity\_val.first +}
\DoxyCodeLine{00743         (values.trailopacity\_val.second -\/ values.trailopacity\_val.first) *}
\DoxyCodeLine{00744             (1 -\/ (dist\_frame) / trail);}
\DoxyCodeLine{00745     opacity *= trailcorr;}
\DoxyCodeLine{00746   \}}
\DoxyCodeLine{00747   \textcolor{keywordflow}{if} (values.opacity\_ctrl\_val \&\&}
\DoxyCodeLine{00748       (porttiles.find(values.opacity\_ctrl\_val) != porttiles.end())) \{}
\DoxyCodeLine{00749     \textcolor{keywordtype}{double} opacityreference = 0.0;}
\DoxyCodeLine{00750     get\_image\_reference(porttiles[values.opacity\_ctrl\_val], values,}
\DoxyCodeLine{00751                         opacityreference, ParticlesFx::GRAY\_REF);}
\DoxyCodeLine{00752     opacity =}
\DoxyCodeLine{00753         values.opacity\_val.first + (opacity\_range)*opacityreference * opacity;}
\DoxyCodeLine{00754   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00755     opacity = values.opacity\_val.first + opacity\_range * opacity;}
\DoxyCodeLine{00756   \textcolor{keywordflow}{return} opacity;}
\DoxyCodeLine{00757 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_particle_ac82033ce7e9539275e2445aad266c172}\label{class_particle_ac82033ce7e9539275e2445aad266c172}} 
\index{Particle@{Particle}!spread\_color@{spread\_color}}
\index{spread\_color@{spread\_color}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{spread\_color()}{spread\_color()}}
{\footnotesize\ttfamily void Particle\+::spread\+\_\+color (\begin{DoxyParamCaption}\item[{TPixel32 \&}]{color,  }\item[{double}]{range }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00616                                                          \{}
\DoxyCodeLine{00617   \textcolor{keywordtype}{int} randcol = (int)((random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() -\/ 0.5) * range);}
\DoxyCodeLine{00618   \textcolor{keywordtype}{int} r       = color.r + randcol;}
\DoxyCodeLine{00619   \textcolor{keywordtype}{int} g       = color.g + randcol;}
\DoxyCodeLine{00620   \textcolor{keywordtype}{int} b       = color.b + randcol;}
\DoxyCodeLine{00621   color.r     = (UCHAR)tcrop<TINT32>(r, (TINT32)0, (TINT32)255);}
\DoxyCodeLine{00622   color.g     = (UCHAR)tcrop<TINT32>(g, (TINT32)0, (TINT32)255);}
\DoxyCodeLine{00623   color.b     = (UCHAR)tcrop<TINT32>(b, (TINT32)0, (TINT32)255);}
\DoxyCodeLine{00624 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_particle_aaee9dbfbcb2edfe3dd72697a957bd0a4}\label{class_particle_aaee9dbfbcb2edfe3dd72697a957bd0a4}} 
\index{Particle@{Particle}!update\_Animation@{update\_Animation}}
\index{update\_Animation@{update\_Animation}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{update\_Animation()}{update\_Animation()}}
{\footnotesize\ttfamily void Particle\+::update\+\_\+\+Animation (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{int}]{first,  }\item[{int}]{last,  }\item[{int}]{keep }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00385                                                     \{}
\DoxyCodeLine{00386   \textcolor{keywordflow}{switch} (values.animation\_val) \{}
\DoxyCodeLine{00387   \textcolor{keywordflow}{case} ParticlesFx::ANIM\_RANDOM:}
\DoxyCodeLine{00388     frame = (int)(first + random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (last -\/ first));}
\DoxyCodeLine{00389     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00390 }
\DoxyCodeLine{00391   \textcolor{keywordflow}{case} ParticlesFx::ANIM\_R\_CYCLE:}
\DoxyCodeLine{00392   \textcolor{keywordflow}{case} ParticlesFx::ANIM\_CYCLE:}
\DoxyCodeLine{00393     \textcolor{keywordflow}{if} (!keep || frame != keep -\/ 1)}
\DoxyCodeLine{00394       frame = first + (frame + 1) \% (last -\/ first);}
\DoxyCodeLine{00395     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00396 }
\DoxyCodeLine{00397   \textcolor{keywordflow}{case} ParticlesFx::ANIM\_S\_CYCLE:}
\DoxyCodeLine{00398   \textcolor{keywordflow}{case} ParticlesFx::ANIM\_SR\_CYCLE:}
\DoxyCodeLine{00399     \textcolor{keywordflow}{if} (!keep || frame != keep -\/ 1) \{}
\DoxyCodeLine{00400       \textcolor{keywordflow}{if} (!animswing \&\& frame < last -\/ 1) \{}
\DoxyCodeLine{00401         frame = (frame + 1);}
\DoxyCodeLine{00402         \textcolor{keywordflow}{if} (frame == last -\/ 1) animswing = 1;}
\DoxyCodeLine{00403       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00404         frame = (frame -\/ 1);}
\DoxyCodeLine{00405       \textcolor{keywordflow}{if} (frame <= first) \{}
\DoxyCodeLine{00406         animswing = 0;}
\DoxyCodeLine{00407         frame     = first;}
\DoxyCodeLine{00408       \}}
\DoxyCodeLine{00409     \}}
\DoxyCodeLine{00410     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00411   \}}
\DoxyCodeLine{00412 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_particle_aff61189a240ae72ef3e5174c1f2bdfad}\label{class_particle_aff61189a240ae72ef3e5174c1f2bdfad}} 
\index{Particle@{Particle}!update\_Scale@{update\_Scale}}
\index{update\_Scale@{update\_Scale}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{update\_Scale()}{update\_Scale()}}
{\footnotesize\ttfamily void Particle\+::update\+\_\+\+Scale (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&}]{ranges,  }\item[{double}]{scalereference,  }\item[{double}]{scalestepreference }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00511                                                                               \{}
\DoxyCodeLine{00512   \textcolor{keywordtype}{double} scalestep;}
\DoxyCodeLine{00513 }
\DoxyCodeLine{00514   \textcolor{keywordflow}{if} (values.scale\_ctrl\_val \&\& values.scale\_ctrl\_all\_val)}
\DoxyCodeLine{00515     scale = values.scale\_val.first + (ranges.scale\_range) * scalereference;}
\DoxyCodeLine{00516   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00517     \textcolor{keywordflow}{if} (values.scalestep\_ctrl\_val)}
\DoxyCodeLine{00518       scalestep = values.scalestep\_val.first +}
\DoxyCodeLine{00519                   (ranges.scalestep\_range) * scalestepreference;}
\DoxyCodeLine{00520     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00521       scalestep = values.scalestep\_val.first +}
\DoxyCodeLine{00522                   (ranges.scalestep\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}();}
\DoxyCodeLine{00523     \textcolor{keywordflow}{if} (scalestep) scale += scalestep;}
\DoxyCodeLine{00524   \}}
\DoxyCodeLine{00525   \textcolor{keywordflow}{if} (scale < 0.001) scale = 0;}
\DoxyCodeLine{00526 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_particle_ab5cf79b185436b05aa3f3d841d469d9d}\label{class_particle_ab5cf79b185436b05aa3f3d841d469d9d}} 
\index{Particle@{Particle}!update\_Swing@{update\_Swing}}
\index{update\_Swing@{update\_Swing}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{update\_Swing()}{update\_Swing()}}
{\footnotesize\ttfamily void Particle\+::update\+\_\+\+Swing (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&}]{ranges,  }\item[{struct \mbox{\hyperlink{structpos__dummy}{pos\+\_\+dummy}} \&}]{dummy,  }\item[{double}]{randomxreference,  }\item[{double}]{randomyreference }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00418                                                      \{}
\DoxyCodeLine{00419   \textcolor{keywordflow}{if} (values.swingmode\_val == ParticlesFx::SWING\_SMOOTH) \{}
\DoxyCodeLine{00420     \textcolor{keywordflow}{if} (smperiodx)}
\DoxyCodeLine{00421       dummy.x =}
\DoxyCodeLine{00422           smswingx * randomxreference * sin((M\_PI * changesignx) / smperiodx);}
\DoxyCodeLine{00423     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00424       dummy.x = 0;}
\DoxyCodeLine{00425     \textcolor{keywordflow}{if} (smperiody)}
\DoxyCodeLine{00426       dummy.y =}
\DoxyCodeLine{00427           smswingy * randomyreference * sin((M\_PI * changesigny) / smperiody);}
\DoxyCodeLine{00428     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00429       dummy.y = 0;}
\DoxyCodeLine{00430   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00431     \textcolor{keywordflow}{if} (values.randomx\_ctrl\_val)}
\DoxyCodeLine{00432       dummy.x = (values.randomx\_val.first +}
\DoxyCodeLine{00433                  (ranges.randomx\_range) * randomxreference);}
\DoxyCodeLine{00434     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00435       dummy.x = (values.randomx\_val.first +}
\DoxyCodeLine{00436                  (ranges.randomx\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}());}
\DoxyCodeLine{00437     \textcolor{keywordflow}{if} (values.randomy\_ctrl\_val)}
\DoxyCodeLine{00438       dummy.y = (values.randomy\_val.first +}
\DoxyCodeLine{00439                  (ranges.randomy\_range) * randomyreference);}
\DoxyCodeLine{00440     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00441       dummy.y = (values.randomy\_val.first +}
\DoxyCodeLine{00442                  (ranges.randomy\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}());}
\DoxyCodeLine{00443   \}}
\DoxyCodeLine{00444 }
\DoxyCodeLine{00445   \textcolor{keywordflow}{if} (values.rotswingmode\_val == ParticlesFx::SWING\_SMOOTH) \{}
\DoxyCodeLine{00446     \textcolor{keywordflow}{if} (smperioda)}
\DoxyCodeLine{00447       dummy.a = smswinga * sin((M\_PI * changesigna) / smperioda);}
\DoxyCodeLine{00448     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00449       dummy.a = 0;}
\DoxyCodeLine{00450   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00451     dummy.a =}
\DoxyCodeLine{00452         (values.rotsca\_val.first + (ranges.rotsca\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}());}
\DoxyCodeLine{00453 }
\DoxyCodeLine{00454   \textcolor{keywordflow}{if} (!(genlifetime -\/ lifetime)) \{}
\DoxyCodeLine{00455     signx = dummy.x > 0 ? 1 : -\/1;}
\DoxyCodeLine{00456     signy = dummy.y > 0 ? 1 : -\/1;}
\DoxyCodeLine{00457     signa = dummy.a > 0 ? 1 : -\/1;}
\DoxyCodeLine{00458   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00459     dummy.x = (fabs(dummy.x)) * signx;}
\DoxyCodeLine{00460     dummy.y = (fabs(dummy.y)) * signy;}
\DoxyCodeLine{00461     dummy.a = (fabs(dummy.a)) * signa;}
\DoxyCodeLine{00462   \}}
\DoxyCodeLine{00463 }
\DoxyCodeLine{00464   changesignx-\/-\/;}
\DoxyCodeLine{00465   changesigny-\/-\/;}
\DoxyCodeLine{00466   changesigna-\/-\/;}
\DoxyCodeLine{00467   \textcolor{keywordflow}{if} (changesignx <= 0) \{}
\DoxyCodeLine{00468     \textcolor{comment}{//  if(random-\/>getFloat()<0.5);}}
\DoxyCodeLine{00469     signx *= -\/1;}
\DoxyCodeLine{00470     changesignx = abs((\textcolor{keywordtype}{int})(values.swing\_val.first) +}
\DoxyCodeLine{00471                       (\textcolor{keywordtype}{int})(random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.swing\_range)));}
\DoxyCodeLine{00472     \textcolor{keywordflow}{if} (values.swingmode\_val == ParticlesFx::SWING\_SMOOTH) \{}
\DoxyCodeLine{00473       smperiodx = changesignx;}
\DoxyCodeLine{00474       \textcolor{keywordflow}{if} (values.randomx\_ctrl\_val)}
\DoxyCodeLine{00475         smswingx = values.randomx\_val.first +}
\DoxyCodeLine{00476                    randomxreference * (ranges.randomx\_range);}
\DoxyCodeLine{00477       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00478         smswingx = values.randomx\_val.first +}
\DoxyCodeLine{00479                    random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.randomx\_range);}
\DoxyCodeLine{00480     \}}
\DoxyCodeLine{00481   \}}
\DoxyCodeLine{00482   \textcolor{keywordflow}{if} (changesigny <= 0) \{}
\DoxyCodeLine{00483     \textcolor{comment}{//  if(random-\/>getFloat()<0.5);}}
\DoxyCodeLine{00484     signy *= -\/1;}
\DoxyCodeLine{00485     changesigny = abs((\textcolor{keywordtype}{int})(values.swing\_val.first) +}
\DoxyCodeLine{00486                       (\textcolor{keywordtype}{int})(random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.swing\_range)));}
\DoxyCodeLine{00487     \textcolor{keywordflow}{if} (values.swingmode\_val == ParticlesFx::SWING\_SMOOTH) \{}
\DoxyCodeLine{00488       smperiody = changesigny;}
\DoxyCodeLine{00489       \textcolor{keywordflow}{if} (values.randomy\_ctrl\_val)}
\DoxyCodeLine{00490         smswingy = values.randomy\_val.first +}
\DoxyCodeLine{00491                    randomyreference * (ranges.randomy\_range);}
\DoxyCodeLine{00492       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00493         smswingy = values.randomy\_val.first +}
\DoxyCodeLine{00494                    random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.randomy\_range);}
\DoxyCodeLine{00495     \}}
\DoxyCodeLine{00496   \}}
\DoxyCodeLine{00497   \textcolor{keywordflow}{if} (changesigna <= 0) \{}
\DoxyCodeLine{00498     signa *= -\/1;}
\DoxyCodeLine{00499     changesigna = abs((\textcolor{keywordtype}{int})(values.rotswing\_val.first) +}
\DoxyCodeLine{00500                       (\textcolor{keywordtype}{int})(random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.rotswing\_range)));}
\DoxyCodeLine{00501     \textcolor{keywordflow}{if} (values.rotswingmode\_val == ParticlesFx::SWING\_SMOOTH) \{}
\DoxyCodeLine{00502       smperioda = changesigna;}
\DoxyCodeLine{00503       smswinga =}
\DoxyCodeLine{00504           values.rotsca\_val.first + random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.rotsca\_range);}
\DoxyCodeLine{00505     \}}
\DoxyCodeLine{00506   \}}
\DoxyCodeLine{00507 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_particle_af6bf98a3fdd43481cbc31f8f84619e50}\label{class_particle_af6bf98a3fdd43481cbc31f8f84619e50}} 
\index{Particle@{Particle}!angle@{angle}}
\index{angle@{angle}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{angle}{angle}}
{\footnotesize\ttfamily double Particle\+::angle}

\mbox{\Hypertarget{class_particle_a4c04e813bc58d56473a88c8f9a398726}\label{class_particle_a4c04e813bc58d56473a88c8f9a398726}} 
\index{Particle@{Particle}!animswing@{animswing}}
\index{animswing@{animswing}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{animswing}{animswing}}
{\footnotesize\ttfamily bool Particle\+::animswing}

\mbox{\Hypertarget{class_particle_a81f2d110fe212bbab2049b2b39d5443b}\label{class_particle_a81f2d110fe212bbab2049b2b39d5443b}} 
\index{Particle@{Particle}!changesigna@{changesigna}}
\index{changesigna@{changesigna}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{changesigna}{changesigna}}
{\footnotesize\ttfamily int Particle\+::changesigna}

\mbox{\Hypertarget{class_particle_aaa02e9b3323211bd3493531a0fbb8a43}\label{class_particle_aaa02e9b3323211bd3493531a0fbb8a43}} 
\index{Particle@{Particle}!changesignx@{changesignx}}
\index{changesignx@{changesignx}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{changesignx}{changesignx}}
{\footnotesize\ttfamily int Particle\+::changesignx}

\mbox{\Hypertarget{class_particle_a7ece439163031a35f892f0425f14a751}\label{class_particle_a7ece439163031a35f892f0425f14a751}} 
\index{Particle@{Particle}!changesigny@{changesigny}}
\index{changesigny@{changesigny}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{changesigny}{changesigny}}
{\footnotesize\ttfamily int Particle\+::changesigny}

\mbox{\Hypertarget{class_particle_a4c90e7d788973109b39a6d7764e05683}\label{class_particle_a4c90e7d788973109b39a6d7764e05683}} 
\index{Particle@{Particle}!fincol@{fincol}}
\index{fincol@{fincol}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{fincol}{fincol}}
{\footnotesize\ttfamily \mbox{\hyperlink{structcoldata}{coldata}} Particle\+::fincol}

\mbox{\Hypertarget{class_particle_a722b9a34d26dbfa715ee6161e900b8a0}\label{class_particle_a722b9a34d26dbfa715ee6161e900b8a0}} 
\index{Particle@{Particle}!foutcol@{foutcol}}
\index{foutcol@{foutcol}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{foutcol}{foutcol}}
{\footnotesize\ttfamily \mbox{\hyperlink{structcoldata}{coldata}} Particle\+::foutcol}

\mbox{\Hypertarget{class_particle_aa929471a216305bd7f530a632725c1f9}\label{class_particle_aa929471a216305bd7f530a632725c1f9}} 
\index{Particle@{Particle}!frame@{frame}}
\index{frame@{frame}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{frame}{frame}}
{\footnotesize\ttfamily int Particle\+::frame}

\mbox{\Hypertarget{class_particle_a4f605134383db2a2f0ef0014715aa0e3}\label{class_particle_a4f605134383db2a2f0ef0014715aa0e3}} 
\index{Particle@{Particle}!gencol@{gencol}}
\index{gencol@{gencol}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{gencol}{gencol}}
{\footnotesize\ttfamily \mbox{\hyperlink{structcoldata}{coldata}} Particle\+::gencol}

\mbox{\Hypertarget{class_particle_a94fc87233b7ef3ebecf05adbd70beb93}\label{class_particle_a94fc87233b7ef3ebecf05adbd70beb93}} 
\index{Particle@{Particle}!genlifetime@{genlifetime}}
\index{genlifetime@{genlifetime}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{genlifetime}{genlifetime}}
{\footnotesize\ttfamily int Particle\+::genlifetime}

\mbox{\Hypertarget{class_particle_a3893059fc32c2f14a4021b86d9576a03}\label{class_particle_a3893059fc32c2f14a4021b86d9576a03}} 
\index{Particle@{Particle}!level@{level}}
\index{level@{level}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{level}{level}}
{\footnotesize\ttfamily int Particle\+::level}

\mbox{\Hypertarget{class_particle_a61015ac00caa47bc3c72459bd98e0aab}\label{class_particle_a61015ac00caa47bc3c72459bd98e0aab}} 
\index{Particle@{Particle}!lifetime@{lifetime}}
\index{lifetime@{lifetime}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{lifetime}{lifetime}}
{\footnotesize\ttfamily int Particle\+::lifetime}

\mbox{\Hypertarget{class_particle_ae6d46dc24a6666d526f211151fecca5f}\label{class_particle_ae6d46dc24a6666d526f211151fecca5f}} 
\index{Particle@{Particle}!mass@{mass}}
\index{mass@{mass}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{mass}{mass}}
{\footnotesize\ttfamily double Particle\+::mass}

\mbox{\Hypertarget{class_particle_ae325abc07c55c2c559710dbefdb8cb23}\label{class_particle_ae325abc07c55c2c559710dbefdb8cb23}} 
\index{Particle@{Particle}!oldx@{oldx}}
\index{oldx@{oldx}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{oldx}{oldx}}
{\footnotesize\ttfamily double Particle\+::oldx}

\mbox{\Hypertarget{class_particle_a4fa80c02b5d30d208729f2d389279e68}\label{class_particle_a4fa80c02b5d30d208729f2d389279e68}} 
\index{Particle@{Particle}!oldy@{oldy}}
\index{oldy@{oldy}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{oldy}{oldy}}
{\footnotesize\ttfamily double Particle\+::oldy}

\mbox{\Hypertarget{class_particle_aa92e89c0dfc7a610ab54c495b4994175}\label{class_particle_aa92e89c0dfc7a610ab54c495b4994175}} 
\index{Particle@{Particle}!random@{random}}
\index{random@{random}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{random}{random}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_random}{TRandom}} Particle\+::random}

\mbox{\Hypertarget{class_particle_aa08690ad0e29e86f7e5b423abf17559d}\label{class_particle_aa08690ad0e29e86f7e5b423abf17559d}} 
\index{Particle@{Particle}!scale@{scale}}
\index{scale@{scale}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{scale}{scale}}
{\footnotesize\ttfamily double Particle\+::scale}

\mbox{\Hypertarget{class_particle_a530e79063eb32e259a3ac31d4e97ee6f}\label{class_particle_a530e79063eb32e259a3ac31d4e97ee6f}} 
\index{Particle@{Particle}!seed@{seed}}
\index{seed@{seed}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{seed}{seed}}
{\footnotesize\ttfamily int Particle\+::seed}

\mbox{\Hypertarget{class_particle_a6e0bbc810b679d01e5dcfaf3c86dfcfa}\label{class_particle_a6e0bbc810b679d01e5dcfaf3c86dfcfa}} 
\index{Particle@{Particle}!signa@{signa}}
\index{signa@{signa}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{signa}{signa}}
{\footnotesize\ttfamily int Particle\+::signa}

\mbox{\Hypertarget{class_particle_a2ec5f6ceaa972661fba7f2cf9ad0ffcc}\label{class_particle_a2ec5f6ceaa972661fba7f2cf9ad0ffcc}} 
\index{Particle@{Particle}!signx@{signx}}
\index{signx@{signx}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{signx}{signx}}
{\footnotesize\ttfamily int Particle\+::signx}

\mbox{\Hypertarget{class_particle_ad7fcf0671ab06781d2bf507898911fb1}\label{class_particle_ad7fcf0671ab06781d2bf507898911fb1}} 
\index{Particle@{Particle}!signy@{signy}}
\index{signy@{signy}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{signy}{signy}}
{\footnotesize\ttfamily int Particle\+::signy}

\mbox{\Hypertarget{class_particle_a9f76815ffdf8d5c854cf899db37dd9dc}\label{class_particle_a9f76815ffdf8d5c854cf899db37dd9dc}} 
\index{Particle@{Particle}!smperioda@{smperioda}}
\index{smperioda@{smperioda}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{smperioda}{smperioda}}
{\footnotesize\ttfamily int Particle\+::smperioda}

\mbox{\Hypertarget{class_particle_a73af4a87115f6282e51dc49082ce5455}\label{class_particle_a73af4a87115f6282e51dc49082ce5455}} 
\index{Particle@{Particle}!smperiodx@{smperiodx}}
\index{smperiodx@{smperiodx}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{smperiodx}{smperiodx}}
{\footnotesize\ttfamily int Particle\+::smperiodx}

\mbox{\Hypertarget{class_particle_aaa37f0c6d62ca9bc019d5f27c3384e3c}\label{class_particle_aaa37f0c6d62ca9bc019d5f27c3384e3c}} 
\index{Particle@{Particle}!smperiody@{smperiody}}
\index{smperiody@{smperiody}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{smperiody}{smperiody}}
{\footnotesize\ttfamily int Particle\+::smperiody}

\mbox{\Hypertarget{class_particle_a52ef8410720339c3350f8a48037c220e}\label{class_particle_a52ef8410720339c3350f8a48037c220e}} 
\index{Particle@{Particle}!smswinga@{smswinga}}
\index{smswinga@{smswinga}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{smswinga}{smswinga}}
{\footnotesize\ttfamily double Particle\+::smswinga}

\mbox{\Hypertarget{class_particle_a39d933a56b3408ac14a2f4a05e634012}\label{class_particle_a39d933a56b3408ac14a2f4a05e634012}} 
\index{Particle@{Particle}!smswingx@{smswingx}}
\index{smswingx@{smswingx}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{smswingx}{smswingx}}
{\footnotesize\ttfamily double Particle\+::smswingx}

\mbox{\Hypertarget{class_particle_a2fcd7a99f166f1c56aa0a87e8f0e0adf}\label{class_particle_a2fcd7a99f166f1c56aa0a87e8f0e0adf}} 
\index{Particle@{Particle}!smswingy@{smswingy}}
\index{smswingy@{smswingy}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{smswingy}{smswingy}}
{\footnotesize\ttfamily double Particle\+::smswingy}

\mbox{\Hypertarget{class_particle_a2e07f43372859f8f79db761da63f9fe7}\label{class_particle_a2e07f43372859f8f79db761da63f9fe7}} 
\index{Particle@{Particle}!trail@{trail}}
\index{trail@{trail}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{trail}{trail}}
{\footnotesize\ttfamily int Particle\+::trail}

\mbox{\Hypertarget{class_particle_a53bf9654ce8a84bc294528b041027c3a}\label{class_particle_a53bf9654ce8a84bc294528b041027c3a}} 
\index{Particle@{Particle}!vx@{vx}}
\index{vx@{vx}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{vx}{vx}}
{\footnotesize\ttfamily double Particle\+::vx}

\mbox{\Hypertarget{class_particle_af5ec7ca65cc36f119586d446e42c6175}\label{class_particle_af5ec7ca65cc36f119586d446e42c6175}} 
\index{Particle@{Particle}!vy@{vy}}
\index{vy@{vy}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{vy}{vy}}
{\footnotesize\ttfamily double Particle\+::vy}

\mbox{\Hypertarget{class_particle_a1e3e5e103cee69ae9acb9c3269d009d7}\label{class_particle_a1e3e5e103cee69ae9acb9c3269d009d7}} 
\index{Particle@{Particle}!x@{x}}
\index{x@{x}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{x}{x}}
{\footnotesize\ttfamily double Particle\+::x}

\mbox{\Hypertarget{class_particle_a434ab690dde4422ac74ae10f6ace7a52}\label{class_particle_a434ab690dde4422ac74ae10f6ace7a52}} 
\index{Particle@{Particle}!y@{y}}
\index{y@{y}!Particle@{Particle}}
\doxysubsubsection{\texorpdfstring{y}{y}}
{\footnotesize\ttfamily double Particle\+::y}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/particles.\+h\item 
E\+:/opentoonz/toonz/sources/stdfx/particles.\+cpp\end{DoxyCompactItemize}
