\hypertarget{class_toolbar}{}\doxysection{Toolbar Class Reference}
\label{class_toolbar}\index{Toolbar@{Toolbar}}
Inheritance diagram for Toolbar\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_toolbar}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_toolbar_a8204dd416580bad73aa421ff48314d13}{Toolbar}} (QWidget $\ast$parent, bool is\+Vertical=true)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_toolbar_ab48b9c3f041ccb59fc74ddfd86841b13}{on\+Tool\+Changed}} ()
\item 
void \mbox{\hyperlink{class_toolbar_ae873aff4fd396697bbc0d36e20035dea}{on\+Preference\+Changed}} (const QString \&pref\+Name)
\item 
void \mbox{\hyperlink{class_toolbar_a2d3c3ba7b241ba9dab2cae81bc4874fe}{set\+Is\+Expanded}} (bool expand)
\item 
void \mbox{\hyperlink{class_toolbar_ae104c666eda79a8a3d4cdfb81a1406a3}{update\+Toolbar}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_toolbar_a587baaad4f445e3c482a5aeb8f674112}{add\+Action}} (QAction $\ast$act)
\item 
void \mbox{\hyperlink{class_toolbar_ac11c4f9c5ee67454bb3ac469392ad73f}{show\+Event}} (QShow\+Event $\ast$e) override
\item 
void \mbox{\hyperlink{class_toolbar_a10625bcd7cba00302db4b50eba367233}{hide\+Event}} (QHide\+Event $\ast$e) override
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_toolbar_a8204dd416580bad73aa421ff48314d13}\label{class_toolbar_a8204dd416580bad73aa421ff48314d13}} 
\index{Toolbar@{Toolbar}!Toolbar@{Toolbar}}
\index{Toolbar@{Toolbar}!Toolbar@{Toolbar}}
\doxysubsubsection{\texorpdfstring{Toolbar()}{Toolbar()}}
{\footnotesize\ttfamily Toolbar\+::\+Toolbar (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent,  }\item[{bool}]{is\+Vertical = {\ttfamily true} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00062     : QToolBar(parent), m\_isExpanded(ShowAllToolsToggle != 0) \{}
\DoxyCodeLine{00063   \textcolor{comment}{// Fondamentale per lo style sheet}}
\DoxyCodeLine{00064   setObjectName(\textcolor{stringliteral}{"{}toolBar"{}});}
\DoxyCodeLine{00065 }
\DoxyCodeLine{00066   setMovable(\textcolor{keyword}{false});}
\DoxyCodeLine{00067   \textcolor{keywordflow}{if} (isVertical)}
\DoxyCodeLine{00068     setOrientation(Qt::Vertical);}
\DoxyCodeLine{00069   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00070     setOrientation(Qt::Horizontal);}
\DoxyCodeLine{00071 }
\DoxyCodeLine{00072   setIconSize(QSize(20, 20));}
\DoxyCodeLine{00073   setToolButtonStyle(Qt::ToolButtonIconOnly);}
\DoxyCodeLine{00074 }
\DoxyCodeLine{00075   m\_expandButton = \textcolor{keyword}{new} QToolButton(\textcolor{keyword}{this});}
\DoxyCodeLine{00076   m\_expandButton-\/>setObjectName(\textcolor{stringliteral}{"{}expandButton"{}});}
\DoxyCodeLine{00077   m\_expandButton-\/>setCheckable(\textcolor{keyword}{true});}
\DoxyCodeLine{00078   m\_expandButton-\/>setChecked(m\_isExpanded);}
\DoxyCodeLine{00079   m\_expandButton-\/>setArrowType((isVertical) ? Qt::DownArrow : Qt::RightArrow);}
\DoxyCodeLine{00080 }
\DoxyCodeLine{00081   m\_expandAction = addWidget(m\_expandButton);}
\DoxyCodeLine{00082 }
\DoxyCodeLine{00083   connect(m\_expandButton, SIGNAL(toggled(\textcolor{keywordtype}{bool})), \textcolor{keyword}{this},}
\DoxyCodeLine{00084           SLOT(setIsExpanded(\textcolor{keywordtype}{bool})));}
\DoxyCodeLine{00085 }
\DoxyCodeLine{00086   \mbox{\hyperlink{class_toolbar_ae104c666eda79a8a3d4cdfb81a1406a3}{updateToolbar}}();}
\DoxyCodeLine{00087 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toolbar_af8e60d44a166adad046c48798646f035}\label{class_toolbar_af8e60d44a166adad046c48798646f035}} 
\index{Toolbar@{Toolbar}!````~Toolbar@{$\sim$Toolbar}}
\index{````~Toolbar@{$\sim$Toolbar}!Toolbar@{Toolbar}}
\doxysubsubsection{\texorpdfstring{$\sim$Toolbar()}{~Toolbar()}}
{\footnotesize\ttfamily Toolbar\+::$\sim$\+Toolbar (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00226 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_toolbar_a587baaad4f445e3c482a5aeb8f674112}\label{class_toolbar_a587baaad4f445e3c482a5aeb8f674112}} 
\index{Toolbar@{Toolbar}!addAction@{addAction}}
\index{addAction@{addAction}!Toolbar@{Toolbar}}
\doxysubsubsection{\texorpdfstring{addAction()}{addAction()}}
{\footnotesize\ttfamily bool Toolbar\+::add\+Action (\begin{DoxyParamCaption}\item[{QAction $\ast$}]{act }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00230                                     \{}
\DoxyCodeLine{00231   \textcolor{keywordflow}{if} (!act) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00232   QToolBar::addAction(act);}
\DoxyCodeLine{00233   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00234 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toolbar_a10625bcd7cba00302db4b50eba367233}\label{class_toolbar_a10625bcd7cba00302db4b50eba367233}} 
\index{Toolbar@{Toolbar}!hideEvent@{hideEvent}}
\index{hideEvent@{hideEvent}!Toolbar@{Toolbar}}
\doxysubsubsection{\texorpdfstring{hideEvent()}{hideEvent()}}
{\footnotesize\ttfamily void Toolbar\+::hide\+Event (\begin{DoxyParamCaption}\item[{QHide\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00264                                      \{}
\DoxyCodeLine{00265   disconnect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentLevel(), 0, \textcolor{keyword}{this}, 0);}
\DoxyCodeLine{00266   disconnect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentTool(), SIGNAL(toolSwitched()), \textcolor{keyword}{this},}
\DoxyCodeLine{00267              SLOT(onToolChanged()));}
\DoxyCodeLine{00268 }
\DoxyCodeLine{00269   disconnect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentColumn(),}
\DoxyCodeLine{00270              SIGNAL(columnIndexSwitched()), \textcolor{keyword}{this}, SLOT(\mbox{\hyperlink{class_toolbar_ae104c666eda79a8a3d4cdfb81a1406a3}{updateToolbar}}()));}
\DoxyCodeLine{00271 }
\DoxyCodeLine{00272   disconnect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentFrame(), SIGNAL(frameSwitched()), \textcolor{keyword}{this},}
\DoxyCodeLine{00273              SLOT(\mbox{\hyperlink{class_toolbar_ae104c666eda79a8a3d4cdfb81a1406a3}{updateToolbar}}()));}
\DoxyCodeLine{00274   disconnect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentFrame(), SIGNAL(frameTypeChanged()),}
\DoxyCodeLine{00275              \textcolor{keyword}{this}, SLOT(\mbox{\hyperlink{class_toolbar_ae104c666eda79a8a3d4cdfb81a1406a3}{updateToolbar}}()));}
\DoxyCodeLine{00276 }
\DoxyCodeLine{00277   disconnect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentXsheet(), SIGNAL(xsheetChanged()),}
\DoxyCodeLine{00278              \textcolor{keyword}{this}, SLOT(\mbox{\hyperlink{class_toolbar_ae104c666eda79a8a3d4cdfb81a1406a3}{updateToolbar}}()));}
\DoxyCodeLine{00279 }
\DoxyCodeLine{00280   disconnect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentScene(),}
\DoxyCodeLine{00281              SIGNAL(preferenceChanged(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00282              SLOT(onPreferenceChanged(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00283 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toolbar_ae873aff4fd396697bbc0d36e20035dea}\label{class_toolbar_ae873aff4fd396697bbc0d36e20035dea}} 
\index{Toolbar@{Toolbar}!onPreferenceChanged@{onPreferenceChanged}}
\index{onPreferenceChanged@{onPreferenceChanged}!Toolbar@{Toolbar}}
\doxysubsubsection{\texorpdfstring{onPreferenceChanged}{onPreferenceChanged}}
{\footnotesize\ttfamily void Toolbar\+::on\+Preference\+Changed (\begin{DoxyParamCaption}\item[{const QString \&}]{pref\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00298                                                          \{}
\DoxyCodeLine{00299   \textcolor{keywordflow}{if} (prefName == \textcolor{stringliteral}{"{}ToolbarDisplay"{}} || prefName.isEmpty()) \mbox{\hyperlink{class_toolbar_ae104c666eda79a8a3d4cdfb81a1406a3}{updateToolbar}}();}
\DoxyCodeLine{00300 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toolbar_ab48b9c3f041ccb59fc74ddfd86841b13}\label{class_toolbar_ab48b9c3f041ccb59fc74ddfd86841b13}} 
\index{Toolbar@{Toolbar}!onToolChanged@{onToolChanged}}
\index{onToolChanged@{onToolChanged}!Toolbar@{Toolbar}}
\doxysubsubsection{\texorpdfstring{onToolChanged}{onToolChanged}}
{\footnotesize\ttfamily void Toolbar\+::on\+Tool\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00287                             \{}
\DoxyCodeLine{00288   \mbox{\hyperlink{class_tool_handle}{ToolHandle}} *toolHandle = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad70b447aff489792cfc3dbac7150a540}{getCurrentTool}}();}
\DoxyCodeLine{00289   \mbox{\hyperlink{class_t_tool}{TTool}} *tool            = toolHandle-\/>getTool();}
\DoxyCodeLine{00290   std::string toolName   = tool-\/>getName();}
\DoxyCodeLine{00291   QAction *act = CommandManager::instance()-\/>getAction(toolName.c\_str());}
\DoxyCodeLine{00292   \textcolor{keywordflow}{if} (!act || act-\/>isChecked()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00293   act-\/>setChecked(\textcolor{keyword}{true});}
\DoxyCodeLine{00294 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toolbar_a2d3c3ba7b241ba9dab2cae81bc4874fe}\label{class_toolbar_a2d3c3ba7b241ba9dab2cae81bc4874fe}} 
\index{Toolbar@{Toolbar}!setIsExpanded@{setIsExpanded}}
\index{setIsExpanded@{setIsExpanded}!Toolbar@{Toolbar}}
\doxysubsubsection{\texorpdfstring{setIsExpanded}{setIsExpanded}}
{\footnotesize\ttfamily void Toolbar\+::set\+Is\+Expanded (\begin{DoxyParamCaption}\item[{bool}]{expand }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00218                                        \{}
\DoxyCodeLine{00219   m\_isExpanded       = expand;}
\DoxyCodeLine{00220   ShowAllToolsToggle = (expand) ? 1 : 0;}
\DoxyCodeLine{00221   \mbox{\hyperlink{class_toolbar_ae104c666eda79a8a3d4cdfb81a1406a3}{updateToolbar}}();}
\DoxyCodeLine{00222 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toolbar_ac11c4f9c5ee67454bb3ac469392ad73f}\label{class_toolbar_ac11c4f9c5ee67454bb3ac469392ad73f}} 
\index{Toolbar@{Toolbar}!showEvent@{showEvent}}
\index{showEvent@{showEvent}!Toolbar@{Toolbar}}
\doxysubsubsection{\texorpdfstring{showEvent()}{showEvent()}}
{\footnotesize\ttfamily void Toolbar\+::show\+Event (\begin{DoxyParamCaption}\item[{QShow\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00238                                      \{}
\DoxyCodeLine{00239   \mbox{\hyperlink{class_t_column_handle}{TColumnHandle}} *columnHandle = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a1e294e7cff300851d12a8c3d196943f6}{getCurrentColumn}}();}
\DoxyCodeLine{00240   connect(columnHandle, SIGNAL(columnIndexSwitched()), \textcolor{keyword}{this},}
\DoxyCodeLine{00241           SLOT(\mbox{\hyperlink{class_toolbar_ae104c666eda79a8a3d4cdfb81a1406a3}{updateToolbar}}()));}
\DoxyCodeLine{00242 }
\DoxyCodeLine{00243   \mbox{\hyperlink{class_t_frame_handle}{TFrameHandle}} *frameHandle = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}();}
\DoxyCodeLine{00244   connect(frameHandle, SIGNAL(frameSwitched()), \textcolor{keyword}{this}, SLOT(\mbox{\hyperlink{class_toolbar_ae104c666eda79a8a3d4cdfb81a1406a3}{updateToolbar}}()));}
\DoxyCodeLine{00245   connect(frameHandle, SIGNAL(frameTypeChanged()), \textcolor{keyword}{this}, SLOT(\mbox{\hyperlink{class_toolbar_ae104c666eda79a8a3d4cdfb81a1406a3}{updateToolbar}}()));}
\DoxyCodeLine{00246 }
\DoxyCodeLine{00247   \mbox{\hyperlink{class_t_xsheet_handle}{TXsheetHandle}} *xsheetHandle = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}();}
\DoxyCodeLine{00248   connect(xsheetHandle, SIGNAL(xsheetChanged()), \textcolor{keyword}{this}, SLOT(\mbox{\hyperlink{class_toolbar_ae104c666eda79a8a3d4cdfb81a1406a3}{updateToolbar}}()));}
\DoxyCodeLine{00249 }
\DoxyCodeLine{00250   connect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentTool(), SIGNAL(toolSwitched()),}
\DoxyCodeLine{00251           SLOT(onToolChanged()));}
\DoxyCodeLine{00252 }
\DoxyCodeLine{00253   \mbox{\hyperlink{class_t_xsh_level_handle}{TXshLevelHandle}} *levelHandle = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}();}
\DoxyCodeLine{00254   connect(levelHandle, SIGNAL(xshLevelSwitched(\mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *)), \textcolor{keyword}{this},}
\DoxyCodeLine{00255           SLOT(\mbox{\hyperlink{class_toolbar_ae104c666eda79a8a3d4cdfb81a1406a3}{updateToolbar}}()));}
\DoxyCodeLine{00256 }
\DoxyCodeLine{00257   connect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentScene(),}
\DoxyCodeLine{00258           SIGNAL(preferenceChanged(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00259           SLOT(onPreferenceChanged(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00260 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toolbar_ae104c666eda79a8a3d4cdfb81a1406a3}\label{class_toolbar_ae104c666eda79a8a3d4cdfb81a1406a3}} 
\index{Toolbar@{Toolbar}!updateToolbar@{updateToolbar}}
\index{updateToolbar@{updateToolbar}!Toolbar@{Toolbar}}
\doxysubsubsection{\texorpdfstring{updateToolbar}{updateToolbar}}
{\footnotesize\ttfamily void Toolbar\+::update\+Toolbar (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

Layout the tool buttons according to the state of the expand\+Button 
\begin{DoxyCode}{0}
\DoxyCodeLine{00092                             \{}
\DoxyCodeLine{00093   \mbox{\hyperlink{class_t_app}{TApp}} *app                 = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}();}
\DoxyCodeLine{00094   \mbox{\hyperlink{class_t_frame_handle}{TFrameHandle}} *frameHandle = app-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}();}
\DoxyCodeLine{00095 }
\DoxyCodeLine{00096   \textcolor{keywordflow}{if} (frameHandle-\/>isPlaying()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00097 }
\DoxyCodeLine{00098   \mbox{\hyperlink{class_t_xsh_level_handle}{TXshLevelHandle}} *currlevel = app-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}();}
\DoxyCodeLine{00099   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level           = currlevel ? currlevel-\/>getLevel() : 0;}
\DoxyCodeLine{00100   \textcolor{keywordtype}{int} levelType              = level ? level-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() : NO\_XSHLEVEL;}
\DoxyCodeLine{00101 }
\DoxyCodeLine{00102   \mbox{\hyperlink{class_t_column_handle}{TColumnHandle}} *colHandle = app-\/>\mbox{\hyperlink{class_t_app_a1e294e7cff300851d12a8c3d196943f6}{getCurrentColumn}}();}
\DoxyCodeLine{00103   \textcolor{keywordtype}{int} colIndex             = colHandle-\/>getColumnIndex();}
\DoxyCodeLine{00104 }
\DoxyCodeLine{00105   \textcolor{keywordtype}{int} rowIndex = frameHandle-\/>getFrameIndex();}
\DoxyCodeLine{00106 }
\DoxyCodeLine{00107   \textcolor{keywordflow}{if} (Preferences::instance()-\/>isAutoCreateEnabled() \&\&}
\DoxyCodeLine{00108       Preferences::instance()-\/>isAnimationSheetEnabled()) \{}
\DoxyCodeLine{00109     \textcolor{comment}{// If in an empty cell, find most recent level}}
\DoxyCodeLine{00110     \textcolor{keywordflow}{if} (levelType == NO\_XSHLEVEL) \{}
\DoxyCodeLine{00111       \mbox{\hyperlink{class_t_xsheet_handle}{TXsheetHandle}} *xshHandle = app-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}();}
\DoxyCodeLine{00112       \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh             = xshHandle-\/>getXsheet();}
\DoxyCodeLine{00113 }
\DoxyCodeLine{00114       \textcolor{keywordflow}{if} (colIndex >= 0 \&\& !xsh-\/>\mbox{\hyperlink{class_t_xsheet_a83aecebd1b7714017a64e2b786e91a4e}{isColumnEmpty}}(colIndex)) \{}
\DoxyCodeLine{00115         \textcolor{keywordtype}{int} r0, r1;}
\DoxyCodeLine{00116         xsh-\/>\mbox{\hyperlink{class_t_xsheet_a26850469fb0f2886b717479050c32be2}{getCellRange}}(colIndex, r0, r1);}
\DoxyCodeLine{00117         \textcolor{keywordflow}{if} (0 <= r0 \&\& r0 <= r1) \{}
\DoxyCodeLine{00118           \textcolor{comment}{// level type depends on previous occupied cell}}
\DoxyCodeLine{00119           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} r = std::min(r1, rowIndex); r >= r0; r-\/-\/) \{}
\DoxyCodeLine{00120             \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r, colIndex);}
\DoxyCodeLine{00121             \textcolor{keywordflow}{if} (cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00122             levelType = cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}();}
\DoxyCodeLine{00123             rowIndex  = r;}
\DoxyCodeLine{00124             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00125           \}}
\DoxyCodeLine{00126 }
\DoxyCodeLine{00127           \textcolor{keywordflow}{if} (levelType == NO\_XSHLEVEL) \{}
\DoxyCodeLine{00128             \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r0, colIndex);}
\DoxyCodeLine{00129             levelType     = cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}();}
\DoxyCodeLine{00130             rowIndex      = r0;}
\DoxyCodeLine{00131           \}}
\DoxyCodeLine{00132         \}}
\DoxyCodeLine{00133       \}}
\DoxyCodeLine{00134     \}}
\DoxyCodeLine{00135   \}}
\DoxyCodeLine{00136 }
\DoxyCodeLine{00137   m\_toolbarLevel = levelType;}
\DoxyCodeLine{00138 }
\DoxyCodeLine{00139   \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4}{TTool::ToolTargetType}} targetType = TTool::NoTarget;}
\DoxyCodeLine{00140 }
\DoxyCodeLine{00141   \textcolor{keywordflow}{switch} (m\_toolbarLevel) \{}
\DoxyCodeLine{00142   \textcolor{keywordflow}{case} OVL\_XSHLEVEL:}
\DoxyCodeLine{00143     targetType = \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a89c2e7968afae376f0be7abeff061859}{TTool::RasterImage}};}
\DoxyCodeLine{00144     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00145   \textcolor{keywordflow}{case} TZP\_XSHLEVEL:}
\DoxyCodeLine{00146     targetType = \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{TTool::ToonzImage}};}
\DoxyCodeLine{00147     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00148   \textcolor{keywordflow}{case} PLI\_XSHLEVEL:}
\DoxyCodeLine{00149   \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00150     targetType = \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a6528d353c20fcbe8932de09845117046}{TTool::VectorImage}};}
\DoxyCodeLine{00151     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00152   \textcolor{keywordflow}{case} MESH\_XSHLEVEL:}
\DoxyCodeLine{00153     targetType = \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c7eda2f062c0790a4ac7dc4acfc7232}{TTool::MeshImage}};}
\DoxyCodeLine{00154     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00155   \}}
\DoxyCodeLine{00156 }
\DoxyCodeLine{00157   \textcolor{comment}{// Hide action for now}}
\DoxyCodeLine{00158   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} idx = 0; buttonLayout[idx].toolName; idx++) \{}
\DoxyCodeLine{00159     \textcolor{keywordflow}{if} (buttonLayout[idx].action) removeAction(buttonLayout[idx].action);}
\DoxyCodeLine{00160   \}}
\DoxyCodeLine{00161 }
\DoxyCodeLine{00162   removeAction(m\_expandAction);}
\DoxyCodeLine{00163 }
\DoxyCodeLine{00164   \textcolor{keywordtype}{int} levelBasedDisplay = Preferences::instance()-\/>getLevelBasedToolsDisplay();}
\DoxyCodeLine{00165 }
\DoxyCodeLine{00166   \textcolor{keywordtype}{bool} actionEnabled     = \textcolor{keyword}{false};}
\DoxyCodeLine{00167   \mbox{\hyperlink{class_tool_handle}{ToolHandle}} *toolHandle = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad70b447aff489792cfc3dbac7150a540}{getCurrentTool}}();}
\DoxyCodeLine{00168 }
\DoxyCodeLine{00169   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} idx = 0; buttonLayout[idx].toolName; idx++) \{}
\DoxyCodeLine{00170     \mbox{\hyperlink{class_t_tool}{TTool}} *tool = TTool::getTool(buttonLayout[idx].toolName, targetType);}
\DoxyCodeLine{00171     \textcolor{keywordflow}{if} (tool) tool-\/>\mbox{\hyperlink{class_t_tool_a3638517d39dffe6abec0a4e1bcf990d3}{updateEnabled}}(rowIndex, colIndex);}
\DoxyCodeLine{00172     \textcolor{keywordtype}{bool} isSeparator = !strncmp(buttonLayout[idx].toolName, \textcolor{stringliteral}{"{}Separator"{}}, 9);}
\DoxyCodeLine{00173     \textcolor{keywordtype}{bool} enable =}
\DoxyCodeLine{00174         !levelBasedDisplay ? true : (!tool ? actionEnabled : tool-\/>isEnabled());}
\DoxyCodeLine{00175 }
\DoxyCodeLine{00176     \textcolor{comment}{// Plastic tool should always be available so you can create a mesh}}
\DoxyCodeLine{00177     \textcolor{keywordflow}{if} (!enable \&\& !strncmp(buttonLayout[idx].toolName, T\_Plastic, 9) \&\&}
\DoxyCodeLine{00178         (m\_toolbarLevel \& LEVELCOLUMN\_XSHLEVEL))}
\DoxyCodeLine{00179       enable = \textcolor{keyword}{true};}
\DoxyCodeLine{00180 }
\DoxyCodeLine{00181     \textcolor{keywordflow}{if} (!m\_isExpanded \&\& buttonLayout[idx].collapsible) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00182 }
\DoxyCodeLine{00183     \textcolor{keywordflow}{if} (!buttonLayout[idx].action) \{}
\DoxyCodeLine{00184       \textcolor{keywordflow}{if} (isSeparator)}
\DoxyCodeLine{00185         buttonLayout[idx].action = addSeparator();}
\DoxyCodeLine{00186       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00187         buttonLayout[idx].action =}
\DoxyCodeLine{00188             CommandManager::instance()-\/>getAction(buttonLayout[idx].toolName);}
\DoxyCodeLine{00189     \}}
\DoxyCodeLine{00190 }
\DoxyCodeLine{00191     \textcolor{keywordflow}{if} (levelBasedDisplay != 2)}
\DoxyCodeLine{00192       buttonLayout[idx].action-\/>setEnabled(enable);}
\DoxyCodeLine{00193     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!enable)}
\DoxyCodeLine{00194       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00195 }
\DoxyCodeLine{00196     actionEnabled = addAction(buttonLayout[idx].action) || actionEnabled;}
\DoxyCodeLine{00197 }
\DoxyCodeLine{00198     \textcolor{keywordflow}{if} (isSeparator) actionEnabled = \textcolor{keyword}{false};}
\DoxyCodeLine{00199   \}}
\DoxyCodeLine{00200 }
\DoxyCodeLine{00201   addAction(m\_expandAction);}
\DoxyCodeLine{00202 }
\DoxyCodeLine{00203   \textcolor{keywordflow}{if} (m\_isExpanded) \{}
\DoxyCodeLine{00204     m\_expandButton-\/>setArrowType(}
\DoxyCodeLine{00205         (orientation() == Qt::Vertical) ? Qt::UpArrow : Qt::LeftArrow);}
\DoxyCodeLine{00206     m\_expandButton-\/>setToolTip(tr(\textcolor{stringliteral}{"{}Collapse toolbar"{}}));}
\DoxyCodeLine{00207   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00208     m\_expandButton-\/>setArrowType(}
\DoxyCodeLine{00209         (orientation() == Qt::Vertical) ? Qt::DownArrow : Qt::RightArrow);}
\DoxyCodeLine{00210     m\_expandButton-\/>setToolTip(tr(\textcolor{stringliteral}{"{}Expand toolbar"{}}));}
\DoxyCodeLine{00211   \}}
\DoxyCodeLine{00212 }
\DoxyCodeLine{00213   update();}
\DoxyCodeLine{00214 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00233}{TXsheet\+::get\+Cell()}}, \mbox{\hyperlink{l00462}{TXsheet\+::get\+Cell\+Range()}}, \mbox{\hyperlink{l00118}{TApp\+::get\+Current\+Column()}}, \mbox{\hyperlink{l00114}{TApp\+::get\+Current\+Frame()}}, \mbox{\hyperlink{l00122}{TApp\+::get\+Current\+Level()}}, \mbox{\hyperlink{l00126}{TApp\+::get\+Current\+Tool()}}, \mbox{\hyperlink{l00110}{TApp\+::get\+Current\+Xsheet()}}, \mbox{\hyperlink{l00081}{TXsh\+Level\+::get\+Type()}}, \mbox{\hyperlink{l00215}{TApp\+::instance()}}, \mbox{\hyperlink{l00482}{TXsheet\+::is\+Column\+Empty()}}, \mbox{\hyperlink{l00078}{TXsh\+Cell\+::is\+Empty()}}, \mbox{\hyperlink{l00281}{TTool\+::\+Mesh\+Image}}, \mbox{\hyperlink{l00280}{TTool\+::\+Raster\+Image}}, \mbox{\hyperlink{l00279}{TTool\+::\+Toonz\+Image}}, \mbox{\hyperlink{l00828}{TTool\+::update\+Enabled()}}, and \mbox{\hyperlink{l00278}{TTool\+::\+Vector\+Image}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/toolbar.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/toolbar.\+cpp\end{DoxyCompactItemize}
