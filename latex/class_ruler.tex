\hypertarget{class_ruler}{}\doxysection{Ruler Class Reference}
\label{class_ruler}\index{Ruler@{Ruler}}


{\ttfamily \#include $<$ruler.\+h$>$}

Inheritance diagram for Ruler\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_ruler}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_ruler_a84fbb315e3ddc8f46cb983264a3d3266}{Ruler}} (QWidget $\ast$parent, \mbox{\hyperlink{class_scene_viewer}{Scene\+Viewer}} $\ast$viewer, bool vertical)
\item 
Guides \& \mbox{\hyperlink{class_ruler_aafaac93a7c6a2c0b727381501530c7d0}{get\+Guides}} () const
\item 
int \mbox{\hyperlink{class_ruler_a4770d7a4243ac52990bd63ec308c5602}{get\+Guide\+Count}} () const
\item 
double \mbox{\hyperlink{class_ruler_a38083690961c3361476941b03da77d8a}{get\+Guide}} (int index) const
\item 
double \mbox{\hyperlink{class_ruler_a1663e473fd044202b326806d5051eb45}{get\+Unit}} () const
\item 
void \mbox{\hyperlink{class_ruler_a69d23a3d5ea2026554f052af6be36cee}{get\+Indices}} (double origin, double iunit, int size, int \&i0, int \&i1, int \&ic) const
\item 
double \mbox{\hyperlink{class_ruler_add8b3740abd6a3cbb79d5b225ef83e21}{get\+Zoom\+Scale}} () const
\item 
double \mbox{\hyperlink{class_ruler_ac7b24acdc4e9e0555d8ba8fc4294fbad}{get\+Pan}} () const
\item 
void \mbox{\hyperlink{class_ruler_afc155a99f3304ec88c58a3e546ba1f30}{draw\+Vertical}} (QPainter \&)
\item 
void \mbox{\hyperlink{class_ruler_aa54853f1c9777143d80c357ba72bb775}{draw\+Horizontal}} (QPainter \&)
\item 
void \mbox{\hyperlink{class_ruler_a38f7295e7e26e1d373d6fa8daf081ae8}{paint\+Event}} (QPaint\+Event $\ast$) override
\item 
double \mbox{\hyperlink{class_ruler_a25929db0096652642e3dc3d738cf769f}{pos\+To\+Value}} (const QPoint \&p) const
\item 
void \mbox{\hyperlink{class_ruler_ab149bb8f330fc5af9e09be12f5b743d0}{mouse\+Press\+Event}} (QMouse\+Event $\ast$e) override
\item 
void \mbox{\hyperlink{class_ruler_a61c89219cad7340f64d44c4850201766}{mouse\+Move\+Event}} (QMouse\+Event $\ast$e) override
\item 
void \mbox{\hyperlink{class_ruler_af2cfd10ee4c1da473d9e7f757c0d5608}{mouse\+Release\+Event}} (QMouse\+Event $\ast$e) override
\item 
void \mbox{\hyperlink{class_ruler_a2c6923d9cd1ad74d13c5a87cef1fca20}{context\+Menu\+Event}} (QContext\+Menu\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_ruler_ab0b141923bc65ba2fe42159f97291715}{set\+Transform}} (double unit, double pan, double v\+Origin=0)
\item 
void \mbox{\hyperlink{class_ruler_acb7efa152c029f34780aea291e5e7498}{set\+Range}} (int x0, int x1)
\item 
void \mbox{\hyperlink{class_ruler_af59772d14a806264c2c76d817fd02fad}{set\+Min\+Label\+Distance}} (int distance)
\item 
void \mbox{\hyperlink{class_ruler_a72bdd3f87f88342f266be162fdd075b9}{set\+Min\+Distance}} (int distance)
\item 
void \mbox{\hyperlink{class_ruler_a064ee24d0059cce691034e5bd2603eec}{set\+Min\+Step}} (double step)
\item 
void \mbox{\hyperlink{class_ruler_af85e761f368e87141715ad3da2992b95}{compute}} ()
\item 
int \mbox{\hyperlink{class_ruler_ab4663f088ca7e6108c3faf7c72e30ac1}{get\+Tick\+Count}} () const
\item 
double \mbox{\hyperlink{class_ruler_affd326dd6e173de611cff343c0205486}{get\+Tick}} (int index) const
\item 
bool \mbox{\hyperlink{class_ruler_aa2b2702c6567cac30cb09f385c82e422}{is\+Label}} (int index) const
\end{DoxyCompactItemize}
\doxysubsection*{Properties}
\begin{DoxyCompactItemize}
\item 
QColor \mbox{\hyperlink{class_ruler_a02dc34469c79889a8abe32aaf4f5ab16}{Parent\+BGColor}}
\item 
QColor \mbox{\hyperlink{class_ruler_ab9d2b1eaef5c4acf469c54e26385c01f}{Scale\+Color}}
\item 
QColor \mbox{\hyperlink{class_ruler_aac0aa89c995437e15e9d7df2ab142726}{Border\+Color}}
\item 
QColor \mbox{\hyperlink{class_ruler_a6ddadbccd2de995bd7ab724e242e5b26}{Handle\+Color}}
\item 
QColor \mbox{\hyperlink{class_ruler_aa4d5056315596137ce96c501f19b3842}{Handle\+Drag\+Color}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
La classe si occupa della visualizzazione e della gestione di una linea guida (puo\textquotesingle{} essere orizzontale o verticale) 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_ruler_a84fbb315e3ddc8f46cb983264a3d3266}\label{class_ruler_a84fbb315e3ddc8f46cb983264a3d3266}} 
\index{Ruler@{Ruler}!Ruler@{Ruler}}
\index{Ruler@{Ruler}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{Ruler()}{Ruler()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily Ruler\+::\+Ruler (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent,  }\item[{\mbox{\hyperlink{class_scene_viewer}{Scene\+Viewer}} $\ast$}]{viewer,  }\item[{bool}]{vertical }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00021     : QWidget(parent)}
\DoxyCodeLine{00022     , m\_viewer(viewer)}
\DoxyCodeLine{00023     , m\_vertical(vertical)}
\DoxyCodeLine{00024     , m\_moving(\textcolor{keyword}{false})}
\DoxyCodeLine{00025     , m\_hiding(\textcolor{keyword}{false}) \{}
\DoxyCodeLine{00026   \textcolor{keywordflow}{if} (vertical) \{}
\DoxyCodeLine{00027     setSizePolicy(QSizePolicy::Fixed, QSizePolicy::Expanding);}
\DoxyCodeLine{00028     setFixedWidth(12);}
\DoxyCodeLine{00029     setToolTip(tr(\textcolor{stringliteral}{"{}Click to create an horizontal guide"{}}));}
\DoxyCodeLine{00030   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00031     setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Fixed);}
\DoxyCodeLine{00032     setFixedHeight(12);}
\DoxyCodeLine{00033     setToolTip(tr(\textcolor{stringliteral}{"{}Click to create a vertical guide"{}}));}
\DoxyCodeLine{00034   \}}
\DoxyCodeLine{00035   setMouseTracking(\textcolor{keyword}{true});}
\DoxyCodeLine{00036 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_a758f797ec166b06b7987f71d09c2a311}\label{class_ruler_a758f797ec166b06b7987f71d09c2a311}} 
\index{Ruler@{Ruler}!Ruler@{Ruler}}
\index{Ruler@{Ruler}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{Ruler()}{Ruler()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily Ruler\+::\+Ruler (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00134     : m\_minValue(0)}
\DoxyCodeLine{00135     , m\_step(1)}
\DoxyCodeLine{00136     , m\_labelPeriod(2)}
\DoxyCodeLine{00137     , m\_labelOffset(0)}
\DoxyCodeLine{00138     , m\_tickCount(0)}
\DoxyCodeLine{00139     , m\_unit(1)}
\DoxyCodeLine{00140     , m\_pan(0)}
\DoxyCodeLine{00141     , m\_x0(0)}
\DoxyCodeLine{00142     , m\_x1(100)}
\DoxyCodeLine{00143     , m\_minLabelDistance(20)}
\DoxyCodeLine{00144     , m\_minDistance(5)}
\DoxyCodeLine{00145     , m\_minStep(0) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_ruler_af85e761f368e87141715ad3da2992b95}\label{class_ruler_af85e761f368e87141715ad3da2992b95}} 
\index{Ruler@{Ruler}!compute@{compute}}
\index{compute@{compute}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{compute()}{compute()}}
{\footnotesize\ttfamily void Ruler\+::compute (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00149                     \{}
\DoxyCodeLine{00150   assert(m\_x0 < m\_x1);}
\DoxyCodeLine{00151   assert(m\_unit != 0.0);}
\DoxyCodeLine{00152   assert(m\_minLabelDistance > 0);}
\DoxyCodeLine{00153   assert(m\_minDistance >= 0);}
\DoxyCodeLine{00154   \textcolor{comment}{// compute m\_step (world distance between two adjacent ticks)}}
\DoxyCodeLine{00155   \textcolor{comment}{// and m\_labelPeriod (number of ticks between two adjacent labels)}}
\DoxyCodeLine{00156 }
\DoxyCodeLine{00157   \textcolor{comment}{// the distance (world units) between two labels must be >=}}
\DoxyCodeLine{00158   \textcolor{comment}{// minLabelWorldDistance}}
\DoxyCodeLine{00159   \textcolor{keyword}{const} \textcolor{keywordtype}{double} absUnit               = std::abs(m\_unit);}
\DoxyCodeLine{00160   \textcolor{keyword}{const} \textcolor{keywordtype}{double} minLabelWorldDistance = m\_minLabelDistance / absUnit;}
\DoxyCodeLine{00161   \textcolor{keyword}{const} \textcolor{keywordtype}{double} minWorldDistance      = m\_minDistance / absUnit;}
\DoxyCodeLine{00162 }
\DoxyCodeLine{00163   \textcolor{comment}{// we want the minimum step with:}}
\DoxyCodeLine{00164   \textcolor{comment}{//    step*labelPeriod (i.e. label distance) >=  minLabelWorldDistance}}
\DoxyCodeLine{00165   \textcolor{comment}{//    step (i.e. tick distance) >= minWorldDistance}}
\DoxyCodeLine{00166   \textcolor{comment}{// Note: labelPeriod alternates between 5 and 2 => labelPeriod' =}}
\DoxyCodeLine{00167   \textcolor{comment}{// 7-\/labelPeriod}}
\DoxyCodeLine{00168   m\_step        = 1;}
\DoxyCodeLine{00169   m\_labelPeriod = 5;}
\DoxyCodeLine{00170   \textcolor{keywordflow}{if} (m\_step * m\_labelPeriod >= minLabelWorldDistance \&\&}
\DoxyCodeLine{00171       m\_step >= minWorldDistance) \{}
\DoxyCodeLine{00172     \textcolor{keywordflow}{while} (m\_step >= minLabelWorldDistance \&\&}
\DoxyCodeLine{00173            m\_step / (7 -\/ m\_labelPeriod) >= minWorldDistance) \{}
\DoxyCodeLine{00174       m\_labelPeriod = 7 -\/ m\_labelPeriod;}
\DoxyCodeLine{00175       m\_step /= m\_labelPeriod;}
\DoxyCodeLine{00176     \}}
\DoxyCodeLine{00177   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00178     \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{00179       m\_step *= m\_labelPeriod;}
\DoxyCodeLine{00180       m\_labelPeriod =}
\DoxyCodeLine{00181           7 -\/ m\_labelPeriod;  \textcolor{comment}{// m\_labelPeriod alternates between 5 and 2}}
\DoxyCodeLine{00182     \} \textcolor{keywordflow}{while} (m\_step * m\_labelPeriod < minLabelWorldDistance ||}
\DoxyCodeLine{00183              m\_step < minWorldDistance);}
\DoxyCodeLine{00184   \}}
\DoxyCodeLine{00185 }
\DoxyCodeLine{00186   \textcolor{keywordflow}{if} (m\_step >= minLabelWorldDistance) \{}
\DoxyCodeLine{00187     m\_labelPeriod = 1;}
\DoxyCodeLine{00188   \}}
\DoxyCodeLine{00189 }
\DoxyCodeLine{00190   \textcolor{keywordflow}{if} (m\_step * m\_labelPeriod < m\_minStep) \{}
\DoxyCodeLine{00191     m\_step        = m\_minStep;}
\DoxyCodeLine{00192     m\_labelPeriod = 1;}
\DoxyCodeLine{00193   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_step < m\_minStep) \{}
\DoxyCodeLine{00194     m\_step *= m\_labelPeriod;}
\DoxyCodeLine{00195     m\_labelPeriod = 1;}
\DoxyCodeLine{00196   \}}
\DoxyCodeLine{00197 }
\DoxyCodeLine{00198   \textcolor{comment}{// compute range}}
\DoxyCodeLine{00199   \textcolor{keywordtype}{double} v0 = (m\_x0 -\/ m\_pan) / m\_unit;  \textcolor{comment}{// left margin (world units)}}
\DoxyCodeLine{00200   \textcolor{keywordtype}{double} v1 = (m\_x1 -\/ m\_pan) / m\_unit;  \textcolor{comment}{// right margin (world units)}}
\DoxyCodeLine{00201   \textcolor{keywordflow}{if} (m\_unit < 0) std::swap(v0, v1);}
\DoxyCodeLine{00202   \textcolor{keywordtype}{int} i0 =}
\DoxyCodeLine{00203       tfloor((v0 -\/ m\_vOrigin) / m\_step);  \textcolor{comment}{// largest tick <=v0 is i0 * m\_step}}
\DoxyCodeLine{00204   \textcolor{keywordtype}{int} i1 =}
\DoxyCodeLine{00205       tceil((v1 -\/ m\_vOrigin) / m\_step);  \textcolor{comment}{// smallest tick >=v1 is i1 * m\_step}}
\DoxyCodeLine{00206   m\_minValue  = i0 * m\_step + m\_vOrigin;}
\DoxyCodeLine{00207   m\_tickCount = i1 -\/ i0 + 1;}
\DoxyCodeLine{00208 }
\DoxyCodeLine{00209   m\_labelOffset = i0 >= 0 ? (i0 \% m\_labelPeriod)}
\DoxyCodeLine{00210                           : (m\_labelPeriod -\/ ((-\/i0) \% m\_labelPeriod));}
\DoxyCodeLine{00211 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_a2c6923d9cd1ad74d13c5a87cef1fca20}\label{class_ruler_a2c6923d9cd1ad74d13c5a87cef1fca20}} 
\index{Ruler@{Ruler}!contextMenuEvent@{contextMenuEvent}}
\index{contextMenuEvent@{contextMenuEvent}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{contextMenuEvent()}{contextMenuEvent()}}
{\footnotesize\ttfamily void Ruler\+::context\+Menu\+Event (\begin{DoxyParamCaption}\item[{QContext\+Menu\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00341                                                      \{}
\DoxyCodeLine{00342   \textcolor{comment}{// do nothing. just accept event to prevent context menu to open}}
\DoxyCodeLine{00343   \textcolor{keyword}{event}-\/>accept();}
\DoxyCodeLine{00344 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_aa54853f1c9777143d80c357ba72bb775}\label{class_ruler_aa54853f1c9777143d80c357ba72bb775}} 
\index{Ruler@{Ruler}!drawHorizontal@{drawHorizontal}}
\index{drawHorizontal@{drawHorizontal}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{drawHorizontal()}{drawHorizontal()}}
{\footnotesize\ttfamily void Ruler\+::draw\+Horizontal (\begin{DoxyParamCaption}\item[{QPainter \&}]{p }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00173                                       \{}
\DoxyCodeLine{00174   \textcolor{keywordtype}{int} w          = width();}
\DoxyCodeLine{00175   \textcolor{keywordtype}{int} h          = height();}
\DoxyCodeLine{00176   Guides \&guides = getGuides();}
\DoxyCodeLine{00177   \textcolor{keywordtype}{int} y0         = 0;}
\DoxyCodeLine{00178   \textcolor{keywordtype}{int} y1         = h -\/ 1;}
\DoxyCodeLine{00179   p.setPen(Qt::DotLine);}
\DoxyCodeLine{00180   p.setPen(getBorderColor());}
\DoxyCodeLine{00181   p.drawLine(0, y1, w -\/ 1, y1);}
\DoxyCodeLine{00182 }
\DoxyCodeLine{00183   \textcolor{keywordtype}{double} origin = getPan() + 0.5 * w;}
\DoxyCodeLine{00184   \textcolor{keywordtype}{double} unit   = getUnit();}
\DoxyCodeLine{00185   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00186 }
\DoxyCodeLine{00187   QColor color = m\_scaleColor;}
\DoxyCodeLine{00188 }
\DoxyCodeLine{00189   \textcolor{keywordtype}{int} count = guides.size();}
\DoxyCodeLine{00190   \textcolor{keywordflow}{if} (m\_hiding) count-\/-\/;}
\DoxyCodeLine{00191   \textcolor{keywordtype}{double} zoom = getZoomScale();}
\DoxyCodeLine{00192   \textcolor{keywordflow}{for} (i = 0; i < count; i++) \{}
\DoxyCodeLine{00193     QColor color = (m\_moving \&\& count -\/ 1 == i ? QColor(getHandleDragColor())}
\DoxyCodeLine{00194                                                : QColor(getHandleColor()));}
\DoxyCodeLine{00195     \textcolor{keywordtype}{double} v     = guides[i] / (double)getDevPixRatio();}
\DoxyCodeLine{00196     \textcolor{keywordtype}{int} x        = (int)(origin + zoom * v);}
\DoxyCodeLine{00197     p.fillRect(QRect(x -\/ 1, y0, 2, y1 -\/ y0), QBrush(color));}
\DoxyCodeLine{00198   \}}
\DoxyCodeLine{00199 }
\DoxyCodeLine{00200   \textcolor{keywordtype}{int} i0, i1, ic;}
\DoxyCodeLine{00201   getIndices(origin, 1 / unit, w, i0, i1, ic);}
\DoxyCodeLine{00202   \textcolor{keywordflow}{for} (i = i0; i <= i1; i++) \{}
\DoxyCodeLine{00203     \textcolor{keywordtype}{int} x  = tfloor(origin + unit * (i -\/ ic));}
\DoxyCodeLine{00204     \textcolor{keywordtype}{int} yb = y1 -\/ 1, ya;}
\DoxyCodeLine{00205     \textcolor{keywordflow}{if} (i == ic) \{}
\DoxyCodeLine{00206       p.setPen(m\_scaleColor);}
\DoxyCodeLine{00207       ya = 1;}
\DoxyCodeLine{00208     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00209       p.setPen(color);}
\DoxyCodeLine{00210       \textcolor{keywordtype}{int} h = i \% 10;}
\DoxyCodeLine{00211       \textcolor{keywordflow}{if} (h == 0)}
\DoxyCodeLine{00212         ya = yb -\/ 5;}
\DoxyCodeLine{00213       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (h == 5)}
\DoxyCodeLine{00214         ya = yb -\/ 3;}
\DoxyCodeLine{00215       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00216         ya = yb -\/ 2;}
\DoxyCodeLine{00217     \}}
\DoxyCodeLine{00218     p.drawLine(x, ya, x, yb);}
\DoxyCodeLine{00219   \}}
\DoxyCodeLine{00220 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_afc155a99f3304ec88c58a3e546ba1f30}\label{class_ruler_afc155a99f3304ec88c58a3e546ba1f30}} 
\index{Ruler@{Ruler}!drawVertical@{drawVertical}}
\index{drawVertical@{drawVertical}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{drawVertical()}{drawVertical()}}
{\footnotesize\ttfamily void Ruler\+::draw\+Vertical (\begin{DoxyParamCaption}\item[{QPainter \&}]{p }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00118                                     \{}
\DoxyCodeLine{00119   \textcolor{keywordtype}{int} w = width();}
\DoxyCodeLine{00120   \textcolor{keywordtype}{int} h = height();}
\DoxyCodeLine{00121 }
\DoxyCodeLine{00122   Guides \&guides = getGuides();}
\DoxyCodeLine{00123 }
\DoxyCodeLine{00124   \textcolor{keywordtype}{int} x0 = 0, x1 = w -\/ 1;}
\DoxyCodeLine{00125   p.setPen(Qt::DotLine);}
\DoxyCodeLine{00126   p.setPen(getBorderColor());}
\DoxyCodeLine{00127   p.drawLine(x1, 0, x1, h -\/ 1);}
\DoxyCodeLine{00128 }
\DoxyCodeLine{00129   \textcolor{keywordtype}{double} origin = -\/getPan() + 0.5 * h;}
\DoxyCodeLine{00130   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00131   \textcolor{keywordtype}{int} count = guides.size();}
\DoxyCodeLine{00132   \textcolor{keywordflow}{if} (m\_hiding) count-\/-\/;}
\DoxyCodeLine{00133   \textcolor{keywordtype}{double} zoom = getZoomScale();}
\DoxyCodeLine{00134   \textcolor{keywordflow}{if} (m\_viewer-\/>getIsFlippedX() != m\_viewer-\/>getIsFlippedY()) \{}
\DoxyCodeLine{00135     zoom = -\/zoom;}
\DoxyCodeLine{00136   \}}
\DoxyCodeLine{00137   \textcolor{keywordflow}{for} (i = 0; i < count; i++) \{}
\DoxyCodeLine{00138     QColor color = (m\_moving \&\& count -\/ 1 == i ? QColor(getHandleDragColor())}
\DoxyCodeLine{00139                                                : QColor(getHandleColor()));}
\DoxyCodeLine{00140     \textcolor{keywordtype}{double} v     = guides[i] / (double)getDevPixRatio();}
\DoxyCodeLine{00141     \textcolor{keywordtype}{int} y        = (int)(origin -\/ zoom * v);}
\DoxyCodeLine{00142     p.fillRect(QRect(x0, y -\/ 1, x1 -\/ x0, 2), QBrush(color));}
\DoxyCodeLine{00143   \}}
\DoxyCodeLine{00144 }
\DoxyCodeLine{00145   \textcolor{keywordtype}{double} unit = getUnit() / UnitParameters::getFieldGuideAspectRatio();}
\DoxyCodeLine{00146 }
\DoxyCodeLine{00147   QColor color = m\_scaleColor;}
\DoxyCodeLine{00148 }
\DoxyCodeLine{00149   \textcolor{keywordtype}{int} i0, i1, ic;}
\DoxyCodeLine{00150   getIndices(origin, 1 / unit, h, i0, i1, ic);}
\DoxyCodeLine{00151   \textcolor{keywordflow}{for} (i = i0; i <= i1; i++) \{}
\DoxyCodeLine{00152     \textcolor{keywordtype}{int} y  = tround(origin + unit * (i -\/ ic));}
\DoxyCodeLine{00153     \textcolor{keywordtype}{int} xb = x1 -\/ 1, xa;}
\DoxyCodeLine{00154     \textcolor{keywordflow}{if} (i == ic) \{}
\DoxyCodeLine{00155       p.setPen(m\_scaleColor);}
\DoxyCodeLine{00156       xa = 1;}
\DoxyCodeLine{00157     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00158       p.setPen(color);}
\DoxyCodeLine{00159       \textcolor{keywordtype}{int} h = i \% 10;}
\DoxyCodeLine{00160       \textcolor{keywordflow}{if} (h == 0)}
\DoxyCodeLine{00161         xa = xb -\/ 5;}
\DoxyCodeLine{00162       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (h == 5)}
\DoxyCodeLine{00163         xa = xb -\/ 3;}
\DoxyCodeLine{00164       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00165         xa = xb -\/ 2;}
\DoxyCodeLine{00166     \}}
\DoxyCodeLine{00167     p.drawLine(xa, y, xb, y);}
\DoxyCodeLine{00168   \}}
\DoxyCodeLine{00169 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_a38083690961c3361476941b03da77d8a}\label{class_ruler_a38083690961c3361476941b03da77d8a}} 
\index{Ruler@{Ruler}!getGuide@{getGuide}}
\index{getGuide@{getGuide}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{getGuide()}{getGuide()}}
{\footnotesize\ttfamily double Ruler\+::get\+Guide (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00052                                       \{}
\DoxyCodeLine{00053   Guides \&guides = getGuides();}
\DoxyCodeLine{00054   assert(0 <= index \&\& index < (\textcolor{keywordtype}{int})guides.size());}
\DoxyCodeLine{00055   \textcolor{keywordflow}{return} guides[index];}
\DoxyCodeLine{00056 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_a4770d7a4243ac52990bd63ec308c5602}\label{class_ruler_a4770d7a4243ac52990bd63ec308c5602}} 
\index{Ruler@{Ruler}!getGuideCount@{getGuideCount}}
\index{getGuideCount@{getGuideCount}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{getGuideCount()}{getGuideCount()}}
{\footnotesize\ttfamily int Ruler\+::get\+Guide\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00048 \{ \textcolor{keywordflow}{return} getGuides().size(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_aafaac93a7c6a2c0b727381501530c7d0}\label{class_ruler_aafaac93a7c6a2c0b727381501530c7d0}} 
\index{Ruler@{Ruler}!getGuides@{getGuides}}
\index{getGuides@{getGuides}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{getGuides()}{getGuides()}}
{\footnotesize\ttfamily Ruler\+::\+Guides \& Ruler\+::get\+Guides (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00040                                     \{}
\DoxyCodeLine{00041   \mbox{\hyperlink{class_t_scene_properties}{TSceneProperties}} *sprop =}
\DoxyCodeLine{00042       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}();}
\DoxyCodeLine{00043   \textcolor{keywordflow}{return} m\_vertical ? sprop-\/>\mbox{\hyperlink{class_t_scene_properties_a39eceace5e8002d5e952d6535e188c44}{getVGuides}}() : sprop-\/>\mbox{\hyperlink{class_t_scene_properties_a2620e65377b1c547a5a04905fba7605e}{getHGuides}}();}
\DoxyCodeLine{00044 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_a69d23a3d5ea2026554f052af6be36cee}\label{class_ruler_a69d23a3d5ea2026554f052af6be36cee}} 
\index{Ruler@{Ruler}!getIndices@{getIndices}}
\index{getIndices@{getIndices}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{getIndices()}{getIndices()}}
{\footnotesize\ttfamily void Ruler\+::get\+Indices (\begin{DoxyParamCaption}\item[{double}]{origin,  }\item[{double}]{iunit,  }\item[{int}]{size,  }\item[{int \&}]{i0,  }\item[{int \&}]{i1,  }\item[{int \&}]{ic }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00068                                       \{}
\DoxyCodeLine{00069   i0 = 0;}
\DoxyCodeLine{00070   i1 = -\/1;}
\DoxyCodeLine{00071   ic = 0;}
\DoxyCodeLine{00072   \textcolor{keywordflow}{if} (origin >= 0) \{}
\DoxyCodeLine{00073     i0    = -\/tfloor(origin * iunit);}
\DoxyCodeLine{00074     i1    = i0 + tfloor(size * iunit);}
\DoxyCodeLine{00075     \textcolor{keywordtype}{int} d = tceil(-\/i0, 10);}
\DoxyCodeLine{00076     i0 += d;}
\DoxyCodeLine{00077     i1 += d;}
\DoxyCodeLine{00078     ic += d;}
\DoxyCodeLine{00079   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00080     i0 = tceil(-\/origin * iunit);}
\DoxyCodeLine{00081     i1 = i0 + tfloor(size * iunit);}
\DoxyCodeLine{00082     ic = 0;}
\DoxyCodeLine{00083   \}}
\DoxyCodeLine{00084   \textcolor{keywordflow}{if} (m\_viewer-\/>getIsFlippedX()) \{}
\DoxyCodeLine{00085     i0 = i0 + i1;}
\DoxyCodeLine{00086     i1 = i0 -\/ i1;}
\DoxyCodeLine{00087     i0 = i0 -\/ i1;}
\DoxyCodeLine{00088   \}}
\DoxyCodeLine{00089   \textcolor{comment}{// assert(i0>=0);}}
\DoxyCodeLine{00090   \textcolor{comment}{// assert((ic\%10)==0);}}
\DoxyCodeLine{00091 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_ac7b24acdc4e9e0555d8ba8fc4294fbad}\label{class_ruler_ac7b24acdc4e9e0555d8ba8fc4294fbad}} 
\index{Ruler@{Ruler}!getPan@{getPan}}
\index{getPan@{getPan}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{getPan()}{getPan()}}
{\footnotesize\ttfamily double Ruler\+::get\+Pan (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00104                            \{}
\DoxyCodeLine{00105   \mbox{\hyperlink{class_t_affine}{TAffine}} aff = m\_viewer-\/>\mbox{\hyperlink{class_scene_viewer_a3f746b9c53dc17030711cac65d96f625}{getViewMatrix}}();}
\DoxyCodeLine{00106   \textcolor{keywordflow}{if} (m\_vertical)}
\DoxyCodeLine{00107     \textcolor{keywordflow}{if} (m\_viewer-\/>is3DView())  \textcolor{comment}{// Vertical   3D}}
\DoxyCodeLine{00108       \textcolor{keywordflow}{return} m\_viewer-\/>getPan3D().y;}
\DoxyCodeLine{00109     \textcolor{keywordflow}{else}  \textcolor{comment}{// Vertical   2D}}
\DoxyCodeLine{00110       \textcolor{keywordflow}{return} aff.a23 / getDevPixRatio();}
\DoxyCodeLine{00111   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_viewer-\/>is3DView())  \textcolor{comment}{// Horizontal 3D}}
\DoxyCodeLine{00112     \textcolor{keywordflow}{return} m\_viewer-\/>getPan3D().x;}
\DoxyCodeLine{00113   \textcolor{keywordflow}{return} aff.a13 / getDevPixRatio();  \textcolor{comment}{// Horizontal 2D}}
\DoxyCodeLine{00114 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_affd326dd6e173de611cff343c0205486}\label{class_ruler_affd326dd6e173de611cff343c0205486}} 
\index{Ruler@{Ruler}!getTick@{getTick}}
\index{getTick@{getTick}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{getTick()}{getTick()}}
{\footnotesize\ttfamily double Ruler\+::get\+Tick (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00125 \{ \textcolor{keywordflow}{return} m\_minValue + index * m\_step; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_ab4663f088ca7e6108c3faf7c72e30ac1}\label{class_ruler_ab4663f088ca7e6108c3faf7c72e30ac1}} 
\index{Ruler@{Ruler}!getTickCount@{getTickCount}}
\index{getTickCount@{getTickCount}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{getTickCount()}{getTickCount()}}
{\footnotesize\ttfamily int Ruler\+::get\+Tick\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00124 \{ \textcolor{keywordflow}{return} m\_tickCount; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_a1663e473fd044202b326806d5051eb45}\label{class_ruler_a1663e473fd044202b326806d5051eb45}} 
\index{Ruler@{Ruler}!getUnit@{getUnit}}
\index{getUnit@{getUnit}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{getUnit()}{getUnit()}}
{\footnotesize\ttfamily double Ruler\+::get\+Unit (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00060                             \{}
\DoxyCodeLine{00061   \textcolor{keywordtype}{double} unit = getZoomScale() * \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}};}
\DoxyCodeLine{00062   \textcolor{keywordflow}{return} unit;}
\DoxyCodeLine{00063 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_add8b3740abd6a3cbb79d5b225ef83e21}\label{class_ruler_add8b3740abd6a3cbb79d5b225ef83e21}} 
\index{Ruler@{Ruler}!getZoomScale@{getZoomScale}}
\index{getZoomScale@{getZoomScale}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{getZoomScale()}{getZoomScale()}}
{\footnotesize\ttfamily double Ruler\+::get\+Zoom\+Scale (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00095                                  \{}
\DoxyCodeLine{00096   \textcolor{keywordflow}{if} (m\_viewer-\/>is3DView())}
\DoxyCodeLine{00097     \textcolor{keywordflow}{return} m\_viewer-\/>getZoomScale3D();}
\DoxyCodeLine{00098   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00099     \textcolor{keywordflow}{return} m\_viewer-\/>\mbox{\hyperlink{class_scene_viewer_a3f746b9c53dc17030711cac65d96f625}{getViewMatrix}}().a11;}
\DoxyCodeLine{00100 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_aa2b2702c6567cac30cb09f385c82e422}\label{class_ruler_aa2b2702c6567cac30cb09f385c82e422}} 
\index{Ruler@{Ruler}!isLabel@{isLabel}}
\index{isLabel@{isLabel}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{isLabel()}{isLabel()}}
{\footnotesize\ttfamily bool Ruler\+::is\+Label (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00126                                 \{}
\DoxyCodeLine{00127     \textcolor{keywordflow}{return} ((m\_labelOffset + index) \% m\_labelPeriod) == 0;}
\DoxyCodeLine{00128   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_a61c89219cad7340f64d44c4850201766}\label{class_ruler_a61c89219cad7340f64d44c4850201766}} 
\index{Ruler@{Ruler}!mouseMoveEvent@{mouseMoveEvent}}
\index{mouseMoveEvent@{mouseMoveEvent}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{mouseMoveEvent()}{mouseMoveEvent()}}
{\footnotesize\ttfamily void Ruler\+::mouse\+Move\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00294                                          \{}
\DoxyCodeLine{00295   \textcolor{keywordflow}{if} (m\_moving) \{}
\DoxyCodeLine{00296     m\_hiding           = m\_vertical ? (e-\/>pos().x() < 0) : (e-\/>pos().y() < 0);}
\DoxyCodeLine{00297     getGuides().back() = posToValue(e-\/>pos()) * getDevPixRatio();}
\DoxyCodeLine{00298     \textcolor{comment}{// aggiorna sprop!!!!}}
\DoxyCodeLine{00299     update();}
\DoxyCodeLine{00300     m\_viewer-\/>update();}
\DoxyCodeLine{00301     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00302   \}}
\DoxyCodeLine{00303 }
\DoxyCodeLine{00304   Guides \&guides = getGuides();}
\DoxyCodeLine{00305   \textcolor{keywordtype}{double} v       = posToValue(e-\/>pos());}
\DoxyCodeLine{00306   m\_hiding       = \textcolor{keyword}{false};}
\DoxyCodeLine{00307   m\_moving       = \textcolor{keyword}{false};}
\DoxyCodeLine{00308 }
\DoxyCodeLine{00309   \textcolor{keywordtype}{int} count = guides.size();}
\DoxyCodeLine{00310   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < count; i++) \{}
\DoxyCodeLine{00311     \textcolor{keywordtype}{double} g     = guides[i] / (double)getDevPixRatio();}
\DoxyCodeLine{00312     \textcolor{keywordtype}{double} dist2 = (g -\/ v) * (g -\/ v);}
\DoxyCodeLine{00313     \textcolor{keywordflow}{if} (dist2 < 25) \{}
\DoxyCodeLine{00314       setToolTip(tr(}
\DoxyCodeLine{00315           \textcolor{stringliteral}{"{}Left-\/click and drag to move guide, right-\/click to delete guide."{}}));}
\DoxyCodeLine{00316       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00317     \}}
\DoxyCodeLine{00318   \}}
\DoxyCodeLine{00319   \textcolor{comment}{// in case no guides are found near the cursor}}
\DoxyCodeLine{00320   \textcolor{keywordflow}{if} (m\_vertical)}
\DoxyCodeLine{00321     setToolTip(tr(\textcolor{stringliteral}{"{}Click to create a horizontal guide"{}}));}
\DoxyCodeLine{00322   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00323     setToolTip(tr(\textcolor{stringliteral}{"{}Click to create a vertical guide"{}}));}
\DoxyCodeLine{00324 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_ab149bb8f330fc5af9e09be12f5b743d0}\label{class_ruler_ab149bb8f330fc5af9e09be12f5b743d0}} 
\index{Ruler@{Ruler}!mousePressEvent@{mousePressEvent}}
\index{mousePressEvent@{mousePressEvent}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{mousePressEvent()}{mousePressEvent()}}
{\footnotesize\ttfamily void Ruler\+::mouse\+Press\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00250                                           \{}
\DoxyCodeLine{00251   \textcolor{keywordflow}{if} (e-\/>button() != Qt::LeftButton \&\& e-\/>button() != Qt::RightButton) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00252   Guides \&guides  = getGuides();}
\DoxyCodeLine{00253   \textcolor{keywordtype}{double} v        = posToValue(e-\/>pos());}
\DoxyCodeLine{00254   m\_hiding        = \textcolor{keyword}{false};}
\DoxyCodeLine{00255   m\_moving        = \textcolor{keyword}{false};}
\DoxyCodeLine{00256   \textcolor{keywordtype}{int} selected    = -\/1;}
\DoxyCodeLine{00257   \textcolor{keywordtype}{double} minDist2 = 0;}
\DoxyCodeLine{00258   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00259   \textcolor{keywordtype}{int} count = guides.size();}
\DoxyCodeLine{00260   \textcolor{keywordflow}{for} (i = 0; i < count; i++) \{}
\DoxyCodeLine{00261     \textcolor{keywordtype}{double} g     = guides[i] / (double)getDevPixRatio();}
\DoxyCodeLine{00262     \textcolor{keywordtype}{double} dist2 = (g -\/ v) * (g -\/ v);}
\DoxyCodeLine{00263     \textcolor{keywordflow}{if} (selected < 0 || dist2 < minDist2) \{}
\DoxyCodeLine{00264       minDist2 = dist2;}
\DoxyCodeLine{00265       selected = i;}
\DoxyCodeLine{00266     \}}
\DoxyCodeLine{00267   \}}
\DoxyCodeLine{00268   \textcolor{keywordflow}{if} (e-\/>button() == Qt::LeftButton) \{}
\DoxyCodeLine{00269     \textcolor{keywordflow}{if} (selected < 0 || minDist2 > 25) \{}
\DoxyCodeLine{00270       \textcolor{comment}{// crea una nuova guida}}
\DoxyCodeLine{00271       guides.push\_back(v * getDevPixRatio());}
\DoxyCodeLine{00272       m\_viewer-\/>update();}
\DoxyCodeLine{00273       \textcolor{comment}{// aggiorna sprop!!!!}}
\DoxyCodeLine{00274     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (selected < count -\/ 1)}
\DoxyCodeLine{00275       std::swap(guides[selected], guides.back());}
\DoxyCodeLine{00276 }
\DoxyCodeLine{00277     m\_moving = \textcolor{keyword}{true};}
\DoxyCodeLine{00278     update();}
\DoxyCodeLine{00279     assert(guides.size() > 0);}
\DoxyCodeLine{00280   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (e-\/>button() == Qt::RightButton) \{}
\DoxyCodeLine{00281     \textcolor{keywordflow}{if} (selected < count -\/ 1) std::swap(guides[selected], guides.back());}
\DoxyCodeLine{00282     \textcolor{keywordflow}{if} (count > 0 \&\& minDist2 <= 25) \{}
\DoxyCodeLine{00283       assert(!guides.empty());}
\DoxyCodeLine{00284       guides.pop\_back();}
\DoxyCodeLine{00285       update();}
\DoxyCodeLine{00286       m\_viewer-\/>update();}
\DoxyCodeLine{00287       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00288     \}}
\DoxyCodeLine{00289   \}}
\DoxyCodeLine{00290 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_af2cfd10ee4c1da473d9e7f757c0d5608}\label{class_ruler_af2cfd10ee4c1da473d9e7f757c0d5608}} 
\index{Ruler@{Ruler}!mouseReleaseEvent@{mouseReleaseEvent}}
\index{mouseReleaseEvent@{mouseReleaseEvent}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{mouseReleaseEvent()}{mouseReleaseEvent()}}
{\footnotesize\ttfamily void Ruler\+::mouse\+Release\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00328                                             \{}
\DoxyCodeLine{00329   \textcolor{keywordflow}{if} (!m\_moving) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00330   \textcolor{keywordflow}{if} (m\_hiding) \{}
\DoxyCodeLine{00331     assert(!getGuides().empty());}
\DoxyCodeLine{00332     getGuides().pop\_back();}
\DoxyCodeLine{00333   \}}
\DoxyCodeLine{00334   m\_moving = m\_hiding = \textcolor{keyword}{false};}
\DoxyCodeLine{00335   update();}
\DoxyCodeLine{00336   m\_viewer-\/>update();}
\DoxyCodeLine{00337 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_a38f7295e7e26e1d373d6fa8daf081ae8}\label{class_ruler_a38f7295e7e26e1d373d6fa8daf081ae8}} 
\index{Ruler@{Ruler}!paintEvent@{paintEvent}}
\index{paintEvent@{paintEvent}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{paintEvent()}{paintEvent()}}
{\footnotesize\ttfamily void Ruler\+::paint\+Event (\begin{DoxyParamCaption}\item[{QPaint\+Event $\ast$}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00224                                     \{}
\DoxyCodeLine{00225   QPainter p(\textcolor{keyword}{this});}
\DoxyCodeLine{00226   p.fillRect(QRect(0, 0, width(), height()), QBrush(m\_parentBgColor));}
\DoxyCodeLine{00227 }
\DoxyCodeLine{00228   \textcolor{keywordflow}{if} (m\_vertical)}
\DoxyCodeLine{00229     drawVertical(p);}
\DoxyCodeLine{00230   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00231     drawHorizontal(p);}
\DoxyCodeLine{00232 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_a25929db0096652642e3dc3d738cf769f}\label{class_ruler_a25929db0096652642e3dc3d738cf769f}} 
\index{Ruler@{Ruler}!posToValue@{posToValue}}
\index{posToValue@{posToValue}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{posToValue()}{posToValue()}}
{\footnotesize\ttfamily double Ruler\+::pos\+To\+Value (\begin{DoxyParamCaption}\item[{const QPoint \&}]{p }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00236                                               \{}
\DoxyCodeLine{00237   \textcolor{keywordtype}{double} v;}
\DoxyCodeLine{00238   \textcolor{keywordflow}{if} (m\_vertical)}
\DoxyCodeLine{00239     \textcolor{keywordflow}{if} (m\_viewer-\/>getIsFlippedX() != m\_viewer-\/>getIsFlippedY()) \{}
\DoxyCodeLine{00240       v = (-\/p.y() + height() / 2 -\/ getPan()) / -\/getZoomScale();}
\DoxyCodeLine{00241     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00242       v = (-\/p.y() + height() / 2 -\/ getPan()) / getZoomScale();}
\DoxyCodeLine{00243   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00244     v = (p.x() -\/ width() / 2 -\/ getPan()) / getZoomScale();}
\DoxyCodeLine{00245   \textcolor{keywordflow}{return} v;}
\DoxyCodeLine{00246 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_a72bdd3f87f88342f266be162fdd075b9}\label{class_ruler_a72bdd3f87f88342f266be162fdd075b9}} 
\index{Ruler@{Ruler}!setMinDistance@{setMinDistance}}
\index{setMinDistance@{setMinDistance}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{setMinDistance()}{setMinDistance()}}
{\footnotesize\ttfamily void Ruler\+::set\+Min\+Distance (\begin{DoxyParamCaption}\item[{int}]{distance }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00116 \{ m\_minDistance = distance; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_af59772d14a806264c2c76d817fd02fad}\label{class_ruler_af59772d14a806264c2c76d817fd02fad}} 
\index{Ruler@{Ruler}!setMinLabelDistance@{setMinLabelDistance}}
\index{setMinLabelDistance@{setMinLabelDistance}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{setMinLabelDistance()}{setMinLabelDistance()}}
{\footnotesize\ttfamily void Ruler\+::set\+Min\+Label\+Distance (\begin{DoxyParamCaption}\item[{int}]{distance }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00114 \{ m\_minLabelDistance = distance; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_a064ee24d0059cce691034e5bd2603eec}\label{class_ruler_a064ee24d0059cce691034e5bd2603eec}} 
\index{Ruler@{Ruler}!setMinStep@{setMinStep}}
\index{setMinStep@{setMinStep}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{setMinStep()}{setMinStep()}}
{\footnotesize\ttfamily void Ruler\+::set\+Min\+Step (\begin{DoxyParamCaption}\item[{double}]{step }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00120 \{ m\_minStep = step; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_acb7efa152c029f34780aea291e5e7498}\label{class_ruler_acb7efa152c029f34780aea291e5e7498}} 
\index{Ruler@{Ruler}!setRange@{setRange}}
\index{setRange@{setRange}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{setRange()}{setRange()}}
{\footnotesize\ttfamily void Ruler\+::set\+Range (\begin{DoxyParamCaption}\item[{int}]{x0,  }\item[{int}]{x1 }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00108                                 \{}
\DoxyCodeLine{00109     m\_x0 = x0;}
\DoxyCodeLine{00110     m\_x1 = x1;}
\DoxyCodeLine{00111   \}  \textcolor{comment}{// [x0,x1] is the pixel range}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ruler_ab0b141923bc65ba2fe42159f97291715}\label{class_ruler_ab0b141923bc65ba2fe42159f97291715}} 
\index{Ruler@{Ruler}!setTransform@{setTransform}}
\index{setTransform@{setTransform}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{setTransform()}{setTransform()}}
{\footnotesize\ttfamily void Ruler\+::set\+Transform (\begin{DoxyParamCaption}\item[{double}]{unit,  }\item[{double}]{pan,  }\item[{double}]{v\+Origin = {\ttfamily 0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00102                                                                  \{}
\DoxyCodeLine{00103     m\_unit    = unit;}
\DoxyCodeLine{00104     m\_pan     = pan;}
\DoxyCodeLine{00105     m\_vOrigin = vOrigin;}
\DoxyCodeLine{00106   \}}

\end{DoxyCode}


\doxysubsection{Property Documentation}
\mbox{\Hypertarget{class_ruler_aac0aa89c995437e15e9d7df2ab142726}\label{class_ruler_aac0aa89c995437e15e9d7df2ab142726}} 
\index{Ruler@{Ruler}!BorderColor@{BorderColor}}
\index{BorderColor@{BorderColor}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{BorderColor}{BorderColor}}
{\footnotesize\ttfamily QColor Ruler\+::\+Border\+Color\hspace{0.3cm}{\ttfamily [read]}, {\ttfamily [write]}}

\mbox{\Hypertarget{class_ruler_a6ddadbccd2de995bd7ab724e242e5b26}\label{class_ruler_a6ddadbccd2de995bd7ab724e242e5b26}} 
\index{Ruler@{Ruler}!HandleColor@{HandleColor}}
\index{HandleColor@{HandleColor}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{HandleColor}{HandleColor}}
{\footnotesize\ttfamily QColor Ruler\+::\+Handle\+Color\hspace{0.3cm}{\ttfamily [read]}, {\ttfamily [write]}}

\mbox{\Hypertarget{class_ruler_aa4d5056315596137ce96c501f19b3842}\label{class_ruler_aa4d5056315596137ce96c501f19b3842}} 
\index{Ruler@{Ruler}!HandleDragColor@{HandleDragColor}}
\index{HandleDragColor@{HandleDragColor}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{HandleDragColor}{HandleDragColor}}
{\footnotesize\ttfamily QColor Ruler\+::\+Handle\+Drag\+Color\hspace{0.3cm}{\ttfamily [read]}, {\ttfamily [write]}}

\mbox{\Hypertarget{class_ruler_a02dc34469c79889a8abe32aaf4f5ab16}\label{class_ruler_a02dc34469c79889a8abe32aaf4f5ab16}} 
\index{Ruler@{Ruler}!ParentBGColor@{ParentBGColor}}
\index{ParentBGColor@{ParentBGColor}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{ParentBGColor}{ParentBGColor}}
{\footnotesize\ttfamily QColor Ruler\+::\+Parent\+BGColor\hspace{0.3cm}{\ttfamily [read]}, {\ttfamily [write]}}

\mbox{\Hypertarget{class_ruler_ab9d2b1eaef5c4acf469c54e26385c01f}\label{class_ruler_ab9d2b1eaef5c4acf469c54e26385c01f}} 
\index{Ruler@{Ruler}!ScaleColor@{ScaleColor}}
\index{ScaleColor@{ScaleColor}!Ruler@{Ruler}}
\doxysubsubsection{\texorpdfstring{ScaleColor}{ScaleColor}}
{\footnotesize\ttfamily QColor Ruler\+::\+Scale\+Color\hspace{0.3cm}{\ttfamily [read]}, {\ttfamily [write]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/ruler.\+h\item 
E\+:/opentoonz/toonz/sources/toonzqt/functionpanel.\+cpp\item 
E\+:/opentoonz/toonz/sources/toonz/ruler.\+cpp\end{DoxyCompactItemize}
