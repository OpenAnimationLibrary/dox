\hypertarget{class_farm_controller}{}\doxysection{Farm\+Controller Class Reference}
\label{class_farm_controller}\index{FarmController@{FarmController}}
Inheritance diagram for Farm\+Controller\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4.000000cm]{class_farm_controller}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_farm_controller_a58c7b72da5c960c02aefd2295d9dd7c1}{Farm\+Controller}} (const QString \&host\+Name, const QString \&addr, int port, \mbox{\hyperlink{class_t_user_log}{TUser\+Log}} $\ast$log)
\item 
void \mbox{\hyperlink{class_farm_controller_a0b2ce70799797e9ef316603481758f0d}{load\+Servers\+Data}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&global\+Root)
\item 
QString \mbox{\hyperlink{class_farm_controller_aa734a34673db78dc72e4bd004046c1aa}{execute}} (const \mbox{\hyperlink{classvector}{vector}}$<$ QString $>$ \&argv) override
\item 
QString \mbox{\hyperlink{class_farm_controller_a45afe05a7a803431e602de4b158db377}{add\+Task}} (const QString \&name, const QString \&cmdline, const QString \&user, const QString \&host, bool suspended, int priority, TFarm\+Platform platform)
\item 
QString \mbox{\hyperlink{class_farm_controller_ade71efec5885b08dbeb2564aa9e31d0e}{add\+Task}} (const \mbox{\hyperlink{class_t_farm_task}{TFarm\+Task}} \&task, bool suspended) override
\item 
void \mbox{\hyperlink{class_farm_controller_a09dda7508f791eadc49c38586525741b}{remove\+Task}} (const QString \&id) override
\item 
void \mbox{\hyperlink{class_farm_controller_a77108086fc40e698eec6125559b02dfe}{suspend\+Task}} (const QString \&id) override
\item 
void \mbox{\hyperlink{class_farm_controller_a0a5f9090b17ba2c9e7c984790b558947}{activate\+Task}} (const QString \&id) override
\item 
void \mbox{\hyperlink{class_farm_controller_adf97cb2bc29ff2d3317013540db1f77a}{restart\+Task}} (const QString \&id) override
\item 
void \mbox{\hyperlink{class_farm_controller_af68943f16973d15d549751696d0bf1c6}{get\+Tasks}} (\mbox{\hyperlink{classvector}{vector}}$<$ QString $>$ \&tasks) override
\item 
void \mbox{\hyperlink{class_farm_controller_a4789807c7039fbb5fe1193f3baaeba5a}{get\+Tasks}} (const QString \&parent\+Id, \mbox{\hyperlink{classvector}{vector}}$<$ QString $>$ \&tasks) override
\item 
void \mbox{\hyperlink{class_farm_controller_a5ec7fe53f587f17ad91ecff738f4d12a}{get\+Tasks}} (const QString \&parent\+Id, \mbox{\hyperlink{classvector}{vector}}$<$ \mbox{\hyperlink{class_task_short_info}{Task\+Short\+Info}} $>$ \&tasks) override
\item 
void \mbox{\hyperlink{class_farm_controller_a99fe26bd6e19e30b15fda13e4cd193e2}{query\+Task\+Info}} (const QString \&id, \mbox{\hyperlink{class_t_farm_task}{TFarm\+Task}} \&task) override
\item 
void \mbox{\hyperlink{class_farm_controller_a280eeb3f0ba1db5df54f0394054a8078}{query\+Task\+Short\+Info}} (const QString \&id, QString \&parent\+Id, QString \&name, Task\+State \&status) override
\item 
void \mbox{\hyperlink{class_farm_controller_a872e8913017de5b828dc0d95e3723c4c}{attach\+Server}} (const QString \&name, const QString \&addr, int port) override
\item 
void \mbox{\hyperlink{class_farm_controller_a08f94f57e1eb693ee525cc123e801ce2}{detach\+Server}} (const QString \&name, const QString \&addr, int port) override
\item 
void \mbox{\hyperlink{class_farm_controller_a7bcc0592cd4fb4bb9733bcbb05e0e4f4}{task\+Submission\+Error}} (const QString \&task\+Id, int err\+Code) override
\item 
void \mbox{\hyperlink{class_farm_controller_a5d5429427f1121760cf5982877d95eee}{task\+Progress}} (const QString \&task\+Id, int step, int step\+Count, int frame\+Number, Frame\+State state) override
\item 
void \mbox{\hyperlink{class_farm_controller_a1365d9bd2b148a156f063cb5a2f7ae1b}{task\+Completed}} (const QString \&task\+Id, int exit\+Code) override
\item 
void \mbox{\hyperlink{class_farm_controller_aba9d90d93cc4900e7df0ea08ef514e2c}{get\+Servers}} (\mbox{\hyperlink{classvector}{vector}}$<$ \mbox{\hyperlink{class_server_identity}{Server\+Identity}} $>$ \&servers) override
\item 
Server\+State \mbox{\hyperlink{class_farm_controller_ab539ebd037b8f0b4c293304ead88e539}{query\+Server\+State2}} (const QString \&id) override
\item 
void \mbox{\hyperlink{class_farm_controller_a0dea6e6db4c704a287dfa9491ed81de5}{query\+Server\+Info}} (const QString \&id, \mbox{\hyperlink{class_server_info}{Server\+Info}} \&info) override
\item 
void \mbox{\hyperlink{class_farm_controller_a7f3f679487b0173df9e852f46e6ce17e}{activate\+Server}} (const QString \&id) override
\item 
void \mbox{\hyperlink{class_farm_controller_af8a8a1ac47d67f0fef5b1c5e9e4000e3}{deactivate\+Server}} (const QString \&id, bool complete\+Running\+Tasks) override
\item 
\mbox{\hyperlink{class_ctrl_farm_task}{Ctrl\+Farm\+Task}} $\ast$ \mbox{\hyperlink{class_farm_controller_abb5e4e9cd73abc3b76825043af3ce321}{do\+Add\+Task}} (const QString \&id, const QString \&parent\+Id, const QString \&name, const QString \&cmdline, const QString \&user, const QString \&host, bool suspended, int step\+Count, int priority, TFarm\+Platform platform)
\item 
void \mbox{\hyperlink{class_farm_controller_a0078fcec754f34a153da6559886d2da5}{start\+Task}} (\mbox{\hyperlink{class_ctrl_farm_task}{Ctrl\+Farm\+Task}} $\ast$task, \mbox{\hyperlink{class_farm_server_proxy}{Farm\+Server\+Proxy}} $\ast$server)
\item 
\mbox{\hyperlink{class_ctrl_farm_task}{Ctrl\+Farm\+Task}} $\ast$ \mbox{\hyperlink{class_farm_controller_a3bd6793647784ee2dae83d1e0d97c06d}{get\+Task\+To\+Start}} (\mbox{\hyperlink{class_farm_server_proxy}{Farm\+Server\+Proxy}} $\ast$server=0)
\item 
\mbox{\hyperlink{class_ctrl_farm_task}{Ctrl\+Farm\+Task}} $\ast$ \mbox{\hyperlink{class_farm_controller_a325905caa8033aa67fae2ef5c652c6ca}{get\+Next\+Task\+To\+Start}} (\mbox{\hyperlink{class_ctrl_farm_task}{Ctrl\+Farm\+Task}} $\ast$task, \mbox{\hyperlink{class_farm_server_proxy}{Farm\+Server\+Proxy}} $\ast$server)
\item 
bool \mbox{\hyperlink{class_farm_controller_af906eaf2bcb3dab4b2b72d73a68bb9ff}{try\+To\+Start\+Task}} (\mbox{\hyperlink{class_ctrl_farm_task}{Ctrl\+Farm\+Task}} $\ast$task)
\item 
Server\+State \mbox{\hyperlink{class_farm_controller_aeae3f4ef04cdaab0e6e5aaebe0f1385b}{get\+Server\+State}} (\mbox{\hyperlink{class_farm_server_proxy}{Farm\+Server\+Proxy}} $\ast$server, QString \&task\+Id)
\item 
void \mbox{\hyperlink{class_farm_controller_aabd707c063df8b9900668deee0c5e7bc}{init\+Server}} (\mbox{\hyperlink{class_farm_server_proxy}{Farm\+Server\+Proxy}} $\ast$server)
\item 
void \mbox{\hyperlink{class_farm_controller_aeb6dc1e346ff64133b9be0063b0f91da}{load}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp)
\item 
void \mbox{\hyperlink{class_farm_controller_ad99f421b99dfdf554ed0275bf23996e8}{save}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp) const
\item 
void \mbox{\hyperlink{class_farm_controller_a287bf05b58ad6b81a4ea857d48a2ed72}{do\+Restart\+Task}} (const QString \&id, bool from\+Client, \mbox{\hyperlink{class_farm_server_proxy}{Farm\+Server\+Proxy}} $\ast$server)
\item 
void \mbox{\hyperlink{class_farm_controller_a286a1578819b87d889108ccdbe3e1d6f}{activate\+Ready\+Servers}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
QString \mbox{\hyperlink{class_farm_controller_a559334fb6431abf9cb4a2cdbd0b22200}{m\+\_\+host\+Name}}
\item 
QString \mbox{\hyperlink{class_farm_controller_a350ad3adb4c2088f9e76ced2db2b20bd}{m\+\_\+addr}}
\item 
int \mbox{\hyperlink{class_farm_controller_a2c1d4ccc9818d180417ae5f4e931c6d7}{m\+\_\+port}}
\item 
\mbox{\hyperlink{class_t_user_log}{TUser\+Log}} $\ast$ \mbox{\hyperlink{class_farm_controller_a5103e7b8ebe5e0767d9abcf50bb7d518}{m\+\_\+user\+Log}}
\item 
map$<$ \mbox{\hyperlink{class_task_id}{Task\+Id}}, \mbox{\hyperlink{class_ctrl_farm_task}{Ctrl\+Farm\+Task}} $\ast$ $>$ \mbox{\hyperlink{class_farm_controller_a447713751e2346d4ccdfff2f76edf916}{m\+\_\+tasks}}
\item 
map$<$ QString, \mbox{\hyperlink{class_farm_server_proxy}{Farm\+Server\+Proxy}} $\ast$ $>$ \mbox{\hyperlink{class_farm_controller_a35b30d893ff236eebcb2f9140c1daa15}{m\+\_\+servers}}
\item 
\mbox{\hyperlink{class_t_thread_1_1_mutex}{TThread\+::\+Mutex}} \mbox{\hyperlink{class_farm_controller_ada66986ce4916c439d1ae008b300160d}{m\+\_\+mutex}}
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static int \mbox{\hyperlink{class_farm_controller_a36b3e560d89afd22439a5d50d4f5c27f}{Next\+Task\+Id}} = 0
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_farm_controller_a58c7b72da5c960c02aefd2295d9dd7c1}\label{class_farm_controller_a58c7b72da5c960c02aefd2295d9dd7c1}} 
\index{FarmController@{FarmController}!FarmController@{FarmController}}
\index{FarmController@{FarmController}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{FarmController()}{FarmController()}}
{\footnotesize\ttfamily Farm\+Controller\+::\+Farm\+Controller (\begin{DoxyParamCaption}\item[{const QString \&}]{host\+Name,  }\item[{const QString \&}]{addr,  }\item[{int}]{port,  }\item[{\mbox{\hyperlink{class_t_user_log}{TUser\+Log}} $\ast$}]{log }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00699     : \mbox{\hyperlink{class_t_farm_executor}{TFarmExecutor}}(port)}
\DoxyCodeLine{00700     , m\_hostName(hostName)}
\DoxyCodeLine{00701     , m\_addr(addr)}
\DoxyCodeLine{00702     , m\_port(port)}
\DoxyCodeLine{00703     , m\_userLog(log) \{}
\DoxyCodeLine{00704   \mbox{\hyperlink{class_t_file_path}{TFilePath}} rootDir            = getGlobalRoot();}
\DoxyCodeLine{00705   \mbox{\hyperlink{class_t_file_path}{TFilePath}} lastUsedIdFilePath = rootDir + \textcolor{stringliteral}{"{}config"{}} + \textcolor{stringliteral}{"{}id.txt"{}};}
\DoxyCodeLine{00706   \mbox{\hyperlink{class_tifstream}{Tifstream}} is(lastUsedIdFilePath);}
\DoxyCodeLine{00707   \textcolor{keywordflow}{if} (is.good()) is >> NextTaskId;}
\DoxyCodeLine{00708 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_farm_controller_a286a1578819b87d889108ccdbe3e1d6f}\label{class_farm_controller_a286a1578819b87d889108ccdbe3e1d6f}} 
\index{FarmController@{FarmController}!activateReadyServers@{activateReadyServers}}
\index{activateReadyServers@{activateReadyServers}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{activateReadyServers()}{activateReadyServers()}}
{\footnotesize\ttfamily void Farm\+Controller\+::activate\+Ready\+Servers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02167                                           \{}
\DoxyCodeLine{02168   QMutexLocker sl(\&m\_mutex);}
\DoxyCodeLine{02169 }
\DoxyCodeLine{02170   map<QString, FarmServerProxy *>::iterator it = m\_servers.begin();}
\DoxyCodeLine{02171   \textcolor{keywordflow}{for} (; it != m\_servers.end(); ++it) \{}
\DoxyCodeLine{02172     \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *server = it-\/>second;}
\DoxyCodeLine{02173 }
\DoxyCodeLine{02174     ServerState state = queryServerState2(server-\/>getId());}
\DoxyCodeLine{02175     \textcolor{keywordtype}{int} tasksCount    = server-\/>m\_tasks.size();}
\DoxyCodeLine{02176     \textcolor{keywordflow}{if} (state == Ready ||}
\DoxyCodeLine{02177         (state == Busy \&\& tasksCount < server-\/>m\_maxTaskCount)) \{}
\DoxyCodeLine{02178       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (server-\/>m\_maxTaskCount -\/ tasksCount); ++i) \{}
\DoxyCodeLine{02179         \textcolor{comment}{// cerca un task da sottomettere al server}}
\DoxyCodeLine{02180         \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = getTaskToStart(server);}
\DoxyCodeLine{02181         \textcolor{keywordflow}{if} (task) \{}
\DoxyCodeLine{02182           \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{02183             \textcolor{keywordflow}{if} (task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Aborted) \{}
\DoxyCodeLine{02184               vector<QString>::iterator it =}
\DoxyCodeLine{02185                   find(task-\/>m\_failedOnServers.begin(),}
\DoxyCodeLine{02186                        task-\/>m\_failedOnServers.end(), server-\/>getId());}
\DoxyCodeLine{02187 }
\DoxyCodeLine{02188               \textcolor{keywordflow}{if} (it == task-\/>m\_failedOnServers.end())}
\DoxyCodeLine{02189                 doRestartTask(task-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}}, \textcolor{keyword}{false}, server);}
\DoxyCodeLine{02190               \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02191                 doRestartTask(task-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}}, \textcolor{keyword}{false}, 0);}
\DoxyCodeLine{02192                 \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *nextTask = getNextTaskToStart(task, server);}
\DoxyCodeLine{02193                 \textcolor{keywordflow}{if} (nextTask) startTask(nextTask, server);}
\DoxyCodeLine{02194               \}}
\DoxyCodeLine{02195             \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{02196               startTask(task, server);}
\DoxyCodeLine{02197           \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \& \textcolor{comment}{/*e*/}) \{}
\DoxyCodeLine{02198           \}}
\DoxyCodeLine{02199         \}}
\DoxyCodeLine{02200       \}}
\DoxyCodeLine{02201     \}}
\DoxyCodeLine{02202   \}}
\DoxyCodeLine{02203 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a7f3f679487b0173df9e852f46e6ce17e}\label{class_farm_controller_a7f3f679487b0173df9e852f46e6ce17e}} 
\index{FarmController@{FarmController}!activateServer@{activateServer}}
\index{activateServer@{activateServer}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{activateServer()}{activateServer()}}
{\footnotesize\ttfamily void Farm\+Controller\+::activate\+Server (\begin{DoxyParamCaption}\item[{const QString \&}]{id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02048                                                      \{}
\DoxyCodeLine{02049   map<QString, FarmServerProxy *>::iterator it = m\_servers.find(\textcolor{keywordtype}{id});}
\DoxyCodeLine{02050   \textcolor{keywordflow}{if} (it != m\_servers.end()) \{}
\DoxyCodeLine{02051     \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *server = it-\/>second;}
\DoxyCodeLine{02052     server-\/>m\_offline       = \textcolor{keyword}{false};}
\DoxyCodeLine{02053 }
\DoxyCodeLine{02054     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < server-\/>m\_maxTaskCount; ++i) \{}
\DoxyCodeLine{02055       \textcolor{comment}{// cerca un task da sottomettere al server}}
\DoxyCodeLine{02056       \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = getTaskToStart(server);}
\DoxyCodeLine{02057       \textcolor{keywordflow}{if} (task) \{}
\DoxyCodeLine{02058         \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{02059           \textcolor{keywordflow}{if} (task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Aborted) \{}
\DoxyCodeLine{02060             vector<QString>::iterator it =}
\DoxyCodeLine{02061                 find(task-\/>m\_failedOnServers.begin(),}
\DoxyCodeLine{02062                      task-\/>m\_failedOnServers.end(), server-\/>getId());}
\DoxyCodeLine{02063 }
\DoxyCodeLine{02064             \textcolor{keywordflow}{if} (it == task-\/>m\_failedOnServers.end())}
\DoxyCodeLine{02065               doRestartTask(task-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}}, \textcolor{keyword}{false}, server);}
\DoxyCodeLine{02066             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02067               doRestartTask(task-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}}, \textcolor{keyword}{false}, 0);}
\DoxyCodeLine{02068               \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *nextTask = getNextTaskToStart(task, server);}
\DoxyCodeLine{02069               \textcolor{keywordflow}{if} (nextTask) startTask(nextTask, server);}
\DoxyCodeLine{02070             \}}
\DoxyCodeLine{02071           \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{02072             startTask(task, server);}
\DoxyCodeLine{02073         \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \& \textcolor{comment}{/*e*/}) \{}
\DoxyCodeLine{02074         \}}
\DoxyCodeLine{02075       \}}
\DoxyCodeLine{02076     \}}
\DoxyCodeLine{02077   \}}
\DoxyCodeLine{02078 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a0a5f9090b17ba2c9e7c984790b558947}\label{class_farm_controller_a0a5f9090b17ba2c9e7c984790b558947}} 
\index{FarmController@{FarmController}!activateTask@{activateTask}}
\index{activateTask@{activateTask}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{activateTask()}{activateTask()}}
{\footnotesize\ttfamily void Farm\+Controller\+::activate\+Task (\begin{DoxyParamCaption}\item[{const QString \&}]{id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01577 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a45afe05a7a803431e602de4b158db377}\label{class_farm_controller_a45afe05a7a803431e602de4b158db377}} 
\index{FarmController@{FarmController}!addTask@{addTask}}
\index{addTask@{addTask}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{addTask()}{addTask()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily QString Farm\+Controller\+::add\+Task (\begin{DoxyParamCaption}\item[{const QString \&}]{name,  }\item[{const QString \&}]{cmdline,  }\item[{const QString \&}]{user,  }\item[{const QString \&}]{host,  }\item[{bool}]{suspended,  }\item[{int}]{priority,  }\item[{TFarm\+Platform}]{platform }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01401                                                         \{}
\DoxyCodeLine{01402   QString parentId = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01403   \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task =}
\DoxyCodeLine{01404       doAddTask(QString::number(NextTaskId++), parentId, name, cmdline, user,}
\DoxyCodeLine{01405                 host, suspended, 1, priority, platform);}
\DoxyCodeLine{01406 }
\DoxyCodeLine{01407   \textcolor{keywordflow}{return} task-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}};}
\DoxyCodeLine{01408 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_ade71efec5885b08dbeb2564aa9e31d0e}\label{class_farm_controller_ade71efec5885b08dbeb2564aa9e31d0e}} 
\index{FarmController@{FarmController}!addTask@{addTask}}
\index{addTask@{addTask}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{addTask()}{addTask()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily QString Farm\+Controller\+::add\+Task (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_farm_task}{TFarm\+Task}} \&}]{task,  }\item[{bool}]{suspended }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01437                                                                      \{}
\DoxyCodeLine{01438   QString \textcolor{keywordtype}{id} = QString::number(NextTaskId++);}
\DoxyCodeLine{01439 }
\DoxyCodeLine{01440   \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *myTask = 0;}
\DoxyCodeLine{01441 }
\DoxyCodeLine{01442   \textcolor{keywordtype}{int} count = task.getTaskCount();}
\DoxyCodeLine{01443   \textcolor{keywordflow}{if} (count == 1) \{}
\DoxyCodeLine{01444     QString parentId = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01445     myTask = doAddTask(\textcolor{keywordtype}{id}, parentId, task.\mbox{\hyperlink{class_t_farm_task_a14686e563d198398938fa8a9ed8ffff2}{m\_name}}, task.getCommandLine(),}
\DoxyCodeLine{01446                        task.\mbox{\hyperlink{class_t_farm_task_ac7cb8ba23c446b6b1e0f3cf789dcb9f1}{m\_user}}, task.\mbox{\hyperlink{class_t_farm_task_a212e26b598b0ceeafa2e21b0ca94f898}{m\_hostName}}, suspended,}
\DoxyCodeLine{01447                        task.m\_stepCount, task.\mbox{\hyperlink{class_t_farm_task_a7b0083ed49f8937a93c2de029352995c}{m\_priority}}, task.m\_platform);}
\DoxyCodeLine{01448   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01449     myTask =}
\DoxyCodeLine{01450         \textcolor{keyword}{new} \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}}(\textcolor{keywordtype}{id}, task.\mbox{\hyperlink{class_t_farm_task_a14686e563d198398938fa8a9ed8ffff2}{m\_name}}, task.getCommandLine(), task.\mbox{\hyperlink{class_t_farm_task_ac7cb8ba23c446b6b1e0f3cf789dcb9f1}{m\_user}},}
\DoxyCodeLine{01451                          task.\mbox{\hyperlink{class_t_farm_task_a212e26b598b0ceeafa2e21b0ca94f898}{m\_hostName}}, task.m\_stepCount, task.\mbox{\hyperlink{class_t_farm_task_a7b0083ed49f8937a93c2de029352995c}{m\_priority}});}
\DoxyCodeLine{01452 }
\DoxyCodeLine{01453     myTask-\/>m\_submissionDate = QDateTime::currentDateTime();}
\DoxyCodeLine{01454     myTask-\/>\mbox{\hyperlink{class_t_farm_task_a93df061d1b990dc0c8f8149616b3fb0e}{m\_parentId}}       = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01455     myTask-\/>m\_dependencies = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_farm_task_1_1_dependencies}{TFarmTask::Dependencies}}(*task.m\_dependencies);}
\DoxyCodeLine{01456 }
\DoxyCodeLine{01457     \textcolor{keywordflow}{if} (suspended) myTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} = Suspended;}
\DoxyCodeLine{01458 }
\DoxyCodeLine{01459     m\_tasks.insert(std::make\_pair(\mbox{\hyperlink{class_task_id}{TaskId}}(\textcolor{keywordtype}{id}), myTask));}
\DoxyCodeLine{01460 }
\DoxyCodeLine{01461     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < count; ++i) \{}
\DoxyCodeLine{01462       QString subTaskId  = \textcolor{keywordtype}{id} + \textcolor{stringliteral}{"{}."{}} + QString::number(i);}
\DoxyCodeLine{01463       \mbox{\hyperlink{class_t_farm_task}{TFarmTask}} \&tt      = \textcolor{keyword}{const\_cast<}\mbox{\hyperlink{class_t_farm_task}{TFarmTask}} \&\textcolor{keyword}{>}(task);}
\DoxyCodeLine{01464       \mbox{\hyperlink{class_t_farm_task}{TFarmTask}} *subtask = tt.getTask(i);}
\DoxyCodeLine{01465 }
\DoxyCodeLine{01466       \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *mySubTask = doAddTask(}
\DoxyCodeLine{01467           subTaskId, myTask-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}}, subtask-\/>\mbox{\hyperlink{class_t_farm_task_a14686e563d198398938fa8a9ed8ffff2}{m\_name}}, subtask-\/>getCommandLine(),}
\DoxyCodeLine{01468           subtask-\/>\mbox{\hyperlink{class_t_farm_task_ac7cb8ba23c446b6b1e0f3cf789dcb9f1}{m\_user}}, subtask-\/>\mbox{\hyperlink{class_t_farm_task_a212e26b598b0ceeafa2e21b0ca94f898}{m\_hostName}}, suspended, subtask-\/>m\_stepCount,}
\DoxyCodeLine{01469           subtask-\/>\mbox{\hyperlink{class_t_farm_task_a7b0083ed49f8937a93c2de029352995c}{m\_priority}}, task.m\_platform);}
\DoxyCodeLine{01470 }
\DoxyCodeLine{01471       mySubTask-\/>m\_dependencies =}
\DoxyCodeLine{01472           \textcolor{keyword}{new} \mbox{\hyperlink{class_t_farm_task_1_1_dependencies}{TFarmTask::Dependencies}}(*task.m\_dependencies);}
\DoxyCodeLine{01473 }
\DoxyCodeLine{01474       myTask-\/>m\_subTasks.push\_back(subTaskId);}
\DoxyCodeLine{01475     \}}
\DoxyCodeLine{01476   \}}
\DoxyCodeLine{01477 }
\DoxyCodeLine{01478   \mbox{\hyperlink{class_t_thread_1_1_executor}{TThread::Executor}} executor;}
\DoxyCodeLine{01479   executor.\mbox{\hyperlink{class_t_thread_1_1_executor_af31c8db8ac72df4c342e7769e95e2135}{addTask}}(\textcolor{keyword}{new} \mbox{\hyperlink{class_task_starter}{TaskStarter}}(\textcolor{keyword}{this}, myTask));}
\DoxyCodeLine{01480 }
\DoxyCodeLine{01481   \textcolor{keywordflow}{return} id;}
\DoxyCodeLine{01482 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a872e8913017de5b828dc0d95e3723c4c}\label{class_farm_controller_a872e8913017de5b828dc0d95e3723c4c}} 
\index{FarmController@{FarmController}!attachServer@{attachServer}}
\index{attachServer@{attachServer}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{attachServer()}{attachServer()}}
{\footnotesize\ttfamily void Farm\+Controller\+::attach\+Server (\begin{DoxyParamCaption}\item[{const QString \&}]{name,  }\item[{const QString \&}]{addr,  }\item[{int}]{port }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01703                                             \{}
\DoxyCodeLine{01704   \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *server                      = 0;}
\DoxyCodeLine{01705   map<QString, FarmServerProxy *>::iterator it = m\_servers.begin();}
\DoxyCodeLine{01706   \textcolor{keywordflow}{for} (; it != m\_servers.end(); ++it) \{}
\DoxyCodeLine{01707     \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *s = it-\/>second;}
\DoxyCodeLine{01708 }
\DoxyCodeLine{01709     \textcolor{keywordflow}{if} (STRICMP(s-\/>getHostName(), name) == 0 ||}
\DoxyCodeLine{01710         STRICMP(s-\/>getIpAddress(), addr) == 0) \{}
\DoxyCodeLine{01711       server = s;}
\DoxyCodeLine{01712       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01713     \}}
\DoxyCodeLine{01714   \}}
\DoxyCodeLine{01715 }
\DoxyCodeLine{01716   \textcolor{keywordflow}{if} (!server) \{}
\DoxyCodeLine{01717     server = \textcolor{keyword}{new} \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}}(name, addr, port);}
\DoxyCodeLine{01718     m\_servers.insert(make\_pair(QString(addr), server));}
\DoxyCodeLine{01719   \}}
\DoxyCodeLine{01720 }
\DoxyCodeLine{01721   initServer(server);}
\DoxyCodeLine{01722 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_af8a8a1ac47d67f0fef5b1c5e9e4000e3}\label{class_farm_controller_af8a8a1ac47d67f0fef5b1c5e9e4000e3}} 
\index{FarmController@{FarmController}!deactivateServer@{deactivateServer}}
\index{deactivateServer@{deactivateServer}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{deactivateServer()}{deactivateServer()}}
{\footnotesize\ttfamily void Farm\+Controller\+::deactivate\+Server (\begin{DoxyParamCaption}\item[{const QString \&}]{id,  }\item[{bool}]{complete\+Running\+Tasks }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02083                                                                  \{}
\DoxyCodeLine{02084   map<QString, FarmServerProxy *>::iterator it = m\_servers.find(\textcolor{keywordtype}{id});}
\DoxyCodeLine{02085   \textcolor{keywordflow}{if} (it != m\_servers.end()) \{}
\DoxyCodeLine{02086     \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *server = it-\/>second;}
\DoxyCodeLine{02087 }
\DoxyCodeLine{02088     QString taskId;}
\DoxyCodeLine{02089     ServerState state = getServerState(server, taskId);}
\DoxyCodeLine{02090     \textcolor{keywordflow}{if} (state == Busy) \{}
\DoxyCodeLine{02091       \textcolor{keyword}{const} \mbox{\hyperlink{classvector}{vector<QString>}} \&tasks       = server-\/>getTasks();}
\DoxyCodeLine{02092       vector<QString>::const\_iterator it = tasks.begin();}
\DoxyCodeLine{02093       \textcolor{keywordflow}{for} (; it != tasks.end(); ++it) \{}
\DoxyCodeLine{02094         server-\/>terminateTask(*it);}
\DoxyCodeLine{02095       \}}
\DoxyCodeLine{02096 }
\DoxyCodeLine{02097       server-\/>m\_offline = \textcolor{keyword}{true};}
\DoxyCodeLine{02098     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{02099       server-\/>m\_offline = \textcolor{keyword}{true};}
\DoxyCodeLine{02100   \}}
\DoxyCodeLine{02101 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a08f94f57e1eb693ee525cc123e801ce2}\label{class_farm_controller_a08f94f57e1eb693ee525cc123e801ce2}} 
\index{FarmController@{FarmController}!detachServer@{detachServer}}
\index{detachServer@{detachServer}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{detachServer()}{detachServer()}}
{\footnotesize\ttfamily void Farm\+Controller\+::detach\+Server (\begin{DoxyParamCaption}\item[{const QString \&}]{name,  }\item[{const QString \&}]{addr,  }\item[{int}]{port }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01727                                             \{}
\DoxyCodeLine{01728   map<QString, FarmServerProxy *>::iterator it = m\_servers.begin();}
\DoxyCodeLine{01729   \textcolor{keywordflow}{for} (; it != m\_servers.end(); ++it) \{}
\DoxyCodeLine{01730     \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *s = it-\/>second;}
\DoxyCodeLine{01731     \textcolor{keywordflow}{if} (STRICMP(s-\/>getHostName(), name) == 0 ||}
\DoxyCodeLine{01732         STRICMP(s-\/>getIpAddress(), addr) == 0) \{}
\DoxyCodeLine{01733       s-\/>m\_attached = \textcolor{keyword}{false};}
\DoxyCodeLine{01734       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01735     \}}
\DoxyCodeLine{01736   \}}
\DoxyCodeLine{01737 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_abb5e4e9cd73abc3b76825043af3ce321}\label{class_farm_controller_abb5e4e9cd73abc3b76825043af3ce321}} 
\index{FarmController@{FarmController}!doAddTask@{doAddTask}}
\index{doAddTask@{doAddTask}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{doAddTask()}{doAddTask()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_ctrl_farm_task}{Ctrl\+Farm\+Task}} $\ast$ Farm\+Controller\+::do\+Add\+Task (\begin{DoxyParamCaption}\item[{const QString \&}]{id,  }\item[{const QString \&}]{parent\+Id,  }\item[{const QString \&}]{name,  }\item[{const QString \&}]{cmdline,  }\item[{const QString \&}]{user,  }\item[{const QString \&}]{host,  }\item[{bool}]{suspended,  }\item[{int}]{step\+Count,  }\item[{int}]{priority,  }\item[{TFarm\+Platform}]{platform }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01065                                                                          \{}
\DoxyCodeLine{01066   \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task =}
\DoxyCodeLine{01067       \textcolor{keyword}{new} \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}}(\textcolor{keywordtype}{id}, name, cmdline, user, host, stepCount, priority);}
\DoxyCodeLine{01068   task-\/>m\_submissionDate = QDateTime::currentDateTime();}
\DoxyCodeLine{01069   task-\/>\mbox{\hyperlink{class_t_farm_task_a93df061d1b990dc0c8f8149616b3fb0e}{m\_parentId}}       = parentId;}
\DoxyCodeLine{01070   task-\/>m\_platform       = platform;}
\DoxyCodeLine{01071 }
\DoxyCodeLine{01072   m\_tasks.insert(std::make\_pair(\mbox{\hyperlink{class_task_id}{TaskId}}(\textcolor{keywordtype}{id}), task));}
\DoxyCodeLine{01073 }
\DoxyCodeLine{01074   m\_userLog-\/>info(\textcolor{stringliteral}{"{}Task "{}} + task-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}} + \textcolor{stringliteral}{"{} received at "{}} +}
\DoxyCodeLine{01075                   task-\/>m\_submissionDate.toString() + \textcolor{stringliteral}{"{}\(\backslash\)n"{}});}
\DoxyCodeLine{01076   m\_userLog-\/>info(\textcolor{stringliteral}{"{}\(\backslash\)"{}"{}} + task-\/>getCommandLine() + \textcolor{stringliteral}{"{}\(\backslash\)"{}\(\backslash\)n"{}});}
\DoxyCodeLine{01077 }
\DoxyCodeLine{01078   \textcolor{keywordflow}{if} (suspended) task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} = Suspended;}
\DoxyCodeLine{01079 }
\DoxyCodeLine{01080   \textcolor{keywordflow}{return} task;}
\DoxyCodeLine{01081 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a287bf05b58ad6b81a4ea857d48a2ed72}\label{class_farm_controller_a287bf05b58ad6b81a4ea857d48a2ed72}} 
\index{FarmController@{FarmController}!doRestartTask@{doRestartTask}}
\index{doRestartTask@{doRestartTask}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{doRestartTask()}{doRestartTask()}}
{\footnotesize\ttfamily void Farm\+Controller\+::do\+Restart\+Task (\begin{DoxyParamCaption}\item[{const QString \&}]{id,  }\item[{bool}]{from\+Client,  }\item[{\mbox{\hyperlink{class_farm_server_proxy}{Farm\+Server\+Proxy}} $\ast$}]{server }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01590                                                             \{}
\DoxyCodeLine{01591   map<TaskId, CtrlFarmTask *>::iterator it = m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(\textcolor{keywordtype}{id}));}
\DoxyCodeLine{01592   \textcolor{keywordflow}{if} (it != m\_tasks.end()) \{}
\DoxyCodeLine{01593     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = it-\/>second;}
\DoxyCodeLine{01594     \textcolor{keywordflow}{if} (task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} != Running) \{}
\DoxyCodeLine{01595       \textcolor{keywordflow}{if} (fromClient) \{}
\DoxyCodeLine{01596         task-\/>m\_failedOnServers.clear();}
\DoxyCodeLine{01597         task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} = Waiting;}
\DoxyCodeLine{01598       \}}
\DoxyCodeLine{01599 }
\DoxyCodeLine{01600       task-\/>m\_completionDate = QDateTime();}
\DoxyCodeLine{01601       task-\/>\mbox{\hyperlink{class_t_farm_task_af74d2cb63a6c62785364b7c87b9e2aff}{m\_server}}         = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01602       task-\/>m\_serverId       = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01603       task-\/>m\_failedSteps = task-\/>m\_successfullSteps = 0;}
\DoxyCodeLine{01604       task-\/>m\_failureCount                           = 0;}
\DoxyCodeLine{01605 }
\DoxyCodeLine{01606       \textcolor{keywordflow}{if} (!task-\/>m\_subTasks.empty()) \{}
\DoxyCodeLine{01607         vector<QString>::iterator itSubTaskId = task-\/>m\_subTasks.begin();}
\DoxyCodeLine{01608         \textcolor{keywordflow}{for} (; itSubTaskId != task-\/>m\_subTasks.end(); ++itSubTaskId) \{}
\DoxyCodeLine{01609           map<TaskId, CtrlFarmTask *>::iterator itSubTask =}
\DoxyCodeLine{01610               m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(*itSubTaskId));}
\DoxyCodeLine{01611           \textcolor{keywordflow}{if} (itSubTask != m\_tasks.end()) \{}
\DoxyCodeLine{01612             \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *subtask = itSubTask-\/>second;}
\DoxyCodeLine{01613             \textcolor{keywordflow}{if} (fromClient) \{}
\DoxyCodeLine{01614               subtask-\/>m\_failedOnServers.clear();}
\DoxyCodeLine{01615               subtask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} = Waiting;}
\DoxyCodeLine{01616             \}}
\DoxyCodeLine{01617 }
\DoxyCodeLine{01618             subtask-\/>m\_completionDate = QDateTime();}
\DoxyCodeLine{01619             subtask-\/>\mbox{\hyperlink{class_t_farm_task_af74d2cb63a6c62785364b7c87b9e2aff}{m\_server}}         = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01620             subtask-\/>m\_serverId       = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01621             subtask-\/>m\_failedSteps = subtask-\/>m\_successfullSteps = 0;}
\DoxyCodeLine{01622             subtask-\/>m\_failureCount                              = 0;}
\DoxyCodeLine{01623           \}}
\DoxyCodeLine{01624         \}}
\DoxyCodeLine{01625       \}}
\DoxyCodeLine{01626 }
\DoxyCodeLine{01627       \mbox{\hyperlink{class_t_thread_1_1_executor}{TThread::Executor}} executor;}
\DoxyCodeLine{01628       executor.\mbox{\hyperlink{class_t_thread_1_1_executor_af31c8db8ac72df4c342e7769e95e2135}{addTask}}(\textcolor{keyword}{new} \mbox{\hyperlink{class_task_starter}{TaskStarter}}(\textcolor{keyword}{this}, task, server));}
\DoxyCodeLine{01629     \}}
\DoxyCodeLine{01630   \}}
\DoxyCodeLine{01631 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_aa734a34673db78dc72e4bd004046c1aa}\label{class_farm_controller_aa734a34673db78dc72e4bd004046c1aa}} 
\index{FarmController@{FarmController}!execute@{execute}}
\index{execute@{execute}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{execute()}{execute()}}
{\footnotesize\ttfamily QString Farm\+Controller\+::execute (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classvector}{vector}}$<$ QString $>$ \&}]{argv }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00807                                                            \{}
\DoxyCodeLine{00808   QMutexLocker sl(\&m\_mutex);}
\DoxyCodeLine{00809 }
\DoxyCodeLine{00810   \textcolor{keywordflow}{if} (argv.size() > 0) \{}
\DoxyCodeLine{00811 \textcolor{preprocessor}{\#ifdef TRACE}}
\DoxyCodeLine{00812     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < argv.size(); i++) \{}
\DoxyCodeLine{00813       m\_userLog-\/>info(argv[i]);}
\DoxyCodeLine{00814     \}}
\DoxyCodeLine{00815     m\_userLog-\/>info(\textcolor{charliteral}{'\(\backslash\)n'});}
\DoxyCodeLine{00816 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00817 }
\DoxyCodeLine{00818     \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}addTask@string@string"{}} \&\& argv.size() > 5) \{}
\DoxyCodeLine{00819       \textcolor{comment}{// ordine degli argomenti:}}
\DoxyCodeLine{00820       \textcolor{comment}{// name, cmdline, user, host, suspended, priority, platform}}
\DoxyCodeLine{00821 }
\DoxyCodeLine{00822       \textcolor{keywordtype}{bool} suspended;}
\DoxyCodeLine{00823       fromStr((\textcolor{keywordtype}{int} \&)suspended, argv[5]);}
\DoxyCodeLine{00824 }
\DoxyCodeLine{00825       \textcolor{keywordtype}{int} priority;}
\DoxyCodeLine{00826       fromStr(priority, argv[6]);}
\DoxyCodeLine{00827 }
\DoxyCodeLine{00828       TFarmPlatform platform;}
\DoxyCodeLine{00829       fromStr((\textcolor{keywordtype}{int} \&)platform, argv[7]);}
\DoxyCodeLine{00830       \textcolor{keywordflow}{return} addTask(argv[1], argv[2], argv[3], argv[4], suspended, priority,}
\DoxyCodeLine{00831                      platform);}
\DoxyCodeLine{00832 }
\DoxyCodeLine{00833     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}addTask@TFarmTask"{}} \&\& argv.size() > 5) \{}
\DoxyCodeLine{00834       \textcolor{comment}{// ordine degli argomenti:}}
\DoxyCodeLine{00835       \textcolor{comment}{// name, cmdline, user, host, suspended, priority,}}
\DoxyCodeLine{00836 }
\DoxyCodeLine{00837       \textcolor{keywordtype}{bool} suspended;}
\DoxyCodeLine{00838 }
\DoxyCodeLine{00839       fromStr((\textcolor{keywordtype}{int} \&)suspended, argv[5]);}
\DoxyCodeLine{00840 }
\DoxyCodeLine{00841       \textcolor{keywordtype}{int} priority;}
\DoxyCodeLine{00842       fromStr(priority, argv[6]);}
\DoxyCodeLine{00843 }
\DoxyCodeLine{00844       \mbox{\hyperlink{class_t_farm_task_group}{TFarmTaskGroup}} task(\textcolor{stringliteral}{"{}"{}}, argv[1], argv[2], argv[3], argv[4], priority, 50);}
\DoxyCodeLine{00845 }
\DoxyCodeLine{00846       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 7; i < (int)argv.size(); i += 5) \{}
\DoxyCodeLine{00847         \textcolor{comment}{// ordine degli argomenti:}}
\DoxyCodeLine{00848         \textcolor{comment}{// name, cmdline, user, host, priority,}}
\DoxyCodeLine{00849 }
\DoxyCodeLine{00850         \textcolor{keywordtype}{int} subTaskPriority;}
\DoxyCodeLine{00851 }
\DoxyCodeLine{00852         fromStr(subTaskPriority, argv[i + 4]);}
\DoxyCodeLine{00853 }
\DoxyCodeLine{00854         \mbox{\hyperlink{class_t_farm_task}{TFarmTask}} *subTask =}
\DoxyCodeLine{00855             \textcolor{keyword}{new} \mbox{\hyperlink{class_t_farm_task}{TFarmTask}}(\textcolor{stringliteral}{"{}"{}}, argv[i], argv[i + 1], argv[i + 2], argv[i + 3],}
\DoxyCodeLine{00856                           subTaskPriority, 50);}
\DoxyCodeLine{00857 }
\DoxyCodeLine{00858         task.addTask(subTask);}
\DoxyCodeLine{00859       \}}
\DoxyCodeLine{00860 }
\DoxyCodeLine{00861       \textcolor{keywordflow}{return} addTask(task, suspended);}
\DoxyCodeLine{00862     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}addTask@TFarmTask\_2"{}} \&\& argv.size() > 7) \{}
\DoxyCodeLine{00863       \textcolor{comment}{// ordine degli argomenti:}}
\DoxyCodeLine{00864       \textcolor{comment}{// name, cmdline, user, host, suspended, stepCount, priority, platform}}
\DoxyCodeLine{00865 }
\DoxyCodeLine{00866       \textcolor{keywordtype}{int} suspended;}
\DoxyCodeLine{00867       fromStr(suspended, argv[5]);}
\DoxyCodeLine{00868 }
\DoxyCodeLine{00869       \textcolor{keywordtype}{int} stepCount;}
\DoxyCodeLine{00870       fromStr(stepCount, argv[6]);}
\DoxyCodeLine{00871 }
\DoxyCodeLine{00872       \textcolor{keywordtype}{int} priority;}
\DoxyCodeLine{00873       fromStr(priority, argv[7]);}
\DoxyCodeLine{00874 }
\DoxyCodeLine{00875       TFarmPlatform platform;}
\DoxyCodeLine{00876       fromStr((\textcolor{keywordtype}{int} \&)platform, argv[8]);}
\DoxyCodeLine{00877 }
\DoxyCodeLine{00878       \mbox{\hyperlink{class_t_farm_task_group}{TFarmTaskGroup}} task(\textcolor{stringliteral}{"{}"{}}, argv[1], argv[2], argv[3], argv[4], stepCount,}
\DoxyCodeLine{00879                           priority);}
\DoxyCodeLine{00880       task.m\_platform = platform;}
\DoxyCodeLine{00881 }
\DoxyCodeLine{00882       \textcolor{keywordtype}{int} depCount;}
\DoxyCodeLine{00883       fromStr(depCount, argv[9]);}
\DoxyCodeLine{00884 }
\DoxyCodeLine{00885       \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{00886       \textcolor{keywordflow}{for} (; i < depCount; ++i) \{}
\DoxyCodeLine{00887         QString depTaskId = argv[10 + i];}
\DoxyCodeLine{00888         task.m\_dependencies-\/>add(depTaskId);}
\DoxyCodeLine{00889       \}}
\DoxyCodeLine{00890 }
\DoxyCodeLine{00891       \textcolor{keywordflow}{for} (i = 10 + depCount; i < (int)argv.size(); i += 6) \{}
\DoxyCodeLine{00892         \textcolor{comment}{// ordine degli argomenti:}}
\DoxyCodeLine{00893         \textcolor{comment}{// name, cmdline, user, host, stepCount, priority,}}
\DoxyCodeLine{00894 }
\DoxyCodeLine{00895         \textcolor{keywordtype}{int} subTaskStepCount;}
\DoxyCodeLine{00896         fromStr(subTaskStepCount, argv[i + 4]);}
\DoxyCodeLine{00897 }
\DoxyCodeLine{00898         \textcolor{keywordtype}{int} subTaskPriority;}
\DoxyCodeLine{00899         fromStr(subTaskPriority, argv[i + 5]);}
\DoxyCodeLine{00900 }
\DoxyCodeLine{00901         \mbox{\hyperlink{class_t_farm_task}{TFarmTask}} *subTask =}
\DoxyCodeLine{00902             \textcolor{keyword}{new} \mbox{\hyperlink{class_t_farm_task}{TFarmTask}}(\textcolor{stringliteral}{"{}"{}}, argv[i], argv[i + 1], argv[i + 2], argv[i + 3],}
\DoxyCodeLine{00903                           subTaskStepCount, subTaskPriority);}
\DoxyCodeLine{00904 }
\DoxyCodeLine{00905         subTask-\/>m\_dependencies =}
\DoxyCodeLine{00906             \textcolor{keyword}{new} \mbox{\hyperlink{class_t_farm_task_1_1_dependencies}{TFarmTask::Dependencies}}(*task.m\_dependencies);}
\DoxyCodeLine{00907         subTask-\/>m\_platform = platform;}
\DoxyCodeLine{00908 }
\DoxyCodeLine{00909         task.addTask(subTask);}
\DoxyCodeLine{00910       \}}
\DoxyCodeLine{00911 }
\DoxyCodeLine{00912       \textcolor{keywordflow}{return} addTask(task, suspended != 0);}
\DoxyCodeLine{00913     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}removeTask"{}} \&\& argv.size() > 0) \{}
\DoxyCodeLine{00914       removeTask(argv[1]);}
\DoxyCodeLine{00915     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}suspendTask"{}} \&\& argv.size() > 0) \{}
\DoxyCodeLine{00916       suspendTask(argv[1]);}
\DoxyCodeLine{00917     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}activateTask"{}} \&\& argv.size() > 0) \{}
\DoxyCodeLine{00918       activateTask(argv[1]);}
\DoxyCodeLine{00919     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}restartTask"{}} \&\& argv.size() > 0) \{}
\DoxyCodeLine{00920       restartTask(argv[1]);}
\DoxyCodeLine{00921     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}getTasks@vector"{}}) \{}
\DoxyCodeLine{00922       \mbox{\hyperlink{classvector}{vector<QString>}} tasks;}
\DoxyCodeLine{00923       getTasks(tasks);}
\DoxyCodeLine{00924 }
\DoxyCodeLine{00925       QString reply;}
\DoxyCodeLine{00926       std::vector<QString>::iterator it = tasks.begin();}
\DoxyCodeLine{00927       \textcolor{keywordflow}{for} (; it != tasks.end(); ++it) \{}
\DoxyCodeLine{00928         reply += *it;}
\DoxyCodeLine{00929         reply += \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00930       \}}
\DoxyCodeLine{00931 }
\DoxyCodeLine{00932       \textcolor{keywordflow}{return} reply;}
\DoxyCodeLine{00933     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}getTasks@string@vector"{}}) \{}
\DoxyCodeLine{00934       QString parentId;}
\DoxyCodeLine{00935       \textcolor{keywordflow}{if} (argv.size() > 1) parentId = argv[1];}
\DoxyCodeLine{00936 }
\DoxyCodeLine{00937       \mbox{\hyperlink{classvector}{vector<QString>}} tasks;}
\DoxyCodeLine{00938       getTasks(parentId, tasks);}
\DoxyCodeLine{00939 }
\DoxyCodeLine{00940       QString reply;}
\DoxyCodeLine{00941       std::vector<QString>::iterator it = tasks.begin();}
\DoxyCodeLine{00942       \textcolor{keywordflow}{for} (; it != tasks.end(); ++it) \{}
\DoxyCodeLine{00943         reply += *it;}
\DoxyCodeLine{00944         reply += \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00945       \}}
\DoxyCodeLine{00946 }
\DoxyCodeLine{00947       \textcolor{keywordflow}{if} (reply.length() > 0) reply = reply.left(reply.length() -\/ 1);}
\DoxyCodeLine{00948       \textcolor{keywordflow}{return} reply;}
\DoxyCodeLine{00949     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}getTasks@string@vector\$TaskShortInfo"{}} \&\&}
\DoxyCodeLine{00950                argv.size() > 0) \{}
\DoxyCodeLine{00951       vector<TaskShortInfo> tasks;}
\DoxyCodeLine{00952       getTasks(argv[1], tasks);}
\DoxyCodeLine{00953 }
\DoxyCodeLine{00954       QString reply;}
\DoxyCodeLine{00955       std::vector<TaskShortInfo>::iterator it = tasks.begin();}
\DoxyCodeLine{00956       \textcolor{keywordflow}{for} (; it != tasks.end(); ++it) \{}
\DoxyCodeLine{00957         reply += (*it).m\_id;}
\DoxyCodeLine{00958         reply += \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00959         reply += (*it).m\_name;}
\DoxyCodeLine{00960         reply += \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00961         reply += QString::number((*it).m\_status);}
\DoxyCodeLine{00962         reply += \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00963       \}}
\DoxyCodeLine{00964       \textcolor{keywordflow}{if} (reply.length() > 0) reply = reply.left(reply.size() -\/ 1);}
\DoxyCodeLine{00965 }
\DoxyCodeLine{00966       \textcolor{keywordflow}{return} reply;}
\DoxyCodeLine{00967     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}queryTaskInfo"{}} \&\& argv.size() > 1) \{}
\DoxyCodeLine{00968       \mbox{\hyperlink{class_t_farm_task}{TFarmTask}} task;}
\DoxyCodeLine{00969       queryTaskInfo(argv[1], task);}
\DoxyCodeLine{00970       \textcolor{keywordflow}{return} toString(task, 1);}
\DoxyCodeLine{00971     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}queryTaskInfo\_2"{}} \&\& argv.size() > 1) \{}
\DoxyCodeLine{00972       \mbox{\hyperlink{class_t_farm_task}{TFarmTask}} task;}
\DoxyCodeLine{00973       queryTaskInfo(argv[1], task);}
\DoxyCodeLine{00974       \textcolor{keywordflow}{return} toString(task, 2);}
\DoxyCodeLine{00975     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}queryTaskShortInfo"{}} \&\& argv.size() > 1) \{}
\DoxyCodeLine{00976       QString parentId, name;}
\DoxyCodeLine{00977       TaskState status;}
\DoxyCodeLine{00978       queryTaskShortInfo(argv[1], parentId, name, status);}
\DoxyCodeLine{00979 }
\DoxyCodeLine{00980       QString reply;}
\DoxyCodeLine{00981       reply += parentId;}
\DoxyCodeLine{00982       reply += \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00983       reply += name;}
\DoxyCodeLine{00984       reply += \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00985       reply += QString::number((\textcolor{keywordtype}{int})(status));}
\DoxyCodeLine{00986       \textcolor{keywordflow}{return} reply;}
\DoxyCodeLine{00987     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}taskSubmissionError"{}} \&\& argv.size() > 2) \{}
\DoxyCodeLine{00988       QString taskId = argv[1];}
\DoxyCodeLine{00989       \textcolor{keywordtype}{int} errCode;}
\DoxyCodeLine{00990       fromStr(errCode, argv[2]);}
\DoxyCodeLine{00991       taskSubmissionError(taskId, errCode);}
\DoxyCodeLine{00992       \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00993     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}taskProgress"{}} \&\& argv.size() > 5) \{}
\DoxyCodeLine{00994       \textcolor{keywordtype}{int} step, stepCount, frameNumber;}
\DoxyCodeLine{00995       step        = argv[2].toInt();}
\DoxyCodeLine{00996       stepCount   = argv[3].toInt();}
\DoxyCodeLine{00997       frameNumber = argv[4].toInt();}
\DoxyCodeLine{00998 }
\DoxyCodeLine{00999       FrameState state;}
\DoxyCodeLine{01000       state = (FrameState)argv[5].toInt();}
\DoxyCodeLine{01001       taskProgress(argv[1], step, stepCount, frameNumber, state);}
\DoxyCodeLine{01002       \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01003     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}taskCompleted"{}} \&\& argv.size() > 2) \{}
\DoxyCodeLine{01004       QString taskId = argv[1];}
\DoxyCodeLine{01005       \textcolor{keywordtype}{int} exitCode;}
\DoxyCodeLine{01006       exitCode = argv[2].toInt();}
\DoxyCodeLine{01007 }
\DoxyCodeLine{01008       taskCompleted(taskId, exitCode);}
\DoxyCodeLine{01009       \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01010     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}getServers"{}}) \{}
\DoxyCodeLine{01011       vector<ServerIdentity> servers;}
\DoxyCodeLine{01012       getServers(servers);}
\DoxyCodeLine{01013 }
\DoxyCodeLine{01014       QString reply;}
\DoxyCodeLine{01015       std::vector<ServerIdentity>::iterator it = servers.begin();}
\DoxyCodeLine{01016       \textcolor{keywordflow}{for} (; it != servers.end(); ++it) \{}
\DoxyCodeLine{01017         reply += (*it).m\_id;}
\DoxyCodeLine{01018         reply += \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{01019         reply += (*it).m\_name;}
\DoxyCodeLine{01020         reply += \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{01021       \}}
\DoxyCodeLine{01022 }
\DoxyCodeLine{01023       \textcolor{keywordflow}{if} (reply.length() > 0) reply = reply.left(reply.size() -\/ 1);}
\DoxyCodeLine{01024 }
\DoxyCodeLine{01025       \textcolor{keywordflow}{return} reply;}
\DoxyCodeLine{01026     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}queryServerState2"{}} \&\& argv.size() > 0) \{}
\DoxyCodeLine{01027       ServerState state = queryServerState2(argv[1]);}
\DoxyCodeLine{01028       \textcolor{keywordflow}{return} QString::number(state);}
\DoxyCodeLine{01029     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}queryServerInfo"{}} \&\& argv.size() > 0) \{}
\DoxyCodeLine{01030       \mbox{\hyperlink{class_server_info}{ServerInfo}} info;}
\DoxyCodeLine{01031       queryServerInfo(argv[1], info);}
\DoxyCodeLine{01032       \textcolor{keywordflow}{return} toString(info);}
\DoxyCodeLine{01033     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}activateServer"{}} \&\& argv.size() > 0) \{}
\DoxyCodeLine{01034       activateServer(argv[1]);}
\DoxyCodeLine{01035       \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01036     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}deactivateServer"{}} \&\& argv.size() > 1) \{}
\DoxyCodeLine{01037       \textcolor{keywordtype}{int} completeRunningTask = \textcolor{keyword}{true};}
\DoxyCodeLine{01038       fromStr(completeRunningTask, argv[2]);}
\DoxyCodeLine{01039       deactivateServer(argv[1], !!completeRunningTask);}
\DoxyCodeLine{01040       \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01041     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}attachServer"{}} \&\& argv.size() > 3) \{}
\DoxyCodeLine{01042       \textcolor{keywordtype}{int} port;}
\DoxyCodeLine{01043       fromStr(port, argv[3]);}
\DoxyCodeLine{01044       attachServer(argv[1], argv[2], port);}
\DoxyCodeLine{01045       \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01046     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}detachServer"{}} \&\& argv.size() > 3) \{}
\DoxyCodeLine{01047       \textcolor{keywordtype}{int} port;}
\DoxyCodeLine{01048       fromStr(port, argv[3]);}
\DoxyCodeLine{01049       detachServer(argv[1], argv[2], port);}
\DoxyCodeLine{01050       \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01051     \}}
\DoxyCodeLine{01052   \}}
\DoxyCodeLine{01053 \textcolor{preprocessor}{\#ifdef TRACE}}
\DoxyCodeLine{01054   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01055     m\_userLog-\/>info(\textcolor{stringliteral}{"{}empty command\(\backslash\)n"{}});}
\DoxyCodeLine{01056 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01057   \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01058 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a325905caa8033aa67fae2ef5c652c6ca}\label{class_farm_controller_a325905caa8033aa67fae2ef5c652c6ca}} 
\index{FarmController@{FarmController}!getNextTaskToStart@{getNextTaskToStart}}
\index{getNextTaskToStart@{getNextTaskToStart}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{getNextTaskToStart()}{getNextTaskToStart()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_ctrl_farm_task}{Ctrl\+Farm\+Task}} $\ast$ Farm\+Controller\+::get\+Next\+Task\+To\+Start (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_ctrl_farm_task}{Ctrl\+Farm\+Task}} $\ast$}]{task,  }\item[{\mbox{\hyperlink{class_farm_server_proxy}{Farm\+Server\+Proxy}} $\ast$}]{server }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01198                                                                           \{}
\DoxyCodeLine{01199   QMutexLocker sl(\&m\_mutex);}
\DoxyCodeLine{01200 }
\DoxyCodeLine{01201   \textcolor{keywordtype}{int} maxPriority         = 0;}
\DoxyCodeLine{01202   \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *candidate = 0;}
\DoxyCodeLine{01203 }
\DoxyCodeLine{01204   map<TaskId, CtrlFarmTask *>::iterator itTask = m\_tasks.begin();}
\DoxyCodeLine{01205   \textcolor{keywordflow}{for} (; itTask != m\_tasks.end(); ++itTask) \{}
\DoxyCodeLine{01206     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = itTask-\/>second;}
\DoxyCodeLine{01207     \textcolor{keywordflow}{if} (except == task) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01208     \textcolor{keywordflow}{if} ((task-\/>m\_platform == NoPlatform ||}
\DoxyCodeLine{01209          task-\/>m\_platform == server-\/>m\_platform) \&\&}
\DoxyCodeLine{01210         task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Waiting \&\& task-\/>\mbox{\hyperlink{class_t_farm_task_a7b0083ed49f8937a93c2de029352995c}{m\_priority}} > maxPriority) \{}
\DoxyCodeLine{01211       \textcolor{keywordtype}{bool} dependenciesCompleted = \textcolor{keyword}{true};}
\DoxyCodeLine{01212 }
\DoxyCodeLine{01213       \textcolor{keywordflow}{if} (task-\/>m\_dependencies) \{}
\DoxyCodeLine{01214         \textcolor{keywordtype}{int} count = task-\/>m\_dependencies-\/>getTaskCount();}
\DoxyCodeLine{01215         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < count; ++i) \{}
\DoxyCodeLine{01216           TFarmTask::Id \textcolor{keywordtype}{id} = task-\/>m\_dependencies-\/>getTaskId(i);}
\DoxyCodeLine{01217           map<TaskId, CtrlFarmTask *>::iterator itDepTask =}
\DoxyCodeLine{01218               m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(\textcolor{keywordtype}{id}));}
\DoxyCodeLine{01219           \textcolor{keywordflow}{if} (itDepTask != m\_tasks.end()) \{}
\DoxyCodeLine{01220             \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *depTask = itDepTask-\/>second;}
\DoxyCodeLine{01221             \textcolor{keywordflow}{if} (depTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} != Completed) \{}
\DoxyCodeLine{01222               dependenciesCompleted = \textcolor{keyword}{false};}
\DoxyCodeLine{01223               \textcolor{keywordflow}{break};}
\DoxyCodeLine{01224             \}}
\DoxyCodeLine{01225           \}}
\DoxyCodeLine{01226         \}}
\DoxyCodeLine{01227       \}}
\DoxyCodeLine{01228 }
\DoxyCodeLine{01229       \textcolor{keywordflow}{if} (dependenciesCompleted) \{}
\DoxyCodeLine{01230         maxPriority = task-\/>\mbox{\hyperlink{class_t_farm_task_a7b0083ed49f8937a93c2de029352995c}{m\_priority}};}
\DoxyCodeLine{01231         candidate   = task;}
\DoxyCodeLine{01232       \}}
\DoxyCodeLine{01233     \}}
\DoxyCodeLine{01234   \}}
\DoxyCodeLine{01235 }
\DoxyCodeLine{01236   \textcolor{keywordflow}{return} candidate;}
\DoxyCodeLine{01237 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_aba9d90d93cc4900e7df0ea08ef514e2c}\label{class_farm_controller_aba9d90d93cc4900e7df0ea08ef514e2c}} 
\index{FarmController@{FarmController}!getServers@{getServers}}
\index{getServers@{getServers}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{getServers()}{getServers()}}
{\footnotesize\ttfamily void Farm\+Controller\+::get\+Servers (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classvector}{vector}}$<$ \mbox{\hyperlink{class_server_identity}{Server\+Identity}} $>$ \&}]{servers }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01997                                                                \{}
\DoxyCodeLine{01998   map<QString, FarmServerProxy *>::iterator it = m\_servers.begin();}
\DoxyCodeLine{01999   \textcolor{keywordflow}{for} (; it != m\_servers.end(); ++it) \{}
\DoxyCodeLine{02000     \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *server = it-\/>second;}
\DoxyCodeLine{02001     servers.push\_back(\mbox{\hyperlink{class_server_identity}{ServerIdentity}}(server-\/>m\_addr, server-\/>m\_hostName));}
\DoxyCodeLine{02002   \}}
\DoxyCodeLine{02003 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_aeae3f4ef04cdaab0e6e5aaebe0f1385b}\label{class_farm_controller_aeae3f4ef04cdaab0e6e5aaebe0f1385b}} 
\index{FarmController@{FarmController}!getServerState@{getServerState}}
\index{getServerState@{getServerState}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{getServerState()}{getServerState()}}
{\footnotesize\ttfamily Server\+State Farm\+Controller\+::get\+Server\+State (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_farm_server_proxy}{Farm\+Server\+Proxy}} $\ast$}]{server,  }\item[{QString \&}]{task\+Id }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01334                                                             \{}
\DoxyCodeLine{01335   ServerState state;}
\DoxyCodeLine{01336 }
\DoxyCodeLine{01337   \textcolor{keywordtype}{bool} connected = server-\/>testConnection(500);}
\DoxyCodeLine{01338   \textcolor{keywordflow}{if} (!connected) \{}
\DoxyCodeLine{01339     taskId = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01340     state  = Down;}
\DoxyCodeLine{01341   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01342     \textcolor{keywordflow}{if} (server-\/>m\_offline)}
\DoxyCodeLine{01343       \textcolor{keywordflow}{return} Offline;}
\DoxyCodeLine{01344     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (server-\/>getTasks().size() > 0) \{}
\DoxyCodeLine{01345       taskId = server-\/>getTasks()[0];}
\DoxyCodeLine{01346       state  = Busy;}
\DoxyCodeLine{01347     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01348       taskId = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01349       state  = Ready;}
\DoxyCodeLine{01350     \}}
\DoxyCodeLine{01351   \}}
\DoxyCodeLine{01352   \textcolor{keywordflow}{return} state;}
\DoxyCodeLine{01353 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a4789807c7039fbb5fe1193f3baaeba5a}\label{class_farm_controller_a4789807c7039fbb5fe1193f3baaeba5a}} 
\index{FarmController@{FarmController}!getTasks@{getTasks}}
\index{getTasks@{getTasks}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{getTasks()}{getTasks()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily void Farm\+Controller\+::get\+Tasks (\begin{DoxyParamCaption}\item[{const QString \&}]{parent\+Id,  }\item[{\mbox{\hyperlink{classvector}{vector}}$<$ QString $>$ \&}]{tasks }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01645                                                                              \{}
\DoxyCodeLine{01646   map<TaskId, CtrlFarmTask *>::iterator it = m\_tasks.begin();}
\DoxyCodeLine{01647   \textcolor{keywordflow}{for} (; it != m\_tasks.end(); ++it) \{}
\DoxyCodeLine{01648     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = it-\/>second;}
\DoxyCodeLine{01649     \textcolor{keywordflow}{if} (task-\/>\mbox{\hyperlink{class_t_farm_task_a93df061d1b990dc0c8f8149616b3fb0e}{m\_parentId}} == parentId) tasks.push\_back(task-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}});}
\DoxyCodeLine{01650   \}}
\DoxyCodeLine{01651 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a5ec7fe53f587f17ad91ecff738f4d12a}\label{class_farm_controller_a5ec7fe53f587f17ad91ecff738f4d12a}} 
\index{FarmController@{FarmController}!getTasks@{getTasks}}
\index{getTasks@{getTasks}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{getTasks()}{getTasks()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily void Farm\+Controller\+::get\+Tasks (\begin{DoxyParamCaption}\item[{const QString \&}]{parent\+Id,  }\item[{\mbox{\hyperlink{classvector}{vector}}$<$ \mbox{\hyperlink{class_task_short_info}{Task\+Short\+Info}} $>$ \&}]{tasks }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01656                                                             \{}
\DoxyCodeLine{01657   tasks.clear();}
\DoxyCodeLine{01658 }
\DoxyCodeLine{01659   map<TaskId, CtrlFarmTask *>::iterator it = m\_tasks.begin();}
\DoxyCodeLine{01660   \textcolor{keywordflow}{for} (; it != m\_tasks.end(); ++it) \{}
\DoxyCodeLine{01661     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = it-\/>second;}
\DoxyCodeLine{01662     \textcolor{keywordflow}{if} (task-\/>\mbox{\hyperlink{class_t_farm_task_a93df061d1b990dc0c8f8149616b3fb0e}{m\_parentId}} == parentId)}
\DoxyCodeLine{01663       tasks.push\_back(\mbox{\hyperlink{class_task_short_info}{TaskShortInfo}}(task-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}}, task-\/>\mbox{\hyperlink{class_t_farm_task_a14686e563d198398938fa8a9ed8ffff2}{m\_name}}, task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}}));}
\DoxyCodeLine{01664   \}}
\DoxyCodeLine{01665 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_af68943f16973d15d549751696d0bf1c6}\label{class_farm_controller_af68943f16973d15d549751696d0bf1c6}} 
\index{FarmController@{FarmController}!getTasks@{getTasks}}
\index{getTasks@{getTasks}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{getTasks()}{getTasks()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily void Farm\+Controller\+::get\+Tasks (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classvector}{vector}}$<$ QString $>$ \&}]{tasks }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01635                                                     \{}
\DoxyCodeLine{01636   map<TaskId, CtrlFarmTask *>::iterator it = m\_tasks.begin();}
\DoxyCodeLine{01637   \textcolor{keywordflow}{for} (; it != m\_tasks.end(); ++it) \{}
\DoxyCodeLine{01638     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = it-\/>second;}
\DoxyCodeLine{01639     tasks.push\_back(task-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}});}
\DoxyCodeLine{01640   \}}
\DoxyCodeLine{01641 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a3bd6793647784ee2dae83d1e0d97c06d}\label{class_farm_controller_a3bd6793647784ee2dae83d1e0d97c06d}} 
\index{FarmController@{FarmController}!getTaskToStart@{getTaskToStart}}
\index{getTaskToStart@{getTaskToStart}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{getTaskToStart()}{getTaskToStart()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_ctrl_farm_task}{Ctrl\+Farm\+Task}} $\ast$ Farm\+Controller\+::get\+Task\+To\+Start (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_farm_server_proxy}{Farm\+Server\+Proxy}} $\ast$}]{server = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01150                                                                     \{}
\DoxyCodeLine{01151   QMutexLocker sl(\&m\_mutex);}
\DoxyCodeLine{01152 }
\DoxyCodeLine{01153   \textcolor{keywordtype}{int} maxPriority         = 0;}
\DoxyCodeLine{01154   \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *candidate = 0;}
\DoxyCodeLine{01155 }
\DoxyCodeLine{01156   map<TaskId, CtrlFarmTask *>::iterator itTask = m\_tasks.begin();}
\DoxyCodeLine{01157   \textcolor{keywordflow}{for} (; itTask != m\_tasks.end(); ++itTask) \{}
\DoxyCodeLine{01158     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = itTask-\/>second;}
\DoxyCodeLine{01159     \textcolor{keywordflow}{if} ((!server || (task-\/>m\_platform == NoPlatform ||}
\DoxyCodeLine{01160                      task-\/>m\_platform == server-\/>m\_platform)) \&\&}
\DoxyCodeLine{01161         (((task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Waiting \&\& task-\/>\mbox{\hyperlink{class_t_farm_task_a7b0083ed49f8937a93c2de029352995c}{m\_priority}} > maxPriority) ||}
\DoxyCodeLine{01162           (task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Aborted \&\& task-\/>m\_failureCount < 3)) \&\&}
\DoxyCodeLine{01163              task-\/>\mbox{\hyperlink{class_t_farm_task_a93df061d1b990dc0c8f8149616b3fb0e}{m\_parentId}} != \textcolor{stringliteral}{"{}"{}})) \{}
\DoxyCodeLine{01164       \textcolor{keywordtype}{bool} dependenciesCompleted = \textcolor{keyword}{true};}
\DoxyCodeLine{01165 }
\DoxyCodeLine{01166       \textcolor{keywordflow}{if} (task-\/>m\_dependencies) \{}
\DoxyCodeLine{01167         \textcolor{keywordtype}{int} count = task-\/>m\_dependencies-\/>getTaskCount();}
\DoxyCodeLine{01168         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < count; ++i) \{}
\DoxyCodeLine{01169           TFarmTask::Id \textcolor{keywordtype}{id} = task-\/>m\_dependencies-\/>getTaskId(i);}
\DoxyCodeLine{01170           map<TaskId, CtrlFarmTask *>::iterator itDepTask =}
\DoxyCodeLine{01171               m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(\textcolor{keywordtype}{id}));}
\DoxyCodeLine{01172           \textcolor{keywordflow}{if} (itDepTask != m\_tasks.end()) \{}
\DoxyCodeLine{01173             \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *depTask = itDepTask-\/>second;}
\DoxyCodeLine{01174             \textcolor{keywordflow}{if} (depTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} != Completed) \{}
\DoxyCodeLine{01175               dependenciesCompleted = \textcolor{keyword}{false};}
\DoxyCodeLine{01176               \textcolor{keywordflow}{break};}
\DoxyCodeLine{01177             \}}
\DoxyCodeLine{01178           \}}
\DoxyCodeLine{01179         \}}
\DoxyCodeLine{01180       \}}
\DoxyCodeLine{01181 }
\DoxyCodeLine{01182       \textcolor{keywordflow}{if} (dependenciesCompleted) \{}
\DoxyCodeLine{01183         maxPriority = task-\/>\mbox{\hyperlink{class_t_farm_task_a7b0083ed49f8937a93c2de029352995c}{m\_priority}};}
\DoxyCodeLine{01184         candidate   = task;}
\DoxyCodeLine{01185       \}}
\DoxyCodeLine{01186     \}}
\DoxyCodeLine{01187   \}}
\DoxyCodeLine{01188 }
\DoxyCodeLine{01189   \textcolor{keywordflow}{return} candidate;}
\DoxyCodeLine{01190 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_aabd707c063df8b9900668deee0c5e7bc}\label{class_farm_controller_aabd707c063df8b9900668deee0c5e7bc}} 
\index{FarmController@{FarmController}!initServer@{initServer}}
\index{initServer@{initServer}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{initServer()}{initServer()}}
{\footnotesize\ttfamily void Farm\+Controller\+::init\+Server (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_farm_server_proxy}{Farm\+Server\+Proxy}} $\ast$}]{server }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01379                                                        \{}
\DoxyCodeLine{01380   \mbox{\hyperlink{class_t_farm_server_1_1_hw_info}{TFarmServer::HwInfo}} hwInfo;}
\DoxyCodeLine{01381   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01382     server-\/>queryHwInfo(hwInfo);}
\DoxyCodeLine{01383   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \& \textcolor{comment}{/*e*/}) \{}
\DoxyCodeLine{01384     \mbox{\hyperlink{class_t_thread_1_1_executor}{TThread::Executor}} exec;}
\DoxyCodeLine{01385     exec.\mbox{\hyperlink{class_t_thread_1_1_executor_af31c8db8ac72df4c342e7769e95e2135}{addTask}}(\textcolor{keyword}{new} \mbox{\hyperlink{class_server_initializer}{ServerInitializer}}(server));}
\DoxyCodeLine{01386     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01387   \}}
\DoxyCodeLine{01388 }
\DoxyCodeLine{01389   server-\/>m\_attached = \textcolor{keyword}{true};}
\DoxyCodeLine{01390   \textcolor{comment}{// server-\/>m\_maxTaskCount = hwInfo.m\_cpuCount;}}
\DoxyCodeLine{01391   server-\/>m\_maxTaskCount = 1;}
\DoxyCodeLine{01392 }
\DoxyCodeLine{01393   server-\/>m\_platform = hwInfo.m\_type;}
\DoxyCodeLine{01394 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_aeb6dc1e346ff64133b9be0063b0f91da}\label{class_farm_controller_aeb6dc1e346ff64133b9be0063b0f91da}} 
\index{FarmController@{FarmController}!load@{load}}
\index{load@{load}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{load()}{load()}}
{\footnotesize\ttfamily void Farm\+Controller\+::load (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02105                                              \{}
\DoxyCodeLine{02106   \mbox{\hyperlink{class_t_i_stream}{TIStream}} is(fp);}
\DoxyCodeLine{02107 }
\DoxyCodeLine{02108   m\_tasks.clear();}
\DoxyCodeLine{02109 }
\DoxyCodeLine{02110   \textcolor{keywordtype}{string} tagName;}
\DoxyCodeLine{02111   is.openChild(tagName);}
\DoxyCodeLine{02112 }
\DoxyCodeLine{02113   \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}tfarmdata"{}}) \{}
\DoxyCodeLine{02114     is.openChild(tagName);}
\DoxyCodeLine{02115     \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}tfarmtasks"{}}) \{}
\DoxyCodeLine{02116       \textcolor{keywordflow}{while} (!is.eos()) \{}
\DoxyCodeLine{02117         \mbox{\hyperlink{class_t_persist}{TPersist}} *p;}
\DoxyCodeLine{02118         is >> p;}
\DoxyCodeLine{02119 }
\DoxyCodeLine{02120         \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *\textcolor{keyword}{>}(p);}
\DoxyCodeLine{02121         \textcolor{keywordflow}{if} (task) m\_tasks.insert(make\_pair(\mbox{\hyperlink{class_task_id}{TaskId}}(task-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}}), task));}
\DoxyCodeLine{02122       \}}
\DoxyCodeLine{02123 }
\DoxyCodeLine{02124       is.closeChild();}
\DoxyCodeLine{02125     \}}
\DoxyCodeLine{02126   \}}
\DoxyCodeLine{02127 }
\DoxyCodeLine{02128   is.closeChild();}
\DoxyCodeLine{02129 }
\DoxyCodeLine{02130   map<TaskId, CtrlFarmTask *>::const\_iterator it = m\_tasks.begin();}
\DoxyCodeLine{02131   \textcolor{keywordflow}{for} (; it != m\_tasks.end(); ++it) \{}
\DoxyCodeLine{02132     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = it-\/>second;}
\DoxyCodeLine{02133     \textcolor{keywordflow}{if} (task-\/>\mbox{\hyperlink{class_t_farm_task_a93df061d1b990dc0c8f8149616b3fb0e}{m\_parentId}} != \textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{02134       map<TaskId, CtrlFarmTask *>::const\_iterator it2 =}
\DoxyCodeLine{02135           m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(task-\/>\mbox{\hyperlink{class_t_farm_task_a93df061d1b990dc0c8f8149616b3fb0e}{m\_parentId}}));}
\DoxyCodeLine{02136 }
\DoxyCodeLine{02137       \textcolor{keywordflow}{if} (it2 != m\_tasks.end()) \{}
\DoxyCodeLine{02138         \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *parent = it2-\/>second;}
\DoxyCodeLine{02139         parent-\/>m\_subTasks.push\_back(task-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}});}
\DoxyCodeLine{02140       \}}
\DoxyCodeLine{02141     \}}
\DoxyCodeLine{02142   \}}
\DoxyCodeLine{02143 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a0b2ce70799797e9ef316603481758f0d}\label{class_farm_controller_a0b2ce70799797e9ef316603481758f0d}} 
\index{FarmController@{FarmController}!loadServersData@{loadServersData}}
\index{loadServersData@{loadServersData}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{loadServersData()}{loadServersData()}}
{\footnotesize\ttfamily void Farm\+Controller\+::load\+Servers\+Data (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{global\+Root }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00712                                                                 \{}
\DoxyCodeLine{00713   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = globalRoot + \textcolor{stringliteral}{"{}config"{}} + \textcolor{stringliteral}{"{}servers.txt"{}};}
\DoxyCodeLine{00714 }
\DoxyCodeLine{00715   \mbox{\hyperlink{class_tifstream}{Tifstream}} is(fp);}
\DoxyCodeLine{00716   \textcolor{keywordflow}{while} (!is.eof()) \{}
\DoxyCodeLine{00717     \textcolor{keywordtype}{char} line[80];}
\DoxyCodeLine{00718     is.getline(line, 80);}
\DoxyCodeLine{00719 }
\DoxyCodeLine{00720     \textcolor{keywordflow}{if} (line[0] != \textcolor{charliteral}{'\#'} \&\& QString(line) != \textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{00721       stringstream iss(line);}
\DoxyCodeLine{00722 }
\DoxyCodeLine{00723       \textcolor{keywordtype}{char} hostName[512];}
\DoxyCodeLine{00724       \textcolor{keywordtype}{char} ipAddr[80];}
\DoxyCodeLine{00725       \textcolor{keywordtype}{int} port;}
\DoxyCodeLine{00726 }
\DoxyCodeLine{00727       iss >> hostName >> ipAddr >> port;}
\DoxyCodeLine{00728 }
\DoxyCodeLine{00729       \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *server = \textcolor{keyword}{new} \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}}(hostName, ipAddr, port);}
\DoxyCodeLine{00730       m\_servers.insert(make\_pair(QString(ipAddr), server));}
\DoxyCodeLine{00731 }
\DoxyCodeLine{00732       \textcolor{keywordflow}{if} (server-\/>testConnection(500)) \{}
\DoxyCodeLine{00733         initServer(server);}
\DoxyCodeLine{00734         \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00735           server-\/>attachController(m\_hostName, m\_addr, m\_port);}
\DoxyCodeLine{00736         \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&) \{}
\DoxyCodeLine{00737         \}}
\DoxyCodeLine{00738       \}}
\DoxyCodeLine{00739     \}}
\DoxyCodeLine{00740   \}}
\DoxyCodeLine{00741 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a0dea6e6db4c704a287dfa9491ed81de5}\label{class_farm_controller_a0dea6e6db4c704a287dfa9491ed81de5}} 
\index{FarmController@{FarmController}!queryServerInfo@{queryServerInfo}}
\index{queryServerInfo@{queryServerInfo}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{queryServerInfo()}{queryServerInfo()}}
{\footnotesize\ttfamily void Farm\+Controller\+::query\+Server\+Info (\begin{DoxyParamCaption}\item[{const QString \&}]{id,  }\item[{\mbox{\hyperlink{class_server_info}{Server\+Info}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02023                                                                         \{}
\DoxyCodeLine{02024   map<QString, FarmServerProxy *>::iterator it = m\_servers.find(\textcolor{keywordtype}{id});}
\DoxyCodeLine{02025   \textcolor{keywordflow}{if} (it != m\_servers.end()) \{}
\DoxyCodeLine{02026     \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *server = it-\/>second;}
\DoxyCodeLine{02027 }
\DoxyCodeLine{02028     info.m\_name       = server-\/>getHostName();}
\DoxyCodeLine{02029     info.m\_ipAddress  = server-\/>getIpAddress();}
\DoxyCodeLine{02030     info.m\_portNumber = QString::number(server-\/>getPort());}
\DoxyCodeLine{02031 }
\DoxyCodeLine{02032     info.m\_state = getServerState(server, info.m\_currentTaskId);}
\DoxyCodeLine{02033     \textcolor{keywordflow}{if} (info.m\_state != Down \&\& info.m\_state != ServerUnknown) \{}
\DoxyCodeLine{02034       \mbox{\hyperlink{class_t_farm_server_1_1_hw_info}{TFarmServer::HwInfo}} hwInfo;}
\DoxyCodeLine{02035       server-\/>queryHwInfo(hwInfo);}
\DoxyCodeLine{02036 }
\DoxyCodeLine{02037       info.m\_cpuCount     = hwInfo.m\_cpuCount;}
\DoxyCodeLine{02038       info.m\_totPhysMem   = hwInfo.m\_totPhysMem;}
\DoxyCodeLine{02039       info.m\_totVirtMem   = hwInfo.m\_totVirtMem;}
\DoxyCodeLine{02040       info.m\_availPhysMem = hwInfo.m\_availPhysMem;}
\DoxyCodeLine{02041       info.m\_availVirtMem = hwInfo.m\_availVirtMem;}
\DoxyCodeLine{02042     \}}
\DoxyCodeLine{02043   \}}
\DoxyCodeLine{02044 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_ab539ebd037b8f0b4c293304ead88e539}\label{class_farm_controller_ab539ebd037b8f0b4c293304ead88e539}} 
\index{FarmController@{FarmController}!queryServerState2@{queryServerState2}}
\index{queryServerState2@{queryServerState2}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{queryServerState2()}{queryServerState2()}}
{\footnotesize\ttfamily Server\+State Farm\+Controller\+::query\+Server\+State2 (\begin{DoxyParamCaption}\item[{const QString \&}]{id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02007                                                                \{}
\DoxyCodeLine{02008   ServerState state = ServerUnknown;}
\DoxyCodeLine{02009 }
\DoxyCodeLine{02010   map<QString, FarmServerProxy *>::iterator it = m\_servers.find(\textcolor{keywordtype}{id});}
\DoxyCodeLine{02011   \textcolor{keywordflow}{if} (it != m\_servers.end()) \{}
\DoxyCodeLine{02012     \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *server = it-\/>second;}
\DoxyCodeLine{02013 }
\DoxyCodeLine{02014     QString taskId;}
\DoxyCodeLine{02015     state = getServerState(server, taskId);}
\DoxyCodeLine{02016   \}}
\DoxyCodeLine{02017 }
\DoxyCodeLine{02018   \textcolor{keywordflow}{return} state;}
\DoxyCodeLine{02019 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a99fe26bd6e19e30b15fda13e4cd193e2}\label{class_farm_controller_a99fe26bd6e19e30b15fda13e4cd193e2}} 
\index{FarmController@{FarmController}!queryTaskInfo@{queryTaskInfo}}
\index{queryTaskInfo@{queryTaskInfo}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{queryTaskInfo()}{queryTaskInfo()}}
{\footnotesize\ttfamily void Farm\+Controller\+::query\+Task\+Info (\begin{DoxyParamCaption}\item[{const QString \&}]{id,  }\item[{\mbox{\hyperlink{class_t_farm_task}{TFarm\+Task}} \&}]{task }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01669                                                                      \{}
\DoxyCodeLine{01670   map<TaskId, CtrlFarmTask *>::iterator it = m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(\textcolor{keywordtype}{id}));}
\DoxyCodeLine{01671   \textcolor{keywordflow}{if} (it != m\_tasks.end()) \{}
\DoxyCodeLine{01672     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *tt = it-\/>second;}
\DoxyCodeLine{01673     task             = *tt;}
\DoxyCodeLine{01674 }
\DoxyCodeLine{01675     map<QString, FarmServerProxy *>::iterator it2 =}
\DoxyCodeLine{01676         m\_servers.find(it-\/>second-\/>m\_serverId);}
\DoxyCodeLine{01677     \textcolor{keywordflow}{if} (it2 != m\_servers.end()) \{}
\DoxyCodeLine{01678       \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *server = it2-\/>second;}
\DoxyCodeLine{01679       task.\mbox{\hyperlink{class_t_farm_task_af74d2cb63a6c62785364b7c87b9e2aff}{m\_server}}           = server-\/>getHostName();}
\DoxyCodeLine{01680     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01681       task.\mbox{\hyperlink{class_t_farm_task_af74d2cb63a6c62785364b7c87b9e2aff}{m\_server}} = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01682   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01683     task.\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} = TaskUnknown;}
\DoxyCodeLine{01684 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a280eeb3f0ba1db5df54f0394054a8078}\label{class_farm_controller_a280eeb3f0ba1db5df54f0394054a8078}} 
\index{FarmController@{FarmController}!queryTaskShortInfo@{queryTaskShortInfo}}
\index{queryTaskShortInfo@{queryTaskShortInfo}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{queryTaskShortInfo()}{queryTaskShortInfo()}}
{\footnotesize\ttfamily void Farm\+Controller\+::query\+Task\+Short\+Info (\begin{DoxyParamCaption}\item[{const QString \&}]{id,  }\item[{QString \&}]{parent\+Id,  }\item[{QString \&}]{name,  }\item[{Task\+State \&}]{status }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01689                                                                           \{}
\DoxyCodeLine{01690   map<TaskId, CtrlFarmTask *>::iterator it = m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(\textcolor{keywordtype}{id}));}
\DoxyCodeLine{01691   \textcolor{keywordflow}{if} (it != m\_tasks.end()) \{}
\DoxyCodeLine{01692     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = it-\/>second;}
\DoxyCodeLine{01693     parentId           = task-\/>\mbox{\hyperlink{class_t_farm_task_a93df061d1b990dc0c8f8149616b3fb0e}{m\_parentId}};}
\DoxyCodeLine{01694     name               = task-\/>\mbox{\hyperlink{class_t_farm_task_a14686e563d198398938fa8a9ed8ffff2}{m\_name}};}
\DoxyCodeLine{01695     status             = task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}};}
\DoxyCodeLine{01696   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01697     status = TaskUnknown;}
\DoxyCodeLine{01698 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a09dda7508f791eadc49c38586525741b}\label{class_farm_controller_a09dda7508f791eadc49c38586525741b}} 
\index{FarmController@{FarmController}!removeTask@{removeTask}}
\index{removeTask@{removeTask}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{removeTask()}{removeTask()}}
{\footnotesize\ttfamily void Farm\+Controller\+::remove\+Task (\begin{DoxyParamCaption}\item[{const QString \&}]{id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01486                                                  \{}
\DoxyCodeLine{01487   map<TaskId, CtrlFarmTask *>::iterator it = m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(\textcolor{keywordtype}{id}));}
\DoxyCodeLine{01488   \textcolor{keywordflow}{if} (it != m\_tasks.end()) \{}
\DoxyCodeLine{01489     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = it-\/>second;}
\DoxyCodeLine{01490 }
\DoxyCodeLine{01491     \textcolor{keywordtype}{bool} aSubtaskIsRunning = \textcolor{keyword}{false};}
\DoxyCodeLine{01492 }
\DoxyCodeLine{01493     vector<QString>::iterator it2 = task-\/>m\_subTasks.begin();}
\DoxyCodeLine{01494     \textcolor{keywordflow}{for} (; it2 != task-\/>m\_subTasks.end();) \{}
\DoxyCodeLine{01495       QString subTaskId = *it2;}
\DoxyCodeLine{01496       map<TaskId, CtrlFarmTask *>::iterator it3 =}
\DoxyCodeLine{01497           m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(subTaskId));}
\DoxyCodeLine{01498       \textcolor{keywordflow}{if} (it3 != m\_tasks.end()) \{}
\DoxyCodeLine{01499         \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *subTask = it3-\/>second;}
\DoxyCodeLine{01500         \textcolor{keywordflow}{if} (subTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} != Running) \{}
\DoxyCodeLine{01501           it2 = task-\/>m\_subTasks.erase(it2);}
\DoxyCodeLine{01502           m\_tasks.erase(it3);}
\DoxyCodeLine{01503           \textcolor{keyword}{delete} it3-\/>second;}
\DoxyCodeLine{01504         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01505           it2 = task-\/>m\_subTasks.erase(it2);}
\DoxyCodeLine{01506 }
\DoxyCodeLine{01507           map<QString, FarmServerProxy *>::iterator itServer =}
\DoxyCodeLine{01508               m\_servers.find(subTask-\/>m\_serverId);}
\DoxyCodeLine{01509 }
\DoxyCodeLine{01510           \textcolor{keywordflow}{if} (itServer != m\_servers.end()) \{}
\DoxyCodeLine{01511             \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *server = itServer-\/>second;}
\DoxyCodeLine{01512             \textcolor{keywordflow}{if} (server) \{}
\DoxyCodeLine{01513               vector<QString>::const\_iterator it3 =}
\DoxyCodeLine{01514                   find(server-\/>getTasks().begin(), server-\/>getTasks().end(),}
\DoxyCodeLine{01515                        subTask-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}});}
\DoxyCodeLine{01516 }
\DoxyCodeLine{01517               \textcolor{keywordflow}{if} (it3 != server-\/>getTasks().end()) \{}
\DoxyCodeLine{01518                 aSubtaskIsRunning = \textcolor{keyword}{true};}
\DoxyCodeLine{01519                 server-\/>terminateTask(subTask-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}});}
\DoxyCodeLine{01520               \}}
\DoxyCodeLine{01521             \}}
\DoxyCodeLine{01522           \}}
\DoxyCodeLine{01523 }
\DoxyCodeLine{01524           subTask-\/>m\_toBeDeleted = \textcolor{keyword}{true};}
\DoxyCodeLine{01525         \}}
\DoxyCodeLine{01526       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01527         ++it2;}
\DoxyCodeLine{01528     \}}
\DoxyCodeLine{01529 }
\DoxyCodeLine{01530     \textcolor{keywordflow}{if} (task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} != Running || !aSubtaskIsRunning) \{}
\DoxyCodeLine{01531       m\_tasks.erase(it);}
\DoxyCodeLine{01532       \textcolor{keyword}{delete} it-\/>second;}
\DoxyCodeLine{01533     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01534       task-\/>m\_toBeDeleted = \textcolor{keyword}{true};}
\DoxyCodeLine{01535   \}}
\DoxyCodeLine{01536 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_adf97cb2bc29ff2d3317013540db1f77a}\label{class_farm_controller_adf97cb2bc29ff2d3317013540db1f77a}} 
\index{FarmController@{FarmController}!restartTask@{restartTask}}
\index{restartTask@{restartTask}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{restartTask()}{restartTask()}}
{\footnotesize\ttfamily void Farm\+Controller\+::restart\+Task (\begin{DoxyParamCaption}\item[{const QString \&}]{id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01581                                                   \{}
\DoxyCodeLine{01582   \textcolor{comment}{// la scelta del server e' lasciata al controller}}
\DoxyCodeLine{01583   \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *server = 0;}
\DoxyCodeLine{01584   doRestartTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{true}, server);}
\DoxyCodeLine{01585 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_ad99f421b99dfdf554ed0275bf23996e8}\label{class_farm_controller_ad99f421b99dfdf554ed0275bf23996e8}} 
\index{FarmController@{FarmController}!save@{save}}
\index{save@{save}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{save()}{save()}}
{\footnotesize\ttfamily void Farm\+Controller\+::save (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{02147                                                    \{}
\DoxyCodeLine{02148   \mbox{\hyperlink{class_t_o_stream}{TOStream}} os(fp);}
\DoxyCodeLine{02149 }
\DoxyCodeLine{02150   map<std::string, string> attributes;}
\DoxyCodeLine{02151   attributes.insert(make\_pair(\textcolor{stringliteral}{"{}ver"{}}, \textcolor{stringliteral}{"{}1.0"{}}));}
\DoxyCodeLine{02152   os.openChild(\textcolor{stringliteral}{"{}tfarmdata"{}}, attributes);}
\DoxyCodeLine{02153   os.openChild(\textcolor{stringliteral}{"{}tfarmtasks"{}});}
\DoxyCodeLine{02154 }
\DoxyCodeLine{02155   map<TaskId, CtrlFarmTask *>::const\_iterator it = m\_tasks.begin();}
\DoxyCodeLine{02156   \textcolor{keywordflow}{for} (; it != m\_tasks.end(); ++it) \{}
\DoxyCodeLine{02157     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = it-\/>second;}
\DoxyCodeLine{02158     os << task;}
\DoxyCodeLine{02159   \}}
\DoxyCodeLine{02160 }
\DoxyCodeLine{02161   os.closeChild();}
\DoxyCodeLine{02162   os.closeChild();}
\DoxyCodeLine{02163 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a0078fcec754f34a153da6559886d2da5}\label{class_farm_controller_a0078fcec754f34a153da6559886d2da5}} 
\index{FarmController@{FarmController}!startTask@{startTask}}
\index{startTask@{startTask}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{startTask()}{startTask()}}
{\footnotesize\ttfamily void Farm\+Controller\+::start\+Task (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_ctrl_farm_task}{Ctrl\+Farm\+Task}} $\ast$}]{task,  }\item[{\mbox{\hyperlink{class_farm_server_proxy}{Farm\+Server\+Proxy}} $\ast$}]{server }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01085                                                                           \{}
\DoxyCodeLine{01086   QMutexLocker sl(\&m\_mutex);}
\DoxyCodeLine{01087 }
\DoxyCodeLine{01088   \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *taskToBeSubmittedParent = 0;}
\DoxyCodeLine{01089   \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *taskToBeSubmitted       = 0;}
\DoxyCodeLine{01090 }
\DoxyCodeLine{01091   \textcolor{keywordflow}{if} (task-\/>m\_subTasks.empty()) \{}
\DoxyCodeLine{01092     taskToBeSubmitted = task;}
\DoxyCodeLine{01093     \textcolor{keywordflow}{if} (task-\/>\mbox{\hyperlink{class_t_farm_task_a93df061d1b990dc0c8f8149616b3fb0e}{m\_parentId}} != \textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{01094       map<TaskId, CtrlFarmTask *>::iterator itTaskParent =}
\DoxyCodeLine{01095           m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(task-\/>\mbox{\hyperlink{class_t_farm_task_a93df061d1b990dc0c8f8149616b3fb0e}{m\_parentId}}));}
\DoxyCodeLine{01096       \textcolor{keywordflow}{if} (itTaskParent != m\_tasks.end()) \{}
\DoxyCodeLine{01097         taskToBeSubmittedParent = itTaskParent-\/>second;}
\DoxyCodeLine{01098       \}}
\DoxyCodeLine{01099     \}}
\DoxyCodeLine{01100   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01101     taskToBeSubmittedParent = task;}
\DoxyCodeLine{01102 }
\DoxyCodeLine{01103     \textcolor{comment}{// cerca il primo subtask WAITING}}
\DoxyCodeLine{01104     std::vector<QString>::iterator itSubTaskId = task-\/>m\_subTasks.begin();}
\DoxyCodeLine{01105     \textcolor{keywordflow}{for} (; itSubTaskId != task-\/>m\_subTasks.end(); ++itSubTaskId) \{}
\DoxyCodeLine{01106       QString subTaskId = *itSubTaskId;}
\DoxyCodeLine{01107 }
\DoxyCodeLine{01108       map<TaskId, CtrlFarmTask *>::iterator itSubTask =}
\DoxyCodeLine{01109           m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(subTaskId));}
\DoxyCodeLine{01110       \textcolor{keywordflow}{if} (itSubTask != m\_tasks.end()) \{}
\DoxyCodeLine{01111         \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *subTask = itSubTask-\/>second;}
\DoxyCodeLine{01112         \textcolor{keywordflow}{if} (subTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Waiting) \{}
\DoxyCodeLine{01113           taskToBeSubmitted = subTask;}
\DoxyCodeLine{01114           \textcolor{keywordflow}{break};}
\DoxyCodeLine{01115         \}}
\DoxyCodeLine{01116       \}}
\DoxyCodeLine{01117     \}}
\DoxyCodeLine{01118   \}}
\DoxyCodeLine{01119 }
\DoxyCodeLine{01120   \textcolor{keywordtype}{int} rc = 0;}
\DoxyCodeLine{01121   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01122     server-\/>addTask(taskToBeSubmitted);}
\DoxyCodeLine{01123   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{01124     \textcolor{keywordflow}{throw} e;}
\DoxyCodeLine{01125   \}}
\DoxyCodeLine{01126 }
\DoxyCodeLine{01127   \textcolor{keywordflow}{if} (rc == 0) \{}
\DoxyCodeLine{01128     QDateTime startDate = QDateTime::currentDateTime();}
\DoxyCodeLine{01129 }
\DoxyCodeLine{01130     \textcolor{keywordflow}{if} (taskToBeSubmittedParent \&\&}
\DoxyCodeLine{01131         taskToBeSubmittedParent-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} != Running) \{}
\DoxyCodeLine{01132       taskToBeSubmittedParent-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}}    = Running;}
\DoxyCodeLine{01133       taskToBeSubmittedParent-\/>m\_startDate = startDate;}
\DoxyCodeLine{01134     \}}
\DoxyCodeLine{01135 }
\DoxyCodeLine{01136     taskToBeSubmitted-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}}    = Running;}
\DoxyCodeLine{01137     taskToBeSubmitted-\/>m\_startDate = startDate;}
\DoxyCodeLine{01138 }
\DoxyCodeLine{01139     taskToBeSubmitted-\/>m\_serverId = server-\/>getId();}
\DoxyCodeLine{01140 }
\DoxyCodeLine{01141     QString msg = \textcolor{stringliteral}{"{}Task "{}} + taskToBeSubmitted-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}} + \textcolor{stringliteral}{"{} assigned to "{}};}
\DoxyCodeLine{01142     msg += server-\/>getHostName();}
\DoxyCodeLine{01143     msg += \textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)n"{}};}
\DoxyCodeLine{01144     m\_userLog-\/>info(msg);}
\DoxyCodeLine{01145   \}}
\DoxyCodeLine{01146 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a77108086fc40e698eec6125559b02dfe}\label{class_farm_controller_a77108086fc40e698eec6125559b02dfe}} 
\index{FarmController@{FarmController}!suspendTask@{suspendTask}}
\index{suspendTask@{suspendTask}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{suspendTask()}{suspendTask()}}
{\footnotesize\ttfamily void Farm\+Controller\+::suspend\+Task (\begin{DoxyParamCaption}\item[{const QString \&}]{id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01540                                                   \{}
\DoxyCodeLine{01541   map<TaskId, CtrlFarmTask *>::iterator it = m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(\textcolor{keywordtype}{id}));}
\DoxyCodeLine{01542   \textcolor{keywordflow}{if} (it != m\_tasks.end()) \{}
\DoxyCodeLine{01543     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = it-\/>second;}
\DoxyCodeLine{01544 }
\DoxyCodeLine{01545     vector<QString>::iterator it2 = task-\/>m\_subTasks.begin();}
\DoxyCodeLine{01546     \textcolor{keywordflow}{for} (; it2 != task-\/>m\_subTasks.end(); ++it2) \{}
\DoxyCodeLine{01547       QString subTaskId = *it2;}
\DoxyCodeLine{01548       map<TaskId, CtrlFarmTask *>::iterator it3 =}
\DoxyCodeLine{01549           m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(subTaskId));}
\DoxyCodeLine{01550       \textcolor{keywordflow}{if} (it3 != m\_tasks.end()) \{}
\DoxyCodeLine{01551         \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *subTask = it3-\/>second;}
\DoxyCodeLine{01552         \textcolor{keywordflow}{if} (subTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Running) \{}
\DoxyCodeLine{01553           map<QString, FarmServerProxy *>::iterator itServer =}
\DoxyCodeLine{01554               m\_servers.find(subTask-\/>m\_serverId);}
\DoxyCodeLine{01555 }
\DoxyCodeLine{01556           \textcolor{keywordflow}{if} (itServer != m\_servers.end()) \{}
\DoxyCodeLine{01557             \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *server = itServer-\/>second;}
\DoxyCodeLine{01558             \textcolor{keywordflow}{if} (server) \{}
\DoxyCodeLine{01559               vector<QString>::const\_iterator it3 =}
\DoxyCodeLine{01560                   find(server-\/>getTasks().begin(), server-\/>getTasks().end(),}
\DoxyCodeLine{01561                        subTask-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}});}
\DoxyCodeLine{01562 }
\DoxyCodeLine{01563               \textcolor{keywordflow}{if} (it3 != server-\/>getTasks().end())}
\DoxyCodeLine{01564                 server-\/>terminateTask(subTask-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}});}
\DoxyCodeLine{01565             \}}
\DoxyCodeLine{01566           \}}
\DoxyCodeLine{01567         \}}
\DoxyCodeLine{01568         subTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} = Suspended;}
\DoxyCodeLine{01569       \}}
\DoxyCodeLine{01570     \}}
\DoxyCodeLine{01571     task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} = Suspended;}
\DoxyCodeLine{01572   \}}
\DoxyCodeLine{01573 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a1365d9bd2b148a156f063cb5a2f7ae1b}\label{class_farm_controller_a1365d9bd2b148a156f063cb5a2f7ae1b}} 
\index{FarmController@{FarmController}!taskCompleted@{taskCompleted}}
\index{taskCompleted@{taskCompleted}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{taskCompleted()}{taskCompleted()}}
{\footnotesize\ttfamily void Farm\+Controller\+::task\+Completed (\begin{DoxyParamCaption}\item[{const QString \&}]{task\+Id,  }\item[{int}]{exit\+Code }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01844                                                                       \{}
\DoxyCodeLine{01845 \textcolor{preprocessor}{\#ifdef TRACE}}
\DoxyCodeLine{01846   m\_userLog-\/>info(\textcolor{stringliteral}{"{}completed chiamata\(\backslash\)n\(\backslash\)n"{}});}
\DoxyCodeLine{01847 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01848 }
\DoxyCodeLine{01849   \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *server = 0;}
\DoxyCodeLine{01850 }
\DoxyCodeLine{01851   map<TaskId, CtrlFarmTask *>::iterator itTask = m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(taskId));}
\DoxyCodeLine{01852   \textcolor{keywordflow}{if} (itTask != m\_tasks.end()) \{}
\DoxyCodeLine{01853     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = itTask-\/>second;}
\DoxyCodeLine{01854 }
\DoxyCodeLine{01855     \textcolor{keywordflow}{if} (task-\/>getCommandLine().contains(\textcolor{stringliteral}{"{}runcasm"{}})) \{}
\DoxyCodeLine{01856       \textcolor{keywordflow}{if} (task-\/>m\_failedSteps == 0 \&\& task-\/>m\_successfullSteps > 0)}
\DoxyCodeLine{01857         task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} = Completed;}
\DoxyCodeLine{01858       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01859         task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} = Aborted;}
\DoxyCodeLine{01860     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01861       \textcolor{keywordflow}{switch} (exitCode) \{}
\DoxyCodeLine{01862       \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{01863         task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} = Completed;}
\DoxyCodeLine{01864         \textcolor{keywordflow}{if} (isAScript(task)) task-\/>m\_successfullSteps= task-\/>m\_stepCount;}
\DoxyCodeLine{01865         \textcolor{keywordflow}{break};}
\DoxyCodeLine{01866       \textcolor{keywordflow}{case} RENDER\_LICENSE\_NOT\_FOUND:}
\DoxyCodeLine{01867         task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} = Waiting;}
\DoxyCodeLine{01868         \textcolor{keywordflow}{break};}
\DoxyCodeLine{01869       \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01870         \textcolor{keywordflow}{if} (task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} != Suspended) task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} = Aborted;}
\DoxyCodeLine{01871         \textcolor{keywordflow}{break};}
\DoxyCodeLine{01872       \}}
\DoxyCodeLine{01873     \}}
\DoxyCodeLine{01874 }
\DoxyCodeLine{01875     task-\/>m\_completionDate = QDateTime::currentDateTime();}
\DoxyCodeLine{01876 }
\DoxyCodeLine{01877     \textcolor{keywordflow}{if} (task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Aborted) \{}
\DoxyCodeLine{01878       task-\/>m\_failedOnServers.push\_back(task-\/>m\_serverId);}
\DoxyCodeLine{01879       ++task-\/>m\_failureCount;}
\DoxyCodeLine{01880     \}}
\DoxyCodeLine{01881 }
\DoxyCodeLine{01882     \textcolor{keywordflow}{if} (task-\/>m\_toBeDeleted) m\_tasks.erase(itTask);}
\DoxyCodeLine{01883 }
\DoxyCodeLine{01884     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *parentTask = 0;}
\DoxyCodeLine{01885 }
\DoxyCodeLine{01886     \textcolor{keywordflow}{if} (task-\/>\mbox{\hyperlink{class_t_farm_task_a93df061d1b990dc0c8f8149616b3fb0e}{m\_parentId}} != \textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{01887       map<TaskId, CtrlFarmTask *>::iterator itParent =}
\DoxyCodeLine{01888           m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(task-\/>\mbox{\hyperlink{class_t_farm_task_a93df061d1b990dc0c8f8149616b3fb0e}{m\_parentId}}));}
\DoxyCodeLine{01889       \textcolor{keywordflow}{if} (itParent != m\_tasks.end()) \{}
\DoxyCodeLine{01890         parentTask = itParent-\/>second;}
\DoxyCodeLine{01891 }
\DoxyCodeLine{01892         TaskState parentTaskState = Completed;}
\DoxyCodeLine{01893         \textcolor{keywordtype}{bool} aSubTaskFailed       = \textcolor{keyword}{false};}
\DoxyCodeLine{01894         \textcolor{keywordtype}{bool} noSubtaskRunning     = \textcolor{keyword}{true};}
\DoxyCodeLine{01895 }
\DoxyCodeLine{01896         \textcolor{keywordflow}{if} (parentTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} != Suspended \&\&}
\DoxyCodeLine{01897             parentTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} != Aborted) \{}
\DoxyCodeLine{01898           std::vector<QString>::iterator itSubTaskId =}
\DoxyCodeLine{01899               parentTask-\/>m\_subTasks.begin();}
\DoxyCodeLine{01900           \textcolor{keywordflow}{for} (; itSubTaskId != parentTask-\/>m\_subTasks.end(); ++itSubTaskId) \{}
\DoxyCodeLine{01901             QString subTaskId = *itSubTaskId;}
\DoxyCodeLine{01902             map<TaskId, CtrlFarmTask *>::iterator itSubTask =}
\DoxyCodeLine{01903                 m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(subTaskId));}
\DoxyCodeLine{01904             \textcolor{keywordflow}{if} (itSubTask != m\_tasks.end()) \{}
\DoxyCodeLine{01905               \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *subTask = itSubTask-\/>second;}
\DoxyCodeLine{01906 }
\DoxyCodeLine{01907               \textcolor{keywordflow}{if} (subTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Running ||}
\DoxyCodeLine{01908                   subTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Waiting) \{}
\DoxyCodeLine{01909                 parentTaskState  = Running;}
\DoxyCodeLine{01910                 noSubtaskRunning = \textcolor{keyword}{false};}
\DoxyCodeLine{01911                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{01912               \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (subTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Aborted)}
\DoxyCodeLine{01913                 aSubTaskFailed = \textcolor{keyword}{true};}
\DoxyCodeLine{01914             \}}
\DoxyCodeLine{01915           \}}
\DoxyCodeLine{01916         \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01917           aSubTaskFailed = \textcolor{keyword}{true};}
\DoxyCodeLine{01918         ;  \textcolor{comment}{// si arriva se e solo se il task padre e' stato terminato}}
\DoxyCodeLine{01919 }
\DoxyCodeLine{01920         \textcolor{keywordflow}{if} (aSubTaskFailed \&\& noSubtaskRunning)}
\DoxyCodeLine{01921           parentTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} = Aborted;}
\DoxyCodeLine{01922         \textcolor{keywordflow}{else}}
\DoxyCodeLine{01923           parentTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} = parentTaskState;}
\DoxyCodeLine{01924 }
\DoxyCodeLine{01925         \textcolor{keywordflow}{if} (parentTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Completed ||}
\DoxyCodeLine{01926             parentTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Aborted) \{}
\DoxyCodeLine{01927           parentTask-\/>m\_completionDate = task-\/>m\_completionDate;}
\DoxyCodeLine{01928           \textcolor{keywordflow}{if} (parentTask-\/>m\_toBeDeleted) m\_tasks.erase(itParent);}
\DoxyCodeLine{01929         \}}
\DoxyCodeLine{01930       \}}
\DoxyCodeLine{01931     \}}
\DoxyCodeLine{01932 }
\DoxyCodeLine{01933     map<QString, FarmServerProxy *>::iterator itServer =}
\DoxyCodeLine{01934         m\_servers.find(task-\/>m\_serverId);}
\DoxyCodeLine{01935     \textcolor{keywordflow}{if} (itServer != m\_servers.end()) server = itServer-\/>second;}
\DoxyCodeLine{01936 }
\DoxyCodeLine{01937     \textcolor{keywordflow}{if} (server) \{}
\DoxyCodeLine{01938       \textcolor{keywordflow}{if} (task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Completed) \{}
\DoxyCodeLine{01939         QString msg = \textcolor{stringliteral}{"{}Task "{}} + taskId + \textcolor{stringliteral}{"{} completed on "{}};}
\DoxyCodeLine{01940         msg += server-\/>getHostName();}
\DoxyCodeLine{01941         msg += \textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)n"{}};}
\DoxyCodeLine{01942         m\_userLog-\/>info(msg);}
\DoxyCodeLine{01943       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01944         QString msg = \textcolor{stringliteral}{"{}Task "{}} + taskId + \textcolor{stringliteral}{"{} failed on "{}};}
\DoxyCodeLine{01945         msg += server-\/>getHostName();}
\DoxyCodeLine{01946         msg += \textcolor{stringliteral}{"{} with exit code "{}} + QString::number(exitCode);}
\DoxyCodeLine{01947         msg += \textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)n"{}};}
\DoxyCodeLine{01948         m\_userLog-\/>info(msg);}
\DoxyCodeLine{01949       \}}
\DoxyCodeLine{01950 }
\DoxyCodeLine{01951       server-\/>removeTask(taskId);}
\DoxyCodeLine{01952     \}}
\DoxyCodeLine{01953 }
\DoxyCodeLine{01954     \textcolor{keywordtype}{bool} allComplete = \textcolor{keyword}{false};}
\DoxyCodeLine{01955     \textcolor{keywordflow}{if} (parentTask \&\& parentTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Completed) \{}
\DoxyCodeLine{01956       m\_userLog-\/>info(\textcolor{stringliteral}{"{}Task "{}} + parentTask-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}} + \textcolor{stringliteral}{"{} completed\(\backslash\)n\(\backslash\)n"{}});}
\DoxyCodeLine{01957       allComplete = \textcolor{keyword}{true};}
\DoxyCodeLine{01958     \}}
\DoxyCodeLine{01959 }
\DoxyCodeLine{01960     \textcolor{keywordflow}{if} (task-\/>m\_toBeDeleted) \textcolor{keyword}{delete} task;}
\DoxyCodeLine{01961     \textcolor{keywordflow}{if} (parentTask \&\& parentTask-\/>m\_toBeDeleted) \textcolor{keyword}{delete} parentTask;}
\DoxyCodeLine{01962     \textcolor{comment}{//*}}
\DoxyCodeLine{01963     \textcolor{keywordflow}{if} (allComplete) \{}
\DoxyCodeLine{01964       activateReadyServers();}
\DoxyCodeLine{01965       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01966     \}}
\DoxyCodeLine{01967     \textcolor{comment}{//*/}}
\DoxyCodeLine{01968   \}}
\DoxyCodeLine{01969 }
\DoxyCodeLine{01970   \textcolor{keywordflow}{if} (server \&\& !server-\/>m\_offline \&\& exitCode != RENDER\_LICENSE\_NOT\_FOUND) \{}
\DoxyCodeLine{01971     \textcolor{comment}{// cerca un task da sottomettere al server}}
\DoxyCodeLine{01972     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = getTaskToStart(server);}
\DoxyCodeLine{01973     \textcolor{keywordflow}{if} (task) \{}
\DoxyCodeLine{01974       \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01975         \textcolor{keywordflow}{if} (task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Aborted) \{}
\DoxyCodeLine{01976           vector<QString>::iterator it =}
\DoxyCodeLine{01977               find(task-\/>m\_failedOnServers.begin(),}
\DoxyCodeLine{01978                    task-\/>m\_failedOnServers.end(), server-\/>getId());}
\DoxyCodeLine{01979 }
\DoxyCodeLine{01980           \textcolor{keywordflow}{if} (it == task-\/>m\_failedOnServers.end())}
\DoxyCodeLine{01981             doRestartTask(task-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}}, \textcolor{keyword}{false}, server);}
\DoxyCodeLine{01982           \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01983             doRestartTask(task-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}}, \textcolor{keyword}{false}, 0);}
\DoxyCodeLine{01984             \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *nextTask = getNextTaskToStart(task, server);}
\DoxyCodeLine{01985             \textcolor{keywordflow}{if} (nextTask) startTask(nextTask, server);}
\DoxyCodeLine{01986           \}}
\DoxyCodeLine{01987         \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01988           startTask(task, server);}
\DoxyCodeLine{01989       \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \& \textcolor{comment}{/*e*/}) \{}
\DoxyCodeLine{01990       \}}
\DoxyCodeLine{01991     \}}
\DoxyCodeLine{01992   \}}
\DoxyCodeLine{01993 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a5d5429427f1121760cf5982877d95eee}\label{class_farm_controller_a5d5429427f1121760cf5982877d95eee}} 
\index{FarmController@{FarmController}!taskProgress@{taskProgress}}
\index{taskProgress@{taskProgress}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{taskProgress()}{taskProgress()}}
{\footnotesize\ttfamily void Farm\+Controller\+::task\+Progress (\begin{DoxyParamCaption}\item[{const QString \&}]{task\+Id,  }\item[{int}]{step,  }\item[{int}]{step\+Count,  }\item[{int}]{frame\+Number,  }\item[{Frame\+State}]{state }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01821                                                     \{}
\DoxyCodeLine{01822   map<TaskId, CtrlFarmTask *>::iterator itTask = m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(taskId));}
\DoxyCodeLine{01823   \textcolor{keywordflow}{if} (itTask != m\_tasks.end()) \{}
\DoxyCodeLine{01824     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = itTask-\/>second;}
\DoxyCodeLine{01825     \textcolor{keywordflow}{if} (state == FrameDone)}
\DoxyCodeLine{01826       ++task-\/>m\_successfullSteps;}
\DoxyCodeLine{01827     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01828       ++task-\/>m\_failedSteps;}
\DoxyCodeLine{01829 }
\DoxyCodeLine{01830     \textcolor{keywordflow}{if} (task-\/>\mbox{\hyperlink{class_t_farm_task_a93df061d1b990dc0c8f8149616b3fb0e}{m\_parentId}} != \textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{01831       map<TaskId, CtrlFarmTask *>::iterator itParentTask =}
\DoxyCodeLine{01832           m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(task-\/>\mbox{\hyperlink{class_t_farm_task_a93df061d1b990dc0c8f8149616b3fb0e}{m\_parentId}}));}
\DoxyCodeLine{01833       \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *parentTask = itParentTask-\/>second;}
\DoxyCodeLine{01834       \textcolor{keywordflow}{if} (state == FrameDone)}
\DoxyCodeLine{01835         ++parentTask-\/>m\_successfullSteps;}
\DoxyCodeLine{01836       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01837         ++parentTask-\/>m\_failedSteps;}
\DoxyCodeLine{01838     \}}
\DoxyCodeLine{01839   \}}
\DoxyCodeLine{01840 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_a7bcc0592cd4fb4bb9733bcbb05e0e4f4}\label{class_farm_controller_a7bcc0592cd4fb4bb9733bcbb05e0e4f4}} 
\index{FarmController@{FarmController}!taskSubmissionError@{taskSubmissionError}}
\index{taskSubmissionError@{taskSubmissionError}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{taskSubmissionError()}{taskSubmissionError()}}
{\footnotesize\ttfamily void Farm\+Controller\+::task\+Submission\+Error (\begin{DoxyParamCaption}\item[{const QString \&}]{task\+Id,  }\item[{int}]{err\+Code }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01741                                                                            \{}
\DoxyCodeLine{01742   \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *server = 0;}
\DoxyCodeLine{01743 }
\DoxyCodeLine{01744   map<TaskId, CtrlFarmTask *>::iterator itTask = m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(taskId));}
\DoxyCodeLine{01745   \textcolor{keywordflow}{if} (itTask != m\_tasks.end()) \{}
\DoxyCodeLine{01746     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = itTask-\/>second;}
\DoxyCodeLine{01747     task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}}     = Aborted;}
\DoxyCodeLine{01748 }
\DoxyCodeLine{01749     task-\/>m\_completionDate = QDateTime::currentDateTime();}
\DoxyCodeLine{01750 }
\DoxyCodeLine{01751     \textcolor{keywordflow}{if} (task-\/>m\_toBeDeleted) m\_tasks.erase(itTask);}
\DoxyCodeLine{01752 }
\DoxyCodeLine{01753     \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *parentTask = 0;}
\DoxyCodeLine{01754 }
\DoxyCodeLine{01755     \textcolor{keywordflow}{if} (task-\/>\mbox{\hyperlink{class_t_farm_task_a93df061d1b990dc0c8f8149616b3fb0e}{m\_parentId}} != \textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{01756       map<TaskId, CtrlFarmTask *>::iterator itParent =}
\DoxyCodeLine{01757           m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(task-\/>\mbox{\hyperlink{class_t_farm_task_a93df061d1b990dc0c8f8149616b3fb0e}{m\_parentId}}));}
\DoxyCodeLine{01758       \textcolor{keywordflow}{if} (itParent != m\_tasks.end()) \{}
\DoxyCodeLine{01759         parentTask = itParent-\/>second;}
\DoxyCodeLine{01760 }
\DoxyCodeLine{01761         TaskState parentTaskState = Aborted;}
\DoxyCodeLine{01762         std::vector<QString>::iterator itSubTaskId =}
\DoxyCodeLine{01763             parentTask-\/>m\_subTasks.begin();}
\DoxyCodeLine{01764         \textcolor{keywordflow}{for} (; itSubTaskId != parentTask-\/>m\_subTasks.end(); ++itSubTaskId) \{}
\DoxyCodeLine{01765           QString subTaskId = *itSubTaskId;}
\DoxyCodeLine{01766           map<TaskId, CtrlFarmTask *>::iterator itSubTask =}
\DoxyCodeLine{01767               m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(subTaskId));}
\DoxyCodeLine{01768           \textcolor{keywordflow}{if} (itSubTask != m\_tasks.end()) \{}
\DoxyCodeLine{01769             \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *subTask = itSubTask-\/>second;}
\DoxyCodeLine{01770             \textcolor{keywordflow}{if} (subTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Running || subTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Waiting) \{}
\DoxyCodeLine{01771               parentTaskState = Running;}
\DoxyCodeLine{01772               \textcolor{keywordflow}{break};}
\DoxyCodeLine{01773             \}}
\DoxyCodeLine{01774           \}}
\DoxyCodeLine{01775         \}}
\DoxyCodeLine{01776 }
\DoxyCodeLine{01777         parentTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} = parentTaskState;}
\DoxyCodeLine{01778         \textcolor{keywordflow}{if} (parentTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Aborted ||}
\DoxyCodeLine{01779             parentTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Aborted) \{}
\DoxyCodeLine{01780           parentTask-\/>m\_completionDate = task-\/>m\_completionDate;}
\DoxyCodeLine{01781           \textcolor{keywordflow}{if} (parentTask-\/>m\_toBeDeleted) m\_tasks.erase(itParent);}
\DoxyCodeLine{01782         \}}
\DoxyCodeLine{01783       \}}
\DoxyCodeLine{01784     \}}
\DoxyCodeLine{01785 }
\DoxyCodeLine{01786     map<QString, FarmServerProxy *>::iterator itServer =}
\DoxyCodeLine{01787         m\_servers.find(task-\/>m\_serverId);}
\DoxyCodeLine{01788     \textcolor{keywordflow}{if} (itServer != m\_servers.end()) server = itServer-\/>second;}
\DoxyCodeLine{01789 }
\DoxyCodeLine{01790     \textcolor{keywordflow}{if} (server) \{}
\DoxyCodeLine{01791       server-\/>removeTask(taskId);}
\DoxyCodeLine{01792     \}}
\DoxyCodeLine{01793 }
\DoxyCodeLine{01794     \textcolor{keywordflow}{if} (task-\/>m\_toBeDeleted) \textcolor{keyword}{delete} task;}
\DoxyCodeLine{01795     \textcolor{keywordflow}{if} (parentTask \&\& parentTask-\/>m\_toBeDeleted) \textcolor{keyword}{delete} parentTask;}
\DoxyCodeLine{01796   \}}
\DoxyCodeLine{01797 }
\DoxyCodeLine{01798   \textcolor{keywordflow}{if} (server \&\& !server-\/>m\_offline) \{}
\DoxyCodeLine{01799     \textcolor{comment}{// cerca un task da sottomettere al server}}
\DoxyCodeLine{01800 }
\DoxyCodeLine{01801     itTask = m\_tasks.begin();}
\DoxyCodeLine{01802     \textcolor{keywordflow}{for} (; itTask != m\_tasks.end(); ++itTask) \{}
\DoxyCodeLine{01803       \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *task = itTask-\/>second;}
\DoxyCodeLine{01804       \textcolor{keywordflow}{if} (task-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} == Waiting) \{}
\DoxyCodeLine{01805         \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01806           startTask(task, server);}
\DoxyCodeLine{01807         \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \& \textcolor{comment}{/*e*/}) \{}
\DoxyCodeLine{01808           \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01809         \}}
\DoxyCodeLine{01810 }
\DoxyCodeLine{01811         \textcolor{keywordflow}{break};}
\DoxyCodeLine{01812       \}}
\DoxyCodeLine{01813     \}}
\DoxyCodeLine{01814   \}}
\DoxyCodeLine{01815 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_controller_af906eaf2bcb3dab4b2b72d73a68bb9ff}\label{class_farm_controller_af906eaf2bcb3dab4b2b72d73a68bb9ff}} 
\index{FarmController@{FarmController}!tryToStartTask@{tryToStartTask}}
\index{tryToStartTask@{tryToStartTask}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{tryToStartTask()}{tryToStartTask()}}
{\footnotesize\ttfamily bool Farm\+Controller\+::try\+To\+Start\+Task (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_ctrl_farm_task}{Ctrl\+Farm\+Task}} $\ast$}]{task }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01241                                                       \{}
\DoxyCodeLine{01242   QMutexLocker sl(\&m\_mutex);}
\DoxyCodeLine{01243 }
\DoxyCodeLine{01244   \textcolor{keywordtype}{bool} dependenciesCompleted = \textcolor{keyword}{true};}
\DoxyCodeLine{01245 }
\DoxyCodeLine{01246   \textcolor{keywordflow}{if} (task-\/>m\_dependencies) \{}
\DoxyCodeLine{01247     \textcolor{keywordtype}{int} count = task-\/>m\_dependencies-\/>getTaskCount();}
\DoxyCodeLine{01248     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < count; ++i) \{}
\DoxyCodeLine{01249       TFarmTask::Id \textcolor{keywordtype}{id} = task-\/>m\_dependencies-\/>getTaskId(i);}
\DoxyCodeLine{01250       map<TaskId, CtrlFarmTask *>::iterator itDepTask =}
\DoxyCodeLine{01251           m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(\textcolor{keywordtype}{id}));}
\DoxyCodeLine{01252       \textcolor{keywordflow}{if} (itDepTask != m\_tasks.end()) \{}
\DoxyCodeLine{01253         \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *depTask = itDepTask-\/>second;}
\DoxyCodeLine{01254         \textcolor{keywordflow}{if} (depTask-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}} != Completed) \{}
\DoxyCodeLine{01255           dependenciesCompleted = \textcolor{keyword}{false};}
\DoxyCodeLine{01256           \textcolor{keywordflow}{break};}
\DoxyCodeLine{01257         \}}
\DoxyCodeLine{01258       \}}
\DoxyCodeLine{01259     \}}
\DoxyCodeLine{01260   \}}
\DoxyCodeLine{01261 }
\DoxyCodeLine{01262   \textcolor{keywordflow}{if} (!dependenciesCompleted) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01263 }
\DoxyCodeLine{01264   \textcolor{keywordflow}{if} (task-\/>m\_subTasks.empty()) \{}
\DoxyCodeLine{01265     vector<FarmServerProxy *> m\_partiallyBusyServers;}
\DoxyCodeLine{01266 }
\DoxyCodeLine{01267     map<QString, FarmServerProxy *>::iterator it = m\_servers.begin();}
\DoxyCodeLine{01268     \textcolor{keywordflow}{for} (; it != m\_servers.end(); ++it) \{}
\DoxyCodeLine{01269       \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *server = it-\/>second;}
\DoxyCodeLine{01270       \textcolor{keywordflow}{if} (server-\/>m\_attached \&\& !server-\/>m\_offline \&\&}
\DoxyCodeLine{01271           (\textcolor{keywordtype}{int})server-\/>getTasks().size() < server-\/>m\_maxTaskCount) \{}
\DoxyCodeLine{01272         \textcolor{keywordflow}{if} (!(task-\/>m\_platform == NoPlatform ||}
\DoxyCodeLine{01273               task-\/>m\_platform == server-\/>m\_platform))}
\DoxyCodeLine{01274           \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01275 }
\DoxyCodeLine{01276         vector<QString>::iterator its =}
\DoxyCodeLine{01277             find(task-\/>m\_failedOnServers.begin(), task-\/>m\_failedOnServers.end(),}
\DoxyCodeLine{01278                  server-\/>getId());}
\DoxyCodeLine{01279 }
\DoxyCodeLine{01280         \textcolor{keywordflow}{if} (its != task-\/>m\_failedOnServers.end()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01281 }
\DoxyCodeLine{01282         \textcolor{keywordflow}{if} (server-\/>testConnection(500)) \{}
\DoxyCodeLine{01283           \textcolor{keywordflow}{if} (server-\/>getTasks().size() == 0) \{}
\DoxyCodeLine{01284             \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01285               startTask(task, server);}
\DoxyCodeLine{01286             \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \& \textcolor{comment}{/*e*/}) \{}
\DoxyCodeLine{01287               \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01288             \}}
\DoxyCodeLine{01289 }
\DoxyCodeLine{01290             \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01291           \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01292             m\_partiallyBusyServers.push\_back(server);}
\DoxyCodeLine{01293         \}}
\DoxyCodeLine{01294       \}}
\DoxyCodeLine{01295     \}}
\DoxyCodeLine{01296 }
\DoxyCodeLine{01297     vector<FarmServerProxy *>::iterator it2 = m\_partiallyBusyServers.begin();}
\DoxyCodeLine{01298     \textcolor{keywordflow}{for} (; it2 != m\_partiallyBusyServers.end(); ++it2) \{}
\DoxyCodeLine{01299       \mbox{\hyperlink{class_farm_server_proxy}{FarmServerProxy}} *server = *it2;}
\DoxyCodeLine{01300       \textcolor{keywordflow}{if} (server-\/>testConnection(500)) \{}
\DoxyCodeLine{01301         \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01302           startTask(task, server);}
\DoxyCodeLine{01303         \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \& \textcolor{comment}{/*e*/}) \{}
\DoxyCodeLine{01304           \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01305         \}}
\DoxyCodeLine{01306       \}}
\DoxyCodeLine{01307 }
\DoxyCodeLine{01308       \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01309     \}}
\DoxyCodeLine{01310 }
\DoxyCodeLine{01311     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01312   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01313     \textcolor{comment}{// un task composto e' considerato started sse e' started almeno uno}}
\DoxyCodeLine{01314     \textcolor{comment}{// dei task che lo compongono}}
\DoxyCodeLine{01315 }
\DoxyCodeLine{01316     \textcolor{keywordtype}{bool} started                          = \textcolor{keyword}{false};}
\DoxyCodeLine{01317     vector<QString>::iterator itSubTaskId = task-\/>m\_subTasks.begin();}
\DoxyCodeLine{01318     \textcolor{keywordflow}{for} (; itSubTaskId != task-\/>m\_subTasks.end(); ++itSubTaskId) \{}
\DoxyCodeLine{01319       map<TaskId, CtrlFarmTask *>::iterator itSubTask =}
\DoxyCodeLine{01320           m\_tasks.find(\mbox{\hyperlink{class_task_id}{TaskId}}(*itSubTaskId));}
\DoxyCodeLine{01321       \textcolor{keywordflow}{if} (itSubTask != m\_tasks.end()) \{}
\DoxyCodeLine{01322         \mbox{\hyperlink{class_ctrl_farm_task}{CtrlFarmTask}} *subTask = itSubTask-\/>second;}
\DoxyCodeLine{01323         \textcolor{keywordflow}{if} (tryToStartTask(subTask)) started= \textcolor{keyword}{true};}
\DoxyCodeLine{01324       \}}
\DoxyCodeLine{01325     \}}
\DoxyCodeLine{01326 }
\DoxyCodeLine{01327     \textcolor{keywordflow}{return} started;}
\DoxyCodeLine{01328   \}}
\DoxyCodeLine{01329 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_farm_controller_a350ad3adb4c2088f9e76ced2db2b20bd}\label{class_farm_controller_a350ad3adb4c2088f9e76ced2db2b20bd}} 
\index{FarmController@{FarmController}!m\_addr@{m\_addr}}
\index{m\_addr@{m\_addr}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{m\_addr}{m\_addr}}
{\footnotesize\ttfamily QString Farm\+Controller\+::m\+\_\+addr}

\mbox{\Hypertarget{class_farm_controller_a559334fb6431abf9cb4a2cdbd0b22200}\label{class_farm_controller_a559334fb6431abf9cb4a2cdbd0b22200}} 
\index{FarmController@{FarmController}!m\_hostName@{m\_hostName}}
\index{m\_hostName@{m\_hostName}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{m\_hostName}{m\_hostName}}
{\footnotesize\ttfamily QString Farm\+Controller\+::m\+\_\+host\+Name}

\mbox{\Hypertarget{class_farm_controller_ada66986ce4916c439d1ae008b300160d}\label{class_farm_controller_ada66986ce4916c439d1ae008b300160d}} 
\index{FarmController@{FarmController}!m\_mutex@{m\_mutex}}
\index{m\_mutex@{m\_mutex}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{m\_mutex}{m\_mutex}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_thread_1_1_mutex}{TThread\+::\+Mutex}} Farm\+Controller\+::m\+\_\+mutex}

\mbox{\Hypertarget{class_farm_controller_a2c1d4ccc9818d180417ae5f4e931c6d7}\label{class_farm_controller_a2c1d4ccc9818d180417ae5f4e931c6d7}} 
\index{FarmController@{FarmController}!m\_port@{m\_port}}
\index{m\_port@{m\_port}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{m\_port}{m\_port}}
{\footnotesize\ttfamily int Farm\+Controller\+::m\+\_\+port}

\mbox{\Hypertarget{class_farm_controller_a35b30d893ff236eebcb2f9140c1daa15}\label{class_farm_controller_a35b30d893ff236eebcb2f9140c1daa15}} 
\index{FarmController@{FarmController}!m\_servers@{m\_servers}}
\index{m\_servers@{m\_servers}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{m\_servers}{m\_servers}}
{\footnotesize\ttfamily map$<$QString, \mbox{\hyperlink{class_farm_server_proxy}{Farm\+Server\+Proxy}} $\ast$$>$ Farm\+Controller\+::m\+\_\+servers}

\mbox{\Hypertarget{class_farm_controller_a447713751e2346d4ccdfff2f76edf916}\label{class_farm_controller_a447713751e2346d4ccdfff2f76edf916}} 
\index{FarmController@{FarmController}!m\_tasks@{m\_tasks}}
\index{m\_tasks@{m\_tasks}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{m\_tasks}{m\_tasks}}
{\footnotesize\ttfamily map$<$\mbox{\hyperlink{class_task_id}{Task\+Id}}, \mbox{\hyperlink{class_ctrl_farm_task}{Ctrl\+Farm\+Task}} $\ast$$>$ Farm\+Controller\+::m\+\_\+tasks}

\mbox{\Hypertarget{class_farm_controller_a5103e7b8ebe5e0767d9abcf50bb7d518}\label{class_farm_controller_a5103e7b8ebe5e0767d9abcf50bb7d518}} 
\index{FarmController@{FarmController}!m\_userLog@{m\_userLog}}
\index{m\_userLog@{m\_userLog}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{m\_userLog}{m\_userLog}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_user_log}{TUser\+Log}}$\ast$ Farm\+Controller\+::m\+\_\+user\+Log}

\mbox{\Hypertarget{class_farm_controller_a36b3e560d89afd22439a5d50d4f5c27f}\label{class_farm_controller_a36b3e560d89afd22439a5d50d4f5c27f}} 
\index{FarmController@{FarmController}!NextTaskId@{NextTaskId}}
\index{NextTaskId@{NextTaskId}!FarmController@{FarmController}}
\doxysubsubsection{\texorpdfstring{NextTaskId}{NextTaskId}}
{\footnotesize\ttfamily int Farm\+Controller\+::\+Next\+Task\+Id = 0\hspace{0.3cm}{\ttfamily [static]}}



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonzfarm/tfarmcontroller/tfarmcontroller.\+cpp\end{DoxyCompactItemize}
