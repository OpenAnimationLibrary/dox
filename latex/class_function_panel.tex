\hypertarget{class_function_panel}{}\doxysection{Function\+Panel Class Reference}
\label{class_function_panel}\index{FunctionPanel@{FunctionPanel}}


Channel edit panel (numcols + graph popup)  




{\ttfamily \#include $<$functionpanel.\+h$>$}

Inheritance diagram for Function\+Panel\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_function_panel}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_function_panel_1_1_drag_tool}{Drag\+Tool}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum {\bfseries Handle} \{ \newline
{\bfseries None}
, {\bfseries Curve}
, {\bfseries Point}
, {\bfseries Speed\+In}
, \newline
{\bfseries Speed\+Out}
, {\bfseries Ease\+In}
, {\bfseries Ease\+Out}
, {\bfseries Ease\+In\+Percentage}
, \newline
{\bfseries Ease\+Out\+Percentage}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_function_panel_a78aa98ff731bcc7616e38fbbe1a1fa02}{on\+Frame\+Switched}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Signals}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_function_panel_aeb72647d1770c689e3442b2d4df66eb3}\label{class_function_panel_aeb72647d1770c689e3442b2d4df66eb3}} 
void {\bfseries keyframe\+Selected} (double frame)
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_function_panel_ab847ccf3ac084c9c0d4475df96187c33}{Function\+Panel}} (QWidget $\ast$parent, bool is\+Floating=true)
\item 
void \mbox{\hyperlink{class_function_panel_a79a65ba6410c0d92e4623a598ce95dc8}{set\+Model}} (\mbox{\hyperlink{class_function_tree_model}{Function\+Tree\+Model}} $\ast$model)
\item 
\mbox{\hyperlink{class_function_tree_model}{Function\+Tree\+Model}} $\ast$ \mbox{\hyperlink{class_function_panel_a2fae9f0929922e42059ba6555062a326}{get\+Model}} () const
\item 
\mbox{\hyperlink{class_function_selection}{Function\+Selection}} $\ast$ \mbox{\hyperlink{class_function_panel_a85ed7d49944a99065dcbb4513c675cfd}{get\+Selection}} () const
\item 
void \mbox{\hyperlink{class_function_panel_acc29da2d417c9360b0cd9d21b7d24a4b}{set\+Selection}} (\mbox{\hyperlink{class_function_selection}{Function\+Selection}} $\ast$selection)
\item 
void \mbox{\hyperlink{class_function_panel_afcff030b638b8c3d48ea26a10b4b9cf8}{set\+Frame\+Handle}} (\mbox{\hyperlink{class_t_frame_handle}{TFrame\+Handle}} $\ast$frame\+Handle)
\item 
\mbox{\hyperlink{class_t_frame_handle}{TFrame\+Handle}} $\ast$ \mbox{\hyperlink{class_function_panel_aae199385658f82424211992e7cd33137}{get\+Frame\+Handle}} () const
\item 
QTransform \mbox{\hyperlink{class_function_panel_ab6d2a0566b1b9a273323852fdc315490}{get\+View\+Transform}} () const
\item 
void \mbox{\hyperlink{class_function_panel_a2d5b0df177b6e7d70c10b56d8b2ab969}{set\+View\+Transform}} (const QTransform \&view\+Transform)
\item 
double \mbox{\hyperlink{class_function_panel_abe7fab4aacced4d71154566328f8cf86}{get\+Pixel\+Ratio}} (\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$curve) const
\item 
double \mbox{\hyperlink{class_function_panel_aa5ae36422bacc4f530928ac1ec3bc064}{x\+To\+Frame}} (double x) const
\item 
double \mbox{\hyperlink{class_function_panel_a2589a5f29b047ac081d7c3c0225fbba6}{frame\+ToX}} (double frame) const
\item 
double \mbox{\hyperlink{class_function_panel_abac75a76762ba09229e18955c98bc6c7}{value\+ToY}} (\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$curve, double value) const
\item 
double \mbox{\hyperlink{class_function_panel_ad2e564ec4fb464b840f110a8a9b5f759}{y\+To\+Value}} (\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$curve, double y) const
\item 
void \mbox{\hyperlink{class_function_panel_a0b9e76c6ffc5424a2072b93a709a573b}{pan}} (int dx, int dy)
\item 
void \mbox{\hyperlink{class_function_panel_a0bb4e611a6811beb1b96afd3da52387b}{pan}} (const QPoint \&delta)
\item 
void \mbox{\hyperlink{class_function_panel_a8db04286bc9c5145bd7b42772005f304}{zoom}} (double sx, double sy, const QPoint \&center)
\item 
void \mbox{\hyperlink{class_function_panel_ab19d3decf9edbd7de01ea4842bbcfb2e}{fit\+Selected\+Points}} ()
\item 
void \mbox{\hyperlink{class_function_panel_a33b2612504b6fa4376914528de6e8207}{fit\+Curve}} ()
\item 
void \mbox{\hyperlink{class_function_panel_afb658169484470d551e895fdc06971c8}{fit\+Graph\+To\+Window}} (bool current\+Curve\+Only=false)
\item 
void \mbox{\hyperlink{class_function_panel_a7cb7d3847517ba070905714962b6b158}{fit\+Region}} (double f0, double v0, double f1, double v1)
\item 
QPointF \mbox{\hyperlink{class_function_panel_a69cd75b456cf307bb73ba14b81067364}{get\+Win\+Pos}} (\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$curve, double frame, double value) const
\item 
QPointF \mbox{\hyperlink{class_function_panel_a2c4f0d67f32060d7173f9329d64f8e10}{get\+Win\+Pos}} (\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$curve, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&frame\+Value\+Pos) const
\item 
QPointF \mbox{\hyperlink{class_function_panel_a6d5fca77b9782020f65066bf57a951d9}{get\+Win\+Pos}} (\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$curve, double frame) const
\item 
QPointF \mbox{\hyperlink{class_function_panel_a8343fd82d0fd27f820c355e947befb47}{get\+Win\+Pos}} (\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$curve, const \mbox{\hyperlink{class_t_double_keyframe}{TDouble\+Keyframe}} \&kf) const
\item 
int \mbox{\hyperlink{class_function_panel_a9801d0812131347d20fda96d89465f88}{get\+Curve\+Distance}} (\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$curve, const QPoint \&win\+Pos)
\item 
\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$ \mbox{\hyperlink{class_function_panel_a969340b02fe4f5c7c892572365d1fc9c}{find\+Closest\+Curve}} (const QPoint \&win\+Pos, int max\+Win\+Distance)
\item 
\mbox{\hyperlink{class_function_tree_model_1_1_channel}{Function\+Tree\+Model\+::\+Channel}} $\ast$ \mbox{\hyperlink{class_function_panel_ab0a0960ff66c1f23e875f59279f8788d}{find\+Closest\+Channel}} (const QPoint \&win\+Pos, int max\+Win\+Distance)
\item 
int \mbox{\hyperlink{class_function_panel_aa5af168a128fb5ccda6851e89a6e5de4}{find\+Closest\+Gadget}} (const QPoint \&win\+Pos, Handle \&handle, int max\+Win\+Distance)
\item 
QPainter\+Path \mbox{\hyperlink{class_function_panel_a2bfa8626ece517a3ca19531d8a70f9b4}{get\+Segment\+Painter\+Path}} (\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$curve, int segment\+Index, int x0, int x1)
\item 
\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$ \mbox{\hyperlink{class_function_panel_a8586f0f87794977e2a860551eff14851}{get\+Current\+Curve}} () const
\item 
void \mbox{\hyperlink{class_function_panel_af46c072f1b63675cfebbce0314b0701c}{emit\+Keyframe\+Selected}} (double frame)
\item 
void \mbox{\hyperlink{class_function_panel_ab285f886797058670c35229b2bca04bc}{set\+BGColor}} (const QColor \&color)
\item 
QColor \mbox{\hyperlink{class_function_panel_ad2bb88e80ad999f77bd27e90480d8258}{get\+BGColor}} () const
\item 
void \mbox{\hyperlink{class_function_panel_a0d71c48341d8eb5196ff191c2f195af9}{set\+Value\+Line\+Color}} (const QColor \&color)
\item 
QColor \mbox{\hyperlink{class_function_panel_adba761c17df34ba69c26fe3ce6863809}{get\+Value\+Line\+Color}} () const
\item 
void \mbox{\hyperlink{class_function_panel_a02850f151f3a8f66672cbeaae2a318ae}{set\+Frame\+Line\+Color}} (const QColor \&color)
\item 
QColor \mbox{\hyperlink{class_function_panel_a07c5f43da9dc293851cdcf95bd0b5bb6}{get\+Frame\+Line\+Color}} () const
\item 
void \mbox{\hyperlink{class_function_panel_a332dd23ec404fc2868a2b800509f7adb}{set\+Other\+Curves\+Color}} (const QColor \&color)
\item 
QColor \mbox{\hyperlink{class_function_panel_af89ba5fcf11282c76264512978939bf7}{get\+Other\+Curves\+Color}} () const
\item 
void \mbox{\hyperlink{class_function_panel_a8bdacb32de24d5e6a8a0cdbc5904f1b7}{set\+Ruler\+Background}} (const QColor \&color)
\item 
QColor \mbox{\hyperlink{class_function_panel_af87c9874396d3382bd9d8c5934b086fc}{get\+Ruler\+Background}} () const
\item 
void \mbox{\hyperlink{class_function_panel_a2bc32d0bc925303f7d394a3a2516976b}{set\+Text\+Color}} (const QColor \&color)
\item 
QColor \mbox{\hyperlink{class_function_panel_adb21af5eed395a63fe0a50f3032d301f}{get\+Text\+Color}} () const
\item 
void \mbox{\hyperlink{class_function_panel_a6aed26a0cc44ed451a5a4d4a25239835}{set\+Sub\+Color}} (const QColor \&color)
\item 
QColor \mbox{\hyperlink{class_function_panel_a949210ae52abc2ffa82fdfc1ecc69897}{get\+Sub\+Color}} () const
\item 
void \mbox{\hyperlink{class_function_panel_a85bc90c4d6839e75687d2d97dd8ca46b}{set\+Selected\+Color}} (const QColor \&color)
\item 
QColor \mbox{\hyperlink{class_function_panel_a8d0b3f6a0ba19313cfe24d9082d7422a}{get\+Selected\+Color}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_function_panel_a0b175c6315b45dfd21cefd17fa92b67d}{update\+Gadgets}} (\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$curve)
\item 
void \mbox{\hyperlink{class_function_panel_a2d149bcb9427c19b35d87b08f08661fc}{draw\+Current\+Frame}} (QPainter \&)
\item 
void \mbox{\hyperlink{class_function_panel_a966f87533d6c9a2b5af1a92fec65de2d}{draw\+Frame\+Grid}} (QPainter \&)
\item 
void \mbox{\hyperlink{class_function_panel_a54d24e59a81808f676420c32b3fbd831}{draw\+Value\+Grid}} (QPainter \&)
\item 
void \mbox{\hyperlink{class_function_panel_aeab06b4bf86d57700b33a8012cbb76e0}{draw\+Other\+Curves}} (QPainter \&)
\item 
void \mbox{\hyperlink{class_function_panel_abe278d04110c0df4bdd3b65e67484996}{draw\+Current\+Curve}} (QPainter \&)
\item 
void \mbox{\hyperlink{class_function_panel_ae581269521d5fcfcb6eb8be1443a0d1d}{draw\+Group\+Keyframes}} (QPainter \&)
\item 
void \mbox{\hyperlink{class_function_panel_aa4955bc96ad1955753e73c78f8173e98}{paint\+Event}} (QPaint\+Event $\ast$e) override
\item 
void \mbox{\hyperlink{class_function_panel_a84f4e6f7f78414edab4de2741e55aee8}{mouse\+Press\+Event}} (QMouse\+Event $\ast$e) override
\item 
void \mbox{\hyperlink{class_function_panel_ad0e3d67793c8344048b5af789a2ebf81}{mouse\+Release\+Event}} (QMouse\+Event $\ast$e) override
\item 
void \mbox{\hyperlink{class_function_panel_aa885d8b9f213073a94517f124ae226b5}{mouse\+Move\+Event}} (QMouse\+Event $\ast$e) override
\item 
void \mbox{\hyperlink{class_function_panel_aa85c37ba4cbe7e76e7bfcdd53c287c80}{wheel\+Event}} (QWheel\+Event $\ast$e) override
\item 
void \mbox{\hyperlink{class_function_panel_ad7a4a409cd36b50d7fa4d1cdae4420bd}{open\+Context\+Menu}} (QMouse\+Event $\ast$e)
\item 
void \mbox{\hyperlink{class_function_panel_a43308d4ed20cbc0990e44bcdc2d05dc0}{key\+Press\+Event}} (QKey\+Event $\ast$e) override
\item 
void \mbox{\hyperlink{class_function_panel_a1ef3bc206e9c09d1af791a1aef7153d6}{enter\+Event}} (QEvent $\ast$) override
\item 
void \mbox{\hyperlink{class_function_panel_a0a8e00a88cbf31e102cb85cee758f846}{leave\+Event}} (QEvent $\ast$) override
\item 
void \mbox{\hyperlink{class_function_panel_a674337a8b400ed2a112da729d85deefb}{show\+Event}} (QShow\+Event $\ast$) override
\item 
void \mbox{\hyperlink{class_function_panel_a45c2c0dac646c6b0a7c90e27593bec81}{hide\+Event}} (QHide\+Event $\ast$) override
\end{DoxyCompactItemize}
\doxysubsection*{Properties}
\begin{DoxyCompactItemize}
\item 
QColor \mbox{\hyperlink{class_function_panel_ab35458c7a03235059fe023a097b3aa63}{BGColor}}
\item 
QColor \mbox{\hyperlink{class_function_panel_a58e6a214c20b16b2da20eef8f6c5321a}{Value\+Line\+Color}}
\item 
QColor \mbox{\hyperlink{class_function_panel_a2e9f95bdea8d70e2922ce4d5a5fdff53}{Frame\+Line\+Color}}
\item 
QColor \mbox{\hyperlink{class_function_panel_a07459b6409948b9ddab3554a613b18f1}{Other\+Curves\+Color}}
\item 
QColor \mbox{\hyperlink{class_function_panel_a6d25d8fe2504a48cacfa2a3d3da64232}{Ruler\+Background}}
\item 
QColor \mbox{\hyperlink{class_function_panel_a6a9f9641759ec59213fa5b5b15de6976}{Text\+Color}}
\item 
QColor \mbox{\hyperlink{class_function_panel_ab542ec321e7383d01211491513de80ea}{Sub\+Color}}
\item 
QColor \mbox{\hyperlink{class_function_panel_a2e807e89469675f19f15117d879f6bac}{Selected\+Color}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Channel edit panel (numcols + graph popup) 

\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{class_function_panel_a5522f7a820b6d47d64e1aec4b2ca9a3a}\label{class_function_panel_a5522f7a820b6d47d64e1aec4b2ca9a3a}} 
\index{FunctionPanel@{FunctionPanel}!Handle@{Handle}}
\index{Handle@{Handle}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{Handle}{Handle}}
{\footnotesize\ttfamily enum Function\+Panel\+::\+Handle}


\begin{DoxyCode}{0}
\DoxyCodeLine{00060               \{}
\DoxyCodeLine{00061     None,}
\DoxyCodeLine{00062     Curve,}
\DoxyCodeLine{00063     Point,}
\DoxyCodeLine{00064     SpeedIn,}
\DoxyCodeLine{00065     SpeedOut,}
\DoxyCodeLine{00066     EaseIn,}
\DoxyCodeLine{00067     EaseOut,}
\DoxyCodeLine{00068     EaseInPercentage,}
\DoxyCodeLine{00069     EaseOutPercentage}
\DoxyCodeLine{00070   \};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_function_panel_ab847ccf3ac084c9c0d4475df96187c33}\label{class_function_panel_ab847ccf3ac084c9c0d4475df96187c33}} 
\index{FunctionPanel@{FunctionPanel}!FunctionPanel@{FunctionPanel}}
\index{FunctionPanel@{FunctionPanel}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{FunctionPanel()}{FunctionPanel()}}
{\footnotesize\ttfamily Function\+Panel\+::\+Function\+Panel (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent,  }\item[{bool}]{is\+Floating = {\ttfamily true} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00239     : QDialog(parent)}
\DoxyCodeLine{00240     , m\_functionTreeModel(0)}
\DoxyCodeLine{00241     , m\_viewTransform()}
\DoxyCodeLine{00242     , m\_valueAxisX(50)}
\DoxyCodeLine{00243     , m\_frameAxisY(50)}
\DoxyCodeLine{00244     , m\_graphViewportY(50)}
\DoxyCodeLine{00245     , m\_frameHandle(0)}
\DoxyCodeLine{00246     , m\_dragTool(0)}
\DoxyCodeLine{00247     , m\_currentFrameStatus(0)}
\DoxyCodeLine{00248     , m\_selection(0)}
\DoxyCodeLine{00249     , m\_curveShape(SMOOTH)}
\DoxyCodeLine{00250     , m\_isFloating(isFloating) \{}
\DoxyCodeLine{00251   setWindowTitle(tr(\textcolor{stringliteral}{"{}Function Curves"{}}));}
\DoxyCodeLine{00252 }
\DoxyCodeLine{00253   m\_viewTransform.translate(50, 200);}
\DoxyCodeLine{00254   m\_viewTransform.scale(5, -\/1);}
\DoxyCodeLine{00255 }
\DoxyCodeLine{00256   setFocusPolicy(Qt::ClickFocus);}
\DoxyCodeLine{00257   setMouseTracking(\textcolor{keyword}{true});}
\DoxyCodeLine{00258   m\_highlighted.handle = None;}
\DoxyCodeLine{00259   m\_highlighted.gIndex = -\/1;}
\DoxyCodeLine{00260   m\_cursor.visible     = \textcolor{keyword}{false};}
\DoxyCodeLine{00261   m\_cursor.frame = m\_cursor.value = 0;}
\DoxyCodeLine{00262   m\_curveLabel.text               = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00263   m\_curveLabel.curve              = 0;}
\DoxyCodeLine{00264 }
\DoxyCodeLine{00265   \textcolor{keywordflow}{if} (m\_isFloating) \{}
\DoxyCodeLine{00266     \textcolor{comment}{// load the dialog size}}
\DoxyCodeLine{00267     \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp(ToonzFolder::getMyModuleDir() + \mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}popups.ini"{}}));}
\DoxyCodeLine{00268     QSettings settings(toQString(fp), QSettings::IniFormat);}
\DoxyCodeLine{00269 }
\DoxyCodeLine{00270     setGeometry(}
\DoxyCodeLine{00271         settings.value(\textcolor{stringliteral}{"{}FunctionCurves"{}}, QRect(500, 500, 400, 300)).toRect());}
\DoxyCodeLine{00272   \}}
\DoxyCodeLine{00273 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a605c3868286f538f7d3a019d2c260ec9}\label{class_function_panel_a605c3868286f538f7d3a019d2c260ec9}} 
\index{FunctionPanel@{FunctionPanel}!````~FunctionPanel@{$\sim$FunctionPanel}}
\index{````~FunctionPanel@{$\sim$FunctionPanel}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{$\sim$FunctionPanel()}{~FunctionPanel()}}
{\footnotesize\ttfamily Function\+Panel\+::$\sim$\+Function\+Panel (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00277                               \{}
\DoxyCodeLine{00278   \textcolor{keywordflow}{if} (m\_isFloating) \{}
\DoxyCodeLine{00279     \textcolor{comment}{// save the dialog size}}
\DoxyCodeLine{00280     \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp(ToonzFolder::getMyModuleDir() + \mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}popups.ini"{}}));}
\DoxyCodeLine{00281     QSettings settings(toQString(fp), QSettings::IniFormat);}
\DoxyCodeLine{00282 }
\DoxyCodeLine{00283     settings.setValue(\textcolor{stringliteral}{"{}FunctionCurves"{}}, geometry());}
\DoxyCodeLine{00284   \}}
\DoxyCodeLine{00285 }
\DoxyCodeLine{00286   \textcolor{keyword}{delete} m\_dragTool;}
\DoxyCodeLine{00287 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_function_panel_abe278d04110c0df4bdd3b65e67484996}\label{class_function_panel_abe278d04110c0df4bdd3b65e67484996}} 
\index{FunctionPanel@{FunctionPanel}!drawCurrentCurve@{drawCurrentCurve}}
\index{drawCurrentCurve@{drawCurrentCurve}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{drawCurrentCurve()}{drawCurrentCurve()}}
{\footnotesize\ttfamily void Function\+Panel\+::draw\+Current\+Curve (\begin{DoxyParamCaption}\item[{QPainter \&}]{painter }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00889                                                       \{}
\DoxyCodeLine{00890   \mbox{\hyperlink{class_function_tree_model_1_1_channel}{FunctionTreeModel::Channel}} *channel =}
\DoxyCodeLine{00891       m\_functionTreeModel ? m\_functionTreeModel-\/>getCurrentChannel() : 0;}
\DoxyCodeLine{00892   \textcolor{keywordflow}{if} (!channel) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00893   \mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *curve = channel-\/>getParam();}
\DoxyCodeLine{00894 }
\DoxyCodeLine{00895   painter.setRenderHint(QPainter::Antialiasing, \textcolor{keyword}{true});}
\DoxyCodeLine{00896   QColor color = Qt::red;}
\DoxyCodeLine{00897   QPen solidPen(color);}
\DoxyCodeLine{00898   QPen dashedPen(color);}
\DoxyCodeLine{00899   QVector<qreal> dashes;}
\DoxyCodeLine{00900   dashes << 4 << 4;}
\DoxyCodeLine{00901   dashedPen.setDashPattern(dashes);}
\DoxyCodeLine{00902   painter.setBrush(Qt::NoBrush);}
\DoxyCodeLine{00903 }
\DoxyCodeLine{00904   \textcolor{keywordtype}{int} x0 = m\_valueAxisX;}
\DoxyCodeLine{00905   \textcolor{keywordtype}{int} x1 = width();}
\DoxyCodeLine{00906 }
\DoxyCodeLine{00907   \textcolor{comment}{// draw curve}}
\DoxyCodeLine{00908   \textcolor{keywordtype}{int} kCount = curve-\/>getKeyframeCount();}
\DoxyCodeLine{00909   \textcolor{keywordflow}{if} (kCount == 0) \{}
\DoxyCodeLine{00910     \textcolor{comment}{// no control points}}
\DoxyCodeLine{00911     painter.setPen(dashedPen);}
\DoxyCodeLine{00912     painter.drawPath(getSegmentPainterPath(curve, 0, x0, x1));}
\DoxyCodeLine{00913   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00914     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = -\/1; k < kCount; k++) \{}
\DoxyCodeLine{00915       \textcolor{keywordflow}{if} (k < 0 || k >= kCount -\/ 1) \{}
\DoxyCodeLine{00916         painter.setPen(dashedPen);}
\DoxyCodeLine{00917         painter.drawPath(getSegmentPainterPath(curve, k, x0, x1));}
\DoxyCodeLine{00918       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00919         TDoubleKeyframe::Type segmentType = curve-\/>getKeyframe(k).m\_type;}
\DoxyCodeLine{00920         QColor color                      = Qt::red;}
\DoxyCodeLine{00921         \textcolor{keywordflow}{if} (segmentType == TDoubleKeyframe::Expression ||}
\DoxyCodeLine{00922             segmentType == TDoubleKeyframe::SimilarShape ||}
\DoxyCodeLine{00923             segmentType == TDoubleKeyframe::File)}
\DoxyCodeLine{00924           color = QColor(185, 0, 0);}
\DoxyCodeLine{00925         \textcolor{keywordflow}{if} (getSelection()-\/>isSegmentSelected(curve, k))}
\DoxyCodeLine{00926           solidPen.setWidth(2);}
\DoxyCodeLine{00927         \textcolor{keywordflow}{else}}
\DoxyCodeLine{00928           solidPen.setWidth(0);}
\DoxyCodeLine{00929         solidPen.setColor(color);}
\DoxyCodeLine{00930         painter.setPen(solidPen);}
\DoxyCodeLine{00931         painter.drawPath(getSegmentPainterPath(curve, k, x0, x1));}
\DoxyCodeLine{00932       \}}
\DoxyCodeLine{00933     \}}
\DoxyCodeLine{00934   \}}
\DoxyCodeLine{00935   painter.setPen(QPen(m\_textColor, 0));}
\DoxyCodeLine{00936 }
\DoxyCodeLine{00937   \textcolor{comment}{// draw control points}}
\DoxyCodeLine{00938   updateGadgets(curve);}
\DoxyCodeLine{00939   painter.setPen(m\_textColor);}
\DoxyCodeLine{00940   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < (int)m\_gadgets.size(); j++) \{}
\DoxyCodeLine{00941     \textcolor{keyword}{const} Gadget \&g = m\_gadgets[j];}
\DoxyCodeLine{00942     \textcolor{keywordflow}{if} (g.m\_handle == SpeedIn || g.m\_handle == SpeedOut)}
\DoxyCodeLine{00943       painter.drawLine(g.m\_pointPos, g.m\_pos);}
\DoxyCodeLine{00944   \}}
\DoxyCodeLine{00945   solidPen.setWidth(0);}
\DoxyCodeLine{00946   solidPen.setColor(Qt::red);}
\DoxyCodeLine{00947   painter.setPen(solidPen);}
\DoxyCodeLine{00948   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < (int)m\_gadgets.size() -\/ 1; j++)}
\DoxyCodeLine{00949     \textcolor{keywordflow}{if} (m\_gadgets[j].m\_handle == Point \&\& m\_gadgets[j + 1].m\_handle \&\&}
\DoxyCodeLine{00950         m\_gadgets[j + 1].m\_handle != 100 \&\&}
\DoxyCodeLine{00951         m\_gadgets[j].m\_pos.x() == m\_gadgets[j + 1].m\_pos.x())}
\DoxyCodeLine{00952       painter.drawLine(m\_gadgets[j].m\_pos, m\_gadgets[j + 1].m\_pos);}
\DoxyCodeLine{00953 }
\DoxyCodeLine{00954   painter.setRenderHint(QPainter::Antialiasing, \textcolor{keyword}{false});}
\DoxyCodeLine{00955   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < (int)m\_gadgets.size(); j++) \{}
\DoxyCodeLine{00956     \textcolor{keyword}{const} Gadget \&g = m\_gadgets[j];}
\DoxyCodeLine{00957     \textcolor{keywordtype}{int} i           = g.m\_kIndex;}
\DoxyCodeLine{00958     \textcolor{keywordtype}{int} r           = 1;}
\DoxyCodeLine{00959     QPointF p       = g.m\_pos;}
\DoxyCodeLine{00960     \textcolor{keywordtype}{double} easeDx = 0, easeHeight = 15, easeTick = 2;}
\DoxyCodeLine{00961     \textcolor{keywordtype}{bool} isSelected = getSelection()-\/>isSelected(curve, i);}
\DoxyCodeLine{00962     \textcolor{keywordtype}{bool} isHighlighted =}
\DoxyCodeLine{00963         m\_highlighted.handle == g.m\_handle \&\& m\_highlighted.gIndex == j;}
\DoxyCodeLine{00964     \textcolor{keywordflow}{switch} (g.m\_handle) \{}
\DoxyCodeLine{00965     \textcolor{keywordflow}{case} Point:}
\DoxyCodeLine{00966       painter.setBrush(isSelected ? QColor(255, 126, 0) : m\_subColor);}
\DoxyCodeLine{00967       painter.setPen(m\_textColor);}
\DoxyCodeLine{00968       r = isHighlighted ? 3 : 2;}
\DoxyCodeLine{00969       drawSquare(painter, p, r);}
\DoxyCodeLine{00970       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00971 }
\DoxyCodeLine{00972     \textcolor{keywordflow}{case} SpeedIn:}
\DoxyCodeLine{00973     \textcolor{keywordflow}{case} SpeedOut:}
\DoxyCodeLine{00974       painter.setBrush(m\_subColor);}
\DoxyCodeLine{00975       painter.setPen(m\_textColor);}
\DoxyCodeLine{00976       r = isHighlighted ? 3 : 2;}
\DoxyCodeLine{00977       drawRoundedSquare(painter, p, r);}
\DoxyCodeLine{00978       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00979 }
\DoxyCodeLine{00980     \textcolor{keywordflow}{case} EaseIn:}
\DoxyCodeLine{00981     \textcolor{keywordflow}{case} EaseOut:}
\DoxyCodeLine{00982     \textcolor{keywordflow}{case} EaseInPercentage:}
\DoxyCodeLine{00983     \textcolor{keywordflow}{case} EaseOutPercentage:}
\DoxyCodeLine{00984       painter.setBrush(Qt::NoBrush);}
\DoxyCodeLine{00985       painter.setPen(isHighlighted ? QColor(255, 126, 0) : m\_textColor);}
\DoxyCodeLine{00986       painter.drawLine(p.x(), p.y() -\/ easeHeight, p.x(), p.y() + easeHeight);}
\DoxyCodeLine{00987       \textcolor{keywordflow}{if} (g.m\_handle == EaseIn || g.m\_handle == EaseInPercentage)}
\DoxyCodeLine{00988         easeDx = easeTick;}
\DoxyCodeLine{00989       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00990         easeDx = -\/easeTick;}
\DoxyCodeLine{00991       painter.drawLine(p.x(), p.y() -\/ easeHeight, p.x() + easeDx,}
\DoxyCodeLine{00992                        p.y() -\/ easeHeight -\/ easeTick);}
\DoxyCodeLine{00993       painter.drawLine(p.x(), p.y() + easeHeight, p.x() + easeDx,}
\DoxyCodeLine{00994                        p.y() + easeHeight + easeTick);}
\DoxyCodeLine{00995       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00996 }
\DoxyCodeLine{00997       painter.setBrush(}
\DoxyCodeLine{00998           Qt::NoBrush);  \textcolor{comment}{// isSelected ? QColor(255,126,0) : Qt::white);}}
\DoxyCodeLine{00999       painter.setPen(isHighlighted ? QColor(255, 126, 0) : m\_selectedColor);}
\DoxyCodeLine{01000       painter.drawLine(p.x(), p.y() -\/ 15, p.x(), p.y() + 15);}
\DoxyCodeLine{01001       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01002     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01003       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01004     \}}
\DoxyCodeLine{01005   \}}
\DoxyCodeLine{01006 }
\DoxyCodeLine{01007   painter.setRenderHint(QPainter::Antialiasing, \textcolor{keyword}{false});}
\DoxyCodeLine{01008 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a2d149bcb9427c19b35d87b08f08661fc}\label{class_function_panel_a2d149bcb9427c19b35d87b08f08661fc}} 
\index{FunctionPanel@{FunctionPanel}!drawCurrentFrame@{drawCurrentFrame}}
\index{drawCurrentFrame@{drawCurrentFrame}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{drawCurrentFrame()}{drawCurrentFrame()}}
{\footnotesize\ttfamily void Function\+Panel\+::draw\+Current\+Frame (\begin{DoxyParamCaption}\item[{QPainter \&}]{painter }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00522                                                       \{}
\DoxyCodeLine{00523   \textcolor{keywordtype}{int} currentframe = 0;}
\DoxyCodeLine{00524   \textcolor{keywordflow}{if} (m\_frameHandle) currentframe = m\_frameHandle-\/>getFrame();}
\DoxyCodeLine{00525   \textcolor{keywordtype}{int} x = frameToX(currentframe);}
\DoxyCodeLine{00526   \textcolor{keywordflow}{if} (m\_currentFrameStatus == 0)}
\DoxyCodeLine{00527     painter.setPen(Qt::magenta);}
\DoxyCodeLine{00528   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_currentFrameStatus == 1)}
\DoxyCodeLine{00529     painter.setPen(Qt::white);}
\DoxyCodeLine{00530   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00531     painter.setPen(m\_selectedColor);}
\DoxyCodeLine{00532   \textcolor{keywordtype}{int} y = m\_graphViewportY + 1;}
\DoxyCodeLine{00533   painter.drawLine(x -\/ 1, y, x -\/ 1, height());}
\DoxyCodeLine{00534   painter.drawLine(x + 1, y, x + 1, height());}
\DoxyCodeLine{00535 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a966f87533d6c9a2b5af1a92fec65de2d}\label{class_function_panel_a966f87533d6c9a2b5af1a92fec65de2d}} 
\index{FunctionPanel@{FunctionPanel}!drawFrameGrid@{drawFrameGrid}}
\index{drawFrameGrid@{drawFrameGrid}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{drawFrameGrid()}{drawFrameGrid()}}
{\footnotesize\ttfamily void Function\+Panel\+::draw\+Frame\+Grid (\begin{DoxyParamCaption}\item[{QPainter \&}]{painter }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00539                                                    \{}
\DoxyCodeLine{00540   QFontMetrics fm(painter.font());}
\DoxyCodeLine{00541 }
\DoxyCodeLine{00542   \textcolor{comment}{// ruler background}}
\DoxyCodeLine{00543   painter.setPen(Qt::NoPen);}
\DoxyCodeLine{00544   painter.setBrush(getRulerBackground());}
\DoxyCodeLine{00545   painter.drawRect(0, 0, width(), m\_frameAxisY);}
\DoxyCodeLine{00546 }
\DoxyCodeLine{00547   \textcolor{comment}{// draw ticks and labels}}
\DoxyCodeLine{00548   \mbox{\hyperlink{class_ruler}{Ruler}} ruler;}
\DoxyCodeLine{00549   ruler.setTransform(m\_viewTransform.m11(), m\_viewTransform.dx(), -\/1);}
\DoxyCodeLine{00550   ruler.setRange(m\_valueAxisX, width());}
\DoxyCodeLine{00551   ruler.setMinLabelDistance(fm.width(\textcolor{stringliteral}{"{}-\/8888"{}}) + 2);}
\DoxyCodeLine{00552   ruler.setMinDistance(5);}
\DoxyCodeLine{00553   ruler.setMinStep(1);}
\DoxyCodeLine{00554   ruler.compute();}
\DoxyCodeLine{00555   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < ruler.getTickCount(); i++) \{}
\DoxyCodeLine{00556     \textcolor{keywordtype}{double} f     = ruler.getTick(i);}
\DoxyCodeLine{00557     \textcolor{keywordtype}{bool} isLabel = ruler.isLabel(i);}
\DoxyCodeLine{00558     \textcolor{keywordtype}{int} x        = frameToX(f);}
\DoxyCodeLine{00559     painter.setPen(m\_textColor);}
\DoxyCodeLine{00560     \textcolor{keywordtype}{int} y = m\_frameAxisY;}
\DoxyCodeLine{00561     painter.drawLine(x, y -\/ (isLabel ? 4 : 2), x, y);}
\DoxyCodeLine{00562     painter.setPen(getFrameLineColor());}
\DoxyCodeLine{00563     painter.drawLine(x, m\_graphViewportY, x, height());}
\DoxyCodeLine{00564     \textcolor{keywordflow}{if} (isLabel) \{}
\DoxyCodeLine{00565       painter.setPen(m\_textColor);}
\DoxyCodeLine{00566       QString labelText = QString::number(f + 1);}
\DoxyCodeLine{00567       painter.drawText(x -\/ fm.width(labelText) / 2, y -\/ 6, labelText);}
\DoxyCodeLine{00568     \}}
\DoxyCodeLine{00569   \}}
\DoxyCodeLine{00570 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_ae581269521d5fcfcb6eb8be1443a0d1d}\label{class_function_panel_ae581269521d5fcfcb6eb8be1443a0d1d}} 
\index{FunctionPanel@{FunctionPanel}!drawGroupKeyframes@{drawGroupKeyframes}}
\index{drawGroupKeyframes@{drawGroupKeyframes}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{drawGroupKeyframes()}{drawGroupKeyframes()}}
{\footnotesize\ttfamily void Function\+Panel\+::draw\+Group\+Keyframes (\begin{DoxyParamCaption}\item[{QPainter \&}]{painter }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01012                                                         \{}
\DoxyCodeLine{01013   \mbox{\hyperlink{class_function_tree_model_1_1_channel}{FunctionTreeModel::Channel}} *channel =}
\DoxyCodeLine{01014       m\_functionTreeModel ? m\_functionTreeModel-\/>getCurrentChannel() : 0;}
\DoxyCodeLine{01015   \textcolor{keywordflow}{if} (!channel) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01016   QColor color = Qt::red;}
\DoxyCodeLine{01017   QPen solidPen(color);}
\DoxyCodeLine{01018   QPen dashedPen(color);}
\DoxyCodeLine{01019   QVector<qreal> dashes;}
\DoxyCodeLine{01020   dashes << 4 << 4;}
\DoxyCodeLine{01021   dashedPen.setDashPattern(dashes);}
\DoxyCodeLine{01022   painter.setBrush(Qt::NoBrush);}
\DoxyCodeLine{01023 }
\DoxyCodeLine{01024   \textcolor{keywordtype}{int} x0 = m\_valueAxisX;}
\DoxyCodeLine{01025   \textcolor{keywordtype}{int} x1 = width();}
\DoxyCodeLine{01026 }
\DoxyCodeLine{01027   solidPen.setWidth(0);}
\DoxyCodeLine{01028   solidPen.setColor(Qt::red);}
\DoxyCodeLine{01029   painter.setPen(solidPen);}
\DoxyCodeLine{01030 }
\DoxyCodeLine{01031   std::vector<double> keyframes;}
\DoxyCodeLine{01032   \textcolor{keywordtype}{int} y = 0;}
\DoxyCodeLine{01033   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < (int)m\_gadgets.size(); j++) \{}
\DoxyCodeLine{01034     \textcolor{keyword}{const} Gadget \&g = m\_gadgets[j];}
\DoxyCodeLine{01035     \textcolor{keywordtype}{int} i           = g.m\_kIndex;}
\DoxyCodeLine{01036     \textcolor{keywordtype}{int} r           = 1;}
\DoxyCodeLine{01037     QPointF p       = g.m\_pos;}
\DoxyCodeLine{01038     \textcolor{keywordtype}{double} easeDx = 0, easeHeight = 15, easeTick = 2;}
\DoxyCodeLine{01039     \textcolor{keywordtype}{bool} isSelected = \textcolor{keyword}{false};  \textcolor{comment}{// getSelection()-\/>isSelected(curve, i);}}
\DoxyCodeLine{01040     \textcolor{keywordtype}{bool} isHighlighted =}
\DoxyCodeLine{01041         m\_highlighted.handle == g.m\_handle \&\& m\_highlighted.gIndex == j;}
\DoxyCodeLine{01042     painter.setBrush(isSelected ? QColor(255, 126, 0) : m\_subColor);}
\DoxyCodeLine{01043     painter.setPen(m\_textColor);}
\DoxyCodeLine{01044     r = isHighlighted ? 3 : 2;}
\DoxyCodeLine{01045     QPainterPath pp;}
\DoxyCodeLine{01046     \textcolor{keywordtype}{int} d = 2;}
\DoxyCodeLine{01047     \textcolor{keywordtype}{int} h = 4;}
\DoxyCodeLine{01048     \textcolor{keywordflow}{switch} (g.m\_handle) \{}
\DoxyCodeLine{01049     \textcolor{keywordflow}{case} 100:}
\DoxyCodeLine{01050       drawSquare(painter, p, r);}
\DoxyCodeLine{01051       y = p.y();}
\DoxyCodeLine{01052       keyframes.push\_back(p.x());}
\DoxyCodeLine{01053       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01054     \textcolor{keywordflow}{case} 101:}
\DoxyCodeLine{01055       d = -\/d;}
\DoxyCodeLine{01056     \textcolor{comment}{// Note: NO break!}}
\DoxyCodeLine{01057     \textcolor{keywordflow}{case} 102:}
\DoxyCodeLine{01058       painter.setBrush(Qt::NoBrush);}
\DoxyCodeLine{01059       painter.setPen(isHighlighted ? QColor(255, 126, 0) : m\_textColor);}
\DoxyCodeLine{01060       pp.moveTo(p + QPointF(d, -\/h));}
\DoxyCodeLine{01061       pp.lineTo(p + QPointF(0, -\/h));}
\DoxyCodeLine{01062       pp.lineTo(p + QPointF(0, h));}
\DoxyCodeLine{01063       pp.lineTo(p + QPointF(d, h));}
\DoxyCodeLine{01064       painter.drawPath(pp);}
\DoxyCodeLine{01065       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01066     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01067       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01068     \}}
\DoxyCodeLine{01069   \}}
\DoxyCodeLine{01070   painter.setPen(m\_textColor);}
\DoxyCodeLine{01071   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i + 1 < (int)keyframes.size(); i++) \{}
\DoxyCodeLine{01072     painter.drawLine(keyframes[i] + 3, y, keyframes[i + 1] -\/ 3, y);}
\DoxyCodeLine{01073   \}}
\DoxyCodeLine{01074 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_aeab06b4bf86d57700b33a8012cbb76e0}\label{class_function_panel_aeab06b4bf86d57700b33a8012cbb76e0}} 
\index{FunctionPanel@{FunctionPanel}!drawOtherCurves@{drawOtherCurves}}
\index{drawOtherCurves@{drawOtherCurves}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{drawOtherCurves()}{drawOtherCurves()}}
{\footnotesize\ttfamily void Function\+Panel\+::draw\+Other\+Curves (\begin{DoxyParamCaption}\item[{QPainter \&}]{painter }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00627                                                      \{}
\DoxyCodeLine{00628   painter.setRenderHint(QPainter::Antialiasing, \textcolor{keyword}{false});}
\DoxyCodeLine{00629   painter.setBrush(Qt::NoBrush);}
\DoxyCodeLine{00630   \textcolor{keywordtype}{int} x0 = m\_valueAxisX;}
\DoxyCodeLine{00631   \textcolor{keywordtype}{int} x1 = width();}
\DoxyCodeLine{00632 }
\DoxyCodeLine{00633   QPen solidPen;}
\DoxyCodeLine{00634   QPen dashedPen;}
\DoxyCodeLine{00635   QVector<qreal> dashes;}
\DoxyCodeLine{00636   dashes << 4 << 4;}
\DoxyCodeLine{00637   dashedPen.setDashPattern(dashes);}
\DoxyCodeLine{00638 }
\DoxyCodeLine{00639   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_functionTreeModel-\/>getActiveChannelCount(); i++) \{}
\DoxyCodeLine{00640     \mbox{\hyperlink{class_function_tree_model_1_1_channel}{FunctionTreeModel::Channel}} *channel =}
\DoxyCodeLine{00641         m\_functionTreeModel-\/>getActiveChannel(i);}
\DoxyCodeLine{00642     \textcolor{keywordflow}{if} (channel-\/>isCurrent()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00643     \mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *curve = channel-\/>getParam();}
\DoxyCodeLine{00644     QColor color =}
\DoxyCodeLine{00645         curve == m\_curveLabel.curve ? m\_selectedColor : getOtherCurvesColor();}
\DoxyCodeLine{00646     solidPen.setColor(color);}
\DoxyCodeLine{00647     dashedPen.setColor(color);}
\DoxyCodeLine{00648     painter.setBrush(Qt::NoBrush);}
\DoxyCodeLine{00649 }
\DoxyCodeLine{00650     \textcolor{keywordtype}{int} kCount = curve-\/>getKeyframeCount();}
\DoxyCodeLine{00651     \textcolor{keywordflow}{if} (kCount == 0) \{}
\DoxyCodeLine{00652       \textcolor{comment}{// no control points}}
\DoxyCodeLine{00653       painter.setPen(dashedPen);}
\DoxyCodeLine{00654       painter.drawPath(getSegmentPainterPath(curve, 0, x0, x1));}
\DoxyCodeLine{00655     \}}
\DoxyCodeLine{00656     \textcolor{comment}{// draw control points and handles}}
\DoxyCodeLine{00657     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00658       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = -\/1; k < kCount; k++) \{}
\DoxyCodeLine{00659         painter.setPen((k < 0 || k >= kCount -\/ 1) ? dashedPen : solidPen);}
\DoxyCodeLine{00660         painter.drawPath(getSegmentPainterPath(curve, k, x0, x1));}
\DoxyCodeLine{00661       \}}
\DoxyCodeLine{00662       painter.setPen(m\_textColor);}
\DoxyCodeLine{00663       painter.setBrush(m\_subColor);}
\DoxyCodeLine{00664       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < kCount; k++) \{}
\DoxyCodeLine{00665         \textcolor{keywordtype}{double} frame = curve-\/>\mbox{\hyperlink{class_t_double_param_af08442b9fd968fddada028a6f07983d5}{keyframeIndexToFrame}}(k);}
\DoxyCodeLine{00666         QPointF p    = getWinPos(curve, frame, curve-\/>getValue(frame));}
\DoxyCodeLine{00667         painter.drawRect(p.x() -\/ 1, p.y() -\/ 1, 3, 3);}
\DoxyCodeLine{00668         QPointF p2 = getWinPos(curve, frame, curve-\/>getValue(frame, \textcolor{keyword}{true}));}
\DoxyCodeLine{00669         \textcolor{keywordflow}{if} (p2.y() != p.y()) \{}
\DoxyCodeLine{00670           painter.drawRect(p2.x() -\/ 1, p2.y() -\/ 1, 3, 3);}
\DoxyCodeLine{00671           painter.setPen(solidPen);}
\DoxyCodeLine{00672           painter.drawLine(p, p2);}
\DoxyCodeLine{00673           painter.setPen(m\_textColor);}
\DoxyCodeLine{00674         \}}
\DoxyCodeLine{00675       \}}
\DoxyCodeLine{00676     \}}
\DoxyCodeLine{00677   \}}
\DoxyCodeLine{00678   painter.setBrush(Qt::NoBrush);}
\DoxyCodeLine{00679   painter.setPen(m\_textColor);}
\DoxyCodeLine{00680   painter.setRenderHint(QPainter::Antialiasing, \textcolor{keyword}{false});}
\DoxyCodeLine{00681 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a54d24e59a81808f676420c32b3fbd831}\label{class_function_panel_a54d24e59a81808f676420c32b3fbd831}} 
\index{FunctionPanel@{FunctionPanel}!drawValueGrid@{drawValueGrid}}
\index{drawValueGrid@{drawValueGrid}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{drawValueGrid()}{drawValueGrid()}}
{\footnotesize\ttfamily void Function\+Panel\+::draw\+Value\+Grid (\begin{DoxyParamCaption}\item[{QPainter \&}]{painter }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00574                                                    \{}
\DoxyCodeLine{00575   \mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *curve = getCurrentCurve();}
\DoxyCodeLine{00576   \textcolor{keywordflow}{if} (!curve) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00577 }
\DoxyCodeLine{00578   QFontMetrics fm(painter.font());}
\DoxyCodeLine{00579 }
\DoxyCodeLine{00580   \textcolor{comment}{// ruler background}}
\DoxyCodeLine{00581   painter.setPen(Qt::NoPen);}
\DoxyCodeLine{00582   painter.setBrush(getRulerBackground());}
\DoxyCodeLine{00583   painter.drawRect(0, 0, m\_valueAxisX, height());}
\DoxyCodeLine{00584 }
\DoxyCodeLine{00585   \mbox{\hyperlink{class_ruler}{Ruler}} ruler;}
\DoxyCodeLine{00586   ruler.setTransform(m\_viewTransform.m22(), m\_viewTransform.dy());}
\DoxyCodeLine{00587   ruler.setRange(m\_graphViewportY, height());}
\DoxyCodeLine{00588   ruler.setMinLabelDistance(fm.height() + 2);}
\DoxyCodeLine{00589   ruler.setMinDistance(5);}
\DoxyCodeLine{00590   ruler.compute();}
\DoxyCodeLine{00591 }
\DoxyCodeLine{00592   painter.setBrush(Qt::NoBrush);}
\DoxyCodeLine{00593   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < ruler.getTickCount(); i++) \{}
\DoxyCodeLine{00594     \textcolor{keywordtype}{double} v     = ruler.getTick(i);}
\DoxyCodeLine{00595     \textcolor{keywordtype}{bool} isLabel = ruler.isLabel(i);}
\DoxyCodeLine{00596     \textcolor{keywordtype}{int} y        = tround(m\_viewTransform.m22() * v +}
\DoxyCodeLine{00597                    m\_viewTransform.dy());  \textcolor{comment}{// valueToY(curve, v);}}
\DoxyCodeLine{00598     painter.setPen(m\_textColor);}
\DoxyCodeLine{00599     \textcolor{keywordtype}{int} x = m\_valueAxisX;}
\DoxyCodeLine{00600     painter.drawLine(x -\/ (isLabel ? 5 : 2), y, x, y);}
\DoxyCodeLine{00601 }
\DoxyCodeLine{00602     painter.setPen(getValueLineColor());}
\DoxyCodeLine{00603     painter.drawLine(x, y, width(), y);}
\DoxyCodeLine{00604 }
\DoxyCodeLine{00605     \textcolor{keywordflow}{if} (isLabel) \{}
\DoxyCodeLine{00606       painter.setPen(m\_textColor);}
\DoxyCodeLine{00607       QString labelText = QString::number(v);}
\DoxyCodeLine{00608       painter.drawText(std::max(0, x -\/ 5 -\/ fm.width(labelText)),}
\DoxyCodeLine{00609                        y + fm.height() / 2, labelText);}
\DoxyCodeLine{00610     \}}
\DoxyCodeLine{00611   \}}
\DoxyCodeLine{00612   \textcolor{keywordflow}{if} (\textcolor{keyword}{false} \&\& ruler.getTickCount() > 10) \{}
\DoxyCodeLine{00613     \textcolor{keywordtype}{double} value = ruler.getTick(9);}
\DoxyCodeLine{00614     \textcolor{keywordtype}{double} dv    = fabs(ruler.getTick(10));}
\DoxyCodeLine{00615     \textcolor{keywordtype}{double} frame = 10;}
\DoxyCodeLine{00616     \textcolor{keywordtype}{double} df    = dv * getPixelRatio(curve);}
\DoxyCodeLine{00617     QPointF p0   = getWinPos(curve, frame, value);}
\DoxyCodeLine{00618     QPointF p1   = getWinPos(curve, frame + df, value + dv);}
\DoxyCodeLine{00619 }
\DoxyCodeLine{00620     painter.setPen(Qt::magenta);}
\DoxyCodeLine{00621     painter.drawRect(p0.x(), p0.y(), (p1 -\/ p0).x(), (p1 -\/ p0).y());}
\DoxyCodeLine{00622   \}}
\DoxyCodeLine{00623 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_af46c072f1b63675cfebbce0314b0701c}\label{class_function_panel_af46c072f1b63675cfebbce0314b0701c}} 
\index{FunctionPanel@{FunctionPanel}!emitKeyframeSelected@{emitKeyframeSelected}}
\index{emitKeyframeSelected@{emitKeyframeSelected}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{emitKeyframeSelected()}{emitKeyframeSelected()}}
{\footnotesize\ttfamily void Function\+Panel\+::emit\+Keyframe\+Selected (\begin{DoxyParamCaption}\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00186 \{ emit keyframeSelected(frame); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a1ef3bc206e9c09d1af791a1aef7153d6}\label{class_function_panel_a1ef3bc206e9c09d1af791a1aef7153d6}} 
\index{FunctionPanel@{FunctionPanel}!enterEvent@{enterEvent}}
\index{enterEvent@{enterEvent}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{enterEvent()}{enterEvent()}}
{\footnotesize\ttfamily void Function\+Panel\+::enter\+Event (\begin{DoxyParamCaption}\item[{QEvent $\ast$}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01433                                        \{}
\DoxyCodeLine{01434   m\_cursor.visible = \textcolor{keyword}{true};}
\DoxyCodeLine{01435   update();}
\DoxyCodeLine{01436 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_ab0a0960ff66c1f23e875f59279f8788d}\label{class_function_panel_ab0a0960ff66c1f23e875f59279f8788d}} 
\index{FunctionPanel@{FunctionPanel}!findClosestChannel@{findClosestChannel}}
\index{findClosestChannel@{findClosestChannel}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{findClosestChannel()}{findClosestChannel()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_function_tree_model_1_1_channel}{Function\+Tree\+Model\+::\+Channel}} $\ast$ Function\+Panel\+::find\+Closest\+Channel (\begin{DoxyParamCaption}\item[{const QPoint \&}]{win\+Pos,  }\item[{int}]{max\+Win\+Distance }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00388                                               \{}
\DoxyCodeLine{00389   \mbox{\hyperlink{class_function_tree_model_1_1_channel}{FunctionTreeModel::Channel}} *closestChannel = 0;}
\DoxyCodeLine{00390   \textcolor{keywordtype}{int} minDistance                            = maxWinDistance;}
\DoxyCodeLine{00391   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00392   \textcolor{keywordflow}{for} (i = 0; i < m\_functionTreeModel-\/>getActiveChannelCount(); i++) \{}
\DoxyCodeLine{00393     \mbox{\hyperlink{class_function_tree_model_1_1_channel}{FunctionTreeModel::Channel}} *channel =}
\DoxyCodeLine{00394         m\_functionTreeModel-\/>getActiveChannel(i);}
\DoxyCodeLine{00395     \mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *curve = channel-\/>getParam();}
\DoxyCodeLine{00396     \textcolor{keywordtype}{int} distance        = getCurveDistance(curve, winPos);}
\DoxyCodeLine{00397     \textcolor{keywordflow}{if} (distance < minDistance) \{}
\DoxyCodeLine{00398       closestChannel = channel;}
\DoxyCodeLine{00399       minDistance    = distance;}
\DoxyCodeLine{00400     \}}
\DoxyCodeLine{00401   \}}
\DoxyCodeLine{00402   \textcolor{keywordflow}{return} closestChannel;}
\DoxyCodeLine{00403 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a969340b02fe4f5c7c892572365d1fc9c}\label{class_function_panel_a969340b02fe4f5c7c892572365d1fc9c}} 
\index{FunctionPanel@{FunctionPanel}!findClosestCurve@{findClosestCurve}}
\index{findClosestCurve@{findClosestCurve}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{findClosestCurve()}{findClosestCurve()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$ Function\+Panel\+::find\+Closest\+Curve (\begin{DoxyParamCaption}\item[{const QPoint \&}]{win\+Pos,  }\item[{int}]{max\+Win\+Distance }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00408                                                                   \{}
\DoxyCodeLine{00409   \mbox{\hyperlink{class_function_tree_model_1_1_channel}{FunctionTreeModel::Channel}} *closestChannel =}
\DoxyCodeLine{00410       findClosestChannel(winPos, maxWinDistance);}
\DoxyCodeLine{00411   \textcolor{keywordflow}{return} closestChannel ? closestChannel-\/>getParam() : 0;}
\DoxyCodeLine{00412 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_aa5af168a128fb5ccda6851e89a6e5de4}\label{class_function_panel_aa5af168a128fb5ccda6851e89a6e5de4}} 
\index{FunctionPanel@{FunctionPanel}!findClosestGadget@{findClosestGadget}}
\index{findClosestGadget@{findClosestGadget}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{findClosestGadget()}{findClosestGadget()}}
{\footnotesize\ttfamily int Function\+Panel\+::find\+Closest\+Gadget (\begin{DoxyParamCaption}\item[{const QPoint \&}]{win\+Pos,  }\item[{Handle \&}]{handle,  }\item[{int}]{max\+Win\+Distance }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00418                                                       \{}
\DoxyCodeLine{00419   \textcolor{comment}{// search only handles close enough (i.e. distance<maxDistance)}}
\DoxyCodeLine{00420   \textcolor{keywordtype}{int} minDistance = maxDistance;}
\DoxyCodeLine{00421   \textcolor{keywordtype}{int} k           = -\/1;}
\DoxyCodeLine{00422   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_gadgets.size(); i++) \{}
\DoxyCodeLine{00423     \textcolor{keywordflow}{if} (m\_gadgets[i].m\_hitRegion.contains(winPos)) \{}
\DoxyCodeLine{00424       QPoint p;}
\DoxyCodeLine{00425       \textcolor{keywordtype}{double} d = (m\_gadgets[i].m\_hitRegion.center() -\/ winPos).manhattanLength();}
\DoxyCodeLine{00426       \textcolor{keywordflow}{if} (d < minDistance) \{}
\DoxyCodeLine{00427         k           = i;}
\DoxyCodeLine{00428         minDistance = d;}
\DoxyCodeLine{00429       \}}
\DoxyCodeLine{00430     \}}
\DoxyCodeLine{00431   \}}
\DoxyCodeLine{00432   \textcolor{keywordflow}{if} (k >= 0) \{}
\DoxyCodeLine{00433     handle = m\_gadgets[k].m\_handle;}
\DoxyCodeLine{00434     \textcolor{keywordflow}{return} k;  \textcolor{comment}{// m\_gadgets[k].m\_kIndex;}}
\DoxyCodeLine{00435   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00436     handle = None;}
\DoxyCodeLine{00437     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00438   \}}
\DoxyCodeLine{00439 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a33b2612504b6fa4376914528de6e8207}\label{class_function_panel_a33b2612504b6fa4376914528de6e8207}} 
\index{FunctionPanel@{FunctionPanel}!fitCurve@{fitCurve}}
\index{fitCurve@{fitCurve}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{fitCurve()}{fitCurve()}}
{\footnotesize\ttfamily void Function\+Panel\+::fit\+Curve (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01521 \{ fitGraphToWindow(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_afb658169484470d551e895fdc06971c8}\label{class_function_panel_afb658169484470d551e895fdc06971c8}} 
\index{FunctionPanel@{FunctionPanel}!fitGraphToWindow@{fitGraphToWindow}}
\index{fitGraphToWindow@{fitGraphToWindow}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{fitGraphToWindow()}{fitGraphToWindow()}}
{\footnotesize\ttfamily void Function\+Panel\+::fit\+Graph\+To\+Window (\begin{DoxyParamCaption}\item[{bool}]{current\+Curve\+Only = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01454                                                           \{}
\DoxyCodeLine{01455   \textcolor{keywordtype}{double} f0 = 0, f1 = -\/1;}
\DoxyCodeLine{01456   \textcolor{keywordtype}{double} v0 = 0, v1 = -\/1;}
\DoxyCodeLine{01457 }
\DoxyCodeLine{01458   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_functionTreeModel-\/>getActiveChannelCount(); i++) \{}
\DoxyCodeLine{01459     \mbox{\hyperlink{class_function_tree_model_1_1_channel}{FunctionTreeModel::Channel}} *channel =}
\DoxyCodeLine{01460         m\_functionTreeModel-\/>getActiveChannel(i);}
\DoxyCodeLine{01461     \mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *curve = channel-\/>getParam();}
\DoxyCodeLine{01462     \textcolor{keywordflow}{if} (currentCurveOnly \&\& curve != getCurrentCurve()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01463 }
\DoxyCodeLine{01464     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_unit}{TUnit}} *unit = 0;}
\DoxyCodeLine{01465     \textcolor{keywordflow}{if} (curve-\/>getMeasure()) unit = curve-\/>getMeasure()-\/>getCurrentUnit();}
\DoxyCodeLine{01466     \textcolor{keywordtype}{int} n = curve-\/>getKeyframeCount();}
\DoxyCodeLine{01467     \textcolor{keywordflow}{if} (n == 0) \{}
\DoxyCodeLine{01468       \textcolor{keywordtype}{double} v = curve-\/>getDefaultValue();}
\DoxyCodeLine{01469       \textcolor{keywordflow}{if} (unit) v = unit-\/>convertTo(v);}
\DoxyCodeLine{01470       \textcolor{keywordflow}{if} (v0 > v1)}
\DoxyCodeLine{01471         v0 = v1 = v;}
\DoxyCodeLine{01472       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (v > v1)}
\DoxyCodeLine{01473         v1 = v;}
\DoxyCodeLine{01474       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (v < v0)}
\DoxyCodeLine{01475         v0 = v;}
\DoxyCodeLine{01476     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01477       \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} k = curve-\/>getKeyframe(0);}
\DoxyCodeLine{01478       \textcolor{keywordtype}{double} fa         = k.m\_frame;}
\DoxyCodeLine{01479       k                 = curve-\/>getKeyframe(n -\/ 1);}
\DoxyCodeLine{01480       \textcolor{keywordtype}{double} fb         = k.m\_frame;}
\DoxyCodeLine{01481       \textcolor{keywordflow}{if} (f0 > f1) \{}
\DoxyCodeLine{01482         f0 = fa;}
\DoxyCodeLine{01483         f1 = fb;}
\DoxyCodeLine{01484       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01485         f0 = std::min(f0, fa);}
\DoxyCodeLine{01486         f1 = std::max(f1, fb);}
\DoxyCodeLine{01487       \}}
\DoxyCodeLine{01488       \textcolor{keywordtype}{double} v = curve-\/>getValue(fa);}
\DoxyCodeLine{01489       \textcolor{keywordflow}{if} (unit) v = unit-\/>convertTo(v);}
\DoxyCodeLine{01490       \textcolor{keywordflow}{if} (v0 > v1) v0 = v1 = v;}
\DoxyCodeLine{01491       \textcolor{keywordtype}{int} m = 50;}
\DoxyCodeLine{01492       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < m; j++) \{}
\DoxyCodeLine{01493         \textcolor{keywordtype}{double} t = (double)j / (\textcolor{keywordtype}{double})(m -\/ 1);}
\DoxyCodeLine{01494         \textcolor{keywordtype}{double} v = curve-\/>getValue((1 -\/ t) * fa + t * fb);}
\DoxyCodeLine{01495         \textcolor{keywordflow}{if} (unit) v = unit-\/>convertTo(v);}
\DoxyCodeLine{01496         v0 = std::min(v0, v);}
\DoxyCodeLine{01497         v1 = std::max(v1, v);}
\DoxyCodeLine{01498       \}}
\DoxyCodeLine{01499     \}}
\DoxyCodeLine{01500   \}}
\DoxyCodeLine{01501   \textcolor{keywordflow}{if} (f0 >= f1 || v0 >= v1) \{}
\DoxyCodeLine{01502     m\_viewTransform = QTransform();}
\DoxyCodeLine{01503     m\_viewTransform.translate(m\_valueAxisX, 200);}
\DoxyCodeLine{01504     m\_viewTransform.scale(5, -\/1);}
\DoxyCodeLine{01505   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01506     \textcolor{keywordtype}{double} mx       = (width() -\/ m\_valueAxisX -\/ 20) / (f1 -\/ f0);}
\DoxyCodeLine{01507     \textcolor{keywordtype}{double} my       = -\/(height() -\/ m\_graphViewportY -\/ 20) / (v1 -\/ v0);}
\DoxyCodeLine{01508     \textcolor{keywordtype}{double} dx       = m\_valueAxisX + 10 -\/ f0 * mx;}
\DoxyCodeLine{01509     \textcolor{keywordtype}{double} dy       = m\_graphViewportY + 10 -\/ v1 * my;}
\DoxyCodeLine{01510     m\_viewTransform = QTransform(mx, 0, 0, my, dx, dy);}
\DoxyCodeLine{01511   \}}
\DoxyCodeLine{01512   update();}
\DoxyCodeLine{01513 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a7cb7d3847517ba070905714962b6b158}\label{class_function_panel_a7cb7d3847517ba070905714962b6b158}} 
\index{FunctionPanel@{FunctionPanel}!fitRegion@{fitRegion}}
\index{fitRegion@{fitRegion}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{fitRegion()}{fitRegion()}}
{\footnotesize\ttfamily void Function\+Panel\+::fit\+Region (\begin{DoxyParamCaption}\item[{double}]{f0,  }\item[{double}]{v0,  }\item[{double}]{f1,  }\item[{double}]{v1 }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01525 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_ab19d3decf9edbd7de01ea4842bbcfb2e}\label{class_function_panel_ab19d3decf9edbd7de01ea4842bbcfb2e}} 
\index{FunctionPanel@{FunctionPanel}!fitSelectedPoints@{fitSelectedPoints}}
\index{fitSelectedPoints@{fitSelectedPoints}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{fitSelectedPoints()}{fitSelectedPoints()}}
{\footnotesize\ttfamily void Function\+Panel\+::fit\+Selected\+Points (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01517 \{ fitGraphToWindow(\textcolor{keyword}{true}); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a2589a5f29b047ac081d7c3c0225fbba6}\label{class_function_panel_a2589a5f29b047ac081d7c3c0225fbba6}} 
\index{FunctionPanel@{FunctionPanel}!frameToX@{frameToX}}
\index{frameToX@{frameToX}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{frameToX()}{frameToX()}}
{\footnotesize\ttfamily double Function\+Panel\+::frame\+ToX (\begin{DoxyParamCaption}\item[{double}]{frame }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00301                                              \{}
\DoxyCodeLine{00302   \textcolor{keywordflow}{return} m\_viewTransform.m11() * f + m\_viewTransform.dx();}
\DoxyCodeLine{00303 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_ad2bb88e80ad999f77bd27e90480d8258}\label{class_function_panel_ad2bb88e80ad999f77bd27e90480d8258}} 
\index{FunctionPanel@{FunctionPanel}!getBGColor@{getBGColor}}
\index{getBGColor@{getBGColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getBGColor()}{getBGColor()}}
{\footnotesize\ttfamily QColor Function\+Panel\+::get\+BGColor (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00189 \{ \textcolor{keywordflow}{return} m\_bgColor; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a8586f0f87794977e2a860551eff14851}\label{class_function_panel_a8586f0f87794977e2a860551eff14851}} 
\index{FunctionPanel@{FunctionPanel}!getCurrentCurve@{getCurrentCurve}}
\index{getCurrentCurve@{getCurrentCurve}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getCurrentCurve()}{getCurrentCurve()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$ Function\+Panel\+::get\+Current\+Curve (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00443                                                    \{}
\DoxyCodeLine{00444   \mbox{\hyperlink{class_function_tree_model_1_1_channel}{FunctionTreeModel::Channel}} *currentChannel =}
\DoxyCodeLine{00445       m\_functionTreeModel ? m\_functionTreeModel-\/>getCurrentChannel() : 0;}
\DoxyCodeLine{00446   \textcolor{keywordflow}{if} (!currentChannel)}
\DoxyCodeLine{00447     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00448   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00449     \textcolor{keywordflow}{return} currentChannel-\/>getParam();}
\DoxyCodeLine{00450 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a9801d0812131347d20fda96d89465f88}\label{class_function_panel_a9801d0812131347d20fda96d89465f88}} 
\index{FunctionPanel@{FunctionPanel}!getCurveDistance@{getCurveDistance}}
\index{getCurveDistance@{getCurveDistance}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getCurveDistance()}{getCurveDistance()}}
{\footnotesize\ttfamily int Function\+Panel\+::get\+Curve\+Distance (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$}]{curve,  }\item[{const QPoint \&}]{win\+Pos }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00378                                                                              \{}
\DoxyCodeLine{00379   \textcolor{keywordtype}{double} frame  = xToFrame(winPos.x());}
\DoxyCodeLine{00380   \textcolor{keywordtype}{double} value  = curve-\/>getValue(frame);}
\DoxyCodeLine{00381   \textcolor{keywordtype}{double} curveY = valueToY(curve, value);}
\DoxyCodeLine{00382   \textcolor{keywordflow}{return} std::abs(curveY -\/ winPos.y());}
\DoxyCodeLine{00383 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_aae199385658f82424211992e7cd33137}\label{class_function_panel_aae199385658f82424211992e7cd33137}} 
\index{FunctionPanel@{FunctionPanel}!getFrameHandle@{getFrameHandle}}
\index{getFrameHandle@{getFrameHandle}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getFrameHandle()}{getFrameHandle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_frame_handle}{TFrame\+Handle}} $\ast$ Function\+Panel\+::get\+Frame\+Handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00132 \{ \textcolor{keywordflow}{return} m\_frameHandle; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a07c5f43da9dc293851cdcf95bd0b5bb6}\label{class_function_panel_a07c5f43da9dc293851cdcf95bd0b5bb6}} 
\index{FunctionPanel@{FunctionPanel}!getFrameLineColor@{getFrameLineColor}}
\index{getFrameLineColor@{getFrameLineColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getFrameLineColor()}{getFrameLineColor()}}
{\footnotesize\ttfamily QColor Function\+Panel\+::get\+Frame\+Line\+Color (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00193 \{ \textcolor{keywordflow}{return} m\_frameLineColor; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a2fae9f0929922e42059ba6555062a326}\label{class_function_panel_a2fae9f0929922e42059ba6555062a326}} 
\index{FunctionPanel@{FunctionPanel}!getModel@{getModel}}
\index{getModel@{getModel}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getModel()}{getModel()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_function_tree_model}{Function\+Tree\+Model}} $\ast$ Function\+Panel\+::get\+Model (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00124 \{ \textcolor{keywordflow}{return} m\_functionTreeModel; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_af89ba5fcf11282c76264512978939bf7}\label{class_function_panel_af89ba5fcf11282c76264512978939bf7}} 
\index{FunctionPanel@{FunctionPanel}!getOtherCurvesColor@{getOtherCurvesColor}}
\index{getOtherCurvesColor@{getOtherCurvesColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getOtherCurvesColor()}{getOtherCurvesColor()}}
{\footnotesize\ttfamily QColor Function\+Panel\+::get\+Other\+Curves\+Color (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00195 \{ \textcolor{keywordflow}{return} m\_otherCurvesColor; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_abe7fab4aacced4d71154566328f8cf86}\label{class_function_panel_abe7fab4aacced4d71154566328f8cf86}} 
\index{FunctionPanel@{FunctionPanel}!getPixelRatio@{getPixelRatio}}
\index{getPixelRatio@{getPixelRatio}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getPixelRatio()}{getPixelRatio()}}
{\footnotesize\ttfamily double Function\+Panel\+::get\+Pixel\+Ratio (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$}]{curve }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00291                                                              \{}
\DoxyCodeLine{00292   \textcolor{keywordtype}{double} framePixelSize = xToFrame(1) -\/ xToFrame(0);}
\DoxyCodeLine{00293   assert(framePixelSize > 0);}
\DoxyCodeLine{00294   \textcolor{keywordtype}{double} valuePixelSize = fabs(yToValue(curve, 1) -\/ yToValue(curve, 0));}
\DoxyCodeLine{00295   assert(valuePixelSize > 0);}
\DoxyCodeLine{00296   \textcolor{keywordflow}{return} framePixelSize / valuePixelSize;}
\DoxyCodeLine{00297 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_af87c9874396d3382bd9d8c5934b086fc}\label{class_function_panel_af87c9874396d3382bd9d8c5934b086fc}} 
\index{FunctionPanel@{FunctionPanel}!getRulerBackground@{getRulerBackground}}
\index{getRulerBackground@{getRulerBackground}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getRulerBackground()}{getRulerBackground()}}
{\footnotesize\ttfamily QColor Function\+Panel\+::get\+Ruler\+Background (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00197 \{ \textcolor{keywordflow}{return} m\_rulerBackground; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a2bfa8626ece517a3ca19531d8a70f9b4}\label{class_function_panel_a2bfa8626ece517a3ca19531d8a70f9b4}} 
\index{FunctionPanel@{FunctionPanel}!getSegmentPainterPath@{getSegmentPainterPath}}
\index{getSegmentPainterPath@{getSegmentPainterPath}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getSegmentPainterPath()}{getSegmentPainterPath()}}
{\footnotesize\ttfamily QPainter\+Path Function\+Panel\+::get\+Segment\+Painter\+Path (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$}]{curve,  }\item[{int}]{segment\+Index,  }\item[{int}]{x0,  }\item[{int}]{x1 }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00456                                                           \{}
\DoxyCodeLine{00457   \textcolor{keywordtype}{double} frame0 = xToFrame(x0), frame1 = xToFrame(x1);}
\DoxyCodeLine{00458   \textcolor{keywordtype}{int} kCount = curve-\/>getKeyframeCount();}
\DoxyCodeLine{00459   \textcolor{keywordtype}{int} step   = 1;}
\DoxyCodeLine{00460   \textcolor{keywordflow}{if} (kCount > 0) \{}
\DoxyCodeLine{00461     \textcolor{keywordflow}{if} (segmentIndex < 0)}
\DoxyCodeLine{00462       frame1 = std::min(}
\DoxyCodeLine{00463           frame1, curve-\/>\mbox{\hyperlink{class_t_double_param_af08442b9fd968fddada028a6f07983d5}{keyframeIndexToFrame}}(0));  \textcolor{comment}{// before first keyframe}}
\DoxyCodeLine{00464     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (segmentIndex >= kCount -\/ 1)}
\DoxyCodeLine{00465       frame0 = std::max(frame0, curve-\/>\mbox{\hyperlink{class_t_double_param_af08442b9fd968fddada028a6f07983d5}{keyframeIndexToFrame}}(}
\DoxyCodeLine{00466                                     kCount -\/ 1));  \textcolor{comment}{// after last keyframe}}
\DoxyCodeLine{00467     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00468       \textcolor{comment}{// between keyframes}}
\DoxyCodeLine{00469       \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} kf = curve-\/>getKeyframe(segmentIndex);}
\DoxyCodeLine{00470       frame0             = std::max(frame0, kf.m\_frame);}
\DoxyCodeLine{00471       \textcolor{keywordtype}{double} f           = curve-\/>\mbox{\hyperlink{class_t_double_param_af08442b9fd968fddada028a6f07983d5}{keyframeIndexToFrame}}(segmentIndex + 1);}
\DoxyCodeLine{00472       frame1             = std::min(frame1, f);}
\DoxyCodeLine{00473       step               = kf.m\_step;}
\DoxyCodeLine{00474     \}}
\DoxyCodeLine{00475   \}}
\DoxyCodeLine{00476   \textcolor{keywordflow}{if} (frame0 >= frame1) \textcolor{keywordflow}{return} QPainterPath();}
\DoxyCodeLine{00477   \textcolor{keywordtype}{double} frame;}
\DoxyCodeLine{00478   \textcolor{keywordtype}{double} df = xToFrame(3) -\/ xToFrame(0);}
\DoxyCodeLine{00479 }
\DoxyCodeLine{00480   \textcolor{keywordflow}{if} (m\_curveShape == SMOOTH) \{}
\DoxyCodeLine{00481     frame = frame0;}
\DoxyCodeLine{00482   \} \textcolor{keywordflow}{else}  \textcolor{comment}{// FRAME\_BASED}}
\DoxyCodeLine{00483   \{}
\DoxyCodeLine{00484     frame = (double)tfloor(frame0);}
\DoxyCodeLine{00485     df    = std::max(df, 1.0);}
\DoxyCodeLine{00486   \}}
\DoxyCodeLine{00487 }
\DoxyCodeLine{00488   QPainterPath path;}
\DoxyCodeLine{00489   \textcolor{keywordflow}{if} (0 <= segmentIndex \&\& segmentIndex < kCount \&\& step > 1) \{}
\DoxyCodeLine{00490     \textcolor{comment}{// step>1}}
\DoxyCodeLine{00491     path.moveTo(getWinPos(curve, frame));}
\DoxyCodeLine{00492 }
\DoxyCodeLine{00493     \textcolor{keywordtype}{int} f0        = curve-\/>\mbox{\hyperlink{class_t_double_param_af08442b9fd968fddada028a6f07983d5}{keyframeIndexToFrame}}(segmentIndex);}
\DoxyCodeLine{00494     \textcolor{keywordtype}{int} vFrame    = f0 + tfloor(tfloor(frame -\/ f0), step);}
\DoxyCodeLine{00495     \textcolor{keywordtype}{double} vValue = curve-\/>getValue(vFrame);}
\DoxyCodeLine{00496     assert(vFrame <= frame);}
\DoxyCodeLine{00497     assert(vFrame + step > frame);}
\DoxyCodeLine{00498     \textcolor{keywordflow}{while} (vFrame + step < frame1) \{}
\DoxyCodeLine{00499       vValue = curve-\/>getValue(vFrame);}
\DoxyCodeLine{00500       path.lineTo(getWinPos(curve, vFrame, vValue));}
\DoxyCodeLine{00501       vFrame += step;}
\DoxyCodeLine{00502       path.lineTo(getWinPos(curve, vFrame, vValue));}
\DoxyCodeLine{00503       vValue = curve-\/>getValue(vFrame);}
\DoxyCodeLine{00504       path.lineTo(getWinPos(curve, vFrame, vValue));}
\DoxyCodeLine{00505     \}}
\DoxyCodeLine{00506     path.lineTo(getWinPos(curve, frame1, vValue));}
\DoxyCodeLine{00507     path.lineTo(getWinPos(curve, frame1, curve-\/>getValue(frame1, \textcolor{keyword}{true})));}
\DoxyCodeLine{00508   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00509     \textcolor{comment}{// step = 1}}
\DoxyCodeLine{00510     path.moveTo(getWinPos(curve, frame));}
\DoxyCodeLine{00511     \textcolor{keywordflow}{while} (frame + df < frame1) \{}
\DoxyCodeLine{00512       frame += df;}
\DoxyCodeLine{00513       path.lineTo(getWinPos(curve, frame));}
\DoxyCodeLine{00514     \}}
\DoxyCodeLine{00515     path.lineTo(getWinPos(curve, frame1, curve-\/>getValue(frame1, \textcolor{keyword}{true})));}
\DoxyCodeLine{00516   \}}
\DoxyCodeLine{00517   \textcolor{keywordflow}{return} path;}
\DoxyCodeLine{00518 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a8d0b3f6a0ba19313cfe24d9082d7422a}\label{class_function_panel_a8d0b3f6a0ba19313cfe24d9082d7422a}} 
\index{FunctionPanel@{FunctionPanel}!getSelectedColor@{getSelectedColor}}
\index{getSelectedColor@{getSelectedColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getSelectedColor()}{getSelectedColor()}}
{\footnotesize\ttfamily QColor Function\+Panel\+::get\+Selected\+Color (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00203 \{ \textcolor{keywordflow}{return} m\_selectedColor; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a85ed7d49944a99065dcbb4513c675cfd}\label{class_function_panel_a85ed7d49944a99065dcbb4513c675cfd}} 
\index{FunctionPanel@{FunctionPanel}!getSelection@{getSelection}}
\index{getSelection@{getSelection}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getSelection()}{getSelection()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_function_selection}{Function\+Selection}} $\ast$ Function\+Panel\+::get\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00126 \{ \textcolor{keywordflow}{return} m\_selection; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a949210ae52abc2ffa82fdfc1ecc69897}\label{class_function_panel_a949210ae52abc2ffa82fdfc1ecc69897}} 
\index{FunctionPanel@{FunctionPanel}!getSubColor@{getSubColor}}
\index{getSubColor@{getSubColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getSubColor()}{getSubColor()}}
{\footnotesize\ttfamily QColor Function\+Panel\+::get\+Sub\+Color (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00201 \{ \textcolor{keywordflow}{return} m\_subColor; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_adb21af5eed395a63fe0a50f3032d301f}\label{class_function_panel_adb21af5eed395a63fe0a50f3032d301f}} 
\index{FunctionPanel@{FunctionPanel}!getTextColor@{getTextColor}}
\index{getTextColor@{getTextColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getTextColor()}{getTextColor()}}
{\footnotesize\ttfamily QColor Function\+Panel\+::get\+Text\+Color (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00199 \{ \textcolor{keywordflow}{return} m\_textColor; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_adba761c17df34ba69c26fe3ce6863809}\label{class_function_panel_adba761c17df34ba69c26fe3ce6863809}} 
\index{FunctionPanel@{FunctionPanel}!getValueLineColor@{getValueLineColor}}
\index{getValueLineColor@{getValueLineColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getValueLineColor()}{getValueLineColor()}}
{\footnotesize\ttfamily QColor Function\+Panel\+::get\+Value\+Line\+Color (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00191 \{ \textcolor{keywordflow}{return} m\_valueLineColor; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_ab6d2a0566b1b9a273323852fdc315490}\label{class_function_panel_ab6d2a0566b1b9a273323852fdc315490}} 
\index{FunctionPanel@{FunctionPanel}!getViewTransform@{getViewTransform}}
\index{getViewTransform@{getViewTransform}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getViewTransform()}{getViewTransform()}}
{\footnotesize\ttfamily QTransform Function\+Panel\+::get\+View\+Transform (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00134 \{ \textcolor{keywordflow}{return} m\_viewTransform; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a8343fd82d0fd27f820c355e947befb47}\label{class_function_panel_a8343fd82d0fd27f820c355e947befb47}} 
\index{FunctionPanel@{FunctionPanel}!getWinPos@{getWinPos}}
\index{getWinPos@{getWinPos}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getWinPos()}{getWinPos()}\hspace{0.1cm}{\footnotesize\ttfamily [1/4]}}
{\footnotesize\ttfamily QPointF Function\+Panel\+::get\+Win\+Pos (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$}]{curve,  }\item[{const \mbox{\hyperlink{class_t_double_keyframe}{TDouble\+Keyframe}} \&}]{kf }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00372                                                                   \{}
\DoxyCodeLine{00373   \textcolor{keywordflow}{return} getWinPos(curve, kf.m\_frame, kf.m\_value);}
\DoxyCodeLine{00374 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a2c4f0d67f32060d7173f9329d64f8e10}\label{class_function_panel_a2c4f0d67f32060d7173f9329d64f8e10}} 
\index{FunctionPanel@{FunctionPanel}!getWinPos@{getWinPos}}
\index{getWinPos@{getWinPos}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getWinPos()}{getWinPos()}\hspace{0.1cm}{\footnotesize\ttfamily [2/4]}}
{\footnotesize\ttfamily QPointF Function\+Panel\+::get\+Win\+Pos (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$}]{curve,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{frame\+Value\+Pos }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00160                                                                              \{}
\DoxyCodeLine{00161     \textcolor{keywordflow}{return} getWinPos(curve, frameValuePos.x, frameValuePos.y);}
\DoxyCodeLine{00162   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a6d5fca77b9782020f65066bf57a951d9}\label{class_function_panel_a6d5fca77b9782020f65066bf57a951d9}} 
\index{FunctionPanel@{FunctionPanel}!getWinPos@{getWinPos}}
\index{getWinPos@{getWinPos}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getWinPos()}{getWinPos()}\hspace{0.1cm}{\footnotesize\ttfamily [3/4]}}
{\footnotesize\ttfamily QPointF Function\+Panel\+::get\+Win\+Pos (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$}]{curve,  }\item[{double}]{frame }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00365                                                                         \{}
\DoxyCodeLine{00366   \textcolor{keywordflow}{return} getWinPos(curve, frame, curve-\/>getValue(frame));}
\DoxyCodeLine{00367 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a69cd75b456cf307bb73ba14b81067364}\label{class_function_panel_a69cd75b456cf307bb73ba14b81067364}} 
\index{FunctionPanel@{FunctionPanel}!getWinPos@{getWinPos}}
\index{getWinPos@{getWinPos}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{getWinPos()}{getWinPos()}\hspace{0.1cm}{\footnotesize\ttfamily [4/4]}}
{\footnotesize\ttfamily QPointF Function\+Panel\+::get\+Win\+Pos (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$}]{curve,  }\item[{double}]{frame,  }\item[{double}]{value }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00359                                                      \{}
\DoxyCodeLine{00360   \textcolor{keywordflow}{return} QPointF(frameToX(frame), valueToY(curve, value));}
\DoxyCodeLine{00361 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a45c2c0dac646c6b0a7c90e27593bec81}\label{class_function_panel_a45c2c0dac646c6b0a7c90e27593bec81}} 
\index{FunctionPanel@{FunctionPanel}!hideEvent@{hideEvent}}
\index{hideEvent@{hideEvent}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{hideEvent()}{hideEvent()}}
{\footnotesize\ttfamily void Function\+Panel\+::hide\+Event (\begin{DoxyParamCaption}\item[{QHide\+Event $\ast$}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01746                                           \{}
\DoxyCodeLine{01747   \textcolor{keywordflow}{if} (m\_frameHandle) m\_frameHandle-\/>disconnect(\textcolor{keyword}{this});}
\DoxyCodeLine{01748 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a43308d4ed20cbc0990e44bcdc2d05dc0}\label{class_function_panel_a43308d4ed20cbc0990e44bcdc2d05dc0}} 
\index{FunctionPanel@{FunctionPanel}!keyPressEvent@{keyPressEvent}}
\index{keyPressEvent@{keyPressEvent}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{keyPressEvent()}{keyPressEvent()}}
{\footnotesize\ttfamily void Function\+Panel\+::key\+Press\+Event (\begin{DoxyParamCaption}\item[{QKey\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01427                                               \{}
\DoxyCodeLine{01428   FunctionPanelZoomer(\textcolor{keyword}{this}).exec(e);}
\DoxyCodeLine{01429 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a0a8e00a88cbf31e102cb85cee758f846}\label{class_function_panel_a0a8e00a88cbf31e102cb85cee758f846}} 
\index{FunctionPanel@{FunctionPanel}!leaveEvent@{leaveEvent}}
\index{leaveEvent@{leaveEvent}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{leaveEvent()}{leaveEvent()}}
{\footnotesize\ttfamily void Function\+Panel\+::leave\+Event (\begin{DoxyParamCaption}\item[{QEvent $\ast$}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01440                                        \{}
\DoxyCodeLine{01441   m\_cursor.visible = \textcolor{keyword}{false};}
\DoxyCodeLine{01442   update();}
\DoxyCodeLine{01443 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_aa885d8b9f213073a94517f124ae226b5}\label{class_function_panel_aa885d8b9f213073a94517f124ae226b5}} 
\index{FunctionPanel@{FunctionPanel}!mouseMoveEvent@{mouseMoveEvent}}
\index{mouseMoveEvent@{mouseMoveEvent}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{mouseMoveEvent()}{mouseMoveEvent()}}
{\footnotesize\ttfamily void Function\+Panel\+::mouse\+Move\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01368                                                  \{}
\DoxyCodeLine{01369   \textcolor{keywordflow}{if} (e-\/>buttons()) \{}
\DoxyCodeLine{01370     \textcolor{keywordflow}{if} (m\_dragTool) m\_dragTool-\/>drag(e);}
\DoxyCodeLine{01371   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01372     m\_cursor.frame   = xToFrame(e-\/>pos().x());}
\DoxyCodeLine{01373     m\_cursor.value   = 0;}
\DoxyCodeLine{01374     m\_cursor.visible = \textcolor{keyword}{true};}
\DoxyCodeLine{01375 }
\DoxyCodeLine{01376     \mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *currentCurve = getCurrentCurve();}
\DoxyCodeLine{01377     \textcolor{keywordflow}{if} (currentCurve) \{}
\DoxyCodeLine{01378       Handle handle = None;}
\DoxyCodeLine{01379       \textcolor{keywordtype}{int} gIndex    = findClosestGadget(e-\/>pos(), handle, 20);}
\DoxyCodeLine{01380       \textcolor{keywordflow}{if} (m\_highlighted.handle != handle || m\_highlighted.gIndex != gIndex) \{}
\DoxyCodeLine{01381         m\_highlighted.handle = handle;}
\DoxyCodeLine{01382         m\_highlighted.gIndex = gIndex;}
\DoxyCodeLine{01383       \}}
\DoxyCodeLine{01384       m\_cursor.value = yToValue(currentCurve, e-\/>pos().y());}
\DoxyCodeLine{01385     \}}
\DoxyCodeLine{01386 }
\DoxyCodeLine{01387     \textcolor{keywordtype}{double} currentFrame = m\_frameHandle ? m\_frameHandle-\/>getFrame() : 0;}
\DoxyCodeLine{01388     \textcolor{keywordflow}{if} (m\_highlighted.handle == None \&\&}
\DoxyCodeLine{01389         std::abs(e-\/>pos().x() -\/ frameToX(currentFrame)) < 5)}
\DoxyCodeLine{01390       m\_currentFrameStatus = 1;}
\DoxyCodeLine{01391     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01392       m\_currentFrameStatus = 0;}
\DoxyCodeLine{01393 }
\DoxyCodeLine{01394     \mbox{\hyperlink{class_function_tree_model_1_1_channel}{FunctionTreeModel::Channel}} *closestChannel =}
\DoxyCodeLine{01395         findClosestChannel(e-\/>pos(), 20);}
\DoxyCodeLine{01396     \textcolor{keywordflow}{if} (closestChannel \&\& m\_highlighted.handle == None) \{}
\DoxyCodeLine{01397       \mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *curve = closestChannel-\/>getParam();}
\DoxyCodeLine{01398       \textcolor{keywordflow}{if} (m\_functionTreeModel-\/>getActiveChannelCount() <= 1)}
\DoxyCodeLine{01399         \textcolor{comment}{//|| closestChannel == m\_functionTreeModel-\/>getCurrentChannel())}}
\DoxyCodeLine{01400         curve = 0;}
\DoxyCodeLine{01401       \textcolor{keywordflow}{if} (curve \&\& m\_curveLabel.curve != curve) \{}
\DoxyCodeLine{01402         m\_curveLabel.curve  = curve;}
\DoxyCodeLine{01403         QString channelName = closestChannel-\/>\mbox{\hyperlink{class_function_tree_model_1_1_channel_a09c9f57880df13c574b6603dd1dbe017}{data}}(Qt::DisplayRole).toString();}
\DoxyCodeLine{01404         QString parentChannelName =}
\DoxyCodeLine{01405             closestChannel-\/>getChannelGroup()-\/>\mbox{\hyperlink{class_function_tree_model_1_1_channel_group_ae5d48fd47eb5c260335233e92d8e86a2}{data}}(Qt::DisplayRole).toString();}
\DoxyCodeLine{01406         QString name      = parentChannelName + QString(\textcolor{stringliteral}{"{}, "{}}) + channelName;}
\DoxyCodeLine{01407         m\_curveLabel.text = name.toStdString();}
\DoxyCodeLine{01408 }
\DoxyCodeLine{01409         \textcolor{comment}{// in order to avoid run off the right-\/end of visible area}}
\DoxyCodeLine{01410         \textcolor{keywordtype}{int} textWidth = fontMetrics().width(name) + 30;}
\DoxyCodeLine{01411         \textcolor{keywordtype}{double} frame  = xToFrame(width() -\/ textWidth);}
\DoxyCodeLine{01412 }
\DoxyCodeLine{01413         m\_curveLabel.curvePos = getWinPos(curve, frame).toPoint();}
\DoxyCodeLine{01414         m\_curveLabel.labelPos = m\_curveLabel.curvePos + QPoint(20, -\/10);}
\DoxyCodeLine{01415       \}}
\DoxyCodeLine{01416     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01417       m\_curveLabel.text  = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01418       m\_curveLabel.curve = 0;}
\DoxyCodeLine{01419     \}}
\DoxyCodeLine{01420 }
\DoxyCodeLine{01421     update();}
\DoxyCodeLine{01422   \}}
\DoxyCodeLine{01423 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a84f4e6f7f78414edab4de2741e55aee8}\label{class_function_panel_a84f4e6f7f78414edab4de2741e55aee8}} 
\index{FunctionPanel@{FunctionPanel}!mousePressEvent@{mousePressEvent}}
\index{mousePressEvent@{mousePressEvent}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{mousePressEvent()}{mousePressEvent()}}
{\footnotesize\ttfamily void Function\+Panel\+::mouse\+Press\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01181                                                   \{}
\DoxyCodeLine{01182   m\_cursor.visible = \textcolor{keyword}{false};}
\DoxyCodeLine{01183 }
\DoxyCodeLine{01184   \textcolor{comment}{// m\_dragTool can be non-\/zero when both the left and the mid buttons are}}
\DoxyCodeLine{01185   \textcolor{comment}{// pressed}}
\DoxyCodeLine{01186   \textcolor{keywordflow}{if} (m\_dragTool) \{}
\DoxyCodeLine{01187     m\_dragTool-\/>release(e);}
\DoxyCodeLine{01188     \textcolor{keyword}{delete} m\_dragTool;}
\DoxyCodeLine{01189     m\_dragTool = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01190   \}}
\DoxyCodeLine{01191 }
\DoxyCodeLine{01192   \textcolor{keywordflow}{if} (e-\/>button() == Qt::MidButton) \{}
\DoxyCodeLine{01193     \textcolor{comment}{// mid mouse click => panning}}
\DoxyCodeLine{01194     \textcolor{keywordtype}{bool} xLocked = e-\/>pos().x() <= m\_valueAxisX;}
\DoxyCodeLine{01195     \textcolor{keywordtype}{bool} yLocked = e-\/>pos().y() <= m\_valueAxisX;}
\DoxyCodeLine{01196     m\_dragTool   = \textcolor{keyword}{new} \mbox{\hyperlink{class_pan_drag_tool}{PanDragTool}}(\textcolor{keyword}{this}, xLocked, yLocked);}
\DoxyCodeLine{01197     m\_dragTool-\/>click(e);}
\DoxyCodeLine{01198     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01199   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (e-\/>button() == Qt::RightButton) \{}
\DoxyCodeLine{01200     \textcolor{comment}{// right mouse click => open context menu}}
\DoxyCodeLine{01201     openContextMenu(e);}
\DoxyCodeLine{01202     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01203   \}}
\DoxyCodeLine{01204 }
\DoxyCodeLine{01205   QPoint winPos         = e-\/>pos();}
\DoxyCodeLine{01206   Handle handle         = None;}
\DoxyCodeLine{01207   \textcolor{keyword}{const} \textcolor{keywordtype}{int} maxDistance = 20;}
\DoxyCodeLine{01208   \textcolor{keywordtype}{int} closestGadgetId   = findClosestGadget(e-\/>pos(), handle, maxDistance);}
\DoxyCodeLine{01209 }
\DoxyCodeLine{01210   \textcolor{keywordflow}{if} (e-\/>pos().x() > m\_valueAxisX \&\& e-\/>pos().y() < m\_frameAxisY \&\&}
\DoxyCodeLine{01211       closestGadgetId < 0 \&\& (e-\/>modifiers() \& Qt::ControlModifier) == 0) \{}
\DoxyCodeLine{01212     \textcolor{comment}{// click on topbar => frame zoom}}
\DoxyCodeLine{01213     m\_dragTool = \textcolor{keyword}{new} \mbox{\hyperlink{class_zoom_drag_tool}{ZoomDragTool}}(\textcolor{keyword}{this}, ZoomDragTool::FrameZoom);}
\DoxyCodeLine{01214   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (e-\/>pos().x() < m\_valueAxisX \&\& e-\/>pos().y() > m\_graphViewportY) \{}
\DoxyCodeLine{01215     \textcolor{comment}{// click on topbar => value zoom}}
\DoxyCodeLine{01216     m\_dragTool = \textcolor{keyword}{new} \mbox{\hyperlink{class_zoom_drag_tool}{ZoomDragTool}}(\textcolor{keyword}{this}, ZoomDragTool::ValueZoom);}
\DoxyCodeLine{01217   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_currentFrameStatus == 1 \&\& m\_frameHandle != 0 \&\&}
\DoxyCodeLine{01218              closestGadgetId < 0) \{}
\DoxyCodeLine{01219     \textcolor{comment}{// click on current frame => move frame}}
\DoxyCodeLine{01220     m\_currentFrameStatus = 2;}
\DoxyCodeLine{01221     m\_dragTool           = \textcolor{keyword}{new} \mbox{\hyperlink{class_move_frame_drag_tool}{MoveFrameDragTool}}(\textcolor{keyword}{this}, m\_frameHandle);}
\DoxyCodeLine{01222   \}}
\DoxyCodeLine{01223 }
\DoxyCodeLine{01224   \textcolor{keywordflow}{if} (0 <= closestGadgetId \&\& closestGadgetId < (\textcolor{keywordtype}{int})m\_gadgets.size()) \{}
\DoxyCodeLine{01225     \textcolor{keywordflow}{if} (handle == 100)  \textcolor{comment}{// group move gadget}}
\DoxyCodeLine{01226     \{}
\DoxyCodeLine{01227       \mbox{\hyperlink{class_move_point_drag_tool}{MovePointDragTool}} *dragTool = \textcolor{keyword}{new} \mbox{\hyperlink{class_move_point_drag_tool}{MovePointDragTool}}(\textcolor{keyword}{this}, 0);}
\DoxyCodeLine{01228       dragTool-\/>selectKeyframes(m\_gadgets[closestGadgetId].m\_keyframePosition);}
\DoxyCodeLine{01229       m\_dragTool = dragTool;}
\DoxyCodeLine{01230     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (handle == 101 || handle == 102) \{}
\DoxyCodeLine{01231       m\_dragTool = \textcolor{keyword}{new} \mbox{\hyperlink{class_move_group_handle_drag_tool}{MoveGroupHandleDragTool}}(}
\DoxyCodeLine{01232           \textcolor{keyword}{this}, m\_gadgets[closestGadgetId].m\_keyframePosition, handle);}
\DoxyCodeLine{01233     \}}
\DoxyCodeLine{01234   \}}
\DoxyCodeLine{01235 }
\DoxyCodeLine{01236   \textcolor{keywordflow}{if} (m\_dragTool) \{}
\DoxyCodeLine{01237     m\_dragTool-\/>click(e);}
\DoxyCodeLine{01238     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01239   \}}
\DoxyCodeLine{01240 }
\DoxyCodeLine{01241   \mbox{\hyperlink{class_function_tree_model_1_1_channel}{FunctionTreeModel::Channel}} *currentChannel =}
\DoxyCodeLine{01242       m\_functionTreeModel ? m\_functionTreeModel-\/>getCurrentChannel() : 0;}
\DoxyCodeLine{01243   \textcolor{keywordflow}{if} (!currentChannel ||}
\DoxyCodeLine{01244       (getCurveDistance(currentChannel-\/>getParam(), winPos) > maxDistance \&\&}
\DoxyCodeLine{01245        closestGadgetId < 0)) \{}
\DoxyCodeLine{01246     \textcolor{comment}{// if current channel is undefined or its curve is too far from the clicked}}
\DoxyCodeLine{01247     \textcolor{comment}{// point}}
\DoxyCodeLine{01248     \textcolor{comment}{// the user is possibly trying to select a different curve}}
\DoxyCodeLine{01249     \mbox{\hyperlink{class_function_tree_model_1_1_channel}{FunctionTreeModel::Channel}} *channel =}
\DoxyCodeLine{01250         findClosestChannel(winPos, maxDistance);}
\DoxyCodeLine{01251     \textcolor{keywordflow}{if} (channel) \{}
\DoxyCodeLine{01252       channel-\/>setIsCurrent(\textcolor{keyword}{true});}
\DoxyCodeLine{01253       \textcolor{comment}{// Open folder}}
\DoxyCodeLine{01254       \mbox{\hyperlink{class_function_tree_model_1_1_channel_group}{FunctionTreeModel::ChannelGroup}} *channelGroup =}
\DoxyCodeLine{01255           channel-\/>getChannelGroup();}
\DoxyCodeLine{01256       \textcolor{keywordflow}{if} (!channelGroup-\/>isOpen())}
\DoxyCodeLine{01257         channelGroup-\/>getModel()-\/>setExpandedItem(channelGroup-\/>createIndex(),}
\DoxyCodeLine{01258                                                   \textcolor{keyword}{true});}
\DoxyCodeLine{01259       currentChannel = channel;}
\DoxyCodeLine{01260       getSelection()-\/>selectNone();}
\DoxyCodeLine{01261     \}}
\DoxyCodeLine{01262   \}}
\DoxyCodeLine{01263 }
\DoxyCodeLine{01264   \textcolor{keywordflow}{if} (currentChannel) \{}
\DoxyCodeLine{01265     \mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *currentCurve = currentChannel-\/>getParam();}
\DoxyCodeLine{01266     \textcolor{keywordflow}{if} (currentCurve) \{}
\DoxyCodeLine{01267       \textcolor{keywordtype}{int} kIndex =}
\DoxyCodeLine{01268           closestGadgetId >= 0 ? m\_gadgets[closestGadgetId].m\_kIndex : -\/1;}
\DoxyCodeLine{01269       \textcolor{keywordflow}{if} (kIndex >= 0) \{}
\DoxyCodeLine{01270         \textcolor{comment}{// keyframe clicked}}
\DoxyCodeLine{01271         \textcolor{keywordflow}{if} (handle == FunctionPanel::Point) \{}
\DoxyCodeLine{01272           \textcolor{comment}{// select point (if needed)}}
\DoxyCodeLine{01273           \textcolor{keywordflow}{if} (!getSelection()-\/>isSelected(currentCurve, kIndex)) \{}
\DoxyCodeLine{01274             \textcolor{comment}{// shift-\/click => add to selection}}
\DoxyCodeLine{01275             \textcolor{keywordflow}{if} (0 == (e-\/>modifiers() \& Qt::ShiftModifier))}
\DoxyCodeLine{01276               getSelection()-\/>deselectAllKeyframes();}
\DoxyCodeLine{01277             getSelection()-\/>select(currentCurve, kIndex);}
\DoxyCodeLine{01278           \}}
\DoxyCodeLine{01279           \textcolor{comment}{// move selected point(s)}}
\DoxyCodeLine{01280           \mbox{\hyperlink{class_move_point_drag_tool}{MovePointDragTool}} *dragTool =}
\DoxyCodeLine{01281               \textcolor{keyword}{new} \mbox{\hyperlink{class_move_point_drag_tool}{MovePointDragTool}}(\textcolor{keyword}{this}, currentCurve);}
\DoxyCodeLine{01282           \textcolor{keywordflow}{if} (getSelection()-\/>getSelectedSegment().first != 0) \{}
\DoxyCodeLine{01283             \textcolor{comment}{// if a segment is selected then move only the clicked point}}
\DoxyCodeLine{01284             dragTool-\/>addKeyframe2(kIndex);}
\DoxyCodeLine{01285           \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01286             dragTool-\/>setSelection(getSelection());}
\DoxyCodeLine{01287           \}}
\DoxyCodeLine{01288           m\_dragTool = dragTool;}
\DoxyCodeLine{01289         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01290           m\_dragTool =}
\DoxyCodeLine{01291               \textcolor{keyword}{new} \mbox{\hyperlink{class_move_handle_drag_tool}{MoveHandleDragTool}}(\textcolor{keyword}{this}, currentCurve, kIndex, handle);}
\DoxyCodeLine{01292         \}}
\DoxyCodeLine{01293       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01294         \textcolor{comment}{// no keyframe clicked}}
\DoxyCodeLine{01295         \textcolor{keywordtype}{int} curveDistance =}
\DoxyCodeLine{01296             getCurveDistance(currentChannel-\/>getParam(), winPos);}
\DoxyCodeLine{01297         \textcolor{keywordtype}{bool} isKeyframeable = \textcolor{keyword}{true};}
\DoxyCodeLine{01298         \textcolor{keywordtype}{bool} isGroup        = abs(winPos.y() -\/ (m\_graphViewportY -\/ 5)) < 5;}
\DoxyCodeLine{01299         \textcolor{keywordflow}{if} (0 != (e-\/>modifiers() \& Qt::ControlModifier) \&\&}
\DoxyCodeLine{01300             (curveDistance < maxDistance || isGroup) \&\& isKeyframeable) \{}
\DoxyCodeLine{01301           \textcolor{comment}{// ctrl-\/clicked near curve => create a new keyframe}}
\DoxyCodeLine{01302           \textcolor{keywordtype}{double} frame = tround(xToFrame(winPos.x()));}
\DoxyCodeLine{01303           \mbox{\hyperlink{class_move_point_drag_tool}{MovePointDragTool}} *dragTool =}
\DoxyCodeLine{01304               \textcolor{keyword}{new} \mbox{\hyperlink{class_move_point_drag_tool}{MovePointDragTool}}(\textcolor{keyword}{this}, isGroup ? 0 : currentCurve);}
\DoxyCodeLine{01305           \textcolor{comment}{//          if(curveDistance>=maxDistance)}}
\DoxyCodeLine{01306           \textcolor{comment}{//            dragTool-\/>m\_channelGroup =}}
\DoxyCodeLine{01307           \textcolor{comment}{//            currentChannel-\/>getChannelGroup();}}
\DoxyCodeLine{01308           dragTool-\/>createKeyframe(frame);}
\DoxyCodeLine{01309           dragTool-\/>selectKeyframes(frame);}
\DoxyCodeLine{01310           m\_dragTool = dragTool;}
\DoxyCodeLine{01311 }
\DoxyCodeLine{01312           \textcolor{comment}{/*}}
\DoxyCodeLine{01313 \textcolor{comment}{int kIndex = dragTool-\/>createKeyframe(frame);}}
\DoxyCodeLine{01314 \textcolor{comment}{          if(kIndex!=-\/1)}}
\DoxyCodeLine{01315 \textcolor{comment}{          \{}}
\DoxyCodeLine{01316 \textcolor{comment}{                  getSelection()-\/>deselectAllKeyframes();}}
\DoxyCodeLine{01317 \textcolor{comment}{                  getSelection()-\/>select(currentCurve, kIndex);}}
\DoxyCodeLine{01318 \textcolor{comment}{                  m\_dragTool = dragTool;}}
\DoxyCodeLine{01319 \textcolor{comment}{          \}}}
\DoxyCodeLine{01320 \textcolor{comment}{*/}}
\DoxyCodeLine{01321           \textcolor{comment}{// assert(0);}}
\DoxyCodeLine{01322         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (curveDistance < maxDistance) \{}
\DoxyCodeLine{01323           \textcolor{comment}{// clicked near curve (but far from keyframes)}}
\DoxyCodeLine{01324           getSelection()-\/>deselectAllKeyframes();}
\DoxyCodeLine{01325           \textcolor{keywordtype}{double} frame = xToFrame(winPos.x());}
\DoxyCodeLine{01326           \textcolor{keywordtype}{int} k0       = currentCurve-\/>\mbox{\hyperlink{class_t_double_param_a765abd97386a7e4e3a413255ba494e19}{getPrevKeyframe}}(frame);}
\DoxyCodeLine{01327           \textcolor{keywordtype}{int} k1       = currentCurve-\/>\mbox{\hyperlink{class_t_double_param_a28b99ec860d56fd1b47f89f08ca0a3ca}{getNextKeyframe}}(frame);}
\DoxyCodeLine{01328           \textcolor{keywordflow}{if} (k0 >= 0 \&\& k1 == k0 + 1) \{}
\DoxyCodeLine{01329             \textcolor{comment}{// select and move the segment}}
\DoxyCodeLine{01330             getSelection()-\/>selectSegment(currentCurve, k0);}
\DoxyCodeLine{01331             \mbox{\hyperlink{class_move_point_drag_tool}{MovePointDragTool}} *dragTool =}
\DoxyCodeLine{01332                 \textcolor{keyword}{new} \mbox{\hyperlink{class_move_point_drag_tool}{MovePointDragTool}}(\textcolor{keyword}{this}, currentCurve);}
\DoxyCodeLine{01333             dragTool-\/>addKeyframe2(k0);}
\DoxyCodeLine{01334             dragTool-\/>addKeyframe2(k1);}
\DoxyCodeLine{01335             m\_dragTool = dragTool;}
\DoxyCodeLine{01336           \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01337             \textcolor{comment}{// start a rectangular selection}}
\DoxyCodeLine{01338             m\_dragTool = \textcolor{keyword}{new} \mbox{\hyperlink{class_rect_select_tool}{RectSelectTool}}(\textcolor{keyword}{this}, currentCurve);}
\DoxyCodeLine{01339           \}}
\DoxyCodeLine{01340         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01341           \textcolor{comment}{// nothing clicked: start a rectangular selection}}
\DoxyCodeLine{01342           getSelection()-\/>deselectAllKeyframes();}
\DoxyCodeLine{01343           m\_dragTool = \textcolor{keyword}{new} \mbox{\hyperlink{class_rect_select_tool}{RectSelectTool}}(\textcolor{keyword}{this}, currentCurve);}
\DoxyCodeLine{01344         \}}
\DoxyCodeLine{01345       \}}
\DoxyCodeLine{01346     \}}
\DoxyCodeLine{01347   \}}
\DoxyCodeLine{01348 }
\DoxyCodeLine{01349   \textcolor{keywordflow}{if} (m\_dragTool) m\_dragTool-\/>click(e);}
\DoxyCodeLine{01350   update();}
\DoxyCodeLine{01351 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_ad0e3d67793c8344048b5af789a2ebf81}\label{class_function_panel_ad0e3d67793c8344048b5af789a2ebf81}} 
\index{FunctionPanel@{FunctionPanel}!mouseReleaseEvent@{mouseReleaseEvent}}
\index{mouseReleaseEvent@{mouseReleaseEvent}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{mouseReleaseEvent()}{mouseReleaseEvent()}}
{\footnotesize\ttfamily void Function\+Panel\+::mouse\+Release\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01355                                                     \{}
\DoxyCodeLine{01356   \textcolor{keywordflow}{if} (m\_dragTool) \{}
\DoxyCodeLine{01357     m\_dragTool-\/>release(e);}
\DoxyCodeLine{01358     \textcolor{keyword}{delete} m\_dragTool;}
\DoxyCodeLine{01359     m\_dragTool = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01360   \}}
\DoxyCodeLine{01361   m\_cursor.visible     = \textcolor{keyword}{true};}
\DoxyCodeLine{01362   m\_currentFrameStatus = 0;}
\DoxyCodeLine{01363   update();}
\DoxyCodeLine{01364 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a78aa98ff731bcc7616e38fbbe1a1fa02}\label{class_function_panel_a78aa98ff731bcc7616e38fbbe1a1fa02}} 
\index{FunctionPanel@{FunctionPanel}!onFrameSwitched@{onFrameSwitched}}
\index{onFrameSwitched@{onFrameSwitched}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{onFrameSwitched}{onFrameSwitched}}
{\footnotesize\ttfamily void Function\+Panel\+::on\+Frame\+Switched (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01752 \{ update(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_ad7a4a409cd36b50d7fa4d1cdae4420bd}\label{class_function_panel_ad7a4a409cd36b50d7fa4d1cdae4420bd}} 
\index{FunctionPanel@{FunctionPanel}!openContextMenu@{openContextMenu}}
\index{openContextMenu@{openContextMenu}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{openContextMenu()}{openContextMenu()}}
{\footnotesize\ttfamily void Function\+Panel\+::open\+Context\+Menu (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01538                                                   \{}
\DoxyCodeLine{01539   QAction linkHandlesAction(tr(\textcolor{stringliteral}{"{}Link Handles"{}}), 0);}
\DoxyCodeLine{01540   QAction unlinkHandlesAction(tr(\textcolor{stringliteral}{"{}Unlink Handles"{}}), 0);}
\DoxyCodeLine{01541   QAction resetHandlesAction(tr(\textcolor{stringliteral}{"{}Reset Handles"{}}), 0);}
\DoxyCodeLine{01542   QAction deleteKeyframeAction(tr(\textcolor{stringliteral}{"{}Delete"{}}), 0);}
\DoxyCodeLine{01543   QAction insertKeyframeAction(tr(\textcolor{stringliteral}{"{}Set Key"{}}), 0);}
\DoxyCodeLine{01544   QAction activateCycleAction(tr(\textcolor{stringliteral}{"{}Activate Cycle"{}}), 0);}
\DoxyCodeLine{01545   QAction deactivateCycleAction(tr(\textcolor{stringliteral}{"{}Deactivate Cycle"{}}), 0);}
\DoxyCodeLine{01546   QAction setLinearAction(tr(\textcolor{stringliteral}{"{}Linear Interpolation"{}}), 0);}
\DoxyCodeLine{01547   QAction setSpeedInOutAction(tr(\textcolor{stringliteral}{"{}Speed In / Speed Out Interpolation"{}}), 0);}
\DoxyCodeLine{01548   QAction setEaseInOutAction(tr(\textcolor{stringliteral}{"{}Ease In / Ease Out Interpolation"{}}), 0);}
\DoxyCodeLine{01549   QAction setEaseInOut2Action(tr(\textcolor{stringliteral}{"{}Ease In / Ease Out (\%) Interpolation"{}}), 0);}
\DoxyCodeLine{01550   QAction setExponentialAction(tr(\textcolor{stringliteral}{"{}Exponential Interpolation"{}}), 0);}
\DoxyCodeLine{01551   QAction setExpressionAction(tr(\textcolor{stringliteral}{"{}Expression Interpolation"{}}), 0);}
\DoxyCodeLine{01552   QAction setFileAction(tr(\textcolor{stringliteral}{"{}File Interpolation"{}}), 0);}
\DoxyCodeLine{01553   QAction setConstantAction(tr(\textcolor{stringliteral}{"{}Constant Interpolation"{}}), 0);}
\DoxyCodeLine{01554   QAction setSimilarShapeAction(tr(\textcolor{stringliteral}{"{}Similar Shape Interpolation"{}}), 0);}
\DoxyCodeLine{01555   QAction fitSelectedAction(tr(\textcolor{stringliteral}{"{}Fit Selection"{}}), 0);}
\DoxyCodeLine{01556   QAction fitAllAction(tr(\textcolor{stringliteral}{"{}Fit"{}}), 0);}
\DoxyCodeLine{01557   QAction setStep1Action(tr(\textcolor{stringliteral}{"{}Step 1"{}}), 0);}
\DoxyCodeLine{01558   QAction setStep2Action(tr(\textcolor{stringliteral}{"{}Step 2"{}}), 0);}
\DoxyCodeLine{01559   QAction setStep3Action(tr(\textcolor{stringliteral}{"{}Step 3"{}}), 0);}
\DoxyCodeLine{01560   QAction setStep4Action(tr(\textcolor{stringliteral}{"{}Step 4"{}}), 0);}
\DoxyCodeLine{01561 }
\DoxyCodeLine{01562   \mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *curve = getCurrentCurve();}
\DoxyCodeLine{01563   \textcolor{keywordtype}{int} segmentIndex    = -\/1;}
\DoxyCodeLine{01564   \textcolor{keywordflow}{if} (!curve) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01565   \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} kf;}
\DoxyCodeLine{01566   \textcolor{keywordtype}{double} frame = xToFrame(e-\/>pos().x());}
\DoxyCodeLine{01567 }
\DoxyCodeLine{01568   \textcolor{comment}{// build menu}}
\DoxyCodeLine{01569   QMenu menu(0);}
\DoxyCodeLine{01570   \textcolor{keywordflow}{if} (m\_highlighted.handle == Point \&\& m\_highlighted.gIndex >= 0 \&\&}
\DoxyCodeLine{01571       m\_gadgets[m\_highlighted.gIndex].m\_handle != 100) \{}
\DoxyCodeLine{01572     kf = curve-\/>getKeyframe(m\_gadgets[m\_highlighted.gIndex].m\_kIndex);}
\DoxyCodeLine{01573     \textcolor{keywordflow}{if} (kf.m\_linkedHandles)}
\DoxyCodeLine{01574       menu.addAction(\&unlinkHandlesAction);}
\DoxyCodeLine{01575     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01576       menu.addAction(\&linkHandlesAction);}
\DoxyCodeLine{01577     menu.addAction(\&resetHandlesAction);}
\DoxyCodeLine{01578     menu.addAction(\&deleteKeyframeAction);}
\DoxyCodeLine{01579   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01580     \textcolor{keywordtype}{int} k0 = curve-\/>\mbox{\hyperlink{class_t_double_param_a765abd97386a7e4e3a413255ba494e19}{getPrevKeyframe}}(frame);}
\DoxyCodeLine{01581     \textcolor{keywordtype}{int} k1 = curve-\/>\mbox{\hyperlink{class_t_double_param_a28b99ec860d56fd1b47f89f08ca0a3ca}{getNextKeyframe}}(frame);}
\DoxyCodeLine{01582     \textcolor{keywordflow}{if} (k0 == curve-\/>getKeyframeCount() -\/ 1)  \textcolor{comment}{// after last keyframe}}
\DoxyCodeLine{01583     \{}
\DoxyCodeLine{01584       \textcolor{keywordflow}{if} (curve-\/>isCycleEnabled())}
\DoxyCodeLine{01585         menu.addAction(\&deactivateCycleAction);}
\DoxyCodeLine{01586       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01587         menu.addAction(\&activateCycleAction);}
\DoxyCodeLine{01588     \}}
\DoxyCodeLine{01589     menu.addAction(\&insertKeyframeAction);}
\DoxyCodeLine{01590     \textcolor{keywordflow}{if} (k0 >= 0 \&\& k1 >= 0) \{}
\DoxyCodeLine{01591       menu.addSeparator();}
\DoxyCodeLine{01592       segmentIndex = k0;}
\DoxyCodeLine{01593       kf           = curve-\/>getKeyframe(k0);}
\DoxyCodeLine{01594       menu.addAction(\&setLinearAction);}
\DoxyCodeLine{01595       \textcolor{keywordflow}{if} (kf.m\_type == TDoubleKeyframe::Linear)}
\DoxyCodeLine{01596         setLinearAction.setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{01597       menu.addAction(\&setSpeedInOutAction);}
\DoxyCodeLine{01598       \textcolor{keywordflow}{if} (kf.m\_type == TDoubleKeyframe::SpeedInOut)}
\DoxyCodeLine{01599         setSpeedInOutAction.setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{01600       menu.addAction(\&setEaseInOutAction);}
\DoxyCodeLine{01601       \textcolor{keywordflow}{if} (kf.m\_type == TDoubleKeyframe::EaseInOut)}
\DoxyCodeLine{01602         setEaseInOutAction.setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{01603       menu.addAction(\&setEaseInOut2Action);}
\DoxyCodeLine{01604       \textcolor{keywordflow}{if} (kf.m\_type == TDoubleKeyframe::EaseInOutPercentage)}
\DoxyCodeLine{01605         setEaseInOut2Action.setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{01606       menu.addAction(\&setExponentialAction);}
\DoxyCodeLine{01607       \textcolor{keywordflow}{if} (kf.m\_type == TDoubleKeyframe::Exponential)}
\DoxyCodeLine{01608         setExponentialAction.setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{01609       menu.addAction(\&setExpressionAction);}
\DoxyCodeLine{01610       \textcolor{keywordflow}{if} (kf.m\_type == TDoubleKeyframe::Expression)}
\DoxyCodeLine{01611         setExpressionAction.setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{01612       menu.addAction(\&setSimilarShapeAction);}
\DoxyCodeLine{01613       \textcolor{keywordflow}{if} (kf.m\_type == TDoubleKeyframe::SimilarShape)}
\DoxyCodeLine{01614         setSimilarShapeAction.setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{01615       menu.addAction(\&setFileAction);}
\DoxyCodeLine{01616       \textcolor{keywordflow}{if} (kf.m\_type == TDoubleKeyframe::File) setFileAction.setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{01617       menu.addAction(\&setConstantAction);}
\DoxyCodeLine{01618       \textcolor{keywordflow}{if} (kf.m\_type == TDoubleKeyframe::Constant)}
\DoxyCodeLine{01619         setConstantAction.setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{01620       menu.addSeparator();}
\DoxyCodeLine{01621       \textcolor{keywordflow}{if} (kf.m\_step != 1) menu.addAction(\&setStep1Action);}
\DoxyCodeLine{01622       \textcolor{keywordflow}{if} (kf.m\_step != 2) menu.addAction(\&setStep2Action);}
\DoxyCodeLine{01623       \textcolor{keywordflow}{if} (kf.m\_step != 3) menu.addAction(\&setStep3Action);}
\DoxyCodeLine{01624       \textcolor{keywordflow}{if} (kf.m\_step != 4) menu.addAction(\&setStep4Action);}
\DoxyCodeLine{01625       menu.addSeparator();}
\DoxyCodeLine{01626     \}}
\DoxyCodeLine{01627   \}}
\DoxyCodeLine{01628   \textcolor{keywordflow}{if} (!getSelection()-\/>isEmpty()) menu.addAction(\&fitSelectedAction);}
\DoxyCodeLine{01629   menu.addAction(\&fitAllAction);}
\DoxyCodeLine{01630 }
\DoxyCodeLine{01631   \textcolor{comment}{// curve shape type}}
\DoxyCodeLine{01632   QAction curveShapeSmoothAction(tr(\textcolor{stringliteral}{"{}Smooth"{}}), 0);}
\DoxyCodeLine{01633   QAction curveShapeFrameBasedAction(tr(\textcolor{stringliteral}{"{}Frame Based"{}}), 0);}
\DoxyCodeLine{01634   QMenu curveShapeSubmenu(tr(\textcolor{stringliteral}{"{}Curve Shape"{}}), 0);}
\DoxyCodeLine{01635   menu.addSeparator();}
\DoxyCodeLine{01636   curveShapeSubmenu.addAction(\&curveShapeSmoothAction);}
\DoxyCodeLine{01637   curveShapeSubmenu.addAction(\&curveShapeFrameBasedAction);}
\DoxyCodeLine{01638   menu.addMenu(\&curveShapeSubmenu);}
\DoxyCodeLine{01639 }
\DoxyCodeLine{01640   curveShapeSmoothAction.setCheckable(\textcolor{keyword}{true});}
\DoxyCodeLine{01641   curveShapeSmoothAction.setChecked(m\_curveShape == SMOOTH);}
\DoxyCodeLine{01642   curveShapeFrameBasedAction.setCheckable(\textcolor{keyword}{true});}
\DoxyCodeLine{01643   curveShapeFrameBasedAction.setChecked(m\_curveShape == FRAME\_BASED);}
\DoxyCodeLine{01644 }
\DoxyCodeLine{01645   \textcolor{comment}{// Store m\_highlighted due to the following exec()}}
\DoxyCodeLine{01646   Highlighted highlighted(m\_highlighted);}
\DoxyCodeLine{01647 }
\DoxyCodeLine{01648   \textcolor{comment}{// execute menu}}
\DoxyCodeLine{01649   QAction *action = menu.exec(e-\/>globalPos());  \textcolor{comment}{// Will process events, possibly}}
\DoxyCodeLine{01650                                                 \textcolor{comment}{// altering m\_highlighted}}
\DoxyCodeLine{01651                                                 \textcolor{comment}{// (MAC-\/verified)}}
\DoxyCodeLine{01652   \textcolor{keywordflow}{if} (action == \&linkHandlesAction)  \textcolor{comment}{// Let's just *hope* that doesn't happen to}}
\DoxyCodeLine{01653                                      \textcolor{comment}{// m\_gadgets though...  :/}}
\DoxyCodeLine{01654   \{}
\DoxyCodeLine{01655     \textcolor{keywordflow}{if} (m\_gadgets[highlighted.gIndex].m\_handle != 100)}
\DoxyCodeLine{01656       \mbox{\hyperlink{class_keyframe_setter}{KeyframeSetter}}(curve, m\_gadgets[highlighted.gIndex].m\_kIndex)}
\DoxyCodeLine{01657           .linkHandles();}
\DoxyCodeLine{01658   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&unlinkHandlesAction) \{}
\DoxyCodeLine{01659     \textcolor{keywordflow}{if} (m\_gadgets[highlighted.gIndex].m\_handle != 100)}
\DoxyCodeLine{01660       \mbox{\hyperlink{class_keyframe_setter}{KeyframeSetter}}(curve, m\_gadgets[highlighted.gIndex].m\_kIndex)}
\DoxyCodeLine{01661           .unlinkHandles();}
\DoxyCodeLine{01662   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&resetHandlesAction) \{}
\DoxyCodeLine{01663     kf.m\_speedIn  = \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/5, 0);}
\DoxyCodeLine{01664     kf.m\_speedOut = -\/kf.m\_speedIn;}
\DoxyCodeLine{01665     curve-\/>\mbox{\hyperlink{class_t_double_param_a3447e9b5820724eacf6b43d34a75737f}{setKeyframe}}(kf);}
\DoxyCodeLine{01666   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&deleteKeyframeAction) \{}
\DoxyCodeLine{01667     KeyframeSetter::removeKeyframeAt(curve, kf.m\_frame);}
\DoxyCodeLine{01668   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&insertKeyframeAction) \{}
\DoxyCodeLine{01669     \mbox{\hyperlink{class_keyframe_setter}{KeyframeSetter}}(curve).createKeyframe(tround(frame));}
\DoxyCodeLine{01670   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&activateCycleAction) \{}
\DoxyCodeLine{01671     KeyframeSetter::enableCycle(curve, \textcolor{keyword}{true});}
\DoxyCodeLine{01672   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&deactivateCycleAction) \{}
\DoxyCodeLine{01673     KeyframeSetter::enableCycle(curve, \textcolor{keyword}{false});}
\DoxyCodeLine{01674   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&setLinearAction)}
\DoxyCodeLine{01675     setSegmentType(getSelection(), curve, segmentIndex,}
\DoxyCodeLine{01676                    TDoubleKeyframe::Linear);}
\DoxyCodeLine{01677   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&setSpeedInOutAction)}
\DoxyCodeLine{01678     setSegmentType(getSelection(), curve, segmentIndex,}
\DoxyCodeLine{01679                    TDoubleKeyframe::SpeedInOut);}
\DoxyCodeLine{01680   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&setEaseInOutAction)}
\DoxyCodeLine{01681     setSegmentType(getSelection(), curve, segmentIndex,}
\DoxyCodeLine{01682                    TDoubleKeyframe::EaseInOut);}
\DoxyCodeLine{01683   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&setEaseInOut2Action)}
\DoxyCodeLine{01684     setSegmentType(getSelection(), curve, segmentIndex,}
\DoxyCodeLine{01685                    TDoubleKeyframe::EaseInOutPercentage);}
\DoxyCodeLine{01686   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&setExponentialAction)}
\DoxyCodeLine{01687     setSegmentType(getSelection(), curve, segmentIndex,}
\DoxyCodeLine{01688                    TDoubleKeyframe::Exponential);}
\DoxyCodeLine{01689   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&setExpressionAction)}
\DoxyCodeLine{01690     setSegmentType(getSelection(), curve, segmentIndex,}
\DoxyCodeLine{01691                    TDoubleKeyframe::Expression);}
\DoxyCodeLine{01692   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&setSimilarShapeAction)}
\DoxyCodeLine{01693     setSegmentType(getSelection(), curve, segmentIndex,}
\DoxyCodeLine{01694                    TDoubleKeyframe::SimilarShape);}
\DoxyCodeLine{01695   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&setFileAction)}
\DoxyCodeLine{01696     setSegmentType(getSelection(), curve, segmentIndex, TDoubleKeyframe::File);}
\DoxyCodeLine{01697   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&setConstantAction)}
\DoxyCodeLine{01698     setSegmentType(getSelection(), curve, segmentIndex,}
\DoxyCodeLine{01699                    TDoubleKeyframe::Constant);}
\DoxyCodeLine{01700   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&fitSelectedAction)}
\DoxyCodeLine{01701     fitSelectedPoints();}
\DoxyCodeLine{01702   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&fitAllAction)}
\DoxyCodeLine{01703     fitCurve();}
\DoxyCodeLine{01704   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&setStep1Action)}
\DoxyCodeLine{01705     \mbox{\hyperlink{class_keyframe_setter}{KeyframeSetter}}(curve, segmentIndex).setStep(1);}
\DoxyCodeLine{01706   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&setStep2Action)}
\DoxyCodeLine{01707     \mbox{\hyperlink{class_keyframe_setter}{KeyframeSetter}}(curve, segmentIndex).setStep(2);}
\DoxyCodeLine{01708   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&setStep3Action)}
\DoxyCodeLine{01709     \mbox{\hyperlink{class_keyframe_setter}{KeyframeSetter}}(curve, segmentIndex).setStep(3);}
\DoxyCodeLine{01710   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&setStep4Action)}
\DoxyCodeLine{01711     \mbox{\hyperlink{class_keyframe_setter}{KeyframeSetter}}(curve, segmentIndex).setStep(4);}
\DoxyCodeLine{01712 }
\DoxyCodeLine{01713   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&curveShapeSmoothAction)}
\DoxyCodeLine{01714     m\_curveShape = SMOOTH;}
\DoxyCodeLine{01715   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (action == \&curveShapeFrameBasedAction)}
\DoxyCodeLine{01716     m\_curveShape = FRAME\_BASED;}
\DoxyCodeLine{01717 }
\DoxyCodeLine{01718   update();}
\DoxyCodeLine{01719 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_aa4955bc96ad1955753e73c78f8173e98}\label{class_function_panel_aa4955bc96ad1955753e73c78f8173e98}} 
\index{FunctionPanel@{FunctionPanel}!paintEvent@{paintEvent}}
\index{paintEvent@{paintEvent}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{paintEvent()}{paintEvent()}}
{\footnotesize\ttfamily void Function\+Panel\+::paint\+Event (\begin{DoxyParamCaption}\item[{QPaint\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01078                                              \{}
\DoxyCodeLine{01079   m\_gadgets.clear();}
\DoxyCodeLine{01080 }
\DoxyCodeLine{01081   QString fontName = Preferences::instance()-\/>getInterfaceFont();}
\DoxyCodeLine{01082   \textcolor{keywordflow}{if} (fontName == \textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{01083 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{01084     fontName = \textcolor{stringliteral}{"{}Arial"{}};}
\DoxyCodeLine{01085 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01086     fontName = \textcolor{stringliteral}{"{}Helvetica"{}};}
\DoxyCodeLine{01087 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01088   \}}
\DoxyCodeLine{01089 }
\DoxyCodeLine{01090   QPainter painter(\textcolor{keyword}{this});}
\DoxyCodeLine{01091   QFont font(fontName, 8);}
\DoxyCodeLine{01092   painter.setFont(font);}
\DoxyCodeLine{01093   QFontMetrics fm(font);}
\DoxyCodeLine{01094 }
\DoxyCodeLine{01095   \textcolor{comment}{// define ruler sizes}}
\DoxyCodeLine{01096   m\_valueAxisX     = fm.width(\textcolor{stringliteral}{"{}-\/888.88"{}}) + 2;}
\DoxyCodeLine{01097   m\_frameAxisY     = fm.height() + 2;}
\DoxyCodeLine{01098   m\_graphViewportY = m\_frameAxisY + 12;}
\DoxyCodeLine{01099   \textcolor{keywordtype}{int} ox           = m\_valueAxisX;}
\DoxyCodeLine{01100   \textcolor{keywordtype}{int} oy0          = m\_graphViewportY;}
\DoxyCodeLine{01101   \textcolor{keywordtype}{int} oy1          = m\_frameAxisY;}
\DoxyCodeLine{01102 }
\DoxyCodeLine{01103   \textcolor{comment}{// QRect bounds(0,0,width(),height());}}
\DoxyCodeLine{01104 }
\DoxyCodeLine{01105   \textcolor{comment}{// draw functions background}}
\DoxyCodeLine{01106   painter.setBrush(getBGColor());}
\DoxyCodeLine{01107   painter.setPen(Qt::NoPen);}
\DoxyCodeLine{01108   painter.drawRect(ox, oy0, width() -\/ ox, height() -\/ oy0);}
\DoxyCodeLine{01109 }
\DoxyCodeLine{01110   painter.setClipRect(ox, 0, width() -\/ ox, height());}
\DoxyCodeLine{01111   drawCurrentFrame(painter);}
\DoxyCodeLine{01112   drawFrameGrid(painter);}
\DoxyCodeLine{01113 }
\DoxyCodeLine{01114   painter.setClipRect(0, oy0, width(), height() -\/ oy0);}
\DoxyCodeLine{01115   drawValueGrid(painter);}
\DoxyCodeLine{01116 }
\DoxyCodeLine{01117   \textcolor{comment}{// draw axes}}
\DoxyCodeLine{01118   painter.setClipping(\textcolor{keyword}{false});}
\DoxyCodeLine{01119   painter.setPen(m\_textColor);}
\DoxyCodeLine{01120   painter.drawLine(0, oy0, width(), oy0);}
\DoxyCodeLine{01121   painter.drawLine(ox, oy1, width(), oy1);}
\DoxyCodeLine{01122   painter.drawLine(ox, 0, ox, height());}
\DoxyCodeLine{01123 }
\DoxyCodeLine{01124   \textcolor{comment}{// draw curves}}
\DoxyCodeLine{01125   painter.setClipRect(ox + 1, oy0 + 1, width() -\/ ox -\/ 1, height() -\/ oy0 -\/ 1);}
\DoxyCodeLine{01126   drawOtherCurves(painter);}
\DoxyCodeLine{01127   drawCurrentCurve(painter);}
\DoxyCodeLine{01128 }
\DoxyCodeLine{01129   painter.setClipping(\textcolor{keyword}{false});}
\DoxyCodeLine{01130   painter.setClipRect(ox + 1, oy1 + 1, width() -\/ ox -\/ 1, oy0 -\/ oy1 -\/ 1);}
\DoxyCodeLine{01131   drawGroupKeyframes(painter);}
\DoxyCodeLine{01132   painter.setClipRect(ox + 1, oy0 + 1, width() -\/ ox -\/ 1, height() -\/ oy0 -\/ 1);}
\DoxyCodeLine{01133 }
\DoxyCodeLine{01134   \textcolor{comment}{// tool}}
\DoxyCodeLine{01135   \textcolor{keywordflow}{if} (m\_dragTool) m\_dragTool-\/>draw(painter);}
\DoxyCodeLine{01136 }
\DoxyCodeLine{01137   \textcolor{comment}{// cursor}}
\DoxyCodeLine{01138   \textcolor{keywordflow}{if} (m\_cursor.visible) \{}
\DoxyCodeLine{01139     painter.setClipRect(ox + 1, oy0 + 1, width() -\/ ox -\/ 1, height() -\/ oy0 -\/ 1);}
\DoxyCodeLine{01140     painter.setPen(getOtherCurvesColor());}
\DoxyCodeLine{01141     \textcolor{keywordtype}{int} x = frameToX(m\_cursor.frame);}
\DoxyCodeLine{01142     painter.drawLine(x, oy0 + 1, x, oy0 + 10);}
\DoxyCodeLine{01143     QString text = QString::number(tround(m\_cursor.frame) + 1);}
\DoxyCodeLine{01144     painter.drawText(x -\/ fm.width(text) / 2, oy0 + 10 + fm.height(), text);}
\DoxyCodeLine{01145 }
\DoxyCodeLine{01146     \mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *currentCurve = getCurrentCurve();}
\DoxyCodeLine{01147     \textcolor{keywordflow}{if} (currentCurve) \{}
\DoxyCodeLine{01148       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_unit}{TUnit}} *unit = 0;}
\DoxyCodeLine{01149       \textcolor{keywordflow}{if} (currentCurve-\/>getMeasure())}
\DoxyCodeLine{01150         unit = currentCurve-\/>getMeasure()-\/>getCurrentUnit();}
\DoxyCodeLine{01151       \textcolor{keywordtype}{double} displayValue = m\_cursor.value;}
\DoxyCodeLine{01152       \textcolor{keywordflow}{if} (unit) displayValue = unit-\/>convertTo(displayValue);}
\DoxyCodeLine{01153       \textcolor{comment}{// painter.setClipRect(0,oy0,height(),height()-\/oy0);}}
\DoxyCodeLine{01154       \textcolor{keywordtype}{int} y = valueToY(currentCurve, m\_cursor.value);}
\DoxyCodeLine{01155       painter.drawLine(ox, y, ox + 10, y);}
\DoxyCodeLine{01156       painter.drawText(m\_origin.x() + 10, y + 4, QString::number(displayValue));}
\DoxyCodeLine{01157     \}}
\DoxyCodeLine{01158   \}}
\DoxyCodeLine{01159 }
\DoxyCodeLine{01160   \textcolor{comment}{// curve name}}
\DoxyCodeLine{01161   \textcolor{keywordflow}{if} (m\_curveLabel.text != \textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{01162     painter.setClipRect(ox, oy0, width() -\/ ox, height() -\/ oy0);}
\DoxyCodeLine{01163     painter.setPen(m\_selectedColor);}
\DoxyCodeLine{01164     painter.drawLine(m\_curveLabel.curvePos, m\_curveLabel.labelPos);}
\DoxyCodeLine{01165     painter.drawText(m\_curveLabel.labelPos,}
\DoxyCodeLine{01166                      QString::fromStdString(m\_curveLabel.text));}
\DoxyCodeLine{01167   \}}
\DoxyCodeLine{01168 }
\DoxyCodeLine{01169   \textcolor{comment}{// painter.setPen(Qt::black);}}
\DoxyCodeLine{01170   \textcolor{comment}{// painter.drawText(QPointF(70,70),}}
\DoxyCodeLine{01171   \textcolor{comment}{//  "{}f0="{} + QString::number(xToFrame(ox)) +}}
\DoxyCodeLine{01172   \textcolor{comment}{//  "{} f1="{} + QString::number(xToFrame(width())));}}
\DoxyCodeLine{01173 }
\DoxyCodeLine{01174   \textcolor{comment}{// painter.setPen(Qt::black);}}
\DoxyCodeLine{01175   \textcolor{comment}{// painter.setBrush(Qt::NoBrush);}}
\DoxyCodeLine{01176   \textcolor{comment}{// painter.drawRect(ox+10,oy+10,width()-\/ox-\/20,height()-\/oy-\/20);}}
\DoxyCodeLine{01177 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a0bb4e611a6811beb1b96afd3da52387b}\label{class_function_panel_a0bb4e611a6811beb1b96afd3da52387b}} 
\index{FunctionPanel@{FunctionPanel}!pan@{pan}}
\index{pan@{pan}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{pan()}{pan()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Function\+Panel\+::pan (\begin{DoxyParamCaption}\item[{const QPoint \&}]{delta }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00151 \{ pan(delta.x(), delta.y()); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a0b9e76c6ffc5424a2072b93a709a573b}\label{class_function_panel_a0b9e76c6ffc5424a2072b93a709a573b}} 
\index{FunctionPanel@{FunctionPanel}!pan@{pan}}
\index{pan@{pan}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{pan()}{pan()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Function\+Panel\+::pan (\begin{DoxyParamCaption}\item[{int}]{dx,  }\item[{int}]{dy }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00338                                       \{}
\DoxyCodeLine{00339   QTransform m;}
\DoxyCodeLine{00340   m.translate(dx, dy);}
\DoxyCodeLine{00341   m\_viewTransform *= m;}
\DoxyCodeLine{00342   update();}
\DoxyCodeLine{00343 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_ab285f886797058670c35229b2bca04bc}\label{class_function_panel_ab285f886797058670c35229b2bca04bc}} 
\index{FunctionPanel@{FunctionPanel}!setBGColor@{setBGColor}}
\index{setBGColor@{setBGColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{setBGColor()}{setBGColor()}}
{\footnotesize\ttfamily void Function\+Panel\+::set\+BGColor (\begin{DoxyParamCaption}\item[{const QColor \&}]{color }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00188 \{ m\_bgColor = color; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_afcff030b638b8c3d48ea26a10b4b9cf8}\label{class_function_panel_afcff030b638b8c3d48ea26a10b4b9cf8}} 
\index{FunctionPanel@{FunctionPanel}!setFrameHandle@{setFrameHandle}}
\index{setFrameHandle@{setFrameHandle}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{setFrameHandle()}{setFrameHandle()}}
{\footnotesize\ttfamily void Function\+Panel\+::set\+Frame\+Handle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_frame_handle}{TFrame\+Handle}} $\ast$}]{frame\+Handle }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01723                                                             \{}
\DoxyCodeLine{01724   \textcolor{keywordflow}{if} (m\_frameHandle == frameHandle) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01725   \textcolor{keywordflow}{if} (m\_frameHandle) m\_frameHandle-\/>disconnect(\textcolor{keyword}{this});}
\DoxyCodeLine{01726   m\_frameHandle = frameHandle;}
\DoxyCodeLine{01727   \textcolor{keywordflow}{if} (isVisible() \&\& m\_frameHandle) \{}
\DoxyCodeLine{01728     connect(m\_frameHandle, SIGNAL(frameSwitched()), \textcolor{keyword}{this},}
\DoxyCodeLine{01729             SLOT(onFrameSwitched()));}
\DoxyCodeLine{01730     update();}
\DoxyCodeLine{01731   \}}
\DoxyCodeLine{01732   assert(m\_selection);}
\DoxyCodeLine{01733   m\_selection-\/>setFrameHandle(frameHandle);}
\DoxyCodeLine{01734 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a02850f151f3a8f66672cbeaae2a318ae}\label{class_function_panel_a02850f151f3a8f66672cbeaae2a318ae}} 
\index{FunctionPanel@{FunctionPanel}!setFrameLineColor@{setFrameLineColor}}
\index{setFrameLineColor@{setFrameLineColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{setFrameLineColor()}{setFrameLineColor()}}
{\footnotesize\ttfamily void Function\+Panel\+::set\+Frame\+Line\+Color (\begin{DoxyParamCaption}\item[{const QColor \&}]{color }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00192 \{ m\_frameLineColor = color; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a79a65ba6410c0d92e4623a598ce95dc8}\label{class_function_panel_a79a65ba6410c0d92e4623a598ce95dc8}} 
\index{FunctionPanel@{FunctionPanel}!setModel@{setModel}}
\index{setModel@{setModel}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{setModel()}{setModel()}}
{\footnotesize\ttfamily void Function\+Panel\+::set\+Model (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_function_tree_model}{Function\+Tree\+Model}} $\ast$}]{model }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00123 \{ m\_functionTreeModel = model; \};}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a332dd23ec404fc2868a2b800509f7adb}\label{class_function_panel_a332dd23ec404fc2868a2b800509f7adb}} 
\index{FunctionPanel@{FunctionPanel}!setOtherCurvesColor@{setOtherCurvesColor}}
\index{setOtherCurvesColor@{setOtherCurvesColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{setOtherCurvesColor()}{setOtherCurvesColor()}}
{\footnotesize\ttfamily void Function\+Panel\+::set\+Other\+Curves\+Color (\begin{DoxyParamCaption}\item[{const QColor \&}]{color }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00194 \{ m\_otherCurvesColor = color; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a8bdacb32de24d5e6a8a0cdbc5904f1b7}\label{class_function_panel_a8bdacb32de24d5e6a8a0cdbc5904f1b7}} 
\index{FunctionPanel@{FunctionPanel}!setRulerBackground@{setRulerBackground}}
\index{setRulerBackground@{setRulerBackground}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{setRulerBackground()}{setRulerBackground()}}
{\footnotesize\ttfamily void Function\+Panel\+::set\+Ruler\+Background (\begin{DoxyParamCaption}\item[{const QColor \&}]{color }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00196 \{ m\_rulerBackground = color; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a85bc90c4d6839e75687d2d97dd8ca46b}\label{class_function_panel_a85bc90c4d6839e75687d2d97dd8ca46b}} 
\index{FunctionPanel@{FunctionPanel}!setSelectedColor@{setSelectedColor}}
\index{setSelectedColor@{setSelectedColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{setSelectedColor()}{setSelectedColor()}}
{\footnotesize\ttfamily void Function\+Panel\+::set\+Selected\+Color (\begin{DoxyParamCaption}\item[{const QColor \&}]{color }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00202 \{ m\_selectedColor = color; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_acc29da2d417c9360b0cd9d21b7d24a4b}\label{class_function_panel_acc29da2d417c9360b0cd9d21b7d24a4b}} 
\index{FunctionPanel@{FunctionPanel}!setSelection@{setSelection}}
\index{setSelection@{setSelection}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{setSelection()}{setSelection()}}
{\footnotesize\ttfamily void Function\+Panel\+::set\+Selection (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_function_selection}{Function\+Selection}} $\ast$}]{selection }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00127                                                   \{}
\DoxyCodeLine{00128     m\_selection = selection;}
\DoxyCodeLine{00129   \}  \textcolor{comment}{// does NOT get ownership}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a6aed26a0cc44ed451a5a4d4a25239835}\label{class_function_panel_a6aed26a0cc44ed451a5a4d4a25239835}} 
\index{FunctionPanel@{FunctionPanel}!setSubColor@{setSubColor}}
\index{setSubColor@{setSubColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{setSubColor()}{setSubColor()}}
{\footnotesize\ttfamily void Function\+Panel\+::set\+Sub\+Color (\begin{DoxyParamCaption}\item[{const QColor \&}]{color }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00200 \{ m\_subColor = color; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a2bc32d0bc925303f7d394a3a2516976b}\label{class_function_panel_a2bc32d0bc925303f7d394a3a2516976b}} 
\index{FunctionPanel@{FunctionPanel}!setTextColor@{setTextColor}}
\index{setTextColor@{setTextColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{setTextColor()}{setTextColor()}}
{\footnotesize\ttfamily void Function\+Panel\+::set\+Text\+Color (\begin{DoxyParamCaption}\item[{const QColor \&}]{color }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00198 \{ m\_textColor = color; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a0d71c48341d8eb5196ff191c2f195af9}\label{class_function_panel_a0d71c48341d8eb5196ff191c2f195af9}} 
\index{FunctionPanel@{FunctionPanel}!setValueLineColor@{setValueLineColor}}
\index{setValueLineColor@{setValueLineColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{setValueLineColor()}{setValueLineColor()}}
{\footnotesize\ttfamily void Function\+Panel\+::set\+Value\+Line\+Color (\begin{DoxyParamCaption}\item[{const QColor \&}]{color }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00190 \{ m\_valueLineColor = color; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a2d5b0df177b6e7d70c10b56d8b2ab969}\label{class_function_panel_a2d5b0df177b6e7d70c10b56d8b2ab969}} 
\index{FunctionPanel@{FunctionPanel}!setViewTransform@{setViewTransform}}
\index{setViewTransform@{setViewTransform}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{setViewTransform()}{setViewTransform()}}
{\footnotesize\ttfamily void Function\+Panel\+::set\+View\+Transform (\begin{DoxyParamCaption}\item[{const QTransform \&}]{view\+Transform }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00135                                                          \{}
\DoxyCodeLine{00136     m\_viewTransform = viewTransform;}
\DoxyCodeLine{00137   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a674337a8b400ed2a112da729d85deefb}\label{class_function_panel_a674337a8b400ed2a112da729d85deefb}} 
\index{FunctionPanel@{FunctionPanel}!showEvent@{showEvent}}
\index{showEvent@{showEvent}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{showEvent()}{showEvent()}}
{\footnotesize\ttfamily void Function\+Panel\+::show\+Event (\begin{DoxyParamCaption}\item[{QShow\+Event $\ast$}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01738                                           \{}
\DoxyCodeLine{01739   \textcolor{keywordflow}{if} (m\_frameHandle)}
\DoxyCodeLine{01740     connect(m\_frameHandle, SIGNAL(frameSwitched()), \textcolor{keyword}{this},}
\DoxyCodeLine{01741             SLOT(onFrameSwitched()));}
\DoxyCodeLine{01742 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a0b175c6315b45dfd21cefd17fa92b67d}\label{class_function_panel_a0b175c6315b45dfd21cefd17fa92b67d}} 
\index{FunctionPanel@{FunctionPanel}!updateGadgets@{updateGadgets}}
\index{updateGadgets@{updateGadgets}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{updateGadgets()}{updateGadgets()}}
{\footnotesize\ttfamily void Function\+Panel\+::update\+Gadgets (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$}]{curve }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00685                                                      \{}
\DoxyCodeLine{00686   m\_gadgets.clear();}
\DoxyCodeLine{00687 }
\DoxyCodeLine{00688   \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} oldKf;}
\DoxyCodeLine{00689   oldKf.m\_type = TDoubleKeyframe::None;}
\DoxyCodeLine{00690 }
\DoxyCodeLine{00691   \textcolor{keywordtype}{int} keyframeCount = curve-\/>getKeyframeCount();}
\DoxyCodeLine{00692 }
\DoxyCodeLine{00693   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i != keyframeCount; ++i) \{}
\DoxyCodeLine{00694     \textcolor{keyword}{const} \textcolor{keywordtype}{int} pointHitRadius = 10, handleHitRadius = 6;}
\DoxyCodeLine{00695 }
\DoxyCodeLine{00696     \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} kf = curve-\/>getKeyframe(i);}
\DoxyCodeLine{00697     kf.m\_value         = curve-\/>getValue(}
\DoxyCodeLine{00698         kf.m\_frame);  \textcolor{comment}{// Some keyframe values do NOT correspond to the}}
\DoxyCodeLine{00699                       \textcolor{comment}{// actual displayed curve value (eg with expressions)}}
\DoxyCodeLine{00700     \textcolor{comment}{// Build keyframe positions}}
\DoxyCodeLine{00701     QPointF p     = getWinPos(curve, kf.m\_frame);}
\DoxyCodeLine{00702     QPointF pLeft = p;}
\DoxyCodeLine{00703 }
\DoxyCodeLine{00704     \textcolor{keywordflow}{if} (i == keyframeCount -\/ 1 \&\&}
\DoxyCodeLine{00705         curve}
\DoxyCodeLine{00706             -\/>isCycleEnabled())  \textcolor{comment}{// This is probably OBSOLETE. I don't think the}}
\DoxyCodeLine{00707       p = getWinPos(curve, kf.m\_frame,}
\DoxyCodeLine{00708                     curve-\/>getValue(}
\DoxyCodeLine{00709                         kf.m\_frame,}
\DoxyCodeLine{00710                         \textcolor{keyword}{true}));  \textcolor{comment}{// GUI allows cycling single curves nowadays...}}
\DoxyCodeLine{00711                                  \textcolor{comment}{// However, is the assignment correct?}}
\DoxyCodeLine{00712     \textcolor{comment}{// Add keyframe gadget(s)}}
\DoxyCodeLine{00713     m\_gadgets.push\_back(Gadget(Point, i, p, pointHitRadius, pointHitRadius));}
\DoxyCodeLine{00714 }
\DoxyCodeLine{00715     \mbox{\hyperlink{class_t_point_t}{TPointD}} currentPointRight(kf.m\_frame, kf.m\_value);}
\DoxyCodeLine{00716     \mbox{\hyperlink{class_t_point_t}{TPointD}} currentPointLeft(currentPointRight);}
\DoxyCodeLine{00717 }
\DoxyCodeLine{00718     \textcolor{comment}{// If the previous segment or the current segment are not keyframe based,}}
\DoxyCodeLine{00719     \textcolor{comment}{// the curve can have two different values in kf.m\_frame}}
\DoxyCodeLine{00720     \textcolor{keywordflow}{if} (i > 0 \&\&}
\DoxyCodeLine{00721         (!TDoubleKeyframe::isKeyframeBased(}
\DoxyCodeLine{00722              kf.m\_type) ||  \textcolor{comment}{// Keyframe-\/based are the above mentioned curves}}
\DoxyCodeLine{00723          !TDoubleKeyframe::isKeyframeBased(}
\DoxyCodeLine{00724              curve-\/>getKeyframe(i -\/ 1)}
\DoxyCodeLine{00725                  .m\_type)))  \textcolor{comment}{// where values stored in keyframes are not used}}
\DoxyCodeLine{00726     \{                        \textcolor{comment}{// to calculate the actual curve values.}}
\DoxyCodeLine{00727       currentPointLeft.y = curve-\/>getValue(kf.m\_frame, \textcolor{keyword}{true});}
\DoxyCodeLine{00728       pLeft              = getWinPos(curve, currentPointLeft);}
\DoxyCodeLine{00729       m\_gadgets.push\_back(}
\DoxyCodeLine{00730           Gadget(Point, i, pLeft, pointHitRadius, pointHitRadius));}
\DoxyCodeLine{00731     \}}
\DoxyCodeLine{00732 }
\DoxyCodeLine{00733     \textcolor{comment}{// Add handle gadgets (eg the speed or ease handles)}}
\DoxyCodeLine{00734     \textcolor{keywordflow}{if} (getSelection()-\/>isSelected(curve, i)) \{}
\DoxyCodeLine{00735       \textcolor{comment}{// Left handle}}
\DoxyCodeLine{00736       \textcolor{keywordflow}{switch} (oldKf.m\_type) \{}
\DoxyCodeLine{00737       \textcolor{keywordflow}{case} TDoubleKeyframe::SpeedInOut: \{}
\DoxyCodeLine{00738         \mbox{\hyperlink{class_t_point_t}{TPointD}} speedIn = curve-\/>getSpeedIn(i);}
\DoxyCodeLine{00739         \textcolor{keywordflow}{if} (norm2(speedIn) > 0) \{}
\DoxyCodeLine{00740           QPointF q = getWinPos(curve, currentPointLeft + speedIn);}
\DoxyCodeLine{00741           m\_gadgets.push\_back(}
\DoxyCodeLine{00742               Gadget(SpeedIn, i, q, handleHitRadius, handleHitRadius, pLeft));}
\DoxyCodeLine{00743         \}}
\DoxyCodeLine{00744         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00745       \}}
\DoxyCodeLine{00746 }
\DoxyCodeLine{00747       \textcolor{keywordflow}{case} TDoubleKeyframe::EaseInOut: \{}
\DoxyCodeLine{00748         QPointF q = getWinPos(curve, kf.m\_frame + kf.m\_speedIn.x);}
\DoxyCodeLine{00749         m\_gadgets.push\_back(Gadget(EaseIn, i, q, 6, 15));}
\DoxyCodeLine{00750         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00751       \}}
\DoxyCodeLine{00752 }
\DoxyCodeLine{00753       \textcolor{keywordflow}{case} TDoubleKeyframe::EaseInOutPercentage: \{}
\DoxyCodeLine{00754         \textcolor{keywordtype}{double} easeIn = kf.m\_speedIn.x * (kf.m\_frame -\/ oldKf.m\_frame) * 0.01;}
\DoxyCodeLine{00755         QPointF q     = getWinPos(curve, kf.m\_frame + easeIn);}
\DoxyCodeLine{00756         m\_gadgets.push\_back(Gadget(EaseInPercentage, i, q, 6, 15));}
\DoxyCodeLine{00757         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00758       \}}
\DoxyCodeLine{00759       \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00760         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00761       \}}
\DoxyCodeLine{00762 }
\DoxyCodeLine{00763       \textcolor{comment}{// Right handle}}
\DoxyCodeLine{00764       \textcolor{keywordflow}{if} (i != keyframeCount -\/ 1) \{}
\DoxyCodeLine{00765         \textcolor{keywordflow}{switch} (kf.m\_type) \{}
\DoxyCodeLine{00766         \textcolor{keywordflow}{case} TDoubleKeyframe::SpeedInOut: \{}
\DoxyCodeLine{00767           \mbox{\hyperlink{class_t_point_t}{TPointD}} speedOut = curve-\/>getSpeedOut(i);}
\DoxyCodeLine{00768           \textcolor{keywordflow}{if} (norm2(speedOut) > 0) \{}
\DoxyCodeLine{00769             QPointF q = getWinPos(curve, currentPointRight + speedOut);}
\DoxyCodeLine{00770             m\_gadgets.push\_back(}
\DoxyCodeLine{00771                 Gadget(SpeedOut, i, q, handleHitRadius, handleHitRadius, p));}
\DoxyCodeLine{00772           \}}
\DoxyCodeLine{00773           \textcolor{keywordflow}{break};}
\DoxyCodeLine{00774         \}}
\DoxyCodeLine{00775 }
\DoxyCodeLine{00776         \textcolor{keywordflow}{case} TDoubleKeyframe::EaseInOut: \{}
\DoxyCodeLine{00777           QPointF q = getWinPos(curve, kf.m\_frame + kf.m\_speedOut.x);}
\DoxyCodeLine{00778           m\_gadgets.push\_back(Gadget(EaseOut, i, q, 6, 15));}
\DoxyCodeLine{00779           \textcolor{keywordflow}{break};}
\DoxyCodeLine{00780         \}}
\DoxyCodeLine{00781 }
\DoxyCodeLine{00782         \textcolor{keywordflow}{case} TDoubleKeyframe::EaseInOutPercentage: \{}
\DoxyCodeLine{00783           \textcolor{keywordtype}{double} segmentWidth = curve-\/>\mbox{\hyperlink{class_t_double_param_af08442b9fd968fddada028a6f07983d5}{keyframeIndexToFrame}}(i + 1) -\/ kf.m\_frame;}
\DoxyCodeLine{00784           \textcolor{keywordtype}{double} easeOut      = segmentWidth * kf.m\_speedOut.x * 0.01;}
\DoxyCodeLine{00785 }
\DoxyCodeLine{00786           QPointF q = getWinPos(curve, kf.m\_frame + easeOut);}
\DoxyCodeLine{00787           m\_gadgets.push\_back(Gadget(EaseOutPercentage, i, q, 6, 15));}
\DoxyCodeLine{00788           \textcolor{keywordflow}{break};}
\DoxyCodeLine{00789         \}}
\DoxyCodeLine{00790         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00791           \textcolor{keywordflow}{break};}
\DoxyCodeLine{00792         \}}
\DoxyCodeLine{00793       \}}
\DoxyCodeLine{00794     \}}
\DoxyCodeLine{00795 }
\DoxyCodeLine{00796     oldKf = kf;}
\DoxyCodeLine{00797   \}}
\DoxyCodeLine{00798 }
\DoxyCodeLine{00799   \textcolor{comment}{// Add group gadgets (ie those that can be added when multiple channels share}}
\DoxyCodeLine{00800   \textcolor{comment}{// the same keyframe data)}}
\DoxyCodeLine{00801   \textcolor{keywordtype}{int} channelCount = m\_functionTreeModel-\/>getActiveChannelCount();}
\DoxyCodeLine{00802 }
\DoxyCodeLine{00803   \textcolor{comment}{// Using a map of vectors. Yes, really. The *ideal* way would be that of}}
\DoxyCodeLine{00804   \textcolor{comment}{// copying the first keyframes}}
\DoxyCodeLine{00805   \textcolor{comment}{// vector, and then comparing it with the others from each channel -\/ keeping}}
\DoxyCodeLine{00806   \textcolor{comment}{// the common data only...}}
\DoxyCodeLine{00807 }
\DoxyCodeLine{00808   \textcolor{keyword}{typedef} std::map<double, std::vector<TDoubleKeyframe>>}
\DoxyCodeLine{00809       KeyframeTable;  \textcolor{comment}{// frame -\/> \{ keyframes \}}}
\DoxyCodeLine{00810   KeyframeTable keyframes;}
\DoxyCodeLine{00811 }
\DoxyCodeLine{00812   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i != channelCount; ++i) \{}
\DoxyCodeLine{00813     \mbox{\hyperlink{class_function_tree_model_1_1_channel}{FunctionTreeModel::Channel}} *channel =}
\DoxyCodeLine{00814         m\_functionTreeModel-\/>getActiveChannel(i);}
\DoxyCodeLine{00815     \textcolor{keywordflow}{if} (!channel) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00816 }
\DoxyCodeLine{00817     \mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *curve = channel-\/>getParam();}
\DoxyCodeLine{00818     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j != curve-\/>getKeyframeCount(); ++j) \{}
\DoxyCodeLine{00819       \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} kf = curve-\/>getKeyframe(}
\DoxyCodeLine{00820           j);  \textcolor{comment}{// Well... this stuff gets called upon *painting*  o\_o'}}
\DoxyCodeLine{00821       keyframes[kf.m\_frame].push\_back(}
\DoxyCodeLine{00822           kf);  \textcolor{comment}{// It's bound to be slow. Do we really need it?}}
\DoxyCodeLine{00823     \}}
\DoxyCodeLine{00824   \}}
\DoxyCodeLine{00825 }
\DoxyCodeLine{00826   \textcolor{keywordtype}{int} groupHandleY = m\_graphViewportY -\/ 6;}
\DoxyCodeLine{00827 }
\DoxyCodeLine{00828   KeyframeTable::iterator it, iEnd(keyframes.end()),}
\DoxyCodeLine{00829       iLast(keyframes.empty() ? iEnd : -\/-\/iEnd);}
\DoxyCodeLine{00830   \textcolor{keywordflow}{for} (KeyframeTable::iterator it = keyframes.begin(); it != keyframes.end();}
\DoxyCodeLine{00831        ++it) \{}
\DoxyCodeLine{00832     assert(!it-\/>second.empty());}
\DoxyCodeLine{00833 }
\DoxyCodeLine{00834     \textcolor{keywordtype}{double} frame = it-\/>first;  \textcolor{comment}{// redundant, already in the key... oh well}}
\DoxyCodeLine{00835     QPointF p(frameToX(frame), groupHandleY);}
\DoxyCodeLine{00836 }
\DoxyCodeLine{00837     Gadget gadget((FunctionPanel::Handle)100, -\/1, p, 6,}
\DoxyCodeLine{00838                   6);  \textcolor{comment}{// No idea what the '100' type value mean...}}
\DoxyCodeLine{00839     gadget.m\_keyframePosition = frame;}
\DoxyCodeLine{00840 }
\DoxyCodeLine{00841     m\_gadgets.push\_back(gadget);}
\DoxyCodeLine{00842 }
\DoxyCodeLine{00843     \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} kf = it-\/>second[0];}
\DoxyCodeLine{00844 }
\DoxyCodeLine{00845     \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{int})it-\/>second.size() < channelCount) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00846 }
\DoxyCodeLine{00847     \textcolor{comment}{// All channels had this keyframe -\/ so, add further gadgets about stuff...}}
\DoxyCodeLine{00848 }
\DoxyCodeLine{00849     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i < channelCount; ++i) \{}
\DoxyCodeLine{00850       \textcolor{comment}{// Find out if keyframes data differs}}
\DoxyCodeLine{00851       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} \&kf2 = it-\/>second[i];}
\DoxyCodeLine{00852 }
\DoxyCodeLine{00853       \textcolor{keywordflow}{if} (kf.m\_type != kf2.m\_type || kf.m\_speedOut.x != kf2.m\_speedOut.x)}
\DoxyCodeLine{00854         kf.m\_type = TDoubleKeyframe::None;}
\DoxyCodeLine{00855       \textcolor{keywordflow}{if} (kf.m\_prevType != kf2.m\_prevType || kf.m\_speedIn.x != kf2.m\_speedIn.x)}
\DoxyCodeLine{00856         kf.m\_prevType = TDoubleKeyframe::None;}
\DoxyCodeLine{00857     \}}
\DoxyCodeLine{00858 }
\DoxyCodeLine{00859     \textcolor{comment}{// NOTE: EaseInOutPercentage are currently NOT SUPPORTED -\/ they would be}}
\DoxyCodeLine{00860     \textcolor{comment}{// harder to code and}}
\DoxyCodeLine{00861     \textcolor{comment}{//       controversial, since the handle position depends on the *segment}}
\DoxyCodeLine{00862     \textcolor{comment}{//       size* too.}}
\DoxyCodeLine{00863     \textcolor{comment}{//       So, keyframe data could be shared, but adjacent segment lengths}}
\DoxyCodeLine{00864     \textcolor{comment}{//       could not...}}
\DoxyCodeLine{00865 }
\DoxyCodeLine{00866     \textcolor{keywordflow}{if} (it != iLast \&\&}
\DoxyCodeLine{00867         (kf.m\_type == TDoubleKeyframe::SpeedInOut ||}
\DoxyCodeLine{00868          kf.m\_type == TDoubleKeyframe::EaseInOut) \&\&}
\DoxyCodeLine{00869         kf.m\_speedOut.x != 0) \{}
\DoxyCodeLine{00870       QPointF p(frameToX(frame + kf.m\_speedOut.x), groupHandleY);}
\DoxyCodeLine{00871       Gadget gadget((FunctionPanel::Handle)101, -\/1, p, 6, 15);  \textcolor{comment}{// type value...}}
\DoxyCodeLine{00872       gadget.m\_keyframePosition = frame;}
\DoxyCodeLine{00873       m\_gadgets.push\_back(gadget);}
\DoxyCodeLine{00874     \}}
\DoxyCodeLine{00875 }
\DoxyCodeLine{00876     \textcolor{keywordflow}{if} ((kf.m\_prevType == TDoubleKeyframe::SpeedInOut ||}
\DoxyCodeLine{00877          kf.m\_prevType == TDoubleKeyframe::EaseInOut) \&\&}
\DoxyCodeLine{00878         kf.m\_speedIn.x != 0) \{}
\DoxyCodeLine{00879       QPointF p(frameToX(frame + kf.m\_speedIn.x), groupHandleY);}
\DoxyCodeLine{00880       Gadget gadget((FunctionPanel::Handle)102, -\/1, p, 6, 15);  \textcolor{comment}{// type value...}}
\DoxyCodeLine{00881       gadget.m\_keyframePosition = frame;}
\DoxyCodeLine{00882       m\_gadgets.push\_back(gadget);}
\DoxyCodeLine{00883     \}}
\DoxyCodeLine{00884   \}}
\DoxyCodeLine{00885 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_abac75a76762ba09229e18955c98bc6c7}\label{class_function_panel_abac75a76762ba09229e18955c98bc6c7}} 
\index{FunctionPanel@{FunctionPanel}!valueToY@{valueToY}}
\index{valueToY@{valueToY}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{valueToY()}{valueToY()}}
{\footnotesize\ttfamily double Function\+Panel\+::value\+ToY (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$}]{curve,  }\item[{double}]{value }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00313                                                                   \{}
\DoxyCodeLine{00314   \textcolor{keyword}{const} \textcolor{keywordtype}{double} bigNumber = 1.0e9;}
\DoxyCodeLine{00315   \mbox{\hyperlink{class_t_measure}{TMeasure}} *m            = curve-\/>getMeasure();}
\DoxyCodeLine{00316   \textcolor{keywordflow}{if} (m) \{}
\DoxyCodeLine{00317     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_unit}{TUnit}} *unit = m-\/>getCurrentUnit();}
\DoxyCodeLine{00318     v                 = unit-\/>convertTo(v);}
\DoxyCodeLine{00319   \}}
\DoxyCodeLine{00320   \textcolor{keywordflow}{return} tcrop(m\_viewTransform.m22() * v + m\_viewTransform.dy(), -\/bigNumber,}
\DoxyCodeLine{00321                bigNumber);}
\DoxyCodeLine{00322 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_aa85c37ba4cbe7e76e7bfcdd53c287c80}\label{class_function_panel_aa85c37ba4cbe7e76e7bfcdd53c287c80}} 
\index{FunctionPanel@{FunctionPanel}!wheelEvent@{wheelEvent}}
\index{wheelEvent@{wheelEvent}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{wheelEvent()}{wheelEvent()}}
{\footnotesize\ttfamily void Function\+Panel\+::wheel\+Event (\begin{DoxyParamCaption}\item[{QWheel\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01447                                              \{}
\DoxyCodeLine{01448   \textcolor{keywordtype}{double} factor = exp(0.002 * (\textcolor{keywordtype}{double})e-\/>delta());}
\DoxyCodeLine{01449   zoom(factor, factor, e-\/>pos());}
\DoxyCodeLine{01450 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_aa5ae36422bacc4f530928ac1ec3bc064}\label{class_function_panel_aa5ae36422bacc4f530928ac1ec3bc064}} 
\index{FunctionPanel@{FunctionPanel}!xToFrame@{xToFrame}}
\index{xToFrame@{xToFrame}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{xToFrame()}{xToFrame()}}
{\footnotesize\ttfamily double Function\+Panel\+::x\+To\+Frame (\begin{DoxyParamCaption}\item[{double}]{x }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00307                                              \{}
\DoxyCodeLine{00308   \textcolor{keywordflow}{return} (x -\/ m\_viewTransform.dx()) / m\_viewTransform.m11();}
\DoxyCodeLine{00309 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_ad2e564ec4fb464b840f110a8a9b5f759}\label{class_function_panel_ad2e564ec4fb464b840f110a8a9b5f759}} 
\index{FunctionPanel@{FunctionPanel}!yToValue@{yToValue}}
\index{yToValue@{yToValue}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{yToValue()}{yToValue()}}
{\footnotesize\ttfamily double Function\+Panel\+::y\+To\+Value (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$}]{curve,  }\item[{double}]{y }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00326                                                                   \{}
\DoxyCodeLine{00327   \textcolor{keywordtype}{double} v    = (y -\/ m\_viewTransform.dy()) / m\_viewTransform.m22();}
\DoxyCodeLine{00328   \mbox{\hyperlink{class_t_measure}{TMeasure}} *m = curve-\/>getMeasure();}
\DoxyCodeLine{00329   \textcolor{keywordflow}{if} (m) \{}
\DoxyCodeLine{00330     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_unit}{TUnit}} *unit = m-\/>getCurrentUnit();}
\DoxyCodeLine{00331     v                 = unit-\/>convertFrom(v);}
\DoxyCodeLine{00332   \}}
\DoxyCodeLine{00333   \textcolor{keywordflow}{return} v;}
\DoxyCodeLine{00334 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_panel_a8db04286bc9c5145bd7b42772005f304}\label{class_function_panel_a8db04286bc9c5145bd7b42772005f304}} 
\index{FunctionPanel@{FunctionPanel}!zoom@{zoom}}
\index{zoom@{zoom}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{zoom()}{zoom()}}
{\footnotesize\ttfamily void Function\+Panel\+::zoom (\begin{DoxyParamCaption}\item[{double}]{sx,  }\item[{double}]{sy,  }\item[{const QPoint \&}]{center }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00347                                                                    \{}
\DoxyCodeLine{00348   QTransform m;}
\DoxyCodeLine{00349   m.translate(center.x(), center.y());}
\DoxyCodeLine{00350   m.scale(sx, sy);}
\DoxyCodeLine{00351   m.translate(-\/center.x(), -\/center.y());}
\DoxyCodeLine{00352   m\_viewTransform *= m;}
\DoxyCodeLine{00353   update();}
\DoxyCodeLine{00354 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_function_panel_aef2a228ff8b6c58dc4b2209e3ea9467d}\label{class_function_panel_aef2a228ff8b6c58dc4b2209e3ea9467d}} 
\index{FunctionPanel@{FunctionPanel}!curve@{curve}}
\index{curve@{curve}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{curve}{curve}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_double_param}{TDouble\+Param}}$\ast$ Function\+Panel\+::curve}

\mbox{\Hypertarget{class_function_panel_aca888e0250f35662889a70d6629fb428}\label{class_function_panel_aca888e0250f35662889a70d6629fb428}} 
\index{FunctionPanel@{FunctionPanel}!curvePos@{curvePos}}
\index{curvePos@{curvePos}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{curvePos}{curvePos}}
{\footnotesize\ttfamily QPoint Function\+Panel\+::curve\+Pos}

\mbox{\Hypertarget{class_function_panel_a4f1747f959c5209ca6455eb85d712d4f}\label{class_function_panel_a4f1747f959c5209ca6455eb85d712d4f}} 
\index{FunctionPanel@{FunctionPanel}!frame@{frame}}
\index{frame@{frame}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{frame}{frame}}
{\footnotesize\ttfamily double Function\+Panel\+::frame}

\mbox{\Hypertarget{class_function_panel_a0c93dbdc314aa5653d8594755531a071}\label{class_function_panel_a0c93dbdc314aa5653d8594755531a071}} 
\index{FunctionPanel@{FunctionPanel}!labelPos@{labelPos}}
\index{labelPos@{labelPos}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{labelPos}{labelPos}}
{\footnotesize\ttfamily QPoint Function\+Panel\+::label\+Pos}

\mbox{\Hypertarget{class_function_panel_ac2bf3cffa7c181743eeb5df4f2b5bbff}\label{class_function_panel_ac2bf3cffa7c181743eeb5df4f2b5bbff}} 
\index{FunctionPanel@{FunctionPanel}!text@{text}}
\index{text@{text}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{text}{text}}
{\footnotesize\ttfamily std\+::string Function\+Panel\+::text}

\mbox{\Hypertarget{class_function_panel_a13f82a6a78956bd0c56b6fe5fe34c8bc}\label{class_function_panel_a13f82a6a78956bd0c56b6fe5fe34c8bc}} 
\index{FunctionPanel@{FunctionPanel}!value@{value}}
\index{value@{value}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{value}{value}}
{\footnotesize\ttfamily double Function\+Panel\+::value}

\mbox{\Hypertarget{class_function_panel_a85ed3a5d14f1f7841a12723ebb9a9ea4}\label{class_function_panel_a85ed3a5d14f1f7841a12723ebb9a9ea4}} 
\index{FunctionPanel@{FunctionPanel}!visible@{visible}}
\index{visible@{visible}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{visible}{visible}}
{\footnotesize\ttfamily bool Function\+Panel\+::visible}



\doxysubsection{Property Documentation}
\mbox{\Hypertarget{class_function_panel_ab35458c7a03235059fe023a097b3aa63}\label{class_function_panel_ab35458c7a03235059fe023a097b3aa63}} 
\index{FunctionPanel@{FunctionPanel}!BGColor@{BGColor}}
\index{BGColor@{BGColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{BGColor}{BGColor}}
{\footnotesize\ttfamily QColor Function\+Panel\+::\+BGColor\hspace{0.3cm}{\ttfamily [read]}, {\ttfamily [write]}}

\mbox{\Hypertarget{class_function_panel_a2e9f95bdea8d70e2922ce4d5a5fdff53}\label{class_function_panel_a2e9f95bdea8d70e2922ce4d5a5fdff53}} 
\index{FunctionPanel@{FunctionPanel}!FrameLineColor@{FrameLineColor}}
\index{FrameLineColor@{FrameLineColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{FrameLineColor}{FrameLineColor}}
{\footnotesize\ttfamily QColor Function\+Panel\+::\+Frame\+Line\+Color\hspace{0.3cm}{\ttfamily [read]}, {\ttfamily [write]}}

\mbox{\Hypertarget{class_function_panel_a07459b6409948b9ddab3554a613b18f1}\label{class_function_panel_a07459b6409948b9ddab3554a613b18f1}} 
\index{FunctionPanel@{FunctionPanel}!OtherCurvesColor@{OtherCurvesColor}}
\index{OtherCurvesColor@{OtherCurvesColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{OtherCurvesColor}{OtherCurvesColor}}
{\footnotesize\ttfamily QColor Function\+Panel\+::\+Other\+Curves\+Color\hspace{0.3cm}{\ttfamily [read]}}

\mbox{\Hypertarget{class_function_panel_a6d25d8fe2504a48cacfa2a3d3da64232}\label{class_function_panel_a6d25d8fe2504a48cacfa2a3d3da64232}} 
\index{FunctionPanel@{FunctionPanel}!RulerBackground@{RulerBackground}}
\index{RulerBackground@{RulerBackground}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{RulerBackground}{RulerBackground}}
{\footnotesize\ttfamily QColor Function\+Panel\+::\+Ruler\+Background\hspace{0.3cm}{\ttfamily [read]}, {\ttfamily [write]}}

\mbox{\Hypertarget{class_function_panel_a2e807e89469675f19f15117d879f6bac}\label{class_function_panel_a2e807e89469675f19f15117d879f6bac}} 
\index{FunctionPanel@{FunctionPanel}!SelectedColor@{SelectedColor}}
\index{SelectedColor@{SelectedColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{SelectedColor}{SelectedColor}}
{\footnotesize\ttfamily QColor Function\+Panel\+::\+Selected\+Color\hspace{0.3cm}{\ttfamily [read]}, {\ttfamily [write]}}

\mbox{\Hypertarget{class_function_panel_ab542ec321e7383d01211491513de80ea}\label{class_function_panel_ab542ec321e7383d01211491513de80ea}} 
\index{FunctionPanel@{FunctionPanel}!SubColor@{SubColor}}
\index{SubColor@{SubColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{SubColor}{SubColor}}
{\footnotesize\ttfamily QColor Function\+Panel\+::\+Sub\+Color\hspace{0.3cm}{\ttfamily [read]}, {\ttfamily [write]}}

\mbox{\Hypertarget{class_function_panel_a6a9f9641759ec59213fa5b5b15de6976}\label{class_function_panel_a6a9f9641759ec59213fa5b5b15de6976}} 
\index{FunctionPanel@{FunctionPanel}!TextColor@{TextColor}}
\index{TextColor@{TextColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{TextColor}{TextColor}}
{\footnotesize\ttfamily QColor Function\+Panel\+::\+Text\+Color\hspace{0.3cm}{\ttfamily [read]}, {\ttfamily [write]}}

\mbox{\Hypertarget{class_function_panel_a58e6a214c20b16b2da20eef8f6c5321a}\label{class_function_panel_a58e6a214c20b16b2da20eef8f6c5321a}} 
\index{FunctionPanel@{FunctionPanel}!ValueLineColor@{ValueLineColor}}
\index{ValueLineColor@{ValueLineColor}!FunctionPanel@{FunctionPanel}}
\doxysubsubsection{\texorpdfstring{ValueLineColor}{ValueLineColor}}
{\footnotesize\ttfamily QColor Function\+Panel\+::\+Value\+Line\+Color\hspace{0.3cm}{\ttfamily [read]}, {\ttfamily [write]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonzqt/functionpanel.\+h\item 
E\+:/opentoonz/toonz/sources/toonzqt/functionpanel.\+cpp\end{DoxyCompactItemize}
