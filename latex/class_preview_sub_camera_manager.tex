\hypertarget{class_preview_sub_camera_manager}{}\doxysection{Preview\+Sub\+Camera\+Manager Class Reference}
\label{class_preview_sub_camera_manager}\index{PreviewSubCameraManager@{PreviewSubCameraManager}}
Inheritance diagram for Preview\+Sub\+Camera\+Manager\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_preview_sub_camera_manager}
\end{center}
\end{figure}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum {\bfseries Edit\+Preview\+Drag} \{ \newline
{\bfseries NODRAG} = 0x0
, {\bfseries OUTER\+\_\+\+LEFT} = 0x1
, {\bfseries INNER\+\_\+\+LEFT} = 0x2
, {\bfseries OUTER\+\_\+\+RIGHT} = 0x4
, \newline
{\bfseries INNER\+\_\+\+RIGHT} = 0x8
, {\bfseries OUTER\+\_\+\+TOP} = 0x10
, {\bfseries INNER\+\_\+\+TOP} = 0x20
, {\bfseries OUTER\+\_\+\+BOTTOM} = 0x40
, \newline
{\bfseries INNER\+\_\+\+BOTTOM} = 0x80
, {\bfseries OUTER} = OUTER\+\_\+\+LEFT $\vert$ OUTER\+\_\+\+RIGHT $\vert$ OUTER\+\_\+\+TOP $\vert$ OUTER\+\_\+\+BOTTOM
, {\bfseries INNER} = INNER\+\_\+\+LEFT $\vert$ INNER\+\_\+\+RIGHT $\vert$ INNER\+\_\+\+TOP $\vert$ INNER\+\_\+\+BOTTOM
, {\bfseries DRAG\+\_\+\+LEFT} = OUTER\+\_\+\+LEFT $\vert$ INNER
, \newline
{\bfseries DRAG\+\_\+\+RIGHT} = OUTER\+\_\+\+RIGHT $\vert$ INNER
, {\bfseries DRAG\+\_\+\+TOP} = OUTER\+\_\+\+TOP $\vert$ INNER
, {\bfseries DRAG\+\_\+\+BOTTOM} = OUTER\+\_\+\+BOTTOM $\vert$ INNER
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
UCHAR \mbox{\hyperlink{class_preview_sub_camera_manager_a7e94f18fa5e0b0818b26630e0cd27513}{get\+Drag\+Type}} () const
\item 
void \mbox{\hyperlink{class_preview_sub_camera_manager_a44d2207c6019337b7dfcb1e873c17bed}{set\+Drag\+Type}} (UCHAR drag\+Type)
\item 
\mbox{\hyperlink{class_t_rect_t}{TRect}} \mbox{\hyperlink{class_preview_sub_camera_manager_a995f3593f3de1f9870dd1049619fee96}{get\+Editing\+Camera\+Interest\+Rect}} () const
\item 
void \mbox{\hyperlink{class_preview_sub_camera_manager_a97b0292b065d25028295087c6d3a5988}{set\+Editing\+Camera\+Interest\+Rect}} (const \mbox{\hyperlink{class_t_rect_t}{TRect}} \&rect)
\item 
\mbox{\hyperlink{class_t_rect_t}{TRectD}} \mbox{\hyperlink{class_preview_sub_camera_manager_a40f46da5447ee020ffb251daabcf0b9e}{get\+Editing\+Camera\+Interest\+Stage\+Rect}} () const
\item 
bool \mbox{\hyperlink{class_preview_sub_camera_manager_ab3c3293dbb3c7fdad3df687a2215b5fc}{mouse\+Press\+Event}} (\mbox{\hyperlink{class_scene_viewer}{Scene\+Viewer}} $\ast$viewer, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&event)
\item 
bool \mbox{\hyperlink{class_preview_sub_camera_manager_ac8b4abdcfdd204a54d9034786494a3e7}{mouse\+Move\+Event}} (\mbox{\hyperlink{class_scene_viewer}{Scene\+Viewer}} $\ast$viewer, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&event)
\item 
bool \mbox{\hyperlink{class_preview_sub_camera_manager_a16c14c4b83ffeb04982190c75dc2a57e}{mouse\+Release\+Event}} (\mbox{\hyperlink{class_scene_viewer}{Scene\+Viewer}} $\ast$viewer)
\item 
void \mbox{\hyperlink{class_preview_sub_camera_manager_a31de45a99c892ac1a693462722a1e489}{delete\+Sub\+Camera}} (\mbox{\hyperlink{class_scene_viewer}{Scene\+Viewer}} $\ast$viewer)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_preview_sub_camera_manager}{Preview\+Sub\+Camera\+Manager}} $\ast$ \mbox{\hyperlink{class_preview_sub_camera_manager_abe4f98466e737bb0e9274114803160d4}{instance}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{class_preview_sub_camera_manager_a5fd6f95b38d912b0dc37f533330f94ef}\label{class_preview_sub_camera_manager_a5fd6f95b38d912b0dc37f533330f94ef}} 
\index{PreviewSubCameraManager@{PreviewSubCameraManager}!EditPreviewDrag@{EditPreviewDrag}}
\index{EditPreviewDrag@{EditPreviewDrag}!PreviewSubCameraManager@{PreviewSubCameraManager}}
\doxysubsubsection{\texorpdfstring{EditPreviewDrag}{EditPreviewDrag}}
{\footnotesize\ttfamily enum Preview\+Sub\+Camera\+Manager\+::\+Edit\+Preview\+Drag}


\begin{DoxyCode}{0}
\DoxyCodeLine{00068                        \{}
\DoxyCodeLine{00069     NODRAG       = 0x0,}
\DoxyCodeLine{00070     OUTER\_LEFT   = 0x1,}
\DoxyCodeLine{00071     INNER\_LEFT   = 0x2,}
\DoxyCodeLine{00072     OUTER\_RIGHT  = 0x4,}
\DoxyCodeLine{00073     INNER\_RIGHT  = 0x8,}
\DoxyCodeLine{00074     OUTER\_TOP    = 0x10,}
\DoxyCodeLine{00075     INNER\_TOP    = 0x20,}
\DoxyCodeLine{00076     OUTER\_BOTTOM = 0x40,}
\DoxyCodeLine{00077     INNER\_BOTTOM = 0x80,}
\DoxyCodeLine{00078     OUTER        = OUTER\_LEFT | OUTER\_RIGHT | OUTER\_TOP | OUTER\_BOTTOM,}
\DoxyCodeLine{00079     INNER        = INNER\_LEFT | INNER\_RIGHT | INNER\_TOP | INNER\_BOTTOM,}
\DoxyCodeLine{00080     DRAG\_LEFT    = OUTER\_LEFT | INNER,}
\DoxyCodeLine{00081     DRAG\_RIGHT   = OUTER\_RIGHT | INNER,}
\DoxyCodeLine{00082     DRAG\_TOP     = OUTER\_TOP | INNER,}
\DoxyCodeLine{00083     DRAG\_BOTTOM  = OUTER\_BOTTOM | INNER}
\DoxyCodeLine{00084   \};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_preview_sub_camera_manager_aa3ba329844429fe642911b56c5f9fa66}\label{class_preview_sub_camera_manager_aa3ba329844429fe642911b56c5f9fa66}} 
\index{PreviewSubCameraManager@{PreviewSubCameraManager}!PreviewSubCameraManager@{PreviewSubCameraManager}}
\index{PreviewSubCameraManager@{PreviewSubCameraManager}!PreviewSubCameraManager@{PreviewSubCameraManager}}
\doxysubsubsection{\texorpdfstring{PreviewSubCameraManager()}{PreviewSubCameraManager()}}
{\footnotesize\ttfamily Preview\+Sub\+Camera\+Manager\+::\+Preview\+Sub\+Camera\+Manager (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00045     : m\_mousePressed(\textcolor{keyword}{false}), m\_dragType(NODRAG), m\_clickAndDrag(\textcolor{keyword}{false}) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_preview_sub_camera_manager_a1da68325ab03a3ad1b825cc9eb8d0661}\label{class_preview_sub_camera_manager_a1da68325ab03a3ad1b825cc9eb8d0661}} 
\index{PreviewSubCameraManager@{PreviewSubCameraManager}!````~PreviewSubCameraManager@{$\sim$PreviewSubCameraManager}}
\index{````~PreviewSubCameraManager@{$\sim$PreviewSubCameraManager}!PreviewSubCameraManager@{PreviewSubCameraManager}}
\doxysubsubsection{\texorpdfstring{$\sim$PreviewSubCameraManager()}{~PreviewSubCameraManager()}}
{\footnotesize\ttfamily Preview\+Sub\+Camera\+Manager\+::$\sim$\+Preview\+Sub\+Camera\+Manager (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00049 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_preview_sub_camera_manager_a31de45a99c892ac1a693462722a1e489}\label{class_preview_sub_camera_manager_a31de45a99c892ac1a693462722a1e489}} 
\index{PreviewSubCameraManager@{PreviewSubCameraManager}!deleteSubCamera@{deleteSubCamera}}
\index{deleteSubCamera@{deleteSubCamera}!PreviewSubCameraManager@{PreviewSubCameraManager}}
\doxysubsubsection{\texorpdfstring{deleteSubCamera()}{deleteSubCamera()}}
{\footnotesize\ttfamily void Preview\+Sub\+Camera\+Manager\+::delete\+Sub\+Camera (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_scene_viewer}{Scene\+Viewer}} $\ast$}]{viewer }\end{DoxyParamCaption})}

Delete sub camera frame. Executed from context menu of the viewer. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00338                                                                  \{}
\DoxyCodeLine{00339   \mbox{\hyperlink{class_t_camera}{TCamera}} *camera =}
\DoxyCodeLine{00340       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}();}
\DoxyCodeLine{00341   camera-\/>\mbox{\hyperlink{class_t_camera_ab287d9cb1403613e76e686dc6e058da5}{setInterestRect}}(\mbox{\hyperlink{class_t_rect_t}{TRect}}());}
\DoxyCodeLine{00342 }
\DoxyCodeLine{00343   \mbox{\hyperlink{class_previewer_a5eb765b66490a3d99d432f90864bfacd}{Previewer::instance}}(\textcolor{keyword}{true})-\/>\mbox{\hyperlink{class_previewer_a071b63f954e891ec7151ee03ad88e5b7}{updateView}}();}
\DoxyCodeLine{00344 }
\DoxyCodeLine{00345   \textcolor{comment}{// Refresh viewer}}
\DoxyCodeLine{00346   viewer-\/>update();}
\DoxyCodeLine{00347 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01472}{Toonz\+Scene\+::get\+Current\+Camera()}}, \mbox{\hyperlink{l00106}{TApp\+::get\+Current\+Scene()}}, \mbox{\hyperlink{l00215}{TApp\+::instance()}}, \mbox{\hyperlink{l01060}{Previewer\+::instance()}}, \mbox{\hyperlink{l00112}{TCamera\+::set\+Interest\+Rect()}}, and \mbox{\hyperlink{l01264}{Previewer\+::update\+View()}}.



Referenced by \mbox{\hyperlink{l03276}{Scene\+Viewer\+::do\+Delete\+Sub\+Camera()}}.

\mbox{\Hypertarget{class_preview_sub_camera_manager_a7e94f18fa5e0b0818b26630e0cd27513}\label{class_preview_sub_camera_manager_a7e94f18fa5e0b0818b26630e0cd27513}} 
\index{PreviewSubCameraManager@{PreviewSubCameraManager}!getDragType@{getDragType}}
\index{getDragType@{getDragType}!PreviewSubCameraManager@{PreviewSubCameraManager}}
\doxysubsubsection{\texorpdfstring{getDragType()}{getDragType()}}
{\footnotesize\ttfamily UCHAR Preview\+Sub\+Camera\+Manager\+::get\+Drag\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00092 \{ \textcolor{keywordflow}{return} m\_dragType; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_preview_sub_camera_manager_a995f3593f3de1f9870dd1049619fee96}\label{class_preview_sub_camera_manager_a995f3593f3de1f9870dd1049619fee96}} 
\index{PreviewSubCameraManager@{PreviewSubCameraManager}!getEditingCameraInterestRect@{getEditingCameraInterestRect}}
\index{getEditingCameraInterestRect@{getEditingCameraInterestRect}!PreviewSubCameraManager@{PreviewSubCameraManager}}
\doxysubsubsection{\texorpdfstring{getEditingCameraInterestRect()}{getEditingCameraInterestRect()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRect}} Preview\+Sub\+Camera\+Manager\+::get\+Editing\+Camera\+Interest\+Rect (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00060                                                                   \{}
\DoxyCodeLine{00061   \textcolor{keywordflow}{if} (m\_mousePressed)}
\DoxyCodeLine{00062     \textcolor{keywordflow}{return} m\_editingInterestRect;}
\DoxyCodeLine{00063   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00064     \textcolor{comment}{// Return the actual current camera's interest rect}}
\DoxyCodeLine{00065     \mbox{\hyperlink{class_t_camera}{TCamera}} *currCamera =}
\DoxyCodeLine{00066         \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}();}
\DoxyCodeLine{00067     \textcolor{keywordflow}{return} currCamera-\/>\mbox{\hyperlink{class_t_camera_ad95e2b9f128939f1ce9777623643c69c}{getInterestRect}}();}
\DoxyCodeLine{00068   \}}
\DoxyCodeLine{00069 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_preview_sub_camera_manager_a40f46da5447ee020ffb251daabcf0b9e}\label{class_preview_sub_camera_manager_a40f46da5447ee020ffb251daabcf0b9e}} 
\index{PreviewSubCameraManager@{PreviewSubCameraManager}!getEditingCameraInterestStageRect@{getEditingCameraInterestStageRect}}
\index{getEditingCameraInterestStageRect@{getEditingCameraInterestStageRect}!PreviewSubCameraManager@{PreviewSubCameraManager}}
\doxysubsubsection{\texorpdfstring{getEditingCameraInterestStageRect()}{getEditingCameraInterestStageRect()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRectD}} Preview\+Sub\+Camera\+Manager\+::get\+Editing\+Camera\+Interest\+Stage\+Rect (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00073                                                                         \{}
\DoxyCodeLine{00074   \mbox{\hyperlink{class_t_camera}{TCamera}} *currCamera =}
\DoxyCodeLine{00075       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}();}
\DoxyCodeLine{00076 }
\DoxyCodeLine{00077   \textcolor{keywordflow}{if} (m\_mousePressed)}
\DoxyCodeLine{00078     \textcolor{comment}{// Build the stage rect associated with m\_editingInterestRect}}
\DoxyCodeLine{00079     \textcolor{keywordflow}{return} currCamera-\/>\mbox{\hyperlink{class_t_camera_a25284951e4cad90fbb424d54abc66a14}{getCameraToStageRef}}() *}
\DoxyCodeLine{00080            \mbox{\hyperlink{class_t_rect_t}{TRectD}}(m\_editingInterestRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, m\_editingInterestRect.y0,}
\DoxyCodeLine{00081                   m\_editingInterestRect.x1 + 1, m\_editingInterestRect.y1 + 1);}
\DoxyCodeLine{00082   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00083     \textcolor{comment}{// Return the actual current camera's stage interest rect}}
\DoxyCodeLine{00084     \textcolor{keywordflow}{return} currCamera-\/>\mbox{\hyperlink{class_t_camera_a4008034b1ffbe06c1aac816c3bfa5144}{getInterestStageRect}}();}
\DoxyCodeLine{00085 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_preview_sub_camera_manager_abe4f98466e737bb0e9274114803160d4}\label{class_preview_sub_camera_manager_abe4f98466e737bb0e9274114803160d4}} 
\index{PreviewSubCameraManager@{PreviewSubCameraManager}!instance@{instance}}
\index{instance@{instance}!PreviewSubCameraManager@{PreviewSubCameraManager}}
\doxysubsubsection{\texorpdfstring{instance()}{instance()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_preview_sub_camera_manager}{Preview\+Sub\+Camera\+Manager}} $\ast$ Preview\+Sub\+Camera\+Manager\+::instance (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00053                                                            \{}
\DoxyCodeLine{00054   \textcolor{keyword}{static} \mbox{\hyperlink{class_preview_sub_camera_manager}{PreviewSubCameraManager}} theInstance;}
\DoxyCodeLine{00055   \textcolor{keywordflow}{return} \&theInstance;}
\DoxyCodeLine{00056 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_preview_sub_camera_manager_ac8b4abdcfdd204a54d9034786494a3e7}\label{class_preview_sub_camera_manager_ac8b4abdcfdd204a54d9034786494a3e7}} 
\index{PreviewSubCameraManager@{PreviewSubCameraManager}!mouseMoveEvent@{mouseMoveEvent}}
\index{mouseMoveEvent@{mouseMoveEvent}!PreviewSubCameraManager@{PreviewSubCameraManager}}
\doxysubsubsection{\texorpdfstring{mouseMoveEvent()}{mouseMoveEvent()}}
{\footnotesize\ttfamily bool Preview\+Sub\+Camera\+Manager\+::mouse\+Move\+Event (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_scene_viewer}{Scene\+Viewer}} $\ast$}]{viewer,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{event }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00134                                                                        \{}
\DoxyCodeLine{00135   \textcolor{keywordflow}{if} (viewer-\/>is3DView()) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00136   QPointF curPos(event.mousePos() * getDevPixRatio());}
\DoxyCodeLine{00137   \textcolor{keywordflow}{if} (event.buttons() == Qt::LeftButton) \{}
\DoxyCodeLine{00138     \textcolor{keywordflow}{if} (!bitwiseContains(m\_dragType, INNER)) \{}
\DoxyCodeLine{00139       \textcolor{keywordflow}{if} (std::abs(curPos.x() -\/ m\_mousePressPos.x()) > 10 ||}
\DoxyCodeLine{00140           std::abs(curPos.y() -\/ m\_mousePressPos.y()) > 10)}
\DoxyCodeLine{00141         m\_clickAndDrag = \textcolor{keyword}{true};}
\DoxyCodeLine{00142     \}}
\DoxyCodeLine{00143 }
\DoxyCodeLine{00144     \textcolor{keywordflow}{if} (m\_clickAndDrag == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{00145       \textcolor{comment}{// Write the temporary preview subcamera to current camera}}
\DoxyCodeLine{00146       \mbox{\hyperlink{class_t_point_t}{TPointD}} worldMousePressPos(viewer-\/>winToWorld(m\_mousePressPos));}
\DoxyCodeLine{00147       \mbox{\hyperlink{class_t_point_t}{TPointD}} worldCurPos(viewer-\/>winToWorld(curPos));}
\DoxyCodeLine{00148 }
\DoxyCodeLine{00149       \mbox{\hyperlink{class_t_app}{TApp}} *app = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}();}
\DoxyCodeLine{00150       \mbox{\hyperlink{class_t_affine}{TAffine}} cameraAffInv(}
\DoxyCodeLine{00151           app-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()}
\DoxyCodeLine{00152               -\/>getXsheet()}
\DoxyCodeLine{00153               -\/>\mbox{\hyperlink{class_t_xsheet_ac08197d98e00154a4a974d5b6a5e04d7}{getCameraAff}}(app-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}()-\/>getFrame())}
\DoxyCodeLine{00154               .\mbox{\hyperlink{class_t_affine_a570529b96b1ec5abc711aaa9aac09ff9}{inv}}());}
\DoxyCodeLine{00155 }
\DoxyCodeLine{00156       worldMousePressPos = cameraAffInv * worldMousePressPos;}
\DoxyCodeLine{00157       worldCurPos        = cameraAffInv * worldCurPos;}
\DoxyCodeLine{00158 }
\DoxyCodeLine{00159       \mbox{\hyperlink{class_t_rect_t}{TRectD}} worldPreviewSubCameraRect(}
\DoxyCodeLine{00160           std::min(worldMousePressPos.x, worldCurPos.x),}
\DoxyCodeLine{00161           std::min(worldMousePressPos.y, worldCurPos.y),}
\DoxyCodeLine{00162           std::max(worldMousePressPos.x, worldCurPos.x),}
\DoxyCodeLine{00163           std::max(worldMousePressPos.y, worldCurPos.y));}
\DoxyCodeLine{00164 }
\DoxyCodeLine{00165       \mbox{\hyperlink{class_t_camera}{TCamera}} *camera = app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}();}
\DoxyCodeLine{00166       \textcolor{comment}{// camera-\/>setInterestStageRect(worldPreviewSubCameraRect);}}
\DoxyCodeLine{00167 }
\DoxyCodeLine{00168       \mbox{\hyperlink{class_t_rect_t}{TRectD}} previewSubCameraD(camera-\/>\mbox{\hyperlink{class_t_camera_a5e5a9face430bcd2e5fac5da693a479d}{getStageToCameraRef}}() *}
\DoxyCodeLine{00169                                worldPreviewSubCameraRect);}
\DoxyCodeLine{00170       m\_editingInterestRect =}
\DoxyCodeLine{00171           \mbox{\hyperlink{class_t_rect_t}{TRect}}(previewSubCameraD.x0, previewSubCameraD.y0,}
\DoxyCodeLine{00172                 previewSubCameraD.x1 -\/ 1, previewSubCameraD.y1 -\/ 1) *}
\DoxyCodeLine{00173           \mbox{\hyperlink{class_t_rect_t}{TRect}}(camera-\/>\mbox{\hyperlink{class_t_camera_a9a7c573e7a2c397ffae4b747809ea2a5}{getRes}}());}
\DoxyCodeLine{00174 }
\DoxyCodeLine{00175       viewer-\/>update();}
\DoxyCodeLine{00176     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00177       \mbox{\hyperlink{class_t_point_t}{TPoint}} dragDistance = getSubCameraDragDistance(viewer, curPos);}
\DoxyCodeLine{00178 }
\DoxyCodeLine{00179       \textcolor{comment}{// Adjust the camera subrect}}
\DoxyCodeLine{00180       \mbox{\hyperlink{class_t_camera}{TCamera}} *camera =}
\DoxyCodeLine{00181           \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}();}
\DoxyCodeLine{00182       \mbox{\hyperlink{class_t_rect_t}{TRect}} subRect(camera-\/>\mbox{\hyperlink{class_t_camera_ad95e2b9f128939f1ce9777623643c69c}{getInterestRect}}());}
\DoxyCodeLine{00183 }
\DoxyCodeLine{00184       \textcolor{keywordflow}{if} (bitwiseExclude(m\_dragType, OUTER))}
\DoxyCodeLine{00185         subRect += dragDistance;}
\DoxyCodeLine{00186       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00187         \textcolor{keywordflow}{if} (bitwiseContains(m\_dragType, DRAG\_LEFT))}
\DoxyCodeLine{00188           subRect.x0 = subRect.x0 + dragDistance.x;}
\DoxyCodeLine{00189         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (bitwiseContains(m\_dragType, DRAG\_RIGHT))}
\DoxyCodeLine{00190           subRect.x1 = subRect.x1 + dragDistance.x;}
\DoxyCodeLine{00191         \textcolor{keywordflow}{if} (bitwiseContains(m\_dragType, DRAG\_BOTTOM))}
\DoxyCodeLine{00192           subRect.y0 = subRect.y0 + dragDistance.y;}
\DoxyCodeLine{00193         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (bitwiseContains(m\_dragType, DRAG\_TOP))}
\DoxyCodeLine{00194           subRect.y1 = subRect.y1 + dragDistance.y;}
\DoxyCodeLine{00195       \}}
\DoxyCodeLine{00196 }
\DoxyCodeLine{00197       m\_editingInterestRect = subRect * \mbox{\hyperlink{class_t_rect_t}{TRect}}(camera-\/>\mbox{\hyperlink{class_t_camera_a9a7c573e7a2c397ffae4b747809ea2a5}{getRes}}());}
\DoxyCodeLine{00198 }
\DoxyCodeLine{00199       viewer-\/>update();}
\DoxyCodeLine{00200     \}}
\DoxyCodeLine{00201   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00202     UCHAR dragEnum = getSubCameraDragEnum(viewer, curPos);}
\DoxyCodeLine{00203 }
\DoxyCodeLine{00204     \textcolor{keywordflow}{if} (dragEnum == NODRAG)}
\DoxyCodeLine{00205       viewer-\/>setCursor(Qt::ArrowCursor);}
\DoxyCodeLine{00206     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (bitwiseExclude(dragEnum, OUTER))}
\DoxyCodeLine{00207       viewer-\/>setCursor(Qt::SizeAllCursor);}
\DoxyCodeLine{00208     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00209       \textcolor{keywordflow}{switch} (dragEnum) \{}
\DoxyCodeLine{00210       \textcolor{keywordflow}{case} DRAG\_LEFT:}
\DoxyCodeLine{00211       \textcolor{keywordflow}{case} DRAG\_RIGHT:}
\DoxyCodeLine{00212         viewer-\/>setCursor(Qt::SizeHorCursor);}
\DoxyCodeLine{00213         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00214       \textcolor{keywordflow}{case} DRAG\_TOP:}
\DoxyCodeLine{00215       \textcolor{keywordflow}{case} DRAG\_BOTTOM:}
\DoxyCodeLine{00216         viewer-\/>setCursor(Qt::SizeVerCursor);}
\DoxyCodeLine{00217         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00218       \textcolor{keywordflow}{case} DRAG\_LEFT | DRAG\_TOP:}
\DoxyCodeLine{00219       \textcolor{keywordflow}{case} DRAG\_RIGHT | DRAG\_BOTTOM:}
\DoxyCodeLine{00220         viewer-\/>setCursor(Qt::SizeFDiagCursor);}
\DoxyCodeLine{00221         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00222       \textcolor{keywordflow}{case} DRAG\_LEFT | DRAG\_BOTTOM:}
\DoxyCodeLine{00223       \textcolor{keywordflow}{case} DRAG\_RIGHT | DRAG\_TOP:}
\DoxyCodeLine{00224         viewer-\/>setCursor(Qt::SizeBDiagCursor);}
\DoxyCodeLine{00225         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00226       \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00227         viewer-\/>setCursor(Qt::ArrowCursor);}
\DoxyCodeLine{00228         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00229       \}}
\DoxyCodeLine{00230   \}}
\DoxyCodeLine{00231 }
\DoxyCodeLine{00232   \textcolor{comment}{// In case, perform the pan}}
\DoxyCodeLine{00233   \textcolor{keywordflow}{return} \textcolor{keyword}{event}.buttons() == Qt::MidButton;}
\DoxyCodeLine{00234 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_preview_sub_camera_manager_ab3c3293dbb3c7fdad3df687a2215b5fc}\label{class_preview_sub_camera_manager_ab3c3293dbb3c7fdad3df687a2215b5fc}} 
\index{PreviewSubCameraManager@{PreviewSubCameraManager}!mousePressEvent@{mousePressEvent}}
\index{mousePressEvent@{mousePressEvent}!PreviewSubCameraManager@{PreviewSubCameraManager}}
\doxysubsubsection{\texorpdfstring{mousePressEvent()}{mousePressEvent()}}
{\footnotesize\ttfamily bool Preview\+Sub\+Camera\+Manager\+::mouse\+Press\+Event (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_scene_viewer}{Scene\+Viewer}} $\ast$}]{viewer,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{event }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00118                                                                         \{}
\DoxyCodeLine{00119   \textcolor{keywordflow}{if} (viewer-\/>is3DView()) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00120 }
\DoxyCodeLine{00121   m\_mousePressed  = \textcolor{keyword}{true};}
\DoxyCodeLine{00122   m\_mousePressPos = \textcolor{keyword}{event}.mousePos() * getDevPixRatio();}
\DoxyCodeLine{00123   m\_dragType      = getSubCameraDragEnum(viewer, m\_mousePressPos);}
\DoxyCodeLine{00124 }
\DoxyCodeLine{00125   \textcolor{keywordflow}{if} (bitwiseExclude(m\_dragType, OUTER))}
\DoxyCodeLine{00126     m\_cameraMousePressPos = winToCamera(viewer, m\_mousePressPos);}
\DoxyCodeLine{00127 }
\DoxyCodeLine{00128   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00129 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_preview_sub_camera_manager_a16c14c4b83ffeb04982190c75dc2a57e}\label{class_preview_sub_camera_manager_a16c14c4b83ffeb04982190c75dc2a57e}} 
\index{PreviewSubCameraManager@{PreviewSubCameraManager}!mouseReleaseEvent@{mouseReleaseEvent}}
\index{mouseReleaseEvent@{mouseReleaseEvent}!PreviewSubCameraManager@{PreviewSubCameraManager}}
\doxysubsubsection{\texorpdfstring{mouseReleaseEvent()}{mouseReleaseEvent()}}
{\footnotesize\ttfamily bool Preview\+Sub\+Camera\+Manager\+::mouse\+Release\+Event (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_scene_viewer}{Scene\+Viewer}} $\ast$}]{viewer }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00238                                                                    \{}
\DoxyCodeLine{00239   \textcolor{keywordflow}{if} (viewer-\/>is3DView()) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00240 }
\DoxyCodeLine{00241   m\_mousePressed = \textcolor{keyword}{false};}
\DoxyCodeLine{00242   m\_dragType     = NODRAG;}
\DoxyCodeLine{00243   m\_clickAndDrag = \textcolor{keyword}{false};}
\DoxyCodeLine{00244 }
\DoxyCodeLine{00245   \mbox{\hyperlink{class_t_camera}{TCamera}} *camera =}
\DoxyCodeLine{00246       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}();}
\DoxyCodeLine{00247   camera-\/>\mbox{\hyperlink{class_t_camera_ab287d9cb1403613e76e686dc6e058da5}{setInterestRect}}(m\_editingInterestRect);}
\DoxyCodeLine{00248 }
\DoxyCodeLine{00249   \textcolor{comment}{// Request a previewer update. Observe that whereas this previewer may not be}}
\DoxyCodeLine{00250   \textcolor{comment}{// in preview mode,}}
\DoxyCodeLine{00251   \textcolor{comment}{// another visible one may.}}
\DoxyCodeLine{00252   \mbox{\hyperlink{class_previewer_a5eb765b66490a3d99d432f90864bfacd}{Previewer::instance}}(\textcolor{keyword}{true})-\/>\mbox{\hyperlink{class_previewer_a071b63f954e891ec7151ee03ad88e5b7}{updateView}}();}
\DoxyCodeLine{00253 }
\DoxyCodeLine{00254   \textcolor{comment}{// Refresh viewer}}
\DoxyCodeLine{00255   viewer-\/>update();}
\DoxyCodeLine{00256 }
\DoxyCodeLine{00257   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00258 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_preview_sub_camera_manager_a44d2207c6019337b7dfcb1e873c17bed}\label{class_preview_sub_camera_manager_a44d2207c6019337b7dfcb1e873c17bed}} 
\index{PreviewSubCameraManager@{PreviewSubCameraManager}!setDragType@{setDragType}}
\index{setDragType@{setDragType}!PreviewSubCameraManager@{PreviewSubCameraManager}}
\doxysubsubsection{\texorpdfstring{setDragType()}{setDragType()}}
{\footnotesize\ttfamily void Preview\+Sub\+Camera\+Manager\+::set\+Drag\+Type (\begin{DoxyParamCaption}\item[{UCHAR}]{drag\+Type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00093 \{ m\_dragType = dragType; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_preview_sub_camera_manager_a97b0292b065d25028295087c6d3a5988}\label{class_preview_sub_camera_manager_a97b0292b065d25028295087c6d3a5988}} 
\index{PreviewSubCameraManager@{PreviewSubCameraManager}!setEditingCameraInterestRect@{setEditingCameraInterestRect}}
\index{setEditingCameraInterestRect@{setEditingCameraInterestRect}!PreviewSubCameraManager@{PreviewSubCameraManager}}
\doxysubsubsection{\texorpdfstring{setEditingCameraInterestRect()}{setEditingCameraInterestRect()}}
{\footnotesize\ttfamily void Preview\+Sub\+Camera\+Manager\+::set\+Editing\+Camera\+Interest\+Rect (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRect}} \&}]{rect }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00096                                                        \{}
\DoxyCodeLine{00097     m\_editingInterestRect = rect;}
\DoxyCodeLine{00098   \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/subcameramanager.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/subcameramanager.\+cpp\end{DoxyCompactItemize}
