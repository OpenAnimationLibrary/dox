\hypertarget{class_convert_popup}{}\doxysection{Convert\+Popup Class Reference}
\label{class_convert_popup}\index{ConvertPopup@{ConvertPopup}}


Window class used in the conversion of levels between different file formats.  




{\ttfamily \#include $<$convertpopup.\+h$>$}

Inheritance diagram for Convert\+Popup\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4.000000cm]{class_convert_popup}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_convert_popup_1_1_converter}{Converter}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_convert_popup_aa1c4f08f7408eef0a9a33537dd77c7ee}{apply}} ()
\begin{DoxyCompactList}\small\item\em Starts the conversion. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_convert_popup_a492fc4c44ab6fb231e69e24cc2162ea8}{on\+Options\+Clicked}} ()
\item 
void \mbox{\hyperlink{class_convert_popup_a619efdd010d0bcb8933123ff2a6b6546}{on\+Convert\+Finished}} ()
\item 
void \mbox{\hyperlink{class_convert_popup_a1d4f7a15f4775d5f11a77c08971808d6}{on\+Tlv\+Mode\+Selected}} (const QString \&tlv\+Mode)
\item 
void \mbox{\hyperlink{class_convert_popup_acb18c2f1424c9eb7f5a02cc910455c0c}{on\+Format\+Selected}} (const QString \&format)
\item 
void \mbox{\hyperlink{class_convert_popup_a9892d023bdc607ca5157c21999e6f8e3}{on\+Antialias\+Selected}} (int index)
\item 
void \mbox{\hyperlink{class_convert_popup_ac11436a2934d1ad6553d66b1ff7950bf}{on\+File\+In\+Changed}} ()
\item 
void \mbox{\hyperlink{class_convert_popup_a7627cbe700cd1da8d085a070198ded7c}{on\+Range\+Changed}} ()
\item 
void \mbox{\hyperlink{class_convert_popup_ac444fb5ad343f30266412a87679e1c16}{on\+Level\+Converted}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&full\+Path)
\item 
void \mbox{\hyperlink{class_convert_popup_a5a85622ce987e596ef6e6b26d55c90b5}{on\+Format\+Changed}} (const QString \&)
\item 
void \mbox{\hyperlink{class_convert_popup_a9e4435372638ceab30c5edda3fb83933}{on\+Palette\+Path\+Changed}} ()
\item 
void \mbox{\hyperlink{class_convert_popup_a34d7c17ad5515ec801ae13c14ce5f054}{on\+Dpi\+Mode\+Selected}} (int index)
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_convert_popup_a9c7c0b7dec218c8e8c5e468961bf6bcc}{Convert\+Popup}} (bool specify\+Input=false)
\item 
void \mbox{\hyperlink{class_convert_popup_af10d28c6771ac44fe49922168180e8ae}{set\+Files}} (const std\+::vector$<$ \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} $>$ \&fps)
\item 
bool \mbox{\hyperlink{class_convert_popup_a1187496e7583ea2f72f020d298c9f047}{is\+Converting}} () const
\item 
void \mbox{\hyperlink{class_convert_popup_ab1e4d49e031fc88312a1849610e34d03}{convert\+To\+Tlv}} (bool to\+Painted)
\item 
QString \mbox{\hyperlink{class_convert_popup_a3a3ae97fe7a58dcd9aa3bb532bc38d55}{get\+Destination\+Type}} () const
\item 
QString \mbox{\hyperlink{class_convert_popup_a9fda3882ca991a0a37c49a756ebe5c75}{get\+Tlv\+Mode}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
QString \mbox{\hyperlink{class_convert_popup_ad94c3052883dee2524d95165a3d20ca1}{Tlv\+Mode\+\_\+\+Unpainted}}
\item 
QString \mbox{\hyperlink{class_convert_popup_af48542caa1dcd3976e917e052aa8aff3}{Tlv\+Mode\+\_\+\+Unpainted\+From\+Non\+AA}}
\item 
QString \mbox{\hyperlink{class_convert_popup_a8453bb7c140de3fb070d1ddb9896b9b3}{Tlv\+Mode\+\_\+\+Painted\+From\+Two\+Images}}
\item 
QString \mbox{\hyperlink{class_convert_popup_a20e0983540e416354027f0491a510583}{Tlv\+Mode\+\_\+\+Painted\+From\+Non\+AA}}
\item 
QString \mbox{\hyperlink{class_convert_popup_a24a4ce3faafd473cf1089ebb209e669d}{Same\+As\+Painted}}
\item 
QString \mbox{\hyperlink{class_convert_popup_af95005153598191e07d7ca6befdf7763}{Create\+New\+Palette}}
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_convert2_tlv}{Convert2\+Tlv}} $\ast$ \mbox{\hyperlink{class_convert_popup_ace690d587a5826344c82a220a5284359}{make\+Tlv\+Converter}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&source\+File\+Path)
\item 
bool \mbox{\hyperlink{class_convert_popup_a53a383a67154cbb3e94f6a6c6b880fed}{check\+Parameters}} () const
\item 
\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$ \mbox{\hyperlink{class_convert_popup_ac70093069c14493bbda1c8f181d15fb1}{read\+User\+Provided\+Palette}} () const
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_convert_popup_a2b871e5cea156ff3c07248bd68b3c3cf}{get\+Destination\+File\+Path}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&source\+File\+Path)
\item 
void \mbox{\hyperlink{class_convert_popup_a89e0b3ac85f050dea9f75c4a4d886b7b}{get\+Frame\+Range}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&source\+File\+Path, \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&from, \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&to)
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
Window class used in the conversion of levels between different file formats. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_convert_popup_a9c7c0b7dec218c8e8c5e468961bf6bcc}\label{class_convert_popup_a9c7c0b7dec218c8e8c5e468961bf6bcc}} 
\index{ConvertPopup@{ConvertPopup}!ConvertPopup@{ConvertPopup}}
\index{ConvertPopup@{ConvertPopup}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{ConvertPopup()}{ConvertPopup()}}
{\footnotesize\ttfamily Convert\+Popup\+::\+Convert\+Popup (\begin{DoxyParamCaption}\item[{bool}]{specify\+Input = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00328     : Dialog(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getMainWindow(), \textcolor{keyword}{true}, \textcolor{keyword}{false}, \textcolor{stringliteral}{"{}Convert"{}})}
\DoxyCodeLine{00329     , m\_converter(0)}
\DoxyCodeLine{00330     , m\_isConverting(\textcolor{keyword}{false}) \{}
\DoxyCodeLine{00331   \textcolor{comment}{// Su MAC i dialog modali non hanno bottoni di chiusura nella titleBar}}
\DoxyCodeLine{00332   setModal(\textcolor{keyword}{false});}
\DoxyCodeLine{00333   TlvMode\_Unpainted            = tr(\textcolor{stringliteral}{"{}Unpainted tlv"{}});}
\DoxyCodeLine{00334   TlvMode\_UnpaintedFromNonAA   = tr(\textcolor{stringliteral}{"{}Unpainted tlv from non AA source"{}});}
\DoxyCodeLine{00335   TlvMode\_PaintedFromTwoImages = tr(\textcolor{stringliteral}{"{}Painted tlv from two images"{}});}
\DoxyCodeLine{00336   TlvMode\_PaintedFromNonAA     = tr(\textcolor{stringliteral}{"{}Painted tlv from non AA source"{}});}
\DoxyCodeLine{00337 }
\DoxyCodeLine{00338   SameAsPainted    = tr(\textcolor{stringliteral}{"{}Same as Painted"{}});}
\DoxyCodeLine{00339   CreateNewPalette = tr(\textcolor{stringliteral}{"{}Create new palette"{}});}
\DoxyCodeLine{00340 }
\DoxyCodeLine{00341   m\_fromFld       = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit}{DVGui::IntLineEdit}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00342   m\_toFld         = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit}{DVGui::IntLineEdit}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00343   m\_saveInFileFld = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_file_field}{DVGui::FileField}}(0, QString(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00344   m\_fileNameFld   = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_line_edit}{DVGui::LineEdit}}(QString(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00345   m\_fileFormat    = \textcolor{keyword}{new} QComboBox();}
\DoxyCodeLine{00346   m\_formatOptions = \textcolor{keyword}{new} QPushButton(tr(\textcolor{stringliteral}{"{}Options"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00347   m\_bgColorField =}
\DoxyCodeLine{00348       \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_color_field}{DVGui::ColorField}}(\textcolor{keyword}{this}, \textcolor{keyword}{true}, TPixel32::Transparent, 35, \textcolor{keyword}{false});}
\DoxyCodeLine{00349 }
\DoxyCodeLine{00350   m\_okBtn     = \textcolor{keyword}{new} QPushButton(tr(\textcolor{stringliteral}{"{}Convert"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00351   m\_cancelBtn = \textcolor{keyword}{new} QPushButton(tr(\textcolor{stringliteral}{"{}Cancel"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00352 }
\DoxyCodeLine{00353   m\_bgColorLabel = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Bg Color:"{}}));}
\DoxyCodeLine{00354   m\_tlvFrame     = createTlvSettings();}
\DoxyCodeLine{00355   m\_notifier     = \textcolor{keyword}{new} \mbox{\hyperlink{class_image_utils_1_1_frame_task_notifier}{ImageUtils::FrameTaskNotifier}}();}
\DoxyCodeLine{00356 }
\DoxyCodeLine{00357   m\_progressDialog = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_progress_dialog}{DVGui::ProgressDialog}}(\textcolor{stringliteral}{"{}"{}}, tr(\textcolor{stringliteral}{"{}Cancel"{}}), 0, 0);}
\DoxyCodeLine{00358   m\_skip           = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_check_box}{DVGui::CheckBox}}(tr(\textcolor{stringliteral}{"{}Skip Existing Files"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00359 }
\DoxyCodeLine{00360   m\_removeDotBeforeFrameNumber =}
\DoxyCodeLine{00361       \textcolor{keyword}{new} QCheckBox(tr(\textcolor{stringliteral}{"{}Remove dot before frame number"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00362 }
\DoxyCodeLine{00363   \textcolor{keywordflow}{if} (specifyInput)}
\DoxyCodeLine{00364     m\_convertFileFld = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_file_field}{DVGui::FileField}}(0, QString(\textcolor{stringliteral}{"{}"{}}), \textcolor{keyword}{true});}
\DoxyCodeLine{00365   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00366     m\_convertFileFld = 0;}
\DoxyCodeLine{00367 }
\DoxyCodeLine{00368   \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00369   \textcolor{comment}{// File Format}}
\DoxyCodeLine{00370   QStringList formats;}
\DoxyCodeLine{00371   TImageWriter::getSupportedFormats(formats, \textcolor{keyword}{true});}
\DoxyCodeLine{00372   TLevelWriter::getSupportedFormats(formats, \textcolor{keyword}{true});}
\DoxyCodeLine{00373   Tiio::Writer::getSupportedFormats(formats, \textcolor{keyword}{true});}
\DoxyCodeLine{00374   m\_fileFormat-\/>addItems(formats);}
\DoxyCodeLine{00375   m\_fileFormat-\/>setMaxVisibleItems(15);}
\DoxyCodeLine{00376   m\_skip-\/>setChecked(\textcolor{keyword}{true});}
\DoxyCodeLine{00377   m\_okBtn-\/>setDefault(\textcolor{keyword}{true});}
\DoxyCodeLine{00378   \textcolor{keywordflow}{if} (specifyInput) \{}
\DoxyCodeLine{00379     m\_convertFileFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_file_field_aa7a756fa242d0b6dbcf80994ee59c79e}{setFileMode}}(QFileDialog::ExistingFile);}
\DoxyCodeLine{00380     QStringList filter;}
\DoxyCodeLine{00381     filter << \textcolor{stringliteral}{"{}tif"{}}}
\DoxyCodeLine{00382            << \textcolor{stringliteral}{"{}tiff"{}}}
\DoxyCodeLine{00383            << \textcolor{stringliteral}{"{}png"{}}}
\DoxyCodeLine{00384            << \textcolor{stringliteral}{"{}tga"{}}}
\DoxyCodeLine{00385            << \textcolor{stringliteral}{"{}tlv"{}}}
\DoxyCodeLine{00386            << \textcolor{stringliteral}{"{}gif"{}}}
\DoxyCodeLine{00387            << \textcolor{stringliteral}{"{}bmp"{}}}
\DoxyCodeLine{00388            << \textcolor{stringliteral}{"{}avi"{}}}
\DoxyCodeLine{00389            << \textcolor{stringliteral}{"{}mov"{}}}
\DoxyCodeLine{00390            << \textcolor{stringliteral}{"{}jpg"{}}}
\DoxyCodeLine{00391            << \textcolor{stringliteral}{"{}pic"{}}}
\DoxyCodeLine{00392            << \textcolor{stringliteral}{"{}pict"{}}}
\DoxyCodeLine{00393            << \textcolor{stringliteral}{"{}rgb"{}}}
\DoxyCodeLine{00394            << \textcolor{stringliteral}{"{}sgi"{}}}
\DoxyCodeLine{00395            << \textcolor{stringliteral}{"{}png"{}};}
\DoxyCodeLine{00396     m\_convertFileFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_file_field_aad79aa2cfdb79a5e1a1753f3fefb7957}{setFilters}}(filter);}
\DoxyCodeLine{00397     m\_okBtn-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{00398   \}}
\DoxyCodeLine{00399 }
\DoxyCodeLine{00400   m\_removeDotBeforeFrameNumber-\/>setChecked(\textcolor{keyword}{false});}
\DoxyCodeLine{00401 }
\DoxyCodeLine{00402   m\_progressDialog-\/>setWindowTitle(tr(\textcolor{stringliteral}{"{}Convert... "{}}));}
\DoxyCodeLine{00403   m\_progressDialog-\/>setWindowFlags(}
\DoxyCodeLine{00404       Qt::Dialog | Qt::WindowTitleHint);  \textcolor{comment}{// Don't show ? and X buttons}}
\DoxyCodeLine{00405   m\_progressDialog-\/>setWindowModality(Qt::WindowModal);}
\DoxyCodeLine{00406 }
\DoxyCodeLine{00407   \textcolor{comment}{//-\/-\/-\/-\/layout}}
\DoxyCodeLine{00408   m\_topLayout-\/>setMargin(5);}
\DoxyCodeLine{00409   m\_topLayout-\/>setSpacing(5);}
\DoxyCodeLine{00410   \{}
\DoxyCodeLine{00411     QGridLayout *upperLay = \textcolor{keyword}{new} QGridLayout();}
\DoxyCodeLine{00412     upperLay-\/>setMargin(0);}
\DoxyCodeLine{00413     upperLay-\/>setSpacing(5);}
\DoxyCodeLine{00414     \{}
\DoxyCodeLine{00415       \textcolor{keywordtype}{int} row = 0;}
\DoxyCodeLine{00416       \textcolor{keywordflow}{if} (specifyInput) \{}
\DoxyCodeLine{00417         upperLay-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}File to convert:"{}}), \textcolor{keyword}{this}), row, 0);}
\DoxyCodeLine{00418         upperLay-\/>addWidget(m\_convertFileFld, row, 1, 1, 4);}
\DoxyCodeLine{00419         row++;}
\DoxyCodeLine{00420       \}}
\DoxyCodeLine{00421 }
\DoxyCodeLine{00422       upperLay-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Start:"{}}), \textcolor{keyword}{this}), row, 0);}
\DoxyCodeLine{00423       upperLay-\/>addWidget(m\_fromFld, row, 1);}
\DoxyCodeLine{00424       upperLay-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}  End:"{}}), \textcolor{keyword}{this}), row, 2);}
\DoxyCodeLine{00425       upperLay-\/>addWidget(m\_toFld, row, 3);}
\DoxyCodeLine{00426       row++;}
\DoxyCodeLine{00427 }
\DoxyCodeLine{00428       upperLay-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Save in:"{}}), \textcolor{keyword}{this}), row, 0);}
\DoxyCodeLine{00429       upperLay-\/>addWidget(m\_saveInFileFld, row, 1, 1, 4);}
\DoxyCodeLine{00430       row++;}
\DoxyCodeLine{00431 }
\DoxyCodeLine{00432       upperLay-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}File Name:"{}}), \textcolor{keyword}{this}), row, 0);}
\DoxyCodeLine{00433       upperLay-\/>addWidget(m\_fileNameFld, row, 1, 1, 4);}
\DoxyCodeLine{00434       ;}
\DoxyCodeLine{00435       row++;}
\DoxyCodeLine{00436 }
\DoxyCodeLine{00437       upperLay-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}File Format:"{}}), \textcolor{keyword}{this}), row, 0);}
\DoxyCodeLine{00438       upperLay-\/>addWidget(m\_fileFormat, row, 1, 1, 2);}
\DoxyCodeLine{00439       upperLay-\/>addWidget(m\_formatOptions, row, 3);}
\DoxyCodeLine{00440       ;}
\DoxyCodeLine{00441       row++;}
\DoxyCodeLine{00442 }
\DoxyCodeLine{00443       upperLay-\/>addWidget(m\_bgColorLabel, row, 0);}
\DoxyCodeLine{00444       upperLay-\/>addWidget(m\_bgColorField, row, 1, 1, 4);}
\DoxyCodeLine{00445       ;}
\DoxyCodeLine{00446       row++;}
\DoxyCodeLine{00447 }
\DoxyCodeLine{00448       upperLay-\/>addWidget(m\_skip, row, 1, 1, 4);}
\DoxyCodeLine{00449       ;}
\DoxyCodeLine{00450       row++;}
\DoxyCodeLine{00451 }
\DoxyCodeLine{00452       upperLay-\/>addWidget(m\_removeDotBeforeFrameNumber, row, 1, 1, 4);}
\DoxyCodeLine{00453     \}}
\DoxyCodeLine{00454     upperLay-\/>setColumnStretch(0, 0);}
\DoxyCodeLine{00455     upperLay-\/>setColumnStretch(1, 1);}
\DoxyCodeLine{00456     upperLay-\/>setColumnStretch(2, 0);}
\DoxyCodeLine{00457     upperLay-\/>setColumnStretch(3, 1);}
\DoxyCodeLine{00458     upperLay-\/>setColumnStretch(4, 1);}
\DoxyCodeLine{00459     m\_topLayout-\/>addLayout(upperLay);}
\DoxyCodeLine{00460 }
\DoxyCodeLine{00461     m\_topLayout-\/>addWidget(m\_tlvFrame);}
\DoxyCodeLine{00462   \}}
\DoxyCodeLine{00463 }
\DoxyCodeLine{00464   m\_buttonLayout-\/>setMargin(0);}
\DoxyCodeLine{00465   m\_buttonLayout-\/>setSpacing(20);}
\DoxyCodeLine{00466   \{}
\DoxyCodeLine{00467     m\_buttonLayout-\/>addWidget(m\_okBtn);}
\DoxyCodeLine{00468     m\_buttonLayout-\/>addWidget(m\_cancelBtn);}
\DoxyCodeLine{00469   \}}
\DoxyCodeLine{00470 }
\DoxyCodeLine{00471   \textcolor{keywordtype}{int} formatIndex = m\_fileFormat-\/>findText(}
\DoxyCodeLine{00472       QString::fromStdString(ConvertPopupFileFormat.getValue()));}
\DoxyCodeLine{00473   \textcolor{keywordflow}{if} (formatIndex)}
\DoxyCodeLine{00474     m\_fileFormat-\/>setCurrentIndex(formatIndex);}
\DoxyCodeLine{00475   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00476     m\_fileFormat-\/>setCurrentIndex(m\_fileFormat-\/>findText(\textcolor{stringliteral}{"{}tif"{}}));}
\DoxyCodeLine{00477   m\_bgColorField-\/>setColor(TPixel32(ConvertPopupBgColorR, ConvertPopupBgColorG,}
\DoxyCodeLine{00478                                     ConvertPopupBgColorB,}
\DoxyCodeLine{00479                                     ConvertPopupBgColorA));}
\DoxyCodeLine{00480   m\_skip-\/>setChecked(ConvertPopupSkipExisting != 0);}
\DoxyCodeLine{00481   m\_removeDotBeforeFrameNumber-\/>setChecked(ConvertPopupRemoveDot != 0);}
\DoxyCodeLine{00482   m\_saveBackupToNopaint-\/>setChecked(ConvertPopupSaveToNopaint != 0);}
\DoxyCodeLine{00483   m\_appendDefaultPalette-\/>setChecked(ConvertPopupAppendDefaultPalette != 0);}
\DoxyCodeLine{00484   m\_removeUnusedStyles-\/>setChecked(ConvertPopupRemoveUnusedStyles != 0);}
\DoxyCodeLine{00485 }
\DoxyCodeLine{00486   \textcolor{comment}{//-\/-\/-\/ signal-\/slot connections}}
\DoxyCodeLine{00487   qRegisterMetaType<TFilePath>(\textcolor{stringliteral}{"{}TFilePath"{}});}
\DoxyCodeLine{00488 }
\DoxyCodeLine{00489   \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{true};}
\DoxyCodeLine{00490   ret = ret \&\& connect(m\_tlvMode, SIGNAL(currentIndexChanged(\textcolor{keyword}{const} QString \&)),}
\DoxyCodeLine{00491                        \textcolor{keyword}{this}, SLOT(onTlvModeSelected(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00492   ret = ret \&\& connect(m\_fromFld, SIGNAL(editingFinished()), \textcolor{keyword}{this},}
\DoxyCodeLine{00493                        SLOT(onRangeChanged()));}
\DoxyCodeLine{00494   ret = ret \&\& connect(m\_toFld, SIGNAL(editingFinished()), \textcolor{keyword}{this},}
\DoxyCodeLine{00495                        SLOT(onRangeChanged()));}
\DoxyCodeLine{00496   ret =}
\DoxyCodeLine{00497       ret \&\& connect(m\_fileFormat, SIGNAL(currentIndexChanged(\textcolor{keyword}{const} QString \&)),}
\DoxyCodeLine{00498                      \textcolor{keyword}{this}, SLOT(onFormatSelected(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00499   ret = ret \&\& connect(m\_formatOptions, SIGNAL(clicked()), \textcolor{keyword}{this},}
\DoxyCodeLine{00500                        SLOT(onOptionsClicked()));}
\DoxyCodeLine{00501   ret = ret \&\& connect(m\_okBtn, SIGNAL(clicked()), \textcolor{keyword}{this}, SLOT(\mbox{\hyperlink{class_convert_popup_aa1c4f08f7408eef0a9a33537dd77c7ee}{apply}}()));}
\DoxyCodeLine{00502   ret = ret \&\& connect(m\_cancelBtn, SIGNAL(clicked()), \textcolor{keyword}{this}, SLOT(reject()));}
\DoxyCodeLine{00503   ret = ret \&\& connect(m\_notifier, SIGNAL(frameCompleted(\textcolor{keywordtype}{int})),}
\DoxyCodeLine{00504                        m\_progressDialog, SLOT(setValue(\textcolor{keywordtype}{int})));}
\DoxyCodeLine{00505   ret = ret \&\& connect(m\_notifier, SIGNAL(levelCompleted(\textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&)),}
\DoxyCodeLine{00506                        \textcolor{keyword}{this}, SLOT(onLevelConverted(\textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&)));}
\DoxyCodeLine{00507   ret = ret \&\& connect(m\_progressDialog, SIGNAL(canceled()), m\_notifier,}
\DoxyCodeLine{00508                        SLOT(onCancelTask()));}
\DoxyCodeLine{00509 }
\DoxyCodeLine{00510   \textcolor{keywordflow}{if} (specifyInput)}
\DoxyCodeLine{00511     ret = ret \&\& connect(m\_convertFileFld, SIGNAL(pathChanged()), \textcolor{keyword}{this},}
\DoxyCodeLine{00512                          SLOT(onFileInChanged()));}
\DoxyCodeLine{00513 }
\DoxyCodeLine{00514   \textcolor{comment}{// resize the dialog}}
\DoxyCodeLine{00515   onFormatSelected(m\_fileFormat-\/>currentText());}
\DoxyCodeLine{00516   \textcolor{comment}{// update unable/enable of checkboxes}}
\DoxyCodeLine{00517   onTlvModeSelected(m\_tlvMode-\/>currentText());}
\DoxyCodeLine{00518 }
\DoxyCodeLine{00519   assert(ret);}
\DoxyCodeLine{00520 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_a381223b769b24636541b5af465d9b7e1}\label{class_convert_popup_a381223b769b24636541b5af465d9b7e1}} 
\index{ConvertPopup@{ConvertPopup}!````~ConvertPopup@{$\sim$ConvertPopup}}
\index{````~ConvertPopup@{$\sim$ConvertPopup}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{$\sim$ConvertPopup()}{~ConvertPopup()}}
{\footnotesize\ttfamily Convert\+Popup\+::$\sim$\+Convert\+Popup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00524                             \{}
\DoxyCodeLine{00525   \textcolor{keyword}{delete} m\_notifier;}
\DoxyCodeLine{00526   \textcolor{keyword}{delete} m\_progressDialog;}
\DoxyCodeLine{00527   \textcolor{keyword}{delete} m\_converter;}
\DoxyCodeLine{00528 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_convert_popup_aa1c4f08f7408eef0a9a33537dd77c7ee}\label{class_convert_popup_aa1c4f08f7408eef0a9a33537dd77c7ee}} 
\index{ConvertPopup@{ConvertPopup}!apply@{apply}}
\index{apply@{apply}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{apply}{apply}}
{\footnotesize\ttfamily void Convert\+Popup\+::apply (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Starts the conversion. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01164                          \{}
\DoxyCodeLine{01165   \textcolor{comment}{// if parameters are not ok do nothing and don't close the dialog}}
\DoxyCodeLine{01166   \textcolor{keywordflow}{if} (!checkParameters()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01167 }
\DoxyCodeLine{01168   \textcolor{comment}{// store the parameters in user env file}}
\DoxyCodeLine{01169   ConvertPopupFileFormat    = m\_fileFormat-\/>currentText().toStdString();}
\DoxyCodeLine{01170   TPixel32 bgCol            = m\_bgColorField-\/>\mbox{\hyperlink{class_d_v_gui_1_1_color_field_a6955ee5be0a395075590a99bc9262fe1}{getColor}}();}
\DoxyCodeLine{01171   ConvertPopupBgColorR      = (int)bgCol.r;}
\DoxyCodeLine{01172   ConvertPopupBgColorG      = (\textcolor{keywordtype}{int})bgCol.g;}
\DoxyCodeLine{01173   ConvertPopupBgColorB      = (int)bgCol.b;}
\DoxyCodeLine{01174   ConvertPopupBgColorA      = (\textcolor{keywordtype}{int})bgCol.m;}
\DoxyCodeLine{01175   ConvertPopupSkipExisting  = m\_skip-\/>isChecked() ? 1 : 0;}
\DoxyCodeLine{01176   ConvertPopupRemoveDot     = m\_removeDotBeforeFrameNumber-\/>isChecked() ? 1 : 0;}
\DoxyCodeLine{01177   ConvertPopupSaveToNopaint = m\_saveBackupToNopaint-\/>isChecked() ? 1 : 0;}
\DoxyCodeLine{01178   ConvertPopupAppendDefaultPalette =}
\DoxyCodeLine{01179       m\_appendDefaultPalette-\/>isChecked() ? 1 : 0;}
\DoxyCodeLine{01180   ConvertPopupRemoveUnusedStyles = m\_removeUnusedStyles-\/>isChecked() ? 1 : 0;}
\DoxyCodeLine{01181 }
\DoxyCodeLine{01182   ConvertPopupDpiMode = m\_dpiMode-\/>currentIndex();}
\DoxyCodeLine{01183   \textcolor{keywordflow}{if} (m\_dpiMode-\/>currentIndex() == 2)  \textcolor{comment}{// In the case of Custom DPI}}
\DoxyCodeLine{01184     ConvertPopupDpiValue = m\_dpiFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a4cb043e4d9f7c7ffeed57a72bc10a26e}{getValue}}();}
\DoxyCodeLine{01185 }
\DoxyCodeLine{01186   \textcolor{comment}{// parameters are ok: close the dialog first}}
\DoxyCodeLine{01187   close();}
\DoxyCodeLine{01188 }
\DoxyCodeLine{01189   m\_isConverting = \textcolor{keyword}{true};}
\DoxyCodeLine{01190   m\_progressDialog-\/>show();}
\DoxyCodeLine{01191   m\_notifier-\/>reset();}
\DoxyCodeLine{01192   QApplication::setOverrideCursor(Qt::WaitCursor);}
\DoxyCodeLine{01193 }
\DoxyCodeLine{01194   m\_converter = \textcolor{keyword}{new} Converter(\textcolor{keyword}{this});}
\DoxyCodeLine{01195 \textcolor{preprocessor}{\#if QT\_VERSION >= 0x050000}}
\DoxyCodeLine{01196   \textcolor{keywordtype}{bool} ret =}
\DoxyCodeLine{01197       connect(m\_converter, SIGNAL(finished()), \textcolor{keyword}{this}, SLOT(onConvertFinished()));}
\DoxyCodeLine{01198 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01199   \textcolor{keywordtype}{int} ret =}
\DoxyCodeLine{01200       connect(m\_converter, SIGNAL(finished()), \textcolor{keyword}{this}, SLOT(onConvertFinished()));}
\DoxyCodeLine{01201 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01202   Q\_ASSERT(ret);}
\DoxyCodeLine{01203 }
\DoxyCodeLine{01204   \textcolor{comment}{// TODO: salvare il vecchio stato}}
\DoxyCodeLine{01205   \textcolor{keywordflow}{if} (m\_fileFormat-\/>currentText() == TlvExtension \&\&}
\DoxyCodeLine{01206       m\_tlvMode-\/>currentText() == TlvMode\_PaintedFromTwoImages) \{}
\DoxyCodeLine{01207     \textcolor{keywordflow}{if} (!m\_unpaintedSuffix-\/>text().contains(\textcolor{charliteral}{'\_'}))}
\DoxyCodeLine{01208       \mbox{\hyperlink{class_t_file_path_ac2f46556ce0dec81e89372e2f7f2d155}{TFilePath::setUnderscoreFormatAllowed}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01209   \}}
\DoxyCodeLine{01210 }
\DoxyCodeLine{01211   \textcolor{comment}{// start converting. Conversion end is handled by onConvertFinished() slot}}
\DoxyCodeLine{01212   m\_converter-\/>start();}
\DoxyCodeLine{01213 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00180}{DVGui\+::\+Color\+Field\+::get\+Color()}}, \mbox{\hyperlink{l00355}{DVGui\+::\+Double\+Line\+Edit\+::get\+Value()}}, and \mbox{\hyperlink{l00158}{TFile\+Path\+::set\+Underscore\+Format\+Allowed()}}.

\mbox{\Hypertarget{class_convert_popup_a53a383a67154cbb3e94f6a6c6b880fed}\label{class_convert_popup_a53a383a67154cbb3e94f6a6c6b880fed}} 
\index{ConvertPopup@{ConvertPopup}!checkParameters@{checkParameters}}
\index{checkParameters@{checkParameters}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{checkParameters()}{checkParameters()}}
{\footnotesize\ttfamily bool Convert\+Popup\+::check\+Parameters (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01136                                          \{}
\DoxyCodeLine{01137   \textcolor{keywordflow}{if} (m\_srcFilePaths.size() == 1 \&\& m\_fileNameFld-\/>text().isEmpty()) \{}
\DoxyCodeLine{01138     DVGui::warning(}
\DoxyCodeLine{01139         tr(\textcolor{stringliteral}{"{}No output filename specified: please choose a valid level name."{}}));}
\DoxyCodeLine{01140     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01141   \}}
\DoxyCodeLine{01142 }
\DoxyCodeLine{01143   \textcolor{keywordflow}{if} (m\_fileFormat-\/>currentText() == TlvExtension) \{}
\DoxyCodeLine{01144     \textcolor{keywordflow}{if} (m\_tlvMode-\/>currentText() == TlvMode\_PaintedFromTwoImages) \{}
\DoxyCodeLine{01145       \textcolor{keywordflow}{if} (m\_unpaintedSuffix-\/>text() == \textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{01146         DVGui::warning(tr(\textcolor{stringliteral}{"{}No unpainted suffix specified: cannot convert."{}}));}
\DoxyCodeLine{01147         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01148       \}}
\DoxyCodeLine{01149     \}}
\DoxyCodeLine{01150   \}}
\DoxyCodeLine{01151 }
\DoxyCodeLine{01152   \textcolor{keywordflow}{if} (m\_palettePath-\/>getPath() == CreateNewPalette ||}
\DoxyCodeLine{01153       m\_fileFormat-\/>currentText() != TlvExtension) \{}
\DoxyCodeLine{01154     \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = readUserProvidedPalette();}
\DoxyCodeLine{01155     \textcolor{keyword}{delete} palette;}
\DoxyCodeLine{01156     \textcolor{comment}{// note: don't keep a reference to the palette because that can not be used}}
\DoxyCodeLine{01157     \textcolor{comment}{// by the Convert2Tlv class (that requires a TFilePath instead)}}
\DoxyCodeLine{01158   \}}
\DoxyCodeLine{01159 }
\DoxyCodeLine{01160   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01161 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_ab1e4d49e031fc88312a1849610e34d03}\label{class_convert_popup_ab1e4d49e031fc88312a1849610e34d03}} 
\index{ConvertPopup@{ConvertPopup}!convertToTlv@{convertToTlv}}
\index{convertToTlv@{convertToTlv}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{convertToTlv()}{convertToTlv()}}
{\footnotesize\ttfamily void Convert\+Popup\+::convert\+To\+Tlv (\begin{DoxyParamCaption}\item[{bool}]{to\+Painted }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00933                                               \{}
\DoxyCodeLine{00934 \textcolor{preprocessor}{\#ifdef CICCIO}}
\DoxyCodeLine{00935   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *sc   = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{00936   \textcolor{keywordtype}{bool} doAutoclose = \textcolor{keyword}{false};}
\DoxyCodeLine{00937 }
\DoxyCodeLine{00938   QApplication::setOverrideCursor(Qt::WaitCursor);}
\DoxyCodeLine{00939 }
\DoxyCodeLine{00940   \textcolor{keywordtype}{int} i, totFrames = 0, skipped = 0;}
\DoxyCodeLine{00941 }
\DoxyCodeLine{00942   \mbox{\hyperlink{class_t_file_path_ac2f46556ce0dec81e89372e2f7f2d155}{TFilePath::setUnderscoreFormatAllowed}}(}
\DoxyCodeLine{00943       !m\_unpaintedSuffix-\/>text().contains(\textcolor{charliteral}{'\_'}));}
\DoxyCodeLine{00944 }
\DoxyCodeLine{00945   std::vector<Convert2Tlv *> converters;}
\DoxyCodeLine{00946   \textcolor{keywordflow}{for} (i = 0; i < m\_srcFilePaths.size(); i++) \{}
\DoxyCodeLine{00947     \mbox{\hyperlink{class_convert2_tlv}{Convert2Tlv}} *converter = makeTlvConverter(m\_srcFilePaths[i]);}
\DoxyCodeLine{00948     \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(converter-\/>m\_levelOut)) \{}
\DoxyCodeLine{00949       \textcolor{keywordflow}{if} (m\_skip-\/>isChecked()) \{}
\DoxyCodeLine{00950         DVGui::info(}
\DoxyCodeLine{00951             QString(tr(\textcolor{stringliteral}{"{}Level "{}})) +}
\DoxyCodeLine{00952             QString::fromStdWString(}
\DoxyCodeLine{00953                 converter-\/>m\_levelOut.\mbox{\hyperlink{class_t_file_path_ac17d65d827432f0fae28fed699bf4afa}{withoutParentDir}}().getWideString()) +}
\DoxyCodeLine{00954             QString(tr(\textcolor{stringliteral}{"{} already exists; skipped"{}})));}
\DoxyCodeLine{00955         \textcolor{keyword}{delete} converter;}
\DoxyCodeLine{00956         skipped++;}
\DoxyCodeLine{00957         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00958       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00959         TSystem::removeFileOrLevel(converter-\/>m\_levelOut);}
\DoxyCodeLine{00960     \}}
\DoxyCodeLine{00961     totFrames += converter-\/>getFramesToConvertCount();}
\DoxyCodeLine{00962     converters.push\_back(converter);}
\DoxyCodeLine{00963   \}}
\DoxyCodeLine{00964 }
\DoxyCodeLine{00965   \textcolor{keywordflow}{if} (converters.empty()) \{}
\DoxyCodeLine{00966     QApplication::restoreOverrideCursor();}
\DoxyCodeLine{00967     \mbox{\hyperlink{class_t_file_path_ac2f46556ce0dec81e89372e2f7f2d155}{TFilePath::setUnderscoreFormatAllowed}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00968     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00969   \}}
\DoxyCodeLine{00970 }
\DoxyCodeLine{00971   ProgressDialog pb(\textcolor{stringliteral}{"{}"{}}, tr(\textcolor{stringliteral}{"{}Cancel"{}}), 0, totFrames);}
\DoxyCodeLine{00972   \textcolor{keywordtype}{int} j, l, k = 0;}
\DoxyCodeLine{00973   \textcolor{keywordflow}{for} (i = 0; i < converters.size(); i++) \{}
\DoxyCodeLine{00974     std::string errorMessage;}
\DoxyCodeLine{00975     \textcolor{keywordflow}{if} (!converters[i]-\/>init(errorMessage)) \{}
\DoxyCodeLine{00976       converters[i]-\/>abort();}
\DoxyCodeLine{00977       DVGui::error(QString::fromStdString(errorMessage));}
\DoxyCodeLine{00978       \textcolor{keyword}{delete} converters[i];}
\DoxyCodeLine{00979       converters[i] = 0;}
\DoxyCodeLine{00980       skipped++;}
\DoxyCodeLine{00981       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00982     \}}
\DoxyCodeLine{00983 }
\DoxyCodeLine{00984     \textcolor{keywordtype}{int} count = converters[i]-\/>getFramesToConvertCount();}
\DoxyCodeLine{00985 }
\DoxyCodeLine{00986     pb.setLabelText(tr(\textcolor{stringliteral}{"{}Generating level "{}}) +}
\DoxyCodeLine{00987                     toQString(converters[i]-\/>m\_levelOut));}
\DoxyCodeLine{00988     pb.show();}
\DoxyCodeLine{00989 }
\DoxyCodeLine{00990     \textcolor{keywordflow}{for} (j = 0; j < count; j++) \{}
\DoxyCodeLine{00991       std::string errorMessage = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00992       \textcolor{keywordflow}{if} (!converters[i]-\/>convertNext(errorMessage) || pb.wasCanceled()) \{}
\DoxyCodeLine{00993         \textcolor{keywordflow}{for} (l = i; l < converters.size(); l++) \{}
\DoxyCodeLine{00994           converters[l]-\/>abort();}
\DoxyCodeLine{00995           \textcolor{keyword}{delete} converters[i];}
\DoxyCodeLine{00996           converters[i] = 0;}
\DoxyCodeLine{00997         \}}
\DoxyCodeLine{00998         \textcolor{keywordflow}{if} (errorMessage != \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{00999           DVGui::error(QString::fromStdString(errorMessage));}
\DoxyCodeLine{01000         QApplication::restoreOverrideCursor();}
\DoxyCodeLine{01001         FileBrowser::refreshFolder(m\_srcFilePaths[0].getParentDir());}
\DoxyCodeLine{01002         \mbox{\hyperlink{class_t_file_path_ac2f46556ce0dec81e89372e2f7f2d155}{TFilePath::setUnderscoreFormatAllowed}}(\textcolor{keyword}{false});}
\DoxyCodeLine{01003         \textcolor{keywordflow}{return};}
\DoxyCodeLine{01004       \}}
\DoxyCodeLine{01005       pb.setValue(++k);}
\DoxyCodeLine{01006       DVGui::info(QString(tr(\textcolor{stringliteral}{"{}Level "{}})) +}
\DoxyCodeLine{01007                   QString::fromStdWString(}
\DoxyCodeLine{01008                       m\_srcFilePaths[i].withoutParentDir().getWideString()) +}
\DoxyCodeLine{01009                   QString(tr(\textcolor{stringliteral}{"{} converted to tlv."{}})));}
\DoxyCodeLine{01010     \}}
\DoxyCodeLine{01011     \mbox{\hyperlink{class_t_file_path}{TFilePath}} levelOut(converters[i]-\/>m\_levelOut);}
\DoxyCodeLine{01012     \textcolor{keyword}{delete} converters[i];}
\DoxyCodeLine{01013     IconGenerator::instance()-\/>invalidate(levelOut);}
\DoxyCodeLine{01014 }
\DoxyCodeLine{01015     converters[i] = 0;}
\DoxyCodeLine{01016   \}}
\DoxyCodeLine{01017 }
\DoxyCodeLine{01018   QApplication::restoreOverrideCursor();}
\DoxyCodeLine{01019   pb.hide();}
\DoxyCodeLine{01020 }
\DoxyCodeLine{01021   \textcolor{keywordflow}{if} (m\_srcFilePaths.size() == 1) \{}
\DoxyCodeLine{01022     \textcolor{keywordflow}{if} (skipped == 0)}
\DoxyCodeLine{01023       DVGui::info(}
\DoxyCodeLine{01024           tr(\textcolor{stringliteral}{"{}Level \%1 converted to TLV Format"{}})}
\DoxyCodeLine{01025               .arg(QString::fromStdWString(}
\DoxyCodeLine{01026                   m\_srcFilePaths[0].withoutParentDir().getWideString())));}
\DoxyCodeLine{01027     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01028       DVGui::warning(}
\DoxyCodeLine{01029           tr(\textcolor{stringliteral}{"{}Warning: Level \%1 NOT converted to TLV Format"{}})}
\DoxyCodeLine{01030               .arg(QString::fromStdWString(}
\DoxyCodeLine{01031                   m\_srcFilePaths[0].withoutParentDir().getWideString())));}
\DoxyCodeLine{01032   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01033     DVGui::MsgBox(skipped == 0 ? DVGui::INFORMATION : DVGui::WARNING,}
\DoxyCodeLine{01034                   tr(\textcolor{stringliteral}{"{}Converted \%1 out of \%2 Levels to TLV Format"{}})}
\DoxyCodeLine{01035                       .arg(QString::number(m\_srcFilePaths.size() -\/ skipped))}
\DoxyCodeLine{01036                       .arg(QString::number(m\_srcFilePaths.size())));}
\DoxyCodeLine{01037 }
\DoxyCodeLine{01038   FileBrowser::refreshFolder(m\_srcFilePaths[0].getParentDir());}
\DoxyCodeLine{01039   \mbox{\hyperlink{class_t_file_path_ac2f46556ce0dec81e89372e2f7f2d155}{TFilePath::setUnderscoreFormatAllowed}}(\textcolor{keyword}{false});}
\DoxyCodeLine{01040 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01041 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_a2b871e5cea156ff3c07248bd68b3c3cf}\label{class_convert_popup_a2b871e5cea156ff3c07248bd68b3c3cf}} 
\index{ConvertPopup@{ConvertPopup}!getDestinationFilePath@{getDestinationFilePath}}
\index{getDestinationFilePath@{getDestinationFilePath}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{getDestinationFilePath()}{getDestinationFilePath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Convert\+Popup\+::get\+Destination\+File\+Path (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{source\+File\+Path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01046                                      \{}
\DoxyCodeLine{01047   \textcolor{comment}{// Build the DECODED output folder path}}
\DoxyCodeLine{01048   \mbox{\hyperlink{class_t_file_path}{TFilePath}} destFolder = sourceFilePath.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}();}
\DoxyCodeLine{01049 }
\DoxyCodeLine{01050   \textcolor{keywordflow}{if} (!m\_saveInFileFld-\/>getPath().isEmpty()) \{}
\DoxyCodeLine{01051     \mbox{\hyperlink{class_t_file_path}{TFilePath}} dir(m\_saveInFileFld-\/>getPath().toStdWString());}
\DoxyCodeLine{01052 }
\DoxyCodeLine{01053     \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{01054     destFolder        = scene-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(dir);}
\DoxyCodeLine{01055   \}}
\DoxyCodeLine{01056 }
\DoxyCodeLine{01057   \textcolor{comment}{// Build the output level name}}
\DoxyCodeLine{01058   \textcolor{keyword}{const} QString \&fldName = m\_fileNameFld-\/>text();}
\DoxyCodeLine{01059   \textcolor{keyword}{const} std::string \&ext =}
\DoxyCodeLine{01060       (m\_fileFormat-\/>currentText() == OldLevelToTlvExtension)}
\DoxyCodeLine{01061           ? \textcolor{stringliteral}{"{}tlv"{}}}
\DoxyCodeLine{01062           : m\_fileFormat-\/>currentText().toStdString();}
\DoxyCodeLine{01063   \textcolor{keyword}{const} std::wstring \&name =}
\DoxyCodeLine{01064       fldName.isEmpty() ? sourceFilePath.getWideName() : fldName.toStdWString();}
\DoxyCodeLine{01065 }
\DoxyCodeLine{01066   \mbox{\hyperlink{class_t_file_path}{TFilePath}} destName = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(name).\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(ext);}
\DoxyCodeLine{01067 }
\DoxyCodeLine{01068   \textcolor{keywordflow}{if} (TFileType::isLevelFilePath(sourceFilePath) \&\&}
\DoxyCodeLine{01069       !TFileType::isLevelExtension(ext))}
\DoxyCodeLine{01070     destName = destName.\mbox{\hyperlink{class_t_file_path_a12f35b225e1882372ad7e02ad7fce543}{withFrame}}(TFrameId::EMPTY\_FRAME);  \textcolor{comment}{// use the '..'}}
\DoxyCodeLine{01071                                                            \textcolor{comment}{// format to denote}}
\DoxyCodeLine{01072                                                            \textcolor{comment}{// an output level}}
\DoxyCodeLine{01073 }
\DoxyCodeLine{01074   \textcolor{comment}{// Merge the two}}
\DoxyCodeLine{01075   \textcolor{keywordflow}{return} destFolder + destName;}
\DoxyCodeLine{01076 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_a3a3ae97fe7a58dcd9aa3bb532bc38d55}\label{class_convert_popup_a3a3ae97fe7a58dcd9aa3bb532bc38d55}} 
\index{ConvertPopup@{ConvertPopup}!getDestinationType@{getDestinationType}}
\index{getDestinationType@{getDestinationType}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{getDestinationType()}{getDestinationType()}}
{\footnotesize\ttfamily QString Convert\+Popup\+::get\+Destination\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00532                                                \{}
\DoxyCodeLine{00533   \textcolor{keywordflow}{return} m\_fileFormat-\/>currentText();}
\DoxyCodeLine{00534 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_a89e0b3ac85f050dea9f75c4a4d886b7b}\label{class_convert_popup_a89e0b3ac85f050dea9f75c4a4d886b7b}} 
\index{ConvertPopup@{ConvertPopup}!getFrameRange@{getFrameRange}}
\index{getFrameRange@{getFrameRange}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{getFrameRange()}{getFrameRange()}}
{\footnotesize\ttfamily void Convert\+Popup\+::get\+Frame\+Range (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{source\+File\+Path,  }\item[{\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{from,  }\item[{\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{to }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01107                                                                \{}
\DoxyCodeLine{01108   from = to = \mbox{\hyperlink{class_t_frame_id}{TFrameId}}();}
\DoxyCodeLine{01109 }
\DoxyCodeLine{01110   \textcolor{keywordflow}{if} (!TFileType::isLevelFilePath(sourceFilePath)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01111 }
\DoxyCodeLine{01112   \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}} lr(sourceFilePath);}
\DoxyCodeLine{01113   \textcolor{keywordflow}{if} (!lr) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01114 }
\DoxyCodeLine{01115   \mbox{\hyperlink{class_t_level_p}{TLevelP}} level = lr-\/>loadInfo();}
\DoxyCodeLine{01116   \textcolor{keywordflow}{if} (level-\/>begin() == level-\/>end()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01117 }
\DoxyCodeLine{01118   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} firstFrame = from = level-\/>begin()-\/>first,}
\DoxyCodeLine{01119            lastFrame = to = (-\/-\/level-\/>end())-\/>first;}
\DoxyCodeLine{01120 }
\DoxyCodeLine{01121   \textcolor{keywordflow}{if} (m\_srcFilePaths.size() == 1) \{}
\DoxyCodeLine{01122     \textcolor{comment}{// Just one level -\/ consider from/to input fields, too}}
\DoxyCodeLine{01123     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid;}
\DoxyCodeLine{01124     \textcolor{keywordtype}{bool} ok;}
\DoxyCodeLine{01125 }
\DoxyCodeLine{01126     fid = \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(m\_fromFld-\/>text().toInt(\&ok));}
\DoxyCodeLine{01127     \textcolor{keywordflow}{if} (ok \&\& fid > from) from = tcrop(fid, firstFrame, lastFrame);}
\DoxyCodeLine{01128 }
\DoxyCodeLine{01129     fid = \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(m\_toFld-\/>text().toInt(\&ok));}
\DoxyCodeLine{01130     \textcolor{keywordflow}{if} (ok \&\& fid < to) to = tcrop(fid, firstFrame, lastFrame);}
\DoxyCodeLine{01131   \}}
\DoxyCodeLine{01132 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_a9fda3882ca991a0a37c49a756ebe5c75}\label{class_convert_popup_a9fda3882ca991a0a37c49a756ebe5c75}} 
\index{ConvertPopup@{ConvertPopup}!getTlvMode@{getTlvMode}}
\index{getTlvMode@{getTlvMode}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{getTlvMode()}{getTlvMode()}}
{\footnotesize\ttfamily QString Convert\+Popup\+::get\+Tlv\+Mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00538 \{ \textcolor{keywordflow}{return} m\_tlvMode-\/>currentText(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_a1187496e7583ea2f72f020d298c9f047}\label{class_convert_popup_a1187496e7583ea2f72f020d298c9f047}} 
\index{ConvertPopup@{ConvertPopup}!isConverting@{isConverting}}
\index{isConverting@{isConverting}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{isConverting()}{isConverting()}}
{\footnotesize\ttfamily bool Convert\+Popup\+::is\+Converting (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00064 \{ \textcolor{keywordflow}{return} m\_isConverting; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_ace690d587a5826344c82a220a5284359}\label{class_convert_popup_ace690d587a5826344c82a220a5284359}} 
\index{ConvertPopup@{ConvertPopup}!makeTlvConverter@{makeTlvConverter}}
\index{makeTlvConverter@{makeTlvConverter}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{makeTlvConverter()}{makeTlvConverter()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_convert2_tlv}{Convert2\+Tlv}} $\ast$ Convert\+Popup\+::make\+Tlv\+Converter (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{source\+File\+Path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00889                                                                            \{}
\DoxyCodeLine{00890   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *sc = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{00891   \mbox{\hyperlink{class_t_file_path}{TFilePath}} unpaintedfilePath;}
\DoxyCodeLine{00892   \textcolor{keywordflow}{if} (m\_tlvMode-\/>currentText() == TlvMode\_PaintedFromTwoImages) \{}
\DoxyCodeLine{00893     QString suffixString = m\_unpaintedSuffix-\/>text();}
\DoxyCodeLine{00894 }
\DoxyCodeLine{00895     \mbox{\hyperlink{class_t_file_path}{TFilePath}} unpaintedFolder;}
\DoxyCodeLine{00896     \textcolor{keywordflow}{if} (m\_unpaintedFolder-\/>getPath() == SameAsPainted)}
\DoxyCodeLine{00897       unpaintedFolder = sourceFilePath.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}();}
\DoxyCodeLine{00898     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00899       unpaintedFolder = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(m\_unpaintedFolder-\/>getPath().toStdString());}
\DoxyCodeLine{00900 }
\DoxyCodeLine{00901     std::string basename =}
\DoxyCodeLine{00902         sourceFilePath.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}() + suffixString.toStdString();}
\DoxyCodeLine{00903     unpaintedfilePath = sc-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(}
\DoxyCodeLine{00904         sourceFilePath.\mbox{\hyperlink{class_t_file_path_a09d12d68c4264183e0268dde6f592b2e}{withParentDir}}(unpaintedFolder).\mbox{\hyperlink{class_t_file_path_a3ebf9ced558cfef97a60bba536b23c6f}{withName}}(basename));}
\DoxyCodeLine{00905   \}}
\DoxyCodeLine{00906   \textcolor{keywordtype}{int} from = -\/1, to = -\/1;}
\DoxyCodeLine{00907   \textcolor{keywordflow}{if} (m\_srcFilePaths.size() == 1 \&\& m\_fromFld-\/>isEnabled() \&\&}
\DoxyCodeLine{00908       m\_toFld-\/>isEnabled()) \{}
\DoxyCodeLine{00909     from = m\_fromFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit_a77019c5d6bce534fdd1931136a6efe95}{getValue}}();}
\DoxyCodeLine{00910     to   = m\_toFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit_a77019c5d6bce534fdd1931136a6efe95}{getValue}}();}
\DoxyCodeLine{00911   \}}
\DoxyCodeLine{00912 }
\DoxyCodeLine{00913   \mbox{\hyperlink{class_t_file_path}{TFilePath}} palettePath;}
\DoxyCodeLine{00914   \textcolor{keywordflow}{if} (m\_palettePath-\/>getPath() != CreateNewPalette)}
\DoxyCodeLine{00915     palettePath =}
\DoxyCodeLine{00916         sc-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(m\_palettePath-\/>getPath().toStdString()));}
\DoxyCodeLine{00917 }
\DoxyCodeLine{00918   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fn = sc-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(sourceFilePath);}
\DoxyCodeLine{00919   \mbox{\hyperlink{class_t_file_path}{TFilePath}} out =}
\DoxyCodeLine{00920       sc-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(m\_saveInFileFld-\/>getPath().toStdWString()));}
\DoxyCodeLine{00921 }
\DoxyCodeLine{00922   \mbox{\hyperlink{class_convert2_tlv}{Convert2Tlv}} *converter = \textcolor{keyword}{new} \mbox{\hyperlink{class_convert2_tlv}{Convert2Tlv}}(}
\DoxyCodeLine{00923       fn, unpaintedfilePath, out, m\_fileNameFld-\/>text(), from, to,}
\DoxyCodeLine{00924       m\_applyAutoclose-\/>isChecked(), palettePath, m\_tolerance-\/>\mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit_a77019c5d6bce534fdd1931136a6efe95}{getValue}}(),}
\DoxyCodeLine{00925       m\_antialias-\/>currentIndex(), m\_antialiasIntensity-\/>\mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit_a77019c5d6bce534fdd1931136a6efe95}{getValue}}(),}
\DoxyCodeLine{00926       getTlvMode() == TlvMode\_UnpaintedFromNonAA,}
\DoxyCodeLine{00927       m\_appendDefaultPalette-\/>isChecked(), m\_dpiFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a4cb043e4d9f7c7ffeed57a72bc10a26e}{getValue}}());}
\DoxyCodeLine{00928   \textcolor{keywordflow}{return} converter;}
\DoxyCodeLine{00929 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_a9892d023bdc607ca5157c21999e6f8e3}\label{class_convert_popup_a9892d023bdc607ca5157c21999e6f8e3}} 
\index{ConvertPopup@{ConvertPopup}!onAntialiasSelected@{onAntialiasSelected}}
\index{onAntialiasSelected@{onAntialiasSelected}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{onAntialiasSelected}{onAntialiasSelected}}
{\footnotesize\ttfamily void Convert\+Popup\+::on\+Antialias\+Selected (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00703                                                 \{}
\DoxyCodeLine{00704   m\_antialiasIntensity-\/>setEnabled(index != 0);}
\DoxyCodeLine{00705 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_a619efdd010d0bcb8933123ff2a6b6546}\label{class_convert_popup_a619efdd010d0bcb8933123ff2a6b6546}} 
\index{ConvertPopup@{ConvertPopup}!onConvertFinished@{onConvertFinished}}
\index{onConvertFinished@{onConvertFinished}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{onConvertFinished}{onConvertFinished}}
{\footnotesize\ttfamily void Convert\+Popup\+::on\+Convert\+Finished (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01217                                      \{}
\DoxyCodeLine{01218   m\_isConverting = \textcolor{keyword}{false};}
\DoxyCodeLine{01219   \mbox{\hyperlink{class_t_file_path}{TFilePath}} dstFilePath(m\_saveInFileFld-\/>getPath().toStdWString());}
\DoxyCodeLine{01220   \textcolor{keywordflow}{if} (dstFilePath == m\_srcFilePaths[0].getParentDir())}
\DoxyCodeLine{01221     FileBrowser::refreshFolder(dstFilePath);}
\DoxyCodeLine{01222 }
\DoxyCodeLine{01223   m\_progressDialog-\/>close();}
\DoxyCodeLine{01224   QApplication::restoreOverrideCursor();}
\DoxyCodeLine{01225 }
\DoxyCodeLine{01226   \textcolor{keywordtype}{int} errorCount   = m\_notifier-\/>getErrorCount();}
\DoxyCodeLine{01227   \textcolor{keywordtype}{int} skippedCount = m\_converter-\/>getSkippedCount();}
\DoxyCodeLine{01228   \textcolor{keywordflow}{if} (errorCount > 0) \{}
\DoxyCodeLine{01229     \textcolor{keywordflow}{if} (skippedCount > 0)}
\DoxyCodeLine{01230       DVGui::error(}
\DoxyCodeLine{01231           tr(\textcolor{stringliteral}{"{}Convert completed with \%1 error(s) and \%2 level(s) skipped"{}})}
\DoxyCodeLine{01232               .arg(errorCount)}
\DoxyCodeLine{01233               .arg(skippedCount));}
\DoxyCodeLine{01234     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01235       DVGui::error(tr(\textcolor{stringliteral}{"{}Convert completed with \%1 error(s) "{}}).arg(errorCount));}
\DoxyCodeLine{01236   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (skippedCount > 0) \{}
\DoxyCodeLine{01237     DVGui::warning(tr(\textcolor{stringliteral}{"{}\%1 level(s) skipped"{}}).arg(skippedCount));}
\DoxyCodeLine{01238   \}}
\DoxyCodeLine{01239   \textcolor{comment}{/*}}
\DoxyCodeLine{01240 \textcolor{comment}{if (m\_srcFilePaths.size()==1)}}
\DoxyCodeLine{01241 \textcolor{comment}{\{}}
\DoxyCodeLine{01242 \textcolor{comment}{if (skipped==0)}}
\DoxyCodeLine{01243 \textcolor{comment}{  DVGui::info(tr("{}Level \%1 converted to TLV}}
\DoxyCodeLine{01244 \textcolor{comment}{Format"{}).arg(QString::fromStdWString(m\_srcFilePaths[0].withoutParentDir().getWideString())));}}
\DoxyCodeLine{01245 \textcolor{comment}{else}}
\DoxyCodeLine{01246 \textcolor{comment}{  DVGui::warning(tr("{}Warning: Level \%1 NOT converted to TLV}}
\DoxyCodeLine{01247 \textcolor{comment}{Format"{}).arg(QString::fromStdWString(m\_srcFilePaths[0].withoutParentDir().getWideString())));}}
\DoxyCodeLine{01248 \textcolor{comment}{\}}}
\DoxyCodeLine{01249 \textcolor{comment}{else}}
\DoxyCodeLine{01250 \textcolor{comment}{DVGui::MsgBox(skipped==0?DVGui::INFORMATION:DVGui::WARNING, tr("{}Converted \%1 out}}
\DoxyCodeLine{01251 \textcolor{comment}{of \%2 Levels to TLV Format"{}).arg(}}
\DoxyCodeLine{01252 \textcolor{comment}{QString::number(m\_srcFilePaths.size()-\/skipped)).arg(QString::number(m\_srcFilePaths.size())));}}
\DoxyCodeLine{01253 \textcolor{comment}{*/}}
\DoxyCodeLine{01254 }
\DoxyCodeLine{01255   \textcolor{comment}{// TFilePath parentDir = m\_srcFilePaths[0].getParentDir();}}
\DoxyCodeLine{01256   \textcolor{comment}{// FileBrowser::refreshFolder(parentDir);}}
\DoxyCodeLine{01257 }
\DoxyCodeLine{01258   \textcolor{keyword}{delete} m\_converter;}
\DoxyCodeLine{01259   m\_converter = 0;}
\DoxyCodeLine{01260 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_a34d7c17ad5515ec801ae13c14ce5f054}\label{class_convert_popup_a34d7c17ad5515ec801ae13c14ce5f054}} 
\index{ConvertPopup@{ConvertPopup}!onDpiModeSelected@{onDpiModeSelected}}
\index{onDpiModeSelected@{onDpiModeSelected}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{onDpiModeSelected}{onDpiModeSelected}}
{\footnotesize\ttfamily void Convert\+Popup\+::on\+Dpi\+Mode\+Selected (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01322                                               \{}
\DoxyCodeLine{01323   \textcolor{keywordtype}{double} dpiVal;}
\DoxyCodeLine{01324   \textcolor{keywordflow}{if} (index == 2) \{  \textcolor{comment}{// Custom}}
\DoxyCodeLine{01325     m\_dpiFld-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01326     dpiVal = ConvertPopupDpiValue;}
\DoxyCodeLine{01327   \} \textcolor{keywordflow}{else} \{  \textcolor{comment}{// Image or Camera DPI}}
\DoxyCodeLine{01328     m\_dpiFld-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{01329     \textcolor{keywordflow}{if} (index == 1 || m\_imageDpi == 0.0) \{  \textcolor{comment}{// If dpi information is not}}
\DoxyCodeLine{01330                                             \textcolor{comment}{// contained in the source, use the}}
\DoxyCodeLine{01331                                             \textcolor{comment}{// camera dpi}}
\DoxyCodeLine{01332       dpiVal = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()}
\DoxyCodeLine{01333                    -\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()}
\DoxyCodeLine{01334                    -\/>getScene()}
\DoxyCodeLine{01335                    -\/>\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}()}
\DoxyCodeLine{01336                    -\/>\mbox{\hyperlink{class_t_camera_adf45510b5dc53f6481308ef489fbd5a9}{getDpi}}()}
\DoxyCodeLine{01337                    .x;}
\DoxyCodeLine{01338     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01339       dpiVal = m\_imageDpi;}
\DoxyCodeLine{01340   \}}
\DoxyCodeLine{01341   m\_dpiFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a7d777640f0e092fcccc84976e72e2e5f}{setValue}}(dpiVal);}
\DoxyCodeLine{01342 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_ac11436a2934d1ad6553d66b1ff7950bf}\label{class_convert_popup_ac11436a2934d1ad6553d66b1ff7950bf}} 
\index{ConvertPopup@{ConvertPopup}!onFileInChanged@{onFileInChanged}}
\index{onFileInChanged@{onFileInChanged}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{onFileInChanged}{onFileInChanged}}
{\footnotesize\ttfamily void Convert\+Popup\+::on\+File\+In\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00709                                    \{}
\DoxyCodeLine{00710   assert(m\_convertFileFld);}
\DoxyCodeLine{00711   std::vector<TFilePath> fps;}
\DoxyCodeLine{00712   \mbox{\hyperlink{class_t_project}{TProject}} *project =}
\DoxyCodeLine{00713       \mbox{\hyperlink{class_t_project_manager_a150ca0d6e2eb171b8117b0c5f03dbfad}{TProjectManager::instance}}()-\/>\mbox{\hyperlink{class_t_project_manager_a5267cfeae48d4e7585c3fc56d8d5b0b3}{getCurrentProject}}().getPointer();}
\DoxyCodeLine{00714   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{00715   fps.push\_back(scene-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(}
\DoxyCodeLine{00716       \mbox{\hyperlink{class_t_file_path}{TFilePath}}(m\_convertFileFld-\/>getPath().toStdString())));}
\DoxyCodeLine{00717 }
\DoxyCodeLine{00718   setFiles(fps);}
\DoxyCodeLine{00719 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_a5a85622ce987e596ef6e6b26d55c90b5}\label{class_convert_popup_a5a85622ce987e596ef6e6b26d55c90b5}} 
\index{ConvertPopup@{ConvertPopup}!onFormatChanged@{onFormatChanged}}
\index{onFormatChanged@{onFormatChanged}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{onFormatChanged}{onFormatChanged}}
{\footnotesize\ttfamily void Convert\+Popup\+::on\+Format\+Changed (\begin{DoxyParamCaption}\item[{const QString \&}]{ext }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01290                                                      \{}
\DoxyCodeLine{01291   \textcolor{keywordflow}{if} (ext == QString(\textcolor{stringliteral}{"{}avi"{}}) || ext == QString(\textcolor{stringliteral}{"{}tzp"{}}) || ext == TlvExtension ||}
\DoxyCodeLine{01292       ext == OldLevelToTlvExtension) \{}
\DoxyCodeLine{01293     m\_removeDotBeforeFrameNumber-\/>setChecked(\textcolor{keyword}{false});}
\DoxyCodeLine{01294     m\_removeDotBeforeFrameNumber-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{01295   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01296     m\_removeDotBeforeFrameNumber-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01297     \textcolor{keywordflow}{if} (ext == QString(\textcolor{stringliteral}{"{}tga"{}})) m\_removeDotBeforeFrameNumber-\/>setChecked(\textcolor{keyword}{true});}
\DoxyCodeLine{01298   \}}
\DoxyCodeLine{01299 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_acb18c2f1424c9eb7f5a02cc910455c0c}\label{class_convert_popup_acb18c2f1424c9eb7f5a02cc910455c0c}} 
\index{ConvertPopup@{ConvertPopup}!onFormatSelected@{onFormatSelected}}
\index{onFormatSelected@{onFormatSelected}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{onFormatSelected}{onFormatSelected}}
{\footnotesize\ttfamily void Convert\+Popup\+::on\+Format\+Selected (\begin{DoxyParamCaption}\item[{const QString \&}]{format }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00743                                                          \{}
\DoxyCodeLine{00744   onFormatChanged(format);}
\DoxyCodeLine{00745 }
\DoxyCodeLine{00746   \textcolor{keywordtype}{bool} isTlv          = format == TlvExtension;}
\DoxyCodeLine{00747   \textcolor{keywordtype}{bool} isOldLevel2Tlv = format == OldLevelToTlvExtension;}
\DoxyCodeLine{00748   \textcolor{keywordtype}{bool} isPli          = format == \textcolor{stringliteral}{"{}svg"{}};}
\DoxyCodeLine{00749 }
\DoxyCodeLine{00750   m\_formatOptions-\/>setVisible(!isTlv \&\& !isOldLevel2Tlv);}
\DoxyCodeLine{00751   m\_bgColorField-\/>setVisible(!isTlv \&\& !isPli \&\& !isOldLevel2Tlv);}
\DoxyCodeLine{00752   m\_bgColorLabel-\/>setVisible(!isTlv \&\& !isPli \&\& !isOldLevel2Tlv);}
\DoxyCodeLine{00753 }
\DoxyCodeLine{00754   m\_tlvFrame-\/>setVisible(isTlv);}
\DoxyCodeLine{00755   \textcolor{comment}{// m\_svgFrame-\/>setVisible(isPli);}}
\DoxyCodeLine{00756 }
\DoxyCodeLine{00757   \textcolor{keywordflow}{if} (isTlv) \{}
\DoxyCodeLine{00758     \textcolor{keywordtype}{bool} isPainted = m\_tlvMode-\/>currentText() == TlvMode\_PaintedFromTwoImages;}
\DoxyCodeLine{00759     m\_unpaintedFolderLabel-\/>setEnabled(isPainted);}
\DoxyCodeLine{00760     m\_unpaintedFolder-\/>setEnabled(isPainted);}
\DoxyCodeLine{00761     m\_suffixLabel-\/>setEnabled(isPainted);}
\DoxyCodeLine{00762     m\_unpaintedSuffix-\/>setEnabled(isPainted);}
\DoxyCodeLine{00763 }
\DoxyCodeLine{00764     m\_saveBackupToNopaint-\/>setEnabled(m\_tlvMode-\/>currentText() ==}
\DoxyCodeLine{00765                                       TlvMode\_Unpainted);}
\DoxyCodeLine{00766   \}}
\DoxyCodeLine{00767   \textcolor{comment}{// For unknown reasons, calling adjustSize twice is needed to}}
\DoxyCodeLine{00768   \textcolor{comment}{// prevent the dialog from remaining large size when the current}}
\DoxyCodeLine{00769   \textcolor{comment}{// format is switched from tlv to another format.}}
\DoxyCodeLine{00770   adjustSize();}
\DoxyCodeLine{00771   adjustSize();}
\DoxyCodeLine{00772 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_ac444fb5ad343f30266412a87679e1c16}\label{class_convert_popup_ac444fb5ad343f30266412a87679e1c16}} 
\index{ConvertPopup@{ConvertPopup}!onLevelConverted@{onLevelConverted}}
\index{onLevelConverted@{onLevelConverted}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{onLevelConverted}{onLevelConverted}}
{\footnotesize\ttfamily void Convert\+Popup\+::on\+Level\+Converted (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{full\+Path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01264                                                              \{}
\DoxyCodeLine{01265   IconGenerator::instance()-\/>invalidate(fullPath);}
\DoxyCodeLine{01266 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_a492fc4c44ab6fb231e69e24cc2162ea8}\label{class_convert_popup_a492fc4c44ab6fb231e69e24cc2162ea8}} 
\index{ConvertPopup@{ConvertPopup}!onOptionsClicked@{onOptionsClicked}}
\index{onOptionsClicked@{onOptionsClicked}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{onOptionsClicked}{onOptionsClicked}}
{\footnotesize\ttfamily void Convert\+Popup\+::on\+Options\+Clicked (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01279                                     \{}
\DoxyCodeLine{01280   std::string ext       = m\_fileFormat-\/>currentText().toStdString();}
\DoxyCodeLine{01281   \mbox{\hyperlink{class_t_property_group}{TPropertyGroup}} *props = getFormatProperties(ext);}
\DoxyCodeLine{01282 }
\DoxyCodeLine{01283   openFormatSettingsPopup(}
\DoxyCodeLine{01284       \textcolor{keyword}{this}, ext, props,}
\DoxyCodeLine{01285       m\_srcFilePaths.size() == 1 ? m\_srcFilePaths[0] : \mbox{\hyperlink{class_t_file_path}{TFilePath}}());}
\DoxyCodeLine{01286 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_a9e4435372638ceab30c5edda3fb83933}\label{class_convert_popup_a9e4435372638ceab30c5edda3fb83933}} 
\index{ConvertPopup@{ConvertPopup}!onPalettePathChanged@{onPalettePathChanged}}
\index{onPalettePathChanged@{onPalettePathChanged}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{onPalettePathChanged}{onPalettePathChanged}}
{\footnotesize\ttfamily void Convert\+Popup\+::on\+Palette\+Path\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01303                                         \{}
\DoxyCodeLine{01304   m\_removeUnusedStyles-\/>setEnabled(}
\DoxyCodeLine{01305       m\_tlvMode-\/>currentText() == TlvMode\_PaintedFromNonAA \&\&}
\DoxyCodeLine{01306       m\_palettePath-\/>getPath() != CreateNewPalette);}
\DoxyCodeLine{01307 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_a7627cbe700cd1da8d085a070198ded7c}\label{class_convert_popup_a7627cbe700cd1da8d085a070198ded7c}} 
\index{ConvertPopup@{ConvertPopup}!onRangeChanged@{onRangeChanged}}
\index{onRangeChanged@{onRangeChanged}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{onRangeChanged}{onRangeChanged}}
{\footnotesize\ttfamily void Convert\+Popup\+::on\+Range\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00684                                   \{}
\DoxyCodeLine{00685   \textcolor{keywordflow}{if} (m\_srcFilePaths.empty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00686 }
\DoxyCodeLine{00687   \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}} lr = \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}}(m\_srcFilePaths[0]);}
\DoxyCodeLine{00688   \textcolor{keywordflow}{if} (lr) \{}
\DoxyCodeLine{00689     \mbox{\hyperlink{class_t_level_p}{TLevelP}} l        = lr-\/>loadInfo();}
\DoxyCodeLine{00690     TLevel::Table *t = l-\/>getTable();}
\DoxyCodeLine{00691     \textcolor{keywordflow}{if} (t-\/>empty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00692     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} start = t-\/>begin()-\/>first;}
\DoxyCodeLine{00693     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} end   = t-\/>rbegin()-\/>first;}
\DoxyCodeLine{00694     \textcolor{keywordflow}{if} (m\_toFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit_a77019c5d6bce534fdd1931136a6efe95}{getValue}}() > end.getNumber())}
\DoxyCodeLine{00695       m\_toFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit_ac16f2b6d59faec8c3f73944f01e46f53}{setValue}}(end.getNumber() != -\/2 ? end.getNumber() : 1);}
\DoxyCodeLine{00696     \textcolor{keywordflow}{if} (m\_fromFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit_a77019c5d6bce534fdd1931136a6efe95}{getValue}}() < start.getNumber())}
\DoxyCodeLine{00697       m\_fromFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit_ac16f2b6d59faec8c3f73944f01e46f53}{setValue}}(start.getNumber());}
\DoxyCodeLine{00698   \}}
\DoxyCodeLine{00699 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_a1d4f7a15f4775d5f11a77c08971808d6}\label{class_convert_popup_a1d4f7a15f4775d5f11a77c08971808d6}} 
\index{ConvertPopup@{ConvertPopup}!onTlvModeSelected@{onTlvModeSelected}}
\index{onTlvModeSelected@{onTlvModeSelected}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{onTlvModeSelected}{onTlvModeSelected}}
{\footnotesize\ttfamily void Convert\+Popup\+::on\+Tlv\+Mode\+Selected (\begin{DoxyParamCaption}\item[{const QString \&}]{tlv\+Mode }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00723                                                            \{}
\DoxyCodeLine{00724   \textcolor{keywordtype}{bool} usesTwoImages = TlvMode\_PaintedFromTwoImages == tlvMode;}
\DoxyCodeLine{00725   m\_unpaintedFolderLabel-\/>setEnabled(usesTwoImages);}
\DoxyCodeLine{00726   m\_unpaintedFolder-\/>setEnabled(usesTwoImages);}
\DoxyCodeLine{00727   m\_suffixLabel-\/>setEnabled(usesTwoImages);}
\DoxyCodeLine{00728   m\_unpaintedSuffix-\/>setEnabled(usesTwoImages);}
\DoxyCodeLine{00729   m\_antialias-\/>setEnabled(TlvMode\_PaintedFromNonAA != tlvMode);}
\DoxyCodeLine{00730   \textcolor{comment}{// m\_palettePath-\/>setEnabled(TlvMode\_PaintedFromNonAA != tlvMode);}}
\DoxyCodeLine{00731   m\_tolerance-\/>setEnabled(TlvMode\_PaintedFromNonAA != tlvMode);}
\DoxyCodeLine{00732   m\_appendDefaultPalette-\/>setEnabled(TlvMode\_PaintedFromNonAA != tlvMode);}
\DoxyCodeLine{00733 }
\DoxyCodeLine{00734   m\_removeUnusedStyles-\/>setEnabled(TlvMode\_PaintedFromNonAA == tlvMode \&\&}
\DoxyCodeLine{00735                                    m\_palettePath-\/>getPath() !=}
\DoxyCodeLine{00736                                        CreateNewPalette);}
\DoxyCodeLine{00737 }
\DoxyCodeLine{00738   m\_saveBackupToNopaint-\/>setEnabled(TlvMode\_Unpainted == tlvMode);}
\DoxyCodeLine{00739 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_ac70093069c14493bbda1c8f181d15fb1}\label{class_convert_popup_ac70093069c14493bbda1c8f181d15fb1}} 
\index{ConvertPopup@{ConvertPopup}!readUserProvidedPalette@{readUserProvidedPalette}}
\index{readUserProvidedPalette@{readUserProvidedPalette}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{readUserProvidedPalette()}{readUserProvidedPalette()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$ Convert\+Popup\+::read\+User\+Provided\+Palette (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01080                                                       \{}
\DoxyCodeLine{01081   \textcolor{keywordflow}{if} (m\_palettePath-\/>getPath() == CreateNewPalette ||}
\DoxyCodeLine{01082       m\_fileFormat-\/>currentText() != TlvExtension)}
\DoxyCodeLine{01083     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{01084 }
\DoxyCodeLine{01085   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *sc = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{01086   \mbox{\hyperlink{class_t_file_path}{TFilePath}} palettePath =}
\DoxyCodeLine{01087       sc-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(m\_palettePath-\/>getPath().toStdString()));}
\DoxyCodeLine{01088   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = 0;}
\DoxyCodeLine{01089   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01090     \mbox{\hyperlink{class_t_i_stream}{TIStream}} is(palettePath);}
\DoxyCodeLine{01091     is >> palette;}
\DoxyCodeLine{01092     \textcolor{comment}{// note! refCount==0}}
\DoxyCodeLine{01093   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{01094     DVGui::warning(}
\DoxyCodeLine{01095         tr(\textcolor{stringliteral}{"{}Warning: Can't read palette '\%1' "{}}).arg(m\_palettePath-\/>getPath()));}
\DoxyCodeLine{01096     \textcolor{keywordflow}{if} (palette) \{}
\DoxyCodeLine{01097       \textcolor{keyword}{delete} palette;}
\DoxyCodeLine{01098       palette = 0;}
\DoxyCodeLine{01099     \}}
\DoxyCodeLine{01100   \}}
\DoxyCodeLine{01101   \textcolor{keywordflow}{return} palette;}
\DoxyCodeLine{01102 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert_popup_af10d28c6771ac44fe49922168180e8ae}\label{class_convert_popup_af10d28c6771ac44fe49922168180e8ae}} 
\index{ConvertPopup@{ConvertPopup}!setFiles@{setFiles}}
\index{setFiles@{setFiles}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{setFiles()}{setFiles()}}
{\footnotesize\ttfamily void Convert\+Popup\+::set\+Files (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} $>$ \&}]{fps }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00776                                                            \{}
\DoxyCodeLine{00777   m\_okBtn-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{00778   m\_fileFormat-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{00779   m\_fileFormat-\/>removeItem(m\_fileFormat-\/>findText(\textcolor{stringliteral}{"{}svg"{}}));}
\DoxyCodeLine{00780   m\_fileFormat-\/>removeItem(m\_fileFormat-\/>findText(OldLevelToTlvExtension));}
\DoxyCodeLine{00781 }
\DoxyCodeLine{00782   \textcolor{comment}{// true if the ALL files are full color raster}}
\DoxyCodeLine{00783   \textcolor{keywordtype}{bool} areFullcolor = \textcolor{keyword}{true};}
\DoxyCodeLine{00784 }
\DoxyCodeLine{00785   \textcolor{comment}{// true if AT LEAST ONE file is vector. Since the popup will never open if the}}
\DoxyCodeLine{00786   \textcolor{comment}{// file selection contains both raster and vector file types, we can assume}}
\DoxyCodeLine{00787   \textcolor{comment}{// ALL files are vector if areVector == true.}}
\DoxyCodeLine{00788   \textcolor{keywordtype}{bool} areVector = \textcolor{keyword}{false};}
\DoxyCodeLine{00789   \textcolor{comment}{// For the same logic as the above, true if all files are old levels}}
\DoxyCodeLine{00790   \textcolor{comment}{// (tzp/tzu).}}
\DoxyCodeLine{00791   \textcolor{keywordtype}{bool} areOldLevel = \textcolor{keyword}{false};}
\DoxyCodeLine{00792 }
\DoxyCodeLine{00793   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)fps.size(); i++) \{}
\DoxyCodeLine{00794     TFileType::Type type = TFileType::getInfo(fps[i]);}
\DoxyCodeLine{00795     \textcolor{keywordflow}{if} (!TFileType::isFullColor(type)) \{}
\DoxyCodeLine{00796       areFullcolor = \textcolor{keyword}{false};}
\DoxyCodeLine{00797       \textcolor{keywordflow}{if} (TFileType::isVector(type))}
\DoxyCodeLine{00798         areVector = \textcolor{keyword}{true};}
\DoxyCodeLine{00799       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (fps[i].getType() == \textcolor{stringliteral}{"{}tzp"{}} || fps[i].getType() == \textcolor{stringliteral}{"{}tzu"{}})}
\DoxyCodeLine{00800         areOldLevel = \textcolor{keyword}{true};}
\DoxyCodeLine{00801       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00802     \}}
\DoxyCodeLine{00803   \}}
\DoxyCodeLine{00804 }
\DoxyCodeLine{00805   \textcolor{keywordtype}{int} currIndex = m\_fileFormat-\/>currentIndex();}
\DoxyCodeLine{00806   \textcolor{keywordtype}{int} tlvIndex  = m\_fileFormat-\/>findText(TlvExtension);}
\DoxyCodeLine{00807 }
\DoxyCodeLine{00808   \textcolor{keywordflow}{if} (areFullcolor) \{}
\DoxyCodeLine{00809     \textcolor{keywordflow}{if} (tlvIndex < 0) m\_fileFormat-\/>addItem(TlvExtension);}
\DoxyCodeLine{00810 }
\DoxyCodeLine{00811   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (areVector) \{}
\DoxyCodeLine{00812     \textcolor{keywordtype}{int} svgIndex = m\_fileFormat-\/>findText(\textcolor{stringliteral}{"{}svg"{}});}
\DoxyCodeLine{00813     \textcolor{keywordflow}{if} (svgIndex < 0) m\_fileFormat-\/>addItem(\textcolor{stringliteral}{"{}svg"{}});}
\DoxyCodeLine{00814     m\_fileFormat-\/>setCurrentIndex(m\_fileFormat-\/>findText(\textcolor{stringliteral}{"{}svg"{}}));}
\DoxyCodeLine{00815     m\_fileFormat-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{00816     onFormatSelected(\textcolor{stringliteral}{"{}svg"{}});}
\DoxyCodeLine{00817   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (areOldLevel) \{}
\DoxyCodeLine{00818     \textcolor{keywordflow}{if} (tlvIndex < 0) m\_fileFormat-\/>addItem(OldLevelToTlvExtension);}
\DoxyCodeLine{00819     m\_fileFormat-\/>setCurrentIndex(}
\DoxyCodeLine{00820         m\_fileFormat-\/>findText(OldLevelToTlvExtension));}
\DoxyCodeLine{00821     m\_fileFormat-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{00822     onFormatSelected(OldLevelToTlvExtension);}
\DoxyCodeLine{00823   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00824     \textcolor{keywordflow}{if} (tlvIndex >= 0) \{}
\DoxyCodeLine{00825       \textcolor{keywordtype}{int} index = m\_fileFormat-\/>currentIndex();}
\DoxyCodeLine{00826       m\_fileFormat-\/>removeItem(tlvIndex);}
\DoxyCodeLine{00827     \}}
\DoxyCodeLine{00828   \}}
\DoxyCodeLine{00829 }
\DoxyCodeLine{00830   m\_srcFilePaths = fps;}
\DoxyCodeLine{00831 }
\DoxyCodeLine{00832   m\_imageDpi = 0.0;}
\DoxyCodeLine{00833 }
\DoxyCodeLine{00834   \textcolor{keywordflow}{if} (m\_srcFilePaths.size() == 1) \{}
\DoxyCodeLine{00835     setWindowTitle(tr(\textcolor{stringliteral}{"{}Convert 1 Level"{}}));}
\DoxyCodeLine{00836     m\_fileNameFld-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{00837 }
\DoxyCodeLine{00838     m\_fromFld-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{00839     m\_toFld-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{00840     m\_fromFld-\/>setText(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00841     m\_toFld-\/>setText(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00842     \mbox{\hyperlink{class_t_level_p}{TLevelP}} levelTmp;}
\DoxyCodeLine{00843     \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}} lrTmp = \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}}(fps[0]);}
\DoxyCodeLine{00844     \textcolor{keywordflow}{if} (lrTmp) \{}
\DoxyCodeLine{00845       levelTmp         = lrTmp-\/>loadInfo();}
\DoxyCodeLine{00846       TLevel::Table *t = levelTmp-\/>getTable();}
\DoxyCodeLine{00847       \textcolor{keywordflow}{if} (!t-\/>empty()) \{}
\DoxyCodeLine{00848         \mbox{\hyperlink{class_t_frame_id}{TFrameId}} start = t-\/>begin()-\/>first;}
\DoxyCodeLine{00849         \mbox{\hyperlink{class_t_frame_id}{TFrameId}} end   = t-\/>rbegin()-\/>first;}
\DoxyCodeLine{00850         \textcolor{keywordflow}{if} (start.getNumber() >= 0 \&\& end.getNumber() >= 0) \{}
\DoxyCodeLine{00851           m\_fromFld-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{00852           m\_toFld-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{00853           m\_fromFld-\/>setText(QString::number(start.getNumber()));}
\DoxyCodeLine{00854           m\_toFld-\/>setText(QString::number(end.getNumber()));}
\DoxyCodeLine{00855         \}}
\DoxyCodeLine{00856       \}}
\DoxyCodeLine{00857 }
\DoxyCodeLine{00858       \textcolor{comment}{// use the image dpi for the converted tlv}}
\DoxyCodeLine{00859       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_image_info}{TImageInfo}} *ii = lrTmp-\/>getImageInfo();}
\DoxyCodeLine{00860       \textcolor{keywordflow}{if} (ii)}
\DoxyCodeLine{00861         m\_imageDpi = ii-\/>\mbox{\hyperlink{class_t_image_info_ad66e78a66158fddceaa192d0063f68e8}{m\_dpix}};  \textcolor{comment}{// for now, consider only the horizontal dpi}}
\DoxyCodeLine{00862     \}}
\DoxyCodeLine{00863     \textcolor{comment}{// m\_fromFld-\/>setText("{}1"{});}}
\DoxyCodeLine{00864     \textcolor{comment}{// m\_toFld-\/>setText(QString::number(levelTmp-\/>getFrameCount()==-\/2?1:levelTmp-\/>getFrameCount()));}}
\DoxyCodeLine{00865 }
\DoxyCodeLine{00866     m\_fileNameFld-\/>setText(QString::fromStdString(fps[0].getName()));}
\DoxyCodeLine{00867   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00868     setWindowTitle(tr(\textcolor{stringliteral}{"{}Convert \%1 Levels"{}}).arg(m\_srcFilePaths.size()));}
\DoxyCodeLine{00869     m\_fromFld-\/>setText(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00870     m\_toFld-\/>setText(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00871     m\_fileNameFld-\/>setText(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00872     m\_fromFld-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{00873     m\_toFld-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{00874     m\_fileNameFld-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{00875   \}}
\DoxyCodeLine{00876   m\_saveInFileFld-\/>setPath(toQString(fps[0].getParentDir()));}
\DoxyCodeLine{00877   \textcolor{comment}{// if (m\_unpaintedFolder-\/>getPath()==SameAsPainted)}}
\DoxyCodeLine{00878   \textcolor{comment}{//   m\_unpaintedFolder-\/>setPath(toQString(fps[0].getParentDir()));}}
\DoxyCodeLine{00879   m\_palettePath-\/>setPath(CreateNewPalette);}
\DoxyCodeLine{00880   m\_removeUnusedStyles-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{00881 }
\DoxyCodeLine{00882   \textcolor{comment}{// update the image dpi field}}
\DoxyCodeLine{00883   onDpiModeSelected(m\_dpiMode-\/>currentIndex());}
\DoxyCodeLine{00884   \textcolor{comment}{// m\_fileFormat-\/>setCurrentIndex(areFullcolor?0:m\_fileFormat-\/>findText("{}tif"{}));}}
\DoxyCodeLine{00885 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_convert_popup_af95005153598191e07d7ca6befdf7763}\label{class_convert_popup_af95005153598191e07d7ca6befdf7763}} 
\index{ConvertPopup@{ConvertPopup}!CreateNewPalette@{CreateNewPalette}}
\index{CreateNewPalette@{CreateNewPalette}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{CreateNewPalette}{CreateNewPalette}}
{\footnotesize\ttfamily QString Convert\+Popup\+::\+Create\+New\+Palette}

\mbox{\Hypertarget{class_convert_popup_a24a4ce3faafd473cf1089ebb209e669d}\label{class_convert_popup_a24a4ce3faafd473cf1089ebb209e669d}} 
\index{ConvertPopup@{ConvertPopup}!SameAsPainted@{SameAsPainted}}
\index{SameAsPainted@{SameAsPainted}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{SameAsPainted}{SameAsPainted}}
{\footnotesize\ttfamily QString Convert\+Popup\+::\+Same\+As\+Painted}

\mbox{\Hypertarget{class_convert_popup_a20e0983540e416354027f0491a510583}\label{class_convert_popup_a20e0983540e416354027f0491a510583}} 
\index{ConvertPopup@{ConvertPopup}!TlvMode\_PaintedFromNonAA@{TlvMode\_PaintedFromNonAA}}
\index{TlvMode\_PaintedFromNonAA@{TlvMode\_PaintedFromNonAA}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{TlvMode\_PaintedFromNonAA}{TlvMode\_PaintedFromNonAA}}
{\footnotesize\ttfamily QString Convert\+Popup\+::\+Tlv\+Mode\+\_\+\+Painted\+From\+Non\+AA}

\mbox{\Hypertarget{class_convert_popup_a8453bb7c140de3fb070d1ddb9896b9b3}\label{class_convert_popup_a8453bb7c140de3fb070d1ddb9896b9b3}} 
\index{ConvertPopup@{ConvertPopup}!TlvMode\_PaintedFromTwoImages@{TlvMode\_PaintedFromTwoImages}}
\index{TlvMode\_PaintedFromTwoImages@{TlvMode\_PaintedFromTwoImages}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{TlvMode\_PaintedFromTwoImages}{TlvMode\_PaintedFromTwoImages}}
{\footnotesize\ttfamily QString Convert\+Popup\+::\+Tlv\+Mode\+\_\+\+Painted\+From\+Two\+Images}

\mbox{\Hypertarget{class_convert_popup_ad94c3052883dee2524d95165a3d20ca1}\label{class_convert_popup_ad94c3052883dee2524d95165a3d20ca1}} 
\index{ConvertPopup@{ConvertPopup}!TlvMode\_Unpainted@{TlvMode\_Unpainted}}
\index{TlvMode\_Unpainted@{TlvMode\_Unpainted}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{TlvMode\_Unpainted}{TlvMode\_Unpainted}}
{\footnotesize\ttfamily QString Convert\+Popup\+::\+Tlv\+Mode\+\_\+\+Unpainted}

\mbox{\Hypertarget{class_convert_popup_af48542caa1dcd3976e917e052aa8aff3}\label{class_convert_popup_af48542caa1dcd3976e917e052aa8aff3}} 
\index{ConvertPopup@{ConvertPopup}!TlvMode\_UnpaintedFromNonAA@{TlvMode\_UnpaintedFromNonAA}}
\index{TlvMode\_UnpaintedFromNonAA@{TlvMode\_UnpaintedFromNonAA}!ConvertPopup@{ConvertPopup}}
\doxysubsubsection{\texorpdfstring{TlvMode\_UnpaintedFromNonAA}{TlvMode\_UnpaintedFromNonAA}}
{\footnotesize\ttfamily QString Convert\+Popup\+::\+Tlv\+Mode\+\_\+\+Unpainted\+From\+Non\+AA}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/convertpopup.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/convertpopup.\+cpp\end{DoxyCompactItemize}
