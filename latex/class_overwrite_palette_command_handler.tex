\hypertarget{class_overwrite_palette_command_handler}{}\doxysection{Overwrite\+Palette\+Command\+Handler Class Reference}
\label{class_overwrite_palette_command_handler}\index{OverwritePaletteCommandHandler@{OverwritePaletteCommandHandler}}
Inheritance diagram for Overwrite\+Palette\+Command\+Handler\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_overwrite_palette_command_handler}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_overwrite_palette_command_handler_a28a31339853581ae40380459f16da8bd}{execute}} () override
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_overwrite_palette_command_handler_afc2ad8b3a25088b9ed310892d9b4c63b}\label{class_overwrite_palette_command_handler_afc2ad8b3a25088b9ed310892d9b4c63b}} 
\index{OverwritePaletteCommandHandler@{OverwritePaletteCommandHandler}!OverwritePaletteCommandHandler@{OverwritePaletteCommandHandler}}
\index{OverwritePaletteCommandHandler@{OverwritePaletteCommandHandler}!OverwritePaletteCommandHandler@{OverwritePaletteCommandHandler}}
\doxysubsubsection{\texorpdfstring{OverwritePaletteCommandHandler()}{OverwritePaletteCommandHandler()}}
{\footnotesize\ttfamily Overwrite\+Palette\+Command\+Handler\+::\+Overwrite\+Palette\+Command\+Handler (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{03018 : \mbox{\hyperlink{class_menu_item_handler}{MenuItemHandler}}(MI\_OverwritePalette) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_overwrite_palette_command_handler_a28a31339853581ae40380459f16da8bd}\label{class_overwrite_palette_command_handler_a28a31339853581ae40380459f16da8bd}} 
\index{OverwritePaletteCommandHandler@{OverwritePaletteCommandHandler}!execute@{execute}}
\index{execute@{execute}!OverwritePaletteCommandHandler@{OverwritePaletteCommandHandler}}
\doxysubsubsection{\texorpdfstring{execute()}{execute()}}
{\footnotesize\ttfamily void Overwrite\+Palette\+Command\+Handler\+::execute (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_menu_item_handler}{Menu\+Item\+Handler}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{03020                           \{}
\DoxyCodeLine{03021     \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getLevel();}
\DoxyCodeLine{03022     \textcolor{keywordflow}{if} (!level) \{}
\DoxyCodeLine{03023       DVGui::warning(\textcolor{stringliteral}{"{}No current level."{}});}
\DoxyCodeLine{03024       \textcolor{keywordflow}{return};}
\DoxyCodeLine{03025     \}}
\DoxyCodeLine{03026     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl  = level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{03027     \mbox{\hyperlink{class_t_xsh_palette_level}{TXshPaletteLevel}} *pl = level-\/>\mbox{\hyperlink{class_t_xsh_level_afdbb7e1664b681225414f59317a32b74}{getPaletteLevel}}();}
\DoxyCodeLine{03028     \textcolor{keywordflow}{if} (!sl \&\& !pl) \{}
\DoxyCodeLine{03029       DVGui::warning(\textcolor{stringliteral}{"{}Current level has no palette."{}});}
\DoxyCodeLine{03030       \textcolor{keywordflow}{return};}
\DoxyCodeLine{03031     \}}
\DoxyCodeLine{03032     \textcolor{comment}{/*-\/-\/ SimpleLevel/PaletteLevelの場合毎にパレット/パスの取得の仕方を変える}}
\DoxyCodeLine{03033 \textcolor{comment}{     * -\/-\/*/}}
\DoxyCodeLine{03034     \mbox{\hyperlink{class_t_palette}{TPalette}} *palette;}
\DoxyCodeLine{03035     \mbox{\hyperlink{class_t_file_path}{TFilePath}} palettePath;}
\DoxyCodeLine{03036     \textcolor{comment}{/*-\/ SimpleLevelの場合 -\/*/}}
\DoxyCodeLine{03037     \textcolor{keywordflow}{if} (sl) \{}
\DoxyCodeLine{03038       palette = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}();}
\DoxyCodeLine{03039       \textcolor{keywordflow}{if} (!palette) \{}
\DoxyCodeLine{03040         DVGui::warning(\textcolor{stringliteral}{"{}No current palette"{}});}
\DoxyCodeLine{03041         \textcolor{keywordflow}{return};}
\DoxyCodeLine{03042       \}}
\DoxyCodeLine{03043       \textcolor{keywordflow}{if} (sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}().\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}pli"{}})}
\DoxyCodeLine{03044         palettePath = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}();}
\DoxyCodeLine{03045       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() \& FULLCOLOR\_TYPE)}
\DoxyCodeLine{03046         palettePath = FullColorPalette::instance()-\/>getPath();}
\DoxyCodeLine{03047       \textcolor{keywordflow}{else}}
\DoxyCodeLine{03048         palettePath = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}().\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(\textcolor{stringliteral}{"{}tpl"{}});}
\DoxyCodeLine{03049     \}}
\DoxyCodeLine{03050     \textcolor{comment}{/*-\/ PaletteLevelの場合 -\/*/}}
\DoxyCodeLine{03051     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (pl) \{}
\DoxyCodeLine{03052       palette = pl-\/>\mbox{\hyperlink{class_t_xsh_palette_level_a10f4de1fc40ba426ff7d93f548fae83d}{getPalette}}();}
\DoxyCodeLine{03053       \textcolor{keywordflow}{if} (!palette) \{}
\DoxyCodeLine{03054         DVGui::warning(\textcolor{stringliteral}{"{}No current palette"{}});}
\DoxyCodeLine{03055         \textcolor{keywordflow}{return};}
\DoxyCodeLine{03056       \}}
\DoxyCodeLine{03057       palettePath = pl-\/>\mbox{\hyperlink{class_t_xsh_palette_level_a01ec7fba4a06e19887cf52897388fb8b}{getPath}}();}
\DoxyCodeLine{03058     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{03059       DVGui::warning(\textcolor{stringliteral}{"{}This level is not SimpleLevel or PaletteLevel"{}});}
\DoxyCodeLine{03060       \textcolor{keywordflow}{return};}
\DoxyCodeLine{03061     \}}
\DoxyCodeLine{03062 }
\DoxyCodeLine{03063     QString question;}
\DoxyCodeLine{03064     \textcolor{keywordtype}{int} ret;}
\DoxyCodeLine{03065     \textcolor{keywordflow}{if} (sl \&\& sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}().\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}pli"{}}) \{}
\DoxyCodeLine{03066       question = \textcolor{stringliteral}{"{}Saving "{}} + toQString(palettePath) +}
\DoxyCodeLine{03067                  \textcolor{stringliteral}{"{}\(\backslash\)nThis command will overwrite the level data as well.  Are "{}}}
\DoxyCodeLine{03068                  \textcolor{stringliteral}{"{}you sure ?"{}};}
\DoxyCodeLine{03069       ret =}
\DoxyCodeLine{03070           DVGui::MsgBox(question, QObject::tr(\textcolor{stringliteral}{"{}OK"{}}), QObject::tr(\textcolor{stringliteral}{"{}Cancel"{}}), 0);}
\DoxyCodeLine{03071     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{03072       question = \textcolor{stringliteral}{"{}Do you want to overwrite current palette to "{}} +}
\DoxyCodeLine{03073                  toQString(palettePath) + \textcolor{stringliteral}{"{} ?"{}};}
\DoxyCodeLine{03074       ret = DVGui::MsgBox(question, QObject::tr(\textcolor{stringliteral}{"{}Overwrite"{}}),}
\DoxyCodeLine{03075                           QObject::tr(\textcolor{stringliteral}{"{}Don't Overwrite"{}}), 0);}
\DoxyCodeLine{03076     \}}
\DoxyCodeLine{03077     \textcolor{keywordflow}{if} (ret == 2 || ret == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03078 }
\DoxyCodeLine{03079     \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{03080     \textcolor{keywordflow}{if} (!palettePath.isAbsolute() \&\& scene) \{}
\DoxyCodeLine{03081       palettePath = scene-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(palettePath);}
\DoxyCodeLine{03082     \}}
\DoxyCodeLine{03083 }
\DoxyCodeLine{03084     \textcolor{keywordflow}{if} (sl \&\& sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}().\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}pli"{}})}
\DoxyCodeLine{03085       sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a5ceff3b4f997fbe62be18948fc893404}{save}}(palettePath, \mbox{\hyperlink{class_t_file_path}{TFilePath}}(), \textcolor{keyword}{true});}
\DoxyCodeLine{03086     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (sl \&\& sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() \& FULLCOLOR\_TYPE)}
\DoxyCodeLine{03087       FullColorPalette::instance()-\/>savePalette(scene);}
\DoxyCodeLine{03088     \textcolor{keywordflow}{else}}
\DoxyCodeLine{03089       StudioPalette::instance()-\/>save(palettePath, palette);}
\DoxyCodeLine{03090     \textcolor{comment}{/*-\/ Dirtyフラグの変更 -\/*/}}
\DoxyCodeLine{03091     \textcolor{keywordflow}{if} (sl)}
\DoxyCodeLine{03092       sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}()-\/>\mbox{\hyperlink{class_t_palette_a382fa102abee4e69e386cb5a4d8d5184}{setDirtyFlag}}(\textcolor{keyword}{false});}
\DoxyCodeLine{03093     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (pl)}
\DoxyCodeLine{03094       pl-\/>\mbox{\hyperlink{class_t_xsh_palette_level_a10f4de1fc40ba426ff7d93f548fae83d}{getPalette}}()-\/>\mbox{\hyperlink{class_t_palette_a382fa102abee4e69e386cb5a4d8d5184}{setDirtyFlag}}(\textcolor{keyword}{false});}
\DoxyCodeLine{03095 }
\DoxyCodeLine{03096     \textcolor{keywordflow}{if} (Preferences::instance()-\/>getBoolValue(resetUndoOnSavingLevel))}
\DoxyCodeLine{03097       TUndoManager::manager()-\/>reset();}
\DoxyCodeLine{03098 }
\DoxyCodeLine{03099     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()}
\DoxyCodeLine{03100         -\/>getPaletteController()}
\DoxyCodeLine{03101         -\/>getCurrentLevelPalette()}
\DoxyCodeLine{03102         -\/>notifyPaletteDirtyFlagChanged();}
\DoxyCodeLine{03103   \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/iocommand.\+cpp\end{DoxyCompactItemize}
