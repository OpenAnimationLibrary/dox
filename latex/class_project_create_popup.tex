\hypertarget{class_project_create_popup}{}\doxysection{Project\+Create\+Popup Class Reference}
\label{class_project_create_popup}\index{ProjectCreatePopup@{ProjectCreatePopup}}


The \mbox{\hyperlink{class_project_create_popup}{Project\+Create\+Popup}} class provides a modal dialog to create a new project.  


Inheritance diagram for Project\+Create\+Popup\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4.000000cm]{class_project_create_popup}
\end{center}
\end{figure}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_project_create_popup_a2941c18a994ddc288c077b59d1a9cef9}{create\+Project}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_project_create_popup_a291ca08adb8c20e693d6daa2ef3bbe7d}{show\+Event}} (QShow\+Event $\ast$) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{class_project_create_popup}{Project\+Create\+Popup}} class provides a modal dialog to create a new project. 

\begin{DoxyVerb}         Inherits \b ProjectPopup.
\end{DoxyVerb}
 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_project_create_popup_aa579a14ffe54853e530fbdf2bc4db865}\label{class_project_create_popup_aa579a14ffe54853e530fbdf2bc4db865}} 
\index{ProjectCreatePopup@{ProjectCreatePopup}!ProjectCreatePopup@{ProjectCreatePopup}}
\index{ProjectCreatePopup@{ProjectCreatePopup}!ProjectCreatePopup@{ProjectCreatePopup}}
\doxysubsubsection{\texorpdfstring{ProjectCreatePopup()}{ProjectCreatePopup()}}
{\footnotesize\ttfamily Project\+Create\+Popup\+::\+Project\+Create\+Popup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00653                                        : \mbox{\hyperlink{class_project_popup}{ProjectPopup}}(\textcolor{keyword}{true}) \{}
\DoxyCodeLine{00654   setWindowTitle(tr(\textcolor{stringliteral}{"{}New Project"{}}));}
\DoxyCodeLine{00655 }
\DoxyCodeLine{00656   QPushButton *okBtn = \textcolor{keyword}{new} QPushButton(tr(\textcolor{stringliteral}{"{}OK"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00657   okBtn-\/>setDefault(\textcolor{keyword}{true});}
\DoxyCodeLine{00658   QPushButton *cancelBtn = \textcolor{keyword}{new} QPushButton(tr(\textcolor{stringliteral}{"{}Cancel"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00659   connect(okBtn, SIGNAL(clicked()), \textcolor{keyword}{this}, SLOT(createProject()));}
\DoxyCodeLine{00660   connect(cancelBtn, SIGNAL(clicked()), \textcolor{keyword}{this}, SLOT(reject()));}
\DoxyCodeLine{00661 }
\DoxyCodeLine{00662   m\_buttonLayout-\/>setMargin(0);}
\DoxyCodeLine{00663   m\_buttonLayout-\/>setSpacing(20);}
\DoxyCodeLine{00664   \{}
\DoxyCodeLine{00665     m\_buttonLayout-\/>addStretch();}
\DoxyCodeLine{00666     m\_buttonLayout-\/>addWidget(okBtn);}
\DoxyCodeLine{00667     m\_buttonLayout-\/>addWidget(cancelBtn);}
\DoxyCodeLine{00668   \}}
\DoxyCodeLine{00669 }
\DoxyCodeLine{00670   m\_prjNameLabel-\/>show();}
\DoxyCodeLine{00671   m\_nameFld-\/>show();}
\DoxyCodeLine{00672   m\_choosePrjLabel-\/>hide();}
\DoxyCodeLine{00673   m\_chooseProjectCombo-\/>hide();}
\DoxyCodeLine{00674 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_project_create_popup_a2941c18a994ddc288c077b59d1a9cef9}\label{class_project_create_popup_a2941c18a994ddc288c077b59d1a9cef9}} 
\index{ProjectCreatePopup@{ProjectCreatePopup}!createProject@{createProject}}
\index{createProject@{createProject}!ProjectCreatePopup@{ProjectCreatePopup}}
\doxysubsubsection{\texorpdfstring{createProject}{createProject}}
{\footnotesize\ttfamily void Project\+Create\+Popup\+::create\+Project (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00678                                        \{}
\DoxyCodeLine{00679   \textcolor{keywordflow}{if} (!IoCmd::saveSceneIfNeeded(QObject::tr(\textcolor{stringliteral}{"{}Create project"{}}))) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00680 }
\DoxyCodeLine{00681   QFileInfo fi(m\_nameFld-\/>text());}
\DoxyCodeLine{00682 }
\DoxyCodeLine{00683   \textcolor{keywordflow}{if} (!isValidFileName(fi.baseName())) \{}
\DoxyCodeLine{00684     error(}
\DoxyCodeLine{00685         tr(\textcolor{stringliteral}{"{}Project Name cannot be empty or contain any of the following "{}}}
\DoxyCodeLine{00686            \textcolor{stringliteral}{"{}characters:\(\backslash\)n \(\backslash\)\(\backslash\) / : * ? \(\backslash\)"{} < > |"{}}));}
\DoxyCodeLine{00687     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00688   \}}
\DoxyCodeLine{00689 }
\DoxyCodeLine{00690   \textcolor{keywordflow}{if} (isReservedFileName\_message(fi.baseName())) \{}
\DoxyCodeLine{00691     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00692   \}}
\DoxyCodeLine{00693 }
\DoxyCodeLine{00694   \mbox{\hyperlink{class_t_project_manager}{TProjectManager}} *pm   = \mbox{\hyperlink{class_t_project_manager_a150ca0d6e2eb171b8117b0c5f03dbfad}{TProjectManager::instance}}();}
\DoxyCodeLine{00695   \mbox{\hyperlink{class_t_file_path}{TFilePath}} projectName = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(m\_nameFld-\/>text().toStdWString());}
\DoxyCodeLine{00696   \textcolor{keywordflow}{if} (projectName == \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \{}
\DoxyCodeLine{00697     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00698   \}}
\DoxyCodeLine{00699 }
\DoxyCodeLine{00700   \textcolor{keywordflow}{if} (projectName.isAbsolute()) \{}
\DoxyCodeLine{00701     error(tr(\textcolor{stringliteral}{"{}Bad project name: '\%1' looks like an absolute file path"{}})}
\DoxyCodeLine{00702               .arg(m\_nameFld-\/>text()));}
\DoxyCodeLine{00703     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00704   \}}
\DoxyCodeLine{00705 }
\DoxyCodeLine{00706   \textcolor{keywordflow}{if} (pm-\/>\mbox{\hyperlink{class_t_project_manager_a14225d1945b95c131fd01a724dbcda93}{getProjectPathByName}}(projectName) != \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \{}
\DoxyCodeLine{00707     error(tr(\textcolor{stringliteral}{"{}Project '\%1' already exists"{}}).arg(m\_nameFld-\/>text()));}
\DoxyCodeLine{00708     \textcolor{comment}{// project already exists}}
\DoxyCodeLine{00709     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00710   \}}
\DoxyCodeLine{00711 }
\DoxyCodeLine{00712   \mbox{\hyperlink{class_t_file_path}{TFilePath}} currentProjectRoot;}
\DoxyCodeLine{00713   \mbox{\hyperlink{class_dv_dir_model_file_folder_node}{DvDirModelFileFolderNode}} *node =}
\DoxyCodeLine{00714       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_model_file_folder_node}{DvDirModelFileFolderNode}} *\textcolor{keyword}{>}(m\_treeView-\/>getCurrentNode());}
\DoxyCodeLine{00715   \textcolor{keywordflow}{if} (node)}
\DoxyCodeLine{00716     currentProjectRoot = node-\/>getPath();}
\DoxyCodeLine{00717   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00718     currentProjectRoot = pm-\/>\mbox{\hyperlink{class_t_project_manager_a375e64625585562656747b8a54a71132}{getCurrentProjectRoot}}();}
\DoxyCodeLine{00719 }
\DoxyCodeLine{00720   \mbox{\hyperlink{class_t_file_path}{TFilePath}} projectFolder = currentProjectRoot + projectName;}
\DoxyCodeLine{00721   \mbox{\hyperlink{class_t_file_path}{TFilePath}} projectPath   = pm-\/>\mbox{\hyperlink{class_t_project_manager_a29ae519b44c77674d68c993b7652a896}{projectFolderToProjectPath}}(projectFolder);}
\DoxyCodeLine{00722   \mbox{\hyperlink{class_t_project}{TProject}} *project       = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_project}{TProject}}();}
\DoxyCodeLine{00723   updateProjectFromFields(project);}
\DoxyCodeLine{00724   \mbox{\hyperlink{class_t_smart_pointer_t}{TProjectP}} currentProject = pm-\/>\mbox{\hyperlink{class_t_project_manager_a5267cfeae48d4e7585c3fc56d8d5b0b3}{getCurrentProject}}();}
\DoxyCodeLine{00725   project-\/>\mbox{\hyperlink{class_t_project_af3e83e57d958a700b9b1df276423c00e}{setSceneProperties}}(currentProject-\/>getSceneProperties());}
\DoxyCodeLine{00726   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00727     \textcolor{keywordtype}{bool} isSaved = project-\/>\mbox{\hyperlink{class_t_project_a620a88aa773f5521435d7f53d77e920a}{save}}(projectPath);}
\DoxyCodeLine{00728     \textcolor{keywordflow}{if} (!isSaved)}
\DoxyCodeLine{00729       DVGui::error(tr(\textcolor{stringliteral}{"{}It is not possible to create the \%1 project."{}})}
\DoxyCodeLine{00730                        .arg(toQString(projectPath)));}
\DoxyCodeLine{00731   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_system_exception}{TSystemException}} se) \{}
\DoxyCodeLine{00732     DVGui::warning(QString::fromStdWString(se.getMessage()));}
\DoxyCodeLine{00733     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00734   \}}
\DoxyCodeLine{00735   pm-\/>\mbox{\hyperlink{class_t_project_manager_aa55b362becc698e787db40c822f79bc3}{setCurrentProjectPath}}(projectPath);}
\DoxyCodeLine{00736   IoCmd::newScene();}
\DoxyCodeLine{00737   DvDirModel::instance()-\/>refreshFolder(projectFolder.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}());}
\DoxyCodeLine{00738   accept();}
\DoxyCodeLine{00739 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_project_create_popup_a291ca08adb8c20e693d6daa2ef3bbe7d}\label{class_project_create_popup_a291ca08adb8c20e693d6daa2ef3bbe7d}} 
\index{ProjectCreatePopup@{ProjectCreatePopup}!showEvent@{showEvent}}
\index{showEvent@{showEvent}!ProjectCreatePopup@{ProjectCreatePopup}}
\doxysubsubsection{\texorpdfstring{showEvent()}{showEvent()}}
{\footnotesize\ttfamily void Project\+Create\+Popup\+::show\+Event (\begin{DoxyParamCaption}\item[{QShow\+Event $\ast$}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00743                                                \{}
\DoxyCodeLine{00744   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00745   QString fldName;}
\DoxyCodeLine{00746   \textcolor{keywordflow}{for} (i = 0; i < m\_folderFlds.size(); i++) \{}
\DoxyCodeLine{00747     fldName = QString::fromStdString(m\_folderFlds[i].first);}
\DoxyCodeLine{00748     m\_folderFlds[i].second-\/>setPath(fldName);}
\DoxyCodeLine{00749   \}}
\DoxyCodeLine{00750   \textcolor{keywordflow}{for} (i = 0; i < m\_useScenePathCbs.size(); i++) \{}
\DoxyCodeLine{00751     \mbox{\hyperlink{class_d_v_gui_1_1_check_box}{CheckBox}} *cb                = m\_useScenePathCbs[i].second;}
\DoxyCodeLine{00752     \textcolor{keywordtype}{bool} signalesAlreadyBlocked = cb-\/>blockSignals(\textcolor{keyword}{true});}
\DoxyCodeLine{00753     cb-\/>setChecked(\textcolor{keyword}{false});}
\DoxyCodeLine{00754     cb-\/>blockSignals(signalesAlreadyBlocked);}
\DoxyCodeLine{00755   \}}
\DoxyCodeLine{00756 }
\DoxyCodeLine{00757   m\_nameFld-\/>setText(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00758   \textcolor{comment}{// Must refresh the tree.}}
\DoxyCodeLine{00759   \mbox{\hyperlink{class_dv_dir_model_node}{DvDirModelNode}} *rootNode = m\_model-\/>getNode(QModelIndex());}
\DoxyCodeLine{00760   QModelIndex index        = m\_model-\/>getIndexByNode(rootNode);}
\DoxyCodeLine{00761   m\_model-\/>refreshFolderChild(index);}
\DoxyCodeLine{00762   \textcolor{comment}{// Select the first Item in the treeView}}
\DoxyCodeLine{00763   QItemSelectionModel *selection = \textcolor{keyword}{new} QItemSelectionModel(m\_model);}
\DoxyCodeLine{00764   index                          = m\_model-\/>index(0, 0, QModelIndex());}
\DoxyCodeLine{00765   selection-\/>select(index, QItemSelectionModel::Select);}
\DoxyCodeLine{00766   m\_treeView-\/>setSelectionModel(selection);}
\DoxyCodeLine{00767 }
\DoxyCodeLine{00768   \textcolor{comment}{// default file path settings}}
\DoxyCodeLine{00769   m\_rulePreferenceBG-\/>button(Rule\_Standard)-\/>setChecked(\textcolor{keyword}{true});}
\DoxyCodeLine{00770   m\_acceptNonAlphabetSuffixCB-\/>setChecked(\textcolor{keyword}{false});}
\DoxyCodeLine{00771   m\_letterCountCombo-\/>setCurrentIndex(m\_letterCountCombo-\/>findData(1));}
\DoxyCodeLine{00772 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/projectpopup.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/projectpopup.\+cpp\end{DoxyCompactItemize}
