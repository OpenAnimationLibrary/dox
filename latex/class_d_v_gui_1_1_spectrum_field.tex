\hypertarget{class_d_v_gui_1_1_spectrum_field}{}\doxysection{DVGui\+::Spectrum\+Field Class Reference}
\label{class_d_v_gui_1_1_spectrum_field}\index{DVGui::SpectrumField@{DVGui::SpectrumField}}


The \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_field}{Spectrum\+Field}} class provides an object to display and manage a spectrum.  


Inheritance diagram for DVGui\+::Spectrum\+Field\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_d_v_gui_1_1_spectrum_field}
\end{center}
\end{figure}
\doxysubsection*{Signals}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_field_ad8c034c3fab540693f68b1f31db82777}\label{class_d_v_gui_1_1_spectrum_field_ad8c034c3fab540693f68b1f31db82777}} 
void {\bfseries key\+Color\+Changed} (bool)
\item 
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_field_ad9bb78ff1c982b61e50b0b2cd0ad55b3}\label{class_d_v_gui_1_1_spectrum_field_ad9bb78ff1c982b61e50b0b2cd0ad55b3}} 
void {\bfseries key\+Position\+Changed} (bool)
\item 
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_field_a27593ba3cbf752c9aefe312d11bb2209}\label{class_d_v_gui_1_1_spectrum_field_a27593ba3cbf752c9aefe312d11bb2209}} 
void {\bfseries key\+Added} (int)
\item 
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_field_aea8006d492fd89cb5c08dcdee2d8d205}\label{class_d_v_gui_1_1_spectrum_field_aea8006d492fd89cb5c08dcdee2d8d205}} 
void {\bfseries key\+Removed} (int)
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_field_ad4d05a4273e497c798927d343c127b38}{Spectrum\+Field}} (QWidget $\ast$parent=0, TPixel32 color=TPixel32(0, 0, 0, 255))
\item 
\mbox{\hyperlink{class_t_spectrum_t}{TSpectrum}} \& \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_field_acd098b361124a235cd7dc79372d0a4fa}{get\+Spectrum}} ()
\item 
void \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_field_a6e05d29255e8faee9dc298946b4191e7}{set\+Spectrum}} (\mbox{\hyperlink{class_t_spectrum_t}{TSpectrum}} \&spectrum)
\item 
int \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_field_ad67bf92fbd577925cca6dd17a180531a}{get\+Current\+Key\+Index}} ()
\item 
void \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_field_a686afe1e6a5cfcbac854d1c28708f05d}{set\+Current\+Key\+Index}} (int index)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_field_a62ead2587f1ce7aa5778aa9489e70ef6}{on\+Current\+Pos\+Changed}} (bool is\+Dragging)
\item 
void \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_field_a4f76e7d9b1d6460be3abd53a6d921e64}{on\+Current\+Key\+Changed}} ()
\item 
void \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_field_aa3ab2baa9088ba1f2c8fade20e31bb14}{on\+Color\+Changed}} (const TPixel32 \&color, bool is\+Dragging)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_field_a328f9d202a137bfedaece58185cbbb03}{paint\+Event}} (QPaint\+Event $\ast$e) override
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_field}{Spectrum\+Field}} class provides an object to display and manage a spectrum. 

\begin{DoxyVerb}         Inherits \b QWidget.

         The object is composed of a vertical layout \b QVBoxLayout which
\end{DoxyVerb}
 contains a spectrum bar {\bfseries{\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar}{Spectrum\+Bar}}}} and a color field {\bfseries{\mbox{\hyperlink{class_d_v_gui_1_1_color_field}{Color\+Field}}}}. Using color field it\textquotesingle{}s possible to set spectrum current key color.

{\bfseries{Example\+:}} Spectrum Field.  

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_field_ad4d05a4273e497c798927d343c127b38}\label{class_d_v_gui_1_1_spectrum_field_ad4d05a4273e497c798927d343c127b38}} 
\index{DVGui::SpectrumField@{DVGui::SpectrumField}!SpectrumField@{SpectrumField}}
\index{SpectrumField@{SpectrumField}!DVGui::SpectrumField@{DVGui::SpectrumField}}
\doxysubsubsection{\texorpdfstring{SpectrumField()}{SpectrumField()}}
{\footnotesize\ttfamily Spectrum\+Field\+::\+Spectrum\+Field (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent = {\ttfamily 0},  }\item[{TPixel32}]{color = {\ttfamily TPixel32(0,~0,~0,~255)} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00328     : QWidget(parent), m\_margin(0), m\_spacing(4) \{}
\DoxyCodeLine{00329   setFixedHeight(60);}
\DoxyCodeLine{00330 }
\DoxyCodeLine{00331   QVBoxLayout *layout = \textcolor{keyword}{new} QVBoxLayout();}
\DoxyCodeLine{00332   layout-\/>setMargin(m\_margin);}
\DoxyCodeLine{00333   layout-\/>setSpacing(m\_spacing);}
\DoxyCodeLine{00334 }
\DoxyCodeLine{00335   m\_spectrumbar = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar}{SpectrumBar}}(\textcolor{keyword}{this}, color);}
\DoxyCodeLine{00336   connect(m\_spectrumbar, SIGNAL(currentPosChanged(\textcolor{keywordtype}{bool})),}
\DoxyCodeLine{00337           SLOT(\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_field_a62ead2587f1ce7aa5778aa9489e70ef6}{onCurrentPosChanged}}(\textcolor{keywordtype}{bool})));}
\DoxyCodeLine{00338   connect(m\_spectrumbar, SIGNAL(currentKeyChanged()),}
\DoxyCodeLine{00339           SLOT(\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_field_a4f76e7d9b1d6460be3abd53a6d921e64}{onCurrentKeyChanged}}()));}
\DoxyCodeLine{00340   connect(m\_spectrumbar, SIGNAL(currentKeyAdded(\textcolor{keywordtype}{int})), SIGNAL(keyAdded(\textcolor{keywordtype}{int})));}
\DoxyCodeLine{00341   connect(m\_spectrumbar, SIGNAL(currentKeyRemoved(\textcolor{keywordtype}{int})),}
\DoxyCodeLine{00342           SIGNAL(keyRemoved(\textcolor{keywordtype}{int})));}
\DoxyCodeLine{00343 }
\DoxyCodeLine{00344   layout-\/>addWidget(m\_spectrumbar);}
\DoxyCodeLine{00345 }
\DoxyCodeLine{00346   m\_colorField = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_color_field}{ColorField}}(\textcolor{keyword}{this}, \textcolor{keyword}{true}, color, 36);}
\DoxyCodeLine{00347   connect(m\_colorField, SIGNAL(colorChanged(\textcolor{keyword}{const} TPixel32 \&, \textcolor{keywordtype}{bool})), \textcolor{keyword}{this},}
\DoxyCodeLine{00348           SLOT(\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_field_aa3ab2baa9088ba1f2c8fade20e31bb14}{onColorChanged}}(\textcolor{keyword}{const} TPixel32 \&, \textcolor{keywordtype}{bool})));}
\DoxyCodeLine{00349   layout-\/>addWidget(m\_colorField, 0, Qt::AlignLeft);}
\DoxyCodeLine{00350 }
\DoxyCodeLine{00351   setLayout(layout);}
\DoxyCodeLine{00352 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_field_af49dbb84f2641b15691aba6b38d89b54}\label{class_d_v_gui_1_1_spectrum_field_af49dbb84f2641b15691aba6b38d89b54}} 
\index{DVGui::SpectrumField@{DVGui::SpectrumField}!````~SpectrumField@{$\sim$SpectrumField}}
\index{````~SpectrumField@{$\sim$SpectrumField}!DVGui::SpectrumField@{DVGui::SpectrumField}}
\doxysubsubsection{\texorpdfstring{$\sim$SpectrumField()}{~SpectrumField()}}
{\footnotesize\ttfamily Spectrum\+Field\+::$\sim$\+Spectrum\+Field (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00403 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_field_ad67bf92fbd577925cca6dd17a180531a}\label{class_d_v_gui_1_1_spectrum_field_ad67bf92fbd577925cca6dd17a180531a}} 
\index{DVGui::SpectrumField@{DVGui::SpectrumField}!getCurrentKeyIndex@{getCurrentKeyIndex}}
\index{getCurrentKeyIndex@{getCurrentKeyIndex}!DVGui::SpectrumField@{DVGui::SpectrumField}}
\doxysubsubsection{\texorpdfstring{getCurrentKeyIndex()}{getCurrentKeyIndex()}}
{\footnotesize\ttfamily int DVGui\+::\+Spectrum\+Field\+::get\+Current\+Key\+Index (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00112 \{ \textcolor{keywordflow}{return} m\_spectrumbar-\/>getCurrentKeyIndex(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_field_acd098b361124a235cd7dc79372d0a4fa}\label{class_d_v_gui_1_1_spectrum_field_acd098b361124a235cd7dc79372d0a4fa}} 
\index{DVGui::SpectrumField@{DVGui::SpectrumField}!getSpectrum@{getSpectrum}}
\index{getSpectrum@{getSpectrum}!DVGui::SpectrumField@{DVGui::SpectrumField}}
\doxysubsubsection{\texorpdfstring{getSpectrum()}{getSpectrum()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_spectrum_t}{TSpectrum}} \& DVGui\+::\+Spectrum\+Field\+::get\+Spectrum (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00106 \{ \textcolor{keywordflow}{return} m\_spectrumbar-\/>getSpectrum(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_field_aa3ab2baa9088ba1f2c8fade20e31bb14}\label{class_d_v_gui_1_1_spectrum_field_aa3ab2baa9088ba1f2c8fade20e31bb14}} 
\index{DVGui::SpectrumField@{DVGui::SpectrumField}!onColorChanged@{onColorChanged}}
\index{onColorChanged@{onColorChanged}!DVGui::SpectrumField@{DVGui::SpectrumField}}
\doxysubsubsection{\texorpdfstring{onColorChanged}{onColorChanged}}
{\footnotesize\ttfamily void Spectrum\+Field\+::on\+Color\+Changed (\begin{DoxyParamCaption}\item[{const TPixel32 \&}]{color,  }\item[{bool}]{is\+Dragging }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

Set spectrum current key color to {\bfseries{color}} and emit key\+Color\+Changed(). 
\begin{DoxyCode}{0}
\DoxyCodeLine{00375                                                                          \{}
\DoxyCodeLine{00376   m\_spectrumbar-\/>\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a62baa9a3afedebd4eb6901b33cf53dab}{setCurrentColor}}(color);}
\DoxyCodeLine{00377   emit keyColorChanged(isDragging);}
\DoxyCodeLine{00378 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00120}{DVGui\+::\+Spectrum\+Bar\+::set\+Current\+Color()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_field_a4f76e7d9b1d6460be3abd53a6d921e64}\label{class_d_v_gui_1_1_spectrum_field_a4f76e7d9b1d6460be3abd53a6d921e64}} 
\index{DVGui::SpectrumField@{DVGui::SpectrumField}!onCurrentKeyChanged@{onCurrentKeyChanged}}
\index{onCurrentKeyChanged@{onCurrentKeyChanged}!DVGui::SpectrumField@{DVGui::SpectrumField}}
\doxysubsubsection{\texorpdfstring{onCurrentKeyChanged}{onCurrentKeyChanged}}
{\footnotesize\ttfamily void Spectrum\+Field\+::on\+Current\+Key\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

Set color field to spectrum current key color and update. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00366                                         \{}
\DoxyCodeLine{00367   \textcolor{keywordflow}{if} (m\_spectrumbar-\/>getCurrentKeyIndex() != -\/1)}
\DoxyCodeLine{00368     m\_colorField-\/>setColor(m\_spectrumbar-\/>\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a2ef140653587fb101c6084c7e54f34b3}{getCurrentColor}}());}
\DoxyCodeLine{00369   update();}
\DoxyCodeLine{00370 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00073}{DVGui\+::\+Spectrum\+Bar\+::get\+Current\+Color()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_field_a62ead2587f1ce7aa5778aa9489e70ef6}\label{class_d_v_gui_1_1_spectrum_field_a62ead2587f1ce7aa5778aa9489e70ef6}} 
\index{DVGui::SpectrumField@{DVGui::SpectrumField}!onCurrentPosChanged@{onCurrentPosChanged}}
\index{onCurrentPosChanged@{onCurrentPosChanged}!DVGui::SpectrumField@{DVGui::SpectrumField}}
\doxysubsubsection{\texorpdfstring{onCurrentPosChanged}{onCurrentPosChanged}}
{\footnotesize\ttfamily void Spectrum\+Field\+::on\+Current\+Pos\+Changed (\begin{DoxyParamCaption}\item[{bool}]{is\+Dragging }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

Update all widget and emit key\+Position\+Changed() signal. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00357                                                        \{}
\DoxyCodeLine{00358   \textcolor{keywordflow}{if} (m\_spectrumbar-\/>getCurrentKeyIndex() == -\/1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00359   update();}
\DoxyCodeLine{00360   emit keyPositionChanged(isDragging);}
\DoxyCodeLine{00361 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_field_a328f9d202a137bfedaece58185cbbb03}\label{class_d_v_gui_1_1_spectrum_field_a328f9d202a137bfedaece58185cbbb03}} 
\index{DVGui::SpectrumField@{DVGui::SpectrumField}!paintEvent@{paintEvent}}
\index{paintEvent@{paintEvent}!DVGui::SpectrumField@{DVGui::SpectrumField}}
\doxysubsubsection{\texorpdfstring{paintEvent()}{paintEvent()}}
{\footnotesize\ttfamily void Spectrum\+Field\+::paint\+Event (\begin{DoxyParamCaption}\item[{QPaint\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}

Paint an arrow to connect current spectrum key and square color field. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00383                                              \{}
\DoxyCodeLine{00384   \textcolor{keywordtype}{int} curPos = m\_spectrumbar-\/>\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a20ef1026f9a4f9564b632bcce774b5d8}{getCurrentPos}}();}
\DoxyCodeLine{00385   \textcolor{keywordflow}{if} (curPos == -\/1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00386   QPainter p(\textcolor{keyword}{this});}
\DoxyCodeLine{00387   \textcolor{keywordtype}{int} x0 = 18 + m\_margin;}
\DoxyCodeLine{00388   \textcolor{keywordtype}{int} y0 = 2 * m\_margin + WidgetHeight + m\_spacing;}
\DoxyCodeLine{00389   \textcolor{keywordtype}{int} y  = m\_margin + m\_spacing +}
\DoxyCodeLine{00390           (WidgetHeight * 0.5 -\/}
\DoxyCodeLine{00391            4);  \textcolor{comment}{// 4 e' l'altezza della freccia nella spectrum bar}}
\DoxyCodeLine{00392   \textcolor{keywordtype}{int} y1 = y0 -\/ y * 0.5 + 1;}
\DoxyCodeLine{00393   \textcolor{keywordtype}{int} y2 = y0 -\/ y;}
\DoxyCodeLine{00394   curPos += m\_margin;}
\DoxyCodeLine{00395   p.setPen(Qt::black);}
\DoxyCodeLine{00396   p.drawLine(x0, y0, x0, y1);}
\DoxyCodeLine{00397   p.drawLine(x0, y1, curPos, y1);}
\DoxyCodeLine{00398   p.drawLine(curPos, y1, curPos, y2);}
\DoxyCodeLine{00399 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00065}{DVGui\+::\+Spectrum\+Bar\+::get\+Current\+Pos()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_field_a686afe1e6a5cfcbac854d1c28708f05d}\label{class_d_v_gui_1_1_spectrum_field_a686afe1e6a5cfcbac854d1c28708f05d}} 
\index{DVGui::SpectrumField@{DVGui::SpectrumField}!setCurrentKeyIndex@{setCurrentKeyIndex}}
\index{setCurrentKeyIndex@{setCurrentKeyIndex}!DVGui::SpectrumField@{DVGui::SpectrumField}}
\doxysubsubsection{\texorpdfstring{setCurrentKeyIndex()}{setCurrentKeyIndex()}}
{\footnotesize\ttfamily void DVGui\+::\+Spectrum\+Field\+::set\+Current\+Key\+Index (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00113                                      \{}
\DoxyCodeLine{00114     m\_spectrumbar-\/>\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a99a9a701924d15f1d672c437a965ee84}{setCurrentKeyIndex}}(index);}
\DoxyCodeLine{00115     m\_colorField-\/>setColor(m\_spectrumbar-\/>\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a2ef140653587fb101c6084c7e54f34b3}{getCurrentColor}}());}
\DoxyCodeLine{00116   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_field_a6e05d29255e8faee9dc298946b4191e7}\label{class_d_v_gui_1_1_spectrum_field_a6e05d29255e8faee9dc298946b4191e7}} 
\index{DVGui::SpectrumField@{DVGui::SpectrumField}!setSpectrum@{setSpectrum}}
\index{setSpectrum@{setSpectrum}!DVGui::SpectrumField@{DVGui::SpectrumField}}
\doxysubsubsection{\texorpdfstring{setSpectrum()}{setSpectrum()}}
{\footnotesize\ttfamily void DVGui\+::\+Spectrum\+Field\+::set\+Spectrum (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_spectrum_t}{TSpectrum}} \&}]{spectrum }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00107                                         \{}
\DoxyCodeLine{00108     m\_spectrumbar-\/>setSpectrum(spectrum);}
\DoxyCodeLine{00109     m\_colorField-\/>setColor(m\_spectrumbar-\/>\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a2ef140653587fb101c6084c7e54f34b3}{getCurrentColor}}());}
\DoxyCodeLine{00110   \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonzqt/spectrumfield.\+h\item 
E\+:/opentoonz/toonz/sources/toonzqt/spectrumfield.\+cpp\end{DoxyCompactItemize}
