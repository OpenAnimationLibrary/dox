\hypertarget{class_raster_fx_plugin_host}{}\doxysection{Raster\+Fx\+Plugin\+Host Class Reference}
\label{class_raster_fx_plugin_host}\index{RasterFxPluginHost@{RasterFxPluginHost}}
Inheritance diagram for Raster\+Fx\+Plugin\+Host\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4.000000cm]{class_raster_fx_plugin_host}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_raster_fx_plugin_host_ae9fa9ef22a7529e47caf8e0ef7986f32}{Raster\+Fx\+Plugin\+Host}} (\mbox{\hyperlink{class_plugin_information}{Plugin\+Information}} $\ast$pinfo)
\item 
void \mbox{\hyperlink{class_raster_fx_plugin_host_a243781cb1853b39100933f1d67662cd4}{notify}} ()
\item 
const \mbox{\hyperlink{class_t_persist_declaration}{TPersist\+Declaration}} $\ast$ \mbox{\hyperlink{class_raster_fx_plugin_host_aa72859514ef694e53a708e7d43c2e173}{get\+Declaration}} () const override
\item 
std\+::string \mbox{\hyperlink{class_raster_fx_plugin_host_a2ad74ce4d731864ca6b8e271f480b32d}{get\+Plugin\+Id}} () const override
\item 
bool \mbox{\hyperlink{class_raster_fx_plugin_host_a756504c4804c465986d1075b98670197}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&bbox, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{class_raster_fx_plugin_host_af9096932e1494e6b968f0136f4760a36}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
int \mbox{\hyperlink{class_raster_fx_plugin_host_a804999455cc1b3ba2134fd582e6f5768}{get\+Memory\+Requirement}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
bool \mbox{\hyperlink{class_raster_fx_plugin_host_a283e54c21f73efe8201c79e076f35b08}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\item 
bool \mbox{\hyperlink{class_raster_fx_plugin_host_ad0b5b286d78c752359499182055f5e28}{add\+Input\+Port}} (const std\+::string \&nm, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_t_fx_port}{TFx\+Port}} $>$ port)
\item 
bool \mbox{\hyperlink{class_raster_fx_plugin_host_ab05130a0cd1f66292e095cbf514059c5}{add\+Output\+Port}} (const std\+::string \&nm, \mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} $\ast$port)
\item 
\mbox{\hyperlink{class_t_fx}{TFx}} $\ast$ \mbox{\hyperlink{class_raster_fx_plugin_host_a172f5e6ce0c4fbd92f1c34579718a203}{clone}} (bool recursive) const override
\item 
\mbox{\hyperlink{class_u_i_page}{UIPage}} $\ast$ \mbox{\hyperlink{class_raster_fx_plugin_host_a1479d9689cbf95122fe3f48a5da02c77}{create\+UIPage}} (const char $\ast$name)
\item 
void \mbox{\hyperlink{class_raster_fx_plugin_host_adf0fd8c4dee0f60be7470e5664a87b55}{build}} (\mbox{\hyperlink{class_params_page_set}{Params\+Page\+Set}} $\ast$)
\item 
std\+::string \mbox{\hyperlink{class_raster_fx_plugin_host_af9b2b2a9254bf722c401dac3c9e393db}{get\+Url}} () const
\item 
bool \mbox{\hyperlink{class_raster_fx_plugin_host_ad3838413bd922cc5b13f40b6610c686c}{set\+Param\+Structure}} (int n, \mbox{\hyperlink{structtoonz__param__page__t__}{toonz\+\_\+param\+\_\+page\+\_\+t}} $\ast$descs, int \&err, void $\ast$\&pos)
\item 
bool \mbox{\hyperlink{class_raster_fx_plugin_host_af6ed8b194bb00867decd02e4f920966a}{add\+Port\+Desc}} (\mbox{\hyperlink{structport__description__t}{port\+\_\+description\+\_\+t}} \&\&)
\item 
\mbox{\hyperlink{class_param}{Param}} $\ast$ \mbox{\hyperlink{class_raster_fx_plugin_host_a74203cd20b85a8f11340da1152705ea0}{create\+Param}} (const \mbox{\hyperlink{structtoonz__param__desc__t__}{toonz\+\_\+param\+\_\+desc\+\_\+t}} $\ast$)
\item 
\mbox{\hyperlink{class_param}{Param}} $\ast$ \mbox{\hyperlink{class_raster_fx_plugin_host_ab6f0ab747dcc582589dc2c58c1d2b4c1}{create\+Param}} (const char $\ast$name, toonz\+\_\+param\+\_\+type\+\_\+enum e)
\item 
\mbox{\hyperlink{class_param}{Param}} $\ast$ \mbox{\hyperlink{class_raster_fx_plugin_host_a4cd9499bdf7c46daeb9513694b8b3879}{get\+Param}} (const char $\ast$name) const
\item 
\mbox{\hyperlink{class_param_view}{Param\+View}} $\ast$ \mbox{\hyperlink{class_raster_fx_plugin_host_aa4b7c775f3f7be4656ea32cf24a4d758}{create\+Param\+View}} ()
\item 
bool \mbox{\hyperlink{class_raster_fx_plugin_host_a42b9abb9bd55c104b228aef1a4dd2afb}{is\+Plugin}} () const override
\item 
bool \mbox{\hyperlink{class_raster_fx_plugin_host_adc22c9f4ca5dde425936c3e939150362}{is\+Plugin\+Zerary}} () const override
\item 
bool \mbox{\hyperlink{class_raster_fx_plugin_host_a028c6c750b0ab11608a88fba8393ad05}{is\+Zerary}} () const override
\item 
void \mbox{\hyperlink{class_raster_fx_plugin_host_ac251361e644429db12bfe98c88e9a7c0}{call\+Start\+Render\+Handler}} () override
\item 
void \mbox{\hyperlink{class_raster_fx_plugin_host_ad18f48f90484f1b567da90bfe3554db0}{call\+End\+Render\+Handler}} () override
\item 
void \mbox{\hyperlink{class_raster_fx_plugin_host_a3540ecb41f7e7e68a4a27056cab8e8ae}{call\+Start\+Render\+Frame\+Handler}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} $\ast$rs, double frame) override
\item 
void \mbox{\hyperlink{class_raster_fx_plugin_host_a5e771e929ab4ef4b84082b8f33616e1b}{call\+End\+Render\+Frame\+Handler}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} $\ast$rs, double frame) override
\item 
void $\ast$ \mbox{\hyperlink{class_raster_fx_plugin_host_a5eeab9bba7e777b9c8ade438b720012a}{get\+User\+Data}} ()
\item 
void \mbox{\hyperlink{class_raster_fx_plugin_host_a8562973f7eb98f76638b2263d90cab5b}{set\+User\+Data}} (void $\ast$user\+\_\+data)
\item 
void \mbox{\hyperlink{class_raster_fx_plugin_host_af81d31267c6bb695b406c05a403f274c}{create\+Params\+By\+Desc}} ()
\item 
void \mbox{\hyperlink{class_raster_fx_plugin_host_ab9703a598354d3d3f83f47e015f970a3}{create\+Ports\+By\+Desc}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual \mbox{\hyperlink{class_raster_fx_plugin_host}{Raster\+Fx\+Plugin\+Host}} $\ast$ \mbox{\hyperlink{class_raster_fx_plugin_host_a45e1c5652d1b9abb3f825b12fd499f0f}{new\+Instance}} (\mbox{\hyperlink{class_plugin_information}{Plugin\+Information}} $\ast$pi) const
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_raster_fx_plugin_host_ae9fa9ef22a7529e47caf8e0ef7986f32}\label{class_raster_fx_plugin_host_ae9fa9ef22a7529e47caf8e0ef7986f32}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!RasterFxPluginHost@{RasterFxPluginHost}}
\index{RasterFxPluginHost@{RasterFxPluginHost}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{RasterFxPluginHost()}{RasterFxPluginHost()}}
{\footnotesize\ttfamily Raster\+Fx\+Plugin\+Host\+::\+Raster\+Fx\+Plugin\+Host (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_plugin_information}{Plugin\+Information}} $\ast$}]{pinfo }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00155     : \mbox{\hyperlink{class_t_raster_fx}{TRasterFx}}(), pi\_(pinfo), user\_data\_(\textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{00156   pi\_-\/>add\_ref();}
\DoxyCodeLine{00157 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_ab0a035fc1618c3fe3432f3ae775270da}\label{class_raster_fx_plugin_host_ab0a035fc1618c3fe3432f3ae775270da}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!````~RasterFxPluginHost@{$\sim$RasterFxPluginHost}}
\index{````~RasterFxPluginHost@{$\sim$RasterFxPluginHost}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{$\sim$RasterFxPluginHost()}{~RasterFxPluginHost()}}
{\footnotesize\ttfamily Raster\+Fx\+Plugin\+Host\+::$\sim$\+Raster\+Fx\+Plugin\+Host (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00401                                         \{}
\DoxyCodeLine{00402   \textcolor{keywordflow}{if} (pi\_ \&\& pi\_-\/>handler\_-\/>destroy) \{}
\DoxyCodeLine{00403     pi\_-\/>handler\_-\/>destroy(\textcolor{keyword}{this});}
\DoxyCodeLine{00404     pi\_-\/>release();}
\DoxyCodeLine{00405   \}}
\DoxyCodeLine{00406   inputs\_.clear();}
\DoxyCodeLine{00407 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_raster_fx_plugin_host_ad0b5b286d78c752359499182055f5e28}\label{class_raster_fx_plugin_host_ad0b5b286d78c752359499182055f5e28}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!addInputPort@{addInputPort}}
\index{addInputPort@{addInputPort}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{addInputPort()}{addInputPort()}}
{\footnotesize\ttfamily bool Raster\+Fx\+Plugin\+Host\+::add\+Input\+Port (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{nm,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_t_fx_port}{TFx\+Port}} $>$}]{port }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00530                                                                    \{}
\DoxyCodeLine{00531   \textcolor{comment}{/* setOwnFx は addInputPort 内で行われている. setFx()}}
\DoxyCodeLine{00532 \textcolor{comment}{   * は接続なので自分自身に呼んではダメ */}}
\DoxyCodeLine{00533   \textcolor{comment}{// port-\/>setFx(this);}}
\DoxyCodeLine{00534   \textcolor{keywordtype}{bool} ret = \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{TFx::addInputPort}}(nm, *port.get());}
\DoxyCodeLine{00535   \textcolor{keywordflow}{if} (ret) \{}
\DoxyCodeLine{00536     inputs\_.push\_back(port);}
\DoxyCodeLine{00537   \}}
\DoxyCodeLine{00538   \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00539 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_ab05130a0cd1f66292e095cbf514059c5}\label{class_raster_fx_plugin_host_ab05130a0cd1f66292e095cbf514059c5}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!addOutputPort@{addOutputPort}}
\index{addOutputPort@{addOutputPort}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{addOutputPort()}{addOutputPort()}}
{\footnotesize\ttfamily bool Raster\+Fx\+Plugin\+Host\+::add\+Output\+Port (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{nm,  }\item[{\mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} $\ast$}]{port }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00542                                                             \{}
\DoxyCodeLine{00543   port-\/>setFx(\textcolor{keyword}{this});}
\DoxyCodeLine{00544   \textcolor{keywordflow}{return} TFx::addOutputConnection(port);}
\DoxyCodeLine{00545 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_af6ed8b194bb00867decd02e4f920966a}\label{class_raster_fx_plugin_host_af6ed8b194bb00867decd02e4f920966a}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!addPortDesc@{addPortDesc}}
\index{addPortDesc@{addPortDesc}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{addPortDesc()}{addPortDesc()}}
{\footnotesize\ttfamily bool Raster\+Fx\+Plugin\+Host\+::add\+Port\+Desc (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structport__description__t}{port\+\_\+description\+\_\+t}} \&\&}]{desc }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00383                                                               \{}
\DoxyCodeLine{00384   printf(\textcolor{stringliteral}{"{}addPortDesc: name:\%s dir:\%d type:\%d\(\backslash\)n"{}}, desc.name\_.c\_str(),}
\DoxyCodeLine{00385          desc.input\_, desc.type\_);}
\DoxyCodeLine{00386   \textcolor{keyword}{auto} ret = pi\_-\/>port\_mapper\_.insert(std::make\_pair(desc.name\_, desc));}
\DoxyCodeLine{00387   \textcolor{keywordflow}{return} ret.second;}
\DoxyCodeLine{00388 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_adf0fd8c4dee0f60be7470e5664a87b55}\label{class_raster_fx_plugin_host_adf0fd8c4dee0f60be7470e5664a87b55}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!build@{build}}
\index{build@{build}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{build()}{build()}}
{\footnotesize\ttfamily void Raster\+Fx\+Plugin\+Host\+::build (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_params_page_set}{Params\+Page\+Set}} $\ast$}]{pages }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00627                                                    \{}
\DoxyCodeLine{00628   printf(\textcolor{stringliteral}{"{}>>>> RasterFxPluginHost::build: ui\_pages:\%d\(\backslash\)n"{}},}
\DoxyCodeLine{00629          (\textcolor{keywordtype}{int})pi\_-\/>ui\_pages\_.size());}
\DoxyCodeLine{00630   \textcolor{keywordflow}{for} (std::size\_t i = 0, size = pi\_-\/>ui\_pages\_.size(); i < size; ++i) \{}
\DoxyCodeLine{00631     pi\_-\/>ui\_pages\_[i]-\/>build(\textcolor{keyword}{this}, pages);}
\DoxyCodeLine{00632   \}}
\DoxyCodeLine{00633   \textcolor{keyword}{auto} aboutpage = pages-\/>createParamsPage();}
\DoxyCodeLine{00634 }
\DoxyCodeLine{00635 \textcolor{preprocessor}{\#if 1}}
\DoxyCodeLine{00636   \textcolor{comment}{/* FIXME: fxsettings で大きさの測定のためにいろいろやっているので使える}}
\DoxyCodeLine{00637 \textcolor{comment}{     layout/widget に制限がありそう.}}
\DoxyCodeLine{00638 \textcolor{comment}{     しかしなぜか最後の widget しか出ない */}}
\DoxyCodeLine{00639   aboutpage-\/>beginGroup(\textcolor{stringliteral}{"{}Name"{}});}
\DoxyCodeLine{00640   aboutpage-\/>addWidget(\textcolor{keyword}{new} QLabel(pi\_-\/>desc\_-\/>name\_.c\_str(), aboutpage));}
\DoxyCodeLine{00641   aboutpage-\/>endGroup();}
\DoxyCodeLine{00642   aboutpage-\/>beginGroup(\textcolor{stringliteral}{"{}Vendor"{}});}
\DoxyCodeLine{00643   aboutpage-\/>addWidget(\textcolor{keyword}{new} QLabel(pi\_-\/>desc\_-\/>vendor\_.c\_str(), aboutpage));}
\DoxyCodeLine{00644   aboutpage-\/>endGroup();}
\DoxyCodeLine{00645   aboutpage-\/>beginGroup(\textcolor{stringliteral}{"{}Version"{}});}
\DoxyCodeLine{00646   \textcolor{keyword}{auto} version =}
\DoxyCodeLine{00647       QString::fromStdString(std::to\_string(pi\_-\/>desc\_-\/>plugin\_ver\_.major)) +}
\DoxyCodeLine{00648       \textcolor{stringliteral}{"{}."{}} +}
\DoxyCodeLine{00649       QString::fromStdString(std::to\_string(pi\_-\/>desc\_-\/>plugin\_ver\_.minor));}
\DoxyCodeLine{00650   aboutpage-\/>addWidget(\textcolor{keyword}{new} QLabel(version, aboutpage));}
\DoxyCodeLine{00651   aboutpage-\/>endGroup();}
\DoxyCodeLine{00652   aboutpage-\/>beginGroup(\textcolor{stringliteral}{"{}Note"{}});}
\DoxyCodeLine{00653   aboutpage-\/>addWidget(\textcolor{keyword}{new} QLabel(pi\_-\/>desc\_-\/>note\_.c\_str()), aboutpage);}
\DoxyCodeLine{00654   aboutpage-\/>endGroup();}
\DoxyCodeLine{00655 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00656   pages-\/>addParamsPage(aboutpage, \textcolor{stringliteral}{"{}Version"{}});}
\DoxyCodeLine{00657   aboutpage-\/>setPageSpace();}
\DoxyCodeLine{00658 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_a5e771e929ab4ef4b84082b8f33616e1b}\label{class_raster_fx_plugin_host_a5e771e929ab4ef4b84082b8f33616e1b}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!callEndRenderFrameHandler@{callEndRenderFrameHandler}}
\index{callEndRenderFrameHandler@{callEndRenderFrameHandler}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{callEndRenderFrameHandler()}{callEndRenderFrameHandler()}}
{\footnotesize\ttfamily void Raster\+Fx\+Plugin\+Host\+::call\+End\+Render\+Frame\+Handler (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} $\ast$}]{rs,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_fx}{TFx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00569                                                                  \{}
\DoxyCodeLine{00570   \mbox{\hyperlink{structtoonz__rendering__setting__t__}{toonz\_rendering\_setting\_t}} trs;}
\DoxyCodeLine{00571   copy\_rendering\_setting(\&trs, *rs);}
\DoxyCodeLine{00572   \textcolor{keywordflow}{if} (pi\_ \&\& pi\_-\/>handler\_ \&\& pi\_-\/>handler\_-\/>on\_end\_frame) \{}
\DoxyCodeLine{00573     pi\_-\/>handler\_-\/>on\_end\_frame(\textcolor{keyword}{this}, \&trs, frame);}
\DoxyCodeLine{00574   \}}
\DoxyCodeLine{00575 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_ad18f48f90484f1b567da90bfe3554db0}\label{class_raster_fx_plugin_host_ad18f48f90484f1b567da90bfe3554db0}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!callEndRenderHandler@{callEndRenderHandler}}
\index{callEndRenderHandler@{callEndRenderHandler}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{callEndRenderHandler()}{callEndRenderHandler()}}
{\footnotesize\ttfamily void Raster\+Fx\+Plugin\+Host\+::call\+End\+Render\+Handler (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_fx}{TFx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00553                                               \{}
\DoxyCodeLine{00554   \textcolor{keywordflow}{if} (pi\_ \&\& pi\_-\/>handler\_ \&\& pi\_-\/>handler\_-\/>end\_render) \{}
\DoxyCodeLine{00555     pi\_-\/>handler\_-\/>end\_render(\textcolor{keyword}{this});}
\DoxyCodeLine{00556   \}}
\DoxyCodeLine{00557 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_a3540ecb41f7e7e68a4a27056cab8e8ae}\label{class_raster_fx_plugin_host_a3540ecb41f7e7e68a4a27056cab8e8ae}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!callStartRenderFrameHandler@{callStartRenderFrameHandler}}
\index{callStartRenderFrameHandler@{callStartRenderFrameHandler}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{callStartRenderFrameHandler()}{callStartRenderFrameHandler()}}
{\footnotesize\ttfamily void Raster\+Fx\+Plugin\+Host\+::call\+Start\+Render\+Frame\+Handler (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} $\ast$}]{rs,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_fx}{TFx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00560                                                                    \{}
\DoxyCodeLine{00561   \mbox{\hyperlink{structtoonz__rendering__setting__t__}{toonz\_rendering\_setting\_t}} trs;}
\DoxyCodeLine{00562   copy\_rendering\_setting(\&trs, *rs);}
\DoxyCodeLine{00563   \textcolor{keywordflow}{if} (pi\_ \&\& pi\_-\/>handler\_ \&\& pi\_-\/>handler\_-\/>on\_new\_frame) \{}
\DoxyCodeLine{00564     pi\_-\/>handler\_-\/>on\_new\_frame(\textcolor{keyword}{this}, \&trs, frame);}
\DoxyCodeLine{00565   \}}
\DoxyCodeLine{00566 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_ac251361e644429db12bfe98c88e9a7c0}\label{class_raster_fx_plugin_host_ac251361e644429db12bfe98c88e9a7c0}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!callStartRenderHandler@{callStartRenderHandler}}
\index{callStartRenderHandler@{callStartRenderHandler}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{callStartRenderHandler()}{callStartRenderHandler()}}
{\footnotesize\ttfamily void Raster\+Fx\+Plugin\+Host\+::call\+Start\+Render\+Handler (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_fx}{TFx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00547                                                 \{}
\DoxyCodeLine{00548   \textcolor{keywordflow}{if} (pi\_ \&\& pi\_-\/>handler\_ \&\& pi\_-\/>handler\_-\/>start\_render) \{}
\DoxyCodeLine{00549     pi\_-\/>handler\_-\/>start\_render(\textcolor{keyword}{this});}
\DoxyCodeLine{00550   \}}
\DoxyCodeLine{00551 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_a283e54c21f73efe8201c79e076f35b08}\label{class_raster_fx_plugin_host_a283e54c21f73efe8201c79e076f35b08}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool Raster\+Fx\+Plugin\+Host\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00518                                                                             \{}
\DoxyCodeLine{00519   \textcolor{keywordflow}{if} (pi\_ \&\& pi\_-\/>handler\_-\/>can\_handle) \{}
\DoxyCodeLine{00520     rendering\_setting\_t rs;}
\DoxyCodeLine{00521     copy\_rendering\_setting(\&rs, info);}
\DoxyCodeLine{00522     \textcolor{keywordflow}{return} pi\_-\/>handler\_-\/>can\_handle(\textcolor{keyword}{this}, \&rs, frame);}
\DoxyCodeLine{00523   \}}
\DoxyCodeLine{00524   \textcolor{comment}{/* 適切なデフォルト値は 'geometric' の場合とそうでない場合で異なる */}}
\DoxyCodeLine{00525   \textcolor{keywordflow}{return} isPluginZerary(); \textcolor{comment}{/* better-\/default depends on that is 'geometric' or}}
\DoxyCodeLine{00526 \textcolor{comment}{                              not */}}
\DoxyCodeLine{00527 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_a172f5e6ce0c4fbd92f1c34579718a203}\label{class_raster_fx_plugin_host_a172f5e6ce0c4fbd92f1c34579718a203}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!clone@{clone}}
\index{clone@{clone}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{clone()}{clone()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_fx}{TFx}} $\ast$ Raster\+Fx\+Plugin\+Host\+::clone (\begin{DoxyParamCaption}\item[{bool}]{recursive }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_fx}{TFx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00415                                                    \{}
\DoxyCodeLine{00416   \mbox{\hyperlink{class_raster_fx_plugin_host}{RasterFxPluginHost}} *plugin = newInstance(pi\_);}
\DoxyCodeLine{00417   plugin-\/>user\_data\_         = user\_data\_;}
\DoxyCodeLine{00418   \textcolor{comment}{// clone ports before TFx::clone().}}
\DoxyCodeLine{00419   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \&ip : pi\_-\/>port\_mapper\_) \{}
\DoxyCodeLine{00420     \textcolor{keywordflow}{if} (ip.second.input\_) \{}
\DoxyCodeLine{00421 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{00422       \textcolor{comment}{/* addInputPort() 内で行われる port owner の更新は後勝ちだが,}}
\DoxyCodeLine{00423 \textcolor{comment}{         clone された新しいインスタンスのほうが先に消えてしまう場合に, 無効なポインタを示す owner が port に残ってしまう. この問題が解決したら共有できるようにしたい.}}
\DoxyCodeLine{00424 \textcolor{comment}{         (このため、 plugin 空間に通知される全ての handle には一貫性がない. ただし、後から一貫性がなくなるよりは遥かにいいだろう)}}
\DoxyCodeLine{00425 \textcolor{comment}{      */}}
\DoxyCodeLine{00426       plugin-\/>addInputPort(getInputPortName(i), ip);}
\DoxyCodeLine{00427 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00428       plugin-\/>addInputPort(ip.first,}
\DoxyCodeLine{00429                            std::shared\_ptr<TFxPort>(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_raster_fx_port}{TRasterFxPort}}));}
\DoxyCodeLine{00430 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00431     \}}
\DoxyCodeLine{00432   \}}
\DoxyCodeLine{00433 }
\DoxyCodeLine{00434   printf(\textcolor{stringliteral}{"{}recursive:\%d params:\%d\(\backslash\)n"{}}, (\textcolor{keywordtype}{int})recursive, (\textcolor{keywordtype}{int})params\_.size());}
\DoxyCodeLine{00435   \textcolor{comment}{// clone params before TFx::clone().}}
\DoxyCodeLine{00436   \textcolor{comment}{/* ui\_pages\_, param\_views\_ は pi に移ったが createParam}}
\DoxyCodeLine{00437 \textcolor{comment}{   * の呼び出しだけはしておかないと Fx Settings 構築時に assert failed になる */}}
\DoxyCodeLine{00438   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const} \&param : params\_) \{}
\DoxyCodeLine{00439     \textcolor{comment}{/* 古い createParam() は desc}}
\DoxyCodeLine{00440 \textcolor{comment}{     * をとらず、コンストラクト時にデフォルト値を持つタイプの T*Param}}
\DoxyCodeLine{00441 \textcolor{comment}{     * を再作成できない */}}
\DoxyCodeLine{00442     plugin-\/>createParam(param-\/>desc());}
\DoxyCodeLine{00443   \}}
\DoxyCodeLine{00444 }
\DoxyCodeLine{00445   \textcolor{keywordflow}{return} TFx::clone(plugin, recursive);}
\DoxyCodeLine{00446 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_ab6f0ab747dcc582589dc2c58c1d2b4c1}\label{class_raster_fx_plugin_host_ab6f0ab747dcc582589dc2c58c1d2b4c1}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!createParam@{createParam}}
\index{createParam@{createParam}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{createParam()}{createParam()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_param}{Param}} $\ast$ Raster\+Fx\+Plugin\+Host\+::create\+Param (\begin{DoxyParamCaption}\item[{const char $\ast$}]{name,  }\item[{toonz\+\_\+param\+\_\+type\+\_\+enum}]{e }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00587                                                                 \{}
\DoxyCodeLine{00588   \mbox{\hyperlink{structtoonz__param__desc__t__}{toonz\_param\_desc\_t}} *desc = \textcolor{keyword}{new} \mbox{\hyperlink{structtoonz__param__desc__t__}{toonz\_param\_desc\_t}};}
\DoxyCodeLine{00589   memset(desc, 0, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structtoonz__param__desc__t__}{toonz\_param\_desc\_t}}));}
\DoxyCodeLine{00590   desc-\/>base.ver   = \{1, 0\};}
\DoxyCodeLine{00591   desc-\/>key        = name;}
\DoxyCodeLine{00592   desc-\/>traits\_tag = e;}
\DoxyCodeLine{00593   \textcolor{keywordflow}{return} createParam(desc);}
\DoxyCodeLine{00594 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_a74203cd20b85a8f11340da1152705ea0}\label{class_raster_fx_plugin_host_a74203cd20b85a8f11340da1152705ea0}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!createParam@{createParam}}
\index{createParam@{createParam}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{createParam()}{createParam()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_param}{Param}} $\ast$ Raster\+Fx\+Plugin\+Host\+::create\+Param (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structtoonz__param__desc__t__}{toonz\+\_\+param\+\_\+desc\+\_\+t}} $\ast$}]{desc }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00596                                                                      \{}
\DoxyCodeLine{00597   \mbox{\hyperlink{class_t_smart_pointer_t}{TParamP}} p = parameter\_factory(desc);}
\DoxyCodeLine{00598   \textcolor{keywordflow}{if} (!p) \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00599 }
\DoxyCodeLine{00600   p-\/>\mbox{\hyperlink{class_t_param_a054dae371459931d23b7200409a4b782}{setDescription}}(desc-\/>note);}
\DoxyCodeLine{00601   p-\/>setUILabel(desc-\/>base.label);}
\DoxyCodeLine{00602 }
\DoxyCodeLine{00603   bindPluginParam(\textcolor{keyword}{this}, desc-\/>key, p);}
\DoxyCodeLine{00604 }
\DoxyCodeLine{00605   params\_.push\_back(std::make\_shared<Param>(}
\DoxyCodeLine{00606       \textcolor{keyword}{this}, desc-\/>key, toonz\_param\_type\_enum(desc-\/>traits\_tag), desc));}
\DoxyCodeLine{00607   \textcolor{keywordflow}{return} params\_.back().get();}
\DoxyCodeLine{00608 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_af81d31267c6bb695b406c05a403f274c}\label{class_raster_fx_plugin_host_af81d31267c6bb695b406c05a403f274c}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!createParamsByDesc@{createParamsByDesc}}
\index{createParamsByDesc@{createParamsByDesc}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{createParamsByDesc()}{createParamsByDesc()}}
{\footnotesize\ttfamily void Raster\+Fx\+Plugin\+Host\+::create\+Params\+By\+Desc (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00858                                             \{}
\DoxyCodeLine{00859   printf(\textcolor{stringliteral}{"{}RasterFxPluginHost::createParamsByDesc: num:\%d\(\backslash\)n"{}},}
\DoxyCodeLine{00860          pi\_-\/>param\_page\_num\_);}
\DoxyCodeLine{00861   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < pi\_-\/>param\_page\_num\_; k++) \{}
\DoxyCodeLine{00862     \mbox{\hyperlink{structtoonz__param__page__t__}{toonz\_param\_page\_t}} *pg = \&pi\_-\/>param\_pages\_[k];}
\DoxyCodeLine{00863     \textcolor{keywordtype}{void} *page             = NULL;}
\DoxyCodeLine{00864     \textcolor{keywordtype}{int} r                  = add\_preference(\textcolor{keyword}{this}, pg-\/>base.label, \&page);}
\DoxyCodeLine{00865     printf(}
\DoxyCodeLine{00866         \textcolor{stringliteral}{"{}RasterFxPluginHost::createParamsByDesc: add\_preference: r:0x\%x "{}}}
\DoxyCodeLine{00867         \textcolor{stringliteral}{"{}page:\%p\(\backslash\)n"{}},}
\DoxyCodeLine{00868         r, page);}
\DoxyCodeLine{00869 }
\DoxyCodeLine{00870     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < pg-\/>num; l++) \{}
\DoxyCodeLine{00871       \mbox{\hyperlink{structtoonz__param__group__t__}{toonz\_param\_group\_t}} *grp = \&pg-\/>array[l];}
\DoxyCodeLine{00872       begin\_group(page, grp-\/>base.label);}
\DoxyCodeLine{00873 }
\DoxyCodeLine{00874       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < grp-\/>num; i++) \{}
\DoxyCodeLine{00875         \mbox{\hyperlink{structtoonz__param__desc__t__}{toonz\_param\_desc\_t}} *desc = \&grp-\/>array[i];}
\DoxyCodeLine{00876         \mbox{\hyperlink{class_param}{Param}} *p                 = createParam(desc);}
\DoxyCodeLine{00877         printf(\textcolor{stringliteral}{"{}RasterFxPluginHost::createParam: p:\%p key:\%s tag:\%d\(\backslash\)n"{}}, p,}
\DoxyCodeLine{00878                desc-\/>key, desc-\/>traits\_tag);}
\DoxyCodeLine{00879         \textcolor{keywordflow}{if} (p) \{}
\DoxyCodeLine{00880           \textcolor{keywordtype}{void} *v = NULL;}
\DoxyCodeLine{00881           \textcolor{keywordtype}{int} r   = create\_param\_view(\textcolor{keyword}{this}, \&v);}
\DoxyCodeLine{00882           printf(}
\DoxyCodeLine{00883               \textcolor{stringliteral}{"{}RasterFxPluginHost::createParam: create\_param\_view: r:0x\%x "{}}}
\DoxyCodeLine{00884               \textcolor{stringliteral}{"{}v:\%p\(\backslash\)n"{}},}
\DoxyCodeLine{00885               r, v);}
\DoxyCodeLine{00886           r = add\_param\_field(v, NULL);}
\DoxyCodeLine{00887           printf(}
\DoxyCodeLine{00888               \textcolor{stringliteral}{"{}RasterFxPluginHost::createParam: add\_param\_field: r:0x\%x v:\%p "{}}}
\DoxyCodeLine{00889               \textcolor{stringliteral}{"{}p:\%p\(\backslash\)n"{}},}
\DoxyCodeLine{00890               r, v, p);}
\DoxyCodeLine{00891           \textcolor{comment}{/* set\_param\_range()}}
\DoxyCodeLine{00892 \textcolor{comment}{           * の中で型チェックをしているので全型について呼び出してよい */}}
\DoxyCodeLine{00893 }
\DoxyCodeLine{00894           r = bind\_param(page, p, v);}
\DoxyCodeLine{00895 }
\DoxyCodeLine{00896           set\_param\_default<tpbind\_dbl\_t>(p, desc);}
\DoxyCodeLine{00897           set\_param\_default<tpbind\_int\_t>(p, desc);}
\DoxyCodeLine{00898           set\_param\_default<tpbind\_rng\_t>(p, desc);}
\DoxyCodeLine{00899           set\_param\_default<tpbind\_pnt\_t>(p, desc);}
\DoxyCodeLine{00900           set\_param\_default<tpbind\_enm\_t>(p, desc);}
\DoxyCodeLine{00901           set\_param\_default<tpbind\_col\_t>(p, desc);}
\DoxyCodeLine{00902           set\_param\_default<tpbind\_bool\_t>(p, desc);}
\DoxyCodeLine{00903           set\_param\_default<tpbind\_str\_t>(p, desc);}
\DoxyCodeLine{00904           set\_param\_default<tpbind\_spc\_t>(p, desc);}
\DoxyCodeLine{00905           set\_param\_default<tpbind\_tcv\_t>(p, desc);}
\DoxyCodeLine{00906 }
\DoxyCodeLine{00907           set\_param\_range<tpbind\_dbl\_t>(p, desc);}
\DoxyCodeLine{00908           set\_param\_range<tpbind\_int\_t>(p, desc);}
\DoxyCodeLine{00909           set\_param\_range<tpbind\_rng\_t>(p, desc);}
\DoxyCodeLine{00910           set\_param\_range<tpbind\_pnt\_t>(p, desc);}
\DoxyCodeLine{00911 }
\DoxyCodeLine{00912           printf(\textcolor{stringliteral}{"{}RasterFxPluginHost::createParam: bind\_param: r:0x\%x\(\backslash\)n"{}}, r);}
\DoxyCodeLine{00913         \}}
\DoxyCodeLine{00914       \}}
\DoxyCodeLine{00915       end\_group(page, grp-\/>base.label);}
\DoxyCodeLine{00916     \}}
\DoxyCodeLine{00917   \}}
\DoxyCodeLine{00918 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_aa4b7c775f3f7be4656ea32cf24a4d758}\label{class_raster_fx_plugin_host_aa4b7c775f3f7be4656ea32cf24a4d758}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!createParamView@{createParamView}}
\index{createParamView@{createParamView}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{createParamView()}{createParamView()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_param_view}{Param\+View}} $\ast$ Raster\+Fx\+Plugin\+Host\+::create\+Param\+View (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00619                                                \{}
\DoxyCodeLine{00620   pi\_-\/>param\_views\_.push\_back(NULL);}
\DoxyCodeLine{00621   pi\_-\/>param\_views\_.back() = \textcolor{keyword}{new} \mbox{\hyperlink{class_param_view}{ParamView}}();}
\DoxyCodeLine{00622   \textcolor{keywordflow}{return} pi\_-\/>param\_views\_.back();}
\DoxyCodeLine{00623 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_ab9703a598354d3d3f83f47e015f970a3}\label{class_raster_fx_plugin_host_ab9703a598354d3d3f83f47e015f970a3}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!createPortsByDesc@{createPortsByDesc}}
\index{createPortsByDesc@{createPortsByDesc}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{createPortsByDesc()}{createPortsByDesc()}}
{\footnotesize\ttfamily void Raster\+Fx\+Plugin\+Host\+::create\+Ports\+By\+Desc (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01527                                            \{}
\DoxyCodeLine{01528   \textcolor{keywordflow}{if} (pi\_) \{}
\DoxyCodeLine{01529     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} pm : pi\_-\/>port\_mapper\_) \{}
\DoxyCodeLine{01530       \textcolor{comment}{/* TRasterFxPort は non-\/copyable}}
\DoxyCodeLine{01531 \textcolor{comment}{       * なスマートポインタなのでポインタで引き回す */}}
\DoxyCodeLine{01532       printf(\textcolor{stringliteral}{"{}createPortsByDesc: name:\%s dir:\%d type:\%d\(\backslash\)n"{}}, pm.first.c\_str(),}
\DoxyCodeLine{01533              pm.second.input\_, pm.second.type\_);}
\DoxyCodeLine{01534       \textcolor{keywordflow}{if} (pm.second.input\_) \{}
\DoxyCodeLine{01535         \textcolor{keyword}{auto} p = std::make\_shared<TRasterFxPort>();}
\DoxyCodeLine{01536         \textcolor{keywordflow}{if} (!addInputPort(pm.first, p)) \{  \textcolor{comment}{// overloaded version}}
\DoxyCodeLine{01537           printf(\textcolor{stringliteral}{"{}createPortsByDesc: failed to add: already have\(\backslash\)n"{}});}
\DoxyCodeLine{01538         \}}
\DoxyCodeLine{01539       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01540         \textcolor{keyword}{auto} p = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_raster_fx_port}{TRasterFxPort}}();}
\DoxyCodeLine{01541         \textcolor{comment}{/* TRasterFxPort は non-\/copyable}}
\DoxyCodeLine{01542 \textcolor{comment}{         * なスマートポインタなのでポインタで引き回す */}}
\DoxyCodeLine{01543         \textcolor{keywordflow}{if} (addOutputPort(pm.first, p)) \{  \textcolor{comment}{// overloaded version}}
\DoxyCodeLine{01544           \textcolor{keyword}{delete} p;}
\DoxyCodeLine{01545           printf(\textcolor{stringliteral}{"{}createPortsByDesc: failed to add: already have\(\backslash\)n"{}});}
\DoxyCodeLine{01546         \}}
\DoxyCodeLine{01547       \}}
\DoxyCodeLine{01548     \}}
\DoxyCodeLine{01549   \}}
\DoxyCodeLine{01550 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_a1479d9689cbf95122fe3f48a5da02c77}\label{class_raster_fx_plugin_host_a1479d9689cbf95122fe3f48a5da02c77}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!createUIPage@{createUIPage}}
\index{createUIPage@{createUIPage}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{createUIPage()}{createUIPage()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_u_i_page}{UIPage}} $\ast$ Raster\+Fx\+Plugin\+Host\+::create\+UIPage (\begin{DoxyParamCaption}\item[{const char $\ast$}]{name }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00579                                                          \{}
\DoxyCodeLine{00580   pi\_-\/>ui\_pages\_.push\_back(NULL);}
\DoxyCodeLine{00581   pi\_-\/>ui\_pages\_.back() = \textcolor{keyword}{new} \mbox{\hyperlink{class_u_i_page}{UIPage}}(name);}
\DoxyCodeLine{00582   \textcolor{keywordflow}{return} pi\_-\/>ui\_pages\_.back();}
\DoxyCodeLine{00583 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_af9096932e1494e6b968f0136f4760a36}\label{class_raster_fx_plugin_host_af9096932e1494e6b968f0136f4760a36}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void Raster\+Fx\+Plugin\+Host\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00493                                                                 \{}
\DoxyCodeLine{00494   \textcolor{keywordflow}{if} (pi\_ \&\& pi\_-\/>handler\_-\/>do\_compute) \{}
\DoxyCodeLine{00495     rendering\_setting\_t info\_;}
\DoxyCodeLine{00496     copy\_rendering\_setting(\&info\_, info);}
\DoxyCodeLine{00497     pi\_-\/>handler\_-\/>do\_compute(\textcolor{keyword}{this}, \&info\_, frame, \&tile);}
\DoxyCodeLine{00498   \}}
\DoxyCodeLine{00499 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_a756504c4804c465986d1075b98670197}\label{class_raster_fx_plugin_host_a756504c4804c465986d1075b98670197}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool Raster\+Fx\+Plugin\+Host\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{bbox,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00476                                                                 \{}
\DoxyCodeLine{00477   \textcolor{keyword}{using namespace }plugin::utils;}
\DoxyCodeLine{00478   \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{true}; \textcolor{comment}{/* 負論理 */}}
\DoxyCodeLine{00479   \textcolor{keywordflow}{if} (pi\_ \&\& pi\_-\/>handler\_-\/>do\_get\_bbox) \{}
\DoxyCodeLine{00480     rendering\_setting\_t info\_;}
\DoxyCodeLine{00481     copy\_rendering\_setting(\&info\_, info);}
\DoxyCodeLine{00482 }
\DoxyCodeLine{00483     rect\_t rc;}
\DoxyCodeLine{00484     copy\_rect(\&rc, bbox);}
\DoxyCodeLine{00485 }
\DoxyCodeLine{00486     ret  = ret \&\& pi\_-\/>handler\_-\/>do\_get\_bbox(\textcolor{keyword}{this}, \&info\_, frame, \&rc);}
\DoxyCodeLine{00487     bbox = restore\_rect(\&rc);}
\DoxyCodeLine{00488   \}}
\DoxyCodeLine{00489   \textcolor{keywordflow}{return} !ret;}
\DoxyCodeLine{00490 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_aa72859514ef694e53a708e7d43c2e173}\label{class_raster_fx_plugin_host_aa72859514ef694e53a708e7d43c2e173}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!getDeclaration@{getDeclaration}}
\index{getDeclaration@{getDeclaration}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{getDeclaration()}{getDeclaration()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_persist_declaration}{TPersist\+Declaration}} $\ast$ Raster\+Fx\+Plugin\+Host\+::get\+Declaration (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

\begin{DoxyVerb}      This pure virtual method is used to define a global pointer to the
\end{DoxyVerb}
 object. This method is overridden with the macro \mbox{\hyperlink{tpersist_8h_ac4e32a0616968ccbce281794950986f3}{PERSIST\+\_\+\+DECLARATION(\+T)}}. ~\newline
 For example\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{class }DVAPI \mbox{\hyperlink{class_t_stage_object_tree}{TStageObjectTree}} final : \textcolor{keyword}{public} \mbox{\hyperlink{class_t_persist}{TPersist}} \{}
\DoxyCodeLine{\mbox{\hyperlink{tpersist_8h_ac4e32a0616968ccbce281794950986f3}{PERSIST\_DECLARATION}}(\mbox{\hyperlink{class_t_stage_object_tree}{TStageObjectTree}})}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{}
\DoxyCodeLine{...}

\end{DoxyCode}
 

Implements \mbox{\hyperlink{class_t_persist_aec66a1276b484a94a48e7e3e45be525e}{TPersist}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00453                                                                     \{}
\DoxyCodeLine{00454   printf(\textcolor{stringliteral}{"{}RasterFxPluginHost::getDeclaration()\(\backslash\)n"{}});}
\DoxyCodeLine{00455   \textcolor{keywordflow}{return} pi\_-\/>decl\_;}
\DoxyCodeLine{00456 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_a804999455cc1b3ba2134fd582e6f5768}\label{class_raster_fx_plugin_host_a804999455cc1b3ba2134fd582e6f5768}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!getMemoryRequirement@{getMemoryRequirement}}
\index{getMemoryRequirement@{getMemoryRequirement}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{getMemoryRequirement()}{getMemoryRequirement()}}
{\footnotesize\ttfamily int Raster\+Fx\+Plugin\+Host\+::get\+Memory\+Requirement (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Specifies the approximate size (in Mega\+Bytes) of the maximum allocation instance that this fx will need to perform in order to render the passed input. This method should be reimplemented in order to make the Toonz rendering process aware of the use of big raster memory chunks, at least. Observe that the passed tile geometry is implicitly {\itshape  already allocated \texorpdfstring{$<$}{<}\textbackslash{}i\texorpdfstring{$>$}{>} for the fx output. ~\newline
The default implementation returns 0, assuming that the passed implicit memory size is passed below in node computation without further allocation of resources. Fxs can reimplement this to -\/1 to explicitly disable the Toonz\textquotesingle{}s smart memory handling. ~\newline
 ~\newline
\begin{DoxyNote}{Note}
The rendering process ensures that the passed render settings are {\itshape handled} by the fx before this function is invoked -\/ do not waste code for it. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRaster\+Fx\+::memory\+Size}} and TRaster\+Fx\+::can\+Handle methods. 
\end{DoxySeeAlso}
}

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_af8eb991c9756f4fb2e48d9f96cbacfba}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00502                                                                           \{}
\DoxyCodeLine{00503   \textcolor{keyword}{using namespace }plugin::utils;}
\DoxyCodeLine{00504   \textcolor{keywordflow}{if} (pi\_ \&\& pi\_-\/>handler\_-\/>get\_memory\_requirement) \{}
\DoxyCodeLine{00505     rendering\_setting\_t rs;}
\DoxyCodeLine{00506     copy\_rendering\_setting(\&rs, info);}
\DoxyCodeLine{00507 }
\DoxyCodeLine{00508     rect\_t rc;}
\DoxyCodeLine{00509     copy\_rect(\&rc, rect);}
\DoxyCodeLine{00510 }
\DoxyCodeLine{00511     \textcolor{keywordtype}{size\_t} ignore =}
\DoxyCodeLine{00512         pi\_-\/>handler\_-\/>get\_memory\_requirement(\textcolor{keyword}{this}, \&rs, frame, \&rc);}
\DoxyCodeLine{00513     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00514   \}}
\DoxyCodeLine{00515   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00516 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_a4cd9499bdf7c46daeb9513694b8b3879}\label{class_raster_fx_plugin_host_a4cd9499bdf7c46daeb9513694b8b3879}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!getParam@{getParam}}
\index{getParam@{getParam}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{getParam()}{getParam()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_param}{Param}} $\ast$ Raster\+Fx\+Plugin\+Host\+::get\+Param (\begin{DoxyParamCaption}\item[{const char $\ast$}]{name }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00610                                                           \{}
\DoxyCodeLine{00611   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \&param : params\_) \{}
\DoxyCodeLine{00612     \textcolor{keywordflow}{if} (param-\/>name() == name) \{}
\DoxyCodeLine{00613       \textcolor{keywordflow}{return} param.get();}
\DoxyCodeLine{00614     \}}
\DoxyCodeLine{00615   \}}
\DoxyCodeLine{00616   \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00617 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_a2ad74ce4d731864ca6b8e271f480b32d}\label{class_raster_fx_plugin_host_a2ad74ce4d731864ca6b8e271f480b32d}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!getPluginId@{getPluginId}}
\index{getPluginId@{getPluginId}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{getPluginId()}{getPluginId()}}
{\footnotesize\ttfamily std\+::string Raster\+Fx\+Plugin\+Host\+::get\+Plugin\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_fx}{TFx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00467 \{ \textcolor{keywordflow}{return} pi\_-\/>desc\_-\/>id\_; \};}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_af9b2b2a9254bf722c401dac3c9e393db}\label{class_raster_fx_plugin_host_af9b2b2a9254bf722c401dac3c9e393db}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!getUrl@{getUrl}}
\index{getUrl@{getUrl}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{getUrl()}{getUrl()}}
{\footnotesize\ttfamily std\+::string Raster\+Fx\+Plugin\+Host\+::get\+Url (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00577 \{ \textcolor{keywordflow}{return} pi\_-\/>desc\_-\/>url\_; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_a5eeab9bba7e777b9c8ade438b720012a}\label{class_raster_fx_plugin_host_a5eeab9bba7e777b9c8ade438b720012a}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!getUserData@{getUserData}}
\index{getUserData@{getUserData}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{getUserData()}{getUserData()}}
{\footnotesize\ttfamily void $\ast$ Raster\+Fx\+Plugin\+Host\+::get\+User\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00469 \{ \textcolor{keywordflow}{return} user\_data\_; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_a42b9abb9bd55c104b228aef1a4dd2afb}\label{class_raster_fx_plugin_host_a42b9abb9bd55c104b228aef1a4dd2afb}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!isPlugin@{isPlugin}}
\index{isPlugin@{isPlugin}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{isPlugin()}{isPlugin()}}
{\footnotesize\ttfamily bool Raster\+Fx\+Plugin\+Host\+::is\+Plugin (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00200 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_adc22c9f4ca5dde425936c3e939150362}\label{class_raster_fx_plugin_host_adc22c9f4ca5dde425936c3e939150362}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!isPluginZerary@{isPluginZerary}}
\index{isPluginZerary@{isPluginZerary}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{isPluginZerary()}{isPluginZerary()}}
{\footnotesize\ttfamily bool Raster\+Fx\+Plugin\+Host\+::is\+Plugin\+Zerary (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_plugin_interface}{TPlugin\+Interface}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00201 \{ \textcolor{keywordflow}{return} pi\_-\/>desc\_-\/>is\_geometric(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_a028c6c750b0ab11608a88fba8393ad05}\label{class_raster_fx_plugin_host_a028c6c750b0ab11608a88fba8393ad05}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!isZerary@{isZerary}}
\index{isZerary@{isZerary}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{isZerary()}{isZerary()}}
{\footnotesize\ttfamily bool Raster\+Fx\+Plugin\+Host\+::is\+Zerary (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

an fx identifier, or an unnamed one if none was found. 

Reimplemented from \mbox{\hyperlink{class_t_fx_abd616afdc88dc83e68dc48b2ae4cbf00}{TFx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00203 \{ \textcolor{keywordflow}{return} isPluginZerary(); \};}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_a45e1c5652d1b9abb3f825b12fd499f0f}\label{class_raster_fx_plugin_host_a45e1c5652d1b9abb3f825b12fd499f0f}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!newInstance@{newInstance}}
\index{newInstance@{newInstance}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{newInstance()}{newInstance()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_raster_fx_plugin_host}{Raster\+Fx\+Plugin\+Host}} $\ast$ Raster\+Fx\+Plugin\+Host\+::new\+Instance (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_plugin_information}{Plugin\+Information}} $\ast$}]{pi }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00449                                  \{}
\DoxyCodeLine{00450   \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{class_raster_fx_plugin_host}{RasterFxPluginHost}}(pi);}
\DoxyCodeLine{00451 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_a243781cb1853b39100933f1d67662cd4}\label{class_raster_fx_plugin_host_a243781cb1853b39100933f1d67662cd4}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!notify@{notify}}
\index{notify@{notify}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{notify()}{notify()}}
{\footnotesize\ttfamily void Raster\+Fx\+Plugin\+Host\+::notify (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00390                                 \{}
\DoxyCodeLine{00391   \textcolor{comment}{/* 最低限必要な setup をしてから通知する */}}
\DoxyCodeLine{00392   QString nm = QString::fromStdString(pi\_-\/>desc\_-\/>name\_.c\_str());}
\DoxyCodeLine{00393   setName(nm.toStdWString());}
\DoxyCodeLine{00394 }
\DoxyCodeLine{00395   createParamsByDesc();}
\DoxyCodeLine{00396   createPortsByDesc();}
\DoxyCodeLine{00397 }
\DoxyCodeLine{00398   \textcolor{keywordflow}{if} (pi\_ \&\& pi\_-\/>handler\_-\/>create) pi\_-\/>handler\_-\/>create(\textcolor{keyword}{this});}
\DoxyCodeLine{00399 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_ad3838413bd922cc5b13f40b6610c686c}\label{class_raster_fx_plugin_host_ad3838413bd922cc5b13f40b6610c686c}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!setParamStructure@{setParamStructure}}
\index{setParamStructure@{setParamStructure}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{setParamStructure()}{setParamStructure()}}
{\footnotesize\ttfamily bool Raster\+Fx\+Plugin\+Host\+::set\+Param\+Structure (\begin{DoxyParamCaption}\item[{int}]{n,  }\item[{\mbox{\hyperlink{structtoonz__param__page__t__}{toonz\+\_\+param\+\_\+page\+\_\+t}} $\ast$}]{descs,  }\item[{int \&}]{err,  }\item[{void $\ast$\&}]{pos }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00700                                                                  \{}
\DoxyCodeLine{00701   \textcolor{comment}{/* 適当に現実的な最大値: あまりに大きい場合は領域の破壊を疑う */}}
\DoxyCodeLine{00702   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} max\_pages\_  = 31;}
\DoxyCodeLine{00703   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} max\_groups\_ = 32;}
\DoxyCodeLine{00704   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} max\_params\_ = 65535;}
\DoxyCodeLine{00705 }
\DoxyCodeLine{00706   pos = p;}
\DoxyCodeLine{00707   \textcolor{keywordflow}{if} (pi\_) \{}
\DoxyCodeLine{00708     \textcolor{keywordflow}{if} (n > max\_pages\_ || p == NULL) \{}
\DoxyCodeLine{00709       \textcolor{comment}{/* parameter が null}}
\DoxyCodeLine{00710 \textcolor{comment}{       * でないことは上位でチェックされているはずで、ここで返せるエラーは定義していない.}}
\DoxyCodeLine{00711 \textcolor{comment}{       */}}
\DoxyCodeLine{00712       \textcolor{keywordflow}{if} (p == NULL) err |= TOONZ\_PARAM\_ERROR\_UNKNOWN;}
\DoxyCodeLine{00713       err |= TOONZ\_PARAM\_ERROR\_PAGE\_NUM;}
\DoxyCodeLine{00714       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00715     \}}
\DoxyCodeLine{00716 }
\DoxyCodeLine{00717     \textcolor{comment}{/* SAN 値チェック */}}
\DoxyCodeLine{00718     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < n; k++) \{}
\DoxyCodeLine{00719       \mbox{\hyperlink{structtoonz__param__page__t__}{toonz\_param\_page\_t}} *pg = \&p[k];}
\DoxyCodeLine{00720       pos                    = pg;}
\DoxyCodeLine{00721       \textcolor{keywordflow}{if} (\textcolor{keywordtype}{int} e = check\_base\_sanity(pg)) \{}
\DoxyCodeLine{00722         err = e;}
\DoxyCodeLine{00723         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00724       \}}
\DoxyCodeLine{00725       \textcolor{keywordflow}{if} (pg-\/>num > max\_groups\_) \{}
\DoxyCodeLine{00726         err |= TOONZ\_PARAM\_ERROR\_GROUP\_NUM;}
\DoxyCodeLine{00727         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00728       \}}
\DoxyCodeLine{00729 }
\DoxyCodeLine{00730       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < pg-\/>num; l++) \{}
\DoxyCodeLine{00731         \mbox{\hyperlink{structtoonz__param__group__t__}{toonz\_param\_group\_t}} *grp = \&pg-\/>array[l];}
\DoxyCodeLine{00732         pos                      = grp;}
\DoxyCodeLine{00733         \textcolor{keywordflow}{if} (\textcolor{keywordtype}{int} e = check\_base\_sanity(grp)) \{}
\DoxyCodeLine{00734           err = e;}
\DoxyCodeLine{00735           \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00736         \}}
\DoxyCodeLine{00737         \textcolor{keywordflow}{if} (grp-\/>num > max\_params\_) \{}
\DoxyCodeLine{00738           err |= TOONZ\_PARAM\_ERROR\_GROUP\_NUM;}
\DoxyCodeLine{00739           \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00740         \}}
\DoxyCodeLine{00741         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < grp-\/>num; i++) \{}
\DoxyCodeLine{00742           \mbox{\hyperlink{structtoonz__param__desc__t__}{toonz\_param\_desc\_t}} *desc = \&grp-\/>array[i];}
\DoxyCodeLine{00743           pos                      = desc;}
\DoxyCodeLine{00744           \textcolor{keywordflow}{if} (\textcolor{keywordtype}{int} e = check\_base\_sanity(desc)) err |= e;}
\DoxyCodeLine{00745           \textcolor{keywordflow}{if} (desc-\/>key == NULL)}
\DoxyCodeLine{00746             err |= TOONZ\_PARAM\_ERROR\_NO\_KEY;}
\DoxyCodeLine{00747           \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00748             \textcolor{keywordflow}{if} (!validateKeyName(desc-\/>key)) err |= TOONZ\_PARAM\_ERROR\_KEY\_NAME;}
\DoxyCodeLine{00749             \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} it : params\_) \{}
\DoxyCodeLine{00750               \textcolor{keywordflow}{if} (it-\/>name() == desc-\/>key) \{}
\DoxyCodeLine{00751                 err |= TOONZ\_PARAM\_ERROR\_KEY\_DUP;}
\DoxyCodeLine{00752                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{00753               \}}
\DoxyCodeLine{00754             \}}
\DoxyCodeLine{00755           \}}
\DoxyCodeLine{00756           \textcolor{keywordflow}{if} (desc-\/>reserved\_[0] ||}
\DoxyCodeLine{00757               desc-\/>reserved\_[1])  \textcolor{comment}{// reserved fields must be zero}}
\DoxyCodeLine{00758             err |= TOONZ\_PARAM\_ERROR\_POLLUTED;}
\DoxyCodeLine{00759           err |= check\_traits\_sanity(desc);}
\DoxyCodeLine{00760 }
\DoxyCodeLine{00761           \textcolor{keywordflow}{if} (err) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00762         \}}
\DoxyCodeLine{00763       \}}
\DoxyCodeLine{00764     \}}
\DoxyCodeLine{00765 }
\DoxyCodeLine{00766     \textcolor{keywordflow}{if} (err) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00767 }
\DoxyCodeLine{00768     \textcolor{comment}{// deep copy param resources}}
\DoxyCodeLine{00769     std::vector<std::shared\_ptr<void>> \&param\_resources = pi\_-\/>param\_resources\_;}
\DoxyCodeLine{00770     std::vector<std::shared\_ptr<std::string>> \&strtbl = pi\_-\/>param\_string\_tbl\_;}
\DoxyCodeLine{00771 }
\DoxyCodeLine{00772     \textcolor{keyword}{auto} patch\_string = [\&](\textcolor{keyword}{const} \textcolor{keywordtype}{char} *srcstr) \{}
\DoxyCodeLine{00773       strtbl.push\_back(std::shared\_ptr<std::string>(\textcolor{keyword}{new} std::string(\textcolor{stringliteral}{"{}"{}})));}
\DoxyCodeLine{00774       \textcolor{keywordflow}{if} (srcstr) strtbl.back()-\/>assign(srcstr);}
\DoxyCodeLine{00775       \textcolor{keywordflow}{return} strtbl.back()-\/>c\_str();}
\DoxyCodeLine{00776     \};}
\DoxyCodeLine{00777 }
\DoxyCodeLine{00778     \textcolor{keyword}{auto} deep\_copy\_base = [\&](\mbox{\hyperlink{structtoonz__param__base__t__}{toonz\_param\_base\_t\_}} \&dst,}
\DoxyCodeLine{00779                               \textcolor{keyword}{const} \mbox{\hyperlink{structtoonz__param__base__t__}{toonz\_param\_base\_t\_}} \&src) \{}
\DoxyCodeLine{00780       dst.ver   = src.ver;}
\DoxyCodeLine{00781       dst.type  = src.type;}
\DoxyCodeLine{00782       dst.label = patch\_string(src.label);}
\DoxyCodeLine{00783     \};}
\DoxyCodeLine{00784 }
\DoxyCodeLine{00785     param\_resources.clear();}
\DoxyCodeLine{00786 }
\DoxyCodeLine{00787     std::unique\_ptr<toonz\_param\_page\_t[]> origin\_pages(}
\DoxyCodeLine{00788         \textcolor{keyword}{new} \mbox{\hyperlink{structtoonz__param__page__t__}{toonz\_param\_page\_t}}[n]);}
\DoxyCodeLine{00789     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < n; i++) \{}
\DoxyCodeLine{00790       \mbox{\hyperlink{structtoonz__param__page__t__}{toonz\_param\_page\_t}} \&dst\_page       = origin\_pages[i];}
\DoxyCodeLine{00791       \textcolor{keyword}{const} \mbox{\hyperlink{structtoonz__param__page__t__}{toonz\_param\_page\_t}} \&src\_page = p[i];}
\DoxyCodeLine{00792 }
\DoxyCodeLine{00793       deep\_copy\_base(dst\_page.base, src\_page.base);}
\DoxyCodeLine{00794 }
\DoxyCodeLine{00795       \textcolor{keyword}{const} \textcolor{keywordtype}{int} group\_num = dst\_page.num = src\_page.num;}
\DoxyCodeLine{00796       dst\_page.array                     = \textcolor{keyword}{new} \mbox{\hyperlink{structtoonz__param__group__t__}{toonz\_param\_group\_t}}[group\_num];}
\DoxyCodeLine{00797 }
\DoxyCodeLine{00798       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < group\_num; j++) \{}
\DoxyCodeLine{00799         \mbox{\hyperlink{structtoonz__param__group__t__}{toonz\_param\_group\_t}} \&dst\_group       = dst\_page.array[j];}
\DoxyCodeLine{00800         \textcolor{keyword}{const} \mbox{\hyperlink{structtoonz__param__group__t__}{toonz\_param\_group\_t}} \&src\_group = src\_page.array[j];}
\DoxyCodeLine{00801 }
\DoxyCodeLine{00802         deep\_copy\_base(dst\_group.base, src\_group.base);}
\DoxyCodeLine{00803 }
\DoxyCodeLine{00804         \textcolor{keyword}{const} \textcolor{keywordtype}{int} desc\_num = dst\_group.num = src\_group.num;}
\DoxyCodeLine{00805         dst\_group.array                    = \textcolor{keyword}{new} \mbox{\hyperlink{structtoonz__param__desc__t__}{toonz\_param\_desc\_t}}[desc\_num];}
\DoxyCodeLine{00806         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < desc\_num; k++) \{}
\DoxyCodeLine{00807           \mbox{\hyperlink{structtoonz__param__desc__t__}{toonz\_param\_desc\_t}} \&dst\_desc       = dst\_group.array[k];}
\DoxyCodeLine{00808           \textcolor{keyword}{const} \mbox{\hyperlink{structtoonz__param__desc__t__}{toonz\_param\_desc\_t}} \&src\_desc = src\_group.array[k];}
\DoxyCodeLine{00809 }
\DoxyCodeLine{00810           deep\_copy\_base(dst\_desc.base, src\_desc.base);  \textcolor{comment}{// base}}
\DoxyCodeLine{00811 }
\DoxyCodeLine{00812           dst\_desc.key  = patch\_string(src\_desc.key);   \textcolor{comment}{// key}}
\DoxyCodeLine{00813           dst\_desc.note = patch\_string(src\_desc.note);  \textcolor{comment}{// note}}
\DoxyCodeLine{00814           memcpy(dst\_desc.reserved\_, src\_desc.reserved\_,}
\DoxyCodeLine{00815                  \textcolor{keyword}{sizeof}(src\_desc.reserved\_));         \textcolor{comment}{// reserved fields}}
\DoxyCodeLine{00816           dst\_desc.traits\_tag = src\_desc.traits\_tag;  \textcolor{comment}{// tag}}
\DoxyCodeLine{00817 }
\DoxyCodeLine{00818           \textcolor{comment}{// traits}}
\DoxyCodeLine{00819           \textcolor{keywordflow}{if} (dst\_desc.traits\_tag == TOONZ\_PARAM\_TYPE\_ENUM) \{}
\DoxyCodeLine{00820             dst\_desc.traits.e.def = src\_desc.traits.e.def;}
\DoxyCodeLine{00821             \textcolor{keywordtype}{int} enums = dst\_desc.traits.e.enums = src\_desc.traits.e.enums;}
\DoxyCodeLine{00822             \textcolor{keyword}{auto} a = std::shared\_ptr<void>(\textcolor{keyword}{new} \textcolor{keywordtype}{char} *[enums]);}
\DoxyCodeLine{00823             param\_resources.push\_back(a);}
\DoxyCodeLine{00824             dst\_desc.traits.e.array = \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const }\textcolor{keywordtype}{char} **\textcolor{keyword}{>}(a.get());}
\DoxyCodeLine{00825             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < enums; i++)}
\DoxyCodeLine{00826               dst\_desc.traits.e.array[i] =}
\DoxyCodeLine{00827                   patch\_string(src\_desc.traits.e.array[i]);}
\DoxyCodeLine{00828           \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dst\_desc.traits\_tag == TOONZ\_PARAM\_TYPE\_SPECTRUM) \{}
\DoxyCodeLine{00829             \textcolor{keywordtype}{int} points = dst\_desc.traits.g.points = src\_desc.traits.g.points;}
\DoxyCodeLine{00830             \textcolor{keyword}{auto} ptr                              = std::shared\_ptr<void>(}
\DoxyCodeLine{00831                 \textcolor{keyword}{new} toonz\_param\_traits\_spectrum\_t::valuetype[points]);}
\DoxyCodeLine{00832             param\_resources.push\_back(ptr);}
\DoxyCodeLine{00833             dst\_desc.traits.g.array =}
\DoxyCodeLine{00834                 \textcolor{keyword}{static\_cast<}toonz\_param\_traits\_spectrum\_t::valuetype *\textcolor{keyword}{>}(}
\DoxyCodeLine{00835                     ptr.get());}
\DoxyCodeLine{00836 }
\DoxyCodeLine{00837             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < dst\_desc.traits.g.points; i++)}
\DoxyCodeLine{00838               memcpy(\&dst\_desc.traits.g.array[i], \&src\_desc.traits.g.array[i],}
\DoxyCodeLine{00839                      \textcolor{keyword}{sizeof}(toonz\_param\_traits\_spectrum\_t::valuetype));}
\DoxyCodeLine{00840           \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dst\_desc.traits\_tag == TOONZ\_PARAM\_TYPE\_STRING) \{}
\DoxyCodeLine{00841             dst\_desc.traits.s.def = patch\_string(src\_desc.traits.s.def);}
\DoxyCodeLine{00842           \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dst\_desc.traits\_tag == TOONZ\_PARAM\_TYPE\_TONECURVE) \{}
\DoxyCodeLine{00843             \textcolor{comment}{/* has no default values */}}
\DoxyCodeLine{00844           \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00845             memcpy(\&dst\_desc.traits, \&src\_desc.traits, \textcolor{keyword}{sizeof}(src\_desc.traits));}
\DoxyCodeLine{00846           \}}
\DoxyCodeLine{00847         \}}
\DoxyCodeLine{00848       \}}
\DoxyCodeLine{00849     \}}
\DoxyCodeLine{00850 }
\DoxyCodeLine{00851     pi\_-\/>param\_page\_num\_ = n;}
\DoxyCodeLine{00852     pi\_-\/>param\_pages\_    = std::move(origin\_pages);}
\DoxyCodeLine{00853     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00854   \}}
\DoxyCodeLine{00855   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00856 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_fx_plugin_host_a8562973f7eb98f76638b2263d90cab5b}\label{class_raster_fx_plugin_host_a8562973f7eb98f76638b2263d90cab5b}} 
\index{RasterFxPluginHost@{RasterFxPluginHost}!setUserData@{setUserData}}
\index{setUserData@{setUserData}!RasterFxPluginHost@{RasterFxPluginHost}}
\doxysubsubsection{\texorpdfstring{setUserData()}{setUserData()}}
{\footnotesize\ttfamily void Raster\+Fx\+Plugin\+Host\+::set\+User\+Data (\begin{DoxyParamCaption}\item[{void $\ast$}]{user\+\_\+data }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00471                                                     \{}
\DoxyCodeLine{00472   user\_data\_ = user\_data;}
\DoxyCodeLine{00473 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonzqt/pluginhost.\+h\item 
E\+:/opentoonz/toonz/sources/toonzqt/pluginhost.\+cpp\end{DoxyCompactItemize}
