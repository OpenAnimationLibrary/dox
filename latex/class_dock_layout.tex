\hypertarget{class_dock_layout}{}\doxysection{Dock\+Layout Class Reference}
\label{class_dock_layout}\index{DockLayout@{DockLayout}}


{\ttfamily \#include $<$docklayout.\+h$>$}

Inheritance diagram for Dock\+Layout\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_dock_layout}
\end{center}
\end{figure}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
typedef std\+::pair$<$ std\+::vector$<$ QRect $>$, QString $>$ \mbox{\hyperlink{class_dock_layout_a21d48420fe967334b97130c58c40b9ee}{State}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{class_dock_layout_a213a99e39a10e0eeaf4898b71513ca82}{count}} (void) const override
\item 
void \mbox{\hyperlink{class_dock_layout_af0629562a0f509acdb7da7f25673a460}{add\+Item}} (QLayout\+Item $\ast$item) override
\item 
QSize \mbox{\hyperlink{class_dock_layout_a0f2dec94737823c8764a1758ca80822f}{size\+Hint}} () const override
\item 
QSize \mbox{\hyperlink{class_dock_layout_ab5554d93c51734f632e374e18abaa2a9}{minimum\+Size}} () const override
\item 
QSize \mbox{\hyperlink{class_dock_layout_a411b22275730947646d0e278bae2b2c1}{maximum\+Size}} () const override
\item 
QLayout\+Item $\ast$ \mbox{\hyperlink{class_dock_layout_a3a475071418f3fdef4bb708113de3ab4}{item\+At}} (int) const override
\item 
QWidget $\ast$ \mbox{\hyperlink{class_dock_layout_ad55c6bca8ad56a489fc77afddcaeee38}{widget\+At}} (int) const
\item 
QLayout\+Item $\ast$ \mbox{\hyperlink{class_dock_layout_aaba247b4898c7211686031a4464feb5c}{take\+At}} (int) override
\item 
void \mbox{\hyperlink{class_dock_layout_a8a81f05e391a078a4f4ad951e059bfe7}{set\+Geometry}} (const QRect \&rect) override
\begin{DoxyCompactList}\small\item\em NOTE\+: This method is currently unused by \mbox{\hyperlink{class_dock_layout}{Dock\+Layout}} implementation... \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_dock_layout_a04eb5e2fdf22478c7a8aa50f99ff3668}{update}} ()
\item 
void \mbox{\hyperlink{class_dock_layout_a69b63838813aa7448060dd60f05e763c}{redistribute}} ()
\item 
void \mbox{\hyperlink{class_dock_layout_a7334af9707b7ccc9bf5ae23ff066555b}{apply\+Transform}} (const QTransform \&transform)
\item 
\mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$ \mbox{\hyperlink{class_dock_layout_a9d3b9ad52b2f99fc7f3009df76741be2}{get\+Maximized}} ()
\item 
void \mbox{\hyperlink{class_dock_layout_a8906566c13a82b50ef107089d6ee2dc7}{set\+Maximized}} (\mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$item, bool state=true)
\item 
\mbox{\hyperlink{class_region}{Region}} $\ast$ \mbox{\hyperlink{class_dock_layout_a536eefbe554eb4b451f8aecc13eab730}{dock\+Item}} (\mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$item, \mbox{\hyperlink{class_region}{Region}} $\ast$r=0, int idx=0)
\item 
void \mbox{\hyperlink{class_dock_layout_a711d02ecab994f2032d70a2192b929d0}{dock\+Item}} (\mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$item, \mbox{\hyperlink{class_dock_placeholder}{Dock\+Placeholder}} $\ast$place)
\begin{DoxyCompactList}\small\item\em {\bfseries{NOTE\+:}} Docked items are forcedly shown. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_dock_layout_a9bdd18b713915081b96e5b74ee01fdb8}{dock\+Item}} (\mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$item, \mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$target, int region\+Side)
\item 
bool \mbox{\hyperlink{class_dock_layout_ad36e77a79ff02104b0d41d8f2801bc5e}{undock\+Item}} (\mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$item)
\begin{DoxyCompactList}\small\item\em Undocks {\bfseries{item}} and updates geometry. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_dock_layout_a92c8472d6c6b7cd0bdb479478c91dd94}{calculate\+Dock\+Placeholders}} (\mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$item)
\item 
\mbox{\hyperlink{class_region}{Region}} $\ast$ \mbox{\hyperlink{class_dock_layout_aa2c3f499015acc5619cec81c29454a6b}{root\+Region}} () const
\item 
const std\+::deque$<$ \mbox{\hyperlink{class_region}{Region}} $\ast$ $>$ \& \mbox{\hyperlink{class_dock_layout_a9c92d275518b7b35add4c3792fbd0b9a}{regions}} () const
\item 
\mbox{\hyperlink{class_region}{Region}} $\ast$ \mbox{\hyperlink{class_dock_layout_a9ee1456b1987c4923af9a0995f648bd8}{region}} (int i) const
\item 
\mbox{\hyperlink{class_region}{Region}} $\ast$ \mbox{\hyperlink{class_dock_layout_a8e2c2523ed3e68846364e5b61b97ab18}{find}} (\mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$item) const
\item 
QWidget $\ast$ \mbox{\hyperlink{class_dock_layout_a1c31489eb36465df7050f399555f7f87}{container\+Of}} (QPoint point) const
\item 
State \mbox{\hyperlink{class_dock_layout_a43bacb88156d890692a1cf7440654d4e}{save\+State}} ()
\item 
bool \mbox{\hyperlink{class_dock_layout_a8203490f8ec20cfe0fb1fb66d986553d}{restore\+State}} (const State \&state)
\begin{DoxyCompactList}\small\item\em Restores the given internal structure of the layout. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_dock_layout_a65ee3347a86fa365b7ce4f99ad91cec2}{set\+Deco\+Allocator}} (\mbox{\hyperlink{class_dock_deco_allocator}{Dock\+Deco\+Allocator}} $\ast$deco\+Allocator)
\begin{DoxyCompactList}\small\item\em {\bfseries{NOTE\+:}} \mbox{\hyperlink{class_dock_layout}{Dock\+Layout}} takes ownership of the allocator. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\mbox{\hyperlink{class_dock_layout}{Dock\+Layout}} inherits the abstract QLayout to provide a docking system for widgets.

{\bfseries{IMPORTANT}} NOTE\+: Observe that the add\+Widget() method expects only widgets of type \mbox{\hyperlink{class_dock_widget}{Dock\+Widget}}, so any other widget type added to this kind of Layout will cause a run-\/time error.

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} and \mbox{\hyperlink{class_dock_separator}{Dock\+Separator}} classes. 
\end{DoxySeeAlso}


\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{class_dock_layout_a21d48420fe967334b97130c58c40b9ee}\label{class_dock_layout_a21d48420fe967334b97130c58c40b9ee}} 
\index{DockLayout@{DockLayout}!State@{State}}
\index{State@{State}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{State}{State}}
{\footnotesize\ttfamily typedef std\+::pair$<$std\+::vector$<$QRect$>$, QString$>$ Dock\+Layout\+::\+State}



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_dock_layout_aeeddd3341857952a663a6acdf9a6bc43}\label{class_dock_layout_aeeddd3341857952a663a6acdf9a6bc43}} 
\index{DockLayout@{DockLayout}!DockLayout@{DockLayout}}
\index{DockLayout@{DockLayout}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{DockLayout()}{DockLayout()}}
{\footnotesize\ttfamily Dock\+Layout\+::\+Dock\+Layout (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00094     : m\_maximizedDock(0), m\_decoAllocator(\textcolor{keyword}{new} \mbox{\hyperlink{class_dock_deco_allocator}{DockDecoAllocator}}()) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a614ee5ce1be1f602336c5d7a59ab1aeb}\label{class_dock_layout_a614ee5ce1be1f602336c5d7a59ab1aeb}} 
\index{DockLayout@{DockLayout}!````~DockLayout@{$\sim$DockLayout}}
\index{````~DockLayout@{$\sim$DockLayout}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{$\sim$DockLayout()}{~DockLayout()}}
{\footnotesize\ttfamily Dock\+Layout\+::$\sim$\+Dock\+Layout (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00098                         \{}
\DoxyCodeLine{00099   \textcolor{comment}{// Deleting Regions (separators are Widgets with parent, so they are}}
\DoxyCodeLine{00100   \textcolor{comment}{// recursively deleted)}}
\DoxyCodeLine{00101   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00102   \textcolor{keywordflow}{for} (i = 0; i < m\_regions.size(); ++i) \textcolor{keyword}{delete} m\_regions[i];}
\DoxyCodeLine{00103 }
\DoxyCodeLine{00104   \textcolor{comment}{// Deleting dockWidgets}}
\DoxyCodeLine{00105   \textcolor{keywordflow}{for} (i = 0; i < m\_items.size(); ++i) \{}
\DoxyCodeLine{00106     \textcolor{comment}{// delete m\_items[i]-\/>widget();}}
\DoxyCodeLine{00107     \textcolor{keyword}{delete} m\_items[i];}
\DoxyCodeLine{00108   \}}
\DoxyCodeLine{00109 }
\DoxyCodeLine{00110   \textcolor{comment}{// Delete deco allocator}}
\DoxyCodeLine{00111   \textcolor{keyword}{delete} m\_decoAllocator;}
\DoxyCodeLine{00112 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_dock_layout_af0629562a0f509acdb7da7f25673a460}\label{class_dock_layout_af0629562a0f509acdb7da7f25673a460}} 
\index{DockLayout@{DockLayout}!addItem@{addItem}}
\index{addItem@{addItem}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{addItem()}{addItem()}}
{\footnotesize\ttfamily void Dock\+Layout\+::add\+Item (\begin{DoxyParamCaption}\item[{QLayout\+Item $\ast$}]{item }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00120                                           \{}
\DoxyCodeLine{00121   \mbox{\hyperlink{class_dock_widget}{DockWidget}} *addedItem = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dock_widget}{DockWidget}} *\textcolor{keyword}{>}(item-\/>widget());}
\DoxyCodeLine{00122 }
\DoxyCodeLine{00123   \textcolor{comment}{// Ensure that added item is effectively a DockWidget type;}}
\DoxyCodeLine{00124   assert(addedItem);}
\DoxyCodeLine{00125 }
\DoxyCodeLine{00126   \textcolor{comment}{// Check if item is already under layout's control. If so, quit.}}
\DoxyCodeLine{00127   \textcolor{keywordflow}{if} (find(addedItem)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00128 }
\DoxyCodeLine{00129   \textcolor{comment}{// Force reparentation. This is required in order to ensure that all items}}
\DoxyCodeLine{00130   \textcolor{comment}{// possess}}
\DoxyCodeLine{00131   \textcolor{comment}{// the same geometry() reference. Also store parentLayout for convenience.}}
\DoxyCodeLine{00132   addedItem-\/>m\_parentLayout = \textcolor{keyword}{this};}
\DoxyCodeLine{00133   addedItem-\/>setParent(parentWidget());}
\DoxyCodeLine{00134 }
\DoxyCodeLine{00135   \textcolor{comment}{// Remember that reparenting a widget produces a window flags reset if the new}}
\DoxyCodeLine{00136   \textcolor{comment}{// parent is not the current one (see Qt's manual). So, first reassign}}
\DoxyCodeLine{00137   \textcolor{comment}{// standard}}
\DoxyCodeLine{00138   \textcolor{comment}{// floating flags, then call for custom appearance (which may eventually}}
\DoxyCodeLine{00139   \textcolor{comment}{// reassign the flags).}}
\DoxyCodeLine{00140   addedItem-\/>setWindowFlags(Qt::Tool | Qt::FramelessWindowHint);}
\DoxyCodeLine{00141   addedItem-\/>\mbox{\hyperlink{class_dock_widget_a2138687c3cb1b48a87e1705e104780da}{setFloatingAppearance}}();}
\DoxyCodeLine{00142 }
\DoxyCodeLine{00143   m\_items.push\_back(item);}
\DoxyCodeLine{00144 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a7334af9707b7ccc9bf5ae23ff066555b}\label{class_dock_layout_a7334af9707b7ccc9bf5ae23ff066555b}} 
\index{DockLayout@{DockLayout}!applyTransform@{applyTransform}}
\index{applyTransform@{applyTransform}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{applyTransform()}{applyTransform()}}
{\footnotesize\ttfamily void Dock\+Layout\+::apply\+Transform (\begin{DoxyParamCaption}\item[{const QTransform \&}]{transform }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00417                                                            \{}
\DoxyCodeLine{00418   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00419   \textcolor{keywordflow}{for} (i = 0; i < m\_regions.size(); ++i)}
\DoxyCodeLine{00420     m\_regions[i]-\/>\mbox{\hyperlink{class_dock_layout_a8a81f05e391a078a4f4ad951e059bfe7}{setGeometry}}(transform.mapRect(m\_regions[i]-\/>getGeometry()));}
\DoxyCodeLine{00421 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a92c8472d6c6b7cd0bdb479478c91dd94}\label{class_dock_layout_a92c8472d6c6b7cd0bdb479478c91dd94}} 
\index{DockLayout@{DockLayout}!calculateDockPlaceholders@{calculateDockPlaceholders}}
\index{calculateDockPlaceholders@{calculateDockPlaceholders}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{calculateDockPlaceholders()}{calculateDockPlaceholders()}}
{\footnotesize\ttfamily void Dock\+Layout\+::calculate\+Dock\+Placeholders (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$}]{item }\end{DoxyParamCaption})}

Calculates possible docking solutions for {\bfseries{this}} dock widget. They are stored into the dock widget. {\bfseries{NOTE\+:}} Placeholders are here calculated by decreasing importance; in other words, if two rects are part of the layout, and the first contains the second, placeholders of the first are found before those of the second. This fact may be exploited when selecting an appropriate placeholder for docking. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00591                                                            \{}
\DoxyCodeLine{00592   assert(item);}
\DoxyCodeLine{00593 }
\DoxyCodeLine{00594   \textcolor{comment}{// If the DockLayout's owner widget is hidden, avoid}}
\DoxyCodeLine{00595   \textcolor{keywordflow}{if} (!parentWidget()-\/>isVisible()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00596 }
\DoxyCodeLine{00597   \textcolor{keywordflow}{if} (!m\_regions.size()) \{}
\DoxyCodeLine{00598     \textcolor{keywordflow}{if} (isPossibleInsertion(item, 0, 0)) \{}
\DoxyCodeLine{00599       \textcolor{comment}{// Then insert a root placeholder only}}
\DoxyCodeLine{00600       item-\/>m\_placeholders.push\_back(item-\/>m\_decoAllocator-\/>newPlaceBuilt(}
\DoxyCodeLine{00601           item, 0, 0, DockPlaceholder::root));}
\DoxyCodeLine{00602       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00603     \}}
\DoxyCodeLine{00604   \}}
\DoxyCodeLine{00605 }
\DoxyCodeLine{00606   \textcolor{comment}{// For all regions (and for all insertion index), check if}}
\DoxyCodeLine{00607   \textcolor{comment}{// insertion may succeed.}}
\DoxyCodeLine{00608   \textcolor{comment}{// NOTE: Insertion chance is just the same for all indexes in a given}}
\DoxyCodeLine{00609   \textcolor{comment}{// parent region...}}
\DoxyCodeLine{00610 }
\DoxyCodeLine{00611   \textcolor{comment}{// First check parentRegion=0 (under a new Root -\/ External cases)}}
\DoxyCodeLine{00612   \textcolor{keywordflow}{if} (isPossibleInsertion(item, 0, 0)) \{}
\DoxyCodeLine{00613     QRect contRect = contentsRect();}
\DoxyCodeLine{00614     \textcolor{keywordflow}{if} (m\_regions.front()-\/>getOrientation() == Region::horizontal) \{}
\DoxyCodeLine{00615       item-\/>m\_placeholders.push\_back(item-\/>m\_decoAllocator-\/>newPlaceBuilt(}
\DoxyCodeLine{00616           item, 0, 0, DockPlaceholder::top));}
\DoxyCodeLine{00617       item-\/>m\_placeholders.push\_back(item-\/>m\_decoAllocator-\/>newPlaceBuilt(}
\DoxyCodeLine{00618           item, 0, 1, DockPlaceholder::bottom));}
\DoxyCodeLine{00619     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00620       item-\/>m\_placeholders.push\_back(item-\/>m\_decoAllocator-\/>newPlaceBuilt(}
\DoxyCodeLine{00621           item, 0, 0, DockPlaceholder::left));}
\DoxyCodeLine{00622       item-\/>m\_placeholders.push\_back(item-\/>m\_decoAllocator-\/>newPlaceBuilt(}
\DoxyCodeLine{00623           item, 0, 1, DockPlaceholder::right));}
\DoxyCodeLine{00624     \}}
\DoxyCodeLine{00625   \}}
\DoxyCodeLine{00626 }
\DoxyCodeLine{00627   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00628   \textcolor{keywordflow}{for} (i = 0; i < m\_regions.size(); ++i) \{}
\DoxyCodeLine{00629     Region *r = m\_regions[i];}
\DoxyCodeLine{00630     r-\/>m\_placeholders.clear();}
\DoxyCodeLine{00631 }
\DoxyCodeLine{00632     \textcolor{keywordflow}{if} (isPossibleInsertion(item, r, 0)) \{}
\DoxyCodeLine{00633       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} j;}
\DoxyCodeLine{00634       QRect cellRect;}
\DoxyCodeLine{00635 }
\DoxyCodeLine{00636       \textcolor{comment}{// For all indices, insert a placeholder}}
\DoxyCodeLine{00637       \textcolor{keywordflow}{if} (r-\/>getOrientation() == Region::horizontal) \{}
\DoxyCodeLine{00638         \textcolor{comment}{// Left side}}
\DoxyCodeLine{00639         item-\/>m\_placeholders.push\_back(item-\/>m\_decoAllocator-\/>newPlaceBuilt(}
\DoxyCodeLine{00640             item, r, 0, DockPlaceholder::left));}
\DoxyCodeLine{00641         r-\/>m\_placeholders.push\_back(item-\/>m\_placeholders.back());}
\DoxyCodeLine{00642 }
\DoxyCodeLine{00643         \textcolor{comment}{// Separators}}
\DoxyCodeLine{00644         \textcolor{keywordflow}{for} (j = 1; j < r-\/>getChildList().size(); ++j) \{}
\DoxyCodeLine{00645           item-\/>m\_placeholders.push\_back(item-\/>m\_decoAllocator-\/>newPlaceBuilt(}
\DoxyCodeLine{00646               item, r, j, DockPlaceholder::sepVert));}
\DoxyCodeLine{00647           r-\/>m\_placeholders.push\_back(item-\/>m\_placeholders.back());}
\DoxyCodeLine{00648         \}}
\DoxyCodeLine{00649 }
\DoxyCodeLine{00650         \textcolor{comment}{// Right side}}
\DoxyCodeLine{00651         item-\/>m\_placeholders.push\_back(item-\/>m\_decoAllocator-\/>newPlaceBuilt(}
\DoxyCodeLine{00652             item, r, j, DockPlaceholder::right));}
\DoxyCodeLine{00653         r-\/>m\_placeholders.push\_back(item-\/>m\_placeholders.back());}
\DoxyCodeLine{00654       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00655         \textcolor{comment}{// Top side}}
\DoxyCodeLine{00656         item-\/>m\_placeholders.push\_back(item-\/>m\_decoAllocator-\/>newPlaceBuilt(}
\DoxyCodeLine{00657             item, r, 0, DockPlaceholder::top));}
\DoxyCodeLine{00658         r-\/>m\_placeholders.push\_back(item-\/>m\_placeholders.back());}
\DoxyCodeLine{00659 }
\DoxyCodeLine{00660         \textcolor{keywordflow}{for} (j = 1; j < r-\/>getChildList().size(); ++j) \{}
\DoxyCodeLine{00661           item-\/>m\_placeholders.push\_back(item-\/>m\_decoAllocator-\/>newPlaceBuilt(}
\DoxyCodeLine{00662               item, r, j, DockPlaceholder::sepHor));}
\DoxyCodeLine{00663           r-\/>m\_placeholders.push\_back(item-\/>m\_placeholders.back());}
\DoxyCodeLine{00664         \}}
\DoxyCodeLine{00665 }
\DoxyCodeLine{00666         \textcolor{comment}{// Bottom side}}
\DoxyCodeLine{00667         item-\/>m\_placeholders.push\_back(item-\/>m\_decoAllocator-\/>newPlaceBuilt(}
\DoxyCodeLine{00668             item, r, j, DockPlaceholder::bottom));}
\DoxyCodeLine{00669         r-\/>m\_placeholders.push\_back(item-\/>m\_placeholders.back());}
\DoxyCodeLine{00670       \}}
\DoxyCodeLine{00671     \}}
\DoxyCodeLine{00672   \}}
\DoxyCodeLine{00673 }
\DoxyCodeLine{00674   \textcolor{comment}{// Disable all placeholders}}
\DoxyCodeLine{00675   \textcolor{comment}{// for(i=0; i<item-\/>m\_placeholders.size(); ++i)}}
\DoxyCodeLine{00676   \textcolor{comment}{//  item-\/>m\_placeholders[i]-\/>setDisabled(true);}}
\DoxyCodeLine{00677 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a1c31489eb36465df7050f399555f7f87}\label{class_dock_layout_a1c31489eb36465df7050f399555f7f87}} 
\index{DockLayout@{DockLayout}!containerOf@{containerOf}}
\index{containerOf@{containerOf}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{containerOf()}{containerOf()}}
{\footnotesize\ttfamily QWidget $\ast$ Dock\+Layout\+::container\+Of (\begin{DoxyParamCaption}\item[{QPoint}]{point }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00223                                                    \{}
\DoxyCodeLine{00224   \textcolor{comment}{// Search among regions, from leaf regions to root.}}
\DoxyCodeLine{00225   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00226   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} j;}
\DoxyCodeLine{00227   \textcolor{keywordflow}{for} (i = m\_regions.size() -\/ 1; i >= 0; -\/-\/i) \{}
\DoxyCodeLine{00228     Region *currRegion = m\_regions[i];}
\DoxyCodeLine{00229     \mbox{\hyperlink{class_dock_widget}{DockWidget}} *item   = currRegion-\/>getItem();}
\DoxyCodeLine{00230 }
\DoxyCodeLine{00231     \textcolor{comment}{// First check if item contains it}}
\DoxyCodeLine{00232     \textcolor{keywordflow}{if} (item \&\& item-\/>geometry().contains(point)) \textcolor{keywordflow}{return} currRegion-\/>getItem();}
\DoxyCodeLine{00233 }
\DoxyCodeLine{00234     \textcolor{comment}{// Then, search among separators}}
\DoxyCodeLine{00235     \textcolor{keywordflow}{for} (j = 0; j < currRegion-\/>separators().size(); ++j)}
\DoxyCodeLine{00236       \textcolor{keywordflow}{if} (currRegion-\/>separator(j)-\/>geometry().contains(point))}
\DoxyCodeLine{00237         \textcolor{keywordflow}{return} currRegion-\/>separator(j);}
\DoxyCodeLine{00238   \}}
\DoxyCodeLine{00239 }
\DoxyCodeLine{00240   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00241 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a213a99e39a10e0eeaf4898b71513ca82}\label{class_dock_layout_a213a99e39a10e0eeaf4898b71513ca82}} 
\index{DockLayout@{DockLayout}!count@{count}}
\index{count@{count}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{count()}{count()}}
{\footnotesize\ttfamily int Dock\+Layout\+::count (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00116 \{ \textcolor{keywordflow}{return} m\_items.size(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a711d02ecab994f2032d70a2192b929d0}\label{class_dock_layout_a711d02ecab994f2032d70a2192b929d0}} 
\index{DockLayout@{DockLayout}!dockItem@{dockItem}}
\index{dockItem@{dockItem}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{dockItem()}{dockItem()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily void Dock\+Layout\+::dock\+Item (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$}]{item,  }\item[{\mbox{\hyperlink{class_dock_placeholder}{Dock\+Placeholder}} $\ast$}]{place }\end{DoxyParamCaption})}



{\bfseries{NOTE\+:}} Docked items are forcedly shown. 

Docks input {\bfseries{item}} before position {\bfseries{idx}} of region {\bfseries{r}}. Deals with overall region hierarchy. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00685                                                                   \{}
\DoxyCodeLine{00686   place-\/>hide();}
\DoxyCodeLine{00687   item-\/>hide();}
\DoxyCodeLine{00688   dockItemPrivate(item, place-\/>m\_region, place-\/>m\_idx);}
\DoxyCodeLine{00689   redistribute();}
\DoxyCodeLine{00690   parentWidget()-\/>repaint();}
\DoxyCodeLine{00691   item-\/>setWindowFlags(Qt::SubWindow);}
\DoxyCodeLine{00692   item-\/>show();}
\DoxyCodeLine{00693 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a9bdd18b713915081b96e5b74ee01fdb8}\label{class_dock_layout_a9bdd18b713915081b96e5b74ee01fdb8}} 
\index{DockLayout@{DockLayout}!dockItem@{dockItem}}
\index{dockItem@{dockItem}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{dockItem()}{dockItem()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily void Dock\+Layout\+::dock\+Item (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$}]{item,  }\item[{\mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$}]{target,  }\item[{int}]{region\+Side }\end{DoxyParamCaption})}

Docks input {\bfseries{item}} at side {\bfseries{regionside}} of {\bfseries{target}} dock widget. Region\+Side can be Region\+::left, right, top or bottom. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00700                                           \{}
\DoxyCodeLine{00701   Region *targetRegion = find(target);}
\DoxyCodeLine{00702 }
\DoxyCodeLine{00703   \textcolor{keywordtype}{short} var = regionSide >> 2 * (int)targetRegion-\/>getOrientation();}
\DoxyCodeLine{00704   \textcolor{keywordtype}{bool} pos  = regionSide \& 0xa;}
\DoxyCodeLine{00705 }
\DoxyCodeLine{00706   item-\/>setWindowFlags(Qt::SubWindow);}
\DoxyCodeLine{00707   item-\/>show();}
\DoxyCodeLine{00708 }
\DoxyCodeLine{00709   \textcolor{keywordflow}{if} (var \& 0x3) \{}
\DoxyCodeLine{00710     \textcolor{comment}{// Side is coherent with orientation => Direct insertion at position 0 or 1}}
\DoxyCodeLine{00711     dockItemPrivate(item, targetRegion, pos);}
\DoxyCodeLine{00712   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00713     \textcolor{comment}{// Side is not coherent -\/ have to find target's index in parent region}}
\DoxyCodeLine{00714     Region *parentRegion = targetRegion-\/>getParent();}
\DoxyCodeLine{00715     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} idx =}
\DoxyCodeLine{00716         parentRegion ? parentRegion-\/>find(targetRegion) + pos : pos;}
\DoxyCodeLine{00717     dockItemPrivate(item, parentRegion, idx);}
\DoxyCodeLine{00718   \}}
\DoxyCodeLine{00719 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a536eefbe554eb4b451f8aecc13eab730}\label{class_dock_layout_a536eefbe554eb4b451f8aecc13eab730}} 
\index{DockLayout@{DockLayout}!dockItem@{dockItem}}
\index{dockItem@{dockItem}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{dockItem()}{dockItem()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_region}{Region}} $\ast$ Dock\+Layout\+::dock\+Item (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$}]{item,  }\item[{\mbox{\hyperlink{class_region}{Region}} $\ast$}]{r = {\ttfamily 0},  }\item[{int}]{idx = {\ttfamily 0} }\end{DoxyParamCaption})}

Docks input {\bfseries{item}} into \mbox{\hyperlink{class_region}{Region}} {\bfseries{r}}, at position {\bfseries{idx}}; returns region corresponding to newly inserted item. {\bfseries{NOTE\+:}} Unlike \mbox{\hyperlink{class_dock_layout_a711d02ecab994f2032d70a2192b929d0}{dock\+Item(\+Dock\+Widget$\ast$,\+Dock\+Placeholder$\ast$)}} and undock\+Item, this method is supposedly called directly into application code; therefore, no {\bfseries{redistribution}} is done after a single dock -\/ you are supposed to manually call redistribute() after all widgets have been docked. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00733                                                                  \{}
\DoxyCodeLine{00734   item-\/>setWindowFlags(Qt::SubWindow);}
\DoxyCodeLine{00735   item-\/>show();}
\DoxyCodeLine{00736   \textcolor{keywordflow}{return} dockItemPrivate(item, r, idx);}
\DoxyCodeLine{00737 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a8e2c2523ed3e68846364e5b61b97ab18}\label{class_dock_layout_a8e2c2523ed3e68846364e5b61b97ab18}} 
\index{DockLayout@{DockLayout}!find@{find}}
\index{find@{find}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{find()}{find()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_region}{Region}} $\ast$ Dock\+Layout\+::find (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$}]{item }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00572                                                \{}
\DoxyCodeLine{00573   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00574 }
\DoxyCodeLine{00575   \textcolor{keywordflow}{for} (i = 0; i < m\_regions.size(); ++i)}
\DoxyCodeLine{00576     \textcolor{keywordflow}{if} (m\_regions[i]-\/>getItem() == item) \textcolor{keywordflow}{return} m\_regions[i];}
\DoxyCodeLine{00577 }
\DoxyCodeLine{00578   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00579 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a9d3b9ad52b2f99fc7f3009df76741be2}\label{class_dock_layout_a9d3b9ad52b2f99fc7f3009df76741be2}} 
\index{DockLayout@{DockLayout}!getMaximized@{getMaximized}}
\index{getMaximized@{getMaximized}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{getMaximized()}{getMaximized()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$ Dock\+Layout\+::get\+Maximized (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00104 \{ \textcolor{keywordflow}{return} m\_maximizedDock; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a3a475071418f3fdef4bb708113de3ab4}\label{class_dock_layout_a3a475071418f3fdef4bb708113de3ab4}} 
\index{DockLayout@{DockLayout}!itemAt@{itemAt}}
\index{itemAt@{itemAt}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{itemAt()}{itemAt()}}
{\footnotesize\ttfamily QLayout\+Item $\ast$ Dock\+Layout\+::item\+At (\begin{DoxyParamCaption}\item[{int}]{idx }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00167                                              \{}
\DoxyCodeLine{00168   \textcolor{keywordflow}{if} (idx >= (\textcolor{keywordtype}{int})m\_items.size()) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00169   \textcolor{keywordflow}{return} m\_items[idx];}
\DoxyCodeLine{00170 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a411b22275730947646d0e278bae2b2c1}\label{class_dock_layout_a411b22275730947646d0e278bae2b2c1}} 
\index{DockLayout@{DockLayout}!maximumSize@{maximumSize}}
\index{maximumSize@{maximumSize}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{maximumSize()}{maximumSize()}}
{\footnotesize\ttfamily QSize Dock\+Layout\+::maximum\+Size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00190                                     \{}
\DoxyCodeLine{00191   \textcolor{keywordflow}{if} (!m\_regions.empty()) \{}
\DoxyCodeLine{00192     Region *r = m\_regions.front();}
\DoxyCodeLine{00193     r-\/>calculateExtremalSizes();}
\DoxyCodeLine{00194     \textcolor{keywordflow}{return} QSize(r-\/>m\_maximumSize[0], r-\/>m\_maximumSize[1]);}
\DoxyCodeLine{00195   \}}
\DoxyCodeLine{00196 }
\DoxyCodeLine{00197   \textcolor{keywordflow}{return} QSize(QWIDGETSIZE\_MAX, QWIDGETSIZE\_MAX);}
\DoxyCodeLine{00198 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_ab5554d93c51734f632e374e18abaa2a9}\label{class_dock_layout_ab5554d93c51734f632e374e18abaa2a9}} 
\index{DockLayout@{DockLayout}!minimumSize@{minimumSize}}
\index{minimumSize@{minimumSize}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{minimumSize()}{minimumSize()}}
{\footnotesize\ttfamily QSize Dock\+Layout\+::minimum\+Size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00178                                     \{}
\DoxyCodeLine{00179   \textcolor{keywordflow}{if} (!m\_regions.empty()) \{}
\DoxyCodeLine{00180     Region *r = m\_regions.front();}
\DoxyCodeLine{00181     r-\/>calculateExtremalSizes();}
\DoxyCodeLine{00182     \textcolor{keywordflow}{return} QSize(r-\/>m\_minimumSize[0], r-\/>m\_minimumSize[1]);}
\DoxyCodeLine{00183   \}}
\DoxyCodeLine{00184 }
\DoxyCodeLine{00185   \textcolor{keywordflow}{return} QSize(0, 0);}
\DoxyCodeLine{00186 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a69b63838813aa7448060dd60f05e763c}\label{class_dock_layout_a69b63838813aa7448060dd60f05e763c}} 
\index{DockLayout@{DockLayout}!redistribute@{redistribute}}
\index{redistribute@{redistribute}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{redistribute()}{redistribute()}}
{\footnotesize\ttfamily void Dock\+Layout\+::redistribute (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00465                               \{}
\DoxyCodeLine{00466   \textcolor{keywordflow}{if} (!m\_regions.empty()) \{}
\DoxyCodeLine{00467     std::vector<QWidget *> widgets;}
\DoxyCodeLine{00468 }
\DoxyCodeLine{00469     \textcolor{comment}{// Recompute extremal region sizes}}
\DoxyCodeLine{00470     \textcolor{comment}{// NOTA: Sarebbe da fare solo se un certo flag lo richiede; altrimenti tipo}}
\DoxyCodeLine{00471     \textcolor{comment}{// per resize events e' inutile...}}
\DoxyCodeLine{00472 }
\DoxyCodeLine{00473     \textcolor{comment}{// let's force the width of the film strip / style editor not to change}}
\DoxyCodeLine{00474     \textcolor{comment}{// check recursively from the root region, if the widgets can be fixed.}}
\DoxyCodeLine{00475     \textcolor{comment}{// it avoids all widgets in horizontal alignment to be fixed, or UI becomes}}
\DoxyCodeLine{00476     \textcolor{comment}{// glitchy.}}
\DoxyCodeLine{00477     \textcolor{keywordtype}{bool} fromDocking = \textcolor{keyword}{false};}
\DoxyCodeLine{00478     \textcolor{keywordtype}{bool} widgetsCanBeFixedWidth =}
\DoxyCodeLine{00479         !m\_regions.front()-\/>checkWidgetsToBeFixedWidth(widgets, fromDocking);}
\DoxyCodeLine{00480     \textcolor{keywordflow}{if} (!fromDocking \&\& widgetsCanBeFixedWidth) \{}
\DoxyCodeLine{00481       \textcolor{keywordflow}{for} (QWidget *widget : widgets) widget-\/>setFixedWidth(widget-\/>width());}
\DoxyCodeLine{00482     \}}
\DoxyCodeLine{00483 }
\DoxyCodeLine{00484     m\_regions.front()-\/>calculateExtremalSizes();}
\DoxyCodeLine{00485 }
\DoxyCodeLine{00486     \textcolor{keywordtype}{int} parentWidth  = contentsRect().width();}
\DoxyCodeLine{00487     \textcolor{keywordtype}{int} parentHeight = contentsRect().height();}
\DoxyCodeLine{00488 }
\DoxyCodeLine{00489     \textcolor{comment}{// Always check main window consistency before effective redistribution. DO}}
\DoxyCodeLine{00490     \textcolor{comment}{// NOT ERASE or crashes may occur...}}
\DoxyCodeLine{00491     \textcolor{keywordflow}{if} (m\_regions.front()-\/>getMinimumSize(Region::horizontal) > parentWidth ||}
\DoxyCodeLine{00492         m\_regions.front()-\/>getMinimumSize(Region::vertical) > parentHeight ||}
\DoxyCodeLine{00493         m\_regions.front()-\/>getMaximumSize(Region::horizontal) < parentWidth ||}
\DoxyCodeLine{00494         m\_regions.front()-\/>getMaximumSize(Region::vertical) < parentHeight)}
\DoxyCodeLine{00495       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00496 }
\DoxyCodeLine{00497     \textcolor{comment}{// Recompute Layout geometry}}
\DoxyCodeLine{00498     m\_regions.front()-\/>setGeometry(contentsRect());}
\DoxyCodeLine{00499     m\_regions.front()-\/>redistribute();}
\DoxyCodeLine{00500 }
\DoxyCodeLine{00501     \textcolor{keywordflow}{if} (!fromDocking \&\& widgetsCanBeFixedWidth) \{}
\DoxyCodeLine{00502       \textcolor{keywordflow}{for} (QWidget *widget : widgets) \{}
\DoxyCodeLine{00503         widget-\/>setMaximumSize(QWIDGETSIZE\_MAX, QWIDGETSIZE\_MAX);}
\DoxyCodeLine{00504         widget-\/>setMinimumSize(0, 0);}
\DoxyCodeLine{00505       \}}
\DoxyCodeLine{00506     \}}
\DoxyCodeLine{00507   \}}
\DoxyCodeLine{00508 }
\DoxyCodeLine{00509   \textcolor{comment}{// Finally, apply Region geometries found}}
\DoxyCodeLine{00510   applyGeometry();}
\DoxyCodeLine{00511 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a9ee1456b1987c4923af9a0995f648bd8}\label{class_dock_layout_a9ee1456b1987c4923af9a0995f648bd8}} 
\index{DockLayout@{DockLayout}!region@{region}}
\index{region@{region}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{region()}{region()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_region}{Region}} $\ast$ Dock\+Layout\+::region (\begin{DoxyParamCaption}\item[{int}]{i }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00121 \{ \textcolor{keywordflow}{return} m\_regions[i]; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a9c92d275518b7b35add4c3792fbd0b9a}\label{class_dock_layout_a9c92d275518b7b35add4c3792fbd0b9a}} 
\index{DockLayout@{DockLayout}!regions@{regions}}
\index{regions@{regions}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{regions()}{regions()}}
{\footnotesize\ttfamily const std\+::deque$<$ \mbox{\hyperlink{class_region}{Region}} $\ast$ $>$ \& Dock\+Layout\+::regions (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00120 \{ \textcolor{keywordflow}{return} m\_regions; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a8203490f8ec20cfe0fb1fb66d986553d}\label{class_dock_layout_a8203490f8ec20cfe0fb1fb66d986553d}} 
\index{DockLayout@{DockLayout}!restoreState@{restoreState}}
\index{restoreState@{restoreState}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{restoreState()}{restoreState()}}
{\footnotesize\ttfamily bool Dock\+Layout\+::restore\+State (\begin{DoxyParamCaption}\item[{const State \&}]{state }\end{DoxyParamCaption})}



Restores the given internal structure of the layout. 

This method is intended to restore the geometry of a set of items that was handled by the layout at the time the state was saved. Input are the geometries of the items involved and the dock hierarchy in form of a string. {\bfseries{IMPORTANT}} {\bfseries{NOTE\+:}} No check is performed on the item themselves, except for the consistency of their geometrical constraints inside the layout. Furthermore, this method does not ensure the identity of the items involved, assuming that the set of dock widget has ever been left unchanged or completely restored as it were when saved. In particular, their ordering must be preserved. 
\begin{DoxyCode}{0}
\DoxyCodeLine{01450                                                 \{}
\DoxyCodeLine{01451   QStringList vars = state.second.split(\textcolor{stringliteral}{"{} "{}}, QString::SkipEmptyParts);}
\DoxyCodeLine{01452   \textcolor{keywordflow}{if} (vars.size() < 1) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{01453 }
\DoxyCodeLine{01454   \textcolor{comment}{// Check number of items}}
\DoxyCodeLine{01455   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} count = state.first.size();}
\DoxyCodeLine{01456 }
\DoxyCodeLine{01457   \textcolor{keywordflow}{if} (m\_items.size() != count) \textcolor{keywordflow}{return} \textcolor{keyword}{false};  \textcolor{comment}{// Items list is not coherent}}
\DoxyCodeLine{01458 }
\DoxyCodeLine{01459   \textcolor{comment}{// Initialize new Regions hierarchy}}
\DoxyCodeLine{01460   std::deque<Region *> newHierarchy;}
\DoxyCodeLine{01461 }
\DoxyCodeLine{01462   \textcolor{comment}{// Load it}}
\DoxyCodeLine{01463   \textcolor{keywordtype}{int} maximizedItem = vars[0].toInt();}
\DoxyCodeLine{01464 }
\DoxyCodeLine{01465   \textcolor{keywordflow}{if} (vars.size() > 1) \{}
\DoxyCodeLine{01466     \textcolor{comment}{// Scan hierarchy}}
\DoxyCodeLine{01467     Region *r       = 0, *newRegion;}
\DoxyCodeLine{01468     \textcolor{keywordtype}{int} orientation = !vars[1].toInt();}
\DoxyCodeLine{01469 }
\DoxyCodeLine{01470     \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01471     \textcolor{keywordflow}{for} (i = 2; i < vars.size(); ++i) \{}
\DoxyCodeLine{01472       \textcolor{keywordflow}{if} (vars[i] == \textcolor{stringliteral}{"{}]"{}}) \{}
\DoxyCodeLine{01473         \textcolor{comment}{// End region and get parent}}
\DoxyCodeLine{01474         r = r-\/>getParent();}
\DoxyCodeLine{01475       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01476         \textcolor{comment}{// Allocate new Region}}
\DoxyCodeLine{01477         newRegion = \textcolor{keyword}{new} Region(\textcolor{keyword}{this});}
\DoxyCodeLine{01478         newHierarchy.push\_back(newRegion);}
\DoxyCodeLine{01479         newRegion-\/>m\_orientation = !orientation;}
\DoxyCodeLine{01480 }
\DoxyCodeLine{01481         \textcolor{keywordflow}{if} (r) r-\/>insertSubRegion(newRegion, r-\/>getChildList().size());}
\DoxyCodeLine{01482 }
\DoxyCodeLine{01483         \textcolor{keywordflow}{if} (vars[i] == \textcolor{stringliteral}{"{}["{}}) \{}
\DoxyCodeLine{01484           \textcolor{comment}{// Current region has children}}
\DoxyCodeLine{01485           r = newRegion;}
\DoxyCodeLine{01486         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01487           \textcolor{comment}{// newRegion has item}}
\DoxyCodeLine{01488           newRegion-\/>m\_item =}
\DoxyCodeLine{01489               \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_dock_widget}{DockWidget}} *\textcolor{keyword}{>}(m\_items[vars[i].toInt()]-\/>widget());}
\DoxyCodeLine{01490         \}}
\DoxyCodeLine{01491       \}}
\DoxyCodeLine{01492     \}}
\DoxyCodeLine{01493 }
\DoxyCodeLine{01494     \textcolor{comment}{// Check if size constraints are satisfied}}
\DoxyCodeLine{01495     newHierarchy[0]-\/>calculateExtremalSizes();}
\DoxyCodeLine{01496   \}}
\DoxyCodeLine{01497 }
\DoxyCodeLine{01498   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} j;}
\DoxyCodeLine{01499   \textcolor{keywordflow}{for} (j = 0; j < newHierarchy.size(); ++j) \{}
\DoxyCodeLine{01500     \textcolor{comment}{// Check if their extremal sizes are valid}}
\DoxyCodeLine{01501     Region *r = newHierarchy[j];}
\DoxyCodeLine{01502     \textcolor{keywordflow}{if} (r-\/>getMinimumSize(Region::horizontal) >}
\DoxyCodeLine{01503             r-\/>getMaximumSize(Region::horizontal) ||}
\DoxyCodeLine{01504         r-\/>getMinimumSize(Region::vertical) >}
\DoxyCodeLine{01505             r-\/>getMaximumSize(Region::vertical)) \{}
\DoxyCodeLine{01506       \textcolor{comment}{// If not, deallocate attempted hierarchy and quit}}
\DoxyCodeLine{01507       \textcolor{keywordflow}{for} (j = 0; j < newHierarchy.size(); ++j) \textcolor{keyword}{delete} newHierarchy[j];}
\DoxyCodeLine{01508       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01509     \}}
\DoxyCodeLine{01510   \}}
\DoxyCodeLine{01511 }
\DoxyCodeLine{01512   \textcolor{comment}{// Else, deallocate old regions and substitute with new ones}}
\DoxyCodeLine{01513   \textcolor{keywordflow}{for} (j = 0; j < m\_regions.size(); ++j) \textcolor{keyword}{delete} m\_regions[j];}
\DoxyCodeLine{01514   m\_regions = newHierarchy;}
\DoxyCodeLine{01515 }
\DoxyCodeLine{01516   \textcolor{comment}{// Now re-\/initialize dock widgets' infos.}}
\DoxyCodeLine{01517   \textcolor{keyword}{const} std::vector<QRect> \&geoms = state.first;}
\DoxyCodeLine{01518   \mbox{\hyperlink{class_dock_widget}{DockWidget}} *item;}
\DoxyCodeLine{01519   \textcolor{keywordflow}{for} (j = 0; j < m\_items.size(); ++j) \{}
\DoxyCodeLine{01520     item = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_dock_widget}{DockWidget}} *\textcolor{keyword}{>}(m\_items[j]-\/>widget());}
\DoxyCodeLine{01521     item-\/>setGeometry(geoms[j]);}
\DoxyCodeLine{01522     item-\/>m\_maximized = \textcolor{keyword}{false};}
\DoxyCodeLine{01523     item-\/>m\_saveIndex = j;}
\DoxyCodeLine{01524   \}}
\DoxyCodeLine{01525 }
\DoxyCodeLine{01526   \textcolor{comment}{// Docked widgets are found in hierarchy}}
\DoxyCodeLine{01527   \textcolor{keywordflow}{for} (j = 0; j < m\_regions.size(); ++j)}
\DoxyCodeLine{01528     \textcolor{keywordflow}{if} ((item = m\_regions[j]-\/>m\_item)) \{}
\DoxyCodeLine{01529       item-\/>setWindowFlags(Qt::SubWindow);}
\DoxyCodeLine{01530       item-\/>\mbox{\hyperlink{class_dock_widget_ab51f89d52251ed32cc42736af218d432}{setDockedAppearance}}();}
\DoxyCodeLine{01531       item-\/>m\_floating  = \textcolor{keyword}{false};}
\DoxyCodeLine{01532       item-\/>m\_saveIndex = -\/1;}
\DoxyCodeLine{01533       item-\/>show();}
\DoxyCodeLine{01534     \}}
\DoxyCodeLine{01535 }
\DoxyCodeLine{01536   \textcolor{comment}{// Recover available geometry infos}}
\DoxyCodeLine{01537   \textcolor{comment}{// QRect availableRect= QApplication::desktop()-\/>availableGeometry();}}
\DoxyCodeLine{01538   \textcolor{keywordtype}{int} recoverX = 0, recoverY = 0;}
\DoxyCodeLine{01539 }
\DoxyCodeLine{01540   \textcolor{comment}{// Deal with floating panels}}
\DoxyCodeLine{01541   \textcolor{keywordflow}{for} (j = 0; j < m\_items.size(); ++j) \{}
\DoxyCodeLine{01542     item = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_dock_widget}{DockWidget}} *\textcolor{keyword}{>}(m\_items[j]-\/>widget());}
\DoxyCodeLine{01543 }
\DoxyCodeLine{01544     \textcolor{keywordflow}{if} (item-\/>m\_saveIndex > 0) \{}
\DoxyCodeLine{01545       \textcolor{comment}{// Ensure that floating panels are not placed in}}
\DoxyCodeLine{01546       \textcolor{comment}{// unavailable positions}}
\DoxyCodeLine{01547       \textcolor{keywordflow}{if} ((geoms[j] \& QApplication::desktop()-\/>availableGeometry(item))}
\DoxyCodeLine{01548               .isEmpty())}
\DoxyCodeLine{01549         item-\/>move(recoverX += 50, recoverY += 50);}
\DoxyCodeLine{01550 }
\DoxyCodeLine{01551       \textcolor{comment}{// Set floating appearances}}
\DoxyCodeLine{01552       item-\/>setWindowFlags(Qt::Tool | Qt::FramelessWindowHint);}
\DoxyCodeLine{01553       item-\/>\mbox{\hyperlink{class_dock_widget_a2138687c3cb1b48a87e1705e104780da}{setFloatingAppearance}}();}
\DoxyCodeLine{01554       item-\/>m\_floating = \textcolor{keyword}{true};}
\DoxyCodeLine{01555     \}}
\DoxyCodeLine{01556   \}}
\DoxyCodeLine{01557 }
\DoxyCodeLine{01558   \textcolor{comment}{// Allocate region separators}}
\DoxyCodeLine{01559   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{01560   \textcolor{keywordflow}{for} (j = 0; j < m\_regions.size(); ++j) \{}
\DoxyCodeLine{01561     Region *r = m\_regions[j];}
\DoxyCodeLine{01562     \textcolor{keywordflow}{for} (k = 1; k < r-\/>m\_childList.size(); ++k) \{}
\DoxyCodeLine{01563       r-\/>insertSeparator(}
\DoxyCodeLine{01564           m\_decoAllocator-\/>\mbox{\hyperlink{class_dock_deco_allocator_ac427c059e74dfd887d99cd1db14952d7}{newSeparator}}(\textcolor{keyword}{this}, r-\/>getOrientation(), r));}
\DoxyCodeLine{01565     \}}
\DoxyCodeLine{01566   \}}
\DoxyCodeLine{01567 }
\DoxyCodeLine{01568   \textcolor{comment}{// Calculate regions' geometry starting from leaves (items)}}
\DoxyCodeLine{01569   \textcolor{keywordflow}{if} (m\_regions.size()) m\_regions[0]-\/>restoreGeometry();}
\DoxyCodeLine{01570 }
\DoxyCodeLine{01571   \textcolor{comment}{// Then, ensure the result is correctly fitting the contents rect}}
\DoxyCodeLine{01572   \textcolor{comment}{// redistribute();}}
\DoxyCodeLine{01573 }
\DoxyCodeLine{01574   \textcolor{comment}{// NOTE: The previous might be tempting to ensure all is right -\/}}
\DoxyCodeLine{01575   \textcolor{comment}{// unfortunately, it may}}
\DoxyCodeLine{01576   \textcolor{comment}{// be that the main window's content rect is not yet defined before it is}}
\DoxyCodeLine{01577   \textcolor{comment}{// shown the first}}
\DoxyCodeLine{01578   \textcolor{comment}{// time (like on MAC), and that is needed to redistribute. Se we force the}}
\DoxyCodeLine{01579   \textcolor{comment}{// saved values}}
\DoxyCodeLine{01580   \textcolor{comment}{//(assuming they are right)...}}
\DoxyCodeLine{01581   applyGeometry();}
\DoxyCodeLine{01582 }
\DoxyCodeLine{01583   \textcolor{comment}{// Finally, set maximized dock widget}}
\DoxyCodeLine{01584   \textcolor{keywordflow}{if} (maximizedItem != -\/1) \{}
\DoxyCodeLine{01585     item = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_dock_widget}{DockWidget}} *\textcolor{keyword}{>}(m\_items[maximizedItem]-\/>widget());}
\DoxyCodeLine{01586 }
\DoxyCodeLine{01587     \textcolor{comment}{// Problema: Puo' essere, in fase di caricamento dati, che la contentsRect}}
\DoxyCodeLine{01588     \textcolor{comment}{// del layout}}
\DoxyCodeLine{01589     \textcolor{comment}{// venga sballata! (vv. lo ctor di TMainWindow) Allora, evitiamo il}}
\DoxyCodeLine{01590     \textcolor{comment}{// controllo fatto}}
\DoxyCodeLine{01591     \textcolor{comment}{// in setMazimized, e assumiamo sia per forza corretto...}}
\DoxyCodeLine{01592     \textcolor{comment}{// setMaximized(item, true);}}
\DoxyCodeLine{01593 }
\DoxyCodeLine{01594     m\_maximizedDock   = item;}
\DoxyCodeLine{01595     item-\/>m\_maximized = \textcolor{keyword}{true};}
\DoxyCodeLine{01596     item-\/>raise();}
\DoxyCodeLine{01597 }
\DoxyCodeLine{01598     \textcolor{comment}{// Hide all other widgets}}
\DoxyCodeLine{01599     QWidget *currWidget;}
\DoxyCodeLine{01600     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < this-\/>count(); ++i)}
\DoxyCodeLine{01601       \textcolor{keywordflow}{if} ((currWidget = itemAt(i)-\/>widget()) != item) currWidget-\/>hide();}
\DoxyCodeLine{01602   \}}
\DoxyCodeLine{01603 }
\DoxyCodeLine{01604   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01605 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01649}{Dock\+Deco\+Allocator\+::new\+Separator()}}, \mbox{\hyperlink{l00260}{Dock\+Widget\+::set\+Docked\+Appearance()}}, and \mbox{\hyperlink{l00254}{Dock\+Widget\+::set\+Floating\+Appearance()}}.

\mbox{\Hypertarget{class_dock_layout_aa2c3f499015acc5619cec81c29454a6b}\label{class_dock_layout_aa2c3f499015acc5619cec81c29454a6b}} 
\index{DockLayout@{DockLayout}!rootRegion@{rootRegion}}
\index{rootRegion@{rootRegion}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{rootRegion()}{rootRegion()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_region}{Region}} $\ast$ Dock\+Layout\+::root\+Region (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00117                              \{}
\DoxyCodeLine{00118     \textcolor{keywordflow}{return} m\_regions.size() ? m\_regions.front() : 0;}
\DoxyCodeLine{00119   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a43bacb88156d890692a1cf7440654d4e}\label{class_dock_layout_a43bacb88156d890692a1cf7440654d4e}} 
\index{DockLayout@{DockLayout}!saveState@{saveState}}
\index{saveState@{saveState}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{saveState()}{saveState()}}
{\footnotesize\ttfamily Dock\+Layout\+::\+State Dock\+Layout\+::save\+State (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Returns the current {\bfseries{State}} of the layout. A State is a typedef for a pair containing the (normal) geometries of all layout items, and a string indicating their hierarchycal structure. 
\begin{DoxyCode}{0}
\DoxyCodeLine{01376                                       \{}
\DoxyCodeLine{01377   QString hierarchy;}
\DoxyCodeLine{01378 }
\DoxyCodeLine{01379   \textcolor{comment}{// Set save indices so we don't need to find anything}}
\DoxyCodeLine{01380   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01381   \textcolor{keywordflow}{for} (i = 0; i < m\_regions.size(); ++i) m\_regions[i]-\/>m\_saveIndex = i;}
\DoxyCodeLine{01382 }
\DoxyCodeLine{01383   \mbox{\hyperlink{class_dock_widget}{DockWidget}} *item;}
\DoxyCodeLine{01384   \textcolor{keywordflow}{for} (i = 0; i < m\_items.size(); ++i) \{}
\DoxyCodeLine{01385     item              = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_dock_widget}{DockWidget}} *\textcolor{keyword}{>}(m\_items[i]-\/>widget());}
\DoxyCodeLine{01386     item-\/>m\_saveIndex = i;}
\DoxyCodeLine{01387   \}}
\DoxyCodeLine{01388 }
\DoxyCodeLine{01389   \textcolor{comment}{// Write item geometries}}
\DoxyCodeLine{01390   std::vector<QRect> geometries;}
\DoxyCodeLine{01391   \textcolor{keywordflow}{for} (i = 0; i < m\_items.size(); ++i)}
\DoxyCodeLine{01392     geometries.push\_back(m\_items[i]-\/>geometry());}
\DoxyCodeLine{01393 }
\DoxyCodeLine{01394   QTextStream stream(\&hierarchy, QIODevice::WriteOnly);}
\DoxyCodeLine{01395 }
\DoxyCodeLine{01396   \textcolor{comment}{// Save maximimized Dock index and geometry}}
\DoxyCodeLine{01397   stream << QString::number(m\_maximizedDock ? m\_maximizedDock-\/>m\_saveIndex : -\/1)}
\DoxyCodeLine{01398          << \textcolor{stringliteral}{"{} "{}};}
\DoxyCodeLine{01399   \textcolor{keywordflow}{if} (m\_maximizedDock) \{}
\DoxyCodeLine{01400     Region *r                                = find(m\_maximizedDock);}
\DoxyCodeLine{01401     geometries[m\_maximizedDock-\/>m\_saveIndex] = toRect(r-\/>getGeometry());}
\DoxyCodeLine{01402   \}}
\DoxyCodeLine{01403 }
\DoxyCodeLine{01404   \textcolor{comment}{// Save regions}}
\DoxyCodeLine{01405   Region *r = rootRegion();}
\DoxyCodeLine{01406   \textcolor{keywordflow}{if} (r) \{}
\DoxyCodeLine{01407     stream << QString::number(r-\/>getOrientation()) << \textcolor{stringliteral}{"{} "{}};}
\DoxyCodeLine{01408     writeRegion(r, hierarchy);}
\DoxyCodeLine{01409   \}}
\DoxyCodeLine{01410 }
\DoxyCodeLine{01411   \textcolor{keywordflow}{return} std::pair<std::vector<QRect>, QString>(geometries, hierarchy);}
\DoxyCodeLine{01412 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a65ee3347a86fa365b7ce4f99ad91cec2}\label{class_dock_layout_a65ee3347a86fa365b7ce4f99ad91cec2}} 
\index{DockLayout@{DockLayout}!setDecoAllocator@{setDecoAllocator}}
\index{setDecoAllocator@{setDecoAllocator}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{setDecoAllocator()}{setDecoAllocator()}}
{\footnotesize\ttfamily void Dock\+Layout\+::set\+Deco\+Allocator (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dock_deco_allocator}{Dock\+Deco\+Allocator}} $\ast$}]{deco\+Allocator }\end{DoxyParamCaption})}



{\bfseries{NOTE\+:}} \mbox{\hyperlink{class_dock_layout}{Dock\+Layout}} takes ownership of the allocator. 

Sets current deco allocator to deco\+Allocator. A default deco allocator is already provided at construction. 
\begin{DoxyCode}{0}
\DoxyCodeLine{01682                                                                   \{}
\DoxyCodeLine{01683   \textcolor{comment}{// Delete old one}}
\DoxyCodeLine{01684   \textcolor{keywordflow}{if} (m\_decoAllocator) \textcolor{keyword}{delete} m\_decoAllocator;}
\DoxyCodeLine{01685 }
\DoxyCodeLine{01686   \textcolor{comment}{// Place new one}}
\DoxyCodeLine{01687   m\_decoAllocator = decoAllocator;}
\DoxyCodeLine{01688 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a8a81f05e391a078a4f4ad951e059bfe7}\label{class_dock_layout_a8a81f05e391a078a4f4ad951e059bfe7}} 
\index{DockLayout@{DockLayout}!setGeometry@{setGeometry}}
\index{setGeometry@{setGeometry}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{setGeometry()}{setGeometry()}}
{\footnotesize\ttfamily void Dock\+Layout\+::set\+Geometry (\begin{DoxyParamCaption}\item[{const QRect \&}]{rect }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}



NOTE\+: This method is currently unused by \mbox{\hyperlink{class_dock_layout}{Dock\+Layout}} implementation... 


\begin{DoxyCode}{0}
\DoxyCodeLine{00305                                               \{}
\DoxyCodeLine{00306   \textcolor{comment}{// Just pass the info to the widget (it's somehow necessary...)}}
\DoxyCodeLine{00307   QLayout::setGeometry(rect);}
\DoxyCodeLine{00308 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a8906566c13a82b50ef107089d6ee2dc7}\label{class_dock_layout_a8906566c13a82b50ef107089d6ee2dc7}} 
\index{DockLayout@{DockLayout}!setMaximized@{setMaximized}}
\index{setMaximized@{setMaximized}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{setMaximized()}{setMaximized()}}
{\footnotesize\ttfamily void Dock\+Layout\+::set\+Maximized (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$}]{item,  }\item[{bool}]{state = {\ttfamily true} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00245                                                           \{}
\DoxyCodeLine{00246   \textcolor{keywordflow}{if} (item \&\& state != item-\/>m\_maximized) \{}
\DoxyCodeLine{00247     \textcolor{keywordflow}{if} (state) \{}
\DoxyCodeLine{00248       \textcolor{comment}{// Maximize}}
\DoxyCodeLine{00249       \textcolor{keywordflow}{if} (m\_maximizedDock) \{}
\DoxyCodeLine{00250         \textcolor{comment}{// If maximized already exists, normalize it}}
\DoxyCodeLine{00251         Region *r = find(m\_maximizedDock);}
\DoxyCodeLine{00252         m\_maximizedDock-\/>setGeometry(toRect(r-\/>getGeometry()));}
\DoxyCodeLine{00253         m\_maximizedDock-\/>m\_maximized = \textcolor{keyword}{false};}
\DoxyCodeLine{00254       \}}
\DoxyCodeLine{00255 }
\DoxyCodeLine{00256       \textcolor{comment}{// Now, attempt requested item maximization}}
\DoxyCodeLine{00257       QSize minimumSize = item-\/>minimumSize();}
\DoxyCodeLine{00258       QSize maximumSize = item-\/>maximumSize();}
\DoxyCodeLine{00259 }
\DoxyCodeLine{00260       \textcolor{keywordflow}{if} (contentsRect().width() > minimumSize.width() \&\&}
\DoxyCodeLine{00261           contentsRect().height() > minimumSize.height() \&\&}
\DoxyCodeLine{00262           contentsRect().width() < maximumSize.width() \&\&}
\DoxyCodeLine{00263           contentsRect().height() < maximumSize.height()) \{}
\DoxyCodeLine{00264         \textcolor{comment}{// Maximization succeeds}}
\DoxyCodeLine{00265         item-\/>setGeometry(contentsRect());}
\DoxyCodeLine{00266         item-\/>raise();}
\DoxyCodeLine{00267         item-\/>m\_maximized = \textcolor{keyword}{true};}
\DoxyCodeLine{00268         m\_maximizedDock   = item;}
\DoxyCodeLine{00269 }
\DoxyCodeLine{00270         \textcolor{comment}{// Hide all the other docked widgets (no need to update them. Moreover,}}
\DoxyCodeLine{00271         \textcolor{comment}{// doing so}}
\DoxyCodeLine{00272         \textcolor{comment}{// could eventually result in painting over the newly maximized widget)}}
\DoxyCodeLine{00273         \mbox{\hyperlink{class_dock_widget}{DockWidget}} *currWidget;}
\DoxyCodeLine{00274         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < count(); ++i) \{}
\DoxyCodeLine{00275           currWidget = (\mbox{\hyperlink{class_dock_widget}{DockWidget}} *)itemAt(i)-\/>widget();}
\DoxyCodeLine{00276           \textcolor{keywordflow}{if} (currWidget != item \&\& !currWidget-\/>isFloating())}
\DoxyCodeLine{00277             currWidget-\/>hide();}
\DoxyCodeLine{00278         \}}
\DoxyCodeLine{00279       \}}
\DoxyCodeLine{00280     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00281       \textcolor{comment}{// Normalize}}
\DoxyCodeLine{00282       Region *r = find(m\_maximizedDock);}
\DoxyCodeLine{00283       \textcolor{keywordflow}{if} (r) m\_maximizedDock-\/>setGeometry(toRect(r-\/>getGeometry()));}
\DoxyCodeLine{00284 }
\DoxyCodeLine{00285       m\_maximizedDock-\/>m\_maximized = \textcolor{keyword}{false};}
\DoxyCodeLine{00286       m\_maximizedDock              = 0;}
\DoxyCodeLine{00287 }
\DoxyCodeLine{00288       \textcolor{comment}{// Show all other docked widgets}}
\DoxyCodeLine{00289       \mbox{\hyperlink{class_dock_widget}{DockWidget}} *currWidget;}
\DoxyCodeLine{00290       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < count(); ++i) \{}
\DoxyCodeLine{00291         currWidget = (\mbox{\hyperlink{class_dock_widget}{DockWidget}} *)itemAt(i)-\/>widget();}
\DoxyCodeLine{00292         \textcolor{keywordflow}{if} (currWidget != item \&\& !currWidget-\/>isFloating()) currWidget-\/>show();}
\DoxyCodeLine{00293       \}}
\DoxyCodeLine{00294     \}}
\DoxyCodeLine{00295   \}}
\DoxyCodeLine{00296 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_a0f2dec94737823c8764a1758ca80822f}\label{class_dock_layout_a0f2dec94737823c8764a1758ca80822f}} 
\index{DockLayout@{DockLayout}!sizeHint@{sizeHint}}
\index{sizeHint@{sizeHint}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{sizeHint()}{sizeHint()}}
{\footnotesize\ttfamily QSize Dock\+Layout\+::size\+Hint (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00202                                  \{}
\DoxyCodeLine{00203   QSize s(0, 0);}
\DoxyCodeLine{00204   \textcolor{keywordtype}{int} n = m\_items.size();}
\DoxyCodeLine{00205   \textcolor{keywordflow}{if} (n > 0) s = QSize(100, 70);  \textcolor{comment}{// start with a nice default size}}
\DoxyCodeLine{00206   \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{00207   \textcolor{keywordflow}{while} (i < n) \{}
\DoxyCodeLine{00208     QLayoutItem *o = m\_items[i];}
\DoxyCodeLine{00209     s              = s.expandedTo(o-\/>sizeHint());}
\DoxyCodeLine{00210     ++i;}
\DoxyCodeLine{00211   \}}
\DoxyCodeLine{00212   \textcolor{keywordflow}{return} s + n * QSize(spacing(), spacing());}
\DoxyCodeLine{00213 }
\DoxyCodeLine{00214   \textcolor{comment}{// return QSize(0,0);}}
\DoxyCodeLine{00215 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_aaba247b4898c7211686031a4464feb5c}\label{class_dock_layout_aaba247b4898c7211686031a4464feb5c}} 
\index{DockLayout@{DockLayout}!takeAt@{takeAt}}
\index{takeAt@{takeAt}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{takeAt()}{takeAt()}}
{\footnotesize\ttfamily QLayout\+Item $\ast$ Dock\+Layout\+::take\+At (\begin{DoxyParamCaption}\item[{int}]{idx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00148                                        \{}
\DoxyCodeLine{00149   \textcolor{keywordflow}{if} (idx < 0 || idx >= (\textcolor{keywordtype}{int})m\_items.size()) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00150 }
\DoxyCodeLine{00151   QLayoutItem *item = m\_items[idx];}
\DoxyCodeLine{00152   \mbox{\hyperlink{class_dock_widget}{DockWidget}} *dw    = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_dock_widget}{DockWidget}} *\textcolor{keyword}{>}(item-\/>widget());}
\DoxyCodeLine{00153 }
\DoxyCodeLine{00154   \textcolor{comment}{// If docked, undock item}}
\DoxyCodeLine{00155   \textcolor{keywordflow}{if} (!dw-\/>isFloating()) \mbox{\hyperlink{class_dock_layout_ad36e77a79ff02104b0d41d8f2801bc5e}{undockItem}}(dw);}
\DoxyCodeLine{00156 }
\DoxyCodeLine{00157   \textcolor{comment}{// Reset item's parentLayout}}
\DoxyCodeLine{00158   dw-\/>m\_parentLayout = 0;}
\DoxyCodeLine{00159 }
\DoxyCodeLine{00160   m\_items.erase(m\_items.begin() + idx);}
\DoxyCodeLine{00161 }
\DoxyCodeLine{00162   \textcolor{keywordflow}{return} item;}
\DoxyCodeLine{00163 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_ad36e77a79ff02104b0d41d8f2801bc5e}\label{class_dock_layout_ad36e77a79ff02104b0d41d8f2801bc5e}} 
\index{DockLayout@{DockLayout}!undockItem@{undockItem}}
\index{undockItem@{undockItem}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{undockItem()}{undockItem()}}
{\footnotesize\ttfamily bool Dock\+Layout\+::undock\+Item (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dock_widget}{Dock\+Widget}} $\ast$}]{item }\end{DoxyParamCaption})}



Undocks {\bfseries{item}} and updates geometry. 

{\bfseries{NOTE\+:}} Window flags are reset to floating appearance (thus hiding the widget). Since the geometry reference changes a geometry() update may be needed -\/ so item\textquotesingle{}s show() is not forced here. You should eventually remember to call it manually after this. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00874                                             \{}
\DoxyCodeLine{00875   \textcolor{comment}{// Find item's region index in m\_regions}}
\DoxyCodeLine{00876   Region *itemCarrier = find(item);}
\DoxyCodeLine{00877 }
\DoxyCodeLine{00878   Region *parent = itemCarrier-\/>getParent();}
\DoxyCodeLine{00879   \textcolor{keywordflow}{if} (parent) \{}
\DoxyCodeLine{00880     \textcolor{keywordtype}{int} removalIdx = 0;}
\DoxyCodeLine{00881 }
\DoxyCodeLine{00882     \textcolor{comment}{// Find removal index in parent's childList}}
\DoxyCodeLine{00883     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} j;}
\DoxyCodeLine{00884     \textcolor{keywordflow}{for} (j = 0; j < parent-\/>getChildList().size(); ++j)}
\DoxyCodeLine{00885       \textcolor{keywordflow}{if} (parent-\/>getChildList()[j]-\/>getItem() == item) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00886 }
\DoxyCodeLine{00887     \textcolor{keywordflow}{if} (isPossibleRemoval(item, parent, removalIdx))}
\DoxyCodeLine{00888       parent-\/>removeItem(item);}
\DoxyCodeLine{00889     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00890       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00891   \}}
\DoxyCodeLine{00892 }
\DoxyCodeLine{00893   \textcolor{comment}{// Remove region in regions list}}
\DoxyCodeLine{00894   \textcolor{comment}{// m\_regions.erase(i);   //Don't -\/ m\_regions is cleaned before the end by}}
\DoxyCodeLine{00895   \textcolor{comment}{// remove\_if}}
\DoxyCodeLine{00896   itemCarrier-\/>setItem(0);}
\DoxyCodeLine{00897 }
\DoxyCodeLine{00898   std::deque<Region *>::iterator j;}
\DoxyCodeLine{00899   j = std::remove\_if(m\_regions.begin(), m\_regions.end(), isEmptyRegion);}
\DoxyCodeLine{00900   m\_regions.resize(j -\/ m\_regions.begin());}
\DoxyCodeLine{00901 }
\DoxyCodeLine{00902   \textcolor{comment}{// Update status}}
\DoxyCodeLine{00903   \textcolor{comment}{// qDebug("{}Undock"{});}}
\DoxyCodeLine{00904   item-\/>setWindowFlags(Qt::Tool | Qt::FramelessWindowHint);}
\DoxyCodeLine{00905   \textcolor{comment}{// NOTA: Usando la flag Qt::Window il focus viene automaticamente riassegnato,}}
\DoxyCodeLine{00906   \textcolor{comment}{// con un po' di ritardo.}}
\DoxyCodeLine{00907   \textcolor{comment}{// Usando Tool questo non accade. In questo caso, i placeholder devono essere}}
\DoxyCodeLine{00908   \textcolor{comment}{// disattivati...}}
\DoxyCodeLine{00909 }
\DoxyCodeLine{00910   item-\/>\mbox{\hyperlink{class_dock_widget_a2138687c3cb1b48a87e1705e104780da}{setFloatingAppearance}}();}
\DoxyCodeLine{00911   item-\/>m\_floating = \textcolor{keyword}{true};}
\DoxyCodeLine{00912 }
\DoxyCodeLine{00913   \textcolor{comment}{// show minimize button in FlipbookPanel}}
\DoxyCodeLine{00914   item-\/>onDock(\textcolor{keyword}{false});}
\DoxyCodeLine{00915 }
\DoxyCodeLine{00916   setMaximized(item, \textcolor{keyword}{false});}
\DoxyCodeLine{00917 }
\DoxyCodeLine{00918   redistribute();}
\DoxyCodeLine{00919 }
\DoxyCodeLine{00920   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00921 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00254}{Dock\+Widget\+::set\+Floating\+Appearance()}}.



Referenced by \mbox{\hyperlink{l00262}{TDock\+Widget\+::set\+Floating()}}.

\mbox{\Hypertarget{class_dock_layout_a04eb5e2fdf22478c7a8aa50f99ff3668}\label{class_dock_layout_a04eb5e2fdf22478c7a8aa50f99ff3668}} 
\index{DockLayout@{DockLayout}!update@{update}}
\index{update@{update}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{update()}{update()}}
{\footnotesize\ttfamily void Dock\+Layout\+::update (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00093                                \{}
\DoxyCodeLine{00094   \textcolor{comment}{// E' necessario?}}
\DoxyCodeLine{00095   applyGeometry();}
\DoxyCodeLine{00096 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dock_layout_ad55c6bca8ad56a489fc77afddcaeee38}\label{class_dock_layout_ad55c6bca8ad56a489fc77afddcaeee38}} 
\index{DockLayout@{DockLayout}!widgetAt@{widgetAt}}
\index{widgetAt@{widgetAt}!DockLayout@{DockLayout}}
\doxysubsubsection{\texorpdfstring{widgetAt()}{widgetAt()}}
{\footnotesize\ttfamily QWidget $\ast$ Dock\+Layout\+::widget\+At (\begin{DoxyParamCaption}\item[{int}]{idx }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00174 \{ \textcolor{keywordflow}{return} itemAt(idx)-\/>widget(); \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonzqt/docklayout.\+h\item 
E\+:/opentoonz/toonz/sources/toonzqt/docklayout.\+cpp\item 
E\+:/opentoonz/toonz/sources/toonzqt/dockwidget.\+cpp\end{DoxyCompactItemize}
