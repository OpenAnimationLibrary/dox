\hypertarget{class_control_point_editor_stroke}{}\doxysection{Control\+Point\+Editor\+Stroke Class Reference}
\label{class_control_point_editor_stroke}\index{ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum {\bfseries Point\+Type} \{ \newline
{\bfseries CONTROL\+\_\+\+POINT}
, {\bfseries SPEED\+\_\+\+IN}
, {\bfseries SPEED\+\_\+\+OUT}
, {\bfseries SEGMENT}
, \newline
{\bfseries NONE}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_control_point_editor_stroke}{Control\+Point\+Editor\+Stroke}} $\ast$ \mbox{\hyperlink{class_control_point_editor_stroke_a867a22b2dd235232ceb271d9b696c8fe}{clone}} () const
\item 
bool \mbox{\hyperlink{class_control_point_editor_stroke_aae2e6944903ac1ca932e0cd79c0e387a}{set\+Stroke}} (const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&vi, int stroke\+Index)
\item 
\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ \mbox{\hyperlink{class_control_point_editor_stroke_a262eae0935e7f9fad98c5281814b8e9a}{get\+Stroke}} () const
\item 
void \mbox{\hyperlink{class_control_point_editor_stroke_ac77a026c78b36339e26e4b28597e9db2}{set\+Stroke\+Index}} (int stroke\+Index)
\item 
int \mbox{\hyperlink{class_control_point_editor_stroke_a4a0a5a170756b1ecf0d217945611d2a5}{get\+Stroke\+Index}} () const
\item 
int \mbox{\hyperlink{class_control_point_editor_stroke_adff19c67f7ecc524dc3ef083e8ae83b0}{get\+Control\+Point\+Count}} () const
\item 
\mbox{\hyperlink{class_t_thick_point}{TThick\+Point}} \mbox{\hyperlink{class_control_point_editor_stroke_a523b5242799c9da6168abf5a2cf0d027}{get\+Control\+Point}} (int index) const
\item 
int \mbox{\hyperlink{class_control_point_editor_stroke_a564d068166571121d9fc40b267cf014e}{get\+Index\+Point\+In\+Stroke}} (int index) const
\item 
\mbox{\hyperlink{class_t_thick_point}{TThick\+Point}} \mbox{\hyperlink{class_control_point_editor_stroke_a0ea9295887099126fc04e984186b213c}{get\+Speed\+In\+Point}} (int index) const
\item 
\mbox{\hyperlink{class_t_thick_point}{TThick\+Point}} \mbox{\hyperlink{class_control_point_editor_stroke_aca8ddb8352ac7931cbe2c3a96dc98e41}{get\+Speed\+Out\+Point}} (int index) const
\item 
bool \mbox{\hyperlink{class_control_point_editor_stroke_aa50af442384b422cd7ac515fd1c92ca3}{is\+Cusp}} (int index) const
\begin{DoxyCompactList}\small\item\em Return true if index point is a cusp. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_control_point_editor_stroke_a4ecb68e14d8f5c279d998352775ad0f6}{set\+Cusp}} (int index, bool \mbox{\hyperlink{class_control_point_editor_stroke_aa50af442384b422cd7ac515fd1c92ca3}{is\+Cusp}}, bool set\+Speed\+In)
\begin{DoxyCompactList}\small\item\em Set {\bfseries{m\+\_\+is\+Cusp}} of {\bfseries{index}} point to {\bfseries{is\+Cusp}}. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_control_point_editor_stroke_ac7f90113ac718d24c24fc7e7b38f70c3}{is\+Speed\+In\+Linear}} (int index) const
\item 
bool \mbox{\hyperlink{class_control_point_editor_stroke_a60e4ff0394c0c05d9459072ae1327962}{is\+Speed\+Out\+Linear}} (int index) const
\item 
void \mbox{\hyperlink{class_control_point_editor_stroke_ab7fd5ffbcc688306ad9fb6bcf69dc4b7}{set\+Linear\+Speed\+In}} (int index, bool linear=true, bool update\+Points=true)
\item 
void \mbox{\hyperlink{class_control_point_editor_stroke_a8ebac0a53cfd2662e35e7777dc5d96ab}{set\+Linear\+Speed\+Out}} (int index, bool linear=true, bool update\+Points=true)
\item 
bool \mbox{\hyperlink{class_control_point_editor_stroke_ae1f6d2d7508048e40e79023140292e21}{set\+Linear}} (int index, bool is\+Linear, bool update\+Points=true)
\item 
bool \mbox{\hyperlink{class_control_point_editor_stroke_a1fe635cdeb5357ddf266f7f878b1e44d}{set\+Control\+Points\+Linear}} (std\+::set$<$ int $>$ points, bool is\+Linear)
\item 
void \mbox{\hyperlink{class_control_point_editor_stroke_a39af5add560886dfbaa044c39b68699d}{move\+Control\+Point}} (int index, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&delta)
\item 
int \mbox{\hyperlink{class_control_point_editor_stroke_a80aa56ecbe43ddf813b4c882e5f20d83}{add\+Control\+Point}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos)
\item 
void \mbox{\hyperlink{class_control_point_editor_stroke_ab56a9be376a1ccb0b68ded1ce29a5a6c}{delete\+Control\+Point}} (int index)
\item 
void \mbox{\hyperlink{class_control_point_editor_stroke_abedad5e542f17b175b711c7393623c39}{move\+Speed}} (int index, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&delta, bool is\+In, double min\+Distance)
\item 
void \mbox{\hyperlink{class_control_point_editor_stroke_aedcb3272370078950df6ced76d0c2703}{move\+Segment}} (int before\+Index, int next\+Index, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&delta, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos)
\item 
Point\+Type \mbox{\hyperlink{class_control_point_editor_stroke_a97247ab7eb478a10e3b59a366fc6fa31}{get\+Point\+Type\+At}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, double \&distance2, int \&index) const
\item 
bool \mbox{\hyperlink{class_control_point_editor_stroke_ab20499196db6dd39fa3b655398208c53}{is\+Self\+Loop}} () const
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{class_control_point_editor_stroke_afe554c6090c7a0df5dfcb87ce563f4ba}\label{class_control_point_editor_stroke_afe554c6090c7a0df5dfcb87ce563f4ba}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!PointType@{PointType}}
\index{PointType@{PointType}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{PointType}{PointType}}
{\footnotesize\ttfamily enum Control\+Point\+Editor\+Stroke\+::\+Point\+Type}


\begin{DoxyCode}{0}
\DoxyCodeLine{00058 \{ CONTROL\_POINT, SPEED\_IN, SPEED\_OUT, SEGMENT, NONE \};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_control_point_editor_stroke_a02534f13595ca1f14fca095edc96dde4}\label{class_control_point_editor_stroke_a02534f13595ca1f14fca095edc96dde4}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{ControlPointEditorStroke()}{ControlPointEditorStroke()}}
{\footnotesize\ttfamily Control\+Point\+Editor\+Stroke\+::\+Control\+Point\+Editor\+Stroke (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00060 : m\_vi() \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_a9e3fe66d818084d1409f52faeb670d16}\label{class_control_point_editor_stroke_a9e3fe66d818084d1409f52faeb670d16}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!````~ControlPointEditorStroke@{$\sim$ControlPointEditorStroke}}
\index{````~ControlPointEditorStroke@{$\sim$ControlPointEditorStroke}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{$\sim$ControlPointEditorStroke()}{~ControlPointEditorStroke()}}
{\footnotesize\ttfamily Control\+Point\+Editor\+Stroke\+::$\sim$\+Control\+Point\+Editor\+Stroke (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00062 \{ m\_controlPoints.clear(); \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_control_point_editor_stroke_a80aa56ecbe43ddf813b4c882e5f20d83}\label{class_control_point_editor_stroke_a80aa56ecbe43ddf813b4c882e5f20d83}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!addControlPoint@{addControlPoint}}
\index{addControlPoint@{addControlPoint}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{addControlPoint()}{addControlPoint()}}
{\footnotesize\ttfamily int Control\+Point\+Editor\+Stroke\+::add\+Control\+Point (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos }\end{DoxyParamCaption})}

Add a \mbox{\hyperlink{struct_control_point}{Control\+Point}} in {\bfseries{point}}. Return added \mbox{\hyperlink{struct_control_point}{Control\+Point}} index. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00664                                                                 \{}
\DoxyCodeLine{00665   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = getStroke();}
\DoxyCodeLine{00666   \textcolor{keywordflow}{if} (!stroke) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00667   \textcolor{keywordtype}{double} d = 0.01;}
\DoxyCodeLine{00668   \textcolor{keywordtype}{int} indexAtPos;}
\DoxyCodeLine{00669   \textcolor{keywordtype}{int} cpCount = stroke-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}();}
\DoxyCodeLine{00670   \textcolor{keywordflow}{if} (cpCount <= 3)  \textcolor{comment}{// e' un unico chunk e in questo caso rappresenta un punto}}
\DoxyCodeLine{00671   \{}
\DoxyCodeLine{00672     \mbox{\hyperlink{class_control_point_editor_stroke_a97247ab7eb478a10e3b59a366fc6fa31}{getPointTypeAt}}(pos, d, indexAtPos);}
\DoxyCodeLine{00673     \textcolor{keywordflow}{return} indexAtPos;}
\DoxyCodeLine{00674   \}}
\DoxyCodeLine{00675 }
\DoxyCodeLine{00676   \textcolor{keywordtype}{double} w       = stroke-\/>\mbox{\hyperlink{class_t_stroke_a38326dc317f9ff3828940996f41376a6}{getW}}(pos);}
\DoxyCodeLine{00677   \textcolor{keywordtype}{int} pointIndex = stroke-\/>getControlPointIndexAfterParameter(w);}
\DoxyCodeLine{00678 }
\DoxyCodeLine{00679   \textcolor{keywordtype}{int} i, index;}
\DoxyCodeLine{00680   \textcolor{keywordflow}{for} (i = 0; i < getControlPointCount(); i++) \{}
\DoxyCodeLine{00681     \textcolor{comment}{// Cerco il ControlPoint corrispondente all'indice pointIndex. OSS.:}}
\DoxyCodeLine{00682     \textcolor{comment}{// Effettuo il}}
\DoxyCodeLine{00683     \textcolor{comment}{// controllo da zero a getControlPointCount()-\/1 per gestire il caso del}}
\DoxyCodeLine{00684     \textcolor{comment}{// selfLoop}}
\DoxyCodeLine{00685     \textcolor{keywordflow}{if} (pointIndex == m\_controlPoints[i].m\_pointIndex + 1 ||}
\DoxyCodeLine{00686         pointIndex == m\_controlPoints[i].m\_pointIndex + 2 ||}
\DoxyCodeLine{00687         pointIndex == m\_controlPoints[i].m\_pointIndex + 3 ||}
\DoxyCodeLine{00688         pointIndex == m\_controlPoints[i].m\_pointIndex + 4)}
\DoxyCodeLine{00689       index = i;}
\DoxyCodeLine{00690   \}}
\DoxyCodeLine{00691 }
\DoxyCodeLine{00692   \mbox{\hyperlink{struct_control_point}{ControlPoint}} precCp = m\_controlPoints[index];}
\DoxyCodeLine{00693   assert(precCp.m\_pointIndex >= 0);}
\DoxyCodeLine{00694   std::vector<TThickPoint> points;}
\DoxyCodeLine{00695 }
\DoxyCodeLine{00696   \textcolor{keywordflow}{for} (i = 0; i < cpCount; i++) \{}
\DoxyCodeLine{00697     \textcolor{keywordflow}{if} (i != precCp.m\_pointIndex + 1 \&\& i != precCp.m\_pointIndex + 2 \&\&}
\DoxyCodeLine{00698         i != precCp.m\_pointIndex + 3)}
\DoxyCodeLine{00699       points.push\_back(stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(i));}
\DoxyCodeLine{00700     \textcolor{keywordflow}{if} (i == precCp.m\_pointIndex + 2) \{}
\DoxyCodeLine{00701       \textcolor{keywordtype}{bool} isBeforePointLinear = isSpeedOutLinear(index);}
\DoxyCodeLine{00702       \textcolor{keywordtype}{int} nextIndex =}
\DoxyCodeLine{00703           (isSelfLoop() \&\& index == m\_controlPoints.size() -\/ 1) ? 0 : index + 1;}
\DoxyCodeLine{00704       \textcolor{keywordtype}{bool} isNextPointLinear =}
\DoxyCodeLine{00705           nextIndex < (int)m\_controlPoints.size() \&\& isSpeedInLinear(nextIndex);}
\DoxyCodeLine{00706 }
\DoxyCodeLine{00707       \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} a0 = stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(precCp.m\_pointIndex);}
\DoxyCodeLine{00708       \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} a1 = stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(precCp.m\_pointIndex + 1);}
\DoxyCodeLine{00709       \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} a2 = stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(precCp.m\_pointIndex + 2);}
\DoxyCodeLine{00710       \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} a3 = stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(precCp.m\_pointIndex + 3);}
\DoxyCodeLine{00711       \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} a4 = stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(precCp.m\_pointIndex + 4);}
\DoxyCodeLine{00712       \textcolor{keywordtype}{double} dist2   = tdistance2(pos, \mbox{\hyperlink{class_t_point_t}{TPointD}}(a2));}
\DoxyCodeLine{00713       \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} d0, d1, d2, d3, d4, d5, d6;}
\DoxyCodeLine{00714 }
\DoxyCodeLine{00715       \textcolor{keywordflow}{if} (isBeforePointLinear \&\& isNextPointLinear) \{}
\DoxyCodeLine{00716         \textcolor{comment}{// Se sono entrambi i punti lineari  inserisco un punto lineare}}
\DoxyCodeLine{00717         d0 = a1;}
\DoxyCodeLine{00718         d3 = stroke-\/>\mbox{\hyperlink{class_t_stroke_ada4f6fc3fea4a7c0b949cd1d9dc6e640}{getThickPoint}}(w);}
\DoxyCodeLine{00719         d6 = a3;}
\DoxyCodeLine{00720         d2 = computeLinearPoint(d0, d3, 0.01, \textcolor{keyword}{true});   \textcolor{comment}{// SpeedIn}}
\DoxyCodeLine{00721         d4 = computeLinearPoint(d3, d6, 0.01, \textcolor{keyword}{false});  \textcolor{comment}{// SpeedOut}}
\DoxyCodeLine{00722         d1 = 0.5 * (d0 + d2);}
\DoxyCodeLine{00723         d5 = 0.5 * (d4 + d6);}
\DoxyCodeLine{00724       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dist2 < 32) \{}
\DoxyCodeLine{00725         \textcolor{comment}{// Sono molto vicino al punto che non viene visualizzato}}
\DoxyCodeLine{00726         \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} b0 = 0.5 * (a0 + a1);}
\DoxyCodeLine{00727         \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} b1 = 0.5 * (a2 + a1);}
\DoxyCodeLine{00728         \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} c0 = 0.5 * (b0 + b1);}
\DoxyCodeLine{00729 }
\DoxyCodeLine{00730         \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} b2 = 0.5 * (a2 + a3);}
\DoxyCodeLine{00731         \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} b3 = 0.5 * (a3 + a4);}
\DoxyCodeLine{00732 }
\DoxyCodeLine{00733         \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} c1 = 0.5 * (b2 + b3);}
\DoxyCodeLine{00734         d0             = b0;}
\DoxyCodeLine{00735         d1             = c0;}
\DoxyCodeLine{00736         d2             = b1;}
\DoxyCodeLine{00737         d3             = a2;}
\DoxyCodeLine{00738         d4             = b2;}
\DoxyCodeLine{00739         d5             = c1;}
\DoxyCodeLine{00740         d6             = b3;}
\DoxyCodeLine{00741       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00742         \textcolor{keywordtype}{bool} isInFirstChunk = \textcolor{keyword}{true};}
\DoxyCodeLine{00743         \textcolor{keywordflow}{if} (pointIndex > precCp.m\_pointIndex + 2) \{}
\DoxyCodeLine{00744           \textcolor{comment}{// nel caso in cui sono nel secondo chunk scambio i punti}}
\DoxyCodeLine{00745           a0 = a4;}
\DoxyCodeLine{00746           std::swap(a1, a3);}
\DoxyCodeLine{00747           isInFirstChunk = \textcolor{keyword}{false};}
\DoxyCodeLine{00748         \}}
\DoxyCodeLine{00749 }
\DoxyCodeLine{00750         \textcolor{keywordtype}{double} w0 = (isSelfLoop() \&\& precCp.m\_pointIndex + 4 == cpCount -\/ 1 \&\&}
\DoxyCodeLine{00751                      !isInFirstChunk)}
\DoxyCodeLine{00752                         ? 1}
\DoxyCodeLine{00753                         : stroke-\/>\mbox{\hyperlink{class_t_stroke_a38326dc317f9ff3828940996f41376a6}{getW}}(a0);}
\DoxyCodeLine{00754         \textcolor{keywordtype}{double} w1 = stroke-\/>\mbox{\hyperlink{class_t_stroke_a38326dc317f9ff3828940996f41376a6}{getW}}(a2);}
\DoxyCodeLine{00755         \textcolor{keywordtype}{double} t  = (w -\/ w0) / (w1 -\/ w0);}
\DoxyCodeLine{00756 }
\DoxyCodeLine{00757         \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} p  = stroke-\/>\mbox{\hyperlink{class_t_stroke_ada4f6fc3fea4a7c0b949cd1d9dc6e640}{getThickPoint}}(w);}
\DoxyCodeLine{00758         \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} b0 = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}((1 -\/ t) * a0 + t * a1,}
\DoxyCodeLine{00759                                      (1 -\/ t) * a0.thick + t * a1.thick);}
\DoxyCodeLine{00760         \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} b1 = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}((1 -\/ t) * a1 + t * a2,}
\DoxyCodeLine{00761                                      (1 -\/ t) * a1.thick + t * a2.thick);}
\DoxyCodeLine{00762         \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} c0 =}
\DoxyCodeLine{00763             \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(0.5 * a0 + 0.5 * b0, (1 -\/ t) * a0.thick + t * b0.thick);}
\DoxyCodeLine{00764         \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} c1 =}
\DoxyCodeLine{00765             \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(0.5 * b0 + 0.5 * p, (1 -\/ t) * b0.thick + t * p.thick);}
\DoxyCodeLine{00766         \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} c2 =}
\DoxyCodeLine{00767             \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(0.5 * c0 + 0.5 * c1, (1 -\/ t) * c0.thick + t * c1.thick);}
\DoxyCodeLine{00768 }
\DoxyCodeLine{00769         d0 = (isInFirstChunk) ? c0 : a3;}
\DoxyCodeLine{00770         d1 = (isInFirstChunk) ? c2 : a2;}
\DoxyCodeLine{00771         d2 = (isInFirstChunk) ? c1 : b1;}
\DoxyCodeLine{00772         d3 = p;}
\DoxyCodeLine{00773         d4 = (isInFirstChunk) ? b1 : c1;}
\DoxyCodeLine{00774         d5 = (isInFirstChunk) ? a2 : c2;}
\DoxyCodeLine{00775         d6 = (isInFirstChunk) ? a3 : c0;}
\DoxyCodeLine{00776       \}}
\DoxyCodeLine{00777       \textcolor{keywordflow}{if} (isBeforePointLinear \&\& !isNextPointLinear)}
\DoxyCodeLine{00778         d1 = computeLinearPoint(d0, d2, 0.01, \textcolor{keyword}{false});}
\DoxyCodeLine{00779       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (isNextPointLinear \&\& !isBeforePointLinear)}
\DoxyCodeLine{00780         d5 = computeLinearPoint(d4, d6, 0.01, \textcolor{keyword}{true});}
\DoxyCodeLine{00781       points.push\_back(d0);}
\DoxyCodeLine{00782       points.push\_back(d1);}
\DoxyCodeLine{00783       points.push\_back(d2);}
\DoxyCodeLine{00784       points.push\_back(d3);}
\DoxyCodeLine{00785       points.push\_back(d4);}
\DoxyCodeLine{00786       points.push\_back(d5);}
\DoxyCodeLine{00787       points.push\_back(d6);}
\DoxyCodeLine{00788     \}}
\DoxyCodeLine{00789   \}}
\DoxyCodeLine{00790 }
\DoxyCodeLine{00791   stroke-\/>\mbox{\hyperlink{class_t_stroke_a939e478aa10028d3e5787a8cfe6c901d}{reshape}}(\&points[0], points.size());}
\DoxyCodeLine{00792   resetControlPoints();}
\DoxyCodeLine{00793 }
\DoxyCodeLine{00794   \mbox{\hyperlink{class_control_point_editor_stroke_a97247ab7eb478a10e3b59a366fc6fa31}{getPointTypeAt}}(pos, d, indexAtPos);}
\DoxyCodeLine{00795   \textcolor{keywordflow}{return} indexAtPos;}
\DoxyCodeLine{00796 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01352}{TStroke\+::get\+Control\+Point()}}, \mbox{\hyperlink{l01849}{TStroke\+::get\+Control\+Point\+Count()}}, \mbox{\hyperlink{l00913}{get\+Point\+Type\+At()}}, \mbox{\hyperlink{l01960}{TStroke\+::get\+Thick\+Point()}}, \mbox{\hyperlink{l02029}{TStroke\+::get\+W()}}, and \mbox{\hyperlink{l01482}{TStroke\+::reshape()}}.

\mbox{\Hypertarget{class_control_point_editor_stroke_a867a22b2dd235232ceb271d9b696c8fe}\label{class_control_point_editor_stroke_a867a22b2dd235232ceb271d9b696c8fe}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!clone@{clone}}
\index{clone@{clone}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{clone()}{clone()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_control_point_editor_stroke}{Control\+Point\+Editor\+Stroke}} $\ast$ Control\+Point\+Editor\+Stroke\+::clone (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00093                                                                 \{}
\DoxyCodeLine{00094   \mbox{\hyperlink{class_control_point_editor_stroke}{ControlPointEditorStroke}} *controlPointEditorStroke =}
\DoxyCodeLine{00095       \textcolor{keyword}{new} \mbox{\hyperlink{class_control_point_editor_stroke}{ControlPointEditorStroke}}();}
\DoxyCodeLine{00096   controlPointEditorStroke-\/>\mbox{\hyperlink{class_control_point_editor_stroke_aae2e6944903ac1ca932e0cd79c0e387a}{setStroke}}(m\_vi-\/>clone(), m\_strokeIndex);}
\DoxyCodeLine{00097   \textcolor{keywordflow}{return} controlPointEditorStroke;}
\DoxyCodeLine{00098 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_ab56a9be376a1ccb0b68ded1ce29a5a6c}\label{class_control_point_editor_stroke_ab56a9be376a1ccb0b68ded1ce29a5a6c}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!deleteControlPoint@{deleteControlPoint}}
\index{deleteControlPoint@{deleteControlPoint}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{deleteControlPoint()}{deleteControlPoint()}}
{\footnotesize\ttfamily void Control\+Point\+Editor\+Stroke\+::delete\+Control\+Point (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00800                                                            \{}
\DoxyCodeLine{00801   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = getStroke();}
\DoxyCodeLine{00802   \textcolor{keywordflow}{if} (!stroke) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00803 }
\DoxyCodeLine{00804   assert(stroke \&\& 0 <= index \&\& index < (\textcolor{keywordtype}{int})getControlPointCount());}
\DoxyCodeLine{00805   \textcolor{comment}{// E' un unico chunk e in questo caso rappresenta un punto}}
\DoxyCodeLine{00806   \textcolor{keywordflow}{if} (stroke-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}() <= 3 ||}
\DoxyCodeLine{00807       (isSelfLoop() \&\& stroke-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}() <= 5)) \{}
\DoxyCodeLine{00808     m\_controlPoints.clear();}
\DoxyCodeLine{00809     m\_vi-\/>deleteStroke(m\_strokeIndex);}
\DoxyCodeLine{00810     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00811   \}}
\DoxyCodeLine{00812 }
\DoxyCodeLine{00813   QList<int> newPointsIndex;}
\DoxyCodeLine{00814   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00815   \textcolor{keywordflow}{for} (i = 0; i < (int)getControlPointCount() -\/ 1; i++)}
\DoxyCodeLine{00816     newPointsIndex.push\_back(m\_controlPoints[i].m\_pointIndex);}
\DoxyCodeLine{00817 }
\DoxyCodeLine{00818   m\_controlPoints.removeAt(index);}
\DoxyCodeLine{00819   updatePoints();}
\DoxyCodeLine{00820 }
\DoxyCodeLine{00821   \textcolor{comment}{// Aggiorno gli indici dei punti nella stroke}}
\DoxyCodeLine{00822   assert((\textcolor{keywordtype}{int})newPointsIndex.size() == (\textcolor{keywordtype}{int})getControlPointCount());}
\DoxyCodeLine{00823   \textcolor{keywordflow}{for} (i = 0; i < (int)getControlPointCount(); i++)}
\DoxyCodeLine{00824     m\_controlPoints[i].m\_pointIndex = newPointsIndex.at(i);}
\DoxyCodeLine{00825 }
\DoxyCodeLine{00826   \textcolor{keywordtype}{int} prev = prevIndex(index);}
\DoxyCodeLine{00827   \textcolor{keywordflow}{if} (prev >= 0 \&\& isSpeedOutLinear(prev)) \{}
\DoxyCodeLine{00828     setLinearSpeedOut(prev);}
\DoxyCodeLine{00829     updateDependentPoint(prev);}
\DoxyCodeLine{00830   \}}
\DoxyCodeLine{00831   \textcolor{keywordflow}{if} (index < (\textcolor{keywordtype}{int})m\_controlPoints.size() \&\& isSpeedInLinear(index)) \{}
\DoxyCodeLine{00832     setLinearSpeedIn(index);}
\DoxyCodeLine{00833     updateDependentPoint(index);}
\DoxyCodeLine{00834   \}}
\DoxyCodeLine{00835 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_a523b5242799c9da6168abf5a2cf0d027}\label{class_control_point_editor_stroke_a523b5242799c9da6168abf5a2cf0d027}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!getControlPoint@{getControlPoint}}
\index{getControlPoint@{getControlPoint}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{getControlPoint()}{getControlPoint()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_thick_point}{TThick\+Point}} Control\+Point\+Editor\+Stroke\+::get\+Control\+Point (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00483                                                                      \{}
\DoxyCodeLine{00484   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = getStroke();}
\DoxyCodeLine{00485   assert(stroke \&\& 0 <= index \&\& index < (\textcolor{keywordtype}{int})m\_controlPoints.size());}
\DoxyCodeLine{00486   \textcolor{keywordflow}{return} stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(m\_controlPoints[index].m\_pointIndex);}
\DoxyCodeLine{00487 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_adff19c67f7ecc524dc3ef083e8ae83b0}\label{class_control_point_editor_stroke_adff19c67f7ecc524dc3ef083e8ae83b0}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!getControlPointCount@{getControlPointCount}}
\index{getControlPointCount@{getControlPointCount}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{getControlPointCount()}{getControlPointCount()}}
{\footnotesize\ttfamily int Control\+Point\+Editor\+Stroke\+::get\+Control\+Point\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00077 \{ \textcolor{keywordflow}{return} m\_controlPoints.size(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_a564d068166571121d9fc40b267cf014e}\label{class_control_point_editor_stroke_a564d068166571121d9fc40b267cf014e}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!getIndexPointInStroke@{getIndexPointInStroke}}
\index{getIndexPointInStroke@{getIndexPointInStroke}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{getIndexPointInStroke()}{getIndexPointInStroke()}}
{\footnotesize\ttfamily int Control\+Point\+Editor\+Stroke\+::get\+Index\+Point\+In\+Stroke (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const}

From index point in {\bfseries{\mbox{\hyperlink{class_control_point_editor_stroke}{Control\+Point\+Editor\+Stroke}}}} to index point in {\bfseries{\mbox{\hyperlink{class_t_stroke}{TStroke}}}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00491                                                                    \{}
\DoxyCodeLine{00492   \textcolor{keywordflow}{return} m\_controlPoints[index].m\_pointIndex;}
\DoxyCodeLine{00493 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_a97247ab7eb478a10e3b59a366fc6fa31}\label{class_control_point_editor_stroke_a97247ab7eb478a10e3b59a366fc6fa31}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!getPointTypeAt@{getPointTypeAt}}
\index{getPointTypeAt@{getPointTypeAt}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{getPointTypeAt()}{getPointTypeAt()}}
{\footnotesize\ttfamily Control\+Point\+Editor\+Stroke\+::\+Point\+Type Control\+Point\+Editor\+Stroke\+::get\+Point\+Type\+At (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{double \&}]{distance2,  }\item[{int \&}]{index }\end{DoxyParamCaption}) const}

Return NONE if {\bfseries{pos}} is far from stroke. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00914                                                              \{}
\DoxyCodeLine{00915   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = getStroke();}
\DoxyCodeLine{00916   \textcolor{keywordflow}{if} (!stroke) \textcolor{keywordflow}{return} NONE;}
\DoxyCodeLine{00917   \textcolor{keywordtype}{double} w              = stroke-\/>\mbox{\hyperlink{class_t_stroke_a38326dc317f9ff3828940996f41376a6}{getW}}(pos);}
\DoxyCodeLine{00918   \mbox{\hyperlink{class_t_point_t}{TPointD}} p             = stroke-\/>\mbox{\hyperlink{class_t_stroke_ace861e064b925c5d41a6d7381ae6ada5}{getPoint}}(w);}
\DoxyCodeLine{00919   \textcolor{keywordtype}{double} strokeDistance = tdistance2(p, pos);}
\DoxyCodeLine{00920 }
\DoxyCodeLine{00921   \textcolor{keywordtype}{int} precPointIndex     = -\/1;}
\DoxyCodeLine{00922   \textcolor{keywordtype}{double} minPrecDistance = 0;}
\DoxyCodeLine{00923   \textcolor{keywordtype}{double} minDistance2    = distance2;}
\DoxyCodeLine{00924   index                  = -\/1;}
\DoxyCodeLine{00925   PointType type         = NONE;}
\DoxyCodeLine{00926   \textcolor{keywordtype}{int} cpCount            = m\_controlPoints.size();}
\DoxyCodeLine{00927   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00928   \textcolor{keywordflow}{for} (i = 0; i < cpCount; i++) \{}
\DoxyCodeLine{00929     \mbox{\hyperlink{struct_control_point}{ControlPoint}} cPoint = m\_controlPoints[i];}
\DoxyCodeLine{00930     \mbox{\hyperlink{class_t_point_t}{TPointD}} point       = stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(cPoint.m\_pointIndex);}
\DoxyCodeLine{00931     \textcolor{keywordtype}{double} cpDistance2  = tdistance2(pos, point);}
\DoxyCodeLine{00932     \textcolor{keywordtype}{double} distanceIn2  = !isSpeedInLinear(i)}
\DoxyCodeLine{00933                              ? tdistance2(pos, point -\/ cPoint.m\_speedIn)}
\DoxyCodeLine{00934                              : cpDistance2 + 1;}
\DoxyCodeLine{00935     \textcolor{keywordtype}{double} distanceOut2 = !isSpeedOutLinear(i)}
\DoxyCodeLine{00936                               ? tdistance2(pos, point + cPoint.m\_speedOut)}
\DoxyCodeLine{00937                               : cpDistance2 + 1;}
\DoxyCodeLine{00938     \textcolor{keywordflow}{if} (i == 0 \&\& !isSelfLoop())}
\DoxyCodeLine{00939       distanceIn2 = std::max(cpDistance2, distanceOut2) + 1;}
\DoxyCodeLine{00940     \textcolor{keywordflow}{if} (i == cpCount -\/ 1 \&\& !isSelfLoop())}
\DoxyCodeLine{00941       distanceOut2 = std::max(cpDistance2, distanceIn2) + 1;}
\DoxyCodeLine{00942 }
\DoxyCodeLine{00943     \textcolor{keywordflow}{if} (cpDistance2 < distanceIn2 \&\& cpDistance2 < distanceOut2 \&\&}
\DoxyCodeLine{00944         (cpDistance2 < minDistance2 || index < 0)) \{}
\DoxyCodeLine{00945       minDistance2 = cpDistance2;}
\DoxyCodeLine{00946       index        = i;}
\DoxyCodeLine{00947       type         = CONTROL\_POINT;}
\DoxyCodeLine{00948     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (distanceIn2 < cpDistance2 \&\& distanceIn2 < distanceOut2 \&\&}
\DoxyCodeLine{00949                (distanceIn2 < minDistance2 || index < 0)) \{}
\DoxyCodeLine{00950       minDistance2 = distanceIn2;}
\DoxyCodeLine{00951       index        = i;}
\DoxyCodeLine{00952       type         = SPEED\_IN;}
\DoxyCodeLine{00953     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (distanceOut2 < cpDistance2 \&\& distanceOut2 < distanceIn2 \&\&}
\DoxyCodeLine{00954                (distanceOut2 < minDistance2 || index < 0)) \{}
\DoxyCodeLine{00955       minDistance2 = distanceOut2;}
\DoxyCodeLine{00956       index        = i;}
\DoxyCodeLine{00957       type         = SPEED\_OUT;}
\DoxyCodeLine{00958     \}}
\DoxyCodeLine{00959 }
\DoxyCodeLine{00960     \textcolor{keywordtype}{double} cpw =}
\DoxyCodeLine{00961         stroke-\/>\mbox{\hyperlink{class_t_stroke_a244eb0bf1629669b61949df20b2ee091}{getParameterAtControlPoint}}(m\_controlPoints[i].m\_pointIndex);}
\DoxyCodeLine{00962     \textcolor{keywordflow}{if} (w <= cpw) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00963     \textcolor{keywordtype}{double} precDistance = w -\/ cpw;}
\DoxyCodeLine{00964     \textcolor{keywordflow}{if} (precPointIndex < 0 || precDistance < minPrecDistance) \{}
\DoxyCodeLine{00965       precPointIndex  = i;}
\DoxyCodeLine{00966       minPrecDistance = precDistance;}
\DoxyCodeLine{00967     \}}
\DoxyCodeLine{00968   \}}
\DoxyCodeLine{00969 }
\DoxyCodeLine{00970   \textcolor{keywordflow}{if} (minDistance2 < distance2)}
\DoxyCodeLine{00971     distance2 = minDistance2;}
\DoxyCodeLine{00972   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strokeDistance > distance2) \{}
\DoxyCodeLine{00973     distance2 = strokeDistance;}
\DoxyCodeLine{00974     index     = -\/1;}
\DoxyCodeLine{00975     type      = NONE;}
\DoxyCodeLine{00976   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00977     distance2 = minPrecDistance;}
\DoxyCodeLine{00978     index     = precPointIndex;}
\DoxyCodeLine{00979     type      = SEGMENT;}
\DoxyCodeLine{00980   \}}
\DoxyCodeLine{00981 }
\DoxyCodeLine{00982   \textcolor{keywordflow}{return} type;}
\DoxyCodeLine{00983 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01352}{TStroke\+::get\+Control\+Point()}}, \mbox{\hyperlink{l02002}{TStroke\+::get\+Parameter\+At\+Control\+Point()}}, \mbox{\hyperlink{l00236}{TStroke\+::get\+Point()}}, and \mbox{\hyperlink{l02029}{TStroke\+::get\+W()}}.



Referenced by \mbox{\hyperlink{l00664}{add\+Control\+Point()}}.

\mbox{\Hypertarget{class_control_point_editor_stroke_a0ea9295887099126fc04e984186b213c}\label{class_control_point_editor_stroke_a0ea9295887099126fc04e984186b213c}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!getSpeedInPoint@{getSpeedInPoint}}
\index{getSpeedInPoint@{getSpeedInPoint}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{getSpeedInPoint()}{getSpeedInPoint()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_thick_point}{TThick\+Point}} Control\+Point\+Editor\+Stroke\+::get\+Speed\+In\+Point (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00497                                                                      \{}
\DoxyCodeLine{00498   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = getStroke();}
\DoxyCodeLine{00499   assert(stroke \&\& 0 <= index \&\& index < (\textcolor{keywordtype}{int})m\_controlPoints.size());}
\DoxyCodeLine{00500 }
\DoxyCodeLine{00501   \mbox{\hyperlink{struct_control_point}{ControlPoint}} cp = m\_controlPoints[index];}
\DoxyCodeLine{00502   \textcolor{keywordflow}{return} stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(cp.m\_pointIndex) -\/ cp.m\_speedIn;}
\DoxyCodeLine{00503 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_aca8ddb8352ac7931cbe2c3a96dc98e41}\label{class_control_point_editor_stroke_aca8ddb8352ac7931cbe2c3a96dc98e41}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!getSpeedOutPoint@{getSpeedOutPoint}}
\index{getSpeedOutPoint@{getSpeedOutPoint}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{getSpeedOutPoint()}{getSpeedOutPoint()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_thick_point}{TThick\+Point}} Control\+Point\+Editor\+Stroke\+::get\+Speed\+Out\+Point (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00507                                                                       \{}
\DoxyCodeLine{00508   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = getStroke();}
\DoxyCodeLine{00509   assert(stroke \&\& 0 <= index \&\& index < (\textcolor{keywordtype}{int})m\_controlPoints.size());}
\DoxyCodeLine{00510 }
\DoxyCodeLine{00511   \mbox{\hyperlink{struct_control_point}{ControlPoint}} cp = m\_controlPoints[index];}
\DoxyCodeLine{00512   \textcolor{keywordflow}{return} stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(cp.m\_pointIndex) + cp.m\_speedOut;}
\DoxyCodeLine{00513 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_a262eae0935e7f9fad98c5281814b8e9a}\label{class_control_point_editor_stroke_a262eae0935e7f9fad98c5281814b8e9a}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!getStroke@{getStroke}}
\index{getStroke@{getStroke}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{getStroke()}{getStroke()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ Control\+Point\+Editor\+Stroke\+::get\+Stroke (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00070                              \{}
\DoxyCodeLine{00071     \textcolor{keywordflow}{return} m\_vi ? m\_vi-\/>getStroke(m\_strokeIndex) : 0;}
\DoxyCodeLine{00072   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_a4a0a5a170756b1ecf0d217945611d2a5}\label{class_control_point_editor_stroke_a4a0a5a170756b1ecf0d217945611d2a5}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!getStrokeIndex@{getStrokeIndex}}
\index{getStrokeIndex@{getStrokeIndex}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{getStrokeIndex()}{getStrokeIndex()}}
{\footnotesize\ttfamily int Control\+Point\+Editor\+Stroke\+::get\+Stroke\+Index (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00075 \{ \textcolor{keywordflow}{return} m\_strokeIndex; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_aa50af442384b422cd7ac515fd1c92ca3}\label{class_control_point_editor_stroke_aa50af442384b422cd7ac515fd1c92ca3}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!isCusp@{isCusp}}
\index{isCusp@{isCusp}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{isCusp()}{isCusp()}}
{\footnotesize\ttfamily bool Control\+Point\+Editor\+Stroke\+::is\+Cusp (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const}



Return true if index point is a cusp. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00517                                                      \{}
\DoxyCodeLine{00518   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = getStroke();}
\DoxyCodeLine{00519   assert(stroke \&\& 0 <= index \&\& index < (\textcolor{keywordtype}{int})getControlPointCount());}
\DoxyCodeLine{00520   \textcolor{keywordflow}{return} m\_controlPoints[index].m\_isCusp;}
\DoxyCodeLine{00521 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00851}{move\+Segment()}}, and \mbox{\hyperlink{l00525}{set\+Cusp()}}.

\mbox{\Hypertarget{class_control_point_editor_stroke_ab20499196db6dd39fa3b655398208c53}\label{class_control_point_editor_stroke_ab20499196db6dd39fa3b655398208c53}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!isSelfLoop@{isSelfLoop}}
\index{isSelfLoop@{isSelfLoop}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{isSelfLoop()}{isSelfLoop()}}
{\footnotesize\ttfamily bool Control\+Point\+Editor\+Stroke\+::is\+Self\+Loop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00126                           \{}
\DoxyCodeLine{00127     \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = getStroke();}
\DoxyCodeLine{00128     \textcolor{keywordflow}{return} stroke \&\& stroke-\/>\mbox{\hyperlink{class_t_stroke_a3565d6c34d3eb02fb1a6993ca626425c}{isSelfLoop}}();}
\DoxyCodeLine{00129   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_ac7f90113ac718d24c24fc7e7b38f70c3}\label{class_control_point_editor_stroke_ac7f90113ac718d24c24fc7e7b38f70c3}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!isSpeedInLinear@{isSpeedInLinear}}
\index{isSpeedInLinear@{isSpeedInLinear}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{isSpeedInLinear()}{isSpeedInLinear()}}
{\footnotesize\ttfamily bool Control\+Point\+Editor\+Stroke\+::is\+Speed\+In\+Linear (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00534                                                               \{}
\DoxyCodeLine{00535   assert(index < (\textcolor{keywordtype}{int})m\_controlPoints.size());}
\DoxyCodeLine{00536   \textcolor{keywordflow}{return} (fabs(m\_controlPoints[index].m\_speedIn.x) <= 0.02) \&\&}
\DoxyCodeLine{00537          (fabs(m\_controlPoints[index].m\_speedIn.y) <= 0.02);}
\DoxyCodeLine{00538 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_a60e4ff0394c0c05d9459072ae1327962}\label{class_control_point_editor_stroke_a60e4ff0394c0c05d9459072ae1327962}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!isSpeedOutLinear@{isSpeedOutLinear}}
\index{isSpeedOutLinear@{isSpeedOutLinear}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{isSpeedOutLinear()}{isSpeedOutLinear()}}
{\footnotesize\ttfamily bool Control\+Point\+Editor\+Stroke\+::is\+Speed\+Out\+Linear (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00542                                                                \{}
\DoxyCodeLine{00543   assert(index < (\textcolor{keywordtype}{int})m\_controlPoints.size());}
\DoxyCodeLine{00544   \textcolor{keywordflow}{return} (fabs(m\_controlPoints[index].m\_speedOut.x) <= 0.02) \&\&}
\DoxyCodeLine{00545          (fabs(m\_controlPoints[index].m\_speedOut.y) <= 0.02);}
\DoxyCodeLine{00546 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_a39af5add560886dfbaa044c39b68699d}\label{class_control_point_editor_stroke_a39af5add560886dfbaa044c39b68699d}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!moveControlPoint@{moveControlPoint}}
\index{moveControlPoint@{moveControlPoint}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{moveControlPoint()}{moveControlPoint()}}
{\footnotesize\ttfamily void Control\+Point\+Editor\+Stroke\+::move\+Control\+Point (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{delta }\end{DoxyParamCaption})}

Move {\bfseries{index}} \mbox{\hyperlink{struct_control_point}{Control\+Point}} of {\bfseries{delta}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00653                                                                       \{}
\DoxyCodeLine{00654   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = getStroke();}
\DoxyCodeLine{00655   \textcolor{keywordflow}{if} (!stroke) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00656   assert(stroke \&\& 0 <= index \&\& index < (\textcolor{keywordtype}{int})getControlPointCount());}
\DoxyCodeLine{00657 }
\DoxyCodeLine{00658   moveSingleControlPoint(index, delta);}
\DoxyCodeLine{00659   updateDependentPoint(index);}
\DoxyCodeLine{00660 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_aedcb3272370078950df6ced76d0c2703}\label{class_control_point_editor_stroke_aedcb3272370078950df6ced76d0c2703}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!moveSegment@{moveSegment}}
\index{moveSegment@{moveSegment}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{moveSegment()}{moveSegment()}}
{\footnotesize\ttfamily void Control\+Point\+Editor\+Stroke\+::move\+Segment (\begin{DoxyParamCaption}\item[{int}]{before\+Index,  }\item[{int}]{next\+Index,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{delta,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos }\end{DoxyParamCaption})}

Move segment between {\bfseries{before\+Index}} and {\bfseries{next\+Index}} of {\bfseries{delta}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00853                                                                \{}
\DoxyCodeLine{00854   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = getStroke();}
\DoxyCodeLine{00855   \textcolor{keywordflow}{if} (!stroke) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00856 }
\DoxyCodeLine{00857   \textcolor{keywordtype}{int} cpCount = getControlPointCount();}
\DoxyCodeLine{00858   \textcolor{comment}{// Verifiche per il caso in cui lo stroke e' selfLoop}}
\DoxyCodeLine{00859   \textcolor{keywordflow}{if} (isSelfLoop() \&\& beforeIndex == 0 \&\& nextIndex == cpCount -\/ 1)}
\DoxyCodeLine{00860     std::swap(beforeIndex, nextIndex);}
\DoxyCodeLine{00861 }
\DoxyCodeLine{00862   \textcolor{keywordtype}{int} beforePointIndex = m\_controlPoints[beforeIndex].m\_pointIndex;}
\DoxyCodeLine{00863   \textcolor{keywordtype}{int} nextPointIndex   = (isSelfLoop() \&\& nextIndex == 0)}
\DoxyCodeLine{00864                            ? stroke-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}() -\/ 1}
\DoxyCodeLine{00865                            : m\_controlPoints[nextIndex].m\_pointIndex;}
\DoxyCodeLine{00866   \textcolor{keywordtype}{double} w  = stroke-\/>\mbox{\hyperlink{class_t_stroke_a38326dc317f9ff3828940996f41376a6}{getW}}(pos);}
\DoxyCodeLine{00867   \textcolor{keywordtype}{double} w0 = stroke-\/>\mbox{\hyperlink{class_t_stroke_a244eb0bf1629669b61949df20b2ee091}{getParameterAtControlPoint}}(beforePointIndex);}
\DoxyCodeLine{00868   \textcolor{keywordtype}{double} w4 = stroke-\/>\mbox{\hyperlink{class_t_stroke_a244eb0bf1629669b61949df20b2ee091}{getParameterAtControlPoint}}(nextPointIndex);}
\DoxyCodeLine{00869   \textcolor{keywordflow}{if} (w0 > w) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00870   assert(w0 <= w \&\& w <= w4);}
\DoxyCodeLine{00871 }
\DoxyCodeLine{00872   \textcolor{keywordtype}{double} t = 1;}
\DoxyCodeLine{00873   \textcolor{keywordtype}{double} s = 1;}
\DoxyCodeLine{00874 }
\DoxyCodeLine{00875   \textcolor{keywordflow}{if} (isSpeedOutLinear(beforeIndex)) \{}
\DoxyCodeLine{00876     m\_controlPoints[beforeIndex].m\_speedOut =}
\DoxyCodeLine{00877         (stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(nextPointIndex) -\/}
\DoxyCodeLine{00878          stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(beforePointIndex)) *}
\DoxyCodeLine{00879         0.3;}
\DoxyCodeLine{00880     \textcolor{keywordflow}{if} (!isSpeedInLinear(beforeIndex))}
\DoxyCodeLine{00881       m\_controlPoints[beforeIndex].m\_isCusp = \textcolor{keyword}{true};}
\DoxyCodeLine{00882   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!isSpeedOutLinear(beforeIndex) \&\& !isSpeedInLinear(beforeIndex) \&\&}
\DoxyCodeLine{00883              !\mbox{\hyperlink{class_control_point_editor_stroke_aa50af442384b422cd7ac515fd1c92ca3}{isCusp}}(beforeIndex)) \{}
\DoxyCodeLine{00884     t = 1 -\/ fabs(w -\/ w0) / fabs(w4 -\/ w0);}
\DoxyCodeLine{00885     moveSingleControlPoint(beforeIndex, t * delta);}
\DoxyCodeLine{00886     t = 1 -\/ t;}
\DoxyCodeLine{00887   \}}
\DoxyCodeLine{00888 }
\DoxyCodeLine{00889   \textcolor{keywordflow}{if} (isSpeedInLinear(nextIndex)) \{}
\DoxyCodeLine{00890     m\_controlPoints[nextIndex].m\_speedIn =}
\DoxyCodeLine{00891         (stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(nextPointIndex) -\/}
\DoxyCodeLine{00892          stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(beforePointIndex)) *}
\DoxyCodeLine{00893         0.3;}
\DoxyCodeLine{00894     \textcolor{keywordflow}{if} (!isSpeedOutLinear(nextIndex))}
\DoxyCodeLine{00895       m\_controlPoints[nextIndex].m\_isCusp = \textcolor{keyword}{true};}
\DoxyCodeLine{00896   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!isSpeedInLinear(nextIndex) \&\& !isSpeedOutLinear(nextIndex) \&\&}
\DoxyCodeLine{00897              !\mbox{\hyperlink{class_control_point_editor_stroke_aa50af442384b422cd7ac515fd1c92ca3}{isCusp}}(nextIndex)) \{}
\DoxyCodeLine{00898     s = 1 -\/ fabs(w4 -\/ w) / fabs(w4 -\/ w0);}
\DoxyCodeLine{00899     moveSingleControlPoint(nextIndex, s * delta);}
\DoxyCodeLine{00900     s = 1 -\/ s;}
\DoxyCodeLine{00901   \}}
\DoxyCodeLine{00902 }
\DoxyCodeLine{00903   moveSpeedOut(beforeIndex, delta * s, 0);}
\DoxyCodeLine{00904   \textcolor{comment}{// updateDependentPoint(beforeIndex);}}
\DoxyCodeLine{00905   moveSpeedIn(nextIndex, delta * t, 0);}
\DoxyCodeLine{00906   \textcolor{comment}{// updateDependentPoint(nextIndex);}}
\DoxyCodeLine{00907 }
\DoxyCodeLine{00908   updatePoints();}
\DoxyCodeLine{00909 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01352}{TStroke\+::get\+Control\+Point()}}, \mbox{\hyperlink{l01849}{TStroke\+::get\+Control\+Point\+Count()}}, \mbox{\hyperlink{l02002}{TStroke\+::get\+Parameter\+At\+Control\+Point()}}, \mbox{\hyperlink{l02029}{TStroke\+::get\+W()}}, and \mbox{\hyperlink{l00517}{is\+Cusp()}}.

\mbox{\Hypertarget{class_control_point_editor_stroke_abedad5e542f17b175b711c7393623c39}\label{class_control_point_editor_stroke_abedad5e542f17b175b711c7393623c39}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!moveSpeed@{moveSpeed}}
\index{moveSpeed@{moveSpeed}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{moveSpeed()}{moveSpeed()}}
{\footnotesize\ttfamily void Control\+Point\+Editor\+Stroke\+::move\+Speed (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{delta,  }\item[{bool}]{is\+In,  }\item[{double}]{min\+Distance }\end{DoxyParamCaption})}

Move speed in {\bfseries{index}} of {\bfseries{delta}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00840                                                                         \{}
\DoxyCodeLine{00841   \textcolor{keywordflow}{if} (!isIn)}
\DoxyCodeLine{00842     moveSpeedOut(index, delta, minDistance);}
\DoxyCodeLine{00843   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00844     moveSpeedIn(index, delta, minDistance);}
\DoxyCodeLine{00845 }
\DoxyCodeLine{00846   updateDependentPoint(index);}
\DoxyCodeLine{00847 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00525}{set\+Cusp()}}.

\mbox{\Hypertarget{class_control_point_editor_stroke_a1fe635cdeb5357ddf266f7f878b1e44d}\label{class_control_point_editor_stroke_a1fe635cdeb5357ddf266f7f878b1e44d}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!setControlPointsLinear@{setControlPointsLinear}}
\index{setControlPointsLinear@{setControlPointsLinear}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{setControlPointsLinear()}{setControlPointsLinear()}}
{\footnotesize\ttfamily bool Control\+Point\+Editor\+Stroke\+::set\+Control\+Points\+Linear (\begin{DoxyParamCaption}\item[{std\+::set$<$ int $>$}]{points,  }\item[{bool}]{is\+Linear }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00641                                                                      \{}
\DoxyCodeLine{00642   std::set<int>::iterator it;}
\DoxyCodeLine{00643   \textcolor{keywordtype}{bool} isChanged = \textcolor{keyword}{false};}
\DoxyCodeLine{00644   \textcolor{keywordflow}{for} (it = points.begin(); it != points.end(); it++)}
\DoxyCodeLine{00645     isChanged = \mbox{\hyperlink{class_control_point_editor_stroke_ae1f6d2d7508048e40e79023140292e21}{setLinear}}(*it, isLinear, \textcolor{keyword}{false}) || isChanged;}
\DoxyCodeLine{00646   \textcolor{keywordflow}{for} (it = points.begin(); it != points.end(); it++) updateDependentPoint(*it);}
\DoxyCodeLine{00647   \textcolor{keywordflow}{return} isChanged;}
\DoxyCodeLine{00648 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_a4ecb68e14d8f5c279d998352775ad0f6}\label{class_control_point_editor_stroke_a4ecb68e14d8f5c279d998352775ad0f6}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!setCusp@{setCusp}}
\index{setCusp@{setCusp}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{setCusp()}{setCusp()}}
{\footnotesize\ttfamily void Control\+Point\+Editor\+Stroke\+::set\+Cusp (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{bool}]{is\+Cusp,  }\item[{bool}]{set\+Speed\+In }\end{DoxyParamCaption})}



Set {\bfseries{m\+\_\+is\+Cusp}} of {\bfseries{index}} point to {\bfseries{is\+Cusp}}. 

If is\+Cusp == false check {\bfseries{set\+Speed\+In}} and modify speed. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00526                                                         \{}
\DoxyCodeLine{00527   m\_controlPoints[index].m\_isCusp = \mbox{\hyperlink{class_control_point_editor_stroke_aa50af442384b422cd7ac515fd1c92ca3}{isCusp}};}
\DoxyCodeLine{00528   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_control_point_editor_stroke_aa50af442384b422cd7ac515fd1c92ca3}{isCusp}} == \textcolor{keyword}{true}) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00529   \mbox{\hyperlink{class_control_point_editor_stroke_abedad5e542f17b175b711c7393623c39}{moveSpeed}}(index, \mbox{\hyperlink{class_t_point_t}{TPointD}}(0.0, 0.0), setSpeedIn, 0.0);}
\DoxyCodeLine{00530 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00517}{is\+Cusp()}}, and \mbox{\hyperlink{l00839}{move\+Speed()}}.

\mbox{\Hypertarget{class_control_point_editor_stroke_ae1f6d2d7508048e40e79023140292e21}\label{class_control_point_editor_stroke_ae1f6d2d7508048e40e79023140292e21}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!setLinear@{setLinear}}
\index{setLinear@{setLinear}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{setLinear()}{setLinear()}}
{\footnotesize\ttfamily bool Control\+Point\+Editor\+Stroke\+::set\+Linear (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{bool}]{is\+Linear,  }\item[{bool}]{update\+Points = {\ttfamily true} }\end{DoxyParamCaption})}

If is\+Linear==true set to \char`\"{}0\char`\"{} the speed\+In and speed\+Out value of index point; otherwise set to default value. Return true if speed\+In or speed\+Out is modified. If update\+Points is true update dependent point after. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00622                                                             \{}
\DoxyCodeLine{00623   \textcolor{keywordtype}{bool} movePrec = (!isSelfLoop()) ? index > 0 : \textcolor{keyword}{true};}
\DoxyCodeLine{00624   \textcolor{keywordtype}{bool} moveNext = (!isSelfLoop()) ? (index < getControlPointCount() -\/ 1) : \textcolor{keyword}{true};}
\DoxyCodeLine{00625   \textcolor{keywordflow}{if} (isLinear != isSpeedInLinear(index))}
\DoxyCodeLine{00626     setLinearSpeedIn(index, isLinear, updatePoints);}
\DoxyCodeLine{00627   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00628     movePrec = \textcolor{keyword}{false};}
\DoxyCodeLine{00629   \textcolor{keywordflow}{if} (isLinear != isSpeedOutLinear(index))}
\DoxyCodeLine{00630     setLinearSpeedOut(index, isLinear, updatePoints);}
\DoxyCodeLine{00631   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00632     moveNext = \textcolor{keyword}{false};}
\DoxyCodeLine{00633   \textcolor{keywordtype}{bool} ret = moveNext || movePrec;}
\DoxyCodeLine{00634   \textcolor{keywordflow}{if} (ret) m\_controlPoints[index].m\_isCusp = \textcolor{keyword}{true};}
\DoxyCodeLine{00635   \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00636 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_ab7fd5ffbcc688306ad9fb6bcf69dc4b7}\label{class_control_point_editor_stroke_ab7fd5ffbcc688306ad9fb6bcf69dc4b7}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!setLinearSpeedIn@{setLinearSpeedIn}}
\index{setLinearSpeedIn@{setLinearSpeedIn}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{setLinearSpeedIn()}{setLinearSpeedIn()}}
{\footnotesize\ttfamily void Control\+Point\+Editor\+Stroke\+::set\+Linear\+Speed\+In (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{bool}]{linear = {\ttfamily true},  }\item[{bool}]{update\+Points = {\ttfamily true} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00551                                                                    \{}
\DoxyCodeLine{00552   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = getStroke();}
\DoxyCodeLine{00553   \textcolor{keywordflow}{if} (!stroke || m\_controlPoints.size() == 1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00554   \textcolor{keywordtype}{int} pointIndex = m\_controlPoints[index].m\_pointIndex;}
\DoxyCodeLine{00555   \textcolor{keywordflow}{if} (pointIndex == 0) \{}
\DoxyCodeLine{00556     \textcolor{keywordflow}{if} (isSelfLoop())}
\DoxyCodeLine{00557       pointIndex = stroke-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}() -\/ 1;}
\DoxyCodeLine{00558     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00559       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00560   \}}
\DoxyCodeLine{00561   \textcolor{keywordtype}{int} precIndex =}
\DoxyCodeLine{00562       (index == 0 \&\& isSelfLoop()) ? m\_controlPoints.size() -\/ 1 : index -\/ 1;}
\DoxyCodeLine{00563 }
\DoxyCodeLine{00564   \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} point     = stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(pointIndex);}
\DoxyCodeLine{00565   \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} precPoint = (pointIndex > 2)}
\DoxyCodeLine{00566                               ? stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(pointIndex -\/ 3)}
\DoxyCodeLine{00567                               : \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}();}
\DoxyCodeLine{00568 }
\DoxyCodeLine{00569   \textcolor{keywordflow}{if} (linear) \{}
\DoxyCodeLine{00570     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} p(point -\/ precPoint);}
\DoxyCodeLine{00571     \textcolor{keywordtype}{double} n = norm(p);}
\DoxyCodeLine{00572     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} speedIn =}
\DoxyCodeLine{00573         (n != 0.0) ? (0.01 / n) * p : \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(0.001, 0.001, 0.0);}
\DoxyCodeLine{00574     m\_controlPoints[index].m\_speedIn = speedIn;}
\DoxyCodeLine{00575   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00576     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} newPrec2             = (precPoint + point) * 0.5;}
\DoxyCodeLine{00577     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} speedIn              = (point -\/ newPrec2) * 0.5;}
\DoxyCodeLine{00578     m\_controlPoints[index].m\_speedIn = speedIn;}
\DoxyCodeLine{00579   \}}
\DoxyCodeLine{00580   \textcolor{keywordflow}{if} (updatePoints) updateDependentPoint(index);}
\DoxyCodeLine{00581 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_a8ebac0a53cfd2662e35e7777dc5d96ab}\label{class_control_point_editor_stroke_a8ebac0a53cfd2662e35e7777dc5d96ab}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!setLinearSpeedOut@{setLinearSpeedOut}}
\index{setLinearSpeedOut@{setLinearSpeedOut}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{setLinearSpeedOut()}{setLinearSpeedOut()}}
{\footnotesize\ttfamily void Control\+Point\+Editor\+Stroke\+::set\+Linear\+Speed\+Out (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{bool}]{linear = {\ttfamily true},  }\item[{bool}]{update\+Points = {\ttfamily true} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00586                                                                     \{}
\DoxyCodeLine{00587   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = getStroke();}
\DoxyCodeLine{00588   \textcolor{keywordflow}{if} (!stroke || m\_controlPoints.size() == 1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00589   \textcolor{keywordtype}{int} cpCount    = stroke-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}();}
\DoxyCodeLine{00590   \textcolor{keywordtype}{int} pointIndex = m\_controlPoints[index].m\_pointIndex;}
\DoxyCodeLine{00591   \textcolor{keywordflow}{if} (pointIndex == cpCount -\/ 1) \{}
\DoxyCodeLine{00592     \textcolor{keywordflow}{if} (isSelfLoop())}
\DoxyCodeLine{00593       pointIndex = 0;}
\DoxyCodeLine{00594     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00595       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00596   \}}
\DoxyCodeLine{00597   \textcolor{keywordtype}{int} nextIndex =}
\DoxyCodeLine{00598       (index == m\_controlPoints.size() -\/ 1 \&\& isSelfLoop()) ? 0 : index + 1;}
\DoxyCodeLine{00599 }
\DoxyCodeLine{00600   \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} point     = stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(pointIndex);}
\DoxyCodeLine{00601   \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} nextPoint = (pointIndex < cpCount -\/ 3)}
\DoxyCodeLine{00602                               ? stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(pointIndex + 3)}
\DoxyCodeLine{00603                               : \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}();}
\DoxyCodeLine{00604 }
\DoxyCodeLine{00605   \textcolor{keywordflow}{if} (linear) \{}
\DoxyCodeLine{00606     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} p(nextPoint -\/ point);}
\DoxyCodeLine{00607     \textcolor{keywordtype}{double} n = norm(p);}
\DoxyCodeLine{00608     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} speedOut =}
\DoxyCodeLine{00609         (n != 0.0) ? (0.01 / n) * p : \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(0.001, 0.001, 0.0);}
\DoxyCodeLine{00610     m\_controlPoints[index].m\_speedOut = speedOut;}
\DoxyCodeLine{00611   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00612     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} newNext2              = (nextPoint + point) * 0.5;}
\DoxyCodeLine{00613     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} speedOut              = (newNext2 -\/ point) * 0.5;}
\DoxyCodeLine{00614     m\_controlPoints[index].m\_speedOut = speedOut;}
\DoxyCodeLine{00615   \}}
\DoxyCodeLine{00616   \textcolor{keywordflow}{if} (updatePoints) updateDependentPoint(index);}
\DoxyCodeLine{00617 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_control_point_editor_stroke_aae2e6944903ac1ca932e0cd79c0e387a}\label{class_control_point_editor_stroke_aae2e6944903ac1ca932e0cd79c0e387a}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!setStroke@{setStroke}}
\index{setStroke@{setStroke}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{setStroke()}{setStroke()}}
{\footnotesize\ttfamily bool Control\+Point\+Editor\+Stroke\+::set\+Stroke (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&}]{vi,  }\item[{int}]{stroke\+Index }\end{DoxyParamCaption})}

Modify stroke\+: between two linear or cusp point must be a pair chunk number. PAY ATTENTION\+: Can add control point in the stroke. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00460                                                           \{}
\DoxyCodeLine{00461   \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{true};}
\DoxyCodeLine{00462   \textcolor{keywordflow}{if} (m\_strokeIndex == strokeIndex \&\& m\_vi == vi) ret = \textcolor{keyword}{false};}
\DoxyCodeLine{00463   m\_strokeIndex = strokeIndex;}
\DoxyCodeLine{00464   m\_vi          = vi;}
\DoxyCodeLine{00465   \textcolor{keywordflow}{if} (!vi || strokeIndex == -\/1) \{}
\DoxyCodeLine{00466     m\_controlPoints.clear();}
\DoxyCodeLine{00467     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00468   \}}
\DoxyCodeLine{00469   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke              = getStroke();}
\DoxyCodeLine{00470   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_thick_quadratic}{TThickQuadratic}} *chunk = stroke-\/>\mbox{\hyperlink{class_t_stroke_a06b18ffed330411aad73ef1748a3f263}{getChunk}}(0);}
\DoxyCodeLine{00471   \textcolor{keywordflow}{if} (stroke-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}() == 3 \&\& chunk-\/>\mbox{\hyperlink{class_t_quadratic_a1ee0984c7cd5c818840f6e688727ddcf}{getP0}}() == chunk-\/>\mbox{\hyperlink{class_t_quadratic_a77b9801ed9670e93fe6a9d49720521f9}{getP1}}() \&\&}
\DoxyCodeLine{00472       chunk-\/>\mbox{\hyperlink{class_t_quadratic_a1ee0984c7cd5c818840f6e688727ddcf}{getP0}}() == chunk-\/>\mbox{\hyperlink{class_t_quadratic_a460dfe351429492a9bf0ad22bc4538e2}{getP2}}()) \{}
\DoxyCodeLine{00473     resetControlPoints();}
\DoxyCodeLine{00474     \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00475   \}}
\DoxyCodeLine{00476   adjustChunkParity();}
\DoxyCodeLine{00477   resetControlPoints();}
\DoxyCodeLine{00478   \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00479 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01855}{TStroke\+::get\+Chunk()}}, \mbox{\hyperlink{l01849}{TStroke\+::get\+Control\+Point\+Count()}}, \mbox{\hyperlink{l00138}{TQuadratic\+::get\+P0()}}, \mbox{\hyperlink{l00140}{TQuadratic\+::get\+P1()}}, and \mbox{\hyperlink{l00142}{TQuadratic\+::get\+P2()}}.



Referenced by \mbox{\hyperlink{l00355}{Control\+Point\+Editor\+Tool\+::draw()}}, \mbox{\hyperlink{l00924}{Control\+Point\+Editor\+Tool\+::on\+Activate()}}, and \mbox{\hyperlink{l00952}{Control\+Point\+Editor\+Tool\+::on\+Image\+Changed()}}.

\mbox{\Hypertarget{class_control_point_editor_stroke_ac77a026c78b36339e26e4b28597e9db2}\label{class_control_point_editor_stroke_ac77a026c78b36339e26e4b28597e9db2}} 
\index{ControlPointEditorStroke@{ControlPointEditorStroke}!setStrokeIndex@{setStrokeIndex}}
\index{setStrokeIndex@{setStrokeIndex}!ControlPointEditorStroke@{ControlPointEditorStroke}}
\doxysubsubsection{\texorpdfstring{setStrokeIndex()}{setStrokeIndex()}}
{\footnotesize\ttfamily void Control\+Point\+Editor\+Stroke\+::set\+Stroke\+Index (\begin{DoxyParamCaption}\item[{int}]{stroke\+Index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00074 \{ m\_strokeIndex = strokeIndex; \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/controlpointselection.\+h\item 
E\+:/opentoonz/toonz/sources/tnztools/controlpointselection.\+cpp\end{DoxyCompactItemize}
