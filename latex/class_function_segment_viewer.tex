\hypertarget{class_function_segment_viewer}{}\doxysection{Function\+Segment\+Viewer Class Reference}
\label{class_function_segment_viewer}\index{FunctionSegmentViewer@{FunctionSegmentViewer}}
Inheritance diagram for Function\+Segment\+Viewer\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_function_segment_viewer}
\end{center}
\end{figure}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_function_segment_viewer_a1d3c3741e368ae84f55fce580c176b91}{set\+Segment}} (\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$curve, int segment\+Index)
\item 
void \mbox{\hyperlink{class_function_segment_viewer_ab239758f5ef10a3571dee6c92ecf418b}{set\+Segment\+By\+Frame}} (\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$curve, int frame)
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_function_segment_viewer_a3bda69a7a8e90160d0036e04b93d75b4}{Function\+Segment\+Viewer}} (QWidget $\ast$parent, \mbox{\hyperlink{class_function_sheet}{Function\+Sheet}} $\ast$sheet=0, \mbox{\hyperlink{class_function_panel}{Function\+Panel}} $\ast$panel=0)
\item 
\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$ \mbox{\hyperlink{class_function_segment_viewer_aba7919c0ba361ff753a971e06d386b1b}{get\+Curve}} () const
\item 
int \mbox{\hyperlink{class_function_segment_viewer_ac8efea0f6140b1a4ca1fc11b763f34ef}{get\+R0}} () const
\item 
int \mbox{\hyperlink{class_function_segment_viewer_af04f5da71f9729a82534470418bd125c}{get\+R1}} () const
\item 
int \mbox{\hyperlink{class_function_segment_viewer_aa0ead31d94cb0f35f1998e218b8f7ad2}{get\+Segment\+Index}} () const
\item 
void \mbox{\hyperlink{class_function_segment_viewer_a89215dab19f7cdb0d960a1dc1a24105d}{refresh}} ()
\item 
void \mbox{\hyperlink{class_function_segment_viewer_ad1e4b41b756a64e53c02831e104cfe7d}{on\+Change}} (const \mbox{\hyperlink{class_t_param_change}{TParam\+Change}} \&) override
\item 
void \mbox{\hyperlink{class_function_segment_viewer_acde38ad3abe200547c1126f14f44d1d2}{set\+Xsheet\+Handle}} (\mbox{\hyperlink{class_t_xsheet_handle}{TXsheet\+Handle}} $\ast$xsh\+Handle)
\item 
bool \mbox{\hyperlink{class_function_segment_viewer_a09b61f64297b95a64181c56281ff7845}{any\+Widget\+Has\+Focus}} ()
\item 
bool \mbox{\hyperlink{class_function_segment_viewer_a439377321473f61c9656edb0a68ea0cb}{is\+Expression\+Page\+Active}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_function_segment_viewer_a3bda69a7a8e90160d0036e04b93d75b4}\label{class_function_segment_viewer_a3bda69a7a8e90160d0036e04b93d75b4}} 
\index{FunctionSegmentViewer@{FunctionSegmentViewer}!FunctionSegmentViewer@{FunctionSegmentViewer}}
\index{FunctionSegmentViewer@{FunctionSegmentViewer}!FunctionSegmentViewer@{FunctionSegmentViewer}}
\doxysubsubsection{\texorpdfstring{FunctionSegmentViewer()}{FunctionSegmentViewer()}}
{\footnotesize\ttfamily Function\+Segment\+Viewer\+::\+Function\+Segment\+Viewer (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent,  }\item[{\mbox{\hyperlink{class_function_sheet}{Function\+Sheet}} $\ast$}]{sheet = {\ttfamily 0},  }\item[{\mbox{\hyperlink{class_function_panel}{Function\+Panel}} $\ast$}]{panel = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00879     : QFrame(parent)}
\DoxyCodeLine{00880     , m\_curve(0)}
\DoxyCodeLine{00881     , m\_r0(0)}
\DoxyCodeLine{00882     , m\_r1(0)}
\DoxyCodeLine{00883     , m\_sheet(sheet)}
\DoxyCodeLine{00884     , m\_xshHandle(0)}
\DoxyCodeLine{00885     , m\_panel(panel) \{}
\DoxyCodeLine{00886   setObjectName(\textcolor{stringliteral}{"{}FunctionSegmentViewer"{}});}
\DoxyCodeLine{00887 }
\DoxyCodeLine{00888   m\_pages[0] = \textcolor{keyword}{new} \mbox{\hyperlink{class_function_empty_segment_page}{FunctionEmptySegmentPage}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00889   m\_pages[1] = \textcolor{keyword}{new} \mbox{\hyperlink{class_speed_in_out_segment_page}{SpeedInOutSegmentPage}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00890   m\_pages[2] = \textcolor{keyword}{new} \mbox{\hyperlink{class_ease_in_out_segment_page}{EaseInOutSegmentPage}}(\textcolor{keyword}{false}, \textcolor{keyword}{this});}
\DoxyCodeLine{00891   m\_pages[3] = \textcolor{keyword}{new} \mbox{\hyperlink{class_ease_in_out_segment_page}{EaseInOutSegmentPage}}(\textcolor{keyword}{true}, \textcolor{keyword}{this});}
\DoxyCodeLine{00892   m\_pages[4] = \textcolor{keyword}{new} \mbox{\hyperlink{class_function_empty_segment_page}{FunctionEmptySegmentPage}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00893   m\_pages[5] = \textcolor{keyword}{new} \mbox{\hyperlink{class_function_expression_segment_page}{FunctionExpressionSegmentPage}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00894   m\_pages[6] = \textcolor{keyword}{new} \mbox{\hyperlink{class_file_segment_page}{FileSegmentPage}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00895   m\_pages[7] = \textcolor{keyword}{new} \mbox{\hyperlink{class_function_empty_segment_page}{FunctionEmptySegmentPage}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00896   m\_pages[8] = \textcolor{keyword}{new} \mbox{\hyperlink{class_similar_shape_segment_page}{SimilarShapeSegmentPage}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00897 }
\DoxyCodeLine{00898   m\_typeId[0] = TDoubleKeyframe::Linear;}
\DoxyCodeLine{00899   m\_typeId[1] = TDoubleKeyframe::SpeedInOut;}
\DoxyCodeLine{00900   m\_typeId[2] = TDoubleKeyframe::EaseInOut;}
\DoxyCodeLine{00901   m\_typeId[3] = TDoubleKeyframe::EaseInOutPercentage;}
\DoxyCodeLine{00902   m\_typeId[4] = TDoubleKeyframe::Exponential;}
\DoxyCodeLine{00903   m\_typeId[5] = TDoubleKeyframe::Expression;}
\DoxyCodeLine{00904   m\_typeId[6] = TDoubleKeyframe::File;}
\DoxyCodeLine{00905   m\_typeId[7] = TDoubleKeyframe::Constant;}
\DoxyCodeLine{00906   m\_typeId[8] = TDoubleKeyframe::SimilarShape;}
\DoxyCodeLine{00907 }
\DoxyCodeLine{00908   m\_typeCombo = \textcolor{keyword}{new} QComboBox;}
\DoxyCodeLine{00909   m\_typeCombo-\/>addItem(tr(\textcolor{stringliteral}{"{}Linear"{}}));}
\DoxyCodeLine{00910   m\_typeCombo-\/>addItem(tr(\textcolor{stringliteral}{"{}Speed In / Speed Out"{}}));}
\DoxyCodeLine{00911   m\_typeCombo-\/>addItem(tr(\textcolor{stringliteral}{"{}Ease In / Ease Out"{}}));}
\DoxyCodeLine{00912   m\_typeCombo-\/>addItem(tr(\textcolor{stringliteral}{"{}Ease In / Ease Out \%"{}}));}
\DoxyCodeLine{00913   m\_typeCombo-\/>addItem(tr(\textcolor{stringliteral}{"{}Exponential"{}}));}
\DoxyCodeLine{00914   m\_typeCombo-\/>addItem(tr(\textcolor{stringliteral}{"{}Expression"{}}));}
\DoxyCodeLine{00915   m\_typeCombo-\/>addItem(tr(\textcolor{stringliteral}{"{}File"{}}));}
\DoxyCodeLine{00916   m\_typeCombo-\/>addItem(tr(\textcolor{stringliteral}{"{}Constant"{}}));}
\DoxyCodeLine{00917   m\_typeCombo-\/>addItem(tr(\textcolor{stringliteral}{"{}Similar Shape"{}}));}
\DoxyCodeLine{00918   m\_typeCombo-\/>setCurrentIndex(7);}
\DoxyCodeLine{00919 }
\DoxyCodeLine{00920   \textcolor{comment}{//-\/-\/-\/-\/ common interfaces}}
\DoxyCodeLine{00921   m\_fromFld        = \textcolor{keyword}{new} QLineEdit(\textcolor{keyword}{this});}
\DoxyCodeLine{00922   m\_toFld          = \textcolor{keyword}{new} QLineEdit(\textcolor{keyword}{this});}
\DoxyCodeLine{00923   m\_paramNameLabel = \textcolor{keyword}{new} QLabel(\textcolor{stringliteral}{"{}"{}}, \textcolor{keyword}{this});}
\DoxyCodeLine{00924 }
\DoxyCodeLine{00925   QLabel *typeLabel = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Interpolation:"{}}));}
\DoxyCodeLine{00926   typeLabel-\/>setAlignment(Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00927   m\_stepFld = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_line_edit}{LineEdit}}();}
\DoxyCodeLine{00928 }
\DoxyCodeLine{00929   \textcolor{comment}{// bottom part: stacked widget}}
\DoxyCodeLine{00930   m\_parametersPanel = \textcolor{keyword}{new} QStackedWidget;}
\DoxyCodeLine{00931   m\_parametersPanel-\/>setObjectName(\textcolor{stringliteral}{"{}FunctionParametersPanel"{}});}
\DoxyCodeLine{00932 }
\DoxyCodeLine{00933   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const} \&page : m\_pages) m\_parametersPanel-\/>addWidget(page);}
\DoxyCodeLine{00934   m\_parametersPanel-\/>setCurrentIndex(0);}
\DoxyCodeLine{00935 }
\DoxyCodeLine{00936   \textcolor{comment}{// buttons}}
\DoxyCodeLine{00937   QPushButton *applyButton = \textcolor{keyword}{new} QPushButton(tr(\textcolor{stringliteral}{"{}Apply"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00938   m\_prevCurveButton        = \textcolor{keyword}{new} QPushButton(\textcolor{keyword}{this});}
\DoxyCodeLine{00939   m\_nextCurveButton        = \textcolor{keyword}{new} QPushButton(\textcolor{keyword}{this});}
\DoxyCodeLine{00940   m\_prevLinkButton         = \textcolor{keyword}{new} QPushButton(\textcolor{keyword}{this});}
\DoxyCodeLine{00941   m\_nextLinkButton         = \textcolor{keyword}{new} QPushButton(\textcolor{keyword}{this});}
\DoxyCodeLine{00942 }
\DoxyCodeLine{00943   \textcolor{comment}{//-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00944   QIntValidator *intValidator = \textcolor{keyword}{new} QIntValidator(1, 100, \textcolor{keyword}{this});}
\DoxyCodeLine{00945   m\_stepFld-\/>setValidator(intValidator);}
\DoxyCodeLine{00946 }
\DoxyCodeLine{00947   QIntValidator *validator = \textcolor{keyword}{new} QIntValidator(\textcolor{keyword}{this});}
\DoxyCodeLine{00948   validator-\/>setBottom(1);}
\DoxyCodeLine{00949   m\_fromFld-\/>setValidator(validator);}
\DoxyCodeLine{00950   m\_toFld-\/>setValidator(validator);}
\DoxyCodeLine{00951   m\_paramNameLabel-\/>setTextInteractionFlags(Qt::TextSelectableByMouse);}
\DoxyCodeLine{00952 }
\DoxyCodeLine{00953   m\_stepFld-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{00954 }
\DoxyCodeLine{00955   applyButton-\/>setFocusPolicy(Qt::NoFocus);}
\DoxyCodeLine{00956 }
\DoxyCodeLine{00957   m\_stepFld-\/>setText(\textcolor{stringliteral}{"{}1"{}});}
\DoxyCodeLine{00958 }
\DoxyCodeLine{00959   m\_prevCurveButton-\/>setFixedSize(70, 22);}
\DoxyCodeLine{00960   m\_nextCurveButton-\/>setFixedSize(70, 22);}
\DoxyCodeLine{00961   m\_prevCurveButton-\/>setFocusPolicy(Qt::NoFocus);}
\DoxyCodeLine{00962   m\_nextCurveButton-\/>setFocusPolicy(Qt::NoFocus);}
\DoxyCodeLine{00963   m\_prevCurveButton-\/>setStyleSheet(\textcolor{stringliteral}{"{}padding:0px;"{}});}
\DoxyCodeLine{00964   m\_nextCurveButton-\/>setStyleSheet(\textcolor{stringliteral}{"{}padding:0px;"{}});}
\DoxyCodeLine{00965 }
\DoxyCodeLine{00966   m\_prevLinkButton-\/>setFixedSize(22, 22);}
\DoxyCodeLine{00967   m\_nextLinkButton-\/>setFixedSize(22, 22);}
\DoxyCodeLine{00968   m\_prevLinkButton-\/>setCheckable(\textcolor{keyword}{true});}
\DoxyCodeLine{00969   m\_nextLinkButton-\/>setCheckable(\textcolor{keyword}{true});}
\DoxyCodeLine{00970   m\_prevLinkButton-\/>setFocusPolicy(Qt::NoFocus);}
\DoxyCodeLine{00971   m\_nextLinkButton-\/>setFocusPolicy(Qt::NoFocus);}
\DoxyCodeLine{00972   m\_prevLinkButton-\/>setObjectName(\textcolor{stringliteral}{"{}FunctionSegmentViewerLinkButton"{}});}
\DoxyCodeLine{00973   m\_nextLinkButton-\/>setObjectName(\textcolor{stringliteral}{"{}FunctionSegmentViewerLinkButton"{}});}
\DoxyCodeLine{00974   m\_prevLinkButton-\/>setIconSize(QSize(20, 20));}
\DoxyCodeLine{00975   m\_nextLinkButton-\/>setIconSize(QSize(20, 20));}
\DoxyCodeLine{00976   m\_prevLinkButton-\/>setIcon(createQIcon(\textcolor{stringliteral}{"{}segment\_linked"{}}));}
\DoxyCodeLine{00977   m\_nextLinkButton-\/>setIcon(createQIcon(\textcolor{stringliteral}{"{}segment\_linked"{}}));}
\DoxyCodeLine{00978   m\_nextLinkButton-\/>setToolTip(tr(\textcolor{stringliteral}{"{}Link/Unlink Handles"{}}));}
\DoxyCodeLine{00979   m\_prevLinkButton-\/>setToolTip(tr(\textcolor{stringliteral}{"{}Link/Unlink Handles"{}}));}
\DoxyCodeLine{00980 }
\DoxyCodeLine{00981   \textcolor{comment}{//-\/-\/-\/-\/ layout}}
\DoxyCodeLine{00982 }
\DoxyCodeLine{00983   QVBoxLayout *mainLayout = \textcolor{keyword}{new} QVBoxLayout();}
\DoxyCodeLine{00984   mainLayout-\/>setSpacing(5);}
\DoxyCodeLine{00985   mainLayout-\/>setMargin(5);}
\DoxyCodeLine{00986   \{}
\DoxyCodeLine{00987     m\_topbar                  = \textcolor{keyword}{new} QWidget();}
\DoxyCodeLine{00988     QVBoxLayout *topbarLayout = \textcolor{keyword}{new} QVBoxLayout();}
\DoxyCodeLine{00989     topbarLayout-\/>setSpacing(5);}
\DoxyCodeLine{00990     topbarLayout-\/>setMargin(0);}
\DoxyCodeLine{00991     \{}
\DoxyCodeLine{00992       topbarLayout-\/>addWidget(m\_paramNameLabel);}
\DoxyCodeLine{00993 }
\DoxyCodeLine{00994       QHBoxLayout *upperLay = \textcolor{keyword}{new} QHBoxLayout();}
\DoxyCodeLine{00995       upperLay-\/>setSpacing(3);}
\DoxyCodeLine{00996       upperLay-\/>setMargin(0);}
\DoxyCodeLine{00997       \{}
\DoxyCodeLine{00998         upperLay-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}From"{}}), \textcolor{keyword}{this}), 0);}
\DoxyCodeLine{00999         upperLay-\/>addWidget(m\_fromFld, 1);}
\DoxyCodeLine{01000         upperLay-\/>addSpacing(3);}
\DoxyCodeLine{01001         upperLay-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}To"{}}), \textcolor{keyword}{this}), 0);}
\DoxyCodeLine{01002         upperLay-\/>addWidget(m\_toFld, 1);}
\DoxyCodeLine{01003         upperLay-\/>addSpacing(5);}
\DoxyCodeLine{01004         upperLay-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Step"{}}), \textcolor{keyword}{this}), 0);}
\DoxyCodeLine{01005         upperLay-\/>addWidget(m\_stepFld, 1);}
\DoxyCodeLine{01006       \}}
\DoxyCodeLine{01007       topbarLayout-\/>addLayout(upperLay, 0);}
\DoxyCodeLine{01008 }
\DoxyCodeLine{01009       QHBoxLayout *bottomLay = \textcolor{keyword}{new} QHBoxLayout();}
\DoxyCodeLine{01010       bottomLay-\/>setSpacing(3);}
\DoxyCodeLine{01011       bottomLay-\/>setMargin(0);}
\DoxyCodeLine{01012       \{}
\DoxyCodeLine{01013         bottomLay-\/>addWidget(typeLabel, 0);}
\DoxyCodeLine{01014         bottomLay-\/>addWidget(m\_typeCombo, 1);}
\DoxyCodeLine{01015       \}}
\DoxyCodeLine{01016       topbarLayout-\/>addLayout(bottomLay, 0);}
\DoxyCodeLine{01017     \}}
\DoxyCodeLine{01018     \textcolor{comment}{// end topbar}}
\DoxyCodeLine{01019     m\_topbar-\/>setLayout(topbarLayout);}
\DoxyCodeLine{01020 }
\DoxyCodeLine{01021     mainLayout-\/>addWidget(m\_topbar, 0);}
\DoxyCodeLine{01022     mainLayout-\/>addWidget(m\_parametersPanel, 0);}
\DoxyCodeLine{01023     mainLayout-\/>addStretch(1);}
\DoxyCodeLine{01024 }
\DoxyCodeLine{01025     mainLayout-\/>addWidget(applyButton);}
\DoxyCodeLine{01026 }
\DoxyCodeLine{01027     QHBoxLayout *moveLay = \textcolor{keyword}{new} QHBoxLayout();}
\DoxyCodeLine{01028     moveLay-\/>setMargin(0);}
\DoxyCodeLine{01029     moveLay-\/>setSpacing(0);}
\DoxyCodeLine{01030     \{}
\DoxyCodeLine{01031       moveLay-\/>addWidget(m\_prevCurveButton, 0);}
\DoxyCodeLine{01032       moveLay-\/>addWidget(m\_prevLinkButton, 0);}
\DoxyCodeLine{01033       moveLay-\/>addStretch(1);}
\DoxyCodeLine{01034       moveLay-\/>addWidget(m\_nextLinkButton, 0);}
\DoxyCodeLine{01035       moveLay-\/>addWidget(m\_nextCurveButton, 0);}
\DoxyCodeLine{01036     \}}
\DoxyCodeLine{01037     mainLayout-\/>addLayout(moveLay, 0);}
\DoxyCodeLine{01038   \}}
\DoxyCodeLine{01039   setLayout(mainLayout);}
\DoxyCodeLine{01040 }
\DoxyCodeLine{01041   \textcolor{comment}{//-\/-\/-\/-\/ signal-\/slot connections}}
\DoxyCodeLine{01042   \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{true};}
\DoxyCodeLine{01043   ret      = ret \&\& connect(m\_typeCombo, SIGNAL(currentIndexChanged(\textcolor{keywordtype}{int})),}
\DoxyCodeLine{01044                        m\_parametersPanel, SLOT(setCurrentIndex(\textcolor{keywordtype}{int})));}
\DoxyCodeLine{01045   ret      = ret \&\& connect(m\_typeCombo, SIGNAL(activated(\textcolor{keywordtype}{int})), \textcolor{keyword}{this},}
\DoxyCodeLine{01046                        SLOT(onSegmentTypeChanged(\textcolor{keywordtype}{int})));}
\DoxyCodeLine{01047   ret      = ret \&\& connect(applyButton, SIGNAL(clicked()), \textcolor{keyword}{this},}
\DoxyCodeLine{01048                        SLOT(onApplyButtonPressed()));}
\DoxyCodeLine{01049   ret      = ret \&\& connect(m\_prevCurveButton, SIGNAL(clicked()), \textcolor{keyword}{this},}
\DoxyCodeLine{01050                        SLOT(onPrevCurveButtonPressed()));}
\DoxyCodeLine{01051   ret      = ret \&\& connect(m\_nextCurveButton, SIGNAL(clicked()), \textcolor{keyword}{this},}
\DoxyCodeLine{01052                        SLOT(onNextCurveButtonPressed()));}
\DoxyCodeLine{01053   ret      = ret \&\& connect(m\_prevLinkButton, SIGNAL(clicked()), \textcolor{keyword}{this},}
\DoxyCodeLine{01054                        SLOT(onPrevLinkButtonPressed()));}
\DoxyCodeLine{01055   ret      = ret \&\& connect(m\_nextLinkButton, SIGNAL(clicked()), \textcolor{keyword}{this},}
\DoxyCodeLine{01056                        SLOT(onNextLinkButtonPressed()));}
\DoxyCodeLine{01057   assert(ret);}
\DoxyCodeLine{01058 }
\DoxyCodeLine{01059   m\_sheet = sheet;}
\DoxyCodeLine{01060   refresh();}
\DoxyCodeLine{01061 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_segment_viewer_a7808ef2d4d5900e35a54a88fd2607d21}\label{class_function_segment_viewer_a7808ef2d4d5900e35a54a88fd2607d21}} 
\index{FunctionSegmentViewer@{FunctionSegmentViewer}!````~FunctionSegmentViewer@{$\sim$FunctionSegmentViewer}}
\index{````~FunctionSegmentViewer@{$\sim$FunctionSegmentViewer}!FunctionSegmentViewer@{FunctionSegmentViewer}}
\doxysubsubsection{\texorpdfstring{$\sim$FunctionSegmentViewer()}{~FunctionSegmentViewer()}}
{\footnotesize\ttfamily Function\+Segment\+Viewer\+::$\sim$\+Function\+Segment\+Viewer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01063                                               \{}
\DoxyCodeLine{01064   \textcolor{keywordflow}{if} (m\_curve) m\_curve-\/>release();}
\DoxyCodeLine{01065   m\_curve = 0;}
\DoxyCodeLine{01066 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_function_segment_viewer_a09b61f64297b95a64181c56281ff7845}\label{class_function_segment_viewer_a09b61f64297b95a64181c56281ff7845}} 
\index{FunctionSegmentViewer@{FunctionSegmentViewer}!anyWidgetHasFocus@{anyWidgetHasFocus}}
\index{anyWidgetHasFocus@{anyWidgetHasFocus}!FunctionSegmentViewer@{FunctionSegmentViewer}}
\doxysubsubsection{\texorpdfstring{anyWidgetHasFocus()}{anyWidgetHasFocus()}}
{\footnotesize\ttfamily bool Function\+Segment\+Viewer\+::any\+Widget\+Has\+Focus (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01525                                               \{}
\DoxyCodeLine{01526   \textcolor{keywordflow}{return} m\_topbar-\/>hasFocus() || m\_fromFld-\/>hasFocus() || m\_toFld-\/>hasFocus() ||}
\DoxyCodeLine{01527          m\_typeCombo-\/>hasFocus() || m\_stepFld-\/>hasFocus() ||}
\DoxyCodeLine{01528          m\_prevCurveButton-\/>hasFocus() || m\_nextCurveButton-\/>hasFocus() ||}
\DoxyCodeLine{01529          m\_prevLinkButton-\/>hasFocus() || m\_nextLinkButton-\/>hasFocus();}
\DoxyCodeLine{01530 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_segment_viewer_aba7919c0ba361ff753a971e06d386b1b}\label{class_function_segment_viewer_aba7919c0ba361ff753a971e06d386b1b}} 
\index{FunctionSegmentViewer@{FunctionSegmentViewer}!getCurve@{getCurve}}
\index{getCurve@{getCurve}!FunctionSegmentViewer@{FunctionSegmentViewer}}
\doxysubsubsection{\texorpdfstring{getCurve()}{getCurve()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$ Function\+Segment\+Viewer\+::get\+Curve (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00073 \{ \textcolor{keywordflow}{return} m\_curve; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_segment_viewer_ac8efea0f6140b1a4ca1fc11b763f34ef}\label{class_function_segment_viewer_ac8efea0f6140b1a4ca1fc11b763f34ef}} 
\index{FunctionSegmentViewer@{FunctionSegmentViewer}!getR0@{getR0}}
\index{getR0@{getR0}!FunctionSegmentViewer@{FunctionSegmentViewer}}
\doxysubsubsection{\texorpdfstring{getR0()}{getR0()}}
{\footnotesize\ttfamily int Function\+Segment\+Viewer\+::get\+R0 (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00074 \{ \textcolor{keywordflow}{return} m\_r0; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_segment_viewer_af04f5da71f9729a82534470418bd125c}\label{class_function_segment_viewer_af04f5da71f9729a82534470418bd125c}} 
\index{FunctionSegmentViewer@{FunctionSegmentViewer}!getR1@{getR1}}
\index{getR1@{getR1}!FunctionSegmentViewer@{FunctionSegmentViewer}}
\doxysubsubsection{\texorpdfstring{getR1()}{getR1()}}
{\footnotesize\ttfamily int Function\+Segment\+Viewer\+::get\+R1 (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00075 \{ \textcolor{keywordflow}{return} m\_r1; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_segment_viewer_aa0ead31d94cb0f35f1998e218b8f7ad2}\label{class_function_segment_viewer_aa0ead31d94cb0f35f1998e218b8f7ad2}} 
\index{FunctionSegmentViewer@{FunctionSegmentViewer}!getSegmentIndex@{getSegmentIndex}}
\index{getSegmentIndex@{getSegmentIndex}!FunctionSegmentViewer@{FunctionSegmentViewer}}
\doxysubsubsection{\texorpdfstring{getSegmentIndex()}{getSegmentIndex()}}
{\footnotesize\ttfamily int Function\+Segment\+Viewer\+::get\+Segment\+Index (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00076 \{ \textcolor{keywordflow}{return} m\_segmentIndex; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_segment_viewer_a439377321473f61c9656edb0a68ea0cb}\label{class_function_segment_viewer_a439377321473f61c9656edb0a68ea0cb}} 
\index{FunctionSegmentViewer@{FunctionSegmentViewer}!isExpressionPageActive@{isExpressionPageActive}}
\index{isExpressionPageActive@{isExpressionPageActive}!FunctionSegmentViewer@{FunctionSegmentViewer}}
\doxysubsubsection{\texorpdfstring{isExpressionPageActive()}{isExpressionPageActive()}}
{\footnotesize\ttfamily bool Function\+Segment\+Viewer\+::is\+Expression\+Page\+Active (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

in order to avoid \mbox{\hyperlink{class_function_viewer}{Function\+Viewer}} to get focus while editing the expression 
\begin{DoxyCode}{0}
\DoxyCodeLine{01534                                                    \{}
\DoxyCodeLine{01535   \textcolor{keywordflow}{return} (m\_typeCombo-\/>currentIndex() == 5);}
\DoxyCodeLine{01536 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_segment_viewer_ad1e4b41b756a64e53c02831e104cfe7d}\label{class_function_segment_viewer_ad1e4b41b756a64e53c02831e104cfe7d}} 
\index{FunctionSegmentViewer@{FunctionSegmentViewer}!onChange@{onChange}}
\index{onChange@{onChange}!FunctionSegmentViewer@{FunctionSegmentViewer}}
\doxysubsubsection{\texorpdfstring{onChange()}{onChange()}}
{\footnotesize\ttfamily void Function\+Segment\+Viewer\+::on\+Change (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_param_change}{TParam\+Change}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_param_observer}{TParam\+Observer}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00081 \{ refresh(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_segment_viewer_a89215dab19f7cdb0d960a1dc1a24105d}\label{class_function_segment_viewer_a89215dab19f7cdb0d960a1dc1a24105d}} 
\index{FunctionSegmentViewer@{FunctionSegmentViewer}!refresh@{refresh}}
\index{refresh@{refresh}!FunctionSegmentViewer@{FunctionSegmentViewer}}
\doxysubsubsection{\texorpdfstring{refresh()}{refresh()}}
{\footnotesize\ttfamily void Function\+Segment\+Viewer\+::refresh (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01122                                     \{}
\DoxyCodeLine{01123   \textcolor{keywordflow}{if} (m\_sheet-\/>isVisible()) \{}
\DoxyCodeLine{01124     m\_paramNameLabel-\/>setText(m\_sheet-\/>\mbox{\hyperlink{class_function_sheet_a9910de56f65032dcfb97afa61317ebcd}{getSelectedParamName}}());}
\DoxyCodeLine{01125     \textcolor{keywordflow}{if} (m\_sheet-\/>\mbox{\hyperlink{class_function_sheet_a9910de56f65032dcfb97afa61317ebcd}{getSelectedParamName}}().isEmpty()) \{}
\DoxyCodeLine{01126       m\_curve        = 0;}
\DoxyCodeLine{01127       m\_segmentIndex = -\/1;}
\DoxyCodeLine{01128     \}}
\DoxyCodeLine{01129   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01130     m\_paramNameLabel-\/>setText(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01131   \}}
\DoxyCodeLine{01132 }
\DoxyCodeLine{01133   \textcolor{keywordflow}{if} (m\_curve \&\&}
\DoxyCodeLine{01134       (m\_segmentIndex < 0 || m\_segmentIndex + 1 >= m\_curve-\/>getKeyframeCount()))}
\DoxyCodeLine{01135     m\_segmentIndex = -\/1;}
\DoxyCodeLine{01136 }
\DoxyCodeLine{01137   m\_prevCurveButton-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{01138   m\_prevLinkButton-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{01139   m\_prevCurveButton-\/>setText(\textcolor{stringliteral}{"{} -\/-\/-\/ "{}});}
\DoxyCodeLine{01140   m\_prevLinkButton-\/>setChecked(\textcolor{keyword}{false});}
\DoxyCodeLine{01141   m\_nextCurveButton-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{01142   m\_nextLinkButton-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{01143   m\_nextCurveButton-\/>setText(\textcolor{stringliteral}{"{} -\/-\/-\/ "{}});}
\DoxyCodeLine{01144   m\_nextLinkButton-\/>setChecked(\textcolor{keyword}{false});}
\DoxyCodeLine{01145 }
\DoxyCodeLine{01146   \textcolor{comment}{// if some segment is selected}}
\DoxyCodeLine{01147   \textcolor{keywordflow}{if} (m\_curve \&\& m\_segmentIndex >= 0) \{}
\DoxyCodeLine{01148     m\_topbar-\/>show();}
\DoxyCodeLine{01149     \textcolor{comment}{// m\_parametersPanel-\/>show();}}
\DoxyCodeLine{01150     m\_r0 = m\_curve-\/>\mbox{\hyperlink{class_t_double_param_af08442b9fd968fddada028a6f07983d5}{keyframeIndexToFrame}}(m\_segmentIndex);}
\DoxyCodeLine{01151     m\_r1 = m\_curve-\/>\mbox{\hyperlink{class_t_double_param_af08442b9fd968fddada028a6f07983d5}{keyframeIndexToFrame}}(m\_segmentIndex + 1);}
\DoxyCodeLine{01152     m\_fromFld-\/>setText(QString::number(m\_r0 + 1));}
\DoxyCodeLine{01153     m\_toFld-\/>setText(QString::number(m\_r1 + 1));}
\DoxyCodeLine{01154 }
\DoxyCodeLine{01155     \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} kf = m\_curve-\/>getKeyframeAt(m\_r0);}
\DoxyCodeLine{01156     \textcolor{keywordtype}{int} pageIndex      = typeToIndex(kf.m\_type);}
\DoxyCodeLine{01157     m\_typeCombo-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01158     m\_typeCombo-\/>setCurrentIndex(pageIndex);}
\DoxyCodeLine{01159     \textcolor{keywordflow}{if} (0 <= pageIndex \&\& pageIndex < m\_pages.size()) \{}
\DoxyCodeLine{01160       m\_parametersPanel-\/>setCurrentIndex(pageIndex);}
\DoxyCodeLine{01161       m\_pages[pageIndex]-\/>refresh();}
\DoxyCodeLine{01162     \}}
\DoxyCodeLine{01163     m\_stepFld-\/>setText(QString::number(kf.m\_step));}
\DoxyCodeLine{01164 }
\DoxyCodeLine{01165     \textcolor{comment}{/*-\/-\/-\/ 前後のキーフレームの表示を更新 -\/-\/-\/*/}}
\DoxyCodeLine{01166     \textcolor{comment}{// Prev}}
\DoxyCodeLine{01167     \textcolor{keywordflow}{if} (m\_segmentIndex != 0) \{}
\DoxyCodeLine{01168       \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} prevKf = m\_curve-\/>getKeyframe(m\_segmentIndex -\/ 1);}
\DoxyCodeLine{01169       m\_prevCurveButton-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01170       m\_prevLinkButton-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01171       m\_prevCurveButton-\/>setText(tr(\textcolor{stringliteral}{"{}< "{}}) + typeToString(prevKf.m\_type));}
\DoxyCodeLine{01172       m\_prevLinkButton-\/>setChecked(kf.m\_linkedHandles);}
\DoxyCodeLine{01173     \}}
\DoxyCodeLine{01174     \textcolor{comment}{// Next}}
\DoxyCodeLine{01175     \textcolor{keywordflow}{if} (m\_curve-\/>getKeyframeCount() -\/ 2 != m\_segmentIndex) \{}
\DoxyCodeLine{01176       \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} nextKf = m\_curve-\/>getKeyframe(m\_segmentIndex + 1);}
\DoxyCodeLine{01177       m\_nextCurveButton-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01178       m\_nextLinkButton-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01179       m\_nextCurveButton-\/>setText(typeToString(nextKf.m\_type) + tr(\textcolor{stringliteral}{"{} >"{}}));}
\DoxyCodeLine{01180       m\_nextLinkButton-\/>setChecked(nextKf.m\_linkedHandles);}
\DoxyCodeLine{01181     \}}
\DoxyCodeLine{01182 }
\DoxyCodeLine{01183   \}}
\DoxyCodeLine{01184   \textcolor{comment}{/* -\/-\/-\/}}
\DoxyCodeLine{01185 \textcolor{comment}{Segmentが選ばれていない場合}}
\DoxyCodeLine{01186 \textcolor{comment}{既にキーフレームが有る場合は、選択範囲上下どちらかと最近傍のキーフレームでSegmentを作る}}
\DoxyCodeLine{01187 \textcolor{comment}{キーフレームが無い場合は、選択範囲を入力}}
\DoxyCodeLine{01188 \textcolor{comment}{ただし選択範囲が１フレームのときは、そのフレームから１５フレームの範囲で入力}}
\DoxyCodeLine{01189 \textcolor{comment}{-\/-\/-\/*/}}
\DoxyCodeLine{01190   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01191     m\_stepFld-\/>setText(\textcolor{stringliteral}{"{}1"{}});}
\DoxyCodeLine{01192 }
\DoxyCodeLine{01193     m\_parametersPanel-\/>setCurrentIndex(0);}
\DoxyCodeLine{01194 }
\DoxyCodeLine{01195     m\_typeCombo-\/>setCurrentIndex(7);}
\DoxyCodeLine{01196 }
\DoxyCodeLine{01197     m\_r0 = m\_r1 = -\/1;}
\DoxyCodeLine{01198 }
\DoxyCodeLine{01199     QRect selectedCells = m\_sheet-\/>getSelectedCells();}
\DoxyCodeLine{01200     \textcolor{comment}{/*-\/-\/-\/ 選択範囲が空のとき、もしくはカーブが選ばれていないとき -\/-\/-\/*/}}
\DoxyCodeLine{01201     \textcolor{keywordflow}{if} (selectedCells.isEmpty() || !m\_curve) \{}
\DoxyCodeLine{01202       m\_typeCombo-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{01203       m\_fromFld-\/>setText(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01204       m\_toFld-\/>setText(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01205     \}}
\DoxyCodeLine{01206     \textcolor{comment}{/*-\/-\/-\/ 何かカーブが選択されている -\/-\/-\/*/}}
\DoxyCodeLine{01207     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01208       m\_typeCombo-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01209       \textcolor{keywordtype}{int} s0 = selectedCells.top();}
\DoxyCodeLine{01210       \textcolor{keywordtype}{int} s1 = selectedCells.bottom();}
\DoxyCodeLine{01211 }
\DoxyCodeLine{01212       \textcolor{comment}{/*-\/-\/-\/ セグメントの上側が選択されているとき -\/-\/-\/*/}}
\DoxyCodeLine{01213       \textcolor{keywordtype}{int} next = m\_curve-\/>\mbox{\hyperlink{class_t_double_param_a28b99ec860d56fd1b47f89f08ca0a3ca}{getNextKeyframe}}(s0);}
\DoxyCodeLine{01214       \textcolor{keywordflow}{if} (next >= 0) \{}
\DoxyCodeLine{01215         m\_fromFld-\/>setText(QString::number(s0 + 1));}
\DoxyCodeLine{01216         m\_toFld-\/>setText(}
\DoxyCodeLine{01217             QString::number(m\_curve-\/>getKeyframe(next).m\_frame + 1));}
\DoxyCodeLine{01218         \textcolor{comment}{//*-\/-\/-\/ 前後のキーフレームの表示を更新 -\/-\/-\/*/}}
\DoxyCodeLine{01219         \textcolor{keywordflow}{if} (m\_curve-\/>getKeyframeCount() >= 2) \{}
\DoxyCodeLine{01220           \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} nextKf = m\_curve-\/>getKeyframe(next);}
\DoxyCodeLine{01221           m\_nextCurveButton-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01222           m\_nextLinkButton-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01223           m\_nextCurveButton-\/>setText(typeToString(nextKf.m\_type) + tr(\textcolor{stringliteral}{"{} >"{}}));}
\DoxyCodeLine{01224           m\_nextLinkButton-\/>setChecked(nextKf.m\_linkedHandles);}
\DoxyCodeLine{01225         \}}
\DoxyCodeLine{01226       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01227         \textcolor{comment}{/*-\/-\/-\/ セグメントの下側が選択されているとき -\/-\/-\/*/}}
\DoxyCodeLine{01228         \textcolor{keywordtype}{int} prev = m\_curve-\/>\mbox{\hyperlink{class_t_double_param_a765abd97386a7e4e3a413255ba494e19}{getPrevKeyframe}}(s0);}
\DoxyCodeLine{01229         \textcolor{keywordflow}{if} (prev >= 0) \{}
\DoxyCodeLine{01230           m\_fromFld-\/>setText(}
\DoxyCodeLine{01231               QString::number(m\_curve-\/>getKeyframe(prev).m\_frame + 1));}
\DoxyCodeLine{01232           m\_toFld-\/>setText(QString::number(s1 + 1));}
\DoxyCodeLine{01233 }
\DoxyCodeLine{01234           \textcolor{comment}{//*-\/-\/-\/ 前後のキーフレームの表示を更新 -\/-\/-\/*/}}
\DoxyCodeLine{01235           \textcolor{keywordflow}{if} (prev > 0) \{}
\DoxyCodeLine{01236             \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} kf     = m\_curve-\/>getKeyframe(prev);}
\DoxyCodeLine{01237             \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} prevKf = m\_curve-\/>getKeyframe(prev -\/ 1);}
\DoxyCodeLine{01238             m\_prevCurveButton-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01239             m\_prevLinkButton-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01240             m\_prevCurveButton-\/>setText(tr(\textcolor{stringliteral}{"{}< "{}}) + typeToString(prevKf.m\_type));}
\DoxyCodeLine{01241             m\_prevLinkButton-\/>setChecked(kf.m\_linkedHandles);}
\DoxyCodeLine{01242           \}}
\DoxyCodeLine{01243         \}}
\DoxyCodeLine{01244         \textcolor{comment}{/*-\/-\/-\/ キーフレームが１個もない場合 -\/-\/-\/*/}}
\DoxyCodeLine{01245         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01246           \textcolor{keywordflow}{if} (s0 == s1) \{}
\DoxyCodeLine{01247             \textcolor{keywordtype}{int} endFrame;}
\DoxyCodeLine{01248             \textcolor{keywordflow}{if} (m\_xshHandle) \{}
\DoxyCodeLine{01249               endFrame = m\_xshHandle-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_a12a62da7dc04395088112e492d73374f}{getFrameCount}}();}
\DoxyCodeLine{01250               \textcolor{comment}{/*-\/-\/-\/}}
\DoxyCodeLine{01251 \textcolor{comment}{               * xsheetに何もLevelがないとき,又は選択フレームがXsheetをはみだしているとき}}
\DoxyCodeLine{01252 \textcolor{comment}{               * -\/-\/-\/*/}}
\DoxyCodeLine{01253               \textcolor{keywordflow}{if} (endFrame == 0 || s0 + 1 >= endFrame) endFrame = s0 + 16;}
\DoxyCodeLine{01254             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01255               endFrame = s0 + 16;}
\DoxyCodeLine{01256             \}}
\DoxyCodeLine{01257             m\_fromFld-\/>setText(QString::number(s0 + 1));}
\DoxyCodeLine{01258             m\_toFld-\/>setText(QString::number(endFrame));}
\DoxyCodeLine{01259 }
\DoxyCodeLine{01260           \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01261             m\_fromFld-\/>setText(QString::number(s0 + 1));}
\DoxyCodeLine{01262             m\_toFld-\/>setText(QString::number(s1 + 1));}
\DoxyCodeLine{01263           \}}
\DoxyCodeLine{01264         \}}
\DoxyCodeLine{01265       \}}
\DoxyCodeLine{01266     \}}
\DoxyCodeLine{01267   \}}
\DoxyCodeLine{01268 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_segment_viewer_a1d3c3741e368ae84f55fce580c176b91}\label{class_function_segment_viewer_a1d3c3741e368ae84f55fce580c176b91}} 
\index{FunctionSegmentViewer@{FunctionSegmentViewer}!setSegment@{setSegment}}
\index{setSegment@{setSegment}!FunctionSegmentViewer@{FunctionSegmentViewer}}
\doxysubsubsection{\texorpdfstring{setSegment}{setSegment}}
{\footnotesize\ttfamily void Function\+Segment\+Viewer\+::set\+Segment (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$}]{curve,  }\item[{int}]{segment\+Index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01068                                                                             \{}
\DoxyCodeLine{01069   \textcolor{keywordflow}{if} (curve != m\_curve) \{}
\DoxyCodeLine{01070     \textcolor{keywordflow}{if} (m\_curve) \{}
\DoxyCodeLine{01071       m\_curve-\/>\mbox{\hyperlink{class_t_double_param_ae5dfcce3e91e816034e982ff2a9454c0}{removeObserver}}(\textcolor{keyword}{this});}
\DoxyCodeLine{01072       m\_curve-\/>release();}
\DoxyCodeLine{01073     \}}
\DoxyCodeLine{01074     m\_curve = curve;}
\DoxyCodeLine{01075     \textcolor{keywordflow}{if} (m\_curve) \{}
\DoxyCodeLine{01076       m\_curve-\/>addRef();}
\DoxyCodeLine{01077       m\_curve-\/>\mbox{\hyperlink{class_t_double_param_a477a2db0757b41f75322450bd00300f2}{addObserver}}(\textcolor{keyword}{this});}
\DoxyCodeLine{01078     \}}
\DoxyCodeLine{01079   \}}
\DoxyCodeLine{01080   m\_segmentIndex = segmentIndex;}
\DoxyCodeLine{01081 }
\DoxyCodeLine{01082   refresh();}
\DoxyCodeLine{01083 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_segment_viewer_ab239758f5ef10a3571dee6c92ecf418b}\label{class_function_segment_viewer_ab239758f5ef10a3571dee6c92ecf418b}} 
\index{FunctionSegmentViewer@{FunctionSegmentViewer}!setSegmentByFrame@{setSegmentByFrame}}
\index{setSegmentByFrame@{setSegmentByFrame}!FunctionSegmentViewer@{FunctionSegmentViewer}}
\doxysubsubsection{\texorpdfstring{setSegmentByFrame}{setSegmentByFrame}}
{\footnotesize\ttfamily void Function\+Segment\+Viewer\+::set\+Segment\+By\+Frame (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$}]{curve,  }\item[{int}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01085                                                                             \{}
\DoxyCodeLine{01086   \textcolor{keywordtype}{bool} curveSwitched = \textcolor{keyword}{false};}
\DoxyCodeLine{01087   \textcolor{keywordflow}{if} (curve != m\_curve) \{}
\DoxyCodeLine{01088     curveSwitched = \textcolor{keyword}{true};}
\DoxyCodeLine{01089     \textcolor{keywordflow}{if} (m\_curve) \{}
\DoxyCodeLine{01090       m\_curve-\/>\mbox{\hyperlink{class_t_double_param_ae5dfcce3e91e816034e982ff2a9454c0}{removeObserver}}(\textcolor{keyword}{this});}
\DoxyCodeLine{01091       m\_curve-\/>release();}
\DoxyCodeLine{01092     \}}
\DoxyCodeLine{01093     m\_curve = curve;}
\DoxyCodeLine{01094     \textcolor{keywordflow}{if} (m\_curve) \{}
\DoxyCodeLine{01095       m\_curve-\/>addRef();}
\DoxyCodeLine{01096       m\_curve-\/>\mbox{\hyperlink{class_t_double_param_a477a2db0757b41f75322450bd00300f2}{addObserver}}(\textcolor{keyword}{this});}
\DoxyCodeLine{01097     \}}
\DoxyCodeLine{01098   \}}
\DoxyCodeLine{01099   \textcolor{keywordtype}{bool} segmentSwitched = \textcolor{keyword}{false};}
\DoxyCodeLine{01100   \textcolor{keywordflow}{if} (m\_curve \&\& (curveSwitched || frame < m\_r0 || frame > m\_r1)) \{}
\DoxyCodeLine{01101     \textcolor{keywordtype}{int} segmentIndex = -\/1;}
\DoxyCodeLine{01102     \textcolor{keywordflow}{if} (m\_curve-\/>\mbox{\hyperlink{class_t_double_param_a2be2db8a6849e4619940ff37a0948574}{isKeyframe}}(frame)) \{}
\DoxyCodeLine{01103       \textcolor{keywordtype}{int} k1 = m\_curve-\/>\mbox{\hyperlink{class_t_double_param_a28b99ec860d56fd1b47f89f08ca0a3ca}{getNextKeyframe}}(frame);}
\DoxyCodeLine{01104       \textcolor{keywordflow}{if} (k1 >= 1)}
\DoxyCodeLine{01105         segmentIndex = k1 -\/ 1;}
\DoxyCodeLine{01106       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01107         \textcolor{keywordtype}{int} k0 = m\_curve-\/>\mbox{\hyperlink{class_t_double_param_a765abd97386a7e4e3a413255ba494e19}{getPrevKeyframe}}(frame);}
\DoxyCodeLine{01108         \textcolor{keywordflow}{if} (k0 >= 0) segmentIndex = k0;}
\DoxyCodeLine{01109       \}}
\DoxyCodeLine{01110     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01111       segmentIndex = m\_curve-\/>\mbox{\hyperlink{class_t_double_param_a765abd97386a7e4e3a413255ba494e19}{getPrevKeyframe}}(frame);}
\DoxyCodeLine{01112       \textcolor{keywordflow}{if} (m\_curve-\/>\mbox{\hyperlink{class_t_double_param_a28b99ec860d56fd1b47f89f08ca0a3ca}{getNextKeyframe}}(frame) < 0) segmentIndex = -\/1;}
\DoxyCodeLine{01113     \}}
\DoxyCodeLine{01114     \textcolor{keywordflow}{if} (m\_segmentIndex != segmentIndex) \{}
\DoxyCodeLine{01115       m\_segmentIndex  = segmentIndex;}
\DoxyCodeLine{01116       segmentSwitched = \textcolor{keyword}{true};}
\DoxyCodeLine{01117     \}}
\DoxyCodeLine{01118   \}}
\DoxyCodeLine{01119   \textcolor{keywordflow}{if} (curveSwitched || segmentSwitched) refresh();}
\DoxyCodeLine{01120 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_function_segment_viewer_acde38ad3abe200547c1126f14f44d1d2}\label{class_function_segment_viewer_acde38ad3abe200547c1126f14f44d1d2}} 
\index{FunctionSegmentViewer@{FunctionSegmentViewer}!setXsheetHandle@{setXsheetHandle}}
\index{setXsheetHandle@{setXsheetHandle}!FunctionSegmentViewer@{FunctionSegmentViewer}}
\doxysubsubsection{\texorpdfstring{setXsheetHandle()}{setXsheetHandle()}}
{\footnotesize\ttfamily void Function\+Segment\+Viewer\+::set\+Xsheet\+Handle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsheet_handle}{TXsheet\+Handle}} $\ast$}]{xsh\+Handle }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00083 \{ m\_xshHandle = xshHandle; \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonzqt/functionsegmentviewer.\+h\item 
E\+:/opentoonz/toonz/sources/toonzqt/functionsegmentviewer.\+cpp\end{DoxyCompactItemize}
