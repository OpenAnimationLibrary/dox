\hypertarget{class_plastic_skeleton}{}\doxysection{Plastic\+Skeleton Class Reference}
\label{class_plastic_skeleton}\index{PlasticSkeleton@{PlasticSkeleton}}
Inheritance diagram for Plastic\+Skeleton\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=0.977312cm]{class_plastic_skeleton}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_plastic_skeleton_1_1_imp}{Imp}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
typedef \mbox{\hyperlink{classtcg_1_1_mesh}{tcg\+::\+Mesh}}$<$ \mbox{\hyperlink{struct_plastic_skeleton_vertex}{Plastic\+Skeleton\+Vertex}}, \mbox{\hyperlink{classtcg_1_1_edge}{tcg\+::\+Edge}}, \mbox{\hyperlink{classtcg_1_1_face_n}{tcg\+::\+FaceN}}$<$ 3 $>$ $>$ \mbox{\hyperlink{class_plastic_skeleton_a1bcba5f76ba561d5b61077a756801333}{mesh\+\_\+type}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_plastic_skeleton_a994d0cb9056eb32486195c21b22ccec7}{Plastic\+Skeleton}} (const \mbox{\hyperlink{class_plastic_skeleton}{Plastic\+Skeleton}} \&other)
\item 
\mbox{\hyperlink{class_plastic_skeleton}{Plastic\+Skeleton}} \& \mbox{\hyperlink{class_plastic_skeleton_ad5f1a3aad78112a215b775dd64f7e089}{operator=}} (const \mbox{\hyperlink{class_plastic_skeleton}{Plastic\+Skeleton}} \&other)
\item 
int \mbox{\hyperlink{class_plastic_skeleton_a4d2403155b6503c99725fd3b2d0f2270}{parent\+Vertex}} (int v)
\item 
void \mbox{\hyperlink{class_plastic_skeleton_aa4856317cf4a0770088a4a1fbb91548d}{move\+Vertex}} (int v, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos)
\item 
int \mbox{\hyperlink{class_plastic_skeleton_a9e1a4e0d26862e6080726ad932d965fd}{add\+Vertex}} (const \mbox{\hyperlink{struct_plastic_skeleton_vertex}{Plastic\+Skeleton\+Vertex}} \&vx, int parent)
\begin{DoxyCompactList}\small\item\em associated deformers \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_plastic_skeleton_ae1469a529f65a19ced4d87b41fed8f4e}{insert\+Vertex}} (const \mbox{\hyperlink{struct_plastic_skeleton_vertex}{Plastic\+Skeleton\+Vertex}} \&vx, int e)
\item 
int \mbox{\hyperlink{class_plastic_skeleton_a1fa9b3f9e158253bdf98877d33c27d1b}{insert\+Vertex}} (const \mbox{\hyperlink{struct_plastic_skeleton_vertex}{Plastic\+Skeleton\+Vertex}} \&vx, int parent, const std\+::vector$<$ int $>$ \&children)
\begin{DoxyCompactList}\small\item\em it is useful as inverse of vertex removal. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_plastic_skeleton_a6a05e72469d27d527df1482b17bf6ada}{remove\+Vertex}} (int v)
\begin{DoxyCompactList}\small\item\em Removes a vertex, reattaching all its children to parent. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_plastic_skeleton_a575e60d32f34a2aca7c9cb7d982fe10e}{clear}} ()
\item 
void \mbox{\hyperlink{class_plastic_skeleton_a4ca3612b18a144f26e2220d007a2d592}{squeeze}} ()
\item 
bool \mbox{\hyperlink{class_plastic_skeleton_ab7fb5dec7081a16b1703905c85edb837}{set\+Vertex\+Name}} (int v, const QString \&name)
\item 
void \mbox{\hyperlink{class_plastic_skeleton_a3f0de22cc7e910ec42928b1a6c19d46e}{save\+Data}} (\mbox{\hyperlink{class_t_o_stream}{TOStream}} \&os) override
\item 
void \mbox{\hyperlink{class_plastic_skeleton_a778c3258f796a5e187c2aee1636ff5d1}{load\+Data}} (\mbox{\hyperlink{class_t_i_stream}{TIStream}} \&is) override
\item 
int \mbox{\hyperlink{class_plastic_skeleton_aa9c5613f88aa8a524c3cf1dda0f0b663}{closest\+Vertex}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, double $\ast$distance=0) const
\item 
int \mbox{\hyperlink{class_plastic_skeleton_af540dfa0de4ec19de7481341a77b924f}{closest\+Edge}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, double $\ast$distance=0) const
\item 
std\+::vector$<$ \mbox{\hyperlink{struct_plastic_handle}{Plastic\+Handle}} $>$ \mbox{\hyperlink{class_plastic_skeleton_a734847719ff8daf17acde8ff9ea5d0dc}{vertices\+To\+Handles}} () const
\item 
\mbox{\hyperlink{class_plastic_skeleton_ac14afb723bbb0141a6ee2c68758d4963}{Plastic\+Skeleton}} (\mbox{\hyperlink{class_plastic_skeleton}{Plastic\+Skeleton}} \&\&other)
\item 
\mbox{\hyperlink{class_plastic_skeleton}{Plastic\+Skeleton}} \& \mbox{\hyperlink{class_plastic_skeleton_a9a198b4c7e2ccf0220fe06462325c211}{operator=}} (\mbox{\hyperlink{class_plastic_skeleton}{Plastic\+Skeleton}} \&\&other)
\end{DoxyCompactItemize}
\doxysubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_plastic_skeleton_ada03ae5bb515da944d151c14dec85fa9}{Plastic\+Skeleton\+Deformation}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{class_plastic_skeleton_a1bcba5f76ba561d5b61077a756801333}\label{class_plastic_skeleton_a1bcba5f76ba561d5b61077a756801333}} 
\index{PlasticSkeleton@{PlasticSkeleton}!mesh\_type@{mesh\_type}}
\index{mesh\_type@{mesh\_type}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{mesh\_type}{mesh\_type}}
{\footnotesize\ttfamily typedef \mbox{\hyperlink{classtcg_1_1_mesh}{tcg\+::\+Mesh}}$<$\mbox{\hyperlink{struct_plastic_skeleton_vertex}{Plastic\+Skeleton\+Vertex}}, \mbox{\hyperlink{classtcg_1_1_edge}{tcg\+::\+Edge}}, \mbox{\hyperlink{classtcg_1_1_face_n}{tcg\+::\+FaceN}}$<$3$>$ $>$ \mbox{\hyperlink{classtcg_1_1_mesh}{Plastic\+Skeleton\+::mesh\+\_\+type}}}



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_plastic_skeleton_a85ad7b1fd699c609712e96f72f5f9ea8}\label{class_plastic_skeleton_a85ad7b1fd699c609712e96f72f5f9ea8}} 
\index{PlasticSkeleton@{PlasticSkeleton}!PlasticSkeleton@{PlasticSkeleton}}
\index{PlasticSkeleton@{PlasticSkeleton}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{PlasticSkeleton()}{PlasticSkeleton()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily Plastic\+Skeleton\+::\+Plastic\+Skeleton (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00141 : m\_imp(\textcolor{keyword}{new} Imp) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_skeleton_a994d0cb9056eb32486195c21b22ccec7}\label{class_plastic_skeleton_a994d0cb9056eb32486195c21b22ccec7}} 
\index{PlasticSkeleton@{PlasticSkeleton}!PlasticSkeleton@{PlasticSkeleton}}
\index{PlasticSkeleton@{PlasticSkeleton}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{PlasticSkeleton()}{PlasticSkeleton()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily Plastic\+Skeleton\+::\+Plastic\+Skeleton (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_plastic_skeleton}{Plastic\+Skeleton}} \&}]{other }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00150     : mesh\_type(other), m\_imp(\textcolor{keyword}{new} Imp(*other.m\_imp)) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_skeleton_aa813c5260883b087fec937c47b19535d}\label{class_plastic_skeleton_aa813c5260883b087fec937c47b19535d}} 
\index{PlasticSkeleton@{PlasticSkeleton}!````~PlasticSkeleton@{$\sim$PlasticSkeleton}}
\index{````~PlasticSkeleton@{$\sim$PlasticSkeleton}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{$\sim$PlasticSkeleton()}{~PlasticSkeleton()}}
{\footnotesize\ttfamily Plastic\+Skeleton\+::$\sim$\+Plastic\+Skeleton (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00145 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_skeleton_ac14afb723bbb0141a6ee2c68758d4963}\label{class_plastic_skeleton_ac14afb723bbb0141a6ee2c68758d4963}} 
\index{PlasticSkeleton@{PlasticSkeleton}!PlasticSkeleton@{PlasticSkeleton}}
\index{PlasticSkeleton@{PlasticSkeleton}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{PlasticSkeleton()}{PlasticSkeleton()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily Plastic\+Skeleton\+::\+Plastic\+Skeleton (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_plastic_skeleton}{Plastic\+Skeleton}} \&\&}]{other }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00165     : mesh\_type(std::forward<mesh\_type>(other))}
\DoxyCodeLine{00166     , m\_imp(\textcolor{keyword}{new} Imp(std::move(*other.m\_imp))) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_plastic_skeleton_a9e1a4e0d26862e6080726ad932d965fd}\label{class_plastic_skeleton_a9e1a4e0d26862e6080726ad932d965fd}} 
\index{PlasticSkeleton@{PlasticSkeleton}!addVertex@{addVertex}}
\index{addVertex@{addVertex}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{addVertex()}{addVertex()}}
{\footnotesize\ttfamily int Plastic\+Skeleton\+::add\+Vertex (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_plastic_skeleton_vertex}{Plastic\+Skeleton\+Vertex}} \&}]{vx,  }\item[{int}]{parent }\end{DoxyParamCaption})}



associated deformers 

Adds a vertex to the skeleton 
\begin{DoxyCode}{0}
\DoxyCodeLine{00224                                                                           \{}
\DoxyCodeLine{00225   \textcolor{comment}{// Add the vertex}}
\DoxyCodeLine{00226   \textcolor{keywordtype}{int} v = mesh\_type::addVertex(vx);}
\DoxyCodeLine{00227 }
\DoxyCodeLine{00228   \textcolor{comment}{// Retrieve a vertex index}}
\DoxyCodeLine{00229   \mbox{\hyperlink{struct_plastic_skeleton_vertex}{PlasticSkeletonVertex}} \&vx\_ = vertex(v);}
\DoxyCodeLine{00230 }
\DoxyCodeLine{00231   vx\_.m\_number = m\_imp-\/>m\_numbersPool.acquire();}
\DoxyCodeLine{00232 }
\DoxyCodeLine{00233   \textcolor{comment}{// Assign a name to the vertex in case none was given}}
\DoxyCodeLine{00234   QString name(vx.name());}
\DoxyCodeLine{00235   \textcolor{keywordflow}{if} (name.isEmpty())}
\DoxyCodeLine{00236     name = (v == 0) ? QString(\textcolor{stringliteral}{"{}Root"{}})}
\DoxyCodeLine{00237                     : \textcolor{stringliteral}{"{}Vertex "{}} +}
\DoxyCodeLine{00238                           QString::number(vx\_.m\_number).rightJustified(3, \textcolor{charliteral}{'\_'});}
\DoxyCodeLine{00239 }
\DoxyCodeLine{00240   \textcolor{comment}{// Ensure the name is unique}}
\DoxyCodeLine{00241   \textcolor{keywordflow}{while} (!setVertexName(v, name)) name += \textcolor{stringliteral}{"{}\_"{}};}
\DoxyCodeLine{00242 }
\DoxyCodeLine{00243   \textcolor{keywordflow}{if} (parent >= 0) \{}
\DoxyCodeLine{00244     \textcolor{comment}{// Link it to the parent}}
\DoxyCodeLine{00245     mesh\_type::addEdge(}
\DoxyCodeLine{00246         edge\_type(parent, v));  \textcolor{comment}{// Observe that parent is always v0}}
\DoxyCodeLine{00247     vx\_.m\_parent = parent;}
\DoxyCodeLine{00248     assert(parent != v);}
\DoxyCodeLine{00249   \}}
\DoxyCodeLine{00250 }
\DoxyCodeLine{00251   \textcolor{comment}{// Notify deformations}}
\DoxyCodeLine{00252   std::set<PlasticSkeletonDeformation *>::iterator dt,}
\DoxyCodeLine{00253       dEnd(m\_imp-\/>m\_deformations.end());}
\DoxyCodeLine{00254   \textcolor{keywordflow}{for} (dt = m\_imp-\/>m\_deformations.begin(); dt != dEnd; ++dt)}
\DoxyCodeLine{00255     (*dt)-\/>addVertex(\textcolor{keyword}{this}, v);}
\DoxyCodeLine{00256 }
\DoxyCodeLine{00257   \textcolor{keywordflow}{return} v;}
\DoxyCodeLine{00258 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00262}{insert\+Vertex()}}.

\mbox{\Hypertarget{class_plastic_skeleton_a575e60d32f34a2aca7c9cb7d982fe10e}\label{class_plastic_skeleton_a575e60d32f34a2aca7c9cb7d982fe10e}} 
\index{PlasticSkeleton@{PlasticSkeleton}!clear@{clear}}
\index{clear@{clear}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{clear()}{clear()}}
{\footnotesize\ttfamily void Plastic\+Skeleton\+::clear (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00378                             \{}
\DoxyCodeLine{00379   mesh\_type::clear();}
\DoxyCodeLine{00380   m\_imp-\/>m\_numbersPool.clear();}
\DoxyCodeLine{00381 }
\DoxyCodeLine{00382   \textcolor{comment}{// Notify deformations}}
\DoxyCodeLine{00383   std::set<PlasticSkeletonDeformation *>::iterator dt,}
\DoxyCodeLine{00384       dEnd(m\_imp-\/>m\_deformations.end());}
\DoxyCodeLine{00385   \textcolor{keywordflow}{for} (dt = m\_imp-\/>m\_deformations.begin(); dt != dEnd; ++dt) (*dt)-\/>clear(\textcolor{keyword}{this});}
\DoxyCodeLine{00386 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_skeleton_af540dfa0de4ec19de7481341a77b924f}\label{class_plastic_skeleton_af540dfa0de4ec19de7481341a77b924f}} 
\index{PlasticSkeleton@{PlasticSkeleton}!closestEdge@{closestEdge}}
\index{closestEdge@{closestEdge}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{closestEdge()}{closestEdge()}}
{\footnotesize\ttfamily int Plastic\+Skeleton\+::closest\+Edge (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{double $\ast$}]{distance = {\ttfamily 0} }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00552                                                                        \{}
\DoxyCodeLine{00553   \textcolor{comment}{// Traverse edges}}
\DoxyCodeLine{00554   \textcolor{keywordtype}{double} d, minDist = (std::numeric\_limits<double>::max)();}
\DoxyCodeLine{00555   \textcolor{keywordtype}{int} e = -\/1;}
\DoxyCodeLine{00556 }
\DoxyCodeLine{00557   \mbox{\hyperlink{structtcg_1_1list_1_1const__iterator}{tcg::list<edge\_type>::const\_iterator}} et, eEnd(m\_edges.end());}
\DoxyCodeLine{00558   \textcolor{keywordflow}{for} (et = m\_edges.begin(); et != eEnd; ++et) \{}
\DoxyCodeLine{00559     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_point_t}{TPointD}} \&vp0 = vertex(et-\/>vertex(0)).P(),}
\DoxyCodeLine{00560                   \&vp1 = vertex(et-\/>vertex(1)).P();}
\DoxyCodeLine{00561 }
\DoxyCodeLine{00562     d                        = tcg::point\_ops::segDist(vp0, vp1, pos);}
\DoxyCodeLine{00563     \textcolor{keywordflow}{if} (d < minDist) minDist = d, e = int(et.m\_idx);}
\DoxyCodeLine{00564   \}}
\DoxyCodeLine{00565 }
\DoxyCodeLine{00566   \textcolor{keywordflow}{if} (dist \&\& e >= 0) *dist = minDist;}
\DoxyCodeLine{00567 }
\DoxyCodeLine{00568   \textcolor{keywordflow}{return} e;}
\DoxyCodeLine{00569 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_skeleton_aa9c5613f88aa8a524c3cf1dda0f0b663}\label{class_plastic_skeleton_aa9c5613f88aa8a524c3cf1dda0f0b663}} 
\index{PlasticSkeleton@{PlasticSkeleton}!closestVertex@{closestVertex}}
\index{closestVertex@{closestVertex}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{closestVertex()}{closestVertex()}}
{\footnotesize\ttfamily int Plastic\+Skeleton\+::closest\+Vertex (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{double $\ast$}]{distance = {\ttfamily 0} }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00534                                                                          \{}
\DoxyCodeLine{00535   \textcolor{comment}{// Traverse vertices}}
\DoxyCodeLine{00536   \textcolor{keywordtype}{double} d2, minDist2 = (std::numeric\_limits<double>::max)();}
\DoxyCodeLine{00537   \textcolor{keywordtype}{int} v = -\/1;}
\DoxyCodeLine{00538 }
\DoxyCodeLine{00539   \mbox{\hyperlink{structtcg_1_1list_1_1const__iterator}{tcg::list<vertex\_type>::const\_iterator}} vt, vEnd(m\_vertices.end());}
\DoxyCodeLine{00540   \textcolor{keywordflow}{for} (vt = m\_vertices.begin(); vt != vEnd; ++vt) \{}
\DoxyCodeLine{00541     d2                          = tcg::point\_ops::dist2(pos, vt-\/>P());}
\DoxyCodeLine{00542     \textcolor{keywordflow}{if} (d2 < minDist2) minDist2 = d2, v = int(vt.m\_idx);}
\DoxyCodeLine{00543   \}}
\DoxyCodeLine{00544 }
\DoxyCodeLine{00545   \textcolor{keywordflow}{if} (dist \&\& v >= 0) *dist = sqrt(minDist2);}
\DoxyCodeLine{00546 }
\DoxyCodeLine{00547   \textcolor{keywordflow}{return} v;}
\DoxyCodeLine{00548 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_skeleton_ae1469a529f65a19ced4d87b41fed8f4e}\label{class_plastic_skeleton_ae1469a529f65a19ced4d87b41fed8f4e}} 
\index{PlasticSkeleton@{PlasticSkeleton}!insertVertex@{insertVertex}}
\index{insertVertex@{insertVertex}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{insertVertex()}{insertVertex()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily int Plastic\+Skeleton\+::insert\+Vertex (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_plastic_skeleton_vertex}{Plastic\+Skeleton\+Vertex}} \&}]{vx,  }\item[{int}]{e }\end{DoxyParamCaption})}

Inserts a vertex splitting an existing edge\begin{DoxyNote}{Note}
Inserted Vertex will connect to parent first 
\end{DoxyNote}

\begin{DoxyCode}{0}
\DoxyCodeLine{00322                                                                         \{}
\DoxyCodeLine{00323   \textcolor{keyword}{const} edge\_type \&ed = edge(e);}
\DoxyCodeLine{00324   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_plastic_skeleton_ae1469a529f65a19ced4d87b41fed8f4e}{insertVertex}}(vx, ed.vertex(0), std::vector<int>(1, ed.vertex(1)));}
\DoxyCodeLine{00325 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00322}{insert\+Vertex()}}.



Referenced by \mbox{\hyperlink{l00322}{insert\+Vertex()}}.

\mbox{\Hypertarget{class_plastic_skeleton_a1fa9b3f9e158253bdf98877d33c27d1b}\label{class_plastic_skeleton_a1fa9b3f9e158253bdf98877d33c27d1b}} 
\index{PlasticSkeleton@{PlasticSkeleton}!insertVertex@{insertVertex}}
\index{insertVertex@{insertVertex}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{insertVertex()}{insertVertex()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily int Plastic\+Skeleton\+::insert\+Vertex (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_plastic_skeleton_vertex}{Plastic\+Skeleton\+Vertex}} \&}]{vx,  }\item[{int}]{parent,  }\item[{const std\+::vector$<$ int $>$ \&}]{children }\end{DoxyParamCaption})}



it is useful as inverse of vertex removal. 


\begin{DoxyParams}{Parameters}
{\em parent} & Generalization of vertex addition/insertion, \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{00263                                                                   \{}
\DoxyCodeLine{00264   assert(parent >= 0);}
\DoxyCodeLine{00265 }
\DoxyCodeLine{00266   \textcolor{keywordflow}{if} (children.empty()) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_plastic_skeleton_a9e1a4e0d26862e6080726ad932d965fd}{addVertex}}(vx, parent);}
\DoxyCodeLine{00267 }
\DoxyCodeLine{00268   \textcolor{comment}{// Add the vertex}}
\DoxyCodeLine{00269   \textcolor{keywordtype}{int} v = mesh\_type::addVertex(vx);}
\DoxyCodeLine{00270 }
\DoxyCodeLine{00271   \textcolor{comment}{// Retrieve a vertex index}}
\DoxyCodeLine{00272   \mbox{\hyperlink{struct_plastic_skeleton_vertex}{PlasticSkeletonVertex}} \&vx\_ = vertex(v);}
\DoxyCodeLine{00273 }
\DoxyCodeLine{00274   vx\_.m\_number = m\_imp-\/>m\_numbersPool.acquire();}
\DoxyCodeLine{00275 }
\DoxyCodeLine{00276   \textcolor{comment}{// Assign a name to the vertex in case none was given}}
\DoxyCodeLine{00277   QString name(vx.name());}
\DoxyCodeLine{00278   \textcolor{keywordflow}{if} (name.isEmpty())}
\DoxyCodeLine{00279     name = \textcolor{stringliteral}{"{}Vertex "{}} + QString::number(vx\_.m\_number).rightJustified(3, \textcolor{charliteral}{'\_'});}
\DoxyCodeLine{00280 }
\DoxyCodeLine{00281   \textcolor{comment}{// Ensure the name is unique}}
\DoxyCodeLine{00282   \textcolor{keywordflow}{while} (!setVertexName(v, name)) name += \textcolor{stringliteral}{"{}\_"{}};}
\DoxyCodeLine{00283 }
\DoxyCodeLine{00284   \textcolor{comment}{// Link it to the parent}}
\DoxyCodeLine{00285   \{}
\DoxyCodeLine{00286     \mbox{\hyperlink{struct_plastic_skeleton_vertex}{PlasticSkeletonVertex}} \&vx\_ = vertex(v);}
\DoxyCodeLine{00287 }
\DoxyCodeLine{00288     mesh\_type::addEdge(}
\DoxyCodeLine{00289         edge\_type(parent, v));  \textcolor{comment}{// Observe that parent is always v0}}
\DoxyCodeLine{00290     vx\_.m\_parent = parent;}
\DoxyCodeLine{00291     assert(parent != v);}
\DoxyCodeLine{00292   \}}
\DoxyCodeLine{00293 }
\DoxyCodeLine{00294   \textcolor{comment}{// Link it to children}}
\DoxyCodeLine{00295   \textcolor{keywordtype}{int} c, cCount = int(children.size());}
\DoxyCodeLine{00296   \textcolor{keywordflow}{for} (c = 0; c != cCount; ++c) \{}
\DoxyCodeLine{00297     \textcolor{keywordtype}{int} vChild                     = children[c];}
\DoxyCodeLine{00298     \mbox{\hyperlink{struct_plastic_skeleton_vertex}{PlasticSkeletonVertex}} \&vxChild = vertex(vChild);}
\DoxyCodeLine{00299 }
\DoxyCodeLine{00300     assert(vxChild.parent() == parent);}
\DoxyCodeLine{00301 }
\DoxyCodeLine{00302     \textcolor{comment}{// Remove the edge and substitute it with a new one}}
\DoxyCodeLine{00303     \textcolor{keywordtype}{int} e = \mbox{\hyperlink{classtcg_1_1_mesh_aaf3669dd3836f0a300a29a3dfe1c8ba2}{edgeInciding}}(parent, vChild);}
\DoxyCodeLine{00304     \mbox{\hyperlink{classtcg_1_1_mesh_aac3b2a0d2edea64350a5740a179e0aa4}{mesh\_type::removeEdge}}(e);}
\DoxyCodeLine{00305 }
\DoxyCodeLine{00306     mesh\_type::addEdge(edge\_type(v, vChild));}
\DoxyCodeLine{00307     vxChild.m\_parent = v;}
\DoxyCodeLine{00308     assert(v != vChild);}
\DoxyCodeLine{00309   \}}
\DoxyCodeLine{00310 }
\DoxyCodeLine{00311   \textcolor{comment}{// Notify deformations}}
\DoxyCodeLine{00312   std::set<PlasticSkeletonDeformation *>::iterator dt,}
\DoxyCodeLine{00313       dEnd(m\_imp-\/>m\_deformations.end());}
\DoxyCodeLine{00314   \textcolor{keywordflow}{for} (dt = m\_imp-\/>m\_deformations.begin(); dt != dEnd; ++dt)}
\DoxyCodeLine{00315     (*dt)-\/>insertVertex(\textcolor{keyword}{this}, v);}
\DoxyCodeLine{00316 }
\DoxyCodeLine{00317   \textcolor{keywordflow}{return} v;}
\DoxyCodeLine{00318 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00224}{add\+Vertex()}}, \mbox{\hyperlink{l00016}{tcg\+::\+Mesh$<$ Plastic\+Skeleton\+Vertex, tcg\+::\+Edge, tcg\+::\+Face\+N$<$ 3 $>$ $>$\+::edge\+Inciding()}}, and \mbox{\hyperlink{l00073}{tcg\+::\+Mesh$<$ Plastic\+Skeleton\+Vertex, tcg\+::\+Edge, tcg\+::\+Face\+N$<$ 3 $>$ $>$\+::remove\+Edge()}}.

\mbox{\Hypertarget{class_plastic_skeleton_a778c3258f796a5e187c2aee1636ff5d1}\label{class_plastic_skeleton_a778c3258f796a5e187c2aee1636ff5d1}} 
\index{PlasticSkeleton@{PlasticSkeleton}!loadData@{loadData}}
\index{loadData@{loadData}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{loadData()}{loadData()}}
{\footnotesize\ttfamily void Plastic\+Skeleton\+::load\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_i_stream}{TIStream}} \&}]{is }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

\begin{DoxyVerb} This is a pure virtual function and must be overridden with a method
\end{DoxyVerb}
 that implements the object loading from a stream (i.\+e take the object\textquotesingle{}s features from a formatted data stream). For example the \mbox{\hyperlink{class_t_stage_object}{TStage\+Object}} class use his implementation to take the values of the parameters that characterizes a stage object as name, coordinates, etc... from a file. {\itshape is} is an input file stream 

Implements \mbox{\hyperlink{class_t_persist_a9e9d78431e843edb9299095af867a136}{TPersist}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00474                                            \{}
\DoxyCodeLine{00475   \textcolor{comment}{// Ensure the skeleton is clean}}
\DoxyCodeLine{00476   clear();}
\DoxyCodeLine{00477 }
\DoxyCodeLine{00478   \textcolor{comment}{// Load vertices}}
\DoxyCodeLine{00479   std::string str;}
\DoxyCodeLine{00480   \textcolor{keywordtype}{int} i, size;}
\DoxyCodeLine{00481 }
\DoxyCodeLine{00482   \textcolor{keywordflow}{while} (is.\mbox{\hyperlink{class_t_i_stream_a735640240402316f00c595134bfe6b4b}{openChild}}(str)) \{}
\DoxyCodeLine{00483     \textcolor{keywordflow}{if} (str == \textcolor{stringliteral}{"{}V"{}}) \{}
\DoxyCodeLine{00484       is >> size;}
\DoxyCodeLine{00485 }
\DoxyCodeLine{00486       std::vector<int> acquiredVertexNumbers;}
\DoxyCodeLine{00487       acquiredVertexNumbers.reserve(size);}
\DoxyCodeLine{00488 }
\DoxyCodeLine{00489       m\_vertices.reserve(size);}
\DoxyCodeLine{00490 }
\DoxyCodeLine{00491       \textcolor{keywordflow}{for} (i = 0; i < size; ++i) \{}
\DoxyCodeLine{00492         \textcolor{keywordflow}{if} (is.\mbox{\hyperlink{class_t_i_stream_a735640240402316f00c595134bfe6b4b}{openChild}}(str) \&\& (str == \textcolor{stringliteral}{"{}Vertex"{}})) \{}
\DoxyCodeLine{00493           vertex\_type vx;}
\DoxyCodeLine{00494 }
\DoxyCodeLine{00495           is >> vx;}
\DoxyCodeLine{00496           \textcolor{keywordtype}{int} idx = mesh\_type::addVertex(vx);}
\DoxyCodeLine{00497 }
\DoxyCodeLine{00498           \textcolor{keywordflow}{if} (vx.m\_number < 0) vertex(idx).m\_number = vx.m\_number = idx + 1;}
\DoxyCodeLine{00499 }
\DoxyCodeLine{00500           acquiredVertexNumbers.push\_back(vx.m\_number);}
\DoxyCodeLine{00501 }
\DoxyCodeLine{00502           is.\mbox{\hyperlink{class_t_i_stream_a84110f30d5adcc50d6000e9c99cd4708}{matchEndTag}}();}
\DoxyCodeLine{00503         \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00504           assert(\textcolor{keyword}{false}), is.\mbox{\hyperlink{class_t_i_stream_add912e4624a496f6dd1564cd63976dbb}{skipCurrentTag}}();}
\DoxyCodeLine{00505       \}}
\DoxyCodeLine{00506 }
\DoxyCodeLine{00507       m\_imp-\/>m\_numbersPool = \mbox{\hyperlink{classtcg_1_1indices__pool}{tcg::indices\_pool<int>}}(}
\DoxyCodeLine{00508           acquiredVertexNumbers.begin(), acquiredVertexNumbers.end());}
\DoxyCodeLine{00509 }
\DoxyCodeLine{00510       is.\mbox{\hyperlink{class_t_i_stream_a84110f30d5adcc50d6000e9c99cd4708}{matchEndTag}}();}
\DoxyCodeLine{00511     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (str == \textcolor{stringliteral}{"{}E"{}}) \{}
\DoxyCodeLine{00512       is >> size;}
\DoxyCodeLine{00513 }
\DoxyCodeLine{00514       m\_edges.reserve(size);}
\DoxyCodeLine{00515       \textcolor{keywordtype}{int} v0, v1;}
\DoxyCodeLine{00516 }
\DoxyCodeLine{00517       \textcolor{keywordflow}{for} (i = 0; i < size; ++i) \{}
\DoxyCodeLine{00518         is >> v0 >> v1;}
\DoxyCodeLine{00519 }
\DoxyCodeLine{00520         addEdge(edge\_type(v0, v1));}
\DoxyCodeLine{00521         vertex(v1).m\_parent = v0;}
\DoxyCodeLine{00522       \}}
\DoxyCodeLine{00523 }
\DoxyCodeLine{00524       is.\mbox{\hyperlink{class_t_i_stream_a84110f30d5adcc50d6000e9c99cd4708}{matchEndTag}}();}
\DoxyCodeLine{00525     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00526       assert(\textcolor{keyword}{false}), is.\mbox{\hyperlink{class_t_i_stream_add912e4624a496f6dd1564cd63976dbb}{skipCurrentTag}}();}
\DoxyCodeLine{00527   \}}
\DoxyCodeLine{00528 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01156}{TIStream\+::match\+End\+Tag()}}, \mbox{\hyperlink{l01231}{TIStream\+::open\+Child()}}, and \mbox{\hyperlink{l01283}{TIStream\+::skip\+Current\+Tag()}}.

\mbox{\Hypertarget{class_plastic_skeleton_aa4856317cf4a0770088a4a1fbb91548d}\label{class_plastic_skeleton_aa4856317cf4a0770088a4a1fbb91548d}} 
\index{PlasticSkeleton@{PlasticSkeleton}!moveVertex@{moveVertex}}
\index{moveVertex@{moveVertex}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{moveVertex()}{moveVertex()}}
{\footnotesize\ttfamily void Plastic\+Skeleton\+::move\+Vertex (\begin{DoxyParamCaption}\item[{int}]{v,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos }\end{DoxyParamCaption})}

Moves a vertex to the specified position, informing 
\begin{DoxyCode}{0}
\DoxyCodeLine{00218                                                           \{}
\DoxyCodeLine{00219   mesh\_type::vertex(v).P() = pos;  \textcolor{comment}{// Apply new position}}
\DoxyCodeLine{00220 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_skeleton_ad5f1a3aad78112a215b775dd64f7e089}\label{class_plastic_skeleton_ad5f1a3aad78112a215b775dd64f7e089}} 
\index{PlasticSkeleton@{PlasticSkeleton}!operator=@{operator=}}
\index{operator=@{operator=}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_plastic_skeleton}{Plastic\+Skeleton}} \& Plastic\+Skeleton\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_plastic_skeleton}{Plastic\+Skeleton}} \&}]{other }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00154                                                                         \{}
\DoxyCodeLine{00155   assert(m\_imp-\/>m\_deformations.empty());}
\DoxyCodeLine{00156 }
\DoxyCodeLine{00157   mesh\_type::operator=(other);}
\DoxyCodeLine{00158   *m\_imp             = *other.m\_imp;}
\DoxyCodeLine{00159 }
\DoxyCodeLine{00160   \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{00161 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_skeleton_a9a198b4c7e2ccf0220fe06462325c211}\label{class_plastic_skeleton_a9a198b4c7e2ccf0220fe06462325c211}} 
\index{PlasticSkeleton@{PlasticSkeleton}!operator=@{operator=}}
\index{operator=@{operator=}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_plastic_skeleton}{Plastic\+Skeleton}} \& Plastic\+Skeleton\+::operator= (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_plastic_skeleton}{Plastic\+Skeleton}} \&\&}]{other }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00170                                                                    \{}
\DoxyCodeLine{00171   assert(m\_imp-\/>m\_deformations.empty());}
\DoxyCodeLine{00172 }
\DoxyCodeLine{00173   mesh\_type::operator=(std::forward<mesh\_type>(other));}
\DoxyCodeLine{00174   *m\_imp             = std::move(*other.m\_imp);}
\DoxyCodeLine{00175 }
\DoxyCodeLine{00176   \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{00177 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_skeleton_a4d2403155b6503c99725fd3b2d0f2270}\label{class_plastic_skeleton_a4d2403155b6503c99725fd3b2d0f2270}} 
\index{PlasticSkeleton@{PlasticSkeleton}!parentVertex@{parentVertex}}
\index{parentVertex@{parentVertex}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{parentVertex()}{parentVertex()}}
{\footnotesize\ttfamily int Plastic\+Skeleton\+::parent\+Vertex (\begin{DoxyParamCaption}\item[{int}]{v }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00126 \{ \textcolor{keywordflow}{return} vertex(v).m\_parent; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_skeleton_a6a05e72469d27d527df1482b17bf6ada}\label{class_plastic_skeleton_a6a05e72469d27d527df1482b17bf6ada}} 
\index{PlasticSkeleton@{PlasticSkeleton}!removeVertex@{removeVertex}}
\index{removeVertex@{removeVertex}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{removeVertex()}{removeVertex()}}
{\footnotesize\ttfamily void Plastic\+Skeleton\+::remove\+Vertex (\begin{DoxyParamCaption}\item[{int}]{v }\end{DoxyParamCaption})}



Removes a vertex, reattaching all its children to parent. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00329                                         \{}
\DoxyCodeLine{00330   \textcolor{keywordtype}{int} vNumber;}
\DoxyCodeLine{00331   \{}
\DoxyCodeLine{00332     \textcolor{comment}{// Reparent all of v's children to its parent's children, first. This is}}
\DoxyCodeLine{00333     \textcolor{comment}{// needed}}
\DoxyCodeLine{00334     \textcolor{comment}{// to ensure that deformations update vertex deformations correctly.}}
\DoxyCodeLine{00335 }
\DoxyCodeLine{00336     \mbox{\hyperlink{struct_plastic_skeleton_vertex}{PlasticSkeletonVertex}} vx(}
\DoxyCodeLine{00337         vertex(v));  \textcolor{comment}{// Note the COPY -\/ not referencing. It's best since}}
\DoxyCodeLine{00338     \textcolor{comment}{// we'll be iterating and erasing vx's edges at the same time}}
\DoxyCodeLine{00339     \textcolor{keywordtype}{int} parent = vx.m\_parent;}
\DoxyCodeLine{00340     \textcolor{keywordflow}{if} (parent < 0) \{}
\DoxyCodeLine{00341       \textcolor{comment}{// Root case -\/ clear the whole skeleton}}
\DoxyCodeLine{00342       clear();  \textcolor{comment}{// Should ensure that the next inserted vertex has index 0}}
\DoxyCodeLine{00343       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00344     \}}
\DoxyCodeLine{00345 }
\DoxyCodeLine{00346     \textcolor{comment}{// Add edges from parent to vx's children}}
\DoxyCodeLine{00347     vertex\_type::edges\_iterator et, eEnd = vx.edgesEnd();}
\DoxyCodeLine{00348     \textcolor{keywordflow}{for} (et = vx.edgesBegin(); et != eEnd; ++et) \{}
\DoxyCodeLine{00349       \textcolor{keywordtype}{int} vChild = edge(*et).vertex(1);}
\DoxyCodeLine{00350       \textcolor{keywordflow}{if} (vChild == v) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00351 }
\DoxyCodeLine{00352       \mbox{\hyperlink{classtcg_1_1_mesh_aac3b2a0d2edea64350a5740a179e0aa4}{mesh\_type::removeEdge}}(*et);}
\DoxyCodeLine{00353 }
\DoxyCodeLine{00354       mesh\_type::addEdge(edge\_type(parent, vChild));}
\DoxyCodeLine{00355       vertex(vChild).m\_parent = parent;}
\DoxyCodeLine{00356       assert(vChild != parent);}
\DoxyCodeLine{00357     \}}
\DoxyCodeLine{00358 }
\DoxyCodeLine{00359     vNumber = vx.m\_number;}
\DoxyCodeLine{00360   \}}
\DoxyCodeLine{00361 }
\DoxyCodeLine{00362   \textcolor{comment}{// Notify deformations BEFORE removing the vertex, so the vertex deformations}}
\DoxyCodeLine{00363   \textcolor{comment}{// are still accessible.}}
\DoxyCodeLine{00364   std::set<PlasticSkeletonDeformation *>::iterator dt,}
\DoxyCodeLine{00365       dEnd(m\_imp-\/>m\_deformations.end());}
\DoxyCodeLine{00366   \textcolor{keywordflow}{for} (dt = m\_imp-\/>m\_deformations.begin(); dt != dEnd; ++dt)}
\DoxyCodeLine{00367     (*dt)-\/>deleteVertex(\textcolor{keyword}{this}, v);}
\DoxyCodeLine{00368 }
\DoxyCodeLine{00369   \textcolor{comment}{// Then, erase v. This already ensures that edges connected with v are}}
\DoxyCodeLine{00370   \textcolor{comment}{// destroyed.}}
\DoxyCodeLine{00371   \mbox{\hyperlink{classtcg_1_1_mesh_a961f00ed5bd4853bd7a88af9c5eb74e7}{mesh\_type::removeVertex}}(v);}
\DoxyCodeLine{00372 }
\DoxyCodeLine{00373   m\_imp-\/>m\_numbersPool.release(vNumber);}
\DoxyCodeLine{00374 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00073}{tcg\+::\+Mesh$<$ Plastic\+Skeleton\+Vertex, tcg\+::\+Edge, tcg\+::\+Face\+N$<$ 3 $>$ $>$\+::remove\+Edge()}}, and \mbox{\hyperlink{l00061}{tcg\+::\+Mesh$<$ Plastic\+Skeleton\+Vertex, tcg\+::\+Edge, tcg\+::\+Face\+N$<$ 3 $>$ $>$\+::remove\+Vertex()}}.

\mbox{\Hypertarget{class_plastic_skeleton_a3f0de22cc7e910ec42928b1a6c19d46e}\label{class_plastic_skeleton_a3f0de22cc7e910ec42928b1a6c19d46e}} 
\index{PlasticSkeleton@{PlasticSkeleton}!saveData@{saveData}}
\index{saveData@{saveData}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{saveData()}{saveData()}}
{\footnotesize\ttfamily void Plastic\+Skeleton\+::save\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_o_stream}{TOStream}} \&}]{os }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

\begin{DoxyVerb} This is a pure virtual function and must be overridden with a method
\end{DoxyVerb}
 that implements the object saving to a data stream (i.\+e put the object\textquotesingle{}s features on a formatted data stream). For example the \mbox{\hyperlink{class_t_stage_object}{TStage\+Object}} class use his implementation to save the values of the parameters that characterizes a stage object as name, coordinates, etc... on a file {\itshape os} is an output file stream. 

Implements \mbox{\hyperlink{class_t_persist_afb991f7b26f14dbee1740ef036ff4e85}{TPersist}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00432                                            \{}
\DoxyCodeLine{00433   \textcolor{comment}{// NOTE: Primitives saved by INDEX iteration is NOT COINCIDENTAL -\/ since}}
\DoxyCodeLine{00434   \textcolor{comment}{// the lists' internal linking could have been altered to mismatch the}}
\DoxyCodeLine{00435   \textcolor{comment}{// natural indexing referred to by primitives' data.}}
\DoxyCodeLine{00436 }
\DoxyCodeLine{00437   \textcolor{keywordflow}{if} (m\_vertices.size() != m\_vertices.nodesCount() ||}
\DoxyCodeLine{00438       m\_edges.size() != m\_edges.nodesCount()) \{}
\DoxyCodeLine{00439     \textcolor{comment}{// Ensure that there are no holes in the representation}}
\DoxyCodeLine{00440     \mbox{\hyperlink{class_plastic_skeleton}{PlasticSkeleton}} skel(*\textcolor{keyword}{this});}
\DoxyCodeLine{00441 }
\DoxyCodeLine{00442     skel.squeeze();}
\DoxyCodeLine{00443     skel.saveData(os);}
\DoxyCodeLine{00444 }
\DoxyCodeLine{00445     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00446   \}}
\DoxyCodeLine{00447 }
\DoxyCodeLine{00448   \textcolor{comment}{// Save vertices}}
\DoxyCodeLine{00449   os.\mbox{\hyperlink{class_t_o_stream_a38fe0f56d934f1c25e2b5d8156415673}{openChild}}(\textcolor{stringliteral}{"{}V"{}});}
\DoxyCodeLine{00450   \{}
\DoxyCodeLine{00451     \textcolor{keywordtype}{int} vCount = int(m\_vertices.size());}
\DoxyCodeLine{00452     os << vCount;}
\DoxyCodeLine{00453 }
\DoxyCodeLine{00454     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} v = 0; v != vCount; ++v) os.\mbox{\hyperlink{class_t_o_stream_a9cd1359e6b21d85786708c7e680756d1}{child}}(\textcolor{stringliteral}{"{}Vertex"{}}) << m\_vertices[v];}
\DoxyCodeLine{00455   \}}
\DoxyCodeLine{00456   os.\mbox{\hyperlink{class_t_o_stream_ae80752da32b21a502953e151e7c4b2ee}{closeChild}}();}
\DoxyCodeLine{00457 }
\DoxyCodeLine{00458   \textcolor{comment}{// Save edges}}
\DoxyCodeLine{00459   os.\mbox{\hyperlink{class_t_o_stream_a38fe0f56d934f1c25e2b5d8156415673}{openChild}}(\textcolor{stringliteral}{"{}E"{}});}
\DoxyCodeLine{00460   \{}
\DoxyCodeLine{00461     \textcolor{keywordtype}{int} eCount = int(m\_edges.size());}
\DoxyCodeLine{00462     os << eCount;}
\DoxyCodeLine{00463 }
\DoxyCodeLine{00464     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} e = 0; e != eCount; ++e) \{}
\DoxyCodeLine{00465       \mbox{\hyperlink{classtcg_1_1_edge}{PlasticSkeleton::edge\_type}} \&ed = m\_edges[e];}
\DoxyCodeLine{00466       os << ed.vertex(0) << ed.vertex(1);}
\DoxyCodeLine{00467     \}}
\DoxyCodeLine{00468   \}}
\DoxyCodeLine{00469   os.\mbox{\hyperlink{class_t_o_stream_ae80752da32b21a502953e151e7c4b2ee}{closeChild}}();}
\DoxyCodeLine{00470 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00482}{TOStream\+::child()}}, \mbox{\hyperlink{l00520}{TOStream\+::close\+Child()}}, \mbox{\hyperlink{class_t_o_stream_a38fe0f56d934f1c25e2b5d8156415673}{TOStream\+::open\+Child()}}, and \mbox{\hyperlink{l00432}{save\+Data()}}.



Referenced by \mbox{\hyperlink{l00432}{save\+Data()}}.

\mbox{\Hypertarget{class_plastic_skeleton_ab7fb5dec7081a16b1703905c85edb837}\label{class_plastic_skeleton_ab7fb5dec7081a16b1703905c85edb837}} 
\index{PlasticSkeleton@{PlasticSkeleton}!setVertexName@{setVertexName}}
\index{setVertexName@{setVertexName}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{setVertexName()}{setVertexName()}}
{\footnotesize\ttfamily bool Plastic\+Skeleton\+::set\+Vertex\+Name (\begin{DoxyParamCaption}\item[{int}]{v,  }\item[{const QString \&}]{name }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00193                                                                  \{}
\DoxyCodeLine{00194   assert(!newName.isEmpty());}
\DoxyCodeLine{00195 }
\DoxyCodeLine{00196   \textcolor{keywordflow}{if} (m\_vertices[v].m\_name == newName) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00197 }
\DoxyCodeLine{00198   \textcolor{comment}{// Traverse the vertices list -\/ if the same name already exists, return false}}
\DoxyCodeLine{00199   \mbox{\hyperlink{structtcg_1_1list_1_1iterator}{tcg::list<vertex\_type>::iterator}} vt, vEnd(m\_vertices.end());}
\DoxyCodeLine{00200   \textcolor{keywordflow}{for} (vt = m\_vertices.begin(); vt != vEnd; ++vt)}
\DoxyCodeLine{00201     \textcolor{keywordflow}{if} (vt.m\_idx != v \&\&}
\DoxyCodeLine{00202         vt-\/>m\_name == newName)  \textcolor{comment}{// v should be skipped in the check}}
\DoxyCodeLine{00203       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00204 }
\DoxyCodeLine{00205   \textcolor{comment}{// Notify deformations before changing the name}}
\DoxyCodeLine{00206   std::set<PlasticSkeletonDeformation *>::iterator dt,}
\DoxyCodeLine{00207       dEnd(m\_imp-\/>m\_deformations.end());}
\DoxyCodeLine{00208   \textcolor{keywordflow}{for} (dt = m\_imp-\/>m\_deformations.begin(); dt != dEnd; ++dt)}
\DoxyCodeLine{00209     (*dt)-\/>vertexNameChange(\textcolor{keyword}{this}, v, newName);}
\DoxyCodeLine{00210 }
\DoxyCodeLine{00211   m\_vertices[v].m\_name = newName;}
\DoxyCodeLine{00212 }
\DoxyCodeLine{00213   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00214 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_skeleton_a4ca3612b18a144f26e2220d007a2d592}\label{class_plastic_skeleton_a4ca3612b18a144f26e2220d007a2d592}} 
\index{PlasticSkeleton@{PlasticSkeleton}!squeeze@{squeeze}}
\index{squeeze@{squeeze}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{squeeze()}{squeeze()}}
{\footnotesize\ttfamily void Plastic\+Skeleton\+::squeeze (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00390                               \{}
\DoxyCodeLine{00391   \textcolor{comment}{// Squeeze associated deformations first}}
\DoxyCodeLine{00392   \textcolor{keywordtype}{int} v, e;}
\DoxyCodeLine{00393 }
\DoxyCodeLine{00394   \textcolor{comment}{// Update indices}}
\DoxyCodeLine{00395   \mbox{\hyperlink{structtcg_1_1list_1_1iterator}{tcg::list<vertex\_type>::iterator}} vt, vEnd(m\_vertices.end());}
\DoxyCodeLine{00396   \textcolor{keywordflow}{for} (v = 0, vt = m\_vertices.begin(); vt != vEnd; ++vt, ++v) vt-\/>setIndex(v);}
\DoxyCodeLine{00397 }
\DoxyCodeLine{00398   \mbox{\hyperlink{structtcg_1_1list_1_1iterator}{tcg::list<edge\_type>::iterator}} et, eEnd(m\_edges.end());}
\DoxyCodeLine{00399   \textcolor{keywordflow}{for} (e = 0, et = m\_edges.begin(); et != eEnd; ++et, ++e) et-\/>setIndex(e);}
\DoxyCodeLine{00400 }
\DoxyCodeLine{00401   \textcolor{comment}{// Update stored indices}}
\DoxyCodeLine{00402   \textcolor{keywordflow}{for} (et = m\_edges.begin(); et != eEnd; ++et) \{}
\DoxyCodeLine{00403     edge\_type \&ed = *et;}
\DoxyCodeLine{00404     ed.setVertex(0, vertex(ed.vertex(0)).getIndex());}
\DoxyCodeLine{00405     ed.setVertex(1, vertex(ed.vertex(1)).getIndex());}
\DoxyCodeLine{00406   \}}
\DoxyCodeLine{00407 }
\DoxyCodeLine{00408   \textcolor{keywordflow}{for} (vt = m\_vertices.begin(); vt != vEnd; ++vt) \{}
\DoxyCodeLine{00409     vertex\_type \&vx = *vt;}
\DoxyCodeLine{00410 }
\DoxyCodeLine{00411     \textcolor{keywordflow}{if} (vt-\/>m\_parent >= 0) vt-\/>m\_parent = vertex(vt-\/>m\_parent).getIndex();}
\DoxyCodeLine{00412 }
\DoxyCodeLine{00413     vertex\_type::edges\_iterator vet, veEnd(vx.edgesEnd());}
\DoxyCodeLine{00414     \textcolor{keywordflow}{for} (vet = vx.edgesBegin(); vet != veEnd; ++vet)}
\DoxyCodeLine{00415       *vet = edge(*vet).getIndex();}
\DoxyCodeLine{00416   \}}
\DoxyCodeLine{00417 }
\DoxyCodeLine{00418   \textcolor{comment}{// Finally, rebuild the actual containers}}
\DoxyCodeLine{00419   \textcolor{keywordflow}{if} (!m\_edges.empty()) \{}
\DoxyCodeLine{00420     \mbox{\hyperlink{classtcg_1_1list}{tcg::list<edge\_type>}} temp(m\_edges.begin(), m\_edges.end());}
\DoxyCodeLine{00421     std::swap(m\_edges, temp);}
\DoxyCodeLine{00422   \}}
\DoxyCodeLine{00423 }
\DoxyCodeLine{00424   \textcolor{keywordflow}{if} (!m\_vertices.empty()) \{}
\DoxyCodeLine{00425     \mbox{\hyperlink{classtcg_1_1list}{tcg::list<vertex\_type>}} temp(m\_vertices.begin(), m\_vertices.end());}
\DoxyCodeLine{00426     std::swap(m\_vertices, temp);}
\DoxyCodeLine{00427   \}}
\DoxyCodeLine{00428 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_skeleton_a734847719ff8daf17acde8ff9ea5d0dc}\label{class_plastic_skeleton_a734847719ff8daf17acde8ff9ea5d0dc}} 
\index{PlasticSkeleton@{PlasticSkeleton}!verticesToHandles@{verticesToHandles}}
\index{verticesToHandles@{verticesToHandles}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{verticesToHandles()}{verticesToHandles()}}
{\footnotesize\ttfamily std\+::vector$<$ \mbox{\hyperlink{struct_plastic_handle}{Plastic\+Handle}} $>$ Plastic\+Skeleton\+::vertices\+To\+Handles (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00573                                                                   \{}
\DoxyCodeLine{00574   std::vector<PlasticHandle> v;}
\DoxyCodeLine{00575   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const} \&e : m\_vertices) \{}
\DoxyCodeLine{00576     v.push\_back(e);}
\DoxyCodeLine{00577   \}}
\DoxyCodeLine{00578   \textcolor{keywordflow}{return} v;}
\DoxyCodeLine{00579 \}}

\end{DoxyCode}


\doxysubsection{Friends And Related Function Documentation}
\mbox{\Hypertarget{class_plastic_skeleton_ada03ae5bb515da944d151c14dec85fa9}\label{class_plastic_skeleton_ada03ae5bb515da944d151c14dec85fa9}} 
\index{PlasticSkeleton@{PlasticSkeleton}!PlasticSkeletonDeformation@{PlasticSkeletonDeformation}}
\index{PlasticSkeletonDeformation@{PlasticSkeletonDeformation}!PlasticSkeleton@{PlasticSkeleton}}
\doxysubsubsection{\texorpdfstring{PlasticSkeletonDeformation}{PlasticSkeletonDeformation}}
{\footnotesize\ttfamily friend class \mbox{\hyperlink{class_plastic_skeleton_deformation}{Plastic\+Skeleton\+Deformation}}\hspace{0.3cm}{\ttfamily [friend]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/ext/plasticskeleton.\+h\item 
E\+:/opentoonz/toonz/sources/tnzext/plasticskeleton.\+cpp\end{DoxyCompactItemize}
