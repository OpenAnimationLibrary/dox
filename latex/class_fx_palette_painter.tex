\hypertarget{class_fx_palette_painter}{}\doxysection{Fx\+Palette\+Painter Class Reference}
\label{class_fx_palette_painter}\index{FxPalettePainter@{FxPalettePainter}}
Inheritance diagram for Fx\+Palette\+Painter\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_fx_palette_painter}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_fx_palette_painter_a6aaabf363de0a6419d1f9e727ad5a1cf}{Fx\+Palette\+Painter}} (\mbox{\hyperlink{class_fx_schematic_palette_node}{Fx\+Schematic\+Palette\+Node}} $\ast$parent, double width, double height, const QString \&name)
\item 
QRectF \mbox{\hyperlink{class_fx_palette_painter_a889aed34be76a84480e7f2b96d3a9657}{bounding\+Rect}} () const override
\item 
void \mbox{\hyperlink{class_fx_palette_painter_a9d73762d30ef1641521dbde6da539176}{paint}} (QPainter $\ast$painter, const QStyle\+Option\+Graphics\+Item $\ast$option, QWidget $\ast$widget=0) override
\item 
void \mbox{\hyperlink{class_fx_palette_painter_a82d50f77db5913b5a58925a46e47da93}{set\+Name}} (const QString \&name)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_fx_palette_painter_af88836311538fbf209699965c4f4c2c4}{context\+Menu\+Event}} (QGraphics\+Scene\+Context\+Menu\+Event $\ast$cme) override
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_fx_palette_painter_a6aaabf363de0a6419d1f9e727ad5a1cf}\label{class_fx_palette_painter_a6aaabf363de0a6419d1f9e727ad5a1cf}} 
\index{FxPalettePainter@{FxPalettePainter}!FxPalettePainter@{FxPalettePainter}}
\index{FxPalettePainter@{FxPalettePainter}!FxPalettePainter@{FxPalettePainter}}
\doxysubsubsection{\texorpdfstring{FxPalettePainter()}{FxPalettePainter()}}
{\footnotesize\ttfamily Fx\+Palette\+Painter\+::\+Fx\+Palette\+Painter (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_fx_schematic_palette_node}{Fx\+Schematic\+Palette\+Node}} $\ast$}]{parent,  }\item[{double}]{width,  }\item[{double}]{height,  }\item[{const QString \&}]{name }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00389     : QGraphicsItem(parent)}
\DoxyCodeLine{00390     , m\_parent(parent)}
\DoxyCodeLine{00391     , m\_name(name)}
\DoxyCodeLine{00392     , m\_width(width)}
\DoxyCodeLine{00393     , m\_height(height) \{}
\DoxyCodeLine{00394   setFlag(QGraphicsItem::ItemIsMovable, \textcolor{keyword}{false});}
\DoxyCodeLine{00395   setFlag(QGraphicsItem::ItemIsSelectable, \textcolor{keyword}{false});}
\DoxyCodeLine{00396   setFlag(QGraphicsItem::ItemIsFocusable, \textcolor{keyword}{false});}
\DoxyCodeLine{00397 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_palette_painter_a5c3584c242bcd032b1e7b87aee1e1290}\label{class_fx_palette_painter_a5c3584c242bcd032b1e7b87aee1e1290}} 
\index{FxPalettePainter@{FxPalettePainter}!````~FxPalettePainter@{$\sim$FxPalettePainter}}
\index{````~FxPalettePainter@{$\sim$FxPalettePainter}!FxPalettePainter@{FxPalettePainter}}
\doxysubsubsection{\texorpdfstring{$\sim$FxPalettePainter()}{~FxPalettePainter()}}
{\footnotesize\ttfamily Fx\+Palette\+Painter\+::$\sim$\+Fx\+Palette\+Painter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00401 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_fx_palette_painter_a889aed34be76a84480e7f2b96d3a9657}\label{class_fx_palette_painter_a889aed34be76a84480e7f2b96d3a9657}} 
\index{FxPalettePainter@{FxPalettePainter}!boundingRect@{boundingRect}}
\index{boundingRect@{boundingRect}!FxPalettePainter@{FxPalettePainter}}
\doxysubsubsection{\texorpdfstring{boundingRect()}{boundingRect()}}
{\footnotesize\ttfamily QRectF Fx\+Palette\+Painter\+::bounding\+Rect (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00405                                             \{}
\DoxyCodeLine{00406   \textcolor{keywordflow}{return} QRectF(-\/5, -\/5, m\_width + 10, m\_height + 10);}
\DoxyCodeLine{00407 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_palette_painter_af88836311538fbf209699965c4f4c2c4}\label{class_fx_palette_painter_af88836311538fbf209699965c4f4c2c4}} 
\index{FxPalettePainter@{FxPalettePainter}!contextMenuEvent@{contextMenuEvent}}
\index{contextMenuEvent@{contextMenuEvent}!FxPalettePainter@{FxPalettePainter}}
\doxysubsubsection{\texorpdfstring{contextMenuEvent()}{contextMenuEvent()}}
{\footnotesize\ttfamily void Fx\+Palette\+Painter\+::context\+Menu\+Event (\begin{DoxyParamCaption}\item[{QGraphics\+Scene\+Context\+Menu\+Event $\ast$}]{cme }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00478                                                                            \{}
\DoxyCodeLine{00479   \mbox{\hyperlink{class_fx_schematic_scene}{FxSchematicScene}} *fxScene = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_fx_schematic_scene}{FxSchematicScene}} *\textcolor{keyword}{>}(scene());}
\DoxyCodeLine{00480   QMenu menu(fxScene-\/>views()[0]);}
\DoxyCodeLine{00481 }
\DoxyCodeLine{00482   QAction *disconnectFromXSheet =}
\DoxyCodeLine{00483       \textcolor{keyword}{new} QAction(tr(\textcolor{stringliteral}{"{}\&Disconnect from Xsheet"{}}), \&menu);}
\DoxyCodeLine{00484   connect(disconnectFromXSheet, SIGNAL(triggered()), fxScene,}
\DoxyCodeLine{00485           SLOT(onDisconnectFromXSheet()));}
\DoxyCodeLine{00486 }
\DoxyCodeLine{00487   QAction *connectToXSheet = \textcolor{keyword}{new} QAction(tr(\textcolor{stringliteral}{"{}\&Connect to Xsheet"{}}), \&menu);}
\DoxyCodeLine{00488   connect(connectToXSheet, SIGNAL(triggered()), fxScene,}
\DoxyCodeLine{00489           SLOT(onConnectToXSheet()));}
\DoxyCodeLine{00490 }
\DoxyCodeLine{00491   QAction *preview = \textcolor{keyword}{new} QAction(tr(\textcolor{stringliteral}{"{}\&Preview"{}}), \&menu);}
\DoxyCodeLine{00492   connect(preview, SIGNAL(triggered()), fxScene, SLOT(onPreview()));}
\DoxyCodeLine{00493 }
\DoxyCodeLine{00494   QAction *collapse = CommandManager::instance()-\/>getAction(\textcolor{stringliteral}{"{}MI\_Collapse"{}});}
\DoxyCodeLine{00495 }
\DoxyCodeLine{00496   QAction *group = CommandManager::instance()-\/>getAction(\textcolor{stringliteral}{"{}MI\_Group"{}});}
\DoxyCodeLine{00497 }
\DoxyCodeLine{00498   \textcolor{keywordtype}{bool} enebleInsertAction =}
\DoxyCodeLine{00499       !m\_parent-\/>getFx()-\/>getAttributes()-\/>isGrouped() ||}
\DoxyCodeLine{00500       m\_parent-\/>getFx()-\/>getAttributes()-\/>isGroupEditing();}
\DoxyCodeLine{00501 }
\DoxyCodeLine{00502   \textcolor{keywordflow}{if} (enebleInsertAction) \{}
\DoxyCodeLine{00503     \textcolor{keywordflow}{if} (fxScene-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_adc7c74cce346abf3699bb250eb17a9c2}{getFxDag}}()-\/>getTerminalFxs()-\/>containsFx(}
\DoxyCodeLine{00504             m\_parent-\/>getFx()))}
\DoxyCodeLine{00505       menu.addAction(disconnectFromXSheet);}
\DoxyCodeLine{00506     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00507       menu.addAction(connectToXSheet);}
\DoxyCodeLine{00508     menu.addAction(preview);}
\DoxyCodeLine{00509     menu.addSeparator();}
\DoxyCodeLine{00510     menu.addAction(collapse);}
\DoxyCodeLine{00511     menu.addSeparator();}
\DoxyCodeLine{00512   \}}
\DoxyCodeLine{00513   menu.addAction(group);}
\DoxyCodeLine{00514 }
\DoxyCodeLine{00515   menu.exec(cme-\/>screenPos());}
\DoxyCodeLine{00516 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_palette_painter_a9d73762d30ef1641521dbde6da539176}\label{class_fx_palette_painter_a9d73762d30ef1641521dbde6da539176}} 
\index{FxPalettePainter@{FxPalettePainter}!paint@{paint}}
\index{paint@{paint}!FxPalettePainter@{FxPalettePainter}}
\doxysubsubsection{\texorpdfstring{paint()}{paint()}}
{\footnotesize\ttfamily void Fx\+Palette\+Painter\+::paint (\begin{DoxyParamCaption}\item[{QPainter $\ast$}]{painter,  }\item[{const QStyle\+Option\+Graphics\+Item $\ast$}]{option,  }\item[{QWidget $\ast$}]{widget = {\ttfamily 0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}

draw the name only if it is not editing
\begin{DoxyCode}{0}
\DoxyCodeLine{00413                                               \{}
\DoxyCodeLine{00414   \mbox{\hyperlink{class_fx_schematic_scene}{FxSchematicScene}} *sceneFx = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_fx_schematic_scene}{FxSchematicScene}} *\textcolor{keyword}{>}(scene());}
\DoxyCodeLine{00415   \textcolor{keywordflow}{if} (!sceneFx) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00416 }
\DoxyCodeLine{00417   QPixmap palettePm = QPixmap(\textcolor{stringliteral}{"{}:Resources/schematic\_palette.png"{}});}
\DoxyCodeLine{00418 }
\DoxyCodeLine{00419   \textcolor{keywordtype}{int} alpha = 200;}
\DoxyCodeLine{00420 }
\DoxyCodeLine{00421   \mbox{\hyperlink{class_schematic_viewer}{SchematicViewer}} *viewer = sceneFx-\/>getSchematicViewer();}
\DoxyCodeLine{00422 }
\DoxyCodeLine{00423   painter-\/>setBrush(viewer-\/>getPaletteColumnColor());}
\DoxyCodeLine{00424 }
\DoxyCodeLine{00425   painter-\/>setPen(Qt::NoPen);}
\DoxyCodeLine{00426 }
\DoxyCodeLine{00427   \textcolor{keywordflow}{if} (m\_parent-\/>isNormalIconView())}
\DoxyCodeLine{00428     painter-\/>drawRoundRect(QRectF(0, 0, m\_width, m\_height), 35, 99);}
\DoxyCodeLine{00429   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00430     painter-\/>drawRoundRect(QRectF(0, 0, m\_width, m\_height), 10, 30);}
\DoxyCodeLine{00431 }
\DoxyCodeLine{00432   \textcolor{comment}{// draw icon}}
\DoxyCodeLine{00433   QRect paletteRect;}
\DoxyCodeLine{00434   QRectF idRect;}
\DoxyCodeLine{00435   QRectF palNameRect;}
\DoxyCodeLine{00436   \textcolor{keywordflow}{if} (m\_parent-\/>isNormalIconView()) \{}
\DoxyCodeLine{00437     paletteRect = QRect(-\/3, -\/1, 20, 16);}
\DoxyCodeLine{00438     idRect      = QRectF(18, 2, 54, 14);}
\DoxyCodeLine{00439     palNameRect = QRectF(18, 16, 54, 14);}
\DoxyCodeLine{00440   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00441     paletteRect = QRect(4, -\/6, 35, 28);}
\DoxyCodeLine{00442     idRect      = QRectF(25, 2, 49, 22);}
\DoxyCodeLine{00443     palNameRect = QRectF(4, 26, 78, 22);}
\DoxyCodeLine{00444 }
\DoxyCodeLine{00445     QFont fnt = painter-\/>font();}
\DoxyCodeLine{00446     fnt.setPixelSize(fnt.pixelSize() * 2);}
\DoxyCodeLine{00447     painter-\/>setFont(fnt);}
\DoxyCodeLine{00448   \}}
\DoxyCodeLine{00449 }
\DoxyCodeLine{00450   painter-\/>drawPixmap(paletteRect, palettePm);}
\DoxyCodeLine{00451 }
\DoxyCodeLine{00453   painter-\/>setPen(viewer-\/>getTextColor());}
\DoxyCodeLine{00454 }
\DoxyCodeLine{00455   \textcolor{keywordflow}{if} (!m\_parent-\/>isNameEditing()) \{}
\DoxyCodeLine{00456     \textcolor{keywordflow}{if} (sceneFx-\/>getCurrentFx() == m\_parent-\/>getFx())}
\DoxyCodeLine{00457       painter-\/>setPen(viewer-\/>getSelectedNodeTextColor());}
\DoxyCodeLine{00458 }
\DoxyCodeLine{00459     \textcolor{keywordtype}{int} w = idRect.width();}
\DoxyCodeLine{00460 }
\DoxyCodeLine{00461     \textcolor{keywordflow}{if} (m\_parent-\/>isNormalIconView()) \{}
\DoxyCodeLine{00462       QString elidedName = elideText(m\_name, painter-\/>font(), w);}
\DoxyCodeLine{00463       painter-\/>drawText(idRect, Qt::AlignLeft | Qt::AlignVCenter, elidedName);}
\DoxyCodeLine{00464     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00465       painter-\/>drawText(idRect, Qt::AlignRight | Qt::AlignVCenter,}
\DoxyCodeLine{00466                         QString::number(m\_parent-\/>getColumnIndex() + 1));}
\DoxyCodeLine{00467   \}}
\DoxyCodeLine{00468 }
\DoxyCodeLine{00469   \textcolor{comment}{// level name}}
\DoxyCodeLine{00470   QString paletteName = m\_parent-\/>getPaletteName();}
\DoxyCodeLine{00471   QString elidedName =}
\DoxyCodeLine{00472       elideText(paletteName, painter-\/>font(), palNameRect.width());}
\DoxyCodeLine{00473   painter-\/>drawText(palNameRect, Qt::AlignLeft | Qt::AlignVCenter, elidedName);}
\DoxyCodeLine{00474 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_palette_painter_a82d50f77db5913b5a58925a46e47da93}\label{class_fx_palette_painter_a82d50f77db5913b5a58925a46e47da93}} 
\index{FxPalettePainter@{FxPalettePainter}!setName@{setName}}
\index{setName@{setName}!FxPalettePainter@{FxPalettePainter}}
\doxysubsubsection{\texorpdfstring{setName()}{setName()}}
{\footnotesize\ttfamily void Fx\+Palette\+Painter\+::set\+Name (\begin{DoxyParamCaption}\item[{const QString \&}]{name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00087 \{ m\_name = name; \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonzqt/fxschematicnode.\+h\item 
E\+:/opentoonz/toonz/sources/toonzqt/fxschematicnode.\+cpp\end{DoxyCompactItemize}
