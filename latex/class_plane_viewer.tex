\hypertarget{class_plane_viewer}{}\doxysection{Plane\+Viewer Class Reference}
\label{class_plane_viewer}\index{PlaneViewer@{PlaneViewer}}


The \mbox{\hyperlink{class_plane_viewer}{Plane\+Viewer}} class implements a basic Open\+GL widget showing a plane in a standard top-\/down view, and supports image drawing from the Toonz images API.  




{\ttfamily \#include $<$planeviewer.\+h$>$}

Inheritance diagram for Plane\+Viewer\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=9.655172cm]{class_plane_viewer}
\end{center}
\end{figure}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_plane_viewer_a40ebd0ae3128dcf381f7a7bc2fce234a}{reset\+View}} ()
\item 
void \mbox{\hyperlink{class_plane_viewer_a01318f3869d960e2c5a48c89493c28a4}{fit\+View}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_plane_viewer_afc88094c8a8db832563cdd3251d658df}{Plane\+Viewer}} (QWidget $\ast$parent)
\item 
void \mbox{\hyperlink{class_plane_viewer_ac869d766f32ee98347ec358aaba43a44}{set\+Bg\+Color}} (const TPixel32 \&color1, const TPixel32 \&color2)
\item 
void \mbox{\hyperlink{class_plane_viewer_af27fb929b9605797e6e4cf117b7288c6}{get\+Bg\+Color}} (TPixel32 \&color1, TPixel32 \&color2) const
\item 
\mbox{\Hypertarget{class_plane_viewer_a57d958a5065ccfbab00255d4bba27799}\label{class_plane_viewer_a57d958a5065ccfbab00255d4bba27799}} 
void {\bfseries set\+Chess\+Size} (double size)
\item 
void \mbox{\hyperlink{class_plane_viewer_a9f1247111dc3f68d0b0e4cd56aea743d}{draw\+Background}} ()
\item 
void \mbox{\hyperlink{class_plane_viewer_a7e4aee48fb2ff89c6681480c42adff75}{draw}} (\mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} ras, double dpiX, double dpiY, \mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$palette=0)
\item 
void \mbox{\hyperlink{class_plane_viewer_a4109a2e7d8bc3a08f28a3431bea0cfed}{draw}} (\mbox{\hyperlink{class_t_raster_image_p}{TRaster\+ImageP}} ri)
\item 
void \mbox{\hyperlink{class_plane_viewer_aa4ad90f91e4b8cefafe695eb58e47663}{draw}} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonz\+ImageP}} ti)
\item 
void \mbox{\hyperlink{class_plane_viewer_a707bb18f865b1106b930191ed40e39b0}{draw}} (\mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} vi)
\item 
void \mbox{\hyperlink{class_plane_viewer_a1d8ad8fedf5ede2706c7ee2b58483a32}{draw}} (\mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img)
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_plane_viewer_a9c4d39690ba6f65c9ea10d872cd174d6}{win\+To\+World}} (int x, int y)
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_plane_viewer_ad583f9059f39b58e37dc8e035746bea7}{world\+To\+Win}} (double x, double y)
\item 
\mbox{\hyperlink{class_t_point_t}{TPoint}} \mbox{\hyperlink{class_plane_viewer_aed17f8368def3d02dc5b3845ed626632}{qt\+Win\+To\+Win}} (int x, int y)
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_plane_viewer_acc959e11c672ec6c1fd064cbce9647f3}{qt\+Win\+To\+World}} (int x, int y)
\item 
\mbox{\hyperlink{class_t_point_t}{TPoint}} \mbox{\hyperlink{class_plane_viewer_acac706ce61567f5f34e3ed8dd3e695d3}{win\+To\+Qt\+Win}} (int x, int y)
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_plane_viewer_aa0ca4954d9f2dbfdbf86baf0c481d382}{world\+To\+Qt\+Win}} (double x, double y)
\item 
void \mbox{\hyperlink{class_plane_viewer_ae0c4351f8aa90a454d2ed5843e52a719}{push\+GLWorld\+Coordinates}} ()
\item 
void \mbox{\hyperlink{class_plane_viewer_a32593e1b44071464b91c027a260263bb}{push\+GLWin\+Coordinates}} ()
\item 
void \mbox{\hyperlink{class_plane_viewer_a9cdd2791534f96ae0fe9d3399e834186}{pop\+GLCoordinates}} ()
\item 
\mbox{\hyperlink{class_t_affine}{TAffine}} \& \mbox{\hyperlink{class_plane_viewer_a363aab6df778dea718b1b27fa749cc04}{view\+Aff}} ()
\item 
const \mbox{\hyperlink{class_t_affine}{TAffine}} \& \mbox{\hyperlink{class_plane_viewer_a9ff07fe7944196bf65b9062165612bac}{view\+Aff}} () const
\item 
void \mbox{\hyperlink{class_plane_viewer_a543d23166eda89159f61aaf51add2294}{zoom\+In}} ()
\item 
void \mbox{\hyperlink{class_plane_viewer_ac2d4af26b821af14aa1bf987093f05be}{zoom\+Out}} ()
\item 
void \mbox{\hyperlink{class_plane_viewer_a84baf84011c63832e67fbd2af9037684}{set\+View\+Pos}} (double x, double y)
\item 
void \mbox{\hyperlink{class_plane_viewer_a01bfa8fdf51e4ae34f640b9137ada1d3}{set\+View\+Zoom}} (double x, double y, double zoom)
\item 
void \mbox{\hyperlink{class_plane_viewer_a38a60da4024ec365ed16e0682551b3a0}{set\+View\+Zoom}} (double zoom)
\item 
void \mbox{\hyperlink{class_plane_viewer_aa4cf40176e5ebb7f07c873f4048f2467}{move\+View}} (double dx, double dy)
\item 
void \mbox{\hyperlink{class_plane_viewer_a80df779eb1db2c1ee2aa1bc0d6e5d7cf}{zoom\+View}} (double x, double y, double delta)
\item 
void \mbox{\hyperlink{class_plane_viewer_ae8f4553abd2c907939e2720425fa115f}{set\+Zoom\+Range}} (double zoom\+Min, double zoom\+Max)
\item 
\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} \mbox{\hyperlink{class_plane_viewer_a7ba95920c841d37a451dd10863666aba}{raster\+Buffer}} ()
\item 
void \mbox{\hyperlink{class_plane_viewer_a005d3ccf75ed25ad32b459c335855113}{flush\+Raster\+Buffer}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \mbox{\hyperlink{class_plane_viewer_ae1e0b53453c1bb9915a3102600cf8fc8}{context\+Menu\+Event}} (QContext\+Menu\+Event $\ast$event) override
\item 
virtual void \mbox{\hyperlink{class_plane_viewer_a734cdcbb8e4162921ec65db3a437a29d}{mouse\+Move\+Event}} (QMouse\+Event $\ast$event) override
\item 
virtual void \mbox{\hyperlink{class_plane_viewer_a32c104c598763bc5a4889bd6f7d86cb2}{mouse\+Press\+Event}} (QMouse\+Event $\ast$event) override
\item 
virtual void \mbox{\hyperlink{class_plane_viewer_a0ca6e41cbc9b84fb6785928bdd640670}{mouse\+Release\+Event}} (QMouse\+Event $\ast$event) override
\item 
virtual void \mbox{\hyperlink{class_plane_viewer_a48c83916061fff7e122d9030544d4f39}{wheel\+Event}} (QWheel\+Event $\ast$event) override
\item 
virtual void \mbox{\hyperlink{class_plane_viewer_a91dcb854415dc9c316d83f06cf04306a}{key\+Press\+Event}} (QKey\+Event $\ast$event) override
\item 
virtual void \mbox{\hyperlink{class_plane_viewer_ae1a918de4c409a8c1851e28e8c157396}{hide\+Event}} (QHide\+Event $\ast$event) override
\begin{DoxyCompactList}\small\item\em Disposes of the auxiliary internal raster\+Buffer(). \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_plane_viewer_a4ec43ef9456ed38f38a83c618f15ea10}{mouse\+Double\+Click\+Event}} (QMouse\+Event $\ast$event) override
\item 
virtual void \mbox{\hyperlink{class_plane_viewer_a63aa4684bb9a697b6bf993366ec59f92}{tablet\+Event}} (QTablet\+Event $\ast$e) override
\item 
void \mbox{\hyperlink{class_plane_viewer_a36c89621b12b0dcaefbfa781ae015958}{touch\+Event}} (QTouch\+Event $\ast$e, int type)
\item 
void \mbox{\hyperlink{class_plane_viewer_a80db58ac5adc96604f1b4421c1a3b5c8}{gesture\+Event}} (QGesture\+Event $\ast$e)
\item 
virtual bool \mbox{\hyperlink{class_plane_viewer_a7a1a5414e583af0760c0bf0de4b95e15}{event}} (QEvent $\ast$e) override
\item 
void \mbox{\hyperlink{class_plane_viewer_a7f2881bde22375362500cf4c74dff1c3}{initialize\+GL}} () override final
\item 
void \mbox{\hyperlink{class_plane_viewer_a4cca95068d4273f8ff078ba288339394}{resize\+GL}} (int width, int height) override final
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{class_plane_viewer_aebb1fc8c01c95edacb5db57a6e7509f5}{m\+\_\+xpos}}
\item 
int \mbox{\hyperlink{class_plane_viewer_a2be7acb8b17246792119805716211116}{m\+\_\+ypos}}
\begin{DoxyCompactList}\small\item\em Mouse position on mouse operations. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_affine}{TAffine}} \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\+\_\+aff}}
\begin{DoxyCompactList}\small\item\em Affine transform from world to widget coords. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\+\_\+bg\+ColorF}} \mbox{[}6\mbox{]}
\begin{DoxyCompactList}\small\item\em Widget bg color cast in the \mbox{[}0, 1\mbox{]} interval. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{class_plane_viewer_ad72ea0048d7a065c4f7a8794f15f3a3a}{m\+\_\+chess\+Size}}
\begin{DoxyCompactList}\small\item\em Size of the chessboard squares (default is 40). \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} \mbox{\hyperlink{class_plane_viewer_aca426a01b57be1799b6decaac6d839d5}{m\+\_\+raster\+Buffer}}
\item 
double \mbox{\hyperlink{class_plane_viewer_aba92386c2702dbd9b00f3c0dec0b859d}{m\+\_\+zoom\+Range}} \mbox{[}2\mbox{]}
\begin{DoxyCompactList}\small\item\em Viewport zoom range (default\+: \mbox{[}-\/1024, 1024\mbox{]}). \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_rect_t}{TRect}} \mbox{\hyperlink{class_plane_viewer_a0f335dccd3b1c7ba36c78b3e745f2632}{m\+\_\+image\+Bounds}}
\item 
double \mbox{\hyperlink{class_plane_viewer_a9f87231f7b1b491cb5fbbd61a669894b}{m\+\_\+dpiX}}
\item 
double \mbox{\hyperlink{class_plane_viewer_a76263dd3b41ee2ab6898fffaa29f8204}{m\+\_\+dpiY}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{class_plane_viewer}{Plane\+Viewer}} class implements a basic Open\+GL widget showing a plane in a standard top-\/down view, and supports image drawing from the Toonz images API. 

A \mbox{\hyperlink{class_plane_viewer}{Plane\+Viewer}} instance is designed to view bidimensional objects layed-\/out on a plane, providing standard mouse interaction functions and some built-\/in keyboard shortcuts to provide view navigation.

The class implements the necessary methods to draw objects on the plane -\/ prominently, functions to push both world and widget references for standard Open\+GL drawing, conversions between world and widget coordinates, and efficient image-\/drawing functions for all Toonz image types. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_plane_viewer_afc88094c8a8db832563cdd3251d658df}\label{class_plane_viewer_afc88094c8a8db832563cdd3251d658df}} 
\index{PlaneViewer@{PlaneViewer}!PlaneViewer@{PlaneViewer}}
\index{PlaneViewer@{PlaneViewer}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{PlaneViewer()}{PlaneViewer()}}
{\footnotesize\ttfamily Plane\+Viewer\+::\+Plane\+Viewer (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00071     : \mbox{\hyperlink{class_g_l_widget_for_high_dpi}{GLWidgetForHighDpi}}(parent)}
\DoxyCodeLine{00072     , m\_firstResize(\textcolor{keyword}{true})}
\DoxyCodeLine{00073     , m\_xpos(0)}
\DoxyCodeLine{00074     , \mbox{\hyperlink{class_plane_viewer_a2be7acb8b17246792119805716211116}{m\_ypos}}(0)}
\DoxyCodeLine{00075     , \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}()  \textcolor{comment}{// initialized at the first resize}}
\DoxyCodeLine{00076     , \mbox{\hyperlink{class_plane_viewer_ad72ea0048d7a065c4f7a8794f15f3a3a}{m\_chessSize}}(40.0)}
\DoxyCodeLine{00077     , m\_firstDraw(\textcolor{keyword}{true})}
\DoxyCodeLine{00078     , m\_dpiX(0.0)}
\DoxyCodeLine{00079     , m\_dpiY(0.0) \{}
\DoxyCodeLine{00080   \mbox{\hyperlink{class_plane_viewer_aba92386c2702dbd9b00f3c0dec0b859d}{m\_zoomRange}}[0] = 1e-\/3, \mbox{\hyperlink{class_plane_viewer_aba92386c2702dbd9b00f3c0dec0b859d}{m\_zoomRange}}[1] = 1024.0;}
\DoxyCodeLine{00081   setBgColor(TPixel32(235, 235, 235), TPixel32(235, 235, 235));}
\DoxyCodeLine{00082 }
\DoxyCodeLine{00083   setAttribute(Qt::WA\_AcceptTouchEvents);}
\DoxyCodeLine{00084   grabGesture(Qt::SwipeGesture);}
\DoxyCodeLine{00085   grabGesture(Qt::PanGesture);}
\DoxyCodeLine{00086   grabGesture(Qt::PinchGesture);}
\DoxyCodeLine{00087 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_plane_viewer_ae1e0b53453c1bb9915a3102600cf8fc8}\label{class_plane_viewer_ae1e0b53453c1bb9915a3102600cf8fc8}} 
\index{PlaneViewer@{PlaneViewer}!contextMenuEvent@{contextMenuEvent}}
\index{contextMenuEvent@{contextMenuEvent}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{contextMenuEvent()}{contextMenuEvent()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::context\+Menu\+Event (\begin{DoxyParamCaption}\item[{QContext\+Menu\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00300                                                            \{}
\DoxyCodeLine{00301   QMenu *menu = \textcolor{keyword}{new} QMenu(\textcolor{keyword}{this});}
\DoxyCodeLine{00302 }
\DoxyCodeLine{00303   QAction *reset = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Reset View"{}}));}
\DoxyCodeLine{00304   reset-\/>setShortcut(}
\DoxyCodeLine{00305       QKeySequence(CommandManager::instance()-\/>getKeyFromId(V\_ZoomReset)));}
\DoxyCodeLine{00306   connect(reset, SIGNAL(triggered()), SLOT(resetView()));}
\DoxyCodeLine{00307 }
\DoxyCodeLine{00308   QAction *fit = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Fit To Window"{}}));}
\DoxyCodeLine{00309   fit-\/>setShortcut(}
\DoxyCodeLine{00310       QKeySequence(CommandManager::instance()-\/>getKeyFromId(V\_ZoomFit)));}
\DoxyCodeLine{00311   connect(fit, SIGNAL(triggered()), SLOT(fitView()));}
\DoxyCodeLine{00312 }
\DoxyCodeLine{00313   menu-\/>exec(event-\/>globalPos());}
\DoxyCodeLine{00314 }
\DoxyCodeLine{00315   \textcolor{keyword}{delete} menu;}
\DoxyCodeLine{00316   update();}
\DoxyCodeLine{00317 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a1d8ad8fedf5ede2706c7ee2b58483a32}\label{class_plane_viewer_a1d8ad8fedf5ede2706c7ee2b58483a32}} 
\index{PlaneViewer@{PlaneViewer}!draw@{draw}}
\index{draw@{draw}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}\hspace{0.1cm}{\footnotesize\ttfamily [1/5]}}
{\footnotesize\ttfamily void Plane\+Viewer\+::draw (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}}]{img }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00691                                   \{}
\DoxyCodeLine{00692   \{}
\DoxyCodeLine{00693     \mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} ri(img);}
\DoxyCodeLine{00694     \textcolor{keywordflow}{if} (ri) \{}
\DoxyCodeLine{00695       draw(ri);}
\DoxyCodeLine{00696       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00697     \}}
\DoxyCodeLine{00698   \}}
\DoxyCodeLine{00699   \{}
\DoxyCodeLine{00700     \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti(img);}
\DoxyCodeLine{00701     \textcolor{keywordflow}{if} (ti) \{}
\DoxyCodeLine{00702       draw(ti);}
\DoxyCodeLine{00703       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00704     \}}
\DoxyCodeLine{00705   \}}
\DoxyCodeLine{00706   \{}
\DoxyCodeLine{00707     \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi(img);}
\DoxyCodeLine{00708     \textcolor{keywordflow}{if} (vi) \{}
\DoxyCodeLine{00709       draw(vi);}
\DoxyCodeLine{00710       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00711     \}}
\DoxyCodeLine{00712   \}}
\DoxyCodeLine{00713 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a4109a2e7d8bc3a08f28a3431bea0cfed}\label{class_plane_viewer_a4109a2e7d8bc3a08f28a3431bea0cfed}} 
\index{PlaneViewer@{PlaneViewer}!draw@{draw}}
\index{draw@{draw}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}\hspace{0.1cm}{\footnotesize\ttfamily [2/5]}}
{\footnotesize\ttfamily void Plane\+Viewer\+::draw (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_raster_image_p}{TRaster\+ImageP}}}]{ri }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00650                                        \{}
\DoxyCodeLine{00651   \textcolor{keywordtype}{double} dpiX, dpiY;}
\DoxyCodeLine{00652   ri-\/>getDpi(dpiX, dpiY);}
\DoxyCodeLine{00653 }
\DoxyCodeLine{00654   \textcolor{keywordflow}{if} (dpiX == 0.0 || dpiY == 0.0) dpiX = dpiY = \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}};}
\DoxyCodeLine{00655 }
\DoxyCodeLine{00656   draw(ri-\/>getRaster(), dpiX, dpiY);}
\DoxyCodeLine{00657 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a7e4aee48fb2ff89c6681480c42adff75}\label{class_plane_viewer_a7e4aee48fb2ff89c6681480c42adff75}} 
\index{PlaneViewer@{PlaneViewer}!draw@{draw}}
\index{draw@{draw}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}\hspace{0.1cm}{\footnotesize\ttfamily [3/5]}}
{\footnotesize\ttfamily void Plane\+Viewer\+::draw (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}}}]{ras,  }\item[{double}]{dpiX,  }\item[{double}]{dpiY,  }\item[{\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$}]{palette = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00607                                                                             \{}
\DoxyCodeLine{00608   \mbox{\hyperlink{class_t_point_t}{TPointD}} rasCenter(ras-\/>getCenterD());}
\DoxyCodeLine{00609 }
\DoxyCodeLine{00610   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} aux(rasterBuffer());}
\DoxyCodeLine{00611 }
\DoxyCodeLine{00612   m\_imageBounds = ras-\/>getBounds();}
\DoxyCodeLine{00613   \textcolor{keywordflow}{if} (m\_dpiX == 0.0 || m\_dpiY == 0.0) \{}
\DoxyCodeLine{00614     m\_dpiX = dpiX;}
\DoxyCodeLine{00615     m\_dpiY = dpiY;}
\DoxyCodeLine{00616   \}}
\DoxyCodeLine{00617   \textcolor{keywordflow}{if} (m\_firstDraw \&\& !m\_imageBounds.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \{}
\DoxyCodeLine{00618     m\_firstDraw = \textcolor{keyword}{false};}
\DoxyCodeLine{00619     fitView();}
\DoxyCodeLine{00620   \}}
\DoxyCodeLine{00621 }
\DoxyCodeLine{00622   aux-\/>lock();}
\DoxyCodeLine{00623   ras-\/>lock();}
\DoxyCodeLine{00624 }
\DoxyCodeLine{00625   glGetDoublev(GL\_MODELVIEW\_MATRIX, m\_matrix);}
\DoxyCodeLine{00626   \mbox{\hyperlink{class_t_affine}{TAffine}} viewAff(m\_matrix[0], m\_matrix[4], m\_matrix[12], m\_matrix[1],}
\DoxyCodeLine{00627                   m\_matrix[5], m\_matrix[13]);}
\DoxyCodeLine{00628   viewAff = viewAff * \mbox{\hyperlink{class_t_scale}{TScale}}(\mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}} / dpiX, \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}} / dpiY) *}
\DoxyCodeLine{00629             \mbox{\hyperlink{class_t_translation}{TTranslation}}(-\/rasCenter);}
\DoxyCodeLine{00630 }
\DoxyCodeLine{00631   pushGLWinCoordinates();}
\DoxyCodeLine{00632 }
\DoxyCodeLine{00633   aux-\/>clear();}
\DoxyCodeLine{00634   \textcolor{keywordflow}{if} (pal)}
\DoxyCodeLine{00635     \mbox{\hyperlink{namespace_t_rop_a1f6b04b4725e957a0d554e198e26a117}{TRop::quickPut}}(aux, (\mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}})ras, pal, viewAff);}
\DoxyCodeLine{00636   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00637     \mbox{\hyperlink{namespace_t_rop_a1f6b04b4725e957a0d554e198e26a117}{TRop::quickPut}}(aux, ras, viewAff);}
\DoxyCodeLine{00638 }
\DoxyCodeLine{00639   flushRasterBuffer();}
\DoxyCodeLine{00640   popGLCoordinates();}
\DoxyCodeLine{00641 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_aa4ad90f91e4b8cefafe695eb58e47663}\label{class_plane_viewer_aa4ad90f91e4b8cefafe695eb58e47663}} 
\index{PlaneViewer@{PlaneViewer}!draw@{draw}}
\index{draw@{draw}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}\hspace{0.1cm}{\footnotesize\ttfamily [4/5]}}
{\footnotesize\ttfamily void Plane\+Viewer\+::draw (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_toonz_image_p}{TToonz\+ImageP}}}]{ti }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00661                                       \{}
\DoxyCodeLine{00662   \textcolor{keywordtype}{double} dpiX, dpiY;}
\DoxyCodeLine{00663   ti-\/>getDpi(dpiX, dpiY);}
\DoxyCodeLine{00664 }
\DoxyCodeLine{00665   \textcolor{keywordflow}{if} (dpiX == 0.0 || dpiY == 0.0) dpiX = dpiY = \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}};}
\DoxyCodeLine{00666 }
\DoxyCodeLine{00667   draw(ti-\/>getRaster(), dpiX, dpiY, ti-\/>getPalette());}
\DoxyCodeLine{00668 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a707bb18f865b1106b930191ed40e39b0}\label{class_plane_viewer_a707bb18f865b1106b930191ed40e39b0}} 
\index{PlaneViewer@{PlaneViewer}!draw@{draw}}
\index{draw@{draw}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}\hspace{0.1cm}{\footnotesize\ttfamily [5/5]}}
{\footnotesize\ttfamily void Plane\+Viewer\+::draw (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}}}]{vi }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00672                                        \{}
\DoxyCodeLine{00673   \mbox{\hyperlink{class_t_rect_t}{TRectD}} bbox(vi-\/>getBBox());}
\DoxyCodeLine{00674   \mbox{\hyperlink{class_t_rect_t}{TRect}} bboxI(tfloor(bbox.x0), tfloor(bbox.y0), tceil(bbox.x1) -\/ 1,}
\DoxyCodeLine{00675               tceil(bbox.y1) -\/ 1);}
\DoxyCodeLine{00676   m\_imageBounds = bboxI;}
\DoxyCodeLine{00677   \textcolor{keywordflow}{if} (m\_dpiX == 0.0 || m\_dpiY == 0.0) \{}
\DoxyCodeLine{00678     m\_dpiX = \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}};}
\DoxyCodeLine{00679     m\_dpiY = \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}};}
\DoxyCodeLine{00680   \}}
\DoxyCodeLine{00681   \textcolor{keywordflow}{if} (m\_firstDraw) \{}
\DoxyCodeLine{00682     m\_firstDraw = \textcolor{keyword}{false};}
\DoxyCodeLine{00683     fitView();}
\DoxyCodeLine{00684   \}}
\DoxyCodeLine{00685   \mbox{\hyperlink{class_t_vector_render_data}{TVectorRenderData}} rd(\mbox{\hyperlink{class_t_affine}{TAffine}}(), bboxI, vi-\/>getPalette(), 0, \textcolor{keyword}{true}, \textcolor{keyword}{true});}
\DoxyCodeLine{00686   tglDraw(rd, vi.getPointer());}
\DoxyCodeLine{00687 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a9f1247111dc3f68d0b0e4cd56aea743d}\label{class_plane_viewer_a9f1247111dc3f68d0b0e4cd56aea743d}} 
\index{PlaneViewer@{PlaneViewer}!drawBackground@{drawBackground}}
\index{drawBackground@{drawBackground}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{drawBackground()}{drawBackground()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::draw\+Background (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00115                                  \{}
\DoxyCodeLine{00116   glClearColor(\mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[0], \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[1], \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[2], 1.0);}
\DoxyCodeLine{00117   glClear(GL\_COLOR\_BUFFER\_BIT);}
\DoxyCodeLine{00118 }
\DoxyCodeLine{00119   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[0] != \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[3] || \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[1] != \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[4] ||}
\DoxyCodeLine{00120       \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[2] != \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[5]) \{}
\DoxyCodeLine{00121     \textcolor{comment}{// Cast the widget rect to world rect}}
\DoxyCodeLine{00122     \mbox{\hyperlink{class_t_rect_t}{TRectD}} rect(winToWorld(0, 0), winToWorld(width(), height()));}
\DoxyCodeLine{00123 }
\DoxyCodeLine{00124     \textcolor{comment}{// Deduce chess geometry}}
\DoxyCodeLine{00125     \mbox{\hyperlink{class_t_rect_t}{TRect}} chessRect(tfloor(rect.x0 / \mbox{\hyperlink{class_plane_viewer_ad72ea0048d7a065c4f7a8794f15f3a3a}{m\_chessSize}}),}
\DoxyCodeLine{00126                     tfloor(rect.y0 / \mbox{\hyperlink{class_plane_viewer_ad72ea0048d7a065c4f7a8794f15f3a3a}{m\_chessSize}}), tceil(rect.x1 / \mbox{\hyperlink{class_plane_viewer_ad72ea0048d7a065c4f7a8794f15f3a3a}{m\_chessSize}}),}
\DoxyCodeLine{00127                     tceil(rect.y1 / \mbox{\hyperlink{class_plane_viewer_ad72ea0048d7a065c4f7a8794f15f3a3a}{m\_chessSize}}));}
\DoxyCodeLine{00128 }
\DoxyCodeLine{00129     \textcolor{comment}{// Draw chess squares}}
\DoxyCodeLine{00130     glColor3f(\mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[3], \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[4], \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[5]);}
\DoxyCodeLine{00131     glBegin(GL\_QUADS);}
\DoxyCodeLine{00132 }
\DoxyCodeLine{00133     \textcolor{keywordtype}{int} x, y;}
\DoxyCodeLine{00134     \mbox{\hyperlink{class_t_point_t}{TPointD}} pos;}
\DoxyCodeLine{00135     \textcolor{keywordtype}{double} chessSize2 = 2.0 * \mbox{\hyperlink{class_plane_viewer_ad72ea0048d7a065c4f7a8794f15f3a3a}{m\_chessSize}};}
\DoxyCodeLine{00136 }
\DoxyCodeLine{00137     \textcolor{keywordflow}{for} (y = chessRect.y0; y < chessRect.y1; ++y) \{}
\DoxyCodeLine{00138       pos.y = y * \mbox{\hyperlink{class_plane_viewer_ad72ea0048d7a065c4f7a8794f15f3a3a}{m\_chessSize}};}
\DoxyCodeLine{00139       \textcolor{keywordflow}{for} (x = chessRect.x0 + ((chessRect.x0 + y) \% 2), pos.x = x * \mbox{\hyperlink{class_plane_viewer_ad72ea0048d7a065c4f7a8794f15f3a3a}{m\_chessSize}};}
\DoxyCodeLine{00140            x < chessRect.x1; x += 2, pos.x += chessSize2) \{}
\DoxyCodeLine{00141         glVertex2d(pos.x, pos.y);}
\DoxyCodeLine{00142         glVertex2d(pos.x + \mbox{\hyperlink{class_plane_viewer_ad72ea0048d7a065c4f7a8794f15f3a3a}{m\_chessSize}}, pos.y);}
\DoxyCodeLine{00143         glVertex2d(pos.x + \mbox{\hyperlink{class_plane_viewer_ad72ea0048d7a065c4f7a8794f15f3a3a}{m\_chessSize}}, pos.y + \mbox{\hyperlink{class_plane_viewer_ad72ea0048d7a065c4f7a8794f15f3a3a}{m\_chessSize}});}
\DoxyCodeLine{00144         glVertex2d(pos.x, pos.y + \mbox{\hyperlink{class_plane_viewer_ad72ea0048d7a065c4f7a8794f15f3a3a}{m\_chessSize}});}
\DoxyCodeLine{00145       \}}
\DoxyCodeLine{00146     \}}
\DoxyCodeLine{00147 }
\DoxyCodeLine{00148     glEnd();}
\DoxyCodeLine{00149   \}}
\DoxyCodeLine{00150 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a7a1a5414e583af0760c0bf0de4b95e15}\label{class_plane_viewer_a7a1a5414e583af0760c0bf0de4b95e15}} 
\index{PlaneViewer@{PlaneViewer}!event@{event}}
\index{event@{event}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{event()}{event()}}
{\footnotesize\ttfamily bool Plane\+Viewer\+::event (\begin{DoxyParamCaption}\item[{QEvent $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00435                                  \{}
\DoxyCodeLine{00436   \textcolor{comment}{/*}}
\DoxyCodeLine{00437 \textcolor{comment}{  switch (e-\/>type()) \{}}
\DoxyCodeLine{00438 \textcolor{comment}{  case QEvent::TabletPress: \{}}
\DoxyCodeLine{00439 \textcolor{comment}{  QTabletEvent *te = static\_cast<QTabletEvent *>(e);}}
\DoxyCodeLine{00440 \textcolor{comment}{  qDebug() << "{}[event] TabletPress: pointerType("{} << te-\/>pointerType()}}
\DoxyCodeLine{00441 \textcolor{comment}{  << "{}) device("{} << te-\/>device() << "{})"{};}}
\DoxyCodeLine{00442 \textcolor{comment}{  \} break;}}
\DoxyCodeLine{00443 \textcolor{comment}{  case QEvent::TabletRelease:}}
\DoxyCodeLine{00444 \textcolor{comment}{  qDebug() << "{}[event] TabletRelease"{};}}
\DoxyCodeLine{00445 \textcolor{comment}{  break;}}
\DoxyCodeLine{00446 \textcolor{comment}{  case QEvent::TouchBegin:}}
\DoxyCodeLine{00447 \textcolor{comment}{  qDebug() << "{}[event] TouchBegin"{};}}
\DoxyCodeLine{00448 \textcolor{comment}{  break;}}
\DoxyCodeLine{00449 \textcolor{comment}{  case QEvent::TouchEnd:}}
\DoxyCodeLine{00450 \textcolor{comment}{  qDebug() << "{}[event] TouchEnd"{};}}
\DoxyCodeLine{00451 \textcolor{comment}{  break;}}
\DoxyCodeLine{00452 \textcolor{comment}{  case QEvent::TouchCancel:}}
\DoxyCodeLine{00453 \textcolor{comment}{  qDebug() << "{}[event] TouchCancel"{};}}
\DoxyCodeLine{00454 \textcolor{comment}{  break;}}
\DoxyCodeLine{00455 \textcolor{comment}{  case QEvent::MouseButtonPress:}}
\DoxyCodeLine{00456 \textcolor{comment}{  qDebug() << "{}[event] MouseButtonPress"{};}}
\DoxyCodeLine{00457 \textcolor{comment}{  break;}}
\DoxyCodeLine{00458 \textcolor{comment}{  case QEvent::MouseButtonDblClick:}}
\DoxyCodeLine{00459 \textcolor{comment}{  qDebug() << "{}[event] MouseButtonDblClick"{};}}
\DoxyCodeLine{00460 \textcolor{comment}{  break;}}
\DoxyCodeLine{00461 \textcolor{comment}{  case QEvent::MouseButtonRelease:}}
\DoxyCodeLine{00462 \textcolor{comment}{  qDebug() << "{}[event] MouseButtonRelease"{};}}
\DoxyCodeLine{00463 \textcolor{comment}{  break;}}
\DoxyCodeLine{00464 \textcolor{comment}{  case QEvent::Gesture:}}
\DoxyCodeLine{00465 \textcolor{comment}{  qDebug() << "{}[event] Gesture"{};}}
\DoxyCodeLine{00466 \textcolor{comment}{  break;}}
\DoxyCodeLine{00467 \textcolor{comment}{  default:}}
\DoxyCodeLine{00468 \textcolor{comment}{  break;}}
\DoxyCodeLine{00469 \textcolor{comment}{  \}}}
\DoxyCodeLine{00470 \textcolor{comment}{  */}}
\DoxyCodeLine{00471 }
\DoxyCodeLine{00472   \textcolor{keywordflow}{if} (e-\/>type() == QEvent::Gesture \&\&}
\DoxyCodeLine{00473       CommandManager::instance()}
\DoxyCodeLine{00474           -\/>getAction(MI\_TouchGestureControl)}
\DoxyCodeLine{00475           -\/>isChecked()) \{}
\DoxyCodeLine{00476     gestureEvent(\textcolor{keyword}{static\_cast<}QGestureEvent *\textcolor{keyword}{>}(e));}
\DoxyCodeLine{00477     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00478   \}}
\DoxyCodeLine{00479   \textcolor{keywordflow}{if} ((e-\/>type() == QEvent::TouchBegin || e-\/>type() == QEvent::TouchEnd ||}
\DoxyCodeLine{00480        e-\/>type() == QEvent::TouchCancel || e-\/>type() == QEvent::TouchUpdate) \&\&}
\DoxyCodeLine{00481       CommandManager::instance()}
\DoxyCodeLine{00482           -\/>getAction(MI\_TouchGestureControl)}
\DoxyCodeLine{00483           -\/>isChecked()) \{}
\DoxyCodeLine{00484     touchEvent(\textcolor{keyword}{static\_cast<}QTouchEvent *\textcolor{keyword}{>}(e), e-\/>type());}
\DoxyCodeLine{00485     m\_gestureActive = \textcolor{keyword}{true};}
\DoxyCodeLine{00486     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00487   \}}
\DoxyCodeLine{00488   \textcolor{keywordflow}{return} GLWidgetForHighDpi::event(e);}
\DoxyCodeLine{00489 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a01318f3869d960e2c5a48c89493c28a4}\label{class_plane_viewer_a01318f3869d960e2c5a48c89493c28a4}} 
\index{PlaneViewer@{PlaneViewer}!fitView@{fitView}}
\index{fitView@{fitView}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{fitView}{fitView}}
{\footnotesize\ttfamily void Plane\+Viewer\+::fit\+View (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00498                           \{}
\DoxyCodeLine{00499   \textcolor{keywordflow}{if} (m\_imageBounds.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00500   \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}} = \mbox{\hyperlink{class_t_translation}{TTranslation}}(0.5 * width(), 0.5 * height());}
\DoxyCodeLine{00501 }
\DoxyCodeLine{00502   \textcolor{keywordtype}{double} imageScale = std::min(width() / (\textcolor{keywordtype}{double})m\_imageBounds.getLx(),}
\DoxyCodeLine{00503                                height() / (\textcolor{keywordtype}{double})m\_imageBounds.getLy());}
\DoxyCodeLine{00504 }
\DoxyCodeLine{00505   \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}} = \mbox{\hyperlink{class_t_scale}{TScale}}(imageScale, imageScale);}
\DoxyCodeLine{00506   \textcolor{keywordflow}{if} (m\_dpiX != 0.0 \&\& m\_dpiY != 0.0)}
\DoxyCodeLine{00507     \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}} *= \mbox{\hyperlink{class_t_scale}{TScale}}(m\_dpiX / \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}}, m\_dpiY / \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}});}
\DoxyCodeLine{00508   \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a13 = 0.5 * width();}
\DoxyCodeLine{00509   \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a23 = 0.5 * height();}
\DoxyCodeLine{00510 }
\DoxyCodeLine{00511   update();}
\DoxyCodeLine{00512 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a005d3ccf75ed25ad32b459c335855113}\label{class_plane_viewer_a005d3ccf75ed25ad32b459c335855113}} 
\index{PlaneViewer@{PlaneViewer}!flushRasterBuffer@{flushRasterBuffer}}
\index{flushRasterBuffer@{flushRasterBuffer}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{flushRasterBuffer()}{flushRasterBuffer()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::flush\+Raster\+Buffer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00596                                     \{}
\DoxyCodeLine{00597   assert(\mbox{\hyperlink{class_plane_viewer_aca426a01b57be1799b6decaac6d839d5}{m\_rasterBuffer}});}
\DoxyCodeLine{00598 }
\DoxyCodeLine{00599   glPixelStorei(GL\_UNPACK\_ROW\_LENGTH, 0);}
\DoxyCodeLine{00600   glRasterPos2d(0, 0);}
\DoxyCodeLine{00601   glDrawPixels(width(), height(), TGL\_FMT, TGL\_TYPE,}
\DoxyCodeLine{00602                \mbox{\hyperlink{class_plane_viewer_aca426a01b57be1799b6decaac6d839d5}{m\_rasterBuffer}}-\/>getRawData());}
\DoxyCodeLine{00603 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a80db58ac5adc96604f1b4421c1a3b5c8}\label{class_plane_viewer_a80db58ac5adc96604f1b4421c1a3b5c8}} 
\index{PlaneViewer@{PlaneViewer}!gestureEvent@{gestureEvent}}
\index{gestureEvent@{gestureEvent}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{gestureEvent()}{gestureEvent()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::gesture\+Event (\begin{DoxyParamCaption}\item[{QGesture\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00334                                                \{}
\DoxyCodeLine{00335   \textcolor{comment}{// qDebug() << "{}[gestureEvent]"{};}}
\DoxyCodeLine{00336   m\_gestureActive = \textcolor{keyword}{false};}
\DoxyCodeLine{00337   \textcolor{keywordflow}{if} (QGesture *swipe = e-\/>gesture(Qt::SwipeGesture)) \{}
\DoxyCodeLine{00338     m\_gestureActive = \textcolor{keyword}{true};}
\DoxyCodeLine{00339   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (QGesture *pan = e-\/>gesture(Qt::PanGesture)) \{}
\DoxyCodeLine{00340     m\_gestureActive = \textcolor{keyword}{true};}
\DoxyCodeLine{00341   \}}
\DoxyCodeLine{00342   \textcolor{keywordflow}{if} (QGesture *pinch = e-\/>gesture(Qt::PinchGesture)) \{}
\DoxyCodeLine{00343     QPinchGesture *gesture = \textcolor{keyword}{static\_cast<}QPinchGesture *\textcolor{keyword}{>}(pinch);}
\DoxyCodeLine{00344     QPinchGesture::ChangeFlags changeFlags = gesture-\/>changeFlags();}
\DoxyCodeLine{00345     QPoint firstCenter                     = gesture-\/>centerPoint().toPoint();}
\DoxyCodeLine{00346     \textcolor{keywordflow}{if} (m\_touchDevice == QTouchDevice::TouchScreen)}
\DoxyCodeLine{00347       firstCenter = mapFromGlobal(firstCenter);}
\DoxyCodeLine{00348 }
\DoxyCodeLine{00349     \textcolor{keywordflow}{if} (gesture-\/>state() == Qt::GestureStarted) \{}
\DoxyCodeLine{00350       m\_gestureActive = \textcolor{keyword}{true};}
\DoxyCodeLine{00351     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (gesture-\/>state() == Qt::GestureFinished) \{}
\DoxyCodeLine{00352       m\_gestureActive = \textcolor{keyword}{false};}
\DoxyCodeLine{00353       m\_zooming       = \textcolor{keyword}{false};}
\DoxyCodeLine{00354       m\_scaleFactor   = 0.0;}
\DoxyCodeLine{00355     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00356       \textcolor{keywordflow}{if} (changeFlags \& QPinchGesture::ScaleFactorChanged) \{}
\DoxyCodeLine{00357         \textcolor{keywordtype}{double} scaleFactor = gesture-\/>scaleFactor();}
\DoxyCodeLine{00358         \textcolor{comment}{// the scale factor makes for too sensitive scaling}}
\DoxyCodeLine{00359         \textcolor{comment}{// divide the change in half}}
\DoxyCodeLine{00360         \textcolor{keywordflow}{if} (scaleFactor > 1) \{}
\DoxyCodeLine{00361           \textcolor{keywordtype}{double} decimalValue = scaleFactor -\/ 1;}
\DoxyCodeLine{00362           decimalValue /= 1.5;}
\DoxyCodeLine{00363           scaleFactor = 1 + decimalValue;}
\DoxyCodeLine{00364         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (scaleFactor < 1) \{}
\DoxyCodeLine{00365           \textcolor{keywordtype}{double} decimalValue = 1 -\/ scaleFactor;}
\DoxyCodeLine{00366           decimalValue /= 1.5;}
\DoxyCodeLine{00367           scaleFactor = 1 -\/ decimalValue;}
\DoxyCodeLine{00368         \}}
\DoxyCodeLine{00369         \textcolor{keywordflow}{if} (!m\_zooming) \{}
\DoxyCodeLine{00370           \textcolor{keywordtype}{double} delta = scaleFactor -\/ 1;}
\DoxyCodeLine{00371           m\_scaleFactor += delta;}
\DoxyCodeLine{00372           \textcolor{keywordflow}{if} (m\_scaleFactor > .2 || m\_scaleFactor < -\/.2) \{}
\DoxyCodeLine{00373             m\_zooming = \textcolor{keyword}{true};}
\DoxyCodeLine{00374           \}}
\DoxyCodeLine{00375         \}}
\DoxyCodeLine{00376         \textcolor{keywordflow}{if} (m\_zooming) \{}
\DoxyCodeLine{00377           zoomView(firstCenter.x() * getDevPixRatio(),}
\DoxyCodeLine{00378                    firstCenter.y() * getDevPixRatio(), scaleFactor);}
\DoxyCodeLine{00379           m\_panning = \textcolor{keyword}{false};}
\DoxyCodeLine{00380         \}}
\DoxyCodeLine{00381         m\_gestureActive = \textcolor{keyword}{true};}
\DoxyCodeLine{00382       \}}
\DoxyCodeLine{00383 }
\DoxyCodeLine{00384       \textcolor{keywordflow}{if} (changeFlags \& QPinchGesture::CenterPointChanged) \{}
\DoxyCodeLine{00385         QPointF centerDelta = (gesture-\/>centerPoint() * getDevPixRatio()) -\/}
\DoxyCodeLine{00386                               (gesture-\/>lastCenterPoint() * getDevPixRatio());}
\DoxyCodeLine{00387         \textcolor{keywordflow}{if} (centerDelta.manhattanLength() > 1) \{}
\DoxyCodeLine{00388           \textcolor{comment}{// panQt(centerDelta.toPoint());}}
\DoxyCodeLine{00389         \}}
\DoxyCodeLine{00390         m\_gestureActive = \textcolor{keyword}{true};}
\DoxyCodeLine{00391       \}}
\DoxyCodeLine{00392     \}}
\DoxyCodeLine{00393   \}}
\DoxyCodeLine{00394   e-\/>accept();}
\DoxyCodeLine{00395 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_af27fb929b9605797e6e4cf117b7288c6}\label{class_plane_viewer_af27fb929b9605797e6e4cf117b7288c6}} 
\index{PlaneViewer@{PlaneViewer}!getBgColor@{getBgColor}}
\index{getBgColor@{getBgColor}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{getBgColor()}{getBgColor()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::get\+Bg\+Color (\begin{DoxyParamCaption}\item[{TPixel32 \&}]{color1,  }\item[{TPixel32 \&}]{color2 }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00106                                                                      \{}
\DoxyCodeLine{00107   color1.r = \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[0] * 255.0, color1.g = \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[1] * 255.0,}
\DoxyCodeLine{00108   color1.b = \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[2] * 255.0;}
\DoxyCodeLine{00109   color2.r = \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[3] * 255.0, color2.g = \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[4] * 255.0,}
\DoxyCodeLine{00110   color2.b = \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[5] * 255.0;}
\DoxyCodeLine{00111 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_ae1a918de4c409a8c1851e28e8c157396}\label{class_plane_viewer_ae1a918de4c409a8c1851e28e8c157396}} 
\index{PlaneViewer@{PlaneViewer}!hideEvent@{hideEvent}}
\index{hideEvent@{hideEvent}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{hideEvent()}{hideEvent()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::hide\+Event (\begin{DoxyParamCaption}\item[{QHide\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Disposes of the auxiliary internal raster\+Buffer(). 


\begin{DoxyCode}{0}
\DoxyCodeLine{00292                                              \{}
\DoxyCodeLine{00293   \mbox{\hyperlink{class_plane_viewer_aca426a01b57be1799b6decaac6d839d5}{m\_rasterBuffer}} = \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}();}
\DoxyCodeLine{00294   m\_dpiX         = 0.0;  \textcolor{comment}{// reset dpi}}
\DoxyCodeLine{00295   m\_dpiY         = 0.0;}
\DoxyCodeLine{00296 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00151}{m\+\_\+raster\+Buffer}}.

\mbox{\Hypertarget{class_plane_viewer_a7f2881bde22375362500cf4c74dff1c3}\label{class_plane_viewer_a7f2881bde22375362500cf4c74dff1c3}} 
\index{PlaneViewer@{PlaneViewer}!initializeGL@{initializeGL}}
\index{initializeGL@{initializeGL}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{initializeGL()}{initializeGL()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::initialize\+GL (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00154 \{ initializeOpenGLFunctions(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a91dcb854415dc9c316d83f06cf04306a}\label{class_plane_viewer_a91dcb854415dc9c316d83f06cf04306a}} 
\index{PlaneViewer@{PlaneViewer}!keyPressEvent@{keyPressEvent}}
\index{keyPressEvent@{keyPressEvent}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{keyPressEvent()}{keyPressEvent()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::key\+Press\+Event (\begin{DoxyParamCaption}\item[{QKey\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00283                                                 \{}
\DoxyCodeLine{00284   \textcolor{keywordflow}{if} (PlaneViewerZoomer(\textcolor{keyword}{this}).exec(event)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00285 }
\DoxyCodeLine{00286   QOpenGLWidget::keyPressEvent(event);}
\DoxyCodeLine{00287 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a4ec43ef9456ed38f38a83c618f15ea10}\label{class_plane_viewer_a4ec43ef9456ed38f38a83c618f15ea10}} 
\index{PlaneViewer@{PlaneViewer}!mouseDoubleClickEvent@{mouseDoubleClickEvent}}
\index{mouseDoubleClickEvent@{mouseDoubleClickEvent}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{mouseDoubleClickEvent()}{mouseDoubleClickEvent()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::mouse\+Double\+Click\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00213                                                           \{}
\DoxyCodeLine{00214   \textcolor{comment}{// qDebug() << "{}[mouseDoubleClickEvent]"{};}}
\DoxyCodeLine{00215   \textcolor{keywordflow}{if} (m\_gestureActive \&\& !m\_stylusUsed) \{}
\DoxyCodeLine{00216     m\_gestureActive = \textcolor{keyword}{false};}
\DoxyCodeLine{00217     fitView();}
\DoxyCodeLine{00218     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00219   \}}
\DoxyCodeLine{00220 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a734cdcbb8e4162921ec65db3a437a29d}\label{class_plane_viewer_a734cdcbb8e4162921ec65db3a437a29d}} 
\index{PlaneViewer@{PlaneViewer}!mouseMoveEvent@{mouseMoveEvent}}
\index{mouseMoveEvent@{mouseMoveEvent}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{mouseMoveEvent()}{mouseMoveEvent()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::mouse\+Move\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00185                                                    \{}
\DoxyCodeLine{00186   \textcolor{keywordflow}{if} (m\_gestureActive \&\& m\_touchDevice == QTouchDevice::TouchScreen \&\&}
\DoxyCodeLine{00187       !m\_stylusUsed) \{}
\DoxyCodeLine{00188     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00189   \}}
\DoxyCodeLine{00190 }
\DoxyCodeLine{00191   QPoint curPos = \textcolor{keyword}{event}-\/>pos() * getDevPixRatio();}
\DoxyCodeLine{00192   \textcolor{keywordflow}{if} (event-\/>buttons() \& Qt::MidButton)}
\DoxyCodeLine{00193     moveView(curPos.x() -\/ m\_xpos, height() -\/ curPos.y() -\/ \mbox{\hyperlink{class_plane_viewer_a2be7acb8b17246792119805716211116}{m\_ypos}});}
\DoxyCodeLine{00194 }
\DoxyCodeLine{00195   m\_xpos = curPos.x(), \mbox{\hyperlink{class_plane_viewer_a2be7acb8b17246792119805716211116}{m\_ypos}} = height() -\/ curPos.y();}
\DoxyCodeLine{00196 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a32c104c598763bc5a4889bd6f7d86cb2}\label{class_plane_viewer_a32c104c598763bc5a4889bd6f7d86cb2}} 
\index{PlaneViewer@{PlaneViewer}!mousePressEvent@{mousePressEvent}}
\index{mousePressEvent@{mousePressEvent}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{mousePressEvent()}{mousePressEvent()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::mouse\+Press\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00200                                                     \{}
\DoxyCodeLine{00201   \textcolor{comment}{// qDebug() << "{}[mousePressEvent]"{};}}
\DoxyCodeLine{00202   \textcolor{keywordflow}{if} (m\_gestureActive \&\& m\_touchDevice == QTouchDevice::TouchScreen \&\&}
\DoxyCodeLine{00203       !m\_stylusUsed) \{}
\DoxyCodeLine{00204     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00205   \}}
\DoxyCodeLine{00206 }
\DoxyCodeLine{00207   m\_xpos = \textcolor{keyword}{event}-\/>x() * getDevPixRatio();}
\DoxyCodeLine{00208   \mbox{\hyperlink{class_plane_viewer_a2be7acb8b17246792119805716211116}{m\_ypos}} = height() -\/ \textcolor{keyword}{event}-\/>y() * getDevPixRatio();}
\DoxyCodeLine{00209 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a0ca6e41cbc9b84fb6785928bdd640670}\label{class_plane_viewer_a0ca6e41cbc9b84fb6785928bdd640670}} 
\index{PlaneViewer@{PlaneViewer}!mouseReleaseEvent@{mouseReleaseEvent}}
\index{mouseReleaseEvent@{mouseReleaseEvent}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{mouseReleaseEvent()}{mouseReleaseEvent()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::mouse\+Release\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00224                                                       \{}
\DoxyCodeLine{00225   m\_gestureActive = \textcolor{keyword}{false};}
\DoxyCodeLine{00226   m\_zooming       = \textcolor{keyword}{false};}
\DoxyCodeLine{00227   m\_panning       = \textcolor{keyword}{false};}
\DoxyCodeLine{00228   m\_stylusUsed    = \textcolor{keyword}{false};}
\DoxyCodeLine{00229 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_aa4cf40176e5ebb7f07c873f4048f2467}\label{class_plane_viewer_aa4cf40176e5ebb7f07c873f4048f2467}} 
\index{PlaneViewer@{PlaneViewer}!moveView@{moveView}}
\index{moveView@{moveView}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{moveView()}{moveView()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::move\+View (\begin{DoxyParamCaption}\item[{double}]{dx,  }\item[{double}]{dy }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00126                                       \{}
\DoxyCodeLine{00127     setViewPos(\mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a13 + dx, \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a23 + dy);}
\DoxyCodeLine{00128   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a9cdd2791534f96ae0fe9d3399e834186}\label{class_plane_viewer_a9cdd2791534f96ae0fe9d3399e834186}} 
\index{PlaneViewer@{PlaneViewer}!popGLCoordinates@{popGLCoordinates}}
\index{popGLCoordinates@{popGLCoordinates}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{popGLCoordinates()}{popGLCoordinates()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::pop\+GLCoordinates (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00582 \{ glPopMatrix(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a32593e1b44071464b91c027a260263bb}\label{class_plane_viewer_a32593e1b44071464b91c027a260263bb}} 
\index{PlaneViewer@{PlaneViewer}!pushGLWinCoordinates@{pushGLWinCoordinates}}
\index{pushGLWinCoordinates@{pushGLWinCoordinates}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{pushGLWinCoordinates()}{pushGLWinCoordinates()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::push\+GLWin\+Coordinates (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00575                                        \{}
\DoxyCodeLine{00576   glPushMatrix();}
\DoxyCodeLine{00577   glLoadIdentity();}
\DoxyCodeLine{00578 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_ae0c4351f8aa90a454d2ed5843e52a719}\label{class_plane_viewer_ae0c4351f8aa90a454d2ed5843e52a719}} 
\index{PlaneViewer@{PlaneViewer}!pushGLWorldCoordinates@{pushGLWorldCoordinates}}
\index{pushGLWorldCoordinates@{pushGLWorldCoordinates}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{pushGLWorldCoordinates()}{pushGLWorldCoordinates()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::push\+GLWorld\+Coordinates (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00556                                          \{}
\DoxyCodeLine{00557   m\_matrix[0]  = \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a11;}
\DoxyCodeLine{00558   m\_matrix[4]  = \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a12;}
\DoxyCodeLine{00559   m\_matrix[12] = \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a13;}
\DoxyCodeLine{00560   m\_matrix[1]  = \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a21;}
\DoxyCodeLine{00561   m\_matrix[5]  = \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a22;}
\DoxyCodeLine{00562   m\_matrix[13] = \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a23;}
\DoxyCodeLine{00563 }
\DoxyCodeLine{00564   m\_matrix[2] = m\_matrix[3] = m\_matrix[6] = m\_matrix[7] = m\_matrix[8] =}
\DoxyCodeLine{00565       m\_matrix[9] = m\_matrix[10] = m\_matrix[11] = m\_matrix[14] = 0;}
\DoxyCodeLine{00566 }
\DoxyCodeLine{00567   m\_matrix[15] = 1.0;}
\DoxyCodeLine{00568 }
\DoxyCodeLine{00569   glPushMatrix();}
\DoxyCodeLine{00570   glLoadMatrixd(m\_matrix);  \textcolor{comment}{//(GLdouble*) \&m\_matrix}}
\DoxyCodeLine{00571 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_aed17f8368def3d02dc5b3845ed626632}\label{class_plane_viewer_aed17f8368def3d02dc5b3845ed626632}} 
\index{PlaneViewer@{PlaneViewer}!qtWinToWin@{qtWinToWin}}
\index{qtWinToWin@{qtWinToWin}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{qtWinToWin()}{qtWinToWin()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPoint}} Plane\+Viewer\+::qt\+Win\+To\+Win (\begin{DoxyParamCaption}\item[{int}]{x,  }\item[{int}]{y }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00098 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_point_t}{TPoint}}(x, height() -\/ y); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_acc959e11c672ec6c1fd064cbce9647f3}\label{class_plane_viewer_acc959e11c672ec6c1fd064cbce9647f3}} 
\index{PlaneViewer@{PlaneViewer}!qtWinToWorld@{qtWinToWorld}}
\index{qtWinToWorld@{qtWinToWorld}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{qtWinToWorld()}{qtWinToWorld()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Plane\+Viewer\+::qt\+Win\+To\+World (\begin{DoxyParamCaption}\item[{int}]{x,  }\item[{int}]{y }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00099                                      \{}
\DoxyCodeLine{00100     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.\mbox{\hyperlink{class_t_affine_a570529b96b1ec5abc711aaa9aac09ff9}{inv}}() * \mbox{\hyperlink{class_t_point_t}{TPointD}}(x, height() -\/ y);}
\DoxyCodeLine{00101   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a7ba95920c841d37a451dd10863666aba}\label{class_plane_viewer_a7ba95920c841d37a451dd10863666aba}} 
\index{PlaneViewer@{PlaneViewer}!rasterBuffer@{rasterBuffer}}
\index{rasterBuffer@{rasterBuffer}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{rasterBuffer()}{rasterBuffer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} Plane\+Viewer\+::raster\+Buffer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00586                                      \{}
\DoxyCodeLine{00587   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_plane_viewer_aca426a01b57be1799b6decaac6d839d5}{m\_rasterBuffer}} || \mbox{\hyperlink{class_plane_viewer_aca426a01b57be1799b6decaac6d839d5}{m\_rasterBuffer}}-\/>getLx() != width() ||}
\DoxyCodeLine{00588       \mbox{\hyperlink{class_plane_viewer_aca426a01b57be1799b6decaac6d839d5}{m\_rasterBuffer}}-\/>getLy() != height())}
\DoxyCodeLine{00589     \mbox{\hyperlink{class_plane_viewer_aca426a01b57be1799b6decaac6d839d5}{m\_rasterBuffer}} = \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}(width(), height());}
\DoxyCodeLine{00590 }
\DoxyCodeLine{00591   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_plane_viewer_aca426a01b57be1799b6decaac6d839d5}{m\_rasterBuffer}};}
\DoxyCodeLine{00592 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a40ebd0ae3128dcf381f7a7bc2fce234a}\label{class_plane_viewer_a40ebd0ae3128dcf381f7a7bc2fce234a}} 
\index{PlaneViewer@{PlaneViewer}!resetView@{resetView}}
\index{resetView@{resetView}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{resetView}{resetView}}
{\footnotesize\ttfamily void Plane\+Viewer\+::reset\+View (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00493                             \{}
\DoxyCodeLine{00494   \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}} = \mbox{\hyperlink{class_t_translation}{TTranslation}}(0.5 * width(), 0.5 * height());}
\DoxyCodeLine{00495   update();}
\DoxyCodeLine{00496 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a4cca95068d4273f8ff078ba288339394}\label{class_plane_viewer_a4cca95068d4273f8ff078ba288339394}} 
\index{PlaneViewer@{PlaneViewer}!resizeGL@{resizeGL}}
\index{resizeGL@{resizeGL}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{resizeGL()}{resizeGL()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::resize\+GL (\begin{DoxyParamCaption}\item[{int}]{width,  }\item[{int}]{height }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00156                                                 \{}
\DoxyCodeLine{00157   width *= getDevPixRatio();}
\DoxyCodeLine{00158   height *= getDevPixRatio();}
\DoxyCodeLine{00159   glViewport(0, 0, width, height);}
\DoxyCodeLine{00160 }
\DoxyCodeLine{00161   glMatrixMode(GL\_PROJECTION);}
\DoxyCodeLine{00162   glLoadIdentity();}
\DoxyCodeLine{00163   gluOrtho2D(0, width, 0, height);}
\DoxyCodeLine{00164 }
\DoxyCodeLine{00165   glMatrixMode(GL\_MODELVIEW);}
\DoxyCodeLine{00166   glLoadIdentity();}
\DoxyCodeLine{00167 }
\DoxyCodeLine{00168   \textcolor{keywordflow}{if} (m\_firstResize) \{}
\DoxyCodeLine{00169     m\_firstResize = \textcolor{keyword}{false};}
\DoxyCodeLine{00170     \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}         = \mbox{\hyperlink{class_t_translation}{TTranslation}}(0.5 * width, 0.5 * height);}
\DoxyCodeLine{00171     m\_width       = width;}
\DoxyCodeLine{00172     m\_height      = height;}
\DoxyCodeLine{00173   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00174     \mbox{\hyperlink{class_t_point_t}{TPointD}} oldCenter(m\_width * 0.5, m\_height * 0.5);}
\DoxyCodeLine{00175     \mbox{\hyperlink{class_t_point_t}{TPointD}} newCenter(width * 0.5, height * 0.5);}
\DoxyCodeLine{00176 }
\DoxyCodeLine{00177     \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}    = \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.\mbox{\hyperlink{class_t_affine_a5c556c5952cff649a61add494ff3423c}{place}}(\mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.\mbox{\hyperlink{class_t_affine_a570529b96b1ec5abc711aaa9aac09ff9}{inv}}() * oldCenter, newCenter);}
\DoxyCodeLine{00178     m\_width  = width;}
\DoxyCodeLine{00179     m\_height = height;}
\DoxyCodeLine{00180   \}}
\DoxyCodeLine{00181 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_ac869d766f32ee98347ec358aaba43a44}\label{class_plane_viewer_ac869d766f32ee98347ec358aaba43a44}} 
\index{PlaneViewer@{PlaneViewer}!setBgColor@{setBgColor}}
\index{setBgColor@{setBgColor}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{setBgColor()}{setBgColor()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::set\+Bg\+Color (\begin{DoxyParamCaption}\item[{const TPixel32 \&}]{color1,  }\item[{const TPixel32 \&}]{color2 }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00097                                                                            \{}
\DoxyCodeLine{00098   \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[0] = color1.r / 255.0, \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[1] = color1.g / 255.0,}
\DoxyCodeLine{00099   \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[2] = color1.b / 255.0;}
\DoxyCodeLine{00100   \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[3] = color2.r / 255.0, \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[4] = color2.g / 255.0,}
\DoxyCodeLine{00101   \mbox{\hyperlink{class_plane_viewer_a155ef4c28a1944052991e7a999371986}{m\_bgColorF}}[5] = color2.b / 255.0;}
\DoxyCodeLine{00102 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a84baf84011c63832e67fbd2af9037684}\label{class_plane_viewer_a84baf84011c63832e67fbd2af9037684}} 
\index{PlaneViewer@{PlaneViewer}!setViewPos@{setViewPos}}
\index{setViewPos@{setViewPos}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{setViewPos()}{setViewPos()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::set\+View\+Pos (\begin{DoxyParamCaption}\item[{double}]{x,  }\item[{double}]{y }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00516                                                \{}
\DoxyCodeLine{00517   \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a13 = x, \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a23 = y;}
\DoxyCodeLine{00518   update();}
\DoxyCodeLine{00519 }
\DoxyCodeLine{00520 \textcolor{preprocessor}{\#ifdef PRINT\_AFF}}
\DoxyCodeLine{00521   qDebug(\textcolor{stringliteral}{"{}zoom = \%.4f;  pos = \%.4f, \%.4f"{}}, \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a11, \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a13, \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a23);}
\DoxyCodeLine{00522 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00523 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a01bfa8fdf51e4ae34f640b9137ada1d3}\label{class_plane_viewer_a01bfa8fdf51e4ae34f640b9137ada1d3}} 
\index{PlaneViewer@{PlaneViewer}!setViewZoom@{setViewZoom}}
\index{setViewZoom@{setViewZoom}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{setViewZoom()}{setViewZoom()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Plane\+Viewer\+::set\+View\+Zoom (\begin{DoxyParamCaption}\item[{double}]{x,  }\item[{double}]{y,  }\item[{double}]{zoom }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00527                                                              \{}
\DoxyCodeLine{00528   zoom         = tcrop(zoom, \mbox{\hyperlink{class_plane_viewer_aba92386c2702dbd9b00f3c0dec0b859d}{m\_zoomRange}}[0], \mbox{\hyperlink{class_plane_viewer_aba92386c2702dbd9b00f3c0dec0b859d}{m\_zoomRange}}[1]);}
\DoxyCodeLine{00529   \textcolor{keywordtype}{double} delta = zoom / \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a11;}
\DoxyCodeLine{00530 }
\DoxyCodeLine{00531   \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a13 = x + delta * (\mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a13 -\/ x);}
\DoxyCodeLine{00532   \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a23 = y + delta * (\mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a23 -\/ y);}
\DoxyCodeLine{00533   \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a11 = \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a22 = zoom;}
\DoxyCodeLine{00534 }
\DoxyCodeLine{00535   update();}
\DoxyCodeLine{00536 }
\DoxyCodeLine{00537 \textcolor{preprocessor}{\#ifdef PRINT\_AFF}}
\DoxyCodeLine{00538   qDebug(\textcolor{stringliteral}{"{}zoom = \%.4f;  pos = \%.4f, \%.4f"{}}, \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a11, \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a13, \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a23);}
\DoxyCodeLine{00539 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00540 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a38a60da4024ec365ed16e0682551b3a0}\label{class_plane_viewer_a38a60da4024ec365ed16e0682551b3a0}} 
\index{PlaneViewer@{PlaneViewer}!setViewZoom@{setViewZoom}}
\index{setViewZoom@{setViewZoom}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{setViewZoom()}{setViewZoom()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Plane\+Viewer\+::set\+View\+Zoom (\begin{DoxyParamCaption}\item[{double}]{zoom }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00122                                 \{}
\DoxyCodeLine{00123     setViewZoom(0.5 * width(), 0.5 * height(), zoom);}
\DoxyCodeLine{00124   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_ae8f4553abd2c907939e2720425fa115f}\label{class_plane_viewer_ae8f4553abd2c907939e2720425fa115f}} 
\index{PlaneViewer@{PlaneViewer}!setZoomRange@{setZoomRange}}
\index{setZoomRange@{setZoomRange}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{setZoomRange()}{setZoomRange()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::set\+Zoom\+Range (\begin{DoxyParamCaption}\item[{double}]{zoom\+Min,  }\item[{double}]{zoom\+Max }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00091                                                              \{}
\DoxyCodeLine{00092   \mbox{\hyperlink{class_plane_viewer_aba92386c2702dbd9b00f3c0dec0b859d}{m\_zoomRange}}[0] = zoomMin, \mbox{\hyperlink{class_plane_viewer_aba92386c2702dbd9b00f3c0dec0b859d}{m\_zoomRange}}[1] = zoomMax;}
\DoxyCodeLine{00093 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a63aa4684bb9a697b6bf993366ec59f92}\label{class_plane_viewer_a63aa4684bb9a697b6bf993366ec59f92}} 
\index{PlaneViewer@{PlaneViewer}!tabletEvent@{tabletEvent}}
\index{tabletEvent@{tabletEvent}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{tabletEvent()}{tabletEvent()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::tablet\+Event (\begin{DoxyParamCaption}\item[{QTablet\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00321                                              \{}
\DoxyCodeLine{00322   \textcolor{comment}{// qDebug() << "{}[tabletEvent]"{};}}
\DoxyCodeLine{00323   \textcolor{keywordflow}{if} (e-\/>type() == QTabletEvent::TabletPress) \{}
\DoxyCodeLine{00324     m\_stylusUsed = e-\/>pointerType() ? true : \textcolor{keyword}{false};}
\DoxyCodeLine{00325   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (e-\/>type() == QTabletEvent::TabletRelease) \{}
\DoxyCodeLine{00326     m\_stylusUsed = \textcolor{keyword}{false};}
\DoxyCodeLine{00327   \}}
\DoxyCodeLine{00328 }
\DoxyCodeLine{00329   e-\/>accept();}
\DoxyCodeLine{00330 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a36c89621b12b0dcaefbfa781ae015958}\label{class_plane_viewer_a36c89621b12b0dcaefbfa781ae015958}} 
\index{PlaneViewer@{PlaneViewer}!touchEvent@{touchEvent}}
\index{touchEvent@{touchEvent}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{touchEvent()}{touchEvent()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::touch\+Event (\begin{DoxyParamCaption}\item[{QTouch\+Event $\ast$}]{e,  }\item[{int}]{type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00397                                                      \{}
\DoxyCodeLine{00398   \textcolor{comment}{// qDebug() << "{}[touchEvent]"{};}}
\DoxyCodeLine{00399   \textcolor{keywordflow}{if} (type == QEvent::TouchBegin) \{}
\DoxyCodeLine{00400     m\_touchActive   = \textcolor{keyword}{true};}
\DoxyCodeLine{00401     m\_firstPanPoint = e-\/>touchPoints().at(0).pos();}
\DoxyCodeLine{00402     \textcolor{comment}{// obtain device type}}
\DoxyCodeLine{00403     m\_touchDevice = e-\/>device()-\/>type();}
\DoxyCodeLine{00404   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_touchActive) \{}
\DoxyCodeLine{00405     \textcolor{comment}{// touchpads must have 2 finger panning for tools and navigation to be}}
\DoxyCodeLine{00406     \textcolor{comment}{// functional on other devices, 1 finger panning is preferred}}
\DoxyCodeLine{00407     \textcolor{keywordflow}{if} ((e-\/>touchPoints().count() == 2 \&\&}
\DoxyCodeLine{00408          m\_touchDevice == QTouchDevice::TouchPad) ||}
\DoxyCodeLine{00409         (e-\/>touchPoints().count() == 1 \&\&}
\DoxyCodeLine{00410          m\_touchDevice == QTouchDevice::TouchScreen)) \{}
\DoxyCodeLine{00411       QTouchEvent::TouchPoint panPoint = e-\/>touchPoints().at(0);}
\DoxyCodeLine{00412       \textcolor{keywordflow}{if} (!m\_panning) \{}
\DoxyCodeLine{00413         QPointF deltaPoint = panPoint.pos() -\/ m\_firstPanPoint;}
\DoxyCodeLine{00414         \textcolor{comment}{// minimize accidental and jerky zooming/rotating during 2 finger}}
\DoxyCodeLine{00415         \textcolor{comment}{// panning}}
\DoxyCodeLine{00416         \textcolor{keywordflow}{if} ((deltaPoint.manhattanLength() > 100) \&\& !m\_zooming) \{}
\DoxyCodeLine{00417           m\_panning = \textcolor{keyword}{true};}
\DoxyCodeLine{00418         \}}
\DoxyCodeLine{00419       \}}
\DoxyCodeLine{00420       \textcolor{keywordflow}{if} (m\_panning) \{}
\DoxyCodeLine{00421         QPoint curPos      = panPoint.pos().toPoint() * getDevPixRatio();}
\DoxyCodeLine{00422         QPoint lastPos     = panPoint.lastPos().toPoint() * getDevPixRatio();}
\DoxyCodeLine{00423         QPoint centerDelta = curPos -\/ lastPos;}
\DoxyCodeLine{00424         moveView(centerDelta.x(), -\/centerDelta.y());}
\DoxyCodeLine{00425       \}}
\DoxyCodeLine{00426     \}}
\DoxyCodeLine{00427   \}}
\DoxyCodeLine{00428   \textcolor{keywordflow}{if} (type == QEvent::TouchEnd || type == QEvent::TouchCancel) \{}
\DoxyCodeLine{00429     m\_touchActive = \textcolor{keyword}{false};}
\DoxyCodeLine{00430     m\_panning     = \textcolor{keyword}{false};}
\DoxyCodeLine{00431   \}}
\DoxyCodeLine{00432   e-\/>accept();}
\DoxyCodeLine{00433 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a363aab6df778dea718b1b27fa749cc04}\label{class_plane_viewer_a363aab6df778dea718b1b27fa749cc04}} 
\index{PlaneViewer@{PlaneViewer}!viewAff@{viewAff}}
\index{viewAff@{viewAff}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{viewAff()}{viewAff()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_affine}{TAffine}} \& Plane\+Viewer\+::view\+Aff (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00114 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a9ff07fe7944196bf65b9062165612bac}\label{class_plane_viewer_a9ff07fe7944196bf65b9062165612bac}} 
\index{PlaneViewer@{PlaneViewer}!viewAff@{viewAff}}
\index{viewAff@{viewAff}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{viewAff()}{viewAff()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_affine}{TAffine}} \& Plane\+Viewer\+::view\+Aff (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00115 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a48c83916061fff7e122d9030544d4f39}\label{class_plane_viewer_a48c83916061fff7e122d9030544d4f39}} 
\index{PlaneViewer@{PlaneViewer}!wheelEvent@{wheelEvent}}
\index{wheelEvent@{wheelEvent}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{wheelEvent()}{wheelEvent()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::wheel\+Event (\begin{DoxyParamCaption}\item[{QWheel\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00233                                                \{}
\DoxyCodeLine{00234   \textcolor{keywordtype}{int} delta = 0;}
\DoxyCodeLine{00235   \textcolor{keywordflow}{switch} (event-\/>source()) \{}
\DoxyCodeLine{00236   \textcolor{keywordflow}{case} Qt::MouseEventNotSynthesized: \{}
\DoxyCodeLine{00237     \textcolor{keywordflow}{if} (event-\/>modifiers() \& Qt::AltModifier)}
\DoxyCodeLine{00238       delta = \textcolor{keyword}{event}-\/>angleDelta().x();}
\DoxyCodeLine{00239     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00240       delta = \textcolor{keyword}{event}-\/>angleDelta().y();}
\DoxyCodeLine{00241     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00242   \}}
\DoxyCodeLine{00243 }
\DoxyCodeLine{00244   \textcolor{keywordflow}{case} Qt::MouseEventSynthesizedBySystem: \{}
\DoxyCodeLine{00245     QPoint numPixels  = \textcolor{keyword}{event}-\/>pixelDelta();}
\DoxyCodeLine{00246     QPoint numDegrees = \textcolor{keyword}{event}-\/>angleDelta() / 8;}
\DoxyCodeLine{00247     \textcolor{keywordflow}{if} (!numPixels.isNull()) \{}
\DoxyCodeLine{00248       delta = \textcolor{keyword}{event}-\/>pixelDelta().y();}
\DoxyCodeLine{00249     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!numDegrees.isNull()) \{}
\DoxyCodeLine{00250       QPoint numSteps = numDegrees / 15;}
\DoxyCodeLine{00251       delta           = numSteps.y();}
\DoxyCodeLine{00252     \}}
\DoxyCodeLine{00253     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00254   \}}
\DoxyCodeLine{00255 }
\DoxyCodeLine{00256   \textcolor{keywordflow}{default}:  \textcolor{comment}{// Qt::MouseEventSynthesizedByQt,}}
\DoxyCodeLine{00257             \textcolor{comment}{// Qt::MouseEventSynthesizedByApplication}}
\DoxyCodeLine{00258     \{}
\DoxyCodeLine{00259       std::cout << \textcolor{stringliteral}{"{}not supported event: Qt::MouseEventSynthesizedByQt, "{}}}
\DoxyCodeLine{00260                    \textcolor{stringliteral}{"{}Qt::MouseEventSynthesizedByApplication"{}}}
\DoxyCodeLine{00261                 << std::endl;}
\DoxyCodeLine{00262       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00263     \}}
\DoxyCodeLine{00264 }
\DoxyCodeLine{00265   \}  \textcolor{comment}{// end switch}}
\DoxyCodeLine{00266 }
\DoxyCodeLine{00267   \textcolor{keywordflow}{if} (abs(delta) > 0) \{}
\DoxyCodeLine{00268     \textcolor{keywordflow}{if} ((m\_gestureActive == \textcolor{keyword}{true} \&\&}
\DoxyCodeLine{00269          m\_touchDevice == QTouchDevice::TouchScreen) ||}
\DoxyCodeLine{00270         m\_gestureActive == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{00271       \mbox{\hyperlink{class_t_point_t}{TPointD}} pos(event-\/>x() * getDevPixRatio(),}
\DoxyCodeLine{00272                   height() -\/ event-\/>y() * getDevPixRatio());}
\DoxyCodeLine{00273       \textcolor{keywordtype}{double} zoom\_par = 1 + \textcolor{keyword}{event}-\/>delta() * 0.001;}
\DoxyCodeLine{00274 }
\DoxyCodeLine{00275       zoomView(pos.x, pos.y, zoom\_par);}
\DoxyCodeLine{00276     \}}
\DoxyCodeLine{00277   \}}
\DoxyCodeLine{00278   \textcolor{keyword}{event}-\/>accept();}
\DoxyCodeLine{00279 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_acac706ce61567f5f34e3ed8dd3e695d3}\label{class_plane_viewer_acac706ce61567f5f34e3ed8dd3e695d3}} 
\index{PlaneViewer@{PlaneViewer}!winToQtWin@{winToQtWin}}
\index{winToQtWin@{winToQtWin}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{winToQtWin()}{winToQtWin()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPoint}} Plane\+Viewer\+::win\+To\+Qt\+Win (\begin{DoxyParamCaption}\item[{int}]{x,  }\item[{int}]{y }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00102 \{ \textcolor{keywordflow}{return} qtWinToWin(x, y); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a9c4d39690ba6f65c9ea10d872cd174d6}\label{class_plane_viewer_a9c4d39690ba6f65c9ea10d872cd174d6}} 
\index{PlaneViewer@{PlaneViewer}!winToWorld@{winToWorld}}
\index{winToWorld@{winToWorld}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{winToWorld()}{winToWorld()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Plane\+Viewer\+::win\+To\+World (\begin{DoxyParamCaption}\item[{int}]{x,  }\item[{int}]{y }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00096 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.\mbox{\hyperlink{class_t_affine_a570529b96b1ec5abc711aaa9aac09ff9}{inv}}() * \mbox{\hyperlink{class_t_point_t}{TPointD}}(x, y); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_aa0ca4954d9f2dbfdbf86baf0c481d382}\label{class_plane_viewer_aa0ca4954d9f2dbfdbf86baf0c481d382}} 
\index{PlaneViewer@{PlaneViewer}!worldToQtWin@{worldToQtWin}}
\index{worldToQtWin@{worldToQtWin}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{worldToQtWin()}{worldToQtWin()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Plane\+Viewer\+::world\+To\+Qt\+Win (\begin{DoxyParamCaption}\item[{double}]{x,  }\item[{double}]{y }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00103                                            \{}
\DoxyCodeLine{00104     \mbox{\hyperlink{class_t_point_t}{TPointD}} res(worldToWin(x, y));}
\DoxyCodeLine{00105     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_point_t}{TPointD}}(res.x, height() -\/ res.y);}
\DoxyCodeLine{00106   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_ad583f9059f39b58e37dc8e035746bea7}\label{class_plane_viewer_ad583f9059f39b58e37dc8e035746bea7}} 
\index{PlaneViewer@{PlaneViewer}!worldToWin@{worldToWin}}
\index{worldToWin@{worldToWin}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{worldToWin()}{worldToWin()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Plane\+Viewer\+::world\+To\+Win (\begin{DoxyParamCaption}\item[{double}]{x,  }\item[{double}]{y }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00097 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}} * \mbox{\hyperlink{class_t_point_t}{TPointD}}(x, y); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a543d23166eda89159f61aaf51add2294}\label{class_plane_viewer_a543d23166eda89159f61aaf51add2294}} 
\index{PlaneViewer@{PlaneViewer}!zoomIn@{zoomIn}}
\index{zoomIn@{zoomIn}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{zoomIn()}{zoomIn()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::zoom\+In (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00544                          \{}
\DoxyCodeLine{00545   setViewZoom(ImageUtils::getQuantizedZoomFactor(\mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a11, \textcolor{keyword}{true}));}
\DoxyCodeLine{00546 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_ac2d4af26b821af14aa1bf987093f05be}\label{class_plane_viewer_ac2d4af26b821af14aa1bf987093f05be}} 
\index{PlaneViewer@{PlaneViewer}!zoomOut@{zoomOut}}
\index{zoomOut@{zoomOut}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{zoomOut()}{zoomOut()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::zoom\+Out (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00550                           \{}
\DoxyCodeLine{00551   setViewZoom(ImageUtils::getQuantizedZoomFactor(\mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a11, \textcolor{keyword}{false}));}
\DoxyCodeLine{00552 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plane_viewer_a80df779eb1db2c1ee2aa1bc0d6e5d7cf}\label{class_plane_viewer_a80df779eb1db2c1ee2aa1bc0d6e5d7cf}} 
\index{PlaneViewer@{PlaneViewer}!zoomView@{zoomView}}
\index{zoomView@{zoomView}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{zoomView()}{zoomView()}}
{\footnotesize\ttfamily void Plane\+Viewer\+::zoom\+View (\begin{DoxyParamCaption}\item[{double}]{x,  }\item[{double}]{y,  }\item[{double}]{delta }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00129                                                   \{}
\DoxyCodeLine{00130     setViewZoom(x, y, \mbox{\hyperlink{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}{m\_aff}}.a11 * delta);}
\DoxyCodeLine{00131   \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}\label{class_plane_viewer_adbcdecd2655010816805ad20af5bd9f2}} 
\index{PlaneViewer@{PlaneViewer}!m\_aff@{m\_aff}}
\index{m\_aff@{m\_aff}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{m\_aff}{m\_aff}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_affine}{TAffine}} Plane\+Viewer\+::m\+\_\+aff\hspace{0.3cm}{\ttfamily [protected]}}



Affine transform from world to widget coords. 

\mbox{\Hypertarget{class_plane_viewer_a155ef4c28a1944052991e7a999371986}\label{class_plane_viewer_a155ef4c28a1944052991e7a999371986}} 
\index{PlaneViewer@{PlaneViewer}!m\_bgColorF@{m\_bgColorF}}
\index{m\_bgColorF@{m\_bgColorF}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{m\_bgColorF}{m\_bgColorF}}
{\footnotesize\ttfamily float Plane\+Viewer\+::m\+\_\+bg\+ColorF\mbox{[}6\mbox{]}\hspace{0.3cm}{\ttfamily [protected]}}



Widget bg color cast in the \mbox{[}0, 1\mbox{]} interval. 

\mbox{\Hypertarget{class_plane_viewer_ad72ea0048d7a065c4f7a8794f15f3a3a}\label{class_plane_viewer_ad72ea0048d7a065c4f7a8794f15f3a3a}} 
\index{PlaneViewer@{PlaneViewer}!m\_chessSize@{m\_chessSize}}
\index{m\_chessSize@{m\_chessSize}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{m\_chessSize}{m\_chessSize}}
{\footnotesize\ttfamily double Plane\+Viewer\+::m\+\_\+chess\+Size\hspace{0.3cm}{\ttfamily [protected]}}



Size of the chessboard squares (default is 40). 

\mbox{\Hypertarget{class_plane_viewer_a9f87231f7b1b491cb5fbbd61a669894b}\label{class_plane_viewer_a9f87231f7b1b491cb5fbbd61a669894b}} 
\index{PlaneViewer@{PlaneViewer}!m\_dpiX@{m\_dpiX}}
\index{m\_dpiX@{m\_dpiX}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{m\_dpiX}{m\_dpiX}}
{\footnotesize\ttfamily double Plane\+Viewer\+::m\+\_\+dpiX\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_plane_viewer_a76263dd3b41ee2ab6898fffaa29f8204}\label{class_plane_viewer_a76263dd3b41ee2ab6898fffaa29f8204}} 
\index{PlaneViewer@{PlaneViewer}!m\_dpiY@{m\_dpiY}}
\index{m\_dpiY@{m\_dpiY}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{m\_dpiY}{m\_dpiY}}
{\footnotesize\ttfamily double Plane\+Viewer\+::m\+\_\+dpiY\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_plane_viewer_a0f335dccd3b1c7ba36c78b3e745f2632}\label{class_plane_viewer_a0f335dccd3b1c7ba36c78b3e745f2632}} 
\index{PlaneViewer@{PlaneViewer}!m\_imageBounds@{m\_imageBounds}}
\index{m\_imageBounds@{m\_imageBounds}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{m\_imageBounds}{m\_imageBounds}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRect}} Plane\+Viewer\+::m\+\_\+image\+Bounds\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_plane_viewer_aca426a01b57be1799b6decaac6d839d5}\label{class_plane_viewer_aca426a01b57be1799b6decaac6d839d5}} 
\index{PlaneViewer@{PlaneViewer}!m\_rasterBuffer@{m\_rasterBuffer}}
\index{m\_rasterBuffer@{m\_rasterBuffer}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{m\_rasterBuffer}{m\_rasterBuffer}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} Plane\+Viewer\+::m\+\_\+raster\+Buffer\hspace{0.3cm}{\ttfamily [protected]}}

Auxiliary buffer used to draw on the widget directly. 

Referenced by \mbox{\hyperlink{l00292}{hide\+Event()}}.

\mbox{\Hypertarget{class_plane_viewer_aebb1fc8c01c95edacb5db57a6e7509f5}\label{class_plane_viewer_aebb1fc8c01c95edacb5db57a6e7509f5}} 
\index{PlaneViewer@{PlaneViewer}!m\_xpos@{m\_xpos}}
\index{m\_xpos@{m\_xpos}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{m\_xpos}{m\_xpos}}
{\footnotesize\ttfamily int Plane\+Viewer\+::m\+\_\+xpos\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_plane_viewer_a2be7acb8b17246792119805716211116}\label{class_plane_viewer_a2be7acb8b17246792119805716211116}} 
\index{PlaneViewer@{PlaneViewer}!m\_ypos@{m\_ypos}}
\index{m\_ypos@{m\_ypos}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{m\_ypos}{m\_ypos}}
{\footnotesize\ttfamily int Plane\+Viewer\+::m\+\_\+ypos\hspace{0.3cm}{\ttfamily [protected]}}



Mouse position on mouse operations. 

\mbox{\Hypertarget{class_plane_viewer_aba92386c2702dbd9b00f3c0dec0b859d}\label{class_plane_viewer_aba92386c2702dbd9b00f3c0dec0b859d}} 
\index{PlaneViewer@{PlaneViewer}!m\_zoomRange@{m\_zoomRange}}
\index{m\_zoomRange@{m\_zoomRange}!PlaneViewer@{PlaneViewer}}
\doxysubsubsection{\texorpdfstring{m\_zoomRange}{m\_zoomRange}}
{\footnotesize\ttfamily double Plane\+Viewer\+::m\+\_\+zoom\+Range\mbox{[}2\mbox{]}\hspace{0.3cm}{\ttfamily [protected]}}



Viewport zoom range (default\+: \mbox{[}-\/1024, 1024\mbox{]}). 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonzqt/planeviewer.\+h\item 
E\+:/opentoonz/toonz/sources/toonzqt/planeviewer.\+cpp\end{DoxyCompactItemize}
