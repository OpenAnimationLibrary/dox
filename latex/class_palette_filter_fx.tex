\hypertarget{class_palette_filter_fx}{}\doxysection{Palette\+Filter\+Fx Class Reference}
\label{class_palette_filter_fx}\index{PaletteFilterFx@{PaletteFilterFx}}
Inheritance diagram for Palette\+Filter\+Fx\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=6.000000cm]{class_palette_filter_fx}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_palette_filter_fx_a77c82aa20e80b56a6d8974c10219aef0}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{class_palette_filter_fx_a09c01c9a1597a19830464268d9a8d5c3}{do\+Dry\+Compute}} (\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{class_palette_filter_fx_a83026bef896e6c2c6763d98a4035425c}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&ri) override
\item 
bool \mbox{\hyperlink{class_palette_filter_fx_a8574f59f9f3343781a35124b52e990ac}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\item 
bool \mbox{\hyperlink{class_palette_filter_fx_a9d8780b1b4ea1c16fde410e5c70b2d22}{allow\+User\+Cache\+On\+Port}} (int port) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_palette_filter_fx_a4b9163f26a333d44109c96becc961cae}\label{class_palette_filter_fx_a4b9163f26a333d44109c96becc961cae}} 
\index{PaletteFilterFx@{PaletteFilterFx}!PaletteFilterFx@{PaletteFilterFx}}
\index{PaletteFilterFx@{PaletteFilterFx}!PaletteFilterFx@{PaletteFilterFx}}
\doxysubsubsection{\texorpdfstring{PaletteFilterFx()}{PaletteFilterFx()}}
{\footnotesize\ttfamily Palette\+Filter\+Fx\+::\+Palette\+Filter\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00020       : m\_string(L\textcolor{stringliteral}{"{}1,2,3"{}})}
\DoxyCodeLine{00021       , m\_type(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_enum_param}{TIntEnumParam}}(0, \textcolor{stringliteral}{"{}Lines \& Areas"{}}))}
\DoxyCodeLine{00022       , m\_keep(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_enum_param}{TIntEnumParam}}(0, \textcolor{stringliteral}{"{}Delete"{}}))}
\DoxyCodeLine{00023 }
\DoxyCodeLine{00024   \{}
\DoxyCodeLine{00025     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Source"{}}, m\_input);}
\DoxyCodeLine{00026     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}indexes"{}}, m\_string);}
\DoxyCodeLine{00027     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}keep"{}}, m\_keep);}
\DoxyCodeLine{00028     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}type"{}}, m\_type);}
\DoxyCodeLine{00029     m\_type-\/>addItem(1, \textcolor{stringliteral}{"{}Lines"{}});}
\DoxyCodeLine{00030     m\_type-\/>addItem(2, \textcolor{stringliteral}{"{}Areas"{}});}
\DoxyCodeLine{00031     m\_type-\/>addItem(3, \textcolor{stringliteral}{"{}Lines \& Areas (No Gap)"{}});}
\DoxyCodeLine{00032     m\_type-\/>addItem(4, \textcolor{stringliteral}{"{}Lines (Delete All Areas)"{}});}
\DoxyCodeLine{00033     m\_type-\/>addItem(5, \textcolor{stringliteral}{"{}Areas (Delete All Lines)"{}});}
\DoxyCodeLine{00034 }
\DoxyCodeLine{00035     m\_keep-\/>addItem(1, \textcolor{stringliteral}{"{}Keep"{}});}
\DoxyCodeLine{00036   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_palette_filter_fx_a8e0c73c2fd2b20a5c5160793452c3b87}\label{class_palette_filter_fx_a8e0c73c2fd2b20a5c5160793452c3b87}} 
\index{PaletteFilterFx@{PaletteFilterFx}!````~PaletteFilterFx@{$\sim$PaletteFilterFx}}
\index{````~PaletteFilterFx@{$\sim$PaletteFilterFx}!PaletteFilterFx@{PaletteFilterFx}}
\doxysubsubsection{\texorpdfstring{$\sim$PaletteFilterFx()}{~PaletteFilterFx()}}
{\footnotesize\ttfamily Palette\+Filter\+Fx\+::$\sim$\+Palette\+Filter\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00038 \{\};}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_palette_filter_fx_a9d8780b1b4ea1c16fde410e5c70b2d22}\label{class_palette_filter_fx_a9d8780b1b4ea1c16fde410e5c70b2d22}} 
\index{PaletteFilterFx@{PaletteFilterFx}!allowUserCacheOnPort@{allowUserCacheOnPort}}
\index{allowUserCacheOnPort@{allowUserCacheOnPort}!PaletteFilterFx@{PaletteFilterFx}}
\doxysubsubsection{\texorpdfstring{allowUserCacheOnPort()}{allowUserCacheOnPort()}}
{\footnotesize\ttfamily bool Palette\+Filter\+Fx\+::allow\+User\+Cache\+On\+Port (\begin{DoxyParamCaption}\item[{int}]{port }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00059 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_palette_filter_fx_a8574f59f9f3343781a35124b52e990ac}\label{class_palette_filter_fx_a8574f59f9f3343781a35124b52e990ac}} 
\index{PaletteFilterFx@{PaletteFilterFx}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!PaletteFilterFx@{PaletteFilterFx}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool Palette\+Filter\+Fx\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00055                                                                      \{}
\DoxyCodeLine{00056     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00057   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_palette_filter_fx_a83026bef896e6c2c6763d98a4035425c}\label{class_palette_filter_fx_a83026bef896e6c2c6763d98a4035425c}} 
\index{PaletteFilterFx@{PaletteFilterFx}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!PaletteFilterFx@{PaletteFilterFx}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void Palette\+Filter\+Fx\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{ri }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00106                                                            \{}
\DoxyCodeLine{00107   \textcolor{keywordflow}{if} (!m\_input.isConnected()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00108 }
\DoxyCodeLine{00109   std::vector<std::string> items;}
\DoxyCodeLine{00110   std::string indexes = ::to\_string(m\_string-\/>getValue());}
\DoxyCodeLine{00111   parseIndexes(indexes, items);}
\DoxyCodeLine{00112   \mbox{\hyperlink{class_t_render_settings}{TRenderSettings}} ri2(ri);}
\DoxyCodeLine{00113   \mbox{\hyperlink{class_palette_filter_fx_render_data}{PaletteFilterFxRenderData}} *PaletteFilterData = \textcolor{keyword}{new} \mbox{\hyperlink{class_palette_filter_fx_render_data}{PaletteFilterFxRenderData}};}
\DoxyCodeLine{00114   insertIndexes(items, PaletteFilterData);}
\DoxyCodeLine{00115   PaletteFilterData-\/>m\_keep = (bool)(m\_keep-\/>getValue() == 1);}
\DoxyCodeLine{00116   \textcolor{keywordflow}{switch} (m\_type-\/>getValue()) \{}
\DoxyCodeLine{00117   \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{00118     PaletteFilterData-\/>m\_type = eApplyToInksAndPaints;}
\DoxyCodeLine{00119     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00120   \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{00121     PaletteFilterData-\/>m\_type = eApplyToInksKeepingAllPaints;}
\DoxyCodeLine{00122     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00123   \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{00124     PaletteFilterData-\/>m\_type = eApplyToPaintsKeepingAllInks;}
\DoxyCodeLine{00125     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00126   \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{00127     PaletteFilterData-\/>m\_type = eApplyToInksAndPaints\_NoGap;}
\DoxyCodeLine{00128     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00129   \textcolor{keywordflow}{case} 4:}
\DoxyCodeLine{00130     PaletteFilterData-\/>m\_type = eApplyToInksDeletingAllPaints;}
\DoxyCodeLine{00131     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00132   \textcolor{keywordflow}{case} 5:}
\DoxyCodeLine{00133     PaletteFilterData-\/>m\_type = eApplyToPaintsDeletingAllInks;}
\DoxyCodeLine{00134     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00135   \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00136     assert(\textcolor{keyword}{false});}
\DoxyCodeLine{00137   \}}
\DoxyCodeLine{00138 }
\DoxyCodeLine{00139   ri2.m\_data.push\_back(PaletteFilterData);}
\DoxyCodeLine{00140   ri2.m\_userCachable = \textcolor{keyword}{false};}
\DoxyCodeLine{00141   m\_input-\/>compute(tile, frame, ri2);}
\DoxyCodeLine{00142 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_palette_filter_fx_a09c01c9a1597a19830464268d9a8d5c3}\label{class_palette_filter_fx_a09c01c9a1597a19830464268d9a8d5c3}} 
\index{PaletteFilterFx@{PaletteFilterFx}!doDryCompute@{doDryCompute}}
\index{doDryCompute@{doDryCompute}!PaletteFilterFx@{PaletteFilterFx}}
\doxysubsubsection{\texorpdfstring{doDryCompute()}{doDryCompute()}}
{\footnotesize\ttfamily void Palette\+Filter\+Fx\+::do\+Dry\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Declares the computation scheme of this fx for rendering optimization purposes. This is an important function of the Toonz rendering API, and should be reimplemented with the necessary care. The Toonz rendering process makes use of this function to enact most of the optimization steps about the fx computation, in particular fx caching. A correct implementation of this method should follow these rules\+:  The invocation of child node computations should be faithfully reproduced.  TRaster\+Fx\+::compute and TRaster\+Fx\+::allocate\+And\+Compute calls have to be translated to TRaster\+Fx\+::dry\+Compute calls.  This fx is intended for precomputation stage, so the hard rendering code should be skipped here. By default, this method raises a dry\+Compute call to each input port in increasing order, using the TRaster\+Fx\+::transform method to identify the tiles to be passed on input precomputation. 

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_a47ec31d2d4c3a066cd6744fb8c80edf2}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00065                                                                 \{}
\DoxyCodeLine{00066   \textcolor{keywordflow}{if} (!m\_input.isConnected()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00067 }
\DoxyCodeLine{00068   std::vector<std::string> items;}
\DoxyCodeLine{00069   std::string indexes = ::to\_string(m\_string-\/>getValue());}
\DoxyCodeLine{00070   parseIndexes(indexes, items);}
\DoxyCodeLine{00071   \mbox{\hyperlink{class_t_render_settings}{TRenderSettings}} ri2(info);}
\DoxyCodeLine{00072   \mbox{\hyperlink{class_palette_filter_fx_render_data}{PaletteFilterFxRenderData}} *PaletteFilterData = \textcolor{keyword}{new} \mbox{\hyperlink{class_palette_filter_fx_render_data}{PaletteFilterFxRenderData}};}
\DoxyCodeLine{00073   insertIndexes(items, PaletteFilterData);}
\DoxyCodeLine{00074   PaletteFilterData-\/>m\_keep = (bool)(m\_keep-\/>getValue() == 1);}
\DoxyCodeLine{00075   \textcolor{keywordflow}{switch} (m\_type-\/>getValue()) \{}
\DoxyCodeLine{00076   \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{00077     PaletteFilterData-\/>m\_type = eApplyToInksAndPaints;}
\DoxyCodeLine{00078     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00079   \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{00080     PaletteFilterData-\/>m\_type = eApplyToInksKeepingAllPaints;}
\DoxyCodeLine{00081     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00082   \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{00083     PaletteFilterData-\/>m\_type = eApplyToPaintsKeepingAllInks;}
\DoxyCodeLine{00084     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00085   \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{00086     PaletteFilterData-\/>m\_type = eApplyToInksAndPaints\_NoGap;}
\DoxyCodeLine{00087     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00088   \textcolor{keywordflow}{case} 4:}
\DoxyCodeLine{00089     PaletteFilterData-\/>m\_type = eApplyToInksDeletingAllPaints;}
\DoxyCodeLine{00090     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00091   \textcolor{keywordflow}{case} 5:}
\DoxyCodeLine{00092     PaletteFilterData-\/>m\_type = eApplyToPaintsDeletingAllInks;}
\DoxyCodeLine{00093     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00094   \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00095     assert(\textcolor{keyword}{false});}
\DoxyCodeLine{00096   \}}
\DoxyCodeLine{00097 }
\DoxyCodeLine{00098   ri2.m\_data.push\_back(PaletteFilterData);}
\DoxyCodeLine{00099   ri2.m\_userCachable = \textcolor{keyword}{false};}
\DoxyCodeLine{00100   m\_input-\/>dryCompute(rect, frame, ri2);}
\DoxyCodeLine{00101 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00101}{TRender\+Settings\+::m\+\_\+data}}, and \mbox{\hyperlink{l00139}{TRender\+Settings\+::m\+\_\+user\+Cachable}}.

\mbox{\Hypertarget{class_palette_filter_fx_a77c82aa20e80b56a6d8974c10219aef0}\label{class_palette_filter_fx_a77c82aa20e80b56a6d8974c10219aef0}} 
\index{PaletteFilterFx@{PaletteFilterFx}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!PaletteFilterFx@{PaletteFilterFx}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool Palette\+Filter\+Fx\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00041                                                        \{}
\DoxyCodeLine{00042     \textcolor{keywordflow}{if} (m\_input.isConnected()) \{}
\DoxyCodeLine{00043       \textcolor{keywordtype}{bool} ret = m\_input-\/>doGetBBox(frame, bBox, info);}
\DoxyCodeLine{00044       \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00045     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00046       bBox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00047       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00048     \}}
\DoxyCodeLine{00049   \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/palettefilterfx.\+cpp\end{DoxyCompactItemize}
