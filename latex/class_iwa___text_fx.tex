\hypertarget{class_iwa___text_fx}{}\doxysection{Iwa\+\_\+\+Text\+Fx Class Reference}
\label{class_iwa___text_fx}\index{Iwa\_TextFx@{Iwa\_TextFx}}
Inheritance diagram for Iwa\+\_\+\+Text\+Fx\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=7.000000cm]{class_iwa___text_fx}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_iwa___text_fx_a38b1f4f17e3708eadeb552be01e3e9bd}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\item 
bool \mbox{\hyperlink{class_iwa___text_fx_a42638c2a72c88acabfcc22097f82e466}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&ri) override
\item 
void \mbox{\hyperlink{class_iwa___text_fx_a3075011531c46f418dca3dbc5136b7ee}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&ri) override
\item 
void \mbox{\hyperlink{class_iwa___text_fx_af277cf9447ca26aa42162482d2e87fce}{get\+Param\+UIs}} (\mbox{\hyperlink{class_t_param_u_i_concept}{TParam\+UIConcept}} $\ast$\&concepts, int \&length) override
\item 
std\+::string \mbox{\hyperlink{class_iwa___text_fx_a0de80f78b15336fb9c2dccce467bdd9a}{get\+Alias}} (double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) const override
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} , typename PIXEL $>$ }\\void \mbox{\hyperlink{class_iwa___text_fx_a8b1731602b466fe64847e5ef2c508d76}{put\+Text\+Image}} (const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} src\+Ras, \mbox{\hyperlink{class_t_point_t}{TPoint}} \&pos, QImage \&img)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
TString\+ParamP \mbox{\hyperlink{class_iwa___text_fx_a2e4b6acafad617c7f3da857dde80c1a4}{m\+\_\+text}}
\item 
\mbox{\hyperlink{class_t_int_enum_param_p}{TInt\+Enum\+ParamP}} \mbox{\hyperlink{class_iwa___text_fx_af1dea90f02e6b61f79d6a086d513a192}{m\+\_\+h\+Align}}
\item 
TPoint\+ParamP \mbox{\hyperlink{class_iwa___text_fx_a283d5527d0ec46ee388a862ffb6e734c}{m\+\_\+center}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_iwa___text_fx_af2b39a9291e0bf22fdc5002f5c76faf9}{m\+\_\+width}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_iwa___text_fx_ae2aabb3cd2fa30e8ca60dbbe3c9d6b45}{m\+\_\+height}}
\item 
TFont\+ParamP \mbox{\hyperlink{class_iwa___text_fx_aa0ffa56cb1cbf9b1000fcb116150df1b}{m\+\_\+font}}
\item 
TPixel\+ParamP \mbox{\hyperlink{class_iwa___text_fx_acfdedd9205d190d006cb6cd97daa2c32}{m\+\_\+text\+Color}}
\item 
TPixel\+ParamP \mbox{\hyperlink{class_iwa___text_fx_ab6fec245a2dfbff5ccbd3e7bb3f134d7}{m\+\_\+box\+Color}}
\item 
TBool\+ParamP \mbox{\hyperlink{class_iwa___text_fx_a9657df509ee15b1411cdd66deb405489}{m\+\_\+show\+Border}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_iwa___text_fx_aeecdac32fb31d0ba4891111f094483bb}\label{class_iwa___text_fx_aeecdac32fb31d0ba4891111f094483bb}} 
\index{Iwa\_TextFx@{Iwa\_TextFx}!Iwa\_TextFx@{Iwa\_TextFx}}
\index{Iwa\_TextFx@{Iwa\_TextFx}!Iwa\_TextFx@{Iwa\_TextFx}}
\doxysubsubsection{\texorpdfstring{Iwa\_TextFx()}{Iwa\_TextFx()}}
{\footnotesize\ttfamily Iwa\+\_\+\+Text\+Fx\+::\+Iwa\+\_\+\+Text\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00011     : m\_text(L\textcolor{stringliteral}{"{}Lorem ipsum"{}})}
\DoxyCodeLine{00012     , m\_hAlign(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_enum_param}{TIntEnumParam}}(Qt::AlignLeft, \textcolor{stringliteral}{"{}Left"{}}))}
\DoxyCodeLine{00013     , m\_center(\mbox{\hyperlink{class_t_point_t}{TPointD}}(0.0, 0.0))}
\DoxyCodeLine{00014     , m\_width(200.0)}
\DoxyCodeLine{00015     , m\_height(60.0)}
\DoxyCodeLine{00016     , m\_font(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_font_param}{TFontParam}}())}
\DoxyCodeLine{00017     , m\_textColor(TPixel32::Black)}
\DoxyCodeLine{00018     , m\_boxColor(TPixel32::Transparent)}
\DoxyCodeLine{00019     , m\_showBorder(\textcolor{keyword}{false}) \{}
\DoxyCodeLine{00020   m\_targetType-\/>setValue(INPUT\_TEXT);}
\DoxyCodeLine{00021 }
\DoxyCodeLine{00022   m\_hAlign-\/>addItem(Qt::AlignRight, \textcolor{stringliteral}{"{}Right"{}});}
\DoxyCodeLine{00023   m\_hAlign-\/>addItem(Qt::AlignHCenter, \textcolor{stringliteral}{"{}Center"{}});}
\DoxyCodeLine{00024   m\_hAlign-\/>addItem(Qt::AlignJustify, \textcolor{stringliteral}{"{}Justify"{}});}
\DoxyCodeLine{00025 }
\DoxyCodeLine{00026   m\_text-\/>setMultiLineEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{00027 }
\DoxyCodeLine{00028   m\_center-\/>getX()-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00029   m\_center-\/>getY()-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00030   m\_width-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00031   m\_height-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00032 }
\DoxyCodeLine{00033   m\_width-\/>setValueRange(1.0, (std::numeric\_limits<double>::max)());}
\DoxyCodeLine{00034   m\_height-\/>setValueRange(1.0, (std::numeric\_limits<double>::max)());}
\DoxyCodeLine{00035 }
\DoxyCodeLine{00036   \textcolor{comment}{// set the initial font size to 30}}
\DoxyCodeLine{00037   QFont font;}
\DoxyCodeLine{00038   font.fromString(QString::fromStdWString(m\_font-\/>getValue()));}
\DoxyCodeLine{00039   font.setPixelSize(30);}
\DoxyCodeLine{00040   m\_font-\/>setValue(font.toString().toStdWString(), \textcolor{keyword}{true});}
\DoxyCodeLine{00041 }
\DoxyCodeLine{00042   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}targetType"{}}, m\_targetType);}
\DoxyCodeLine{00043   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}columnIndex"{}}, m\_columnIndex);}
\DoxyCodeLine{00044   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}text"{}}, m\_text);}
\DoxyCodeLine{00045   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}hAlign"{}}, m\_hAlign);}
\DoxyCodeLine{00046   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}center"{}}, m\_center);}
\DoxyCodeLine{00047   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}width"{}}, m\_width);}
\DoxyCodeLine{00048   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}height"{}}, m\_height);}
\DoxyCodeLine{00049   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}font"{}}, m\_font);}
\DoxyCodeLine{00050   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}textColor"{}}, m\_textColor);}
\DoxyCodeLine{00051   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}boxColor"{}}, m\_boxColor);}
\DoxyCodeLine{00052   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}showBorder"{}}, m\_showBorder);}
\DoxyCodeLine{00053 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_iwa___text_fx_a38b1f4f17e3708eadeb552be01e3e9bd}\label{class_iwa___text_fx_a38b1f4f17e3708eadeb552be01e3e9bd}} 
\index{Iwa\_TextFx@{Iwa\_TextFx}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!Iwa\_TextFx@{Iwa\_TextFx}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool Iwa\+\_\+\+Text\+Fx\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00035                                                                      \{}
\DoxyCodeLine{00036     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00037   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___text_fx_a3075011531c46f418dca3dbc5136b7ee}\label{class_iwa___text_fx_a3075011531c46f418dca3dbc5136b7ee}} 
\index{Iwa\_TextFx@{Iwa\_TextFx}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!Iwa\_TextFx@{Iwa\_TextFx}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Text\+Fx\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{ri }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00066                                                       \{}
\DoxyCodeLine{00067   QString text;}
\DoxyCodeLine{00068   \textcolor{keywordflow}{if} (m\_targetType-\/>getValue() == INPUT\_TEXT)}
\DoxyCodeLine{00069     text = QString::fromStdWString(m\_text-\/>getValue());}
\DoxyCodeLine{00070   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00071     text = m\_noteLevelStr;}
\DoxyCodeLine{00072   \textcolor{keywordflow}{if} (text.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00073 }
\DoxyCodeLine{00074   QFont font;}
\DoxyCodeLine{00075   font.fromString(QString::fromStdWString(m\_font-\/>getValue()));}
\DoxyCodeLine{00076 }
\DoxyCodeLine{00077   \textcolor{keywordtype}{double} fac = sqrt(fabs(ri.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.det()));}
\DoxyCodeLine{00078   \textcolor{keywordtype}{int} size   = (int)(fac * std::abs(font.pixelSize()));}
\DoxyCodeLine{00079 }
\DoxyCodeLine{00080   \mbox{\hyperlink{class_t_point_t}{TPoint}} center = convert(}
\DoxyCodeLine{00081       fac * m\_center-\/>getValue(frame) -\/}
\DoxyCodeLine{00082       (tile.m\_pos + tile.getRaster()-\/>getCenterD()) +}
\DoxyCodeLine{00083       \mbox{\hyperlink{class_t_point_t}{TPointD}}(ri.m\_cameraBox.getLx() / 2.0, ri.m\_cameraBox.getLy() / 2.0));}
\DoxyCodeLine{00084 }
\DoxyCodeLine{00085   QRect textBoxRect(0, 0, fac * m\_width-\/>getValue(frame),}
\DoxyCodeLine{00086                     fac * m\_height-\/>getValue(frame));}
\DoxyCodeLine{00087   textBoxRect.moveCenter(QPoint(center.x, center.y));}
\DoxyCodeLine{00088 }
\DoxyCodeLine{00089   Qt::AlignmentFlag hAlignFlag = (Qt::AlignmentFlag)m\_hAlign-\/>getValue();}
\DoxyCodeLine{00090 }
\DoxyCodeLine{00091   \textcolor{comment}{// For simplification, text will always be "{}wrapped"{}.}}
\DoxyCodeLine{00092   \textcolor{comment}{// If user would like to make the line with no break, they can just expand the}}
\DoxyCodeLine{00093   \textcolor{comment}{// boundary or set the smaller font size.}}
\DoxyCodeLine{00094   \textcolor{keywordtype}{int} flag = hAlignFlag | Qt::AlignVCenter | Qt::TextWordWrap;}
\DoxyCodeLine{00095 }
\DoxyCodeLine{00096   QFont tmpFont(font);}
\DoxyCodeLine{00097   tmpFont.setPixelSize(100);}
\DoxyCodeLine{00098   QFontMetricsF tmpFm(tmpFont);}
\DoxyCodeLine{00099   QRectF bbox = tmpFm.boundingRect(textBoxRect, flag, text);}
\DoxyCodeLine{00100 }
\DoxyCodeLine{00101   \textcolor{keywordtype}{float} ratio = std::min(textBoxRect.width() / bbox.width(),}
\DoxyCodeLine{00102                          textBoxRect.height() / bbox.height());}
\DoxyCodeLine{00103 }
\DoxyCodeLine{00104   \textcolor{comment}{// compute the font size which will just fit the item region}}
\DoxyCodeLine{00105   \textcolor{keywordtype}{int} fontSize = (int)(100.0f * ratio);}
\DoxyCodeLine{00106   tmpFont.setPixelSize(fontSize);}
\DoxyCodeLine{00107   tmpFm = QFontMetricsF(tmpFont);}
\DoxyCodeLine{00108   bbox  = tmpFm.boundingRect(textBoxRect, flag, text);}
\DoxyCodeLine{00109   \textcolor{keywordtype}{bool} isInRect;}
\DoxyCodeLine{00110   \textcolor{keywordflow}{if} (textBoxRect.width() >= bbox.width() \&\&}
\DoxyCodeLine{00111       textBoxRect.height() >= bbox.height())}
\DoxyCodeLine{00112     isInRect = \textcolor{keyword}{true};}
\DoxyCodeLine{00113   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00114     isInRect = \textcolor{keyword}{false};}
\DoxyCodeLine{00115   \textcolor{keywordflow}{while} (1) \{}
\DoxyCodeLine{00116     fontSize += (isInRect) ? 1 : -\/1;}
\DoxyCodeLine{00117     \textcolor{keywordflow}{if} (fontSize <= 0)  \textcolor{comment}{// cannot draw}}
\DoxyCodeLine{00118       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00119     \textcolor{keywordflow}{if} (isInRect \&\& fontSize >= size) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00120     tmpFont.setPixelSize(fontSize);}
\DoxyCodeLine{00121     tmpFm = QFontMetricsF(tmpFont);}
\DoxyCodeLine{00122     bbox  = tmpFm.boundingRect(textBoxRect, flag, text);}
\DoxyCodeLine{00123 }
\DoxyCodeLine{00124     \textcolor{keywordtype}{bool} newIsInRect = (textBoxRect.width() >= bbox.width() \&\&}
\DoxyCodeLine{00125                         textBoxRect.height() >= bbox.height());}
\DoxyCodeLine{00126     \textcolor{keywordflow}{if} (isInRect != newIsInRect) \{}
\DoxyCodeLine{00127       \textcolor{keywordflow}{if} (isInRect) fontSize-\/-\/;}
\DoxyCodeLine{00128       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00129     \}}
\DoxyCodeLine{00130   \}}
\DoxyCodeLine{00131 }
\DoxyCodeLine{00132   \textcolor{keywordflow}{if} (size < fontSize) \{}
\DoxyCodeLine{00133     fontSize = size;}
\DoxyCodeLine{00134   \}}
\DoxyCodeLine{00135 }
\DoxyCodeLine{00136   font.setPixelSize(fontSize);}
\DoxyCodeLine{00137   tmpFm = QFontMetricsF(font);}
\DoxyCodeLine{00138   bbox  = tmpFm.boundingRect(textBoxRect, flag, text);}
\DoxyCodeLine{00139 }
\DoxyCodeLine{00140   \textcolor{keywordtype}{double} lineWidth = 0.1 * (double)fontSize;}
\DoxyCodeLine{00141 }
\DoxyCodeLine{00142   \textcolor{comment}{// Usually the text bounding box has less horizontal margin than vertical.}}
\DoxyCodeLine{00143   \textcolor{comment}{// So here I added more margin to width.}}
\DoxyCodeLine{00144   QImage img(bbox.width() + (\textcolor{keywordtype}{int})(lineWidth * 4),}
\DoxyCodeLine{00145              bbox.height() + (\textcolor{keywordtype}{int})(lineWidth * 2),}
\DoxyCodeLine{00146              QImage::Format\_ARGB32\_Premultiplied);}
\DoxyCodeLine{00147   img.fill(Qt::transparent);}
\DoxyCodeLine{00148 }
\DoxyCodeLine{00149   bbox.moveCenter(img.rect().center());}
\DoxyCodeLine{00150 }
\DoxyCodeLine{00151   QPainter painter(\&img);}
\DoxyCodeLine{00152   TPixel32 boxColor = m\_boxColor-\/>getValue(frame);}
\DoxyCodeLine{00153   TPixel32 color    = m\_textColor-\/>getValue(frame);}
\DoxyCodeLine{00154 }
\DoxyCodeLine{00155   \textcolor{keywordflow}{if} (boxColor.m > 0)}
\DoxyCodeLine{00156     painter.fillRect(img.rect(), QColor((\textcolor{keywordtype}{int})boxColor.r, (\textcolor{keywordtype}{int})boxColor.g,}
\DoxyCodeLine{00157                                         (\textcolor{keywordtype}{int})boxColor.b, (\textcolor{keywordtype}{int})boxColor.m));}
\DoxyCodeLine{00158 }
\DoxyCodeLine{00159   QPen pen(QColor((\textcolor{keywordtype}{int})color.r, (\textcolor{keywordtype}{int})color.g, (\textcolor{keywordtype}{int})color.b, (\textcolor{keywordtype}{int})color.m));}
\DoxyCodeLine{00160   painter.setPen(pen);}
\DoxyCodeLine{00161   painter.setFont(font);}
\DoxyCodeLine{00162   painter.drawText(bbox, flag, text);}
\DoxyCodeLine{00163 }
\DoxyCodeLine{00164   \textcolor{keywordflow}{if} (m\_showBorder-\/>getValue()) \{}
\DoxyCodeLine{00165     pen.setWidthF(lineWidth);}
\DoxyCodeLine{00166     pen.setJoinStyle(Qt::MiterJoin);}
\DoxyCodeLine{00167     painter.setPen(pen);}
\DoxyCodeLine{00168     painter.drawRect(img.rect().adjusted(lineWidth / 2, lineWidth / 2,}
\DoxyCodeLine{00169                                          -\/lineWidth / 2, -\/lineWidth / 2));}
\DoxyCodeLine{00170   \}}
\DoxyCodeLine{00171 }
\DoxyCodeLine{00172   \mbox{\hyperlink{class_t_point_t}{TPoint}} imgRootPos = center -\/ \mbox{\hyperlink{class_t_point_t}{TPoint}}(img.width() / 2, img.height() / 2);}
\DoxyCodeLine{00173 }
\DoxyCodeLine{00174   tile.getRaster()-\/>clear();}
\DoxyCodeLine{00175   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} ras32 = (\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}})tile.getRaster();}
\DoxyCodeLine{00176   \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} ras64 = (\mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}})tile.getRaster();}
\DoxyCodeLine{00177   \textcolor{keywordflow}{if} (ras32)}
\DoxyCodeLine{00178     putTextImage<TRaster32P, TPixel32>(ras32, imgRootPos, img);}
\DoxyCodeLine{00179   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ras64)}
\DoxyCodeLine{00180     putTextImage<TRaster64P, TPixel64>(ras64, imgRootPos, img);}
\DoxyCodeLine{00181   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00182     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}Iwa\_TextFx: unsupported Pixel Type"{}});}
\DoxyCodeLine{00183 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___text_fx_a42638c2a72c88acabfcc22097f82e466}\label{class_iwa___text_fx_a42638c2a72c88acabfcc22097f82e466}} 
\index{Iwa\_TextFx@{Iwa\_TextFx}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!Iwa\_TextFx@{Iwa\_TextFx}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool Iwa\+\_\+\+Text\+Fx\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{ri }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00058                                                       \{}
\DoxyCodeLine{00059   bBox = TConsts::infiniteRectD;}
\DoxyCodeLine{00060   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00061 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___text_fx_a0de80f78b15336fb9c2dccce467bdd9a}\label{class_iwa___text_fx_a0de80f78b15336fb9c2dccce467bdd9a}} 
\index{Iwa\_TextFx@{Iwa\_TextFx}!getAlias@{getAlias}}
\index{getAlias@{getAlias}!Iwa\_TextFx@{Iwa\_TextFx}}
\doxysubsubsection{\texorpdfstring{getAlias()}{getAlias()}}
{\footnotesize\ttfamily std\+::string Iwa\+\_\+\+Text\+Fx\+::get\+Alias (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00203                                                                     \{}
\DoxyCodeLine{00204   std::string alias = getFxType();}
\DoxyCodeLine{00205   alias += \textcolor{stringliteral}{"{}["{}};}
\DoxyCodeLine{00206 }
\DoxyCodeLine{00207   std::string paramalias(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00208   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < getParams()-\/>getParamCount(); ++i) \{}
\DoxyCodeLine{00209     \mbox{\hyperlink{class_t_param}{TParam}} *param = getParams()-\/>getParam(i);}
\DoxyCodeLine{00210     paramalias += param-\/>\mbox{\hyperlink{class_t_param_a8dd575552e05b174775f3c67fdf357cd}{getName}}() + \textcolor{stringliteral}{"{}="{}} + param-\/>\mbox{\hyperlink{class_t_param_a0b535b9277ba29bd778a67ba8efc91e6}{getValueAlias}}(frame, 3);}
\DoxyCodeLine{00211   \}}
\DoxyCodeLine{00212 }
\DoxyCodeLine{00213   \textcolor{keywordflow}{if} (m\_targetType-\/>getValue() == INPUT\_TEXT)}
\DoxyCodeLine{00214     \textcolor{keywordflow}{return} alias + \textcolor{stringliteral}{"{},"{}} + std::to\_string(getIdentifier()) + paramalias + \textcolor{stringliteral}{"{}]"{}};}
\DoxyCodeLine{00215   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00216     \textcolor{keywordflow}{return} alias + std::to\_string(frame) + \textcolor{stringliteral}{"{},"{}} +}
\DoxyCodeLine{00217            std::to\_string(getIdentifier()) + paramalias + \textcolor{stringliteral}{"{}]"{}};}
\DoxyCodeLine{00218 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___text_fx_af277cf9447ca26aa42162482d2e87fce}\label{class_iwa___text_fx_af277cf9447ca26aa42162482d2e87fce}} 
\index{Iwa\_TextFx@{Iwa\_TextFx}!getParamUIs@{getParamUIs}}
\index{getParamUIs@{getParamUIs}!Iwa\_TextFx@{Iwa\_TextFx}}
\doxysubsubsection{\texorpdfstring{getParamUIs()}{getParamUIs()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Text\+Fx\+::get\+Param\+UIs (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_param_u_i_concept}{TParam\+UIConcept}} $\ast$\&}]{params,  }\item[{int \&}]{length }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Returns a list of User Interface Concepts to be displayed when editing the fx parameters. \begin{DoxyNote}{Note}
Ownership of the returned array allocated with new\mbox{[}\mbox{]} is passed to callers. 
\end{DoxyNote}


Reimplemented from \mbox{\hyperlink{class_t_fx_a18766b107b77772d67c5678e7d832b18}{TFx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00187                                                                     \{}
\DoxyCodeLine{00188   concepts = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_param_u_i_concept}{TParamUIConcept}}[length = 2];}
\DoxyCodeLine{00189 }
\DoxyCodeLine{00190   concepts[0].\mbox{\hyperlink{class_t_param_u_i_concept_a2dbb7c954ca5f2441a6931945cf004a5}{m\_type}}  = TParamUIConcept::POINT;}
\DoxyCodeLine{00191   concepts[0].m\_label = \textcolor{stringliteral}{"{}Center"{}};}
\DoxyCodeLine{00192   concepts[0].m\_params.push\_back(m\_center);}
\DoxyCodeLine{00193 }
\DoxyCodeLine{00194   concepts[1].m\_type = TParamUIConcept::RECT;}
\DoxyCodeLine{00195   concepts[1].m\_params.push\_back(m\_width);}
\DoxyCodeLine{00196   concepts[1].m\_params.push\_back(m\_height);}
\DoxyCodeLine{00197   concepts[1].m\_params.push\_back(m\_center);}
\DoxyCodeLine{00198 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00078}{TParam\+UIConcept\+::m\+\_\+label}}, \mbox{\hyperlink{l00079}{TParam\+UIConcept\+::m\+\_\+params}}, and \mbox{\hyperlink{l00077}{TParam\+UIConcept\+::m\+\_\+type}}.

\mbox{\Hypertarget{class_iwa___text_fx_a8b1731602b466fe64847e5ef2c508d76}\label{class_iwa___text_fx_a8b1731602b466fe64847e5ef2c508d76}} 
\index{Iwa\_TextFx@{Iwa\_TextFx}!putTextImage@{putTextImage}}
\index{putTextImage@{putTextImage}!Iwa\_TextFx@{Iwa\_TextFx}}
\doxysubsubsection{\texorpdfstring{putTextImage()}{putTextImage()}}
{\footnotesize\ttfamily template$<$typename \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} , typename PIXEL $>$ \\
void Iwa\+\_\+\+Text\+Fx\+::put\+Text\+Image (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}}}]{src\+Ras,  }\item[{\mbox{\hyperlink{class_t_point_t}{TPoint}} \&}]{pos,  }\item[{QImage \&}]{img }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00223                                                                            \{}
\DoxyCodeLine{00224   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < img.height(); j++) \{}
\DoxyCodeLine{00225     \textcolor{keywordtype}{int} rasY = pos.y + j;}
\DoxyCodeLine{00226     \textcolor{keywordflow}{if} (rasY < 0) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00227     \textcolor{keywordflow}{if} (srcRas-\/>getLy() <= rasY) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00228 }
\DoxyCodeLine{00229     PIXEL *pix  = srcRas-\/>pixels(rasY);}
\DoxyCodeLine{00230     QRgb *img\_p = (QRgb *)img.scanLine(img.height() -\/ j -\/ 1);}
\DoxyCodeLine{00231     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < img.width(); i++, img\_p++) \{}
\DoxyCodeLine{00232       \textcolor{keywordtype}{int} rasX = pos.x + i;}
\DoxyCodeLine{00233       \textcolor{keywordflow}{if} (rasX < 0) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00234       \textcolor{keywordflow}{if} (srcRas-\/>getLx() <= rasX) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00235 }
\DoxyCodeLine{00236       pix[rasX].r = (\textcolor{keyword}{typename} PIXEL::Channel)(}
\DoxyCodeLine{00237           qRed(*img\_p) * (int)PIXEL::maxChannelValue / (\textcolor{keywordtype}{int})UCHAR\_MAX);}
\DoxyCodeLine{00238       pix[rasX].g = (\textcolor{keyword}{typename} PIXEL::Channel)(}
\DoxyCodeLine{00239           qGreen(*img\_p) * (int)PIXEL::maxChannelValue / (\textcolor{keywordtype}{int})UCHAR\_MAX);}
\DoxyCodeLine{00240       pix[rasX].b = (\textcolor{keyword}{typename} PIXEL::Channel)(}
\DoxyCodeLine{00241           qBlue(*img\_p) * (int)PIXEL::maxChannelValue / (\textcolor{keywordtype}{int})UCHAR\_MAX);}
\DoxyCodeLine{00242       pix[rasX].m = (\textcolor{keyword}{typename} PIXEL::Channel)(}
\DoxyCodeLine{00243           qAlpha(*img\_p) * (int)PIXEL::maxChannelValue / (\textcolor{keywordtype}{int})UCHAR\_MAX);}
\DoxyCodeLine{00244     \}}
\DoxyCodeLine{00245   \}}
\DoxyCodeLine{00246 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_iwa___text_fx_ab6fec245a2dfbff5ccbd3e7bb3f134d7}\label{class_iwa___text_fx_ab6fec245a2dfbff5ccbd3e7bb3f134d7}} 
\index{Iwa\_TextFx@{Iwa\_TextFx}!m\_boxColor@{m\_boxColor}}
\index{m\_boxColor@{m\_boxColor}!Iwa\_TextFx@{Iwa\_TextFx}}
\doxysubsubsection{\texorpdfstring{m\_boxColor}{m\_boxColor}}
{\footnotesize\ttfamily TPixel\+ParamP Iwa\+\_\+\+Text\+Fx\+::m\+\_\+box\+Color\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___text_fx_a283d5527d0ec46ee388a862ffb6e734c}\label{class_iwa___text_fx_a283d5527d0ec46ee388a862ffb6e734c}} 
\index{Iwa\_TextFx@{Iwa\_TextFx}!m\_center@{m\_center}}
\index{m\_center@{m\_center}!Iwa\_TextFx@{Iwa\_TextFx}}
\doxysubsubsection{\texorpdfstring{m\_center}{m\_center}}
{\footnotesize\ttfamily TPoint\+ParamP Iwa\+\_\+\+Text\+Fx\+::m\+\_\+center\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___text_fx_aa0ffa56cb1cbf9b1000fcb116150df1b}\label{class_iwa___text_fx_aa0ffa56cb1cbf9b1000fcb116150df1b}} 
\index{Iwa\_TextFx@{Iwa\_TextFx}!m\_font@{m\_font}}
\index{m\_font@{m\_font}!Iwa\_TextFx@{Iwa\_TextFx}}
\doxysubsubsection{\texorpdfstring{m\_font}{m\_font}}
{\footnotesize\ttfamily TFont\+ParamP Iwa\+\_\+\+Text\+Fx\+::m\+\_\+font\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___text_fx_af1dea90f02e6b61f79d6a086d513a192}\label{class_iwa___text_fx_af1dea90f02e6b61f79d6a086d513a192}} 
\index{Iwa\_TextFx@{Iwa\_TextFx}!m\_hAlign@{m\_hAlign}}
\index{m\_hAlign@{m\_hAlign}!Iwa\_TextFx@{Iwa\_TextFx}}
\doxysubsubsection{\texorpdfstring{m\_hAlign}{m\_hAlign}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_int_enum_param_p}{TInt\+Enum\+ParamP}} Iwa\+\_\+\+Text\+Fx\+::m\+\_\+h\+Align\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___text_fx_ae2aabb3cd2fa30e8ca60dbbe3c9d6b45}\label{class_iwa___text_fx_ae2aabb3cd2fa30e8ca60dbbe3c9d6b45}} 
\index{Iwa\_TextFx@{Iwa\_TextFx}!m\_height@{m\_height}}
\index{m\_height@{m\_height}!Iwa\_TextFx@{Iwa\_TextFx}}
\doxysubsubsection{\texorpdfstring{m\_height}{m\_height}}
{\footnotesize\ttfamily TDouble\+ParamP Iwa\+\_\+\+Text\+Fx\+::m\+\_\+height\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___text_fx_a9657df509ee15b1411cdd66deb405489}\label{class_iwa___text_fx_a9657df509ee15b1411cdd66deb405489}} 
\index{Iwa\_TextFx@{Iwa\_TextFx}!m\_showBorder@{m\_showBorder}}
\index{m\_showBorder@{m\_showBorder}!Iwa\_TextFx@{Iwa\_TextFx}}
\doxysubsubsection{\texorpdfstring{m\_showBorder}{m\_showBorder}}
{\footnotesize\ttfamily TBool\+ParamP Iwa\+\_\+\+Text\+Fx\+::m\+\_\+show\+Border\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___text_fx_a2e4b6acafad617c7f3da857dde80c1a4}\label{class_iwa___text_fx_a2e4b6acafad617c7f3da857dde80c1a4}} 
\index{Iwa\_TextFx@{Iwa\_TextFx}!m\_text@{m\_text}}
\index{m\_text@{m\_text}!Iwa\_TextFx@{Iwa\_TextFx}}
\doxysubsubsection{\texorpdfstring{m\_text}{m\_text}}
{\footnotesize\ttfamily TString\+ParamP Iwa\+\_\+\+Text\+Fx\+::m\+\_\+text\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___text_fx_acfdedd9205d190d006cb6cd97daa2c32}\label{class_iwa___text_fx_acfdedd9205d190d006cb6cd97daa2c32}} 
\index{Iwa\_TextFx@{Iwa\_TextFx}!m\_textColor@{m\_textColor}}
\index{m\_textColor@{m\_textColor}!Iwa\_TextFx@{Iwa\_TextFx}}
\doxysubsubsection{\texorpdfstring{m\_textColor}{m\_textColor}}
{\footnotesize\ttfamily TPixel\+ParamP Iwa\+\_\+\+Text\+Fx\+::m\+\_\+text\+Color\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___text_fx_af2b39a9291e0bf22fdc5002f5c76faf9}\label{class_iwa___text_fx_af2b39a9291e0bf22fdc5002f5c76faf9}} 
\index{Iwa\_TextFx@{Iwa\_TextFx}!m\_width@{m\_width}}
\index{m\_width@{m\_width}!Iwa\_TextFx@{Iwa\_TextFx}}
\doxysubsubsection{\texorpdfstring{m\_width}{m\_width}}
{\footnotesize\ttfamily TDouble\+ParamP Iwa\+\_\+\+Text\+Fx\+::m\+\_\+width\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/iwa\+\_\+textfx.\+h\item 
E\+:/opentoonz/toonz/sources/stdfx/iwa\+\_\+textfx.\+cpp\end{DoxyCompactItemize}
