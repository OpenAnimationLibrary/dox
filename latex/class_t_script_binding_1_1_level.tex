\hypertarget{class_t_script_binding_1_1_level}{}\doxysection{TScript\+Binding\+::Level Class Reference}
\label{class_t_script_binding_1_1_level}\index{TScriptBinding::Level@{TScriptBinding::Level}}
Inheritance diagram for TScript\+Binding\+::Level\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_t_script_binding_1_1_level}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_script_binding_1_1_level_adae5884441bd34f47036b88121930acc}{Level}} (\mbox{\hyperlink{class_t_xsh_simple_level}{TXsh\+Simple\+Level}} $\ast$)
\item 
Q\+\_\+\+INVOKABLE QScript\+Value \mbox{\hyperlink{class_t_script_binding_1_1_level_a91826a4e4e53073b4601e0e26fddec05}{to\+String}} ()
\item 
QString \mbox{\hyperlink{class_t_script_binding_1_1_level_a3beebe33afe0cb48437c730f34ddb93f}{get\+Type}} () const
\item 
int \mbox{\hyperlink{class_t_script_binding_1_1_level_a99c1bcfb8f35f4824ab0245a95f15159}{get\+Frame\+Count}} () const
\item 
QString \mbox{\hyperlink{class_t_script_binding_1_1_level_abc16ef2e9b321faeeb1044e89f868734}{get\+Name}} () const
\item 
void \mbox{\hyperlink{class_t_script_binding_1_1_level_a6b3b23b71dbe43535e0161f49e66457d}{set\+Name}} (const QString \&name)
\item 
QScript\+Value \mbox{\hyperlink{class_t_script_binding_1_1_level_a9e2b89bda227c0181fb8c43768c05bd1}{get\+Path}} () const
\item 
void \mbox{\hyperlink{class_t_script_binding_1_1_level_a3dc7277e9f1ad04c3c4857a0fb6e4249}{set\+Path}} (const QScript\+Value \&name)
\item 
Q\+\_\+\+INVOKABLE QScript\+Value \mbox{\hyperlink{class_t_script_binding_1_1_level_aa84961231be9588e8a9756cdfe01e90a}{get\+Frame}} (const QScript\+Value \&fid)
\item 
Q\+\_\+\+INVOKABLE QScript\+Value \mbox{\hyperlink{class_t_script_binding_1_1_level_ac97bb8014560216d71842fb7f7b7df79}{get\+Frame\+By\+Index}} (const QScript\+Value \&index)
\item 
Q\+\_\+\+INVOKABLE QScript\+Value \mbox{\hyperlink{class_t_script_binding_1_1_level_a6895c67f38ce769e85cb6c621589519f}{set\+Frame}} (const QScript\+Value \&fid, const QScript\+Value \&image)
\item 
Q\+\_\+\+INVOKABLE QScript\+Value \mbox{\hyperlink{class_t_script_binding_1_1_level_a7a5e7497b45dc5ccac7787c3ffd32246}{get\+Frame\+Ids}} ()
\item 
Q\+\_\+\+INVOKABLE QScript\+Value \mbox{\hyperlink{class_t_script_binding_1_1_level_aaf4c38c591572b58dfabae83a93612e9}{load}} (const QScript\+Value \&fp)
\item 
Q\+\_\+\+INVOKABLE QScript\+Value \mbox{\hyperlink{class_t_script_binding_1_1_level_afcfeb156cc8a97a37f447d67eb411419}{save}} (const QScript\+Value \&fp)
\item 
void \mbox{\hyperlink{class_t_script_binding_1_1_level_acb6bcecc3857ddb06f2a3b39adee2586}{get\+Frame\+Ids}} (QList$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \&fids)
\item 
\mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \mbox{\hyperlink{class_t_script_binding_1_1_level_ae2db5acc9d057c4cf4354aa6da362cd0}{get\+Img}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid)
\item 
int \mbox{\hyperlink{class_t_script_binding_1_1_level_acfe64d24301f6b2a5870a1b500066633}{set\+Frame}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid, const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \&img)
\item 
\mbox{\hyperlink{class_t_xsh_simple_level}{TXsh\+Simple\+Level}} $\ast$ \mbox{\hyperlink{class_t_script_binding_1_1_level_a8e94a011608b03dcb78eff982c8229b9}{get\+Simple\+Level}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \mbox{\hyperlink{class_t_script_binding_1_1_level_ae532bcb58bc45c82145c6da93961fff3}{get\+Fid}} (const QScript\+Value \&arg, QString \&err)
\end{DoxyCompactItemize}
\doxysubsection*{Properties}
\begin{DoxyCompactItemize}
\item 
QString \mbox{\hyperlink{class_t_script_binding_1_1_level_af28ba229701534cca055893e37c3c7dc}{type}}
\item 
int \mbox{\hyperlink{class_t_script_binding_1_1_level_a7887795305025dbd2f4f5eede3e43dbe}{frame\+Count}}
\item 
QString \mbox{\hyperlink{class_t_script_binding_1_1_level_a771c477109db3268a07781bc93b63c43}{name}}
\item 
QScript\+Value \mbox{\hyperlink{class_t_script_binding_1_1_level_a7596d33a22d0cbab10508567e633fbcb}{path}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_a9b2b3df1286b3ae481c0aa1d91a9748c}\label{class_t_script_binding_1_1_level_a9b2b3df1286b3ae481c0aa1d91a9748c}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!Level@{Level}}
\index{Level@{Level}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{Level()}{Level()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily TScript\+Binding\+::\+Level\+::\+Level (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00033     : m\_sl(0)}
\DoxyCodeLine{00034     , m\_type(NO\_XSHLEVEL)}
\DoxyCodeLine{00035     , m\_scene(\textcolor{keyword}{new} \mbox{\hyperlink{class_toonz_scene}{ToonzScene}}())}
\DoxyCodeLine{00036     , m\_sceneOwner(\textcolor{keyword}{true}) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_adae5884441bd34f47036b88121930acc}\label{class_t_script_binding_1_1_level_adae5884441bd34f47036b88121930acc}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!Level@{Level}}
\index{Level@{Level}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{Level()}{Level()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily TScript\+Binding\+::\+Level\+::\+Level (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsh_simple_level}{TXsh\+Simple\+Level}} $\ast$}]{sl }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00039     : m\_sl(sl)}
\DoxyCodeLine{00040     , m\_type(sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}())}
\DoxyCodeLine{00041     , m\_scene(sl-\/>\mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}())}
\DoxyCodeLine{00042     , m\_sceneOwner(\textcolor{keyword}{false}) \{}
\DoxyCodeLine{00043   sl-\/>addRef();}
\DoxyCodeLine{00044 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_afea1fe51367cf23c55a3809270272667}\label{class_t_script_binding_1_1_level_afea1fe51367cf23c55a3809270272667}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!````~Level@{$\sim$Level}}
\index{````~Level@{$\sim$Level}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{$\sim$Level()}{~Level()}}
{\footnotesize\ttfamily TScript\+Binding\+::\+Level\+::$\sim$\+Level (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00046               \{}
\DoxyCodeLine{00047   \textcolor{keywordflow}{if} (m\_sceneOwner) \textcolor{keyword}{delete} m\_scene;}
\DoxyCodeLine{00048   \textcolor{keywordflow}{if} (m\_sl) m\_sl-\/>release();}
\DoxyCodeLine{00049 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_ae532bcb58bc45c82145c6da93961fff3}\label{class_t_script_binding_1_1_level_ae532bcb58bc45c82145c6da93961fff3}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!getFid@{getFid}}
\index{getFid@{getFid}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{getFid()}{getFid()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} TScript\+Binding\+::\+Level\+::get\+Fid (\begin{DoxyParamCaption}\item[{const QScript\+Value \&}]{arg,  }\item[{QString \&}]{err }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00215                                                             \{}
\DoxyCodeLine{00216   \textcolor{keywordflow}{if} (arg.isNumber() || arg.isString()) \{}
\DoxyCodeLine{00217     QString s = arg.toString();}
\DoxyCodeLine{00218     QRegExp re(\textcolor{stringliteral}{"{}(-\/?\(\backslash\)\(\backslash\)d+)(\(\backslash\)\(\backslash\)w?)"{}});}
\DoxyCodeLine{00219     \textcolor{keywordflow}{if} (re.exactMatch(s)) \{}
\DoxyCodeLine{00220       \textcolor{keywordtype}{int} d     = re.cap(1).toInt();}
\DoxyCodeLine{00221       QString c = re.cap(2);}
\DoxyCodeLine{00222       \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid;}
\DoxyCodeLine{00223       \textcolor{keywordflow}{if} (c.length() == 1)}
\DoxyCodeLine{00224 \textcolor{preprocessor}{\#if QT\_VERSION >= 0x050500}}
\DoxyCodeLine{00225         fid = \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(d, c[0].unicode());}
\DoxyCodeLine{00226 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00227         fid = \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(d, c[0].toAscii());}
\DoxyCodeLine{00228 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00229       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00230         fid = \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(d);}
\DoxyCodeLine{00231       err   = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00232       \textcolor{keywordflow}{return} fid;}
\DoxyCodeLine{00233     \}}
\DoxyCodeLine{00234   \}}
\DoxyCodeLine{00235   err = QObject::tr(\textcolor{stringliteral}{"{}Argument '\%1' does not look like a FrameId"{}})}
\DoxyCodeLine{00236             .arg(arg.toString());}
\DoxyCodeLine{00237   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_frame_id}{TFrameId}}();}
\DoxyCodeLine{00238 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_aa84961231be9588e8a9756cdfe01e90a}\label{class_t_script_binding_1_1_level_aa84961231be9588e8a9756cdfe01e90a}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!getFrame@{getFrame}}
\index{getFrame@{getFrame}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{getFrame()}{getFrame()}}
{\footnotesize\ttfamily QScript\+Value TScript\+Binding\+::\+Level\+::get\+Frame (\begin{DoxyParamCaption}\item[{const QScript\+Value \&}]{fid }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00247                                                        \{}
\DoxyCodeLine{00248   \textcolor{keywordflow}{if} (getFrameCount() == 0)}
\DoxyCodeLine{00249     \textcolor{keywordflow}{return} context()-\/>throwError(\textcolor{stringliteral}{"{}An empty level has no frames"{}});}
\DoxyCodeLine{00250   QString err;}
\DoxyCodeLine{00251   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = getFid(fidArg, err);}
\DoxyCodeLine{00252   \textcolor{keywordflow}{if} (err != \textcolor{stringliteral}{"{}"{}}) \textcolor{keywordflow}{return} context()-\/>throwError(err);}
\DoxyCodeLine{00253 }
\DoxyCodeLine{00254   \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} content = m\_sl-\/>getFrame(fid, \textcolor{keyword}{false});}
\DoxyCodeLine{00255   \textcolor{keywordflow}{if} (content) \{}
\DoxyCodeLine{00256     Image *img = \textcolor{keyword}{new} Image(content.getPointer());}
\DoxyCodeLine{00257     \textcolor{keywordflow}{return} create(img);}
\DoxyCodeLine{00258   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00259     \textcolor{keywordflow}{return} QScriptValue();}
\DoxyCodeLine{00260   \}}
\DoxyCodeLine{00261 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_ac97bb8014560216d71842fb7f7b7df79}\label{class_t_script_binding_1_1_level_ac97bb8014560216d71842fb7f7b7df79}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!getFrameByIndex@{getFrameByIndex}}
\index{getFrameByIndex@{getFrameByIndex}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{getFrameByIndex()}{getFrameByIndex()}}
{\footnotesize\ttfamily QScript\+Value TScript\+Binding\+::\+Level\+::get\+Frame\+By\+Index (\begin{DoxyParamCaption}\item[{const QScript\+Value \&}]{index }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00263                                                                 \{}
\DoxyCodeLine{00264   \textcolor{keywordflow}{if} (getFrameCount() == 0)}
\DoxyCodeLine{00265     \textcolor{keywordflow}{return} context()-\/>throwError(\textcolor{stringliteral}{"{}An empty level has no frames"{}});}
\DoxyCodeLine{00266   \textcolor{keywordflow}{if} (!indexArg.isNumber()) \{}
\DoxyCodeLine{00267     \textcolor{keywordflow}{return} context()-\/>throwError(}
\DoxyCodeLine{00268         tr(\textcolor{stringliteral}{"{}frame index (\%1) must be a number"{}}).arg(indexArg.toString()));}
\DoxyCodeLine{00269   \}}
\DoxyCodeLine{00270   \textcolor{keywordtype}{int} index = indexArg.toInteger();}
\DoxyCodeLine{00271   \textcolor{keywordflow}{if} (index < 0 || index >= getFrameCount()) \{}
\DoxyCodeLine{00272     \textcolor{keywordflow}{return} context()-\/>throwError(tr(\textcolor{stringliteral}{"{}frame index (\%1) is out of range (0-\/\%2)"{}})}
\DoxyCodeLine{00273                                      .arg(index)}
\DoxyCodeLine{00274                                      .arg(getFrameCount() -\/ 1));}
\DoxyCodeLine{00275   \}}
\DoxyCodeLine{00276   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid    = m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a07279a40ffad2c6ccc597c0a418f78fb}{index2fid}}(index);}
\DoxyCodeLine{00277   \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} content = m\_sl-\/>getFrame(fid, \textcolor{keyword}{false});}
\DoxyCodeLine{00278   \textcolor{keywordflow}{if} (content) \{}
\DoxyCodeLine{00279     Image *img = \textcolor{keyword}{new} Image(content.getPointer());}
\DoxyCodeLine{00280     \textcolor{keywordflow}{return} create(img);}
\DoxyCodeLine{00281   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00282     \textcolor{keywordflow}{return} QScriptValue();}
\DoxyCodeLine{00283   \}}
\DoxyCodeLine{00284 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_a99c1bcfb8f35f4824ab0245a95f15159}\label{class_t_script_binding_1_1_level_a99c1bcfb8f35f4824ab0245a95f15159}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!getFrameCount@{getFrameCount}}
\index{getFrameCount@{getFrameCount}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{getFrameCount()}{getFrameCount()}}
{\footnotesize\ttfamily int TScript\+Binding\+::\+Level\+::get\+Frame\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00094 \{ \textcolor{keywordflow}{return} m\_sl ? m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a3fe127306d6669a3eb9e9d8802660d7b}{getFrameCount}}() : 0; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_a7a5e7497b45dc5ccac7787c3ffd32246}\label{class_t_script_binding_1_1_level_a7a5e7497b45dc5ccac7787c3ffd32246}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!getFrameIds@{getFrameIds}}
\index{getFrameIds@{getFrameIds}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{getFrameIds()}{getFrameIds()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily QScript\+Value TScript\+Binding\+::\+Level\+::get\+Frame\+Ids (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00340                                 \{}
\DoxyCodeLine{00341   QList<TFrameId> fids;}
\DoxyCodeLine{00342   getFrameIds(fids);}
\DoxyCodeLine{00343   QScriptValue result = engine()-\/>newArray();}
\DoxyCodeLine{00344   quint32 index       = 0;}
\DoxyCodeLine{00345   \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \mbox{\hyperlink{class_t_frame_id}{TFrameId}} \&fid : fids) \{}
\DoxyCodeLine{00346     QString fidStr = QString::fromStdString(fid.expand());}
\DoxyCodeLine{00347     result.setProperty(index++, fidStr);}
\DoxyCodeLine{00348   \}}
\DoxyCodeLine{00349   \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{00350 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_acb6bcecc3857ddb06f2a3b39adee2586}\label{class_t_script_binding_1_1_level_acb6bcecc3857ddb06f2a3b39adee2586}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!getFrameIds@{getFrameIds}}
\index{getFrameIds@{getFrameIds}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{getFrameIds()}{getFrameIds()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void TScript\+Binding\+::\+Level\+::get\+Frame\+Ids (\begin{DoxyParamCaption}\item[{QList$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \&}]{fids }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00352                                                \{}
\DoxyCodeLine{00353   \textcolor{keywordflow}{if} (getFrameCount() > 0) \{}
\DoxyCodeLine{00354     std::vector<TFrameId> fids;}
\DoxyCodeLine{00355     m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{getFids}}(fids);}
\DoxyCodeLine{00356     \textcolor{keywordflow}{for} (std::vector<TFrameId>::iterator it = fids.begin(); it != fids.end();}
\DoxyCodeLine{00357          ++it) \{}
\DoxyCodeLine{00358       result.append(*it);}
\DoxyCodeLine{00359     \}}
\DoxyCodeLine{00360   \}}
\DoxyCodeLine{00361 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_ae2db5acc9d057c4cf4354aa6da362cd0}\label{class_t_script_binding_1_1_level_ae2db5acc9d057c4cf4354aa6da362cd0}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!getImg@{getImg}}
\index{getImg@{getImg}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{getImg()}{getImg()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} TScript\+Binding\+::\+Level\+::get\+Img (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00240                                          \{}
\DoxyCodeLine{00241   \textcolor{keywordflow}{if} (m\_sl)}
\DoxyCodeLine{00242     \textcolor{keywordflow}{return} m\_sl-\/>getFrame(fid, \textcolor{keyword}{false});}
\DoxyCodeLine{00243   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00244     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}();}
\DoxyCodeLine{00245 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_abc16ef2e9b321faeeb1044e89f868734}\label{class_t_script_binding_1_1_level_abc16ef2e9b321faeeb1044e89f868734}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!getName@{getName}}
\index{getName@{getName}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{getName()}{getName()}}
{\footnotesize\ttfamily QString TScript\+Binding\+::\+Level\+::get\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00096                              \{}
\DoxyCodeLine{00097   \textcolor{keywordflow}{return} m\_sl ? QString::fromStdWString(m\_sl-\/>\mbox{\hyperlink{class_t_xsh_level_a3a59fb1bd3261baee4e889a9edbf0ae8}{getName}}()) : \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00098 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_a9e2b89bda227c0181fb8c43768c05bd1}\label{class_t_script_binding_1_1_level_a9e2b89bda227c0181fb8c43768c05bd1}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!getPath@{getPath}}
\index{getPath@{getPath}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{getPath()}{getPath()}}
{\footnotesize\ttfamily QScript\+Value TScript\+Binding\+::\+Level\+::get\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00104                                   \{}
\DoxyCodeLine{00105   \textcolor{keywordflow}{if} (m\_sl) \{}
\DoxyCodeLine{00106     FilePath *result = \textcolor{keyword}{new} FilePath(m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}());}
\DoxyCodeLine{00107     \textcolor{keywordflow}{return} result-\/>create<FilePath>(engine());}
\DoxyCodeLine{00108   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00109     \textcolor{keywordflow}{return} QScriptValue();}
\DoxyCodeLine{00110   \textcolor{keywordflow}{return} m\_sl ? QString::fromStdWString(m\_sl-\/>\mbox{\hyperlink{class_t_xsh_level_a3a59fb1bd3261baee4e889a9edbf0ae8}{getName}}()) : \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00111 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_a8e94a011608b03dcb78eff982c8229b9}\label{class_t_script_binding_1_1_level_a8e94a011608b03dcb78eff982c8229b9}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!getSimpleLevel@{getSimpleLevel}}
\index{getSimpleLevel@{getSimpleLevel}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{getSimpleLevel()}{getSimpleLevel()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsh_simple_level}{TXsh\+Simple\+Level}} $\ast$ TScript\+Binding\+::\+Level\+::get\+Simple\+Level (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00063 \{ \textcolor{keywordflow}{return} m\_sl; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_a3beebe33afe0cb48437c730f34ddb93f}\label{class_t_script_binding_1_1_level_a3beebe33afe0cb48437c730f34ddb93f}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!getType@{getType}}
\index{getType@{getType}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{getType()}{getType()}}
{\footnotesize\ttfamily QString TScript\+Binding\+::\+Level\+::get\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00081                              \{}
\DoxyCodeLine{00082   \textcolor{keywordflow}{if} (m\_type == NO\_XSHLEVEL)}
\DoxyCodeLine{00083     \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}Empty"{}};}
\DoxyCodeLine{00084   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_type == PLI\_XSHLEVEL)}
\DoxyCodeLine{00085     \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}Vector"{}};}
\DoxyCodeLine{00086   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_type == TZP\_XSHLEVEL)}
\DoxyCodeLine{00087     \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}ToonzRaster"{}};}
\DoxyCodeLine{00088   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_type == OVL\_XSHLEVEL)}
\DoxyCodeLine{00089     \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}Raster"{}};}
\DoxyCodeLine{00090   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00091     \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}Unknown"{}};}
\DoxyCodeLine{00092 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_aaf4c38c591572b58dfabae83a93612e9}\label{class_t_script_binding_1_1_level_aaf4c38c591572b58dfabae83a93612e9}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!load@{load}}
\index{load@{load}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{load()}{load()}}
{\footnotesize\ttfamily QScript\+Value TScript\+Binding\+::\+Level\+::load (\begin{DoxyParamCaption}\item[{const QScript\+Value \&}]{fp }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00136                                                   \{}
\DoxyCodeLine{00137   \textcolor{keywordflow}{if} (m\_sl) \{}
\DoxyCodeLine{00138     m\_scene-\/>\mbox{\hyperlink{class_toonz_scene_ac1a8bf0d2cec4f59c87b0001991264b5}{getLevelSet}}()-\/>removeLevel(m\_sl, \textcolor{keyword}{true});}
\DoxyCodeLine{00139     m\_sl-\/>release();}
\DoxyCodeLine{00140     m\_sl = 0;}
\DoxyCodeLine{00141   \}}
\DoxyCodeLine{00142 }
\DoxyCodeLine{00143   \textcolor{comment}{// get the path}}
\DoxyCodeLine{00144   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp;}
\DoxyCodeLine{00145   QScriptValue err = checkFilePath(context(), fpArg, fp);}
\DoxyCodeLine{00146   \textcolor{keywordflow}{if} (err.isError()) \textcolor{keywordflow}{return} err;}
\DoxyCodeLine{00147   QString fpStr = fpArg.toString();}
\DoxyCodeLine{00148 }
\DoxyCodeLine{00149   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00150     \textcolor{keywordflow}{if} (!TSystem::doesExistFileOrLevel(fp)) \{}
\DoxyCodeLine{00151       \textcolor{keywordflow}{return} context()-\/>throwError(tr(\textcolor{stringliteral}{"{}File \%1 doesn't exist"{}}).arg(fpStr));}
\DoxyCodeLine{00152     \}}
\DoxyCodeLine{00153     TFileType::Type fileType = TFileType::getInfo(fp);}
\DoxyCodeLine{00154     \textcolor{keywordflow}{if} (TFileType::isVector(fileType))}
\DoxyCodeLine{00155       m\_type = PLI\_XSHLEVEL;}
\DoxyCodeLine{00156     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (0 != (fileType \& TFileType::CMAPPED\_IMAGE))}
\DoxyCodeLine{00157       m\_type = TZP\_XSHLEVEL;}
\DoxyCodeLine{00158     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (0 != (fileType \& TFileType::RASTER\_IMAGE))}
\DoxyCodeLine{00159       m\_type = OVL\_XSHLEVEL;}
\DoxyCodeLine{00160     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00161       \textcolor{keywordflow}{return} context()-\/>throwError(tr(\textcolor{stringliteral}{"{}File \%1 is unsupported"{}}).arg(fpStr));}
\DoxyCodeLine{00162     \}}
\DoxyCodeLine{00163     \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = m\_scene-\/>\mbox{\hyperlink{class_toonz_scene_ae6bd7d22f6310011d48dfb5176344015}{loadLevel}}(fp);}
\DoxyCodeLine{00164     \textcolor{keywordflow}{if} (xl) \{}
\DoxyCodeLine{00165       m\_sl = xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{00166       m\_sl-\/>addRef();}
\DoxyCodeLine{00167     \}}
\DoxyCodeLine{00168     \textcolor{keywordflow}{return} context()-\/>thisObject();}
\DoxyCodeLine{00169   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00170     \textcolor{keywordflow}{return} context()-\/>throwError(tr(\textcolor{stringliteral}{"{}Exception reading \%1"{}}).arg(fpStr));}
\DoxyCodeLine{00171   \}}
\DoxyCodeLine{00172 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_afcfeb156cc8a97a37f447d67eb411419}\label{class_t_script_binding_1_1_level_afcfeb156cc8a97a37f447d67eb411419}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!save@{save}}
\index{save@{save}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{save()}{save()}}
{\footnotesize\ttfamily QScript\+Value TScript\+Binding\+::\+Level\+::save (\begin{DoxyParamCaption}\item[{const QScript\+Value \&}]{fp }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00174                                                   \{}
\DoxyCodeLine{00175   \textcolor{keywordflow}{if} (getFrameCount() == 0) \{}
\DoxyCodeLine{00176     \textcolor{keywordflow}{return} context()-\/>throwError(tr(\textcolor{stringliteral}{"{}Can't save an empty level"{}}));}
\DoxyCodeLine{00177   \}}
\DoxyCodeLine{00178 }
\DoxyCodeLine{00179   \textcolor{comment}{// get the path}}
\DoxyCodeLine{00180   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp;}
\DoxyCodeLine{00181   QScriptValue err = checkFilePath(context(), fpArg, fp);}
\DoxyCodeLine{00182   \textcolor{keywordflow}{if} (err.isError()) \textcolor{keywordflow}{return} err;}
\DoxyCodeLine{00183   QString fpStr = fpArg.toString();}
\DoxyCodeLine{00184 }
\DoxyCodeLine{00185   \textcolor{comment}{// handle conversion (if it is needed and possible)}}
\DoxyCodeLine{00186   TFileType::Type fileType = TFileType::getInfo(fp);}
\DoxyCodeLine{00187 }
\DoxyCodeLine{00188   \textcolor{keywordtype}{bool} isCompatible = \textcolor{keyword}{false};}
\DoxyCodeLine{00189   \textcolor{keywordflow}{if} (TFileType::isFullColor(fileType)) \{}
\DoxyCodeLine{00190     \textcolor{keywordflow}{if} (m\_sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == OVL\_XSHLEVEL) isCompatible = \textcolor{keyword}{true};}
\DoxyCodeLine{00191   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (TFileType::isVector(fileType)) \{}
\DoxyCodeLine{00192     \textcolor{keywordflow}{if} (m\_sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == PLI\_XSHLEVEL) isCompatible = \textcolor{keyword}{true};}
\DoxyCodeLine{00193   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (fileType \& TFileType::CMAPPED\_IMAGE) \{}
\DoxyCodeLine{00194     \textcolor{keywordflow}{if} (m\_sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == TZP\_XSHLEVEL) isCompatible = \textcolor{keyword}{true};}
\DoxyCodeLine{00195   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00196     \textcolor{keywordflow}{return} context()-\/>throwError(tr(\textcolor{stringliteral}{"{}Unrecognized file type :"{}}).arg(fpStr));}
\DoxyCodeLine{00197   \}}
\DoxyCodeLine{00198   \textcolor{keywordflow}{if} (!isCompatible) \{}
\DoxyCodeLine{00199     \textcolor{keywordflow}{return} context()-\/>throwError(}
\DoxyCodeLine{00200         tr(\textcolor{stringliteral}{"{}Can't save a \%1 level to this file type : \%2"{}})}
\DoxyCodeLine{00201             .arg(getType())}
\DoxyCodeLine{00202             .arg(fpStr));}
\DoxyCodeLine{00203   \}}
\DoxyCodeLine{00204 }
\DoxyCodeLine{00205   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00206     m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a5ceff3b4f997fbe62be18948fc893404}{save}}(fp);}
\DoxyCodeLine{00207   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_system_exception}{TSystemException}} se) \{}
\DoxyCodeLine{00208     \textcolor{keywordflow}{return} context()-\/>throwError(}
\DoxyCodeLine{00209         tr(\textcolor{stringliteral}{"{}Exception writing \%1"{}})}
\DoxyCodeLine{00210             .arg(QString::fromStdWString(se.getMessage())));}
\DoxyCodeLine{00211   \}}
\DoxyCodeLine{00212   \textcolor{keywordflow}{return} context()-\/>thisObject();}
\DoxyCodeLine{00213 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_a6895c67f38ce769e85cb6c621589519f}\label{class_t_script_binding_1_1_level_a6895c67f38ce769e85cb6c621589519f}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!setFrame@{setFrame}}
\index{setFrame@{setFrame}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{setFrame()}{setFrame()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily QScript\+Value TScript\+Binding\+::\+Level\+::set\+Frame (\begin{DoxyParamCaption}\item[{const QScript\+Value \&}]{fid,  }\item[{const QScript\+Value \&}]{image }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00288                                                            \{}
\DoxyCodeLine{00289   QString err;}
\DoxyCodeLine{00290   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = getFid(fidArg, err);}
\DoxyCodeLine{00291   \textcolor{keywordflow}{if} (err != \textcolor{stringliteral}{"{}"{}}) \textcolor{keywordflow}{return} context()-\/>throwError(err);}
\DoxyCodeLine{00292   Image *img = qscriptvalue\_cast<Image *>(imageArg);}
\DoxyCodeLine{00293   \textcolor{keywordflow}{if} (!img) \{}
\DoxyCodeLine{00294     \textcolor{keywordflow}{return} context()-\/>throwError(}
\DoxyCodeLine{00295         tr(\textcolor{stringliteral}{"{}second argument (\%1) is not an image"{}}).arg(imageArg.toString()));}
\DoxyCodeLine{00296   \}}
\DoxyCodeLine{00297 }
\DoxyCodeLine{00298   QString imgType = img-\/>getType();}
\DoxyCodeLine{00299   \textcolor{keywordtype}{int} levelType   = NO\_XSHLEVEL;}
\DoxyCodeLine{00300   \textcolor{keywordflow}{if} (imgType == \textcolor{stringliteral}{"{}ToonzRaster"{}})}
\DoxyCodeLine{00301     levelType = TZP\_XSHLEVEL;}
\DoxyCodeLine{00302   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (imgType == \textcolor{stringliteral}{"{}Raster"{}})}
\DoxyCodeLine{00303     levelType = OVL\_XSHLEVEL;}
\DoxyCodeLine{00304   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (imgType == \textcolor{stringliteral}{"{}Vector"{}})}
\DoxyCodeLine{00305     levelType = PLI\_XSHLEVEL;}
\DoxyCodeLine{00306   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00307     \textcolor{keywordflow}{return} context()-\/>throwError(}
\DoxyCodeLine{00308         tr(\textcolor{stringliteral}{"{}can not insert a \%1 image into a level"{}}).arg(imgType));}
\DoxyCodeLine{00309   \}}
\DoxyCodeLine{00310 }
\DoxyCodeLine{00311   \textcolor{keywordflow}{if} (m\_type == NO\_XSHLEVEL) \{}
\DoxyCodeLine{00312     m\_type        = levelType;}
\DoxyCodeLine{00313     \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = m\_scene-\/>\mbox{\hyperlink{class_toonz_scene_ac8791183db4daa28bdffdd40e15c3b9e}{createNewLevel}}(levelType);}
\DoxyCodeLine{00314     m\_sl          = xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{00315     m\_sl-\/>addRef();}
\DoxyCodeLine{00316     m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ab5634198656dc2ade669fae235bb19c0}{setPalette}}(img-\/>getImg()-\/>getPalette());}
\DoxyCodeLine{00317     \textcolor{keywordflow}{if} (levelType != PLI\_XSHLEVEL) \{}
\DoxyCodeLine{00318       \mbox{\hyperlink{class_level_properties}{LevelProperties}} *lprop = m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}();}
\DoxyCodeLine{00319       lprop-\/>\mbox{\hyperlink{class_level_properties_aef6e555a773c2f69d2089dc9c009f8be}{setDpiPolicy}}(LevelProperties::DP\_ImageDpi);}
\DoxyCodeLine{00320       \textcolor{keywordtype}{int} xres   = img-\/>getWidth();}
\DoxyCodeLine{00321       \textcolor{keywordtype}{int} yres   = img-\/>getHeight();}
\DoxyCodeLine{00322       \textcolor{keywordtype}{double} dpi = img-\/>getDpi();}
\DoxyCodeLine{00323       lprop-\/>\mbox{\hyperlink{class_level_properties_abdaea012fce05b1617350a174790f473}{setDpi}}(dpi);}
\DoxyCodeLine{00324       lprop-\/>\mbox{\hyperlink{class_level_properties_a62b744354e8acc21f75e19fec84bbe6c}{setImageDpi}}(\mbox{\hyperlink{class_t_point_t}{TPointD}}(dpi, dpi));}
\DoxyCodeLine{00325       lprop-\/>\mbox{\hyperlink{class_level_properties_a9dd72acd3e3fd85e3d44c6b44a8f9ff4}{setImageRes}}(\mbox{\hyperlink{class_t_dimension_t}{TDimension}}(xres, yres));}
\DoxyCodeLine{00326       \textcolor{comment}{// lprop-\/>setHasAlpha(true);}}
\DoxyCodeLine{00327     \}}
\DoxyCodeLine{00328   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_type != levelType) \{}
\DoxyCodeLine{00329     \textcolor{keywordflow}{return} context()-\/>throwError(tr(\textcolor{stringliteral}{"{}can not insert a \%1 image to a \%2 level"{}})}
\DoxyCodeLine{00330                                      .arg(imgType)}
\DoxyCodeLine{00331                                      .arg(getType()));}
\DoxyCodeLine{00332   \}}
\DoxyCodeLine{00333   \textcolor{keywordflow}{if} (m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a3fe127306d6669a3eb9e9d8802660d7b}{getFrameCount}}() == 0) m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ab5634198656dc2ade669fae235bb19c0}{setPalette}}(img-\/>getImg()-\/>getPalette());}
\DoxyCodeLine{00334 }
\DoxyCodeLine{00335   m\_sl-\/>setFrame(fid, img-\/>getImg());}
\DoxyCodeLine{00336   m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a2d43337766628739707849f8808bf300}{setDirtyFlag}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00337   \textcolor{keywordflow}{return} context()-\/>thisObject();}
\DoxyCodeLine{00338 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_acfe64d24301f6b2a5870a1b500066633}\label{class_t_script_binding_1_1_level_acfe64d24301f6b2a5870a1b500066633}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!setFrame@{setFrame}}
\index{setFrame@{setFrame}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{setFrame()}{setFrame()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily int TScript\+Binding\+::\+Level\+::set\+Frame (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid,  }\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \&}]{img }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00363                                                            \{}
\DoxyCodeLine{00364   \mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1}{TImage::Type}} imgType = img-\/>\mbox{\hyperlink{class_t_image_a52205464a87894ee940a1083a7641d86}{getType}}();}
\DoxyCodeLine{00365   \textcolor{keywordtype}{int} levelType        = NO\_XSHLEVEL;}
\DoxyCodeLine{00366   \textcolor{keywordflow}{if} (imgType == \mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1a4628781c4add56d9e3f547515561db61}{TImage::TOONZ\_RASTER}})}
\DoxyCodeLine{00367     levelType = TZP\_XSHLEVEL;}
\DoxyCodeLine{00368   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (imgType == \mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1ada6df9de5e7d50b9c9c823871bee09d6}{TImage::RASTER}})}
\DoxyCodeLine{00369     levelType = OVL\_XSHLEVEL;}
\DoxyCodeLine{00370   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (imgType == \mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1aae0e08194ada9a9bb8271dfd21ef8b2e}{TImage::VECTOR}})}
\DoxyCodeLine{00371     levelType = PLI\_XSHLEVEL;}
\DoxyCodeLine{00372   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00373     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00374   \}}
\DoxyCodeLine{00375 }
\DoxyCodeLine{00376   \textcolor{keywordflow}{if} (m\_type == NO\_XSHLEVEL) \{}
\DoxyCodeLine{00377     m\_type        = levelType;}
\DoxyCodeLine{00378     \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = m\_scene-\/>\mbox{\hyperlink{class_toonz_scene_ac8791183db4daa28bdffdd40e15c3b9e}{createNewLevel}}(levelType);}
\DoxyCodeLine{00379     m\_sl          = xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{00380     m\_sl-\/>addRef();}
\DoxyCodeLine{00381     m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ab5634198656dc2ade669fae235bb19c0}{setPalette}}(img-\/>getPalette());}
\DoxyCodeLine{00382     \textcolor{keywordflow}{if} (levelType != PLI\_XSHLEVEL) \{}
\DoxyCodeLine{00383       \mbox{\hyperlink{class_level_properties}{LevelProperties}} *lprop = m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}();}
\DoxyCodeLine{00384       lprop-\/>\mbox{\hyperlink{class_level_properties_aef6e555a773c2f69d2089dc9c009f8be}{setDpiPolicy}}(LevelProperties::DP\_ImageDpi);}
\DoxyCodeLine{00385       \textcolor{keywordtype}{int} xres = 0, yres = 0;}
\DoxyCodeLine{00386       \textcolor{keywordtype}{double} dpix = 0, dpiy = 0;}
\DoxyCodeLine{00387       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} ri = img) \{}
\DoxyCodeLine{00388         \textcolor{keywordflow}{if} (ri-\/>getRaster()) \{}
\DoxyCodeLine{00389           \mbox{\hyperlink{class_t_dimension_t}{TDimension}} size = ri-\/>getRaster()-\/>getSize();}
\DoxyCodeLine{00390           xres            = size.lx;}
\DoxyCodeLine{00391           yres            = size.ly;}
\DoxyCodeLine{00392           ri-\/>getDpi(dpix, dpiy);}
\DoxyCodeLine{00393         \}}
\DoxyCodeLine{00394       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = img) \{}
\DoxyCodeLine{00395         \textcolor{keywordflow}{if} (ti-\/>getRaster()) \{}
\DoxyCodeLine{00396           \mbox{\hyperlink{class_t_dimension_t}{TDimension}} size = ri-\/>getRaster()-\/>getSize();}
\DoxyCodeLine{00397           xres            = size.lx;}
\DoxyCodeLine{00398           yres            = size.ly;}
\DoxyCodeLine{00399           ri-\/>getDpi(dpix, dpiy);}
\DoxyCodeLine{00400         \}}
\DoxyCodeLine{00401       \}}
\DoxyCodeLine{00402       lprop-\/>\mbox{\hyperlink{class_level_properties_abdaea012fce05b1617350a174790f473}{setDpi}}(dpix);}
\DoxyCodeLine{00403       lprop-\/>\mbox{\hyperlink{class_level_properties_a62b744354e8acc21f75e19fec84bbe6c}{setImageDpi}}(\mbox{\hyperlink{class_t_point_t}{TPointD}}(dpix, dpiy));}
\DoxyCodeLine{00404       lprop-\/>\mbox{\hyperlink{class_level_properties_a9dd72acd3e3fd85e3d44c6b44a8f9ff4}{setImageRes}}(\mbox{\hyperlink{class_t_dimension_t}{TDimension}}(xres, yres));}
\DoxyCodeLine{00405       \textcolor{comment}{// lprop-\/>setHasAlpha(true);}}
\DoxyCodeLine{00406     \}}
\DoxyCodeLine{00407   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_type != levelType) \{}
\DoxyCodeLine{00408     \textcolor{keywordflow}{return} -\/2;}
\DoxyCodeLine{00409   \}}
\DoxyCodeLine{00410   \textcolor{keywordflow}{if} (m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a3fe127306d6669a3eb9e9d8802660d7b}{getFrameCount}}() == 0) m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ab5634198656dc2ade669fae235bb19c0}{setPalette}}(img-\/>getPalette());}
\DoxyCodeLine{00411   m\_sl-\/>setFrame(fid, img);}
\DoxyCodeLine{00412   m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a2d43337766628739707849f8808bf300}{setDirtyFlag}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00413   \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{00414 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_a6b3b23b71dbe43535e0161f49e66457d}\label{class_t_script_binding_1_1_level_a6b3b23b71dbe43535e0161f49e66457d}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!setName@{setName}}
\index{setName@{setName}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{setName()}{setName()}}
{\footnotesize\ttfamily void TScript\+Binding\+::\+Level\+::set\+Name (\begin{DoxyParamCaption}\item[{const QString \&}]{name }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00100                                        \{}
\DoxyCodeLine{00101   \textcolor{keywordflow}{if} (m\_sl) m\_sl-\/>setName(name.toStdWString());}
\DoxyCodeLine{00102 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_a3dc7277e9f1ad04c3c4857a0fb6e4249}\label{class_t_script_binding_1_1_level_a3dc7277e9f1ad04c3c4857a0fb6e4249}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!setPath@{setPath}}
\index{setPath@{setPath}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{setPath()}{setPath()}}
{\footnotesize\ttfamily void TScript\+Binding\+::\+Level\+::set\+Path (\begin{DoxyParamCaption}\item[{const QScript\+Value \&}]{name }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00113                                                \{}
\DoxyCodeLine{00114   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp;}
\DoxyCodeLine{00115   FilePath *filePath = qscriptvalue\_cast<FilePath *>(pathArg);}
\DoxyCodeLine{00116   \textcolor{keywordflow}{if} (filePath)}
\DoxyCodeLine{00117     fp = filePath-\/>getToonzFilePath();}
\DoxyCodeLine{00118   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (pathArg.isString())}
\DoxyCodeLine{00119     fp = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(pathArg.toString().toStdString());}
\DoxyCodeLine{00120   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00121     context()-\/>throwError(}
\DoxyCodeLine{00122         tr(\textcolor{stringliteral}{"{}Bad argument (\%1). It should be FilePath or string"{}})}
\DoxyCodeLine{00123             .arg(pathArg.toString()));}
\DoxyCodeLine{00124   \textcolor{keywordflow}{if} (m\_sl) \{}
\DoxyCodeLine{00125     m\_sl-\/>setPath(fp);}
\DoxyCodeLine{00126     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00127       m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a0020922626c177cd3134a05e274aecee}{load}}();}
\DoxyCodeLine{00128     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00129       context()-\/>throwError(}
\DoxyCodeLine{00130           tr(\textcolor{stringliteral}{"{}Exception loading level (\%1)"{}})}
\DoxyCodeLine{00131               .arg(QString::fromStdWString(fp.getWideString())));}
\DoxyCodeLine{00132     \}}
\DoxyCodeLine{00133   \}}
\DoxyCodeLine{00134 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_a91826a4e4e53073b4601e0e26fddec05}\label{class_t_script_binding_1_1_level_a91826a4e4e53073b4601e0e26fddec05}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!toString@{toString}}
\index{toString@{toString}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{toString()}{toString()}}
{\footnotesize\ttfamily QScript\+Value TScript\+Binding\+::\+Level\+::to\+String (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00060                              \{}
\DoxyCodeLine{00061   QString info  = \textcolor{stringliteral}{"{}("{}};}
\DoxyCodeLine{00062   QString comma = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00063   \textcolor{keywordflow}{if} (getName() != \textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{00064     info.append(comma).append(getName());}
\DoxyCodeLine{00065     comma = \textcolor{stringliteral}{"{}, "{}};}
\DoxyCodeLine{00066   \}}
\DoxyCodeLine{00067   info.append(comma).append(tr(\textcolor{stringliteral}{"{}\%1 frames"{}}).arg(getFrameCount()));}
\DoxyCodeLine{00068   info.append(\textcolor{stringliteral}{"{})"{}});}
\DoxyCodeLine{00069   \textcolor{keywordflow}{if} (m\_type == PLI\_XSHLEVEL)}
\DoxyCodeLine{00070     \textcolor{keywordflow}{return} QString(\textcolor{stringliteral}{"{}Vector level \%1"{}}).arg(info);}
\DoxyCodeLine{00071   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_type == TZP\_XSHLEVEL)}
\DoxyCodeLine{00072     \textcolor{keywordflow}{return} QString(\textcolor{stringliteral}{"{}Toonz level \%1"{}}).arg(info);}
\DoxyCodeLine{00073   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_type == NO\_XSHLEVEL)}
\DoxyCodeLine{00074     \textcolor{keywordflow}{return} QString(\textcolor{stringliteral}{"{}Empty level"{}});}
\DoxyCodeLine{00075   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_type == OVL\_XSHLEVEL)}
\DoxyCodeLine{00076     \textcolor{keywordflow}{return} QString(\textcolor{stringliteral}{"{}Raster level \%1"{}}).arg(info);}
\DoxyCodeLine{00077   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00078     \textcolor{keywordflow}{return} QString(\textcolor{stringliteral}{"{}Level \%1"{}}).arg(info);}
\DoxyCodeLine{00079 \}}

\end{DoxyCode}


\doxysubsection{Property Documentation}
\mbox{\Hypertarget{class_t_script_binding_1_1_level_a7887795305025dbd2f4f5eede3e43dbe}\label{class_t_script_binding_1_1_level_a7887795305025dbd2f4f5eede3e43dbe}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!frameCount@{frameCount}}
\index{frameCount@{frameCount}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{frameCount}{frameCount}}
{\footnotesize\ttfamily int TScript\+Binding\+::\+Level\+::frame\+Count\hspace{0.3cm}{\ttfamily [read]}}

\mbox{\Hypertarget{class_t_script_binding_1_1_level_a771c477109db3268a07781bc93b63c43}\label{class_t_script_binding_1_1_level_a771c477109db3268a07781bc93b63c43}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!name@{name}}
\index{name@{name}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{name}{name}}
{\footnotesize\ttfamily QString TScript\+Binding\+::\+Level\+::name\hspace{0.3cm}{\ttfamily [read]}, {\ttfamily [write]}}

\mbox{\Hypertarget{class_t_script_binding_1_1_level_a7596d33a22d0cbab10508567e633fbcb}\label{class_t_script_binding_1_1_level_a7596d33a22d0cbab10508567e633fbcb}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!path@{path}}
\index{path@{path}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{path}{path}}
{\footnotesize\ttfamily QScript\+Value TScript\+Binding\+::\+Level\+::path\hspace{0.3cm}{\ttfamily [read]}, {\ttfamily [write]}}

\mbox{\Hypertarget{class_t_script_binding_1_1_level_af28ba229701534cca055893e37c3c7dc}\label{class_t_script_binding_1_1_level_af28ba229701534cca055893e37c3c7dc}} 
\index{TScriptBinding::Level@{TScriptBinding::Level}!type@{type}}
\index{type@{type}!TScriptBinding::Level@{TScriptBinding::Level}}
\doxysubsubsection{\texorpdfstring{type}{type}}
{\footnotesize\ttfamily QString TScript\+Binding\+::\+Level\+::type\hspace{0.3cm}{\ttfamily [read]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonz/scriptbinding\+\_\+level.\+h\item 
E\+:/opentoonz/toonz/sources/toonzlib/scriptbinding\+\_\+level.\+cpp\end{DoxyCompactItemize}
