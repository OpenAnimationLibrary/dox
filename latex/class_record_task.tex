\hypertarget{class_record_task}{}\doxysection{Record\+Task Class Reference}
\label{class_record_task}\index{RecordTask@{RecordTask}}
Inheritance diagram for Record\+Task\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_record_task}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_record_task_a2aab3fc43d045f47ca7dba9b78c03db1}{Record\+Task}} (std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_t_sound_input_device_imp}{TSound\+Input\+Device\+Imp}} $>$ dev)
\item 
void \mbox{\hyperlink{class_record_task_ae4c2034b89607059c7e7dfc3fcca87a3}{run}} () override
\begin{DoxyCompactList}\small\item\em The central code of the task that is executed by a worker thread. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_record_task_af0b9d7227b85c3de2eae76a93bdfb923}{Record\+Task}} (\mbox{\hyperlink{class_t_sound_input_device_imp}{TSound\+Input\+Device\+Imp}} $\ast$dev\+Imp, int num\+Byte)
\item 
void \mbox{\hyperlink{class_record_task_a50595a867aa01463105b6a600383ea09}{run}} ()
\begin{DoxyCompactList}\small\item\em The central code of the task that is executed by a worker thread. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_t_sound_input_device_imp}{TSound\+Input\+Device\+Imp}} $>$ \mbox{\hyperlink{class_record_task_ac88d07821a876249606f35be2516c4eb}{m\+\_\+dev}}
\item 
\mbox{\hyperlink{class_t_sound_input_device_imp}{TSound\+Input\+Device\+Imp}} $\ast$ \mbox{\hyperlink{class_record_task_a6d8e1d762bc96e56b219fc34450df779}{m\+\_\+dev\+Imp}}
\item 
int \mbox{\hyperlink{class_record_task_a44e8d8da499681df967880c7c96f3e4b}{m\+\_\+\+Byte\+To\+Sample}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_record_task_a2aab3fc43d045f47ca7dba9b78c03db1}\label{class_record_task_a2aab3fc43d045f47ca7dba9b78c03db1}} 
\index{RecordTask@{RecordTask}!RecordTask@{RecordTask}}
\index{RecordTask@{RecordTask}!RecordTask@{RecordTask}}
\doxysubsubsection{\texorpdfstring{RecordTask()}{RecordTask()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily Record\+Task\+::\+Record\+Task (\begin{DoxyParamCaption}\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_t_sound_input_device_imp}{TSound\+Input\+Device\+Imp}} $>$}]{dev }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01020       : Runnable(), m\_dev(std::move(dev)) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_record_task_a9032ffc14e3b930d36958c64e8a642f1}\label{class_record_task_a9032ffc14e3b930d36958c64e8a642f1}} 
\index{RecordTask@{RecordTask}!````~RecordTask@{$\sim$RecordTask}}
\index{````~RecordTask@{$\sim$RecordTask}!RecordTask@{RecordTask}}
\doxysubsubsection{\texorpdfstring{$\sim$RecordTask()}{~RecordTask()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily Record\+Task\+::$\sim$\+Record\+Task (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01022 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_record_task_af0b9d7227b85c3de2eae76a93bdfb923}\label{class_record_task_af0b9d7227b85c3de2eae76a93bdfb923}} 
\index{RecordTask@{RecordTask}!RecordTask@{RecordTask}}
\index{RecordTask@{RecordTask}!RecordTask@{RecordTask}}
\doxysubsubsection{\texorpdfstring{RecordTask()}{RecordTask()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily Record\+Task\+::\+Record\+Task (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_sound_input_device_imp}{TSound\+Input\+Device\+Imp}} $\ast$}]{dev\+Imp,  }\item[{int}]{num\+Byte }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00378       : \mbox{\hyperlink{class_t_thread_1_1_runnable}{TThread::Runnable}}(), m\_devImp(devImp), m\_ByteToSample(numByte)\{\};}

\end{DoxyCode}
\mbox{\Hypertarget{class_record_task_a9032ffc14e3b930d36958c64e8a642f1}\label{class_record_task_a9032ffc14e3b930d36958c64e8a642f1}} 
\index{RecordTask@{RecordTask}!````~RecordTask@{$\sim$RecordTask}}
\index{````~RecordTask@{$\sim$RecordTask}!RecordTask@{RecordTask}}
\doxysubsubsection{\texorpdfstring{$\sim$RecordTask()}{~RecordTask()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily Record\+Task\+::$\sim$\+Record\+Task (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00380 \{\};}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_record_task_a50595a867aa01463105b6a600383ea09}\label{class_record_task_a50595a867aa01463105b6a600383ea09}} 
\index{RecordTask@{RecordTask}!run@{run}}
\index{run@{run}!RecordTask@{RecordTask}}
\doxysubsubsection{\texorpdfstring{run()}{run()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Record\+Task\+::run (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



The central code of the task that is executed by a worker thread. 



Implements \mbox{\hyperlink{class_t_thread_1_1_runnable_ad3b8ee5e7b375bd169f7382fa26b00ef}{TThread\+::\+Runnable}}.

\mbox{\Hypertarget{class_record_task_ae4c2034b89607059c7e7dfc3fcca87a3}\label{class_record_task_ae4c2034b89607059c7e7dfc3fcca87a3}} 
\index{RecordTask@{RecordTask}!run@{run}}
\index{run@{run}!RecordTask@{RecordTask}}
\doxysubsubsection{\texorpdfstring{run()}{run()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Record\+Task\+::run (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



The central code of the task that is executed by a worker thread. 



Implements \mbox{\hyperlink{class_t_thread_1_1_runnable_ad3b8ee5e7b375bd169f7382fa26b00ef}{TThread\+::\+Runnable}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01385                      \{}
\DoxyCodeLine{01386   m\_dev-\/>start();}
\DoxyCodeLine{01387 }
\DoxyCodeLine{01388   \textcolor{keywordflow}{if} (m\_dev-\/>m\_allocateBuff) \{}
\DoxyCodeLine{01389     TINT32 bytePerSec =}
\DoxyCodeLine{01390         m\_dev-\/>m\_format.m\_sampleRate *}
\DoxyCodeLine{01391         ((m\_dev-\/>m\_format.m\_bitPerSample * m\_dev-\/>m\_format.m\_channelCount) >>}
\DoxyCodeLine{01392          3);}
\DoxyCodeLine{01393 }
\DoxyCodeLine{01394     \textcolor{keywordflow}{while} (m\_dev-\/>m\_whdr[(m\_dev-\/>m\_index + 1) \% m\_dev-\/>m\_whdr.size()].dwFlags \&}
\DoxyCodeLine{01395            WHDR\_PREPARED) \{}
\DoxyCodeLine{01396       \textcolor{keywordflow}{if} (m\_dev-\/>m\_isRecording)}
\DoxyCodeLine{01397         WaitForSingleObject(m\_dev-\/>m\_hBlockDone, INFINITE);}
\DoxyCodeLine{01398       \textcolor{keywordtype}{int} indexToPrepare = m\_dev-\/>m\_index;}
\DoxyCodeLine{01399 }
\DoxyCodeLine{01400       \textcolor{comment}{// calcolo l'indice successivo per far l'unprepare}}
\DoxyCodeLine{01401       m\_dev-\/>m\_index = (m\_dev-\/>m\_index + 1) \% m\_dev-\/>m\_whdr.size();}
\DoxyCodeLine{01402       \textcolor{keywordflow}{if} (m\_dev-\/>m\_whdr[m\_dev-\/>m\_index].dwFlags \& WHDR\_DONE) \{}
\DoxyCodeLine{01403         TINT32 byteRecorded = m\_dev-\/>m\_whdr[m\_dev-\/>m\_index].dwBytesRecorded;}
\DoxyCodeLine{01404         \textcolor{keywordflow}{if} (byteRecorded) \{}
\DoxyCodeLine{01405           m\_dev-\/>m\_recordedBlocks.push\_back(}
\DoxyCodeLine{01406               m\_dev-\/>m\_whdr[m\_dev-\/>m\_index].lpData);}
\DoxyCodeLine{01407           m\_dev-\/>m\_byteRecorded += byteRecorded;}
\DoxyCodeLine{01408         \}}
\DoxyCodeLine{01409 }
\DoxyCodeLine{01410         \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01411           m\_dev-\/>unprepareHeader(m\_dev-\/>m\_whdr[m\_dev-\/>m\_index]);}
\DoxyCodeLine{01412         \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&) \{}
\DoxyCodeLine{01413           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)m\_dev-\/>m\_recordedBlocks.size(); ++i)}
\DoxyCodeLine{01414             \textcolor{keyword}{delete}[] m\_dev-\/>m\_recordedBlocks[i];}
\DoxyCodeLine{01415           \textcolor{keywordflow}{return};}
\DoxyCodeLine{01416         \}}
\DoxyCodeLine{01417 }
\DoxyCodeLine{01418         \textcolor{keywordflow}{if} (byteRecorded == 0) \{}
\DoxyCodeLine{01419           \textcolor{keyword}{delete}[] m\_dev-\/>m\_whdr[m\_dev-\/>m\_index].lpData;}
\DoxyCodeLine{01420         \}}
\DoxyCodeLine{01421 }
\DoxyCodeLine{01422         \textcolor{comment}{// con questo controllo si evita che vengano accodati nuovi blocchi}}
\DoxyCodeLine{01423         \textcolor{comment}{// dopo che e' stata chiamata la waveInReset}}
\DoxyCodeLine{01424         \textcolor{keywordflow}{if} (m\_dev-\/>m\_isRecording) \{}
\DoxyCodeLine{01425           \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01426             m\_dev-\/>prepareHeader(\textcolor{keyword}{new} \textcolor{keywordtype}{char}[bytePerSec], bytePerSec,}
\DoxyCodeLine{01427                                  m\_dev-\/>m\_whdr[indexToPrepare]);}
\DoxyCodeLine{01428 }
\DoxyCodeLine{01429             m\_dev-\/>addBlock(m\_dev-\/>m\_whdr[indexToPrepare]);}
\DoxyCodeLine{01430           \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&) \{}
\DoxyCodeLine{01431             m\_dev-\/>m\_isRecording = \textcolor{keyword}{false};}
\DoxyCodeLine{01432             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)m\_dev-\/>m\_recordedBlocks.size(); ++i)}
\DoxyCodeLine{01433               \textcolor{keyword}{delete}[] m\_dev-\/>m\_recordedBlocks[i];}
\DoxyCodeLine{01434             \textcolor{keywordflow}{return};}
\DoxyCodeLine{01435           \}}
\DoxyCodeLine{01436         \}}
\DoxyCodeLine{01437 }
\DoxyCodeLine{01438       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01439         m\_dev-\/>m\_index = indexToPrepare;}
\DoxyCodeLine{01440     \}}
\DoxyCodeLine{01441   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01442     \textcolor{keywordflow}{if} (m\_dev-\/>m\_isRecording)}
\DoxyCodeLine{01443       WaitForSingleObject(m\_dev-\/>m\_hBlockDone, INFINITE);}
\DoxyCodeLine{01444     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01445       m\_dev-\/>unprepareHeader(m\_dev-\/>m\_whdr[m\_dev-\/>m\_index]);}
\DoxyCodeLine{01446       m\_dev-\/>m\_isRecording = \textcolor{keyword}{false};}
\DoxyCodeLine{01447     \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&) \{}
\DoxyCodeLine{01448       m\_dev-\/>m\_isRecording = \textcolor{keyword}{false};}
\DoxyCodeLine{01449       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01450     \}}
\DoxyCodeLine{01451   \}}
\DoxyCodeLine{01452 }
\DoxyCodeLine{01453   SetEvent(m\_dev-\/>m\_hLastBlockDone);}
\DoxyCodeLine{01454   \textcolor{keywordflow}{return};}
\DoxyCodeLine{01455 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_record_task_a44e8d8da499681df967880c7c96f3e4b}\label{class_record_task_a44e8d8da499681df967880c7c96f3e4b}} 
\index{RecordTask@{RecordTask}!m\_ByteToSample@{m\_ByteToSample}}
\index{m\_ByteToSample@{m\_ByteToSample}!RecordTask@{RecordTask}}
\doxysubsubsection{\texorpdfstring{m\_ByteToSample}{m\_ByteToSample}}
{\footnotesize\ttfamily int Record\+Task\+::m\+\_\+\+Byte\+To\+Sample}

\mbox{\Hypertarget{class_record_task_ac88d07821a876249606f35be2516c4eb}\label{class_record_task_ac88d07821a876249606f35be2516c4eb}} 
\index{RecordTask@{RecordTask}!m\_dev@{m\_dev}}
\index{m\_dev@{m\_dev}!RecordTask@{RecordTask}}
\doxysubsubsection{\texorpdfstring{m\_dev}{m\_dev}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{class_t_sound_input_device_imp}{TSound\+Input\+Device\+Imp}}$>$ Record\+Task\+::m\+\_\+dev}

\mbox{\Hypertarget{class_record_task_a6d8e1d762bc96e56b219fc34450df779}\label{class_record_task_a6d8e1d762bc96e56b219fc34450df779}} 
\index{RecordTask@{RecordTask}!m\_devImp@{m\_devImp}}
\index{m\_devImp@{m\_devImp}!RecordTask@{RecordTask}}
\doxysubsubsection{\texorpdfstring{m\_devImp}{m\_devImp}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_sound_input_device_imp}{TSound\+Input\+Device\+Imp}}$\ast$ Record\+Task\+::m\+\_\+dev\+Imp}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/common/tsound/tsound\+\_\+nt.\+cpp\item 
E\+:/opentoonz/toonz/sources/common/tsound/tsound\+\_\+qt.\+cpp\end{DoxyCompactItemize}
