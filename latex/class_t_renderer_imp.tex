\hypertarget{class_t_renderer_imp}{}\doxysection{TRenderer\+Imp Class Reference}
\label{class_t_renderer_imp}\index{TRendererImp@{TRendererImp}}
Inheritance diagram for TRenderer\+Imp\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_t_renderer_imp}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_t_renderer_imp_1_1_render_instance_infos}{Render\+Instance\+Infos}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
typedef std\+::vector$<$ \mbox{\hyperlink{class_t_render_port}{TRender\+Port}} $\ast$ $>$ \mbox{\hyperlink{class_t_renderer_imp_a45217859ba2dd18650251dadbfca0e4d}{Port\+Container}}
\item 
typedef Port\+Container\+::iterator \mbox{\hyperlink{class_t_renderer_imp_a365b5cb0cb788a7c253583393248c592}{Port\+Container\+Iterator}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_renderer_imp_aa17e7208fda2dd6c7de9f6670bd4e46d}{TRenderer\+Imp}} (int n\+Threads)
\item 
void \mbox{\hyperlink{class_t_renderer_imp_ae2e00dda5d993c9e7e28c6f76f575add}{start\+Rendering}} (unsigned long render\+Id, const std\+::vector$<$ \mbox{\hyperlink{struct_t_renderer_1_1_render_data}{TRenderer\+::\+Render\+Data}} $>$ \&render\+Datas)
\item 
void \mbox{\hyperlink{class_t_renderer_imp_aa85d7738400ff9b82abd811ce7737210}{notify\+Raster\+Started}} (const \mbox{\hyperlink{struct_t_render_port_1_1_render_data}{TRender\+Port\+::\+Render\+Data}} \&rd)
\item 
void \mbox{\hyperlink{class_t_renderer_imp_a9afe6ad8572d58623047656641c520c2}{notify\+Raster\+Completed}} (const \mbox{\hyperlink{struct_t_render_port_1_1_render_data}{TRender\+Port\+::\+Render\+Data}} \&rd)
\item 
void \mbox{\hyperlink{class_t_renderer_imp_a5f4db5bc4b0a53e20503a3f6a7790ebe}{notify\+Raster\+Failure}} (const \mbox{\hyperlink{struct_t_render_port_1_1_render_data}{TRender\+Port\+::\+Render\+Data}} \&rd, \mbox{\hyperlink{class_t_exception}{TException}} \&e)
\item 
void \mbox{\hyperlink{class_t_renderer_imp_adc6ba1146cc94388d9253f2e7a88815d}{notify\+Render\+Finished}} (bool is\+Canceled=false)
\item 
void \mbox{\hyperlink{class_t_renderer_imp_affc190dbc7c32250b39e67ecc4e80852}{add\+Port}} (\mbox{\hyperlink{class_t_render_port}{TRender\+Port}} $\ast$port)
\item 
void \mbox{\hyperlink{class_t_renderer_imp_a53302287e4fdd2daae34b3e243ac7228}{remove\+Port}} (\mbox{\hyperlink{class_t_render_port}{TRender\+Port}} $\ast$port)
\item 
void \mbox{\hyperlink{class_t_renderer_imp_a9d63e9a34f7d8084a89299dd4f78df5e}{abort\+Rendering}} (unsigned long render\+Id)
\item 
void \mbox{\hyperlink{class_t_renderer_imp_a410012b2651489b432a5a86b249a3885}{stop\+Rendering}} (bool wait\+For\+Complete\+Stop)
\item 
bool \mbox{\hyperlink{class_t_renderer_imp_a6c7021d0011f0cca517e07d84eb9e7cf}{has\+To\+Die}} (unsigned long render\+Id)
\item 
int \mbox{\hyperlink{class_t_renderer_imp_ad10a875636d1fcd381542ced3b00d899}{get\+Render\+Status}} (unsigned long render\+Id)
\item 
void \mbox{\hyperlink{class_t_renderer_imp_a0eaa3929e606db417087a3807f03370e}{enable\+Precomputing}} (bool on)
\item 
bool \mbox{\hyperlink{class_t_renderer_imp_aa7a0a90e7891c29be3861d374a261afe}{is\+Precomputing\+Enabled}} () const
\item 
void \mbox{\hyperlink{class_t_renderer_imp_ad7557a95efaebc545a78e1f1ada36f18}{set\+Threads\+Count}} (int n\+Threads)
\item 
void \mbox{\hyperlink{class_t_renderer_imp_a1532f7eee52a3a2248e01d0f5c244e7a}{declare\+Render\+Start}} (unsigned long render\+Id)
\item 
void \mbox{\hyperlink{class_t_renderer_imp_af3eebbf1de7302ef60b3bba30a550920}{declare\+Render\+End}} (unsigned long render\+Id)
\item 
void \mbox{\hyperlink{class_t_renderer_imp_a9862d598af933f8be8da60aa2f15183d}{declare\+Frame\+Start}} (double frame)
\item 
void \mbox{\hyperlink{class_t_renderer_imp_afe97f393b05cfd9c7a27a22299abc07c}{declare\+Frame\+End}} (double frame)
\item 
void \mbox{\hyperlink{class_t_renderer_imp_ae1c2843e17cf9a9237c003c63aaa6380}{declare\+Status\+Start}} (int render\+Status)
\item 
void \mbox{\hyperlink{class_t_renderer_imp_ad06b8cc86c275ed52670520a9031416d}{declare\+Status\+End}} (int render\+Status)
\item 
void \mbox{\hyperlink{class_t_renderer_imp_ac704f9440e950f1f3d56cf89c51c6720}{quit\+Waiting\+Loops}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
QRead\+Write\+Lock \mbox{\hyperlink{class_t_renderer_imp_a5a1073f12ea66011d0de024831148245}{m\+\_\+ports\+Lock}}
\item 
Port\+Container \mbox{\hyperlink{class_t_renderer_imp_a671628d910121f4f98f755cc8b208475}{m\+\_\+ports}}
\item 
QMutex \mbox{\hyperlink{class_t_renderer_imp_a998881fa696530ffc00537aa4da197d1}{m\+\_\+render\+Instances\+Mutex}}
\item 
std\+::map$<$ unsigned long, \mbox{\hyperlink{struct_t_renderer_imp_1_1_render_instance_infos}{Render\+Instance\+Infos}} $>$ \mbox{\hyperlink{class_t_renderer_imp_ad71ba179d2400c6d6f2ddd71aed3ead3}{m\+\_\+active\+Instances}}
\item 
unsigned long \mbox{\hyperlink{class_t_renderer_imp_a7756ecb318e0f0bc8ba0c94916edf45a}{m\+\_\+renderer\+Id}}
\item 
\mbox{\hyperlink{class_t_thread_1_1_executor}{Executor}} \mbox{\hyperlink{class_t_renderer_imp_a790fcef435606587a728c5af720d21cd}{m\+\_\+executor}}
\item 
bool \mbox{\hyperlink{class_t_renderer_imp_afd4b309a4e02dc69547fcbf52afc06fd}{m\+\_\+precomputing\+Enabled}}
\item 
\mbox{\hyperlink{class_raster_pool}{Raster\+Pool}} \mbox{\hyperlink{class_t_renderer_imp_a878ac1ea9a1d80f4f62e9c5bf3661208}{m\+\_\+raster\+Pool}}
\item 
std\+::vector$<$ \mbox{\hyperlink{class_t_render_resource_manager}{TRender\+Resource\+Manager}} $\ast$ $>$ \mbox{\hyperlink{class_t_renderer_imp_a5e37a140b2dbc58a91ea3990edbee866}{m\+\_\+managers}}
\item 
\mbox{\hyperlink{class_t_atomic_var}{TAtomic\+Var}} \mbox{\hyperlink{class_t_renderer_imp_af54b13ff3f0c4ca93454cefff3442fac}{m\+\_\+undone\+Tasks}}
\item 
std\+::vector$<$ bool $\ast$ $>$ \mbox{\hyperlink{class_t_renderer_imp_a2efbe24cd7e576ae98f98fa0aae8d2ed}{m\+\_\+waiting\+Loops}}
\item 
\mbox{\hyperlink{class_t_raster_fx_p}{TRaster\+FxP}} \mbox{\hyperlink{class_t_renderer_imp_a1f1c542df19de3031d656c1ba65985ae}{root\+Fx}}
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static unsigned long \mbox{\hyperlink{class_t_renderer_imp_a9eee32924e0369985a74672effb7c045}{m\+\_\+renderer\+Id\+Counter}} = 0
\begin{DoxyCompactList}\small\item\em The renderer Id is a number uniquely associated with a \mbox{\hyperlink{class_t_renderer}{TRenderer}} instance. \end{DoxyCompactList}\item 
static unsigned long \mbox{\hyperlink{class_t_renderer_imp_abe57a8e8f813a289a96da2b29cbf6c17}{m\+\_\+render\+Id\+Counter}} = 0
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{class_t_renderer_imp_a45217859ba2dd18650251dadbfca0e4d}\label{class_t_renderer_imp_a45217859ba2dd18650251dadbfca0e4d}} 
\index{TRendererImp@{TRendererImp}!PortContainer@{PortContainer}}
\index{PortContainer@{PortContainer}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{PortContainer}{PortContainer}}
{\footnotesize\ttfamily typedef std\+::vector$<$\mbox{\hyperlink{class_t_render_port}{TRender\+Port}} $\ast$$>$ TRenderer\+Imp\+::\+Port\+Container}

\mbox{\Hypertarget{class_t_renderer_imp_a365b5cb0cb788a7c253583393248c592}\label{class_t_renderer_imp_a365b5cb0cb788a7c253583393248c592}} 
\index{TRendererImp@{TRendererImp}!PortContainerIterator@{PortContainerIterator}}
\index{PortContainerIterator@{PortContainerIterator}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{PortContainerIterator}{PortContainerIterator}}
{\footnotesize\ttfamily typedef Port\+Container\+::iterator TRenderer\+Imp\+::\+Port\+Container\+Iterator}



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_renderer_imp_aa17e7208fda2dd6c7de9f6670bd4e46d}\label{class_t_renderer_imp_aa17e7208fda2dd6c7de9f6670bd4e46d}} 
\index{TRendererImp@{TRendererImp}!TRendererImp@{TRendererImp}}
\index{TRendererImp@{TRendererImp}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{TRendererImp()}{TRendererImp()}}
{\footnotesize\ttfamily TRenderer\+Imp\+::\+TRenderer\+Imp (\begin{DoxyParamCaption}\item[{int}]{n\+Threads }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00687     : m\_executor()}
\DoxyCodeLine{00688     , m\_undoneTasks()}
\DoxyCodeLine{00689     , m\_rendererId(\mbox{\hyperlink{class_t_renderer_imp_a9eee32924e0369985a74672effb7c045}{m\_rendererIdCounter}}++)}
\DoxyCodeLine{00690     , m\_precomputingEnabled(\textcolor{keyword}{true}) \{}
\DoxyCodeLine{00691   m\_executor.\mbox{\hyperlink{class_t_thread_1_1_executor_a85231531a2fa273db401f090c9aba4ea}{setMaxActiveTasks}}(nThreads);}
\DoxyCodeLine{00692 }
\DoxyCodeLine{00693   std::vector<TRenderResourceManagerGenerator *> \&generators =}
\DoxyCodeLine{00694       TRenderResourceManagerGenerator::generators(\textcolor{keyword}{false});}
\DoxyCodeLine{00695 }
\DoxyCodeLine{00696   \textcolor{comment}{// May be adopted by other TRenderers from now on.}}
\DoxyCodeLine{00697   addRef();}
\DoxyCodeLine{00698 }
\DoxyCodeLine{00699   rendererStorage.setLocalData(\textcolor{keyword}{new} (\mbox{\hyperlink{class_t_renderer_imp}{TRendererImp}} *)(\textcolor{keyword}{this}));}
\DoxyCodeLine{00700 }
\DoxyCodeLine{00701   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00702   \textcolor{keywordflow}{for} (i = 0; i < generators.size(); ++i) \{}
\DoxyCodeLine{00703     \mbox{\hyperlink{class_t_render_resource_manager}{TRenderResourceManager}} *manager = (*generators[i])();}
\DoxyCodeLine{00704     \textcolor{keywordflow}{if} (manager) m\_managers.push\_back(manager);}
\DoxyCodeLine{00705   \}}
\DoxyCodeLine{00706 }
\DoxyCodeLine{00707   rendererStorage.setLocalData(0);}
\DoxyCodeLine{00708 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_a2997a7607366933c0bfc1d50f05891bf}\label{class_t_renderer_imp_a2997a7607366933c0bfc1d50f05891bf}} 
\index{TRendererImp@{TRendererImp}!````~TRendererImp@{$\sim$TRendererImp}}
\index{````~TRendererImp@{$\sim$TRendererImp}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{$\sim$TRendererImp()}{~TRendererImp()}}
{\footnotesize\ttfamily TRenderer\+Imp\+::$\sim$\+TRenderer\+Imp (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00712                             \{}
\DoxyCodeLine{00713   rendererStorage.setLocalData(\textcolor{keyword}{new} (\mbox{\hyperlink{class_t_renderer_imp}{TRendererImp}} *)(\textcolor{keyword}{this}));}
\DoxyCodeLine{00714 }
\DoxyCodeLine{00715   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00716   \textcolor{keywordflow}{for} (i = m\_managers.size() -\/ 1; i >= 0; -\/-\/i)}
\DoxyCodeLine{00717     \textcolor{keywordflow}{if} (m\_managers[i]-\/>renderHasOwnership()) \textcolor{keyword}{delete} m\_managers[i];}
\DoxyCodeLine{00718 }
\DoxyCodeLine{00719   rendererStorage.setLocalData(0);}
\DoxyCodeLine{00720 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_renderer_imp_a9d63e9a34f7d8084a89299dd4f78df5e}\label{class_t_renderer_imp_a9d63e9a34f7d8084a89299dd4f78df5e}} 
\index{TRendererImp@{TRendererImp}!abortRendering@{abortRendering}}
\index{abortRendering@{abortRendering}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{abortRendering()}{abortRendering()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::abort\+Rendering (\begin{DoxyParamCaption}\item[{unsigned long}]{render\+Id }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00764                                                         \{}
\DoxyCodeLine{00765   QMutexLocker sl(\&m\_renderInstancesMutex);}
\DoxyCodeLine{00766 }
\DoxyCodeLine{00767   std::map<unsigned long, RenderInstanceInfos>::iterator it =}
\DoxyCodeLine{00768       m\_activeInstances.find(renderId);}
\DoxyCodeLine{00769   \textcolor{keywordflow}{if} (it != m\_activeInstances.end()) it-\/>second.m\_canceled = \textcolor{keyword}{true};}
\DoxyCodeLine{00770 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_affc190dbc7c32250b39e67ecc4e80852}\label{class_t_renderer_imp_affc190dbc7c32250b39e67ecc4e80852}} 
\index{TRendererImp@{TRendererImp}!addPort@{addPort}}
\index{addPort@{addPort}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{addPort()}{addPort()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::add\+Port (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_render_port}{TRender\+Port}} $\ast$}]{port }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00724                                             \{}
\DoxyCodeLine{00725   QWriteLocker sl(\&m\_portsLock);}
\DoxyCodeLine{00726 }
\DoxyCodeLine{00727   PortContainerIterator it = std::find(m\_ports.begin(), m\_ports.end(), port);}
\DoxyCodeLine{00728   \textcolor{keywordflow}{if} (it == m\_ports.end()) m\_ports.push\_back(port);}
\DoxyCodeLine{00729 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_afe97f393b05cfd9c7a27a22299abc07c}\label{class_t_renderer_imp_afe97f393b05cfd9c7a27a22299abc07c}} 
\index{TRendererImp@{TRendererImp}!declareFrameEnd@{declareFrameEnd}}
\index{declareFrameEnd@{declareFrameEnd}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{declareFrameEnd()}{declareFrameEnd()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::declare\+Frame\+End (\begin{DoxyParamCaption}\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00548                                                       \{}
\DoxyCodeLine{00549   \textcolor{comment}{// Inform the resource managers}}
\DoxyCodeLine{00550   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = m\_managers.size() -\/ 1; i >= 0; -\/-\/i)}
\DoxyCodeLine{00551     m\_managers[i]-\/>onRenderFrameEnd(frame);}
\DoxyCodeLine{00552 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_a9862d598af933f8be8da60aa2f15183d}\label{class_t_renderer_imp_a9862d598af933f8be8da60aa2f15183d}} 
\index{TRendererImp@{TRendererImp}!declareFrameStart@{declareFrameStart}}
\index{declareFrameStart@{declareFrameStart}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{declareFrameStart()}{declareFrameStart()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::declare\+Frame\+Start (\begin{DoxyParamCaption}\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00535                                                         \{}
\DoxyCodeLine{00536   \textcolor{comment}{// Inform the resource managers}}
\DoxyCodeLine{00537   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < m\_managers.size(); ++i)}
\DoxyCodeLine{00538     m\_managers[i]-\/>onRenderFrameStart(frame);}
\DoxyCodeLine{00539 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_af3eebbf1de7302ef60b3bba30a550920}\label{class_t_renderer_imp_af3eebbf1de7302ef60b3bba30a550920}} 
\index{TRendererImp@{TRendererImp}!declareRenderEnd@{declareRenderEnd}}
\index{declareRenderEnd@{declareRenderEnd}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{declareRenderEnd()}{declareRenderEnd()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::declare\+Render\+End (\begin{DoxyParamCaption}\item[{unsigned long}]{render\+Id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00522                                                                  \{}
\DoxyCodeLine{00523   \textcolor{comment}{// Inform the resource managers}}
\DoxyCodeLine{00524   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = m\_managers.size() -\/ 1; i >= 0; -\/-\/i)}
\DoxyCodeLine{00525     m\_managers[i]-\/>onRenderInstanceEnd(renderId);}
\DoxyCodeLine{00526 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_a1532f7eee52a3a2248e01d0f5c244e7a}\label{class_t_renderer_imp_a1532f7eee52a3a2248e01d0f5c244e7a}} 
\index{TRendererImp@{TRendererImp}!declareRenderStart@{declareRenderStart}}
\index{declareRenderStart@{declareRenderStart}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{declareRenderStart()}{declareRenderStart()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::declare\+Render\+Start (\begin{DoxyParamCaption}\item[{unsigned long}]{render\+Id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00509                                                                    \{}
\DoxyCodeLine{00510   \textcolor{comment}{// Inform the resource managers}}
\DoxyCodeLine{00511   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < m\_managers.size(); ++i)}
\DoxyCodeLine{00512     m\_managers[i]-\/>onRenderInstanceStart(renderId);}
\DoxyCodeLine{00513 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_ad06b8cc86c275ed52670520a9031416d}\label{class_t_renderer_imp_ad06b8cc86c275ed52670520a9031416d}} 
\index{TRendererImp@{TRendererImp}!declareStatusEnd@{declareStatusEnd}}
\index{declareStatusEnd@{declareStatusEnd}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{declareStatusEnd()}{declareStatusEnd()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::declare\+Status\+End (\begin{DoxyParamCaption}\item[{int}]{render\+Status }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00567                                                            \{}
\DoxyCodeLine{00568   \textcolor{comment}{// Inform the resource managers}}
\DoxyCodeLine{00569   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = m\_managers.size() -\/ 1; i >= 0; -\/-\/i)}
\DoxyCodeLine{00570     m\_managers[i]-\/>onRenderStatusEnd(renderStatus);}
\DoxyCodeLine{00571 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_ae1c2843e17cf9a9237c003c63aaa6380}\label{class_t_renderer_imp_ae1c2843e17cf9a9237c003c63aaa6380}} 
\index{TRendererImp@{TRendererImp}!declareStatusStart@{declareStatusStart}}
\index{declareStatusStart@{declareStatusStart}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{declareStatusStart()}{declareStatusStart()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::declare\+Status\+Start (\begin{DoxyParamCaption}\item[{int}]{render\+Status }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00559                                                              \{}
\DoxyCodeLine{00560   \textcolor{comment}{// Inform the resource managers}}
\DoxyCodeLine{00561   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < m\_managers.size(); ++i)}
\DoxyCodeLine{00562     m\_managers[i]-\/>onRenderStatusStart(renderStatus);}
\DoxyCodeLine{00563 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_a0eaa3929e606db417087a3807f03370e}\label{class_t_renderer_imp_a0eaa3929e606db417087a3807f03370e}} 
\index{TRendererImp@{TRendererImp}!enablePrecomputing@{enablePrecomputing}}
\index{enablePrecomputing@{enablePrecomputing}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{enablePrecomputing()}{enablePrecomputing()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::enable\+Precomputing (\begin{DoxyParamCaption}\item[{bool}]{on }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00350 \{ m\_precomputingEnabled = on; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_ad10a875636d1fcd381542ced3b00d899}\label{class_t_renderer_imp_ad10a875636d1fcd381542ced3b00d899}} 
\index{TRendererImp@{TRendererImp}!getRenderStatus@{getRenderStatus}}
\index{getRenderStatus@{getRenderStatus}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{getRenderStatus()}{getRenderStatus()}}
{\footnotesize\ttfamily int TRenderer\+Imp\+::get\+Render\+Status (\begin{DoxyParamCaption}\item[{unsigned long}]{render\+Id }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00753                                                         \{}
\DoxyCodeLine{00754   QMutexLocker sl(\&m\_renderInstancesMutex);}
\DoxyCodeLine{00755 }
\DoxyCodeLine{00756   std::map<unsigned long, RenderInstanceInfos>::iterator it =}
\DoxyCodeLine{00757       m\_activeInstances.find(renderId);}
\DoxyCodeLine{00758   assert(it != m\_activeInstances.end());}
\DoxyCodeLine{00759   \textcolor{keywordflow}{return} it == m\_activeInstances.end() ? true : it-\/>second.m\_status;}
\DoxyCodeLine{00760 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_a6c7021d0011f0cca517e07d84eb9e7cf}\label{class_t_renderer_imp_a6c7021d0011f0cca517e07d84eb9e7cf}} 
\index{TRendererImp@{TRendererImp}!hasToDie@{hasToDie}}
\index{hasToDie@{hasToDie}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{hasToDie()}{hasToDie()}}
{\footnotesize\ttfamily bool TRenderer\+Imp\+::has\+To\+Die (\begin{DoxyParamCaption}\item[{unsigned long}]{render\+Id }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00742                                                   \{}
\DoxyCodeLine{00743   QMutexLocker sl(\&m\_renderInstancesMutex);}
\DoxyCodeLine{00744 }
\DoxyCodeLine{00745   std::map<unsigned long, RenderInstanceInfos>::iterator it =}
\DoxyCodeLine{00746       m\_activeInstances.find(renderId);}
\DoxyCodeLine{00747   assert(it != m\_activeInstances.end());}
\DoxyCodeLine{00748   \textcolor{keywordflow}{return} it == m\_activeInstances.end() ? true : it-\/>second.m\_canceled;}
\DoxyCodeLine{00749 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_aa7a0a90e7891c29be3861d374a261afe}\label{class_t_renderer_imp_aa7a0a90e7891c29be3861d374a261afe}} 
\index{TRendererImp@{TRendererImp}!isPrecomputingEnabled@{isPrecomputingEnabled}}
\index{isPrecomputingEnabled@{isPrecomputingEnabled}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{isPrecomputingEnabled()}{isPrecomputingEnabled()}}
{\footnotesize\ttfamily bool TRenderer\+Imp\+::is\+Precomputing\+Enabled (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00351 \{ \textcolor{keywordflow}{return} m\_precomputingEnabled; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_a9afe6ad8572d58623047656641c520c2}\label{class_t_renderer_imp_a9afe6ad8572d58623047656641c520c2}} 
\index{TRendererImp@{TRendererImp}!notifyRasterCompleted@{notifyRasterCompleted}}
\index{notifyRasterCompleted@{notifyRasterCompleted}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{notifyRasterCompleted()}{notifyRasterCompleted()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::notify\+Raster\+Completed (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_t_render_port_1_1_render_data}{TRender\+Port\+::\+Render\+Data}} \&}]{rd }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00839                                                                         \{}
\DoxyCodeLine{00840   TRendererImp::PortContainer portsCopy;}
\DoxyCodeLine{00841   \{}
\DoxyCodeLine{00842     QReadLocker sl(\&m\_portsLock);}
\DoxyCodeLine{00843     portsCopy = m\_ports;}
\DoxyCodeLine{00844   \}}
\DoxyCodeLine{00845 }
\DoxyCodeLine{00846   assert(rd.m\_rasA);}
\DoxyCodeLine{00847 }
\DoxyCodeLine{00848   \textcolor{keywordflow}{for} (PortContainerIterator it = portsCopy.begin(); it != portsCopy.end();}
\DoxyCodeLine{00849        ++it)}
\DoxyCodeLine{00850     (*it)-\/>onRenderRasterCompleted(rd);}
\DoxyCodeLine{00851 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_a5f4db5bc4b0a53e20503a3f6a7790ebe}\label{class_t_renderer_imp_a5f4db5bc4b0a53e20503a3f6a7790ebe}} 
\index{TRendererImp@{TRendererImp}!notifyRasterFailure@{notifyRasterFailure}}
\index{notifyRasterFailure@{notifyRasterFailure}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{notifyRasterFailure()}{notifyRasterFailure()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::notify\+Raster\+Failure (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_t_render_port_1_1_render_data}{TRender\+Port\+::\+Render\+Data}} \&}]{rd,  }\item[{\mbox{\hyperlink{class_t_exception}{TException}} \&}]{e }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00856                                                       \{}
\DoxyCodeLine{00857   TRendererImp::PortContainer portsCopy;}
\DoxyCodeLine{00858   \{}
\DoxyCodeLine{00859     QReadLocker sl(\&m\_portsLock);}
\DoxyCodeLine{00860     portsCopy = m\_ports;}
\DoxyCodeLine{00861   \}}
\DoxyCodeLine{00862 }
\DoxyCodeLine{00863   \textcolor{keywordflow}{for} (PortContainerIterator it = portsCopy.begin(); it != portsCopy.end();}
\DoxyCodeLine{00864        ++it)}
\DoxyCodeLine{00865     (*it)-\/>onRenderFailure(rd, e);}
\DoxyCodeLine{00866 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_aa85d7738400ff9b82abd811ce7737210}\label{class_t_renderer_imp_aa85d7738400ff9b82abd811ce7737210}} 
\index{TRendererImp@{TRendererImp}!notifyRasterStarted@{notifyRasterStarted}}
\index{notifyRasterStarted@{notifyRasterStarted}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{notifyRasterStarted()}{notifyRasterStarted()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::notify\+Raster\+Started (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_t_render_port_1_1_render_data}{TRender\+Port\+::\+Render\+Data}} \&}]{rd }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00822                                                                       \{}
\DoxyCodeLine{00823   \textcolor{comment}{// Since notifications may trigger port removals, we always work on a copy of}}
\DoxyCodeLine{00824   \textcolor{comment}{// the ports}}
\DoxyCodeLine{00825   \textcolor{comment}{// vector.}}
\DoxyCodeLine{00826   TRendererImp::PortContainer portsCopy;}
\DoxyCodeLine{00827   \{}
\DoxyCodeLine{00828     QReadLocker sl(\&m\_portsLock);}
\DoxyCodeLine{00829     portsCopy = m\_ports;}
\DoxyCodeLine{00830   \}}
\DoxyCodeLine{00831 }
\DoxyCodeLine{00832   \textcolor{keywordflow}{for} (PortContainerIterator it = portsCopy.begin(); it != portsCopy.end();}
\DoxyCodeLine{00833        ++it)}
\DoxyCodeLine{00834     (*it)-\/>onRenderRasterStarted(rd);}
\DoxyCodeLine{00835 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_adc6ba1146cc94388d9253f2e7a88815d}\label{class_t_renderer_imp_adc6ba1146cc94388d9253f2e7a88815d}} 
\index{TRendererImp@{TRendererImp}!notifyRenderFinished@{notifyRenderFinished}}
\index{notifyRenderFinished@{notifyRenderFinished}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{notifyRenderFinished()}{notifyRenderFinished()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::notify\+Render\+Finished (\begin{DoxyParamCaption}\item[{bool}]{is\+Canceled = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00870                                                        \{}
\DoxyCodeLine{00871   TRendererImp::PortContainer portsCopy;}
\DoxyCodeLine{00872   \{}
\DoxyCodeLine{00873     QReadLocker sl(\&m\_portsLock);}
\DoxyCodeLine{00874     portsCopy = m\_ports;}
\DoxyCodeLine{00875   \}}
\DoxyCodeLine{00876 }
\DoxyCodeLine{00877   \textcolor{keyword}{auto} sortedFxs = calculateSortedFxs(rootFx);}
\DoxyCodeLine{00878   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} fx : sortedFxs) \{}
\DoxyCodeLine{00879     \textcolor{keywordflow}{if} (fx) \textcolor{keyword}{const\_cast<}\mbox{\hyperlink{class_t_fx}{TFx}} *\textcolor{keyword}{>}(fx)-\/>callEndRenderHandler();}
\DoxyCodeLine{00880   \}}
\DoxyCodeLine{00881 }
\DoxyCodeLine{00882   \textcolor{keywordflow}{for} (PortContainerIterator it = portsCopy.begin(); it != portsCopy.end();}
\DoxyCodeLine{00883        ++it)}
\DoxyCodeLine{00884     (*it)-\/>onRenderFinished();}
\DoxyCodeLine{00885 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_ac704f9440e950f1f3d56cf89c51c6720}\label{class_t_renderer_imp_ac704f9440e950f1f3d56cf89c51c6720}} 
\index{TRendererImp@{TRendererImp}!quitWaitingLoops@{quitWaitingLoops}}
\index{quitWaitingLoops@{quitWaitingLoops}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{quitWaitingLoops()}{quitWaitingLoops()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::quit\+Waiting\+Loops (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00811                                     \{}
\DoxyCodeLine{00812   \textcolor{comment}{// Make the stopRendering waiting loops quit}}
\DoxyCodeLine{00813   \textcolor{keywordflow}{while} (!m\_waitingLoops.empty()) \{}
\DoxyCodeLine{00814     \textcolor{comment}{// rendererImp-\/>m\_waitingLoops.back()-\/>quit();}}
\DoxyCodeLine{00815     *m\_waitingLoops.back() = \textcolor{keyword}{true};}
\DoxyCodeLine{00816     m\_waitingLoops.pop\_back();}
\DoxyCodeLine{00817   \}}
\DoxyCodeLine{00818 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_a53302287e4fdd2daae34b3e243ac7228}\label{class_t_renderer_imp_a53302287e4fdd2daae34b3e243ac7228}} 
\index{TRendererImp@{TRendererImp}!removePort@{removePort}}
\index{removePort@{removePort}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{removePort()}{removePort()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::remove\+Port (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_render_port}{TRender\+Port}} $\ast$}]{port }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00733                                                \{}
\DoxyCodeLine{00734   QWriteLocker sl(\&m\_portsLock);}
\DoxyCodeLine{00735 }
\DoxyCodeLine{00736   PortContainerIterator it = std::find(m\_ports.begin(), m\_ports.end(), port);}
\DoxyCodeLine{00737   \textcolor{keywordflow}{if} (it != m\_ports.end()) m\_ports.erase(it);}
\DoxyCodeLine{00738 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_ad7557a95efaebc545a78e1f1ada36f18}\label{class_t_renderer_imp_ad7557a95efaebc545a78e1f1ada36f18}} 
\index{TRendererImp@{TRendererImp}!setThreadsCount@{setThreadsCount}}
\index{setThreadsCount@{setThreadsCount}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{setThreadsCount()}{setThreadsCount()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::set\+Threads\+Count (\begin{DoxyParamCaption}\item[{int}]{n\+Threads }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00353 \{ m\_executor.\mbox{\hyperlink{class_t_thread_1_1_executor_a85231531a2fa273db401f090c9aba4ea}{setMaxActiveTasks}}(nThreads); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_ae2e00dda5d993c9e7e28c6f76f575add}\label{class_t_renderer_imp_ae2e00dda5d993c9e7e28c6f76f575add}} 
\index{TRendererImp@{TRendererImp}!startRendering@{startRendering}}
\index{startRendering@{startRendering}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{startRendering()}{startRendering()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::start\+Rendering (\begin{DoxyParamCaption}\item[{unsigned long}]{render\+Id,  }\item[{const std\+::vector$<$ \mbox{\hyperlink{struct_t_renderer_1_1_render_data}{TRenderer\+::\+Render\+Data}} $>$ \&}]{render\+Datas }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01245                                                        \{}
\DoxyCodeLine{01246   rootFx = renderDatas.front().m\_fxRoot.m\_frameA;}
\DoxyCodeLine{01247   \textcolor{keywordtype}{int} T  = renderDatas.size();}
\DoxyCodeLine{01248   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} z = 0; z < T; z++) \{}
\DoxyCodeLine{01249     \textcolor{keyword}{auto} sortedFxs = calculateSortedFxs(renderDatas[z].m\_fxRoot.m\_frameA);}
\DoxyCodeLine{01250     \textcolor{keywordflow}{if} (z == 0) \{}
\DoxyCodeLine{01251       \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} fx : sortedFxs) \{}
\DoxyCodeLine{01252         \textcolor{keywordflow}{if} (fx) \textcolor{keyword}{const\_cast<}\mbox{\hyperlink{class_t_fx}{TFx}} *\textcolor{keyword}{>}(fx)-\/>callStartRenderHandler();}
\DoxyCodeLine{01253       \}}
\DoxyCodeLine{01254     \}}
\DoxyCodeLine{01255   \}}
\DoxyCodeLine{01256 }
\DoxyCodeLine{01257   \textcolor{keyword}{struct }locals \{}
\DoxyCodeLine{01258     \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} setStorage(\mbox{\hyperlink{class_t_renderer_imp}{TRendererImp}} *imp, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} renderId) \{}
\DoxyCodeLine{01259       rendererStorage.setLocalData(\textcolor{keyword}{new} (\mbox{\hyperlink{class_t_renderer_imp}{TRendererImp}} *)(imp));}
\DoxyCodeLine{01260       renderIdsStorage.setLocalData(\textcolor{keyword}{new} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long}(renderId));}
\DoxyCodeLine{01261     \}}
\DoxyCodeLine{01262 }
\DoxyCodeLine{01263     \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} clearStorage() \{}
\DoxyCodeLine{01264       rendererStorage.setLocalData(0);}
\DoxyCodeLine{01265       renderIdsStorage.setLocalData(0);}
\DoxyCodeLine{01266     \}}
\DoxyCodeLine{01267 }
\DoxyCodeLine{01268     \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} declareStatusStart(\mbox{\hyperlink{class_t_renderer_imp}{TRendererImp}} *imp,}
\DoxyCodeLine{01269                                           TRenderer::RenderStatus status,}
\DoxyCodeLine{01270                                           RenderInstanceInfos *renderInfos) \{}
\DoxyCodeLine{01271       renderInfos-\/>m\_status = status;}
\DoxyCodeLine{01272       imp-\/>declareStatusStart(status);}
\DoxyCodeLine{01273     \}}
\DoxyCodeLine{01274 }
\DoxyCodeLine{01275     \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01276 }
\DoxyCodeLine{01277     \textcolor{keyword}{struct }InstanceDeclaration \{}
\DoxyCodeLine{01278       \mbox{\hyperlink{class_t_renderer_imp}{TRendererImp}} *m\_imp;}
\DoxyCodeLine{01279       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} m\_renderId;}
\DoxyCodeLine{01280       \textcolor{keywordtype}{bool} m\_rollback;}
\DoxyCodeLine{01281 }
\DoxyCodeLine{01282       InstanceDeclaration(\mbox{\hyperlink{class_t_renderer_imp}{TRendererImp}} *imp, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} renderId)}
\DoxyCodeLine{01283           : m\_imp(imp), m\_renderId(renderId), m\_rollback(true) \{\}}
\DoxyCodeLine{01284 }
\DoxyCodeLine{01285       \string~InstanceDeclaration() \{}
\DoxyCodeLine{01286         \textcolor{keywordflow}{if} (m\_rollback) \{}
\DoxyCodeLine{01287           QMutexLocker locker(\&m\_imp-\/>m\_renderInstancesMutex);}
\DoxyCodeLine{01288 }
\DoxyCodeLine{01289           m\_imp-\/>m\_activeInstances.erase(m\_renderId);}
\DoxyCodeLine{01290           \textcolor{keywordflow}{if} (m\_imp-\/>m\_undoneTasks == 0) m\_imp-\/>quitWaitingLoops();}
\DoxyCodeLine{01291         \}}
\DoxyCodeLine{01292       \}}
\DoxyCodeLine{01293 }
\DoxyCodeLine{01294       \textcolor{keywordtype}{void} commit() \{ m\_rollback = \textcolor{keyword}{false}; \}}
\DoxyCodeLine{01295     \};}
\DoxyCodeLine{01296 }
\DoxyCodeLine{01297     \textcolor{keyword}{struct }StorageDeclaration \{}
\DoxyCodeLine{01298       StorageDeclaration(\mbox{\hyperlink{class_t_renderer_imp}{TRendererImp}} *imp, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} renderId) \{}
\DoxyCodeLine{01299         setStorage(imp, renderId);}
\DoxyCodeLine{01300       \}}
\DoxyCodeLine{01301 }
\DoxyCodeLine{01302       \string~StorageDeclaration() \{ clearStorage(); \}}
\DoxyCodeLine{01303     \};}
\DoxyCodeLine{01304 }
\DoxyCodeLine{01305     \textcolor{keyword}{struct }RenderDeclaration \{}
\DoxyCodeLine{01306       \mbox{\hyperlink{class_t_renderer_imp}{TRendererImp}} *m\_imp;}
\DoxyCodeLine{01307       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} m\_renderId;}
\DoxyCodeLine{01308       \textcolor{keywordtype}{bool} m\_rollback;}
\DoxyCodeLine{01309 }
\DoxyCodeLine{01310       RenderDeclaration(\mbox{\hyperlink{class_t_renderer_imp}{TRendererImp}} *imp, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} renderId)}
\DoxyCodeLine{01311           : m\_imp(imp), m\_renderId(renderId), m\_rollback(true) \{}
\DoxyCodeLine{01312         imp-\/>declareRenderStart(renderId);}
\DoxyCodeLine{01313       \}}
\DoxyCodeLine{01314 }
\DoxyCodeLine{01315       \string~RenderDeclaration() \{}
\DoxyCodeLine{01316         \textcolor{keywordflow}{if} (m\_rollback) m\_imp-\/>declareRenderEnd(m\_renderId);}
\DoxyCodeLine{01317       \}}
\DoxyCodeLine{01318 }
\DoxyCodeLine{01319       \textcolor{keywordtype}{void} commit() \{ m\_rollback = \textcolor{keyword}{false}; \}}
\DoxyCodeLine{01320     \};}
\DoxyCodeLine{01321 }
\DoxyCodeLine{01322     \textcolor{keyword}{struct }StatusDeclaration \{}
\DoxyCodeLine{01323       \mbox{\hyperlink{class_t_renderer_imp}{TRendererImp}} *m\_imp;}
\DoxyCodeLine{01324       TRenderer::RenderStatus m\_status;}
\DoxyCodeLine{01325 }
\DoxyCodeLine{01326       StatusDeclaration(\mbox{\hyperlink{class_t_renderer_imp}{TRendererImp}} *imp, TRenderer::RenderStatus status,}
\DoxyCodeLine{01327                         RenderInstanceInfos *renderInfos)}
\DoxyCodeLine{01328           : m\_imp(imp), m\_status(status) \{}
\DoxyCodeLine{01329         declareStatusStart(imp, status, renderInfos);}
\DoxyCodeLine{01330       \}}
\DoxyCodeLine{01331 }
\DoxyCodeLine{01332       \string~StatusDeclaration() \{ m\_imp-\/>declareStatusEnd(m\_status); \}}
\DoxyCodeLine{01333     \};}
\DoxyCodeLine{01334   \};  \textcolor{comment}{// locals}}
\DoxyCodeLine{01335 }
\DoxyCodeLine{01336   \textcolor{comment}{// DIAGNOSTICS\_CLEAR;}}
\DoxyCodeLine{01337 }
\DoxyCodeLine{01338   \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01339   \textcolor{comment}{//    Preliminary initializations}}
\DoxyCodeLine{01340   \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01341 }
\DoxyCodeLine{01342   \textcolor{comment}{// Calculate the overall render area -\/ sum of all render ports' areas}}
\DoxyCodeLine{01343   \mbox{\hyperlink{class_t_rect_t}{TRectD}} renderArea;}
\DoxyCodeLine{01344   \{}
\DoxyCodeLine{01345     QReadLocker sl(\&m\_portsLock);}
\DoxyCodeLine{01346 }
\DoxyCodeLine{01347     \textcolor{keywordflow}{for} (PortContainerIterator it = m\_ports.begin(); it != m\_ports.end(); ++it)}
\DoxyCodeLine{01348       renderArea += (*it)-\/>getRenderArea();}
\DoxyCodeLine{01349   \}}
\DoxyCodeLine{01350 }
\DoxyCodeLine{01351   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_render_settings}{TRenderSettings}} \&info(renderDatas[0].m\_info);}
\DoxyCodeLine{01352 }
\DoxyCodeLine{01353   \textcolor{comment}{// Extract the render geometry}}
\DoxyCodeLine{01354   \mbox{\hyperlink{class_t_point_t}{TPointD}} pos(renderArea.getP00());}
\DoxyCodeLine{01355   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} frameSize(tceil(renderArea.getLx()), tceil(renderArea.getLy()));}
\DoxyCodeLine{01356 }
\DoxyCodeLine{01357   \mbox{\hyperlink{class_t_rect_t}{TRectD}} camBox(\mbox{\hyperlink{class_t_point_t}{TPointD}}(pos.x / info.m\_shrinkX, pos.y / info.m\_shrinkY),}
\DoxyCodeLine{01358                 \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}}(frameSize.lx, frameSize.ly));}
\DoxyCodeLine{01359 }
\DoxyCodeLine{01360   \textcolor{comment}{// Refresh the raster pool specs}}
\DoxyCodeLine{01361   m\_rasterPool.setRasterSpecs(frameSize, info.m\_bpp);}
\DoxyCodeLine{01362 }
\DoxyCodeLine{01363   \textcolor{comment}{// Set a temporary active instance count -\/ so that hasToDie(renderId) returns}}
\DoxyCodeLine{01364   \textcolor{comment}{// false}}
\DoxyCodeLine{01365   RenderInstanceInfos *renderInfos;}
\DoxyCodeLine{01366   \{}
\DoxyCodeLine{01367     QMutexLocker locker(\&m\_renderInstancesMutex);}
\DoxyCodeLine{01368     renderInfos                = \&m\_activeInstances[renderId];}
\DoxyCodeLine{01369     renderInfos-\/>m\_activeTasks = 1;}
\DoxyCodeLine{01370   \}}
\DoxyCodeLine{01371 }
\DoxyCodeLine{01372   locals::InstanceDeclaration instanceDecl(\textcolor{keyword}{this}, renderId);}
\DoxyCodeLine{01373 }
\DoxyCodeLine{01374   \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01375   \textcolor{comment}{//    Clustering -\/ Render Tasks creation}}
\DoxyCodeLine{01376   \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01377 }
\DoxyCodeLine{01378   std::vector<RenderTask *> tasksVector;}
\DoxyCodeLine{01379 }
\DoxyCodeLine{01380   \textcolor{keyword}{struct }TasksCleaner \{}
\DoxyCodeLine{01381     std::vector<RenderTask *> \&m\_tasksVector;}
\DoxyCodeLine{01382     \string~TasksCleaner() \{}
\DoxyCodeLine{01383       std::for\_each(m\_tasksVector.begin(), m\_tasksVector.end(),}
\DoxyCodeLine{01384                     std::default\_delete<RenderTask>());}
\DoxyCodeLine{01385     \}}
\DoxyCodeLine{01386   \} tasksCleaner = \{tasksVector\};}
\DoxyCodeLine{01387 }
\DoxyCodeLine{01388   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} tasksIdCounter = 0;}
\DoxyCodeLine{01389 }
\DoxyCodeLine{01390   std::map<std::string, RenderTask *> clusters;}
\DoxyCodeLine{01391   std::vector<TRenderer::RenderData>::const\_iterator it;}
\DoxyCodeLine{01392   std::map<std::string, RenderTask *>::iterator jt;}
\DoxyCodeLine{01393 }
\DoxyCodeLine{01394   \textcolor{keywordflow}{for} (it = renderDatas.begin(); it != renderDatas.end(); ++it) \{}
\DoxyCodeLine{01395     \textcolor{comment}{// Check for user cancels}}
\DoxyCodeLine{01396     \textcolor{keywordflow}{if} (hasToDie(renderId)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01397 }
\DoxyCodeLine{01398     \textcolor{comment}{// Build the frame's description alias}}
\DoxyCodeLine{01399     \textcolor{keyword}{const} \mbox{\hyperlink{struct_t_renderer_1_1_render_data}{TRenderer::RenderData}} \&renderData = *it;}
\DoxyCodeLine{01400 }
\DoxyCodeLine{01401     \textcolor{comment}{/*-\/-\/-\/ カメラサイズ (LevelAutoやノイズで使用する) -\/-\/-\/*/}}
\DoxyCodeLine{01402     \mbox{\hyperlink{class_t_render_settings}{TRenderSettings}} rs = renderData.m\_info;}
\DoxyCodeLine{01403     rs.m\_cameraBox     = camBox;}
\DoxyCodeLine{01404     \textcolor{comment}{/*-\/-\/-\/ 途中でPreview計算がキャンセルされたときのフラグ -\/-\/-\/*/}}
\DoxyCodeLine{01405     rs.m\_isCanceled = \&renderInfos-\/>m\_canceled;}
\DoxyCodeLine{01406 }
\DoxyCodeLine{01407     \mbox{\hyperlink{class_t_raster_fx_p}{TRasterFxP}} fx = renderData.m\_fxRoot.m\_frameA;}
\DoxyCodeLine{01408     assert(fx);}
\DoxyCodeLine{01409 }
\DoxyCodeLine{01410     \textcolor{keywordtype}{double} frame = renderData.m\_frame;}
\DoxyCodeLine{01411 }
\DoxyCodeLine{01412     std::string alias = fx-\/>getAlias(frame, renderData.m\_info);}
\DoxyCodeLine{01413     \textcolor{keywordflow}{if} (renderData.m\_fxRoot.m\_frameB)}
\DoxyCodeLine{01414       alias = alias +}
\DoxyCodeLine{01415               renderData.m\_fxRoot.m\_frameB-\/>getAlias(frame, renderData.m\_info);}
\DoxyCodeLine{01416 }
\DoxyCodeLine{01417     \textcolor{comment}{// If the render contains offscreen render, then prepare the}}
\DoxyCodeLine{01418     \textcolor{comment}{// QOffscreenSurface}}
\DoxyCodeLine{01419     \textcolor{comment}{// in main (GUI) thread. For now it is used only in the plasticDeformerFx.}}
\DoxyCodeLine{01420     \textcolor{keywordflow}{if} (alias.find(\textcolor{stringliteral}{"{}plasticDeformerFx"{}}) != std::string::npos \&\&}
\DoxyCodeLine{01421         QThread::currentThread() == qGuiApp-\/>thread()) \{}
\DoxyCodeLine{01422       rs.m\_offScreenSurface.reset(\textcolor{keyword}{new} QOffscreenSurface());}
\DoxyCodeLine{01423       rs.m\_offScreenSurface-\/>setFormat(QSurfaceFormat::defaultFormat());}
\DoxyCodeLine{01424       rs.m\_offScreenSurface-\/>create();}
\DoxyCodeLine{01425     \}}
\DoxyCodeLine{01426 }
\DoxyCodeLine{01427     \textcolor{comment}{// Search the alias among stored clusters -\/ and store the frame}}
\DoxyCodeLine{01428     jt = clusters.find(alias);}
\DoxyCodeLine{01429 }
\DoxyCodeLine{01430     \textcolor{keywordflow}{if} (jt == clusters.end()) \{}
\DoxyCodeLine{01431       \mbox{\hyperlink{class_render_task}{RenderTask}} *newTask =}
\DoxyCodeLine{01432           \textcolor{keyword}{new} \mbox{\hyperlink{class_render_task}{RenderTask}}(renderId, tasksIdCounter++, renderData.m\_frame, rs,}
\DoxyCodeLine{01433                          renderData.m\_fxRoot, pos, frameSize, \textcolor{keyword}{this});}
\DoxyCodeLine{01434 }
\DoxyCodeLine{01435       tasksVector.push\_back(newTask);}
\DoxyCodeLine{01436       clusters.insert(std::make\_pair(alias, newTask));}
\DoxyCodeLine{01437     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01438       jt-\/>second-\/>addFrame(renderData.m\_frame);}
\DoxyCodeLine{01439 }
\DoxyCodeLine{01440     \textcolor{comment}{// Call processEvents to make the GUI reactive.}}
\DoxyCodeLine{01441     QCoreApplication::instance()-\/>processEvents();}
\DoxyCodeLine{01442   \}}
\DoxyCodeLine{01443 }
\DoxyCodeLine{01444   \textcolor{comment}{// Release the clusters -\/ we'll just need the tasks vector from now on}}
\DoxyCodeLine{01445   clusters.clear();}
\DoxyCodeLine{01446 }
\DoxyCodeLine{01447   std::vector<RenderTask *>::iterator kt, kEnd = tasksVector.end();}
\DoxyCodeLine{01448   \{}
\DoxyCodeLine{01449     \textcolor{comment}{// Install TRenderer on current thread before proceeding}}
\DoxyCodeLine{01450     locals::StorageDeclaration storageDecl(\textcolor{keyword}{this}, renderId);}
\DoxyCodeLine{01451 }
\DoxyCodeLine{01452     \textcolor{comment}{// Inform the resource managers}}
\DoxyCodeLine{01453     locals::RenderDeclaration renderDecl(\textcolor{keyword}{this}, renderId);}
\DoxyCodeLine{01454 }
\DoxyCodeLine{01455     \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01456     \textcolor{comment}{//    Precomputing}}
\DoxyCodeLine{01457     \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01458 }
\DoxyCodeLine{01459     \textcolor{keywordflow}{if} (m\_precomputingEnabled) \{}
\DoxyCodeLine{01460       \textcolor{comment}{// Set current maxTileSize for cache manager precomputation}}
\DoxyCodeLine{01461       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_render_settings}{TRenderSettings}} \&rs = renderDatas[0].m\_info;}
\DoxyCodeLine{01462       TPredictiveCacheManager::instance()-\/>setMaxTileSize(rs.\mbox{\hyperlink{class_t_render_settings_a4b0770f4a243e1f32a60efefebf0e11b}{m\_maxTileSize}});}
\DoxyCodeLine{01463       TPredictiveCacheManager::instance()-\/>setBPP(rs.\mbox{\hyperlink{class_t_render_settings_a9489ed9d21a047b29cc5dd285f1f6f19}{m\_bpp}});}
\DoxyCodeLine{01464 }
\DoxyCodeLine{01465       \textcolor{comment}{// Perform the first precomputing run -\/ fx usages declaration}}
\DoxyCodeLine{01466       \{}
\DoxyCodeLine{01467         locals::StatusDeclaration firstrunDecl(\textcolor{keyword}{this}, TRenderer::FIRSTRUN,}
\DoxyCodeLine{01468                                                renderInfos);}
\DoxyCodeLine{01469 }
\DoxyCodeLine{01470         \textcolor{keywordflow}{for} (kt = tasksVector.begin(); kt != kEnd; ++kt) \{}
\DoxyCodeLine{01471           \textcolor{keywordflow}{if} (hasToDie(renderId)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01472 }
\DoxyCodeLine{01473           (*kt)-\/>preRun();}
\DoxyCodeLine{01474 }
\DoxyCodeLine{01475           \textcolor{comment}{// NOTE: Thread-\/specific data must be temporarily uninstalled before}}
\DoxyCodeLine{01476           \textcolor{comment}{// processing events (which may redefine the thread data).}}
\DoxyCodeLine{01477           locals::clearStorage();}
\DoxyCodeLine{01478           QCoreApplication::instance()-\/>processEvents();}
\DoxyCodeLine{01479           locals::setStorage(\textcolor{keyword}{this}, renderId);}
\DoxyCodeLine{01480         \}}
\DoxyCodeLine{01481       \}}
\DoxyCodeLine{01482 }
\DoxyCodeLine{01483       \textcolor{comment}{// Pass to the TESTRUN status -\/ this one should faithfully reproduce}}
\DoxyCodeLine{01484       \textcolor{comment}{// the actual COMPUTING status}}
\DoxyCodeLine{01485       \{}
\DoxyCodeLine{01486         locals::StatusDeclaration testrunDecl(\textcolor{keyword}{this}, TRenderer::TESTRUN,}
\DoxyCodeLine{01487                                               renderInfos);}
\DoxyCodeLine{01488 }
\DoxyCodeLine{01489         \textcolor{keywordflow}{for} (kt = tasksVector.begin(); kt != kEnd; ++kt) \{}
\DoxyCodeLine{01490           \textcolor{keywordflow}{if} (hasToDie(renderId)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01491 }
\DoxyCodeLine{01492           (*kt)-\/>preRun();}
\DoxyCodeLine{01493 }
\DoxyCodeLine{01494           \textcolor{comment}{// NOTE: Thread-\/specific data must be temporarily uninstalled before}}
\DoxyCodeLine{01495           \textcolor{comment}{// processing events (which may redefine the thread data).}}
\DoxyCodeLine{01496           locals::clearStorage();}
\DoxyCodeLine{01497           QCoreApplication::instance()-\/>processEvents();}
\DoxyCodeLine{01498           locals::setStorage(\textcolor{keyword}{this}, renderId);}
\DoxyCodeLine{01499         \}}
\DoxyCodeLine{01500       \}}
\DoxyCodeLine{01501     \}}
\DoxyCodeLine{01502 }
\DoxyCodeLine{01503     \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01504     \textcolor{comment}{//    Render}}
\DoxyCodeLine{01505     \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01506 }
\DoxyCodeLine{01507     locals::declareStatusStart(\textcolor{keyword}{this}, TRenderer::COMPUTING, renderInfos);}
\DoxyCodeLine{01508 }
\DoxyCodeLine{01509     \textcolor{comment}{// Update the tasks counts}}
\DoxyCodeLine{01510     m\_undoneTasks += tasksVector.size();}
\DoxyCodeLine{01511     \{}
\DoxyCodeLine{01512       QMutexLocker locker(\&m\_renderInstancesMutex);}
\DoxyCodeLine{01513       renderInfos-\/>m\_activeTasks = tasksVector.size();}
\DoxyCodeLine{01514     \}}
\DoxyCodeLine{01515 }
\DoxyCodeLine{01516     renderDecl.commit();  \textcolor{comment}{// Declarations are taken over by render tasks}}
\DoxyCodeLine{01517   \}}
\DoxyCodeLine{01518 }
\DoxyCodeLine{01519   instanceDecl.commit();  \textcolor{comment}{// Same here}}
\DoxyCodeLine{01520 }
\DoxyCodeLine{01521   \textcolor{comment}{// Launch the render}}
\DoxyCodeLine{01522   \textcolor{keywordflow}{for} (kt = tasksVector.begin(); kt != tasksVector.end(); ++kt)}
\DoxyCodeLine{01523     m\_executor.\mbox{\hyperlink{class_t_thread_1_1_executor_af31c8db8ac72df4c342e7769e95e2135}{addTask}}(*kt);}
\DoxyCodeLine{01524 }
\DoxyCodeLine{01525   tasksVector.clear();  \textcolor{comment}{// Prevent tasks destruction by TasksCleaner}}
\DoxyCodeLine{01526 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_renderer_imp_a410012b2651489b432a5a86b249a3885}\label{class_t_renderer_imp_a410012b2651489b432a5a86b249a3885}} 
\index{TRendererImp@{TRendererImp}!stopRendering@{stopRendering}}
\index{stopRendering@{stopRendering}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{stopRendering()}{stopRendering()}}
{\footnotesize\ttfamily void TRenderer\+Imp\+::stop\+Rendering (\begin{DoxyParamCaption}\item[{bool}]{wait\+For\+Complete\+Stop }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00774                                                          \{}
\DoxyCodeLine{00775   QMutexLocker sl(\&m\_renderInstancesMutex);}
\DoxyCodeLine{00776 }
\DoxyCodeLine{00777   \{}
\DoxyCodeLine{00778     \textcolor{comment}{// Tasks already stop rendering on their own when they don't find their}}
\DoxyCodeLine{00779     \textcolor{comment}{// render ids here.}}
\DoxyCodeLine{00780     std::map<unsigned long, RenderInstanceInfos>::iterator it;}
\DoxyCodeLine{00781     \textcolor{keywordflow}{for} (it = m\_activeInstances.begin(); it != m\_activeInstances.end(); ++it)}
\DoxyCodeLine{00782       it-\/>second.m\_canceled = \textcolor{keyword}{true};}
\DoxyCodeLine{00783   \}}
\DoxyCodeLine{00784 }
\DoxyCodeLine{00785   \textcolor{keywordflow}{if} (waitForCompleteStop \&\& m\_undoneTasks > 0) \{}
\DoxyCodeLine{00786     \textcolor{comment}{// Sometimes, QEventLoop suddenly stops processing slots (especially those}}
\DoxyCodeLine{00787     \textcolor{comment}{// notifications}}
\DoxyCodeLine{00788     \textcolor{comment}{// from active rendering instances) -\/ therefore resulting in a block of the}}
\DoxyCodeLine{00789     \textcolor{comment}{// application.}}
\DoxyCodeLine{00790     \textcolor{comment}{// I've not figured out why (\#QTBUG-\/11649?) -\/ but substituting with a plain}}
\DoxyCodeLine{00791     \textcolor{comment}{// while}}
\DoxyCodeLine{00792     \textcolor{comment}{// seems to do the trick...}}
\DoxyCodeLine{00793 }
\DoxyCodeLine{00794     \textcolor{comment}{/*QEventLoop eventLoop;}}
\DoxyCodeLine{00795 \textcolor{comment}{m\_waitingLoops.push\_back(\&eventLoop);}}
\DoxyCodeLine{00796 \textcolor{comment}{eventLoop.exec();*/}}
\DoxyCodeLine{00797 }
\DoxyCodeLine{00798     \textcolor{keywordtype}{bool} loopQuit = \textcolor{keyword}{false};}
\DoxyCodeLine{00799     m\_waitingLoops.push\_back(\&loopQuit);}
\DoxyCodeLine{00800 }
\DoxyCodeLine{00801     sl.unlock();}
\DoxyCodeLine{00802 }
\DoxyCodeLine{00803     \textcolor{keywordflow}{while} (!loopQuit)}
\DoxyCodeLine{00804       QCoreApplication::processEvents(QEventLoop::AllEvents |}
\DoxyCodeLine{00805                                       QEventLoop::WaitForMoreEvents);}
\DoxyCodeLine{00806   \}}
\DoxyCodeLine{00807 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_t_renderer_imp_ad71ba179d2400c6d6f2ddd71aed3ead3}\label{class_t_renderer_imp_ad71ba179d2400c6d6f2ddd71aed3ead3}} 
\index{TRendererImp@{TRendererImp}!m\_activeInstances@{m\_activeInstances}}
\index{m\_activeInstances@{m\_activeInstances}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{m\_activeInstances}{m\_activeInstances}}
{\footnotesize\ttfamily std\+::map$<$unsigned long, \mbox{\hyperlink{struct_t_renderer_imp_1_1_render_instance_infos}{Render\+Instance\+Infos}}$>$ TRenderer\+Imp\+::m\+\_\+active\+Instances}

\mbox{\Hypertarget{class_t_renderer_imp_a790fcef435606587a728c5af720d21cd}\label{class_t_renderer_imp_a790fcef435606587a728c5af720d21cd}} 
\index{TRendererImp@{TRendererImp}!m\_executor@{m\_executor}}
\index{m\_executor@{m\_executor}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{m\_executor}{m\_executor}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_thread_1_1_executor}{Executor}} TRenderer\+Imp\+::m\+\_\+executor}

\mbox{\Hypertarget{class_t_renderer_imp_a5e37a140b2dbc58a91ea3990edbee866}\label{class_t_renderer_imp_a5e37a140b2dbc58a91ea3990edbee866}} 
\index{TRendererImp@{TRendererImp}!m\_managers@{m\_managers}}
\index{m\_managers@{m\_managers}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{m\_managers}{m\_managers}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{class_t_render_resource_manager}{TRender\+Resource\+Manager}} $\ast$$>$ TRenderer\+Imp\+::m\+\_\+managers}

\mbox{\Hypertarget{class_t_renderer_imp_a671628d910121f4f98f755cc8b208475}\label{class_t_renderer_imp_a671628d910121f4f98f755cc8b208475}} 
\index{TRendererImp@{TRendererImp}!m\_ports@{m\_ports}}
\index{m\_ports@{m\_ports}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{m\_ports}{m\_ports}}
{\footnotesize\ttfamily Port\+Container TRenderer\+Imp\+::m\+\_\+ports}

\mbox{\Hypertarget{class_t_renderer_imp_a5a1073f12ea66011d0de024831148245}\label{class_t_renderer_imp_a5a1073f12ea66011d0de024831148245}} 
\index{TRendererImp@{TRendererImp}!m\_portsLock@{m\_portsLock}}
\index{m\_portsLock@{m\_portsLock}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{m\_portsLock}{m\_portsLock}}
{\footnotesize\ttfamily QRead\+Write\+Lock TRenderer\+Imp\+::m\+\_\+ports\+Lock}

\mbox{\Hypertarget{class_t_renderer_imp_afd4b309a4e02dc69547fcbf52afc06fd}\label{class_t_renderer_imp_afd4b309a4e02dc69547fcbf52afc06fd}} 
\index{TRendererImp@{TRendererImp}!m\_precomputingEnabled@{m\_precomputingEnabled}}
\index{m\_precomputingEnabled@{m\_precomputingEnabled}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{m\_precomputingEnabled}{m\_precomputingEnabled}}
{\footnotesize\ttfamily bool TRenderer\+Imp\+::m\+\_\+precomputing\+Enabled}

\mbox{\Hypertarget{class_t_renderer_imp_a878ac1ea9a1d80f4f62e9c5bf3661208}\label{class_t_renderer_imp_a878ac1ea9a1d80f4f62e9c5bf3661208}} 
\index{TRendererImp@{TRendererImp}!m\_rasterPool@{m\_rasterPool}}
\index{m\_rasterPool@{m\_rasterPool}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{m\_rasterPool}{m\_rasterPool}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_raster_pool}{Raster\+Pool}} TRenderer\+Imp\+::m\+\_\+raster\+Pool}

\mbox{\Hypertarget{class_t_renderer_imp_a7756ecb318e0f0bc8ba0c94916edf45a}\label{class_t_renderer_imp_a7756ecb318e0f0bc8ba0c94916edf45a}} 
\index{TRendererImp@{TRendererImp}!m\_rendererId@{m\_rendererId}}
\index{m\_rendererId@{m\_rendererId}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{m\_rendererId}{m\_rendererId}}
{\footnotesize\ttfamily unsigned long TRenderer\+Imp\+::m\+\_\+renderer\+Id}

\mbox{\Hypertarget{class_t_renderer_imp_a9eee32924e0369985a74672effb7c045}\label{class_t_renderer_imp_a9eee32924e0369985a74672effb7c045}} 
\index{TRendererImp@{TRendererImp}!m\_rendererIdCounter@{m\_rendererIdCounter}}
\index{m\_rendererIdCounter@{m\_rendererIdCounter}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{m\_rendererIdCounter}{m\_rendererIdCounter}}
{\footnotesize\ttfamily unsigned long TRenderer\+Imp\+::m\+\_\+renderer\+Id\+Counter = 0\hspace{0.3cm}{\ttfamily [static]}}



The renderer Id is a number uniquely associated with a \mbox{\hyperlink{class_t_renderer}{TRenderer}} instance. 

\mbox{\Hypertarget{class_t_renderer_imp_abe57a8e8f813a289a96da2b29cbf6c17}\label{class_t_renderer_imp_abe57a8e8f813a289a96da2b29cbf6c17}} 
\index{TRendererImp@{TRendererImp}!m\_renderIdCounter@{m\_renderIdCounter}}
\index{m\_renderIdCounter@{m\_renderIdCounter}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{m\_renderIdCounter}{m\_renderIdCounter}}
{\footnotesize\ttfamily unsigned long TRenderer\+Imp\+::m\+\_\+render\+Id\+Counter = 0\hspace{0.3cm}{\ttfamily [static]}}

The render Id is a number uniquely associated with a render process started with the start\+Rendering() method. 

Referenced by \mbox{\hyperlink{l00493}{TRenderer\+::build\+Render\+Id()}}, \mbox{\hyperlink{l00503}{TRenderer\+::next\+Render\+Id()}}, and \mbox{\hyperlink{l00638}{TRenderer\+::start\+Rendering()}}.

\mbox{\Hypertarget{class_t_renderer_imp_a998881fa696530ffc00537aa4da197d1}\label{class_t_renderer_imp_a998881fa696530ffc00537aa4da197d1}} 
\index{TRendererImp@{TRendererImp}!m\_renderInstancesMutex@{m\_renderInstancesMutex}}
\index{m\_renderInstancesMutex@{m\_renderInstancesMutex}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{m\_renderInstancesMutex}{m\_renderInstancesMutex}}
{\footnotesize\ttfamily QMutex TRenderer\+Imp\+::m\+\_\+render\+Instances\+Mutex}

\mbox{\Hypertarget{class_t_renderer_imp_af54b13ff3f0c4ca93454cefff3442fac}\label{class_t_renderer_imp_af54b13ff3f0c4ca93454cefff3442fac}} 
\index{TRendererImp@{TRendererImp}!m\_undoneTasks@{m\_undoneTasks}}
\index{m\_undoneTasks@{m\_undoneTasks}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{m\_undoneTasks}{m\_undoneTasks}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_atomic_var}{TAtomic\+Var}} TRenderer\+Imp\+::m\+\_\+undone\+Tasks}

\mbox{\Hypertarget{class_t_renderer_imp_a2efbe24cd7e576ae98f98fa0aae8d2ed}\label{class_t_renderer_imp_a2efbe24cd7e576ae98f98fa0aae8d2ed}} 
\index{TRendererImp@{TRendererImp}!m\_waitingLoops@{m\_waitingLoops}}
\index{m\_waitingLoops@{m\_waitingLoops}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{m\_waitingLoops}{m\_waitingLoops}}
{\footnotesize\ttfamily std\+::vector$<$bool $\ast$$>$ TRenderer\+Imp\+::m\+\_\+waiting\+Loops}

\mbox{\Hypertarget{class_t_renderer_imp_a1f1c542df19de3031d656c1ba65985ae}\label{class_t_renderer_imp_a1f1c542df19de3031d656c1ba65985ae}} 
\index{TRendererImp@{TRendererImp}!rootFx@{rootFx}}
\index{rootFx@{rootFx}!TRendererImp@{TRendererImp}}
\doxysubsubsection{\texorpdfstring{rootFx}{rootFx}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_fx_p}{TRaster\+FxP}} TRenderer\+Imp\+::root\+Fx}



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/common/tfx/trenderer.\+cpp\end{DoxyCompactItemize}
