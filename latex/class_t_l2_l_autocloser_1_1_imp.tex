\hypertarget{class_t_l2_l_autocloser_1_1_imp}{}\doxysection{TL2\+LAutocloser\+::Imp Class Reference}
\label{class_t_l2_l_autocloser_1_1_imp}\index{TL2LAutocloser::Imp@{TL2LAutocloser::Imp}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
Stroke\+Point\+Set $\ast$ \mbox{\hyperlink{class_t_l2_l_autocloser_1_1_imp_a3f9581933ae8317c6a3c2d27293636a6}{get\+Point\+Set}} (\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$stroke)
\item 
Strokes\+Intersection $\ast$ \mbox{\hyperlink{class_t_l2_l_autocloser_1_1_imp_a93b573b6aee1c59a8380790bd37b7a77}{get\+Intersection}} (\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$strokea, \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$strokeb, const std\+::vector$<$ Double\+Pair $>$ $\ast$intersection)
\item 
void \mbox{\hyperlink{class_t_l2_l_autocloser_1_1_imp_a335e79c4b02c2f05a322d24d069e2521}{search}} (std\+::vector$<$ \mbox{\hyperlink{struct_t_l2_l_autocloser_1_1_segment}{TL2\+LAutocloser\+::\+Segment}} $>$ \&segments, \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$strokea, \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$strokeb, const std\+::vector$<$ Double\+Pair $>$ $\ast$intersection)
\item 
void \mbox{\hyperlink{class_t_l2_l_autocloser_1_1_imp_a8d35aafd80b600054bc8ada8855984f5}{draw\+Links}} ()
\item 
void \mbox{\hyperlink{class_t_l2_l_autocloser_1_1_imp_addde68a6c513a6896092ebf976de530b}{draw\+Stroke}} (Stroke\+Point\+Set $\ast$)
\item 
void \mbox{\hyperlink{class_t_l2_l_autocloser_1_1_imp_a476d33a843d6f4e6da49c2374300f5de}{draw\+Strokes}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
double \mbox{\hyperlink{class_t_l2_l_autocloser_1_1_imp_a3e726e67d77e8a9b892b7432c25fec56}{m\+\_\+max\+Dist2}}
\item 
std\+::map$<$ \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$, Stroke\+Point\+Set $\ast$ $>$ \mbox{\hyperlink{class_t_l2_l_autocloser_1_1_imp_abd936b329f0e570774a5e5e8f4bdbe30}{m\+\_\+strokes}}
\item 
std\+::map$<$ std\+::pair$<$ \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$, \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ $>$, Strokes\+Intersection $\ast$ $>$ \mbox{\hyperlink{class_t_l2_l_autocloser_1_1_imp_acb2e3205ad2f5ae37c2c0de8b12b0401}{m\+\_\+intersections}}
\item 
std\+::pair$<$ Stroke\+Point\+Set $\ast$, Stroke\+Point\+Set $\ast$ $>$ \mbox{\hyperlink{class_t_l2_l_autocloser_1_1_imp_a54b0d599d7df629320740575e79dc0f5}{m\+\_\+last\+Stroke\+Pair}}
\item 
std\+::vector$<$ \mbox{\hyperlink{struct_t_l2_l_autocloser_1_1_segment}{TL2\+LAutocloser\+::\+Segment}} $>$ \mbox{\hyperlink{class_t_l2_l_autocloser_1_1_imp_a2353da138b18b04a04376b226a00e073}{m\+\_\+segments}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_l2_l_autocloser_1_1_imp_a4c698066c704f784b87c648880c3d845}\label{class_t_l2_l_autocloser_1_1_imp_a4c698066c704f784b87c648880c3d845}} 
\index{TL2LAutocloser::Imp@{TL2LAutocloser::Imp}!Imp@{Imp}}
\index{Imp@{Imp}!TL2LAutocloser::Imp@{TL2LAutocloser::Imp}}
\doxysubsubsection{\texorpdfstring{Imp()}{Imp()}}
{\footnotesize\ttfamily TL2\+LAutocloser\+::\+Imp\+::\+Imp (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00268       : m\_maxDist2(50 * 50)}
\DoxyCodeLine{00269       , m\_lastStrokePair((StrokePointSet *)0, (StrokePointSet *)0) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_l2_l_autocloser_1_1_imp_aa0a50cf35906dcb2ef6e5e50d8442a27}\label{class_t_l2_l_autocloser_1_1_imp_aa0a50cf35906dcb2ef6e5e50d8442a27}} 
\index{TL2LAutocloser::Imp@{TL2LAutocloser::Imp}!````~Imp@{$\sim$Imp}}
\index{````~Imp@{$\sim$Imp}!TL2LAutocloser::Imp@{TL2LAutocloser::Imp}}
\doxysubsubsection{\texorpdfstring{$\sim$Imp()}{~Imp()}}
{\footnotesize\ttfamily TL2\+LAutocloser\+::\+Imp\+::$\sim$\+Imp (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00303                         \{}
\DoxyCodeLine{00304   std::map<TStroke *, StrokePointSet *>::iterator i;}
\DoxyCodeLine{00305   \textcolor{keywordflow}{for} (i = m\_strokes.begin(); i != m\_strokes.end(); ++i) \textcolor{keyword}{delete} i-\/>second;}
\DoxyCodeLine{00306   std::map<std::pair<TStroke *, TStroke *>, StrokesIntersection *>::iterator j;}
\DoxyCodeLine{00307   \textcolor{keywordflow}{for} (j = m\_intersections.begin(); j != m\_intersections.end(); ++j)}
\DoxyCodeLine{00308     \textcolor{keyword}{delete} j-\/>second;}
\DoxyCodeLine{00309   m\_strokes.clear();}
\DoxyCodeLine{00310   m\_intersections.clear();}
\DoxyCodeLine{00311 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_l2_l_autocloser_1_1_imp_a8d35aafd80b600054bc8ada8855984f5}\label{class_t_l2_l_autocloser_1_1_imp_a8d35aafd80b600054bc8ada8855984f5}} 
\index{TL2LAutocloser::Imp@{TL2LAutocloser::Imp}!drawLinks@{drawLinks}}
\index{drawLinks@{drawLinks}!TL2LAutocloser::Imp@{TL2LAutocloser::Imp}}
\doxysubsubsection{\texorpdfstring{drawLinks()}{drawLinks()}}
{\footnotesize\ttfamily void TL2\+LAutocloser\+::\+Imp\+::draw\+Links (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00315                                   \{}
\DoxyCodeLine{00316   glColor3d(0, 0, 1);}
\DoxyCodeLine{00317   glBegin(GL\_LINES);}
\DoxyCodeLine{00318   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)m\_segments.size(); i++) \{}
\DoxyCodeLine{00319     tglVertex(m\_segments[i].p0);}
\DoxyCodeLine{00320     tglVertex(m\_segments[i].p1);}
\DoxyCodeLine{00321   \}}
\DoxyCodeLine{00322   glEnd();}
\DoxyCodeLine{00323 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_l2_l_autocloser_1_1_imp_addde68a6c513a6896092ebf976de530b}\label{class_t_l2_l_autocloser_1_1_imp_addde68a6c513a6896092ebf976de530b}} 
\index{TL2LAutocloser::Imp@{TL2LAutocloser::Imp}!drawStroke@{drawStroke}}
\index{drawStroke@{drawStroke}!TL2LAutocloser::Imp@{TL2LAutocloser::Imp}}
\doxysubsubsection{\texorpdfstring{drawStroke()}{drawStroke()}}
{\footnotesize\ttfamily void TL2\+LAutocloser\+::\+Imp\+::draw\+Stroke (\begin{DoxyParamCaption}\item[{Stroke\+Point\+Set $\ast$}]{ps }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00325                                                      \{}
\DoxyCodeLine{00326   \textcolor{keywordflow}{if} (ps \&\& ps-\/>points.size() >= 2) \{}
\DoxyCodeLine{00327     glBegin(GL\_LINES);}
\DoxyCodeLine{00328     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)ps-\/>points.size(); i++)}
\DoxyCodeLine{00329       tglVertex(ps-\/>points[i].pos);}
\DoxyCodeLine{00330     glEnd();}
\DoxyCodeLine{00331   \}}
\DoxyCodeLine{00332 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_l2_l_autocloser_1_1_imp_a476d33a843d6f4e6da49c2374300f5de}\label{class_t_l2_l_autocloser_1_1_imp_a476d33a843d6f4e6da49c2374300f5de}} 
\index{TL2LAutocloser::Imp@{TL2LAutocloser::Imp}!drawStrokes@{drawStrokes}}
\index{drawStrokes@{drawStrokes}!TL2LAutocloser::Imp@{TL2LAutocloser::Imp}}
\doxysubsubsection{\texorpdfstring{drawStrokes()}{drawStrokes()}}
{\footnotesize\ttfamily void TL2\+LAutocloser\+::\+Imp\+::draw\+Strokes (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00334                                     \{}
\DoxyCodeLine{00335   \textcolor{keywordflow}{if} (m\_lastStrokePair.first) \{}
\DoxyCodeLine{00336     \textcolor{keywordflow}{if} (m\_lastStrokePair.first == m\_lastStrokePair.second) \{}
\DoxyCodeLine{00337       glColor3d(1, 0, 1);}
\DoxyCodeLine{00338       drawStroke(m\_lastStrokePair.first);}
\DoxyCodeLine{00339     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00340       glColor3d(1, 0, 0);}
\DoxyCodeLine{00341       drawStroke(m\_lastStrokePair.first);}
\DoxyCodeLine{00342       glColor3d(0, 1, 0);}
\DoxyCodeLine{00343       drawStroke(m\_lastStrokePair.second);}
\DoxyCodeLine{00344     \}}
\DoxyCodeLine{00345   \}}
\DoxyCodeLine{00346 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_l2_l_autocloser_1_1_imp_a93b573b6aee1c59a8380790bd37b7a77}\label{class_t_l2_l_autocloser_1_1_imp_a93b573b6aee1c59a8380790bd37b7a77}} 
\index{TL2LAutocloser::Imp@{TL2LAutocloser::Imp}!getIntersection@{getIntersection}}
\index{getIntersection@{getIntersection}!TL2LAutocloser::Imp@{TL2LAutocloser::Imp}}
\doxysubsubsection{\texorpdfstring{getIntersection()}{getIntersection()}}
{\footnotesize\ttfamily Strokes\+Intersection $\ast$ TL2\+LAutocloser\+::\+Imp\+::get\+Intersection (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{strokea,  }\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{strokeb,  }\item[{const std\+::vector$<$ Double\+Pair $>$ $\ast$}]{intersection }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00282                                                  \{}
\DoxyCodeLine{00283     std::map<std::pair<TStroke *, TStroke *>, StrokesIntersection *>::iterator}
\DoxyCodeLine{00284         it = m\_intersections.find(std::make\_pair(strokea, strokeb));}
\DoxyCodeLine{00285     \textcolor{keywordflow}{if} (it != m\_intersections.end()) \textcolor{keywordflow}{return} it-\/>second;}
\DoxyCodeLine{00286     StrokesIntersection *si =}
\DoxyCodeLine{00287         \textcolor{keyword}{new} StrokesIntersection(strokea, strokeb, intersection);}
\DoxyCodeLine{00288     m\_intersections[std::make\_pair(strokea, strokeb)] = si;}
\DoxyCodeLine{00289     m\_intersections[std::make\_pair(strokeb, strokea)] = si-\/>swapped();}
\DoxyCodeLine{00290     \textcolor{keywordflow}{return} si;}
\DoxyCodeLine{00291   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_l2_l_autocloser_1_1_imp_a3f9581933ae8317c6a3c2d27293636a6}\label{class_t_l2_l_autocloser_1_1_imp_a3f9581933ae8317c6a3c2d27293636a6}} 
\index{TL2LAutocloser::Imp@{TL2LAutocloser::Imp}!getPointSet@{getPointSet}}
\index{getPointSet@{getPointSet}!TL2LAutocloser::Imp@{TL2LAutocloser::Imp}}
\doxysubsubsection{\texorpdfstring{getPointSet()}{getPointSet()}}
{\footnotesize\ttfamily Stroke\+Point\+Set $\ast$ TL2\+LAutocloser\+::\+Imp\+::get\+Point\+Set (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00272                                                \{}
\DoxyCodeLine{00273     std::map<TStroke *, StrokePointSet *>::iterator it = m\_strokes.find(stroke);}
\DoxyCodeLine{00274     \textcolor{keywordflow}{if} (it != m\_strokes.end()) \textcolor{keywordflow}{return} it-\/>second;}
\DoxyCodeLine{00275     StrokePointSet *ps = \textcolor{keyword}{new} StrokePointSet(stroke);}
\DoxyCodeLine{00276     m\_strokes[stroke]  = ps;}
\DoxyCodeLine{00277     \textcolor{keywordflow}{return} ps;}
\DoxyCodeLine{00278   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_l2_l_autocloser_1_1_imp_a335e79c4b02c2f05a322d24d069e2521}\label{class_t_l2_l_autocloser_1_1_imp_a335e79c4b02c2f05a322d24d069e2521}} 
\index{TL2LAutocloser::Imp@{TL2LAutocloser::Imp}!search@{search}}
\index{search@{search}!TL2LAutocloser::Imp@{TL2LAutocloser::Imp}}
\doxysubsubsection{\texorpdfstring{search()}{search()}}
{\footnotesize\ttfamily void TL2\+LAutocloser\+::\+Imp\+::search (\begin{DoxyParamCaption}\item[{std\+::vector$<$ \mbox{\hyperlink{struct_t_l2_l_autocloser_1_1_segment}{TL2\+LAutocloser\+::\+Segment}} $>$ \&}]{segments,  }\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{strokea,  }\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{strokeb,  }\item[{const std\+::vector$<$ Double\+Pair $>$ $\ast$}]{intersection }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00353                                                                              \{}
\DoxyCodeLine{00354   m\_lastStrokePair.first = m\_lastStrokePair.second = 0;}
\DoxyCodeLine{00355   \textcolor{keywordflow}{if} (strokea == 0 || strokeb == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00356   \textcolor{comment}{/*}}
\DoxyCodeLine{00357 \textcolor{comment}{\#ifdef \_WIN32}}
\DoxyCodeLine{00358 \textcolor{comment}{MyTimer timer;}}
\DoxyCodeLine{00359 \textcolor{comment}{qDebug() << "{}search started"{};}}
\DoxyCodeLine{00360 \textcolor{comment}{timer.start();}}
\DoxyCodeLine{00361 \textcolor{comment}{\#endif}}
\DoxyCodeLine{00362 \textcolor{comment}{*/}}
\DoxyCodeLine{00363   \textcolor{keywordtype}{bool} sameStroke = strokea == strokeb;}
\DoxyCodeLine{00364 }
\DoxyCodeLine{00365   StrokePointSet *psa     = getPointSet(strokea);}
\DoxyCodeLine{00366   StrokePointSet *psb     = sameStroke ? psa : getPointSet(strokeb);}
\DoxyCodeLine{00367   m\_lastStrokePair.first  = psa;}
\DoxyCodeLine{00368   m\_lastStrokePair.second = psb;}
\DoxyCodeLine{00369   StrokesIntersection *si = getIntersection(strokea, strokeb, intersections);}
\DoxyCodeLine{00370 }
\DoxyCodeLine{00371   \textcolor{comment}{// find links (i.e. best matching point in psb for each point in psa)}}
\DoxyCodeLine{00372 }
\DoxyCodeLine{00373   std::vector<std::pair<int, int>> links;}
\DoxyCodeLine{00374   \textcolor{keywordtype}{int} na = (int)psa-\/>points.size();}
\DoxyCodeLine{00375   \textcolor{keywordtype}{int} nb = (int)psb-\/>points.size();}
\DoxyCodeLine{00376   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00377   \textcolor{keywordflow}{for} (i = 0; i < na; i++) \{}
\DoxyCodeLine{00378     \textcolor{keywordtype}{double} minDist2 = 0;}
\DoxyCodeLine{00379     \textcolor{keywordtype}{int} k           = -\/1;}
\DoxyCodeLine{00380 }
\DoxyCodeLine{00381     \textcolor{keywordtype}{int} j0             = 0;}
\DoxyCodeLine{00382     \textcolor{keywordflow}{if} (sameStroke) j0 = i + 1;}
\DoxyCodeLine{00383     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < nb; j++) \{}
\DoxyCodeLine{00384       \mbox{\hyperlink{class_t_point_t}{TPointD}} delta = psb-\/>points[j].pos -\/ psa-\/>points[i].pos;}
\DoxyCodeLine{00385       \textcolor{keywordtype}{double} dist2  = norm2(delta);}
\DoxyCodeLine{00386 }
\DoxyCodeLine{00387       \textcolor{keywordflow}{if} (dist2 > m\_maxDist2) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00388       \textcolor{keywordflow}{if} (dist2 < 0.000001) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00389 }
\DoxyCodeLine{00390       \textcolor{keywordtype}{double} dist = sqrt(dist2);}
\DoxyCodeLine{00391       delta       = delta * (1.0 / dist);}
\DoxyCodeLine{00392       \textcolor{keywordtype}{double} cs   = 0.005;}
\DoxyCodeLine{00393 }
\DoxyCodeLine{00394       \textcolor{keywordflow}{if} ((psa-\/>points[i].crvdir * delta) > -\/cs) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00395       \textcolor{keywordflow}{if} ((psb-\/>points[j].crvdir * delta) < cs) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00396 }
\DoxyCodeLine{00397       \textcolor{keywordflow}{if} (sameStroke) \{}
\DoxyCodeLine{00398         \textcolor{keywordtype}{double} ds = fabs(psa-\/>points[i].s -\/ psb-\/>points[j].s);}
\DoxyCodeLine{00399         \textcolor{keywordflow}{if} (ds < dist * 1.5) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00400       \}}
\DoxyCodeLine{00401       \textcolor{keywordflow}{if} ((si-\/>m\_ida[i] > 0 \&\& si-\/>m\_ida[i] < dist) ||}
\DoxyCodeLine{00402           (si-\/>m\_idb[j] > 0 \&\& si-\/>m\_idb[j] < dist))}
\DoxyCodeLine{00403         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00404       \textcolor{keywordflow}{if} (k < 0 || dist2 < minDist2) \{}
\DoxyCodeLine{00405         k        = j;}
\DoxyCodeLine{00406         minDist2 = dist2;}
\DoxyCodeLine{00407       \}}
\DoxyCodeLine{00408     \}}
\DoxyCodeLine{00409     \textcolor{keywordflow}{if} (k >= 0 \&\& (!sameStroke || k > i) \&\& (0 < i \&\& i < na -\/ 1) \&\&}
\DoxyCodeLine{00410         (0 < k \&\& k < nb -\/ 1)) \{}
\DoxyCodeLine{00411       links.push\_back(std::make\_pair(i, k));}
\DoxyCodeLine{00412     \}}
\DoxyCodeLine{00413   \}}
\DoxyCodeLine{00414 }
\DoxyCodeLine{00415   \textcolor{comment}{/*}}
\DoxyCodeLine{00416 \textcolor{comment}{for(i=0;i<(int)links.size();i++)}}
\DoxyCodeLine{00417 \textcolor{comment}{\{}}
\DoxyCodeLine{00418 \textcolor{comment}{int ia = links[i].first;}}
\DoxyCodeLine{00419 \textcolor{comment}{int ib = links[i].second;}}
\DoxyCodeLine{00420 \textcolor{comment}{double mind2 = norm2(psa-\/>points[ia].pos -\/ psb-\/>points[ib].pos);}}
\DoxyCodeLine{00421 \textcolor{comment}{TL2LAutocloser::Segment segment;}}
\DoxyCodeLine{00422 \textcolor{comment}{segment.stroke0 = strokea;}}
\DoxyCodeLine{00423 \textcolor{comment}{segment.stroke1 = strokeb;}}
\DoxyCodeLine{00424 \textcolor{comment}{segment.w0 = psa-\/>points[ia].w;}}
\DoxyCodeLine{00425 \textcolor{comment}{segment.w1 = psb-\/>points[ib].w;}}
\DoxyCodeLine{00426 \textcolor{comment}{segment.p0 = strokea-\/>getThickPoint(segment.w0);}}
\DoxyCodeLine{00427 \textcolor{comment}{segment.p1 = strokeb-\/>getThickPoint(segment.w1);}}
\DoxyCodeLine{00428 \textcolor{comment}{segment.dist2 = mind2;}}
\DoxyCodeLine{00429 \textcolor{comment}{segments.push\_back(segment);}}
\DoxyCodeLine{00430 \textcolor{comment}{\}}}
\DoxyCodeLine{00431 \textcolor{comment}{*/}}
\DoxyCodeLine{00432 }
\DoxyCodeLine{00433   \textcolor{comment}{// select best links}}
\DoxyCodeLine{00434   \textcolor{keywordflow}{for} (i = 0; i < (int)links.size(); i++) \{}
\DoxyCodeLine{00435     \textcolor{keywordtype}{int} ia       = links[i].first;}
\DoxyCodeLine{00436     \textcolor{keywordtype}{int} ib       = links[i].second;}
\DoxyCodeLine{00437     \textcolor{keywordtype}{double} d2    = norm2(psa-\/>points[ia].pos -\/ psb-\/>points[ib].pos);}
\DoxyCodeLine{00438     \textcolor{keywordtype}{double} mind2 = d2;}
\DoxyCodeLine{00439     \textcolor{keywordtype}{int} k        = i;}
\DoxyCodeLine{00440     \textcolor{keywordflow}{while} (i + 1 < (\textcolor{keywordtype}{int})links.size()) \{}
\DoxyCodeLine{00441       \textcolor{keywordtype}{int} ia2    = links[i + 1].first;}
\DoxyCodeLine{00442       \textcolor{keywordtype}{int} ib2    = links[i + 1].second;}
\DoxyCodeLine{00443       \textcolor{keywordtype}{double} d22 = norm2(psa-\/>points[ia2].pos -\/ psb-\/>points[ib2].pos);}
\DoxyCodeLine{00444       \textcolor{keywordtype}{double} d2m = (d2 + d22) * 0.5;}
\DoxyCodeLine{00445       \textcolor{keywordtype}{double} dsa = psa-\/>points[ia2].s -\/ psa-\/>points[ia].s;}
\DoxyCodeLine{00446       \textcolor{keywordtype}{double} dsb = psb-\/>points[ib2].s -\/ psb-\/>points[ib].s;}
\DoxyCodeLine{00447       \textcolor{keywordflow}{if} (dsa * dsa > d2m || dsb * dsb > d2m) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00448       \textcolor{keywordflow}{if} (d22 < mind2) \{}
\DoxyCodeLine{00449         mind2 = d22;}
\DoxyCodeLine{00450         k     = i + 1;}
\DoxyCodeLine{00451       \}}
\DoxyCodeLine{00452       ia = ia2;}
\DoxyCodeLine{00453       ib = ib2;}
\DoxyCodeLine{00454       d2 = d22;}
\DoxyCodeLine{00455       i++;}
\DoxyCodeLine{00456     \}}
\DoxyCodeLine{00457     ia = links[k].first;}
\DoxyCodeLine{00458     ib = links[k].second;}
\DoxyCodeLine{00459     \mbox{\hyperlink{struct_t_l2_l_autocloser_1_1_segment}{TL2LAutocloser::Segment}} segment;}
\DoxyCodeLine{00460     segment.\mbox{\hyperlink{struct_t_l2_l_autocloser_1_1_segment_a3709845455b1b8985b840a40a1d0020f}{stroke0}} = strokea;}
\DoxyCodeLine{00461     segment.stroke1 = strokeb;}
\DoxyCodeLine{00462     segment.w0      = psa-\/>points[ia].w;}
\DoxyCodeLine{00463     segment.w1      = psb-\/>points[ib].w;}
\DoxyCodeLine{00464     segment.p0      = strokea-\/>\mbox{\hyperlink{class_t_stroke_ada4f6fc3fea4a7c0b949cd1d9dc6e640}{getThickPoint}}(segment.w0);}
\DoxyCodeLine{00465     segment.p1      = strokeb-\/>\mbox{\hyperlink{class_t_stroke_ada4f6fc3fea4a7c0b949cd1d9dc6e640}{getThickPoint}}(segment.w1);}
\DoxyCodeLine{00466     segment.dist2   = mind2;}
\DoxyCodeLine{00467     segments.push\_back(segment);}
\DoxyCodeLine{00468   \}}
\DoxyCodeLine{00469   \textcolor{comment}{/*}}
\DoxyCodeLine{00470 \textcolor{comment}{\#ifdef \_WIN32}}
\DoxyCodeLine{00471 \textcolor{comment}{double elapsed = timer.elapsedSeconds();}}
\DoxyCodeLine{00472 \textcolor{comment}{qDebug() << "{}search completed. time="{} << elapsed << "{}s"{};}}
\DoxyCodeLine{00473 \textcolor{comment}{\#endif}}
\DoxyCodeLine{00474 \textcolor{comment}{*/}}
\DoxyCodeLine{00475 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_t_l2_l_autocloser_1_1_imp_acb2e3205ad2f5ae37c2c0de8b12b0401}\label{class_t_l2_l_autocloser_1_1_imp_acb2e3205ad2f5ae37c2c0de8b12b0401}} 
\index{TL2LAutocloser::Imp@{TL2LAutocloser::Imp}!m\_intersections@{m\_intersections}}
\index{m\_intersections@{m\_intersections}!TL2LAutocloser::Imp@{TL2LAutocloser::Imp}}
\doxysubsubsection{\texorpdfstring{m\_intersections}{m\_intersections}}
{\footnotesize\ttfamily std\+::map$<$std\+::pair$<$\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$, \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$$>$, Strokes\+Intersection $\ast$$>$ TL2\+LAutocloser\+::\+Imp\+::m\+\_\+intersections}

\mbox{\Hypertarget{class_t_l2_l_autocloser_1_1_imp_a54b0d599d7df629320740575e79dc0f5}\label{class_t_l2_l_autocloser_1_1_imp_a54b0d599d7df629320740575e79dc0f5}} 
\index{TL2LAutocloser::Imp@{TL2LAutocloser::Imp}!m\_lastStrokePair@{m\_lastStrokePair}}
\index{m\_lastStrokePair@{m\_lastStrokePair}!TL2LAutocloser::Imp@{TL2LAutocloser::Imp}}
\doxysubsubsection{\texorpdfstring{m\_lastStrokePair}{m\_lastStrokePair}}
{\footnotesize\ttfamily std\+::pair$<$Stroke\+Point\+Set $\ast$, Stroke\+Point\+Set $\ast$$>$ TL2\+LAutocloser\+::\+Imp\+::m\+\_\+last\+Stroke\+Pair}

\mbox{\Hypertarget{class_t_l2_l_autocloser_1_1_imp_a3e726e67d77e8a9b892b7432c25fec56}\label{class_t_l2_l_autocloser_1_1_imp_a3e726e67d77e8a9b892b7432c25fec56}} 
\index{TL2LAutocloser::Imp@{TL2LAutocloser::Imp}!m\_maxDist2@{m\_maxDist2}}
\index{m\_maxDist2@{m\_maxDist2}!TL2LAutocloser::Imp@{TL2LAutocloser::Imp}}
\doxysubsubsection{\texorpdfstring{m\_maxDist2}{m\_maxDist2}}
{\footnotesize\ttfamily double TL2\+LAutocloser\+::\+Imp\+::m\+\_\+max\+Dist2}

\mbox{\Hypertarget{class_t_l2_l_autocloser_1_1_imp_a2353da138b18b04a04376b226a00e073}\label{class_t_l2_l_autocloser_1_1_imp_a2353da138b18b04a04376b226a00e073}} 
\index{TL2LAutocloser::Imp@{TL2LAutocloser::Imp}!m\_segments@{m\_segments}}
\index{m\_segments@{m\_segments}!TL2LAutocloser::Imp@{TL2LAutocloser::Imp}}
\doxysubsubsection{\texorpdfstring{m\_segments}{m\_segments}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{struct_t_l2_l_autocloser_1_1_segment}{TL2\+LAutocloser\+::\+Segment}}$>$ TL2\+LAutocloser\+::\+Imp\+::m\+\_\+segments}

\mbox{\Hypertarget{class_t_l2_l_autocloser_1_1_imp_abd936b329f0e570774a5e5e8f4bdbe30}\label{class_t_l2_l_autocloser_1_1_imp_abd936b329f0e570774a5e5e8f4bdbe30}} 
\index{TL2LAutocloser::Imp@{TL2LAutocloser::Imp}!m\_strokes@{m\_strokes}}
\index{m\_strokes@{m\_strokes}!TL2LAutocloser::Imp@{TL2LAutocloser::Imp}}
\doxysubsubsection{\texorpdfstring{m\_strokes}{m\_strokes}}
{\footnotesize\ttfamily std\+::map$<$\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$, Stroke\+Point\+Set $\ast$$>$ TL2\+LAutocloser\+::\+Imp\+::m\+\_\+strokes}



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/common/tvectorimage/tl2lautocloser.\+cpp\end{DoxyCompactItemize}
