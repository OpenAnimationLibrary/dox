\hypertarget{class_file_browser}{}\doxysection{File\+Browser Class Reference}
\label{class_file_browser}\index{FileBrowser@{FileBrowser}}
Inheritance diagram for File\+Browser\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_file_browser}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_file_browser_1_1_data}{Data}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_file_browser_af6d5e3e1d6722a7341369eaa95931b05}{on\+Tree\+Folder\+Changed}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Signals}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_file_browser_add3888f9ebfac35f16c6d2148d238971}\label{class_file_browser_add3888f9ebfac35f16c6d2148d238971}} 
void {\bfseries file\+Path\+Clicked} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&)
\item 
\mbox{\Hypertarget{class_file_browser_ab347b96696dc5747f2f404b8dceb09b0}\label{class_file_browser_ab347b96696dc5747f2f404b8dceb09b0}} 
void {\bfseries file\+Path\+Double\+Clicked} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&)
\item 
\mbox{\Hypertarget{class_file_browser_aeed2f90ae9bf4e7835331a469269b79a}\label{class_file_browser_aeed2f90ae9bf4e7835331a469269b79a}} 
void {\bfseries file\+Paths\+Selected} (const std\+::set$<$ \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} $>$ \&, const std\+::list$<$ std\+::vector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ $>$ \&)
\item 
\mbox{\Hypertarget{class_file_browser_a539347d8aa5a13e5adbc81012e367a3b}\label{class_file_browser_a539347d8aa5a13e5adbc81012e367a3b}} 
void {\bfseries tree\+Folder\+Changed} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&)
\item 
\mbox{\Hypertarget{class_file_browser_a1a7b0ffc26e44813f495d69aac4381ec}\label{class_file_browser_a1a7b0ffc26e44813f495d69aac4381ec}} 
void {\bfseries history\+Changed} (bool, bool)
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_file_browser_accbad888ef8eeaea4cb82b2bb5dcc71b}{File\+Browser}} (QWidget $\ast$parent, Qt\+::\+WFlags flags=0, bool no\+Context\+Menu=false, bool multi\+Selection\+Enabled=false)
\item 
void \mbox{\hyperlink{class_file_browser_adfd5f17543f8b15b0258619c25784ae9}{sort\+By\+Data\+Model}} (Data\+Type data\+Type, bool is\+Discendent) override
\item 
void \mbox{\hyperlink{class_file_browser_ac49f77ccdb2ec2a2bd6fddd3879e9d8c}{refresh\+Data}} () override
\item 
int \mbox{\hyperlink{class_file_browser_a96a400a7c5f8e12b4c546aa57f22d042}{get\+Item\+Count}} () const override
\item 
QVariant \mbox{\hyperlink{class_file_browser_aa03174dac4a7dec69e715ac33b354293}{get\+Item\+Data}} (int index, Data\+Type data\+Type, bool is\+Selected=false) override
\item 
bool \mbox{\hyperlink{class_file_browser_ac6c3759862d0ca4822709dc13f0e89ce}{can\+Rename\+Item}} (int index) const override
\item 
void \mbox{\hyperlink{class_file_browser_a3a30f40f104f764b1d155e594d63cf3a}{rename\+Item}} (int index, const QString \&new\+Name) override
\item 
bool \mbox{\hyperlink{class_file_browser_a633c70a094e977e4ef359dc722d275df}{is\+Scene\+Item}} (int index) const override
\item 
void \mbox{\hyperlink{class_file_browser_abe83257d5c2506a78b9e9d347fc18c2b}{start\+Drag\+Drop}} () override
\item 
QMenu $\ast$ \mbox{\hyperlink{class_file_browser_a042df6ddd31d2015239d3bddf2d46542}{get\+Context\+Menu}} (QWidget $\ast$parent, int index) override
\item 
void \mbox{\hyperlink{class_file_browser_a967f00c3f76cec84acb8c92a4ae1de7e}{add\+Filter\+Type}} (const QString \&type)
\item 
void \mbox{\hyperlink{class_file_browser_af393070c2aa12a119ac1872c9d90b140}{set\+Filter\+Types}} (const QString\+List \&types)
\item 
const QString\+List \& \mbox{\hyperlink{class_file_browser_a1b2d6a068c5867cbd07bffdd8c7fa4fa}{get\+Filter\+Types}} () const
\item 
void \mbox{\hyperlink{class_file_browser_a2c90a47576cba4145c8cb20d8c5feedc}{remove\+Filter\+Type}} (const QString \&type)
\item 
void \mbox{\hyperlink{class_file_browser_a76d96b3118d5dd83fa72467ff37c2daa}{set\+Folder}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp, bool expand\+Node=false, bool force\+Update=false)
\item 
void \mbox{\hyperlink{class_file_browser_aee3f059ff741d12d0e8c862b7a7e6585}{set\+Unregistered\+Folder}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp)
\item 
void \mbox{\hyperlink{class_file_browser_a3a27da325420c515a4f5b01ad2e65eef}{set\+History\+Day}} (std\+::string day\+Date\+String)
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_file_browser_acd6840b528ed8ca02659f8bebacb26a9}{get\+Folder}} () const
\item 
std\+::string \mbox{\hyperlink{class_file_browser_aa44e8ef0e86937fe6b6457791ee67182}{get\+Day\+Date\+String}} () const
\item 
void \mbox{\hyperlink{class_file_browser_a5ed87d1ee48b6f53c3afd446e319b103}{make\+Current\+Project\+Visible}} ()
\item 
void \mbox{\hyperlink{class_file_browser_a0bdee8367b83164ed33ab25c861fa845}{enable\+Global\+Selection}} (bool enabled)
\item 
void \mbox{\hyperlink{class_file_browser_a8c3d2b2ed9e82239b7306dde94d12f7d}{select\+None}} ()
\item 
QSplitter $\ast$ \mbox{\hyperlink{class_file_browser_a17ff55a805c10996d83fa0e67c15a0e6}{get\+Main\+Splitter}} () const
\item 
void \mbox{\hyperlink{class_file_browser_a395af240cb7f0cdb7a2bc9b60b5f1b04}{enable\+Double\+Click\+To\+Open\+Scenes}} ()
\item 
\mbox{\hyperlink{class_file_browser_ac7852a2ec76171ba72d12f18087ce02b}{File\+Browser}} (\mbox{\hyperlink{class_t_widget}{TWidget}} $\ast$parent, string name, const \mbox{\hyperlink{classvector}{vector}}$<$ string $>$ \&file\+Types)
\item 
void \mbox{\hyperlink{class_file_browser_a3b32f80314c3282adbb03402862f27c0}{set\+Filter}} (const \mbox{\hyperlink{classvector}{vector}}$<$ string $>$ \&file\+Types)
\item 
void \mbox{\hyperlink{class_file_browser_a2c38b8998afb8d1e37950c4337efe17b}{configure\+Notify}} (const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&d)
\item 
void \mbox{\hyperlink{class_file_browser_ad6c9d849b8a37112908b591b070a9c2b}{set\+Background\+Color}} (const \mbox{\hyperlink{class_t_gui_color}{TGui\+Color}} \&)
\item 
void \mbox{\hyperlink{class_file_browser_a0f9ebc58b663663a3e9bbabed19c0a2d}{draw}} ()
\item 
void \mbox{\hyperlink{class_file_browser_ab678ed432e20eeec84506d4d79a7d3c4}{set\+File\+Sel\+Change\+Action}} (\mbox{\hyperlink{class_generic_file_browser_action}{Generic\+File\+Browser\+Action}} $\ast$action)
\item 
void \mbox{\hyperlink{class_file_browser_aeac23c27d34c4a3f3e5f5705d65ed6ef}{set\+File\+Dbl\+Click\+Action}} (\mbox{\hyperlink{class_generic_file_browser_action}{Generic\+File\+Browser\+Action}} $\ast$action)
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_file_browser_a03789dc2d402a1767cb99b84bcc56e56}{get\+Current\+Dir}} () const
\item 
void \mbox{\hyperlink{class_file_browser_afe17afbf4b7e1385da225b7149bb6e24}{set\+Current\+Dir}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&dir\+Path)
\item 
void \mbox{\hyperlink{class_file_browser_adcca48a2a5d808850fdb93bed19c06f2}{select\+Parent\+Directory}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{class_file_browser_a0c9112c1738e391a947730c33cf5685c}{refresh\+Folder}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&folder)
\item 
static void \mbox{\hyperlink{class_file_browser_af271aa0cd84409a98c99cec4588ed478}{update\+Item\+Viewer\+Panel}} ()
\item 
static bool \mbox{\hyperlink{class_file_browser_ad61e9472003d879d157c4eede04c7b06}{rename\+File}} (\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp, QString new\+Name)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_file_browser_ab696d161f02263fc1437d4d954ccc74a}{refresh}} ()
\item 
void \mbox{\hyperlink{class_file_browser_a8197be012a477240d3f1c3b5fb905e39}{change\+Folder}} (const QModel\+Index \&index)
\item 
void \mbox{\hyperlink{class_file_browser_aff99412b6539780fd6c3eec3996748ab}{on\+Data\+Changed}} (const QModel\+Index \&top\+Left, const QModel\+Index \&bottom\+Right)
\item 
void \mbox{\hyperlink{class_file_browser_a3b9b8277d0a37f3d71df14ca87f44fd2}{load\+Resources}} ()
\item 
void \mbox{\hyperlink{class_file_browser_a4de987ae683d6750e4c45a8c8fac53d3}{on\+Clicked\+Item}} (int index)
\item 
void \mbox{\hyperlink{class_file_browser_a695e343959f58dcf3e90b98ce46cd2b6}{on\+Double\+Clicked\+Item}} (int index)
\item 
void \mbox{\hyperlink{class_file_browser_a99908174d6164d025db0747cd6cf005a}{on\+Selected\+Items}} (const std\+::set$<$ int $>$ \&indexes)
\item 
void \mbox{\hyperlink{class_file_browser_a6478c0423676821080f9140ebe23ca44}{folder\+Up}} ()
\item 
void \mbox{\hyperlink{class_file_browser_a434f4bbc1f9049bd3c945f28c88b11ba}{new\+Folder}} ()
\item 
void \mbox{\hyperlink{class_file_browser_a43cbd4797a266128988b00feaee9206c}{on\+Back\+Button\+Pushed}} ()
\item 
void \mbox{\hyperlink{class_file_browser_a5afb575b35ecec62c2ceba974a414715}{on\+Fwd\+Button\+Pushed}} ()
\item 
void \mbox{\hyperlink{class_file_browser_ad557583ab2c6738c85b2d90a777218c1}{on\+Folder\+Edited}} ()
\item 
void \mbox{\hyperlink{class_file_browser_a61465fbc20166a697d0cd10a441a4757}{store\+Folder\+History}} ()
\item 
void \mbox{\hyperlink{class_file_browser_a11db86c3cbbe912dd32c38ab8841b722}{clear\+History}} ()
\item 
void \mbox{\hyperlink{class_file_browser_aba3a6a02ca1ca524eea3a72c8fca0c0f}{rename\+As\+Toonz\+Level}} ()
\item 
void \mbox{\hyperlink{class_file_browser_a371c20b1fda45b2c601ff637d7db1b9c}{update\+And\+Edit\+Version\+Control}} ()
\item 
void \mbox{\hyperlink{class_file_browser_a7913b70dd843927a534d47875331d5f4}{edit\+Version\+Control}} ()
\item 
void \mbox{\hyperlink{class_file_browser_a2ad4414b146e34499df87e7637d6cb31}{unlock\+Version\+Control}} ()
\item 
void \mbox{\hyperlink{class_file_browser_a72ecdae674fd3a0caca4ba1ad2d86852}{edit\+Frame\+Range\+Version\+Control}} ()
\item 
void \mbox{\hyperlink{class_file_browser_adadab2fb14e99879ce069b9db93c6df2}{unlock\+Frame\+Range\+Version\+Control}} ()
\item 
void \mbox{\hyperlink{class_file_browser_a676a9b612c95927fbf93398de4c7f2d3}{put\+Frame\+Range\+Version\+Control}} ()
\item 
void \mbox{\hyperlink{class_file_browser_a48fbc14b54e1666caefcb2de52e15694}{revert\+Frame\+Range\+Version\+Control}} ()
\item 
void \mbox{\hyperlink{class_file_browser_ac337cd99e06f437f493e2654f4d93302}{show\+Lock\+Information}} ()
\item 
void \mbox{\hyperlink{class_file_browser_a389e4b0a139968345f3a66864a628f4a}{show\+Frame\+Range\+Lock\+Info}} ()
\item 
void \mbox{\hyperlink{class_file_browser_adb544d2cec35e2dd94b75c29809dc769}{put\+Version\+Control}} ()
\item 
void \mbox{\hyperlink{class_file_browser_ae2dcc825209d7ff519f8a02276e84019}{revert\+Version\+Control}} ()
\item 
void \mbox{\hyperlink{class_file_browser_af0a7fc612c105d1ebbe2acccd0e3e23a}{delete\+Version\+Control}} ()
\item 
void \mbox{\hyperlink{class_file_browser_a92d75e38140f40ab4d143434d82c48ed}{get\+Version\+Control}} ()
\item 
void \mbox{\hyperlink{class_file_browser_adc4d3cd05364feb56ff24bc5b2053cbe}{get\+Revision\+Version\+Control}} ()
\item 
void \mbox{\hyperlink{class_file_browser_a93aab6eec97cc75749668cc636ed50dd}{get\+Revision\+History}} ()
\item 
void \mbox{\hyperlink{class_file_browser_afc1ca7a520de3a7bf976d5dd277b4702}{on\+Version\+Control\+Command\+Done}} (const QString\+List \&files)
\item 
void \mbox{\hyperlink{class_file_browser_a81913a1b170f4288f0127adb286ddbaa}{on\+File\+System\+Changed}} (const QString \&folder\+Path)
\item 
void \mbox{\hyperlink{class_file_browser_a7df506fe3e4b839204b50c77b2c22d6f}{try\+To\+Open\+Scene}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&file\+Path)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{class_file_browser_a2677b543b25e37f85ba7cc1cdf4175ce}{find\+Index\+With\+Path}} (\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} path)
\item 
void \mbox{\hyperlink{class_file_browser_a627e0e5e03fa8a1251081987fa44df87}{get\+Expanded\+Folders}} (\mbox{\hyperlink{class_dv_dir_model_node}{Dv\+Dir\+Model\+Node}} $\ast$node, QList$<$ \mbox{\hyperlink{class_dv_dir_model_node}{Dv\+Dir\+Model\+Node}} $\ast$ $>$ \&expanded\+Nodes)
\item 
bool \mbox{\hyperlink{class_file_browser_ad93f363137e771f1c410ec345d3ddee9}{drop\+Mime\+Data}} (QTree\+Widget\+Item $\ast$parent, int index, const QMime\+Data $\ast$data, Qt\+::\+Drop\+Action action)
\item 
bool \mbox{\hyperlink{class_file_browser_ad4c68ef666692b6969d30200f36378bd}{accept\+Drop}} (const QMime\+Data $\ast$data) const override
\item 
bool \mbox{\hyperlink{class_file_browser_afc4010928a0040048f0fb53a3416e228}{drop}} (const QMime\+Data $\ast$data) override
\item 
void \mbox{\hyperlink{class_file_browser_acc65b6119eea6a62105951186cd63a64}{show\+Event}} (QShow\+Event $\ast$) override
\item 
void \mbox{\hyperlink{class_file_browser_a5aa97018ced0379de10cd1b0d9748e68}{hide\+Event}} (QHide\+Event $\ast$) override
\item 
void \mbox{\hyperlink{class_file_browser_aec62dd391c3f64fabdbb674fe95b62af}{setup\+Version\+Control\+Command}} (QString\+List \&files, QString \&path, int \&scene\+Icons\+Count)
\item 
void \mbox{\hyperlink{class_file_browser_a0e99c97a8e80e1b3ed71cbc897194c40}{setup\+Version\+Control\+Command}} (QString \&file, QString \&path)
\item 
void \mbox{\hyperlink{class_file_browser_a16d32bd741817680f2cdfbcec2ce0fc5}{refresh\+History\+Buttons}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_file_browser_accbad888ef8eeaea4cb82b2bb5dcc71b}\label{class_file_browser_accbad888ef8eeaea4cb82b2bb5dcc71b}} 
\index{FileBrowser@{FileBrowser}!FileBrowser@{FileBrowser}}
\index{FileBrowser@{FileBrowser}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{FileBrowser()}{FileBrowser()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily File\+Browser\+::\+File\+Browser (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent,  }\item[{Qt\+::\+WFlags}]{flags = {\ttfamily 0},  }\item[{bool}]{no\+Context\+Menu = {\ttfamily false},  }\item[{bool}]{multi\+Selection\+Enabled = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00164     : QFrame(parent), m\_folderName(0), m\_itemViewer(0) \{}
\DoxyCodeLine{00165   \textcolor{comment}{// style sheet}}
\DoxyCodeLine{00166   setObjectName(\textcolor{stringliteral}{"{}FileBrowser"{}});}
\DoxyCodeLine{00167   setFrameStyle(QFrame::StyledPanel);}
\DoxyCodeLine{00168 }
\DoxyCodeLine{00169   m\_mainSplitter      = \textcolor{keyword}{new} QSplitter(\textcolor{keyword}{this});}
\DoxyCodeLine{00170   m\_folderTreeView    = \textcolor{keyword}{new} \mbox{\hyperlink{class_dv_dir_tree_view}{DvDirTreeView}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00171   QFrame *box         = \textcolor{keyword}{new} QFrame(\textcolor{keyword}{this});}
\DoxyCodeLine{00172   QLabel *folderLabel = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Folder: "{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00173   m\_folderName        = \textcolor{keyword}{new} QLineEdit();}
\DoxyCodeLine{00174   m\_itemViewer = \textcolor{keyword}{new} \mbox{\hyperlink{class_dv_item_viewer}{DvItemViewer}}(box, noContextMenu, multiSelectionEnabled,}
\DoxyCodeLine{00175                                   DvItemViewer::Browser);}
\DoxyCodeLine{00176   \mbox{\hyperlink{class_dv_item_viewer_title_bar}{DvItemViewerTitleBar}} *titleBar = \textcolor{keyword}{new} \mbox{\hyperlink{class_dv_item_viewer_title_bar}{DvItemViewerTitleBar}}(m\_itemViewer, box);}
\DoxyCodeLine{00177   \mbox{\hyperlink{class_dv_item_viewer_button_bar}{DvItemViewerButtonBar}} *buttonBar =}
\DoxyCodeLine{00178       \textcolor{keyword}{new} \mbox{\hyperlink{class_dv_item_viewer_button_bar}{DvItemViewerButtonBar}}(m\_itemViewer, box);}
\DoxyCodeLine{00179   \mbox{\hyperlink{class_dv_item_viewer_panel}{DvItemViewerPanel}} *viewerPanel = m\_itemViewer-\/>getPanel();}
\DoxyCodeLine{00180 }
\DoxyCodeLine{00181   viewerPanel-\/>addColumn(DvItemListModel::FileType, 50);}
\DoxyCodeLine{00182   viewerPanel-\/>addColumn(DvItemListModel::FrameCount, 50);}
\DoxyCodeLine{00183   viewerPanel-\/>addColumn(DvItemListModel::FileSize, 50);}
\DoxyCodeLine{00184   viewerPanel-\/>addColumn(DvItemListModel::CreationDate, 130);}
\DoxyCodeLine{00185   viewerPanel-\/>addColumn(DvItemListModel::ModifiedDate, 130);}
\DoxyCodeLine{00186   \textcolor{keywordflow}{if} (Preferences::instance()-\/>isSVNEnabled())}
\DoxyCodeLine{00187     viewerPanel-\/>addColumn(DvItemListModel::VersionControlStatus, 120);}
\DoxyCodeLine{00188 }
\DoxyCodeLine{00189   viewerPanel-\/>setSelection(\textcolor{keyword}{new} \mbox{\hyperlink{class_file_selection}{FileSelection}}());}
\DoxyCodeLine{00190   \mbox{\hyperlink{class_d_v_item_view_play_delegate}{DVItemViewPlayDelegate}} *itemViewPlayDelegate =}
\DoxyCodeLine{00191       \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_item_view_play_delegate}{DVItemViewPlayDelegate}}(viewerPanel);}
\DoxyCodeLine{00192   viewerPanel-\/>setItemViewPlayDelegate(itemViewPlayDelegate);}
\DoxyCodeLine{00193 }
\DoxyCodeLine{00194   m\_mainSplitter-\/>setObjectName(\textcolor{stringliteral}{"{}FileBrowserSplitter"{}});}
\DoxyCodeLine{00195   m\_folderTreeView-\/>setObjectName(\textcolor{stringliteral}{"{}DirTreeView"{}});}
\DoxyCodeLine{00196   box-\/>setObjectName(\textcolor{stringliteral}{"{}castFrame"{}});}
\DoxyCodeLine{00197   box-\/>setFrameStyle(QFrame::StyledPanel);}
\DoxyCodeLine{00198 }
\DoxyCodeLine{00199   m\_itemViewer-\/>setModel(\textcolor{keyword}{this});}
\DoxyCodeLine{00200 }
\DoxyCodeLine{00201   \textcolor{comment}{// layout}}
\DoxyCodeLine{00202   QVBoxLayout *mainLayout = \textcolor{keyword}{new} QVBoxLayout();}
\DoxyCodeLine{00203   mainLayout-\/>setMargin(3);}
\DoxyCodeLine{00204   mainLayout-\/>setSpacing(2);}
\DoxyCodeLine{00205   \{}
\DoxyCodeLine{00206     mainLayout-\/>addWidget(buttonBar);}
\DoxyCodeLine{00207 }
\DoxyCodeLine{00208     QHBoxLayout *folderLay = \textcolor{keyword}{new} QHBoxLayout();}
\DoxyCodeLine{00209     folderLay-\/>setMargin(0);}
\DoxyCodeLine{00210     folderLay-\/>setSpacing(0);}
\DoxyCodeLine{00211     \{}
\DoxyCodeLine{00212       folderLay-\/>addWidget(folderLabel, 0);}
\DoxyCodeLine{00213       folderLay-\/>addWidget(m\_folderName, 1);}
\DoxyCodeLine{00214     \}}
\DoxyCodeLine{00215     mainLayout-\/>addLayout(folderLay, 0);}
\DoxyCodeLine{00216 }
\DoxyCodeLine{00217     m\_mainSplitter-\/>addWidget(m\_folderTreeView);}
\DoxyCodeLine{00218     QVBoxLayout *boxLayout = \textcolor{keyword}{new} QVBoxLayout(box);}
\DoxyCodeLine{00219     boxLayout-\/>setMargin(0);}
\DoxyCodeLine{00220     boxLayout-\/>setSpacing(0);}
\DoxyCodeLine{00221     \{}
\DoxyCodeLine{00222       boxLayout-\/>addWidget(titleBar, 0);}
\DoxyCodeLine{00223       boxLayout-\/>addWidget(m\_itemViewer, 1);}
\DoxyCodeLine{00224     \}}
\DoxyCodeLine{00225     m\_mainSplitter-\/>addWidget(box);}
\DoxyCodeLine{00226     mainLayout-\/>addWidget(m\_mainSplitter, 1);}
\DoxyCodeLine{00227   \}}
\DoxyCodeLine{00228   setLayout(mainLayout);}
\DoxyCodeLine{00229 }
\DoxyCodeLine{00230   m\_mainSplitter-\/>setSizes(QList<int>() << 270 << 500);}
\DoxyCodeLine{00231 }
\DoxyCodeLine{00232   \textcolor{comment}{// signal-\/slot connections}}
\DoxyCodeLine{00233   \textcolor{keywordtype}{bool} ret = connect(m\_folderTreeView, SIGNAL(currentNodeChanged()),}
\DoxyCodeLine{00234                      itemViewPlayDelegate, SLOT(resetPlayWidget()));}
\DoxyCodeLine{00235   \textcolor{comment}{// if the current forder is changed in the folder tree, then update in the}}
\DoxyCodeLine{00236   \textcolor{comment}{// item view}}
\DoxyCodeLine{00237   ret = ret \&\& connect(m\_folderTreeView, SIGNAL(currentNodeChanged()), \textcolor{keyword}{this},}
\DoxyCodeLine{00238                        SLOT(onTreeFolderChanged()));}
\DoxyCodeLine{00239 }
\DoxyCodeLine{00240   ret = ret \&\& connect(m\_itemViewer, SIGNAL(clickedItem(\textcolor{keywordtype}{int})), \textcolor{keyword}{this},}
\DoxyCodeLine{00241                        SLOT(onClickedItem(\textcolor{keywordtype}{int})));}
\DoxyCodeLine{00242   ret = ret \&\& connect(m\_itemViewer, SIGNAL(doubleClickedItem(\textcolor{keywordtype}{int})), \textcolor{keyword}{this},}
\DoxyCodeLine{00243                        SLOT(onDoubleClickedItem(\textcolor{keywordtype}{int})));}
\DoxyCodeLine{00244   ret =}
\DoxyCodeLine{00245       ret \&\& connect(m\_itemViewer, SIGNAL(selectedItems(\textcolor{keyword}{const} std::set<int> \&)),}
\DoxyCodeLine{00246                      \textcolor{keyword}{this}, SLOT(onSelectedItems(\textcolor{keyword}{const} std::set<int> \&)));}
\DoxyCodeLine{00247   ret = ret \&\& connect(buttonBar, SIGNAL(folderUp()), \textcolor{keyword}{this}, SLOT(folderUp()));}
\DoxyCodeLine{00248   ret = ret \&\& connect(buttonBar, SIGNAL(newFolder()), \textcolor{keyword}{this}, SLOT(newFolder()));}
\DoxyCodeLine{00249 }
\DoxyCodeLine{00250   ret = ret \&\& connect(\&m\_frameCountReader, SIGNAL(calculatedFrameCount()),}
\DoxyCodeLine{00251                        m\_itemViewer-\/>getPanel(), SLOT(update()));}
\DoxyCodeLine{00252 }
\DoxyCodeLine{00253   QAction *refresh = CommandManager::instance()-\/>getAction(MI\_RefreshTree);}
\DoxyCodeLine{00254   ret = ret \&\& connect(refresh, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(refresh()));}
\DoxyCodeLine{00255   addAction(refresh);}
\DoxyCodeLine{00256 }
\DoxyCodeLine{00257   \textcolor{comment}{// Version Control instance connection}}
\DoxyCodeLine{00258   \textcolor{keywordflow}{if} (Preferences::instance()-\/>isSVNEnabled())}
\DoxyCodeLine{00259     ret =}
\DoxyCodeLine{00260         ret \&\& connect(VersionControl::instance(),}
\DoxyCodeLine{00261                        SIGNAL(commandDone(\textcolor{keyword}{const} QStringList \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00262                        SLOT(onVersionControlCommandDone(\textcolor{keyword}{const} QStringList \&)));}
\DoxyCodeLine{00263 }
\DoxyCodeLine{00264   \textcolor{comment}{// if the folderName is edited, move the current folder accordingly}}
\DoxyCodeLine{00265   ret = ret \&\& connect(m\_folderName, SIGNAL(editingFinished()), \textcolor{keyword}{this},}
\DoxyCodeLine{00266                        SLOT(\mbox{\hyperlink{class_file_browser_ad557583ab2c6738c85b2d90a777218c1}{onFolderEdited}}()));}
\DoxyCodeLine{00267 }
\DoxyCodeLine{00268   \textcolor{comment}{// folder history}}
\DoxyCodeLine{00269   ret = ret \&\& connect(m\_folderTreeView, SIGNAL(currentNodeChanged()), \textcolor{keyword}{this},}
\DoxyCodeLine{00270                        SLOT(storeFolderHistory()));}
\DoxyCodeLine{00271   ret = ret \&\& connect(buttonBar, SIGNAL(folderBack()), \textcolor{keyword}{this},}
\DoxyCodeLine{00272                        SLOT(onBackButtonPushed()));}
\DoxyCodeLine{00273   ret = ret \&\& connect(buttonBar, SIGNAL(folderFwd()), \textcolor{keyword}{this},}
\DoxyCodeLine{00274                        SLOT(onFwdButtonPushed()));}
\DoxyCodeLine{00275   \textcolor{comment}{// when the history changes, enable/disable the history buttons accordingly}}
\DoxyCodeLine{00276   ret = ret \&\& connect(\textcolor{keyword}{this}, SIGNAL(historyChanged(\textcolor{keywordtype}{bool}, \textcolor{keywordtype}{bool})), buttonBar,}
\DoxyCodeLine{00277                        SLOT(onHistoryChanged(\textcolor{keywordtype}{bool}, \textcolor{keywordtype}{bool})));}
\DoxyCodeLine{00278 }
\DoxyCodeLine{00279   \textcolor{comment}{// check out the update of the current folder.}}
\DoxyCodeLine{00280   \textcolor{comment}{// Use MyFileSystemWatcher which is shared by all browsers.}}
\DoxyCodeLine{00281   \textcolor{comment}{// Adding and removing paths to the watcher is done in DvDirTreeView.}}
\DoxyCodeLine{00282   ret = ret \&\& connect(MyFileSystemWatcher::instance(),}
\DoxyCodeLine{00283                        SIGNAL(directoryChanged(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00284                        SLOT(\mbox{\hyperlink{class_file_browser_a81913a1b170f4288f0127adb286ddbaa}{onFileSystemChanged}}(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00285 }
\DoxyCodeLine{00286   \textcolor{comment}{// store the first item("{}Root"{}) in the history}}
\DoxyCodeLine{00287   m\_indexHistoryList.append(m\_folderTreeView-\/>currentIndex());}
\DoxyCodeLine{00288   m\_currentPosition = 0;}
\DoxyCodeLine{00289 }
\DoxyCodeLine{00290   refreshHistoryButtons();}
\DoxyCodeLine{00291 }
\DoxyCodeLine{00292   assert(ret);}
\DoxyCodeLine{00293 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a39d46a38427e7b3557ff782c3884e177}\label{class_file_browser_a39d46a38427e7b3557ff782c3884e177}} 
\index{FileBrowser@{FileBrowser}!````~FileBrowser@{$\sim$FileBrowser}}
\index{````~FileBrowser@{$\sim$FileBrowser}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{$\sim$FileBrowser()}{~FileBrowser()}}
{\footnotesize\ttfamily File\+Browser\+::$\sim$\+File\+Browser (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00297 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_ac7852a2ec76171ba72d12f18087ce02b}\label{class_file_browser_ac7852a2ec76171ba72d12f18087ce02b}} 
\index{FileBrowser@{FileBrowser}!FileBrowser@{FileBrowser}}
\index{FileBrowser@{FileBrowser}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{FileBrowser()}{FileBrowser()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily File\+Browser\+::\+File\+Browser (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_widget}{TWidget}} $\ast$}]{parent,  }\item[{string}]{name,  }\item[{const \mbox{\hyperlink{classvector}{vector}}$<$ string $>$ \&}]{file\+Types }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00425     : \mbox{\hyperlink{class_t_widget}{TWidget}}(parent, name), m\_data(\textcolor{keyword}{new} Data()) \{}
\DoxyCodeLine{00426   m\_data-\/>m\_fileTypes = fileTypes;}
\DoxyCodeLine{00427 }
\DoxyCodeLine{00428   m\_data-\/>m\_panel = \textcolor{keyword}{new} DirectoryBrowser(\textcolor{keyword}{this}, fileTypes);}
\DoxyCodeLine{00429   m\_data-\/>m\_tree  = \textcolor{keyword}{new} FileFolderTreeView(\textcolor{keyword}{this}, m\_data-\/>m\_panel);}
\DoxyCodeLine{00430 }
\DoxyCodeLine{00431   m\_data-\/>m\_panelScb = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_scrollbar}{TScrollbar}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00432   m\_data-\/>m\_treeHscb = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_scrollbar}{TScrollbar}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00433   m\_data-\/>m\_treeVscb = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_scrollbar}{TScrollbar}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00434 }
\DoxyCodeLine{00435   m\_data-\/>m\_panel-\/>setScrollbars(0, m\_data-\/>m\_panelScb);}
\DoxyCodeLine{00436   m\_data-\/>m\_tree-\/>setScrollbars(m\_data-\/>m\_treeHscb, m\_data-\/>m\_treeVscb);}
\DoxyCodeLine{00437 }
\DoxyCodeLine{00438   setBackgroundColor(Gray210);}
\DoxyCodeLine{00439 }
\DoxyCodeLine{00440   m\_data-\/>m\_upButton = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_icon_button}{TIconButton}}(\textcolor{keyword}{this}, parentfolder);}
\DoxyCodeLine{00441   tconnect(*m\_data-\/>m\_upButton, \textcolor{keyword}{this}, \&FileBrowser::selectParentDirectory);}
\DoxyCodeLine{00442 }
\DoxyCodeLine{00443   m\_data-\/>m\_createFolderButton = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_icon_button}{TIconButton}}(\textcolor{keyword}{this}, newfolder);}
\DoxyCodeLine{00444   m\_data-\/>m\_deleteFileButton   = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_icon_button}{TIconButton}}(\textcolor{keyword}{this}, trash);}
\DoxyCodeLine{00445 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_file_browser_ad4c68ef666692b6969d30200f36378bd}\label{class_file_browser_ad4c68ef666692b6969d30200f36378bd}} 
\index{FileBrowser@{FileBrowser}!acceptDrop@{acceptDrop}}
\index{acceptDrop@{acceptDrop}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{acceptDrop()}{acceptDrop()}}
{\footnotesize\ttfamily bool File\+Browser\+::accept\+Drop (\begin{DoxyParamCaption}\item[{const QMime\+Data $\ast$}]{data }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01506                                                         \{}
\DoxyCodeLine{01507   \textcolor{comment}{// se il browser non sta visualizzando un folder standard non posso accettare}}
\DoxyCodeLine{01508   \textcolor{comment}{// nessun drop}}
\DoxyCodeLine{01509   \textcolor{keywordflow}{if} (getFolder() == \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01510 }
\DoxyCodeLine{01511   \textcolor{keywordflow}{if} (data-\/>hasFormat(\textcolor{stringliteral}{"{}application/vnd.toonz.levels"{}}) ||}
\DoxyCodeLine{01512       data-\/>hasFormat(\textcolor{stringliteral}{"{}application/vnd.toonz.currentscene"{}}) ||}
\DoxyCodeLine{01513       data-\/>hasFormat(\textcolor{stringliteral}{"{}application/vnd.toonz.drawings"{}}) ||}
\DoxyCodeLine{01514       acceptResourceDrop(data-\/>urls()))}
\DoxyCodeLine{01515     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01516 }
\DoxyCodeLine{01517   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01518 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a967f00c3f76cec84acb8c92a4ae1de7e}\label{class_file_browser_a967f00c3f76cec84acb8c92a4ae1de7e}} 
\index{FileBrowser@{FileBrowser}!addFilterType@{addFilterType}}
\index{addFilterType@{addFilterType}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{addFilterType()}{addFilterType()}}
{\footnotesize\ttfamily void File\+Browser\+::add\+Filter\+Type (\begin{DoxyParamCaption}\item[{const QString \&}]{type }\end{DoxyParamCaption})}

This functions adds to the types to be filtered a new type; if this function is never called, the default filter is all image files and scene files and palette files 
\begin{DoxyCode}{0}
\DoxyCodeLine{00519                                                    \{}
\DoxyCodeLine{00520   \textcolor{keywordflow}{if} (!m\_filter.contains(type)) m\_filter.push\_back(type);}
\DoxyCodeLine{00521 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_ac6c3759862d0ca4822709dc13f0e89ce}\label{class_file_browser_ac6c3759862d0ca4822709dc13f0e89ce}} 
\index{FileBrowser@{FileBrowser}!canRenameItem@{canRenameItem}}
\index{canRenameItem@{canRenameItem}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{canRenameItem()}{canRenameItem()}}
{\footnotesize\ttfamily bool File\+Browser\+::can\+Rename\+Item (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00994                                                \{}
\DoxyCodeLine{00995   \textcolor{comment}{// se sto guardando la history non posso rinominare nulla}}
\DoxyCodeLine{00996   \textcolor{keywordflow}{if} (getFolder() == \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00997   \textcolor{keywordflow}{if} (index < 0 || index >= (\textcolor{keywordtype}{int})m\_items.size()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00998   \textcolor{comment}{// for now, disable rename for folders}}
\DoxyCodeLine{00999   \textcolor{keywordflow}{if} (m\_items[index].m\_isFolder) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01000   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = m\_items[index].m\_path;}
\DoxyCodeLine{01001   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_file_status}{TFileStatus}}(fp).doesExist();}
\DoxyCodeLine{01002 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a8197be012a477240d3f1c3b5fb905e39}\label{class_file_browser_a8197be012a477240d3f1c3b5fb905e39}} 
\index{FileBrowser@{FileBrowser}!changeFolder@{changeFolder}}
\index{changeFolder@{changeFolder}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{changeFolder}{changeFolder}}
{\footnotesize\ttfamily void File\+Browser\+::change\+Folder (\begin{DoxyParamCaption}\item[{const QModel\+Index \&}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01495 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a11db86c3cbbe912dd32c38ab8841b722}\label{class_file_browser_a11db86c3cbbe912dd32c38ab8841b722}} 
\index{FileBrowser@{FileBrowser}!clearHistory@{clearHistory}}
\index{clearHistory@{clearHistory}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{clearHistory}{clearHistory}}
{\footnotesize\ttfamily void File\+Browser\+::clear\+History (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

clear the history when the tree date is replaced 
\begin{DoxyCode}{0}
\DoxyCodeLine{00402                                \{}
\DoxyCodeLine{00403   \textcolor{keywordtype}{int} size = m\_indexHistoryList.size();}
\DoxyCodeLine{00404   \textcolor{comment}{// leave the last item}}
\DoxyCodeLine{00405   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i < size; i++) m\_indexHistoryList.removeLast();}
\DoxyCodeLine{00406   m\_currentPosition = 0;}
\DoxyCodeLine{00407   refreshHistoryButtons();}
\DoxyCodeLine{00408 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a2c38b8998afb8d1e37950c4337efe17b}\label{class_file_browser_a2c38b8998afb8d1e37950c4337efe17b}} 
\index{FileBrowser@{FileBrowser}!configureNotify@{configureNotify}}
\index{configureNotify@{configureNotify}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{configureNotify()}{configureNotify()}}
{\footnotesize\ttfamily void File\+Browser\+::configure\+Notify (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&}]{d }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_widget}{TWidget}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00477                                                      \{}
\DoxyCodeLine{00478   \textcolor{comment}{/*}}
\DoxyCodeLine{00479 \textcolor{comment}{TRect rect = getBounds();}}
\DoxyCodeLine{00480 \textcolor{comment}{int x = 200;}}
\DoxyCodeLine{00481 \textcolor{comment}{int w = 15;}}
\DoxyCodeLine{00482 \textcolor{comment}{int xa = x-\/w-\/4;}}
\DoxyCodeLine{00483 \textcolor{comment}{TDimension scbSize(w, rect.getLy());}}
\DoxyCodeLine{00484 \textcolor{comment}{m\_data-\/>m\_tree-\/>setGeometry(rect.x0,rect.y0,xa-\/1,rect.y1);}}
\DoxyCodeLine{00485 \textcolor{comment}{m\_data-\/>m\_treeVscb-\/>setGeometry(TPoint(xa,rect.y0),scbSize);}}
\DoxyCodeLine{00486 \textcolor{comment}{}}
\DoxyCodeLine{00487 \textcolor{comment}{m\_data-\/>m\_treeHscb-\/>setGeometry(rect.x0, rect.y0,}}
\DoxyCodeLine{00488 \textcolor{comment}{x-\/1-\/scbSize,rect.y0+scbSize-\/1);}}
\DoxyCodeLine{00489 \textcolor{comment}{}}
\DoxyCodeLine{00490 \textcolor{comment}{int buttonBarHeight = 30;}}
\DoxyCodeLine{00491 \textcolor{comment}{}}
\DoxyCodeLine{00492 \textcolor{comment}{rect.y1 -\/= buttonBarHeight;}}
\DoxyCodeLine{00493 \textcolor{comment}{scbSize.ly -\/= buttonBarHeight;}}
\DoxyCodeLine{00494 \textcolor{comment}{}}
\DoxyCodeLine{00495 \textcolor{comment}{m\_data-\/>m\_panel-\/>setGeometry(x,rect.y0,rect.x1-\/w,rect.y1);}}
\DoxyCodeLine{00496 \textcolor{comment}{m\_data-\/>m\_panelScb-\/>setGeometry(TPoint(rect.x1-\/w+1,rect.y0),scbSize);}}
\DoxyCodeLine{00497 \textcolor{comment}{}}
\DoxyCodeLine{00498 \textcolor{comment}{int y = rect.y1+4;}}
\DoxyCodeLine{00499 \textcolor{comment}{}}
\DoxyCodeLine{00500 \textcolor{comment}{m\_data-\/>m\_upButton-\/>setPosition(x-\/1, y);}}
\DoxyCodeLine{00501 \textcolor{comment}{m\_data-\/>m\_createFolderButton-\/>setPosition(x+25, y);}}
\DoxyCodeLine{00502 \textcolor{comment}{m\_data-\/>m\_deleteFileButton-\/>setPosition(rect.x1-\/26, y);}}
\DoxyCodeLine{00503 \textcolor{comment}{}}
\DoxyCodeLine{00504 \textcolor{comment}{invalidate();}}
\DoxyCodeLine{00505 \textcolor{comment}{}}
\DoxyCodeLine{00506 \textcolor{comment}{*/}}
\DoxyCodeLine{00507 }
\DoxyCodeLine{00508   \textcolor{keyword}{const} \textcolor{keywordtype}{int} scbSize = 15;}
\DoxyCodeLine{00509 }
\DoxyCodeLine{00510   \mbox{\hyperlink{class_t_rect_t}{TRect}} rect = getBounds();}
\DoxyCodeLine{00511   \textcolor{keywordtype}{int} x      = 196;}
\DoxyCodeLine{00512 }
\DoxyCodeLine{00513   m\_data-\/>m\_tree-\/>setGeometry(rect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, rect.y0 + scbSize, x -\/ 1 -\/ scbSize,}
\DoxyCodeLine{00514                               rect.y1);}
\DoxyCodeLine{00515   m\_data-\/>m\_treeVscb-\/>setGeometry(x -\/ scbSize, rect.y0 + scbSize, x -\/ 1,}
\DoxyCodeLine{00516                                   rect.y1);}
\DoxyCodeLine{00517   m\_data-\/>m\_treeHscb-\/>setGeometry(rect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, rect.y0, x -\/ 1 -\/ scbSize,}
\DoxyCodeLine{00518                                   rect.y0 + scbSize -\/ 1);}
\DoxyCodeLine{00519 }
\DoxyCodeLine{00520   \textcolor{keywordtype}{int} buttonBarHeight = 29;}
\DoxyCodeLine{00521 }
\DoxyCodeLine{00522   rect.y1 -\/= buttonBarHeight;}
\DoxyCodeLine{00523 }
\DoxyCodeLine{00524   m\_data-\/>m\_panel-\/>setGeometry(x + 4, rect.y0, rect.x1 -\/ scbSize, rect.y1);}
\DoxyCodeLine{00525   m\_data-\/>m\_panelScb-\/>setGeometry(rect.x1 -\/ scbSize + 1, rect.y0, rect.x1,}
\DoxyCodeLine{00526                                   rect.y1);}
\DoxyCodeLine{00527 }
\DoxyCodeLine{00528   \textcolor{keywordtype}{int} y = rect.y1 + 4;}
\DoxyCodeLine{00529   x += 4;}
\DoxyCodeLine{00530   m\_data-\/>m\_upButton-\/>setPosition(x -\/ 1, y);}
\DoxyCodeLine{00531   m\_data-\/>m\_createFolderButton-\/>setPosition(x + 25, y);}
\DoxyCodeLine{00532   m\_data-\/>m\_deleteFileButton-\/>setPosition(rect.x1 -\/ 26, y);}
\DoxyCodeLine{00533 }
\DoxyCodeLine{00534   m\_data-\/>m\_upButton-\/>invalidate();}
\DoxyCodeLine{00535   m\_data-\/>m\_createFolderButton-\/>invalidate();}
\DoxyCodeLine{00536   m\_data-\/>m\_deleteFileButton-\/>invalidate();}
\DoxyCodeLine{00537   m\_data-\/>m\_treeVscb-\/>invalidate();}
\DoxyCodeLine{00538   m\_data-\/>m\_treeHscb-\/>invalidate();}
\DoxyCodeLine{00539   m\_data-\/>m\_tree-\/>invalidate();}
\DoxyCodeLine{00540   invalidate();}
\DoxyCodeLine{00541 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_af0a7fc612c105d1ebbe2acccd0e3e23a}\label{class_file_browser_af0a7fc612c105d1ebbe2acccd0e3e23a}} 
\index{FileBrowser@{FileBrowser}!deleteVersionControl@{deleteVersionControl}}
\index{deleteVersionControl@{deleteVersionControl}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{deleteVersionControl}{deleteVersionControl}}
{\footnotesize\ttfamily void File\+Browser\+::delete\+Version\+Control (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00442                                        \{}
\DoxyCodeLine{00443   QStringList files;}
\DoxyCodeLine{00444   QString path;}
\DoxyCodeLine{00445 }
\DoxyCodeLine{00446   \textcolor{keywordtype}{int} sceneIconsCount = 0;}
\DoxyCodeLine{00447   setupVersionControlCommand(files, path, sceneIconsCount);}
\DoxyCodeLine{00448   \textcolor{keywordflow}{if} (files.isEmpty() || path.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00449   VersionControl::instance()-\/>deleteFiles(\textcolor{keyword}{this}, path, files, sceneIconsCount);}
\DoxyCodeLine{00450 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a0f9ebc58b663663a3e9bbabed19c0a2d}\label{class_file_browser_a0f9ebc58b663663a3e9bbabed19c0a2d}} 
\index{FileBrowser@{FileBrowser}!draw@{draw}}
\index{draw@{draw}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void File\+Browser\+::draw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_widget}{TWidget}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00460                        \{}
\DoxyCodeLine{00461   setColor(White);}
\DoxyCodeLine{00462   fillRect(0, 0, 4, getLy() -\/ 1);}
\DoxyCodeLine{00463 }
\DoxyCodeLine{00464   \mbox{\hyperlink{class_t_point_t}{TPoint}} p;}
\DoxyCodeLine{00465   p = m\_data-\/>m\_treeVscb-\/>getGeometry().getP11();}
\DoxyCodeLine{00466 }
\DoxyCodeLine{00467   setColor(Gray150);}
\DoxyCodeLine{00468   drawLine(p.x + 1, 1, p.x + 1, p.y);}
\DoxyCodeLine{00469 }
\DoxyCodeLine{00470   p = m\_data-\/>m\_panel-\/>getGeometry().getP01();}
\DoxyCodeLine{00471   drawLine(p.x -\/ 1, 1, p.x -\/ 1, p.y);}
\DoxyCodeLine{00472   drawLine(p.x -\/ 1, p.y + 1, getLx() -\/ 2, p.y + 1);}
\DoxyCodeLine{00473 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_afc4010928a0040048f0fb53a3416e228}\label{class_file_browser_afc4010928a0040048f0fb53a3416e228}} 
\index{FileBrowser@{FileBrowser}!drop@{drop}}
\index{drop@{drop}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{drop()}{drop()}}
{\footnotesize\ttfamily bool File\+Browser\+::drop (\begin{DoxyParamCaption}\item[{const QMime\+Data $\ast$}]{data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01522                                                 \{}
\DoxyCodeLine{01523   \textcolor{comment}{// se il browser non sta visualizzando un folder standard non posso accettare}}
\DoxyCodeLine{01524   \textcolor{comment}{// nessun drop}}
\DoxyCodeLine{01525   \mbox{\hyperlink{class_t_file_path}{TFilePath}} folderPath = getFolder();}
\DoxyCodeLine{01526   \textcolor{keywordflow}{if} (folderPath == \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01527 }
\DoxyCodeLine{01528   \textcolor{keywordflow}{if} (mimeData-\/>hasFormat(CastItems::getMimeFormat())) \{}
\DoxyCodeLine{01529     \textcolor{keyword}{const} \mbox{\hyperlink{class_cast_items}{CastItems}} *items = \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_cast_items}{CastItems}} *\textcolor{keyword}{>}(mimeData);}
\DoxyCodeLine{01530     \textcolor{keywordflow}{if} (!items) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01531 }
\DoxyCodeLine{01532     \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01533     \textcolor{keywordflow}{for} (i = 0; i < items-\/>getItemCount(); i++) \{}
\DoxyCodeLine{01534       \mbox{\hyperlink{class_cast_item}{CastItem}} *item = items-\/>getItem(i);}
\DoxyCodeLine{01535       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = item-\/>getSimpleLevel()) \{}
\DoxyCodeLine{01536         \mbox{\hyperlink{class_t_file_path}{TFilePath}} levelPath = sl-\/>getPath().\mbox{\hyperlink{class_t_file_path_a09d12d68c4264183e0268dde6f592b2e}{withParentDir}}(getFolder());}
\DoxyCodeLine{01537         IoCmd::saveLevel(levelPath, sl, \textcolor{keyword}{false});}
\DoxyCodeLine{01538       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_sound_level}{TXshSoundLevel}} *level = item-\/>getSoundLevel()) \{}
\DoxyCodeLine{01539         \mbox{\hyperlink{class_t_file_path}{TFilePath}} soundPath = level-\/>getPath().\mbox{\hyperlink{class_t_file_path_a09d12d68c4264183e0268dde6f592b2e}{withParentDir}}(getFolder());}
\DoxyCodeLine{01540         IoCmd::saveSound(soundPath, level, \textcolor{keyword}{false});}
\DoxyCodeLine{01541       \}}
\DoxyCodeLine{01542     \}}
\DoxyCodeLine{01543     refreshFolder(getFolder());}
\DoxyCodeLine{01544     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01545   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mimeData-\/>hasFormat(\textcolor{stringliteral}{"{}application/vnd.toonz.currentscene"{}})) \{}
\DoxyCodeLine{01546     \mbox{\hyperlink{class_t_file_path}{TFilePath}} scenePath;}
\DoxyCodeLine{01547     \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{01548     \textcolor{keywordflow}{if} (scene-\/>\mbox{\hyperlink{class_toonz_scene_a53cbaf09f551658479eb743e153ab6bc}{isUntitled}}()) \{}
\DoxyCodeLine{01549       \textcolor{keywordtype}{bool} ok;}
\DoxyCodeLine{01550       QString sceneName =}
\DoxyCodeLine{01551           QInputDialog::getText(\textcolor{keyword}{this}, tr(\textcolor{stringliteral}{"{}Save Scene"{}}), tr(\textcolor{stringliteral}{"{}Scene name:"{}}),}
\DoxyCodeLine{01552                                 QLineEdit::Normal, QString(), \&ok);}
\DoxyCodeLine{01553       \textcolor{keywordflow}{if} (!ok || sceneName == \textcolor{stringliteral}{"{}"{}}) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01554       scenePath = folderPath + sceneName.toStdWString();}
\DoxyCodeLine{01555     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01556       scenePath = folderPath + scene-\/>\mbox{\hyperlink{class_toonz_scene_a1fa0a1cbf9eb6360d980392acc99924b}{getSceneName}}();}
\DoxyCodeLine{01557     \textcolor{keywordflow}{return} IoCmd::saveScene(scenePath, \textcolor{keyword}{false});}
\DoxyCodeLine{01558   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mimeData-\/>hasFormat(\textcolor{stringliteral}{"{}application/vnd.toonz.drawings"{}})) \{}
\DoxyCodeLine{01559     \mbox{\hyperlink{class_t_filmstrip_selection}{TFilmstripSelection}} *s =}
\DoxyCodeLine{01560         \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_filmstrip_selection}{TFilmstripSelection}} *\textcolor{keyword}{>}(TSelection::getCurrent());}
\DoxyCodeLine{01561     \textcolor{keywordflow}{if} (!s) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01562     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getSimpleLevel();}
\DoxyCodeLine{01563     \textcolor{keywordflow}{if} (!sl) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01564 }
\DoxyCodeLine{01565     std::wstring levelName = sl-\/>\mbox{\hyperlink{class_t_xsh_level_a3a59fb1bd3261baee4e889a9edbf0ae8}{getName}}();}
\DoxyCodeLine{01566     folderPath +=}
\DoxyCodeLine{01567         \mbox{\hyperlink{class_t_file_path}{TFilePath}}(levelName + ::to\_wstring(sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}().\mbox{\hyperlink{class_t_file_path_ae69f3fd881d12ebb858c7462417c82b8}{getDottedType}}()));}
\DoxyCodeLine{01568     \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(folderPath)) \{}
\DoxyCodeLine{01569       QString question = \textcolor{stringliteral}{"{}Level "{}} + toQString(folderPath) +}
\DoxyCodeLine{01570                          \textcolor{stringliteral}{"{} already exists\(\backslash\)nDo you want to duplicate it?"{}};}
\DoxyCodeLine{01571       \textcolor{keywordtype}{int} ret = DVGui::MsgBox(question, QObject::tr(\textcolor{stringliteral}{"{}Duplicate"{}}),}
\DoxyCodeLine{01572                               QObject::tr(\textcolor{stringliteral}{"{}Don't Duplicate"{}}), 0);}
\DoxyCodeLine{01573       \textcolor{keywordflow}{if} (ret == 2 || ret == 0) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01574       \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = folderPath;}
\DoxyCodeLine{01575       \mbox{\hyperlink{class_name_builder}{NameBuilder}} *nameBuilder =}
\DoxyCodeLine{01576           NameBuilder::getBuilder(::to\_wstring(path.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}()));}
\DoxyCodeLine{01577       \textcolor{keywordflow}{do}}
\DoxyCodeLine{01578         levelName = nameBuilder-\/>getNext();}
\DoxyCodeLine{01579       \textcolor{keywordflow}{while} (TSystem::doesExistFileOrLevel(path.\mbox{\hyperlink{class_t_file_path_a3ebf9ced558cfef97a60bba536b23c6f}{withName}}(levelName)));}
\DoxyCodeLine{01580       folderPath = path.\mbox{\hyperlink{class_t_file_path_a3ebf9ced558cfef97a60bba536b23c6f}{withName}}(levelName);}
\DoxyCodeLine{01581     \}}
\DoxyCodeLine{01582     assert(!TSystem::doesExistFileOrLevel(folderPath));}
\DoxyCodeLine{01583 }
\DoxyCodeLine{01584     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *newSl = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}}();}
\DoxyCodeLine{01585     newSl-\/>\mbox{\hyperlink{class_t_xsh_level_ad2cb5812d9f36e9f5d570874dad8d3bd}{setType}}(sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}());}
\DoxyCodeLine{01586     newSl-\/>clonePropertiesFrom(sl);}
\DoxyCodeLine{01587     newSl-\/>setName(levelName);}
\DoxyCodeLine{01588     newSl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ab5634198656dc2ade669fae235bb19c0}{setPalette}}(sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}());}
\DoxyCodeLine{01589     newSl-\/>\mbox{\hyperlink{class_t_xsh_level_a3c0052e5b6496d5bd9c697f678761e5c}{setScene}}(sl-\/>\mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}());}
\DoxyCodeLine{01590     std::set<TFrameId> frames = s-\/>getSelectedFids();}
\DoxyCodeLine{01591     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const} \&fid : frames) \{}
\DoxyCodeLine{01592       newSl-\/>setFrame(fid, sl-\/>getFrame(fid, \textcolor{keyword}{false}));}
\DoxyCodeLine{01593     \}}
\DoxyCodeLine{01594 }
\DoxyCodeLine{01595     IoCmd::saveLevel(folderPath, newSl, \textcolor{keyword}{false});}
\DoxyCodeLine{01596     refreshFolder(folderPath.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}());}
\DoxyCodeLine{01597     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01598   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mimeData-\/>hasUrls()) \{}
\DoxyCodeLine{01599     \textcolor{keywordtype}{int} count = 0;}
\DoxyCodeLine{01600     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} QUrl \&url : mimeData-\/>urls()) \{}
\DoxyCodeLine{01601       \mbox{\hyperlink{class_t_file_path}{TFilePath}} srcFp(url.toLocalFile().toStdWString());}
\DoxyCodeLine{01602       \mbox{\hyperlink{class_t_file_path}{TFilePath}} dstFp = srcFp.\mbox{\hyperlink{class_t_file_path_a09d12d68c4264183e0268dde6f592b2e}{withParentDir}}(folderPath);}
\DoxyCodeLine{01603       \textcolor{keywordflow}{if} (dstFp != srcFp) \{}
\DoxyCodeLine{01604         \textcolor{keywordflow}{if} (!TSystem::copyFileOrLevel(dstFp, srcFp))}
\DoxyCodeLine{01605           DVGui::error(tr(\textcolor{stringliteral}{"{}There was an error copying \%1 to \%2"{}})}
\DoxyCodeLine{01606                            .arg(toQString(srcFp))}
\DoxyCodeLine{01607                            .arg(toQString(dstFp)));}
\DoxyCodeLine{01608       \}}
\DoxyCodeLine{01609     \}}
\DoxyCodeLine{01610     refreshFolder(folderPath);}
\DoxyCodeLine{01611     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01612   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01613     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01614 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_ad93f363137e771f1c410ec345d3ddee9}\label{class_file_browser_ad93f363137e771f1c410ec345d3ddee9}} 
\index{FileBrowser@{FileBrowser}!dropMimeData@{dropMimeData}}
\index{dropMimeData@{dropMimeData}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{dropMimeData()}{dropMimeData()}}
{\footnotesize\ttfamily bool File\+Browser\+::drop\+Mime\+Data (\begin{DoxyParamCaption}\item[{QTree\+Widget\+Item $\ast$}]{parent,  }\item[{int}]{index,  }\item[{const QMime\+Data $\ast$}]{data,  }\item[{Qt\+::\+Drop\+Action}]{action }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01470                                                                            \{}
\DoxyCodeLine{01471   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01472 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a72ecdae674fd3a0caca4ba1ad2d86852}\label{class_file_browser_a72ecdae674fd3a0caca4ba1ad2d86852}} 
\index{FileBrowser@{FileBrowser}!editFrameRangeVersionControl@{editFrameRangeVersionControl}}
\index{editFrameRangeVersionControl@{editFrameRangeVersionControl}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{editFrameRangeVersionControl}{editFrameRangeVersionControl}}
{\footnotesize\ttfamily void File\+Browser\+::edit\+Frame\+Range\+Version\+Control (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00195                                                \{}
\DoxyCodeLine{00196   QString file;}
\DoxyCodeLine{00197   QString path;}
\DoxyCodeLine{00198   setupVersionControlCommand(file, path);}
\DoxyCodeLine{00199   \textcolor{keywordflow}{if} (file.isEmpty() || path.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00200 }
\DoxyCodeLine{00201   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(path.toStdWString()) + file.toStdWString());}
\DoxyCodeLine{00202   \textcolor{keywordflow}{if} (fp.getDots() == \textcolor{stringliteral}{"{}.."{}}) \{}
\DoxyCodeLine{00203     QStringList list = getLevelFileNames(fp);}
\DoxyCodeLine{00204     VersionControl::instance()-\/>lockFrameRange(\textcolor{keyword}{this}, path, list);}
\DoxyCodeLine{00205   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00206     \textcolor{keyword}{const} std::set<int> \&indices = m\_itemViewer-\/>getSelectedIndices();}
\DoxyCodeLine{00207     \textcolor{keywordtype}{int} frameCount =}
\DoxyCodeLine{00208         m\_itemViewer-\/>getModel()}
\DoxyCodeLine{00209             -\/>getItemData(*indices.begin(), DvItemListModel::FrameCount)}
\DoxyCodeLine{00210             .toInt();}
\DoxyCodeLine{00211 }
\DoxyCodeLine{00212     VersionControl::instance()-\/>lockFrameRange(\textcolor{keyword}{this}, path, file, frameCount);}
\DoxyCodeLine{00213   \}}
\DoxyCodeLine{00214 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a7913b70dd843927a534d47875331d5f4}\label{class_file_browser_a7913b70dd843927a534d47875331d5f4}} 
\index{FileBrowser@{FileBrowser}!editVersionControl@{editVersionControl}}
\index{editVersionControl@{editVersionControl}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{editVersionControl}{editVersionControl}}
{\footnotesize\ttfamily void File\+Browser\+::edit\+Version\+Control (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00146                                      \{}
\DoxyCodeLine{00147   QStringList files;}
\DoxyCodeLine{00148   QString path;}
\DoxyCodeLine{00149 }
\DoxyCodeLine{00150   \textcolor{keywordtype}{int} sceneIconsCount = 0;}
\DoxyCodeLine{00151   setupVersionControlCommand(files, path, sceneIconsCount);}
\DoxyCodeLine{00152   \textcolor{keywordflow}{if} (files.isEmpty() || path.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00153 }
\DoxyCodeLine{00154   \mbox{\hyperlink{class_version_control}{VersionControl}} *vc = VersionControl::instance();}
\DoxyCodeLine{00155 }
\DoxyCodeLine{00156   \textcolor{keywordtype}{bool} hasCurrentSceneFile = \textcolor{keyword}{false};}
\DoxyCodeLine{00157 }
\DoxyCodeLine{00158   \textcolor{comment}{// Check the scene file}}
\DoxyCodeLine{00159   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()}
\DoxyCodeLine{00160                      -\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()}
\DoxyCodeLine{00161                      -\/>getScene()}
\DoxyCodeLine{00162                      -\/>\mbox{\hyperlink{class_toonz_scene_ad42b52b671b094f66e003c4b7ebefd45}{getScenePath}}()}
\DoxyCodeLine{00163                      .\mbox{\hyperlink{class_t_file_path_ac17d65d827432f0fae28fed699bf4afa}{withoutParentDir}}();}
\DoxyCodeLine{00164   \textcolor{keywordflow}{if} (files.contains(toQString(fp))) hasCurrentSceneFile = \textcolor{keyword}{true};}
\DoxyCodeLine{00165 }
\DoxyCodeLine{00166   \textcolor{comment}{// Check the scene resource files}}
\DoxyCodeLine{00167   \textcolor{keywordflow}{if} (!hasCurrentSceneFile) \{}
\DoxyCodeLine{00168     QStringList currentSceneContents = vc-\/>getCurrentSceneContents();}
\DoxyCodeLine{00169     \textcolor{keywordtype}{int} fileSize                     = files.size();}
\DoxyCodeLine{00170     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < fileSize; i++) \{}
\DoxyCodeLine{00171 \textcolor{preprocessor}{\#ifdef MACOSX}}
\DoxyCodeLine{00172       QString fp = path + \textcolor{stringliteral}{"{}/"{}} + files.at(i);}
\DoxyCodeLine{00173 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00174       QString fp = path + \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)"{}} + files.at(i);}
\DoxyCodeLine{00175 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00176       \textcolor{keywordflow}{if} (currentSceneContents.contains(fp)) \{}
\DoxyCodeLine{00177         hasCurrentSceneFile = \textcolor{keyword}{true};}
\DoxyCodeLine{00178         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00179       \}}
\DoxyCodeLine{00180     \}}
\DoxyCodeLine{00181   \}}
\DoxyCodeLine{00182 }
\DoxyCodeLine{00183   \textcolor{keywordflow}{if} (hasCurrentSceneFile) \{}
\DoxyCodeLine{00184     DVGui::warning(}
\DoxyCodeLine{00185         tr(\textcolor{stringliteral}{"{}Some files that you want to edit are currently opened. Close them "{}}}
\DoxyCodeLine{00186            \textcolor{stringliteral}{"{}first."{}}));}
\DoxyCodeLine{00187     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00188   \}}
\DoxyCodeLine{00189 }
\DoxyCodeLine{00190   vc-\/>lock(\textcolor{keyword}{this}, path, files, sceneIconsCount);}
\DoxyCodeLine{00191 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a395af240cb7f0cdb7a2bc9b60b5f1b04}\label{class_file_browser_a395af240cb7f0cdb7a2bc9b60b5f1b04}} 
\index{FileBrowser@{FileBrowser}!enableDoubleClickToOpenScenes@{enableDoubleClickToOpenScenes}}
\index{enableDoubleClickToOpenScenes@{enableDoubleClickToOpenScenes}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{enableDoubleClickToOpenScenes()}{enableDoubleClickToOpenScenes()}}
{\footnotesize\ttfamily void File\+Browser\+::enable\+Double\+Click\+To\+Open\+Scenes (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02282                                                 \{}
\DoxyCodeLine{02283   \textcolor{comment}{// perhaps this should disconnect existing signal handlers first}}
\DoxyCodeLine{02284   connect(\textcolor{keyword}{this}, SIGNAL(filePathDoubleClicked(\textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{02285           SLOT(tryToOpenScene(\textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&)));}
\DoxyCodeLine{02286 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a0bdee8367b83164ed33ab25c861fa845}\label{class_file_browser_a0bdee8367b83164ed33ab25c861fa845}} 
\index{FileBrowser@{FileBrowser}!enableGlobalSelection@{enableGlobalSelection}}
\index{enableGlobalSelection@{enableGlobalSelection}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{enableGlobalSelection()}{enableGlobalSelection()}}
{\footnotesize\ttfamily void File\+Browser\+::enable\+Global\+Selection (\begin{DoxyParamCaption}\item[{bool}]{enabled }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02271                                                     \{}
\DoxyCodeLine{02272   m\_folderTreeView-\/>enableGlobalSelection(enabled);}
\DoxyCodeLine{02273   m\_itemViewer-\/>enableGlobalSelection(enabled);}
\DoxyCodeLine{02274 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a2677b543b25e37f85ba7cc1cdf4175ce}\label{class_file_browser_a2677b543b25e37f85ba7cc1cdf4175ce}} 
\index{FileBrowser@{FileBrowser}!findIndexWithPath@{findIndexWithPath}}
\index{findIndexWithPath@{findIndexWithPath}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{findIndexWithPath()}{findIndexWithPath()}}
{\footnotesize\ttfamily int File\+Browser\+::find\+Index\+With\+Path (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}]{path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01006                                                  \{}
\DoxyCodeLine{01007   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01008   \textcolor{keywordflow}{for} (i = 0; i < m\_items.size(); i++)}
\DoxyCodeLine{01009     \textcolor{keywordflow}{if} (m\_items[i].m\_path == path) \textcolor{keywordflow}{return} i;}
\DoxyCodeLine{01010   \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{01011 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a6478c0423676821080f9140ebe23ca44}\label{class_file_browser_a6478c0423676821080f9140ebe23ca44}} 
\index{FileBrowser@{FileBrowser}!folderUp@{folderUp}}
\index{folderUp@{folderUp}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{folderUp}{folderUp}}
{\footnotesize\ttfamily void File\+Browser\+::folder\+Up (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02189                            \{}
\DoxyCodeLine{02190   QModelIndex index = m\_folderTreeView-\/>currentIndex();}
\DoxyCodeLine{02191   \textcolor{keywordflow}{if} (!index.isValid() || !index.parent().isValid()) \{}
\DoxyCodeLine{02192     \textcolor{comment}{// cannot go up tree view, so try going to parent directory}}
\DoxyCodeLine{02193     \mbox{\hyperlink{class_t_file_path}{TFilePath}} parentFp = m\_folder.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}();}
\DoxyCodeLine{02194     \textcolor{keywordflow}{if} (parentFp != \mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}"{}}) \&\& parentFp != m\_folder) \{}
\DoxyCodeLine{02195       setFolder(parentFp, \textcolor{keyword}{true});}
\DoxyCodeLine{02196     \}}
\DoxyCodeLine{02197     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02198   \}}
\DoxyCodeLine{02199   m\_folderTreeView-\/>setCurrentIndex(index.parent());}
\DoxyCodeLine{02200   m\_folderTreeView-\/>scrollTo(index.parent());}
\DoxyCodeLine{02201 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a042df6ddd31d2015239d3bddf2d46542}\label{class_file_browser_a042df6ddd31d2015239d3bddf2d46542}} 
\index{FileBrowser@{FileBrowser}!getContextMenu@{getContextMenu}}
\index{getContextMenu@{getContextMenu}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{getContextMenu()}{getContextMenu()}}
{\footnotesize\ttfamily QMenu $\ast$ File\+Browser\+::get\+Context\+Menu (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent,  }\item[{int}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01113                                                              \{}
\DoxyCodeLine{01114   \textcolor{keyword}{auto} isOldLevelType = [](\mbox{\hyperlink{class_t_file_path}{TFilePath}} \&path) -\/> \textcolor{keywordtype}{bool} \{}
\DoxyCodeLine{01115     \textcolor{keywordflow}{return} path.getType() == \textcolor{stringliteral}{"{}tzp"{}} || path.getType() == \textcolor{stringliteral}{"{}tzu"{}};}
\DoxyCodeLine{01116   \};}
\DoxyCodeLine{01117 }
\DoxyCodeLine{01118   \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{true};}
\DoxyCodeLine{01119 }
\DoxyCodeLine{01120   \textcolor{comment}{// TODO: spostare in questa classe anche la definizione delle azioni?}}
\DoxyCodeLine{01121   \mbox{\hyperlink{class_file_selection}{FileSelection}} *fs =}
\DoxyCodeLine{01122       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_file_selection}{FileSelection}} *\textcolor{keyword}{>}(m\_itemViewer-\/>getPanel()-\/>getSelection());}
\DoxyCodeLine{01123   \textcolor{keywordflow}{if} (!fs) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{01124   std::vector<TFilePath> files;}
\DoxyCodeLine{01125   fs-\/>getSelectedFiles(files);}
\DoxyCodeLine{01126 }
\DoxyCodeLine{01127   QMenu *menu        = \textcolor{keyword}{new} QMenu(parent);}
\DoxyCodeLine{01128   \mbox{\hyperlink{class_command_manager}{CommandManager}} *cm = CommandManager::instance();}
\DoxyCodeLine{01129 }
\DoxyCodeLine{01130   \textcolor{keywordflow}{if} (files.empty()) \{}
\DoxyCodeLine{01131     menu-\/>addAction(cm-\/>getAction(MI\_ShowFolderContents));}
\DoxyCodeLine{01132     menu-\/>addAction(cm-\/>getAction(MI\_SelectAll));}
\DoxyCodeLine{01133     \textcolor{keywordflow}{if} (!Preferences::instance()-\/>isWatchFileSystemEnabled()) \{}
\DoxyCodeLine{01134       menu-\/>addAction(cm-\/>getAction(MI\_RefreshTree));}
\DoxyCodeLine{01135     \}}
\DoxyCodeLine{01136     \textcolor{keywordflow}{return} menu;}
\DoxyCodeLine{01137   \}}
\DoxyCodeLine{01138 }
\DoxyCodeLine{01139   \textcolor{keywordflow}{if} (files.size() == 1 \&\& files[0].getType() == \textcolor{stringliteral}{"{}tnz"{}}) \{}
\DoxyCodeLine{01140     menu-\/>addAction(cm-\/>getAction(MI\_LoadScene));}
\DoxyCodeLine{01141   \}}
\DoxyCodeLine{01142 }
\DoxyCodeLine{01143   \textcolor{keywordtype}{bool} areResources = \textcolor{keyword}{true};}
\DoxyCodeLine{01144   \textcolor{keywordtype}{bool} areScenes    = \textcolor{keyword}{false};}
\DoxyCodeLine{01145   \textcolor{keywordtype}{int} i, j;}
\DoxyCodeLine{01146   \textcolor{keywordflow}{for} (i = 0; i < (int)files.size(); i++) \{}
\DoxyCodeLine{01147     TFileType::Type type = TFileType::getInfo(files[i]);}
\DoxyCodeLine{01148     \textcolor{keywordflow}{if} (areResources \&\& !TFileType::isResource(type)) areResources = \textcolor{keyword}{false};}
\DoxyCodeLine{01149     \textcolor{keywordflow}{if} (!areScenes \&\& TFileType::isScene(type)) areScenes = \textcolor{keyword}{true};}
\DoxyCodeLine{01150   \}}
\DoxyCodeLine{01151 }
\DoxyCodeLine{01152   \textcolor{keywordtype}{bool} areFullcolor = \textcolor{keyword}{true};}
\DoxyCodeLine{01153   \textcolor{keywordflow}{for} (i = 0; i < (int)files.size(); i++) \{}
\DoxyCodeLine{01154     TFileType::Type type = TFileType::getInfo(files[i]);}
\DoxyCodeLine{01155     \textcolor{keywordflow}{if} (!TFileType::isFullColor(type)) \{}
\DoxyCodeLine{01156       areFullcolor = \textcolor{keyword}{false};}
\DoxyCodeLine{01157       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01158     \}}
\DoxyCodeLine{01159   \}}
\DoxyCodeLine{01160 }
\DoxyCodeLine{01161   \mbox{\hyperlink{class_t_file_path}{TFilePath}} clickedFile;}
\DoxyCodeLine{01162   \textcolor{keywordflow}{if} (0 <= index \&\& index < (\textcolor{keywordtype}{int})m\_items.size())}
\DoxyCodeLine{01163     clickedFile = m\_items[index].m\_path;}
\DoxyCodeLine{01164 }
\DoxyCodeLine{01165   \textcolor{keywordflow}{if} (areResources) \{}
\DoxyCodeLine{01166     QString title;}
\DoxyCodeLine{01167     \textcolor{keywordflow}{if} (clickedFile != \mbox{\hyperlink{class_t_file_path}{TFilePath}}() \&\& clickedFile.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}})}
\DoxyCodeLine{01168       title = tr(\textcolor{stringliteral}{"{}Load As Sub-\/xsheet"{}});}
\DoxyCodeLine{01169     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01170       title = tr(\textcolor{stringliteral}{"{}Load"{}});}
\DoxyCodeLine{01171     QAction *action = \textcolor{keyword}{new} QAction(QIcon(createQIcon(\textcolor{stringliteral}{"{}import"{}})), title, menu);}
\DoxyCodeLine{01172     ret             = ret \&\&}
\DoxyCodeLine{01173           connect(action, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(loadResources()));}
\DoxyCodeLine{01174     menu-\/>addAction(action);}
\DoxyCodeLine{01175     menu-\/>addSeparator();}
\DoxyCodeLine{01176   \}}
\DoxyCodeLine{01177 }
\DoxyCodeLine{01178   menu-\/>addAction(cm-\/>getAction(MI\_DuplicateFile));}
\DoxyCodeLine{01179   \textcolor{keywordflow}{if} (!areScenes) \{}
\DoxyCodeLine{01180     menu-\/>addAction(cm-\/>getAction(MI\_Copy));}
\DoxyCodeLine{01181     menu-\/>addAction(cm-\/>getAction(MI\_Paste));}
\DoxyCodeLine{01182   \}}
\DoxyCodeLine{01183   menu-\/>addAction(cm-\/>getAction(MI\_Clear));}
\DoxyCodeLine{01184   menu-\/>addAction(cm-\/>getAction(MI\_ShowFolderContents));}
\DoxyCodeLine{01185   menu-\/>addAction(cm-\/>getAction(MI\_SelectAll));}
\DoxyCodeLine{01186   menu-\/>addAction(cm-\/>getAction(MI\_FileInfo));}
\DoxyCodeLine{01187   \textcolor{keywordflow}{if} (!clickedFile.isEmpty() \&\&}
\DoxyCodeLine{01188       (clickedFile.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}} || clickedFile.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tab"{}})) \{}
\DoxyCodeLine{01189     menu-\/>addSeparator();}
\DoxyCodeLine{01190     menu-\/>addAction(cm-\/>getAction(MI\_AddToBatchRenderList));}
\DoxyCodeLine{01191     menu-\/>addAction(cm-\/>getAction(MI\_AddToBatchCleanupList));}
\DoxyCodeLine{01192   \}}
\DoxyCodeLine{01193 }
\DoxyCodeLine{01194   \textcolor{keywordflow}{for} (i = 0; i < files.size(); i++)}
\DoxyCodeLine{01195     \textcolor{keywordflow}{if} (!TFileType::isViewable(TFileType::getInfo(files[i])) \&\&}
\DoxyCodeLine{01196         files[i].getType() != \textcolor{stringliteral}{"{}tpl"{}})}
\DoxyCodeLine{01197       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01198   \textcolor{keywordflow}{if} (i == files.size()) \{}
\DoxyCodeLine{01199     std::string type = files[0].getType();}
\DoxyCodeLine{01200     \textcolor{keywordflow}{for} (j = 0; j < files.size(); j++)}
\DoxyCodeLine{01201       \textcolor{keywordflow}{if} (isOldLevelType(files[j])) \textcolor{keywordflow}{break};}
\DoxyCodeLine{01202     \textcolor{keywordflow}{if} (j == files.size()) menu-\/>addAction(cm-\/>getAction(MI\_ViewFile));}
\DoxyCodeLine{01203 }
\DoxyCodeLine{01204     \textcolor{keywordflow}{for} (j = 0; j < files.size(); j++) \{}
\DoxyCodeLine{01205       \textcolor{keywordflow}{if} ((files[0].getType() == \textcolor{stringliteral}{"{}pli"{}} \&\& files[j].getType() != \textcolor{stringliteral}{"{}pli"{}}) ||}
\DoxyCodeLine{01206           (files[0].getType() != \textcolor{stringliteral}{"{}pli"{}} \&\& files[j].getType() == \textcolor{stringliteral}{"{}pli"{}}))}
\DoxyCodeLine{01207         \textcolor{keywordflow}{break};}
\DoxyCodeLine{01208       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((isOldLevelType(files[0]) \&\& !isOldLevelType(files[j])) ||}
\DoxyCodeLine{01209                (!isOldLevelType(files[0]) \&\& isOldLevelType(files[j])))}
\DoxyCodeLine{01210         \textcolor{keywordflow}{break};}
\DoxyCodeLine{01211     \}}
\DoxyCodeLine{01212     \textcolor{keywordflow}{if} (j == files.size()) \{}
\DoxyCodeLine{01213       menu-\/>addAction(cm-\/>getAction(MI\_ConvertFiles));}
\DoxyCodeLine{01214       \textcolor{comment}{// iwsw commented out temporarily}}
\DoxyCodeLine{01215       \textcolor{comment}{// menu-\/>addAction(cm-\/>getAction(MI\_ToonShadedImageToTLV));}}
\DoxyCodeLine{01216     \}}
\DoxyCodeLine{01217     \textcolor{keywordflow}{if} (areFullcolor) menu-\/>addAction(cm-\/>getAction(MI\_SeparateColors));}
\DoxyCodeLine{01218 }
\DoxyCodeLine{01219     \textcolor{keywordflow}{if} (!areFullcolor) menu-\/>addSeparator();}
\DoxyCodeLine{01220   \}}
\DoxyCodeLine{01221   \textcolor{keywordflow}{if} (files.size() == 1 \&\& files[0].getType() != \textcolor{stringliteral}{"{}tnz"{}}) \{}
\DoxyCodeLine{01222     QAction *action =}
\DoxyCodeLine{01223         \textcolor{keyword}{new} QAction(QIcon(createQIcon(\textcolor{stringliteral}{"{}rename"{}})), tr(\textcolor{stringliteral}{"{}Rename"{}}), menu);}
\DoxyCodeLine{01224     ret = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01225                          SLOT(renameAsToonzLevel()));}
\DoxyCodeLine{01226     menu-\/>addAction(action);}
\DoxyCodeLine{01227   \}}
\DoxyCodeLine{01228 \textcolor{preprocessor}{\#ifdef LEVO}}
\DoxyCodeLine{01229 }
\DoxyCodeLine{01230   \textcolor{keywordflow}{if} (files.size() == 2 \&\&}
\DoxyCodeLine{01231       (files[0].getType() == \textcolor{stringliteral}{"{}tif"{}} || files[0].getType() == \textcolor{stringliteral}{"{}tiff"{}} ||}
\DoxyCodeLine{01232        files[0].getType() == \textcolor{stringliteral}{"{}png"{}} || files[0].getType() == \textcolor{stringliteral}{"{}TIF"{}} ||}
\DoxyCodeLine{01233        files[0].getType() == \textcolor{stringliteral}{"{}TIFF"{}} || files[0].getType() == \textcolor{stringliteral}{"{}PNG"{}}) \&\&}
\DoxyCodeLine{01234       (files[1].getType() == \textcolor{stringliteral}{"{}tif"{}} || files[1].getType() == \textcolor{stringliteral}{"{}tiff"{}} ||}
\DoxyCodeLine{01235        files[1].getType() == \textcolor{stringliteral}{"{}png"{}} || files[1].getType() == \textcolor{stringliteral}{"{}TIF"{}} ||}
\DoxyCodeLine{01236        files[1].getType() == \textcolor{stringliteral}{"{}TIFF"{}} || files[1].getType() == \textcolor{stringliteral}{"{}PNG"{}})) \{}
\DoxyCodeLine{01237     QAction *action = \textcolor{keyword}{new} QAction(tr(\textcolor{stringliteral}{"{}Convert to Painted TLV"{}}), menu);}
\DoxyCodeLine{01238     ret             = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01239                          SLOT(convertToPaintedTlv()));}
\DoxyCodeLine{01240     menu-\/>addAction(action);}
\DoxyCodeLine{01241   \}}
\DoxyCodeLine{01242   \textcolor{keywordflow}{if} (areFullcolor) \{}
\DoxyCodeLine{01243     QAction *action = \textcolor{keyword}{new} QAction(tr(\textcolor{stringliteral}{"{}Convert to Unpainted TLV"{}}), menu);}
\DoxyCodeLine{01244     ret             = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01245                          SLOT(convertToUnpaintedTlv()));}
\DoxyCodeLine{01246     menu-\/>addAction(action);}
\DoxyCodeLine{01247     menu-\/>addSeparator();}
\DoxyCodeLine{01248   \}}
\DoxyCodeLine{01249 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01250 }
\DoxyCodeLine{01251   \textcolor{keywordflow}{if} (!clickedFile.isEmpty() \&\& (clickedFile.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}})) \{}
\DoxyCodeLine{01252     menu-\/>addSeparator();}
\DoxyCodeLine{01253     menu-\/>addAction(cm-\/>getAction(MI\_CollectAssets));}
\DoxyCodeLine{01254     menu-\/>addAction(cm-\/>getAction(MI\_ImportScenes));}
\DoxyCodeLine{01255     menu-\/>addAction(cm-\/>getAction(MI\_ExportScenes));}
\DoxyCodeLine{01256   \}}
\DoxyCodeLine{01257 }
\DoxyCodeLine{01258   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *node = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{01259       m\_folderTreeView-\/>getCurrentNode());}
\DoxyCodeLine{01260   \textcolor{keywordflow}{if} (node) \{}
\DoxyCodeLine{01261     \textcolor{comment}{// Check Version Control Status}}
\DoxyCodeLine{01262     DvItemListModel::Status status =}
\DoxyCodeLine{01263         (DvItemListModel::Status)m\_itemViewer-\/>getModel()}
\DoxyCodeLine{01264             -\/>getItemData(index, DvItemListModel::VersionControlStatus)}
\DoxyCodeLine{01265             .toInt();}
\DoxyCodeLine{01266 }
\DoxyCodeLine{01267     \textcolor{comment}{// Remove the added actions}}
\DoxyCodeLine{01268     \textcolor{keywordflow}{if} (status == DvItemListModel::VC\_Missing) menu-\/>clear();}
\DoxyCodeLine{01269 }
\DoxyCodeLine{01270     QMenu *vcMenu = \textcolor{keyword}{new} QMenu(tr(\textcolor{stringliteral}{"{}Version Control"{}}), parent);}
\DoxyCodeLine{01271     QAction *action;}
\DoxyCodeLine{01272 }
\DoxyCodeLine{01273     \textcolor{keywordflow}{if} (status == DvItemListModel::VC\_ReadOnly ||}
\DoxyCodeLine{01274         (status == DvItemListModel::VC\_ToUpdate \&\& files.size() == 1)) \{}
\DoxyCodeLine{01275       \textcolor{keywordflow}{if} (status == DvItemListModel::VC\_ReadOnly) \{}
\DoxyCodeLine{01276         action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Edit"{}}));}
\DoxyCodeLine{01277         ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01278                              SLOT(editVersionControl()));}
\DoxyCodeLine{01279 }
\DoxyCodeLine{01280         \mbox{\hyperlink{class_t_file_path}{TFilePath}} path       = files.at(0);}
\DoxyCodeLine{01281         std::string fileType = path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}();}
\DoxyCodeLine{01282         \textcolor{keywordflow}{if} (fileType == \textcolor{stringliteral}{"{}tlv"{}} || fileType == \textcolor{stringliteral}{"{}pli"{}} || path.\mbox{\hyperlink{class_t_file_path_a698bbf714436eb6923359044900cde2b}{getDots}}() == \textcolor{stringliteral}{"{}.."{}}) \{}
\DoxyCodeLine{01283           action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Edit Frame Range..."{}}));}
\DoxyCodeLine{01284           ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01285                                SLOT(editFrameRangeVersionControl()));}
\DoxyCodeLine{01286         \}}
\DoxyCodeLine{01287       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01288         action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Edit"{}}));}
\DoxyCodeLine{01289         ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01290                              SLOT(updateAndEditVersionControl()));}
\DoxyCodeLine{01291       \}}
\DoxyCodeLine{01292     \}}
\DoxyCodeLine{01293 }
\DoxyCodeLine{01294     \textcolor{keywordflow}{if} (status == DvItemListModel::VC\_Modified) \{}
\DoxyCodeLine{01295       action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Put..."{}}));}
\DoxyCodeLine{01296       ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01297                            SLOT(putVersionControl()));}
\DoxyCodeLine{01298 }
\DoxyCodeLine{01299       action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Revert"{}}));}
\DoxyCodeLine{01300       ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01301                            SLOT(revertVersionControl()));}
\DoxyCodeLine{01302     \}}
\DoxyCodeLine{01303 }
\DoxyCodeLine{01304     \textcolor{keywordflow}{if} (status == DvItemListModel::VC\_ReadOnly ||}
\DoxyCodeLine{01305         status == DvItemListModel::VC\_ToUpdate) \{}
\DoxyCodeLine{01306       action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Get"{}}));}
\DoxyCodeLine{01307       ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01308                            SLOT(getVersionControl()));}
\DoxyCodeLine{01309 }
\DoxyCodeLine{01310       \textcolor{keywordflow}{if} (status == DvItemListModel::VC\_ReadOnly) \{}
\DoxyCodeLine{01311         action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Delete"{}}));}
\DoxyCodeLine{01312         ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01313                              SLOT(deleteVersionControl()));}
\DoxyCodeLine{01314       \}}
\DoxyCodeLine{01315 }
\DoxyCodeLine{01316       vcMenu-\/>addSeparator();}
\DoxyCodeLine{01317 }
\DoxyCodeLine{01318       \textcolor{keywordflow}{if} (files.size() == 1) \{}
\DoxyCodeLine{01319         action         = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Get Revision..."{}}));}
\DoxyCodeLine{01320         \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = files.at(0);}
\DoxyCodeLine{01321         \textcolor{keywordflow}{if} (path.\mbox{\hyperlink{class_t_file_path_a698bbf714436eb6923359044900cde2b}{getDots}}() == \textcolor{stringliteral}{"{}.."{}})}
\DoxyCodeLine{01322           ret = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01323                                SLOT(getRevisionVersionControl()));}
\DoxyCodeLine{01324         \textcolor{keywordflow}{else}}
\DoxyCodeLine{01325           ret = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01326                                SLOT(getRevisionHistory()));}
\DoxyCodeLine{01327       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (files.size() > 1) \{}
\DoxyCodeLine{01328         action = vcMenu-\/>addAction(\textcolor{stringliteral}{"{}Get Revision..."{}});}
\DoxyCodeLine{01329         ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01330                              SLOT(getRevisionVersionControl()));}
\DoxyCodeLine{01331       \}}
\DoxyCodeLine{01332     \}}
\DoxyCodeLine{01333 }
\DoxyCodeLine{01334     \textcolor{keywordflow}{if} (status == DvItemListModel::VC\_Edited) \{}
\DoxyCodeLine{01335       action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Unlock"{}}));}
\DoxyCodeLine{01336       ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01337                            SLOT(unlockVersionControl()));}
\DoxyCodeLine{01338     \}}
\DoxyCodeLine{01339 }
\DoxyCodeLine{01340     \textcolor{keywordflow}{if} (status == DvItemListModel::VC\_Unversioned) \{}
\DoxyCodeLine{01341       action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Put..."{}}));}
\DoxyCodeLine{01342       ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01343                            SLOT(putVersionControl()));}
\DoxyCodeLine{01344     \}}
\DoxyCodeLine{01345 }
\DoxyCodeLine{01346     \textcolor{keywordflow}{if} (status == DvItemListModel::VC\_Locked \&\& files.size() == 1) \{}
\DoxyCodeLine{01347       action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Unlock"{}}));}
\DoxyCodeLine{01348       ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01349                            SLOT(unlockVersionControl()));}
\DoxyCodeLine{01350 }
\DoxyCodeLine{01351       action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Edit Info"{}}));}
\DoxyCodeLine{01352       ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01353                            SLOT(showLockInformation()));}
\DoxyCodeLine{01354     \}}
\DoxyCodeLine{01355 }
\DoxyCodeLine{01356     \textcolor{keywordflow}{if} (status == DvItemListModel::VC\_Missing) \{}
\DoxyCodeLine{01357       action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Get"{}}));}
\DoxyCodeLine{01358       ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01359                            SLOT(getVersionControl()));}
\DoxyCodeLine{01360 }
\DoxyCodeLine{01361       \textcolor{keywordflow}{if} (files.size() == 1) \{}
\DoxyCodeLine{01362         vcMenu-\/>addSeparator();}
\DoxyCodeLine{01363         action         = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Revision History..."{}}));}
\DoxyCodeLine{01364         \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = files.at(0);}
\DoxyCodeLine{01365         \textcolor{keywordflow}{if} (path.\mbox{\hyperlink{class_t_file_path_a698bbf714436eb6923359044900cde2b}{getDots}}() == \textcolor{stringliteral}{"{}.."{}})}
\DoxyCodeLine{01366           ret = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01367                                SLOT(getRevisionVersionControl()));}
\DoxyCodeLine{01368         \textcolor{keywordflow}{else}}
\DoxyCodeLine{01369           ret = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01370                                SLOT(getRevisionHistory()));}
\DoxyCodeLine{01371       \}}
\DoxyCodeLine{01372     \}}
\DoxyCodeLine{01373 }
\DoxyCodeLine{01374     \textcolor{keywordflow}{if} (status == DvItemListModel::VC\_PartialLocked) \{}
\DoxyCodeLine{01375       action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Get"{}}));}
\DoxyCodeLine{01376       ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01377                            SLOT(getVersionControl()));}
\DoxyCodeLine{01378       \textcolor{keywordflow}{if} (files.size() == 1) \{}
\DoxyCodeLine{01379         action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Edit Frame Range..."{}}));}
\DoxyCodeLine{01380         ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01381                              SLOT(editFrameRangeVersionControl()));}
\DoxyCodeLine{01382 }
\DoxyCodeLine{01383         action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Edit Info"{}}));}
\DoxyCodeLine{01384         ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01385                              SLOT(showFrameRangeLockInfo()));}
\DoxyCodeLine{01386       \}}
\DoxyCodeLine{01387 }
\DoxyCodeLine{01388     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (status == DvItemListModel::VC\_PartialEdited) \{}
\DoxyCodeLine{01389       action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Get"{}}));}
\DoxyCodeLine{01390       ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01391                            SLOT(getVersionControl()));}
\DoxyCodeLine{01392 }
\DoxyCodeLine{01393       \textcolor{keywordflow}{if} (files.size() == 1) \{}
\DoxyCodeLine{01394         action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Unlock Frame Range"{}}));}
\DoxyCodeLine{01395         ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01396                              SLOT(unlockFrameRangeVersionControl()));}
\DoxyCodeLine{01397 }
\DoxyCodeLine{01398         action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Edit Info"{}}));}
\DoxyCodeLine{01399         ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01400                              SLOT(showFrameRangeLockInfo()));}
\DoxyCodeLine{01401       \}}
\DoxyCodeLine{01402     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (status == DvItemListModel::VC\_PartialModified) \{}
\DoxyCodeLine{01403       action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Get"{}}));}
\DoxyCodeLine{01404       ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01405                            SLOT(getVersionControl()));}
\DoxyCodeLine{01406 }
\DoxyCodeLine{01407       \textcolor{keywordflow}{if} (files.size() == 1) \{}
\DoxyCodeLine{01408         action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Put..."{}}));}
\DoxyCodeLine{01409         ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01410                              SLOT(putFrameRangeVersionControl()));}
\DoxyCodeLine{01411 }
\DoxyCodeLine{01412         action = vcMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}Revert"{}}));}
\DoxyCodeLine{01413         ret    = ret \&\& connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{01414                              SLOT(revertFrameRangeVersionControl()));}
\DoxyCodeLine{01415       \}}
\DoxyCodeLine{01416     \}}
\DoxyCodeLine{01417 }
\DoxyCodeLine{01418     \textcolor{keywordflow}{if} (!vcMenu-\/>isEmpty()) \{}
\DoxyCodeLine{01419       menu-\/>addSeparator();}
\DoxyCodeLine{01420       menu-\/>addMenu(vcMenu);}
\DoxyCodeLine{01421     \}}
\DoxyCodeLine{01422   \}}
\DoxyCodeLine{01423 }
\DoxyCodeLine{01424   \textcolor{keywordflow}{if} (!Preferences::instance()-\/>isWatchFileSystemEnabled()) \{}
\DoxyCodeLine{01425     menu-\/>addSeparator();}
\DoxyCodeLine{01426     menu-\/>addAction(cm-\/>getAction(MI\_RefreshTree));}
\DoxyCodeLine{01427   \}}
\DoxyCodeLine{01428 }
\DoxyCodeLine{01429   assert(ret);}
\DoxyCodeLine{01430 }
\DoxyCodeLine{01431   \textcolor{keywordflow}{return} menu;}
\DoxyCodeLine{01432 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a03789dc2d402a1767cb99b84bcc56e56}\label{class_file_browser_a03789dc2d402a1767cb99b84bcc56e56}} 
\index{FileBrowser@{FileBrowser}!getCurrentDir@{getCurrentDir}}
\index{getCurrentDir@{getCurrentDir}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{getCurrentDir()}{getCurrentDir()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} File\+Browser\+::get\+Current\+Dir (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00565                                            \{}
\DoxyCodeLine{00566   FileFolderItem *item =}
\DoxyCodeLine{00567       \textcolor{keyword}{dynamic\_cast<}FileFolderItem *\textcolor{keyword}{>}(m\_data-\/>m\_tree-\/>getSelectedItem());}
\DoxyCodeLine{00568   \textcolor{keywordflow}{if} (item)}
\DoxyCodeLine{00569     \textcolor{keywordflow}{return} item-\/>getPath();}
\DoxyCodeLine{00570   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00571     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_file_path}{TFilePath}}();}
\DoxyCodeLine{00572 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_aa44e8ef0e86937fe6b6457791ee67182}\label{class_file_browser_aa44e8ef0e86937fe6b6457791ee67182}} 
\index{FileBrowser@{FileBrowser}!getDayDateString@{getDayDateString}}
\index{getDayDateString@{getDayDateString}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{getDayDateString()}{getDayDateString()}}
{\footnotesize\ttfamily std\+::string File\+Browser\+::get\+Day\+Date\+String (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00110 \{ \textcolor{keywordflow}{return} m\_dayDateString; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a627e0e5e03fa8a1251081987fa44df87}\label{class_file_browser_a627e0e5e03fa8a1251081987fa44df87}} 
\index{FileBrowser@{FileBrowser}!getExpandedFolders@{getExpandedFolders}}
\index{getExpandedFolders@{getExpandedFolders}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{getExpandedFolders()}{getExpandedFolders()}}
{\footnotesize\ttfamily void File\+Browser\+::get\+Expanded\+Folders (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dv_dir_model_node}{Dv\+Dir\+Model\+Node}} $\ast$}]{node,  }\item[{QList$<$ \mbox{\hyperlink{class_dv_dir_model_node}{Dv\+Dir\+Model\+Node}} $\ast$ $>$ \&}]{expanded\+Nodes }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02142                                                                              \{}
\DoxyCodeLine{02143   \textcolor{keywordflow}{if} (!node) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02144   QModelIndex newIndex = DvDirModel::instance()-\/>getIndexByNode(node);}
\DoxyCodeLine{02145   \textcolor{keywordflow}{if} (!m\_folderTreeView-\/>isExpanded(newIndex)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02146   expandedNodes.push\_back(node);}
\DoxyCodeLine{02147 }
\DoxyCodeLine{02148   \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{02149   \textcolor{keywordflow}{for} (i = 0; i < node-\/>getChildCount(); i++)}
\DoxyCodeLine{02150     getExpandedFolders(node-\/>getChild(i), expandedNodes);}
\DoxyCodeLine{02151 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a1b2d6a068c5867cbd07bffdd8c7fa4fa}\label{class_file_browser_a1b2d6a068c5867cbd07bffdd8c7fa4fa}} 
\index{FileBrowser@{FileBrowser}!getFilterTypes@{getFilterTypes}}
\index{getFilterTypes@{getFilterTypes}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{getFilterTypes()}{getFilterTypes()}}
{\footnotesize\ttfamily const QString\+List \& File\+Browser\+::get\+Filter\+Types (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00098 \{ \textcolor{keywordflow}{return} m\_filter; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_acd6840b528ed8ca02659f8bebacb26a9}\label{class_file_browser_acd6840b528ed8ca02659f8bebacb26a9}} 
\index{FileBrowser@{FileBrowser}!getFolder@{getFolder}}
\index{getFolder@{getFolder}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{getFolder()}{getFolder()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} File\+Browser\+::get\+Folder (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00109 \{ \textcolor{keywordflow}{return} m\_folder; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a96a400a7c5f8e12b4c546aa57f22d042}\label{class_file_browser_a96a400a7c5f8e12b4c546aa57f22d042}} 
\index{FileBrowser@{FileBrowser}!getItemCount@{getItemCount}}
\index{getItemCount@{getItemCount}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{getItemCount()}{getItemCount()}}
{\footnotesize\ttfamily int File\+Browser\+::get\+Item\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00834 \{ \textcolor{keywordflow}{return} m\_items.size(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_aa03174dac4a7dec69e715ac33b354293}\label{class_file_browser_aa03174dac4a7dec69e715ac33b354293}} 
\index{FileBrowser@{FileBrowser}!getItemData@{getItemData}}
\index{getItemData@{getItemData}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{getItemData()}{getItemData()}}
{\footnotesize\ttfamily QVariant File\+Browser\+::get\+Item\+Data (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{Data\+Type}]{data\+Type,  }\item[{bool}]{is\+Selected = {\ttfamily false} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00908                                                    \{}
\DoxyCodeLine{00909   \textcolor{keywordflow}{if} (index < 0 || index >= (\textcolor{keywordtype}{int})m\_items.size()) \textcolor{keywordflow}{return} QVariant();}
\DoxyCodeLine{00910   Item \&item = m\_items[index];}
\DoxyCodeLine{00911   \textcolor{keywordflow}{if} (dataType == Name) \{}
\DoxyCodeLine{00912     \textcolor{comment}{// show two dots( "{}.."{} ) for the parent directory item}}
\DoxyCodeLine{00913     \textcolor{keywordflow}{if} (item.m\_path == m\_folder.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}())}
\DoxyCodeLine{00914       \textcolor{keywordflow}{return} QString(\textcolor{stringliteral}{"{}.."{}});}
\DoxyCodeLine{00915     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00916       \textcolor{keywordflow}{return} item.m\_name;}
\DoxyCodeLine{00917   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dataType == \mbox{\hyperlink{class_thumbnail}{Thumbnail}}) \{}
\DoxyCodeLine{00918     QSize iconSize = m\_itemViewer-\/>getPanel()-\/>getIconSize();}
\DoxyCodeLine{00919     \textcolor{comment}{// parent folder icons}}
\DoxyCodeLine{00920     \textcolor{keywordflow}{if} (item.m\_path == m\_folder.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}()) \{}
\DoxyCodeLine{00921       \textcolor{keyword}{static} QPixmap folderUpPixmap(}
\DoxyCodeLine{00922           svgToPixmap(getIconThemePath(\textcolor{stringliteral}{"{}actions/60/folder\_browser\_up.svg"{}}),}
\DoxyCodeLine{00923                       iconSize, Qt::KeepAspectRatio));}
\DoxyCodeLine{00924       \textcolor{keywordflow}{return} folderUpPixmap;}
\DoxyCodeLine{00925     \}}
\DoxyCodeLine{00926     \textcolor{comment}{// folder icons}}
\DoxyCodeLine{00927     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (item.m\_isFolder) \{}
\DoxyCodeLine{00928       \textcolor{keywordflow}{if} (item.m\_isLink) \{}
\DoxyCodeLine{00929         \textcolor{keyword}{static} QPixmap folderLinkPixmap(}
\DoxyCodeLine{00930             svgToPixmap(getIconThemePath(\textcolor{stringliteral}{"{}actions/60/folder\_browser\_link.svg"{}}),}
\DoxyCodeLine{00931                         iconSize, Qt::KeepAspectRatio));}
\DoxyCodeLine{00932         \textcolor{keywordflow}{return} folderLinkPixmap;}
\DoxyCodeLine{00933       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00934         \textcolor{keyword}{static} QPixmap folderPixmap(}
\DoxyCodeLine{00935             svgToPixmap(getIconThemePath(\textcolor{stringliteral}{"{}actions/60/folder\_browser.svg"{}}),}
\DoxyCodeLine{00936                         iconSize, Qt::KeepAspectRatio));}
\DoxyCodeLine{00937         \textcolor{keywordflow}{return} folderPixmap;}
\DoxyCodeLine{00938       \}}
\DoxyCodeLine{00939     \}}
\DoxyCodeLine{00940 }
\DoxyCodeLine{00941     QPixmap pixmap = IconGenerator::instance()-\/>getIcon(item.m\_path);}
\DoxyCodeLine{00942     \textcolor{keywordflow}{if} (pixmap.isNull()) \{}
\DoxyCodeLine{00943       pixmap = QPixmap(iconSize);}
\DoxyCodeLine{00944       pixmap.fill(Qt::white);}
\DoxyCodeLine{00945     \}}
\DoxyCodeLine{00946     \textcolor{keywordflow}{return} scalePixmapKeepingAspectRatio(pixmap, iconSize, Qt::transparent);}
\DoxyCodeLine{00947   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dataType == Icon)}
\DoxyCodeLine{00948     \textcolor{keywordflow}{return} QVariant();}
\DoxyCodeLine{00949   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dataType == ToolTip || dataType == FullPath)}
\DoxyCodeLine{00950     \textcolor{keywordflow}{return} QString::fromStdWString(item.m\_path.getWideString());}
\DoxyCodeLine{00951 }
\DoxyCodeLine{00952   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dataType == IsFolder) \{}
\DoxyCodeLine{00953     \textcolor{keywordflow}{return} item.m\_isFolder;}
\DoxyCodeLine{00954   \}}
\DoxyCodeLine{00955 }
\DoxyCodeLine{00956   \textcolor{keywordflow}{if} (!item.m\_validInfo) \{}
\DoxyCodeLine{00957     readInfo(item);}
\DoxyCodeLine{00958     \textcolor{keywordflow}{if} (!item.m\_validInfo) \textcolor{keywordflow}{return} QVariant();}
\DoxyCodeLine{00959   \}}
\DoxyCodeLine{00960 }
\DoxyCodeLine{00961   \textcolor{keywordflow}{if} (dataType == CreationDate) \textcolor{keywordflow}{return} item.m\_creationDate;}
\DoxyCodeLine{00962   \textcolor{keywordflow}{if} (dataType == ModifiedDate) \textcolor{keywordflow}{return} item.m\_modifiedDate;}
\DoxyCodeLine{00963   \textcolor{keywordflow}{if} (dataType == FileType) \{}
\DoxyCodeLine{00964     \textcolor{keywordflow}{if} (item.m\_isLink)}
\DoxyCodeLine{00965       \textcolor{keywordflow}{return} QString(\textcolor{stringliteral}{"{}<LINK>"{}});}
\DoxyCodeLine{00966     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (item.m\_isFolder)}
\DoxyCodeLine{00967       \textcolor{keywordflow}{return} QString(\textcolor{stringliteral}{"{}<DIR>"{}});}
\DoxyCodeLine{00968     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00969       \textcolor{keywordflow}{return} QString::fromStdString(item.m\_path.getType()).toUpper();}
\DoxyCodeLine{00970   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dataType == FileSize)}
\DoxyCodeLine{00971     \textcolor{keywordflow}{return} (item.m\_fileSize == -\/1) ? QVariant() : item.m\_fileSize;}
\DoxyCodeLine{00972   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dataType == FrameCount) \{}
\DoxyCodeLine{00973     \textcolor{keywordflow}{if} (item.m\_frameCount == -\/1) readFrameCount(item);}
\DoxyCodeLine{00974     \textcolor{keywordflow}{return} item.m\_frameCount;}
\DoxyCodeLine{00975   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dataType == PlayAvailable) \{}
\DoxyCodeLine{00976     std::string type = item.m\_path.getType();}
\DoxyCodeLine{00977     \textcolor{keywordflow}{if} (item.m\_frameCount > 1 \&\& type != \textcolor{stringliteral}{"{}tzp"{}} \&\& type != \textcolor{stringliteral}{"{}tzu"{}}) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00978     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00979   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dataType == VersionControlStatus) \{}
\DoxyCodeLine{00980     \textcolor{keywordflow}{return} getItemVersionControlStatus(item);}
\DoxyCodeLine{00981   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00982     \textcolor{keywordflow}{return} QVariant();}
\DoxyCodeLine{00983 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a17ff55a805c10996d83fa0e67c15a0e6}\label{class_file_browser_a17ff55a805c10996d83fa0e67c15a0e6}} 
\index{FileBrowser@{FileBrowser}!getMainSplitter@{getMainSplitter}}
\index{getMainSplitter@{getMainSplitter}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{getMainSplitter()}{getMainSplitter()}}
{\footnotesize\ttfamily QSplitter $\ast$ File\+Browser\+::get\+Main\+Splitter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00125 \{ \textcolor{keywordflow}{return} m\_mainSplitter; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a93aab6eec97cc75749668cc636ed50dd}\label{class_file_browser_a93aab6eec97cc75749668cc636ed50dd}} 
\index{FileBrowser@{FileBrowser}!getRevisionHistory@{getRevisionHistory}}
\index{getRevisionHistory@{getRevisionHistory}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{getRevisionHistory}{getRevisionHistory}}
{\footnotesize\ttfamily void File\+Browser\+::get\+Revision\+History (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00480                                      \{}
\DoxyCodeLine{00481   QString file;}
\DoxyCodeLine{00482   QString path;}
\DoxyCodeLine{00483   setupVersionControlCommand(file, path);}
\DoxyCodeLine{00484   \textcolor{keywordflow}{if} (file.isEmpty() || path.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00485 }
\DoxyCodeLine{00486   QStringList files;}
\DoxyCodeLine{00487   \textcolor{keywordtype}{int} iconAdded;}
\DoxyCodeLine{00488   setupVersionControlCommand(files, path, iconAdded);}
\DoxyCodeLine{00489 }
\DoxyCodeLine{00490   files.removeAt(files.indexOf(file));}
\DoxyCodeLine{00491 }
\DoxyCodeLine{00492   \mbox{\hyperlink{class_s_v_n_timeline}{SVNTimeline}} *timelineDialog = \textcolor{keyword}{new} \mbox{\hyperlink{class_s_v_n_timeline}{SVNTimeline}}(\textcolor{keyword}{this}, path, file, files);}
\DoxyCodeLine{00493   connect(timelineDialog, SIGNAL(commandDone(\textcolor{keyword}{const} QStringList \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00494           SLOT(onVersionControlCommandDone(\textcolor{keyword}{const} QStringList \&)));}
\DoxyCodeLine{00495 }
\DoxyCodeLine{00496   timelineDialog-\/>show();}
\DoxyCodeLine{00497   timelineDialog-\/>raise();}
\DoxyCodeLine{00498 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_adc4d3cd05364feb56ff24bc5b2053cbe}\label{class_file_browser_adc4d3cd05364feb56ff24bc5b2053cbe}} 
\index{FileBrowser@{FileBrowser}!getRevisionVersionControl@{getRevisionVersionControl}}
\index{getRevisionVersionControl@{getRevisionVersionControl}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{getRevisionVersionControl}{getRevisionVersionControl}}
{\footnotesize\ttfamily void File\+Browser\+::get\+Revision\+Version\+Control (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00467                                             \{}
\DoxyCodeLine{00468   QStringList files;}
\DoxyCodeLine{00469   QString path;}
\DoxyCodeLine{00470 }
\DoxyCodeLine{00471   \textcolor{keywordtype}{int} sceneIconsCount = 0;}
\DoxyCodeLine{00472   setupVersionControlCommand(files, path, sceneIconsCount);}
\DoxyCodeLine{00473   \textcolor{keywordflow}{if} (files.isEmpty() || path.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00474   VersionControl::instance()-\/>update(\textcolor{keyword}{this}, path, files, sceneIconsCount, \textcolor{keyword}{false},}
\DoxyCodeLine{00475                                      \textcolor{keyword}{true}, \textcolor{keyword}{false});}
\DoxyCodeLine{00476 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a92d75e38140f40ab4d143434d82c48ed}\label{class_file_browser_a92d75e38140f40ab4d143434d82c48ed}} 
\index{FileBrowser@{FileBrowser}!getVersionControl@{getVersionControl}}
\index{getVersionControl@{getVersionControl}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{getVersionControl}{getVersionControl}}
{\footnotesize\ttfamily void File\+Browser\+::get\+Version\+Control (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00454                                     \{}
\DoxyCodeLine{00455   QStringList files;}
\DoxyCodeLine{00456   QString path;}
\DoxyCodeLine{00457 }
\DoxyCodeLine{00458   \textcolor{keywordtype}{int} sceneIconsCount = 0;}
\DoxyCodeLine{00459   setupVersionControlCommand(files, path, sceneIconsCount);}
\DoxyCodeLine{00460   \textcolor{keywordflow}{if} (files.isEmpty() || path.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00461   VersionControl::instance()-\/>update(\textcolor{keyword}{this}, path, files, sceneIconsCount, \textcolor{keyword}{false},}
\DoxyCodeLine{00462                                      \textcolor{keyword}{false}, \textcolor{keyword}{false});}
\DoxyCodeLine{00463 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a5aa97018ced0379de10cd1b0d9748e68}\label{class_file_browser_a5aa97018ced0379de10cd1b0d9748e68}} 
\index{FileBrowser@{FileBrowser}!hideEvent@{hideEvent}}
\index{hideEvent@{hideEvent}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{hideEvent()}{hideEvent()}}
{\footnotesize\ttfamily void File\+Browser\+::hide\+Event (\begin{DoxyParamCaption}\item[{QHide\+Event $\ast$}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02260                                         \{}
\DoxyCodeLine{02261   activeBrowsers.erase(\textcolor{keyword}{this});}
\DoxyCodeLine{02262   m\_itemViewer-\/>getPanel()-\/>getItemViewPlayDelegate()-\/>resetPlayWidget();}
\DoxyCodeLine{02263 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a633c70a094e977e4ef359dc722d275df}\label{class_file_browser_a633c70a094e977e4ef359dc722d275df}} 
\index{FileBrowser@{FileBrowser}!isSceneItem@{isSceneItem}}
\index{isSceneItem@{isSceneItem}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{isSceneItem()}{isSceneItem()}}
{\footnotesize\ttfamily bool File\+Browser\+::is\+Scene\+Item (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00987                                              \{}
\DoxyCodeLine{00988   \textcolor{keywordflow}{return} 0 <= index \&\& index < (int)m\_items.size() \&\&}
\DoxyCodeLine{00989          m\_items[index].m\_path.getType() == \textcolor{stringliteral}{"{}tnz"{}};}
\DoxyCodeLine{00990 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a3b9b8277d0a37f3d71df14ca87f44fd2}\label{class_file_browser_a3b9b8277d0a37f3d71df14ca87f44fd2}} 
\index{FileBrowser@{FileBrowser}!loadResources@{loadResources}}
\index{loadResources@{loadResources}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{loadResources}{loadResources}}
{\footnotesize\ttfamily void File\+Browser\+::load\+Resources (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01618                                 \{}
\DoxyCodeLine{01619   \mbox{\hyperlink{class_file_selection}{FileSelection}} *fs =}
\DoxyCodeLine{01620       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_file_selection}{FileSelection}} *\textcolor{keyword}{>}(m\_itemViewer-\/>getPanel()-\/>getSelection());}
\DoxyCodeLine{01621   \textcolor{keywordflow}{if} (!fs) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01622 }
\DoxyCodeLine{01623   std::vector<TFilePath> filePaths;}
\DoxyCodeLine{01624   fs-\/>getSelectedFiles(filePaths);}
\DoxyCodeLine{01625 }
\DoxyCodeLine{01626   \textcolor{keywordflow}{if} (filePaths.empty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01627 }
\DoxyCodeLine{01628   \mbox{\hyperlink{struct_io_cmd_1_1_load_resource_arguments}{IoCmd::LoadResourceArguments}} args;}
\DoxyCodeLine{01629   args.\mbox{\hyperlink{struct_io_cmd_1_1_load_resource_arguments_a5175016c278fd5a031f149abf4f77cb1}{resourceDatas}}.assign(filePaths.begin(), filePaths.end());}
\DoxyCodeLine{01630 }
\DoxyCodeLine{01631   \mbox{\hyperlink{namespace_io_cmd_a107f6d3100b922e0c09e9b4aa1a8602a}{IoCmd::loadResources}}(args);}
\DoxyCodeLine{01632 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a5ed87d1ee48b6f53c3afd446e319b103}\label{class_file_browser_a5ed87d1ee48b6f53c3afd446e319b103}} 
\index{FileBrowser@{FileBrowser}!makeCurrentProjectVisible@{makeCurrentProjectVisible}}
\index{makeCurrentProjectVisible@{makeCurrentProjectVisible}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{makeCurrentProjectVisible()}{makeCurrentProjectVisible()}}
{\footnotesize\ttfamily void File\+Browser\+::make\+Current\+Project\+Visible (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02267 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a434f4bbc1f9049bd3c945f28c88b11ba}\label{class_file_browser_a434f4bbc1f9049bd3c945f28c88b11ba}} 
\index{FileBrowser@{FileBrowser}!newFolder@{newFolder}}
\index{newFolder@{newFolder}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{newFolder}{newFolder}}
{\footnotesize\ttfamily void File\+Browser\+::new\+Folder (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02205                             \{}
\DoxyCodeLine{02206   \mbox{\hyperlink{class_t_file_path}{TFilePath}} parentFolder = getFolder();}
\DoxyCodeLine{02207   \textcolor{keywordflow}{if} (parentFolder == \mbox{\hyperlink{class_t_file_path}{TFilePath}}() || !\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(parentFolder).isDirectory())}
\DoxyCodeLine{02208     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02209   QString tempName(tr(\textcolor{stringliteral}{"{}New Folder"{}}));}
\DoxyCodeLine{02210   std::wstring folderName = tempName.toStdWString();}
\DoxyCodeLine{02211   \mbox{\hyperlink{class_t_file_path}{TFilePath}} folderPath    = parentFolder + folderName;}
\DoxyCodeLine{02212   \textcolor{keywordtype}{int} i                   = 1;}
\DoxyCodeLine{02213   \textcolor{keywordflow}{while} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(folderPath).doesExist())}
\DoxyCodeLine{02214     folderPath = parentFolder + (folderName + L\textcolor{stringliteral}{"{} "{}} + std::to\_wstring(++i));}
\DoxyCodeLine{02215 }
\DoxyCodeLine{02216   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{02217     TSystem::mkDir(folderPath);}
\DoxyCodeLine{02218 }
\DoxyCodeLine{02219   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{02220     DVGui::error(tr(\textcolor{stringliteral}{"{}It is not possible to create the \%1 folder."{}})}
\DoxyCodeLine{02221                      .arg(toQString(folderPath)));}
\DoxyCodeLine{02222     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02223   \}}
\DoxyCodeLine{02224 }
\DoxyCodeLine{02225   \mbox{\hyperlink{class_dv_dir_model}{DvDirModel}} *model = DvDirModel::instance();}
\DoxyCodeLine{02226 }
\DoxyCodeLine{02227   QModelIndex parentFolderIndex = m\_folderTreeView-\/>currentIndex();}
\DoxyCodeLine{02228   model-\/>refresh(parentFolderIndex);}
\DoxyCodeLine{02229   m\_folderTreeView-\/>expand(parentFolderIndex);}
\DoxyCodeLine{02230 }
\DoxyCodeLine{02231   std::wstring newFolderName = folderPath.getWideName();}
\DoxyCodeLine{02232   QModelIndex newFolderIndex =}
\DoxyCodeLine{02233       model-\/>childByName(parentFolderIndex, newFolderName);}
\DoxyCodeLine{02234   \textcolor{keywordflow}{if} (newFolderIndex.isValid()) \{}
\DoxyCodeLine{02235     m\_folderTreeView-\/>setCurrentIndex(newFolderIndex);}
\DoxyCodeLine{02236     m\_folderTreeView-\/>scrollTo(newFolderIndex);}
\DoxyCodeLine{02237     m\_folderTreeView-\/>QAbstractItemView::edit(newFolderIndex);}
\DoxyCodeLine{02238   \}}
\DoxyCodeLine{02239 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a43cbd4797a266128988b00feaee9206c}\label{class_file_browser_a43cbd4797a266128988b00feaee9206c}} 
\index{FileBrowser@{FileBrowser}!onBackButtonPushed@{onBackButtonPushed}}
\index{onBackButtonPushed@{onBackButtonPushed}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{onBackButtonPushed}{onBackButtonPushed}}
{\footnotesize\ttfamily void File\+Browser\+::on\+Back\+Button\+Pushed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00367                                      \{}
\DoxyCodeLine{00368   \textcolor{keywordflow}{if} (m\_currentPosition == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00369   m\_currentPosition-\/-\/;}
\DoxyCodeLine{00370   QModelIndex currentIndex = m\_indexHistoryList[m\_currentPosition];}
\DoxyCodeLine{00371   m\_folderTreeView-\/>setCurrentIndex(currentIndex);}
\DoxyCodeLine{00372   m\_folderTreeView-\/>collapseAll();}
\DoxyCodeLine{00373   \textcolor{keywordflow}{while} (currentIndex.isValid()) \{}
\DoxyCodeLine{00374     currentIndex = currentIndex.parent();}
\DoxyCodeLine{00375     m\_folderTreeView-\/>expand(currentIndex);}
\DoxyCodeLine{00376   \}}
\DoxyCodeLine{00377   m\_folderTreeView-\/>update();}
\DoxyCodeLine{00378 }
\DoxyCodeLine{00379   refreshHistoryButtons();}
\DoxyCodeLine{00380 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a4de987ae683d6750e4c45a8c8fac53d3}\label{class_file_browser_a4de987ae683d6750e4c45a8c8fac53d3}} 
\index{FileBrowser@{FileBrowser}!onClickedItem@{onClickedItem}}
\index{onClickedItem@{onClickedItem}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{onClickedItem}{onClickedItem}}
{\footnotesize\ttfamily void File\+Browser\+::on\+Clicked\+Item (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02087                                          \{}
\DoxyCodeLine{02088   \textcolor{keywordflow}{if} (0 <= index \&\& index < (\textcolor{keywordtype}{int})m\_items.size()) \{}
\DoxyCodeLine{02089     \textcolor{comment}{// if the folder is clicked, then move the current folder}}
\DoxyCodeLine{02090     \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = m\_items[index].m\_path;}
\DoxyCodeLine{02091     \textcolor{keywordflow}{if} (m\_items[index].m\_isFolder) \{}
\DoxyCodeLine{02092       setFolder(fp, \textcolor{keyword}{true});}
\DoxyCodeLine{02093       QModelIndex index = m\_folderTreeView-\/>currentIndex();}
\DoxyCodeLine{02094       \textcolor{keywordflow}{if} (index.isValid()) m\_folderTreeView-\/>scrollTo(index);}
\DoxyCodeLine{02095     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{02096       emit filePathClicked(fp);}
\DoxyCodeLine{02097   \}}
\DoxyCodeLine{02098 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_aff99412b6539780fd6c3eec3996748ab}\label{class_file_browser_aff99412b6539780fd6c3eec3996748ab}} 
\index{FileBrowser@{FileBrowser}!onDataChanged@{onDataChanged}}
\index{onDataChanged@{onDataChanged}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{onDataChanged}{onDataChanged}}
{\footnotesize\ttfamily void File\+Browser\+::on\+Data\+Changed (\begin{DoxyParamCaption}\item[{const QModel\+Index \&}]{top\+Left,  }\item[{const QModel\+Index \&}]{bottom\+Right }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01500                                                                 \{}
\DoxyCodeLine{01501   onTreeFolderChanged();}
\DoxyCodeLine{01502 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a695e343959f58dcf3e90b98ce46cd2b6}\label{class_file_browser_a695e343959f58dcf3e90b98ce46cd2b6}} 
\index{FileBrowser@{FileBrowser}!onDoubleClickedItem@{onDoubleClickedItem}}
\index{onDoubleClickedItem@{onDoubleClickedItem}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{onDoubleClickedItem}{onDoubleClickedItem}}
{\footnotesize\ttfamily void File\+Browser\+::on\+Double\+Clicked\+Item (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02102                                                \{}
\DoxyCodeLine{02103   \textcolor{comment}{// TODO: Avoid duplicate code with onClickedItem().}}
\DoxyCodeLine{02104   \textcolor{keywordflow}{if} (0 <= index \&\& index < (\textcolor{keywordtype}{int})m\_items.size()) \{}
\DoxyCodeLine{02105     \textcolor{comment}{// if the folder is clicked, then move the current folder}}
\DoxyCodeLine{02106     \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = m\_items[index].m\_path;}
\DoxyCodeLine{02107     \textcolor{keywordflow}{if} (m\_items[index].m\_isFolder) \{}
\DoxyCodeLine{02108       setFolder(fp, \textcolor{keyword}{true});}
\DoxyCodeLine{02109       QModelIndex index = m\_folderTreeView-\/>currentIndex();}
\DoxyCodeLine{02110       \textcolor{keywordflow}{if} (index.isValid()) m\_folderTreeView-\/>scrollTo(index);}
\DoxyCodeLine{02111     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{02112       emit filePathDoubleClicked(fp);}
\DoxyCodeLine{02113   \}}
\DoxyCodeLine{02114 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a81913a1b170f4288f0127adb286ddbaa}\label{class_file_browser_a81913a1b170f4288f0127adb286ddbaa}} 
\index{FileBrowser@{FileBrowser}!onFileSystemChanged@{onFileSystemChanged}}
\index{onFileSystemChanged@{onFileSystemChanged}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{onFileSystemChanged}{onFileSystemChanged}}
{\footnotesize\ttfamily void File\+Browser\+::on\+File\+System\+Changed (\begin{DoxyParamCaption}\item[{const QString \&}]{folder\+Path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

update the current folder when changes detected from QFile\+System\+Watcher 
\begin{DoxyCode}{0}
\DoxyCodeLine{00413                                                                \{}
\DoxyCodeLine{00414   \textcolor{keywordflow}{if} (folderPath != m\_folder.getQString()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00415   \textcolor{comment}{// changes may create/delete of folder, so update the DvDirModel}}
\DoxyCodeLine{00416   QModelIndex parentFolderIndex = m\_folderTreeView-\/>currentIndex();}
\DoxyCodeLine{00417   DvDirModel::instance()-\/>refresh(parentFolderIndex);}
\DoxyCodeLine{00418 }
\DoxyCodeLine{00419   refreshCurrentFolderItems();}
\DoxyCodeLine{00420 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_ad557583ab2c6738c85b2d90a777218c1}\label{class_file_browser_ad557583ab2c6738c85b2d90a777218c1}} 
\index{FileBrowser@{FileBrowser}!onFolderEdited@{onFolderEdited}}
\index{onFolderEdited@{onFolderEdited}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{onFolderEdited}{onFolderEdited}}
{\footnotesize\ttfamily void File\+Browser\+::on\+Folder\+Edited (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

when the m\+\_\+folder\+Name is edited, move the current folder accordingly 
\begin{DoxyCode}{0}
\DoxyCodeLine{00302                                  \{}
\DoxyCodeLine{00303   \mbox{\hyperlink{class_t_file_path}{TFilePath}} inputPath(m\_folderName-\/>text().toStdWString());}
\DoxyCodeLine{00304   QModelIndex index = DvDirModel::instance()-\/>getIndexByPath(inputPath);}
\DoxyCodeLine{00305 }
\DoxyCodeLine{00306   \textcolor{comment}{// If there is no node matched}}
\DoxyCodeLine{00307   \textcolor{keywordflow}{if} (!index.isValid()) \{}
\DoxyCodeLine{00308     QMessageBox::warning(\textcolor{keyword}{this}, tr(\textcolor{stringliteral}{"{}Open folder failed"{}}),}
\DoxyCodeLine{00309                          tr(\textcolor{stringliteral}{"{}The input folder path was invalid."{}}));}
\DoxyCodeLine{00310     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00311   \}}
\DoxyCodeLine{00312   m\_folderTreeView-\/>collapseAll();}
\DoxyCodeLine{00313 }
\DoxyCodeLine{00314   m\_folderTreeView-\/>setCurrentIndex(index);}
\DoxyCodeLine{00315 }
\DoxyCodeLine{00316   \textcolor{comment}{// expand the folder tree}}
\DoxyCodeLine{00317   QModelIndex tmpIndex = index;}
\DoxyCodeLine{00318   \textcolor{keywordflow}{while} (tmpIndex.isValid()) \{}
\DoxyCodeLine{00319     m\_folderTreeView-\/>expand(tmpIndex);}
\DoxyCodeLine{00320     tmpIndex = tmpIndex.parent();}
\DoxyCodeLine{00321   \}}
\DoxyCodeLine{00322 }
\DoxyCodeLine{00323   m\_folderTreeView-\/>scrollTo(index);}
\DoxyCodeLine{00324   m\_folderTreeView-\/>update();}
\DoxyCodeLine{00325 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a5afb575b35ecec62c2ceba974a414715}\label{class_file_browser_a5afb575b35ecec62c2ceba974a414715}} 
\index{FileBrowser@{FileBrowser}!onFwdButtonPushed@{onFwdButtonPushed}}
\index{onFwdButtonPushed@{onFwdButtonPushed}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{onFwdButtonPushed}{onFwdButtonPushed}}
{\footnotesize\ttfamily void File\+Browser\+::on\+Fwd\+Button\+Pushed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00384                                     \{}
\DoxyCodeLine{00385   \textcolor{keywordflow}{if} (m\_currentPosition >= m\_indexHistoryList.size() -\/ 1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00386   m\_currentPosition++;}
\DoxyCodeLine{00387   QModelIndex currentIndex = m\_indexHistoryList[m\_currentPosition];}
\DoxyCodeLine{00388   m\_folderTreeView-\/>setCurrentIndex(currentIndex);}
\DoxyCodeLine{00389   m\_folderTreeView-\/>collapseAll();}
\DoxyCodeLine{00390   \textcolor{keywordflow}{while} (currentIndex.isValid()) \{}
\DoxyCodeLine{00391     currentIndex = currentIndex.parent();}
\DoxyCodeLine{00392     m\_folderTreeView-\/>expand(currentIndex);}
\DoxyCodeLine{00393   \}}
\DoxyCodeLine{00394   m\_folderTreeView-\/>update();}
\DoxyCodeLine{00395 }
\DoxyCodeLine{00396   refreshHistoryButtons();}
\DoxyCodeLine{00397 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a99908174d6164d025db0747cd6cf005a}\label{class_file_browser_a99908174d6164d025db0747cd6cf005a}} 
\index{FileBrowser@{FileBrowser}!onSelectedItems@{onSelectedItems}}
\index{onSelectedItems@{onSelectedItems}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{onSelectedItems}{onSelectedItems}}
{\footnotesize\ttfamily void File\+Browser\+::on\+Selected\+Items (\begin{DoxyParamCaption}\item[{const std\+::set$<$ int $>$ \&}]{indexes }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02063                                                             \{}
\DoxyCodeLine{02064   std::set<TFilePath> filePaths;}
\DoxyCodeLine{02065   std::set<int>::const\_iterator it;}
\DoxyCodeLine{02066 }
\DoxyCodeLine{02067   \textcolor{comment}{// pass the frameId list for reuse}}
\DoxyCodeLine{02068   std::list<std::vector<TFrameId>> frameIDs;}
\DoxyCodeLine{02069 }
\DoxyCodeLine{02070   \textcolor{keywordflow}{if} (indexes.empty()) \{  \textcolor{comment}{// inform selection is released}}
\DoxyCodeLine{02071     emit filePathsSelected(filePaths, frameIDs);}
\DoxyCodeLine{02072     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02073   \}}
\DoxyCodeLine{02074 }
\DoxyCodeLine{02075   \textcolor{keywordflow}{for} (it = indexes.begin(); it != indexes.end(); ++it) \{}
\DoxyCodeLine{02076     filePaths.insert(m\_items[*it].m\_path);}
\DoxyCodeLine{02077     frameIDs.insert(frameIDs.begin(), m\_items[*it].m\_frameIds);}
\DoxyCodeLine{02078   \}}
\DoxyCodeLine{02079 }
\DoxyCodeLine{02080   \textcolor{comment}{// reuse the list of TFrameId in order to skip loadInfo() when loading the}}
\DoxyCodeLine{02081   \textcolor{comment}{// level with sequential frames.}}
\DoxyCodeLine{02082   emit filePathsSelected(filePaths, frameIDs);}
\DoxyCodeLine{02083 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_af6d5e3e1d6722a7341369eaa95931b05}\label{class_file_browser_af6d5e3e1d6722a7341369eaa95931b05}} 
\index{FileBrowser@{FileBrowser}!onTreeFolderChanged@{onTreeFolderChanged}}
\index{onTreeFolderChanged@{onTreeFolderChanged}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{onTreeFolderChanged}{onTreeFolderChanged}}
{\footnotesize\ttfamily void File\+Browser\+::on\+Tree\+Folder\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01476                                       \{}
\DoxyCodeLine{01477   \mbox{\hyperlink{class_dv_dir_model_node}{DvDirModelNode}} *node = m\_folderTreeView-\/>getCurrentNode();}
\DoxyCodeLine{01478   \textcolor{keywordflow}{if} (node)}
\DoxyCodeLine{01479     node-\/>visualizeContent(\textcolor{keyword}{this});}
\DoxyCodeLine{01480   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01481     setFolder(\mbox{\hyperlink{class_t_file_path}{TFilePath}}());}
\DoxyCodeLine{01482   m\_itemViewer-\/>resetVerticalScrollBar();}
\DoxyCodeLine{01483   m\_itemViewer-\/>updateContentSize();}
\DoxyCodeLine{01484   m\_itemViewer-\/>getPanel()-\/>update();}
\DoxyCodeLine{01485   m\_frameCountReader.stopReading();}
\DoxyCodeLine{01486   IconGenerator::instance()-\/>clearRequests();}
\DoxyCodeLine{01487 }
\DoxyCodeLine{01488   \mbox{\hyperlink{class_dv_dir_model_file_folder_node}{DvDirModelFileFolderNode}} *fileFolderNode =}
\DoxyCodeLine{01489       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_model_file_folder_node}{DvDirModelFileFolderNode}} *\textcolor{keyword}{>}(node);}
\DoxyCodeLine{01490   \textcolor{keywordflow}{if} (fileFolderNode) emit treeFolderChanged(fileFolderNode-\/>getPath());}
\DoxyCodeLine{01491 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_afc1ca7a520de3a7bf976d5dd277b4702}\label{class_file_browser_afc1ca7a520de3a7bf976d5dd277b4702}} 
\index{FileBrowser@{FileBrowser}!onVersionControlCommandDone@{onVersionControlCommandDone}}
\index{onVersionControlCommandDone@{onVersionControlCommandDone}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{onVersionControlCommandDone}{onVersionControlCommandDone}}
{\footnotesize\ttfamily void File\+Browser\+::on\+Version\+Control\+Command\+Done (\begin{DoxyParamCaption}\item[{const QString\+List \&}]{files }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00502                                                                       \{}
\DoxyCodeLine{00503   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *node = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{00504       m\_folderTreeView-\/>getCurrentNode());}
\DoxyCodeLine{00505   \textcolor{keywordflow}{if} (!node) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00506 }
\DoxyCodeLine{00507   \textcolor{comment}{// Refresh the tree view and hence the version control status of each item}}
\DoxyCodeLine{00508   m\_folderTreeView-\/>refreshVersionControl(node);}
\DoxyCodeLine{00509 }
\DoxyCodeLine{00510   \textcolor{comment}{// Get the current scene}}
\DoxyCodeLine{00511   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{00512   std::vector<TXshLevel *> levels;}
\DoxyCodeLine{00513   scene-\/>\mbox{\hyperlink{class_toonz_scene_ac1a8bf0d2cec4f59c87b0001991264b5}{getLevelSet}}()-\/>listLevels(levels);}
\DoxyCodeLine{00514   QMap<TFilePath, TXshLevel *> sceneLevelPaths;}
\DoxyCodeLine{00515   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < levels.size(); i++)}
\DoxyCodeLine{00516     sceneLevelPaths[scene-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(levels[i]-\/>getPath())] = levels[i];}
\DoxyCodeLine{00517 }
\DoxyCodeLine{00518   \mbox{\hyperlink{class_t_level_set}{TLevelSet}} *levelSetToCheck = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_level_set}{TLevelSet}};}
\DoxyCodeLine{00519 }
\DoxyCodeLine{00520   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < files.size(); i++) \{}
\DoxyCodeLine{00521     \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(files.at(i).toStdWString());}
\DoxyCodeLine{00522     \textcolor{keywordflow}{if} (!path.isAbsolute()) \{}
\DoxyCodeLine{00523       \mbox{\hyperlink{class_t_file_path}{TFilePath}} tempPath = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(node-\/>getPath()) + path;}
\DoxyCodeLine{00524       \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(path).doesExist()) \{}
\DoxyCodeLine{00525         \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *parent =}
\DoxyCodeLine{00526             \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(node-\/>getParent());}
\DoxyCodeLine{00527         \textcolor{keywordflow}{while} (parent \&\& !\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(tempPath).doesExist()) \{}
\DoxyCodeLine{00528           tempPath = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(node-\/>getPath()) + path;}
\DoxyCodeLine{00529           parent = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(parent-\/>getParent());}
\DoxyCodeLine{00530         \}}
\DoxyCodeLine{00531         path = tempPath;}
\DoxyCodeLine{00532       \}}
\DoxyCodeLine{00533     \}}
\DoxyCodeLine{00534 }
\DoxyCodeLine{00535     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(path).doesExist()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00536 }
\DoxyCodeLine{00537     \textcolor{comment}{// Invalidate icons}}
\DoxyCodeLine{00538     IconGenerator::instance()-\/>invalidate(path);}
\DoxyCodeLine{00539 }
\DoxyCodeLine{00540     \textcolor{comment}{// TODO: Scene checking (could be useful)}}
\DoxyCodeLine{00541 }
\DoxyCodeLine{00542     \textcolor{comment}{// Level check}}
\DoxyCodeLine{00543     \textcolor{keywordflow}{if} (!sceneLevelPaths.isEmpty() \&\& sceneLevelPaths.contains(path)) \{}
\DoxyCodeLine{00544       \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level    = sceneLevelPaths.value(path);}
\DoxyCodeLine{00545       \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{00546       \textcolor{keywordflow}{if} (sl) \{}
\DoxyCodeLine{00547         levelSetToCheck-\/>insertLevel(sl);}
\DoxyCodeLine{00548         sl-\/>updateReadOnly();}
\DoxyCodeLine{00549       \}}
\DoxyCodeLine{00550     \}}
\DoxyCodeLine{00551   \}}
\DoxyCodeLine{00552 }
\DoxyCodeLine{00553   VersionControlManager::instance()-\/>setFrameRange(levelSetToCheck, \textcolor{keyword}{true});}
\DoxyCodeLine{00554 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a676a9b612c95927fbf93398de4c7f2d3}\label{class_file_browser_a676a9b612c95927fbf93398de4c7f2d3}} 
\index{FileBrowser@{FileBrowser}!putFrameRangeVersionControl@{putFrameRangeVersionControl}}
\index{putFrameRangeVersionControl@{putFrameRangeVersionControl}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{putFrameRangeVersionControl}{putFrameRangeVersionControl}}
{\footnotesize\ttfamily void File\+Browser\+::put\+Frame\+Range\+Version\+Control (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00234                                               \{}
\DoxyCodeLine{00235   QString file;}
\DoxyCodeLine{00236   QString path;}
\DoxyCodeLine{00237   setupVersionControlCommand(file, path);}
\DoxyCodeLine{00238   \textcolor{keywordflow}{if} (file.isEmpty() || path.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00239 }
\DoxyCodeLine{00240   VersionControl::instance()-\/>commitFrameRange(\textcolor{keyword}{this}, path, file);}
\DoxyCodeLine{00241 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_adb544d2cec35e2dd94b75c29809dc769}\label{class_file_browser_adb544d2cec35e2dd94b75c29809dc769}} 
\index{FileBrowser@{FileBrowser}!putVersionControl@{putVersionControl}}
\index{putVersionControl@{putVersionControl}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{putVersionControl}{putVersionControl}}
{\footnotesize\ttfamily void File\+Browser\+::put\+Version\+Control (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00418                                     \{}
\DoxyCodeLine{00419   QStringList files;}
\DoxyCodeLine{00420   QString path;}
\DoxyCodeLine{00421 }
\DoxyCodeLine{00422   \textcolor{keywordtype}{int} sceneIconsCount = 0;}
\DoxyCodeLine{00423   setupVersionControlCommand(files, path, sceneIconsCount);}
\DoxyCodeLine{00424   \textcolor{keywordflow}{if} (files.isEmpty() || path.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00425   VersionControl::instance()-\/>commit(\textcolor{keyword}{this}, path, files, \textcolor{keyword}{false}, sceneIconsCount);}
\DoxyCodeLine{00426 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_ab696d161f02263fc1437d4d954ccc74a}\label{class_file_browser_ab696d161f02263fc1437d4d954ccc74a}} 
\index{FileBrowser@{FileBrowser}!refresh@{refresh}}
\index{refresh@{refresh}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{refresh}{refresh}}
{\footnotesize\ttfamily void File\+Browser\+::refresh (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02155                           \{}
\DoxyCodeLine{02156   \mbox{\hyperlink{class_t_file_path}{TFilePath}} originalFolder(}
\DoxyCodeLine{02157       m\_folder);  \textcolor{comment}{// setFolder is invoked by Qt throughout the following...}}
\DoxyCodeLine{02158 }
\DoxyCodeLine{02159   \textcolor{keywordtype}{int} dx                   = m\_folderTreeView-\/>verticalScrollBar()-\/>value();}
\DoxyCodeLine{02160   \mbox{\hyperlink{class_dv_dir_model_node}{DvDirModelNode}} *rootNode = DvDirModel::instance()-\/>getNode(QModelIndex());}
\DoxyCodeLine{02161 }
\DoxyCodeLine{02162   QModelIndex index = DvDirModel::instance()-\/>getIndexByNode(rootNode);}
\DoxyCodeLine{02163 }
\DoxyCodeLine{02164   \textcolor{keywordtype}{bool} vcEnabled = m\_folderTreeView-\/>refreshVersionControlEnabled();}
\DoxyCodeLine{02165 }
\DoxyCodeLine{02166   m\_folderTreeView-\/>setRefreshVersionControlEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{02167   DvDirModel::instance()-\/>refreshFolderChild(index);}
\DoxyCodeLine{02168   m\_folderTreeView-\/>setRefreshVersionControlEnabled(vcEnabled);}
\DoxyCodeLine{02169 }
\DoxyCodeLine{02170   QList<DvDirModelNode *> expandedNodes;}
\DoxyCodeLine{02171   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{02172   \textcolor{keywordflow}{for} (i = 0; i < rootNode-\/>getChildCount(); i++)}
\DoxyCodeLine{02173     getExpandedFolders(rootNode-\/>getChild(i), expandedNodes);}
\DoxyCodeLine{02174 }
\DoxyCodeLine{02175   \textcolor{keywordflow}{for} (i = 0; i < expandedNodes.size(); i++) \{}
\DoxyCodeLine{02176     \mbox{\hyperlink{class_dv_dir_model_node}{DvDirModelNode}} *node = expandedNodes[i];}
\DoxyCodeLine{02177     \textcolor{keywordflow}{if} (!node || !node-\/>hasChildren()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02178     QModelIndex ind = DvDirModel::instance()-\/>getIndexByNode(node);}
\DoxyCodeLine{02179     \textcolor{keywordflow}{if} (!ind.isValid()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02180     m\_folderTreeView-\/>expand(ind);}
\DoxyCodeLine{02181   \}}
\DoxyCodeLine{02182   m\_folderTreeView-\/>verticalScrollBar()-\/>setValue(dx);}
\DoxyCodeLine{02183 }
\DoxyCodeLine{02184   setFolder(originalFolder, \textcolor{keyword}{false}, \textcolor{keyword}{true});}
\DoxyCodeLine{02185 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_ac49f77ccdb2ec2a2bd6fddd3879e9d8c}\label{class_file_browser_ac49f77ccdb2ec2a2bd6fddd3879e9d8c}} 
\index{FileBrowser@{FileBrowser}!refreshData@{refreshData}}
\index{refreshData@{refreshData}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{refreshData()}{refreshData()}}
{\footnotesize\ttfamily void File\+Browser\+::refresh\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

for all items in the folder, retrieve the file names(m\+\_\+name) from the paths(m\+\_\+path) 

Reimplemented from \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00824                               \{}
\DoxyCodeLine{00825   std::vector<Item>::iterator it;}
\DoxyCodeLine{00826   \textcolor{keywordflow}{for} (it = m\_items.begin(); it != m\_items.end(); ++it) \{}
\DoxyCodeLine{00827     \textcolor{keywordflow}{if} (it-\/>m\_name == QString(\textcolor{stringliteral}{"{}"{}}))}
\DoxyCodeLine{00828       it-\/>m\_name = toQString(it-\/>m\_path.withoutParentDir());}
\DoxyCodeLine{00829   \}}
\DoxyCodeLine{00830 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00711}{set\+Unregistered\+Folder()}}.

\mbox{\Hypertarget{class_file_browser_a0c9112c1738e391a947730c33cf5685c}\label{class_file_browser_a0c9112c1738e391a947730c33cf5685c}} 
\index{FileBrowser@{FileBrowser}!refreshFolder@{refreshFolder}}
\index{refreshFolder@{refreshFolder}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{refreshFolder()}{refreshFolder()}}
{\footnotesize\ttfamily void File\+Browser\+::refresh\+Folder (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{folder }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02118                                                            \{}
\DoxyCodeLine{02119   std::set<FileBrowser *>::iterator it;}
\DoxyCodeLine{02120   \textcolor{keywordflow}{for} (it = activeBrowsers.begin(); it != activeBrowsers.end(); ++it) \{}
\DoxyCodeLine{02121     \mbox{\hyperlink{class_file_browser}{FileBrowser}} *browser = *it;}
\DoxyCodeLine{02122     DvDirModel::instance()-\/>refreshFolder(folderPath);}
\DoxyCodeLine{02123     \textcolor{keywordflow}{if} (browser-\/>getFolder() == folderPath) \{}
\DoxyCodeLine{02124       browser-\/>setFolder(folderPath, \textcolor{keyword}{false}, \textcolor{keyword}{true});}
\DoxyCodeLine{02125     \}}
\DoxyCodeLine{02126   \}}
\DoxyCodeLine{02127 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a16d32bd741817680f2cdfbcec2ce0fc5}\label{class_file_browser_a16d32bd741817680f2cdfbcec2ce0fc5}} 
\index{FileBrowser@{FileBrowser}!refreshHistoryButtons@{refreshHistoryButtons}}
\index{refreshHistoryButtons@{refreshHistoryButtons}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{refreshHistoryButtons()}{refreshHistoryButtons()}}
{\footnotesize\ttfamily void File\+Browser\+::refresh\+History\+Buttons (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00360                                         \{}
\DoxyCodeLine{00361   emit historyChanged((m\_currentPosition != 0),}
\DoxyCodeLine{00362                       (m\_currentPosition != m\_indexHistoryList.size() -\/ 1));}
\DoxyCodeLine{00363 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a2c90a47576cba4145c8cb20d8c5feedc}\label{class_file_browser_a2c90a47576cba4145c8cb20d8c5feedc}} 
\index{FileBrowser@{FileBrowser}!removeFilterType@{removeFilterType}}
\index{removeFilterType@{removeFilterType}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{removeFilterType()}{removeFilterType()}}
{\footnotesize\ttfamily void File\+Browser\+::remove\+Filter\+Type (\begin{DoxyParamCaption}\item[{const QString \&}]{type }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00525                                                       \{}
\DoxyCodeLine{00526   m\_filter.removeAll(type);}
\DoxyCodeLine{00527 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_aba3a6a02ca1ca524eea3a72c8fca0c0f}\label{class_file_browser_aba3a6a02ca1ca524eea3a72c8fca0c0f}} 
\index{FileBrowser@{FileBrowser}!renameAsToonzLevel@{renameAsToonzLevel}}
\index{renameAsToonzLevel@{renameAsToonzLevel}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{renameAsToonzLevel}{renameAsToonzLevel}}
{\footnotesize\ttfamily void File\+Browser\+::rename\+As\+Toonz\+Level (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01871                                      \{}
\DoxyCodeLine{01872   std::vector<TFilePath> filePaths;}
\DoxyCodeLine{01873   \mbox{\hyperlink{class_file_selection}{FileSelection}} *fs =}
\DoxyCodeLine{01874       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_file_selection}{FileSelection}} *\textcolor{keyword}{>}(m\_itemViewer-\/>getPanel()-\/>getSelection());}
\DoxyCodeLine{01875   \textcolor{keywordflow}{if} (!fs) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01876   fs-\/>getSelectedFiles(filePaths);}
\DoxyCodeLine{01877   \textcolor{keywordflow}{if} (filePaths.size() != 1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01878 }
\DoxyCodeLine{01879   doRenameAsToonzLevel(QString::fromStdWString(filePaths[0].getWideString()));}
\DoxyCodeLine{01880 }
\DoxyCodeLine{01881   QApplication::restoreOverrideCursor();}
\DoxyCodeLine{01882 }
\DoxyCodeLine{01883   FileBrowser::refreshFolder(filePaths[0].getParentDir());}
\DoxyCodeLine{01884 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_ad61e9472003d879d157c4eede04c7b06}\label{class_file_browser_ad61e9472003d879d157c4eede04c7b06}} 
\index{FileBrowser@{FileBrowser}!renameFile@{renameFile}}
\index{renameFile@{renameFile}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{renameFile()}{renameFile()}}
{\footnotesize\ttfamily bool File\+Browser\+::rename\+File (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp,  }\item[{QString}]{new\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01054                                                            \{}
\DoxyCodeLine{01055   \textcolor{keywordflow}{if} (isSpaceString(newName)) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01056 }
\DoxyCodeLine{01057   \mbox{\hyperlink{class_t_file_path}{TFilePath}} newFp(newName.toStdWString());}
\DoxyCodeLine{01058   \textcolor{keywordflow}{if} (newFp.getType() != \textcolor{stringliteral}{"{}"{}} \&\& newFp.getType() != fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}()) \{}
\DoxyCodeLine{01059     DVGui::error(tr(\textcolor{stringliteral}{"{}Can't change file extension"{}}));}
\DoxyCodeLine{01060     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01061   \}}
\DoxyCodeLine{01062   \textcolor{keywordflow}{if} (newFp.getType() == \textcolor{stringliteral}{"{}"{}}) newFp = newFp.withType(fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}());}
\DoxyCodeLine{01063   \textcolor{keywordflow}{if} (newFp.getFrame() != TFrameId::EMPTY\_FRAME \&\&}
\DoxyCodeLine{01064       newFp.getFrame() != TFrameId::NO\_FRAME) \{}
\DoxyCodeLine{01065     DVGui::error(tr(\textcolor{stringliteral}{"{}Can't set a drawing number"{}}));}
\DoxyCodeLine{01066     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01067   \}}
\DoxyCodeLine{01068   \textcolor{keywordflow}{if} (newFp.getDots() != fp.\mbox{\hyperlink{class_t_file_path_a698bbf714436eb6923359044900cde2b}{getDots}}()) \{}
\DoxyCodeLine{01069     \textcolor{keywordflow}{if} (fp.\mbox{\hyperlink{class_t_file_path_a698bbf714436eb6923359044900cde2b}{getDots}}() == \textcolor{stringliteral}{"{}."{}})}
\DoxyCodeLine{01070       newFp = newFp.withNoFrame();}
\DoxyCodeLine{01071     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (fp.\mbox{\hyperlink{class_t_file_path_a698bbf714436eb6923359044900cde2b}{getDots}}() == \textcolor{stringliteral}{"{}.."{}})}
\DoxyCodeLine{01072       newFp = newFp.withFrame(TFrameId::EMPTY\_FRAME);}
\DoxyCodeLine{01073   \}}
\DoxyCodeLine{01074   newFp = newFp.withParentDir(fp.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}());}
\DoxyCodeLine{01075 }
\DoxyCodeLine{01076   \textcolor{comment}{// se sono uguali non devo rinominare nulla}}
\DoxyCodeLine{01077   \textcolor{keywordflow}{if} (newFp == fp) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01078 }
\DoxyCodeLine{01079   \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(newFp)) \{}
\DoxyCodeLine{01080     DVGui::error(tr(\textcolor{stringliteral}{"{}Can't rename. File already exists: "{}}) + toQString(newFp));}
\DoxyCodeLine{01081     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01082   \}}
\DoxyCodeLine{01083 }
\DoxyCodeLine{01084   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01085     TSystem::renameFileOrLevel\_throw(newFp, fp, \textcolor{keyword}{true});}
\DoxyCodeLine{01086     IconGenerator::instance()-\/>remove(fp);}
\DoxyCodeLine{01087     \textcolor{keywordflow}{if} (fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}}) \{}
\DoxyCodeLine{01088       \textcolor{comment}{/* TFilePath folder = fp.getParentDir() + (fp.getName() + "{}\_files"{});}}
\DoxyCodeLine{01089 \textcolor{comment}{TFilePath newFolder = newFp.getParentDir() + (newFp.getName() + "{}\_files"{});}}
\DoxyCodeLine{01090 \textcolor{comment}{TSystem::renameFile(newFolder, folder);}}
\DoxyCodeLine{01091 \textcolor{comment}{*/}}
\DoxyCodeLine{01092       \mbox{\hyperlink{class_t_file_path}{TFilePath}} sceneIconFp    = \mbox{\hyperlink{class_toonz_scene_a2d97e9b3647bb45c0c992a6c92c659eb}{ToonzScene::getIconPath}}(fp);}
\DoxyCodeLine{01093       \mbox{\hyperlink{class_t_file_path}{TFilePath}} sceneIconNewFp = \mbox{\hyperlink{class_toonz_scene_a2d97e9b3647bb45c0c992a6c92c659eb}{ToonzScene::getIconPath}}(newFp);}
\DoxyCodeLine{01094       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(sceneIconFp).doesExist()) \{}
\DoxyCodeLine{01095         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(sceneIconNewFp).doesExist())}
\DoxyCodeLine{01096           TSystem::deleteFile(sceneIconNewFp);}
\DoxyCodeLine{01097         TSystem::renameFile(sceneIconNewFp, sceneIconFp);}
\DoxyCodeLine{01098       \}}
\DoxyCodeLine{01099     \}}
\DoxyCodeLine{01100 }
\DoxyCodeLine{01101   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{01102     DVGui::error(tr(\textcolor{stringliteral}{"{}Couldn't rename "{}}) + toQString(fp) + \textcolor{stringliteral}{"{} to "{}} +}
\DoxyCodeLine{01103                  toQString(newFp));}
\DoxyCodeLine{01104     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01105   \}}
\DoxyCodeLine{01106 }
\DoxyCodeLine{01107   fp = newFp;}
\DoxyCodeLine{01108   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01109 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a3a30f40f104f764b1d155e594d63cf3a}\label{class_file_browser_a3a30f40f104f764b1d155e594d63cf3a}} 
\index{FileBrowser@{FileBrowser}!renameItem@{renameItem}}
\index{renameItem@{renameItem}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{renameItem()}{renameItem()}}
{\footnotesize\ttfamily void File\+Browser\+::rename\+Item (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{const QString \&}]{new\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01015                                                               \{}
\DoxyCodeLine{01016   \textcolor{keywordflow}{if} (getFolder() == \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01017   \textcolor{keywordflow}{if} (index < 0 || index >= (\textcolor{keywordtype}{int})m\_items.size()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01018 }
\DoxyCodeLine{01019   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp    = m\_items[index].m\_path;}
\DoxyCodeLine{01020   \mbox{\hyperlink{class_t_file_path}{TFilePath}} newFp = fp;}
\DoxyCodeLine{01021   \textcolor{keywordflow}{if} (renameFile(newFp, newName)) \{}
\DoxyCodeLine{01022     m\_items[index].m\_name = QString::fromStdWString(newFp.getLevelNameW());}
\DoxyCodeLine{01023     m\_items[index].m\_path = newFp;}
\DoxyCodeLine{01024 }
\DoxyCodeLine{01025     \textcolor{comment}{// ho rinominato anche la palette devo aggiornarla.}}
\DoxyCodeLine{01026     \textcolor{keywordflow}{if} (newFp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tlv"{}} || newFp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tzp"{}} ||}
\DoxyCodeLine{01027         newFp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tzu"{}}) \{}
\DoxyCodeLine{01028       \textcolor{keyword}{const} \textcolor{keywordtype}{char} *type = (newFp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tlv"{}}) ? \textcolor{stringliteral}{"{}tpl"{}} : \textcolor{stringliteral}{"{}plt"{}};}
\DoxyCodeLine{01029       \textcolor{keywordtype}{int} paletteIndex = findIndexWithPath(fp.withNoFrame().\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(type));}
\DoxyCodeLine{01030       \textcolor{keywordflow}{if} (paletteIndex >= 0) \{}
\DoxyCodeLine{01031         \mbox{\hyperlink{class_t_file_path}{TFilePath}} palettePath = newFp.withNoFrame().\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(type);}
\DoxyCodeLine{01032         m\_items[paletteIndex].m\_name =}
\DoxyCodeLine{01033             QString::fromStdWString(palettePath.getLevelNameW());}
\DoxyCodeLine{01034         m\_items[paletteIndex].m\_path = palettePath;}
\DoxyCodeLine{01035       \}}
\DoxyCodeLine{01036     \}}
\DoxyCodeLine{01037     m\_itemViewer-\/>update();}
\DoxyCodeLine{01038 }
\DoxyCodeLine{01039     \textcolor{keywordflow}{if} (fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}}) \{}
\DoxyCodeLine{01040       \textcolor{comment}{// ho cambiato il folder \_files. Devo aggiornare il folder che lo contiene}}
\DoxyCodeLine{01041       \textcolor{comment}{// nel tree view}}
\DoxyCodeLine{01042       QModelIndex index = m\_folderTreeView-\/>currentIndex();}
\DoxyCodeLine{01043       \textcolor{keywordflow}{if} (index.isValid()) \{}
\DoxyCodeLine{01044         DvDirModel::instance()-\/>refresh(index);}
\DoxyCodeLine{01045         \textcolor{comment}{// m\_folderTreeView-\/>getDvDirModel()-\/>refresh(index);}}
\DoxyCodeLine{01046         m\_folderTreeView-\/>update();}
\DoxyCodeLine{01047       \}}
\DoxyCodeLine{01048     \}}
\DoxyCodeLine{01049   \}}
\DoxyCodeLine{01050 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a48fbc14b54e1666caefcb2de52e15694}\label{class_file_browser_a48fbc14b54e1666caefcb2de52e15694}} 
\index{FileBrowser@{FileBrowser}!revertFrameRangeVersionControl@{revertFrameRangeVersionControl}}
\index{revertFrameRangeVersionControl@{revertFrameRangeVersionControl}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{revertFrameRangeVersionControl}{revertFrameRangeVersionControl}}
{\footnotesize\ttfamily void File\+Browser\+::revert\+Frame\+Range\+Version\+Control (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00245                                                  \{}
\DoxyCodeLine{00246   QString file;}
\DoxyCodeLine{00247   QString path;}
\DoxyCodeLine{00248   setupVersionControlCommand(file, path);}
\DoxyCodeLine{00249   \textcolor{keywordflow}{if} (file.isEmpty() || path.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00250 }
\DoxyCodeLine{00251   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *node = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{00252       m\_folderTreeView-\/>getCurrentNode());}
\DoxyCodeLine{00253   \textcolor{keywordflow}{if} (!node) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00254 }
\DoxyCodeLine{00255   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(path.toStdWString()) + file.toStdWString();}
\DoxyCodeLine{00256   \textcolor{keywordflow}{if} (fp.\mbox{\hyperlink{class_t_file_path_a698bbf714436eb6923359044900cde2b}{getDots}}() != \textcolor{stringliteral}{"{}.."{}}) \{}
\DoxyCodeLine{00257     \mbox{\hyperlink{struct_s_v_n_status}{SVNStatus}} s = node-\/>getVersionControlStatus(file);}
\DoxyCodeLine{00258 }
\DoxyCodeLine{00259     QString from     = QString::number(s.m\_editFrom);}
\DoxyCodeLine{00260     QString to       = QString::number(s.m\_editTo);}
\DoxyCodeLine{00261     QString userName = VersionControl::instance()-\/>getUserName();}
\DoxyCodeLine{00262     QString hostName = TSystem::getHostName();}
\DoxyCodeLine{00263 }
\DoxyCodeLine{00264     \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp(s.m\_path.toStdWString());}
\DoxyCodeLine{00265     QString tempFileName = QString::fromStdWString(fp.getWideName()) + \textcolor{stringliteral}{"{}\_"{}} +}
\DoxyCodeLine{00266                            userName + \textcolor{stringliteral}{"{}\_"{}} + hostName + \textcolor{stringliteral}{"{}\_"{}} + from + \textcolor{stringliteral}{"{}-\/"{}} + to +}
\DoxyCodeLine{00267                            \textcolor{stringliteral}{"{}."{}} + QString::fromStdString(fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}());}
\DoxyCodeLine{00268 }
\DoxyCodeLine{00269     \mbox{\hyperlink{class_t_file_path}{TFilePath}} fullPath = node-\/>getPath() + tempFileName.toStdWString();}
\DoxyCodeLine{00270 }
\DoxyCodeLine{00271     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(fullPath).doesExist())}
\DoxyCodeLine{00272       VersionControl::instance()-\/>revertFrameRange(\textcolor{keyword}{this}, path, file,}
\DoxyCodeLine{00273                                                    toQString(fullPath));}
\DoxyCodeLine{00274   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00275     \textcolor{comment}{// Use the hook file, if exist, as a tempFileName}}
\DoxyCodeLine{00276     QString tempFile;}
\DoxyCodeLine{00277 }
\DoxyCodeLine{00278     QDir dir(path);}
\DoxyCodeLine{00279     dir.setNameFilters(QStringList(\textcolor{stringliteral}{"{}*.xml"{}}));}
\DoxyCodeLine{00280     QStringList list = dir.entryList(QDir::Files | QDir::Hidden);}
\DoxyCodeLine{00281     \textcolor{keywordtype}{int} listCount    = list.size();}
\DoxyCodeLine{00282 }
\DoxyCodeLine{00283     \textcolor{keywordflow}{if} (listCount > 0) \{}
\DoxyCodeLine{00284       QString prefix = QString::fromStdWString(fp.getWideName()) + \textcolor{stringliteral}{"{}\_"{}} +}
\DoxyCodeLine{00285                        VersionControl::instance()-\/>getUserName() + \textcolor{stringliteral}{"{}\_"{}} +}
\DoxyCodeLine{00286                        TSystem::getHostName();}
\DoxyCodeLine{00287 }
\DoxyCodeLine{00288       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < listCount; i++) \{}
\DoxyCodeLine{00289         QString str = list.at(i);}
\DoxyCodeLine{00290         \textcolor{keywordflow}{if} (str.startsWith(prefix)) \{}
\DoxyCodeLine{00291           tempFile = str;}
\DoxyCodeLine{00292           tempFile.remove(\textcolor{stringliteral}{"{}\_hooks"{}});}
\DoxyCodeLine{00293           tempFile = path + \textcolor{stringliteral}{"{}/"{}} + tempFile;}
\DoxyCodeLine{00294           \textcolor{keywordflow}{break};}
\DoxyCodeLine{00295         \}}
\DoxyCodeLine{00296       \}}
\DoxyCodeLine{00297     \}}
\DoxyCodeLine{00298     VersionControl::instance()-\/>revertFrameRange(\textcolor{keyword}{this}, path, file, tempFile);}
\DoxyCodeLine{00299   \}}
\DoxyCodeLine{00300 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_ae2dcc825209d7ff519f8a02276e84019}\label{class_file_browser_ae2dcc825209d7ff519f8a02276e84019}} 
\index{FileBrowser@{FileBrowser}!revertVersionControl@{revertVersionControl}}
\index{revertVersionControl@{revertVersionControl}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{revertVersionControl}{revertVersionControl}}
{\footnotesize\ttfamily void File\+Browser\+::revert\+Version\+Control (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00430                                        \{}
\DoxyCodeLine{00431   QStringList files;}
\DoxyCodeLine{00432   QString path;}
\DoxyCodeLine{00433 }
\DoxyCodeLine{00434   \textcolor{keywordtype}{int} sceneIconsCount = 0;}
\DoxyCodeLine{00435   setupVersionControlCommand(files, path, sceneIconsCount);}
\DoxyCodeLine{00436   \textcolor{keywordflow}{if} (files.isEmpty() || path.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00437   VersionControl::instance()-\/>revert(\textcolor{keyword}{this}, path, files, \textcolor{keyword}{false}, sceneIconsCount);}
\DoxyCodeLine{00438 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a8c3d2b2ed9e82239b7306dde94d12f7d}\label{class_file_browser_a8c3d2b2ed9e82239b7306dde94d12f7d}} 
\index{FileBrowser@{FileBrowser}!selectNone@{selectNone}}
\index{selectNone@{selectNone}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{selectNone()}{selectNone()}}
{\footnotesize\ttfamily void File\+Browser\+::select\+None (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02278 \{ m\_itemViewer-\/>selectNone(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_adcca48a2a5d808850fdb93bed19c06f2}\label{class_file_browser_adcca48a2a5d808850fdb93bed19c06f2}} 
\index{FileBrowser@{FileBrowser}!selectParentDirectory@{selectParentDirectory}}
\index{selectParentDirectory@{selectParentDirectory}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{selectParentDirectory()}{selectParentDirectory()}}
{\footnotesize\ttfamily void File\+Browser\+::select\+Parent\+Directory (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00582 \{ m\_data-\/>m\_tree-\/>selectParent(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_ad6c9d849b8a37112908b591b070a9c2b}\label{class_file_browser_ad6c9d849b8a37112908b591b070a9c2b}} 
\index{FileBrowser@{FileBrowser}!setBackgroundColor@{setBackgroundColor}}
\index{setBackgroundColor@{setBackgroundColor}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{setBackgroundColor()}{setBackgroundColor()}}
{\footnotesize\ttfamily void File\+Browser\+::set\+Background\+Color (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_gui_color}{TGui\+Color}} \&}]{color }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_widget}{TWidget}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00545                                                            \{}
\DoxyCodeLine{00546   TWidget::setBackgroundColor(color);}
\DoxyCodeLine{00547   m\_data-\/>m\_panel-\/>setBackgroundColor(color);}
\DoxyCodeLine{00548   m\_data-\/>m\_tree-\/>setBackgroundColor(color);}
\DoxyCodeLine{00549 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_afe17afbf4b7e1385da225b7149bb6e24}\label{class_file_browser_afe17afbf4b7e1385da225b7149bb6e24}} 
\index{FileBrowser@{FileBrowser}!setCurrentDir@{setCurrentDir}}
\index{setCurrentDir@{setCurrentDir}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{setCurrentDir()}{setCurrentDir()}}
{\footnotesize\ttfamily void File\+Browser\+::set\+Current\+Dir (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{dir\+Path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00576                                                         \{}
\DoxyCodeLine{00577   m\_data-\/>m\_tree-\/>setCurrentDir(dirPath);}
\DoxyCodeLine{00578 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_aeac23c27d34c4a3f3e5f5705d65ed6ef}\label{class_file_browser_aeac23c27d34c4a3f3e5f5705d65ed6ef}} 
\index{FileBrowser@{FileBrowser}!setFileDblClickAction@{setFileDblClickAction}}
\index{setFileDblClickAction@{setFileDblClickAction}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{setFileDblClickAction()}{setFileDblClickAction()}}
{\footnotesize\ttfamily void File\+Browser\+::set\+File\+Dbl\+Click\+Action (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_generic_file_browser_action}{Generic\+File\+Browser\+Action}} $\ast$}]{action }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00559                                                                         \{}
\DoxyCodeLine{00560   m\_data-\/>m\_panel-\/>setFileDblClickAction(action);}
\DoxyCodeLine{00561 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_ab678ed432e20eeec84506d4d79a7d3c4}\label{class_file_browser_ab678ed432e20eeec84506d4d79a7d3c4}} 
\index{FileBrowser@{FileBrowser}!setFileSelChangeAction@{setFileSelChangeAction}}
\index{setFileSelChangeAction@{setFileSelChangeAction}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{setFileSelChangeAction()}{setFileSelChangeAction()}}
{\footnotesize\ttfamily void File\+Browser\+::set\+File\+Sel\+Change\+Action (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_generic_file_browser_action}{Generic\+File\+Browser\+Action}} $\ast$}]{action }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00553                                                                          \{}
\DoxyCodeLine{00554   m\_data-\/>m\_panel-\/>setFileSelChangeAction(action);}
\DoxyCodeLine{00555 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a3b32f80314c3282adbb03402862f27c0}\label{class_file_browser_a3b32f80314c3282adbb03402862f27c0}} 
\index{FileBrowser@{FileBrowser}!setFilter@{setFilter}}
\index{setFilter@{setFilter}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{setFilter()}{setFilter()}}
{\footnotesize\ttfamily void File\+Browser\+::set\+Filter (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classvector}{vector}}$<$ string $>$ \&}]{file\+Types }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00453                                                            \{}
\DoxyCodeLine{00454   m\_data-\/>m\_fileTypes = fileTypes;}
\DoxyCodeLine{00455   m\_data-\/>m\_panel-\/>setFilter(fileTypes);}
\DoxyCodeLine{00456 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_af393070c2aa12a119ac1872c9d90b140}\label{class_file_browser_af393070c2aa12a119ac1872c9d90b140}} 
\index{FileBrowser@{FileBrowser}!setFilterTypes@{setFilterTypes}}
\index{setFilterTypes@{setFilterTypes}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{setFilterTypes()}{setFilterTypes()}}
{\footnotesize\ttfamily void File\+Browser\+::set\+Filter\+Types (\begin{DoxyParamCaption}\item[{const QString\+List \&}]{types }\end{DoxyParamCaption})}

The set\+Filter\+Types function directly specifies the list of file types to be displayed in the file browser. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00515 \{ m\_filter = types; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a76d96b3118d5dd83fa72467ff37c2daa}\label{class_file_browser_a76d96b3118d5dd83fa72467ff37c2daa}} 
\index{FileBrowser@{FileBrowser}!setFolder@{setFolder}}
\index{setFolder@{setFolder}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{setFolder()}{setFolder()}}
{\footnotesize\ttfamily void File\+Browser\+::set\+Folder (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp,  }\item[{bool}]{expand\+Node = {\ttfamily false},  }\item[{bool}]{force\+Update = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00689                                               \{}
\DoxyCodeLine{00690   \textcolor{keywordflow}{if} (fp == m\_folder \&\& !forceUpdate) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00691 }
\DoxyCodeLine{00692   \textcolor{comment}{// set the current folder path}}
\DoxyCodeLine{00693   m\_folder        = fp;}
\DoxyCodeLine{00694   m\_dayDateString = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00695   \textcolor{comment}{// set the folder name}}
\DoxyCodeLine{00696   \textcolor{keywordflow}{if} (fp == \mbox{\hyperlink{class_t_file_path}{TFilePath}}())}
\DoxyCodeLine{00697     m\_folderName-\/>setText(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00698   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00699     m\_folderName-\/>setText(toQString(fp));}
\DoxyCodeLine{00700 }
\DoxyCodeLine{00701   refreshCurrentFolderItems();}
\DoxyCodeLine{00702 }
\DoxyCodeLine{00703   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(fp).isLink())}
\DoxyCodeLine{00704     m\_folderTreeView-\/>\mbox{\hyperlink{class_dv_dir_tree_view_a6475b17d974686909f41801c092f286e}{setCurrentNode}}(fp, expandNode);}
\DoxyCodeLine{00705 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a3a27da325420c515a4f5b01ad2e65eef}\label{class_file_browser_a3a27da325420c515a4f5b01ad2e65eef}} 
\index{FileBrowser@{FileBrowser}!setHistoryDay@{setHistoryDay}}
\index{setHistoryDay@{setHistoryDay}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{setHistoryDay()}{setHistoryDay()}}
{\footnotesize\ttfamily void File\+Browser\+::set\+History\+Day (\begin{DoxyParamCaption}\item[{std\+::string}]{day\+Date\+String }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00802                                                        \{}
\DoxyCodeLine{00803   m\_folder                = \mbox{\hyperlink{class_t_file_path}{TFilePath}}();}
\DoxyCodeLine{00804   m\_dayDateString         = dayDateString;}
\DoxyCodeLine{00805   \textcolor{keyword}{const} \mbox{\hyperlink{class_history_1_1_day}{History::Day}} *day = History::instance()-\/>getDay(dayDateString);}
\DoxyCodeLine{00806   m\_items.clear();}
\DoxyCodeLine{00807   \textcolor{keywordflow}{if} (day == 0) \{}
\DoxyCodeLine{00808     m\_folderName-\/>setText(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00809   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00810     m\_folderName-\/>setText(QString::fromStdString(dayDateString));}
\DoxyCodeLine{00811     std::vector<TFilePath> files;}
\DoxyCodeLine{00812     day-\/>getFiles(files);}
\DoxyCodeLine{00813     std::vector<TFilePath>::iterator it;}
\DoxyCodeLine{00814     \textcolor{keywordflow}{for} (it = files.begin(); it != files.end(); ++it)}
\DoxyCodeLine{00815       m\_items.push\_back(Item(*it));}
\DoxyCodeLine{00816   \}}
\DoxyCodeLine{00817   \mbox{\hyperlink{class_file_browser_ac49f77ccdb2ec2a2bd6fddd3879e9d8c}{refreshData}}();}
\DoxyCodeLine{00818 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_aee3f059ff741d12d0e8c862b7a7e6585}\label{class_file_browser_aee3f059ff741d12d0e8c862b7a7e6585}} 
\index{FileBrowser@{FileBrowser}!setUnregisteredFolder@{setUnregisteredFolder}}
\index{setUnregisteredFolder@{setUnregisteredFolder}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{setUnregisteredFolder()}{setUnregisteredFolder()}}
{\footnotesize\ttfamily void File\+Browser\+::set\+Unregistered\+Folder (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption})}

process when inputting the folder which is not registered in the folder tree (e.\+g. UNC path in Windows) 
\begin{DoxyCode}{0}
\DoxyCodeLine{00711                                                            \{}
\DoxyCodeLine{00712   \textcolor{keywordflow}{if} (fp != \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \{}
\DoxyCodeLine{00713     \mbox{\hyperlink{class_t_file_status}{TFileStatus}} fpStatus(fp);}
\DoxyCodeLine{00714     \textcolor{comment}{// if the item is link, then set the link target of it}}
\DoxyCodeLine{00715     \textcolor{keywordflow}{if} (fpStatus.isLink()) \{}
\DoxyCodeLine{00716       QFileInfo info(toQString(fp));}
\DoxyCodeLine{00717       setFolder(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(info.symLinkTarget().toStdWString()));}
\DoxyCodeLine{00718       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00719     \}}
\DoxyCodeLine{00720 }
\DoxyCodeLine{00721     \textcolor{comment}{// get both the folder \& file list by readDirectory and}}
\DoxyCodeLine{00722     \textcolor{comment}{// readDirectory\_Dir\_ReadExe}}
\DoxyCodeLine{00723     TFilePathSet folders;}
\DoxyCodeLine{00724     TFilePathSet files;}
\DoxyCodeLine{00725     \textcolor{comment}{// for updating m\_multiFileItemMap}}
\DoxyCodeLine{00726     TFilePathSet all\_files;}
\DoxyCodeLine{00727 }
\DoxyCodeLine{00728     \textcolor{keywordflow}{if} (fpStatus.doesExist() \&\& fpStatus.isDirectory() \&\&}
\DoxyCodeLine{00729         fpStatus.isReadable()) \{}
\DoxyCodeLine{00730       \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00731         TSystem::readDirectory(files, all\_files, fp);}
\DoxyCodeLine{00732         TSystem::readDirectory\_Dir\_ReadExe(folders, fp);}
\DoxyCodeLine{00733       \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00734       \}}
\DoxyCodeLine{00735     \}}
\DoxyCodeLine{00736 }
\DoxyCodeLine{00737     TFilePathSet::iterator it;}
\DoxyCodeLine{00738 }
\DoxyCodeLine{00739     \textcolor{comment}{// register all folder items}}
\DoxyCodeLine{00740     \textcolor{keywordflow}{for} (it = folders.begin(); it != folders.end(); ++it) \{}
\DoxyCodeLine{00741       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(*it).isLink())}
\DoxyCodeLine{00742         m\_items.push\_back(Item(*it, \textcolor{keyword}{true}, \textcolor{keyword}{true}));}
\DoxyCodeLine{00743       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00744         m\_items.push\_back(Item(*it, \textcolor{keyword}{true}, \textcolor{keyword}{false}));}
\DoxyCodeLine{00745     \}}
\DoxyCodeLine{00746 }
\DoxyCodeLine{00747     \textcolor{keywordflow}{for} (it = files.begin(); it != files.end(); ++it) \{}
\DoxyCodeLine{00748 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{00749       \textcolor{comment}{// include folder shortcut items}}
\DoxyCodeLine{00750       \textcolor{keywordflow}{if} (it-\/>getType() == \textcolor{stringliteral}{"{}lnk"{}}) \{}
\DoxyCodeLine{00751         \mbox{\hyperlink{class_t_file_status}{TFileStatus}} info(*it);}
\DoxyCodeLine{00752         \textcolor{keywordflow}{if} (info.isLink() \&\& info.isDirectory()) \{}
\DoxyCodeLine{00753           m\_items.push\_back(}
\DoxyCodeLine{00754               Item(*it, \textcolor{keyword}{true}, \textcolor{keyword}{true}, QString::fromStdString((*it).getName())));}
\DoxyCodeLine{00755         \}}
\DoxyCodeLine{00756         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00757       \}}
\DoxyCodeLine{00758 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00759       \textcolor{comment}{// skip the plt file (Palette file for TOONZ 4.6 and earlier)}}
\DoxyCodeLine{00760       \textcolor{keywordflow}{if} (it-\/>getType() == \textcolor{stringliteral}{"{}plt"{}}) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00761 }
\DoxyCodeLine{00762       \textcolor{comment}{// filtering}}
\DoxyCodeLine{00763       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_filter.isEmpty()) \{}
\DoxyCodeLine{00764         \textcolor{keywordflow}{if} (it-\/>getType() != \textcolor{stringliteral}{"{}tnz"{}} \&\& it-\/>getType() != \textcolor{stringliteral}{"{}scr"{}} \&\&}
\DoxyCodeLine{00765             it-\/>getType() != \textcolor{stringliteral}{"{}tnzbat"{}} \&\& it-\/>getType() != \textcolor{stringliteral}{"{}mpath"{}} \&\&}
\DoxyCodeLine{00766             it-\/>getType() != \textcolor{stringliteral}{"{}curve"{}} \&\& it-\/>getType() != \textcolor{stringliteral}{"{}tpl"{}} \&\&}
\DoxyCodeLine{00767             TFileType::getInfo(*it) == TFileType::UNKNOW\_FILE)}
\DoxyCodeLine{00768           \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00769       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!m\_filter.contains(QString::fromStdString(it-\/>getType())))}
\DoxyCodeLine{00770         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00771 }
\DoxyCodeLine{00772       m\_items.push\_back(Item(*it));}
\DoxyCodeLine{00773     \}}
\DoxyCodeLine{00774 }
\DoxyCodeLine{00775     \textcolor{comment}{// update the m\_multiFileItemMap}}
\DoxyCodeLine{00776     m\_multiFileItemMap.clear();}
\DoxyCodeLine{00777     \textcolor{keywordflow}{for} (it = all\_files.begin(); it != all\_files.end(); it++) \{}
\DoxyCodeLine{00778       \mbox{\hyperlink{class_t_file_path}{TFilePath}} levelName(it-\/>getLevelName());}
\DoxyCodeLine{00779       \textcolor{keywordflow}{if} (levelName.isLevelName()) \{}
\DoxyCodeLine{00780         Item \&levelItem = m\_multiFileItemMap[levelName];}
\DoxyCodeLine{00781         levelItem.m\_frameIds.push\_back(it-\/>getFrame());}
\DoxyCodeLine{00782         levelItem.m\_frameCount++;}
\DoxyCodeLine{00783       \}}
\DoxyCodeLine{00784     \}}
\DoxyCodeLine{00785   \}}
\DoxyCodeLine{00786   \textcolor{comment}{// for all items in the folder, retrieve the file names(m\_name) from the}}
\DoxyCodeLine{00787   \textcolor{comment}{// paths(m\_path)}}
\DoxyCodeLine{00788   \mbox{\hyperlink{class_file_browser_ac49f77ccdb2ec2a2bd6fddd3879e9d8c}{refreshData}}();}
\DoxyCodeLine{00789 }
\DoxyCodeLine{00790   \textcolor{comment}{// update the ordering rules}}
\DoxyCodeLine{00791   \textcolor{keywordtype}{bool} discendentOrder     = isDiscendentOrder();}
\DoxyCodeLine{00792   DataType currentDataType = getCurrentOrderType();}
\DoxyCodeLine{00793   setOrderType(Name);}
\DoxyCodeLine{00794   setIsDiscendentOrder(\textcolor{keyword}{true});}
\DoxyCodeLine{00795   sortByDataModel(currentDataType, discendentOrder);}
\DoxyCodeLine{00796 }
\DoxyCodeLine{00797   m\_itemViewer-\/>repaint();}
\DoxyCodeLine{00798 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00824}{refresh\+Data()}}.

\mbox{\Hypertarget{class_file_browser_a0e99c97a8e80e1b3ed71cbc897194c40}\label{class_file_browser_a0e99c97a8e80e1b3ed71cbc897194c40}} 
\index{FileBrowser@{FileBrowser}!setupVersionControlCommand@{setupVersionControlCommand}}
\index{setupVersionControlCommand@{setupVersionControlCommand}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{setupVersionControlCommand()}{setupVersionControlCommand()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void File\+Browser\+::setup\+Version\+Control\+Command (\begin{DoxyParamCaption}\item[{QString \&}]{file,  }\item[{QString \&}]{path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00046                                                                          \{}
\DoxyCodeLine{00047   std::vector<TFilePath> filePaths;}
\DoxyCodeLine{00048   \mbox{\hyperlink{class_file_selection}{FileSelection}} *fs =}
\DoxyCodeLine{00049       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_file_selection}{FileSelection}} *\textcolor{keyword}{>}(m\_itemViewer-\/>getPanel()-\/>getSelection());}
\DoxyCodeLine{00050   \textcolor{keywordflow}{if} (!fs) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00051   fs-\/>getSelectedFiles(filePaths);}
\DoxyCodeLine{00052   \textcolor{keywordflow}{if} (filePaths.empty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00053   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *node = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{00054       m\_folderTreeView-\/>getCurrentNode());}
\DoxyCodeLine{00055   \textcolor{keywordflow}{if} (!node) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00056 }
\DoxyCodeLine{00057   \mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *rootNode = node-\/>getVersionControlRootNode();}
\DoxyCodeLine{00058 }
\DoxyCodeLine{00059   \mbox{\hyperlink{class_version_control}{VersionControl}} *vc = VersionControl::instance();}
\DoxyCodeLine{00060   \textcolor{keywordflow}{if} (rootNode) \{}
\DoxyCodeLine{00061     vc-\/>setUserName(QString::fromStdWString(rootNode-\/>getUserName()));}
\DoxyCodeLine{00062     vc-\/>setPassword(QString::fromStdWString(rootNode-\/>getPassword()));}
\DoxyCodeLine{00063   \}}
\DoxyCodeLine{00064 }
\DoxyCodeLine{00065   path = toQString(node-\/>getPath());}
\DoxyCodeLine{00066   file = toQString(filePaths[0].withoutParentDir());}
\DoxyCodeLine{00067 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_aec62dd391c3f64fabdbb674fe95b62af}\label{class_file_browser_aec62dd391c3f64fabdbb674fe95b62af}} 
\index{FileBrowser@{FileBrowser}!setupVersionControlCommand@{setupVersionControlCommand}}
\index{setupVersionControlCommand@{setupVersionControlCommand}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{setupVersionControlCommand()}{setupVersionControlCommand()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void File\+Browser\+::setup\+Version\+Control\+Command (\begin{DoxyParamCaption}\item[{QString\+List \&}]{files,  }\item[{QString \&}]{path,  }\item[{int \&}]{scene\+Icons\+Count }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00072                                                                    \{}
\DoxyCodeLine{00073   std::vector<TFilePath> filePaths;}
\DoxyCodeLine{00074   \mbox{\hyperlink{class_file_selection}{FileSelection}} *fs =}
\DoxyCodeLine{00075       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_file_selection}{FileSelection}} *\textcolor{keyword}{>}(m\_itemViewer-\/>getPanel()-\/>getSelection());}
\DoxyCodeLine{00076   \textcolor{keywordflow}{if} (!fs) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00077   fs-\/>getSelectedFiles(filePaths);}
\DoxyCodeLine{00078   \textcolor{keywordflow}{if} (filePaths.empty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00079 }
\DoxyCodeLine{00080   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *node = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{00081       m\_folderTreeView-\/>getCurrentNode());}
\DoxyCodeLine{00082   \textcolor{keywordflow}{if} (!node) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00083 }
\DoxyCodeLine{00084   \textcolor{keywordtype}{int} fileCount = filePaths.size();}
\DoxyCodeLine{00085   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < fileCount; i++) \{}
\DoxyCodeLine{00086     \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = filePaths[i];}
\DoxyCodeLine{00087     \textcolor{keywordflow}{if} (fp.\mbox{\hyperlink{class_t_file_path_a698bbf714436eb6923359044900cde2b}{getDots}}() == \textcolor{stringliteral}{"{}.."{}}) \{}
\DoxyCodeLine{00088       QStringList levelNames = getLevelFileNames(fp);}
\DoxyCodeLine{00089 }
\DoxyCodeLine{00090       \textcolor{keywordflow}{if} (levelNames.isEmpty()) \{}
\DoxyCodeLine{00091         QString levelName =}
\DoxyCodeLine{00092             QRegExp::escape(QString::fromStdWString(fp.getWideName()));}
\DoxyCodeLine{00093         QString levelType = QString::fromStdString(fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}());}
\DoxyCodeLine{00094         QString exp(levelName + \textcolor{stringliteral}{"{}.[0-\/9]\{1,4\}."{}} + levelType);}
\DoxyCodeLine{00095         QRegExp regExp(exp);}
\DoxyCodeLine{00096         levelNames = node-\/>getMissingFiles(regExp);}
\DoxyCodeLine{00097       \}}
\DoxyCodeLine{00098 }
\DoxyCodeLine{00099       \textcolor{keywordtype}{int} count = levelNames.size();}
\DoxyCodeLine{00100       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < count; i++) files.append(levelNames.at(i));}
\DoxyCodeLine{00101     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00102       QFileInfo fi(toQString(fp));}
\DoxyCodeLine{00103       files.append(fi.fileName());}
\DoxyCodeLine{00104     \}}
\DoxyCodeLine{00105 }
\DoxyCodeLine{00106     \textcolor{comment}{// Add also auxiliary files}}
\DoxyCodeLine{00107     \textcolor{keywordflow}{if} (fp.\mbox{\hyperlink{class_t_file_path_a698bbf714436eb6923359044900cde2b}{getDots}}() == \textcolor{stringliteral}{"{}.."{}} || fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tlv"{}} ||}
\DoxyCodeLine{00108         fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}pli"{}}) \{}
\DoxyCodeLine{00109       TFilePathSet fpset;}
\DoxyCodeLine{00110       \mbox{\hyperlink{class_t_xsh_simple_level_aa3761996a872dfbfd19d13b63ad336f6}{TXshSimpleLevel::getFiles}}(fp, fpset);}
\DoxyCodeLine{00111 }
\DoxyCodeLine{00112       TFilePathSet::iterator it;}
\DoxyCodeLine{00113       \textcolor{keywordflow}{for} (it = fpset.begin(); it != fpset.end(); ++it)}
\DoxyCodeLine{00114         files.append(QFileInfo(toQString(*it)).fileName());}
\DoxyCodeLine{00115     \}}
\DoxyCodeLine{00116     \textcolor{comment}{// Add sceneIcon (only for scene files)}}
\DoxyCodeLine{00117     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}}) \{}
\DoxyCodeLine{00118       \mbox{\hyperlink{class_t_file_path}{TFilePath}} iconPath = \mbox{\hyperlink{class_toonz_scene_a2d97e9b3647bb45c0c992a6c92c659eb}{ToonzScene::getIconPath}}(fp);}
\DoxyCodeLine{00119       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(iconPath).doesExist()) \{}
\DoxyCodeLine{00120         QDir dir(toQString(fp.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}()));}
\DoxyCodeLine{00121 }
\DoxyCodeLine{00122 \textcolor{preprocessor}{\#ifdef MACOSX}}
\DoxyCodeLine{00123         files.append(dir.relativeFilePath(toQString(iconPath)));}
\DoxyCodeLine{00124 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00125         files.append(}
\DoxyCodeLine{00126             dir.relativeFilePath(toQString(iconPath)).replace(\textcolor{stringliteral}{"{}/"{}}, \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)"{}}));}
\DoxyCodeLine{00127 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00128         sceneIconsCount++;}
\DoxyCodeLine{00129       \}}
\DoxyCodeLine{00130     \}}
\DoxyCodeLine{00131   \}}
\DoxyCodeLine{00132 }
\DoxyCodeLine{00133   \mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *rootNode = node-\/>getVersionControlRootNode();}
\DoxyCodeLine{00134 }
\DoxyCodeLine{00135   \textcolor{keywordflow}{if} (rootNode) \{}
\DoxyCodeLine{00136     \mbox{\hyperlink{class_version_control}{VersionControl}} *vc = VersionControl::instance();}
\DoxyCodeLine{00137     vc-\/>setUserName(QString::fromStdWString(rootNode-\/>getUserName()));}
\DoxyCodeLine{00138     vc-\/>setPassword(QString::fromStdWString(rootNode-\/>getPassword()));}
\DoxyCodeLine{00139   \}}
\DoxyCodeLine{00140 }
\DoxyCodeLine{00141   path = toQString(node-\/>getPath());}
\DoxyCodeLine{00142 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_acc65b6119eea6a62105951186cd63a64}\label{class_file_browser_acc65b6119eea6a62105951186cd63a64}} 
\index{FileBrowser@{FileBrowser}!showEvent@{showEvent}}
\index{showEvent@{showEvent}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{showEvent()}{showEvent()}}
{\footnotesize\ttfamily void File\+Browser\+::show\+Event (\begin{DoxyParamCaption}\item[{QShow\+Event $\ast$}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02243                                         \{}
\DoxyCodeLine{02244   activeBrowsers.insert(\textcolor{keyword}{this});}
\DoxyCodeLine{02245   \textcolor{comment}{// refresh}}
\DoxyCodeLine{02246   \textcolor{keywordflow}{if} (getFolder() != \mbox{\hyperlink{class_t_file_path}{TFilePath}}())}
\DoxyCodeLine{02247     setFolder(getFolder(), \textcolor{keyword}{false}, \textcolor{keyword}{true});}
\DoxyCodeLine{02248   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (getDayDateString() != \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{02249     setHistoryDay(getDayDateString());}
\DoxyCodeLine{02250   m\_folderTreeView-\/>scrollTo(m\_folderTreeView-\/>currentIndex());}
\DoxyCodeLine{02251 }
\DoxyCodeLine{02252   \textcolor{comment}{// Refresh SVN}}
\DoxyCodeLine{02253   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *vcNode = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{02254       m\_folderTreeView-\/>getCurrentNode());}
\DoxyCodeLine{02255   \textcolor{keywordflow}{if} (vcNode) m\_folderTreeView-\/>refreshVersionControl(vcNode);}
\DoxyCodeLine{02256 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a389e4b0a139968345f3a66864a628f4a}\label{class_file_browser_a389e4b0a139968345f3a66864a628f4a}} 
\index{FileBrowser@{FileBrowser}!showFrameRangeLockInfo@{showFrameRangeLockInfo}}
\index{showFrameRangeLockInfo@{showFrameRangeLockInfo}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{showFrameRangeLockInfo}{showFrameRangeLockInfo}}
{\footnotesize\ttfamily void File\+Browser\+::show\+Frame\+Range\+Lock\+Info (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00580                                          \{}
\DoxyCodeLine{00581   QString file;}
\DoxyCodeLine{00582   QString path;}
\DoxyCodeLine{00583   setupVersionControlCommand(file, path);}
\DoxyCodeLine{00584   \textcolor{keywordflow}{if} (file.isEmpty() || path.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00585 }
\DoxyCodeLine{00586   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(path.toStdWString()) + file.toStdWString());}
\DoxyCodeLine{00587   \textcolor{keywordflow}{if} (fp.getDots() == \textcolor{stringliteral}{"{}.."{}}) \{}
\DoxyCodeLine{00588     QStringList list = getLevelFileNames(fp);}
\DoxyCodeLine{00589     VersionControl::instance()-\/>showFrameRangeLockInfo(\textcolor{keyword}{this}, path, list);}
\DoxyCodeLine{00590   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00591     VersionControl::instance()-\/>showFrameRangeLockInfo(\textcolor{keyword}{this}, path, file);}
\DoxyCodeLine{00592 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_ac337cd99e06f437f493e2654f4d93302}\label{class_file_browser_ac337cd99e06f437f493e2654f4d93302}} 
\index{FileBrowser@{FileBrowser}!showLockInformation@{showLockInformation}}
\index{showLockInformation@{showLockInformation}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{showLockInformation}{showLockInformation}}
{\footnotesize\ttfamily void File\+Browser\+::show\+Lock\+Information (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00558                                       \{}
\DoxyCodeLine{00559   std::vector<TFilePath> filePaths;}
\DoxyCodeLine{00560   \mbox{\hyperlink{class_file_selection}{FileSelection}} *fs =}
\DoxyCodeLine{00561       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_file_selection}{FileSelection}} *\textcolor{keyword}{>}(m\_itemViewer-\/>getPanel()-\/>getSelection());}
\DoxyCodeLine{00562   \textcolor{keywordflow}{if} (!fs) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00563   fs-\/>getSelectedFiles(filePaths);}
\DoxyCodeLine{00564   \textcolor{keywordflow}{if} (filePaths.empty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00565 }
\DoxyCodeLine{00566   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *node = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{00567       m\_folderTreeView-\/>getCurrentNode());}
\DoxyCodeLine{00568   \textcolor{keywordflow}{if} (!node) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00569 }
\DoxyCodeLine{00570   QFileInfo fi(toQString(filePaths[0]));}
\DoxyCodeLine{00571   \mbox{\hyperlink{struct_s_v_n_status}{SVNStatus}} status = node-\/>getVersionControlStatus(fi.fileName());}
\DoxyCodeLine{00572 }
\DoxyCodeLine{00573   \mbox{\hyperlink{class_s_v_n_lock_info_dialog}{SVNLockInfoDialog}} *dialog = \textcolor{keyword}{new} \mbox{\hyperlink{class_s_v_n_lock_info_dialog}{SVNLockInfoDialog}}(\textcolor{keyword}{this}, status);}
\DoxyCodeLine{00574   dialog-\/>show();}
\DoxyCodeLine{00575   dialog-\/>raise();}
\DoxyCodeLine{00576 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_adfd5f17543f8b15b0258619c25784ae9}\label{class_file_browser_adfd5f17543f8b15b0258619c25784ae9}} 
\index{FileBrowser@{FileBrowser}!sortByDataModel@{sortByDataModel}}
\index{sortByDataModel@{sortByDataModel}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{sortByDataModel()}{sortByDataModel()}}
{\footnotesize\ttfamily void File\+Browser\+::sort\+By\+Data\+Model (\begin{DoxyParamCaption}\item[{Data\+Type}]{data\+Type,  }\item[{bool}]{is\+Discendent }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00424                                                                       \{}
\DoxyCodeLine{00425   \textcolor{keyword}{struct }locals \{}
\DoxyCodeLine{00426     \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} itemLess(\textcolor{keywordtype}{int} aIdx, \textcolor{keywordtype}{int} bIdx, \mbox{\hyperlink{class_file_browser}{FileBrowser}} \&fb,}
\DoxyCodeLine{00427                                 DataType dataType) \{}
\DoxyCodeLine{00428       \textcolor{keywordflow}{return} (fb.compareData(dataType, aIdx, bIdx) > 0);}
\DoxyCodeLine{00429     \}}
\DoxyCodeLine{00430 }
\DoxyCodeLine{00431     \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} indexLess(\textcolor{keywordtype}{int} aIdx, \textcolor{keywordtype}{int} bIdx,}
\DoxyCodeLine{00432                                  \textcolor{keyword}{const} std::vector<int> \&vec) \{}
\DoxyCodeLine{00433       \textcolor{keywordflow}{return} (vec[aIdx] < vec[bIdx]);}
\DoxyCodeLine{00434     \}}
\DoxyCodeLine{00435 }
\DoxyCodeLine{00436     \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{int} complement(\textcolor{keywordtype}{int} val, \textcolor{keywordtype}{int} max) \{}
\DoxyCodeLine{00437       \textcolor{keywordflow}{return} (assert(0 <= val \&\& val <= max), max -\/ val);}
\DoxyCodeLine{00438     \}}
\DoxyCodeLine{00439   \};  \textcolor{comment}{// locals}}
\DoxyCodeLine{00440 }
\DoxyCodeLine{00441   \textcolor{keywordflow}{if} (dataType != getCurrentOrderType()) \{}
\DoxyCodeLine{00442     \textcolor{comment}{// Build the permutation table}}
\DoxyCodeLine{00443     std::vector<int> new2OldIdx(}
\DoxyCodeLine{00444         boost::make\_counting\_iterator(0),}
\DoxyCodeLine{00445         boost::make\_counting\_iterator(\textcolor{keywordtype}{int}(m\_items.size())));}
\DoxyCodeLine{00446 }
\DoxyCodeLine{00447     std::stable\_sort(}
\DoxyCodeLine{00448         new2OldIdx.begin(), new2OldIdx.end(),}
\DoxyCodeLine{00449         boost::bind(locals::itemLess, \_1, \_2, boost::ref(*\textcolor{keyword}{this}), dataType));}
\DoxyCodeLine{00450 }
\DoxyCodeLine{00451     \textcolor{comment}{// Use the renumbering table to permutate elements}}
\DoxyCodeLine{00452     std::vector<Item>(}
\DoxyCodeLine{00453         boost::make\_permutation\_iterator(m\_items.begin(), new2OldIdx.begin()),}
\DoxyCodeLine{00454         boost::make\_permutation\_iterator(m\_items.begin(), new2OldIdx.end()))}
\DoxyCodeLine{00455         .swap(m\_items);}
\DoxyCodeLine{00456 }
\DoxyCodeLine{00457     \textcolor{comment}{// Use the permutation table to update current file selection, if any}}
\DoxyCodeLine{00458     \mbox{\hyperlink{class_file_selection}{FileSelection}} *fs =}
\DoxyCodeLine{00459         \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_file_selection}{FileSelection}} *\textcolor{keyword}{>}(m\_itemViewer-\/>getPanel()-\/>getSelection());}
\DoxyCodeLine{00460 }
\DoxyCodeLine{00461     \textcolor{keywordflow}{if} (!fs-\/>isEmpty()) \{}
\DoxyCodeLine{00462       std::vector<int> old2NewIdx(}
\DoxyCodeLine{00463           boost::make\_counting\_iterator(0),}
\DoxyCodeLine{00464           boost::make\_counting\_iterator(\textcolor{keywordtype}{int}(m\_items.size())));}
\DoxyCodeLine{00465 }
\DoxyCodeLine{00466       std::sort(old2NewIdx.begin(), old2NewIdx.end(),}
\DoxyCodeLine{00467                 boost::bind(locals::indexLess, \_1, \_2, boost::ref(new2OldIdx)));}
\DoxyCodeLine{00468 }
\DoxyCodeLine{00469       std::vector<int> newSelectedIndices;}
\DoxyCodeLine{00470       \mbox{\hyperlink{range__utility_8h_a6e998835f065bb4b10d59722f3ec9019}{tcg::substitute}}(}
\DoxyCodeLine{00471           newSelectedIndices,}
\DoxyCodeLine{00472           tcg::permuted\_range(old2NewIdx, fs-\/>getSelectedIndices() |}
\DoxyCodeLine{00473                                               ba::filtered(boost::bind(}
\DoxyCodeLine{00474                                                   std::less<int>(), \_1,}
\DoxyCodeLine{00475                                                   \textcolor{keywordtype}{int}(old2NewIdx.size())))));}
\DoxyCodeLine{00476 }
\DoxyCodeLine{00477       fs-\/>select(!newSelectedIndices.empty() ? \&newSelectedIndices.front() : 0,}
\DoxyCodeLine{00478                  \textcolor{keywordtype}{int}(newSelectedIndices.size()));}
\DoxyCodeLine{00479     \}}
\DoxyCodeLine{00480 }
\DoxyCodeLine{00481     setIsDiscendentOrder(\textcolor{keyword}{true});}
\DoxyCodeLine{00482     setOrderType(dataType);}
\DoxyCodeLine{00483   \}}
\DoxyCodeLine{00484 }
\DoxyCodeLine{00485   \textcolor{comment}{// Reverse lists if necessary}}
\DoxyCodeLine{00486   \textcolor{keywordflow}{if} (isDiscendentOrder() != isDiscendent) \{}
\DoxyCodeLine{00487     std::reverse(m\_items.begin(), m\_items.end());}
\DoxyCodeLine{00488 }
\DoxyCodeLine{00489     \textcolor{comment}{// Reverse file selection, if any}}
\DoxyCodeLine{00490     \mbox{\hyperlink{class_file_selection}{FileSelection}} *fs =}
\DoxyCodeLine{00491         \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_file_selection}{FileSelection}} *\textcolor{keyword}{>}(m\_itemViewer-\/>getPanel()-\/>getSelection());}
\DoxyCodeLine{00492 }
\DoxyCodeLine{00493     \textcolor{keywordflow}{if} (!fs-\/>isEmpty()) \{}
\DoxyCodeLine{00494       \textcolor{keywordtype}{int} iCount = int(m\_items.size()), lastIdx = iCount -\/ 1;}
\DoxyCodeLine{00495 }
\DoxyCodeLine{00496       std::vector<int> newSelectedIndices;}
\DoxyCodeLine{00497       \mbox{\hyperlink{range__utility_8h_a6e998835f065bb4b10d59722f3ec9019}{tcg::substitute}}(}
\DoxyCodeLine{00498           newSelectedIndices,}
\DoxyCodeLine{00499           fs-\/>getSelectedIndices() |}
\DoxyCodeLine{00500               ba::filtered(boost::bind(std::less<int>(), \_1, iCount)) |}
\DoxyCodeLine{00501               ba::transformed(boost::bind(locals::complement, \_1, lastIdx)));}
\DoxyCodeLine{00502 }
\DoxyCodeLine{00503       fs-\/>select(!newSelectedIndices.empty() ? \&newSelectedIndices.front() : 0,}
\DoxyCodeLine{00504                  \textcolor{keywordtype}{int}(newSelectedIndices.size()));}
\DoxyCodeLine{00505     \}}
\DoxyCodeLine{00506 }
\DoxyCodeLine{00507     setIsDiscendentOrder(isDiscendent);}
\DoxyCodeLine{00508   \}}
\DoxyCodeLine{00509 }
\DoxyCodeLine{00510   m\_itemViewer-\/>getPanel()-\/>update();}
\DoxyCodeLine{00511 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_abe83257d5c2506a78b9e9d347fc18c2b}\label{class_file_browser_abe83257d5c2506a78b9e9d347fc18c2b}} 
\index{FileBrowser@{FileBrowser}!startDragDrop@{startDragDrop}}
\index{startDragDrop@{startDragDrop}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{startDragDrop()}{startDragDrop()}}
{\footnotesize\ttfamily void File\+Browser\+::start\+Drag\+Drop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01436                                 \{}
\DoxyCodeLine{01437   \mbox{\hyperlink{class_t_repetition_guard}{TRepetitionGuard}} guard;}
\DoxyCodeLine{01438   \textcolor{keywordflow}{if} (!guard.hasLock()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01439 }
\DoxyCodeLine{01440   \mbox{\hyperlink{class_file_selection}{FileSelection}} *fs =}
\DoxyCodeLine{01441       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_file_selection}{FileSelection}} *\textcolor{keyword}{>}(m\_itemViewer-\/>getPanel()-\/>getSelection());}
\DoxyCodeLine{01442   \textcolor{keywordflow}{if} (!fs) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01443   std::vector<TFilePath> files;}
\DoxyCodeLine{01444   fs-\/>getSelectedFiles(files);}
\DoxyCodeLine{01445   \textcolor{keywordflow}{if} (files.empty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01446 }
\DoxyCodeLine{01447   QList<QUrl> urls;}
\DoxyCodeLine{01448   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)files.size(); i++) \{}
\DoxyCodeLine{01449     \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(files[i]))}
\DoxyCodeLine{01450       urls.append(QUrl::fromLocalFile(}
\DoxyCodeLine{01451           QString::fromStdWString(files[i].getWideString())));}
\DoxyCodeLine{01452   \}}
\DoxyCodeLine{01453   \textcolor{keywordflow}{if} (urls.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01454 }
\DoxyCodeLine{01455   QMimeData *mimeData = \textcolor{keyword}{new} QMimeData;}
\DoxyCodeLine{01456   mimeData-\/>setUrls(urls);}
\DoxyCodeLine{01457   QDrag *drag    = \textcolor{keyword}{new} QDrag(\textcolor{keyword}{this});}
\DoxyCodeLine{01458   QSize iconSize = m\_itemViewer-\/>getPanel()-\/>getIconSize();}
\DoxyCodeLine{01459   QPixmap icon   = IconGenerator::instance()-\/>getIcon(files[0]);}
\DoxyCodeLine{01460   QPixmap dropThumbnail =}
\DoxyCodeLine{01461       scalePixmapKeepingAspectRatio(icon, iconSize, Qt::transparent);}
\DoxyCodeLine{01462   \textcolor{keywordflow}{if} (!dropThumbnail.isNull()) drag-\/>setPixmap(dropThumbnail);}
\DoxyCodeLine{01463   drag-\/>setMimeData(mimeData);}
\DoxyCodeLine{01464   Qt::DropAction dropAction = drag-\/>exec(Qt::CopyAction);}
\DoxyCodeLine{01465 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a61465fbc20166a697d0cd10a441a4757}\label{class_file_browser_a61465fbc20166a697d0cd10a441a4757}} 
\index{FileBrowser@{FileBrowser}!storeFolderHistory@{storeFolderHistory}}
\index{storeFolderHistory@{storeFolderHistory}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{storeFolderHistory}{storeFolderHistory}}
{\footnotesize\ttfamily void File\+Browser\+::store\+Folder\+History (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00329                                      \{}
\DoxyCodeLine{00330   QModelIndex currentModelIndex = m\_folderTreeView-\/>currentIndex();}
\DoxyCodeLine{00331 }
\DoxyCodeLine{00332   \textcolor{keywordflow}{if} (!currentModelIndex.isValid()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00333 }
\DoxyCodeLine{00334   \textcolor{keywordflow}{if} (m\_indexHistoryList[m\_currentPosition] == currentModelIndex) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00335 }
\DoxyCodeLine{00336   \textcolor{comment}{// If there is no next history item, then create it}}
\DoxyCodeLine{00337   \textcolor{keywordflow}{if} (m\_currentPosition == m\_indexHistoryList.size() -\/ 1) \{}
\DoxyCodeLine{00338     m\_indexHistoryList << currentModelIndex;}
\DoxyCodeLine{00339     m\_currentPosition++;}
\DoxyCodeLine{00340   \}}
\DoxyCodeLine{00341   \textcolor{comment}{// If the next history item is the same as the current one, just move to it}}
\DoxyCodeLine{00342   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_indexHistoryList[m\_currentPosition + 1] == currentModelIndex) \{}
\DoxyCodeLine{00343     m\_currentPosition++;}
\DoxyCodeLine{00344   \}}
\DoxyCodeLine{00345   \textcolor{comment}{// If the next history item is different from the current one, then replace}}
\DoxyCodeLine{00346   \textcolor{comment}{// with the new one}}
\DoxyCodeLine{00347   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00348     \textcolor{keywordtype}{int} size = m\_indexHistoryList.size();}
\DoxyCodeLine{00349     \textcolor{comment}{// remove the old history items}}
\DoxyCodeLine{00350     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = m\_currentPosition + 1; i < size; i++)}
\DoxyCodeLine{00351       m\_indexHistoryList.removeLast();}
\DoxyCodeLine{00352     m\_indexHistoryList << currentModelIndex;}
\DoxyCodeLine{00353     m\_currentPosition++;}
\DoxyCodeLine{00354   \}}
\DoxyCodeLine{00355   refreshHistoryButtons();}
\DoxyCodeLine{00356 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a7df506fe3e4b839204b50c77b2c22d6f}\label{class_file_browser_a7df506fe3e4b839204b50c77b2c22d6f}} 
\index{FileBrowser@{FileBrowser}!tryToOpenScene@{tryToOpenScene}}
\index{tryToOpenScene@{tryToOpenScene}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{tryToOpenScene}{tryToOpenScene}}
{\footnotesize\ttfamily void File\+Browser\+::try\+To\+Open\+Scene (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{file\+Path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02290                                                           \{}
\DoxyCodeLine{02291   \textcolor{keywordflow}{if} (filePath.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}}) \{}
\DoxyCodeLine{02292     IoCmd::loadScene(filePath);}
\DoxyCodeLine{02293   \}}
\DoxyCodeLine{02294 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_adadab2fb14e99879ce069b9db93c6df2}\label{class_file_browser_adadab2fb14e99879ce069b9db93c6df2}} 
\index{FileBrowser@{FileBrowser}!unlockFrameRangeVersionControl@{unlockFrameRangeVersionControl}}
\index{unlockFrameRangeVersionControl@{unlockFrameRangeVersionControl}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{unlockFrameRangeVersionControl}{unlockFrameRangeVersionControl}}
{\footnotesize\ttfamily void File\+Browser\+::unlock\+Frame\+Range\+Version\+Control (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00218                                                  \{}
\DoxyCodeLine{00219   QString file;}
\DoxyCodeLine{00220   QString path;}
\DoxyCodeLine{00221   setupVersionControlCommand(file, path);}
\DoxyCodeLine{00222   \textcolor{keywordflow}{if} (file.isEmpty() || path.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00223 }
\DoxyCodeLine{00224   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(path.toStdWString()) + file.toStdWString());}
\DoxyCodeLine{00225   \textcolor{keywordflow}{if} (fp.getDots() == \textcolor{stringliteral}{"{}.."{}}) \{}
\DoxyCodeLine{00226     QStringList list = getLevelFileNames(fp);}
\DoxyCodeLine{00227     VersionControl::instance()-\/>unlockFrameRange(\textcolor{keyword}{this}, path, list);}
\DoxyCodeLine{00228   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00229     VersionControl::instance()-\/>unlockFrameRange(\textcolor{keyword}{this}, path, file);}
\DoxyCodeLine{00230 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a2ad4414b146e34499df87e7637d6cb31}\label{class_file_browser_a2ad4414b146e34499df87e7637d6cb31}} 
\index{FileBrowser@{FileBrowser}!unlockVersionControl@{unlockVersionControl}}
\index{unlockVersionControl@{unlockVersionControl}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{unlockVersionControl}{unlockVersionControl}}
{\footnotesize\ttfamily void File\+Browser\+::unlock\+Version\+Control (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00370                                        \{}
\DoxyCodeLine{00371   QStringList files;}
\DoxyCodeLine{00372   QString path;}
\DoxyCodeLine{00373 }
\DoxyCodeLine{00374   \textcolor{keywordtype}{int} sceneIconsCount = 0;}
\DoxyCodeLine{00375   setupVersionControlCommand(files, path, sceneIconsCount);}
\DoxyCodeLine{00376   \textcolor{keywordflow}{if} (files.isEmpty() || path.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00377 }
\DoxyCodeLine{00378   \mbox{\hyperlink{class_version_control}{VersionControl}} *vc = VersionControl::instance();}
\DoxyCodeLine{00379 }
\DoxyCodeLine{00380   \textcolor{keywordtype}{bool} hasCurrentSceneFile = \textcolor{keyword}{false};}
\DoxyCodeLine{00381 }
\DoxyCodeLine{00382   \textcolor{comment}{// Check the scene file}}
\DoxyCodeLine{00383   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()}
\DoxyCodeLine{00384                      -\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()}
\DoxyCodeLine{00385                      -\/>getScene()}
\DoxyCodeLine{00386                      -\/>\mbox{\hyperlink{class_toonz_scene_ad42b52b671b094f66e003c4b7ebefd45}{getScenePath}}()}
\DoxyCodeLine{00387                      .\mbox{\hyperlink{class_t_file_path_ac17d65d827432f0fae28fed699bf4afa}{withoutParentDir}}();}
\DoxyCodeLine{00388   \textcolor{keywordflow}{if} (files.contains(toQString(fp))) hasCurrentSceneFile = \textcolor{keyword}{true};}
\DoxyCodeLine{00389 }
\DoxyCodeLine{00390   \textcolor{comment}{// Check the scene resource files}}
\DoxyCodeLine{00391   \textcolor{keywordflow}{if} (!hasCurrentSceneFile) \{}
\DoxyCodeLine{00392     QStringList currentSceneContents = vc-\/>getCurrentSceneContents();}
\DoxyCodeLine{00393     \textcolor{keywordtype}{int} fileSize                     = files.size();}
\DoxyCodeLine{00394     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < fileSize; i++) \{}
\DoxyCodeLine{00395 \textcolor{preprocessor}{\#ifdef MACOSX}}
\DoxyCodeLine{00396       QString fp = path + \textcolor{stringliteral}{"{}/"{}} + files.at(i);}
\DoxyCodeLine{00397 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00398       QString fp = path + \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)"{}} + files.at(i);}
\DoxyCodeLine{00399 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00400       \textcolor{keywordflow}{if} (currentSceneContents.contains(fp)) \{}
\DoxyCodeLine{00401         hasCurrentSceneFile = \textcolor{keyword}{true};}
\DoxyCodeLine{00402         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00403       \}}
\DoxyCodeLine{00404     \}}
\DoxyCodeLine{00405   \}}
\DoxyCodeLine{00406 }
\DoxyCodeLine{00407   \textcolor{keywordflow}{if} (hasCurrentSceneFile) \{}
\DoxyCodeLine{00408     DVGui::warning(}
\DoxyCodeLine{00409         tr(\textcolor{stringliteral}{"{}Some files that you want to unlock are currently opened. Close "{}}}
\DoxyCodeLine{00410            \textcolor{stringliteral}{"{}them first."{}}));}
\DoxyCodeLine{00411     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00412   \}}
\DoxyCodeLine{00413   vc-\/>unlock(\textcolor{keyword}{this}, path, files, sceneIconsCount);}
\DoxyCodeLine{00414 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_a371c20b1fda45b2c601ff637d7db1b9c}\label{class_file_browser_a371c20b1fda45b2c601ff637d7db1b9c}} 
\index{FileBrowser@{FileBrowser}!updateAndEditVersionControl@{updateAndEditVersionControl}}
\index{updateAndEditVersionControl@{updateAndEditVersionControl}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{updateAndEditVersionControl}{updateAndEditVersionControl}}
{\footnotesize\ttfamily void File\+Browser\+::update\+And\+Edit\+Version\+Control (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00304                                               \{}
\DoxyCodeLine{00305   std::vector<TFilePath> filePaths;}
\DoxyCodeLine{00306   \mbox{\hyperlink{class_file_selection}{FileSelection}} *fs =}
\DoxyCodeLine{00307       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_file_selection}{FileSelection}} *\textcolor{keyword}{>}(m\_itemViewer-\/>getPanel()-\/>getSelection());}
\DoxyCodeLine{00308   \textcolor{keywordflow}{if} (!fs) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00309   fs-\/>getSelectedFiles(filePaths);}
\DoxyCodeLine{00310   \textcolor{keywordflow}{if} (filePaths.empty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00311   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *node = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{00312       m\_folderTreeView-\/>getCurrentNode());}
\DoxyCodeLine{00313   \textcolor{keywordflow}{if} (!node) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00314 }
\DoxyCodeLine{00315   QStringList files;}
\DoxyCodeLine{00316   \textcolor{keywordtype}{int} sceneIconsCount = 0;}
\DoxyCodeLine{00317 }
\DoxyCodeLine{00318   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = filePaths[0];}
\DoxyCodeLine{00319   QFileInfo fi(toQString(fp));}
\DoxyCodeLine{00320   \textcolor{keywordflow}{if} (fp.\mbox{\hyperlink{class_t_file_path_a698bbf714436eb6923359044900cde2b}{getDots}}() == \textcolor{stringliteral}{"{}.."{}}) \{}
\DoxyCodeLine{00321     QStringList levelNames = getLevelFileNames(fp);}
\DoxyCodeLine{00322     \textcolor{keywordtype}{int} count              = levelNames.size();}
\DoxyCodeLine{00323     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < count; i++) files.append(levelNames.at(i));}
\DoxyCodeLine{00324   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00325     files.append(fi.fileName());}
\DoxyCodeLine{00326 }
\DoxyCodeLine{00327   \mbox{\hyperlink{struct_s_v_n_status}{SVNStatus}} status    = node-\/>getVersionControlStatus(fi.fileName());}
\DoxyCodeLine{00328   \textcolor{keywordtype}{int} workingRevision = status.m\_workingRevision.toInt();}
\DoxyCodeLine{00329 }
\DoxyCodeLine{00330   \textcolor{comment}{// Add also auxiliary files}}
\DoxyCodeLine{00331   \textcolor{keywordflow}{if} (fp.\mbox{\hyperlink{class_t_file_path_a698bbf714436eb6923359044900cde2b}{getDots}}() == \textcolor{stringliteral}{"{}.."{}} || fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tlv"{}} || fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}pli"{}}) \{}
\DoxyCodeLine{00332     TFilePathSet fpset;}
\DoxyCodeLine{00333     \mbox{\hyperlink{class_t_xsh_simple_level_aa3761996a872dfbfd19d13b63ad336f6}{TXshSimpleLevel::getFiles}}(fp, fpset);}
\DoxyCodeLine{00334 }
\DoxyCodeLine{00335     TFilePathSet::iterator it;}
\DoxyCodeLine{00336     \textcolor{keywordflow}{for} (it = fpset.begin(); it != fpset.end(); ++it)}
\DoxyCodeLine{00337       files.append(QFileInfo(toQString(*it)).fileName());}
\DoxyCodeLine{00338   \}}
\DoxyCodeLine{00339   \textcolor{comment}{// Add sceneIcon (only for scene files)}}
\DoxyCodeLine{00340   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}}) \{}
\DoxyCodeLine{00341     \mbox{\hyperlink{class_t_file_path}{TFilePath}} iconPath = \mbox{\hyperlink{class_toonz_scene_a2d97e9b3647bb45c0c992a6c92c659eb}{ToonzScene::getIconPath}}(fp);}
\DoxyCodeLine{00342     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(iconPath).doesExist()) \{}
\DoxyCodeLine{00343       QDir dir(toQString(fp.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}()));}
\DoxyCodeLine{00344 }
\DoxyCodeLine{00345 \textcolor{preprocessor}{\#ifdef MACOSX}}
\DoxyCodeLine{00346       files.append(dir.relativeFilePath(toQString(iconPath)));}
\DoxyCodeLine{00347 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00348       files.append(}
\DoxyCodeLine{00349           dir.relativeFilePath(toQString(iconPath)).replace(\textcolor{stringliteral}{"{}/"{}}, \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)"{}}));}
\DoxyCodeLine{00350 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00351       sceneIconsCount++;}
\DoxyCodeLine{00352     \}}
\DoxyCodeLine{00353   \}}
\DoxyCodeLine{00354 }
\DoxyCodeLine{00355   \mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *rootNode = node-\/>getVersionControlRootNode();}
\DoxyCodeLine{00356 }
\DoxyCodeLine{00357   \mbox{\hyperlink{class_version_control}{VersionControl}} *vc = VersionControl::instance();}
\DoxyCodeLine{00358   \textcolor{keywordflow}{if} (rootNode) \{}
\DoxyCodeLine{00359     vc-\/>setUserName(QString::fromStdWString(rootNode-\/>getUserName()));}
\DoxyCodeLine{00360     vc-\/>setPassword(QString::fromStdWString(rootNode-\/>getPassword()));}
\DoxyCodeLine{00361   \}}
\DoxyCodeLine{00362 }
\DoxyCodeLine{00363   QString path = toQString(node-\/>getPath());}
\DoxyCodeLine{00364 }
\DoxyCodeLine{00365   vc-\/>updateAndLock(\textcolor{keyword}{this}, path, files, workingRevision, sceneIconsCount);}
\DoxyCodeLine{00366 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_file_browser_af271aa0cd84409a98c99cec4588ed478}\label{class_file_browser_af271aa0cd84409a98c99cec4588ed478}} 
\index{FileBrowser@{FileBrowser}!updateItemViewerPanel@{updateItemViewerPanel}}
\index{updateItemViewerPanel@{updateItemViewerPanel}!FileBrowser@{FileBrowser}}
\doxysubsubsection{\texorpdfstring{updateItemViewerPanel()}{updateItemViewerPanel()}}
{\footnotesize\ttfamily void File\+Browser\+::update\+Item\+Viewer\+Panel (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02131                                         \{}
\DoxyCodeLine{02132   std::set<FileBrowser *>::iterator it;}
\DoxyCodeLine{02133   \textcolor{keywordflow}{for} (it = activeBrowsers.begin(); it != activeBrowsers.end(); ++it) \{}
\DoxyCodeLine{02134     \mbox{\hyperlink{class_file_browser}{FileBrowser}} *browser = *it;}
\DoxyCodeLine{02135     browser-\/>m\_itemViewer-\/>getPanel()-\/>update();}
\DoxyCodeLine{02136   \}}
\DoxyCodeLine{02137 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/filebrowser.\+h\item 
E\+:/opentoonz/toonz/sources/toonzfarm/tfarmclient/filebrowser.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/filebrowser.\+cpp\item 
E\+:/opentoonz/toonz/sources/toonz/filebrowserversioncontrol.\+cpp\item 
E\+:/opentoonz/toonz/sources/toonzfarm/tfarmclient/filebrowser.\+cpp\end{DoxyCompactItemize}
