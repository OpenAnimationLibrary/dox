\hypertarget{class_t_file}{}\doxysection{TFile Class Reference}
\label{class_t_file}\index{TFile@{TFile}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_file_aafe7b07c6a829d36bd254ad2c3513664}{TFile}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fname, uint32 flags=TFile\+Consts\+::k\+Read$\vert$TFile\+Consts\+::k\+Deny\+Write$\vert$TFile\+Consts\+::k\+Open\+Existing)
\item 
bool \mbox{\hyperlink{class_t_file_a22a2489d623201eec98b70d5f35ff0cb}{open}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fname, uint32 flags=TFile\+Consts\+::k\+Read$\vert$TFile\+Consts\+::k\+Deny\+Write$\vert$TFile\+Consts\+::k\+Open\+Existing)
\item 
bool \mbox{\hyperlink{class_t_file_a7ee289d43d8cfeb2dfc59adba94af615}{close}} ()
\item 
bool \mbox{\hyperlink{class_t_file_a8e89f533150c534af9567d3fddea23af}{truncate}} ()
\item 
TINT64 \mbox{\hyperlink{class_t_file_a57f845e408c928223bb44eb2a277f1e6}{size}} ()
\item 
TINT32 \mbox{\hyperlink{class_t_file_a3a4f92de72399e2a905286d0931ea7b7}{read}} (void $\ast$buffer, TINT32 length)
\item 
TINT32 \mbox{\hyperlink{class_t_file_abf9066c46de98865bee00730e70f7ac2}{write}} (const void $\ast$buffer, TINT32 length)
\item 
bool \mbox{\hyperlink{class_t_file_a2ce23014e8c41ded755b73dc209ddcf2}{seek}} (TINT64 new\+Pos, TFile\+Consts\+::\+Seek\+Mode mode=TFile\+Consts\+::seek\+Start)
\item 
bool \mbox{\hyperlink{class_t_file_adec2c13aec9118ce9a776cb7d2fbbe27}{skip}} (TINT64 delta)
\item 
TINT64 \mbox{\hyperlink{class_t_file_ad9d4f38530699a157b090d40889d6243}{tell}} ()
\item 
bool \mbox{\hyperlink{class_t_file_a0cf585e9e818fc41ced2727a4ab91e1c}{is\+Open}} ()
\item 
std\+::string \mbox{\hyperlink{class_t_file_a6105d69c4ef45fd4d64f7a8447bb2199}{get\+Last\+Error}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_t_file_ac0564688bb4aea2d74aa3d3a82040131}{open\+\_\+internal}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fname, uint32 flags)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_file_a9f7b758404c0bb3fd49e08d49ef833e0}\label{class_t_file_a9f7b758404c0bb3fd49e08d49ef833e0}} 
\index{TFile@{TFile}!TFile@{TFile}}
\index{TFile@{TFile}!TFile@{TFile}}
\doxysubsubsection{\texorpdfstring{TFile()}{TFile()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily TFile\+::\+TFile (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00047 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_file_aafe7b07c6a829d36bd254ad2c3513664}\label{class_t_file_aafe7b07c6a829d36bd254ad2c3513664}} 
\index{TFile@{TFile}!TFile@{TFile}}
\index{TFile@{TFile}!TFile@{TFile}}
\doxysubsubsection{\texorpdfstring{TFile()}{TFile()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily TFile\+::\+TFile (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fname,  }\item[{uint32}]{flags = {\ttfamily TFileConsts\+:\+:kRead~$\vert$~TFileConsts\+:\+:kDenyWrite~$\vert$~TFileConsts\+:\+:kOpenExisting} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00014                                                  : m\_hFile(NULL), m\_ec(0) \{}
\DoxyCodeLine{00015   open\_internal(fname, \textcolor{comment}{/*NULL,*/} flags);}
\DoxyCodeLine{00016 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_file_aa72e51e1dd50128f7a355e0856f2a035}\label{class_t_file_aa72e51e1dd50128f7a355e0856f2a035}} 
\index{TFile@{TFile}!````~TFile@{$\sim$TFile}}
\index{````~TFile@{$\sim$TFile}!TFile@{TFile}}
\doxysubsubsection{\texorpdfstring{$\sim$TFile()}{~TFile()}}
{\footnotesize\ttfamily TFile\+::$\sim$\+TFile (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00020 \{ close(); \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_file_a7ee289d43d8cfeb2dfc59adba94af615}\label{class_t_file_a7ee289d43d8cfeb2dfc59adba94af615}} 
\index{TFile@{TFile}!close@{close}}
\index{close@{close}!TFile@{TFile}}
\doxysubsubsection{\texorpdfstring{close()}{close()}}
{\footnotesize\ttfamily bool TFile\+::close (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00128                   \{}
\DoxyCodeLine{00129   \textcolor{keywordflow}{if} (m\_hFile) \{}
\DoxyCodeLine{00130     HANDLE h = m\_hFile;}
\DoxyCodeLine{00131     m\_hFile  = NULL;}
\DoxyCodeLine{00132     \textcolor{keywordflow}{if} (!CloseHandle(h)) \{}
\DoxyCodeLine{00133       m\_ec = GetLastError();}
\DoxyCodeLine{00134       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00135     \}}
\DoxyCodeLine{00136   \}}
\DoxyCodeLine{00137   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00138 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_file_a6105d69c4ef45fd4d64f7a8447bb2199}\label{class_t_file_a6105d69c4ef45fd4d64f7a8447bb2199}} 
\index{TFile@{TFile}!getLastError@{getLastError}}
\index{getLastError@{getLastError}!TFile@{TFile}}
\doxysubsubsection{\texorpdfstring{getLastError()}{getLastError()}}
{\footnotesize\ttfamily string TFile\+::get\+Last\+Error (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00259                            \{}
\DoxyCodeLine{00260   LPVOID lpMsgBuf;}
\DoxyCodeLine{00261   FormatMessage(FORMAT\_MESSAGE\_ALLOCATE\_BUFFER | FORMAT\_MESSAGE\_FROM\_SYSTEM |}
\DoxyCodeLine{00262                     FORMAT\_MESSAGE\_IGNORE\_INSERTS,}
\DoxyCodeLine{00263                 NULL, m\_ec,}
\DoxyCodeLine{00264                 MAKELANGID(LANG\_NEUTRAL, SUBLANG\_DEFAULT),  \textcolor{comment}{// Default language}}
\DoxyCodeLine{00265                 (LPTSTR)\&lpMsgBuf, 0, NULL);}
\DoxyCodeLine{00266   \textcolor{keywordtype}{string} s = string(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char} *\textcolor{keyword}{>}(lpMsgBuf));}
\DoxyCodeLine{00267   LocalFree(lpMsgBuf);}
\DoxyCodeLine{00268   \textcolor{keywordflow}{return} s;}
\DoxyCodeLine{00269 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_file_a0cf585e9e818fc41ced2727a4ab91e1c}\label{class_t_file_a0cf585e9e818fc41ced2727a4ab91e1c}} 
\index{TFile@{TFile}!isOpen@{isOpen}}
\index{isOpen@{isOpen}!TFile@{TFile}}
\doxysubsubsection{\texorpdfstring{isOpen()}{isOpen()}}
{\footnotesize\ttfamily bool TFile\+::is\+Open (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00255 \{ \textcolor{keywordflow}{return} m\_hFile != 0; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_file_a22a2489d623201eec98b70d5f35ff0cb}\label{class_t_file_a22a2489d623201eec98b70d5f35ff0cb}} 
\index{TFile@{TFile}!open@{open}}
\index{open@{open}!TFile@{TFile}}
\doxysubsubsection{\texorpdfstring{open()}{open()}}
{\footnotesize\ttfamily bool TFile\+::open (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fname,  }\item[{uint32}]{flags = {\ttfamily TFileConsts\+:\+:kRead~$\vert$~TFileConsts\+:\+:kDenyWrite~$\vert$~TFileConsts\+:\+:kOpenExisting} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00024                                                      \{}
\DoxyCodeLine{00025   \textcolor{keywordflow}{return} open\_internal(fname, flags);}
\DoxyCodeLine{00026 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_file_ac0564688bb4aea2d74aa3d3a82040131}\label{class_t_file_ac0564688bb4aea2d74aa3d3a82040131}} 
\index{TFile@{TFile}!open\_internal@{open\_internal}}
\index{open\_internal@{open\_internal}!TFile@{TFile}}
\doxysubsubsection{\texorpdfstring{open\_internal()}{open\_internal()}}
{\footnotesize\ttfamily bool TFile\+::open\+\_\+internal (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fname,  }\item[{uint32}]{flags }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00031                                           \{}
\DoxyCodeLine{00032   close();}
\DoxyCodeLine{00033 }
\DoxyCodeLine{00034   \textcolor{comment}{// At least one of the read/write flags must be set.}}
\DoxyCodeLine{00035   assert(flags \& (kRead | kWrite));}
\DoxyCodeLine{00036 }
\DoxyCodeLine{00037   DWORD dwDesiredAccess = 0;}
\DoxyCodeLine{00038 }
\DoxyCodeLine{00039   \textcolor{keywordflow}{if} (flags \& kRead) dwDesiredAccess = GENERIC\_READ;}
\DoxyCodeLine{00040   \textcolor{keywordflow}{if} (flags \& kWrite) dwDesiredAccess |= GENERIC\_WRITE;}
\DoxyCodeLine{00041 }
\DoxyCodeLine{00042   \textcolor{comment}{// Win32 docs are screwed here -\/-\/ FILE\_SHARE\_xxx is the inverse of a deny}}
\DoxyCodeLine{00043   \textcolor{comment}{// flag.}}
\DoxyCodeLine{00044 }
\DoxyCodeLine{00045   DWORD dwShareMode                  = FILE\_SHARE\_READ | FILE\_SHARE\_WRITE;}
\DoxyCodeLine{00046   \textcolor{keywordflow}{if} (flags \& kDenyRead) dwShareMode = FILE\_SHARE\_WRITE;}
\DoxyCodeLine{00047   \textcolor{keywordflow}{if} (flags \& kDenyWrite) dwShareMode \&= \string~FILE\_SHARE\_WRITE;}
\DoxyCodeLine{00048 }
\DoxyCodeLine{00049   \textcolor{comment}{// One of the creation flags must be set.}}
\DoxyCodeLine{00050   assert(flags \& kCreationMask);}
\DoxyCodeLine{00051 }
\DoxyCodeLine{00052   DWORD dwCreationDisposition;}
\DoxyCodeLine{00053 }
\DoxyCodeLine{00054   uint32 creationType = flags \& kCreationMask;}
\DoxyCodeLine{00055 }
\DoxyCodeLine{00056   \textcolor{keywordflow}{switch} (creationType) \{}
\DoxyCodeLine{00057   \textcolor{keywordflow}{case} kOpenExisting:}
\DoxyCodeLine{00058     dwCreationDisposition = OPEN\_EXISTING;}
\DoxyCodeLine{00059     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00060   \textcolor{keywordflow}{case} kOpenAlways:}
\DoxyCodeLine{00061     dwCreationDisposition = OPEN\_ALWAYS;}
\DoxyCodeLine{00062     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00063   \textcolor{keywordflow}{case} kCreateAlways:}
\DoxyCodeLine{00064     dwCreationDisposition = CREATE\_ALWAYS;}
\DoxyCodeLine{00065     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00066   \textcolor{keywordflow}{case} kCreateNew:}
\DoxyCodeLine{00067     dwCreationDisposition = CREATE\_NEW;}
\DoxyCodeLine{00068     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00069   \textcolor{keywordflow}{case} kTruncateExisting:}
\DoxyCodeLine{00070     dwCreationDisposition = TRUNCATE\_EXISTING;}
\DoxyCodeLine{00071     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00072   \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00073     assert(0);}
\DoxyCodeLine{00074     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00075   \}}
\DoxyCodeLine{00076 }
\DoxyCodeLine{00077   assert((flags \& (kSequential | kRandomAccess)) !=}
\DoxyCodeLine{00078          (kSequential | kRandomAccess));}
\DoxyCodeLine{00079 }
\DoxyCodeLine{00080   DWORD dwAttributes = FILE\_ATTRIBUTE\_NORMAL;}
\DoxyCodeLine{00081 }
\DoxyCodeLine{00082   \textcolor{keywordflow}{if} (flags \& kSequential) dwAttributes |= FILE\_FLAG\_SEQUENTIAL\_SCAN;}
\DoxyCodeLine{00083   \textcolor{keywordflow}{if} (flags \& kRandomAccess) dwAttributes |= FILE\_FLAG\_RANDOM\_ACCESS;}
\DoxyCodeLine{00084   \textcolor{keywordflow}{if} (flags \& kWriteThrough) dwAttributes |= FILE\_FLAG\_WRITE\_THROUGH;}
\DoxyCodeLine{00085   \textcolor{keywordflow}{if} (flags \& kUnbuffered) dwAttributes |= FILE\_FLAG\_NO\_BUFFERING;}
\DoxyCodeLine{00086   \textcolor{comment}{/*}}
\DoxyCodeLine{00087 \textcolor{comment}{if (pwszFilename \&\& !IsWindowsNT())}}
\DoxyCodeLine{00088 \textcolor{comment}{  pszFilename = VDFastTextWToA(pwszFilename);}}
\DoxyCodeLine{00089 \textcolor{comment}{*/}}
\DoxyCodeLine{00090   \textcolor{comment}{// if (pszFilename)}}
\DoxyCodeLine{00091   m\_hFile =}
\DoxyCodeLine{00092       CreateFileW(fname.getWideString().c\_str(), dwDesiredAccess, dwShareMode,}
\DoxyCodeLine{00093                   NULL, dwCreationDisposition, dwAttributes, NULL);}
\DoxyCodeLine{00094   \textcolor{comment}{/*}}
\DoxyCodeLine{00095 \textcolor{comment}{else}}
\DoxyCodeLine{00096 \textcolor{comment}{  m\_hFile = CreateFileW(pwszFilename, dwDesiredAccess, dwShareMode, NULL,}}
\DoxyCodeLine{00097 \textcolor{comment}{dwCreationDisposition, dwAttributes, NULL);}}
\DoxyCodeLine{00098 \textcolor{comment}{*/}}
\DoxyCodeLine{00099   \textcolor{comment}{// VDFastTextFree();}}
\DoxyCodeLine{00100 }
\DoxyCodeLine{00101   \textcolor{comment}{// INVALID\_HANDLE\_VALUE isn't NULL.  *sigh*}}
\DoxyCodeLine{00102 }
\DoxyCodeLine{00103   \textcolor{keywordflow}{if} (m\_hFile == INVALID\_HANDLE\_VALUE) \{}
\DoxyCodeLine{00104     m\_hFile = NULL;}
\DoxyCodeLine{00105 }
\DoxyCodeLine{00106     m\_ec = GetLastError();}
\DoxyCodeLine{00107 }
\DoxyCodeLine{00108     \textcolor{keywordflow}{if} (m\_ec == ERROR\_FILE\_NOT\_FOUND) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00109 }
\DoxyCodeLine{00110     \textcolor{keywordflow}{if} (m\_ec == ERROR\_PATH\_NOT\_FOUND \&\& creationType == kOpenExisting)}
\DoxyCodeLine{00111       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00112 }
\DoxyCodeLine{00113     \textcolor{comment}{/*}}
\DoxyCodeLine{00114 \textcolor{comment}{VDStringA}}
\DoxyCodeLine{00115 \textcolor{comment}{fname(TFileSplitPathRight(pszFilename?VDString(pszFilename):VDTextWToA(VDStringW(pwszFilename))));}}
\DoxyCodeLine{00116 \textcolor{comment}{}}
\DoxyCodeLine{00117 \textcolor{comment}{throw MyWin32Error("{}Cannot open file \(\backslash\)"{}\%s\(\backslash\)"{}:\(\backslash\)n\%\%s"{}, err, fname.c\_str());}}
\DoxyCodeLine{00118 \textcolor{comment}{*/}}
\DoxyCodeLine{00119   \}}
\DoxyCodeLine{00120 }
\DoxyCodeLine{00121   m\_FilePosition = 0;}
\DoxyCodeLine{00122 }
\DoxyCodeLine{00123   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00124 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_file_a3a4f92de72399e2a905286d0931ea7b7}\label{class_t_file_a3a4f92de72399e2a905286d0931ea7b7}} 
\index{TFile@{TFile}!read@{read}}
\index{read@{read}!TFile@{TFile}}
\doxysubsubsection{\texorpdfstring{read()}{read()}}
{\footnotesize\ttfamily TINT32 TFile\+::read (\begin{DoxyParamCaption}\item[{void $\ast$}]{buffer,  }\item[{TINT32}]{length }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00150                                               \{}
\DoxyCodeLine{00151   DWORD dwActual;}
\DoxyCodeLine{00152 }
\DoxyCodeLine{00153   \textcolor{keywordflow}{if} (!ReadFile(m\_hFile, buffer, (DWORD)length, \&dwActual, NULL)) \{}
\DoxyCodeLine{00154     m\_ec = GetLastError();}
\DoxyCodeLine{00155     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00156   \}}
\DoxyCodeLine{00157 }
\DoxyCodeLine{00158   m\_FilePosition += dwActual;}
\DoxyCodeLine{00159 }
\DoxyCodeLine{00160   \textcolor{keywordflow}{return} dwActual;}
\DoxyCodeLine{00161 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_file_a2ce23014e8c41ded755b73dc209ddcf2}\label{class_t_file_a2ce23014e8c41ded755b73dc209ddcf2}} 
\index{TFile@{TFile}!seek@{seek}}
\index{seek@{seek}!TFile@{TFile}}
\doxysubsubsection{\texorpdfstring{seek()}{seek()}}
{\footnotesize\ttfamily bool TFile\+::seek (\begin{DoxyParamCaption}\item[{TINT64}]{new\+Pos,  }\item[{TFile\+Consts\+::\+Seek\+Mode}]{mode = {\ttfamily TFileConsts\+:\+:seekStart} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00181                                              \{}
\DoxyCodeLine{00182   DWORD dwMode;}
\DoxyCodeLine{00183 }
\DoxyCodeLine{00184   \textcolor{keywordflow}{switch} (mode) \{}
\DoxyCodeLine{00185   \textcolor{keywordflow}{case} seekStart:}
\DoxyCodeLine{00186     dwMode = FILE\_BEGIN;}
\DoxyCodeLine{00187     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00188   \textcolor{keywordflow}{case} seekCur:}
\DoxyCodeLine{00189     dwMode = FILE\_CURRENT;}
\DoxyCodeLine{00190     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00191   \textcolor{keywordflow}{case} seekEnd:}
\DoxyCodeLine{00192     dwMode = FILE\_END;}
\DoxyCodeLine{00193     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00194   \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00195     assert(0);}
\DoxyCodeLine{00196     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00197   \}}
\DoxyCodeLine{00198 }
\DoxyCodeLine{00199   \textcolor{keyword}{union }\{}
\DoxyCodeLine{00200     TINT64 pos;}
\DoxyCodeLine{00201     LONG l[2];}
\DoxyCodeLine{00202   \} u = \{newPos\};}
\DoxyCodeLine{00203 }
\DoxyCodeLine{00204   u.l[0] = SetFilePointer(m\_hFile, u.l[0], \&u.l[1], dwMode);}
\DoxyCodeLine{00205 }
\DoxyCodeLine{00206   \textcolor{keywordflow}{if} (u.l[0] == -\/1 \&\& GetLastError() != NO\_ERROR) \{}
\DoxyCodeLine{00207     m\_ec = GetLastError();}
\DoxyCodeLine{00208     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00209   \}}
\DoxyCodeLine{00210 }
\DoxyCodeLine{00211   m\_FilePosition = u.pos;}
\DoxyCodeLine{00212   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00213 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_file_a57f845e408c928223bb44eb2a277f1e6}\label{class_t_file_a57f845e408c928223bb44eb2a277f1e6}} 
\index{TFile@{TFile}!size@{size}}
\index{size@{size}!TFile@{TFile}}
\doxysubsubsection{\texorpdfstring{size()}{size()}}
{\footnotesize\ttfamily TINT64 TFile\+::size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00230                    \{}
\DoxyCodeLine{00231   \textcolor{keyword}{union }\{}
\DoxyCodeLine{00232     UINT64 siz;}
\DoxyCodeLine{00233     DWORD l[2];}
\DoxyCodeLine{00234   \} u;}
\DoxyCodeLine{00235 }
\DoxyCodeLine{00236   u.l[0] = GetFileSize(m\_hFile, \&u.l[1]);}
\DoxyCodeLine{00237 }
\DoxyCodeLine{00238   DWORD err;}
\DoxyCodeLine{00239 }
\DoxyCodeLine{00240   \textcolor{keywordflow}{if} (u.l[0] == (DWORD)-\/1L \&\& (err = GetLastError()) != NO\_ERROR)}
\DoxyCodeLine{00241   \textcolor{comment}{// throw MyWin32Error("{}Error retrieving file size: \%\%s"{}, err);}}
\DoxyCodeLine{00242   \{}
\DoxyCodeLine{00243     m\_ec = GetLastError();}
\DoxyCodeLine{00244     \textcolor{keywordflow}{return} (TINT64)(-\/1);}
\DoxyCodeLine{00245   \}}
\DoxyCodeLine{00246   \textcolor{keywordflow}{return} (TINT64)u.siz;}
\DoxyCodeLine{00247 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_file_adec2c13aec9118ce9a776cb7d2fbbe27}\label{class_t_file_adec2c13aec9118ce9a776cb7d2fbbe27}} 
\index{TFile@{TFile}!skip@{skip}}
\index{skip@{skip}!TFile@{TFile}}
\doxysubsubsection{\texorpdfstring{skip()}{skip()}}
{\footnotesize\ttfamily bool TFile\+::skip (\begin{DoxyParamCaption}\item[{TINT64}]{delta }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00217                              \{}
\DoxyCodeLine{00218   \textcolor{keywordflow}{if} (!delta) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00219 }
\DoxyCodeLine{00220   \textcolor{keywordtype}{char} buf[1024];}
\DoxyCodeLine{00221 }
\DoxyCodeLine{00222   \textcolor{keywordflow}{if} (delta <= \textcolor{keyword}{sizeof} buf)}
\DoxyCodeLine{00223     \textcolor{keywordflow}{return} (TINT32)delta == read(buf, (TINT32)delta);}
\DoxyCodeLine{00224   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00225     \textcolor{keywordflow}{return} seek(delta, seekCur);}
\DoxyCodeLine{00226 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_file_ad9d4f38530699a157b090d40889d6243}\label{class_t_file_ad9d4f38530699a157b090d40889d6243}} 
\index{TFile@{TFile}!tell@{tell}}
\index{tell@{tell}!TFile@{TFile}}
\doxysubsubsection{\texorpdfstring{tell()}{tell()}}
{\footnotesize\ttfamily TINT64 TFile\+::tell (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00251 \{ \textcolor{keywordflow}{return} m\_FilePosition; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_file_a8e89f533150c534af9567d3fddea23af}\label{class_t_file_a8e89f533150c534af9567d3fddea23af}} 
\index{TFile@{TFile}!truncate@{truncate}}
\index{truncate@{truncate}!TFile@{TFile}}
\doxysubsubsection{\texorpdfstring{truncate()}{truncate()}}
{\footnotesize\ttfamily bool TFile\+::truncate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00142                      \{}
\DoxyCodeLine{00143   DWORD rc     = SetEndOfFile(m\_hFile);}
\DoxyCodeLine{00144   \textcolor{keywordflow}{if} (rc) m\_ec = GetLastError();}
\DoxyCodeLine{00145   \textcolor{keywordflow}{return} 0 != rc;}
\DoxyCodeLine{00146 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_file_abf9066c46de98865bee00730e70f7ac2}\label{class_t_file_abf9066c46de98865bee00730e70f7ac2}} 
\index{TFile@{TFile}!write@{write}}
\index{write@{write}!TFile@{TFile}}
\doxysubsubsection{\texorpdfstring{write()}{write()}}
{\footnotesize\ttfamily TINT32 TFile\+::write (\begin{DoxyParamCaption}\item[{const void $\ast$}]{buffer,  }\item[{TINT32}]{length }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00165                                                      \{}
\DoxyCodeLine{00166   DWORD dwActual;}
\DoxyCodeLine{00167 }
\DoxyCodeLine{00168   \textcolor{keywordflow}{if} (!WriteFile(m\_hFile, buffer, (DWORD)length, \&dwActual, NULL) ||}
\DoxyCodeLine{00169       dwActual != (DWORD)length) \{}
\DoxyCodeLine{00170     m\_ec = GetLastError();}
\DoxyCodeLine{00171     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00172   \}}
\DoxyCodeLine{00173 }
\DoxyCodeLine{00174   m\_FilePosition += dwActual;}
\DoxyCodeLine{00175 }
\DoxyCodeLine{00176   \textcolor{keywordflow}{return} dwActual;}
\DoxyCodeLine{00177 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/image/zcc/tfile.\+h\item 
E\+:/opentoonz/toonz/sources/image/zcc/tfile.\+cpp\end{DoxyCompactItemize}
