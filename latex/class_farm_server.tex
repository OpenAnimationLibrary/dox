\hypertarget{class_farm_server}{}\doxysection{Farm\+Server Class Reference}
\label{class_farm_server}\index{FarmServer@{FarmServer}}
Inheritance diagram for Farm\+Server\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4.000000cm]{class_farm_server}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_farm_server_aebed33c02417e20719ab5b7668690997}{Farm\+Server}} (int port, \mbox{\hyperlink{class_t_user_log}{TUser\+Log}} $\ast$log)
\item 
void \mbox{\hyperlink{class_farm_server_a3dc31036bd0e59d349b2f0365bd0c6c5}{set\+Controller}} (const \mbox{\hyperlink{class_controller_data}{Controller\+Data}} \&data)
\item 
\mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}} $\ast$ \mbox{\hyperlink{class_farm_server_a3bdf51eb0da814301809d5d747d100b6}{get\+Controller}} () const
\item 
\mbox{\Hypertarget{class_farm_server_aeb4f966bc570ecfc5a777995bfc42a04}\label{class_farm_server_aeb4f966bc570ecfc5a777995bfc42a04}} 
void {\bfseries set\+App\+Paths} (const std\+::vector$<$ \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} $>$ \&)
\item 
QString \mbox{\hyperlink{class_farm_server_af4b645b0b651985b77a4e559a28205c5}{execute}} (const std\+::vector$<$ QString $>$ \&argv) override
\item 
int \mbox{\hyperlink{class_farm_server_a1ec42fc6e706d010d52eca47b499b442}{add\+Task}} (const QString \&taskid, const QString \&cmdline) override
\item 
int \mbox{\hyperlink{class_farm_server_adb459afe60a4d6a47d7c36ec7b2b9f2b}{terminate\+Task}} (const QString \&taskid) override
\item 
int \mbox{\hyperlink{class_farm_server_a363d4dbb4c47e349b01ed21c28dc8409}{get\+Tasks}} (std\+::vector$<$ QString $>$ \&tasks) override
\item 
void \mbox{\hyperlink{class_farm_server_a522769f7055138180345738b15d89632}{query\+Hw\+Info}} (\mbox{\hyperlink{class_t_farm_server_1_1_hw_info}{Hw\+Info}} \&hw\+Info) override
\item 
void \mbox{\hyperlink{class_farm_server_ab2207e0da063bcc647af10d1661e682c}{attach\+Controller}} (const \mbox{\hyperlink{class_controller_data}{Controller\+Data}} \&data)
\item 
void \mbox{\hyperlink{class_farm_server_aca23fd3d070acf440c5dfa52296e0204}{attach\+Controller}} (const QString \&name, const QString \&addr, int port) override
\item 
void \mbox{\hyperlink{class_farm_server_a661b24c0b59d7575684a8c312b410851}{detach\+Controller}} (const \mbox{\hyperlink{class_controller_data}{Controller\+Data}} \&data)
\item 
void \mbox{\hyperlink{class_farm_server_ab71b23eec3126697d4f72281f11317bb}{detach\+Controller}} (const QString \&name, const QString \&addr, int port) override
\item 
void \mbox{\hyperlink{class_farm_server_aa2d67aad6f8c8e37ff6a61887e0c54b7}{remove\+Task}} (const QString \&id)
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_farm_server_aebed33c02417e20719ab5b7668690997}\label{class_farm_server_aebed33c02417e20719ab5b7668690997}} 
\index{FarmServer@{FarmServer}!FarmServer@{FarmServer}}
\index{FarmServer@{FarmServer}!FarmServer@{FarmServer}}
\doxysubsubsection{\texorpdfstring{FarmServer()}{FarmServer()}}
{\footnotesize\ttfamily Farm\+Server\+::\+Farm\+Server (\begin{DoxyParamCaption}\item[{int}]{port,  }\item[{\mbox{\hyperlink{class_t_user_log}{TUser\+Log}} $\ast$}]{log }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00503     : \mbox{\hyperlink{class_t_farm_executor}{TFarmExecutor}}(port), m\_controller(), m\_userLog(log) \{}
\DoxyCodeLine{00504   \mbox{\hyperlink{class_t_farm_server_1_1_hw_info}{TFarmServer::HwInfo}} hwInfo;}
\DoxyCodeLine{00505   queryHwInfo(hwInfo);}
\DoxyCodeLine{00506   m\_executor = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_thread_1_1_executor}{TThread::Executor}};}
\DoxyCodeLine{00507   m\_executor-\/>\mbox{\hyperlink{class_t_thread_1_1_executor_a85231531a2fa273db401f090c9aba4ea}{setMaxActiveTasks}}(1);}
\DoxyCodeLine{00508 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_server_a155f44763db11719ac0e2cac2bc2b931}\label{class_farm_server_a155f44763db11719ac0e2cac2bc2b931}} 
\index{FarmServer@{FarmServer}!````~FarmServer@{$\sim$FarmServer}}
\index{````~FarmServer@{$\sim$FarmServer}!FarmServer@{FarmServer}}
\doxysubsubsection{\texorpdfstring{$\sim$FarmServer()}{~FarmServer()}}
{\footnotesize\ttfamily Farm\+Server\+::$\sim$\+Farm\+Server (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00512 \{ \textcolor{keyword}{delete} m\_executor; \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_farm_server_a1ec42fc6e706d010d52eca47b499b442}\label{class_farm_server_a1ec42fc6e706d010d52eca47b499b442}} 
\index{FarmServer@{FarmServer}!addTask@{addTask}}
\index{addTask@{addTask}!FarmServer@{FarmServer}}
\doxysubsubsection{\texorpdfstring{addTask()}{addTask()}}
{\footnotesize\ttfamily int Farm\+Server\+::add\+Task (\begin{DoxyParamCaption}\item[{const QString \&}]{taskid,  }\item[{const QString \&}]{cmdline }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_server}{TFarm\+Server}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00575                                                                  \{}
\DoxyCodeLine{00576   \textcolor{comment}{// std::cout << "{}Server: addTask"{} << id << cmdline << std::endl;}}
\DoxyCodeLine{00577 }
\DoxyCodeLine{00578   QString lcmdline = cmdline;}
\DoxyCodeLine{00579 }
\DoxyCodeLine{00580   \textcolor{keywordflow}{if} (lcmdline.contains(\textcolor{stringliteral}{"{}runcasm"{}})) \{}
\DoxyCodeLine{00581     \textcolor{comment}{// il task e' runcasm}}
\DoxyCodeLine{00582     \mbox{\hyperlink{class_t_file_path}{TFilePath}} rootDir = getGlobalRoot();}
\DoxyCodeLine{00583     \mbox{\hyperlink{class_t_file_path}{TFilePath}} logfilePath =}
\DoxyCodeLine{00584         (rootDir + \textcolor{stringliteral}{"{}logs"{}} + \textcolor{keywordtype}{id}.toStdString()).withType(\textcolor{stringliteral}{"{}.log"{}});}
\DoxyCodeLine{00585 }
\DoxyCodeLine{00586     lcmdline +=}
\DoxyCodeLine{00587         \textcolor{stringliteral}{"{} -\/logfile "{}} + QString::fromStdWString(logfilePath.getWideString());}
\DoxyCodeLine{00588 }
\DoxyCodeLine{00589     \mbox{\hyperlink{class_t_file_path}{TFilePath}} casmpmeterFp = getBinRoot() + CASMPMETER;}
\DoxyCodeLine{00590 }
\DoxyCodeLine{00591     lcmdline += \textcolor{stringliteral}{"{} -\/ac "{}} + QString::fromStdWString(casmpmeterFp.getWideString());}
\DoxyCodeLine{00592     lcmdline += \textcolor{stringliteral}{"{} -\/ac\_args "{}} + QString(QUOTE\_STR);}
\DoxyCodeLine{00593     lcmdline += \textcolor{stringliteral}{"{}\$count \$total \$frame \$filename "{}} + \textcolor{keywordtype}{id} + QUOTE\_STR;}
\DoxyCodeLine{00594   \}}
\DoxyCodeLine{00595 }
\DoxyCodeLine{00596   \textcolor{keywordflow}{if} (lcmdline.contains(\textcolor{stringliteral}{"{}zrender"{}})) lcmdline += \textcolor{stringliteral}{"{} -\/taskid "{}} + id;}
\DoxyCodeLine{00597 }
\DoxyCodeLine{00598   \textcolor{keywordflow}{if} (lcmdline.contains(\textcolor{stringliteral}{"{}tcomposer"{}})) \{}
\DoxyCodeLine{00599     lcmdline += \textcolor{stringliteral}{"{} -\/farm "{}} + QString::number(m\_controllerData.m\_port) + \textcolor{stringliteral}{"{}@"{}} +}
\DoxyCodeLine{00600                 m\_controllerData.m\_hostName;}
\DoxyCodeLine{00601     lcmdline += \textcolor{stringliteral}{"{} -\/id "{}} + id;}
\DoxyCodeLine{00602   \}}
\DoxyCodeLine{00603 }
\DoxyCodeLine{00604   m\_executor-\/>\mbox{\hyperlink{class_t_thread_1_1_executor_af31c8db8ac72df4c342e7769e95e2135}{addTask}}(\textcolor{keyword}{new} \mbox{\hyperlink{class_task}{Task}}(\textcolor{keywordtype}{id}, lcmdline, m\_userLog, \textcolor{keyword}{this}, m\_controller));}
\DoxyCodeLine{00605 }
\DoxyCodeLine{00606   QMutexLocker sl(\&m\_mux);}
\DoxyCodeLine{00607   m\_tasks.push\_back(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00608   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00609 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_server_ab2207e0da063bcc647af10d1661e682c}\label{class_farm_server_ab2207e0da063bcc647af10d1661e682c}} 
\index{FarmServer@{FarmServer}!attachController@{attachController}}
\index{attachController@{attachController}!FarmServer@{FarmServer}}
\doxysubsubsection{\texorpdfstring{attachController()}{attachController()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Farm\+Server\+::attach\+Controller (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_controller_data}{Controller\+Data}} \&}]{data }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00671                                                             \{}
\DoxyCodeLine{00672   setController(data);}
\DoxyCodeLine{00673 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_server_aca23fd3d070acf440c5dfa52296e0204}\label{class_farm_server_aca23fd3d070acf440c5dfa52296e0204}} 
\index{FarmServer@{FarmServer}!attachController@{attachController}}
\index{attachController@{attachController}!FarmServer@{FarmServer}}
\doxysubsubsection{\texorpdfstring{attachController()}{attachController()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Farm\+Server\+::attach\+Controller (\begin{DoxyParamCaption}\item[{const QString \&}]{name,  }\item[{const QString \&}]{addr,  }\item[{int}]{port }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_server}{TFarm\+Server}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00307                                            \{}
\DoxyCodeLine{00308     attachController(\mbox{\hyperlink{class_controller_data}{ControllerData}}(name, addr, port));}
\DoxyCodeLine{00309   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_server_a661b24c0b59d7575684a8c312b410851}\label{class_farm_server_a661b24c0b59d7575684a8c312b410851}} 
\index{FarmServer@{FarmServer}!detachController@{detachController}}
\index{detachController@{detachController}!FarmServer@{FarmServer}}
\doxysubsubsection{\texorpdfstring{detachController()}{detachController()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Farm\+Server\+::detach\+Controller (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_controller_data}{Controller\+Data}} \&}]{data }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00677                                                             \{}
\DoxyCodeLine{00678   \textcolor{keywordflow}{if} (m\_controllerData == data) \{}
\DoxyCodeLine{00679     \textcolor{comment}{// delete m\_controller;}}
\DoxyCodeLine{00680     m\_controller = 0;}
\DoxyCodeLine{00681   \}}
\DoxyCodeLine{00682 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_server_ab71b23eec3126697d4f72281f11317bb}\label{class_farm_server_ab71b23eec3126697d4f72281f11317bb}} 
\index{FarmServer@{FarmServer}!detachController@{detachController}}
\index{detachController@{detachController}!FarmServer@{FarmServer}}
\doxysubsubsection{\texorpdfstring{detachController()}{detachController()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Farm\+Server\+::detach\+Controller (\begin{DoxyParamCaption}\item[{const QString \&}]{name,  }\item[{const QString \&}]{addr,  }\item[{int}]{port }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_server}{TFarm\+Server}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00313                                            \{}
\DoxyCodeLine{00314     detachController(\mbox{\hyperlink{class_controller_data}{ControllerData}}(name, addr, port));}
\DoxyCodeLine{00315   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_server_af4b645b0b651985b77a4e559a28205c5}\label{class_farm_server_af4b645b0b651985b77a4e559a28205c5}} 
\index{FarmServer@{FarmServer}!execute@{execute}}
\index{execute@{execute}!FarmServer@{FarmServer}}
\doxysubsubsection{\texorpdfstring{execute()}{execute()}}
{\footnotesize\ttfamily QString Farm\+Server\+::execute (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ QString $>$ \&}]{argv }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_executor}{TFarm\+Executor}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00515                                                           \{}
\DoxyCodeLine{00516   \textcolor{keywordflow}{if} (argv.size() > 0) \{}
\DoxyCodeLine{00517     \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}addTask"{}} \&\& argv.size() == 3) \{}
\DoxyCodeLine{00518       \textcolor{comment}{// assert(!"{}Da fare"{});}}
\DoxyCodeLine{00519       \textcolor{keywordtype}{int} ret = addTask(argv[1], argv[2]);}
\DoxyCodeLine{00520       \textcolor{keywordflow}{return} QString::number(ret);}
\DoxyCodeLine{00521     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}terminateTask"{}} \&\& argv.size() > 1) \{}
\DoxyCodeLine{00522       \textcolor{keywordtype}{int} ret = terminateTask(argv[1]);}
\DoxyCodeLine{00523       \textcolor{keywordflow}{return} QString::number(ret);}
\DoxyCodeLine{00524     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}getTasks"{}}) \{}
\DoxyCodeLine{00525       std::vector<QString> tasks;}
\DoxyCodeLine{00526       \textcolor{keywordtype}{int} ret = getTasks(tasks);}
\DoxyCodeLine{00527 }
\DoxyCodeLine{00528       QString reply(QString::number(ret));}
\DoxyCodeLine{00529       reply += \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00530 }
\DoxyCodeLine{00531       \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const} \&e : tasks) \{}
\DoxyCodeLine{00532         reply += e;}
\DoxyCodeLine{00533         reply += \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00534       \}}
\DoxyCodeLine{00535 }
\DoxyCodeLine{00536       \textcolor{keywordflow}{if} (!reply.isEmpty()) reply = reply.left(reply.size() -\/ 1);}
\DoxyCodeLine{00537 }
\DoxyCodeLine{00538       \textcolor{keywordflow}{return} reply;}
\DoxyCodeLine{00539     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}queryHwInfo"{}}) \{}
\DoxyCodeLine{00540       \mbox{\hyperlink{class_t_farm_server_1_1_hw_info}{TFarmServer::HwInfo}} hwInfo;}
\DoxyCodeLine{00541       queryHwInfo(hwInfo);}
\DoxyCodeLine{00542 }
\DoxyCodeLine{00543       QString ret;}
\DoxyCodeLine{00544       ret += QString::number((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long})hwInfo.m\_cpuCount);}
\DoxyCodeLine{00545       ret += \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00546       ret += QString::number((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long})(hwInfo.m\_totPhysMem / 1024));}
\DoxyCodeLine{00547       ret += \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00548       ret += QString::number((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long})(hwInfo.m\_availPhysMem / 1024));}
\DoxyCodeLine{00549       ret += \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00550       ret += QString::number((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long})(hwInfo.m\_totVirtMem / 1024));}
\DoxyCodeLine{00551       ret += \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00552       ret += QString::number((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long})(hwInfo.m\_availVirtMem / 1024));}
\DoxyCodeLine{00553       ret += \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00554       ret += QString::number(hwInfo.m\_type);}
\DoxyCodeLine{00555       \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00556     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}attachController"{}} \&\& argv.size() > 3) \{}
\DoxyCodeLine{00557       \textcolor{keywordtype}{int} port;}
\DoxyCodeLine{00558       fromStr(port, argv[3]);}
\DoxyCodeLine{00559       attachController(\mbox{\hyperlink{class_controller_data}{ControllerData}}(argv[1], argv[2], port));}
\DoxyCodeLine{00560       \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00561     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[0] == \textcolor{stringliteral}{"{}detachController"{}} \&\& argv.size() > 3) \{}
\DoxyCodeLine{00562       \textcolor{keywordtype}{int} port;}
\DoxyCodeLine{00563       fromStr(port, argv[3]);}
\DoxyCodeLine{00564       detachController(\mbox{\hyperlink{class_controller_data}{ControllerData}}(argv[1], argv[2], port));}
\DoxyCodeLine{00565       \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00566     \}}
\DoxyCodeLine{00567   \}}
\DoxyCodeLine{00568 }
\DoxyCodeLine{00569   \textcolor{keywordflow}{return} QString::number(-\/1);}
\DoxyCodeLine{00570   ;}
\DoxyCodeLine{00571 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_server_a3bdf51eb0da814301809d5d747d100b6}\label{class_farm_server_a3bdf51eb0da814301809d5d747d100b6}} 
\index{FarmServer@{FarmServer}!getController@{getController}}
\index{getController@{getController}!FarmServer@{FarmServer}}
\doxysubsubsection{\texorpdfstring{getController()}{getController()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_farm_controller}{TFarm\+Controller}} $\ast$ Farm\+Server\+::get\+Controller (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00293 \{ \textcolor{keywordflow}{return} m\_controller.getPointer(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_server_a363d4dbb4c47e349b01ed21c28dc8409}\label{class_farm_server_a363d4dbb4c47e349b01ed21c28dc8409}} 
\index{FarmServer@{FarmServer}!getTasks@{getTasks}}
\index{getTasks@{getTasks}!FarmServer@{FarmServer}}
\doxysubsubsection{\texorpdfstring{getTasks()}{getTasks()}}
{\footnotesize\ttfamily int Farm\+Server\+::get\+Tasks (\begin{DoxyParamCaption}\item[{std\+::vector$<$ QString $>$ \&}]{tasks }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_server}{TFarm\+Server}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00634                                                   \{}
\DoxyCodeLine{00635   QMutexLocker sl(\&m\_mux);}
\DoxyCodeLine{00636   tasks = m\_tasks;}
\DoxyCodeLine{00637   \textcolor{keywordflow}{return} m\_tasks.size();}
\DoxyCodeLine{00638 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_server_a522769f7055138180345738b15d89632}\label{class_farm_server_a522769f7055138180345738b15d89632}} 
\index{FarmServer@{FarmServer}!queryHwInfo@{queryHwInfo}}
\index{queryHwInfo@{queryHwInfo}!FarmServer@{FarmServer}}
\doxysubsubsection{\texorpdfstring{queryHwInfo()}{queryHwInfo()}}
{\footnotesize\ttfamily void Farm\+Server\+::query\+Hw\+Info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_farm_server_1_1_hw_info}{Hw\+Info}} \&}]{hw\+Info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_server}{TFarm\+Server}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00642                                            \{}
\DoxyCodeLine{00643 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{00644   MEMORYSTATUS buff;}
\DoxyCodeLine{00645   GlobalMemoryStatus(\&buff);}
\DoxyCodeLine{00646 }
\DoxyCodeLine{00647   hwInfo.m\_totPhysMem   = buff.dwTotalPhys;}
\DoxyCodeLine{00648   hwInfo.m\_availPhysMem = buff.dwAvailPhys;}
\DoxyCodeLine{00649   hwInfo.m\_totVirtMem   = buff.dwTotalVirtual;}
\DoxyCodeLine{00650   hwInfo.m\_availVirtMem = buff.dwAvailVirtual;}
\DoxyCodeLine{00651   hwInfo.m\_cpuCount     = TSystem::getProcessorCount();}
\DoxyCodeLine{00652   hwInfo.m\_type         = Windows;}
\DoxyCodeLine{00653 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00654   \textcolor{comment}{// We can just retrieve the overall physical memory -\/ the rest is defaulted to}}
\DoxyCodeLine{00655   \textcolor{comment}{// 500 MB}}
\DoxyCodeLine{00656   hwInfo.m\_totPhysMem   = TSystem::getMemorySize(\textcolor{keyword}{true});}
\DoxyCodeLine{00657   hwInfo.m\_availPhysMem = TSystem::getFreeMemorySize(\textcolor{keyword}{true});}
\DoxyCodeLine{00658   hwInfo.m\_totVirtMem   = 500000000;}
\DoxyCodeLine{00659   hwInfo.m\_availVirtMem = 500000000;}
\DoxyCodeLine{00660   hwInfo.m\_cpuCount     = TSystem::getProcessorCount();}
\DoxyCodeLine{00661 \textcolor{preprocessor}{\#ifdef \_\_sgi}}
\DoxyCodeLine{00662   hwInfo.m\_type         = Irix;}
\DoxyCodeLine{00663 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00664   hwInfo.m\_type         = Linux;}
\DoxyCodeLine{00665 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00666 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00667 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_server_aa2d67aad6f8c8e37ff6a61887e0c54b7}\label{class_farm_server_aa2d67aad6f8c8e37ff6a61887e0c54b7}} 
\index{FarmServer@{FarmServer}!removeTask@{removeTask}}
\index{removeTask@{removeTask}!FarmServer@{FarmServer}}
\doxysubsubsection{\texorpdfstring{removeTask()}{removeTask()}}
{\footnotesize\ttfamily void Farm\+Server\+::remove\+Task (\begin{DoxyParamCaption}\item[{const QString \&}]{id }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00686                                              \{}
\DoxyCodeLine{00687   QMutexLocker sl(\&m\_mux);}
\DoxyCodeLine{00688   std::vector<QString>::iterator it = find(m\_tasks.begin(), m\_tasks.end(), \textcolor{keywordtype}{id});}
\DoxyCodeLine{00689   \textcolor{keywordflow}{if} (it != m\_tasks.end()) m\_tasks.erase(it);}
\DoxyCodeLine{00690 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_server_a3dc31036bd0e59d349b2f0365bd0c6c5}\label{class_farm_server_a3dc31036bd0e59d349b2f0365bd0c6c5}} 
\index{FarmServer@{FarmServer}!setController@{setController}}
\index{setController@{setController}!FarmServer@{FarmServer}}
\doxysubsubsection{\texorpdfstring{setController()}{setController()}}
{\footnotesize\ttfamily void Farm\+Server\+::set\+Controller (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_controller_data}{Controller\+Data}} \&}]{data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00286                                                  \{}
\DoxyCodeLine{00287     m\_controllerData            = data;}
\DoxyCodeLine{00288     \mbox{\hyperlink{class_t_farm_controller}{TFarmController}} *controller = 0;}
\DoxyCodeLine{00289     \mbox{\hyperlink{class_t_farm_controller_factory}{TFarmControllerFactory}} factory;}
\DoxyCodeLine{00290     factory.create(data, \&controller);}
\DoxyCodeLine{00291     m\_controller = controller;}
\DoxyCodeLine{00292   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_farm_server_adb459afe60a4d6a47d7c36ec7b2b9f2b}\label{class_farm_server_adb459afe60a4d6a47d7c36ec7b2b9f2b}} 
\index{FarmServer@{FarmServer}!terminateTask@{terminateTask}}
\index{terminateTask@{terminateTask}!FarmServer@{FarmServer}}
\doxysubsubsection{\texorpdfstring{terminateTask()}{terminateTask()}}
{\footnotesize\ttfamily int Farm\+Server\+::terminate\+Task (\begin{DoxyParamCaption}\item[{const QString \&}]{taskid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_farm_server}{TFarm\+Server}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00613                                                    \{}
\DoxyCodeLine{00614 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{00615   HANDLE hJob = OpenJobObject(MAXIMUM\_ALLOWED,  \textcolor{comment}{// access right}}
\DoxyCodeLine{00616                               TRUE,             \textcolor{comment}{// inheritance state}}
\DoxyCodeLine{00617 \#\textcolor{keywordflow}{if} QT\_VERSION >= 0x050500}
\DoxyCodeLine{00618                               taskid.toUtf8());  \textcolor{comment}{// job name}}
\DoxyCodeLine{00619 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00620                               taskid.toAscii());              \textcolor{comment}{// job name}}
\DoxyCodeLine{00621 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00622 }
\DoxyCodeLine{00623   \textcolor{keywordflow}{if} (hJob != NULL) \{}
\DoxyCodeLine{00624     BOOL res = TerminateJobObject(hJob,  \textcolor{comment}{// handle to job}}
\DoxyCodeLine{00625                                   2);    \textcolor{comment}{// exit code}}
\DoxyCodeLine{00626   \}}
\DoxyCodeLine{00627 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00628 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00629   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00630 \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonzfarm/tfarmserver/tfarmserver.\+cpp\end{DoxyCompactItemize}
