\hypertarget{class_pinch_tool}{}\doxysection{Pinch\+Tool Class Reference}
\label{class_pinch_tool}\index{PinchTool@{PinchTool}}
Inheritance diagram for Pinch\+Tool\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_pinch_tool}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} \mbox{\hyperlink{class_pinch_tool_a98f63d41e7992412ee9c7fdc15cc0bc0}{get\+Tool\+Type}} () const override
\item 
void \mbox{\hyperlink{class_pinch_tool_aefa1dc1574c0cc328f6d856574cab749}{set\+Show\+Selector}} (bool show)
\item 
void \mbox{\hyperlink{class_pinch_tool_a9e2b21db6abd6214929ee7a05adee9fc}{on\+Enter}} () override
\begin{DoxyCompactList}\small\item\em Callback for the mouse entering the viewer area. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_pinch_tool_a97b1d30e3a6e4c825af23d1315f4cd46}{on\+Leave}} () override
\begin{DoxyCompactList}\small\item\em Callback for the mouse leaving the viewer area. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_pinch_tool_a437f226cd72c7acdefdcf30c29eee6b3}{update\+Translation}} () override
\item 
void \mbox{\hyperlink{class_pinch_tool_a1f3ec0529ae587fd265d5459580221db}{draw}} () override
\begin{DoxyCompactList}\small\item\em Draws the tool on the viewer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_pinch_tool_a0f8ecc02fcd3ecd1eb8dee710a0f5e7c}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\item 
void \mbox{\hyperlink{class_pinch_tool_ab91f7c8a2024043a0ecef23b0b74719a}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_pinch_tool_aff1c7af8387dcb943013bae8834896fd}{left\+Button\+Up}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_pinch_tool_aadcdfc427a1f4835606f5473c6accbf8}{invalidate\+Cursor\+Area}} ()
\item 
void \mbox{\hyperlink{class_pinch_tool_a46c38e31a4ebd9d01a9ad4f451db6e9b}{mouse\+Move}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
bool \mbox{\hyperlink{class_pinch_tool_a53a5de788c40a06158838c844e334e4e}{move\+Cursor}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos)
\item 
bool \mbox{\hyperlink{class_pinch_tool_a2b9f83f0deb82591ef28153e165841a4}{key\+Down}} (QKey\+Event $\ast$) override
\item 
void \mbox{\hyperlink{class_pinch_tool_a12ac33f584902b9b8e3e5fbc9b6227ee}{on\+Activate}} () override
\begin{DoxyCompactList}\small\item\em Callback invoked whenever the tool activates. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_pinch_tool_a818e30c045481b44bb607d6dd19ddb2a}{on\+Deactivate}} () override
\begin{DoxyCompactList}\small\item\em Callback for tool deactivation, includes tool switch. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_pinch_tool_aa46cd204b0aae5b433134d28114b857e}{update}} (const \mbox{\hyperlink{class_t_global_change}{TGlobal\+Change}} \&)
\item 
void \mbox{\hyperlink{class_pinch_tool_aa66410f4fdc7d43dc7eb563ec8f3da8b}{on\+Image\+Changed}} () override
\begin{DoxyCompactList}\small\item\em Notifies changes in the image in use. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_pinch_tool_a2dc5ad5048a1122d78de61faf3e38533}{get\+Cursor\+Id}} () const override
\begin{DoxyCompactList}\small\item\em Returns the type of cursor used by the tool. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ \mbox{\hyperlink{class_pinch_tool_a57845306067d735406a3c6f03a616827}{get\+Properties}} (int target\+Type) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_pinch_tool_a55c35d4f41ff255cca05d3eb1090e251}\label{class_pinch_tool_a55c35d4f41ff255cca05d3eb1090e251}} 
\index{PinchTool@{PinchTool}!PinchTool@{PinchTool}}
\index{PinchTool@{PinchTool}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{PinchTool()}{PinchTool()}}
{\footnotesize\ttfamily Pinch\+Tool\+::\+Pinch\+Tool (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00070     : \mbox{\hyperlink{class_t_tool_a9c63ec35f606e755d0d036bf4fed62ab}{TTool}}(\textcolor{stringliteral}{"{}T\_Pinch"{}})}
\DoxyCodeLine{00071     , m\_active(\textcolor{keyword}{false})}
\DoxyCodeLine{00072     , m\_cursorEnabled(\textcolor{keyword}{false})}
\DoxyCodeLine{00073     , m\_draw(\textcolor{keyword}{false})}
\DoxyCodeLine{00074     , m\_undo(0)}
\DoxyCodeLine{00075     , m\_showSelector(\textcolor{keyword}{true})}
\DoxyCodeLine{00076     , m\_toolRange(\textcolor{stringliteral}{"{}Size:"{}}, 1.0, 10000.0, 500.0)  \textcolor{comment}{// W\_ToolOptions\_PinchTool}}
\DoxyCodeLine{00077     , m\_toolCornerSize(\textcolor{stringliteral}{"{}Corner:"{}}, 1.0, 180.0,}
\DoxyCodeLine{00078                        160.0)          \textcolor{comment}{// W\_ToolOptions\_PinchCorner}}
\DoxyCodeLine{00079     , m\_autoOrManual(\textcolor{stringliteral}{"{}Manual"{}}, \textcolor{keyword}{false})  \textcolor{comment}{// W\_ToolOptions\_PinchManual}}
\DoxyCodeLine{00080     , m\_deformation(\textcolor{keyword}{new} \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation}{ToonzExt::StrokeDeformation}})}
\DoxyCodeLine{00081     , m\_selector(500, 10, 1000) \{}
\DoxyCodeLine{00082   bind(TTool::Vectors);}
\DoxyCodeLine{00083 }
\DoxyCodeLine{00084   m\_toolRange.setNonLinearSlider();}
\DoxyCodeLine{00085 }
\DoxyCodeLine{00086   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_toolCornerSize);}
\DoxyCodeLine{00087   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_autoOrManual);}
\DoxyCodeLine{00088   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_toolRange);}
\DoxyCodeLine{00089 }
\DoxyCodeLine{00090   CornerDeformation::instance()-\/>setCursorId(ToolCursor::PinchWaveCursor);}
\DoxyCodeLine{00091   SmoothDeformation::instance()-\/>setCursorId(ToolCursor::PinchCursor);}
\DoxyCodeLine{00092   StraightCornerDeformation::instance()-\/>setCursorId(}
\DoxyCodeLine{00093       ToolCursor::PinchAngleCursor);}
\DoxyCodeLine{00094   assert(m\_deformation \&\& \textcolor{stringliteral}{"{}Can not create a deformation CATASTROFIC!!!"{}});}
\DoxyCodeLine{00095 }
\DoxyCodeLine{00096   \mbox{\hyperlink{class_t_mouse_event}{TMouseEvent}} dummy;}
\DoxyCodeLine{00097   updateInterfaceStatus(dummy);}
\DoxyCodeLine{00098   m\_autoOrManual.setId(\textcolor{stringliteral}{"{}Manual"{}});}
\DoxyCodeLine{00099 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_pinch_tool_ab1acb6a0d949ca0c3b952752b0943385}\label{class_pinch_tool_ab1acb6a0d949ca0c3b952752b0943385}} 
\index{PinchTool@{PinchTool}!````~PinchTool@{$\sim$PinchTool}}
\index{````~PinchTool@{$\sim$PinchTool}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{$\sim$PinchTool()}{~PinchTool()}}
{\footnotesize\ttfamily Pinch\+Tool\+::$\sim$\+Pinch\+Tool (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00103                       \{}
\DoxyCodeLine{00104   \textcolor{keyword}{delete} m\_deformation;}
\DoxyCodeLine{00105   m\_deformation = 0;}
\DoxyCodeLine{00106 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_pinch_tool_a1f3ec0529ae587fd265d5459580221db}\label{class_pinch_tool_a1f3ec0529ae587fd265d5459580221db}} 
\index{PinchTool@{PinchTool}!draw@{draw}}
\index{draw@{draw}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Pinch\+Tool\+::draw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Draws the tool on the viewer. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a058bf656d73bf3cd63b9826cbaaf48e0}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00414                      \{}
\DoxyCodeLine{00415   GLMatrixGuard guard;}
\DoxyCodeLine{00416 }
\DoxyCodeLine{00417   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} img(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}));}
\DoxyCodeLine{00418   \textcolor{keywordflow}{if} (!img ||}
\DoxyCodeLine{00419       img-\/>getStrokeCount() ==}
\DoxyCodeLine{00420           0)  \textcolor{comment}{// Controllo che il numero degli stroke nell'immagine sia != 0}}
\DoxyCodeLine{00421     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00422   \textcolor{keywordflow}{if} (!m\_draw) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00423 }
\DoxyCodeLine{00424   \mbox{\hyperlink{struct_toonz_ext_1_1_context_status}{ContextStatus}} *status = \&m\_status;}
\DoxyCodeLine{00425   \textcolor{keywordflow}{if} (!status) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00426 }
\DoxyCodeLine{00427   \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation}{StrokeDeformation}} *deformation = m\_deformation;}
\DoxyCodeLine{00428 }
\DoxyCodeLine{00429   \mbox{\hyperlink{class_toonz_ext_1_1_overall_designer}{OverallDesigner}} designer((\textcolor{keywordtype}{int})m\_curr.x, (\textcolor{keywordtype}{int})m\_curr.y);}
\DoxyCodeLine{00430 }
\DoxyCodeLine{00431   \textcolor{comment}{// m\_active == true means that a button down is done (drag)}}
\DoxyCodeLine{00432   \textcolor{keywordflow}{if} (!m\_active) \{}
\DoxyCodeLine{00433     \textcolor{keywordflow}{if} (m\_cursorEnabled) \{}
\DoxyCodeLine{00434       glColor3d(1, 0, 1);}
\DoxyCodeLine{00435       \textcolor{keywordflow}{if} (m\_cursor.thick > 0) tglDrawCircle(m\_cursor, m\_cursor.thick);}
\DoxyCodeLine{00436       tglDrawCircle(m\_cursor, m\_cursor.thick + 4 * status-\/>pixelSize\_);}
\DoxyCodeLine{00437     \}}
\DoxyCodeLine{00438   \}}
\DoxyCodeLine{00439 }
\DoxyCodeLine{00440   \textcolor{comment}{// internal deformer can be changed during draw}}
\DoxyCodeLine{00441   \textcolor{keywordflow}{if} (!m\_selector.isSelected()) deformation-\/>draw(\&designer);}
\DoxyCodeLine{00442 }
\DoxyCodeLine{00443   m\_selector.draw(\&designer);}
\DoxyCodeLine{00444   CHECK\_ERRORS\_BY\_GL;}
\DoxyCodeLine{00445 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00276}{TTool\+::get\+Image()}}.

\mbox{\Hypertarget{class_pinch_tool_a2dc5ad5048a1122d78de61faf3e38533}\label{class_pinch_tool_a2dc5ad5048a1122d78de61faf3e38533}} 
\index{PinchTool@{PinchTool}!getCursorId@{getCursorId}}
\index{getCursorId@{getCursorId}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{getCursorId()}{getCursorId()}}
{\footnotesize\ttfamily int Pinch\+Tool\+::get\+Cursor\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Returns the type of cursor used by the tool. 

\begin{DoxySeeAlso}{See also}
For a list of cursor ids \mbox{\hyperlink{}{cursor.\+h}} 
\end{DoxySeeAlso}


Reimplemented from \mbox{\hyperlink{class_t_tool_a1768a57b8b6d1480618fd923fad15f1d}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00099 \{ \textcolor{keywordflow}{return} updateCursor(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_pinch_tool_a57845306067d735406a3c6f03a616827}\label{class_pinch_tool_a57845306067d735406a3c6f03a616827}} 
\index{PinchTool@{PinchTool}!getProperties@{getProperties}}
\index{getProperties@{getProperties}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{getProperties()}{getProperties()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ Pinch\+Tool\+::get\+Properties (\begin{DoxyParamCaption}\item[{int}]{target\+Type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00100 \{ \textcolor{keywordflow}{return} \&m\_prop; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_pinch_tool_a98f63d41e7992412ee9c7fdc15cc0bc0}\label{class_pinch_tool_a98f63d41e7992412ee9c7fdc15cc0bc0}} 
\index{PinchTool@{PinchTool}!getToolType@{getToolType}}
\index{getToolType@{getToolType}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{getToolType()}{getToolType()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} Pinch\+Tool\+::get\+Tool\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00066 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca01ffd66b00b05a88c02ce8ceb5da3b8b}{TTool::LevelWriteTool}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_pinch_tool_aadcdfc427a1f4835606f5473c6accbf8}\label{class_pinch_tool_aadcdfc427a1f4835606f5473c6accbf8}} 
\index{PinchTool@{PinchTool}!invalidateCursorArea@{invalidateCursorArea}}
\index{invalidateCursorArea@{invalidateCursorArea}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{invalidateCursorArea()}{invalidateCursorArea()}}
{\footnotesize\ttfamily void Pinch\+Tool\+::invalidate\+Cursor\+Area (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00449                                      \{}
\DoxyCodeLine{00450   \textcolor{keywordtype}{double} r = m\_cursor.thick + 6;}
\DoxyCodeLine{00451   \mbox{\hyperlink{class_t_point_t}{TPointD}} d(r, r);}
\DoxyCodeLine{00452   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}(\mbox{\hyperlink{class_t_rect_t}{TRectD}}(m\_cursor -\/ d, m\_cursor + d));}
\DoxyCodeLine{00453 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_pinch_tool_a2b9f83f0deb82591ef28153e165841a4}\label{class_pinch_tool_a2b9f83f0deb82591ef28153e165841a4}} 
\index{PinchTool@{PinchTool}!keyDown@{keyDown}}
\index{keyDown@{keyDown}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{keyDown()}{keyDown()}}
{\footnotesize\ttfamily bool Pinch\+Tool\+::key\+Down (\begin{DoxyParamCaption}\item[{QKey\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00503                                         \{}
\DoxyCodeLine{00504   \textcolor{keywordflow}{if} (!m\_active) m\_deformation-\/>\mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_a1a1f825799dd5ba677d138e84db7e236}{reset}}();}
\DoxyCodeLine{00505 }
\DoxyCodeLine{00506 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{00507   \textcolor{keywordtype}{char} c = (char)key;}
\DoxyCodeLine{00508   \textcolor{keywordflow}{if}(c == \textcolor{charliteral}{'p'} ||}
\DoxyCodeLine{00509      c == \textcolor{charliteral}{'P'} )}
\DoxyCodeLine{00510   \{}
\DoxyCodeLine{00511     \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vimage(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}());      }
\DoxyCodeLine{00512     \textcolor{keywordflow}{if}(!vimage)}
\DoxyCodeLine{00513       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00514     }
\DoxyCodeLine{00515     \textcolor{keywordtype}{char}  fileName[] = \{\textcolor{stringliteral}{"{}c:\(\backslash\)\(\backslash\)toonz\_input.sdd"{}}\};}
\DoxyCodeLine{00516     ofstream  out\_file(fileName);}
\DoxyCodeLine{00517     \textcolor{keywordflow}{if}(!out\_file)}
\DoxyCodeLine{00518     \{}
\DoxyCodeLine{00519       cerr<<\textcolor{stringliteral}{"{}Error on opening: "{}}<<fileName<<endl;}
\DoxyCodeLine{00520       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00521     \}}
\DoxyCodeLine{00522     }
\DoxyCodeLine{00523     out\_file<<\textcolor{stringliteral}{"{}\# VImage info\(\backslash\)n"{}};}
\DoxyCodeLine{00524     out\_file<<\textcolor{stringliteral}{"{}\# Number of stroke:\(\backslash\)n"{}};}
\DoxyCodeLine{00525     \textcolor{keyword}{const} \textcolor{keywordtype}{int} max\_number\_of\_strokes = vimage-\/>getStrokeCount();}
\DoxyCodeLine{00526     out\_file<<max\_number\_of\_strokes<<endl;}
\DoxyCodeLine{00527     \textcolor{keywordtype}{int} number\_of\_strokes = 0;}
\DoxyCodeLine{00528     \textcolor{keyword}{const} \textcolor{keywordtype}{int} cp\_for\_row=3;}
\DoxyCodeLine{00529     \textcolor{keywordflow}{while}( number\_of\_strokes<max\_number\_of\_strokes)}
\DoxyCodeLine{00530     \{}
\DoxyCodeLine{00531       \mbox{\hyperlink{class_t_stroke}{TStroke}}* ref = vimage-\/>getStroke(number\_of\_strokes);}
\DoxyCodeLine{00532       out\_file<<endl;}
\DoxyCodeLine{00533       out\_file<<\textcolor{stringliteral}{"{}\# Number of control points for stroke:\(\backslash\)n"{}};}
\DoxyCodeLine{00534       \textcolor{keyword}{const} \textcolor{keywordtype}{int} max\_number\_of\_cp = ref-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}();}
\DoxyCodeLine{00535       out\_file<<max\_number\_of\_cp <<endl;}
\DoxyCodeLine{00536       out\_file<<\textcolor{stringliteral}{"{}\# Control Points:\(\backslash\)n"{}};}
\DoxyCodeLine{00537       \textcolor{keywordtype}{int} number\_of\_cp=0;}
\DoxyCodeLine{00538       \textcolor{keywordflow}{while}( number\_of\_cp<max\_number\_of\_cp )}
\DoxyCodeLine{00539       \{}
\DoxyCodeLine{00540         out\_file<<ref-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(number\_of\_cp)<<\textcolor{stringliteral}{"{} "{}};}
\DoxyCodeLine{00541         \textcolor{keywordflow}{if}(!((number\_of\_cp+1)\%cp\_for\_row)) \textcolor{comment}{// add a new line after ten points}}
\DoxyCodeLine{00542           out\_file<<endl;}
\DoxyCodeLine{00543         number\_of\_cp++;}
\DoxyCodeLine{00544       \}}
\DoxyCodeLine{00545       out\_file<<endl;}
\DoxyCodeLine{00546       number\_of\_strokes++;}
\DoxyCodeLine{00547     \}}
\DoxyCodeLine{00548   \}}
\DoxyCodeLine{00549 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00550   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00551 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_pinch_tool_a0f8ecc02fcd3ecd1eb8dee710a0f5e7c}\label{class_pinch_tool_a0f8ecc02fcd3ecd1eb8dee710a0f5e7c}} 
\index{PinchTool@{PinchTool}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily void Pinch\+Tool\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00190                                                                            \{}
\DoxyCodeLine{00191   \textcolor{keywordflow}{if} (getViewer() \&\& getViewer()-\/>getGuidedStrokePickerMode()) \{}
\DoxyCodeLine{00192     getViewer()-\/>doPickGuideStroke(pos);}
\DoxyCodeLine{00193     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00194   \}}
\DoxyCodeLine{00195 }
\DoxyCodeLine{00196   m\_curr = m\_down = pos;}
\DoxyCodeLine{00197 }
\DoxyCodeLine{00198   \textcolor{keywordflow}{if} (!m\_active \&\& !m\_selector.isSelected()) \{}
\DoxyCodeLine{00199     m\_active = \textcolor{keyword}{false};}
\DoxyCodeLine{00200 }
\DoxyCodeLine{00201     assert(m\_undo == 0);}
\DoxyCodeLine{00202 }
\DoxyCodeLine{00203     \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation}{StrokeDeformation}} *deformation = m\_deformation;}
\DoxyCodeLine{00204 }
\DoxyCodeLine{00205     \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi = \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}));}
\DoxyCodeLine{00206 }
\DoxyCodeLine{00207     \textcolor{keywordflow}{if} (!vi) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00208 }
\DoxyCodeLine{00209     m\_active = \textcolor{keyword}{true};}
\DoxyCodeLine{00210 }
\DoxyCodeLine{00211     \mbox{\hyperlink{struct_toonz_ext_1_1_context_status}{ContextStatus}} *status = \&m\_status;}
\DoxyCodeLine{00212 }
\DoxyCodeLine{00213     \textcolor{comment}{// reset status}}
\DoxyCodeLine{00214     status-\/>init();}
\DoxyCodeLine{00215 }
\DoxyCodeLine{00216     \textcolor{keywordtype}{double} w, dist2;}
\DoxyCodeLine{00217 }
\DoxyCodeLine{00218     \textcolor{comment}{// find nearest stroke}}
\DoxyCodeLine{00219     \textcolor{keywordflow}{if} (vi-\/>getNearestStroke(m\_down, w, m\_n, dist2, \textcolor{keyword}{true})) \{}
\DoxyCodeLine{00220       \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = vi-\/>getStroke(m\_n);}
\DoxyCodeLine{00221       assert(stroke \&\& \textcolor{stringliteral}{"{}Not valid stroke found!!!"{}});}
\DoxyCodeLine{00222       \textcolor{keywordflow}{if} (!stroke) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00223 }
\DoxyCodeLine{00224       updateStrokeStatus(stroke, w);}
\DoxyCodeLine{00225 }
\DoxyCodeLine{00226       \textcolor{comment}{// set parameters from sliders}}
\DoxyCodeLine{00227       updateInterfaceStatus(event);}
\DoxyCodeLine{00228 }
\DoxyCodeLine{00229       deformation-\/>activate(status);}
\DoxyCodeLine{00230 }
\DoxyCodeLine{00231       \textcolor{comment}{// stroke can be changed (replaced by another) during deformation activate}}
\DoxyCodeLine{00232       \textcolor{keywordflow}{if} (TTool::getApplication()-\/>getCurrentObject()-\/>isSpline())}
\DoxyCodeLine{00233         m\_undo = \textcolor{keyword}{new} \mbox{\hyperlink{class_tool_utils_1_1_undo_path}{ToolUtils::UndoPath}}(}
\DoxyCodeLine{00234             \mbox{\hyperlink{class_t_tool_a8716e1462da359f4902c044a79f2d40d}{getXsheet}}()-\/>getStageObject(\mbox{\hyperlink{class_t_tool_a25b57b82dfac131d9d6405e07fbd98b4}{getObjectId}}())-\/>getSpline());}
\DoxyCodeLine{00235       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00236         \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl =}
\DoxyCodeLine{00237             TTool::getApplication()-\/>getCurrentLevel()-\/>getSimpleLevel();}
\DoxyCodeLine{00238         assert(sl);}
\DoxyCodeLine{00239         \mbox{\hyperlink{class_t_frame_id}{TFrameId}} \textcolor{keywordtype}{id} = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{00240         m\_undo      = \textcolor{keyword}{new} \mbox{\hyperlink{class_tool_utils_1_1_undo_modify_stroke_and_paint}{UndoModifyStrokeAndPaint}}(sl, \textcolor{keywordtype}{id}, m\_n);}
\DoxyCodeLine{00241       \}}
\DoxyCodeLine{00242     \}}
\DoxyCodeLine{00243   \}}
\DoxyCodeLine{00244 }
\DoxyCodeLine{00245   m\_selector.mouseDown(m\_curr);}
\DoxyCodeLine{00246   m\_prev = m\_curr;}
\DoxyCodeLine{00247 }
\DoxyCodeLine{00248   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00249 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_pinch_tool_ab91f7c8a2024043a0ecef23b0b74719a}\label{class_pinch_tool_ab91f7c8a2024043a0ecef23b0b74719a}} 
\index{PinchTool@{PinchTool}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Pinch\+Tool\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00253                                                                        \{}
\DoxyCodeLine{00254   m\_curr = pos;}
\DoxyCodeLine{00255 }
\DoxyCodeLine{00256   \textcolor{keywordflow}{if} (m\_selector.isSelected()) \{}
\DoxyCodeLine{00257     m\_selector.mouseDrag(m\_curr);}
\DoxyCodeLine{00258     TDoubleProperty::Range prop\_range = m\_toolRange.getRange();}
\DoxyCodeLine{00259     \textcolor{keywordtype}{double} val\_in\_range               = m\_selector.getLength();}
\DoxyCodeLine{00260 }
\DoxyCodeLine{00261     \textcolor{comment}{// set value in range}}
\DoxyCodeLine{00262     val\_in\_range =}
\DoxyCodeLine{00263         std::max(std::min(val\_in\_range, prop\_range.second), prop\_range.first);}
\DoxyCodeLine{00264     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00265       m\_toolRange.setValue(val\_in\_range);}
\DoxyCodeLine{00266       TTool::getApplication()-\/>getCurrentTool()-\/>\mbox{\hyperlink{class_tool_handle_a39e34f1a30868bad11a629228b07bd40}{notifyToolChanged}}();}
\DoxyCodeLine{00267     \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_property_1_1_range_error}{TDoubleProperty::RangeError}} \&) \{}
\DoxyCodeLine{00268       m\_toolRange.setValue((prop\_range.first + prop\_range.second) * 0.5);}
\DoxyCodeLine{00269       TTool::getApplication()-\/>getCurrentTool()-\/>\mbox{\hyperlink{class_tool_handle_a39e34f1a30868bad11a629228b07bd40}{notifyToolChanged}}();}
\DoxyCodeLine{00270     \}}
\DoxyCodeLine{00271 }
\DoxyCodeLine{00272     m\_selector.setLength(m\_toolRange.getValue());}
\DoxyCodeLine{00273   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00274     \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}));}
\DoxyCodeLine{00275 }
\DoxyCodeLine{00276     \mbox{\hyperlink{struct_toonz_ext_1_1_context_status}{ContextStatus}} *status = \&m\_status;}
\DoxyCodeLine{00277     \textcolor{keywordflow}{if} (!vi || !status-\/>stroke2change\_ || !m\_active) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00278 }
\DoxyCodeLine{00279     QMutexLocker lock(vi-\/>getMutex());}
\DoxyCodeLine{00280 }
\DoxyCodeLine{00281     \textcolor{comment}{// assert( status-\/>stroke2change\_-\/>getLength() >= 0.0 );}}
\DoxyCodeLine{00282 }
\DoxyCodeLine{00283     \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation}{StrokeDeformation}} *deformation = m\_deformation;}
\DoxyCodeLine{00284 }
\DoxyCodeLine{00285     \mbox{\hyperlink{class_t_point_t}{TPointD}} delta = m\_curr -\/ m\_prev;}
\DoxyCodeLine{00286 }
\DoxyCodeLine{00287     deformation-\/>update(delta);}
\DoxyCodeLine{00288   \}}
\DoxyCodeLine{00289 }
\DoxyCodeLine{00290   m\_prev = m\_curr;}
\DoxyCodeLine{00291 }
\DoxyCodeLine{00292   \textcolor{comment}{// moveCursor(pos);}}
\DoxyCodeLine{00293   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00294 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_pinch_tool_aff1c7af8387dcb943013bae8834896fd}\label{class_pinch_tool_aff1c7af8387dcb943013bae8834896fd}} 
\index{PinchTool@{PinchTool}!leftButtonUp@{leftButtonUp}}
\index{leftButtonUp@{leftButtonUp}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{leftButtonUp()}{leftButtonUp()}}
{\footnotesize\ttfamily void Pinch\+Tool\+::left\+Button\+Up (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00298                                                                      \{}
\DoxyCodeLine{00299   \textcolor{keywordflow}{if} (!m\_active || m\_selector.isSelected()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00300 }
\DoxyCodeLine{00301   m\_active = \textcolor{keyword}{false};}
\DoxyCodeLine{00302 }
\DoxyCodeLine{00303   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}));}
\DoxyCodeLine{00304 }
\DoxyCodeLine{00305   \mbox{\hyperlink{struct_toonz_ext_1_1_context_status}{ContextStatus}} *status = \&m\_status;}
\DoxyCodeLine{00306 }
\DoxyCodeLine{00307   \textcolor{keywordflow}{if} (!vi || !status-\/>stroke2change\_) \{}
\DoxyCodeLine{00308     \textcolor{keyword}{delete} m\_undo;}
\DoxyCodeLine{00309     m\_undo = 0;}
\DoxyCodeLine{00310     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00311   \}}
\DoxyCodeLine{00312 }
\DoxyCodeLine{00313   \textcolor{comment}{// if mouse position is unchanged doesn't modify current stroke}}
\DoxyCodeLine{00314   \textcolor{keywordflow}{if} (areAlmostEqual(m\_down, pos, PickRadius * status-\/>pixelSize\_)) \{}
\DoxyCodeLine{00315     assert(m\_undo);}
\DoxyCodeLine{00316     \textcolor{keyword}{delete} m\_undo;}
\DoxyCodeLine{00317     m\_undo = 0;}
\DoxyCodeLine{00318 }
\DoxyCodeLine{00319 \textcolor{comment}{// to avoid red line tool on stroke}}
\DoxyCodeLine{00320 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{00321     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}(}
\DoxyCodeLine{00322         status-\/>stroke2change\_-\/>\mbox{\hyperlink{class_t_stroke_a456bedcae5e8af3a84823cb251584957}{getBBox}}().enlarge(status-\/>pixelSize\_ * 13));}
\DoxyCodeLine{00323 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00324     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00325 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00326     m\_deformation-\/>\mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_a94432911b47a495b2bd7ea0e0286087e}{deactivate}}();}
\DoxyCodeLine{00327     status-\/>stroke2change\_ = 0;}
\DoxyCodeLine{00328     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00329   \}}
\DoxyCodeLine{00330 }
\DoxyCodeLine{00331   QMutexLocker lock(vi-\/>getMutex());}
\DoxyCodeLine{00332 }
\DoxyCodeLine{00333   \mbox{\hyperlink{class_t_stroke}{TStroke}} *deactivateStroke          = m\_deformation-\/>\mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_a94432911b47a495b2bd7ea0e0286087e}{deactivate}}();}
\DoxyCodeLine{00334   deactivateStroke-\/>outlineOptions() = status-\/>stroke2change\_-\/>outlineOptions();}
\DoxyCodeLine{00335   \mbox{\hyperlink{namespace_toonz_ext_a68a0d750cd9ea968b349828ed2eacfa9}{replaceStroke}}(status-\/>stroke2change\_, deactivateStroke, m\_n, vi);}
\DoxyCodeLine{00336 }
\DoxyCodeLine{00337   status-\/>stroke2change\_ = 0;}
\DoxyCodeLine{00338 }
\DoxyCodeLine{00339   vi-\/>notifyChangedStrokes(m\_n);}
\DoxyCodeLine{00340 }
\DoxyCodeLine{00341 \textcolor{preprocessor}{\#ifdef \_DEBUG}}
\DoxyCodeLine{00342   vi-\/>checkIntersections();}
\DoxyCodeLine{00343 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00344   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00345 \textcolor{preprocessor}{\#ifdef \_DEBUG}}
\DoxyCodeLine{00346   vi-\/>checkIntersections();}
\DoxyCodeLine{00347 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00348 }
\DoxyCodeLine{00349   moveCursor(pos);}
\DoxyCodeLine{00350 }
\DoxyCodeLine{00351   \mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}();}
\DoxyCodeLine{00352 }
\DoxyCodeLine{00353   assert(m\_undo);}
\DoxyCodeLine{00354   TUndoManager::manager()-\/>add(m\_undo);}
\DoxyCodeLine{00355   m\_undo = 0;}
\DoxyCodeLine{00356 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_pinch_tool_a46c38e31a4ebd9d01a9ad4f451db6e9b}\label{class_pinch_tool_a46c38e31a4ebd9d01a9ad4f451db6e9b}} 
\index{PinchTool@{PinchTool}!mouseMove@{mouseMove}}
\index{mouseMove@{mouseMove}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{mouseMove()}{mouseMove()}}
{\footnotesize\ttfamily void Pinch\+Tool\+::mouse\+Move (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00457                                                                       \{}
\DoxyCodeLine{00458   \textcolor{keywordflow}{if} (m\_active) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00459 }
\DoxyCodeLine{00460   \textcolor{keywordflow}{if} (!m\_draw) m\_draw = \textcolor{keyword}{true};}
\DoxyCodeLine{00461 }
\DoxyCodeLine{00462   \mbox{\hyperlink{struct_toonz_ext_1_1_context_status}{ContextStatus}} *status = \&m\_status;}
\DoxyCodeLine{00463   m\_curr                = pos;}
\DoxyCodeLine{00464 }
\DoxyCodeLine{00465   \textcolor{keyword}{const} \textcolor{keywordtype}{int} pixelRange = 3;}
\DoxyCodeLine{00466   \textcolor{keywordflow}{if} (std::abs(m\_lastMouseEvent.\mbox{\hyperlink{class_t_mouse_event_a05a3f2378eb2179d121e2e46766916de}{m\_pos}}.x -\/ event.m\_pos.x) < pixelRange \&\&}
\DoxyCodeLine{00467       std::abs(m\_lastMouseEvent.\mbox{\hyperlink{class_t_mouse_event_a05a3f2378eb2179d121e2e46766916de}{m\_pos}}.y -\/ event.m\_pos.y) < pixelRange \&\&}
\DoxyCodeLine{00468       m\_lastMouseEvent.getModifiersMask() == event.getModifiersMask())}
\DoxyCodeLine{00469     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00470 }
\DoxyCodeLine{00471   m\_lastMouseEvent = event;}
\DoxyCodeLine{00472   \textcolor{keywordtype}{double} w         = 0;}
\DoxyCodeLine{00473   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke  = getClosestStroke(pos, w);}
\DoxyCodeLine{00474   \textcolor{keywordflow}{if} (stroke) \{}
\DoxyCodeLine{00475     \textcolor{comment}{// set parameters from sliders}}
\DoxyCodeLine{00476     updateInterfaceStatus(event);}
\DoxyCodeLine{00477 }
\DoxyCodeLine{00478     \textcolor{comment}{// update information about current stroke}}
\DoxyCodeLine{00479     updateStrokeStatus(stroke, w);}
\DoxyCodeLine{00480 }
\DoxyCodeLine{00481     \textcolor{comment}{// retrieve the current m\_deformation and}}
\DoxyCodeLine{00482     \textcolor{comment}{// prepare to design and modify}}
\DoxyCodeLine{00483     \textcolor{keywordflow}{if} (m\_deformation) m\_deformation-\/>\mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_a0a0dc15f10beeaece85b1eb891c838bb}{check}}(status);}
\DoxyCodeLine{00484 }
\DoxyCodeLine{00485     m\_selector.setStroke(stroke);}
\DoxyCodeLine{00486     m\_selector.mouseMove(m\_curr);}
\DoxyCodeLine{00487   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00488     m\_status.stroke2change\_ = 0;}
\DoxyCodeLine{00489     m\_selector.setStroke(0);}
\DoxyCodeLine{00490     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00491   \}}
\DoxyCodeLine{00492 }
\DoxyCodeLine{00493   m\_prev          = m\_curr;}
\DoxyCodeLine{00494   m\_cursorEnabled = moveCursor(pos);}
\DoxyCodeLine{00495 }
\DoxyCodeLine{00496   \textcolor{keywordflow}{if} (m\_cursorEnabled) \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00497 }
\DoxyCodeLine{00498   \textcolor{comment}{//  TNotifier::instance()-\/>notify(TToolChange());}}
\DoxyCodeLine{00499 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_pinch_tool_a53a5de788c40a06158838c844e334e4e}\label{class_pinch_tool_a53a5de788c40a06158838c844e334e4e}} 
\index{PinchTool@{PinchTool}!moveCursor@{moveCursor}}
\index{moveCursor@{moveCursor}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{moveCursor()}{moveCursor()}}
{\footnotesize\ttfamily bool Pinch\+Tool\+::move\+Cursor (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00555                                              \{}
\DoxyCodeLine{00556   \textcolor{keywordtype}{double} w        = 0.0;}
\DoxyCodeLine{00557   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = getClosestStroke(pos, w);}
\DoxyCodeLine{00558   \textcolor{keywordflow}{if} (!stroke) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00559 }
\DoxyCodeLine{00560   m\_cursor = stroke-\/>\mbox{\hyperlink{class_t_stroke_ada4f6fc3fea4a7c0b949cd1d9dc6e640}{getThickPoint}}(w);}
\DoxyCodeLine{00561   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00562 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_pinch_tool_a12ac33f584902b9b8e3e5fbc9b6227ee}\label{class_pinch_tool_a12ac33f584902b9b8e3e5fbc9b6227ee}} 
\index{PinchTool@{PinchTool}!onActivate@{onActivate}}
\index{onActivate@{onActivate}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{onActivate()}{onActivate()}}
{\footnotesize\ttfamily void Pinch\+Tool\+::on\+Activate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback invoked whenever the tool activates. 



Reimplemented from \mbox{\hyperlink{class_t_tool_ac286a2681633b4db6106596b4f54e53b}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00566                            \{}
\DoxyCodeLine{00567   \textcolor{comment}{//  getApplication()-\/>editImageOrSpline();}}
\DoxyCodeLine{00568   \textcolor{comment}{//  TNotifier::instance()-\/>attach(this);}}
\DoxyCodeLine{00569   \textcolor{comment}{// per sicurezza}}
\DoxyCodeLine{00570   m\_status.stroke2change\_ = 0;}
\DoxyCodeLine{00571   m\_selector.setStroke(0);}
\DoxyCodeLine{00572 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_pinch_tool_a818e30c045481b44bb607d6dd19ddb2a}\label{class_pinch_tool_a818e30c045481b44bb607d6dd19ddb2a}} 
\index{PinchTool@{PinchTool}!onDeactivate@{onDeactivate}}
\index{onDeactivate@{onDeactivate}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{onDeactivate()}{onDeactivate()}}
{\footnotesize\ttfamily void Pinch\+Tool\+::on\+Deactivate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for tool deactivation, includes tool switch. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a00fee58728c1e12fb50846f47d7e9f5e}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00576                              \{}
\DoxyCodeLine{00577   m\_draw = \textcolor{keyword}{false};}
\DoxyCodeLine{00578   \textcolor{keyword}{delete} m\_undo;}
\DoxyCodeLine{00579   m\_undo   = 0;}
\DoxyCodeLine{00580   m\_active = \textcolor{keyword}{false};}
\DoxyCodeLine{00581   m\_deformation-\/>\mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_a1a1f825799dd5ba677d138e84db7e236}{reset}}();}
\DoxyCodeLine{00582   \textcolor{comment}{//  TNotifier::instance()-\/>detach(this);}}
\DoxyCodeLine{00583 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00131}{Toonz\+Ext\+::\+Stroke\+Deformation\+::reset()}}.

\mbox{\Hypertarget{class_pinch_tool_a9e2b21db6abd6214929ee7a05adee9fc}\label{class_pinch_tool_a9e2b21db6abd6214929ee7a05adee9fc}} 
\index{PinchTool@{PinchTool}!onEnter@{onEnter}}
\index{onEnter@{onEnter}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{onEnter()}{onEnter()}}
{\footnotesize\ttfamily void Pinch\+Tool\+::on\+Enter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for the mouse entering the viewer area. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a3e775cfcd05aa3c35048b11fa40ab3e4}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00360                         \{}
\DoxyCodeLine{00361   m\_draw = \textcolor{keyword}{true};}
\DoxyCodeLine{00362   \textcolor{comment}{// per sicurezza}}
\DoxyCodeLine{00363   \textcolor{comment}{// m\_status.stroke2change\_ = 0;}}
\DoxyCodeLine{00364   \textcolor{comment}{// m\_selector.setStroke(0);}}
\DoxyCodeLine{00365 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_pinch_tool_aa66410f4fdc7d43dc7eb563ec8f3da8b}\label{class_pinch_tool_aa66410f4fdc7d43dc7eb563ec8f3da8b}} 
\index{PinchTool@{PinchTool}!onImageChanged@{onImageChanged}}
\index{onImageChanged@{onImageChanged}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{onImageChanged()}{onImageChanged()}}
{\footnotesize\ttfamily void Pinch\+Tool\+::on\+Image\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Notifies changes in the image in use. 



Reimplemented from \mbox{\hyperlink{class_t_tool_aaf1e021290e74c1b085e4b095668e1ed}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00385                                \{}
\DoxyCodeLine{00386   m\_status.stroke2change\_ = 0;}
\DoxyCodeLine{00387   m\_deformation-\/>\mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_a1a1f825799dd5ba677d138e84db7e236}{reset}}();}
\DoxyCodeLine{00388   \textcolor{comment}{// m\_active may be true if the frame switched while dragging}}
\DoxyCodeLine{00389   \textcolor{keywordflow}{if} (m\_active) \{}
\DoxyCodeLine{00390     m\_deformation-\/>\mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_a94432911b47a495b2bd7ea0e0286087e}{deactivate}}();}
\DoxyCodeLine{00391     m\_active = \textcolor{keyword}{false};}
\DoxyCodeLine{00392     \textcolor{keywordflow}{if} (m\_undo) \{}
\DoxyCodeLine{00393       \textcolor{keyword}{delete} m\_undo;}
\DoxyCodeLine{00394       m\_undo = 0;}
\DoxyCodeLine{00395     \}}
\DoxyCodeLine{00396   \}}
\DoxyCodeLine{00397 }
\DoxyCodeLine{00398   \textcolor{keywordtype}{double} w        = 0;}
\DoxyCodeLine{00399   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = getClosestStroke(m\_lastMouseEvent.\mbox{\hyperlink{class_t_mouse_event_a05a3f2378eb2179d121e2e46766916de}{m\_pos}}, w);}
\DoxyCodeLine{00400   \textcolor{keywordflow}{if} (stroke) \{}
\DoxyCodeLine{00401     \textcolor{comment}{// set parameters from sliders}}
\DoxyCodeLine{00402     updateInterfaceStatus(m\_lastMouseEvent);}
\DoxyCodeLine{00403 }
\DoxyCodeLine{00404     \textcolor{comment}{// update information about current stroke}}
\DoxyCodeLine{00405     updateStrokeStatus(stroke, w);}
\DoxyCodeLine{00406   \}}
\DoxyCodeLine{00407 }
\DoxyCodeLine{00408   m\_selector.setStroke(stroke);}
\DoxyCodeLine{00409   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00410 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00109}{Toonz\+Ext\+::\+Stroke\+Deformation\+::deactivate()}}, \mbox{\hyperlink{l00540}{TTool\+::invalidate()}}, \mbox{\hyperlink{l00088}{TMouse\+Event\+::m\+\_\+pos}}, and \mbox{\hyperlink{l00131}{Toonz\+Ext\+::\+Stroke\+Deformation\+::reset()}}.

\mbox{\Hypertarget{class_pinch_tool_a97b1d30e3a6e4c825af23d1315f4cd46}\label{class_pinch_tool_a97b1d30e3a6e4c825af23d1315f4cd46}} 
\index{PinchTool@{PinchTool}!onLeave@{onLeave}}
\index{onLeave@{onLeave}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{onLeave()}{onLeave()}}
{\footnotesize\ttfamily void Pinch\+Tool\+::on\+Leave (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for the mouse leaving the viewer area. 



Reimplemented from \mbox{\hyperlink{class_t_tool_af7fb05265a94131da081da654e271a22}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00369                         \{}
\DoxyCodeLine{00370   \textcolor{keywordflow}{if} (!m\_active) m\_draw = \textcolor{keyword}{false};}
\DoxyCodeLine{00371   m\_status.stroke2change\_ = 0;}
\DoxyCodeLine{00372 }
\DoxyCodeLine{00373   \textcolor{comment}{// Abbiamo dovuto commentarlo perche' stranamente}}
\DoxyCodeLine{00374   \textcolor{comment}{// l'onLeave viene chiamata anche quando viene premuto il tasto del mouse}}
\DoxyCodeLine{00375   \textcolor{comment}{// per iniziare a fare drag utilizzando il Selector}}
\DoxyCodeLine{00376   \textcolor{comment}{// setStroke al suo interno resetta lo status del Selector (lo mette a NONE)}}
\DoxyCodeLine{00377 }
\DoxyCodeLine{00378   \textcolor{comment}{//  m\_selector.setStroke(0);}}
\DoxyCodeLine{00379 }
\DoxyCodeLine{00380   m\_deformation-\/>\mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_a1a1f825799dd5ba677d138e84db7e236}{reset}}();}
\DoxyCodeLine{00381 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00131}{Toonz\+Ext\+::\+Stroke\+Deformation\+::reset()}}.

\mbox{\Hypertarget{class_pinch_tool_aefa1dc1574c0cc328f6d856574cab749}\label{class_pinch_tool_aefa1dc1574c0cc328f6d856574cab749}} 
\index{PinchTool@{PinchTool}!setShowSelector@{setShowSelector}}
\index{setShowSelector@{setShowSelector}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{setShowSelector()}{setShowSelector()}}
{\footnotesize\ttfamily void Pinch\+Tool\+::set\+Show\+Selector (\begin{DoxyParamCaption}\item[{bool}]{show }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00068 \{ m\_showSelector = show; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_pinch_tool_aa46cd204b0aae5b433134d28114b857e}\label{class_pinch_tool_aa46cd204b0aae5b433134d28114b857e}} 
\index{PinchTool@{PinchTool}!update@{update}}
\index{update@{update}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{update()}{update()}}
{\footnotesize\ttfamily void Pinch\+Tool\+::update (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_global_change}{TGlobal\+Change}} \&}]{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00587                                             \{}
\DoxyCodeLine{00588   m\_cursor = TConsts::natp;}
\DoxyCodeLine{00589   m\_selector.setStroke(0);}
\DoxyCodeLine{00590   m\_selector.setVisibility(m\_autoOrManual.getValue() \&\& m\_showSelector);}
\DoxyCodeLine{00591   \textcolor{keywordflow}{if} (m\_deformation) \textcolor{keyword}{delete} m\_deformation-\/>\mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_a94432911b47a495b2bd7ea0e0286087e}{deactivate}}();}
\DoxyCodeLine{00592   \textcolor{comment}{// per sicurezza}}
\DoxyCodeLine{00593   m\_status.stroke2change\_ = 0;}
\DoxyCodeLine{00594 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_pinch_tool_a437f226cd72c7acdefdcf30c29eee6b3}\label{class_pinch_tool_a437f226cd72c7acdefdcf30c29eee6b3}} 
\index{PinchTool@{PinchTool}!updateTranslation@{updateTranslation}}
\index{updateTranslation@{updateTranslation}!PinchTool@{PinchTool}}
\doxysubsubsection{\texorpdfstring{updateTranslation()}{updateTranslation()}}
{\footnotesize\ttfamily void Pinch\+Tool\+::update\+Translation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00110                                   \{}
\DoxyCodeLine{00111   m\_toolRange.setQStringName(tr(\textcolor{stringliteral}{"{}Size:"{}}));}
\DoxyCodeLine{00112   m\_toolCornerSize.setQStringName(tr(\textcolor{stringliteral}{"{}Corner:"{}}));}
\DoxyCodeLine{00113   m\_autoOrManual.setQStringName(tr(\textcolor{stringliteral}{"{}Manual"{}}));}
\DoxyCodeLine{00114 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/tools/pinchtool.\+h\item 
E\+:/opentoonz/toonz/sources/tnztools/pinchtool.\+cpp\end{DoxyCompactItemize}
