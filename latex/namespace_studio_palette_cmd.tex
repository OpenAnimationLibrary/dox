\hypertarget{namespace_studio_palette_cmd}{}\doxysection{Studio\+Palette\+Cmd Namespace Reference}
\label{namespace_studio_palette_cmd}\index{StudioPaletteCmd@{StudioPaletteCmd}}


Provides a collection of methods to manage {\bfseries{\mbox{\hyperlink{class_studio_palette}{Studio\+Palette}}}}.  


\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
DVAPI void \mbox{\hyperlink{namespace_studio_palette_cmd_a6509a77a580ea301eb69e69423df2789}{load\+Into\+Current\+Palette}} (\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$palette\+Handle, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp)
\item 
DVAPI void \mbox{\hyperlink{namespace_studio_palette_cmd_a897e56e0b058577445f7a445f99c68cd}{load\+Into\+Current\+Palette}} (\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$palette\+Handle, \mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$palette)
\item 
DVAPI void \mbox{\hyperlink{namespace_studio_palette_cmd_af721f14db6ebd35736a8d475ccb78737}{load\+Into\+Current\+Palette}} (\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$palette\+Handle, \mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$palette, \mbox{\hyperlink{class_t_xsh_level_handle}{TXsh\+Level\+Handle}} $\ast$current\+Level\+Handle, int tolerance)
\item 
DVAPI void \mbox{\hyperlink{namespace_studio_palette_cmd_aa3c9a590d961602deef70745f88092d8}{merge\+Into\+Current\+Palette}} (\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$palette\+Handle, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp)
\item 
DVAPI void \mbox{\hyperlink{namespace_studio_palette_cmd_a089ad68dcd46bce887ed1d5eaf3798c1}{merge\+Into\+Current\+Palette}} (\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$palette\+Handle, \mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$palette)
\item 
DVAPI void \mbox{\hyperlink{namespace_studio_palette_cmd_a2a88d817cd0afaa72e876b45e0fb72b0}{replace\+With\+Current\+Palette}} (\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$palette\+Handle, \mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$std\+Palette\+Handle, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp)
\item 
DVAPI void \mbox{\hyperlink{namespace_studio_palette_cmd_a2b3ef0b52ba4e87daf0c78d40b9027be}{update\+All\+Linked\+Styles}} (\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$palette\+Handle, \mbox{\hyperlink{class_t_xsheet_handle}{TXsheet\+Handle}} $\ast$xsheet\+Handle)
\item 
DVAPI void \mbox{\hyperlink{namespace_studio_palette_cmd_a641fa67fe539b48abccf84da592626ca}{delete\+Palette}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp)
\item 
DVAPI void \mbox{\hyperlink{namespace_studio_palette_cmd_a091a7f168889ea48f1ba76a21e9e244a}{move\+Palette}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&dst\+Path, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&src\+Path)
\item 
DVAPI \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{namespace_studio_palette_cmd_ae42db0d6de444f183fd5aed671dbdae0}{create\+Palette}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&folder\+Path, std\+::string palette\+Name, const \mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$palette)
\item 
DVAPI \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{namespace_studio_palette_cmd_abeb8dfb9edb15438498fa95007352b12}{add\+Folder}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&parent\+Folder\+Path)
\item 
DVAPI void \mbox{\hyperlink{namespace_studio_palette_cmd_af2894c04809b30eb8e0bf94d6d4df6e8}{delete\+Folder}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&folder\+Path)
\item 
DVAPI void \mbox{\hyperlink{namespace_studio_palette_cmd_a23ae55ac17c0c7ed563975457badc389}{scan\+Palettes}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&folder, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&source\+Path)
\item 
void \mbox{\hyperlink{namespace_studio_palette_cmd_a44636d51ac66b3d436081b06b27eaa14}{load\+Into\+Current\+Palette}} ()
\item 
void \mbox{\hyperlink{namespace_studio_palette_cmd_a090a81177aec895edf5552340e735d3c}{load\+Into\+Current\+Palette}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp)
\item 
void \mbox{\hyperlink{namespace_studio_palette_cmd_a17a650668b7612e930bc0bdc4afa0d38}{merge\+Into\+Current\+Palette}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp)
\item 
void \mbox{\hyperlink{namespace_studio_palette_cmd_adbe4cbb0ede856879ef40389fe363ea7}{replace\+With\+Current\+Palette}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp)
\item 
void \mbox{\hyperlink{namespace_studio_palette_cmd_af705307ef01ae6c132740726b11e66f7}{load\+Into\+Cleanup\+Palette}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp)
\item 
void \mbox{\hyperlink{namespace_studio_palette_cmd_a91fd8f76cc70ac51289a741d81ba049d}{replace\+With\+Cleanup\+Palette}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp)
\item 
void \mbox{\hyperlink{namespace_studio_palette_cmd_a463f39243d50f79f73c220de2d9f05f0}{update\+All\+Linked\+Styles}} ()
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{namespace_studio_palette_cmd_ae3aeaa224f2e6d34f9ec0ab30112d1b4}{create\+Palette}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&folder\+Path, string palette\+Name, const \mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$palette)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Provides a collection of methods to manage {\bfseries{\mbox{\hyperlink{class_studio_palette}{Studio\+Palette}}}}. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespace_studio_palette_cmd_abeb8dfb9edb15438498fa95007352b12}\label{namespace_studio_palette_cmd_abeb8dfb9edb15438498fa95007352b12}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!addFolder@{addFolder}}
\index{addFolder@{addFolder}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{addFolder()}{addFolder()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Studio\+Palette\+Cmd\+::add\+Folder (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{parent\+Folder\+Path }\end{DoxyParamCaption})}

Add a folder in \mbox{\hyperlink{class_studio_palette}{Studio\+Palette}} \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} {\bfseries{parent\+Folder\+Path}}. If there are any problems send an error message. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00473                                                                        \{}
\DoxyCodeLine{00474   \mbox{\hyperlink{class_t_file_path}{TFilePath}} folderPath;}
\DoxyCodeLine{00475   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00476     folderPath = StudioPalette::instance()-\/>createFolder(parentFolderPath);}
\DoxyCodeLine{00477     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} CreateFolderUndo(folderPath));}
\DoxyCodeLine{00478   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{00479     error(\textcolor{stringliteral}{"{}Can't create palette folder: "{}} +}
\DoxyCodeLine{00480           QString(toString(e.getMessage()).c\_str()));}
\DoxyCodeLine{00481   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00482     error(\textcolor{stringliteral}{"{}Can't create palette folder"{}});}
\DoxyCodeLine{00483   \}}
\DoxyCodeLine{00484   \textcolor{keywordflow}{return} folderPath;}
\DoxyCodeLine{00485 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00464}{Studio\+Palette\+Tree\+Viewer\+::add\+New\+Folder()}}.

\mbox{\Hypertarget{namespace_studio_palette_cmd_ae42db0d6de444f183fd5aed671dbdae0}\label{namespace_studio_palette_cmd_ae42db0d6de444f183fd5aed671dbdae0}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!createPalette@{createPalette}}
\index{createPalette@{createPalette}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{createPalette()}{createPalette()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Studio\+Palette\+Cmd\+::create\+Palette (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{folder\+Name,  }\item[{std\+::string}]{palette\+Name,  }\item[{const \mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$}]{palette }\end{DoxyParamCaption})}

Create palette {\bfseries{palette}} in folder {\bfseries{folder\+Name}} with name {\bfseries{palette\+Name}}. If there are any problems send an error message. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00699                                                                    \{}
\DoxyCodeLine{00700   \mbox{\hyperlink{class_t_file_path}{TFilePath}} palettePath;}
\DoxyCodeLine{00701   \mbox{\hyperlink{class_t_file_status}{TFileStatus}} status(folderName);}
\DoxyCodeLine{00702   \textcolor{comment}{// exception will be caught either in StudioPaletteTreeViewer::addNewPalette()}}
\DoxyCodeLine{00703   \textcolor{comment}{// or StudioPaletteTreeViewer::dropEvent()}}
\DoxyCodeLine{00704   \textcolor{keywordflow}{if} (!status.isDirectory()) \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}Select a folder."{}});}
\DoxyCodeLine{00705   \textcolor{keywordflow}{if} (!status.doesExist()) \{}
\DoxyCodeLine{00706     TSystem::mkDir(folderName);}
\DoxyCodeLine{00707     FolderListenerManager::instance()-\/>notifyFolderChanged(}
\DoxyCodeLine{00708         folderName.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}());}
\DoxyCodeLine{00709   \}}
\DoxyCodeLine{00710   \textcolor{comment}{// StudioPalette::setPalette() and createPalette() may throw exception on}}
\DoxyCodeLine{00711   \textcolor{comment}{// saving, it will be caught in the upper functions as wel}}
\DoxyCodeLine{00712   palettePath =}
\DoxyCodeLine{00713       StudioPalette::instance()-\/>createPalette(folderName, paletteName);}
\DoxyCodeLine{00714   \textcolor{keywordflow}{if} (palette)}
\DoxyCodeLine{00715     StudioPalette::instance()-\/>setPalette(palettePath, palette, \textcolor{keyword}{true});}
\DoxyCodeLine{00716   TUndoManager::manager()-\/>add(\textcolor{keyword}{new} CreatePaletteUndo(palettePath));}
\DoxyCodeLine{00717   \textcolor{keywordflow}{return} palettePath;}
\DoxyCodeLine{00718 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00683}{TFile\+Path\+::get\+Parent\+Dir()}}.



Referenced by \mbox{\hyperlink{l00530}{Studio\+Palette\+Tree\+Viewer\+::add\+New\+Palette()}}, \mbox{\hyperlink{l00445}{Studio\+Palette\+Tree\+Viewer\+::add\+New\+Plt()}}, and \mbox{\hyperlink{l00729}{Studio\+Palette\+Tree\+Viewer\+::drop\+Event()}}.

\mbox{\Hypertarget{namespace_studio_palette_cmd_ae3aeaa224f2e6d34f9ec0ab30112d1b4}\label{namespace_studio_palette_cmd_ae3aeaa224f2e6d34f9ec0ab30112d1b4}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!createPalette@{createPalette}}
\index{createPalette@{createPalette}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{createPalette()}{createPalette()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Studio\+Palette\+Cmd\+::create\+Palette (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{folder\+Name,  }\item[{string}]{palette\+Name,  }\item[{const \mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$}]{palette }\end{DoxyParamCaption})}

Create palette {\bfseries{palette}} in folder {\bfseries{folder\+Name}} with name {\bfseries{palette\+Name}}. If there are any problems send an error message. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00453                                                                    \{}
\DoxyCodeLine{00454   \mbox{\hyperlink{class_t_file_path}{TFilePath}} palettePath;}
\DoxyCodeLine{00455   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00456     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(folderName).doesExist()) TSystem::mkDir(folderName);}
\DoxyCodeLine{00457     palettePath =}
\DoxyCodeLine{00458         StudioPalette::instance()-\/>createPalette(folderName, paletteName);}
\DoxyCodeLine{00459     \textcolor{keywordflow}{if} (palette) StudioPalette::instance()-\/>setPalette(palettePath, palette);}
\DoxyCodeLine{00460     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} CreatePaletteUndo(palettePath));}
\DoxyCodeLine{00461   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{00462     error(\textcolor{stringliteral}{"{}Can't create palette: "{}} + QString(toString(e.getMessage()).c\_str()));}
\DoxyCodeLine{00463   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00464     error(\textcolor{stringliteral}{"{}Can't create palette"{}});}
\DoxyCodeLine{00465   \}}
\DoxyCodeLine{00466   \textcolor{keywordflow}{return} palettePath;}
\DoxyCodeLine{00467 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_studio_palette_cmd_af2894c04809b30eb8e0bf94d6d4df6e8}\label{namespace_studio_palette_cmd_af2894c04809b30eb8e0bf94d6d4df6e8}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!deleteFolder@{deleteFolder}}
\index{deleteFolder@{deleteFolder}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{deleteFolder()}{deleteFolder()}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::delete\+Folder (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{folder\+Path }\end{DoxyParamCaption})}

Delete folder {\bfseries{folder\+Path}}. If there are any problems in deleting send an error message. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00491                                                                \{}
\DoxyCodeLine{00492   \mbox{\hyperlink{class_t_undo}{TUndo}} *undo = \textcolor{keyword}{new} DeleteFolderUndo(folderPath);}
\DoxyCodeLine{00493   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00494     StudioPalette::instance()-\/>deleteFolder(folderPath);}
\DoxyCodeLine{00495     TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{00496   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{00497     \textcolor{keyword}{delete} undo;}
\DoxyCodeLine{00498     error(\textcolor{stringliteral}{"{}Can't delete palette: "{}} + QString(toString(e.getMessage()).c\_str()));}
\DoxyCodeLine{00499   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00500     \textcolor{keyword}{delete} undo;}
\DoxyCodeLine{00501     error(\textcolor{stringliteral}{"{}Can't delete palette"{}});}
\DoxyCodeLine{00502   \}}
\DoxyCodeLine{00503 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00486}{Studio\+Palette\+Tree\+Viewer\+::delete\+Item()}}.

\mbox{\Hypertarget{namespace_studio_palette_cmd_a641fa67fe539b48abccf84da592626ca}\label{namespace_studio_palette_cmd_a641fa67fe539b48abccf84da592626ca}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!deletePalette@{deletePalette}}
\index{deletePalette@{deletePalette}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{deletePalette()}{deletePalette()}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::delete\+Palette (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption})}

Delete palette identified by {\bfseries{fp}} in {\bfseries{\mbox{\hyperlink{class_studio_palette}{Studio\+Palette}}}}. If there are any problems in loading send an error message. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00416                                                         \{}
\DoxyCodeLine{00417   \mbox{\hyperlink{class_t_undo}{TUndo}} *undo = \textcolor{keyword}{new} DeletePaletteUndo(fp);}
\DoxyCodeLine{00418   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00419     StudioPalette::instance()-\/>deletePalette(fp);}
\DoxyCodeLine{00420     TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{00421   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{00422     \textcolor{keyword}{delete} undo;}
\DoxyCodeLine{00423     error(\textcolor{stringliteral}{"{}Can't delete palette: "{}} + QString(toString(e.getMessage()).c\_str()));}
\DoxyCodeLine{00424   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00425     \textcolor{keyword}{delete} undo;}
\DoxyCodeLine{00426     error(\textcolor{stringliteral}{"{}Can't delete palette"{}});}
\DoxyCodeLine{00427   \}}
\DoxyCodeLine{00428 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00486}{Studio\+Palette\+Tree\+Viewer\+::delete\+Item()}}.

\mbox{\Hypertarget{namespace_studio_palette_cmd_af705307ef01ae6c132740726b11e66f7}\label{namespace_studio_palette_cmd_af705307ef01ae6c132740726b11e66f7}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!loadIntoCleanupPalette@{loadIntoCleanupPalette}}
\index{loadIntoCleanupPalette@{loadIntoCleanupPalette}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{loadIntoCleanupPalette()}{loadIntoCleanupPalette()}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::load\+Into\+Cleanup\+Palette (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00333                                                                  \{}
\DoxyCodeLine{00334   \textcolor{comment}{// DA FARE}}
\DoxyCodeLine{00335   \textcolor{comment}{//  ColorController *cc = ColorController::instance();}}
\DoxyCodeLine{00336   \textcolor{comment}{//  int styleId = cc-\/>getCurrentStyleIndex();}}
\DoxyCodeLine{00337   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = StudioPalette::instance()-\/>getPalette(fp, \textcolor{keyword}{true});}
\DoxyCodeLine{00338   \textcolor{keywordflow}{if} (!palette) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00339   \textcolor{comment}{// DA FARE}}
\DoxyCodeLine{00340   \textcolor{comment}{//  TPalette *current = cc-\/>getCleanupPalette();}}
\DoxyCodeLine{00341   \mbox{\hyperlink{class_t_palette}{TPalette}} *current = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()}
\DoxyCodeLine{00342                           -\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()}
\DoxyCodeLine{00343                           -\/>getScene()}
\DoxyCodeLine{00344                           -\/>\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}()}
\DoxyCodeLine{00345                           -\/>getCleanupPalette();}
\DoxyCodeLine{00346   assert(current);}
\DoxyCodeLine{00347   \mbox{\hyperlink{class_t_palette}{TPalette}} *old = current-\/>\mbox{\hyperlink{class_t_palette_abc3ef5824d89e65687b32c530cf25325}{clone}}();}
\DoxyCodeLine{00348   current-\/>\mbox{\hyperlink{class_t_palette_a319e848e06467e458214bba1132b49a9}{assign}}(palette);}
\DoxyCodeLine{00349   \textcolor{comment}{// DA FARE}}
\DoxyCodeLine{00350   \textcolor{comment}{//  if(cc-\/>getCurrentStylePalette() == current \&\&}}
\DoxyCodeLine{00351   \textcolor{comment}{//  styleId>=current-\/>getStyleCount())}}
\DoxyCodeLine{00352   \textcolor{comment}{//    cc-\/>setCurrentStyle(1);}}
\DoxyCodeLine{00353   TUndoManager::manager()-\/>add(}
\DoxyCodeLine{00354       \textcolor{keyword}{new} PaletteAssignUndo(current, old, current-\/>\mbox{\hyperlink{class_t_palette_abc3ef5824d89e65687b32c530cf25325}{clone}}()));}
\DoxyCodeLine{00355   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a33dbcbc578915e0b69fe6927b74cf426}{getCurrentPalette}}()-\/>notifyPaletteChanged();}
\DoxyCodeLine{00356 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_studio_palette_cmd_a44636d51ac66b3d436081b06b27eaa14}\label{namespace_studio_palette_cmd_a44636d51ac66b3d436081b06b27eaa14}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!loadIntoCurrentPalette@{loadIntoCurrentPalette}}
\index{loadIntoCurrentPalette@{loadIntoCurrentPalette}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{loadIntoCurrentPalette()}{loadIntoCurrentPalette()}\hspace{0.1cm}{\footnotesize\ttfamily [1/5]}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::load\+Into\+Current\+Palette (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00196                                               \{}
\DoxyCodeLine{00197   \textcolor{comment}{// DA FARE}}
\DoxyCodeLine{00198   \textcolor{comment}{//  ColorController *cc = ColorController::instance();}}
\DoxyCodeLine{00199   \textcolor{comment}{//  TPalette *palette = cc-\/>getStudioPalette();}}
\DoxyCodeLine{00200   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a33dbcbc578915e0b69fe6927b74cf426}{getCurrentPalette}}()-\/>getPalette();}
\DoxyCodeLine{00201 }
\DoxyCodeLine{00202   wstring gname = palette-\/>getGlobalName();}
\DoxyCodeLine{00203   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp  = StudioPalette::instance()-\/>getPalettePath(gname);}
\DoxyCodeLine{00204   \textcolor{keywordflow}{if} (fp != \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) loadIntoCurrentPalette(fp);}
\DoxyCodeLine{00205 }
\DoxyCodeLine{00206   \textcolor{comment}{// DA FARE}}
\DoxyCodeLine{00207   \textcolor{keywordflow}{if} (!palette-\/>isCleanupPalette())}
\DoxyCodeLine{00208     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getLevel()-\/>setPaletteDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{00209   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00210     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{00211   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a33dbcbc578915e0b69fe6927b74cf426}{getCurrentPalette}}()-\/>notifyPaletteChanged();}
\DoxyCodeLine{00212 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_studio_palette_cmd_a090a81177aec895edf5552340e735d3c}\label{namespace_studio_palette_cmd_a090a81177aec895edf5552340e735d3c}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!loadIntoCurrentPalette@{loadIntoCurrentPalette}}
\index{loadIntoCurrentPalette@{loadIntoCurrentPalette}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{loadIntoCurrentPalette()}{loadIntoCurrentPalette()}\hspace{0.1cm}{\footnotesize\ttfamily [2/5]}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::load\+Into\+Current\+Palette (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00216                                                                  \{}
\DoxyCodeLine{00217   \textcolor{comment}{// DA FARE}}
\DoxyCodeLine{00218   \textcolor{comment}{//  ColorController *cc = ColorController::instance();}}
\DoxyCodeLine{00219   \textcolor{comment}{//  int styleId = cc-\/>getCurrentStyleIndex();}}
\DoxyCodeLine{00220   \mbox{\hyperlink{class_t_app}{TApp}} *app   = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}();}
\DoxyCodeLine{00221   \textcolor{keywordtype}{int} styleId = app-\/>\mbox{\hyperlink{class_t_app_a33dbcbc578915e0b69fe6927b74cf426}{getCurrentPalette}}()-\/>getStyleIndex();}
\DoxyCodeLine{00222 }
\DoxyCodeLine{00223   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = StudioPalette::instance()-\/>getPalette(fp, \textcolor{keyword}{true});}
\DoxyCodeLine{00224   \textcolor{keywordflow}{if} (!palette) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00225 }
\DoxyCodeLine{00226   \textcolor{comment}{// DA FARE}}
\DoxyCodeLine{00227   \mbox{\hyperlink{class_t_palette}{TPalette}} *current = !palette-\/>isCleanupPalette()}
\DoxyCodeLine{00228                           ? app-\/>\mbox{\hyperlink{class_t_app_a33dbcbc578915e0b69fe6927b74cf426}{getCurrentPalette}}()-\/>getPalette()}
\DoxyCodeLine{00229                           : app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()}
\DoxyCodeLine{00230                                 -\/>getScene()}
\DoxyCodeLine{00231                                 -\/>\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}()}
\DoxyCodeLine{00232                                 -\/>getCleanupPalette();}
\DoxyCodeLine{00233   \textcolor{comment}{//    ? cc-\/>getCleanupPalette()}}
\DoxyCodeLine{00234   \textcolor{comment}{//    : cc-\/>getLevelPalette();}}
\DoxyCodeLine{00235 }
\DoxyCodeLine{00236   \textcolor{keywordflow}{if} (!current) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00237   \mbox{\hyperlink{class_t_palette}{TPalette}} *old = current-\/>\mbox{\hyperlink{class_t_palette_abc3ef5824d89e65687b32c530cf25325}{clone}}();}
\DoxyCodeLine{00238   \textcolor{keywordflow}{while} (palette-\/>getStyleCount() < current-\/>\mbox{\hyperlink{class_t_palette_a5a562f2d3a5fa256fcb4bb2be5b45534}{getStyleCount}}()) \{}
\DoxyCodeLine{00239     \textcolor{keywordtype}{int} index = palette-\/>getStyleCount();}
\DoxyCodeLine{00240     assert(index < current-\/>getStyleCount());}
\DoxyCodeLine{00241     \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *style = current-\/>\mbox{\hyperlink{class_t_palette_a0f6a4eda7dafb0a9f2b43160cfec81e4}{getStyle}}(index)-\/>\mbox{\hyperlink{class_t_color_style_a7b7e50c731a150aa84f746a261765adf}{clone}}();}
\DoxyCodeLine{00242     palette-\/>addStyle(style);}
\DoxyCodeLine{00243   \}}
\DoxyCodeLine{00244   current-\/>\mbox{\hyperlink{class_t_palette_a319e848e06467e458214bba1132b49a9}{assign}}(palette);}
\DoxyCodeLine{00245   \textcolor{comment}{// DA FARE}}
\DoxyCodeLine{00246   \textcolor{comment}{//  if(cc-\/>getCurrentStylePalette() == current \&\&}}
\DoxyCodeLine{00247   \textcolor{comment}{//  styleId>=current-\/>getStyleCount())}}
\DoxyCodeLine{00248   \textcolor{comment}{//    cc-\/>setCurrentStyle(1);}}
\DoxyCodeLine{00249   TUndoManager::manager()-\/>add(}
\DoxyCodeLine{00250       \textcolor{keyword}{new} PaletteAssignUndo(current, old, current-\/>\mbox{\hyperlink{class_t_palette_abc3ef5824d89e65687b32c530cf25325}{clone}}()));}
\DoxyCodeLine{00251 }
\DoxyCodeLine{00252   \textcolor{comment}{// DA FARE}}
\DoxyCodeLine{00253   \textcolor{keywordflow}{if} (  \textcolor{comment}{// current == cc-\/>getCurrentStylePalette() \&\&}}
\DoxyCodeLine{00254       app-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getLevel()) \{}
\DoxyCodeLine{00255     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = app-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getSimpleLevel();}
\DoxyCodeLine{00256     \textcolor{keywordflow}{if} (sl) \{}
\DoxyCodeLine{00257       sl-\/>invalidateIcons();}
\DoxyCodeLine{00258       sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a2d43337766628739707849f8808bf300}{setDirtyFlag}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00259     \}}
\DoxyCodeLine{00260     app-\/>\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>notifyLevelChange();}
\DoxyCodeLine{00261   \}}
\DoxyCodeLine{00262 }
\DoxyCodeLine{00263   app-\/>\mbox{\hyperlink{class_t_app_a33dbcbc578915e0b69fe6927b74cf426}{getCurrentPalette}}()-\/>notifyPaletteChanged();}
\DoxyCodeLine{00264 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_studio_palette_cmd_a6509a77a580ea301eb69e69423df2789}\label{namespace_studio_palette_cmd_a6509a77a580ea301eb69e69423df2789}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!loadIntoCurrentPalette@{loadIntoCurrentPalette}}
\index{loadIntoCurrentPalette@{loadIntoCurrentPalette}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{loadIntoCurrentPalette()}{loadIntoCurrentPalette()}\hspace{0.1cm}{\footnotesize\ttfamily [3/5]}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::load\+Into\+Current\+Palette (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$}]{palette\+Handle,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00381                                                                    \{}
\DoxyCodeLine{00382   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = StudioPalette::instance()-\/>getPalette(fp, \textcolor{keyword}{false});}
\DoxyCodeLine{00383   \textcolor{keywordflow}{if} (!palette) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00384 }
\DoxyCodeLine{00385   loadIntoCurrentPalette(paletteHandle, palette);}
\DoxyCodeLine{00386 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_studio_palette_cmd_a897e56e0b058577445f7a445f99c68cd}\label{namespace_studio_palette_cmd_a897e56e0b058577445f7a445f99c68cd}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!loadIntoCurrentPalette@{loadIntoCurrentPalette}}
\index{loadIntoCurrentPalette@{loadIntoCurrentPalette}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{loadIntoCurrentPalette()}{loadIntoCurrentPalette()}\hspace{0.1cm}{\footnotesize\ttfamily [4/5]}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::load\+Into\+Current\+Palette (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$}]{palette\+Handle,  }\item[{\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$}]{palette }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00531                                                                  \{}
\DoxyCodeLine{00532   assert(paletteHandle);}
\DoxyCodeLine{00533   \mbox{\hyperlink{class_t_palette}{TPalette}} *current = paletteHandle-\/>getPalette();}
\DoxyCodeLine{00534   \textcolor{keywordflow}{if} (!current) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00535 }
\DoxyCodeLine{00536   \textcolor{keywordtype}{int} styleId = paletteHandle-\/>getStyleIndex();}
\DoxyCodeLine{00537 }
\DoxyCodeLine{00538   \mbox{\hyperlink{class_t_palette}{TPalette}} *old = current-\/>\mbox{\hyperlink{class_t_palette_abc3ef5824d89e65687b32c530cf25325}{clone}}();}
\DoxyCodeLine{00539   \textcolor{keywordflow}{while} (palette-\/>getStyleCount() < current-\/>\mbox{\hyperlink{class_t_palette_a5a562f2d3a5fa256fcb4bb2be5b45534}{getStyleCount}}()) \{}
\DoxyCodeLine{00540     \textcolor{keywordtype}{int} index = palette-\/>getStyleCount();}
\DoxyCodeLine{00541     assert(index < current-\/>getStyleCount());}
\DoxyCodeLine{00542     \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *style = current-\/>\mbox{\hyperlink{class_t_palette_a0f6a4eda7dafb0a9f2b43160cfec81e4}{getStyle}}(index)-\/>\mbox{\hyperlink{class_t_color_style_a7b7e50c731a150aa84f746a261765adf}{clone}}();}
\DoxyCodeLine{00543     palette-\/>addStyle(style);}
\DoxyCodeLine{00544   \}}
\DoxyCodeLine{00545   \textcolor{comment}{// keep the color model path unchanged}}
\DoxyCodeLine{00546   \mbox{\hyperlink{class_t_file_path}{TFilePath}} oldRefImagePath = current-\/>\mbox{\hyperlink{class_t_palette_a7eda1d7f3a27e8e90d0c12faaedaf5a6}{getRefImgPath}}();}
\DoxyCodeLine{00547 }
\DoxyCodeLine{00548   std::wstring oldGlobalName = current-\/>\mbox{\hyperlink{class_t_palette_ad3199523465a1961c1564a82db46b451}{getGlobalName}}();}
\DoxyCodeLine{00549   current-\/>\mbox{\hyperlink{class_t_palette_a319e848e06467e458214bba1132b49a9}{assign}}(palette, \textcolor{keyword}{true});}
\DoxyCodeLine{00550   \textcolor{comment}{// keep global name unchanged}}
\DoxyCodeLine{00551   current-\/>\mbox{\hyperlink{class_t_palette_a0d1a5c3b332f133235f6fd758d22f683}{setGlobalName}}(oldGlobalName);}
\DoxyCodeLine{00552 }
\DoxyCodeLine{00553   current-\/>\mbox{\hyperlink{class_t_palette_a382fa102abee4e69e386cb5a4d8d5184}{setDirtyFlag}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00554 }
\DoxyCodeLine{00555   current-\/>\mbox{\hyperlink{class_t_palette_a3009b4c976d9458d71dca9ea176bd7e1}{setRefImgPath}}(oldRefImagePath);}
\DoxyCodeLine{00556 }
\DoxyCodeLine{00557   \textcolor{keywordflow}{if} (paletteHandle-\/>getPalette() == current \&\&}
\DoxyCodeLine{00558       styleId >= current-\/>\mbox{\hyperlink{class_t_palette_a5a562f2d3a5fa256fcb4bb2be5b45534}{getStyleCount}}())}
\DoxyCodeLine{00559     paletteHandle-\/>setStyleIndex(1);}
\DoxyCodeLine{00560   TUndoManager::manager()-\/>add(}
\DoxyCodeLine{00561       \textcolor{keyword}{new} PaletteAssignUndo(current, old, current-\/>\mbox{\hyperlink{class_t_palette_abc3ef5824d89e65687b32c530cf25325}{clone}}(), paletteHandle));}
\DoxyCodeLine{00562 }
\DoxyCodeLine{00563   palette-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{00564 }
\DoxyCodeLine{00565   paletteHandle-\/>notifyPaletteChanged();}
\DoxyCodeLine{00566 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_studio_palette_cmd_af721f14db6ebd35736a8d475ccb78737}\label{namespace_studio_palette_cmd_af721f14db6ebd35736a8d475ccb78737}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!loadIntoCurrentPalette@{loadIntoCurrentPalette}}
\index{loadIntoCurrentPalette@{loadIntoCurrentPalette}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{loadIntoCurrentPalette()}{loadIntoCurrentPalette()}\hspace{0.1cm}{\footnotesize\ttfamily [5/5]}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::load\+Into\+Current\+Palette (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$}]{palette\+Handle,  }\item[{\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$}]{palette,  }\item[{\mbox{\hyperlink{class_t_xsh_level_handle}{TXsh\+Level\+Handle}} $\ast$}]{current\+Level\+Handle,  }\item[{int}]{tolerance }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00524                                                         \{}
\DoxyCodeLine{00525   adaptLevelToPalette(currentLevelHandle, paletteHandle, plt, tolerance, \textcolor{keyword}{false});}
\DoxyCodeLine{00526 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_studio_palette_cmd_a17a650668b7612e930bc0bdc4afa0d38}\label{namespace_studio_palette_cmd_a17a650668b7612e930bc0bdc4afa0d38}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!mergeIntoCurrentPalette@{mergeIntoCurrentPalette}}
\index{mergeIntoCurrentPalette@{mergeIntoCurrentPalette}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{mergeIntoCurrentPalette()}{mergeIntoCurrentPalette()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::merge\+Into\+Current\+Palette (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00268                                                                   \{}
\DoxyCodeLine{00269   \textcolor{comment}{//  ColorController *cc = ColorController::instance();}}
\DoxyCodeLine{00270   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = StudioPalette::instance()-\/>getPalette(fp);}
\DoxyCodeLine{00271 }
\DoxyCodeLine{00272   \mbox{\hyperlink{class_t_app}{TApp}} *app = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}();}
\DoxyCodeLine{00273 }
\DoxyCodeLine{00274   \textcolor{comment}{// DA FARE}}
\DoxyCodeLine{00275   \mbox{\hyperlink{class_t_palette}{TPalette}} *current = !palette-\/>isCleanupPalette()}
\DoxyCodeLine{00276                           ? app-\/>\mbox{\hyperlink{class_t_app_a33dbcbc578915e0b69fe6927b74cf426}{getCurrentPalette}}()-\/>getPalette()}
\DoxyCodeLine{00277                           : app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()}
\DoxyCodeLine{00278                                 -\/>getScene()}
\DoxyCodeLine{00279                                 -\/>\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}()}
\DoxyCodeLine{00280                                 -\/>getCleanupPalette();}
\DoxyCodeLine{00281   \textcolor{comment}{//    ? cc-\/>getCleanupPalette()}}
\DoxyCodeLine{00282   \textcolor{comment}{//    : cc-\/>getLevelPalette();}}
\DoxyCodeLine{00283 }
\DoxyCodeLine{00284   \textcolor{keywordflow}{if} (!current) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00285   \mbox{\hyperlink{class_t_palette}{TPalette}} *old = current-\/>\mbox{\hyperlink{class_t_palette_abc3ef5824d89e65687b32c530cf25325}{clone}}();}
\DoxyCodeLine{00286   current-\/>\mbox{\hyperlink{class_t_palette_a705d1d02aa6a88e4da4ead66c9e838aa}{merge}}(palette);}
\DoxyCodeLine{00287   TUndoManager::manager()-\/>add(}
\DoxyCodeLine{00288       \textcolor{keyword}{new} PaletteAssignUndo(current, old, current-\/>\mbox{\hyperlink{class_t_palette_abc3ef5824d89e65687b32c530cf25325}{clone}}()));}
\DoxyCodeLine{00289 }
\DoxyCodeLine{00290   app-\/>\mbox{\hyperlink{class_t_app_a33dbcbc578915e0b69fe6927b74cf426}{getCurrentPalette}}()-\/>notifyPaletteChanged();}
\DoxyCodeLine{00291 }
\DoxyCodeLine{00292   \textcolor{comment}{// DA FARE}}
\DoxyCodeLine{00293   \textcolor{keywordflow}{if} (  \textcolor{comment}{// current == cc-\/>getCurrentStylePalette() \&\&}}
\DoxyCodeLine{00294       app-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getLevel())}
\DoxyCodeLine{00295     app-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getLevel()-\/>\mbox{\hyperlink{class_t_xsh_level_aeafe88c104827f8c27a33a79e7f7ee7d}{setDirtyFlag}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00296 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_studio_palette_cmd_aa3c9a590d961602deef70745f88092d8}\label{namespace_studio_palette_cmd_aa3c9a590d961602deef70745f88092d8}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!mergeIntoCurrentPalette@{mergeIntoCurrentPalette}}
\index{mergeIntoCurrentPalette@{mergeIntoCurrentPalette}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{mergeIntoCurrentPalette()}{mergeIntoCurrentPalette()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::merge\+Into\+Current\+Palette (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$}]{palette\+Handle,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00571                                                                     \{}
\DoxyCodeLine{00572   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = StudioPalette::instance()-\/>getPalette(fp);}
\DoxyCodeLine{00573 }
\DoxyCodeLine{00574   \textcolor{keywordflow}{if} (!palette) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00575 }
\DoxyCodeLine{00576   mergeIntoCurrentPalette(paletteHandle, palette);}
\DoxyCodeLine{00577 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_studio_palette_cmd_a089ad68dcd46bce887ed1d5eaf3798c1}\label{namespace_studio_palette_cmd_a089ad68dcd46bce887ed1d5eaf3798c1}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!mergeIntoCurrentPalette@{mergeIntoCurrentPalette}}
\index{mergeIntoCurrentPalette@{mergeIntoCurrentPalette}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{mergeIntoCurrentPalette()}{mergeIntoCurrentPalette()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::merge\+Into\+Current\+Palette (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$}]{palette\+Handle,  }\item[{\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$}]{palette }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00582                                                                   \{}
\DoxyCodeLine{00583   assert(paletteHandle);}
\DoxyCodeLine{00584   \mbox{\hyperlink{class_t_palette}{TPalette}} *current = paletteHandle-\/>getPalette();}
\DoxyCodeLine{00585 }
\DoxyCodeLine{00586   \textcolor{keywordflow}{if} (!current) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00587   \textcolor{keywordflow}{if} (current-\/>\mbox{\hyperlink{class_t_palette_a4a66ac047e12676ed6038f1261743dde}{isLocked}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00588 }
\DoxyCodeLine{00589   \mbox{\hyperlink{class_t_palette}{TPalette}} *old = current-\/>\mbox{\hyperlink{class_t_palette_abc3ef5824d89e65687b32c530cf25325}{clone}}();}
\DoxyCodeLine{00590   current-\/>\mbox{\hyperlink{class_t_palette_a705d1d02aa6a88e4da4ead66c9e838aa}{merge}}(palette, \textcolor{keyword}{true});}
\DoxyCodeLine{00591   TUndoManager::manager()-\/>add(}
\DoxyCodeLine{00592       \textcolor{keyword}{new} PaletteAssignUndo(current, old, current-\/>\mbox{\hyperlink{class_t_palette_abc3ef5824d89e65687b32c530cf25325}{clone}}(), paletteHandle));}
\DoxyCodeLine{00593 }
\DoxyCodeLine{00594   current-\/>\mbox{\hyperlink{class_t_palette_a382fa102abee4e69e386cb5a4d8d5184}{setDirtyFlag}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00595   paletteHandle-\/>notifyPaletteChanged();}
\DoxyCodeLine{00596 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_studio_palette_cmd_a091a7f168889ea48f1ba76a21e9e244a}\label{namespace_studio_palette_cmd_a091a7f168889ea48f1ba76a21e9e244a}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!movePalette@{movePalette}}
\index{movePalette@{movePalette}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{movePalette()}{movePalette()}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::move\+Palette (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{dst\+Path,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{src\+Path }\end{DoxyParamCaption})}

Move palette from \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} {\bfseries{src\+Path}} to {\bfseries{\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}} {\bfseries{dst\+Path}}. If there are any problems in moving send an error message. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00435                                                              \{}
\DoxyCodeLine{00436   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00437     TSystem::touchParentDir(dstPath);}
\DoxyCodeLine{00438     StudioPalette::instance()-\/>movePalette(dstPath, srcPath);}
\DoxyCodeLine{00439     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} MovePaletteUndo(dstPath, srcPath));}
\DoxyCodeLine{00440   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{00441     error(\textcolor{stringliteral}{"{}Can't rename palette: "{}} + QString(toString(e.getMessage()).c\_str()));}
\DoxyCodeLine{00442   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00443     error(\textcolor{stringliteral}{"{}Can't rename palette"{}});}
\DoxyCodeLine{00444   \}}
\DoxyCodeLine{00445 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00729}{Studio\+Palette\+Tree\+Viewer\+::drop\+Event()}}, and \mbox{\hyperlink{l00374}{Studio\+Palette\+Tree\+Viewer\+::on\+Item\+Changed()}}.

\mbox{\Hypertarget{namespace_studio_palette_cmd_a91fd8f76cc70ac51289a741d81ba049d}\label{namespace_studio_palette_cmd_a91fd8f76cc70ac51289a741d81ba049d}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!replaceWithCleanupPalette@{replaceWithCleanupPalette}}
\index{replaceWithCleanupPalette@{replaceWithCleanupPalette}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{replaceWithCleanupPalette()}{replaceWithCleanupPalette()}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::replace\+With\+Cleanup\+Palette (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00360                                                                     \{}
\DoxyCodeLine{00361   \textcolor{comment}{// DA FARE}}
\DoxyCodeLine{00362   \textcolor{comment}{// ColorController *cc = ColorController::instance();}}
\DoxyCodeLine{00363   \mbox{\hyperlink{class_studio_palette}{StudioPalette}} *sp = StudioPalette::instance();}
\DoxyCodeLine{00364   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = sp-\/>getPalette(fp);}
\DoxyCodeLine{00365 }
\DoxyCodeLine{00366   \textcolor{comment}{// DA FARE}}
\DoxyCodeLine{00367   \textcolor{comment}{// TPalette *current = cc-\/>getCleanupPalette();}}
\DoxyCodeLine{00368   \mbox{\hyperlink{class_t_palette}{TPalette}} *current = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()}
\DoxyCodeLine{00369                           -\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()}
\DoxyCodeLine{00370                           -\/>getScene()}
\DoxyCodeLine{00371                           -\/>\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}()}
\DoxyCodeLine{00372                           -\/>getCleanupPalette();}
\DoxyCodeLine{00373   \textcolor{keywordflow}{if} (!current) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00374   \mbox{\hyperlink{class_t_palette}{TPalette}} *old = palette-\/>clone();}
\DoxyCodeLine{00375   palette-\/>assign(current);}
\DoxyCodeLine{00376   sp-\/>setPalette(fp, current);}
\DoxyCodeLine{00377   TUndoManager::manager()-\/>add(}
\DoxyCodeLine{00378       \textcolor{keyword}{new} StudioPaletteAssignUndo(fp, old, current-\/>\mbox{\hyperlink{class_t_palette_abc3ef5824d89e65687b32c530cf25325}{clone}}()));}
\DoxyCodeLine{00379   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a33dbcbc578915e0b69fe6927b74cf426}{getCurrentPalette}}()-\/>notifyPaletteSwitched();}
\DoxyCodeLine{00380 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_studio_palette_cmd_adbe4cbb0ede856879ef40389fe363ea7}\label{namespace_studio_palette_cmd_adbe4cbb0ede856879ef40389fe363ea7}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!replaceWithCurrentPalette@{replaceWithCurrentPalette}}
\index{replaceWithCurrentPalette@{replaceWithCurrentPalette}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{replaceWithCurrentPalette()}{replaceWithCurrentPalette()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::replace\+With\+Current\+Palette (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00300                                                                     \{}
\DoxyCodeLine{00301   \textcolor{comment}{// DA FARE}}
\DoxyCodeLine{00302   \textcolor{comment}{// ColorController *cc = ColorController::instance();}}
\DoxyCodeLine{00303   \mbox{\hyperlink{class_studio_palette}{StudioPalette}} *sp = StudioPalette::instance();}
\DoxyCodeLine{00304   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = sp-\/>getPalette(fp);}
\DoxyCodeLine{00305 }
\DoxyCodeLine{00306   \textcolor{comment}{// DA FARE}}
\DoxyCodeLine{00307   \mbox{\hyperlink{class_t_palette}{TPalette}} *current = !palette-\/>isCleanupPalette()}
\DoxyCodeLine{00308                           ? \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a33dbcbc578915e0b69fe6927b74cf426}{getCurrentPalette}}()-\/>getPalette()}
\DoxyCodeLine{00309                           : \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()}
\DoxyCodeLine{00310                                 -\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()}
\DoxyCodeLine{00311                                 -\/>getScene()}
\DoxyCodeLine{00312                                 -\/>\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}()}
\DoxyCodeLine{00313                                 -\/>getCleanupPalette();}
\DoxyCodeLine{00314   \textcolor{comment}{//    ? cc-\/>getCleanupPalette()}}
\DoxyCodeLine{00315   \textcolor{comment}{//    : cc-\/>getLevelPalette();}}
\DoxyCodeLine{00316   \textcolor{keywordflow}{if} (!current) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00317   \mbox{\hyperlink{class_t_palette}{TPalette}} *old = palette-\/>clone();}
\DoxyCodeLine{00318   palette-\/>assign(current);}
\DoxyCodeLine{00319   sp-\/>setPalette(fp, current);}
\DoxyCodeLine{00320   TUndoManager::manager()-\/>add(}
\DoxyCodeLine{00321       \textcolor{keyword}{new} StudioPaletteAssignUndo(fp, old, current-\/>\mbox{\hyperlink{class_t_palette_abc3ef5824d89e65687b32c530cf25325}{clone}}()));}
\DoxyCodeLine{00322   \textcolor{comment}{// DA FARE}}
\DoxyCodeLine{00323   \textcolor{comment}{// Cambio la studioPalette corrente}}
\DoxyCodeLine{00324   \textcolor{comment}{//  ColorController::instance()-\/>setStudioPalette(palette);}}
\DoxyCodeLine{00325   DAFARE::setCurrentStudioPalette(current);}
\DoxyCodeLine{00326   DAFARE::setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{00327 }
\DoxyCodeLine{00328   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a33dbcbc578915e0b69fe6927b74cf426}{getCurrentPalette}}()-\/>notifyPaletteSwitched();}
\DoxyCodeLine{00329 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_studio_palette_cmd_a2a88d817cd0afaa72e876b45e0fb72b0}\label{namespace_studio_palette_cmd_a2a88d817cd0afaa72e876b45e0fb72b0}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!replaceWithCurrentPalette@{replaceWithCurrentPalette}}
\index{replaceWithCurrentPalette@{replaceWithCurrentPalette}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{replaceWithCurrentPalette()}{replaceWithCurrentPalette()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::replace\+With\+Current\+Palette (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$}]{palette\+Handle,  }\item[{\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$}]{std\+Palette\+Handle,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00602                          \{}
\DoxyCodeLine{00603   \mbox{\hyperlink{class_studio_palette}{StudioPalette}} *sp = StudioPalette::instance();}
\DoxyCodeLine{00604   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = sp-\/>getPalette(fp);}
\DoxyCodeLine{00605 }
\DoxyCodeLine{00606   \textcolor{keywordflow}{if} (!palette || palette-\/>isLocked()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00607 }
\DoxyCodeLine{00608   assert(paletteHandle);}
\DoxyCodeLine{00609   \mbox{\hyperlink{class_t_palette}{TPalette}} *current = paletteHandle-\/>getPalette();}
\DoxyCodeLine{00610 }
\DoxyCodeLine{00611   \textcolor{keywordflow}{if} (!current) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00612   \textcolor{comment}{// keep the studio palette's global name unchanged}}
\DoxyCodeLine{00613   std::wstring oldGlobalName = palette-\/>getGlobalName();}
\DoxyCodeLine{00614 }
\DoxyCodeLine{00615   \mbox{\hyperlink{class_t_palette}{TPalette}} *old = palette-\/>clone();}
\DoxyCodeLine{00616   palette-\/>assign(current);}
\DoxyCodeLine{00617 }
\DoxyCodeLine{00618   \textcolor{comment}{// put back the global name}}
\DoxyCodeLine{00619   palette-\/>setGlobalName(oldGlobalName);}
\DoxyCodeLine{00620 }
\DoxyCodeLine{00621   \textcolor{keywordflow}{if} (!trySetStudioPalette(fp, current, \textcolor{keyword}{true})) \{}
\DoxyCodeLine{00622     palette-\/>assign(old);}
\DoxyCodeLine{00623     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00624   \}}
\DoxyCodeLine{00625 }
\DoxyCodeLine{00626   TUndoManager::manager()-\/>add(}
\DoxyCodeLine{00627       \textcolor{keyword}{new} StudioPaletteAssignUndo(fp, old, current-\/>\mbox{\hyperlink{class_t_palette_abc3ef5824d89e65687b32c530cf25325}{clone}}(), paletteHandle));}
\DoxyCodeLine{00628 }
\DoxyCodeLine{00629   \textcolor{comment}{// Cambio la studioPalette correntette(palette);}}
\DoxyCodeLine{00630   stdPaletteHandle-\/>setPalette(palette);}
\DoxyCodeLine{00631 }
\DoxyCodeLine{00632   stdPaletteHandle-\/>notifyPaletteSwitched();}
\DoxyCodeLine{00633 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_studio_palette_cmd_a23ae55ac17c0c7ed563975457badc389}\label{namespace_studio_palette_cmd_a23ae55ac17c0c7ed563975457badc389}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!scanPalettes@{scanPalettes}}
\index{scanPalettes@{scanPalettes}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{scanPalettes()}{scanPalettes()}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::scan\+Palettes (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{folder,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{source\+Path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00508                                                                  \{}
\DoxyCodeLine{00509   error(\textcolor{stringliteral}{"{}uh oh"{}});}
\DoxyCodeLine{00510 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_studio_palette_cmd_a463f39243d50f79f73c220de2d9f05f0}\label{namespace_studio_palette_cmd_a463f39243d50f79f73c220de2d9f05f0}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!updateAllLinkedStyles@{updateAllLinkedStyles}}
\index{updateAllLinkedStyles@{updateAllLinkedStyles}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{updateAllLinkedStyles()}{updateAllLinkedStyles()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::update\+All\+Linked\+Styles (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00384                                              \{}
\DoxyCodeLine{00385   \mbox{\hyperlink{class_studio_palette}{StudioPalette}} *sp   = StudioPalette::instance();}
\DoxyCodeLine{00386   \mbox{\hyperlink{class_t_app}{TApp}} *app           = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}();}
\DoxyCodeLine{00387   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene   = app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{00388   \mbox{\hyperlink{class_t_level_set}{TLevelSet}} *levelSet = scene-\/>\mbox{\hyperlink{class_toonz_scene_ac1a8bf0d2cec4f59c87b0001991264b5}{getLevelSet}}();}
\DoxyCodeLine{00389   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < levelSet-\/>getLevelCount(); i++) \{}
\DoxyCodeLine{00390     \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl       = levelSet-\/>getLevel(i);}
\DoxyCodeLine{00391     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = xl ? xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}() : 0;}
\DoxyCodeLine{00392     \textcolor{keywordflow}{if} (!sl) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00393     \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}();}
\DoxyCodeLine{00394     \textcolor{keywordflow}{if} (palette) \{}
\DoxyCodeLine{00395       sp-\/>\mbox{\hyperlink{class_studio_palette_a8174aad5fff24c6a08849628e35c8ec2}{updateLinkedColors}}(palette);}
\DoxyCodeLine{00396       \textcolor{keywordflow}{if} (sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == TZP\_XSHLEVEL) \{}
\DoxyCodeLine{00397         std::vector<TFrameId> fids;}
\DoxyCodeLine{00398         sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{getFids}}(fids);}
\DoxyCodeLine{00399         std::vector<TFrameId>::iterator it;}
\DoxyCodeLine{00400         \textcolor{keywordflow}{for} (it = fids.begin(); it != fids.end(); ++it) \{}
\DoxyCodeLine{00401           \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = *it;}
\DoxyCodeLine{00402           \textcolor{keywordtype}{string} \textcolor{keywordtype}{id}    = sl-\/>getImageId(fid);}
\DoxyCodeLine{00403           IconGenerator::instance()-\/>invalidate(sl, fid);}
\DoxyCodeLine{00404           \textcolor{comment}{// ImageManager::instance()-\/>invalidate(id);}}
\DoxyCodeLine{00405         \}}
\DoxyCodeLine{00406       \}}
\DoxyCodeLine{00407     \}}
\DoxyCodeLine{00408   \}}
\DoxyCodeLine{00409   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a33dbcbc578915e0b69fe6927b74cf426}{getCurrentPalette}}()-\/>notifyPaletteChanged();}
\DoxyCodeLine{00410 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_studio_palette_cmd_a2b3ef0b52ba4e87daf0c78d40b9027be}\label{namespace_studio_palette_cmd_a2b3ef0b52ba4e87daf0c78d40b9027be}} 
\index{StudioPaletteCmd@{StudioPaletteCmd}!updateAllLinkedStyles@{updateAllLinkedStyles}}
\index{updateAllLinkedStyles@{updateAllLinkedStyles}!StudioPaletteCmd@{StudioPaletteCmd}}
\doxysubsubsection{\texorpdfstring{updateAllLinkedStyles()}{updateAllLinkedStyles()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Studio\+Palette\+Cmd\+::update\+All\+Linked\+Styles (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$}]{palette\+Handle,  }\item[{\mbox{\hyperlink{class_t_xsheet_handle}{TXsheet\+Handle}} $\ast$}]{xsheet\+Handle }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00638                                                                           \{}
\DoxyCodeLine{00639   \textcolor{keywordflow}{if} (!xsheetHandle) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00640   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsheet = xsheetHandle-\/>getXsheet();}
\DoxyCodeLine{00641   \textcolor{keywordflow}{if} (!xsheet) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00642   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = xsheet-\/>\mbox{\hyperlink{class_t_xsheet_a35d49d436513243d059eee3a25ffa2ef}{getScene}}();}
\DoxyCodeLine{00643   \textcolor{keywordflow}{if} (!scene) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00644 }
\DoxyCodeLine{00645   \textcolor{comment}{// emit signal only if something changed}}
\DoxyCodeLine{00646   \textcolor{keywordtype}{bool} somethingChanged = \textcolor{keyword}{false};}
\DoxyCodeLine{00647 }
\DoxyCodeLine{00648   \mbox{\hyperlink{class_studio_palette}{StudioPalette}} *sp   = StudioPalette::instance();}
\DoxyCodeLine{00649   \mbox{\hyperlink{class_t_level_set}{TLevelSet}} *levelSet = scene-\/>\mbox{\hyperlink{class_toonz_scene_ac1a8bf0d2cec4f59c87b0001991264b5}{getLevelSet}}();}
\DoxyCodeLine{00650   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < levelSet-\/>getLevelCount(); i++) \{}
\DoxyCodeLine{00651     \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl       = levelSet-\/>getLevel(i);}
\DoxyCodeLine{00652     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = xl ? xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}() : 0;}
\DoxyCodeLine{00653     \textcolor{keywordflow}{if} (!sl) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00654     \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}();}
\DoxyCodeLine{00655     \textcolor{keywordflow}{if} (palette) \{}
\DoxyCodeLine{00656       somethingChanged = somethingChanged | sp-\/>\mbox{\hyperlink{class_studio_palette_a8174aad5fff24c6a08849628e35c8ec2}{updateLinkedColors}}(palette);}
\DoxyCodeLine{00657       \textcolor{keywordflow}{if} (sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == TZP\_XSHLEVEL) \{}
\DoxyCodeLine{00658         std::vector<TFrameId> fids;}
\DoxyCodeLine{00659         sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{getFids}}(fids);}
\DoxyCodeLine{00660         std::vector<TFrameId>::iterator it;}
\DoxyCodeLine{00661         \textcolor{keywordflow}{for} (it = fids.begin(); it != fids.end(); ++it) \{}
\DoxyCodeLine{00662           \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid   = *it;}
\DoxyCodeLine{00663           std::string \textcolor{keywordtype}{id} = sl-\/>getImageId(fid);}
\DoxyCodeLine{00664         \}}
\DoxyCodeLine{00665       \}}
\DoxyCodeLine{00666     \}}
\DoxyCodeLine{00667   \}}
\DoxyCodeLine{00668   \textcolor{keywordflow}{if} (!paletteHandle || !paletteHandle-\/>getPalette()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00669   \textcolor{keywordflow}{if} (somethingChanged) paletteHandle-\/>notifyColorStyleChanged();}
\DoxyCodeLine{00670 \}}

\end{DoxyCode}
