\hypertarget{class_toonz_scene}{}\doxysection{Toonz\+Scene Class Reference}
\label{class_toonz_scene}\index{ToonzScene@{ToonzScene}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_project}{TProject}} $\ast$ \mbox{\hyperlink{class_toonz_scene_afec1477d4fe0bb1e1152e80c3a0b20ab}{get\+Project}} () const
\begin{DoxyCompactList}\small\item\em Returns a pointer to the project holding a scene instance. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_toonz_scene_aa7aac33fc53c47ea5baff597e5f18a9b}{set\+Project}} (\mbox{\hyperlink{class_t_project}{TProject}} $\ast$)
\begin{DoxyCompactList}\small\item\em Associates a scene to a project. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_toonz_scene_a815ecf4f07a92f9f9fef693f762c1228}{set\+Scene\+Path}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&p)
\begin{DoxyCompactList}\small\item\em Sets the scene\textquotesingle{}s file path. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_toonz_scene_ad42b52b671b094f66e003c4b7ebefd45}{get\+Scene\+Path}} () const
\begin{DoxyCompactList}\small\item\em Returns the scene\textquotesingle{}s file path. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_toonz_scene_a8c168c9551d1ac99ad3ce4849d36a464}{set\+Scene\+Name}} (std\+::wstring name)
\begin{DoxyCompactList}\small\item\em Sets the scene\textquotesingle{}s name. \end{DoxyCompactList}\item 
std\+::wstring \mbox{\hyperlink{class_toonz_scene_a1fa0a1cbf9eb6360d980392acc99924b}{get\+Scene\+Name}} () const
\begin{DoxyCompactList}\small\item\em Returns the scene\textquotesingle{}s name. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_toonz_scene_ad5e0cf52431bcf95e54faa416f0fc21d}{set\+Untitled}} ()
\begin{DoxyCompactList}\small\item\em Marks the scene as explicitly untitled. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_toonz_scene_a53cbaf09f551658479eb743e153ab6bc}{is\+Untitled}} () const
\item 
\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$ \mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{get\+Xsheet}} () const
\begin{DoxyCompactList}\small\item\em Returns a pointer to the scene\textquotesingle{}s {\itshape current} xsheet. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$ \mbox{\hyperlink{class_toonz_scene_aaffd562eebbd8faba4caeaed69bfcc18}{get\+Top\+Xsheet}} () const
\item 
\mbox{\hyperlink{class_child_stack}{Child\+Stack}} $\ast$ \mbox{\hyperlink{class_toonz_scene_ae2cbc582144c92adc5076cd5f556c95a}{get\+Child\+Stack}} () const
\begin{DoxyCompactList}\small\item\em Returns a pointer to the xsheets hierarchy. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_scene_properties}{TScene\+Properties}} $\ast$ \mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{get\+Properties}} () const
\begin{DoxyCompactList}\small\item\em \texorpdfstring{$<$}{<} Returns a pointer to the scene\textquotesingle{}s properties. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_level_set}{TLevel\+Set}} $\ast$ \mbox{\hyperlink{class_toonz_scene_ac1a8bf0d2cec4f59c87b0001991264b5}{get\+Level\+Set}} () const
\begin{DoxyCompactList}\small\item\em Returns a pointer to the scene\textquotesingle{}s {\itshape Level Set}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_toonz_scene_ad63e1050bdbe8f213f5da4bc852c6f7a}{clear}} ()
\begin{DoxyCompactList}\small\item\em Clears the scene. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_toonz_scene_ac65f5b13baf094ba58e2e74c6949df61}{save}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path, \mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$subxsheet=0)
\item 
void \mbox{\hyperlink{class_toonz_scene_ac16c1eaa9cba08a24be952e8f3d62a8f}{load\+Tnz\+File}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path)
\item 
void \mbox{\hyperlink{class_toonz_scene_ac1c6f51c86f8feba26ea8633a2283125}{load\+No\+Resources}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path)
\item 
void \mbox{\hyperlink{class_toonz_scene_af1379cb7299d5c0c1f764cd7a629fcef}{load\+Resources}} (bool with\+Progress\+Dialog=false)
\begin{DoxyCompactList}\small\item\em Loads the scene resources. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_toonz_scene_ac8765c2df661b90822547a9137e77aba}{load}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path, bool with\+Progress\+Dialog=false)
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_toonz_scene_a26d8d4a1f92e962e8c1d40f3a1d37a45}{get\+Imported\+Level\+Path}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} path) const
\begin{DoxyCompactList}\small\item\em Loads a scene from file. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_toonz_scene_ad8d5a080e48a1ab0241c410ce3a0f485}{convert\+Level\+If\+Needed}} (\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&level\+Path)
\item 
\mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}} $\ast$ \mbox{\hyperlink{class_toonz_scene_ae6bd7d22f6310011d48dfb5176344015}{load\+Level}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&actual\+Path, const \mbox{\hyperlink{class_level_options}{Level\+Options}} $\ast$options=0, std\+::wstring level\+Name=L\char`\"{}\char`\"{}, const std\+::vector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \&f\+Ids=std\+::vector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$())
\item 
void \mbox{\hyperlink{class_toonz_scene_a5839f9331bbd43c14fcf51d700e731f1}{render\+Frame}} (const \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} \&ras, int row, const \mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$xsh=0, bool check\+Flags=true) const
\item 
void \mbox{\hyperlink{class_toonz_scene_afbc821048387af2b6fe21c0c1223060e}{render\+Frame}} (const \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} \&ras, int row, const \mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$xsh, const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&placed\+Rect, const \mbox{\hyperlink{class_t_affine}{TAffine}} \&world\+To\+Placed\+Aff) const
\item 
int \mbox{\hyperlink{class_toonz_scene_ab5cd3ad6f894b1acc5656ca747a80627}{get\+Frame\+Count}} () const
\item 
int \mbox{\hyperlink{class_toonz_scene_a22171559a050d37bdf6763e8abcaf73c}{load\+Frame\+Count}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp)
\item 
\mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}} $\ast$ \mbox{\hyperlink{class_toonz_scene_ac8791183db4daa28bdffdd40e15c3b9e}{create\+New\+Level}} (int type, std\+::wstring level\+Name=L\char`\"{}\char`\"{}, const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&dim=\mbox{\hyperlink{class_t_dimension_t}{TDimension}}(), double dpi=0, \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} fp=\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}())
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_toonz_scene_abb12422205be4336c3dee1aa5fbdc5e5}{code\+File\+Path}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&) const
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decode\+File\+Path}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&) const
\item 
bool \mbox{\hyperlink{class_toonz_scene_a657e45d8e257f7c2047022b75dc8600d}{is\+Extern\+Path}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp) const
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_toonz_scene_a3f7940ad6794546ba923304231820f00}{get\+Default\+Level\+Path}} (int level\+Type, std\+::wstring level\+Name=L\char`\"{}a\char`\"{}) const
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_toonz_scene_aef65f946258e28f8cc6dd7b83fb304a8}{code\+Save\+Path}} (\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}) const
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_toonz_scene_a988041b1acd57d079881147224cf1ebe}{decode\+Save\+Path}} (\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}) const
\item 
\mbox{\hyperlink{class_t_camera}{TCamera}} $\ast$ \mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{get\+Current\+Camera}} ()
\item 
\mbox{\hyperlink{class_t_camera}{TCamera}} $\ast$ \mbox{\hyperlink{class_toonz_scene_a78f568fb7c0bd57f0212e5f69bd06f16}{get\+Current\+Preview\+Camera}} ()
\item 
void \mbox{\hyperlink{class_toonz_scene_ac8bd378d5af03124df8ee54f216a09d3}{get\+Sound\+Columns}} (std\+::vector$<$ \mbox{\hyperlink{class_t_xsh_sound_column}{TXsh\+Sound\+Column}} $\ast$ $>$ \&columns)
\item 
void \mbox{\hyperlink{class_toonz_scene_a9304aa6099f4b83540c0261e64d17a25}{update\+Sound\+Column\+Frame\+Rate}} ()
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_toonz_scene_ab706bb783e2ff91a76423e12fce6e7fe}{get\+Icon\+Path}} () const
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_toonz_scene_a27f04f65e52c9c9a4ebc55ea25f0ddbb}{get\+Save\+Path}} () const
\item 
\mbox{\hyperlink{class_t_content_history}{TContent\+History}} $\ast$ \mbox{\hyperlink{class_toonz_scene_ae3c27b7146c62da156c5d5bffca0e9d7}{get\+Content\+History}} (bool create\+If\+Needed=false)
\begin{DoxyCompactList}\small\item\em gets the content\+History. possibly creates a new one (if create\+If\+Needed) \end{DoxyCompactList}\item 
double \mbox{\hyperlink{class_toonz_scene_a190e3b95a8a40384fcd3a15a116cc651}{shift\+CameraX}} (double val)
\item 
void \mbox{\hyperlink{class_toonz_scene_a335bc842d433ec40bcdc697821916cf8}{set\+Version\+Number}} (Version\+Number version)
\item 
Version\+Number \mbox{\hyperlink{class_toonz_scene_aedb528bcece52278325ab31d664faf20}{get\+Version\+Number}} ()
\item 
bool \mbox{\hyperlink{class_toonz_scene_acd9f530d887f647cb58cd8ab96445a89}{code\+File\+Path\+With\+Scene\+Folder}} (\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path) const
\item 
bool \mbox{\hyperlink{class_toonz_scene_a78b979156507dc35586cdd435e0f26cb}{is\+Loading}} ()
\item 
void \mbox{\hyperlink{class_toonz_scene_a58a128eb8be9f67ead32ac5c674a51f1}{set\+Is\+Loading}} (bool is\+Loading)
\item 
std\+::wstring \mbox{\hyperlink{class_toonz_scene_a51bbbe2c6a6f8433c1009215f712ede9}{get\+Level\+Name\+Without\+Scene\+Number}} (std\+::wstring org\+Name)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_toonz_scene_a2d97e9b3647bb45c0c992a6c92c659eb}{get\+Icon\+Path}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&scene\+Path)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_toonz_scene_a922033446879d3f278daae6e31b6147e}\label{class_toonz_scene_a922033446879d3f278daae6e31b6147e}} 
\index{ToonzScene@{ToonzScene}!ToonzScene@{ToonzScene}}
\index{ToonzScene@{ToonzScene}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{ToonzScene()}{ToonzScene()}}
{\footnotesize\ttfamily Toonz\+Scene\+::\+Toonz\+Scene (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00280     : m\_contentHistory(0), m\_isUntitled(\textcolor{keyword}{true}), m\_isLoading(\textcolor{keyword}{false}) \{}
\DoxyCodeLine{00281   m\_childStack = \textcolor{keyword}{new} \mbox{\hyperlink{class_child_stack}{ChildStack}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00282   m\_properties = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_scene_properties}{TSceneProperties}}();}
\DoxyCodeLine{00283   m\_levelSet   = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_level_set}{TLevelSet}}();}
\DoxyCodeLine{00284   m\_project    = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_project}{TProject}}();}
\DoxyCodeLine{00285   m\_project-\/>addRef();}
\DoxyCodeLine{00286 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_scene_a3b8a8e33aa3d2315c6d7aadda3d159d8}\label{class_toonz_scene_a3b8a8e33aa3d2315c6d7aadda3d159d8}} 
\index{ToonzScene@{ToonzScene}!````~ToonzScene@{$\sim$ToonzScene}}
\index{````~ToonzScene@{$\sim$ToonzScene}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{$\sim$ToonzScene()}{~ToonzScene()}}
{\footnotesize\ttfamily Toonz\+Scene\+::$\sim$\+Toonz\+Scene (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00290                         \{}
\DoxyCodeLine{00291   \textcolor{keyword}{delete} m\_properties;}
\DoxyCodeLine{00292   \textcolor{keyword}{delete} m\_levelSet;}
\DoxyCodeLine{00293   \textcolor{keyword}{delete} m\_childStack;}
\DoxyCodeLine{00294   \textcolor{keyword}{delete} m\_contentHistory;}
\DoxyCodeLine{00295 }
\DoxyCodeLine{00296   assert(m\_project);}
\DoxyCodeLine{00297   \textcolor{keywordflow}{if} (m\_project) m\_project-\/>release();}
\DoxyCodeLine{00298 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_toonz_scene_ad63e1050bdbe8f213f5da4bc852c6f7a}\label{class_toonz_scene_ad63e1050bdbe8f213f5da4bc852c6f7a}} 
\index{ToonzScene@{ToonzScene}!clear@{clear}}
\index{clear@{clear}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{clear()}{clear()}}
{\footnotesize\ttfamily void Toonz\+Scene\+::clear (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Clears the scene. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00308                        \{}
\DoxyCodeLine{00309   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_toonz_scene_a53cbaf09f551658479eb743e153ab6bc}{isUntitled}}()) deleteUntitledScene(\mbox{\hyperlink{class_toonz_scene_ad42b52b671b094f66e003c4b7ebefd45}{getScenePath}}().getParentDir());}
\DoxyCodeLine{00310 }
\DoxyCodeLine{00311   m\_childStack-\/>\mbox{\hyperlink{class_child_stack_a45ee4c46f539dc56bc687a10c27caa57}{clear}}();}
\DoxyCodeLine{00312 }
\DoxyCodeLine{00313   m\_scenePath                  = \mbox{\hyperlink{class_t_file_path}{TFilePath}}();}
\DoxyCodeLine{00314   \mbox{\hyperlink{class_t_scene_properties}{TSceneProperties}} *properties = m\_properties;}
\DoxyCodeLine{00315   m\_properties                 = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_scene_properties}{TSceneProperties}}();}
\DoxyCodeLine{00316   \textcolor{keyword}{delete} properties;}
\DoxyCodeLine{00317   m\_levelSet-\/>clear();}
\DoxyCodeLine{00318 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00049}{Child\+Stack\+::clear()}}, \mbox{\hyperlink{l00059}{get\+Scene\+Path()}}, and \mbox{\hyperlink{l00345}{is\+Untitled()}}.



Referenced by \mbox{\hyperlink{l00394}{load\+No\+Resources()}}.

\mbox{\Hypertarget{class_toonz_scene_abb12422205be4336c3dee1aa5fbdc5e5}\label{class_toonz_scene_abb12422205be4336c3dee1aa5fbdc5e5}} 
\index{ToonzScene@{ToonzScene}!codeFilePath@{codeFilePath}}
\index{codeFilePath@{codeFilePath}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{codeFilePath()}{codeFilePath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Toonz\+Scene\+::code\+File\+Path (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path }\end{DoxyParamCaption}) const}

Code file path {\bfseries{\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}}. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decode\+File\+Path()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{01328                                                               \{}
\DoxyCodeLine{01329   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp(path);}
\DoxyCodeLine{01330   \mbox{\hyperlink{class_t_project}{TProject}} *project = \mbox{\hyperlink{class_toonz_scene_afec1477d4fe0bb1e1152e80c3a0b20ab}{getProject}}();}
\DoxyCodeLine{01331 }
\DoxyCodeLine{01332   Preferences::PathAliasPriority priority =}
\DoxyCodeLine{01333       Preferences::instance()-\/>getPathAliasPriority();}
\DoxyCodeLine{01334   \textcolor{keywordflow}{if} (priority == Preferences::SceneFolderAlias \&\&}
\DoxyCodeLine{01335       codeFilePathWithSceneFolder(fp)) \{}
\DoxyCodeLine{01336     \textcolor{keywordflow}{return} fp;}
\DoxyCodeLine{01337   \}}
\DoxyCodeLine{01338 }
\DoxyCodeLine{01339   \textcolor{keywordflow}{if} (project)}
\DoxyCodeLine{01340     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < project-\/>\mbox{\hyperlink{class_t_project_a26ebcdd853071adf3bfb4e80aabed84f}{getFolderCount}}(); i++) \{}
\DoxyCodeLine{01341       \mbox{\hyperlink{class_t_file_path}{TFilePath}} folderName(\textcolor{stringliteral}{"{}+"{}} + project-\/>\mbox{\hyperlink{class_t_project_ab7cd33e579f84763bee6421daeb3bde5}{getFolderName}}(i));}
\DoxyCodeLine{01342       \mbox{\hyperlink{class_t_file_path}{TFilePath}} folderPath = \mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(folderName);}
\DoxyCodeLine{01343       \textcolor{keywordflow}{if} (folderPath.isAncestorOf(fp)) \{}
\DoxyCodeLine{01344         fp = folderName + (fp -\/ folderPath);}
\DoxyCodeLine{01345         \textcolor{keywordflow}{return} fp;}
\DoxyCodeLine{01346       \}}
\DoxyCodeLine{01347     \}}
\DoxyCodeLine{01348 }
\DoxyCodeLine{01349   \textcolor{keywordflow}{if} (priority == Preferences::ProjectFolderAliases)}
\DoxyCodeLine{01350     codeFilePathWithSceneFolder(fp);}
\DoxyCodeLine{01351 }
\DoxyCodeLine{01352   \textcolor{keywordflow}{return} fp;}
\DoxyCodeLine{01353 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01231}{decode\+File\+Path()}}, \mbox{\hyperlink{l00384}{TProject\+::get\+Folder\+Count()}}, \mbox{\hyperlink{l00388}{TProject\+::get\+Folder\+Name()}}, and \mbox{\hyperlink{l00334}{get\+Project()}}.



Referenced by \mbox{\hyperlink{l02076}{Replace\+Parent\+Directory\+Popup\+::execute()}}, \mbox{\hyperlink{l01122}{load\+Level()}}, \mbox{\hyperlink{l00968}{Output\+Settings\+Popup\+::on\+Path\+Changed()}}, and \mbox{\hyperlink{l00242}{Vectorizer\+::set\+Level()}}.

\mbox{\Hypertarget{class_toonz_scene_acd9f530d887f647cb58cd8ab96445a89}\label{class_toonz_scene_acd9f530d887f647cb58cd8ab96445a89}} 
\index{ToonzScene@{ToonzScene}!codeFilePathWithSceneFolder@{codeFilePathWithSceneFolder}}
\index{codeFilePathWithSceneFolder@{codeFilePathWithSceneFolder}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{codeFilePathWithSceneFolder()}{codeFilePathWithSceneFolder()}}
{\footnotesize\ttfamily bool Toonz\+Scene\+::code\+File\+Path\+With\+Scene\+Folder (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{01358                                                                   \{}
\DoxyCodeLine{01359   \textcolor{comment}{// if the scene is untitled, then do nothing and return false}}
\DoxyCodeLine{01360   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_toonz_scene_a53cbaf09f551658479eb743e153ab6bc}{isUntitled}}()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01361   \mbox{\hyperlink{class_t_file_path}{TFilePath}} sceneFolderPath = m\_scenePath.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}();}
\DoxyCodeLine{01362   \textcolor{keywordflow}{if} (sceneFolderPath.isAncestorOf(path)) \{}
\DoxyCodeLine{01363     path = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}\$scenefolder"{}}) + (path -\/ sceneFolderPath);}
\DoxyCodeLine{01364     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01365   \}}
\DoxyCodeLine{01366   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01367 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_scene_aef65f946258e28f8cc6dd7b83fb304a8}\label{class_toonz_scene_aef65f946258e28f8cc6dd7b83fb304a8}} 
\index{ToonzScene@{ToonzScene}!codeSavePath@{codeSavePath}}
\index{codeSavePath@{codeSavePath}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{codeSavePath()}{codeSavePath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Toonz\+Scene\+::code\+Save\+Path (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}]{path }\end{DoxyParamCaption}) const}

Code save path. Es. +drawings/seq1/scena1/a.\+pli -\/\texorpdfstring{$>$}{>} +drawings/\$savepath/a.pli \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_toonz_scene_a988041b1acd57d079881147224cf1ebe}{decode\+Save\+Path()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{01412                                                        \{}
\DoxyCodeLine{01413   \textcolor{keywordflow}{if} (path == \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \textcolor{keywordflow}{return} path;}
\DoxyCodeLine{01414   \mbox{\hyperlink{class_t_file_path}{TFilePath}} savePath = \mbox{\hyperlink{class_toonz_scene_a27f04f65e52c9c9a4ebc55ea25f0ddbb}{getSavePath}}();}
\DoxyCodeLine{01415   \textcolor{keywordflow}{if} (savePath == \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \textcolor{keywordflow}{return} path;  \textcolor{comment}{// non dovrebbe succedere mai}}
\DoxyCodeLine{01416   \mbox{\hyperlink{class_t_file_path}{TFilePath}} filename;}
\DoxyCodeLine{01417   \mbox{\hyperlink{class_t_file_path}{TFilePath}} originalPath = path;}
\DoxyCodeLine{01418   \textcolor{keywordflow}{if} (savePath.\mbox{\hyperlink{class_t_file_path_ac17d65d827432f0fae28fed699bf4afa}{withoutParentDir}}() != path.\mbox{\hyperlink{class_t_file_path_ac17d65d827432f0fae28fed699bf4afa}{withoutParentDir}}()) \{}
\DoxyCodeLine{01419     \mbox{\hyperlink{class_t_file_path}{TFilePath}} parentDir = path.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}();}
\DoxyCodeLine{01420     \textcolor{keywordflow}{if} (parentDir != \mbox{\hyperlink{class_t_file_path}{TFilePath}}() \&\& !parentDir.isRoot()) \{}
\DoxyCodeLine{01421       filename = path.\mbox{\hyperlink{class_t_file_path_ac17d65d827432f0fae28fed699bf4afa}{withoutParentDir}}();}
\DoxyCodeLine{01422       path     = parentDir;}
\DoxyCodeLine{01423     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01424       \textcolor{keywordflow}{return} originalPath;}
\DoxyCodeLine{01425   \}}
\DoxyCodeLine{01426 }
\DoxyCodeLine{01427   \mbox{\hyperlink{class_t_file_path}{TFilePath}} head;}
\DoxyCodeLine{01428   \textcolor{keywordflow}{if} (!checkTail(path, savePath, head)) \textcolor{keywordflow}{return} originalPath;}
\DoxyCodeLine{01429   \textcolor{keywordflow}{if} (head.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() != \mbox{\hyperlink{class_t_file_path}{TFilePath}}() || head == \mbox{\hyperlink{class_t_file_path}{TFilePath}}() ||}
\DoxyCodeLine{01430       head.getWideString()[0] != L\textcolor{charliteral}{'+'})}
\DoxyCodeLine{01431     \textcolor{keywordflow}{return} originalPath;}
\DoxyCodeLine{01432   std::string folderName = ::to\_string(head.getWideString().substr(1));}
\DoxyCodeLine{01433   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_toonz_scene_afec1477d4fe0bb1e1152e80c3a0b20ab}{getProject}}()-\/>getUseScenePath(folderName)) \textcolor{keywordflow}{return} originalPath;}
\DoxyCodeLine{01434   \textcolor{keywordflow}{return} head + savePathString + filename;}
\DoxyCodeLine{01435 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00683}{TFile\+Path\+::get\+Parent\+Dir()}}, \mbox{\hyperlink{l00334}{get\+Project()}}, \mbox{\hyperlink{l01558}{get\+Save\+Path()}}, and \mbox{\hyperlink{l00264}{TFile\+Path\+::without\+Parent\+Dir()}}.

\mbox{\Hypertarget{class_toonz_scene_ad8d5a080e48a1ab0241c410ce3a0f485}\label{class_toonz_scene_ad8d5a080e48a1ab0241c410ce3a0f485}} 
\index{ToonzScene@{ToonzScene}!convertLevelIfNeeded@{convertLevelIfNeeded}}
\index{convertLevelIfNeeded@{convertLevelIfNeeded}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{convertLevelIfNeeded()}{convertLevelIfNeeded()}}
{\footnotesize\ttfamily bool Toonz\+Scene\+::convert\+Level\+If\+Needed (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{level\+Path }\end{DoxyParamCaption})}

If conversion is required, a new level file will be created and {\ttfamily level\+Path} will be substituted with its new path.

\begin{DoxyReturn}{Returns}
Whether the level doesn\textquotesingle{}t need to be converted or the conversion succeeded. ~\newline
 Checks if the given level\+Path is a file path 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{01058                                                           \{}
\DoxyCodeLine{01059   \mbox{\hyperlink{struct_level_type}{LevelType}} ltype = getLevelType(levelPath);}
\DoxyCodeLine{01060   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp    = levelPath;}
\DoxyCodeLine{01061   \textcolor{keywordflow}{if} (ltype.m\_vectorNotPli) \{}
\DoxyCodeLine{01062     \textcolor{comment}{// livello flash o svg}}
\DoxyCodeLine{01063     levelPath = levelPath.\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(\textcolor{stringliteral}{"{}pli"{}});}
\DoxyCodeLine{01064     \mbox{\hyperlink{class_t_level_writer_p}{TLevelWriterP}} lw(levelPath);}
\DoxyCodeLine{01065     \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}} lr(fp);}
\DoxyCodeLine{01066     \textcolor{keywordflow}{if} (!lr) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01067     \mbox{\hyperlink{class_t_level_p}{TLevelP}} inLevel = lr-\/>loadInfo();}
\DoxyCodeLine{01068     \textcolor{keywordflow}{if} (!inLevel || inLevel-\/>getFrameCount() == 0) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01069     \mbox{\hyperlink{class_t_level_p}{TLevelP}} outLevel;}
\DoxyCodeLine{01070     \textcolor{keywordflow}{for} (TLevel::Iterator it = inLevel-\/>begin(); it != inLevel-\/>end(); ++it) \{}
\DoxyCodeLine{01071       \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} img = lr-\/>getFrameReader(it-\/>first)-\/>load();}
\DoxyCodeLine{01072       \textcolor{keywordflow}{if} (!img) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01073       lw-\/>getFrameWriter(it-\/>first)-\/>save(img);}
\DoxyCodeLine{01074     \}}
\DoxyCodeLine{01075   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ltype.m\_oldLevelFlag) \{}
\DoxyCodeLine{01076     \mbox{\hyperlink{class_t_level_p}{TLevelP}} outLevel;}
\DoxyCodeLine{01077     \textcolor{comment}{// livello Toonz 4.6}}
\DoxyCodeLine{01078     levelPath = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(levelPath.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}().getWideString() + L\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)"{}} +}
\DoxyCodeLine{01079                           levelPath.getWideName() + L\textcolor{stringliteral}{"{}.tlv"{}});}
\DoxyCodeLine{01080     \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(levelPath))}
\DoxyCodeLine{01081       TSystem::removeFileOrLevel(levelPath);}
\DoxyCodeLine{01082     \mbox{\hyperlink{class_t_file_path}{TFilePath}} pltPath = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(levelPath.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}().getWideString() +}
\DoxyCodeLine{01083                                   L\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)"{}} + levelPath.getWideName() + L\textcolor{stringliteral}{"{}.tpl"{}});}
\DoxyCodeLine{01084     \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(pltPath))}
\DoxyCodeLine{01085       TSystem::removeFileOrLevel(pltPath);}
\DoxyCodeLine{01086 }
\DoxyCodeLine{01087     \mbox{\hyperlink{class_t_level_writer_p}{TLevelWriterP}} lw(levelPath);}
\DoxyCodeLine{01088     lw-\/>setIconSize(Preferences::instance()-\/>getIconSize());}
\DoxyCodeLine{01089     \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} palette =}
\DoxyCodeLine{01090         ToonzImageUtils::loadTzPalette(fp.\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(\textcolor{stringliteral}{"{}plt"{}}).withNoFrame());}
\DoxyCodeLine{01091     \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}} lr(fp);}
\DoxyCodeLine{01092     \textcolor{keywordflow}{if} (!lr) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01093     \mbox{\hyperlink{class_t_level_p}{TLevelP}} inLevel = lr-\/>loadInfo();}
\DoxyCodeLine{01094     \textcolor{keywordflow}{if} (!inLevel || inLevel-\/>getFrameCount() == 0) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01095     outLevel-\/>setPalette(palette.getPointer());}
\DoxyCodeLine{01096     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01097       \textcolor{keywordflow}{for} (TLevel::Iterator it = inLevel-\/>begin(); it != inLevel-\/>end(); ++it) \{}
\DoxyCodeLine{01098         \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} img = lr-\/>getFrameReader(it-\/>first)-\/>load();}
\DoxyCodeLine{01099         \textcolor{keywordflow}{if} (!img) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01100         img-\/>setPalette(palette.getPointer());}
\DoxyCodeLine{01101         lw-\/>getFrameWriter(it-\/>first)-\/>save(img);}
\DoxyCodeLine{01102       \}}
\DoxyCodeLine{01103     \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{01104       \textcolor{comment}{// devo buttare il tlv che stavo salvando!}}
\DoxyCodeLine{01105       QString msg = QString::fromStdWString(e.getMessage());}
\DoxyCodeLine{01106       \textcolor{keywordflow}{if} (msg == QString(\textcolor{stringliteral}{"{}Old 4.1 Palette"{}})) \{}
\DoxyCodeLine{01107         lw = \mbox{\hyperlink{class_t_level_writer_p}{TLevelWriterP}}();}
\DoxyCodeLine{01108         \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(levelPath))}
\DoxyCodeLine{01109           TSystem::removeFileOrLevel(levelPath);}
\DoxyCodeLine{01110         \textcolor{keywordflow}{throw} e;}
\DoxyCodeLine{01111       \}}
\DoxyCodeLine{01112     \}}
\DoxyCodeLine{01113     lw = \mbox{\hyperlink{class_t_level_writer_p}{TLevelWriterP}}();  \textcolor{comment}{// bisogna liberare prima lw di outLevel,}}
\DoxyCodeLine{01114     \textcolor{comment}{// altrimenti la paletta che lw vuole scrivere e' gia' stata}}
\DoxyCodeLine{01115     \textcolor{comment}{// loutLeveliberata.}}
\DoxyCodeLine{01116   \}}
\DoxyCodeLine{01117   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01118 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00683}{TFile\+Path\+::get\+Parent\+Dir()}}, and \mbox{\hyperlink{l00774}{TFile\+Path\+::with\+Type()}}.



Referenced by \mbox{\hyperlink{l01122}{load\+Level()}}.

\mbox{\Hypertarget{class_toonz_scene_ac8791183db4daa28bdffdd40e15c3b9e}\label{class_toonz_scene_ac8791183db4daa28bdffdd40e15c3b9e}} 
\index{ToonzScene@{ToonzScene}!createNewLevel@{createNewLevel}}
\index{createNewLevel@{createNewLevel}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{createNewLevel()}{createNewLevel()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}} $\ast$ Toonz\+Scene\+::create\+New\+Level (\begin{DoxyParamCaption}\item[{int}]{type,  }\item[{std\+::wstring}]{level\+Name = {\ttfamily L\char`\"{}\char`\"{}},  }\item[{const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&}]{dim = {\ttfamily \mbox{\hyperlink{class_t_dimension_t}{TDimension}}()},  }\item[{double}]{dpi = {\ttfamily 0},  }\item[{\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}]{fp = {\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}}()} }\end{DoxyParamCaption})}

Return a pointer to {\bfseries{\mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}}}}, a new level. ~\newline
Create a new level with {\bfseries{type}} defined in {\bfseries{\mbox{\hyperlink{}{txshleveltypes.\+h}}}} and {\bfseries{level\+Name}}. {\bfseries{wstring}} {\bfseries{level\+Name}} force an anambiguos name. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00866                                                     \{}
\DoxyCodeLine{00867   \mbox{\hyperlink{class_t_level_set}{TLevelSet}} *levelSet = \mbox{\hyperlink{class_toonz_scene_ac1a8bf0d2cec4f59c87b0001991264b5}{getLevelSet}}();}
\DoxyCodeLine{00868 }
\DoxyCodeLine{00869   \textcolor{keywordflow}{if} (type == TZI\_XSHLEVEL)  \textcolor{comment}{// TZI type corresponds to the 'Scan Level'}}
\DoxyCodeLine{00870     type = OVL\_XSHLEVEL;     \textcolor{comment}{// default option. See Toonz Preferences class.}}
\DoxyCodeLine{00871 }
\DoxyCodeLine{00872   \textcolor{keywordflow}{if} (type == CHILD\_XSHLEVEL \&\& levelName == L\textcolor{stringliteral}{"{}"{}}) levelName = L\textcolor{stringliteral}{"{}sub"{}};}
\DoxyCodeLine{00873 }
\DoxyCodeLine{00874   \textcolor{comment}{// Select a different unique level name in case it already exists (either in}}
\DoxyCodeLine{00875   \textcolor{comment}{// scene or on disk)}}
\DoxyCodeLine{00876   \{}
\DoxyCodeLine{00877     \textcolor{keyword}{const} std::unique\_ptr<NameBuilder> nameBuilder(}
\DoxyCodeLine{00878         NameBuilder::getBuilder(levelName));}
\DoxyCodeLine{00879 }
\DoxyCodeLine{00880     \textcolor{keywordflow}{for} (;;) \{}
\DoxyCodeLine{00881       levelName = nameBuilder-\/>getNext();}
\DoxyCodeLine{00882       \textcolor{comment}{/*-\/-\/ levelが既にロード済みなら、次の名前を取得 -\/-\/*/}}
\DoxyCodeLine{00883       \textcolor{keywordflow}{if} (m\_levelSet-\/>getLevel(levelName) != 0) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00884 }
\DoxyCodeLine{00885       \textcolor{comment}{/*-\/-\/ LevelSetの中に同じファイルパスのLevelがあるかをチェック -\/-\/*/}}
\DoxyCodeLine{00886       \textcolor{keywordflow}{if} (type != CHILD\_XSHLEVEL \&\& type != PLT\_XSHLEVEL) \{}
\DoxyCodeLine{00887         \textcolor{keywordflow}{if} (fp.isEmpty()) fp = \mbox{\hyperlink{class_toonz_scene_a3f7940ad6794546ba923304231820f00}{getDefaultLevelPath}}(type, levelName);}
\DoxyCodeLine{00888         \mbox{\hyperlink{class_t_file_path}{TFilePath}} actualFp = \mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(fp);}
\DoxyCodeLine{00889 }
\DoxyCodeLine{00890         \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(}
\DoxyCodeLine{00891                 actualFp))  \textcolor{comment}{// if(TFileStatus(actualFp).doesExist()) continue;}}
\DoxyCodeLine{00892         \{}
\DoxyCodeLine{00893           fp = \mbox{\hyperlink{class_t_file_path}{TFilePath}}();}
\DoxyCodeLine{00894           \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00895         \}}
\DoxyCodeLine{00896 }
\DoxyCodeLine{00897         \textcolor{keywordtype}{int} l, lCount = levelSet-\/>getLevelCount();}
\DoxyCodeLine{00898         \textcolor{keywordflow}{for} (l = 0; l != lCount; ++l) \{}
\DoxyCodeLine{00899           \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = levelSet-\/>getLevel(l);}
\DoxyCodeLine{00900           \textcolor{keywordflow}{if} (!xl) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00901 }
\DoxyCodeLine{00902           \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{00903           \textcolor{keywordflow}{if} (!sl) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00904 }
\DoxyCodeLine{00905           \mbox{\hyperlink{class_t_file_path}{TFilePath}} lfp = \mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}());}
\DoxyCodeLine{00906           \textcolor{keywordflow}{if} (actualFp == lfp) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00907         \}}
\DoxyCodeLine{00908 }
\DoxyCodeLine{00909         \textcolor{keywordflow}{if} (l < lCount) \{}
\DoxyCodeLine{00910           \textcolor{comment}{/*-\/-\/ fpが既存のLevelと重複したため、再設定する -\/-\/*/}}
\DoxyCodeLine{00911           fp = \mbox{\hyperlink{class_t_file_path}{TFilePath}}();}
\DoxyCodeLine{00912           \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00913         \}}
\DoxyCodeLine{00914       \}}
\DoxyCodeLine{00915       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00916     \}}
\DoxyCodeLine{00917   \}}
\DoxyCodeLine{00918 }
\DoxyCodeLine{00919   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = 0;}
\DoxyCodeLine{00920   \textcolor{keywordflow}{if} (type == CHILD\_XSHLEVEL) \{}
\DoxyCodeLine{00921     \mbox{\hyperlink{class_t_xsh_child_level}{TXshChildLevel}} *cl = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_xsh_child_level}{TXshChildLevel}}(levelName);}
\DoxyCodeLine{00922     cl-\/>\mbox{\hyperlink{class_t_xsh_child_level_a10691f4c9edb22c1b8af2c1c2bab4f21}{setScene}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00923     cl-\/>\mbox{\hyperlink{class_t_xsh_child_level_ad2676276ae1db83a898a3eef10e0ace8}{getXsheet}}()-\/>\mbox{\hyperlink{class_t_xsheet_acb634f75579e77275e6dd5fad3ead2b6}{setScene}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00924     xl = cl;}
\DoxyCodeLine{00925 }
\DoxyCodeLine{00926     \textcolor{comment}{// Include the project's default cameras}}
\DoxyCodeLine{00927     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_scene_properties}{TSceneProperties}} \&props =}
\DoxyCodeLine{00928         \mbox{\hyperlink{class_t_project_manager_a150ca0d6e2eb171b8117b0c5f03dbfad}{TProjectManager::instance}}()-\/>\mbox{\hyperlink{class_t_project_manager_a5267cfeae48d4e7585c3fc56d8d5b0b3}{getCurrentProject}}()-\/>getSceneProperties();}
\DoxyCodeLine{00929 }
\DoxyCodeLine{00930     props.\mbox{\hyperlink{class_t_scene_properties_ab7c40fadf71826d7774df4cadb28f991}{cloneCamerasTo}}(cl-\/>\mbox{\hyperlink{class_t_xsh_child_level_ad2676276ae1db83a898a3eef10e0ace8}{getXsheet}}()-\/>\mbox{\hyperlink{class_t_xsheet_a5dc925584e35e1678f5678b79c470959}{getStageObjectTree}}());}
\DoxyCodeLine{00931   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (type == PLT\_XSHLEVEL) \{}
\DoxyCodeLine{00932     \mbox{\hyperlink{class_t_xsh_palette_level}{TXshPaletteLevel}} *pl = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_xsh_palette_level}{TXshPaletteLevel}}(levelName);}
\DoxyCodeLine{00933     pl-\/>\mbox{\hyperlink{class_t_xsh_level_a3c0052e5b6496d5bd9c697f678761e5c}{setScene}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00934     xl = pl;}
\DoxyCodeLine{00935   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00936     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}}(levelName);}
\DoxyCodeLine{00937 }
\DoxyCodeLine{00938     sl-\/>\mbox{\hyperlink{class_t_xsh_level_a3c0052e5b6496d5bd9c697f678761e5c}{setScene}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00939     sl-\/>\mbox{\hyperlink{class_t_xsh_level_ad2cb5812d9f36e9f5d570874dad8d3bd}{setType}}(type);}
\DoxyCodeLine{00940     sl-\/>setPath(fp);}
\DoxyCodeLine{00941     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a2d43337766628739707849f8808bf300}{setDirtyFlag}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00942 }
\DoxyCodeLine{00943     sl-\/>initializePalette();}
\DoxyCodeLine{00944     sl-\/>initializeResolutionAndDpi();}
\DoxyCodeLine{00945 }
\DoxyCodeLine{00946     xl = sl;}
\DoxyCodeLine{00947   \}}
\DoxyCodeLine{00948 }
\DoxyCodeLine{00949   m\_levelSet-\/>insertLevel(xl);}
\DoxyCodeLine{00950   TNotifier::instance()-\/>notify(\mbox{\hyperlink{class_t_cast_change}{TCastChange}}());}
\DoxyCodeLine{00951 }
\DoxyCodeLine{00952   \textcolor{keywordflow}{return} xl;}
\DoxyCodeLine{00953 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00779}{TScene\+Properties\+::clone\+Cameras\+To()}}, \mbox{\hyperlink{l01231}{decode\+File\+Path()}}, \mbox{\hyperlink{l00993}{TProject\+Manager\+::get\+Current\+Project()}}, \mbox{\hyperlink{l01371}{get\+Default\+Level\+Path()}}, \mbox{\hyperlink{l00093}{get\+Level\+Set()}}, \mbox{\hyperlink{l00120}{TXsh\+Simple\+Level\+::get\+Path()}}, \mbox{\hyperlink{l00095}{TXsh\+Level\+::get\+Simple\+Level()}}, \mbox{\hyperlink{l00549}{TXsheet\+::get\+Stage\+Object\+Tree()}}, \mbox{\hyperlink{l00065}{TXsh\+Child\+Level\+::get\+Xsheet()}}, \mbox{\hyperlink{l00777}{TProject\+Manager\+::instance()}}, \mbox{\hyperlink{l00320}{TXsh\+Simple\+Level\+::set\+Dirty\+Flag()}}, \mbox{\hyperlink{l01579}{TXsheet\+::set\+Scene()}}, \mbox{\hyperlink{l00024}{TXsh\+Level\+::set\+Scene()}}, \mbox{\hyperlink{l00074}{TXsh\+Child\+Level\+::set\+Scene()}}, and \mbox{\hyperlink{l00084}{TXsh\+Level\+::set\+Type()}}.



Referenced by \mbox{\hyperlink{l00128}{Child\+Stack\+::create\+Child()}}, \mbox{\hyperlink{l00242}{Vectorizer\+::set\+Level()}}, and \mbox{\hyperlink{l00294}{TTool\+::touch\+Image()}}.

\mbox{\Hypertarget{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}\label{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}} 
\index{ToonzScene@{ToonzScene}!decodeFilePath@{decodeFilePath}}
\index{decodeFilePath@{decodeFilePath}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{decodeFilePath()}{decodeFilePath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Toonz\+Scene\+::decode\+File\+Path (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path }\end{DoxyParamCaption}) const}

Decode file path {\bfseries{\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}}. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_toonz_scene_abb12422205be4336c3dee1aa5fbdc5e5}{code\+File\+Path()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{01231                                                                 \{}
\DoxyCodeLine{01232   \mbox{\hyperlink{class_t_project}{TProject}} *project   = \mbox{\hyperlink{class_toonz_scene_afec1477d4fe0bb1e1152e80c3a0b20ab}{getProject}}();}
\DoxyCodeLine{01233   \textcolor{keywordtype}{bool} projectIsEmpty = project-\/>\mbox{\hyperlink{class_t_project_a26ebcdd853071adf3bfb4e80aabed84f}{getFolderCount}}() ? false : \textcolor{keyword}{true};}
\DoxyCodeLine{01234   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp        = path;}
\DoxyCodeLine{01235 }
\DoxyCodeLine{01236   std::wstring head;}
\DoxyCodeLine{01237   \mbox{\hyperlink{class_t_file_path}{TFilePath}} tail;}
\DoxyCodeLine{01238   path.split(head, tail);}
\DoxyCodeLine{01239 }
\DoxyCodeLine{01240   std::string h;}
\DoxyCodeLine{01241   std::wstring s;}
\DoxyCodeLine{01242   \textcolor{keywordflow}{if} (head != L\textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{01243     \textcolor{comment}{// in case of the project folder aliases}}
\DoxyCodeLine{01244     \textcolor{keywordflow}{if} (head[0] == L\textcolor{charliteral}{'+'}) \{}
\DoxyCodeLine{01245       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_project_manager_a150ca0d6e2eb171b8117b0c5f03dbfad}{TProjectManager::instance}}()-\/>isTabModeEnabled()) \{}
\DoxyCodeLine{01246         \textcolor{keywordflow}{return} m\_scenePath.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() +}
\DoxyCodeLine{01247                (m\_scenePath.getWideName() + L\textcolor{stringliteral}{"{}\_files"{}}) + tail;}
\DoxyCodeLine{01248       \}}
\DoxyCodeLine{01249 }
\DoxyCodeLine{01250       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_project_manager_a150ca0d6e2eb171b8117b0c5f03dbfad}{TProjectManager::instance}}()-\/>isTabKidsModeEnabled()) \{}
\DoxyCodeLine{01251         \textcolor{keywordflow}{return} m\_scenePath.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() + m\_scenePath.getWideName() + tail;}
\DoxyCodeLine{01252       \}}
\DoxyCodeLine{01253 }
\DoxyCodeLine{01254       \textcolor{keywordflow}{if} (projectIsEmpty) \{}
\DoxyCodeLine{01255         \mbox{\hyperlink{class_t_file_path}{TFilePath}} dir = m\_scenePath.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}();}
\DoxyCodeLine{01256         \textcolor{keywordflow}{if} (dir.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}() == \textcolor{stringliteral}{"{}scenes"{}})}
\DoxyCodeLine{01257           \textcolor{keywordflow}{return} dir.\mbox{\hyperlink{class_t_file_path_a3ebf9ced558cfef97a60bba536b23c6f}{withName}}(head.substr(1)) + tail;}
\DoxyCodeLine{01258         \textcolor{keywordflow}{else}}
\DoxyCodeLine{01259           \textcolor{keywordflow}{return} dir + tail;}
\DoxyCodeLine{01260       \}}
\DoxyCodeLine{01261       \textcolor{keywordflow}{if} (project) \{}
\DoxyCodeLine{01262         h           = ::to\_string(head.substr(1));}
\DoxyCodeLine{01263         \mbox{\hyperlink{class_t_file_path}{TFilePath}} f = project-\/>\mbox{\hyperlink{class_t_project_ac0967db66b75e4cf0afe5b1df73a03c7}{getFolder}}(h);}
\DoxyCodeLine{01264         \textcolor{keywordflow}{if} (f != \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) s = f.getWideString();}
\DoxyCodeLine{01265       \}}
\DoxyCodeLine{01266     \}}
\DoxyCodeLine{01267     \textcolor{comment}{// in case of the scene folder alias}}
\DoxyCodeLine{01268     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (head == L\textcolor{stringliteral}{"{}\$scenefolder"{}}) \{}
\DoxyCodeLine{01269       \mbox{\hyperlink{class_t_file_path}{TFilePath}} dir = m\_scenePath.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}();}
\DoxyCodeLine{01270       \textcolor{keywordflow}{return} dir + tail;}
\DoxyCodeLine{01271     \}}
\DoxyCodeLine{01272   \}}
\DoxyCodeLine{01273   \textcolor{keywordflow}{if} (s != L\textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{01274     std::map<std::wstring, std::wstring> table;}
\DoxyCodeLine{01275 }
\DoxyCodeLine{01276     \textcolor{comment}{// if the scene is untitled and path expansion depends on the scene}}
\DoxyCodeLine{01277     \textcolor{comment}{// (because the expansion contains \$ scenename, \$ scenepath, or it uses the}}
\DoxyCodeLine{01278     \textcolor{comment}{// savepath)}}
\DoxyCodeLine{01279     \textcolor{keywordflow}{if} (m\_isUntitled \&\&}
\DoxyCodeLine{01280         (s.find(L\textcolor{stringliteral}{"{}\$scene"{}}) != std::wstring::npos ||}
\DoxyCodeLine{01281          project-\/>getUseScenePath(h) ||}
\DoxyCodeLine{01282          fp.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}().\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}() == \mbox{\hyperlink{class_toonz_scene_ad42b52b671b094f66e003c4b7ebefd45}{getScenePath}}().getName())) \{}
\DoxyCodeLine{01283       \mbox{\hyperlink{class_t_file_path}{TFilePath}} parentDir = \mbox{\hyperlink{class_toonz_scene_ad42b52b671b094f66e003c4b7ebefd45}{getScenePath}}().\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}();}
\DoxyCodeLine{01284       fp                  = parentDir + head.substr(1) + tail;}
\DoxyCodeLine{01285     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01286       \mbox{\hyperlink{class_t_file_path}{TFilePath}} scenePath = \mbox{\hyperlink{class_toonz_scene_ad42b52b671b094f66e003c4b7ebefd45}{getScenePath}}();}
\DoxyCodeLine{01287       \mbox{\hyperlink{class_t_file_path}{TFilePath}} scenePathRoot;}
\DoxyCodeLine{01288       \textcolor{keywordflow}{if} (project)}
\DoxyCodeLine{01289         scenePathRoot = project-\/>\mbox{\hyperlink{class_t_project_ac0967db66b75e4cf0afe5b1df73a03c7}{getFolder}}(\mbox{\hyperlink{class_t_project_afa1aca692a03ae826a4d22565c7361cb}{TProject::Scenes}});}
\DoxyCodeLine{01290       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01291         scenePathRoot = scenePath.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}();}
\DoxyCodeLine{01292 }
\DoxyCodeLine{01293       \textcolor{keywordflow}{if} (scenePathRoot != \mbox{\hyperlink{class_t_file_path}{TFilePath}}() \&\& !scenePathRoot.isAbsolute() \&\&}
\DoxyCodeLine{01294           project)}
\DoxyCodeLine{01295         scenePathRoot = project-\/>\mbox{\hyperlink{class_t_project_a593eef0243c736a73e92e459fb0ed71d}{getProjectFolder}}() + scenePathRoot;}
\DoxyCodeLine{01296 }
\DoxyCodeLine{01297       \textcolor{keywordflow}{if} (TSystem::isUNC(scenePath) \&\& !TSystem::isUNC(scenePathRoot))}
\DoxyCodeLine{01298         scenePathRoot = TSystem::toUNC(scenePathRoot);}
\DoxyCodeLine{01299 }
\DoxyCodeLine{01300       \textcolor{keywordflow}{if} (scenePathRoot.isAncestorOf(scenePath))}
\DoxyCodeLine{01301         scenePath = scenePath -\/ scenePathRoot;}
\DoxyCodeLine{01302 }
\DoxyCodeLine{01303       table[L\textcolor{stringliteral}{"{}\$scenepath"{}}] = scenePath.\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(\textcolor{stringliteral}{"{}"{}}).getWideString();}
\DoxyCodeLine{01304       table[L\textcolor{stringliteral}{"{}\$scenename"{}}] = scenePath.\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(\textcolor{stringliteral}{"{}"{}}).getWideString();}
\DoxyCodeLine{01305 }
\DoxyCodeLine{01306       std::map<std::wstring, std::wstring>::reverse\_iterator it;}
\DoxyCodeLine{01307       \textcolor{keywordflow}{for} (it = table.rbegin(); it != table.rend(); ++it) \{}
\DoxyCodeLine{01308         std::wstring keyword = it-\/>first;}
\DoxyCodeLine{01309         \textcolor{keywordtype}{int} i                = 0;}
\DoxyCodeLine{01310         \textcolor{keywordflow}{for} (;;) \{}
\DoxyCodeLine{01311           \textcolor{keywordtype}{int} j = s.find(keyword, i);}
\DoxyCodeLine{01312           \textcolor{keywordflow}{if} (j == (\textcolor{keywordtype}{int})std::wstring::npos) \textcolor{keywordflow}{break};}
\DoxyCodeLine{01313           s.replace(j, keyword.length(), it-\/>second);}
\DoxyCodeLine{01314           i = j;}
\DoxyCodeLine{01315         \}}
\DoxyCodeLine{01316       \}}
\DoxyCodeLine{01317       fp = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(s) + tail;}
\DoxyCodeLine{01318     \}}
\DoxyCodeLine{01319   \}}
\DoxyCodeLine{01320 }
\DoxyCodeLine{01321   \textcolor{keywordflow}{if} (fp != \mbox{\hyperlink{class_t_file_path}{TFilePath}}() \&\& !fp.isAbsolute() \&\& project)}
\DoxyCodeLine{01322     fp = project-\/>\mbox{\hyperlink{class_t_project_a593eef0243c736a73e92e459fb0ed71d}{getProjectFolder}}() + fp;}
\DoxyCodeLine{01323   \textcolor{keywordflow}{return} fp;}
\DoxyCodeLine{01324 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00366}{TProject\+::get\+Folder()}}, \mbox{\hyperlink{l00384}{TProject\+::get\+Folder\+Count()}}, \mbox{\hyperlink{l00636}{TFile\+Path\+::get\+Name()}}, \mbox{\hyperlink{l00683}{TFile\+Path\+::get\+Parent\+Dir()}}, \mbox{\hyperlink{l00334}{get\+Project()}}, \mbox{\hyperlink{l00051}{TProject\+::get\+Project\+Folder()}}, \mbox{\hyperlink{l00059}{get\+Scene\+Path()}}, \mbox{\hyperlink{l00777}{TProject\+Manager\+::instance()}}, \mbox{\hyperlink{l00037}{TProject\+::\+Scenes}}, \mbox{\hyperlink{l00802}{TFile\+Path\+::with\+Name()}}, and \mbox{\hyperlink{l00774}{TFile\+Path\+::with\+Type()}}.



Referenced by \mbox{\hyperlink{l01328}{code\+File\+Path()}}, \mbox{\hyperlink{l00864}{create\+New\+Level()}}, \mbox{\hyperlink{l00712}{Cleanup\+Settings\+Model\+::get\+Cln\+Path()}}, \mbox{\hyperlink{l01558}{get\+Save\+Path()}}, \mbox{\hyperlink{l01457}{is\+Extern\+Path()}}, \mbox{\hyperlink{l00074}{TXsh\+Palette\+Level\+::load()}}, \mbox{\hyperlink{l01083}{TXsh\+Simple\+Level\+::load()}}, \mbox{\hyperlink{l02357}{Io\+Cmd\+::load\+Resources()}}, \mbox{\hyperlink{l00269}{Level\+Updater\+::open()}}, \mbox{\hyperlink{l00379}{Scene\+Palette\+::save()}}, \mbox{\hyperlink{l00209}{Scene\+Level\+::save()}}, \mbox{\hyperlink{l00432}{Scene\+Sound\+::save()}}, \mbox{\hyperlink{l00101}{TXsh\+Palette\+Level\+::save()}}, \mbox{\hyperlink{l01404}{TXsh\+Simple\+Level\+::save()}}, \mbox{\hyperlink{l00590}{save()}}, \mbox{\hyperlink{l00190}{Scene\+Level\+::\+Scene\+Level()}}, \mbox{\hyperlink{l00211}{TXsh\+Simple\+Level\+::set\+Editable\+Range()}}, and \mbox{\hyperlink{l00242}{Vectorizer\+::set\+Level()}}.

\mbox{\Hypertarget{class_toonz_scene_a988041b1acd57d079881147224cf1ebe}\label{class_toonz_scene_a988041b1acd57d079881147224cf1ebe}} 
\index{ToonzScene@{ToonzScene}!decodeSavePath@{decodeSavePath}}
\index{decodeSavePath@{decodeSavePath}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{decodeSavePath()}{decodeSavePath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Toonz\+Scene\+::decode\+Save\+Path (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}]{path }\end{DoxyParamCaption}) const}

Decode save path. es. +drawings/\$savepath/a.pli -\/\texorpdfstring{$>$}{>} +drawings/seq1/scena1/a.\+pli \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_toonz_scene_aef65f946258e28f8cc6dd7b83fb304a8}{code\+Save\+Path()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{01439                                                          \{}
\DoxyCodeLine{01440   std::wstring s = path.getWideString();}
\DoxyCodeLine{01441   \textcolor{keywordtype}{int} i          = s.find(savePathString);}
\DoxyCodeLine{01442   \textcolor{keywordflow}{if} (i != (\textcolor{keywordtype}{int})std::wstring::npos) \{}
\DoxyCodeLine{01443     \mbox{\hyperlink{class_t_file_path}{TFilePath}} savePath = \mbox{\hyperlink{class_toonz_scene_a27f04f65e52c9c9a4ebc55ea25f0ddbb}{getSavePath}}();}
\DoxyCodeLine{01444     s.replace(i, savePathString.length(), savePath.getWideString());}
\DoxyCodeLine{01445     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_file_path}{TFilePath}}(s);}
\DoxyCodeLine{01446   \}}
\DoxyCodeLine{01447   \textcolor{comment}{// in case of the scene folder alias (start with "{}\$scenefolder"{})}}
\DoxyCodeLine{01448   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (s.find(L\textcolor{stringliteral}{"{}\$scenefolder"{}}) == 0) \{}
\DoxyCodeLine{01449     s.replace(0, 12, m\_scenePath.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}().getWideString());}
\DoxyCodeLine{01450     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_file_path}{TFilePath}}(s);}
\DoxyCodeLine{01451   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01452     \textcolor{keywordflow}{return} path;}
\DoxyCodeLine{01453 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00683}{TFile\+Path\+::get\+Parent\+Dir()}}, and \mbox{\hyperlink{l01558}{get\+Save\+Path()}}.

\mbox{\Hypertarget{class_toonz_scene_ae2cbc582144c92adc5076cd5f556c95a}\label{class_toonz_scene_ae2cbc582144c92adc5076cd5f556c95a}} 
\index{ToonzScene@{ToonzScene}!getChildStack@{getChildStack}}
\index{getChildStack@{getChildStack}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getChildStack()}{getChildStack()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_child_stack}{Child\+Stack}} $\ast$ Toonz\+Scene\+::get\+Child\+Stack (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Returns a pointer to the xsheets hierarchy. 



Referenced by \mbox{\hyperlink{l01669}{Xsheet\+Viewer\+::change\+Window\+Title()}}, and \mbox{\hyperlink{l01492}{get\+Sound\+Columns()}}.

\mbox{\Hypertarget{class_toonz_scene_ae3c27b7146c62da156c5d5bffca0e9d7}\label{class_toonz_scene_ae3c27b7146c62da156c5d5bffca0e9d7}} 
\index{ToonzScene@{ToonzScene}!getContentHistory@{getContentHistory}}
\index{getContentHistory@{getContentHistory}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getContentHistory()}{getContentHistory()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_content_history}{TContent\+History}} $\ast$ Toonz\+Scene\+::get\+Content\+History (\begin{DoxyParamCaption}\item[{bool}]{create\+If\+Needed = {\ttfamily false} }\end{DoxyParamCaption})}



gets the content\+History. possibly creates a new one (if create\+If\+Needed) 


\begin{DoxyCode}{0}
\DoxyCodeLine{01484                                                                   \{}
\DoxyCodeLine{01485   \textcolor{keywordflow}{if} (!m\_contentHistory \&\& createIfNeeded)}
\DoxyCodeLine{01486     m\_contentHistory = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_content_history}{TContentHistory}}(\textcolor{keyword}{false});}
\DoxyCodeLine{01487   \textcolor{keywordflow}{return} m\_contentHistory;}
\DoxyCodeLine{01488 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00443}{load\+Tnz\+File()}}, and \mbox{\hyperlink{l00590}{save()}}.

\mbox{\Hypertarget{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}\label{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}} 
\index{ToonzScene@{ToonzScene}!getCurrentCamera@{getCurrentCamera}}
\index{getCurrentCamera@{getCurrentCamera}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getCurrentCamera()}{getCurrentCamera()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_camera}{TCamera}} $\ast$ Toonz\+Scene\+::get\+Current\+Camera (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Return a pointer to current camera {\bfseries{\mbox{\hyperlink{class_t_camera}{TCamera}}}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{01472                                       \{}
\DoxyCodeLine{01473   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}()-\/>\mbox{\hyperlink{class_t_xsheet_a5dc925584e35e1678f5678b79c470959}{getStageObjectTree}}()-\/>\mbox{\hyperlink{class_t_stage_object_tree_ada891076099087125f94f933cd49d592}{getCurrentCamera}}();}
\DoxyCodeLine{01474 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00277}{TStage\+Object\+Tree\+::get\+Current\+Camera()}}, \mbox{\hyperlink{l00549}{TXsheet\+::get\+Stage\+Object\+Tree()}}, and \mbox{\hyperlink{l00957}{get\+Xsheet()}}.



Referenced by \mbox{\hyperlink{l00338}{Preview\+Sub\+Camera\+Manager\+::delete\+Sub\+Camera()}}, \mbox{\hyperlink{l01416}{Edit\+Tool\+::draw()}}, \mbox{\hyperlink{l02386}{Scene\+Viewer\+::get\+Dpi\+Factor()}}, \mbox{\hyperlink{l02451}{Scene\+Viewer\+::get\+Zoom\+Scale\+Fitting\+With\+Screen()}}, \mbox{\hyperlink{l01122}{load\+Level()}}, \mbox{\hyperlink{l00721}{Render\+Command\+::multimedia\+Render()}}, \mbox{\hyperlink{l01185}{Raster\+Selection\+::paste\+Selection()}}, and \mbox{\hyperlink{l01372}{Fx\+Settings\+::set\+Fx()}}.

\mbox{\Hypertarget{class_toonz_scene_a78f568fb7c0bd57f0212e5f69bd06f16}\label{class_toonz_scene_a78f568fb7c0bd57f0212e5f69bd06f16}} 
\index{ToonzScene@{ToonzScene}!getCurrentPreviewCamera@{getCurrentPreviewCamera}}
\index{getCurrentPreviewCamera@{getCurrentPreviewCamera}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getCurrentPreviewCamera()}{getCurrentPreviewCamera()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_camera}{TCamera}} $\ast$ Toonz\+Scene\+::get\+Current\+Preview\+Camera (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01478                                              \{}
\DoxyCodeLine{01479   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}()-\/>\mbox{\hyperlink{class_t_xsheet_a5dc925584e35e1678f5678b79c470959}{getStageObjectTree}}()-\/>getCurrentPreviewCamera();}
\DoxyCodeLine{01480 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_scene_a3f7940ad6794546ba923304231820f00}\label{class_toonz_scene_a3f7940ad6794546ba923304231820f00}} 
\index{ToonzScene@{ToonzScene}!getDefaultLevelPath@{getDefaultLevelPath}}
\index{getDefaultLevelPath@{getDefaultLevelPath}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getDefaultLevelPath()}{getDefaultLevelPath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Toonz\+Scene\+::get\+Default\+Level\+Path (\begin{DoxyParamCaption}\item[{int}]{level\+Type,  }\item[{std\+::wstring}]{level\+Name = {\ttfamily L\char`\"{}a\char`\"{}} }\end{DoxyParamCaption}) const}

Return the default {\bfseries{\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}} of a {\bfseries{level\+Type}} level 
\begin{DoxyCode}{0}
\DoxyCodeLine{01372                                                                       \{}
\DoxyCodeLine{01373   \mbox{\hyperlink{class_t_project}{TProject}} *project = \mbox{\hyperlink{class_toonz_scene_afec1477d4fe0bb1e1152e80c3a0b20ab}{getProject}}();}
\DoxyCodeLine{01374   assert(project);}
\DoxyCodeLine{01375   \mbox{\hyperlink{class_t_file_path}{TFilePath}} levelPath;}
\DoxyCodeLine{01376   QString scanLevelType;}
\DoxyCodeLine{01377   \textcolor{keywordflow}{switch} (levelType) \{}
\DoxyCodeLine{01378   \textcolor{keywordflow}{case} TZI\_XSHLEVEL:}
\DoxyCodeLine{01379     scanLevelType = Preferences::instance()-\/>getScanLevelType();}
\DoxyCodeLine{01380     levelPath     = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(levelName + L\textcolor{stringliteral}{"{}.."{}} + scanLevelType.toStdWString());}
\DoxyCodeLine{01381     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01382   \textcolor{keywordflow}{case} PLI\_XSHLEVEL:}
\DoxyCodeLine{01383     levelPath = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(levelName).\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(\textcolor{stringliteral}{"{}pli"{}});}
\DoxyCodeLine{01384     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01385   \textcolor{keywordflow}{case} TZP\_XSHLEVEL:}
\DoxyCodeLine{01386     levelPath = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(levelName).\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(\textcolor{stringliteral}{"{}tlv"{}});}
\DoxyCodeLine{01387     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01388   \textcolor{keywordflow}{case} OVL\_XSHLEVEL:}
\DoxyCodeLine{01389     levelPath = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(levelName + L\textcolor{stringliteral}{"{}..tif"{}});}
\DoxyCodeLine{01390     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01391   \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01392     levelPath = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(levelName + L\textcolor{stringliteral}{"{}..png"{}});}
\DoxyCodeLine{01393   \}}
\DoxyCodeLine{01394 }
\DoxyCodeLine{01395   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_toonz_scene_a53cbaf09f551658479eb743e153ab6bc}{isUntitled}}() \&\& Preferences::instance()-\/>getPathAliasPriority() ==}
\DoxyCodeLine{01396                            Preferences::SceneFolderAlias)}
\DoxyCodeLine{01397     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}\$scenefolder"{}}) + levelPath;}
\DoxyCodeLine{01398 }
\DoxyCodeLine{01399   std::string folderName = getFolderName(levelType);}
\DoxyCodeLine{01400   \textcolor{keywordflow}{if} (project-\/>getUseScenePath(folderName))}
\DoxyCodeLine{01401     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}+"{}} + folderName) + \mbox{\hyperlink{class_toonz_scene_a27f04f65e52c9c9a4ebc55ea25f0ddbb}{getSavePath}}() + levelPath;}
\DoxyCodeLine{01402   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01403     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}+"{}} + folderName) + levelPath;}
\DoxyCodeLine{01404 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00334}{get\+Project()}}, \mbox{\hyperlink{l01558}{get\+Save\+Path()}}, \mbox{\hyperlink{l00345}{is\+Untitled()}}, and \mbox{\hyperlink{l00774}{TFile\+Path\+::with\+Type()}}.



Referenced by \mbox{\hyperlink{l00864}{create\+New\+Level()}}, and \mbox{\hyperlink{l01029}{get\+Imported\+Level\+Path()}}.

\mbox{\Hypertarget{class_toonz_scene_ab5cd3ad6f894b1acc5656ca747a80627}\label{class_toonz_scene_ab5cd3ad6f894b1acc5656ca747a80627}} 
\index{ToonzScene@{ToonzScene}!getFrameCount@{getFrameCount}}
\index{getFrameCount@{getFrameCount}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getFrameCount()}{getFrameCount()}}
{\footnotesize\ttfamily int Toonz\+Scene\+::get\+Frame\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Return scene frame count. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00704                                     \{}
\DoxyCodeLine{00705   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = \mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}();}
\DoxyCodeLine{00706   \textcolor{keywordflow}{return} xsh ? xsh-\/>\mbox{\hyperlink{class_t_xsheet_a12a62da7dc04395088112e492d73374f}{getFrameCount}}() : 0;}
\DoxyCodeLine{00707 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00229}{TXsheet\+::get\+Frame\+Count()}}, and \mbox{\hyperlink{l00957}{get\+Xsheet()}}.



Referenced by \mbox{\hyperlink{l01669}{Xsheet\+Viewer\+::change\+Window\+Title()}}, \mbox{\hyperlink{l00113}{On\+Render\+Completed\+::on\+Deliver()}}, and \mbox{\hyperlink{l00802}{Output\+Settings\+Popup\+::update\+Field()}}.

\mbox{\Hypertarget{class_toonz_scene_ab706bb783e2ff91a76423e12fce6e7fe}\label{class_toonz_scene_ab706bb783e2ff91a76423e12fce6e7fe}} 
\index{ToonzScene@{ToonzScene}!getIconPath@{getIconPath}}
\index{getIconPath@{getIconPath}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getIconPath()}{getIconPath()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Toonz\+Scene\+::get\+Icon\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00241 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_toonz_scene_a2d97e9b3647bb45c0c992a6c92c659eb}{getIconPath}}(\mbox{\hyperlink{class_toonz_scene_ad42b52b671b094f66e003c4b7ebefd45}{getScenePath}}()); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_scene_a2d97e9b3647bb45c0c992a6c92c659eb}\label{class_toonz_scene_a2d97e9b3647bb45c0c992a6c92c659eb}} 
\index{ToonzScene@{ToonzScene}!getIconPath@{getIconPath}}
\index{getIconPath@{getIconPath}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getIconPath()}{getIconPath()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Toonz\+Scene\+::get\+Icon\+Path (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{scene\+Path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Returns the path of the icon related to the scene 
\begin{DoxyCode}{0}
\DoxyCodeLine{01547                                                             \{}
\DoxyCodeLine{01548   \textcolor{keywordflow}{return} scenePath.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() + \textcolor{stringliteral}{"{}sceneIcons"{}} +}
\DoxyCodeLine{01549          (scenePath.getWideName() + L\textcolor{stringliteral}{"{} .png"{}});}
\DoxyCodeLine{01550 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01547}{get\+Icon\+Path()}}, and \mbox{\hyperlink{l00683}{TFile\+Path\+::get\+Parent\+Dir()}}.



Referenced by \mbox{\hyperlink{l01547}{get\+Icon\+Path()}}.

\mbox{\Hypertarget{class_toonz_scene_a26d8d4a1f92e962e8c1d40f3a1d37a45}\label{class_toonz_scene_a26d8d4a1f92e962e8c1d40f3a1d37a45}} 
\index{ToonzScene@{ToonzScene}!getImportedLevelPath@{getImportedLevelPath}}
\index{getImportedLevelPath@{getImportedLevelPath}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getImportedLevelPath()}{getImportedLevelPath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Toonz\+Scene\+::get\+Imported\+Level\+Path (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}]{path }\end{DoxyParamCaption}) const}



Loads a scene from file. 

\begin{DoxyReturn}{Returns}
The {\itshape coded} path to be used for import. Builds the path to be used during a level import operation. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{01029                                                                      \{}
\DoxyCodeLine{01030   \textcolor{keywordflow}{if} (TFileType::getInfo(path) == TFileType::AUDIO\_LEVEL)}
\DoxyCodeLine{01031     \textcolor{keywordflow}{return} path.\mbox{\hyperlink{class_t_file_path_a09d12d68c4264183e0268dde6f592b2e}{withParentDir}}(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}+extras"{}}));}
\DoxyCodeLine{01032   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (TFileType::getInfo(path) == TFileType::PALETTE\_LEVEL)}
\DoxyCodeLine{01033     \textcolor{keywordflow}{return} path.\mbox{\hyperlink{class_t_file_path_a09d12d68c4264183e0268dde6f592b2e}{withParentDir}}(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}+palettes"{}}));}
\DoxyCodeLine{01034 }
\DoxyCodeLine{01035   \textcolor{keyword}{const} \mbox{\hyperlink{struct_level_type}{LevelType}} \&ltype = getLevelType(path);}
\DoxyCodeLine{01036   \textcolor{keywordflow}{if} (ltype.m\_ltype == UNKNOWN\_XSHLEVEL) \textcolor{keywordflow}{return} path;}
\DoxyCodeLine{01037 }
\DoxyCodeLine{01038   \textcolor{keyword}{const} std::wstring \&levelName = path.getWideName();}
\DoxyCodeLine{01039   \textcolor{keyword}{const} std::string \&dots       = path.\mbox{\hyperlink{class_t_file_path_a698bbf714436eb6923359044900cde2b}{getDots}}();}
\DoxyCodeLine{01040 }
\DoxyCodeLine{01041   \mbox{\hyperlink{class_t_file_path}{TFilePath}} importedLevelPath =}
\DoxyCodeLine{01042       \mbox{\hyperlink{class_toonz_scene_a3f7940ad6794546ba923304231820f00}{getDefaultLevelPath}}(ltype.m\_ltype, levelName).\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() +}
\DoxyCodeLine{01043       path.getLevelNameW();}
\DoxyCodeLine{01044 }
\DoxyCodeLine{01045   \textcolor{keywordflow}{if} (dots == \textcolor{stringliteral}{"{}.."{}})}
\DoxyCodeLine{01046     importedLevelPath = importedLevelPath.\mbox{\hyperlink{class_t_file_path_a12f35b225e1882372ad7e02ad7fce543}{withFrame}}(TFrameId::EMPTY\_FRAME);}
\DoxyCodeLine{01047 }
\DoxyCodeLine{01048   \textcolor{keywordflow}{if} (importedLevelPath.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tlv"{}})  \textcolor{comment}{// Type shouldn't have changed...}}
\DoxyCodeLine{01049     importedLevelPath =}
\DoxyCodeLine{01050         importedLevelPath.withNoFrame();  \textcolor{comment}{// Plus, should be unnecessary...}}
\DoxyCodeLine{01051 }
\DoxyCodeLine{01052   \textcolor{keywordflow}{return} importedLevelPath;}
\DoxyCodeLine{01053 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01371}{get\+Default\+Level\+Path()}}, \mbox{\hyperlink{l00539}{TFile\+Path\+::get\+Dots()}}, \mbox{\hyperlink{l00683}{TFile\+Path\+::get\+Parent\+Dir()}}, \mbox{\hyperlink{l00225}{TFile\+Path\+::get\+Type()}}, \mbox{\hyperlink{l00860}{TFile\+Path\+::with\+Frame()}}, and \mbox{\hyperlink{l00853}{TFile\+Path\+::with\+Parent\+Dir()}}.

\mbox{\Hypertarget{class_toonz_scene_a51bbbe2c6a6f8433c1009215f712ede9}\label{class_toonz_scene_a51bbbe2c6a6f8433c1009215f712ede9}} 
\index{ToonzScene@{ToonzScene}!getLevelNameWithoutSceneNumber@{getLevelNameWithoutSceneNumber}}
\index{getLevelNameWithoutSceneNumber@{getLevelNameWithoutSceneNumber}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getLevelNameWithoutSceneNumber()}{getLevelNameWithoutSceneNumber()}}
{\footnotesize\ttfamily std\+::wstring Toonz\+Scene\+::get\+Level\+Name\+Without\+Scene\+Number (\begin{DoxyParamCaption}\item[{std\+::wstring}]{org\+Name }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01583                                                                         \{}
\DoxyCodeLine{01584   \textcolor{keywordflow}{if} (!Preferences::instance()-\/>isRemoveSceneNumberFromLoadedLevelNameEnabled())}
\DoxyCodeLine{01585     \textcolor{keywordflow}{return} orgName;}
\DoxyCodeLine{01586 }
\DoxyCodeLine{01587   QString orgNameQstr = QString::fromStdWString(orgName);}
\DoxyCodeLine{01588 }
\DoxyCodeLine{01589   \textcolor{comment}{// do nothing if the file name has less than 7 letters}}
\DoxyCodeLine{01590   \textcolor{keywordflow}{if} (orgNameQstr.size() <= 6) \textcolor{keywordflow}{return} orgName;}
\DoxyCodeLine{01591 }
\DoxyCodeLine{01592   QString sceneName = QString::fromStdWString(\mbox{\hyperlink{class_toonz_scene_a1fa0a1cbf9eb6360d980392acc99924b}{getSceneName}}()).left(5);}
\DoxyCodeLine{01593 }
\DoxyCodeLine{01594   \textcolor{comment}{// check if the first 5 letters of the level name is the same as the scene}}
\DoxyCodeLine{01595   \textcolor{comment}{// name.}}
\DoxyCodeLine{01596   \textcolor{comment}{// note that we must consider following both cases; "{}c0001\_hogehoge.tif"{} and}}
\DoxyCodeLine{01597   \textcolor{comment}{// "{}c0001A\_\#\#\#\#.tif"{}}}
\DoxyCodeLine{01598   \textcolor{keywordflow}{if} (!orgNameQstr.startsWith(sceneName)) \textcolor{keywordflow}{return} orgName;}
\DoxyCodeLine{01599 }
\DoxyCodeLine{01600   \textcolor{keywordflow}{if} (!orgNameQstr.contains(\textcolor{stringliteral}{"{}\_"{}})) \textcolor{keywordflow}{return} orgName;}
\DoxyCodeLine{01601 }
\DoxyCodeLine{01602   \textcolor{keywordflow}{return} orgNameQstr.right(orgNameQstr.size() -\/ orgNameQstr.indexOf(\textcolor{stringliteral}{"{}\_"{}}) -\/ 1)}
\DoxyCodeLine{01603       .toStdWString();}
\DoxyCodeLine{01604 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_scene_ac1a8bf0d2cec4f59c87b0001991264b5}\label{class_toonz_scene_ac1a8bf0d2cec4f59c87b0001991264b5}} 
\index{ToonzScene@{ToonzScene}!getLevelSet@{getLevelSet}}
\index{getLevelSet@{getLevelSet}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getLevelSet()}{getLevelSet()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_level_set}{TLevel\+Set}} $\ast$ Toonz\+Scene\+::get\+Level\+Set (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Returns a pointer to the scene\textquotesingle{}s {\itshape Level Set}. 



Referenced by \mbox{\hyperlink{l00864}{create\+New\+Level()}}, \mbox{\hyperlink{l01550}{Save\+Level\+As\+Popup\+::execute()}}, \mbox{\hyperlink{l02357}{Io\+Cmd\+::load\+Resources()}}, \mbox{\hyperlink{l04004}{Xsheet\+GUI\+::\+Cell\+Area\+::on\+Replace\+By\+Casted\+Level()}}, \mbox{\hyperlink{l00242}{Vectorizer\+::set\+Level()}}, \mbox{\hyperlink{l00705}{TXsh\+Sound\+Column\+::set\+Xsheet()}}, and \mbox{\hyperlink{l01610}{Filmstrip\+::update\+Choose\+Level\+Combo\+Items()}}.

\mbox{\Hypertarget{class_toonz_scene_afec1477d4fe0bb1e1152e80c3a0b20ab}\label{class_toonz_scene_afec1477d4fe0bb1e1152e80c3a0b20ab}} 
\index{ToonzScene@{ToonzScene}!getProject@{getProject}}
\index{getProject@{getProject}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getProject()}{getProject()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_project}{TProject}} $\ast$ Toonz\+Scene\+::get\+Project (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Returns a pointer to the project holding a scene instance. 

The project associated with a scene could be different from the {\itshape current} project. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00334 \{ \textcolor{keywordflow}{return} m\_project; \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01669}{Xsheet\+Viewer\+::change\+Window\+Title()}}, \mbox{\hyperlink{l01328}{code\+File\+Path()}}, \mbox{\hyperlink{l01412}{code\+Save\+Path()}}, \mbox{\hyperlink{l01231}{decode\+File\+Path()}}, \mbox{\hyperlink{l01371}{get\+Default\+Level\+Path()}}, and \mbox{\hyperlink{l01106}{TProject\+Manager\+::initialize\+Scene()}}.

\mbox{\Hypertarget{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}\label{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}} 
\index{ToonzScene@{ToonzScene}!getProperties@{getProperties}}
\index{getProperties@{getProperties}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getProperties()}{getProperties()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_scene_properties}{TScene\+Properties}} $\ast$ Toonz\+Scene\+::get\+Properties (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



\texorpdfstring{$<$}{<} Returns a pointer to the scene\textquotesingle{}s properties. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00089   \{}
\DoxyCodeLine{00090     \textcolor{keywordflow}{return} m\_properties;}
\DoxyCodeLine{00091   \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00914}{Vectorizer\+Popup\+::apply()}}, \mbox{\hyperlink{l00729}{Studio\+Palette\+Tree\+Viewer\+::drop\+Event()}}, \mbox{\hyperlink{l00413}{Io\+Cmd\+::export\+Level()}}, \mbox{\hyperlink{l02386}{Scene\+Viewer\+::get\+Dpi\+Factor()}}, \mbox{\hyperlink{l00728}{Output\+Settings\+Popup\+::get\+Properties()}}, \mbox{\hyperlink{l01106}{TProject\+Manager\+::initialize\+Scene()}}, \mbox{\hyperlink{l01122}{load\+Level()}}, \mbox{\hyperlink{l00787}{Fx\+Builder\+::make\+PF()}}, \mbox{\hyperlink{l00721}{Render\+Command\+::multimedia\+Render()}}, \mbox{\hyperlink{l01175}{Set\+Scan\+Cropbox\+Tool\+::on\+Activate()}}, \mbox{\hyperlink{l00113}{On\+Render\+Completed\+::on\+Deliver()}}, \mbox{\hyperlink{l01183}{Set\+Scan\+Cropbox\+Tool\+::on\+Enter()}}, \mbox{\hyperlink{l01126}{TProject\+Manager\+::save\+Template()}}, \mbox{\hyperlink{l00050}{TXsh\+Sound\+Level\+::set\+Scene()}}, \mbox{\hyperlink{l00705}{TXsh\+Sound\+Column\+::set\+Xsheet()}}, and \mbox{\hyperlink{l01528}{update\+Sound\+Column\+Frame\+Rate()}}.

\mbox{\Hypertarget{class_toonz_scene_a27f04f65e52c9c9a4ebc55ea25f0ddbb}\label{class_toonz_scene_a27f04f65e52c9c9a4ebc55ea25f0ddbb}} 
\index{ToonzScene@{ToonzScene}!getSavePath@{getSavePath}}
\index{getSavePath@{getSavePath}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getSavePath()}{getSavePath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Toonz\+Scene\+::get\+Save\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Return save path of {\bfseries{scene}}. If {\bfseries{scene}} is in +scenes/name.\+tnz return name, ~\newline
 if {\bfseries{scene}} is in +scenes/folder/name.\+tnz return folder/name ~\newline
 if {\bfseries{scene}} is untitledxxx.\+tnz return untitledxxx. 
\begin{DoxyCode}{0}
\DoxyCodeLine{01558                                         \{}
\DoxyCodeLine{01559   std::string sceneName = \mbox{\hyperlink{class_toonz_scene_ad42b52b671b094f66e003c4b7ebefd45}{getScenePath}}().\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}();}
\DoxyCodeLine{01560   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_toonz_scene_a53cbaf09f551658479eb743e153ab6bc}{isUntitled}}()) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_file_path}{TFilePath}}(sceneName);}
\DoxyCodeLine{01561   \mbox{\hyperlink{class_t_file_path}{TFilePath}} sceneRoot = \mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}+"{}} + \mbox{\hyperlink{class_t_project_afa1aca692a03ae826a4d22565c7361cb}{TProject::Scenes}}));}
\DoxyCodeLine{01562   \mbox{\hyperlink{class_t_file_path}{TFilePath}} scenePath = \mbox{\hyperlink{class_toonz_scene_ad42b52b671b094f66e003c4b7ebefd45}{getScenePath}}().\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01563   \mbox{\hyperlink{class_t_file_path}{TFilePath}} savePath(sceneName);}
\DoxyCodeLine{01564   \textcolor{keywordflow}{if} (sceneRoot.isAncestorOf(scenePath)) savePath = scenePath -\/ sceneRoot;}
\DoxyCodeLine{01565   \textcolor{keywordflow}{return} savePath;}
\DoxyCodeLine{01566 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01231}{decode\+File\+Path()}}, \mbox{\hyperlink{l00636}{TFile\+Path\+::get\+Name()}}, \mbox{\hyperlink{l00059}{get\+Scene\+Path()}}, \mbox{\hyperlink{l00345}{is\+Untitled()}}, \mbox{\hyperlink{l00037}{TProject\+::\+Scenes}}, and \mbox{\hyperlink{l00774}{TFile\+Path\+::with\+Type()}}.



Referenced by \mbox{\hyperlink{l01412}{code\+Save\+Path()}}, \mbox{\hyperlink{l01439}{decode\+Save\+Path()}}, \mbox{\hyperlink{l01371}{get\+Default\+Level\+Path()}}, and \mbox{\hyperlink{l00179}{Scene\+Resource\+::update\+Path()}}.

\mbox{\Hypertarget{class_toonz_scene_a1fa0a1cbf9eb6360d980392acc99924b}\label{class_toonz_scene_a1fa0a1cbf9eb6360d980392acc99924b}} 
\index{ToonzScene@{ToonzScene}!getSceneName@{getSceneName}}
\index{getSceneName@{getSceneName}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getSceneName()}{getSceneName()}}
{\footnotesize\ttfamily std\+::wstring Toonz\+Scene\+::get\+Scene\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Returns the scene\textquotesingle{}s name. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00065   \{}
\DoxyCodeLine{00066     \textcolor{keywordflow}{return} m\_scenePath.getWideName();}
\DoxyCodeLine{00067   \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01669}{Xsheet\+Viewer\+::change\+Window\+Title()}}.

\mbox{\Hypertarget{class_toonz_scene_ad42b52b671b094f66e003c4b7ebefd45}\label{class_toonz_scene_ad42b52b671b094f66e003c4b7ebefd45}} 
\index{ToonzScene@{ToonzScene}!getScenePath@{getScenePath}}
\index{getScenePath@{getScenePath}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getScenePath()}{getScenePath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Toonz\+Scene\+::get\+Scene\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Returns the scene\textquotesingle{}s file path. 



Referenced by \mbox{\hyperlink{l00308}{clear()}}, \mbox{\hyperlink{l01231}{decode\+File\+Path()}}, \mbox{\hyperlink{l01558}{get\+Save\+Path()}}, \mbox{\hyperlink{l00990}{Output\+Settings\+Popup\+::on\+Name\+Changed()}}, \mbox{\hyperlink{l00590}{save()}}, and \mbox{\hyperlink{l00802}{Output\+Settings\+Popup\+::update\+Field()}}.

\mbox{\Hypertarget{class_toonz_scene_ac8bd378d5af03124df8ee54f216a09d3}\label{class_toonz_scene_ac8bd378d5af03124df8ee54f216a09d3}} 
\index{ToonzScene@{ToonzScene}!getSoundColumns@{getSoundColumns}}
\index{getSoundColumns@{getSoundColumns}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getSoundColumns()}{getSoundColumns()}}
{\footnotesize\ttfamily void Toonz\+Scene\+::get\+Sound\+Columns (\begin{DoxyParamCaption}\item[{std\+::vector$<$ \mbox{\hyperlink{class_t_xsh_sound_column}{TXsh\+Sound\+Column}} $\ast$ $>$ \&}]{columns }\end{DoxyParamCaption})}

Insert in {\bfseries{vector}} {\bfseries{columns}} all sound column of scene {\bfseries{scene}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{01492                                                                       \{}
\DoxyCodeLine{01493   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = \textcolor{keyword}{this};}
\DoxyCodeLine{01494   std::set<TXsheet *> visited, toVisit;}
\DoxyCodeLine{01495   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = scene-\/>\mbox{\hyperlink{class_toonz_scene_ae2cbc582144c92adc5076cd5f556c95a}{getChildStack}}()-\/>\mbox{\hyperlink{class_child_stack_acc3acc547e134c1571b01ec5e75e9705}{getTopXsheet}}();}
\DoxyCodeLine{01496   visited.insert(xsh);}
\DoxyCodeLine{01497   toVisit.insert(xsh);}
\DoxyCodeLine{01498   \textcolor{keywordflow}{while} (!toVisit.empty()) \{}
\DoxyCodeLine{01499     xsh = *toVisit.begin();}
\DoxyCodeLine{01500     toVisit.erase(xsh);}
\DoxyCodeLine{01501     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < xsh-\/>\mbox{\hyperlink{class_t_xsheet_a17464dc5617cf87a46f03e1a52d36cc1}{getColumnCount}}(); i++) \{}
\DoxyCodeLine{01502       \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(i);}
\DoxyCodeLine{01503       \textcolor{keywordflow}{if} (!column) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01504       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_sound_column}{TXshSoundColumn}} *sc = column-\/>getSoundColumn())}
\DoxyCodeLine{01505         columns.push\_back(sc);}
\DoxyCodeLine{01506       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_cell_column}{TXshCellColumn}} *cc = column-\/>getCellColumn()) \{}
\DoxyCodeLine{01507         \textcolor{keywordtype}{int} r0 = 0, r1 = -\/1;}
\DoxyCodeLine{01508         cc-\/>getRange(r0, r1);}
\DoxyCodeLine{01509         \textcolor{keywordflow}{if} (!cc-\/>isEmpty() \&\& r0 <= r1) \{}
\DoxyCodeLine{01510           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} r = r0; r <= r1; r++) \{}
\DoxyCodeLine{01511             \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = cc-\/>getCell(r);}
\DoxyCodeLine{01512             \textcolor{keywordflow}{if} (cell.m\_level \&\& cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a6ef7d48e41f4f214b414e959512e6377}{getChildLevel}}()) \{}
\DoxyCodeLine{01513               \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *subxsh = cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a6ef7d48e41f4f214b414e959512e6377}{getChildLevel}}()-\/>\mbox{\hyperlink{class_t_xsh_child_level_ad2676276ae1db83a898a3eef10e0ace8}{getXsheet}}();}
\DoxyCodeLine{01514               \textcolor{keywordflow}{if} (visited.find(subxsh) == visited.end()) \{}
\DoxyCodeLine{01515                 visited.insert(subxsh);}
\DoxyCodeLine{01516                 toVisit.insert(subxsh);}
\DoxyCodeLine{01517               \}}
\DoxyCodeLine{01518             \}}
\DoxyCodeLine{01519           \}}
\DoxyCodeLine{01520         \}}
\DoxyCodeLine{01521       \}}
\DoxyCodeLine{01522     \}}
\DoxyCodeLine{01523   \}}
\DoxyCodeLine{01524 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00098}{TXsh\+Level\+::get\+Child\+Level()}}, \mbox{\hyperlink{l00083}{get\+Child\+Stack()}}, \mbox{\hyperlink{l01418}{TXsheet\+::get\+Column()}}, \mbox{\hyperlink{l01425}{TXsheet\+::get\+Column\+Count()}}, \mbox{\hyperlink{l00142}{Child\+Stack\+::get\+Top\+Xsheet()}}, and \mbox{\hyperlink{l00065}{TXsh\+Child\+Level\+::get\+Xsheet()}}.



Referenced by \mbox{\hyperlink{l01528}{update\+Sound\+Column\+Frame\+Rate()}}.

\mbox{\Hypertarget{class_toonz_scene_aaffd562eebbd8faba4caeaed69bfcc18}\label{class_toonz_scene_aaffd562eebbd8faba4caeaed69bfcc18}} 
\index{ToonzScene@{ToonzScene}!getTopXsheet@{getTopXsheet}}
\index{getTopXsheet@{getTopXsheet}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getTopXsheet()}{getTopXsheet()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$ Toonz\+Scene\+::get\+Top\+Xsheet (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Returns the {\itshape topmost} xsheet in the scene\textquotesingle{}s xsheet hierarchy. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00961                                         \{}
\DoxyCodeLine{00962   \textcolor{keywordflow}{return} m\_childStack-\/>\mbox{\hyperlink{class_child_stack_acc3acc547e134c1571b01ec5e75e9705}{getTopXsheet}}();}
\DoxyCodeLine{00963 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00142}{Child\+Stack\+::get\+Top\+Xsheet()}}.



Referenced by \mbox{\hyperlink{l01106}{TProject\+Manager\+::initialize\+Scene()}}, \mbox{\hyperlink{l00993}{Stage\+::\+Raster\+Painter\+::on\+Raster\+Image()}}, \mbox{\hyperlink{l00294}{TTool\+::touch\+Image()}}, and \mbox{\hyperlink{l01610}{Filmstrip\+::update\+Choose\+Level\+Combo\+Items()}}.

\mbox{\Hypertarget{class_toonz_scene_aedb528bcece52278325ab31d664faf20}\label{class_toonz_scene_aedb528bcece52278325ab31d664faf20}} 
\index{ToonzScene@{ToonzScene}!getVersionNumber@{getVersionNumber}}
\index{getVersionNumber@{getVersionNumber}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getVersionNumber()}{getVersionNumber()}}
{\footnotesize\ttfamily Version\+Number Toonz\+Scene\+::get\+Version\+Number (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00257 \{ \textcolor{keywordflow}{return} m\_versionNumber; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}\label{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}} 
\index{ToonzScene@{ToonzScene}!getXsheet@{getXsheet}}
\index{getXsheet@{getXsheet}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{getXsheet()}{getXsheet()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$ Toonz\+Scene\+::get\+Xsheet (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Returns a pointer to the scene\textquotesingle{}s {\itshape current} xsheet. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00957 \{ \textcolor{keywordflow}{return} m\_childStack-\/>\mbox{\hyperlink{class_child_stack_aeb633c4351ac8fb0e72782c9f9d1e2b4}{getXsheet}}(); \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00098}{Child\+Stack\+::get\+Xsheet()}}.



Referenced by \mbox{\hyperlink{l00914}{Vectorizer\+Popup\+::apply()}}, \mbox{\hyperlink{l01472}{get\+Current\+Camera()}}, \mbox{\hyperlink{l00704}{get\+Frame\+Count()}}, \mbox{\hyperlink{l01122}{load\+Level()}}, \mbox{\hyperlink{l00394}{load\+No\+Resources()}}, \mbox{\hyperlink{l00411}{load\+Resources()}}, \mbox{\hyperlink{l02357}{Io\+Cmd\+::load\+Resources()}}, \mbox{\hyperlink{l00443}{load\+Tnz\+File()}}, \mbox{\hyperlink{l01102}{Output\+Settings\+Popup\+::on\+Camera\+Changed()}}, \mbox{\hyperlink{l00711}{render\+Frame()}}, \mbox{\hyperlink{l01126}{TProject\+Manager\+::save\+Template()}}, and \mbox{\hyperlink{l00802}{Output\+Settings\+Popup\+::update\+Field()}}.

\mbox{\Hypertarget{class_toonz_scene_a657e45d8e257f7c2047022b75dc8600d}\label{class_toonz_scene_a657e45d8e257f7c2047022b75dc8600d}} 
\index{ToonzScene@{ToonzScene}!isExternPath@{isExternPath}}
\index{isExternPath@{isExternPath}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{isExternPath()}{isExternPath()}}
{\footnotesize\ttfamily bool Toonz\+Scene\+::is\+Extern\+Path (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption}) const}

Return true if {\bfseries{\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}} {\bfseries{fp}} is not contained in a project folder. 
\begin{DoxyCode}{0}
\DoxyCodeLine{01457                                                        \{}
\DoxyCodeLine{01458   \mbox{\hyperlink{class_t_project}{TProject}} *project = m\_project;}
\DoxyCodeLine{01459   assert(project);}
\DoxyCodeLine{01460   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < project-\/>\mbox{\hyperlink{class_t_project_a26ebcdd853071adf3bfb4e80aabed84f}{getFolderCount}}(); i++) \{}
\DoxyCodeLine{01461     \textcolor{keywordflow}{if} (project-\/>\mbox{\hyperlink{class_t_project_ab7cd33e579f84763bee6421daeb3bde5}{getFolderName}}(i) == \textcolor{stringliteral}{"{}scenes"{}}) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01462 }
\DoxyCodeLine{01463     \mbox{\hyperlink{class_t_file_path}{TFilePath}} folderPath =}
\DoxyCodeLine{01464         \mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}+"{}} + project-\/>\mbox{\hyperlink{class_t_project_ab7cd33e579f84763bee6421daeb3bde5}{getFolderName}}(i)));}
\DoxyCodeLine{01465     \textcolor{keywordflow}{if} (folderPath.isAncestorOf(fp)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01466   \}}
\DoxyCodeLine{01467   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01468 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01231}{decode\+File\+Path()}}, \mbox{\hyperlink{l00384}{TProject\+::get\+Folder\+Count()}}, and \mbox{\hyperlink{l00388}{TProject\+::get\+Folder\+Name()}}.



Referenced by \mbox{\hyperlink{l00521}{Io\+Cmd\+::load\+Resource\+Folders()}}, and \mbox{\hyperlink{l02357}{Io\+Cmd\+::load\+Resources()}}.

\mbox{\Hypertarget{class_toonz_scene_a78b979156507dc35586cdd435e0f26cb}\label{class_toonz_scene_a78b979156507dc35586cdd435e0f26cb}} 
\index{ToonzScene@{ToonzScene}!isLoading@{isLoading}}
\index{isLoading@{isLoading}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{isLoading()}{isLoading()}}
{\footnotesize\ttfamily bool Toonz\+Scene\+::is\+Loading (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00262 \{ \textcolor{keywordflow}{return} m\_isLoading; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_scene_a53cbaf09f551658479eb743e153ab6bc}\label{class_toonz_scene_a53cbaf09f551658479eb743e153ab6bc}} 
\index{ToonzScene@{ToonzScene}!isUntitled@{isUntitled}}
\index{isUntitled@{isUntitled}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{isUntitled()}{isUntitled()}}
{\footnotesize\ttfamily bool Toonz\+Scene\+::is\+Untitled (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Returns whether the scene path is empty, or the scene is explicitly untitled. \begin{DoxySeeAlso}{See also}
Member function \mbox{\hyperlink{class_toonz_scene_ad5e0cf52431bcf95e54faa416f0fc21d}{set\+Untitled()}}. 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00345                                   \{}
\DoxyCodeLine{00346   \textcolor{keywordflow}{return} m\_scenePath == \mbox{\hyperlink{class_t_file_path}{TFilePath}}() || m\_isUntitled;}
\DoxyCodeLine{00347 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00308}{clear()}}, \mbox{\hyperlink{l01371}{get\+Default\+Level\+Path()}}, \mbox{\hyperlink{l01558}{get\+Save\+Path()}}, and \mbox{\hyperlink{l00590}{save()}}.

\mbox{\Hypertarget{class_toonz_scene_ac8765c2df661b90822547a9137e77aba}\label{class_toonz_scene_ac8765c2df661b90822547a9137e77aba}} 
\index{ToonzScene@{ToonzScene}!load@{load}}
\index{load@{load}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{load()}{load()}}
{\footnotesize\ttfamily void Toonz\+Scene\+::load (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path,  }\item[{bool}]{with\+Progress\+Dialog = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00351                                                                     \{}
\DoxyCodeLine{00352   setIsLoading(\textcolor{keyword}{true});}
\DoxyCodeLine{00353   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00354     \mbox{\hyperlink{class_toonz_scene_ac1c6f51c86f8feba26ea8633a2283125}{loadNoResources}}(path);}
\DoxyCodeLine{00355     \mbox{\hyperlink{class_toonz_scene_af1379cb7299d5c0c1f764cd7a629fcef}{loadResources}}(withProgressDialog);}
\DoxyCodeLine{00356   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00357     setIsLoading(\textcolor{keyword}{false});}
\DoxyCodeLine{00358     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00359   \}}
\DoxyCodeLine{00360   setIsLoading(\textcolor{keyword}{false});}
\DoxyCodeLine{00361 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_scene_a22171559a050d37bdf6763e8abcaf73c}\label{class_toonz_scene_a22171559a050d37bdf6763e8abcaf73c}} 
\index{ToonzScene@{ToonzScene}!loadFrameCount@{loadFrameCount}}
\index{loadFrameCount@{loadFrameCount}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{loadFrameCount()}{loadFrameCount()}}
{\footnotesize\ttfamily int Toonz\+Scene\+::load\+Frame\+Count (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption})}

Returns frame count stored in the scene header. Quicker than load(fp); \mbox{\hyperlink{class_toonz_scene_ab5cd3ad6f894b1acc5656ca747a80627}{get\+Frame\+Count()}} 
\begin{DoxyCode}{0}
\DoxyCodeLine{00367                                                   \{}
\DoxyCodeLine{00368   \mbox{\hyperlink{class_t_i_stream}{TIStream}} is(fp);}
\DoxyCodeLine{00369   \textcolor{keywordflow}{if} (!is) \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(fp.getWideString() + L\textcolor{stringliteral}{"{}: Can't open file"{}});}
\DoxyCodeLine{00370   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00371     \textcolor{comment}{// Leggo il primo tag (<tnz/tab>) ed estraggo il framecount (se c'e')}}
\DoxyCodeLine{00372     std::string tagName = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00373     \textcolor{keywordflow}{if} (!is.matchTag(tagName)) \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}Bad file format"{}});}
\DoxyCodeLine{00374 }
\DoxyCodeLine{00375     \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}tab"{}} || tagName == \textcolor{stringliteral}{"{}tnz"{}}) \{}
\DoxyCodeLine{00376       \textcolor{keywordtype}{int} frameCount;}
\DoxyCodeLine{00377       \textcolor{keywordflow}{if} (is.getTagParam(\textcolor{stringliteral}{"{}framecount"{}}, frameCount))}
\DoxyCodeLine{00378         \textcolor{keywordflow}{return} frameCount;}
\DoxyCodeLine{00379       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00380         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00381     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00382       \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}Bad file format"{}});}
\DoxyCodeLine{00383   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{00384     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_i_stream_exception}{TIStreamException}}(is, e);}
\DoxyCodeLine{00385   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00386     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_i_stream_exception}{TIStreamException}}(is);}
\DoxyCodeLine{00387   \}}
\DoxyCodeLine{00388 }
\DoxyCodeLine{00389   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00390 \}}

\end{DoxyCode}


References \mbox{\hyperlink{class_t_i_stream_a530540f44de1a1031cebfee0d34ffcfe}{TIStream\+::get\+Tag\+Param()}}, and \mbox{\hyperlink{l01178}{TIStream\+::match\+Tag()}}.

\mbox{\Hypertarget{class_toonz_scene_ae6bd7d22f6310011d48dfb5176344015}\label{class_toonz_scene_ae6bd7d22f6310011d48dfb5176344015}} 
\index{ToonzScene@{ToonzScene}!loadLevel@{loadLevel}}
\index{loadLevel@{loadLevel}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{loadLevel()}{loadLevel()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}} $\ast$ Toonz\+Scene\+::load\+Level (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{actual\+Path,  }\item[{const \mbox{\hyperlink{class_level_options}{Level\+Options}} $\ast$}]{options = {\ttfamily 0},  }\item[{std\+::wstring}]{level\+Name = {\ttfamily L\char`\"{}\char`\"{}},  }\item[{const std\+::vector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \&}]{f\+Ids = {\ttfamily std\+:\+:vector$<$\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}}$>$()} }\end{DoxyParamCaption})}

of an old Toonz level, and converts it if needed.

The \mbox{\hyperlink{class_toonz_scene_ae6bd7d22f6310011d48dfb5176344015}{load\+Level()}} function accepts an optional pointer to the \mbox{\hyperlink{class_level_options}{Level\+Options}} to be used by the level. If no option is explicitly specified, a level format match will be looked up in the application preferences; if none is found the default ones will be used.

\begin{DoxyReturn}{Returns}
A Pointer to the loaded level. ~\newline
 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em options} & Loads a level from the specified {\itshape decoded} path. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{01125                                                                   \{}
\DoxyCodeLine{01126   \mbox{\hyperlink{struct_level_type}{LevelType}} ltype = getLevelType(actualPath);}
\DoxyCodeLine{01127   \textcolor{keywordflow}{if} (ltype.m\_ltype == UNKNOWN\_XSHLEVEL) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{01128 }
\DoxyCodeLine{01129   \mbox{\hyperlink{class_t_file_path}{TFilePath}} levelPath = actualPath;}
\DoxyCodeLine{01130 }
\DoxyCodeLine{01131   \textcolor{comment}{// Ensure the level name is unique}}
\DoxyCodeLine{01132 }
\DoxyCodeLine{01133   \textcolor{keywordflow}{if} (QString::fromStdWString(levelName).isEmpty()) \{}
\DoxyCodeLine{01134     \textcolor{comment}{// if the option is set in the preferences,}}
\DoxyCodeLine{01135     \textcolor{comment}{// remove the scene numbers("{}c\#\#\#\#\_"{}) from the file name}}
\DoxyCodeLine{01136     levelName = getLevelNameWithoutSceneNumber(levelPath.getWideName());}
\DoxyCodeLine{01137   \}}
\DoxyCodeLine{01138 }
\DoxyCodeLine{01139   \mbox{\hyperlink{class_name_modifier}{NameModifier}} nm(levelName);}
\DoxyCodeLine{01140   levelName = nm.getNext();}
\DoxyCodeLine{01141   \textcolor{keywordflow}{while} (m\_levelSet-\/>hasLevel(levelName)) levelName = nm.getNext();}
\DoxyCodeLine{01142 }
\DoxyCodeLine{01143   \textcolor{comment}{// Discriminate sound levels}}
\DoxyCodeLine{01144   \textcolor{keywordflow}{if} (ltype.m\_ltype == SND\_XSHLEVEL) \{}
\DoxyCodeLine{01145     \mbox{\hyperlink{class_t_xsh_sound_level}{TXshSoundLevel}} *sl = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_xsh_sound_level}{TXshSoundLevel}}(levelName);}
\DoxyCodeLine{01146     sl-\/>\mbox{\hyperlink{class_t_xsh_level_ad2cb5812d9f36e9f5d570874dad8d3bd}{setType}}(ltype.m\_ltype);}
\DoxyCodeLine{01147     sl-\/>\mbox{\hyperlink{class_t_xsh_sound_level_a37015e50c3396926e2759996de36358e}{setScene}}(\textcolor{keyword}{this});}
\DoxyCodeLine{01148     sl-\/>setPath(\mbox{\hyperlink{class_toonz_scene_abb12422205be4336c3dee1aa5fbdc5e5}{codeFilePath}}(levelPath));}
\DoxyCodeLine{01149 }
\DoxyCodeLine{01150     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01151       sl-\/>\mbox{\hyperlink{class_t_xsh_sound_level_a65ea115874ac4e9d80e5996014d9c1c1}{load}}();}
\DoxyCodeLine{01152     \} \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} std::string \&msg)  \textcolor{comment}{// Intercepting std::string exceptions}}
\DoxyCodeLine{01153     \{}
\DoxyCodeLine{01154       \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(msg);}
\DoxyCodeLine{01155     \}  \textcolor{comment}{// from load, and rethrowing... curious!}}
\DoxyCodeLine{01156 }
\DoxyCodeLine{01157     m\_levelSet-\/>insertLevel(sl);}
\DoxyCodeLine{01158     \textcolor{keywordflow}{return} sl;}
\DoxyCodeLine{01159   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01160     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *xl = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}}(levelName);}
\DoxyCodeLine{01161     xl-\/>\mbox{\hyperlink{class_t_xsh_level_ad2cb5812d9f36e9f5d570874dad8d3bd}{setType}}(ltype.m\_ltype);}
\DoxyCodeLine{01162     xl-\/>\mbox{\hyperlink{class_t_xsh_level_a3c0052e5b6496d5bd9c697f678761e5c}{setScene}}(\textcolor{keyword}{this});}
\DoxyCodeLine{01163 }
\DoxyCodeLine{01164     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_toonz_scene_ad8d5a080e48a1ab0241c410ce3a0f485}{convertLevelIfNeeded}}(levelPath))}
\DoxyCodeLine{01165       \textcolor{keywordflow}{return} 0;  \textcolor{comment}{// Conversion failed, bail out}}
\DoxyCodeLine{01166 }
\DoxyCodeLine{01167     xl-\/>setPath(\mbox{\hyperlink{class_toonz_scene_abb12422205be4336c3dee1aa5fbdc5e5}{codeFilePath}}(levelPath), \textcolor{keyword}{true});}
\DoxyCodeLine{01168 }
\DoxyCodeLine{01169     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01170       \textcolor{keywordflow}{if} (fIds.size() != 0 \&\& !ltype.m\_oldLevelFlag)}
\DoxyCodeLine{01171         xl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a0020922626c177cd3134a05e274aecee}{load}}(fIds);}
\DoxyCodeLine{01172       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01173         xl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a0020922626c177cd3134a05e274aecee}{load}}();}
\DoxyCodeLine{01174     \} \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} std::string \&msg) \{}
\DoxyCodeLine{01175       \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(msg);}
\DoxyCodeLine{01176     \}}
\DoxyCodeLine{01177 }
\DoxyCodeLine{01178     \textcolor{keywordflow}{if} (ltype.m\_oldLevelFlag)}
\DoxyCodeLine{01179       xl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a2d43337766628739707849f8808bf300}{setDirtyFlag}}(\textcolor{keyword}{true});  \textcolor{comment}{// Not set on old level formats?}}
\DoxyCodeLine{01180 }
\DoxyCodeLine{01181     \mbox{\hyperlink{class_level_properties}{LevelProperties}} *lp = xl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}();}
\DoxyCodeLine{01182     assert(lp);}
\DoxyCodeLine{01183 }
\DoxyCodeLine{01184     \textcolor{keywordflow}{if} (levelOptions)}
\DoxyCodeLine{01185       lp-\/>\mbox{\hyperlink{class_level_properties_ab664f199fc6df760127065d20be89e90}{options}}() = *levelOptions;}
\DoxyCodeLine{01186     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01187       \textcolor{keyword}{const} \mbox{\hyperlink{class_preferences}{Preferences}} \&prefs = *Preferences::instance();}
\DoxyCodeLine{01188       \textcolor{keywordtype}{int} formatIdx            = prefs.\mbox{\hyperlink{class_preferences_ae9bb42f98e4a2e746a7400b133c5d6e8}{matchLevelFormat}}(}
\DoxyCodeLine{01189           levelPath);  \textcolor{comment}{// Should I use actualPath here? It's mostly}}
\DoxyCodeLine{01190                                   \textcolor{comment}{// irrelevant anyway, it's for old tzp/tzu...}}
\DoxyCodeLine{01191       \textcolor{keywordflow}{if} (formatIdx >= 0)}
\DoxyCodeLine{01192         lp-\/>\mbox{\hyperlink{class_level_properties_ab664f199fc6df760127065d20be89e90}{options}}() = prefs.\mbox{\hyperlink{class_preferences_a067169d62e7dfa4125a74ed4dfafb6f6}{levelFormat}}(formatIdx).\mbox{\hyperlink{struct_preferences_1_1_level_format_a66f0d4296393ddb6ad989d9f63ad41eb}{m\_options}};}
\DoxyCodeLine{01193       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01194         \textcolor{comment}{// Default subsampling values are assigned from scene properties}}
\DoxyCodeLine{01195         \textcolor{keywordflow}{if} (xl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == OVL\_XSHLEVEL)}
\DoxyCodeLine{01196           lp-\/>\mbox{\hyperlink{class_level_properties_a2591ae6df7e874a982e1539395462174}{setSubsampling}}(\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}()-\/>getFullcolorSubsampling());}
\DoxyCodeLine{01197         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (xl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == TZP\_XSHLEVEL)}
\DoxyCodeLine{01198           lp-\/>\mbox{\hyperlink{class_level_properties_a2591ae6df7e874a982e1539395462174}{setSubsampling}}(\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}()-\/>getTlvSubsampling());}
\DoxyCodeLine{01199       \}}
\DoxyCodeLine{01200     \}}
\DoxyCodeLine{01201 }
\DoxyCodeLine{01202     \textcolor{keywordflow}{if} (lp-\/>\mbox{\hyperlink{class_level_properties_af80d4404a0da97a8e45d0947f9bd7278}{getDpiPolicy}}() == LevelProperties::DP\_ImageDpi) \{}
\DoxyCodeLine{01203       \textcolor{comment}{// We must check whether the image actually has a dpi.}}
\DoxyCodeLine{01204       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_point_t}{TPointD}} \&imageDpi = xl-\/>getImageDpi();}
\DoxyCodeLine{01205 }
\DoxyCodeLine{01206       \textcolor{keywordflow}{if} (imageDpi == \mbox{\hyperlink{class_t_point_t}{TPointD}}() ||}
\DoxyCodeLine{01207           Preferences::instance()-\/>getUnits() == \textcolor{stringliteral}{"{}pixel"{}} ||}
\DoxyCodeLine{01208           Preferences::instance()-\/>isIgnoreImageDpiEnabled()) \{}
\DoxyCodeLine{01209         \textcolor{comment}{// Change to "{}Custom Dpi"{} policy and use camera dpi}}
\DoxyCodeLine{01210         \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} cameraId =}
\DoxyCodeLine{01211             \mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}()-\/>\mbox{\hyperlink{class_t_xsheet_a5dc925584e35e1678f5678b79c470959}{getStageObjectTree}}()-\/>\mbox{\hyperlink{class_t_stage_object_tree_a7d63ae5d60c3a3aacf5da58c108ac167}{getCurrentCameraId}}();}
\DoxyCodeLine{01212 }
\DoxyCodeLine{01213         lp-\/>\mbox{\hyperlink{class_level_properties_aef6e555a773c2f69d2089dc9c009f8be}{setDpiPolicy}}(LevelProperties::DP\_CustomDpi);}
\DoxyCodeLine{01214         lp-\/>\mbox{\hyperlink{class_level_properties_abdaea012fce05b1617350a174790f473}{setDpi}}(\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}()-\/>getDpi());}
\DoxyCodeLine{01215       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01216         \textcolor{comment}{// Has dpi alright -\/ assign it to custom dpi, too}}
\DoxyCodeLine{01217         lp-\/>\mbox{\hyperlink{class_level_properties_abdaea012fce05b1617350a174790f473}{setDpi}}(imageDpi);}
\DoxyCodeLine{01218       \}}
\DoxyCodeLine{01219     \}}
\DoxyCodeLine{01220 }
\DoxyCodeLine{01221     m\_levelSet-\/>insertLevel(xl);}
\DoxyCodeLine{01222 }
\DoxyCodeLine{01223     \textcolor{keywordflow}{return} xl;}
\DoxyCodeLine{01224   \}}
\DoxyCodeLine{01225 }
\DoxyCodeLine{01226   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{01227 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01328}{code\+File\+Path()}}, \mbox{\hyperlink{l01058}{convert\+Level\+If\+Needed()}}, \mbox{\hyperlink{l01472}{get\+Current\+Camera()}}, \mbox{\hyperlink{l00508}{TStage\+Object\+Tree\+::get\+Current\+Camera\+Id()}}, \mbox{\hyperlink{l00054}{Level\+Properties\+::get\+Dpi\+Policy()}}, \mbox{\hyperlink{l00087}{get\+Properties()}}, \mbox{\hyperlink{l00109}{TXsh\+Simple\+Level\+::get\+Properties()}}, \mbox{\hyperlink{l00549}{TXsheet\+::get\+Stage\+Object\+Tree()}}, \mbox{\hyperlink{l00081}{TXsh\+Level\+::get\+Type()}}, \mbox{\hyperlink{l00957}{get\+Xsheet()}}, \mbox{\hyperlink{l01050}{Preferences\+::level\+Format()}}, \mbox{\hyperlink{l01083}{TXsh\+Simple\+Level\+::load()}}, \mbox{\hyperlink{l00095}{TXsh\+Sound\+Level\+::load()}}, \mbox{\hyperlink{l00081}{Preferences\+::\+Level\+Format\+::m\+\_\+options}}, \mbox{\hyperlink{l01063}{Preferences\+::match\+Level\+Format()}}, \mbox{\hyperlink{l00092}{Level\+Properties\+::options()}}, \mbox{\hyperlink{l00320}{TXsh\+Simple\+Level\+::set\+Dirty\+Flag()}}, \mbox{\hyperlink{l00060}{Level\+Properties\+::set\+Dpi()}}, \mbox{\hyperlink{l00048}{Level\+Properties\+::set\+Dpi\+Policy()}}, \mbox{\hyperlink{l00024}{TXsh\+Level\+::set\+Scene()}}, \mbox{\hyperlink{l00050}{TXsh\+Sound\+Level\+::set\+Scene()}}, \mbox{\hyperlink{l00074}{Level\+Properties\+::set\+Subsampling()}}, and \mbox{\hyperlink{l00084}{TXsh\+Level\+::set\+Type()}}.



Referenced by \mbox{\hyperlink{l00242}{Vectorizer\+::set\+Level()}}.

\mbox{\Hypertarget{class_toonz_scene_ac1c6f51c86f8feba26ea8633a2283125}\label{class_toonz_scene_ac1c6f51c86f8feba26ea8633a2283125}} 
\index{ToonzScene@{ToonzScene}!loadNoResources@{loadNoResources}}
\index{loadNoResources@{loadNoResources}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{loadNoResources()}{loadNoResources()}}
{\footnotesize\ttfamily void Toonz\+Scene\+::load\+No\+Resources (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path }\end{DoxyParamCaption})}

Loads a scene {\itshape without} loading its resources. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00394                                                     \{}
\DoxyCodeLine{00395   \mbox{\hyperlink{class_toonz_scene_ad63e1050bdbe8f213f5da4bc852c6f7a}{clear}}();}
\DoxyCodeLine{00396 }
\DoxyCodeLine{00397   \mbox{\hyperlink{class_t_project_manager}{TProjectManager}} *pm    = \mbox{\hyperlink{class_t_project_manager_a150ca0d6e2eb171b8117b0c5f03dbfad}{TProjectManager::instance}}();}
\DoxyCodeLine{00398   \mbox{\hyperlink{class_t_smart_pointer_t}{TProjectP}} sceneProject = pm-\/>\mbox{\hyperlink{class_t_project_manager_adcc7fc8cb7656b12f54b773ee6448735}{loadSceneProject}}(fp);}
\DoxyCodeLine{00399   \textcolor{keywordflow}{if} (!sceneProject) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00400 }
\DoxyCodeLine{00401   \mbox{\hyperlink{class_toonz_scene_aa7aac33fc53c47ea5baff597e5f18a9b}{setProject}}(sceneProject.getPointer());}
\DoxyCodeLine{00402 }
\DoxyCodeLine{00403   \mbox{\hyperlink{class_toonz_scene_ac16c1eaa9cba08a24be952e8f3d62a8f}{loadTnzFile}}(fp);}
\DoxyCodeLine{00404   \mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}()-\/>\mbox{\hyperlink{class_t_xsheet_ac5e05acb2ce9809c0dcadd2a8b06b393}{updateFrameCount}}();}
\DoxyCodeLine{00405 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00308}{clear()}}, \mbox{\hyperlink{l00957}{get\+Xsheet()}}, \mbox{\hyperlink{l00777}{TProject\+Manager\+::instance()}}, \mbox{\hyperlink{l01015}{TProject\+Manager\+::load\+Scene\+Project()}}, \mbox{\hyperlink{l00443}{load\+Tnz\+File()}}, \mbox{\hyperlink{l00322}{set\+Project()}}, and \mbox{\hyperlink{l01166}{TXsheet\+::update\+Frame\+Count()}}.

\mbox{\Hypertarget{class_toonz_scene_af1379cb7299d5c0c1f764cd7a629fcef}\label{class_toonz_scene_af1379cb7299d5c0c1f764cd7a629fcef}} 
\index{ToonzScene@{ToonzScene}!loadResources@{loadResources}}
\index{loadResources@{loadResources}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{loadResources()}{loadResources()}}
{\footnotesize\ttfamily void Toonz\+Scene\+::load\+Resources (\begin{DoxyParamCaption}\item[{bool}]{with\+Progress\+Dialog = {\ttfamily false} }\end{DoxyParamCaption})}



Loads the scene resources. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00411                                                       \{}
\DoxyCodeLine{00412   \textcolor{comment}{/*-\/-\/-\/ m\_levelSet-\/>getLevelCount()が10個以上のとき表示させる　-\/-\/-\/*/}}
\DoxyCodeLine{00413   QProgressDialog *progressDialog = 0;}
\DoxyCodeLine{00414   \textcolor{keywordflow}{if} (withProgressDialog \&\& m\_levelSet-\/>getLevelCount() >= 10) \{}
\DoxyCodeLine{00415     progressDialog = \textcolor{keyword}{new} QProgressDialog(\textcolor{stringliteral}{"{}Loading Scene Resources"{}}, \textcolor{stringliteral}{"{}"{}}, 0,}
\DoxyCodeLine{00416                                          m\_levelSet-\/>getLevelCount());}
\DoxyCodeLine{00417     progressDialog-\/>setModal(\textcolor{keyword}{true});}
\DoxyCodeLine{00418     progressDialog-\/>setAutoReset(}
\DoxyCodeLine{00419         \textcolor{keyword}{true}); \textcolor{comment}{/*-\/-\/maximumに到達したら自動でresetを呼ぶ-\/-\/*/}}
\DoxyCodeLine{00420     progressDialog-\/>setAutoClose(\textcolor{keyword}{true}); \textcolor{comment}{/*-\/-\/resetが呼ばれたら自動で閉じる-\/-\/*/}}
\DoxyCodeLine{00421     progressDialog-\/>setAttribute(Qt::WA\_DeleteOnClose,}
\DoxyCodeLine{00422                                  \textcolor{keyword}{true}); \textcolor{comment}{/*-\/-\/閉じたら自動でDeleteされる-\/-\/*/}}
\DoxyCodeLine{00423     progressDialog-\/>setCancelButton(0);}
\DoxyCodeLine{00424     progressDialog-\/>setValue(0);}
\DoxyCodeLine{00425     progressDialog-\/>show();}
\DoxyCodeLine{00426   \}}
\DoxyCodeLine{00427 }
\DoxyCodeLine{00428   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00429   \textcolor{keywordflow}{for} (i = 0; i < m\_levelSet-\/>getLevelCount(); i++) \{}
\DoxyCodeLine{00430     \textcolor{keywordflow}{if} (progressDialog) progressDialog-\/>setValue(i + 1);}
\DoxyCodeLine{00431 }
\DoxyCodeLine{00432     \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level = m\_levelSet-\/>getLevel(i);}
\DoxyCodeLine{00433     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00434       level-\/>\mbox{\hyperlink{class_t_xsh_level_a3fe5db60912aecd08a751208b5e3feae}{load}}();}
\DoxyCodeLine{00435     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00436     \}}
\DoxyCodeLine{00437   \}}
\DoxyCodeLine{00438   \mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}()-\/>\mbox{\hyperlink{class_t_xsheet_ac5e05acb2ce9809c0dcadd2a8b06b393}{updateFrameCount}}();}
\DoxyCodeLine{00439 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00957}{get\+Xsheet()}}, \mbox{\hyperlink{class_t_xsh_level_a3fe5db60912aecd08a751208b5e3feae}{TXsh\+Level\+::load()}}, and \mbox{\hyperlink{l01166}{TXsheet\+::update\+Frame\+Count()}}.

\mbox{\Hypertarget{class_toonz_scene_ac16c1eaa9cba08a24be952e8f3d62a8f}\label{class_toonz_scene_ac16c1eaa9cba08a24be952e8f3d62a8f}} 
\index{ToonzScene@{ToonzScene}!loadTnzFile@{loadTnzFile}}
\index{loadTnzFile@{loadTnzFile}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{loadTnzFile()}{loadTnzFile()}}
{\footnotesize\ttfamily void Toonz\+Scene\+::load\+Tnz\+File (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path }\end{DoxyParamCaption})}

Loads scene data from file, {\itshape excluding} the associated project and the scene resources. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00443                                                 \{}
\DoxyCodeLine{00444   \textcolor{keywordtype}{bool} reading22 = \textcolor{keyword}{false};}
\DoxyCodeLine{00445   \mbox{\hyperlink{class_t_i_stream}{TIStream}} is(fp);}
\DoxyCodeLine{00446   \textcolor{keywordflow}{if} (!is) \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(fp.getWideString() + L\textcolor{stringliteral}{"{}: Can't open file"{}});}
\DoxyCodeLine{00447   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00448     std::string tagName = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00449     \textcolor{keywordflow}{if} (!is.matchTag(tagName)) \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}Bad file format"{}});}
\DoxyCodeLine{00450 }
\DoxyCodeLine{00451     \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}tab"{}} || tagName == \textcolor{stringliteral}{"{}tnz"{}}) \{}
\DoxyCodeLine{00452       std::string rootTagName = tagName;}
\DoxyCodeLine{00453       std::string v           = is.getTagAttribute(\textcolor{stringliteral}{"{}version"{}});}
\DoxyCodeLine{00454       VersionNumber versionNumber(0, 0);}
\DoxyCodeLine{00455       \textcolor{keywordtype}{int} k = v.find(\textcolor{stringliteral}{"{}."{}});}
\DoxyCodeLine{00456       \textcolor{keywordflow}{if} (k != (\textcolor{keywordtype}{int})std::string::npos \&\& 0 < k \&\& k < (\textcolor{keywordtype}{int})v.length()) \{}
\DoxyCodeLine{00457         versionNumber.first  = std::stoi(v.substr(0, k));}
\DoxyCodeLine{00458         versionNumber.second = std::stoi(v.substr(k + 1));}
\DoxyCodeLine{00459       \}}
\DoxyCodeLine{00460       \textcolor{keywordflow}{if} (versionNumber == VersionNumber(0, 0))}
\DoxyCodeLine{00461         \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}Bad version number :"{}} + v);}
\DoxyCodeLine{00462       setVersionNumber(versionNumber);}
\DoxyCodeLine{00463       is.setVersion(versionNumber);}
\DoxyCodeLine{00464       \textcolor{keywordflow}{while} (is.matchTag(tagName)) \{}
\DoxyCodeLine{00465         \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}generator"{}}) \{}
\DoxyCodeLine{00466           std::string program = is.getString();}
\DoxyCodeLine{00467           \textcolor{comment}{// TODO: This obsolete condition should be removed before releasing OT}}
\DoxyCodeLine{00468           \textcolor{comment}{// v2.2 !}}
\DoxyCodeLine{00469           reading22 = program.find(\textcolor{stringliteral}{"{}2.2"{}}) != std::string::npos;}
\DoxyCodeLine{00470         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}properties"{}})}
\DoxyCodeLine{00471           m\_properties-\/>\mbox{\hyperlink{class_t_scene_properties_a2dab8c56b747756cae8f9a31d8047d1e}{loadData}}(is, \textcolor{keyword}{false});}
\DoxyCodeLine{00472         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}palette"{}})  \textcolor{comment}{// per compatibilita' beta1}}
\DoxyCodeLine{00473         \{}
\DoxyCodeLine{00474           \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_palette}{TPalette}};}
\DoxyCodeLine{00475           is >> *palette;}
\DoxyCodeLine{00476           \textcolor{keyword}{delete} palette;}
\DoxyCodeLine{00477         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}levelSet"{}})}
\DoxyCodeLine{00478           m\_levelSet-\/>loadData(is);}
\DoxyCodeLine{00479         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}levels"{}}) \{}
\DoxyCodeLine{00480           \textcolor{comment}{// obsoleto}}
\DoxyCodeLine{00481           \textcolor{keywordflow}{if} (!reading22) assert(0);}
\DoxyCodeLine{00482           \textcolor{keywordflow}{while} (!is.eos()) \{}
\DoxyCodeLine{00483             \mbox{\hyperlink{class_t_persist}{TPersist}} *p = 0;}
\DoxyCodeLine{00484             is >> p;}
\DoxyCodeLine{00485             \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xshLevel = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *\textcolor{keyword}{>}(p);}
\DoxyCodeLine{00486             \textcolor{keywordflow}{if} (xshLevel) \{}
\DoxyCodeLine{00487               xshLevel-\/>\mbox{\hyperlink{class_t_xsh_level_a3c0052e5b6496d5bd9c697f678761e5c}{setScene}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00488               \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = xshLevel-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{00489               \textcolor{keywordflow}{if} (reading22 \&\& sl \&\& sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}() == \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \{}
\DoxyCodeLine{00490                 sl-\/>\mbox{\hyperlink{class_t_xsh_level_ad2cb5812d9f36e9f5d570874dad8d3bd}{setType}}(PLI\_XSHLEVEL);}
\DoxyCodeLine{00491                 sl-\/>setPath(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}+drawings/"{}}) +}
\DoxyCodeLine{00492                             (sl-\/>\mbox{\hyperlink{class_t_xsh_level_a3a59fb1bd3261baee4e889a9edbf0ae8}{getName}}() + L\textcolor{stringliteral}{"{}.pli"{}}));}
\DoxyCodeLine{00493               \}}
\DoxyCodeLine{00494               m\_levelSet-\/>insertLevel(xshLevel);}
\DoxyCodeLine{00495             \}}
\DoxyCodeLine{00496           \}}
\DoxyCodeLine{00497         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}xsheet"{}})}
\DoxyCodeLine{00498           is >> *\mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}();}
\DoxyCodeLine{00499         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}history"{}}) \{}
\DoxyCodeLine{00500           std::string historyData, s;}
\DoxyCodeLine{00501           \textcolor{keywordflow}{while} (!is.eos()) \{}
\DoxyCodeLine{00502             is >> s;}
\DoxyCodeLine{00503             historyData += s;}
\DoxyCodeLine{00504           \}}
\DoxyCodeLine{00505           \mbox{\hyperlink{class_t_content_history}{TContentHistory}} *history = \mbox{\hyperlink{class_toonz_scene_ae3c27b7146c62da156c5d5bffca0e9d7}{getContentHistory}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00506           history-\/>deserialize(QString::fromStdString(historyData));}
\DoxyCodeLine{00507         \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00508           \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(tagName + \textcolor{stringliteral}{"{} : unexpected tag"{}});}
\DoxyCodeLine{00509 }
\DoxyCodeLine{00510         \textcolor{keywordflow}{if} (!is.matchEndTag()) \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(tagName + \textcolor{stringliteral}{"{} : missing end tag"{}});}
\DoxyCodeLine{00511       \}}
\DoxyCodeLine{00512       \textcolor{keywordflow}{if} (!is.matchEndTag())}
\DoxyCodeLine{00513         \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(rootTagName + \textcolor{stringliteral}{"{} : missing end tag"{}});}
\DoxyCodeLine{00514     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00515       \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}Bad file format"{}});}
\DoxyCodeLine{00516 }
\DoxyCodeLine{00517     \mbox{\hyperlink{class_toonz_scene_a815ecf4f07a92f9f9fef693f762c1228}{setScenePath}}(fp);}
\DoxyCodeLine{00518 }
\DoxyCodeLine{00519     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_levelSet-\/>getLevelCount(); i++)}
\DoxyCodeLine{00520       m\_levelSet-\/>getLevel(i)-\/>\mbox{\hyperlink{class_t_xsh_level_a3c0052e5b6496d5bd9c697f678761e5c}{setScene}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00521 }
\DoxyCodeLine{00522   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{00523     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_i_stream_exception}{TIStreamException}}(is, e);}
\DoxyCodeLine{00524   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00525     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_i_stream_exception}{TIStreamException}}(is);}
\DoxyCodeLine{00526   \}}
\DoxyCodeLine{00527 }
\DoxyCodeLine{00528   m\_properties-\/>\mbox{\hyperlink{class_t_scene_properties_ab7c40fadf71826d7774df4cadb28f991}{cloneCamerasTo}}(\mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}()-\/>getStageObjectTree());}
\DoxyCodeLine{00529   fixBiancoProblem(\textcolor{keyword}{this}, \mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}());}
\DoxyCodeLine{00530 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00779}{TScene\+Properties\+::clone\+Cameras\+To()}}, \mbox{\hyperlink{l01169}{TIStream\+::eos()}}, \mbox{\hyperlink{l01484}{get\+Content\+History()}}, \mbox{\hyperlink{l00115}{TXsh\+Level\+::get\+Name()}}, \mbox{\hyperlink{l00120}{TXsh\+Simple\+Level\+::get\+Path()}}, \mbox{\hyperlink{l00095}{TXsh\+Level\+::get\+Simple\+Level()}}, \mbox{\hyperlink{l01026}{TIStream\+::get\+String()}}, \mbox{\hyperlink{l01190}{TIStream\+::get\+Tag\+Attribute()}}, \mbox{\hyperlink{l00957}{get\+Xsheet()}}, \mbox{\hyperlink{l00359}{TScene\+Properties\+::load\+Data()}}, \mbox{\hyperlink{l01156}{TIStream\+::match\+End\+Tag()}}, \mbox{\hyperlink{l01178}{TIStream\+::match\+Tag()}}, \mbox{\hyperlink{l00024}{TXsh\+Level\+::set\+Scene()}}, \mbox{\hyperlink{l00338}{set\+Scene\+Path()}}, \mbox{\hyperlink{l00084}{TXsh\+Level\+::set\+Type()}}, and \mbox{\hyperlink{l01277}{TIStream\+::set\+Version()}}.



Referenced by \mbox{\hyperlink{l00394}{load\+No\+Resources()}}.

\mbox{\Hypertarget{class_toonz_scene_afbc821048387af2b6fe21c0c1223060e}\label{class_toonz_scene_afbc821048387af2b6fe21c0c1223060e}} 
\index{ToonzScene@{ToonzScene}!renderFrame@{renderFrame}}
\index{renderFrame@{renderFrame}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{renderFrame()}{renderFrame()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Toonz\+Scene\+::render\+Frame (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} \&}]{ras,  }\item[{int}]{row,  }\item[{const \mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$}]{xsh,  }\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{placed\+Rect,  }\item[{const \mbox{\hyperlink{class_t_affine}{TAffine}} \&}]{world\+To\+Placed\+Aff }\end{DoxyParamCaption}) const}

Performs a camera-\/stand render of the specified xsheet in the specified placed\+Rect, with known world/placed reference change -\/ and returns the result on top of the specified 32-\/bit raster.

Performs a camera-\/stand render of the specified xsheet in the specified placed\+Rect, with known world/placed reference change -\/ and returns the result in a 32-\/bit raster. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00767                                                                     \{}
\DoxyCodeLine{00768   \textcolor{comment}{// Build reference change affines}}
\DoxyCodeLine{00769   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_affine}{TAffine}} \&placedToOglRefAff =}
\DoxyCodeLine{00770       \mbox{\hyperlink{class_t_scale}{TScale}}(ras-\/>getLx() / placedRect.getLx(),}
\DoxyCodeLine{00771              ras-\/>getLy() / placedRect.getLy()) *}
\DoxyCodeLine{00772       \mbox{\hyperlink{class_t_translation}{TTranslation}}(-\/0.5 * (placedRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} + placedRect.x1),}
\DoxyCodeLine{00773                    -\/0.5 * (placedRect.y0 + placedRect.y1));}
\DoxyCodeLine{00774 }
\DoxyCodeLine{00775   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_affine}{TAffine}} \&cameraAff =}
\DoxyCodeLine{00776       xsh-\/>\mbox{\hyperlink{class_t_xsheet_abd766f516cac9898a2a952463618a9fe}{getPlacement}}(xsh-\/>\mbox{\hyperlink{class_t_xsheet_a5dc925584e35e1678f5678b79c470959}{getStageObjectTree}}()-\/>\mbox{\hyperlink{class_t_stage_object_tree_a7d63ae5d60c3a3aacf5da58c108ac167}{getCurrentCameraId}}(), row);}
\DoxyCodeLine{00777 }
\DoxyCodeLine{00778   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_affine}{TAffine}} \&worldToOglRefAff =}
\DoxyCodeLine{00779       placedToOglRefAff * worldToPlacedAff * cameraAff.\mbox{\hyperlink{class_t_affine_a570529b96b1ec5abc711aaa9aac09ff9}{inv}}();}
\DoxyCodeLine{00780 }
\DoxyCodeLine{00781   \mbox{\hyperlink{class_t_rect_t}{TRect}} clipRect(ras-\/>getBounds());}
\DoxyCodeLine{00782 }
\DoxyCodeLine{00783 \textcolor{comment}{// fix for plastic tool applied to subxsheet}}
\DoxyCodeLine{00784 \textcolor{preprocessor}{\#ifdef MACOSX}}
\DoxyCodeLine{00785   QSurfaceFormat format;}
\DoxyCodeLine{00786   format.setProfile(QSurfaceFormat::CompatibilityProfile);}
\DoxyCodeLine{00787 }
\DoxyCodeLine{00788   std::unique\_ptr<QOffscreenSurface> surface(\textcolor{keyword}{new} QOffscreenSurface());}
\DoxyCodeLine{00789   surface-\/>setFormat(format);}
\DoxyCodeLine{00790   surface-\/>create();}
\DoxyCodeLine{00791 }
\DoxyCodeLine{00792   glPushAttrib(GL\_ALL\_ATTRIB\_BITS);}
\DoxyCodeLine{00793   glMatrixMode(GL\_MODELVIEW), glPushMatrix();}
\DoxyCodeLine{00794   glMatrixMode(GL\_PROJECTION), glPushMatrix();}
\DoxyCodeLine{00795 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00796   \mbox{\hyperlink{class_t_offline_g_l}{TOfflineGL}} ogl(ras-\/>getSize());}
\DoxyCodeLine{00797   currentOfflineGL = \&ogl;}
\DoxyCodeLine{00798   ogl.makeCurrent();}
\DoxyCodeLine{00799 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00800   \{}
\DoxyCodeLine{00801 \textcolor{preprocessor}{\#ifdef MACOSX}}
\DoxyCodeLine{00802     std::unique\_ptr<QOpenGLFramebufferObject> fb(}
\DoxyCodeLine{00803         \textcolor{keyword}{new} QOpenGLFramebufferObject(ras-\/>getLx(), ras-\/>getLy()));}
\DoxyCodeLine{00804 }
\DoxyCodeLine{00805     fb-\/>bind();}
\DoxyCodeLine{00806     assert(glGetError() == GL\_NO\_ERROR);}
\DoxyCodeLine{00807 }
\DoxyCodeLine{00808     glViewport(0, 0, ras-\/>getLx(), ras-\/>getLy());}
\DoxyCodeLine{00809 }
\DoxyCodeLine{00810     glMatrixMode(GL\_PROJECTION);}
\DoxyCodeLine{00811     glLoadIdentity();}
\DoxyCodeLine{00812     gluOrtho2D(0, ras-\/>getLx(), 0, ras-\/>getLy());}
\DoxyCodeLine{00813 }
\DoxyCodeLine{00814     glMatrixMode(GL\_MODELVIEW);}
\DoxyCodeLine{00815     glLoadIdentity();}
\DoxyCodeLine{00816 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00817     glTranslated(0.5 * ras-\/>getLx(), 0.5 * ras-\/>getLy(), 0.0);}
\DoxyCodeLine{00818 }
\DoxyCodeLine{00819     glClearColor(0.0f, 0.0f, 0.0f, 0.0f);}
\DoxyCodeLine{00820     glClear(GL\_COLOR\_BUFFER\_BIT);}
\DoxyCodeLine{00821 }
\DoxyCodeLine{00822     \mbox{\hyperlink{class_image_painter_1_1_visual_settings}{ImagePainter::VisualSettings}} vs;}
\DoxyCodeLine{00823     vs.\mbox{\hyperlink{class_image_painter_1_1_visual_settings_aafe14ec520424843ecd9aca4abf02bf0}{m\_plasticVisualSettings}}.\mbox{\hyperlink{struct_plastic_visual_settings_a0eedc983dcb0d83144b509b10f602116}{m\_drawMeshesWireframe}} = \textcolor{keyword}{false};}
\DoxyCodeLine{00824 }
\DoxyCodeLine{00825     \mbox{\hyperlink{class_stage_1_1_raster_painter}{Stage::RasterPainter}} painter(ras-\/>getSize(), worldToOglRefAff, clipRect, vs,}
\DoxyCodeLine{00826                                  \textcolor{keyword}{false});}
\DoxyCodeLine{00827     \mbox{\hyperlink{namespace_stage_a28ab15860508cccd59a31483a9b8afa1}{Stage::visit}}(painter, \textcolor{keyword}{const\_cast<}\mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *\textcolor{keyword}{>}(\textcolor{keyword}{this}),}
\DoxyCodeLine{00828                  \textcolor{keyword}{const\_cast<}\mbox{\hyperlink{class_t_xsheet}{TXsheet}} *\textcolor{keyword}{>}(xsh), row);}
\DoxyCodeLine{00829 }
\DoxyCodeLine{00830     painter.flushRasterImages();}
\DoxyCodeLine{00831     glFlush();}
\DoxyCodeLine{00832 \textcolor{preprocessor}{\#ifdef MACOSX}}
\DoxyCodeLine{00833     QImage img =}
\DoxyCodeLine{00834         fb-\/>toImage().scaled(QSize(ras-\/>getLx(), ras-\/>getLy()),}
\DoxyCodeLine{00835                              Qt::IgnoreAspectRatio, Qt::SmoothTransformation);}
\DoxyCodeLine{00836 }
\DoxyCodeLine{00837     \textcolor{keywordtype}{int} wrap      = ras-\/>getLx() * \textcolor{keyword}{sizeof}(TPixel32);}
\DoxyCodeLine{00838     uchar *srcPix = img.bits();}
\DoxyCodeLine{00839     uchar *dstPix = ras-\/>getRawData() + wrap * (ras-\/>getLy() -\/ 1);}
\DoxyCodeLine{00840     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < ras-\/>getLy(); y++) \{}
\DoxyCodeLine{00841       memcpy(dstPix, srcPix, wrap);}
\DoxyCodeLine{00842       dstPix -\/= wrap;}
\DoxyCodeLine{00843       srcPix += wrap;}
\DoxyCodeLine{00844     \}}
\DoxyCodeLine{00845     fb-\/>release();}
\DoxyCodeLine{00846     assert(glGetError() == GL\_NO\_ERROR);}
\DoxyCodeLine{00847 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00848     \mbox{\hyperlink{namespace_t_rop_ae5fd1fb0c2f625e1da14fe92ae0e5122}{TRop::over}}(ras, ogl.getRaster());}
\DoxyCodeLine{00849 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00850   \}}
\DoxyCodeLine{00851 \textcolor{preprocessor}{\#ifdef MACOSX}}
\DoxyCodeLine{00852   glMatrixMode(GL\_MODELVIEW), glPopMatrix();}
\DoxyCodeLine{00853   glMatrixMode(GL\_PROJECTION), glPopMatrix();}
\DoxyCodeLine{00854 }
\DoxyCodeLine{00855   glPopAttrib();}
\DoxyCodeLine{00856 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00857   ogl.doneCurrent();}
\DoxyCodeLine{00858   currentOfflineGL = 0;}
\DoxyCodeLine{00859 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00860 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00508}{TStage\+Object\+Tree\+::get\+Current\+Camera\+Id()}}, \mbox{\hyperlink{l00555}{TXsheet\+::get\+Placement()}}, \mbox{\hyperlink{l00549}{TXsheet\+::get\+Stage\+Object\+Tree()}}, \mbox{\hyperlink{l00055}{TAffine\+::inv()}}, \mbox{\hyperlink{l00030}{Plastic\+Visual\+Settings\+::m\+\_\+draw\+Meshes\+Wireframe}}, \mbox{\hyperlink{l00053}{Image\+Painter\+::\+Visual\+Settings\+::m\+\_\+plastic\+Visual\+Settings}}, \mbox{\hyperlink{l00285}{TRop\+::over()}}, \mbox{\hyperlink{l00911}{Stage\+::visit()}}, and \mbox{\hyperlink{l00557}{TRect\+T$<$ T $>$\+::x0}}.

\mbox{\Hypertarget{class_toonz_scene_a5839f9331bbd43c14fcf51d700e731f1}\label{class_toonz_scene_a5839f9331bbd43c14fcf51d700e731f1}} 
\index{ToonzScene@{ToonzScene}!renderFrame@{renderFrame}}
\index{renderFrame@{renderFrame}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{renderFrame()}{renderFrame()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Toonz\+Scene\+::render\+Frame (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} \&}]{ras,  }\item[{int}]{row,  }\item[{const \mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$}]{xsh = {\ttfamily 0},  }\item[{bool}]{check\+Flags = {\ttfamily true} }\end{DoxyParamCaption}) const}

Performs a camera-\/stand render of the specified xsheet (or the main one in case none was specified), on its currently selected camera, and returns the result on top of the specified 32-\/bit raster. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00712                                                     \{}
\DoxyCodeLine{00713   \textcolor{keywordflow}{if} (xsh == 0) xsh = \mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}();}
\DoxyCodeLine{00714 }
\DoxyCodeLine{00715   \mbox{\hyperlink{class_t_camera}{TCamera}} *camera        = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a5dc925584e35e1678f5678b79c470959}{getStageObjectTree}}()-\/>\mbox{\hyperlink{class_t_stage_object_tree_ada891076099087125f94f933cd49d592}{getCurrentCamera}}();}
\DoxyCodeLine{00716   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} cameraRes   = camera-\/>\mbox{\hyperlink{class_t_camera_a9a7c573e7a2c397ffae4b747809ea2a5}{getRes}}();}
\DoxyCodeLine{00717   \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}} cameraSize = camera-\/>\mbox{\hyperlink{class_t_camera_a6f561eca912177c2150b3e57816f02f6}{getSize}}();}
\DoxyCodeLine{00718 }
\DoxyCodeLine{00719   \textcolor{comment}{// voglio che la camera sia completamente contenuta dentro raster}}
\DoxyCodeLine{00720   \textcolor{keywordtype}{double} sx = (double)ras-\/>getLx() / (double)cameraSize.lx;}
\DoxyCodeLine{00721   \textcolor{keywordtype}{double} sy = (\textcolor{keywordtype}{double})ras-\/>getLy() / (double)cameraSize.ly;}
\DoxyCodeLine{00722   \textcolor{keywordtype}{double} sc = (sx < sy) ? sx : sy;}
\DoxyCodeLine{00723 }
\DoxyCodeLine{00724   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_affine}{TAffine}} \&cameraAff =}
\DoxyCodeLine{00725       xsh-\/>\mbox{\hyperlink{class_t_xsheet_abd766f516cac9898a2a952463618a9fe}{getPlacement}}(xsh-\/>\mbox{\hyperlink{class_t_xsheet_a5dc925584e35e1678f5678b79c470959}{getStageObjectTree}}()-\/>\mbox{\hyperlink{class_t_stage_object_tree_a7d63ae5d60c3a3aacf5da58c108ac167}{getCurrentCameraId}}(), row);}
\DoxyCodeLine{00726   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_affine}{TAffine}} \&viewAff = \mbox{\hyperlink{class_t_scale}{TScale}}(sc / \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}}) * cameraAff.\mbox{\hyperlink{class_t_affine_a570529b96b1ec5abc711aaa9aac09ff9}{inv}}();}
\DoxyCodeLine{00727 }
\DoxyCodeLine{00728   \mbox{\hyperlink{class_t_rect_t}{TRect}} clipRect(ras-\/>getBounds());}
\DoxyCodeLine{00729   \mbox{\hyperlink{class_t_offline_g_l}{TOfflineGL}} ogl(ras-\/>getSize());}
\DoxyCodeLine{00730   currentOfflineGL = \&ogl;}
\DoxyCodeLine{00731 }
\DoxyCodeLine{00732   ogl.makeCurrent();}
\DoxyCodeLine{00733   \{}
\DoxyCodeLine{00734     glTranslated(0.5 * ras-\/>getLx(), 0.5 * ras-\/>getLy(), 0.0);}
\DoxyCodeLine{00735 }
\DoxyCodeLine{00736     glClearColor(0.0f, 0.0f, 0.0f, 0.0f);}
\DoxyCodeLine{00737     glClear(GL\_COLOR\_BUFFER\_BIT);}
\DoxyCodeLine{00738 }
\DoxyCodeLine{00739     \mbox{\hyperlink{class_image_painter_1_1_visual_settings}{ImagePainter::VisualSettings}} vs;}
\DoxyCodeLine{00740     vs.\mbox{\hyperlink{class_image_painter_1_1_visual_settings_aafe14ec520424843ecd9aca4abf02bf0}{m\_plasticVisualSettings}}.\mbox{\hyperlink{struct_plastic_visual_settings_a0eedc983dcb0d83144b509b10f602116}{m\_drawMeshesWireframe}} = \textcolor{keyword}{false};}
\DoxyCodeLine{00741     vs.m\_forSceneIcon                                = \textcolor{keyword}{true};}
\DoxyCodeLine{00742 }
\DoxyCodeLine{00743     \mbox{\hyperlink{class_stage_1_1_raster_painter}{Stage::RasterPainter}} painter(ras-\/>getSize(), viewAff, clipRect, vs,}
\DoxyCodeLine{00744                                  checkFlags);}
\DoxyCodeLine{00745     \mbox{\hyperlink{namespace_stage_a28ab15860508cccd59a31483a9b8afa1}{Stage::visit}}(painter, \textcolor{keyword}{const\_cast<}\mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *\textcolor{keyword}{>}(\textcolor{keyword}{this}),}
\DoxyCodeLine{00746                  \textcolor{keyword}{const\_cast<}\mbox{\hyperlink{class_t_xsheet}{TXsheet}} *\textcolor{keyword}{>}(xsh), row);}
\DoxyCodeLine{00747 }
\DoxyCodeLine{00748     painter.flushRasterImages();}
\DoxyCodeLine{00749     glFlush();}
\DoxyCodeLine{00750 }
\DoxyCodeLine{00751     \mbox{\hyperlink{namespace_t_rop_ae5fd1fb0c2f625e1da14fe92ae0e5122}{TRop::over}}(ras, ogl.getRaster());}
\DoxyCodeLine{00752   \}}
\DoxyCodeLine{00753   ogl.doneCurrent();}
\DoxyCodeLine{00754 }
\DoxyCodeLine{00755   currentOfflineGL = 0;}
\DoxyCodeLine{00756 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00277}{TStage\+Object\+Tree\+::get\+Current\+Camera()}}, \mbox{\hyperlink{l00508}{TStage\+Object\+Tree\+::get\+Current\+Camera\+Id()}}, \mbox{\hyperlink{l00555}{TXsheet\+::get\+Placement()}}, \mbox{\hyperlink{l00072}{TCamera\+::get\+Res()}}, \mbox{\hyperlink{l00055}{TCamera\+::get\+Size()}}, \mbox{\hyperlink{l00549}{TXsheet\+::get\+Stage\+Object\+Tree()}}, \mbox{\hyperlink{l00957}{get\+Xsheet()}}, \mbox{\hyperlink{l00037}{Stage\+::inch}}, \mbox{\hyperlink{l00055}{TAffine\+::inv()}}, \mbox{\hyperlink{l00030}{Plastic\+Visual\+Settings\+::m\+\_\+draw\+Meshes\+Wireframe}}, \mbox{\hyperlink{l00053}{Image\+Painter\+::\+Visual\+Settings\+::m\+\_\+plastic\+Visual\+Settings}}, \mbox{\hyperlink{l00285}{TRop\+::over()}}, and \mbox{\hyperlink{l00911}{Stage\+::visit()}}.



Referenced by \mbox{\hyperlink{l00170}{texture\+\_\+utils\+::get\+Texture\+Data()}}.

\mbox{\Hypertarget{class_toonz_scene_ac65f5b13baf094ba58e2e74c6949df61}\label{class_toonz_scene_ac65f5b13baf094ba58e2e74c6949df61}} 
\index{ToonzScene@{ToonzScene}!save@{save}}
\index{save@{save}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{save()}{save()}}
{\footnotesize\ttfamily void Toonz\+Scene\+::save (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path,  }\item[{\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$}]{subxsheet = {\ttfamily 0} }\end{DoxyParamCaption})}

Saves the scene (or a sub-\/xsheet) at the specified path. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00590                                                           \{}
\DoxyCodeLine{00591   \mbox{\hyperlink{class_t_file_path}{TFilePath}} oldScenePath = \mbox{\hyperlink{class_toonz_scene_ad42b52b671b094f66e003c4b7ebefd45}{getScenePath}}();}
\DoxyCodeLine{00592   \mbox{\hyperlink{class_t_file_path}{TFilePath}} newScenePath = fp;}
\DoxyCodeLine{00593 }
\DoxyCodeLine{00594   \mbox{\hyperlink{class_camera_redirection}{CameraRedirection}} redir(\textcolor{keyword}{this}, subxsh);}
\DoxyCodeLine{00595 }
\DoxyCodeLine{00596   \textcolor{keywordtype}{bool} wasUntitled = \mbox{\hyperlink{class_toonz_scene_a53cbaf09f551658479eb743e153ab6bc}{isUntitled}}();}
\DoxyCodeLine{00597 }
\DoxyCodeLine{00598   \mbox{\hyperlink{class_toonz_scene_a815ecf4f07a92f9f9fef693f762c1228}{setScenePath}}(fp);}
\DoxyCodeLine{00599 }
\DoxyCodeLine{00600   \mbox{\hyperlink{class_t_file_status}{TFileStatus}} fs(newScenePath);}
\DoxyCodeLine{00601   \textcolor{keywordflow}{if} (fs.doesExist() \&\& !fs.isWritable())}
\DoxyCodeLine{00602     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_system_exception}{TSystemException}}(newScenePath,}
\DoxyCodeLine{00603                            \textcolor{stringliteral}{"{}The scene cannot be saved: it is a read only "{}}}
\DoxyCodeLine{00604                            \textcolor{stringliteral}{"{}scene.\(\backslash\)n All resources have been saved."{}});}
\DoxyCodeLine{00605 }
\DoxyCodeLine{00606   \mbox{\hyperlink{class_t_file_path}{TFilePath}} scenePath = \mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(fp);}
\DoxyCodeLine{00607   \mbox{\hyperlink{class_t_file_path}{TFilePath}} scenePathTemp(scenePath.getWideString() +}
\DoxyCodeLine{00608                           QString(\textcolor{stringliteral}{"{}.tmp"{}}).toStdWString());}
\DoxyCodeLine{00609 }
\DoxyCodeLine{00610   \textcolor{keywordflow}{if} (Preferences::instance()-\/>isBackupEnabled() \&\&}
\DoxyCodeLine{00611       oldScenePath == newScenePath \&\& \mbox{\hyperlink{class_t_file_status}{TFileStatus}}(scenePath).doesExist())}
\DoxyCodeLine{00612     saveBackup(scenePath);}
\DoxyCodeLine{00613 }
\DoxyCodeLine{00614   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(scenePathTemp).doesExist())}
\DoxyCodeLine{00615     TSystem::removeFileOrLevel(scenePathTemp);}
\DoxyCodeLine{00616 }
\DoxyCodeLine{00617   \textcolor{comment}{//  TSystem::touchFile(scenePath);}}
\DoxyCodeLine{00618   TSystem::touchFile(scenePathTemp);}
\DoxyCodeLine{00619   makeSceneIcon(\textcolor{keyword}{this});}
\DoxyCodeLine{00620 }
\DoxyCodeLine{00621   \textcolor{comment}{// TOStream os(scenePath, compressionEnabled);}}
\DoxyCodeLine{00622   \textcolor{comment}{//  TOStream os(scenePath, false);}}
\DoxyCodeLine{00623   \{}
\DoxyCodeLine{00624     \mbox{\hyperlink{class_t_o_stream}{TOStream}} os(scenePathTemp, \textcolor{keyword}{false});}
\DoxyCodeLine{00625     \textcolor{keywordflow}{if} (!os.checkStatus())}
\DoxyCodeLine{00626       \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}Could not open temporary save file"{}});}
\DoxyCodeLine{00627 }
\DoxyCodeLine{00628     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = subxsh;}
\DoxyCodeLine{00629     \textcolor{keywordflow}{if} (xsh == 0) xsh = m\_childStack-\/>\mbox{\hyperlink{class_child_stack_acc3acc547e134c1571b01ec5e75e9705}{getTopXsheet}}();}
\DoxyCodeLine{00630 }
\DoxyCodeLine{00631     std::map<std::string, std::string> attr;}
\DoxyCodeLine{00632     attr[\textcolor{stringliteral}{"{}version"{}}] =}
\DoxyCodeLine{00633         (QString::number(l\_currentVersion.first) +}
\DoxyCodeLine{00634          \textcolor{stringliteral}{"{}."{}}  \textcolor{comment}{// From now on, version numbers in saved files will have}}
\DoxyCodeLine{00635          + QString::number(}
\DoxyCodeLine{00636                l\_currentVersion.second))  \textcolor{comment}{// the signature "{}MAJOR.MINOR"{}, where:}}
\DoxyCodeLine{00637             .toStdString();               \textcolor{comment}{//}}
\DoxyCodeLine{00638     attr[\textcolor{stringliteral}{"{}framecount"{}}] =}
\DoxyCodeLine{00639         QString::number(  \textcolor{comment}{//    MAJOR = Toonz version number * 10 (eg 7.0 => 70)}}
\DoxyCodeLine{00640             xsh-\/>\mbox{\hyperlink{class_t_xsheet_a12a62da7dc04395088112e492d73374f}{getFrameCount}}())}
\DoxyCodeLine{00641             .toStdString();  \textcolor{comment}{//    MINOR = Reset to 0 after each major}}
\DoxyCodeLine{00642                              \textcolor{comment}{//    increment,}}
\DoxyCodeLine{00643                              \textcolor{comment}{//    and}}
\DoxyCodeLine{00644     \textcolor{comment}{//            advancing on its own when fixing bugs.}}
\DoxyCodeLine{00645     os.openChild(\textcolor{stringliteral}{"{}tnz"{}}, attr);}
\DoxyCodeLine{00646 }
\DoxyCodeLine{00647     os.child(\textcolor{stringliteral}{"{}generator"{}}) << TEnv::getApplicationFullName();}
\DoxyCodeLine{00648     os.openChild(\textcolor{stringliteral}{"{}properties"{}});}
\DoxyCodeLine{00649     m\_properties-\/>saveData(os);}
\DoxyCodeLine{00650     os.closeChild();}
\DoxyCodeLine{00651 }
\DoxyCodeLine{00652     \textcolor{keywordflow}{if} (subxsh) \{}
\DoxyCodeLine{00653       std::set<TXshLevel *> saveSet;}
\DoxyCodeLine{00654       subxsh-\/>getUsedLevels(saveSet);}
\DoxyCodeLine{00655       m\_levelSet-\/>\mbox{\hyperlink{class_t_level_set_a906b8261a4386f8081c038ebe11aec1c}{setSaveSet}}(saveSet);}
\DoxyCodeLine{00656     \}}
\DoxyCodeLine{00657     os.openChild(\textcolor{stringliteral}{"{}levelSet"{}});}
\DoxyCodeLine{00658     m\_levelSet-\/>saveData(os);}
\DoxyCodeLine{00659     os.closeChild();}
\DoxyCodeLine{00660     std::set<TXshLevel *> emptySaveSet;}
\DoxyCodeLine{00661     m\_levelSet-\/>\mbox{\hyperlink{class_t_level_set_a906b8261a4386f8081c038ebe11aec1c}{setSaveSet}}(emptySaveSet);}
\DoxyCodeLine{00662 }
\DoxyCodeLine{00663     os.openChild(\textcolor{stringliteral}{"{}xsheet"{}});}
\DoxyCodeLine{00664     os << *xsh;}
\DoxyCodeLine{00665     os.closeChild();}
\DoxyCodeLine{00666 }
\DoxyCodeLine{00667     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_toonz_scene_ae3c27b7146c62da156c5d5bffca0e9d7}{getContentHistory}}()) \{}
\DoxyCodeLine{00668       os.openChild(\textcolor{stringliteral}{"{}history"{}});}
\DoxyCodeLine{00669       QString data = \mbox{\hyperlink{class_toonz_scene_ae3c27b7146c62da156c5d5bffca0e9d7}{getContentHistory}}()-\/>\mbox{\hyperlink{class_t_content_history_aac53dd08c6fc7fa07ba1c8c5beb51131}{serialize}}();}
\DoxyCodeLine{00670       \textcolor{keywordtype}{int} i        = 0, j;}
\DoxyCodeLine{00671       \textcolor{comment}{// non scrivo tutta la std::string di seguito per evitare problemi se}}
\DoxyCodeLine{00672       \textcolor{comment}{// diventa}}
\DoxyCodeLine{00673       \textcolor{comment}{// troppo lunga. Cerco di spezzarla in modo che sia "{}bella da leggere"{} nel}}
\DoxyCodeLine{00674       \textcolor{comment}{// tnz}}
\DoxyCodeLine{00675       \textcolor{keywordflow}{while} ((j = data.indexOf(\textcolor{stringliteral}{"{}||"{}}, i)) >= i) \{}
\DoxyCodeLine{00676         os << data.mid(i, j -\/ i + 1).toStdWString();}
\DoxyCodeLine{00677         os.cr();}
\DoxyCodeLine{00678         i = j + 1;}
\DoxyCodeLine{00679       \}}
\DoxyCodeLine{00680       os << data.mid(i).toStdWString();}
\DoxyCodeLine{00681       os.closeChild();}
\DoxyCodeLine{00682     \}}
\DoxyCodeLine{00683 }
\DoxyCodeLine{00684     os.closeChild();}
\DoxyCodeLine{00685     \textcolor{keywordtype}{bool} status = os.checkStatus();}
\DoxyCodeLine{00686     \textcolor{keywordflow}{if} (!status) \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}Could not complete the temporary save"{}});}
\DoxyCodeLine{00687   \}}
\DoxyCodeLine{00688 }
\DoxyCodeLine{00689   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(scenePathTemp).doesExist())}
\DoxyCodeLine{00690     TSystem::renameFile(scenePath, scenePathTemp, \textcolor{keyword}{true});}
\DoxyCodeLine{00691 }
\DoxyCodeLine{00692   \textcolor{keywordflow}{if} (subxsh) \{}
\DoxyCodeLine{00693     \mbox{\hyperlink{class_toonz_scene_a815ecf4f07a92f9f9fef693f762c1228}{setScenePath}}(oldScenePath);}
\DoxyCodeLine{00694     \textcolor{keywordflow}{if} (wasUntitled) \mbox{\hyperlink{class_toonz_scene_ad5e0cf52431bcf95e54faa416f0fc21d}{setUntitled}}();}
\DoxyCodeLine{00695   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00696     \textcolor{keywordflow}{if} (wasUntitled) deleteUntitledScene(oldScenePath.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}());}
\DoxyCodeLine{00697   \}}
\DoxyCodeLine{00698   \textcolor{comment}{// update the last saved version}}
\DoxyCodeLine{00699   setVersionNumber(l\_currentVersion);}
\DoxyCodeLine{00700 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00583}{TOStream\+::check\+Status()}}, \mbox{\hyperlink{l00482}{TOStream\+::child()}}, \mbox{\hyperlink{l00520}{TOStream\+::close\+Child()}}, \mbox{\hyperlink{l00471}{TOStream\+::cr()}}, \mbox{\hyperlink{l01231}{decode\+File\+Path()}}, \mbox{\hyperlink{l01484}{get\+Content\+History()}}, \mbox{\hyperlink{l00229}{TXsheet\+::get\+Frame\+Count()}}, \mbox{\hyperlink{l00683}{TFile\+Path\+::get\+Parent\+Dir()}}, \mbox{\hyperlink{l00059}{get\+Scene\+Path()}}, \mbox{\hyperlink{l00142}{Child\+Stack\+::get\+Top\+Xsheet()}}, \mbox{\hyperlink{l00489}{TXsheet\+::get\+Used\+Levels()}}, \mbox{\hyperlink{l00345}{is\+Untitled()}}, \mbox{\hyperlink{class_t_o_stream_a38fe0f56d934f1c25e2b5d8156415673}{TOStream\+::open\+Child()}}, \mbox{\hyperlink{l00180}{TContent\+History\+::serialize()}}, \mbox{\hyperlink{l00114}{TLevel\+Set\+::set\+Save\+Set()}}, \mbox{\hyperlink{l00338}{set\+Scene\+Path()}}, and \mbox{\hyperlink{l00538}{set\+Untitled()}}.

\mbox{\Hypertarget{class_toonz_scene_a58a128eb8be9f67ead32ac5c674a51f1}\label{class_toonz_scene_a58a128eb8be9f67ead32ac5c674a51f1}} 
\index{ToonzScene@{ToonzScene}!setIsLoading@{setIsLoading}}
\index{setIsLoading@{setIsLoading}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{setIsLoading()}{setIsLoading()}}
{\footnotesize\ttfamily void Toonz\+Scene\+::set\+Is\+Loading (\begin{DoxyParamCaption}\item[{bool}]{is\+Loading }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00263 \{ m\_isLoading = isLoading; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_scene_aa7aac33fc53c47ea5baff597e5f18a9b}\label{class_toonz_scene_aa7aac33fc53c47ea5baff597e5f18a9b}} 
\index{ToonzScene@{ToonzScene}!setProject@{setProject}}
\index{setProject@{setProject}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{setProject()}{setProject()}}
{\footnotesize\ttfamily void Toonz\+Scene\+::set\+Project (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_project}{TProject}} $\ast$}]{project }\end{DoxyParamCaption})}



Associates a scene to a project. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00322                                              \{}
\DoxyCodeLine{00323   assert(project);}
\DoxyCodeLine{00324 }
\DoxyCodeLine{00325   \textcolor{keywordflow}{if} (project != m\_project) \{}
\DoxyCodeLine{00326     \textcolor{keywordflow}{if} (project) project-\/>addRef();}
\DoxyCodeLine{00327     \textcolor{keywordflow}{if} (m\_project) m\_project-\/>release();}
\DoxyCodeLine{00328     m\_project = project;}
\DoxyCodeLine{00329   \}}
\DoxyCodeLine{00330 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00394}{load\+No\+Resources()}}.

\mbox{\Hypertarget{class_toonz_scene_a8c168c9551d1ac99ad3ce4849d36a464}\label{class_toonz_scene_a8c168c9551d1ac99ad3ce4849d36a464}} 
\index{ToonzScene@{ToonzScene}!setSceneName@{setSceneName}}
\index{setSceneName@{setSceneName}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{setSceneName()}{setSceneName()}}
{\footnotesize\ttfamily void Toonz\+Scene\+::set\+Scene\+Name (\begin{DoxyParamCaption}\item[{std\+::wstring}]{name }\end{DoxyParamCaption})}



Sets the scene\textquotesingle{}s name. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00302                                              \{}
\DoxyCodeLine{00303   m\_scenePath = m\_scenePath.\mbox{\hyperlink{class_t_file_path_a3ebf9ced558cfef97a60bba536b23c6f}{withName}}(name);}
\DoxyCodeLine{00304 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00802}{TFile\+Path\+::with\+Name()}}.

\mbox{\Hypertarget{class_toonz_scene_a815ecf4f07a92f9f9fef693f762c1228}\label{class_toonz_scene_a815ecf4f07a92f9f9fef693f762c1228}} 
\index{ToonzScene@{ToonzScene}!setScenePath@{setScenePath}}
\index{setScenePath@{setScenePath}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{setScenePath()}{setScenePath()}}
{\footnotesize\ttfamily void Toonz\+Scene\+::set\+Scene\+Path (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{p }\end{DoxyParamCaption})}



Sets the scene\textquotesingle{}s file path. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00338                                                  \{}
\DoxyCodeLine{00339   m\_scenePath  = fp;}
\DoxyCodeLine{00340   m\_isUntitled = \textcolor{keyword}{false};}
\DoxyCodeLine{00341 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00443}{load\+Tnz\+File()}}, and \mbox{\hyperlink{l00590}{save()}}.

\mbox{\Hypertarget{class_toonz_scene_ad5e0cf52431bcf95e54faa416f0fc21d}\label{class_toonz_scene_ad5e0cf52431bcf95e54faa416f0fc21d}} 
\index{ToonzScene@{ToonzScene}!setUntitled@{setUntitled}}
\index{setUntitled@{setUntitled}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{setUntitled()}{setUntitled()}}
{\footnotesize\ttfamily void Toonz\+Scene\+::set\+Untitled (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Marks the scene as explicitly untitled. 

An untitled scene generates unique temporary paths hosting any newly created scene content. Said content is then moved once a proper path is specified by the user. ~\newline
 
\begin{DoxyCode}{0}
\DoxyCodeLine{00538                              \{}
\DoxyCodeLine{00539   m\_isUntitled               = \textcolor{keyword}{true};}
\DoxyCodeLine{00540   \textcolor{keyword}{const} std::string baseName = \textcolor{stringliteral}{"{}untitled"{}};}
\DoxyCodeLine{00541   \mbox{\hyperlink{class_t_file_path}{TFilePath}} tempDir          = getUntitledScenesDir();}
\DoxyCodeLine{00542   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(tempDir).doesExist() == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{00543     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00544       TSystem::mkDir(tempDir);}
\DoxyCodeLine{00545     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00546     \}}
\DoxyCodeLine{00547   \}}
\DoxyCodeLine{00548 }
\DoxyCodeLine{00549   std::string name = baseName;}
\DoxyCodeLine{00550   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(tempDir + name).doesExist()) \{}
\DoxyCodeLine{00551     \textcolor{keywordtype}{int} count = 2;}
\DoxyCodeLine{00552     \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{00553       name = baseName + std::to\_string(count++);}
\DoxyCodeLine{00554     \} \textcolor{keywordflow}{while} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(tempDir + name).doesExist());}
\DoxyCodeLine{00555   \}}
\DoxyCodeLine{00556   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = tempDir + name + (name + \textcolor{stringliteral}{"{}.tnz"{}});}
\DoxyCodeLine{00557   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00558     TSystem::touchParentDir(fp);}
\DoxyCodeLine{00559   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00560     assert(0);}
\DoxyCodeLine{00561   \}}
\DoxyCodeLine{00562   m\_scenePath = fp;}
\DoxyCodeLine{00563 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01106}{TProject\+Manager\+::initialize\+Scene()}}, and \mbox{\hyperlink{l00590}{save()}}.

\mbox{\Hypertarget{class_toonz_scene_a335bc842d433ec40bcdc697821916cf8}\label{class_toonz_scene_a335bc842d433ec40bcdc697821916cf8}} 
\index{ToonzScene@{ToonzScene}!setVersionNumber@{setVersionNumber}}
\index{setVersionNumber@{setVersionNumber}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{setVersionNumber()}{setVersionNumber()}}
{\footnotesize\ttfamily void Toonz\+Scene\+::set\+Version\+Number (\begin{DoxyParamCaption}\item[{Version\+Number}]{version }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00256 \{ m\_versionNumber = version; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_scene_a190e3b95a8a40384fcd3a15a116cc651}\label{class_toonz_scene_a190e3b95a8a40384fcd3a15a116cc651}} 
\index{ToonzScene@{ToonzScene}!shiftCameraX@{shiftCameraX}}
\index{shiftCameraX@{shiftCameraX}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{shiftCameraX()}{shiftCameraX()}}
{\footnotesize\ttfamily double Toonz\+Scene\+::shift\+CameraX (\begin{DoxyParamCaption}\item[{double}]{val }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01570                                           \{}
\DoxyCodeLine{01571   \mbox{\hyperlink{class_t_stage_object_tree}{TStageObjectTree}} *tree = \mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}()-\/>\mbox{\hyperlink{class_t_xsheet_a5dc925584e35e1678f5678b79c470959}{getStageObjectTree}}();}
\DoxyCodeLine{01572 }
\DoxyCodeLine{01573   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *stageObject = tree-\/>\mbox{\hyperlink{class_t_stage_object_tree_a688e5b4f2f5730afb0cb10264f13a113}{getStageObject}}(tree-\/>\mbox{\hyperlink{class_t_stage_object_tree_a7d63ae5d60c3a3aacf5da58c108ac167}{getCurrentCameraId}}());}
\DoxyCodeLine{01574   \mbox{\hyperlink{class_t_point_t}{TPointD}} ret               = stageObject-\/>\mbox{\hyperlink{class_t_stage_object_acca88f20b53a77f07ef090cc871ce43a}{getOffset}}();}
\DoxyCodeLine{01575   stageObject-\/>\mbox{\hyperlink{class_t_stage_object_a6e3e9725839b34216225a943cbfb3f0a}{setOffset}}(\mbox{\hyperlink{class_t_point_t}{TPointD}}(ret.x + val, ret.y));}
\DoxyCodeLine{01576   \textcolor{keywordflow}{return} ret.x;}
\DoxyCodeLine{01577 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_scene_a9304aa6099f4b83540c0261e64d17a25}\label{class_toonz_scene_a9304aa6099f4b83540c0261e64d17a25}} 
\index{ToonzScene@{ToonzScene}!updateSoundColumnFrameRate@{updateSoundColumnFrameRate}}
\index{updateSoundColumnFrameRate@{updateSoundColumnFrameRate}!ToonzScene@{ToonzScene}}
\doxysubsubsection{\texorpdfstring{updateSoundColumnFrameRate()}{updateSoundColumnFrameRate()}}
{\footnotesize\ttfamily void Toonz\+Scene\+::update\+Sound\+Column\+Frame\+Rate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Set output properties frame\+Rate to all sound column of scene. 
\begin{DoxyCode}{0}
\DoxyCodeLine{01528                                             \{}
\DoxyCodeLine{01529   std::vector<TXshSoundColumn *> soundColumns;}
\DoxyCodeLine{01530   \mbox{\hyperlink{class_toonz_scene_ac8bd378d5af03124df8ee54f216a09d3}{getSoundColumns}}(soundColumns);}
\DoxyCodeLine{01531 }
\DoxyCodeLine{01532   \mbox{\hyperlink{class_t_scene_properties}{TSceneProperties}} *properties = \mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}();}
\DoxyCodeLine{01533   \textcolor{keywordflow}{if} (!properties) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01534 }
\DoxyCodeLine{01535   \mbox{\hyperlink{class_t_output_properties}{TOutputProperties}} *outputProperties = properties-\/>\mbox{\hyperlink{class_t_scene_properties_abea7b4b8e4f0cedbf753b26ec30b5331}{getOutputProperties}}();}
\DoxyCodeLine{01536   \textcolor{keywordflow}{if} (!outputProperties) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01537 }
\DoxyCodeLine{01538   \textcolor{keywordtype}{double} frameRate = outputProperties-\/>\mbox{\hyperlink{class_t_output_properties_a0d9662971bc33097aa1b55111965b967}{getFrameRate}}();}
\DoxyCodeLine{01539 }
\DoxyCodeLine{01540   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01541   \textcolor{keywordflow}{for} (i = 0; i < (int)soundColumns.size(); i++)}
\DoxyCodeLine{01542     soundColumns[i]-\/>updateFrameRate(frameRate);}
\DoxyCodeLine{01543 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00175}{TOutput\+Properties\+::get\+Frame\+Rate()}}, \mbox{\hyperlink{l00145}{TScene\+Properties\+::get\+Output\+Properties()}}, \mbox{\hyperlink{l00087}{get\+Properties()}}, and \mbox{\hyperlink{l01492}{get\+Sound\+Columns()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonz/toonzscene.\+h\item 
E\+:/opentoonz/toonz/sources/toonzlib/toonzscene.\+cpp\end{DoxyCompactItemize}
