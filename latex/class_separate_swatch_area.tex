\hypertarget{class_separate_swatch_area}{}\doxysection{Separate\+Swatch\+Area Class Reference}
\label{class_separate_swatch_area}\index{SeparateSwatchArea@{SeparateSwatchArea}}
Inheritance diagram for Separate\+Swatch\+Area\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_separate_swatch_area}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_separate_swatch_area_a346688fe1b39b3c9b0ef980b4c616995}{Separate\+Swatch\+Area}} (\mbox{\hyperlink{class_separate_swatch}{Separate\+Swatch}} $\ast$parent, SWATCH\+\_\+\+TYPE type)
\item 
void \mbox{\hyperlink{class_separate_swatch_area_a3611ee3dbe870c2d4819097e205cec77}{update\+Raster}} (bool dragging=false)
\item 
void \mbox{\hyperlink{class_separate_swatch_area_a5026aa6c0ae899bde5caaa26852e5be7}{update\+Separated}} (bool dragging=false)
\item 
void \mbox{\hyperlink{class_separate_swatch_area_a22b0d7e36205606e5abeb466bd324042}{set\+Transp\+Color}} (TPixel32 \&line\+Color, bool show\+Alpha=false)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_separate_swatch_area_a84757db96449e74349b44d4f8645b853}{paint\+Event}} (QPaint\+Event $\ast$event)
\item 
void \mbox{\hyperlink{class_separate_swatch_area_a6a4cf3b054ac581f0a3a5c1ac9984d83}{mouse\+Press\+Event}} (QMouse\+Event $\ast$event)
\item 
void \mbox{\hyperlink{class_separate_swatch_area_aee13cd19912d17bf237c4f53a3989d0f}{mouse\+Move\+Event}} (QMouse\+Event $\ast$event)
\item 
void \mbox{\hyperlink{class_separate_swatch_area_a0c7b4b2f4b34cc748571c421f98401a7}{mouse\+Release\+Event}} (QMouse\+Event $\ast$event)
\item 
void \mbox{\hyperlink{class_separate_swatch_area_af30f61549fba3cc1c7988ee6d7e4343f}{wheel\+Event}} (QWheel\+Event $\ast$event)
\item 
void \mbox{\hyperlink{class_separate_swatch_area_ae1b4cae6fe23020949ab8a7e0976a79e}{key\+Press\+Event}} (QKey\+Event $\ast$event)
\item 
void \mbox{\hyperlink{class_separate_swatch_area_aa6381e865e4d9fbc3762fb409a4965be}{enter\+Event}} (QEvent $\ast$event)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_separate_swatch_area_a346688fe1b39b3c9b0ef980b4c616995}\label{class_separate_swatch_area_a346688fe1b39b3c9b0ef980b4c616995}} 
\index{SeparateSwatchArea@{SeparateSwatchArea}!SeparateSwatchArea@{SeparateSwatchArea}}
\index{SeparateSwatchArea@{SeparateSwatchArea}!SeparateSwatchArea@{SeparateSwatchArea}}
\doxysubsubsection{\texorpdfstring{SeparateSwatchArea()}{SeparateSwatchArea()}}
{\footnotesize\ttfamily Separate\+Swatch\+Area\+::\+Separate\+Swatch\+Area (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_separate_swatch}{Separate\+Swatch}} $\ast$}]{parent,  }\item[{SWATCH\+\_\+\+TYPE}]{type }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00074     : QWidget(parent)}
\DoxyCodeLine{00075     , m\_type(type)}
\DoxyCodeLine{00076     , m\_sw(parent)}
\DoxyCodeLine{00077     , m\_transparentColor(64, 64, 64) \{}
\DoxyCodeLine{00078   setMinimumHeight(100);}
\DoxyCodeLine{00079 }
\DoxyCodeLine{00080   \textcolor{comment}{// The following helps in re-\/establishing focus for wheel events}}
\DoxyCodeLine{00081   setFocusPolicy(Qt::WheelFocus);}
\DoxyCodeLine{00082   setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);}
\DoxyCodeLine{00083 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_separate_swatch_area_aa6381e865e4d9fbc3762fb409a4965be}\label{class_separate_swatch_area_aa6381e865e4d9fbc3762fb409a4965be}} 
\index{SeparateSwatchArea@{SeparateSwatchArea}!enterEvent@{enterEvent}}
\index{enterEvent@{enterEvent}!SeparateSwatchArea@{SeparateSwatchArea}}
\doxysubsubsection{\texorpdfstring{enterEvent()}{enterEvent()}}
{\footnotesize\ttfamily void Separate\+Swatch\+Area\+::enter\+Event (\begin{DoxyParamCaption}\item[{QEvent $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00284                                                  \{}
\DoxyCodeLine{00285   setFocus();}
\DoxyCodeLine{00286   \textcolor{keyword}{event}-\/>accept();}
\DoxyCodeLine{00287 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_separate_swatch_area_ae1b4cae6fe23020949ab8a7e0976a79e}\label{class_separate_swatch_area_ae1b4cae6fe23020949ab8a7e0976a79e}} 
\index{SeparateSwatchArea@{SeparateSwatchArea}!keyPressEvent@{keyPressEvent}}
\index{keyPressEvent@{keyPressEvent}!SeparateSwatchArea@{SeparateSwatchArea}}
\doxysubsubsection{\texorpdfstring{keyPressEvent()}{keyPressEvent()}}
{\footnotesize\ttfamily void Separate\+Swatch\+Area\+::key\+Press\+Event (\begin{DoxyParamCaption}\item[{QKey\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00107                                                        \{}
\DoxyCodeLine{00108   \textcolor{keywordflow}{if} (!m\_sw-\/>m\_mainRaster || m\_sw-\/>m\_lx == 0 || m\_sw-\/>m\_ly == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00109 }
\DoxyCodeLine{00110   QString zoomInTxt =}
\DoxyCodeLine{00111       CommandManager::instance()-\/>getAction(V\_ZoomIn)-\/>shortcut().toString();}
\DoxyCodeLine{00112   QString zoomOutTxt =}
\DoxyCodeLine{00113       CommandManager::instance()-\/>getAction(V\_ZoomOut)-\/>shortcut().toString();}
\DoxyCodeLine{00114 }
\DoxyCodeLine{00115   \textcolor{keywordtype}{bool} isZoomIn =}
\DoxyCodeLine{00116       (QString::compare(event-\/>text(), zoomInTxt, Qt::CaseInsensitive) == 0);}
\DoxyCodeLine{00117   \textcolor{keywordtype}{bool} isZoomOut =}
\DoxyCodeLine{00118       (QString::compare(event-\/>text(), zoomOutTxt, Qt::CaseInsensitive) == 0);}
\DoxyCodeLine{00119 }
\DoxyCodeLine{00120   \textcolor{keywordtype}{int} key = \textcolor{keyword}{event}-\/>key();}
\DoxyCodeLine{00121 }
\DoxyCodeLine{00122   \textcolor{keywordflow}{if} (key != \textcolor{charliteral}{'+'} \&\& key != \textcolor{charliteral}{'-\/'} \&\& key != \textcolor{charliteral}{'0'} \&\& !isZoomIn \&\& !isZoomOut) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00123 }
\DoxyCodeLine{00124   \textcolor{keywordtype}{bool} reset   = (key == \textcolor{charliteral}{'0'});}
\DoxyCodeLine{00125   \textcolor{keywordtype}{bool} forward = (key == \textcolor{charliteral}{'+'} || isZoomIn);}
\DoxyCodeLine{00126 }
\DoxyCodeLine{00127   \textcolor{keywordtype}{double} currZoomScale = sqrt(m\_sw-\/>m\_viewAff.det());}
\DoxyCodeLine{00128   \textcolor{keywordtype}{double} factor = reset ? 1 : getQuantizedZoomFactor(currZoomScale, forward);}
\DoxyCodeLine{00129 }
\DoxyCodeLine{00130   \textcolor{keywordtype}{double} minZoom = std::min((\textcolor{keywordtype}{double})m\_sw-\/>m\_lx / m\_sw-\/>m\_mainRaster-\/>getLx(),}
\DoxyCodeLine{00131                             (\textcolor{keywordtype}{double})m\_sw-\/>m\_ly / m\_sw-\/>m\_mainRaster-\/>getLy());}
\DoxyCodeLine{00132   \textcolor{keywordflow}{if} ((!forward \&\& factor < minZoom) || (forward \&\& factor > 40.0)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00133 }
\DoxyCodeLine{00134   \mbox{\hyperlink{class_t_point_t}{TPointD}} delta(0.5 * width(), 0.5 * height());}
\DoxyCodeLine{00135   m\_sw-\/>m\_viewAff = (\mbox{\hyperlink{class_t_translation}{TTranslation}}(delta) * \mbox{\hyperlink{class_t_scale}{TScale}}(factor / currZoomScale) *}
\DoxyCodeLine{00136                      \mbox{\hyperlink{class_t_translation}{TTranslation}}(-\/delta)) *}
\DoxyCodeLine{00137                     m\_sw-\/>m\_viewAff;}
\DoxyCodeLine{00138 }
\DoxyCodeLine{00139   m\_sw-\/>m\_orgSwatch-\/>updateRaster();}
\DoxyCodeLine{00140   m\_sw-\/>m\_mainSwatch-\/>updateRaster();}
\DoxyCodeLine{00141   m\_sw-\/>m\_sub1Swatch-\/>updateRaster();}
\DoxyCodeLine{00142   m\_sw-\/>m\_sub2Swatch-\/>updateRaster();}
\DoxyCodeLine{00143   m\_sw-\/>m\_sub3Swatch-\/>updateRaster();}
\DoxyCodeLine{00144 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_separate_swatch_area_aee13cd19912d17bf237c4f53a3989d0f}\label{class_separate_swatch_area_aee13cd19912d17bf237c4f53a3989d0f}} 
\index{SeparateSwatchArea@{SeparateSwatchArea}!mouseMoveEvent@{mouseMoveEvent}}
\index{mouseMoveEvent@{mouseMoveEvent}!SeparateSwatchArea@{SeparateSwatchArea}}
\doxysubsubsection{\texorpdfstring{mouseMoveEvent()}{mouseMoveEvent()}}
{\footnotesize\ttfamily void Separate\+Swatch\+Area\+::mouse\+Move\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00156                                                           \{}
\DoxyCodeLine{00157   \textcolor{keywordflow}{if} (!m\_panning) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00158 }
\DoxyCodeLine{00159   \mbox{\hyperlink{class_t_point_t}{TPoint}} curPos = \mbox{\hyperlink{class_t_point_t}{TPoint}}(event-\/>pos().x(), event-\/>pos().y());}
\DoxyCodeLine{00160 }
\DoxyCodeLine{00161   QPoint delta = \textcolor{keyword}{event}-\/>pos() -\/ m\_pos;}
\DoxyCodeLine{00162   \textcolor{keywordflow}{if} (delta == QPoint()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00163   \mbox{\hyperlink{class_t_affine}{TAffine}} oldAff  = m\_sw-\/>m\_viewAff;}
\DoxyCodeLine{00164   m\_sw-\/>m\_viewAff = \mbox{\hyperlink{class_t_translation}{TTranslation}}(delta.x(), -\/delta.y()) * m\_sw-\/>m\_viewAff;}
\DoxyCodeLine{00165 }
\DoxyCodeLine{00166   m\_sw-\/>m\_orgSwatch-\/>updateRaster();}
\DoxyCodeLine{00167   m\_sw-\/>m\_mainSwatch-\/>updateRaster(\textcolor{keyword}{true});}
\DoxyCodeLine{00168   m\_sw-\/>m\_sub1Swatch-\/>updateRaster(\textcolor{keyword}{true});}
\DoxyCodeLine{00169   m\_sw-\/>m\_sub2Swatch-\/>updateRaster(\textcolor{keyword}{true});}
\DoxyCodeLine{00170   m\_sw-\/>m\_sub3Swatch-\/>updateRaster(\textcolor{keyword}{true});}
\DoxyCodeLine{00171 }
\DoxyCodeLine{00172   m\_pos = \textcolor{keyword}{event}-\/>pos();}
\DoxyCodeLine{00173 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_separate_swatch_area_a6a4cf3b054ac581f0a3a5c1ac9984d83}\label{class_separate_swatch_area_a6a4cf3b054ac581f0a3a5c1ac9984d83}} 
\index{SeparateSwatchArea@{SeparateSwatchArea}!mousePressEvent@{mousePressEvent}}
\index{mousePressEvent@{mousePressEvent}!SeparateSwatchArea@{SeparateSwatchArea}}
\doxysubsubsection{\texorpdfstring{mousePressEvent()}{mousePressEvent()}}
{\footnotesize\ttfamily void Separate\+Swatch\+Area\+::mouse\+Press\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00087                                                            \{}
\DoxyCodeLine{00088   \textcolor{keywordflow}{if} (!m\_sw-\/>m\_mainRaster || m\_sw-\/>m\_lx == 0 || m\_sw-\/>m\_ly == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00089 }
\DoxyCodeLine{00090   m\_pos = \textcolor{keyword}{event}-\/>pos();}
\DoxyCodeLine{00091 }
\DoxyCodeLine{00092   \textcolor{comment}{// return if there is no raster}}
\DoxyCodeLine{00093   \textcolor{keywordflow}{if} (!m\_r) \{}
\DoxyCodeLine{00094     \textcolor{keyword}{event}-\/>ignore();}
\DoxyCodeLine{00095     m\_panning = \textcolor{keyword}{false};}
\DoxyCodeLine{00096     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00097   \}}
\DoxyCodeLine{00098 }
\DoxyCodeLine{00099   \textcolor{comment}{// panning with drag}}
\DoxyCodeLine{00100   m\_panning = \textcolor{keyword}{true};}
\DoxyCodeLine{00101 }
\DoxyCodeLine{00102   \textcolor{keyword}{event}-\/>ignore();}
\DoxyCodeLine{00103 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_separate_swatch_area_a0c7b4b2f4b34cc748571c421f98401a7}\label{class_separate_swatch_area_a0c7b4b2f4b34cc748571c421f98401a7}} 
\index{SeparateSwatchArea@{SeparateSwatchArea}!mouseReleaseEvent@{mouseReleaseEvent}}
\index{mouseReleaseEvent@{mouseReleaseEvent}!SeparateSwatchArea@{SeparateSwatchArea}}
\doxysubsubsection{\texorpdfstring{mouseReleaseEvent()}{mouseReleaseEvent()}}
{\footnotesize\ttfamily void Separate\+Swatch\+Area\+::mouse\+Release\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00147                                                              \{}
\DoxyCodeLine{00148   m\_sw-\/>m\_mainSwatch-\/>updateRaster();}
\DoxyCodeLine{00149   m\_sw-\/>m\_sub1Swatch-\/>updateRaster();}
\DoxyCodeLine{00150   m\_sw-\/>m\_sub2Swatch-\/>updateRaster();}
\DoxyCodeLine{00151   m\_sw-\/>m\_sub3Swatch-\/>updateRaster();}
\DoxyCodeLine{00152   m\_panning = \textcolor{keyword}{false};}
\DoxyCodeLine{00153 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_separate_swatch_area_a84757db96449e74349b44d4f8645b853}\label{class_separate_swatch_area_a84757db96449e74349b44d4f8645b853}} 
\index{SeparateSwatchArea@{SeparateSwatchArea}!paintEvent@{paintEvent}}
\index{paintEvent@{paintEvent}!SeparateSwatchArea@{SeparateSwatchArea}}
\doxysubsubsection{\texorpdfstring{paintEvent()}{paintEvent()}}
{\footnotesize\ttfamily void Separate\+Swatch\+Area\+::paint\+Event (\begin{DoxyParamCaption}\item[{QPaint\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00230                                                       \{}
\DoxyCodeLine{00231   QPainter p(\textcolor{keyword}{this});}
\DoxyCodeLine{00232   \textcolor{keywordflow}{if} (!m\_r)}
\DoxyCodeLine{00233     p.fillRect(rect(), QBrush(QColor(200, 200, 200)));}
\DoxyCodeLine{00234   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00235     p.drawImage(rect(), rasterToQImage(m\_r));}
\DoxyCodeLine{00236 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_separate_swatch_area_a22b0d7e36205606e5abeb466bd324042}\label{class_separate_swatch_area_a22b0d7e36205606e5abeb466bd324042}} 
\index{SeparateSwatchArea@{SeparateSwatchArea}!setTranspColor@{setTranspColor}}
\index{setTranspColor@{setTranspColor}!SeparateSwatchArea@{SeparateSwatchArea}}
\doxysubsubsection{\texorpdfstring{setTranspColor()}{setTranspColor()}}
{\footnotesize\ttfamily void Separate\+Swatch\+Area\+::set\+Transp\+Color (\begin{DoxyParamCaption}\item[{TPixel32 \&}]{line\+Color,  }\item[{bool}]{show\+Alpha = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00265                                                                            \{}
\DoxyCodeLine{00266   \textcolor{keywordflow}{if} (showAlpha) \{}
\DoxyCodeLine{00267     m\_transparentColor = TPixel32::Black;}
\DoxyCodeLine{00268     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00269   \}}
\DoxyCodeLine{00270 }
\DoxyCodeLine{00271   \mbox{\hyperlink{class_t_pixel_d}{TPixelD}} lineColorD = toPixelD(lineColor);}
\DoxyCodeLine{00272   \textcolor{keywordtype}{double} h, l, s;}
\DoxyCodeLine{00273   rgb2hls(lineColorD.r, lineColorD.g, lineColorD.b, \&h, \&l, \&s);}
\DoxyCodeLine{00274   \textcolor{comment}{// if the specified color is reddish, use blue color for transparent area}}
\DoxyCodeLine{00275   \textcolor{keywordflow}{if} (l < 0.8)}
\DoxyCodeLine{00276     m\_transparentColor = TPixel32::White;}
\DoxyCodeLine{00277   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00278     m\_transparentColor = TPixel32(64, 64, 64);}
\DoxyCodeLine{00279 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_separate_swatch_area_a3611ee3dbe870c2d4819097e205cec77}\label{class_separate_swatch_area_a3611ee3dbe870c2d4819097e205cec77}} 
\index{SeparateSwatchArea@{SeparateSwatchArea}!updateRaster@{updateRaster}}
\index{updateRaster@{updateRaster}!SeparateSwatchArea@{SeparateSwatchArea}}
\doxysubsubsection{\texorpdfstring{updateRaster()}{updateRaster()}}
{\footnotesize\ttfamily void Separate\+Swatch\+Area\+::update\+Raster (\begin{DoxyParamCaption}\item[{bool}]{dragging = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00194                                                    \{}
\DoxyCodeLine{00195   \textcolor{keywordflow}{if} (isHidden() || m\_sw-\/>m\_lx == 0 || m\_sw-\/>m\_ly == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00196 }
\DoxyCodeLine{00197   \textcolor{keywordflow}{if} (!m\_r || m\_r-\/>getLx() != m\_sw-\/>m\_lx || m\_r-\/>getLy() != m\_sw-\/>m\_ly)}
\DoxyCodeLine{00198     m\_r = \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}(m\_sw-\/>m\_lx, m\_sw-\/>m\_ly);}
\DoxyCodeLine{00199 }
\DoxyCodeLine{00200   \textcolor{keywordflow}{if} (!m\_sw-\/>m\_mainRaster)}
\DoxyCodeLine{00201     m\_r-\/>fill(TPixel(200, 200, 200));}
\DoxyCodeLine{00202   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00203     m\_r-\/>fill(m\_transparentColor);}
\DoxyCodeLine{00204     \textcolor{keywordflow}{switch} (m\_type) \{}
\DoxyCodeLine{00205     \textcolor{keywordflow}{case} Original:}
\DoxyCodeLine{00206       \mbox{\hyperlink{namespace_t_rop_a1f6b04b4725e957a0d554e198e26a117}{TRop::quickPut}}(m\_r, m\_sw-\/>m\_orgRaster, getFinalAff());}
\DoxyCodeLine{00207       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00208     \textcolor{keywordflow}{case} Main:}
\DoxyCodeLine{00209       \mbox{\hyperlink{namespace_t_rop_a1f6b04b4725e957a0d554e198e26a117}{TRop::quickPut}}(m\_r, m\_sw-\/>m\_mainRaster, getFinalAff());}
\DoxyCodeLine{00210       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00211     \textcolor{keywordflow}{case} Sub1:}
\DoxyCodeLine{00212       \mbox{\hyperlink{namespace_t_rop_a1f6b04b4725e957a0d554e198e26a117}{TRop::quickPut}}(m\_r, m\_sw-\/>m\_sub1Raster, getFinalAff());}
\DoxyCodeLine{00213       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00214     \textcolor{keywordflow}{case} Sub2:}
\DoxyCodeLine{00215       \mbox{\hyperlink{namespace_t_rop_a1f6b04b4725e957a0d554e198e26a117}{TRop::quickPut}}(m\_r, m\_sw-\/>m\_sub2Raster, getFinalAff());}
\DoxyCodeLine{00216       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00217     \textcolor{keywordflow}{case} Sub3:}
\DoxyCodeLine{00218       \mbox{\hyperlink{namespace_t_rop_a1f6b04b4725e957a0d554e198e26a117}{TRop::quickPut}}(m\_r, m\_sw-\/>m\_sub3Raster, getFinalAff());}
\DoxyCodeLine{00219       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00220     \}}
\DoxyCodeLine{00221   \}}
\DoxyCodeLine{00222   \textcolor{keywordflow}{if} (dragging)}
\DoxyCodeLine{00223     repaint();}
\DoxyCodeLine{00224   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00225     update();}
\DoxyCodeLine{00226 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_separate_swatch_area_a5026aa6c0ae899bde5caaa26852e5be7}\label{class_separate_swatch_area_a5026aa6c0ae899bde5caaa26852e5be7}} 
\index{SeparateSwatchArea@{SeparateSwatchArea}!updateSeparated@{updateSeparated}}
\index{updateSeparated@{updateSeparated}!SeparateSwatchArea@{SeparateSwatchArea}}
\doxysubsubsection{\texorpdfstring{updateSeparated()}{updateSeparated()}}
{\footnotesize\ttfamily void Separate\+Swatch\+Area\+::update\+Separated (\begin{DoxyParamCaption}\item[{bool}]{dragging = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00177                                                       \{}
\DoxyCodeLine{00178   \mbox{\hyperlink{class_t_affine}{TAffine}} aff = getFinalAff();}
\DoxyCodeLine{00179 }
\DoxyCodeLine{00180   \mbox{\hyperlink{class_t_rect_t}{TRect}} rectToCompute = convert(aff.\mbox{\hyperlink{class_t_affine_a570529b96b1ec5abc711aaa9aac09ff9}{inv}}() * convert(m\_r-\/>getBounds()));}
\DoxyCodeLine{00181   \mbox{\hyperlink{class_t_rect_t}{TRect}} outRect       = m\_sw-\/>m\_mainRaster-\/>getBounds() * rectToCompute;}
\DoxyCodeLine{00182 }
\DoxyCodeLine{00183   \textcolor{keywordflow}{if} (outRect.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00184 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_separate_swatch_area_af30f61549fba3cc1c7988ee6d7e4343f}\label{class_separate_swatch_area_af30f61549fba3cc1c7988ee6d7e4343f}} 
\index{SeparateSwatchArea@{SeparateSwatchArea}!wheelEvent@{wheelEvent}}
\index{wheelEvent@{wheelEvent}!SeparateSwatchArea@{SeparateSwatchArea}}
\doxysubsubsection{\texorpdfstring{wheelEvent()}{wheelEvent()}}
{\footnotesize\ttfamily void Separate\+Swatch\+Area\+::wheel\+Event (\begin{DoxyParamCaption}\item[{QWheel\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00240                                                       \{}
\DoxyCodeLine{00241   \textcolor{keywordflow}{if} (!m\_sw-\/>m\_mainSwatch || m\_sw-\/>m\_lx == 0 || m\_sw-\/>m\_ly == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00242 }
\DoxyCodeLine{00243   \textcolor{keywordtype}{int} step      = \textcolor{keyword}{event}-\/>delta() > 0 ? 120 : -\/120;}
\DoxyCodeLine{00244   \textcolor{keywordtype}{double} factor = exp(0.001 * step);}
\DoxyCodeLine{00245   \textcolor{keywordflow}{if} (factor == 1.0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00246   \textcolor{keywordtype}{double} scale   = m\_sw-\/>m\_viewAff.det();}
\DoxyCodeLine{00247   \textcolor{keywordtype}{double} minZoom = std::min((\textcolor{keywordtype}{double})m\_sw-\/>m\_lx / m\_sw-\/>m\_mainRaster-\/>getLx(),}
\DoxyCodeLine{00248                             (\textcolor{keywordtype}{double})m\_sw-\/>m\_ly / m\_sw-\/>m\_mainRaster-\/>getLy());}
\DoxyCodeLine{00249   \textcolor{keywordflow}{if} ((factor < 1 \&\& sqrt(scale) < minZoom) || (factor > 1 \&\& scale > 1200.0))}
\DoxyCodeLine{00250     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00251 }
\DoxyCodeLine{00252   \mbox{\hyperlink{class_t_point_t}{TPointD}} delta(event-\/>pos().x(), height() -\/ event-\/>pos().y());}
\DoxyCodeLine{00253   m\_sw-\/>m\_viewAff =}
\DoxyCodeLine{00254       (\mbox{\hyperlink{class_t_translation}{TTranslation}}(delta) * \mbox{\hyperlink{class_t_scale}{TScale}}(factor) * \mbox{\hyperlink{class_t_translation}{TTranslation}}(-\/delta)) *}
\DoxyCodeLine{00255       m\_sw-\/>m\_viewAff;}
\DoxyCodeLine{00256 }
\DoxyCodeLine{00257   m\_sw-\/>m\_orgSwatch-\/>updateRaster();}
\DoxyCodeLine{00258   m\_sw-\/>m\_mainSwatch-\/>updateRaster();}
\DoxyCodeLine{00259   m\_sw-\/>m\_sub1Swatch-\/>updateRaster();}
\DoxyCodeLine{00260   m\_sw-\/>m\_sub2Swatch-\/>updateRaster();}
\DoxyCodeLine{00261   m\_sw-\/>m\_sub3Swatch-\/>updateRaster();}
\DoxyCodeLine{00262 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/separatecolorsswatch.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/separatecolorsswatch.\+cpp\end{DoxyCompactItemize}
