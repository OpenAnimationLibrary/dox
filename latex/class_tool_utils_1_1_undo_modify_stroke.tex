\hypertarget{class_tool_utils_1_1_undo_modify_stroke}{}\doxysection{Tool\+Utils\+::Undo\+Modify\+Stroke Class Reference}
\label{class_tool_utils_1_1_undo_modify_stroke}\index{ToolUtils::UndoModifyStroke@{ToolUtils::UndoModifyStroke}}
Inheritance diagram for Tool\+Utils\+::Undo\+Modify\+Stroke\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4.000000cm]{class_tool_utils_1_1_undo_modify_stroke}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_tool_utils_1_1_undo_modify_stroke_aa29afcc68ddff2237d5409b50def4c45}{Undo\+Modify\+Stroke}} (\mbox{\hyperlink{class_t_xsh_simple_level}{TXsh\+Simple\+Level}} $\ast$level, const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&frame\+Id, int stroke\+Index)
\item 
void \mbox{\hyperlink{class_tool_utils_1_1_undo_modify_stroke_af17ba1b6279890a3783d668f5a9d4456}{on\+Add}} () override
\item 
void \mbox{\hyperlink{class_tool_utils_1_1_undo_modify_stroke_aa4b75f5296e7aec0c81eb05ea66abbfc}{undo}} () const override
\item 
void \mbox{\hyperlink{class_tool_utils_1_1_undo_modify_stroke_ada3cad0527006b4df210bac2b74385f4}{redo}} () const override
\item 
int \mbox{\hyperlink{class_tool_utils_1_1_undo_modify_stroke_a37c775388cfd581bdc75e55c93ecbe8e}{get\+Size}} () const override
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{class_tool_utils_1_1_undo_modify_stroke_a1d5a7a4289d2e5f2ca3e6ca63274631a}{m\+\_\+stroke\+Index}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_tool_utils_1_1_undo_modify_stroke_aa29afcc68ddff2237d5409b50def4c45}\label{class_tool_utils_1_1_undo_modify_stroke_aa29afcc68ddff2237d5409b50def4c45}} 
\index{ToolUtils::UndoModifyStroke@{ToolUtils::UndoModifyStroke}!UndoModifyStroke@{UndoModifyStroke}}
\index{UndoModifyStroke@{UndoModifyStroke}!ToolUtils::UndoModifyStroke@{ToolUtils::UndoModifyStroke}}
\doxysubsubsection{\texorpdfstring{UndoModifyStroke()}{UndoModifyStroke()}}
{\footnotesize\ttfamily Tool\+Utils\+::\+Undo\+Modify\+Stroke\+::\+Undo\+Modify\+Stroke (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsh_simple_level}{TXsh\+Simple\+Level}} $\ast$}]{level,  }\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{frame\+Id,  }\item[{int}]{stroke\+Index }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00738     : TToolUndo(level, frameId), m\_strokeIndex(strokeIndex) \{}
\DoxyCodeLine{00739   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} image = level-\/>getFrame(frameId, \textcolor{keyword}{true});}
\DoxyCodeLine{00740   assert(image);}
\DoxyCodeLine{00741   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = image-\/>getStroke(m\_strokeIndex);}
\DoxyCodeLine{00742   \textcolor{keywordtype}{int} n           = stroke-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}();}
\DoxyCodeLine{00743   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < n; i++) m\_before.push\_back(stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(i));}
\DoxyCodeLine{00744 }
\DoxyCodeLine{00745   m\_selfLoopBefore = stroke-\/>\mbox{\hyperlink{class_t_stroke_a3565d6c34d3eb02fb1a6993ca626425c}{isSelfLoop}}();}
\DoxyCodeLine{00746 }
\DoxyCodeLine{00747   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{00748   m\_row                   = app-\/>getCurrentFrame()-\/>getFrame();}
\DoxyCodeLine{00749   m\_column                = app-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{00750 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tool_utils_1_1_undo_modify_stroke_a3e3f585e250d7047c5347e3b118403fa}\label{class_tool_utils_1_1_undo_modify_stroke_a3e3f585e250d7047c5347e3b118403fa}} 
\index{ToolUtils::UndoModifyStroke@{ToolUtils::UndoModifyStroke}!````~UndoModifyStroke@{$\sim$UndoModifyStroke}}
\index{````~UndoModifyStroke@{$\sim$UndoModifyStroke}!ToolUtils::UndoModifyStroke@{ToolUtils::UndoModifyStroke}}
\doxysubsubsection{\texorpdfstring{$\sim$UndoModifyStroke()}{~UndoModifyStroke()}}
{\footnotesize\ttfamily Tool\+Utils\+::\+Undo\+Modify\+Stroke\+::$\sim$\+Undo\+Modify\+Stroke (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00754 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_tool_utils_1_1_undo_modify_stroke_a37c775388cfd581bdc75e55c93ecbe8e}\label{class_tool_utils_1_1_undo_modify_stroke_a37c775388cfd581bdc75e55c93ecbe8e}} 
\index{ToolUtils::UndoModifyStroke@{ToolUtils::UndoModifyStroke}!getSize@{getSize}}
\index{getSize@{getSize}!ToolUtils::UndoModifyStroke@{ToolUtils::UndoModifyStroke}}
\doxysubsubsection{\texorpdfstring{getSize()}{getSize()}}
{\footnotesize\ttfamily int Tool\+Utils\+::\+Undo\+Modify\+Stroke\+::get\+Size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_undo}{TUndo}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00842                                              \{}
\DoxyCodeLine{00843   \textcolor{keywordflow}{return} (m\_before.capacity() + m\_after.capacity()) * \textcolor{keyword}{sizeof}(\mbox{\hyperlink{class_t_thick_point}{TThickPoint}}) +}
\DoxyCodeLine{00844          \textcolor{keyword}{sizeof}(*\textcolor{keyword}{this}) + 500;}
\DoxyCodeLine{00845 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tool_utils_1_1_undo_modify_stroke_af17ba1b6279890a3783d668f5a9d4456}\label{class_tool_utils_1_1_undo_modify_stroke_af17ba1b6279890a3783d668f5a9d4456}} 
\index{ToolUtils::UndoModifyStroke@{ToolUtils::UndoModifyStroke}!onAdd@{onAdd}}
\index{onAdd@{onAdd}!ToolUtils::UndoModifyStroke@{ToolUtils::UndoModifyStroke}}
\doxysubsubsection{\texorpdfstring{onAdd()}{onAdd()}}
{\footnotesize\ttfamily void Tool\+Utils\+::\+Undo\+Modify\+Stroke\+::on\+Add (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_undo}{TUndo}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00758                                       \{}
\DoxyCodeLine{00759   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} image = m\_level-\/>getFrame(m\_frameId, \textcolor{keyword}{true});}
\DoxyCodeLine{00760   assert(image);}
\DoxyCodeLine{00761   \textcolor{keywordflow}{if} (!image) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00762 }
\DoxyCodeLine{00763   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = image-\/>getStroke(m\_strokeIndex);}
\DoxyCodeLine{00764   assert(stroke);}
\DoxyCodeLine{00765   \textcolor{keywordtype}{int} n = stroke-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}();}
\DoxyCodeLine{00766   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < n; i++) m\_after.push\_back(stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(i));}
\DoxyCodeLine{00767 }
\DoxyCodeLine{00768   m\_selfLoopAfter = stroke-\/>\mbox{\hyperlink{class_t_stroke_a3565d6c34d3eb02fb1a6993ca626425c}{isSelfLoop}}();}
\DoxyCodeLine{00769 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tool_utils_1_1_undo_modify_stroke_ada3cad0527006b4df210bac2b74385f4}\label{class_tool_utils_1_1_undo_modify_stroke_ada3cad0527006b4df210bac2b74385f4}} 
\index{ToolUtils::UndoModifyStroke@{ToolUtils::UndoModifyStroke}!redo@{redo}}
\index{redo@{redo}!ToolUtils::UndoModifyStroke@{ToolUtils::UndoModifyStroke}}
\doxysubsubsection{\texorpdfstring{redo()}{redo()}}
{\footnotesize\ttfamily void Tool\+Utils\+::\+Undo\+Modify\+Stroke\+::redo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_undo}{TUndo}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00807                                            \{}
\DoxyCodeLine{00808   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{00809   \textcolor{keywordflow}{if} (!app) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00810 }
\DoxyCodeLine{00811   \textcolor{keywordflow}{if} (app-\/>getCurrentFrame()-\/>isEditingScene()) \{}
\DoxyCodeLine{00812     app-\/>getCurrentColumn()-\/>setColumnIndex(m\_column);}
\DoxyCodeLine{00813     app-\/>getCurrentFrame()-\/>setFrame(m\_row);}
\DoxyCodeLine{00814   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00815     app-\/>getCurrentFrame()-\/>setFid(m\_frameId);}
\DoxyCodeLine{00816 }
\DoxyCodeLine{00817   \mbox{\hyperlink{class_t_selection}{TSelection}} *selection = app-\/>getCurrentSelection()-\/>getSelection();}
\DoxyCodeLine{00818   \textcolor{keywordflow}{if} (selection) selection-\/>selectNone();}
\DoxyCodeLine{00819 }
\DoxyCodeLine{00820   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} image = m\_level-\/>getFrame(m\_frameId, \textcolor{keyword}{true});}
\DoxyCodeLine{00821   assert(image);}
\DoxyCodeLine{00822   \textcolor{keywordflow}{if} (!image) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00823   QMutexLocker lock(image-\/>getMutex());}
\DoxyCodeLine{00824   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = 0;}
\DoxyCodeLine{00825   \textcolor{keywordflow}{if} (image-\/>getStrokeCount() ==}
\DoxyCodeLine{00826       1)  \textcolor{comment}{//\&\& image-\/>getStroke(0)-\/>getStyle()==SplineStyle)}}
\DoxyCodeLine{00827     stroke = image-\/>getStroke(0);}
\DoxyCodeLine{00828   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00829     stroke = image-\/>getStroke(m\_strokeIndex);}
\DoxyCodeLine{00830   \textcolor{keywordflow}{if} (!stroke) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00831   \mbox{\hyperlink{class_t_stroke}{TStroke}} *oldStroke = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}(*stroke);}
\DoxyCodeLine{00832   stroke-\/>\mbox{\hyperlink{class_t_stroke_a939e478aa10028d3e5787a8cfe6c901d}{reshape}}(\&m\_after[0], m\_after.size());}
\DoxyCodeLine{00833   stroke-\/>\mbox{\hyperlink{class_t_stroke_afa2c66ae11a70e68b3de3ce0b4cfb049}{setSelfLoop}}(m\_selfLoopAfter);}
\DoxyCodeLine{00834   image-\/>notifyChangedStrokes(m\_strokeIndex, oldStroke);}
\DoxyCodeLine{00835   \textcolor{keyword}{delete} oldStroke;}
\DoxyCodeLine{00836   app-\/>getCurrentXsheet()-\/>notifyXsheetChanged();}
\DoxyCodeLine{00837   notifyImageChanged();}
\DoxyCodeLine{00838 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tool_utils_1_1_undo_modify_stroke_aa4b75f5296e7aec0c81eb05ea66abbfc}\label{class_tool_utils_1_1_undo_modify_stroke_aa4b75f5296e7aec0c81eb05ea66abbfc}} 
\index{ToolUtils::UndoModifyStroke@{ToolUtils::UndoModifyStroke}!undo@{undo}}
\index{undo@{undo}!ToolUtils::UndoModifyStroke@{ToolUtils::UndoModifyStroke}}
\doxysubsubsection{\texorpdfstring{undo()}{undo()}}
{\footnotesize\ttfamily void Tool\+Utils\+::\+Undo\+Modify\+Stroke\+::undo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_undo}{TUndo}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00773                                            \{}
\DoxyCodeLine{00774   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{00775   \textcolor{keywordflow}{if} (!app) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00776 }
\DoxyCodeLine{00777   \textcolor{keywordflow}{if} (app-\/>getCurrentFrame()-\/>isEditingScene()) \{}
\DoxyCodeLine{00778     app-\/>getCurrentColumn()-\/>setColumnIndex(m\_column);}
\DoxyCodeLine{00779     app-\/>getCurrentFrame()-\/>setFrame(m\_row);}
\DoxyCodeLine{00780   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00781     app-\/>getCurrentFrame()-\/>setFid(m\_frameId);}
\DoxyCodeLine{00782 }
\DoxyCodeLine{00783   \mbox{\hyperlink{class_t_selection}{TSelection}} *selection = app-\/>getCurrentSelection()-\/>getSelection();}
\DoxyCodeLine{00784   \textcolor{keywordflow}{if} (selection) selection-\/>selectNone();}
\DoxyCodeLine{00785 }
\DoxyCodeLine{00786   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} image = m\_level-\/>getFrame(m\_frameId, \textcolor{keyword}{true});}
\DoxyCodeLine{00787   assert(image);}
\DoxyCodeLine{00788   \textcolor{keywordflow}{if} (!image) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00789   QMutexLocker lock(image-\/>getMutex());}
\DoxyCodeLine{00790   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = 0;}
\DoxyCodeLine{00791   \textcolor{keywordflow}{if} (image-\/>getStrokeCount() ==}
\DoxyCodeLine{00792       1)  \textcolor{comment}{// \&\& image-\/>getStroke(0)-\/>getStyle()==SplineStyle)}}
\DoxyCodeLine{00793     stroke = image-\/>getStroke(0);}
\DoxyCodeLine{00794   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00795     stroke = image-\/>getStroke(m\_strokeIndex);}
\DoxyCodeLine{00796   \textcolor{keywordflow}{if} (!stroke) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00797   \mbox{\hyperlink{class_t_stroke}{TStroke}} *oldStroke = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}(*stroke);}
\DoxyCodeLine{00798   stroke-\/>\mbox{\hyperlink{class_t_stroke_a939e478aa10028d3e5787a8cfe6c901d}{reshape}}(\&m\_before[0], m\_before.size());}
\DoxyCodeLine{00799   stroke-\/>\mbox{\hyperlink{class_t_stroke_afa2c66ae11a70e68b3de3ce0b4cfb049}{setSelfLoop}}(m\_selfLoopBefore);}
\DoxyCodeLine{00800   image-\/>notifyChangedStrokes(m\_strokeIndex, oldStroke);}
\DoxyCodeLine{00801   notifyImageChanged();}
\DoxyCodeLine{00802   \textcolor{keyword}{delete} oldStroke;}
\DoxyCodeLine{00803 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_tool_utils_1_1_undo_modify_stroke_a1d5a7a4289d2e5f2ca3e6ca63274631a}\label{class_tool_utils_1_1_undo_modify_stroke_a1d5a7a4289d2e5f2ca3e6ca63274631a}} 
\index{ToolUtils::UndoModifyStroke@{ToolUtils::UndoModifyStroke}!m\_strokeIndex@{m\_strokeIndex}}
\index{m\_strokeIndex@{m\_strokeIndex}!ToolUtils::UndoModifyStroke@{ToolUtils::UndoModifyStroke}}
\doxysubsubsection{\texorpdfstring{m\_strokeIndex}{m\_strokeIndex}}
{\footnotesize\ttfamily int Tool\+Utils\+::\+Undo\+Modify\+Stroke\+::m\+\_\+stroke\+Index}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/tools/toolutils.\+h\item 
E\+:/opentoonz/toonz/sources/tnztools/toolutils.\+cpp\end{DoxyCompactItemize}
