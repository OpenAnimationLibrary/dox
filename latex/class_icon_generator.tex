\hypertarget{class_icon_generator}{}\doxysection{Icon\+Generator Class Reference}
\label{class_icon_generator}\index{IconGenerator@{IconGenerator}}


The class responsible for icons management in Toonz.  




{\ttfamily \#include $<$icongenerator.\+h$>$}

Inheritance diagram for Icon\+Generator\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_icon_generator}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_icon_generator_1_1_settings}{Settings}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_icon_generator_ac7b58959e0199caf3750f78a3ca7e396}{on\+Started}} (\mbox{\hyperlink{class_t_smart_pointer_t}{TThread\+::\+RunnableP}} icon\+Renderer)
\item 
void \mbox{\hyperlink{class_icon_generator_a6b78f844f33f30c2763b4e62c3c6480c}{on\+Canceled}} (\mbox{\hyperlink{class_t_smart_pointer_t}{TThread\+::\+RunnableP}} icon\+Renderer)
\item 
void \mbox{\hyperlink{class_icon_generator_a43827732bbeecea194fdb4fcee069f81}{on\+Finished}} (\mbox{\hyperlink{class_t_smart_pointer_t}{TThread\+::\+RunnableP}} icon\+Renderer)
\item 
void \mbox{\hyperlink{class_icon_generator_a0997ee97aeb8fadb2f6c6869683e4f9c}{on\+Exception}} (\mbox{\hyperlink{class_t_smart_pointer_t}{TThread\+::\+RunnableP}} icon\+Renderer)
\item 
void \mbox{\hyperlink{class_icon_generator_aacb151e788a589c893c757c70d03e82b}{on\+Terminated}} (\mbox{\hyperlink{class_t_smart_pointer_t}{TThread\+::\+RunnableP}} icon\+Renderer)
\end{DoxyCompactItemize}
\doxysubsection*{Signals}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_icon_generator_a01bae14d324ae1d0b7cef7cd6cf4c551}\label{class_icon_generator_a01bae14d324ae1d0b7cef7cd6cf4c551}} 
void {\bfseries icon\+Generated} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_icon_generator_ae9041361a559309ad1a6adb4b279db6b}{set\+Settings}} (const \mbox{\hyperlink{class_icon_generator_1_1_settings}{Settings}} \&settings)
\item 
const \mbox{\hyperlink{class_icon_generator_1_1_settings}{Settings}} \mbox{\hyperlink{class_icon_generator_a7ed81ec1d9d7cb36408c5f987f02b8ba}{get\+Settings}} () const
\item 
\mbox{\hyperlink{class_t_dimension_t}{TDimension}} \mbox{\hyperlink{class_icon_generator_aba5f6df3139648a248727b1567fb2a7e}{get\+Icon\+Size}} () const
\item 
\mbox{\hyperlink{class_t_offline_g_l}{TOffline\+GL}} $\ast$ \mbox{\hyperlink{class_icon_generator_a46224068d86a242fc4a86a9c2e46668d}{get\+Offline\+GLContext}} ()
\item 
QPixmap \mbox{\hyperlink{class_icon_generator_a438c062701ad9868b43d4231475b6c4f}{get\+Icon}} (\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$spline)
\item 
void \mbox{\hyperlink{class_icon_generator_ac6fcc447d108540277e8b70acd34f5d8}{invalidate}} (\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$spline)
\item 
void \mbox{\hyperlink{class_icon_generator_a4131e6ed0dfdd2d6b7fa03d07634fc53}{remove}} (\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$spline)
\item 
QPixmap \mbox{\hyperlink{class_icon_generator_a4daf97a382f3a1f4e194e78b5fba4a5a}{get\+Icon}} (\mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}} $\ast$sl, const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid, bool film\+Strip=true, bool on\+Demand=false)
\item 
QPixmap \mbox{\hyperlink{class_icon_generator_a20b6be382635de1ecd58d290b0e21c68}{get\+Sized\+Icon}} (\mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}} $\ast$sl, const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid, std\+::string new\+Id, \mbox{\hyperlink{class_t_dimension_t}{TDimension}} dim=\mbox{\hyperlink{class_t_dimension_t}{TDimension}}(0, 0))
\item 
void \mbox{\hyperlink{class_icon_generator_ac6a648c3342c762111fb68f08d2b07af}{invalidate}} (\mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}} $\ast$sl, const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid, bool only\+Film\+Strip=false)
\item 
void \mbox{\hyperlink{class_icon_generator_a054654f4e10c6975c06714c4ccdca2e1}{remove}} (\mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}} $\ast$sl, const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid, bool only\+Film\+Strip=false)
\item 
QPixmap \mbox{\hyperlink{class_icon_generator_a6478bacdedbf9064d1799c260d6290cb}{get\+Icon}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path, const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid=TFrame\+Id\+::\+NO\+\_\+\+FRAME)
\item 
void \mbox{\hyperlink{class_icon_generator_af777ef8ba9e6a110a1c4b30eb15fa91c}{invalidate}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path, const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid=TFrame\+Id\+::\+NO\+\_\+\+FRAME)
\item 
void \mbox{\hyperlink{class_icon_generator_a07d0368ae5640a65a81fb04f649aaecc}{remove}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path, const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid=TFrame\+Id\+::\+NO\+\_\+\+FRAME)
\item 
QPixmap \mbox{\hyperlink{class_icon_generator_a5f4ba1299d3f58ad77340ee61c453351}{get\+Scene\+Icon}} (\mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}} $\ast$scene)
\item 
void \mbox{\hyperlink{class_icon_generator_af1470f29b3c877642c1255c513c41c81}{invalidate\+Scene\+Icon}} ()
\item 
void \mbox{\hyperlink{class_icon_generator_a19a63c3a171b4bf63b99545d1e163757}{remap}} (const std\+::string \&new\+Icon\+Id, const std\+::string \&old\+Icon\+Id)
\item 
void \mbox{\hyperlink{class_icon_generator_a144a58e1a0b11195baf544753eb00a85}{clear\+Requests}} ()
\item 
void \mbox{\hyperlink{class_icon_generator_a341c7c07b9efb4b8ab654843b06287a4}{clear\+Scene\+Icons}} ()
\item 
void \mbox{\hyperlink{class_icon_generator_a5857c1312052a517ebc23f6ddac6e143}{notify\+Icon\+Generated}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_icon_generator}{Icon\+Generator}} $\ast$ \mbox{\hyperlink{class_icon_generator_adc5ab3ce069ddf383b4ac201bffaeded}{instance}} ()
\item 
static void \mbox{\hyperlink{class_icon_generator_a13c96ad7a049b329b4cf895303fdaa1e}{set\+Filmstrip\+Icon\+Size}} (const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&dim)
\item 
static \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} \mbox{\hyperlink{class_icon_generator_aa2e913249445cbea4c0360910a451cfc}{generate\+Vector\+File\+Icon}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path, const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&icon\+Size, const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid)
\item 
static \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} \mbox{\hyperlink{class_icon_generator_a7ccdef01f56754f58c938076b50beaee}{generate\+Raster\+File\+Icon}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path, const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&icon\+Size, const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid)
\item 
static \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} \mbox{\hyperlink{class_icon_generator_a0bea820c050b7acb48fec2fc41063c1d}{generate\+Scene\+File\+Icon}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path, const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&icon\+Size, int row)
\item 
static \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} \mbox{\hyperlink{class_icon_generator_a721d04cb94ad02b5d43c7f1659dd7028}{generate\+Spline\+File\+Icon}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path, const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&icon\+Size)
\item 
static \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} \mbox{\hyperlink{class_icon_generator_abf9e4b9178038655830fe0af8a058809}{generate\+Mesh\+File\+Icon}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path, const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&icon\+Size, const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The class responsible for icons management in Toonz. 

It\textquotesingle{}s a singleton class -\/ in particular, rendered icons are stored in a shared map container for fast retrieval upon repeated icon requests. \begin{DoxyVerb}      IconGenerator provides methods to submit icon requests, and to
\end{DoxyVerb}
 invalidate or remove icons from the internal database. In order to keep outer entities informed of the icon generation status, an icon\+Generated() signal is emitted once an icon has been generated. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_icon_generator_ae0fcfb3c1b67f3b071fed30be426d6b2}\label{class_icon_generator_ae0fcfb3c1b67f3b071fed30be426d6b2}} 
\index{IconGenerator@{IconGenerator}!IconGenerator@{IconGenerator}}
\index{IconGenerator@{IconGenerator}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{IconGenerator()}{IconGenerator()}}
{\footnotesize\ttfamily Icon\+Generator\+::\+Icon\+Generator (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01325                              : m\_iconSize(FilmstripIconSize) \{}
\DoxyCodeLine{01326   m\_executor.\mbox{\hyperlink{class_t_thread_1_1_executor_a85231531a2fa273db401f090c9aba4ea}{setMaxActiveTasks}}(1);  \textcolor{comment}{// Only one thread to render icons...}}
\DoxyCodeLine{01327   m\_executor.\mbox{\hyperlink{class_t_thread_1_1_executor_a02c4c637864647ce22be391919049d3a}{setDedicatedThreads}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01328 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a624a63e028c5bb11bb315f3a7e8d858a}\label{class_icon_generator_a624a63e028c5bb11bb315f3a7e8d858a}} 
\index{IconGenerator@{IconGenerator}!````~IconGenerator@{$\sim$IconGenerator}}
\index{````~IconGenerator@{$\sim$IconGenerator}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{$\sim$IconGenerator()}{~IconGenerator()}}
{\footnotesize\ttfamily Icon\+Generator\+::$\sim$\+Icon\+Generator (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01332 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_icon_generator_a144a58e1a0b11195baf544753eb00a85}\label{class_icon_generator_a144a58e1a0b11195baf544753eb00a85}} 
\index{IconGenerator@{IconGenerator}!clearRequests@{clearRequests}}
\index{clearRequests@{clearRequests}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{clearRequests()}{clearRequests()}}
{\footnotesize\ttfamily void Icon\+Generator\+::clear\+Requests (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01744 \{ m\_executor.\mbox{\hyperlink{class_t_thread_1_1_executor_a3ebba69410a233ff1e5774d7e4d1246f}{cancelAll}}(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a341c7c07b9efb4b8ab654843b06287a4}\label{class_icon_generator_a341c7c07b9efb4b8ab654843b06287a4}} 
\index{IconGenerator@{IconGenerator}!clearSceneIcons@{clearSceneIcons}}
\index{clearSceneIcons@{clearSceneIcons}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{clearSceneIcons()}{clearSceneIcons()}}
{\footnotesize\ttfamily void Icon\+Generator\+::clear\+Scene\+Icons (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01748                                     \{}
\DoxyCodeLine{01749   \textcolor{comment}{// Eliminate all icons whose prefix is not "{}\$:"{} (that is, scene-\/independent}}
\DoxyCodeLine{01750   \textcolor{comment}{// images).}}
\DoxyCodeLine{01751   \textcolor{comment}{// The abovementioned prefix is internally recognized by the image cache when}}
\DoxyCodeLine{01752   \textcolor{comment}{// the scene}}
\DoxyCodeLine{01753   \textcolor{comment}{// changes to avoid clearing file browser's icons.}}
\DoxyCodeLine{01754 }
\DoxyCodeLine{01755   \textcolor{comment}{// Observe that image cache's clear function invoked during scene changes is}}
\DoxyCodeLine{01756   \textcolor{comment}{// called through}}
\DoxyCodeLine{01757   \textcolor{comment}{// the ImageManager::clear() method, including FilmStrip icons.}}
\DoxyCodeLine{01758 }
\DoxyCodeLine{01759   \textcolor{comment}{// note the ';' -\/ which follows ':' in the ascii table}}
\DoxyCodeLine{01760   iconsMap.erase(iconsMap.begin(), iconsMap.lower\_bound(\textcolor{stringliteral}{"{}\$:"{}}));}
\DoxyCodeLine{01761   iconsMap.erase(iconsMap.lower\_bound(\textcolor{stringliteral}{"{}\$;"{}}), iconsMap.end());}
\DoxyCodeLine{01762 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_abf9e4b9178038655830fe0af8a058809}\label{class_icon_generator_abf9e4b9178038655830fe0af8a058809}} 
\index{IconGenerator@{IconGenerator}!generateMeshFileIcon@{generateMeshFileIcon}}
\index{generateMeshFileIcon@{generateMeshFileIcon}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{generateMeshFileIcon()}{generateMeshFileIcon()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} Icon\+Generator\+::generate\+Mesh\+File\+Icon (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path,  }\item[{const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&}]{icon\+Size,  }\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01115                                                                     \{}
\DoxyCodeLine{01116   \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}} lr(path);}
\DoxyCodeLine{01117   \mbox{\hyperlink{class_t_level_p}{TLevelP}} level = lr-\/>loadInfo();}
\DoxyCodeLine{01118   \textcolor{keywordflow}{if} (level-\/>begin() == level-\/>end()) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}();}
\DoxyCodeLine{01119 }
\DoxyCodeLine{01120   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} frameId = fid;}
\DoxyCodeLine{01121   \textcolor{keywordflow}{if} (fid == TFrameId::NO\_FRAME) frameId = level-\/>begin()-\/>first;}
\DoxyCodeLine{01122 }
\DoxyCodeLine{01123   \mbox{\hyperlink{class_t_mesh_image_p}{TMeshImageP}} mi = lr-\/>getFrameReader(frameId)-\/>load();}
\DoxyCodeLine{01124   \textcolor{keywordflow}{if} (!mi) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}();}
\DoxyCodeLine{01125 }
\DoxyCodeLine{01126   \mbox{\hyperlink{class_mesh_image_icon_renderer}{MeshImageIconRenderer}} mir(\textcolor{stringliteral}{"{}"{}}, iconSize, mi.getPointer(),}
\DoxyCodeLine{01127                             \mbox{\hyperlink{class_icon_generator_1_1_settings}{IconGenerator::Settings}}());}
\DoxyCodeLine{01128   \textcolor{keywordflow}{return} mir.generateRaster(iconSize);}
\DoxyCodeLine{01129 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a7ccdef01f56754f58c938076b50beaee}\label{class_icon_generator_a7ccdef01f56754f58c938076b50beaee}} 
\index{IconGenerator@{IconGenerator}!generateRasterFileIcon@{generateRasterFileIcon}}
\index{generateRasterFileIcon@{generateRasterFileIcon}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{generateRasterFileIcon()}{generateRasterFileIcon()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} Icon\+Generator\+::generate\+Raster\+File\+Icon (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path,  }\item[{const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&}]{icon\+Size,  }\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00994                                                                       \{}
\DoxyCodeLine{00995   \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img;}
\DoxyCodeLine{00996 }
\DoxyCodeLine{00997   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00998     \textcolor{comment}{// Attempt image reading}}
\DoxyCodeLine{00999     \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}} lr(path);}
\DoxyCodeLine{01000     \mbox{\hyperlink{class_t_level_p}{TLevelP}} level = lr-\/>loadInfo();}
\DoxyCodeLine{01001 }
\DoxyCodeLine{01002     \textcolor{keywordflow}{if} (level-\/>begin() == level-\/>end()) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}();}
\DoxyCodeLine{01003 }
\DoxyCodeLine{01004     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} frameId = fid;}
\DoxyCodeLine{01005     \textcolor{keywordflow}{if} (fid == TFrameId::NO\_FRAME)  \textcolor{comment}{// In case no frame was specified, pick the}}
\DoxyCodeLine{01006       frameId = level-\/>begin()-\/>first;  \textcolor{comment}{// first level frame}}
\DoxyCodeLine{01007 }
\DoxyCodeLine{01008     \mbox{\hyperlink{class_t_image_reader_p}{TImageReaderP}} ir = lr-\/>getFrameReader(frameId);}
\DoxyCodeLine{01009 }
\DoxyCodeLine{01010     \textcolor{keywordflow}{if} (\textcolor{keyword}{const} \mbox{\hyperlink{class_t_image_info}{TImageInfo}} *ii = ir-\/>getImageInfo()) \{}
\DoxyCodeLine{01011       \textcolor{keywordtype}{int} shrinkX = ii-\/>m\_lx / iconSize.lx;}
\DoxyCodeLine{01012       \textcolor{keywordtype}{int} shrinkY = ii-\/>m\_ly / iconSize.ly;}
\DoxyCodeLine{01013       \textcolor{keywordtype}{int} shrink  = shrinkX < shrinkY ? shrinkX : shrinkY;}
\DoxyCodeLine{01014 }
\DoxyCodeLine{01015       \textcolor{keywordflow}{if} (shrink > 1) ir-\/>setShrink(shrink);}
\DoxyCodeLine{01016     \}}
\DoxyCodeLine{01017 }
\DoxyCodeLine{01018     img = (toUpper(path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}()) == \textcolor{stringliteral}{"{}TLV"{}}) ? ir-\/>loadIcon() : ir-\/>load();}
\DoxyCodeLine{01019   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{01020   \}}
\DoxyCodeLine{01021 }
\DoxyCodeLine{01022   \textcolor{comment}{// Extract a 32-\/bit fullcolor raster from img}}
\DoxyCodeLine{01023   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} ras32;}
\DoxyCodeLine{01024 }
\DoxyCodeLine{01025   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} ri = img) \{}
\DoxyCodeLine{01026     ras32 = ri-\/>getRaster();}
\DoxyCodeLine{01027 }
\DoxyCodeLine{01028     \textcolor{keywordflow}{if} (!ras32) \{}
\DoxyCodeLine{01029       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}} rasGR8 = ri-\/>getRaster()) \{}
\DoxyCodeLine{01030         \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} raux(rasGR8-\/>getSize());}
\DoxyCodeLine{01031         \mbox{\hyperlink{namespace_t_rop_a45a08fb48dd7d33ec629d722081d55c6}{TRop::convert}}(raux, rasGR8);}
\DoxyCodeLine{01032         ras32 = raux;}
\DoxyCodeLine{01033       \}}
\DoxyCodeLine{01034     \}}
\DoxyCodeLine{01035   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = img) \{}
\DoxyCodeLine{01036     \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} auxRaster = ti-\/>getRaster();}
\DoxyCodeLine{01037     \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} dstRaster(auxRaster-\/>getSize());}
\DoxyCodeLine{01038 }
\DoxyCodeLine{01039     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} plt = ti-\/>getPalette())}
\DoxyCodeLine{01040       \mbox{\hyperlink{namespace_t_rop_a45a08fb48dd7d33ec629d722081d55c6}{TRop::convert}}(dstRaster, auxRaster, plt, \textcolor{keyword}{false});}
\DoxyCodeLine{01041     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01042       dstRaster-\/>fill(TPixel32::Magenta);}
\DoxyCodeLine{01043 }
\DoxyCodeLine{01044     ras32 = dstRaster;}
\DoxyCodeLine{01045   \}}
\DoxyCodeLine{01046 }
\DoxyCodeLine{01047   \textcolor{keywordflow}{if} (!ras32) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}();}
\DoxyCodeLine{01048 }
\DoxyCodeLine{01049   \textcolor{comment}{/*}}
\DoxyCodeLine{01050 \textcolor{comment}{// NOTE: The following was possible with the old Qt version 4.3.3 -\/ but in the}}
\DoxyCodeLine{01051 \textcolor{comment}{new 4.5.0}}
\DoxyCodeLine{01052 \textcolor{comment}{// it's not: 'It is not safe to use QPixmaps outside the GUI thread'...}}
\DoxyCodeLine{01053 \textcolor{comment}{TRaster32P icon;}}
\DoxyCodeLine{01054 \textcolor{comment}{\{}}
\DoxyCodeLine{01055 \textcolor{comment}{QPixmap p(rasterToQPixmap(ras32));}}
\DoxyCodeLine{01056 \textcolor{comment}{icon = rasterFromQPixmap(}}
\DoxyCodeLine{01057 \textcolor{comment}{  scalePixmapKeepingAspectRatio(p, QSize(iconSize.lx, iconSize.ly),}}
\DoxyCodeLine{01058 \textcolor{comment}{Qt::transparent)}}
\DoxyCodeLine{01059 \textcolor{comment}{  , false);}}
\DoxyCodeLine{01060 \textcolor{comment}{\}}}
\DoxyCodeLine{01061 \textcolor{comment}{*/}}
\DoxyCodeLine{01062 }
\DoxyCodeLine{01063   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} icon(iconSize);}
\DoxyCodeLine{01064 }
\DoxyCodeLine{01065   \textcolor{keywordtype}{double} sx = double(iconSize.lx) / ras32-\/>getLx();}
\DoxyCodeLine{01066   \textcolor{keywordtype}{double} sy = double(iconSize.ly) / ras32-\/>getLy();}
\DoxyCodeLine{01067   \textcolor{keywordtype}{double} sc = std::min(sx, sy);  \textcolor{comment}{// show all the image, possibly adding bands}}
\DoxyCodeLine{01068 }
\DoxyCodeLine{01069   \mbox{\hyperlink{class_t_affine}{TAffine}} aff = \mbox{\hyperlink{class_t_scale}{TScale}}(sc).\mbox{\hyperlink{class_t_affine_a5c556c5952cff649a61add494ff3423c}{place}}(ras32-\/>getCenterD(), icon-\/>getCenterD());}
\DoxyCodeLine{01070 }
\DoxyCodeLine{01071   icon-\/>fill(TPixel32(255, 0, 0));  \textcolor{comment}{// "{}bands"{} color}}
\DoxyCodeLine{01072   \mbox{\hyperlink{namespace_t_rop_a5e39bc748039afe42001ba44f2d2a073}{TRop::resample}}(icon, ras32, aff, \mbox{\hyperlink{namespace_t_rop_a2780cb0189f5717b67b6aca3f5471168af59a8bad64d2b117020f864efd67b2b5}{TRop::Triangle}});}
\DoxyCodeLine{01073 }
\DoxyCodeLine{01074   \textcolor{keywordflow}{if} (icon) \{}
\DoxyCodeLine{01075     \textcolor{keywordflow}{if} (::isUnpremultiplied(icon))  \textcolor{comment}{// APPALLING. I'm not touching this, but}}
\DoxyCodeLine{01076       \mbox{\hyperlink{namespace_t_rop_aa8671761db1d55d696b4b8bb71f8b2e4}{TRop::premultiply}}(}
\DoxyCodeLine{01077           icon);  \textcolor{comment}{// YOU JUST CAN'T TELL IF AN IMAGE IS PREMULTIPLIED}}
\DoxyCodeLine{01078                   \textcolor{comment}{// OR NOT BY SCANNING ITS PIXELS.}}
\DoxyCodeLine{01079                   \textcolor{comment}{// You either know it FOR A GIVEN, or you don't...      >\_<}}
\DoxyCodeLine{01080     \mbox{\hyperlink{class_t_rect_t}{TRectI}} srcBBoxI = ras32-\/>getBounds();}
\DoxyCodeLine{01081     \mbox{\hyperlink{class_t_rect_t}{TRectD}} srcBBoxD = aff * \mbox{\hyperlink{class_t_rect_t}{TRectD}}(srcBBoxI.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, srcBBoxI.y0, srcBBoxI.x1 + 1,}
\DoxyCodeLine{01082                                    srcBBoxI.y1 + 1);}
\DoxyCodeLine{01083 }
\DoxyCodeLine{01084     \mbox{\hyperlink{class_t_rect_t}{TRect}} bbox = \mbox{\hyperlink{class_t_rect_t}{TRect}}(tfloor(srcBBoxD.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}), tceil(srcBBoxD.y0) -\/ 1,}
\DoxyCodeLine{01085                        tfloor(srcBBoxD.x1), tceil(srcBBoxD.y1) -\/ 1);}
\DoxyCodeLine{01086 }
\DoxyCodeLine{01087     bbox = (bbox * icon-\/>getBounds())}
\DoxyCodeLine{01088                .enlarge(-\/1);  \textcolor{comment}{// Add a 1 pixel transparent margin -\/ this}}
\DoxyCodeLine{01089     \textcolor{keywordflow}{if} (bbox.getLx() > 0 \&\&}
\DoxyCodeLine{01090         bbox.getLy() > 0)  \textcolor{comment}{// way the actual content doesn't look trimmed.}}
\DoxyCodeLine{01091       ::makeChessBackground(icon-\/>extract(bbox));}
\DoxyCodeLine{01092   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01093     icon-\/>fill(TPixel32(255, 0, 0));}
\DoxyCodeLine{01094 }
\DoxyCodeLine{01095   \textcolor{keywordflow}{return} icon;}
\DoxyCodeLine{01096 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a0bea820c050b7acb48fec2fc41063c1d}\label{class_icon_generator_a0bea820c050b7acb48fec2fc41063c1d}} 
\index{IconGenerator@{IconGenerator}!generateSceneFileIcon@{generateSceneFileIcon}}
\index{generateSceneFileIcon@{generateSceneFileIcon}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{generateSceneFileIcon()}{generateSceneFileIcon()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} Icon\+Generator\+::generate\+Scene\+File\+Icon (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path,  }\item[{const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&}]{icon\+Size,  }\item[{int}]{row }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01135                                                          \{}
\DoxyCodeLine{01136   \textcolor{keywordflow}{if} (row == 0 || row == TFrameId::NO\_FRAME -\/ 1) \{}
\DoxyCodeLine{01137     \mbox{\hyperlink{class_t_file_path}{TFilePath}} iconPath =}
\DoxyCodeLine{01138         path.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() + \textcolor{stringliteral}{"{}sceneIcons"{}} + (path.getWideName() + L\textcolor{stringliteral}{"{} .png"{}});}
\DoxyCodeLine{01139     \textcolor{keywordflow}{return} generateRasterFileIcon(iconPath, iconSize, TFrameId::NO\_FRAME);}
\DoxyCodeLine{01140   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01141     \textcolor{comment}{// obsolete}}
\DoxyCodeLine{01142     \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} scene;}
\DoxyCodeLine{01143     scene.load(path);}
\DoxyCodeLine{01144     \mbox{\hyperlink{class_xsheet_icon_renderer}{XsheetIconRenderer}} ir(\textcolor{stringliteral}{"{}"{}}, iconSize, scene.\mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}(), row);}
\DoxyCodeLine{01145     \textcolor{keywordflow}{return} ir.generateRaster(iconSize);}
\DoxyCodeLine{01146   \}}
\DoxyCodeLine{01147 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a721d04cb94ad02b5d43c7f1659dd7028}\label{class_icon_generator_a721d04cb94ad02b5d43c7f1659dd7028}} 
\index{IconGenerator@{IconGenerator}!generateSplineFileIcon@{generateSplineFileIcon}}
\index{generateSplineFileIcon@{generateSplineFileIcon}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{generateSplineFileIcon()}{generateSplineFileIcon()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} Icon\+Generator\+::generate\+Spline\+File\+Icon (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path,  }\item[{const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&}]{icon\+Size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01101                                                                              \{}
\DoxyCodeLine{01102   \mbox{\hyperlink{class_t_stage_object_spline}{TStageObjectSpline}} *spline = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stage_object_spline}{TStageObjectSpline}}();}
\DoxyCodeLine{01103   \mbox{\hyperlink{class_t_i_stream}{TIStream}} is(path);}
\DoxyCodeLine{01104   spline-\/>\mbox{\hyperlink{class_t_stage_object_spline_a80792903608810c9bd4e84ee9c95d1ca}{loadData}}(is);}
\DoxyCodeLine{01105   \mbox{\hyperlink{class_spline_icon_renderer}{SplineIconRenderer}} sr(\textcolor{stringliteral}{"{}"{}}, iconSize, spline);}
\DoxyCodeLine{01106   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} icon = sr.generateRaster(iconSize);}
\DoxyCodeLine{01107   \textcolor{keyword}{delete} spline;}
\DoxyCodeLine{01108   \textcolor{keywordflow}{return} icon;}
\DoxyCodeLine{01109 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_aa2e913249445cbea4c0360910a451cfc}\label{class_icon_generator_aa2e913249445cbea4c0360910a451cfc}} 
\index{IconGenerator@{IconGenerator}!generateVectorFileIcon@{generateVectorFileIcon}}
\index{generateVectorFileIcon@{generateVectorFileIcon}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{generateVectorFileIcon()}{generateVectorFileIcon()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} Icon\+Generator\+::generate\+Vector\+File\+Icon (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path,  }\item[{const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&}]{icon\+Size,  }\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00975                                                                       \{}
\DoxyCodeLine{00976   \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}} lr(path);}
\DoxyCodeLine{00977   \mbox{\hyperlink{class_t_level_p}{TLevelP}} level = lr-\/>loadInfo();}
\DoxyCodeLine{00978   \textcolor{keywordflow}{if} (level-\/>begin() == level-\/>end()) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}();}
\DoxyCodeLine{00979   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} frameId = fid;}
\DoxyCodeLine{00980   \textcolor{keywordflow}{if} (fid == TFrameId::NO\_FRAME) frameId = level-\/>begin()-\/>first;}
\DoxyCodeLine{00981   \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img      = lr-\/>getFrameReader(frameId)-\/>load();}
\DoxyCodeLine{00982   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi = img;}
\DoxyCodeLine{00983   \textcolor{keywordflow}{if} (!vi) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}();}
\DoxyCodeLine{00984   vi-\/>setPalette(level-\/>getPalette());}
\DoxyCodeLine{00985   \mbox{\hyperlink{class_vector_image_icon_renderer}{VectorImageIconRenderer}} vir(\textcolor{stringliteral}{"{}"{}}, iconSize, vi.getPointer(),}
\DoxyCodeLine{00986                               \mbox{\hyperlink{class_icon_generator_1_1_settings}{IconGenerator::Settings}}());}
\DoxyCodeLine{00987   \textcolor{keywordflow}{return} vir.generateRaster(iconSize);}
\DoxyCodeLine{00988 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a6478bacdedbf9064d1799c260d6290cb}\label{class_icon_generator_a6478bacdedbf9064d1799c260d6290cb}} 
\index{IconGenerator@{IconGenerator}!getIcon@{getIcon}}
\index{getIcon@{getIcon}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{getIcon()}{getIcon()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily QPixmap Icon\+Generator\+::get\+Icon (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path,  }\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid = {\ttfamily TFrameId\+:\+:NO\+\_\+FRAME} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01681                                                                          \{}
\DoxyCodeLine{01682   std::string \textcolor{keywordtype}{id} = FileIconRenderer::getId(path, fid);}
\DoxyCodeLine{01683 }
\DoxyCodeLine{01684   QPixmap pix;}
\DoxyCodeLine{01685   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} fileIconSize(80, 60);}
\DoxyCodeLine{01686   \textcolor{comment}{// Here the fileIconSize is input in order to check if the icon is obtained}}
\DoxyCodeLine{01687   \textcolor{comment}{// with high-\/dpi (i.e. devPixRatio > 1.0).}}
\DoxyCodeLine{01688   \textcolor{keywordflow}{if} (::getIcon(\textcolor{keywordtype}{id}, pix, 0, fileIconSize)) \textcolor{keywordflow}{return} pix;}
\DoxyCodeLine{01689 }
\DoxyCodeLine{01690   addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_file_icon_renderer}{FileIconRenderer}}(fileIconSize, path, fid));}
\DoxyCodeLine{01691 }
\DoxyCodeLine{01692   \textcolor{keywordflow}{return} QPixmap();}
\DoxyCodeLine{01693 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a438c062701ad9868b43d4231475b6c4f}\label{class_icon_generator_a438c062701ad9868b43d4231475b6c4f}} 
\index{IconGenerator@{IconGenerator}!getIcon@{getIcon}}
\index{getIcon@{getIcon}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{getIcon()}{getIcon()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily QPixmap Icon\+Generator\+::get\+Icon (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$}]{spline }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01648                                                          \{}
\DoxyCodeLine{01649   \textcolor{keywordflow}{if} (!spline) \textcolor{keywordflow}{return} QPixmap();}
\DoxyCodeLine{01650   std::string iconName = spline-\/>getIconId();}
\DoxyCodeLine{01651 }
\DoxyCodeLine{01652   QPixmap pix;}
\DoxyCodeLine{01653   \textcolor{keywordflow}{if} (::getIcon(iconName, pix)) \textcolor{keywordflow}{return} pix;}
\DoxyCodeLine{01654 }
\DoxyCodeLine{01655   \textcolor{comment}{// storeIcon(id, QPixmap());}}
\DoxyCodeLine{01656   addTask(iconName, \textcolor{keyword}{new} \mbox{\hyperlink{class_spline_icon_renderer}{SplineIconRenderer}}(iconName, getIconSize(), spline));}
\DoxyCodeLine{01657 }
\DoxyCodeLine{01658   \textcolor{keywordflow}{return} QPixmap();}
\DoxyCodeLine{01659 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a4daf97a382f3a1f4e194e78b5fba4a5a}\label{class_icon_generator_a4daf97a382f3a1f4e194e78b5fba4a5a}} 
\index{IconGenerator@{IconGenerator}!getIcon@{getIcon}}
\index{getIcon@{getIcon}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{getIcon()}{getIcon()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily QPixmap Icon\+Generator\+::get\+Icon (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}} $\ast$}]{sl,  }\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid,  }\item[{bool}]{film\+Strip = {\ttfamily true},  }\item[{bool}]{on\+Demand = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01374                                                               \{}
\DoxyCodeLine{01375   \textcolor{keywordflow}{if} (!xl) \textcolor{keywordflow}{return} QPixmap();}
\DoxyCodeLine{01376 }
\DoxyCodeLine{01377   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_child_level}{TXshChildLevel}} *cl = xl-\/>\mbox{\hyperlink{class_t_xsh_child_level_a939e4baa485b3bdb71cec0f7597b17ea}{getChildLevel}}()) \{}
\DoxyCodeLine{01378     \textcolor{keywordflow}{if} (filmStrip) \textcolor{keywordflow}{return} QPixmap();}
\DoxyCodeLine{01379 }
\DoxyCodeLine{01380     std::string \textcolor{keywordtype}{id} = XsheetIconRenderer::getId(cl, fid.getNumber() -\/ 1);}
\DoxyCodeLine{01381     QPixmap pix;}
\DoxyCodeLine{01382     \textcolor{keywordflow}{if} (::getIcon(\textcolor{keywordtype}{id}, pix)) \textcolor{keywordflow}{return} pix;}
\DoxyCodeLine{01383 }
\DoxyCodeLine{01384     \textcolor{keywordflow}{if} (onDemand) \textcolor{keywordflow}{return} pix;}
\DoxyCodeLine{01385 }
\DoxyCodeLine{01386     \mbox{\hyperlink{class_t_dimension_t}{TDimension}} iconSize = \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(80, 60);}
\DoxyCodeLine{01387 }
\DoxyCodeLine{01388     \textcolor{comment}{// The icon must be calculated -\/ add an IconRenderer task.}}
\DoxyCodeLine{01389     \textcolor{comment}{// storeIcon(id, QPixmap());   //It was automatically added by the former}}
\DoxyCodeLine{01390     \textcolor{comment}{// access}}
\DoxyCodeLine{01391     addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_xsheet_icon_renderer}{XsheetIconRenderer}}(\textcolor{keywordtype}{id}, iconSize, cl-\/>getXsheet()));}
\DoxyCodeLine{01392   \}}
\DoxyCodeLine{01393 }
\DoxyCodeLine{01394   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = xl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_aac1fd1d3ecf0778b8ee139c9119fcdef}{getSimpleLevel}}()) \{}
\DoxyCodeLine{01395     \textcolor{comment}{// make thumbnails for cleanup preview and cameratest to be the same as}}
\DoxyCodeLine{01396     \textcolor{comment}{// normal TLV}}
\DoxyCodeLine{01397     std::string id;}
\DoxyCodeLine{01398     \textcolor{keywordtype}{int} status = sl-\/>getFrameStatus(fid);}
\DoxyCodeLine{01399     \textcolor{keywordflow}{if} (sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == TZP\_XSHLEVEL \&\&}
\DoxyCodeLine{01400         status \& \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a9e5aa8f328730d501a912a0e11fe39f0}{TXshSimpleLevel::CleanupPreview}}) \{}
\DoxyCodeLine{01401       sl-\/>setFrameStatus(fid, status \& \string~\mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a9e5aa8f328730d501a912a0e11fe39f0}{TXshSimpleLevel::CleanupPreview}});}
\DoxyCodeLine{01402       \textcolor{keywordtype}{id} = sl-\/>getIconId(fid);}
\DoxyCodeLine{01403       sl-\/>setFrameStatus(fid, status);}
\DoxyCodeLine{01404     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01405       \textcolor{keywordtype}{id} = sl-\/>getIconId(fid);}
\DoxyCodeLine{01406 }
\DoxyCodeLine{01407     \textcolor{keywordflow}{if} (!filmStrip) \textcolor{keywordtype}{id} += \textcolor{stringliteral}{"{}\_small"{}};}
\DoxyCodeLine{01408 }
\DoxyCodeLine{01409     QPixmap pix;}
\DoxyCodeLine{01410     \textcolor{keywordflow}{if} (::getIcon(\textcolor{keywordtype}{id}, pix, xl-\/>getSimpleLevel())) \textcolor{keywordflow}{return} pix;}
\DoxyCodeLine{01411 }
\DoxyCodeLine{01412     \textcolor{keywordflow}{if} (onDemand) \textcolor{keywordflow}{return} pix;}
\DoxyCodeLine{01413 }
\DoxyCodeLine{01414     \mbox{\hyperlink{class_icon_generator_1_1_settings}{IconGenerator::Settings}} oldSettings = m\_settings;}
\DoxyCodeLine{01415 }
\DoxyCodeLine{01416     \textcolor{comment}{// Disable transparency check for cast and xsheet icons}}
\DoxyCodeLine{01417     \textcolor{keywordflow}{if} (!filmStrip) m\_settings = \mbox{\hyperlink{class_icon_generator_1_1_settings}{IconGenerator::Settings}}();}
\DoxyCodeLine{01418 }
\DoxyCodeLine{01419     \mbox{\hyperlink{class_t_dimension_t}{TDimension}} iconSize = filmStrip ? m\_iconSize : \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(80, 60);}
\DoxyCodeLine{01420 }
\DoxyCodeLine{01421     \textcolor{comment}{// storeIcon(id, QPixmap());}}
\DoxyCodeLine{01422 }
\DoxyCodeLine{01423     \textcolor{keywordtype}{int} type = sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}();}
\DoxyCodeLine{01424     \textcolor{keywordflow}{switch} (type) \{}
\DoxyCodeLine{01425     \textcolor{keywordflow}{case} OVL\_XSHLEVEL:}
\DoxyCodeLine{01426     \textcolor{keywordflow}{case} TZI\_XSHLEVEL:}
\DoxyCodeLine{01427       addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_raster_image_icon_renderer}{RasterImageIconRenderer}}(\textcolor{keywordtype}{id}, iconSize, sl, fid));}
\DoxyCodeLine{01428       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01429     \textcolor{keywordflow}{case} PLI\_XSHLEVEL:}
\DoxyCodeLine{01430       addTask(\textcolor{keywordtype}{id},}
\DoxyCodeLine{01431               \textcolor{keyword}{new} \mbox{\hyperlink{class_vector_image_icon_renderer}{VectorImageIconRenderer}}(\textcolor{keywordtype}{id}, iconSize, sl, fid, m\_settings));}
\DoxyCodeLine{01432       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01433     \textcolor{keywordflow}{case} TZP\_XSHLEVEL:}
\DoxyCodeLine{01434       \textcolor{comment}{// Yep, we could have rasters, due to a cleanupping process}}
\DoxyCodeLine{01435       \textcolor{keywordflow}{if} (status == \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{TXshSimpleLevel::Scanned}})}
\DoxyCodeLine{01436         addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_raster_image_icon_renderer}{RasterImageIconRenderer}}(\textcolor{keywordtype}{id}, iconSize, sl, fid));}
\DoxyCodeLine{01437       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01438         addTask(\textcolor{keywordtype}{id},}
\DoxyCodeLine{01439                 \textcolor{keyword}{new} \mbox{\hyperlink{class_toonz_image_icon_renderer}{ToonzImageIconRenderer}}(\textcolor{keywordtype}{id}, iconSize, sl, fid, m\_settings));}
\DoxyCodeLine{01440       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01441     \textcolor{keywordflow}{case} MESH\_XSHLEVEL:}
\DoxyCodeLine{01442       addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_mesh_image_icon_renderer}{MeshImageIconRenderer}}(\textcolor{keywordtype}{id}, iconSize, sl, fid, m\_settings));}
\DoxyCodeLine{01443       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01444     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01445       assert(\textcolor{keyword}{false});}
\DoxyCodeLine{01446       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01447     \}}
\DoxyCodeLine{01448 }
\DoxyCodeLine{01449     m\_settings = oldSettings;}
\DoxyCodeLine{01450   \}}
\DoxyCodeLine{01451 }
\DoxyCodeLine{01452   \textcolor{keywordflow}{return} QPixmap();}
\DoxyCodeLine{01453 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_aba5f6df3139648a248727b1567fb2a7e}\label{class_icon_generator_aba5f6df3139648a248727b1567fb2a7e}} 
\index{IconGenerator@{IconGenerator}!getIconSize@{getIconSize}}
\index{getIconSize@{getIconSize}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{getIconSize()}{getIconSize()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_dimension_t}{TDimension}} Icon\+Generator\+::get\+Icon\+Size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{01349 \{ \textcolor{keywordflow}{return} FilmstripIconSize; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a46224068d86a242fc4a86a9c2e46668d}\label{class_icon_generator_a46224068d86a242fc4a86a9c2e46668d}} 
\index{IconGenerator@{IconGenerator}!getOfflineGLContext@{getOfflineGLContext}}
\index{getOfflineGLContext@{getOfflineGLContext}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{getOfflineGLContext()}{getOfflineGLContext()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_offline_g_l}{TOffline\+GL}} $\ast$ Icon\+Generator\+::get\+Offline\+GLContext (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01353                                                \{}
\DoxyCodeLine{01354   \textcolor{comment}{// One context per rendering thread}}
\DoxyCodeLine{01355   \textcolor{keywordflow}{if} (!m\_contexts.hasLocalData()) \{}
\DoxyCodeLine{01356     \mbox{\hyperlink{class_t_dimension_t}{TDimension}} contextSize(std::max(FilmstripIconSize.lx, IconSize.lx),}
\DoxyCodeLine{01357                            std::max(FilmstripIconSize.ly, IconSize.ly));}
\DoxyCodeLine{01358     m\_contexts.setLocalData(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_offline_g_l}{TOfflineGL}}(contextSize));}
\DoxyCodeLine{01359   \}}
\DoxyCodeLine{01360   \textcolor{keywordflow}{return} m\_contexts.localData();}
\DoxyCodeLine{01361 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a5f4ba1299d3f58ad77340ee61c453351}\label{class_icon_generator_a5f4ba1299d3f58ad77340ee61c453351}} 
\index{IconGenerator@{IconGenerator}!getSceneIcon@{getSceneIcon}}
\index{getSceneIcon@{getSceneIcon}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{getSceneIcon()}{getSceneIcon()}}
{\footnotesize\ttfamily QPixmap Icon\+Generator\+::get\+Scene\+Icon (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}} $\ast$}]{scene }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01711                                                      \{}
\DoxyCodeLine{01712   std::string id(SceneIconRenderer::getId());}
\DoxyCodeLine{01713 }
\DoxyCodeLine{01714   QPixmap pix;}
\DoxyCodeLine{01715   \textcolor{keywordflow}{if} (::getIcon(\textcolor{keywordtype}{id}, pix)) \textcolor{keywordflow}{return} pix;}
\DoxyCodeLine{01716 }
\DoxyCodeLine{01717   \textcolor{comment}{// storeIcon(id, QPixmap());}}
\DoxyCodeLine{01718   addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_scene_icon_renderer}{SceneIconRenderer}}(getIconSize(), scene));}
\DoxyCodeLine{01719 }
\DoxyCodeLine{01720   \textcolor{keywordflow}{return} QPixmap();}
\DoxyCodeLine{01721 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a7ed81ec1d9d7cb36408c5f987f02b8ba}\label{class_icon_generator_a7ed81ec1d9d7cb36408c5f987f02b8ba}} 
\index{IconGenerator@{IconGenerator}!getSettings@{getSettings}}
\index{getSettings@{getSettings}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{getSettings()}{getSettings()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_icon_generator_1_1_settings}{Settings}} Icon\+Generator\+::get\+Settings (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00093 \{ \textcolor{keywordflow}{return} m\_settings; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a20b6be382635de1ecd58d290b0e21c68}\label{class_icon_generator_a20b6be382635de1ecd58d290b0e21c68}} 
\index{IconGenerator@{IconGenerator}!getSizedIcon@{getSizedIcon}}
\index{getSizedIcon@{getSizedIcon}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{getSizedIcon()}{getSizedIcon()}}
{\footnotesize\ttfamily QPixmap Icon\+Generator\+::get\+Sized\+Icon (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}} $\ast$}]{sl,  }\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid,  }\item[{std\+::string}]{new\+Id,  }\item[{\mbox{\hyperlink{class_t_dimension_t}{TDimension}}}]{dim = {\ttfamily \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(0,~0)} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01458                                                                      \{}
\DoxyCodeLine{01459   \textcolor{keywordflow}{if} (!xl) \textcolor{keywordflow}{return} QPixmap();}
\DoxyCodeLine{01460 }
\DoxyCodeLine{01461   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_child_level}{TXshChildLevel}} *cl = xl-\/>\mbox{\hyperlink{class_t_xsh_child_level_a939e4baa485b3bdb71cec0f7597b17ea}{getChildLevel}}()) \{}
\DoxyCodeLine{01462     std::string \textcolor{keywordtype}{id} = XsheetIconRenderer::getId(cl, fid.getNumber() -\/ 1);}
\DoxyCodeLine{01463     QPixmap pix;}
\DoxyCodeLine{01464     \textcolor{keywordflow}{if} (::getIcon(\textcolor{keywordtype}{id}, pix)) \textcolor{keywordflow}{return} pix;}
\DoxyCodeLine{01465 }
\DoxyCodeLine{01466     \textcolor{comment}{// if (onDemand) return pix;}}
\DoxyCodeLine{01467 }
\DoxyCodeLine{01468     \mbox{\hyperlink{class_t_dimension_t}{TDimension}} iconSize = \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(80, 60);}
\DoxyCodeLine{01469     \textcolor{keywordflow}{if} (dim != \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(0, 0)) \{}
\DoxyCodeLine{01470       iconSize = dim;}
\DoxyCodeLine{01471     \}}
\DoxyCodeLine{01472 }
\DoxyCodeLine{01473     \textcolor{comment}{// The icon must be calculated -\/ add an IconRenderer task.}}
\DoxyCodeLine{01474     \textcolor{comment}{// storeIcon(id, QPixmap());   //It was automatically added by the former}}
\DoxyCodeLine{01475     \textcolor{comment}{// access}}
\DoxyCodeLine{01476     addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_xsheet_icon_renderer}{XsheetIconRenderer}}(\textcolor{keywordtype}{id}, iconSize, cl-\/>getXsheet()));}
\DoxyCodeLine{01477   \}}
\DoxyCodeLine{01478 }
\DoxyCodeLine{01479   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = xl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_aac1fd1d3ecf0778b8ee139c9119fcdef}{getSimpleLevel}}()) \{}
\DoxyCodeLine{01480     \textcolor{comment}{// make thumbnails for cleanup preview and cameratest to be the same as}}
\DoxyCodeLine{01481     \textcolor{comment}{// normal TLV}}
\DoxyCodeLine{01482     std::string id;}
\DoxyCodeLine{01483     \textcolor{keywordtype}{int} status = sl-\/>getFrameStatus(fid);}
\DoxyCodeLine{01484     \textcolor{keywordflow}{if} (sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == TZP\_XSHLEVEL \&\&}
\DoxyCodeLine{01485         status \& \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a9e5aa8f328730d501a912a0e11fe39f0}{TXshSimpleLevel::CleanupPreview}}) \{}
\DoxyCodeLine{01486       sl-\/>setFrameStatus(fid, status \& \string~\mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a9e5aa8f328730d501a912a0e11fe39f0}{TXshSimpleLevel::CleanupPreview}});}
\DoxyCodeLine{01487       \textcolor{keywordtype}{id} = sl-\/>getIconId(fid);}
\DoxyCodeLine{01488       sl-\/>setFrameStatus(fid, status);}
\DoxyCodeLine{01489     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01490       \textcolor{keywordtype}{id} = sl-\/>getIconId(fid);}
\DoxyCodeLine{01491 }
\DoxyCodeLine{01492     \textcolor{keywordtype}{id} += newId;}
\DoxyCodeLine{01493 }
\DoxyCodeLine{01494     QPixmap pix;}
\DoxyCodeLine{01495     \textcolor{keywordflow}{if} (::getIcon(\textcolor{keywordtype}{id}, pix, xl-\/>getSimpleLevel())) \textcolor{keywordflow}{return} pix;}
\DoxyCodeLine{01496 }
\DoxyCodeLine{01497     \textcolor{comment}{// if (onDemand) return pix;}}
\DoxyCodeLine{01498 }
\DoxyCodeLine{01499     \mbox{\hyperlink{class_icon_generator_1_1_settings}{IconGenerator::Settings}} oldSettings = m\_settings;}
\DoxyCodeLine{01500 }
\DoxyCodeLine{01501     \textcolor{comment}{// Disable transparency check for cast and xsheet icons}}
\DoxyCodeLine{01502     \textcolor{comment}{// if (!filmStrip) m\_settings = IconGenerator::Settings();}}
\DoxyCodeLine{01503 }
\DoxyCodeLine{01504     \mbox{\hyperlink{class_t_dimension_t}{TDimension}} iconSize = \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(80, 60);}
\DoxyCodeLine{01505     \textcolor{keywordflow}{if} (dim != \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(0, 0)) \{}
\DoxyCodeLine{01506       iconSize = dim;}
\DoxyCodeLine{01507     \}}
\DoxyCodeLine{01508 }
\DoxyCodeLine{01509     \textcolor{comment}{// storeIcon(id, QPixmap());}}
\DoxyCodeLine{01510 }
\DoxyCodeLine{01511     \textcolor{keywordtype}{int} type = sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}();}
\DoxyCodeLine{01512     \textcolor{keywordflow}{switch} (type) \{}
\DoxyCodeLine{01513     \textcolor{keywordflow}{case} OVL\_XSHLEVEL:}
\DoxyCodeLine{01514     \textcolor{keywordflow}{case} TZI\_XSHLEVEL:}
\DoxyCodeLine{01515       addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_raster_image_icon_renderer}{RasterImageIconRenderer}}(\textcolor{keywordtype}{id}, iconSize, sl, fid));}
\DoxyCodeLine{01516       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01517     \textcolor{keywordflow}{case} PLI\_XSHLEVEL:}
\DoxyCodeLine{01518       addTask(\textcolor{keywordtype}{id},}
\DoxyCodeLine{01519               \textcolor{keyword}{new} \mbox{\hyperlink{class_vector_image_icon_renderer}{VectorImageIconRenderer}}(\textcolor{keywordtype}{id}, iconSize, sl, fid, m\_settings));}
\DoxyCodeLine{01520       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01521     \textcolor{keywordflow}{case} TZP\_XSHLEVEL:}
\DoxyCodeLine{01522       \textcolor{comment}{// Yep, we could have rasters, due to a cleanupping process}}
\DoxyCodeLine{01523       \textcolor{keywordflow}{if} (status == \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{TXshSimpleLevel::Scanned}})}
\DoxyCodeLine{01524         addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_raster_image_icon_renderer}{RasterImageIconRenderer}}(\textcolor{keywordtype}{id}, iconSize, sl, fid));}
\DoxyCodeLine{01525       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01526         addTask(\textcolor{keywordtype}{id},}
\DoxyCodeLine{01527                 \textcolor{keyword}{new} \mbox{\hyperlink{class_toonz_image_icon_renderer}{ToonzImageIconRenderer}}(\textcolor{keywordtype}{id}, iconSize, sl, fid, m\_settings));}
\DoxyCodeLine{01528       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01529     \textcolor{keywordflow}{case} MESH\_XSHLEVEL:}
\DoxyCodeLine{01530       addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_mesh_image_icon_renderer}{MeshImageIconRenderer}}(\textcolor{keywordtype}{id}, iconSize, sl, fid, m\_settings));}
\DoxyCodeLine{01531       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01532     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01533       assert(\textcolor{keyword}{false});}
\DoxyCodeLine{01534       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01535     \}}
\DoxyCodeLine{01536 }
\DoxyCodeLine{01537     m\_settings = oldSettings;}
\DoxyCodeLine{01538   \}}
\DoxyCodeLine{01539 }
\DoxyCodeLine{01540   \textcolor{keywordflow}{return} QPixmap();}
\DoxyCodeLine{01541 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_adc5ab3ce069ddf383b4ac201bffaeded}\label{class_icon_generator_adc5ab3ce069ddf383b4ac201bffaeded}} 
\index{IconGenerator@{IconGenerator}!instance@{instance}}
\index{instance@{instance}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{instance()}{instance()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_icon_generator}{Icon\+Generator}} $\ast$ Icon\+Generator\+::instance (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01336                                        \{}
\DoxyCodeLine{01337   \textcolor{keyword}{static} \mbox{\hyperlink{class_icon_generator}{IconGenerator}} \_instance;}
\DoxyCodeLine{01338   \textcolor{keywordflow}{return} \&\_instance;}
\DoxyCodeLine{01339 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_af777ef8ba9e6a110a1c4b30eb15fa91c}\label{class_icon_generator_af777ef8ba9e6a110a1c4b30eb15fa91c}} 
\index{IconGenerator@{IconGenerator}!invalidate@{invalidate}}
\index{invalidate@{invalidate}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{invalidate()}{invalidate()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily void Icon\+Generator\+::invalidate (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path,  }\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid = {\ttfamily TFrameId\+:\+:NO\+\_\+FRAME} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01697                                                                          \{}
\DoxyCodeLine{01698   std::string \textcolor{keywordtype}{id} = FileIconRenderer::getId(path, fid);}
\DoxyCodeLine{01699   removeIcon(\textcolor{keywordtype}{id});}
\DoxyCodeLine{01700   addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_file_icon_renderer}{FileIconRenderer}}(\mbox{\hyperlink{class_t_dimension_t}{TDimension}}(80, 60), path, fid));}
\DoxyCodeLine{01701 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_ac6fcc447d108540277e8b70acd34f5d8}\label{class_icon_generator_ac6fcc447d108540277e8b70acd34f5d8}} 
\index{IconGenerator@{IconGenerator}!invalidate@{invalidate}}
\index{invalidate@{invalidate}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{invalidate()}{invalidate()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily void Icon\+Generator\+::invalidate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$}]{spline }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01663                                                          \{}
\DoxyCodeLine{01664   \textcolor{keywordflow}{if} (!spline) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01665   std::string iconName = spline-\/>getIconId();}
\DoxyCodeLine{01666   removeIcon(iconName);}
\DoxyCodeLine{01667 }
\DoxyCodeLine{01668   addTask(iconName, \textcolor{keyword}{new} \mbox{\hyperlink{class_spline_icon_renderer}{SplineIconRenderer}}(iconName, getIconSize(), spline));}
\DoxyCodeLine{01669 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_ac6a648c3342c762111fb68f08d2b07af}\label{class_icon_generator_ac6a648c3342c762111fb68f08d2b07af}} 
\index{IconGenerator@{IconGenerator}!invalidate@{invalidate}}
\index{invalidate@{invalidate}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{invalidate()}{invalidate()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily void Icon\+Generator\+::invalidate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}} $\ast$}]{sl,  }\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid,  }\item[{bool}]{only\+Film\+Strip = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01546                                                    \{}
\DoxyCodeLine{01547   \textcolor{keywordflow}{if} (!xl) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01548 }
\DoxyCodeLine{01549   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = xl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_aac1fd1d3ecf0778b8ee139c9119fcdef}{getSimpleLevel}}()) \{}
\DoxyCodeLine{01550     std::string \textcolor{keywordtype}{id} = sl-\/>getIconId(fid);}
\DoxyCodeLine{01551 }
\DoxyCodeLine{01552     \textcolor{keywordtype}{int} type = sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}();}
\DoxyCodeLine{01553 }
\DoxyCodeLine{01554     \textcolor{keywordflow}{switch} (type) \{}
\DoxyCodeLine{01555     \textcolor{keywordflow}{case} OVL\_XSHLEVEL:}
\DoxyCodeLine{01556     \textcolor{keywordflow}{case} TZI\_XSHLEVEL:}
\DoxyCodeLine{01557       addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_raster_image_icon_renderer}{RasterImageIconRenderer}}(\textcolor{keywordtype}{id}, getIconSize(), sl, fid));}
\DoxyCodeLine{01558       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01559     \textcolor{keywordflow}{case} PLI\_XSHLEVEL:}
\DoxyCodeLine{01560       removeIcon(\textcolor{keywordtype}{id});}
\DoxyCodeLine{01561       addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_vector_image_icon_renderer}{VectorImageIconRenderer}}(\textcolor{keywordtype}{id}, getIconSize(), sl, fid,}
\DoxyCodeLine{01562                                               m\_settings));}
\DoxyCodeLine{01563       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01564     \textcolor{keywordflow}{case} TZP\_XSHLEVEL:}
\DoxyCodeLine{01565       \textcolor{keywordflow}{if} (sl-\/>getFrameStatus(fid) == \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{TXshSimpleLevel::Scanned}})}
\DoxyCodeLine{01566         addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_raster_image_icon_renderer}{RasterImageIconRenderer}}(\textcolor{keywordtype}{id}, getIconSize(), sl, fid));}
\DoxyCodeLine{01567       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01568         addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_toonz_image_icon_renderer}{ToonzImageIconRenderer}}(\textcolor{keywordtype}{id}, getIconSize(), sl, fid,}
\DoxyCodeLine{01569                                                m\_settings));}
\DoxyCodeLine{01570       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01571     \textcolor{keywordflow}{case} MESH\_XSHLEVEL:}
\DoxyCodeLine{01572       addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_mesh_image_icon_renderer}{MeshImageIconRenderer}}(\textcolor{keywordtype}{id}, getIconSize(), sl, fid,}
\DoxyCodeLine{01573                                             m\_settings));}
\DoxyCodeLine{01574       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01575     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01576       assert(\textcolor{keyword}{false});}
\DoxyCodeLine{01577       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01578     \}}
\DoxyCodeLine{01579 }
\DoxyCodeLine{01580     \textcolor{keywordflow}{if} (onlyFilmStrip) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01581 }
\DoxyCodeLine{01582     \textcolor{keywordtype}{id} += \textcolor{stringliteral}{"{}\_small"{}};}
\DoxyCodeLine{01583     \textcolor{keywordflow}{if} (iconsMap.find(\textcolor{keywordtype}{id}) == iconsMap.end()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01584 }
\DoxyCodeLine{01585     \textcolor{comment}{// Not-\/filmstrip icons disable all checks}}
\DoxyCodeLine{01586     \mbox{\hyperlink{class_icon_generator_1_1_settings}{IconGenerator::Settings}} oldSettings = m\_settings;}
\DoxyCodeLine{01587     m\_settings.m\_transparencyCheck      = \textcolor{keyword}{false};}
\DoxyCodeLine{01588     m\_settings.m\_inkIndex               = -\/1;}
\DoxyCodeLine{01589     m\_settings.m\_paintIndex             = -\/1;}
\DoxyCodeLine{01590     m\_settings.m\_blackBgCheck           = \textcolor{keyword}{false};}
\DoxyCodeLine{01591 }
\DoxyCodeLine{01592     \textcolor{keywordflow}{switch} (type) \{}
\DoxyCodeLine{01593     \textcolor{keywordflow}{case} OVL\_XSHLEVEL:}
\DoxyCodeLine{01594     \textcolor{keywordflow}{case} TZI\_XSHLEVEL:}
\DoxyCodeLine{01595       addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_raster_image_icon_renderer}{RasterImageIconRenderer}}(\textcolor{keywordtype}{id}, \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(80, 60), sl, fid));}
\DoxyCodeLine{01596       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01597     \textcolor{keywordflow}{case} PLI\_XSHLEVEL:}
\DoxyCodeLine{01598       addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_vector_image_icon_renderer}{VectorImageIconRenderer}}(\textcolor{keywordtype}{id}, \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(80, 60), sl, fid,}
\DoxyCodeLine{01599                                               m\_settings));}
\DoxyCodeLine{01600       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01601     \textcolor{keywordflow}{case} TZP\_XSHLEVEL:}
\DoxyCodeLine{01602       \textcolor{keywordflow}{if} (sl-\/>getFrameStatus(fid) == \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{TXshSimpleLevel::Scanned}})}
\DoxyCodeLine{01603         addTask(\textcolor{keywordtype}{id},}
\DoxyCodeLine{01604                 \textcolor{keyword}{new} \mbox{\hyperlink{class_raster_image_icon_renderer}{RasterImageIconRenderer}}(\textcolor{keywordtype}{id}, \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(80, 60), sl, fid));}
\DoxyCodeLine{01605       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01606         addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_toonz_image_icon_renderer}{ToonzImageIconRenderer}}(\textcolor{keywordtype}{id}, \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(80, 60), sl, fid,}
\DoxyCodeLine{01607                                                m\_settings));}
\DoxyCodeLine{01608       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01609     \textcolor{keywordflow}{case} MESH\_XSHLEVEL:}
\DoxyCodeLine{01610       addTask(\textcolor{keywordtype}{id}, \textcolor{keyword}{new} \mbox{\hyperlink{class_mesh_image_icon_renderer}{MeshImageIconRenderer}}(\textcolor{keywordtype}{id}, \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(80, 60), sl, fid,}
\DoxyCodeLine{01611                                             m\_settings));}
\DoxyCodeLine{01612       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01613     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01614       assert(\textcolor{keyword}{false});}
\DoxyCodeLine{01615       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01616     \}}
\DoxyCodeLine{01617 }
\DoxyCodeLine{01618     m\_settings = oldSettings;}
\DoxyCodeLine{01619   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_child_level}{TXshChildLevel}} *cl = xl-\/>\mbox{\hyperlink{class_t_xsh_child_level_a939e4baa485b3bdb71cec0f7597b17ea}{getChildLevel}}()) \{}
\DoxyCodeLine{01620     \textcolor{keywordflow}{if} (onlyFilmStrip) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01621 }
\DoxyCodeLine{01622     std::string \textcolor{keywordtype}{id} = XsheetIconRenderer::getId(cl, fid.getNumber() -\/ 1);}
\DoxyCodeLine{01623     removeIcon(\textcolor{keywordtype}{id});}
\DoxyCodeLine{01624 }
\DoxyCodeLine{01625     getIcon(xl, fid);}
\DoxyCodeLine{01626   \}}
\DoxyCodeLine{01627 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_af1470f29b3c877642c1255c513c41c81}\label{class_icon_generator_af1470f29b3c877642c1255c513c41c81}} 
\index{IconGenerator@{IconGenerator}!invalidateSceneIcon@{invalidateSceneIcon}}
\index{invalidateSceneIcon@{invalidateSceneIcon}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{invalidateSceneIcon()}{invalidateSceneIcon()}}
{\footnotesize\ttfamily void Icon\+Generator\+::invalidate\+Scene\+Icon (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01725                                         \{}
\DoxyCodeLine{01726   removeIcon(SceneIconRenderer::getId());}
\DoxyCodeLine{01727 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a5857c1312052a517ebc23f6ddac6e143}\label{class_icon_generator_a5857c1312052a517ebc23f6ddac6e143}} 
\index{IconGenerator@{IconGenerator}!notifyIconGenerated@{notifyIconGenerated}}
\index{notifyIconGenerated@{notifyIconGenerated}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{notifyIconGenerated()}{notifyIconGenerated()}}
{\footnotesize\ttfamily void Icon\+Generator\+::notify\+Icon\+Generated (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00146 \{ emit iconGenerated(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a6b78f844f33f30c2763b4e62c3c6480c}\label{class_icon_generator_a6b78f844f33f30c2763b4e62c3c6480c}} 
\index{IconGenerator@{IconGenerator}!onCanceled@{onCanceled}}
\index{onCanceled@{onCanceled}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{onCanceled}{onCanceled}}
{\footnotesize\ttfamily void Icon\+Generator\+::on\+Canceled (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_smart_pointer_t}{TThread\+::\+RunnableP}}}]{icon\+Renderer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01774                                                             \{}
\DoxyCodeLine{01775   \mbox{\hyperlink{class_icon_renderer}{IconRenderer}} *ir = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_icon_renderer}{IconRenderer}} *\textcolor{keyword}{>}(iconRenderer.getPointer());}
\DoxyCodeLine{01776 }
\DoxyCodeLine{01777   \textcolor{keywordflow}{if} (!ir-\/>hasStarted()) \{}
\DoxyCodeLine{01778     removeIcon(ir-\/>getId());}
\DoxyCodeLine{01779   \}}
\DoxyCodeLine{01780 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a0997ee97aeb8fadb2f6c6869683e4f9c}\label{class_icon_generator_a0997ee97aeb8fadb2f6c6869683e4f9c}} 
\index{IconGenerator@{IconGenerator}!onException@{onException}}
\index{onException@{onException}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{onException}{onException}}
{\footnotesize\ttfamily void Icon\+Generator\+::on\+Exception (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_smart_pointer_t}{TThread\+::\+RunnableP}}}]{icon\+Renderer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01810                                                              \{}
\DoxyCodeLine{01811   \mbox{\hyperlink{class_icon_renderer}{IconRenderer}} *ir = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_icon_renderer}{IconRenderer}} *\textcolor{keyword}{>}(iconRenderer.getPointer());}
\DoxyCodeLine{01812 }
\DoxyCodeLine{01813   \textcolor{keywordflow}{if} (ir-\/>wasTerminated()) m\_iconsTerminationLoop.quit();}
\DoxyCodeLine{01814 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a43827732bbeecea194fdb4fcee069f81}\label{class_icon_generator_a43827732bbeecea194fdb4fcee069f81}} 
\index{IconGenerator@{IconGenerator}!onFinished@{onFinished}}
\index{onFinished@{onFinished}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{onFinished}{onFinished}}
{\footnotesize\ttfamily void Icon\+Generator\+::on\+Finished (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_smart_pointer_t}{TThread\+::\+RunnableP}}}]{icon\+Renderer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01784                                                             \{}
\DoxyCodeLine{01785   \mbox{\hyperlink{class_icon_renderer}{IconRenderer}} *ir = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_icon_renderer}{IconRenderer}} *\textcolor{keyword}{>}(iconRenderer.getPointer());}
\DoxyCodeLine{01786 }
\DoxyCodeLine{01787   \textcolor{comment}{// if the icon was generated in TToonzImage format, cache it instead}}
\DoxyCodeLine{01788   \mbox{\hyperlink{class_toonz_image_icon_renderer}{ToonzImageIconRenderer}} *tir = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_toonz_image_icon_renderer}{ToonzImageIconRenderer}} *\textcolor{keyword}{>}(ir);}
\DoxyCodeLine{01789   \textcolor{keywordflow}{if} (tir) \{}
\DoxyCodeLine{01790     \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} timgp = tir-\/>getIcon\_TnzImg();}
\DoxyCodeLine{01791     \textcolor{keywordflow}{if} (timgp) \{}
\DoxyCodeLine{01792       ::setIcon\_TnzImg(ir-\/>getId(), timgp);}
\DoxyCodeLine{01793       emit iconGenerated();}
\DoxyCodeLine{01794       \textcolor{keywordflow}{if} (ir-\/>wasTerminated()) m\_iconsTerminationLoop.quit();}
\DoxyCodeLine{01795       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01796     \}}
\DoxyCodeLine{01797   \}}
\DoxyCodeLine{01798 }
\DoxyCodeLine{01799   \textcolor{comment}{// Update the icons map}}
\DoxyCodeLine{01800   \textcolor{keywordflow}{if} (ir-\/>getIcon()) \{}
\DoxyCodeLine{01801     ::setIcon(ir-\/>getId(), ir-\/>getIcon());}
\DoxyCodeLine{01802     emit iconGenerated();}
\DoxyCodeLine{01803   \}}
\DoxyCodeLine{01804 }
\DoxyCodeLine{01805   \textcolor{keywordflow}{if} (ir-\/>wasTerminated()) m\_iconsTerminationLoop.quit();}
\DoxyCodeLine{01806 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_ac7b58959e0199caf3750f78a3ca7e396}\label{class_icon_generator_ac7b58959e0199caf3750f78a3ca7e396}} 
\index{IconGenerator@{IconGenerator}!onStarted@{onStarted}}
\index{onStarted@{onStarted}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{onStarted}{onStarted}}
{\footnotesize\ttfamily void Icon\+Generator\+::on\+Started (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_smart_pointer_t}{TThread\+::\+RunnableP}}}]{icon\+Renderer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01766                                                            \{}
\DoxyCodeLine{01767   \mbox{\hyperlink{class_icon_renderer}{IconRenderer}} *ir = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_icon_renderer}{IconRenderer}} *\textcolor{keyword}{>}(iconRenderer.getPointer());}
\DoxyCodeLine{01768 }
\DoxyCodeLine{01769   ir-\/>hasStarted() = \textcolor{keyword}{true};}
\DoxyCodeLine{01770 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_aacb151e788a589c893c757c70d03e82b}\label{class_icon_generator_aacb151e788a589c893c757c70d03e82b}} 
\index{IconGenerator@{IconGenerator}!onTerminated@{onTerminated}}
\index{onTerminated@{onTerminated}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{onTerminated}{onTerminated}}
{\footnotesize\ttfamily void Icon\+Generator\+::on\+Terminated (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_smart_pointer_t}{TThread\+::\+RunnableP}}}]{icon\+Renderer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01818                                                               \{}
\DoxyCodeLine{01819   \mbox{\hyperlink{class_icon_renderer}{IconRenderer}} *ir = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_icon_renderer}{IconRenderer}} *\textcolor{keyword}{>}(iconRenderer.getPointer());}
\DoxyCodeLine{01820 }
\DoxyCodeLine{01821   ir-\/>wasTerminated() = \textcolor{keyword}{true};}
\DoxyCodeLine{01822   m\_iconsTerminationLoop.exec();}
\DoxyCodeLine{01823 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a19a63c3a171b4bf63b99545d1e163757}\label{class_icon_generator_a19a63c3a171b4bf63b99545d1e163757}} 
\index{IconGenerator@{IconGenerator}!remap@{remap}}
\index{remap@{remap}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{remap()}{remap()}}
{\footnotesize\ttfamily void Icon\+Generator\+::remap (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{new\+Icon\+Id,  }\item[{const std\+::string \&}]{old\+Icon\+Id }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01732                                                       \{}
\DoxyCodeLine{01733   IconIterator it = iconsMap.find(oldIconId);}
\DoxyCodeLine{01734   \textcolor{keywordflow}{if} (it == iconsMap.end()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01735 }
\DoxyCodeLine{01736   iconsMap.erase(it);}
\DoxyCodeLine{01737   iconsMap.insert(newIconId);}
\DoxyCodeLine{01738 }
\DoxyCodeLine{01739   TImageCache::instance()-\/>\mbox{\hyperlink{class_t_image_cache_a4a55f603009d6f1d884f9d1afee94178}{remap}}(newIconId, oldIconId);}
\DoxyCodeLine{01740 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a07d0368ae5640a65a81fb04f649aaecc}\label{class_icon_generator_a07d0368ae5640a65a81fb04f649aaecc}} 
\index{IconGenerator@{IconGenerator}!remove@{remove}}
\index{remove@{remove}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{remove()}{remove()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily void Icon\+Generator\+::remove (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path,  }\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid = {\ttfamily TFrameId\+:\+:NO\+\_\+FRAME} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01705                                                                      \{}
\DoxyCodeLine{01706   removeIcon(FileIconRenderer::getId(path, fid));}
\DoxyCodeLine{01707 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a4131e6ed0dfdd2d6b7fa03d07634fc53}\label{class_icon_generator_a4131e6ed0dfdd2d6b7fa03d07634fc53}} 
\index{IconGenerator@{IconGenerator}!remove@{remove}}
\index{remove@{remove}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{remove()}{remove()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily void Icon\+Generator\+::remove (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$}]{spline }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01673                                                      \{}
\DoxyCodeLine{01674   \textcolor{keywordflow}{if} (!spline) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01675   std::string iconName = spline-\/>getIconId();}
\DoxyCodeLine{01676   removeIcon(iconName);}
\DoxyCodeLine{01677 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a054654f4e10c6975c06714c4ccdca2e1}\label{class_icon_generator_a054654f4e10c6975c06714c4ccdca2e1}} 
\index{IconGenerator@{IconGenerator}!remove@{remove}}
\index{remove@{remove}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{remove()}{remove()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily void Icon\+Generator\+::remove (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}} $\ast$}]{sl,  }\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid,  }\item[{bool}]{only\+Film\+Strip = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01632                                                \{}
\DoxyCodeLine{01633   \textcolor{keywordflow}{if} (!xl) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01634   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = xl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_aac1fd1d3ecf0778b8ee139c9119fcdef}{getSimpleLevel}}()) \{}
\DoxyCodeLine{01635     std::string id(sl-\/>getIconId(fid));}
\DoxyCodeLine{01636 }
\DoxyCodeLine{01637     removeIcon(\textcolor{keywordtype}{id});}
\DoxyCodeLine{01638     \textcolor{keywordflow}{if} (!onlyFilmStrip) removeIcon(\textcolor{keywordtype}{id} + \textcolor{stringliteral}{"{}\_small"{}});}
\DoxyCodeLine{01639   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01640     \mbox{\hyperlink{class_t_xsh_child_level}{TXshChildLevel}} *cl = xl-\/>\mbox{\hyperlink{class_t_xsh_child_level_a939e4baa485b3bdb71cec0f7597b17ea}{getChildLevel}}();}
\DoxyCodeLine{01641     \textcolor{keywordflow}{if} (cl \&\& !onlyFilmStrip)}
\DoxyCodeLine{01642       removeIcon(XsheetIconRenderer::getId(cl, fid.getNumber() -\/ 1));}
\DoxyCodeLine{01643   \}}
\DoxyCodeLine{01644 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_a13c96ad7a049b329b4cf895303fdaa1e}\label{class_icon_generator_a13c96ad7a049b329b4cf895303fdaa1e}} 
\index{IconGenerator@{IconGenerator}!setFilmstripIconSize@{setFilmstripIconSize}}
\index{setFilmstripIconSize@{setFilmstripIconSize}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{setFilmstripIconSize()}{setFilmstripIconSize()}}
{\footnotesize\ttfamily void Icon\+Generator\+::set\+Filmstrip\+Icon\+Size (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&}]{dim }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01343                                                               \{}
\DoxyCodeLine{01344   FilmstripIconSize = dim;}
\DoxyCodeLine{01345 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_icon_generator_ae9041361a559309ad1a6adb4b279db6b}\label{class_icon_generator_ae9041361a559309ad1a6adb4b279db6b}} 
\index{IconGenerator@{IconGenerator}!setSettings@{setSettings}}
\index{setSettings@{setSettings}!IconGenerator@{IconGenerator}}
\doxysubsubsection{\texorpdfstring{setSettings()}{setSettings()}}
{\footnotesize\ttfamily void Icon\+Generator\+::set\+Settings (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_icon_generator_1_1_settings}{Settings}} \&}]{settings }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00092 \{ m\_settings = settings; \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonzqt/icongenerator.\+h\item 
E\+:/opentoonz/toonz/sources/toonzqt/icongenerator.\+cpp\end{DoxyCompactItemize}
