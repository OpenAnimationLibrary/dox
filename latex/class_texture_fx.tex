\hypertarget{class_texture_fx}{}\doxysection{Texture\+Fx Class Reference}
\label{class_texture_fx}\index{TextureFx@{TextureFx}}
Inheritance diagram for Texture\+Fx\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=5.000000cm]{class_texture_fx}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_texture_fx_aa5fd4898ce2f53d4e0df7d042455d944}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{class_texture_fx_a1463c3354cca394111b1d98a33fbc123}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&ri) override
\item 
void \mbox{\hyperlink{class_texture_fx_a5ca4e08cd18f74f761d6cc46fa012ae2}{do\+Dry\+Compute}} (\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
bool \mbox{\hyperlink{class_texture_fx_a6df1fd15be31ff4622886c3b944c2caa}{allow\+User\+Cache\+On\+Port}} (int port) override
\item 
int \mbox{\hyperlink{class_texture_fx_a00ee46fbc1a6559137244b9da7cb93e5}{get\+Memory\+Requirement}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
bool \mbox{\hyperlink{class_texture_fx_a2f100a8c4b502f8074c938a093fefd98}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_texture_fx_a6cd4f78611e05a7eacdc77e0a1ec64bc}\label{class_texture_fx_a6cd4f78611e05a7eacdc77e0a1ec64bc}} 
\index{TextureFx@{TextureFx}!TextureFx@{TextureFx}}
\index{TextureFx@{TextureFx}!TextureFx@{TextureFx}}
\doxysubsubsection{\texorpdfstring{TextureFx()}{TextureFx()}}
{\footnotesize\ttfamily Texture\+Fx\+::\+Texture\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00024       : m\_string(L\textcolor{stringliteral}{"{}1,2,3"{}})}
\DoxyCodeLine{00025       , m\_keep(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_enum_param}{TIntEnumParam}}(0, \textcolor{stringliteral}{"{}Delete"{}}))}
\DoxyCodeLine{00026       \textcolor{comment}{//, m\_type(new TIntEnumParam(0, "{}Lines \& Areas"{}))}}
\DoxyCodeLine{00027       , m\_mode(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_enum_param}{TIntEnumParam}}(SUBSTITUTE, \textcolor{stringliteral}{"{}Texture"{}}))}
\DoxyCodeLine{00028       , m\_value(100) \{}
\DoxyCodeLine{00029     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Source"{}}, m\_input);}
\DoxyCodeLine{00030     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Texture"{}}, m\_texture);}
\DoxyCodeLine{00031     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}indexes"{}}, m\_string);}
\DoxyCodeLine{00032     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}keep"{}}, m\_keep);}
\DoxyCodeLine{00033     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}mode"{}}, m\_mode);}
\DoxyCodeLine{00034     \textcolor{comment}{// bindParam(this,"{}type"{},  m\_type);}}
\DoxyCodeLine{00035     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}value"{}}, m\_value);}
\DoxyCodeLine{00036     m\_value-\/>setValueRange(0, 100);}
\DoxyCodeLine{00037     m\_keep-\/>addItem(1, \textcolor{stringliteral}{"{}Keep"{}});}
\DoxyCodeLine{00038     \textcolor{comment}{// m\_type-\/>addItem(1, "{}Lines"{});}}
\DoxyCodeLine{00039     \textcolor{comment}{// m\_type-\/>addItem(2, "{}Areas"{});}}
\DoxyCodeLine{00040     m\_mode-\/>addItem(PATTERNTYPE, \textcolor{stringliteral}{"{}Pattern"{}});}
\DoxyCodeLine{00041     m\_mode-\/>addItem(ADD, \textcolor{stringliteral}{"{}Add"{}});}
\DoxyCodeLine{00042     m\_mode-\/>addItem(SUBTRACT, \textcolor{stringliteral}{"{}Subtract"{}});}
\DoxyCodeLine{00043     m\_mode-\/>addItem(MULTIPLY, \textcolor{stringliteral}{"{}Multiply"{}});}
\DoxyCodeLine{00044     m\_mode-\/>addItem(LIGHTEN, \textcolor{stringliteral}{"{}Lighten"{}});}
\DoxyCodeLine{00045     m\_mode-\/>addItem(DARKEN, \textcolor{stringliteral}{"{}Darken"{}});}
\DoxyCodeLine{00046   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_texture_fx_a58978aabbedfe07337d7f05f69b673b7}\label{class_texture_fx_a58978aabbedfe07337d7f05f69b673b7}} 
\index{TextureFx@{TextureFx}!````~TextureFx@{$\sim$TextureFx}}
\index{````~TextureFx@{$\sim$TextureFx}!TextureFx@{TextureFx}}
\doxysubsubsection{\texorpdfstring{$\sim$TextureFx()}{~TextureFx()}}
{\footnotesize\ttfamily Texture\+Fx\+::$\sim$\+Texture\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00048 \{\};}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_texture_fx_a6df1fd15be31ff4622886c3b944c2caa}\label{class_texture_fx_a6df1fd15be31ff4622886c3b944c2caa}} 
\index{TextureFx@{TextureFx}!allowUserCacheOnPort@{allowUserCacheOnPort}}
\index{allowUserCacheOnPort@{allowUserCacheOnPort}!TextureFx@{TextureFx}}
\doxysubsubsection{\texorpdfstring{allowUserCacheOnPort()}{allowUserCacheOnPort()}}
{\footnotesize\ttfamily bool Texture\+Fx\+::allow\+User\+Cache\+On\+Port (\begin{DoxyParamCaption}\item[{int}]{port }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00065 \{ \textcolor{keywordflow}{return} port != 0; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_texture_fx_a2f100a8c4b502f8074c938a093fefd98}\label{class_texture_fx_a2f100a8c4b502f8074c938a093fefd98}} 
\index{TextureFx@{TextureFx}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!TextureFx@{TextureFx}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool Texture\+Fx\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00069                                                                      \{}
\DoxyCodeLine{00070     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00071   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_texture_fx_a1463c3354cca394111b1d98a33fbc123}\label{class_texture_fx_a1463c3354cca394111b1d98a33fbc123}} 
\index{TextureFx@{TextureFx}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!TextureFx@{TextureFx}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void Texture\+Fx\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{ri }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00110                                                      \{}
\DoxyCodeLine{00111   \textcolor{keywordflow}{if} (!m\_input.isConnected()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00112 }
\DoxyCodeLine{00113   \mbox{\hyperlink{class_t_tile}{TTile}} invertMaskTile;}
\DoxyCodeLine{00114 }
\DoxyCodeLine{00115   \textcolor{comment}{// carico il vettore items con gli indici dei colori}}
\DoxyCodeLine{00116   std::vector<std::string> items;}
\DoxyCodeLine{00117   std::string indexes = ::to\_string(m\_string-\/>getValue());}
\DoxyCodeLine{00118   parseIndexes(indexes, items);}
\DoxyCodeLine{00119 }
\DoxyCodeLine{00120   \textcolor{comment}{// genero il tile il cui raster contiene l'immagine in input a cui sono stati}}
\DoxyCodeLine{00121   \textcolor{comment}{// tolti i pixel}}
\DoxyCodeLine{00122   \textcolor{comment}{// colorati con gli indici contenuti nel vettore items}}
\DoxyCodeLine{00123   \mbox{\hyperlink{class_t_render_settings}{TRenderSettings}} ri2(ri);}
\DoxyCodeLine{00124   \mbox{\hyperlink{class_palette_filter_fx_render_data}{PaletteFilterFxRenderData}} *PaletteFilterData = \textcolor{keyword}{new} \mbox{\hyperlink{class_palette_filter_fx_render_data}{PaletteFilterFxRenderData}};}
\DoxyCodeLine{00125   PaletteFilterData-\/>m\_keep                    = !!(m\_keep-\/>getValue());}
\DoxyCodeLine{00126   insertIndexes(items, PaletteFilterData);}
\DoxyCodeLine{00127 }
\DoxyCodeLine{00128   ri2.m\_data.push\_back(PaletteFilterData);}
\DoxyCodeLine{00129   ri2.m\_userCachable = \textcolor{keyword}{false};}
\DoxyCodeLine{00130 }
\DoxyCodeLine{00131   m\_input-\/>allocateAndCompute(invertMaskTile, tile.m\_pos,}
\DoxyCodeLine{00132                               tile.getRaster()-\/>getSize(), tile.getRaster(),}
\DoxyCodeLine{00133                               frame, ri2);}
\DoxyCodeLine{00134 }
\DoxyCodeLine{00135   \textcolor{keywordflow}{if} (!m\_texture.isConnected()) \{}
\DoxyCodeLine{00136     tile.getRaster()-\/>\mbox{\hyperlink{class_t_raster_a3c590c4ebe4cb8c1f352437692ffd20e}{copy}}(invertMaskTile.getRaster());}
\DoxyCodeLine{00137     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00138   \}}
\DoxyCodeLine{00139 }
\DoxyCodeLine{00140   \textcolor{comment}{// genero il tile il cui raster contiene l'immagine in input a cui sono stati}}
\DoxyCodeLine{00141   \textcolor{comment}{// tolti i pixel}}
\DoxyCodeLine{00142   \textcolor{comment}{// colorati con indici diversi da quelli contenuti nel vettore items}}
\DoxyCodeLine{00143   \textcolor{keywordtype}{bool} isSwatch                = ri2.m\_isSwatch;}
\DoxyCodeLine{00144   \textcolor{keywordflow}{if} (isSwatch) ri2.m\_isSwatch = \textcolor{keyword}{false};}
\DoxyCodeLine{00145   PaletteFilterData-\/>m\_keep    = !(m\_keep-\/>getValue());}
\DoxyCodeLine{00146   m\_input-\/>compute(tile, frame, ri2);}
\DoxyCodeLine{00147   \textcolor{keywordflow}{if} (isSwatch) ri2.m\_isSwatch = \textcolor{keyword}{true};}
\DoxyCodeLine{00148 }
\DoxyCodeLine{00149   \textcolor{comment}{// controllo se ho ottenuto quaclosa su cui si possa lavorare.}}
\DoxyCodeLine{00150   \mbox{\hyperlink{class_t_rect_t}{TRect}} box;}
\DoxyCodeLine{00151   \mbox{\hyperlink{namespace_t_rop_a1dfdba06d4f71d86755d8e0833a7a071}{TRop::computeBBox}}(tile.getRaster(), box);}
\DoxyCodeLine{00152   \textcolor{keywordflow}{if} (box.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \{}
\DoxyCodeLine{00153     m\_input-\/>compute(tile, frame, ri);  \textcolor{comment}{// Could the invertMask be copied??}}
\DoxyCodeLine{00154     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00155   \}}
\DoxyCodeLine{00156 }
\DoxyCodeLine{00157   \textcolor{comment}{// Then, generate the texture tile}}
\DoxyCodeLine{00158   \mbox{\hyperlink{class_t_tile}{TTile}} textureTile;}
\DoxyCodeLine{00159   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} size = tile.getRaster()-\/>getSize();}
\DoxyCodeLine{00160   \mbox{\hyperlink{class_t_point_t}{TPointD}} pos     = tile.m\_pos;}
\DoxyCodeLine{00161   m\_texture-\/>allocateAndCompute(textureTile, pos, size, tile.getRaster(), frame,}
\DoxyCodeLine{00162                                 ri);}
\DoxyCodeLine{00163 }
\DoxyCodeLine{00164   \textcolor{comment}{// And copy the part corresponding to mask tile}}
\DoxyCodeLine{00165   \textcolor{comment}{/*TDimension dim = tile.getRaster()-\/>getSize();}}
\DoxyCodeLine{00166 \textcolor{comment}{TRasterP appRas = tile.getRaster()-\/>create(dim.lx,dim.ly);}}
\DoxyCodeLine{00167 \textcolor{comment}{  appRas-\/>clear();}}
\DoxyCodeLine{00168 \textcolor{comment}{  appRas-\/>copy(textureTile.getRaster(),convert(textureTile.m\_pos-\/tile.m\_pos));}}
\DoxyCodeLine{00169 \textcolor{comment}{  textureTile.setRaster(appRas);*/}}
\DoxyCodeLine{00170 }
\DoxyCodeLine{00171   \textcolor{keywordtype}{double} v = m\_value-\/>getValue(frame);}
\DoxyCodeLine{00172   \textcolor{keywordflow}{if} (ri.\mbox{\hyperlink{class_t_render_settings_a9489ed9d21a047b29cc5dd285f1f6f19}{m\_bpp}} == 32) \{}
\DoxyCodeLine{00173     \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} witheCard;}
\DoxyCodeLine{00174 }
\DoxyCodeLine{00175     myOver32(tile.getRaster(), invertMaskTile.getRaster(),}
\DoxyCodeLine{00176              \&makeOpaque<TPixel32>, v);}
\DoxyCodeLine{00177 }
\DoxyCodeLine{00178     \textcolor{keywordflow}{switch} (m\_mode-\/>getValue()) \{}
\DoxyCodeLine{00179     \textcolor{keywordflow}{case} SUBSTITUTE:}
\DoxyCodeLine{00180       myOver32(tile.getRaster(), textureTile.getRaster(), \&substitute<TPixel32>,}
\DoxyCodeLine{00181                v);}
\DoxyCodeLine{00182       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00183     \textcolor{keywordflow}{case} PATTERNTYPE:}
\DoxyCodeLine{00184       witheCard = \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}(textureTile.getRaster()-\/>getSize());}
\DoxyCodeLine{00185       witheCard-\/>fill(TPixel32::White);}
\DoxyCodeLine{00186       \mbox{\hyperlink{namespace_t_rop_ae5fd1fb0c2f625e1da14fe92ae0e5122}{TRop::over}}(textureTile.getRaster(), witheCard, textureTile.getRaster());}
\DoxyCodeLine{00187       myOver32(tile.getRaster(), textureTile.getRaster(), \&pattern32, v);}
\DoxyCodeLine{00188       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00189     \textcolor{keywordflow}{case} ADD:}
\DoxyCodeLine{00190       myOver32(tile.getRaster(), textureTile.getRaster(), \&textureAdd<TPixel32>,}
\DoxyCodeLine{00191                v / 100.0);}
\DoxyCodeLine{00192       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00193     \textcolor{keywordflow}{case} SUBTRACT:}
\DoxyCodeLine{00194       myOver32(tile.getRaster(), textureTile.getRaster(), \&textureSub<TPixel32>,}
\DoxyCodeLine{00195                v / 100.0);}
\DoxyCodeLine{00196       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00197     \textcolor{keywordflow}{case} MULTIPLY:}
\DoxyCodeLine{00198       myOver32(tile.getRaster(), textureTile.getRaster(),}
\DoxyCodeLine{00199                \&textureMult<TPixel32>, v);}
\DoxyCodeLine{00200       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00201     \textcolor{keywordflow}{case} DARKEN:}
\DoxyCodeLine{00202       myOver32(tile.getRaster(), textureTile.getRaster(),}
\DoxyCodeLine{00203                \&textureDarken<TPixel32>, v);}
\DoxyCodeLine{00204       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00205     \textcolor{keywordflow}{case} LIGHTEN:}
\DoxyCodeLine{00206       myOver32(tile.getRaster(), textureTile.getRaster(),}
\DoxyCodeLine{00207                \&textureLighten<TPixel32>, v);}
\DoxyCodeLine{00208       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00209     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00210       assert(0);}
\DoxyCodeLine{00211       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00212     \}}
\DoxyCodeLine{00213   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00214     \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} witheCard;}
\DoxyCodeLine{00215 }
\DoxyCodeLine{00216     myOver64(tile.getRaster(), invertMaskTile.getRaster(),}
\DoxyCodeLine{00217              \&makeOpaque<TPixel64>, v);}
\DoxyCodeLine{00218 }
\DoxyCodeLine{00219     \textcolor{keywordflow}{switch} (m\_mode-\/>getValue()) \{}
\DoxyCodeLine{00220     \textcolor{keywordflow}{case} SUBSTITUTE:}
\DoxyCodeLine{00221       myOver64(tile.getRaster(), textureTile.getRaster(), \&substitute<TPixel64>,}
\DoxyCodeLine{00222                v);}
\DoxyCodeLine{00223       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00224     \textcolor{keywordflow}{case} PATTERNTYPE:}
\DoxyCodeLine{00225       witheCard = \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}}(textureTile.getRaster()-\/>getSize());}
\DoxyCodeLine{00226       witheCard-\/>fill(TPixel64::White);}
\DoxyCodeLine{00227       \mbox{\hyperlink{namespace_t_rop_ae5fd1fb0c2f625e1da14fe92ae0e5122}{TRop::over}}(textureTile.getRaster(), witheCard, textureTile.getRaster());}
\DoxyCodeLine{00228       myOver64(tile.getRaster(), textureTile.getRaster(), \&pattern64, v);}
\DoxyCodeLine{00229       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00230     \textcolor{keywordflow}{case} ADD:}
\DoxyCodeLine{00231       myOver64(tile.getRaster(), textureTile.getRaster(), \&textureAdd<TPixel64>,}
\DoxyCodeLine{00232                v / 100.0);}
\DoxyCodeLine{00233       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00234     \textcolor{keywordflow}{case} SUBTRACT:}
\DoxyCodeLine{00235       myOver64(tile.getRaster(), textureTile.getRaster(), \&textureSub<TPixel64>,}
\DoxyCodeLine{00236                v / 100.0);}
\DoxyCodeLine{00237       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00238     \textcolor{keywordflow}{case} MULTIPLY:}
\DoxyCodeLine{00239       myOver64(tile.getRaster(), textureTile.getRaster(),}
\DoxyCodeLine{00240                \&textureMult<TPixel64>, v);}
\DoxyCodeLine{00241       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00242     \textcolor{keywordflow}{case} DARKEN:}
\DoxyCodeLine{00243       myOver64(tile.getRaster(), textureTile.getRaster(),}
\DoxyCodeLine{00244                \&textureDarken<TPixel64>, v);}
\DoxyCodeLine{00245       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00246     \textcolor{keywordflow}{case} LIGHTEN:}
\DoxyCodeLine{00247       myOver64(tile.getRaster(), textureTile.getRaster(),}
\DoxyCodeLine{00248                \&textureLighten<TPixel64>, v);}
\DoxyCodeLine{00249       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00250     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00251       assert(0);}
\DoxyCodeLine{00252     \}}
\DoxyCodeLine{00253   \}}
\DoxyCodeLine{00254 }
\DoxyCodeLine{00255   \mbox{\hyperlink{namespace_t_rop_ae5fd1fb0c2f625e1da14fe92ae0e5122}{TRop::over}}(tile.getRaster(), invertMaskTile.getRaster());}
\DoxyCodeLine{00256 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_texture_fx_a5ca4e08cd18f74f761d6cc46fa012ae2}\label{class_texture_fx_a5ca4e08cd18f74f761d6cc46fa012ae2}} 
\index{TextureFx@{TextureFx}!doDryCompute@{doDryCompute}}
\index{doDryCompute@{doDryCompute}!TextureFx@{TextureFx}}
\doxysubsubsection{\texorpdfstring{doDryCompute()}{doDryCompute()}}
{\footnotesize\ttfamily void Texture\+Fx\+::do\+Dry\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Declares the computation scheme of this fx for rendering optimization purposes. This is an important function of the Toonz rendering API, and should be reimplemented with the necessary care. The Toonz rendering process makes use of this function to enact most of the optimization steps about the fx computation, in particular fx caching. A correct implementation of this method should follow these rules\+:  The invocation of child node computations should be faithfully reproduced.  TRaster\+Fx\+::compute and TRaster\+Fx\+::allocate\+And\+Compute calls have to be translated to TRaster\+Fx\+::dry\+Compute calls.  This fx is intended for precomputation stage, so the hard rendering code should be skipped here. By default, this method raises a dry\+Compute call to each input port in increasing order, using the TRaster\+Fx\+::transform method to identify the tiles to be passed on input precomputation. 

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_a47ec31d2d4c3a066cd6744fb8c80edf2}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00077                                                           \{}
\DoxyCodeLine{00078   \textcolor{keywordflow}{if} (!m\_input.isConnected()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00079 }
\DoxyCodeLine{00080   std::vector<std::string> items;}
\DoxyCodeLine{00081   std::string indexes = ::to\_string(m\_string-\/>getValue());}
\DoxyCodeLine{00082   parseIndexes(indexes, items);}
\DoxyCodeLine{00083   \mbox{\hyperlink{class_t_render_settings}{TRenderSettings}} ri2(info);}
\DoxyCodeLine{00084   \mbox{\hyperlink{class_palette_filter_fx_render_data}{PaletteFilterFxRenderData}} *PaletteFilterData = \textcolor{keyword}{new} \mbox{\hyperlink{class_palette_filter_fx_render_data}{PaletteFilterFxRenderData}};}
\DoxyCodeLine{00085   insertIndexes(items, PaletteFilterData);}
\DoxyCodeLine{00086   PaletteFilterData-\/>m\_keep = (bool)(m\_keep-\/>getValue() == 1);}
\DoxyCodeLine{00087 }
\DoxyCodeLine{00088   ri2.m\_data.push\_back(PaletteFilterData);}
\DoxyCodeLine{00089   ri2.m\_userCachable = \textcolor{keyword}{false};}
\DoxyCodeLine{00090 }
\DoxyCodeLine{00091   \textcolor{comment}{// First child compute: part of output that IS NOT texturized}}
\DoxyCodeLine{00092   m\_input-\/>dryCompute(rect, frame, ri2);}
\DoxyCodeLine{00093 }
\DoxyCodeLine{00094   \textcolor{keywordflow}{if} (!m\_texture.isConnected()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00095 }
\DoxyCodeLine{00096   \textcolor{keywordtype}{bool} isSwatch                = ri2.m\_isSwatch;}
\DoxyCodeLine{00097   \textcolor{keywordflow}{if} (isSwatch) ri2.m\_isSwatch = \textcolor{keyword}{false};}
\DoxyCodeLine{00098   PaletteFilterData-\/>m\_keep    = !(m\_keep-\/>getValue());}
\DoxyCodeLine{00099 }
\DoxyCodeLine{00100   \textcolor{comment}{// Second child compute: part of output that IS to be texturized}}
\DoxyCodeLine{00101   m\_input-\/>dryCompute(rect, frame, ri2);}
\DoxyCodeLine{00102 }
\DoxyCodeLine{00103   \textcolor{comment}{// Third child compute: texture}}
\DoxyCodeLine{00104   m\_texture-\/>dryCompute(rect, frame, info);}
\DoxyCodeLine{00105 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00101}{TRender\+Settings\+::m\+\_\+data}}, \mbox{\hyperlink{l00136}{TRender\+Settings\+::m\+\_\+is\+Swatch}}, and \mbox{\hyperlink{l00139}{TRender\+Settings\+::m\+\_\+user\+Cachable}}.

\mbox{\Hypertarget{class_texture_fx_aa5fd4898ce2f53d4e0df7d042455d944}\label{class_texture_fx_aa5fd4898ce2f53d4e0df7d042455d944}} 
\index{TextureFx@{TextureFx}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!TextureFx@{TextureFx}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool Texture\+Fx\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00051                                                        \{}
\DoxyCodeLine{00052     \textcolor{keywordflow}{if} (m\_input.isConnected()) \{}
\DoxyCodeLine{00053       \textcolor{keywordtype}{bool} ret = m\_input-\/>doGetBBox(frame, bBox, info);}
\DoxyCodeLine{00054       \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00055     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00056       bBox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00057       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00058     \}}
\DoxyCodeLine{00059   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_texture_fx_a00ee46fbc1a6559137244b9da7cb93e5}\label{class_texture_fx_a00ee46fbc1a6559137244b9da7cb93e5}} 
\index{TextureFx@{TextureFx}!getMemoryRequirement@{getMemoryRequirement}}
\index{getMemoryRequirement@{getMemoryRequirement}!TextureFx@{TextureFx}}
\doxysubsubsection{\texorpdfstring{getMemoryRequirement()}{getMemoryRequirement()}}
{\footnotesize\ttfamily int Texture\+Fx\+::get\+Memory\+Requirement (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Specifies the approximate size (in Mega\+Bytes) of the maximum allocation instance that this fx will need to perform in order to render the passed input. This method should be reimplemented in order to make the Toonz rendering process aware of the use of big raster memory chunks, at least. Observe that the passed tile geometry is implicitly {\itshape  already allocated \texorpdfstring{$<$}{<}\textbackslash{}i\texorpdfstring{$>$}{>} for the fx output. ~\newline
The default implementation returns 0, assuming that the passed implicit memory size is passed below in node computation without further allocation of resources. Fxs can reimplement this to -\/1 to explicitly disable the Toonz\textquotesingle{}s smart memory handling. ~\newline
 ~\newline
\begin{DoxyNote}{Note}
The rendering process ensures that the passed render settings are {\itshape handled} by the fx before this function is invoked -\/ do not waste code for it. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRaster\+Fx\+::memory\+Size}} and TRaster\+Fx\+::can\+Handle methods. 
\end{DoxySeeAlso}
}

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_af8eb991c9756f4fb2e48d9f96cbacfba}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00261                                                                  \{}
\DoxyCodeLine{00262   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRasterFx::memorySize}}(rect, info.m\_bpp);}
\DoxyCodeLine{00263 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00560}{TRaster\+Fx\+::memory\+Size()}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/texturefx.\+cpp\end{DoxyCompactItemize}
