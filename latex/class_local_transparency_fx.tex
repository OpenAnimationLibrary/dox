\hypertarget{class_local_transparency_fx}{}\doxysection{Local\+Transparency\+Fx Class Reference}
\label{class_local_transparency_fx}\index{LocalTransparencyFx@{LocalTransparencyFx}}
Inheritance diagram for Local\+Transparency\+Fx\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=5.000000cm]{class_local_transparency_fx}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_local_transparency_fx_a288befed98464ad06aca968ae0fdd6ca}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{class_local_transparency_fx_ad398a7e92ade879cc6735f2d2799bc16}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&ri) override
\item 
bool \mbox{\hyperlink{class_local_transparency_fx_aa54097a6b878f3e4642df2654c7fda36}{check\+Before\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info)
\item 
bool \mbox{\hyperlink{class_local_transparency_fx_ad507cb263adb59380229dda249d66850}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\item 
int \mbox{\hyperlink{class_local_transparency_fx_a348e83530abf0f439ee7111b6db97b1e}{get\+Memory\+Requirement}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} \mbox{\hyperlink{class_local_transparency_fx_a79149ebfefe543051324452fc56e1c75}{m\+\_\+src}}
\item 
\mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} \mbox{\hyperlink{class_local_transparency_fx_a5a8aecd05f87b84fd82ede5d9189bfa4}{m\+\_\+ref}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_local_transparency_fx_a72f8a5cc329a1a1c046e2b8f1c486083}{m\+\_\+value}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_local_transparency_fx_a3f6529f83d0dccdc2797711d69096a51}\label{class_local_transparency_fx_a3f6529f83d0dccdc2797711d69096a51}} 
\index{LocalTransparencyFx@{LocalTransparencyFx}!LocalTransparencyFx@{LocalTransparencyFx}}
\index{LocalTransparencyFx@{LocalTransparencyFx}!LocalTransparencyFx@{LocalTransparencyFx}}
\doxysubsubsection{\texorpdfstring{LocalTransparencyFx()}{LocalTransparencyFx()}}
{\footnotesize\ttfamily Local\+Transparency\+Fx\+::\+Local\+Transparency\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00123                         : m\_value(100) \{}
\DoxyCodeLine{00124     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Source"{}}, m\_src);}
\DoxyCodeLine{00125     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Reference"{}}, m\_ref);}
\DoxyCodeLine{00126     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}value"{}}, m\_value);}
\DoxyCodeLine{00127     m\_value-\/>setValueRange(0, 100);}
\DoxyCodeLine{00128   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_local_transparency_fx_a05be9990c9c8b672d0bc96894e0d898e}\label{class_local_transparency_fx_a05be9990c9c8b672d0bc96894e0d898e}} 
\index{LocalTransparencyFx@{LocalTransparencyFx}!````~LocalTransparencyFx@{$\sim$LocalTransparencyFx}}
\index{````~LocalTransparencyFx@{$\sim$LocalTransparencyFx}!LocalTransparencyFx@{LocalTransparencyFx}}
\doxysubsubsection{\texorpdfstring{$\sim$LocalTransparencyFx()}{~LocalTransparencyFx()}}
{\footnotesize\ttfamily virtual Local\+Transparency\+Fx\+::$\sim$\+Local\+Transparency\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00129 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_local_transparency_fx_ad507cb263adb59380229dda249d66850}\label{class_local_transparency_fx_ad507cb263adb59380229dda249d66850}} 
\index{LocalTransparencyFx@{LocalTransparencyFx}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!LocalTransparencyFx@{LocalTransparencyFx}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool Local\+Transparency\+Fx\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00182                                                                      \{}
\DoxyCodeLine{00183     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00184   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_local_transparency_fx_aa54097a6b878f3e4642df2654c7fda36}\label{class_local_transparency_fx_aa54097a6b878f3e4642df2654c7fda36}} 
\index{LocalTransparencyFx@{LocalTransparencyFx}!checkBeforeCompute@{checkBeforeCompute}}
\index{checkBeforeCompute@{checkBeforeCompute}!LocalTransparencyFx@{LocalTransparencyFx}}
\doxysubsubsection{\texorpdfstring{checkBeforeCompute()}{checkBeforeCompute()}}
{\footnotesize\ttfamily bool Local\+Transparency\+Fx\+::check\+Before\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00169                                                        \{}
\DoxyCodeLine{00170     Status status = getFxStatus(m\_src, m\_ref);}
\DoxyCodeLine{00171     \textcolor{keywordflow}{if} ((status \& NoPortsConnected) == NoPortsConnected) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00172     \textcolor{keywordflow}{if} ((status \& OutOfTime) == OutOfTime) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00173     \textcolor{keywordflow}{if} ((status \& Port0NotConnected) == Port0NotConnected) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00174     \textcolor{keywordflow}{if} ((status \& Port1NotConnected) == Port1NotConnected) \{}
\DoxyCodeLine{00175       m\_src-\/>compute(tile, frame, info);}
\DoxyCodeLine{00176       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00177     \}}
\DoxyCodeLine{00178     assert(status == StatusGood);}
\DoxyCodeLine{00179     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00180   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_local_transparency_fx_ad398a7e92ade879cc6735f2d2799bc16}\label{class_local_transparency_fx_ad398a7e92ade879cc6735f2d2799bc16}} 
\index{LocalTransparencyFx@{LocalTransparencyFx}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!LocalTransparencyFx@{LocalTransparencyFx}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void Local\+Transparency\+Fx\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{ri }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00142                                                      \{}
\DoxyCodeLine{00143     \textcolor{keywordflow}{if} (!checkBeforeCompute(tile, frame, ri)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00144     \mbox{\hyperlink{class_t_tile}{TTile}} srcTile;}
\DoxyCodeLine{00145     m\_src-\/>allocateAndCompute(srcTile, tile.m\_pos, tile.getRaster()-\/>getSize(),}
\DoxyCodeLine{00146                               tile.getRaster(), frame, ri);}
\DoxyCodeLine{00147     \textcolor{comment}{// TTile refTile = tile;}}
\DoxyCodeLine{00148     m\_ref-\/>compute(tile, frame, ri);}
\DoxyCodeLine{00149 }
\DoxyCodeLine{00150     \textcolor{comment}{// TRaster32P ref32 (refTile.getRaster());}}
\DoxyCodeLine{00151     \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} out32(tile.getRaster());}
\DoxyCodeLine{00152     \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} src32(srcTile.getRaster());}
\DoxyCodeLine{00153     \textcolor{keywordflow}{if} (out32 \&\& src32)}
\DoxyCodeLine{00154       doLocalTransparency<TPixelRGBM32, TPixelGR8, UCHAR>(}
\DoxyCodeLine{00155           out32, src32, out32, m\_value-\/>getValue(frame) / 100.);}
\DoxyCodeLine{00156     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00157       \textcolor{comment}{// TRaster64P ref64(refTile.getRaster());}}
\DoxyCodeLine{00158       \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} out64(tile.getRaster());}
\DoxyCodeLine{00159       \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} src64(srcTile.getRaster());}
\DoxyCodeLine{00160       \textcolor{keywordflow}{if} (out64 \&\& src64)}
\DoxyCodeLine{00161         doLocalTransparency<TPixelRGBM64, TPixelGR16, USHORT>(}
\DoxyCodeLine{00162             out64, src64, out64, m\_value-\/>getValue(frame) / 100.);}
\DoxyCodeLine{00163       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00164         \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}LocalTransparencyFx: unsupported raster type"{}});}
\DoxyCodeLine{00165     \}}
\DoxyCodeLine{00166   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_local_transparency_fx_a288befed98464ad06aca968ae0fdd6ca}\label{class_local_transparency_fx_a288befed98464ad06aca968ae0fdd6ca}} 
\index{LocalTransparencyFx@{LocalTransparencyFx}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!LocalTransparencyFx@{LocalTransparencyFx}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool Local\+Transparency\+Fx\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00132                                                        \{}
\DoxyCodeLine{00133     \textcolor{keywordflow}{if} (m\_src.isConnected())}
\DoxyCodeLine{00134       \textcolor{keywordflow}{return} m\_src-\/>doGetBBox(frame, bBox, info);}
\DoxyCodeLine{00135     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00136       bBox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00137       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00138     \}}
\DoxyCodeLine{00139   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_local_transparency_fx_a348e83530abf0f439ee7111b6db97b1e}\label{class_local_transparency_fx_a348e83530abf0f439ee7111b6db97b1e}} 
\index{LocalTransparencyFx@{LocalTransparencyFx}!getMemoryRequirement@{getMemoryRequirement}}
\index{getMemoryRequirement@{getMemoryRequirement}!LocalTransparencyFx@{LocalTransparencyFx}}
\doxysubsubsection{\texorpdfstring{getMemoryRequirement()}{getMemoryRequirement()}}
{\footnotesize\ttfamily int Local\+Transparency\+Fx\+::get\+Memory\+Requirement (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Specifies the approximate size (in Mega\+Bytes) of the maximum allocation instance that this fx will need to perform in order to render the passed input. This method should be reimplemented in order to make the Toonz rendering process aware of the use of big raster memory chunks, at least. Observe that the passed tile geometry is implicitly {\itshape  already allocated \texorpdfstring{$<$}{<}\textbackslash{}i\texorpdfstring{$>$}{>} for the fx output. ~\newline
The default implementation returns 0, assuming that the passed implicit memory size is passed below in node computation without further allocation of resources. Fxs can reimplement this to -\/1 to explicitly disable the Toonz\textquotesingle{}s smart memory handling. ~\newline
 ~\newline
\begin{DoxyNote}{Note}
The rendering process ensures that the passed render settings are {\itshape handled} by the fx before this function is invoked -\/ do not waste code for it. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRaster\+Fx\+::memory\+Size}} and TRaster\+Fx\+::can\+Handle methods. 
\end{DoxySeeAlso}
}

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_af8eb991c9756f4fb2e48d9f96cbacfba}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00187                                                                  \{}
\DoxyCodeLine{00188     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRasterFx::memorySize}}(rect, info.m\_bpp);}
\DoxyCodeLine{00189   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00560}{TRaster\+Fx\+::memory\+Size()}}.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_local_transparency_fx_a5a8aecd05f87b84fd82ede5d9189bfa4}\label{class_local_transparency_fx_a5a8aecd05f87b84fd82ede5d9189bfa4}} 
\index{LocalTransparencyFx@{LocalTransparencyFx}!m\_ref@{m\_ref}}
\index{m\_ref@{m\_ref}!LocalTransparencyFx@{LocalTransparencyFx}}
\doxysubsubsection{\texorpdfstring{m\_ref}{m\_ref}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} Local\+Transparency\+Fx\+::m\+\_\+ref\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_local_transparency_fx_a79149ebfefe543051324452fc56e1c75}\label{class_local_transparency_fx_a79149ebfefe543051324452fc56e1c75}} 
\index{LocalTransparencyFx@{LocalTransparencyFx}!m\_src@{m\_src}}
\index{m\_src@{m\_src}!LocalTransparencyFx@{LocalTransparencyFx}}
\doxysubsubsection{\texorpdfstring{m\_src}{m\_src}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} Local\+Transparency\+Fx\+::m\+\_\+src\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_local_transparency_fx_a72f8a5cc329a1a1c046e2b8f1c486083}\label{class_local_transparency_fx_a72f8a5cc329a1a1c046e2b8f1c486083}} 
\index{LocalTransparencyFx@{LocalTransparencyFx}!m\_value@{m\_value}}
\index{m\_value@{m\_value}!LocalTransparencyFx@{LocalTransparencyFx}}
\doxysubsubsection{\texorpdfstring{m\_value}{m\_value}}
{\footnotesize\ttfamily TDouble\+ParamP Local\+Transparency\+Fx\+::m\+\_\+value\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/localtransparencyfx.\+cpp\end{DoxyCompactItemize}
