\hypertarget{class_on_render_completed}{}\doxysection{On\+Render\+Completed Class Reference}
\label{class_on_render_completed}\index{OnRenderCompleted@{OnRenderCompleted}}
Inheritance diagram for On\+Render\+Completed\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_on_render_completed}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_on_render_completed_a2a1947813f462e9b2f69a79b2aa83b78}{On\+Render\+Completed}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp, bool error)
\item 
\mbox{\hyperlink{class_t_thread_1_1_message}{TThread\+::\+Message}} $\ast$ \mbox{\hyperlink{class_on_render_completed_a85bf17ee10ece9d5f207a29fd57696e2}{clone}} () const override
\item 
void \mbox{\hyperlink{class_on_render_completed_a16cdfab1064f27ba1f2194b4e2c9304c}{on\+Deliver}} () override
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_on_render_completed_a2a1947813f462e9b2f69a79b2aa83b78}\label{class_on_render_completed_a2a1947813f462e9b2f69a79b2aa83b78}} 
\index{OnRenderCompleted@{OnRenderCompleted}!OnRenderCompleted@{OnRenderCompleted}}
\index{OnRenderCompleted@{OnRenderCompleted}!OnRenderCompleted@{OnRenderCompleted}}
\doxysubsubsection{\texorpdfstring{OnRenderCompleted()}{OnRenderCompleted()}}
{\footnotesize\ttfamily On\+Render\+Completed\+::\+On\+Render\+Completed (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp,  }\item[{bool}]{error }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00107       : m\_fp(fp), m\_error(error) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_on_render_completed_a85bf17ee10ece9d5f207a29fd57696e2}\label{class_on_render_completed_a85bf17ee10ece9d5f207a29fd57696e2}} 
\index{OnRenderCompleted@{OnRenderCompleted}!clone@{clone}}
\index{clone@{clone}!OnRenderCompleted@{OnRenderCompleted}}
\doxysubsubsection{\texorpdfstring{clone()}{clone()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_thread_1_1_message}{TThread\+::\+Message}} $\ast$ On\+Render\+Completed\+::clone (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_thread_1_1_message}{TThread\+::\+Message}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00109                                          \{}
\DoxyCodeLine{00110     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{class_on_render_completed}{OnRenderCompleted}}(*\textcolor{keyword}{this});}
\DoxyCodeLine{00111   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_on_render_completed_a16cdfab1064f27ba1f2194b4e2c9304c}\label{class_on_render_completed_a16cdfab1064f27ba1f2194b4e2c9304c}} 
\index{OnRenderCompleted@{OnRenderCompleted}!onDeliver@{onDeliver}}
\index{onDeliver@{onDeliver}!OnRenderCompleted@{OnRenderCompleted}}
\doxysubsubsection{\texorpdfstring{onDeliver()}{onDeliver()}}
{\footnotesize\ttfamily void On\+Render\+Completed\+::on\+Deliver (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

quite ugly I know....

Implements \mbox{\hyperlink{class_t_thread_1_1_message}{TThread\+::\+Message}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00113                             \{}
\DoxyCodeLine{00114     \textcolor{keywordflow}{if} (m\_error) \{}
\DoxyCodeLine{00115       m\_error = \textcolor{keyword}{false};}
\DoxyCodeLine{00116       DVGui::error(}
\DoxyCodeLine{00117           QObject::tr(\textcolor{stringliteral}{"{}There was an error saving frames for the \%1 level."{}})}
\DoxyCodeLine{00118               .arg(QString::fromStdWString(}
\DoxyCodeLine{00119                   m\_fp.\mbox{\hyperlink{class_t_file_path_ac17d65d827432f0fae28fed699bf4afa}{withoutParentDir}}().getWideString())));}
\DoxyCodeLine{00120     \}}
\DoxyCodeLine{00121 }
\DoxyCodeLine{00122     \textcolor{keywordtype}{bool} isPreview = (m\_fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}noext"{}});}
\DoxyCodeLine{00123 }
\DoxyCodeLine{00124     TImageCache::instance()-\/>\mbox{\hyperlink{class_t_image_cache_a57d63227dfe2532b0aed22c47113be66}{remove}}(::to\_string(m\_fp.getWideString() + L\textcolor{stringliteral}{"{}.0"{}}));}
\DoxyCodeLine{00125     TNotifier::instance()-\/>notify(\mbox{\hyperlink{class_t_scene_name_change}{TSceneNameChange}}());}
\DoxyCodeLine{00126 }
\DoxyCodeLine{00127     \textcolor{keywordflow}{if} (Preferences::instance()-\/>isGeneratedMovieViewEnabled()) \{}
\DoxyCodeLine{00128       \textcolor{keywordflow}{if} (!isPreview \&\& (Preferences::instance()-\/>isDefaultViewerEnabled()) \&\&}
\DoxyCodeLine{00129           (m\_fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}mov"{}} || m\_fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}avi"{}} ||}
\DoxyCodeLine{00130            m\_fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}3gp"{}} || m\_fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}mp4"{}} ||}
\DoxyCodeLine{00131            m\_fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}gif"{}} || m\_fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}webm"{}})) \{}
\DoxyCodeLine{00132         QString name = QString::fromStdString(m\_fp.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}());}
\DoxyCodeLine{00133         \textcolor{keywordtype}{int} index;}
\DoxyCodeLine{00134         \textcolor{keywordflow}{if} ((index = name.indexOf(\textcolor{stringliteral}{"{}\#RENDERID"{}})) != -\/1)  }
\DoxyCodeLine{00136           m\_fp = m\_fp.\mbox{\hyperlink{class_t_file_path_a3ebf9ced558cfef97a60bba536b23c6f}{withName}}(name.left(index).toStdWString());}
\DoxyCodeLine{00137 }
\DoxyCodeLine{00138         \textcolor{keywordflow}{if} (!TSystem::showDocument(m\_fp)) \{}
\DoxyCodeLine{00139           QString msg(QObject::tr(\textcolor{stringliteral}{"{}It is not possible to display the file \%1: "{}}}
\DoxyCodeLine{00140                                   \textcolor{stringliteral}{"{}no player associated with its format"{}})}
\DoxyCodeLine{00141                           .arg(QString::fromStdWString(}
\DoxyCodeLine{00142                               m\_fp.\mbox{\hyperlink{class_t_file_path_ac17d65d827432f0fae28fed699bf4afa}{withoutParentDir}}().getWideString())));}
\DoxyCodeLine{00143           DVGui::warning(msg);}
\DoxyCodeLine{00144         \}}
\DoxyCodeLine{00145 }
\DoxyCodeLine{00146       \}}
\DoxyCodeLine{00147 }
\DoxyCodeLine{00148       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00149         \textcolor{keywordtype}{int} r0, r1, step;}
\DoxyCodeLine{00150         \mbox{\hyperlink{class_t_app}{TApp}} *app         = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}();}
\DoxyCodeLine{00151         \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{00152         \mbox{\hyperlink{class_t_output_properties}{TOutputProperties}} \&outputSettings =}
\DoxyCodeLine{00153             isPreview ? *scene-\/>\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}()-\/>\mbox{\hyperlink{class_t_scene_properties_a0b905e0ea16e27aa5e67da31e469026e}{getPreviewProperties}}()}
\DoxyCodeLine{00154                       : *scene-\/>\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}()-\/>\mbox{\hyperlink{class_t_scene_properties_abea7b4b8e4f0cedbf753b26ec30b5331}{getOutputProperties}}();}
\DoxyCodeLine{00155         outputSettings.\mbox{\hyperlink{class_t_output_properties_aae127cbd8b19eaed0b0fbaf589349176}{getRange}}(r0, r1, step);}
\DoxyCodeLine{00156         \textcolor{keyword}{const} \mbox{\hyperlink{class_t_render_settings}{TRenderSettings}} rs    = outputSettings.\mbox{\hyperlink{class_t_output_properties_afa7c771452b57b50047aa4afc6032cad}{getRenderSettings}}();}
\DoxyCodeLine{00157         \textcolor{keywordflow}{if} (r0 == 0 \&\& r1 == -\/1) r0 = 0, r1 = scene-\/>\mbox{\hyperlink{class_toonz_scene_ab5cd3ad6f894b1acc5656ca747a80627}{getFrameCount}}() -\/ 1;}
\DoxyCodeLine{00158 }
\DoxyCodeLine{00159         \textcolor{keywordtype}{double} timeStretchFactor =}
\DoxyCodeLine{00160             isPreview}
\DoxyCodeLine{00161                 ? 1.0}
\DoxyCodeLine{00162                 : (double)outputSettings.\mbox{\hyperlink{class_t_output_properties_afa7c771452b57b50047aa4afc6032cad}{getRenderSettings}}().\mbox{\hyperlink{class_t_render_settings_a6b8313c094bdb0c2ab6902b1f895694e}{m\_timeStretchTo}} /}
\DoxyCodeLine{00163                       outputSettings.\mbox{\hyperlink{class_t_output_properties_afa7c771452b57b50047aa4afc6032cad}{getRenderSettings}}().\mbox{\hyperlink{class_t_render_settings_aec1a905d4eec617a546c286480f41b2a}{m\_timeStretchFrom}};}
\DoxyCodeLine{00164 }
\DoxyCodeLine{00165         r0 = tfloor(r0 * timeStretchFactor);}
\DoxyCodeLine{00166         r1 = tceil((r1 + 1) * timeStretchFactor) -\/ 1;}
\DoxyCodeLine{00167 }
\DoxyCodeLine{00168         \mbox{\hyperlink{class_t_xsheet_1_1_sound_properties}{TXsheet::SoundProperties}} *prop = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_xsheet_1_1_sound_properties}{TXsheet::SoundProperties}}();}
\DoxyCodeLine{00169         prop-\/>m\_frameRate              = outputSettings.\mbox{\hyperlink{class_t_output_properties_a0d9662971bc33097aa1b55111965b967}{getFrameRate}}();}
\DoxyCodeLine{00170         \mbox{\hyperlink{class_t_sound_track}{TSoundTrack}} *snd =}
\DoxyCodeLine{00171             app-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet()-\/>makeSound(prop);}
\DoxyCodeLine{00172         \textcolor{comment}{// keeps ffmpeg files from being previewed until import is fixed}}
\DoxyCodeLine{00173         \textcolor{keywordflow}{if} (m\_fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() != \textcolor{stringliteral}{"{}mp4"{}} \&\& m\_fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() != \textcolor{stringliteral}{"{}webm"{}} \&\&}
\DoxyCodeLine{00174             m\_fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() != \textcolor{stringliteral}{"{}gif"{}} \&\& m\_fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() != \textcolor{stringliteral}{"{}spritesheet"{}}) \{}
\DoxyCodeLine{00175           \textcolor{keywordflow}{if} (outputSettings.\mbox{\hyperlink{class_t_output_properties_afa7c771452b57b50047aa4afc6032cad}{getRenderSettings}}().\mbox{\hyperlink{class_t_render_settings_aadbd5a3a50b242b366a93023d5f7da07}{m\_stereoscopic}}) \{}
\DoxyCodeLine{00176             assert(!isPreview);}
\DoxyCodeLine{00177             ::viewFile(m\_fp.\mbox{\hyperlink{class_t_file_path_a3ebf9ced558cfef97a60bba536b23c6f}{withName}}(m\_fp.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}() + \textcolor{stringliteral}{"{}\_l"{}}), r0 + 1, r1 + 1,}
\DoxyCodeLine{00178                        step, isPreview ? rs.\mbox{\hyperlink{class_t_render_settings_a52dd41881bbf6aaf953fe300be2e233e}{m\_shrinkX}} : 1, snd, 0, \textcolor{keyword}{false}, \textcolor{keyword}{true});}
\DoxyCodeLine{00179             ::viewFile(m\_fp.\mbox{\hyperlink{class_t_file_path_a3ebf9ced558cfef97a60bba536b23c6f}{withName}}(m\_fp.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}() + \textcolor{stringliteral}{"{}\_r"{}}), r0 + 1, r1 + 1,}
\DoxyCodeLine{00180                        step, isPreview ? rs.\mbox{\hyperlink{class_t_render_settings_a52dd41881bbf6aaf953fe300be2e233e}{m\_shrinkX}} : 1, snd, 0, \textcolor{keyword}{false}, \textcolor{keyword}{true});}
\DoxyCodeLine{00181           \} else}
\DoxyCodeLine{00182             ::viewFile(m\_fp, r0 + 1, r1 + 1, step, isPreview ? rs.\mbox{\hyperlink{class_t_render_settings_a52dd41881bbf6aaf953fe300be2e233e}{m\_shrinkX}} : 1,}
\DoxyCodeLine{00183                        snd, 0, \textcolor{keyword}{false}, \textcolor{keyword}{true});}
\DoxyCodeLine{00184         \}}
\DoxyCodeLine{00185       \}}
\DoxyCodeLine{00186     \}}
\DoxyCodeLine{00187   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00106}{TApp\+::get\+Current\+Scene()}}, \mbox{\hyperlink{l00110}{TApp\+::get\+Current\+Xsheet()}}, \mbox{\hyperlink{l00704}{Toonz\+Scene\+::get\+Frame\+Count()}}, \mbox{\hyperlink{l00175}{TOutput\+Properties\+::get\+Frame\+Rate()}}, \mbox{\hyperlink{l00145}{TScene\+Properties\+::get\+Output\+Properties()}}, \mbox{\hyperlink{l00151}{TScene\+Properties\+::get\+Preview\+Properties()}}, \mbox{\hyperlink{l00087}{Toonz\+Scene\+::get\+Properties()}}, \mbox{\hyperlink{l00128}{TOutput\+Properties\+::get\+Range()}}, \mbox{\hyperlink{l00181}{TOutput\+Properties\+::get\+Render\+Settings()}}, \mbox{\hyperlink{l00215}{TApp\+::instance()}}, \mbox{\hyperlink{l00125}{TRender\+Settings\+::m\+\_\+shrinkX}}, \mbox{\hyperlink{l00133}{TRender\+Settings\+::m\+\_\+stereoscopic}}, \mbox{\hyperlink{l00109}{TRender\+Settings\+::m\+\_\+time\+Stretch\+From}}, \mbox{\hyperlink{l00110}{TRender\+Settings\+::m\+\_\+time\+Stretch\+To}}, and \mbox{\hyperlink{l01260}{TImage\+Cache\+::remove()}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/rendercommand.\+cpp\end{DoxyCompactItemize}
