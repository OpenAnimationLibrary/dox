\hypertarget{class_t_camera}{}\doxysection{TCamera Class Reference}
\label{class_t_camera}\index{TCamera@{TCamera}}


The \mbox{\hyperlink{class_t_camera}{TCamera}} class provides a camera and allows its management.  




{\ttfamily \#include $<$tcamera.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_camera_a03406d9be0c76e24012ebb71eebd67ca}{TCamera}} ()
\item 
const \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}} \& \mbox{\hyperlink{class_t_camera_a6f561eca912177c2150b3e57816f02f6}{get\+Size}} () const
\item 
void \mbox{\hyperlink{class_t_camera_ac17ef8e563e599d7f1df4755e827de83}{set\+Size}} (const \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}} \&size, bool preserve\+Dpi=false, bool preserve\+AR=false)
\item 
double \mbox{\hyperlink{class_t_camera_ae8a76dc561916fb6cdea3bdb612abd3a}{get\+Aspect\+Ratio}} () const
\item 
const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \& \mbox{\hyperlink{class_t_camera_a9a7c573e7a2c397ffae4b747809ea2a5}{get\+Res}} () const
\item 
void \mbox{\hyperlink{class_t_camera_a10db423cceb7e3696e6db43409c565f4}{set\+Res}} (const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&res)
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_t_camera_adf45510b5dc53f6481308ef489fbd5a9}{get\+Dpi}} () const
\item 
bool \mbox{\hyperlink{class_t_camera_a1a28e15a96d04c0fea7f4d90b39d3acf}{is\+Pixel\+Squared}} () const
\item 
\mbox{\hyperlink{class_t_affine}{TAffine}} \mbox{\hyperlink{class_t_camera_a5e5a9face430bcd2e5fac5da693a479d}{get\+Stage\+To\+Camera\+Ref}} () const
\item 
\mbox{\hyperlink{class_t_affine}{TAffine}} \mbox{\hyperlink{class_t_camera_a25284951e4cad90fbb424d54abc66a14}{get\+Camera\+To\+Stage\+Ref}} () const
\item 
\mbox{\hyperlink{class_t_rect_t}{TRectD}} \mbox{\hyperlink{class_t_camera_afbdcee0cf26df414d787c11beb675140}{get\+Stage\+Rect}} () const
\item 
void \mbox{\hyperlink{class_t_camera_ab287d9cb1403613e76e686dc6e058da5}{set\+Interest\+Rect}} (const \mbox{\hyperlink{class_t_rect_t}{TRect}} \&rect)
\item 
\mbox{\hyperlink{class_t_rect_t}{TRect}} \mbox{\hyperlink{class_t_camera_ad95e2b9f128939f1ce9777623643c69c}{get\+Interest\+Rect}} () const
\item 
void \mbox{\hyperlink{class_t_camera_a8f9d895b3377baace495ff8b644651e1}{set\+Interest\+Stage\+Rect}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect)
\item 
\mbox{\hyperlink{class_t_rect_t}{TRectD}} \mbox{\hyperlink{class_t_camera_a4008034b1ffbe06c1aac816c3bfa5144}{get\+Interest\+Stage\+Rect}} () const
\item 
void \mbox{\hyperlink{class_t_camera_a121d379525a14fed0097ca686b27ff47}{set\+XPrevalence}} (bool value)
\item 
bool \mbox{\hyperlink{class_t_camera_aa2d4a032c8451fa8589487c89f9f0ddb}{is\+XPrevalence}} ()
\item 
void \mbox{\hyperlink{class_t_camera_af69ddb17ad3257a9093477b52436df78}{save\+Data}} (\mbox{\hyperlink{class_t_o_stream}{TOStream}} \&os) const
\item 
void \mbox{\hyperlink{class_t_camera_a82f9d7966281c0fe559a2b5817b170d0}{load\+Data}} (\mbox{\hyperlink{class_t_i_stream}{TIStream}} \&is)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{class_t_camera}{TCamera}} class provides a camera and allows its management. 

A camera is specified by size, \mbox{\hyperlink{class_t_camera_a6f561eca912177c2150b3e57816f02f6}{get\+Size()}} and resolution, \mbox{\hyperlink{class_t_camera_a9a7c573e7a2c397ffae4b747809ea2a5}{get\+Res()}}. It can be changed using the \mbox{\hyperlink{class_t_camera_ac17ef8e563e599d7f1df4755e827de83}{set\+Size()}}, \mbox{\hyperlink{class_t_camera_a10db423cceb7e3696e6db43409c565f4}{set\+Res()}} functions.\+tcamera

The class moreover gives methods to know camera Dpi \mbox{\hyperlink{class_t_camera_adf45510b5dc53f6481308ef489fbd5a9}{get\+Dpi()}}, camera aspect ratio \mbox{\hyperlink{class_t_camera_ae8a76dc561916fb6cdea3bdb612abd3a}{get\+Aspect\+Ratio()}} and stage rect \mbox{\hyperlink{class_t_camera_afbdcee0cf26df414d787c11beb675140}{get\+Stage\+Rect()}}. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_camera_a03406d9be0c76e24012ebb71eebd67ca}\label{class_t_camera_a03406d9be0c76e24012ebb71eebd67ca}} 
\index{TCamera@{TCamera}!TCamera@{TCamera}}
\index{TCamera@{TCamera}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{TCamera()}{TCamera()}}
{\footnotesize\ttfamily TCamera\+::\+TCamera (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Constructs \mbox{\hyperlink{class_t_camera}{TCamera}} with default value, size (12,9) and resolution (768,576). Constructs \mbox{\hyperlink{class_t_camera}{TCamera}} with default value, size (36, 20.\+25) and resolution (1920,1080).
\begin{DoxyItemize}
\item 05/31/16 Constructs \mbox{\hyperlink{class_t_camera}{TCamera}} with default value, size (16, 9) and resolution (1920,1080).
\item 08/16/16 
\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{00014     : m\_size(16, 9),}
\DoxyCodeLine{00015       m\_res(1920, 1080),}
\DoxyCodeLine{00016       m\_xPrevalence(\textcolor{keyword}{true}) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_camera_ae8a76dc561916fb6cdea3bdb612abd3a}\label{class_t_camera_ae8a76dc561916fb6cdea3bdb612abd3a}} 
\index{TCamera@{TCamera}!getAspectRatio@{getAspectRatio}}
\index{getAspectRatio@{getAspectRatio}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{getAspectRatio()}{getAspectRatio()}}
{\footnotesize\ttfamily double TCamera\+::get\+Aspect\+Ratio (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Return camera aspect ratio. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00046 \{ \textcolor{keywordflow}{return} m\_size.lx / m\_size.ly; \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00020}{set\+Size()}}.

\mbox{\Hypertarget{class_t_camera_a25284951e4cad90fbb424d54abc66a14}\label{class_t_camera_a25284951e4cad90fbb424d54abc66a14}} 
\index{TCamera@{TCamera}!getCameraToStageRef@{getCameraToStageRef}}
\index{getCameraToStageRef@{getCameraToStageRef}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{getCameraToStageRef()}{getCameraToStageRef()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_affine}{TAffine}} TCamera\+::get\+Camera\+To\+Stage\+Ref (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Returns the reference change matrix from camera (resolution) reference to stage reference 
\begin{DoxyCode}{0}
\DoxyCodeLine{00086                                            \{}
\DoxyCodeLine{00087   \textcolor{keyword}{const} \textcolor{keywordtype}{double} factor = \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}};}
\DoxyCodeLine{00088 }
\DoxyCodeLine{00089   \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}} cameraSize = \mbox{\hyperlink{class_t_camera_a6f561eca912177c2150b3e57816f02f6}{getSize}}();}
\DoxyCodeLine{00090   cameraSize.lx *= factor;}
\DoxyCodeLine{00091   cameraSize.ly *= factor;}
\DoxyCodeLine{00092   \mbox{\hyperlink{class_t_point_t}{TPointD}} center(0.5 * cameraSize.lx, 0.5 * cameraSize.ly);}
\DoxyCodeLine{00093 }
\DoxyCodeLine{00094   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_affine}{TAffine}}(factor * m\_size.lx / (\textcolor{keywordtype}{double})m\_res.lx, 0, -\/center.x, 0,}
\DoxyCodeLine{00095                  factor * m\_size.ly / (\textcolor{keywordtype}{double})m\_res.ly, -\/center.y);}
\DoxyCodeLine{00096 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00055}{get\+Size()}}, and \mbox{\hyperlink{l00037}{Stage\+::inch}}.



Referenced by \mbox{\hyperlink{l00126}{get\+Interest\+Stage\+Rect()}}.

\mbox{\Hypertarget{class_t_camera_adf45510b5dc53f6481308ef489fbd5a9}\label{class_t_camera_adf45510b5dc53f6481308ef489fbd5a9}} 
\index{TCamera@{TCamera}!getDpi@{getDpi}}
\index{getDpi@{getDpi}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{getDpi()}{getDpi()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} TCamera\+::get\+Dpi (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Return camera Dpi. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00062                               \{}
\DoxyCodeLine{00063   \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi;}
\DoxyCodeLine{00064   \textcolor{keywordflow}{if} (m\_size.lx > 0 \&\& m\_size.ly > 0) \{}
\DoxyCodeLine{00065     dpi.x = m\_res.lx / m\_size.lx;}
\DoxyCodeLine{00066     dpi.y = m\_res.ly / m\_size.ly;}
\DoxyCodeLine{00067   \}}
\DoxyCodeLine{00068   \textcolor{keywordflow}{return} dpi;}
\DoxyCodeLine{00069 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l02386}{Scene\+Viewer\+::get\+Dpi\+Factor()}}, \mbox{\hyperlink{l00721}{Render\+Command\+::multimedia\+Render()}}, \mbox{\hyperlink{l01185}{Raster\+Selection\+::paste\+Selection()}}, and \mbox{\hyperlink{l00020}{set\+Size()}}.

\mbox{\Hypertarget{class_t_camera_ad95e2b9f128939f1ce9777623643c69c}\label{class_t_camera_ad95e2b9f128939f1ce9777623643c69c}} 
\index{TCamera@{TCamera}!getInterestRect@{getInterestRect}}
\index{getInterestRect@{getInterestRect}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{getInterestRect()}{getInterestRect()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRect}} TCamera\+::get\+Interest\+Rect (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Returns the camera\textquotesingle{}s interest rect. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00115 \{ \textcolor{keywordflow}{return} m\_interestRect; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_camera_a4008034b1ffbe06c1aac816c3bfa5144}\label{class_t_camera_a4008034b1ffbe06c1aac816c3bfa5144}} 
\index{TCamera@{TCamera}!getInterestStageRect@{getInterestStageRect}}
\index{getInterestStageRect@{getInterestStageRect}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{getInterestStageRect()}{getInterestStageRect()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRectD}} TCamera\+::get\+Interest\+Stage\+Rect (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Returns the interest rect in stage coordinates. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00126                                            \{}
\DoxyCodeLine{00127   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_camera_a25284951e4cad90fbb424d54abc66a14}{getCameraToStageRef}}() * \mbox{\hyperlink{class_t_rect_t}{TRectD}}(m\_interestRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, m\_interestRect.y0,}
\DoxyCodeLine{00128                                         m\_interestRect.x1 + 1,}
\DoxyCodeLine{00129                                         m\_interestRect.y1 + 1);}
\DoxyCodeLine{00130 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00086}{get\+Camera\+To\+Stage\+Ref()}}, and \mbox{\hyperlink{l00557}{TRect\+T$<$ T $>$\+::x0}}.

\mbox{\Hypertarget{class_t_camera_a9a7c573e7a2c397ffae4b747809ea2a5}\label{class_t_camera_a9a7c573e7a2c397ffae4b747809ea2a5}} 
\index{TCamera@{TCamera}!getRes@{getRes}}
\index{getRes@{getRes}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{getRes()}{getRes()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \& TCamera\+::get\+Res (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Return camera resolution. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_camera_a10db423cceb7e3696e6db43409c565f4}{set\+Res()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00072 \{ \textcolor{keywordflow}{return} m\_res; \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00779}{TScene\+Properties\+::clone\+Cameras\+To()}}, \mbox{\hyperlink{l00291}{Cleanup\+Settings\+Model\+::commit\+Changes()}}, \mbox{\hyperlink{l00413}{Io\+Cmd\+::export\+Level()}}, \mbox{\hyperlink{l02451}{Scene\+Viewer\+::get\+Zoom\+Scale\+Fitting\+With\+Screen()}}, \mbox{\hyperlink{l00721}{Render\+Command\+::multimedia\+Render()}}, \mbox{\hyperlink{l00711}{Toonz\+Scene\+::render\+Frame()}}, and \mbox{\hyperlink{l01372}{Fx\+Settings\+::set\+Fx()}}.

\mbox{\Hypertarget{class_t_camera_a6f561eca912177c2150b3e57816f02f6}\label{class_t_camera_a6f561eca912177c2150b3e57816f02f6}} 
\index{TCamera@{TCamera}!getSize@{getSize}}
\index{getSize@{getSize}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{getSize()}{getSize()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}} \& TCamera\+::get\+Size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Return camera size. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_camera_ac17ef8e563e599d7f1df4755e827de83}{set\+Size()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00055 \{ \textcolor{keywordflow}{return} m\_size; \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00291}{Cleanup\+Settings\+Model\+::commit\+Changes()}}, \mbox{\hyperlink{l00086}{get\+Camera\+To\+Stage\+Ref()}}, \mbox{\hyperlink{l00100}{get\+Stage\+Rect()}}, and \mbox{\hyperlink{l00711}{Toonz\+Scene\+::render\+Frame()}}.

\mbox{\Hypertarget{class_t_camera_afbdcee0cf26df414d787c11beb675140}\label{class_t_camera_afbdcee0cf26df414d787c11beb675140}} 
\index{TCamera@{TCamera}!getStageRect@{getStageRect}}
\index{getStageRect@{getStageRect}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{getStageRect()}{getStageRect()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRectD}} TCamera\+::get\+Stage\+Rect (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Return stage rect. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00100                                    \{}
\DoxyCodeLine{00101   \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}} cameraSize = \mbox{\hyperlink{class_t_camera_a6f561eca912177c2150b3e57816f02f6}{getSize}}();}
\DoxyCodeLine{00102   \textcolor{keyword}{const} \textcolor{keywordtype}{double} factor    = \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}};}
\DoxyCodeLine{00103   cameraSize.lx *= factor;}
\DoxyCodeLine{00104   cameraSize.ly *= factor;}
\DoxyCodeLine{00105   \mbox{\hyperlink{class_t_rect_t}{TRectD}} rect(cameraSize);}
\DoxyCodeLine{00106   rect -\/= 0.5 * (rect.getP00() + rect.getP11());}
\DoxyCodeLine{00107   \textcolor{keywordflow}{return} rect;}
\DoxyCodeLine{00108 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00055}{get\+Size()}}, and \mbox{\hyperlink{l00037}{Stage\+::inch}}.



Referenced by \mbox{\hyperlink{l01416}{Edit\+Tool\+::draw()}}, and \mbox{\hyperlink{l00618}{Camera\+Test\+Tool\+::draw()}}.

\mbox{\Hypertarget{class_t_camera_a5e5a9face430bcd2e5fac5da693a479d}\label{class_t_camera_a5e5a9face430bcd2e5fac5da693a479d}} 
\index{TCamera@{TCamera}!getStageToCameraRef@{getStageToCameraRef}}
\index{getStageToCameraRef@{getStageToCameraRef}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{getStageToCameraRef()}{getStageToCameraRef()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_affine}{TAffine}} TCamera\+::get\+Stage\+To\+Camera\+Ref (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Returns the reference change matrix from stage reference to camera (resolution) reference 
\begin{DoxyCode}{0}
\DoxyCodeLine{00079                                            \{}
\DoxyCodeLine{00080   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_affine}{TAffine}}(m\_res.lx / (\mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}} * m\_size.lx), 0, 0.5 * m\_res.lx, 0,}
\DoxyCodeLine{00081                  m\_res.ly / (\mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}} * m\_size.ly), 0.5 * m\_res.ly);}
\DoxyCodeLine{00082 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00037}{Stage\+::inch}}.



Referenced by \mbox{\hyperlink{l00134}{set\+Interest\+Stage\+Rect()}}.

\mbox{\Hypertarget{class_t_camera_a1a28e15a96d04c0fea7f4d90b39d3acf}\label{class_t_camera_a1a28e15a96d04c0fea7f4d90b39d3acf}} 
\index{TCamera@{TCamera}!isPixelSquared@{isPixelSquared}}
\index{isPixelSquared@{isPixelSquared}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{isPixelSquared()}{isPixelSquared()}}
{\footnotesize\ttfamily bool TCamera\+::is\+Pixel\+Squared (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Return true if \char`\"{}resolution width per size height\char`\"{} is equal to \char`\"{}resolution height per size width\char`\"{}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00073                                    \{}
\DoxyCodeLine{00074   \textcolor{keywordflow}{return} areAlmostEqual(m\_res.lx * m\_size.ly, m\_res.ly * m\_size.lx);}
\DoxyCodeLine{00075 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_camera_aa2d4a032c8451fa8589487c89f9f0ddb}\label{class_t_camera_aa2d4a032c8451fa8589487c89f9f0ddb}} 
\index{TCamera@{TCamera}!isXPrevalence@{isXPrevalence}}
\index{isXPrevalence@{isXPrevalence}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{isXPrevalence()}{isXPrevalence()}}
{\footnotesize\ttfamily bool TCamera\+::is\+XPrevalence (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00128 \{ \textcolor{keywordflow}{return} m\_xPrevalence; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_camera_a82f9d7966281c0fe559a2b5817b170d0}\label{class_t_camera_a82f9d7966281c0fe559a2b5817b170d0}} 
\index{TCamera@{TCamera}!loadData@{loadData}}
\index{loadData@{loadData}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{loadData()}{loadData()}}
{\footnotesize\ttfamily void TCamera\+::load\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_i_stream}{TIStream}} \&}]{is }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00154                                    \{}
\DoxyCodeLine{00155   std::string tagName;}
\DoxyCodeLine{00156   \textcolor{keywordflow}{while} (is.\mbox{\hyperlink{class_t_i_stream_a5fe7ddb5560e39e0ab4ff57d24926d41}{matchTag}}(tagName)) \{}
\DoxyCodeLine{00157     \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}cameraSize"{}} || tagName == \textcolor{stringliteral}{"{}size"{}})}
\DoxyCodeLine{00158       is >> m\_size.lx >> m\_size.ly;}
\DoxyCodeLine{00159     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}cameraRes"{}} || tagName == \textcolor{stringliteral}{"{}res"{}})}
\DoxyCodeLine{00160       is >> m\_res.lx >> m\_res.ly;}
\DoxyCodeLine{00161     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}cameraXPrevalence"{}}) \{}
\DoxyCodeLine{00162       \textcolor{keywordtype}{int} xPrevalence;}
\DoxyCodeLine{00163       is >> xPrevalence;}
\DoxyCodeLine{00164       m\_xPrevalence = (bool)xPrevalence;}
\DoxyCodeLine{00165     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}interestRect"{}}) \{}
\DoxyCodeLine{00166       is >> m\_interestRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} >> m\_interestRect.y0 >> m\_interestRect.x1 >>}
\DoxyCodeLine{00167           m\_interestRect.y1;}
\DoxyCodeLine{00168     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00169       \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}TCamera::loadData. unexpected tag: "{}} + tagName);}
\DoxyCodeLine{00170     is.\mbox{\hyperlink{class_t_i_stream_a84110f30d5adcc50d6000e9c99cd4708}{matchEndTag}}();}
\DoxyCodeLine{00171   \}}
\DoxyCodeLine{00172 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_camera_af69ddb17ad3257a9093477b52436df78}\label{class_t_camera_af69ddb17ad3257a9093477b52436df78}} 
\index{TCamera@{TCamera}!saveData@{saveData}}
\index{saveData@{saveData}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{saveData()}{saveData()}}
{\footnotesize\ttfamily void TCamera\+::save\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_o_stream}{TOStream}} \&}]{os }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00144                                          \{}
\DoxyCodeLine{00145   os.\mbox{\hyperlink{class_t_o_stream_a9cd1359e6b21d85786708c7e680756d1}{child}}(\textcolor{stringliteral}{"{}cameraSize"{}}) << m\_size.lx << m\_size.ly;}
\DoxyCodeLine{00146   os.\mbox{\hyperlink{class_t_o_stream_a9cd1359e6b21d85786708c7e680756d1}{child}}(\textcolor{stringliteral}{"{}cameraRes"{}}) << m\_res.lx << m\_res.ly;}
\DoxyCodeLine{00147   os.\mbox{\hyperlink{class_t_o_stream_a9cd1359e6b21d85786708c7e680756d1}{child}}(\textcolor{stringliteral}{"{}cameraXPrevalence"{}}) << (int)m\_xPrevalence;}
\DoxyCodeLine{00148   os.\mbox{\hyperlink{class_t_o_stream_a9cd1359e6b21d85786708c7e680756d1}{child}}(\textcolor{stringliteral}{"{}interestRect"{}}) << m\_interestRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} << m\_interestRect.y0}
\DoxyCodeLine{00149                            << m\_interestRect.x1 << m\_interestRect.y1;}
\DoxyCodeLine{00150 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_camera_ab287d9cb1403613e76e686dc6e058da5}\label{class_t_camera_ab287d9cb1403613e76e686dc6e058da5}} 
\index{TCamera@{TCamera}!setInterestRect@{setInterestRect}}
\index{setInterestRect@{setInterestRect}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{setInterestRect()}{setInterestRect()}}
{\footnotesize\ttfamily void TCamera\+::set\+Interest\+Rect (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRect}} \&}]{rect }\end{DoxyParamCaption})}

Sets the camera\textquotesingle{}s interest rect. Typically used in preview modes. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00112                                                \{}
\DoxyCodeLine{00113   \textcolor{comment}{// Not using the TRect's common intersection. Unfortunately, in case}}
\DoxyCodeLine{00114   \textcolor{comment}{// the rect's coordinates have lx or ly < 0, the intersection returns}}
\DoxyCodeLine{00115   \textcolor{comment}{// the default (empty) rect. We want to maintain the coordinates instead.}}
\DoxyCodeLine{00116   \textcolor{comment}{// m\_interestRect = rect * TRect(m\_res);}}
\DoxyCodeLine{00117 }
\DoxyCodeLine{00118   m\_interestRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} = std::max(rect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, 0);}
\DoxyCodeLine{00119   m\_interestRect.y0 = std::max(rect.y0, 0);}
\DoxyCodeLine{00120   m\_interestRect.x1 = std::min(rect.x1, m\_res.lx -\/ 1);}
\DoxyCodeLine{00121   m\_interestRect.y1 = std::min(rect.y1, m\_res.ly -\/ 1);}
\DoxyCodeLine{00122 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00557}{TRect\+T$<$ T $>$\+::x0}}.



Referenced by \mbox{\hyperlink{l00338}{Preview\+Sub\+Camera\+Manager\+::delete\+Sub\+Camera()}}, and \mbox{\hyperlink{l00134}{set\+Interest\+Stage\+Rect()}}.

\mbox{\Hypertarget{class_t_camera_a8f9d895b3377baace495ff8b644651e1}\label{class_t_camera_a8f9d895b3377baace495ff8b644651e1}} 
\index{TCamera@{TCamera}!setInterestStageRect@{setInterestStageRect}}
\index{setInterestStageRect@{setInterestStageRect}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{setInterestStageRect()}{setInterestStageRect()}}
{\footnotesize\ttfamily void TCamera\+::set\+Interest\+Stage\+Rect (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect }\end{DoxyParamCaption})}

Sets the interest rect from stage coordinates 
\begin{DoxyCode}{0}
\DoxyCodeLine{00134                                                      \{}
\DoxyCodeLine{00135   \mbox{\hyperlink{class_t_rect_t}{TRectD}} cameraInterestRectD(\mbox{\hyperlink{class_t_camera_a5e5a9face430bcd2e5fac5da693a479d}{getStageToCameraRef}}() * rect);}
\DoxyCodeLine{00136 }
\DoxyCodeLine{00137   \mbox{\hyperlink{class_t_camera_ab287d9cb1403613e76e686dc6e058da5}{setInterestRect}}(\mbox{\hyperlink{class_t_rect_t}{TRect}}(}
\DoxyCodeLine{00138       tfloor(cameraInterestRectD.x0), tfloor(cameraInterestRectD.y0),}
\DoxyCodeLine{00139       tceil(cameraInterestRectD.x1) -\/ 1, tceil(cameraInterestRectD.y1) -\/ 1));}
\DoxyCodeLine{00140 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00079}{get\+Stage\+To\+Camera\+Ref()}}, \mbox{\hyperlink{l00112}{set\+Interest\+Rect()}}, and \mbox{\hyperlink{l00557}{TRect\+T$<$ T $>$\+::x0}}.

\mbox{\Hypertarget{class_t_camera_a10db423cceb7e3696e6db43409c565f4}\label{class_t_camera_a10db423cceb7e3696e6db43409c565f4}} 
\index{TCamera@{TCamera}!setRes@{setRes}}
\index{setRes@{setRes}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{setRes()}{setRes()}}
{\footnotesize\ttfamily void TCamera\+::set\+Res (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&}]{res }\end{DoxyParamCaption})}

Set camera resolution to {\bfseries{res}}. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_camera_a9a7c573e7a2c397ffae4b747809ea2a5}{get\+Res()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00050                                           \{}
\DoxyCodeLine{00051   assert(res.lx > 0);}
\DoxyCodeLine{00052   assert(res.ly > 0);}
\DoxyCodeLine{00053 }
\DoxyCodeLine{00054   \textcolor{keywordflow}{if} (m\_res != res) \{}
\DoxyCodeLine{00055     m\_res          = res;}
\DoxyCodeLine{00056     m\_interestRect = \mbox{\hyperlink{class_t_rect_t}{TRect}}();}
\DoxyCodeLine{00057   \}}
\DoxyCodeLine{00058 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00779}{TScene\+Properties\+::clone\+Cameras\+To()}}, and \mbox{\hyperlink{l00359}{TScene\+Properties\+::load\+Data()}}.

\mbox{\Hypertarget{class_t_camera_ac17ef8e563e599d7f1df4755e827de83}\label{class_t_camera_ac17ef8e563e599d7f1df4755e827de83}} 
\index{TCamera@{TCamera}!setSize@{setSize}}
\index{setSize@{setSize}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{setSize()}{setSize()}}
{\footnotesize\ttfamily void TCamera\+::set\+Size (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}} \&}]{size,  }\item[{bool}]{preserve\+Dpi = {\ttfamily false},  }\item[{bool}]{preserve\+AR = {\ttfamily false} }\end{DoxyParamCaption})}

Set camera size to {\bfseries{size}}. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_camera_a6f561eca912177c2150b3e57816f02f6}{get\+Size()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00021                                        \{}
\DoxyCodeLine{00022   \textcolor{keywordtype}{double} currAR   = \mbox{\hyperlink{class_t_camera_ae8a76dc561916fb6cdea3bdb612abd3a}{getAspectRatio}}();}
\DoxyCodeLine{00023   \mbox{\hyperlink{class_t_point_t}{TPointD}} currDpi = \mbox{\hyperlink{class_t_camera_adf45510b5dc53f6481308ef489fbd5a9}{getDpi}}();}
\DoxyCodeLine{00024   m\_size.lx       = size.lx;}
\DoxyCodeLine{00025   \textcolor{keywordflow}{if} (preserveAR)}
\DoxyCodeLine{00026     m\_size.ly = m\_size.lx / currAR;  \textcolor{comment}{// WARNING! if also preserveDpi==true, the}}
\DoxyCodeLine{00027                                      \textcolor{comment}{// AR could lose precision...}}
\DoxyCodeLine{00028   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00029     m\_size.ly = size.ly;}
\DoxyCodeLine{00030 }
\DoxyCodeLine{00031   \textcolor{keywordflow}{if} (!preserveDpi) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00032 }
\DoxyCodeLine{00033   m\_res.lx  = troundp(currDpi.x * m\_size.lx);}
\DoxyCodeLine{00034   m\_res.ly  = troundp(currDpi.y * m\_size.ly);}
\DoxyCodeLine{00035   m\_size.lx = m\_res.lx / currDpi.x;}
\DoxyCodeLine{00036   \textcolor{keywordflow}{if} (preserveAR)  \textcolor{comment}{//\&\& currDpi.x==currDpi.y)}}
\DoxyCodeLine{00037   \{}
\DoxyCodeLine{00038     \textcolor{keywordtype}{double} aux = m\_size.lx / currAR -\/ m\_res.ly / currDpi.y;}
\DoxyCodeLine{00039     m\_size.ly  = m\_size.lx / currAR;}
\DoxyCodeLine{00040   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00041     m\_size.ly = m\_res.ly / currDpi.y;}
\DoxyCodeLine{00042 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00046}{get\+Aspect\+Ratio()}}, and \mbox{\hyperlink{l00062}{get\+Dpi()}}.



Referenced by \mbox{\hyperlink{l00359}{TScene\+Properties\+::load\+Data()}}.

\mbox{\Hypertarget{class_t_camera_a121d379525a14fed0097ca686b27ff47}\label{class_t_camera_a121d379525a14fed0097ca686b27ff47}} 
\index{TCamera@{TCamera}!setXPrevalence@{setXPrevalence}}
\index{setXPrevalence@{setXPrevalence}!TCamera@{TCamera}}
\doxysubsubsection{\texorpdfstring{setXPrevalence()}{setXPrevalence()}}
{\footnotesize\ttfamily void TCamera\+::set\+XPrevalence (\begin{DoxyParamCaption}\item[{bool}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00127 \{ m\_xPrevalence = value; \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonz/tcamera.\+h\item 
E\+:/opentoonz/toonz/sources/toonzlib/tcamera.\+cpp\end{DoxyCompactItemize}
