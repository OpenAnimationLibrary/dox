\hypertarget{class_vector_brush_prop}{}\doxysection{Vector\+Brush\+Prop Class Reference}
\label{class_vector_brush_prop}\index{VectorBrushProp@{VectorBrushProp}}
Inheritance diagram for Vector\+Brush\+Prop\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_vector_brush_prop}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_vector_brush_prop_a8c9dbdb3032ee21a86e6cb6f42830d04}{Vector\+Brush\+Prop}} (const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$stroke, \mbox{\hyperlink{class_t_vector_brush_style}{TVector\+Brush\+Style}} $\ast$style)
\item 
\mbox{\hyperlink{class_t_stroke_prop}{TStroke\+Prop}} $\ast$ \mbox{\hyperlink{class_vector_brush_prop_a6a5a9988162ecc1fc0eb59b052804436}{clone}} (const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$stroke) const override
\item 
void \mbox{\hyperlink{class_vector_brush_prop_a66cb46fccdf9dfa4bd636530d2ea0aa2}{draw}} (const \mbox{\hyperlink{class_t_vector_render_data}{TVector\+Render\+Data}} \&rd) override
\item 
const \mbox{\hyperlink{class_t_color_style}{TColor\+Style}} $\ast$ \mbox{\hyperlink{class_vector_brush_prop_aced026927005d7521d8b0e76d34aa612}{get\+Color\+Style}} () const override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_vector_brush_prop_a8c9dbdb3032ee21a86e6cb6f42830d04}\label{class_vector_brush_prop_a8c9dbdb3032ee21a86e6cb6f42830d04}} 
\index{VectorBrushProp@{VectorBrushProp}!VectorBrushProp@{VectorBrushProp}}
\index{VectorBrushProp@{VectorBrushProp}!VectorBrushProp@{VectorBrushProp}}
\doxysubsubsection{\texorpdfstring{VectorBrushProp()}{VectorBrushProp()}}
{\footnotesize\ttfamily Vector\+Brush\+Prop\+::\+Vector\+Brush\+Prop (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke,  }\item[{\mbox{\hyperlink{class_t_vector_brush_style}{TVector\+Brush\+Style}} $\ast$}]{style }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00057     : \mbox{\hyperlink{class_t_stroke_prop}{TStrokeProp}}(stroke)}
\DoxyCodeLine{00058     , m\_style(style)}
\DoxyCodeLine{00059     , m\_brush(style-\/>getImage())}
\DoxyCodeLine{00060     , m\_brushBox(m\_brush-\/>getBBox())}
\DoxyCodeLine{00061     , m\_pixelSize(.0) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_vector_brush_prop_a6a5a9988162ecc1fc0eb59b052804436}\label{class_vector_brush_prop_a6a5a9988162ecc1fc0eb59b052804436}} 
\index{VectorBrushProp@{VectorBrushProp}!clone@{clone}}
\index{clone@{clone}!VectorBrushProp@{VectorBrushProp}}
\doxysubsubsection{\texorpdfstring{clone()}{clone()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stroke_prop}{TStroke\+Prop}} $\ast$ Vector\+Brush\+Prop\+::clone (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_stroke_prop}{TStroke\+Prop}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00065                                                                \{}
\DoxyCodeLine{00066   \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{class_vector_brush_prop}{VectorBrushProp}}(stroke, m\_style);}
\DoxyCodeLine{00067 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_vector_brush_prop_a66cb46fccdf9dfa4bd636530d2ea0aa2}\label{class_vector_brush_prop_a66cb46fccdf9dfa4bd636530d2ea0aa2}} 
\index{VectorBrushProp@{VectorBrushProp}!draw@{draw}}
\index{draw@{draw}!VectorBrushProp@{VectorBrushProp}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Vector\+Brush\+Prop\+::draw (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_vector_render_data}{TVector\+Render\+Data}} \&}]{rd }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_stroke_prop}{TStroke\+Prop}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00071                                                       \{}
\DoxyCodeLine{00072   \textcolor{comment}{// Ensure that the stroke overlaps our clipping rect}}
\DoxyCodeLine{00073   \textcolor{keywordflow}{if} (rd.\mbox{\hyperlink{class_t_vector_render_data_a61cad4356cfe55befac4b7da729f84a5}{m\_clippingRect}} != \mbox{\hyperlink{class_t_rect_t}{TRect}}() \&\& !rd.\mbox{\hyperlink{class_t_vector_render_data_a5cd0b8011bb3ee5da80d5ac6ca0425a3}{m\_is3dView}} \&\&}
\DoxyCodeLine{00074       !convert(rd.\mbox{\hyperlink{class_t_vector_render_data_acc20e6a9287e0f50321fcdd6b95ed26b}{m\_aff}} * m\_stroke-\/>\mbox{\hyperlink{class_t_stroke_a456bedcae5e8af3a84823cb251584957}{getBBox}}()).overlaps(rd.\mbox{\hyperlink{class_t_vector_render_data_a61cad4356cfe55befac4b7da729f84a5}{m\_clippingRect}}))}
\DoxyCodeLine{00075     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00076 }
\DoxyCodeLine{00077   \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} palette(m\_brush-\/>getPalette());}
\DoxyCodeLine{00078   \textcolor{keywordflow}{if} (!palette) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00079 }
\DoxyCodeLine{00080   \textcolor{keyword}{static} \mbox{\hyperlink{class_t_outline_util_1_1_outline_parameter}{TOutlineUtil::OutlineParameter}} param;  \textcolor{comment}{// unused, but requested}}
\DoxyCodeLine{00081 }
\DoxyCodeLine{00082   \textcolor{comment}{// Build a solid color style to draw each m\_vi's stroke with.}}
\DoxyCodeLine{00083   \mbox{\hyperlink{class_t_solid_color_style}{TSolidColorStyle}} colorStyle;}
\DoxyCodeLine{00084 }
\DoxyCodeLine{00085   \textcolor{comment}{// Push the specified rd affine before drawing}}
\DoxyCodeLine{00086   glPushMatrix();}
\DoxyCodeLine{00087   tglMultMatrix(rd.\mbox{\hyperlink{class_t_vector_render_data_acc20e6a9287e0f50321fcdd6b95ed26b}{m\_aff}});}
\DoxyCodeLine{00088 }
\DoxyCodeLine{00089   \textcolor{comment}{// 1. If necessary, build the outlines}}
\DoxyCodeLine{00090   \textcolor{keywordtype}{double} currentPixelSize = sqrt(tglGetPixelSize2());}
\DoxyCodeLine{00091   \textcolor{keywordtype}{bool} differentPixelSize = !isAlmostZero(currentPixelSize -\/ m\_pixelSize, 1e-\/5);}
\DoxyCodeLine{00092   m\_pixelSize             = currentPixelSize;}
\DoxyCodeLine{00093 }
\DoxyCodeLine{00094   \textcolor{keywordtype}{int} i, viRegionsCount = m\_brush-\/>getRegionCount(),}
\DoxyCodeLine{00095          viStrokesCount = m\_brush-\/>getStrokeCount();}
\DoxyCodeLine{00096   \textcolor{keywordflow}{if} (differentPixelSize || m\_strokeChanged) \{}
\DoxyCodeLine{00097     m\_strokeChanged = \textcolor{keyword}{false};}
\DoxyCodeLine{00098 }
\DoxyCodeLine{00099     \textcolor{comment}{// 1a. First, the regions}}
\DoxyCodeLine{00100     m\_regionOutlines.resize(viRegionsCount);}
\DoxyCodeLine{00101 }
\DoxyCodeLine{00102     \textcolor{keywordflow}{for} (i = 0; i < viRegionsCount; ++i) \{}
\DoxyCodeLine{00103       \mbox{\hyperlink{class_t_region_outline}{TRegionOutline}} \&outline    = m\_regionOutlines[i];}
\DoxyCodeLine{00104       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_region}{TRegion}} *brushRegion = m\_brush-\/>getRegion(i);}
\DoxyCodeLine{00105 }
\DoxyCodeLine{00106       \textcolor{comment}{// Build the outline}}
\DoxyCodeLine{00107       outline.clear();}
\DoxyCodeLine{00108       TOutlineUtil::makeOutline(*getStroke(), *brushRegion, m\_brushBox,}
\DoxyCodeLine{00109                                 outline);}
\DoxyCodeLine{00110     \}}
\DoxyCodeLine{00111 }
\DoxyCodeLine{00112     \textcolor{comment}{// 1b. Then, the strokes}}
\DoxyCodeLine{00113     m\_strokeOutlines.resize(viStrokesCount);}
\DoxyCodeLine{00114 }
\DoxyCodeLine{00115     \textcolor{keywordflow}{for} (i = 0; i < viStrokesCount; ++i) \{}
\DoxyCodeLine{00116       \mbox{\hyperlink{class_t_stroke_outline}{TStrokeOutline}} \&outline    = m\_strokeOutlines[i];}
\DoxyCodeLine{00117       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_stroke}{TStroke}} *brushStroke = m\_brush-\/>getStroke(i);}
\DoxyCodeLine{00118 }
\DoxyCodeLine{00119       outline.getArray().clear();}
\DoxyCodeLine{00120       TOutlineUtil::makeOutline(*getStroke(), *brushStroke, m\_brushBox, outline,}
\DoxyCodeLine{00121                                 param);}
\DoxyCodeLine{00122     \}}
\DoxyCodeLine{00123   \}}
\DoxyCodeLine{00124 }
\DoxyCodeLine{00125   \textcolor{comment}{// 2. Draw the outlines}}
\DoxyCodeLine{00126 }
\DoxyCodeLine{00127   UINT s, t, r, strokesCount = m\_brush-\/>getStrokeCount(),}
\DoxyCodeLine{00128                 regionCount = m\_brush-\/>getRegionCount();}
\DoxyCodeLine{00129 }
\DoxyCodeLine{00130   \textcolor{keywordflow}{for} (s = 0; s < strokesCount; s = t)  \textcolor{comment}{// Each cycle draws a group}}
\DoxyCodeLine{00131   \{}
\DoxyCodeLine{00132     \textcolor{comment}{// A vector image stores group strokes with consecutive indices.}}
\DoxyCodeLine{00133 }
\DoxyCodeLine{00134     \textcolor{comment}{// 2a. First, draw regions in the strokeIdx-\/th stroke's group}}
\DoxyCodeLine{00135     \textcolor{keywordflow}{for} (r = 0; r < regionCount; ++r) \{}
\DoxyCodeLine{00136       \textcolor{keywordflow}{if} (m\_brush-\/>sameGroupStrokeAndRegion(s, r)) \{}
\DoxyCodeLine{00137         \textcolor{keyword}{const} \mbox{\hyperlink{class_t_region}{TRegion}} *brushRegion = m\_brush-\/>getRegion(r);}
\DoxyCodeLine{00138         \textcolor{keyword}{const} \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *brushStyle =}
\DoxyCodeLine{00139             palette-\/>getStyle(brushRegion-\/>getStyle());}
\DoxyCodeLine{00140         assert(brushStyle);}
\DoxyCodeLine{00141 }
\DoxyCodeLine{00142         \textcolor{comment}{// Draw the outline}}
\DoxyCodeLine{00143         colorStyle.\mbox{\hyperlink{class_t_solid_color_style_a9f2c96429938693bbe03bb30fb2b2c91}{setMainColor}}(brushStyle-\/>\mbox{\hyperlink{class_t_color_style_abd78dd4e3ff3e2e78b647195f7622aa7}{getMainColor}}());}
\DoxyCodeLine{00144         colorStyle.drawRegion(0, \textcolor{keyword}{false}, m\_regionOutlines[r]);}
\DoxyCodeLine{00145       \}}
\DoxyCodeLine{00146     \}}
\DoxyCodeLine{00147 }
\DoxyCodeLine{00148     \textcolor{comment}{// 2b. Then, draw all strokes in strokeIdx-\/th stroke's group}}
\DoxyCodeLine{00149     \textcolor{keywordflow}{for} (t = s; t < strokesCount \&\& m\_brush-\/>sameGroup(s, t); ++t) \{}
\DoxyCodeLine{00150       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_stroke}{TStroke}} *brushStroke = m\_brush-\/>getStroke(t);}
\DoxyCodeLine{00151       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *brushStyle =}
\DoxyCodeLine{00152           palette-\/>getStyle(brushStroke-\/>\mbox{\hyperlink{class_t_stroke_ab77068d7894a29cc1878e173f46ed785}{getStyle}}());}
\DoxyCodeLine{00153       \textcolor{keywordflow}{if} (!brushStyle) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00154 }
\DoxyCodeLine{00155       colorStyle.\mbox{\hyperlink{class_t_solid_color_style_a9f2c96429938693bbe03bb30fb2b2c91}{setMainColor}}(brushStyle-\/>\mbox{\hyperlink{class_t_color_style_abd78dd4e3ff3e2e78b647195f7622aa7}{getMainColor}}());}
\DoxyCodeLine{00156       colorStyle.drawStroke(0, \&m\_strokeOutlines[t],}
\DoxyCodeLine{00157                             brushStroke);  \textcolor{comment}{// brushStroke unused but requested}}
\DoxyCodeLine{00158     \}}
\DoxyCodeLine{00159   \}}
\DoxyCodeLine{00160 }
\DoxyCodeLine{00161   glPopMatrix();}
\DoxyCodeLine{00162 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_vector_brush_prop_aced026927005d7521d8b0e76d34aa612}\label{class_vector_brush_prop_aced026927005d7521d8b0e76d34aa612}} 
\index{VectorBrushProp@{VectorBrushProp}!getColorStyle@{getColorStyle}}
\index{getColorStyle@{getColorStyle}!VectorBrushProp@{VectorBrushProp}}
\doxysubsubsection{\texorpdfstring{getColorStyle()}{getColorStyle()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_color_style}{TColor\+Style}} $\ast$ Vector\+Brush\+Prop\+::get\+Color\+Style (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_stroke_prop}{TStroke\+Prop}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00166 \{ \textcolor{keywordflow}{return} m\_style; \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/common/tvrender/tvectorbrushstyle.\+cpp\end{DoxyCompactItemize}
