\hypertarget{class_skeleton_subtools_1_1_drag_rotation_tool}{}\doxysection{Skeleton\+Subtools\+::Drag\+Rotation\+Tool Class Reference}
\label{class_skeleton_subtools_1_1_drag_rotation_tool}\index{SkeletonSubtools::DragRotationTool@{SkeletonSubtools::DragRotationTool}}
Inheritance diagram for Skeleton\+Subtools\+::Drag\+Rotation\+Tool\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_skeleton_subtools_1_1_drag_rotation_tool}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_skeleton_subtools_1_1_drag_rotation_tool_a4045c5ab15998794b7a91e3adfe3669e}{Drag\+Rotation\+Tool}} (\mbox{\hyperlink{class_skeleton_tool}{Skeleton\+Tool}} $\ast$tool, bool snapped)
\item 
void \mbox{\hyperlink{class_skeleton_subtools_1_1_drag_rotation_tool_a5f2fc11f492b536fd7caae49ba57dd6e}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\item 
void \mbox{\hyperlink{class_skeleton_subtools_1_1_drag_rotation_tool_adfaba602725ae0a46146436c9b5fab2a}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_skeleton_subtools_1_1_drag_rotation_tool_a4045c5ab15998794b7a91e3adfe3669e}\label{class_skeleton_subtools_1_1_drag_rotation_tool_a4045c5ab15998794b7a91e3adfe3669e}} 
\index{SkeletonSubtools::DragRotationTool@{SkeletonSubtools::DragRotationTool}!DragRotationTool@{DragRotationTool}}
\index{DragRotationTool@{DragRotationTool}!SkeletonSubtools::DragRotationTool@{SkeletonSubtools::DragRotationTool}}
\doxysubsubsection{\texorpdfstring{DragRotationTool()}{DragRotationTool()}}
{\footnotesize\ttfamily Drag\+Rotation\+Tool\+::\+Drag\+Rotation\+Tool (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_skeleton_tool}{Skeleton\+Tool}} $\ast$}]{tool,  }\item[{bool}]{snapped }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00216     : \mbox{\hyperlink{class_skeleton_subtools_1_1_drag_channel_tool}{DragChannelTool}}(tool, \mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a08806eb331bdede66bb3113b1642a6ad}{TStageObject::T\_Angle}}), m\_snapped(snapped) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_skeleton_subtools_1_1_drag_rotation_tool_a5f2fc11f492b536fd7caae49ba57dd6e}\label{class_skeleton_subtools_1_1_drag_rotation_tool_a5f2fc11f492b536fd7caae49ba57dd6e}} 
\index{SkeletonSubtools::DragRotationTool@{SkeletonSubtools::DragRotationTool}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!SkeletonSubtools::DragRotationTool@{SkeletonSubtools::DragRotationTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily void Drag\+Rotation\+Tool\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_skeleton_subtools_1_1_drag_tool}{Skeleton\+Subtools\+::\+Drag\+Tool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00220                                                                              \{}
\DoxyCodeLine{00221   m\_lastPos = pos;}
\DoxyCodeLine{00222   m\_center  = getCenter();}
\DoxyCodeLine{00223   start();}
\DoxyCodeLine{00224 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_skeleton_subtools_1_1_drag_rotation_tool_adfaba602725ae0a46146436c9b5fab2a}\label{class_skeleton_subtools_1_1_drag_rotation_tool_adfaba602725ae0a46146436c9b5fab2a}} 
\index{SkeletonSubtools::DragRotationTool@{SkeletonSubtools::DragRotationTool}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!SkeletonSubtools::DragRotationTool@{SkeletonSubtools::DragRotationTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Drag\+Rotation\+Tool\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_skeleton_subtools_1_1_drag_tool}{Skeleton\+Subtools\+::\+Drag\+Tool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00228                                                                              \{}
\DoxyCodeLine{00229   \mbox{\hyperlink{class_t_point_t}{TPointD}} a = m\_center -\/ m\_lastPos;}
\DoxyCodeLine{00230   \mbox{\hyperlink{class_t_point_t}{TPointD}} b = m\_center -\/ pos;}
\DoxyCodeLine{00231 }
\DoxyCodeLine{00232   \textcolor{keywordtype}{double} a0 = norm2(pos -\/ m\_lastPos);}
\DoxyCodeLine{00233   \textcolor{keywordflow}{if} (a0 < 2 \&\& !m\_dragged) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00234 }
\DoxyCodeLine{00235   \textcolor{keywordtype}{double} a2 = norm2(a), b2 = norm2(b);}
\DoxyCodeLine{00236   \textcolor{keyword}{const} \textcolor{keywordtype}{double} eps = 1e-\/1;}
\DoxyCodeLine{00237   \textcolor{keywordflow}{if} (a2 < eps || b2 < eps) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00238 }
\DoxyCodeLine{00239   \textcolor{keywordtype}{double} dang = asin(cross(a, b) / sqrt(a2 * b2)) * M\_180\_PI;}
\DoxyCodeLine{00240 }
\DoxyCodeLine{00241   \textcolor{keywordflow}{if} (m\_snapped) \{}
\DoxyCodeLine{00242     \textcolor{keywordflow}{if} (fabs(dang) < 2) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00243     m\_snapped = \textcolor{keyword}{false};}
\DoxyCodeLine{00244   \}}
\DoxyCodeLine{00245   setValue(getValue(0) + dang);}
\DoxyCodeLine{00246   m\_dragged = \textcolor{keyword}{true};}
\DoxyCodeLine{00247 }
\DoxyCodeLine{00248   m\_lastPos = pos;}
\DoxyCodeLine{00249 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/skeletonsubtools.\+h\item 
E\+:/opentoonz/toonz/sources/tnztools/skeletonsubtools.\+cpp\end{DoxyCompactItemize}
