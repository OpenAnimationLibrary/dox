\hypertarget{class_toonz_raster_brush_tool}{}\doxysection{Toonz\+Raster\+Brush\+Tool Class Reference}
\label{class_toonz_raster_brush_tool}\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}}
Inheritance diagram for Toonz\+Raster\+Brush\+Tool\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_toonz_raster_brush_tool}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_toonz_raster_brush_tool_a217400f1d797e5bf3efb0fe01b6015c5}{Toonz\+Raster\+Brush\+Tool}} (std\+::string name, int target\+Type)
\item 
\mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} \mbox{\hyperlink{class_toonz_raster_brush_tool_ad27ec1cd179ce0f1baf0849397e52176}{get\+Tool\+Type}} () const override
\item 
\mbox{\hyperlink{class_tool_options_box}{Tool\+Options\+Box}} $\ast$ \mbox{\hyperlink{class_toonz_raster_brush_tool_a1da23d3c3840e430138b12e245616d49}{create\+Options\+Box}} () override
\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_a1667fce9531216f9c07bcb2a7bb465c9}{update\+Translation}} () override
\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_a1fae3bb18e399eeef0d6dcbfa3e26fd1}{on\+Activate}} () override
\begin{DoxyCompactList}\small\item\em Callback invoked whenever the tool activates. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_aec8e1d34a81172f0542ebebd422ba493}{on\+Deactivate}} () override
\begin{DoxyCompactList}\small\item\em Callback for tool deactivation, includes tool switch. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_toonz_raster_brush_tool_a4b6a127ee38e477ea8c04917463bc9f5}{pre\+Left\+Button\+Down}} () override
\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_aa12d4083948b3365e83ff24f73babe0f}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_ab728e64ec25f527650f8667b5506d1a5}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_aa55fcf1ddeab00722fd54ec64e80565d}{left\+Button\+Up}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_a741e2b20416ecb002c21752bc2fee4cf}{mouse\+Move}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_afcaca75d7a357250948936e59c5e5b2b}{draw}} () override
\begin{DoxyCompactList}\small\item\em Draws the tool on the viewer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_a090aa351be51d4f5ccb2df5c9e4cea1c}{on\+Enter}} () override
\begin{DoxyCompactList}\small\item\em Callback for the mouse entering the viewer area. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_ab375f322b0297680f3f14ee3d1f7a80e}{on\+Leave}} () override
\begin{DoxyCompactList}\small\item\em Callback for the mouse leaving the viewer area. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_toonz_raster_brush_tool_a304658ad28cdffe07ff3ff47540131ac}{get\+Cursor\+Id}} () const override
\begin{DoxyCompactList}\small\item\em Returns the type of cursor used by the tool. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ \mbox{\hyperlink{class_toonz_raster_brush_tool_a56d55d26719f1570c0a06a2a97456ff3}{get\+Properties}} (int target\+Type) override
\item 
bool \mbox{\hyperlink{class_toonz_raster_brush_tool_a155bef55e93ce3bb63adfe0891a55547}{on\+Property\+Changed}} (std\+::string property\+Name) override
\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_a07e0fb58ddac113766ac4154a6eedc83}{on\+Image\+Changed}} () override
\begin{DoxyCompactList}\small\item\em Notifies changes in the image in use. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_aa9c88f6dea0bd2bbc0029d64bcbf9544}{set\+Work\+And\+Backup\+Images}} ()
\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_aa2aeaf05c203b430610d459d376aaea8}{update\+Work\+And\+Backup\+Rasters}} (const \mbox{\hyperlink{class_t_rect_t}{TRect}} \&rect)
\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_acce36ff1c57a57e0bd502933bac2f7af}{init\+Presets}} ()
\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_a6e2c376cf3531a644b2735679ae29d88}{load\+Preset}} ()
\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_a82c469b8fe46c031d8513fa182303523}{add\+Preset}} (QString name)
\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_af5d8ff35734a55b72e131644a11ccbd5}{remove\+Preset}} ()
\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_a8e6b3a244bcd47485f0b9e221618e4ba}{load\+Last\+Brush}} ()
\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_aed21519542ecf70f2797373293880c47}{finish\+Raster\+Brush}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, double pressure\+Val)
\item 
bool \mbox{\hyperlink{class_toonz_raster_brush_tool_a98e19cb6ab1d05345e02efd693d3fdb8}{is\+Pencil\+Mode\+Active}} () override
\item 
void \mbox{\hyperlink{class_toonz_raster_brush_tool_ae335f47def026c927f779e1dcbba366d}{on\+Color\+Style\+Changed}} ()
\item 
bool \mbox{\hyperlink{class_toonz_raster_brush_tool_aa50a7386e6ee2f888a108e4d15348f65}{ask\+Read}} (const \mbox{\hyperlink{class_t_rect_t}{TRect}} \&rect) override
\item 
bool \mbox{\hyperlink{class_toonz_raster_brush_tool_a8137628f04f873715b6d2a90d1bce14f}{ask\+Write}} (const \mbox{\hyperlink{class_t_rect_t}{TRect}} \&rect) override
\item 
bool \mbox{\hyperlink{class_toonz_raster_brush_tool_a889046a046384ea43836a15ca5cfe99b}{is\+My\+Paint\+Style\+Selected}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_toonz_raster_brush_tool_a9e7ff0cf5f45218c896a5dbdbda3d292}{get\+Centered\+Cursor\+Pos}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&original\+Cursor\+Pos)
\end{DoxyCompactItemize}
\doxysubsection*{Static Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{class_toonz_raster_brush_tool_a1358f17555b9d74f14df80f13567bdd6}{draw\+Line}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&point, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&centre, bool horizontal, bool is\+Decimal)
\item 
static void \mbox{\hyperlink{class_toonz_raster_brush_tool_a4f23eebb42d27f068407a008bd635dc2}{draw\+Empty\+Circle}} (\mbox{\hyperlink{class_t_point_t}{TPointD}} point, int thick, bool is\+Lx\+Even, bool is\+Ly\+Even, bool is\+Pencil)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} \mbox{\hyperlink{class_toonz_raster_brush_tool_a9f29d0cf5bac6355cd0c58d234a6f736}{m\+\_\+prop}} \mbox{[}2\mbox{]}
\item 
\mbox{\hyperlink{class_t_double_pair_property}{TDouble\+Pair\+Property}} \mbox{\hyperlink{class_toonz_raster_brush_tool_a5e7cee84c51d60d9af9fc88fb2db96af}{m\+\_\+ras\+Thickness}}
\item 
\mbox{\hyperlink{class_t_range_property}{TDouble\+Property}} \mbox{\hyperlink{class_toonz_raster_brush_tool_a89402cf1103241037ce61b23706bfe14}{m\+\_\+smooth}}
\item 
\mbox{\hyperlink{class_t_range_property}{TDouble\+Property}} \mbox{\hyperlink{class_toonz_raster_brush_tool_ac695e400291353cc921ed05df7c7a27c}{m\+\_\+hardness}}
\item 
\mbox{\hyperlink{class_t_enum_property}{TEnum\+Property}} \mbox{\hyperlink{class_toonz_raster_brush_tool_a5124e4166f81e827d2cee53492c049d3}{m\+\_\+preset}}
\item 
\mbox{\hyperlink{class_t_enum_property}{TEnum\+Property}} \mbox{\hyperlink{class_toonz_raster_brush_tool_ac8968eb9205a33cc7c242d0f0ddfb524}{m\+\_\+draw\+Order}}
\item 
\mbox{\hyperlink{class_t_bool_property}{TBool\+Property}} \mbox{\hyperlink{class_toonz_raster_brush_tool_a42bbb74d01ee5fb03a6e2bcdcc43c3cf}{m\+\_\+pencil}}
\item 
\mbox{\hyperlink{class_t_bool_property}{TBool\+Property}} \mbox{\hyperlink{class_toonz_raster_brush_tool_a41e63bf20860481376afbb7c3d2d5722}{m\+\_\+pressure}}
\item 
\mbox{\hyperlink{class_t_range_property}{TDouble\+Property}} \mbox{\hyperlink{class_toonz_raster_brush_tool_a8a364af361fc0b90db82a34322af8d98}{m\+\_\+modifier\+Size}}
\item 
\mbox{\hyperlink{class_t_bool_property}{TBool\+Property}} \mbox{\hyperlink{class_toonz_raster_brush_tool_a16575c927d249595fa9de0b2392ecaa7}{m\+\_\+modifier\+Lock\+Alpha}}
\item 
\mbox{\hyperlink{class_raster_stroke_generator}{Raster\+Stroke\+Generator}} $\ast$ \mbox{\hyperlink{class_toonz_raster_brush_tool_ad57c7ad60318efee2f29e23afbacad0e}{m\+\_\+raster\+Track}}
\item 
\mbox{\hyperlink{class_t_tile_set_c_m32}{TTile\+Set\+CM32}} $\ast$ \mbox{\hyperlink{class_toonz_raster_brush_tool_a4ac475fceb551beaa8bbeebaaebc643a}{m\+\_\+tile\+Set}}
\item 
\mbox{\hyperlink{class_t_tile_saver_c_m32}{TTile\+Saver\+CM32}} $\ast$ \mbox{\hyperlink{class_toonz_raster_brush_tool_a192d46bf9cdc9748c649004ed3d5361c}{m\+\_\+tile\+Saver}}
\item 
TPixel32 \mbox{\hyperlink{class_toonz_raster_brush_tool_a6e66ca6ce36b15ffc72f60cbcb480fe9}{m\+\_\+current\+Color}}
\item 
int \mbox{\hyperlink{class_toonz_raster_brush_tool_a0b977349c820c24daf509ec33b5549e1}{m\+\_\+style\+Id}}
\item 
double \mbox{\hyperlink{class_toonz_raster_brush_tool_a04c438ccb660bf5bd2087f96f4ff7734}{m\+\_\+min\+Thick}}
\item 
double \mbox{\hyperlink{class_toonz_raster_brush_tool_affb7918defd128c28a4f90df2cf8dfaf}{m\+\_\+max\+Thick}}
\item 
int \mbox{\hyperlink{class_toonz_raster_brush_tool_aa688909c9cbee1fbdf3d1d6bc1c638f4}{m\+\_\+target\+Type}}
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_toonz_raster_brush_tool_aea667f5c9b8157779b4b7990be2c3b57}{m\+\_\+dpi\+Scale}}
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_toonz_raster_brush_tool_a139c5dcda1042955f9e7fc0356ad76b0}{m\+\_\+mouse\+Pos}}
\begin{DoxyCompactList}\small\item\em Current mouse position, in world coordinates. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\+\_\+brush\+Pos}}
\begin{DoxyCompactList}\small\item\em World position the brush will be painted at. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_blured_brush}{Blured\+Brush}} $\ast$ \mbox{\hyperlink{class_toonz_raster_brush_tool_a3129fa8c29878bbc85a0fdf72f7f605b}{m\+\_\+blured\+Brush}}
\item 
QRadial\+Gradient \mbox{\hyperlink{class_toonz_raster_brush_tool_a4ef007a7a8ef18ecdab34b36e928e24f}{m\+\_\+brush\+Pad}}
\item 
\mbox{\hyperlink{class_t_raster_p_t}{TRaster\+CM32P}} \mbox{\hyperlink{class_toonz_raster_brush_tool_a99f312abdc90a0f588910ea9bbe36978}{m\+\_\+backup\+Ras}}
\item 
\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} \mbox{\hyperlink{class_toonz_raster_brush_tool_ac1aa781f6572ac08076b56d8939a9120}{m\+\_\+work\+Ras}}
\item 
std\+::vector$<$ \mbox{\hyperlink{class_t_thick_point}{TThick\+Point}} $>$ \mbox{\hyperlink{class_toonz_raster_brush_tool_aee2858bc7715a2b5533d55091e0c7769}{m\+\_\+points}}
\item 
\mbox{\hyperlink{class_t_rect_t}{TRect}} \mbox{\hyperlink{class_toonz_raster_brush_tool_a7cfcabcb946aec00f6d428b26864fa3a}{m\+\_\+stroke\+Rect}}
\item 
\mbox{\hyperlink{class_t_rect_t}{TRect}} \mbox{\hyperlink{class_toonz_raster_brush_tool_a83be2af97e40e6a4a3220a5578f63235}{m\+\_\+last\+Rect}}
\item 
\mbox{\hyperlink{class_t_rect_t}{TRect}} \mbox{\hyperlink{class_toonz_raster_brush_tool_a475cd424ddc58cfb7f75885a827ef523}{m\+\_\+stroke\+Segment\+Rect}}
\item 
\mbox{\hyperlink{class_smooth_stroke}{Smooth\+Stroke}} \mbox{\hyperlink{class_toonz_raster_brush_tool_ac07b696e2f911f1c8e0bdf1883791f0d}{m\+\_\+smooth\+Stroke}}
\item 
\mbox{\hyperlink{class_brush_preset_manager}{Brush\+Preset\+Manager}} \mbox{\hyperlink{class_toonz_raster_brush_tool_aa8691d0d29ea4e51228d89e9073ba1ce}{m\+\_\+presets\+Manager}}
\begin{DoxyCompactList}\small\item\em Manager for presets of this tool instance. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_toonz_raster_brush_tool_ae8cd0bda055abd5bc790984adb835f0e}{m\+\_\+active}}
\item 
bool \mbox{\hyperlink{class_toonz_raster_brush_tool_afd5845257c55565eb23d3c0350af8ac4}{m\+\_\+enabled}}
\item 
bool \mbox{\hyperlink{class_toonz_raster_brush_tool_acf1972c4a9114d872a6b1bfccdc75428}{m\+\_\+is\+Prompting}}
\item 
bool \mbox{\hyperlink{class_toonz_raster_brush_tool_a1e1f197e3aaa044128dc8630b69b4926}{m\+\_\+first\+Time}}
\item 
bool \mbox{\hyperlink{class_toonz_raster_brush_tool_ab582625eaeaf5381ca16dc53ffe5d940}{m\+\_\+presets\+Loaded}}
\item 
\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \mbox{\hyperlink{class_toonz_raster_brush_tool_a7c3bd8b1c5109ef991b42fb361f953e9}{m\+\_\+working\+Frame\+Id}}
\item 
\mbox{\hyperlink{class_toonz_raster_brush_tool_notifier}{Toonz\+Raster\+Brush\+Tool\+Notifier}} $\ast$ \mbox{\hyperlink{class_toonz_raster_brush_tool_a91f81549e77f5a6e65bc1df9b97c3636}{m\+\_\+notifier}}
\item 
bool \mbox{\hyperlink{class_toonz_raster_brush_tool_a5a8b54861fa367ac3591b86d64a138f2}{m\+\_\+is\+My\+Paint\+Style\+Selected}} = false
\item 
\mbox{\hyperlink{class_my_paint_toonz_brush}{My\+Paint\+Toonz\+Brush}} $\ast$ \mbox{\hyperlink{class_toonz_raster_brush_tool_a7ff70a975f21812482b60b5eb4e9f020}{m\+\_\+toonz\+\_\+brush}} = 0
\item 
QElapsed\+Timer \mbox{\hyperlink{class_toonz_raster_brush_tool_ac5903e9ac658ae5f073ab76e213887fa}{m\+\_\+brush\+Timer}}
\item 
int \mbox{\hyperlink{class_toonz_raster_brush_tool_a05d510ba3cf6f8ebe0393fd4d629dc3f}{m\+\_\+min\+Cursor\+Thick}}
\item 
int \mbox{\hyperlink{class_toonz_raster_brush_tool_adcc2f888faf004106f5c3ae816e4ce65}{m\+\_\+max\+Cursor\+Thick}}
\item 
bool \mbox{\hyperlink{class_toonz_raster_brush_tool_ade81aba07dcf3bf7987fc095363867ad}{m\+\_\+property\+Updating}} = false
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_a217400f1d797e5bf3efb0fe01b6015c5}\label{class_toonz_raster_brush_tool_a217400f1d797e5bf3efb0fe01b6015c5}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{ToonzRasterBrushTool()}{ToonzRasterBrushTool()}}
{\footnotesize\ttfamily Toonz\+Raster\+Brush\+Tool\+::\+Toonz\+Raster\+Brush\+Tool (\begin{DoxyParamCaption}\item[{std\+::string}]{name,  }\item[{int}]{target\+Type }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00857     : \mbox{\hyperlink{class_t_tool_a9c63ec35f606e755d0d036bf4fed62ab}{TTool}}(name)}
\DoxyCodeLine{00858     , m\_rasThickness(\textcolor{stringliteral}{"{}Size"{}}, 1, 1000, 1, 5)}
\DoxyCodeLine{00859     , m\_smooth(\textcolor{stringliteral}{"{}Smooth:"{}}, 0, 50, 0)}
\DoxyCodeLine{00860     , m\_hardness(\textcolor{stringliteral}{"{}Hardness:"{}}, 0, 100, 100)}
\DoxyCodeLine{00861     , m\_preset(\textcolor{stringliteral}{"{}Preset:"{}})}
\DoxyCodeLine{00862     , m\_drawOrder(\textcolor{stringliteral}{"{}Draw Order:"{}})}
\DoxyCodeLine{00863     , m\_pencil(\textcolor{stringliteral}{"{}Pencil"{}}, \textcolor{keyword}{false})}
\DoxyCodeLine{00864     , m\_pressure(\textcolor{stringliteral}{"{}Pressure"{}}, \textcolor{keyword}{true})}
\DoxyCodeLine{00865     , m\_modifierSize(\textcolor{stringliteral}{"{}ModifierSize"{}}, -\/3, 3, 0, \textcolor{keyword}{true})}
\DoxyCodeLine{00866     , m\_rasterTrack(0)}
\DoxyCodeLine{00867     , m\_styleId(0)}
\DoxyCodeLine{00868     , m\_bluredBrush(0)}
\DoxyCodeLine{00869     , m\_active(\textcolor{keyword}{false})}
\DoxyCodeLine{00870     , m\_enabled(\textcolor{keyword}{false})}
\DoxyCodeLine{00871     , \mbox{\hyperlink{class_toonz_raster_brush_tool_acf1972c4a9114d872a6b1bfccdc75428}{m\_isPrompting}}(\textcolor{keyword}{false})}
\DoxyCodeLine{00872     , m\_firstTime(\textcolor{keyword}{true})}
\DoxyCodeLine{00873     , m\_presetsLoaded(\textcolor{keyword}{false})}
\DoxyCodeLine{00874     , m\_targetType(targetType)}
\DoxyCodeLine{00875     , m\_workingFrameId(\mbox{\hyperlink{class_t_frame_id}{TFrameId}}())}
\DoxyCodeLine{00876     , m\_notifier(0)}
\DoxyCodeLine{00877     , m\_modifierLockAlpha(\textcolor{stringliteral}{"{}Lock Alpha"{}}, \textcolor{keyword}{false}) \{}
\DoxyCodeLine{00878   bind(targetType);}
\DoxyCodeLine{00879 }
\DoxyCodeLine{00880   m\_rasThickness.setNonLinearSlider();}
\DoxyCodeLine{00881 }
\DoxyCodeLine{00882   m\_prop[0].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_rasThickness);}
\DoxyCodeLine{00883   m\_prop[0].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_hardness);}
\DoxyCodeLine{00884   m\_prop[0].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_smooth);}
\DoxyCodeLine{00885   m\_prop[0].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_drawOrder);}
\DoxyCodeLine{00886   m\_prop[0].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_modifierSize);}
\DoxyCodeLine{00887   m\_prop[0].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_modifierLockAlpha);}
\DoxyCodeLine{00888   m\_prop[0].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_pencil);}
\DoxyCodeLine{00889   m\_pencil.setId(\textcolor{stringliteral}{"{}PencilMode"{}});}
\DoxyCodeLine{00890 }
\DoxyCodeLine{00891   m\_drawOrder.addValue(L\textcolor{stringliteral}{"{}Over All"{}});}
\DoxyCodeLine{00892   m\_drawOrder.addValue(L\textcolor{stringliteral}{"{}Under All"{}});}
\DoxyCodeLine{00893   m\_drawOrder.addValue(L\textcolor{stringliteral}{"{}Palette Order"{}});}
\DoxyCodeLine{00894   m\_drawOrder.setId(\textcolor{stringliteral}{"{}DrawOrder"{}});}
\DoxyCodeLine{00895 }
\DoxyCodeLine{00896   m\_prop[0].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_pressure);}
\DoxyCodeLine{00897 }
\DoxyCodeLine{00898   m\_prop[0].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_preset);}
\DoxyCodeLine{00899   m\_preset.setId(\textcolor{stringliteral}{"{}BrushPreset"{}});}
\DoxyCodeLine{00900   m\_preset.addValue(CUSTOM\_WSTR);}
\DoxyCodeLine{00901   m\_pressure.setId(\textcolor{stringliteral}{"{}PressureSensitivity"{}});}
\DoxyCodeLine{00902   m\_modifierLockAlpha.setId(\textcolor{stringliteral}{"{}LockAlpha"{}});}
\DoxyCodeLine{00903 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_a82c469b8fe46c031d8513fa182303523}\label{class_toonz_raster_brush_tool_a82c469b8fe46c031d8513fa182303523}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!addPreset@{addPreset}}
\index{addPreset@{addPreset}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{addPreset()}{addPreset()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::add\+Preset (\begin{DoxyParamCaption}\item[{QString}]{name }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02101                                                  \{}
\DoxyCodeLine{02102   \textcolor{comment}{// Build the preset}}
\DoxyCodeLine{02103   \mbox{\hyperlink{struct_brush_data}{BrushData}} preset(name.toStdWString());}
\DoxyCodeLine{02104 }
\DoxyCodeLine{02105   preset.m\_min = m\_rasThickness.getValue().first;}
\DoxyCodeLine{02106   preset.m\_max = m\_rasThickness.getValue().second;}
\DoxyCodeLine{02107 }
\DoxyCodeLine{02108   preset.m\_smooth            = m\_smooth.getValue();}
\DoxyCodeLine{02109   preset.m\_hardness          = m\_hardness.getValue();}
\DoxyCodeLine{02110   preset.m\_drawOrder         = m\_drawOrder.getIndex();}
\DoxyCodeLine{02111   preset.m\_pencil            = m\_pencil.getValue();}
\DoxyCodeLine{02112   preset.m\_pressure          = m\_pressure.getValue();}
\DoxyCodeLine{02113   preset.m\_modifierSize      = m\_modifierSize.getValue();}
\DoxyCodeLine{02114   preset.m\_modifierLockAlpha = m\_modifierLockAlpha.getValue();}
\DoxyCodeLine{02115 }
\DoxyCodeLine{02116   \textcolor{comment}{// Pass the preset to the manager}}
\DoxyCodeLine{02117   \mbox{\hyperlink{class_toonz_raster_brush_tool_aa8691d0d29ea4e51228d89e9073ba1ce}{m\_presetsManager}}.addPreset(preset);}
\DoxyCodeLine{02118 }
\DoxyCodeLine{02119   \textcolor{comment}{// Reinitialize the associated preset enum}}
\DoxyCodeLine{02120   initPresets();}
\DoxyCodeLine{02121 }
\DoxyCodeLine{02122   \textcolor{comment}{// Set the value to the specified one}}
\DoxyCodeLine{02123   m\_preset.setValue(preset.m\_name);}
\DoxyCodeLine{02124   RasterBrushPreset = m\_preset.getValueAsString();}
\DoxyCodeLine{02125 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_aa50a7386e6ee2f888a108e4d15348f65}\label{class_toonz_raster_brush_tool_aa50a7386e6ee2f888a108e4d15348f65}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!askRead@{askRead}}
\index{askRead@{askRead}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{askRead()}{askRead()}}
{\footnotesize\ttfamily bool Toonz\+Raster\+Brush\+Tool\+::ask\+Read (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRect}} \&}]{rect }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_raster_controller}{Raster\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01211 \{ \textcolor{keywordflow}{return} askWrite(rect); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_a8137628f04f873715b6d2a90d1bce14f}\label{class_toonz_raster_brush_tool_a8137628f04f873715b6d2a90d1bce14f}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!askWrite@{askWrite}}
\index{askWrite@{askWrite}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{askWrite()}{askWrite()}}
{\footnotesize\ttfamily bool Toonz\+Raster\+Brush\+Tool\+::ask\+Write (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRect}} \&}]{rect }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_raster_controller}{Raster\+Controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01215                                                      \{}
\DoxyCodeLine{01216   \textcolor{keywordflow}{if} (rect.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01217   m\_strokeRect += rect;}
\DoxyCodeLine{01218   m\_strokeSegmentRect += rect;}
\DoxyCodeLine{01219   updateWorkAndBackupRasters(rect);}
\DoxyCodeLine{01220   m\_tileSaver-\/>save(rect);}
\DoxyCodeLine{01221   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01222 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_a1da23d3c3840e430138b12e245616d49}\label{class_toonz_raster_brush_tool_a1da23d3c3840e430138b12e245616d49}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!createOptionsBox@{createOptionsBox}}
\index{createOptionsBox@{createOptionsBox}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{createOptionsBox()}{createOptionsBox()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_tool_options_box}{Tool\+Options\+Box}} $\ast$ Toonz\+Raster\+Brush\+Tool\+::create\+Options\+Box (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

The default returns a generic box containing the options for property group 0). \begin{DoxySeeAlso}{See also}
See \mbox{\hyperlink{}{tooloptions.\+h}} for more details. Factory function returning a newly created GUI options box to be displayed for the tool 
\end{DoxySeeAlso}


Reimplemented from \mbox{\hyperlink{class_t_tool_a9e09495b50142df6b7bb9682837263c4}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00907                                                        \{}
\DoxyCodeLine{00908   \mbox{\hyperlink{class_t_palette_handle}{TPaletteHandle}} *currPalette =}
\DoxyCodeLine{00909       TTool::getApplication()-\/>getPaletteController()-\/>getCurrentLevelPalette();}
\DoxyCodeLine{00910   \mbox{\hyperlink{class_tool_handle}{ToolHandle}} *currTool = TTool::getApplication()-\/>getCurrentTool();}
\DoxyCodeLine{00911   \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{class_brush_tool_options_box}{BrushToolOptionsBox}}(0, \textcolor{keyword}{this}, currPalette, currTool);}
\DoxyCodeLine{00912 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_afcaca75d7a357250948936e59c5e5b2b}\label{class_toonz_raster_brush_tool_afcaca75d7a357250948936e59c5e5b2b}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!draw@{draw}}
\index{draw@{draw}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::draw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Draws the tool on the viewer. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a058bf656d73bf3cd63b9826cbaaf48e0}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01869                                 \{}
\DoxyCodeLine{01870   \textcolor{comment}{/*-\/-\/ショートカットでのツール切り替え時に赤点が描かれるのを防止する-\/-\/*/}}
\DoxyCodeLine{01871   \textcolor{keywordflow}{if} (m\_minThick == 0 \&\& m\_maxThick == 0 \&\&}
\DoxyCodeLine{01872       !Preferences::instance()-\/>getShow0ThickLines())}
\DoxyCodeLine{01873     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01874 }
\DoxyCodeLine{01875   \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img = \mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{false}, 1);}
\DoxyCodeLine{01876 }
\DoxyCodeLine{01877   \textcolor{keywordflow}{if} (getApplication()-\/>getCurrentObject()-\/>isSpline()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01878 }
\DoxyCodeLine{01879   \textcolor{comment}{// If toggled off, don't draw brush outline}}
\DoxyCodeLine{01880   \textcolor{keywordflow}{if} (!Preferences::instance()-\/>isCursorOutlineEnabled()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01881 }
\DoxyCodeLine{01882   \textcolor{comment}{// Draw the brush outline -\/ change color when the Ink / Paint check is}}
\DoxyCodeLine{01883   \textcolor{comment}{// activated}}
\DoxyCodeLine{01884   \textcolor{keywordflow}{if} ((ToonzCheck::instance()-\/>getChecks() \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876a7ad1deef6a508e60252b818c61ce83e9}{ToonzCheck::eInk}}) ||}
\DoxyCodeLine{01885       (ToonzCheck::instance()-\/>getChecks() \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876a5a4df203cdba2a5eb6f7eba19f9ab62e}{ToonzCheck::ePaint}}) ||}
\DoxyCodeLine{01886       (ToonzCheck::instance()-\/>getChecks() \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876a3137d7221943909520731bd1977219eb}{ToonzCheck::eInk1}}))}
\DoxyCodeLine{01887     glColor3d(0.5, 0.8, 0.8);}
\DoxyCodeLine{01888   \textcolor{comment}{// normally draw in red}}
\DoxyCodeLine{01889   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01890     glColor3d(1.0, 0.0, 0.0);}
\DoxyCodeLine{01891 }
\DoxyCodeLine{01892   \textcolor{keywordflow}{if} (m\_isMyPaintStyleSelected) \{}
\DoxyCodeLine{01893     tglDrawCircle(\mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}}, (m\_minCursorThick + 1) * 0.5);}
\DoxyCodeLine{01894     tglDrawCircle(\mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}}, (m\_maxCursorThick + 1) * 0.5);}
\DoxyCodeLine{01895     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01896   \}}
\DoxyCodeLine{01897 }
\DoxyCodeLine{01898   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = img) \{}
\DoxyCodeLine{01899     \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} ras = ti-\/>getRaster();}
\DoxyCodeLine{01900     \textcolor{keywordtype}{int} lx       = ras-\/>getLx();}
\DoxyCodeLine{01901     \textcolor{keywordtype}{int} ly       = ras-\/>getLy();}
\DoxyCodeLine{01902     drawEmptyCircle(\mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}}, tround(m\_minThick), lx \% 2 == 0, ly \% 2 == 0,}
\DoxyCodeLine{01903                     m\_pencil.getValue());}
\DoxyCodeLine{01904     drawEmptyCircle(\mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}}, tround(m\_maxThick), lx \% 2 == 0, ly \% 2 == 0,}
\DoxyCodeLine{01905                     m\_pencil.getValue());}
\DoxyCodeLine{01906   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01907     drawEmptyCircle(\mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}}, tround(m\_minThick), \textcolor{keyword}{true}, \textcolor{keyword}{true},}
\DoxyCodeLine{01908                     m\_pencil.getValue());}
\DoxyCodeLine{01909     drawEmptyCircle(\mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}}, tround(m\_maxThick), \textcolor{keyword}{true}, \textcolor{keyword}{true},}
\DoxyCodeLine{01910                     m\_pencil.getValue());}
\DoxyCodeLine{01911   \}}
\DoxyCodeLine{01912 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00045}{Toonz\+Check\+::e\+Ink}}, \mbox{\hyperlink{l00050}{Toonz\+Check\+::e\+Ink1}}, \mbox{\hyperlink{l00046}{Toonz\+Check\+::e\+Paint}}, \mbox{\hyperlink{l00276}{TTool\+::get\+Image()}}, and \mbox{\hyperlink{l00197}{m\+\_\+brush\+Pos}}.

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a4f23eebb42d27f068407a008bd635dc2}\label{class_toonz_raster_brush_tool_a4f23eebb42d27f068407a008bd635dc2}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!drawEmptyCircle@{drawEmptyCircle}}
\index{drawEmptyCircle@{drawEmptyCircle}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{drawEmptyCircle()}{drawEmptyCircle()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::draw\+Empty\+Circle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_point_t}{TPointD}}}]{point,  }\item[{int}]{thick,  }\item[{bool}]{is\+Lx\+Even,  }\item[{bool}]{is\+Ly\+Even,  }\item[{bool}]{is\+Pencil }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01032                                                           \{}
\DoxyCodeLine{01033   \textcolor{keywordflow}{if} (isLxEven) pos.x += 0.5;}
\DoxyCodeLine{01034   \textcolor{keywordflow}{if} (isLyEven) pos.y += 0.5;}
\DoxyCodeLine{01035 }
\DoxyCodeLine{01036   \textcolor{keywordflow}{if} (!isPencil)}
\DoxyCodeLine{01037     tglDrawCircle(pos, (thick + 1) * 0.5);}
\DoxyCodeLine{01038   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01039     \textcolor{keywordtype}{int} x = 0, y = tround((thick * 0.5) -\/ 0.5);}
\DoxyCodeLine{01040     \textcolor{keywordtype}{int} d           = 3 -\/ 2 * (int)(thick * 0.5);}
\DoxyCodeLine{01041     \textcolor{keywordtype}{bool} horizontal = \textcolor{keyword}{true}, isDecimal = thick \% 2 != 0;}
\DoxyCodeLine{01042     drawLine(\mbox{\hyperlink{class_t_point_t}{TPointD}}(x, y), pos, horizontal, isDecimal);}
\DoxyCodeLine{01043     \textcolor{keywordflow}{while} (y > x) \{}
\DoxyCodeLine{01044       \textcolor{keywordflow}{if} (d < 0) \{}
\DoxyCodeLine{01045         d          = d + 4 * x + 6;}
\DoxyCodeLine{01046         horizontal = \textcolor{keyword}{true};}
\DoxyCodeLine{01047       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01048         d          = d + 4 * (x -\/ y) + 10;}
\DoxyCodeLine{01049         horizontal = \textcolor{keyword}{false};}
\DoxyCodeLine{01050         y-\/-\/;}
\DoxyCodeLine{01051       \}}
\DoxyCodeLine{01052       x++;}
\DoxyCodeLine{01053       drawLine(\mbox{\hyperlink{class_t_point_t}{TPointD}}(x, y), pos, horizontal, isDecimal);}
\DoxyCodeLine{01054     \}}
\DoxyCodeLine{01055   \}}
\DoxyCodeLine{01056 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_a1358f17555b9d74f14df80f13567bdd6}\label{class_toonz_raster_brush_tool_a1358f17555b9d74f14df80f13567bdd6}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!drawLine@{drawLine}}
\index{drawLine@{drawLine}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{drawLine()}{drawLine()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::draw\+Line (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{point,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{centre,  }\item[{bool}]{horizontal,  }\item[{bool}]{is\+Decimal }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00917                                                                      \{}
\DoxyCodeLine{00918   \textcolor{keywordflow}{if} (!isDecimal) \{}
\DoxyCodeLine{00919     \textcolor{keywordflow}{if} (horizontal) \{}
\DoxyCodeLine{00920       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 1.5, point.y + 0.5) + centre,}
\DoxyCodeLine{00921                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 0.5, point.y + 0.5) + centre);}
\DoxyCodeLine{00922       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y -\/ 0.5, -\/point.x + 1.5) + centre,}
\DoxyCodeLine{00923                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y -\/ 0.5, -\/point.x + 0.5) + centre);}
\DoxyCodeLine{00924       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x + 0.5, -\/point.y + 0.5) + centre,}
\DoxyCodeLine{00925                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x -\/ 0.5, -\/point.y + 0.5) + centre);}
\DoxyCodeLine{00926       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, point.x -\/ 0.5) + centre,}
\DoxyCodeLine{00927                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, point.x + 0.5) + centre);}
\DoxyCodeLine{00928 }
\DoxyCodeLine{00929       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y -\/ 0.5, point.x + 0.5) + centre,}
\DoxyCodeLine{00930                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y -\/ 0.5, point.x -\/ 0.5) + centre);}
\DoxyCodeLine{00931       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 0.5, -\/point.y + 0.5) + centre,}
\DoxyCodeLine{00932                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 1.5, -\/point.y + 0.5) + centre);}
\DoxyCodeLine{00933       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, -\/point.x + 0.5) + centre,}
\DoxyCodeLine{00934                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, -\/point.x + 1.5) + centre);}
\DoxyCodeLine{00935       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x -\/ 0.5, point.y + 0.5) + centre,}
\DoxyCodeLine{00936                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x + 0.5, point.y + 0.5) + centre);}
\DoxyCodeLine{00937     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00938       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 1.5, point.y + 1.5) + centre,}
\DoxyCodeLine{00939                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 1.5, point.y + 0.5) + centre);}
\DoxyCodeLine{00940       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 1.5, point.y + 0.5) + centre,}
\DoxyCodeLine{00941                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 0.5, point.y + 0.5) + centre);}
\DoxyCodeLine{00942       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y + 0.5, -\/point.x + 1.5) + centre,}
\DoxyCodeLine{00943                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y -\/ 0.5, -\/point.x + 1.5) + centre);}
\DoxyCodeLine{00944       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y -\/ 0.5, -\/point.x + 1.5) + centre,}
\DoxyCodeLine{00945                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y -\/ 0.5, -\/point.x + 0.5) + centre);}
\DoxyCodeLine{00946       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x + 0.5, -\/point.y -\/ 0.5) + centre,}
\DoxyCodeLine{00947                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x + 0.5, -\/point.y + 0.5) + centre);}
\DoxyCodeLine{00948       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x + 0.5, -\/point.y + 0.5) + centre,}
\DoxyCodeLine{00949                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x -\/ 0.5, -\/point.y + 0.5) + centre);}
\DoxyCodeLine{00950       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 1.5, point.x -\/ 0.5) + centre,}
\DoxyCodeLine{00951                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, point.x -\/ 0.5) + centre);}
\DoxyCodeLine{00952       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, point.x -\/ 0.5) + centre,}
\DoxyCodeLine{00953                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, point.x + 0.5) + centre);}
\DoxyCodeLine{00954 }
\DoxyCodeLine{00955       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y + 0.5, point.x -\/ 0.5) + centre,}
\DoxyCodeLine{00956                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y -\/ 0.5, point.x -\/ 0.5) + centre);}
\DoxyCodeLine{00957       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y -\/ 0.5, point.x -\/ 0.5) + centre,}
\DoxyCodeLine{00958                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y -\/ 0.5, point.x + 0.5) + centre);}
\DoxyCodeLine{00959       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 1.5, -\/point.y -\/ 0.5) + centre,}
\DoxyCodeLine{00960                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 1.5, -\/point.y + 0.5) + centre);}
\DoxyCodeLine{00961       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 1.5, -\/point.y + 0.5) + centre,}
\DoxyCodeLine{00962                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 0.5, -\/point.y + 0.5) + centre);}
\DoxyCodeLine{00963       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 1.5, -\/point.x + 1.5) + centre,}
\DoxyCodeLine{00964                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, -\/point.x + 1.5) + centre);}
\DoxyCodeLine{00965       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, -\/point.x + 1.5) + centre,}
\DoxyCodeLine{00966                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, -\/point.x + 0.5) + centre);}
\DoxyCodeLine{00967       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x + 0.5, point.y + 1.5) + centre,}
\DoxyCodeLine{00968                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x + 0.5, point.y + 0.5) + centre);}
\DoxyCodeLine{00969       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x + 0.5, point.y + 0.5) + centre,}
\DoxyCodeLine{00970                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x -\/ 0.5, point.y + 0.5) + centre);}
\DoxyCodeLine{00971     \}}
\DoxyCodeLine{00972   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00973     \textcolor{keywordflow}{if} (horizontal) \{}
\DoxyCodeLine{00974       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 0.5, point.y + 0.5) + centre,}
\DoxyCodeLine{00975                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x + 0.5, point.y + 0.5) + centre);}
\DoxyCodeLine{00976       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y + 0.5, point.x -\/ 0.5) + centre,}
\DoxyCodeLine{00977                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y + 0.5, point.x + 0.5) + centre);}
\DoxyCodeLine{00978       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y + 0.5, -\/point.x + 0.5) + centre,}
\DoxyCodeLine{00979                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y + 0.5, -\/point.x -\/ 0.5) + centre);}
\DoxyCodeLine{00980       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x + 0.5, -\/point.y -\/ 0.5) + centre,}
\DoxyCodeLine{00981                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 0.5, -\/point.y -\/ 0.5) + centre);}
\DoxyCodeLine{00982       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x -\/ 0.5, -\/point.y -\/ 0.5) + centre,}
\DoxyCodeLine{00983                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x + 0.5, -\/point.y -\/ 0.5) + centre);}
\DoxyCodeLine{00984       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, -\/point.x + 0.5) + centre,}
\DoxyCodeLine{00985                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, -\/point.x -\/ 0.5) + centre);}
\DoxyCodeLine{00986       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, point.x -\/ 0.5) + centre,}
\DoxyCodeLine{00987                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, point.x + 0.5) + centre);}
\DoxyCodeLine{00988       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x + 0.5, point.y + 0.5) + centre,}
\DoxyCodeLine{00989                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x -\/ 0.5, point.y + 0.5) + centre);}
\DoxyCodeLine{00990     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00991       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 0.5, point.y + 1.5) + centre,}
\DoxyCodeLine{00992                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 0.5, point.y + 0.5) + centre);}
\DoxyCodeLine{00993       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 0.5, point.y + 0.5) + centre,}
\DoxyCodeLine{00994                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x + 0.5, point.y + 0.5) + centre);}
\DoxyCodeLine{00995       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y + 1.5, point.x -\/ 0.5) + centre,}
\DoxyCodeLine{00996                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y + 0.5, point.x -\/ 0.5) + centre);}
\DoxyCodeLine{00997       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y + 0.5, point.x -\/ 0.5) + centre,}
\DoxyCodeLine{00998                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y + 0.5, point.x + 0.5) + centre);}
\DoxyCodeLine{00999       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y + 1.5, -\/point.x + 0.5) + centre,}
\DoxyCodeLine{01000                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y + 0.5, -\/point.x + 0.5) + centre);}
\DoxyCodeLine{01001       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y + 0.5, -\/point.x + 0.5) + centre,}
\DoxyCodeLine{01002                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.y + 0.5, -\/point.x -\/ 0.5) + centre);}
\DoxyCodeLine{01003       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 0.5, -\/point.y -\/ 1.5) + centre,}
\DoxyCodeLine{01004                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 0.5, -\/point.y -\/ 0.5) + centre);}
\DoxyCodeLine{01005       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x -\/ 0.5, -\/point.y -\/ 0.5) + centre,}
\DoxyCodeLine{01006                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(point.x + 0.5, -\/point.y -\/ 0.5) + centre);}
\DoxyCodeLine{01007 }
\DoxyCodeLine{01008       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x + 0.5, -\/point.y -\/ 1.5) + centre,}
\DoxyCodeLine{01009                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x + 0.5, -\/point.y -\/ 0.5) + centre);}
\DoxyCodeLine{01010       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x + 0.5, -\/point.y -\/ 0.5) + centre,}
\DoxyCodeLine{01011                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x -\/ 0.5, -\/point.y -\/ 0.5) + centre);}
\DoxyCodeLine{01012       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 1.5, -\/point.x + 0.5) + centre,}
\DoxyCodeLine{01013                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, -\/point.x + 0.5) + centre);}
\DoxyCodeLine{01014       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, -\/point.x + 0.5) + centre,}
\DoxyCodeLine{01015                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, -\/point.x -\/ 0.5) + centre);}
\DoxyCodeLine{01016       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 1.5, point.x -\/ 0.5) + centre,}
\DoxyCodeLine{01017                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, point.x -\/ 0.5) + centre);}
\DoxyCodeLine{01018       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, point.x -\/ 0.5) + centre,}
\DoxyCodeLine{01019                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.y -\/ 0.5, point.x + 0.5) + centre);}
\DoxyCodeLine{01020       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x + 0.5, point.y + 1.5) + centre,}
\DoxyCodeLine{01021                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x + 0.5, point.y + 0.5) + centre);}
\DoxyCodeLine{01022       tglDrawSegment(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x + 0.5, point.y + 0.5) + centre,}
\DoxyCodeLine{01023                      \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/point.x -\/ 0.5, point.y + 0.5) + centre);}
\DoxyCodeLine{01024     \}}
\DoxyCodeLine{01025   \}}
\DoxyCodeLine{01026 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_aed21519542ecf70f2797373293880c47}\label{class_toonz_raster_brush_tool_aed21519542ecf70f2797373293880c47}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!finishRasterBrush@{finishRasterBrush}}
\index{finishRasterBrush@{finishRasterBrush}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{finishRasterBrush()}{finishRasterBrush()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::finish\+Raster\+Brush (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{double}]{pressure\+Val }\end{DoxyParamCaption})}

ドラッグ中にツールが切り替わった場合に備え、on\+Deactivate時と\+Mouse\+Release時にと同じ終了処理を行う 
\begin{DoxyCode}{0}
\DoxyCodeLine{01570                                                                  \{}
\DoxyCodeLine{01571   \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}));}
\DoxyCodeLine{01572 }
\DoxyCodeLine{01573   \textcolor{keywordflow}{if} (!ti) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01574 }
\DoxyCodeLine{01575   \mbox{\hyperlink{class_t_point_t}{TPointD}} rasCenter         = ti-\/>getRaster()-\/>getCenterD();}
\DoxyCodeLine{01576   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app   = TTool::getApplication();}
\DoxyCodeLine{01577   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level          = app-\/>getCurrentLevel()-\/>getLevel();}
\DoxyCodeLine{01578   \mbox{\hyperlink{class_t_smart_pointer_t}{TXshSimpleLevelP}} simLevel = level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01579 }
\DoxyCodeLine{01580   \textcolor{comment}{/*-\/-\/}}
\DoxyCodeLine{01581 \textcolor{comment}{   * 描画中にカレントフレームが変わっても、描画開始時のFidに対してUndoを記録する}}
\DoxyCodeLine{01582 \textcolor{comment}{   * -\/-\/*/}}
\DoxyCodeLine{01583   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} frameId =}
\DoxyCodeLine{01584       m\_workingFrameId.isEmptyFrame() ? \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}() : m\_workingFrameId;}
\DoxyCodeLine{01585   \textcolor{keywordflow}{if} (m\_isMyPaintStyleSelected) \{}
\DoxyCodeLine{01586     \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} ras = ti-\/>getRaster();}
\DoxyCodeLine{01587     \mbox{\hyperlink{class_t_point_t}{TPointD}} point(pos + rasCenter);}
\DoxyCodeLine{01588     \textcolor{keywordtype}{double} pressure = m\_pressure.getValue() ? pressureVal : 0.5;}
\DoxyCodeLine{01589 }
\DoxyCodeLine{01590     m\_strokeSegmentRect.empty();}
\DoxyCodeLine{01591     m\_toonz\_brush-\/>strokeTo(point, pressure, restartBrushTimer());}
\DoxyCodeLine{01592     m\_toonz\_brush-\/>endStroke();}
\DoxyCodeLine{01593     \mbox{\hyperlink{class_t_rect_t}{TRect}} updateRect = m\_strokeSegmentRect * ras-\/>getBounds();}
\DoxyCodeLine{01594     \textcolor{keywordflow}{if} (!updateRect.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \{}
\DoxyCodeLine{01595       \textcolor{comment}{// ras-\/>extract(updateRect)-\/>copy(m\_workRaster-\/>extract(updateRect));}}
\DoxyCodeLine{01596       m\_toonz\_brush-\/>updateDrawing(ras, m\_backupRas, m\_strokeSegmentRect,}
\DoxyCodeLine{01597                                    m\_styleId, m\_modifierLockAlpha.getValue());}
\DoxyCodeLine{01598     \}}
\DoxyCodeLine{01599     \mbox{\hyperlink{class_t_point_t}{TPointD}} thickOffset(m\_maxCursorThick * 0.5,}
\DoxyCodeLine{01600                         m\_maxCursorThick * 0.5);  \textcolor{comment}{// TODO}}
\DoxyCodeLine{01601     \mbox{\hyperlink{class_t_rect_t}{TRectD}} invalidateRect = convert(m\_strokeSegmentRect) -\/ rasCenter;}
\DoxyCodeLine{01602     invalidateRect += \mbox{\hyperlink{class_t_rect_t}{TRectD}}(pos -\/ thickOffset, pos + thickOffset);}
\DoxyCodeLine{01603     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}(invalidateRect.enlarge(2.0));}
\DoxyCodeLine{01604 }
\DoxyCodeLine{01605     \textcolor{keywordflow}{if} (m\_toonz\_brush) \{}
\DoxyCodeLine{01606       \textcolor{keyword}{delete} m\_toonz\_brush;}
\DoxyCodeLine{01607       m\_toonz\_brush = 0;}
\DoxyCodeLine{01608     \}}
\DoxyCodeLine{01609 }
\DoxyCodeLine{01610     m\_lastRect.empty();}
\DoxyCodeLine{01611     m\_workRas-\/>unlock();}
\DoxyCodeLine{01612 }
\DoxyCodeLine{01613     \textcolor{keywordflow}{if} (m\_tileSet-\/>getTileCount() > 0) \{}
\DoxyCodeLine{01614       \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} subras = ras-\/>extract(m\_strokeRect)-\/>clone();}
\DoxyCodeLine{01615       TUndoManager::manager()-\/>add(\textcolor{keyword}{new} MyPaintBrushUndo(}
\DoxyCodeLine{01616           m\_tileSet, simLevel.getPointer(), frameId, \mbox{\hyperlink{class_t_tool_aabd06af7335f1ba0c96f36f1ac3e9976}{m\_isFrameCreated}},}
\DoxyCodeLine{01617           \mbox{\hyperlink{class_t_tool_afec1db61477579b224321fd469e4ec00}{m\_isLevelCreated}}, subras, m\_strokeRect.getP00()));}
\DoxyCodeLine{01618     \}}
\DoxyCodeLine{01619 }
\DoxyCodeLine{01620   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_rasterTrack \&\&}
\DoxyCodeLine{01621              (m\_hardness.getValue() == 100 || m\_pencil.getValue())) \{}
\DoxyCodeLine{01622     \textcolor{keywordtype}{double} thickness = m\_pressure.getValue()}
\DoxyCodeLine{01623                            ? computeThickness(pressureVal, m\_rasThickness)}
\DoxyCodeLine{01624                            : m\_rasThickness.getValue().second;}
\DoxyCodeLine{01625 }
\DoxyCodeLine{01626     \textcolor{comment}{/*-\/-\/-\/ ストロークの最初にMaxサイズの円が描かれてしまう不具合を防止する -\/-\/-\/*/}}
\DoxyCodeLine{01627     \textcolor{keywordflow}{if} (m\_pressure.getValue() \&\& pressureVal == 1.0)}
\DoxyCodeLine{01628       thickness = m\_rasThickness.getValue().first;}
\DoxyCodeLine{01629 }
\DoxyCodeLine{01630     \textcolor{comment}{/*-\/-\/ Pencilモードでなく、Hardness=100 の場合のブラシサイズを1段階下げる -\/-\/*/}}
\DoxyCodeLine{01631     \textcolor{keywordflow}{if} (!m\_pencil.getValue()) thickness -\/= 1.0;}
\DoxyCodeLine{01632 }
\DoxyCodeLine{01633     \mbox{\hyperlink{class_t_rect_t}{TRectD}} invalidateRect;}
\DoxyCodeLine{01634     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} thickPoint(pos + rasCenter, thickness);}
\DoxyCodeLine{01635     std::vector<TThickPoint> pts;}
\DoxyCodeLine{01636     \textcolor{keywordflow}{if} (m\_smooth.getValue() == 0) \{}
\DoxyCodeLine{01637       pts.push\_back(thickPoint);}
\DoxyCodeLine{01638     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01639       m\_smoothStroke.addPoint(thickPoint);}
\DoxyCodeLine{01640       m\_smoothStroke.endStroke();}
\DoxyCodeLine{01641       m\_smoothStroke.getSmoothPoints(pts);}
\DoxyCodeLine{01642     \}}
\DoxyCodeLine{01643     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < pts.size(); ++i) \{}
\DoxyCodeLine{01644       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} \&thickPoint = pts[i];}
\DoxyCodeLine{01645       m\_rasterTrack-\/>add(thickPoint);}
\DoxyCodeLine{01646       m\_tileSaver-\/>save(m\_rasterTrack-\/>getLastRect());}
\DoxyCodeLine{01647       m\_rasterTrack-\/>generateLastPieceOfStroke(m\_pencil.getValue(), \textcolor{keyword}{true});}
\DoxyCodeLine{01648 }
\DoxyCodeLine{01649       std::vector<TThickPoint> brushPoints = m\_rasterTrack-\/>getPointsSequence();}
\DoxyCodeLine{01650       \textcolor{keywordtype}{int} m                                = (int)brushPoints.size();}
\DoxyCodeLine{01651       std::vector<TThickPoint> points;}
\DoxyCodeLine{01652       \textcolor{keywordflow}{if} (m == 3) \{}
\DoxyCodeLine{01653         points.push\_back(brushPoints[0]);}
\DoxyCodeLine{01654         points.push\_back(brushPoints[1]);}
\DoxyCodeLine{01655       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01656         points.push\_back(brushPoints[m -\/ 4]);}
\DoxyCodeLine{01657         points.push\_back(brushPoints[m -\/ 3]);}
\DoxyCodeLine{01658         points.push\_back(brushPoints[m -\/ 2]);}
\DoxyCodeLine{01659       \}}
\DoxyCodeLine{01660       \textcolor{keywordtype}{int} maxThickness = m\_rasThickness.getValue().second;}
\DoxyCodeLine{01661       invalidateRect += ToolUtils::getBounds(points, maxThickness) -\/ rasCenter;}
\DoxyCodeLine{01662     \}}
\DoxyCodeLine{01663     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}(invalidateRect.enlarge(2));}
\DoxyCodeLine{01664 }
\DoxyCodeLine{01665     \textcolor{keywordflow}{if} (m\_tileSet-\/>getTileCount() > 0) \{}
\DoxyCodeLine{01666       TUndoManager::manager()-\/>add(\textcolor{keyword}{new} RasterBrushUndo(}
\DoxyCodeLine{01667           m\_tileSet, m\_rasterTrack-\/>getPointsSequence(),}
\DoxyCodeLine{01668           m\_rasterTrack-\/>getStyleId(), m\_rasterTrack-\/>isSelective(),}
\DoxyCodeLine{01669           simLevel.getPointer(), frameId, m\_pencil.getValue(), \mbox{\hyperlink{class_t_tool_aabd06af7335f1ba0c96f36f1ac3e9976}{m\_isFrameCreated}},}
\DoxyCodeLine{01670           \mbox{\hyperlink{class_t_tool_afec1db61477579b224321fd469e4ec00}{m\_isLevelCreated}}, m\_rasterTrack-\/>isPaletteOrder(),}
\DoxyCodeLine{01671           m\_rasterTrack-\/>isAlphaLocked()));}
\DoxyCodeLine{01672     \}}
\DoxyCodeLine{01673     \textcolor{keyword}{delete} m\_rasterTrack;}
\DoxyCodeLine{01674     m\_rasterTrack = 0;}
\DoxyCodeLine{01675   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01676     \textcolor{keywordtype}{double} maxThickness = m\_rasThickness.getValue().second;}
\DoxyCodeLine{01677     \textcolor{keywordtype}{double} thickness    = (m\_pressure.getValue())}
\DoxyCodeLine{01678                            ? computeThickness(pressureVal, m\_rasThickness)}
\DoxyCodeLine{01679                            : maxThickness;}
\DoxyCodeLine{01680     \mbox{\hyperlink{class_t_point_t}{TPointD}} rasCenter = ti-\/>getRaster()-\/>getCenterD();}
\DoxyCodeLine{01681     \mbox{\hyperlink{class_t_rect_t}{TRectD}} invalidateRect;}
\DoxyCodeLine{01682     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} thickPoint(pos + rasCenter, thickness);}
\DoxyCodeLine{01683     std::vector<TThickPoint> pts;}
\DoxyCodeLine{01684     \textcolor{keywordflow}{if} (m\_smooth.getValue() == 0) \{}
\DoxyCodeLine{01685       pts.push\_back(thickPoint);}
\DoxyCodeLine{01686     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01687       m\_smoothStroke.addPoint(thickPoint);}
\DoxyCodeLine{01688       m\_smoothStroke.endStroke();}
\DoxyCodeLine{01689       m\_smoothStroke.getSmoothPoints(pts);}
\DoxyCodeLine{01690     \}}
\DoxyCodeLine{01691     \textcolor{comment}{// we need to skip the for-\/loop here if pts.size() == 0 or else}}
\DoxyCodeLine{01692     \textcolor{comment}{// (pts.size() -\/ 1) becomes ULLONG\_MAX since size\_t is unsigned}}
\DoxyCodeLine{01693     \textcolor{keywordflow}{if} (pts.size() > 0) \{}
\DoxyCodeLine{01694       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < pts.size() -\/ 1; ++i) \{}
\DoxyCodeLine{01695         \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} old = m\_points.back();}
\DoxyCodeLine{01696 }
\DoxyCodeLine{01697         \textcolor{keyword}{const} \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} \&point = pts[i];}
\DoxyCodeLine{01698         \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} mid((old + point) * 0.5, (point.thick + old.thick) * 0.5);}
\DoxyCodeLine{01699         m\_points.push\_back(mid);}
\DoxyCodeLine{01700         m\_points.push\_back(point);}
\DoxyCodeLine{01701 }
\DoxyCodeLine{01702         \mbox{\hyperlink{class_t_rect_t}{TRect}} bbox;}
\DoxyCodeLine{01703         \textcolor{keywordtype}{int} m = (int)m\_points.size();}
\DoxyCodeLine{01704         std::vector<TThickPoint> points;}
\DoxyCodeLine{01705         \textcolor{keywordflow}{if} (m == 3) \{}
\DoxyCodeLine{01706           \textcolor{comment}{// ho appena cominciato. devo disegnare un segmento}}
\DoxyCodeLine{01707           \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} pa = m\_points.front();}
\DoxyCodeLine{01708           points.push\_back(pa);}
\DoxyCodeLine{01709           points.push\_back(mid);}
\DoxyCodeLine{01710           bbox = m\_bluredBrush-\/>getBoundFromPoints(points);}
\DoxyCodeLine{01711           updateWorkAndBackupRasters(bbox + m\_lastRect);}
\DoxyCodeLine{01712           m\_tileSaver-\/>save(bbox);}
\DoxyCodeLine{01713           m\_bluredBrush-\/>addArc(pa, (mid + pa) * 0.5, mid, 1, 1);}
\DoxyCodeLine{01714           m\_lastRect += bbox;}
\DoxyCodeLine{01715         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01716           points.push\_back(m\_points[m -\/ 4]);}
\DoxyCodeLine{01717           points.push\_back(old);}
\DoxyCodeLine{01718           points.push\_back(mid);}
\DoxyCodeLine{01719           bbox = m\_bluredBrush-\/>getBoundFromPoints(points);}
\DoxyCodeLine{01720           updateWorkAndBackupRasters(bbox + m\_lastRect);}
\DoxyCodeLine{01721           m\_tileSaver-\/>save(bbox);}
\DoxyCodeLine{01722           m\_bluredBrush-\/>addArc(m\_points[m -\/ 4], old, mid, 1, 1);}
\DoxyCodeLine{01723           m\_lastRect += bbox;}
\DoxyCodeLine{01724         \}}
\DoxyCodeLine{01725 }
\DoxyCodeLine{01726         invalidateRect +=}
\DoxyCodeLine{01727             ToolUtils::getBounds(points, maxThickness) -\/ rasCenter;}
\DoxyCodeLine{01728 }
\DoxyCodeLine{01729         m\_bluredBrush-\/>updateDrawing(ti-\/>getRaster(), m\_backupRas, bbox,}
\DoxyCodeLine{01730                                      m\_styleId, m\_drawOrder.getIndex(),}
\DoxyCodeLine{01731                                      m\_modifierLockAlpha.getValue());}
\DoxyCodeLine{01732         m\_strokeRect += bbox;}
\DoxyCodeLine{01733       \}}
\DoxyCodeLine{01734       \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} point = pts.back();}
\DoxyCodeLine{01735       m\_points.push\_back(point);}
\DoxyCodeLine{01736       \textcolor{keywordtype}{int} m = m\_points.size();}
\DoxyCodeLine{01737       std::vector<TThickPoint> points;}
\DoxyCodeLine{01738       points.push\_back(m\_points[m -\/ 3]);}
\DoxyCodeLine{01739       points.push\_back(m\_points[m -\/ 2]);}
\DoxyCodeLine{01740       points.push\_back(m\_points[m -\/ 1]);}
\DoxyCodeLine{01741       \mbox{\hyperlink{class_t_rect_t}{TRect}} bbox = m\_bluredBrush-\/>getBoundFromPoints(points);}
\DoxyCodeLine{01742       updateWorkAndBackupRasters(bbox);}
\DoxyCodeLine{01743       m\_tileSaver-\/>save(bbox);}
\DoxyCodeLine{01744       m\_bluredBrush-\/>addArc(points[0], points[1], points[2], 1, 1);}
\DoxyCodeLine{01745       m\_bluredBrush-\/>updateDrawing(ti-\/>getRaster(), m\_backupRas, bbox,}
\DoxyCodeLine{01746                                    m\_styleId, m\_drawOrder.getIndex(),}
\DoxyCodeLine{01747                                    m\_modifierLockAlpha.getValue());}
\DoxyCodeLine{01748 }
\DoxyCodeLine{01749       invalidateRect += ToolUtils::getBounds(points, maxThickness) -\/ rasCenter;}
\DoxyCodeLine{01750 }
\DoxyCodeLine{01751       m\_lastRect += bbox;}
\DoxyCodeLine{01752       m\_strokeRect += bbox;}
\DoxyCodeLine{01753     \}}
\DoxyCodeLine{01754     \textcolor{keywordflow}{if} (!invalidateRect.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}(invalidateRect.enlarge(2));}
\DoxyCodeLine{01755     m\_lastRect.empty();}
\DoxyCodeLine{01756 }
\DoxyCodeLine{01757     \textcolor{keyword}{delete} m\_bluredBrush;}
\DoxyCodeLine{01758     m\_bluredBrush = 0;}
\DoxyCodeLine{01759 }
\DoxyCodeLine{01760     \textcolor{keywordflow}{if} (m\_tileSet-\/>getTileCount() > 0) \{}
\DoxyCodeLine{01761       TUndoManager::manager()-\/>add(\textcolor{keyword}{new} RasterBluredBrushUndo(}
\DoxyCodeLine{01762           m\_tileSet, m\_points, m\_styleId, (DrawOrder)m\_drawOrder.getIndex(),}
\DoxyCodeLine{01763           m\_modifierLockAlpha.getValue(), simLevel.getPointer(), frameId,}
\DoxyCodeLine{01764           m\_rasThickness.getValue().second, m\_hardness.getValue() * 0.01,}
\DoxyCodeLine{01765           \mbox{\hyperlink{class_t_tool_aabd06af7335f1ba0c96f36f1ac3e9976}{m\_isFrameCreated}}, \mbox{\hyperlink{class_t_tool_afec1db61477579b224321fd469e4ec00}{m\_isLevelCreated}}));}
\DoxyCodeLine{01766     \}}
\DoxyCodeLine{01767   \}}
\DoxyCodeLine{01768   \textcolor{keyword}{delete} m\_tileSaver;}
\DoxyCodeLine{01769 }
\DoxyCodeLine{01770   m\_tileSaver = 0;}
\DoxyCodeLine{01771 }
\DoxyCodeLine{01772   \textcolor{comment}{/*-\/-\/ FIdを指定して、描画中にフレームが動いても、}}
\DoxyCodeLine{01773 \textcolor{comment}{  　　描画開始時のFidのサムネイルが更新されるようにする。-\/-\/*/}}
\DoxyCodeLine{01774   \mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}(frameId);}
\DoxyCodeLine{01775 }
\DoxyCodeLine{01776   m\_strokeRect.empty();}
\DoxyCodeLine{01777 }
\DoxyCodeLine{01778   ToolUtils::updateSaveBox();}
\DoxyCodeLine{01779 }
\DoxyCodeLine{01780   \textcolor{comment}{/*-\/-\/ 作業中のフレームをリセット -\/-\/*/}}
\DoxyCodeLine{01781   m\_workingFrameId = \mbox{\hyperlink{class_t_frame_id}{TFrameId}}();}
\DoxyCodeLine{01782 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00688}{TTool\+::get\+Current\+Fid()}}, \mbox{\hyperlink{l00276}{TTool\+::get\+Image()}}, \mbox{\hyperlink{l00095}{TXsh\+Level\+::get\+Simple\+Level()}}, \mbox{\hyperlink{l00540}{TTool\+::invalidate()}}, \mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{TRect\+T$<$ T $>$\+::is\+Empty()}}, \mbox{\hyperlink{l00546}{TTool\+::m\+\_\+is\+Frame\+Created}}, \mbox{\hyperlink{l00544}{TTool\+::m\+\_\+is\+Level\+Created}}, and \mbox{\hyperlink{l00609}{TTool\+::notify\+Image\+Changed()}}.



Referenced by \mbox{\hyperlink{l01192}{on\+Deactivate()}}.

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a9e7ff0cf5f45218c896a5dbdbda3d292}\label{class_toonz_raster_brush_tool_a9e7ff0cf5f45218c896a5dbdbda3d292}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!getCenteredCursorPos@{getCenteredCursorPos}}
\index{getCenteredCursorPos@{getCenteredCursorPos}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{getCenteredCursorPos()}{getCenteredCursorPos()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Toonz\+Raster\+Brush\+Tool\+::get\+Centered\+Cursor\+Pos (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{original\+Cursor\+Pos }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01061                                       \{}
\DoxyCodeLine{01062   \textcolor{keywordflow}{if} (m\_isMyPaintStyleSelected) \textcolor{keywordflow}{return} originalCursorPos;}
\DoxyCodeLine{01063   \mbox{\hyperlink{class_t_xsh_level_handle}{TXshLevelHandle}} *levelHandle = m\_application-\/>getCurrentLevel();}
\DoxyCodeLine{01064   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *level = levelHandle ? levelHandle-\/>getSimpleLevel() : 0;}
\DoxyCodeLine{01065   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} resolution =}
\DoxyCodeLine{01066       level ? level-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_adac2b8c3ed147184fc78799cd65ca8f9}{getImageRes}}() : \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(0, 0);}
\DoxyCodeLine{01067 }
\DoxyCodeLine{01068   \textcolor{keywordtype}{bool} xEven = (resolution.lx \% 2 == 0);}
\DoxyCodeLine{01069   \textcolor{keywordtype}{bool} yEven = (resolution.ly \% 2 == 0);}
\DoxyCodeLine{01070 }
\DoxyCodeLine{01071   \mbox{\hyperlink{class_t_point_t}{TPointD}} centeredCursorPos = originalCursorPos;}
\DoxyCodeLine{01072 }
\DoxyCodeLine{01073   \textcolor{keywordflow}{if} (xEven) centeredCursorPos.x -\/= 0.5;}
\DoxyCodeLine{01074   \textcolor{keywordflow}{if} (yEven) centeredCursorPos.y -\/= 0.5;}
\DoxyCodeLine{01075 }
\DoxyCodeLine{01076   \textcolor{keywordflow}{return} centeredCursorPos;}
\DoxyCodeLine{01077 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_a304658ad28cdffe07ff3ff47540131ac}\label{class_toonz_raster_brush_tool_a304658ad28cdffe07ff3ff47540131ac}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!getCursorId@{getCursorId}}
\index{getCursorId@{getCursorId}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{getCursorId()}{getCursorId()}}
{\footnotesize\ttfamily int Toonz\+Raster\+Brush\+Tool\+::get\+Cursor\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Returns the type of cursor used by the tool. 

\begin{DoxySeeAlso}{See also}
For a list of cursor ids \mbox{\hyperlink{}{cursor.\+h}} 
\end{DoxySeeAlso}


Reimplemented from \mbox{\hyperlink{class_t_tool_a1768a57b8b6d1480618fd923fad15f1d}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00149 \{ \textcolor{keywordflow}{return} ToolCursor::PenCursor; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_a56d55d26719f1570c0a06a2a97456ff3}\label{class_toonz_raster_brush_tool_a56d55d26719f1570c0a06a2a97456ff3}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!getProperties@{getProperties}}
\index{getProperties@{getProperties}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{getProperties()}{getProperties()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ Toonz\+Raster\+Brush\+Tool\+::get\+Properties (\begin{DoxyParamCaption}\item[{int}]{target\+Type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01949                                                            \{}
\DoxyCodeLine{01950   \textcolor{keywordflow}{if} (!m\_presetsLoaded) initPresets();}
\DoxyCodeLine{01951 }
\DoxyCodeLine{01952   \textcolor{keywordflow}{return} \&m\_prop[idx];}
\DoxyCodeLine{01953 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_ad27ec1cd179ce0f1baf0849397e52176}\label{class_toonz_raster_brush_tool_ad27ec1cd179ce0f1baf0849397e52176}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!getToolType@{getToolType}}
\index{getToolType@{getToolType}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{getToolType()}{getToolType()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} Toonz\+Raster\+Brush\+Tool\+::get\+Tool\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00129 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca01ffd66b00b05a88c02ce8ceb5da3b8b}{TTool::LevelWriteTool}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_acce36ff1c57a57e0bd502933bac2f7af}\label{class_toonz_raster_brush_tool_acce36ff1c57a57e0bd502933bac2f7af}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!initPresets@{initPresets}}
\index{initPresets@{initPresets}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{initPresets()}{initPresets()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::init\+Presets (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02047                                        \{}
\DoxyCodeLine{02048   \textcolor{keywordflow}{if} (!m\_presetsLoaded) \{}
\DoxyCodeLine{02049     \textcolor{comment}{// If necessary, load the presets from file}}
\DoxyCodeLine{02050     m\_presetsLoaded = \textcolor{keyword}{true};}
\DoxyCodeLine{02051     \mbox{\hyperlink{class_toonz_raster_brush_tool_aa8691d0d29ea4e51228d89e9073ba1ce}{m\_presetsManager}}.load(TEnv::getConfigDir() + \textcolor{stringliteral}{"{}brush\_toonzraster.txt"{}});}
\DoxyCodeLine{02052   \}}
\DoxyCodeLine{02053 }
\DoxyCodeLine{02054   \textcolor{comment}{// Rebuild the presets property entries}}
\DoxyCodeLine{02055   \textcolor{keyword}{const} std::set<BrushData> \&presets = \mbox{\hyperlink{class_toonz_raster_brush_tool_aa8691d0d29ea4e51228d89e9073ba1ce}{m\_presetsManager}}.presets();}
\DoxyCodeLine{02056 }
\DoxyCodeLine{02057   m\_preset.deleteAllValues();}
\DoxyCodeLine{02058   m\_preset.addValue(CUSTOM\_WSTR);}
\DoxyCodeLine{02059   m\_preset.setItemUIName(CUSTOM\_WSTR, tr(\textcolor{stringliteral}{"{}<custom>"{}}));}
\DoxyCodeLine{02060 }
\DoxyCodeLine{02061   std::set<BrushData>::const\_iterator it, end = presets.end();}
\DoxyCodeLine{02062   \textcolor{keywordflow}{for} (it = presets.begin(); it != end; ++it) m\_preset.addValue(it-\/>m\_name);}
\DoxyCodeLine{02063 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_a889046a046384ea43836a15ca5cfe99b}\label{class_toonz_raster_brush_tool_a889046a046384ea43836a15ca5cfe99b}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!isMyPaintStyleSelected@{isMyPaintStyleSelected}}
\index{isMyPaintStyleSelected@{isMyPaintStyleSelected}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{isMyPaintStyleSelected()}{isMyPaintStyleSelected()}}
{\footnotesize\ttfamily bool Toonz\+Raster\+Brush\+Tool\+::is\+My\+Paint\+Style\+Selected (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00172 \{ \textcolor{keywordflow}{return} m\_isMyPaintStyleSelected; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_a98e19cb6ab1d05345e02efd693d3fdb8}\label{class_toonz_raster_brush_tool_a98e19cb6ab1d05345e02efd693d3fdb8}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!isPencilModeActive@{isPencilModeActive}}
\index{isPencilModeActive@{isPencilModeActive}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{isPencilModeActive()}{isPencilModeActive()}}
{\footnotesize\ttfamily bool Toonz\+Raster\+Brush\+Tool\+::is\+Pencil\+Mode\+Active (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Brush、\+Paint\+Brush、\+Eraser\+Toolが\+Pencil\+Modeのときに\+Trueを返す 

Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02167                                               \{}
\DoxyCodeLine{02168   \textcolor{keywordflow}{return} getTargetType() == \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{TTool::ToonzImage}} \&\& m\_pencil.getValue();}
\DoxyCodeLine{02169 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00279}{TTool\+::\+Toonz\+Image}}.

\mbox{\Hypertarget{class_toonz_raster_brush_tool_aa12d4083948b3365e83ff24f73babe0f}\label{class_toonz_raster_brush_tool_aa12d4083948b3365e83ff24f73babe0f}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01241                                                                 \{}
\DoxyCodeLine{01242   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{01243   \textcolor{keywordflow}{if} (!app) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01244 }
\DoxyCodeLine{01245   \textcolor{keywordtype}{int} col   = app-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{01246   m\_enabled = col >= 0 || app-\/>getCurrentFrame()-\/>isEditingLevel();}
\DoxyCodeLine{01247   \textcolor{comment}{// todo: gestire autoenable}}
\DoxyCodeLine{01248   \textcolor{keywordflow}{if} (!m\_enabled) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01249 }
\DoxyCodeLine{01250   \mbox{\hyperlink{class_t_point_t}{TPointD}} centeredPos = getCenteredCursorPos(pos);}
\DoxyCodeLine{01251 }
\DoxyCodeLine{01252   m\_currentColor = TPixel32::Black;}
\DoxyCodeLine{01253   m\_active       = !!\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01254   \textcolor{keywordflow}{if} (!m\_active) \{}
\DoxyCodeLine{01255     m\_active = !!\mbox{\hyperlink{class_t_tool_a668ac4790094a864ba6e37bd902303f1}{touchImage}}();}
\DoxyCodeLine{01256   \}}
\DoxyCodeLine{01257   \textcolor{keywordflow}{if} (!m\_active) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01258 }
\DoxyCodeLine{01259   \textcolor{keywordflow}{if} (m\_active) \{}
\DoxyCodeLine{01260     \textcolor{comment}{// nel caso che il colore corrente sia un cleanup/studiopalette color}}
\DoxyCodeLine{01261     \textcolor{comment}{// oppure il colore di un colorfield}}
\DoxyCodeLine{01262     m\_styleId       = app-\/>getCurrentLevelStyleIndex();}
\DoxyCodeLine{01263     \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *cs = app-\/>getCurrentLevelStyle();}
\DoxyCodeLine{01264     \textcolor{keywordflow}{if} (cs) \{}
\DoxyCodeLine{01265       \mbox{\hyperlink{class_t_raster_style_fx}{TRasterStyleFx}} *rfx = cs ? cs-\/>\mbox{\hyperlink{class_t_color_style_ab67798fb7eacee1b4a90661cfa0e7ba6}{getRasterStyleFx}}() : 0;}
\DoxyCodeLine{01266       m\_active = cs != 0 \&\& (cs-\/>\mbox{\hyperlink{class_t_color_style_ad30252c2cfc4e9d5d09b954d74b97b00}{isStrokeStyle}}() || (rfx \&\& rfx-\/>isInkStyle()));}
\DoxyCodeLine{01267       m\_currentColor   = cs-\/>\mbox{\hyperlink{class_t_color_style_af5907c6146db5067fcf000edeb8e403b}{getAverageColor}}();}
\DoxyCodeLine{01268       m\_currentColor.m = 255;}
\DoxyCodeLine{01269     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01270       m\_styleId      = 1;}
\DoxyCodeLine{01271       m\_currentColor = TPixel32::Black;}
\DoxyCodeLine{01272     \}}
\DoxyCodeLine{01273   \}}
\DoxyCodeLine{01274 }
\DoxyCodeLine{01275   \textcolor{comment}{// assert(0<=m\_styleId \&\& m\_styleId<2);}}
\DoxyCodeLine{01276   \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img = \mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01277   \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ri(img);}
\DoxyCodeLine{01278   \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} ras = ri-\/>getRaster();}
\DoxyCodeLine{01279   \textcolor{keywordflow}{if} (ras) \{}
\DoxyCodeLine{01280     \mbox{\hyperlink{class_t_point_t}{TPointD}} rasCenter = ras-\/>getCenterD();}
\DoxyCodeLine{01281     m\_tileSet         = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_tile_set_c_m32}{TTileSetCM32}}(ras-\/>getSize());}
\DoxyCodeLine{01282     m\_tileSaver       = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_tile_saver_c_m32}{TTileSaverCM32}}(ras, m\_tileSet);}
\DoxyCodeLine{01283     \textcolor{keywordtype}{double} maxThick   = m\_rasThickness.getValue().second;}
\DoxyCodeLine{01284     \textcolor{keywordtype}{double} thickness  = (m\_pressure.getValue())}
\DoxyCodeLine{01285                            ? computeThickness(e.\mbox{\hyperlink{class_t_mouse_event_a55b00a089ffff0136d60af0c00b406ef}{m\_pressure}}, m\_rasThickness) * 2}
\DoxyCodeLine{01286                            : maxThick;}
\DoxyCodeLine{01287 }
\DoxyCodeLine{01288     \textcolor{comment}{/*-\/-\/-\/ ストロークの最初にMaxサイズの円が描かれてしまう不具合を防止する}}
\DoxyCodeLine{01289 \textcolor{comment}{     * -\/-\/-\/*/}}
\DoxyCodeLine{01290     \textcolor{keywordflow}{if} (m\_pressure.getValue() \&\& e.\mbox{\hyperlink{class_t_mouse_event_a55b00a089ffff0136d60af0c00b406ef}{m\_pressure}} == 1.0)}
\DoxyCodeLine{01291       thickness = m\_rasThickness.getValue().first;}
\DoxyCodeLine{01292 }
\DoxyCodeLine{01293     \mbox{\hyperlink{class_t_point_t}{TPointD}} halfThick(maxThick * 0.5, maxThick * 0.5);}
\DoxyCodeLine{01294     \mbox{\hyperlink{class_t_rect_t}{TRectD}} invalidateRect(centeredPos -\/ halfThick, centeredPos + halfThick);}
\DoxyCodeLine{01295     \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi;}
\DoxyCodeLine{01296     ri-\/>getDpi(dpi.x, dpi.y);}
\DoxyCodeLine{01297     \mbox{\hyperlink{class_t_rect_t}{TRectD}} previousTipRect(\mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}} -\/ halfThick, \mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}} + halfThick);}
\DoxyCodeLine{01298     \textcolor{keywordflow}{if} (dpi.x > \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}} || dpi.y > \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}})}
\DoxyCodeLine{01299       previousTipRect *= dpi.x / \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}};}
\DoxyCodeLine{01300     invalidateRect += previousTipRect;}
\DoxyCodeLine{01301 }
\DoxyCodeLine{01302     \textcolor{comment}{// if the drawOrder mode = "{}Palette Order"{},}}
\DoxyCodeLine{01303     \textcolor{comment}{// get styleId list which is above the current style in the palette}}
\DoxyCodeLine{01304     DrawOrder drawOrder = (DrawOrder)m\_drawOrder.getIndex();}
\DoxyCodeLine{01305     QSet<int> aboveStyleIds;}
\DoxyCodeLine{01306     \textcolor{keywordflow}{if} (drawOrder == PaletteOrder) \{}
\DoxyCodeLine{01307       getAboveStyleIdSet(m\_styleId, ri-\/>getPalette(), aboveStyleIds);}
\DoxyCodeLine{01308     \}}
\DoxyCodeLine{01309 }
\DoxyCodeLine{01310     \textcolor{comment}{// mypaint brush case}}
\DoxyCodeLine{01311     \textcolor{keywordflow}{if} (m\_isMyPaintStyleSelected) \{}
\DoxyCodeLine{01312       \mbox{\hyperlink{class_t_point_t}{TPointD}} point(centeredPos + rasCenter);}
\DoxyCodeLine{01313       \textcolor{keywordtype}{double} pressure =}
\DoxyCodeLine{01314           m\_pressure.getValue() \&\& e.isTablet() ? e.\mbox{\hyperlink{class_t_mouse_event_a55b00a089ffff0136d60af0c00b406ef}{m\_pressure}} : 0.5;}
\DoxyCodeLine{01315       updateCurrentStyle();}
\DoxyCodeLine{01316       \textcolor{keywordflow}{if} (!(m\_workRas \&\& m\_backupRas)) setWorkAndBackupImages();}
\DoxyCodeLine{01317       m\_workRas-\/>lock();}
\DoxyCodeLine{01318       \mbox{\hyperlink{classmypaint_1_1_brush}{mypaint::Brush}} mypaintBrush;}
\DoxyCodeLine{01319       \mbox{\hyperlink{class_t_my_paint_brush_style}{TMyPaintBrushStyle}} *mypaintStyle =}
\DoxyCodeLine{01320           \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_my_paint_brush_style}{TMyPaintBrushStyle}} *\textcolor{keyword}{>}(app-\/>getCurrentLevelStyle());}
\DoxyCodeLine{01321       \{  \textcolor{comment}{// applyToonzBrushSettings}}
\DoxyCodeLine{01322         mypaintBrush.fromBrush(mypaintStyle-\/>getBrush());}
\DoxyCodeLine{01323         \textcolor{keywordtype}{double} modifierSize = m\_modifierSize.getValue() * log(2.0);}
\DoxyCodeLine{01324         \textcolor{keywordtype}{float} baseSize =}
\DoxyCodeLine{01325             mypaintBrush.getBaseValue(MYPAINT\_BRUSH\_SETTING\_RADIUS\_LOGARITHMIC);}
\DoxyCodeLine{01326         mypaintBrush.setBaseValue(MYPAINT\_BRUSH\_SETTING\_RADIUS\_LOGARITHMIC,}
\DoxyCodeLine{01327                                   baseSize + modifierSize);}
\DoxyCodeLine{01328       \}}
\DoxyCodeLine{01329       m\_toonz\_brush = \textcolor{keyword}{new} \mbox{\hyperlink{class_my_paint_toonz_brush}{MyPaintToonzBrush}}(m\_workRas, *\textcolor{keyword}{this}, mypaintBrush);}
\DoxyCodeLine{01330       m\_strokeRect.empty();}
\DoxyCodeLine{01331       m\_strokeSegmentRect.empty();}
\DoxyCodeLine{01332       m\_toonz\_brush-\/>beginStroke();}
\DoxyCodeLine{01333       m\_toonz\_brush-\/>strokeTo(point, pressure, restartBrushTimer());}
\DoxyCodeLine{01334       \mbox{\hyperlink{class_t_rect_t}{TRect}} updateRect = m\_strokeSegmentRect * ras-\/>getBounds();}
\DoxyCodeLine{01335       \textcolor{keywordflow}{if} (!updateRect.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \{}
\DoxyCodeLine{01336         \textcolor{comment}{// ras-\/>extract(updateRect)-\/>copy(m\_workRas-\/>extract(updateRect));}}
\DoxyCodeLine{01337         m\_toonz\_brush-\/>updateDrawing(ri-\/>getRaster(), m\_backupRas, m\_strokeRect,}
\DoxyCodeLine{01338                                      m\_styleId, m\_modifierLockAlpha.getValue());}
\DoxyCodeLine{01339       \}}
\DoxyCodeLine{01340       m\_lastRect = m\_strokeRect;}
\DoxyCodeLine{01341 }
\DoxyCodeLine{01342       \mbox{\hyperlink{class_t_point_t}{TPointD}} thickOffset(m\_maxCursorThick * 0.5, m\_maxCursorThick * 0.5);}
\DoxyCodeLine{01343       invalidateRect = convert(m\_strokeSegmentRect) -\/ rasCenter;}
\DoxyCodeLine{01344       invalidateRect +=}
\DoxyCodeLine{01345           \mbox{\hyperlink{class_t_rect_t}{TRectD}}(centeredPos -\/ thickOffset, centeredPos + thickOffset);}
\DoxyCodeLine{01346       invalidateRect +=}
\DoxyCodeLine{01347           \mbox{\hyperlink{class_t_rect_t}{TRectD}}(\mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}} -\/ thickOffset, \mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}} + thickOffset);}
\DoxyCodeLine{01348     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_hardness.getValue() == 100 || m\_pencil.getValue()) \{}
\DoxyCodeLine{01349       \textcolor{comment}{/*-\/-\/ Pencilモードでなく、Hardness=100 の場合のブラシサイズを1段階下げる}}
\DoxyCodeLine{01350 \textcolor{comment}{       * -\/-\/*/}}
\DoxyCodeLine{01351       \textcolor{keywordflow}{if} (!m\_pencil.getValue()) thickness -\/= 1.0;}
\DoxyCodeLine{01352 }
\DoxyCodeLine{01353       \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} thickPoint(centeredPos + convert(ras-\/>getCenter()),}
\DoxyCodeLine{01354                              thickness);}
\DoxyCodeLine{01355       m\_rasterTrack = \textcolor{keyword}{new} \mbox{\hyperlink{class_raster_stroke_generator}{RasterStrokeGenerator}}(}
\DoxyCodeLine{01356           ras, BRUSH, NONE, m\_styleId, thickPoint, drawOrder != OverAll, 0,}
\DoxyCodeLine{01357           m\_modifierLockAlpha.getValue(), !m\_pencil.getValue(),}
\DoxyCodeLine{01358           drawOrder == PaletteOrder);}
\DoxyCodeLine{01359 }
\DoxyCodeLine{01360       \textcolor{keywordflow}{if} (drawOrder == PaletteOrder)}
\DoxyCodeLine{01361         m\_rasterTrack-\/>setAboveStyleIds(aboveStyleIds);}
\DoxyCodeLine{01362 }
\DoxyCodeLine{01363       m\_tileSaver-\/>save(m\_rasterTrack-\/>getLastRect());}
\DoxyCodeLine{01364       m\_rasterTrack-\/>generateLastPieceOfStroke(m\_pencil.getValue());}
\DoxyCodeLine{01365 }
\DoxyCodeLine{01366       std::vector<TThickPoint> pts;}
\DoxyCodeLine{01367       \textcolor{keywordflow}{if} (m\_smooth.getValue() == 0) \{}
\DoxyCodeLine{01368         pts.push\_back(thickPoint);}
\DoxyCodeLine{01369       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01370         m\_smoothStroke.beginStroke(m\_smooth.getValue());}
\DoxyCodeLine{01371         m\_smoothStroke.addPoint(thickPoint);}
\DoxyCodeLine{01372         m\_smoothStroke.getSmoothPoints(pts);}
\DoxyCodeLine{01373       \}}
\DoxyCodeLine{01374     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01375       m\_points.clear();}
\DoxyCodeLine{01376       \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} point(centeredPos + rasCenter, thickness);}
\DoxyCodeLine{01377       m\_points.push\_back(point);}
\DoxyCodeLine{01378       m\_bluredBrush = \textcolor{keyword}{new} \mbox{\hyperlink{class_blured_brush}{BluredBrush}}(m\_workRas, maxThick, m\_brushPad, \textcolor{keyword}{false});}
\DoxyCodeLine{01379 }
\DoxyCodeLine{01380       \textcolor{keywordflow}{if} (drawOrder == PaletteOrder)}
\DoxyCodeLine{01381         m\_bluredBrush-\/>setAboveStyleIds(aboveStyleIds);}
\DoxyCodeLine{01382 }
\DoxyCodeLine{01383       m\_strokeRect = m\_bluredBrush-\/>getBoundFromPoints(m\_points);}
\DoxyCodeLine{01384       updateWorkAndBackupRasters(m\_strokeRect);}
\DoxyCodeLine{01385       m\_tileSaver-\/>save(m\_strokeRect);}
\DoxyCodeLine{01386       m\_bluredBrush-\/>addPoint(point, 1);}
\DoxyCodeLine{01387       m\_bluredBrush-\/>updateDrawing(ri-\/>getRaster(), m\_backupRas, m\_strokeRect,}
\DoxyCodeLine{01388                                    m\_styleId, drawOrder,}
\DoxyCodeLine{01389                                    m\_modifierLockAlpha.getValue());}
\DoxyCodeLine{01390       m\_lastRect = m\_strokeRect;}
\DoxyCodeLine{01391 }
\DoxyCodeLine{01392       std::vector<TThickPoint> pts;}
\DoxyCodeLine{01393       \textcolor{keywordflow}{if} (m\_smooth.getValue() == 0) \{}
\DoxyCodeLine{01394         pts.push\_back(point);}
\DoxyCodeLine{01395       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01396         m\_smoothStroke.beginStroke(m\_smooth.getValue());}
\DoxyCodeLine{01397         m\_smoothStroke.addPoint(point);}
\DoxyCodeLine{01398         m\_smoothStroke.getSmoothPoints(pts);}
\DoxyCodeLine{01399       \}}
\DoxyCodeLine{01400     \}}
\DoxyCodeLine{01401     \textcolor{comment}{/*-\/-\/ 作業中のFidを登録 -\/-\/*/}}
\DoxyCodeLine{01402     m\_workingFrameId = getFrameId();}
\DoxyCodeLine{01403 }
\DoxyCodeLine{01404     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}(invalidateRect.enlarge(2));}
\DoxyCodeLine{01405   \}}
\DoxyCodeLine{01406   \textcolor{comment}{// updating m\_brushPos is needed to refresh viewer properly}}
\DoxyCodeLine{01407   \mbox{\hyperlink{class_toonz_raster_brush_tool_a139c5dcda1042955f9e7fc0356ad76b0}{m\_mousePos}} = pos;}
\DoxyCodeLine{01408   \mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}} = getCenteredCursorPos(pos);}
\DoxyCodeLine{01409 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_ab728e64ec25f527650f8667b5506d1a5}\label{class_toonz_raster_brush_tool_ab728e64ec25f527650f8667b5506d1a5}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01414                                                                 \{}
\DoxyCodeLine{01415   \textcolor{keywordflow}{if} (!m\_enabled || !m\_active) \{}
\DoxyCodeLine{01416     \mbox{\hyperlink{class_toonz_raster_brush_tool_a139c5dcda1042955f9e7fc0356ad76b0}{m\_mousePos}} = pos;}
\DoxyCodeLine{01417     \mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}} = getCenteredCursorPos(pos);}
\DoxyCodeLine{01418     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01419   \}}
\DoxyCodeLine{01420 }
\DoxyCodeLine{01421   \mbox{\hyperlink{class_t_point_t}{TPointD}} centeredPos = getCenteredCursorPos(pos);}
\DoxyCodeLine{01422 }
\DoxyCodeLine{01423   \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti   = \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}));}
\DoxyCodeLine{01424   \mbox{\hyperlink{class_t_point_t}{TPointD}} rasCenter = ti-\/>getRaster()-\/>getCenterD();}
\DoxyCodeLine{01425   \textcolor{keywordtype}{int} maxThickness  = m\_rasThickness.getValue().second;}
\DoxyCodeLine{01426   \textcolor{keywordtype}{double} thickness  = (m\_pressure.getValue())}
\DoxyCodeLine{01427                          ? computeThickness(e.\mbox{\hyperlink{class_t_mouse_event_a55b00a089ffff0136d60af0c00b406ef}{m\_pressure}}, m\_rasThickness) * 2}
\DoxyCodeLine{01428                          : maxThickness;}
\DoxyCodeLine{01429   \mbox{\hyperlink{class_t_rect_t}{TRectD}} invalidateRect;}
\DoxyCodeLine{01430   \textcolor{keywordflow}{if} (m\_isMyPaintStyleSelected) \{}
\DoxyCodeLine{01431     \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} ras = ti-\/>getRaster();}
\DoxyCodeLine{01432     \mbox{\hyperlink{class_t_point_t}{TPointD}} point(centeredPos + rasCenter);}
\DoxyCodeLine{01433     \textcolor{keywordtype}{double} pressure =}
\DoxyCodeLine{01434         m\_pressure.getValue() \&\& e.isTablet() ? e.\mbox{\hyperlink{class_t_mouse_event_a55b00a089ffff0136d60af0c00b406ef}{m\_pressure}} : 0.5;}
\DoxyCodeLine{01435 }
\DoxyCodeLine{01436     m\_strokeSegmentRect.empty();}
\DoxyCodeLine{01437     m\_toonz\_brush-\/>strokeTo(point, pressure, restartBrushTimer());}
\DoxyCodeLine{01438     \mbox{\hyperlink{class_t_rect_t}{TRect}} updateRect = m\_strokeSegmentRect * ras-\/>getBounds();}
\DoxyCodeLine{01439     \textcolor{keywordflow}{if} (!updateRect.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \{}
\DoxyCodeLine{01440       \textcolor{comment}{// ras-\/>extract(updateRect)-\/>copy(m\_workRaster-\/>extract(updateRect));}}
\DoxyCodeLine{01441       m\_toonz\_brush-\/>updateDrawing(ras, m\_backupRas, m\_strokeSegmentRect,}
\DoxyCodeLine{01442                                    m\_styleId, m\_modifierLockAlpha.getValue());}
\DoxyCodeLine{01443     \}}
\DoxyCodeLine{01444     m\_lastRect = m\_strokeRect;}
\DoxyCodeLine{01445 }
\DoxyCodeLine{01446     \mbox{\hyperlink{class_t_point_t}{TPointD}} thickOffset(m\_maxCursorThick * 0.5, m\_maxCursorThick * 0.5);}
\DoxyCodeLine{01447     invalidateRect = convert(m\_strokeSegmentRect) -\/ rasCenter;}
\DoxyCodeLine{01448     invalidateRect +=}
\DoxyCodeLine{01449         \mbox{\hyperlink{class_t_rect_t}{TRectD}}(centeredPos -\/ thickOffset, centeredPos + thickOffset);}
\DoxyCodeLine{01450     invalidateRect +=}
\DoxyCodeLine{01451         \mbox{\hyperlink{class_t_rect_t}{TRectD}}(\mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}} -\/ thickOffset, \mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}} + thickOffset);}
\DoxyCodeLine{01452   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_rasterTrack \&\&}
\DoxyCodeLine{01453              (m\_hardness.getValue() == 100 || m\_pencil.getValue())) \{}
\DoxyCodeLine{01454     \textcolor{comment}{/*-\/-\/ Pencilモードでなく、Hardness=100 の場合のブラシサイズを1段階下げる}}
\DoxyCodeLine{01455 \textcolor{comment}{     * -\/-\/*/}}
\DoxyCodeLine{01456     \textcolor{keywordflow}{if} (!m\_pencil.getValue()) thickness -\/= 1.0;}
\DoxyCodeLine{01457 }
\DoxyCodeLine{01458     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} thickPoint(centeredPos + rasCenter, thickness);}
\DoxyCodeLine{01459     std::vector<TThickPoint> pts;}
\DoxyCodeLine{01460     \textcolor{keywordflow}{if} (m\_smooth.getValue() == 0) \{}
\DoxyCodeLine{01461       pts.push\_back(thickPoint);}
\DoxyCodeLine{01462     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01463       m\_smoothStroke.addPoint(thickPoint);}
\DoxyCodeLine{01464       m\_smoothStroke.getSmoothPoints(pts);}
\DoxyCodeLine{01465     \}}
\DoxyCodeLine{01466     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < pts.size(); ++i) \{}
\DoxyCodeLine{01467       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} \&thickPoint = pts[i];}
\DoxyCodeLine{01468       m\_rasterTrack-\/>add(thickPoint);}
\DoxyCodeLine{01469       m\_tileSaver-\/>save(m\_rasterTrack-\/>getLastRect());}
\DoxyCodeLine{01470       m\_rasterTrack-\/>generateLastPieceOfStroke(m\_pencil.getValue());}
\DoxyCodeLine{01471       std::vector<TThickPoint> brushPoints = m\_rasterTrack-\/>getPointsSequence();}
\DoxyCodeLine{01472       \textcolor{keywordtype}{int} m                                = (int)brushPoints.size();}
\DoxyCodeLine{01473       std::vector<TThickPoint> points;}
\DoxyCodeLine{01474       \textcolor{keywordflow}{if} (m == 3) \{}
\DoxyCodeLine{01475         points.push\_back(brushPoints[0]);}
\DoxyCodeLine{01476         points.push\_back(brushPoints[1]);}
\DoxyCodeLine{01477       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01478         points.push\_back(brushPoints[m -\/ 4]);}
\DoxyCodeLine{01479         points.push\_back(brushPoints[m -\/ 3]);}
\DoxyCodeLine{01480         points.push\_back(brushPoints[m -\/ 2]);}
\DoxyCodeLine{01481       \}}
\DoxyCodeLine{01482       invalidateRect += ToolUtils::getBounds(points, maxThickness) -\/ rasCenter;}
\DoxyCodeLine{01483     \}}
\DoxyCodeLine{01484   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01485     \textcolor{comment}{// antialiased brush}}
\DoxyCodeLine{01486     assert(m\_workRas.getPointer() \&\& m\_backupRas.getPointer());}
\DoxyCodeLine{01487     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} thickPoint(centeredPos + rasCenter, thickness);}
\DoxyCodeLine{01488     std::vector<TThickPoint> pts;}
\DoxyCodeLine{01489     \textcolor{keywordflow}{if} (m\_smooth.getValue() == 0) \{}
\DoxyCodeLine{01490       pts.push\_back(thickPoint);}
\DoxyCodeLine{01491     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01492       m\_smoothStroke.addPoint(thickPoint);}
\DoxyCodeLine{01493       m\_smoothStroke.getSmoothPoints(pts);}
\DoxyCodeLine{01494     \}}
\DoxyCodeLine{01495     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < pts.size(); ++i) \{}
\DoxyCodeLine{01496       \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} old = m\_points.back();}
\DoxyCodeLine{01497 }
\DoxyCodeLine{01498       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} \&point = pts[i];}
\DoxyCodeLine{01499       \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} mid((old + point) * 0.5, (point.thick + old.thick) * 0.5);}
\DoxyCodeLine{01500       m\_points.push\_back(mid);}
\DoxyCodeLine{01501       m\_points.push\_back(point);}
\DoxyCodeLine{01502 }
\DoxyCodeLine{01503       \mbox{\hyperlink{class_t_rect_t}{TRect}} bbox;}
\DoxyCodeLine{01504       \textcolor{keywordtype}{int} m = (int)m\_points.size();}
\DoxyCodeLine{01505       std::vector<TThickPoint> points;}
\DoxyCodeLine{01506       \textcolor{keywordflow}{if} (m == 3) \{}
\DoxyCodeLine{01507         \textcolor{comment}{// ho appena cominciato. devo disegnare un segmento}}
\DoxyCodeLine{01508         \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} pa = m\_points.front();}
\DoxyCodeLine{01509         points.push\_back(pa);}
\DoxyCodeLine{01510         points.push\_back(mid);}
\DoxyCodeLine{01511         bbox = m\_bluredBrush-\/>getBoundFromPoints(points);}
\DoxyCodeLine{01512         updateWorkAndBackupRasters(bbox + m\_lastRect);}
\DoxyCodeLine{01513         m\_tileSaver-\/>save(bbox);}
\DoxyCodeLine{01514         m\_bluredBrush-\/>addArc(pa, (mid + pa) * 0.5, mid, 1, 1);}
\DoxyCodeLine{01515         m\_lastRect += bbox;}
\DoxyCodeLine{01516       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01517         points.push\_back(m\_points[m -\/ 4]);}
\DoxyCodeLine{01518         points.push\_back(old);}
\DoxyCodeLine{01519         points.push\_back(mid);}
\DoxyCodeLine{01520         bbox = m\_bluredBrush-\/>getBoundFromPoints(points);}
\DoxyCodeLine{01521         updateWorkAndBackupRasters(bbox + m\_lastRect);}
\DoxyCodeLine{01522         m\_tileSaver-\/>save(bbox);}
\DoxyCodeLine{01523         m\_bluredBrush-\/>addArc(m\_points[m -\/ 4], old, mid, 1, 1);}
\DoxyCodeLine{01524         m\_lastRect += bbox;}
\DoxyCodeLine{01525       \}}
\DoxyCodeLine{01526       invalidateRect += ToolUtils::getBounds(points, maxThickness) -\/ rasCenter;}
\DoxyCodeLine{01527 }
\DoxyCodeLine{01528       m\_bluredBrush-\/>updateDrawing(ti-\/>getRaster(), m\_backupRas, bbox,}
\DoxyCodeLine{01529                                    m\_styleId, m\_drawOrder.getIndex(),}
\DoxyCodeLine{01530                                    m\_modifierLockAlpha.getValue());}
\DoxyCodeLine{01531       m\_strokeRect += bbox;}
\DoxyCodeLine{01532     \}}
\DoxyCodeLine{01533   \}}
\DoxyCodeLine{01534 }
\DoxyCodeLine{01535   \textcolor{comment}{// clear \& draw brush tip when drawing smooth stroke}}
\DoxyCodeLine{01536   \textcolor{keywordflow}{if} (m\_smooth.getValue() != 0) \{}
\DoxyCodeLine{01537     \mbox{\hyperlink{class_t_point_t}{TPointD}} halfThick(m\_maxThick * 0.5, m\_maxThick * 0.5);}
\DoxyCodeLine{01538     invalidateRect += \mbox{\hyperlink{class_t_rect_t}{TRectD}}(\mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}} -\/ halfThick, \mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}} + halfThick);}
\DoxyCodeLine{01539     invalidateRect += \mbox{\hyperlink{class_t_rect_t}{TRectD}}(centeredPos -\/ halfThick, centeredPos + halfThick);}
\DoxyCodeLine{01540   \}}
\DoxyCodeLine{01541 }
\DoxyCodeLine{01542   \mbox{\hyperlink{class_toonz_raster_brush_tool_a139c5dcda1042955f9e7fc0356ad76b0}{m\_mousePos}} = pos;}
\DoxyCodeLine{01543   \mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}} = getCenteredCursorPos(pos);}
\DoxyCodeLine{01544 }
\DoxyCodeLine{01545   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}(invalidateRect.enlarge(2));}
\DoxyCodeLine{01546 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_aa55fcf1ddeab00722fd54ec64e80565d}\label{class_toonz_raster_brush_tool_aa55fcf1ddeab00722fd54ec64e80565d}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!leftButtonUp@{leftButtonUp}}
\index{leftButtonUp@{leftButtonUp}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{leftButtonUp()}{leftButtonUp()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::left\+Button\+Up (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01551                                                               \{}
\DoxyCodeLine{01552   \textcolor{keywordtype}{bool} isValid = m\_enabled \&\& m\_active;}
\DoxyCodeLine{01553   m\_enabled    = \textcolor{keyword}{false};}
\DoxyCodeLine{01554   m\_active     = \textcolor{keyword}{false};}
\DoxyCodeLine{01555   \textcolor{keywordflow}{if} (!isValid) \{}
\DoxyCodeLine{01556     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01557   \}}
\DoxyCodeLine{01558   \mbox{\hyperlink{class_t_point_t}{TPointD}} centeredPos = getCenteredCursorPos(pos);}
\DoxyCodeLine{01559   \textcolor{keywordtype}{double} pressure = m\_pressure.getValue() \&\& e.isTablet() ? e.\mbox{\hyperlink{class_t_mouse_event_a55b00a089ffff0136d60af0c00b406ef}{m\_pressure}} : 0.5;}
\DoxyCodeLine{01560   \mbox{\hyperlink{class_toonz_raster_brush_tool_aed21519542ecf70f2797373293880c47}{finishRasterBrush}}(centeredPos, pressure);}
\DoxyCodeLine{01561   \textcolor{keywordtype}{int} tc = ToonzCheck::instance()-\/>getChecks();}
\DoxyCodeLine{01562   \textcolor{keywordflow}{if} (tc \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876a7fbcfdc87f510c2d2e271d3629db24fe}{ToonzCheck::eGap}} || tc \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876a780c15982eceeb7f1e912a5d55029cef}{ToonzCheck::eAutoclose}}) \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{01563 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_a8e6b3a244bcd47485f0b9e221618e4ba}\label{class_toonz_raster_brush_tool_a8e6b3a244bcd47485f0b9e221618e4ba}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!loadLastBrush@{loadLastBrush}}
\index{loadLastBrush@{loadLastBrush}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{loadLastBrush()}{loadLastBrush()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::load\+Last\+Brush (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02143                                          \{}
\DoxyCodeLine{02144   m\_rasThickness.setValue(}
\DoxyCodeLine{02145       TDoublePairProperty::Value(RasterBrushMinSize, RasterBrushMaxSize));}
\DoxyCodeLine{02146   m\_drawOrder.setIndex(BrushDrawOrder);}
\DoxyCodeLine{02147   m\_pencil.setValue(RasterBrushPencilMode ? 1 : 0);}
\DoxyCodeLine{02148   m\_hardness.setValue(RasterBrushHardness);}
\DoxyCodeLine{02149   m\_pressure.setValue(BrushPressureSensitivity ? 1 : 0);}
\DoxyCodeLine{02150   m\_smooth.setValue(BrushSmooth);}
\DoxyCodeLine{02151   m\_modifierSize.setValue(RasterBrushModifierSize);}
\DoxyCodeLine{02152   m\_modifierLockAlpha.setValue(BrushLockAlpha ? 1 : 0);}
\DoxyCodeLine{02153 }
\DoxyCodeLine{02154   \textcolor{comment}{// Recalculate based on prior values}}
\DoxyCodeLine{02155   m\_minThick = m\_rasThickness.getValue().first;}
\DoxyCodeLine{02156   m\_maxThick = m\_rasThickness.getValue().second;}
\DoxyCodeLine{02157 }
\DoxyCodeLine{02158   setWorkAndBackupImages();}
\DoxyCodeLine{02159 }
\DoxyCodeLine{02160   m\_brushPad = getBrushPad(m\_rasThickness.getValue().second,}
\DoxyCodeLine{02161                            m\_hardness.getValue() * 0.01);}
\DoxyCodeLine{02162 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_a6e2c376cf3531a644b2735679ae29d88}\label{class_toonz_raster_brush_tool_a6e2c376cf3531a644b2735679ae29d88}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!loadPreset@{loadPreset}}
\index{loadPreset@{loadPreset}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{loadPreset()}{loadPreset()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::load\+Preset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02067                                       \{}
\DoxyCodeLine{02068   \textcolor{keyword}{const} std::set<BrushData> \&presets = \mbox{\hyperlink{class_toonz_raster_brush_tool_aa8691d0d29ea4e51228d89e9073ba1ce}{m\_presetsManager}}.presets();}
\DoxyCodeLine{02069   std::set<BrushData>::const\_iterator it;}
\DoxyCodeLine{02070 }
\DoxyCodeLine{02071   it = presets.find(\mbox{\hyperlink{struct_brush_data}{BrushData}}(m\_preset.getValue()));}
\DoxyCodeLine{02072   \textcolor{keywordflow}{if} (it == presets.end()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02073 }
\DoxyCodeLine{02074   \textcolor{keyword}{const} \mbox{\hyperlink{struct_brush_data}{BrushData}} \&preset = *it;}
\DoxyCodeLine{02075 }
\DoxyCodeLine{02076   \textcolor{keywordflow}{try}  \textcolor{comment}{// Don't bother with RangeErrors}}
\DoxyCodeLine{02077   \{}
\DoxyCodeLine{02078     m\_rasThickness.setValue(}
\DoxyCodeLine{02079         TDoublePairProperty::Value(std::max(preset.m\_min, 1.0), preset.m\_max));}
\DoxyCodeLine{02080     m\_hardness.setValue(preset.m\_hardness, \textcolor{keyword}{true});}
\DoxyCodeLine{02081     m\_smooth.setValue(preset.m\_smooth, \textcolor{keyword}{true});}
\DoxyCodeLine{02082     m\_drawOrder.setIndex(preset.m\_drawOrder);}
\DoxyCodeLine{02083     m\_pencil.setValue(preset.m\_pencil);}
\DoxyCodeLine{02084     m\_pressure.setValue(preset.m\_pressure);}
\DoxyCodeLine{02085     m\_modifierSize.setValue(preset.m\_modifierSize);}
\DoxyCodeLine{02086     m\_modifierLockAlpha.setValue(preset.m\_modifierLockAlpha);}
\DoxyCodeLine{02087 }
\DoxyCodeLine{02088     \textcolor{comment}{// Recalculate based on updated presets}}
\DoxyCodeLine{02089     m\_minThick = m\_rasThickness.getValue().first;}
\DoxyCodeLine{02090     m\_maxThick = m\_rasThickness.getValue().second;}
\DoxyCodeLine{02091 }
\DoxyCodeLine{02092     setWorkAndBackupImages();}
\DoxyCodeLine{02093 }
\DoxyCodeLine{02094     m\_brushPad = ToolUtils::getBrushPad(preset.m\_max, preset.m\_hardness * 0.01);}
\DoxyCodeLine{02095   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{02096   \}}
\DoxyCodeLine{02097 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_a741e2b20416ecb002c21752bc2fee4cf}\label{class_toonz_raster_brush_tool_a741e2b20416ecb002c21752bc2fee4cf}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!mouseMove@{mouseMove}}
\index{mouseMove@{mouseMove}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{mouseMove()}{mouseMove()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::mouse\+Move (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01785                                                                              \{}
\DoxyCodeLine{01786   qApp-\/>processEvents(QEventLoop::ExcludeUserInputEvents);}
\DoxyCodeLine{01787 }
\DoxyCodeLine{01788   \textcolor{keyword}{struct }Locals \{}
\DoxyCodeLine{01789     \mbox{\hyperlink{class_toonz_raster_brush_tool}{ToonzRasterBrushTool}} *m\_this;}
\DoxyCodeLine{01790 }
\DoxyCodeLine{01791     \textcolor{keywordtype}{void} setValue(\mbox{\hyperlink{class_t_double_pair_property}{TDoublePairProperty}} \&prop,}
\DoxyCodeLine{01792                   \textcolor{keyword}{const} TDoublePairProperty::Value \&value) \{}
\DoxyCodeLine{01793       prop.setValue(value);}
\DoxyCodeLine{01794 }
\DoxyCodeLine{01795       m\_this-\/>\mbox{\hyperlink{class_toonz_raster_brush_tool_a155bef55e93ce3bb63adfe0891a55547}{onPropertyChanged}}(prop.getName());}
\DoxyCodeLine{01796       TTool::getApplication()-\/>getCurrentTool()-\/>\mbox{\hyperlink{class_tool_handle_a39e34f1a30868bad11a629228b07bd40}{notifyToolChanged}}();}
\DoxyCodeLine{01797     \}}
\DoxyCodeLine{01798 }
\DoxyCodeLine{01799     \textcolor{keywordtype}{void} addMinMax(\mbox{\hyperlink{class_t_double_pair_property}{TDoublePairProperty}} \&prop, \textcolor{keywordtype}{double} add) \{}
\DoxyCodeLine{01800       \textcolor{keywordflow}{if} (add == 0.0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01801       \textcolor{keyword}{const} TDoublePairProperty::Range \&range = prop.getRange();}
\DoxyCodeLine{01802 }
\DoxyCodeLine{01803       TDoublePairProperty::Value value = prop.getValue();}
\DoxyCodeLine{01804       value.first  = tcrop(value.first + add, range.first, range.second);}
\DoxyCodeLine{01805       value.second = tcrop(value.second + add, range.first, range.second);}
\DoxyCodeLine{01806 }
\DoxyCodeLine{01807       setValue(prop, value);}
\DoxyCodeLine{01808     \}}
\DoxyCodeLine{01809 }
\DoxyCodeLine{01810     \textcolor{keywordtype}{void} addMinMaxSeparate(\mbox{\hyperlink{class_t_double_pair_property}{TDoublePairProperty}} \&prop, \textcolor{keywordtype}{double} min, \textcolor{keywordtype}{double} max) \{}
\DoxyCodeLine{01811       \textcolor{keywordflow}{if} (min == 0.0 \&\& max == 0.0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01812       \textcolor{keyword}{const} TDoublePairProperty::Range \&range = prop.getRange();}
\DoxyCodeLine{01813 }
\DoxyCodeLine{01814       TDoublePairProperty::Value value = prop.getValue();}
\DoxyCodeLine{01815       value.first += min;}
\DoxyCodeLine{01816       value.second += max;}
\DoxyCodeLine{01817       \textcolor{keywordflow}{if} (value.first > value.second) value.first = value.second;}
\DoxyCodeLine{01818       value.first  = tcrop(value.first, range.first, range.second);}
\DoxyCodeLine{01819       value.second = tcrop(value.second, range.first, range.second);}
\DoxyCodeLine{01820 }
\DoxyCodeLine{01821       setValue(prop, value);}
\DoxyCodeLine{01822     \}}
\DoxyCodeLine{01823 }
\DoxyCodeLine{01824   \} locals = \{\textcolor{keyword}{this}\};}
\DoxyCodeLine{01825 }
\DoxyCodeLine{01826   \textcolor{comment}{// if (e.isAltPressed() \&\& !e.isCtrlPressed()) \{}}
\DoxyCodeLine{01827   \textcolor{comment}{// const TPointD \&diff = pos -\/ m\_mousePos;}}
\DoxyCodeLine{01828   \textcolor{comment}{// double add = (fabs(diff.x) > fabs(diff.y)) ? diff.x : diff.y;}}
\DoxyCodeLine{01829 }
\DoxyCodeLine{01830   \textcolor{comment}{// locals.addMinMax(}}
\DoxyCodeLine{01831   \textcolor{comment}{//  TToonzImageP(getImage(false, 1)) ? m\_rasThickness : m\_thickness, add);}}
\DoxyCodeLine{01832   \textcolor{comment}{//\} else}}
\DoxyCodeLine{01833 }
\DoxyCodeLine{01834   \textcolor{keywordtype}{double} thickness =}
\DoxyCodeLine{01835       (m\_isMyPaintStyleSelected) ? (\textcolor{keywordtype}{double})(m\_maxCursorThick + 1) : m\_maxThick;}
\DoxyCodeLine{01836   \mbox{\hyperlink{class_t_point_t}{TPointD}} halfThick(thickness * 0.5, thickness * 0.5);}
\DoxyCodeLine{01837   \mbox{\hyperlink{class_t_rect_t}{TRectD}} invalidateRect(\mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}} -\/ halfThick, \mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}} + halfThick);}
\DoxyCodeLine{01838 }
\DoxyCodeLine{01839   \textcolor{keywordflow}{if} (e.isCtrlPressed() \&\& e.isAltPressed() \&\& !e.isShiftPressed() \&\&}
\DoxyCodeLine{01840       Preferences::instance()-\/>useCtrlAltToResizeBrushEnabled()) \{}
\DoxyCodeLine{01841     \textcolor{comment}{// Resize the brush if CTRL+ALT is pressed and the preference is enabled.}}
\DoxyCodeLine{01842     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_point_t}{TPointD}} \&diff = pos -\/ \mbox{\hyperlink{class_toonz_raster_brush_tool_a139c5dcda1042955f9e7fc0356ad76b0}{m\_mousePos}};}
\DoxyCodeLine{01843     \textcolor{keywordtype}{double} max          = diff.x / 2;}
\DoxyCodeLine{01844     \textcolor{keywordtype}{double} min          = diff.y / 2;}
\DoxyCodeLine{01845 }
\DoxyCodeLine{01846     locals.addMinMaxSeparate(m\_rasThickness, min, max);}
\DoxyCodeLine{01847 }
\DoxyCodeLine{01848     \textcolor{keywordtype}{double} radius = m\_rasThickness.getValue().second * 0.5;}
\DoxyCodeLine{01849     invalidateRect += \mbox{\hyperlink{class_t_rect_t}{TRectD}}(\mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}} -\/ \mbox{\hyperlink{class_t_point_t}{TPointD}}(radius, radius),}
\DoxyCodeLine{01850                              \mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}} + \mbox{\hyperlink{class_t_point_t}{TPointD}}(radius, radius));}
\DoxyCodeLine{01851 }
\DoxyCodeLine{01852   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01853     \mbox{\hyperlink{class_toonz_raster_brush_tool_a139c5dcda1042955f9e7fc0356ad76b0}{m\_mousePos}} = pos;}
\DoxyCodeLine{01854     \mbox{\hyperlink{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}{m\_brushPos}} = getCenteredCursorPos(pos);}
\DoxyCodeLine{01855 }
\DoxyCodeLine{01856     invalidateRect += \mbox{\hyperlink{class_t_rect_t}{TRectD}}(pos -\/ halfThick, pos + halfThick);}
\DoxyCodeLine{01857   \}}
\DoxyCodeLine{01858 }
\DoxyCodeLine{01859   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}(invalidateRect.enlarge(2));}
\DoxyCodeLine{01860 }
\DoxyCodeLine{01861   \textcolor{keywordflow}{if} (m\_minThick == 0 \&\& m\_maxThick == 0) \{}
\DoxyCodeLine{01862     m\_minThick = m\_rasThickness.getValue().first;}
\DoxyCodeLine{01863     m\_maxThick = m\_rasThickness.getValue().second;}
\DoxyCodeLine{01864   \}}
\DoxyCodeLine{01865 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_a1fae3bb18e399eeef0d6dcbfa3e26fd1}\label{class_toonz_raster_brush_tool_a1fae3bb18e399eeef0d6dcbfa3e26fd1}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!onActivate@{onActivate}}
\index{onActivate@{onActivate}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{onActivate()}{onActivate()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::on\+Activate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback invoked whenever the tool activates. 



Reimplemented from \mbox{\hyperlink{class_t_tool_ac286a2681633b4db6106596b4f54e53b}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01165                                       \{}
\DoxyCodeLine{01166   \textcolor{keywordflow}{if} (!m\_notifier) m\_notifier = \textcolor{keyword}{new} \mbox{\hyperlink{class_toonz_raster_brush_tool_notifier}{ToonzRasterBrushToolNotifier}}(\textcolor{keyword}{this});}
\DoxyCodeLine{01167 }
\DoxyCodeLine{01168   \textcolor{keywordflow}{if} (m\_firstTime) \{}
\DoxyCodeLine{01169     m\_firstTime = \textcolor{keyword}{false};}
\DoxyCodeLine{01170 }
\DoxyCodeLine{01171     std::wstring wpreset =}
\DoxyCodeLine{01172         QString::fromStdString(RasterBrushPreset.getValue()).toStdWString();}
\DoxyCodeLine{01173     \textcolor{keywordflow}{if} (wpreset != CUSTOM\_WSTR) \{}
\DoxyCodeLine{01174       initPresets();}
\DoxyCodeLine{01175       \textcolor{keywordflow}{if} (!m\_preset.isValue(wpreset)) wpreset = CUSTOM\_WSTR;}
\DoxyCodeLine{01176       m\_preset.setValue(wpreset);}
\DoxyCodeLine{01177       RasterBrushPreset = m\_preset.getValueAsString();}
\DoxyCodeLine{01178       loadPreset();}
\DoxyCodeLine{01179     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01180       loadLastBrush();}
\DoxyCodeLine{01181   \}}
\DoxyCodeLine{01182   m\_brushPad = ToolUtils::getBrushPad(m\_rasThickness.getValue().second,}
\DoxyCodeLine{01183                                       m\_hardness.getValue() * 0.01);}
\DoxyCodeLine{01184   setWorkAndBackupImages();}
\DoxyCodeLine{01185 }
\DoxyCodeLine{01186   m\_brushTimer.start();}
\DoxyCodeLine{01187   \textcolor{comment}{// TODO:app-\/>editImageOrSpline();}}
\DoxyCodeLine{01188 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_ae335f47def026c927f779e1dcbba366d}\label{class_toonz_raster_brush_tool_ae335f47def026c927f779e1dcbba366d}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!onColorStyleChanged@{onColorStyleChanged}}
\index{onColorStyleChanged@{onColorStyleChanged}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{onColorStyleChanged()}{onColorStyleChanged()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::on\+Color\+Style\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02173                                                \{}
\DoxyCodeLine{02174   \textcolor{comment}{// in case the style switched while drawing}}
\DoxyCodeLine{02175   \textcolor{keywordflow}{if} (m\_tileSaver) \{}
\DoxyCodeLine{02176     \textcolor{keywordtype}{bool} isValid = m\_enabled \&\& m\_active;}
\DoxyCodeLine{02177     m\_enabled    = \textcolor{keyword}{false};}
\DoxyCodeLine{02178     \textcolor{keywordflow}{if} (isValid) \{}
\DoxyCodeLine{02179       \mbox{\hyperlink{class_toonz_raster_brush_tool_aed21519542ecf70f2797373293880c47}{finishRasterBrush}}(\mbox{\hyperlink{class_toonz_raster_brush_tool_a139c5dcda1042955f9e7fc0356ad76b0}{m\_mousePos}}, 1);}
\DoxyCodeLine{02180     \}}
\DoxyCodeLine{02181   \}}
\DoxyCodeLine{02182 }
\DoxyCodeLine{02183   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = getApplication();}
\DoxyCodeLine{02184   \mbox{\hyperlink{class_t_my_paint_brush_style}{TMyPaintBrushStyle}} *mpbs =}
\DoxyCodeLine{02185       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_my_paint_brush_style}{TMyPaintBrushStyle}} *\textcolor{keyword}{>}(app-\/>getCurrentLevelStyle());}
\DoxyCodeLine{02186   m\_isMyPaintStyleSelected = (mpbs) ? \textcolor{keyword}{true} : \textcolor{keyword}{false};}
\DoxyCodeLine{02187   setWorkAndBackupImages();}
\DoxyCodeLine{02188   getApplication()-\/>getCurrentTool()-\/>\mbox{\hyperlink{class_tool_handle_a39e34f1a30868bad11a629228b07bd40}{notifyToolChanged}}();}
\DoxyCodeLine{02189 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_aec8e1d34a81172f0542ebebd422ba493}\label{class_toonz_raster_brush_tool_aec8e1d34a81172f0542ebebd422ba493}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!onDeactivate@{onDeactivate}}
\index{onDeactivate@{onDeactivate}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{onDeactivate()}{onDeactivate()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::on\+Deactivate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for tool deactivation, includes tool switch. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a00fee58728c1e12fb50846f47d7e9f5e}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01192                                         \{}
\DoxyCodeLine{01193   \textcolor{comment}{/*-\/-\/-\/}}
\DoxyCodeLine{01194 \textcolor{comment}{   * ドラッグ中にツールが切り替わった場合に備え、onDeactivateにもMouseReleaseと同じ処理を行う}}
\DoxyCodeLine{01195 \textcolor{comment}{   * -\/-\/-\/*/}}
\DoxyCodeLine{01196   \textcolor{keywordflow}{if} (m\_tileSaver) \{}
\DoxyCodeLine{01197     \textcolor{keywordtype}{bool} isValid = m\_enabled \&\& m\_active;}
\DoxyCodeLine{01198     m\_enabled    = \textcolor{keyword}{false};}
\DoxyCodeLine{01199     m\_active     = \textcolor{keyword}{false};}
\DoxyCodeLine{01200     \textcolor{keywordflow}{if} (isValid) \{}
\DoxyCodeLine{01201       \mbox{\hyperlink{class_toonz_raster_brush_tool_aed21519542ecf70f2797373293880c47}{finishRasterBrush}}(\mbox{\hyperlink{class_toonz_raster_brush_tool_a139c5dcda1042955f9e7fc0356ad76b0}{m\_mousePos}},}
\DoxyCodeLine{01202                         1); \textcolor{comment}{/*-\/-\/ 最後のストロークの筆圧は1とする -\/-\/*/}}
\DoxyCodeLine{01203     \}}
\DoxyCodeLine{01204   \}}
\DoxyCodeLine{01205   m\_workRas   = \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}();}
\DoxyCodeLine{01206   m\_backupRas = \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}}();}
\DoxyCodeLine{01207 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01569}{finish\+Raster\+Brush()}}, and \mbox{\hyperlink{l00196}{m\+\_\+mouse\+Pos}}.

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a090aa351be51d4f5ccb2df5c9e4cea1c}\label{class_toonz_raster_brush_tool_a090aa351be51d4f5ccb2df5c9e4cea1c}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!onEnter@{onEnter}}
\index{onEnter@{onEnter}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{onEnter()}{onEnter()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::on\+Enter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for the mouse entering the viewer area. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a3e775cfcd05aa3c35048b11fa40ab3e4}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01916                                    \{}
\DoxyCodeLine{01917   \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img = \mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{false});}
\DoxyCodeLine{01918 }
\DoxyCodeLine{01919   m\_minThick = m\_rasThickness.getValue().first;}
\DoxyCodeLine{01920   m\_maxThick = m\_rasThickness.getValue().second;}
\DoxyCodeLine{01921   updateCurrentStyle();}
\DoxyCodeLine{01922 }
\DoxyCodeLine{01923   \mbox{\hyperlink{class_application}{Application}} *app = getApplication();}
\DoxyCodeLine{01924 }
\DoxyCodeLine{01925   m\_styleId       = app-\/>getCurrentLevelStyleIndex();}
\DoxyCodeLine{01926   \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *cs = app-\/>getCurrentLevelStyle();}
\DoxyCodeLine{01927   \textcolor{keywordflow}{if} (cs) \{}
\DoxyCodeLine{01928     \mbox{\hyperlink{class_t_raster_style_fx}{TRasterStyleFx}} *rfx = cs-\/>\mbox{\hyperlink{class_t_color_style_ab67798fb7eacee1b4a90661cfa0e7ba6}{getRasterStyleFx}}();}
\DoxyCodeLine{01929     m\_active            = cs-\/>\mbox{\hyperlink{class_t_color_style_ad30252c2cfc4e9d5d09b954d74b97b00}{isStrokeStyle}}() || (rfx \&\& rfx-\/>isInkStyle());}
\DoxyCodeLine{01930     m\_currentColor      = cs-\/>\mbox{\hyperlink{class_t_color_style_af5907c6146db5067fcf000edeb8e403b}{getAverageColor}}();}
\DoxyCodeLine{01931     m\_currentColor.m    = 255;}
\DoxyCodeLine{01932   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01933     m\_currentColor = TPixel32::Black;}
\DoxyCodeLine{01934   \}}
\DoxyCodeLine{01935   m\_active = img;}
\DoxyCodeLine{01936 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00270}{TColor\+Style\+::get\+Average\+Color()}}, \mbox{\hyperlink{l00276}{TTool\+::get\+Image()}}, \mbox{\hyperlink{l00175}{TColor\+Style\+::get\+Raster\+Style\+Fx()}}, and \mbox{\hyperlink{class_t_color_style_ad30252c2cfc4e9d5d09b954d74b97b00}{TColor\+Style\+::is\+Stroke\+Style()}}.

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a07e0fb58ddac113766ac4154a6eedc83}\label{class_toonz_raster_brush_tool_a07e0fb58ddac113766ac4154a6eedc83}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!onImageChanged@{onImageChanged}}
\index{onImageChanged@{onImageChanged}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{onImageChanged()}{onImageChanged()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::on\+Image\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Notifies changes in the image in use. 



Reimplemented from \mbox{\hyperlink{class_t_tool_aaf1e021290e74c1b085e4b095668e1ed}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01957                                           \{}
\DoxyCodeLine{01958   \textcolor{keywordflow}{if} (!isEnabled()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01959 }
\DoxyCodeLine{01960   setWorkAndBackupImages();}
\DoxyCodeLine{01961 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_ab375f322b0297680f3f14ee3d1f7a80e}\label{class_toonz_raster_brush_tool_ab375f322b0297680f3f14ee3d1f7a80e}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!onLeave@{onLeave}}
\index{onLeave@{onLeave}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{onLeave()}{onLeave()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::on\+Leave (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for the mouse leaving the viewer area. 



Reimplemented from \mbox{\hyperlink{class_t_tool_af7fb05265a94131da081da654e271a22}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01940                                    \{}
\DoxyCodeLine{01941   m\_minThick       = 0;}
\DoxyCodeLine{01942   m\_maxThick       = 0;}
\DoxyCodeLine{01943   m\_minCursorThick = 0;}
\DoxyCodeLine{01944   m\_maxCursorThick = 0;}
\DoxyCodeLine{01945 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_a155bef55e93ce3bb63adfe0891a55547}\label{class_toonz_raster_brush_tool_a155bef55e93ce3bb63adfe0891a55547}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!onPropertyChanged@{onPropertyChanged}}
\index{onPropertyChanged@{onPropertyChanged}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{onPropertyChanged()}{onPropertyChanged()}}
{\footnotesize\ttfamily bool Toonz\+Raster\+Brush\+Tool\+::on\+Property\+Changed (\begin{DoxyParamCaption}\item[{std\+::string}]{property\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

\begin{DoxyVerb} Does the tasks associated to changes in \p propertyName and returns \p
\end{DoxyVerb}
 true; Does the tasks associated to changes in {\ttfamily property\+Name} and returns {\ttfamily true}. 

Reimplemented from \mbox{\hyperlink{class_t_tool_a06694e0586f807c34b18e16341aa9ee2}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01991                                                                    \{}
\DoxyCodeLine{01992   \textcolor{keywordflow}{if} (m\_propertyUpdating) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01993 }
\DoxyCodeLine{01994   \textcolor{keywordflow}{if} (propertyName == m\_preset.getName()) \{}
\DoxyCodeLine{01995     \textcolor{keywordflow}{if} (m\_preset.getValue() != CUSTOM\_WSTR)}
\DoxyCodeLine{01996       loadPreset();}
\DoxyCodeLine{01997     \textcolor{keywordflow}{else}  \textcolor{comment}{// Chose <custom>, go back to last saved brush settings}}
\DoxyCodeLine{01998       loadLastBrush();}
\DoxyCodeLine{01999 }
\DoxyCodeLine{02000     RasterBrushPreset  = m\_preset.getValueAsString();}
\DoxyCodeLine{02001     m\_propertyUpdating = \textcolor{keyword}{true};}
\DoxyCodeLine{02002     getApplication()-\/>getCurrentTool()-\/>\mbox{\hyperlink{class_tool_handle_a39e34f1a30868bad11a629228b07bd40}{notifyToolChanged}}();}
\DoxyCodeLine{02003     m\_propertyUpdating = \textcolor{keyword}{false};}
\DoxyCodeLine{02004     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{02005   \}}
\DoxyCodeLine{02006 }
\DoxyCodeLine{02007   RasterBrushMinSize       = m\_rasThickness.getValue().first;}
\DoxyCodeLine{02008   RasterBrushMaxSize       = m\_rasThickness.getValue().second;}
\DoxyCodeLine{02009   BrushSmooth              = m\_smooth.getValue();}
\DoxyCodeLine{02010   BrushDrawOrder           = m\_drawOrder.getIndex();}
\DoxyCodeLine{02011   RasterBrushPencilMode    = m\_pencil.getValue();}
\DoxyCodeLine{02012   BrushPressureSensitivity = m\_pressure.getValue();}
\DoxyCodeLine{02013   RasterBrushHardness      = m\_hardness.getValue();}
\DoxyCodeLine{02014   RasterBrushModifierSize  = m\_modifierSize.getValue();}
\DoxyCodeLine{02015   BrushLockAlpha           = m\_modifierLockAlpha.getValue();}
\DoxyCodeLine{02016 }
\DoxyCodeLine{02017   \textcolor{comment}{// Recalculate/reset based on changed settings}}
\DoxyCodeLine{02018   \textcolor{keywordflow}{if} (propertyName == m\_rasThickness.getName()) \{}
\DoxyCodeLine{02019     m\_minThick = m\_rasThickness.getValue().first;}
\DoxyCodeLine{02020     m\_maxThick = m\_rasThickness.getValue().second;}
\DoxyCodeLine{02021   \}}
\DoxyCodeLine{02022 }
\DoxyCodeLine{02023   \textcolor{keywordflow}{if} (propertyName == m\_hardness.getName()) setWorkAndBackupImages();}
\DoxyCodeLine{02024 }
\DoxyCodeLine{02025   \textcolor{keywordflow}{if} (propertyName == m\_hardness.getName() ||}
\DoxyCodeLine{02026       propertyName == m\_rasThickness.getName()) \{}
\DoxyCodeLine{02027     m\_brushPad = getBrushPad(m\_rasThickness.getValue().second,}
\DoxyCodeLine{02028                              m\_hardness.getValue() * 0.01);}
\DoxyCodeLine{02029     \mbox{\hyperlink{class_t_rect_t}{TRectD}} rect(\mbox{\hyperlink{class_toonz_raster_brush_tool_a139c5dcda1042955f9e7fc0356ad76b0}{m\_mousePos}} -\/ \mbox{\hyperlink{class_t_point_t}{TPointD}}(m\_maxThick + 2, m\_maxThick + 2),}
\DoxyCodeLine{02030                 \mbox{\hyperlink{class_toonz_raster_brush_tool_a139c5dcda1042955f9e7fc0356ad76b0}{m\_mousePos}} + \mbox{\hyperlink{class_t_point_t}{TPointD}}(m\_maxThick + 2, m\_maxThick + 2));}
\DoxyCodeLine{02031     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}(rect);}
\DoxyCodeLine{02032   \}}
\DoxyCodeLine{02033 }
\DoxyCodeLine{02034   \textcolor{keywordflow}{if} (m\_preset.getValue() != CUSTOM\_WSTR) \{}
\DoxyCodeLine{02035     m\_preset.setValue(CUSTOM\_WSTR);}
\DoxyCodeLine{02036     RasterBrushPreset  = m\_preset.getValueAsString();}
\DoxyCodeLine{02037     m\_propertyUpdating = \textcolor{keyword}{true};}
\DoxyCodeLine{02038     getApplication()-\/>getCurrentTool()-\/>\mbox{\hyperlink{class_tool_handle_a39e34f1a30868bad11a629228b07bd40}{notifyToolChanged}}();}
\DoxyCodeLine{02039     m\_propertyUpdating = \textcolor{keyword}{false};}
\DoxyCodeLine{02040   \}}
\DoxyCodeLine{02041 }
\DoxyCodeLine{02042   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{02043 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00540}{TTool\+::invalidate()}}, \mbox{\hyperlink{l00196}{m\+\_\+mouse\+Pos}}, and \mbox{\hyperlink{l00065}{Tool\+Handle\+::notify\+Tool\+Changed()}}.

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a4b6a127ee38e477ea8c04917463bc9f5}\label{class_toonz_raster_brush_tool_a4b6a127ee38e477ea8c04917463bc9f5}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!preLeftButtonDown@{preLeftButtonDown}}
\index{preLeftButtonDown@{preLeftButtonDown}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{preLeftButtonDown()}{preLeftButtonDown()}}
{\footnotesize\ttfamily bool Toonz\+Raster\+Brush\+Tool\+::pre\+Left\+Button\+Down (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

This method is called before left\+Button\+Down() and can be used e.\+g. to create the image if needed. return true if the method execution can have changed the current tool 

Reimplemented from \mbox{\hyperlink{class_t_tool_a11d2c27110689caf7fa6f49519808073}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01226                                              \{}
\DoxyCodeLine{01227   \mbox{\hyperlink{class_t_tool_a668ac4790094a864ba6e37bd902303f1}{touchImage}}();}
\DoxyCodeLine{01228   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_tool_aabd06af7335f1ba0c96f36f1ac3e9976}{m\_isFrameCreated}}) \{}
\DoxyCodeLine{01229     setWorkAndBackupImages();}
\DoxyCodeLine{01230     \textcolor{comment}{// When the xsheet frame is selected, whole viewer will be updated from}}
\DoxyCodeLine{01231     \textcolor{comment}{// SceneViewer::onXsheetChanged() on adding a new frame.}}
\DoxyCodeLine{01232     \textcolor{comment}{// We need to take care of a case when the level frame is selected.}}
\DoxyCodeLine{01233     \textcolor{keywordflow}{if} (m\_application-\/>getCurrentFrame()-\/>isEditingLevel()) \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{01234   \}}
\DoxyCodeLine{01235   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01236 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00540}{TTool\+::invalidate()}}, \mbox{\hyperlink{l00546}{TTool\+::m\+\_\+is\+Frame\+Created}}, and \mbox{\hyperlink{l00294}{TTool\+::touch\+Image()}}.

\mbox{\Hypertarget{class_toonz_raster_brush_tool_af5d8ff35734a55b72e131644a11ccbd5}\label{class_toonz_raster_brush_tool_af5d8ff35734a55b72e131644a11ccbd5}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!removePreset@{removePreset}}
\index{removePreset@{removePreset}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{removePreset()}{removePreset()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::remove\+Preset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02129                                         \{}
\DoxyCodeLine{02130   std::wstring name(m\_preset.getValue());}
\DoxyCodeLine{02131   \textcolor{keywordflow}{if} (name == CUSTOM\_WSTR) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02132 }
\DoxyCodeLine{02133   \mbox{\hyperlink{class_toonz_raster_brush_tool_aa8691d0d29ea4e51228d89e9073ba1ce}{m\_presetsManager}}.removePreset(name);}
\DoxyCodeLine{02134   initPresets();}
\DoxyCodeLine{02135 }
\DoxyCodeLine{02136   \textcolor{comment}{// No parameter change, and set the preset value to custom}}
\DoxyCodeLine{02137   m\_preset.setValue(CUSTOM\_WSTR);}
\DoxyCodeLine{02138   RasterBrushPreset = m\_preset.getValueAsString();}
\DoxyCodeLine{02139 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_aa9c88f6dea0bd2bbc0029d64bcbf9544}\label{class_toonz_raster_brush_tool_aa9c88f6dea0bd2bbc0029d64bcbf9544}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!setWorkAndBackupImages@{setWorkAndBackupImages}}
\index{setWorkAndBackupImages@{setWorkAndBackupImages}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{setWorkAndBackupImages()}{setWorkAndBackupImages()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::set\+Work\+And\+Backup\+Images (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01965                                                   \{}
\DoxyCodeLine{01966   \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}})\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{false}, 1);}
\DoxyCodeLine{01967   \textcolor{keywordflow}{if} (!ti) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01968   \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} ras   = ti-\/>getRaster();}
\DoxyCodeLine{01969   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} dim = ras-\/>getSize();}
\DoxyCodeLine{01970 }
\DoxyCodeLine{01971   \textcolor{keywordtype}{double} hardness = m\_hardness.getValue() * 0.01;}
\DoxyCodeLine{01972   \textcolor{keywordflow}{if} (!m\_isMyPaintStyleSelected \&\& hardness == 1.0 \&\&}
\DoxyCodeLine{01973       ras-\/>getPixelSize() == 4) \{}
\DoxyCodeLine{01974     m\_workRas   = \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}();}
\DoxyCodeLine{01975     m\_backupRas = \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}}();}
\DoxyCodeLine{01976   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01977     \textcolor{keywordflow}{if} (!m\_workRas || m\_workRas-\/>getLx() > dim.lx ||}
\DoxyCodeLine{01978         m\_workRas-\/>getLy() > dim.ly)}
\DoxyCodeLine{01979       m\_workRas = \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}(dim);}
\DoxyCodeLine{01980     \textcolor{keywordflow}{if} (!m\_backupRas || m\_backupRas-\/>getLx() > dim.lx ||}
\DoxyCodeLine{01981         m\_backupRas-\/>getLy() > dim.ly)}
\DoxyCodeLine{01982       m\_backupRas = \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}}(dim);}
\DoxyCodeLine{01983 }
\DoxyCodeLine{01984     m\_strokeRect.empty();}
\DoxyCodeLine{01985     m\_lastRect.empty();}
\DoxyCodeLine{01986   \}}
\DoxyCodeLine{01987 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_a1667fce9531216f9c07bcb2a7bb465c9}\label{class_toonz_raster_brush_tool_a1667fce9531216f9c07bcb2a7bb465c9}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!updateTranslation@{updateTranslation}}
\index{updateTranslation@{updateTranslation}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{updateTranslation()}{updateTranslation()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::update\+Translation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01081                                              \{}
\DoxyCodeLine{01082   m\_rasThickness.setQStringName(tr(\textcolor{stringliteral}{"{}Size"{}}));}
\DoxyCodeLine{01083   m\_hardness.setQStringName(tr(\textcolor{stringliteral}{"{}Hardness:"{}}));}
\DoxyCodeLine{01084   m\_smooth.setQStringName(tr(\textcolor{stringliteral}{"{}Smooth:"{}}));}
\DoxyCodeLine{01085   m\_drawOrder.setQStringName(tr(\textcolor{stringliteral}{"{}Draw Order:"{}}));}
\DoxyCodeLine{01086   m\_drawOrder.setItemUIName(L\textcolor{stringliteral}{"{}Over All"{}}, tr(\textcolor{stringliteral}{"{}Over All"{}}));}
\DoxyCodeLine{01087   m\_drawOrder.setItemUIName(L\textcolor{stringliteral}{"{}Under All"{}}, tr(\textcolor{stringliteral}{"{}Under All"{}}));}
\DoxyCodeLine{01088   m\_drawOrder.setItemUIName(L\textcolor{stringliteral}{"{}Palette Order"{}}, tr(\textcolor{stringliteral}{"{}Palette Order"{}}));}
\DoxyCodeLine{01089   m\_modifierSize.setQStringName(tr(\textcolor{stringliteral}{"{}Size"{}}));}
\DoxyCodeLine{01090 }
\DoxyCodeLine{01091   \textcolor{comment}{// m\_filled.setQStringName(tr("{}Filled"{}));}}
\DoxyCodeLine{01092   m\_preset.setQStringName(tr(\textcolor{stringliteral}{"{}Preset:"{}}));}
\DoxyCodeLine{01093   m\_preset.setItemUIName(CUSTOM\_WSTR, tr(\textcolor{stringliteral}{"{}<custom>"{}}));}
\DoxyCodeLine{01094   m\_pencil.setQStringName(tr(\textcolor{stringliteral}{"{}Pencil"{}}));}
\DoxyCodeLine{01095   m\_pressure.setQStringName(tr(\textcolor{stringliteral}{"{}Pressure"{}}));}
\DoxyCodeLine{01096   m\_modifierLockAlpha.setQStringName(tr(\textcolor{stringliteral}{"{}Lock Alpha"{}}));}
\DoxyCodeLine{01097 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_aa2aeaf05c203b430610d459d376aaea8}\label{class_toonz_raster_brush_tool_aa2aeaf05c203b430610d459d376aaea8}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!updateWorkAndBackupRasters@{updateWorkAndBackupRasters}}
\index{updateWorkAndBackupRasters@{updateWorkAndBackupRasters}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{updateWorkAndBackupRasters()}{updateWorkAndBackupRasters()}}
{\footnotesize\ttfamily void Toonz\+Raster\+Brush\+Tool\+::update\+Work\+And\+Backup\+Rasters (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRect}} \&}]{rect }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01101                                                                        \{}
\DoxyCodeLine{01102   \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{false}, 1));}
\DoxyCodeLine{01103   \textcolor{keywordflow}{if} (!ti) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01104 }
\DoxyCodeLine{01105   \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} ras = ti-\/>getRaster();}
\DoxyCodeLine{01106 }
\DoxyCodeLine{01107   \textcolor{keywordflow}{if} (m\_isMyPaintStyleSelected) \{}
\DoxyCodeLine{01108     \textcolor{keyword}{const} \textcolor{keywordtype}{int} denominator = 8;}
\DoxyCodeLine{01109     \mbox{\hyperlink{class_t_rect_t}{TRect}} enlargedRect    = rect + m\_lastRect;}
\DoxyCodeLine{01110     \textcolor{keywordtype}{int} dx                = (enlargedRect.getLx() -\/ 1) / denominator + 1;}
\DoxyCodeLine{01111     \textcolor{keywordtype}{int} dy                = (enlargedRect.getLy() -\/ 1) / denominator + 1;}
\DoxyCodeLine{01112 }
\DoxyCodeLine{01113     \textcolor{keywordflow}{if} (m\_lastRect.isEmpty()) \{}
\DoxyCodeLine{01114       enlargedRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} -\/= dx;}
\DoxyCodeLine{01115       enlargedRect.y0 -\/= dy;}
\DoxyCodeLine{01116       enlargedRect.x1 += dx;}
\DoxyCodeLine{01117       enlargedRect.y1 += dy;}
\DoxyCodeLine{01118 }
\DoxyCodeLine{01119       \mbox{\hyperlink{class_t_rect_t}{TRect}} \_rect = enlargedRect * ras-\/>getBounds();}
\DoxyCodeLine{01120       \textcolor{keywordflow}{if} (\_rect.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01121 }
\DoxyCodeLine{01122       m\_workRas-\/>extract(\_rect)-\/>copy(ras-\/>extract(\_rect));}
\DoxyCodeLine{01123       m\_backupRas-\/>extract(\_rect)-\/>copy(ras-\/>extract(\_rect));}
\DoxyCodeLine{01124     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01125       \textcolor{keywordflow}{if} (enlargedRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} < m\_lastRect.x0) enlargedRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} -\/= dx;}
\DoxyCodeLine{01126       \textcolor{keywordflow}{if} (enlargedRect.y0 < m\_lastRect.y0) enlargedRect.y0 -\/= dy;}
\DoxyCodeLine{01127       \textcolor{keywordflow}{if} (enlargedRect.x1 > m\_lastRect.x1) enlargedRect.x1 += dx;}
\DoxyCodeLine{01128       \textcolor{keywordflow}{if} (enlargedRect.y1 > m\_lastRect.y1) enlargedRect.y1 += dy;}
\DoxyCodeLine{01129 }
\DoxyCodeLine{01130       \mbox{\hyperlink{class_t_rect_t}{TRect}} \_rect = enlargedRect * ras-\/>getBounds();}
\DoxyCodeLine{01131       \textcolor{keywordflow}{if} (\_rect.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01132 }
\DoxyCodeLine{01133       \mbox{\hyperlink{class_t_rect_t}{TRect}} \_lastRect    = m\_lastRect * ras-\/>getBounds();}
\DoxyCodeLine{01134       QList<TRect> rects = ToolUtils::splitRect(\_rect, \_lastRect);}
\DoxyCodeLine{01135       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < rects.size(); i++) \{}
\DoxyCodeLine{01136         m\_workRas-\/>extract(rects[i])-\/>copy(ras-\/>extract(rects[i]));}
\DoxyCodeLine{01137         m\_backupRas-\/>extract(rects[i])-\/>copy(ras-\/>extract(rects[i]));}
\DoxyCodeLine{01138       \}}
\DoxyCodeLine{01139     \}}
\DoxyCodeLine{01140 }
\DoxyCodeLine{01141     m\_lastRect = enlargedRect;}
\DoxyCodeLine{01142     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01143   \}}
\DoxyCodeLine{01144 }
\DoxyCodeLine{01145   \mbox{\hyperlink{class_t_rect_t}{TRect}} \_rect     = rect * ras-\/>getBounds();}
\DoxyCodeLine{01146   \mbox{\hyperlink{class_t_rect_t}{TRect}} \_lastRect = m\_lastRect * ras-\/>getBounds();}
\DoxyCodeLine{01147 }
\DoxyCodeLine{01148   \textcolor{keywordflow}{if} (\_rect.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01149 }
\DoxyCodeLine{01150   \textcolor{keywordflow}{if} (m\_lastRect.isEmpty()) \{}
\DoxyCodeLine{01151     m\_workRas-\/>extract(\_rect)-\/>clear();}
\DoxyCodeLine{01152     m\_backupRas-\/>extract(\_rect)-\/>copy(ras-\/>extract(\_rect));}
\DoxyCodeLine{01153     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01154   \}}
\DoxyCodeLine{01155 }
\DoxyCodeLine{01156   QList<TRect> rects = ToolUtils::splitRect(\_rect, \_lastRect);}
\DoxyCodeLine{01157   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < rects.size(); i++) \{}
\DoxyCodeLine{01158     m\_workRas-\/>extract(rects[i])-\/>clear();}
\DoxyCodeLine{01159     m\_backupRas-\/>extract(rects[i])-\/>copy(ras-\/>extract(rects[i]));}
\DoxyCodeLine{01160   \}}
\DoxyCodeLine{01161 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_toonz_raster_brush_tool_ae8cd0bda055abd5bc790984adb835f0e}\label{class_toonz_raster_brush_tool_ae8cd0bda055abd5bc790984adb835f0e}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_active@{m\_active}}
\index{m\_active@{m\_active}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_active}{m\_active}}
{\footnotesize\ttfamily bool Toonz\+Raster\+Brush\+Tool\+::m\+\_\+active\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a99f312abdc90a0f588910ea9bbe36978}\label{class_toonz_raster_brush_tool_a99f312abdc90a0f588910ea9bbe36978}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_backupRas@{m\_backupRas}}
\index{m\_backupRas@{m\_backupRas}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_backupRas}{m\_backupRas}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_p_t}{TRaster\+CM32P}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+backup\+Ras\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a3129fa8c29878bbc85a0fdf72f7f605b}\label{class_toonz_raster_brush_tool_a3129fa8c29878bbc85a0fdf72f7f605b}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_bluredBrush@{m\_bluredBrush}}
\index{m\_bluredBrush@{m\_bluredBrush}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_bluredBrush}{m\_bluredBrush}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_blured_brush}{Blured\+Brush}}$\ast$ Toonz\+Raster\+Brush\+Tool\+::m\+\_\+blured\+Brush\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a4ef007a7a8ef18ecdab34b36e928e24f}\label{class_toonz_raster_brush_tool_a4ef007a7a8ef18ecdab34b36e928e24f}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_brushPad@{m\_brushPad}}
\index{m\_brushPad@{m\_brushPad}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_brushPad}{m\_brushPad}}
{\footnotesize\ttfamily QRadial\+Gradient Toonz\+Raster\+Brush\+Tool\+::m\+\_\+brush\+Pad\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}\label{class_toonz_raster_brush_tool_aec63b4a229925d2fe0c853e040c9efe2}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_brushPos@{m\_brushPos}}
\index{m\_brushPos@{m\_brushPos}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_brushPos}{m\_brushPos}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+brush\+Pos\hspace{0.3cm}{\ttfamily [protected]}}



World position the brush will be painted at. 



Referenced by \mbox{\hyperlink{l01869}{draw()}}.

\mbox{\Hypertarget{class_toonz_raster_brush_tool_ac5903e9ac658ae5f073ab76e213887fa}\label{class_toonz_raster_brush_tool_ac5903e9ac658ae5f073ab76e213887fa}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_brushTimer@{m\_brushTimer}}
\index{m\_brushTimer@{m\_brushTimer}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_brushTimer}{m\_brushTimer}}
{\footnotesize\ttfamily QElapsed\+Timer Toonz\+Raster\+Brush\+Tool\+::m\+\_\+brush\+Timer\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a6e66ca6ce36b15ffc72f60cbcb480fe9}\label{class_toonz_raster_brush_tool_a6e66ca6ce36b15ffc72f60cbcb480fe9}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_currentColor@{m\_currentColor}}
\index{m\_currentColor@{m\_currentColor}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_currentColor}{m\_currentColor}}
{\footnotesize\ttfamily TPixel32 Toonz\+Raster\+Brush\+Tool\+::m\+\_\+current\+Color\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_aea667f5c9b8157779b4b7990be2c3b57}\label{class_toonz_raster_brush_tool_aea667f5c9b8157779b4b7990be2c3b57}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_dpiScale@{m\_dpiScale}}
\index{m\_dpiScale@{m\_dpiScale}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_dpiScale}{m\_dpiScale}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+dpi\+Scale\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_ac8968eb9205a33cc7c242d0f0ddfb524}\label{class_toonz_raster_brush_tool_ac8968eb9205a33cc7c242d0f0ddfb524}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_drawOrder@{m\_drawOrder}}
\index{m\_drawOrder@{m\_drawOrder}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_drawOrder}{m\_drawOrder}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_enum_property}{TEnum\+Property}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+draw\+Order\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_afd5845257c55565eb23d3c0350af8ac4}\label{class_toonz_raster_brush_tool_afd5845257c55565eb23d3c0350af8ac4}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_enabled@{m\_enabled}}
\index{m\_enabled@{m\_enabled}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_enabled}{m\_enabled}}
{\footnotesize\ttfamily bool Toonz\+Raster\+Brush\+Tool\+::m\+\_\+enabled\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a1e1f197e3aaa044128dc8630b69b4926}\label{class_toonz_raster_brush_tool_a1e1f197e3aaa044128dc8630b69b4926}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_firstTime@{m\_firstTime}}
\index{m\_firstTime@{m\_firstTime}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_firstTime}{m\_firstTime}}
{\footnotesize\ttfamily bool Toonz\+Raster\+Brush\+Tool\+::m\+\_\+first\+Time\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_ac695e400291353cc921ed05df7c7a27c}\label{class_toonz_raster_brush_tool_ac695e400291353cc921ed05df7c7a27c}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_hardness@{m\_hardness}}
\index{m\_hardness@{m\_hardness}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_hardness}{m\_hardness}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_range_property}{TDouble\+Property}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+hardness\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a5a8b54861fa367ac3591b86d64a138f2}\label{class_toonz_raster_brush_tool_a5a8b54861fa367ac3591b86d64a138f2}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_isMyPaintStyleSelected@{m\_isMyPaintStyleSelected}}
\index{m\_isMyPaintStyleSelected@{m\_isMyPaintStyleSelected}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_isMyPaintStyleSelected}{m\_isMyPaintStyleSelected}}
{\footnotesize\ttfamily bool Toonz\+Raster\+Brush\+Tool\+::m\+\_\+is\+My\+Paint\+Style\+Selected = false\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_acf1972c4a9114d872a6b1bfccdc75428}\label{class_toonz_raster_brush_tool_acf1972c4a9114d872a6b1bfccdc75428}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_isPrompting@{m\_isPrompting}}
\index{m\_isPrompting@{m\_isPrompting}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_isPrompting}{m\_isPrompting}}
{\footnotesize\ttfamily bool Toonz\+Raster\+Brush\+Tool\+::m\+\_\+is\+Prompting\hspace{0.3cm}{\ttfamily [protected]}}

Whether the tool is prompting for spline substitution. \mbox{\Hypertarget{class_toonz_raster_brush_tool_a83be2af97e40e6a4a3220a5578f63235}\label{class_toonz_raster_brush_tool_a83be2af97e40e6a4a3220a5578f63235}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_lastRect@{m\_lastRect}}
\index{m\_lastRect@{m\_lastRect}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_lastRect}{m\_lastRect}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRect}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+last\+Rect\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_adcc2f888faf004106f5c3ae816e4ce65}\label{class_toonz_raster_brush_tool_adcc2f888faf004106f5c3ae816e4ce65}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_maxCursorThick@{m\_maxCursorThick}}
\index{m\_maxCursorThick@{m\_maxCursorThick}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_maxCursorThick}{m\_maxCursorThick}}
{\footnotesize\ttfamily int Toonz\+Raster\+Brush\+Tool\+::m\+\_\+max\+Cursor\+Thick\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_affb7918defd128c28a4f90df2cf8dfaf}\label{class_toonz_raster_brush_tool_affb7918defd128c28a4f90df2cf8dfaf}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_maxThick@{m\_maxThick}}
\index{m\_maxThick@{m\_maxThick}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_maxThick}{m\_maxThick}}
{\footnotesize\ttfamily double Toonz\+Raster\+Brush\+Tool\+::m\+\_\+max\+Thick\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a05d510ba3cf6f8ebe0393fd4d629dc3f}\label{class_toonz_raster_brush_tool_a05d510ba3cf6f8ebe0393fd4d629dc3f}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_minCursorThick@{m\_minCursorThick}}
\index{m\_minCursorThick@{m\_minCursorThick}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_minCursorThick}{m\_minCursorThick}}
{\footnotesize\ttfamily int Toonz\+Raster\+Brush\+Tool\+::m\+\_\+min\+Cursor\+Thick\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a04c438ccb660bf5bd2087f96f4ff7734}\label{class_toonz_raster_brush_tool_a04c438ccb660bf5bd2087f96f4ff7734}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_minThick@{m\_minThick}}
\index{m\_minThick@{m\_minThick}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_minThick}{m\_minThick}}
{\footnotesize\ttfamily double Toonz\+Raster\+Brush\+Tool\+::m\+\_\+min\+Thick\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a16575c927d249595fa9de0b2392ecaa7}\label{class_toonz_raster_brush_tool_a16575c927d249595fa9de0b2392ecaa7}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_modifierLockAlpha@{m\_modifierLockAlpha}}
\index{m\_modifierLockAlpha@{m\_modifierLockAlpha}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_modifierLockAlpha}{m\_modifierLockAlpha}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_bool_property}{TBool\+Property}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+modifier\+Lock\+Alpha\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a8a364af361fc0b90db82a34322af8d98}\label{class_toonz_raster_brush_tool_a8a364af361fc0b90db82a34322af8d98}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_modifierSize@{m\_modifierSize}}
\index{m\_modifierSize@{m\_modifierSize}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_modifierSize}{m\_modifierSize}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_range_property}{TDouble\+Property}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+modifier\+Size\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a139c5dcda1042955f9e7fc0356ad76b0}\label{class_toonz_raster_brush_tool_a139c5dcda1042955f9e7fc0356ad76b0}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_mousePos@{m\_mousePos}}
\index{m\_mousePos@{m\_mousePos}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_mousePos}{m\_mousePos}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+mouse\+Pos\hspace{0.3cm}{\ttfamily [protected]}}



Current mouse position, in world coordinates. 



Referenced by \mbox{\hyperlink{l01192}{on\+Deactivate()}}, and \mbox{\hyperlink{l01991}{on\+Property\+Changed()}}.

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a91f81549e77f5a6e65bc1df9b97c3636}\label{class_toonz_raster_brush_tool_a91f81549e77f5a6e65bc1df9b97c3636}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_notifier@{m\_notifier}}
\index{m\_notifier@{m\_notifier}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_notifier}{m\_notifier}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_toonz_raster_brush_tool_notifier}{Toonz\+Raster\+Brush\+Tool\+Notifier}}$\ast$ Toonz\+Raster\+Brush\+Tool\+::m\+\_\+notifier\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a42bbb74d01ee5fb03a6e2bcdcc43c3cf}\label{class_toonz_raster_brush_tool_a42bbb74d01ee5fb03a6e2bcdcc43c3cf}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_pencil@{m\_pencil}}
\index{m\_pencil@{m\_pencil}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_pencil}{m\_pencil}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_bool_property}{TBool\+Property}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+pencil\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_aee2858bc7715a2b5533d55091e0c7769}\label{class_toonz_raster_brush_tool_aee2858bc7715a2b5533d55091e0c7769}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_points@{m\_points}}
\index{m\_points@{m\_points}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_points}{m\_points}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{class_t_thick_point}{TThick\+Point}}$>$ Toonz\+Raster\+Brush\+Tool\+::m\+\_\+points\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a5124e4166f81e827d2cee53492c049d3}\label{class_toonz_raster_brush_tool_a5124e4166f81e827d2cee53492c049d3}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_preset@{m\_preset}}
\index{m\_preset@{m\_preset}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_preset}{m\_preset}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_enum_property}{TEnum\+Property}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+preset\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_ab582625eaeaf5381ca16dc53ffe5d940}\label{class_toonz_raster_brush_tool_ab582625eaeaf5381ca16dc53ffe5d940}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_presetsLoaded@{m\_presetsLoaded}}
\index{m\_presetsLoaded@{m\_presetsLoaded}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_presetsLoaded}{m\_presetsLoaded}}
{\footnotesize\ttfamily bool Toonz\+Raster\+Brush\+Tool\+::m\+\_\+presets\+Loaded\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_aa8691d0d29ea4e51228d89e9073ba1ce}\label{class_toonz_raster_brush_tool_aa8691d0d29ea4e51228d89e9073ba1ce}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_presetsManager@{m\_presetsManager}}
\index{m\_presetsManager@{m\_presetsManager}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_presetsManager}{m\_presetsManager}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_brush_preset_manager}{Brush\+Preset\+Manager}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+presets\+Manager\hspace{0.3cm}{\ttfamily [protected]}}



Manager for presets of this tool instance. 

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a41e63bf20860481376afbb7c3d2d5722}\label{class_toonz_raster_brush_tool_a41e63bf20860481376afbb7c3d2d5722}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_pressure@{m\_pressure}}
\index{m\_pressure@{m\_pressure}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_pressure}{m\_pressure}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_bool_property}{TBool\+Property}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+pressure\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a9f29d0cf5bac6355cd0c58d234a6f736}\label{class_toonz_raster_brush_tool_a9f29d0cf5bac6355cd0c58d234a6f736}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_prop@{m\_prop}}
\index{m\_prop@{m\_prop}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_prop}{m\_prop}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+prop\mbox{[}2\mbox{]}\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_ade81aba07dcf3bf7987fc095363867ad}\label{class_toonz_raster_brush_tool_ade81aba07dcf3bf7987fc095363867ad}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_propertyUpdating@{m\_propertyUpdating}}
\index{m\_propertyUpdating@{m\_propertyUpdating}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_propertyUpdating}{m\_propertyUpdating}}
{\footnotesize\ttfamily bool Toonz\+Raster\+Brush\+Tool\+::m\+\_\+property\+Updating = false\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_ad57c7ad60318efee2f29e23afbacad0e}\label{class_toonz_raster_brush_tool_ad57c7ad60318efee2f29e23afbacad0e}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_rasterTrack@{m\_rasterTrack}}
\index{m\_rasterTrack@{m\_rasterTrack}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_rasterTrack}{m\_rasterTrack}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_raster_stroke_generator}{Raster\+Stroke\+Generator}}$\ast$ Toonz\+Raster\+Brush\+Tool\+::m\+\_\+raster\+Track\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a5e7cee84c51d60d9af9fc88fb2db96af}\label{class_toonz_raster_brush_tool_a5e7cee84c51d60d9af9fc88fb2db96af}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_rasThickness@{m\_rasThickness}}
\index{m\_rasThickness@{m\_rasThickness}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_rasThickness}{m\_rasThickness}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_double_pair_property}{TDouble\+Pair\+Property}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+ras\+Thickness\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a89402cf1103241037ce61b23706bfe14}\label{class_toonz_raster_brush_tool_a89402cf1103241037ce61b23706bfe14}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_smooth@{m\_smooth}}
\index{m\_smooth@{m\_smooth}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_smooth}{m\_smooth}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_range_property}{TDouble\+Property}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+smooth\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_ac07b696e2f911f1c8e0bdf1883791f0d}\label{class_toonz_raster_brush_tool_ac07b696e2f911f1c8e0bdf1883791f0d}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_smoothStroke@{m\_smoothStroke}}
\index{m\_smoothStroke@{m\_smoothStroke}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_smoothStroke}{m\_smoothStroke}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_smooth_stroke}{Smooth\+Stroke}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+smooth\+Stroke\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a7cfcabcb946aec00f6d428b26864fa3a}\label{class_toonz_raster_brush_tool_a7cfcabcb946aec00f6d428b26864fa3a}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_strokeRect@{m\_strokeRect}}
\index{m\_strokeRect@{m\_strokeRect}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_strokeRect}{m\_strokeRect}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRect}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+stroke\+Rect\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a475cd424ddc58cfb7f75885a827ef523}\label{class_toonz_raster_brush_tool_a475cd424ddc58cfb7f75885a827ef523}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_strokeSegmentRect@{m\_strokeSegmentRect}}
\index{m\_strokeSegmentRect@{m\_strokeSegmentRect}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_strokeSegmentRect}{m\_strokeSegmentRect}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRect}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+stroke\+Segment\+Rect\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a0b977349c820c24daf509ec33b5549e1}\label{class_toonz_raster_brush_tool_a0b977349c820c24daf509ec33b5549e1}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_styleId@{m\_styleId}}
\index{m\_styleId@{m\_styleId}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_styleId}{m\_styleId}}
{\footnotesize\ttfamily int Toonz\+Raster\+Brush\+Tool\+::m\+\_\+style\+Id\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_aa688909c9cbee1fbdf3d1d6bc1c638f4}\label{class_toonz_raster_brush_tool_aa688909c9cbee1fbdf3d1d6bc1c638f4}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_targetType@{m\_targetType}}
\index{m\_targetType@{m\_targetType}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_targetType}{m\_targetType}}
{\footnotesize\ttfamily int Toonz\+Raster\+Brush\+Tool\+::m\+\_\+target\+Type\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a192d46bf9cdc9748c649004ed3d5361c}\label{class_toonz_raster_brush_tool_a192d46bf9cdc9748c649004ed3d5361c}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_tileSaver@{m\_tileSaver}}
\index{m\_tileSaver@{m\_tileSaver}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_tileSaver}{m\_tileSaver}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_tile_saver_c_m32}{TTile\+Saver\+CM32}}$\ast$ Toonz\+Raster\+Brush\+Tool\+::m\+\_\+tile\+Saver\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a4ac475fceb551beaa8bbeebaaebc643a}\label{class_toonz_raster_brush_tool_a4ac475fceb551beaa8bbeebaaebc643a}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_tileSet@{m\_tileSet}}
\index{m\_tileSet@{m\_tileSet}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_tileSet}{m\_tileSet}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_tile_set_c_m32}{TTile\+Set\+CM32}}$\ast$ Toonz\+Raster\+Brush\+Tool\+::m\+\_\+tile\+Set\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a7ff70a975f21812482b60b5eb4e9f020}\label{class_toonz_raster_brush_tool_a7ff70a975f21812482b60b5eb4e9f020}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_toonz\_brush@{m\_toonz\_brush}}
\index{m\_toonz\_brush@{m\_toonz\_brush}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_toonz\_brush}{m\_toonz\_brush}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_my_paint_toonz_brush}{My\+Paint\+Toonz\+Brush}}$\ast$ Toonz\+Raster\+Brush\+Tool\+::m\+\_\+toonz\+\_\+brush = 0\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_a7c3bd8b1c5109ef991b42fb361f953e9}\label{class_toonz_raster_brush_tool_a7c3bd8b1c5109ef991b42fb361f953e9}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_workingFrameId@{m\_workingFrameId}}
\index{m\_workingFrameId@{m\_workingFrameId}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_workingFrameId}{m\_workingFrameId}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+working\+Frame\+Id\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_raster_brush_tool_ac1aa781f6572ac08076b56d8939a9120}\label{class_toonz_raster_brush_tool_ac1aa781f6572ac08076b56d8939a9120}} 
\index{ToonzRasterBrushTool@{ToonzRasterBrushTool}!m\_workRas@{m\_workRas}}
\index{m\_workRas@{m\_workRas}!ToonzRasterBrushTool@{ToonzRasterBrushTool}}
\doxysubsubsection{\texorpdfstring{m\_workRas}{m\_workRas}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} Toonz\+Raster\+Brush\+Tool\+::m\+\_\+work\+Ras\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/toonzrasterbrushtool.\+h\item 
E\+:/opentoonz/toonz/sources/tnztools/toonzrasterbrushtool.\+cpp\end{DoxyCompactItemize}
