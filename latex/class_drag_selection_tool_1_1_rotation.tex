\hypertarget{class_drag_selection_tool_1_1_rotation}{}\doxysection{Drag\+Selection\+Tool\+::Rotation Class Reference}
\label{class_drag_selection_tool_1_1_rotation}\index{DragSelectionTool::Rotation@{DragSelectionTool::Rotation}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_drag_selection_tool_1_1_rotation_af8e60f830522a564ed5e2294bf9ae07e}{Rotation}} (\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool}{Deform\+Tool}} $\ast$deform\+Tool)
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_drag_selection_tool_1_1_rotation_a701dbc01fc0ff786d56543d1b794b3d9}{get\+Start\+Center}} () const
\item 
void \mbox{\hyperlink{class_drag_selection_tool_1_1_rotation_a674136a1c724a4d33653de90f34bab86}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e)
\item 
void \mbox{\hyperlink{class_drag_selection_tool_1_1_rotation_afabefaa0cf143fcaa57145984fa6f0f2}{draw}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_rotation_af8e60f830522a564ed5e2294bf9ae07e}\label{class_drag_selection_tool_1_1_rotation_af8e60f830522a564ed5e2294bf9ae07e}} 
\index{DragSelectionTool::Rotation@{DragSelectionTool::Rotation}!Rotation@{Rotation}}
\index{Rotation@{Rotation}!DragSelectionTool::Rotation@{DragSelectionTool::Rotation}}
\doxysubsubsection{\texorpdfstring{Rotation()}{Rotation()}}
{\footnotesize\ttfamily Drag\+Selection\+Tool\+::\+Rotation\+::\+Rotation (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool}{Deform\+Tool}} $\ast$}]{deform\+Tool }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00420     : m\_curAng(), m\_dstAng(), m\_deformTool(deformTool) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_rotation_afabefaa0cf143fcaa57145984fa6f0f2}\label{class_drag_selection_tool_1_1_rotation_afabefaa0cf143fcaa57145984fa6f0f2}} 
\index{DragSelectionTool::Rotation@{DragSelectionTool::Rotation}!draw@{draw}}
\index{draw@{draw}!DragSelectionTool::Rotation@{DragSelectionTool::Rotation}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Drag\+Selection\+Tool\+::\+Rotation\+::draw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00465                                      \{}
\DoxyCodeLine{00466   tglDrawSegment(m\_deformTool-\/>getCurPos(),}
\DoxyCodeLine{00467                  m\_deformTool-\/>getTool()-\/>getCenter());}
\DoxyCodeLine{00468 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_rotation_a701dbc01fc0ff786d56543d1b794b3d9}\label{class_drag_selection_tool_1_1_rotation_a701dbc01fc0ff786d56543d1b794b3d9}} 
\index{DragSelectionTool::Rotation@{DragSelectionTool::Rotation}!getStartCenter@{getStartCenter}}
\index{getStartCenter@{getStartCenter}!DragSelectionTool::Rotation@{DragSelectionTool::Rotation}}
\doxysubsubsection{\texorpdfstring{getStartCenter()}{getStartCenter()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Drag\+Selection\+Tool\+::\+Rotation\+::get\+Start\+Center (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00424                                                         \{}
\DoxyCodeLine{00425   \textcolor{keywordflow}{return} m\_deformTool-\/>getTool()-\/>getCenter();}
\DoxyCodeLine{00426 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_rotation_a674136a1c724a4d33653de90f34bab86}\label{class_drag_selection_tool_1_1_rotation_a674136a1c724a4d33653de90f34bab86}} 
\index{DragSelectionTool::Rotation@{DragSelectionTool::Rotation}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!DragSelectionTool::Rotation@{DragSelectionTool::Rotation}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Drag\+Selection\+Tool\+::\+Rotation\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00431                                                                        \{}
\DoxyCodeLine{00432   \mbox{\hyperlink{class_selection_tool}{SelectionTool}} *tool  = m\_deformTool-\/>getTool();}
\DoxyCodeLine{00433   \mbox{\hyperlink{class_t_point_t}{TPointD}} center       = tool-\/>getCenter();}
\DoxyCodeLine{00434   \mbox{\hyperlink{class_t_point_t}{TPointD}} curPos       = m\_deformTool-\/>getCurPos();}
\DoxyCodeLine{00435   \mbox{\hyperlink{class_t_point_t}{TPointD}} delta        = pos -\/ curPos;}
\DoxyCodeLine{00436   \mbox{\hyperlink{class_t_point_t}{TPointD}} a            = pos -\/ center;}
\DoxyCodeLine{00437   \mbox{\hyperlink{class_t_point_t}{TPointD}} b            = (pos -\/ delta) -\/ center;}
\DoxyCodeLine{00438   \textcolor{keywordtype}{double} a2            = norm2(a);}
\DoxyCodeLine{00439   \textcolor{keywordtype}{double} b2            = norm2(b);}
\DoxyCodeLine{00440   \textcolor{keyword}{const} \textcolor{keywordtype}{double} epsilon = 1e-\/8;}
\DoxyCodeLine{00441   \textcolor{keywordtype}{double} dang          = 0;}
\DoxyCodeLine{00442   \textcolor{keywordtype}{double} scale         = 1;}
\DoxyCodeLine{00443   \textcolor{keywordflow}{if} (a2 <= epsilon || b2 <= epsilon) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00444   dang = asin(cross(a, b) / sqrt(a2 * b2)) * -\/M\_180\_PI;}
\DoxyCodeLine{00445   \textcolor{keywordflow}{if} (e.isShiftPressed()) \{}
\DoxyCodeLine{00446     m\_dstAng += dang;}
\DoxyCodeLine{00447     \textcolor{keywordtype}{double} ang = tfloor((\textcolor{keywordtype}{int})(m\_dstAng + 22.5), 45);}
\DoxyCodeLine{00448     dang       = ang -\/ m\_curAng;}
\DoxyCodeLine{00449     m\_curAng   = ang;}
\DoxyCodeLine{00450   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00451     m\_dstAng += dang;}
\DoxyCodeLine{00452     dang     = m\_dstAng -\/ m\_curAng;}
\DoxyCodeLine{00453     m\_curAng = m\_dstAng;}
\DoxyCodeLine{00454   \}}
\DoxyCodeLine{00455 }
\DoxyCodeLine{00456   tool-\/>m\_deformValues.m\_rotationAngle =}
\DoxyCodeLine{00457       tool-\/>m\_deformValues.m\_rotationAngle + dang;}
\DoxyCodeLine{00458   m\_deformTool-\/>transform(\mbox{\hyperlink{class_t_rotation}{TRotation}}(center, dang), dang);}
\DoxyCodeLine{00459   m\_deformTool-\/>setCurPos(pos);}
\DoxyCodeLine{00460   TTool::getApplication()-\/>getCurrentTool()-\/>\mbox{\hyperlink{class_tool_handle_a39e34f1a30868bad11a629228b07bd40}{notifyToolChanged}}();}
\DoxyCodeLine{00461 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/selectiontool.\+h\item 
E\+:/opentoonz/toonz/sources/tnztools/selectiontool.\+cpp\end{DoxyCompactItemize}
