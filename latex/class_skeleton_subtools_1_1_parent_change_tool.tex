\hypertarget{class_skeleton_subtools_1_1_parent_change_tool}{}\doxysection{Skeleton\+Subtools\+::Parent\+Change\+Tool Class Reference}
\label{class_skeleton_subtools_1_1_parent_change_tool}\index{SkeletonSubtools::ParentChangeTool@{SkeletonSubtools::ParentChangeTool}}
Inheritance diagram for Skeleton\+Subtools\+::Parent\+Change\+Tool\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_skeleton_subtools_1_1_parent_change_tool}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_skeleton_subtools_1_1_parent_change_tool_a60cddb2aecd34f86a647d945c5e8287a}{Parent\+Change\+Tool}} (\mbox{\hyperlink{class_skeleton_tool}{Skeleton\+Tool}} $\ast$tool, \mbox{\hyperlink{class_t_tool_1_1_viewer}{TTool\+::\+Viewer}} $\ast$viewer)
\item 
void \mbox{\hyperlink{class_skeleton_subtools_1_1_parent_change_tool_a7c1f41cb2938b5116f19861eb1cda2d0}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_skeleton_subtools_1_1_parent_change_tool_a078d439552df6ce9bdddf87001657263}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_skeleton_subtools_1_1_parent_change_tool_adb939d25b8ad80072131a9e864777b37}{left\+Button\+Up}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_skeleton_subtools_1_1_parent_change_tool_ac723c599ec0b6204527da4a6319a54fc}{draw}} () override
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_skeleton_subtools_1_1_parent_change_tool_a60cddb2aecd34f86a647d945c5e8287a}\label{class_skeleton_subtools_1_1_parent_change_tool_a60cddb2aecd34f86a647d945c5e8287a}} 
\index{SkeletonSubtools::ParentChangeTool@{SkeletonSubtools::ParentChangeTool}!ParentChangeTool@{ParentChangeTool}}
\index{ParentChangeTool@{ParentChangeTool}!SkeletonSubtools::ParentChangeTool@{SkeletonSubtools::ParentChangeTool}}
\doxysubsubsection{\texorpdfstring{ParentChangeTool()}{ParentChangeTool()}}
{\footnotesize\ttfamily Parent\+Change\+Tool\+::\+Parent\+Change\+Tool (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_skeleton_tool}{Skeleton\+Tool}} $\ast$}]{tool,  }\item[{\mbox{\hyperlink{class_t_tool_1_1_viewer}{TTool\+::\+Viewer}} $\ast$}]{viewer }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00258     : \mbox{\hyperlink{class_skeleton_subtools_1_1_drag_tool}{DragTool}}(tool)}
\DoxyCodeLine{00259     , m\_viewer(viewer)}
\DoxyCodeLine{00260     , m\_index(-\/1)}
\DoxyCodeLine{00261     , m\_snapped(\textcolor{keyword}{true})}
\DoxyCodeLine{00262     , m\_pixelSize(tool-\/>getPixelSize()) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_skeleton_subtools_1_1_parent_change_tool_ac723c599ec0b6204527da4a6319a54fc}\label{class_skeleton_subtools_1_1_parent_change_tool_ac723c599ec0b6204527da4a6319a54fc}} 
\index{SkeletonSubtools::ParentChangeTool@{SkeletonSubtools::ParentChangeTool}!draw@{draw}}
\index{draw@{draw}!SkeletonSubtools::ParentChangeTool@{SkeletonSubtools::ParentChangeTool}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Parent\+Change\+Tool\+::draw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_skeleton_subtools_1_1_drag_tool}{Skeleton\+Subtools\+::\+Drag\+Tool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00420 \{ getTool()-\/>drawHooks(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_skeleton_subtools_1_1_parent_change_tool_a7c1f41cb2938b5116f19861eb1cda2d0}\label{class_skeleton_subtools_1_1_parent_change_tool_a7c1f41cb2938b5116f19861eb1cda2d0}} 
\index{SkeletonSubtools::ParentChangeTool@{SkeletonSubtools::ParentChangeTool}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!SkeletonSubtools::ParentChangeTool@{SkeletonSubtools::ParentChangeTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily void Parent\+Change\+Tool\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_skeleton_subtools_1_1_drag_tool}{Skeleton\+Subtools\+::\+Drag\+Tool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00267                                                             \{}
\DoxyCodeLine{00268   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{00269   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh            = app-\/>getCurrentScene()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}();}
\DoxyCodeLine{00270   \textcolor{comment}{// colonna, id e frame corrente}}
\DoxyCodeLine{00271   \textcolor{keywordtype}{int} currentColumnIndex = app-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{00272   \textcolor{keywordtype}{int} currentFrame       = app-\/>getCurrentFrame()-\/>getFrame();}
\DoxyCodeLine{00273   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} \textcolor{keywordtype}{id}      = TStageObjectId::ColumnId(currentColumnIndex);}
\DoxyCodeLine{00274   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *obj      = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00275   obj-\/>getCenterAndOffset(m\_oldCenter, m\_oldOffset);}
\DoxyCodeLine{00276 }
\DoxyCodeLine{00277   \textcolor{comment}{// trovo il centro della colonna corrente}}
\DoxyCodeLine{00278   \mbox{\hyperlink{class_t_affine}{TAffine}} aff    = xsh-\/>\mbox{\hyperlink{class_t_xsheet_abd766f516cac9898a2a952463618a9fe}{getPlacement}}(\textcolor{keywordtype}{id}, currentFrame);}
\DoxyCodeLine{00279   \mbox{\hyperlink{class_t_point_t}{TPointD}} center = \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}} * xsh-\/>\mbox{\hyperlink{class_t_xsheet_ad762600c9d9d3b5173fcc1e79a802793}{getCenter}}(\textcolor{keywordtype}{id}, currentFrame);}
\DoxyCodeLine{00280   m\_center       = aff * center;}
\DoxyCodeLine{00281   \textcolor{comment}{// mi serve in coordinate assolute (per questo non uso direttamente pos)}}
\DoxyCodeLine{00282   m\_lastPos  = m\_viewer-\/>winToWorld(e.\mbox{\hyperlink{class_t_mouse_event_a05a3f2378eb2179d121e2e46766916de}{m\_pos}});}
\DoxyCodeLine{00283   m\_lastPos2 = pos;}
\DoxyCodeLine{00284   \textcolor{comment}{// if(m\_mode==1) getTool()-\/>setParentProbe(pos);}}
\DoxyCodeLine{00285 }
\DoxyCodeLine{00286   \textcolor{comment}{// cerco centri e hooks di tutte le altre colonne (non discendenti)}}
\DoxyCodeLine{00287   \textcolor{keywordtype}{int} nextName = 10000;}
\DoxyCodeLine{00288   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} col = 0; col < xsh-\/>\mbox{\hyperlink{class_t_xsheet_a17464dc5617cf87a46f03e1a52d36cc1}{getColumnCount}}(); col++) \{}
\DoxyCodeLine{00289     \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(currentFrame, col);}
\DoxyCodeLine{00290     \textcolor{keywordflow}{if} (cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00291     \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} colId = TStageObjectId::ColumnId(col);}
\DoxyCodeLine{00292 }
\DoxyCodeLine{00293     \textcolor{comment}{// se colId e' un discendente di id non e' un candidato a diventare}}
\DoxyCodeLine{00294     \textcolor{comment}{// il padre di id.}}
\DoxyCodeLine{00295     \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} tmpId = colId;}
\DoxyCodeLine{00296     \textcolor{keywordflow}{while} (tmpId.\mbox{\hyperlink{class_t_stage_object_id_af6d13fcf31e7e10eef28f085855f469c}{isColumn}}() \&\& tmpId != \textcolor{keywordtype}{id})}
\DoxyCodeLine{00297       tmpId = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a0a27744ce52cae25ec261a853a554cd1}{getStageObjectParent}}(tmpId);}
\DoxyCodeLine{00298     \textcolor{keywordflow}{if} (tmpId == \textcolor{keywordtype}{id}) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00299 }
\DoxyCodeLine{00300     \textcolor{comment}{// registro alcune informazioni relative a colId:}}
\DoxyCodeLine{00301     \textcolor{comment}{// placement, bbox, centro, hooks, name, ecc.}}
\DoxyCodeLine{00302     Element element;}
\DoxyCodeLine{00303     element.m\_columnIndex = col;}
\DoxyCodeLine{00304     \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img           = cell.\mbox{\hyperlink{class_t_xsh_cell_a20b623d308bc09b820ec6b116516f564}{getImage}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00305     \textcolor{keywordflow}{if} (img) element.m\_bbox = img-\/>\mbox{\hyperlink{class_t_image_ac6a21b84486dec0c86b5b0b3f34be0ef}{getBBox}}();}
\DoxyCodeLine{00306     element.m\_aff = xsh-\/>\mbox{\hyperlink{class_t_xsheet_abd766f516cac9898a2a952463618a9fe}{getPlacement}}(colId, currentFrame);}
\DoxyCodeLine{00307     Peer peer;}
\DoxyCodeLine{00308     peer.m\_columnIndex = col;}
\DoxyCodeLine{00309     peer.m\_handle      = 0;}
\DoxyCodeLine{00310     peer.m\_name        = nextName++;}
\DoxyCodeLine{00311     peer.m\_pos =}
\DoxyCodeLine{00312         element.m\_aff * (\mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}} * xsh-\/>\mbox{\hyperlink{class_t_xsheet_ad762600c9d9d3b5173fcc1e79a802793}{getCenter}}(colId, currentFrame));}
\DoxyCodeLine{00313     element.m\_peers.push\_back(peer);}
\DoxyCodeLine{00314     \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = cell.m\_level.getPointer();}
\DoxyCodeLine{00315     \textcolor{keywordflow}{if} (xl) \{}
\DoxyCodeLine{00316       \mbox{\hyperlink{class_hook_set}{HookSet}} *hookSet     = xl-\/>\mbox{\hyperlink{class_t_xsh_level_a6e1f2998c39699adbe9133f87109a104}{getHookSet}}();}
\DoxyCodeLine{00317       \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *pegbar = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(colId);}
\DoxyCodeLine{00318       \textcolor{keywordflow}{if} (hookSet \&\& pegbar) \{}
\DoxyCodeLine{00319         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < hookSet-\/>getHookCount(); i++) \{}
\DoxyCodeLine{00320           \textcolor{keywordflow}{if} (!hookSet-\/>getHook(i)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00321           peer.m\_handle = 1 + i;}
\DoxyCodeLine{00322           peer.m\_pos =}
\DoxyCodeLine{00323               element.m\_aff * hookSet-\/>getHook(i)-\/>getAPos(cell.m\_frameId);}
\DoxyCodeLine{00324           peer.m\_name = nextName++;}
\DoxyCodeLine{00325           element.m\_peers.push\_back(peer);}
\DoxyCodeLine{00326         \}}
\DoxyCodeLine{00327       \}}
\DoxyCodeLine{00328     \}}
\DoxyCodeLine{00329     m\_elements[col] = element;}
\DoxyCodeLine{00330   \}}
\DoxyCodeLine{00331 }
\DoxyCodeLine{00332   \textcolor{comment}{// m\_newParentCenter = TPointD();}}
\DoxyCodeLine{00333   m\_firstWinPos = e.\mbox{\hyperlink{class_t_mouse_event_a05a3f2378eb2179d121e2e46766916de}{m\_pos}};}
\DoxyCodeLine{00334 }
\DoxyCodeLine{00335   m\_affine = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a491a29d5ec8795c1445db08a5e83a612}{getParentPlacement}}(\textcolor{keywordtype}{id}, currentFrame).\mbox{\hyperlink{class_t_affine_a570529b96b1ec5abc711aaa9aac09ff9}{inv}}();}
\DoxyCodeLine{00336   m\_objId  = id;}
\DoxyCodeLine{00337 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_skeleton_subtools_1_1_parent_change_tool_a078d439552df6ce9bdddf87001657263}\label{class_skeleton_subtools_1_1_parent_change_tool_a078d439552df6ce9bdddf87001657263}} 
\index{SkeletonSubtools::ParentChangeTool@{SkeletonSubtools::ParentChangeTool}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!SkeletonSubtools::ParentChangeTool@{SkeletonSubtools::ParentChangeTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Parent\+Change\+Tool\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_skeleton_subtools_1_1_drag_tool}{Skeleton\+Subtools\+::\+Drag\+Tool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00342                                                             \{}
\DoxyCodeLine{00343   \textcolor{keywordflow}{if} (m\_snapped \&\& norm2(e.\mbox{\hyperlink{class_t_mouse_event_a05a3f2378eb2179d121e2e46766916de}{m\_pos}} -\/ m\_firstWinPos) > 200) \{}
\DoxyCodeLine{00344     \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{00345     \textcolor{keywordtype}{int} currentColumnIndex  = app-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{00346     \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} objId    = TStageObjectId::ColumnId(currentColumnIndex);}
\DoxyCodeLine{00347     TStageObjectCmd::setParent(objId, TStageObjectId::NoneId, \textcolor{stringliteral}{"{}"{}},}
\DoxyCodeLine{00348                                app-\/>getCurrentXsheet());}
\DoxyCodeLine{00349     m\_snapped = \textcolor{keyword}{false};}
\DoxyCodeLine{00350   \}}
\DoxyCodeLine{00351 }
\DoxyCodeLine{00352   \textcolor{keywordflow}{if} (m\_snapped) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00353   getTool()-\/>setParentProbe(getTool()-\/>getCurrentColumnParentMatrix() * pos);}
\DoxyCodeLine{00354 }
\DoxyCodeLine{00355   m\_index = m\_viewer-\/>\mbox{\hyperlink{class_t_tool_1_1_viewer_a39e1e08bc287e5ca5a9ff6e7ac968ca2}{posToColumnIndex}}(e.\mbox{\hyperlink{class_t_mouse_event_a05a3f2378eb2179d121e2e46766916de}{m\_pos}}, 5.0, \textcolor{keyword}{false});}
\DoxyCodeLine{00356 }
\DoxyCodeLine{00357   m\_lastPos = m\_viewer-\/>winToWorld(e.\mbox{\hyperlink{class_t_mouse_event_a05a3f2378eb2179d121e2e46766916de}{m\_pos}});}
\DoxyCodeLine{00358 }
\DoxyCodeLine{00359   m\_handle = -\/1;}
\DoxyCodeLine{00360   \textcolor{keywordflow}{if} (m\_index >= 0) \{}
\DoxyCodeLine{00361     \textcolor{keywordtype}{double} minDist2 = 0;}
\DoxyCodeLine{00362     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)m\_elements[m\_index].m\_peers.size(); i++) \{}
\DoxyCodeLine{00363       \mbox{\hyperlink{class_t_point_t}{TPointD}} targetPos = m\_elements[m\_index].m\_peers[i].m\_pos;}
\DoxyCodeLine{00364       \textcolor{keywordtype}{double} dist2      = norm2(targetPos -\/ m\_lastPos);}
\DoxyCodeLine{00365       \textcolor{keywordflow}{if} (m\_handle < 0 || dist2 < minDist2) \{}
\DoxyCodeLine{00366         minDist2 = dist2;}
\DoxyCodeLine{00367         m\_handle = m\_elements[m\_index].m\_peers[i].m\_handle;}
\DoxyCodeLine{00368       \}}
\DoxyCodeLine{00369     \}}
\DoxyCodeLine{00370   \}}
\DoxyCodeLine{00371 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_skeleton_subtools_1_1_parent_change_tool_adb939d25b8ad80072131a9e864777b37}\label{class_skeleton_subtools_1_1_parent_change_tool_adb939d25b8ad80072131a9e864777b37}} 
\index{SkeletonSubtools::ParentChangeTool@{SkeletonSubtools::ParentChangeTool}!leftButtonUp@{leftButtonUp}}
\index{leftButtonUp@{leftButtonUp}!SkeletonSubtools::ParentChangeTool@{SkeletonSubtools::ParentChangeTool}}
\doxysubsubsection{\texorpdfstring{leftButtonUp()}{leftButtonUp()}}
{\footnotesize\ttfamily void Parent\+Change\+Tool\+::left\+Button\+Up (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_skeleton_subtools_1_1_drag_tool}{Skeleton\+Subtools\+::\+Drag\+Tool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00375                                                                             \{}
\DoxyCodeLine{00376   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{00377   \textcolor{keywordtype}{int} currentColumnIndex  = app-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{00378   \textcolor{keywordtype}{int} currentFrame        = app-\/>getCurrentFrame()-\/>getFrame();}
\DoxyCodeLine{00379   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh            = app-\/>getCurrentScene()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}();}
\DoxyCodeLine{00380   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} objId    = TStageObjectId::ColumnId(currentColumnIndex);}
\DoxyCodeLine{00381   getTool()-\/>resetParentProbe();}
\DoxyCodeLine{00382 }
\DoxyCodeLine{00383   \textcolor{keywordflow}{if} (m\_snapped) \{}
\DoxyCodeLine{00384     xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(objId)-\/>setCenterAndOffset(m\_oldCenter, m\_oldOffset);}
\DoxyCodeLine{00385     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00386   \}}
\DoxyCodeLine{00387 }
\DoxyCodeLine{00388   \textcolor{keywordflow}{if} (getTool()-\/>getMagicLinkCount() > 0) \{}
\DoxyCodeLine{00389     \mbox{\hyperlink{class_skeleton_subtools_1_1_magic_link}{MagicLink}} magicLink = getTool()-\/>getMagicLink(0);}
\DoxyCodeLine{00390     \mbox{\hyperlink{class_skeleton_subtools_1_1_hook_data}{HookData}} h0         = magicLink.m\_h0;}
\DoxyCodeLine{00391     \mbox{\hyperlink{class_skeleton_subtools_1_1_hook_data}{HookData}} h1         = magicLink.m\_h1;}
\DoxyCodeLine{00392     \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *obj   = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(objId);}
\DoxyCodeLine{00393 }
\DoxyCodeLine{00394     \textcolor{keywordtype}{int} parentColumnIndex    = h1.m\_columnIndex;}
\DoxyCodeLine{00395     \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} parentId  = TStageObjectId::ColumnId(parentColumnIndex);}
\DoxyCodeLine{00396     std::string parentHandle = h1.getHandle();}
\DoxyCodeLine{00397     std::string handle       = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00398     \textcolor{keywordflow}{if} (h0.m\_columnIndex < 0) \{}
\DoxyCodeLine{00399       handle = obj-\/>\mbox{\hyperlink{class_t_stage_object_aebee1ac99c0341fe053f272b93586ef2}{getHandle}}();}
\DoxyCodeLine{00400     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00401       handle = h0.getHandle();}
\DoxyCodeLine{00402     \}}
\DoxyCodeLine{00403 }
\DoxyCodeLine{00404     \textcolor{comment}{// TUndoManager *undoManager = TUndoManager::manager();}}
\DoxyCodeLine{00405     \textcolor{comment}{// undoManager-\/>beginBlock();}}
\DoxyCodeLine{00406     \textcolor{comment}{// TStageObjectCmd::resetPosition(id, app-\/>getCurrentXsheet());}}
\DoxyCodeLine{00407     TStageObjectCmd::setHandle(objId, handle, app-\/>getCurrentXsheet());}
\DoxyCodeLine{00408     TStageObjectCmd::setParent(objId, parentId, parentHandle,}
\DoxyCodeLine{00409                                app-\/>getCurrentXsheet());}
\DoxyCodeLine{00410     \textcolor{comment}{// undoManager-\/>endBlock();}}
\DoxyCodeLine{00411   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00412     TStageObjectCmd::setParent(objId, TStageObjectId::NoneId, \textcolor{stringliteral}{"{}"{}},}
\DoxyCodeLine{00413                                app-\/>getCurrentXsheet());}
\DoxyCodeLine{00414     xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(objId)-\/>setCenterAndOffset(m\_oldCenter, m\_oldOffset);}
\DoxyCodeLine{00415   \}}
\DoxyCodeLine{00416 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/skeletonsubtools.\+h\item 
E\+:/opentoonz/toonz/sources/tnztools/skeletonsubtools.\+cpp\end{DoxyCompactItemize}
