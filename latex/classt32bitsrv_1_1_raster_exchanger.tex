\hypertarget{classt32bitsrv_1_1_raster_exchanger}{}\doxysection{t32bitsrv\+::Raster\+Exchanger\texorpdfstring{$<$}{<} PIXEL \texorpdfstring{$>$}{>} Class Template Reference}
\label{classt32bitsrv_1_1_raster_exchanger}\index{t32bitsrv::RasterExchanger$<$ PIXEL $>$@{t32bitsrv::RasterExchanger$<$ PIXEL $>$}}
Inheritance diagram for t32bitsrv\+::Raster\+Exchanger\texorpdfstring{$<$}{<} PIXEL \texorpdfstring{$>$}{>}\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classt32bitsrv_1_1_raster_exchanger}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classt32bitsrv_1_1_raster_exchanger_a1450c9351e623800e1c8f55314ed1950}{Raster\+Exchanger}} (\mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} ras)
\item 
\mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \mbox{\hyperlink{classt32bitsrv_1_1_raster_exchanger_a671fe391f3f23917b5a6509a072ff8b9}{raster}} () const
\item 
int \mbox{\hyperlink{classt32bitsrv_1_1_raster_exchanger_a10ec58d3850e6619b7fdc0f2684f6f5f}{read}} (const char $\ast$src\+Buf, int len) override
\item 
int \mbox{\hyperlink{classt32bitsrv_1_1_raster_exchanger_a5bf2a612089808801cb0c9084aeec388}{write}} (char $\ast$dst\+Buf, int len) override
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$typename PIXEL$>$\newline
class t32bitsrv\+::\+Raster\+Exchanger$<$ PIXEL $>$}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classt32bitsrv_1_1_raster_exchanger_a1450c9351e623800e1c8f55314ed1950}\label{classt32bitsrv_1_1_raster_exchanger_a1450c9351e623800e1c8f55314ed1950}} 
\index{t32bitsrv::RasterExchanger$<$ PIXEL $>$@{t32bitsrv::RasterExchanger$<$ PIXEL $>$}!RasterExchanger@{RasterExchanger}}
\index{RasterExchanger@{RasterExchanger}!t32bitsrv::RasterExchanger$<$ PIXEL $>$@{t32bitsrv::RasterExchanger$<$ PIXEL $>$}}
\doxysubsubsection{\texorpdfstring{RasterExchanger()}{RasterExchanger()}}
{\footnotesize\ttfamily template$<$typename PIXEL $>$ \\
\mbox{\hyperlink{classt32bitsrv_1_1_raster_exchanger}{t32bitsrv\+::\+Raster\+Exchanger}}$<$ PIXEL $>$\+::\+Raster\+Exchanger (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}}}]{ras }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00089                                 : m\_ras(ras) \{}
\DoxyCodeLine{00090     m\_ras-\/>lock();}
\DoxyCodeLine{00091     m\_pix = m\_ras-\/>pixels(0);}
\DoxyCodeLine{00092   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classt32bitsrv_1_1_raster_exchanger_ac4199bfdf01dc6fab340d4c7b8979690}\label{classt32bitsrv_1_1_raster_exchanger_ac4199bfdf01dc6fab340d4c7b8979690}} 
\index{t32bitsrv::RasterExchanger$<$ PIXEL $>$@{t32bitsrv::RasterExchanger$<$ PIXEL $>$}!````~RasterExchanger@{$\sim$RasterExchanger}}
\index{````~RasterExchanger@{$\sim$RasterExchanger}!t32bitsrv::RasterExchanger$<$ PIXEL $>$@{t32bitsrv::RasterExchanger$<$ PIXEL $>$}}
\doxysubsubsection{\texorpdfstring{$\sim$RasterExchanger()}{~RasterExchanger()}}
{\footnotesize\ttfamily template$<$typename PIXEL $>$ \\
\mbox{\hyperlink{classt32bitsrv_1_1_raster_exchanger}{t32bitsrv\+::\+Raster\+Exchanger}}$<$ PIXEL $>$\+::$\sim$\mbox{\hyperlink{classt32bitsrv_1_1_raster_exchanger}{Raster\+Exchanger}} (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00093 \{ m\_ras-\/>unlock(); \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classt32bitsrv_1_1_raster_exchanger_a671fe391f3f23917b5a6509a072ff8b9}\label{classt32bitsrv_1_1_raster_exchanger_a671fe391f3f23917b5a6509a072ff8b9}} 
\index{t32bitsrv::RasterExchanger$<$ PIXEL $>$@{t32bitsrv::RasterExchanger$<$ PIXEL $>$}!raster@{raster}}
\index{raster@{raster}!t32bitsrv::RasterExchanger$<$ PIXEL $>$@{t32bitsrv::RasterExchanger$<$ PIXEL $>$}}
\doxysubsubsection{\texorpdfstring{raster()}{raster()}}
{\footnotesize\ttfamily template$<$typename PIXEL $>$ \\
\mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \mbox{\hyperlink{classt32bitsrv_1_1_raster_exchanger}{t32bitsrv\+::\+Raster\+Exchanger}}$<$ PIXEL $>$\+::raster (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00095 \{ \textcolor{keywordflow}{return} m\_ras; \}}

\end{DoxyCode}
\mbox{\Hypertarget{classt32bitsrv_1_1_raster_exchanger_a10ec58d3850e6619b7fdc0f2684f6f5f}\label{classt32bitsrv_1_1_raster_exchanger_a10ec58d3850e6619b7fdc0f2684f6f5f}} 
\index{t32bitsrv::RasterExchanger$<$ PIXEL $>$@{t32bitsrv::RasterExchanger$<$ PIXEL $>$}!read@{read}}
\index{read@{read}!t32bitsrv::RasterExchanger$<$ PIXEL $>$@{t32bitsrv::RasterExchanger$<$ PIXEL $>$}}
\doxysubsubsection{\texorpdfstring{read()}{read()}}
{\footnotesize\ttfamily template$<$typename PIXEL $>$ \\
int \mbox{\hyperlink{classt32bitsrv_1_1_raster_exchanger}{t32bitsrv\+::\+Raster\+Exchanger}}$<$ PIXEL $>$\+::read (\begin{DoxyParamCaption}\item[{const char $\ast$}]{src\+Buf,  }\item[{int}]{len }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{classtipc_1_1_sh_mem_reader}{tipc\+::\+Sh\+Mem\+Reader}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00026                                                                      \{}
\DoxyCodeLine{00027   \textcolor{keywordflow}{if} (m\_ras-\/>getWrap() == m\_ras-\/>getLx()) \{}
\DoxyCodeLine{00028     memcpy(m\_pix, srcBuf, len);}
\DoxyCodeLine{00029     m\_pix = (PIXEL *)((UCHAR *)m\_pix + len);}
\DoxyCodeLine{00030   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00031     \textcolor{keywordtype}{int} xStart         = (m\_pix -\/ m\_ras-\/>pixels(0)) \% m\_ras-\/>getWrap();}
\DoxyCodeLine{00032     \textcolor{keywordtype}{int} remainingData  = len;}
\DoxyCodeLine{00033     \textcolor{keywordtype}{int} lineData       = m\_ras-\/>getLx() * \textcolor{keyword}{sizeof}(PIXEL);}
\DoxyCodeLine{00034     \textcolor{keywordtype}{int} lineDataToRead = std::min(}
\DoxyCodeLine{00035         (\textcolor{keywordtype}{int})((m\_ras-\/>getLx() -\/ xStart) * \textcolor{keyword}{sizeof}(PIXEL)), remainingData);}
\DoxyCodeLine{00036 }
\DoxyCodeLine{00037     \textcolor{keywordflow}{for} (; remainingData > 0;}
\DoxyCodeLine{00038          m\_pix += (m\_ras-\/>getWrap() -\/ xStart), remainingData -\/= lineDataToRead,}
\DoxyCodeLine{00039          lineDataToRead = std::min(lineData, remainingData), xStart = 0)}
\DoxyCodeLine{00040       memcpy(m\_pix, srcBuf, lineDataToRead);}
\DoxyCodeLine{00041   \}}
\DoxyCodeLine{00042 }
\DoxyCodeLine{00043   \textcolor{keywordflow}{return} len;}
\DoxyCodeLine{00044 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classt32bitsrv_1_1_raster_exchanger_a5bf2a612089808801cb0c9084aeec388}\label{classt32bitsrv_1_1_raster_exchanger_a5bf2a612089808801cb0c9084aeec388}} 
\index{t32bitsrv::RasterExchanger$<$ PIXEL $>$@{t32bitsrv::RasterExchanger$<$ PIXEL $>$}!write@{write}}
\index{write@{write}!t32bitsrv::RasterExchanger$<$ PIXEL $>$@{t32bitsrv::RasterExchanger$<$ PIXEL $>$}}
\doxysubsubsection{\texorpdfstring{write()}{write()}}
{\footnotesize\ttfamily template$<$typename PIXEL $>$ \\
int \mbox{\hyperlink{classt32bitsrv_1_1_raster_exchanger}{t32bitsrv\+::\+Raster\+Exchanger}}$<$ PIXEL $>$\+::write (\begin{DoxyParamCaption}\item[{char $\ast$}]{dst\+Buf,  }\item[{int}]{len }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{classtipc_1_1_sh_mem_writer}{tipc\+::\+Sh\+Mem\+Writer}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00049                                                                 \{}
\DoxyCodeLine{00050   \textcolor{comment}{// We pass entire pixels, not just bytes}}
\DoxyCodeLine{00051   len = len -\/ (len \% \textcolor{keyword}{sizeof}(PIXEL));}
\DoxyCodeLine{00052 }
\DoxyCodeLine{00053   \textcolor{keywordflow}{if} (m\_ras-\/>getWrap() == m\_ras-\/>getLx()) \{}
\DoxyCodeLine{00054     memcpy(dstBuf, m\_pix, len);}
\DoxyCodeLine{00055     m\_pix = (PIXEL *)((UCHAR *)m\_pix + len);}
\DoxyCodeLine{00056   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00057     \textcolor{keywordtype}{int} xStart          = (m\_pix -\/ m\_ras-\/>pixels(0)) \% m\_ras-\/>getWrap();}
\DoxyCodeLine{00058     \textcolor{keywordtype}{int} remainingData   = len;}
\DoxyCodeLine{00059     \textcolor{keywordtype}{int} lineData        = m\_ras-\/>getLx() * \textcolor{keyword}{sizeof}(PIXEL);}
\DoxyCodeLine{00060     \textcolor{keywordtype}{int} lineDataToWrite = std::min(}
\DoxyCodeLine{00061         (\textcolor{keywordtype}{int})((m\_ras-\/>getLx() -\/ xStart) * \textcolor{keyword}{sizeof}(PIXEL)), remainingData);}
\DoxyCodeLine{00062 }
\DoxyCodeLine{00063     \textcolor{keywordflow}{for} (; remainingData > 0;}
\DoxyCodeLine{00064          m\_pix += (m\_ras-\/>getWrap() -\/ xStart), remainingData -\/= lineDataToWrite,}
\DoxyCodeLine{00065          lineDataToWrite = std::min(lineData, remainingData), xStart = 0)}
\DoxyCodeLine{00066       memcpy(dstBuf, m\_pix, lineDataToWrite);}
\DoxyCodeLine{00067   \}}
\DoxyCodeLine{00068 }
\DoxyCodeLine{00069   \textcolor{keywordflow}{return} len;}
\DoxyCodeLine{00070 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/t32bitsrv\+\_\+wrap.\+h\item 
E\+:/opentoonz/toonz/sources/common/tipc/t32bitsrv\+\_\+wrap.\+cpp\end{DoxyCompactItemize}
