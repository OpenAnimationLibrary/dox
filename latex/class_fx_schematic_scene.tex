\hypertarget{class_fx_schematic_scene}{}\doxysection{Fx\+Schematic\+Scene Class Reference}
\label{class_fx_schematic_scene}\index{FxSchematicScene@{FxSchematicScene}}
Inheritance diagram for Fx\+Schematic\+Scene\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_fx_schematic_scene}
\end{center}
\end{figure}
\doxysubsection*{Signals}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_fx_schematic_scene_aefaa135885613ea62e731e65119907f6}\label{class_fx_schematic_scene_aefaa135885613ea62e731e65119907f6}} 
void {\bfseries show\+Preview} (\mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}})
\item 
\mbox{\Hypertarget{class_fx_schematic_scene_ab823f61cb0ff54abcb9d9ee5e02e07a0}\label{class_fx_schematic_scene_ab823f61cb0ff54abcb9d9ee5e02e07a0}} 
void {\bfseries cache\+Fx} (\mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}})
\item 
\mbox{\Hypertarget{class_fx_schematic_scene_a93b34f30cd46a6c2c969ab17c401d813}\label{class_fx_schematic_scene_a93b34f30cd46a6c2c969ab17c401d813}} 
void {\bfseries do\+Collapse} (const QList$<$ \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} $>$ \&)
\item 
\mbox{\Hypertarget{class_fx_schematic_scene_a6ce99ee2feb189344d1d0c3c44213e84}\label{class_fx_schematic_scene_a6ce99ee2feb189344d1d0c3c44213e84}} 
void {\bfseries do\+Explode\+Child} (const QList$<$ \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} $>$ \&)
\item 
\mbox{\Hypertarget{class_fx_schematic_scene_aa4163f8a131585148cec39328fb98e72}\label{class_fx_schematic_scene_aa4163f8a131585148cec39328fb98e72}} 
void {\bfseries edit\+Object} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_fx_schematic_scene_a8c86d71e1d8c5f139c1a756712f6226a}{Fx\+Schematic\+Scene}} (QWidget $\ast$parent)
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a64ed07d8d24e3185235dc1f7808441b7}{update\+Scene}} () override
\item 
QGraphics\+Item $\ast$ \mbox{\hyperlink{class_fx_schematic_scene_a8f343229ea5f4ff10aaded8d33fcedb6}{get\+Current\+Node}} () override
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a3013fdffb208521fcba25c64f8616914}{reorder\+Scene}} () override
\item 
\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$ \mbox{\hyperlink{class_fx_schematic_scene_a3f6e3fd7725fd26936e2e23010bfbd10}{get\+Xsheet}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_ad6caa543e72c33f9b9919c5ac5c9628c}{set\+Application}} (\mbox{\hyperlink{class_t_application}{TApplication}} $\ast$app)
\item 
\mbox{\hyperlink{class_t_application}{TApplication}} $\ast$ \mbox{\hyperlink{class_fx_schematic_scene_a1eb88d4b397f0c301d3e0f7028879361}{get\+Application}} () const
\item 
\mbox{\hyperlink{class_t_xsheet_handle}{TXsheet\+Handle}} $\ast$ \mbox{\hyperlink{class_fx_schematic_scene_ab2e92cc3bcdb3a01b9a0d2b8e2c5ec16}{get\+Xsheet\+Handle}} () const
\item 
\mbox{\hyperlink{class_t_fx_handle}{TFx\+Handle}} $\ast$ \mbox{\hyperlink{class_fx_schematic_scene_a810a2473f87f70ec87ed195a72ec766e}{get\+Fx\+Handle}} () const
\item 
\mbox{\hyperlink{class_t_frame_handle}{TFrame\+Handle}} $\ast$ \mbox{\hyperlink{class_fx_schematic_scene_a573aa6d53c17855ac284474361cbbf0c}{get\+Frame\+Handle}} () const
\item 
\mbox{\hyperlink{class_t_column_handle}{TColumn\+Handle}} $\ast$ \mbox{\hyperlink{class_fx_schematic_scene_a321665a4c47dc25ceb35d7fe783f6a6a}{get\+Column\+Handle}} () const
\item 
\mbox{\hyperlink{class_t_fx}{TFx}} $\ast$ \mbox{\hyperlink{class_fx_schematic_scene_aa1922b999c4dab048ebb30cecfe38f44}{get\+Current\+Fx}} ()
\item 
QMenu $\ast$ \mbox{\hyperlink{class_fx_schematic_scene_a6ec153f517155db7ed362d06c792cc68}{get\+Insert\+Fx\+Menu}} ()
\item 
QMenu $\ast$ \mbox{\hyperlink{class_fx_schematic_scene_a507efadaeecb255a43446e620edb3b94}{get\+Add\+Fx\+Menu}} ()
\item 
QMenu $\ast$ \mbox{\hyperlink{class_fx_schematic_scene_a21305b6bd52168e21bc178454be453b2}{get\+Replace\+Fx\+Menu}} ()
\item 
QAction $\ast$ \mbox{\hyperlink{class_fx_schematic_scene_a51ed91ba2e39c65fa9ebd0c3af955dd3}{get\+Again\+Action}} (int commands)
\item 
\mbox{\hyperlink{class_fx_selection}{Fx\+Selection}} $\ast$ \mbox{\hyperlink{class_fx_schematic_scene_acbbe163488ef3db368a385cdf3bb035d}{get\+Fx\+Selection}} () const
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a718e7f295f1ae4e554422d59f41fa9e2}{simulate\+Disconnect\+Selection}} (bool disconnect)
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a179a8bca1d88cd7638b52dffb85f406c}{update\+Nested\+Group\+Editors}} (\mbox{\hyperlink{class_fx_schematic_node}{Fx\+Schematic\+Node}} $\ast$node, const QPointF \&new\+Pos)
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_aa30f2d2dd59a90bb7878d9a4a38a200b}{close\+Inner\+Macro\+Editor}} (int group\+Id)
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_aefa5bdfdf2a92ab0040947019436f81a}{resize\+Nodes}} (bool maximized\+Node)
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_abd1c011864dd6f08952f96d2a8e54a81}{init\+Cursor\+Scene\+Pos}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a230765d87ed8113a646c83658bca2f79}{select\+Nodes}} (QList$<$ \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} $>$ \&fxs)
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a4f7b513ad8e17edc43d566105ff67f6e}{toggle\+Normal\+Icon\+View}} ()
\item 
bool \mbox{\hyperlink{class_fx_schematic_scene_adaf119ae5a35b8d9f1fb53ddf9e27201}{is\+Normal\+Icon\+View}} ()
\item 
\mbox{\hyperlink{class_schematic_viewer}{Schematic\+Viewer}} $\ast$ \mbox{\hyperlink{class_fx_schematic_scene_ace0c2891edc0a9cae145161a03a7fd6c}{get\+Schematic\+Viewer}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_afcaee85e470349bd7508b4310cb947e2}{on\+Selection\+Switched}} (\mbox{\hyperlink{class_t_selection}{TSelection}} $\ast$old\+Sel, \mbox{\hyperlink{class_t_selection}{TSelection}} $\ast$new\+Sel) override
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a7006895644623cdeee4d909788ea9b4f}{on\+Selection\+Changed}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a8f27faf9bdf1fed1ecc7643d509dccc0}{on\+Disconnect\+From\+XSheet}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a6c1bcb0285b96c5e78a08721769fa0f6}{on\+Connect\+To\+XSheet}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a8aba890f3ec5792a533d305060dc6727}{on\+Delete\+Fx}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_aeb96295f47222308fa8faed3e8e28d72}{on\+Duplicate\+Fx}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_af1b9a3f37f8ce871cd27b566a9cc3590}{on\+Unlink\+Fx}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a67214336d7f4b7a555c6e459ec614782}{on\+Macro\+Fx}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_ab2528ded946c61945cf095eb0ff4693d}{on\+Explode\+Macro\+Fx}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_ab7213e4de9e7565db8a94d9a01f2d24f}{on\+Open\+Macro\+Fx}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_adb9ca26723455cdc8ec02bf1c6d0125e}{on\+Save\+Preset\+Fx}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_ab657732c9973c5b21a985a0d4725dcd3}{on\+Remove\+Output}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_aaf9811af61ef164903034d3870a25348}{on\+Activate\+Output}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a0a23cffcfb1386d0a8858a622f1b7b3e}{on\+Preview}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a13a69ed746f9fca77f22aa8ddc6c506b}{on\+Cache\+Fx}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a0fee69bdf9152ec47470a9dbb46ff9ec}{on\+Uncache\+Fx}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_aae27eba4cd4fa15828afb9495c0c82e6}{on\+Collapse}} (const QList$<$ \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} $>$ \&)
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a526e512ee0bdb36582b5c71cf50b25c3}{on\+Xsheet\+Changed}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a9eb1d87d955b9b3da3b5a7194c08e5df}{on\+Scene\+Changed}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a780b11af0065c841faa838da155f40f9}{on\+Switch\+Current\+Fx}} (\mbox{\hyperlink{class_t_fx}{TFx}} $\ast$)
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a5120b0449543012c3c9d02ef4659c6d8}{on\+Current\+Fx\+Switched}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a2b3642342a4e8441f4e6952e277df7dc}{on\+Current\+Column\+Changed}} (int)
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_ad26dc022170f120c936e7b0cb45ccb80}{on\+Fx\+Node\+Double\+Clicked}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_ab2efea80503a1b367629544ccf53947a}{on\+Insert\+Paste}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_af66d6ba962ffff589dfe28f5c936f0b7}{on\+Add\+Paste}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a02134a941c5cde424f6f7b7f92e9ed8b}{on\+Replace\+Paste}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_ac56bacbdd98a9fafb5fa23e960e5a3bd}{on\+Alt\+Modifier\+Changed}} (bool)
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a21c808110d94438a1f45a7557bd9264f}{on\+Edit\+Group}} ()
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a805a4c0bcff15c252d1144430489ffc0}{on\+Iconify\+Nodes\+Toggled}} (bool iconified)
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_ad3a158c733f0f2dc512246ed6eeaaa18}{on\+Node\+Changed\+Size}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a8bf063e154ab1b8ad2663de96925651d}{context\+Menu\+Event}} (QGraphics\+Scene\+Context\+Menu\+Event $\ast$cme) override
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a0e9900e66beb9b67f2cec6fa139ff184}{mouse\+Press\+Event}} (QGraphics\+Scene\+Mouse\+Event $\ast$me) override
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_adeaa753fa6edd60430ec3da29ed1c48a}{mouse\+Move\+Event}} (QGraphics\+Scene\+Mouse\+Event $\ast$me) override
\item 
void \mbox{\hyperlink{class_fx_schematic_scene_a29eb37d79ee37e31b3f9f4156f81c8e1}{mouse\+Release\+Event}} (QGraphics\+Scene\+Mouse\+Event $\ast$me) override
\item 
bool \mbox{\hyperlink{class_fx_schematic_scene_a240f7c12d4eb95e8a4da43c096ef796c}{event}} (QEvent $\ast$e) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_fx_schematic_scene_a8c86d71e1d8c5f139c1a756712f6226a}\label{class_fx_schematic_scene_a8c86d71e1d8c5f139c1a756712f6226a}} 
\index{FxSchematicScene@{FxSchematicScene}!FxSchematicScene@{FxSchematicScene}}
\index{FxSchematicScene@{FxSchematicScene}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{FxSchematicScene()}{FxSchematicScene()}}
{\footnotesize\ttfamily Fx\+Schematic\+Scene\+::\+Fx\+Schematic\+Scene (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00312     : \mbox{\hyperlink{class_schematic_scene}{SchematicScene}}(parent)}
\DoxyCodeLine{00313     , m\_firstPoint(sceneRect().center())}
\DoxyCodeLine{00314     , m\_xshHandle(0)}
\DoxyCodeLine{00315     , m\_fxHandle(0)}
\DoxyCodeLine{00316     , m\_addFxContextMenu()}
\DoxyCodeLine{00317     , m\_disconnectionLinks()}
\DoxyCodeLine{00318     , m\_connectionLinks()}
\DoxyCodeLine{00319     , m\_isConnected(\textcolor{keyword}{false})}
\DoxyCodeLine{00320     , m\_linkUnlinkSimulation(\textcolor{keyword}{false})}
\DoxyCodeLine{00321     , m\_altPressed(\textcolor{keyword}{false})}
\DoxyCodeLine{00322     , m\_lastPos(0, 0)}
\DoxyCodeLine{00323     , m\_currentFxNode(0)}
\DoxyCodeLine{00324     , m\_gridDimension(eSmall)}
\DoxyCodeLine{00325     , m\_isNormalIconView(!IconifyFxSchematicNodes)}
\DoxyCodeLine{00326     , m\_viewer() \{}
\DoxyCodeLine{00327   m\_viewer = (\mbox{\hyperlink{class_schematic_viewer}{SchematicViewer}} *)parent;}
\DoxyCodeLine{00328 }
\DoxyCodeLine{00329   m\_selection = \textcolor{keyword}{new} \mbox{\hyperlink{class_fx_selection}{FxSelection}}();}
\DoxyCodeLine{00330   m\_selection-\/>setFxSchematicScene(\textcolor{keyword}{this});}
\DoxyCodeLine{00331 }
\DoxyCodeLine{00332   connect(m\_selection, SIGNAL(doCollapse(\textcolor{keyword}{const} QList<TFxP> \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00333           SLOT(onCollapse(\textcolor{keyword}{const} QList<TFxP> \&)));}
\DoxyCodeLine{00334   connect(m\_selection, SIGNAL(doExplodeChild(\textcolor{keyword}{const} QList<TFxP> \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00335           SIGNAL(doExplodeChild(\textcolor{keyword}{const} QList<TFxP> \&)));}
\DoxyCodeLine{00336   connect(\textcolor{keyword}{this}, SIGNAL(selectionChanged()), \textcolor{keyword}{this}, SLOT(onSelectionChanged()));}
\DoxyCodeLine{00337 }
\DoxyCodeLine{00338   m\_addFxContextMenu.setSelection(m\_selection);}
\DoxyCodeLine{00339   m\_highlightedLinks.clear();}
\DoxyCodeLine{00340 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_ab11e3cba28549d5b5bad7c4c886965f2}\label{class_fx_schematic_scene_ab11e3cba28549d5b5bad7c4c886965f2}} 
\index{FxSchematicScene@{FxSchematicScene}!````~FxSchematicScene@{$\sim$FxSchematicScene}}
\index{````~FxSchematicScene@{$\sim$FxSchematicScene}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{$\sim$FxSchematicScene()}{~FxSchematicScene()}}
{\footnotesize\ttfamily Fx\+Schematic\+Scene\+::$\sim$\+Fx\+Schematic\+Scene (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00344                                     \{}
\DoxyCodeLine{00345   \textcolor{keywordflow}{if} (m\_selection) \textcolor{keyword}{delete} m\_selection;}
\DoxyCodeLine{00346 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_fx_schematic_scene_aa30f2d2dd59a90bb7878d9a4a38a200b}\label{class_fx_schematic_scene_aa30f2d2dd59a90bb7878d9a4a38a200b}} 
\index{FxSchematicScene@{FxSchematicScene}!closeInnerMacroEditor@{closeInnerMacroEditor}}
\index{closeInnerMacroEditor@{closeInnerMacroEditor}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{closeInnerMacroEditor()}{closeInnerMacroEditor()}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::close\+Inner\+Macro\+Editor (\begin{DoxyParamCaption}\item[{int}]{group\+Id }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02120                                                         \{}
\DoxyCodeLine{02121   assert(m\_groupEditorTable.contains(groupId));}
\DoxyCodeLine{02122   QMap<TMacroFx *, FxSchematicMacroEditor *>::iterator it;}
\DoxyCodeLine{02123   \textcolor{keywordflow}{for} (it = m\_macroEditorTable.begin(); it != m\_macroEditorTable.end(); it++) \{}
\DoxyCodeLine{02124     \mbox{\hyperlink{class_t_macro_fx}{TMacroFx}} *macro = it.key();}
\DoxyCodeLine{02125     assert(macro);}
\DoxyCodeLine{02126     \textcolor{keywordflow}{if} (macro-\/>getAttributes()-\/>isContainedInGroup(groupId)) \{}
\DoxyCodeLine{02127       macro-\/>editMacro(\textcolor{keyword}{false});}
\DoxyCodeLine{02128       macro-\/>getAttributes()-\/>closeEditingGroup(groupId);}
\DoxyCodeLine{02129     \}}
\DoxyCodeLine{02130   \}}
\DoxyCodeLine{02131 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a8bf063e154ab1b8ad2663de96925651d}\label{class_fx_schematic_scene_a8bf063e154ab1b8ad2663de96925651d}} 
\index{FxSchematicScene@{FxSchematicScene}!contextMenuEvent@{contextMenuEvent}}
\index{contextMenuEvent@{contextMenuEvent}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{contextMenuEvent()}{contextMenuEvent()}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::context\+Menu\+Event (\begin{DoxyParamCaption}\item[{QGraphics\+Scene\+Context\+Menu\+Event $\ast$}]{cme }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00981                                                                            \{}
\DoxyCodeLine{00982   QPointF scenePos                = cme-\/>scenePos();}
\DoxyCodeLine{00983   QList<QGraphicsItem *> itemList = items(scenePos);}
\DoxyCodeLine{00984   \textcolor{keywordflow}{if} (!itemList.isEmpty()) \{}
\DoxyCodeLine{00985     SchematicScene::contextMenuEvent(cme);}
\DoxyCodeLine{00986     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00987   \}}
\DoxyCodeLine{00988 }
\DoxyCodeLine{00989   QMenu menu(views()[0]);}
\DoxyCodeLine{00990 }
\DoxyCodeLine{00991   \textcolor{keywordflow}{if} (cme-\/>modifiers() \& Qt::ControlModifier) \{}
\DoxyCodeLine{00992     menu.addAction(m\_addFxContextMenu.\mbox{\hyperlink{class_add_fx_context_menu_a86483091019ab238939c27a2a84022b3}{getAgainCommand}}(AddFxContextMenu::Add));}
\DoxyCodeLine{00993     \textcolor{keywordflow}{if} (!menu.actions().isEmpty()) \{}
\DoxyCodeLine{00994       menu.exec(cme-\/>screenPos());}
\DoxyCodeLine{00995       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00996     \}}
\DoxyCodeLine{00997   \}}
\DoxyCodeLine{00998 }
\DoxyCodeLine{00999   QAction *addOutputFx =}
\DoxyCodeLine{01000       CommandManager::instance()-\/>getAction(\textcolor{stringliteral}{"{}MI\_NewOutputFx"{}});}
\DoxyCodeLine{01001   QAction *\mbox{\hyperlink{namespace_t_rop_a229eb7fd85c23c325ea4ba55478d5712}{copy}}  = CommandManager::instance()-\/>getAction(\textcolor{stringliteral}{"{}MI\_Copy"{}});}
\DoxyCodeLine{01002   QAction *cut   = CommandManager::instance()-\/>getAction(\textcolor{stringliteral}{"{}MI\_Cut"{}});}
\DoxyCodeLine{01003   QAction *paste = CommandManager::instance()-\/>getAction(\textcolor{stringliteral}{"{}MI\_Paste"{}});}
\DoxyCodeLine{01004 }
\DoxyCodeLine{01005   m\_addFxContextMenu.setCurrentCursorScenePos(cme-\/>scenePos());}
\DoxyCodeLine{01006 }
\DoxyCodeLine{01007   menu.addMenu(m\_addFxContextMenu.getAddMenu());}
\DoxyCodeLine{01008   \textcolor{keywordflow}{if} (addOutputFx) menu.addAction(addOutputFx);}
\DoxyCodeLine{01009 }
\DoxyCodeLine{01010   \textcolor{comment}{// Close sub xsheet and move to parent sheet}}
\DoxyCodeLine{01011   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene      = getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_a35d49d436513243d059eee3a25ffa2ef}{getScene}}();}
\DoxyCodeLine{01012   \mbox{\hyperlink{class_child_stack}{ChildStack}} *childStack = scene-\/>\mbox{\hyperlink{class_toonz_scene_ae2cbc582144c92adc5076cd5f556c95a}{getChildStack}}();}
\DoxyCodeLine{01013   \textcolor{keywordflow}{if} (childStack \&\& childStack-\/>\mbox{\hyperlink{class_child_stack_adf32015ee9da2ea3255ba9bd2597f899}{getAncestorCount}}() > 0) \{}
\DoxyCodeLine{01014     menu.addSeparator();}
\DoxyCodeLine{01015     menu.addAction(CommandManager::instance()-\/>getAction(\textcolor{stringliteral}{"{}MI\_CloseChild"{}}));}
\DoxyCodeLine{01016   \}}
\DoxyCodeLine{01017 }
\DoxyCodeLine{01018   menu.addSeparator();}
\DoxyCodeLine{01019   menu.addAction(copy);}
\DoxyCodeLine{01020   menu.addAction(cut);}
\DoxyCodeLine{01021   menu.addAction(paste);}
\DoxyCodeLine{01022   m\_selection-\/>setPastePosition(\mbox{\hyperlink{class_t_point_t}{TPointD}}(scenePos.x(), scenePos.y()));}
\DoxyCodeLine{01023   menu.exec(cme-\/>screenPos());}
\DoxyCodeLine{01024   m\_selection-\/>setPastePosition(TConst::nowhere);}
\DoxyCodeLine{01025 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a240f7c12d4eb95e8a4da43c096ef796c}\label{class_fx_schematic_scene_a240f7c12d4eb95e8a4da43c096ef796c}} 
\index{FxSchematicScene@{FxSchematicScene}!event@{event}}
\index{event@{event}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{event()}{event()}}
{\footnotesize\ttfamily bool Fx\+Schematic\+Scene\+::event (\begin{DoxyParamCaption}\item[{QEvent $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01763                                       \{}
\DoxyCodeLine{01764   \textcolor{keywordtype}{bool} ret        = SchematicScene::event(e);}
\DoxyCodeLine{01765   \textcolor{keywordtype}{bool} altPressed = QApplication::keyboardModifiers() == Qt::AltModifier;}
\DoxyCodeLine{01766   \textcolor{keywordflow}{if} (m\_altPressed != altPressed) \{}
\DoxyCodeLine{01767     \textcolor{comment}{// When Alt key is pressed, put the link lines on top of other items}}
\DoxyCodeLine{01768     \textcolor{comment}{// in order to enable to pick them up with itemAt() function.}}
\DoxyCodeLine{01769     \textcolor{keywordtype}{double} z                          = (altPressed) ? 5.0 : 0.0;}
\DoxyCodeLine{01770     QList<QGraphicsItem *> sceneItems = items();}
\DoxyCodeLine{01771     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < sceneItems.size(); i++) \{}
\DoxyCodeLine{01772       \mbox{\hyperlink{class_schematic_link}{SchematicLink}} *link = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_schematic_link}{SchematicLink}} *\textcolor{keyword}{>}(sceneItems.at(i));}
\DoxyCodeLine{01773       \textcolor{keywordflow}{if} (link) link-\/>setZValue(z);}
\DoxyCodeLine{01774     \}}
\DoxyCodeLine{01775 }
\DoxyCodeLine{01776     \textcolor{keywordflow}{if} (m\_linkUnlinkSimulation) onAltModifierChanged(altPressed);}
\DoxyCodeLine{01777     m\_altPressed = altPressed;}
\DoxyCodeLine{01778   \}}
\DoxyCodeLine{01779   \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{01780 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a507efadaeecb255a43446e620edb3b94}\label{class_fx_schematic_scene_a507efadaeecb255a43446e620edb3b94}} 
\index{FxSchematicScene@{FxSchematicScene}!getAddFxMenu@{getAddFxMenu}}
\index{getAddFxMenu@{getAddFxMenu}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{getAddFxMenu()}{getAddFxMenu()}}
{\footnotesize\ttfamily QMenu $\ast$ Fx\+Schematic\+Scene\+::get\+Add\+Fx\+Menu (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00127 \{ \textcolor{keywordflow}{return} m\_addFxContextMenu.getAddMenu(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a51ed91ba2e39c65fa9ebd0c3af955dd3}\label{class_fx_schematic_scene_a51ed91ba2e39c65fa9ebd0c3af955dd3}} 
\index{FxSchematicScene@{FxSchematicScene}!getAgainAction@{getAgainAction}}
\index{getAgainAction@{getAgainAction}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{getAgainAction()}{getAgainAction()}}
{\footnotesize\ttfamily QAction $\ast$ Fx\+Schematic\+Scene\+::get\+Again\+Action (\begin{DoxyParamCaption}\item[{int}]{commands }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00130                                         \{}
\DoxyCodeLine{00131     \textcolor{keywordflow}{return} m\_addFxContextMenu.\mbox{\hyperlink{class_add_fx_context_menu_a86483091019ab238939c27a2a84022b3}{getAgainCommand}}(commands);}
\DoxyCodeLine{00132   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a1eb88d4b397f0c301d3e0f7028879361}\label{class_fx_schematic_scene_a1eb88d4b397f0c301d3e0f7028879361}} 
\index{FxSchematicScene@{FxSchematicScene}!getApplication@{getApplication}}
\index{getApplication@{getApplication}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{getApplication()}{getApplication()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_application}{TApplication}} $\ast$ Fx\+Schematic\+Scene\+::get\+Application (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00119 \{ \textcolor{keywordflow}{return} m\_app; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a321665a4c47dc25ceb35d7fe783f6a6a}\label{class_fx_schematic_scene_a321665a4c47dc25ceb35d7fe783f6a6a}} 
\index{FxSchematicScene@{FxSchematicScene}!getColumnHandle@{getColumnHandle}}
\index{getColumnHandle@{getColumnHandle}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{getColumnHandle()}{getColumnHandle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_column_handle}{TColumn\+Handle}} $\ast$ Fx\+Schematic\+Scene\+::get\+Column\+Handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00123 \{ \textcolor{keywordflow}{return} m\_columnHandle; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_aa1922b999c4dab048ebb30cecfe38f44}\label{class_fx_schematic_scene_aa1922b999c4dab048ebb30cecfe38f44}} 
\index{FxSchematicScene@{FxSchematicScene}!getCurrentFx@{getCurrentFx}}
\index{getCurrentFx@{getCurrentFx}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{getCurrentFx()}{getCurrentFx()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_fx}{TFx}} $\ast$ Fx\+Schematic\+Scene\+::get\+Current\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01610 \{ \textcolor{keywordflow}{return} m\_fxHandle-\/>getFx(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a8f343229ea5f4ff10aaded8d33fcedb6}\label{class_fx_schematic_scene_a8f343229ea5f4ff10aaded8d33fcedb6}} 
\index{FxSchematicScene@{FxSchematicScene}!getCurrentNode@{getCurrentNode}}
\index{getCurrentNode@{getCurrentNode}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{getCurrentNode()}{getCurrentNode()}}
{\footnotesize\ttfamily QGraphics\+Item $\ast$ Fx\+Schematic\+Scene\+::get\+Current\+Node (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_schematic_scene}{Schematic\+Scene}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01131                                                 \{}
\DoxyCodeLine{01132   QList<QGraphicsItem *> allItems = items();}
\DoxyCodeLine{01133 }
\DoxyCodeLine{01134   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const} item : allItems) \{}
\DoxyCodeLine{01135     \mbox{\hyperlink{class_fx_schematic_node}{FxSchematicNode}} *node = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_fx_schematic_node}{FxSchematicNode}} *\textcolor{keyword}{>}(item);}
\DoxyCodeLine{01136     \textcolor{keywordflow}{if} (node \&\& node-\/>getFx() == m\_fxHandle-\/>getFx()) \textcolor{keywordflow}{return} node;}
\DoxyCodeLine{01137   \}}
\DoxyCodeLine{01138   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{01139 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a573aa6d53c17855ac284474361cbbf0c}\label{class_fx_schematic_scene_a573aa6d53c17855ac284474361cbbf0c}} 
\index{FxSchematicScene@{FxSchematicScene}!getFrameHandle@{getFrameHandle}}
\index{getFrameHandle@{getFrameHandle}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{getFrameHandle()}{getFrameHandle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_frame_handle}{TFrame\+Handle}} $\ast$ Fx\+Schematic\+Scene\+::get\+Frame\+Handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00122 \{ \textcolor{keywordflow}{return} m\_frameHandle; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a810a2473f87f70ec87ed195a72ec766e}\label{class_fx_schematic_scene_a810a2473f87f70ec87ed195a72ec766e}} 
\index{FxSchematicScene@{FxSchematicScene}!getFxHandle@{getFxHandle}}
\index{getFxHandle@{getFxHandle}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{getFxHandle()}{getFxHandle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_fx_handle}{TFx\+Handle}} $\ast$ Fx\+Schematic\+Scene\+::get\+Fx\+Handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00121 \{ \textcolor{keywordflow}{return} m\_fxHandle; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_acbbe163488ef3db368a385cdf3bb035d}\label{class_fx_schematic_scene_acbbe163488ef3db368a385cdf3bb035d}} 
\index{FxSchematicScene@{FxSchematicScene}!getFxSelection@{getFxSelection}}
\index{getFxSelection@{getFxSelection}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{getFxSelection()}{getFxSelection()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_fx_selection}{Fx\+Selection}} $\ast$ Fx\+Schematic\+Scene\+::get\+Fx\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00134 \{ \textcolor{keywordflow}{return} m\_selection; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a6ec153f517155db7ed362d06c792cc68}\label{class_fx_schematic_scene_a6ec153f517155db7ed362d06c792cc68}} 
\index{FxSchematicScene@{FxSchematicScene}!getInsertFxMenu@{getInsertFxMenu}}
\index{getInsertFxMenu@{getInsertFxMenu}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{getInsertFxMenu()}{getInsertFxMenu()}}
{\footnotesize\ttfamily QMenu $\ast$ Fx\+Schematic\+Scene\+::get\+Insert\+Fx\+Menu (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00126 \{ \textcolor{keywordflow}{return} m\_addFxContextMenu.getInsertMenu(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a21305b6bd52168e21bc178454be453b2}\label{class_fx_schematic_scene_a21305b6bd52168e21bc178454be453b2}} 
\index{FxSchematicScene@{FxSchematicScene}!getReplaceFxMenu@{getReplaceFxMenu}}
\index{getReplaceFxMenu@{getReplaceFxMenu}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{getReplaceFxMenu()}{getReplaceFxMenu()}}
{\footnotesize\ttfamily QMenu $\ast$ Fx\+Schematic\+Scene\+::get\+Replace\+Fx\+Menu (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00128 \{ \textcolor{keywordflow}{return} m\_addFxContextMenu.getReplaceMenu(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_ace0c2891edc0a9cae145161a03a7fd6c}\label{class_fx_schematic_scene_ace0c2891edc0a9cae145161a03a7fd6c}} 
\index{FxSchematicScene@{FxSchematicScene}!getSchematicViewer@{getSchematicViewer}}
\index{getSchematicViewer@{getSchematicViewer}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{getSchematicViewer()}{getSchematicViewer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_schematic_viewer}{Schematic\+Viewer}} $\ast$ Fx\+Schematic\+Scene\+::get\+Schematic\+Viewer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00154 \{ \textcolor{keywordflow}{return} m\_viewer; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a3f6e3fd7725fd26936e2e23010bfbd10}\label{class_fx_schematic_scene_a3f6e3fd7725fd26936e2e23010bfbd10}} 
\index{FxSchematicScene@{FxSchematicScene}!getXsheet@{getXsheet}}
\index{getXsheet@{getXsheet}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{getXsheet()}{getXsheet()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$ Fx\+Schematic\+Scene\+::get\+Xsheet (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01537 \{ \textcolor{keywordflow}{return} m\_xshHandle-\/>getXsheet(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_ab2e92cc3bcdb3a01b9a0d2b8e2c5ec16}\label{class_fx_schematic_scene_ab2e92cc3bcdb3a01b9a0d2b8e2c5ec16}} 
\index{FxSchematicScene@{FxSchematicScene}!getXsheetHandle@{getXsheetHandle}}
\index{getXsheetHandle@{getXsheetHandle}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{getXsheetHandle()}{getXsheetHandle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsheet_handle}{TXsheet\+Handle}} $\ast$ Fx\+Schematic\+Scene\+::get\+Xsheet\+Handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00120 \{ \textcolor{keywordflow}{return} m\_xshHandle; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_abd1c011864dd6f08952f96d2a8e54a81}\label{class_fx_schematic_scene_abd1c011864dd6f08952f96d2a8e54a81}} 
\index{FxSchematicScene@{FxSchematicScene}!initCursorScenePos@{initCursorScenePos}}
\index{initCursorScenePos@{initCursorScenePos}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{initCursorScenePos()}{initCursorScenePos()}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::init\+Cursor\+Scene\+Pos (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00147                             \{}
\DoxyCodeLine{00148     m\_addFxContextMenu.setCurrentCursorScenePos(QPointF(0, 0));}
\DoxyCodeLine{00149   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_adaf119ae5a35b8d9f1fb53ddf9e27201}\label{class_fx_schematic_scene_adaf119ae5a35b8d9f1fb53ddf9e27201}} 
\index{FxSchematicScene@{FxSchematicScene}!isNormalIconView@{isNormalIconView}}
\index{isNormalIconView@{isNormalIconView}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{isNormalIconView()}{isNormalIconView()}}
{\footnotesize\ttfamily bool Fx\+Schematic\+Scene\+::is\+Normal\+Icon\+View (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00152 \{ \textcolor{keywordflow}{return} m\_isNormalIconView; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_adeaa753fa6edd60430ec3da29ed1c48a}\label{class_fx_schematic_scene_adeaa753fa6edd60430ec3da29ed1c48a}} 
\index{FxSchematicScene@{FxSchematicScene}!mouseMoveEvent@{mouseMoveEvent}}
\index{mouseMoveEvent@{mouseMoveEvent}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{mouseMoveEvent()}{mouseMoveEvent()}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::mouse\+Move\+Event (\begin{DoxyParamCaption}\item[{QGraphics\+Scene\+Mouse\+Event $\ast$}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01658                                                                   \{}
\DoxyCodeLine{01659   SchematicScene::mouseMoveEvent(me);}
\DoxyCodeLine{01660 }
\DoxyCodeLine{01661   m\_lastPos = me-\/>scenePos();}
\DoxyCodeLine{01662 }
\DoxyCodeLine{01663   \textcolor{keywordtype}{bool} leftButton = (QApplication::mouseButtons() == Qt::LeftButton);}
\DoxyCodeLine{01664   \textcolor{keywordtype}{bool} altButton  = (QApplication::keyboardModifiers() == Qt::AltModifier);}
\DoxyCodeLine{01665 }
\DoxyCodeLine{01666   \textcolor{keywordflow}{if} (leftButton \&\& m\_isConnected \&\& altButton) \{}
\DoxyCodeLine{01667     m\_linkUnlinkSimulation = \textcolor{keyword}{true};}
\DoxyCodeLine{01668 }
\DoxyCodeLine{01669     \mbox{\hyperlink{class_fx_schematic_scene_a718e7f295f1ae4e554422d59f41fa9e2}{simulateDisconnectSelection}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01670     m\_connectionLinks.showBridgeLinks();}
\DoxyCodeLine{01671 }
\DoxyCodeLine{01672 \textcolor{preprocessor}{\#if QT\_VERSION >= 0x050000}}
\DoxyCodeLine{01673     \mbox{\hyperlink{class_schematic_link}{SchematicLink}} *link =}
\DoxyCodeLine{01674         \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_schematic_link}{SchematicLink}} *\textcolor{keyword}{>}(itemAt(m\_lastPos, QTransform()));}
\DoxyCodeLine{01675 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01676     \mbox{\hyperlink{class_schematic_link}{SchematicLink}} *link = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_schematic_link}{SchematicLink}} *\textcolor{keyword}{>}(itemAt(m\_lastPos));}
\DoxyCodeLine{01677 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01678     \textcolor{keywordflow}{if} (link \&\& (link-\/>\mbox{\hyperlink{class_schematic_link_a3a08c8ff1c6ebe6e526bc44bb6c9e96c}{getEndPort}}() \&\& link-\/>\mbox{\hyperlink{class_schematic_link_ae6fac3ac6e4f44958b7388be9bd9bcf6}{getStartPort}}())) \{}
\DoxyCodeLine{01679       \mbox{\hyperlink{class_t_fx_command_1_1_link}{TFxCommand::Link}} fxLink = m\_selection-\/>getBoundingFxs(link);}
\DoxyCodeLine{01680       \textcolor{keywordflow}{if} (fxLink == \mbox{\hyperlink{class_t_fx_command_1_1_link}{TFxCommand::Link}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01681 }
\DoxyCodeLine{01682       \mbox{\hyperlink{class_t_fx}{TFx}} *inputFx  = fxLink.m\_inputFx.getPointer();}
\DoxyCodeLine{01683       \mbox{\hyperlink{class_t_fx}{TFx}} *outputFx = fxLink.m\_outputFx.getPointer();}
\DoxyCodeLine{01684 }
\DoxyCodeLine{01685       \mbox{\hyperlink{class_t_fx_set}{TFxSet}} *internalFxs = getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_adc7c74cce346abf3699bb250eb17a9c2}{getFxDag}}()-\/>getInternalFxs();}
\DoxyCodeLine{01686       \textcolor{keywordflow}{if} (!internalFxs-\/>containsFx(inputFx) \&\&}
\DoxyCodeLine{01687           !\textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_column_fx}{TColumnFx}} *\textcolor{keyword}{>}(inputFx) \&\&}
\DoxyCodeLine{01688           !\textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_xsheet_fx}{TXsheetFx}} *\textcolor{keyword}{>}(inputFx) \&\&}
\DoxyCodeLine{01689           !\textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_output_fx}{TOutputFx}} *\textcolor{keyword}{>}(inputFx))}
\DoxyCodeLine{01690         \textcolor{keywordflow}{return};}
\DoxyCodeLine{01691       \textcolor{keywordflow}{if} (!internalFxs-\/>containsFx(outputFx) \&\&}
\DoxyCodeLine{01692           !\textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_column_fx}{TColumnFx}} *\textcolor{keyword}{>}(outputFx) \&\&}
\DoxyCodeLine{01693           !\textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_xsheet_fx}{TXsheetFx}} *\textcolor{keyword}{>}(outputFx) \&\&}
\DoxyCodeLine{01694           !\textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_output_fx}{TOutputFx}} *\textcolor{keyword}{>}(outputFx))}
\DoxyCodeLine{01695         \textcolor{keywordflow}{return};}
\DoxyCodeLine{01696     \}}
\DoxyCodeLine{01697 }
\DoxyCodeLine{01698     m\_connectionLinks.hideBridgeLinks();}
\DoxyCodeLine{01699     simulateInsertSelection(link, altButton \&\& !!link);}
\DoxyCodeLine{01700   \}}
\DoxyCodeLine{01701 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a0e9900e66beb9b67f2cec6fa139ff184}\label{class_fx_schematic_scene_a0e9900e66beb9b67f2cec6fa139ff184}} 
\index{FxSchematicScene@{FxSchematicScene}!mousePressEvent@{mousePressEvent}}
\index{mousePressEvent@{mousePressEvent}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{mousePressEvent()}{mousePressEvent()}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::mouse\+Press\+Event (\begin{DoxyParamCaption}\item[{QGraphics\+Scene\+Mouse\+Event $\ast$}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01614                                                                    \{}
\DoxyCodeLine{01615   QList<QGraphicsItem *> items = selectedItems();}
\DoxyCodeLine{01616 \textcolor{preprocessor}{\#if QT\_VERSION >= 0x050000}}
\DoxyCodeLine{01617   QGraphicsItem *item = itemAt(me-\/>scenePos(), QTransform());}
\DoxyCodeLine{01618 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01619   QGraphicsItem *item = itemAt(me-\/>scenePos());}
\DoxyCodeLine{01620 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01621   \mbox{\hyperlink{class_fx_schematic_port}{FxSchematicPort}} *port = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_fx_schematic_port}{FxSchematicPort}} *\textcolor{keyword}{>}(item);}
\DoxyCodeLine{01622   \mbox{\hyperlink{class_fx_schematic_link}{FxSchematicLink}} *link = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_fx_schematic_link}{FxSchematicLink}} *\textcolor{keyword}{>}(item);}
\DoxyCodeLine{01623   SchematicScene::mousePressEvent(me);}
\DoxyCodeLine{01624   onSelectionChanged();}
\DoxyCodeLine{01625   \textcolor{keywordflow}{if} (me-\/>button() == Qt::MidButton) \{}
\DoxyCodeLine{01626     \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01627     \textcolor{keywordflow}{for} (i = 0; i < items.size(); i++) items[i]-\/>setSelected(\textcolor{keyword}{true});}
\DoxyCodeLine{01628   \}}
\DoxyCodeLine{01629   \textcolor{comment}{/*}}
\DoxyCodeLine{01630 \textcolor{comment}{  m\_selection may not be updated here, so I use QGraphicsScene::selectedItems()}}
\DoxyCodeLine{01631 \textcolor{comment}{  instead of m\_selection-\/>isEmpty() to check whether any node is selected or}}
\DoxyCodeLine{01632 \textcolor{comment}{  not.}}
\DoxyCodeLine{01633 \textcolor{comment}{  */}}
\DoxyCodeLine{01634   \textcolor{keywordflow}{if} (selectedItems().isEmpty()) \{}
\DoxyCodeLine{01635     \textcolor{keywordflow}{if} (me-\/>button() != Qt::MidButton \&\& !item) m\_fxHandle-\/>setFx(0, \textcolor{keyword}{false});}
\DoxyCodeLine{01636     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01637   \}}
\DoxyCodeLine{01638   m\_isConnected = \textcolor{keyword}{false};}
\DoxyCodeLine{01639   \textcolor{keywordflow}{if} (!canDisconnectSelection(m\_selection)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01640   m\_selectionOldPos.clear();}
\DoxyCodeLine{01641   QList<TFxP> selectedFxs = m\_selection-\/>getFxs();}
\DoxyCodeLine{01642   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01643   \textcolor{keywordflow}{for} (i = 0; i < selectedFxs.size(); i++) \{}
\DoxyCodeLine{01644     \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} selectedFx = selectedFxs[i];}
\DoxyCodeLine{01645     \mbox{\hyperlink{class_t_point_t}{TPointD}} pos     = selectedFx-\/>getAttributes()-\/>getDagNodePos();}
\DoxyCodeLine{01646     m\_selectionOldPos.append(QPair<TFxP, TPointD>(selectedFx, pos));}
\DoxyCodeLine{01647   \}}
\DoxyCodeLine{01648   \mbox{\hyperlink{class_fxs_data}{FxsData}} fxsData;}
\DoxyCodeLine{01649   fxsData.\mbox{\hyperlink{class_fxs_data_a8481578b14a1b3ead923b4de3c999e89}{setFxs}}(m\_selection-\/>getFxs(), m\_selection-\/>getLinks(),}
\DoxyCodeLine{01650                  m\_selection-\/>getColumnIndexes(), m\_xshHandle-\/>getXsheet());}
\DoxyCodeLine{01651   \textcolor{comment}{// m\_isConnected indicates that the all selected nodes are connected}}
\DoxyCodeLine{01652   \textcolor{keywordflow}{if} (fxsData.\mbox{\hyperlink{class_fxs_data_ad5f0635a74671b4f20f75c7ba8457afa}{isConnected}}() \&\& me-\/>button() == Qt::LeftButton \&\& !port \&\& !link)}
\DoxyCodeLine{01653     m\_isConnected = \textcolor{keyword}{true};}
\DoxyCodeLine{01654 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a29eb37d79ee37e31b3f9f4156f81c8e1}\label{class_fx_schematic_scene_a29eb37d79ee37e31b3f9f4156f81c8e1}} 
\index{FxSchematicScene@{FxSchematicScene}!mouseReleaseEvent@{mouseReleaseEvent}}
\index{mouseReleaseEvent@{mouseReleaseEvent}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{mouseReleaseEvent()}{mouseReleaseEvent()}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::mouse\+Release\+Event (\begin{DoxyParamCaption}\item[{QGraphics\+Scene\+Mouse\+Event $\ast$}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01705                                                                      \{}
\DoxyCodeLine{01706   SchematicScene::mouseReleaseEvent(me);}
\DoxyCodeLine{01707 }
\DoxyCodeLine{01708   m\_linkUnlinkSimulation = \textcolor{keyword}{false};}
\DoxyCodeLine{01709 }
\DoxyCodeLine{01710   \textcolor{keywordflow}{if} ((m\_disconnectionLinks.size() == 0) \&\& (m\_connectionLinks.size() == 0))}
\DoxyCodeLine{01711     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01712 }
\DoxyCodeLine{01713   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01714 }
\DoxyCodeLine{01715   \textcolor{keywordtype}{bool} altButton = QApplication::keyboardModifiers() == Qt::AltModifier;}
\DoxyCodeLine{01716   \textcolor{keywordflow}{if} (altButton \&\& m\_isConnected) \{}
\DoxyCodeLine{01717     \textcolor{keywordflow}{if} (m\_connectionLinks.size() > 0) \{}
\DoxyCodeLine{01718       \textcolor{keyword}{const} QList<SchematicLink *> \&bridgeLinks =}
\DoxyCodeLine{01719           m\_connectionLinks.getBridgeLinks();}
\DoxyCodeLine{01720       assert(bridgeLinks.size() <= 1);}
\DoxyCodeLine{01721 }
\DoxyCodeLine{01722       \mbox{\hyperlink{class_schematic_link}{SchematicLink}} *link = bridgeLinks[0];}
\DoxyCodeLine{01723 }
\DoxyCodeLine{01724       \textcolor{keywordflow}{if} (link) \{}
\DoxyCodeLine{01725         \mbox{\hyperlink{class_fx_schematic_node}{FxSchematicNode}} *outputNode =}
\DoxyCodeLine{01726             \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_fx_schematic_node}{FxSchematicNode}} *\textcolor{keyword}{>}(link-\/>\mbox{\hyperlink{class_schematic_link_a3a08c8ff1c6ebe6e526bc44bb6c9e96c}{getEndPort}}()-\/>getNode());}
\DoxyCodeLine{01727         \mbox{\hyperlink{class_fx_schematic_node}{FxSchematicNode}} *inputNode =}
\DoxyCodeLine{01728             \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_fx_schematic_node}{FxSchematicNode}} *\textcolor{keyword}{>}(link-\/>\mbox{\hyperlink{class_schematic_link_ae6fac3ac6e4f44958b7388be9bd9bcf6}{getStartPort}}()-\/>getNode());}
\DoxyCodeLine{01729 }
\DoxyCodeLine{01730         \textcolor{keywordflow}{if} (inputNode \&\& outputNode) \{}
\DoxyCodeLine{01731           \mbox{\hyperlink{class_schematic_port}{SchematicPort}} *port = link-\/>\mbox{\hyperlink{class_schematic_link_ae6fac3ac6e4f44958b7388be9bd9bcf6}{getStartPort}}();}
\DoxyCodeLine{01732           \textcolor{keywordflow}{if} (port-\/>\mbox{\hyperlink{class_schematic_port_a119b9e3d6a308273c141c08fc18c5bfc}{getType}}() == 200 || port-\/>\mbox{\hyperlink{class_schematic_port_a119b9e3d6a308273c141c08fc18c5bfc}{getType}}() == 204)}
\DoxyCodeLine{01733             port = link-\/>\mbox{\hyperlink{class_schematic_link_ad634461aec8ce9f70d8f97f9d91ff582}{getOtherPort}}(port);}
\DoxyCodeLine{01734 }
\DoxyCodeLine{01735           \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01736           \textcolor{keywordflow}{for} (i = 0; i < outputNode-\/>getInputPortCount(); i++)}
\DoxyCodeLine{01737             \textcolor{keywordflow}{if} (port == outputNode-\/>getInputPort(i)) \textcolor{keywordflow}{break};}
\DoxyCodeLine{01738 }
\DoxyCodeLine{01739           \mbox{\hyperlink{class_t_fx_command_1_1_link}{TFxCommand::Link}} fxLink;}
\DoxyCodeLine{01740           fxLink.m\_outputFx = outputNode-\/>getFx();}
\DoxyCodeLine{01741           fxLink.m\_inputFx  = inputNode-\/>getFx();}
\DoxyCodeLine{01742           \textcolor{keywordflow}{if} (!outputNode-\/>isA(eXSheetFx)) fxLink.\mbox{\hyperlink{class_t_fx_command_1_1_link_a59252bec823e61280e1e6c1c9b5ce377}{m\_index}} = i;}
\DoxyCodeLine{01743 }
\DoxyCodeLine{01744           TFxCommand::connectFxs(fxLink, m\_selection-\/>getFxs().toStdList(),}
\DoxyCodeLine{01745                                  m\_xshHandle, m\_selectionOldPos);}
\DoxyCodeLine{01746         \}}
\DoxyCodeLine{01747       \}}
\DoxyCodeLine{01748     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_disconnectionLinks.size() > 0) \{}
\DoxyCodeLine{01749       QList<TFxP> fxs = m\_selection-\/>getFxs();}
\DoxyCodeLine{01750       TFxCommand::disconnectFxs(fxs.toStdList(), m\_xshHandle,}
\DoxyCodeLine{01751                                 m\_selectionOldPos);}
\DoxyCodeLine{01752       m\_selectionOldPos.clear();}
\DoxyCodeLine{01753     \}}
\DoxyCodeLine{01754   \}}
\DoxyCodeLine{01755 }
\DoxyCodeLine{01756   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01757 }
\DoxyCodeLine{01758   m\_isConnected = \textcolor{keyword}{false};}
\DoxyCodeLine{01759 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_aaf9811af61ef164903034d3870a25348}\label{class_fx_schematic_scene_aaf9811af61ef164903034d3870a25348}} 
\index{FxSchematicScene@{FxSchematicScene}!onActivateOutput@{onActivateOutput}}
\index{onActivateOutput@{onActivateOutput}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onActivateOutput}{onActivateOutput}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Activate\+Output (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01478                                         \{}
\DoxyCodeLine{01479   TFxCommand::makeOutputFxCurrent(m\_fxHandle-\/>getFx(), m\_xshHandle);}
\DoxyCodeLine{01480 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_af66d6ba962ffff589dfe28f5c936f0b7}\label{class_fx_schematic_scene_af66d6ba962ffff589dfe28f5c936f0b7}} 
\index{FxSchematicScene@{FxSchematicScene}!onAddPaste@{onAddPaste}}
\index{onAddPaste@{onAddPaste}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onAddPaste}{onAddPaste}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Add\+Paste (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01794                                   \{}
\DoxyCodeLine{01795   \textcolor{keywordflow}{if} (!m\_selection-\/>\mbox{\hyperlink{class_fx_selection_a80e200289a6e61125850217eaa8f7cd6}{addPasteSelection}}())}
\DoxyCodeLine{01796     DVGui::error(}
\DoxyCodeLine{01797         tr(\textcolor{stringliteral}{"{}Cannot Paste Add a selection of unconnected FX nodes.\(\backslash\)nSelect FX "{}}}
\DoxyCodeLine{01798            \textcolor{stringliteral}{"{}nodes and related links before copying or cutting the selection "{}}}
\DoxyCodeLine{01799            \textcolor{stringliteral}{"{}you want to paste."{}}));}
\DoxyCodeLine{01800 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_ac56bacbdd98a9fafb5fa23e960e5a3bd}\label{class_fx_schematic_scene_ac56bacbdd98a9fafb5fa23e960e5a3bd}} 
\index{FxSchematicScene@{FxSchematicScene}!onAltModifierChanged@{onAltModifierChanged}}
\index{onAltModifierChanged@{onAltModifierChanged}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onAltModifierChanged}{onAltModifierChanged}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Alt\+Modifier\+Changed (\begin{DoxyParamCaption}\item[{bool}]{alt\+Pressed }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01814                                                            \{}
\DoxyCodeLine{01815   \textcolor{keywordflow}{if} (altPressed) \{}
\DoxyCodeLine{01816     \textcolor{keywordflow}{if} (m\_disconnectionLinks.size() == 0 \&\& m\_linkUnlinkSimulation)}
\DoxyCodeLine{01817       \mbox{\hyperlink{class_fx_schematic_scene_a718e7f295f1ae4e554422d59f41fa9e2}{simulateDisconnectSelection}}(altPressed);}
\DoxyCodeLine{01818     \textcolor{keywordflow}{if} (m\_connectionLinks.size() == 0 \&\& m\_linkUnlinkSimulation) \{}
\DoxyCodeLine{01819 \textcolor{preprocessor}{\#if QT\_VERSION >= 0x050000}}
\DoxyCodeLine{01820       \mbox{\hyperlink{class_schematic_link}{SchematicLink}} *link =}
\DoxyCodeLine{01821           \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_schematic_link}{SchematicLink}} *\textcolor{keyword}{>}(itemAt(m\_lastPos, QTransform()));}
\DoxyCodeLine{01822 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01823       \mbox{\hyperlink{class_schematic_link}{SchematicLink}} *link = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_schematic_link}{SchematicLink}} *\textcolor{keyword}{>}(itemAt(m\_lastPos));}
\DoxyCodeLine{01824 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01825       \textcolor{keywordflow}{if} (link \&\& (!link-\/>\mbox{\hyperlink{class_schematic_link_a3a08c8ff1c6ebe6e526bc44bb6c9e96c}{getEndPort}}() || !link-\/>\mbox{\hyperlink{class_schematic_link_ae6fac3ac6e4f44958b7388be9bd9bcf6}{getStartPort}}())) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01826       simulateInsertSelection(link, altPressed \&\& !!link);}
\DoxyCodeLine{01827     \}}
\DoxyCodeLine{01828   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01829     \textcolor{keywordflow}{if} (m\_disconnectionLinks.size() > 0 \&\& m\_linkUnlinkSimulation)}
\DoxyCodeLine{01830       \mbox{\hyperlink{class_fx_schematic_scene_a718e7f295f1ae4e554422d59f41fa9e2}{simulateDisconnectSelection}}(altPressed);}
\DoxyCodeLine{01831     \textcolor{keywordflow}{if} (m\_connectionLinks.size() > 0 \&\& m\_linkUnlinkSimulation) \{}
\DoxyCodeLine{01832       m\_connectionLinks.showBridgeLinks();}
\DoxyCodeLine{01833       simulateInsertSelection(0, \textcolor{keyword}{false});}
\DoxyCodeLine{01834     \}}
\DoxyCodeLine{01835   \}}
\DoxyCodeLine{01836 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a13a69ed746f9fca77f22aa8ddc6c506b}\label{class_fx_schematic_scene_a13a69ed746f9fca77f22aa8ddc6c506b}} 
\index{FxSchematicScene@{FxSchematicScene}!onCacheFx@{onCacheFx}}
\index{onCacheFx@{onCacheFx}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onCacheFx}{onCacheFx}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Cache\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01488 \{ setEnableCache(\textcolor{keyword}{true}); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_aae27eba4cd4fa15828afb9495c0c82e6}\label{class_fx_schematic_scene_aae27eba4cd4fa15828afb9495c0c82e6}} 
\index{FxSchematicScene@{FxSchematicScene}!onCollapse@{onCollapse}}
\index{onCollapse@{onCollapse}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onCollapse}{onCollapse}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Collapse (\begin{DoxyParamCaption}\item[{const QList$<$ \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} $>$ \&}]{fxs }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01531                                                         \{}
\DoxyCodeLine{01532   emit doCollapse(fxs);}
\DoxyCodeLine{01533 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a6c1bcb0285b96c5e78a08721769fa0f6}\label{class_fx_schematic_scene_a6c1bcb0285b96c5e78a08721769fa0f6}} 
\index{FxSchematicScene@{FxSchematicScene}!onConnectToXSheet@{onConnectToXSheet}}
\index{onConnectToXSheet@{onConnectToXSheet}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onConnectToXSheet}{onConnectToXSheet}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Connect\+To\+XSheet (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01394                                          \{}
\DoxyCodeLine{01395   std::list<TFxP, std::allocator<TFxP>> list =}
\DoxyCodeLine{01396       m\_selection-\/>getFxs().toStdList();}
\DoxyCodeLine{01397   TFxCommand::connectNodesToXsheet(list, m\_xshHandle);}
\DoxyCodeLine{01398 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a2b3642342a4e8441f4e6952e277df7dc}\label{class_fx_schematic_scene_a2b3642342a4e8441f4e6952e277df7dc}} 
\index{FxSchematicScene@{FxSchematicScene}!onCurrentColumnChanged@{onCurrentColumnChanged}}
\index{onCurrentColumnChanged@{onCurrentColumnChanged}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onCurrentColumnChanged}{onCurrentColumnChanged}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Current\+Column\+Changed (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01595                                                        \{}
\DoxyCodeLine{01596   m\_app-\/>getCurrentColumn()-\/>setColumnIndex(index);}
\DoxyCodeLine{01597   m\_app-\/>getCurrentObject()-\/>setObjectId(TStageObjectId::ColumnId(index));}
\DoxyCodeLine{01598 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a5120b0449543012c3c9d02ef4659c6d8}\label{class_fx_schematic_scene_a5120b0449543012c3c9d02ef4659c6d8}} 
\index{FxSchematicScene@{FxSchematicScene}!onCurrentFxSwitched@{onCurrentFxSwitched}}
\index{onCurrentFxSwitched@{onCurrentFxSwitched}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onCurrentFxSwitched}{onCurrentFxSwitched}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Current\+Fx\+Switched (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01584                                            \{}
\DoxyCodeLine{01585   \textcolor{keywordflow}{if} (m\_currentFxNode) m\_currentFxNode-\/>setIsCurrentFxLinked(\textcolor{keyword}{false}, 0);}
\DoxyCodeLine{01586   \textcolor{keywordflow}{if} (m\_table.contains(m\_fxHandle-\/>getFx())) \{}
\DoxyCodeLine{01587     m\_currentFxNode = m\_table[m\_fxHandle-\/>getFx()];}
\DoxyCodeLine{01588     m\_currentFxNode-\/>setIsCurrentFxLinked(\textcolor{keyword}{true}, 0);}
\DoxyCodeLine{01589   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01590     m\_currentFxNode = 0;}
\DoxyCodeLine{01591 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a8aba890f3ec5792a533d305060dc6727}\label{class_fx_schematic_scene_a8aba890f3ec5792a533d305060dc6727}} 
\index{FxSchematicScene@{FxSchematicScene}!onDeleteFx@{onDeleteFx}}
\index{onDeleteFx@{onDeleteFx}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onDeleteFx}{onDeleteFx}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Delete\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01402                                   \{}
\DoxyCodeLine{01403   std::list<TFxP, std::allocator<TFxP>> fxList =}
\DoxyCodeLine{01404       m\_selection-\/>getFxs().toStdList();}
\DoxyCodeLine{01405   std::list<TFxCommand::Link> linkList = m\_selection-\/>getLinks().toStdList();}
\DoxyCodeLine{01406   std::list<int> columnIndexList = m\_selection-\/>getColumnIndexes().toStdList();}
\DoxyCodeLine{01407   TFxCommand::deleteSelection(fxList, linkList, columnIndexList, m\_xshHandle,}
\DoxyCodeLine{01408                               m\_fxHandle);}
\DoxyCodeLine{01409 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a8f27faf9bdf1fed1ecc7643d509dccc0}\label{class_fx_schematic_scene_a8f27faf9bdf1fed1ecc7643d509dccc0}} 
\index{FxSchematicScene@{FxSchematicScene}!onDisconnectFromXSheet@{onDisconnectFromXSheet}}
\index{onDisconnectFromXSheet@{onDisconnectFromXSheet}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onDisconnectFromXSheet}{onDisconnectFromXSheet}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Disconnect\+From\+XSheet (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01386                                               \{}
\DoxyCodeLine{01387   std::list<TFxP, std::allocator<TFxP>> list =}
\DoxyCodeLine{01388       m\_selection-\/>getFxs().toStdList();}
\DoxyCodeLine{01389   TFxCommand::disconnectNodesFromXsheet(list, m\_xshHandle);}
\DoxyCodeLine{01390 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_aeb96295f47222308fa8faed3e8e28d72}\label{class_fx_schematic_scene_aeb96295f47222308fa8faed3e8e28d72}} 
\index{FxSchematicScene@{FxSchematicScene}!onDuplicateFx@{onDuplicateFx}}
\index{onDuplicateFx@{onDuplicateFx}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onDuplicateFx}{onDuplicateFx}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Duplicate\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01413                                      \{}
\DoxyCodeLine{01414   QList<TFxP> fxs = m\_selection-\/>getFxs();}
\DoxyCodeLine{01415   \textcolor{keywordflow}{if} (fxs.empty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01416 }
\DoxyCodeLine{01417   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01418 }
\DoxyCodeLine{01419   \textcolor{keywordtype}{int} i, size = fxs.size();}
\DoxyCodeLine{01420   \textcolor{keywordflow}{for} (i = 0; i != size; ++i)}
\DoxyCodeLine{01421     TFxCommand::duplicateFx(fxs[i].getPointer(), m\_xshHandle, m\_fxHandle);}
\DoxyCodeLine{01422 }
\DoxyCodeLine{01423   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01424 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a21c808110d94438a1f45a7557bd9264f}\label{class_fx_schematic_scene_a21c808110d94438a1f45a7557bd9264f}} 
\index{FxSchematicScene@{FxSchematicScene}!onEditGroup@{onEditGroup}}
\index{onEditGroup@{onEditGroup}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onEditGroup}{onEditGroup}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Edit\+Group (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01840                                    \{}
\DoxyCodeLine{01841   \textcolor{keywordflow}{if} (m\_selection-\/>\mbox{\hyperlink{class_fx_selection_ab1b34e2737b20e29ba8832ba60ec18e7}{isEmpty}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01842   QList<TFxP> fxs = m\_selection-\/>getFxs();}
\DoxyCodeLine{01843   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01844   \textcolor{keywordflow}{for} (i = 0; i < fxs.size(); i++) \{}
\DoxyCodeLine{01845     \textcolor{keywordflow}{if} (fxs[i]-\/>getAttributes()-\/>isGrouped() \&\&}
\DoxyCodeLine{01846         !fxs[i]-\/>getAttributes()-\/>isGroupEditing()) \{}
\DoxyCodeLine{01847       fxs[i]-\/>getAttributes()-\/>editGroup();}
\DoxyCodeLine{01848       \mbox{\hyperlink{class_t_macro_fx}{TMacroFx}} *macro = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_macro_fx}{TMacroFx}} *\textcolor{keyword}{>}(fxs[i].getPointer());}
\DoxyCodeLine{01849       \textcolor{keywordflow}{if} (macro) \{}
\DoxyCodeLine{01850         std::vector<TFxP> macroFxs = macro-\/>getFxs();}
\DoxyCodeLine{01851         \textcolor{keywordtype}{int} j;}
\DoxyCodeLine{01852         \textcolor{keywordflow}{for} (j = 0; j < (int)macroFxs.size(); j++)}
\DoxyCodeLine{01853           macroFxs[j]-\/>getAttributes()-\/>editGroup();}
\DoxyCodeLine{01854       \}}
\DoxyCodeLine{01855     \}}
\DoxyCodeLine{01856   \}}
\DoxyCodeLine{01857   updateScene();}
\DoxyCodeLine{01858 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_ab2528ded946c61945cf095eb0ff4693d}\label{class_fx_schematic_scene_ab2528ded946c61945cf095eb0ff4693d}} 
\index{FxSchematicScene@{FxSchematicScene}!onExplodeMacroFx@{onExplodeMacroFx}}
\index{onExplodeMacroFx@{onExplodeMacroFx}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onExplodeMacroFx}{onExplodeMacroFx}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Explode\+Macro\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01450                                         \{}
\DoxyCodeLine{01451   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_macro_fx}{TMacroFx}} *macroFx = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_macro_fx}{TMacroFx}} *\textcolor{keyword}{>}(m\_fxHandle-\/>getFx()))}
\DoxyCodeLine{01452     TFxCommand::explodeMacroFx(macroFx, m\_app);}
\DoxyCodeLine{01453 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_ad26dc022170f120c936e7b0cb45ccb80}\label{class_fx_schematic_scene_ad26dc022170f120c936e7b0cb45ccb80}} 
\index{FxSchematicScene@{FxSchematicScene}!onFxNodeDoubleClicked@{onFxNodeDoubleClicked}}
\index{onFxNodeDoubleClicked@{onFxNodeDoubleClicked}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onFxNodeDoubleClicked}{onFxNodeDoubleClicked}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Fx\+Node\+Double\+Clicked (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01577                                              \{}
\DoxyCodeLine{01578   \textcolor{comment}{// emitting fxSettingsShouldBeSwitched}}
\DoxyCodeLine{01579   m\_fxHandle-\/>onFxNodeDoubleClicked();}
\DoxyCodeLine{01580 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a805a4c0bcff15c252d1144430489ffc0}\label{class_fx_schematic_scene_a805a4c0bcff15c252d1144430489ffc0}} 
\index{FxSchematicScene@{FxSchematicScene}!onIconifyNodesToggled@{onIconifyNodesToggled}}
\index{onIconifyNodesToggled@{onIconifyNodesToggled}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onIconifyNodesToggled}{onIconifyNodesToggled}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Iconify\+Nodes\+Toggled (\begin{DoxyParamCaption}\item[{bool}]{iconified }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01602                                                            \{}
\DoxyCodeLine{01603   m\_isNormalIconView      = !iconified;}
\DoxyCodeLine{01604   IconifyFxSchematicNodes = (iconified) ? 1 : 0;}
\DoxyCodeLine{01605   updateScene();}
\DoxyCodeLine{01606 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_ab2efea80503a1b367629544ccf53947a}\label{class_fx_schematic_scene_ab2efea80503a1b367629544ccf53947a}} 
\index{FxSchematicScene@{FxSchematicScene}!onInsertPaste@{onInsertPaste}}
\index{onInsertPaste@{onInsertPaste}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onInsertPaste}{onInsertPaste}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Insert\+Paste (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01784                                      \{}
\DoxyCodeLine{01785   \textcolor{keywordflow}{if} (!m\_selection-\/>\mbox{\hyperlink{class_fx_selection_a32038ce42adf69446e4cbdd6ac5777e2}{insertPasteSelection}}())}
\DoxyCodeLine{01786     DVGui::error(}
\DoxyCodeLine{01787         tr(\textcolor{stringliteral}{"{}Cannot Paste Insert a selection of unconnected FX nodes.\(\backslash\)nSelect "{}}}
\DoxyCodeLine{01788            \textcolor{stringliteral}{"{}FX nodes and related links before copying or cutting the selection "{}}}
\DoxyCodeLine{01789            \textcolor{stringliteral}{"{}you want to paste."{}}));}
\DoxyCodeLine{01790 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a67214336d7f4b7a555c6e459ec614782}\label{class_fx_schematic_scene_a67214336d7f4b7a555c6e459ec614782}} 
\index{FxSchematicScene@{FxSchematicScene}!onMacroFx@{onMacroFx}}
\index{onMacroFx@{onMacroFx}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onMacroFx}{onMacroFx}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Macro\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01443                                  \{}
\DoxyCodeLine{01444   TFxCommand::makeMacroFx(m\_selection-\/>getFxs().toVector().toStdVector(),}
\DoxyCodeLine{01445                           m\_app);}
\DoxyCodeLine{01446 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_ad3a158c733f0f2dc512246ed6eeaaa18}\label{class_fx_schematic_scene_ad3a158c733f0f2dc512246ed6eeaaa18}} 
\index{FxSchematicScene@{FxSchematicScene}!onNodeChangedSize@{onNodeChangedSize}}
\index{onNodeChangedSize@{onNodeChangedSize}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onNodeChangedSize}{onNodeChangedSize}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Node\+Changed\+Size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02180                                          \{}
\DoxyCodeLine{02181   \textcolor{keywordflow}{if} (resizingNodes) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02182   updateScene();}
\DoxyCodeLine{02183 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_ab7213e4de9e7565db8a94d9a01f2d24f}\label{class_fx_schematic_scene_ab7213e4de9e7565db8a94d9a01f2d24f}} 
\index{FxSchematicScene@{FxSchematicScene}!onOpenMacroFx@{onOpenMacroFx}}
\index{onOpenMacroFx@{onOpenMacroFx}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onOpenMacroFx}{onOpenMacroFx}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Open\+Macro\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01457                                      \{}
\DoxyCodeLine{01458   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_macro_fx}{TMacroFx}} *macroFx = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_macro_fx}{TMacroFx}} *\textcolor{keyword}{>}(m\_fxHandle-\/>getFx())) \{}
\DoxyCodeLine{01459     macroFx-\/>editMacro(\textcolor{keyword}{true});}
\DoxyCodeLine{01460     updateScene();}
\DoxyCodeLine{01461   \}}
\DoxyCodeLine{01462 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a0a23cffcfb1386d0a8858a622f1b7b3e}\label{class_fx_schematic_scene_a0a23cffcfb1386d0a8858a622f1b7b3e}} 
\index{FxSchematicScene@{FxSchematicScene}!onPreview@{onPreview}}
\index{onPreview@{onPreview}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onPreview}{onPreview}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Preview (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01484 \{ emit showPreview(m\_fxHandle-\/>getFx()); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_ab657732c9973c5b21a985a0d4725dcd3}\label{class_fx_schematic_scene_ab657732c9973c5b21a985a0d4725dcd3}} 
\index{FxSchematicScene@{FxSchematicScene}!onRemoveOutput@{onRemoveOutput}}
\index{onRemoveOutput@{onRemoveOutput}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onRemoveOutput}{onRemoveOutput}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Remove\+Output (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01472                                       \{}
\DoxyCodeLine{01473   TFxCommand::removeOutputFx(m\_fxHandle-\/>getFx(), m\_xshHandle, m\_fxHandle);}
\DoxyCodeLine{01474 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a02134a941c5cde424f6f7b7f92e9ed8b}\label{class_fx_schematic_scene_a02134a941c5cde424f6f7b7f92e9ed8b}} 
\index{FxSchematicScene@{FxSchematicScene}!onReplacePaste@{onReplacePaste}}
\index{onReplacePaste@{onReplacePaste}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onReplacePaste}{onReplacePaste}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Replace\+Paste (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01804                                       \{}
\DoxyCodeLine{01805   \textcolor{keywordflow}{if} (!m\_selection-\/>\mbox{\hyperlink{class_fx_selection_a6ce21840b0d13f3b7bd193a0b1d7e30b}{replacePasteSelection}}())}
\DoxyCodeLine{01806     DVGui::error(}
\DoxyCodeLine{01807         tr(\textcolor{stringliteral}{"{}Cannot Paste Replace a selection of unconnected FX nodes.\(\backslash\)nSelect "{}}}
\DoxyCodeLine{01808            \textcolor{stringliteral}{"{}FX nodes and related links before copying or cutting the selection "{}}}
\DoxyCodeLine{01809            \textcolor{stringliteral}{"{}you want to paste."{}}));}
\DoxyCodeLine{01810 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_adb9ca26723455cdc8ec02bf1c6d0125e}\label{class_fx_schematic_scene_adb9ca26723455cdc8ec02bf1c6d0125e}} 
\index{FxSchematicScene@{FxSchematicScene}!onSavePresetFx@{onSavePresetFx}}
\index{onSavePresetFx@{onSavePresetFx}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onSavePresetFx}{onSavePresetFx}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Save\+Preset\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01466                                       \{}
\DoxyCodeLine{01467   CommandManager::instance()-\/>getAction(\textcolor{stringliteral}{"{}MI\_SavePreset"{}})-\/>trigger();}
\DoxyCodeLine{01468 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a9eb1d87d955b9b3da3b5a7194c08e5df}\label{class_fx_schematic_scene_a9eb1d87d955b9b3da3b5a7194c08e5df}} 
\index{FxSchematicScene@{FxSchematicScene}!onSceneChanged@{onSceneChanged}}
\index{onSceneChanged@{onSceneChanged}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onSceneChanged}{onSceneChanged}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Scene\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01545                                       \{}
\DoxyCodeLine{01546   m\_app-\/>getCurrentScene()-\/>notifySceneChanged();}
\DoxyCodeLine{01547 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a7006895644623cdeee4d909788ea9b4f}\label{class_fx_schematic_scene_a7006895644623cdeee4d909788ea9b4f}} 
\index{FxSchematicScene@{FxSchematicScene}!onSelectionChanged@{onSelectionChanged}}
\index{onSelectionChanged@{onSelectionChanged}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onSelectionChanged}{onSelectionChanged}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Selection\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01150                                           \{}
\DoxyCodeLine{01151   m\_selection-\/>\mbox{\hyperlink{class_fx_selection_ace9ce83ec7716ddf3b18504330e49e8c}{selectNone}}();}
\DoxyCodeLine{01152   \textcolor{keywordtype}{int} i, size = m\_highlightedLinks.size();}
\DoxyCodeLine{01153   \textcolor{keywordflow}{for} (i = 0; i < size; i++) \{}
\DoxyCodeLine{01154     \mbox{\hyperlink{class_schematic_link}{SchematicLink}} *link = m\_highlightedLinks[i];}
\DoxyCodeLine{01155     link-\/>setHighlighted(\textcolor{keyword}{false});}
\DoxyCodeLine{01156     link-\/>update();}
\DoxyCodeLine{01157   \}}
\DoxyCodeLine{01158   m\_highlightedLinks.clear();}
\DoxyCodeLine{01159   QList<QGraphicsItem *> slcItems = selectedItems();}
\DoxyCodeLine{01160   QList<QGraphicsItem *>::iterator it;}
\DoxyCodeLine{01161   \textcolor{keywordflow}{for} (it = slcItems.begin(); it != slcItems.end(); it++) \{}
\DoxyCodeLine{01162     \mbox{\hyperlink{class_fx_schematic_node}{FxSchematicNode}} *node = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_fx_schematic_node}{FxSchematicNode}} *\textcolor{keyword}{>}(*it);}
\DoxyCodeLine{01163     \textcolor{keywordflow}{if} (node) \{}
\DoxyCodeLine{01164       \textcolor{keywordflow}{if} (!node-\/>isA(eGroupedFx)) \{}
\DoxyCodeLine{01165         \textcolor{keywordflow}{if} (node-\/>isA(eXSheetFx)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01166         m\_selection-\/>\mbox{\hyperlink{class_fx_selection_ad4718ac9c0bd4610e1ab0d2aa30ceb99}{select}}(node-\/>getFx());}
\DoxyCodeLine{01167         \textcolor{keywordflow}{if} (node-\/>isA(eColumnFx)) \{}
\DoxyCodeLine{01168           \mbox{\hyperlink{class_fx_schematic_column_node}{FxSchematicColumnNode}} *columnNode =}
\DoxyCodeLine{01169               \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_fx_schematic_column_node}{FxSchematicColumnNode}} *\textcolor{keyword}{>}(node);}
\DoxyCodeLine{01170           \textcolor{keywordflow}{if} (columnNode)}
\DoxyCodeLine{01171             m\_selection-\/>\mbox{\hyperlink{class_fx_selection_ad4718ac9c0bd4610e1ab0d2aa30ceb99}{select}}(columnNode-\/>getColumnIndex());}
\DoxyCodeLine{01172           \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01173             \mbox{\hyperlink{class_fx_schematic_palette_node}{FxSchematicPaletteNode}} *paletteNode =}
\DoxyCodeLine{01174                 \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_fx_schematic_palette_node}{FxSchematicPaletteNode}} *\textcolor{keyword}{>}(node);}
\DoxyCodeLine{01175             \textcolor{keywordflow}{if} (paletteNode) m\_selection-\/>\mbox{\hyperlink{class_fx_selection_ad4718ac9c0bd4610e1ab0d2aa30ceb99}{select}}(paletteNode-\/>getColumnIndex());}
\DoxyCodeLine{01176           \}}
\DoxyCodeLine{01177         \}}
\DoxyCodeLine{01178       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01179         \mbox{\hyperlink{class_fx_group_node}{FxGroupNode}} *groupNode = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_fx_group_node}{FxGroupNode}} *\textcolor{keyword}{>}(node);}
\DoxyCodeLine{01180         assert(groupNode);}
\DoxyCodeLine{01181         QList<TFxP> fxs = groupNode-\/>getGroupedFxs();}
\DoxyCodeLine{01182         \textcolor{keywordflow}{for} (i = 0; i < fxs.size(); i++) \{}
\DoxyCodeLine{01183           m\_selection-\/>\mbox{\hyperlink{class_fx_selection_ad4718ac9c0bd4610e1ab0d2aa30ceb99}{select}}(fxs[i].getPointer());}
\DoxyCodeLine{01184           \mbox{\hyperlink{class_t_level_column_fx}{TLevelColumnFx}} *colFx =}
\DoxyCodeLine{01185               \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_level_column_fx}{TLevelColumnFx}} *\textcolor{keyword}{>}(fxs[i].getPointer());}
\DoxyCodeLine{01186           \textcolor{keywordflow}{if} (colFx) \{}
\DoxyCodeLine{01187             \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_column}{TXshLevelColumn}} *column = colFx-\/>getColumn()) \{}
\DoxyCodeLine{01188               \textcolor{keywordtype}{int} colIndex = column-\/>getIndex();}
\DoxyCodeLine{01189               m\_selection-\/>\mbox{\hyperlink{class_fx_selection_ad4718ac9c0bd4610e1ab0d2aa30ceb99}{select}}(colIndex);}
\DoxyCodeLine{01190             \}}
\DoxyCodeLine{01191           \}}
\DoxyCodeLine{01192         \}}
\DoxyCodeLine{01193       \}}
\DoxyCodeLine{01194       highlightLinks(node, \textcolor{keyword}{true});}
\DoxyCodeLine{01195     \}}
\DoxyCodeLine{01196     \mbox{\hyperlink{class_schematic_link}{SchematicLink}} *link = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_schematic_link}{SchematicLink}} *\textcolor{keyword}{>}(*it);}
\DoxyCodeLine{01197     \textcolor{keywordflow}{if} (link) m\_selection-\/>\mbox{\hyperlink{class_fx_selection_ad4718ac9c0bd4610e1ab0d2aa30ceb99}{select}}(link);}
\DoxyCodeLine{01198   \}}
\DoxyCodeLine{01199   m\_selection-\/>makeCurrent();}
\DoxyCodeLine{01200   \mbox{\hyperlink{class_t_selection_handle}{TSelectionHandle}} *selHandle = TSelectionHandle::getCurrent();}
\DoxyCodeLine{01201   selHandle-\/>notifySelectionChanged();}
\DoxyCodeLine{01202 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_afcaee85e470349bd7508b4310cb947e2}\label{class_fx_schematic_scene_afcaee85e470349bd7508b4310cb947e2}} 
\index{FxSchematicScene@{FxSchematicScene}!onSelectionSwitched@{onSelectionSwitched}}
\index{onSelectionSwitched@{onSelectionSwitched}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onSelectionSwitched}{onSelectionSwitched}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Selection\+Switched (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_selection}{TSelection}} $\ast$}]{old\+Sel,  }\item[{\mbox{\hyperlink{class_t_selection}{TSelection}} $\ast$}]{new\+Sel }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01144                                                                \{}
\DoxyCodeLine{01145   \textcolor{keywordflow}{if} (m\_selection == oldSel \&\& m\_selection != newSel) clearSelection();}
\DoxyCodeLine{01146 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a780b11af0065c841faa838da155f40f9}\label{class_fx_schematic_scene_a780b11af0065c841faa838da155f40f9}} 
\index{FxSchematicScene@{FxSchematicScene}!onSwitchCurrentFx@{onSwitchCurrentFx}}
\index{onSwitchCurrentFx@{onSwitchCurrentFx}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onSwitchCurrentFx}{onSwitchCurrentFx}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Switch\+Current\+Fx (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_fx}{TFx}} $\ast$}]{fx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01551                                                 \{}
\DoxyCodeLine{01552   \textcolor{keywordflow}{if} (m\_fxHandle-\/>getFx() == fx) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01553   \textcolor{keywordflow}{if} (fx) \{}
\DoxyCodeLine{01554     \textcolor{comment}{// Forbid update of the swatch upon column switch. This could generate}}
\DoxyCodeLine{01555     \textcolor{comment}{// a further useless render...}}
\DoxyCodeLine{01556     \mbox{\hyperlink{class_swatch_viewer_a194e96e43dd523173b6c9f447817b62f}{SwatchViewer::suspendRendering}}(\textcolor{keyword}{true}, \textcolor{keyword}{false});}
\DoxyCodeLine{01557 }
\DoxyCodeLine{01558     \textcolor{keywordtype}{int} columnIndex = fx-\/>getReferenceColumnIndex();}
\DoxyCodeLine{01559     \textcolor{keywordflow}{if} (columnIndex >= 0) \{}
\DoxyCodeLine{01560       m\_columnHandle-\/>setColumnIndex(columnIndex);}
\DoxyCodeLine{01561       m\_app-\/>getCurrentObject()-\/>setObjectId(}
\DoxyCodeLine{01562           TStageObjectId::ColumnId(columnIndex));}
\DoxyCodeLine{01563     \}}
\DoxyCodeLine{01564 }
\DoxyCodeLine{01565     \mbox{\hyperlink{class_swatch_viewer_a194e96e43dd523173b6c9f447817b62f}{SwatchViewer::suspendRendering}}(\textcolor{keyword}{false});}
\DoxyCodeLine{01566 }
\DoxyCodeLine{01567     m\_fxHandle-\/>setFx(fx, \textcolor{keyword}{false});  \textcolor{comment}{// Setting the fx updates the swatch}}
\DoxyCodeLine{01568 }
\DoxyCodeLine{01569     emit editObject();}
\DoxyCodeLine{01570   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01571     m\_fxHandle-\/>setFx(0, \textcolor{keyword}{false});}
\DoxyCodeLine{01572   \}}
\DoxyCodeLine{01573 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a0fee69bdf9152ec47470a9dbb46ff9ec}\label{class_fx_schematic_scene_a0fee69bdf9152ec47470a9dbb46ff9ec}} 
\index{FxSchematicScene@{FxSchematicScene}!onUncacheFx@{onUncacheFx}}
\index{onUncacheFx@{onUncacheFx}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onUncacheFx}{onUncacheFx}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Uncache\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01492 \{ setEnableCache(\textcolor{keyword}{false}); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_af1b9a3f37f8ce871cd27b566a9cc3590}\label{class_fx_schematic_scene_af1b9a3f37f8ce871cd27b566a9cc3590}} 
\index{FxSchematicScene@{FxSchematicScene}!onUnlinkFx@{onUnlinkFx}}
\index{onUnlinkFx@{onUnlinkFx}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onUnlinkFx}{onUnlinkFx}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Unlink\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01428                                   \{}
\DoxyCodeLine{01429   QList<TFxP> fxs = m\_selection-\/>getFxs();}
\DoxyCodeLine{01430   \textcolor{keywordflow}{if} (fxs.empty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01431 }
\DoxyCodeLine{01432   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01433 }
\DoxyCodeLine{01434   \textcolor{keywordtype}{int} i, size = fxs.size();}
\DoxyCodeLine{01435   \textcolor{keywordflow}{for} (i = 0; i != size; ++i)}
\DoxyCodeLine{01436     TFxCommand::unlinkFx(fxs[i].getPointer(), m\_fxHandle, m\_xshHandle);}
\DoxyCodeLine{01437 }
\DoxyCodeLine{01438   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01439 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a526e512ee0bdb36582b5c71cf50b25c3}\label{class_fx_schematic_scene_a526e512ee0bdb36582b5c71cf50b25c3}} 
\index{FxSchematicScene@{FxSchematicScene}!onXsheetChanged@{onXsheetChanged}}
\index{onXsheetChanged@{onXsheetChanged}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{onXsheetChanged}{onXsheetChanged}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::on\+Xsheet\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01541 \{ m\_xshHandle-\/>notifyXsheetChanged(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a3013fdffb208521fcba25c64f8616914}\label{class_fx_schematic_scene_a3013fdffb208521fcba25c64f8616914}} 
\index{FxSchematicScene@{FxSchematicScene}!reorderScene@{reorderScene}}
\index{reorderScene@{reorderScene}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{reorderScene()}{reorderScene()}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::reorder\+Scene (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_schematic_scene}{Schematic\+Scene}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01206                                     \{}
\DoxyCodeLine{01207   \textcolor{keywordtype}{int} step = m\_gridDimension == eLarge ? 100 : 50;}
\DoxyCodeLine{01208   m\_placedFxs.clear();}
\DoxyCodeLine{01209   QPointF sceneCenter = sceneRect().center();}
\DoxyCodeLine{01210   \textcolor{keywordtype}{double} minY         = sceneCenter.y();}
\DoxyCodeLine{01211   \textcolor{keywordtype}{double} maxX         = sceneCenter.x();}
\DoxyCodeLine{01212   \textcolor{keywordtype}{double} y            = minY;}
\DoxyCodeLine{01213   \textcolor{keywordtype}{double} x            = maxX;}
\DoxyCodeLine{01214 }
\DoxyCodeLine{01215   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = m\_xshHandle-\/>getXsheet();}
\DoxyCodeLine{01216   \textcolor{keywordtype}{int} i        = 0;}
\DoxyCodeLine{01217 }
\DoxyCodeLine{01218   \mbox{\hyperlink{class_fx_dag}{FxDag}} *fxDag  = xsh-\/>\mbox{\hyperlink{class_t_xsheet_adc7c74cce346abf3699bb250eb17a9c2}{getFxDag}}();}
\DoxyCodeLine{01219   \mbox{\hyperlink{class_t_fx_set}{TFxSet}} *fxSet = fxDag-\/>getInternalFxs();}
\DoxyCodeLine{01220 }
\DoxyCodeLine{01221   \textcolor{comment}{//  Let's reset every position to nowhere first}}
\DoxyCodeLine{01222   fxDag-\/>getXsheetFx()-\/>getAttributes()-\/>setDagNodePos(TConst::nowhere);}
\DoxyCodeLine{01223 }
\DoxyCodeLine{01224   \textcolor{keywordflow}{for} (i = 0; i < fxDag-\/>getOutputFxCount(); i++) \{}
\DoxyCodeLine{01225     \mbox{\hyperlink{class_t_output_fx}{TOutputFx}} *fx = fxDag-\/>getOutputFx(i);}
\DoxyCodeLine{01226     \textcolor{keywordflow}{if} (!fx) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01227     fx-\/>getAttributes()-\/>setDagNodePos(TConst::nowhere);}
\DoxyCodeLine{01228   \}}
\DoxyCodeLine{01229 }
\DoxyCodeLine{01230   \textcolor{keywordflow}{for} (i = 0; i < xsh-\/>\mbox{\hyperlink{class_t_xsheet_a17464dc5617cf87a46f03e1a52d36cc1}{getColumnCount}}(); i++) \{}
\DoxyCodeLine{01231     \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(i);}
\DoxyCodeLine{01232     \mbox{\hyperlink{class_t_fx}{TFx}} *fx            = column-\/>getFx();}
\DoxyCodeLine{01233     \textcolor{keywordflow}{if} (!fx) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01234     fx-\/>getAttributes()-\/>setDagNodePos(TConst::nowhere);}
\DoxyCodeLine{01235   \}}
\DoxyCodeLine{01236 }
\DoxyCodeLine{01237   \textcolor{keywordflow}{for} (i = 0; i < fxSet-\/>getFxCount(); i++) \{}
\DoxyCodeLine{01238     \mbox{\hyperlink{class_t_fx}{TFx}} *fx = fxSet-\/>getFx(i);}
\DoxyCodeLine{01239     fx-\/>getAttributes()-\/>setDagNodePos(TConst::nowhere);}
\DoxyCodeLine{01240     \mbox{\hyperlink{class_t_macro_fx}{TMacroFx}} *macro = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_macro_fx}{TMacroFx}} *\textcolor{keyword}{>}(fx);}
\DoxyCodeLine{01241     \textcolor{keywordflow}{if} (macro \&\& macro-\/>isEditing()) \{}
\DoxyCodeLine{01242       std::vector<TFxP> fxs = macro-\/>getFxs();}
\DoxyCodeLine{01243       \textcolor{keywordtype}{int} j;}
\DoxyCodeLine{01244       \textcolor{keywordflow}{for} (j = 0; j < (int)fxs.size(); j++) \{}
\DoxyCodeLine{01245         fxs[j]-\/>getAttributes()-\/>setDagNodePos(TConst::nowhere);}
\DoxyCodeLine{01246       \}}
\DoxyCodeLine{01247     \}}
\DoxyCodeLine{01248   \}}
\DoxyCodeLine{01249 }
\DoxyCodeLine{01250   \textcolor{comment}{// Let's start placing them now}}
\DoxyCodeLine{01251   \textcolor{keywordflow}{for} (i = 0; i < xsh-\/>\mbox{\hyperlink{class_t_xsheet_a17464dc5617cf87a46f03e1a52d36cc1}{getColumnCount}}(); i++) \{}
\DoxyCodeLine{01252     \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(i);}
\DoxyCodeLine{01253     \mbox{\hyperlink{class_t_fx}{TFx}} *fx            = column-\/>getFx();}
\DoxyCodeLine{01254 }
\DoxyCodeLine{01255     \textcolor{keywordflow}{if} (column-\/>isEmpty() || !fx) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01256 }
\DoxyCodeLine{01257     \mbox{\hyperlink{class_t_zerary_column_fx}{TZeraryColumnFx}} *zfx = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_zerary_column_fx}{TZeraryColumnFx}} *\textcolor{keyword}{>}(fx);}
\DoxyCodeLine{01258     \textcolor{keywordflow}{if} (zfx \&\& (zfx-\/>getZeraryFx()-\/>getInputPortCount() > 0)) \{}
\DoxyCodeLine{01259       \mbox{\hyperlink{class_t_fx_port}{TFxPort}} *port = zfx-\/>getZeraryFx()-\/>getInputPort(0);}
\DoxyCodeLine{01260       \textcolor{keywordflow}{if} (port \&\& port-\/>getFx()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01261     \}}
\DoxyCodeLine{01262 }
\DoxyCodeLine{01263     \textcolor{keywordflow}{if} (zfx \&\& m\_placedFxs.contains(zfx-\/>getZeraryFx())) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01264 }
\DoxyCodeLine{01265     x = sceneCenter.x();}
\DoxyCodeLine{01266     placeNodeAndParents(fx, x, maxX, minY);}
\DoxyCodeLine{01267     y -\/= step;}
\DoxyCodeLine{01268     minY = std::min(y, minY);}
\DoxyCodeLine{01269   \}}
\DoxyCodeLine{01270 }
\DoxyCodeLine{01271   \textcolor{comment}{// remove retrolink}}
\DoxyCodeLine{01272   \textcolor{keywordflow}{for} (i = 0; i < xsh-\/>\mbox{\hyperlink{class_t_xsheet_a17464dc5617cf87a46f03e1a52d36cc1}{getColumnCount}}(); i++) \{}
\DoxyCodeLine{01273     \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(i);}
\DoxyCodeLine{01274     \mbox{\hyperlink{class_t_fx}{TFx}} *fx            = column-\/>getFx();}
\DoxyCodeLine{01275     \textcolor{keywordflow}{if} (column-\/>isEmpty() || !fx) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01276 }
\DoxyCodeLine{01277     \mbox{\hyperlink{class_t_zerary_column_fx}{TZeraryColumnFx}} *zfx = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_zerary_column_fx}{TZeraryColumnFx}} *\textcolor{keyword}{>}(fx);}
\DoxyCodeLine{01278     \textcolor{keywordflow}{if} (zfx \&\& m\_placedFxs.contains(zfx-\/>getZeraryFx())) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01279 }
\DoxyCodeLine{01280     \textcolor{keywordflow}{if} (zfx \&\& (zfx-\/>getZeraryFx()-\/>getInputPortCount() > 0)) \{}
\DoxyCodeLine{01281       \mbox{\hyperlink{class_t_fx_port}{TFxPort}} *port = zfx-\/>getZeraryFx()-\/>getInputPort(0);}
\DoxyCodeLine{01282       \textcolor{keywordflow}{if} (port \&\& port-\/>getFx()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01283     \}}
\DoxyCodeLine{01284 }
\DoxyCodeLine{01285     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < fx-\/>getOutputConnectionCount(); j++) \{}
\DoxyCodeLine{01286       \mbox{\hyperlink{class_t_fx}{TFx}} *outFx = fx-\/>getOutputConnection(j)-\/>getOwnerFx();}
\DoxyCodeLine{01287       removeRetroLinks(outFx, maxX);}
\DoxyCodeLine{01288     \}}
\DoxyCodeLine{01289   \}}
\DoxyCodeLine{01290 }
\DoxyCodeLine{01291   \textcolor{keywordtype}{double} middleY = (sceneCenter.y() + minY + step) * 0.5;}
\DoxyCodeLine{01292   placeNodeAndParents(xsh-\/>\mbox{\hyperlink{class_t_xsheet_adc7c74cce346abf3699bb250eb17a9c2}{getFxDag}}()-\/>getXsheetFx(), maxX, maxX, middleY);}
\DoxyCodeLine{01293   y -\/= step;}
\DoxyCodeLine{01294   minY = std::min(y, minY);}
\DoxyCodeLine{01295 }
\DoxyCodeLine{01296   \textcolor{keywordflow}{for} (i = 0; i < fxSet-\/>getFxCount(); i++) \{}
\DoxyCodeLine{01297     \mbox{\hyperlink{class_t_fx}{TFx}} *fx = fxSet-\/>getFx(i);}
\DoxyCodeLine{01298     \textcolor{keywordflow}{if} (m\_placedFxs.contains(fx)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01299 }
\DoxyCodeLine{01300     placeNodeAndParents(fx, (sceneCenter.x() + 120), maxX, minY);}
\DoxyCodeLine{01301     y -\/= step;}
\DoxyCodeLine{01302     minY = std::min(y, minY);}
\DoxyCodeLine{01303   \}}
\DoxyCodeLine{01304   updateScene();}
\DoxyCodeLine{01305 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_aefa5bdfdf2a92ab0040947019436f81a}\label{class_fx_schematic_scene_aefa5bdfdf2a92ab0040947019436f81a}} 
\index{FxSchematicScene@{FxSchematicScene}!resizeNodes@{resizeNodes}}
\index{resizeNodes@{resizeNodes}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{resizeNodes()}{resizeNodes()}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::resize\+Nodes (\begin{DoxyParamCaption}\item[{bool}]{maximized\+Node }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02135                                                      \{}
\DoxyCodeLine{02136   resizingNodes = \textcolor{keyword}{true};}
\DoxyCodeLine{02137 }
\DoxyCodeLine{02138   \textcolor{comment}{// resize nodes}}
\DoxyCodeLine{02139   m\_gridDimension = maximizedNode ? eLarge : eSmall;}
\DoxyCodeLine{02140   m\_xshHandle-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_adc7c74cce346abf3699bb250eb17a9c2}{getFxDag}}()-\/>setDagGridDimension(m\_gridDimension);}
\DoxyCodeLine{02141   QMap<TFx *, FxSchematicNode *>::iterator it1;}
\DoxyCodeLine{02142   \textcolor{keywordflow}{for} (it1 = m\_table.begin(); it1 != m\_table.end(); it1++) \{}
\DoxyCodeLine{02143     \textcolor{keywordflow}{if} (!it1.value()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02144     it1.value()-\/>resize(maximizedNode);}
\DoxyCodeLine{02145     \mbox{\hyperlink{class_t_fx}{TFx}} *fx = it1.value()-\/>getFx();}
\DoxyCodeLine{02146     updatePositionOnResize(fx, maximizedNode);}
\DoxyCodeLine{02147   \}}
\DoxyCodeLine{02148   QMap<int, FxGroupNode *>::iterator it2;}
\DoxyCodeLine{02149   \textcolor{keywordflow}{for} (it2 = m\_groupedTable.begin(); it2 != m\_groupedTable.end(); it2++) \{}
\DoxyCodeLine{02150     \textcolor{keywordflow}{if} (!it2.value()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02151     it2.value()-\/>resize(maximizedNode);}
\DoxyCodeLine{02152     QList<TFxP> groupedFxs = it2.value()-\/>getGroupedFxs();}
\DoxyCodeLine{02153     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < groupedFxs.size(); i++)}
\DoxyCodeLine{02154       updatePositionOnResize(groupedFxs[i].getPointer(), maximizedNode);}
\DoxyCodeLine{02155   \}}
\DoxyCodeLine{02156 }
\DoxyCodeLine{02157   QMap<TMacroFx *, FxSchematicMacroEditor *>::iterator it3;}
\DoxyCodeLine{02158   \textcolor{keywordflow}{for} (it3 = m\_macroEditorTable.begin(); it3 != m\_macroEditorTable.end();}
\DoxyCodeLine{02159        it3++) \{}
\DoxyCodeLine{02160     \textcolor{keywordflow}{if} (!it3.value()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02161     it3.value()-\/>resizeNodes(maximizedNode);}
\DoxyCodeLine{02162   \}}
\DoxyCodeLine{02163   updateScene();}
\DoxyCodeLine{02164 }
\DoxyCodeLine{02165   resizingNodes = \textcolor{keyword}{false};}
\DoxyCodeLine{02166 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a230765d87ed8113a646c83658bca2f79}\label{class_fx_schematic_scene_a230765d87ed8113a646c83658bca2f79}} 
\index{FxSchematicScene@{FxSchematicScene}!selectNodes@{selectNodes}}
\index{selectNodes@{selectNodes}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{selectNodes()}{selectNodes()}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::select\+Nodes (\begin{DoxyParamCaption}\item[{QList$<$ \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} $>$ \&}]{fxs }\end{DoxyParamCaption})}

in order to select nods after pasting the copied fx nodes from \mbox{\hyperlink{class_fx_selection}{Fx\+Selection}} 
\begin{DoxyCode}{0}
\DoxyCodeLine{02040                                                    \{}
\DoxyCodeLine{02041   clearSelection();}
\DoxyCodeLine{02042   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)fxs.size(); i++) \{}
\DoxyCodeLine{02043     \mbox{\hyperlink{class_t_fx}{TFx}} *tempFx = fxs[i].getPointer();}
\DoxyCodeLine{02044 }
\DoxyCodeLine{02045     QMap<TFx *, FxSchematicNode *>::iterator it;}
\DoxyCodeLine{02046     it = m\_table.find(tempFx);}
\DoxyCodeLine{02047     \textcolor{keywordflow}{if} (it == m\_table.end()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02048 }
\DoxyCodeLine{02049     it.value()-\/>setSelected(\textcolor{keyword}{true});}
\DoxyCodeLine{02050   \}}
\DoxyCodeLine{02051   update();}
\DoxyCodeLine{02052 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00185}{Fx\+Selection\+::paste\+Selection()}}.

\mbox{\Hypertarget{class_fx_schematic_scene_ad6caa543e72c33f9b9919c5ac5c9628c}\label{class_fx_schematic_scene_ad6caa543e72c33f9b9919c5ac5c9628c}} 
\index{FxSchematicScene@{FxSchematicScene}!setApplication@{setApplication}}
\index{setApplication@{setApplication}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{setApplication()}{setApplication()}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::set\+Application (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_application}{TApplication}} $\ast$}]{app }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00350                                                        \{}
\DoxyCodeLine{00351   m\_app = app;}
\DoxyCodeLine{00352 }
\DoxyCodeLine{00353   m\_xshHandle    = app-\/>getCurrentXsheet();}
\DoxyCodeLine{00354   m\_fxHandle     = app-\/>getCurrentFx();}
\DoxyCodeLine{00355   m\_frameHandle  = app-\/>getCurrentFrame();}
\DoxyCodeLine{00356   m\_columnHandle = app-\/>getCurrentColumn();}
\DoxyCodeLine{00357 }
\DoxyCodeLine{00358   \textcolor{keywordflow}{if} (m\_fxHandle)}
\DoxyCodeLine{00359     connect(m\_fxHandle, SIGNAL(fxSwitched()), \textcolor{keyword}{this},}
\DoxyCodeLine{00360             SLOT(onCurrentFxSwitched()));}
\DoxyCodeLine{00361 }
\DoxyCodeLine{00362   m\_addFxContextMenu.setApplication(app);}
\DoxyCodeLine{00363 }
\DoxyCodeLine{00364   m\_selection-\/>setXsheetHandle(m\_xshHandle);}
\DoxyCodeLine{00365   m\_selection-\/>setFxHandle(m\_fxHandle);}
\DoxyCodeLine{00366 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a718e7f295f1ae4e554422d59f41fa9e2}\label{class_fx_schematic_scene_a718e7f295f1ae4e554422d59f41fa9e2}} 
\index{FxSchematicScene@{FxSchematicScene}!simulateDisconnectSelection@{simulateDisconnectSelection}}
\index{simulateDisconnectSelection@{simulateDisconnectSelection}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{simulateDisconnectSelection()}{simulateDisconnectSelection()}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::simulate\+Disconnect\+Selection (\begin{DoxyParamCaption}\item[{bool}]{disconnect }\end{DoxyParamCaption})}

Disconnects or connects selected item from the rest of the graph. Selection must be a connected subgraph. If {\bfseries{disconnect}} is true, the selection is disconnected; connected otherwise. 
\begin{DoxyCode}{0}
\DoxyCodeLine{01922                                                                   \{}
\DoxyCodeLine{01923   \textcolor{keywordflow}{if} (disconnect) \{}
\DoxyCodeLine{01924     \textcolor{keywordflow}{if} (m\_selection-\/>\mbox{\hyperlink{class_fx_selection_ab1b34e2737b20e29ba8832ba60ec18e7}{isEmpty}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01925     QList<TFxP> selectedFxs = m\_selection-\/>getFxs();}
\DoxyCodeLine{01926     \textcolor{keywordflow}{if} (selectedFxs.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01927     QMap<TFx *, bool> visitedFxs;}
\DoxyCodeLine{01928     \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01929     \textcolor{keywordflow}{for} (i = 0; i < selectedFxs.size(); i++)}
\DoxyCodeLine{01930       visitedFxs[selectedFxs[i].getPointer()] = \textcolor{keyword}{false};}
\DoxyCodeLine{01931 }
\DoxyCodeLine{01932     \mbox{\hyperlink{class_t_fx}{TFx}} *inputFx = 0, *outputFx = 0;}
\DoxyCodeLine{01933     findBoundariesFxs(inputFx, outputFx, visitedFxs);}
\DoxyCodeLine{01934     \mbox{\hyperlink{class_fx_schematic_node}{FxSchematicNode}} *inputNode  = m\_table[inputFx];}
\DoxyCodeLine{01935     \mbox{\hyperlink{class_fx_schematic_node}{FxSchematicNode}} *outputNode = m\_table[outputFx];}
\DoxyCodeLine{01936     assert(inputNode \&\& outputNode);}
\DoxyCodeLine{01937 }
\DoxyCodeLine{01938     \mbox{\hyperlink{class_fx_schematic_port}{FxSchematicPort}} *inputPort = 0, *outputPort = 0;}
\DoxyCodeLine{01939     \mbox{\hyperlink{class_schematic_port}{SchematicPort}} *otherInputPort = 0;}
\DoxyCodeLine{01940     QList<SchematicPort *> otherOutputPorts;}
\DoxyCodeLine{01941     \textcolor{keywordflow}{if} (inputNode-\/>getInputPortCount() > 0) \{}
\DoxyCodeLine{01942       inputPort = inputNode-\/>getInputPort(0);}
\DoxyCodeLine{01943       \textcolor{keywordflow}{if} (inputPort) \{}
\DoxyCodeLine{01944         \mbox{\hyperlink{class_schematic_link}{SchematicLink}} *inputLink = inputPort-\/>\mbox{\hyperlink{class_schematic_port_a48b9692e98159adbd9adf772246d8363}{getLink}}(0);}
\DoxyCodeLine{01945         \textcolor{keywordflow}{if} (inputLink \&\& !m\_connectionLinks.isAnInputLink(inputLink)) \{}
\DoxyCodeLine{01946           \textcolor{keywordflow}{if} (!m\_disconnectionLinks.isAnInputLink(inputLink))}
\DoxyCodeLine{01947             m\_disconnectionLinks.addInputLink(inputLink);}
\DoxyCodeLine{01948           otherInputPort = inputLink-\/>\mbox{\hyperlink{class_schematic_link_ad634461aec8ce9f70d8f97f9d91ff582}{getOtherPort}}(inputPort);}
\DoxyCodeLine{01949         \}}
\DoxyCodeLine{01950       \}}
\DoxyCodeLine{01951     \}}
\DoxyCodeLine{01952     outputPort = outputNode-\/>getOutputPort();}
\DoxyCodeLine{01953     \textcolor{keywordflow}{if} (outputPort) \{}
\DoxyCodeLine{01954       \textcolor{keywordflow}{for} (i = 0; i < outputPort-\/>getLinkCount(); i++) \{}
\DoxyCodeLine{01955         \mbox{\hyperlink{class_schematic_link}{SchematicLink}} *outputLink = outputPort-\/>getLink(i);}
\DoxyCodeLine{01956         \textcolor{keywordflow}{if} (outputLink \&\& !m\_connectionLinks.isAnOutputLink(outputLink)) \{}
\DoxyCodeLine{01957           \textcolor{keywordflow}{if} (!m\_disconnectionLinks.isAnOutputLink(outputLink))}
\DoxyCodeLine{01958             m\_disconnectionLinks.addOutputLink(outputLink);}
\DoxyCodeLine{01959           otherOutputPorts.push\_back(outputLink-\/>\mbox{\hyperlink{class_schematic_link_ad634461aec8ce9f70d8f97f9d91ff582}{getOtherPort}}(outputPort));}
\DoxyCodeLine{01960         \}}
\DoxyCodeLine{01961       \}}
\DoxyCodeLine{01962     \}}
\DoxyCodeLine{01963     m\_disconnectionLinks.hideInputLinks();}
\DoxyCodeLine{01964     m\_disconnectionLinks.hideOutputLinks();}
\DoxyCodeLine{01965 }
\DoxyCodeLine{01966     \textcolor{keywordflow}{if} (otherInputPort) \{}
\DoxyCodeLine{01967       \textcolor{keywordflow}{for} (i = 0; i < otherOutputPorts.size(); i++)}
\DoxyCodeLine{01968         m\_disconnectionLinks.addBridgeLink(}
\DoxyCodeLine{01969             otherOutputPorts[i]-\/>makeLink(otherInputPort));}
\DoxyCodeLine{01970     \}}
\DoxyCodeLine{01971   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01972     m\_disconnectionLinks.showInputLinks();}
\DoxyCodeLine{01973     m\_disconnectionLinks.showOutputLinks();}
\DoxyCodeLine{01974     m\_disconnectionLinks.removeInputLinks();}
\DoxyCodeLine{01975     m\_disconnectionLinks.removeOutputLinks();}
\DoxyCodeLine{01976     m\_disconnectionLinks.removeBridgeLinks(\textcolor{keyword}{true});}
\DoxyCodeLine{01977   \}}
\DoxyCodeLine{01978 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00348}{Schematic\+Port\+::get\+Link()}}, \mbox{\hyperlink{l00553}{Schematic\+Link\+::get\+Other\+Port()}}, and \mbox{\hyperlink{l00054}{Fx\+Selection\+::is\+Empty()}}.

\mbox{\Hypertarget{class_fx_schematic_scene_a4f7b513ad8e17edc43d566105ff67f6e}\label{class_fx_schematic_scene_a4f7b513ad8e17edc43d566105ff67f6e}} 
\index{FxSchematicScene@{FxSchematicScene}!toggleNormalIconView@{toggleNormalIconView}}
\index{toggleNormalIconView@{toggleNormalIconView}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{toggleNormalIconView()}{toggleNormalIconView()}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::toggle\+Normal\+Icon\+View (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00151 \{ m\_isNormalIconView = !m\_isNormalIconView; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a179a8bca1d88cd7638b52dffb85f406c}\label{class_fx_schematic_scene_a179a8bca1d88cd7638b52dffb85f406c}} 
\index{FxSchematicScene@{FxSchematicScene}!updateNestedGroupEditors@{updateNestedGroupEditors}}
\index{updateNestedGroupEditors@{updateNestedGroupEditors}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{updateNestedGroupEditors()}{updateNestedGroupEditors()}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::update\+Nested\+Group\+Editors (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_fx_schematic_node}{Fx\+Schematic\+Node}} $\ast$}]{node,  }\item[{const QPointF \&}]{new\+Pos }\end{DoxyParamCaption})}

Updates all Group Editors containing fx. Each fx is only in one group, but each group can contains other groups. All nested Groups must be updated. 
\begin{DoxyCode}{0}
\DoxyCodeLine{02057                                                                        \{}
\DoxyCodeLine{02058   \textcolor{keywordflow}{if} (!node) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02059   QStack<int> groupIdStack = node-\/>getFx()-\/>getAttributes()-\/>getGroupIdStack();}
\DoxyCodeLine{02060   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{02061   QRectF rect;}
\DoxyCodeLine{02062   \textcolor{keywordflow}{for} (i = 0; i < groupIdStack.size(); i++) \{}
\DoxyCodeLine{02063     \textcolor{keywordflow}{if} (m\_groupEditorTable.contains(groupIdStack[i])) \{}
\DoxyCodeLine{02064       QRectF app = m\_groupEditorTable[groupIdStack[i]]-\/>sceneBoundingRect();}
\DoxyCodeLine{02065       \textcolor{keywordflow}{if} (rect.isEmpty())}
\DoxyCodeLine{02066         rect = app;}
\DoxyCodeLine{02067       \textcolor{keywordflow}{else}}
\DoxyCodeLine{02068 \textcolor{preprocessor}{\#if QT\_VERSION >= 0x050000}}
\DoxyCodeLine{02069         rect = rect.united(app);}
\DoxyCodeLine{02070 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02071         rect = rect.unite(app);}
\DoxyCodeLine{02072 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02073     \}}
\DoxyCodeLine{02074   \}}
\DoxyCodeLine{02075   QMap<TMacroFx *, FxSchematicMacroEditor *>::iterator it;}
\DoxyCodeLine{02076   \textcolor{keywordflow}{for} (it = m\_macroEditorTable.begin(); it != m\_macroEditorTable.end(); it++) \{}
\DoxyCodeLine{02077     \textcolor{keywordflow}{if} (it.value()-\/>contains(node)) \{}
\DoxyCodeLine{02078       QRectF app = it.value()-\/>sceneBoundingRect();}
\DoxyCodeLine{02079       \textcolor{keywordflow}{if} (rect.isEmpty())}
\DoxyCodeLine{02080         rect = app;}
\DoxyCodeLine{02081       \textcolor{keywordflow}{else}}
\DoxyCodeLine{02082 \textcolor{preprocessor}{\#if QT\_VERSION >= 0x050000}}
\DoxyCodeLine{02083         rect = rect.united(app);}
\DoxyCodeLine{02084 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02085         rect = rect.unite(app);}
\DoxyCodeLine{02086 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02087     \}}
\DoxyCodeLine{02088   \}}
\DoxyCodeLine{02089   node-\/>setPos(newPos);}
\DoxyCodeLine{02090   \textcolor{keywordflow}{for} (i = 0; i < groupIdStack.size(); i++) \{}
\DoxyCodeLine{02091     \textcolor{keywordflow}{if} (!m\_groupEditorTable.contains(groupIdStack[i])) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02092 \textcolor{preprocessor}{\#if QT\_VERSION >= 0x050000}}
\DoxyCodeLine{02093     rect =}
\DoxyCodeLine{02094         rect.united(m\_groupEditorTable[groupIdStack[i]]-\/>sceneBoundingRect());}
\DoxyCodeLine{02095 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02096     rect = rect.unite(m\_groupEditorTable[groupIdStack[i]]-\/>sceneBoundingRect());}
\DoxyCodeLine{02097 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02098     QRectF app = m\_groupEditorTable[groupIdStack[i]]-\/>boundingSceneRect();}
\DoxyCodeLine{02099     \textcolor{keywordflow}{if} (m\_groupEditorTable[groupIdStack[i]]-\/>scenePos() != app.topLeft())}
\DoxyCodeLine{02100       m\_groupEditorTable[groupIdStack[i]]-\/>setPos(app.topLeft());}
\DoxyCodeLine{02101   \}}
\DoxyCodeLine{02102   \textcolor{keywordflow}{for} (it = m\_macroEditorTable.begin(); it != m\_macroEditorTable.end(); it++) \{}
\DoxyCodeLine{02103     \mbox{\hyperlink{class_fx_schematic_macro_editor}{FxSchematicMacroEditor}} *editor = it.value();}
\DoxyCodeLine{02104     \textcolor{keywordflow}{if} (editor-\/>contains(node)) \{}
\DoxyCodeLine{02105       QRectF app = editor-\/>sceneBoundingRect();}
\DoxyCodeLine{02106 \textcolor{preprocessor}{\#if QT\_VERSION >= 0x050000}}
\DoxyCodeLine{02107       rect = rect.united(app);}
\DoxyCodeLine{02108 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02109       rect = rect.unite(app);}
\DoxyCodeLine{02110 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02111       app = editor-\/>boundingSceneRect();}
\DoxyCodeLine{02112       \textcolor{keywordflow}{if} (editor-\/>scenePos() != app.topLeft()) editor-\/>setPos(app.topLeft());}
\DoxyCodeLine{02113     \}}
\DoxyCodeLine{02114   \}}
\DoxyCodeLine{02115   update(rect);}
\DoxyCodeLine{02116 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_schematic_scene_a64ed07d8d24e3185235dc1f7808441b7}\label{class_fx_schematic_scene_a64ed07d8d24e3185235dc1f7808441b7}} 
\index{FxSchematicScene@{FxSchematicScene}!updateScene@{updateScene}}
\index{updateScene@{updateScene}!FxSchematicScene@{FxSchematicScene}}
\doxysubsubsection{\texorpdfstring{updateScene()}{updateScene()}}
{\footnotesize\ttfamily void Fx\+Schematic\+Scene\+::update\+Scene (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_schematic_scene}{Schematic\+Scene}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00370                                    \{}
\DoxyCodeLine{00371   \textcolor{keywordflow}{if} (updatingScene) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00372   updatingScene = \textcolor{keyword}{true};}
\DoxyCodeLine{00373   \textcolor{keywordflow}{if} (!views().empty()) m\_disconnectionLinks.clearAll();}
\DoxyCodeLine{00374   m\_connectionLinks.clearAll();}
\DoxyCodeLine{00375   m\_selectionOldPos.clear();}
\DoxyCodeLine{00376 }
\DoxyCodeLine{00377   clearSelection();}
\DoxyCodeLine{00378   \mbox{\hyperlink{class_schematic_scene_a915e237d443b0312ccc2b46120d1a46b}{clearAllItems}}();}
\DoxyCodeLine{00379 }
\DoxyCodeLine{00380   m\_table.clear();}
\DoxyCodeLine{00381   m\_groupedTable.clear();}
\DoxyCodeLine{00382   m\_groupEditorTable.clear();}
\DoxyCodeLine{00383   m\_macroEditorTable.clear();}
\DoxyCodeLine{00384 }
\DoxyCodeLine{00385   m\_currentFxNode = 0;}
\DoxyCodeLine{00386 }
\DoxyCodeLine{00387   \textcolor{comment}{// GroupId-\/>Fx}}
\DoxyCodeLine{00388   QMap<int, QList<TFxP>> groupedFxs;}
\DoxyCodeLine{00389   QMap<int, QList<SchematicNode *>> editedGroup;}
\DoxyCodeLine{00390   QMap<TMacroFx *, QList<SchematicNode *>> editedMacro;}
\DoxyCodeLine{00391 }
\DoxyCodeLine{00392   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh    = m\_xshHandle-\/>getXsheet();}
\DoxyCodeLine{00393   m\_gridDimension = xsh-\/>\mbox{\hyperlink{class_t_xsheet_adc7c74cce346abf3699bb250eb17a9c2}{getFxDag}}()-\/>getDagGridDimension();}
\DoxyCodeLine{00394   \mbox{\hyperlink{class_t_fx_set}{TFxSet}} *fxSet   = xsh-\/>\mbox{\hyperlink{class_t_xsheet_adc7c74cce346abf3699bb250eb17a9c2}{getFxDag}}()-\/>getInternalFxs();}
\DoxyCodeLine{00395   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00396 }
\DoxyCodeLine{00397   \mbox{\hyperlink{class_fx_dag}{FxDag}} *fxDag = xsh-\/>\mbox{\hyperlink{class_t_xsheet_adc7c74cce346abf3699bb250eb17a9c2}{getFxDag}}();}
\DoxyCodeLine{00398   \textcolor{comment}{// Add XSheetFX node}}
\DoxyCodeLine{00399   addFxSchematicNode(fxDag-\/>getXsheetFx());}
\DoxyCodeLine{00400 }
\DoxyCodeLine{00401   \textcolor{comment}{// Add outputFx nodes}}
\DoxyCodeLine{00402   \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{00403   \textcolor{keywordflow}{for} (k = 0; k < fxDag-\/>getOutputFxCount(); k++) \{}
\DoxyCodeLine{00404     \mbox{\hyperlink{class_t_output_fx}{TOutputFx}} *fx = fxDag-\/>getOutputFx(k);}
\DoxyCodeLine{00405     \textcolor{keywordflow}{if} (fx-\/>getAttributes()-\/>isGrouped() \&\&}
\DoxyCodeLine{00406         !fx-\/>getAttributes()-\/>isGroupEditing()) \{}
\DoxyCodeLine{00407       groupedFxs[fx-\/>getAttributes()-\/>getGroupId()].push\_back(fx);}
\DoxyCodeLine{00408       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00409     \}}
\DoxyCodeLine{00410     \mbox{\hyperlink{class_schematic_node}{SchematicNode}} *node = addFxSchematicNode(fx);}
\DoxyCodeLine{00411     \textcolor{keywordflow}{if} (fx-\/>getAttributes()-\/>isGrouped())}
\DoxyCodeLine{00412       editedGroup[fx-\/>getAttributes()-\/>getEditingGroupId()].append(node);}
\DoxyCodeLine{00413   \}}
\DoxyCodeLine{00414 }
\DoxyCodeLine{00415   \textcolor{comment}{// Add columnFx and zeraryFx nodes}}
\DoxyCodeLine{00416   \textcolor{keywordflow}{for} (i = 0; i < xsh-\/>\mbox{\hyperlink{class_t_xsheet_a17464dc5617cf87a46f03e1a52d36cc1}{getColumnCount}}(); i++) \{}
\DoxyCodeLine{00417     \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(i);}
\DoxyCodeLine{00418     \mbox{\hyperlink{class_t_fx}{TFx}} *fx            = 0;}
\DoxyCodeLine{00419     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_column}{TXshLevelColumn}} *lc = column-\/>getLevelColumn())}
\DoxyCodeLine{00420       fx = lc-\/>getLevelColumnFx();}
\DoxyCodeLine{00421     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_palette_column}{TXshPaletteColumn}} *pc = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_xsh_palette_column}{TXshPaletteColumn}} *\textcolor{keyword}{>}(column))}
\DoxyCodeLine{00422       fx = pc-\/>getPaletteColumnFx();}
\DoxyCodeLine{00423     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_zerary_fx_column}{TXshZeraryFxColumn}} *zc =}
\DoxyCodeLine{00424                  \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_xsh_zerary_fx_column}{TXshZeraryFxColumn}} *\textcolor{keyword}{>}(column))}
\DoxyCodeLine{00425       fx = zc-\/>getZeraryColumnFx();}
\DoxyCodeLine{00426     \textcolor{keywordflow}{if} (!fx) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00427 }
\DoxyCodeLine{00428     \textcolor{keywordflow}{if} (fx-\/>getAttributes()-\/>isGrouped() \&\&}
\DoxyCodeLine{00429         !fx-\/>getAttributes()-\/>isGroupEditing()) \{}
\DoxyCodeLine{00430       groupedFxs[fx-\/>getAttributes()-\/>getGroupId()].push\_back(fx);}
\DoxyCodeLine{00431       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00432     \}}
\DoxyCodeLine{00433     \textcolor{keywordflow}{if} (column-\/>isEmpty() \&\& fx \&\& fx-\/>getOutputConnectionCount() == 0)}
\DoxyCodeLine{00434       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00435     \mbox{\hyperlink{class_schematic_node}{SchematicNode}} *node = addFxSchematicNode(fx);}
\DoxyCodeLine{00436     \textcolor{keywordflow}{if} (fx-\/>getAttributes()-\/>isGrouped())}
\DoxyCodeLine{00437       editedGroup[fx-\/>getAttributes()-\/>getEditingGroupId()].append(node);}
\DoxyCodeLine{00438   \}}
\DoxyCodeLine{00439 }
\DoxyCodeLine{00440   \textcolor{comment}{// Add normalFx}}
\DoxyCodeLine{00441   QList<TFx *> fxsToBePlaced;}
\DoxyCodeLine{00442   \textcolor{keywordflow}{for} (i = 0; i < fxSet-\/>getFxCount(); i++) \{}
\DoxyCodeLine{00443     \mbox{\hyperlink{class_t_fx}{TFx}} *fx         = fxSet-\/>getFx(i);}
\DoxyCodeLine{00444     \mbox{\hyperlink{class_t_macro_fx}{TMacroFx}} *macro = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_macro_fx}{TMacroFx}} *\textcolor{keyword}{>}(fx);}
\DoxyCodeLine{00445     \textcolor{keywordflow}{if} (fx-\/>getAttributes()-\/>isGrouped() \&\&}
\DoxyCodeLine{00446         !fx-\/>getAttributes()-\/>isGroupEditing()) \{}
\DoxyCodeLine{00447       groupedFxs[fx-\/>getAttributes()-\/>getGroupId()].push\_back(fx);}
\DoxyCodeLine{00448       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00449     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (macro \&\& macro-\/>isEditing()) \{}
\DoxyCodeLine{00450       std::vector<TFxP> fxs = macro-\/>getFxs();}
\DoxyCodeLine{00451       \textcolor{keywordtype}{int} j;}
\DoxyCodeLine{00452       \textcolor{keywordflow}{for} (j = 0; j < (int)fxs.size(); j++) \{}
\DoxyCodeLine{00453         \mbox{\hyperlink{class_schematic_node}{SchematicNode}} *node = addFxSchematicNode(fxs[j].getPointer());}
\DoxyCodeLine{00454         editedMacro[macro].append(node);}
\DoxyCodeLine{00455         \textcolor{keywordflow}{if} (fxs[j]-\/>getAttributes()-\/>isGrouped() \&\&}
\DoxyCodeLine{00456             macro-\/>getAttributes()-\/>isGroupEditing())}
\DoxyCodeLine{00457           editedGroup[fx-\/>getAttributes()-\/>getEditingGroupId()].append(node);}
\DoxyCodeLine{00458       \}}
\DoxyCodeLine{00459       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00460     \}}
\DoxyCodeLine{00461     fxsToBePlaced.append(fx);}
\DoxyCodeLine{00462   \}}
\DoxyCodeLine{00463 }
\DoxyCodeLine{00464   \textcolor{comment}{// sorting fxs so that fxs with specified positions are placed first}}
\DoxyCodeLine{00465   qSort(fxsToBePlaced.begin(), fxsToBePlaced.end(), nodePosDefined);}
\DoxyCodeLine{00466 }
\DoxyCodeLine{00467   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} fx : fxsToBePlaced) \{}
\DoxyCodeLine{00468     \mbox{\hyperlink{class_schematic_node}{SchematicNode}} *node = addFxSchematicNode(fx);}
\DoxyCodeLine{00469     \textcolor{keywordflow}{if} (fx-\/>getAttributes()-\/>isGrouped())}
\DoxyCodeLine{00470       editedGroup[fx-\/>getAttributes()-\/>getEditingGroupId()].append(node);}
\DoxyCodeLine{00471     \mbox{\hyperlink{class_t_macro_fx}{TMacroFx}} *macro = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_macro_fx}{TMacroFx}} *\textcolor{keyword}{>}(fx);}
\DoxyCodeLine{00472     \textcolor{comment}{// If adding an unedited macro and nodes are not yet set, let's position the}}
\DoxyCodeLine{00473     \textcolor{comment}{// internal nodes now}}
\DoxyCodeLine{00474     \textcolor{keywordflow}{if} (macro) \{}
\DoxyCodeLine{00475       \textcolor{keywordtype}{double} minY           = macro-\/>getAttributes()-\/>getDagNodePos().y;}
\DoxyCodeLine{00476       \textcolor{keywordtype}{double} maxX           = macro-\/>getAttributes()-\/>getDagNodePos().x;}
\DoxyCodeLine{00477       \textcolor{keywordtype}{double} y              = minY;}
\DoxyCodeLine{00478       \textcolor{keywordtype}{double} x              = maxX;}
\DoxyCodeLine{00479       std::vector<TFxP> fxs = macro-\/>getFxs();}
\DoxyCodeLine{00480       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < (int)fxs.size(); j++) \{}
\DoxyCodeLine{00481         \mbox{\hyperlink{class_t_fx}{TFx}} *macroFx = fxs[j].getPointer();}
\DoxyCodeLine{00482         \textcolor{keywordflow}{if} (macroFx \&\& !m\_placedFxs.contains(macroFx)) \{}
\DoxyCodeLine{00483           placeNodeAndParents(macroFx, x, maxX, minY);}
\DoxyCodeLine{00484           y -\/= (m\_gridDimension == eLarge ? 100 : 50);}
\DoxyCodeLine{00485           minY = std::min(y, minY);}
\DoxyCodeLine{00486         \}}
\DoxyCodeLine{00487       \}}
\DoxyCodeLine{00488     \}}
\DoxyCodeLine{00489   \}}
\DoxyCodeLine{00490 }
\DoxyCodeLine{00491   \textcolor{comment}{// grouped node}}
\DoxyCodeLine{00492   QMap<int, QList<TFxP>>::const\_iterator it;}
\DoxyCodeLine{00493   \textcolor{keywordflow}{for} (it = groupedFxs.begin(); it != groupedFxs.end(); it++) \{}
\DoxyCodeLine{00494     \mbox{\hyperlink{class_fx_schematic_node}{FxSchematicNode}} *node = addGroupedFxSchematicNode(it.key(), it.value());}
\DoxyCodeLine{00495     \mbox{\hyperlink{class_t_fx}{TFx}} *fx               = node-\/>getFx();}
\DoxyCodeLine{00496     assert(fx);}
\DoxyCodeLine{00497     \textcolor{keywordtype}{int} editingGroupId = fx-\/>getAttributes()-\/>getEditingGroupId();}
\DoxyCodeLine{00498     \textcolor{keywordflow}{if} (editingGroupId != -\/1) editedGroup[editingGroupId].append(node);}
\DoxyCodeLine{00499   \}}
\DoxyCodeLine{00500 }
\DoxyCodeLine{00501   keepSubgroup(editedGroup);}
\DoxyCodeLine{00502   updateEditedGroups(editedGroup);}
\DoxyCodeLine{00503   updateEditedMacros(editedMacro);}
\DoxyCodeLine{00504   updateLink();}
\DoxyCodeLine{00505   m\_nodesToPlace.clear();}
\DoxyCodeLine{00506   updatingScene = \textcolor{keyword}{false};}
\DoxyCodeLine{00507 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonzqt/fxschematicscene.\+h\item 
E\+:/opentoonz/toonz/sources/toonzqt/fxschematicscene.\+cpp\end{DoxyCompactItemize}
