\hypertarget{class_load_color_model_popup}{}\doxysection{Load\+Color\+Model\+Popup Class Reference}
\label{class_load_color_model_popup}\index{LoadColorModelPopup@{LoadColorModelPopup}}
Inheritance diagram for Load\+Color\+Model\+Popup\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4.000000cm]{class_load_color_model_popup}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_load_color_model_popup_a2e2ad1e956210e8941051071fd2b6617}{execute}} () override
\end{DoxyCompactItemize}
\doxysubsection*{Protected Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_load_color_model_popup_a6e2689581864f745175e5d47197079c3}{on\+File\+Paths\+Selected}} (const std\+::set$<$ \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} $>$ \&paths)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_load_color_model_popup_ac99cd2d426761f864415528b30335171}{show\+Event}} (QShow\+Event $\ast$) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_load_color_model_popup_ab4c07d53d126e6f366c9279c5460a1dc}\label{class_load_color_model_popup_ab4c07d53d126e6f366c9279c5460a1dc}} 
\index{LoadColorModelPopup@{LoadColorModelPopup}!LoadColorModelPopup@{LoadColorModelPopup}}
\index{LoadColorModelPopup@{LoadColorModelPopup}!LoadColorModelPopup@{LoadColorModelPopup}}
\doxysubsubsection{\texorpdfstring{LoadColorModelPopup()}{LoadColorModelPopup()}}
{\footnotesize\ttfamily Load\+Color\+Model\+Popup\+::\+Load\+Color\+Model\+Popup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01924     : \mbox{\hyperlink{class_file_browser_popup}{FileBrowserPopup}}(tr(\textcolor{stringliteral}{"{}Load Color Model"{}}), \mbox{\hyperlink{class_file_browser_popup_a873aa6f7f7a00e34a4f60058db3a3fee}{Options}}(), \textcolor{stringliteral}{"{}"{}}, \textcolor{keyword}{new} QFrame(0)) \{}
\DoxyCodeLine{01925   QFrame *optionFrame = (QFrame *)m\_customWidget;}
\DoxyCodeLine{01926   m\_paletteFrame      = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_line_edit}{DVGui::LineEdit}}(\textcolor{stringliteral}{"{}"{}}, \textcolor{keyword}{this});}
\DoxyCodeLine{01927 }
\DoxyCodeLine{01928   \textcolor{comment}{// layout}}
\DoxyCodeLine{01929   QHBoxLayout *mainLayout = \textcolor{keyword}{new} QHBoxLayout();}
\DoxyCodeLine{01930   mainLayout-\/>setMargin(5);}
\DoxyCodeLine{01931   mainLayout-\/>setSpacing(5);}
\DoxyCodeLine{01932   \{}
\DoxyCodeLine{01933     mainLayout-\/>addStretch(1);}
\DoxyCodeLine{01934     mainLayout-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Frames :"{}}), \textcolor{keyword}{this}), 0);}
\DoxyCodeLine{01935     mainLayout-\/>addWidget(m\_paletteFrame, 0);}
\DoxyCodeLine{01936   \}}
\DoxyCodeLine{01937   optionFrame-\/>setLayout(mainLayout);}
\DoxyCodeLine{01938 }
\DoxyCodeLine{01939   setOkText(tr(\textcolor{stringliteral}{"{}Load"{}}));}
\DoxyCodeLine{01940   addFilterType(\textcolor{stringliteral}{"{}bmp"{}});}
\DoxyCodeLine{01941   addFilterType(\textcolor{stringliteral}{"{}jpg"{}});}
\DoxyCodeLine{01942   addFilterType(\textcolor{stringliteral}{"{}nol"{}});}
\DoxyCodeLine{01943   addFilterType(\textcolor{stringliteral}{"{}pic"{}});}
\DoxyCodeLine{01944   addFilterType(\textcolor{stringliteral}{"{}pict"{}});}
\DoxyCodeLine{01945   addFilterType(\textcolor{stringliteral}{"{}pct"{}});}
\DoxyCodeLine{01946   addFilterType(\textcolor{stringliteral}{"{}png"{}});}
\DoxyCodeLine{01947   addFilterType(\textcolor{stringliteral}{"{}rgb"{}});}
\DoxyCodeLine{01948   addFilterType(\textcolor{stringliteral}{"{}sgi"{}});}
\DoxyCodeLine{01949   addFilterType(\textcolor{stringliteral}{"{}tga"{}});}
\DoxyCodeLine{01950   addFilterType(\textcolor{stringliteral}{"{}tif"{}});}
\DoxyCodeLine{01951   addFilterType(\textcolor{stringliteral}{"{}tiff"{}});}
\DoxyCodeLine{01952   addFilterType(\textcolor{stringliteral}{"{}tlv"{}});}
\DoxyCodeLine{01953   addFilterType(\textcolor{stringliteral}{"{}pli"{}});}
\DoxyCodeLine{01954   addFilterType(\textcolor{stringliteral}{"{}psd"{}});}
\DoxyCodeLine{01955 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_load_color_model_popup_a2e2ad1e956210e8941051071fd2b6617}\label{class_load_color_model_popup_a2e2ad1e956210e8941051071fd2b6617}} 
\index{LoadColorModelPopup@{LoadColorModelPopup}!execute@{execute}}
\index{execute@{execute}!LoadColorModelPopup@{LoadColorModelPopup}}
\doxysubsubsection{\texorpdfstring{execute()}{execute()}}
{\footnotesize\ttfamily bool Load\+Color\+Model\+Popup\+::execute (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Performs some action on m\+\_\+paths and returns whether the action was successful (accepted) -\/ in which case the popup closes. 

Implements \mbox{\hyperlink{class_file_browser_popup_a8158b9b8756ac5dfa893b78cdc2fd9af}{File\+Browser\+Popup}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01985                                   \{}
\DoxyCodeLine{01986   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_file_browser_popup_ae7beff1bedd513cf24b3de9fde617ec1}{m\_selectedPaths}}.empty()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01987 }
\DoxyCodeLine{01988   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&fp = *\mbox{\hyperlink{class_file_browser_popup_ae7beff1bedd513cf24b3de9fde617ec1}{m\_selectedPaths}}.begin();}
\DoxyCodeLine{01989 }
\DoxyCodeLine{01990   \mbox{\hyperlink{class_t_palette_handle}{TPaletteHandle}} *paletteHandle =}
\DoxyCodeLine{01991       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getPaletteController()-\/>getCurrentLevelPalette();}
\DoxyCodeLine{01992 }
\DoxyCodeLine{01993   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = paletteHandle-\/>getPalette();}
\DoxyCodeLine{01994   \textcolor{keywordflow}{if} (!palette || palette-\/>isCleanupPalette()) \{}
\DoxyCodeLine{01995     DVGui::error(QObject::tr(\textcolor{stringliteral}{"{}Cannot load Color Model in current palette."{}}));}
\DoxyCodeLine{01996     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01997   \}}
\DoxyCodeLine{01998 }
\DoxyCodeLine{01999   \mbox{\hyperlink{struct_palette_cmd_1_1_color_model_loading_configuration}{PaletteCmd::ColorModelLoadingConfiguration}} config;}
\DoxyCodeLine{02000 }
\DoxyCodeLine{02001   \textcolor{comment}{// if the palette is locked, replace the color model's palette with the}}
\DoxyCodeLine{02002   \textcolor{comment}{// destination}}
\DoxyCodeLine{02003   \textcolor{keywordflow}{if} (palette-\/>isLocked()) \{}
\DoxyCodeLine{02004     \textcolor{comment}{// do nothing as config will use behavior = ReplaceColorModelPlt by default}}
\DoxyCodeLine{02005     \textcolor{comment}{// config.behavior = PaletteCmd::ReplaceColorModelPlt;}}
\DoxyCodeLine{02006   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02007     \mbox{\hyperlink{class_color_model_behavior_popup}{ColorModelBehaviorPopup}} popup(\mbox{\hyperlink{class_file_browser_popup_ae7beff1bedd513cf24b3de9fde617ec1}{m\_selectedPaths}}, 0);}
\DoxyCodeLine{02008     \textcolor{keywordtype}{int} ret = popup.exec();}
\DoxyCodeLine{02009     \textcolor{keywordflow}{if} (ret == QDialog::Rejected) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{02010     popup.getLoadingConfiguration(config);}
\DoxyCodeLine{02011   \}}
\DoxyCodeLine{02012 }
\DoxyCodeLine{02013   std::vector<int> framesInput = string2Indexes(m\_paletteFrame-\/>text());}
\DoxyCodeLine{02014 }
\DoxyCodeLine{02015   \textcolor{keywordflow}{if} (!framesInput.empty()) \{}
\DoxyCodeLine{02016     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < framesInput.size(); i++)}
\DoxyCodeLine{02017       std::cout << framesInput[i] << std::endl;}
\DoxyCodeLine{02018   \}}
\DoxyCodeLine{02019 }
\DoxyCodeLine{02020   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{02021 }
\DoxyCodeLine{02022   \textcolor{keywordtype}{int} isLoaded = PaletteCmd::loadReferenceImage(paletteHandle, config, fp,}
\DoxyCodeLine{02023                                                 scene, framesInput);}
\DoxyCodeLine{02024   \textcolor{comment}{// return value -\/ isLoaded}}
\DoxyCodeLine{02025   \textcolor{comment}{// 2: failed to get palette}}
\DoxyCodeLine{02026   \textcolor{comment}{// 1: failed to get image}}
\DoxyCodeLine{02027   \textcolor{comment}{// 0: OK}}
\DoxyCodeLine{02028   \textcolor{keywordflow}{if} (isLoaded == 2) \{}
\DoxyCodeLine{02029     std::cout << \textcolor{stringliteral}{"{}GetCurrentPalette Failed!"{}} << std::endl;}
\DoxyCodeLine{02030     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{02031   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (isLoaded == 1) \{}
\DoxyCodeLine{02032     std::cout << \textcolor{stringliteral}{"{}GetReferenceImage Failed!"{}} << std::endl;}
\DoxyCodeLine{02033     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{02034   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (0 != isLoaded) \{}
\DoxyCodeLine{02035     std::cout << \textcolor{stringliteral}{"{}loadReferenceImage Failed for some reason."{}} << std::endl;}
\DoxyCodeLine{02036     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{02037   \}}
\DoxyCodeLine{02038 }
\DoxyCodeLine{02039   \textcolor{comment}{// no changes in the icon with replace (Keep the destination palette) option}}
\DoxyCodeLine{02040   \textcolor{keywordflow}{if} (config.behavior != PaletteCmd::ReplaceColorModelPlt) \{}
\DoxyCodeLine{02041     \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getLevel();}
\DoxyCodeLine{02042     \textcolor{keywordflow}{if} (!level) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{02043     std::vector<TFrameId> fids;}
\DoxyCodeLine{02044     level-\/>getFids(fids);}
\DoxyCodeLine{02045     invalidateIcons(level, fids);}
\DoxyCodeLine{02046   \}}
\DoxyCodeLine{02047 }
\DoxyCodeLine{02048   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{02049 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00122}{TApp\+::get\+Current\+Level()}}, \mbox{\hyperlink{l00106}{TApp\+::get\+Current\+Scene()}}, \mbox{\hyperlink{l00215}{TApp\+::instance()}}, and \mbox{\hyperlink{l00090}{File\+Browser\+Popup\+::m\+\_\+selected\+Paths}}.

\mbox{\Hypertarget{class_load_color_model_popup_a6e2689581864f745175e5d47197079c3}\label{class_load_color_model_popup_a6e2689581864f745175e5d47197079c3}} 
\index{LoadColorModelPopup@{LoadColorModelPopup}!onFilePathsSelected@{onFilePathsSelected}}
\index{onFilePathsSelected@{onFilePathsSelected}!LoadColorModelPopup@{LoadColorModelPopup}}
\doxysubsubsection{\texorpdfstring{onFilePathsSelected}{onFilePathsSelected}}
{\footnotesize\ttfamily void Load\+Color\+Model\+Popup\+::on\+File\+Paths\+Selected (\begin{DoxyParamCaption}\item[{const std\+::set$<$ \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} $>$ \&}]{paths }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01960                                     \{}
\DoxyCodeLine{01961   std::list<std::vector<TFrameId>> tmp;}
\DoxyCodeLine{01962   FileBrowserPopup::onFilePathsSelected(paths, tmp);}
\DoxyCodeLine{01963 }
\DoxyCodeLine{01964   m\_paletteFrame-\/>setText(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01965   \textcolor{keywordflow}{if} (paths.size() == 1) \{}
\DoxyCodeLine{01966     \textcolor{comment}{// Initialize the line with the level's starting frame}}
\DoxyCodeLine{01967     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&fp = *paths.begin();}
\DoxyCodeLine{01968     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01969       \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}} lr(fp);}
\DoxyCodeLine{01970       \mbox{\hyperlink{class_t_level_p}{TLevelP}} level;}
\DoxyCodeLine{01971       \textcolor{keywordflow}{if} (lr) level = lr-\/>loadInfo();}
\DoxyCodeLine{01972 }
\DoxyCodeLine{01973       \textcolor{keywordflow}{if} (level.getPointer() \&\& level-\/>begin() != level-\/>end()) \{}
\DoxyCodeLine{01974         \textcolor{keywordtype}{int} firstFrame = level-\/>begin()-\/>first.getNumber();}
\DoxyCodeLine{01975         \textcolor{keywordflow}{if} (firstFrame > 0)}
\DoxyCodeLine{01976           m\_paletteFrame-\/>setText(QString::number(firstFrame));}
\DoxyCodeLine{01977       \}}
\DoxyCodeLine{01978     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{01979     \}}
\DoxyCodeLine{01980   \}}
\DoxyCodeLine{01981 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_load_color_model_popup_ac99cd2d426761f864415528b30335171}\label{class_load_color_model_popup_ac99cd2d426761f864415528b30335171}} 
\index{LoadColorModelPopup@{LoadColorModelPopup}!showEvent@{showEvent}}
\index{showEvent@{showEvent}!LoadColorModelPopup@{LoadColorModelPopup}}
\doxysubsubsection{\texorpdfstring{showEvent()}{showEvent()}}
{\footnotesize\ttfamily void Load\+Color\+Model\+Popup\+::show\+Event (\begin{DoxyParamCaption}\item[{QShow\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02053                                                  \{}
\DoxyCodeLine{02054   m\_nameField-\/>clear();}
\DoxyCodeLine{02055   FileBrowserPopup::showEvent(e);}
\DoxyCodeLine{02056 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/filebrowserpopup.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/filebrowserpopup.\+cpp\end{DoxyCompactItemize}
