\hypertarget{class_raster_selection}{}\doxysection{Raster\+Selection Class Reference}
\label{class_raster_selection}\index{RasterSelection@{RasterSelection}}


Selection of \mbox{\hyperlink{class_t_toonz_image}{TToonz\+Image}} and \mbox{\hyperlink{class_t_raster_image}{TRaster\+Image}}.  




{\ttfamily \#include $<$rasterselection.\+h$>$}

Inheritance diagram for Raster\+Selection\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_raster_selection}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_raster_selection_abf874079571a578108990da8763b8d9a}{Raster\+Selection}} (const \mbox{\hyperlink{class_raster_selection}{Raster\+Selection}} \&src)
\item 
\mbox{\hyperlink{class_t_selection}{TSelection}} $\ast$ \mbox{\hyperlink{class_raster_selection_ae955a584aee5d9371b16b94a3e33894b}{clone}} () const
\begin{DoxyCompactList}\small\item\em Returns the clone of this selection. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_raster_selection_a645d57060c1b56799fcf96712e8501b2}{notify}} ()
\begin{DoxyCompactList}\small\item\em Notify to the viewer that the selection is changed. \end{DoxyCompactList}\item 
const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \& \mbox{\hyperlink{class_raster_selection_aa2cf63ec30338c6d8a46bf9afd0e0de3}{get\+Current\+Image}} () const
\item 
const \mbox{\hyperlink{class_t_xsh_cell}{TXsh\+Cell}} \& \mbox{\hyperlink{class_raster_selection_aaabd4d2924cccc7254e46ffe4dbd33f2}{get\+Current\+Image\+Cell}} () const
\item 
void \mbox{\hyperlink{class_raster_selection_a0cb18dff8adcf4b297805035b946d842}{set\+Current\+Image}} (const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \&img, const \mbox{\hyperlink{class_t_xsh_cell}{TXsh\+Cell}} \&image\+Cell)
\item 
void \mbox{\hyperlink{class_raster_selection_a6761c3b5e91716302843623ca96b65c3}{set\+Strokes}} (const std\+::vector$<$ \mbox{\hyperlink{class_t_stroke}{TStroke}} $>$ \&strokes)
\item 
std\+::vector$<$ \mbox{\hyperlink{class_t_stroke}{TStroke}} $>$ \mbox{\hyperlink{class_raster_selection_a5e57b44876e2d7661a5959a88b0caa95}{get\+Strokes}} () const
\item 
std\+::vector$<$ \mbox{\hyperlink{class_t_stroke}{TStroke}} $>$ \mbox{\hyperlink{class_raster_selection_ad4f880a4e8d131edc4c1c361faa653f4}{get\+Original\+Strokes}} () const
\item 
void \mbox{\hyperlink{class_raster_selection_a330bf69bca265aa9ce94a7c3ea3583e3}{set\+Transformation}} (const \mbox{\hyperlink{class_t_affine}{TAffine}} \&affine)
\item 
\mbox{\hyperlink{class_t_affine}{TAffine}} \mbox{\hyperlink{class_raster_selection_ac746370ed731f9da66214754ca13daff}{get\+Transformation}} () const
\item 
void \mbox{\hyperlink{class_raster_selection_a6d579b0a44c83a317845ddbf280c01ce}{set\+Start\+Position}} (const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&position)
\item 
\mbox{\hyperlink{class_t_point_t}{TPoint}} \mbox{\hyperlink{class_raster_selection_a47387763a08b86813edbf2074d8a941a}{get\+Start\+Position}} () const
\item 
void \mbox{\hyperlink{class_raster_selection_a7c9b6fc4f2f5e234a618bde98cfca47f}{set\+Floating\+Seletion}} (const \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \&floating\+Selection)
\item 
\mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \mbox{\hyperlink{class_raster_selection_aee6f0f2c97d0a1dead1df66be17c204e}{get\+Floating\+Selection}} () const
\item 
\mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \mbox{\hyperlink{class_raster_selection_a4e60077f4d0b122baf73d27405974eb3}{get\+Original\+Floating\+Selection}} () const
\item 
void \mbox{\hyperlink{class_raster_selection_a2df440f05ac3a0fe15f3e72f11f51b58}{set\+Frame\+Id}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid)
\item 
\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \mbox{\hyperlink{class_raster_selection_a928288fe2844676b8f994b7f650fc4c0}{get\+Frame\+Id}} () const
\item 
int \mbox{\hyperlink{class_raster_selection_a9946a618dafead3f6111b442bba0b35c}{get\+Transformation\+Count}} () const
\item 
void \mbox{\hyperlink{class_raster_selection_a795335701b4e63db481c50a0c2a737fc}{set\+Transformation\+Count}} (int transformation\+Count)
\item 
void \mbox{\hyperlink{class_raster_selection_ace52a056a77f38c1ac3c4c7f42785a70}{set\+No\+Antialiasing}} (bool value)
\item 
bool \mbox{\hyperlink{class_raster_selection_a32ab3ab6f07b537a5aca393717a241d4}{is\+Pasted\+Selection}} () const
\item 
\mbox{\hyperlink{class_t_rect_t}{TRectD}} \mbox{\hyperlink{class_raster_selection_af55ad70d28c650aad626dac005841c75}{get\+Strokes\+Bound}} (std\+::vector$<$ \mbox{\hyperlink{class_t_stroke}{TStroke}} $>$ strokes) const
\item 
\mbox{\hyperlink{class_t_rect_t}{TRectD}} \mbox{\hyperlink{class_raster_selection_a31269c7f4d01750e48c0b1a25b306745}{get\+Selection\+Bound}} () const
\item 
\mbox{\hyperlink{class_t_rect_t}{TRectD}} \mbox{\hyperlink{class_raster_selection_a6bccc945a91cf172a94d9f8f8b626da3}{get\+Original\+Selection\+Bound}} () const
\item 
\mbox{\hyperlink{class_t_rect_t}{TRectD}} \mbox{\hyperlink{class_raster_selection_ad99e76493d8e00d8634f108ea7d15daf}{get\+Selection\+Bbox}} () const
\item 
void \mbox{\hyperlink{class_raster_selection_aeb9ec44e383c0ee86a7be70c652cef02}{set\+Selection\+Bbox}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect)
\item 
void \mbox{\hyperlink{class_raster_selection_ac7347b3813c25e7b5d0d4ef0552cf952}{select\+None}} () override
\item 
void \mbox{\hyperlink{class_raster_selection_a1a62989ed221dae211abdee1f2bfa99e}{select}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect)
\begin{DoxyCompactList}\small\item\em Take a rect in world coordinates and put it in the selection. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_raster_selection_ac46229893bda1d896393b43e1cd0570a}{select}} (\mbox{\hyperlink{class_t_stroke}{TStroke}} \&stroke)
\item 
void \mbox{\hyperlink{class_raster_selection_a56d59d2d0d0b0c24ee16d1d3c4e15796}{select\+All}} ()
\item 
bool \mbox{\hyperlink{class_raster_selection_a99c09251b3d38057eac21ce19aa034b2}{is\+Empty}} () const override
\item 
void \mbox{\hyperlink{class_raster_selection_a39ae40543599acddf563348df65c84d6}{enable\+Commands}} () override
\item 
bool \mbox{\hyperlink{class_raster_selection_ab379f51d345698259a8edd6d2ca1e6fe}{is\+Floating}} () const
\item 
void \mbox{\hyperlink{class_raster_selection_a41267c759eba38f97353787ca6d301cd}{transform}} (const \mbox{\hyperlink{class_t_affine}{TAffine}} \&affine)
\item 
void \mbox{\hyperlink{class_raster_selection_affb61ef678edf612083b5d4235996bb1}{make\+Floating}} ()
\begin{DoxyCompactList}\small\item\em Build the floating image using m\+\_\+strokes. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_raster_selection_a54bab0e2b8882efafa423cc54d233bba}{paste\+Floating\+Selection}} ()
\begin{DoxyCompactList}\small\item\em Paste the floating image over the current image and empty the selection. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_raster_selection_afbda4ccc1c449b365f7af3499933e317}{delete\+Selection}} ()
\begin{DoxyCompactList}\small\item\em Delete the floating image. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_raster_selection_a710fad7e84837a320f45cd4a692c3afd}{copy\+Selection}} ()
\begin{DoxyCompactList}\small\item\em Copy the floating image in the clipboard. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_raster_selection_a2960e7110634b8f91a04d0bc574f53ba}{cut\+Selection}} ()
\begin{DoxyCompactList}\small\item\em Cut the floating image. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_raster_selection_add866dc11676caf84ab3f0e0cb577f63}{paste\+Selection}} ()
\begin{DoxyCompactList}\small\item\em Create the floating image using clipboard Data. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_raster_selection_a3fea1a7a6f7c16db2a2ee62e6adb9e32}{is\+Transformed}} ()
\item 
bool \mbox{\hyperlink{class_raster_selection_a2a249f84cc8179e059d6804125c581d1}{is\+Editable}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
Selection of \mbox{\hyperlink{class_t_toonz_image}{TToonz\+Image}} and \mbox{\hyperlink{class_t_raster_image}{TRaster\+Image}}. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_raster_selection_a9516804d556e84a19c1e3cc29016cabd}\label{class_raster_selection_a9516804d556e84a19c1e3cc29016cabd}} 
\index{RasterSelection@{RasterSelection}!RasterSelection@{RasterSelection}}
\index{RasterSelection@{RasterSelection}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{RasterSelection()}{RasterSelection()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily Raster\+Selection\+::\+Raster\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00871     : \mbox{\hyperlink{class_t_selection}{TSelection}}()}
\DoxyCodeLine{00872     , m\_currentImage()}
\DoxyCodeLine{00873     , m\_oldPalette(0)}
\DoxyCodeLine{00874     , m\_selectionBbox()}
\DoxyCodeLine{00875     , m\_affine()}
\DoxyCodeLine{00876     , m\_startPosition()}
\DoxyCodeLine{00877     , m\_floatingSelection()}
\DoxyCodeLine{00878     , m\_originalfloatingSelection()}
\DoxyCodeLine{00879     , m\_fid()}
\DoxyCodeLine{00880     , m\_transformationCount(0)}
\DoxyCodeLine{00881     , m\_isPastedSelection(\textcolor{keyword}{false})}
\DoxyCodeLine{00882     , m\_noAntialiasing(\textcolor{keyword}{false}) \{}
\DoxyCodeLine{00883   m\_strokes.clear();}
\DoxyCodeLine{00884   m\_originalStrokes.clear();}
\DoxyCodeLine{00885 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_abf874079571a578108990da8763b8d9a}\label{class_raster_selection_abf874079571a578108990da8763b8d9a}} 
\index{RasterSelection@{RasterSelection}!RasterSelection@{RasterSelection}}
\index{RasterSelection@{RasterSelection}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{RasterSelection()}{RasterSelection()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily Raster\+Selection\+::\+Raster\+Selection (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_raster_selection}{Raster\+Selection}} \&}]{src }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00890     : \mbox{\hyperlink{class_t_selection}{TSelection}}()}
\DoxyCodeLine{00891     , m\_currentImage(src.m\_currentImage)}
\DoxyCodeLine{00892     , m\_oldPalette(src.m\_oldPalette)}
\DoxyCodeLine{00893     , m\_selectionBbox(src.m\_selectionBbox)}
\DoxyCodeLine{00894     , m\_strokes(src.m\_strokes)}
\DoxyCodeLine{00895     , m\_originalStrokes(src.m\_originalStrokes)}
\DoxyCodeLine{00896     , m\_affine(src.m\_affine)}
\DoxyCodeLine{00897     , m\_startPosition(src.m\_startPosition)}
\DoxyCodeLine{00898     , m\_fid(src.m\_fid)}
\DoxyCodeLine{00899     , m\_transformationCount(src.m\_transformationCount)}
\DoxyCodeLine{00900     , m\_isPastedSelection(src.m\_isPastedSelection)}
\DoxyCodeLine{00901     , m\_noAntialiasing(src.m\_noAntialiasing)}
\DoxyCodeLine{00902 }
\DoxyCodeLine{00903 \{}
\DoxyCodeLine{00904   setView(src.getView());}
\DoxyCodeLine{00905   \textcolor{keywordflow}{if} (src.isFloating()) \{}
\DoxyCodeLine{00906     m\_floatingSelection = src.m\_floatingSelection-\/>clone();}
\DoxyCodeLine{00907     \textcolor{keywordflow}{if} (src.m\_originalfloatingSelection)}
\DoxyCodeLine{00908       m\_originalfloatingSelection = src.m\_originalfloatingSelection-\/>clone();}
\DoxyCodeLine{00909     assert(isFloating());}
\DoxyCodeLine{00910   \}}
\DoxyCodeLine{00911 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_raster_selection_ae955a584aee5d9371b16b94a3e33894b}\label{class_raster_selection_ae955a584aee5d9371b16b94a3e33894b}} 
\index{RasterSelection@{RasterSelection}!clone@{clone}}
\index{clone@{clone}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{clone()}{clone()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_selection}{TSelection}} $\ast$ Raster\+Selection\+::clone (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Returns the clone of this selection. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00916                                          \{}
\DoxyCodeLine{00917   \mbox{\hyperlink{class_raster_selection}{RasterSelection}} *rs = \textcolor{keyword}{new} \mbox{\hyperlink{class_raster_selection}{RasterSelection}}(*\textcolor{keyword}{this});}
\DoxyCodeLine{00918   \textcolor{keywordflow}{return} rs;}
\DoxyCodeLine{00919 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a710fad7e84837a320f45cd4a692c3afd}\label{class_raster_selection_a710fad7e84837a320f45cd4a692c3afd}} 
\index{RasterSelection@{RasterSelection}!copySelection@{copySelection}}
\index{copySelection@{copySelection}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{copySelection()}{copySelection()}}
{\footnotesize\ttfamily void Raster\+Selection\+::copy\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Copy the floating image in the clipboard. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01107                                     \{}
\DoxyCodeLine{01108   \textcolor{keywordflow}{if} (isEmpty() || !m\_currentImage) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01109   \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} ras;}
\DoxyCodeLine{01110   \textcolor{keywordflow}{if} (!isFloating())}
\DoxyCodeLine{01111     ras = getImageFromSelection(m\_currentImage, *\textcolor{keyword}{this});}
\DoxyCodeLine{01112   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01113     ras = m\_floatingSelection;}
\DoxyCodeLine{01114 }
\DoxyCodeLine{01115   \textcolor{keywordtype}{double} dpix, dpiy;}
\DoxyCodeLine{01116   std::vector<TRectD> rect;}
\DoxyCodeLine{01117   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}})(m\_currentImage)) \{}
\DoxyCodeLine{01118     \mbox{\hyperlink{class_toonz_image_data}{ToonzImageData}} *data = \textcolor{keyword}{new} \mbox{\hyperlink{class_toonz_image_data}{ToonzImageData}}();}
\DoxyCodeLine{01119     ti-\/>getDpi(dpix, dpiy);}
\DoxyCodeLine{01120     data-\/>setData(ras, ti-\/>getPalette(), dpix, dpiy, ti-\/>getSize(), rect,}
\DoxyCodeLine{01121                   m\_strokes, m\_originalStrokes, m\_affine);}
\DoxyCodeLine{01122     QApplication::clipboard()-\/>setMimeData(cloneData(data));}
\DoxyCodeLine{01123   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} ri = (\mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}})(m\_currentImage)) \{}
\DoxyCodeLine{01124     \mbox{\hyperlink{class_full_color_image_data}{FullColorImageData}} *data = \textcolor{keyword}{new} \mbox{\hyperlink{class_full_color_image_data}{FullColorImageData}}();}
\DoxyCodeLine{01125     ri-\/>getDpi(dpix, dpiy);}
\DoxyCodeLine{01126     data-\/>setData(ras, ri-\/>getPalette(), dpix, dpiy, ri-\/>getRaster()-\/>getSize(),}
\DoxyCodeLine{01127                   rect, m\_strokes, m\_originalStrokes, m\_affine);}
\DoxyCodeLine{01128     QApplication::clipboard()-\/>setMimeData(cloneData(data));}
\DoxyCodeLine{01129   \}}
\DoxyCodeLine{01130 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01134}{cut\+Selection()}}.

\mbox{\Hypertarget{class_raster_selection_a2960e7110634b8f91a04d0bc574f53ba}\label{class_raster_selection_a2960e7110634b8f91a04d0bc574f53ba}} 
\index{RasterSelection@{RasterSelection}!cutSelection@{cutSelection}}
\index{cutSelection@{cutSelection}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{cutSelection()}{cutSelection()}}
{\footnotesize\ttfamily void Raster\+Selection\+::cut\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Cut the floating image. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01134                                    \{}
\DoxyCodeLine{01135   \mbox{\hyperlink{class_raster_selection_a710fad7e84837a320f45cd4a692c3afd}{copySelection}}();}
\DoxyCodeLine{01136   \mbox{\hyperlink{class_raster_selection_afbda4ccc1c449b365f7af3499933e317}{deleteSelection}}();}
\DoxyCodeLine{01137 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01107}{copy\+Selection()}}, and \mbox{\hyperlink{l01069}{delete\+Selection()}}.

\mbox{\Hypertarget{class_raster_selection_afbda4ccc1c449b365f7af3499933e317}\label{class_raster_selection_afbda4ccc1c449b365f7af3499933e317}} 
\index{RasterSelection@{RasterSelection}!deleteSelection@{deleteSelection}}
\index{deleteSelection@{deleteSelection}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{deleteSelection()}{deleteSelection()}}
{\footnotesize\ttfamily void Raster\+Selection\+::delete\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Delete the floating image. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01069                                       \{}
\DoxyCodeLine{01070   \textcolor{keywordflow}{if} (!m\_currentImage) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01071   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{01072   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *level  = app-\/>getCurrentLevel()-\/>getSimpleLevel();}
\DoxyCodeLine{01073   \textcolor{keywordflow}{if} (!isEditable()) \{}
\DoxyCodeLine{01074     DVGui::error(}
\DoxyCodeLine{01075         QObject::tr(\textcolor{stringliteral}{"{}The selection cannot be deleted. It is not editable."{}}));}
\DoxyCodeLine{01076     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01077   \}}
\DoxyCodeLine{01078 }
\DoxyCodeLine{01079   \textcolor{comment}{// we have to remove all undo transformation and the undo for the makeFloating}}
\DoxyCodeLine{01080   \textcolor{comment}{// operation!}}
\DoxyCodeLine{01081   \textcolor{keywordflow}{if} (isFloating()) \{}
\DoxyCodeLine{01082     assert(m\_transformationCount != -\/1 \&\& m\_transformationCount != -\/2);}
\DoxyCodeLine{01083     \textcolor{keywordflow}{if} (m\_isPastedSelection)}
\DoxyCodeLine{01084       TUndoManager::manager()-\/>\mbox{\hyperlink{class_t_undo_manager_aec936de7730ed653b8524a1d8ad59c39}{popUndo}}(m\_transformationCount + 1);}
\DoxyCodeLine{01085     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01086       TUndoManager::manager()-\/>\mbox{\hyperlink{class_t_undo_manager_aec936de7730ed653b8524a1d8ad59c39}{popUndo}}(m\_transformationCount);}
\DoxyCodeLine{01087   \}}
\DoxyCodeLine{01088   \textcolor{keywordflow}{if} (!isPastedSelection() \&\& !isEmpty())}
\DoxyCodeLine{01089     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} UndoDeleteSelection(\textcolor{keyword}{this}, level));}
\DoxyCodeLine{01090 }
\DoxyCodeLine{01091   \textcolor{keywordflow}{if} (!isFloating())}
\DoxyCodeLine{01092     deleteSelectionWithoutUndo(m\_currentImage, m\_strokes);}
\DoxyCodeLine{01093   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_oldPalette)}
\DoxyCodeLine{01094     m\_currentImage-\/>getPalette()-\/>\mbox{\hyperlink{class_t_palette_a319e848e06467e458214bba1132b49a9}{assign}}(m\_oldPalette.getPointer());}
\DoxyCodeLine{01095   m\_floatingSelection         = \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}}();}
\DoxyCodeLine{01096   m\_originalfloatingSelection = \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}}();}
\DoxyCodeLine{01097 }
\DoxyCodeLine{01098   ToolUtils::updateSaveBox();}
\DoxyCodeLine{01099   \mbox{\hyperlink{class_raster_selection_ac7347b3813c25e7b5d0d4ef0552cf952}{selectNone}}();}
\DoxyCodeLine{01100   app-\/>getPaletteController()-\/>getCurrentLevelPalette()-\/>notifyPaletteChanged();}
\DoxyCodeLine{01101   \mbox{\hyperlink{class_t_tool}{TTool}} *tool = app-\/>getCurrentTool()-\/>getTool();}
\DoxyCodeLine{01102   tool-\/>\mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}(m\_fid);}
\DoxyCodeLine{01103 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00898}{TPalette\+::assign()}}, \mbox{\hyperlink{l00609}{TTool\+::notify\+Image\+Changed()}}, \mbox{\hyperlink{l00326}{TUndo\+Manager\+::pop\+Undo()}}, and \mbox{\hyperlink{l00935}{select\+None()}}.



Referenced by \mbox{\hyperlink{l01134}{cut\+Selection()}}.

\mbox{\Hypertarget{class_raster_selection_a39ae40543599acddf563348df65c84d6}\label{class_raster_selection_a39ae40543599acddf563348df65c84d6}} 
\index{RasterSelection@{RasterSelection}!enableCommands@{enableCommands}}
\index{enableCommands@{enableCommands}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{enableCommands()}{enableCommands()}}
{\footnotesize\ttfamily void Raster\+Selection\+::enable\+Commands (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_selection}{TSelection}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01000                                      \{}
\DoxyCodeLine{01001   enableCommand(\textcolor{keyword}{this}, MI\_Clear, \&\mbox{\hyperlink{class_raster_selection_afbda4ccc1c449b365f7af3499933e317}{RasterSelection::deleteSelection}});}
\DoxyCodeLine{01002   enableCommand(\textcolor{keyword}{this}, MI\_Cut, \&\mbox{\hyperlink{class_raster_selection_a2960e7110634b8f91a04d0bc574f53ba}{RasterSelection::cutSelection}});}
\DoxyCodeLine{01003   enableCommand(\textcolor{keyword}{this}, MI\_Copy, \&\mbox{\hyperlink{class_raster_selection_a710fad7e84837a320f45cd4a692c3afd}{RasterSelection::copySelection}});}
\DoxyCodeLine{01004   enableCommand(\textcolor{keyword}{this}, MI\_Paste, \&\mbox{\hyperlink{class_raster_selection_add866dc11676caf84ab3f0e0cb577f63}{RasterSelection::pasteSelection}});}
\DoxyCodeLine{01005   enableCommand(\textcolor{keyword}{this}, MI\_SelectAll, \&RasterSelection::selectAll);}
\DoxyCodeLine{01006 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_aa2cf63ec30338c6d8a46bf9afd0e0de3}\label{class_raster_selection_aa2cf63ec30338c6d8a46bf9afd0e0de3}} 
\index{RasterSelection@{RasterSelection}!getCurrentImage@{getCurrentImage}}
\index{getCurrentImage@{getCurrentImage}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{getCurrentImage()}{getCurrentImage()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \& Raster\+Selection\+::get\+Current\+Image (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00068 \{ \textcolor{keywordflow}{return} m\_currentImage; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_aaabd4d2924cccc7254e46ffe4dbd33f2}\label{class_raster_selection_aaabd4d2924cccc7254e46ffe4dbd33f2}} 
\index{RasterSelection@{RasterSelection}!getCurrentImageCell@{getCurrentImageCell}}
\index{getCurrentImageCell@{getCurrentImageCell}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{getCurrentImageCell()}{getCurrentImageCell()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_xsh_cell}{TXsh\+Cell}} \& Raster\+Selection\+::get\+Current\+Image\+Cell (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00069 \{ \textcolor{keywordflow}{return} m\_currentImageCell; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_aee6f0f2c97d0a1dead1df66be17c204e}\label{class_raster_selection_aee6f0f2c97d0a1dead1df66be17c204e}} 
\index{RasterSelection@{RasterSelection}!getFloatingSelection@{getFloatingSelection}}
\index{getFloatingSelection@{getFloatingSelection}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{getFloatingSelection()}{getFloatingSelection()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} Raster\+Selection\+::get\+Floating\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00087 \{ \textcolor{keywordflow}{return} m\_floatingSelection; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a928288fe2844676b8f994b7f650fc4c0}\label{class_raster_selection_a928288fe2844676b8f994b7f650fc4c0}} 
\index{RasterSelection@{RasterSelection}!getFrameId@{getFrameId}}
\index{getFrameId@{getFrameId}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{getFrameId()}{getFrameId()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} Raster\+Selection\+::get\+Frame\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00093 \{ \textcolor{keywordflow}{return} m\_fid; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a4e60077f4d0b122baf73d27405974eb3}\label{class_raster_selection_a4e60077f4d0b122baf73d27405974eb3}} 
\index{RasterSelection@{RasterSelection}!getOriginalFloatingSelection@{getOriginalFloatingSelection}}
\index{getOriginalFloatingSelection@{getOriginalFloatingSelection}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{getOriginalFloatingSelection()}{getOriginalFloatingSelection()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} Raster\+Selection\+::get\+Original\+Floating\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00088                                                 \{}
\DoxyCodeLine{00089     \textcolor{keywordflow}{return} m\_originalfloatingSelection;}
\DoxyCodeLine{00090   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a6bccc945a91cf172a94d9f8f8b626da3}\label{class_raster_selection_a6bccc945a91cf172a94d9f8f8b626da3}} 
\index{RasterSelection@{RasterSelection}!getOriginalSelectionBound@{getOriginalSelectionBound}}
\index{getOriginalSelectionBound@{getOriginalSelectionBound}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{getOriginalSelectionBound()}{getOriginalSelectionBound()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRectD}} Raster\+Selection\+::get\+Original\+Selection\+Bound (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Returns m\+\_\+originl\+Strokes bounding box in world coordinates. 
\begin{DoxyCode}{0}
\DoxyCodeLine{01298                                                         \{}
\DoxyCodeLine{01299   \textcolor{keywordflow}{if} (m\_originalStrokes.size() == 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{01300   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_raster_selection_af55ad70d28c650aad626dac005841c75}{getStrokesBound}}(m\_originalStrokes);}
\DoxyCodeLine{01301 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01280}{get\+Strokes\+Bound()}}.

\mbox{\Hypertarget{class_raster_selection_ad4f880a4e8d131edc4c1c361faa653f4}\label{class_raster_selection_ad4f880a4e8d131edc4c1c361faa653f4}} 
\index{RasterSelection@{RasterSelection}!getOriginalStrokes@{getOriginalStrokes}}
\index{getOriginalStrokes@{getOriginalStrokes}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{getOriginalStrokes()}{getOriginalStrokes()}}
{\footnotesize\ttfamily std\+::vector$<$ \mbox{\hyperlink{class_t_stroke}{TStroke}} $>$ Raster\+Selection\+::get\+Original\+Strokes (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00076 \{ \textcolor{keywordflow}{return} m\_originalStrokes; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_ad99e76493d8e00d8634f108ea7d15daf}\label{class_raster_selection_ad99e76493d8e00d8634f108ea7d15daf}} 
\index{RasterSelection@{RasterSelection}!getSelectionBbox@{getSelectionBbox}}
\index{getSelectionBbox@{getSelectionBbox}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{getSelectionBbox()}{getSelectionBbox()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRectD}} Raster\+Selection\+::get\+Selection\+Bbox (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Return {\bfseries{m\+\_\+selection\+Bbox}}. Can be different from \mbox{\hyperlink{class_raster_selection_a31269c7f4d01750e48c0b1a25b306745}{get\+Selection\+Bound()}} after a free deform transformation. 
\begin{DoxyCode}{0}
\DoxyCodeLine{01305                                                \{}
\DoxyCodeLine{01306   \mbox{\hyperlink{class_t_rect_t}{TRectD}} rect = m\_selectionBbox;}
\DoxyCodeLine{01307   \textcolor{keywordflow}{if} (isFloating()) rect = m\_affine * m\_selectionBbox;}
\DoxyCodeLine{01308   \textcolor{keywordflow}{return} rect;}
\DoxyCodeLine{01309 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01037}{paste\+Floating\+Selection()}}.

\mbox{\Hypertarget{class_raster_selection_a31269c7f4d01750e48c0b1a25b306745}\label{class_raster_selection_a31269c7f4d01750e48c0b1a25b306745}} 
\index{RasterSelection@{RasterSelection}!getSelectionBound@{getSelectionBound}}
\index{getSelectionBound@{getSelectionBound}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{getSelectionBound()}{getSelectionBound()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRectD}} Raster\+Selection\+::get\+Selection\+Bound (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Returns m\+\_\+strokes bounding box in world coordinates. The bounding box results transformed if the selection is transformed. 
\begin{DoxyCode}{0}
\DoxyCodeLine{01289                                                 \{}
\DoxyCodeLine{01290   \textcolor{keywordflow}{if} (m\_strokes.size() == 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{01291   \mbox{\hyperlink{class_t_rect_t}{TRectD}} selectionBox = \mbox{\hyperlink{class_raster_selection_af55ad70d28c650aad626dac005841c75}{getStrokesBound}}(m\_strokes);}
\DoxyCodeLine{01292   \textcolor{keywordflow}{if} (isFloating()) selectionBox = m\_affine * selectionBox;}
\DoxyCodeLine{01293   \textcolor{keywordflow}{return} selectionBox;}
\DoxyCodeLine{01294 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01280}{get\+Strokes\+Bound()}}.

\mbox{\Hypertarget{class_raster_selection_a47387763a08b86813edbf2074d8a941a}\label{class_raster_selection_a47387763a08b86813edbf2074d8a941a}} 
\index{RasterSelection@{RasterSelection}!getStartPosition@{getStartPosition}}
\index{getStartPosition@{getStartPosition}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{getStartPosition()}{getStartPosition()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPoint}} Raster\+Selection\+::get\+Start\+Position (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00082 \{ \textcolor{keywordflow}{return} m\_startPosition; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a5e57b44876e2d7661a5959a88b0caa95}\label{class_raster_selection_a5e57b44876e2d7661a5959a88b0caa95}} 
\index{RasterSelection@{RasterSelection}!getStrokes@{getStrokes}}
\index{getStrokes@{getStrokes}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{getStrokes()}{getStrokes()}}
{\footnotesize\ttfamily std\+::vector$<$ \mbox{\hyperlink{class_t_stroke}{TStroke}} $>$ Raster\+Selection\+::get\+Strokes (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00075 \{ \textcolor{keywordflow}{return} m\_strokes; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_af55ad70d28c650aad626dac005841c75}\label{class_raster_selection_af55ad70d28c650aad626dac005841c75}} 
\index{RasterSelection@{RasterSelection}!getStrokesBound@{getStrokesBound}}
\index{getStrokesBound@{getStrokesBound}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{getStrokesBound()}{getStrokesBound()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRectD}} Raster\+Selection\+::get\+Strokes\+Bound (\begin{DoxyParamCaption}\item[{std\+::vector$<$ \mbox{\hyperlink{class_t_stroke}{TStroke}} $>$}]{strokes }\end{DoxyParamCaption}) const}

Returns strokes bounding box. 
\begin{DoxyCode}{0}
\DoxyCodeLine{01280                                                                         \{}
\DoxyCodeLine{01281   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01282   \mbox{\hyperlink{class_t_rect_t}{TRectD}} box = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{01283   \textcolor{keywordflow}{for} (i = 0; i < (int)strokes.size(); i++) box += strokes[i].getBBox();}
\DoxyCodeLine{01284   \textcolor{keywordflow}{return} box;}
\DoxyCodeLine{01285 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01298}{get\+Original\+Selection\+Bound()}}, and \mbox{\hyperlink{l01289}{get\+Selection\+Bound()}}.

\mbox{\Hypertarget{class_raster_selection_ac746370ed731f9da66214754ca13daff}\label{class_raster_selection_ac746370ed731f9da66214754ca13daff}} 
\index{RasterSelection@{RasterSelection}!getTransformation@{getTransformation}}
\index{getTransformation@{getTransformation}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{getTransformation()}{getTransformation()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_affine}{TAffine}} Raster\+Selection\+::get\+Transformation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00079 \{ \textcolor{keywordflow}{return} m\_affine; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a9946a618dafead3f6111b442bba0b35c}\label{class_raster_selection_a9946a618dafead3f6111b442bba0b35c}} 
\index{RasterSelection@{RasterSelection}!getTransformationCount@{getTransformationCount}}
\index{getTransformationCount@{getTransformationCount}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{getTransformationCount()}{getTransformationCount()}}
{\footnotesize\ttfamily int Raster\+Selection\+::get\+Transformation\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00095 \{ \textcolor{keywordflow}{return} m\_transformationCount; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a2a249f84cc8179e059d6804125c581d1}\label{class_raster_selection_a2a249f84cc8179e059d6804125c581d1}} 
\index{RasterSelection@{RasterSelection}!isEditable@{isEditable}}
\index{isEditable@{isEditable}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{isEditable()}{isEditable()}}
{\footnotesize\ttfamily bool Raster\+Selection\+::is\+Editable (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01244                                  \{}
\DoxyCodeLine{01245   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{01246   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *level  = app-\/>getCurrentLevel()-\/>getSimpleLevel();}
\DoxyCodeLine{01247 }
\DoxyCodeLine{01248   \mbox{\hyperlink{class_t_frame_handle}{TFrameHandle}} *frame = app-\/>getCurrentFrame();}
\DoxyCodeLine{01249   \textcolor{keywordtype}{bool} filmstrip      = frame-\/>isEditingLevel();}
\DoxyCodeLine{01250 }
\DoxyCodeLine{01251   \textcolor{keywordflow}{if} (level) \{}
\DoxyCodeLine{01252     \textcolor{keywordflow}{if} (level-\/>isReadOnly()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01253 }
\DoxyCodeLine{01254     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} frameId = app-\/>getCurrentTool()-\/>getTool()-\/>\mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{01255     \textcolor{keywordflow}{if} (level-\/>isFrameReadOnly(frameId)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01256   \}}
\DoxyCodeLine{01257 }
\DoxyCodeLine{01258   \textcolor{keywordflow}{if} (!filmstrip) \{}
\DoxyCodeLine{01259     \textcolor{keywordtype}{int} colIndex = app-\/>getCurrentTool()-\/>getTool()-\/>\mbox{\hyperlink{class_t_tool_a7214525a3ae0cdcb0a0393e4dc4d3bf5}{getColumnIndex}}();}
\DoxyCodeLine{01260     \textcolor{keywordtype}{int} rowIndex = frame-\/>getFrame();}
\DoxyCodeLine{01261     \textcolor{keywordflow}{if} (app-\/>getCurrentTool()-\/>getTool()-\/>isColumnLocked(colIndex))}
\DoxyCodeLine{01262       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01263 }
\DoxyCodeLine{01264     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh      = app-\/>getCurrentXsheet()-\/>getXsheet();}
\DoxyCodeLine{01265     \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *obj = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(TStageObjectId::ColumnId(colIndex));}
\DoxyCodeLine{01266     \textcolor{comment}{// Test for Mesh-\/deformed levels}}
\DoxyCodeLine{01267     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} \&parentId = obj-\/>\mbox{\hyperlink{class_t_stage_object_afb4724a8cc2ef7eb2c6c7585834210f2}{getParent}}();}
\DoxyCodeLine{01268     \textcolor{keywordflow}{if} (parentId.\mbox{\hyperlink{class_t_stage_object_id_af6d13fcf31e7e10eef28f085855f469c}{isColumn}}() \&\& obj-\/>\mbox{\hyperlink{class_t_stage_object_a6025ddfaaae4ebe384894230d69f0b46}{getParentHandle}}()[0] != \textcolor{charliteral}{'H'}) \{}
\DoxyCodeLine{01269       \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *parentSl =}
\DoxyCodeLine{01270           xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(rowIndex, parentId.getIndex()).\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{01271       \textcolor{keywordflow}{if} (parentSl \&\& parentSl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == MESH\_XSHLEVEL) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01272     \}}
\DoxyCodeLine{01273   \}}
\DoxyCodeLine{01274 }
\DoxyCodeLine{01275   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01276 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a99c09251b3d38057eac21ce19aa034b2}\label{class_raster_selection_a99c09251b3d38057eac21ce19aa034b2}} 
\index{RasterSelection@{RasterSelection}!isEmpty@{isEmpty}}
\index{isEmpty@{isEmpty}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{isEmpty()}{isEmpty()}}
{\footnotesize\ttfamily bool Raster\+Selection\+::is\+Empty (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_selection}{TSelection}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00994                                     \{}
\DoxyCodeLine{00995   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_raster_selection_af55ad70d28c650aad626dac005841c75}{getStrokesBound}}(m\_strokes).\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}();}
\DoxyCodeLine{00996 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_ab379f51d345698259a8edd6d2ca1e6fe}\label{class_raster_selection_ab379f51d345698259a8edd6d2ca1e6fe}} 
\index{RasterSelection@{RasterSelection}!isFloating@{isFloating}}
\index{isFloating@{isFloating}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{isFloating()}{isFloating()}}
{\footnotesize\ttfamily bool Raster\+Selection\+::is\+Floating (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{01010 \{ \textcolor{keywordflow}{return} m\_floatingSelection; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a32ab3ab6f07b537a5aca393717a241d4}\label{class_raster_selection_a32ab3ab6f07b537a5aca393717a241d4}} 
\index{RasterSelection@{RasterSelection}!isPastedSelection@{isPastedSelection}}
\index{isPastedSelection@{isPastedSelection}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{isPastedSelection()}{isPastedSelection()}}
{\footnotesize\ttfamily bool Raster\+Selection\+::is\+Pasted\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00102 \{ \textcolor{keywordflow}{return} m\_isPastedSelection; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a3fea1a7a6f7c16db2a2ee62e6adb9e32}\label{class_raster_selection_a3fea1a7a6f7c16db2a2ee62e6adb9e32}} 
\index{RasterSelection@{RasterSelection}!isTransformed@{isTransformed}}
\index{isTransformed@{isTransformed}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{isTransformed()}{isTransformed()}}
{\footnotesize\ttfamily bool Raster\+Selection\+::is\+Transformed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01240 \{ \textcolor{keywordflow}{return} !m\_affine.\mbox{\hyperlink{class_t_affine_a5671bcda5ebc9262ec1681bb96cf8633}{isIdentity}}(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_affb61ef678edf612083b5d4235996bb1}\label{class_raster_selection_affb61ef678edf612083b5d4235996bb1}} 
\index{RasterSelection@{RasterSelection}!makeFloating@{makeFloating}}
\index{makeFloating@{makeFloating}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{makeFloating()}{makeFloating()}}
{\footnotesize\ttfamily void Raster\+Selection\+::make\+Floating (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Build the floating image using m\+\_\+strokes. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01020                                    \{}
\DoxyCodeLine{01021   \textcolor{keywordflow}{if} (isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01022   \textcolor{keywordflow}{if} (!m\_currentImage) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01023 }
\DoxyCodeLine{01024   \textcolor{keywordflow}{if} (!isEditable()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01025 }
\DoxyCodeLine{01026   m\_floatingSelection         = getImageFromSelection(m\_currentImage, *\textcolor{keyword}{this});}
\DoxyCodeLine{01027   m\_originalfloatingSelection = m\_floatingSelection-\/>clone();}
\DoxyCodeLine{01028   deleteSelectionWithoutUndo(m\_currentImage, m\_strokes);}
\DoxyCodeLine{01029 }
\DoxyCodeLine{01030   ToolUtils::updateSaveBox();}
\DoxyCodeLine{01031   \mbox{\hyperlink{class_t_tool}{TTool}} *tool = TTool::getApplication()-\/>getCurrentTool()-\/>getTool();}
\DoxyCodeLine{01032   tool-\/>\mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}(m\_fid);}
\DoxyCodeLine{01033 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00609}{TTool\+::notify\+Image\+Changed()}}.

\mbox{\Hypertarget{class_raster_selection_a645d57060c1b56799fcf96712e8501b2}\label{class_raster_selection_a645d57060c1b56799fcf96712e8501b2}} 
\index{RasterSelection@{RasterSelection}!notify@{notify}}
\index{notify@{notify}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{notify()}{notify()}}
{\footnotesize\ttfamily void Raster\+Selection\+::notify (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Notify to the viewer that the selection is changed. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00924                              \{}
\DoxyCodeLine{00925   \mbox{\hyperlink{class_raster_selection}{RasterSelection}} *selection = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_raster_selection}{RasterSelection}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{00926       TTool::getApplication()-\/>getCurrentSelection()-\/>getSelection());}
\DoxyCodeLine{00927   \textcolor{keywordflow}{if} (selection) selection-\/>notifyView();}
\DoxyCodeLine{00928 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01185}{paste\+Selection()}}, \mbox{\hyperlink{l00968}{select()}}, and \mbox{\hyperlink{l00935}{select\+None()}}.

\mbox{\Hypertarget{class_raster_selection_a54bab0e2b8882efafa423cc54d233bba}\label{class_raster_selection_a54bab0e2b8882efafa423cc54d233bba}} 
\index{RasterSelection@{RasterSelection}!pasteFloatingSelection@{pasteFloatingSelection}}
\index{pasteFloatingSelection@{pasteFloatingSelection}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{pasteFloatingSelection()}{pasteFloatingSelection()}}
{\footnotesize\ttfamily void Raster\+Selection\+::paste\+Floating\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Paste the floating image over the current image and empty the selection. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01037                                              \{}
\DoxyCodeLine{01038   \textcolor{keywordflow}{if} (!isFloating()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01039 }
\DoxyCodeLine{01040   assert(m\_transformationCount != -\/1 \&\& m\_transformationCount != -\/2);}
\DoxyCodeLine{01041 }
\DoxyCodeLine{01042   \textcolor{keywordflow}{if} (m\_isPastedSelection)}
\DoxyCodeLine{01043     TUndoManager::manager()-\/>\mbox{\hyperlink{class_t_undo_manager_aec936de7730ed653b8524a1d8ad59c39}{popUndo}}(m\_transformationCount + 1);}
\DoxyCodeLine{01044   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01045     TUndoManager::manager()-\/>\mbox{\hyperlink{class_t_undo_manager_aec936de7730ed653b8524a1d8ad59c39}{popUndo}}(m\_transformationCount);}
\DoxyCodeLine{01046 }
\DoxyCodeLine{01047   \textcolor{keywordflow}{if} (m\_transformationCount > 0 || m\_isPastedSelection)}
\DoxyCodeLine{01048     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} UndoPasteFloatingSelection(}
\DoxyCodeLine{01049         \textcolor{keyword}{this}, m\_oldPalette.getPointer(), m\_noAntialiasing));}
\DoxyCodeLine{01050   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_transformationCount == 0)}
\DoxyCodeLine{01051     TUndoManager::manager()-\/>\mbox{\hyperlink{class_t_undo_manager_aec936de7730ed653b8524a1d8ad59c39}{popUndo}}(-\/1, \textcolor{keyword}{true});}
\DoxyCodeLine{01052 }
\DoxyCodeLine{01053   \mbox{\hyperlink{class_t_rect_t}{TRectD}} wRect = \mbox{\hyperlink{class_raster_selection_ad99e76493d8e00d8634f108ea7d15daf}{getSelectionBbox}}();}
\DoxyCodeLine{01054   pasteFloatingSelectionWithoutUndo(m\_currentImage, m\_floatingSelection,}
\DoxyCodeLine{01055                                     m\_affine, wRect, m\_noAntialiasing);}
\DoxyCodeLine{01056 }
\DoxyCodeLine{01057   ToolUtils::updateSaveBox(m\_currentImageCell.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}(),}
\DoxyCodeLine{01058                            m\_currentImageCell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}());}
\DoxyCodeLine{01059 }
\DoxyCodeLine{01060   setFloatingSeletion(\mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}}());}
\DoxyCodeLine{01061   \mbox{\hyperlink{class_raster_selection_ac7347b3813c25e7b5d0d4ef0552cf952}{selectNone}}();}
\DoxyCodeLine{01062 }
\DoxyCodeLine{01063   \mbox{\hyperlink{class_t_tool}{TTool}} *tool = TTool::getApplication()-\/>getCurrentTool()-\/>getTool();}
\DoxyCodeLine{01064   tool-\/>\mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}(m\_fid);}
\DoxyCodeLine{01065 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00120}{TXsh\+Cell\+::get\+Frame\+Id()}}, \mbox{\hyperlink{l01305}{get\+Selection\+Bbox()}}, \mbox{\hyperlink{l00019}{TXsh\+Cell\+::get\+Simple\+Level()}}, \mbox{\hyperlink{l00609}{TTool\+::notify\+Image\+Changed()}}, \mbox{\hyperlink{l00326}{TUndo\+Manager\+::pop\+Undo()}}, and \mbox{\hyperlink{l00935}{select\+None()}}.



Referenced by \mbox{\hyperlink{l01185}{paste\+Selection()}}, and \mbox{\hyperlink{l00935}{select\+None()}}.

\mbox{\Hypertarget{class_raster_selection_add866dc11676caf84ab3f0e0cb577f63}\label{class_raster_selection_add866dc11676caf84ab3f0e0cb577f63}} 
\index{RasterSelection@{RasterSelection}!pasteSelection@{pasteSelection}}
\index{pasteSelection@{pasteSelection}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{pasteSelection()}{pasteSelection()}}
{\footnotesize\ttfamily void Raster\+Selection\+::paste\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Create the floating image using clipboard Data. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01185                                      \{}
\DoxyCodeLine{01186   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{01187   \mbox{\hyperlink{class_t_tool}{TTool}} *tool             = app-\/>getCurrentTool()-\/>getTool();}
\DoxyCodeLine{01188   \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} image           = tool-\/>\mbox{\hyperlink{class_t_tool_a668ac4790094a864ba6e37bd902303f1}{touchImage}}();}
\DoxyCodeLine{01189 }
\DoxyCodeLine{01190   \textcolor{keywordflow}{if} (!image) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01191 }
\DoxyCodeLine{01192   \textcolor{keywordflow}{if} (!isEditable()) \{}
\DoxyCodeLine{01193     DVGui::error(}
\DoxyCodeLine{01194         QObject::tr(\textcolor{stringliteral}{"{}The selection cannot be pasted. It is not editable."{}}));}
\DoxyCodeLine{01195     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01196   \}}
\DoxyCodeLine{01197 }
\DoxyCodeLine{01198   m\_currentImage = image;}
\DoxyCodeLine{01199   m\_fid          = tool-\/>\mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{01200 }
\DoxyCodeLine{01201   QClipboard *clipboard = QApplication::clipboard();}
\DoxyCodeLine{01202   \textcolor{keyword}{const} \mbox{\hyperlink{class_raster_image_data}{RasterImageData}} *riData =}
\DoxyCodeLine{01203       \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_raster_image_data}{RasterImageData}} *\textcolor{keyword}{>}(clipboard-\/>mimeData());}
\DoxyCodeLine{01204   \textcolor{keyword}{const} \mbox{\hyperlink{class_strokes_data}{StrokesData}} *stData =}
\DoxyCodeLine{01205       \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_strokes_data}{StrokesData}} *\textcolor{keyword}{>}(clipboard-\/>mimeData());}
\DoxyCodeLine{01206   \textcolor{keywordflow}{if} (!riData \&\& !stData) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01207   \textcolor{keywordflow}{if} (isFloating()) \mbox{\hyperlink{class_raster_selection_a54bab0e2b8882efafa423cc54d233bba}{pasteFloatingSelection}}();}
\DoxyCodeLine{01208   \mbox{\hyperlink{class_raster_selection_ac7347b3813c25e7b5d0d4ef0552cf952}{selectNone}}();}
\DoxyCodeLine{01209   m\_isPastedSelection = \textcolor{keyword}{true};}
\DoxyCodeLine{01210   m\_oldPalette        = m\_currentImage-\/>getPalette()-\/>\mbox{\hyperlink{class_t_palette_abc3ef5824d89e65687b32c530cf25325}{clone}}();}
\DoxyCodeLine{01211   \textcolor{keywordflow}{if} (stData) \{}
\DoxyCodeLine{01212     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = m\_currentImage)}
\DoxyCodeLine{01213       riData = stData-\/>toToonzImageData(ti);}
\DoxyCodeLine{01214     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01215       \mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} ri = m\_currentImage;}
\DoxyCodeLine{01216       assert(ri);}
\DoxyCodeLine{01217       \textcolor{keywordtype}{double} dpix, dpiy;}
\DoxyCodeLine{01218       ri-\/>getDpi(dpix, dpiy);}
\DoxyCodeLine{01219       \textcolor{keywordflow}{if} (dpix == 0 || dpiy == 0) \{}
\DoxyCodeLine{01220         \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi =}
\DoxyCodeLine{01221             tool-\/>\mbox{\hyperlink{class_t_tool_a8716e1462da359f4902c044a79f2d40d}{getXsheet}}()-\/>\mbox{\hyperlink{class_t_xsheet_a35d49d436513243d059eee3a25ffa2ef}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}()-\/>\mbox{\hyperlink{class_t_camera_adf45510b5dc53f6481308ef489fbd5a9}{getDpi}}();}
\DoxyCodeLine{01222         dpix = dpi.x;}
\DoxyCodeLine{01223         dpiy = dpi.y;}
\DoxyCodeLine{01224         ri-\/>setDpi(dpix, dpiy);}
\DoxyCodeLine{01225       \}}
\DoxyCodeLine{01226       riData = stData-\/>toFullColorImageData(ri);}
\DoxyCodeLine{01227     \}}
\DoxyCodeLine{01228   \}}
\DoxyCodeLine{01229 }
\DoxyCodeLine{01230   \textcolor{keywordflow}{if} (!riData) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01231   \mbox{\hyperlink{class_raster_selection_add866dc11676caf84ab3f0e0cb577f63}{pasteSelection}}(riData);}
\DoxyCodeLine{01232 }
\DoxyCodeLine{01233   app-\/>getPaletteController()-\/>getCurrentLevelPalette()-\/>notifyPaletteChanged();}
\DoxyCodeLine{01234   \mbox{\hyperlink{class_raster_selection_a645d57060c1b56799fcf96712e8501b2}{notify}}();}
\DoxyCodeLine{01235   TUndoManager::manager()-\/>add(\textcolor{keyword}{new} UndoPasteSelection(\textcolor{keyword}{this}));}
\DoxyCodeLine{01236 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01472}{Toonz\+Scene\+::get\+Current\+Camera()}}, \mbox{\hyperlink{l00688}{TTool\+::get\+Current\+Fid()}}, \mbox{\hyperlink{l00062}{TCamera\+::get\+Dpi()}}, \mbox{\hyperlink{l01575}{TXsheet\+::get\+Scene()}}, \mbox{\hyperlink{l00569}{TTool\+::get\+Xsheet()}}, \mbox{\hyperlink{l00924}{notify()}}, \mbox{\hyperlink{l01037}{paste\+Floating\+Selection()}}, \mbox{\hyperlink{l01185}{paste\+Selection()}}, \mbox{\hyperlink{l00935}{select\+None()}}, and \mbox{\hyperlink{l00294}{TTool\+::touch\+Image()}}.



Referenced by \mbox{\hyperlink{l01185}{paste\+Selection()}}.

\mbox{\Hypertarget{class_raster_selection_a1a62989ed221dae211abdee1f2bfa99e}\label{class_raster_selection_a1a62989ed221dae211abdee1f2bfa99e}} 
\index{RasterSelection@{RasterSelection}!select@{select}}
\index{select@{select}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{select()}{select()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Raster\+Selection\+::select (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect }\end{DoxyParamCaption})}



Take a rect in world coordinates and put it in the selection. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00968                                                \{}
\DoxyCodeLine{00969   assert(!!m\_currentImage);}
\DoxyCodeLine{00970   \mbox{\hyperlink{class_t_rect_t}{TRectD}} r  = rect;}
\DoxyCodeLine{00971   \mbox{\hyperlink{class_t_rect_t}{TRect}} box = getRaster(m\_currentImage)-\/>getBounds();}
\DoxyCodeLine{00972   r *= convertRasterToWorld(box, m\_currentImage);}
\DoxyCodeLine{00973   \textcolor{keywordflow}{if} (!r.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \{}
\DoxyCodeLine{00974     \mbox{\hyperlink{class_t_stroke}{TStroke}} stroke = getStrokeByRect(r);}
\DoxyCodeLine{00975     \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{int})stroke.\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}() == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00976     m\_strokes.push\_back(stroke);}
\DoxyCodeLine{00977     m\_originalStrokes.push\_back(stroke);}
\DoxyCodeLine{00978   \}}
\DoxyCodeLine{00979   \mbox{\hyperlink{class_raster_selection_a645d57060c1b56799fcf96712e8501b2}{notify}}();}
\DoxyCodeLine{00980 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01849}{TStroke\+::get\+Control\+Point\+Count()}}, \mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{TRect\+T$<$ T $>$\+::is\+Empty()}}, and \mbox{\hyperlink{l00924}{notify()}}.

\mbox{\Hypertarget{class_raster_selection_ac46229893bda1d896393b43e1cd0570a}\label{class_raster_selection_ac46229893bda1d896393b43e1cd0570a}} 
\index{RasterSelection@{RasterSelection}!select@{select}}
\index{select@{select}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{select()}{select()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Raster\+Selection\+::select (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} \&}]{stroke }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00956                                             \{}
\DoxyCodeLine{00957   \mbox{\hyperlink{class_t_rect_t}{TRect}} box                 = getRaster(m\_currentImage)-\/>getBounds();}
\DoxyCodeLine{00958   \mbox{\hyperlink{class_t_rect_t}{TRectD}} rasterBbox         = convertRasterToWorld(box, m\_currentImage);}
\DoxyCodeLine{00959   \mbox{\hyperlink{class_t_stroke}{TStroke}} intersectedStroke = getIntersectedStroke(stroke, rasterBbox);}
\DoxyCodeLine{00960   \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{int})intersectedStroke.\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}() == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00961   m\_strokes.push\_back(intersectedStroke);}
\DoxyCodeLine{00962   m\_originalStrokes.push\_back(intersectedStroke);}
\DoxyCodeLine{00963   \mbox{\hyperlink{class_raster_selection_a645d57060c1b56799fcf96712e8501b2}{notify}}();}
\DoxyCodeLine{00964 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a56d59d2d0d0b0c24ee16d1d3c4e15796}\label{class_raster_selection_a56d59d2d0d0b0c24ee16d1d3c4e15796}} 
\index{RasterSelection@{RasterSelection}!selectAll@{selectAll}}
\index{selectAll@{selectAll}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{selectAll()}{selectAll()}}
{\footnotesize\ttfamily void Raster\+Selection\+::select\+All (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00984                                 \{}
\DoxyCodeLine{00985   \textcolor{keywordflow}{if} (!m\_currentImage) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00986   \mbox{\hyperlink{class_raster_selection_ac7347b3813c25e7b5d0d4ef0552cf952}{selectNone}}();}
\DoxyCodeLine{00987   \mbox{\hyperlink{class_t_rect_t}{TRectD}} wRect = convertRasterToWorld(getRaster(m\_currentImage)-\/>getBounds(),}
\DoxyCodeLine{00988                                       m\_currentImage);}
\DoxyCodeLine{00989   \mbox{\hyperlink{class_raster_selection_a1a62989ed221dae211abdee1f2bfa99e}{select}}(wRect);}
\DoxyCodeLine{00990 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_ac7347b3813c25e7b5d0d4ef0552cf952}\label{class_raster_selection_ac7347b3813c25e7b5d0d4ef0552cf952}} 
\index{RasterSelection@{RasterSelection}!selectNone@{selectNone}}
\index{selectNone@{selectNone}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{selectNone()}{selectNone()}}
{\footnotesize\ttfamily void Raster\+Selection\+::select\+None (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Empty the selection. If the selection is floating, the floating image is pasted using the current transformation. 

Implements \mbox{\hyperlink{class_t_selection}{TSelection}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00935                                  \{}
\DoxyCodeLine{00936   \textcolor{keywordflow}{if} (isFloating()) \{}
\DoxyCodeLine{00937     \mbox{\hyperlink{class_raster_selection_a54bab0e2b8882efafa423cc54d233bba}{pasteFloatingSelection}}();}
\DoxyCodeLine{00938     \mbox{\hyperlink{class_raster_selection_a645d57060c1b56799fcf96712e8501b2}{notify}}();}
\DoxyCodeLine{00939     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00940   \}}
\DoxyCodeLine{00941   m\_selectionBbox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00942   m\_strokes.clear();}
\DoxyCodeLine{00943   m\_originalStrokes.clear();}
\DoxyCodeLine{00944   m\_affine                    = \mbox{\hyperlink{class_t_affine}{TAffine}}();}
\DoxyCodeLine{00945   m\_startPosition             = \mbox{\hyperlink{class_t_point_t}{TPoint}}();}
\DoxyCodeLine{00946   m\_floatingSelection         = \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}}();}
\DoxyCodeLine{00947   m\_originalfloatingSelection = \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}}();}
\DoxyCodeLine{00948   m\_transformationCount       = 0;}
\DoxyCodeLine{00949   m\_isPastedSelection         = \textcolor{keyword}{false};}
\DoxyCodeLine{00950   m\_oldPalette                = 0;}
\DoxyCodeLine{00951   \mbox{\hyperlink{class_raster_selection_a645d57060c1b56799fcf96712e8501b2}{notify}}();}
\DoxyCodeLine{00952 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00924}{notify()}}, and \mbox{\hyperlink{l01037}{paste\+Floating\+Selection()}}.



Referenced by \mbox{\hyperlink{l01069}{delete\+Selection()}}, \mbox{\hyperlink{l01037}{paste\+Floating\+Selection()}}, and \mbox{\hyperlink{l01185}{paste\+Selection()}}.

\mbox{\Hypertarget{class_raster_selection_a0cb18dff8adcf4b297805035b946d842}\label{class_raster_selection_a0cb18dff8adcf4b297805035b946d842}} 
\index{RasterSelection@{RasterSelection}!setCurrentImage@{setCurrentImage}}
\index{setCurrentImage@{setCurrentImage}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{setCurrentImage()}{setCurrentImage()}}
{\footnotesize\ttfamily void Raster\+Selection\+::set\+Current\+Image (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \&}]{img,  }\item[{const \mbox{\hyperlink{class_t_xsh_cell}{TXsh\+Cell}} \&}]{image\+Cell }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00070                                                                       \{}
\DoxyCodeLine{00071     m\_currentImage = img, m\_currentImageCell = imageCell;}
\DoxyCodeLine{00072   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a7c9b6fc4f2f5e234a618bde98cfca47f}\label{class_raster_selection_a7c9b6fc4f2f5e234a618bde98cfca47f}} 
\index{RasterSelection@{RasterSelection}!setFloatingSeletion@{setFloatingSeletion}}
\index{setFloatingSeletion@{setFloatingSeletion}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{setFloatingSeletion()}{setFloatingSeletion()}}
{\footnotesize\ttfamily void Raster\+Selection\+::set\+Floating\+Seletion (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \&}]{floating\+Selection }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00084                                                               \{}
\DoxyCodeLine{00085     m\_floatingSelection = floatingSelection;}
\DoxyCodeLine{00086   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a2df440f05ac3a0fe15f3e72f11f51b58}\label{class_raster_selection_a2df440f05ac3a0fe15f3e72f11f51b58}} 
\index{RasterSelection@{RasterSelection}!setFrameId@{setFrameId}}
\index{setFrameId@{setFrameId}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{setFrameId()}{setFrameId()}}
{\footnotesize\ttfamily void Raster\+Selection\+::set\+Frame\+Id (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00092 \{ m\_fid = fid; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_ace52a056a77f38c1ac3c4c7f42785a70}\label{class_raster_selection_ace52a056a77f38c1ac3c4c7f42785a70}} 
\index{RasterSelection@{RasterSelection}!setNoAntialiasing@{setNoAntialiasing}}
\index{setNoAntialiasing@{setNoAntialiasing}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{setNoAntialiasing()}{setNoAntialiasing()}}
{\footnotesize\ttfamily void Raster\+Selection\+::set\+No\+Antialiasing (\begin{DoxyParamCaption}\item[{bool}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00100 \{ m\_noAntialiasing = value; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_aeb9ec44e383c0ee86a7be70c652cef02}\label{class_raster_selection_aeb9ec44e383c0ee86a7be70c652cef02}} 
\index{RasterSelection@{RasterSelection}!setSelectionBbox@{setSelectionBbox}}
\index{setSelectionBbox@{setSelectionBbox}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{setSelectionBbox()}{setSelectionBbox()}}
{\footnotesize\ttfamily void Raster\+Selection\+::set\+Selection\+Bbox (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01313                                                          \{}
\DoxyCodeLine{01314   m\_selectionBbox = rect;}
\DoxyCodeLine{01315 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a6d579b0a44c83a317845ddbf280c01ce}\label{class_raster_selection_a6d579b0a44c83a317845ddbf280c01ce}} 
\index{RasterSelection@{RasterSelection}!setStartPosition@{setStartPosition}}
\index{setStartPosition@{setStartPosition}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{setStartPosition()}{setStartPosition()}}
{\footnotesize\ttfamily void Raster\+Selection\+::set\+Start\+Position (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&}]{position }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00081 \{ m\_startPosition = position; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a6761c3b5e91716302843623ca96b65c3}\label{class_raster_selection_a6761c3b5e91716302843623ca96b65c3}} 
\index{RasterSelection@{RasterSelection}!setStrokes@{setStrokes}}
\index{setStrokes@{setStrokes}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{setStrokes()}{setStrokes()}}
{\footnotesize\ttfamily void Raster\+Selection\+::set\+Strokes (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \mbox{\hyperlink{class_t_stroke}{TStroke}} $>$ \&}]{strokes }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00074 \{ m\_strokes = strokes; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a330bf69bca265aa9ce94a7c3ea3583e3}\label{class_raster_selection_a330bf69bca265aa9ce94a7c3ea3583e3}} 
\index{RasterSelection@{RasterSelection}!setTransformation@{setTransformation}}
\index{setTransformation@{setTransformation}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{setTransformation()}{setTransformation()}}
{\footnotesize\ttfamily void Raster\+Selection\+::set\+Transformation (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_affine}{TAffine}} \&}]{affine }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00078 \{ m\_affine = affine; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a795335701b4e63db481c50a0c2a737fc}\label{class_raster_selection_a795335701b4e63db481c50a0c2a737fc}} 
\index{RasterSelection@{RasterSelection}!setTransformationCount@{setTransformationCount}}
\index{setTransformationCount@{setTransformationCount}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{setTransformationCount()}{setTransformationCount()}}
{\footnotesize\ttfamily void Raster\+Selection\+::set\+Transformation\+Count (\begin{DoxyParamCaption}\item[{int}]{transformation\+Count }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00096                                                        \{}
\DoxyCodeLine{00097     m\_transformationCount = transformationCount;}
\DoxyCodeLine{00098   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_selection_a41267c759eba38f97353787ca6d301cd}\label{class_raster_selection_a41267c759eba38f97353787ca6d301cd}} 
\index{RasterSelection@{RasterSelection}!transform@{transform}}
\index{transform@{transform}!RasterSelection@{RasterSelection}}
\doxysubsubsection{\texorpdfstring{transform()}{transform()}}
{\footnotesize\ttfamily void Raster\+Selection\+::transform (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_affine}{TAffine}} \&}]{affine }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01014                                                      \{}
\DoxyCodeLine{01015   m\_affine = affine * m\_affine;}
\DoxyCodeLine{01016 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/tools/rasterselection.\+h\item 
E\+:/opentoonz/toonz/sources/tnztools/rasterselection.\+cpp\end{DoxyCompactItemize}
