\hypertarget{class_toonz_image_icon_renderer}{}\doxysection{Toonz\+Image\+Icon\+Renderer Class Reference}
\label{class_toonz_image_icon_renderer}\index{ToonzImageIconRenderer@{ToonzImageIconRenderer}}
Inheritance diagram for Toonz\+Image\+Icon\+Renderer\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4.000000cm]{class_toonz_image_icon_renderer}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_toonz_image_icon_renderer_a69f55dc95950a36879cc14d6107117c7}{Toonz\+Image\+Icon\+Renderer}} (const std\+::string \&id, const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&icon\+Size, \mbox{\hyperlink{class_t_smart_pointer_t}{TXsh\+Simple\+LevelP}} sl, const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid, const \mbox{\hyperlink{class_icon_generator_1_1_settings}{Icon\+Generator\+::\+Settings}} \&settings)
\item 
void \mbox{\hyperlink{class_toonz_image_icon_renderer_a23c50ffd61db13c673911d35fdec7b60}{run}} () override
\begin{DoxyCompactList}\small\item\em The central code of the task that is executed by a worker thread. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_toonz_image_icon_renderer_a2b28197c783ab0dbd13e8fa61248c88c}{set\+Icon\+\_\+\+Tnz\+Img}} (const \mbox{\hyperlink{class_t_raster_p_t}{TRaster\+CM32P}} \&timgp)
\item 
\mbox{\hyperlink{class_t_raster_p_t}{TRaster\+CM32P}} \mbox{\hyperlink{class_toonz_image_icon_renderer_a335a7f375577fcf37666cb7b34dc70a1}{get\+Icon\+\_\+\+Tnz\+Img}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_toonz_image_icon_renderer_a69f55dc95950a36879cc14d6107117c7}\label{class_toonz_image_icon_renderer_a69f55dc95950a36879cc14d6107117c7}} 
\index{ToonzImageIconRenderer@{ToonzImageIconRenderer}!ToonzImageIconRenderer@{ToonzImageIconRenderer}}
\index{ToonzImageIconRenderer@{ToonzImageIconRenderer}!ToonzImageIconRenderer@{ToonzImageIconRenderer}}
\doxysubsubsection{\texorpdfstring{ToonzImageIconRenderer()}{ToonzImageIconRenderer()}}
{\footnotesize\ttfamily Toonz\+Image\+Icon\+Renderer\+::\+Toonz\+Image\+Icon\+Renderer (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{id,  }\item[{const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&}]{icon\+Size,  }\item[{\mbox{\hyperlink{class_t_smart_pointer_t}{TXsh\+Simple\+LevelP}}}]{sl,  }\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid,  }\item[{const \mbox{\hyperlink{class_icon_generator_1_1_settings}{Icon\+Generator\+::\+Settings}} \&}]{settings }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00684       : \mbox{\hyperlink{class_icon_renderer}{IconRenderer}}(\textcolor{keywordtype}{id}, iconSize)}
\DoxyCodeLine{00685       , m\_sl(sl)}
\DoxyCodeLine{00686       , m\_fid(fid)}
\DoxyCodeLine{00687       , m\_settings(settings)}
\DoxyCodeLine{00688       , m\_tnzImgIcon(0) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_toonz_image_icon_renderer_a335a7f375577fcf37666cb7b34dc70a1}\label{class_toonz_image_icon_renderer_a335a7f375577fcf37666cb7b34dc70a1}} 
\index{ToonzImageIconRenderer@{ToonzImageIconRenderer}!getIcon\_TnzImg@{getIcon\_TnzImg}}
\index{getIcon\_TnzImg@{getIcon\_TnzImg}!ToonzImageIconRenderer@{ToonzImageIconRenderer}}
\doxysubsubsection{\texorpdfstring{getIcon\_TnzImg()}{getIcon\_TnzImg()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_p_t}{TRaster\+CM32P}} Toonz\+Image\+Icon\+Renderer\+::get\+Icon\+\_\+\+Tnz\+Img (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00693 \{ \textcolor{keywordflow}{return} m\_tnzImgIcon; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_image_icon_renderer_a23c50ffd61db13c673911d35fdec7b60}\label{class_toonz_image_icon_renderer_a23c50ffd61db13c673911d35fdec7b60}} 
\index{ToonzImageIconRenderer@{ToonzImageIconRenderer}!run@{run}}
\index{run@{run}!ToonzImageIconRenderer@{ToonzImageIconRenderer}}
\doxysubsubsection{\texorpdfstring{run()}{run()}}
{\footnotesize\ttfamily void Toonz\+Image\+Icon\+Renderer\+::run (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



The central code of the task that is executed by a worker thread. 



Implements \mbox{\hyperlink{class_icon_renderer_a0861b8f15a0a79a11c5675807537c230}{Icon\+Renderer}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00698                                  \{}
\DoxyCodeLine{00699   \textcolor{keywordflow}{if} (!m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a14de45c4b17032346cfcffbca8ef9751}{isFid}}(m\_fid)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00700 }
\DoxyCodeLine{00701   \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} image = m\_sl-\/>getFrameIcon(m\_fid);}
\DoxyCodeLine{00702   \textcolor{keywordflow}{if} (!image) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00703 }
\DoxyCodeLine{00704   \mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} rimage(image);}
\DoxyCodeLine{00705   \textcolor{keywordflow}{if} (rimage) \{}
\DoxyCodeLine{00706     \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} icon(convertToIcon(rimage, getIconSize()));}
\DoxyCodeLine{00707     \textcolor{keywordflow}{if} (icon) setIcon(icon);}
\DoxyCodeLine{00708 }
\DoxyCodeLine{00709     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00710   \}}
\DoxyCodeLine{00711 }
\DoxyCodeLine{00712   \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} timage = (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}})image;}
\DoxyCodeLine{00713 }
\DoxyCodeLine{00714   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} iconSize(getIconSize());}
\DoxyCodeLine{00715   \textcolor{keywordflow}{if} (!timage) \{}
\DoxyCodeLine{00716     \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} p(iconSize.lx, iconSize.ly);}
\DoxyCodeLine{00717     p-\/>fill(TPixelRGBM32::Yellow);}
\DoxyCodeLine{00718     setIcon(p);}
\DoxyCodeLine{00719 }
\DoxyCodeLine{00720     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00721   \}}
\DoxyCodeLine{00722 }
\DoxyCodeLine{00723   \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} rasCM32 = timage-\/>getRaster();}
\DoxyCodeLine{00724   \textcolor{keywordflow}{if} (!rasCM32.getPointer()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00725 }
\DoxyCodeLine{00726   \textcolor{keywordtype}{int} lx     = rasCM32-\/>getSize().lx;}
\DoxyCodeLine{00727   \textcolor{keywordtype}{int} ly     = rasCM32-\/>getSize().ly;}
\DoxyCodeLine{00728   \textcolor{keywordtype}{int} iconLx = iconSize.lx, iconLy = iconSize.ly;}
\DoxyCodeLine{00729 }
\DoxyCodeLine{00730   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} icon(iconSize);}
\DoxyCodeLine{00731 }
\DoxyCodeLine{00732   icon-\/>fill(m\_settings.m\_blackBgCheck ? TPixel::Black : TPixel::White);}
\DoxyCodeLine{00733 }
\DoxyCodeLine{00734   \textcolor{keywordflow}{if} (lx != iconLx \&\& ly != iconLy) \{}
\DoxyCodeLine{00735     \textcolor{comment}{// The icons stored in the tlv file don't have the required size.}}
\DoxyCodeLine{00736     \textcolor{comment}{// Fetch the original and iconize it.}}
\DoxyCodeLine{00737 }
\DoxyCodeLine{00738     image = m\_sl-\/>getFrame(m\_fid, ImageManager::dontPutInCache,}
\DoxyCodeLine{00739                            0);  \textcolor{comment}{// 0 uses the level properties' subsampling}}
\DoxyCodeLine{00740     \textcolor{keywordflow}{if} (!image) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00741 }
\DoxyCodeLine{00742     timage = (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}})image;}
\DoxyCodeLine{00743     \textcolor{keywordflow}{if} (!timage) \{}
\DoxyCodeLine{00744       \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} p(iconSize.lx, iconSize.ly);}
\DoxyCodeLine{00745       p-\/>fill(TPixelRGBM32::Yellow);}
\DoxyCodeLine{00746       setIcon(p);}
\DoxyCodeLine{00747 }
\DoxyCodeLine{00748       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00749     \}}
\DoxyCodeLine{00750 }
\DoxyCodeLine{00751     rasCM32 = timage-\/>getRaster();}
\DoxyCodeLine{00752     \textcolor{keywordflow}{if} (!rasCM32.getPointer()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00753 }
\DoxyCodeLine{00754     \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} auxCM32(icon-\/>getSize());}
\DoxyCodeLine{00755     auxCM32-\/>clear();}
\DoxyCodeLine{00756 }
\DoxyCodeLine{00757     TRop::makeIcon(auxCM32, rasCM32);}
\DoxyCodeLine{00758     rasCM32 = auxCM32;}
\DoxyCodeLine{00759   \}}
\DoxyCodeLine{00760 }
\DoxyCodeLine{00761   \textcolor{keywordflow}{if} (!m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00762 }
\DoxyCodeLine{00763   \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} plt = m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}()-\/>\mbox{\hyperlink{class_t_palette_abc3ef5824d89e65687b32c530cf25325}{clone}}();}
\DoxyCodeLine{00764   \textcolor{keywordflow}{if} (!plt) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00765 }
\DoxyCodeLine{00766   \textcolor{keywordtype}{int} frame = m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_af30a02239ef0900c095a0af366dea26a}{guessIndex}}(m\_fid);}
\DoxyCodeLine{00767   plt-\/>\mbox{\hyperlink{class_t_palette_aca7d99a4af59ffaed0ead1f8700c2edc}{setFrame}}(frame);}
\DoxyCodeLine{00768 }
\DoxyCodeLine{00769   setIcon\_TnzImg(rasCM32);}
\DoxyCodeLine{00770 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00275}{TPalette\+::clone()}}, \mbox{\hyperlink{l00424}{TXsh\+Simple\+Level\+::get\+Palette()}}, \mbox{\hyperlink{l00524}{TXsh\+Simple\+Level\+::guess\+Index()}}, \mbox{\hyperlink{l00454}{TXsh\+Simple\+Level\+::is\+Fid()}}, and \mbox{\hyperlink{l01054}{TPalette\+::set\+Frame()}}.

\mbox{\Hypertarget{class_toonz_image_icon_renderer_a2b28197c783ab0dbd13e8fa61248c88c}\label{class_toonz_image_icon_renderer_a2b28197c783ab0dbd13e8fa61248c88c}} 
\index{ToonzImageIconRenderer@{ToonzImageIconRenderer}!setIcon\_TnzImg@{setIcon\_TnzImg}}
\index{setIcon\_TnzImg@{setIcon\_TnzImg}!ToonzImageIconRenderer@{ToonzImageIconRenderer}}
\doxysubsubsection{\texorpdfstring{setIcon\_TnzImg()}{setIcon\_TnzImg()}}
{\footnotesize\ttfamily void Toonz\+Image\+Icon\+Renderer\+::set\+Icon\+\_\+\+Tnz\+Img (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_raster_p_t}{TRaster\+CM32P}} \&}]{timgp }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00692 \{ m\_tnzImgIcon = timgp; \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonzqt/icongenerator.\+cpp\end{DoxyCompactItemize}
