\hypertarget{class_t_column_data_element}{}\doxysection{TColumn\+Data\+Element Class Reference}
\label{class_t_column_data_element}\index{TColumnDataElement@{TColumnDataElement}}
Inheritance diagram for TColumn\+Data\+Element\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_t_column_data_element}
\end{center}
\end{figure}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum {\bfseries Fx\+Flags} \{ {\bfseries e\+Do\+Clone} = 0x1
, {\bfseries e\+Reset\+Fx\+Dag\+Positions} = 0x2
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_column_data_element}{TColumn\+Data\+Element}} $\ast$ \mbox{\hyperlink{class_t_column_data_element_a5cd4084ed5e514d876cbe712de0b647e}{clone}} () const override
\item 
void \mbox{\hyperlink{class_t_column_data_element_afbaf55c99399765b5d42b257cb9802c1}{store\+Column}} (\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$xsheet, int index, int fx\+Flags)
\item 
\mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} \mbox{\hyperlink{class_t_column_data_element_a22322066607671d817d6fd36c34e7d6c}{restore\+Column}} (\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$xsh, int index, int fx\+Flags, bool copy\+Position) const
\end{DoxyCompactItemize}
\doxysubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_t_column_data_element_a19df57f95af808ab92bb25d965d79355}{Stage\+Objects\+Data}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
Class used to clone a column stage object\textquotesingle{}s relational data inside the stage schematic. 

\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{class_t_column_data_element_ae1c96d395c5e5a674052fd70d4433c31}\label{class_t_column_data_element_ae1c96d395c5e5a674052fd70d4433c31}} 
\index{TColumnDataElement@{TColumnDataElement}!FxFlags@{FxFlags}}
\index{FxFlags@{FxFlags}!TColumnDataElement@{TColumnDataElement}}
\doxysubsubsection{\texorpdfstring{FxFlags}{FxFlags}}
{\footnotesize\ttfamily enum TColumn\+Data\+Element\+::\+Fx\+Flags}


\begin{DoxyCode}{0}
\DoxyCodeLine{00244 \{ eDoClone = 0x1, eResetFxDagPositions = 0x2 \};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_column_data_element_a6c257ebaa6fc960aaec5fb19dc99889e}\label{class_t_column_data_element_a6c257ebaa6fc960aaec5fb19dc99889e}} 
\index{TColumnDataElement@{TColumnDataElement}!TColumnDataElement@{TColumnDataElement}}
\index{TColumnDataElement@{TColumnDataElement}!TColumnDataElement@{TColumnDataElement}}
\doxysubsubsection{\texorpdfstring{TColumnDataElement()}{TColumnDataElement()}}
{\footnotesize\ttfamily TColumn\+Data\+Element\+::\+TColumn\+Data\+Element (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00276     : \mbox{\hyperlink{class_t_stage_object_data_element}{TStageObjectDataElement}}(), m\_column(0) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_column_data_element_a1478ca7127330a47c9d61981efa1c05c}\label{class_t_column_data_element_a1478ca7127330a47c9d61981efa1c05c}} 
\index{TColumnDataElement@{TColumnDataElement}!````~TColumnDataElement@{$\sim$TColumnDataElement}}
\index{````~TColumnDataElement@{$\sim$TColumnDataElement}!TColumnDataElement@{TColumnDataElement}}
\doxysubsubsection{\texorpdfstring{$\sim$TColumnDataElement()}{~TColumnDataElement()}}
{\footnotesize\ttfamily TColumn\+Data\+Element\+::$\sim$\+TColumn\+Data\+Element (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00280 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_column_data_element_a5cd4084ed5e514d876cbe712de0b647e}\label{class_t_column_data_element_a5cd4084ed5e514d876cbe712de0b647e}} 
\index{TColumnDataElement@{TColumnDataElement}!clone@{clone}}
\index{clone@{clone}!TColumnDataElement@{TColumnDataElement}}
\doxysubsubsection{\texorpdfstring{clone()}{clone()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_column_data_element}{TColumn\+Data\+Element}} $\ast$ TColumn\+Data\+Element\+::clone (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Clones the stord data. \begin{DoxyWarning}{Warning}
Clones the stored TXsh\+ColumnP, too. 
\end{DoxyWarning}


Reimplemented from \mbox{\hyperlink{class_t_stage_object_data_element}{TStage\+Object\+Data\+Element}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00284                                                     \{}
\DoxyCodeLine{00285   \mbox{\hyperlink{class_t_column_data_element}{TColumnDataElement}} *element = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_column_data_element}{TColumnDataElement}}();}
\DoxyCodeLine{00286 }
\DoxyCodeLine{00287   element-\/>\mbox{\hyperlink{class_t_stage_object_data_element_a9f717b885c1f0debcfe2930268a06361}{m\_params}} = \mbox{\hyperlink{class_t_stage_object_data_element_a9f717b885c1f0debcfe2930268a06361}{m\_params}}-\/>clone();}
\DoxyCodeLine{00288   element-\/>\mbox{\hyperlink{class_t_stage_object_data_element_ae25b37a1978ff59c51c8916ae9bed1e2}{m\_dagPos}} = \mbox{\hyperlink{class_t_stage_object_data_element_ae25b37a1978ff59c51c8916ae9bed1e2}{m\_dagPos}};}
\DoxyCodeLine{00289   element-\/>m\_column = m\_column;}
\DoxyCodeLine{00290 }
\DoxyCodeLine{00291   \textcolor{keywordflow}{if} (element-\/>m\_column) element-\/>m\_column = element-\/>m\_column-\/>clone();}
\DoxyCodeLine{00292 }
\DoxyCodeLine{00293   \textcolor{keywordflow}{return} element;}
\DoxyCodeLine{00294 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00149}{TStage\+Object\+Data\+Element\+::m\+\_\+dag\+Pos}}, and \mbox{\hyperlink{l00148}{TStage\+Object\+Data\+Element\+::m\+\_\+params}}.

\mbox{\Hypertarget{class_t_column_data_element_a22322066607671d817d6fd36c34e7d6c}\label{class_t_column_data_element_a22322066607671d817d6fd36c34e7d6c}} 
\index{TColumnDataElement@{TColumnDataElement}!restoreColumn@{restoreColumn}}
\index{restoreColumn@{restoreColumn}!TColumnDataElement@{TColumnDataElement}}
\doxysubsubsection{\texorpdfstring{restoreColumn()}{restoreColumn()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} TColumn\+Data\+Element\+::restore\+Column (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$}]{xsh,  }\item[{int}]{index,  }\item[{int}]{fx\+Flags,  }\item[{bool}]{copy\+Position }\end{DoxyParamCaption}) const}

Inserts the stored column in the supplied xsheet with the specified column index, returning the new associated stage object id. Supported additional flags include performing a clone of the associated TXsh\+ColumnP rather than restoring the stored column directly. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00329                                                                           \{}
\DoxyCodeLine{00330   \textcolor{keywordtype}{bool} doClone             = (fxFlags \& eDoClone);}
\DoxyCodeLine{00331   \textcolor{keywordtype}{bool} resetFxDagPositions = (fxFlags \& eResetFxDagPositions);}
\DoxyCodeLine{00332 }
\DoxyCodeLine{00333   \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = m\_column.getPointer();}
\DoxyCodeLine{00334 }
\DoxyCodeLine{00335   \textcolor{comment}{// The xsheet 'changes' if a new column is inserted. If it was already there,}}
\DoxyCodeLine{00336   \textcolor{comment}{// no.}}
\DoxyCodeLine{00337   \textcolor{keywordtype}{bool} xsheetChange = \textcolor{keyword}{false};}
\DoxyCodeLine{00338   \textcolor{keywordflow}{if} (column \&\& column-\/>getXsheet() \&\& column-\/>getXsheet() != xsh)}
\DoxyCodeLine{00339     xsheetChange = \textcolor{keyword}{true};}
\DoxyCodeLine{00340 }
\DoxyCodeLine{00341   \textcolor{comment}{// Insert a column at the specified index. If a column was stored, insert that}}
\DoxyCodeLine{00342   \textcolor{comment}{// one.}}
\DoxyCodeLine{00343   \mbox{\hyperlink{class_t_point_t}{TPointD}} dagPos = TConst::nowhere;}
\DoxyCodeLine{00344   \textcolor{keywordflow}{if} (column) \{}
\DoxyCodeLine{00345     \textcolor{keywordflow}{if} (column-\/>getFx())}
\DoxyCodeLine{00346       dagPos = column-\/>getFx()-\/>getAttributes()-\/>getDagNodePos();}
\DoxyCodeLine{00347     \textcolor{keywordflow}{if} (doClone) column = column-\/>clone();}
\DoxyCodeLine{00348     xsh-\/>\mbox{\hyperlink{class_t_xsheet_a5ea42662e27e52ef36ce77b4a5d8e06c}{insertColumn}}(index, column);}
\DoxyCodeLine{00349   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00350     xsh-\/>\mbox{\hyperlink{class_t_xsheet_a5ea42662e27e52ef36ce77b4a5d8e06c}{insertColumn}}(index);  \textcolor{comment}{// Create a new one otherwise}}
\DoxyCodeLine{00351 }
\DoxyCodeLine{00352   \textcolor{keywordflow}{if} (!resetFxDagPositions \&\& dagPos != TConst::nowhere) \{}
\DoxyCodeLine{00353     \textcolor{comment}{// Don't accept the default position (fx object)}}
\DoxyCodeLine{00354     \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *restoredColumn = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(index);}
\DoxyCodeLine{00355     restoredColumn-\/>getFx()-\/>getAttributes()-\/>setDagNodePos(dagPos);}
\DoxyCodeLine{00356   \}}
\DoxyCodeLine{00357 }
\DoxyCodeLine{00358   \textcolor{comment}{// Retrieve the newly inserted column stage object}}
\DoxyCodeLine{00359   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *obj = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(TStageObjectId::ColumnId(index));}
\DoxyCodeLine{00360   assert(obj);}
\DoxyCodeLine{00361   obj-\/>\mbox{\hyperlink{class_t_stage_object_a2b0ed3e5eb55c260f798f0bc3bd18c33}{assignParams}}(\mbox{\hyperlink{class_t_stage_object_data_element_a9f717b885c1f0debcfe2930268a06361}{m\_params}}, doClone);  \textcolor{comment}{// Assign the stored params}}
\DoxyCodeLine{00362 }
\DoxyCodeLine{00363   \textcolor{keywordflow}{if} (copyPosition) obj-\/>\mbox{\hyperlink{class_t_stage_object_a64e318fa720c638b27abe8cd4f2c9494}{setDagNodePos}}(\mbox{\hyperlink{class_t_stage_object_data_element_ae25b37a1978ff59c51c8916ae9bed1e2}{m\_dagPos}});}
\DoxyCodeLine{00364 }
\DoxyCodeLine{00365   \textcolor{comment}{// Clone the associated curve if any}}
\DoxyCodeLine{00366   \textcolor{keywordflow}{if} (xsheetChange \&\& obj-\/>\mbox{\hyperlink{class_t_stage_object_a425cb2dbcefe6ba4e288e1e8bdd16f72}{getSpline}}()) \{}
\DoxyCodeLine{00367     \mbox{\hyperlink{class_t_stage_object_spline}{TStageObjectSpline}} *srcSpl = obj-\/>\mbox{\hyperlink{class_t_stage_object_a425cb2dbcefe6ba4e288e1e8bdd16f72}{getSpline}}();}
\DoxyCodeLine{00368     \mbox{\hyperlink{class_t_stage_object_spline}{TStageObjectSpline}} *dstSpl = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a5dc925584e35e1678f5678b79c470959}{getStageObjectTree}}()-\/>\mbox{\hyperlink{class_t_stage_object_tree_a28f4faf0358394e8af541a70d366baad}{createSpline}}();}
\DoxyCodeLine{00369     dstSpl-\/>addRef();}
\DoxyCodeLine{00370     dstSpl-\/>\mbox{\hyperlink{class_t_stage_object_spline_a3a08efafca4cc8e0ddf06ffa13898340}{setStroke}}(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}(*srcSpl-\/>\mbox{\hyperlink{class_t_stage_object_spline_a68345d3697e0c20003d9b497d8ccacda}{getStroke}}()));}
\DoxyCodeLine{00371     obj-\/>\mbox{\hyperlink{class_t_stage_object_a43d90987cedca57a03e277d6140ada14}{setSpline}}(dstSpl);}
\DoxyCodeLine{00372   \}}
\DoxyCodeLine{00373 }
\DoxyCodeLine{00374   \textcolor{keywordtype}{int} gridType = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a5dc925584e35e1678f5678b79c470959}{getStageObjectTree}}()-\/>getDagGridDimension();}
\DoxyCodeLine{00375   obj-\/>\mbox{\hyperlink{class_t_stage_object_a84e42d151bd6837e7185342ce90d370c}{setIsOpened}}(gridType ==}
\DoxyCodeLine{00376                    0);  \textcolor{comment}{// gridType is 0 if the node is opened, 1 if closed}}
\DoxyCodeLine{00377                         \textcolor{comment}{// see StageSchematicScene::GridDimension}}
\DoxyCodeLine{00378                         \textcolor{comment}{// TODO: Should be made PUBLIC!!}}
\DoxyCodeLine{00379 }
\DoxyCodeLine{00380   xsh-\/>\mbox{\hyperlink{class_t_xsheet_ac5e05acb2ce9809c0dcadd2a8b06b393}{updateFrameCount}}();}
\DoxyCodeLine{00381   \textcolor{keywordflow}{return} obj-\/>\mbox{\hyperlink{class_t_stage_object_a7acac7f9d2b8aabae125a81cc4ac5b10}{getId}}();}
\DoxyCodeLine{00382 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01867}{TStage\+Object\+::assign\+Params()}}, \mbox{\hyperlink{l00582}{TStage\+Object\+Tree\+::create\+Spline()}}, \mbox{\hyperlink{l01418}{TXsheet\+::get\+Column()}}, \mbox{\hyperlink{l00520}{TStage\+Object\+::get\+Id()}}, \mbox{\hyperlink{l00650}{TStage\+Object\+::get\+Spline()}}, \mbox{\hyperlink{l00542}{TXsheet\+::get\+Stage\+Object()}}, \mbox{\hyperlink{l00549}{TXsheet\+::get\+Stage\+Object\+Tree()}}, \mbox{\hyperlink{l00149}{TStage\+Object\+Spline\+::get\+Stroke()}}, \mbox{\hyperlink{l01324}{TXsheet\+::insert\+Column()}}, \mbox{\hyperlink{l00149}{TStage\+Object\+Data\+Element\+::m\+\_\+dag\+Pos}}, \mbox{\hyperlink{l00148}{TStage\+Object\+Data\+Element\+::m\+\_\+params}}, \mbox{\hyperlink{l00258}{TStage\+Object\+::set\+Dag\+Node\+Pos()}}, \mbox{\hyperlink{l00190}{TStage\+Object\+::set\+Is\+Opened()}}, \mbox{\hyperlink{l00676}{TStage\+Object\+::set\+Spline()}}, \mbox{\hyperlink{l00164}{TStage\+Object\+Spline\+::set\+Stroke()}}, and \mbox{\hyperlink{l01166}{TXsheet\+::update\+Frame\+Count()}}.

\mbox{\Hypertarget{class_t_column_data_element_afbaf55c99399765b5d42b257cb9802c1}\label{class_t_column_data_element_afbaf55c99399765b5d42b257cb9802c1}} 
\index{TColumnDataElement@{TColumnDataElement}!storeColumn@{storeColumn}}
\index{storeColumn@{storeColumn}!TColumnDataElement@{TColumnDataElement}}
\doxysubsubsection{\texorpdfstring{storeColumn()}{storeColumn()}}
{\footnotesize\ttfamily void TColumn\+Data\+Element\+::store\+Column (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$}]{xsheet,  }\item[{int}]{index,  }\item[{int}]{fx\+Flags }\end{DoxyParamCaption})}

Stores the stage object and column data of the specified column index in the supplied xsheet. Specifically, the TXsh\+ColumnP associated with the desired column index is stored. Supported additional flags include performing a clone of the associated TXsh\+ColumnP rather than storing the original. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00298                                                                          \{}
\DoxyCodeLine{00299   \textcolor{keywordflow}{if} (index < 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00300 }
\DoxyCodeLine{00301   \textcolor{keywordtype}{bool} doClone             = (fxFlags \& eDoClone);}
\DoxyCodeLine{00302   \textcolor{keywordtype}{bool} resetFxDagPositions = (fxFlags \& eResetFxDagPositions);}
\DoxyCodeLine{00303 }
\DoxyCodeLine{00304   \textcolor{comment}{// Fetch the specified column (if none, return)}}
\DoxyCodeLine{00305   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *obj = xsh-\/>getStageObject(TStageObjectId::ColumnId(index));}
\DoxyCodeLine{00306   assert(obj);}
\DoxyCodeLine{00307 }
\DoxyCodeLine{00308   \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>getColumn(index);}
\DoxyCodeLine{00309   \textcolor{keywordflow}{if} (!column) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00310 }
\DoxyCodeLine{00311   \mbox{\hyperlink{class_t_fx}{TFx}} *fx = column-\/>getFx();}
\DoxyCodeLine{00312   \mbox{\hyperlink{class_t_point_t}{TPointD}} dagPos;}
\DoxyCodeLine{00313 }
\DoxyCodeLine{00314   \textcolor{keywordflow}{if} (fx) dagPos = fx-\/>getAttributes()-\/>getDagNodePos();}
\DoxyCodeLine{00315   \textcolor{keywordflow}{if} (doClone)}
\DoxyCodeLine{00316     column = column-\/>clone();  \textcolor{comment}{// Zerary fxs clone the associated fx (drawn}}
\DoxyCodeLine{00317                                \textcolor{comment}{// levels do not)}}
\DoxyCodeLine{00318   \textcolor{keywordflow}{if} (fx \&\& !resetFxDagPositions)}
\DoxyCodeLine{00319     column-\/>getFx()-\/>getAttributes()-\/>setDagNodePos(dagPos);}
\DoxyCodeLine{00320 }
\DoxyCodeLine{00321   m\_column = column;}
\DoxyCodeLine{00322   \mbox{\hyperlink{class_t_stage_object_data_element_a7e8d6e78c296ce85d47c99a2a65ae4ff}{storeObject}}(obj-\/>\mbox{\hyperlink{class_t_stage_object_a7acac7f9d2b8aabae125a81cc4ac5b10}{getId}}(), xsh);}
\DoxyCodeLine{00323 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01418}{TXsheet\+::get\+Column()}}, \mbox{\hyperlink{l00520}{TStage\+Object\+::get\+Id()}}, \mbox{\hyperlink{l00542}{TXsheet\+::get\+Stage\+Object()}}, and \mbox{\hyperlink{l00189}{TStage\+Object\+Data\+Element\+::store\+Object()}}.



Referenced by \mbox{\hyperlink{l00635}{Stage\+Objects\+Data\+::store\+Objects()}}.



\doxysubsection{Friends And Related Function Documentation}
\mbox{\Hypertarget{class_t_column_data_element_a19df57f95af808ab92bb25d965d79355}\label{class_t_column_data_element_a19df57f95af808ab92bb25d965d79355}} 
\index{TColumnDataElement@{TColumnDataElement}!StageObjectsData@{StageObjectsData}}
\index{StageObjectsData@{StageObjectsData}!TColumnDataElement@{TColumnDataElement}}
\doxysubsubsection{\texorpdfstring{StageObjectsData}{StageObjectsData}}
{\footnotesize\ttfamily friend class \mbox{\hyperlink{class_stage_objects_data}{Stage\+Objects\+Data}}\hspace{0.3cm}{\ttfamily [friend]}}



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonzqt/stageobjectsdata.\+cpp\end{DoxyCompactItemize}
