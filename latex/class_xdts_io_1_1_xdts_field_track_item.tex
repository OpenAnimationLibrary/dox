\hypertarget{class_xdts_io_1_1_xdts_field_track_item}{}\doxysection{Xdts\+Io\+::Xdts\+Field\+Track\+Item Class Reference}
\label{class_xdts_io_1_1_xdts_field_track_item}\index{XdtsIo::XdtsFieldTrackItem@{XdtsIo::XdtsFieldTrackItem}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_xdts_io_1_1_xdts_field_track_item_a4db99702d17e51f091bd2d853962609a}{Xdts\+Field\+Track\+Item}} (int track\+No=0)
\item 
void \mbox{\hyperlink{class_xdts_io_1_1_xdts_field_track_item_acea1feaba53447fae085999c0746c67b}{read}} (const QJson\+Object \&json)
\item 
void \mbox{\hyperlink{class_xdts_io_1_1_xdts_field_track_item_af1cb53c4a677fc7510e5e304d70f1a49}{write}} (QJson\+Object \&json) const
\item 
bool \mbox{\hyperlink{class_xdts_io_1_1_xdts_field_track_item_a72c0a9753071a47c29bd1706d44a82ad}{is\+Empty}} () const
\item 
int \mbox{\hyperlink{class_xdts_io_1_1_xdts_field_track_item_ad6b4b6c9931be143a7cb9dfe9ccc3b12}{get\+Track\+No}} () const
\item 
QVector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \mbox{\hyperlink{class_xdts_io_1_1_xdts_field_track_item_a775179e8cb47499965f38fdf8416584b}{get\+Cell\+Frame\+Id\+Track}} (QList$<$ int $>$ \&tick1, QList$<$ int $>$ \&tick2) const
\item 
QString \mbox{\hyperlink{class_xdts_io_1_1_xdts_field_track_item_a228a443fcd313c86c72f7db65afc82d7}{build}} (\mbox{\hyperlink{class_t_xsh_cell_column}{TXsh\+Cell\+Column}} $\ast$)
\item 
void \mbox{\hyperlink{class_xdts_io_1_1_xdts_field_track_item_ae62ad993255d4961140c6b42adf77ebd}{add\+Frame}} (int frame, \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} f\+Id)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_xdts_io_1_1_xdts_field_track_item_a4db99702d17e51f091bd2d853962609a}\label{class_xdts_io_1_1_xdts_field_track_item_a4db99702d17e51f091bd2d853962609a}} 
\index{XdtsIo::XdtsFieldTrackItem@{XdtsIo::XdtsFieldTrackItem}!XdtsFieldTrackItem@{XdtsFieldTrackItem}}
\index{XdtsFieldTrackItem@{XdtsFieldTrackItem}!XdtsIo::XdtsFieldTrackItem@{XdtsIo::XdtsFieldTrackItem}}
\doxysubsubsection{\texorpdfstring{XdtsFieldTrackItem()}{XdtsFieldTrackItem()}}
{\footnotesize\ttfamily Xdts\+Io\+::\+Xdts\+Field\+Track\+Item\+::\+Xdts\+Field\+Track\+Item (\begin{DoxyParamCaption}\item[{int}]{track\+No = {\ttfamily 0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00131 : m\_trackNo(trackNo) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_xdts_io_1_1_xdts_field_track_item_ae62ad993255d4961140c6b42adf77ebd}\label{class_xdts_io_1_1_xdts_field_track_item_ae62ad993255d4961140c6b42adf77ebd}} 
\index{XdtsIo::XdtsFieldTrackItem@{XdtsIo::XdtsFieldTrackItem}!addFrame@{addFrame}}
\index{addFrame@{addFrame}!XdtsIo::XdtsFieldTrackItem@{XdtsIo::XdtsFieldTrackItem}}
\doxysubsubsection{\texorpdfstring{addFrame()}{addFrame()}}
{\footnotesize\ttfamily void Xdts\+Io\+::\+Xdts\+Field\+Track\+Item\+::add\+Frame (\begin{DoxyParamCaption}\item[{int}]{frame,  }\item[{\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}}}]{f\+Id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00140                                          \{}
\DoxyCodeLine{00141     m\_frames.append(XdtsTrackFrameItem(frame, fId));}
\DoxyCodeLine{00142   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xdts_io_1_1_xdts_field_track_item_a228a443fcd313c86c72f7db65afc82d7}\label{class_xdts_io_1_1_xdts_field_track_item_a228a443fcd313c86c72f7db65afc82d7}} 
\index{XdtsIo::XdtsFieldTrackItem@{XdtsIo::XdtsFieldTrackItem}!build@{build}}
\index{build@{build}!XdtsIo::XdtsFieldTrackItem@{XdtsIo::XdtsFieldTrackItem}}
\doxysubsubsection{\texorpdfstring{build()}{build()}}
{\footnotesize\ttfamily QString Xdts\+Field\+Track\+Item\+::build (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsh_cell_column}{TXsh\+Cell\+Column}} $\ast$}]{column }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00236                                                         \{}
\DoxyCodeLine{00237   \textcolor{comment}{// register the firstly-\/found level}}
\DoxyCodeLine{00238   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00239   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} prevCell;}
\DoxyCodeLine{00240   \textcolor{keywordtype}{int} r0, r1;}
\DoxyCodeLine{00241   column-\/>getRange(r0, r1);}
\DoxyCodeLine{00242   \textcolor{keywordflow}{if} (r0 > 0) addFrame(0, \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(-\/1));}
\DoxyCodeLine{00243   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} row = r0; row <= r1; row++) \{}
\DoxyCodeLine{00244     \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = column-\/>getCell(row);}
\DoxyCodeLine{00245     \textcolor{comment}{// try to register the level. simple levels and sub xsheet levels are}}
\DoxyCodeLine{00246     \textcolor{comment}{// exported}}
\DoxyCodeLine{00247     \textcolor{keywordflow}{if} (!level) level = cell.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{00248     \textcolor{keywordflow}{if} (!level) level = cell.\mbox{\hyperlink{class_t_xsh_cell_a7454c1d1c1875bd237ecad8704614cbd}{getChildLevel}}();}
\DoxyCodeLine{00249     \textcolor{comment}{// if the level does not match with the registered one,}}
\DoxyCodeLine{00250     \textcolor{comment}{// handle as the empty cell}}
\DoxyCodeLine{00251     \textcolor{keywordflow}{if} (!level || cell.m\_level != level) cell = \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}}();}
\DoxyCodeLine{00252     \textcolor{comment}{// continue if the cell is continuous}}
\DoxyCodeLine{00253     \textcolor{keywordflow}{if} (prevCell == cell) \{}
\DoxyCodeLine{00254       \textcolor{comment}{// cell mark to ticks}}
\DoxyCodeLine{00255       \textcolor{keywordflow}{if} (\_tick1Id >= 0 \&\& column-\/>getCellMark(row) == \_tick1Id)}
\DoxyCodeLine{00256         addFrame(row, \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(XdtsFrameDataItem::SYMBOL\_TICK\_1));}
\DoxyCodeLine{00257       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\_tick2Id >= 0 \&\& column-\/>getCellMark(row) == \_tick2Id)}
\DoxyCodeLine{00258         addFrame(row, \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(XdtsFrameDataItem::SYMBOL\_TICK\_2));}
\DoxyCodeLine{00259       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00260     \}}
\DoxyCodeLine{00261     \textcolor{keywordflow}{if} (cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}())}
\DoxyCodeLine{00262       addFrame(row, \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(-\/1));}
\DoxyCodeLine{00263     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00264       addFrame(row, cell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}());}
\DoxyCodeLine{00265 }
\DoxyCodeLine{00266     prevCell = cell;}
\DoxyCodeLine{00267   \}}
\DoxyCodeLine{00268   addFrame(r1 + 1, \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(-\/1));}
\DoxyCodeLine{00269   \textcolor{keywordflow}{if} (level)}
\DoxyCodeLine{00270     \textcolor{keywordflow}{return} QString::fromStdWString(level-\/>\mbox{\hyperlink{class_t_xsh_level_a3a59fb1bd3261baee4e889a9edbf0ae8}{getName}}());}
\DoxyCodeLine{00271   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00272     m\_frames.clear();}
\DoxyCodeLine{00273     \textcolor{keywordflow}{return} QString();}
\DoxyCodeLine{00274   \}}
\DoxyCodeLine{00275 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xdts_io_1_1_xdts_field_track_item_a775179e8cb47499965f38fdf8416584b}\label{class_xdts_io_1_1_xdts_field_track_item_a775179e8cb47499965f38fdf8416584b}} 
\index{XdtsIo::XdtsFieldTrackItem@{XdtsIo::XdtsFieldTrackItem}!getCellFrameIdTrack@{getCellFrameIdTrack}}
\index{getCellFrameIdTrack@{getCellFrameIdTrack}!XdtsIo::XdtsFieldTrackItem@{XdtsIo::XdtsFieldTrackItem}}
\doxysubsubsection{\texorpdfstring{getCellFrameIdTrack()}{getCellFrameIdTrack()}}
{\footnotesize\ttfamily QVector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ Xdts\+Field\+Track\+Item\+::get\+Cell\+Frame\+Id\+Track (\begin{DoxyParamCaption}\item[{QList$<$ int $>$ \&}]{tick1,  }\item[{QList$<$ int $>$ \&}]{tick2 }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00197                                                 \{}
\DoxyCodeLine{00198   QList<QPair<int, TFrameId>> frameFids;}
\DoxyCodeLine{00199   \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \mbox{\hyperlink{class_xdts_io_1_1_xdts_track_frame_item}{XdtsTrackFrameItem}} \&frame : m\_frames)}
\DoxyCodeLine{00200     frameFids.append(frame.frameFid());}
\DoxyCodeLine{00201   std::sort(frameFids.begin(), frameFids.end(), frameLessThan);}
\DoxyCodeLine{00202 }
\DoxyCodeLine{00203   QVector<TFrameId> cells;}
\DoxyCodeLine{00204   \textcolor{keywordtype}{int} currentFrame       = 0;}
\DoxyCodeLine{00205   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} initialNumber = \mbox{\hyperlink{class_t_frame_id}{TFrameId}}();}
\DoxyCodeLine{00206   \textcolor{keywordflow}{for} (QPair<int, TFrameId> \&frameFid : frameFids) \{}
\DoxyCodeLine{00207     \textcolor{keywordflow}{while} (currentFrame < frameFid.first) \{}
\DoxyCodeLine{00208       cells.append((cells.isEmpty()) ? initialNumber : cells.last());}
\DoxyCodeLine{00209       currentFrame++;}
\DoxyCodeLine{00210     \}}
\DoxyCodeLine{00211     \textcolor{comment}{// CSP may export negative frame data (although it is not allowed in XDTS}}
\DoxyCodeLine{00212     \textcolor{comment}{// format specification) so handle such case.}}
\DoxyCodeLine{00213     \textcolor{keywordflow}{if} (frameFid.first < 0) \{}
\DoxyCodeLine{00214       initialNumber = frameFid.second;}
\DoxyCodeLine{00215       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00216     \}}
\DoxyCodeLine{00217     \textcolor{comment}{// ignore sheet symbols for now}}
\DoxyCodeLine{00218     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} cellFid = frameFid.second;}
\DoxyCodeLine{00219     \textcolor{keywordflow}{if} (cellFid.getNumber() == -\/2)  \textcolor{comment}{// IGNORE case}}
\DoxyCodeLine{00220       cells.append((cells.isEmpty()) ? \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(-\/1) : cells.last());}
\DoxyCodeLine{00221     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cellFid.getNumber() ==}
\DoxyCodeLine{00222              XdtsFrameDataItem::SYMBOL\_TICK\_1) \{  \textcolor{comment}{// SYMBOL\_TICK\_1}}
\DoxyCodeLine{00223       cells.append((cells.isEmpty()) ? \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(-\/1) : cells.last());}
\DoxyCodeLine{00224       tick1.append(currentFrame);}
\DoxyCodeLine{00225     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cellFid.getNumber() ==}
\DoxyCodeLine{00226                XdtsFrameDataItem::SYMBOL\_TICK\_2) \{  \textcolor{comment}{// SYMBOL\_TICK\_2}}
\DoxyCodeLine{00227       cells.append((cells.isEmpty()) ? \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(-\/1) : cells.last());}
\DoxyCodeLine{00228       tick2.append(currentFrame);}
\DoxyCodeLine{00229     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00230       cells.append(cellFid);}
\DoxyCodeLine{00231     currentFrame++;}
\DoxyCodeLine{00232   \}}
\DoxyCodeLine{00233   \textcolor{keywordflow}{return} cells;}
\DoxyCodeLine{00234 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xdts_io_1_1_xdts_field_track_item_ad6b4b6c9931be143a7cb9dfe9ccc3b12}\label{class_xdts_io_1_1_xdts_field_track_item_ad6b4b6c9931be143a7cb9dfe9ccc3b12}} 
\index{XdtsIo::XdtsFieldTrackItem@{XdtsIo::XdtsFieldTrackItem}!getTrackNo@{getTrackNo}}
\index{getTrackNo@{getTrackNo}!XdtsIo::XdtsFieldTrackItem@{XdtsIo::XdtsFieldTrackItem}}
\doxysubsubsection{\texorpdfstring{getTrackNo()}{getTrackNo()}}
{\footnotesize\ttfamily int Xdts\+Io\+::\+Xdts\+Field\+Track\+Item\+::get\+Track\+No (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00135 \{ \textcolor{keywordflow}{return} m\_trackNo; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xdts_io_1_1_xdts_field_track_item_a72c0a9753071a47c29bd1706d44a82ad}\label{class_xdts_io_1_1_xdts_field_track_item_a72c0a9753071a47c29bd1706d44a82ad}} 
\index{XdtsIo::XdtsFieldTrackItem@{XdtsIo::XdtsFieldTrackItem}!isEmpty@{isEmpty}}
\index{isEmpty@{isEmpty}!XdtsIo::XdtsFieldTrackItem@{XdtsIo::XdtsFieldTrackItem}}
\doxysubsubsection{\texorpdfstring{isEmpty()}{isEmpty()}}
{\footnotesize\ttfamily bool Xdts\+Io\+::\+Xdts\+Field\+Track\+Item\+::is\+Empty (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00134 \{ \textcolor{keywordflow}{return} m\_frames.isEmpty(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xdts_io_1_1_xdts_field_track_item_acea1feaba53447fae085999c0746c67b}\label{class_xdts_io_1_1_xdts_field_track_item_acea1feaba53447fae085999c0746c67b}} 
\index{XdtsIo::XdtsFieldTrackItem@{XdtsIo::XdtsFieldTrackItem}!read@{read}}
\index{read@{read}!XdtsIo::XdtsFieldTrackItem@{XdtsIo::XdtsFieldTrackItem}}
\doxysubsubsection{\texorpdfstring{read()}{read()}}
{\footnotesize\ttfamily void Xdts\+Field\+Track\+Item\+::read (\begin{DoxyParamCaption}\item[{const QJson\+Object \&}]{json }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00167                                                      \{}
\DoxyCodeLine{00168   QJsonArray frameArray = json[\textcolor{stringliteral}{"{}frames"{}}].toArray();}
\DoxyCodeLine{00169   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} frameIndex = 0; frameIndex < frameArray.size(); ++frameIndex) \{}
\DoxyCodeLine{00170     QJsonObject frameObject = frameArray[frameIndex].toObject();}
\DoxyCodeLine{00171     \mbox{\hyperlink{class_xdts_io_1_1_xdts_track_frame_item}{XdtsTrackFrameItem}} frame;}
\DoxyCodeLine{00172     frame.read(frameObject);}
\DoxyCodeLine{00173     m\_frames.append(frame);}
\DoxyCodeLine{00174   \}}
\DoxyCodeLine{00175   m\_trackNo = json[\textcolor{stringliteral}{"{}trackNo"{}}].toInt();}
\DoxyCodeLine{00176 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xdts_io_1_1_xdts_field_track_item_af1cb53c4a677fc7510e5e304d70f1a49}\label{class_xdts_io_1_1_xdts_field_track_item_af1cb53c4a677fc7510e5e304d70f1a49}} 
\index{XdtsIo::XdtsFieldTrackItem@{XdtsIo::XdtsFieldTrackItem}!write@{write}}
\index{write@{write}!XdtsIo::XdtsFieldTrackItem@{XdtsIo::XdtsFieldTrackItem}}
\doxysubsubsection{\texorpdfstring{write()}{write()}}
{\footnotesize\ttfamily void Xdts\+Field\+Track\+Item\+::write (\begin{DoxyParamCaption}\item[{QJson\+Object \&}]{json }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00178                                                       \{}
\DoxyCodeLine{00179   QJsonArray frameArray;}
\DoxyCodeLine{00180   \textcolor{keywordflow}{foreach} (\textcolor{keyword}{const} \mbox{\hyperlink{class_xdts_io_1_1_xdts_track_frame_item}{XdtsTrackFrameItem}} \&frame, m\_frames) \{}
\DoxyCodeLine{00181     QJsonObject frameObject;}
\DoxyCodeLine{00182     frame.write(frameObject);}
\DoxyCodeLine{00183     frameArray.append(frameObject);}
\DoxyCodeLine{00184   \}}
\DoxyCodeLine{00185   json[\textcolor{stringliteral}{"{}frames"{}}] = frameArray;}
\DoxyCodeLine{00186 }
\DoxyCodeLine{00187   json[\textcolor{stringliteral}{"{}trackNo"{}}] = m\_trackNo;}
\DoxyCodeLine{00188 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/xdtsio.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/xdtsio.\+cpp\end{DoxyCompactItemize}
