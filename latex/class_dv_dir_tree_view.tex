\hypertarget{class_dv_dir_tree_view}{}\doxysection{Dv\+Dir\+Tree\+View Class Reference}
\label{class_dv_dir_tree_view}\index{DvDirTreeView@{DvDirTreeView}}
Inheritance diagram for Dv\+Dir\+Tree\+View\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_dv_dir_tree_view}
\end{center}
\end{figure}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a234d9472738267c19b7f5a6b5bf4678b}{delete\+Folder}} ()
\begin{DoxyCompactList}\small\item\em Deletes the selected folder. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a6475b17d974686909f41801c092f286e}{set\+Current\+Node}} (\mbox{\hyperlink{class_dv_dir_model_node}{Dv\+Dir\+Model\+Node}} $\ast$node)
\begin{DoxyCompactList}\small\item\em Sets the current node, make it visible. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a0cd67fb303054836e2ccc2b26f0865c8}{set\+Current\+Node}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp, bool expand\+Node=false)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a97aebc6aad714e9b18c03f6bcceb92fa}{resize\+To\+Conts}} (void)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_aeaea6e01591b23760b37e0f607d86964}{cleanup\+Version\+Control}} (\mbox{\hyperlink{class_dv_dir_version_control_node}{Dv\+Dir\+Version\+Control\+Node}} $\ast$node)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a13502bcd27e450e34f03df5f7bdbf693}{purge\+Version\+Control}} (\mbox{\hyperlink{class_dv_dir_version_control_node}{Dv\+Dir\+Version\+Control\+Node}} $\ast$node)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a71f57e9935b94fa610ec803bf5d600c8}{delete\+Version\+Control}} (\mbox{\hyperlink{class_dv_dir_version_control_node}{Dv\+Dir\+Version\+Control\+Node}} $\ast$node)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a8c0b9cdec5964b81b613a73a5c712ba7}{put\+Version\+Control}} (\mbox{\hyperlink{class_dv_dir_version_control_node}{Dv\+Dir\+Version\+Control\+Node}} $\ast$node)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a6aecce9040f0436506d335fe40cd2bc9}{update\+Version\+Control}} (\mbox{\hyperlink{class_dv_dir_version_control_node}{Dv\+Dir\+Version\+Control\+Node}} $\ast$node)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_aca54de1925f05fa9365ab49d46cbc07d}{list\+Version\+Control}} (\mbox{\hyperlink{class_dv_dir_version_control_node}{Dv\+Dir\+Version\+Control\+Node}} $\ast$last\+Existing\+Node, const QString \&relative\+Path)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a4d4c6a5a761d3d7a0fc6803e165cb440}{edit\+Current\+Version\+Control\+Node}} ()
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a0a1c6fd0429d51d99c76fa5a9255e49e}{unlock\+Current\+Version\+Control\+Node}} ()
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_afcb018cb7acf7fd97ed067d098c7c9a0}{revert\+Current\+Version\+Control\+Node}} ()
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_acc6fc9fcadc2635731193a45c4cfa4e1}{update\+Current\+Version\+Control\+Node}} ()
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a6f519cc6ab0b34547a4fc3f1ee34fed7}{put\+Current\+Version\+Control\+Node}} ()
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a49147c35af2d2a879df51dc8c826d3bf}{delete\+Current\+Version\+Control\+Node}} ()
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_ae5e0747c38d383a1affc47dfbdcdd0b5}{refresh\+Current\+Version\+Control\+Node}} ()
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a5644dc28530d3edcc117dc9bede47c87}{cleanup\+Current\+Version\+Control\+Node}} ()
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_af49ac91ffcdd72bb77f3cd2267a5fddb}{purge\+Current\+Version\+Control\+Node}} ()
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_af86b5790d163da501eaf13f46f609851}{on\+Info\+Done}} (const QString \&)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_ac1349167407151ea4ebcad205ff2673f}{on\+List\+Done}} (const QString \&)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_adae5d2d321da3bc70f2b31ef3e2c240a}{on\+Check\+Partial\+Lock\+Error}} (const QString \&)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a663b7aff8af89ca5cb3a4eef16ebcc73}{on\+Check\+Partial\+Lock\+Done}} (const QString \&)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_ada1e4e96a6d9fb56afeb2aafb8796314}{on\+Check\+Out\+Error}} (const QString \&)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a170d250c991c779e31bda1ec7c76c648}{on\+Check\+Out\+Done}} (const QString \&)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_af16cfae6c6f74e8f74310a3908af3cef}{on\+Refresh\+Status\+Done}} (const QString \&)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a0d3948556c7bfcc2a6b31c397962119e}{on\+Refresh\+Status\+Error}} (const QString \&)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_ad1071b815ee5494fe5e89e9a3403ed3d}{on\+Expanded}} (const QModel\+Index \&)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a730722b91ebd97e786bd7e76179121c5}{on\+Collapsed}} (const QModel\+Index \&)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_aa9e56f20166d48a1a2559deac9fb966e}{on\+Monitored\+Directory\+Changed}} (const QString \&)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_add81d6ee7efa25d49379e2e1fc1bd54b}{on\+Preference\+Changed}} (const QString \&)
\end{DoxyCompactItemize}
\doxysubsection*{Signals}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_dv_dir_tree_view_aad680d19ff1f4bdd5bb187476407a3d5}\label{class_dv_dir_tree_view_aad680d19ff1f4bdd5bb187476407a3d5}} 
void {\bfseries current\+Node\+Changed} ()
\begin{DoxyCompactList}\small\item\em Emitted when user selects a different node. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_dv_dir_tree_view_acc1c0f6e2ba98c9b6205156564b68c66}{Dv\+Dir\+Tree\+View}} (QWidget $\ast$parent=0)
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_dv_dir_tree_view_a2f0d8472dec64502bc979c0a3122c524}{get\+Current\+Path}} () const
\item 
\mbox{\hyperlink{class_dv_dir_model_node}{Dv\+Dir\+Model\+Node}} $\ast$ \mbox{\hyperlink{class_dv_dir_tree_view_aa24d2d3b94652f74d869c95028a9f231}{get\+Current\+Node}} () const
\item 
\mbox{\hyperlink{class_dv_dir_model_node}{Dv\+Dir\+Model\+Node}} $\ast$ \mbox{\hyperlink{class_dv_dir_tree_view_aa7cae32821cbb0daf6d3a5c337190535}{get\+Current\+Drop\+Node}} () const
\item 
bool \mbox{\hyperlink{class_dv_dir_tree_view_afc4df0053f2e431425439c1e4219085b}{is\+Empty}} () const override
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a4248f5ae791476977eab0ebe30323e7e}{select\+None}} () override
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_aa83cb9c84e22ca7df642dbd93fc99fa9}{enable\+Commands}} () override
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_ae14c086663e99351aa43d5fef675210a}{enable\+Global\+Selection}} (bool enabled)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a0fc1435385e5d89cbf9ea4f18fc26fef}{refresh\+Version\+Control}} (\mbox{\hyperlink{class_dv_dir_version_control_node}{Dv\+Dir\+Version\+Control\+Node}} $\ast$node, const QString\+List \&files=QString\+List())
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a7e8552ef6cdfd339b52b3a17315939f2}{set\+Refresh\+Version\+Control\+Enabled}} (bool value)
\item 
bool \mbox{\hyperlink{class_dv_dir_tree_view_aa1468331763c372e1b93c46cb4191d80}{refresh\+Version\+Control\+Enabled}} () const
\item 
Dv\+Item\+List\+Model\+::\+Status \mbox{\hyperlink{class_dv_dir_tree_view_a2e349a5fe6cd37b36e0fc1053e1864c0}{get\+Item\+Version\+Control\+Status}} (\mbox{\hyperlink{class_dv_dir_version_control_node}{Dv\+Dir\+Version\+Control\+Node}} $\ast$node, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
QSize \mbox{\hyperlink{class_dv_dir_tree_view_aa80686e08f349e00b68d4e21c0b428a7}{size\+Hint}} () const override
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a2e741181f3be375f30b5eb9224b359a4}{current\+Changed}} (const QModel\+Index \&current, const QModel\+Index \&previous) override
\item 
bool \mbox{\hyperlink{class_dv_dir_tree_view_a4860ef6b1203e06927c6117ea5604726}{edit}} (const QModel\+Index \&index, Edit\+Trigger trigger, QEvent $\ast$ev) override
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a900908bd57be95da87e65edbc568da8d}{resize\+Event}} (QResize\+Event $\ast$) override
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a6eda9a441e0f391fa69f6183e42f97e1}{drag\+Enter\+Event}} (QDrag\+Enter\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_aae5f0b0eb9c5fd8ade83fb86a6fa43aa}{drag\+Leave\+Event}} (QDrag\+Leave\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_ad6f9704ae9c7ff4edabc3601997acebd}{drag\+Move\+Event}} (QDrag\+Move\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a5d37de32708bd16fccabe7b19e2872a2}{drop\+Event}} (QDrop\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a8b2966ac892d5facc9c2d07366e7a989}{context\+Menu\+Event}} (QContext\+Menu\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_a4305cc6b407a02e9ead0bef16d8715a6}{create\+Menu\+Action}} (QMenu \&menu, QString name, const char $\ast$slot, bool enable=true)
\item 
void \mbox{\hyperlink{class_dv_dir_tree_view_acef908524304f3a442c5c21e977dc624}{check\+Partial\+Lock}} (const QString \&working\+Dir, const QString\+List \&files)
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_dv_dir_tree_view_acc1c0f6e2ba98c9b6205156564b68c66}\label{class_dv_dir_tree_view_acc1c0f6e2ba98c9b6205156564b68c66}} 
\index{DvDirTreeView@{DvDirTreeView}!DvDirTreeView@{DvDirTreeView}}
\index{DvDirTreeView@{DvDirTreeView}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{DvDirTreeView()}{DvDirTreeView()}}
{\footnotesize\ttfamily Dv\+Dir\+Tree\+View\+::\+Dv\+Dir\+Tree\+View (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00326     : \mbox{\hyperlink{class_styled_tree_view}{StyledTreeView}}(parent)}
\DoxyCodeLine{00327     , m\_globalSelectionEnabled(\textcolor{keyword}{true})}
\DoxyCodeLine{00328     , m\_currentDropItem(0)}
\DoxyCodeLine{00329     , m\_refreshVersionControlEnabled(\textcolor{keyword}{false})}
\DoxyCodeLine{00330     , m\_currentRefreshedNode(0) \{}
\DoxyCodeLine{00331   setModel(DvDirModel::instance());}
\DoxyCodeLine{00332   header()-\/>close();}
\DoxyCodeLine{00333   setItemDelegate(\textcolor{keyword}{new} \mbox{\hyperlink{class_dv_dir_tree_view_delegate}{DvDirTreeViewDelegate}}(\textcolor{keyword}{this}));}
\DoxyCodeLine{00334   setSelectionMode(QAbstractItemView::SingleSelection);}
\DoxyCodeLine{00335 }
\DoxyCodeLine{00336   setIndentation(14);}
\DoxyCodeLine{00337   setAlternatingRowColors(\textcolor{keyword}{true});}
\DoxyCodeLine{00338 }
\DoxyCodeLine{00339   \textcolor{comment}{// Connect all possible changes that can alter the}}
\DoxyCodeLine{00340   \textcolor{comment}{// bottom horizontal scrollbar to resize contents...}}
\DoxyCodeLine{00341   \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{true};}
\DoxyCodeLine{00342   ret      = ret \&\& connect(\textcolor{keyword}{this}, SIGNAL(expanded(\textcolor{keyword}{const} QModelIndex \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00343                        SLOT(resizeToConts()));}
\DoxyCodeLine{00344 }
\DoxyCodeLine{00345   ret = ret \&\& connect(\textcolor{keyword}{this}, SIGNAL(collapsed(\textcolor{keyword}{const} QModelIndex \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00346                        SLOT(resizeToConts()));}
\DoxyCodeLine{00347 }
\DoxyCodeLine{00348   ret = ret \&\& connect(this-\/>model(), SIGNAL(layoutChanged()), \textcolor{keyword}{this},}
\DoxyCodeLine{00349                        SLOT(resizeToConts()));}
\DoxyCodeLine{00350 }
\DoxyCodeLine{00351   \textcolor{keywordflow}{if} (Preferences::instance()-\/>isWatchFileSystemEnabled()) \{}
\DoxyCodeLine{00352     ret = ret \&\& connect(\textcolor{keyword}{this}, SIGNAL(expanded(\textcolor{keyword}{const} QModelIndex \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00353                          SLOT(onExpanded(\textcolor{keyword}{const} QModelIndex \&)));}
\DoxyCodeLine{00354 }
\DoxyCodeLine{00355     ret = ret \&\& connect(\textcolor{keyword}{this}, SIGNAL(collapsed(\textcolor{keyword}{const} QModelIndex \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00356                          SLOT(onCollapsed(\textcolor{keyword}{const} QModelIndex \&)));}
\DoxyCodeLine{00357     addPathsToWatcher();}
\DoxyCodeLine{00358   \}}
\DoxyCodeLine{00359   ret = ret \&\& connect(MyFileSystemWatcher::instance(),}
\DoxyCodeLine{00360                        SIGNAL(directoryChanged(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00361                        SLOT(onMonitoredDirectoryChanged(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00362 }
\DoxyCodeLine{00363   ret = ret \&\& connect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentScene(),}
\DoxyCodeLine{00364                        SIGNAL(preferenceChanged(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00365                        SLOT(onPreferenceChanged(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00366 }
\DoxyCodeLine{00367   assert(ret);}
\DoxyCodeLine{00368 }
\DoxyCodeLine{00369   setAcceptDrops(\textcolor{keyword}{true});}
\DoxyCodeLine{00370 }
\DoxyCodeLine{00371   \textcolor{keywordflow}{if} (Preferences::instance()-\/>isAutomaticSVNFolderRefreshEnabled())}
\DoxyCodeLine{00372     setRefreshVersionControlEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{00373 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_dv_dir_tree_view_acef908524304f3a442c5c21e977dc624}\label{class_dv_dir_tree_view_acef908524304f3a442c5c21e977dc624}} 
\index{DvDirTreeView@{DvDirTreeView}!checkPartialLock@{checkPartialLock}}
\index{checkPartialLock@{checkPartialLock}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{checkPartialLock()}{checkPartialLock()}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::check\+Partial\+Lock (\begin{DoxyParamCaption}\item[{const QString \&}]{working\+Dir,  }\item[{const QString\+List \&}]{files }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01381                                                                \{}
\DoxyCodeLine{01382   QStringList args;}
\DoxyCodeLine{01383   args << \textcolor{stringliteral}{"{}proplist"{}};}
\DoxyCodeLine{01384   \textcolor{keywordtype}{int} filesCount = files.count();}
\DoxyCodeLine{01385   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < filesCount; i++) args << files.at(i);}
\DoxyCodeLine{01386   args << \textcolor{stringliteral}{"{}-\/-\/xml"{}};}
\DoxyCodeLine{01387   args << \textcolor{stringliteral}{"{}-\/v"{}};}
\DoxyCodeLine{01388 }
\DoxyCodeLine{01389   m\_thread.disconnect(SIGNAL(done(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{01390   m\_thread.disconnect(SIGNAL(error(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{01391   connect(\&m\_thread, SIGNAL(error(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{01392           SLOT(onCheckPartialLockError(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{01393   connect(\&m\_thread, SIGNAL(done(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{01394           SLOT(onCheckPartialLockDone(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{01395 }
\DoxyCodeLine{01396   m\_thread.executeCommand(workingDir, \textcolor{stringliteral}{"{}svn"{}}, args, \textcolor{keyword}{true});}
\DoxyCodeLine{01397 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a5644dc28530d3edcc117dc9bede47c87}\label{class_dv_dir_tree_view_a5644dc28530d3edcc117dc9bede47c87}} 
\index{DvDirTreeView@{DvDirTreeView}!cleanupCurrentVersionControlNode@{cleanupCurrentVersionControlNode}}
\index{cleanupCurrentVersionControlNode@{cleanupCurrentVersionControlNode}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{cleanupCurrentVersionControlNode}{cleanupCurrentVersionControlNode}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::cleanup\+Current\+Version\+Control\+Node (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01210                                                      \{}
\DoxyCodeLine{01211   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *vcNode =}
\DoxyCodeLine{01212       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(getCurrentNode());}
\DoxyCodeLine{01213   \textcolor{keywordflow}{if} (!vcNode) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01214   cleanupVersionControl(vcNode);}
\DoxyCodeLine{01215 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_aeaea6e01591b23760b37e0f607d86964}\label{class_dv_dir_tree_view_aeaea6e01591b23760b37e0f607d86964}} 
\index{DvDirTreeView@{DvDirTreeView}!cleanupVersionControl@{cleanupVersionControl}}
\index{cleanupVersionControl@{cleanupVersionControl}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{cleanupVersionControl}{cleanupVersionControl}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::cleanup\+Version\+Control (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dv_dir_version_control_node}{Dv\+Dir\+Version\+Control\+Node}} $\ast$}]{node }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00796                                                                        \{}
\DoxyCodeLine{00797   \textcolor{keywordflow}{if} (!node) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00798 }
\DoxyCodeLine{00799   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path   = node-\/>getPath();}
\DoxyCodeLine{00800   \textcolor{keywordtype}{bool} isSceneFile = path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}};}
\DoxyCodeLine{00801   \textcolor{keywordflow}{if} (isSceneFile) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00802 }
\DoxyCodeLine{00803   \mbox{\hyperlink{class_version_control}{VersionControl}} *vc = VersionControl::instance();}
\DoxyCodeLine{00804 }
\DoxyCodeLine{00805   \textcolor{comment}{// Get the root node to retrieve username and password}}
\DoxyCodeLine{00806   \mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *rootNode = node-\/>getVersionControlRootNode();}
\DoxyCodeLine{00807   \textcolor{keywordflow}{if} (rootNode) \{}
\DoxyCodeLine{00808     vc-\/>setUserName(QString::fromStdWString(rootNode-\/>getUserName()));}
\DoxyCodeLine{00809     vc-\/>setPassword(QString::fromStdWString(rootNode-\/>getPassword()));}
\DoxyCodeLine{00810   \}}
\DoxyCodeLine{00811   vc-\/>cleanupFolder(\textcolor{keyword}{this}, toQString(path));}
\DoxyCodeLine{00812 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a8b2966ac892d5facc9c2d07366e7a989}\label{class_dv_dir_tree_view_a8b2966ac892d5facc9c2d07366e7a989}} 
\index{DvDirTreeView@{DvDirTreeView}!contextMenuEvent@{contextMenuEvent}}
\index{contextMenuEvent@{contextMenuEvent}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{contextMenuEvent()}{contextMenuEvent()}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::context\+Menu\+Event (\begin{DoxyParamCaption}\item[{QContext\+Menu\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00461                                                          \{}
\DoxyCodeLine{00462   QModelIndex index = indexAt(e-\/>pos());}
\DoxyCodeLine{00463   \textcolor{keywordflow}{if} (!index.isValid()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00464 }
\DoxyCodeLine{00465   \mbox{\hyperlink{class_dv_dir_model_node}{DvDirModelNode}} *node = DvDirModel::instance()-\/>getNode(index);}
\DoxyCodeLine{00466   \textcolor{keywordflow}{if} (!node) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00467 }
\DoxyCodeLine{00468   QMenu menu(\textcolor{keyword}{this});}
\DoxyCodeLine{00469 }
\DoxyCodeLine{00470   \textcolor{keywordflow}{if} (!Preferences::instance()-\/>isWatchFileSystemEnabled()) \{}
\DoxyCodeLine{00471     QAction *refresh = CommandManager::instance()-\/>getAction(\textcolor{stringliteral}{"{}MI\_RefreshTree"{}});}
\DoxyCodeLine{00472     menu.addAction(refresh);}
\DoxyCodeLine{00473   \}}
\DoxyCodeLine{00474 }
\DoxyCodeLine{00475   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *vcNode =}
\DoxyCodeLine{00476       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(node);}
\DoxyCodeLine{00477   \textcolor{keywordflow}{if} (vcNode) \{}
\DoxyCodeLine{00478     \mbox{\hyperlink{class_t_file_path}{TFilePath}} path       = vcNode-\/>getPath();}
\DoxyCodeLine{00479     \textcolor{keywordtype}{bool} fileExists      = \mbox{\hyperlink{class_t_file_status}{TFileStatus}}(path).doesExist();}
\DoxyCodeLine{00480     std::string pathType = path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}();}
\DoxyCodeLine{00481     \mbox{\hyperlink{class_dv_dir_version_control_project_node}{DvDirVersionControlProjectNode}} *vcProjectNode =}
\DoxyCodeLine{00482         \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_project_node}{DvDirVersionControlProjectNode}} *\textcolor{keyword}{>}(node);}
\DoxyCodeLine{00483     QAction *action;}
\DoxyCodeLine{00484     \textcolor{keywordflow}{if} (vcNode-\/>isUnderVersionControl()) \{}
\DoxyCodeLine{00485       \textcolor{keywordflow}{if} (vcProjectNode || (fileExists \&\& pathType == \textcolor{stringliteral}{"{}tnz"{}})) \{}
\DoxyCodeLine{00486         DvItemListModel::Status status = DvItemListModel::VC\_None;}
\DoxyCodeLine{00487         \textcolor{comment}{// Check Version Control Status}}
\DoxyCodeLine{00488         \textcolor{keywordflow}{if} (pathType == \textcolor{stringliteral}{"{}tnz"{}}) \{}
\DoxyCodeLine{00489           \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *parent =}
\DoxyCodeLine{00490               \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(vcNode-\/>getParent());}
\DoxyCodeLine{00491           status = getItemVersionControlStatus(parent, path);}
\DoxyCodeLine{00492         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00493           \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp =}
\DoxyCodeLine{00494               \mbox{\hyperlink{class_t_project_manager_a150ca0d6e2eb171b8117b0c5f03dbfad}{TProjectManager::instance}}()-\/>\mbox{\hyperlink{class_t_project_manager_a29ae519b44c77674d68c993b7652a896}{projectFolderToProjectPath}}(path);}
\DoxyCodeLine{00495           status = getItemVersionControlStatus(vcNode, fp);}
\DoxyCodeLine{00496         \}}
\DoxyCodeLine{00497 }
\DoxyCodeLine{00498         \textcolor{keywordflow}{if} (status == DvItemListModel::VC\_ReadOnly) \{}
\DoxyCodeLine{00499           action = menu.addAction(tr(\textcolor{stringliteral}{"{}Edit"{}}));}
\DoxyCodeLine{00500           connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{00501                   SLOT(editCurrentVersionControlNode()));}
\DoxyCodeLine{00502         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (status == DvItemListModel::VC\_Edited) \{}
\DoxyCodeLine{00503           action = menu.addAction(\textcolor{stringliteral}{"{}Unlock"{}});}
\DoxyCodeLine{00504           connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{00505                   SLOT(unlockCurrentVersionControlNode()));}
\DoxyCodeLine{00506         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (status == DvItemListModel::VC\_Modified) \{}
\DoxyCodeLine{00507           action = menu.addAction(\textcolor{stringliteral}{"{}Revert"{}});}
\DoxyCodeLine{00508           connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{00509                   SLOT(revertCurrentVersionControlNode()));}
\DoxyCodeLine{00510         \}}
\DoxyCodeLine{00511       \}}
\DoxyCodeLine{00512 }
\DoxyCodeLine{00513       action = menu.addAction(tr(\textcolor{stringliteral}{"{}Get"{}}));}
\DoxyCodeLine{00514       connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{00515               SLOT(updateCurrentVersionControlNode()));}
\DoxyCodeLine{00516     \}}
\DoxyCodeLine{00517     \textcolor{keywordflow}{if} (fileExists) \{}
\DoxyCodeLine{00518       action = menu.addAction(tr(\textcolor{stringliteral}{"{}Put..."{}}));}
\DoxyCodeLine{00519       connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{00520               SLOT(putCurrentVersionControlNode()));}
\DoxyCodeLine{00521     \}}
\DoxyCodeLine{00522     \textcolor{keywordflow}{if} (vcNode-\/>isUnderVersionControl() \&\& fileExists) \{}
\DoxyCodeLine{00523       \mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *rootNode =}
\DoxyCodeLine{00524           \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *\textcolor{keyword}{>}(vcNode);}
\DoxyCodeLine{00525       \textcolor{keywordflow}{if} (!rootNode) \{}
\DoxyCodeLine{00526         action = menu.addAction(tr(\textcolor{stringliteral}{"{}Delete"{}}));}
\DoxyCodeLine{00527         connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{00528                 SLOT(deleteCurrentVersionControlNode()));}
\DoxyCodeLine{00529       \}}
\DoxyCodeLine{00530     \}}
\DoxyCodeLine{00531     \textcolor{keywordflow}{if} (pathType != \textcolor{stringliteral}{"{}tnz"{}} \&\& vcNode-\/>isUnderVersionControl()) \{}
\DoxyCodeLine{00532       menu.addSeparator();}
\DoxyCodeLine{00533 }
\DoxyCodeLine{00534       action = menu.addAction(tr(\textcolor{stringliteral}{"{}Refresh"{}}));}
\DoxyCodeLine{00535       connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{00536               SLOT(refreshCurrentVersionControlNode()));}
\DoxyCodeLine{00537 }
\DoxyCodeLine{00538       \textcolor{keywordflow}{if} (fileExists) \{}
\DoxyCodeLine{00539         menu.addSeparator();}
\DoxyCodeLine{00540 }
\DoxyCodeLine{00541         action = menu.addAction(tr(\textcolor{stringliteral}{"{}Cleanup"{}}));}
\DoxyCodeLine{00542         connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{00543                 SLOT(cleanupCurrentVersionControlNode()));}
\DoxyCodeLine{00544 }
\DoxyCodeLine{00545         action = menu.addAction(tr(\textcolor{stringliteral}{"{}Purge"{}}));}
\DoxyCodeLine{00546         connect(action, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{00547                 SLOT(purgeCurrentVersionControlNode()));}
\DoxyCodeLine{00548       \}}
\DoxyCodeLine{00549     \}}
\DoxyCodeLine{00550   \}}
\DoxyCodeLine{00551 }
\DoxyCodeLine{00552   \textcolor{keywordflow}{if} (!menu.isEmpty()) menu.exec(e-\/>globalPos());}
\DoxyCodeLine{00553 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a4305cc6b407a02e9ead0bef16d8715a6}\label{class_dv_dir_tree_view_a4305cc6b407a02e9ead0bef16d8715a6}} 
\index{DvDirTreeView@{DvDirTreeView}!createMenuAction@{createMenuAction}}
\index{createMenuAction@{createMenuAction}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{createMenuAction()}{createMenuAction()}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::create\+Menu\+Action (\begin{DoxyParamCaption}\item[{QMenu \&}]{menu,  }\item[{QString}]{name,  }\item[{const char $\ast$}]{slot,  }\item[{bool}]{enable = {\ttfamily true} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00558                                                                     \{}
\DoxyCodeLine{00559   QAction *act = menu.addAction(name);}
\DoxyCodeLine{00560   act-\/>setEnabled(enable);}
\DoxyCodeLine{00561   std::string slotName(slot);}
\DoxyCodeLine{00562   slotName = std::string(\textcolor{stringliteral}{"{}1"{}}) + slotName;}
\DoxyCodeLine{00563   connect(act, SIGNAL(triggered()), slotName.c\_str());}
\DoxyCodeLine{00564 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a2e741181f3be375f30b5eb9224b359a4}\label{class_dv_dir_tree_view_a2e741181f3be375f30b5eb9224b359a4}} 
\index{DvDirTreeView@{DvDirTreeView}!currentChanged@{currentChanged}}
\index{currentChanged@{currentChanged}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{currentChanged()}{currentChanged()}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::current\+Changed (\begin{DoxyParamCaption}\item[{const QModel\+Index \&}]{current,  }\item[{const QModel\+Index \&}]{previous }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00596                                                                 \{}
\DoxyCodeLine{00597   \textcolor{keywordflow}{if} (m\_globalSelectionEnabled) \{}
\DoxyCodeLine{00598     \textcolor{comment}{// rende la selezione corrente; serve per intercettare il comando MI\_Clear}}
\DoxyCodeLine{00599     makeCurrent();}
\DoxyCodeLine{00600   \}}
\DoxyCodeLine{00601 }
\DoxyCodeLine{00602   \textcolor{comment}{// Automatic refresh of version control node}}
\DoxyCodeLine{00603 }
\DoxyCodeLine{00604   \textcolor{keywordflow}{if} (refreshVersionControlEnabled() \&\& isVisible() \&\&}
\DoxyCodeLine{00605       Preferences::instance()-\/>isAutomaticSVNFolderRefreshEnabled()) \{}
\DoxyCodeLine{00606     \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *vcNode = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{00607         DvDirModel::instance()-\/>getNode(current));}
\DoxyCodeLine{00608     \textcolor{keywordflow}{if} (vcNode) refreshVersionControl(vcNode);}
\DoxyCodeLine{00609   \}}
\DoxyCodeLine{00610 }
\DoxyCodeLine{00611   emit \mbox{\hyperlink{class_dv_dir_tree_view_aad680d19ff1f4bdd5bb187476407a3d5}{currentNodeChanged}}();}
\DoxyCodeLine{00612 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a49147c35af2d2a879df51dc8c826d3bf}\label{class_dv_dir_tree_view_a49147c35af2d2a879df51dc8c826d3bf}} 
\index{DvDirTreeView@{DvDirTreeView}!deleteCurrentVersionControlNode@{deleteCurrentVersionControlNode}}
\index{deleteCurrentVersionControlNode@{deleteCurrentVersionControlNode}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{deleteCurrentVersionControlNode}{deleteCurrentVersionControlNode}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::delete\+Current\+Version\+Control\+Node (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01191                                                     \{}
\DoxyCodeLine{01192   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *vcNode =}
\DoxyCodeLine{01193       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(getCurrentNode());}
\DoxyCodeLine{01194   \textcolor{keywordflow}{if} (!vcNode) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01195   deleteVersionControl(vcNode);}
\DoxyCodeLine{01196 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a234d9472738267c19b7f5a6b5bf4678b}\label{class_dv_dir_tree_view_a234d9472738267c19b7f5a6b5bf4678b}} 
\index{DvDirTreeView@{DvDirTreeView}!deleteFolder@{deleteFolder}}
\index{deleteFolder@{deleteFolder}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{deleteFolder}{deleteFolder}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::delete\+Folder (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Deletes the selected folder. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00623                                  \{}
\DoxyCodeLine{00624   \mbox{\hyperlink{class_dv_dir_model}{DvDirModel}} *model = DvDirModel::instance();}
\DoxyCodeLine{00625   QModelIndex index = currentIndex();}
\DoxyCodeLine{00626   \textcolor{keywordflow}{if} (!index.isValid()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00627   QModelIndex parentIndex = index.parent();}
\DoxyCodeLine{00628   \textcolor{keywordflow}{if} (!parentIndex.isValid()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00629 }
\DoxyCodeLine{00630   \mbox{\hyperlink{class_dv_dir_model_file_folder_node}{DvDirModelFileFolderNode}} *node =}
\DoxyCodeLine{00631       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_model_file_folder_node}{DvDirModelFileFolderNode}} *\textcolor{keyword}{>}(model-\/>getNode(index));}
\DoxyCodeLine{00632   \textcolor{keywordflow}{if} (!node) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00633   \textcolor{keywordflow}{if} (!node-\/>isRenameEnabled()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00634   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = node-\/>getPath();}
\DoxyCodeLine{00635   \textcolor{keywordtype}{int} ret = DVGui::MsgBox(tr(\textcolor{stringliteral}{"{}Delete folder "{}}) + toQString(fp) + \textcolor{stringliteral}{"{}?"{}}, tr(\textcolor{stringliteral}{"{}Yes"{}}),}
\DoxyCodeLine{00636                           tr(\textcolor{stringliteral}{"{}No"{}}), 1);}
\DoxyCodeLine{00637   \textcolor{keywordflow}{if} (ret == 2 || ret == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00638 }
\DoxyCodeLine{00639   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00640     TSystem::rmDir(fp);}
\DoxyCodeLine{00641     IconGenerator::instance()-\/>remove(fp);}
\DoxyCodeLine{00642   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00643     DVGui::error(tr(\textcolor{stringliteral}{"{}It is not possible to delete the folder."{}}) +}
\DoxyCodeLine{00644                  toQString(fp));}
\DoxyCodeLine{00645     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00646   \}}
\DoxyCodeLine{00647 }
\DoxyCodeLine{00648   model-\/>removeRow(index.row(), parentIndex);}
\DoxyCodeLine{00649   \textcolor{comment}{// m\_model-\/>refresh(parentIndex);}}
\DoxyCodeLine{00650   setCurrentIndex(parentIndex);}
\DoxyCodeLine{00651 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a71f57e9935b94fa610ec803bf5d600c8}\label{class_dv_dir_tree_view_a71f57e9935b94fa610ec803bf5d600c8}} 
\index{DvDirTreeView@{DvDirTreeView}!deleteVersionControl@{deleteVersionControl}}
\index{deleteVersionControl@{deleteVersionControl}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{deleteVersionControl}{deleteVersionControl}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::delete\+Version\+Control (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dv_dir_version_control_node}{Dv\+Dir\+Version\+Control\+Node}} $\ast$}]{node }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00837                                                                       \{}
\DoxyCodeLine{00838   \textcolor{keywordflow}{if} (!node) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00839 }
\DoxyCodeLine{00840   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *parentNode =}
\DoxyCodeLine{00841       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(node-\/>getParent());}
\DoxyCodeLine{00842   \textcolor{keywordflow}{if} (!parentNode) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00843 }
\DoxyCodeLine{00844   \mbox{\hyperlink{class_version_control}{VersionControl}} *vc = VersionControl::instance();}
\DoxyCodeLine{00845 }
\DoxyCodeLine{00846   \textcolor{comment}{// Get the root node to retrieve username and password}}
\DoxyCodeLine{00847   \mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *rootNode = node-\/>getVersionControlRootNode();}
\DoxyCodeLine{00848   \textcolor{keywordflow}{if} (rootNode) \{}
\DoxyCodeLine{00849     vc-\/>setUserName(QString::fromStdWString(rootNode-\/>getUserName()));}
\DoxyCodeLine{00850     vc-\/>setPassword(QString::fromStdWString(rootNode-\/>getPassword()));}
\DoxyCodeLine{00851   \}}
\DoxyCodeLine{00852 }
\DoxyCodeLine{00853   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path   = node-\/>getPath();}
\DoxyCodeLine{00854   \textcolor{keywordtype}{bool} isSceneFile = path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}};}
\DoxyCodeLine{00855   \textcolor{keywordflow}{if} (path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}})}
\DoxyCodeLine{00856     vc-\/>deleteFiles(\textcolor{keyword}{this}, toQString(parentNode-\/>getPath()),}
\DoxyCodeLine{00857                     QStringList(QString::fromStdWString(node-\/>getName())));}
\DoxyCodeLine{00858   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{00859     vc-\/>deleteFolder(\textcolor{keyword}{this}, toQString(parentNode-\/>getPath()),}
\DoxyCodeLine{00860                      QString::fromStdWString(node-\/>getName()));}
\DoxyCodeLine{00861 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a6eda9a441e0f391fa69f6183e42f97e1}\label{class_dv_dir_tree_view_a6eda9a441e0f391fa69f6183e42f97e1}} 
\index{DvDirTreeView@{DvDirTreeView}!dragEnterEvent@{dragEnterEvent}}
\index{dragEnterEvent@{dragEnterEvent}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{dragEnterEvent()}{dragEnterEvent()}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::drag\+Enter\+Event (\begin{DoxyParamCaption}\item[{QDrag\+Enter\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00388                                                      \{}
\DoxyCodeLine{00389   \textcolor{keyword}{const} QMimeData *mimeData = e-\/>mimeData();}
\DoxyCodeLine{00390   \textcolor{keywordflow}{if} (!acceptResourceDrop(mimeData-\/>urls())) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00391   e-\/>accept();}
\DoxyCodeLine{00392 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_aae5f0b0eb9c5fd8ade83fb86a6fa43aa}\label{class_dv_dir_tree_view_aae5f0b0eb9c5fd8ade83fb86a6fa43aa}} 
\index{DvDirTreeView@{DvDirTreeView}!dragLeaveEvent@{dragLeaveEvent}}
\index{dragLeaveEvent@{dragLeaveEvent}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{dragLeaveEvent()}{dragLeaveEvent()}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::drag\+Leave\+Event (\begin{DoxyParamCaption}\item[{QDrag\+Leave\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00396                                                      \{}
\DoxyCodeLine{00397   m\_currentDropItem = 0;}
\DoxyCodeLine{00398   update();}
\DoxyCodeLine{00399 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_ad6f9704ae9c7ff4edabc3601997acebd}\label{class_dv_dir_tree_view_ad6f9704ae9c7ff4edabc3601997acebd}} 
\index{DvDirTreeView@{DvDirTreeView}!dragMoveEvent@{dragMoveEvent}}
\index{dragMoveEvent@{dragMoveEvent}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{dragMoveEvent()}{dragMoveEvent()}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::drag\+Move\+Event (\begin{DoxyParamCaption}\item[{QDrag\+Move\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00403                                                    \{}
\DoxyCodeLine{00404   \textcolor{keyword}{const} QMimeData *mimeData = e-\/>mimeData();}
\DoxyCodeLine{00405   \textcolor{keywordflow}{if} (!acceptResourceDrop(mimeData-\/>urls())) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00406   QModelIndex index = indexAt(e-\/>pos());}
\DoxyCodeLine{00407   \mbox{\hyperlink{class_dv_dir_model_file_folder_node}{DvDirModelFileFolderNode}} *folderNode =}
\DoxyCodeLine{00408       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_model_file_folder_node}{DvDirModelFileFolderNode}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{00409           DvDirModel::instance()-\/>getNode(index));}
\DoxyCodeLine{00410   \mbox{\hyperlink{class_dv_dir_model_node}{DvDirModelNode}} *node = DvDirModel::instance()-\/>getNode(index);}
\DoxyCodeLine{00411   \textcolor{keywordflow}{if} (!node-\/>isFolder()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00412   m\_currentDropItem = folderNode;}
\DoxyCodeLine{00413   update();}
\DoxyCodeLine{00414   e-\/>accept();}
\DoxyCodeLine{00415 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a5d37de32708bd16fccabe7b19e2872a2}\label{class_dv_dir_tree_view_a5d37de32708bd16fccabe7b19e2872a2}} 
\index{DvDirTreeView@{DvDirTreeView}!dropEvent@{dropEvent}}
\index{dropEvent@{dropEvent}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{dropEvent()}{dropEvent()}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::drop\+Event (\begin{DoxyParamCaption}\item[{QDrop\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00419                                            \{}
\DoxyCodeLine{00420   \textcolor{keyword}{const} QMimeData *mimeData = e-\/>mimeData();}
\DoxyCodeLine{00421   m\_currentDropItem         = 0;}
\DoxyCodeLine{00422   update();}
\DoxyCodeLine{00423   QModelIndex index = indexAt(e-\/>pos());}
\DoxyCodeLine{00424   \mbox{\hyperlink{class_dv_dir_model_file_folder_node}{DvDirModelFileFolderNode}} *folderNode =}
\DoxyCodeLine{00425       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_model_file_folder_node}{DvDirModelFileFolderNode}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{00426           DvDirModel::instance()-\/>getNode(index));}
\DoxyCodeLine{00427   \textcolor{keywordflow}{if} (!folderNode || !folderNode-\/>isFolder()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00428   \textcolor{keywordflow}{if} (!mimeData-\/>hasUrls()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00429   \textcolor{keywordtype}{int} count = 0;}
\DoxyCodeLine{00430   \textcolor{keywordflow}{for} (\textcolor{keyword}{const} QUrl \&url : mimeData-\/>urls()) \{}
\DoxyCodeLine{00431     \mbox{\hyperlink{class_t_file_path}{TFilePath}} srcFp(url.toLocalFile().toStdWString());}
\DoxyCodeLine{00432     \mbox{\hyperlink{class_t_file_path}{TFilePath}} dstFp = folderNode-\/>getPath();}
\DoxyCodeLine{00433 }
\DoxyCodeLine{00434     \textcolor{comment}{// Dropping file in the same directory that already exists should just be}}
\DoxyCodeLine{00435     \textcolor{comment}{// ignored}}
\DoxyCodeLine{00436     \textcolor{keywordflow}{if} (srcFp.getParentDir() == dstFp) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00437 }
\DoxyCodeLine{00438     \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = dstFp + \mbox{\hyperlink{class_t_file_path}{TFilePath}}(srcFp.getLevelNameW());}
\DoxyCodeLine{00439     \mbox{\hyperlink{class_name_builder}{NameBuilder}} *nameBuilder =}
\DoxyCodeLine{00440         NameBuilder::getBuilder(::to\_wstring(path.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}()));}
\DoxyCodeLine{00441     std::wstring levelNameOut;}
\DoxyCodeLine{00442     \textcolor{keywordflow}{do}}
\DoxyCodeLine{00443       levelNameOut = nameBuilder-\/>getNext();}
\DoxyCodeLine{00444     \textcolor{keywordflow}{while} (TSystem::doesExistFileOrLevel(path.\mbox{\hyperlink{class_t_file_path_a3ebf9ced558cfef97a60bba536b23c6f}{withName}}(levelNameOut)));}
\DoxyCodeLine{00445     dstFp = path.\mbox{\hyperlink{class_t_file_path_a3ebf9ced558cfef97a60bba536b23c6f}{withName}}(levelNameOut);}
\DoxyCodeLine{00446 }
\DoxyCodeLine{00447     \textcolor{keywordflow}{if} (dstFp != srcFp) \{}
\DoxyCodeLine{00448       \textcolor{keywordflow}{if} (TSystem::copyFileOrLevel(dstFp, srcFp)) \{}
\DoxyCodeLine{00449         TSystem::removeFileOrLevel(srcFp);}
\DoxyCodeLine{00450         FileBrowser::refreshFolder(srcFp.getParentDir());}
\DoxyCodeLine{00451       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00452         DVGui::error(tr(\textcolor{stringliteral}{"{}There was an error copying \%1 to \%2"{}})}
\DoxyCodeLine{00453                          .arg(toQString(srcFp))}
\DoxyCodeLine{00454                          .arg(toQString(dstFp)));}
\DoxyCodeLine{00455     \}}
\DoxyCodeLine{00456   \}}
\DoxyCodeLine{00457 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a4860ef6b1203e06927c6117ea5604726}\label{class_dv_dir_tree_view_a4860ef6b1203e06927c6117ea5604726}} 
\index{DvDirTreeView@{DvDirTreeView}!edit@{edit}}
\index{edit@{edit}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{edit()}{edit()}}
{\footnotesize\ttfamily bool Dv\+Dir\+Tree\+View\+::edit (\begin{DoxyParamCaption}\item[{const QModel\+Index \&}]{index,  }\item[{Edit\+Trigger}]{trigger,  }\item[{QEvent $\ast$}]{ev }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00617                                         \{}
\DoxyCodeLine{00618   \textcolor{keywordflow}{return} QAbstractItemView::edit(index, trigger, event);}
\DoxyCodeLine{00619 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a4d4c6a5a761d3d7a0fc6803e165cb440}\label{class_dv_dir_tree_view_a4d4c6a5a761d3d7a0fc6803e165cb440}} 
\index{DvDirTreeView@{DvDirTreeView}!editCurrentVersionControlNode@{editCurrentVersionControlNode}}
\index{editCurrentVersionControlNode@{editCurrentVersionControlNode}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{editCurrentVersionControlNode}{editCurrentVersionControlNode}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::edit\+Current\+Version\+Control\+Node (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01010                                                   \{}
\DoxyCodeLine{01011   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *vcNode =}
\DoxyCodeLine{01012       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(getCurrentNode());}
\DoxyCodeLine{01013   \textcolor{keywordflow}{if} (!vcNode) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01014 }
\DoxyCodeLine{01015   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = vcNode-\/>getPath();}
\DoxyCodeLine{01016   \textcolor{keywordflow}{if} (path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}}) \{}
\DoxyCodeLine{01017     QStringList files;}
\DoxyCodeLine{01018     files.append(QString::fromStdWString(vcNode-\/>getName()));}
\DoxyCodeLine{01019 }
\DoxyCodeLine{01020     \textcolor{keywordtype}{int} sceneIconsCount = 0;}
\DoxyCodeLine{01021 }
\DoxyCodeLine{01022     \mbox{\hyperlink{class_t_file_path}{TFilePath}} iconPath = \mbox{\hyperlink{class_toonz_scene_a2d97e9b3647bb45c0c992a6c92c659eb}{ToonzScene::getIconPath}}(path);}
\DoxyCodeLine{01023     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(iconPath).doesExist()) \{}
\DoxyCodeLine{01024       QDir dir(toQString(path.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}()));}
\DoxyCodeLine{01025 }
\DoxyCodeLine{01026 \textcolor{preprocessor}{\#ifdef MACOSX}}
\DoxyCodeLine{01027       files.append(dir.relativeFilePath(toQString(iconPath)));}
\DoxyCodeLine{01028 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01029       files.append(}
\DoxyCodeLine{01030           dir.relativeFilePath(toQString(iconPath)).replace(\textcolor{stringliteral}{"{}/"{}}, \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)"{}}));}
\DoxyCodeLine{01031 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01032 }
\DoxyCodeLine{01033       sceneIconsCount++;}
\DoxyCodeLine{01034     \}}
\DoxyCodeLine{01035     VersionControl::instance()-\/>lock(\textcolor{keyword}{this}, toQString(path.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}()),}
\DoxyCodeLine{01036                                      files, sceneIconsCount);}
\DoxyCodeLine{01037   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01038     \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp =}
\DoxyCodeLine{01039         \mbox{\hyperlink{class_t_project_manager_a150ca0d6e2eb171b8117b0c5f03dbfad}{TProjectManager::instance}}()-\/>\mbox{\hyperlink{class_t_project_manager_a29ae519b44c77674d68c993b7652a896}{projectFolderToProjectPath}}(path);}
\DoxyCodeLine{01040 }
\DoxyCodeLine{01041     \mbox{\hyperlink{class_t_project}{TProject}} *currentProject =}
\DoxyCodeLine{01042         \mbox{\hyperlink{class_t_project_manager_a150ca0d6e2eb171b8117b0c5f03dbfad}{TProjectManager::instance}}()-\/>\mbox{\hyperlink{class_t_project_manager_a5267cfeae48d4e7585c3fc56d8d5b0b3}{getCurrentProject}}().getPointer();}
\DoxyCodeLine{01043     \textcolor{keywordflow}{if} (!currentProject) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01044     \mbox{\hyperlink{class_t_file_path}{TFilePath}} sceneFolder =}
\DoxyCodeLine{01045         currentProject-\/>decode(currentProject-\/>getFolder(\mbox{\hyperlink{class_t_project_afa1aca692a03ae826a4d22565c7361cb}{TProject::Scenes}}));}
\DoxyCodeLine{01046     \mbox{\hyperlink{class_t_file_path}{TFilePath}} scenesDescPath = sceneFolder + \textcolor{stringliteral}{"{}scenes.xml"{}};}
\DoxyCodeLine{01047     QDir dir(toQString(fp.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}()));}
\DoxyCodeLine{01048 }
\DoxyCodeLine{01049     QStringList files;}
\DoxyCodeLine{01050     files.append(toQString(fp.\mbox{\hyperlink{class_t_file_path_ac17d65d827432f0fae28fed699bf4afa}{withoutParentDir}}()));}
\DoxyCodeLine{01051 }
\DoxyCodeLine{01052 \textcolor{preprocessor}{\#ifdef MACOSX}}
\DoxyCodeLine{01053     files.append(dir.relativeFilePath(toQString(scenesDescPath)));}
\DoxyCodeLine{01054 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01055     files.append(}
\DoxyCodeLine{01056         dir.relativeFilePath(toQString(scenesDescPath)).replace(\textcolor{stringliteral}{"{}/"{}}, \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)"{}}));}
\DoxyCodeLine{01057 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01058 }
\DoxyCodeLine{01059     VersionControl::instance()-\/>lock(\textcolor{keyword}{this}, toQString(path), files, 0);}
\DoxyCodeLine{01060   \}}
\DoxyCodeLine{01061 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_aa83cb9c84e22ca7df642dbd93fc99fa9}\label{class_dv_dir_tree_view_aa83cb9c84e22ca7df642dbd93fc99fa9}} 
\index{DvDirTreeView@{DvDirTreeView}!enableCommands@{enableCommands}}
\index{enableCommands@{enableCommands}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{enableCommands()}{enableCommands()}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::enable\+Commands (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_selection}{TSelection}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00589                                    \{}
\DoxyCodeLine{00590   enableCommand(\textcolor{keyword}{this}, MI\_Clear, \&\mbox{\hyperlink{class_dv_dir_tree_view_a234d9472738267c19b7f5a6b5bf4678b}{DvDirTreeView::deleteFolder}});}
\DoxyCodeLine{00591 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_ae14c086663e99351aa43d5fef675210a}\label{class_dv_dir_tree_view_ae14c086663e99351aa43d5fef675210a}} 
\index{DvDirTreeView@{DvDirTreeView}!enableGlobalSelection@{enableGlobalSelection}}
\index{enableGlobalSelection@{enableGlobalSelection}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{enableGlobalSelection()}{enableGlobalSelection()}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::enable\+Global\+Selection (\begin{DoxyParamCaption}\item[{bool}]{enabled }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00121                                            \{}
\DoxyCodeLine{00122     \textcolor{keywordflow}{if} (!enabled) makeNotCurrent();}
\DoxyCodeLine{00123     m\_globalSelectionEnabled = enabled;}
\DoxyCodeLine{00124   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_aa7cae32821cbb0daf6d3a5c337190535}\label{class_dv_dir_tree_view_aa7cae32821cbb0daf6d3a5c337190535}} 
\index{DvDirTreeView@{DvDirTreeView}!getCurrentDropNode@{getCurrentDropNode}}
\index{getCurrentDropNode@{getCurrentDropNode}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{getCurrentDropNode()}{getCurrentDropNode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_dv_dir_model_node}{Dv\+Dir\+Model\+Node}} $\ast$ Dv\+Dir\+Tree\+View\+::get\+Current\+Drop\+Node (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00114 \{ \textcolor{keywordflow}{return} m\_currentDropItem; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_aa24d2d3b94652f74d869c95028a9f231}\label{class_dv_dir_tree_view_aa24d2d3b94652f74d869c95028a9f231}} 
\index{DvDirTreeView@{DvDirTreeView}!getCurrentNode@{getCurrentNode}}
\index{getCurrentNode@{getCurrentNode}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{getCurrentNode()}{getCurrentNode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_dv_dir_model_node}{Dv\+Dir\+Model\+Node}} $\ast$ Dv\+Dir\+Tree\+View\+::get\+Current\+Node (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00581                                                     \{}
\DoxyCodeLine{00582   QModelIndex index    = currentIndex();}
\DoxyCodeLine{00583   \mbox{\hyperlink{class_dv_dir_model_node}{DvDirModelNode}} *node = DvDirModel::instance()-\/>getNode(index);}
\DoxyCodeLine{00584   \textcolor{keywordflow}{return} node;}
\DoxyCodeLine{00585 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a2f0d8472dec64502bc979c0a3122c524}\label{class_dv_dir_tree_view_a2f0d8472dec64502bc979c0a3122c524}} 
\index{DvDirTreeView@{DvDirTreeView}!getCurrentPath@{getCurrentPath}}
\index{getCurrentPath@{getCurrentPath}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{getCurrentPath()}{getCurrentPath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Dv\+Dir\+Tree\+View\+::get\+Current\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Returns the path of currently selected file or folder, or an empty one in case it couldn\textquotesingle{}t be extracted. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00572                                               \{}
\DoxyCodeLine{00573   \mbox{\hyperlink{class_dv_dir_model_file_folder_node}{DvDirModelFileFolderNode}} *node =}
\DoxyCodeLine{00574       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_model_file_folder_node}{DvDirModelFileFolderNode}} *\textcolor{keyword}{>}(getCurrentNode());}
\DoxyCodeLine{00575 }
\DoxyCodeLine{00576   \textcolor{keywordflow}{return} node ? node-\/>getPath() : \mbox{\hyperlink{class_t_file_path}{TFilePath}}();}
\DoxyCodeLine{00577 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00045}{Load\+Folder\+Popup\+::get\+Folder()}}.

\mbox{\Hypertarget{class_dv_dir_tree_view_a2e349a5fe6cd37b36e0fc1053e1864c0}\label{class_dv_dir_tree_view_a2e349a5fe6cd37b36e0fc1053e1864c0}} 
\index{DvDirTreeView@{DvDirTreeView}!getItemVersionControlStatus@{getItemVersionControlStatus}}
\index{getItemVersionControlStatus@{getItemVersionControlStatus}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{getItemVersionControlStatus()}{getItemVersionControlStatus()}}
{\footnotesize\ttfamily Dv\+Item\+List\+Model\+::\+Status Dv\+Dir\+Tree\+View\+::get\+Item\+Version\+Control\+Status (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dv_dir_version_control_node}{Dv\+Dir\+Version\+Control\+Node}} $\ast$}]{node,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01467                                                         \{}
\DoxyCodeLine{01468   \textcolor{keywordflow}{if} (!node) \textcolor{keywordflow}{return} DvItemListModel::VC\_None;}
\DoxyCodeLine{01469 }
\DoxyCodeLine{01470   QString name = toQString(fp.\mbox{\hyperlink{class_t_file_path_ac17d65d827432f0fae28fed699bf4afa}{withoutParentDir}}());}
\DoxyCodeLine{01471 }
\DoxyCodeLine{01472   QDir dir(toQString(node-\/>getPath()));}
\DoxyCodeLine{01473   \mbox{\hyperlink{class_t_file_status}{TFileStatus}} fs(node-\/>getPath() + name.toStdWString());}
\DoxyCodeLine{01474 }
\DoxyCodeLine{01475   \mbox{\hyperlink{struct_s_v_n_status}{SVNStatus}} s = node-\/>getVersionControlStatus(name);}
\DoxyCodeLine{01476   \textcolor{keywordflow}{if} (s.m\_path == name) \{}
\DoxyCodeLine{01477     \textcolor{keywordflow}{if} (s.m\_item == \textcolor{stringliteral}{"{}missing"{}} ||}
\DoxyCodeLine{01478         (s.m\_item == \textcolor{stringliteral}{"{}none"{}} \&\& s.m\_repoStatus == \textcolor{stringliteral}{"{}added"{}}))}
\DoxyCodeLine{01479       \textcolor{keywordflow}{return} DvItemListModel::VC\_Missing;}
\DoxyCodeLine{01480     \textcolor{keywordflow}{if} (s.m\_item == \textcolor{stringliteral}{"{}unversioned"{}}) \textcolor{keywordflow}{return} DvItemListModel::VC\_Unversioned;}
\DoxyCodeLine{01481     \textcolor{comment}{// If, for some errors, there is some item added locally but not committed}}
\DoxyCodeLine{01482     \textcolor{comment}{// yet, use the modified status}}
\DoxyCodeLine{01483     \textcolor{keywordflow}{if} (s.m\_item == \textcolor{stringliteral}{"{}modified"{}} || s.m\_item == \textcolor{stringliteral}{"{}added"{}})}
\DoxyCodeLine{01484       \textcolor{keywordflow}{return} DvItemListModel::VC\_Modified;}
\DoxyCodeLine{01485     \textcolor{keywordflow}{if} (s.m\_isPartialEdited) \{}
\DoxyCodeLine{01486       QString from                          = QString::number(s.m\_editFrom);}
\DoxyCodeLine{01487       QString to                            = QString::number(s.m\_editTo);}
\DoxyCodeLine{01488       \mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *rootNode = node-\/>getVersionControlRootNode();}
\DoxyCodeLine{01489       QString userName = QString::fromStdWString(rootNode-\/>getUserName());}
\DoxyCodeLine{01490       QString hostName = TSystem::getHostName();}
\DoxyCodeLine{01491 }
\DoxyCodeLine{01492       \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp(s.m\_path.toStdWString());}
\DoxyCodeLine{01493       QString tempFileName = QString::fromStdWString(fp.getWideName()) + \textcolor{stringliteral}{"{}\_"{}} +}
\DoxyCodeLine{01494                              userName + \textcolor{stringliteral}{"{}\_"{}} + hostName + \textcolor{stringliteral}{"{}\_"{}} + from + \textcolor{stringliteral}{"{}-\/"{}} + to +}
\DoxyCodeLine{01495                              \textcolor{stringliteral}{"{}."{}} + QString::fromStdString(fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}());}
\DoxyCodeLine{01496 }
\DoxyCodeLine{01497       \textcolor{keywordflow}{if} (dir.exists(tempFileName))}
\DoxyCodeLine{01498         \textcolor{keywordflow}{return} DvItemListModel::VC\_PartialModified;}
\DoxyCodeLine{01499       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01500         \textcolor{keywordflow}{return} DvItemListModel::VC\_PartialEdited;}
\DoxyCodeLine{01501     \}}
\DoxyCodeLine{01502     \textcolor{keywordflow}{if} (s.m\_isPartialLocked) \textcolor{keywordflow}{return} DvItemListModel::VC\_PartialLocked;}
\DoxyCodeLine{01503     \textcolor{keywordflow}{if} (s.m\_isLocked) \{}
\DoxyCodeLine{01504       \mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *rootNode = node-\/>getVersionControlRootNode();}
\DoxyCodeLine{01505       \textcolor{keywordflow}{if} (rootNode) \{}
\DoxyCodeLine{01506         \textcolor{keywordflow}{if} (QString::fromStdWString(rootNode-\/>getUserName()) != s.m\_lockOwner ||}
\DoxyCodeLine{01507             TSystem::getHostName() != s.m\_lockHostName)}
\DoxyCodeLine{01508           \textcolor{keywordflow}{return} DvItemListModel::VC\_Locked;}
\DoxyCodeLine{01509         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (s.m\_item == \textcolor{stringliteral}{"{}normal"{}} \&\& s.m\_repoStatus == \textcolor{stringliteral}{"{}none"{}})}
\DoxyCodeLine{01510           \textcolor{keywordflow}{return} DvItemListModel::VC\_Edited;}
\DoxyCodeLine{01511       \}}
\DoxyCodeLine{01512     \}}
\DoxyCodeLine{01513     \textcolor{comment}{// Pay attention: "{}ToUpdate"{} is more important than "{}ReadOnly"{}}}
\DoxyCodeLine{01514     \textcolor{keywordflow}{if} (s.m\_item == \textcolor{stringliteral}{"{}normal"{}} \&\& s.m\_repoStatus == \textcolor{stringliteral}{"{}modified"{}})}
\DoxyCodeLine{01515       \textcolor{keywordflow}{return} DvItemListModel::VC\_ToUpdate;}
\DoxyCodeLine{01516     \textcolor{keywordflow}{if} (!fs.isWritable() || s.m\_item == \textcolor{stringliteral}{"{}normal"{}})}
\DoxyCodeLine{01517       \textcolor{keywordflow}{return} DvItemListModel::VC\_ReadOnly;}
\DoxyCodeLine{01518   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (fp.\mbox{\hyperlink{class_t_file_path_a698bbf714436eb6923359044900cde2b}{getDots}}() == \textcolor{stringliteral}{"{}.."{}}) \{}
\DoxyCodeLine{01519     \textcolor{comment}{// Get the files list to control its status...}}
\DoxyCodeLine{01520     QStringList levelNames = getLevelFileNames(fp);}
\DoxyCodeLine{01521 }
\DoxyCodeLine{01522     \textcolor{keywordflow}{if} (levelNames.isEmpty()) \textcolor{keywordflow}{return} DvItemListModel::VC\_Missing;}
\DoxyCodeLine{01523 }
\DoxyCodeLine{01524     \mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *rootNode = node-\/>getVersionControlRootNode();}
\DoxyCodeLine{01525 }
\DoxyCodeLine{01526     \textcolor{comment}{// Browse the files and count the single status}}
\DoxyCodeLine{01527     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} missingCount = 0, normalCount = 0, lockedCount = 0,}
\DoxyCodeLine{01528                  unversionedCount = 0, readOnlyCount = 0, modifiedCount = 0;}
\DoxyCodeLine{01529     \textcolor{keywordtype}{int} levelCount = levelNames.size();}
\DoxyCodeLine{01530 }
\DoxyCodeLine{01531     \textcolor{comment}{// In the meantime I will set the from and to range index}}
\DoxyCodeLine{01532     \textcolor{keywordtype}{int} from = 0, to = 0;}
\DoxyCodeLine{01533     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < levelCount; i++) \{}
\DoxyCodeLine{01534       \mbox{\hyperlink{struct_s_v_n_status}{SVNStatus}} s = node-\/>getVersionControlStatus(levelNames.at(i));}
\DoxyCodeLine{01535       \mbox{\hyperlink{class_t_file_status}{TFileStatus}} fs(node-\/>getPath() + levelNames.at(i).toStdWString());}
\DoxyCodeLine{01536 }
\DoxyCodeLine{01537       \textcolor{keywordflow}{if} (s.m\_item == \textcolor{stringliteral}{"{}missing"{}} ||}
\DoxyCodeLine{01538           (s.m\_item == \textcolor{stringliteral}{"{}none"{}} \&\& s.m\_repoStatus == \textcolor{stringliteral}{"{}added"{}}))}
\DoxyCodeLine{01539         missingCount++;}
\DoxyCodeLine{01540       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (s.m\_item == \textcolor{stringliteral}{"{}modified"{}})}
\DoxyCodeLine{01541         modifiedCount++;}
\DoxyCodeLine{01542       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (s.m\_isLocked) \{}
\DoxyCodeLine{01543         \textcolor{keywordflow}{if} (QString::fromStdWString(rootNode-\/>getUserName()) != s.m\_lockOwner)}
\DoxyCodeLine{01544           lockedCount++;}
\DoxyCodeLine{01545         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01546           \textcolor{keywordflow}{if} (from == 0) \{}
\DoxyCodeLine{01547             from = i + 1;}
\DoxyCodeLine{01548             to   = i + 1;}
\DoxyCodeLine{01549           \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01550             to = i + 1;}
\DoxyCodeLine{01551           normalCount++;}
\DoxyCodeLine{01552         \}}
\DoxyCodeLine{01553       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (s.m\_item == \textcolor{stringliteral}{"{}unversioned"{}})}
\DoxyCodeLine{01554         unversionedCount++;}
\DoxyCodeLine{01555       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (s.m\_item == \textcolor{stringliteral}{"{}normal"{}} \&\& s.m\_repoStatus == \textcolor{stringliteral}{"{}modified"{}})}
\DoxyCodeLine{01556         \textcolor{keywordflow}{return} DvItemListModel::VC\_ToUpdate;}
\DoxyCodeLine{01557       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!fs.isWritable() || s.m\_item == \textcolor{stringliteral}{"{}normal"{}})}
\DoxyCodeLine{01558         readOnlyCount++;}
\DoxyCodeLine{01559     \}}
\DoxyCodeLine{01560 }
\DoxyCodeLine{01561     \textcolor{keywordflow}{if} (missingCount != 0) \{}
\DoxyCodeLine{01562       \textcolor{keywordflow}{if} (missingCount == levelCount)}
\DoxyCodeLine{01563         \textcolor{keywordflow}{return} DvItemListModel::VC\_Missing;}
\DoxyCodeLine{01564       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01565         \textcolor{keywordflow}{return} DvItemListModel::VC\_ToUpdate;}
\DoxyCodeLine{01566     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (unversionedCount != 0)}
\DoxyCodeLine{01567       \textcolor{keywordflow}{return} DvItemListModel::VC\_Unversioned;}
\DoxyCodeLine{01568     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (normalCount != 0) \{}
\DoxyCodeLine{01569       \textcolor{keywordflow}{if} (normalCount == levelCount)}
\DoxyCodeLine{01570         \textcolor{keywordflow}{return} DvItemListModel::VC\_Edited;}
\DoxyCodeLine{01571       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (modifiedCount == 0) \{}
\DoxyCodeLine{01572         \textcolor{comment}{// Check if exists the temporary hook file}}
\DoxyCodeLine{01573         \textcolor{keywordflow}{if} (from != -\/1 \&\& to != -\/1) \{}
\DoxyCodeLine{01574           \mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *rootNode =}
\DoxyCodeLine{01575               node-\/>getVersionControlRootNode();}
\DoxyCodeLine{01576           QString userName = QString::fromStdWString(rootNode-\/>getUserName());}
\DoxyCodeLine{01577           QString hostName = TSystem::getHostName();}
\DoxyCodeLine{01578 }
\DoxyCodeLine{01579           QString tempFileName =}
\DoxyCodeLine{01580               QString::fromStdWString(fp.getWideName()) + \textcolor{stringliteral}{"{}\_"{}} + userName + \textcolor{stringliteral}{"{}\_"{}} +}
\DoxyCodeLine{01581               hostName + \textcolor{stringliteral}{"{}\_"{}} + QString::number(from) + \textcolor{stringliteral}{"{}-\/"{}} +}
\DoxyCodeLine{01582               QString::number(to) + \textcolor{stringliteral}{"{}."{}} + QString::fromStdString(fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}());}
\DoxyCodeLine{01583 }
\DoxyCodeLine{01584           \mbox{\hyperlink{class_t_file_path}{TFilePath}} hookFile = \mbox{\hyperlink{class_t_xsh_simple_level_a23704b0d8be9290a8ab9c72c3139958b}{TXshSimpleLevel::getHookPath}}(}
\DoxyCodeLine{01585               fp.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() + tempFileName.toStdWString());}
\DoxyCodeLine{01586           \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(hookFile).doesExist())}
\DoxyCodeLine{01587             \textcolor{keywordflow}{return} DvItemListModel::VC\_PartialModified;}
\DoxyCodeLine{01588         \}}
\DoxyCodeLine{01589         \textcolor{keywordflow}{return} DvItemListModel::VC\_PartialEdited;}
\DoxyCodeLine{01590       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (modifiedCount != 0)}
\DoxyCodeLine{01591         \textcolor{keywordflow}{return} DvItemListModel::VC\_PartialModified;}
\DoxyCodeLine{01592     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (modifiedCount != 0) \{}
\DoxyCodeLine{01593       \textcolor{keywordflow}{if} (modifiedCount == levelCount)}
\DoxyCodeLine{01594         \textcolor{keywordflow}{return} DvItemListModel::VC\_Modified;}
\DoxyCodeLine{01595       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01596         \textcolor{keywordflow}{return} DvItemListModel::VC\_PartialModified;}
\DoxyCodeLine{01597     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (lockedCount != 0) \{}
\DoxyCodeLine{01598       \textcolor{keywordflow}{if} (lockedCount == levelCount)}
\DoxyCodeLine{01599         \textcolor{keywordflow}{return} DvItemListModel::VC\_Locked;}
\DoxyCodeLine{01600       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01601         \textcolor{keywordflow}{return} DvItemListModel::VC\_PartialLocked;}
\DoxyCodeLine{01602     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (readOnlyCount == levelCount)}
\DoxyCodeLine{01603       \textcolor{keywordflow}{return} DvItemListModel::VC\_ReadOnly;}
\DoxyCodeLine{01604     \textcolor{keywordflow}{return} DvItemListModel::VC\_None;}
\DoxyCodeLine{01605   \}}
\DoxyCodeLine{01606   \textcolor{keywordflow}{return} DvItemListModel::VC\_None;}
\DoxyCodeLine{01607 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_afc4df0053f2e431425439c1e4219085b}\label{class_dv_dir_tree_view_afc4df0053f2e431425439c1e4219085b}} 
\index{DvDirTreeView@{DvDirTreeView}!isEmpty@{isEmpty}}
\index{isEmpty@{isEmpty}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{isEmpty()}{isEmpty()}}
{\footnotesize\ttfamily bool Dv\+Dir\+Tree\+View\+::is\+Empty (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_selection}{TSelection}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00117 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_aca54de1925f05fa9365ab49d46cbc07d}\label{class_dv_dir_tree_view_aca54de1925f05fa9365ab49d46cbc07d}} 
\index{DvDirTreeView@{DvDirTreeView}!listVersionControl@{listVersionControl}}
\index{listVersionControl@{listVersionControl}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{listVersionControl}{listVersionControl}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::list\+Version\+Control (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dv_dir_version_control_node}{Dv\+Dir\+Version\+Control\+Node}} $\ast$}]{last\+Existing\+Node,  }\item[{const QString \&}]{relative\+Path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00866                                                                             \{}
\DoxyCodeLine{00867   \textcolor{keywordflow}{if} (!lastExistingNode) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00868 }
\DoxyCodeLine{00869   m\_getSVNListRelativePath = relativePath;}
\DoxyCodeLine{00870 }
\DoxyCodeLine{00871   \textcolor{comment}{// Get existing node info (to retrieve its repository URL)}}
\DoxyCodeLine{00872   QStringList args;}
\DoxyCodeLine{00873   args << \textcolor{stringliteral}{"{}info"{}};}
\DoxyCodeLine{00874   args << \textcolor{stringliteral}{"{}-\/-\/xml"{}};}
\DoxyCodeLine{00875 }
\DoxyCodeLine{00876   m\_thread.disconnect(SIGNAL(done(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00877   m\_thread.disconnect(SIGNAL(error(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00878   connect(\&m\_thread, SIGNAL(error(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00879           SLOT(onRefreshStatusError(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00880   connect(\&m\_thread, SIGNAL(done(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00881           SLOT(onInfoDone(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00882   m\_thread.executeCommand(toQString(lastExistingNode-\/>getPath()), \textcolor{stringliteral}{"{}svn"{}}, args);}
\DoxyCodeLine{00883 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a170d250c991c779e31bda1ec7c76c648}\label{class_dv_dir_tree_view_a170d250c991c779e31bda1ec7c76c648}} 
\index{DvDirTreeView@{DvDirTreeView}!onCheckOutDone@{onCheckOutDone}}
\index{onCheckOutDone@{onCheckOutDone}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{onCheckOutDone}{onCheckOutDone}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::on\+Check\+Out\+Done (\begin{DoxyParamCaption}\item[{const QString \&}]{text }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01245                                                       \{}
\DoxyCodeLine{01246   disconnect(\&m\_thread, SIGNAL(error(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{01247              SLOT(onCheckOutError(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{01248   disconnect(\&m\_thread, SIGNAL(done(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{01249              SLOT(onCheckOutDone(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{01250 }
\DoxyCodeLine{01251   \textcolor{keywordflow}{if} (isVisible()) \{}
\DoxyCodeLine{01252     \textcolor{keywordflow}{if} (!m\_currentRefreshedNode) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01253 }
\DoxyCodeLine{01254     m\_currentRefreshedNode-\/>restoreName();}
\DoxyCodeLine{01255     QModelIndex index =}
\DoxyCodeLine{01256         DvDirModel::instance()-\/>getIndexByNode(m\_currentRefreshedNode);}
\DoxyCodeLine{01257     DvDirModel::instance()-\/>refresh(index);}
\DoxyCodeLine{01258   \}}
\DoxyCodeLine{01259   setRefreshVersionControlEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01260   \textcolor{comment}{// Refresh the node}}
\DoxyCodeLine{01261   refreshCurrentVersionControlNode();}
\DoxyCodeLine{01262 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_ada1e4e96a6d9fb56afeb2aafb8796314}\label{class_dv_dir_tree_view_ada1e4e96a6d9fb56afeb2aafb8796314}} 
\index{DvDirTreeView@{DvDirTreeView}!onCheckOutError@{onCheckOutError}}
\index{onCheckOutError@{onCheckOutError}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{onCheckOutError}{onCheckOutError}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::on\+Check\+Out\+Error (\begin{DoxyParamCaption}\item[{const QString \&}]{text }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01228                                                        \{}
\DoxyCodeLine{01229   disconnect(\&m\_thread, SIGNAL(error(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{01230              SLOT(onCheckOutError(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{01231   disconnect(\&m\_thread, SIGNAL(done(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{01232              SLOT(onCheckOutDone(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{01233 }
\DoxyCodeLine{01234   \textcolor{keywordflow}{if} (isVisible()) \{}
\DoxyCodeLine{01235     \textcolor{keywordflow}{if} (m\_currentRefreshedNode) m\_currentRefreshedNode-\/>restoreName();}
\DoxyCodeLine{01236   \}}
\DoxyCodeLine{01237 }
\DoxyCodeLine{01238   setRefreshVersionControlEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01239 }
\DoxyCodeLine{01240   DVGui::error(tr(\textcolor{stringliteral}{"{}Refresh operation failed:\(\backslash\)n"{}}) + text);}
\DoxyCodeLine{01241 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a663b7aff8af89ca5cb3a4eef16ebcc73}\label{class_dv_dir_tree_view_a663b7aff8af89ca5cb3a4eef16ebcc73}} 
\index{DvDirTreeView@{DvDirTreeView}!onCheckPartialLockDone@{onCheckPartialLockDone}}
\index{onCheckPartialLockDone@{onCheckPartialLockDone}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{onCheckPartialLockDone}{onCheckPartialLockDone}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::on\+Check\+Partial\+Lock\+Done (\begin{DoxyParamCaption}\item[{const QString \&}]{xml\+Results }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01410                                                                     \{}
\DoxyCodeLine{01411   \textcolor{keywordflow}{if} (!m\_currentRefreshedNode) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01412 }
\DoxyCodeLine{01413   m\_thread.disconnect(SIGNAL(done(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{01414   m\_thread.disconnect(SIGNAL(error(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{01415 }
\DoxyCodeLine{01416   \mbox{\hyperlink{class_s_v_n_partial_lock_reader}{SVNPartialLockReader}} reader(xmlResults);}
\DoxyCodeLine{01417   QList<SVNPartialLock> list = reader.getPartialLock();}
\DoxyCodeLine{01418 }
\DoxyCodeLine{01419   QString userName = VersionControl::instance()-\/>getUserName();}
\DoxyCodeLine{01420   QString hostName = QHostInfo::localHostName();}
\DoxyCodeLine{01421 }
\DoxyCodeLine{01422   \textcolor{keywordtype}{int} count = list.size();}
\DoxyCodeLine{01423   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < count; i++) \{}
\DoxyCodeLine{01424     \mbox{\hyperlink{struct_s_v_n_partial_lock}{SVNPartialLock}} lock = list.at(i);}
\DoxyCodeLine{01425 }
\DoxyCodeLine{01426     \textcolor{comment}{// Check if the pair SVN username / Hostname is inside the lock list...}}
\DoxyCodeLine{01427     \textcolor{keywordtype}{bool} havePartialLock           = \textcolor{keyword}{false};}
\DoxyCodeLine{01428     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} from              = 0;}
\DoxyCodeLine{01429     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} to                = 0;}
\DoxyCodeLine{01430     QList<SVNPartialLockInfo> list = lock.m\_partialLockList;}
\DoxyCodeLine{01431     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < list.size(); i++) \{}
\DoxyCodeLine{01432       \mbox{\hyperlink{struct_s_v_n_partial_lock_info}{SVNPartialLockInfo}} info = list.at(i);}
\DoxyCodeLine{01433       \textcolor{keywordflow}{if} (info.m\_userName == userName \&\& info.m\_hostName == hostName) \{}
\DoxyCodeLine{01434         havePartialLock = \textcolor{keyword}{true};}
\DoxyCodeLine{01435         from            = info.m\_from;}
\DoxyCodeLine{01436         to              = info.m\_to;}
\DoxyCodeLine{01437         \textcolor{keywordflow}{break};}
\DoxyCodeLine{01438       \}}
\DoxyCodeLine{01439     \}}
\DoxyCodeLine{01440 }
\DoxyCodeLine{01441     \textcolor{comment}{// Modify the SVNStatus}}
\DoxyCodeLine{01442     \mbox{\hyperlink{struct_s_v_n_status}{SVNStatus}} s =}
\DoxyCodeLine{01443         m\_currentRefreshedNode-\/>getVersionControlStatus(lock.m\_fileName);}
\DoxyCodeLine{01444 }
\DoxyCodeLine{01445     \textcolor{keywordflow}{if} (havePartialLock) \{}
\DoxyCodeLine{01446       s.m\_isPartialEdited = \textcolor{keyword}{true};}
\DoxyCodeLine{01447       s.m\_isPartialLocked = \textcolor{keyword}{false};}
\DoxyCodeLine{01448       s.m\_editFrom        = from;}
\DoxyCodeLine{01449       s.m\_editTo          = to;}
\DoxyCodeLine{01450     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01451       s.m\_isPartialEdited = \textcolor{keyword}{false};}
\DoxyCodeLine{01452       s.m\_isPartialLocked = \textcolor{keyword}{true};}
\DoxyCodeLine{01453     \}}
\DoxyCodeLine{01454     m\_currentRefreshedNode-\/>insertVersionControlStatus(lock.m\_fileName, s);}
\DoxyCodeLine{01455   \}}
\DoxyCodeLine{01456   m\_currentRefreshedNode-\/>restoreName();}
\DoxyCodeLine{01457   QModelIndex index =}
\DoxyCodeLine{01458       DvDirModel::instance()-\/>getIndexByNode(m\_currentRefreshedNode);}
\DoxyCodeLine{01459   DvDirModel::instance()-\/>refresh(index);}
\DoxyCodeLine{01460   emit \mbox{\hyperlink{class_dv_dir_tree_view_aad680d19ff1f4bdd5bb187476407a3d5}{currentNodeChanged}}();}
\DoxyCodeLine{01461   setRefreshVersionControlEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01462 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_adae5d2d321da3bc70f2b31ef3e2c240a}\label{class_dv_dir_tree_view_adae5d2d321da3bc70f2b31ef3e2c240a}} 
\index{DvDirTreeView@{DvDirTreeView}!onCheckPartialLockError@{onCheckPartialLockError}}
\index{onCheckPartialLockError@{onCheckPartialLockError}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{onCheckPartialLockError}{onCheckPartialLockError}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::on\+Check\+Partial\+Lock\+Error (\begin{DoxyParamCaption}\item[{const QString \&}]{text }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01401                                                                \{}
\DoxyCodeLine{01402   m\_thread.disconnect(SIGNAL(done(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{01403   m\_thread.disconnect(SIGNAL(error(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{01404   setRefreshVersionControlEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01405   DVGui::error(tr(\textcolor{stringliteral}{"{}Refresh operation failed:\(\backslash\)n"{}}) + text);}
\DoxyCodeLine{01406 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a730722b91ebd97e786bd7e76179121c5}\label{class_dv_dir_tree_view_a730722b91ebd97e786bd7e76179121c5}} 
\index{DvDirTreeView@{DvDirTreeView}!onCollapsed@{onCollapsed}}
\index{onCollapsed@{onCollapsed}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{onCollapsed}{onCollapsed}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::on\+Collapsed (\begin{DoxyParamCaption}\item[{const QModel\+Index \&}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01648                                                         \{}
\DoxyCodeLine{01649   QStringList paths;}
\DoxyCodeLine{01650   \textcolor{keywordtype}{int} count = DvDirModel::instance()-\/>rowCount(index);}
\DoxyCodeLine{01651   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} r = 0; r < count; r++) \{}
\DoxyCodeLine{01652     QModelIndex child = DvDirModel::instance()-\/>index(r, 0, index);}
\DoxyCodeLine{01653     getExpandedPathsRecursive(child, paths);}
\DoxyCodeLine{01654   \}}
\DoxyCodeLine{01655   MyFileSystemWatcher::instance()-\/>removePaths(paths);}
\DoxyCodeLine{01656 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_ad1071b815ee5494fe5e89e9a3403ed3d}\label{class_dv_dir_tree_view_ad1071b815ee5494fe5e89e9a3403ed3d}} 
\index{DvDirTreeView@{DvDirTreeView}!onExpanded@{onExpanded}}
\index{onExpanded@{onExpanded}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{onExpanded}{onExpanded}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::on\+Expanded (\begin{DoxyParamCaption}\item[{const QModel\+Index \&}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01638                                                        \{}
\DoxyCodeLine{01639   QStringList paths;}
\DoxyCodeLine{01640   \textcolor{keywordtype}{int} count = DvDirModel::instance()-\/>rowCount(index);}
\DoxyCodeLine{01641   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} r = 0; r < count; r++) \{}
\DoxyCodeLine{01642     QModelIndex child = DvDirModel::instance()-\/>index(r, 0, index);}
\DoxyCodeLine{01643     getExpandedPathsRecursive(child, paths);}
\DoxyCodeLine{01644   \}}
\DoxyCodeLine{01645   MyFileSystemWatcher::instance()-\/>addPaths(paths);}
\DoxyCodeLine{01646 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_af86b5790d163da501eaf13f46f609851}\label{class_dv_dir_tree_view_af86b5790d163da501eaf13f46f609851}} 
\index{DvDirTreeView@{DvDirTreeView}!onInfoDone@{onInfoDone}}
\index{onInfoDone@{onInfoDone}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{onInfoDone}{onInfoDone}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::on\+Info\+Done (\begin{DoxyParamCaption}\item[{const QString \&}]{xml\+Response }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01266                                                          \{}
\DoxyCodeLine{01267   \textcolor{comment}{// Retrieve the node Repository URL}}
\DoxyCodeLine{01268   \mbox{\hyperlink{class_s_v_n_info_reader}{SVNInfoReader}} ir(xmlResponse);}
\DoxyCodeLine{01269   QString repositoryURL = ir.getURL() + \textcolor{stringliteral}{"{}/"{}} + m\_getSVNListRelativePath;}
\DoxyCodeLine{01270 }
\DoxyCodeLine{01271   QStringList args;}
\DoxyCodeLine{01272   args << \textcolor{stringliteral}{"{}list"{}};}
\DoxyCodeLine{01273   args << repositoryURL;}
\DoxyCodeLine{01274   args << \textcolor{stringliteral}{"{}-\/-\/xml"{}};}
\DoxyCodeLine{01275 }
\DoxyCodeLine{01276   disconnect(\&m\_thread, SIGNAL(done(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{01277              SLOT(onInfoDone(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{01278   \textcolor{keywordflow}{if} (!m\_currentRefreshedNode) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01279 }
\DoxyCodeLine{01280   connect(\&m\_thread, SIGNAL(done(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{01281           SLOT(onListDone(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{01282   m\_thread.executeCommand(toQString(m\_currentRefreshedNode-\/>getPath()), \textcolor{stringliteral}{"{}svn"{}},}
\DoxyCodeLine{01283                           args);}
\DoxyCodeLine{01284 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_ac1349167407151ea4ebcad205ff2673f}\label{class_dv_dir_tree_view_ac1349167407151ea4ebcad205ff2673f}} 
\index{DvDirTreeView@{DvDirTreeView}!onListDone@{onListDone}}
\index{onListDone@{onListDone}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{onListDone}{onListDone}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::on\+List\+Done (\begin{DoxyParamCaption}\item[{const QString \&}]{xml\+Response }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01288                                                          \{}
\DoxyCodeLine{01289   \textcolor{keywordflow}{if} (!m\_currentRefreshedNode) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01290 }
\DoxyCodeLine{01291   m\_currentRefreshedNode-\/>restoreName();}
\DoxyCodeLine{01292 }
\DoxyCodeLine{01293   \mbox{\hyperlink{class_s_v_n_list_reader}{SVNListReader}} lr(xmlResponse);}
\DoxyCodeLine{01294   QStringList dirs = lr.getDirs();}
\DoxyCodeLine{01295 }
\DoxyCodeLine{01296   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < dirs.size(); i++) \{}
\DoxyCodeLine{01297     \mbox{\hyperlink{struct_s_v_n_status}{SVNStatus}} s;}
\DoxyCodeLine{01298     s.m\_item = \textcolor{stringliteral}{"{}missing"{}};}
\DoxyCodeLine{01299     s.m\_path = dirs.at(i);}
\DoxyCodeLine{01300     m\_currentRefreshedNode-\/>insertVersionControlStatus(s.m\_path, s);}
\DoxyCodeLine{01301   \}}
\DoxyCodeLine{01302 }
\DoxyCodeLine{01303   QModelIndex index =}
\DoxyCodeLine{01304       DvDirModel::instance()-\/>getIndexByNode(m\_currentRefreshedNode);}
\DoxyCodeLine{01305   DvDirModel::instance()-\/>refresh(index);}
\DoxyCodeLine{01306 }
\DoxyCodeLine{01307   setRefreshVersionControlEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01308 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_aa9e56f20166d48a1a2559deac9fb966e}\label{class_dv_dir_tree_view_aa9e56f20166d48a1a2559deac9fb966e}} 
\index{DvDirTreeView@{DvDirTreeView}!onMonitoredDirectoryChanged@{onMonitoredDirectoryChanged}}
\index{onMonitoredDirectoryChanged@{onMonitoredDirectoryChanged}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{onMonitoredDirectoryChanged}{onMonitoredDirectoryChanged}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::on\+Monitored\+Directory\+Changed (\begin{DoxyParamCaption}\item[{const QString \&}]{dir\+Path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01658                                                                       \{}
\DoxyCodeLine{01659   DvDirModel::instance()-\/>refreshFolder(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(dirPath));}
\DoxyCodeLine{01660 }
\DoxyCodeLine{01661   \textcolor{comment}{/*-\/ the change may be adding of a new folder, which is needed to be added to}}
\DoxyCodeLine{01662 \textcolor{comment}{   * the monitored paths -\/*/}}
\DoxyCodeLine{01663   \mbox{\hyperlink{class_dv_dir_model_node}{DvDirModelNode}} *node = DvDirModel::instance()}
\DoxyCodeLine{01664                              -\/>getNode(rootIndex())}
\DoxyCodeLine{01665                              -\/>getNodeByPath(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(dirPath));}
\DoxyCodeLine{01666   \textcolor{keywordflow}{if} (!node) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01667   QStringList paths;}
\DoxyCodeLine{01668   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} c = 0; c < node-\/>getChildCount(); c++) \{}
\DoxyCodeLine{01669     \mbox{\hyperlink{class_dv_dir_model_file_folder_node}{DvDirModelFileFolderNode}} *childNode =}
\DoxyCodeLine{01670         \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_model_file_folder_node}{DvDirModelFileFolderNode}} *\textcolor{keyword}{>}(node-\/>getChild(c));}
\DoxyCodeLine{01671     \textcolor{keywordflow}{if} (childNode) paths.append(toQString(childNode-\/>getPath()));}
\DoxyCodeLine{01672   \}}
\DoxyCodeLine{01673   MyFileSystemWatcher::instance()-\/>addPaths(paths, \textcolor{keyword}{true});}
\DoxyCodeLine{01674 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_add81d6ee7efa25d49379e2e1fc1bd54b}\label{class_dv_dir_tree_view_add81d6ee7efa25d49379e2e1fc1bd54b}} 
\index{DvDirTreeView@{DvDirTreeView}!onPreferenceChanged@{onPreferenceChanged}}
\index{onPreferenceChanged@{onPreferenceChanged}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{onPreferenceChanged}{onPreferenceChanged}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::on\+Preference\+Changed (\begin{DoxyParamCaption}\item[{const QString \&}]{pref\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01677                                                                \{}
\DoxyCodeLine{01678   \textcolor{comment}{// react only when the related preference is changed}}
\DoxyCodeLine{01679   \textcolor{keywordflow}{if} (prefName != \textcolor{stringliteral}{"{}WatchFileSystem"{}}) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01680   \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{true};}
\DoxyCodeLine{01681   \textcolor{keywordflow}{if} (Preferences::instance()-\/>isWatchFileSystemEnabled()) \{}
\DoxyCodeLine{01682     ret = ret \&\& connect(\textcolor{keyword}{this}, SIGNAL(expanded(\textcolor{keyword}{const} QModelIndex \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{01683                          SLOT(onExpanded(\textcolor{keyword}{const} QModelIndex \&)));}
\DoxyCodeLine{01684 }
\DoxyCodeLine{01685     ret = ret \&\& connect(\textcolor{keyword}{this}, SIGNAL(collapsed(\textcolor{keyword}{const} QModelIndex \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{01686                          SLOT(onCollapsed(\textcolor{keyword}{const} QModelIndex \&)));}
\DoxyCodeLine{01687     addPathsToWatcher();}
\DoxyCodeLine{01688   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01689     ret = ret \&\& disconnect(\textcolor{keyword}{this}, SIGNAL(expanded(\textcolor{keyword}{const} QModelIndex \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{01690                             SLOT(onExpanded(\textcolor{keyword}{const} QModelIndex \&)));}
\DoxyCodeLine{01691     ret = ret \&\& disconnect(\textcolor{keyword}{this}, SIGNAL(collapsed(\textcolor{keyword}{const} QModelIndex \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{01692                             SLOT(onCollapsed(\textcolor{keyword}{const} QModelIndex \&)));}
\DoxyCodeLine{01693 }
\DoxyCodeLine{01694     MyFileSystemWatcher::instance()-\/>removeAllPaths();}
\DoxyCodeLine{01695   \}}
\DoxyCodeLine{01696   assert(ret);}
\DoxyCodeLine{01697 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_af16cfae6c6f74e8f74310a3908af3cef}\label{class_dv_dir_tree_view_af16cfae6c6f74e8f74310a3908af3cef}} 
\index{DvDirTreeView@{DvDirTreeView}!onRefreshStatusDone@{onRefreshStatusDone}}
\index{onRefreshStatusDone@{onRefreshStatusDone}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{onRefreshStatusDone}{onRefreshStatusDone}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::on\+Refresh\+Status\+Done (\begin{DoxyParamCaption}\item[{const QString \&}]{text }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01312                                                            \{}
\DoxyCodeLine{01313   \textcolor{keywordflow}{if} (!isVisible()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01314   \textcolor{keywordflow}{if} (!m\_currentRefreshedNode) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01315 }
\DoxyCodeLine{01316   m\_currentRefreshedNode-\/>restoreName();}
\DoxyCodeLine{01317 }
\DoxyCodeLine{01318   \mbox{\hyperlink{class_t_file_path}{TFilePath}} nodePath = m\_currentRefreshedNode-\/>getPath();}
\DoxyCodeLine{01319   \textcolor{keywordflow}{if} (nodePath.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01320 }
\DoxyCodeLine{01321   m\_currentRefreshedNode-\/>setExists(\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(nodePath).doesExist());}
\DoxyCodeLine{01322 }
\DoxyCodeLine{01323   \textcolor{keywordtype}{bool} nodeChanged = \textcolor{keyword}{false};}
\DoxyCodeLine{01324 }
\DoxyCodeLine{01325   \textcolor{comment}{// If needed, transform the DvDirVersionControlNode "{}vcNode"{} to a}}
\DoxyCodeLine{01326   \textcolor{comment}{// DvDirVersionControlProjectNode}}
\DoxyCodeLine{01327   \textcolor{comment}{// And put it on the tree (removing the previous entry)}}
\DoxyCodeLine{01328   \textcolor{keywordflow}{if} (m\_currentRefreshedNode-\/>getNodeType() != \textcolor{stringliteral}{"{}Project"{}} \&\&}
\DoxyCodeLine{01329       \mbox{\hyperlink{class_t_project_manager_a150ca0d6e2eb171b8117b0c5f03dbfad}{TProjectManager::instance}}()-\/>isProject(nodePath)) \{}
\DoxyCodeLine{01330     \mbox{\hyperlink{class_dv_dir_model_node}{DvDirModelNode}} *parentNode = m\_currentRefreshedNode-\/>getParent();}
\DoxyCodeLine{01331     \textcolor{keywordflow}{if} (parentNode) \{}
\DoxyCodeLine{01332       std::wstring name = m\_currentRefreshedNode-\/>getName();}
\DoxyCodeLine{01333 }
\DoxyCodeLine{01334       \textcolor{comment}{// Remove the old node (which is not a project node)}}
\DoxyCodeLine{01335       DvDirModel::instance()-\/>removeRows(}
\DoxyCodeLine{01336           m\_currentRefreshedNode-\/>getRow(), 1,}
\DoxyCodeLine{01337           DvDirModel::instance()-\/>getIndexByNode(parentNode));}
\DoxyCodeLine{01338       \textcolor{comment}{// parentNode-\/>removeChildren(vcNode-\/>getRow(),1);}}
\DoxyCodeLine{01339 }
\DoxyCodeLine{01340       \textcolor{comment}{// Add a new project node instead of the old one}}
\DoxyCodeLine{01341       \mbox{\hyperlink{class_dv_dir_version_control_project_node}{DvDirVersionControlProjectNode}} *newNode =}
\DoxyCodeLine{01342           \textcolor{keyword}{new} \mbox{\hyperlink{class_dv_dir_version_control_project_node}{DvDirVersionControlProjectNode}}(parentNode, name, nodePath);}
\DoxyCodeLine{01343       parentNode-\/>addChild(newNode);}
\DoxyCodeLine{01344       nodeChanged            = \textcolor{keyword}{true};}
\DoxyCodeLine{01345       m\_currentRefreshedNode = newNode;}
\DoxyCodeLine{01346     \}}
\DoxyCodeLine{01347   \}}
\DoxyCodeLine{01348 }
\DoxyCodeLine{01349   \mbox{\hyperlink{class_s_v_n_status_reader}{SVNStatusReader}} sr(text);}
\DoxyCodeLine{01350   QStringList checkPartialLockList =}
\DoxyCodeLine{01351       m\_currentRefreshedNode-\/>refreshVersionControl(sr.getStatus());}
\DoxyCodeLine{01352 }
\DoxyCodeLine{01353   \textcolor{keywordflow}{if} (!checkPartialLockList.isEmpty())}
\DoxyCodeLine{01354     checkPartialLock(toQString(nodePath), checkPartialLockList);}
\DoxyCodeLine{01355   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01356     \textcolor{comment}{// Refresh also the right side (thumbnails)}}
\DoxyCodeLine{01357     \textcolor{keywordflow}{if} (nodeChanged \&\& m\_currentRefreshedNode)}
\DoxyCodeLine{01358       \mbox{\hyperlink{class_dv_dir_tree_view_a6475b17d974686909f41801c092f286e}{setCurrentNode}}(m\_currentRefreshedNode);}
\DoxyCodeLine{01359     emit \mbox{\hyperlink{class_dv_dir_tree_view_aad680d19ff1f4bdd5bb187476407a3d5}{currentNodeChanged}}();}
\DoxyCodeLine{01360 }
\DoxyCodeLine{01361     QModelIndex index =}
\DoxyCodeLine{01362         DvDirModel::instance()-\/>getIndexByNode(m\_currentRefreshedNode);}
\DoxyCodeLine{01363     DvDirModel::instance()-\/>refresh(index);}
\DoxyCodeLine{01364   \}}
\DoxyCodeLine{01365 }
\DoxyCodeLine{01366   setRefreshVersionControlEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01367 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a0d3948556c7bfcc2a6b31c397962119e}\label{class_dv_dir_tree_view_a0d3948556c7bfcc2a6b31c397962119e}} 
\index{DvDirTreeView@{DvDirTreeView}!onRefreshStatusError@{onRefreshStatusError}}
\index{onRefreshStatusError@{onRefreshStatusError}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{onRefreshStatusError}{onRefreshStatusError}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::on\+Refresh\+Status\+Error (\begin{DoxyParamCaption}\item[{const QString \&}]{text }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01371                                                             \{}
\DoxyCodeLine{01372   \textcolor{keywordflow}{if} (!isVisible()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01373   m\_currentRefreshedNode-\/>restoreName();}
\DoxyCodeLine{01374   setRefreshVersionControlEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01375   DVGui::error(tr(\textcolor{stringliteral}{"{}Refresh operation failed:\(\backslash\)n"{}}) + text);}
\DoxyCodeLine{01376 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_af49ac91ffcdd72bb77f3cd2267a5fddb}\label{class_dv_dir_tree_view_af49ac91ffcdd72bb77f3cd2267a5fddb}} 
\index{DvDirTreeView@{DvDirTreeView}!purgeCurrentVersionControlNode@{purgeCurrentVersionControlNode}}
\index{purgeCurrentVersionControlNode@{purgeCurrentVersionControlNode}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{purgeCurrentVersionControlNode}{purgeCurrentVersionControlNode}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::purge\+Current\+Version\+Control\+Node (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01219                                                    \{}
\DoxyCodeLine{01220   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *vcNode =}
\DoxyCodeLine{01221       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(getCurrentNode());}
\DoxyCodeLine{01222   \textcolor{keywordflow}{if} (!vcNode) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01223   purgeVersionControl(vcNode);}
\DoxyCodeLine{01224 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a13502bcd27e450e34f03df5f7bdbf693}\label{class_dv_dir_tree_view_a13502bcd27e450e34f03df5f7bdbf693}} 
\index{DvDirTreeView@{DvDirTreeView}!purgeVersionControl@{purgeVersionControl}}
\index{purgeVersionControl@{purgeVersionControl}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{purgeVersionControl}{purgeVersionControl}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::purge\+Version\+Control (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dv_dir_version_control_node}{Dv\+Dir\+Version\+Control\+Node}} $\ast$}]{node }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00816                                                                      \{}
\DoxyCodeLine{00817   \textcolor{keywordflow}{if} (!node) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00818 }
\DoxyCodeLine{00819   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path   = node-\/>getPath();}
\DoxyCodeLine{00820   \textcolor{keywordtype}{bool} isSceneFile = path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}};}
\DoxyCodeLine{00821   \textcolor{keywordflow}{if} (isSceneFile) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00822 }
\DoxyCodeLine{00823   \mbox{\hyperlink{class_version_control}{VersionControl}} *vc = VersionControl::instance();}
\DoxyCodeLine{00824 }
\DoxyCodeLine{00825   \textcolor{comment}{// Get the root node to retrieve username and password}}
\DoxyCodeLine{00826   \mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *rootNode = node-\/>getVersionControlRootNode();}
\DoxyCodeLine{00827   \textcolor{keywordflow}{if} (rootNode) \{}
\DoxyCodeLine{00828     vc-\/>setUserName(QString::fromStdWString(rootNode-\/>getUserName()));}
\DoxyCodeLine{00829     vc-\/>setPassword(QString::fromStdWString(rootNode-\/>getPassword()));}
\DoxyCodeLine{00830   \}}
\DoxyCodeLine{00831 }
\DoxyCodeLine{00832   vc-\/>purgeFolder(\textcolor{keyword}{this}, toQString(path));}
\DoxyCodeLine{00833 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a6f519cc6ab0b34547a4fc3f1ee34fed7}\label{class_dv_dir_tree_view_a6f519cc6ab0b34547a4fc3f1ee34fed7}} 
\index{DvDirTreeView@{DvDirTreeView}!putCurrentVersionControlNode@{putCurrentVersionControlNode}}
\index{putCurrentVersionControlNode@{putCurrentVersionControlNode}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{putCurrentVersionControlNode}{putCurrentVersionControlNode}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::put\+Current\+Version\+Control\+Node (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01182                                                  \{}
\DoxyCodeLine{01183   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *vcNode =}
\DoxyCodeLine{01184       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(getCurrentNode());}
\DoxyCodeLine{01185   \textcolor{keywordflow}{if} (!vcNode) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01186   putVersionControl(vcNode);}
\DoxyCodeLine{01187 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a8c0b9cdec5964b81b613a73a5c712ba7}\label{class_dv_dir_tree_view_a8c0b9cdec5964b81b613a73a5c712ba7}} 
\index{DvDirTreeView@{DvDirTreeView}!putVersionControl@{putVersionControl}}
\index{putVersionControl@{putVersionControl}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{putVersionControl}{putVersionControl}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::put\+Version\+Control (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dv_dir_version_control_node}{Dv\+Dir\+Version\+Control\+Node}} $\ast$}]{node }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00763                                                                    \{}
\DoxyCodeLine{00764   \textcolor{keywordflow}{if} (!node) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00765   \mbox{\hyperlink{class_version_control}{VersionControl}} *vc = VersionControl::instance();}
\DoxyCodeLine{00766 }
\DoxyCodeLine{00767   \textcolor{comment}{// Get the root node to retrieve username and password}}
\DoxyCodeLine{00768   \mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *rootNode = node-\/>getVersionControlRootNode();}
\DoxyCodeLine{00769   \textcolor{keywordflow}{if} (rootNode) \{}
\DoxyCodeLine{00770     vc-\/>setUserName(QString::fromStdWString(rootNode-\/>getUserName()));}
\DoxyCodeLine{00771     vc-\/>setPassword(QString::fromStdWString(rootNode-\/>getPassword()));}
\DoxyCodeLine{00772   \}}
\DoxyCodeLine{00773 }
\DoxyCodeLine{00774   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path   = node-\/>getPath();}
\DoxyCodeLine{00775   \textcolor{keywordtype}{bool} isSceneFile = path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}};}
\DoxyCodeLine{00776 }
\DoxyCodeLine{00777   \textcolor{keywordflow}{if} (node-\/>isUnderVersionControl() \&\& !isSceneFile) \{}
\DoxyCodeLine{00778     QStringList files;}
\DoxyCodeLine{00779     files.append(\textcolor{stringliteral}{"{}."{}});}
\DoxyCodeLine{00780 }
\DoxyCodeLine{00781     \textcolor{keywordflow}{if} (\textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_project_node}{DvDirVersionControlProjectNode}} *\textcolor{keyword}{>}(node)) \{}
\DoxyCodeLine{00782       \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp =}
\DoxyCodeLine{00783           \mbox{\hyperlink{class_t_project_manager_a150ca0d6e2eb171b8117b0c5f03dbfad}{TProjectManager::instance}}()-\/>\mbox{\hyperlink{class_t_project_manager_a29ae519b44c77674d68c993b7652a896}{projectFolderToProjectPath}}(path);}
\DoxyCodeLine{00784       files.append(toQString(fp.\mbox{\hyperlink{class_t_file_path_ac17d65d827432f0fae28fed699bf4afa}{withoutParentDir}}()));}
\DoxyCodeLine{00785     \}}
\DoxyCodeLine{00786 }
\DoxyCodeLine{00787     vc-\/>commit(\textcolor{keyword}{this}, toQString(node-\/>getPath()), files, \textcolor{keyword}{true});}
\DoxyCodeLine{00788   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00789     vc-\/>commit(\textcolor{keyword}{this}, toQString(path.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}()),}
\DoxyCodeLine{00790                QStringList(QString::fromStdWString(node-\/>getName())),}
\DoxyCodeLine{00791                !isSceneFile);}
\DoxyCodeLine{00792 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_ae5e0747c38d383a1affc47dfbdcdd0b5}\label{class_dv_dir_tree_view_ae5e0747c38d383a1affc47dfbdcdd0b5}} 
\index{DvDirTreeView@{DvDirTreeView}!refreshCurrentVersionControlNode@{refreshCurrentVersionControlNode}}
\index{refreshCurrentVersionControlNode@{refreshCurrentVersionControlNode}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{refreshCurrentVersionControlNode}{refreshCurrentVersionControlNode}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::refresh\+Current\+Version\+Control\+Node (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01200                                                      \{}
\DoxyCodeLine{01201   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *vcNode =}
\DoxyCodeLine{01202       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(getCurrentNode());}
\DoxyCodeLine{01203   \textcolor{keywordflow}{if} (!vcNode) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01204   setRefreshVersionControlEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01205   refreshVersionControl(vcNode);}
\DoxyCodeLine{01206 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a0fc1435385e5d89cbf9ea4f18fc26fef}\label{class_dv_dir_tree_view_a0fc1435385e5d89cbf9ea4f18fc26fef}} 
\index{DvDirTreeView@{DvDirTreeView}!refreshVersionControl@{refreshVersionControl}}
\index{refreshVersionControl@{refreshVersionControl}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{refreshVersionControl()}{refreshVersionControl()}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::refresh\+Version\+Control (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dv_dir_version_control_node}{Dv\+Dir\+Version\+Control\+Node}} $\ast$}]{node,  }\item[{const QString\+List \&}]{files = {\ttfamily QStringList()} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00888                                                                     \{}
\DoxyCodeLine{00889   \textcolor{keywordflow}{if} (!refreshVersionControlEnabled()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00890 }
\DoxyCodeLine{00891   \textcolor{keywordflow}{if} (m\_currentRefreshedNode) m\_currentRefreshedNode-\/>restoreName();}
\DoxyCodeLine{00892 }
\DoxyCodeLine{00893   m\_currentRefreshedNode = node;}
\DoxyCodeLine{00894   QString tempName       = tr(\textcolor{stringliteral}{"{}Refreshing..."{}});}
\DoxyCodeLine{00895   \mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *rootNode =}
\DoxyCodeLine{00896       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *\textcolor{keyword}{>}(node);}
\DoxyCodeLine{00897   \textcolor{keywordflow}{if} (rootNode) \{}
\DoxyCodeLine{00898     QString path = QString::fromStdWString(rootNode-\/>getLocalPath()) + \textcolor{stringliteral}{"{}/"{}};}
\DoxyCodeLine{00899 }
\DoxyCodeLine{00900     \mbox{\hyperlink{class_version_control}{VersionControl}} *vc = VersionControl::instance();}
\DoxyCodeLine{00901 }
\DoxyCodeLine{00902     \textcolor{comment}{// Check if the localPath is a working copy (has a .svn subfolder)}}
\DoxyCodeLine{00903     \textcolor{keywordflow}{if} (vc-\/>isFolderUnderVersionControl(path)) \{}
\DoxyCodeLine{00904       \textcolor{keywordflow}{if} (isVisible()) rootNode-\/>setTemporaryName(tempName.toStdWString());}
\DoxyCodeLine{00905 }
\DoxyCodeLine{00906       \textcolor{keywordflow}{if} (rootNode) \{}
\DoxyCodeLine{00907         vc-\/>setUserName(QString::fromStdWString(rootNode-\/>getUserName()));}
\DoxyCodeLine{00908         vc-\/>setPassword(QString::fromStdWString(rootNode-\/>getPassword()));}
\DoxyCodeLine{00909       \}}
\DoxyCodeLine{00910       m\_thread.disconnect(SIGNAL(statusRetrieved(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00911       m\_thread.disconnect(SIGNAL(error(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00912       connect(\&m\_thread, SIGNAL(error(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00913               SLOT(onRefreshStatusError(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00914       connect(\&m\_thread, SIGNAL(statusRetrieved(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00915               SLOT(onRefreshStatusDone(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00916       setRefreshVersionControlEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{00917       m\_thread.getSVNStatus(path, \textcolor{keyword}{true}, \textcolor{keyword}{true});}
\DoxyCodeLine{00918     \}}
\DoxyCodeLine{00919   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (node) \{}
\DoxyCodeLine{00920     \mbox{\hyperlink{class_t_file_path}{TFilePath}} path   = node-\/>getPath();}
\DoxyCodeLine{00921     \textcolor{keywordtype}{bool} isSceneFile = path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}};}
\DoxyCodeLine{00922 }
\DoxyCodeLine{00923     QString nodePath = toQString(node-\/>getPath());}
\DoxyCodeLine{00924     \textcolor{keywordflow}{if} (!isSceneFile) \{}
\DoxyCodeLine{00925       \textcolor{comment}{// Check if there is a .svn folder inside... and set automatically the}}
\DoxyCodeLine{00926       \textcolor{comment}{// version control}}
\DoxyCodeLine{00927       nodePath.append(\textcolor{stringliteral}{"{}/"{}});}
\DoxyCodeLine{00928       QDir dir(nodePath);}
\DoxyCodeLine{00929       dir.setFilter(QDir::Dirs | QDir::Hidden);}
\DoxyCodeLine{00930       node-\/>setIsUnderVersionControl(}
\DoxyCodeLine{00931           !dir.exists() ||}
\DoxyCodeLine{00932           VersionControl::instance()-\/>isFolderUnderVersionControl(nodePath));}
\DoxyCodeLine{00933     \}}
\DoxyCodeLine{00934 }
\DoxyCodeLine{00935     \textcolor{keywordflow}{if} ((!isSceneFile \&\& QDir(nodePath).exists()) ||}
\DoxyCodeLine{00936         (isSceneFile \&\& QFile(nodePath).exists())) \{}
\DoxyCodeLine{00937       \mbox{\hyperlink{class_version_control}{VersionControl}} *vc                    = VersionControl::instance();}
\DoxyCodeLine{00938       \mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *rootNode = node-\/>getVersionControlRootNode();}
\DoxyCodeLine{00939       \textcolor{keywordflow}{if} (rootNode) \{}
\DoxyCodeLine{00940         vc-\/>setUserName(QString::fromStdWString(rootNode-\/>getUserName()));}
\DoxyCodeLine{00941         vc-\/>setPassword(QString::fromStdWString(rootNode-\/>getPassword()));}
\DoxyCodeLine{00942       \}}
\DoxyCodeLine{00943       m\_thread.disconnect(SIGNAL(statusRetrieved(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00944       m\_thread.disconnect(SIGNAL(error(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00945       connect(\&m\_thread, SIGNAL(error(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00946               SLOT(onRefreshStatusError(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00947       connect(\&m\_thread, SIGNAL(statusRetrieved(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00948               SLOT(onRefreshStatusDone(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00949       \textcolor{keywordflow}{if} (files.isEmpty()) \{}
\DoxyCodeLine{00950         \textcolor{keywordflow}{if} (isVisible() \&\& node-\/>isUnderVersionControl())}
\DoxyCodeLine{00951           node-\/>setTemporaryName(tempName.toStdWString());}
\DoxyCodeLine{00952 }
\DoxyCodeLine{00953         \textcolor{keywordflow}{if} (isSceneFile) \{}
\DoxyCodeLine{00954           \textcolor{keywordflow}{if} (node-\/>isUnderVersionControl()) \{}
\DoxyCodeLine{00955             node-\/>setIsUnversioned(\textcolor{keyword}{false});}
\DoxyCodeLine{00956             setRefreshVersionControlEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{00957             m\_thread.getSVNStatus(}
\DoxyCodeLine{00958                 toQString(node-\/>getPath().\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}()),}
\DoxyCodeLine{00959                 QStringList(toQString(node-\/>getPath().\mbox{\hyperlink{class_t_file_path_ac17d65d827432f0fae28fed699bf4afa}{withoutParentDir}}())),}
\DoxyCodeLine{00960                 \textcolor{keyword}{false}, \textcolor{keyword}{true});}
\DoxyCodeLine{00961           \}}
\DoxyCodeLine{00962         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00963           \textcolor{keywordflow}{if} (node-\/>isUnderVersionControl()) \{}
\DoxyCodeLine{00964             node-\/>setIsUnversioned(\textcolor{keyword}{false});}
\DoxyCodeLine{00965             setRefreshVersionControlEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{00966             m\_thread.getSVNStatus(nodePath, \textcolor{keyword}{true}, \textcolor{keyword}{true});}
\DoxyCodeLine{00967           \}}
\DoxyCodeLine{00968         \}}
\DoxyCodeLine{00969       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00970         \textcolor{keywordflow}{if} (isVisible()) node-\/>setTemporaryName(tempName.toStdWString());}
\DoxyCodeLine{00971         setRefreshVersionControlEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{00972         m\_thread.getSVNStatus(nodePath, files, \textcolor{keyword}{true}, \textcolor{keyword}{true});}
\DoxyCodeLine{00973       \}}
\DoxyCodeLine{00974     \}}
\DoxyCodeLine{00975     \textcolor{comment}{// Missing node: call svn list to retrieve the list of files...}}
\DoxyCodeLine{00976     \textcolor{comment}{// Missing node that isSceneFile doesn't needs any update}}
\DoxyCodeLine{00977     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!isSceneFile) \{}
\DoxyCodeLine{00978       \mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *rootNode = node-\/>getVersionControlRootNode();}
\DoxyCodeLine{00979       \textcolor{keywordflow}{if} (rootNode) \{}
\DoxyCodeLine{00980         VersionControl::instance()-\/>setUserName(}
\DoxyCodeLine{00981             QString::fromStdWString(rootNode-\/>getUserName()));}
\DoxyCodeLine{00982         VersionControl::instance()-\/>setPassword(}
\DoxyCodeLine{00983             QString::fromStdWString(rootNode-\/>getPassword()));}
\DoxyCodeLine{00984 }
\DoxyCodeLine{00985         QString nodePath = toQString(node-\/>getPath());}
\DoxyCodeLine{00986 }
\DoxyCodeLine{00987         \mbox{\hyperlink{class_dv_dir_model_node}{DvDirModelNode}} *n    = node-\/>getParent();}
\DoxyCodeLine{00988         QString relativePath = QString::fromStdWString(node-\/>getName());}
\DoxyCodeLine{00989 }
\DoxyCodeLine{00990         \textcolor{comment}{// get the last existing parent node, and store in the meantime, its}}
\DoxyCodeLine{00991         \textcolor{comment}{// relative path}}
\DoxyCodeLine{00992         \textcolor{keywordflow}{while} (!QDir(nodePath).exists() \&\& n != rootNode) \{}
\DoxyCodeLine{00993           \textcolor{keywordflow}{if} (!n) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00994           relativePath.prepend(QString::fromStdWString(n-\/>getName()) + \textcolor{stringliteral}{"{}/"{}});}
\DoxyCodeLine{00995           n = n-\/>getParent();}
\DoxyCodeLine{00996         \}}
\DoxyCodeLine{00997 }
\DoxyCodeLine{00998         \textcolor{keywordflow}{if} (isVisible()) node-\/>setTemporaryName(tempName.toStdWString());}
\DoxyCodeLine{00999 }
\DoxyCodeLine{01000         setRefreshVersionControlEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{01001         listVersionControl(\textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(n),}
\DoxyCodeLine{01002                            relativePath);}
\DoxyCodeLine{01003       \}}
\DoxyCodeLine{01004     \}}
\DoxyCodeLine{01005   \}}
\DoxyCodeLine{01006 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_aa1468331763c372e1b93c46cb4191d80}\label{class_dv_dir_tree_view_aa1468331763c372e1b93c46cb4191d80}} 
\index{DvDirTreeView@{DvDirTreeView}!refreshVersionControlEnabled@{refreshVersionControlEnabled}}
\index{refreshVersionControlEnabled@{refreshVersionControlEnabled}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{refreshVersionControlEnabled()}{refreshVersionControlEnabled()}}
{\footnotesize\ttfamily bool Dv\+Dir\+Tree\+View\+::refresh\+Version\+Control\+Enabled (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00132                                             \{}
\DoxyCodeLine{00133     \textcolor{keywordflow}{return} m\_refreshVersionControlEnabled;}
\DoxyCodeLine{00134   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a900908bd57be95da87e65edbc568da8d}\label{class_dv_dir_tree_view_a900908bd57be95da87e65edbc568da8d}} 
\index{DvDirTreeView@{DvDirTreeView}!resizeEvent@{resizeEvent}}
\index{resizeEvent@{resizeEvent}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{resizeEvent()}{resizeEvent()}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::resize\+Event (\begin{DoxyParamCaption}\item[{QResize\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00381                                                    \{}
\DoxyCodeLine{00382   resizeColumnToContents(0);}
\DoxyCodeLine{00383   QTreeView::resizeEvent(event);}
\DoxyCodeLine{00384 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a97aebc6aad714e9b18c03f6bcceb92fa}\label{class_dv_dir_tree_view_a97aebc6aad714e9b18c03f6bcceb92fa}} 
\index{DvDirTreeView@{DvDirTreeView}!resizeToConts@{resizeToConts}}
\index{resizeToConts@{resizeToConts}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{resizeToConts}{resizeToConts}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::resize\+To\+Conts (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00377 \{ resizeColumnToContents(0); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_afcb018cb7acf7fd97ed067d098c7c9a0}\label{class_dv_dir_tree_view_afcb018cb7acf7fd97ed067d098c7c9a0}} 
\index{DvDirTreeView@{DvDirTreeView}!revertCurrentVersionControlNode@{revertCurrentVersionControlNode}}
\index{revertCurrentVersionControlNode@{revertCurrentVersionControlNode}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{revertCurrentVersionControlNode}{revertCurrentVersionControlNode}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::revert\+Current\+Version\+Control\+Node (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01119                                                     \{}
\DoxyCodeLine{01120   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *vcNode =}
\DoxyCodeLine{01121       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(getCurrentNode());}
\DoxyCodeLine{01122   \textcolor{keywordflow}{if} (!vcNode) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01123 }
\DoxyCodeLine{01124   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = vcNode-\/>getPath();}
\DoxyCodeLine{01125   \textcolor{keywordflow}{if} (path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}}) \{}
\DoxyCodeLine{01126     QStringList files;}
\DoxyCodeLine{01127     files.append(QString::fromStdWString(vcNode-\/>getName()));}
\DoxyCodeLine{01128 }
\DoxyCodeLine{01129     \textcolor{keywordtype}{int} sceneIconsCount = 0;}
\DoxyCodeLine{01130 }
\DoxyCodeLine{01131     \mbox{\hyperlink{class_t_file_path}{TFilePath}} iconPath = \mbox{\hyperlink{class_toonz_scene_a2d97e9b3647bb45c0c992a6c92c659eb}{ToonzScene::getIconPath}}(path);}
\DoxyCodeLine{01132     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(iconPath).doesExist()) \{}
\DoxyCodeLine{01133       QDir dir(toQString(path.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}()));}
\DoxyCodeLine{01134 }
\DoxyCodeLine{01135 \textcolor{preprocessor}{\#ifdef MACOSX}}
\DoxyCodeLine{01136       files.append(dir.relativeFilePath(toQString(iconPath)));}
\DoxyCodeLine{01137 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01138       files.append(}
\DoxyCodeLine{01139           dir.relativeFilePath(toQString(iconPath)).replace(\textcolor{stringliteral}{"{}/"{}}, \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)"{}}));}
\DoxyCodeLine{01140 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01141 }
\DoxyCodeLine{01142       sceneIconsCount++;}
\DoxyCodeLine{01143     \}}
\DoxyCodeLine{01144     VersionControl::instance()-\/>revert(\textcolor{keyword}{this}, toQString(path.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}()),}
\DoxyCodeLine{01145                                        files, \textcolor{keyword}{false}, sceneIconsCount);}
\DoxyCodeLine{01146   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01147     \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp =}
\DoxyCodeLine{01148         \mbox{\hyperlink{class_t_project_manager_a150ca0d6e2eb171b8117b0c5f03dbfad}{TProjectManager::instance}}()-\/>\mbox{\hyperlink{class_t_project_manager_a29ae519b44c77674d68c993b7652a896}{projectFolderToProjectPath}}(path);}
\DoxyCodeLine{01149     \mbox{\hyperlink{class_t_project}{TProject}} *currentProject =}
\DoxyCodeLine{01150         \mbox{\hyperlink{class_t_project_manager_a150ca0d6e2eb171b8117b0c5f03dbfad}{TProjectManager::instance}}()-\/>\mbox{\hyperlink{class_t_project_manager_a5267cfeae48d4e7585c3fc56d8d5b0b3}{getCurrentProject}}().getPointer();}
\DoxyCodeLine{01151     \textcolor{keywordflow}{if} (!currentProject) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01152     \mbox{\hyperlink{class_t_file_path}{TFilePath}} sceneFolder =}
\DoxyCodeLine{01153         currentProject-\/>decode(currentProject-\/>getFolder(\mbox{\hyperlink{class_t_project_afa1aca692a03ae826a4d22565c7361cb}{TProject::Scenes}}));}
\DoxyCodeLine{01154     \mbox{\hyperlink{class_t_file_path}{TFilePath}} scenesDescPath = sceneFolder + \textcolor{stringliteral}{"{}scenes.xml"{}};}
\DoxyCodeLine{01155     QDir dir(toQString(path));}
\DoxyCodeLine{01156 }
\DoxyCodeLine{01157     QStringList files;}
\DoxyCodeLine{01158     files.append(toQString(fp.\mbox{\hyperlink{class_t_file_path_ac17d65d827432f0fae28fed699bf4afa}{withoutParentDir}}()));}
\DoxyCodeLine{01159 }
\DoxyCodeLine{01160 \textcolor{preprocessor}{\#ifdef MACOSX}}
\DoxyCodeLine{01161     files.append(dir.relativeFilePath(toQString(scenesDescPath)));}
\DoxyCodeLine{01162 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01163     files.append(}
\DoxyCodeLine{01164         dir.relativeFilePath(toQString(scenesDescPath)).replace(\textcolor{stringliteral}{"{}/"{}}, \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)"{}}));}
\DoxyCodeLine{01165 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01166 }
\DoxyCodeLine{01167     VersionControl::instance()-\/>revert(\textcolor{keyword}{this}, toQString(path), files, \textcolor{keyword}{false}, 0);}
\DoxyCodeLine{01168   \}}
\DoxyCodeLine{01169 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a4248f5ae791476977eab0ebe30323e7e}\label{class_dv_dir_tree_view_a4248f5ae791476977eab0ebe30323e7e}} 
\index{DvDirTreeView@{DvDirTreeView}!selectNone@{selectNone}}
\index{selectNone@{selectNone}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{selectNone()}{selectNone()}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::select\+None (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_selection}{TSelection}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00118 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a0cd67fb303054836e2ccc2b26f0865c8}\label{class_dv_dir_tree_view_a0cd67fb303054836e2ccc2b26f0865c8}} 
\index{DvDirTreeView@{DvDirTreeView}!setCurrentNode@{setCurrentNode}}
\index{setCurrentNode@{setCurrentNode}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{setCurrentNode}{setCurrentNode}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::set\+Current\+Node (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp,  }\item[{bool}]{expand\+Node = {\ttfamily false} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00664                                                                        \{}
\DoxyCodeLine{00665   \mbox{\hyperlink{class_dv_dir_model_file_folder_node}{DvDirModelFileFolderNode}} *node =}
\DoxyCodeLine{00666       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_model_file_folder_node}{DvDirModelFileFolderNode}} *\textcolor{keyword}{>}(getCurrentNode());}
\DoxyCodeLine{00667   \textcolor{keywordflow}{if} (node \&\& node-\/>getPath() == fp) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00668   QModelIndex index = DvDirModel::instance()-\/>getIndexByPath(fp);}
\DoxyCodeLine{00669   setCurrentIndex(index);}
\DoxyCodeLine{00670   \textcolor{keywordflow}{if} (expandNode) expand(index);}
\DoxyCodeLine{00671   scrollTo(index \textcolor{comment}{/*, QAbstractItemView::PositionAtCenter*/});}
\DoxyCodeLine{00672 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a6475b17d974686909f41801c092f286e}\label{class_dv_dir_tree_view_a6475b17d974686909f41801c092f286e}} 
\index{DvDirTreeView@{DvDirTreeView}!setCurrentNode@{setCurrentNode}}
\index{setCurrentNode@{setCurrentNode}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{setCurrentNode}{setCurrentNode}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::set\+Current\+Node (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dv_dir_model_node}{Dv\+Dir\+Model\+Node}} $\ast$}]{node }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Sets the current node, make it visible. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00655                                                        \{}
\DoxyCodeLine{00656   \textcolor{keywordflow}{if} (getCurrentNode() == node) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00657   QModelIndex index = DvDirModel::instance()-\/>getIndexByNode(node);}
\DoxyCodeLine{00658   setCurrentIndex(index);}
\DoxyCodeLine{00659   scrollTo(index);}
\DoxyCodeLine{00660 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a7e8552ef6cdfd339b52b3a17315939f2}\label{class_dv_dir_tree_view_a7e8552ef6cdfd339b52b3a17315939f2}} 
\index{DvDirTreeView@{DvDirTreeView}!setRefreshVersionControlEnabled@{setRefreshVersionControlEnabled}}
\index{setRefreshVersionControlEnabled@{setRefreshVersionControlEnabled}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{setRefreshVersionControlEnabled()}{setRefreshVersionControlEnabled()}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::set\+Refresh\+Version\+Control\+Enabled (\begin{DoxyParamCaption}\item[{bool}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00129                                                    \{}
\DoxyCodeLine{00130     m\_refreshVersionControlEnabled = value;}
\DoxyCodeLine{00131   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_aa80686e08f349e00b68d4e21c0b428a7}\label{class_dv_dir_tree_view_aa80686e08f349e00b68d4e21c0b428a7}} 
\index{DvDirTreeView@{DvDirTreeView}!sizeHint@{sizeHint}}
\index{sizeHint@{sizeHint}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{sizeHint()}{sizeHint()}}
{\footnotesize\ttfamily QSize Dv\+Dir\+Tree\+View\+::size\+Hint (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00568 \{ \textcolor{keywordflow}{return} QSize(100, 100); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a0a1c6fd0429d51d99c76fa5a9255e49e}\label{class_dv_dir_tree_view_a0a1c6fd0429d51d99c76fa5a9255e49e}} 
\index{DvDirTreeView@{DvDirTreeView}!unlockCurrentVersionControlNode@{unlockCurrentVersionControlNode}}
\index{unlockCurrentVersionControlNode@{unlockCurrentVersionControlNode}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{unlockCurrentVersionControlNode}{unlockCurrentVersionControlNode}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::unlock\+Current\+Version\+Control\+Node (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01065                                                     \{}
\DoxyCodeLine{01066   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *vcNode =}
\DoxyCodeLine{01067       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(getCurrentNode());}
\DoxyCodeLine{01068   \textcolor{keywordflow}{if} (!vcNode) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01069 }
\DoxyCodeLine{01070   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = vcNode-\/>getPath();}
\DoxyCodeLine{01071   \textcolor{keywordflow}{if} (path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}}) \{}
\DoxyCodeLine{01072     QStringList files;}
\DoxyCodeLine{01073     files.append(QString::fromStdWString(vcNode-\/>getName()));}
\DoxyCodeLine{01074 }
\DoxyCodeLine{01075     \textcolor{keywordtype}{int} sceneIconsCount = 0;}
\DoxyCodeLine{01076 }
\DoxyCodeLine{01077     \mbox{\hyperlink{class_t_file_path}{TFilePath}} iconPath = \mbox{\hyperlink{class_toonz_scene_a2d97e9b3647bb45c0c992a6c92c659eb}{ToonzScene::getIconPath}}(path);}
\DoxyCodeLine{01078     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(iconPath).doesExist()) \{}
\DoxyCodeLine{01079       QDir dir(toQString(path.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}()));}
\DoxyCodeLine{01080 }
\DoxyCodeLine{01081 \textcolor{preprocessor}{\#ifdef MACOSX}}
\DoxyCodeLine{01082       files.append(dir.relativeFilePath(toQString(iconPath)));}
\DoxyCodeLine{01083 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01084       files.append(}
\DoxyCodeLine{01085           dir.relativeFilePath(toQString(iconPath)).replace(\textcolor{stringliteral}{"{}/"{}}, \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)"{}}));}
\DoxyCodeLine{01086 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01087 }
\DoxyCodeLine{01088       sceneIconsCount++;}
\DoxyCodeLine{01089     \}}
\DoxyCodeLine{01090     VersionControl::instance()-\/>unlock(\textcolor{keyword}{this}, toQString(path.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}()),}
\DoxyCodeLine{01091                                        files, sceneIconsCount);}
\DoxyCodeLine{01092   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01093     \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp =}
\DoxyCodeLine{01094         \mbox{\hyperlink{class_t_project_manager_a150ca0d6e2eb171b8117b0c5f03dbfad}{TProjectManager::instance}}()-\/>\mbox{\hyperlink{class_t_project_manager_a29ae519b44c77674d68c993b7652a896}{projectFolderToProjectPath}}(path);}
\DoxyCodeLine{01095 }
\DoxyCodeLine{01096     \mbox{\hyperlink{class_t_project}{TProject}} *currentProject =}
\DoxyCodeLine{01097         \mbox{\hyperlink{class_t_project_manager_a150ca0d6e2eb171b8117b0c5f03dbfad}{TProjectManager::instance}}()-\/>\mbox{\hyperlink{class_t_project_manager_a5267cfeae48d4e7585c3fc56d8d5b0b3}{getCurrentProject}}().getPointer();}
\DoxyCodeLine{01098     \textcolor{keywordflow}{if} (!currentProject) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01099     \mbox{\hyperlink{class_t_file_path}{TFilePath}} sceneFolder =}
\DoxyCodeLine{01100         currentProject-\/>decode(currentProject-\/>getFolder(\mbox{\hyperlink{class_t_project_afa1aca692a03ae826a4d22565c7361cb}{TProject::Scenes}}));}
\DoxyCodeLine{01101     \mbox{\hyperlink{class_t_file_path}{TFilePath}} scenesDescPath = sceneFolder + \textcolor{stringliteral}{"{}scenes.xml"{}};}
\DoxyCodeLine{01102     QDir dir(toQString(path));}
\DoxyCodeLine{01103 }
\DoxyCodeLine{01104     QStringList files;}
\DoxyCodeLine{01105     files.append(toQString(fp.\mbox{\hyperlink{class_t_file_path_ac17d65d827432f0fae28fed699bf4afa}{withoutParentDir}}()));}
\DoxyCodeLine{01106 }
\DoxyCodeLine{01107 \textcolor{preprocessor}{\#ifdef MACOSX}}
\DoxyCodeLine{01108     files.append(dir.relativeFilePath(toQString(scenesDescPath)));}
\DoxyCodeLine{01109 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01110     files.append(}
\DoxyCodeLine{01111         dir.relativeFilePath(toQString(scenesDescPath)).replace(\textcolor{stringliteral}{"{}/"{}}, \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)"{}}));}
\DoxyCodeLine{01112 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01113     VersionControl::instance()-\/>unlock(\textcolor{keyword}{this}, toQString(path), files, 0);}
\DoxyCodeLine{01114   \}}
\DoxyCodeLine{01115 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_acc6fc9fcadc2635731193a45c4cfa4e1}\label{class_dv_dir_tree_view_acc6fc9fcadc2635731193a45c4cfa4e1}} 
\index{DvDirTreeView@{DvDirTreeView}!updateCurrentVersionControlNode@{updateCurrentVersionControlNode}}
\index{updateCurrentVersionControlNode@{updateCurrentVersionControlNode}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{updateCurrentVersionControlNode}{updateCurrentVersionControlNode}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::update\+Current\+Version\+Control\+Node (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01173                                                     \{}
\DoxyCodeLine{01174   \mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *vcNode =}
\DoxyCodeLine{01175       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_node}{DvDirVersionControlNode}} *\textcolor{keyword}{>}(getCurrentNode());}
\DoxyCodeLine{01176   \textcolor{keywordflow}{if} (!vcNode) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01177   updateVersionControl(vcNode);}
\DoxyCodeLine{01178 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dv_dir_tree_view_a6aecce9040f0436506d335fe40cd2bc9}\label{class_dv_dir_tree_view_a6aecce9040f0436506d335fe40cd2bc9}} 
\index{DvDirTreeView@{DvDirTreeView}!updateVersionControl@{updateVersionControl}}
\index{updateVersionControl@{updateVersionControl}!DvDirTreeView@{DvDirTreeView}}
\doxysubsubsection{\texorpdfstring{updateVersionControl}{updateVersionControl}}
{\footnotesize\ttfamily void Dv\+Dir\+Tree\+View\+::update\+Version\+Control (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dv_dir_version_control_node}{Dv\+Dir\+Version\+Control\+Node}} $\ast$}]{node }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00676                                                                       \{}
\DoxyCodeLine{00677   \mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *rootNode =}
\DoxyCodeLine{00678       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *\textcolor{keyword}{>}(node);}
\DoxyCodeLine{00679   \textcolor{keywordflow}{if} (rootNode) \{}
\DoxyCodeLine{00680     QString localPath = QString::fromStdWString(rootNode-\/>getLocalPath());}
\DoxyCodeLine{00681     \textcolor{keywordflow}{if} (!QFile::exists(localPath)) \{}
\DoxyCodeLine{00682       DVGui::warning(tr(\textcolor{stringliteral}{"{}The local path does not exist:"{}}) + \textcolor{stringliteral}{"{} "{}} + localPath);}
\DoxyCodeLine{00683       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00684     \}}
\DoxyCodeLine{00685 }
\DoxyCodeLine{00686     \mbox{\hyperlink{class_version_control}{VersionControl}} *vc = VersionControl::instance();}
\DoxyCodeLine{00687     vc-\/>setUserName(QString::fromStdWString(rootNode-\/>getUserName()));}
\DoxyCodeLine{00688     vc-\/>setPassword(QString::fromStdWString(rootNode-\/>getPassword()));}
\DoxyCodeLine{00689 }
\DoxyCodeLine{00690     \textcolor{comment}{// Root node empty: perform an empty checkout on the top folder}}
\DoxyCodeLine{00691     \textcolor{keywordflow}{if} (rootNode-\/>getChildCount() == 0) \{}
\DoxyCodeLine{00692       m\_currentRefreshedNode = node;}
\DoxyCodeLine{00693       setRefreshVersionControlEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{00694 }
\DoxyCodeLine{00695       \textcolor{keywordflow}{if} (isVisible())}
\DoxyCodeLine{00696         m\_currentRefreshedNode-\/>setTemporaryName(L\textcolor{stringliteral}{"{} Checkout..."{}});}
\DoxyCodeLine{00697 }
\DoxyCodeLine{00698       QStringList args;}
\DoxyCodeLine{00699       args << \textcolor{stringliteral}{"{}checkout"{}}}
\DoxyCodeLine{00700            << QString::fromStdWString(rootNode-\/>getRepositoryPath()) << \textcolor{stringliteral}{"{}."{}}}
\DoxyCodeLine{00701            << \textcolor{stringliteral}{"{}-\/-\/depth=empty"{}};}
\DoxyCodeLine{00702       connect(\&m\_thread, SIGNAL(error(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00703               SLOT(onCheckOutError(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00704       connect(\&m\_thread, SIGNAL(done(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00705               SLOT(onCheckOutDone(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00706       m\_thread.executeCommand(localPath, \textcolor{stringliteral}{"{}svn"{}}, args, \textcolor{keyword}{true});}
\DoxyCodeLine{00707     \}}
\DoxyCodeLine{00708     \textcolor{comment}{// Full checkout on the root node}}
\DoxyCodeLine{00709     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00710       vc-\/>update(\textcolor{keyword}{this}, localPath + \textcolor{stringliteral}{"{}/"{}}, QStringList(), 0);}
\DoxyCodeLine{00711   \}}
\DoxyCodeLine{00712   \textcolor{comment}{// Perform a normal update (on an arbitrary node)}}
\DoxyCodeLine{00713   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (node) \{}
\DoxyCodeLine{00714     \mbox{\hyperlink{class_version_control}{VersionControl}} *vc = VersionControl::instance();}
\DoxyCodeLine{00715 }
\DoxyCodeLine{00716     \textcolor{comment}{// Get the root node to retrieve username and password}}
\DoxyCodeLine{00717     \mbox{\hyperlink{class_dv_dir_version_control_root_node}{DvDirVersionControlRootNode}} *rootNode = node-\/>getVersionControlRootNode();}
\DoxyCodeLine{00718     \textcolor{keywordflow}{if} (rootNode) \{}
\DoxyCodeLine{00719       vc-\/>setUserName(QString::fromStdWString(rootNode-\/>getUserName()));}
\DoxyCodeLine{00720       vc-\/>setPassword(QString::fromStdWString(rootNode-\/>getPassword()));}
\DoxyCodeLine{00721     \}}
\DoxyCodeLine{00722 }
\DoxyCodeLine{00723     \textcolor{comment}{// Check if the path exist, otherwise, it is a missing folder / file that}}
\DoxyCodeLine{00724     \textcolor{comment}{// has to be get.}}
\DoxyCodeLine{00725     \mbox{\hyperlink{class_t_file_path}{TFilePath}} path   = node-\/>getPath();}
\DoxyCodeLine{00726     \textcolor{keywordtype}{bool} isSceneFile = path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}};}
\DoxyCodeLine{00727     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(path).doesExist() \&\& !isSceneFile)}
\DoxyCodeLine{00728       vc-\/>update(\textcolor{keyword}{this}, toQString(node-\/>getPath()), QStringList(\textcolor{stringliteral}{"{}."{}}), 0);}
\DoxyCodeLine{00729     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00730       \textcolor{comment}{// Find the workingDir (the first existing path)}}
\DoxyCodeLine{00731       \textcolor{comment}{// and in the meantime, store the missing folders on files}}
\DoxyCodeLine{00732       QStringList files;}
\DoxyCodeLine{00733       \textcolor{keywordflow}{while} (!\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(path).doesExist()) \{}
\DoxyCodeLine{00734         files.prepend(toQString(path));}
\DoxyCodeLine{00735         path = path.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}();}
\DoxyCodeLine{00736       \}}
\DoxyCodeLine{00737 }
\DoxyCodeLine{00738       \textcolor{comment}{// Make the files relative to the workingDir and adjust the slash}}
\DoxyCodeLine{00739       QString workingDir = toQString(path.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}());}
\DoxyCodeLine{00740       QDir dir(workingDir);}
\DoxyCodeLine{00741       QStringList relativeFiles;}
\DoxyCodeLine{00742       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < files.count(); i++) \{}
\DoxyCodeLine{00743 \textcolor{preprocessor}{\#ifdef MACOSX}}
\DoxyCodeLine{00744         relativeFiles << dir.relativeFilePath(files.at(i));}
\DoxyCodeLine{00745 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00746         relativeFiles << dir.relativeFilePath(files.at(i)).replace(\textcolor{stringliteral}{"{}/"{}}, \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)"{}});}
\DoxyCodeLine{00747 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00748       \}}
\DoxyCodeLine{00749 }
\DoxyCodeLine{00750       relativeFiles.append(QString::fromStdWString(node-\/>getName()));}
\DoxyCodeLine{00751 }
\DoxyCodeLine{00752       \textcolor{keywordflow}{if} (relativeFiles.count() == 1)}
\DoxyCodeLine{00753         vc-\/>update(\textcolor{keyword}{this}, workingDir, relativeFiles, 0);}
\DoxyCodeLine{00754       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00755         \textcolor{comment}{// Update the missing folders with non-\/recursive option ON}}
\DoxyCodeLine{00756         vc-\/>update(\textcolor{keyword}{this}, workingDir, relativeFiles, 0, \textcolor{keyword}{true}, \textcolor{keyword}{false}, \textcolor{keyword}{true});}
\DoxyCodeLine{00757     \}}
\DoxyCodeLine{00758   \}}
\DoxyCodeLine{00759 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/dvdirtreeview.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/dvdirtreeview.\+cpp\end{DoxyCompactItemize}
