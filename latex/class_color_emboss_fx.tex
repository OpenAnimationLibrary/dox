\hypertarget{class_color_emboss_fx}{}\doxysection{Color\+Emboss\+Fx Class Reference}
\label{class_color_emboss_fx}\index{ColorEmbossFx@{ColorEmbossFx}}
Inheritance diagram for Color\+Emboss\+Fx\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=5.000000cm]{class_color_emboss_fx}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_color_emboss_fx_a60e83c54838e980395fff7b87a1339cf}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{class_color_emboss_fx_a2da118e0276d66ba845f76f714f1280a}{transform}} (double frame, int port, const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect\+On\+Output, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info\+On\+Output, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect\+On\+Input, \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info\+On\+Input) override
\item 
int \mbox{\hyperlink{class_color_emboss_fx_a901919b272b07f70cbc4eb954dcbf417}{get\+Memory\+Requirement}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{class_color_emboss_fx_a4fd26722b86737a88db78f936aa23fb2}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&ri) override
\item 
bool \mbox{\hyperlink{class_color_emboss_fx_aad7bdc45cc4d0292d27440039f91434d}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_color_emboss_fx_a006908400c6325a91edf9f46ba934e88}\label{class_color_emboss_fx_a006908400c6325a91edf9f46ba934e88}} 
\index{ColorEmbossFx@{ColorEmbossFx}!ColorEmbossFx@{ColorEmbossFx}}
\index{ColorEmbossFx@{ColorEmbossFx}!ColorEmbossFx@{ColorEmbossFx}}
\doxysubsubsection{\texorpdfstring{ColorEmbossFx()}{ColorEmbossFx()}}
{\footnotesize\ttfamily Color\+Emboss\+Fx\+::\+Color\+Emboss\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00021       : m\_intensity(0.5), m\_elevation(45.0), m\_direction(90.0), m\_radius(1.0) \{}
\DoxyCodeLine{00022     m\_radius-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00023     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}intensity"{}}, m\_intensity);}
\DoxyCodeLine{00024     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}elevation"{}}, m\_elevation);}
\DoxyCodeLine{00025     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}direction"{}}, m\_direction);}
\DoxyCodeLine{00026     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}radius"{}}, m\_radius);}
\DoxyCodeLine{00027     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Source"{}}, m\_input);}
\DoxyCodeLine{00028     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Controller"{}}, m\_controller);}
\DoxyCodeLine{00029     m\_intensity-\/>setValueRange(0.0, 1.0, 0.1);}
\DoxyCodeLine{00030     m\_elevation-\/>setValueRange(0.0, 360.0);}
\DoxyCodeLine{00031     m\_direction-\/>setValueRange(0.0, 360.0);}
\DoxyCodeLine{00032     m\_radius-\/>setValueRange(0.0, 10.0);}
\DoxyCodeLine{00033   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_color_emboss_fx_ace07baa287d8189a157bd8fd4d92f7fe}\label{class_color_emboss_fx_ace07baa287d8189a157bd8fd4d92f7fe}} 
\index{ColorEmbossFx@{ColorEmbossFx}!````~ColorEmbossFx@{$\sim$ColorEmbossFx}}
\index{````~ColorEmbossFx@{$\sim$ColorEmbossFx}!ColorEmbossFx@{ColorEmbossFx}}
\doxysubsubsection{\texorpdfstring{$\sim$ColorEmbossFx()}{~ColorEmbossFx()}}
{\footnotesize\ttfamily Color\+Emboss\+Fx\+::$\sim$\+Color\+Emboss\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00035 \{\};}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_color_emboss_fx_aad7bdc45cc4d0292d27440039f91434d}\label{class_color_emboss_fx_aad7bdc45cc4d0292d27440039f91434d}} 
\index{ColorEmbossFx@{ColorEmbossFx}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!ColorEmbossFx@{ColorEmbossFx}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool Color\+Emboss\+Fx\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00055                                                                      \{}
\DoxyCodeLine{00056     \textcolor{keywordflow}{return} (isAlmostIsotropic(info.m\_affine));}
\DoxyCodeLine{00057   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_color_emboss_fx_a4fd26722b86737a88db78f936aa23fb2}\label{class_color_emboss_fx_a4fd26722b86737a88db78f936aa23fb2}} 
\index{ColorEmbossFx@{ColorEmbossFx}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!ColorEmbossFx@{ColorEmbossFx}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void Color\+Emboss\+Fx\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{ri }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00168                                                          \{}
\DoxyCodeLine{00169   \textcolor{keywordflow}{if} (!m\_input.isConnected()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00170 }
\DoxyCodeLine{00171   \textcolor{keywordtype}{double} scale     = sqrt(fabs(ri.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.det()));}
\DoxyCodeLine{00172   \textcolor{keywordtype}{double} radius    = m\_radius-\/>getValue(frame) * scale;}
\DoxyCodeLine{00173   \textcolor{keywordtype}{double} direction = m\_direction-\/>getValue(frame);}
\DoxyCodeLine{00174   \textcolor{keywordtype}{double} elevation = (m\_elevation-\/>getValue(frame)) * M\_PI\_180;}
\DoxyCodeLine{00175   \textcolor{keywordtype}{double} intensity = m\_intensity-\/>getValue(frame);}
\DoxyCodeLine{00176   \textcolor{keywordtype}{double} azimuth   = direction * M\_PI\_180;}
\DoxyCodeLine{00177 }
\DoxyCodeLine{00178   \textcolor{keywordtype}{int} border = radius + 1;}
\DoxyCodeLine{00179   \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} srcRas =}
\DoxyCodeLine{00180       tile.getRaster()-\/>create(tile.getRaster()-\/>getLx() + border * 2,}
\DoxyCodeLine{00181                                tile.getRaster()-\/>getLy() + border * 2);}
\DoxyCodeLine{00182   \textcolor{comment}{// TRaster32P srcRas(tile.getRaster()-\/>getLx() + border*2,}}
\DoxyCodeLine{00183   \textcolor{comment}{// tile.getRaster()-\/>getLy() + border*2);}}
\DoxyCodeLine{00184   \mbox{\hyperlink{class_t_tile}{TTile}} srcTile(srcRas, tile.m\_pos -\/ \mbox{\hyperlink{class_t_point_t}{TPointD}}(border, border));}
\DoxyCodeLine{00185 }
\DoxyCodeLine{00186   \mbox{\hyperlink{class_t_tile}{TTile}} ctrTile;}
\DoxyCodeLine{00187 }
\DoxyCodeLine{00188   m\_input-\/>compute(srcTile, frame, ri);}
\DoxyCodeLine{00189   \textcolor{keywordflow}{if} (!m\_controller.isConnected()) \{}
\DoxyCodeLine{00190     ctrTile.m\_pos = srcTile.m\_pos;}
\DoxyCodeLine{00191     ctrTile.setRaster(srcTile.getRaster());}
\DoxyCodeLine{00192   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00193     ctrTile.m\_pos = tile.m\_pos -\/ \mbox{\hyperlink{class_t_point_t}{TPointD}}(border, border);}
\DoxyCodeLine{00194     ctrTile.setRaster(}
\DoxyCodeLine{00195         tile.getRaster()-\/>create(tile.getRaster()-\/>getLx() + border * 2,}
\DoxyCodeLine{00196                                  tile.getRaster()-\/>getLy() + border * 2));}
\DoxyCodeLine{00197     m\_controller-\/>allocateAndCompute(ctrTile, ctrTile.m\_pos,}
\DoxyCodeLine{00198                                      ctrTile.getRaster()-\/>getSize(),}
\DoxyCodeLine{00199                                      ctrTile.getRaster(), frame, ri);}
\DoxyCodeLine{00200     \textcolor{comment}{// m\_controller-\/>compute(ctrTile,frame,ri);}}
\DoxyCodeLine{00201   \}}
\DoxyCodeLine{00202   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} raster32    = tile.getRaster();}
\DoxyCodeLine{00203   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} srcraster32 = srcTile.getRaster();}
\DoxyCodeLine{00204   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} ctrraster32 = ctrTile.getRaster();}
\DoxyCodeLine{00205   \textcolor{keywordflow}{if} (raster32)}
\DoxyCodeLine{00206     doColorEmboss<TPixel32, TPixelGR8, UCHAR>(raster32, srcraster32,}
\DoxyCodeLine{00207                                               ctrraster32, azimuth, elevation,}
\DoxyCodeLine{00208                                               intensity, radius);}
\DoxyCodeLine{00209   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00210     \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} raster64    = tile.getRaster();}
\DoxyCodeLine{00211     \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} srcraster64 = srcTile.getRaster();}
\DoxyCodeLine{00212     \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} ctrraster64 = ctrTile.getRaster();}
\DoxyCodeLine{00213     \textcolor{keywordflow}{if} (raster64)}
\DoxyCodeLine{00214       doColorEmboss<TPixel64, TPixelGR16, USHORT>(raster64, srcraster64,}
\DoxyCodeLine{00215                                                   ctrraster64, azimuth,}
\DoxyCodeLine{00216                                                   elevation, intensity, radius);}
\DoxyCodeLine{00217     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00218       \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}Brightness\&Contrast: unsupported Pixel Type"{}});}
\DoxyCodeLine{00219   \}}
\DoxyCodeLine{00220 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_color_emboss_fx_a60e83c54838e980395fff7b87a1339cf}\label{class_color_emboss_fx_a60e83c54838e980395fff7b87a1339cf}} 
\index{ColorEmbossFx@{ColorEmbossFx}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!ColorEmbossFx@{ColorEmbossFx}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool Color\+Emboss\+Fx\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00038                                                        \{}
\DoxyCodeLine{00039     \textcolor{keywordflow}{if} (m\_input.isConnected()) \{}
\DoxyCodeLine{00040       \textcolor{keywordtype}{bool} ret = m\_input-\/>doGetBBox(frame, bBox, info);}
\DoxyCodeLine{00041       \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00042     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00043       bBox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00044       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00045     \}}
\DoxyCodeLine{00046   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_color_emboss_fx_a901919b272b07f70cbc4eb954dcbf417}\label{class_color_emboss_fx_a901919b272b07f70cbc4eb954dcbf417}} 
\index{ColorEmbossFx@{ColorEmbossFx}!getMemoryRequirement@{getMemoryRequirement}}
\index{getMemoryRequirement@{getMemoryRequirement}!ColorEmbossFx@{ColorEmbossFx}}
\doxysubsubsection{\texorpdfstring{getMemoryRequirement()}{getMemoryRequirement()}}
{\footnotesize\ttfamily int Color\+Emboss\+Fx\+::get\+Memory\+Requirement (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Specifies the approximate size (in Mega\+Bytes) of the maximum allocation instance that this fx will need to perform in order to render the passed input. This method should be reimplemented in order to make the Toonz rendering process aware of the use of big raster memory chunks, at least. Observe that the passed tile geometry is implicitly {\itshape  already allocated \texorpdfstring{$<$}{<}\textbackslash{}i\texorpdfstring{$>$}{>} for the fx output. ~\newline
The default implementation returns 0, assuming that the passed implicit memory size is passed below in node computation without further allocation of resources. Fxs can reimplement this to -\/1 to explicitly disable the Toonz\textquotesingle{}s smart memory handling. ~\newline
 ~\newline
\begin{DoxyNote}{Note}
The rendering process ensures that the passed render settings are {\itshape handled} by the fx before this function is invoked -\/ do not waste code for it. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRaster\+Fx\+::memory\+Size}} and TRaster\+Fx\+::can\+Handle methods. 
\end{DoxySeeAlso}
}

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_af8eb991c9756f4fb2e48d9f96cbacfba}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00225                                                                      \{}
\DoxyCodeLine{00226   \textcolor{keywordtype}{double} scale  = sqrt(fabs(info.m\_affine.det()));}
\DoxyCodeLine{00227   \textcolor{keywordtype}{double} radius = m\_radius-\/>getValue(frame) * scale;}
\DoxyCodeLine{00228   \textcolor{keywordtype}{int} border    = radius + 1;}
\DoxyCodeLine{00229 }
\DoxyCodeLine{00230   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRasterFx::memorySize}}(rect.enlarge(border), info.m\_bpp);}
\DoxyCodeLine{00231 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00560}{TRaster\+Fx\+::memory\+Size()}}.

\mbox{\Hypertarget{class_color_emboss_fx_a2da118e0276d66ba845f76f714f1280a}\label{class_color_emboss_fx_a2da118e0276d66ba845f76f714f1280a}} 
\index{ColorEmbossFx@{ColorEmbossFx}!transform@{transform}}
\index{transform@{transform}!ColorEmbossFx@{ColorEmbossFx}}
\doxysubsubsection{\texorpdfstring{transform()}{transform()}}
{\footnotesize\ttfamily void Color\+Emboss\+Fx\+::transform (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{int}]{port,  }\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect\+On\+Output,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info\+On\+Output,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect\+On\+Input,  }\item[{\mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info\+On\+Input }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00155                                                             \{}
\DoxyCodeLine{00156   infoOnInput = infoOnOutput;}
\DoxyCodeLine{00157 }
\DoxyCodeLine{00158   \textcolor{keywordtype}{double} scale  = sqrt(fabs(infoOnOutput.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.det()));}
\DoxyCodeLine{00159   \textcolor{keywordtype}{double} radius = m\_radius-\/>getValue(frame) * scale;}
\DoxyCodeLine{00160   \textcolor{keywordtype}{int} border    = radius + 1;}
\DoxyCodeLine{00161 }
\DoxyCodeLine{00162   rectOnInput = rectOnOutput.enlarge(border);}
\DoxyCodeLine{00163 \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/colorembossfx.\+cpp\end{DoxyCompactItemize}
