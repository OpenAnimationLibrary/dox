\hypertarget{class_t_xsh_simple_level}{}\doxysection{TXsh\+Simple\+Level Class Reference}
\label{class_t_xsh_simple_level}\index{TXshSimpleLevel@{TXshSimpleLevel}}


The {\ttfamily \mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}}} specialization for image levels.  




{\ttfamily \#include $<$txshsimplelevel.\+h$>$}

Inheritance diagram for TXsh\+Simple\+Level\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_t_xsh_simple_level}
\end{center}
\end{figure}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49}{Frame\+Status\+Bit}} \{ \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a06c6ffb8fd8591fc9c26643daf75d68b}{Normal}} = 0x0
, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{Scanned}} = 0x1
, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a48aa37d686efea1d08332d5ffa69548d}{Cleanupped}} = 0x2
, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a9e5aa8f328730d501a912a0e11fe39f0}{Cleanup\+Preview}} = 0x4
 \}
\begin{DoxyCompactList}\small\item\em Describes a level\textquotesingle{}s frame status. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a8e5daf2f3289f55421557fdbf42c54a6}{on\+Palette\+Changed}} ()
\begin{DoxyCompactList}\small\item\em Invoked when some colorstyle has been changed. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_xsh_simple_level_ac40b0fd6e8a358444c0e18cd5eb8fc63}{TXsh\+Simple\+Level}} (const std\+::wstring \&name=std\+::wstring())
\begin{DoxyCompactList}\small\item\em Constructs a \mbox{\hyperlink{class_t_xsh_simple_level}{TXsh\+Simple\+Level}} with a name. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_xsh_simple_level}{TXsh\+Simple\+Level}} $\ast$ \mbox{\hyperlink{class_t_xsh_simple_level_aac1fd1d3ecf0778b8ee139c9119fcdef}{get\+Simple\+Level}} () override
\begin{DoxyCompactList}\small\item\em Reimplemented for \mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}}. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_t_xsh_simple_level_a31db45fd67e847b52c96ef1836c9d989}{is\+Subsequence}} () const
\item 
bool \mbox{\hyperlink{class_t_xsh_simple_level_a4aa1b2a8203d6cb121719b9e100c9643}{is16\+Bit\+Channel\+Level}} () const
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_ac2f74e888a0c939cd513bff79447481b}{set16\+Bit\+Channel\+Level}} (bool value)
\item 
bool \mbox{\hyperlink{class_t_xsh_simple_level_a1a75ee26ceeb8922209d2146de77931a}{is\+Read\+Only}} () const
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a2f023bb4f212dcf6b767e1517e9f9c5b}{set\+Is\+Read\+Only}} (bool value)
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_aaad854d2871f2b9ded0469d117f90c7d}{update\+Read\+Only}} ()
\item 
\mbox{\hyperlink{class_level_properties}{Level\+Properties}} $\ast$ \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{get\+Properties}} () const
\begin{DoxyCompactList}\small\item\em \texorpdfstring{$<$}{<} Returns a pointer to the {\itshape owned} level properties. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a09ad625966e5c83579880385054ad43f}{clone\+Properties\+From}} (const \mbox{\hyperlink{class_t_xsh_simple_level}{TXsh\+Simple\+Level}} $\ast$old\+Sl)
\item 
\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$ \mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{get\+Palette}} () const
\begin{DoxyCompactList}\small\item\em Returns a pointer to the {\itshape shared} level palette. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_ab5634198656dc2ade669fae235bb19c0}{set\+Palette}} (\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$palette)
\begin{DoxyCompactList}\small\item\em Assigns a palette to the level. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{get\+Path}} () const override
\begin{DoxyCompactList}\small\item\em Return the file path associated with the level. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a357d236b080a555590b1f84a78f00059}{set\+Path}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path, bool retain\+Cached\+Images=false)
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_t_xsh_simple_level_a35e541e6a786f6e7db6d8cf8fa6b2a8d}{get\+Scanned\+Path}} () const
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_af87056a3a5552ad2dfc009b76bbc30f9}{set\+Scanned\+Path}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path)
\item 
std\+::vector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{get\+Fids}} () const
\begin{DoxyCompactList}\small\item\em Returns a copy of the level\textquotesingle{}s frame ids. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a4c261e511a4288929f1efdf18ee96957}{get\+Fids}} (std\+::vector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \&fids) const override
\item 
\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \mbox{\hyperlink{class_t_xsh_simple_level_a18862340ce6e813778b40a7913b13252}{get\+First\+Fid}} () const
\item 
\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \mbox{\hyperlink{class_t_xsh_simple_level_a6e31155f1a6bf0f0db641ffaff2ef2c5}{get\+Last\+Fid}} () const
\item 
bool \mbox{\hyperlink{class_t_xsh_simple_level_a7c256d2745209a181a2dbccdec949c5e}{is\+Empty}} () const override
\begin{DoxyCompactList}\small\item\em Returns whether the level is empty. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_t_xsh_simple_level_a14de45c4b17032346cfcffbca8ef9751}{is\+Fid}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid) const
\begin{DoxyCompactList}\small\item\em Returns whether a given frame\+Id is in the level. \end{DoxyCompactList}\item 
const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \& \mbox{\hyperlink{class_t_xsh_simple_level_abb72e2ab0c1baeda0a8af3146003181d}{get\+Frame\+Id}} (int index) const
\begin{DoxyCompactList}\small\item\em Returns the frame id at specified index. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_t_xsh_simple_level_a3fe127306d6669a3eb9e9d8802660d7b}{get\+Frame\+Count}} () const override
\begin{DoxyCompactList}\small\item\em Returns the level\textquotesingle{}s frames count. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \mbox{\hyperlink{class_t_xsh_simple_level_a07279a40ffad2c6ccc597c0a418f78fb}{index2fid}} (int index) const
\item 
int \mbox{\hyperlink{class_t_xsh_simple_level_ad3ec4942dc183f5245afa9c51b22c7f6}{fid2index}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid) const
\begin{DoxyCompactList}\small\item\em an invalid frame otherwise. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_t_xsh_simple_level_af30a02239ef0900c095a0af366dea26a}{guess\+Index}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid) const
\item 
int \mbox{\hyperlink{class_t_xsh_simple_level_a4140aae35b5062f7d2726f9f67ef2f7c}{guess\+Step}} () const
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_ac10fe469f376b02ef16ba0f5d68d3e33}{set\+Frame}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid, const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \&img)
\item 
\mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \mbox{\hyperlink{class_t_xsh_simple_level_a0d991e6bf3349bd5daa09a164a47bddc}{get\+Frame}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid, UCHAR img\+Manager\+Params\+Mask, int subsampling) const
\item 
\mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \mbox{\hyperlink{class_t_xsh_simple_level_ad0282348e0f1617baeafa246b38f3f21}{get\+Frame}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid, bool to\+Be\+Modified) const
\item 
\mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \mbox{\hyperlink{class_t_xsh_simple_level_a71760ecea2543465ba394b6e4b5e93ef}{get\+Fullsampled\+Frame}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid, UCHAR img\+Manager\+Params\+Mask) const
\item 
\mbox{\hyperlink{class_t_image_info}{TImage\+Info}} $\ast$ \mbox{\hyperlink{class_t_xsh_simple_level_af47f89b2f1d6f60def48b3cbf8bb5499}{get\+Frame\+Info}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid, bool to\+Be\+Modified)
\item 
\mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \mbox{\hyperlink{class_t_xsh_simple_level_a28197dd6d50d8b16b8530febce6bce0b}{get\+Frame\+Icon}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid) const
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_aa19f7a82a829c41f01db03f96d70a4d7}{load\+All\+Icons\+And\+Put\+In\+Cache}} (bool cache\+Images\+As\+Well)
\item 
\mbox{\hyperlink{class_t_raster_image_p}{TRaster\+ImageP}} \mbox{\hyperlink{class_t_xsh_simple_level_a2f5deff7336e87be32b63f9e12d71050}{get\+Frame\+To\+Cleanup}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid, bool to\+Be\+Line\+Processed) const
\item 
std\+::string \mbox{\hyperlink{class_t_xsh_simple_level_acfb8ef0804004135757b37d2bea2fd83}{get\+Image\+Id}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid, int frame\+Status=-\/1) const
\item 
std\+::string \mbox{\hyperlink{class_t_xsh_simple_level_a3a120ff2c7a35866879ceef1cb0a3629}{get\+Icon\+Id}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid, int frame\+Status=-\/1) const
\item 
std\+::string \mbox{\hyperlink{class_t_xsh_simple_level_a121f2766a1380da50998b41c7b4abe64}{get\+Icon\+Id}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid, const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&size) const
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_ada690578191ecbafe178673f204b98ce}{erase\+Frame}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid)
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a2fb801d7b3ad58bf8a73281f5d15c3cd}{clear\+Frames}} ()
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a981bbb92457662c5a66693d15c5bcf19}{invalidate\+Frames}} ()
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a0461a1c4cbf4aff6acf7479174033f6f}{invalidate\+Frame}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid)
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_ae74a8922e3cfb3356ae9042e58856c01}{set\+Editable\+Range}} (unsigned int from, unsigned int to, const std\+::wstring \&user\+Name)
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a5e71ae3a6b6ec37d33dc92a58ddc3b8d}{merge\+Temporary\+Hook\+File}} (unsigned int from, unsigned int to, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&hook\+File)
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_aafef693ff651441200a8b48d8b0b367d}{clear\+Editable\+Range}} ()
\item 
std\+::wstring \mbox{\hyperlink{class_t_xsh_simple_level_a8e3b0b2db2063e9537dd860ffe28a774}{get\+Editable\+File\+Name}} ()
\item 
std\+::set$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \mbox{\hyperlink{class_t_xsh_simple_level_adadcf84e1ef7d94aa0bc4410f52332ef}{get\+Editable\+Range}} ()
\begin{DoxyCompactList}\small\item\em Returns the set of editable frames. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_t_xsh_simple_level_add3a3a38b51d02621b1e5195fd8feee9}{get\+Frame\+Status}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid) const
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a492141fa9602d610b557dbe83e46c896}{set\+Frame\+Status}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid, int status)
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a3ac0eaee60df10d4e1deee2a5fa274e4}{make\+Tlv}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&tlv\+Path)
\item 
\mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \mbox{\hyperlink{class_t_xsh_simple_level_a32326317b949489c443457ddd55ce256}{create\+Empty\+Frame}} ()
\begin{DoxyCompactList}\small\item\em and assigns the specified level path. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a7688e3e000ae055f621e60bbced5aa05}{initialize\+Palette}} ()
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_ac342615c70611075cc00981de033b863}{initialize\+Resolution\+And\+Dpi}} (const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&dim=\mbox{\hyperlink{class_t_dimension_t}{TDimension}}(), double dpi=0)
\item 
\mbox{\hyperlink{class_t_dimension_t}{TDimension}} \mbox{\hyperlink{class_t_xsh_simple_level_a80b67bf33b6c5511d9f7e2622f4c1f2e}{get\+Resolution}} ()
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_t_xsh_simple_level_a303bad2dd6286eca6edab017b0363de4}{get\+Image\+Dpi}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid=TFrame\+Id\+::\+NO\+\_\+\+FRAME, int frame\+Status=-\/1)
\item 
int \mbox{\hyperlink{class_t_xsh_simple_level_a9fa8472504756ac06cf72c4162ce0cbd}{get\+Image\+Subsampling}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid) const
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_t_xsh_simple_level_a5ec6eb953e3175d60b41f7b8d7694a0f}{get\+Dpi}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid=TFrame\+Id\+::\+NO\+\_\+\+FRAME, int frame\+Status=-\/1)
\item 
\mbox{\hyperlink{class_t_rect_t}{TRectD}} \mbox{\hyperlink{class_t_xsh_simple_level_a1629d7fbc5e0c41ebc1a40f9f70d40d5}{get\+BBox}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid) const
\begin{DoxyCompactList}\small\item\em Returns the bbox for the level\textquotesingle{}s fid, specified in standard {\itshape inch} coordinates (which are {\itshape different} from Toonz\textquotesingle{}s standard world coordinates, by a {\ttfamily \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage\+::inch}}} factor). ~\newline
 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a2d43337766628739707849f8808bf300}{set\+Dirty\+Flag}} (bool on) override
\begin{DoxyCompactList}\small\item\em Mark the level as \char`\"{}modified\char`\"{}. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_t_xsh_simple_level_a93b2da3076b24d08ccf636df578b70e5}{get\+Dirty\+Flag}} () const
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a3c20a8d11037048322d2035b0f286209}{touch\+Frame}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid)
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a42dbcc372a4560b9a57da010a9c296a6}{load\+Data}} (\mbox{\hyperlink{class_t_i_stream}{TIStream}} \&is) override
\begin{DoxyCompactList}\small\item\em Load the level data (i.\+e. name, path, etc. e.\+g. from the .tnz file) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a62a0a3eb6da8cbc0a47394e6a0004d5c}{save\+Data}} (\mbox{\hyperlink{class_t_o_stream}{TOStream}} \&os) override
\begin{DoxyCompactList}\small\item\em Save the level data (i.\+e. name, path, etc. e.\+g. to the .tnz file) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a0020922626c177cd3134a05e274aecee}{load}} () override
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_ace19983fd4d21561e5ba21b88efa567a}{load}} (const std\+::vector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \&f\+Ids)
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a5ceff3b4f997fbe62be18948fc893404}{save}} () override
\begin{DoxyCompactList}\small\item\em Saves the level to disk, with the same path deduction from \mbox{\hyperlink{class_t_xsh_simple_level_a0020922626c177cd3134a05e274aecee}{load()}} \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a19f8349ba4f9da7093bace45045245bc}{save}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&old\+Fp=\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}(), bool overwrite\+Palette=true)
\item 
const \mbox{\hyperlink{class_t_content_history}{TContent\+History}} $\ast$ \mbox{\hyperlink{class_t_xsh_simple_level_a2fe15ee3d60e1f5f5c38d6ba75d36812}{get\+Content\+History}} () const
\begin{DoxyCompactList}\small\item\em note gets the content\+History. can be 0 \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_content_history}{TContent\+History}} $\ast$ \mbox{\hyperlink{class_t_xsh_simple_level_ae409bd3bb5c7d5f796555c6396fc449a}{get\+Content\+History}} ()
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_aa5ae2d1b425b93a9e37fbfcb324a5db6}{set\+Content\+History}} (\mbox{\hyperlink{class_t_content_history}{TContent\+History}} $\ast$content\+History)
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_a7465cffde15c5f7a8686842c770c2ef6}{set\+Renumber\+Table}} ()
\begin{DoxyCompactList}\small\item\em Set elements of m\+\_\+renumber\+Table with m\+\_\+frames. \end{DoxyCompactList}\item 
const std\+::map$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}}, \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \& \mbox{\hyperlink{class_t_xsh_simple_level_a7c2de43cb6feaf09e535ea34c0c373ea}{renumber\+Table}} () const
\item 
void \mbox{\hyperlink{class_t_xsh_simple_level_ad682afea2e389bdc6fa1c09e2b068b48}{renumber}} (const std\+::vector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \&fids)
\item 
bool \mbox{\hyperlink{class_t_xsh_simple_level_a8287af55e61806df64e30a1f5e45d25e}{is\+Frame\+Read\+Only}} (\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} fid)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{class_t_xsh_simple_level_a821df490f42bb53d419ed4d3c4b97972}{copy\+Files}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&dst, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&src)
\begin{DoxyCompactList}\small\item\em Copy files from src to dst. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{class_t_xsh_simple_level_a1f00c48167fa350ad00beccef0ddff82}{rename\+Files}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&dst, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&src)
\begin{DoxyCompactList}\small\item\em Rename files from src to dst. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{class_t_xsh_simple_level_ab2d4d9c31e14ec66fc92c58a80fba74d}{remove\+Files}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp)
\begin{DoxyCompactList}\small\item\em Remove files at fp. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{class_t_xsh_simple_level_aa3761996a872dfbfd19d13b63ad336f6}{get\+Files}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp, TFile\+Path\+Set \&fpset)
\begin{DoxyCompactList}\small\item\em Get the auxiliary files list\+: hooks, tpl, etc. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_t_xsh_simple_level_a23704b0d8be9290a8ab9c72c3139958b}{get\+Hook\+Path}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&level\+Path)
\item 
static QString\+List \mbox{\hyperlink{class_t_xsh_simple_level_a6dc5e2310d937b00491db968372077dd}{get\+Hook\+Files}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&decoded\+Level\+Path)
\begin{DoxyCompactList}\small\item\em Returns the list of {\itshape existing} hook files associated to the specified level, sorted by modification date (last modified at front). The list stores {\itshape local paths\texorpdfstring{$<$}{<}\textbackslash{}I\texorpdfstring{$>$}{>} relative to decoded\+Level\+Path.\+get\+Parent\+Dir(). }\end{DoxyCompactList}\item 
static \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_t_xsh_simple_level_a543f442eca762915046bf52bccc2b4fc}{get\+Existing\+Hook\+File}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&decoded\+Level\+Path)
\begin{DoxyCompactList}\small\item\em Returns the path of the newest {\itshape existing} hook file associated to the specified {\bfseries{decoded}} level path -\/ or an empty path if none was found. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{class_t_xsh_simple_level_a403c0b6e8da4e6cb1f0d7f9b761d40e6}{set\+Compatibility\+Masks}} (int write\+Mask, int needed\+Mask, int forbidden\+Mask)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static bool \mbox{\hyperlink{class_t_xsh_simple_level_abcb2dceb9b684d8734ebb897a744507e}{m\+\_\+rasterize\+Pli}} = false
\item 
static bool \mbox{\hyperlink{class_t_xsh_simple_level_a011698d3e692cbbe468a03a36e64634a}{m\+\_\+fill\+Full\+Color\+Raster}} = false
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
The {\ttfamily \mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}}} specialization for image levels. 

\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000005}{Todo}}]Substitute m\+\_\+frames with a sorted vector or a boost flat\+\_\+set. \end{DoxyRefDesc}


\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49}\label{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!FrameStatusBit@{FrameStatusBit}}
\index{FrameStatusBit@{FrameStatusBit}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{FrameStatusBit}{FrameStatusBit}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49}{TXsh\+Simple\+Level\+::\+Frame\+Status\+Bit}}}



Describes a level\textquotesingle{}s frame status. 

Level frames may have special properties depending on the level type they are part of.

\begin{DoxySeeAlso}{See also}
{\ttfamily TXsh\+Simple\+Level\+::get\+Frame\+Status()} and {\ttfamily set\+Frame\+Status()} for further details. ~\newline
 
\end{DoxySeeAlso}
\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{Normal@{Normal}!TXshSimpleLevel@{TXshSimpleLevel}}\index{TXshSimpleLevel@{TXshSimpleLevel}!Normal@{Normal}}}\mbox{\Hypertarget{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a06c6ffb8fd8591fc9c26643daf75d68b}\label{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a06c6ffb8fd8591fc9c26643daf75d68b}} 
Normal&Frame has no special status. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Scanned@{Scanned}!TXshSimpleLevel@{TXshSimpleLevel}}\index{TXshSimpleLevel@{TXshSimpleLevel}!Scanned@{Scanned}}}\mbox{\Hypertarget{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}\label{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}} 
Scanned&A fullcolor frame (only tlv levels). \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Cleanupped@{Cleanupped}!TXshSimpleLevel@{TXshSimpleLevel}}\index{TXshSimpleLevel@{TXshSimpleLevel}!Cleanupped@{Cleanupped}}}\mbox{\Hypertarget{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a48aa37d686efea1d08332d5ffa69548d}\label{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a48aa37d686efea1d08332d5ffa69548d}} 
Cleanupped&A cleanupped frame (only tlv levels). \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{CleanupPreview@{CleanupPreview}!TXshSimpleLevel@{TXshSimpleLevel}}\index{TXshSimpleLevel@{TXshSimpleLevel}!CleanupPreview@{CleanupPreview}}}\mbox{\Hypertarget{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a9e5aa8f328730d501a912a0e11fe39f0}\label{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a9e5aa8f328730d501a912a0e11fe39f0}} 
Cleanup\+Preview&A cleanup preview (only fullcolor levels). \\
\hline

\end{DoxyEnumFields}

\begin{DoxyCode}{0}
\DoxyCodeLine{00074   \{ \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a06c6ffb8fd8591fc9c26643daf75d68b}{Normal}}         = 0x0,  }
\DoxyCodeLine{00075     \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{Scanned}}        = 0x1,  }
\DoxyCodeLine{00076     \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a48aa37d686efea1d08332d5ffa69548d}{Cleanupped}}     = 0x2,  }
\DoxyCodeLine{00077     \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a9e5aa8f328730d501a912a0e11fe39f0}{CleanupPreview}} = 0x4   }
\DoxyCodeLine{00078   \};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_xsh_simple_level_ac40b0fd6e8a358444c0e18cd5eb8fc63}\label{class_t_xsh_simple_level_ac40b0fd6e8a358444c0e18cd5eb8fc63}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!TXshSimpleLevel@{TXshSimpleLevel}}
\index{TXshSimpleLevel@{TXshSimpleLevel}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{TXshSimpleLevel()}{TXshSimpleLevel()}}
{\footnotesize\ttfamily TXsh\+Simple\+Level\+::\+TXsh\+Simple\+Level (\begin{DoxyParamCaption}\item[{const std\+::wstring \&}]{name = {\ttfamily std\+:\+:wstring()} }\end{DoxyParamCaption})}



Constructs a \mbox{\hyperlink{class_t_xsh_simple_level}{TXsh\+Simple\+Level}} with a name. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00191     : \mbox{\hyperlink{class_t_xsh_level_a64bf9b4713e40877c379b5a9be03aca2}{TXshLevel}}(m\_classCode, name)}
\DoxyCodeLine{00192     , m\_properties(\textcolor{keyword}{new} \mbox{\hyperlink{class_level_properties}{LevelProperties}})}
\DoxyCodeLine{00193     , m\_palette(0)}
\DoxyCodeLine{00194     , m\_idBase(std::to\_string(idBaseCode++))}
\DoxyCodeLine{00195     , m\_editableRangeUserInfo(L\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{00196     , m\_isSubsequence(\textcolor{keyword}{false})}
\DoxyCodeLine{00197     , m\_16BitChannelLevel(\textcolor{keyword}{false})}
\DoxyCodeLine{00198     , m\_isReadOnly(\textcolor{keyword}{false})}
\DoxyCodeLine{00199     , m\_temporaryHookMerged(\textcolor{keyword}{false}) \{\}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01468}{save()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_aef1ef0c2d382bcd96b0d2c6a2e99e4dd}\label{class_t_xsh_simple_level_aef1ef0c2d382bcd96b0d2c6a2e99e4dd}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!````~TXshSimpleLevel@{$\sim$TXshSimpleLevel}}
\index{````~TXshSimpleLevel@{$\sim$TXshSimpleLevel}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{$\sim$TXshSimpleLevel()}{~TXshSimpleLevel()}}
{\footnotesize\ttfamily TXsh\+Simple\+Level\+::$\sim$\+TXsh\+Simple\+Level (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00203                                   \{}
\DoxyCodeLine{00204   clearFrames();}
\DoxyCodeLine{00205 }
\DoxyCodeLine{00206   \textcolor{keywordflow}{if} (m\_palette) m\_palette-\/>release();}
\DoxyCodeLine{00207 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_xsh_simple_level_aafef693ff651441200a8b48d8b0b367d}\label{class_t_xsh_simple_level_aafef693ff651441200a8b48d8b0b367d}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!clearEditableRange@{clearEditableRange}}
\index{clearEditableRange@{clearEditableRange}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{clearEditableRange()}{clearEditableRange()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::clear\+Editable\+Range (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00282                                          \{}
\DoxyCodeLine{00283   m\_editableRange.clear();}
\DoxyCodeLine{00284   m\_editableRangeUserInfo = L\textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00285 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a2fb801d7b3ad58bf8a73281f5d15c3cd}\label{class_t_xsh_simple_level_a2fb801d7b3ad58bf8a73281f5d15c3cd}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!clearFrames@{clearFrames}}
\index{clearFrames@{clearFrames}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{clearFrames()}{clearFrames()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::clear\+Frames (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00870                                   \{}
\DoxyCodeLine{00871   \mbox{\hyperlink{class_image_manager}{ImageManager}} *im = ImageManager::instance();}
\DoxyCodeLine{00872   \mbox{\hyperlink{class_t_image_cache}{TImageCache}} *ic  = TImageCache::instance();}
\DoxyCodeLine{00873   \textcolor{comment}{// Unbind frames}}
\DoxyCodeLine{00874   FramesSet::iterator ft, fEnd = m\_frames.end();}
\DoxyCodeLine{00875   \textcolor{keywordflow}{for} (ft = m\_frames.begin(); ft != fEnd; ++ft) \{}
\DoxyCodeLine{00876     im-\/>\mbox{\hyperlink{class_image_manager_ab74305fdae38a7704081f7f777d0d80d}{unbind}}(getImageId(*ft, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{Scanned}}));}
\DoxyCodeLine{00877     im-\/>\mbox{\hyperlink{class_image_manager_ab74305fdae38a7704081f7f777d0d80d}{unbind}}(getImageId(*ft, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a48aa37d686efea1d08332d5ffa69548d}{Cleanupped}}));}
\DoxyCodeLine{00878     im-\/>\mbox{\hyperlink{class_image_manager_ab74305fdae38a7704081f7f777d0d80d}{unbind}}(getImageId(*ft, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a9e5aa8f328730d501a912a0e11fe39f0}{CleanupPreview}}));}
\DoxyCodeLine{00879     \textcolor{comment}{// remove icon cache as well}}
\DoxyCodeLine{00880     ic-\/>\mbox{\hyperlink{class_t_image_cache_a57d63227dfe2532b0aed22c47113be66}{remove}}(getIconId(*ft, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a06c6ffb8fd8591fc9c26643daf75d68b}{Normal}}));}
\DoxyCodeLine{00881     ic-\/>\mbox{\hyperlink{class_t_image_cache_a57d63227dfe2532b0aed22c47113be66}{remove}}(getIconId(*ft, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{Scanned}}));}
\DoxyCodeLine{00882     ic-\/>\mbox{\hyperlink{class_t_image_cache_a57d63227dfe2532b0aed22c47113be66}{remove}}(getIconId(*ft, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a9e5aa8f328730d501a912a0e11fe39f0}{CleanupPreview}}));}
\DoxyCodeLine{00883 }
\DoxyCodeLine{00884     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} == PLI\_XSHLEVEL) im-\/>\mbox{\hyperlink{class_image_manager_ab74305fdae38a7704081f7f777d0d80d}{unbind}}(rasterized(getImageId(*ft)));}
\DoxyCodeLine{00885 }
\DoxyCodeLine{00886     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} == OVL\_XSHLEVEL || \mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} == TZI\_XSHLEVEL)}
\DoxyCodeLine{00887       im-\/>\mbox{\hyperlink{class_image_manager_ab74305fdae38a7704081f7f777d0d80d}{unbind}}(filled(getImageId(*ft)));}
\DoxyCodeLine{00888 }
\DoxyCodeLine{00889     \mbox{\hyperlink{textureutils_8h_a7eb8d0c536418e650eecde9e9230a602}{texture\_utils::invalidateTexture}}(\textcolor{keyword}{this}, *ft);}
\DoxyCodeLine{00890   \}}
\DoxyCodeLine{00891 }
\DoxyCodeLine{00892   \textcolor{comment}{// Clear level}}
\DoxyCodeLine{00893   m\_frames.clear();}
\DoxyCodeLine{00894   m\_editableRange.clear();}
\DoxyCodeLine{00895   m\_editableRangeUserInfo.clear();}
\DoxyCodeLine{00896   m\_renumberTable.clear();}
\DoxyCodeLine{00897   m\_framesStatus.clear();}
\DoxyCodeLine{00898 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a09ad625966e5c83579880385054ad43f}\label{class_t_xsh_simple_level_a09ad625966e5c83579880385054ad43f}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!clonePropertiesFrom@{clonePropertiesFrom}}
\index{clonePropertiesFrom@{clonePropertiesFrom}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{clonePropertiesFrom()}{clonePropertiesFrom()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::clone\+Properties\+From (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_xsh_simple_level}{TXsh\+Simple\+Level}} $\ast$}]{old\+Sl }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00411                                                                       \{}
\DoxyCodeLine{00412   m\_properties-\/>setImageDpi(}
\DoxyCodeLine{00413       oldSl-\/>m\_properties}
\DoxyCodeLine{00414           -\/>getImageDpi());  \textcolor{comment}{// Watch out -\/ may change dpi policy!}}
\DoxyCodeLine{00415   m\_properties-\/>setDpi(oldSl-\/>m\_properties-\/>getDpi());}
\DoxyCodeLine{00416   m\_properties-\/>setDpiPolicy(oldSl-\/>m\_properties-\/>getDpiPolicy());}
\DoxyCodeLine{00417   m\_properties-\/>setImageRes(oldSl-\/>m\_properties-\/>getImageRes());}
\DoxyCodeLine{00418   m\_properties-\/>setBpp(oldSl-\/>m\_properties-\/>getBpp());}
\DoxyCodeLine{00419   m\_properties-\/>setSubsampling(oldSl-\/>m\_properties-\/>getSubsampling());}
\DoxyCodeLine{00420 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a821df490f42bb53d419ed4d3c4b97972}\label{class_t_xsh_simple_level_a821df490f42bb53d419ed4d3c4b97972}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!copyFiles@{copyFiles}}
\index{copyFiles@{copyFiles}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{copyFiles()}{copyFiles()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::copy\+Files (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{dst,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{src }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Copy files from src to dst. 


\begin{DoxyCode}{0}
\DoxyCodeLine{02175                                                                           \{}
\DoxyCodeLine{02176   \textcolor{keywordflow}{if} (dst == src) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02177   TSystem::touchParentDir(dst);}
\DoxyCodeLine{02178   TSystem::copyFileOrLevel\_throw(dst, src);}
\DoxyCodeLine{02179   \textcolor{keywordflow}{if} (dst.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tlv"{}}) \{}
\DoxyCodeLine{02180     \textcolor{comment}{// Copio la palette del livello}}
\DoxyCodeLine{02181     \mbox{\hyperlink{class_t_file_path}{TFilePath}} srcPltPath =}
\DoxyCodeLine{02182         src.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() + \mbox{\hyperlink{class_t_file_path}{TFilePath}}(src.getWideName() + L\textcolor{stringliteral}{"{}.tpl"{}});}
\DoxyCodeLine{02183     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(srcPltPath).doesExist())}
\DoxyCodeLine{02184       TSystem::copyFile(}
\DoxyCodeLine{02185           dst.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() + \mbox{\hyperlink{class_t_file_path}{TFilePath}}(dst.getWideName() + L\textcolor{stringliteral}{"{}.tpl"{}}),}
\DoxyCodeLine{02186           srcPltPath, \textcolor{keyword}{true});}
\DoxyCodeLine{02187   \}}
\DoxyCodeLine{02188   \textcolor{keywordflow}{if} (dst.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tzp"{}} || dst.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tzu"{}}) \{}
\DoxyCodeLine{02189     \textcolor{comment}{// Copio la palette del livello}}
\DoxyCodeLine{02190     \mbox{\hyperlink{class_t_file_path}{TFilePath}} srcPltPath =}
\DoxyCodeLine{02191         src.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() + \mbox{\hyperlink{class_t_file_path}{TFilePath}}(src.getWideName() + L\textcolor{stringliteral}{"{}.plt"{}});}
\DoxyCodeLine{02192     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(srcPltPath).doesExist())}
\DoxyCodeLine{02193       TSystem::copyFile(}
\DoxyCodeLine{02194           dst.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() + \mbox{\hyperlink{class_t_file_path}{TFilePath}}(dst.getWideName() + L\textcolor{stringliteral}{"{}.plt"{}}),}
\DoxyCodeLine{02195           srcPltPath, \textcolor{keyword}{true});}
\DoxyCodeLine{02196   \}}
\DoxyCodeLine{02197 }
\DoxyCodeLine{02198   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&srcHookFile = \mbox{\hyperlink{class_t_xsh_simple_level_a543f442eca762915046bf52bccc2b4fc}{TXshSimpleLevel::getExistingHookFile}}(src);}
\DoxyCodeLine{02199   \textcolor{keywordflow}{if} (!srcHookFile.isEmpty()) \{}
\DoxyCodeLine{02200     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&dstHookFile = \mbox{\hyperlink{class_t_xsh_simple_level_a23704b0d8be9290a8ab9c72c3139958b}{getHookPath}}(dst);}
\DoxyCodeLine{02201     TSystem::copyFile(dstHookFile, srcHookFile, \textcolor{keyword}{true});}
\DoxyCodeLine{02202   \}}
\DoxyCodeLine{02203   \mbox{\hyperlink{class_t_file_path}{TFilePath}} files = src.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() + (src.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}() + \textcolor{stringliteral}{"{}\_files"{}});}
\DoxyCodeLine{02204   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(files).doesExist() \&\& \mbox{\hyperlink{class_t_file_status}{TFileStatus}}(files).isDirectory())}
\DoxyCodeLine{02205     TSystem::copyDir(dst.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() + (src.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}() + \textcolor{stringliteral}{"{}\_files"{}}), files);}
\DoxyCodeLine{02206 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l02321}{get\+Existing\+Hook\+File()}}, \mbox{\hyperlink{l02289}{get\+Hook\+Path()}}, \mbox{\hyperlink{l00636}{TFile\+Path\+::get\+Name()}}, \mbox{\hyperlink{l00683}{TFile\+Path\+::get\+Parent\+Dir()}}, and \mbox{\hyperlink{l00225}{TFile\+Path\+::get\+Type()}}.



Referenced by \mbox{\hyperlink{l00209}{Scene\+Level\+::save()}}, and \mbox{\hyperlink{l01468}{save()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a32326317b949489c443457ddd55ce256}\label{class_t_xsh_simple_level_a32326317b949489c443457ddd55ce256}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!createEmptyFrame@{createEmptyFrame}}
\index{createEmptyFrame@{createEmptyFrame}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{createEmptyFrame()}{createEmptyFrame()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} TXsh\+Simple\+Level\+::create\+Empty\+Frame (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



and assigns the specified level path. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01978                                           \{}
\DoxyCodeLine{01979   \textcolor{comment}{// In case this is the first frame to be created in this level (i.e. the level}}
\DoxyCodeLine{01980   \textcolor{comment}{// file was missing when loading resources) initialize the level in the same}}
\DoxyCodeLine{01981   \textcolor{comment}{// manner as createNewLevel() in order to avoid crash. This can be happened if}}
\DoxyCodeLine{01982   \textcolor{comment}{// the level was not saved after creating and being placed in the xsheet.}}
\DoxyCodeLine{01983   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level_a7c256d2745209a181a2dbccdec949c5e}{isEmpty}}()) \{}
\DoxyCodeLine{01984     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}()) initializePalette();}
\DoxyCodeLine{01985     initializeResolutionAndDpi();}
\DoxyCodeLine{01986   \}}
\DoxyCodeLine{01987 }
\DoxyCodeLine{01988   \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} result;}
\DoxyCodeLine{01989 }
\DoxyCodeLine{01990   \textcolor{keywordflow}{switch} (\mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}}) \{}
\DoxyCodeLine{01991   \textcolor{keywordflow}{case} PLI\_XSHLEVEL:}
\DoxyCodeLine{01992     result = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_vector_image}{TVectorImage}};}
\DoxyCodeLine{01993     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01994 }
\DoxyCodeLine{01995   \textcolor{keywordflow}{case} MESH\_XSHLEVEL:}
\DoxyCodeLine{01996     assert(\textcolor{keyword}{false});  \textcolor{comment}{// Not implemented yet}}
\DoxyCodeLine{01997     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01998 }
\DoxyCodeLine{01999   \textcolor{keywordflow}{default}: \{}
\DoxyCodeLine{02000     \textcolor{comment}{// normally the image must have the level-\/>getProperties()-\/>getImageDpi().}}
\DoxyCodeLine{02001     \textcolor{comment}{// if this value is missing (for some reason -\/ can this happen, ever?) then}}
\DoxyCodeLine{02002     \textcolor{comment}{// we use the getDpi() (that is the current dpi, e.g. cameraDpi or}}
\DoxyCodeLine{02003     \textcolor{comment}{// customDpi).}}
\DoxyCodeLine{02004 }
\DoxyCodeLine{02005     \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi = \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a3daf3c70b445a320ba10e16331c6bedc}{getImageDpi}}();}
\DoxyCodeLine{02006     \textcolor{comment}{/*-\/-\/}}
\DoxyCodeLine{02007 \textcolor{comment}{    tgaからtlvにconvertしたものをInsert Pasteしたとき、}}
\DoxyCodeLine{02008 \textcolor{comment}{    ペーストしたフレームにのみDPIが付いてしまうので、この処理は省く}}
\DoxyCodeLine{02009 \textcolor{comment}{    -\/-\/*/}}
\DoxyCodeLine{02010     \textcolor{comment}{// if(dpi.x==0.0 || dpi.y==0.0)}}
\DoxyCodeLine{02011     \textcolor{comment}{//  dpi = getProperties()-\/>getDpi();}}
\DoxyCodeLine{02012 }
\DoxyCodeLine{02013     \mbox{\hyperlink{class_t_dimension_t}{TDimension}} res = \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_adac2b8c3ed147184fc78799cd65ca8f9}{getImageRes}}();}
\DoxyCodeLine{02014 }
\DoxyCodeLine{02015     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} == TZP\_XSHLEVEL) \{}
\DoxyCodeLine{02016       \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} raster(res);}
\DoxyCodeLine{02017       raster-\/>fill(\mbox{\hyperlink{class_t_pixel_c_m32}{TPixelCM32}}());}
\DoxyCodeLine{02018       \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti(raster, \mbox{\hyperlink{class_t_rect_t}{TRect}}());}
\DoxyCodeLine{02019       ti-\/>setDpi(dpi.x, dpi.y);}
\DoxyCodeLine{02020       ti-\/>setSavebox(\mbox{\hyperlink{class_t_rect_t}{TRect}}(0, 0, res.lx -\/ 1, res.ly -\/ 1));}
\DoxyCodeLine{02021 }
\DoxyCodeLine{02022       result = ti;}
\DoxyCodeLine{02023     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02024       \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} raster(res);}
\DoxyCodeLine{02025       raster-\/>fill(TPixel32(0, 0, 0, 0));}
\DoxyCodeLine{02026       \mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} ri(raster);}
\DoxyCodeLine{02027       ri-\/>setDpi(dpi.x, dpi.y);}
\DoxyCodeLine{02028 }
\DoxyCodeLine{02029       result = ri;}
\DoxyCodeLine{02030     \}}
\DoxyCodeLine{02031 }
\DoxyCodeLine{02032     \textcolor{keywordflow}{break};}
\DoxyCodeLine{02033   \}}
\DoxyCodeLine{02034   \}}
\DoxyCodeLine{02035 }
\DoxyCodeLine{02036   \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{02037 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00102}{Level\+Properties\+::get\+Image\+Dpi()}}, \mbox{\hyperlink{l00090}{Level\+Properties\+::get\+Image\+Res()}}, \mbox{\hyperlink{l00424}{get\+Palette()}}, \mbox{\hyperlink{l00109}{get\+Properties()}}, \mbox{\hyperlink{l00147}{is\+Empty()}}, and \mbox{\hyperlink{l00059}{TXsh\+Level\+::m\+\_\+type}}.



Referenced by \mbox{\hyperlink{l00294}{TTool\+::touch\+Image()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_ada690578191ecbafe178673f204b98ce}\label{class_t_xsh_simple_level_ada690578191ecbafe178673f204b98ce}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!eraseFrame@{eraseFrame}}
\index{eraseFrame@{eraseFrame}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{eraseFrame()}{eraseFrame()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::erase\+Frame (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00832                                                     \{}
\DoxyCodeLine{00833   FramesSet::iterator ft = m\_frames.find(fid);}
\DoxyCodeLine{00834   \textcolor{keywordflow}{if} (ft == m\_frames.end()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00835 }
\DoxyCodeLine{00836   \textcolor{comment}{// Erase the corresponding entry in the renumber table}}
\DoxyCodeLine{00837   std::map<TFrameId, TFrameId>::iterator rt, rEnd(m\_renumberTable.end());}
\DoxyCodeLine{00838   \textcolor{keywordflow}{for} (rt = m\_renumberTable.begin(); rt != rEnd; ++rt) \{}
\DoxyCodeLine{00839     \textcolor{keywordflow}{if} (rt-\/>second == fid) \{}
\DoxyCodeLine{00840       m\_renumberTable.erase(rt-\/>first);}
\DoxyCodeLine{00841       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00842     \}}
\DoxyCodeLine{00843   \}}
\DoxyCodeLine{00844 }
\DoxyCodeLine{00845   m\_frames.erase(ft);}
\DoxyCodeLine{00846   \mbox{\hyperlink{class_t_xsh_level_a6e1f2998c39699adbe9133f87109a104}{getHookSet}}()-\/>eraseFrame(fid);}
\DoxyCodeLine{00847 }
\DoxyCodeLine{00848   \mbox{\hyperlink{class_image_manager}{ImageManager}} *im = ImageManager::instance();}
\DoxyCodeLine{00849   \mbox{\hyperlink{class_t_image_cache}{TImageCache}} *ic  = TImageCache::instance();}
\DoxyCodeLine{00850   \{}
\DoxyCodeLine{00851     im-\/>\mbox{\hyperlink{class_image_manager_ab74305fdae38a7704081f7f777d0d80d}{unbind}}(getImageId(fid, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a06c6ffb8fd8591fc9c26643daf75d68b}{Normal}}));}
\DoxyCodeLine{00852     im-\/>\mbox{\hyperlink{class_image_manager_ab74305fdae38a7704081f7f777d0d80d}{unbind}}(getImageId(fid, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{Scanned}}));}
\DoxyCodeLine{00853     im-\/>\mbox{\hyperlink{class_image_manager_ab74305fdae38a7704081f7f777d0d80d}{unbind}}(getImageId(fid, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a9e5aa8f328730d501a912a0e11fe39f0}{CleanupPreview}}));}
\DoxyCodeLine{00854     \textcolor{comment}{// remove icon cache as well}}
\DoxyCodeLine{00855     ic-\/>\mbox{\hyperlink{class_t_image_cache_a57d63227dfe2532b0aed22c47113be66}{remove}}(getIconId(fid, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a06c6ffb8fd8591fc9c26643daf75d68b}{Normal}}));}
\DoxyCodeLine{00856     ic-\/>\mbox{\hyperlink{class_t_image_cache_a57d63227dfe2532b0aed22c47113be66}{remove}}(getIconId(fid, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{Scanned}}));}
\DoxyCodeLine{00857     ic-\/>\mbox{\hyperlink{class_t_image_cache_a57d63227dfe2532b0aed22c47113be66}{remove}}(getIconId(fid, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a9e5aa8f328730d501a912a0e11fe39f0}{CleanupPreview}}));}
\DoxyCodeLine{00858 }
\DoxyCodeLine{00859     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} == PLI\_XSHLEVEL) im-\/>\mbox{\hyperlink{class_image_manager_ab74305fdae38a7704081f7f777d0d80d}{unbind}}(rasterized(getImageId(fid)));}
\DoxyCodeLine{00860 }
\DoxyCodeLine{00861     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} == OVL\_XSHLEVEL || \mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} == TZI\_XSHLEVEL)}
\DoxyCodeLine{00862       im-\/>\mbox{\hyperlink{class_image_manager_ab74305fdae38a7704081f7f777d0d80d}{unbind}}(filled(getImageId(fid)));}
\DoxyCodeLine{00863 }
\DoxyCodeLine{00864     \mbox{\hyperlink{textureutils_8h_a7eb8d0c536418e650eecde9e9230a602}{texture\_utils::invalidateTexture}}(\textcolor{keyword}{this}, fid);}
\DoxyCodeLine{00865   \}}
\DoxyCodeLine{00866 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_ad3ec4942dc183f5245afa9c51b22c7f6}\label{class_t_xsh_simple_level_ad3ec4942dc183f5245afa9c51b22c7f6}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!fid2index@{fid2index}}
\index{fid2index@{fid2index}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{fid2index()}{fid2index()}}
{\footnotesize\ttfamily int TXsh\+Simple\+Level\+::fid2index (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid }\end{DoxyParamCaption}) const}



an invalid frame otherwise. 

Returns the frame {\itshape index} corresponding to the specified 
\begin{DoxyCode}{0}
\DoxyCodeLine{00515                                                         \{}
\DoxyCodeLine{00516   FramesSet::const\_iterator ft = m\_frames.find(fid);}
\DoxyCodeLine{00517   \textcolor{keywordflow}{return} (ft != m\_frames.end()) ? std::distance(m\_frames.begin(), ft)}
\DoxyCodeLine{00518                                 :  \textcolor{comment}{// Note: flat\_set has random access}}
\DoxyCodeLine{00519              -\/1;                   \textcolor{comment}{// iterators, so this is FAST}}
\DoxyCodeLine{00520 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a1629d7fbc5e0c41ebc1a40f9f70d40d5}\label{class_t_xsh_simple_level_a1629d7fbc5e0c41ebc1a40f9f70d40d5}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getBBox@{getBBox}}
\index{getBBox@{getBBox}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getBBox()}{getBBox()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRectD}} TXsh\+Simple\+Level\+::get\+BBox (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid }\end{DoxyParamCaption}) const}



Returns the bbox for the level\textquotesingle{}s fid, specified in standard {\itshape inch} coordinates (which are {\itshape different} from Toonz\textquotesingle{}s standard world coordinates, by a {\ttfamily \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage\+::inch}}} factor). ~\newline
 


\begin{DoxyCode}{0}
\DoxyCodeLine{02360                                                          \{}
\DoxyCodeLine{02361   \mbox{\hyperlink{class_t_rect_t}{TRectD}} bbox;}
\DoxyCodeLine{02362   \textcolor{keywordtype}{double} dpiX = \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}}, dpiY = dpiX;}
\DoxyCodeLine{02363 }
\DoxyCodeLine{02364   \textcolor{comment}{// Get the frame bbox in image coordinates}}
\DoxyCodeLine{02365   \textcolor{keywordflow}{switch} (\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}()) \{}
\DoxyCodeLine{02366   \textcolor{keywordflow}{case} PLI\_XSHLEVEL:}
\DoxyCodeLine{02367   \textcolor{keywordflow}{case} MESH\_XSHLEVEL: \{}
\DoxyCodeLine{02368     \textcolor{comment}{// Load the image and extract its bbox forcibly}}
\DoxyCodeLine{02369     \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img = getFrame(fid, \textcolor{keyword}{false});}
\DoxyCodeLine{02370     \textcolor{keywordflow}{if} (!img) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{02371 }
\DoxyCodeLine{02372     bbox = img-\/>\mbox{\hyperlink{class_t_image_ac6a21b84486dec0c86b5b0b3f34be0ef}{getBBox}}();}
\DoxyCodeLine{02373 }
\DoxyCodeLine{02374     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_mesh_image_p}{TMeshImageP}} mi = img) mi-\/>getDpi(dpiX, dpiY);}
\DoxyCodeLine{02375 }
\DoxyCodeLine{02376     \textcolor{keywordflow}{break};}
\DoxyCodeLine{02377   \}}
\DoxyCodeLine{02378 }
\DoxyCodeLine{02379   \textcolor{keywordflow}{default}: \{}
\DoxyCodeLine{02380     \textcolor{comment}{// Raster case: retrieve the image info from the ImageManager}}
\DoxyCodeLine{02381     \textcolor{keyword}{const} std::string \&imageId = getImageId(fid);}
\DoxyCodeLine{02382 }
\DoxyCodeLine{02383     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_image_info}{TImageInfo}} *info =}
\DoxyCodeLine{02384         ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a44231d6948d69f54e9a4315049131086}{getInfo}}(imageId, ImageManager::none, 0);}
\DoxyCodeLine{02385     \textcolor{keywordflow}{if} (!info) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{02386 }
\DoxyCodeLine{02387     bbox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}(\mbox{\hyperlink{class_t_point_t}{TPointD}}(info-\/>m\_x0, info-\/>m\_y0),}
\DoxyCodeLine{02388                   \mbox{\hyperlink{class_t_point_t}{TPointD}}(info-\/>m\_x1, info-\/>m\_y1)) -\/}
\DoxyCodeLine{02389            0.5 * \mbox{\hyperlink{class_t_point_t}{TPointD}}(info-\/>m\_lx, info-\/>m\_ly);}
\DoxyCodeLine{02390 }
\DoxyCodeLine{02391     \textcolor{keywordflow}{if} (info-\/>m\_dpix > 0.0 \&\& info-\/>m\_dpiy > 0.0)}
\DoxyCodeLine{02392       dpiX = info-\/>m\_dpix, dpiY = info-\/>m\_dpiy;}
\DoxyCodeLine{02393 }
\DoxyCodeLine{02394     \textcolor{keywordflow}{break};}
\DoxyCodeLine{02395   \}}
\DoxyCodeLine{02396   \}}
\DoxyCodeLine{02397 }
\DoxyCodeLine{02398   \textcolor{comment}{// Get the frame's dpi and traduce the bbox to inch coordinates}}
\DoxyCodeLine{02399   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_scale}{TScale}}(1.0 / dpiX, 1.0 / dpiY) * bbox;}
\DoxyCodeLine{02400 \}}

\end{DoxyCode}


References \mbox{\hyperlink{class_t_image_ac6a21b84486dec0c86b5b0b3f34be0ef}{TImage\+::get\+BBox()}}, \mbox{\hyperlink{l00278}{Image\+Manager\+::get\+Info()}}, \mbox{\hyperlink{l00081}{TXsh\+Level\+::get\+Type()}}, and \mbox{\hyperlink{l00037}{Stage\+::inch}}.



Referenced by \mbox{\hyperlink{l01627}{TXsheet\+::get\+BBox()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_ae409bd3bb5c7d5f796555c6396fc449a}\label{class_t_xsh_simple_level_ae409bd3bb5c7d5f796555c6396fc449a}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getContentHistory@{getContentHistory}}
\index{getContentHistory@{getContentHistory}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getContentHistory()}{getContentHistory()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_content_history}{TContent\+History}} $\ast$ TXsh\+Simple\+Level\+::get\+Content\+History (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00294 \{ \textcolor{keywordflow}{return} m\_contentHistory.get(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a2fe15ee3d60e1f5f5c38d6ba75d36812}\label{class_t_xsh_simple_level_a2fe15ee3d60e1f5f5c38d6ba75d36812}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getContentHistory@{getContentHistory}}
\index{getContentHistory@{getContentHistory}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getContentHistory()}{getContentHistory()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_content_history}{TContent\+History}} $\ast$ TXsh\+Simple\+Level\+::get\+Content\+History (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



note gets the content\+History. can be 0 


\begin{DoxyCode}{0}
\DoxyCodeLine{00291                                                    \{}
\DoxyCodeLine{00292     \textcolor{keywordflow}{return} m\_contentHistory.get();}
\DoxyCodeLine{00293   \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00269}{Level\+Updater\+::open()}}, and \mbox{\hyperlink{l00330}{touch\+Frame()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a93b2da3076b24d08ccf636df578b70e5}\label{class_t_xsh_simple_level_a93b2da3076b24d08ccf636df578b70e5}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getDirtyFlag@{getDirtyFlag}}
\index{getDirtyFlag@{getDirtyFlag}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getDirtyFlag()}{getDirtyFlag()}}
{\footnotesize\ttfamily bool TXsh\+Simple\+Level\+::get\+Dirty\+Flag (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00324                                          \{}
\DoxyCodeLine{00325   \textcolor{keywordflow}{return} m\_properties-\/>getDirtyFlag();}
\DoxyCodeLine{00326 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a5ec6eb953e3175d60b41f7b8d7694a0f}\label{class_t_xsh_simple_level_a5ec6eb953e3175d60b41f7b8d7694a0f}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getDpi@{getDpi}}
\index{getDpi@{getDpi}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getDpi()}{getDpi()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} TXsh\+Simple\+Level\+::get\+Dpi (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid = {\ttfamily TFrameId\+:\+:NO\+\_\+FRAME},  }\item[{int}]{frame\+Status = {\ttfamily -\/1} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02080                                                                     \{}
\DoxyCodeLine{02081   \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi;}
\DoxyCodeLine{02082   \textcolor{keywordflow}{if} (m\_properties-\/>getDpiPolicy() == LevelProperties::DP\_ImageDpi)}
\DoxyCodeLine{02083     dpi = getImageDpi(fid, frameStatus);}
\DoxyCodeLine{02084   \textcolor{keywordflow}{else}}
\DoxyCodeLine{02085     dpi = m\_properties-\/>getDpi();}
\DoxyCodeLine{02086   \textcolor{keywordflow}{return} dpi;}
\DoxyCodeLine{02087 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a8e3b0b2db2063e9537dd860ffe28a774}\label{class_t_xsh_simple_level_a8e3b0b2db2063e9537dd860ffe28a774}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getEditableFileName@{getEditableFileName}}
\index{getEditableFileName@{getEditableFileName}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getEditableFileName()}{getEditableFileName()}}
{\footnotesize\ttfamily std\+::wstring TXsh\+Simple\+Level\+::get\+Editable\+File\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00289                                                 \{}
\DoxyCodeLine{00290 \textcolor{preprocessor}{\#ifdef MACOSX}}
\DoxyCodeLine{00291   std::wstring fileName = L\textcolor{stringliteral}{"{}."{}} + m\_path.getWideName();}
\DoxyCodeLine{00292 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00293   std::wstring fileName = m\_path.getWideName();}
\DoxyCodeLine{00294 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00295   fileName += L\textcolor{stringliteral}{"{}\_"{}} + m\_editableRangeUserInfo;}
\DoxyCodeLine{00296   \textcolor{keywordtype}{int} from, to;}
\DoxyCodeLine{00297   getIndexesRangefromFids(\textcolor{keyword}{this}, m\_editableRange, from, to);}
\DoxyCodeLine{00298   \textcolor{keywordflow}{if} (from == -\/1 \&\& to == -\/1) \textcolor{keywordflow}{return} L\textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00299   fileName += L\textcolor{stringliteral}{"{}\_"{}} + std::to\_wstring(from + 1) + L\textcolor{stringliteral}{"{}-\/"{}} + std::to\_wstring(to + 1);}
\DoxyCodeLine{00300   \textcolor{keywordflow}{return} fileName;}
\DoxyCodeLine{00301 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_adadcf84e1ef7d94aa0bc4410f52332ef}\label{class_t_xsh_simple_level_adadcf84e1ef7d94aa0bc4410f52332ef}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getEditableRange@{getEditableRange}}
\index{getEditableRange@{getEditableRange}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getEditableRange()}{getEditableRange()}}
{\footnotesize\ttfamily std\+::set$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ TXsh\+Simple\+Level\+::get\+Editable\+Range (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Returns the set of editable frames. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00305                                                    \{}
\DoxyCodeLine{00306   \textcolor{keywordflow}{return} m\_editableRange;}
\DoxyCodeLine{00307 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a543f442eca762915046bf52bccc2b4fc}\label{class_t_xsh_simple_level_a543f442eca762915046bf52bccc2b4fc}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getExistingHookFile@{getExistingHookFile}}
\index{getExistingHookFile@{getExistingHookFile}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getExistingHookFile()}{getExistingHookFile()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} TXsh\+Simple\+Level\+::get\+Existing\+Hook\+File (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{decoded\+Level\+Path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Returns the path of the newest {\itshape existing} hook file associated to the specified {\bfseries{decoded}} level path -\/ or an empty path if none was found. 

\begin{DoxyNote}{Note}
In case there are more than one hook file (ie files from older Toonz version), the latest file version is used. 
\end{DoxyNote}

\begin{DoxyCode}{0}
\DoxyCodeLine{02322                                        \{}
\DoxyCodeLine{02323   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} pCount              = 3;}
\DoxyCodeLine{02324   \textcolor{keyword}{static} \textcolor{keyword}{const} QRegExp pattern[pCount] = \{}
\DoxyCodeLine{02325       \textcolor{comment}{// Prioritized in this order}}
\DoxyCodeLine{02326       QRegExp(\textcolor{stringliteral}{"{}.*\(\backslash\)\(\backslash\).\(\backslash\)\(\backslash\).?.+\(\backslash\)\(\backslash\).xml\$"{}}),  \textcolor{comment}{// whatever.(.)ext.xml}}
\DoxyCodeLine{02327       QRegExp(\textcolor{stringliteral}{"{}.*\(\backslash\)\(\backslash\).xml\$"{}}),           \textcolor{comment}{// whatever.xml}}
\DoxyCodeLine{02328       QRegExp(\textcolor{stringliteral}{"{}.*\(\backslash\)\(\backslash\).\(\backslash\)\(\backslash\).?xml\$"{}})        \textcolor{comment}{// whatever.(.)xml}}
\DoxyCodeLine{02329   \};}
\DoxyCodeLine{02330 }
\DoxyCodeLine{02331   \textcolor{keyword}{struct }locals \{}
\DoxyCodeLine{02332     \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{int} getPattern(\textcolor{keyword}{const} QString \&fp) \{}
\DoxyCodeLine{02333       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} p = 0; p != pCount; ++p)}
\DoxyCodeLine{02334         \textcolor{keywordflow}{if} (pattern[p].exactMatch(fp)) \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{02335       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{02336     \}}
\DoxyCodeLine{02337   \};  \textcolor{comment}{// locals}}
\DoxyCodeLine{02338 }
\DoxyCodeLine{02339   \textcolor{keyword}{const} QStringList \&hookFiles = \mbox{\hyperlink{class_t_xsh_simple_level_a6dc5e2310d937b00491db968372077dd}{getHookFiles}}(decodedLevelPath);}
\DoxyCodeLine{02340   \textcolor{keywordflow}{if} (hookFiles.empty()) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_file_path}{TFilePath}}();}
\DoxyCodeLine{02341 }
\DoxyCodeLine{02342   \textcolor{comment}{// Return the hook file with the most recent (smallest) identified}}
\DoxyCodeLine{02343   \textcolor{comment}{// regexp pattern}}
\DoxyCodeLine{02344   \textcolor{keywordtype}{int} fPattern, p = pCount, h = -\/1;}
\DoxyCodeLine{02345 }
\DoxyCodeLine{02346   \textcolor{keywordtype}{int} f, fCount = hookFiles.size();}
\DoxyCodeLine{02347   \textcolor{keywordflow}{for} (f = 0; f != fCount; ++f) \{}
\DoxyCodeLine{02348     fPattern = locals::getPattern(hookFiles[f]);}
\DoxyCodeLine{02349     \textcolor{keywordflow}{if} (fPattern < p) p = fPattern, h = f;}
\DoxyCodeLine{02350   \}}
\DoxyCodeLine{02351 }
\DoxyCodeLine{02352   assert(h >= 0);}
\DoxyCodeLine{02353   \textcolor{keywordflow}{return} (h < 0) ? \mbox{\hyperlink{class_t_file_path}{TFilePath}}()}
\DoxyCodeLine{02354                  : decodedLevelPath.getParentDir() +}
\DoxyCodeLine{02355                        \mbox{\hyperlink{class_t_file_path}{TFilePath}}(hookFiles[h].toStdWString());}
\DoxyCodeLine{02356 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l02304}{get\+Hook\+Files()}}, and \mbox{\hyperlink{l00683}{TFile\+Path\+::get\+Parent\+Dir()}}.



Referenced by \mbox{\hyperlink{l02175}{copy\+Files()}}, \mbox{\hyperlink{l02252}{get\+Files()}}, \mbox{\hyperlink{l01083}{load()}}, and \mbox{\hyperlink{l02210}{rename\+Files()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}\label{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getFids@{getFids}}
\index{getFids@{getFids}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getFids()}{getFids()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily std\+::vector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ TXsh\+Simple\+Level\+::get\+Fids (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Returns a copy of the level\textquotesingle{}s frame ids. 

Each level frame have a corresponding image retrievable with the get\+Frame() method and similar.

\begin{DoxyRemark}{Remarks}
Consider using functions \mbox{\hyperlink{class_t_xsh_simple_level_a3fe127306d6669a3eb9e9d8802660d7b}{get\+Frame\+Count()}} and \mbox{\hyperlink{class_t_xsh_simple_level_abb72e2ab0c1baeda0a8af3146003181d}{get\+Frame\+Id()}} to avoid a container copy. ~\newline
 
\end{DoxyRemark}

\begin{DoxyCode}{0}
\DoxyCodeLine{00448                                                    \{}
\DoxyCodeLine{00449   \textcolor{keywordflow}{return} std::vector<TFrameId>(m\_frames.begin(), m\_frames.end());}
\DoxyCodeLine{00450 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00914}{Vectorizer\+Popup\+::apply()}}, \mbox{\hyperlink{l02076}{Replace\+Parent\+Directory\+Popup\+::execute()}}, \mbox{\hyperlink{l00245}{RGBPicker\+Tool\+::on\+Image\+Changed()}}, \mbox{\hyperlink{l00269}{Level\+Updater\+::open()}}, \mbox{\hyperlink{l02091}{renumber()}}, \mbox{\hyperlink{l00294}{TTool\+::touch\+Image()}}, and \mbox{\hyperlink{l00636}{Drag\+Selection\+Tool\+::\+Vector\+Deform\+Tool\+::transform\+Whole\+Level()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a4c261e511a4288929f1efdf18ee96957}\label{class_t_xsh_simple_level_a4c261e511a4288929f1efdf18ee96957}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getFids@{getFids}}
\index{getFids@{getFids}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getFids()}{getFids()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::get\+Fids (\begin{DoxyParamCaption}\item[{std\+::vector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \&}]{fids }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Copies fids() into fids. \begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{deprecated__deprecated000014}{Deprecated}}]Use \end{DoxyRefDesc}


Reimplemented from \mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00442                                                              \{}
\DoxyCodeLine{00443   fids.assign(m\_frames.begin(), m\_frames.end());}
\DoxyCodeLine{00444 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_aa3761996a872dfbfd19d13b63ad336f6}\label{class_t_xsh_simple_level_aa3761996a872dfbfd19d13b63ad336f6}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getFiles@{getFiles}}
\index{getFiles@{getFiles}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getFiles()}{getFiles()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::get\+Files (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp,  }\item[{TFile\+Path\+Set \&}]{fpset }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Get the auxiliary files list\+: hooks, tpl, etc. 


\begin{DoxyCode}{0}
\DoxyCodeLine{02252                                                                        \{}
\DoxyCodeLine{02253   \textcolor{keywordflow}{if} (fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tlv"{}}) \{}
\DoxyCodeLine{02254     \mbox{\hyperlink{class_t_file_path}{TFilePath}} tpl = fp.\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(\textcolor{stringliteral}{"{}tpl"{}});}
\DoxyCodeLine{02255     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(tpl).doesExist()) fpset.push\_back(tpl);}
\DoxyCodeLine{02256   \}}
\DoxyCodeLine{02257 }
\DoxyCodeLine{02258   \textcolor{comment}{// Store the hooks file if any (NOTE: there could be more than one hooks}}
\DoxyCodeLine{02259   \textcolor{comment}{// file. I'm retaining the behavior I've seen, but was this really intended?}}
\DoxyCodeLine{02260   \textcolor{comment}{// Shouldn't we return ALL the hooks files?)}}
\DoxyCodeLine{02261   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&hookFile = \mbox{\hyperlink{class_t_xsh_simple_level_a543f442eca762915046bf52bccc2b4fc}{getExistingHookFile}}(fp);}
\DoxyCodeLine{02262   \textcolor{keywordflow}{if} (!hookFile.isEmpty()) fpset.push\_back(hookFile);}
\DoxyCodeLine{02263 }
\DoxyCodeLine{02264   \textcolor{comment}{// Needed for TAB Manga \& Kids and not used in Toonz}}
\DoxyCodeLine{02265 }
\DoxyCodeLine{02266   \textcolor{comment}{// TFilePath files = fp.getParentDir() + (fp.getName() + "{}\_files"{});}}
\DoxyCodeLine{02267   \textcolor{comment}{// if(TFileStatus(files).doesExist() \&\& TFileStatus(files).isDirectory())}}
\DoxyCodeLine{02268   \textcolor{comment}{//  TSystem::rmDirTree(files);}}
\DoxyCodeLine{02269 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l02321}{get\+Existing\+Hook\+File()}}, \mbox{\hyperlink{l00225}{TFile\+Path\+::get\+Type()}}, and \mbox{\hyperlink{l00774}{TFile\+Path\+::with\+Type()}}.



Referenced by \mbox{\hyperlink{l01468}{save()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a18862340ce6e813778b40a7913b13252}\label{class_t_xsh_simple_level_a18862340ce6e813778b40a7913b13252}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getFirstFid@{getFirstFid}}
\index{getFirstFid@{getFirstFid}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getFirstFid()}{getFirstFid()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} TXsh\+Simple\+Level\+::get\+First\+Fid (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

the return valued variation instead. Returns the first level frame\textquotesingle{}s id; roughly equivalent to {\ttfamily index2fid(0)}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00466                                             \{}
\DoxyCodeLine{00467   \textcolor{keywordflow}{return} !\mbox{\hyperlink{class_t_xsh_simple_level_a7c256d2745209a181a2dbccdec949c5e}{isEmpty}}() ? *m\_frames.begin() : \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(TFrameId::NO\_FRAME);}
\DoxyCodeLine{00468 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00147}{is\+Empty()}}.



Referenced by \mbox{\hyperlink{l01083}{load()}}, and \mbox{\hyperlink{l01610}{Filmstrip\+::update\+Choose\+Level\+Combo\+Items()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_ad0282348e0f1617baeafa246b38f3f21}\label{class_t_xsh_simple_level_ad0282348e0f1617baeafa246b38f3f21}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getFrame@{getFrame}}
\index{getFrame@{getFrame}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getFrame()}{getFrame()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} TXsh\+Simple\+Level\+::get\+Frame (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid,  }\item[{bool}]{to\+Be\+Modified }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00192                                                                  \{}
\DoxyCodeLine{00193     \textcolor{keywordflow}{return} getFrame(}
\DoxyCodeLine{00194         fid, toBeModified ? ImageManager::toBeModified : ImageManager::none, 0);}
\DoxyCodeLine{00195   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a0d991e6bf3349bd5daa09a164a47bddc}\label{class_t_xsh_simple_level_a0d991e6bf3349bd5daa09a164a47bddc}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getFrame@{getFrame}}
\index{getFrame@{getFrame}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getFrame()}{getFrame()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} TXsh\+Simple\+Level\+::get\+Frame (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid,  }\item[{UCHAR}]{img\+Manager\+Params\+Mask,  }\item[{int}]{subsampling }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00565                                                          \{}
\DoxyCodeLine{00566   assert(\mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} != UNKNOWN\_XSHLEVEL);}
\DoxyCodeLine{00567 }
\DoxyCodeLine{00568   \textcolor{comment}{// If the required frame is not in range, quit}}
\DoxyCodeLine{00569   \textcolor{keywordflow}{if} (m\_frames.count(fid) == 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}();}
\DoxyCodeLine{00570 }
\DoxyCodeLine{00571   \textcolor{keyword}{const} std::string \&imgId = getImageId(fid);}
\DoxyCodeLine{00572 }
\DoxyCodeLine{00573   \mbox{\hyperlink{struct_image_loader_1_1_build_ext_data}{ImageLoader::BuildExtData}} extData(\textcolor{keyword}{this}, fid, subsampling);}
\DoxyCodeLine{00574   \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img = ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a534298d4e7278e9e42764965e2389576}{getImage}}(imgId, imFlags, \&extData);}
\DoxyCodeLine{00575 }
\DoxyCodeLine{00576   \textcolor{keywordflow}{if} (imFlags \& ImageManager::toBeModified) \{}
\DoxyCodeLine{00577     \textcolor{comment}{// The image will be modified. Perform any related invalidation.}}
\DoxyCodeLine{00578     \mbox{\hyperlink{textureutils_8h_a7eb8d0c536418e650eecde9e9230a602}{texture\_utils::invalidateTexture}}(}
\DoxyCodeLine{00579         \textcolor{keyword}{this}, fid);  \textcolor{comment}{// We must rebuild associated textures}}
\DoxyCodeLine{00580   \}}
\DoxyCodeLine{00581 }
\DoxyCodeLine{00582   \textcolor{keywordflow}{return} img;}
\DoxyCodeLine{00583 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a3fe127306d6669a3eb9e9d8802660d7b}\label{class_t_xsh_simple_level_a3fe127306d6669a3eb9e9d8802660d7b}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getFrameCount@{getFrameCount}}
\index{getFrameCount@{getFrameCount}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getFrameCount()}{getFrameCount()}}
{\footnotesize\ttfamily int TXsh\+Simple\+Level\+::get\+Frame\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Returns the level\textquotesingle{}s frames count. 



Reimplemented from \mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}}.



Referenced by \mbox{\hyperlink{l00413}{Io\+Cmd\+::export\+Level()}}, \mbox{\hyperlink{l00997}{Flip\+Book\+::\+Level\+::get\+Indexes\+Count()}}, \mbox{\hyperlink{l00148}{texture\+\_\+utils\+::invalidate\+Textures()}}, \mbox{\hyperlink{l00211}{set\+Editable\+Range()}}, \mbox{\hyperlink{l01024}{Flip\+Book\+::set\+Level()}}, \mbox{\hyperlink{l00242}{Vectorizer\+::set\+Level()}}, and \mbox{\hyperlink{l00294}{TTool\+::touch\+Image()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a28197dd6d50d8b16b8530febce6bce0b}\label{class_t_xsh_simple_level_a28197dd6d50d8b16b8530febce6bce0b}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getFrameIcon@{getFrameIcon}}
\index{getFrameIcon@{getFrameIcon}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getFrameIcon()}{getFrameIcon()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} TXsh\+Simple\+Level\+::get\+Frame\+Icon (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00604                                                                \{}
\DoxyCodeLine{00605   assert(\mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} != UNKNOWN\_XSHLEVEL);}
\DoxyCodeLine{00606 }
\DoxyCodeLine{00607   \textcolor{keywordflow}{if} (m\_frames.count(fid) == 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}();}
\DoxyCodeLine{00608 }
\DoxyCodeLine{00609   \textcolor{comment}{// NOTE: Icons caching is DISABLED at this stage. It is now responsibility of}}
\DoxyCodeLine{00610   \textcolor{comment}{// ToonzQt's IconGenerator class.}}
\DoxyCodeLine{00611 }
\DoxyCodeLine{00612   \mbox{\hyperlink{struct_image_loader_1_1_build_ext_data}{ImageLoader::BuildExtData}} extData(\textcolor{keyword}{this}, fid);}
\DoxyCodeLine{00613   extData.m\_subs = 1, extData.m\_icon = \textcolor{keyword}{true};}
\DoxyCodeLine{00614 }
\DoxyCodeLine{00615   \textcolor{keyword}{const} std::string \&imgId = getImageId(fid);}
\DoxyCodeLine{00616   \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img              = ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a534298d4e7278e9e42764965e2389576}{getImage}}(}
\DoxyCodeLine{00617       imgId, ImageManager::dontPutInCache, \&extData);}
\DoxyCodeLine{00618 }
\DoxyCodeLine{00619   \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} timg = (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}})img;}
\DoxyCodeLine{00620   \textcolor{keywordflow}{if} (timg \&\& m\_palette) timg-\/>setPalette(m\_palette);}
\DoxyCodeLine{00621 }
\DoxyCodeLine{00622   \textcolor{keywordflow}{return} img;}
\DoxyCodeLine{00623 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_abb72e2ab0c1baeda0a8af3146003181d}\label{class_t_xsh_simple_level_abb72e2ab0c1baeda0a8af3146003181d}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getFrameId@{getFrameId}}
\index{getFrameId@{getFrameId}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getFrameId()}{getFrameId()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \& TXsh\+Simple\+Level\+::get\+Frame\+Id (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const}



Returns the frame id at specified index. 

Unlike function \mbox{\hyperlink{class_t_xsh_simple_level_a07279a40ffad2c6ccc597c0a418f78fb}{index2fid()}}, \mbox{\hyperlink{class_t_xsh_simple_level_abb72e2ab0c1baeda0a8af3146003181d}{get\+Frame\+Id()}} {\itshape asserts} beyond current frames count. ~\newline
 
\begin{DoxyCode}{0}
\DoxyCodeLine{00460                                                            \{}
\DoxyCodeLine{00461   \textcolor{keywordflow}{return} *(m\_frames.begin() += index);}
\DoxyCodeLine{00462 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00522}{Palette\+Cmd\+::erase\+Styles()}}, \mbox{\hyperlink{l00663}{TXsheet\+::increment\+Cells()}}, and \mbox{\hyperlink{l00148}{texture\+\_\+utils\+::invalidate\+Textures()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_af47f89b2f1d6f60def48b3cbf8bb5499}\label{class_t_xsh_simple_level_af47f89b2f1d6f60def48b3cbf8bb5499}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getFrameInfo@{getFrameInfo}}
\index{getFrameInfo@{getFrameInfo}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getFrameInfo()}{getFrameInfo()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_image_info}{TImage\+Info}} $\ast$ TXsh\+Simple\+Level\+::get\+Frame\+Info (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid,  }\item[{bool}]{to\+Be\+Modified }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00588                                                              \{}
\DoxyCodeLine{00589   assert(\mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} != UNKNOWN\_XSHLEVEL);}
\DoxyCodeLine{00590 }
\DoxyCodeLine{00591   \textcolor{comment}{// If the required frame is not in range, quit}}
\DoxyCodeLine{00592   \textcolor{keywordflow}{if} (m\_frames.count(fid) == 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00593 }
\DoxyCodeLine{00594   \textcolor{keyword}{const} std::string \&imgId = getImageId(fid);}
\DoxyCodeLine{00595 }
\DoxyCodeLine{00596   \mbox{\hyperlink{class_t_image_info}{TImageInfo}} *info = ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a44231d6948d69f54e9a4315049131086}{getInfo}}(}
\DoxyCodeLine{00597       imgId, toBeModified ? ImageManager::toBeModified : ImageManager::none, 0);}
\DoxyCodeLine{00598 }
\DoxyCodeLine{00599   \textcolor{keywordflow}{return} info;}
\DoxyCodeLine{00600 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_add3a3a38b51d02621b1e5195fd8feee9}\label{class_t_xsh_simple_level_add3a3a38b51d02621b1e5195fd8feee9}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getFrameStatus@{getFrameStatus}}
\index{getFrameStatus@{getFrameStatus}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getFrameStatus()}{getFrameStatus()}}
{\footnotesize\ttfamily int TXsh\+Simple\+Level\+::get\+Frame\+Status (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{01869                                                              \{}
\DoxyCodeLine{01870   std::map<TFrameId, int>::const\_iterator it = m\_framesStatus.find(fid);}
\DoxyCodeLine{01871   \textcolor{keywordflow}{return} (it != m\_framesStatus.end()) ? it-\/>second : \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a06c6ffb8fd8591fc9c26643daf75d68b}{Normal}};}
\DoxyCodeLine{01872 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a2f5deff7336e87be32b63f9e12d71050}\label{class_t_xsh_simple_level_a2f5deff7336e87be32b63f9e12d71050}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getFrameToCleanup@{getFrameToCleanup}}
\index{getFrameToCleanup@{getFrameToCleanup}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getFrameToCleanup()}{getFrameToCleanup()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_image_p}{TRaster\+ImageP}} TXsh\+Simple\+Level\+::get\+Frame\+To\+Cleanup (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid,  }\item[{bool}]{to\+Be\+Line\+Processed }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00646                                                                                \{}
\DoxyCodeLine{00647   assert(\mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} != UNKNOWN\_XSHLEVEL);}
\DoxyCodeLine{00648 }
\DoxyCodeLine{00649   FramesSet::const\_iterator ft = m\_frames.find(fid);}
\DoxyCodeLine{00650   \textcolor{keywordflow}{if} (ft == m\_frames.end()) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}();}
\DoxyCodeLine{00651 }
\DoxyCodeLine{00652   \textcolor{keywordtype}{bool} flag           = (m\_scannedPath != \mbox{\hyperlink{class_t_file_path}{TFilePath}}());}
\DoxyCodeLine{00653   std::string imageId = getImageId(fid, flag ? \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{Scanned}} : 0);}
\DoxyCodeLine{00654 }
\DoxyCodeLine{00655   \mbox{\hyperlink{struct_image_loader_1_1_build_ext_data}{ImageLoader::BuildExtData}} extData(\textcolor{keyword}{this}, fid, 1);}
\DoxyCodeLine{00656 }
\DoxyCodeLine{00657   UCHAR imFlags = ImageManager::dontPutInCache;}
\DoxyCodeLine{00658   \textcolor{comment}{// if lines are not processed, obtain the original sampled image}}
\DoxyCodeLine{00659   \textcolor{keywordflow}{if} (!toBeLineProcessed) imFlags |= ImageManager::is64bitEnabled;}
\DoxyCodeLine{00660   \mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} img =}
\DoxyCodeLine{00661       ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a534298d4e7278e9e42764965e2389576}{getImage}}(imageId, imFlags, \&extData);}
\DoxyCodeLine{00662   \textcolor{keywordflow}{if} (!img) \textcolor{keywordflow}{return} img;}
\DoxyCodeLine{00663 }
\DoxyCodeLine{00664   \textcolor{keywordtype}{double} x\_dpi, y\_dpi;}
\DoxyCodeLine{00665   img-\/>getDpi(x\_dpi, y\_dpi);}
\DoxyCodeLine{00666   \textcolor{keywordflow}{if} (!x\_dpi \&\& !y\_dpi) \{}
\DoxyCodeLine{00667     \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi = m\_properties-\/>getDpi();}
\DoxyCodeLine{00668     img-\/>setDpi(dpi.x, dpi.y);}
\DoxyCodeLine{00669   \}}
\DoxyCodeLine{00670 }
\DoxyCodeLine{00671   \textcolor{keywordflow}{return} img;}
\DoxyCodeLine{00672 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a71760ecea2543465ba394b6e4b5e93ef}\label{class_t_xsh_simple_level_a71760ecea2543465ba394b6e4b5e93ef}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getFullsampledFrame@{getFullsampledFrame}}
\index{getFullsampledFrame@{getFullsampledFrame}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getFullsampledFrame()}{getFullsampledFrame()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} TXsh\+Simple\+Level\+::get\+Fullsampled\+Frame (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid,  }\item[{UCHAR}]{img\+Manager\+Params\+Mask }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00677                                                                   \{}
\DoxyCodeLine{00678   assert(\mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} != UNKNOWN\_XSHLEVEL);}
\DoxyCodeLine{00679 }
\DoxyCodeLine{00680   FramesSet::const\_iterator it = m\_frames.find(fid);}
\DoxyCodeLine{00681   \textcolor{keywordflow}{if} (it == m\_frames.end()) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}}();}
\DoxyCodeLine{00682 }
\DoxyCodeLine{00683   std::string imageId = getImageId(fid);}
\DoxyCodeLine{00684 }
\DoxyCodeLine{00685   \mbox{\hyperlink{struct_image_loader_1_1_build_ext_data}{ImageLoader::BuildExtData}} extData(\textcolor{keyword}{this}, fid, 1);}
\DoxyCodeLine{00686   \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img = ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a534298d4e7278e9e42764965e2389576}{getImage}}(imageId, imFlags, \&extData);}
\DoxyCodeLine{00687 }
\DoxyCodeLine{00688   \textcolor{keywordflow}{if} (imFlags \& ImageManager::toBeModified) \{}
\DoxyCodeLine{00689     \textcolor{comment}{// The image will be modified. Perform any related invalidation.}}
\DoxyCodeLine{00690     \mbox{\hyperlink{textureutils_8h_a7eb8d0c536418e650eecde9e9230a602}{texture\_utils::invalidateTexture}}(}
\DoxyCodeLine{00691         \textcolor{keyword}{this}, fid);  \textcolor{comment}{// We must rebuild associated textures}}
\DoxyCodeLine{00692   \}}
\DoxyCodeLine{00693 }
\DoxyCodeLine{00694   \textcolor{keywordflow}{return} img;}
\DoxyCodeLine{00695 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a6dc5e2310d937b00491db968372077dd}\label{class_t_xsh_simple_level_a6dc5e2310d937b00491db968372077dd}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getHookFiles@{getHookFiles}}
\index{getHookFiles@{getHookFiles}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getHookFiles()}{getHookFiles()}}
{\footnotesize\ttfamily QString\+List TXsh\+Simple\+Level\+::get\+Hook\+Files (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{decoded\+Level\+Path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Returns the list of {\itshape existing} hook files associated to the specified level, sorted by modification date (last modified at front). The list stores {\itshape local paths\texorpdfstring{$<$}{<}\textbackslash{}I\texorpdfstring{$>$}{>} relative to decoded\+Level\+Path.\+get\+Parent\+Dir(). }

\begin{DoxyNote}{Note}
A level may have multiple hook files if the hook set was edited with older Toonz versions. Use this function if you need to access all of them. Only the latest file format is considered when loading a level. 
\end{DoxyNote}

\begin{DoxyCode}{0}
\DoxyCodeLine{02304                                                                            \{}
\DoxyCodeLine{02305   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&dirPath = decodedLevelPath.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}();}
\DoxyCodeLine{02306   QDir levelDir(QString::fromStdWString(dirPath.getWideString()));}
\DoxyCodeLine{02307 }
\DoxyCodeLine{02308   QStringList hookFileFilter(}
\DoxyCodeLine{02309       QString::fromStdWString(  \textcolor{comment}{// We have to scan for files of the}}
\DoxyCodeLine{02310           decodedLevelPath.getWideName() +}
\DoxyCodeLine{02311           L\textcolor{stringliteral}{"{}\_hooks*.xml"{}}));   \textcolor{comment}{// form  levelName\_hooks*.xml  to}}
\DoxyCodeLine{02312                               \textcolor{comment}{// retain backward compatibility}}
\DoxyCodeLine{02313   \textcolor{keywordflow}{return} levelDir.entryList(  \textcolor{comment}{//}}
\DoxyCodeLine{02314       hookFileFilter,}
\DoxyCodeLine{02315       QDir::Files | QDir::NoDotAndDotDot,  \textcolor{comment}{// Observe that we cleverly sort by}}
\DoxyCodeLine{02316       QDir::Time);                         \textcolor{comment}{// mod date :)}}
\DoxyCodeLine{02317 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00683}{TFile\+Path\+::get\+Parent\+Dir()}}.



Referenced by \mbox{\hyperlink{l02321}{get\+Existing\+Hook\+File()}}, and \mbox{\hyperlink{l02231}{remove\+Files()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a23704b0d8be9290a8ab9c72c3139958b}\label{class_t_xsh_simple_level_a23704b0d8be9290a8ab9c72c3139958b}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getHookPath@{getHookPath}}
\index{getHookPath@{getHookPath}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getHookPath()}{getHookPath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} TXsh\+Simple\+Level\+::get\+Hook\+Path (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{level\+Path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Translates a level path into the corresponding hook path (no check for the existence of said hook file). 
\begin{DoxyCode}{0}
\DoxyCodeLine{02289                                                             \{}
\DoxyCodeLine{02290   \textcolor{comment}{// Translates:  levelName..ext  into  levelName\_hooks..ext.xml}}
\DoxyCodeLine{02291   \textcolor{comment}{//              levelName.ext   into  levelName\_hooks.ext.xml}}
\DoxyCodeLine{02292 }
\DoxyCodeLine{02293   \textcolor{comment}{// Observe that retaining the original level extension IS IMPORTANT, as it}}
\DoxyCodeLine{02294   \textcolor{comment}{// ensures}}
\DoxyCodeLine{02295   \textcolor{comment}{// the UNICITY of the association between a level path and its hook path (ie}}
\DoxyCodeLine{02296   \textcolor{comment}{// levels  test..png  and  test..tif  have separate hook files).}}
\DoxyCodeLine{02297 }
\DoxyCodeLine{02298   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_file_path}{TFilePath}}(path.withName(path.getName() + \textcolor{stringliteral}{"{}\_hooks"{}}).getWideString() +}
\DoxyCodeLine{02299                    L\textcolor{stringliteral}{"{}.xml"{}});}
\DoxyCodeLine{02300 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00636}{TFile\+Path\+::get\+Name()}}, and \mbox{\hyperlink{l00802}{TFile\+Path\+::with\+Name()}}.



Referenced by \mbox{\hyperlink{l02175}{copy\+Files()}}, \mbox{\hyperlink{l02210}{rename\+Files()}}, and \mbox{\hyperlink{l00211}{set\+Editable\+Range()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a121f2766a1380da50998b41c7b4abe64}\label{class_t_xsh_simple_level_a121f2766a1380da50998b41c7b4abe64}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getIconId@{getIconId}}
\index{getIconId@{getIconId}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getIconId()}{getIconId()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily std\+::string TXsh\+Simple\+Level\+::get\+Icon\+Id (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid,  }\item[{const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&}]{size }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00707                                                                      \{}
\DoxyCodeLine{00708   \textcolor{keywordflow}{return} getImageId(fid) + \textcolor{stringliteral}{"{}:"{}} + std::to\_string(size.lx) + \textcolor{stringliteral}{"{}x"{}} +}
\DoxyCodeLine{00709          std::to\_string(size.ly);}
\DoxyCodeLine{00710 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a3a120ff2c7a35866879ceef1cb0a3629}\label{class_t_xsh_simple_level_a3a120ff2c7a35866879ceef1cb0a3629}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getIconId@{getIconId}}
\index{getIconId@{getIconId}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getIconId()}{getIconId()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily std\+::string TXsh\+Simple\+Level\+::get\+Icon\+Id (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid,  }\item[{int}]{frame\+Status = {\ttfamily -\/1} }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00700                                                               \{}
\DoxyCodeLine{00701   \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}icon:"{}} + getImageId(fid, frameStatus);}
\DoxyCodeLine{00702 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a303bad2dd6286eca6edab017b0363de4}\label{class_t_xsh_simple_level_a303bad2dd6286eca6edab017b0363de4}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getImageDpi@{getImageDpi}}
\index{getImageDpi@{getImageDpi}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getImageDpi()}{getImageDpi()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} TXsh\+Simple\+Level\+::get\+Image\+Dpi (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid = {\ttfamily TFrameId\+:\+:NO\+\_\+FRAME},  }\item[{int}]{frame\+Status = {\ttfamily -\/1} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02051                                                                          \{}
\DoxyCodeLine{02052   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level_a7c256d2745209a181a2dbccdec949c5e}{isEmpty}}() || \mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == PLI\_XSHLEVEL) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_point_t}{TPointD}}();}
\DoxyCodeLine{02053 }
\DoxyCodeLine{02054   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_frame_id}{TFrameId}} \&theFid =}
\DoxyCodeLine{02055       (fid == TFrameId::NO\_FRAME || !\mbox{\hyperlink{class_t_xsh_simple_level_a14de45c4b17032346cfcffbca8ef9751}{isFid}}(fid)) ? \mbox{\hyperlink{class_t_xsh_simple_level_a18862340ce6e813778b40a7913b13252}{getFirstFid}}() : fid;}
\DoxyCodeLine{02056   \textcolor{keyword}{const} std::string \&imageId = getImageId(theFid, frameStatus);}
\DoxyCodeLine{02057 }
\DoxyCodeLine{02058   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_image_info}{TImageInfo}} *imageInfo =}
\DoxyCodeLine{02059       ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a44231d6948d69f54e9a4315049131086}{getInfo}}(imageId, ImageManager::none, 0);}
\DoxyCodeLine{02060 }
\DoxyCodeLine{02061   \textcolor{keywordflow}{if} (!imageInfo) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_point_t}{TPointD}}();}
\DoxyCodeLine{02062 }
\DoxyCodeLine{02063   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_point_t}{TPointD}}(imageInfo-\/>\mbox{\hyperlink{class_t_image_info_ad66e78a66158fddceaa192d0063f68e8}{m\_dpix}}, imageInfo-\/>\mbox{\hyperlink{class_t_image_info_ad8d3ccb14666297e487e04aa10ab7831}{m\_dpiy}});}
\DoxyCodeLine{02064 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_acfb8ef0804004135757b37d2bea2fd83}\label{class_t_xsh_simple_level_acfb8ef0804004135757b37d2bea2fd83}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getImageId@{getImageId}}
\index{getImageId@{getImageId}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getImageId()}{getImageId()}}
{\footnotesize\ttfamily std\+::string TXsh\+Simple\+Level\+::get\+Image\+Id (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid,  }\item[{int}]{frame\+Status = {\ttfamily -\/1} }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{01856                                                                \{}
\DoxyCodeLine{01857   \textcolor{keywordflow}{if} (frameStatus < 0) frameStatus = getFrameStatus(fid);}
\DoxyCodeLine{01858   std::string prefix = \textcolor{stringliteral}{"{}L"{}};}
\DoxyCodeLine{01859   \textcolor{keywordflow}{if} (frameStatus \& \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a9e5aa8f328730d501a912a0e11fe39f0}{CleanupPreview}})}
\DoxyCodeLine{01860     prefix = \textcolor{stringliteral}{"{}P"{}};}
\DoxyCodeLine{01861   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((frameStatus \& (\mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{Scanned}} | \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a48aa37d686efea1d08332d5ffa69548d}{Cleanupped}})) == \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{Scanned}})}
\DoxyCodeLine{01862     prefix = \textcolor{stringliteral}{"{}S"{}};}
\DoxyCodeLine{01863   std::string imageId = m\_idBase + \textcolor{stringliteral}{"{}\_"{}} + prefix + fid.expand();}
\DoxyCodeLine{01864   \textcolor{keywordflow}{return} imageId;}
\DoxyCodeLine{01865 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a9fa8472504756ac06cf72c4162ce0cbd}\label{class_t_xsh_simple_level_a9fa8472504756ac06cf72c4162ce0cbd}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getImageSubsampling@{getImageSubsampling}}
\index{getImageSubsampling@{getImageSubsampling}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getImageSubsampling()}{getImageSubsampling()}}
{\footnotesize\ttfamily int TXsh\+Simple\+Level\+::get\+Image\+Subsampling (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{02068                                                                   \{}
\DoxyCodeLine{02069   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level_a7c256d2745209a181a2dbccdec949c5e}{isEmpty}}() || \mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == PLI\_XSHLEVEL) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{02070   \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img = TImageCache::instance()-\/>\mbox{\hyperlink{class_t_image_cache_aea3ac2752efd6fa9689f5a7c1e895e41}{get}}(getImageId(fid), \textcolor{keyword}{false});}
\DoxyCodeLine{02071   \textcolor{keywordflow}{if} (!img) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{02072   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} ri = img) \textcolor{keywordflow}{return} ri-\/>getSubsampling();}
\DoxyCodeLine{02073   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = img) \textcolor{keywordflow}{return} ti-\/>getSubsampling();}
\DoxyCodeLine{02074   \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{02075 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a6e31155f1a6bf0f0db641ffaff2ef2c5}\label{class_t_xsh_simple_level_a6e31155f1a6bf0f0db641ffaff2ef2c5}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getLastFid@{getLastFid}}
\index{getLastFid@{getLastFid}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getLastFid()}{getLastFid()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} TXsh\+Simple\+Level\+::get\+Last\+Fid (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Returns the last level frame\textquotesingle{}s id; roughly equivalent to {\ttfamily index2fid(\mbox{\hyperlink{class_t_xsh_simple_level_a3fe127306d6669a3eb9e9d8802660d7b}{get\+Frame\+Count()}}-\/1)}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00472                                            \{}
\DoxyCodeLine{00473   \textcolor{keywordflow}{return} !\mbox{\hyperlink{class_t_xsh_simple_level_a7c256d2745209a181a2dbccdec949c5e}{isEmpty}}() ? *m\_frames.rbegin() : \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(TFrameId::NO\_FRAME);}
\DoxyCodeLine{00474 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00147}{is\+Empty()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}\label{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getPalette@{getPalette}}
\index{getPalette@{getPalette}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getPalette()}{getPalette()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$ TXsh\+Simple\+Level\+::get\+Palette (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Returns a pointer to the {\itshape shared} level palette. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00424 \{ \textcolor{keywordflow}{return} m\_palette; \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00083}{Image\+Loader\+::build()}}, \mbox{\hyperlink{l01978}{create\+Empty\+Frame()}}, \mbox{\hyperlink{l00729}{Studio\+Palette\+Tree\+Viewer\+::drop\+Event()}}, \mbox{\hyperlink{l00055}{TXsh\+Cell\+::get\+Palette()}}, \mbox{\hyperlink{l02107}{TImage\+Reader\+Svg\+::load()}}, \mbox{\hyperlink{l01083}{load()}}, \mbox{\hyperlink{l00303}{Style\+Picker\+Tool\+::on\+Image\+Changed()}}, \mbox{\hyperlink{l00698}{Toonz\+Image\+Icon\+Renderer\+::run()}}, \mbox{\hyperlink{l00209}{Scene\+Level\+::save()}}, \mbox{\hyperlink{l01404}{save()}}, \mbox{\hyperlink{l00190}{Scene\+Level\+::\+Scene\+Level()}}, and \mbox{\hyperlink{l00242}{Vectorizer\+::set\+Level()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}\label{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getPath@{getPath}}
\index{getPath@{getPath}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getPath()}{getPath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} TXsh\+Simple\+Level\+::get\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Return the file path associated with the level. 



Reimplemented from \mbox{\hyperlink{class_t_xsh_level_ab8ffcf067cadf0e1c4081b54ffde249d}{TXsh\+Level}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00120 \{ \textcolor{keywordflow}{return} m\_path; \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00864}{Toonz\+Scene\+::create\+New\+Level()}}, \mbox{\hyperlink{l01550}{Save\+Level\+As\+Popup\+::execute()}}, \mbox{\hyperlink{l00712}{Cleanup\+Settings\+Model\+::get\+Cln\+Path()}}, \mbox{\hyperlink{l00724}{Cleanup\+Settings\+Model\+::get\+Input\+Path()}}, \mbox{\hyperlink{l00908}{Vectorizer\+Popup\+::is\+Level\+To\+Convert()}}, \mbox{\hyperlink{l00443}{Toonz\+Scene\+::load\+Tnz\+File()}}, \mbox{\hyperlink{l00269}{Level\+Updater\+::open()}}, \mbox{\hyperlink{l00190}{Scene\+Level\+::\+Scene\+Level()}}, and \mbox{\hyperlink{l00242}{Vectorizer\+::set\+Level()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}\label{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getProperties@{getProperties}}
\index{getProperties@{getProperties}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getProperties()}{getProperties()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_level_properties}{Level\+Properties}} $\ast$ TXsh\+Simple\+Level\+::get\+Properties (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



\texorpdfstring{$<$}{<} Returns a pointer to the {\itshape owned} level properties. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00111   \{}
\DoxyCodeLine{00112     \textcolor{keywordflow}{return} m\_properties.get();}
\DoxyCodeLine{00113   \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01978}{create\+Empty\+Frame()}}, \mbox{\hyperlink{l01083}{load()}}, \mbox{\hyperlink{l01122}{Toonz\+Scene\+::load\+Level()}}, \mbox{\hyperlink{l00993}{Stage\+::\+Raster\+Painter\+::on\+Raster\+Image()}}, \mbox{\hyperlink{l00269}{Level\+Updater\+::open()}}, \mbox{\hyperlink{l00209}{Scene\+Level\+::save()}}, \mbox{\hyperlink{l01404}{save()}}, \mbox{\hyperlink{l01364}{save\+Data()}}, and \mbox{\hyperlink{l01610}{Filmstrip\+::update\+Choose\+Level\+Combo\+Items()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a80b67bf33b6c5511d9f7e2622f4c1f2e}\label{class_t_xsh_simple_level_a80b67bf33b6c5511d9f7e2622f4c1f2e}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getResolution@{getResolution}}
\index{getResolution@{getResolution}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getResolution()}{getResolution()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_dimension_t}{TDimension}} TXsh\+Simple\+Level\+::get\+Resolution (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02043                                           \{}
\DoxyCodeLine{02044   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level_a7c256d2745209a181a2dbccdec949c5e}{isEmpty}}() || \mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == PLI\_XSHLEVEL) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_dimension_t}{TDimension}}();}
\DoxyCodeLine{02045   \textcolor{keywordflow}{return} m\_properties-\/>getImageRes();}
\DoxyCodeLine{02046 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a35e541e6a786f6e7db6d8cf8fa6b2a8d}\label{class_t_xsh_simple_level_a35e541e6a786f6e7db6d8cf8fa6b2a8d}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getScannedPath@{getScannedPath}}
\index{getScannedPath@{getScannedPath}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getScannedPath()}{getScannedPath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} TXsh\+Simple\+Level\+::get\+Scanned\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00123 \{ \textcolor{keywordflow}{return} m\_scannedPath; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_aac1fd1d3ecf0778b8ee139c9119fcdef}\label{class_t_xsh_simple_level_aac1fd1d3ecf0778b8ee139c9119fcdef}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!getSimpleLevel@{getSimpleLevel}}
\index{getSimpleLevel@{getSimpleLevel}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{getSimpleLevel()}{getSimpleLevel()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsh_simple_level}{TXsh\+Simple\+Level}} $\ast$ TXsh\+Simple\+Level\+::get\+Simple\+Level (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented for \mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}}. 



Reimplemented from \mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{TXsh\+Level}}.



Referenced by \mbox{\hyperlink{l00914}{Vectorizer\+Popup\+::apply()}}, \mbox{\hyperlink{l02076}{Replace\+Parent\+Directory\+Popup\+::execute()}}, \mbox{\hyperlink{l00245}{TTool\+::get\+Image\+Cell()}}, and \mbox{\hyperlink{l01610}{Filmstrip\+::update\+Choose\+Level\+Combo\+Items()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_af30a02239ef0900c095a0af366dea26a}\label{class_t_xsh_simple_level_af30a02239ef0900c095a0af366dea26a}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!guessIndex@{guessIndex}}
\index{guessIndex@{guessIndex}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{guessIndex()}{guessIndex()}}
{\footnotesize\ttfamily int TXsh\+Simple\+Level\+::guess\+Index (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid }\end{DoxyParamCaption}) const}

frame id, or {\ttfamily -\/1} if not found. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00524                                                          \{}
\DoxyCodeLine{00525   \textcolor{keywordflow}{if} (m\_frames.empty()) \textcolor{keywordflow}{return} 0;  \textcolor{comment}{// no frames, return 0 (by definition)}}
\DoxyCodeLine{00526 }
\DoxyCodeLine{00527   FramesSet::const\_iterator ft = m\_frames.lower\_bound(fid);}
\DoxyCodeLine{00528   \textcolor{keywordflow}{if} (ft == m\_frames.end()) \{}
\DoxyCodeLine{00529     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_frame_id}{TFrameId}} \&maxFid = *m\_frames.rbegin();}
\DoxyCodeLine{00530     assert(fid > maxFid);}
\DoxyCodeLine{00531 }
\DoxyCodeLine{00532     \textcolor{comment}{// fid not in the table, but greater than the last one.}}
\DoxyCodeLine{00533     \textcolor{comment}{// return a suitable index. (e.g. frames are 1,3,5,7; fid2index(11) should}}
\DoxyCodeLine{00534     \textcolor{comment}{// return index=5)}}
\DoxyCodeLine{00535     \textcolor{keywordtype}{int} step = \mbox{\hyperlink{class_t_xsh_simple_level_a4140aae35b5062f7d2726f9f67ef2f7c}{guessStep}}();}
\DoxyCodeLine{00536     \textcolor{keywordtype}{int} i    = (fid.getNumber() -\/ maxFid.getNumber()) / step;}
\DoxyCodeLine{00537     \textcolor{keywordflow}{return} m\_frames.size() -\/ 1 + i;}
\DoxyCodeLine{00538   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00539     \textcolor{keywordflow}{return} std::distance(m\_frames.begin(), ft);}
\DoxyCodeLine{00540 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00478}{guess\+Step()}}.



Referenced by \mbox{\hyperlink{l00719}{Stage\+Builder\+::add\+Simple\+Level\+Frame()}}, \mbox{\hyperlink{l00259}{Hook\+Tool\+::draw()}}, and \mbox{\hyperlink{l00698}{Toonz\+Image\+Icon\+Renderer\+::run()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a4140aae35b5062f7d2726f9f67ef2f7c}\label{class_t_xsh_simple_level_a4140aae35b5062f7d2726f9f67ef2f7c}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!guessStep@{guessStep}}
\index{guessStep@{guessStep}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{guessStep()}{guessStep()}}
{\footnotesize\ttfamily int TXsh\+Simple\+Level\+::guess\+Step (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Analyzes the level\textquotesingle{}s frames table and returns the alleged entries {\itshape step} 
\begin{DoxyItemize}
\item ie the distance from each entry to the next. 
\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{00478                                      \{}
\DoxyCodeLine{00479   \textcolor{keywordtype}{int} frameCount = m\_frames.size();}
\DoxyCodeLine{00480   \textcolor{keywordflow}{if} (frameCount < 2)}
\DoxyCodeLine{00481     \textcolor{keywordflow}{return} 1;  \textcolor{comment}{// un livello con zero o un frame ha per def. step=1}}
\DoxyCodeLine{00482 }
\DoxyCodeLine{00483   FramesSet::const\_iterator ft = m\_frames.begin();}
\DoxyCodeLine{00484 }
\DoxyCodeLine{00485   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} firstFid = *ft++, secondFid = *ft++;}
\DoxyCodeLine{00486 }
\DoxyCodeLine{00487   \textcolor{keywordflow}{if} (!firstFid.getLetter().isEmpty() || !secondFid.getLetter().isEmpty())}
\DoxyCodeLine{00488     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{00489 }
\DoxyCodeLine{00490   \textcolor{keywordtype}{int} step = secondFid.getNumber() -\/ firstFid.getNumber();}
\DoxyCodeLine{00491   \textcolor{keywordflow}{if} (step == 1) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{00492 }
\DoxyCodeLine{00493   \textcolor{comment}{// controllo subito se lo step vale per l'ultimo frame}}
\DoxyCodeLine{00494   \textcolor{comment}{// (cerco di limitare il numero di volte in cui devo controllare tutta la}}
\DoxyCodeLine{00495   \textcolor{comment}{// lista)}}
\DoxyCodeLine{00496   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} lastFid = *m\_frames.rbegin();}
\DoxyCodeLine{00497   \textcolor{keywordflow}{if} (!lastFid.getLetter().isEmpty()) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{00498 }
\DoxyCodeLine{00499   \textcolor{keywordflow}{if} (lastFid.getNumber() != firstFid.getNumber() + step * (frameCount -\/ 1))}
\DoxyCodeLine{00500     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{00501 }
\DoxyCodeLine{00502   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 2; ft != m\_frames.end(); ++ft, ++i) \{}
\DoxyCodeLine{00503     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_frame_id}{TFrameId}} \&fid = *ft;}
\DoxyCodeLine{00504 }
\DoxyCodeLine{00505     \textcolor{keywordflow}{if} (!fid.getLetter().isEmpty()) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{00506 }
\DoxyCodeLine{00507     \textcolor{keywordflow}{if} (fid.getNumber() != firstFid.getNumber() + step * i) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{00508   \}}
\DoxyCodeLine{00509 }
\DoxyCodeLine{00510   \textcolor{keywordflow}{return} step;}
\DoxyCodeLine{00511 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00524}{guess\+Index()}}, and \mbox{\hyperlink{l00544}{index2fid()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a07279a40ffad2c6ccc597c0a418f78fb}\label{class_t_xsh_simple_level_a07279a40ffad2c6ccc597c0a418f78fb}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!index2fid@{index2fid}}
\index{index2fid@{index2fid}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{index2fid()}{index2fid()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} TXsh\+Simple\+Level\+::index2fid (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const}

Function \mbox{\hyperlink{class_t_xsh_simple_level_a07279a40ffad2c6ccc597c0a418f78fb}{index2fid()}} attempts guessing frame ids for frame indexes beyond current frames count. See function \mbox{\hyperlink{class_t_xsh_simple_level_a4140aae35b5062f7d2726f9f67ef2f7c}{guess\+Step()}} for further details. ~\newline
 Returns a frame id corresponding to the specified frame index, or 
\begin{DoxyCode}{0}
\DoxyCodeLine{00544                                                    \{}
\DoxyCodeLine{00545   \textcolor{keywordflow}{if} (index < 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(-\/2);}
\DoxyCodeLine{00546 }
\DoxyCodeLine{00547   \textcolor{keywordtype}{int} frameCount = m\_frames.size();}
\DoxyCodeLine{00548   \textcolor{keywordflow}{if} (frameCount == 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(1);  \textcolor{comment}{// o\_o?}}
\DoxyCodeLine{00549 }
\DoxyCodeLine{00550   \textcolor{keywordflow}{if} (index < frameCount) \{}
\DoxyCodeLine{00551     FramesSet::const\_iterator ft = m\_frames.begin();}
\DoxyCodeLine{00552     std::advance(ft, index);}
\DoxyCodeLine{00553     \textcolor{keywordflow}{return} *ft;}
\DoxyCodeLine{00554   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00555     \textcolor{keywordtype}{int} step        = \mbox{\hyperlink{class_t_xsh_simple_level_a4140aae35b5062f7d2726f9f67ef2f7c}{guessStep}}();}
\DoxyCodeLine{00556     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} maxFid = *m\_frames.rbegin();}
\DoxyCodeLine{00557     \textcolor{keywordtype}{int} d           = step * (index -\/ frameCount + 1);}
\DoxyCodeLine{00558     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(maxFid.getNumber() + d);}
\DoxyCodeLine{00559   \}}
\DoxyCodeLine{00560 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00478}{guess\+Step()}}.



Referenced by \mbox{\hyperlink{l00719}{Stage\+Builder\+::add\+Simple\+Level\+Frame()}}, \mbox{\hyperlink{l00259}{Hook\+Tool\+::draw()}}, \mbox{\hyperlink{l00413}{Io\+Cmd\+::export\+Level()}}, \mbox{\hyperlink{l00211}{set\+Editable\+Range()}}, and \mbox{\hyperlink{l00294}{TTool\+::touch\+Image()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a7688e3e000ae055f621e60bbced5aa05}\label{class_t_xsh_simple_level_a7688e3e000ae055f621e60bbced5aa05}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!initializePalette@{initializePalette}}
\index{initializePalette@{initializePalette}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{initializePalette()}{initializePalette()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::initialize\+Palette (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01926                                         \{}
\DoxyCodeLine{01927   assert(\mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}());}
\DoxyCodeLine{01928   \textcolor{keywordtype}{int} type = \mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}();}
\DoxyCodeLine{01929   \textcolor{keywordflow}{if} (type == TZP\_XSHLEVEL || type == PLI\_XSHLEVEL) \mbox{\hyperlink{class_t_xsh_simple_level_ab5634198656dc2ade669fae235bb19c0}{setPalette}}(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_palette}{TPalette}}());}
\DoxyCodeLine{01930   \textcolor{keywordflow}{if} (type == OVL\_XSHLEVEL)}
\DoxyCodeLine{01931     \mbox{\hyperlink{class_t_xsh_simple_level_ab5634198656dc2ade669fae235bb19c0}{setPalette}}(FullColorPalette::instance()-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}(\mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()));}
\DoxyCodeLine{01932   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = \mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}();}
\DoxyCodeLine{01933   \textcolor{keywordflow}{if} (palette \&\& type != OVL\_XSHLEVEL) \{}
\DoxyCodeLine{01934     palette-\/>setPaletteName(\mbox{\hyperlink{class_t_xsh_level_a3a59fb1bd3261baee4e889a9edbf0ae8}{getName}}());}
\DoxyCodeLine{01935     palette-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{01936   \}}
\DoxyCodeLine{01937 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_ac342615c70611075cc00981de033b863}\label{class_t_xsh_simple_level_ac342615c70611075cc00981de033b863}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!initializeResolutionAndDpi@{initializeResolutionAndDpi}}
\index{initializeResolutionAndDpi@{initializeResolutionAndDpi}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{initializeResolutionAndDpi()}{initializeResolutionAndDpi()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::initialize\+Resolution\+And\+Dpi (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&}]{dim = {\ttfamily \mbox{\hyperlink{class_t_dimension_t}{TDimension}}()},  }\item[{double}]{dpi = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01942                                                              \{}
\DoxyCodeLine{01943   assert(\mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}());}
\DoxyCodeLine{01944   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>getImageRes() != \mbox{\hyperlink{class_t_dimension_t}{TDimension}}() \&\&}
\DoxyCodeLine{01945       \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>getDpi() != \mbox{\hyperlink{class_t_point_t}{TPointD}}())}
\DoxyCodeLine{01946     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01947 }
\DoxyCodeLine{01948   \textcolor{keywordtype}{double} dpiY = dpi;}
\DoxyCodeLine{01949   \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_aef6e555a773c2f69d2089dc9c009f8be}{setDpiPolicy}}(LevelProperties::DP\_ImageDpi);}
\DoxyCodeLine{01950   \textcolor{keywordflow}{if} (dim == \mbox{\hyperlink{class_t_dimension_t}{TDimension}}()) \{}
\DoxyCodeLine{01951     \textcolor{keywordtype}{double} w, h;}
\DoxyCodeLine{01952     \mbox{\hyperlink{class_preferences}{Preferences}} *pref = Preferences::instance();}
\DoxyCodeLine{01953     \textcolor{keywordflow}{if} (pref-\/>isNewLevelSizeToCameraSizeEnabled()) \{}
\DoxyCodeLine{01954       \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}} camSize = \mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}()-\/>\mbox{\hyperlink{class_t_camera_a6f561eca912177c2150b3e57816f02f6}{getSize}}();}
\DoxyCodeLine{01955       w                   = camSize.lx;}
\DoxyCodeLine{01956       h                   = camSize.ly;}
\DoxyCodeLine{01957       \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_aef6e555a773c2f69d2089dc9c009f8be}{setDpiPolicy}}(LevelProperties::DP\_CustomDpi);}
\DoxyCodeLine{01958       dpi  = \mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}()-\/>\mbox{\hyperlink{class_t_camera_adf45510b5dc53f6481308ef489fbd5a9}{getDpi}}().x;}
\DoxyCodeLine{01959       dpiY = \mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}()-\/>\mbox{\hyperlink{class_t_camera_adf45510b5dc53f6481308ef489fbd5a9}{getDpi}}().y;}
\DoxyCodeLine{01960     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01961       w    = pref-\/>getDefLevelWidth();}
\DoxyCodeLine{01962       h    = pref-\/>getDefLevelHeight();}
\DoxyCodeLine{01963       dpi  = pref-\/>getDefLevelDpi();}
\DoxyCodeLine{01964       dpiY = dpi;}
\DoxyCodeLine{01965     \}}
\DoxyCodeLine{01966 }
\DoxyCodeLine{01967     \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a9dd72acd3e3fd85e3d44c6b44a8f9ff4}{setImageRes}}(\mbox{\hyperlink{class_t_dimension_t}{TDimension}}(tround(w * dpi), tround(h * dpiY)));}
\DoxyCodeLine{01968   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01969     \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a9dd72acd3e3fd85e3d44c6b44a8f9ff4}{setImageRes}}(dim);}
\DoxyCodeLine{01970 }
\DoxyCodeLine{01971   \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a62b744354e8acc21f75e19fec84bbe6c}{setImageDpi}}(\mbox{\hyperlink{class_t_point_t}{TPointD}}(dpi, dpiY));}
\DoxyCodeLine{01972   \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_abdaea012fce05b1617350a174790f473}{setDpi}}(dpi);}
\DoxyCodeLine{01973 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a0461a1c4cbf4aff6acf7479174033f6f}\label{class_t_xsh_simple_level_a0461a1c4cbf4aff6acf7479174033f6f}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!invalidateFrame@{invalidateFrame}}
\index{invalidateFrame@{invalidateFrame}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{invalidateFrame()}{invalidateFrame()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::invalidate\+Frame (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01919                                                          \{}
\DoxyCodeLine{01920   std::string \textcolor{keywordtype}{id} = getImageId(fid);}
\DoxyCodeLine{01921   ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a34bdaa25c84cd79a7518dbd233a947f4}{invalidate}}(\textcolor{keywordtype}{id});}
\DoxyCodeLine{01922 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a981bbb92457662c5a66693d15c5bcf19}\label{class_t_xsh_simple_level_a981bbb92457662c5a66693d15c5bcf19}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!invalidateFrames@{invalidateFrames}}
\index{invalidateFrames@{invalidateFrames}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{invalidateFrames()}{invalidateFrames()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::invalidate\+Frames (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01911                                        \{}
\DoxyCodeLine{01912   FramesSet::iterator ft, fEnd = m\_frames.end();}
\DoxyCodeLine{01913   \textcolor{keywordflow}{for} (ft = m\_frames.begin(); ft != fEnd; ++ft)}
\DoxyCodeLine{01914     ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a34bdaa25c84cd79a7518dbd233a947f4}{invalidate}}(getImageId(*ft));}
\DoxyCodeLine{01915 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a4aa1b2a8203d6cb121719b9e100c9643}\label{class_t_xsh_simple_level_a4aa1b2a8203d6cb121719b9e100c9643}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!is16BitChannelLevel@{is16BitChannelLevel}}
\index{is16BitChannelLevel@{is16BitChannelLevel}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{is16BitChannelLevel()}{is16BitChannelLevel()}}
{\footnotesize\ttfamily bool TXsh\+Simple\+Level\+::is16\+Bit\+Channel\+Level (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00098                                    \{}
\DoxyCodeLine{00099     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == OVL\_XSHLEVEL \&\& m\_16BitChannelLevel;}
\DoxyCodeLine{00100   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a7c256d2745209a181a2dbccdec949c5e}\label{class_t_xsh_simple_level_a7c256d2745209a181a2dbccdec949c5e}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!isEmpty@{isEmpty}}
\index{isEmpty@{isEmpty}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{isEmpty()}{isEmpty()}}
{\footnotesize\ttfamily bool TXsh\+Simple\+Level\+::is\+Empty (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Returns whether the level is empty. 



Reimplemented from \mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}}.



Referenced by \mbox{\hyperlink{l01978}{create\+Empty\+Frame()}}, \mbox{\hyperlink{l00413}{Io\+Cmd\+::export\+Level()}}, \mbox{\hyperlink{l00466}{get\+First\+Fid()}}, \mbox{\hyperlink{l00472}{get\+Last\+Fid()}}, and \mbox{\hyperlink{l00294}{TTool\+::touch\+Image()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a14de45c4b17032346cfcffbca8ef9751}\label{class_t_xsh_simple_level_a14de45c4b17032346cfcffbca8ef9751}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!isFid@{isFid}}
\index{isFid@{isFid}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{isFid()}{isFid()}}
{\footnotesize\ttfamily bool TXsh\+Simple\+Level\+::is\+Fid (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid }\end{DoxyParamCaption}) const}



Returns whether a given frame\+Id is in the level. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00454                                                      \{}
\DoxyCodeLine{00455   \textcolor{keywordflow}{return} m\_frames.count(fid);}
\DoxyCodeLine{00456 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00653}{Raster\+Image\+Icon\+Renderer\+::run()}}, \mbox{\hyperlink{l00698}{Toonz\+Image\+Icon\+Renderer\+::run()}}, and \mbox{\hyperlink{l00294}{TTool\+::touch\+Image()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a8287af55e61806df64e30a1f5e45d25e}\label{class_t_xsh_simple_level_a8287af55e61806df64e30a1f5e45d25e}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!isFrameReadOnly@{isFrameReadOnly}}
\index{isFrameReadOnly@{isFrameReadOnly}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{isFrameReadOnly()}{isFrameReadOnly()}}
{\footnotesize\ttfamily bool TXsh\+Simple\+Level\+::is\+Frame\+Read\+Only (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}}}]{fid }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02402                                                   \{}
\DoxyCodeLine{02403   \textcolor{comment}{// For Raster and mesh files, check to see if files are marked as read-\/only at}}
\DoxyCodeLine{02404   \textcolor{comment}{// the OS level}}
\DoxyCodeLine{02405   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == OVL\_XSHLEVEL || \mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == TZI\_XSHLEVEL ||}
\DoxyCodeLine{02406       \mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == MESH\_XSHLEVEL) \{}
\DoxyCodeLine{02407     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>isStopMotionLevel()) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{02408     \mbox{\hyperlink{class_t_file_path}{TFilePath}} fullPath   = \mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(m\_path);}
\DoxyCodeLine{02409     std::string fileType = fullPath.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}();}
\DoxyCodeLine{02410     \textcolor{keywordflow}{if} (fileType == \textcolor{stringliteral}{"{}psd"{}} || fileType == \textcolor{stringliteral}{"{}gif"{}} || fileType == \textcolor{stringliteral}{"{}mp4"{}} ||}
\DoxyCodeLine{02411         fileType == \textcolor{stringliteral}{"{}webm"{}})}
\DoxyCodeLine{02412       \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{02413     \mbox{\hyperlink{class_t_file_path}{TFilePath}} path =}
\DoxyCodeLine{02414         fullPath.\mbox{\hyperlink{class_t_file_path_a698bbf714436eb6923359044900cde2b}{getDots}}() == \textcolor{stringliteral}{"{}.."{}} ? fullPath.\mbox{\hyperlink{class_t_file_path_a12f35b225e1882372ad7e02ad7fce543}{withFrame}}(fid) : fullPath;}
\DoxyCodeLine{02415     \textcolor{keywordflow}{if} (!TSystem::doesExistFileOrLevel(path)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{02416     \mbox{\hyperlink{class_t_file_status}{TFileStatus}} fs(path);}
\DoxyCodeLine{02417     \textcolor{keywordflow}{return} !fs.isWritable();}
\DoxyCodeLine{02418   \}}
\DoxyCodeLine{02419 }
\DoxyCodeLine{02420   \textcolor{comment}{// If Level is marked read only, check for editable frames}}
\DoxyCodeLine{02421   \textcolor{keywordflow}{if} (m\_isReadOnly \&\& !m\_editableRange.empty() \&\&}
\DoxyCodeLine{02422       m\_editableRange.count(fid) != 0)}
\DoxyCodeLine{02423     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{02424 }
\DoxyCodeLine{02425   \textcolor{keywordflow}{return} m\_isReadOnly;}
\DoxyCodeLine{02426 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a1a75ee26ceeb8922209d2146de77931a}\label{class_t_xsh_simple_level_a1a75ee26ceeb8922209d2146de77931a}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!isReadOnly@{isReadOnly}}
\index{isReadOnly@{isReadOnly}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{isReadOnly()}{isReadOnly()}}
{\footnotesize\ttfamily bool TXsh\+Simple\+Level\+::is\+Read\+Only (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00105 \{ \textcolor{keywordflow}{return} m\_isReadOnly; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a31db45fd67e847b52c96ef1836c9d989}\label{class_t_xsh_simple_level_a31db45fd67e847b52c96ef1836c9d989}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!isSubsequence@{isSubsequence}}
\index{isSubsequence@{isSubsequence}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{isSubsequence()}{isSubsequence()}}
{\footnotesize\ttfamily bool TXsh\+Simple\+Level\+::is\+Subsequence (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00096 \{ \textcolor{keywordflow}{return} m\_isSubsequence; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a0020922626c177cd3134a05e274aecee}\label{class_t_xsh_simple_level_a0020922626c177cd3134a05e274aecee}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!load@{load}}
\index{load@{load}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{load()}{load()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::load (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Loads the level from disk, translating encoded level paths relative to the level\textquotesingle{}s scene path. 

Implements \mbox{\hyperlink{class_t_xsh_level_a3fe5db60912aecd08a751208b5e3feae}{TXsh\+Level}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01083                            \{}
\DoxyCodeLine{01084   \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_ab862cec23ee8e4922796cb7f98fcab44}{setCreator}}(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01085   QString creator;}
\DoxyCodeLine{01086 }
\DoxyCodeLine{01087   assert(\mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}());}
\DoxyCodeLine{01088   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01089 }
\DoxyCodeLine{01090   m\_isSubsequence = loadingLevelRange.isEnabled();}
\DoxyCodeLine{01091 }
\DoxyCodeLine{01092   \mbox{\hyperlink{class_t_file_path}{TFilePath}} checkpath = \mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(m\_path);}
\DoxyCodeLine{01093   std::string type    = checkpath.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}();}
\DoxyCodeLine{01094 }
\DoxyCodeLine{01095   \textcolor{keywordflow}{if} (m\_scannedPath != \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \{}
\DoxyCodeLine{01096     \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a61fc160a558f50d75be87c6fae066d57}{setDirtyFlag}}(}
\DoxyCodeLine{01097         \textcolor{keyword}{false});  \textcolor{comment}{// Level is now supposedly loaded from disk}}
\DoxyCodeLine{01098 }
\DoxyCodeLine{01099     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} ScannedCleanuppedMask = \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{Scanned}} | \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a48aa37d686efea1d08332d5ffa69548d}{Cleanupped}};}
\DoxyCodeLine{01100     \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = \mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(m\_scannedPath);}
\DoxyCodeLine{01101     \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(path)) \{}
\DoxyCodeLine{01102       \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}} lr(path);}
\DoxyCodeLine{01103       assert(lr);}
\DoxyCodeLine{01104       \mbox{\hyperlink{class_t_level_p}{TLevelP}} level = lr-\/>loadInfo();}
\DoxyCodeLine{01105       \textcolor{keywordflow}{if} (!checkCreatorString(creator = lr-\/>getCreator()))}
\DoxyCodeLine{01106         \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a9c6567a96a32124a23ba050b91a6ff92}{setIsForbidden}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01107       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01108         \textcolor{keywordflow}{for} (TLevel::Iterator it = level-\/>begin(); it != level-\/>end(); it++) \{}
\DoxyCodeLine{01109           \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = it-\/>first;}
\DoxyCodeLine{01110           \textcolor{keywordflow}{if} (!loadingLevelRange.match(fid)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01111           setFrameStatus(}
\DoxyCodeLine{01112               fid, (getFrameStatus(fid) \& \string~ScannedCleanuppedMask) | \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{Scanned}});}
\DoxyCodeLine{01113           setFrame(fid, \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}());}
\DoxyCodeLine{01114         \}}
\DoxyCodeLine{01115     \}}
\DoxyCodeLine{01116 }
\DoxyCodeLine{01117     path = \mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(m\_path);}
\DoxyCodeLine{01118     \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(path)) \{}
\DoxyCodeLine{01119       \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}} lr(path);}
\DoxyCodeLine{01120       assert(lr);}
\DoxyCodeLine{01121       \mbox{\hyperlink{class_t_level_p}{TLevelP}} level = lr-\/>loadInfo();}
\DoxyCodeLine{01122       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() \& FULLCOLOR\_TYPE)}
\DoxyCodeLine{01123         \mbox{\hyperlink{class_t_xsh_simple_level_ab5634198656dc2ade669fae235bb19c0}{setPalette}}(FullColorPalette::instance()-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}(\mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()));}
\DoxyCodeLine{01124       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01125         \mbox{\hyperlink{class_t_xsh_simple_level_ab5634198656dc2ade669fae235bb19c0}{setPalette}}(level-\/>getPalette());}
\DoxyCodeLine{01126       \textcolor{keywordflow}{if} (!checkCreatorString(creator = lr-\/>getCreator()))}
\DoxyCodeLine{01127         \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a9c6567a96a32124a23ba050b91a6ff92}{setIsForbidden}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01128       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01129         \textcolor{keywordflow}{for} (TLevel::Iterator it = level-\/>begin(); it != level-\/>end(); it++) \{}
\DoxyCodeLine{01130           \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = it-\/>first;}
\DoxyCodeLine{01131           \textcolor{keywordflow}{if} (!loadingLevelRange.match(fid)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01132           setFrameStatus(fid, getFrameStatus(fid) | \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a48aa37d686efea1d08332d5ffa69548d}{Cleanupped}});}
\DoxyCodeLine{01133           setFrame(fid, \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}());}
\DoxyCodeLine{01134         \}}
\DoxyCodeLine{01135       \mbox{\hyperlink{class_t_xsh_simple_level_aa5ae2d1b425b93a9e37fbfcb324a5db6}{setContentHistory}}(}
\DoxyCodeLine{01136           lr-\/>getContentHistory() ? lr-\/>getContentHistory()-\/>clone() : 0);}
\DoxyCodeLine{01137     \}}
\DoxyCodeLine{01138 }
\DoxyCodeLine{01139   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01140     \textcolor{comment}{// Not a scan + cleanup level}}
\DoxyCodeLine{01141 }
\DoxyCodeLine{01142     \textcolor{comment}{// Loading PSD files via load level command needs to convert layerID in the}}
\DoxyCodeLine{01143     \textcolor{comment}{// file path to layer name here. The conversion is not needed on loading}}
\DoxyCodeLine{01144     \textcolor{comment}{// scene as the file path loaded from the scene file is already converted.}}
\DoxyCodeLine{01145     \textcolor{keywordflow}{if} (m\_path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}psd"{}} \&\& !this-\/>getScene()-\/>isLoading())}
\DoxyCodeLine{01146       m\_path = getLevelPathAndSetNameWithPsdLevelName(\textcolor{keyword}{this});}
\DoxyCodeLine{01147 }
\DoxyCodeLine{01148     \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = \mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(m\_path);}
\DoxyCodeLine{01149 }
\DoxyCodeLine{01150     \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a61fc160a558f50d75be87c6fae066d57}{setDirtyFlag}}(}
\DoxyCodeLine{01151         \textcolor{keyword}{false});  \textcolor{comment}{// Level is now supposedly loaded from disk}}
\DoxyCodeLine{01152 }
\DoxyCodeLine{01153     \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}} lr(path);  \textcolor{comment}{// May throw}}
\DoxyCodeLine{01154     assert(lr);}
\DoxyCodeLine{01155 }
\DoxyCodeLine{01156     \mbox{\hyperlink{class_t_level_p}{TLevelP}} level = lr-\/>loadInfo();}
\DoxyCodeLine{01157     \textcolor{keywordflow}{if} (level-\/>getFrameCount() > 0) \{}
\DoxyCodeLine{01158       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_image_info}{TImageInfo}} *info = lr-\/>getImageInfo(level-\/>begin()-\/>first);}
\DoxyCodeLine{01159 }
\DoxyCodeLine{01160       \textcolor{keywordflow}{if} (info \&\& info-\/>m\_samplePerPixel >= 5) \{}
\DoxyCodeLine{01161         QString msg = QString(}
\DoxyCodeLine{01162                           \textcolor{stringliteral}{"{}Failed to open \%1.\(\backslash\)nSamples per pixel is more than "{}}}
\DoxyCodeLine{01163                           \textcolor{stringliteral}{"{}4. It may contain more than one alpha channel."{}})}
\DoxyCodeLine{01164                           .arg(QString::fromStdWString(m\_path.getWideString()));}
\DoxyCodeLine{01165         QMessageBox::warning(0, \textcolor{stringliteral}{"{}Image format not supported"{}}, msg);}
\DoxyCodeLine{01166         \textcolor{keywordflow}{return};}
\DoxyCodeLine{01167       \}}
\DoxyCodeLine{01168 }
\DoxyCodeLine{01169       \textcolor{keywordflow}{if} (info) set16BitChannelLevel(info-\/>m\_bitsPerSample == 16);}
\DoxyCodeLine{01170     \}}
\DoxyCodeLine{01171     \textcolor{keywordflow}{if} ((\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() \& FULLCOLOR\_TYPE) \&\& !is16BitChannelLevel())}
\DoxyCodeLine{01172       \mbox{\hyperlink{class_t_xsh_simple_level_ab5634198656dc2ade669fae235bb19c0}{setPalette}}(FullColorPalette::instance()-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}(\mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()));}
\DoxyCodeLine{01173     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01174       \mbox{\hyperlink{class_t_xsh_simple_level_ab5634198656dc2ade669fae235bb19c0}{setPalette}}(level-\/>getPalette());}
\DoxyCodeLine{01175 }
\DoxyCodeLine{01176     \textcolor{keywordflow}{if} (!checkCreatorString(creator = lr-\/>getCreator()))}
\DoxyCodeLine{01177       \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a9c6567a96a32124a23ba050b91a6ff92}{setIsForbidden}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01178     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01179       \textcolor{keywordflow}{for} (TLevel::Iterator it = level-\/>begin(); it != level-\/>end(); it++) \{}
\DoxyCodeLine{01180         m\_renumberTable[it-\/>first] = it-\/>first;  \textcolor{comment}{// Voglio che la tabella}}
\DoxyCodeLine{01181                                                  \textcolor{comment}{// contenga anche i frame che}}
\DoxyCodeLine{01182                                                  \textcolor{comment}{// non vengono caricati}}
\DoxyCodeLine{01183         \textcolor{keywordflow}{if} (!loadingLevelRange.match(it-\/>first)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01184         setFrame(it-\/>first, \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}());}
\DoxyCodeLine{01185       \}}
\DoxyCodeLine{01186 }
\DoxyCodeLine{01187     \mbox{\hyperlink{class_t_xsh_simple_level_aa5ae2d1b425b93a9e37fbfcb324a5db6}{setContentHistory}}(lr-\/>getContentHistory() ? lr-\/>getContentHistory()-\/>clone()}
\DoxyCodeLine{01188                                               : 0);}
\DoxyCodeLine{01189   \}}
\DoxyCodeLine{01190   \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_ab862cec23ee8e4922796cb7f98fcab44}{setCreator}}(creator.toStdString());}
\DoxyCodeLine{01191 }
\DoxyCodeLine{01192   loadingLevelRange.reset();}
\DoxyCodeLine{01193   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() != PLI\_XSHLEVEL) \{}
\DoxyCodeLine{01194     \textcolor{keywordflow}{if} (m\_properties-\/>getImageDpi() == \mbox{\hyperlink{class_t_point_t}{TPointD}}() \&\& !m\_frames.empty()) \{}
\DoxyCodeLine{01195       \mbox{\hyperlink{class_t_dimension_t}{TDimension}} imageRes(0, 0);}
\DoxyCodeLine{01196       \mbox{\hyperlink{class_t_point_t}{TPointD}} imageDpi;}
\DoxyCodeLine{01197 }
\DoxyCodeLine{01198       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_frame_id}{TFrameId}} \&firstFid = \mbox{\hyperlink{class_t_xsh_simple_level_a18862340ce6e813778b40a7913b13252}{getFirstFid}}();}
\DoxyCodeLine{01199       std::string imageId      = getImageId(firstFid);}
\DoxyCodeLine{01200 }
\DoxyCodeLine{01201       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_image_info}{TImageInfo}} *imageInfo =}
\DoxyCodeLine{01202           ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a44231d6948d69f54e9a4315049131086}{getInfo}}(imageId, ImageManager::none, 0);}
\DoxyCodeLine{01203       \textcolor{keywordflow}{if} (imageInfo) \{}
\DoxyCodeLine{01204         imageRes.lx = imageInfo-\/>\mbox{\hyperlink{class_t_image_info_afe82a2118ba303797b2c8a12b47b771d}{m\_lx}};}
\DoxyCodeLine{01205         imageRes.ly = imageInfo-\/>\mbox{\hyperlink{class_t_image_info_affef879628cc3843968c932e706541b6}{m\_ly}};}
\DoxyCodeLine{01206         imageDpi.x  = imageInfo-\/>\mbox{\hyperlink{class_t_image_info_ad66e78a66158fddceaa192d0063f68e8}{m\_dpix}};}
\DoxyCodeLine{01207         imageDpi.y  = imageInfo-\/>\mbox{\hyperlink{class_t_image_info_ad8d3ccb14666297e487e04aa10ab7831}{m\_dpiy}};}
\DoxyCodeLine{01208         m\_properties-\/>setImageDpi(imageDpi);}
\DoxyCodeLine{01209         m\_properties-\/>setImageRes(imageRes);}
\DoxyCodeLine{01210         m\_properties-\/>setBpp(imageInfo-\/>\mbox{\hyperlink{class_t_image_info_aa69221d579b49a27bcd54ffaabb2e8be}{m\_bitsPerSample}} *}
\DoxyCodeLine{01211                              imageInfo-\/>\mbox{\hyperlink{class_t_image_info_a6b58380f718e21dde1b37577090f5c77}{m\_samplePerPixel}});}
\DoxyCodeLine{01212       \}}
\DoxyCodeLine{01213     \}}
\DoxyCodeLine{01214     \mbox{\hyperlink{class_t_xsh_simple_level_a7465cffde15c5f7a8686842c770c2ef6}{setRenumberTable}}();}
\DoxyCodeLine{01215   \}}
\DoxyCodeLine{01216 }
\DoxyCodeLine{01217   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}() \&\& StudioPalette::isEnabled())}
\DoxyCodeLine{01218     StudioPalette::instance()-\/>\mbox{\hyperlink{class_studio_palette_a8174aad5fff24c6a08849628e35c8ec2}{updateLinkedColors}}(\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}());}
\DoxyCodeLine{01219 }
\DoxyCodeLine{01220   \mbox{\hyperlink{class_t_file_path}{TFilePath}} refImgName;}
\DoxyCodeLine{01221   \textcolor{keywordflow}{if} (m\_palette) \{}
\DoxyCodeLine{01222     refImgName           = m\_palette-\/>\mbox{\hyperlink{class_t_palette_a7eda1d7f3a27e8e90d0c12faaedaf5a6}{getRefImgPath}}();}
\DoxyCodeLine{01223     \mbox{\hyperlink{class_t_file_path}{TFilePath}} refImgPath = refImgName;}
\DoxyCodeLine{01224     \textcolor{keywordflow}{if} (refImgName != \mbox{\hyperlink{class_t_file_path}{TFilePath}}() \&\& \mbox{\hyperlink{class_t_file_status}{TFileStatus}}(refImgPath).doesExist()) \{}
\DoxyCodeLine{01225       \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}} lr(refImgPath);}
\DoxyCodeLine{01226       \textcolor{keywordflow}{if} (lr) \{}
\DoxyCodeLine{01227         \mbox{\hyperlink{class_t_level_p}{TLevelP}} level = lr-\/>loadInfo();}
\DoxyCodeLine{01228         \textcolor{keywordflow}{if} (level-\/>getFrameCount() > 0) \{}
\DoxyCodeLine{01229           \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img = lr-\/>getFrameReader(level-\/>begin()-\/>first)-\/>load();}
\DoxyCodeLine{01230           \textcolor{keywordflow}{if} (img \&\& \mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}()) \{}
\DoxyCodeLine{01231             img-\/>\mbox{\hyperlink{class_t_image_a3377c18a849addff5c2cb238176ad04f}{setPalette}}(0);}
\DoxyCodeLine{01232             \mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}()-\/>\mbox{\hyperlink{class_t_palette_a971fd2aac3c14754d6cdcb0679cf6893}{setRefImg}}(img);}
\DoxyCodeLine{01233             std::vector<TFrameId> fids = \mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}()-\/>\mbox{\hyperlink{class_t_palette_aeda302f41529ee532096ecef117bdf7d}{getRefLevelFids}}();}
\DoxyCodeLine{01234             \textcolor{comment}{// in case the fids are specified by user}}
\DoxyCodeLine{01235             \textcolor{keywordflow}{if} (fids.size() > 0) \{}
\DoxyCodeLine{01236               \textcolor{comment}{// check existence of each fid}}
\DoxyCodeLine{01237               \textcolor{keyword}{auto} itr = fids.begin();}
\DoxyCodeLine{01238               \textcolor{keywordflow}{while} (itr != fids.end()) \{}
\DoxyCodeLine{01239                 \textcolor{keywordtype}{bool} found = \textcolor{keyword}{false};}
\DoxyCodeLine{01240                 \textcolor{keywordflow}{for} (TLevel::Iterator it = level-\/>begin(); it != level-\/>end();}
\DoxyCodeLine{01241                      ++it) \{}
\DoxyCodeLine{01242                   \textcolor{keywordflow}{if} (itr-\/>getNumber() == it-\/>first.getNumber()) \{}
\DoxyCodeLine{01243                     found = \textcolor{keyword}{true};}
\DoxyCodeLine{01244                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01245                   \}}
\DoxyCodeLine{01246                 \}}
\DoxyCodeLine{01247                 \textcolor{keywordflow}{if} (!found)  \textcolor{comment}{// remove the fid if it does not exist in the level}}
\DoxyCodeLine{01248                   itr = fids.erase(itr);}
\DoxyCodeLine{01249                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{01250                   itr++;}
\DoxyCodeLine{01251               \}}
\DoxyCodeLine{01252             \}}
\DoxyCodeLine{01253             \textcolor{comment}{// in case the fids are not specified, or all specified fids are}}
\DoxyCodeLine{01254             \textcolor{comment}{// absent}}
\DoxyCodeLine{01255             \textcolor{keywordflow}{if} (fids.size() == 0) \{}
\DoxyCodeLine{01256               \textcolor{keywordflow}{for} (TLevel::Iterator it = level-\/>begin(); it != level-\/>end();}
\DoxyCodeLine{01257                    ++it)}
\DoxyCodeLine{01258                 fids.push\_back(it-\/>first);}
\DoxyCodeLine{01259               \mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}()-\/>\mbox{\hyperlink{class_t_palette_a807070f5c3f7033531f455f08ee489c4}{setRefLevelFids}}(fids, \textcolor{keyword}{false});}
\DoxyCodeLine{01260             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (fids.size() != \mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}()-\/>getRefLevelFids().size())}
\DoxyCodeLine{01261               \mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}()-\/>\mbox{\hyperlink{class_t_palette_a807070f5c3f7033531f455f08ee489c4}{setRefLevelFids}}(fids, \textcolor{keyword}{true});}
\DoxyCodeLine{01262           \}}
\DoxyCodeLine{01263         \}}
\DoxyCodeLine{01264       \}}
\DoxyCodeLine{01265     \}}
\DoxyCodeLine{01266   \}}
\DoxyCodeLine{01267 }
\DoxyCodeLine{01268   \textcolor{comment}{// Load hooks}}
\DoxyCodeLine{01269   \mbox{\hyperlink{class_hook_set}{HookSet}} *hookSet = \mbox{\hyperlink{class_t_xsh_level_a6e1f2998c39699adbe9133f87109a104}{getHookSet}}();}
\DoxyCodeLine{01270   hookSet-\/>\mbox{\hyperlink{class_hook_set_ae71b23ed4cd31ce5a969afe3c4e94096}{clearHooks}}();}
\DoxyCodeLine{01271 }
\DoxyCodeLine{01272   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&hookFile =}
\DoxyCodeLine{01273       \mbox{\hyperlink{class_t_xsh_simple_level_a543f442eca762915046bf52bccc2b4fc}{TXshSimpleLevel::getExistingHookFile}}(\mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()-\/>decodeFilePath(m\_path));}
\DoxyCodeLine{01274 }
\DoxyCodeLine{01275   \textcolor{keywordflow}{if} (!hookFile.isEmpty()) \{}
\DoxyCodeLine{01276     \mbox{\hyperlink{class_t_i_stream}{TIStream}} is(hookFile);}
\DoxyCodeLine{01277     std::string tagName;}
\DoxyCodeLine{01278     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01279       \textcolor{keywordflow}{if} (is.matchTag(tagName) \&\& tagName == \textcolor{stringliteral}{"{}hooks"{}}) hookSet-\/>loadData(is);}
\DoxyCodeLine{01280     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{01281     \}}
\DoxyCodeLine{01282   \}}
\DoxyCodeLine{01283   updateReadOnly();}
\DoxyCodeLine{01284 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00076}{Cleanupped}}, \mbox{\hyperlink{l00290}{Hook\+Set\+::clear\+Hooks()}}, \mbox{\hyperlink{l01231}{Toonz\+Scene\+::decode\+File\+Path()}}, \mbox{\hyperlink{l02321}{get\+Existing\+Hook\+File()}}, \mbox{\hyperlink{l00466}{get\+First\+Fid()}}, \mbox{\hyperlink{l00141}{TXsh\+Level\+::get\+Hook\+Set()}}, \mbox{\hyperlink{l00278}{Image\+Manager\+::get\+Info()}}, \mbox{\hyperlink{l00424}{get\+Palette()}}, \mbox{\hyperlink{l00109}{get\+Properties()}}, \mbox{\hyperlink{l00367}{TPalette\+::get\+Ref\+Img\+Path()}}, \mbox{\hyperlink{l01036}{TPalette\+::get\+Ref\+Level\+Fids()}}, \mbox{\hyperlink{l00087}{TXsh\+Level\+::get\+Scene()}}, \mbox{\hyperlink{l00225}{TFile\+Path\+::get\+Type()}}, \mbox{\hyperlink{l00081}{TXsh\+Level\+::get\+Type()}}, \mbox{\hyperlink{l00053}{TImage\+Info\+::m\+\_\+bits\+Per\+Sample}}, \mbox{\hyperlink{l00039}{TImage\+Info\+::m\+\_\+dpix}}, \mbox{\hyperlink{l00040}{TImage\+Info\+::m\+\_\+dpiy}}, \mbox{\hyperlink{l00046}{TImage\+Info\+::m\+\_\+lx}}, \mbox{\hyperlink{l00047}{TImage\+Info\+::m\+\_\+ly}}, \mbox{\hyperlink{l00052}{TImage\+Info\+::m\+\_\+sample\+Per\+Pixel}}, \mbox{\hyperlink{l01178}{TIStream\+::match\+Tag()}}, \mbox{\hyperlink{l00075}{Scanned}}, \mbox{\hyperlink{l02273}{set\+Content\+History()}}, \mbox{\hyperlink{l00149}{Level\+Properties\+::set\+Creator()}}, \mbox{\hyperlink{l00082}{Level\+Properties\+::set\+Dirty\+Flag()}}, \mbox{\hyperlink{l00163}{Level\+Properties\+::set\+Is\+Forbidden()}}, \mbox{\hyperlink{l00009}{TImage\+::set\+Palette()}}, \mbox{\hyperlink{l00428}{set\+Palette()}}, \mbox{\hyperlink{l01019}{TPalette\+::set\+Ref\+Img()}}, \mbox{\hyperlink{l01028}{TPalette\+::set\+Ref\+Level\+Fids()}}, \mbox{\hyperlink{l00311}{set\+Renumber\+Table()}}, and \mbox{\hyperlink{l00568}{Studio\+Palette\+::update\+Linked\+Colors()}}.



Referenced by \mbox{\hyperlink{l01122}{Toonz\+Scene\+::load\+Level()}}, and \mbox{\hyperlink{l00209}{Scene\+Level\+::save()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_ace19983fd4d21561e5ba21b88efa567a}\label{class_t_xsh_simple_level_ace19983fd4d21561e5ba21b88efa567a}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!load@{load}}
\index{load@{load}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{load()}{load()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::load (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \&}]{f\+Ids }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01288                                                           \{}
\DoxyCodeLine{01289   \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_ab862cec23ee8e4922796cb7f98fcab44}{setCreator}}(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01290   QString creator;}
\DoxyCodeLine{01291   assert(\mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}());}
\DoxyCodeLine{01292   \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a61fc160a558f50d75be87c6fae066d57}{setDirtyFlag}}(\textcolor{keyword}{false});}
\DoxyCodeLine{01293 }
\DoxyCodeLine{01294   m\_isSubsequence = loadingLevelRange.isEnabled();}
\DoxyCodeLine{01295 }
\DoxyCodeLine{01296   \textcolor{comment}{// non e' un livello scan+cleanup}}
\DoxyCodeLine{01297   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = \mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(m\_path);}
\DoxyCodeLine{01298 }
\DoxyCodeLine{01299   \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}} lr(path);}
\DoxyCodeLine{01300   assert(lr);}
\DoxyCodeLine{01301 }
\DoxyCodeLine{01302   \textcolor{keywordflow}{if} (!checkCreatorString(creator = lr-\/>getCreator()))}
\DoxyCodeLine{01303     \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a9c6567a96a32124a23ba050b91a6ff92}{setIsForbidden}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01304   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01305     \textcolor{keywordflow}{if} (fIds.size() != 0) \{}
\DoxyCodeLine{01306       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)fIds.size(); i++) \{}
\DoxyCodeLine{01307         m\_renumberTable[fIds[i]] = fIds[i];}
\DoxyCodeLine{01308         \textcolor{keywordflow}{if} (!loadingLevelRange.match(fIds[i])) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01309         setFrame(fIds[i], \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}());}
\DoxyCodeLine{01310       \}}
\DoxyCodeLine{01311       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_image_info}{TImageInfo}} *info = lr-\/>getImageInfo(fIds[0]);}
\DoxyCodeLine{01312       \textcolor{keywordflow}{if} (info) set16BitChannelLevel(info-\/>m\_bitsPerSample == 16);}
\DoxyCodeLine{01313     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01314       \mbox{\hyperlink{class_t_level_p}{TLevelP}} level = lr-\/>loadInfo();}
\DoxyCodeLine{01315       \textcolor{keywordflow}{for} (TLevel::Iterator it = level-\/>begin(); it != level-\/>end(); it++) \{}
\DoxyCodeLine{01316         m\_renumberTable[it-\/>first] = it-\/>first;}
\DoxyCodeLine{01317         \textcolor{keywordflow}{if} (!loadingLevelRange.match(it-\/>first)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01318         setFrame(it-\/>first, \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}());}
\DoxyCodeLine{01319       \}}
\DoxyCodeLine{01320       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_image_info}{TImageInfo}} *info = lr-\/>getImageInfo(level-\/>begin()-\/>first);}
\DoxyCodeLine{01321       \textcolor{keywordflow}{if} (info) set16BitChannelLevel(info-\/>m\_bitsPerSample == 16);}
\DoxyCodeLine{01322     \}}
\DoxyCodeLine{01323 }
\DoxyCodeLine{01324     \textcolor{keywordflow}{if} ((\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() \& FULLCOLOR\_TYPE) \&\& !is16BitChannelLevel())}
\DoxyCodeLine{01325       \mbox{\hyperlink{class_t_xsh_simple_level_ab5634198656dc2ade669fae235bb19c0}{setPalette}}(FullColorPalette::instance()-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}(\mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()));}
\DoxyCodeLine{01326   \}}
\DoxyCodeLine{01327 }
\DoxyCodeLine{01328   \mbox{\hyperlink{class_t_xsh_simple_level_aa5ae2d1b425b93a9e37fbfcb324a5db6}{setContentHistory}}(lr-\/>getContentHistory() ? lr-\/>getContentHistory()-\/>clone()}
\DoxyCodeLine{01329                                             : 0);}
\DoxyCodeLine{01330 }
\DoxyCodeLine{01331   \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_ab862cec23ee8e4922796cb7f98fcab44}{setCreator}}(creator.toStdString());}
\DoxyCodeLine{01332 }
\DoxyCodeLine{01333   loadingLevelRange.reset();}
\DoxyCodeLine{01334 }
\DoxyCodeLine{01335   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() != PLI\_XSHLEVEL) \{}
\DoxyCodeLine{01336     \textcolor{keywordflow}{if} (m\_properties-\/>getImageDpi() == \mbox{\hyperlink{class_t_point_t}{TPointD}}() \&\& !m\_frames.empty()) \{}
\DoxyCodeLine{01337       \mbox{\hyperlink{class_t_dimension_t}{TDimension}} imageRes(0, 0);}
\DoxyCodeLine{01338       \mbox{\hyperlink{class_t_point_t}{TPointD}} imageDpi;}
\DoxyCodeLine{01339       std::string imageId = getImageId(\mbox{\hyperlink{class_t_xsh_simple_level_a18862340ce6e813778b40a7913b13252}{getFirstFid}}());}
\DoxyCodeLine{01340       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_image_info}{TImageInfo}} *imageInfo =}
\DoxyCodeLine{01341           ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a44231d6948d69f54e9a4315049131086}{getInfo}}(imageId, ImageManager::none, 0);}
\DoxyCodeLine{01342       \textcolor{keywordflow}{if} (imageInfo) \{}
\DoxyCodeLine{01343         imageRes.lx = imageInfo-\/>\mbox{\hyperlink{class_t_image_info_afe82a2118ba303797b2c8a12b47b771d}{m\_lx}};}
\DoxyCodeLine{01344         imageRes.ly = imageInfo-\/>\mbox{\hyperlink{class_t_image_info_affef879628cc3843968c932e706541b6}{m\_ly}};}
\DoxyCodeLine{01345         imageDpi.x  = imageInfo-\/>\mbox{\hyperlink{class_t_image_info_ad66e78a66158fddceaa192d0063f68e8}{m\_dpix}};}
\DoxyCodeLine{01346         imageDpi.y  = imageInfo-\/>\mbox{\hyperlink{class_t_image_info_ad8d3ccb14666297e487e04aa10ab7831}{m\_dpiy}};}
\DoxyCodeLine{01347         m\_properties-\/>setImageDpi(imageDpi);}
\DoxyCodeLine{01348         m\_properties-\/>setImageRes(imageRes);}
\DoxyCodeLine{01349       \}}
\DoxyCodeLine{01350     \}}
\DoxyCodeLine{01351     \mbox{\hyperlink{class_t_xsh_simple_level_a7465cffde15c5f7a8686842c770c2ef6}{setRenumberTable}}();}
\DoxyCodeLine{01352   \}}
\DoxyCodeLine{01353 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_aa19f7a82a829c41f01db03f96d70a4d7}\label{class_t_xsh_simple_level_aa19f7a82a829c41f01db03f96d70a4d7}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!loadAllIconsAndPutInCache@{loadAllIconsAndPutInCache}}
\index{loadAllIconsAndPutInCache@{loadAllIconsAndPutInCache}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{loadAllIconsAndPutInCache()}{loadAllIconsAndPutInCache()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::load\+All\+Icons\+And\+Put\+In\+Cache (\begin{DoxyParamCaption}\item[{bool}]{cache\+Images\+As\+Well }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00627                                                                       \{}
\DoxyCodeLine{00628   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} != TZP\_XSHLEVEL) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00629 }
\DoxyCodeLine{00630   std::vector<TFrameId> fids;}
\DoxyCodeLine{00631   \mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{getFids}}(fids);}
\DoxyCodeLine{00632 }
\DoxyCodeLine{00633   std::vector<std::string> iconIds;}
\DoxyCodeLine{00634 }
\DoxyCodeLine{00635   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)fids.size(); i++) \{}
\DoxyCodeLine{00636     iconIds.push\_back(getIconId(fids[i]));}
\DoxyCodeLine{00637   \}}
\DoxyCodeLine{00638 }
\DoxyCodeLine{00639   ImageManager::instance()-\/>loadAllTlvIconsAndPutInCache(\textcolor{keyword}{this}, fids, iconIds,}
\DoxyCodeLine{00640                                                          cacheImagesAsWell);}
\DoxyCodeLine{00641 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a42dbcc372a4560b9a57da010a9c296a6}\label{class_t_xsh_simple_level_a42dbcc372a4560b9a57da010a9c296a6}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!loadData@{loadData}}
\index{loadData@{loadData}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{loadData()}{loadData()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::load\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_i_stream}{TIStream}} \&}]{is }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Load the level data (i.\+e. name, path, etc. e.\+g. from the .tnz file) 



Implements \mbox{\hyperlink{class_t_xsh_level_aec2c8b50ab4f8d3a43f6f20cbe210940}{TXsh\+Level}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00902                                            \{}
\DoxyCodeLine{00903   std::string tagName;}
\DoxyCodeLine{00904   \textcolor{keywordtype}{bool} flag = \textcolor{keyword}{false};}
\DoxyCodeLine{00905 }
\DoxyCodeLine{00906   \textcolor{keywordtype}{int} type = UNKNOWN\_XSHLEVEL;}
\DoxyCodeLine{00907 }
\DoxyCodeLine{00908   \textcolor{keywordflow}{for} (;;) \{}
\DoxyCodeLine{00909     \textcolor{keywordflow}{if} (is.\mbox{\hyperlink{class_t_i_stream_a5fe7ddb5560e39e0ab4ff57d24926d41}{matchTag}}(tagName)) \{}
\DoxyCodeLine{00910       \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}path"{}}) \{}
\DoxyCodeLine{00911         is >> m\_path;}
\DoxyCodeLine{00912         is.\mbox{\hyperlink{class_t_i_stream_a84110f30d5adcc50d6000e9c99cd4708}{matchEndTag}}();}
\DoxyCodeLine{00913       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}scannedPath"{}}) \{}
\DoxyCodeLine{00914         is >> m\_scannedPath;}
\DoxyCodeLine{00915         is.\mbox{\hyperlink{class_t_i_stream_a84110f30d5adcc50d6000e9c99cd4708}{matchEndTag}}();}
\DoxyCodeLine{00916       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}info"{}}) \{}
\DoxyCodeLine{00917         std::string v;}
\DoxyCodeLine{00918         \textcolor{keywordtype}{double} xdpi = 0, ydpi = 0;}
\DoxyCodeLine{00919         \textcolor{keywordtype}{int} subsampling                      = 1;}
\DoxyCodeLine{00920         \textcolor{keywordtype}{int} doPremultiply                    = 0;}
\DoxyCodeLine{00921         \textcolor{keywordtype}{int} \mbox{\hyperlink{namespace_t_rop_a35fb11523175f84027df48cc51d45d28}{whiteTransp}}                      = 0;}
\DoxyCodeLine{00922         \textcolor{keywordtype}{int} antialiasSoftness                = 0;}
\DoxyCodeLine{00923         \textcolor{keywordtype}{int} isStopMotionLevel                = 0;}
\DoxyCodeLine{00924         \mbox{\hyperlink{class_level_properties_a39428db69e55fec37017a264312b61d2}{LevelProperties::DpiPolicy}} dpiPolicy = LevelProperties::DP\_ImageDpi;}
\DoxyCodeLine{00925         \textcolor{keywordflow}{if} (is.\mbox{\hyperlink{class_t_i_stream_a530540f44de1a1031cebfee0d34ffcfe}{getTagParam}}(\textcolor{stringliteral}{"{}dpix"{}}, v)) xdpi = std::stod(v);}
\DoxyCodeLine{00926         \textcolor{keywordflow}{if} (is.\mbox{\hyperlink{class_t_i_stream_a530540f44de1a1031cebfee0d34ffcfe}{getTagParam}}(\textcolor{stringliteral}{"{}dpiy"{}}, v)) ydpi = std::stod(v);}
\DoxyCodeLine{00927         \textcolor{keywordflow}{if} (xdpi != 0 \&\& ydpi != 0) dpiPolicy = LevelProperties::DP\_CustomDpi;}
\DoxyCodeLine{00928         std::string dpiType = is.\mbox{\hyperlink{class_t_i_stream_a03a74e5481dd5b2d328351c5c4022ab2}{getTagAttribute}}(\textcolor{stringliteral}{"{}dpiType"{}});}
\DoxyCodeLine{00929         \textcolor{keywordflow}{if} (dpiType == \textcolor{stringliteral}{"{}image"{}}) dpiPolicy = LevelProperties::DP\_ImageDpi;}
\DoxyCodeLine{00930         \textcolor{keywordflow}{if} (is.\mbox{\hyperlink{class_t_i_stream_a530540f44de1a1031cebfee0d34ffcfe}{getTagParam}}(\textcolor{stringliteral}{"{}type"{}}, v) \&\& v == \textcolor{stringliteral}{"{}s"{}}) type = TZI\_XSHLEVEL;}
\DoxyCodeLine{00931         \textcolor{keywordflow}{if} (is.\mbox{\hyperlink{class_t_i_stream_a530540f44de1a1031cebfee0d34ffcfe}{getTagParam}}(\textcolor{stringliteral}{"{}subsampling"{}}, v)) subsampling = std::stoi(v);}
\DoxyCodeLine{00932         \textcolor{keywordflow}{if} (is.\mbox{\hyperlink{class_t_i_stream_a530540f44de1a1031cebfee0d34ffcfe}{getTagParam}}(\textcolor{stringliteral}{"{}premultiply"{}}, v)) doPremultiply = std::stoi(v);}
\DoxyCodeLine{00933         \textcolor{keywordflow}{if} (is.\mbox{\hyperlink{class_t_i_stream_a530540f44de1a1031cebfee0d34ffcfe}{getTagParam}}(\textcolor{stringliteral}{"{}antialias"{}}, v)) antialiasSoftness = std::stoi(v);}
\DoxyCodeLine{00934         \textcolor{keywordflow}{if} (is.\mbox{\hyperlink{class_t_i_stream_a530540f44de1a1031cebfee0d34ffcfe}{getTagParam}}(\textcolor{stringliteral}{"{}whiteTransp"{}}, v)) \mbox{\hyperlink{namespace_t_rop_a35fb11523175f84027df48cc51d45d28}{whiteTransp}} = std::stoi(v);}
\DoxyCodeLine{00935         \textcolor{keywordflow}{if} (is.\mbox{\hyperlink{class_t_i_stream_a530540f44de1a1031cebfee0d34ffcfe}{getTagParam}}(\textcolor{stringliteral}{"{}isStopMotionLevel"{}}, v))}
\DoxyCodeLine{00936           isStopMotionLevel = std::stoi(v);}
\DoxyCodeLine{00937 }
\DoxyCodeLine{00938         m\_properties-\/>setDpiPolicy(dpiPolicy);}
\DoxyCodeLine{00939         m\_properties-\/>setDpi(\mbox{\hyperlink{class_t_point_t}{TPointD}}(xdpi, ydpi));}
\DoxyCodeLine{00940         m\_properties-\/>setSubsampling(subsampling);}
\DoxyCodeLine{00941         m\_properties-\/>setDoPremultiply(doPremultiply);}
\DoxyCodeLine{00942         m\_properties-\/>setDoAntialias(antialiasSoftness);}
\DoxyCodeLine{00943         m\_properties-\/>setWhiteTransp(whiteTransp);}
\DoxyCodeLine{00944         m\_properties-\/>setIsStopMotion(isStopMotionLevel);}
\DoxyCodeLine{00945         \textcolor{keywordflow}{if} (isStopMotionLevel == 1) setIsReadOnly(\textcolor{keyword}{true});}
\DoxyCodeLine{00946       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00947         \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}unexpected tag "{}} + tagName);}
\DoxyCodeLine{00948     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00949       \textcolor{keywordflow}{if} (flag) \textcolor{keywordflow}{break};  \textcolor{comment}{// ci puo' essere un solo nome}}
\DoxyCodeLine{00950       flag = \textcolor{keyword}{true};}
\DoxyCodeLine{00951       std::wstring token;}
\DoxyCodeLine{00952       is >> token;}
\DoxyCodeLine{00953       \textcolor{keywordflow}{if} (token == L\textcolor{stringliteral}{"{}\_\_empty"{}}) \{}
\DoxyCodeLine{00954         \textcolor{comment}{// empty = true;}}
\DoxyCodeLine{00955         is >> token;}
\DoxyCodeLine{00956       \}}
\DoxyCodeLine{00957 }
\DoxyCodeLine{00958       \textcolor{keywordflow}{if} (token == L\textcolor{stringliteral}{"{}\_raster"{}})  \textcolor{comment}{// obsoleto (Tab2.2)}}
\DoxyCodeLine{00959       \{}
\DoxyCodeLine{00960         \textcolor{keywordtype}{double} xdpi = 1, ydpi = 1;}
\DoxyCodeLine{00961         is >> xdpi >> ydpi >> m\_name;}
\DoxyCodeLine{00962         setName(m\_name);}
\DoxyCodeLine{00963         type = OVL\_XSHLEVEL;}
\DoxyCodeLine{00964         m\_properties-\/>setDpi(\mbox{\hyperlink{class_t_point_t}{TPointD}}(xdpi, ydpi));}
\DoxyCodeLine{00965         \mbox{\hyperlink{class_t_xsh_level_ad2cb5812d9f36e9f5d570874dad8d3bd}{setType}}(type);}
\DoxyCodeLine{00966         setPath(}
\DoxyCodeLine{00967             \mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}+drawings/"{}}) + (\mbox{\hyperlink{class_t_xsh_level_a3a59fb1bd3261baee4e889a9edbf0ae8}{getName}}() + L\textcolor{stringliteral}{"{}."{}} + ::to\_wstring(\textcolor{stringliteral}{"{}bmp"{}})),}
\DoxyCodeLine{00968             \textcolor{keyword}{true});}
\DoxyCodeLine{00969       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (token == L\textcolor{stringliteral}{"{}\_\_raster"{}})  \textcolor{comment}{// obsoleto (Tab2.2)}}
\DoxyCodeLine{00970       \{}
\DoxyCodeLine{00971         \textcolor{keywordtype}{double} xdpi = 1, ydpi = 1;}
\DoxyCodeLine{00972         std::string extension;}
\DoxyCodeLine{00973         is >> xdpi >> ydpi >> m\_name >> extension;}
\DoxyCodeLine{00974         setName(m\_name);}
\DoxyCodeLine{00975         type = OVL\_XSHLEVEL;}
\DoxyCodeLine{00976         m\_properties-\/>setDpi(\mbox{\hyperlink{class_t_point_t}{TPointD}}(xdpi, ydpi));}
\DoxyCodeLine{00977         \mbox{\hyperlink{class_t_xsh_level_ad2cb5812d9f36e9f5d570874dad8d3bd}{setType}}(type);}
\DoxyCodeLine{00978         setPath(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}+drawings/"{}}) +}
\DoxyCodeLine{00979                     (\mbox{\hyperlink{class_t_xsh_level_a3a59fb1bd3261baee4e889a9edbf0ae8}{getName}}() + L\textcolor{stringliteral}{"{}."{}} + ::to\_wstring(extension)),}
\DoxyCodeLine{00980                 \textcolor{keyword}{true});}
\DoxyCodeLine{00981       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00982         m\_name = token;}
\DoxyCodeLine{00983         setName(m\_name);}
\DoxyCodeLine{00984       \}}
\DoxyCodeLine{00985     \}}
\DoxyCodeLine{00986   \}}
\DoxyCodeLine{00987   \textcolor{keywordflow}{if} (type == UNKNOWN\_XSHLEVEL) \{}
\DoxyCodeLine{00988     std::string ext = m\_path.getType();}
\DoxyCodeLine{00989     \textcolor{keywordflow}{if} (ext == \textcolor{stringliteral}{"{}pli"{}} || ext == \textcolor{stringliteral}{"{}svg"{}})}
\DoxyCodeLine{00990       type = PLI\_XSHLEVEL;}
\DoxyCodeLine{00991     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ext == \textcolor{stringliteral}{"{}tlv"{}} || ext == \textcolor{stringliteral}{"{}tzu"{}} || ext == \textcolor{stringliteral}{"{}tzp"{}} || ext == \textcolor{stringliteral}{"{}tzl"{}})}
\DoxyCodeLine{00992       type = TZP\_XSHLEVEL;}
\DoxyCodeLine{00993     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ext == \textcolor{stringliteral}{"{}tzi"{}})}
\DoxyCodeLine{00994       type = TZI\_XSHLEVEL;}
\DoxyCodeLine{00995     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ext == \textcolor{stringliteral}{"{}mesh"{}})}
\DoxyCodeLine{00996       type = MESH\_XSHLEVEL;}
\DoxyCodeLine{00997     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00998       type = OVL\_XSHLEVEL;}
\DoxyCodeLine{00999   \}}
\DoxyCodeLine{01000   \mbox{\hyperlink{class_t_xsh_level_ad2cb5812d9f36e9f5d570874dad8d3bd}{setType}}(type);}
\DoxyCodeLine{01001 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00115}{TXsh\+Level\+::get\+Name()}}, \mbox{\hyperlink{l01190}{TIStream\+::get\+Tag\+Attribute()}}, \mbox{\hyperlink{class_t_i_stream_a530540f44de1a1031cebfee0d34ffcfe}{TIStream\+::get\+Tag\+Param()}}, \mbox{\hyperlink{l00225}{TFile\+Path\+::get\+Type()}}, \mbox{\hyperlink{l01156}{TIStream\+::match\+End\+Tag()}}, \mbox{\hyperlink{l01178}{TIStream\+::match\+Tag()}}, and \mbox{\hyperlink{l00084}{TXsh\+Level\+::set\+Type()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a3ac0eaee60df10d4e1deee2a5fa274e4}\label{class_t_xsh_simple_level_a3ac0eaee60df10d4e1deee2a5fa274e4}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!makeTlv@{makeTlv}}
\index{makeTlv@{makeTlv}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{makeTlv()}{makeTlv()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::make\+Tlv (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{tlv\+Path }\end{DoxyParamCaption})}

This function will implicitly convert the input path extension to a correctly formatted {\itshape tlv}. Behavior is undefined in case the level is not of fullcolor type.

\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{deprecated__deprecated000015}{Deprecated}}]Function is obviously an implementation detail of the cleanup process. Should be moved there. ~\newline
 \end{DoxyRefDesc}
Transforms the level from {\itshape fullcolor} to tlv (colormap), 
\begin{DoxyCode}{0}
\DoxyCodeLine{01883                                                       \{}
\DoxyCodeLine{01884   \textcolor{keywordtype}{int} ltype = \mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}();}
\DoxyCodeLine{01885 }
\DoxyCodeLine{01886   \textcolor{keywordflow}{if} (!(ltype \& FULLCOLOR\_TYPE)) \{}
\DoxyCodeLine{01887     assert(ltype \& FULLCOLOR\_TYPE);}
\DoxyCodeLine{01888     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01889   \}}
\DoxyCodeLine{01890 }
\DoxyCodeLine{01891   \mbox{\hyperlink{class_t_xsh_level_ad2cb5812d9f36e9f5d570874dad8d3bd}{setType}}(TZP\_XSHLEVEL);}
\DoxyCodeLine{01892 }
\DoxyCodeLine{01893   m\_scannedPath = m\_path;}
\DoxyCodeLine{01894 }
\DoxyCodeLine{01895   assert(tlvPath.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tlv"{}});}
\DoxyCodeLine{01896   m\_path = tlvPath;}
\DoxyCodeLine{01897 }
\DoxyCodeLine{01898   FramesSet::const\_iterator it;}
\DoxyCodeLine{01899   \textcolor{keywordflow}{for} (it = m\_frames.begin(); it != m\_frames.end(); ++it) \{}
\DoxyCodeLine{01900     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = *it;}
\DoxyCodeLine{01901     setFrameStatus(fid, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{Scanned}});}
\DoxyCodeLine{01902     ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a26ff2a78f046da1e442a5c37ab8a075b}{rebind}}(getImageId(fid, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{Scanned}}),}
\DoxyCodeLine{01903                                      getImageId(fid, 0));}
\DoxyCodeLine{01904     ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a26ff2a78f046da1e442a5c37ab8a075b}{rebind}}(getIconId(fid, \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{Scanned}}),}
\DoxyCodeLine{01905                                      getIconId(fid, 0));}
\DoxyCodeLine{01906   \}}
\DoxyCodeLine{01907 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00225}{TFile\+Path\+::get\+Type()}}, \mbox{\hyperlink{l00081}{TXsh\+Level\+::get\+Type()}}, \mbox{\hyperlink{l00237}{Image\+Manager\+::rebind()}}, \mbox{\hyperlink{l00075}{Scanned}}, and \mbox{\hyperlink{l00084}{TXsh\+Level\+::set\+Type()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a5e71ae3a6b6ec37d33dc92a58ddc3b8d}\label{class_t_xsh_simple_level_a5e71ae3a6b6ec37d33dc92a58ddc3b8d}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!mergeTemporaryHookFile@{mergeTemporaryHookFile}}
\index{mergeTemporaryHookFile@{mergeTemporaryHookFile}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{mergeTemporaryHookFile()}{mergeTemporaryHookFile()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::merge\+Temporary\+Hook\+File (\begin{DoxyParamCaption}\item[{unsigned int}]{from,  }\item[{unsigned int}]{to,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{hook\+File }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00243                                                                         \{}
\DoxyCodeLine{00244   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(hookFile).doesExist()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00245 }
\DoxyCodeLine{00246   \mbox{\hyperlink{class_hook_set}{HookSet}} *tempHookSet = \textcolor{keyword}{new} \mbox{\hyperlink{class_hook_set}{HookSet}};}
\DoxyCodeLine{00247   \mbox{\hyperlink{class_t_i_stream}{TIStream}} is(hookFile);}
\DoxyCodeLine{00248   std::string tagName;}
\DoxyCodeLine{00249   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00250     \textcolor{keywordflow}{if} (is.matchTag(tagName) \&\& tagName == \textcolor{stringliteral}{"{}hooks"{}}) tempHookSet-\/>loadData(is);}
\DoxyCodeLine{00251   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00252   \}}
\DoxyCodeLine{00253 }
\DoxyCodeLine{00254   \mbox{\hyperlink{class_hook_set}{HookSet}} *hookSet  = \mbox{\hyperlink{class_t_xsh_level_a6e1f2998c39699adbe9133f87109a104}{getHookSet}}();}
\DoxyCodeLine{00255   \textcolor{keywordtype}{int} tempHookCount = tempHookSet-\/>getHookCount();}
\DoxyCodeLine{00256 }
\DoxyCodeLine{00257   \textcolor{keywordflow}{if} (tempHookCount == 0) \{}
\DoxyCodeLine{00258     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} f = from; f <= to; f++) \{}
\DoxyCodeLine{00259       \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = \mbox{\hyperlink{class_t_xsh_simple_level_a07279a40ffad2c6ccc597c0a418f78fb}{index2fid}}(f);}
\DoxyCodeLine{00260       hookSet-\/>eraseFrame(fid);}
\DoxyCodeLine{00261     \}}
\DoxyCodeLine{00262   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00263     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < tempHookCount; i++) \{}
\DoxyCodeLine{00264       \mbox{\hyperlink{class_hook}{Hook}} *hook    = tempHookSet-\/>getHook(i);}
\DoxyCodeLine{00265       \mbox{\hyperlink{class_hook}{Hook}} *newHook = hookSet-\/>\mbox{\hyperlink{class_hook_set_a7cfe8adfdec6be3d00d7fcad9a633382}{touchHook}}(hook-\/>getId());}
\DoxyCodeLine{00266       newHook-\/>setTrackerObjectId(hook-\/>getTrackerObjectId());}
\DoxyCodeLine{00267       newHook-\/>setTrackerRegionHeight(hook-\/>getTrackerRegionHeight());}
\DoxyCodeLine{00268       newHook-\/>setTrackerRegionWidth(hook-\/>getTrackerRegionWidth());}
\DoxyCodeLine{00269       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} f = from; f <= to; f++) \{}
\DoxyCodeLine{00270         \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = \mbox{\hyperlink{class_t_xsh_simple_level_a07279a40ffad2c6ccc597c0a418f78fb}{index2fid}}(f);}
\DoxyCodeLine{00271         newHook-\/>\mbox{\hyperlink{class_hook_abf17c554743ef71af14c997180965d76}{setAPos}}(fid, hook-\/>getAPos(fid));}
\DoxyCodeLine{00272         newHook-\/>\mbox{\hyperlink{class_hook_a6220249b5fdd24d5e46963a9e385597b}{setBPos}}(fid, hook-\/>getBPos(fid));}
\DoxyCodeLine{00273       \}}
\DoxyCodeLine{00274     \}}
\DoxyCodeLine{00275   \}}
\DoxyCodeLine{00276 }
\DoxyCodeLine{00277   m\_temporaryHookMerged = \textcolor{keyword}{true};}
\DoxyCodeLine{00278 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a8e5daf2f3289f55421557fdbf42c54a6}\label{class_t_xsh_simple_level_a8e5daf2f3289f55421557fdbf42c54a6}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!onPaletteChanged@{onPaletteChanged}}
\index{onPaletteChanged@{onPaletteChanged}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{onPaletteChanged}{onPaletteChanged}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::on\+Palette\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Invoked when some colorstyle has been changed. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00351                                        \{}
\DoxyCodeLine{00352   FramesSet::iterator ft, fEnd = m\_frames.end();}
\DoxyCodeLine{00353   \textcolor{keywordflow}{for} (ft = m\_frames.begin(); ft != fEnd; ++ft) \{}
\DoxyCodeLine{00354     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_frame_id}{TFrameId}} \&fid = *ft;}
\DoxyCodeLine{00355 }
\DoxyCodeLine{00356     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == PLI\_XSHLEVEL) \{}
\DoxyCodeLine{00357       std::string \textcolor{keywordtype}{id} = rasterized(getImageId(fid));}
\DoxyCodeLine{00358       ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a34bdaa25c84cd79a7518dbd233a947f4}{invalidate}}(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00359     \}}
\DoxyCodeLine{00360     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() \& FULLCOLOR\_TYPE) \{}
\DoxyCodeLine{00361       std::string \textcolor{keywordtype}{id} = filled(getImageId(fid));}
\DoxyCodeLine{00362       ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a34bdaa25c84cd79a7518dbd233a947f4}{invalidate}}(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00363     \}}
\DoxyCodeLine{00364 }
\DoxyCodeLine{00365     \mbox{\hyperlink{textureutils_8h_a7eb8d0c536418e650eecde9e9230a602}{texture\_utils::invalidateTexture}}(\textcolor{keyword}{this}, fid);}
\DoxyCodeLine{00366   \}}
\DoxyCodeLine{00367 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00081}{TXsh\+Level\+::get\+Type()}}, and \mbox{\hyperlink{l00426}{Image\+Manager\+::invalidate()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_ab2d4d9c31e14ec66fc92c58a80fba74d}\label{class_t_xsh_simple_level_ab2d4d9c31e14ec66fc92c58a80fba74d}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!removeFiles@{removeFiles}}
\index{removeFiles@{removeFiles}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{removeFiles()}{removeFiles()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::remove\+Files (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Remove files at fp. 


\begin{DoxyCode}{0}
\DoxyCodeLine{02231                                                      \{}
\DoxyCodeLine{02232   TSystem::moveFileOrLevelToRecycleBin(fp);}
\DoxyCodeLine{02233   \textcolor{keywordflow}{if} (fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tlv"{}}) \{}
\DoxyCodeLine{02234     \mbox{\hyperlink{class_t_file_path}{TFilePath}} tpl = fp.\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(\textcolor{stringliteral}{"{}tpl"{}});}
\DoxyCodeLine{02235     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(tpl).doesExist()) TSystem::moveFileToRecycleBin(tpl);}
\DoxyCodeLine{02236   \}}
\DoxyCodeLine{02237 }
\DoxyCodeLine{02238   \textcolor{comment}{// Delete ALL hook files (ie from every Toonz version)}}
\DoxyCodeLine{02239   \textcolor{keyword}{const} QStringList \&hookFiles = \mbox{\hyperlink{class_t_xsh_simple_level_a6dc5e2310d937b00491db968372077dd}{TXshSimpleLevel::getHookFiles}}(fp);}
\DoxyCodeLine{02240 }
\DoxyCodeLine{02241   \textcolor{keywordtype}{int} f, fCount = hookFiles.size();}
\DoxyCodeLine{02242   \textcolor{keywordflow}{for} (f = 0; f != fCount; ++f)}
\DoxyCodeLine{02243     TSystem::moveFileToRecycleBin(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(hookFiles[f].toStdWString()));}
\DoxyCodeLine{02244 }
\DoxyCodeLine{02245   \mbox{\hyperlink{class_t_file_path}{TFilePath}} files = fp.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() + (fp.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}() + \textcolor{stringliteral}{"{}\_files"{}});}
\DoxyCodeLine{02246   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(files).doesExist() \&\& \mbox{\hyperlink{class_t_file_status}{TFileStatus}}(files).isDirectory())}
\DoxyCodeLine{02247     TSystem::rmDirTree(files);}
\DoxyCodeLine{02248 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l02304}{get\+Hook\+Files()}}, \mbox{\hyperlink{l00636}{TFile\+Path\+::get\+Name()}}, \mbox{\hyperlink{l00683}{TFile\+Path\+::get\+Parent\+Dir()}}, \mbox{\hyperlink{l00225}{TFile\+Path\+::get\+Type()}}, and \mbox{\hyperlink{l00774}{TFile\+Path\+::with\+Type()}}.



Referenced by \mbox{\hyperlink{l02210}{rename\+Files()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a1f00c48167fa350ad00beccef0ddff82}\label{class_t_xsh_simple_level_a1f00c48167fa350ad00beccef0ddff82}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!renameFiles@{renameFiles}}
\index{renameFiles@{renameFiles}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{renameFiles()}{renameFiles()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::rename\+Files (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{dst,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{src }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Rename files from src to dst. 


\begin{DoxyCode}{0}
\DoxyCodeLine{02210                                                                             \{}
\DoxyCodeLine{02211   \textcolor{keywordflow}{if} (dst == src) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02212   TSystem::touchParentDir(dst);}
\DoxyCodeLine{02213   \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(dst)) \mbox{\hyperlink{class_t_xsh_simple_level_ab2d4d9c31e14ec66fc92c58a80fba74d}{TXshSimpleLevel::removeFiles}}(dst);}
\DoxyCodeLine{02214   TSystem::renameFileOrLevel\_throw(dst, src);}
\DoxyCodeLine{02215   \textcolor{keywordflow}{if} (dst.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tlv"{}})}
\DoxyCodeLine{02216     TSystem::renameFile(dst.\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(\textcolor{stringliteral}{"{}tpl"{}}), src.\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(\textcolor{stringliteral}{"{}tpl"{}}));}
\DoxyCodeLine{02217 }
\DoxyCodeLine{02218   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&srcHookFile = \mbox{\hyperlink{class_t_xsh_simple_level_a543f442eca762915046bf52bccc2b4fc}{TXshSimpleLevel::getExistingHookFile}}(src);}
\DoxyCodeLine{02219   \textcolor{keywordflow}{if} (!srcHookFile.isEmpty()) \{}
\DoxyCodeLine{02220     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&dstHookFile = \mbox{\hyperlink{class_t_xsh_simple_level_a23704b0d8be9290a8ab9c72c3139958b}{getHookPath}}(dst);}
\DoxyCodeLine{02221     TSystem::renameFile(dstHookFile, srcHookFile);}
\DoxyCodeLine{02222   \}}
\DoxyCodeLine{02223 }
\DoxyCodeLine{02224   \mbox{\hyperlink{class_t_file_path}{TFilePath}} files = src.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() + (src.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}() + \textcolor{stringliteral}{"{}\_files"{}});}
\DoxyCodeLine{02225   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(files).doesExist() \&\& \mbox{\hyperlink{class_t_file_status}{TFileStatus}}(files).isDirectory())}
\DoxyCodeLine{02226     TSystem::renameFile(dst.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() + (dst.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}() + \textcolor{stringliteral}{"{}\_files"{}}), files);}
\DoxyCodeLine{02227 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l02321}{get\+Existing\+Hook\+File()}}, \mbox{\hyperlink{l02289}{get\+Hook\+Path()}}, \mbox{\hyperlink{l00636}{TFile\+Path\+::get\+Name()}}, \mbox{\hyperlink{l00683}{TFile\+Path\+::get\+Parent\+Dir()}}, \mbox{\hyperlink{l00225}{TFile\+Path\+::get\+Type()}}, \mbox{\hyperlink{l02231}{remove\+Files()}}, and \mbox{\hyperlink{l00774}{TFile\+Path\+::with\+Type()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_ad682afea2e389bdc6fa1c09e2b068b48}\label{class_t_xsh_simple_level_ad682afea2e389bdc6fa1c09e2b068b48}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!renumber@{renumber}}
\index{renumber@{renumber}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{renumber()}{renumber()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::renumber (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \&}]{fids }\end{DoxyParamCaption})}

Renumbers the level frames to the specified fids (fids and this-\/\texorpdfstring{$>$}{>}fids() must have the same size). 
\begin{DoxyCode}{0}
\DoxyCodeLine{02091                                                               \{}
\DoxyCodeLine{02092   assert(fids.size() == m\_frames.size());}
\DoxyCodeLine{02093   \textcolor{keywordtype}{int} n = fids.size();}
\DoxyCodeLine{02094 }
\DoxyCodeLine{02095   \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{02096   std::vector<TFrameId> oldFids;}
\DoxyCodeLine{02097   \mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{getFids}}(oldFids);}
\DoxyCodeLine{02098   std::map<TFrameId, TFrameId> table;}
\DoxyCodeLine{02099   std::map<TFrameId, TFrameId> newRenumberTable;}
\DoxyCodeLine{02100   \textcolor{keywordflow}{for} (std::vector<TFrameId>::iterator it = oldFids.begin();}
\DoxyCodeLine{02101        it != oldFids.end(); ++it) \{}
\DoxyCodeLine{02102     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} oldFrameId = *it;}
\DoxyCodeLine{02103     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} newFrameId = fids[i++];}
\DoxyCodeLine{02104     table[oldFrameId]   = newFrameId;}
\DoxyCodeLine{02105     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const} \&\mbox{\hyperlink{class_t_xsh_simple_level_ad682afea2e389bdc6fa1c09e2b068b48}{renumber}} : m\_renumberTable) \{}
\DoxyCodeLine{02106       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level_ad682afea2e389bdc6fa1c09e2b068b48}{renumber}}.second == oldFrameId) \{}
\DoxyCodeLine{02107         newRenumberTable[\mbox{\hyperlink{class_t_xsh_simple_level_ad682afea2e389bdc6fa1c09e2b068b48}{renumber}}.first] = newFrameId;}
\DoxyCodeLine{02108         \textcolor{keywordflow}{break};}
\DoxyCodeLine{02109       \}}
\DoxyCodeLine{02110     \}}
\DoxyCodeLine{02111   \}}
\DoxyCodeLine{02112   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const} \&\mbox{\hyperlink{class_t_xsh_simple_level_ad682afea2e389bdc6fa1c09e2b068b48}{renumber}} : newRenumberTable) \{}
\DoxyCodeLine{02113     m\_renumberTable[\mbox{\hyperlink{class_t_xsh_simple_level_ad682afea2e389bdc6fa1c09e2b068b48}{renumber}}.first] = \mbox{\hyperlink{class_t_xsh_simple_level_ad682afea2e389bdc6fa1c09e2b068b48}{renumber}}.second;}
\DoxyCodeLine{02114   \}}
\DoxyCodeLine{02115 }
\DoxyCodeLine{02116   m\_frames.clear();}
\DoxyCodeLine{02117   \textcolor{keywordflow}{for} (i = 0; i < n; ++i) \{}
\DoxyCodeLine{02118     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid(fids[i]);}
\DoxyCodeLine{02119     assert(m\_frames.count(fid) == 0);}
\DoxyCodeLine{02120     m\_frames.insert(fid);}
\DoxyCodeLine{02121   \}}
\DoxyCodeLine{02122 }
\DoxyCodeLine{02123   \mbox{\hyperlink{class_image_manager}{ImageManager}} *im = ImageManager::instance();}
\DoxyCodeLine{02124   \mbox{\hyperlink{class_t_image_cache}{TImageCache}} *ic  = TImageCache::instance();}
\DoxyCodeLine{02125 }
\DoxyCodeLine{02126   std::map<TFrameId, TFrameId>::iterator jt;}
\DoxyCodeLine{02127 }
\DoxyCodeLine{02128   \{}
\DoxyCodeLine{02129     \textcolor{keywordflow}{for} (i = 0, jt = table.begin(); jt != table.end(); ++jt, ++i) \{}
\DoxyCodeLine{02130       std::string Id = getImageId(jt-\/>first);}
\DoxyCodeLine{02131       \mbox{\hyperlink{struct_image_loader_1_1_build_ext_data}{ImageLoader::BuildExtData}} extData(\textcolor{keyword}{this}, jt-\/>first);}
\DoxyCodeLine{02132       \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img = im-\/>\mbox{\hyperlink{class_image_manager_a534298d4e7278e9e42764965e2389576}{getImage}}(Id, ImageManager::none, \&extData);}
\DoxyCodeLine{02133       ic-\/>\mbox{\hyperlink{class_t_image_cache_a124eae4cf370288f42c22b3477cb5163}{add}}(getIconId(jt-\/>first), img, \textcolor{keyword}{false});}
\DoxyCodeLine{02134       im-\/>\mbox{\hyperlink{class_image_manager_a26ff2a78f046da1e442a5c37ab8a075b}{rebind}}(Id, \textcolor{stringliteral}{"{}\string^"{}} + std::to\_string(i));}
\DoxyCodeLine{02135       ic-\/>\mbox{\hyperlink{class_t_image_cache_a4a55f603009d6f1d884f9d1afee94178}{remap}}(\textcolor{stringliteral}{"{}\string^icon:"{}} + std::to\_string(i), getIconId(jt-\/>first));}
\DoxyCodeLine{02136     \}}
\DoxyCodeLine{02137 }
\DoxyCodeLine{02138     \textcolor{keywordflow}{for} (i = 0, jt = table.begin(); jt != table.end(); ++jt, ++i) \{}
\DoxyCodeLine{02139       std::string Id = getImageId(jt-\/>second);}
\DoxyCodeLine{02140       im-\/>\mbox{\hyperlink{class_image_manager_a26ff2a78f046da1e442a5c37ab8a075b}{rebind}}(\textcolor{stringliteral}{"{}\string^"{}} + std::to\_string(i), Id);}
\DoxyCodeLine{02141       ic-\/>\mbox{\hyperlink{class_t_image_cache_a4a55f603009d6f1d884f9d1afee94178}{remap}}(getIconId(jt-\/>second), \textcolor{stringliteral}{"{}\string^icon:"{}} + std::to\_string(i));}
\DoxyCodeLine{02142       im-\/>renumber(Id, jt-\/>second);}
\DoxyCodeLine{02143     \}}
\DoxyCodeLine{02144   \}}
\DoxyCodeLine{02145 }
\DoxyCodeLine{02146   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == PLI\_XSHLEVEL) \{}
\DoxyCodeLine{02147     \textcolor{keywordflow}{for} (i = 0, jt = table.begin(); jt != table.end(); ++jt, ++i) \{}
\DoxyCodeLine{02148       \textcolor{keyword}{const} std::string \&\textcolor{keywordtype}{id} = rasterized(getImageId(jt-\/>first));}
\DoxyCodeLine{02149       \textcolor{keywordflow}{if} (im-\/>\mbox{\hyperlink{class_image_manager_a53cd4c44dd7cbfdf435cb36d42d140fd}{isBound}}(\textcolor{keywordtype}{id})) im-\/>\mbox{\hyperlink{class_image_manager_a26ff2a78f046da1e442a5c37ab8a075b}{rebind}}(\textcolor{keywordtype}{id}, rasterized(\textcolor{stringliteral}{"{}\string^"{}} + std::to\_string(i)));}
\DoxyCodeLine{02150     \}}
\DoxyCodeLine{02151     \textcolor{keywordflow}{for} (i = 0, jt = table.begin(); jt != table.end(); ++jt, ++i) \{}
\DoxyCodeLine{02152       \textcolor{keyword}{const} std::string \&\textcolor{keywordtype}{id} = rasterized(\textcolor{stringliteral}{"{}\string^"{}} + std::to\_string(i));}
\DoxyCodeLine{02153       \textcolor{keywordflow}{if} (im-\/>\mbox{\hyperlink{class_image_manager_a53cd4c44dd7cbfdf435cb36d42d140fd}{isBound}}(\textcolor{keywordtype}{id})) im-\/>\mbox{\hyperlink{class_image_manager_a26ff2a78f046da1e442a5c37ab8a075b}{rebind}}(\textcolor{keywordtype}{id}, rasterized(getImageId(jt-\/>second)));}
\DoxyCodeLine{02154     \}}
\DoxyCodeLine{02155   \}}
\DoxyCodeLine{02156 }
\DoxyCodeLine{02157   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() \& FULLCOLOR\_TYPE) \{}
\DoxyCodeLine{02158     \textcolor{keywordflow}{for} (i = 0, jt = table.begin(); jt != table.end(); ++jt, ++i) \{}
\DoxyCodeLine{02159       \textcolor{keyword}{const} std::string \&\textcolor{keywordtype}{id} = filled(getImageId(jt-\/>first));}
\DoxyCodeLine{02160       \textcolor{keywordflow}{if} (im-\/>\mbox{\hyperlink{class_image_manager_a53cd4c44dd7cbfdf435cb36d42d140fd}{isBound}}(\textcolor{keywordtype}{id})) im-\/>\mbox{\hyperlink{class_image_manager_a26ff2a78f046da1e442a5c37ab8a075b}{rebind}}(\textcolor{keywordtype}{id}, filled(\textcolor{stringliteral}{"{}\string^"{}} + std::to\_string(i)));}
\DoxyCodeLine{02161     \}}
\DoxyCodeLine{02162     \textcolor{keywordflow}{for} (i = 0, jt = table.begin(); jt != table.end(); ++jt, ++i) \{}
\DoxyCodeLine{02163       \textcolor{keyword}{const} std::string \&\textcolor{keywordtype}{id} = filled(\textcolor{stringliteral}{"{}\string^"{}} + std::to\_string(i));}
\DoxyCodeLine{02164       \textcolor{keywordflow}{if} (im-\/>\mbox{\hyperlink{class_image_manager_a53cd4c44dd7cbfdf435cb36d42d140fd}{isBound}}(\textcolor{keywordtype}{id})) im-\/>\mbox{\hyperlink{class_image_manager_a26ff2a78f046da1e442a5c37ab8a075b}{rebind}}(\textcolor{keywordtype}{id}, filled(getImageId(jt-\/>second)));}
\DoxyCodeLine{02165     \}}
\DoxyCodeLine{02166   \}}
\DoxyCodeLine{02167 }
\DoxyCodeLine{02168   m\_properties-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{02169 }
\DoxyCodeLine{02170   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_a6e1f2998c39699adbe9133f87109a104}{getHookSet}}()) \mbox{\hyperlink{class_t_xsh_level_a6e1f2998c39699adbe9133f87109a104}{getHookSet}}()-\/>renumber(table);}
\DoxyCodeLine{02171 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01153}{TImage\+Cache\+::add()}}, \mbox{\hyperlink{l00448}{get\+Fids()}}, \mbox{\hyperlink{l00141}{TXsh\+Level\+::get\+Hook\+Set()}}, \mbox{\hyperlink{l00310}{Image\+Manager\+::get\+Image()}}, \mbox{\hyperlink{l00081}{TXsh\+Level\+::get\+Type()}}, \mbox{\hyperlink{l00230}{Image\+Manager\+::is\+Bound()}}, \mbox{\hyperlink{l00237}{Image\+Manager\+::rebind()}}, \mbox{\hyperlink{l01317}{TImage\+Cache\+::remap()}}, and \mbox{\hyperlink{l02091}{renumber()}}.



Referenced by \mbox{\hyperlink{l02091}{renumber()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a7c2de43cb6feaf09e535ea34c0c373ea}\label{class_t_xsh_simple_level_a7c2de43cb6feaf09e535ea34c0c373ea}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!renumberTable@{renumberTable}}
\index{renumberTable@{renumberTable}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{renumberTable()}{renumberTable()}}
{\footnotesize\ttfamily const std\+::map$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}}, \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \& TXsh\+Simple\+Level\+::renumber\+Table (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00302                                                           \{}
\DoxyCodeLine{00303     \textcolor{keywordflow}{return} m\_renumberTable;}
\DoxyCodeLine{00304   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a5ceff3b4f997fbe62be18948fc893404}\label{class_t_xsh_simple_level_a5ceff3b4f997fbe62be18948fc893404}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!save@{save}}
\index{save@{save}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{save()}{save()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::save (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Saves the level to disk, with the same path deduction from \mbox{\hyperlink{class_t_xsh_simple_level_a0020922626c177cd3134a05e274aecee}{load()}} 



Implements \mbox{\hyperlink{class_t_xsh_level_adcc40df0ea3e4d51a59e58c029675968}{TXsh\+Level}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01404                            \{}
\DoxyCodeLine{01405   assert(\mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}());}
\DoxyCodeLine{01406   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = \mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(m\_path);}
\DoxyCodeLine{01407   TSystem::outputDebug(\textcolor{stringliteral}{"{}save() : "{}} + ::to\_string(m\_path) + \textcolor{stringliteral}{"{} = "{}} +}
\DoxyCodeLine{01408                        ::to\_string(path) + \textcolor{stringliteral}{"{}\(\backslash\)n"{}});}
\DoxyCodeLine{01409 }
\DoxyCodeLine{01410   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>getDirtyFlag() == \textcolor{keyword}{false} \&\&}
\DoxyCodeLine{01411       \mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}()-\/>getDirtyFlag() == \textcolor{keyword}{false} \&\&}
\DoxyCodeLine{01412       TSystem::doesExistFileOrLevel(path))}
\DoxyCodeLine{01413     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01414 }
\DoxyCodeLine{01415   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(path.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}()).doesExist()) \{}
\DoxyCodeLine{01416     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01417       TSystem::mkDir(path.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}());}
\DoxyCodeLine{01418     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{01419     \}}
\DoxyCodeLine{01420   \}}
\DoxyCodeLine{01421   \mbox{\hyperlink{class_t_xsh_simple_level_a5ceff3b4f997fbe62be18948fc893404}{save}}(path);}
\DoxyCodeLine{01422 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01231}{Toonz\+Scene\+::decode\+File\+Path()}}, \mbox{\hyperlink{l00424}{get\+Palette()}}, \mbox{\hyperlink{l00683}{TFile\+Path\+::get\+Parent\+Dir()}}, \mbox{\hyperlink{l00109}{get\+Properties()}}, \mbox{\hyperlink{l00087}{TXsh\+Level\+::get\+Scene()}}, and \mbox{\hyperlink{l01404}{save()}}.



Referenced by \mbox{\hyperlink{l00209}{Scene\+Level\+::save()}}, and \mbox{\hyperlink{l01404}{save()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a19f8349ba4f9da7093bace45045245bc}\label{class_t_xsh_simple_level_a19f8349ba4f9da7093bace45045245bc}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!save@{save}}
\index{save@{save}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{save()}{save()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::save (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{old\+Fp = {\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}}()},  }\item[{bool}]{overwrite\+Palette = {\ttfamily true} }\end{DoxyParamCaption})}

Save the level in the specified fp. The old\+Fp is used when the current scene path change... 
\begin{DoxyCode}{0}
\DoxyCodeLine{01469                                                   \{}
\DoxyCodeLine{01470   \mbox{\hyperlink{class_t_file_path}{TFilePath}} dOldPath =}
\DoxyCodeLine{01471       (!oldFp.isEmpty()) ? oldFp : \mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(m\_path);}
\DoxyCodeLine{01472 }
\DoxyCodeLine{01473   \mbox{\hyperlink{class_t_file_path}{TFilePath}} dDstPath = \mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(fp);}
\DoxyCodeLine{01474   \textcolor{keywordflow}{if} (!TSystem::touchParentDir(dDstPath))}
\DoxyCodeLine{01475     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_system_exception}{TSystemException}}(}
\DoxyCodeLine{01476         dDstPath,}
\DoxyCodeLine{01477         \textcolor{stringliteral}{"{}The level cannot be saved: failed to access the target folder."{}});}
\DoxyCodeLine{01478 }
\DoxyCodeLine{01479   \textcolor{comment}{// backup}}
\DoxyCodeLine{01480   \textcolor{keywordflow}{if} (Preferences::instance()-\/>isBackupEnabled() \&\& dOldPath == dDstPath \&\&}
\DoxyCodeLine{01481       TSystem::doesExistFileOrLevel(dDstPath) \&\&}
\DoxyCodeLine{01482       !\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>isStopMotionLevel())}
\DoxyCodeLine{01483     saveBackup(dDstPath);}
\DoxyCodeLine{01484 }
\DoxyCodeLine{01485   \textcolor{keywordflow}{if} (isAreadOnlyLevel(dDstPath)) \{}
\DoxyCodeLine{01486     \textcolor{keywordflow}{if} (m\_editableRange.empty() \&\&}
\DoxyCodeLine{01487         !m\_temporaryHookMerged)  \textcolor{comment}{// file internally locked}}
\DoxyCodeLine{01488       \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_system_exception}{TSystemException}}(}
\DoxyCodeLine{01489           dDstPath, \textcolor{stringliteral}{"{}The level cannot be saved: it is a read only level."{}});}
\DoxyCodeLine{01490     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() != OVL\_XSHLEVEL) \{}
\DoxyCodeLine{01491       \textcolor{comment}{// file partially unlocked}}
\DoxyCodeLine{01492       std::wstring fileName = getEditableFileName();}
\DoxyCodeLine{01493       assert(!fileName.empty());}
\DoxyCodeLine{01494 }
\DoxyCodeLine{01495       \mbox{\hyperlink{class_t_file_path}{TFilePath}} app = dDstPath.\mbox{\hyperlink{class_t_file_path_a3ebf9ced558cfef97a60bba536b23c6f}{withName}}(fileName).\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(dDstPath.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}());}
\DoxyCodeLine{01496 }
\DoxyCodeLine{01497       \textcolor{comment}{// removes old files}}
\DoxyCodeLine{01498       \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(app)) TSystem::removeFileOrLevel(app);}
\DoxyCodeLine{01499 }
\DoxyCodeLine{01500       TFilePathSet oldFilePaths;}
\DoxyCodeLine{01501       \mbox{\hyperlink{class_t_xsh_simple_level_aa3761996a872dfbfd19d13b63ad336f6}{getFiles}}(app, oldFilePaths);}
\DoxyCodeLine{01502 }
\DoxyCodeLine{01503       TFilePathSet::iterator it;}
\DoxyCodeLine{01504       \textcolor{keywordflow}{for} (it = oldFilePaths.begin(); it != oldFilePaths.end(); ++it) \{}
\DoxyCodeLine{01505         \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(*it)) TSystem::removeFileOrLevel(*it);}
\DoxyCodeLine{01506       \}}
\DoxyCodeLine{01507 }
\DoxyCodeLine{01508       \textcolor{comment}{// save new files}}
\DoxyCodeLine{01509       \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_xsh_simple_level_ac40b0fd6e8a358444c0e18cd5eb8fc63}{TXshSimpleLevel}};}
\DoxyCodeLine{01510       sl-\/>\mbox{\hyperlink{class_t_xsh_level_a3c0052e5b6496d5bd9c697f678761e5c}{setScene}}(\mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}());}
\DoxyCodeLine{01511       sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ab5634198656dc2ade669fae235bb19c0}{setPalette}}(\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}());}
\DoxyCodeLine{01512       sl-\/>setPath(\mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()-\/>codeFilePath(app));}
\DoxyCodeLine{01513       sl-\/>\mbox{\hyperlink{class_t_xsh_level_ad2cb5812d9f36e9f5d570874dad8d3bd}{setType}}(\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}());}
\DoxyCodeLine{01514       sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a2d43337766628739707849f8808bf300}{setDirtyFlag}}(getDirtyFlag());}
\DoxyCodeLine{01515       sl-\/>addRef();  \textcolor{comment}{// Needed so levelUpdater doesn't destroy it right away}}
\DoxyCodeLine{01516                      \textcolor{comment}{// when its done writing}}
\DoxyCodeLine{01517 }
\DoxyCodeLine{01518       std::set<TFrameId>::iterator eft, efEnd = m\_editableRange.end();}
\DoxyCodeLine{01519       \textcolor{keywordflow}{for} (eft = m\_editableRange.begin(); eft != efEnd; ++eft) \{}
\DoxyCodeLine{01520         \textcolor{keyword}{const} \mbox{\hyperlink{class_t_frame_id}{TFrameId}} \&fid = *eft;}
\DoxyCodeLine{01521         sl-\/>setFrame(fid, getFrame(fid, \textcolor{keyword}{false}));}
\DoxyCodeLine{01522       \}}
\DoxyCodeLine{01523 }
\DoxyCodeLine{01524       \textcolor{comment}{// Copy hooks}}
\DoxyCodeLine{01525       \mbox{\hyperlink{class_hook_set}{HookSet}} *hookSet = sl-\/>\mbox{\hyperlink{class_t_xsh_level_a6e1f2998c39699adbe9133f87109a104}{getHookSet}}();}
\DoxyCodeLine{01526       *hookSet         = *\mbox{\hyperlink{class_t_xsh_level_a6e1f2998c39699adbe9133f87109a104}{getHookSet}}();}
\DoxyCodeLine{01527 }
\DoxyCodeLine{01528       FramesSet::iterator ft, fEnd = m\_frames.end();}
\DoxyCodeLine{01529       \textcolor{keywordflow}{for} (ft = m\_frames.begin(); ft != fEnd; ++ft) \{}
\DoxyCodeLine{01530         \textcolor{keyword}{const} \mbox{\hyperlink{class_t_frame_id}{TFrameId}} \&fid = *ft;}
\DoxyCodeLine{01531 }
\DoxyCodeLine{01532         \textcolor{keywordflow}{if} (m\_editableRange.find(fid) == m\_editableRange.end())}
\DoxyCodeLine{01533           hookSet-\/>eraseFrame(fid);}
\DoxyCodeLine{01534       \}}
\DoxyCodeLine{01535 }
\DoxyCodeLine{01536       sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a7465cffde15c5f7a8686842c770c2ef6}{setRenumberTable}}();}
\DoxyCodeLine{01537 }
\DoxyCodeLine{01538       \textcolor{comment}{// Copy mesh level}}
\DoxyCodeLine{01539       sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a5ceff3b4f997fbe62be18948fc893404}{save}}(app);}
\DoxyCodeLine{01540 }
\DoxyCodeLine{01541 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{01542 }
\DoxyCodeLine{01543       \textcolor{comment}{// hides files}}
\DoxyCodeLine{01544       oldFilePaths.clear();}
\DoxyCodeLine{01545 }
\DoxyCodeLine{01546       \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(app)) TSystem::hideFileOrLevel(app);}
\DoxyCodeLine{01547 }
\DoxyCodeLine{01548       \mbox{\hyperlink{class_t_xsh_simple_level_aa3761996a872dfbfd19d13b63ad336f6}{getFiles}}(app, oldFilePaths);}
\DoxyCodeLine{01549 }
\DoxyCodeLine{01550       \textcolor{keywordflow}{for} (it = oldFilePaths.begin(); it != oldFilePaths.end(); ++it) \{}
\DoxyCodeLine{01551         \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(*it)) TSystem::hideFileOrLevel(*it);}
\DoxyCodeLine{01552       \}}
\DoxyCodeLine{01553 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01554       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01555     \}}
\DoxyCodeLine{01556   \}}
\DoxyCodeLine{01557 }
\DoxyCodeLine{01558   \textcolor{keywordflow}{if} (dOldPath != dDstPath \&\& m\_path != \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \{}
\DoxyCodeLine{01559     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&dSrcPath = dOldPath;}
\DoxyCodeLine{01560 }
\DoxyCodeLine{01561     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01562       \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(dSrcPath)) \{}
\DoxyCodeLine{01563         \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(dDstPath))}
\DoxyCodeLine{01564           TSystem::removeFileOrLevel(dDstPath);}
\DoxyCodeLine{01565 }
\DoxyCodeLine{01566         \mbox{\hyperlink{class_t_xsh_simple_level_a821df490f42bb53d419ed4d3c4b97972}{copyFiles}}(dDstPath, dSrcPath);}
\DoxyCodeLine{01567       \}}
\DoxyCodeLine{01568     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{01569     \}}
\DoxyCodeLine{01570   \}}
\DoxyCodeLine{01571   \textcolor{comment}{// when saving the level palette with global name}}
\DoxyCodeLine{01572   \textcolor{keywordflow}{if} (overwritePalette \&\& \mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == TZP\_XSHLEVEL \&\& \mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}() \&\&}
\DoxyCodeLine{01573       \mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}()-\/>getGlobalName() != L\textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{01574     overwritePalette      = \textcolor{keyword}{false};}
\DoxyCodeLine{01575     \mbox{\hyperlink{class_t_file_path}{TFilePath}} palettePath = dDstPath.withNoFrame().\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(\textcolor{stringliteral}{"{}tpl"{}});}
\DoxyCodeLine{01576     StudioPalette::instance()-\/>save(palettePath, \mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}());}
\DoxyCodeLine{01577     \mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}()-\/>\mbox{\hyperlink{class_t_palette_a382fa102abee4e69e386cb5a4d8d5184}{setDirtyFlag}}(\textcolor{keyword}{false});}
\DoxyCodeLine{01578   \}}
\DoxyCodeLine{01579 }
\DoxyCodeLine{01580   saveSimpleLevel(dDstPath, overwritePalette);}
\DoxyCodeLine{01581 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l02175}{copy\+Files()}}, \mbox{\hyperlink{l01231}{Toonz\+Scene\+::decode\+File\+Path()}}, \mbox{\hyperlink{l02252}{get\+Files()}}, \mbox{\hyperlink{l00141}{TXsh\+Level\+::get\+Hook\+Set()}}, \mbox{\hyperlink{l00424}{get\+Palette()}}, \mbox{\hyperlink{l00109}{get\+Properties()}}, \mbox{\hyperlink{l00087}{TXsh\+Level\+::get\+Scene()}}, \mbox{\hyperlink{l00225}{TFile\+Path\+::get\+Type()}}, \mbox{\hyperlink{l00081}{TXsh\+Level\+::get\+Type()}}, \mbox{\hyperlink{l01404}{save()}}, \mbox{\hyperlink{l00240}{TPalette\+::set\+Dirty\+Flag()}}, \mbox{\hyperlink{l00320}{set\+Dirty\+Flag()}}, \mbox{\hyperlink{l00428}{set\+Palette()}}, \mbox{\hyperlink{l00311}{set\+Renumber\+Table()}}, \mbox{\hyperlink{l00024}{TXsh\+Level\+::set\+Scene()}}, \mbox{\hyperlink{l00084}{TXsh\+Level\+::set\+Type()}}, \mbox{\hyperlink{l00190}{TXsh\+Simple\+Level()}}, \mbox{\hyperlink{l00802}{TFile\+Path\+::with\+Name()}}, and \mbox{\hyperlink{l00774}{TFile\+Path\+::with\+Type()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a62a0a3eb6da8cbc0a47394e6a0004d5c}\label{class_t_xsh_simple_level_a62a0a3eb6da8cbc0a47394e6a0004d5c}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!saveData@{saveData}}
\index{saveData@{saveData}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{saveData()}{saveData()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::save\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_o_stream}{TOStream}} \&}]{os }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Save the level data (i.\+e. name, path, etc. e.\+g. to the .tnz file) 



Implements \mbox{\hyperlink{class_t_xsh_level_aef80cf0a64bcd8bebe128dc8144afff6}{TXsh\+Level}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01364                                            \{}
\DoxyCodeLine{01365   os << m\_name;}
\DoxyCodeLine{01366 }
\DoxyCodeLine{01367   std::map<std::string, std::string> attr;}
\DoxyCodeLine{01368   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>getDpiPolicy() == LevelProperties::DP\_CustomDpi) \{}
\DoxyCodeLine{01369     \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi = \mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a744228a911310bc962ce76315c9ab2b1}{getDpi}}();}
\DoxyCodeLine{01370     \textcolor{keywordflow}{if} (dpi.x != 0 \&\& dpi.y != 0) \{}
\DoxyCodeLine{01371       attr[\textcolor{stringliteral}{"{}dpix"{}}] = std::to\_string(dpi.x);}
\DoxyCodeLine{01372       attr[\textcolor{stringliteral}{"{}dpiy"{}}] = std::to\_string(dpi.y);}
\DoxyCodeLine{01373     \}}
\DoxyCodeLine{01374   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01375     attr[\textcolor{stringliteral}{"{}dpiType"{}}] = \textcolor{stringliteral}{"{}image"{}};}
\DoxyCodeLine{01376   \}}
\DoxyCodeLine{01377 }
\DoxyCodeLine{01378   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>getSubsampling() != 1) \{}
\DoxyCodeLine{01379     attr[\textcolor{stringliteral}{"{}subsampling"{}}] = std::to\_string(\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>getSubsampling());}
\DoxyCodeLine{01380   \}}
\DoxyCodeLine{01381   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>antialiasSoftness() > 0) \{}
\DoxyCodeLine{01382     attr[\textcolor{stringliteral}{"{}antialias"{}}] = std::to\_string(\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>antialiasSoftness());}
\DoxyCodeLine{01383   \}}
\DoxyCodeLine{01384   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>doPremultiply()) \{}
\DoxyCodeLine{01385     attr[\textcolor{stringliteral}{"{}premultiply"{}}] = std::to\_string(\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>doPremultiply());}
\DoxyCodeLine{01386   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{namespace_t_rop_a35fb11523175f84027df48cc51d45d28}{whiteTransp}}()) \{}
\DoxyCodeLine{01387     attr[\textcolor{stringliteral}{"{}whiteTransp"{}}] = std::to\_string(\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{namespace_t_rop_a35fb11523175f84027df48cc51d45d28}{whiteTransp}}());}
\DoxyCodeLine{01388   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>isStopMotionLevel()) \{}
\DoxyCodeLine{01389     attr[\textcolor{stringliteral}{"{}isStopMotionLevel"{}}] =}
\DoxyCodeLine{01390         std::to\_string(\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>isStopMotionLevel());}
\DoxyCodeLine{01391   \}}
\DoxyCodeLine{01392 }
\DoxyCodeLine{01393   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} == TZI\_XSHLEVEL) attr[\textcolor{stringliteral}{"{}type"{}}] = \textcolor{stringliteral}{"{}s"{}};}
\DoxyCodeLine{01394 }
\DoxyCodeLine{01395   os.\mbox{\hyperlink{class_t_o_stream_a4568ce0cc2ace90c334f96eddcd11f17}{openCloseChild}}(\textcolor{stringliteral}{"{}info"{}}, attr);}
\DoxyCodeLine{01396 }
\DoxyCodeLine{01397   os.\mbox{\hyperlink{class_t_o_stream_a9cd1359e6b21d85786708c7e680756d1}{child}}(\textcolor{stringliteral}{"{}path"{}}) << m\_path;  \textcolor{comment}{// fp;}}
\DoxyCodeLine{01398   \textcolor{keywordflow}{if} (m\_scannedPath != \mbox{\hyperlink{class_t_file_path}{TFilePath}}())}
\DoxyCodeLine{01399     os.\mbox{\hyperlink{class_t_o_stream_a9cd1359e6b21d85786708c7e680756d1}{child}}(\textcolor{stringliteral}{"{}scannedPath"{}}) << m\_scannedPath;  \textcolor{comment}{// fp;}}
\DoxyCodeLine{01400 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00482}{TOStream\+::child()}}, \mbox{\hyperlink{l00068}{Level\+Properties\+::get\+Dpi()}}, \mbox{\hyperlink{l00109}{get\+Properties()}}, \mbox{\hyperlink{l00059}{TXsh\+Level\+::m\+\_\+type}}, and \mbox{\hyperlink{l00535}{TOStream\+::open\+Close\+Child()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_ac2f74e888a0c939cd513bff79447481b}\label{class_t_xsh_simple_level_ac2f74e888a0c939cd513bff79447481b}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!set16BitChannelLevel@{set16BitChannelLevel}}
\index{set16BitChannelLevel@{set16BitChannelLevel}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{set16BitChannelLevel()}{set16BitChannelLevel()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::set16\+Bit\+Channel\+Level (\begin{DoxyParamCaption}\item[{bool}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00101                                         \{}
\DoxyCodeLine{00102     m\_16BitChannelLevel = (value \&\& \mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == OVL\_XSHLEVEL);}
\DoxyCodeLine{00103   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a403c0b6e8da4e6cb1f0d7f9b761d40e6}\label{class_t_xsh_simple_level_a403c0b6e8da4e6cb1f0d7f9b761d40e6}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!setCompatibilityMasks@{setCompatibilityMasks}}
\index{setCompatibilityMasks@{setCompatibilityMasks}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{setCompatibilityMasks()}{setCompatibilityMasks()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::set\+Compatibility\+Masks (\begin{DoxyParamCaption}\item[{int}]{write\+Mask,  }\item[{int}]{needed\+Mask,  }\item[{int}]{forbidden\+Mask }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02281                                                                \{}
\DoxyCodeLine{02282   compatibility.writeMask     = writeMask;}
\DoxyCodeLine{02283   compatibility.neededMask    = neededMask;}
\DoxyCodeLine{02284   compatibility.forbiddenMask = forbiddenMask;}
\DoxyCodeLine{02285 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_aa5ae2d1b425b93a9e37fbfcb324a5db6}\label{class_t_xsh_simple_level_aa5ae2d1b425b93a9e37fbfcb324a5db6}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!setContentHistory@{setContentHistory}}
\index{setContentHistory@{setContentHistory}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{setContentHistory()}{setContentHistory()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::set\+Content\+History (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_content_history}{TContent\+History}} $\ast$}]{content\+History }\end{DoxyParamCaption})}

destroys the old content\+History and replaces it with the new one. Gets ownership 
\begin{DoxyCode}{0}
\DoxyCodeLine{02273                                                                        \{}
\DoxyCodeLine{02274   \textcolor{keywordflow}{if} (contentHistory != m\_contentHistory.get())}
\DoxyCodeLine{02275     m\_contentHistory.reset(contentHistory);}
\DoxyCodeLine{02276 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01083}{load()}}, and \mbox{\hyperlink{l00330}{touch\+Frame()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a2d43337766628739707849f8808bf300}\label{class_t_xsh_simple_level_a2d43337766628739707849f8808bf300}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!setDirtyFlag@{setDirtyFlag}}
\index{setDirtyFlag@{setDirtyFlag}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{setDirtyFlag()}{setDirtyFlag()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::set\+Dirty\+Flag (\begin{DoxyParamCaption}\item[{bool}]{on }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Mark the level as \char`\"{}modified\char`\"{}. 



Reimplemented from \mbox{\hyperlink{class_t_xsh_level_aeafe88c104827f8c27a33a79e7f7ee7d}{TXsh\+Level}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00320 \{ m\_properties-\/>setDirtyFlag(on); \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00864}{Toonz\+Scene\+::create\+New\+Level()}}, \mbox{\hyperlink{l01122}{Toonz\+Scene\+::load\+Level()}}, \mbox{\hyperlink{l00655}{TTool\+::notify\+Image\+Changed()}}, \mbox{\hyperlink{l01991}{Fill\+Tool\+::on\+Property\+Changed()}}, \mbox{\hyperlink{l02032}{Vector\+Selection\+Tool\+::on\+Property\+Changed()}}, and \mbox{\hyperlink{l01468}{save()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_ae74a8922e3cfb3356ae9042e58856c01}\label{class_t_xsh_simple_level_ae74a8922e3cfb3356ae9042e58856c01}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!setEditableRange@{setEditableRange}}
\index{setEditableRange@{setEditableRange}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{setEditableRange()}{setEditableRange()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::set\+Editable\+Range (\begin{DoxyParamCaption}\item[{unsigned int}]{from,  }\item[{unsigned int}]{to,  }\item[{const std\+::wstring \&}]{user\+Name }\end{DoxyParamCaption})}

Set the range of frame that can be edited and saved. Editable range is contained in {\bfseries{m\+\_\+editable\+Range}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00212                                                                    \{}
\DoxyCodeLine{00213   assert(from <= to \&\& to < (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int})\mbox{\hyperlink{class_t_xsh_simple_level_a3fe127306d6669a3eb9e9d8802660d7b}{getFrameCount}}());}
\DoxyCodeLine{00214   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00215   \textcolor{keywordflow}{for} (i = from; i <= to; i++) m\_editableRange.insert(\mbox{\hyperlink{class_t_xsh_simple_level_a07279a40ffad2c6ccc597c0a418f78fb}{index2fid}}(i));}
\DoxyCodeLine{00216 }
\DoxyCodeLine{00217   QString hostName        = TSystem::getHostName();}
\DoxyCodeLine{00218   m\_editableRangeUserInfo = userName + L\textcolor{stringliteral}{"{}\_"{}} + hostName.toStdWString();}
\DoxyCodeLine{00219 }
\DoxyCodeLine{00220   std::wstring fileName = getEditableFileName();}
\DoxyCodeLine{00221   \mbox{\hyperlink{class_t_file_path}{TFilePath}} dstPath     = \mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(m\_path);}
\DoxyCodeLine{00222   dstPath = dstPath.\mbox{\hyperlink{class_t_file_path_a3ebf9ced558cfef97a60bba536b23c6f}{withName}}(fileName).\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(dstPath.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}());}
\DoxyCodeLine{00223 }
\DoxyCodeLine{00224   \textcolor{comment}{// Load temporary level file (for pli and tlv types only)}}
\DoxyCodeLine{00225   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() != OVL\_XSHLEVEL \&\& TSystem::doesExistFileOrLevel(dstPath)) \{}
\DoxyCodeLine{00226     \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}} lr(dstPath);}
\DoxyCodeLine{00227     \mbox{\hyperlink{class_t_level_p}{TLevelP}} level = lr-\/>loadInfo();}
\DoxyCodeLine{00228     \mbox{\hyperlink{class_t_xsh_simple_level_ab5634198656dc2ade669fae235bb19c0}{setPalette}}(level-\/>getPalette());}
\DoxyCodeLine{00229     \textcolor{keywordflow}{for} (TLevel::Iterator it = level-\/>begin(); it != level-\/>end(); it++) \{}
\DoxyCodeLine{00230       \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img = lr-\/>getFrameReader(it-\/>first)-\/>load();}
\DoxyCodeLine{00231       setFrame(it-\/>first, img);}
\DoxyCodeLine{00232     \}}
\DoxyCodeLine{00233   \}}
\DoxyCodeLine{00234 }
\DoxyCodeLine{00235   \textcolor{comment}{// Merge temporary hook file with current hookset}}
\DoxyCodeLine{00236   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&hookFile = \mbox{\hyperlink{class_t_xsh_simple_level_a23704b0d8be9290a8ab9c72c3139958b}{getHookPath}}(dstPath);}
\DoxyCodeLine{00237   mergeTemporaryHookFile(from, to, hookFile);}
\DoxyCodeLine{00238 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01231}{Toonz\+Scene\+::decode\+File\+Path()}}, \mbox{\hyperlink{l00158}{get\+Frame\+Count()}}, \mbox{\hyperlink{l02289}{get\+Hook\+Path()}}, \mbox{\hyperlink{l00087}{TXsh\+Level\+::get\+Scene()}}, \mbox{\hyperlink{l00225}{TFile\+Path\+::get\+Type()}}, \mbox{\hyperlink{l00081}{TXsh\+Level\+::get\+Type()}}, \mbox{\hyperlink{l00544}{index2fid()}}, \mbox{\hyperlink{l00428}{set\+Palette()}}, \mbox{\hyperlink{l00802}{TFile\+Path\+::with\+Name()}}, and \mbox{\hyperlink{l00774}{TFile\+Path\+::with\+Type()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_ac10fe469f376b02ef16ba0f5d68d3e33}\label{class_t_xsh_simple_level_ac10fe469f376b02ef16ba0f5d68d3e33}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!setFrame@{setFrame}}
\index{setFrame@{setFrame}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{setFrame()}{setFrame()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::set\+Frame (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid,  }\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \&}]{img }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00783                                                                       \{}
\DoxyCodeLine{00784   assert(\mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} != UNKNOWN\_XSHLEVEL);}
\DoxyCodeLine{00785 }
\DoxyCodeLine{00786   \textcolor{keywordflow}{if} (img) img-\/>\mbox{\hyperlink{class_t_image_a3377c18a849addff5c2cb238176ad04f}{setPalette}}(\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}());}
\DoxyCodeLine{00787 }
\DoxyCodeLine{00788   m\_frames.insert(fid);}
\DoxyCodeLine{00789 }
\DoxyCodeLine{00790   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = m\_path;}
\DoxyCodeLine{00791 }
\DoxyCodeLine{00792   \textcolor{keywordtype}{int} frameStatus                        = getFrameStatus(fid);}
\DoxyCodeLine{00793   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} SCANNED\_OR\_CLEANUPPED = (\mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{Scanned}} | \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a48aa37d686efea1d08332d5ffa69548d}{Cleanupped}});}
\DoxyCodeLine{00794 }
\DoxyCodeLine{00795   \textcolor{keywordflow}{if} ((frameStatus \& SCANNED\_OR\_CLEANUPPED) == \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{Scanned}}) path = m\_scannedPath;}
\DoxyCodeLine{00796 }
\DoxyCodeLine{00797   \textcolor{comment}{// Deal with the ImageManger: ensure the identifiers are bound, and the}}
\DoxyCodeLine{00798   \textcolor{comment}{// associated image is either modified to img or (if !img) invalidated.}}
\DoxyCodeLine{00799   \textcolor{keyword}{const} std::string \&imageId = getImageId(fid);}
\DoxyCodeLine{00800 }
\DoxyCodeLine{00801   \textcolor{keywordflow}{if} (!ImageManager::instance()-\/>isBound(imageId)) \{}
\DoxyCodeLine{00802     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&decodedPath = \mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(path);}
\DoxyCodeLine{00803     ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a77929fa41680f13417fe748f31a72493}{bind}}(imageId, \textcolor{keyword}{new} \mbox{\hyperlink{class_image_loader}{ImageLoader}}(decodedPath, fid));}
\DoxyCodeLine{00804   \}}
\DoxyCodeLine{00805 }
\DoxyCodeLine{00806   ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_aaf5a12cc6326ed3d4af2f5ae280ed355}{setImage}}(imageId, img);  \textcolor{comment}{// Invalidates if !img}}
\DoxyCodeLine{00807 }
\DoxyCodeLine{00808   \textcolor{keywordflow}{if} (frameStatus == \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a06c6ffb8fd8591fc9c26643daf75d68b}{Normal}}) \{}
\DoxyCodeLine{00809     \textcolor{comment}{// Only a normal frame can have these. Justified since:}}
\DoxyCodeLine{00810     \textcolor{comment}{//  PLIs have nothing to share with cleanup stuff}}
\DoxyCodeLine{00811 }
\DoxyCodeLine{00812     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} == PLI\_XSHLEVEL) \{}
\DoxyCodeLine{00813       \textcolor{keyword}{const} std::string \&imageId2 = rasterized(imageId);}
\DoxyCodeLine{00814       \textcolor{keywordflow}{if} (!ImageManager::instance()-\/>isBound(imageId2))}
\DoxyCodeLine{00815         ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a77929fa41680f13417fe748f31a72493}{bind}}(imageId2, \textcolor{keyword}{new} \mbox{\hyperlink{class_image_rasterizer}{ImageRasterizer}});}
\DoxyCodeLine{00816       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00817         ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a34bdaa25c84cd79a7518dbd233a947f4}{invalidate}}(imageId2);}
\DoxyCodeLine{00818     \}}
\DoxyCodeLine{00819 }
\DoxyCodeLine{00820     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} == OVL\_XSHLEVEL || \mbox{\hyperlink{class_t_xsh_level_ab7c5304393b515ca242823e25bb698f4}{m\_type}} == TZI\_XSHLEVEL) \{}
\DoxyCodeLine{00821       \textcolor{keyword}{const} std::string \&imageId2 = filled(imageId);}
\DoxyCodeLine{00822       \textcolor{keywordflow}{if} (!ImageManager::instance()-\/>isBound(imageId2))}
\DoxyCodeLine{00823         ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a77929fa41680f13417fe748f31a72493}{bind}}(imageId2, \textcolor{keyword}{new} \mbox{\hyperlink{class_image_filler}{ImageFiller}});}
\DoxyCodeLine{00824       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00825         ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a34bdaa25c84cd79a7518dbd233a947f4}{invalidate}}(imageId2);}
\DoxyCodeLine{00826     \}}
\DoxyCodeLine{00827   \}}
\DoxyCodeLine{00828 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a492141fa9602d610b557dbe83e46c896}\label{class_t_xsh_simple_level_a492141fa9602d610b557dbe83e46c896}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!setFrameStatus@{setFrameStatus}}
\index{setFrameStatus@{setFrameStatus}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{setFrameStatus()}{setFrameStatus()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::set\+Frame\+Status (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid,  }\item[{int}]{status }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01876                                                                     \{}
\DoxyCodeLine{01877   assert((status \& \string~(\mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49ad4573d346543116267713a3e9daacf25}{Scanned}} | \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a48aa37d686efea1d08332d5ffa69548d}{Cleanupped}} | \mbox{\hyperlink{class_t_xsh_simple_level_a8ee78a10f5ced42f16e01b6adf3f8c49a9e5aa8f328730d501a912a0e11fe39f0}{CleanupPreview}})) == 0);}
\DoxyCodeLine{01878   m\_framesStatus[fid] = status;}
\DoxyCodeLine{01879 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a2f023bb4f212dcf6b767e1517e9f9c5b}\label{class_t_xsh_simple_level_a2f023bb4f212dcf6b767e1517e9f9c5b}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!setIsReadOnly@{setIsReadOnly}}
\index{setIsReadOnly@{setIsReadOnly}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{setIsReadOnly()}{setIsReadOnly()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::set\+Is\+Read\+Only (\begin{DoxyParamCaption}\item[{bool}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00106 \{ m\_isReadOnly = value; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_ab5634198656dc2ade669fae235bb19c0}\label{class_t_xsh_simple_level_ab5634198656dc2ade669fae235bb19c0}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!setPalette@{setPalette}}
\index{setPalette@{setPalette}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{setPalette()}{setPalette()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::set\+Palette (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$}]{palette }\end{DoxyParamCaption})}



Assigns a palette to the level. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00428                                                   \{}
\DoxyCodeLine{00429   \textcolor{keywordflow}{if} (m\_palette != palette) \{}
\DoxyCodeLine{00430     \textcolor{keywordflow}{if} (m\_palette) m\_palette-\/>release();}
\DoxyCodeLine{00431 }
\DoxyCodeLine{00432     m\_palette = palette;}
\DoxyCodeLine{00433     \textcolor{keywordflow}{if} (m\_palette) \{}
\DoxyCodeLine{00434       m\_palette-\/>addRef();}
\DoxyCodeLine{00435       \textcolor{keywordflow}{if} (!(\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() \& FULLCOLOR\_TYPE)) m\_palette-\/>\mbox{\hyperlink{class_t_palette_a49d4f02fb0810c659887bc4e2c5bc3a0}{setPaletteName}}(\mbox{\hyperlink{class_t_xsh_level_a3a59fb1bd3261baee4e889a9edbf0ae8}{getName}}());}
\DoxyCodeLine{00436     \}}
\DoxyCodeLine{00437   \}}
\DoxyCodeLine{00438 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00115}{TXsh\+Level\+::get\+Name()}}, \mbox{\hyperlink{l00081}{TXsh\+Level\+::get\+Type()}}, and \mbox{\hyperlink{l00411}{TPalette\+::set\+Palette\+Name()}}.



Referenced by \mbox{\hyperlink{l01083}{load()}}, \mbox{\hyperlink{l01468}{save()}}, \mbox{\hyperlink{l00211}{set\+Editable\+Range()}}, and \mbox{\hyperlink{l00242}{Vectorizer\+::set\+Level()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_a357d236b080a555590b1f84a78f00059}\label{class_t_xsh_simple_level_a357d236b080a555590b1f84a78f00059}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!setPath@{setPath}}
\index{setPath@{setPath}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{setPath()}{setPath()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::set\+Path (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path,  }\item[{bool}]{retain\+Cached\+Images = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00377                                                                   \{}
\DoxyCodeLine{00378   m\_path = fp;}
\DoxyCodeLine{00379   \textcolor{keywordflow}{if} (!keepFrames) \{}
\DoxyCodeLine{00380     clearFrames();}
\DoxyCodeLine{00381     assert(\mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}());}
\DoxyCodeLine{00382     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00383       \mbox{\hyperlink{class_t_xsh_simple_level_a0020922626c177cd3134a05e274aecee}{load}}();}
\DoxyCodeLine{00384     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00385     \}}
\DoxyCodeLine{00386   \}}
\DoxyCodeLine{00387 }
\DoxyCodeLine{00388   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() != PLI\_XSHLEVEL) \{}
\DoxyCodeLine{00389     \textcolor{keywordflow}{if} (!m\_frames.empty()) \{}
\DoxyCodeLine{00390       std::string imageId = getImageId(\mbox{\hyperlink{class_t_xsh_simple_level_a18862340ce6e813778b40a7913b13252}{getFirstFid}}());}
\DoxyCodeLine{00391       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_image_info}{TImageInfo}} *imageInfo =}
\DoxyCodeLine{00392           ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a44231d6948d69f54e9a4315049131086}{getInfo}}(imageId, ImageManager::none, 0);}
\DoxyCodeLine{00393       \textcolor{keywordflow}{if} (imageInfo) \{}
\DoxyCodeLine{00394         \mbox{\hyperlink{class_t_dimension_t}{TDimension}} imageRes(0, 0);}
\DoxyCodeLine{00395         \mbox{\hyperlink{class_t_point_t}{TPointD}} imageDpi;}
\DoxyCodeLine{00396         imageRes.lx = imageInfo-\/>\mbox{\hyperlink{class_t_image_info_afe82a2118ba303797b2c8a12b47b771d}{m\_lx}};}
\DoxyCodeLine{00397         imageRes.ly = imageInfo-\/>\mbox{\hyperlink{class_t_image_info_affef879628cc3843968c932e706541b6}{m\_ly}};}
\DoxyCodeLine{00398         imageDpi.x  = imageInfo-\/>\mbox{\hyperlink{class_t_image_info_ad66e78a66158fddceaa192d0063f68e8}{m\_dpix}};}
\DoxyCodeLine{00399         imageDpi.y  = imageInfo-\/>\mbox{\hyperlink{class_t_image_info_ad8d3ccb14666297e487e04aa10ab7831}{m\_dpiy}};}
\DoxyCodeLine{00400         m\_properties-\/>setImageDpi(imageDpi);}
\DoxyCodeLine{00401         m\_properties-\/>setImageRes(imageRes);}
\DoxyCodeLine{00402         m\_properties-\/>setBpp(imageInfo-\/>\mbox{\hyperlink{class_t_image_info_aa69221d579b49a27bcd54ffaabb2e8be}{m\_bitsPerSample}} *}
\DoxyCodeLine{00403                              imageInfo-\/>\mbox{\hyperlink{class_t_image_info_a6b58380f718e21dde1b37577090f5c77}{m\_samplePerPixel}});}
\DoxyCodeLine{00404       \}}
\DoxyCodeLine{00405     \}}
\DoxyCodeLine{00406   \}}
\DoxyCodeLine{00407 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a7465cffde15c5f7a8686842c770c2ef6}\label{class_t_xsh_simple_level_a7465cffde15c5f7a8686842c770c2ef6}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!setRenumberTable@{setRenumberTable}}
\index{setRenumberTable@{setRenumberTable}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{setRenumberTable()}{setRenumberTable()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::set\+Renumber\+Table (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Set elements of m\+\_\+renumber\+Table with m\+\_\+frames. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00311                                        \{}
\DoxyCodeLine{00312   m\_renumberTable.clear();}
\DoxyCodeLine{00313 }
\DoxyCodeLine{00314   FramesSet::iterator ft, fEnd = m\_frames.end();}
\DoxyCodeLine{00315   \textcolor{keywordflow}{for} (ft = m\_frames.begin(); ft != fEnd; ++ft) m\_renumberTable[*ft] = *ft;}
\DoxyCodeLine{00316 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01083}{load()}}, and \mbox{\hyperlink{l01468}{save()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_af87056a3a5552ad2dfc009b76bbc30f9}\label{class_t_xsh_simple_level_af87056a3a5552ad2dfc009b76bbc30f9}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!setScannedPath@{setScannedPath}}
\index{setScannedPath@{setScannedPath}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{setScannedPath()}{setScannedPath()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::set\+Scanned\+Path (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00371                                                         \{}
\DoxyCodeLine{00372   m\_scannedPath = fp;}
\DoxyCodeLine{00373 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_xsh_simple_level_a3c20a8d11037048322d2035b0f286209}\label{class_t_xsh_simple_level_a3c20a8d11037048322d2035b0f286209}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!touchFrame@{touchFrame}}
\index{touchFrame@{touchFrame}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{touchFrame()}{touchFrame()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::touch\+Frame (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid }\end{DoxyParamCaption})}

Updates content history (invokes set\+Dirty\+Flag(true)) \begin{DoxyWarning}{Warning}
Not what users may expect! 
\end{DoxyWarning}

\begin{DoxyCode}{0}
\DoxyCodeLine{00330                                                     \{}
\DoxyCodeLine{00331   m\_properties-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{00332   \mbox{\hyperlink{class_t_content_history}{TContentHistory}} *ch = \mbox{\hyperlink{class_t_xsh_simple_level_a2fe15ee3d60e1f5f5c38d6ba75d36812}{getContentHistory}}();}
\DoxyCodeLine{00333   \textcolor{keywordflow}{if} (!ch) \{}
\DoxyCodeLine{00334     ch = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_content_history}{TContentHistory}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00335     \mbox{\hyperlink{class_t_xsh_simple_level_aa5ae2d1b425b93a9e37fbfcb324a5db6}{setContentHistory}}(ch);}
\DoxyCodeLine{00336   \}}
\DoxyCodeLine{00337   ch-\/>\mbox{\hyperlink{class_t_content_history_a473d4a6c40eac7847c57933ac437a11d}{frameModifiedNow}}(fid);}
\DoxyCodeLine{00338 }
\DoxyCodeLine{00339   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == PLI\_XSHLEVEL) \{}
\DoxyCodeLine{00340     std::string \textcolor{keywordtype}{id} = rasterized(getImageId(fid));}
\DoxyCodeLine{00341     ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a34bdaa25c84cd79a7518dbd233a947f4}{invalidate}}(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00342   \}}
\DoxyCodeLine{00343   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() \& FULLCOLOR\_TYPE) \{}
\DoxyCodeLine{00344     std::string \textcolor{keywordtype}{id} = filled(getImageId(fid));}
\DoxyCodeLine{00345     ImageManager::instance()-\/>\mbox{\hyperlink{class_image_manager_a34bdaa25c84cd79a7518dbd233a947f4}{invalidate}}(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00346   \}}
\DoxyCodeLine{00347 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00055}{TContent\+History\+::frame\+Modified\+Now()}}, \mbox{\hyperlink{l00291}{get\+Content\+History()}}, \mbox{\hyperlink{l00081}{TXsh\+Level\+::get\+Type()}}, \mbox{\hyperlink{l00426}{Image\+Manager\+::invalidate()}}, and \mbox{\hyperlink{l02273}{set\+Content\+History()}}.



Referenced by \mbox{\hyperlink{l00609}{TTool\+::notify\+Image\+Changed()}}.

\mbox{\Hypertarget{class_t_xsh_simple_level_aaad854d2871f2b9ded0469d117f90c7d}\label{class_t_xsh_simple_level_aaad854d2871f2b9ded0469d117f90c7d}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!updateReadOnly@{updateReadOnly}}
\index{updateReadOnly@{updateReadOnly}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{updateReadOnly()}{updateReadOnly()}}
{\footnotesize\ttfamily void TXsh\+Simple\+Level\+::update\+Read\+Only (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01357                                      \{}
\DoxyCodeLine{01358   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = \mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(m\_path);}
\DoxyCodeLine{01359   m\_isReadOnly   = isAreadOnlyLevel(path);}
\DoxyCodeLine{01360 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_t_xsh_simple_level_a011698d3e692cbbe468a03a36e64634a}\label{class_t_xsh_simple_level_a011698d3e692cbbe468a03a36e64634a}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!m\_fillFullColorRaster@{m\_fillFullColorRaster}}
\index{m\_fillFullColorRaster@{m\_fillFullColorRaster}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{m\_fillFullColorRaster}{m\_fillFullColorRaster}}
{\footnotesize\ttfamily bool TXsh\+Simple\+Level\+::m\+\_\+fill\+Full\+Color\+Raster = false\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\Hypertarget{class_t_xsh_simple_level_abcb2dceb9b684d8734ebb897a744507e}\label{class_t_xsh_simple_level_abcb2dceb9b684d8734ebb897a744507e}} 
\index{TXshSimpleLevel@{TXshSimpleLevel}!m\_rasterizePli@{m\_rasterizePli}}
\index{m\_rasterizePli@{m\_rasterizePli}!TXshSimpleLevel@{TXshSimpleLevel}}
\doxysubsubsection{\texorpdfstring{m\_rasterizePli}{m\_rasterizePli}}
{\footnotesize\ttfamily bool TXsh\+Simple\+Level\+::m\+\_\+rasterize\+Pli = false\hspace{0.3cm}{\ttfamily [static]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonz/txshsimplelevel.\+h\item 
E\+:/opentoonz/toonz/sources/toonzlib/txshsimplelevel.\+cpp\end{DoxyCompactItemize}
