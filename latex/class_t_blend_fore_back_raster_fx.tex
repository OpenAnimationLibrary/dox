\hypertarget{class_t_blend_fore_back_raster_fx}{}\doxysection{TBlend\+Fore\+Back\+Raster\+Fx Class Reference}
\label{class_t_blend_fore_back_raster_fx}\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
Inheritance diagram for TBlend\+Fore\+Back\+Raster\+Fx\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=12.000000cm]{class_t_blend_fore_back_raster_fx}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_blend_fore_back_raster_fx_a3490562e808843064b3582236d504986}{TBlend\+Fore\+Back\+Raster\+Fx}} (bool clipping\+\_\+mask, bool has\+\_\+alpha\+\_\+option=false)
\item 
bool \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_ab8660925cabc5f0f5bd04767ebfdb9a6}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&rs, double frame) override
\item 
bool \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_a474b94dcc8b7104450bd6e0959dd55c6}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&rs) override
\item 
int \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_a970912a66678e6a31e508fa3b75d3e61}{get\+Memory\+Requirement}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&rs) override
\item 
void \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_a35fa961bd90b21f7484a71ff83519c71}{do\+Dry\+Compute}} (\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&rs) override
\item 
void \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_a24d8f05e78790d9956470079963c10df}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&rs) override
\item 
int \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_a754ae655e526e2d19bcfc99cd5dd5022}{get\+Preferred\+Input\+Port}} () override
\item 
std\+::string \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_ae86d1e55a58986ea7ebcece8d938b088}{get\+Plugin\+Id}} () const override
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_a0ae7c0f0aa22d58bdb3a019d2c675849}{dry\+Compute\+Up\+And\+Down}} (\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&rs, bool up\+Computes\+Whole\+Tile=false)
\item 
void \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_a1533164cd643e64d45c3a8b9a58c92d8}{do\+Compute\+Fx}} (\mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \&dn\+\_\+ras\+\_\+out, const \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \&up\+\_\+ras, const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&pos, const double up\+\_\+opacity, const double gamma)
\item 
{\footnotesize template$<$class T , class Q $>$ }\\void \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_ac8756fe41f4a5ed795ba3ef7b79af7aa}{nonlinear\+Tmpl}} (\mbox{\hyperlink{class_t_raster_p_t}{TRaster\+PT}}$<$ T $>$ dn\+\_\+ras\+\_\+out, const \mbox{\hyperlink{class_t_raster_p_t}{TRaster\+PT}}$<$ T $>$ \&up\+\_\+ras, const double up\+\_\+opacity)
\item 
{\footnotesize template$<$class T , class Q $>$ }\\void \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_a21a63f18dd34b90a48e3203a34c07c6a}{linear\+Tmpl}} (\mbox{\hyperlink{class_t_raster_p_t}{TRaster\+PT}}$<$ T $>$ dn\+\_\+ras\+\_\+out, const \mbox{\hyperlink{class_t_raster_p_t}{TRaster\+PT}}$<$ T $>$ \&up\+\_\+ras, const double up\+\_\+opacity, const double gamma)
\item 
\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_ab4045fa7c321e635ba9d714cd75b46f6}\label{class_t_blend_fore_back_raster_fx_ab4045fa7c321e635ba9d714cd75b46f6}} 
virtual void {\bfseries brend\+Kernel} (double \&dnr, double \&dng, double \&dnb, double \&dna, const double up\+\_\+, double upg, double upb, double upa, const double upopacity, const bool alpha\+\_\+rendering\+\_\+sw=true, const bool is\+\_\+xyz=false)=0
\item 
void \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_a36656dd14f618939c3314b069e8c4ee1}{compute\+Up\+And\+Down}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&rs, \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \&dn\+\_\+ras, \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \&up\+\_\+ras, bool up\+Computes\+Whole\+Tile=false)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_aba198599f97330f5cb540c73f14b0271}{m\+\_\+up}}
\item 
\mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_af0af59d2097d7dd733e05de78099b0f5}{m\+\_\+down}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_a4d5078ab78d424cba98c8dbeb69f7561}{m\+\_\+opacity}}
\item 
TBool\+ParamP \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_ad279ff9be042f230b2f803f56db13f84}{m\+\_\+clipping\+\_\+mask}}
\item 
TBool\+ParamP \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_a5c09b14d0830f7b76ec5a1f4e738cea9}{m\+\_\+linear}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_a9b9eeecffef271af3dbebf1317d295b5}{m\+\_\+gamma}}
\item 
TBool\+ParamP \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_adaea37ebccb7b8353bfd552e451efe10}{m\+\_\+premultiplied}}
\item 
TBool\+ParamP \mbox{\hyperlink{class_t_blend_fore_back_raster_fx_aa5276c1fe33a286c17379d466ba8902f}{m\+\_\+alpha\+\_\+rendering}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_a3490562e808843064b3582236d504986}\label{class_t_blend_fore_back_raster_fx_a3490562e808843064b3582236d504986}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{TBlendForeBackRasterFx()}{TBlendForeBackRasterFx()}}
{\footnotesize\ttfamily TBlend\+Fore\+Back\+Raster\+Fx\+::\+TBlend\+Fore\+Back\+Raster\+Fx (\begin{DoxyParamCaption}\item[{bool}]{clipping\+\_\+mask,  }\item[{bool}]{has\+\_\+alpha\+\_\+option = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00199     : m\_opacity(1.0 * ino::param\_range())}
\DoxyCodeLine{00200     , m\_clipping\_mask(clipping\_mask)}
\DoxyCodeLine{00201     , m\_linear(\textcolor{keyword}{false})}
\DoxyCodeLine{00202     , m\_gamma(2.2)}
\DoxyCodeLine{00203     , m\_premultiplied(\textcolor{keyword}{true}) \{}
\DoxyCodeLine{00204   \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Fore"{}}, this-\/>m\_up);}
\DoxyCodeLine{00205   \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Back"{}}, this-\/>m\_down);}
\DoxyCodeLine{00206   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}opacity"{}}, this-\/>m\_opacity);}
\DoxyCodeLine{00207   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}clipping\_mask"{}}, this-\/>m\_clipping\_mask);}
\DoxyCodeLine{00208   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}linear"{}}, this-\/>m\_linear);}
\DoxyCodeLine{00209   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}gamma"{}}, this-\/>m\_gamma);}
\DoxyCodeLine{00210   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}premultiplied"{}}, this-\/>m\_premultiplied);}
\DoxyCodeLine{00211   this-\/>m\_opacity-\/>setValueRange(0, 1.0 * ino::param\_range());}
\DoxyCodeLine{00212   this-\/>m\_gamma-\/>setValueRange(0.2, 5.0);}
\DoxyCodeLine{00213 }
\DoxyCodeLine{00214   \textcolor{keywordflow}{if} (has\_alpha\_option) \{}
\DoxyCodeLine{00215     m\_alpha\_rendering = TBoolParamP(\textcolor{keyword}{true});}
\DoxyCodeLine{00216     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}alpha\_rendering"{}}, this-\/>m\_alpha\_rendering);}
\DoxyCodeLine{00217   \}}
\DoxyCodeLine{00218 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_ab8660925cabc5f0f5bd04767ebfdb9a6}\label{class_t_blend_fore_back_raster_fx_ab8660925cabc5f0f5bd04767ebfdb9a6}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool TBlend\+Fore\+Back\+Raster\+Fx\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{rs,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00089                                                                    \{}
\DoxyCodeLine{00090     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00091   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_a36656dd14f618939c3314b069e8c4ee1}\label{class_t_blend_fore_back_raster_fx_a36656dd14f618939c3314b069e8c4ee1}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!computeUpAndDown@{computeUpAndDown}}
\index{computeUpAndDown@{computeUpAndDown}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{computeUpAndDown()}{computeUpAndDown()}}
{\footnotesize\ttfamily void TBlend\+Fore\+Back\+Raster\+Fx\+::compute\+Up\+And\+Down (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{rs,  }\item[{\mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \&}]{dn\+\_\+ras,  }\item[{\mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \&}]{up\+\_\+ras,  }\item[{bool}]{up\+Computes\+Whole\+Tile = {\ttfamily false} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00528                                                                         \{}
\DoxyCodeLine{00529   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ サポートしていないPixelタイプはエラーを投げる -\/-\/-\/ */}}
\DoxyCodeLine{00530   \textcolor{keywordflow}{if} (!((\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}})tile.getRaster()) \&\& !((\mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}})tile.getRaster())) \{}
\DoxyCodeLine{00531     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_rop_exception}{TRopException}}(\textcolor{stringliteral}{"{}unsupported input pixel type"{}});}
\DoxyCodeLine{00532   \}}
\DoxyCodeLine{00533   \textcolor{comment}{/*}}
\DoxyCodeLine{00534 \textcolor{comment}{m\_down,m\_upは繋がっている方があればそれを表示する}}
\DoxyCodeLine{00535 \textcolor{comment}{両方とも接続していれば合成処理する}}
\DoxyCodeLine{00536 \textcolor{comment}{表示スイッチを切ってあるならm\_upを表示する}}
\DoxyCodeLine{00537 \textcolor{comment}{fxをreplaceすると、}}
\DoxyCodeLine{00538 \textcolor{comment}{  m\_source   -\/-\/> m\_up  (=port0)}}
\DoxyCodeLine{00539 \textcolor{comment}{  m\_reference -\/-\/> m\_down(=port1)}}
\DoxyCodeLine{00540 \textcolor{comment}{となる}}
\DoxyCodeLine{00541 \textcolor{comment}{*/}}
\DoxyCodeLine{00542   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} up\_is   = (this-\/>m\_up.isConnected() \&\&}
\DoxyCodeLine{00543                       this-\/>m\_up.getFx()-\/>getTimeRegion().contains(frame));}
\DoxyCodeLine{00544   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} down\_is = (this-\/>m\_down.isConnected() \&\&}
\DoxyCodeLine{00545                         this-\/>m\_down.getFx()-\/>getTimeRegion().contains(frame));}
\DoxyCodeLine{00546   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 両方とも切断の時処理しない -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00547   \textcolor{keywordflow}{if} (!up\_is \&\& !down\_is) \{}
\DoxyCodeLine{00548     tile.getRaster()-\/>clear();}
\DoxyCodeLine{00549     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00550   \}}
\DoxyCodeLine{00551   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ up接続かつdown切断の時 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00552   \textcolor{keywordflow}{if} (up\_is \&\& !down\_is) \{}
\DoxyCodeLine{00553     \mbox{\hyperlink{class_t_tile}{TTile}} upTile;}
\DoxyCodeLine{00554     this-\/>m\_up-\/>allocateAndCompute(upTile, tile.m\_pos,}
\DoxyCodeLine{00555                                    tile.getRaster()-\/>getSize(),}
\DoxyCodeLine{00556                                    tile.getRaster(), frame, rs);}
\DoxyCodeLine{00557     up\_ras = upTile.getRaster();}
\DoxyCodeLine{00558     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00559   \}}
\DoxyCodeLine{00560   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ down接続時 downのみ描画して... -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00561   \textcolor{keywordflow}{if} (down\_is) \{}
\DoxyCodeLine{00562     this-\/>m\_down-\/>compute(tile, frame, rs);}
\DoxyCodeLine{00563   \}}
\DoxyCodeLine{00564   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ up切断時 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00565   \textcolor{keywordflow}{if} (!up\_is) \{}
\DoxyCodeLine{00566     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00567   \}}
\DoxyCodeLine{00568 }
\DoxyCodeLine{00569   \textcolor{comment}{/* upと重なる部分を描画する */}}
\DoxyCodeLine{00570 }
\DoxyCodeLine{00571   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ tileの範囲 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00572   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_dimension_t}{TDimension}} tsz(tile.getRaster()-\/>getSize()); \textcolor{comment}{/* 整数 */}}
\DoxyCodeLine{00573   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_rect_t}{TRectD}} tileRect(tile.m\_pos, \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}}(tsz.lx, tsz.ly));}
\DoxyCodeLine{00574   \mbox{\hyperlink{class_t_rect_t}{TRectD}} upBBox;}
\DoxyCodeLine{00575   \textcolor{keywordflow}{if} (upComputesWholeTile) \{}
\DoxyCodeLine{00576     upBBox = tileRect;}
\DoxyCodeLine{00577   \}      \textcolor{comment}{/* tile全体を得る */}}
\DoxyCodeLine{00578   \textcolor{keywordflow}{else} \{ \textcolor{comment}{/* 厳密なエリア... */}}
\DoxyCodeLine{00579     this-\/>m\_up-\/>getBBox(frame, upBBox, rs);}
\DoxyCodeLine{00580     upBBox *= tileRect; \textcolor{comment}{/* upとtileの交差エリア */}}
\DoxyCodeLine{00581 }
\DoxyCodeLine{00582     \textcolor{comment}{/* より大きな四角エリアにPixel整数値で密着する */}}
\DoxyCodeLine{00583     makeRectCoherent(upBBox, tile.m\_pos);  \textcolor{comment}{// double-\/-\/>int grid}}
\DoxyCodeLine{00584   \}}
\DoxyCodeLine{00585 }
\DoxyCodeLine{00586   \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} upSize(                        \textcolor{comment}{/* TRectDをTDimensionIに変換 */}}
\DoxyCodeLine{00587                      tround(upBBox.getLx())  \textcolor{comment}{// getLx() = "{}x1>=x0?x1-\/x0:0"{}}}
\DoxyCodeLine{00588                      ,}
\DoxyCodeLine{00589                      tround(upBBox.getLy())  \textcolor{comment}{// getLy() = "{}y1>=y0?y1-\/y0:0"{}}}
\DoxyCodeLine{00590   );}
\DoxyCodeLine{00591   \textcolor{keywordflow}{if} ((upSize.lx <= 0) || (upSize.ly <= 0)) \{}
\DoxyCodeLine{00592     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00593   \}}
\DoxyCodeLine{00594 }
\DoxyCodeLine{00595   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ upのメモリ確保と描画 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00596   \mbox{\hyperlink{class_t_tile}{TTile}} upTile;}
\DoxyCodeLine{00597   this-\/>m\_up-\/>allocateAndCompute(upTile, upBBox.getP00(), upSize,}
\DoxyCodeLine{00598                                  tile.getRaster() \textcolor{comment}{/* 32/64bitsの判定に使う */}}
\DoxyCodeLine{00599                                  ,}
\DoxyCodeLine{00600                                  frame, rs);}
\DoxyCodeLine{00601   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ upとdownのTRasterを得る -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00602   \mbox{\hyperlink{class_t_rect_t}{TRectI}} dnRect(upTile.getRaster()-\/>getSize());  \textcolor{comment}{// TDimensionI(-\/)}}
\DoxyCodeLine{00603 }
\DoxyCodeLine{00604   dnRect += convert(upTile.m\_pos -\/ tile.m\_pos); \textcolor{comment}{/* uptile-\/>tile原点 */}}
\DoxyCodeLine{00605   \textcolor{comment}{/*}}
\DoxyCodeLine{00606 \textcolor{comment}{  ここで問題はdoubleの位置を、四捨五入して整数値にしていること}}
\DoxyCodeLine{00607 \textcolor{comment}{  移動してから四捨五入ではないの???}}
\DoxyCodeLine{00608 \textcolor{comment}{  dnRectの元位置が整数位置なので、問題ないか...}}
\DoxyCodeLine{00609 \textcolor{comment}{  */}}
\DoxyCodeLine{00610 }
\DoxyCodeLine{00611   dn\_ras = upComputesWholeTile ? tile.getRaster()}
\DoxyCodeLine{00612                                : tile.getRaster()-\/>extract(dnRect);}
\DoxyCodeLine{00613   up\_ras = upTile.getRaster();}
\DoxyCodeLine{00614   assert(dn\_ras-\/>getSize() == up\_ras-\/>getSize());}
\DoxyCodeLine{00615 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_a24d8f05e78790d9956470079963c10df}\label{class_t_blend_fore_back_raster_fx_a24d8f05e78790d9956470079963c10df}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void TBlend\+Fore\+Back\+Raster\+Fx\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{rs }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00287                                                                   \{}
\DoxyCodeLine{00288   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 画像生成 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00289   \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} dn\_ras, up\_ras;}
\DoxyCodeLine{00290   this-\/>computeUpAndDown(tile, frame, rs, dn\_ras, up\_ras);}
\DoxyCodeLine{00291   \textcolor{keywordflow}{if} (!up\_ras) \{}
\DoxyCodeLine{00292     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00293   \}}
\DoxyCodeLine{00294   \textcolor{comment}{// blend on the empty raster if the back port is not active}}
\DoxyCodeLine{00295   \textcolor{keywordflow}{if} (!dn\_ras) \{}
\DoxyCodeLine{00296     dn\_ras = tile.getRaster();}
\DoxyCodeLine{00297   \}}
\DoxyCodeLine{00298   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 動作パラメータを得る -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00299   \textcolor{keyword}{const} \textcolor{keywordtype}{double} up\_opacity =}
\DoxyCodeLine{00300       this-\/>m\_opacity-\/>getValue(frame) / ino::param\_range();}
\DoxyCodeLine{00301   \textcolor{keyword}{const} \textcolor{keywordtype}{double} gamma = this-\/>m\_gamma-\/>getValue(frame);}
\DoxyCodeLine{00302   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ (app\_begin)log記憶 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00303   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} log\_sw = ino::log\_enable\_sw();}
\DoxyCodeLine{00304 }
\DoxyCodeLine{00305   \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00306     std::ostringstream os;}
\DoxyCodeLine{00307     os << \textcolor{stringliteral}{"{}params"{}}}
\DoxyCodeLine{00308        << \textcolor{stringliteral}{"{}  up\_opacity "{}} << up\_opacity << \textcolor{stringliteral}{"{}   dn\_tile w "{}} << dn\_ras-\/>getLx()}
\DoxyCodeLine{00309        << \textcolor{stringliteral}{"{}  wrap "{}} << dn\_ras-\/>\mbox{\hyperlink{class_t_raster_a760946b6cb48d7414f90cd421078912c}{getWrap}}() << \textcolor{stringliteral}{"{}  h "{}} << dn\_ras-\/>getLy()}
\DoxyCodeLine{00310        << \textcolor{stringliteral}{"{}  pixbits "{}} << ino::pixel\_bits(dn\_ras) << \textcolor{stringliteral}{"{}   up\_tile w "{}}}
\DoxyCodeLine{00311        << up\_ras-\/>getLx() << \textcolor{stringliteral}{"{}  wrap "{}} << up\_ras-\/>\mbox{\hyperlink{class_t_raster_a760946b6cb48d7414f90cd421078912c}{getWrap}}() << \textcolor{stringliteral}{"{}  h "{}}}
\DoxyCodeLine{00312        << up\_ras-\/>getLy() << \textcolor{stringliteral}{"{}  pixbits "{}} << ino::pixel\_bits(up\_ras)}
\DoxyCodeLine{00313        << \textcolor{stringliteral}{"{}   frame "{}} << frame;}
\DoxyCodeLine{00314   \}}
\DoxyCodeLine{00315   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ fx処理 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00316   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00317     \textcolor{keywordflow}{if} (dn\_ras) \{}
\DoxyCodeLine{00318       dn\_ras-\/>lock();}
\DoxyCodeLine{00319     \}}
\DoxyCodeLine{00320     \textcolor{keywordflow}{if} (up\_ras) \{}
\DoxyCodeLine{00321       up\_ras-\/>lock();}
\DoxyCodeLine{00322     \}}
\DoxyCodeLine{00323     doComputeFx(dn\_ras, up\_ras, \mbox{\hyperlink{class_t_point_t}{TPoint}}(), up\_opacity, gamma);}
\DoxyCodeLine{00324     \textcolor{comment}{// fx\_(dn\_ras, up\_ras, TPoint(), up\_opacity,}}
\DoxyCodeLine{00325     \textcolor{comment}{// this-\/>m\_clipping\_mask-\/>getValue(),}}
\DoxyCodeLine{00326     \textcolor{comment}{//  this-\/>m\_linear-\/>getValue(), gamma, this-\/>m\_premultiplied-\/>getValue());}}
\DoxyCodeLine{00327     \textcolor{keywordflow}{if} (up\_ras) \{}
\DoxyCodeLine{00328       up\_ras-\/>unlock();}
\DoxyCodeLine{00329     \}}
\DoxyCodeLine{00330     \textcolor{keywordflow}{if} (dn\_ras) \{}
\DoxyCodeLine{00331       dn\_ras-\/>unlock();}
\DoxyCodeLine{00332     \}}
\DoxyCodeLine{00333   \}}
\DoxyCodeLine{00334   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ error処理 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00335   \textcolor{keywordflow}{catch} (std::exception\& e) \{}
\DoxyCodeLine{00336     \textcolor{keywordflow}{if} (up\_ras) \{}
\DoxyCodeLine{00337       up\_ras-\/>unlock();}
\DoxyCodeLine{00338     \}}
\DoxyCodeLine{00339     \textcolor{keywordflow}{if} (dn\_ras) \{}
\DoxyCodeLine{00340       dn\_ras-\/>unlock();}
\DoxyCodeLine{00341     \}}
\DoxyCodeLine{00342     \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00343       std::string str(\textcolor{stringliteral}{"{}exception <"{}});}
\DoxyCodeLine{00344       str += e.what();}
\DoxyCodeLine{00345       str += \textcolor{charliteral}{'>'};}
\DoxyCodeLine{00346     \}}
\DoxyCodeLine{00347     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00348   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00349     \textcolor{keywordflow}{if} (up\_ras) \{}
\DoxyCodeLine{00350       up\_ras-\/>unlock();}
\DoxyCodeLine{00351     \}}
\DoxyCodeLine{00352     \textcolor{keywordflow}{if} (dn\_ras) \{}
\DoxyCodeLine{00353       dn\_ras-\/>unlock();}
\DoxyCodeLine{00354     \}}
\DoxyCodeLine{00355     \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00356       std::string str(\textcolor{stringliteral}{"{}other exception"{}});}
\DoxyCodeLine{00357     \}}
\DoxyCodeLine{00358     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00359   \}}
\DoxyCodeLine{00360 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_a1533164cd643e64d45c3a8b9a58c92d8}\label{class_t_blend_fore_back_raster_fx_a1533164cd643e64d45c3a8b9a58c92d8}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!doComputeFx@{doComputeFx}}
\index{doComputeFx@{doComputeFx}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{doComputeFx()}{doComputeFx()}}
{\footnotesize\ttfamily void TBlend\+Fore\+Back\+Raster\+Fx\+::do\+Compute\+Fx (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \&}]{dn\+\_\+ras\+\_\+out,  }\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \&}]{up\+\_\+ras,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&}]{pos,  }\item[{const double}]{up\+\_\+opacity,  }\item[{const double}]{gamma }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00367                                                              \{}
\DoxyCodeLine{00368   \textcolor{comment}{/* 交差したエリアを処理するようにする、いるのか??? */}}
\DoxyCodeLine{00369   \mbox{\hyperlink{class_t_rect_t}{TRect}} outRect(dn\_ras\_out-\/>getBounds());}
\DoxyCodeLine{00370   \mbox{\hyperlink{class_t_rect_t}{TRect}} upRect(up\_ras-\/>getBounds() + pos);}
\DoxyCodeLine{00371   \mbox{\hyperlink{class_t_rect_t}{TRect}} intersection = outRect * upRect;}
\DoxyCodeLine{00372   \textcolor{keywordflow}{if} (intersection.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00373 }
\DoxyCodeLine{00374   \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} cRout = dn\_ras\_out-\/>extract(intersection);}
\DoxyCodeLine{00375   \mbox{\hyperlink{class_t_rect_t}{TRect}} rr       = intersection -\/ pos;}
\DoxyCodeLine{00376   \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} cRup  = up\_ras-\/>extract(rr);}
\DoxyCodeLine{00377 }
\DoxyCodeLine{00378   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} rout32 = cRout, rup32 = cRup;}
\DoxyCodeLine{00379   \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} rout64 = cRout, rup64 = cRup;}
\DoxyCodeLine{00380 }
\DoxyCodeLine{00381   \textcolor{keywordtype}{bool} linear\_sw = this-\/>m\_linear-\/>getValue();}
\DoxyCodeLine{00382 }
\DoxyCodeLine{00383   \textcolor{keywordflow}{if} (rout32 \&\& rup32) \{}
\DoxyCodeLine{00384     \textcolor{keywordflow}{if} (linear\_sw)}
\DoxyCodeLine{00385       linearTmpl<TPixel32, UCHAR>(rout32, rup32, up\_opacity, gamma);}
\DoxyCodeLine{00386     \textcolor{comment}{// linearAdd<TPixel32, UCHAR>(rout32, rup32, up\_opacity, clipping\_mask\_sw,}}
\DoxyCodeLine{00387     \textcolor{comment}{//  gamma, premultiplied\_sw);}}
\DoxyCodeLine{00388     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00389       nonlinearTmpl<TPixel32, UCHAR>(rout32, rup32, up\_opacity);}
\DoxyCodeLine{00390     \textcolor{comment}{// tmpl\_<TPixel32, UCHAR>(rout32, rup32, up\_opacity, clipping\_mask\_sw);}}
\DoxyCodeLine{00391   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (rout64 \&\& rup64) \{}
\DoxyCodeLine{00392     \textcolor{keywordflow}{if} (linear\_sw)}
\DoxyCodeLine{00393       linearTmpl<TPixel64, USHORT>(rout64, rup64, up\_opacity, gamma);}
\DoxyCodeLine{00394     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00395       nonlinearTmpl<TPixel64, USHORT>(rout64, rup64, up\_opacity);}
\DoxyCodeLine{00396   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00397     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_rop_exception}{TRopException}}(\textcolor{stringliteral}{"{}unsupported pixel type"{}});}
\DoxyCodeLine{00398   \}}
\DoxyCodeLine{00399 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_a35fa961bd90b21f7484a71ff83519c71}\label{class_t_blend_fore_back_raster_fx_a35fa961bd90b21f7484a71ff83519c71}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!doDryCompute@{doDryCompute}}
\index{doDryCompute@{doDryCompute}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{doDryCompute()}{doDryCompute()}}
{\footnotesize\ttfamily void TBlend\+Fore\+Back\+Raster\+Fx\+::do\+Dry\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Declares the computation scheme of this fx for rendering optimization purposes. This is an important function of the Toonz rendering API, and should be reimplemented with the necessary care. The Toonz rendering process makes use of this function to enact most of the optimization steps about the fx computation, in particular fx caching. A correct implementation of this method should follow these rules\+:  The invocation of child node computations should be faithfully reproduced.  TRaster\+Fx\+::compute and TRaster\+Fx\+::allocate\+And\+Compute calls have to be translated to TRaster\+Fx\+::dry\+Compute calls.  This fx is intended for precomputation stage, so the hard rendering code should be skipped here. By default, this method raises a dry\+Compute call to each input port in increasing order, using the TRaster\+Fx\+::transform method to identify the tiles to be passed on input precomputation. 

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_a47ec31d2d4c3a066cd6744fb8c80edf2}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00099                                                         \{}
\DoxyCodeLine{00100     this-\/>dryComputeUpAndDown(rect, frame, rs, \textcolor{keyword}{false});}
\DoxyCodeLine{00101   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_a474b94dcc8b7104450bd6e0959dd55c6}\label{class_t_blend_fore_back_raster_fx_a474b94dcc8b7104450bd6e0959dd55c6}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool TBlend\+Fore\+Back\+Raster\+Fx\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{rs }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00222                                                                   \{}
\DoxyCodeLine{00223   \mbox{\hyperlink{class_t_rect_t}{TRectD}} up\_bx;}
\DoxyCodeLine{00224   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} up\_sw =}
\DoxyCodeLine{00225       (m\_up.isConnected() ? m\_up-\/>doGetBBox(frame, up\_bx, rs) : \textcolor{keyword}{false});}
\DoxyCodeLine{00226   \mbox{\hyperlink{class_t_rect_t}{TRectD}} dn\_bx;}
\DoxyCodeLine{00227   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} dn\_sw =}
\DoxyCodeLine{00228       (m\_down.isConnected() ? m\_down-\/>doGetBBox(frame, dn\_bx, rs) : \textcolor{keyword}{false});}
\DoxyCodeLine{00229   \textcolor{keywordflow}{if} (up\_sw \&\& dn\_sw) \{}
\DoxyCodeLine{00230     bBox = up\_bx + dn\_bx;}
\DoxyCodeLine{00231     \textcolor{keywordflow}{return} !bBox.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}();}
\DoxyCodeLine{00232   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (up\_sw) \{}
\DoxyCodeLine{00233     bBox = up\_bx;}
\DoxyCodeLine{00234     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00235   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dn\_sw) \{}
\DoxyCodeLine{00236     bBox = dn\_bx;}
\DoxyCodeLine{00237     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00238   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00239     bBox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00240     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00241   \}}
\DoxyCodeLine{00242 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_a0ae7c0f0aa22d58bdb3a019d2c675849}\label{class_t_blend_fore_back_raster_fx_a0ae7c0f0aa22d58bdb3a019d2c675849}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!dryComputeUpAndDown@{dryComputeUpAndDown}}
\index{dryComputeUpAndDown@{dryComputeUpAndDown}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{dryComputeUpAndDown()}{dryComputeUpAndDown()}}
{\footnotesize\ttfamily void TBlend\+Fore\+Back\+Raster\+Fx\+::dry\+Compute\+Up\+And\+Down (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{rs,  }\item[{bool}]{up\+Computes\+Whole\+Tile = {\ttfamily false} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00247                                                                            \{}
\DoxyCodeLine{00248   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} up\_is   = (this-\/>m\_up.isConnected() \&\&}
\DoxyCodeLine{00249                       this-\/>m\_up.getFx()-\/>getTimeRegion().contains(frame));}
\DoxyCodeLine{00250   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} down\_is = (this-\/>m\_down.isConnected() \&\&}
\DoxyCodeLine{00251                         this-\/>m\_down.getFx()-\/>getTimeRegion().contains(frame));}
\DoxyCodeLine{00252   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 両方とも切断の時処理しない -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00253   \textcolor{keywordflow}{if} (!up\_is \&\& !down\_is) \{}
\DoxyCodeLine{00254     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00255   \}}
\DoxyCodeLine{00256   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ up接続かつdown切断の時 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00257   \textcolor{keywordflow}{if} (up\_is \&\& !down\_is) \{}
\DoxyCodeLine{00258     this-\/>m\_up-\/>dryCompute(rect, frame, rs);}
\DoxyCodeLine{00259     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00260   \}}
\DoxyCodeLine{00261   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ down接続時 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00262   \textcolor{keywordflow}{if} (down\_is) \{}
\DoxyCodeLine{00263     this-\/>m\_down-\/>dryCompute(rect, frame, rs);}
\DoxyCodeLine{00264   \}}
\DoxyCodeLine{00265   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ up切断時 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00266   \textcolor{keywordflow}{if} (!up\_is) \{}
\DoxyCodeLine{00267     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00268   \}}
\DoxyCodeLine{00269 }
\DoxyCodeLine{00270   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ tileのgeometryを計算する -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00271   \mbox{\hyperlink{class_t_rect_t}{TRectD}} upBBox;}
\DoxyCodeLine{00272 }
\DoxyCodeLine{00273   \textcolor{keywordflow}{if} (upComputesWholeTile) \{}
\DoxyCodeLine{00274     upBBox = rect;}
\DoxyCodeLine{00275   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00276     this-\/>m\_up-\/>getBBox(frame, upBBox, rs);}
\DoxyCodeLine{00277     upBBox *= rect;}
\DoxyCodeLine{00278     makeRectCoherent(upBBox, rect.getP00());}
\DoxyCodeLine{00279   \}}
\DoxyCodeLine{00280   \textcolor{keywordflow}{if} ((upBBox.getLx() > 0.5) \&\& (upBBox.getLy() > 0.5)) \{}
\DoxyCodeLine{00281     this-\/>m\_up-\/>dryCompute(upBBox, frame, rs);}
\DoxyCodeLine{00282   \}}
\DoxyCodeLine{00283 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_a970912a66678e6a31e508fa3b75d3e61}\label{class_t_blend_fore_back_raster_fx_a970912a66678e6a31e508fa3b75d3e61}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!getMemoryRequirement@{getMemoryRequirement}}
\index{getMemoryRequirement@{getMemoryRequirement}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{getMemoryRequirement()}{getMemoryRequirement()}}
{\footnotesize\ttfamily int TBlend\+Fore\+Back\+Raster\+Fx\+::get\+Memory\+Requirement (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Specifies the approximate size (in Mega\+Bytes) of the maximum allocation instance that this fx will need to perform in order to render the passed input. This method should be reimplemented in order to make the Toonz rendering process aware of the use of big raster memory chunks, at least. Observe that the passed tile geometry is implicitly {\itshape  already allocated \texorpdfstring{$<$}{<}\textbackslash{}i\texorpdfstring{$>$}{>} for the fx output. ~\newline
The default implementation returns 0, assuming that the passed implicit memory size is passed below in node computation without further allocation of resources. Fxs can reimplement this to -\/1 to explicitly disable the Toonz\textquotesingle{}s smart memory handling. ~\newline
 ~\newline
\begin{DoxyNote}{Note}
The rendering process ensures that the passed render settings are {\itshape handled} by the fx before this function is invoked -\/ do not waste code for it. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRaster\+Fx\+::memory\+Size}} and TRaster\+Fx\+::can\+Handle methods. 
\end{DoxySeeAlso}
}

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_af8eb991c9756f4fb2e48d9f96cbacfba}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00095                                                                \{}
\DoxyCodeLine{00096     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRasterFx::memorySize}}(rect, rs.m\_bpp);}
\DoxyCodeLine{00097   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00116}{TRender\+Settings\+::m\+\_\+bpp}}, and \mbox{\hyperlink{l00560}{TRaster\+Fx\+::memory\+Size()}}.

\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_ae86d1e55a58986ea7ebcece8d938b088}\label{class_t_blend_fore_back_raster_fx_ae86d1e55a58986ea7ebcece8d938b088}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!getPluginId@{getPluginId}}
\index{getPluginId@{getPluginId}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{getPluginId()}{getPluginId()}}
{\footnotesize\ttfamily std\+::string TBlend\+Fore\+Back\+Raster\+Fx\+::get\+Plugin\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_fx}{TFx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00108 \{ \textcolor{keywordflow}{return} PLUGIN\_PREFIX; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_a754ae655e526e2d19bcfc99cd5dd5022}\label{class_t_blend_fore_back_raster_fx_a754ae655e526e2d19bcfc99cd5dd5022}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!getPreferredInputPort@{getPreferredInputPort}}
\index{getPreferredInputPort@{getPreferredInputPort}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{getPreferredInputPort()}{getPreferredInputPort()}}
{\footnotesize\ttfamily int TBlend\+Fore\+Back\+Raster\+Fx\+::get\+Preferred\+Input\+Port (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_fx}{TFx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00106 \{ \textcolor{keywordflow}{return} 1; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_a21a63f18dd34b90a48e3203a34c07c6a}\label{class_t_blend_fore_back_raster_fx_a21a63f18dd34b90a48e3203a34c07c6a}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!linearTmpl@{linearTmpl}}
\index{linearTmpl@{linearTmpl}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{linearTmpl()}{linearTmpl()}}
{\footnotesize\ttfamily template$<$class T , class Q $>$ \\
void TBlend\+Fore\+Back\+Raster\+Fx\+::linear\+Tmpl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_raster_p_t}{TRaster\+PT}}$<$ T $>$}]{dn\+\_\+ras\+\_\+out,  }\item[{const \mbox{\hyperlink{class_t_raster_p_t}{TRaster\+PT}}$<$ T $>$ \&}]{up\+\_\+ras,  }\item[{const double}]{up\+\_\+opacity,  }\item[{const double}]{gamma }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00444                                                             \{}
\DoxyCodeLine{00445   \textcolor{keywordtype}{bool} clipping\_mask\_sw   = this-\/>m\_clipping\_mask-\/>getValue();}
\DoxyCodeLine{00446   \textcolor{keywordtype}{bool} alpha\_rendering\_sw = (m\_alpha\_rendering.getPointer())}
\DoxyCodeLine{00447                                 ? this-\/>m\_alpha\_rendering-\/>getValue()}
\DoxyCodeLine{00448                                 : \textcolor{keyword}{true};}
\DoxyCodeLine{00449   \textcolor{keywordtype}{bool} premultiplied\_sw = this-\/>m\_premultiplied-\/>getValue();}
\DoxyCodeLine{00450   \textcolor{keywordtype}{double} maxi  = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(T::maxChannelValue);  \textcolor{comment}{// 255or65535}}
\DoxyCodeLine{00451   \textcolor{keywordtype}{double} limit = (maxi + 0.5) / (maxi + 1.0);}
\DoxyCodeLine{00452 }
\DoxyCodeLine{00453   assert(dn\_ras\_out-\/>getSize() == up\_ras-\/>getSize());}
\DoxyCodeLine{00454 }
\DoxyCodeLine{00455   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} yy = 0; yy < dn\_ras\_out-\/>getLy(); ++yy) \{}
\DoxyCodeLine{00456     T* out\_pix             = dn\_ras\_out-\/>pixels(yy);}
\DoxyCodeLine{00457     \textcolor{keyword}{const} T* \textcolor{keyword}{const} out\_end = out\_pix + dn\_ras\_out-\/>getLx();}
\DoxyCodeLine{00458     \textcolor{keyword}{const} T* up\_pix        = up\_ras-\/>pixels(yy);}
\DoxyCodeLine{00459     \textcolor{keywordflow}{for} (; out\_pix < out\_end; ++out\_pix, ++up\_pix) \{}
\DoxyCodeLine{00460       \textcolor{keywordflow}{if} (up\_pix-\/>m <= 0 || up\_opacity <= 0) \{}
\DoxyCodeLine{00461         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00462       \}}
\DoxyCodeLine{00463 }
\DoxyCodeLine{00464       \textcolor{keywordtype}{double} dna         = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(out\_pix-\/>m) / maxi;}
\DoxyCodeLine{00465       \textcolor{keywordtype}{double} tmp\_opacity = clipping\_mask\_sw ? up\_opacity * dna : up\_opacity;}
\DoxyCodeLine{00466       \textcolor{keywordflow}{if} (tmp\_opacity <= 0) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00467 }
\DoxyCodeLine{00468       \textcolor{keywordtype}{double} dnBGR[3];}
\DoxyCodeLine{00469       dnBGR[0]        = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(out\_pix-\/>b) / maxi;}
\DoxyCodeLine{00470       dnBGR[1]        = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(out\_pix-\/>g) / maxi;}
\DoxyCodeLine{00471       dnBGR[2]        = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(out\_pix-\/>r) / maxi;}
\DoxyCodeLine{00472       \textcolor{keywordtype}{double} dnXYZ[3] = \{0.0, 0.0, 0.0\};}
\DoxyCodeLine{00473       \textcolor{keywordflow}{if} (dna > 0.0) \{}
\DoxyCodeLine{00474         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} c = 0; c < 3; c++) \{}
\DoxyCodeLine{00475           \textcolor{keywordflow}{if} (premultiplied\_sw)}
\DoxyCodeLine{00476             dnBGR[c] = to\_linear\_color\_space(dnBGR[c] / dna, 1.0, gamma) * dna;}
\DoxyCodeLine{00477           \textcolor{keywordflow}{else}}
\DoxyCodeLine{00478             dnBGR[c] = to\_linear\_color\_space(dnBGR[c], 1.0, gamma);}
\DoxyCodeLine{00479         \}}
\DoxyCodeLine{00480         to\_xyz(dnXYZ, dnBGR);}
\DoxyCodeLine{00481       \}}
\DoxyCodeLine{00482 }
\DoxyCodeLine{00483       \textcolor{keywordtype}{double} upBGR[3];}
\DoxyCodeLine{00484       upBGR[0]   = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(up\_pix-\/>b) / maxi;}
\DoxyCodeLine{00485       upBGR[1]   = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(up\_pix-\/>g) / maxi;}
\DoxyCodeLine{00486       upBGR[2]   = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(up\_pix-\/>r) / maxi;}
\DoxyCodeLine{00487       \textcolor{keywordtype}{double} upa = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(up\_pix-\/>m) / maxi;}
\DoxyCodeLine{00488       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} c = 0; c < 3; c++) \{}
\DoxyCodeLine{00489         \textcolor{keywordflow}{if} (premultiplied\_sw)}
\DoxyCodeLine{00490           upBGR[c] = to\_linear\_color\_space(upBGR[c] / upa, 1.0, gamma) * upa;}
\DoxyCodeLine{00491         \textcolor{keywordflow}{else}}
\DoxyCodeLine{00492           upBGR[c] = to\_linear\_color\_space(upBGR[c], 1.0, gamma);}
\DoxyCodeLine{00493       \}}
\DoxyCodeLine{00494 }
\DoxyCodeLine{00495       \textcolor{keywordtype}{double} upXYZ[3];}
\DoxyCodeLine{00496       to\_xyz(upXYZ, upBGR);}
\DoxyCodeLine{00497 }
\DoxyCodeLine{00498       brendKernel(dnXYZ[0], dnXYZ[1], dnXYZ[2], dna, upXYZ[0], upXYZ[1],}
\DoxyCodeLine{00499                   upXYZ[2], upa, tmp\_opacity, alpha\_rendering\_sw, \textcolor{keyword}{true});}
\DoxyCodeLine{00500 }
\DoxyCodeLine{00501       to\_bgr(dnBGR, dnXYZ);}
\DoxyCodeLine{00502 }
\DoxyCodeLine{00503       \textcolor{comment}{// premultiply the result}}
\DoxyCodeLine{00504       \textcolor{keywordtype}{double} nonlinear\_b =}
\DoxyCodeLine{00505           to\_nonlinear\_color\_space(dnBGR[0] / dna, 1.0, gamma) * dna;}
\DoxyCodeLine{00506       \textcolor{keywordtype}{double} nonlinear\_g =}
\DoxyCodeLine{00507           to\_nonlinear\_color\_space(dnBGR[1] / dna, 1.0, gamma) * dna;}
\DoxyCodeLine{00508       \textcolor{keywordtype}{double} nonlinear\_r =}
\DoxyCodeLine{00509           to\_nonlinear\_color\_space(dnBGR[2] / dna, 1.0, gamma) * dna;}
\DoxyCodeLine{00510 }
\DoxyCodeLine{00511       out\_pix-\/>r =}
\DoxyCodeLine{00512           \textcolor{keyword}{static\_cast<}Q\textcolor{keyword}{>}(clamp(nonlinear\_r, 0.0, 1.0) * (maxi + 0.999999));}
\DoxyCodeLine{00513       out\_pix-\/>g =}
\DoxyCodeLine{00514           \textcolor{keyword}{static\_cast<}Q\textcolor{keyword}{>}(clamp(nonlinear\_g, 0.0, 1.0) * (maxi + 0.999999));}
\DoxyCodeLine{00515       out\_pix-\/>b =}
\DoxyCodeLine{00516           \textcolor{keyword}{static\_cast<}Q\textcolor{keyword}{>}(clamp(nonlinear\_b, 0.0, 1.0) * (maxi + 0.999999));}
\DoxyCodeLine{00517       out\_pix-\/>m = \textcolor{keyword}{static\_cast<}Q\textcolor{keyword}{>}(dna * (maxi + 0.999999));}
\DoxyCodeLine{00518     \}}
\DoxyCodeLine{00519   \}}
\DoxyCodeLine{00520 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_ac8756fe41f4a5ed795ba3ef7b79af7aa}\label{class_t_blend_fore_back_raster_fx_ac8756fe41f4a5ed795ba3ef7b79af7aa}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!nonlinearTmpl@{nonlinearTmpl}}
\index{nonlinearTmpl@{nonlinearTmpl}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{nonlinearTmpl()}{nonlinearTmpl()}}
{\footnotesize\ttfamily template$<$class T , class Q $>$ \\
void TBlend\+Fore\+Back\+Raster\+Fx\+::nonlinear\+Tmpl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_raster_p_t}{TRaster\+PT}}$<$ T $>$}]{dn\+\_\+ras\+\_\+out,  }\item[{const \mbox{\hyperlink{class_t_raster_p_t}{TRaster\+PT}}$<$ T $>$ \&}]{up\+\_\+ras,  }\item[{const double}]{up\+\_\+opacity }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00405                                                                     \{}
\DoxyCodeLine{00406   \textcolor{keywordtype}{bool} clipping\_mask\_sw   = this-\/>m\_clipping\_mask-\/>getValue();}
\DoxyCodeLine{00407   \textcolor{keywordtype}{bool} alpha\_rendering\_sw = (m\_alpha\_rendering.getPointer())}
\DoxyCodeLine{00408                                 ? this-\/>m\_alpha\_rendering-\/>getValue()}
\DoxyCodeLine{00409                                 : \textcolor{keyword}{true};}
\DoxyCodeLine{00410 }
\DoxyCodeLine{00411   \textcolor{keywordtype}{double} maxi = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(T::maxChannelValue);  \textcolor{comment}{// 255or65535}}
\DoxyCodeLine{00412 }
\DoxyCodeLine{00413   assert(dn\_ras\_out-\/>getSize() == up\_ras-\/>getSize());}
\DoxyCodeLine{00414 }
\DoxyCodeLine{00415   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} yy = 0; yy < dn\_ras\_out-\/>getLy(); ++yy) \{}
\DoxyCodeLine{00416     T* out\_pix             = dn\_ras\_out-\/>pixels(yy);}
\DoxyCodeLine{00417     \textcolor{keyword}{const} T* \textcolor{keyword}{const} out\_end = out\_pix + dn\_ras\_out-\/>getLx();}
\DoxyCodeLine{00418     \textcolor{keyword}{const} T* up\_pix        = up\_ras-\/>pixels(yy);}
\DoxyCodeLine{00419     \textcolor{keywordflow}{for} (; out\_pix < out\_end; ++out\_pix, ++up\_pix) \{}
\DoxyCodeLine{00420       \textcolor{keywordtype}{double} upr = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(up\_pix-\/>r) / maxi;}
\DoxyCodeLine{00421       \textcolor{keywordtype}{double} upg = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(up\_pix-\/>g) / maxi;}
\DoxyCodeLine{00422       \textcolor{keywordtype}{double} upb = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(up\_pix-\/>b) / maxi;}
\DoxyCodeLine{00423       \textcolor{keywordtype}{double} upa = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(up\_pix-\/>m) / maxi;}
\DoxyCodeLine{00424       \textcolor{keywordtype}{double} dnr = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(out\_pix-\/>r) / maxi;}
\DoxyCodeLine{00425       \textcolor{keywordtype}{double} dng = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(out\_pix-\/>g) / maxi;}
\DoxyCodeLine{00426       \textcolor{keywordtype}{double} dnb = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(out\_pix-\/>b) / maxi;}
\DoxyCodeLine{00427       \textcolor{keywordtype}{double} dna = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(out\_pix-\/>m) / maxi;}
\DoxyCodeLine{00428       brendKernel(dnr, dng, dnb, dna, upr, upg, upb, upa,}
\DoxyCodeLine{00429                   clipping\_mask\_sw ? up\_opacity * dna : up\_opacity,}
\DoxyCodeLine{00430                   alpha\_rendering\_sw);}
\DoxyCodeLine{00431       out\_pix-\/>r = \textcolor{keyword}{static\_cast<}Q\textcolor{keyword}{>}(dnr * (maxi + 0.999999));}
\DoxyCodeLine{00432       out\_pix-\/>g = \textcolor{keyword}{static\_cast<}Q\textcolor{keyword}{>}(dng * (maxi + 0.999999));}
\DoxyCodeLine{00433       out\_pix-\/>b = \textcolor{keyword}{static\_cast<}Q\textcolor{keyword}{>}(dnb * (maxi + 0.999999));}
\DoxyCodeLine{00434       out\_pix-\/>m = \textcolor{keyword}{static\_cast<}Q\textcolor{keyword}{>}(dna * (maxi + 0.999999));}
\DoxyCodeLine{00435     \}}
\DoxyCodeLine{00436   \}}
\DoxyCodeLine{00437 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_aa5276c1fe33a286c17379d466ba8902f}\label{class_t_blend_fore_back_raster_fx_aa5276c1fe33a286c17379d466ba8902f}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!m\_alpha\_rendering@{m\_alpha\_rendering}}
\index{m\_alpha\_rendering@{m\_alpha\_rendering}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{m\_alpha\_rendering}{m\_alpha\_rendering}}
{\footnotesize\ttfamily TBool\+ParamP TBlend\+Fore\+Back\+Raster\+Fx\+::m\+\_\+alpha\+\_\+rendering\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_ad279ff9be042f230b2f803f56db13f84}\label{class_t_blend_fore_back_raster_fx_ad279ff9be042f230b2f803f56db13f84}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!m\_clipping\_mask@{m\_clipping\_mask}}
\index{m\_clipping\_mask@{m\_clipping\_mask}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{m\_clipping\_mask}{m\_clipping\_mask}}
{\footnotesize\ttfamily TBool\+ParamP TBlend\+Fore\+Back\+Raster\+Fx\+::m\+\_\+clipping\+\_\+mask\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_af0af59d2097d7dd733e05de78099b0f5}\label{class_t_blend_fore_back_raster_fx_af0af59d2097d7dd733e05de78099b0f5}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!m\_down@{m\_down}}
\index{m\_down@{m\_down}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{m\_down}{m\_down}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} TBlend\+Fore\+Back\+Raster\+Fx\+::m\+\_\+down\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_a9b9eeecffef271af3dbebf1317d295b5}\label{class_t_blend_fore_back_raster_fx_a9b9eeecffef271af3dbebf1317d295b5}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!m\_gamma@{m\_gamma}}
\index{m\_gamma@{m\_gamma}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{m\_gamma}{m\_gamma}}
{\footnotesize\ttfamily TDouble\+ParamP TBlend\+Fore\+Back\+Raster\+Fx\+::m\+\_\+gamma\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_a5c09b14d0830f7b76ec5a1f4e738cea9}\label{class_t_blend_fore_back_raster_fx_a5c09b14d0830f7b76ec5a1f4e738cea9}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!m\_linear@{m\_linear}}
\index{m\_linear@{m\_linear}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{m\_linear}{m\_linear}}
{\footnotesize\ttfamily TBool\+ParamP TBlend\+Fore\+Back\+Raster\+Fx\+::m\+\_\+linear\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_a4d5078ab78d424cba98c8dbeb69f7561}\label{class_t_blend_fore_back_raster_fx_a4d5078ab78d424cba98c8dbeb69f7561}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!m\_opacity@{m\_opacity}}
\index{m\_opacity@{m\_opacity}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{m\_opacity}{m\_opacity}}
{\footnotesize\ttfamily TDouble\+ParamP TBlend\+Fore\+Back\+Raster\+Fx\+::m\+\_\+opacity\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_adaea37ebccb7b8353bfd552e451efe10}\label{class_t_blend_fore_back_raster_fx_adaea37ebccb7b8353bfd552e451efe10}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!m\_premultiplied@{m\_premultiplied}}
\index{m\_premultiplied@{m\_premultiplied}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{m\_premultiplied}{m\_premultiplied}}
{\footnotesize\ttfamily TBool\+ParamP TBlend\+Fore\+Back\+Raster\+Fx\+::m\+\_\+premultiplied\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_blend_fore_back_raster_fx_aba198599f97330f5cb540c73f14b0271}\label{class_t_blend_fore_back_raster_fx_aba198599f97330f5cb540c73f14b0271}} 
\index{TBlendForeBackRasterFx@{TBlendForeBackRasterFx}!m\_up@{m\_up}}
\index{m\_up@{m\_up}!TBlendForeBackRasterFx@{TBlendForeBackRasterFx}}
\doxysubsubsection{\texorpdfstring{m\_up}{m\_up}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} TBlend\+Fore\+Back\+Raster\+Fx\+::m\+\_\+up\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/ino\+\_\+common.\+h\item 
E\+:/opentoonz/toonz/sources/stdfx/ino\+\_\+common.\+cpp\end{DoxyCompactItemize}
