\hypertarget{class_custom_style_manager}{}\doxysection{Custom\+Style\+Manager Class Reference}
\label{class_custom_style_manager}\index{CustomStyleManager@{CustomStyleManager}}
Inheritance diagram for Custom\+Style\+Manager\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_custom_style_manager}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_custom_style_manager_1_1_pattern_data}{Pattern\+Data}}
\item 
class \mbox{\hyperlink{class_custom_style_manager_1_1_style_loader_task}{Style\+Loader\+Task}}
\end{DoxyCompactItemize}
\doxysubsection*{Signals}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_custom_style_manager_aa9c2a81e650c87fcfa0beb0be0de8657}\label{class_custom_style_manager_aa9c2a81e650c87fcfa0beb0be0de8657}} 
void {\bfseries pattern\+Added} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_custom_style_manager_a1eded1b0877e5fa89db554bb6c8c4a71}{Custom\+Style\+Manager}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&styles\+Folder, QString filters=QString(), QSize chip\+Size=QSize(30, 30))
\item 
const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \& \mbox{\hyperlink{class_custom_style_manager_a62bdf349982f756bd7b20c877c66d6f2}{styles\+Folder}} () const
\item 
QSize \mbox{\hyperlink{class_custom_style_manager_a906de2b80eabe55df4fe54c84aff59ad}{get\+Chip\+Size}} () const
\item 
int \mbox{\hyperlink{class_custom_style_manager_a5d0a3f04e14aac56f0066f901fd09e08}{get\+Pattern\+Count}} ()
\item 
\mbox{\hyperlink{struct_custom_style_manager_1_1_pattern_data}{Pattern\+Data}} \mbox{\hyperlink{class_custom_style_manager_abc47d75ff4afc421dc11f637b8fdf9c7}{get\+Pattern}} (int index)
\item 
void \mbox{\hyperlink{class_custom_style_manager_ad361bbcc5d24372b411e5e089ce02279}{load\+Items}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_custom_style_manager_acfbeb3315944f754df61e8fd16fe267b}{get\+Root\+Path}} ()
\item 
static void \mbox{\hyperlink{class_custom_style_manager_aa83aee50ed16a3148b9227ce92b8dfa9}{set\+Root\+Path}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&root\+Path)
\end{DoxyCompactItemize}
\doxysubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_custom_style_manager_a7c7643facbf5f66c72e7f8aeaf32b4b6}{Custom\+Style\+Manager\+::\+Style\+Loader\+Task}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_custom_style_manager_a1eded1b0877e5fa89db554bb6c8c4a71}\label{class_custom_style_manager_a1eded1b0877e5fa89db554bb6c8c4a71}} 
\index{CustomStyleManager@{CustomStyleManager}!CustomStyleManager@{CustomStyleManager}}
\index{CustomStyleManager@{CustomStyleManager}!CustomStyleManager@{CustomStyleManager}}
\doxysubsubsection{\texorpdfstring{CustomStyleManager()}{CustomStyleManager()}}
{\footnotesize\ttfamily Custom\+Style\+Manager\+::\+Custom\+Style\+Manager (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{styles\+Folder,  }\item[{QString}]{filters = {\ttfamily QString()},  }\item[{QSize}]{chip\+Size = {\ttfamily QSize(30,~30)} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00222     : m\_stylesFolder(stylesFolder), m\_filters(filters), m\_chipSize(chipSize) \{}
\DoxyCodeLine{00223   m\_executor.\mbox{\hyperlink{class_t_thread_1_1_executor_a85231531a2fa273db401f090c9aba4ea}{setMaxActiveTasks}}(1);}
\DoxyCodeLine{00224 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_custom_style_manager_a906de2b80eabe55df4fe54c84aff59ad}\label{class_custom_style_manager_a906de2b80eabe55df4fe54c84aff59ad}} 
\index{CustomStyleManager@{CustomStyleManager}!getChipSize@{getChipSize}}
\index{getChipSize@{getChipSize}!CustomStyleManager@{CustomStyleManager}}
\doxysubsubsection{\texorpdfstring{getChipSize()}{getChipSize()}}
{\footnotesize\ttfamily QSize Custom\+Style\+Manager\+::get\+Chip\+Size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00064 \{ \textcolor{keywordflow}{return} m\_chipSize; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_custom_style_manager_abc47d75ff4afc421dc11f637b8fdf9c7}\label{class_custom_style_manager_abc47d75ff4afc421dc11f637b8fdf9c7}} 
\index{CustomStyleManager@{CustomStyleManager}!getPattern@{getPattern}}
\index{getPattern@{getPattern}!CustomStyleManager@{CustomStyleManager}}
\doxysubsubsection{\texorpdfstring{getPattern()}{getPattern()}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct_custom_style_manager_1_1_pattern_data}{Custom\+Style\+Manager\+::\+Pattern\+Data}} Custom\+Style\+Manager\+::get\+Pattern (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00232                                                                       \{}
\DoxyCodeLine{00233   \textcolor{keywordflow}{return} (index < 0 || index >= m\_patterns.size()) ? PatternData()}
\DoxyCodeLine{00234                                                    : m\_patterns[index];}
\DoxyCodeLine{00235 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_custom_style_manager_a5d0a3f04e14aac56f0066f901fd09e08}\label{class_custom_style_manager_a5d0a3f04e14aac56f0066f901fd09e08}} 
\index{CustomStyleManager@{CustomStyleManager}!getPatternCount@{getPatternCount}}
\index{getPatternCount@{getPatternCount}!CustomStyleManager@{CustomStyleManager}}
\doxysubsubsection{\texorpdfstring{getPatternCount()}{getPatternCount()}}
{\footnotesize\ttfamily int Custom\+Style\+Manager\+::get\+Pattern\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00228 \{ \textcolor{keywordflow}{return} m\_patterns.size(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_custom_style_manager_acfbeb3315944f754df61e8fd16fe267b}\label{class_custom_style_manager_acfbeb3315944f754df61e8fd16fe267b}} 
\index{CustomStyleManager@{CustomStyleManager}!getRootPath@{getRootPath}}
\index{getRootPath@{getRootPath}!CustomStyleManager@{CustomStyleManager}}
\doxysubsubsection{\texorpdfstring{getRootPath()}{getRootPath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Custom\+Style\+Manager\+::get\+Root\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00239 \{ return ::rootPath; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_custom_style_manager_ad361bbcc5d24372b411e5e089ce02279}\label{class_custom_style_manager_ad361bbcc5d24372b411e5e089ce02279}} 
\index{CustomStyleManager@{CustomStyleManager}!loadItems@{loadItems}}
\index{loadItems@{loadItems}!CustomStyleManager@{CustomStyleManager}}
\doxysubsubsection{\texorpdfstring{loadItems()}{loadItems()}}
{\footnotesize\ttfamily void Custom\+Style\+Manager\+::load\+Items (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00249                                    \{}
\DoxyCodeLine{00250   \textcolor{comment}{// Build the folder to be read}}
\DoxyCodeLine{00251   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&rootFP(getRootPath());}
\DoxyCodeLine{00252 }
\DoxyCodeLine{00253   assert(rootFP != \mbox{\hyperlink{class_t_file_path}{TFilePath}}());}
\DoxyCodeLine{00254   \textcolor{keywordflow}{if} (rootFP == \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00255 }
\DoxyCodeLine{00256   QDir patternDir(}
\DoxyCodeLine{00257       QString::fromStdWString((rootFP + m\_stylesFolder).getWideString()));}
\DoxyCodeLine{00258   patternDir.setNameFilters(m\_filters.split(\textcolor{charliteral}{' '}));}
\DoxyCodeLine{00259 }
\DoxyCodeLine{00260   \textcolor{comment}{// Read the said folder}}
\DoxyCodeLine{00261   TFilePathSet fps;}
\DoxyCodeLine{00262   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00263     TSystem::readDirectory(fps, patternDir);}
\DoxyCodeLine{00264   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00265     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00266   \}}
\DoxyCodeLine{00267 }
\DoxyCodeLine{00268   \textcolor{comment}{// Delete patterns no longer in the folder}}
\DoxyCodeLine{00269   TFilePathSet newFps;}
\DoxyCodeLine{00270   TFilePathSet::iterator it;}
\DoxyCodeLine{00271   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00272   \textcolor{keywordflow}{for} (i = 0; i < m\_patterns.size(); i++) \{}
\DoxyCodeLine{00273     PatternData data = m\_patterns.at(i);}
\DoxyCodeLine{00274     \textcolor{keywordflow}{for} (it = fps.begin(); it != fps.end(); ++it) \{}
\DoxyCodeLine{00275       \textcolor{keywordflow}{if} (data.m\_patternName == it-\/>getName() \&\&}
\DoxyCodeLine{00276           data.m\_isVector == (it-\/>getType() == \textcolor{stringliteral}{"{}pli"{}}))}
\DoxyCodeLine{00277         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00278     \}}
\DoxyCodeLine{00279 }
\DoxyCodeLine{00280     \textcolor{keywordflow}{if} (it == fps.end()) \{}
\DoxyCodeLine{00281       m\_patterns.removeAt(i);}
\DoxyCodeLine{00282       i-\/-\/;}
\DoxyCodeLine{00283     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00284       fps.erase(it);  \textcolor{comment}{// The style is not new, so don't generate tasks for it}}
\DoxyCodeLine{00285   \}}
\DoxyCodeLine{00286 }
\DoxyCodeLine{00287   \textcolor{comment}{// For each (now new) file entry, generate a fetching task}}
\DoxyCodeLine{00288   \textcolor{keywordflow}{for} (TFilePathSet::iterator it = fps.begin(); it != fps.end(); it++)}
\DoxyCodeLine{00289     m\_executor.\mbox{\hyperlink{class_t_thread_1_1_executor_af31c8db8ac72df4c342e7769e95e2135}{addTask}}(\textcolor{keyword}{new} StyleLoaderTask(\textcolor{keyword}{this}, *it));}
\DoxyCodeLine{00290 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_custom_style_manager_aa83aee50ed16a3148b9227ce92b8dfa9}\label{class_custom_style_manager_aa83aee50ed16a3148b9227ce92b8dfa9}} 
\index{CustomStyleManager@{CustomStyleManager}!setRootPath@{setRootPath}}
\index{setRootPath@{setRootPath}!CustomStyleManager@{CustomStyleManager}}
\doxysubsubsection{\texorpdfstring{setRootPath()}{setRootPath()}}
{\footnotesize\ttfamily void Custom\+Style\+Manager\+::set\+Root\+Path (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{root\+Path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00243                                                               \{}
\DoxyCodeLine{00244   ::rootPath = rootPath;}
\DoxyCodeLine{00245 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_custom_style_manager_a62bdf349982f756bd7b20c877c66d6f2}\label{class_custom_style_manager_a62bdf349982f756bd7b20c877c66d6f2}} 
\index{CustomStyleManager@{CustomStyleManager}!stylesFolder@{stylesFolder}}
\index{stylesFolder@{stylesFolder}!CustomStyleManager@{CustomStyleManager}}
\doxysubsubsection{\texorpdfstring{stylesFolder()}{stylesFolder()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \& Custom\+Style\+Manager\+::styles\+Folder (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00063 \{ \textcolor{keywordflow}{return} m\_stylesFolder; \}}

\end{DoxyCode}


\doxysubsection{Friends And Related Function Documentation}
\mbox{\Hypertarget{class_custom_style_manager_a7c7643facbf5f66c72e7f8aeaf32b4b6}\label{class_custom_style_manager_a7c7643facbf5f66c72e7f8aeaf32b4b6}} 
\index{CustomStyleManager@{CustomStyleManager}!CustomStyleManager::StyleLoaderTask@{CustomStyleManager::StyleLoaderTask}}
\index{CustomStyleManager::StyleLoaderTask@{CustomStyleManager::StyleLoaderTask}!CustomStyleManager@{CustomStyleManager}}
\doxysubsubsection{\texorpdfstring{CustomStyleManager::StyleLoaderTask}{CustomStyleManager::StyleLoaderTask}}
{\footnotesize\ttfamily friend class \mbox{\hyperlink{class_custom_style_manager_1_1_style_loader_task}{Custom\+Style\+Manager\+::\+Style\+Loader\+Task}}\hspace{0.3cm}{\ttfamily [friend]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonz/stylemanager.\+h\item 
E\+:/opentoonz/toonz/sources/toonzlib/stylemanager.\+cpp\end{DoxyCompactItemize}
