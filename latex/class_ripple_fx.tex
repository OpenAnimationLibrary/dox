\hypertarget{class_ripple_fx}{}\doxysection{Ripple\+Fx Class Reference}
\label{class_ripple_fx}\index{RippleFx@{RippleFx}}
Inheritance diagram for Ripple\+Fx\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=5.000000cm]{class_ripple_fx}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_ripple_fx_a44a99813f7ca869a88da1bfddebb0cc7}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\item 
bool \mbox{\hyperlink{class_ripple_fx_a2123b48c0351b7f86fad93e805f69632}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{class_ripple_fx_ac15cec7644c8a627170e9e8273e75e93}{do\+Dry\+Compute}} (\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{class_ripple_fx_a33b3f23bcd3c3a6062a4c3adce221c84}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{class_ripple_fx_ad0508dba3be6ffde7093785d9b7aa617}{get\+Param\+UIs}} (\mbox{\hyperlink{class_t_param_u_i_concept}{TParam\+UIConcept}} $\ast$\&concepts, int \&length) override
\item 
int \mbox{\hyperlink{class_ripple_fx_a65c7490575a586d6a481ef9782cd0854}{get\+Memory\+Requirement}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} \mbox{\hyperlink{class_ripple_fx_a6ad07bb2b9f81b50a12800bd176c419b}{m\+\_\+warped}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_ripple_fx_a90697d419c7f04cc763e42260769081c}{m\+\_\+intensity}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_ripple_fx_a38c813176c1f1428fd99533695a7ec1d}{m\+\_\+grid\+Step}}
\item 
TPoint\+ParamP \mbox{\hyperlink{class_ripple_fx_a7dfe1bccd478badd64780f061f373099}{m\+\_\+center}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_ripple_fx_a99c439fd34f689e97556db070186d594}{m\+\_\+period}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_ripple_fx_afb75334f4cd80a6ef5eb924d22267875}{m\+\_\+count}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_ripple_fx_ad73b38a9da7d32cb1a76089d014d211d}{m\+\_\+cycle}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_ripple_fx_ac867a6d8fed7424c6d9ec5c31937975e}{m\+\_\+scaleX}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_ripple_fx_a91eed642842baa778d20b14b311f3b27}{m\+\_\+scaleY}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_ripple_fx_a7f866990b99163bcd018b7feb3b9aa3d}{m\+\_\+angle}}
\item 
TBool\+ParamP \mbox{\hyperlink{class_ripple_fx_a225b75d7c02e9a36d643544cc463db74}{m\+\_\+sharpen}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_ripple_fx_a0209fb15ac5629f8f5fe21fcb193c338}\label{class_ripple_fx_a0209fb15ac5629f8f5fe21fcb193c338}} 
\index{RippleFx@{RippleFx}!RippleFx@{RippleFx}}
\index{RippleFx@{RippleFx}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{RippleFx()}{RippleFx()}}
{\footnotesize\ttfamily Ripple\+Fx\+::\+Ripple\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00032       : m\_intensity(20)}
\DoxyCodeLine{00033       , m\_gridStep(2)}
\DoxyCodeLine{00034       , m\_center(\mbox{\hyperlink{class_t_point_t}{TPointD}}(0.0, 0.0))}
\DoxyCodeLine{00035       , m\_period(100)  \textcolor{comment}{// args, "{}Period"{})}}
\DoxyCodeLine{00036       , m\_count(2)     \textcolor{comment}{// args, "{}Count"{})}}
\DoxyCodeLine{00037       , m\_cycle(0.0)}
\DoxyCodeLine{00038       , m\_scaleX(100.0)}
\DoxyCodeLine{00039       , m\_scaleY(100.0)}
\DoxyCodeLine{00040       , m\_angle(0.0)}
\DoxyCodeLine{00041       , m\_sharpen(\textcolor{keyword}{false}) \{}
\DoxyCodeLine{00042     m\_center-\/>getX()-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00043     m\_center-\/>getY()-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00044     m\_period-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00045 }
\DoxyCodeLine{00046     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Source"{}}, m\_warped);}
\DoxyCodeLine{00047     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}period"{}}, m\_period);}
\DoxyCodeLine{00048     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}count"{}}, m\_count);}
\DoxyCodeLine{00049     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}cycle"{}}, m\_cycle);}
\DoxyCodeLine{00050     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}center"{}}, m\_center);}
\DoxyCodeLine{00051     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}scalex"{}}, m\_scaleX);}
\DoxyCodeLine{00052     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}scaley"{}}, m\_scaleY);}
\DoxyCodeLine{00053     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}angle"{}}, m\_angle);}
\DoxyCodeLine{00054     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}intensity"{}}, m\_intensity);}
\DoxyCodeLine{00055     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}sensitivity"{}}, m\_gridStep);}
\DoxyCodeLine{00056     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}sharpen"{}}, m\_sharpen);}
\DoxyCodeLine{00057     m\_intensity-\/>setValueRange(-\/1000, 1000);}
\DoxyCodeLine{00058     m\_gridStep-\/>setValueRange(2, 20);}
\DoxyCodeLine{00059     m\_period-\/>setValueRange(0, (std::numeric\_limits<double>::max)());}
\DoxyCodeLine{00060     m\_cycle-\/>setValueRange(0, (std::numeric\_limits<double>::max)());}
\DoxyCodeLine{00061     m\_count-\/>setValueRange(0, (std::numeric\_limits<double>::max)());}
\DoxyCodeLine{00062     m\_angle-\/>setMeasureName(\textcolor{stringliteral}{"{}angle"{}});}
\DoxyCodeLine{00063   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ripple_fx_a3e9b11d5462181b17dcf73a57b993185}\label{class_ripple_fx_a3e9b11d5462181b17dcf73a57b993185}} 
\index{RippleFx@{RippleFx}!````~RippleFx@{$\sim$RippleFx}}
\index{````~RippleFx@{$\sim$RippleFx}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{$\sim$RippleFx()}{~RippleFx()}}
{\footnotesize\ttfamily virtual Ripple\+Fx\+::$\sim$\+Ripple\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00064 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_ripple_fx_a44a99813f7ca869a88da1bfddebb0cc7}\label{class_ripple_fx_a44a99813f7ca869a88da1bfddebb0cc7}} 
\index{RippleFx@{RippleFx}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool Ripple\+Fx\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00068                                                                      \{}
\DoxyCodeLine{00069     \textcolor{keywordflow}{return} isAlmostIsotropic(info.m\_affine);}
\DoxyCodeLine{00070   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ripple_fx_a33b3f23bcd3c3a6062a4c3adce221c84}\label{class_ripple_fx_a33b3f23bcd3c3a6062a4c3adce221c84}} 
\index{RippleFx@{RippleFx}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void Ripple\+Fx\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00129                                                        \{}
\DoxyCodeLine{00130     \textcolor{keywordtype}{bool} isWarped = m\_warped.isConnected();}
\DoxyCodeLine{00131 }
\DoxyCodeLine{00132     \textcolor{keywordflow}{if} (!isWarped) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00133 }
\DoxyCodeLine{00134     \textcolor{keywordflow}{if} (fabs(m\_intensity-\/>getValue(frame)) < 0.01) \{}
\DoxyCodeLine{00135       m\_warped-\/>compute(tile, frame, info);}
\DoxyCodeLine{00136       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00137     \}}
\DoxyCodeLine{00138 }
\DoxyCodeLine{00139     \textcolor{keywordtype}{int} shrink      = (info.m\_shrinkX + info.m\_shrinkY) / 2;}
\DoxyCodeLine{00140     \textcolor{keywordtype}{double} scale    = sqrt(fabs(info.m\_affine.det()));}
\DoxyCodeLine{00141     \textcolor{keywordtype}{double} gridStep = 1.5 * m\_gridStep-\/>getValue(frame);}
\DoxyCodeLine{00142 }
\DoxyCodeLine{00143     \mbox{\hyperlink{struct_warp_params}{WarpParams}} params;}
\DoxyCodeLine{00144     params.m\_intensity   = m\_intensity-\/>getValue(frame) / gridStep;}
\DoxyCodeLine{00145     params.m\_warperScale = scale * gridStep;}
\DoxyCodeLine{00146     params.m\_sharpen     = m\_sharpen-\/>getValue();}
\DoxyCodeLine{00147     params.m\_shrink      = shrink;}
\DoxyCodeLine{00148     \textcolor{keywordtype}{double} period        = m\_period-\/>getValue(frame) / info.m\_shrinkX;}
\DoxyCodeLine{00149     \textcolor{keywordtype}{double} count         = m\_count-\/>getValue(frame);}
\DoxyCodeLine{00150     \textcolor{keywordtype}{double} cycle         = m\_cycle-\/>getValue(frame) / info.m\_shrinkX;}
\DoxyCodeLine{00151     \textcolor{keywordtype}{double} scaleX        = m\_scaleX-\/>getValue(frame) / 100.0;}
\DoxyCodeLine{00152     \textcolor{keywordtype}{double} scaleY        = m\_scaleY-\/>getValue(frame) / 100.0;}
\DoxyCodeLine{00153     \textcolor{keywordtype}{double} angle         = -\/m\_angle-\/>getValue(frame);}
\DoxyCodeLine{00154     \mbox{\hyperlink{class_t_point_t}{TPointD}} center       = m\_center-\/>getValue(frame) * (1.0 / info.m\_shrinkX);}
\DoxyCodeLine{00155 }
\DoxyCodeLine{00156     \textcolor{comment}{// The warper is calculated on a standard reference, with fixed dpi. This}}
\DoxyCodeLine{00157     \textcolor{comment}{// makes sure}}
\DoxyCodeLine{00158     \textcolor{comment}{// that the lattice created for the warp does not depend on camera}}
\DoxyCodeLine{00159     \textcolor{comment}{// transforms and resolution.}}
\DoxyCodeLine{00160     \mbox{\hyperlink{class_t_render_settings}{TRenderSettings}} warperInfo(info);}
\DoxyCodeLine{00161     \textcolor{keywordtype}{double} warperScaleFactor = 1.0 / params.m\_warperScale;}
\DoxyCodeLine{00162     warperInfo.m\_affine      = \mbox{\hyperlink{class_t_scale}{TScale}}(warperScaleFactor) * info.m\_affine;}
\DoxyCodeLine{00163 }
\DoxyCodeLine{00164     \textcolor{comment}{// Retrieve tile's geometry}}
\DoxyCodeLine{00165     \mbox{\hyperlink{class_t_rect_t}{TRectD}} tileRect;}
\DoxyCodeLine{00166     \{}
\DoxyCodeLine{00167       \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} tileRas = tile.getRaster();}
\DoxyCodeLine{00168       tileRect =}
\DoxyCodeLine{00169           \mbox{\hyperlink{class_t_rect_t}{TRectD}}(tile.m\_pos, \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}}(tileRas-\/>getLx(), tileRas-\/>getLy()));}
\DoxyCodeLine{00170     \}}
\DoxyCodeLine{00171 }
\DoxyCodeLine{00172     \textcolor{comment}{// Build the compute rect}}
\DoxyCodeLine{00173     \mbox{\hyperlink{class_t_rect_t}{TRectD}} warpedBox, warpedComputeRect, tileComputeRect;}
\DoxyCodeLine{00174     m\_warped-\/>getBBox(frame, warpedBox, info);}
\DoxyCodeLine{00175 }
\DoxyCodeLine{00176     getWarpComputeRects(tileComputeRect, warpedComputeRect, warpedBox, tileRect,}
\DoxyCodeLine{00177                         params);}
\DoxyCodeLine{00178 }
\DoxyCodeLine{00179     \textcolor{keywordflow}{if} (tileComputeRect.getLx() <= 0 || tileComputeRect.getLy() <= 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00180     \textcolor{keywordflow}{if} (warpedComputeRect.getLx() <= 0 || warpedComputeRect.getLy() <= 0)}
\DoxyCodeLine{00181       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00182 }
\DoxyCodeLine{00183     \mbox{\hyperlink{class_t_rect_t}{TRectD}} warperComputeRect(\mbox{\hyperlink{class_t_scale}{TScale}}(warperScaleFactor) * tileComputeRect);}
\DoxyCodeLine{00184     \textcolor{keywordtype}{double} warperEnlargement = getWarperEnlargement(params);}
\DoxyCodeLine{00185     warperComputeRect        = warperComputeRect.enlarge(warperEnlargement);}
\DoxyCodeLine{00186     warperComputeRect.x0     = tfloor(warperComputeRect.x0);}
\DoxyCodeLine{00187     warperComputeRect.y0     = tfloor(warperComputeRect.y0);}
\DoxyCodeLine{00188     warperComputeRect.x1     = tceil(warperComputeRect.x1);}
\DoxyCodeLine{00189     warperComputeRect.y1     = tceil(warperComputeRect.y1);}
\DoxyCodeLine{00190 }
\DoxyCodeLine{00191     \textcolor{comment}{// Compute the warped tile}}
\DoxyCodeLine{00192     \mbox{\hyperlink{class_t_tile}{TTile}} tileIn;}
\DoxyCodeLine{00193     m\_warped-\/>allocateAndCompute(}
\DoxyCodeLine{00194         tileIn, warpedComputeRect.getP00(),}
\DoxyCodeLine{00195         \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(warpedComputeRect.getLx(), warpedComputeRect.getLy()),}
\DoxyCodeLine{00196         tile.getRaster(), frame, info);}
\DoxyCodeLine{00197     \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} rasIn = tileIn.getRaster();}
\DoxyCodeLine{00198 }
\DoxyCodeLine{00199     \textcolor{comment}{// Compute the warper tile}}
\DoxyCodeLine{00200     std::vector<TSpectrum::ColorKey> colors = \{}
\DoxyCodeLine{00201         TSpectrum::ColorKey(0, TPixel32::White),}
\DoxyCodeLine{00202         TSpectrum::ColorKey(0.5, TPixel32::Black),}
\DoxyCodeLine{00203         TSpectrum::ColorKey(1, TPixel32::White)\};}
\DoxyCodeLine{00204     \mbox{\hyperlink{class_t_spectrum_param_p}{TSpectrumParamP}} ripplecolors = \mbox{\hyperlink{class_t_spectrum_param_p}{TSpectrumParamP}}(colors);}
\DoxyCodeLine{00205 }
\DoxyCodeLine{00206     \textcolor{comment}{// Build the multiradial}}
\DoxyCodeLine{00207     warperInfo.m\_affine = warperInfo.m\_affine * \mbox{\hyperlink{class_t_translation}{TTranslation}}(center) *}
\DoxyCodeLine{00208                           \mbox{\hyperlink{class_t_rotation}{TRotation}}(angle) * \mbox{\hyperlink{class_t_scale}{TScale}}(scaleX, scaleY);}
\DoxyCodeLine{00209     \mbox{\hyperlink{class_t_affine}{TAffine}} aff      = warperInfo.m\_affine.\mbox{\hyperlink{class_t_affine_a570529b96b1ec5abc711aaa9aac09ff9}{inv}}();}
\DoxyCodeLine{00210     \mbox{\hyperlink{class_t_point_t}{TPointD}} posTrasf = aff * (warperComputeRect.getP00());}
\DoxyCodeLine{00211     \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} rasWarper =}
\DoxyCodeLine{00212         rasIn-\/>create(warperComputeRect.getLx(), warperComputeRect.getLy());}
\DoxyCodeLine{00213     multiRadial(rasWarper, posTrasf, ripplecolors, period, count, cycle, aff,}
\DoxyCodeLine{00214                 frame);}
\DoxyCodeLine{00215     \textcolor{comment}{// TImageWriter::save(TFilePath("{}C:\(\backslash\)\(\backslash\)ripple.tif"{}), rasWarper);}}
\DoxyCodeLine{00216 }
\DoxyCodeLine{00217     \textcolor{comment}{// Warp}}
\DoxyCodeLine{00218     \mbox{\hyperlink{class_t_point_t}{TPointD}} db;}
\DoxyCodeLine{00219     \mbox{\hyperlink{class_t_rect_t}{TRect}} rasComputeRectI(convert(tileComputeRect -\/ tileRect.getP00(), db));}
\DoxyCodeLine{00220     \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} tileRas = tile.getRaster()-\/>extract(rasComputeRectI);}
\DoxyCodeLine{00221 }
\DoxyCodeLine{00222     \mbox{\hyperlink{class_t_point_t}{TPointD}} rasInPos(warpedComputeRect.getP00() -\/ tileComputeRect.getP00());}
\DoxyCodeLine{00223     \mbox{\hyperlink{class_t_point_t}{TPointD}} warperPos(}
\DoxyCodeLine{00224         (\mbox{\hyperlink{class_t_scale}{TScale}}(params.m\_warperScale) * warperComputeRect.getP00()) -\/}
\DoxyCodeLine{00225         tileComputeRect.getP00());}
\DoxyCodeLine{00226     warp(tileRas, rasIn, rasWarper, rasInPos, warperPos, params);}
\DoxyCodeLine{00227   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ripple_fx_ac15cec7644c8a627170e9e8273e75e93}\label{class_ripple_fx_ac15cec7644c8a627170e9e8273e75e93}} 
\index{RippleFx@{RippleFx}!doDryCompute@{doDryCompute}}
\index{doDryCompute@{doDryCompute}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{doDryCompute()}{doDryCompute()}}
{\footnotesize\ttfamily void Ripple\+Fx\+::do\+Dry\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Declares the computation scheme of this fx for rendering optimization purposes. This is an important function of the Toonz rendering API, and should be reimplemented with the necessary care. The Toonz rendering process makes use of this function to enact most of the optimization steps about the fx computation, in particular fx caching. A correct implementation of this method should follow these rules\+:  The invocation of child node computations should be faithfully reproduced.  TRaster\+Fx\+::compute and TRaster\+Fx\+::allocate\+And\+Compute calls have to be translated to TRaster\+Fx\+::dry\+Compute calls.  This fx is intended for precomputation stage, so the hard rendering code should be skipped here. By default, this method raises a dry\+Compute call to each input port in increasing order, using the TRaster\+Fx\+::transform method to identify the tiles to be passed on input precomputation. 

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_a47ec31d2d4c3a066cd6744fb8c80edf2}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00097                                                           \{}
\DoxyCodeLine{00098     \textcolor{keywordtype}{bool} isWarped = m\_warped.isConnected();}
\DoxyCodeLine{00099     \textcolor{keywordflow}{if} (!isWarped) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00100     \textcolor{keywordflow}{if} (fabs(m\_intensity-\/>getValue(frame)) < 0.01) \{}
\DoxyCodeLine{00101       m\_warped-\/>dryCompute(rect, frame, info);}
\DoxyCodeLine{00102       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00103     \}}
\DoxyCodeLine{00104 }
\DoxyCodeLine{00105     \textcolor{keywordtype}{double} scale    = sqrt(fabs(info.m\_affine.det()));}
\DoxyCodeLine{00106     \textcolor{keywordtype}{double} gridStep = 1.5 * m\_gridStep-\/>getValue(frame);}
\DoxyCodeLine{00107 }
\DoxyCodeLine{00108     \mbox{\hyperlink{struct_warp_params}{WarpParams}} params;}
\DoxyCodeLine{00109     params.m\_intensity   = m\_intensity-\/>getValue(frame) / gridStep;}
\DoxyCodeLine{00110     params.m\_warperScale = scale * gridStep;}
\DoxyCodeLine{00111     params.m\_sharpen     = m\_sharpen-\/>getValue();}
\DoxyCodeLine{00112 }
\DoxyCodeLine{00113     \mbox{\hyperlink{class_t_rect_t}{TRectD}} warpedBox, warpedComputeRect, tileComputeRect;}
\DoxyCodeLine{00114     m\_warped-\/>getBBox(frame, warpedBox, info);}
\DoxyCodeLine{00115 }
\DoxyCodeLine{00116     getWarpComputeRects(tileComputeRect, warpedComputeRect, warpedBox, rect,}
\DoxyCodeLine{00117                         params);}
\DoxyCodeLine{00118 }
\DoxyCodeLine{00119     \textcolor{keywordflow}{if} (tileComputeRect.getLx() <= 0 || tileComputeRect.getLy() <= 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00120     \textcolor{keywordflow}{if} (warpedComputeRect.getLx() <= 0 || warpedComputeRect.getLy() <= 0)}
\DoxyCodeLine{00121       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00122 }
\DoxyCodeLine{00123     m\_warped-\/>dryCompute(warpedComputeRect, frame, info);}
\DoxyCodeLine{00124   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ripple_fx_a2123b48c0351b7f86fad93e805f69632}\label{class_ripple_fx_a2123b48c0351b7f86fad93e805f69632}} 
\index{RippleFx@{RippleFx}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool Ripple\+Fx\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00075                                                        \{}
\DoxyCodeLine{00076     \textcolor{keywordflow}{if} (m\_warped.isConnected()) \{}
\DoxyCodeLine{00077       \textcolor{keywordtype}{int} ret = m\_warped-\/>doGetBBox(frame, bBox, info);}
\DoxyCodeLine{00078 }
\DoxyCodeLine{00079       \textcolor{keywordflow}{if} (ret \&\& !bBox.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \{}
\DoxyCodeLine{00080         \textcolor{keywordflow}{if} (bBox != TConsts::infiniteRectD) \{}
\DoxyCodeLine{00081           \mbox{\hyperlink{struct_warp_params}{WarpParams}} params;}
\DoxyCodeLine{00082           params.m\_intensity = m\_intensity-\/>getValue(frame);}
\DoxyCodeLine{00083 }
\DoxyCodeLine{00084           bBox = bBox.enlarge(getWarpRadius(params));}
\DoxyCodeLine{00085         \}}
\DoxyCodeLine{00086         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00087       \}}
\DoxyCodeLine{00088     \}}
\DoxyCodeLine{00089 }
\DoxyCodeLine{00090     bBox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00091     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00092   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ripple_fx_a65c7490575a586d6a481ef9782cd0854}\label{class_ripple_fx_a65c7490575a586d6a481ef9782cd0854}} 
\index{RippleFx@{RippleFx}!getMemoryRequirement@{getMemoryRequirement}}
\index{getMemoryRequirement@{getMemoryRequirement}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{getMemoryRequirement()}{getMemoryRequirement()}}
{\footnotesize\ttfamily int Ripple\+Fx\+::get\+Memory\+Requirement (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Specifies the approximate size (in Mega\+Bytes) of the maximum allocation instance that this fx will need to perform in order to render the passed input. This method should be reimplemented in order to make the Toonz rendering process aware of the use of big raster memory chunks, at least. Observe that the passed tile geometry is implicitly {\itshape  already allocated \texorpdfstring{$<$}{<}\textbackslash{}i\texorpdfstring{$>$}{>} for the fx output. ~\newline
The default implementation returns 0, assuming that the passed implicit memory size is passed below in node computation without further allocation of resources. Fxs can reimplement this to -\/1 to explicitly disable the Toonz\textquotesingle{}s smart memory handling. ~\newline
 ~\newline
\begin{DoxyNote}{Note}
The rendering process ensures that the passed render settings are {\itshape handled} by the fx before this function is invoked -\/ do not waste code for it. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRaster\+Fx\+::memory\+Size}} and TRaster\+Fx\+::can\+Handle methods. 
\end{DoxySeeAlso}
}

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_af8eb991c9756f4fb2e48d9f96cbacfba}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00247                                                                  \{}
\DoxyCodeLine{00248     \textcolor{comment}{// return -\/1;   //Deactivated. This fx is currently very inefficient if}}
\DoxyCodeLine{00249     \textcolor{comment}{// subdivided!}}
\DoxyCodeLine{00250 }
\DoxyCodeLine{00251     \textcolor{keywordtype}{int} shrink      = (info.m\_shrinkX + info.m\_shrinkY) / 2;}
\DoxyCodeLine{00252     \textcolor{keywordtype}{double} scale    = sqrt(fabs(info.m\_affine.det()));}
\DoxyCodeLine{00253     \textcolor{keywordtype}{double} gridStep = 1.5 * m\_gridStep-\/>getValue(frame);}
\DoxyCodeLine{00254 }
\DoxyCodeLine{00255     \mbox{\hyperlink{struct_warp_params}{WarpParams}} params;}
\DoxyCodeLine{00256     params.m\_intensity   = m\_intensity-\/>getValue(frame) / gridStep;}
\DoxyCodeLine{00257     params.m\_warperScale = scale * gridStep;}
\DoxyCodeLine{00258     params.m\_sharpen     = m\_sharpen-\/>getValue();}
\DoxyCodeLine{00259     params.m\_shrink      = shrink;}
\DoxyCodeLine{00260 }
\DoxyCodeLine{00261     \textcolor{keywordtype}{double} warperScaleFactor = 1.0 / params.m\_warperScale;}
\DoxyCodeLine{00262 }
\DoxyCodeLine{00263     \mbox{\hyperlink{class_t_rect_t}{TRectD}} warpedBox, warpedComputeRect, tileComputeRect;}
\DoxyCodeLine{00264     m\_warped-\/>getBBox(frame, warpedBox, info);}
\DoxyCodeLine{00265 }
\DoxyCodeLine{00266     getWarpComputeRects(tileComputeRect, warpedComputeRect, warpedBox, rect,}
\DoxyCodeLine{00267                         params);}
\DoxyCodeLine{00268 }
\DoxyCodeLine{00269     \mbox{\hyperlink{class_t_rect_t}{TRectD}} warperComputeRect(\mbox{\hyperlink{class_t_scale}{TScale}}(warperScaleFactor) * tileComputeRect);}
\DoxyCodeLine{00270     \textcolor{keywordtype}{double} warperEnlargement = getWarperEnlargement(params);}
\DoxyCodeLine{00271     warperComputeRect        = warperComputeRect.enlarge(warperEnlargement);}
\DoxyCodeLine{00272 }
\DoxyCodeLine{00273     \textcolor{keywordflow}{return} std::max(\mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRasterFx::memorySize}}(warpedComputeRect, info.m\_bpp),}
\DoxyCodeLine{00274                     \mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRasterFx::memorySize}}(warperComputeRect, info.m\_bpp));}
\DoxyCodeLine{00275   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00560}{TRaster\+Fx\+::memory\+Size()}}.

\mbox{\Hypertarget{class_ripple_fx_ad0508dba3be6ffde7093785d9b7aa617}\label{class_ripple_fx_ad0508dba3be6ffde7093785d9b7aa617}} 
\index{RippleFx@{RippleFx}!getParamUIs@{getParamUIs}}
\index{getParamUIs@{getParamUIs}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{getParamUIs()}{getParamUIs()}}
{\footnotesize\ttfamily void Ripple\+Fx\+::get\+Param\+UIs (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_param_u_i_concept}{TParam\+UIConcept}} $\ast$\&}]{params,  }\item[{int \&}]{length }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Returns a list of User Interface Concepts to be displayed when editing the fx parameters. \begin{DoxyNote}{Note}
Ownership of the returned array allocated with new\mbox{[}\mbox{]} is passed to callers. 
\end{DoxyNote}


Reimplemented from \mbox{\hyperlink{class_t_fx_a18766b107b77772d67c5678e7d832b18}{TFx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00231                                                                      \{}
\DoxyCodeLine{00232     concepts = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_param_u_i_concept}{TParamUIConcept}}[length = 2];}
\DoxyCodeLine{00233 }
\DoxyCodeLine{00234     concepts[0].\mbox{\hyperlink{class_t_param_u_i_concept_a2dbb7c954ca5f2441a6931945cf004a5}{m\_type}}  = TParamUIConcept::POINT;}
\DoxyCodeLine{00235     concepts[0].m\_label = \textcolor{stringliteral}{"{}Center"{}};}
\DoxyCodeLine{00236     concepts[0].m\_params.push\_back(m\_center);}
\DoxyCodeLine{00237 }
\DoxyCodeLine{00238     concepts[1].m\_type  = TParamUIConcept::RADIUS;}
\DoxyCodeLine{00239     concepts[1].m\_label = \textcolor{stringliteral}{"{}Period"{}};}
\DoxyCodeLine{00240     concepts[1].m\_params.push\_back(m\_period);}
\DoxyCodeLine{00241     concepts[1].m\_params.push\_back(m\_center);}
\DoxyCodeLine{00242   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00078}{TParam\+UIConcept\+::m\+\_\+label}}, \mbox{\hyperlink{l00079}{TParam\+UIConcept\+::m\+\_\+params}}, and \mbox{\hyperlink{l00077}{TParam\+UIConcept\+::m\+\_\+type}}.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_ripple_fx_a7f866990b99163bcd018b7feb3b9aa3d}\label{class_ripple_fx_a7f866990b99163bcd018b7feb3b9aa3d}} 
\index{RippleFx@{RippleFx}!m\_angle@{m\_angle}}
\index{m\_angle@{m\_angle}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{m\_angle}{m\_angle}}
{\footnotesize\ttfamily TDouble\+ParamP Ripple\+Fx\+::m\+\_\+angle\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_ripple_fx_a7dfe1bccd478badd64780f061f373099}\label{class_ripple_fx_a7dfe1bccd478badd64780f061f373099}} 
\index{RippleFx@{RippleFx}!m\_center@{m\_center}}
\index{m\_center@{m\_center}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{m\_center}{m\_center}}
{\footnotesize\ttfamily TPoint\+ParamP Ripple\+Fx\+::m\+\_\+center\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_ripple_fx_afb75334f4cd80a6ef5eb924d22267875}\label{class_ripple_fx_afb75334f4cd80a6ef5eb924d22267875}} 
\index{RippleFx@{RippleFx}!m\_count@{m\_count}}
\index{m\_count@{m\_count}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{m\_count}{m\_count}}
{\footnotesize\ttfamily TDouble\+ParamP Ripple\+Fx\+::m\+\_\+count\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_ripple_fx_ad73b38a9da7d32cb1a76089d014d211d}\label{class_ripple_fx_ad73b38a9da7d32cb1a76089d014d211d}} 
\index{RippleFx@{RippleFx}!m\_cycle@{m\_cycle}}
\index{m\_cycle@{m\_cycle}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{m\_cycle}{m\_cycle}}
{\footnotesize\ttfamily TDouble\+ParamP Ripple\+Fx\+::m\+\_\+cycle\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_ripple_fx_a38c813176c1f1428fd99533695a7ec1d}\label{class_ripple_fx_a38c813176c1f1428fd99533695a7ec1d}} 
\index{RippleFx@{RippleFx}!m\_gridStep@{m\_gridStep}}
\index{m\_gridStep@{m\_gridStep}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{m\_gridStep}{m\_gridStep}}
{\footnotesize\ttfamily TDouble\+ParamP Ripple\+Fx\+::m\+\_\+grid\+Step\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_ripple_fx_a90697d419c7f04cc763e42260769081c}\label{class_ripple_fx_a90697d419c7f04cc763e42260769081c}} 
\index{RippleFx@{RippleFx}!m\_intensity@{m\_intensity}}
\index{m\_intensity@{m\_intensity}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{m\_intensity}{m\_intensity}}
{\footnotesize\ttfamily TDouble\+ParamP Ripple\+Fx\+::m\+\_\+intensity\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_ripple_fx_a99c439fd34f689e97556db070186d594}\label{class_ripple_fx_a99c439fd34f689e97556db070186d594}} 
\index{RippleFx@{RippleFx}!m\_period@{m\_period}}
\index{m\_period@{m\_period}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{m\_period}{m\_period}}
{\footnotesize\ttfamily TDouble\+ParamP Ripple\+Fx\+::m\+\_\+period\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_ripple_fx_ac867a6d8fed7424c6d9ec5c31937975e}\label{class_ripple_fx_ac867a6d8fed7424c6d9ec5c31937975e}} 
\index{RippleFx@{RippleFx}!m\_scaleX@{m\_scaleX}}
\index{m\_scaleX@{m\_scaleX}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{m\_scaleX}{m\_scaleX}}
{\footnotesize\ttfamily TDouble\+ParamP Ripple\+Fx\+::m\+\_\+scaleX\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_ripple_fx_a91eed642842baa778d20b14b311f3b27}\label{class_ripple_fx_a91eed642842baa778d20b14b311f3b27}} 
\index{RippleFx@{RippleFx}!m\_scaleY@{m\_scaleY}}
\index{m\_scaleY@{m\_scaleY}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{m\_scaleY}{m\_scaleY}}
{\footnotesize\ttfamily TDouble\+ParamP Ripple\+Fx\+::m\+\_\+scaleY\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_ripple_fx_a225b75d7c02e9a36d643544cc463db74}\label{class_ripple_fx_a225b75d7c02e9a36d643544cc463db74}} 
\index{RippleFx@{RippleFx}!m\_sharpen@{m\_sharpen}}
\index{m\_sharpen@{m\_sharpen}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{m\_sharpen}{m\_sharpen}}
{\footnotesize\ttfamily TBool\+ParamP Ripple\+Fx\+::m\+\_\+sharpen\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_ripple_fx_a6ad07bb2b9f81b50a12800bd176c419b}\label{class_ripple_fx_a6ad07bb2b9f81b50a12800bd176c419b}} 
\index{RippleFx@{RippleFx}!m\_warped@{m\_warped}}
\index{m\_warped@{m\_warped}!RippleFx@{RippleFx}}
\doxysubsubsection{\texorpdfstring{m\_warped}{m\_warped}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} Ripple\+Fx\+::m\+\_\+warped\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/ripplefx.\+cpp\end{DoxyCompactItemize}
