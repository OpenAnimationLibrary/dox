\hypertarget{class_frame_head_gadget}{}\doxysection{Frame\+Head\+Gadget Class Reference}
\label{class_frame_head_gadget}\index{FrameHeadGadget@{FrameHeadGadget}}
Inheritance diagram for Frame\+Head\+Gadget\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_frame_head_gadget}
\end{center}
\end{figure}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum {\bfseries Action} \{ \newline
{\bfseries None}
, {\bfseries Move\+Head}
, {\bfseries Activate\+Fos}
, {\bfseries Deactivate\+Fos}
, \newline
{\bfseries Activate\+Mos}
, {\bfseries Deactivate\+Mos}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_frame_head_gadget_a32409d97ad10ddb8b9bb687a8e6576ec}{draw}} (QPainter \&p, const QColor \&light\+Color, const QColor \&dark\+Color)
\item 
void \mbox{\hyperlink{class_frame_head_gadget_af4aaa75a23dfe8fa1245c5e6f5a8b21f}{draw\+Playing\+Head}} (QPainter \&p, const QColor \&light\+Color, const QColor \&dark\+Color)
\item 
virtual void \mbox{\hyperlink{class_frame_head_gadget_ad8903ccbbd12a0699c0f3ddb44ad5b8a}{draw\+Onion\+Skin\+Selection}} (QPainter \&p, const QColor \&light\+Color, const QColor \&dark\+Color)
\item 
virtual void \mbox{\hyperlink{class_frame_head_gadget_a9c392cf0033d82b1e53aea66c2a9992c}{draw\+Shift\+Trace\+Marker}} (QPainter \&p)
\item 
\mbox{\Hypertarget{class_frame_head_gadget_aa0068992dd27ac9693717cae0b5514b4}\label{class_frame_head_gadget_aa0068992dd27ac9693717cae0b5514b4}} 
virtual int {\bfseries getY} () const =0
\item 
\mbox{\Hypertarget{class_frame_head_gadget_a7873bd10585145c6ed906a1fae187051}\label{class_frame_head_gadget_a7873bd10585145c6ed906a1fae187051}} 
virtual int {\bfseries index2y} (int index) const =0
\item 
\mbox{\Hypertarget{class_frame_head_gadget_a1e25fefbdcb85ca95a409902a7141922}\label{class_frame_head_gadget_a1e25fefbdcb85ca95a409902a7141922}} 
virtual int {\bfseries y2index} (int y) const =0
\item 
\mbox{\Hypertarget{class_frame_head_gadget_af3b5a02e3e4bd23443f12417215d5a09}\label{class_frame_head_gadget_af3b5a02e3e4bd23443f12417215d5a09}} 
virtual void {\bfseries set\+Current\+Frame} (int index) const =0
\item 
\mbox{\Hypertarget{class_frame_head_gadget_acdc41737509b87e3e7ffc6e09df9bc8e}\label{class_frame_head_gadget_acdc41737509b87e3e7ffc6e09df9bc8e}} 
virtual int {\bfseries get\+Current\+Frame} () const =0
\item 
bool \mbox{\hyperlink{class_frame_head_gadget_ad19b6d00e4d763c4908285430dfc1836}{is\+Fos}} (int frame) const
\item 
bool \mbox{\hyperlink{class_frame_head_gadget_a3cf46c918e6b86358097cdea725cd5c0}{is\+Mos}} (int frame) const
\item 
void \mbox{\hyperlink{class_frame_head_gadget_a7d26225402cf2e93727f928653961de0}{set\+Fos}} (int frame, bool on)
\item 
void \mbox{\hyperlink{class_frame_head_gadget_a0e5847836b6c2d7acae35a60de153847}{set\+Mos}} (int frame, bool on)
\item 
bool \mbox{\hyperlink{class_frame_head_gadget_ad199b55e4423094d1fbe8d6a61a5cbc4}{event\+Filter}} (QObject $\ast$obj, QEvent $\ast$event) override
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_frame_head_gadget_afdecfc79061f0c6e86ca0d9a88dd19af}{m\+\_\+dragging}}
\item 
int \mbox{\hyperlink{class_frame_head_gadget_a9f11ae727646e21639e6c820f7e526ce}{m\+\_\+action}}
\item 
int \mbox{\hyperlink{class_frame_head_gadget_aad9e85092075c00bd6061518a5610a99}{m\+\_\+highlighted\+Fos\+Frame}}
\item 
int \mbox{\hyperlink{class_frame_head_gadget_a2329b21db185fc96a8fbd149161abf58}{m\+\_\+button\+Press\+Cell\+Index}}
\item 
int \mbox{\hyperlink{class_frame_head_gadget_a4daa1b77aac54605c5f68ba3d2c3c95a}{m\+\_\+highlighted\+Mos\+Frame}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{class_frame_head_gadget_a966b9a0a790446cc00706aafc6626491}\label{class_frame_head_gadget_a966b9a0a790446cc00706aafc6626491}} 
\index{FrameHeadGadget@{FrameHeadGadget}!Action@{Action}}
\index{Action@{Action}!FrameHeadGadget@{FrameHeadGadget}}
\doxysubsubsection{\texorpdfstring{Action}{Action}}
{\footnotesize\ttfamily enum Frame\+Head\+Gadget\+::\+Action}


\begin{DoxyCode}{0}
\DoxyCodeLine{00020               \{}
\DoxyCodeLine{00021     None,}
\DoxyCodeLine{00022     MoveHead,}
\DoxyCodeLine{00023     ActivateFos,}
\DoxyCodeLine{00024     DeactivateFos,}
\DoxyCodeLine{00025     ActivateMos,}
\DoxyCodeLine{00026     DeactivateMos}
\DoxyCodeLine{00027   \};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_frame_head_gadget_a0d9a0fcc3bc348806afd9e03f7d7cf81}\label{class_frame_head_gadget_a0d9a0fcc3bc348806afd9e03f7d7cf81}} 
\index{FrameHeadGadget@{FrameHeadGadget}!FrameHeadGadget@{FrameHeadGadget}}
\index{FrameHeadGadget@{FrameHeadGadget}!FrameHeadGadget@{FrameHeadGadget}}
\doxysubsubsection{\texorpdfstring{FrameHeadGadget()}{FrameHeadGadget()}}
{\footnotesize\ttfamily Frame\+Head\+Gadget\+::\+Frame\+Head\+Gadget (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00047     : m\_action(None)}
\DoxyCodeLine{00048     , m\_highlightedFosFrame(-\/1)}
\DoxyCodeLine{00049     , m\_buttonPressCellIndex(-\/1)}
\DoxyCodeLine{00050     , m\_highlightedMosFrame(-\/1) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_frame_head_gadget_a399dbd34dd296ccbb3f2e40618557d41}\label{class_frame_head_gadget_a399dbd34dd296ccbb3f2e40618557d41}} 
\index{FrameHeadGadget@{FrameHeadGadget}!````~FrameHeadGadget@{$\sim$FrameHeadGadget}}
\index{````~FrameHeadGadget@{$\sim$FrameHeadGadget}!FrameHeadGadget@{FrameHeadGadget}}
\doxysubsubsection{\texorpdfstring{$\sim$FrameHeadGadget()}{~FrameHeadGadget()}}
{\footnotesize\ttfamily Frame\+Head\+Gadget\+::$\sim$\+Frame\+Head\+Gadget (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00052 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_frame_head_gadget_a32409d97ad10ddb8b9bb687a8e6576ec}\label{class_frame_head_gadget_a32409d97ad10ddb8b9bb687a8e6576ec}} 
\index{FrameHeadGadget@{FrameHeadGadget}!draw@{draw}}
\index{draw@{draw}!FrameHeadGadget@{FrameHeadGadget}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Frame\+Head\+Gadget\+::draw (\begin{DoxyParamCaption}\item[{QPainter \&}]{p,  }\item[{const QColor \&}]{light\+Color,  }\item[{const QColor \&}]{dark\+Color }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00055                                                     \{}
\DoxyCodeLine{00056   \textcolor{comment}{// drawPlayingHead(p, lightColor, darkColor);}}
\DoxyCodeLine{00057   \textcolor{keywordflow}{if} (CommandManager::instance()-\/>getAction(MI\_ShiftTrace)-\/>isChecked())}
\DoxyCodeLine{00058     drawShiftTraceMarker(p);}
\DoxyCodeLine{00059   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (Preferences::instance()-\/>isOnionSkinEnabled())}
\DoxyCodeLine{00060     drawOnionSkinSelection(p, lightColor, darkColor);}
\DoxyCodeLine{00061 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_frame_head_gadget_ad8903ccbbd12a0699c0f3ddb44ad5b8a}\label{class_frame_head_gadget_ad8903ccbbd12a0699c0f3ddb44ad5b8a}} 
\index{FrameHeadGadget@{FrameHeadGadget}!drawOnionSkinSelection@{drawOnionSkinSelection}}
\index{drawOnionSkinSelection@{drawOnionSkinSelection}!FrameHeadGadget@{FrameHeadGadget}}
\doxysubsubsection{\texorpdfstring{drawOnionSkinSelection()}{drawOnionSkinSelection()}}
{\footnotesize\ttfamily void Frame\+Head\+Gadget\+::draw\+Onion\+Skin\+Selection (\begin{DoxyParamCaption}\item[{QPainter \&}]{p,  }\item[{const QColor \&}]{light\+Color,  }\item[{const QColor \&}]{dark\+Color }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00103                                                                       \{}
\DoxyCodeLine{00104   \textcolor{keywordtype}{int} currentRow = getCurrentFrame();}
\DoxyCodeLine{00105   \textcolor{keywordtype}{int} xa         = 12;}
\DoxyCodeLine{00106 }
\DoxyCodeLine{00107   \textcolor{keywordflow}{if} (m\_highlightedFosFrame >= 0 \&\& m\_highlightedFosFrame != currentRow) \{}
\DoxyCodeLine{00108     \textcolor{keywordtype}{int} y = index2y(m\_highlightedFosFrame) + 3;}
\DoxyCodeLine{00109     QRect rect(xa -\/ 6, y + 1, 4, 4);}
\DoxyCodeLine{00110     p.setPen(Qt::blue);  \textcolor{comment}{// grey150);}}
\DoxyCodeLine{00111     p.drawRect(rect);}
\DoxyCodeLine{00112     p.fillRect(rect.adjusted(1, 1, 0, 0), QBrush(lightColor));}
\DoxyCodeLine{00113   \}}
\DoxyCodeLine{00114 }
\DoxyCodeLine{00115   \mbox{\hyperlink{class_onion_skin_mask}{OnionSkinMask}} osMask =}
\DoxyCodeLine{00116       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_afcdd56d9130b7c39a5227de08a0b65e4}{getCurrentOnionSkin}}()-\/>getOnionSkinMask();}
\DoxyCodeLine{00117   \textcolor{keywordflow}{if} (!osMask.isEnabled()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00118 }
\DoxyCodeLine{00119   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00120   \textcolor{keywordflow}{for} (i = 0; i < osMask.\mbox{\hyperlink{class_onion_skin_mask_a23336c6bb8485bc8105b81347dca27fd}{getFosCount}}(); i++) \{}
\DoxyCodeLine{00121     \textcolor{keywordtype}{int} fos = osMask.getFos(i);}
\DoxyCodeLine{00122     \textcolor{keywordflow}{if} (fos == currentRow) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00123     \textcolor{keywordtype}{int} y = index2y(fos) + 3;}
\DoxyCodeLine{00124     QRect rect(xa -\/ 6, y + 1, 4, 4);}
\DoxyCodeLine{00125     p.setPen(Qt::black);}
\DoxyCodeLine{00126     p.drawRect(rect);}
\DoxyCodeLine{00127     p.fillRect(rect.adjusted(1, 1, 0, 0), QBrush(darkColor));}
\DoxyCodeLine{00128   \}}
\DoxyCodeLine{00129 }
\DoxyCodeLine{00130   \textcolor{keywordtype}{int} lastY;}
\DoxyCodeLine{00131   \textcolor{keywordtype}{int} xc       = xa -\/ 10;}
\DoxyCodeLine{00132   \textcolor{keywordtype}{int} mosCount = osMask.\mbox{\hyperlink{class_onion_skin_mask_a08b242aaeb38bbb2e1159f56f56242ce}{getMosCount}}();}
\DoxyCodeLine{00133   \textcolor{keywordflow}{for} (i = 0; i < mosCount; i++) \{}
\DoxyCodeLine{00134     \textcolor{keywordtype}{int} mos = osMask.getMos(i);}
\DoxyCodeLine{00135     \textcolor{keywordtype}{int} y   = 0 + index2y(currentRow + mos) + 3;}
\DoxyCodeLine{00136     QRect rect(xa -\/ 12, y + 1, 4, 4);}
\DoxyCodeLine{00137     p.setPen(Qt::black);}
\DoxyCodeLine{00138     p.drawRect(rect);}
\DoxyCodeLine{00139     p.fillRect(rect.adjusted(1, 1, 0, 0), QBrush(lightColor));}
\DoxyCodeLine{00140     \textcolor{keywordflow}{if} (i > 0 || mos > 0) \{}
\DoxyCodeLine{00141       \textcolor{keywordtype}{int} ya = y;}
\DoxyCodeLine{00142       \textcolor{keywordtype}{int} yb;}
\DoxyCodeLine{00143       \textcolor{keywordflow}{if} (i == 0 || (mos > 0 \&\& osMask.getMos(i -\/ 1) < 0)) \{}
\DoxyCodeLine{00144         ya = index2y(currentRow) + 10;}
\DoxyCodeLine{00145         yb = index2y(currentRow + mos) + 4;}
\DoxyCodeLine{00146       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00147         yb = lastY + 5;}
\DoxyCodeLine{00148       p.setPen(Qt::black);}
\DoxyCodeLine{00149       p.drawLine(xc, ya, xc, yb);}
\DoxyCodeLine{00150     \}}
\DoxyCodeLine{00151     lastY = y;}
\DoxyCodeLine{00152     \textcolor{keywordflow}{if} (mos < 0 \&\& (i == mosCount -\/ 1 || osMask.getMos(i + 1) > 0)) \{}
\DoxyCodeLine{00153       \textcolor{keywordtype}{int} ya = index2y(currentRow);}
\DoxyCodeLine{00154       \textcolor{keywordtype}{int} yb = lastY + 5;}
\DoxyCodeLine{00155       p.setPen(Qt::black);}
\DoxyCodeLine{00156       p.drawLine(xc, ya, xc, yb);}
\DoxyCodeLine{00157     \}}
\DoxyCodeLine{00158   \}}
\DoxyCodeLine{00159 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_frame_head_gadget_af4aaa75a23dfe8fa1245c5e6f5a8b21f}\label{class_frame_head_gadget_af4aaa75a23dfe8fa1245c5e6f5a8b21f}} 
\index{FrameHeadGadget@{FrameHeadGadget}!drawPlayingHead@{drawPlayingHead}}
\index{drawPlayingHead@{drawPlayingHead}!FrameHeadGadget@{FrameHeadGadget}}
\doxysubsubsection{\texorpdfstring{drawPlayingHead()}{drawPlayingHead()}}
{\footnotesize\ttfamily void Frame\+Head\+Gadget\+::draw\+Playing\+Head (\begin{DoxyParamCaption}\item[{QPainter \&}]{p,  }\item[{const QColor \&}]{light\+Color,  }\item[{const QColor \&}]{dark\+Color }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00064                                                                \{}
\DoxyCodeLine{00065   \textcolor{keywordtype}{int} currentFrame = getCurrentFrame();}
\DoxyCodeLine{00066   \textcolor{keywordtype}{int} yy           = index2y(currentFrame);}
\DoxyCodeLine{00067 }
\DoxyCodeLine{00068   std::vector<QPointF> pts;}
\DoxyCodeLine{00069   \textcolor{keywordtype}{int} xa = 12;  \textcolor{comment}{// m\_a;}}
\DoxyCodeLine{00070   \textcolor{keywordtype}{int} xx = xa;  \textcolor{comment}{// m\_a}}
\DoxyCodeLine{00071   pts.push\_back(QPointF(xx, yy));}
\DoxyCodeLine{00072   pts.push\_back(QPointF(xx + 10, yy));}
\DoxyCodeLine{00073   pts.push\_back(QPointF(xx + 13, yy + 1));}
\DoxyCodeLine{00074   pts.push\_back(QPointF(xx + 17, yy + 5));}
\DoxyCodeLine{00075   pts.push\_back(QPointF(xx + 13, yy + 9));}
\DoxyCodeLine{00076   pts.push\_back(QPointF(xx + 10, yy + 10));}
\DoxyCodeLine{00077   pts.push\_back(QPointF(xx, yy + 10));}
\DoxyCodeLine{00078   drawPolygon(p, pts, \textcolor{keyword}{true}, lightColor);}
\DoxyCodeLine{00079   p.setPen(darkColor);}
\DoxyCodeLine{00080   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 4; i++)}
\DoxyCodeLine{00081     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 4; j++) p.drawPoint(xx + 3 + i * 2, yy + 2 + j * 2);}
\DoxyCodeLine{00082 }
\DoxyCodeLine{00083   p.fillRect(QRect(xx -\/ 7, yy + 1, 7, 9), QBrush(lightColor));}
\DoxyCodeLine{00084   p.setPen(darkColor);}
\DoxyCodeLine{00085   p.drawLine(xx -\/ 9, yy + 5, xx -\/ 8, yy + 5);}
\DoxyCodeLine{00086 }
\DoxyCodeLine{00087   p.setPen(Qt::black);}
\DoxyCodeLine{00088   p.drawLine(xx -\/ 7, yy, xx -\/ 1, yy);}
\DoxyCodeLine{00089   p.drawLine(xx -\/ 7, yy + 10, xx -\/ 1, yy + 10);}
\DoxyCodeLine{00090 }
\DoxyCodeLine{00091   p.setPen(Qt::black);}
\DoxyCodeLine{00092   xx = xa -\/ 6;}
\DoxyCodeLine{00093   p.drawPoint(xx -\/ 4, yy + 5);}
\DoxyCodeLine{00094   p.drawRect(QRect(xx -\/ 6, yy, 4, 4));}
\DoxyCodeLine{00095   p.drawRect(QRect(xx -\/ 6, yy + 6, 4, 4));}
\DoxyCodeLine{00096 }
\DoxyCodeLine{00097   p.fillRect(QRect(xx -\/ 5, yy + 1, 3, 3), QBrush(lightColor));}
\DoxyCodeLine{00098   p.fillRect(QRect(xx -\/ 5, yy + 7, 3, 3), QBrush(lightColor));}
\DoxyCodeLine{00099 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_frame_head_gadget_a9c392cf0033d82b1e53aea66c2a9992c}\label{class_frame_head_gadget_a9c392cf0033d82b1e53aea66c2a9992c}} 
\index{FrameHeadGadget@{FrameHeadGadget}!drawShiftTraceMarker@{drawShiftTraceMarker}}
\index{drawShiftTraceMarker@{drawShiftTraceMarker}!FrameHeadGadget@{FrameHeadGadget}}
\doxysubsubsection{\texorpdfstring{drawShiftTraceMarker()}{drawShiftTraceMarker()}}
{\footnotesize\ttfamily virtual void Frame\+Head\+Gadget\+::draw\+Shift\+Trace\+Marker (\begin{DoxyParamCaption}\item[{QPainter \&}]{p }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00049 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_frame_head_gadget_ad199b55e4423094d1fbe8d6a61a5cbc4}\label{class_frame_head_gadget_ad199b55e4423094d1fbe8d6a61a5cbc4}} 
\index{FrameHeadGadget@{FrameHeadGadget}!eventFilter@{eventFilter}}
\index{eventFilter@{eventFilter}!FrameHeadGadget@{FrameHeadGadget}}
\doxysubsubsection{\texorpdfstring{eventFilter()}{eventFilter()}}
{\footnotesize\ttfamily bool Frame\+Head\+Gadget\+::event\+Filter (\begin{DoxyParamCaption}\item[{QObject $\ast$}]{obj,  }\item[{QEvent $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00161                                                          \{}
\DoxyCodeLine{00162   QWidget *viewer = \textcolor{keyword}{dynamic\_cast<}QWidget *\textcolor{keyword}{>}(obj);}
\DoxyCodeLine{00163 }
\DoxyCodeLine{00164   \textcolor{keywordflow}{if} (e-\/>type() == QEvent::MouseButtonPress) \{}
\DoxyCodeLine{00165     m\_action = None;}
\DoxyCodeLine{00166 }
\DoxyCodeLine{00167     \textcolor{comment}{// click}}
\DoxyCodeLine{00168     \textcolor{keywordflow}{if} (m\_highlightedFosFrame >= 0) \{}
\DoxyCodeLine{00169       m\_highlightedFosFrame = -\/1;}
\DoxyCodeLine{00170       viewer-\/>update();}
\DoxyCodeLine{00171     \}}
\DoxyCodeLine{00172 }
\DoxyCodeLine{00173     QMouseEvent *mouseEvent = \textcolor{keyword}{dynamic\_cast<}QMouseEvent *\textcolor{keyword}{>}(e);}
\DoxyCodeLine{00174     \textcolor{keywordtype}{int} frame               = y2index(mouseEvent-\/>pos().y());}
\DoxyCodeLine{00175     m\_buttonPressCellIndex  = frame;}
\DoxyCodeLine{00176     \textcolor{keywordtype}{int} currentFrame        = getCurrentFrame();}
\DoxyCodeLine{00177     \textcolor{keywordtype}{int} x                   = mouseEvent-\/>pos().x();}
\DoxyCodeLine{00178     \textcolor{keywordtype}{int} y                   = mouseEvent-\/>pos().y() -\/ index2y(frame);}
\DoxyCodeLine{00179 }
\DoxyCodeLine{00180     \textcolor{keywordflow}{if} (x > 24 || (x > 12 \&\& frame != currentFrame)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00181     \textcolor{keywordflow}{if} (y < 12) \{}
\DoxyCodeLine{00182       \textcolor{keywordtype}{bool} isMosArea = x < 6;}
\DoxyCodeLine{00183       \textcolor{comment}{// click nel quadratino bianco.}}
\DoxyCodeLine{00184       \textcolor{keywordflow}{if} (isMosArea) \{}
\DoxyCodeLine{00185         \textcolor{comment}{// Mos}}
\DoxyCodeLine{00186         \textcolor{keywordtype}{bool} on  = !isMos(frame);}
\DoxyCodeLine{00187         m\_action = on ? ActivateMos : DeactivateMos;}
\DoxyCodeLine{00188         \textcolor{keywordflow}{if} (frame != currentFrame) setMos(frame, on);}
\DoxyCodeLine{00189       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (frame == currentFrame)}
\DoxyCodeLine{00190         m\_action = MoveHead;}
\DoxyCodeLine{00191       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00192         \textcolor{comment}{// Fos}}
\DoxyCodeLine{00193         \textcolor{keywordtype}{bool} on  = !isFos(frame);}
\DoxyCodeLine{00194         m\_action = on ? ActivateFos : DeactivateFos;}
\DoxyCodeLine{00195         setFos(frame, on);}
\DoxyCodeLine{00196       \}}
\DoxyCodeLine{00197     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00198       \textcolor{comment}{// fuori dal quadratino bianco: muovo il frame corrente}}
\DoxyCodeLine{00199       m\_action = MoveHead;}
\DoxyCodeLine{00200       setCurrentFrame(frame);}
\DoxyCodeLine{00201     \}}
\DoxyCodeLine{00202     viewer-\/>update();}
\DoxyCodeLine{00203   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (e-\/>type() == QEvent::MouseButtonRelease) \{}
\DoxyCodeLine{00204     QMouseEvent *mouseEvent = \textcolor{keyword}{dynamic\_cast<}QMouseEvent *\textcolor{keyword}{>}(e);}
\DoxyCodeLine{00205     \textcolor{keywordtype}{int} frame               = y2index(mouseEvent-\/>pos().y());}
\DoxyCodeLine{00206     \textcolor{keywordtype}{int} currentFrame        = getCurrentFrame();}
\DoxyCodeLine{00207     \textcolor{keywordtype}{int} x                   = mouseEvent-\/>pos().x();}
\DoxyCodeLine{00208     \textcolor{keywordtype}{int} y                   = mouseEvent-\/>pos().y() -\/ index2y(frame);}
\DoxyCodeLine{00209     \textcolor{keywordflow}{if} (x > 24 || (x > 12 \&\& frame != currentFrame)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00210     \textcolor{keywordflow}{if} (mouseEvent-\/>button() == Qt::RightButton) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00211     \textcolor{keywordflow}{if} (x < 12 \&\& y < 12 \&\& frame == currentFrame \&\&}
\DoxyCodeLine{00212         m\_buttonPressCellIndex == frame) \{}
\DoxyCodeLine{00213       enableOnionSkin(!isOnionSkinEnabled());}
\DoxyCodeLine{00214       viewer-\/>update();}
\DoxyCodeLine{00215     \}}
\DoxyCodeLine{00216   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (e-\/>type() == QEvent::MouseMove) \{}
\DoxyCodeLine{00217     QMouseEvent *mouseEvent = \textcolor{keyword}{dynamic\_cast<}QMouseEvent *\textcolor{keyword}{>}(e);}
\DoxyCodeLine{00218     \textcolor{keywordtype}{int} frame               = y2index(mouseEvent-\/>pos().y());}
\DoxyCodeLine{00219     \textcolor{keywordtype}{int} x                   = mouseEvent-\/>pos().x();}
\DoxyCodeLine{00220     \textcolor{keywordtype}{int} y                   = mouseEvent-\/>pos().y() -\/ index2y(frame);}
\DoxyCodeLine{00221     \textcolor{keywordflow}{if} (mouseEvent-\/>buttons() == 0) \{}
\DoxyCodeLine{00222       \textcolor{comment}{// mouse move}}
\DoxyCodeLine{00223       \textcolor{keywordtype}{int} highlightedFosFrame = (6 <= x \&\& x <= 12 \&\& y < 12) ? frame : -\/1;}
\DoxyCodeLine{00224       \textcolor{keywordflow}{if} (highlightedFosFrame != m\_highlightedFosFrame) \{}
\DoxyCodeLine{00225         m\_highlightedFosFrame = highlightedFosFrame;}
\DoxyCodeLine{00226         viewer-\/>update();}
\DoxyCodeLine{00227       \}}
\DoxyCodeLine{00228       \textcolor{keywordflow}{if} (getCurrentFrame() == frame)}
\DoxyCodeLine{00229         viewer-\/>setToolTip(tr(\textcolor{stringliteral}{"{}Current Frame"{}}));}
\DoxyCodeLine{00230       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (x < 7) \{}
\DoxyCodeLine{00231         viewer-\/>setToolTip(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00232       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (x < 13)}
\DoxyCodeLine{00233         viewer-\/>setToolTip(tr(\textcolor{stringliteral}{"{}Fixed Onion Skin Toggle"{}}));}
\DoxyCodeLine{00234       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00235         viewer-\/>setToolTip(tr(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00236     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mouseEvent-\/>buttons() \& Qt::LeftButton) \{}
\DoxyCodeLine{00237       \textcolor{comment}{// drag}}
\DoxyCodeLine{00238       \textcolor{keywordflow}{switch} (m\_action) \{}
\DoxyCodeLine{00239       \textcolor{keywordflow}{case} MoveHead:}
\DoxyCodeLine{00240         setCurrentFrame(frame);}
\DoxyCodeLine{00241         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00242       \textcolor{keywordflow}{case} ActivateMos:}
\DoxyCodeLine{00243         setMos(frame, \textcolor{keyword}{true});}
\DoxyCodeLine{00244         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00245       \textcolor{keywordflow}{case} DeactivateMos:}
\DoxyCodeLine{00246         setMos(frame, \textcolor{keyword}{false});}
\DoxyCodeLine{00247         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00248       \textcolor{keywordflow}{case} ActivateFos:}
\DoxyCodeLine{00249         setFos(frame, \textcolor{keyword}{true});}
\DoxyCodeLine{00250         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00251       \textcolor{keywordflow}{case} DeactivateFos:}
\DoxyCodeLine{00252         setFos(frame, \textcolor{keyword}{false});}
\DoxyCodeLine{00253         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00254       \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00255         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00256       \}}
\DoxyCodeLine{00257       viewer-\/>update();}
\DoxyCodeLine{00258     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mouseEvent-\/>buttons() \& Qt::MidButton)}
\DoxyCodeLine{00259       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00260   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00261     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00262   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00263 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_frame_head_gadget_ad19b6d00e4d763c4908285430dfc1836}\label{class_frame_head_gadget_ad19b6d00e4d763c4908285430dfc1836}} 
\index{FrameHeadGadget@{FrameHeadGadget}!isFos@{isFos}}
\index{isFos@{isFos}!FrameHeadGadget@{FrameHeadGadget}}
\doxysubsubsection{\texorpdfstring{isFos()}{isFos()}}
{\footnotesize\ttfamily bool Frame\+Head\+Gadget\+::is\+Fos (\begin{DoxyParamCaption}\item[{int}]{frame }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00265                                            \{}
\DoxyCodeLine{00266   \mbox{\hyperlink{class_onion_skin_mask}{OnionSkinMask}} osMask =}
\DoxyCodeLine{00267       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_afcdd56d9130b7c39a5227de08a0b65e4}{getCurrentOnionSkin}}()-\/>getOnionSkinMask();}
\DoxyCodeLine{00268   \textcolor{keywordflow}{return} osMask.isFos(frame);}
\DoxyCodeLine{00269 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_frame_head_gadget_a3cf46c918e6b86358097cdea725cd5c0}\label{class_frame_head_gadget_a3cf46c918e6b86358097cdea725cd5c0}} 
\index{FrameHeadGadget@{FrameHeadGadget}!isMos@{isMos}}
\index{isMos@{isMos}!FrameHeadGadget@{FrameHeadGadget}}
\doxysubsubsection{\texorpdfstring{isMos()}{isMos()}}
{\footnotesize\ttfamily bool Frame\+Head\+Gadget\+::is\+Mos (\begin{DoxyParamCaption}\item[{int}]{frame }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00271                                            \{}
\DoxyCodeLine{00272   \mbox{\hyperlink{class_onion_skin_mask}{OnionSkinMask}} osMask =}
\DoxyCodeLine{00273       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_afcdd56d9130b7c39a5227de08a0b65e4}{getCurrentOnionSkin}}()-\/>getOnionSkinMask();}
\DoxyCodeLine{00274   \textcolor{keywordflow}{return} osMask.isMos(frame -\/ getCurrentFrame());}
\DoxyCodeLine{00275 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_frame_head_gadget_a7d26225402cf2e93727f928653961de0}\label{class_frame_head_gadget_a7d26225402cf2e93727f928653961de0}} 
\index{FrameHeadGadget@{FrameHeadGadget}!setFos@{setFos}}
\index{setFos@{setFos}!FrameHeadGadget@{FrameHeadGadget}}
\doxysubsubsection{\texorpdfstring{setFos()}{setFos()}}
{\footnotesize\ttfamily void Frame\+Head\+Gadget\+::set\+Fos (\begin{DoxyParamCaption}\item[{int}]{frame,  }\item[{bool}]{on }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00277                                                \{}
\DoxyCodeLine{00278   \mbox{\hyperlink{class_t_onion_skin_mask_handle}{TOnionSkinMaskHandle}} *osmh = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_afcdd56d9130b7c39a5227de08a0b65e4}{getCurrentOnionSkin}}();}
\DoxyCodeLine{00279   \mbox{\hyperlink{class_onion_skin_mask}{OnionSkinMask}} osMask       = osmh-\/>getOnionSkinMask();}
\DoxyCodeLine{00280   osMask.\mbox{\hyperlink{class_onion_skin_mask_abec0776ab067027858d7c7a8c27f1b59}{setFos}}(frame, on);}
\DoxyCodeLine{00281   \textcolor{keywordflow}{if} (on \&\& !osMask.isEnabled()) osMask.enable(\textcolor{keyword}{true});}
\DoxyCodeLine{00282   osmh-\/>setOnionSkinMask(osMask);}
\DoxyCodeLine{00283   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>notifySceneChanged();}
\DoxyCodeLine{00284 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_frame_head_gadget_a0e5847836b6c2d7acae35a60de153847}\label{class_frame_head_gadget_a0e5847836b6c2d7acae35a60de153847}} 
\index{FrameHeadGadget@{FrameHeadGadget}!setMos@{setMos}}
\index{setMos@{setMos}!FrameHeadGadget@{FrameHeadGadget}}
\doxysubsubsection{\texorpdfstring{setMos()}{setMos()}}
{\footnotesize\ttfamily void Frame\+Head\+Gadget\+::set\+Mos (\begin{DoxyParamCaption}\item[{int}]{frame,  }\item[{bool}]{on }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00286                                                \{}
\DoxyCodeLine{00287   \textcolor{keywordflow}{if} (frame == getCurrentFrame()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00288   \mbox{\hyperlink{class_t_onion_skin_mask_handle}{TOnionSkinMaskHandle}} *osmh = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_afcdd56d9130b7c39a5227de08a0b65e4}{getCurrentOnionSkin}}();}
\DoxyCodeLine{00289   \mbox{\hyperlink{class_onion_skin_mask}{OnionSkinMask}} osMask       = osmh-\/>getOnionSkinMask();}
\DoxyCodeLine{00290   osMask.\mbox{\hyperlink{class_onion_skin_mask_a52cefe9a23f99c469ac6df66bf5555ab}{setMos}}(frame -\/ getCurrentFrame(), on);}
\DoxyCodeLine{00291   \textcolor{keywordflow}{if} (on \&\& !osMask.isEnabled()) osMask.enable(\textcolor{keyword}{true});}
\DoxyCodeLine{00292   osmh-\/>setOnionSkinMask(osMask);}
\DoxyCodeLine{00293   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>notifySceneChanged();}
\DoxyCodeLine{00294 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_frame_head_gadget_a9f11ae727646e21639e6c820f7e526ce}\label{class_frame_head_gadget_a9f11ae727646e21639e6c820f7e526ce}} 
\index{FrameHeadGadget@{FrameHeadGadget}!m\_action@{m\_action}}
\index{m\_action@{m\_action}!FrameHeadGadget@{FrameHeadGadget}}
\doxysubsubsection{\texorpdfstring{m\_action}{m\_action}}
{\footnotesize\ttfamily int Frame\+Head\+Gadget\+::m\+\_\+action\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_frame_head_gadget_a2329b21db185fc96a8fbd149161abf58}\label{class_frame_head_gadget_a2329b21db185fc96a8fbd149161abf58}} 
\index{FrameHeadGadget@{FrameHeadGadget}!m\_buttonPressCellIndex@{m\_buttonPressCellIndex}}
\index{m\_buttonPressCellIndex@{m\_buttonPressCellIndex}!FrameHeadGadget@{FrameHeadGadget}}
\doxysubsubsection{\texorpdfstring{m\_buttonPressCellIndex}{m\_buttonPressCellIndex}}
{\footnotesize\ttfamily int Frame\+Head\+Gadget\+::m\+\_\+button\+Press\+Cell\+Index\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_frame_head_gadget_afdecfc79061f0c6e86ca0d9a88dd19af}\label{class_frame_head_gadget_afdecfc79061f0c6e86ca0d9a88dd19af}} 
\index{FrameHeadGadget@{FrameHeadGadget}!m\_dragging@{m\_dragging}}
\index{m\_dragging@{m\_dragging}!FrameHeadGadget@{FrameHeadGadget}}
\doxysubsubsection{\texorpdfstring{m\_dragging}{m\_dragging}}
{\footnotesize\ttfamily bool Frame\+Head\+Gadget\+::m\+\_\+dragging\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_frame_head_gadget_aad9e85092075c00bd6061518a5610a99}\label{class_frame_head_gadget_aad9e85092075c00bd6061518a5610a99}} 
\index{FrameHeadGadget@{FrameHeadGadget}!m\_highlightedFosFrame@{m\_highlightedFosFrame}}
\index{m\_highlightedFosFrame@{m\_highlightedFosFrame}!FrameHeadGadget@{FrameHeadGadget}}
\doxysubsubsection{\texorpdfstring{m\_highlightedFosFrame}{m\_highlightedFosFrame}}
{\footnotesize\ttfamily int Frame\+Head\+Gadget\+::m\+\_\+highlighted\+Fos\+Frame\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_frame_head_gadget_a4daa1b77aac54605c5f68ba3d2c3c95a}\label{class_frame_head_gadget_a4daa1b77aac54605c5f68ba3d2c3c95a}} 
\index{FrameHeadGadget@{FrameHeadGadget}!m\_highlightedMosFrame@{m\_highlightedMosFrame}}
\index{m\_highlightedMosFrame@{m\_highlightedMosFrame}!FrameHeadGadget@{FrameHeadGadget}}
\doxysubsubsection{\texorpdfstring{m\_highlightedMosFrame}{m\_highlightedMosFrame}}
{\footnotesize\ttfamily int Frame\+Head\+Gadget\+::m\+\_\+highlighted\+Mos\+Frame\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/frameheadgadget.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/frameheadgadget.\+cpp\end{DoxyCompactItemize}
