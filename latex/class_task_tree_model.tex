\hypertarget{class_task_tree_model}{}\doxysection{Task\+Tree\+Model Class Reference}
\label{class_task_tree_model}\index{TaskTreeModel@{TaskTreeModel}}
Inheritance diagram for Task\+Tree\+Model\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_task_tree_model}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_task_tree_model_1_1_item}{Item}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_task_tree_model_aa07c72ee94eccdbc0bd19fe891da6ed9}{start}} (bool)
\item 
void \mbox{\hyperlink{class_task_tree_model_ae6315790c7d853b75d004fe6b6d6d67f}{stop}} (bool)
\item 
void \mbox{\hyperlink{class_task_tree_model_a1d42a2232147b4c32e15a8f68583cc45}{remove}} (bool)
\item 
void \mbox{\hyperlink{class_task_tree_model_a1ea888e2dc14ad778e13909721f4148e}{save}} (bool)
\item 
void \mbox{\hyperlink{class_task_tree_model_a0764be1a5d1f89093b7cf3fa691883e9}{saveas}} (bool)
\item 
void \mbox{\hyperlink{class_task_tree_model_a48afcb2ca954e325b167b3bb5671e6c7}{load}} (bool)
\item 
void \mbox{\hyperlink{class_task_tree_model_a708f8b42869f6b813f15a8e2486ab250}{add\+Cleanup\+Task}} (bool)
\item 
void \mbox{\hyperlink{class_task_tree_model_abb0ea33bb9c59ac90d4ba53fde978185}{add\+Render\+Task}} (bool)
\item 
void \mbox{\hyperlink{class_task_tree_model_a233ffc1f04bbeeb77a32924656babe5a}{setup\+Model\+Data}} ()
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_task_tree_model_a233ffc1f04bbeeb77a32924656babe5a}{setup\+Model\+Data()}} \+: refresh the model \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_task_tree_model_a069eacf9b4429d55912fe5708dfe88c6}{Task\+Tree\+Model}} (\mbox{\hyperlink{class_task_tree_view}{Task\+Tree\+View}} $\ast$parent=0)
\item 
void \mbox{\hyperlink{class_task_tree_model_a1f6b38a3329f0f82d52603afab6b5164}{update}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
QVariant \mbox{\hyperlink{class_task_tree_model_aef876aa6cb80f9891e5053da29601026}{data}} (const QModel\+Index \&index, int role) const override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_task_tree_model_a069eacf9b4429d55912fe5708dfe88c6}\label{class_task_tree_model_a069eacf9b4429d55912fe5708dfe88c6}} 
\index{TaskTreeModel@{TaskTreeModel}!TaskTreeModel@{TaskTreeModel}}
\index{TaskTreeModel@{TaskTreeModel}!TaskTreeModel@{TaskTreeModel}}
\doxysubsubsection{\texorpdfstring{TaskTreeModel()}{TaskTreeModel()}}
{\footnotesize\ttfamily Task\+Tree\+Model\+::\+Task\+Tree\+Model (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_task_tree_view}{Task\+Tree\+View}} $\ast$}]{parent = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01117     : \mbox{\hyperlink{class_tree_model}{TreeModel}}(parent), m\_view(parent) \{}
\DoxyCodeLine{01118   \mbox{\hyperlink{class_task_tree_model_a233ffc1f04bbeeb77a32924656babe5a}{setupModelData}}();}
\DoxyCodeLine{01119   emit layoutChanged();}
\DoxyCodeLine{01120 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_task_tree_model_a708f8b42869f6b813f15a8e2486ab250}\label{class_task_tree_model_a708f8b42869f6b813f15a8e2486ab250}} 
\index{TaskTreeModel@{TaskTreeModel}!addCleanupTask@{addCleanupTask}}
\index{addCleanupTask@{addCleanupTask}!TaskTreeModel@{TaskTreeModel}}
\doxysubsubsection{\texorpdfstring{addCleanupTask}{addCleanupTask}}
{\footnotesize\ttfamily void Task\+Tree\+Model\+::add\+Cleanup\+Task (\begin{DoxyParamCaption}\item[{bool}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01218                                        \{}
\DoxyCodeLine{01219   BatchesController::instance()-\/>loadTask(\textcolor{keyword}{false});}
\DoxyCodeLine{01220 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_task_tree_model_abb0ea33bb9c59ac90d4ba53fde978185}\label{class_task_tree_model_abb0ea33bb9c59ac90d4ba53fde978185}} 
\index{TaskTreeModel@{TaskTreeModel}!addRenderTask@{addRenderTask}}
\index{addRenderTask@{addRenderTask}!TaskTreeModel@{TaskTreeModel}}
\doxysubsubsection{\texorpdfstring{addRenderTask}{addRenderTask}}
{\footnotesize\ttfamily void Task\+Tree\+Model\+::add\+Render\+Task (\begin{DoxyParamCaption}\item[{bool}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01212                                       \{}
\DoxyCodeLine{01213   BatchesController::instance()-\/>loadTask(\textcolor{keyword}{true});}
\DoxyCodeLine{01214 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_task_tree_model_aef876aa6cb80f9891e5053da29601026}\label{class_task_tree_model_aef876aa6cb80f9891e5053da29601026}} 
\index{TaskTreeModel@{TaskTreeModel}!data@{data}}
\index{data@{data}!TaskTreeModel@{TaskTreeModel}}
\doxysubsubsection{\texorpdfstring{data()}{data()}}
{\footnotesize\ttfamily QVariant Task\+Tree\+Model\+::data (\begin{DoxyParamCaption}\item[{const QModel\+Index \&}]{index,  }\item[{int}]{role }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01124                                                                      \{}
\DoxyCodeLine{01125   \textcolor{keywordflow}{if} (!index.isValid()) \textcolor{keywordflow}{return} QVariant();}
\DoxyCodeLine{01126 }
\DoxyCodeLine{01127   Item *item = (Item *)index.internalPointer();}
\DoxyCodeLine{01128 }
\DoxyCodeLine{01129   \textcolor{keywordflow}{if} (role == Qt::DecorationRole) \{}
\DoxyCodeLine{01130     \textcolor{keywordflow}{switch} (item-\/>getDepth()) \{}
\DoxyCodeLine{01131     \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{01132       \textcolor{keywordflow}{return} QVariant();}
\DoxyCodeLine{01133     \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{01134       \textcolor{keywordflow}{return} createQIcon(\textcolor{stringliteral}{"{}tasks"{}});}
\DoxyCodeLine{01135     \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{01136     \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{01137       \mbox{\hyperlink{class_t_farm_task}{TFarmTask}} *t         = item-\/>getTask();}
\DoxyCodeLine{01138       \textcolor{keywordtype}{bool} sourceFileIsCLN = (t-\/>\mbox{\hyperlink{class_t_farm_task_a8a00dffae154ce7baac5f23becb7a08c}{m\_taskFilePath}}.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}cln"{}});}
\DoxyCodeLine{01139       \textcolor{keywordflow}{switch} (t-\/>\mbox{\hyperlink{class_t_farm_task_a2be81cd241bf4cbc9aa039b7183e7c98}{m\_status}}) \{}
\DoxyCodeLine{01140       \textcolor{keywordflow}{case} Suspended:}
\DoxyCodeLine{01141         \textcolor{keywordflow}{return} QIcon(}
\DoxyCodeLine{01142             t-\/>\mbox{\hyperlink{class_t_farm_task_a45de8b0dd56563a682b1d0eaa765fb80}{m\_isComposerTask}}}
\DoxyCodeLine{01143                 ? getIconThemePath(\textcolor{stringliteral}{"{}actions/35/task\_render\_suspended.svg"{}})}
\DoxyCodeLine{01144                 : (sourceFileIsCLN}
\DoxyCodeLine{01145                        ? getIconThemePath(\textcolor{stringliteral}{"{}actions/35/task\_cln\_suspended.svg"{}})}
\DoxyCodeLine{01146                        : getIconThemePath(}
\DoxyCodeLine{01147                              \textcolor{stringliteral}{"{}actions/35/task\_cleanup\_suspended.svg"{}})));}
\DoxyCodeLine{01148       \textcolor{keywordflow}{case} Waiting:}
\DoxyCodeLine{01149         \textcolor{keywordflow}{return} QIcon(}
\DoxyCodeLine{01150             t-\/>\mbox{\hyperlink{class_t_farm_task_a45de8b0dd56563a682b1d0eaa765fb80}{m\_isComposerTask}}}
\DoxyCodeLine{01151                 ? getIconThemePath(}
\DoxyCodeLine{01152                       \textcolor{stringliteral}{"{}actions/35/task\_render\_completed\_with\_errors.svg"{}})}
\DoxyCodeLine{01153                 : (sourceFileIsCLN}
\DoxyCodeLine{01154                        ? getIconThemePath(}
\DoxyCodeLine{01155                              \textcolor{stringliteral}{"{}actions/35/task\_cln\_completed\_with\_errors.svg"{}})}
\DoxyCodeLine{01156                        : getIconThemePath(}
\DoxyCodeLine{01157                              \textcolor{stringliteral}{"{}actions/35/"{}}}
\DoxyCodeLine{01158                              \textcolor{stringliteral}{"{}task\_cleanup\_completed\_with\_errors.svg"{}})));}
\DoxyCodeLine{01159       \textcolor{keywordflow}{case} Running:}
\DoxyCodeLine{01160         \textcolor{keywordflow}{return} QIcon(}
\DoxyCodeLine{01161             t-\/>\mbox{\hyperlink{class_t_farm_task_a45de8b0dd56563a682b1d0eaa765fb80}{m\_isComposerTask}}}
\DoxyCodeLine{01162                 ? getIconThemePath(\textcolor{stringliteral}{"{}actions/35/task\_render\_computing.svg"{}})}
\DoxyCodeLine{01163                 : (sourceFileIsCLN}
\DoxyCodeLine{01164                        ? getIconThemePath(\textcolor{stringliteral}{"{}actions/35/task\_cln\_computing.svg"{}})}
\DoxyCodeLine{01165                        : getIconThemePath(}
\DoxyCodeLine{01166                              \textcolor{stringliteral}{"{}actions/35/task\_cleanup\_computing.svg"{}})));}
\DoxyCodeLine{01167       \textcolor{keywordflow}{case} Completed:}
\DoxyCodeLine{01168         \textcolor{keywordflow}{return} QIcon(}
\DoxyCodeLine{01169             t-\/>\mbox{\hyperlink{class_t_farm_task_a45de8b0dd56563a682b1d0eaa765fb80}{m\_isComposerTask}}}
\DoxyCodeLine{01170                 ? getIconThemePath(\textcolor{stringliteral}{"{}actions/35/task\_render\_completed.svg"{}})}
\DoxyCodeLine{01171                 : (sourceFileIsCLN}
\DoxyCodeLine{01172                        ? getIconThemePath(\textcolor{stringliteral}{"{}actions/35/task\_cln\_completed.svg"{}})}
\DoxyCodeLine{01173                        : getIconThemePath(}
\DoxyCodeLine{01174                              \textcolor{stringliteral}{"{}actions/35/task\_cleanup\_completed.svg"{}})));}
\DoxyCodeLine{01175       \textcolor{keywordflow}{case} Aborted:}
\DoxyCodeLine{01176       \textcolor{keywordflow}{case} TaskUnknown:}
\DoxyCodeLine{01177         \textcolor{keywordflow}{return} QIcon(}
\DoxyCodeLine{01178             t-\/>\mbox{\hyperlink{class_t_farm_task_a45de8b0dd56563a682b1d0eaa765fb80}{m\_isComposerTask}}}
\DoxyCodeLine{01179                 ? getIconThemePath(\textcolor{stringliteral}{"{}actions/35/task\_render\_failed.svg"{}})}
\DoxyCodeLine{01180                 : (sourceFileIsCLN}
\DoxyCodeLine{01181                        ? getIconThemePath(\textcolor{stringliteral}{"{}actions/35/task\_cln\_failed.svg"{}})}
\DoxyCodeLine{01182                        : getIconThemePath(}
\DoxyCodeLine{01183                              \textcolor{stringliteral}{"{}actions/35/task\_cleanup\_failed.svg"{}})));}
\DoxyCodeLine{01184       \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01185         assert(\textcolor{keyword}{false});}
\DoxyCodeLine{01186       \}}
\DoxyCodeLine{01187     \}}
\DoxyCodeLine{01188     assert(\textcolor{keyword}{false});}
\DoxyCodeLine{01189   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (role == Qt::DisplayRole)}
\DoxyCodeLine{01190     \textcolor{keywordflow}{return} item-\/>m\_task ? item-\/>m\_task-\/>m\_name : item-\/>m\_name;}
\DoxyCodeLine{01191 }
\DoxyCodeLine{01192   \textcolor{keywordflow}{return} QVariant();}
\DoxyCodeLine{01193 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_task_tree_model_a48afcb2ca954e325b167b3bb5671e6c7}\label{class_task_tree_model_a48afcb2ca954e325b167b3bb5671e6c7}} 
\index{TaskTreeModel@{TaskTreeModel}!load@{load}}
\index{load@{load}!TaskTreeModel@{TaskTreeModel}}
\doxysubsubsection{\texorpdfstring{load}{load}}
{\footnotesize\ttfamily void Task\+Tree\+Model\+::load (\begin{DoxyParamCaption}\item[{bool}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01208 \{ BatchesController::instance()-\/>load(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_task_tree_model_a1d42a2232147b4c32e15a8f68583cc45}\label{class_task_tree_model_a1d42a2232147b4c32e15a8f68583cc45}} 
\index{TaskTreeModel@{TaskTreeModel}!remove@{remove}}
\index{remove@{remove}!TaskTreeModel@{TaskTreeModel}}
\doxysubsubsection{\texorpdfstring{remove}{remove}}
{\footnotesize\ttfamily void Task\+Tree\+Model\+::remove (\begin{DoxyParamCaption}\item[{bool}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01287                                \{}
\DoxyCodeLine{01288   QModelIndexList indexList = m\_view-\/>getSelectedIndexes();}
\DoxyCodeLine{01289   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01290 }
\DoxyCodeLine{01291   \textcolor{keywordflow}{if} (indexList.size() == 0) \{}
\DoxyCodeLine{01292     \textcolor{keywordflow}{if} (DVGui::MsgBox(tr(\textcolor{stringliteral}{"{}Are you sure you want to remove ALL tasks?"{}}),}
\DoxyCodeLine{01293                       tr(\textcolor{stringliteral}{"{}Remove All"{}}), tr(\textcolor{stringliteral}{"{}Cancel"{}})) > 1)}
\DoxyCodeLine{01294       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01295 }
\DoxyCodeLine{01296     BatchesController::instance()-\/>removeAllTasks();}
\DoxyCodeLine{01297   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01298     \textcolor{keywordflow}{for} (i = 0; i < indexList.size(); i++) \{}
\DoxyCodeLine{01299       QModelIndex modelIndex = indexList.at(i);}
\DoxyCodeLine{01300       \textcolor{keywordflow}{if} (!modelIndex.isValid()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01301       \mbox{\hyperlink{class_task_tree_model_1_1_item}{TaskTreeModel::Item}} *item = (Item *)modelIndex.internalPointer();}
\DoxyCodeLine{01302       \textcolor{keywordflow}{if} (item-\/>\mbox{\hyperlink{class_tree_model_1_1_item_a72f8c01ad307fdab10c8e6c7329a3f1e}{getDepth}}() == 1)  \textcolor{comment}{// significa che ho selezionato la radice!}}
\DoxyCodeLine{01303       \{}
\DoxyCodeLine{01304         assert(indexList.size() == 1);}
\DoxyCodeLine{01305         BatchesController::instance()-\/>removeAllTasks();}
\DoxyCodeLine{01306         \textcolor{keywordflow}{break};}
\DoxyCodeLine{01307       \}}
\DoxyCodeLine{01308       \mbox{\hyperlink{class_t_farm_task}{TFarmTask}} *task = item-\/>getTask();}
\DoxyCodeLine{01309       \textcolor{keywordflow}{if} (!task) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01310       BatchesController::instance()-\/>removeTask(task-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}});}
\DoxyCodeLine{01311     \}}
\DoxyCodeLine{01312     \mbox{\hyperlink{class_task_tree_view}{TaskTreeView}} *p = (\mbox{\hyperlink{class_task_tree_view}{TaskTreeView}} *)QObject::parent();}
\DoxyCodeLine{01313 }
\DoxyCodeLine{01314     p-\/>m\_mainViewer-\/>setSelected(0);}
\DoxyCodeLine{01315   \}}
\DoxyCodeLine{01316 }
\DoxyCodeLine{01317   \mbox{\hyperlink{class_task_tree_model_a233ffc1f04bbeeb77a32924656babe5a}{setupModelData}}();}
\DoxyCodeLine{01318   emit layoutChanged();}
\DoxyCodeLine{01319 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_task_tree_model_a1ea888e2dc14ad778e13909721f4148e}\label{class_task_tree_model_a1ea888e2dc14ad778e13909721f4148e}} 
\index{TaskTreeModel@{TaskTreeModel}!save@{save}}
\index{save@{save}!TaskTreeModel@{TaskTreeModel}}
\doxysubsubsection{\texorpdfstring{save}{save}}
{\footnotesize\ttfamily void Task\+Tree\+Model\+::save (\begin{DoxyParamCaption}\item[{bool}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01197                              \{}
\DoxyCodeLine{01198   BatchesController::instance()-\/>save();}
\DoxyCodeLine{01199   \textcolor{comment}{// SaveTaskListPopup popup;}}
\DoxyCodeLine{01200 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_task_tree_model_a0764be1a5d1f89093b7cf3fa691883e9}\label{class_task_tree_model_a0764be1a5d1f89093b7cf3fa691883e9}} 
\index{TaskTreeModel@{TaskTreeModel}!saveas@{saveas}}
\index{saveas@{saveas}!TaskTreeModel@{TaskTreeModel}}
\doxysubsubsection{\texorpdfstring{saveas}{saveas}}
{\footnotesize\ttfamily void Task\+Tree\+Model\+::saveas (\begin{DoxyParamCaption}\item[{bool}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01204 \{ BatchesController::instance()-\/>saveas(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_task_tree_model_a233ffc1f04bbeeb77a32924656babe5a}\label{class_task_tree_model_a233ffc1f04bbeeb77a32924656babe5a}} 
\index{TaskTreeModel@{TaskTreeModel}!setupModelData@{setupModelData}}
\index{setupModelData@{setupModelData}!TaskTreeModel@{TaskTreeModel}}
\doxysubsubsection{\texorpdfstring{setupModelData}{setupModelData}}
{\footnotesize\ttfamily void Task\+Tree\+Model\+::setup\+Model\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



\mbox{\hyperlink{class_task_tree_model_a233ffc1f04bbeeb77a32924656babe5a}{setup\+Model\+Data()}} \+: refresh the model 


\begin{DoxyCode}{0}
\DoxyCodeLine{01336                                    \{}
\DoxyCodeLine{01337   \mbox{\hyperlink{class_tree_model_a6691d71d6af29243ec39421f1e1ede57}{beginRefresh}}();}
\DoxyCodeLine{01338 }
\DoxyCodeLine{01339   \mbox{\hyperlink{class_batches_controller}{BatchesController}} *controller = BatchesController::instance();}
\DoxyCodeLine{01340   QString taskListName          = controller-\/>getListName();}
\DoxyCodeLine{01341 }
\DoxyCodeLine{01342   \textcolor{comment}{// setup root and tasklist. set the taskList's name}}
\DoxyCodeLine{01343   Item *root     = 0;}
\DoxyCodeLine{01344   Item *taskList = 0;}
\DoxyCodeLine{01345   \textcolor{keywordflow}{if} (!getRootItem()) \{}
\DoxyCodeLine{01346     setRootItem(root = \textcolor{keyword}{new} Item(\textcolor{stringliteral}{"{}Root"{}}));}
\DoxyCodeLine{01347     root-\/>appendChild(taskList = \textcolor{keyword}{new} Item(taskListName));}
\DoxyCodeLine{01348   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01349     root     = \textcolor{keyword}{static\_cast<}Item *\textcolor{keyword}{>}(getRootItem());}
\DoxyCodeLine{01350     taskList = \textcolor{keyword}{static\_cast<}Item *\textcolor{keyword}{>}(root-\/>getChild(0));}
\DoxyCodeLine{01351     taskList-\/>setName(taskListName);}
\DoxyCodeLine{01352     \textcolor{comment}{// TODO: emettere un dataChanged se il nome e' diverso?}}
\DoxyCodeLine{01353   \}}
\DoxyCodeLine{01354   assert(root);}
\DoxyCodeLine{01355   assert(root-\/>getChildCount() == 1);}
\DoxyCodeLine{01356 }
\DoxyCodeLine{01357   \textcolor{comment}{// update the list of tasks}}
\DoxyCodeLine{01358   \textcolor{keywordtype}{int} i, j;}
\DoxyCodeLine{01359   QList<TreeModel::Item *> tasks;}
\DoxyCodeLine{01360   \textcolor{keywordflow}{for} (i = 0; i < controller-\/>getTaskCount(); i++) \{}
\DoxyCodeLine{01361     \mbox{\hyperlink{class_t_farm_task_group}{TFarmTaskGroup}} *group =}
\DoxyCodeLine{01362         \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_farm_task_group}{TFarmTaskGroup}} *\textcolor{keyword}{>}(controller-\/>getTask(i));}
\DoxyCodeLine{01363     \textcolor{keywordflow}{if} (group) tasks.push\_back(\textcolor{keyword}{new} Item(group));}
\DoxyCodeLine{01364   \}}
\DoxyCodeLine{01365   taskList-\/>setChildren(tasks);}
\DoxyCodeLine{01366 }
\DoxyCodeLine{01367   \textcolor{comment}{// foreach task (the new ones, but also the old ones) update}}
\DoxyCodeLine{01368   \textcolor{comment}{// the list of sub-\/tasks}}
\DoxyCodeLine{01369   \textcolor{keywordflow}{for} (i = 0; i < taskList-\/>getChildCount(); i++) \{}
\DoxyCodeLine{01370     \mbox{\hyperlink{class_tree_model_1_1_item}{TreeModel::Item}} *item = taskList-\/>getChild(i);}
\DoxyCodeLine{01371     \mbox{\hyperlink{class_t_farm_task_group}{TFarmTaskGroup}} *group =}
\DoxyCodeLine{01372         \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_t_farm_task_group}{TFarmTaskGroup}} *\textcolor{keyword}{>}(item-\/>\mbox{\hyperlink{class_tree_model_1_1_item_a2385fa9b4d53c32ab269eccb1a7acc25}{getInternalPointer}}());}
\DoxyCodeLine{01373     QList<TreeModel::Item *> subTasks;}
\DoxyCodeLine{01374     \textcolor{keywordflow}{for} (j = 0; j < group-\/>getTaskCount(); j++)}
\DoxyCodeLine{01375       subTasks.push\_back(\textcolor{keyword}{new} Item(group-\/>getTask(j)));}
\DoxyCodeLine{01376     item-\/>setChildren(subTasks);}
\DoxyCodeLine{01377   \}}
\DoxyCodeLine{01378   endRefresh();}
\DoxyCodeLine{01379   m\_view-\/>expandAll();}
\DoxyCodeLine{01380 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00179}{Tree\+Model\+::begin\+Refresh()}}, and \mbox{\hyperlink{l00048}{Tree\+Model\+::\+Item\+::get\+Internal\+Pointer()}}.

\mbox{\Hypertarget{class_task_tree_model_aa07c72ee94eccdbc0bd19fe891da6ed9}\label{class_task_tree_model_aa07c72ee94eccdbc0bd19fe891da6ed9}} 
\index{TaskTreeModel@{TaskTreeModel}!start@{start}}
\index{start@{start}!TaskTreeModel@{TaskTreeModel}}
\doxysubsubsection{\texorpdfstring{start}{start}}
{\footnotesize\ttfamily void Task\+Tree\+Model\+::start (\begin{DoxyParamCaption}\item[{bool}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01224                               \{}
\DoxyCodeLine{01225   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01226     TMsgCore::instance()-\/>openConnection();}
\DoxyCodeLine{01227     QModelIndexList indexList = m\_view-\/>getSelectedIndexes();}
\DoxyCodeLine{01228     \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01229 }
\DoxyCodeLine{01230     \textcolor{keywordflow}{if} (indexList.size() == 0)}
\DoxyCodeLine{01231       BatchesController::instance()-\/>startAll();}
\DoxyCodeLine{01232     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01233       \textcolor{keywordflow}{for} (i = 0; i < indexList.size(); i++) \{}
\DoxyCodeLine{01234         QModelIndex modelIndex = indexList.at(i);}
\DoxyCodeLine{01235         \textcolor{keywordflow}{if} (!modelIndex.isValid()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01236         \mbox{\hyperlink{class_task_tree_model_1_1_item}{TaskTreeModel::Item}} *item = (Item *)modelIndex.internalPointer();}
\DoxyCodeLine{01237         \textcolor{keywordflow}{if} (item-\/>\mbox{\hyperlink{class_tree_model_1_1_item_a72f8c01ad307fdab10c8e6c7329a3f1e}{getDepth}}() == 1)  \textcolor{comment}{// significa che ho selezionato la radice!}}
\DoxyCodeLine{01238         \{}
\DoxyCodeLine{01239           assert(indexList.size() == 1);}
\DoxyCodeLine{01240           BatchesController::instance()-\/>startAll();}
\DoxyCodeLine{01241           \textcolor{keywordflow}{break};}
\DoxyCodeLine{01242         \}}
\DoxyCodeLine{01243 }
\DoxyCodeLine{01244         \mbox{\hyperlink{class_t_farm_task}{TFarmTask}} *task = item-\/>getTask();}
\DoxyCodeLine{01245         \textcolor{keywordflow}{if} (!task) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01246         BatchesController::instance()-\/>start(task-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}});}
\DoxyCodeLine{01247       \}}
\DoxyCodeLine{01248   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{01249     DVGui::warning(QString::fromStdString(::to\_string(e.getMessage())));}
\DoxyCodeLine{01250   \}}
\DoxyCodeLine{01251 }
\DoxyCodeLine{01252   emit layoutChanged();}
\DoxyCodeLine{01253 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_task_tree_model_ae6315790c7d853b75d004fe6b6d6d67f}\label{class_task_tree_model_ae6315790c7d853b75d004fe6b6d6d67f}} 
\index{TaskTreeModel@{TaskTreeModel}!stop@{stop}}
\index{stop@{stop}!TaskTreeModel@{TaskTreeModel}}
\doxysubsubsection{\texorpdfstring{stop}{stop}}
{\footnotesize\ttfamily void Task\+Tree\+Model\+::stop (\begin{DoxyParamCaption}\item[{bool}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01257                              \{}
\DoxyCodeLine{01258   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01259     QModelIndexList indexList = m\_view-\/>getSelectedIndexes();}
\DoxyCodeLine{01260     \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01261     \textcolor{keywordflow}{if} (indexList.empty())}
\DoxyCodeLine{01262       BatchesController::instance()-\/>stopAll();}
\DoxyCodeLine{01263     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01264       \textcolor{keywordflow}{for} (i = 0; i < indexList.size(); i++) \{}
\DoxyCodeLine{01265         QModelIndex modelIndex = indexList.at(i);}
\DoxyCodeLine{01266         \textcolor{keywordflow}{if} (!modelIndex.isValid()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01267         \mbox{\hyperlink{class_task_tree_model_1_1_item}{TaskTreeModel::Item}} *item = (Item *)modelIndex.internalPointer();}
\DoxyCodeLine{01268         \textcolor{keywordflow}{if} (item-\/>\mbox{\hyperlink{class_tree_model_1_1_item_a72f8c01ad307fdab10c8e6c7329a3f1e}{getDepth}}() == 1)  \textcolor{comment}{// significa che ho selezionato la radice!}}
\DoxyCodeLine{01269         \{}
\DoxyCodeLine{01270           assert(indexList.size() == 1);}
\DoxyCodeLine{01271           BatchesController::instance()-\/>stopAll();}
\DoxyCodeLine{01272           \textcolor{keywordflow}{break};}
\DoxyCodeLine{01273         \}}
\DoxyCodeLine{01274         \mbox{\hyperlink{class_t_farm_task}{TFarmTask}} *task = item-\/>getTask();}
\DoxyCodeLine{01275         \textcolor{keywordflow}{if} (!task) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01276         BatchesController::instance()-\/>stop(task-\/>\mbox{\hyperlink{class_t_farm_task_a87ab2a7b7bcb3c5fc19ff3d38f8b93d6}{m\_id}});}
\DoxyCodeLine{01277       \}}
\DoxyCodeLine{01278   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{01279     DVGui::warning(QString::fromStdString(::to\_string(e.getMessage())));}
\DoxyCodeLine{01280   \}}
\DoxyCodeLine{01281 }
\DoxyCodeLine{01282   emit layoutChanged();}
\DoxyCodeLine{01283 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_task_tree_model_a1f6b38a3329f0f82d52603afab6b5164}\label{class_task_tree_model_a1f6b38a3329f0f82d52603afab6b5164}} 
\index{TaskTreeModel@{TaskTreeModel}!update@{update}}
\index{update@{update}!TaskTreeModel@{TaskTreeModel}}
\doxysubsubsection{\texorpdfstring{update()}{update()}}
{\footnotesize\ttfamily void Task\+Tree\+Model\+::update (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01328                            \{}
\DoxyCodeLine{01329   \textcolor{comment}{// assert(0);}}
\DoxyCodeLine{01330   emit layoutChanged();}
\DoxyCodeLine{01331 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/tasksviewer.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/tasksviewer.\+cpp\end{DoxyCompactItemize}
