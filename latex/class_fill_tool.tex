\hypertarget{class_fill_tool}{}\doxysection{Fill\+Tool Class Reference}
\label{class_fill_tool}\index{FillTool@{FillTool}}
Inheritance diagram for Fill\+Tool\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_fill_tool}
\end{center}
\end{figure}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_fill_tool_aae32f7ded195d440a0b65abb5c7ebc1b}{on\+Frame\+Switched}} () override
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_fill_tool_afb002edc53688d6c9ca2ce286152c17d}{Fill\+Tool}} (int target\+Type)
\item 
\mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} \mbox{\hyperlink{class_fill_tool_a6756456b757977cae27ab77d1da1a491}{get\+Tool\+Type}} () const override
\item 
void \mbox{\hyperlink{class_fill_tool_a6975faf63f78e3e75c49f35633732c9e}{update\+Translation}} () override
\item 
\mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ \mbox{\hyperlink{class_fill_tool_a4c2affca938696c6ed0c06c79500fa2d}{get\+Properties}} (int target\+Type) override
\item 
\mbox{\hyperlink{class_fill_parameters}{Fill\+Parameters}} \mbox{\hyperlink{class_fill_tool_ac78e7fc28cd4afd5d90229b7de73bd6a}{get\+Fill\+Parameters}} () const
\item 
void \mbox{\hyperlink{class_fill_tool_a5a2ce00779939e12227838d7504c5490}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_fill_tool_a2e4ea0852608583ca27388e394e1046f}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_fill_tool_ad22605370f6b4f0904863ba868232d5f}{left\+Button\+Up}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_fill_tool_a6806f9663f8d47a5ff7afcca6e3dd30e}{mouse\+Move}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_fill_tool_a5f4e7c0e82b187ce6776f9915e13be79}{left\+Button\+Double\+Click}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_fill_tool_adf303d88dae8ae16fe093eef1709f3f7}{reset\+Multi}} ()
\item 
bool \mbox{\hyperlink{class_fill_tool_a6d4ed6a6894253534c06673f04da9c97}{on\+Property\+Changed}} (std\+::string property\+Name) override
\item 
void \mbox{\hyperlink{class_fill_tool_a49e242f05ee306d70fbc9f015990f726}{on\+Image\+Changed}} () override
\begin{DoxyCompactList}\small\item\em Notifies changes in the image in use. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_fill_tool_a9fe12e5e18644d982279efb0e14e6034}{draw}} () override
\begin{DoxyCompactList}\small\item\em Draws the tool on the viewer. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_fill_tool_ab73d58f296f7e7f8af8df5c8cba4db1d}{pick}} (const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \&image, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const int frame=-\/1)
\item 
int \mbox{\hyperlink{class_fill_tool_a18642233a1d382430a0b871cf4e3e487}{pick\+Onion\+Color}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos)
\item 
void \mbox{\hyperlink{class_fill_tool_af61e1af3180129755438225ac47c05d0}{on\+Enter}} () override
\begin{DoxyCompactList}\small\item\em Callback for the mouse entering the viewer area. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_fill_tool_a9c0a3714baf4d92b5a3b4442fd2d83bf}{on\+Activate}} () override
\begin{DoxyCompactList}\small\item\em Callback invoked whenever the tool activates. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_fill_tool_a8b67bbeb3f26c5d64ef932512f0d31fc}{on\+Deactivate}} () override
\begin{DoxyCompactList}\small\item\em Callback for tool deactivation, includes tool switch. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_fill_tool_a4fe37650c48440cd6c93947d97778054}{get\+Cursor\+Id}} () const override
\begin{DoxyCompactList}\small\item\em Returns the type of cursor used by the tool. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_fill_tool_ac087d54a241cc586392c7f403e599d27}{get\+Color\+Class}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_fill_tool_afb002edc53688d6c9ca2ce286152c17d}\label{class_fill_tool_afb002edc53688d6c9ca2ce286152c17d}} 
\index{FillTool@{FillTool}!FillTool@{FillTool}}
\index{FillTool@{FillTool}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{FillTool()}{FillTool()}}
{\footnotesize\ttfamily Fill\+Tool\+::\+Fill\+Tool (\begin{DoxyParamCaption}\item[{int}]{target\+Type }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01721     : \mbox{\hyperlink{class_t_tool_a9c63ec35f606e755d0d036bf4fed62ab}{TTool}}(\textcolor{stringliteral}{"{}T\_Fill"{}})}
\DoxyCodeLine{01722     , m\_frameRange(\textcolor{stringliteral}{"{}Frame Range"{}}, \textcolor{keyword}{false})  \textcolor{comment}{// W\_ToolOptions\_FrameRange}}
\DoxyCodeLine{01723     , m\_fillType(\textcolor{stringliteral}{"{}Type:"{}})}
\DoxyCodeLine{01724     , m\_selective(\textcolor{stringliteral}{"{}Selective"{}}, \textcolor{keyword}{false})}
\DoxyCodeLine{01725     , m\_colorType(\textcolor{stringliteral}{"{}Mode:"{}})}
\DoxyCodeLine{01726     , m\_onion(\textcolor{stringliteral}{"{}Onion Skin"{}}, \textcolor{keyword}{false})}
\DoxyCodeLine{01727     , m\_fillDepth(\textcolor{stringliteral}{"{}Fill Depth"{}}, 0, 15, 0, 15)}
\DoxyCodeLine{01728     , m\_segment(\textcolor{stringliteral}{"{}Segment"{}}, \textcolor{keyword}{false})}
\DoxyCodeLine{01729     , m\_onionStyleId(0)}
\DoxyCodeLine{01730     , m\_currCell(-\/1, -\/1)}
\DoxyCodeLine{01731     , m\_maxGapDistance(\textcolor{stringliteral}{"{}Maximum Gap"{}}, 0.01, 10.0, 1.15)}
\DoxyCodeLine{01732     , m\_firstTime(\textcolor{keyword}{true})}
\DoxyCodeLine{01733     , m\_autopaintLines(\textcolor{stringliteral}{"{}Autopaint Lines"{}}, \textcolor{keyword}{true}) \{}
\DoxyCodeLine{01734   m\_rectFill           = \textcolor{keyword}{new} AreaFillTool(\textcolor{keyword}{this});}
\DoxyCodeLine{01735   m\_normalLineFillTool = \textcolor{keyword}{new} \mbox{\hyperlink{class_normal_line_fill_tool}{NormalLineFillTool}}(\textcolor{keyword}{this});}
\DoxyCodeLine{01736 }
\DoxyCodeLine{01737   bind(targetType);}
\DoxyCodeLine{01738   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_fillType);}
\DoxyCodeLine{01739   m\_fillType.addValue(NORMALFILL);}
\DoxyCodeLine{01740   m\_fillType.addValue(RECTFILL);}
\DoxyCodeLine{01741   m\_fillType.addValue(FREEHANDFILL);}
\DoxyCodeLine{01742   m\_fillType.addValue(POLYLINEFILL);}
\DoxyCodeLine{01743 }
\DoxyCodeLine{01744   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_colorType);}
\DoxyCodeLine{01745   m\_colorType.addValue(LINES);}
\DoxyCodeLine{01746   m\_colorType.addValue(AREAS);}
\DoxyCodeLine{01747   m\_colorType.addValue(ALL);}
\DoxyCodeLine{01748 }
\DoxyCodeLine{01749   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_selective);}
\DoxyCodeLine{01750   \textcolor{keywordflow}{if} (targetType == \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{TTool::ToonzImage}}) \{}
\DoxyCodeLine{01751     m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_fillDepth);}
\DoxyCodeLine{01752     m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_segment);}
\DoxyCodeLine{01753   \}}
\DoxyCodeLine{01754   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_onion);}
\DoxyCodeLine{01755   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_frameRange);}
\DoxyCodeLine{01756   \textcolor{keywordflow}{if} (targetType == \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a6528d353c20fcbe8932de09845117046}{TTool::VectorImage}}) \{}
\DoxyCodeLine{01757     m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_maxGapDistance);}
\DoxyCodeLine{01758     m\_maxGapDistance.setId(\textcolor{stringliteral}{"{}MaxGapDistance"{}});}
\DoxyCodeLine{01759   \}}
\DoxyCodeLine{01760   \textcolor{keywordflow}{if} (targetType == \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{TTool::ToonzImage}}) m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_autopaintLines);}
\DoxyCodeLine{01761   m\_selective.setId(\textcolor{stringliteral}{"{}Selective"{}});}
\DoxyCodeLine{01762   m\_onion.setId(\textcolor{stringliteral}{"{}OnionSkin"{}});}
\DoxyCodeLine{01763   m\_frameRange.setId(\textcolor{stringliteral}{"{}FrameRange"{}});}
\DoxyCodeLine{01764   m\_segment.setId(\textcolor{stringliteral}{"{}SegmentInk"{}});}
\DoxyCodeLine{01765   m\_fillType.setId(\textcolor{stringliteral}{"{}Type"{}});}
\DoxyCodeLine{01766   m\_colorType.setId(\textcolor{stringliteral}{"{}Mode"{}});}
\DoxyCodeLine{01767   m\_autopaintLines.setId(\textcolor{stringliteral}{"{}AutopaintLines"{}});}
\DoxyCodeLine{01768 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_fill_tool_a9fe12e5e18644d982279efb0e14e6034}\label{class_fill_tool_a9fe12e5e18644d982279efb0e14e6034}} 
\index{FillTool@{FillTool}!draw@{draw}}
\index{draw@{draw}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Fill\+Tool\+::draw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Draws the tool on the viewer. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a058bf656d73bf3cd63b9826cbaaf48e0}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02144                     \{}
\DoxyCodeLine{02145   \textcolor{keywordflow}{if} (Preferences::instance()-\/>getFillOnlySavebox()) \{}
\DoxyCodeLine{02146     \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}})\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{false});}
\DoxyCodeLine{02147     \textcolor{keywordflow}{if} (ti) \{}
\DoxyCodeLine{02148       \mbox{\hyperlink{class_t_rect_t}{TRectD}} bbox =}
\DoxyCodeLine{02149           ToonzImageUtils::convertRasterToWorld(convert(ti-\/>getBBox()), ti);}
\DoxyCodeLine{02150       drawRect(bbox.enlarge(0.5) * ti-\/>getSubsampling(), TPixel32::Black,}
\DoxyCodeLine{02151                0x5555, \textcolor{keyword}{true});}
\DoxyCodeLine{02152     \}}
\DoxyCodeLine{02153   \}}
\DoxyCodeLine{02154   \textcolor{keywordflow}{if} (m\_fillType.getValue() != NORMALFILL) \{}
\DoxyCodeLine{02155     m\_rectFill-\/>draw();}
\DoxyCodeLine{02156     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02157   \}}
\DoxyCodeLine{02158 }
\DoxyCodeLine{02159   \textcolor{keywordflow}{if} (m\_frameRange.getValue() \&\& m\_firstClick) \{}
\DoxyCodeLine{02160     tglColor(TPixel::Red);}
\DoxyCodeLine{02161     drawCross(m\_firstPoint, 6);}
\DoxyCodeLine{02162   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!m\_frameRange.getValue() \&\&}
\DoxyCodeLine{02163              getFillParameters().m\_fillType == LINES \&\&}
\DoxyCodeLine{02164              \mbox{\hyperlink{class_t_tool_ad84e5837b3ed638e3e73373c3195a589}{m\_targetType}} == \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{TTool::ToonzImage}})}
\DoxyCodeLine{02165     m\_normalLineFillTool-\/>draw();}
\DoxyCodeLine{02166 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00276}{TTool\+::get\+Image()}}, \mbox{\hyperlink{l00558}{TTool\+::m\+\_\+target\+Type}}, and \mbox{\hyperlink{l00279}{TTool\+::\+Toonz\+Image}}.

\mbox{\Hypertarget{class_fill_tool_ac087d54a241cc586392c7f403e599d27}\label{class_fill_tool_ac087d54a241cc586392c7f403e599d27}} 
\index{FillTool@{FillTool}!getColorClass@{getColorClass}}
\index{getColorClass@{getColorClass}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{getColorClass()}{getColorClass()}}
{\footnotesize\ttfamily int Fill\+Tool\+::get\+Color\+Class (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00139 \{ \textcolor{keywordflow}{return} 2; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fill_tool_a4fe37650c48440cd6c93947d97778054}\label{class_fill_tool_a4fe37650c48440cd6c93947d97778054}} 
\index{FillTool@{FillTool}!getCursorId@{getCursorId}}
\index{getCursorId@{getCursorId}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{getCursorId()}{getCursorId()}}
{\footnotesize\ttfamily int Fill\+Tool\+::get\+Cursor\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Returns the type of cursor used by the tool. 

\begin{DoxySeeAlso}{See also}
For a list of cursor ids \mbox{\hyperlink{}{cursor.\+h}} 
\end{DoxySeeAlso}


Reimplemented from \mbox{\hyperlink{class_t_tool_a1768a57b8b6d1480618fd923fad15f1d}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01771                                 \{}
\DoxyCodeLine{01772   \textcolor{keywordtype}{int} ret;}
\DoxyCodeLine{01773   \textcolor{keywordflow}{if} (m\_colorType.getValue() == LINES)}
\DoxyCodeLine{01774     ret = ToolCursor::FillCursorL;}
\DoxyCodeLine{01775   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01776     ret = ToolCursor::FillCursor;}
\DoxyCodeLine{01777     \textcolor{keywordflow}{if} (m\_colorType.getValue() == AREAS) ret = ret | ToolCursor::Ex\_Area;}
\DoxyCodeLine{01778     \textcolor{keywordflow}{if} (!m\_autopaintLines.getValue())}
\DoxyCodeLine{01779       ret = ret | ToolCursor::Ex\_Fill\_NoAutopaint;}
\DoxyCodeLine{01780   \}}
\DoxyCodeLine{01781   \textcolor{keywordflow}{if} (m\_fillType.getValue() == FREEHANDFILL)}
\DoxyCodeLine{01782     ret = ret | ToolCursor::Ex\_FreeHand;}
\DoxyCodeLine{01783   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_fillType.getValue() == POLYLINEFILL)}
\DoxyCodeLine{01784     ret = ret | ToolCursor::Ex\_PolyLine;}
\DoxyCodeLine{01785   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_fillType.getValue() == RECTFILL)}
\DoxyCodeLine{01786     ret = ret | ToolCursor::Ex\_Rectangle;}
\DoxyCodeLine{01787 }
\DoxyCodeLine{01788   \textcolor{keywordflow}{if} (ToonzCheck::instance()-\/>getChecks() \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876ab6d35869ac2f7cfc956d498b2089a1ff}{ToonzCheck::eBlackBg}})}
\DoxyCodeLine{01789     ret = ret | ToolCursor::Ex\_Negate;}
\DoxyCodeLine{01790   \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{01791 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00044}{Toonz\+Check\+::e\+Black\+Bg}}.

\mbox{\Hypertarget{class_fill_tool_ac78e7fc28cd4afd5d90229b7de73bd6a}\label{class_fill_tool_ac78e7fc28cd4afd5d90229b7de73bd6a}} 
\index{FillTool@{FillTool}!getFillParameters@{getFillParameters}}
\index{getFillParameters@{getFillParameters}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{getFillParameters()}{getFillParameters()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_fill_parameters}{Fill\+Parameters}} Fill\+Tool\+::get\+Fill\+Parameters (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{01820                                                  \{}
\DoxyCodeLine{01821   \mbox{\hyperlink{class_fill_parameters}{FillParameters}} params;}
\DoxyCodeLine{01822   \textcolor{keywordtype}{int} styleId      = TTool::getApplication()-\/>getCurrentLevelStyleIndex();}
\DoxyCodeLine{01823   params.m\_styleId = styleId;}
\DoxyCodeLine{01824   \textcolor{comment}{/*-\/-\/-\/紛らわしいことに、colorTypeをfillTypeに名前を変えて保存している。間違いではない。-\/-\/-\/*/}}
\DoxyCodeLine{01825   params.m\_fillType     = m\_colorType.getValue();}
\DoxyCodeLine{01826   params.m\_emptyOnly    = m\_selective.getValue();}
\DoxyCodeLine{01827   params.m\_segment      = m\_segment.getValue();}
\DoxyCodeLine{01828   params.m\_minFillDepth = (int)m\_fillDepth.getValue().first;}
\DoxyCodeLine{01829   params.m\_maxFillDepth = (int)m\_fillDepth.getValue().second;}
\DoxyCodeLine{01830   \textcolor{keywordflow}{return} params;}
\DoxyCodeLine{01831 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fill_tool_a4c2affca938696c6ed0c06c79500fa2d}\label{class_fill_tool_a4c2affca938696c6ed0c06c79500fa2d}} 
\index{FillTool@{FillTool}!getProperties@{getProperties}}
\index{getProperties@{getProperties}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{getProperties()}{getProperties()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ Fill\+Tool\+::get\+Properties (\begin{DoxyParamCaption}\item[{int}]{target\+Type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00113 \{ \textcolor{keywordflow}{return} \&m\_prop; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fill_tool_a6756456b757977cae27ab77d1da1a491}\label{class_fill_tool_a6756456b757977cae27ab77d1da1a491}} 
\index{FillTool@{FillTool}!getToolType@{getToolType}}
\index{getToolType@{getToolType}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{getToolType()}{getToolType()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} Fill\+Tool\+::get\+Tool\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00109 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca01ffd66b00b05a88c02ce8ceb5da3b8b}{TTool::LevelWriteTool}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fill_tool_a5f4e7c0e82b187ce6776f9915e13be79}\label{class_fill_tool_a5f4e7c0e82b187ce6776f9915e13be79}} 
\index{FillTool@{FillTool}!leftButtonDoubleClick@{leftButtonDoubleClick}}
\index{leftButtonDoubleClick@{leftButtonDoubleClick}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDoubleClick()}{leftButtonDoubleClick()}}
{\footnotesize\ttfamily void Fill\+Tool\+::left\+Button\+Double\+Click (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01904                                                                              \{}
\DoxyCodeLine{01905   \textcolor{keywordflow}{if} (m\_fillType.getValue() != NORMALFILL) \{}
\DoxyCodeLine{01906     m\_rectFill-\/>leftButtonDoubleClick(pos, e);}
\DoxyCodeLine{01907     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01908   \}}
\DoxyCodeLine{01909 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fill_tool_a5a2ce00779939e12227838d7504c5490}\label{class_fill_tool_a5a2ce00779939e12227838d7504c5490}} 
\index{FillTool@{FillTool}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily void Fill\+Tool\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01835                                                                       \{}
\DoxyCodeLine{01836   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{01837   \textcolor{keywordflow}{if} (!app) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01838 }
\DoxyCodeLine{01839   m\_clickPoint = pos;}
\DoxyCodeLine{01840   \textcolor{keywordflow}{if} (m\_fillType.getValue() != NORMALFILL) \{}
\DoxyCodeLine{01841     m\_rectFill-\/>leftButtonDown(pos, e, \mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}));}
\DoxyCodeLine{01842     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01843   \}}
\DoxyCodeLine{01844   \textcolor{comment}{/*-\/-\/以下、NormalFillの場合-\/-\/*/}}
\DoxyCodeLine{01845   \mbox{\hyperlink{class_fill_parameters}{FillParameters}} params = getFillParameters();}
\DoxyCodeLine{01846 }
\DoxyCodeLine{01847   \textcolor{keywordflow}{if} (m\_onion.getValue()) \{}
\DoxyCodeLine{01848     m\_onionStyleId = pickOnionColor(pos);}
\DoxyCodeLine{01849     \textcolor{keywordflow}{if} (m\_onionStyleId > 0) app-\/>setCurrentLevelStyleIndex(m\_onionStyleId);}
\DoxyCodeLine{01850   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_frameRange.getValue()) \{}
\DoxyCodeLine{01851     \textcolor{keywordflow}{if} (!m\_firstClick) \{}
\DoxyCodeLine{01852       \textcolor{comment}{// PRIMO CLICK}}
\DoxyCodeLine{01853       \textcolor{comment}{// if (app-\/>getCurrentFrame()-\/>isEditingScene())}}
\DoxyCodeLine{01854       m\_currCell = std::pair<int, int>(\mbox{\hyperlink{class_t_tool_a7214525a3ae0cdcb0a0393e4dc4d3bf5}{getColumnIndex}}(), \mbox{\hyperlink{class_t_tool_a85025fe6544609814a1672ded5847874}{getFrame}}());}
\DoxyCodeLine{01855 }
\DoxyCodeLine{01856       m\_firstClick   = \textcolor{keyword}{true};}
\DoxyCodeLine{01857       m\_firstPoint   = pos;}
\DoxyCodeLine{01858       m\_firstFrameId = m\_veryFirstFrameId = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{01859       \textcolor{comment}{// gmt. NON BISOGNA DISEGNARE DENTRO LE CALLBACKS!!!!}}
\DoxyCodeLine{01860       \textcolor{comment}{// drawCross(m\_firstPoint, 6);}}
\DoxyCodeLine{01861       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{01862     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01863       \textcolor{comment}{// When using tablet on windows, the mouse press event may be called AFTER}}
\DoxyCodeLine{01864       \textcolor{comment}{// tablet release. It causes unwanted another "{}first click"{} just after}}
\DoxyCodeLine{01865       \textcolor{comment}{// frame-\/range-\/filling. Calling processEvents() here to make sure to}}
\DoxyCodeLine{01866       \textcolor{comment}{// consume the mouse press event in advance.}}
\DoxyCodeLine{01867       qApp-\/>processEvents();}
\DoxyCodeLine{01868       \textcolor{comment}{// SECONDO CLICK}}
\DoxyCodeLine{01869       \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{01870       MultiFiller filler(m\_firstPoint, pos, params,}
\DoxyCodeLine{01871                          m\_autopaintLines.getValue());}
\DoxyCodeLine{01872       filler.processSequence(m\_level.getPointer(), m\_firstFrameId, fid);}
\DoxyCodeLine{01873       \textcolor{keywordflow}{if} (e.isShiftPressed()) \{}
\DoxyCodeLine{01874         m\_firstPoint   = pos;}
\DoxyCodeLine{01875         m\_firstFrameId = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{01876       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01877         m\_firstClick = \textcolor{keyword}{false};}
\DoxyCodeLine{01878         \textcolor{keywordflow}{if} (app-\/>getCurrentFrame()-\/>isEditingScene()) \{}
\DoxyCodeLine{01879           app-\/>getCurrentColumn()-\/>setColumnIndex(m\_currCell.first);}
\DoxyCodeLine{01880           app-\/>getCurrentFrame()-\/>setFrame(m\_currCell.second);}
\DoxyCodeLine{01881         \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01882           app-\/>getCurrentFrame()-\/>setFid(m\_veryFirstFrameId);}
\DoxyCodeLine{01883       \}}
\DoxyCodeLine{01884       \mbox{\hyperlink{class_t_tool}{TTool}} *t = app-\/>getCurrentTool()-\/>getTool();}
\DoxyCodeLine{01885       \textcolor{keywordflow}{if} (t) t-\/>\mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}();}
\DoxyCodeLine{01886     \}}
\DoxyCodeLine{01887 }
\DoxyCodeLine{01888   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01889     \textcolor{keywordflow}{if} (params.m\_fillType == LINES \&\& \mbox{\hyperlink{class_t_tool_ad84e5837b3ed638e3e73373c3195a589}{m\_targetType}} == \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{TTool::ToonzImage}})}
\DoxyCodeLine{01890       m\_normalLineFillTool-\/>leftButtonDown(pos, e);}
\DoxyCodeLine{01891     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01892       \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = app-\/>getCurrentLevel()-\/>getLevel();}
\DoxyCodeLine{01893       m\_level       = xl ? xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}() : 0;}
\DoxyCodeLine{01894       doFill(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}), pos, params, e.isShiftPressed(),}
\DoxyCodeLine{01895              m\_level.getPointer(), \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}(),}
\DoxyCodeLine{01896              m\_autopaintLines.getValue());}
\DoxyCodeLine{01897       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{01898     \}}
\DoxyCodeLine{01899   \}}
\DoxyCodeLine{01900 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fill_tool_a2e4ea0852608583ca27388e394e1046f}\label{class_fill_tool_a2e4ea0852608583ca27388e394e1046f}} 
\index{FillTool@{FillTool}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Fill\+Tool\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01913                                                                       \{}
\DoxyCodeLine{01914   \textcolor{keywordflow}{if} ((m\_fillType.getValue() != NORMALFILL \&\& !m\_onion.getValue()) ||}
\DoxyCodeLine{01915       (m\_colorType.getValue() == AREAS \&\& m\_onion.getValue()))}
\DoxyCodeLine{01916     m\_rectFill-\/>leftButtonDrag(pos, e);}
\DoxyCodeLine{01917   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!m\_onion.getValue() \&\& !m\_frameRange.getValue()) \{}
\DoxyCodeLine{01918     \mbox{\hyperlink{class_fill_parameters}{FillParameters}} params = getFillParameters();}
\DoxyCodeLine{01919     \textcolor{keywordflow}{if} (params.m\_fillType == LINES \&\& \mbox{\hyperlink{class_t_tool_ad84e5837b3ed638e3e73373c3195a589}{m\_targetType}} == \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{TTool::ToonzImage}}) \{}
\DoxyCodeLine{01920       m\_normalLineFillTool-\/>leftButtonDrag(pos, e);}
\DoxyCodeLine{01921       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01922     \}}
\DoxyCodeLine{01923     \textcolor{keywordflow}{if} (m\_clickPoint == pos) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01924     \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img = \mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01925     \textcolor{keywordtype}{int} styleId = params.m\_styleId;}
\DoxyCodeLine{01926     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi = img) \{}
\DoxyCodeLine{01927       \mbox{\hyperlink{class_t_region}{TRegion}} *r = vi-\/>\mbox{\hyperlink{class_t_region_a70157768964375ee7cc7d27cbf7f0979}{getRegion}}(pos);}
\DoxyCodeLine{01928       \textcolor{keywordflow}{if} (r \&\& r-\/>getStyle() == styleId) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01929     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = img) \{}
\DoxyCodeLine{01930       \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} ras = ti-\/>getRaster();}
\DoxyCodeLine{01931       \textcolor{keywordflow}{if} (!ras) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01932       \mbox{\hyperlink{class_t_point_t}{TPointD}} center = ras-\/>getCenterD();}
\DoxyCodeLine{01933       \mbox{\hyperlink{class_t_point_t}{TPoint}} ipos    = convert(pos + center);}
\DoxyCodeLine{01934       \textcolor{keywordflow}{if} (!ras-\/>getBounds().contains(ipos)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01935       \mbox{\hyperlink{class_t_pixel_c_m32}{TPixelCM32}} pix = ras-\/>pixels(ipos.y)[ipos.x];}
\DoxyCodeLine{01936       \textcolor{keywordflow}{if} (pix.getPaint() == styleId) \{}
\DoxyCodeLine{01937         \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{01938         \textcolor{keywordflow}{return};}
\DoxyCodeLine{01939       \}}
\DoxyCodeLine{01940       TSystem::outputDebug(\textcolor{stringliteral}{"{}ok. pix="{}} + std::to\_string(pix.getTone()) + \textcolor{stringliteral}{"{},"{}} +}
\DoxyCodeLine{01941                            std::to\_string(pix.getPaint()) + \textcolor{stringliteral}{"{}\(\backslash\)n"{}});}
\DoxyCodeLine{01942     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01943       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01944     doFill(img, pos, params, e.isShiftPressed(), m\_level.getPointer(),}
\DoxyCodeLine{01945            \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}(), m\_autopaintLines.getValue());}
\DoxyCodeLine{01946     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{01947   \}}
\DoxyCodeLine{01948 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fill_tool_ad22605370f6b4f0904863ba868232d5f}\label{class_fill_tool_ad22605370f6b4f0904863ba868232d5f}} 
\index{FillTool@{FillTool}!leftButtonUp@{leftButtonUp}}
\index{leftButtonUp@{leftButtonUp}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{leftButtonUp()}{leftButtonUp()}}
{\footnotesize\ttfamily void Fill\+Tool\+::left\+Button\+Up (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01952                                                                     \{}
\DoxyCodeLine{01953   \textcolor{keywordflow}{if} (m\_onion.getValue()) \{}
\DoxyCodeLine{01954     \textcolor{keywordflow}{if} (m\_fillType.getValue() != NORMALFILL \&\& m\_colorType.getValue() == AREAS)}
\DoxyCodeLine{01955       m\_rectFill-\/>leftButtonUp(pos, e);}
\DoxyCodeLine{01956     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_onionStyleId > 0) \{}
\DoxyCodeLine{01957       \mbox{\hyperlink{class_fill_parameters}{FillParameters}} tmp = getFillParameters();}
\DoxyCodeLine{01958       doFill(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}), pos, tmp, e.isShiftPressed(), m\_level.getPointer(),}
\DoxyCodeLine{01959              \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}(), m\_autopaintLines.getValue());}
\DoxyCodeLine{01960       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{01961     \}}
\DoxyCodeLine{01962   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_fillType.getValue() != NORMALFILL) \{}
\DoxyCodeLine{01963     m\_rectFill-\/>leftButtonUp(pos, e);}
\DoxyCodeLine{01964     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01965   \}}
\DoxyCodeLine{01966 }
\DoxyCodeLine{01967   \textcolor{keywordflow}{if} (!m\_frameRange.getValue()) \{}
\DoxyCodeLine{01968     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{01969     \textcolor{comment}{// notifyImageChanged();}}
\DoxyCodeLine{01970     \textcolor{keywordflow}{if} (getFillParameters().m\_fillType == LINES \&\&}
\DoxyCodeLine{01971         \mbox{\hyperlink{class_t_tool_ad84e5837b3ed638e3e73373c3195a589}{m\_targetType}} == \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{TTool::ToonzImage}}) \{}
\DoxyCodeLine{01972       \mbox{\hyperlink{class_fill_parameters}{FillParameters}} params = getFillParameters();}
\DoxyCodeLine{01973       m\_normalLineFillTool-\/>leftButtonUp(pos, e, \mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}), params);}
\DoxyCodeLine{01974       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01975     \}}
\DoxyCodeLine{01976   \}}
\DoxyCodeLine{01977 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fill_tool_a6806f9663f8d47a5ff7afcca6e3dd30e}\label{class_fill_tool_a6806f9663f8d47a5ff7afcca6e3dd30e}} 
\index{FillTool@{FillTool}!mouseMove@{mouseMove}}
\index{mouseMove@{mouseMove}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{mouseMove()}{mouseMove()}}
{\footnotesize\ttfamily void Fill\+Tool\+::mouse\+Move (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02106                                                                  \{}
\DoxyCodeLine{02107   \textcolor{keywordflow}{if} (m\_fillType.getValue() != NORMALFILL) m\_rectFill-\/>mouseMove(pos, e);}
\DoxyCodeLine{02108 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fill_tool_a9c0a3714baf4d92b5a3b4442fd2d83bf}\label{class_fill_tool_a9c0a3714baf4d92b5a3b4442fd2d83bf}} 
\index{FillTool@{FillTool}!onActivate@{onActivate}}
\index{onActivate@{onActivate}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{onActivate()}{onActivate()}}
{\footnotesize\ttfamily void Fill\+Tool\+::on\+Activate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback invoked whenever the tool activates. 



Reimplemented from \mbox{\hyperlink{class_t_tool_ac286a2681633b4db6106596b4f54e53b}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02270                           \{}
\DoxyCodeLine{02271   \textcolor{comment}{// OnionSkinMask osMask = getApplication()-\/>getOnionSkinMask(false);}}
\DoxyCodeLine{02272   \textcolor{comment}{/*}}
\DoxyCodeLine{02273 \textcolor{comment}{  for (int i=0; i<osMask.getMosCount(); i++)}}
\DoxyCodeLine{02274 \textcolor{comment}{  boh = osMask.getMos(i);}}
\DoxyCodeLine{02275 \textcolor{comment}{  for (i=0; i<osMask.getFosCount(); i++)}}
\DoxyCodeLine{02276 \textcolor{comment}{  boh = osMask.getFos(i);}}
\DoxyCodeLine{02277 \textcolor{comment}{  */}}
\DoxyCodeLine{02278   \textcolor{keywordflow}{if} (m\_firstTime) \{}
\DoxyCodeLine{02279     m\_fillDepth.setValue(}
\DoxyCodeLine{02280         TDoublePairProperty::Value(MinFillDepth, MaxFillDepth));}
\DoxyCodeLine{02281     m\_fillType.setValue(::to\_wstring(FillType.getValue()));}
\DoxyCodeLine{02282     m\_colorType.setValue(::to\_wstring(FillColorType.getValue()));}
\DoxyCodeLine{02283     \textcolor{comment}{//      m\_onlyEmpty.setValue(FillSelective ? 1 :0);}}
\DoxyCodeLine{02284     m\_onion.setValue(FillOnion ? 1 : 0);}
\DoxyCodeLine{02285     m\_segment.setValue(FillSegment ? 1 : 0);}
\DoxyCodeLine{02286     m\_frameRange.setValue(FillRange ? 1 : 0);}
\DoxyCodeLine{02287     m\_firstTime = \textcolor{keyword}{false};}
\DoxyCodeLine{02288 }
\DoxyCodeLine{02289     \textcolor{keywordflow}{if} (m\_fillType.getValue() != NORMALFILL) \{}
\DoxyCodeLine{02290       AreaFillTool::Type type;}
\DoxyCodeLine{02291       \textcolor{keywordflow}{if} (m\_fillType.getValue() == RECTFILL)}
\DoxyCodeLine{02292         type = AreaFillTool::RECT;}
\DoxyCodeLine{02293       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_fillType.getValue() == FREEHANDFILL)}
\DoxyCodeLine{02294         type = AreaFillTool::FREEHAND;}
\DoxyCodeLine{02295       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_fillType.getValue() == POLYLINEFILL)}
\DoxyCodeLine{02296         type = AreaFillTool::POLYLINE;}
\DoxyCodeLine{02297       \textcolor{keywordflow}{else}}
\DoxyCodeLine{02298         assert(\textcolor{keyword}{false});}
\DoxyCodeLine{02299 }
\DoxyCodeLine{02300       m\_rectFill-\/>onPropertyChanged(}
\DoxyCodeLine{02301           m\_frameRange.getValue(), m\_selective.getValue(), m\_onion.getValue(),}
\DoxyCodeLine{02302           type, m\_colorType.getValue(), m\_autopaintLines.getValue());}
\DoxyCodeLine{02303     \}}
\DoxyCodeLine{02304   \}}
\DoxyCodeLine{02305 }
\DoxyCodeLine{02306   \textcolor{keywordflow}{if} (m\_fillType.getValue() != NORMALFILL) \{}
\DoxyCodeLine{02307     m\_rectFill-\/>onActivate();}
\DoxyCodeLine{02308     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02309   \}}
\DoxyCodeLine{02310 }
\DoxyCodeLine{02311   \textcolor{keywordflow}{if} (FillColorType.getValue() == \textcolor{stringliteral}{"{}Lines"{}}) m\_normalLineFillTool-\/>init();}
\DoxyCodeLine{02312 }
\DoxyCodeLine{02313   resetMulti();}
\DoxyCodeLine{02314 }
\DoxyCodeLine{02315   \textcolor{comment}{//  getApplication()-\/>editImage();}}
\DoxyCodeLine{02316   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi = \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{false}));}
\DoxyCodeLine{02317   \textcolor{keywordflow}{if} (!vi) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02318   vi-\/>findRegions();}
\DoxyCodeLine{02319   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_tool_ad84e5837b3ed638e3e73373c3195a589}{m\_targetType}} == \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a6528d353c20fcbe8932de09845117046}{TTool::VectorImage}}) \{}
\DoxyCodeLine{02320     \textcolor{keywordflow}{if} (m\_level) \{}
\DoxyCodeLine{02321       \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img = \mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true});}
\DoxyCodeLine{02322       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi = img) \{}
\DoxyCodeLine{02323         \textcolor{keywordtype}{double} tolerance = vi-\/>getAutocloseTolerance();}
\DoxyCodeLine{02324         \textcolor{keywordflow}{if} (tolerance < 9.9) tolerance += 0.000001;}
\DoxyCodeLine{02325         m\_maxGapDistance.setValue(tolerance);}
\DoxyCodeLine{02326       \}}
\DoxyCodeLine{02327     \}}
\DoxyCodeLine{02328   \}}
\DoxyCodeLine{02329   \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{true};}
\DoxyCodeLine{02330   ret      = ret \&\& connect(TTool::m\_application-\/>getCurrentFrame(),}
\DoxyCodeLine{02331                        SIGNAL(frameSwitched()), \textcolor{keyword}{this}, SLOT(onFrameSwitched()));}
\DoxyCodeLine{02332   ret      = ret \&\& connect(TTool::m\_application-\/>getCurrentScene(),}
\DoxyCodeLine{02333                        SIGNAL(sceneSwitched()), \textcolor{keyword}{this}, SLOT(onFrameSwitched()));}
\DoxyCodeLine{02334   ret      = ret \&\&}
\DoxyCodeLine{02335         connect(TTool::m\_application-\/>getCurrentColumn(),}
\DoxyCodeLine{02336                 SIGNAL(columnIndexSwitched()), \textcolor{keyword}{this}, SLOT(onFrameSwitched()));}
\DoxyCodeLine{02337   assert(ret);}
\DoxyCodeLine{02338 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00276}{TTool\+::get\+Image()}}, \mbox{\hyperlink{l00558}{TTool\+::m\+\_\+target\+Type}}, and \mbox{\hyperlink{l00278}{TTool\+::\+Vector\+Image}}.

\mbox{\Hypertarget{class_fill_tool_a8b67bbeb3f26c5d64ef932512f0d31fc}\label{class_fill_tool_a8b67bbeb3f26c5d64ef932512f0d31fc}} 
\index{FillTool@{FillTool}!onDeactivate@{onDeactivate}}
\index{onDeactivate@{onDeactivate}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{onDeactivate()}{onDeactivate()}}
{\footnotesize\ttfamily void Fill\+Tool\+::on\+Deactivate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for tool deactivation, includes tool switch. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a00fee58728c1e12fb50846f47d7e9f5e}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02342                             \{}
\DoxyCodeLine{02343   disconnect(TTool::m\_application-\/>getCurrentFrame(), SIGNAL(frameSwitched()),}
\DoxyCodeLine{02344              \textcolor{keyword}{this}, SLOT(onFrameSwitched()));}
\DoxyCodeLine{02345   disconnect(TTool::m\_application-\/>getCurrentScene(), SIGNAL(sceneSwitched()),}
\DoxyCodeLine{02346              \textcolor{keyword}{this}, SLOT(onFrameSwitched()));}
\DoxyCodeLine{02347   disconnect(TTool::m\_application-\/>getCurrentColumn(),}
\DoxyCodeLine{02348              SIGNAL(columnIndexSwitched()), \textcolor{keyword}{this}, SLOT(onFrameSwitched()));}
\DoxyCodeLine{02349 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fill_tool_af61e1af3180129755438225ac47c05d0}\label{class_fill_tool_af61e1af3180129755438225ac47c05d0}} 
\index{FillTool@{FillTool}!onEnter@{onEnter}}
\index{onEnter@{onEnter}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{onEnter()}{onEnter()}}
{\footnotesize\ttfamily void Fill\+Tool\+::on\+Enter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for the mouse entering the viewer area. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a3e775cfcd05aa3c35048b11fa40ab3e4}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02262                        \{}
\DoxyCodeLine{02263   \textcolor{comment}{// resetMulti();}}
\DoxyCodeLine{02264 }
\DoxyCodeLine{02265   \textcolor{comment}{// getApplication()-\/>editImage();}}
\DoxyCodeLine{02266 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fill_tool_aae32f7ded195d440a0b65abb5c7ebc1b}\label{class_fill_tool_aae32f7ded195d440a0b65abb5c7ebc1b}} 
\index{FillTool@{FillTool}!onFrameSwitched@{onFrameSwitched}}
\index{onFrameSwitched@{onFrameSwitched}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{onFrameSwitched}{onFrameSwitched}}
{\footnotesize\ttfamily void Fill\+Tool\+::on\+Frame\+Switched (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02130                                \{}
\DoxyCodeLine{02131   m\_frameSwitched = \textcolor{keyword}{true};}
\DoxyCodeLine{02132   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi = \mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true})) \{}
\DoxyCodeLine{02133     \textcolor{keywordflow}{if} (m\_maxGapDistance.getValue() != vi-\/>getAutocloseTolerance()) \{}
\DoxyCodeLine{02134       m\_maxGapDistance.setValue(vi-\/>getAutocloseTolerance());}
\DoxyCodeLine{02135       getApplication()-\/>getCurrentTool()-\/>\mbox{\hyperlink{class_tool_handle_a39e34f1a30868bad11a629228b07bd40}{notifyToolChanged}}();}
\DoxyCodeLine{02136     \}}
\DoxyCodeLine{02137   \}}
\DoxyCodeLine{02138   m\_frameSwitched           = \textcolor{keyword}{false};}
\DoxyCodeLine{02139   m\_changedGapOriginalValue = -\/1.0;}
\DoxyCodeLine{02140 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fill_tool_a49e242f05ee306d70fbc9f015990f726}\label{class_fill_tool_a49e242f05ee306d70fbc9f015990f726}} 
\index{FillTool@{FillTool}!onImageChanged@{onImageChanged}}
\index{onImageChanged@{onImageChanged}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{onImageChanged()}{onImageChanged()}}
{\footnotesize\ttfamily void Fill\+Tool\+::on\+Image\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Notifies changes in the image in use. 



Reimplemented from \mbox{\hyperlink{class_t_tool_aaf1e021290e74c1b085e4b095668e1ed}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02112                               \{}
\DoxyCodeLine{02113   \textcolor{keywordflow}{if} (m\_fillType.getValue() != NORMALFILL) \{}
\DoxyCodeLine{02114     m\_rectFill-\/>onImageChanged();}
\DoxyCodeLine{02115     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02116   \}}
\DoxyCodeLine{02117   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi = \mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true})) \{}
\DoxyCodeLine{02118     m\_frameSwitched = \textcolor{keyword}{true};}
\DoxyCodeLine{02119     \textcolor{keywordflow}{if} (m\_maxGapDistance.getValue() != vi-\/>getAutocloseTolerance()) \{}
\DoxyCodeLine{02120       m\_maxGapDistance.setValue(vi-\/>getAutocloseTolerance());}
\DoxyCodeLine{02121       getApplication()-\/>getCurrentTool()-\/>\mbox{\hyperlink{class_tool_handle_a39e34f1a30868bad11a629228b07bd40}{notifyToolChanged}}();}
\DoxyCodeLine{02122     \}}
\DoxyCodeLine{02123     m\_frameSwitched = \textcolor{keyword}{false};}
\DoxyCodeLine{02124   \}}
\DoxyCodeLine{02125   \textcolor{keywordflow}{if} (!m\_level) resetMulti();}
\DoxyCodeLine{02126 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00276}{TTool\+::get\+Image()}}, and \mbox{\hyperlink{l00065}{Tool\+Handle\+::notify\+Tool\+Changed()}}.

\mbox{\Hypertarget{class_fill_tool_a6d4ed6a6894253534c06673f04da9c97}\label{class_fill_tool_a6d4ed6a6894253534c06673f04da9c97}} 
\index{FillTool@{FillTool}!onPropertyChanged@{onPropertyChanged}}
\index{onPropertyChanged@{onPropertyChanged}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{onPropertyChanged()}{onPropertyChanged()}}
{\footnotesize\ttfamily bool Fill\+Tool\+::on\+Property\+Changed (\begin{DoxyParamCaption}\item[{std\+::string}]{property\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

\begin{DoxyVerb} Does the tasks associated to changes in \p propertyName and returns \p
\end{DoxyVerb}
 true; Does the tasks associated to changes in {\ttfamily property\+Name} and returns {\ttfamily true}. 

Reimplemented from \mbox{\hyperlink{class_t_tool_a06694e0586f807c34b18e16341aa9ee2}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01991                                                        \{}
\DoxyCodeLine{01992   \textcolor{comment}{/*-\/-\/-\/ m\_rectFill-\/>onPropertyChangedを呼ぶかどうかのフラグ}}
\DoxyCodeLine{01993 \textcolor{comment}{                  fillType, frameRange, selective,}}
\DoxyCodeLine{01994 \textcolor{comment}{     colorTypeが変わったときに呼ぶ-\/-\/-\/*/}}
\DoxyCodeLine{01995   \textcolor{keywordtype}{bool} rectPropChangedflag = \textcolor{keyword}{false};}
\DoxyCodeLine{01996 }
\DoxyCodeLine{01997   \textcolor{comment}{// Areas, Lines etc.}}
\DoxyCodeLine{01998   \textcolor{keywordflow}{if} (propertyName == m\_colorType.getName()) \{}
\DoxyCodeLine{01999     FillColorType       = ::to\_string(m\_colorType.getValue());}
\DoxyCodeLine{02000     rectPropChangedflag = \textcolor{keyword}{true};}
\DoxyCodeLine{02001 }
\DoxyCodeLine{02002     \textcolor{comment}{/*-\/-\/-\/ ColorModelのCursor更新のためにSIGNALを出す -\/-\/-\/*/}}
\DoxyCodeLine{02003     TTool::getApplication()-\/>getCurrentTool()-\/>\mbox{\hyperlink{class_tool_handle_a39e34f1a30868bad11a629228b07bd40}{notifyToolChanged}}();}
\DoxyCodeLine{02004     \textcolor{comment}{/*-\/-\/-\/ FillLineツールに戻ってきたときに前回の位置情報をリセットする -\/-\/-\/*/}}
\DoxyCodeLine{02005     \textcolor{keywordflow}{if} (FillColorType.getValue() == \textcolor{stringliteral}{"{}Lines"{}}) m\_normalLineFillTool-\/>init();}
\DoxyCodeLine{02006   \}}
\DoxyCodeLine{02007   \textcolor{comment}{// Rect, Polyline etc.}}
\DoxyCodeLine{02008   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == m\_fillType.getName()) \{}
\DoxyCodeLine{02009     \textcolor{keywordflow}{if} (m\_fillType.getValue() != NORMALFILL) \{}
\DoxyCodeLine{02010       FillOnion   = (int)(m\_onion.getValue());}
\DoxyCodeLine{02011       FillSegment = (int)(m\_segment.getValue());}
\DoxyCodeLine{02012     \}}
\DoxyCodeLine{02013     FillType            = ::to\_string(m\_fillType.getValue());}
\DoxyCodeLine{02014     rectPropChangedflag = \textcolor{keyword}{true};}
\DoxyCodeLine{02015   \}}
\DoxyCodeLine{02016   \textcolor{comment}{// Onion Skin}}
\DoxyCodeLine{02017   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == m\_onion.getName()) \{}
\DoxyCodeLine{02018     \textcolor{keywordflow}{if} (m\_onion.getValue()) FillType = ::to\_string(m\_fillType.getValue());}
\DoxyCodeLine{02019     FillOnion = (int)(m\_onion.getValue());}
\DoxyCodeLine{02020   \}}
\DoxyCodeLine{02021   \textcolor{comment}{// Frame Range}}
\DoxyCodeLine{02022   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == m\_frameRange.getName()) \{}
\DoxyCodeLine{02023     FillRange = (int)(m\_frameRange.getValue());}
\DoxyCodeLine{02024     resetMulti();}
\DoxyCodeLine{02025     rectPropChangedflag = \textcolor{keyword}{true};}
\DoxyCodeLine{02026   \}}
\DoxyCodeLine{02027   \textcolor{comment}{// Selective}}
\DoxyCodeLine{02028   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == m\_selective.getName()) \{}
\DoxyCodeLine{02029     rectPropChangedflag = \textcolor{keyword}{true};}
\DoxyCodeLine{02030   \}}
\DoxyCodeLine{02031   \textcolor{comment}{// Fill Depth}}
\DoxyCodeLine{02032   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == m\_fillDepth.getName()) \{}
\DoxyCodeLine{02033     MinFillDepth = (int)m\_fillDepth.getValue().first;}
\DoxyCodeLine{02034     MaxFillDepth = (int)m\_fillDepth.getValue().second;}
\DoxyCodeLine{02035   \}}
\DoxyCodeLine{02036   \textcolor{comment}{// Segment}}
\DoxyCodeLine{02037   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == m\_segment.getName()) \{}
\DoxyCodeLine{02038     \textcolor{keywordflow}{if} (m\_segment.getValue()) FillType = ::to\_string(m\_fillType.getValue());}
\DoxyCodeLine{02039     FillSegment = (int)(m\_segment.getValue());}
\DoxyCodeLine{02040   \}}
\DoxyCodeLine{02041 }
\DoxyCodeLine{02042   \textcolor{comment}{// Autopaint}}
\DoxyCodeLine{02043   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == m\_autopaintLines.getName()) \{}
\DoxyCodeLine{02044     rectPropChangedflag = \textcolor{keyword}{true};}
\DoxyCodeLine{02045   \}}
\DoxyCodeLine{02046 }
\DoxyCodeLine{02047   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!m\_frameSwitched \&\&}
\DoxyCodeLine{02048            (propertyName == m\_maxGapDistance.getName() ||}
\DoxyCodeLine{02049             propertyName == m\_maxGapDistance.getName() + \textcolor{stringliteral}{"{}withUndo"{}})) \{}
\DoxyCodeLine{02050     \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = TTool::getApplication()-\/>getCurrentLevel()-\/>getLevel();}
\DoxyCodeLine{02051     m\_level       = xl ? xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}() : 0;}
\DoxyCodeLine{02052     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi = \mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true})) \{}
\DoxyCodeLine{02053       \textcolor{keywordflow}{if} (m\_changedGapOriginalValue == -\/1.0) \{}
\DoxyCodeLine{02054         ImageUtils::getFillingInformationInArea(vi, m\_oldFillInformation,}
\DoxyCodeLine{02055                                                 vi-\/>getBBox());}
\DoxyCodeLine{02056         m\_changedGapOriginalValue = vi-\/>getAutocloseTolerance();}
\DoxyCodeLine{02057       \}}
\DoxyCodeLine{02058       \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{02059       vi-\/>setAutocloseTolerance(m\_maxGapDistance.getValue());}
\DoxyCodeLine{02060       \textcolor{keywordtype}{int} count = vi-\/>getStrokeCount();}
\DoxyCodeLine{02061       std::vector<int> v(count);}
\DoxyCodeLine{02062       \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{02063       \textcolor{keywordflow}{for} (i = 0; i < (int)count; i++) v[i] = i;}
\DoxyCodeLine{02064       vi-\/>notifyChangedStrokes(v, std::vector<TStroke *>(), \textcolor{keyword}{false});}
\DoxyCodeLine{02065 }
\DoxyCodeLine{02066       \textcolor{keywordflow}{if} (m\_level) \{}
\DoxyCodeLine{02067         m\_level-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a2d43337766628739707849f8808bf300}{setDirtyFlag}}(\textcolor{keyword}{true});}
\DoxyCodeLine{02068         TTool::getApplication()-\/>getCurrentLevel()-\/>notifyLevelChange();}
\DoxyCodeLine{02069         \textcolor{keywordflow}{if} (propertyName == m\_maxGapDistance.getName() + \textcolor{stringliteral}{"{}withUndo"{}} \&\&}
\DoxyCodeLine{02070             m\_changedGapOriginalValue != -\/1.0) \{}
\DoxyCodeLine{02071           TUndoManager::manager()-\/>add(\textcolor{keyword}{new} VectorGapSizeChangeUndo(}
\DoxyCodeLine{02072               m\_changedGapOriginalValue, m\_maxGapDistance.getValue(),}
\DoxyCodeLine{02073               m\_level.getPointer(), fid, vi, m\_oldFillInformation));}
\DoxyCodeLine{02074           m\_changedGapOriginalValue = -\/1.0;}
\DoxyCodeLine{02075           m\_oldFillInformation.clear();}
\DoxyCodeLine{02076           \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{02077           app-\/>getCurrentXsheet()-\/>notifyXsheetChanged();}
\DoxyCodeLine{02078           \mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}();}
\DoxyCodeLine{02079         \}}
\DoxyCodeLine{02080       \}}
\DoxyCodeLine{02081     \}}
\DoxyCodeLine{02082   \}}
\DoxyCodeLine{02083 }
\DoxyCodeLine{02084   \textcolor{comment}{/*-\/-\/-\/ fillType, frameRange, selective, colorTypeが変わったとき -\/-\/-\/*/}}
\DoxyCodeLine{02085   \textcolor{keywordflow}{if} (rectPropChangedflag \&\& m\_fillType.getValue() != NORMALFILL) \{}
\DoxyCodeLine{02086     AreaFillTool::Type type;}
\DoxyCodeLine{02087     \textcolor{keywordflow}{if} (m\_fillType.getValue() == RECTFILL)}
\DoxyCodeLine{02088       type = AreaFillTool::RECT;}
\DoxyCodeLine{02089     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_fillType.getValue() == FREEHANDFILL)}
\DoxyCodeLine{02090       type = AreaFillTool::FREEHAND;}
\DoxyCodeLine{02091     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_fillType.getValue() == POLYLINEFILL)}
\DoxyCodeLine{02092       type = AreaFillTool::POLYLINE;}
\DoxyCodeLine{02093     \textcolor{keywordflow}{else}}
\DoxyCodeLine{02094       assert(\textcolor{keyword}{false});}
\DoxyCodeLine{02095 }
\DoxyCodeLine{02096     m\_rectFill-\/>onPropertyChanged(}
\DoxyCodeLine{02097         m\_frameRange.getValue(), m\_selective.getValue(), m\_onion.getValue(),}
\DoxyCodeLine{02098         type, m\_colorType.getValue(), m\_autopaintLines.getValue());}
\DoxyCodeLine{02099   \}}
\DoxyCodeLine{02100 }
\DoxyCodeLine{02101   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{02102 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00688}{TTool\+::get\+Current\+Fid()}}, \mbox{\hyperlink{l00276}{TTool\+::get\+Image()}}, \mbox{\hyperlink{l00095}{TXsh\+Level\+::get\+Simple\+Level()}}, \mbox{\hyperlink{l00609}{TTool\+::notify\+Image\+Changed()}}, \mbox{\hyperlink{l00065}{Tool\+Handle\+::notify\+Tool\+Changed()}}, and \mbox{\hyperlink{l00320}{TXsh\+Simple\+Level\+::set\+Dirty\+Flag()}}.

\mbox{\Hypertarget{class_fill_tool_ab73d58f296f7e7f8af8df5c8cba4db1d}\label{class_fill_tool_ab73d58f296f7e7f8af8df5c8cba4db1d}} 
\index{FillTool@{FillTool}!pick@{pick}}
\index{pick@{pick}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{pick()}{pick()}}
{\footnotesize\ttfamily int Fill\+Tool\+::pick (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \&}]{image,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const int}]{frame = {\ttfamily -\/1} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02170                                                                             \{}
\DoxyCodeLine{02171   \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti  = image;}
\DoxyCodeLine{02172   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi = image;}
\DoxyCodeLine{02173   \textcolor{keywordflow}{if} (!ti \&\& !vi) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{02174 }
\DoxyCodeLine{02175   \mbox{\hyperlink{class_style_picker}{StylePicker}} picker(image);}
\DoxyCodeLine{02176   \textcolor{keywordtype}{double} scale2 = 1.0;}
\DoxyCodeLine{02177   \textcolor{keywordflow}{if} (vi) \{}
\DoxyCodeLine{02178     \mbox{\hyperlink{class_t_affine}{TAffine}} aff = getViewer()-\/>\mbox{\hyperlink{class_t_tool_1_1_viewer_a97b71c149134c5a3d0ba0d5333b0b3c2}{getViewMatrix}}() * \mbox{\hyperlink{class_t_tool_a73c1b7f13eaea33e1d305636f44c4a64}{getCurrentColumnMatrix}}(frame);}
\DoxyCodeLine{02179     scale2      = aff.det();}
\DoxyCodeLine{02180   \}}
\DoxyCodeLine{02181   \mbox{\hyperlink{class_t_point_t}{TPointD}} pickPos = pos;}
\DoxyCodeLine{02182   \textcolor{comment}{// in case that the column is animated in scene-\/editing mode}}
\DoxyCodeLine{02183   \textcolor{keywordflow}{if} (frame > 0) \{}
\DoxyCodeLine{02184     \mbox{\hyperlink{class_t_point_t}{TPointD}} dpiScale = getViewer()-\/>getDpiScale();}
\DoxyCodeLine{02185     pickPos.x *= dpiScale.x;}
\DoxyCodeLine{02186     pickPos.y *= dpiScale.y;}
\DoxyCodeLine{02187     \mbox{\hyperlink{class_t_point_t}{TPointD}} worldPos = \mbox{\hyperlink{class_t_tool_a73c1b7f13eaea33e1d305636f44c4a64}{getCurrentColumnMatrix}}() * pickPos;}
\DoxyCodeLine{02188     pickPos          = \mbox{\hyperlink{class_t_tool_a73c1b7f13eaea33e1d305636f44c4a64}{getCurrentColumnMatrix}}(frame).\mbox{\hyperlink{class_t_affine_a570529b96b1ec5abc711aaa9aac09ff9}{inv}}() * worldPos;}
\DoxyCodeLine{02189     pickPos.x /= dpiScale.x;}
\DoxyCodeLine{02190     pickPos.y /= dpiScale.y;}
\DoxyCodeLine{02191   \}}
\DoxyCodeLine{02192   \textcolor{comment}{// thin stroke can be picked with 10 pixel range}}
\DoxyCodeLine{02193   \textcolor{keywordflow}{return} picker.pickStyleId(pickPos, 10.0, scale2);}
\DoxyCodeLine{02194 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fill_tool_a18642233a1d382430a0b871cf4e3e487}\label{class_fill_tool_a18642233a1d382430a0b871cf4e3e487}} 
\index{FillTool@{FillTool}!pickOnionColor@{pickOnionColor}}
\index{pickOnionColor@{pickOnionColor}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{pickOnionColor()}{pickOnionColor()}}
{\footnotesize\ttfamily int Fill\+Tool\+::pick\+Onion\+Color (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02198                                                \{}
\DoxyCodeLine{02199   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{02200   \textcolor{keywordflow}{if} (!app) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{02201   \textcolor{keywordtype}{bool} filmStripEditing = !app-\/>getCurrentObject()-\/>isSpline();}
\DoxyCodeLine{02202   \mbox{\hyperlink{class_onion_skin_mask}{OnionSkinMask}} osMask  = app-\/>getCurrentOnionSkin()-\/>getOnionSkinMask();}
\DoxyCodeLine{02203 }
\DoxyCodeLine{02204   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{02205 }
\DoxyCodeLine{02206   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = m\_level.getPointer();}
\DoxyCodeLine{02207   \textcolor{keywordflow}{if} (!sl) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{02208 }
\DoxyCodeLine{02209   std::vector<int> rows;}
\DoxyCodeLine{02210 }
\DoxyCodeLine{02211   \textcolor{comment}{// level editing case}}
\DoxyCodeLine{02212   \textcolor{keywordflow}{if} (app-\/>getCurrentFrame()-\/>isEditingLevel()) \{}
\DoxyCodeLine{02213     osMask.\mbox{\hyperlink{class_onion_skin_mask_a9e64f221d9750268f449668afb614c11}{getAll}}(sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_af30a02239ef0900c095a0af366dea26a}{guessIndex}}(fid), rows);}
\DoxyCodeLine{02214     \textcolor{keywordtype}{int} i, j;}
\DoxyCodeLine{02215     \textcolor{keywordflow}{for} (i = 0; i < (int)rows.size(); i++)}
\DoxyCodeLine{02216       \textcolor{keywordflow}{if} (sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a07279a40ffad2c6ccc597c0a418f78fb}{index2fid}}(rows[i]) > fid) \textcolor{keywordflow}{break};}
\DoxyCodeLine{02217 }
\DoxyCodeLine{02218     \textcolor{keywordtype}{int} onionStyleId = 0;}
\DoxyCodeLine{02219     \textcolor{keywordflow}{for} (j = i -\/ 1; j >= 0; j-\/-\/) \{}
\DoxyCodeLine{02220       \mbox{\hyperlink{class_t_frame_id}{TFrameId}} onionFid = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a07279a40ffad2c6ccc597c0a418f78fb}{index2fid}}(rows[j]);}
\DoxyCodeLine{02221       \textcolor{keywordflow}{if} (onionFid != fid \&\&}
\DoxyCodeLine{02222           ((onionStyleId =}
\DoxyCodeLine{02223                 pick(m\_level-\/>getFrame(onionFid, ImageManager::none, 1), pos)) >}
\DoxyCodeLine{02224            0))  \textcolor{comment}{// subsampling must be 1, otherwise onionfill does  not work}}
\DoxyCodeLine{02225         \textcolor{keywordflow}{break};}
\DoxyCodeLine{02226     \}}
\DoxyCodeLine{02227     \textcolor{keywordflow}{if} (onionStyleId == 0)}
\DoxyCodeLine{02228       \textcolor{keywordflow}{for} (j = i; j < (int)rows.size(); j++) \{}
\DoxyCodeLine{02229         \mbox{\hyperlink{class_t_frame_id}{TFrameId}} onionFid = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a07279a40ffad2c6ccc597c0a418f78fb}{index2fid}}(rows[j]);}
\DoxyCodeLine{02230         \textcolor{keywordflow}{if} (onionFid != fid \&\&}
\DoxyCodeLine{02231             ((onionStyleId = pick(}
\DoxyCodeLine{02232                   m\_level-\/>getFrame(onionFid, ImageManager::none, 1), pos)) >}
\DoxyCodeLine{02233              0))  \textcolor{comment}{// subsampling must be 1, otherwise onionfill does  not work}}
\DoxyCodeLine{02234           \textcolor{keywordflow}{break};}
\DoxyCodeLine{02235       \}}
\DoxyCodeLine{02236     \textcolor{keywordflow}{return} onionStyleId;}
\DoxyCodeLine{02237   \} \textcolor{keywordflow}{else} \{  \textcolor{comment}{// scene editing case}}
\DoxyCodeLine{02238     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = app-\/>getCurrentXsheet()-\/>getXsheet();}
\DoxyCodeLine{02239     \textcolor{keywordtype}{int} colId    = app-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{02240     \textcolor{keywordtype}{int} row      = app-\/>getCurrentFrame()-\/>getFrame();}
\DoxyCodeLine{02241     osMask.\mbox{\hyperlink{class_onion_skin_mask_a9e64f221d9750268f449668afb614c11}{getAll}}(row, rows);}
\DoxyCodeLine{02242     std::vector<int>::iterator it = rows.begin();}
\DoxyCodeLine{02243     \textcolor{keywordflow}{while} (it != rows.end() \&\& *it < row) it++;}
\DoxyCodeLine{02244     std::sort(rows.begin(), it, descending);}
\DoxyCodeLine{02245     \textcolor{keywordtype}{int} onionStyleId = 0;}
\DoxyCodeLine{02246     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)rows.size(); i++) \{}
\DoxyCodeLine{02247       \textcolor{keywordflow}{if} (rows[i] == row) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02248       \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(rows[i], colId);}
\DoxyCodeLine{02249       \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = cell.m\_level.getPointer();}
\DoxyCodeLine{02250       \textcolor{keywordflow}{if} (!xl || xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}() != sl) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02251       \mbox{\hyperlink{class_t_frame_id}{TFrameId}} onionFid = cell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}();}
\DoxyCodeLine{02252       onionStyleId = pick(m\_level-\/>getFrame(onionFid, ImageManager::none, 1),}
\DoxyCodeLine{02253                           pos, rows[i]);}
\DoxyCodeLine{02254       \textcolor{keywordflow}{if} (onionStyleId > 0) \textcolor{keywordflow}{break};}
\DoxyCodeLine{02255     \}}
\DoxyCodeLine{02256     \textcolor{keywordflow}{return} onionStyleId;}
\DoxyCodeLine{02257   \}}
\DoxyCodeLine{02258 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fill_tool_adf303d88dae8ae16fe093eef1709f3f7}\label{class_fill_tool_adf303d88dae8ae16fe093eef1709f3f7}} 
\index{FillTool@{FillTool}!resetMulti@{resetMulti}}
\index{resetMulti@{resetMulti}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{resetMulti()}{resetMulti()}}
{\footnotesize\ttfamily void Fill\+Tool\+::reset\+Multi (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01981                           \{}
\DoxyCodeLine{01982   m\_firstClick   = \textcolor{keyword}{false};}
\DoxyCodeLine{01983   m\_firstFrameId = -\/1;}
\DoxyCodeLine{01984   m\_firstPoint   = \mbox{\hyperlink{class_t_point_t}{TPointD}}();}
\DoxyCodeLine{01985   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl  = TTool::getApplication()-\/>getCurrentLevel()-\/>getLevel();}
\DoxyCodeLine{01986   m\_level        = xl ? xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}() : 0;}
\DoxyCodeLine{01987 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fill_tool_a6975faf63f78e3e75c49f35633732c9e}\label{class_fill_tool_a6975faf63f78e3e75c49f35633732c9e}} 
\index{FillTool@{FillTool}!updateTranslation@{updateTranslation}}
\index{updateTranslation@{updateTranslation}!FillTool@{FillTool}}
\doxysubsubsection{\texorpdfstring{updateTranslation()}{updateTranslation()}}
{\footnotesize\ttfamily void Fill\+Tool\+::update\+Translation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01795                                  \{}
\DoxyCodeLine{01796   m\_frameRange.setQStringName(tr(\textcolor{stringliteral}{"{}Frame Range"{}}));}
\DoxyCodeLine{01797 }
\DoxyCodeLine{01798   m\_fillType.setQStringName(tr(\textcolor{stringliteral}{"{}Type:"{}}));}
\DoxyCodeLine{01799   m\_fillType.setItemUIName(NORMALFILL, tr(\textcolor{stringliteral}{"{}Normal"{}}));}
\DoxyCodeLine{01800   m\_fillType.setItemUIName(RECTFILL, tr(\textcolor{stringliteral}{"{}Rectangular"{}}));}
\DoxyCodeLine{01801   m\_fillType.setItemUIName(FREEHANDFILL, tr(\textcolor{stringliteral}{"{}Freehand"{}}));}
\DoxyCodeLine{01802   m\_fillType.setItemUIName(POLYLINEFILL, tr(\textcolor{stringliteral}{"{}Polyline"{}}));}
\DoxyCodeLine{01803 }
\DoxyCodeLine{01804   m\_selective.setQStringName(tr(\textcolor{stringliteral}{"{}Selective"{}}));}
\DoxyCodeLine{01805 }
\DoxyCodeLine{01806   m\_colorType.setQStringName(tr(\textcolor{stringliteral}{"{}Mode:"{}}));}
\DoxyCodeLine{01807   m\_colorType.setItemUIName(LINES, tr(\textcolor{stringliteral}{"{}Lines"{}}));}
\DoxyCodeLine{01808   m\_colorType.setItemUIName(AREAS, tr(\textcolor{stringliteral}{"{}Areas"{}}));}
\DoxyCodeLine{01809   m\_colorType.setItemUIName(ALL, tr(\textcolor{stringliteral}{"{}Lines \& Areas"{}}));}
\DoxyCodeLine{01810 }
\DoxyCodeLine{01811   m\_onion.setQStringName(tr(\textcolor{stringliteral}{"{}Onion Skin"{}}));}
\DoxyCodeLine{01812   m\_fillDepth.setQStringName(tr(\textcolor{stringliteral}{"{}Fill Depth"{}}));}
\DoxyCodeLine{01813   m\_segment.setQStringName(tr(\textcolor{stringliteral}{"{}Segment"{}}));}
\DoxyCodeLine{01814   m\_maxGapDistance.setQStringName(tr(\textcolor{stringliteral}{"{}Maximum Gap"{}}));}
\DoxyCodeLine{01815   m\_autopaintLines.setQStringName(tr(\textcolor{stringliteral}{"{}Autopaint Lines"{}}));}
\DoxyCodeLine{01816 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/filltool.\+h\item 
E\+:/opentoonz/toonz/sources/tnztools/filltool.\+cpp\end{DoxyCompactItemize}
