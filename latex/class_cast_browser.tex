\hypertarget{class_cast_browser}{}\doxysection{Cast\+Browser Class Reference}
\label{class_cast_browser}\index{CastBrowser@{CastBrowser}}


La classe si occupa della visualizzazione dello scene cast.  




{\ttfamily \#include $<$castviewer.\+h$>$}

Inheritance diagram for Cast\+Browser\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_cast_browser}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_cast_browser_ad9132e02fabc43b339a12410b023284c}{Cast\+Browser}} (QWidget $\ast$parent=0, Qt\+::\+WFlags flags=0)
\item 
\mbox{\hyperlink{class_cast_items}{Cast\+Items}} const \& \mbox{\hyperlink{class_cast_browser_ac818258ecf5822b234ef1f5a78da7c85}{get\+Cast\+Items}} () const
\item 
void \mbox{\hyperlink{class_cast_browser_af881e95537e0bccbfa4f0b2d71036bbd}{sort\+By\+Data\+Model}} (Data\+Type data\+Type, bool is\+Discendent) override
\item 
int \mbox{\hyperlink{class_cast_browser_aa539831b154f1de925ea3a19cb4a2de5}{get\+Item\+Count}} () const override
\item 
void \mbox{\hyperlink{class_cast_browser_ae347c4e85654a122586085a91c65064f}{refresh\+Data}} () override
\item 
QVariant \mbox{\hyperlink{class_cast_browser_aeb15af4a1a27f1cf1ff6644c2f2ea44f}{get\+Item\+Data}} (int index, Data\+Type data\+Type, bool is\+Selected=false) override
\item 
QMenu $\ast$ \mbox{\hyperlink{class_cast_browser_a04a5a570f3b9eb65703fa93d92b58e5a}{get\+Context\+Menu}} (QWidget $\ast$parent, int index) override
\item 
void \mbox{\hyperlink{class_cast_browser_a61183d8949eac3abac0adad409bd5d7a}{start\+Drag\+Drop}} () override
\item 
bool \mbox{\hyperlink{class_cast_browser_aff8a0312a5b2beafe7b53e503a3f5bf0}{accept\+Drop}} (const QMime\+Data $\ast$data) const override
\item 
bool \mbox{\hyperlink{class_cast_browser_a33be7181b5ed842a5547577777af0b3b}{drop}} (const QMime\+Data $\ast$data) override
\item 
void \mbox{\hyperlink{class_cast_browser_ad5c338efba0f7708e545da3f4cc4ecc9}{expose}} ()
\item 
void \mbox{\hyperlink{class_cast_browser_ae1bf9e654eb6301ed4a038f8f299ef05}{edit}} ()
\item 
void \mbox{\hyperlink{class_cast_browser_a94eca10a93f44ded3b50986bc5393903}{show\+Folder\+Contents}} ()
\item 
void \mbox{\hyperlink{class_cast_browser_a1d244b4ad6b09867a03e4012e9e6a139}{view\+File}} ()
\item 
void \mbox{\hyperlink{class_cast_browser_a8fcc93b9ce37bfb5b6b924db2309ecdc}{view\+File\+Info}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_cast_browser_ad5ede52ed956e909ec7d46e9c73f6cec}{folder\+Changed}} (QTree\+Widget\+Item $\ast$current, QTree\+Widget\+Item $\ast$previous)
\item 
void \mbox{\hyperlink{class_cast_browser_a42ea1677ad779c9faa1dd83617aad62b}{refresh}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_cast_browser_a9ac339b4e3f6cd98295bc3e4e554172d}\label{class_cast_browser_a9ac339b4e3f6cd98295bc3e4e554172d}} 
bool {\bfseries drop\+Mime\+Data} (QTree\+Widget\+Item $\ast$parent, int index, const QMime\+Data $\ast$data, Qt\+::\+Drop\+Action action)
\item 
\mbox{\Hypertarget{class_cast_browser_a6df3b485911cc98ab8290426b675a9a4}\label{class_cast_browser_a6df3b485911cc98ab8290426b675a9a4}} 
Qt\+::\+Drop\+Actions {\bfseries supported\+Drop\+Actions} () const
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
La classe si occupa della visualizzazione dello scene cast. 

E\textquotesingle{} figlia di {\bfseries{QSplitter}} e contiene un albero che visualizza i folder {\bfseries{m\+\_\+tree\+View}} e un widget che consente di visualizzare i file {\bfseries{m\+\_\+scene\+Cast\+View}}. I suoi widget sono settati tramite un modello del tipo {\bfseries{Scene\+Cast\+Model}}. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_cast_browser_ad9132e02fabc43b339a12410b023284c}\label{class_cast_browser_ad9132e02fabc43b339a12410b023284c}} 
\index{CastBrowser@{CastBrowser}!CastBrowser@{CastBrowser}}
\index{CastBrowser@{CastBrowser}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{CastBrowser()}{CastBrowser()}}
{\footnotesize\ttfamily Cast\+Browser\+::\+Cast\+Browser (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent = {\ttfamily 0},  }\item[{Qt\+::\+WFlags}]{flags = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00460     : QSplitter(parent)}
\DoxyCodeLine{00461     , m\_treeViewer(0)}
\DoxyCodeLine{00462     , m\_folderName(0)}
\DoxyCodeLine{00463     , m\_itemViewer(0)}
\DoxyCodeLine{00464     , m\_castItems(\textcolor{keyword}{new} \mbox{\hyperlink{class_cast_items}{CastItems}}()) \{}
\DoxyCodeLine{00465   \textcolor{comment}{// style sheet}}
\DoxyCodeLine{00466   setObjectName(\textcolor{stringliteral}{"{}CastBrowser"{}});}
\DoxyCodeLine{00467   setFrameStyle(QFrame::StyledPanel);}
\DoxyCodeLine{00468 }
\DoxyCodeLine{00469   m\_treeViewer = \textcolor{keyword}{new} \mbox{\hyperlink{class_cast_tree_viewer}{CastTreeViewer}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00470   m\_treeViewer-\/>resize(300, m\_treeViewer-\/>size().height());}
\DoxyCodeLine{00471 }
\DoxyCodeLine{00472   QFrame *box = \textcolor{keyword}{new} QFrame(\textcolor{keyword}{this});}
\DoxyCodeLine{00473   box-\/>setFrameStyle(QFrame::StyledPanel);}
\DoxyCodeLine{00474   QVBoxLayout *boxLayout = \textcolor{keyword}{new} QVBoxLayout(box);}
\DoxyCodeLine{00475   boxLayout-\/>setMargin(0);}
\DoxyCodeLine{00476   boxLayout-\/>setSpacing(0);}
\DoxyCodeLine{00477 }
\DoxyCodeLine{00478   m\_folderName = \textcolor{keyword}{new} QLabel(\textcolor{stringliteral}{"{}"{}}, box);}
\DoxyCodeLine{00479   m\_folderName-\/>setObjectName(\textcolor{stringliteral}{"{}CastBrowserFolderName"{}});}
\DoxyCodeLine{00480   m\_folderName-\/>setFrameStyle(QFrame::Box);}
\DoxyCodeLine{00481   m\_itemViewer = \textcolor{keyword}{new} \mbox{\hyperlink{class_dv_item_viewer}{DvItemViewer}}(box, \textcolor{keyword}{false}, \textcolor{keyword}{true}, DvItemViewer::Cast);}
\DoxyCodeLine{00482   \mbox{\hyperlink{class_dv_item_viewer_panel}{DvItemViewerPanel}} *viewerPanel = m\_itemViewer-\/>getPanel();}
\DoxyCodeLine{00483   viewerPanel-\/>setMissingTextColor(QColor(200, 0, 0));}
\DoxyCodeLine{00484   \mbox{\hyperlink{class_cast_selection}{CastSelection}} *castSelection = \textcolor{keyword}{new} \mbox{\hyperlink{class_cast_selection}{CastSelection}}();}
\DoxyCodeLine{00485   castSelection-\/>setBrowser(\textcolor{keyword}{this});}
\DoxyCodeLine{00486   viewerPanel-\/>setSelection(castSelection);}
\DoxyCodeLine{00487   viewerPanel-\/>addColumn(DvItemListModel::FrameCount, 50);}
\DoxyCodeLine{00488   m\_itemViewer-\/>setModel(\textcolor{keyword}{this});}
\DoxyCodeLine{00489 }
\DoxyCodeLine{00490   \mbox{\hyperlink{class_dv_item_viewer_title_bar}{DvItemViewerTitleBar}} *titleBar = \textcolor{keyword}{new} \mbox{\hyperlink{class_dv_item_viewer_title_bar}{DvItemViewerTitleBar}}(m\_itemViewer, box);}
\DoxyCodeLine{00491   \textcolor{comment}{// titleBar-\/>hide();}}
\DoxyCodeLine{00492   \mbox{\hyperlink{class_dv_item_viewer_button_bar}{DvItemViewerButtonBar}} *buttonBar =}
\DoxyCodeLine{00493       \textcolor{keyword}{new} \mbox{\hyperlink{class_dv_item_viewer_button_bar}{DvItemViewerButtonBar}}(m\_itemViewer, box);}
\DoxyCodeLine{00494 }
\DoxyCodeLine{00495   boxLayout-\/>addWidget(m\_folderName);}
\DoxyCodeLine{00496   boxLayout-\/>addWidget(titleBar);}
\DoxyCodeLine{00497   boxLayout-\/>addWidget(m\_itemViewer);}
\DoxyCodeLine{00498   boxLayout-\/>addWidget(buttonBar);}
\DoxyCodeLine{00499 }
\DoxyCodeLine{00500   boxLayout-\/>setAlignment(buttonBar, Qt::AlignBottom);}
\DoxyCodeLine{00501   box-\/>setLayout(boxLayout);}
\DoxyCodeLine{00502 }
\DoxyCodeLine{00503   addWidget(m\_treeViewer);}
\DoxyCodeLine{00504   addWidget(box);}
\DoxyCodeLine{00505 }
\DoxyCodeLine{00506   setStretchFactor(1, 2);}
\DoxyCodeLine{00507 }
\DoxyCodeLine{00508   \mbox{\hyperlink{class_t_scene_handle}{TSceneHandle}} *sceneHandle = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}();}
\DoxyCodeLine{00509 }
\DoxyCodeLine{00510   connect(sceneHandle, SIGNAL(sceneSwitched()), \textcolor{keyword}{this}, SLOT(refresh()));}
\DoxyCodeLine{00511   connect(sceneHandle, SIGNAL(castChanged()), \textcolor{keyword}{this}, SLOT(refresh()));}
\DoxyCodeLine{00512 }
\DoxyCodeLine{00513   \mbox{\hyperlink{class_t_xsheet_handle}{TXsheetHandle}} *xhseetHandle = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}();}
\DoxyCodeLine{00514   connect(xhseetHandle, SIGNAL(xsheetChanged()), m\_itemViewer, SLOT(update()));}
\DoxyCodeLine{00515 }
\DoxyCodeLine{00516   connect(buttonBar, SIGNAL(folderUp()), m\_treeViewer, SLOT(folderUp()));}
\DoxyCodeLine{00517   connect(buttonBar, SIGNAL(newFolder()), m\_treeViewer, SLOT(newFolder()));}
\DoxyCodeLine{00518 }
\DoxyCodeLine{00519   connect(m\_treeViewer,}
\DoxyCodeLine{00520           SIGNAL(currentItemChanged(QTreeWidgetItem *, QTreeWidgetItem *)),}
\DoxyCodeLine{00521           \textcolor{keyword}{this}, SLOT(folderChanged(QTreeWidgetItem *, QTreeWidgetItem *)));}
\DoxyCodeLine{00522 }
\DoxyCodeLine{00523   connect(m\_treeViewer, SIGNAL(itemMovedToFolder()), \textcolor{keyword}{this}, SLOT(refresh()));}
\DoxyCodeLine{00524 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cast_browser_abe14b68af1e390210c40fd8fd34c7b2a}\label{class_cast_browser_abe14b68af1e390210c40fd8fd34c7b2a}} 
\index{CastBrowser@{CastBrowser}!````~CastBrowser@{$\sim$CastBrowser}}
\index{````~CastBrowser@{$\sim$CastBrowser}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{$\sim$CastBrowser()}{~CastBrowser()}}
{\footnotesize\ttfamily Cast\+Browser\+::$\sim$\+Cast\+Browser (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00528 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_cast_browser_aff8a0312a5b2beafe7b53e503a3f5bf0}\label{class_cast_browser_aff8a0312a5b2beafe7b53e503a3f5bf0}} 
\index{CastBrowser@{CastBrowser}!acceptDrop@{acceptDrop}}
\index{acceptDrop@{acceptDrop}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{acceptDrop()}{acceptDrop()}}
{\footnotesize\ttfamily bool Cast\+Browser\+::accept\+Drop (\begin{DoxyParamCaption}\item[{const QMime\+Data $\ast$}]{data }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00684                                                         \{}
\DoxyCodeLine{00685   \textcolor{keywordflow}{return} acceptResourceOrFolderDrop(data-\/>urls());}
\DoxyCodeLine{00686 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cast_browser_a33be7181b5ed842a5547577777af0b3b}\label{class_cast_browser_a33be7181b5ed842a5547577777af0b3b}} 
\index{CastBrowser@{CastBrowser}!drop@{drop}}
\index{drop@{drop}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{drop()}{drop()}}
{\footnotesize\ttfamily bool Cast\+Browser\+::drop (\begin{DoxyParamCaption}\item[{const QMime\+Data $\ast$}]{data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00690                                             \{}
\DoxyCodeLine{00691   \textcolor{keywordflow}{if} (!acceptDrop(data)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00692 }
\DoxyCodeLine{00693   \textcolor{keywordflow}{if} (data-\/>hasUrls()) \{}
\DoxyCodeLine{00694     \mbox{\hyperlink{struct_io_cmd_1_1_load_resource_arguments}{IoCmd::LoadResourceArguments}} args;}
\DoxyCodeLine{00695 }
\DoxyCodeLine{00696     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} QUrl \&url : data-\/>urls()) \{}
\DoxyCodeLine{00697       \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp(url.toLocalFile().toStdWString());}
\DoxyCodeLine{00698       args.\mbox{\hyperlink{struct_io_cmd_1_1_load_resource_arguments_a5175016c278fd5a031f149abf4f77cb1}{resourceDatas}}.push\_back(fp);}
\DoxyCodeLine{00699     \}}
\DoxyCodeLine{00700 }
\DoxyCodeLine{00701     args.\mbox{\hyperlink{struct_io_cmd_1_1_load_resource_arguments_a145368ccf000dac53d511c77d2829e66}{castFolder}} = m\_treeViewer-\/>getCurrentFolder();}
\DoxyCodeLine{00702 }
\DoxyCodeLine{00703     \mbox{\hyperlink{namespace_io_cmd_a107f6d3100b922e0c09e9b4aa1a8602a}{IoCmd::loadResources}}(args);}
\DoxyCodeLine{00704   \}}
\DoxyCodeLine{00705 }
\DoxyCodeLine{00706   refresh();}
\DoxyCodeLine{00707   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00708 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cast_browser_ae1bf9e654eb6301ed4a038f8f299ef05}\label{class_cast_browser_ae1bf9e654eb6301ed4a038f8f299ef05}} 
\index{CastBrowser@{CastBrowser}!edit@{edit}}
\index{edit@{edit}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{edit()}{edit()}}
{\footnotesize\ttfamily void Cast\+Browser\+::edit (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00798                        \{}
\DoxyCodeLine{00799   \mbox{\hyperlink{class_cast_selection}{CastSelection}} *castSelection =}
\DoxyCodeLine{00800       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_cast_selection}{CastSelection}} *\textcolor{keyword}{>}(TSelection::getCurrent());}
\DoxyCodeLine{00801   \textcolor{keywordflow}{if} (!castSelection) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00802   std::vector<TXshLevel *> levels;}
\DoxyCodeLine{00803   castSelection-\/>getSelectedLevels(levels);}
\DoxyCodeLine{00804   \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{int})levels.size() == 1) \{}
\DoxyCodeLine{00805     \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *l = levels[0];}
\DoxyCodeLine{00806     \textcolor{keywordflow}{if} (l) \{}
\DoxyCodeLine{00807       \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = l-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{00808       \textcolor{keywordflow}{if} (sl) \{}
\DoxyCodeLine{00809         \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>setLevel(sl);}
\DoxyCodeLine{00810         \textcolor{keywordflow}{return};}
\DoxyCodeLine{00811       \}}
\DoxyCodeLine{00812     \}}
\DoxyCodeLine{00813     error(tr(\textcolor{stringliteral}{"{}It is not possible to edit the selected file."{}}));}
\DoxyCodeLine{00814   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00815     error(tr(\textcolor{stringliteral}{"{}It is not possible to edit more than one file at once."{}}));}
\DoxyCodeLine{00816 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cast_browser_ad5c338efba0f7708e545da3f4cc4ecc9}\label{class_cast_browser_ad5c338efba0f7708e545da3f4cc4ecc9}} 
\index{CastBrowser@{CastBrowser}!expose@{expose}}
\index{expose@{expose}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{expose()}{expose()}}
{\footnotesize\ttfamily void Cast\+Browser\+::expose (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00777                          \{}
\DoxyCodeLine{00778   std::set<int> selectedIndices =}
\DoxyCodeLine{00779       m\_itemViewer-\/>getPanel()-\/>getSelectedIndices();}
\DoxyCodeLine{00780   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{00781   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} index : selectedIndices) \{}
\DoxyCodeLine{00782     \mbox{\hyperlink{class_cast_item}{CastItem}} *item         = m\_castItems-\/>getItem(index);}
\DoxyCodeLine{00783     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl    = item-\/>getSimpleLevel();}
\DoxyCodeLine{00784     \mbox{\hyperlink{class_t_xsh_palette_level}{TXshPaletteLevel}} *pl   = item-\/>getPaletteLevel();}
\DoxyCodeLine{00785     \mbox{\hyperlink{class_t_xsh_sound_level}{TXshSoundLevel}} *soundl = item-\/>getSoundLevel();}
\DoxyCodeLine{00786     \textcolor{keywordflow}{if} (sl)}
\DoxyCodeLine{00787       FilmstripCmd::moveToScene(sl);}
\DoxyCodeLine{00788     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (pl)}
\DoxyCodeLine{00789       FilmstripCmd::moveToScene(pl);}
\DoxyCodeLine{00790     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (soundl)}
\DoxyCodeLine{00791       FilmstripCmd::moveToScene(soundl);}
\DoxyCodeLine{00792   \}}
\DoxyCodeLine{00793   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{00794 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cast_browser_ad5ede52ed956e909ec7d46e9c73f6cec}\label{class_cast_browser_ad5ede52ed956e909ec7d46e9c73f6cec}} 
\index{CastBrowser@{CastBrowser}!folderChanged@{folderChanged}}
\index{folderChanged@{folderChanged}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{folderChanged}{folderChanged}}
{\footnotesize\ttfamily void Cast\+Browser\+::folder\+Changed (\begin{DoxyParamCaption}\item[{QTree\+Widget\+Item $\ast$}]{current,  }\item[{QTree\+Widget\+Item $\ast$}]{previous }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00562                                                            \{}
\DoxyCodeLine{00563   refresh();}
\DoxyCodeLine{00564 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cast_browser_ac818258ecf5822b234ef1f5a78da7c85}\label{class_cast_browser_ac818258ecf5822b234ef1f5a78da7c85}} 
\index{CastBrowser@{CastBrowser}!getCastItems@{getCastItems}}
\index{getCastItems@{getCastItems}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{getCastItems()}{getCastItems()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_cast_items}{Cast\+Items}} const  \& Cast\+Browser\+::get\+Cast\+Items (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00088 \{ \textcolor{keywordflow}{return} *m\_castItems; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cast_browser_a04a5a570f3b9eb65703fa93d92b58e5a}\label{class_cast_browser_a04a5a570f3b9eb65703fa93d92b58e5a}} 
\index{CastBrowser@{CastBrowser}!getContextMenu@{getContextMenu}}
\index{getContextMenu@{getContextMenu}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{getContextMenu()}{getContextMenu()}}
{\footnotesize\ttfamily QMenu $\ast$ Cast\+Browser\+::get\+Context\+Menu (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent,  }\item[{int}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00712                                                              \{}
\DoxyCodeLine{00713   \textcolor{keyword}{const} std::set<int> \&indices = m\_itemViewer-\/>getSelectedIndices();}
\DoxyCodeLine{00714   \textcolor{keywordflow}{if} (indices.empty()) \{}
\DoxyCodeLine{00715     QMenu *menu = \textcolor{keyword}{new} QMenu(parent);}
\DoxyCodeLine{00716     menu-\/>addAction(CommandManager::instance()-\/>getAction(MI\_RemoveUnused));}
\DoxyCodeLine{00717     \textcolor{keywordflow}{return} menu;}
\DoxyCodeLine{00718   \}}
\DoxyCodeLine{00719   \textcolor{comment}{// controllo cosa c'e' nella selezione.}}
\DoxyCodeLine{00720   \textcolor{comment}{// => audioSelected, vectorLevelSelected, paletteSelected}}
\DoxyCodeLine{00721   std::set<int>::const\_iterator it;}
\DoxyCodeLine{00722   \textcolor{keywordtype}{bool} audioSelected       = \textcolor{keyword}{false};}
\DoxyCodeLine{00723   \textcolor{keywordtype}{bool} paletteSelected     = \textcolor{keyword}{false};}
\DoxyCodeLine{00724   \textcolor{keywordtype}{bool} vectorLevelSelected = \textcolor{keyword}{false};}
\DoxyCodeLine{00725   \textcolor{keywordtype}{bool} meshLevelSelected   = \textcolor{keyword}{false};}
\DoxyCodeLine{00726   \textcolor{keywordtype}{bool} otherFileSelected   = \textcolor{keyword}{false};}
\DoxyCodeLine{00727   \textcolor{keywordtype}{int} levelSelectedCount   = 0;}
\DoxyCodeLine{00728   \textcolor{keywordflow}{for} (it = indices.begin(); it != indices.end(); ++it) \{}
\DoxyCodeLine{00729     \textcolor{keywordtype}{int} index = *it;}
\DoxyCodeLine{00730     \textcolor{keywordflow}{if} (index < 0 || index >= m\_castItems-\/>getItemCount())}
\DoxyCodeLine{00731       \textcolor{keywordflow}{continue};  \textcolor{comment}{// non dovrebbe mai succedere}}
\DoxyCodeLine{00732     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = m\_castItems-\/>getItem(index)-\/>getSimpleLevel();}
\DoxyCodeLine{00733     \textcolor{keywordflow}{if} (!sl) \{}
\DoxyCodeLine{00734       \textcolor{keywordflow}{if} (m\_castItems-\/>getItem(index)-\/>getPaletteLevel())}
\DoxyCodeLine{00735         paletteSelected = \textcolor{keyword}{true};}
\DoxyCodeLine{00736       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00737         audioSelected = \textcolor{keyword}{true};}
\DoxyCodeLine{00738       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00739     \}}
\DoxyCodeLine{00740     levelSelectedCount++;}
\DoxyCodeLine{00741     \textcolor{keywordflow}{if} (sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == PLI\_XSHLEVEL)}
\DoxyCodeLine{00742       vectorLevelSelected = \textcolor{keyword}{true};}
\DoxyCodeLine{00743     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == MESH\_XSHLEVEL)}
\DoxyCodeLine{00744       meshLevelSelected = \textcolor{keyword}{true};}
\DoxyCodeLine{00745     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00746       otherFileSelected = \textcolor{keyword}{true};}
\DoxyCodeLine{00747   \}}
\DoxyCodeLine{00748   QMenu *menu        = \textcolor{keyword}{new} QMenu(parent);}
\DoxyCodeLine{00749   \mbox{\hyperlink{class_command_manager}{CommandManager}} *cm = CommandManager::instance();}
\DoxyCodeLine{00750 }
\DoxyCodeLine{00751   menu-\/>addAction(cm-\/>getAction(MI\_LevelSettings));}
\DoxyCodeLine{00752 }
\DoxyCodeLine{00753   menu-\/>addAction(cm-\/>getAction(MI\_ExposeResource));}
\DoxyCodeLine{00754   menu-\/>addAction(cm-\/>getAction(MI\_ShowFolderContents));}
\DoxyCodeLine{00755   \textcolor{keywordflow}{if} (!audioSelected \&\& !paletteSelected \&\& !meshLevelSelected)}
\DoxyCodeLine{00756     menu-\/>addAction(cm-\/>getAction(MI\_ViewFile));}
\DoxyCodeLine{00757   menu-\/>addAction(cm-\/>getAction(MI\_FileInfo));}
\DoxyCodeLine{00758 }
\DoxyCodeLine{00759   \textcolor{comment}{// MI\_EditLevel solo se e' stato selezionato un singolo diverso da livelli}}
\DoxyCodeLine{00760   \textcolor{comment}{// palette a livelli audio}}
\DoxyCodeLine{00761   \textcolor{keywordflow}{if} (indices.size() == 1 \&\& !audioSelected \&\& !paletteSelected)}
\DoxyCodeLine{00762     menu-\/>addAction(cm-\/>getAction(MI\_EditLevel));}
\DoxyCodeLine{00763   \textcolor{keywordflow}{if} (!paletteSelected) menu-\/>addAction(cm-\/>getAction(MI\_SaveLevel));}
\DoxyCodeLine{00764   menu-\/>addSeparator();}
\DoxyCodeLine{00765   \textcolor{comment}{// MI\_ConvertToVectors se sono stati selezionati solo livelli non vettoriali}}
\DoxyCodeLine{00766   \textcolor{keywordflow}{if} (!audioSelected \&\& !paletteSelected \&\& !vectorLevelSelected)}
\DoxyCodeLine{00767     menu-\/>addAction(cm-\/>getAction(MI\_ConvertToVectors));}
\DoxyCodeLine{00768   menu-\/>addSeparator();}
\DoxyCodeLine{00769   menu-\/>addAction(cm-\/>getAction(MI\_RemoveLevel));}
\DoxyCodeLine{00770   menu-\/>addAction(cm-\/>getAction(MI\_RemoveUnused));}
\DoxyCodeLine{00771 }
\DoxyCodeLine{00772   \textcolor{keywordflow}{return} menu;}
\DoxyCodeLine{00773 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cast_browser_aa539831b154f1de925ea3a19cb4a2de5}\label{class_cast_browser_aa539831b154f1de925ea3a19cb4a2de5}} 
\index{CastBrowser@{CastBrowser}!getItemCount@{getItemCount}}
\index{getItemCount@{getItemCount}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{getItemCount()}{getItemCount()}}
{\footnotesize\ttfamily int Cast\+Browser\+::get\+Item\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00618 \{ \textcolor{keywordflow}{return} m\_castItems-\/>getItemCount(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cast_browser_aeb15af4a1a27f1cf1ff6644c2f2ea44f}\label{class_cast_browser_aeb15af4a1a27f1cf1ff6644c2f2ea44f}} 
\index{CastBrowser@{CastBrowser}!getItemData@{getItemData}}
\index{getItemData@{getItemData}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{getItemData()}{getItemData()}}
{\footnotesize\ttfamily QVariant Cast\+Browser\+::get\+Item\+Data (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{Data\+Type}]{data\+Type,  }\item[{bool}]{is\+Selected = {\ttfamily false} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00623                                                    \{}
\DoxyCodeLine{00624   \textcolor{keywordflow}{if} (index < 0 || index >= getItemCount()) \textcolor{keywordflow}{return} QVariant();}
\DoxyCodeLine{00625   \mbox{\hyperlink{class_cast_item}{CastItem}} *item = m\_castItems-\/>getItem(index);}
\DoxyCodeLine{00626   \textcolor{keywordflow}{if} (dataType == Name)}
\DoxyCodeLine{00627     \textcolor{keywordflow}{return} item-\/>getName();}
\DoxyCodeLine{00628   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dataType == \mbox{\hyperlink{class_thumbnail}{Thumbnail}})}
\DoxyCodeLine{00629     \textcolor{keywordflow}{return} item-\/>getPixmap(isSelected);}
\DoxyCodeLine{00630   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dataType == ToolTip)}
\DoxyCodeLine{00631     \textcolor{keywordflow}{return} item-\/>getToolTip();}
\DoxyCodeLine{00632   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dataType == FrameCount)}
\DoxyCodeLine{00633     \textcolor{keywordflow}{return} item-\/>getFrameCount();}
\DoxyCodeLine{00634   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dataType == VersionControlStatus) \{}
\DoxyCodeLine{00635     \textcolor{keywordflow}{if} (!item-\/>exists())}
\DoxyCodeLine{00636       \textcolor{keywordflow}{return} VC\_Missing;}
\DoxyCodeLine{00637     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00638       \textcolor{keywordflow}{return} 0;  \textcolor{comment}{// No version control status displayed}}
\DoxyCodeLine{00639   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00640     \textcolor{keywordflow}{return} QVariant();}
\DoxyCodeLine{00641 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cast_browser_a42ea1677ad779c9faa1dd83617aad62b}\label{class_cast_browser_a42ea1677ad779c9faa1dd83617aad62b}} 
\index{CastBrowser@{CastBrowser}!refresh@{refresh}}
\index{refresh@{refresh}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{refresh}{refresh}}
{\footnotesize\ttfamily void Cast\+Browser\+::refresh (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00568                           \{}
\DoxyCodeLine{00569   \textcolor{keywordflow}{if} (isHidden()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00570   refreshData();}
\DoxyCodeLine{00571   m\_itemViewer-\/>refresh();}
\DoxyCodeLine{00572 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cast_browser_ae347c4e85654a122586085a91c65064f}\label{class_cast_browser_ae347c4e85654a122586085a91c65064f}} 
\index{CastBrowser@{CastBrowser}!refreshData@{refreshData}}
\index{refreshData@{refreshData}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{refreshData()}{refreshData()}}
{\footnotesize\ttfamily void Cast\+Browser\+::refresh\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00590                               \{}
\DoxyCodeLine{00591   m\_castItems-\/>clear();}
\DoxyCodeLine{00592   \mbox{\hyperlink{class_t_level_set}{TLevelSet}} *levelSet = CastTreeViewer::getLevelSet();}
\DoxyCodeLine{00593   \mbox{\hyperlink{class_t_file_path}{TFilePath}} folder    = m\_treeViewer-\/>getCurrentFolder();}
\DoxyCodeLine{00594   m\_folderName-\/>setText(toQString(folder));}
\DoxyCodeLine{00595   std::vector<TXshLevel *> levels;}
\DoxyCodeLine{00596   \textcolor{keywordflow}{if} (folder != \mbox{\hyperlink{class_t_file_path}{TFilePath}}())}
\DoxyCodeLine{00597     levelSet-\/>listLevels(levels, folder);}
\DoxyCodeLine{00598   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00599     levelSet-\/>listLevels(levels);}
\DoxyCodeLine{00600 }
\DoxyCodeLine{00601   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00602   \textcolor{keywordflow}{for} (i = 0; i < (int)levels.size(); i++) \{}
\DoxyCodeLine{00603     \textcolor{keywordflow}{if} (levels[i]-\/>getSimpleLevel())}
\DoxyCodeLine{00604       m\_castItems-\/>addItem(\textcolor{keyword}{new} \mbox{\hyperlink{class_level_cast_item}{LevelCastItem}}(}
\DoxyCodeLine{00605           levels[i], m\_itemViewer-\/>getPanel()-\/>getIconSize()));}
\DoxyCodeLine{00606     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (levels[i]-\/>getPaletteLevel())}
\DoxyCodeLine{00607       m\_castItems-\/>addItem(}
\DoxyCodeLine{00608           \textcolor{keyword}{new} \mbox{\hyperlink{class_palette_cast_item}{PaletteCastItem}}(levels[i]-\/>getPaletteLevel(),}
\DoxyCodeLine{00609                               m\_itemViewer-\/>getPanel()-\/>getIconSize()));}
\DoxyCodeLine{00610     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (levels[i]-\/>getSoundLevel())}
\DoxyCodeLine{00611       m\_castItems-\/>addItem(\textcolor{keyword}{new} \mbox{\hyperlink{class_sound_cast_item}{SoundCastItem}}(}
\DoxyCodeLine{00612           levels[i]-\/>getSoundLevel(), m\_itemViewer-\/>getPanel()-\/>getIconSize()));}
\DoxyCodeLine{00613   \}}
\DoxyCodeLine{00614 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cast_browser_a94eca10a93f44ded3b50986bc5393903}\label{class_cast_browser_a94eca10a93f44ded3b50986bc5393903}} 
\index{CastBrowser@{CastBrowser}!showFolderContents@{showFolderContents}}
\index{showFolderContents@{showFolderContents}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{showFolderContents()}{showFolderContents()}}
{\footnotesize\ttfamily void Cast\+Browser\+::show\+Folder\+Contents (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00820                                      \{}
\DoxyCodeLine{00821   \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{00822   \mbox{\hyperlink{class_cast_selection}{CastSelection}} *castSelection =}
\DoxyCodeLine{00823       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_cast_selection}{CastSelection}} *\textcolor{keyword}{>}(TSelection::getCurrent());}
\DoxyCodeLine{00824   \textcolor{keywordflow}{if} (!castSelection) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00825   std::vector<TXshLevel *> levels;}
\DoxyCodeLine{00826   castSelection-\/>getSelectedLevels(levels);}
\DoxyCodeLine{00827   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{00828   \mbox{\hyperlink{class_t_file_path}{TFilePath}} folderPath, filePath;}
\DoxyCodeLine{00829   \textcolor{keywordflow}{for} (i = 0; i < levels.size(); i++) \{}
\DoxyCodeLine{00830     folderPath = levels[i]-\/>getPath().\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}();}
\DoxyCodeLine{00831     filePath   = levels[i]-\/>getPath();}
\DoxyCodeLine{00832 }
\DoxyCodeLine{00833     folderPath = scene-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(folderPath);}
\DoxyCodeLine{00834     filePath   = scene-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(filePath);}
\DoxyCodeLine{00835 }
\DoxyCodeLine{00836     \textcolor{keywordflow}{if} (!TSystem::doesExistFileOrLevel(filePath)) \{}
\DoxyCodeLine{00837       error(}
\DoxyCodeLine{00838           tr(\textcolor{stringliteral}{"{}It is not possible to show the folder containing the selected "{}}}
\DoxyCodeLine{00839              \textcolor{stringliteral}{"{}file, as the file has not been saved yet."{}}));}
\DoxyCodeLine{00840     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00841       \textcolor{keywordflow}{if} (TSystem::isUNC(folderPath))}
\DoxyCodeLine{00842         QDesktopServices::openUrl(}
\DoxyCodeLine{00843             QUrl(QString::fromStdWString(folderPath.getWideString())));}
\DoxyCodeLine{00844       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00845         QDesktopServices::openUrl(QUrl::fromLocalFile(}
\DoxyCodeLine{00846             QString::fromStdWString(folderPath.getWideString())));}
\DoxyCodeLine{00847     \}}
\DoxyCodeLine{00848   \}}
\DoxyCodeLine{00849 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cast_browser_af881e95537e0bccbfa4f0b2d71036bbd}\label{class_cast_browser_af881e95537e0bccbfa4f0b2d71036bbd}} 
\index{CastBrowser@{CastBrowser}!sortByDataModel@{sortByDataModel}}
\index{sortByDataModel@{sortByDataModel}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{sortByDataModel()}{sortByDataModel()}}
{\footnotesize\ttfamily void Cast\+Browser\+::sort\+By\+Data\+Model (\begin{DoxyParamCaption}\item[{Data\+Type}]{data\+Type,  }\item[{bool}]{is\+Discendent }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00532                                                                       \{}
\DoxyCodeLine{00533   \textcolor{keywordflow}{if} (dataType != getCurrentOrderType()) \{}
\DoxyCodeLine{00534     \textcolor{comment}{// Sort by another dataType}}
\DoxyCodeLine{00535     \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00536     \textcolor{keywordflow}{for} (i = 1; i < m\_castItems-\/>getItemCount(); i++) \{}
\DoxyCodeLine{00537       \textcolor{keywordtype}{int} index = i;}
\DoxyCodeLine{00538       \textcolor{keywordflow}{while} (index > 0 \&\& compareData(dataType, index -\/ 1, index) > 0) \{}
\DoxyCodeLine{00539         m\_castItems-\/>swapItem(index -\/ 1, index);}
\DoxyCodeLine{00540         index = index -\/ 1;}
\DoxyCodeLine{00541       \}}
\DoxyCodeLine{00542     \}}
\DoxyCodeLine{00543     setIsDiscendentOrder(\textcolor{keyword}{true});}
\DoxyCodeLine{00544     setOrderType(dataType);}
\DoxyCodeLine{00545   \}}
\DoxyCodeLine{00546   \textcolor{comment}{// Sort by order (invert current)}}
\DoxyCodeLine{00547   \textcolor{keywordflow}{if} (isDiscendentOrder() != isDiscendent) \{}
\DoxyCodeLine{00548     setIsDiscendentOrder(isDiscendent);}
\DoxyCodeLine{00549     std::vector<CastItem *> items;}
\DoxyCodeLine{00550     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_castItems-\/>getItemCount(); i++)}
\DoxyCodeLine{00551       items.push\_back(m\_castItems-\/>getItem(i)-\/>clone());}
\DoxyCodeLine{00552     m\_castItems-\/>clear();}
\DoxyCodeLine{00553     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = items.size() -\/ 1; i >= 0; i-\/-\/) m\_castItems-\/>addItem(items[i]);}
\DoxyCodeLine{00554   \}}
\DoxyCodeLine{00555 }
\DoxyCodeLine{00556   m\_itemViewer-\/>getPanel()-\/>update();}
\DoxyCodeLine{00557 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cast_browser_a61183d8949eac3abac0adad409bd5d7a}\label{class_cast_browser_a61183d8949eac3abac0adad409bd5d7a}} 
\index{CastBrowser@{CastBrowser}!startDragDrop@{startDragDrop}}
\index{startDragDrop@{startDragDrop}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{startDragDrop()}{startDragDrop()}}
{\footnotesize\ttfamily void Cast\+Browser\+::start\+Drag\+Drop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_dv_item_list_model}{Dv\+Item\+List\+Model}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00665                                 \{}
\DoxyCodeLine{00666   \mbox{\hyperlink{class_t_repetition_guard}{TRepetitionGuard}} guard;}
\DoxyCodeLine{00667   \textcolor{keywordflow}{if} (!guard.hasLock()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00668 }
\DoxyCodeLine{00669   \textcolor{keyword}{const} std::set<int> \&indices = m\_itemViewer-\/>getSelectedIndices();}
\DoxyCodeLine{00670   \textcolor{keywordflow}{if} (indices.empty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00671   QDrag *drag = \textcolor{keyword}{new} QDrag(\textcolor{keyword}{this});}
\DoxyCodeLine{00672 }
\DoxyCodeLine{00673   QVariant v = getItemData(*indices.begin(), \mbox{\hyperlink{class_thumbnail}{Thumbnail}});}
\DoxyCodeLine{00674   \textcolor{keywordflow}{if} (v != QVariant()) \{}
\DoxyCodeLine{00675     QPixmap dropThumbnail = v.value<QPixmap>();}
\DoxyCodeLine{00676     \textcolor{keywordflow}{if} (!dropThumbnail.isNull()) drag-\/>setPixmap(dropThumbnail);}
\DoxyCodeLine{00677   \}}
\DoxyCodeLine{00678   drag-\/>setMimeData(m\_castItems-\/>getSelectedItems(indices));}
\DoxyCodeLine{00679   Qt::DropAction dropAction = drag-\/>exec(Qt::CopyAction | Qt::MoveAction);}
\DoxyCodeLine{00680 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cast_browser_a1d244b4ad6b09867a03e4012e9e6a139}\label{class_cast_browser_a1d244b4ad6b09867a03e4012e9e6a139}} 
\index{CastBrowser@{CastBrowser}!viewFile@{viewFile}}
\index{viewFile@{viewFile}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{viewFile()}{viewFile()}}
{\footnotesize\ttfamily void Cast\+Browser\+::view\+File (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00852                            \{}
\DoxyCodeLine{00853   \mbox{\hyperlink{class_cast_selection}{CastSelection}} *castSelection =}
\DoxyCodeLine{00854       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_cast_selection}{CastSelection}} *\textcolor{keyword}{>}(TSelection::getCurrent());}
\DoxyCodeLine{00855   \textcolor{keywordflow}{if} (!castSelection) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00856   std::vector<TXshLevel *> levels;}
\DoxyCodeLine{00857   castSelection-\/>getSelectedLevels(levels);}
\DoxyCodeLine{00858   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{00859   \mbox{\hyperlink{class_t_file_path}{TFilePath}} filePath;}
\DoxyCodeLine{00860   \textcolor{keywordflow}{if} (levels.empty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00861   \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{00862   \textcolor{keywordflow}{for} (i = 0; i < levels.size(); i++) \{}
\DoxyCodeLine{00863     filePath = levels[i]-\/>getPath();}
\DoxyCodeLine{00864 }
\DoxyCodeLine{00865     filePath = scene-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(filePath);}
\DoxyCodeLine{00866     \textcolor{keywordflow}{if} (!TSystem::doesExistFileOrLevel(filePath)) \{}
\DoxyCodeLine{00867       error(}
\DoxyCodeLine{00868           tr(\textcolor{stringliteral}{"{}It is not possible to view the selected file, as the file has "{}}}
\DoxyCodeLine{00869              \textcolor{stringliteral}{"{}not been saved yet."{}}));}
\DoxyCodeLine{00870     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00871       \textcolor{keywordflow}{if} (!TFileType::isViewable(TFileType::getInfo(filePath))) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00872 }
\DoxyCodeLine{00873       \textcolor{keywordflow}{if} (Preferences::instance()-\/>isDefaultViewerEnabled() \&\&}
\DoxyCodeLine{00874           (filePath.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}mov"{}} || filePath.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}avi"{}} ||}
\DoxyCodeLine{00875            filePath.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}3gp"{}}))}
\DoxyCodeLine{00876         QDesktopServices::openUrl(QUrl(\textcolor{stringliteral}{"{}file:///"{}} + toQString(filePath)));}
\DoxyCodeLine{00877       else}
\DoxyCodeLine{00878         ::viewFile(filePath);}
\DoxyCodeLine{00879     \}}
\DoxyCodeLine{00880   \}}
\DoxyCodeLine{00881 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cast_browser_a8fcc93b9ce37bfb5b6b924db2309ecdc}\label{class_cast_browser_a8fcc93b9ce37bfb5b6b924db2309ecdc}} 
\index{CastBrowser@{CastBrowser}!viewFileInfo@{viewFileInfo}}
\index{viewFileInfo@{viewFileInfo}!CastBrowser@{CastBrowser}}
\doxysubsubsection{\texorpdfstring{viewFileInfo()}{viewFileInfo()}}
{\footnotesize\ttfamily void Cast\+Browser\+::view\+File\+Info (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00885                                \{}
\DoxyCodeLine{00886   \mbox{\hyperlink{class_cast_selection}{CastSelection}} *castSelection =}
\DoxyCodeLine{00887       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_cast_selection}{CastSelection}} *\textcolor{keyword}{>}(TSelection::getCurrent());}
\DoxyCodeLine{00888   \textcolor{keywordflow}{if} (!castSelection) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00889   std::vector<TXshLevel *> levels;}
\DoxyCodeLine{00890   castSelection-\/>getSelectedLevels(levels);}
\DoxyCodeLine{00891   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{00892   \textcolor{keywordtype}{int} i             = 0;}
\DoxyCodeLine{00893 }
\DoxyCodeLine{00894   \textcolor{keywordflow}{if} (levels.empty()) \{}
\DoxyCodeLine{00895     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00896   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00897     \textcolor{keywordflow}{for} (i = 0; i < levels.size(); i++) \{}
\DoxyCodeLine{00898       \mbox{\hyperlink{class_t_file_path}{TFilePath}} filePath;}
\DoxyCodeLine{00899       filePath = levels[i]-\/>getPath();}
\DoxyCodeLine{00900 }
\DoxyCodeLine{00901       filePath = scene-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(filePath);}
\DoxyCodeLine{00902       \textcolor{keywordflow}{if} (!TSystem::doesExistFileOrLevel(filePath)) \{}
\DoxyCodeLine{00903         error(}
\DoxyCodeLine{00904             tr(\textcolor{stringliteral}{"{}It is not possible to show the info of the selected file, as "{}}}
\DoxyCodeLine{00905                \textcolor{stringliteral}{"{}the file has not been saved yet."{}}));}
\DoxyCodeLine{00906       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00907         \mbox{\hyperlink{class_info_viewer}{InfoViewer}} *infoViewer = 0;}
\DoxyCodeLine{00908         infoViewer             = \textcolor{keyword}{new} \mbox{\hyperlink{class_info_viewer}{InfoViewer}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00909         infoViewer-\/>setItem(0, 0, filePath);}
\DoxyCodeLine{00910       \}}
\DoxyCodeLine{00911     \}}
\DoxyCodeLine{00912   \}}
\DoxyCodeLine{00913 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/castviewer.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/castviewer.\+cpp\end{DoxyCompactItemize}
