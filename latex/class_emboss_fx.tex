\hypertarget{class_emboss_fx}{}\doxysection{Emboss\+Fx Class Reference}
\label{class_emboss_fx}\index{EmbossFx@{EmbossFx}}
Inheritance diagram for Emboss\+Fx\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=5.000000cm]{class_emboss_fx}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_emboss_fx_a8521f830399a85f2798b540331b3d8b0}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{class_emboss_fx_aff0ec59021010cc65f9c8e1ed1a9aa57}{transform}} (double frame, int port, const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect\+On\+Output, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info\+On\+Output, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect\+On\+Input, \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info\+On\+Input) override
\item 
void \mbox{\hyperlink{class_emboss_fx_a86473e7e07259105498e84e4b0c21fd6}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&ri) override
\item 
int \mbox{\hyperlink{class_emboss_fx_a92868100619fd4e6666e4aed2411ab79}{get\+Memory\+Requirement}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
bool \mbox{\hyperlink{class_emboss_fx_a993f086ec0afab3cce80ae6d9067a67f}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_emboss_fx_a41b7017d4207604f958f6340e02eaa2e}\label{class_emboss_fx_a41b7017d4207604f958f6340e02eaa2e}} 
\index{EmbossFx@{EmbossFx}!EmbossFx@{EmbossFx}}
\index{EmbossFx@{EmbossFx}!EmbossFx@{EmbossFx}}
\doxysubsubsection{\texorpdfstring{EmbossFx()}{EmbossFx()}}
{\footnotesize\ttfamily Emboss\+Fx\+::\+Emboss\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00019       : m\_intensity(0.5), m\_elevation(45.0), m\_direction(90.0), m\_radius(1.0) \{}
\DoxyCodeLine{00020     m\_radius-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00021     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}intensity"{}}, m\_intensity);}
\DoxyCodeLine{00022     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}elevation"{}}, m\_elevation);}
\DoxyCodeLine{00023     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}direction"{}}, m\_direction);}
\DoxyCodeLine{00024     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}radius"{}}, m\_radius);}
\DoxyCodeLine{00025     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Source"{}}, m\_input);}
\DoxyCodeLine{00026     m\_intensity-\/>setValueRange(0.0, 1.0, 0.1);}
\DoxyCodeLine{00027     m\_elevation-\/>setValueRange(0.0, 360.0);}
\DoxyCodeLine{00028     m\_direction-\/>setValueRange(0.0, 360.0);}
\DoxyCodeLine{00029     m\_radius-\/>setValueRange(0.0, 10.0);}
\DoxyCodeLine{00030   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_emboss_fx_aa616311edaa0f05fe922ede376ddbb3f}\label{class_emboss_fx_aa616311edaa0f05fe922ede376ddbb3f}} 
\index{EmbossFx@{EmbossFx}!````~EmbossFx@{$\sim$EmbossFx}}
\index{````~EmbossFx@{$\sim$EmbossFx}!EmbossFx@{EmbossFx}}
\doxysubsubsection{\texorpdfstring{$\sim$EmbossFx()}{~EmbossFx()}}
{\footnotesize\ttfamily Emboss\+Fx\+::$\sim$\+Emboss\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00032 \{\};}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_emboss_fx_a993f086ec0afab3cce80ae6d9067a67f}\label{class_emboss_fx_a993f086ec0afab3cce80ae6d9067a67f}} 
\index{EmbossFx@{EmbossFx}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!EmbossFx@{EmbossFx}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool Emboss\+Fx\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00053                                                                      \{}
\DoxyCodeLine{00054     \textcolor{keywordflow}{return} (isAlmostIsotropic(info.m\_affine));}
\DoxyCodeLine{00055   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_emboss_fx_a86473e7e07259105498e84e4b0c21fd6}\label{class_emboss_fx_a86473e7e07259105498e84e4b0c21fd6}} 
\index{EmbossFx@{EmbossFx}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!EmbossFx@{EmbossFx}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void Emboss\+Fx\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{ri }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00151                                                                              \{}
\DoxyCodeLine{00152   \textcolor{keywordflow}{if} (!m\_input.isConnected()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00153 }
\DoxyCodeLine{00154   \textcolor{keywordtype}{double} min, max, step;}
\DoxyCodeLine{00155   m\_radius-\/>getValueRange(min, max, step);}
\DoxyCodeLine{00156 }
\DoxyCodeLine{00157   \textcolor{keywordtype}{double} scale     = sqrt(fabs(ri.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.det()));}
\DoxyCodeLine{00158   \textcolor{keywordtype}{double} radius    = tcrop(m\_radius-\/>getValue(frame), min, max) * scale;}
\DoxyCodeLine{00159   \textcolor{keywordtype}{double} direction = (m\_direction-\/>getValue(frame));}
\DoxyCodeLine{00160   \textcolor{keywordtype}{double} elevation = (m\_elevation-\/>getValue(frame)) * M\_PI\_180;}
\DoxyCodeLine{00161   \textcolor{keywordtype}{double} intensity = m\_intensity-\/>getValue(frame);}
\DoxyCodeLine{00162   \textcolor{keywordtype}{double} azimuth   = direction * M\_PI\_180;}
\DoxyCodeLine{00163 }
\DoxyCodeLine{00164   \textcolor{comment}{// NOTE: This enlargement is perhaps needed in the calculation of the fx -\/ but}}
\DoxyCodeLine{00165   \textcolor{comment}{// no output will}}
\DoxyCodeLine{00166   \textcolor{comment}{// be generated for it -\/ so there is no trace of it in the doGetBBox}}
\DoxyCodeLine{00167   \textcolor{comment}{// function...}}
\DoxyCodeLine{00168   \textcolor{keywordtype}{int} border = radius + 1;}
\DoxyCodeLine{00169   \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} srcRas =}
\DoxyCodeLine{00170       tile.getRaster()-\/>create(tile.getRaster()-\/>getLx() + border * 2,}
\DoxyCodeLine{00171                                tile.getRaster()-\/>getLy() + border * 2);}
\DoxyCodeLine{00172   \mbox{\hyperlink{class_t_tile}{TTile}} srcTile(srcRas, tile.m\_pos -\/ \mbox{\hyperlink{class_t_point_t}{TPointD}}(border, border));}
\DoxyCodeLine{00173 }
\DoxyCodeLine{00174   m\_input-\/>compute(srcTile, frame, ri);}
\DoxyCodeLine{00175   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} raster32    = tile.getRaster();}
\DoxyCodeLine{00176   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} srcraster32 = srcTile.getRaster();}
\DoxyCodeLine{00177 }
\DoxyCodeLine{00178   \textcolor{keywordflow}{if} (raster32)}
\DoxyCodeLine{00179     doEmboss<TPixel32, TPixelGR8, UCHAR>(raster32, srcraster32, azimuth,}
\DoxyCodeLine{00180                                          elevation, intensity, radius);}
\DoxyCodeLine{00181   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00182     \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} raster64    = tile.getRaster();}
\DoxyCodeLine{00183     \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} srcraster64 = srcTile.getRaster();}
\DoxyCodeLine{00184     \textcolor{keywordflow}{if} (raster64)}
\DoxyCodeLine{00185       doEmboss<TPixel64, TPixelGR16, USHORT>(raster64, srcraster64, azimuth,}
\DoxyCodeLine{00186                                              elevation, intensity, radius);}
\DoxyCodeLine{00187     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00188       \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}Brightness\&Contrast: unsupported Pixel Type"{}});}
\DoxyCodeLine{00189   \}}
\DoxyCodeLine{00190 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_emboss_fx_a8521f830399a85f2798b540331b3d8b0}\label{class_emboss_fx_a8521f830399a85f2798b540331b3d8b0}} 
\index{EmbossFx@{EmbossFx}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!EmbossFx@{EmbossFx}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool Emboss\+Fx\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00035                                                        \{}
\DoxyCodeLine{00036     \textcolor{keywordflow}{if} (m\_input.isConnected()) \{}
\DoxyCodeLine{00037       \textcolor{keywordtype}{bool} ret = m\_input-\/>doGetBBox(frame, bBox, info);}
\DoxyCodeLine{00038       \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00039     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00040       bBox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00041       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00042     \}}
\DoxyCodeLine{00043   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_emboss_fx_a92868100619fd4e6666e4aed2411ab79}\label{class_emboss_fx_a92868100619fd4e6666e4aed2411ab79}} 
\index{EmbossFx@{EmbossFx}!getMemoryRequirement@{getMemoryRequirement}}
\index{getMemoryRequirement@{getMemoryRequirement}!EmbossFx@{EmbossFx}}
\doxysubsubsection{\texorpdfstring{getMemoryRequirement()}{getMemoryRequirement()}}
{\footnotesize\ttfamily int Emboss\+Fx\+::get\+Memory\+Requirement (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Specifies the approximate size (in Mega\+Bytes) of the maximum allocation instance that this fx will need to perform in order to render the passed input. This method should be reimplemented in order to make the Toonz rendering process aware of the use of big raster memory chunks, at least. Observe that the passed tile geometry is implicitly {\itshape  already allocated \texorpdfstring{$<$}{<}\textbackslash{}i\texorpdfstring{$>$}{>} for the fx output. ~\newline
The default implementation returns 0, assuming that the passed implicit memory size is passed below in node computation without further allocation of resources. Fxs can reimplement this to -\/1 to explicitly disable the Toonz\textquotesingle{}s smart memory handling. ~\newline
 ~\newline
\begin{DoxyNote}{Note}
The rendering process ensures that the passed render settings are {\itshape handled} by the fx before this function is invoked -\/ do not waste code for it. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRaster\+Fx\+::memory\+Size}} and TRaster\+Fx\+::can\+Handle methods. 
\end{DoxySeeAlso}
}

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_af8eb991c9756f4fb2e48d9f96cbacfba}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00212                                                                 \{}
\DoxyCodeLine{00213   \textcolor{keywordtype}{double} scale  = sqrt(fabs(info.m\_affine.det()));}
\DoxyCodeLine{00214   \textcolor{keywordtype}{double} radius = m\_radius-\/>getValue(frame) * scale;}
\DoxyCodeLine{00215   \textcolor{keywordtype}{int} border    = radius + 1;}
\DoxyCodeLine{00216 }
\DoxyCodeLine{00217   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRasterFx::memorySize}}(rect.enlarge(border), info.m\_bpp);}
\DoxyCodeLine{00218 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00560}{TRaster\+Fx\+::memory\+Size()}}.

\mbox{\Hypertarget{class_emboss_fx_aff0ec59021010cc65f9c8e1ed1a9aa57}\label{class_emboss_fx_aff0ec59021010cc65f9c8e1ed1a9aa57}} 
\index{EmbossFx@{EmbossFx}!transform@{transform}}
\index{transform@{transform}!EmbossFx@{EmbossFx}}
\doxysubsubsection{\texorpdfstring{transform()}{transform()}}
{\footnotesize\ttfamily void Emboss\+Fx\+::transform (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{int}]{port,  }\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect\+On\+Output,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info\+On\+Output,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect\+On\+Input,  }\item[{\mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info\+On\+Input }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00196                                                                             \{}
\DoxyCodeLine{00197   infoOnInput = infoOnOutput;}
\DoxyCodeLine{00198 }
\DoxyCodeLine{00199   \textcolor{keywordtype}{double} min, max, step;}
\DoxyCodeLine{00200   m\_radius-\/>getValueRange(min, max, step);}
\DoxyCodeLine{00201 }
\DoxyCodeLine{00202   \textcolor{keywordtype}{double} scale  = sqrt(fabs(infoOnOutput.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.det()));}
\DoxyCodeLine{00203   \textcolor{keywordtype}{double} radius = (tcrop(m\_radius-\/>getValue(frame), min, max) * scale);}
\DoxyCodeLine{00204   \textcolor{keywordtype}{int} border    = radius + 1;}
\DoxyCodeLine{00205 }
\DoxyCodeLine{00206   rectOnInput = rectOnOutput.enlarge(border);}
\DoxyCodeLine{00207 \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/embossfx.\+cpp\end{DoxyCompactItemize}
