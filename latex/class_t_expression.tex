\hypertarget{class_t_expression}{}\doxysection{TExpression Class Reference}
\label{class_t_expression}\index{TExpression@{TExpression}}


This class manages a generic expression.  




{\ttfamily \#include $<$texpression.\+h$>$}

\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_t_expression_1_1_imp}{Imp}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_expression_a7f9b784e3c6a470f1e129cb118f11048}{TExpression}} (const \mbox{\hyperlink{class_t_expression}{TExpression}} \&)
\item 
\mbox{\hyperlink{class_t_expression}{TExpression}} \& \mbox{\hyperlink{class_t_expression_a55956120b83447e0509cf4e332204111}{operator=}} (\mbox{\hyperlink{class_t_expression}{TExpression}})
\item 
void \mbox{\hyperlink{class_t_expression_a0ffb229c1e08a4a894bf03cf56464da9}{set\+Grammar}} (const \mbox{\hyperlink{class_t_syntax_1_1_grammar}{TSyntax\+::\+Grammar}} $\ast$grammar)
\begin{DoxyCompactList}\small\item\em Sets the expression\textquotesingle{}s grammar -\/ does {\bfseries{not}} acquire ownership. \end{DoxyCompactList}\item 
const \mbox{\hyperlink{class_t_syntax_1_1_grammar}{TSyntax\+::\+Grammar}} $\ast$ \mbox{\hyperlink{class_t_expression_a85c6623b89bf8d8d2efebf730fe93ef4}{get\+Grammar}} () const
\item 
void \mbox{\hyperlink{class_t_expression_af9aa579c14ed806cb7829137b4e699bc}{set\+Text}} (std\+::string text)
\item 
std\+::string \mbox{\hyperlink{class_t_expression_afc42f807f796a84191ac099de267aed5}{get\+Text}} () const
\item 
\mbox{\hyperlink{class_t_syntax_1_1_calculator}{TSyntax\+::\+Calculator}} $\ast$ \mbox{\hyperlink{class_t_expression_a131b4ebfbe19ee94ed5ad4b225e7678a}{get\+Calculator}} ()
\item 
bool \mbox{\hyperlink{class_t_expression_a6fd7a9c936957b0d9648718628f87ef2}{is\+Valid}} ()
\item 
std\+::string \mbox{\hyperlink{class_t_expression_a0ae3076134c2b68dfc1a80282e03b6aa}{get\+Error}} () const
\item 
std\+::pair$<$ int, int $>$ \mbox{\hyperlink{class_t_expression_ad0a762e447f0730cdf4666757e6e61f6}{get\+Error\+Pos}} () const
\item 
void \mbox{\hyperlink{class_t_expression_a8f7451ed15b5c177d74f7dca180e5c58}{accept}} (\mbox{\hyperlink{class_t_syntax_1_1_calculator_node_visitor}{TSyntax\+::\+Calculator\+Node\+Visitor}} \&visitor)
\item 
void \mbox{\hyperlink{class_t_expression_a459eace252251402238fe9212cd03bfd}{set\+Owner\+Parameter}} (\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$param)
\item 
\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$ \mbox{\hyperlink{class_t_expression_a934ff6addb8dc8b16649d9a2723947e7}{get\+Owner\+Parameter}} () const
\item 
bool \mbox{\hyperlink{class_t_expression_a0a8274ef12d9231d8c03de4fb29691da}{is\+Cycling}} () const
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This class manages a generic expression. 

An expression is a sequence of characthers and contains\+:

\begin{DoxyItemize}
\item a {\itshape Calc\+Node} that is a basic element of the expression that must be evaluated; \item a {\itshape Grammar} that is a sequence of string patterns that define operations on nodes; \item a {\itshape Builder} that is a sequence or a tree of calcnodes and operations on that; \end{DoxyItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_expression_a2a91a6949fba565d51be0f568b01d771}\label{class_t_expression_a2a91a6949fba565d51be0f568b01d771}} 
\index{TExpression@{TExpression}!TExpression@{TExpression}}
\index{TExpression@{TExpression}!TExpression@{TExpression}}
\doxysubsubsection{\texorpdfstring{TExpression()}{TExpression()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily TExpression\+::\+TExpression (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00048 : m\_imp(\textcolor{keyword}{new} Imp()) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_expression_a4b9ffe13959f2f65752fc6c8b4741877}\label{class_t_expression_a4b9ffe13959f2f65752fc6c8b4741877}} 
\index{TExpression@{TExpression}!````~TExpression@{$\sim$TExpression}}
\index{````~TExpression@{$\sim$TExpression}!TExpression@{TExpression}}
\doxysubsubsection{\texorpdfstring{$\sim$TExpression()}{~TExpression()}}
{\footnotesize\ttfamily TExpression\+::$\sim$\+TExpression (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00052 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_expression_a7f9b784e3c6a470f1e129cb118f11048}\label{class_t_expression_a7f9b784e3c6a470f1e129cb118f11048}} 
\index{TExpression@{TExpression}!TExpression@{TExpression}}
\index{TExpression@{TExpression}!TExpression@{TExpression}}
\doxysubsubsection{\texorpdfstring{TExpression()}{TExpression()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily TExpression\+::\+TExpression (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_expression}{TExpression}} \&}]{src }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00056                                                : m\_imp(\textcolor{keyword}{new} Imp()) \{}
\DoxyCodeLine{00057   m\_imp-\/>m\_grammar       = src.m\_imp-\/>m\_grammar;}
\DoxyCodeLine{00058   m\_imp-\/>m\_param         = src.m\_imp-\/>m\_param;}
\DoxyCodeLine{00059   m\_imp-\/>m\_text          = src.m\_imp-\/>m\_text;}
\DoxyCodeLine{00060   m\_imp-\/>m\_calculator    = 0;}
\DoxyCodeLine{00061   m\_imp-\/>m\_isValid       = src.m\_imp-\/>m\_isValid;}
\DoxyCodeLine{00062   m\_imp-\/>m\_error         = src.m\_imp-\/>m\_error;}
\DoxyCodeLine{00063   m\_imp-\/>m\_errorPos      = src.m\_imp-\/>m\_errorPos;}
\DoxyCodeLine{00064   m\_imp-\/>m\_hasBeenParsed = \textcolor{keyword}{false};}
\DoxyCodeLine{00065   m\_imp-\/>m\_hasReference  = src.m\_imp-\/>m\_hasReference;}
\DoxyCodeLine{00066 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_expression_a8f7451ed15b5c177d74f7dca180e5c58}\label{class_t_expression_a8f7451ed15b5c177d74f7dca180e5c58}} 
\index{TExpression@{TExpression}!accept@{accept}}
\index{accept@{accept}!TExpression@{TExpression}}
\doxysubsubsection{\texorpdfstring{accept()}{accept()}}
{\footnotesize\ttfamily void TExpression\+::accept (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_syntax_1_1_calculator_node_visitor}{TSyntax\+::\+Calculator\+Node\+Visitor}} \&}]{visitor }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00137                                                               \{}
\DoxyCodeLine{00138   \textcolor{keywordflow}{if} (!m\_imp-\/>m\_hasBeenParsed) parse();}
\DoxyCodeLine{00139   \textcolor{keywordflow}{if} (m\_imp-\/>m\_isValid \&\& m\_imp-\/>m\_calculator)}
\DoxyCodeLine{00140     m\_imp-\/>m\_calculator-\/>accept(visitor);}
\DoxyCodeLine{00141 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_expression_a131b4ebfbe19ee94ed5ad4b225e7678a}\label{class_t_expression_a131b4ebfbe19ee94ed5ad4b225e7678a}} 
\index{TExpression@{TExpression}!getCalculator@{getCalculator}}
\index{getCalculator@{getCalculator}!TExpression@{TExpression}}
\doxysubsubsection{\texorpdfstring{getCalculator()}{getCalculator()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_syntax_1_1_calculator}{TSyntax\+::\+Calculator}} $\ast$ TExpression\+::get\+Calculator (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00110                                               \{}
\DoxyCodeLine{00111   \textcolor{keywordflow}{if} (!m\_imp-\/>m\_hasBeenParsed) parse();}
\DoxyCodeLine{00112   \textcolor{keywordflow}{if} (m\_imp-\/>m\_isValid \&\& m\_imp-\/>m\_calculator)}
\DoxyCodeLine{00113     \textcolor{keywordflow}{return} m\_imp-\/>m\_calculator;}
\DoxyCodeLine{00114   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00115     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00116 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_expression_a0ae3076134c2b68dfc1a80282e03b6aa}\label{class_t_expression_a0ae3076134c2b68dfc1a80282e03b6aa}} 
\index{TExpression@{TExpression}!getError@{getError}}
\index{getError@{getError}!TExpression@{TExpression}}
\doxysubsubsection{\texorpdfstring{getError()}{getError()}}
{\footnotesize\ttfamily std\+::string TExpression\+::get\+Error (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00127 \{ \textcolor{keywordflow}{return} m\_imp-\/>m\_error; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_expression_ad0a762e447f0730cdf4666757e6e61f6}\label{class_t_expression_ad0a762e447f0730cdf4666757e6e61f6}} 
\index{TExpression@{TExpression}!getErrorPos@{getErrorPos}}
\index{getErrorPos@{getErrorPos}!TExpression@{TExpression}}
\doxysubsubsection{\texorpdfstring{getErrorPos()}{getErrorPos()}}
{\footnotesize\ttfamily std\+::pair$<$ int, int $>$ TExpression\+::get\+Error\+Pos (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00131                                                  \{}
\DoxyCodeLine{00132   \textcolor{keywordflow}{return} m\_imp-\/>m\_errorPos;}
\DoxyCodeLine{00133 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_expression_a85c6623b89bf8d8d2efebf730fe93ef4}\label{class_t_expression_a85c6623b89bf8d8d2efebf730fe93ef4}} 
\index{TExpression@{TExpression}!getGrammar@{getGrammar}}
\index{getGrammar@{getGrammar}!TExpression@{TExpression}}
\doxysubsubsection{\texorpdfstring{getGrammar()}{getGrammar()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_syntax_1_1_grammar}{TSyntax\+::\+Grammar}} $\ast$ TExpression\+::get\+Grammar (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00084                                                     \{}
\DoxyCodeLine{00085   \textcolor{keywordflow}{return} m\_imp-\/>m\_grammar;}
\DoxyCodeLine{00086 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_expression_a934ff6addb8dc8b16649d9a2723947e7}\label{class_t_expression_a934ff6addb8dc8b16649d9a2723947e7}} 
\index{TExpression@{TExpression}!getOwnerParameter@{getOwnerParameter}}
\index{getOwnerParameter@{getOwnerParameter}!TExpression@{TExpression}}
\doxysubsubsection{\texorpdfstring{getOwnerParameter()}{getOwnerParameter()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$ TExpression\+::get\+Owner\+Parameter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00186 \{ \textcolor{keywordflow}{return} m\_imp-\/>m\_param; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_expression_afc42f807f796a84191ac099de267aed5}\label{class_t_expression_afc42f807f796a84191ac099de267aed5}} 
\index{TExpression@{TExpression}!getText@{getText}}
\index{getText@{getText}!TExpression@{TExpression}}
\doxysubsubsection{\texorpdfstring{getText()}{getText()}}
{\footnotesize\ttfamily std\+::string TExpression\+::get\+Text (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00105 \{ \textcolor{keywordflow}{return} m\_imp-\/>m\_text; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_expression_a0a8274ef12d9231d8c03de4fb29691da}\label{class_t_expression_a0a8274ef12d9231d8c03de4fb29691da}} 
\index{TExpression@{TExpression}!isCycling@{isCycling}}
\index{isCycling@{isCycling}!TExpression@{TExpression}}
\doxysubsubsection{\texorpdfstring{isCycling()}{isCycling()}}
{\footnotesize\ttfamily bool TExpression\+::is\+Cycling (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00190                                   \{}
\DoxyCodeLine{00191   \textcolor{comment}{// TODO: this is a quick\&dirty implementation to be replaced with a more}}
\DoxyCodeLine{00192   \textcolor{comment}{// "{}semantic"{} one}}
\DoxyCodeLine{00193   \textcolor{keywordflow}{return} getText().find(\textcolor{stringliteral}{"{}cycle"{}}) != std::string::npos;}
\DoxyCodeLine{00194 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_expression_a6fd7a9c936957b0d9648718628f87ef2}\label{class_t_expression_a6fd7a9c936957b0d9648718628f87ef2}} 
\index{TExpression@{TExpression}!isValid@{isValid}}
\index{isValid@{isValid}!TExpression@{TExpression}}
\doxysubsubsection{\texorpdfstring{isValid()}{isValid()}}
{\footnotesize\ttfamily bool TExpression\+::is\+Valid (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\begin{DoxyVerb}      Returns whether the expression is valid according to actual
\end{DoxyVerb}
 grammar syntax (i.\+e. it has at least one calculator node). 
\begin{DoxyCode}{0}
\DoxyCodeLine{00120                           \{}
\DoxyCodeLine{00121   \textcolor{keywordflow}{if} (!m\_imp-\/>m\_hasBeenParsed) parse();}
\DoxyCodeLine{00122   \textcolor{keywordflow}{return} m\_imp-\/>m\_isValid;}
\DoxyCodeLine{00123 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_expression_a55956120b83447e0509cf4e332204111}\label{class_t_expression_a55956120b83447e0509cf4e332204111}} 
\index{TExpression@{TExpression}!operator=@{operator=}}
\index{operator=@{operator=}!TExpression@{TExpression}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_expression}{TExpression}} \& TExpression\+::operator= (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_expression}{TExpression}}}]{copy }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00070                                                     \{}
\DoxyCodeLine{00071   std::swap(\mbox{\hyperlink{namespace_t_rop_a229eb7fd85c23c325ea4ba55478d5712}{copy}}.m\_imp, m\_imp);}
\DoxyCodeLine{00072   \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{00073 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_expression_a0ffb229c1e08a4a894bf03cf56464da9}\label{class_t_expression_a0ffb229c1e08a4a894bf03cf56464da9}} 
\index{TExpression@{TExpression}!setGrammar@{setGrammar}}
\index{setGrammar@{setGrammar}!TExpression@{TExpression}}
\doxysubsubsection{\texorpdfstring{setGrammar()}{setGrammar()}}
{\footnotesize\ttfamily void TExpression\+::set\+Grammar (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_syntax_1_1_grammar}{TSyntax\+::\+Grammar}} $\ast$}]{grammar }\end{DoxyParamCaption})}



Sets the expression\textquotesingle{}s grammar -\/ does {\bfseries{not}} acquire ownership. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00077                                                           \{}
\DoxyCodeLine{00078   m\_imp-\/>m\_grammar       = grammar;}
\DoxyCodeLine{00079   m\_imp-\/>m\_hasBeenParsed = \textcolor{keyword}{false};}
\DoxyCodeLine{00080 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00635}{Function\+Expression\+Segment\+Page\+::get\+Gui\+Values()}}, and \mbox{\hyperlink{l01025}{TDouble\+Param\+::load\+Data()}}.

\mbox{\Hypertarget{class_t_expression_a459eace252251402238fe9212cd03bfd}\label{class_t_expression_a459eace252251402238fe9212cd03bfd}} 
\index{TExpression@{TExpression}!setOwnerParameter@{setOwnerParameter}}
\index{setOwnerParameter@{setOwnerParameter}!TExpression@{TExpression}}
\doxysubsubsection{\texorpdfstring{setOwnerParameter()}{setOwnerParameter()}}
{\footnotesize\ttfamily void TExpression\+::set\+Owner\+Parameter (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_double_param}{TDouble\+Param}} $\ast$}]{param }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00178                                                        \{}
\DoxyCodeLine{00179   m\_imp-\/>m\_param = param;}
\DoxyCodeLine{00180 }
\DoxyCodeLine{00181   \textcolor{keywordflow}{if} (m\_imp-\/>m\_calculator) m\_imp-\/>m\_calculator-\/>setOwnerParameter(param);}
\DoxyCodeLine{00182 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_expression_af9aa579c14ed806cb7829137b4e699bc}\label{class_t_expression_af9aa579c14ed806cb7829137b4e699bc}} 
\index{TExpression@{TExpression}!setText@{setText}}
\index{setText@{setText}!TExpression@{TExpression}}
\doxysubsubsection{\texorpdfstring{setText()}{setText()}}
{\footnotesize\ttfamily void TExpression\+::set\+Text (\begin{DoxyParamCaption}\item[{std\+::string}]{text }\end{DoxyParamCaption})}

Sets the expression\textquotesingle{}s text -\/ a mix of mathematical expressions and grammar-\/recognized patterns that is able to calculate the expression\textquotesingle{}s value at a given frame. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00090                                         \{}
\DoxyCodeLine{00091   \textcolor{keywordflow}{if} (m\_imp-\/>m\_text != text || m\_imp-\/>m\_hasReference) \{}
\DoxyCodeLine{00092     m\_imp-\/>m\_text = text;}
\DoxyCodeLine{00093     \textcolor{keyword}{delete} m\_imp-\/>m\_calculator;}
\DoxyCodeLine{00094     m\_imp-\/>m\_calculator    = 0;}
\DoxyCodeLine{00095     m\_imp-\/>m\_isValid       = \textcolor{keyword}{false};}
\DoxyCodeLine{00096     m\_imp-\/>m\_hasReference  = \textcolor{keyword}{false};}
\DoxyCodeLine{00097     m\_imp-\/>m\_hasBeenParsed = \textcolor{keyword}{false};}
\DoxyCodeLine{00098     m\_imp-\/>m\_error         = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00099     m\_imp-\/>m\_errorPos      = std::make\_pair(0, -\/1);}
\DoxyCodeLine{00100   \}}
\DoxyCodeLine{00101 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00635}{Function\+Expression\+Segment\+Page\+::get\+Gui\+Values()}}, \mbox{\hyperlink{l00735}{TDouble\+Param\+::set\+Keyframe()}}, and \mbox{\hyperlink{l00767}{TDouble\+Param\+::set\+Keyframes()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/texpression.\+h\item 
E\+:/opentoonz/toonz/sources/common/expressions/texpression.\+cpp\end{DoxyCompactItemize}
