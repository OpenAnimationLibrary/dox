\hypertarget{class_level_settings_popup}{}\doxysection{Level\+Settings\+Popup Class Reference}
\label{class_level_settings_popup}\index{LevelSettingsPopup@{LevelSettingsPopup}}


The \mbox{\hyperlink{class_level_settings_popup}{Level\+Settings\+Popup}} class provides a dialog to show and change current level settings. Inherits {\bfseries{Dialog}}.  


Inheritance diagram for Level\+Settings\+Popup\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_level_settings_popup}
\end{center}
\end{figure}
\doxysubsection*{Protected Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_level_settings_popup_a399d17827af9240d5e4a9e5b68263d28}{on\+Cast\+Selection\+Changed}} ()
\item 
void \mbox{\hyperlink{class_level_settings_popup_a6ce2f48e81114d82d4fb74c5d3437108}{on\+Selection\+Switched}} (\mbox{\hyperlink{class_t_selection}{TSelection}} $\ast$old\+Selection, \mbox{\hyperlink{class_t_selection}{TSelection}} $\ast$new\+Selection)
\item 
void \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{update\+Level\+Settings}} ()
\item 
void \mbox{\hyperlink{class_level_settings_popup_a339b8779a0ee3c421bcc52920e834e63}{on\+Name\+Changed}} ()
\item 
void \mbox{\hyperlink{class_level_settings_popup_a0303ff71235dde919b722a1d7994e353}{on\+Path\+Changed}} ()
\item 
void \mbox{\hyperlink{class_level_settings_popup_abb1f65b8956585adf2fcc1f9e7f45094}{on\+Scan\+Path\+Changed}} ()
\item 
void \mbox{\hyperlink{class_level_settings_popup_af5b5b4b588afb70b0cc765318c141947}{on\+Dpi\+Type\+Changed}} (int)
\item 
void \mbox{\hyperlink{class_level_settings_popup_ab58f7a56df293673db44cbf0fba21d3d}{on\+Dpi\+Field\+Changed}} ()
\item 
void \mbox{\hyperlink{class_level_settings_popup_a931e305c74f3b8d3980d89f795ccaf71}{on\+Width\+Field\+Changed}} ()
\item 
void \mbox{\hyperlink{class_level_settings_popup_a44b958e3302d9f12716f212e0b5d7c97}{on\+Height\+Field\+Changed}} ()
\item 
void \mbox{\hyperlink{class_level_settings_popup_adfebb42d4c76c51fda39f6301f8450a4}{on\+Square\+Pixel\+Changed}} (int)
\item 
void \mbox{\hyperlink{class_level_settings_popup_a65f135312bebdf034a3d7c6fb9025759}{use\+Camera\+Dpi}} ()
\item 
void \mbox{\hyperlink{class_level_settings_popup_a54ad59d90ce364844bbf9fd44cbd25bf}{on\+Subsampling\+Changed}} ()
\item 
void \mbox{\hyperlink{class_level_settings_popup_a5b92cb7a387063f3b2b64860fe3a7311}{on\+Do\+Premultiply\+Clicked}} ()
\item 
void \mbox{\hyperlink{class_level_settings_popup_ab5267251f07e2d6cc6671f44aa7a1412}{on\+Do\+Antialias\+Clicked}} ()
\item 
void \mbox{\hyperlink{class_level_settings_popup_a178a4abc8dfa8a60626016e43d1895d8}{on\+Antialias\+Softness\+Changed}} ()
\item 
void \mbox{\hyperlink{class_level_settings_popup_ab53a1eb5baef4510031d9a9a2ee56ac1}{on\+White\+Transp\+Clicked}} ()
\item 
void \mbox{\hyperlink{class_level_settings_popup_ad870e9326097fa40a9c035050198609e}{on\+Scene\+Changed}} ()
\item 
void \mbox{\hyperlink{class_level_settings_popup_abc663a604fb9dc5efc0e400ee1f3a877}{on\+Preference\+Changed}} (const QString \&)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_level_settings_popup_a74c137d17071e5c57c01080ae35c2df1}{show\+Event}} (QShow\+Event $\ast$e) override
\item 
void \mbox{\hyperlink{class_level_settings_popup_af547b692ab7b74c181354c74e0a8479d}{hide\+Event}} (QHide\+Event $\ast$e) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{class_level_settings_popup}{Level\+Settings\+Popup}} class provides a dialog to show and change current level settings. Inherits {\bfseries{Dialog}}. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_level_settings_popup_adfd67460837e64fcbf0b228fc20c933f}\label{class_level_settings_popup_adfd67460837e64fcbf0b228fc20c933f}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!LevelSettingsPopup@{LevelSettingsPopup}}
\index{LevelSettingsPopup@{LevelSettingsPopup}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{LevelSettingsPopup()}{LevelSettingsPopup()}}
{\footnotesize\ttfamily Level\+Settings\+Popup\+::\+Level\+Settings\+Popup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00320     : \mbox{\hyperlink{class_d_v_gui_1_1_dialog}{Dialog}}(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getMainWindow(), \textcolor{keyword}{false}, \textcolor{keyword}{false}, \textcolor{stringliteral}{"{}LevelSettings"{}})}
\DoxyCodeLine{00321     , m\_whiteTransp(0)}
\DoxyCodeLine{00322     , m\_scanPathFld(0) \{}
\DoxyCodeLine{00323   setWindowTitle(tr(\textcolor{stringliteral}{"{}Level Settings"{}}));}
\DoxyCodeLine{00324 }
\DoxyCodeLine{00325   m\_nameFld             = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_line_edit}{LineEdit}}();}
\DoxyCodeLine{00326   m\_pathFld             = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_file_field}{FileField}}();  \textcolor{comment}{// Path}}
\DoxyCodeLine{00327   m\_scanPathFld         = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_file_field}{FileField}}();  \textcolor{comment}{// ScanPath}}
\DoxyCodeLine{00328   QLabel *scanPathLabel = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Scan Path:"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00329   m\_typeLabel           = \textcolor{keyword}{new} QLabel();  \textcolor{comment}{// Level Type}}
\DoxyCodeLine{00330   \textcolor{comment}{// Type}}
\DoxyCodeLine{00331   m\_dpiTypeOm = \textcolor{keyword}{new} QComboBox();}
\DoxyCodeLine{00332   \textcolor{comment}{// DPI}}
\DoxyCodeLine{00333   QLabel *dpiLabel = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}DPI:"{}}));}
\DoxyCodeLine{00334   m\_dpiFld         = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit}{DoubleLineEdit}}();}
\DoxyCodeLine{00335   m\_squarePixCB    = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_check_box}{CheckBox}}(tr(\textcolor{stringliteral}{"{}Forced Squared Pixel"{}}));}
\DoxyCodeLine{00336 }
\DoxyCodeLine{00337   QLabel *widthLabel  = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Width:"{}}));}
\DoxyCodeLine{00338   m\_widthFld          = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_measured_double_line_edit}{MeasuredDoubleLineEdit}}();}
\DoxyCodeLine{00339   QLabel *heightLabel = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Height:"{}}));}
\DoxyCodeLine{00340   m\_heightFld         = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_measured_double_line_edit}{MeasuredDoubleLineEdit}}();}
\DoxyCodeLine{00341   \textcolor{comment}{// Use Camera Dpi}}
\DoxyCodeLine{00342   m\_useCameraDpiBtn = \textcolor{keyword}{new} QPushButton(tr(\textcolor{stringliteral}{"{}Use Camera DPI"{}}));}
\DoxyCodeLine{00343 }
\DoxyCodeLine{00344   m\_cameraDpiLabel       = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00345   m\_imageDpiLabel        = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00346   m\_imageResLabel        = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00347   QLabel *cameraDpiTitle = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Camera DPI:"{}}));}
\DoxyCodeLine{00348   QLabel *imageDpiTitle  = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Image DPI:"{}}));}
\DoxyCodeLine{00349   QLabel *imageResTitle  = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Resolution:"{}}));}
\DoxyCodeLine{00350 }
\DoxyCodeLine{00351   \textcolor{comment}{// subsampling}}
\DoxyCodeLine{00352   m\_subsamplingLabel = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Subsampling:"{}}));}
\DoxyCodeLine{00353   m\_subsamplingFld   = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit}{DVGui::IntLineEdit}}(\textcolor{keyword}{this}, 1, 1);}
\DoxyCodeLine{00354 }
\DoxyCodeLine{00355   m\_doPremultiply = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_check_box}{CheckBox}}(tr(\textcolor{stringliteral}{"{}Premultiply"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00356 }
\DoxyCodeLine{00357   m\_whiteTransp = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_check_box}{CheckBox}}(tr(\textcolor{stringliteral}{"{}White As Transparent"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00358 }
\DoxyCodeLine{00359   m\_doAntialias       = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_check_box}{CheckBox}}(tr(\textcolor{stringliteral}{"{}Add Antialiasing"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00360   m\_softnessLabel     = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Antialias Softness:"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00361   m\_antialiasSoftness = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit}{DVGui::IntLineEdit}}(0, 10, 0, 100);}
\DoxyCodeLine{00362 }
\DoxyCodeLine{00363   \textcolor{comment}{//-\/-\/-\/-\/}}
\DoxyCodeLine{00364 }
\DoxyCodeLine{00365   m\_pathFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_file_field_aa7a756fa242d0b6dbcf80994ee59c79e}{setFileMode}}(QFileDialog::AnyFile);}
\DoxyCodeLine{00366   m\_scanPathFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_file_field_aa7a756fa242d0b6dbcf80994ee59c79e}{setFileMode}}(QFileDialog::AnyFile);}
\DoxyCodeLine{00367 }
\DoxyCodeLine{00368   m\_dpiTypeOm-\/>addItem(tr(\textcolor{stringliteral}{"{}Image DPI"{}}), \textcolor{stringliteral}{"{}Image DPI"{}});}
\DoxyCodeLine{00369   m\_dpiTypeOm-\/>addItem(tr(\textcolor{stringliteral}{"{}Custom DPI"{}}), \textcolor{stringliteral}{"{}Custom DPI"{}});}
\DoxyCodeLine{00370 }
\DoxyCodeLine{00371   m\_squarePixCB-\/>setCheckState(Qt::Checked);}
\DoxyCodeLine{00372 }
\DoxyCodeLine{00373   m\_widthFld-\/>setMeasure(\textcolor{stringliteral}{"{}camera.lx"{}});}
\DoxyCodeLine{00374   m\_heightFld-\/>setMeasure(\textcolor{stringliteral}{"{}camera.ly"{}});}
\DoxyCodeLine{00375 }
\DoxyCodeLine{00376   \textcolor{keywordflow}{if} (Preferences::instance()-\/>getCameraUnits() == \textcolor{stringliteral}{"{}pixel"{}}) \{}
\DoxyCodeLine{00377     m\_widthFld-\/>setDecimals(0);}
\DoxyCodeLine{00378     m\_heightFld-\/>setDecimals(0);}
\DoxyCodeLine{00379   \}}
\DoxyCodeLine{00380 }
\DoxyCodeLine{00381   m\_doPremultiply-\/>setTristate();}
\DoxyCodeLine{00382   m\_doPremultiply-\/>setCheckState(Qt::Unchecked);}
\DoxyCodeLine{00383 }
\DoxyCodeLine{00384   m\_doAntialias-\/>setTristate();}
\DoxyCodeLine{00385   m\_doAntialias-\/>setCheckState(Qt::Unchecked);}
\DoxyCodeLine{00386   m\_antialiasSoftness-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{00387 }
\DoxyCodeLine{00388   m\_whiteTransp-\/>setTristate();}
\DoxyCodeLine{00389   m\_whiteTransp-\/>setCheckState(Qt::Unchecked);}
\DoxyCodeLine{00390 }
\DoxyCodeLine{00391   \textcolor{comment}{// register activation flags}}
\DoxyCodeLine{00392   m\_activateFlags[m\_nameFld]     = AllTypes;}
\DoxyCodeLine{00393   m\_activateFlags[m\_pathFld]     = SimpleLevel | Palette | Sound;}
\DoxyCodeLine{00394   m\_activateFlags[m\_scanPathFld] = ToonzRaster;}
\DoxyCodeLine{00395   m\_activateFlags[scanPathLabel] = ToonzRaster | MultiSelection;}
\DoxyCodeLine{00396   \textcolor{comment}{// m\_activateFlags[m\_typeLabel]   = AllTypes | MultiSelection;}}
\DoxyCodeLine{00397 }
\DoxyCodeLine{00398   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} dpiWidgetsFlag  = HasDPILevel | HideOnPixelMode | MultiSelection;}
\DoxyCodeLine{00399   m\_activateFlags[m\_dpiTypeOm] = dpiWidgetsFlag;}
\DoxyCodeLine{00400   m\_activateFlags[dpiLabel]    = dpiWidgetsFlag;}
\DoxyCodeLine{00401   m\_activateFlags[m\_dpiFld]    = dpiWidgetsFlag;}
\DoxyCodeLine{00402   m\_activateFlags[m\_squarePixCB] = dpiWidgetsFlag;}
\DoxyCodeLine{00403 }
\DoxyCodeLine{00404   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} rasterWidgetsFlag     = ToonzRaster | Raster | MultiSelection;}
\DoxyCodeLine{00405   m\_activateFlags[widthLabel]        = rasterWidgetsFlag;}
\DoxyCodeLine{00406   m\_activateFlags[m\_widthFld]        = rasterWidgetsFlag;}
\DoxyCodeLine{00407   m\_activateFlags[heightLabel]       = rasterWidgetsFlag;}
\DoxyCodeLine{00408   m\_activateFlags[m\_heightFld]       = rasterWidgetsFlag;}
\DoxyCodeLine{00409   m\_activateFlags[m\_useCameraDpiBtn] = dpiWidgetsFlag;}
\DoxyCodeLine{00410   m\_activateFlags[m\_cameraDpiLabel] =}
\DoxyCodeLine{00411       AllTypes | HideOnPixelMode | MultiSelection;}
\DoxyCodeLine{00412   m\_activateFlags[m\_imageDpiLabel] = dpiWidgetsFlag;}
\DoxyCodeLine{00413   m\_activateFlags[m\_imageResLabel] = dpiWidgetsFlag;}
\DoxyCodeLine{00414   m\_activateFlags[cameraDpiTitle] = AllTypes | HideOnPixelMode | MultiSelection;}
\DoxyCodeLine{00415   m\_activateFlags[imageDpiTitle]  = dpiWidgetsFlag;}
\DoxyCodeLine{00416   m\_activateFlags[imageResTitle]  = dpiWidgetsFlag;}
\DoxyCodeLine{00417 }
\DoxyCodeLine{00418   m\_activateFlags[m\_doPremultiply]     = Raster | MultiSelection;}
\DoxyCodeLine{00419   m\_activateFlags[m\_whiteTransp]       = Raster | MultiSelection;}
\DoxyCodeLine{00420   m\_activateFlags[m\_doAntialias]       = rasterWidgetsFlag;}
\DoxyCodeLine{00421   m\_activateFlags[m\_softnessLabel]     = rasterWidgetsFlag;}
\DoxyCodeLine{00422   m\_activateFlags[m\_antialiasSoftness] = rasterWidgetsFlag;}
\DoxyCodeLine{00423   m\_activateFlags[m\_subsamplingLabel]  = rasterWidgetsFlag;}
\DoxyCodeLine{00424   m\_activateFlags[m\_subsamplingFld]    = rasterWidgetsFlag;}
\DoxyCodeLine{00425 }
\DoxyCodeLine{00426   \textcolor{comment}{//-\/-\/-\/-\/layout}}
\DoxyCodeLine{00427   m\_topLayout-\/>setMargin(5);}
\DoxyCodeLine{00428   m\_topLayout-\/>setSpacing(5);}
\DoxyCodeLine{00429   \{}
\DoxyCodeLine{00430     \textcolor{comment}{//-\/-\/Name\&Path}}
\DoxyCodeLine{00431     QGroupBox *nameBox      = \textcolor{keyword}{new} QGroupBox(tr(\textcolor{stringliteral}{"{}Name \&\& Path"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00432     QGridLayout *nameLayout = \textcolor{keyword}{new} QGridLayout();}
\DoxyCodeLine{00433     nameLayout-\/>setMargin(5);}
\DoxyCodeLine{00434     nameLayout-\/>setSpacing(5);}
\DoxyCodeLine{00435     \{}
\DoxyCodeLine{00436       nameLayout-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Name:"{}}), \textcolor{keyword}{this}), 0, 0,}
\DoxyCodeLine{00437                             Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00438       nameLayout-\/>addWidget(m\_nameFld, 0, 1);}
\DoxyCodeLine{00439       nameLayout-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Path:"{}}), \textcolor{keyword}{this}), 1, 0,}
\DoxyCodeLine{00440                             Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00441       nameLayout-\/>addWidget(m\_pathFld, 1, 1);}
\DoxyCodeLine{00442       nameLayout-\/>addWidget(scanPathLabel, 2, 0,}
\DoxyCodeLine{00443                             Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00444       nameLayout-\/>addWidget(m\_scanPathFld, 2, 1);}
\DoxyCodeLine{00445       nameLayout-\/>addWidget(m\_typeLabel, 3, 1);}
\DoxyCodeLine{00446     \}}
\DoxyCodeLine{00447     nameLayout-\/>setColumnStretch(0, 0);}
\DoxyCodeLine{00448     nameLayout-\/>setColumnStretch(1, 1);}
\DoxyCodeLine{00449     nameBox-\/>setLayout(nameLayout);}
\DoxyCodeLine{00450 }
\DoxyCodeLine{00451     m\_topLayout-\/>addWidget(nameBox);}
\DoxyCodeLine{00452 }
\DoxyCodeLine{00453     \textcolor{comment}{//-\/-\/-\/-\/DPI \& Resolution}}
\DoxyCodeLine{00454     QGroupBox *dpiBox;}
\DoxyCodeLine{00455     \textcolor{keywordflow}{if} (Preferences::instance()-\/>getUnits() == \textcolor{stringliteral}{"{}pixel"{}})}
\DoxyCodeLine{00456       dpiBox = \textcolor{keyword}{new} QGroupBox(tr(\textcolor{stringliteral}{"{}Resolution"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00457     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00458       dpiBox = \textcolor{keyword}{new} QGroupBox(tr(\textcolor{stringliteral}{"{}DPI \&\& Resolution"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00459     QGridLayout *dpiLayout = \textcolor{keyword}{new} QGridLayout();}
\DoxyCodeLine{00460     dpiLayout-\/>setMargin(5);}
\DoxyCodeLine{00461     dpiLayout-\/>setSpacing(5);}
\DoxyCodeLine{00462     \{}
\DoxyCodeLine{00463       dpiLayout-\/>addWidget(m\_dpiTypeOm, 0, 1, 1, 3);}
\DoxyCodeLine{00464       dpiLayout-\/>addWidget(dpiLabel, 1, 0, Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00465       dpiLayout-\/>addWidget(m\_dpiFld, 1, 1);}
\DoxyCodeLine{00466       dpiLayout-\/>addWidget(m\_squarePixCB, 1, 2, 1, 2,}
\DoxyCodeLine{00467                            Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00468       dpiLayout-\/>addWidget(widthLabel, 2, 0, Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00469       dpiLayout-\/>addWidget(m\_widthFld, 2, 1);}
\DoxyCodeLine{00470       dpiLayout-\/>addWidget(heightLabel, 2, 2,}
\DoxyCodeLine{00471                            Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00472       dpiLayout-\/>addWidget(m\_heightFld, 2, 3);}
\DoxyCodeLine{00473       dpiLayout-\/>addWidget(m\_useCameraDpiBtn, 3, 1, 1, 3);}
\DoxyCodeLine{00474       dpiLayout-\/>addWidget(cameraDpiTitle, 4, 0,}
\DoxyCodeLine{00475                            Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00476       dpiLayout-\/>addWidget(m\_cameraDpiLabel, 4, 1, 1, 3);}
\DoxyCodeLine{00477       dpiLayout-\/>addWidget(imageDpiTitle, 5, 0,}
\DoxyCodeLine{00478                            Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00479       dpiLayout-\/>addWidget(m\_imageDpiLabel, 5, 1, 1, 3);}
\DoxyCodeLine{00480       dpiLayout-\/>addWidget(imageResTitle, 6, 0,}
\DoxyCodeLine{00481                            Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00482       dpiLayout-\/>addWidget(m\_imageResLabel, 6, 1, 1, 3);}
\DoxyCodeLine{00483     \}}
\DoxyCodeLine{00484     dpiLayout-\/>setColumnStretch(0, 0);}
\DoxyCodeLine{00485     dpiLayout-\/>setColumnStretch(1, 1);}
\DoxyCodeLine{00486     dpiLayout-\/>setColumnStretch(2, 0);}
\DoxyCodeLine{00487     dpiLayout-\/>setColumnStretch(3, 1);}
\DoxyCodeLine{00488     dpiBox-\/>setLayout(dpiLayout);}
\DoxyCodeLine{00489 }
\DoxyCodeLine{00490     m\_topLayout-\/>addWidget(dpiBox);}
\DoxyCodeLine{00491 }
\DoxyCodeLine{00492     m\_topLayout-\/>addWidget(m\_doPremultiply);}
\DoxyCodeLine{00493 }
\DoxyCodeLine{00494     m\_topLayout-\/>addWidget(m\_whiteTransp);}
\DoxyCodeLine{00495 }
\DoxyCodeLine{00496     m\_topLayout-\/>addWidget(m\_doAntialias);}
\DoxyCodeLine{00497 }
\DoxyCodeLine{00498     \textcolor{comment}{//-\/-\/-\/subsampling}}
\DoxyCodeLine{00499     QGridLayout *bottomLay = \textcolor{keyword}{new} QGridLayout();}
\DoxyCodeLine{00500     bottomLay-\/>setMargin(3);}
\DoxyCodeLine{00501     bottomLay-\/>setSpacing(3);}
\DoxyCodeLine{00502     \{}
\DoxyCodeLine{00503       bottomLay-\/>addWidget(m\_softnessLabel, 0, 0);}
\DoxyCodeLine{00504       bottomLay-\/>addWidget(m\_antialiasSoftness, 0, 1);}
\DoxyCodeLine{00505 }
\DoxyCodeLine{00506       bottomLay-\/>addWidget(m\_subsamplingLabel, 1, 0);}
\DoxyCodeLine{00507       bottomLay-\/>addWidget(m\_subsamplingFld, 1, 1);}
\DoxyCodeLine{00508     \}}
\DoxyCodeLine{00509     bottomLay-\/>setColumnStretch(0, 0);}
\DoxyCodeLine{00510     bottomLay-\/>setColumnStretch(1, 0);}
\DoxyCodeLine{00511     bottomLay-\/>setColumnStretch(2, 1);}
\DoxyCodeLine{00512     m\_topLayout-\/>addLayout(bottomLay);}
\DoxyCodeLine{00513 }
\DoxyCodeLine{00514     m\_topLayout-\/>addStretch();}
\DoxyCodeLine{00515   \}}
\DoxyCodeLine{00516 }
\DoxyCodeLine{00517   \textcolor{comment}{//-\/-\/-\/-\/signal/slot connections}}
\DoxyCodeLine{00518   connect(m\_nameFld, SIGNAL(editingFinished()), SLOT(onNameChanged()));}
\DoxyCodeLine{00519   connect(m\_pathFld, SIGNAL(pathChanged()), SLOT(onPathChanged()));}
\DoxyCodeLine{00520   connect(m\_dpiTypeOm, SIGNAL(activated(\textcolor{keywordtype}{int})), SLOT(onDpiTypeChanged(\textcolor{keywordtype}{int})));}
\DoxyCodeLine{00521   connect(m\_dpiFld, SIGNAL(editingFinished()), SLOT(onDpiFieldChanged()));}
\DoxyCodeLine{00522   connect(m\_squarePixCB, SIGNAL(stateChanged(\textcolor{keywordtype}{int})),}
\DoxyCodeLine{00523           SLOT(onSquarePixelChanged(\textcolor{keywordtype}{int})));}
\DoxyCodeLine{00524   connect(m\_widthFld, SIGNAL(valueChanged()), SLOT(onWidthFieldChanged()));}
\DoxyCodeLine{00525   connect(m\_heightFld, SIGNAL(valueChanged()), SLOT(onHeightFieldChanged()));}
\DoxyCodeLine{00526   connect(m\_useCameraDpiBtn, SIGNAL(clicked()), SLOT(useCameraDpi()));}
\DoxyCodeLine{00527   connect(m\_subsamplingFld, SIGNAL(editingFinished()),}
\DoxyCodeLine{00528           SLOT(onSubsamplingChanged()));}
\DoxyCodeLine{00529 }
\DoxyCodeLine{00530   \textcolor{comment}{/*-\/-\/-\/ ScanPathの入力に対応 -\/-\/-\/*/}}
\DoxyCodeLine{00531   connect(m\_scanPathFld, SIGNAL(pathChanged()), SLOT(onScanPathChanged()));}
\DoxyCodeLine{00532   connect(m\_doPremultiply, SIGNAL(clicked(\textcolor{keywordtype}{bool})),}
\DoxyCodeLine{00533           SLOT(onDoPremultiplyClicked()));}
\DoxyCodeLine{00534   connect(m\_doAntialias, SIGNAL(clicked(\textcolor{keywordtype}{bool})), SLOT(onDoAntialiasClicked()));}
\DoxyCodeLine{00535   connect(m\_antialiasSoftness, SIGNAL(editingFinished()),}
\DoxyCodeLine{00536           SLOT(onAntialiasSoftnessChanged()));}
\DoxyCodeLine{00537 }
\DoxyCodeLine{00538   connect(m\_whiteTransp, SIGNAL(clicked(\textcolor{keywordtype}{bool})), SLOT(onWhiteTranspClicked()));}
\DoxyCodeLine{00539 }
\DoxyCodeLine{00540   \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{00541 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_level_settings_popup_af547b692ab7b74c181354c74e0a8479d}\label{class_level_settings_popup_af547b692ab7b74c181354c74e0a8479d}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!hideEvent@{hideEvent}}
\index{hideEvent@{hideEvent}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{hideEvent()}{hideEvent()}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::hide\+Event (\begin{DoxyParamCaption}\item[{QHide\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00574                                                 \{}
\DoxyCodeLine{00575   \textcolor{keywordtype}{bool} ret =}
\DoxyCodeLine{00576       disconnect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentSelection(),}
\DoxyCodeLine{00577                  SIGNAL(selectionSwitched(\mbox{\hyperlink{class_t_selection}{TSelection}} *, \mbox{\hyperlink{class_t_selection}{TSelection}} *)), \textcolor{keyword}{this},}
\DoxyCodeLine{00578                  SLOT(onSelectionSwitched(\mbox{\hyperlink{class_t_selection}{TSelection}} *, \mbox{\hyperlink{class_t_selection}{TSelection}} *)));}
\DoxyCodeLine{00579   ret = ret \&\& disconnect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentSelection(),}
\DoxyCodeLine{00580                           SIGNAL(selectionChanged(\mbox{\hyperlink{class_t_selection}{TSelection}} *)), \textcolor{keyword}{this},}
\DoxyCodeLine{00581                           SLOT(\mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}()));}
\DoxyCodeLine{00582 }
\DoxyCodeLine{00583   \mbox{\hyperlink{class_cast_selection}{CastSelection}} *castSelection = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_cast_selection}{CastSelection}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{00584       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>getSelection());}
\DoxyCodeLine{00585   \textcolor{keywordflow}{if} (castSelection)}
\DoxyCodeLine{00586     ret = ret \&\& disconnect(castSelection, SIGNAL(itemSelectionChanged()), \textcolor{keyword}{this},}
\DoxyCodeLine{00587                             SLOT(onCastSelectionChanged()));}
\DoxyCodeLine{00588 }
\DoxyCodeLine{00589   ret = ret \&\& disconnect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentScene(),}
\DoxyCodeLine{00590                           SIGNAL(sceneChanged()), \textcolor{keyword}{this}, SLOT(onSceneChanged()));}
\DoxyCodeLine{00591   ret = ret \&\& disconnect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentScene(),}
\DoxyCodeLine{00592                           SIGNAL(preferenceChanged(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00593                           SLOT(onPreferenceChanged(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00594 }
\DoxyCodeLine{00595   assert(ret);}
\DoxyCodeLine{00596   Dialog::hideEvent(e);}
\DoxyCodeLine{00597 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_a178a4abc8dfa8a60626016e43d1895d8}\label{class_level_settings_popup_a178a4abc8dfa8a60626016e43d1895d8}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!onAntialiasSoftnessChanged@{onAntialiasSoftnessChanged}}
\index{onAntialiasSoftnessChanged@{onAntialiasSoftnessChanged}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{onAntialiasSoftnessChanged}{onAntialiasSoftnessChanged}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::on\+Antialias\+Softness\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01499                                                     \{}
\DoxyCodeLine{01500   \textcolor{keywordtype}{int} softness = m\_antialiasSoftness-\/>\mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit_a77019c5d6bce534fdd1931136a6efe95}{getValue}}();}
\DoxyCodeLine{01501   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01502   QSetIterator<TXshLevelP> levelItr(m\_selectedLevels);}
\DoxyCodeLine{01503   \textcolor{keywordflow}{while} (levelItr.hasNext()) \{}
\DoxyCodeLine{01504     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} levelP   = levelItr.next();}
\DoxyCodeLine{01505     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = levelP-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01506     \textcolor{keywordflow}{if} (!sl) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01507     \textcolor{keywordtype}{int} oldSoftness = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_add0d772c11ca0f9a54d5af095f3bdda4}{antialiasSoftness}}();}
\DoxyCodeLine{01508     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_ab7664c9c7142c2b4f1d998ff625e644f}{setDoAntialias}}(softness);}
\DoxyCodeLine{01509     TUndoManager::manager()-\/>add(}
\DoxyCodeLine{01510         \textcolor{keyword}{new} LevelSettingsUndo(levelP.getPointer(), LevelSettingsUndo::Softness,}
\DoxyCodeLine{01511                               oldSoftness, softness));}
\DoxyCodeLine{01512   \}}
\DoxyCodeLine{01513   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01514   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>notifyLevelChange();}
\DoxyCodeLine{01515 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_a399d17827af9240d5e4a9e5b68263d28}\label{class_level_settings_popup_a399d17827af9240d5e4a9e5b68263d28}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!onCastSelectionChanged@{onCastSelectionChanged}}
\index{onCastSelectionChanged@{onCastSelectionChanged}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{onCastSelectionChanged}{onCastSelectionChanged}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::on\+Cast\+Selection\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00621 \{ \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_ab5267251f07e2d6cc6671f44aa7a1412}\label{class_level_settings_popup_ab5267251f07e2d6cc6671f44aa7a1412}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!onDoAntialiasClicked@{onDoAntialiasClicked}}
\index{onDoAntialiasClicked@{onDoAntialiasClicked}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{onDoAntialiasClicked}{onDoAntialiasClicked}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::on\+Do\+Antialias\+Clicked (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01519                                               \{}
\DoxyCodeLine{01520   Qt::CheckState state = m\_doAntialias-\/>checkState();}
\DoxyCodeLine{01521   \textcolor{keywordtype}{bool} on      = (state == Qt::Checked || state == Qt::PartiallyChecked);}
\DoxyCodeLine{01522   \textcolor{keywordtype}{int} softness = on ? m\_antialiasSoftness-\/>\mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit_a77019c5d6bce534fdd1931136a6efe95}{getValue}}() : 0;}
\DoxyCodeLine{01523 }
\DoxyCodeLine{01524   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01525   QSetIterator<TXshLevelP> levelItr(m\_selectedLevels);}
\DoxyCodeLine{01526   \textcolor{keywordflow}{while} (levelItr.hasNext()) \{}
\DoxyCodeLine{01527     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} levelP   = levelItr.next();}
\DoxyCodeLine{01528     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = levelP-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01529     \textcolor{keywordflow}{if} (!sl || sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == PLI\_XSHLEVEL) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01530 }
\DoxyCodeLine{01531     \textcolor{keywordtype}{int} oldSoftness = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_add0d772c11ca0f9a54d5af095f3bdda4}{antialiasSoftness}}();}
\DoxyCodeLine{01532     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_ab7664c9c7142c2b4f1d998ff625e644f}{setDoAntialias}}(softness);}
\DoxyCodeLine{01533     TUndoManager::manager()-\/>add(}
\DoxyCodeLine{01534         \textcolor{keyword}{new} LevelSettingsUndo(levelP.getPointer(), LevelSettingsUndo::Softness,}
\DoxyCodeLine{01535                               oldSoftness, softness));}
\DoxyCodeLine{01536   \}}
\DoxyCodeLine{01537   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01538   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>notifyLevelChange();}
\DoxyCodeLine{01539   \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{01540   \textcolor{keywordflow}{if} (on) \{}
\DoxyCodeLine{01541     m\_doAntialias-\/>setCheckState(Qt::Checked);}
\DoxyCodeLine{01542     m\_antialiasSoftness-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{01543   \}}
\DoxyCodeLine{01544 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_a5b92cb7a387063f3b2b64860fe3a7311}\label{class_level_settings_popup_a5b92cb7a387063f3b2b64860fe3a7311}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!onDoPremultiplyClicked@{onDoPremultiplyClicked}}
\index{onDoPremultiplyClicked@{onDoPremultiplyClicked}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{onDoPremultiplyClicked}{onDoPremultiplyClicked}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::on\+Do\+Premultiply\+Clicked (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01471                                                 \{}
\DoxyCodeLine{01472   Qt::CheckState state = m\_doPremultiply-\/>checkState();}
\DoxyCodeLine{01473   \textcolor{keywordtype}{bool} on = (state == Qt::Checked || state == Qt::PartiallyChecked);}
\DoxyCodeLine{01474 }
\DoxyCodeLine{01475   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01476   QSetIterator<TXshLevelP> levelItr(m\_selectedLevels);}
\DoxyCodeLine{01477   \textcolor{keywordflow}{while} (levelItr.hasNext()) \{}
\DoxyCodeLine{01478     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} levelP   = levelItr.next();}
\DoxyCodeLine{01479     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = levelP-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01480     \textcolor{keywordflow}{if} (!sl || sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == PLI\_XSHLEVEL) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01481     \mbox{\hyperlink{class_level_properties}{LevelProperties}} *prop = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}();}
\DoxyCodeLine{01482     \textcolor{keywordflow}{if} (on == prop-\/>\mbox{\hyperlink{class_level_properties_a5a253da40e456de66dca76526f2e9453}{doPremultiply}}()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01483     \textcolor{keywordflow}{if} (on \&\& prop-\/>whiteTransp()) \{}
\DoxyCodeLine{01484       prop-\/>\mbox{\hyperlink{class_level_properties_a6ef560f5193695f8c317be16239f3eaa}{setWhiteTransp}}(\textcolor{keyword}{false});}
\DoxyCodeLine{01485       TUndoManager::manager()-\/>add(\textcolor{keyword}{new} LevelSettingsUndo(}
\DoxyCodeLine{01486           levelP.getPointer(), LevelSettingsUndo::WhiteTransp, \textcolor{keyword}{true}, \textcolor{keyword}{false}));}
\DoxyCodeLine{01487     \}}
\DoxyCodeLine{01488     prop-\/>\mbox{\hyperlink{class_level_properties_a0d8e31bd8a357d200ceb11d4d319c8b2}{setDoPremultiply}}(on);}
\DoxyCodeLine{01489     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} LevelSettingsUndo(}
\DoxyCodeLine{01490         levelP.getPointer(), LevelSettingsUndo::DoPremulti, !on, on));}
\DoxyCodeLine{01491   \}}
\DoxyCodeLine{01492   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01493   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>notifyLevelChange();}
\DoxyCodeLine{01494   \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{01495 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_ab58f7a56df293673db44cbf0fba21d3d}\label{class_level_settings_popup_ab58f7a56df293673db44cbf0fba21d3d}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!onDpiFieldChanged@{onDpiFieldChanged}}
\index{onDpiFieldChanged@{onDpiFieldChanged}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{onDpiFieldChanged}{onDpiFieldChanged}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::on\+Dpi\+Field\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01237                                            \{}
\DoxyCodeLine{01238   QString w     = m\_dpiFld-\/>text();}
\DoxyCodeLine{01239   std::string s = w.toStdString();}
\DoxyCodeLine{01240   \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi;}
\DoxyCodeLine{01241 }
\DoxyCodeLine{01242   \textcolor{keywordtype}{int} i = 0, len = s.length();}
\DoxyCodeLine{01243   \textcolor{keywordflow}{while} (i < len \&\& s[i] == \textcolor{charliteral}{' '}) i++;}
\DoxyCodeLine{01244   \textcolor{keywordtype}{int} j = i;}
\DoxyCodeLine{01245   \textcolor{keywordflow}{while} (j < len \&\& \textcolor{charliteral}{'0'} <= s[j] \&\& s[j] <= \textcolor{charliteral}{'9'}) j++;}
\DoxyCodeLine{01246   \textcolor{keywordflow}{if} (j < len \&\& s[j] == \textcolor{charliteral}{'.'}) \{}
\DoxyCodeLine{01247     j++;}
\DoxyCodeLine{01248     \textcolor{keywordflow}{while} (j < len \&\& \textcolor{charliteral}{'0'} <= s[j] \&\& s[j] <= \textcolor{charliteral}{'9'}) j++;}
\DoxyCodeLine{01249   \}}
\DoxyCodeLine{01250   \textcolor{keywordflow}{if} (i < j) \{}
\DoxyCodeLine{01251     dpi.x = std::stod(s.substr(i, j -\/ i));}
\DoxyCodeLine{01252     i     = j;}
\DoxyCodeLine{01253     \textcolor{keywordflow}{while} (i < len \&\& s[i] == \textcolor{charliteral}{' '}) i++;}
\DoxyCodeLine{01254     \textcolor{keywordflow}{if} (i < len \&\& s[i] == \textcolor{charliteral}{','}) \{}
\DoxyCodeLine{01255       i++;}
\DoxyCodeLine{01256       \textcolor{keywordflow}{while} (i < len \&\& s[i] == \textcolor{charliteral}{' '}) i++;}
\DoxyCodeLine{01257       dpi.y = std::stod(s.substr(i));}
\DoxyCodeLine{01258     \}}
\DoxyCodeLine{01259   \}}
\DoxyCodeLine{01260   \textcolor{keywordflow}{if} (dpi.x <= 0.0) \{}
\DoxyCodeLine{01261     \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{01262     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01263   \}}
\DoxyCodeLine{01264   \textcolor{keywordflow}{if} (dpi.y == 0.0) dpi.y = dpi.x;}
\DoxyCodeLine{01265 }
\DoxyCodeLine{01266   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01267   QSetIterator<TXshLevelP> levelItr(m\_selectedLevels);}
\DoxyCodeLine{01268   \textcolor{keywordflow}{while} (levelItr.hasNext()) \{}
\DoxyCodeLine{01269     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} levelP   = levelItr.next();}
\DoxyCodeLine{01270     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshSimpleLevelP}} sl = levelP-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01271     \textcolor{keywordflow}{if} (!sl || sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == PLI\_XSHLEVEL) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01272     \mbox{\hyperlink{class_t_point_t}{TPointD}} oldDpi = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a744228a911310bc962ce76315c9ab2b1}{getDpi}}();}
\DoxyCodeLine{01273     \textcolor{keywordflow}{if} (oldDpi == dpi) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01274 }
\DoxyCodeLine{01275     \mbox{\hyperlink{class_level_properties_a39428db69e55fec37017a264312b61d2}{LevelProperties::DpiPolicy}} oldPolicy = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_af80d4404a0da97a8e45d0947f9bd7278}{getDpiPolicy}}();}
\DoxyCodeLine{01276     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_aef6e555a773c2f69d2089dc9c009f8be}{setDpiPolicy}}(LevelProperties::DP\_CustomDpi);}
\DoxyCodeLine{01277     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_abdaea012fce05b1617350a174790f473}{setDpi}}(dpi);}
\DoxyCodeLine{01278 }
\DoxyCodeLine{01279     TUndoManager::manager()-\/>add(}
\DoxyCodeLine{01280         \textcolor{keyword}{new} LevelSettingsUndo(levelP.getPointer(), LevelSettingsUndo::DpiType,}
\DoxyCodeLine{01281                               oldPolicy, LevelProperties::DP\_CustomDpi));}
\DoxyCodeLine{01282     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} LevelSettingsUndo(}
\DoxyCodeLine{01283         levelP.getPointer(), LevelSettingsUndo::Dpi,}
\DoxyCodeLine{01284         QPointF(oldDpi.x, oldDpi.y), QPointF(dpi.x, dpi.y)));}
\DoxyCodeLine{01285   \}}
\DoxyCodeLine{01286   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01287   \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{01288   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{01289   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>notifyLevelChange();}
\DoxyCodeLine{01290 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_af5b5b4b588afb70b0cc765318c141947}\label{class_level_settings_popup_af5b5b4b588afb70b0cc765318c141947}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!onDpiTypeChanged@{onDpiTypeChanged}}
\index{onDpiTypeChanged@{onDpiTypeChanged}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{onDpiTypeChanged}{onDpiTypeChanged}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::on\+Dpi\+Type\+Changed (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01203                                                    \{}
\DoxyCodeLine{01204   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01205   QSetIterator<TXshLevelP> levelItr(m\_selectedLevels);}
\DoxyCodeLine{01206   \textcolor{keywordflow}{while} (levelItr.hasNext()) \{}
\DoxyCodeLine{01207     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} levelP   = levelItr.next();}
\DoxyCodeLine{01208     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshSimpleLevelP}} sl = levelP-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01209     \textcolor{keywordflow}{if} (!sl || sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == PLI\_XSHLEVEL) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01210     QString dpiPolicyStr = m\_dpiTypeOm-\/>itemData(index).toString();}
\DoxyCodeLine{01211     assert(dpiPolicyStr == \textcolor{stringliteral}{"{}Custom DPI"{}} || dpiPolicyStr == \textcolor{stringliteral}{"{}Image DPI"{}});}
\DoxyCodeLine{01212     \mbox{\hyperlink{class_level_properties}{LevelProperties}} *prop = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}();}
\DoxyCodeLine{01213     \textcolor{comment}{// dpiPolicyStr ==> dpiPolicy}}
\DoxyCodeLine{01214     \mbox{\hyperlink{class_level_properties_a39428db69e55fec37017a264312b61d2}{LevelProperties::DpiPolicy}} dpiPolicy = dpiPolicyStr == \textcolor{stringliteral}{"{}Custom DPI"{}}}
\DoxyCodeLine{01215                                                ? LevelProperties::DP\_CustomDpi}
\DoxyCodeLine{01216                                                : LevelProperties::DP\_ImageDpi;}
\DoxyCodeLine{01217     \textcolor{comment}{// se ImageDpi, ma l'immagine non ha dpi -\/> CustomDpi}}
\DoxyCodeLine{01218     assert(dpiPolicy == LevelProperties::DP\_CustomDpi ||}
\DoxyCodeLine{01219            sl-\/>getImageDpi().x > 0.0 \&\& sl-\/>getImageDpi().y > 0.0);}
\DoxyCodeLine{01220 }
\DoxyCodeLine{01221     \textcolor{keywordflow}{if} (prop-\/>\mbox{\hyperlink{class_level_properties_af80d4404a0da97a8e45d0947f9bd7278}{getDpiPolicy}}() == dpiPolicy) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01222     \mbox{\hyperlink{class_level_properties_a39428db69e55fec37017a264312b61d2}{LevelProperties::DpiPolicy}} oldPolicy = prop-\/>\mbox{\hyperlink{class_level_properties_af80d4404a0da97a8e45d0947f9bd7278}{getDpiPolicy}}();}
\DoxyCodeLine{01223     prop-\/>\mbox{\hyperlink{class_level_properties_aef6e555a773c2f69d2089dc9c009f8be}{setDpiPolicy}}(dpiPolicy);}
\DoxyCodeLine{01224     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} LevelSettingsUndo(}
\DoxyCodeLine{01225         levelP.getPointer(), LevelSettingsUndo::DpiType, oldPolicy, dpiPolicy));}
\DoxyCodeLine{01226   \}}
\DoxyCodeLine{01227   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01228 }
\DoxyCodeLine{01229   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{01230   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>notifyLevelChange();}
\DoxyCodeLine{01231 }
\DoxyCodeLine{01232   \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{01233 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_a44b958e3302d9f12716f212e0b5d7c97}\label{class_level_settings_popup_a44b958e3302d9f12716f212e0b5d7c97}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!onHeightFieldChanged@{onHeightFieldChanged}}
\index{onHeightFieldChanged@{onHeightFieldChanged}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{onHeightFieldChanged}{onHeightFieldChanged}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::on\+Height\+Field\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01364                                               \{}
\DoxyCodeLine{01365   \textcolor{keywordtype}{double} ly = m\_heightFld-\/>getValue();}
\DoxyCodeLine{01366   \textcolor{keywordflow}{if} (ly <= 0) \{}
\DoxyCodeLine{01367     \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{01368     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01369   \}}
\DoxyCodeLine{01370 }
\DoxyCodeLine{01371   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01372   QSetIterator<TXshLevelP> levelItr(m\_selectedLevels);}
\DoxyCodeLine{01373   \textcolor{keywordflow}{while} (levelItr.hasNext()) \{}
\DoxyCodeLine{01374     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} levelP   = levelItr.next();}
\DoxyCodeLine{01375     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshSimpleLevelP}} sl = levelP-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01376     \textcolor{keywordflow}{if} (!sl || sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == PLI\_XSHLEVEL) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01377     \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi = sl-\/>getDpi();}
\DoxyCodeLine{01378     \textcolor{keywordflow}{if} (dpi.y <= 0) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01379     \mbox{\hyperlink{class_t_dimension_t}{TDimension}} res = sl-\/>getResolution();}
\DoxyCodeLine{01380     \textcolor{keywordflow}{if} (res.ly <= 0) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01381     dpi.y = res.ly / ly;}
\DoxyCodeLine{01382     \textcolor{keywordflow}{if} (m\_squarePixCB-\/>isChecked()) dpi.x = dpi.y;}
\DoxyCodeLine{01383 }
\DoxyCodeLine{01384     \mbox{\hyperlink{class_level_properties_a39428db69e55fec37017a264312b61d2}{LevelProperties::DpiPolicy}} oldPolicy = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_af80d4404a0da97a8e45d0947f9bd7278}{getDpiPolicy}}();}
\DoxyCodeLine{01385     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_aef6e555a773c2f69d2089dc9c009f8be}{setDpiPolicy}}(LevelProperties::DP\_CustomDpi);}
\DoxyCodeLine{01386     \mbox{\hyperlink{class_t_point_t}{TPointD}} oldDpi = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a744228a911310bc962ce76315c9ab2b1}{getDpi}}();}
\DoxyCodeLine{01387     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_abdaea012fce05b1617350a174790f473}{setDpi}}(dpi);}
\DoxyCodeLine{01388 }
\DoxyCodeLine{01389     TUndoManager::manager()-\/>add(}
\DoxyCodeLine{01390         \textcolor{keyword}{new} LevelSettingsUndo(levelP.getPointer(), LevelSettingsUndo::DpiType,}
\DoxyCodeLine{01391                               oldPolicy, LevelProperties::DP\_CustomDpi));}
\DoxyCodeLine{01392     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} LevelSettingsUndo(}
\DoxyCodeLine{01393         levelP.getPointer(), LevelSettingsUndo::Dpi,}
\DoxyCodeLine{01394         QPointF(oldDpi.x, oldDpi.y), QPointF(dpi.x, dpi.y)));}
\DoxyCodeLine{01395   \}}
\DoxyCodeLine{01396   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01397   \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{01398   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{01399   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>notifyLevelChange();}
\DoxyCodeLine{01400 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_a339b8779a0ee3c421bcc52920e834e63}\label{class_level_settings_popup_a339b8779a0ee3c421bcc52920e834e63}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!onNameChanged@{onNameChanged}}
\index{onNameChanged@{onNameChanged}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{onNameChanged}{onNameChanged}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::on\+Name\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00932                                        \{}
\DoxyCodeLine{00933   assert(m\_selectedLevels.size() == 1);}
\DoxyCodeLine{00934   \textcolor{keywordflow}{if} (m\_selectedLevels.size() != 1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00935   QString text = m\_nameFld-\/>text();}
\DoxyCodeLine{00936   \textcolor{keywordflow}{if} (text.length() == 0) \{}
\DoxyCodeLine{00937     error(\textcolor{stringliteral}{"{}The name "{}} + text +}
\DoxyCodeLine{00938           \textcolor{stringliteral}{"{} you entered for the level is not valid.\(\backslash\)n Please enter a different "{}}}
\DoxyCodeLine{00939           \textcolor{stringliteral}{"{}name."{}});}
\DoxyCodeLine{00940     m\_nameFld-\/>setFocus();}
\DoxyCodeLine{00941     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00942   \}}
\DoxyCodeLine{00943 }
\DoxyCodeLine{00944   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level = m\_selectedLevels.begin()-\/>getPointer();}
\DoxyCodeLine{00945   \textcolor{keywordflow}{if} ((getType(level) \& (SimpleLevel | SubXsheet)) == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00946 }
\DoxyCodeLine{00947   \textcolor{comment}{// in case the level name is not changed}}
\DoxyCodeLine{00948   QString oldName = QString::fromStdWString(level-\/>\mbox{\hyperlink{class_t_xsh_level_a3a59fb1bd3261baee4e889a9edbf0ae8}{getName}}());}
\DoxyCodeLine{00949   \textcolor{keywordflow}{if} (oldName == text) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00950 }
\DoxyCodeLine{00951   \mbox{\hyperlink{class_t_level_set}{TLevelSet}} *levelSet =}
\DoxyCodeLine{00952       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_ac1a8bf0d2cec4f59c87b0001991264b5}{getLevelSet}}();}
\DoxyCodeLine{00953 }
\DoxyCodeLine{00954   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{00955 }
\DoxyCodeLine{00956   \textcolor{comment}{// remove existing \& unused level}}
\DoxyCodeLine{00957   \textcolor{keywordflow}{if} (Preferences::instance()-\/>isAutoRemoveUnusedLevelsEnabled()) \{}
\DoxyCodeLine{00958     \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *existingLevel = levelSet-\/>getLevel(text.toStdWString());}
\DoxyCodeLine{00959     \textcolor{keywordflow}{if} (existingLevel \&\&}
\DoxyCodeLine{00960         LevelCmd::removeLevelFromCast(existingLevel, \textcolor{keyword}{nullptr}, \textcolor{keyword}{false}))}
\DoxyCodeLine{00961       DVGui::info(QObject::tr(\textcolor{stringliteral}{"{}Removed unused level \%1 from the scene cast. "{}}}
\DoxyCodeLine{00962                               \textcolor{stringliteral}{"{}(This behavior can be disabled in Preferences.)"{}})}
\DoxyCodeLine{00963                       .arg(text));}
\DoxyCodeLine{00964   \}}
\DoxyCodeLine{00965 }
\DoxyCodeLine{00966   \textcolor{keywordflow}{if} (!levelSet-\/>renameLevel(level, text.toStdWString())) \{}
\DoxyCodeLine{00967     error(\textcolor{stringliteral}{"{}The name "{}} + text +}
\DoxyCodeLine{00968           \textcolor{stringliteral}{"{} you entered for the level is already used.\(\backslash\)nPlease enter a "{}}}
\DoxyCodeLine{00969           \textcolor{stringliteral}{"{}different name."{}});}
\DoxyCodeLine{00970     m\_nameFld-\/>setFocus();}
\DoxyCodeLine{00971     TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{00972     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00973   \}}
\DoxyCodeLine{00974 }
\DoxyCodeLine{00975   TUndoManager::manager()-\/>add(}
\DoxyCodeLine{00976       \textcolor{keyword}{new} LevelSettingsUndo(level, LevelSettingsUndo::Name, oldName, text));}
\DoxyCodeLine{00977 }
\DoxyCodeLine{00978   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{00979 }
\DoxyCodeLine{00980   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{00981   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>notifyCastChange();}
\DoxyCodeLine{00982 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_a0303ff71235dde919b722a1d7994e353}\label{class_level_settings_popup_a0303ff71235dde919b722a1d7994e353}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!onPathChanged@{onPathChanged}}
\index{onPathChanged@{onPathChanged}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{onPathChanged}{onPathChanged}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::on\+Path\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00986                                        \{}
\DoxyCodeLine{00987   assert(m\_selectedLevels.size() == 1);}
\DoxyCodeLine{00988   \textcolor{keywordflow}{if} (m\_selectedLevels.size() != 1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00989   \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} levelP = *m\_selectedLevels.begin();}
\DoxyCodeLine{00990   \textcolor{keywordflow}{if} ((m\_activateFlags[m\_pathFld] \& getType(levelP)) == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00991 }
\DoxyCodeLine{00992   QString text = m\_pathFld-\/>getPath();}
\DoxyCodeLine{00993   \mbox{\hyperlink{class_t_file_path}{TFilePath}} newPath(text.toStdWString());}
\DoxyCodeLine{00994   newPath =}
\DoxyCodeLine{00995       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_abb12422205be4336c3dee1aa5fbdc5e5}{codeFilePath}}(newPath);}
\DoxyCodeLine{00996   m\_pathFld-\/>setPath(QString::fromStdWString(newPath.getWideString()));}
\DoxyCodeLine{00997 }
\DoxyCodeLine{00998   \mbox{\hyperlink{class_t_smart_pointer_t}{TXshSoundLevelP}} sdl = levelP-\/>\mbox{\hyperlink{class_t_xsh_level_aa26f1638f7685304949b33befc0bfcc9}{getSoundLevel}}();}
\DoxyCodeLine{00999   \textcolor{keywordflow}{if} (sdl) \{}
\DoxyCodeLine{01000     \textcolor{comment}{// old level is a sound level}}
\DoxyCodeLine{01001     TFileType::Type levelType = TFileType::getInfo(newPath);}
\DoxyCodeLine{01002     \textcolor{keywordflow}{if} (levelType == TFileType::AUDIO\_LEVEL) \{}
\DoxyCodeLine{01003       \mbox{\hyperlink{class_t_file_path}{TFilePath}} oldPath = sdl-\/>\mbox{\hyperlink{class_t_xsh_sound_level_a929c0a20b8447d38189edc3bae5d3d37}{getPath}}();}
\DoxyCodeLine{01004       \textcolor{keywordflow}{if} (oldPath == newPath) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01005       sdl-\/>setPath(newPath);}
\DoxyCodeLine{01006       sdl-\/>loadSoundTrack();}
\DoxyCodeLine{01007       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{01008       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetSoundChanged();}
\DoxyCodeLine{01009       TUndoManager::manager()-\/>add(}
\DoxyCodeLine{01010           \textcolor{keyword}{new} LevelSettingsUndo(levelP.getPointer(), LevelSettingsUndo::Path,}
\DoxyCodeLine{01011                                 oldPath.getQString(), newPath.getQString()));}
\DoxyCodeLine{01012     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01013       error(tr(\textcolor{stringliteral}{"{}The file \%1 is not a sound level."{}})}
\DoxyCodeLine{01014                 .arg(QString::fromStdWString(newPath.getLevelNameW())));}
\DoxyCodeLine{01015       \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{01016     \}}
\DoxyCodeLine{01017     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01018   \}}
\DoxyCodeLine{01019 }
\DoxyCodeLine{01020   \mbox{\hyperlink{class_t_smart_pointer_t}{TXshSimpleLevelP}} sl  = levelP-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01021   \mbox{\hyperlink{class_t_smart_pointer_t}{TXshPaletteLevelP}} pl = levelP-\/>\mbox{\hyperlink{class_t_xsh_level_afdbb7e1664b681225414f59317a32b74}{getPaletteLevel}}();}
\DoxyCodeLine{01022   \textcolor{keywordflow}{if} (!sl \&\& !pl) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01023   \mbox{\hyperlink{class_t_file_path}{TFilePath}} oldPath = (sl) ? sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}() : pl-\/>getPath();}
\DoxyCodeLine{01024   \textcolor{keywordflow}{if} (oldPath == newPath) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01025 }
\DoxyCodeLine{01026   \mbox{\hyperlink{class_t_level_set}{TLevelSet}} *levelSet =}
\DoxyCodeLine{01027       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_ac1a8bf0d2cec4f59c87b0001991264b5}{getLevelSet}}();}
\DoxyCodeLine{01028   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *lvlWithSamePath = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01029   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < levelSet-\/>getLevelCount(); i++) \{}
\DoxyCodeLine{01030     \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *tmpLvl = levelSet-\/>getLevel(i);}
\DoxyCodeLine{01031     \textcolor{keywordflow}{if} (!tmpLvl) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01032     \textcolor{keywordflow}{if} (tmpLvl == levelP.getPointer()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01033     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshSimpleLevelP}} tmpSl  = tmpLvl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01034     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshPaletteLevelP}} tmpPl = tmpLvl-\/>\mbox{\hyperlink{class_t_xsh_level_afdbb7e1664b681225414f59317a32b74}{getPaletteLevel}}();}
\DoxyCodeLine{01035     \textcolor{keywordflow}{if} (!tmpSl \&\& !tmpPl) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01036     \mbox{\hyperlink{class_t_file_path}{TFilePath}} tmpPath = (tmpSl) ? tmpSl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}() : tmpPl-\/>getPath();}
\DoxyCodeLine{01037     \textcolor{keywordflow}{if} (tmpPath == newPath) \{}
\DoxyCodeLine{01038       lvlWithSamePath = tmpLvl;}
\DoxyCodeLine{01039       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01040     \}}
\DoxyCodeLine{01041   \}}
\DoxyCodeLine{01042   \textcolor{keywordflow}{if} (lvlWithSamePath) \{}
\DoxyCodeLine{01043     QString question;}
\DoxyCodeLine{01044 }
\DoxyCodeLine{01045     question = \textcolor{stringliteral}{"{}The path you entered for the level "{}} +}
\DoxyCodeLine{01046                QString(::to\_string(lvlWithSamePath-\/>\mbox{\hyperlink{class_t_xsh_level_a3a59fb1bd3261baee4e889a9edbf0ae8}{getName}}()).c\_str()) +}
\DoxyCodeLine{01047                \textcolor{stringliteral}{"{}is already used: this may generate some conflicts in the file "{}}}
\DoxyCodeLine{01048                \textcolor{stringliteral}{"{}management.\(\backslash\)nAre you sure you want to assign the same path to "{}}}
\DoxyCodeLine{01049                \textcolor{stringliteral}{"{}two different levels?"{}};}
\DoxyCodeLine{01050     \textcolor{keywordtype}{int} ret = DVGui::MsgBox(question, QObject::tr(\textcolor{stringliteral}{"{}Yes"{}}), QObject::tr(\textcolor{stringliteral}{"{}No"{}}));}
\DoxyCodeLine{01051     \textcolor{keywordflow}{if} (ret == 0 || ret == 2) \{}
\DoxyCodeLine{01052       m\_pathFld-\/>setPath(toQString(oldPath));}
\DoxyCodeLine{01053       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01054     \}}
\DoxyCodeLine{01055   \}}
\DoxyCodeLine{01056 }
\DoxyCodeLine{01057   TFileType::Type oldType = TFileType::getInfo(oldPath);}
\DoxyCodeLine{01058   TFileType::Type newType = TFileType::getInfo(newPath);}
\DoxyCodeLine{01059 }
\DoxyCodeLine{01060   \textcolor{keywordflow}{if} (sl \&\& sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == TZP\_XSHLEVEL \&\&}
\DoxyCodeLine{01061       sl-\/>getScannedPath() != \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \{}
\DoxyCodeLine{01062     \textcolor{keywordflow}{if} (newPath == \mbox{\hyperlink{class_t_file_path}{TFilePath}}() || newPath == sl-\/>getScannedPath()) \{}
\DoxyCodeLine{01063       newPath = sl-\/>getScannedPath();}
\DoxyCodeLine{01064       sl-\/>\mbox{\hyperlink{class_t_xsh_level_ad2cb5812d9f36e9f5d570874dad8d3bd}{setType}}(OVL\_XSHLEVEL);}
\DoxyCodeLine{01065       sl-\/>setScannedPath(\mbox{\hyperlink{class_t_file_path}{TFilePath}}());}
\DoxyCodeLine{01066       sl-\/>setPath(newPath);}
\DoxyCodeLine{01067       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{01068       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>notifyCastChange();}
\DoxyCodeLine{01069       \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{01070       sl-\/>invalidateFrames();}
\DoxyCodeLine{01071       std::vector<TFrameId> frames;}
\DoxyCodeLine{01072       sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{getFids}}(frames);}
\DoxyCodeLine{01073       \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const} \&fid : frames) \{}
\DoxyCodeLine{01074         IconGenerator::instance()-\/>invalidate(sl.getPointer(), fid);}
\DoxyCodeLine{01075       \}}
\DoxyCodeLine{01076       TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01077       TUndoManager::manager()-\/>add(}
\DoxyCodeLine{01078           \textcolor{keyword}{new} LevelSettingsUndo(levelP.getPointer(), LevelSettingsUndo::Path,}
\DoxyCodeLine{01079                                 oldPath.getQString(), newPath.getQString()));}
\DoxyCodeLine{01080       TUndoManager::manager()-\/>add(\textcolor{keyword}{new} LevelSettingsUndo(}
\DoxyCodeLine{01081           levelP.getPointer(), LevelSettingsUndo::ScanPath,}
\DoxyCodeLine{01082           newPath.getQString(), QString()));}
\DoxyCodeLine{01083       TUndoManager::manager()-\/>add(\textcolor{keyword}{new} LevelSettingsUndo(}
\DoxyCodeLine{01084           levelP.getPointer(), LevelSettingsUndo::LevelType, TZP\_XSHLEVEL,}
\DoxyCodeLine{01085           OVL\_XSHLEVEL));}
\DoxyCodeLine{01086       TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01087       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01088     \}}
\DoxyCodeLine{01089   \}}
\DoxyCodeLine{01090 }
\DoxyCodeLine{01091   \textcolor{keywordflow}{if} (oldType != newType ||}
\DoxyCodeLine{01092       (sl \&\& sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == TZP\_XSHLEVEL \&\& newPath.getType() != \textcolor{stringliteral}{"{}tlv"{}}) ||}
\DoxyCodeLine{01093       (sl \&\& sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() != TZP\_XSHLEVEL \&\& newPath.getType() == \textcolor{stringliteral}{"{}tlv"{}}) ||}
\DoxyCodeLine{01094       (pl \&\& newPath.getType() != \textcolor{stringliteral}{"{}tpl"{}})) \{}
\DoxyCodeLine{01095     error(\textcolor{stringliteral}{"{}Wrong path"{}});}
\DoxyCodeLine{01096     m\_pathFld-\/>setPath(toQString(oldPath));}
\DoxyCodeLine{01097     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01098   \}}
\DoxyCodeLine{01099   \textcolor{comment}{//-\/-\/ update the path here}}
\DoxyCodeLine{01100   \textcolor{keywordflow}{if} (sl) \{}
\DoxyCodeLine{01101     sl-\/>setPath(newPath);}
\DoxyCodeLine{01102     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()}
\DoxyCodeLine{01103         -\/>getPaletteController()}
\DoxyCodeLine{01104         -\/>getCurrentLevelPalette()}
\DoxyCodeLine{01105         -\/>setPalette(sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}());}
\DoxyCodeLine{01106     sl-\/>invalidateFrames();}
\DoxyCodeLine{01107     std::vector<TFrameId> frames;}
\DoxyCodeLine{01108     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{getFids}}(frames);}
\DoxyCodeLine{01109     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const} \&fid : frames) \{}
\DoxyCodeLine{01110       IconGenerator::instance()-\/>invalidate(sl.getPointer(), fid);}
\DoxyCodeLine{01111     \}}
\DoxyCodeLine{01112   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (pl) \{}
\DoxyCodeLine{01113     pl-\/>setPath(newPath);}
\DoxyCodeLine{01114     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()}
\DoxyCodeLine{01115         -\/>getPaletteController()}
\DoxyCodeLine{01116         -\/>getCurrentLevelPalette()}
\DoxyCodeLine{01117         -\/>setPalette(pl-\/>getPalette());}
\DoxyCodeLine{01118     pl-\/>load();}
\DoxyCodeLine{01119   \}}
\DoxyCodeLine{01120   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>notifyLevelChange();}
\DoxyCodeLine{01121   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>notifySceneChanged();}
\DoxyCodeLine{01122   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{01123   \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{01124   TUndoManager::manager()-\/>add(}
\DoxyCodeLine{01125       \textcolor{keyword}{new} LevelSettingsUndo(levelP.getPointer(), LevelSettingsUndo::Path,}
\DoxyCodeLine{01126                             oldPath.getQString(), newPath.getQString()));}
\DoxyCodeLine{01127 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_abc663a604fb9dc5efc0e400ee1f3a877}\label{class_level_settings_popup_abc663a604fb9dc5efc0e400ee1f3a877}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!onPreferenceChanged@{onPreferenceChanged}}
\index{onPreferenceChanged@{onPreferenceChanged}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{onPreferenceChanged}{onPreferenceChanged}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::on\+Preference\+Changed (\begin{DoxyParamCaption}\item[{const QString \&}]{property\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00605                                                                         \{}
\DoxyCodeLine{00606   \textcolor{keywordflow}{if} (!propertyName.isEmpty() \&\& propertyName != \textcolor{stringliteral}{"{}pixelsOnly"{}}) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00607   \textcolor{keywordtype}{bool} pixelsMode = Preferences::instance()-\/>getBoolValue(pixelsOnly);}
\DoxyCodeLine{00608   QMap<QWidget *, unsigned int>::iterator i = m\_activateFlags.begin();}
\DoxyCodeLine{00609   \textcolor{keywordflow}{while} (i != m\_activateFlags.end()) \{}
\DoxyCodeLine{00610     \textcolor{keywordflow}{if} (i.value() \& HideOnPixelMode) i.key()-\/>setHidden(pixelsMode);}
\DoxyCodeLine{00611     ++i;}
\DoxyCodeLine{00612   \}}
\DoxyCodeLine{00613   \textcolor{keywordtype}{int} decimals = (pixelsMode) ? 0 : 4;}
\DoxyCodeLine{00614   m\_widthFld-\/>setDecimals(decimals);}
\DoxyCodeLine{00615   m\_heightFld-\/>setDecimals(decimals);}
\DoxyCodeLine{00616   adjustSize();}
\DoxyCodeLine{00617 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_abb1f65b8956585adf2fcc1f9e7f45094}\label{class_level_settings_popup_abb1f65b8956585adf2fcc1f9e7f45094}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!onScanPathChanged@{onScanPathChanged}}
\index{onScanPathChanged@{onScanPathChanged}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{onScanPathChanged}{onScanPathChanged}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::on\+Scan\+Path\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01131                                            \{}
\DoxyCodeLine{01132   assert(m\_selectedLevels.size() == 1);}
\DoxyCodeLine{01133   \textcolor{keywordflow}{if} (m\_selectedLevels.size() != 1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01134   \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} levelP   = *m\_selectedLevels.begin();}
\DoxyCodeLine{01135   \mbox{\hyperlink{class_t_smart_pointer_t}{TXshSimpleLevelP}} sl = levelP-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01136   \textcolor{keywordflow}{if} (!sl || sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() != TZP\_XSHLEVEL) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01137 }
\DoxyCodeLine{01138   QString text = m\_scanPathFld-\/>getPath();}
\DoxyCodeLine{01139   \mbox{\hyperlink{class_t_file_path}{TFilePath}} newScanPath(text.toStdWString());}
\DoxyCodeLine{01140 }
\DoxyCodeLine{01141   \textcolor{comment}{// limit the available formats for now}}
\DoxyCodeLine{01142   \textcolor{keywordflow}{if} (newScanPath.getType() != \textcolor{stringliteral}{"{}tif"{}} \&\& newScanPath.getType() != \textcolor{stringliteral}{"{}tiff"{}} \&\&}
\DoxyCodeLine{01143       newScanPath.getType() != \textcolor{stringliteral}{"{}tzi"{}}) \{}
\DoxyCodeLine{01144     m\_scanPathFld-\/>setPath(toQString(sl-\/>getScannedPath()));}
\DoxyCodeLine{01145     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01146   \}}
\DoxyCodeLine{01147 }
\DoxyCodeLine{01148   newScanPath = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_abb12422205be4336c3dee1aa5fbdc5e5}{codeFilePath}}(}
\DoxyCodeLine{01149       newScanPath);}
\DoxyCodeLine{01150   m\_scanPathFld-\/>setPath(QString::fromStdWString(newScanPath.getWideString()));}
\DoxyCodeLine{01151 }
\DoxyCodeLine{01152   \mbox{\hyperlink{class_t_file_path}{TFilePath}} oldScanPath = sl-\/>getScannedPath();}
\DoxyCodeLine{01153   \textcolor{keywordflow}{if} (oldScanPath == newScanPath) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01154 }
\DoxyCodeLine{01155   \textcolor{comment}{// check if the "{}Cleanup Settings > SaveIn"{} value is the same as the current}}
\DoxyCodeLine{01156   \textcolor{comment}{// level}}
\DoxyCodeLine{01157   \mbox{\hyperlink{class_t_file_path}{TFilePath}} settingsPath =}
\DoxyCodeLine{01158       (newScanPath.getParentDir() + newScanPath.getName()).withType(\textcolor{stringliteral}{"{}cln"{}});}
\DoxyCodeLine{01159   settingsPath =}
\DoxyCodeLine{01160       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(}
\DoxyCodeLine{01161           settingsPath);}
\DoxyCodeLine{01162   \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(settingsPath)) \{}
\DoxyCodeLine{01163     \mbox{\hyperlink{class_t_i_stream}{TIStream}} is(settingsPath);}
\DoxyCodeLine{01164     \mbox{\hyperlink{class_t_file_path}{TFilePath}} cleanupLevelPath;}
\DoxyCodeLine{01165     std::string tagName;}
\DoxyCodeLine{01166     \textcolor{keywordflow}{while} (is.matchTag(tagName)) \{}
\DoxyCodeLine{01167       \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}cleanupPalette"{}} || tagName == \textcolor{stringliteral}{"{}cleanupCamera"{}} ||}
\DoxyCodeLine{01168           tagName == \textcolor{stringliteral}{"{}autoCenter"{}} || tagName == \textcolor{stringliteral}{"{}transform"{}} ||}
\DoxyCodeLine{01169           tagName == \textcolor{stringliteral}{"{}lineProcessing"{}} || tagName == \textcolor{stringliteral}{"{}closestField"{}} ||}
\DoxyCodeLine{01170           tagName == \textcolor{stringliteral}{"{}fdg"{}}) \{}
\DoxyCodeLine{01171         is.skipCurrentTag();}
\DoxyCodeLine{01172       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}path"{}}) \{}
\DoxyCodeLine{01173         is >> cleanupLevelPath;}
\DoxyCodeLine{01174         is.closeChild();}
\DoxyCodeLine{01175       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01176         std::cout << \textcolor{stringliteral}{"{}mismatch tag:"{}} << tagName << std::endl;}
\DoxyCodeLine{01177     \}}
\DoxyCodeLine{01178 }
\DoxyCodeLine{01179     \textcolor{keywordflow}{if} (cleanupLevelPath != \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \{}
\DoxyCodeLine{01180       \mbox{\hyperlink{class_t_file_path}{TFilePath}} codedCleanupLevelPath =}
\DoxyCodeLine{01181           \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_abb12422205be4336c3dee1aa5fbdc5e5}{codeFilePath}}(}
\DoxyCodeLine{01182               cleanupLevelPath);}
\DoxyCodeLine{01183       \textcolor{keywordflow}{if} (sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}().\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() != cleanupLevelPath \&\&}
\DoxyCodeLine{01184           sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}().\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() != codedCleanupLevelPath)}
\DoxyCodeLine{01185         DVGui::warning(}
\DoxyCodeLine{01186             \textcolor{stringliteral}{"{}\(\backslash\)"{}Save In\(\backslash\)"{} path of the Cleanup Settings does not match."{}});}
\DoxyCodeLine{01187     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01188       DVGui::warning(\textcolor{stringliteral}{"{}Loading Cleanup Settings failed."{}});}
\DoxyCodeLine{01189   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01190     DVGui::warning(\textcolor{stringliteral}{"{}.cln file for the Scanned Level not found."{}});}
\DoxyCodeLine{01191 }
\DoxyCodeLine{01192   sl-\/>setScannedPath(newScanPath);}
\DoxyCodeLine{01193 }
\DoxyCodeLine{01194   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{01195   \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{01196   TUndoManager::manager()-\/>add(\textcolor{keyword}{new} LevelSettingsUndo(}
\DoxyCodeLine{01197       levelP.getPointer(), LevelSettingsUndo::ScanPath,}
\DoxyCodeLine{01198       oldScanPath.getQString(), newScanPath.getQString()));}
\DoxyCodeLine{01199 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_ad870e9326097fa40a9c035050198609e}\label{class_level_settings_popup_ad870e9326097fa40a9c035050198609e}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!onSceneChanged@{onSceneChanged}}
\index{onSceneChanged@{onSceneChanged}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{onSceneChanged}{onSceneChanged}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::on\+Scene\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00601 \{ \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_a6ce2f48e81114d82d4fb74c5d3437108}\label{class_level_settings_popup_a6ce2f48e81114d82d4fb74c5d3437108}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!onSelectionSwitched@{onSelectionSwitched}}
\index{onSelectionSwitched@{onSelectionSwitched}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{onSelectionSwitched}{onSelectionSwitched}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::on\+Selection\+Switched (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_selection}{TSelection}} $\ast$}]{old\+Selection,  }\item[{\mbox{\hyperlink{class_t_selection}{TSelection}} $\ast$}]{new\+Selection }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00626                                                                        \{}
\DoxyCodeLine{00627   \mbox{\hyperlink{class_cast_selection}{CastSelection}} *castSelection = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_cast_selection}{CastSelection}} *\textcolor{keyword}{>}(newSelection);}
\DoxyCodeLine{00628   \textcolor{keywordflow}{if} (!castSelection) \{}
\DoxyCodeLine{00629     \mbox{\hyperlink{class_cast_selection}{CastSelection}} *oldCastSelection =}
\DoxyCodeLine{00630         \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_cast_selection}{CastSelection}} *\textcolor{keyword}{>}(oldSelection);}
\DoxyCodeLine{00631     \textcolor{keywordflow}{if} (oldCastSelection)}
\DoxyCodeLine{00632       disconnect(oldCastSelection, SIGNAL(itemSelectionChanged()), \textcolor{keyword}{this},}
\DoxyCodeLine{00633                  SLOT(onCastSelectionChanged()));}
\DoxyCodeLine{00634     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00635   \}}
\DoxyCodeLine{00636   connect(castSelection, SIGNAL(itemSelectionChanged()), \textcolor{keyword}{this},}
\DoxyCodeLine{00637           SLOT(onCastSelectionChanged()));}
\DoxyCodeLine{00638 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_adfebb42d4c76c51fda39f6301f8450a4}\label{class_level_settings_popup_adfebb42d4c76c51fda39f6301f8450a4}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!onSquarePixelChanged@{onSquarePixelChanged}}
\index{onSquarePixelChanged@{onSquarePixelChanged}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{onSquarePixelChanged}{onSquarePixelChanged}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::on\+Square\+Pixel\+Changed (\begin{DoxyParamCaption}\item[{int}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01294                                                        \{}
\DoxyCodeLine{01295   \textcolor{keywordflow}{if} (!value) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01296   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01297   QSetIterator<TXshLevelP> levelItr(m\_selectedLevels);}
\DoxyCodeLine{01298   \textcolor{keywordflow}{while} (levelItr.hasNext()) \{}
\DoxyCodeLine{01299     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} levelP   = levelItr.next();}
\DoxyCodeLine{01300     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshSimpleLevelP}} sl = levelP-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01301     \textcolor{keywordflow}{if} (!sl || sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == PLI\_XSHLEVEL) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01302     \mbox{\hyperlink{class_t_point_t}{TPointD}} oldDpi = sl-\/>getDpi();}
\DoxyCodeLine{01303     \textcolor{keywordflow}{if} (areAlmostEqual(oldDpi.x, oldDpi.y)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01304     \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi(oldDpi.x, oldDpi.x);}
\DoxyCodeLine{01305     \mbox{\hyperlink{class_level_properties_a39428db69e55fec37017a264312b61d2}{LevelProperties::DpiPolicy}} oldPolicy = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_af80d4404a0da97a8e45d0947f9bd7278}{getDpiPolicy}}();}
\DoxyCodeLine{01306     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_aef6e555a773c2f69d2089dc9c009f8be}{setDpiPolicy}}(LevelProperties::DP\_CustomDpi);}
\DoxyCodeLine{01307     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_abdaea012fce05b1617350a174790f473}{setDpi}}(dpi);}
\DoxyCodeLine{01308 }
\DoxyCodeLine{01309     TUndoManager::manager()-\/>add(}
\DoxyCodeLine{01310         \textcolor{keyword}{new} LevelSettingsUndo(levelP.getPointer(), LevelSettingsUndo::DpiType,}
\DoxyCodeLine{01311                               oldPolicy, LevelProperties::DP\_CustomDpi));}
\DoxyCodeLine{01312     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} LevelSettingsUndo(}
\DoxyCodeLine{01313         levelP.getPointer(), LevelSettingsUndo::Dpi,}
\DoxyCodeLine{01314         QPointF(oldDpi.x, oldDpi.y), QPointF(dpi.x, dpi.y)));}
\DoxyCodeLine{01315   \}}
\DoxyCodeLine{01316   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01317   \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{01318   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{01319   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>notifyLevelChange();}
\DoxyCodeLine{01320 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_a54ad59d90ce364844bbf9fd44cbd25bf}\label{class_level_settings_popup_a54ad59d90ce364844bbf9fd44cbd25bf}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!onSubsamplingChanged@{onSubsamplingChanged}}
\index{onSubsamplingChanged@{onSubsamplingChanged}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{onSubsamplingChanged}{onSubsamplingChanged}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::on\+Subsampling\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01434                                               \{}
\DoxyCodeLine{01435   \textcolor{keywordtype}{int} subsampling = (int)m\_subsamplingFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit_a77019c5d6bce534fdd1931136a6efe95}{getValue}}();}
\DoxyCodeLine{01436   \textcolor{keywordflow}{if} (subsampling <= 0) \{}
\DoxyCodeLine{01437     \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{01438     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01439   \}}
\DoxyCodeLine{01440 }
\DoxyCodeLine{01441   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01442   QSetIterator<TXshLevelP> levelItr(m\_selectedLevels);}
\DoxyCodeLine{01443   \textcolor{keywordflow}{while} (levelItr.hasNext()) \{}
\DoxyCodeLine{01444     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} levelP   = levelItr.next();}
\DoxyCodeLine{01445     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshSimpleLevelP}} sl = levelP-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01446     \textcolor{keywordflow}{if} (!sl || sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == PLI\_XSHLEVEL) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01447     \textcolor{keywordflow}{if} (sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a19cc395b0312bc880b1d765c93720967}{getDirtyFlag}}()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01448 }
\DoxyCodeLine{01449     \textcolor{keywordtype}{int} oldSubsampling = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_af01336f9193ad7d8d0bb3fbf9069a93b}{getSubsampling}}();}
\DoxyCodeLine{01450     \textcolor{keywordflow}{if} (oldSubsampling == subsampling) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01451 }
\DoxyCodeLine{01452     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a2591ae6df7e874a982e1539395462174}{setSubsampling}}(subsampling);}
\DoxyCodeLine{01453     sl-\/>invalidateFrames();}
\DoxyCodeLine{01454     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} LevelSettingsUndo(}
\DoxyCodeLine{01455         levelP.getPointer(), LevelSettingsUndo::Subsampling, oldSubsampling,}
\DoxyCodeLine{01456         subsampling));}
\DoxyCodeLine{01457   \}}
\DoxyCodeLine{01458   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01459 }
\DoxyCodeLine{01460   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{01461   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()}
\DoxyCodeLine{01462       -\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()}
\DoxyCodeLine{01463       -\/>getXsheet()}
\DoxyCodeLine{01464       -\/>\mbox{\hyperlink{class_t_xsheet_a5dc925584e35e1678f5678b79c470959}{getStageObjectTree}}()}
\DoxyCodeLine{01465       -\/>\mbox{\hyperlink{class_t_stage_object_tree_aa88239ff5581af5d748d822d1f01cd9d}{invalidateAll}}();}
\DoxyCodeLine{01466   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>notifyLevelChange();}
\DoxyCodeLine{01467 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_ab53a1eb5baef4510031d9a9a2ee56ac1}\label{class_level_settings_popup_ab53a1eb5baef4510031d9a9a2ee56ac1}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!onWhiteTranspClicked@{onWhiteTranspClicked}}
\index{onWhiteTranspClicked@{onWhiteTranspClicked}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{onWhiteTranspClicked}{onWhiteTranspClicked}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::on\+White\+Transp\+Clicked (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01548                                               \{}
\DoxyCodeLine{01549   Qt::CheckState state = m\_whiteTransp-\/>checkState();}
\DoxyCodeLine{01550   \textcolor{keywordtype}{bool} on = (state == Qt::Checked || state == Qt::PartiallyChecked);}
\DoxyCodeLine{01551 }
\DoxyCodeLine{01552   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01553   QSetIterator<TXshLevelP> levelItr(m\_selectedLevels);}
\DoxyCodeLine{01554   \textcolor{keywordflow}{while} (levelItr.hasNext()) \{}
\DoxyCodeLine{01555     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} levelP   = levelItr.next();}
\DoxyCodeLine{01556     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = levelP-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01557     \textcolor{keywordflow}{if} (!sl || sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == PLI\_XSHLEVEL) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01558     \mbox{\hyperlink{class_level_properties}{LevelProperties}} *prop = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}();}
\DoxyCodeLine{01559     \textcolor{keywordflow}{if} (on == prop-\/>whiteTransp()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01560     \textcolor{keywordflow}{if} (on \&\& prop-\/>\mbox{\hyperlink{class_level_properties_a5a253da40e456de66dca76526f2e9453}{doPremultiply}}()) \{}
\DoxyCodeLine{01561       prop-\/>\mbox{\hyperlink{class_level_properties_a0d8e31bd8a357d200ceb11d4d319c8b2}{setDoPremultiply}}(\textcolor{keyword}{false});}
\DoxyCodeLine{01562       TUndoManager::manager()-\/>add(\textcolor{keyword}{new} LevelSettingsUndo(}
\DoxyCodeLine{01563           levelP.getPointer(), LevelSettingsUndo::DoPremulti, \textcolor{keyword}{true}, \textcolor{keyword}{false}));}
\DoxyCodeLine{01564     \}}
\DoxyCodeLine{01565     prop-\/>\mbox{\hyperlink{class_level_properties_a6ef560f5193695f8c317be16239f3eaa}{setWhiteTransp}}(on);}
\DoxyCodeLine{01566     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} LevelSettingsUndo(}
\DoxyCodeLine{01567         levelP.getPointer(), LevelSettingsUndo::WhiteTransp, !on, on));}
\DoxyCodeLine{01568   \}}
\DoxyCodeLine{01569   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01570   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>notifyLevelChange();}
\DoxyCodeLine{01571   \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{01572 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_a931e305c74f3b8d3980d89f795ccaf71}\label{class_level_settings_popup_a931e305c74f3b8d3980d89f795ccaf71}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!onWidthFieldChanged@{onWidthFieldChanged}}
\index{onWidthFieldChanged@{onWidthFieldChanged}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{onWidthFieldChanged}{onWidthFieldChanged}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::on\+Width\+Field\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01324                                              \{}
\DoxyCodeLine{01325   \textcolor{keywordtype}{double} lx = m\_widthFld-\/>getValue();}
\DoxyCodeLine{01326   \textcolor{keywordflow}{if} (lx <= 0) \{}
\DoxyCodeLine{01327     \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{01328     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01329   \}}
\DoxyCodeLine{01330 }
\DoxyCodeLine{01331   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01332   QSetIterator<TXshLevelP> levelItr(m\_selectedLevels);}
\DoxyCodeLine{01333   \textcolor{keywordflow}{while} (levelItr.hasNext()) \{}
\DoxyCodeLine{01334     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} levelP   = levelItr.next();}
\DoxyCodeLine{01335     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshSimpleLevelP}} sl = levelP-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01336     \textcolor{keywordflow}{if} (!sl || sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == PLI\_XSHLEVEL) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01337     \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi = sl-\/>getDpi();}
\DoxyCodeLine{01338     \textcolor{keywordflow}{if} (dpi.x <= 0) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01339     \mbox{\hyperlink{class_t_dimension_t}{TDimension}} res = sl-\/>getResolution();}
\DoxyCodeLine{01340     \textcolor{keywordflow}{if} (res.lx <= 0) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01341     dpi.x = res.lx / lx;}
\DoxyCodeLine{01342     \textcolor{keywordflow}{if} (m\_squarePixCB-\/>isChecked()) dpi.y = dpi.x;}
\DoxyCodeLine{01343 }
\DoxyCodeLine{01344     \mbox{\hyperlink{class_level_properties_a39428db69e55fec37017a264312b61d2}{LevelProperties::DpiPolicy}} oldPolicy = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_af80d4404a0da97a8e45d0947f9bd7278}{getDpiPolicy}}();}
\DoxyCodeLine{01345     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_aef6e555a773c2f69d2089dc9c009f8be}{setDpiPolicy}}(LevelProperties::DP\_CustomDpi);}
\DoxyCodeLine{01346     \mbox{\hyperlink{class_t_point_t}{TPointD}} oldDpi = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a744228a911310bc962ce76315c9ab2b1}{getDpi}}();}
\DoxyCodeLine{01347     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_abdaea012fce05b1617350a174790f473}{setDpi}}(dpi);}
\DoxyCodeLine{01348 }
\DoxyCodeLine{01349     TUndoManager::manager()-\/>add(}
\DoxyCodeLine{01350         \textcolor{keyword}{new} LevelSettingsUndo(levelP.getPointer(), LevelSettingsUndo::DpiType,}
\DoxyCodeLine{01351                               oldPolicy, LevelProperties::DP\_CustomDpi));}
\DoxyCodeLine{01352     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} LevelSettingsUndo(}
\DoxyCodeLine{01353         levelP.getPointer(), LevelSettingsUndo::Dpi,}
\DoxyCodeLine{01354         QPointF(oldDpi.x, oldDpi.y), QPointF(dpi.x, dpi.y)));}
\DoxyCodeLine{01355   \}}
\DoxyCodeLine{01356   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01357   \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{01358   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{01359   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>notifyLevelChange();}
\DoxyCodeLine{01360 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_a74c137d17071e5c57c01080ae35c2df1}\label{class_level_settings_popup_a74c137d17071e5c57c01080ae35c2df1}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!showEvent@{showEvent}}
\index{showEvent@{showEvent}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{showEvent()}{showEvent()}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::show\+Event (\begin{DoxyParamCaption}\item[{QShow\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00545                                                 \{}
\DoxyCodeLine{00546   \textcolor{keywordtype}{bool} ret =}
\DoxyCodeLine{00547       connect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentSelection(),}
\DoxyCodeLine{00548               SIGNAL(selectionSwitched(\mbox{\hyperlink{class_t_selection}{TSelection}} *, \mbox{\hyperlink{class_t_selection}{TSelection}} *)), \textcolor{keyword}{this},}
\DoxyCodeLine{00549               SLOT(onSelectionSwitched(\mbox{\hyperlink{class_t_selection}{TSelection}} *, \mbox{\hyperlink{class_t_selection}{TSelection}} *)));}
\DoxyCodeLine{00550   ret = ret \&\& connect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentSelection(),}
\DoxyCodeLine{00551                        SIGNAL(selectionChanged(\mbox{\hyperlink{class_t_selection}{TSelection}} *)),}
\DoxyCodeLine{00552                        SLOT(\mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}()));}
\DoxyCodeLine{00553 }
\DoxyCodeLine{00554   \mbox{\hyperlink{class_cast_selection}{CastSelection}} *castSelection = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_cast_selection}{CastSelection}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{00555       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>getSelection());}
\DoxyCodeLine{00556   \textcolor{keywordflow}{if} (castSelection)}
\DoxyCodeLine{00557     ret = ret \&\& connect(castSelection, SIGNAL(itemSelectionChanged()), \textcolor{keyword}{this},}
\DoxyCodeLine{00558                          SLOT(onCastSelectionChanged()));}
\DoxyCodeLine{00559 }
\DoxyCodeLine{00560   \textcolor{comment}{// update level settings after cleanup by this connection}}
\DoxyCodeLine{00561   ret = ret \&\& connect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentScene(),}
\DoxyCodeLine{00562                        SIGNAL(sceneChanged()), SLOT(onSceneChanged()));}
\DoxyCodeLine{00563   ret = ret \&\& connect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentScene(),}
\DoxyCodeLine{00564                        SIGNAL(preferenceChanged(\textcolor{keyword}{const} QString \&)),}
\DoxyCodeLine{00565                        SLOT(onPreferenceChanged(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00566 }
\DoxyCodeLine{00567   assert(ret);}
\DoxyCodeLine{00568   \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{00569   onPreferenceChanged(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00570 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}\label{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!updateLevelSettings@{updateLevelSettings}}
\index{updateLevelSettings@{updateLevelSettings}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{updateLevelSettings}{updateLevelSettings}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::update\+Level\+Settings (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

Update popup value. Take current level and act on level type set popup value. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00764                                              \{}
\DoxyCodeLine{00765   \mbox{\hyperlink{class_t_app}{TApp}} *app = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}();}
\DoxyCodeLine{00766   m\_selectedLevels.clear();}
\DoxyCodeLine{00767   \mbox{\hyperlink{class_cast_selection}{CastSelection}} *castSelection =}
\DoxyCodeLine{00768       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_cast_selection}{CastSelection}} *\textcolor{keyword}{>}(app-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>getSelection());}
\DoxyCodeLine{00769   \mbox{\hyperlink{class_t_cell_selection}{TCellSelection}} *cellSelection = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_cell_selection}{TCellSelection}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{00770       app-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>getSelection());}
\DoxyCodeLine{00771   \mbox{\hyperlink{class_t_column_selection}{TColumnSelection}} *columnSelection = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_column_selection}{TColumnSelection}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{00772       app-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>getSelection());}
\DoxyCodeLine{00773   \mbox{\hyperlink{class_fx_selection}{FxSelection}} *fxSelection =}
\DoxyCodeLine{00774       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_fx_selection}{FxSelection}} *\textcolor{keyword}{>}(app-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>getSelection());}
\DoxyCodeLine{00775   \textcolor{comment}{// -\/ -\/ -\/ Cell Selection}}
\DoxyCodeLine{00776   \textcolor{keywordflow}{if} (cellSelection) \{}
\DoxyCodeLine{00777     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *currentXsheet = app-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{00778     \textcolor{keywordflow}{if} (currentXsheet \&\& !cellSelection-\/>isEmpty()) \{}
\DoxyCodeLine{00779       \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{00780       cellSelection-\/>getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{00781       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} c = c0; c <= c1; c++)}
\DoxyCodeLine{00782         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} r = r0; r <= r1; r++)}
\DoxyCodeLine{00783           \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} level = currentXsheet-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r, c).m\_level)}
\DoxyCodeLine{00784             m\_selectedLevels.insert(level);}
\DoxyCodeLine{00785     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00786       m\_selectedLevels.insert(app-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getLevel());}
\DoxyCodeLine{00787   \}}
\DoxyCodeLine{00788   \textcolor{comment}{// -\/ -\/ -\/ Column Selection}}
\DoxyCodeLine{00789   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (columnSelection) \{}
\DoxyCodeLine{00790     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *currentXsheet = app-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{00791     \textcolor{keywordflow}{if} (currentXsheet \&\& !columnSelection-\/>isEmpty()) \{}
\DoxyCodeLine{00792       \textcolor{keywordtype}{int} sceneLength             = currentXsheet-\/>\mbox{\hyperlink{class_t_xsheet_a12a62da7dc04395088112e492d73374f}{getFrameCount}}();}
\DoxyCodeLine{00793       std::set<int> columnIndices = columnSelection-\/>getIndices();}
\DoxyCodeLine{00794       std::set<int>::iterator it;}
\DoxyCodeLine{00795       \textcolor{keywordflow}{for} (it = columnIndices.begin(); it != columnIndices.end(); ++it) \{}
\DoxyCodeLine{00796         \textcolor{keywordtype}{int} columnIndex = *it;}
\DoxyCodeLine{00797         \textcolor{keywordtype}{int} r0, r1;}
\DoxyCodeLine{00798         currentXsheet-\/>\mbox{\hyperlink{class_t_xsheet_a26850469fb0f2886b717479050c32be2}{getCellRange}}(columnIndex, r0, r1);}
\DoxyCodeLine{00799         \textcolor{keywordflow}{if} (r1 < 0) \textcolor{keywordflow}{continue};  \textcolor{comment}{// skip empty column}}
\DoxyCodeLine{00800         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} r = r0; r <= r1; r++)}
\DoxyCodeLine{00801           \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} level = currentXsheet-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r, columnIndex).m\_level)}
\DoxyCodeLine{00802             m\_selectedLevels.insert(level);}
\DoxyCodeLine{00803       \}}
\DoxyCodeLine{00804     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00805       m\_selectedLevels.insert(app-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getLevel());}
\DoxyCodeLine{00806   \}}
\DoxyCodeLine{00807   \textcolor{comment}{// -\/ -\/ -\/ Cast Selection}}
\DoxyCodeLine{00808   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (castSelection) \{}
\DoxyCodeLine{00809     std::vector<TXshLevel *> levels;}
\DoxyCodeLine{00810     castSelection-\/>getSelectedLevels(levels);}
\DoxyCodeLine{00811     \textcolor{keywordflow}{for} (\mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level : levels) m\_selectedLevels.insert(level);}
\DoxyCodeLine{00812   \}}
\DoxyCodeLine{00813   \textcolor{comment}{// -\/ -\/ -\/ Schematic Nodes Selection}}
\DoxyCodeLine{00814   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (fxSelection) \{}
\DoxyCodeLine{00815     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *currentXsheet  = app-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{00816     QList<TFxP> selectedFxs = fxSelection-\/>getFxs();}
\DoxyCodeLine{00817     \textcolor{keywordflow}{if} (currentXsheet \&\& !selectedFxs.isEmpty()) \{}
\DoxyCodeLine{00818       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} f = 0; f < selectedFxs.size(); f++) \{}
\DoxyCodeLine{00819         \mbox{\hyperlink{class_t_level_column_fx}{TLevelColumnFx}} *lcfx =}
\DoxyCodeLine{00820             \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_level_column_fx}{TLevelColumnFx}} *\textcolor{keyword}{>}(selectedFxs.at(f).getPointer());}
\DoxyCodeLine{00821         \textcolor{keywordflow}{if} (lcfx) \{}
\DoxyCodeLine{00822           \textcolor{keywordtype}{int} r0, r1;}
\DoxyCodeLine{00823           \textcolor{keywordtype}{int} firstRow =}
\DoxyCodeLine{00824               lcfx-\/>getXshColumn()-\/>getCellColumn()-\/>\mbox{\hyperlink{class_t_xsh_cell_column_ab684089dcfd22454e7cbad249a04e29c}{getRange}}(r0, r1);}
\DoxyCodeLine{00825           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} r = r0; r <= r1; r++)}
\DoxyCodeLine{00826             \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} level =}
\DoxyCodeLine{00827                     lcfx-\/>getXshColumn()-\/>getCellColumn()-\/>\mbox{\hyperlink{class_t_xsh_cell_column_aa747a68efe54d336d5d07dd8af451908}{getCell}}(r).m\_level)}
\DoxyCodeLine{00828               m\_selectedLevels.insert(level);}
\DoxyCodeLine{00829         \}}
\DoxyCodeLine{00830       \}}
\DoxyCodeLine{00831       \textcolor{keywordflow}{if} (m\_selectedLevels.isEmpty())}
\DoxyCodeLine{00832         m\_selectedLevels.insert(app-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getLevel());}
\DoxyCodeLine{00833     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00834       m\_selectedLevels.insert(app-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getLevel());}
\DoxyCodeLine{00835   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00836     m\_selectedLevels.insert(app-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getLevel());}
\DoxyCodeLine{00837 }
\DoxyCodeLine{00838   \textcolor{comment}{// Unite flags, Remove unsupported items}}
\DoxyCodeLine{00839   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} levelTypeFlag         = 0;}
\DoxyCodeLine{00840   QSet<TXshLevelP>::iterator lvl\_itr = m\_selectedLevels.begin();}
\DoxyCodeLine{00841   \textcolor{keywordflow}{while} (lvl\_itr != m\_selectedLevels.end()) \{}
\DoxyCodeLine{00842     SelectedLevelType type = getType(*lvl\_itr);}
\DoxyCodeLine{00843     \textcolor{keywordflow}{if} (type == None || type == Others)}
\DoxyCodeLine{00844       lvl\_itr = m\_selectedLevels.erase(lvl\_itr);}
\DoxyCodeLine{00845     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00846       levelTypeFlag |= type;}
\DoxyCodeLine{00847       ++lvl\_itr;}
\DoxyCodeLine{00848     \}}
\DoxyCodeLine{00849   \}}
\DoxyCodeLine{00850   \textcolor{keywordflow}{if} (m\_selectedLevels.count() >= 2)}
\DoxyCodeLine{00851     levelTypeFlag |= MultiSelection;}
\DoxyCodeLine{00852   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_selectedLevels.isEmpty())}
\DoxyCodeLine{00853     levelTypeFlag |= NoSelection;}
\DoxyCodeLine{00854 }
\DoxyCodeLine{00855   \textcolor{comment}{// Enable / Disable all widgets}}
\DoxyCodeLine{00856   QMap<QWidget *, unsigned int>::iterator w\_itr = m\_activateFlags.begin();}
\DoxyCodeLine{00857   \textcolor{keywordflow}{while} (w\_itr != m\_activateFlags.end()) \{}
\DoxyCodeLine{00858     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} activateFlag = w\_itr.value();}
\DoxyCodeLine{00859     w\_itr.key()-\/>setEnabled((levelTypeFlag \& activateFlag) == levelTypeFlag);}
\DoxyCodeLine{00860     ++w\_itr;}
\DoxyCodeLine{00861   \}}
\DoxyCodeLine{00862 }
\DoxyCodeLine{00863   \textcolor{comment}{// Gather values}}
\DoxyCodeLine{00864   \mbox{\hyperlink{struct_level_settings_values}{LevelSettingsValues}} values;}
\DoxyCodeLine{00865   lvl\_itr = m\_selectedLevels.begin();}
\DoxyCodeLine{00866   \textcolor{keywordflow}{while} (lvl\_itr != m\_selectedLevels.end()) \{}
\DoxyCodeLine{00867     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} level            = *lvl\_itr;}
\DoxyCodeLine{00868     \textcolor{keywordtype}{bool} isFirst                = (lvl\_itr == m\_selectedLevels.begin());}
\DoxyCodeLine{00869     \mbox{\hyperlink{struct_level_settings_values}{LevelSettingsValues}} new\_val = getValues(level);}
\DoxyCodeLine{00870 }
\DoxyCodeLine{00871     uniteValue(values.name, new\_val.name, isFirst);}
\DoxyCodeLine{00872     uniteValue(values.path, new\_val.path, isFirst);}
\DoxyCodeLine{00873     uniteValue(values.scanPath, new\_val.scanPath, isFirst);}
\DoxyCodeLine{00874     uniteValue(values.typeStr, new\_val.typeStr, isFirst);}
\DoxyCodeLine{00875     uniteValue(values.dpiType, new\_val.dpiType, isFirst);}
\DoxyCodeLine{00876     uniteValue(values.dpi, new\_val.dpi, isFirst);}
\DoxyCodeLine{00877     uniteValue(values.width, new\_val.width, isFirst);}
\DoxyCodeLine{00878     uniteValue(values.height, new\_val.height, isFirst);}
\DoxyCodeLine{00879     uniteValue(values.imageDpi, new\_val.imageDpi, isFirst);}
\DoxyCodeLine{00880     uniteValue(values.imageRes, new\_val.imageRes, isFirst);}
\DoxyCodeLine{00881     uniteValue(values.doPremulti, new\_val.doPremulti, isFirst);}
\DoxyCodeLine{00882     uniteValue(values.whiteTransp, new\_val.whiteTransp, isFirst);}
\DoxyCodeLine{00883     uniteValue(values.doAntialias, new\_val.doAntialias, isFirst);}
\DoxyCodeLine{00884     uniteValue(values.softness, new\_val.softness, isFirst);}
\DoxyCodeLine{00885     uniteValue(values.subsampling, new\_val.subsampling, isFirst);}
\DoxyCodeLine{00886     uniteValue(values.isDirty, new\_val.isDirty, isFirst);}
\DoxyCodeLine{00887 }
\DoxyCodeLine{00888     ++lvl\_itr;}
\DoxyCodeLine{00889   \}}
\DoxyCodeLine{00890 }
\DoxyCodeLine{00891   m\_nameFld-\/>setText(values.name);}
\DoxyCodeLine{00892   m\_pathFld-\/>setPath(values.path);}
\DoxyCodeLine{00893   m\_scanPathFld-\/>setPath(values.scanPath);}
\DoxyCodeLine{00894   m\_typeLabel-\/>setText(values.typeStr);}
\DoxyCodeLine{00895   m\_dpiTypeOm-\/>setCurrentIndex(values.dpiType);}
\DoxyCodeLine{00896   m\_dpiFld-\/>setText(dpiToString(values.dpi));}
\DoxyCodeLine{00897   \textcolor{keywordflow}{if} (values.width <= 0.0) \{}
\DoxyCodeLine{00898     m\_widthFld-\/>setValue(0.0);}
\DoxyCodeLine{00899     m\_widthFld-\/>setText((values.width < 0.0) ? tr(\textcolor{stringliteral}{"{}[Various]"{}}) : tr(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00900   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00901     m\_widthFld-\/>setValue(values.width);}
\DoxyCodeLine{00902   \textcolor{keywordflow}{if} (values.height <= 0.0) \{}
\DoxyCodeLine{00903     m\_heightFld-\/>setValue(0.0);}
\DoxyCodeLine{00904     m\_heightFld-\/>setText((values.height < 0.0) ? tr(\textcolor{stringliteral}{"{}[Various]"{}}) : tr(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00905   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00906     m\_heightFld-\/>setValue(values.height);}
\DoxyCodeLine{00907 }
\DoxyCodeLine{00908   m\_cameraDpiLabel-\/>setText(dpiToString(getCurrentCameraDpi()));}
\DoxyCodeLine{00909   m\_imageDpiLabel-\/>setText(values.imageDpi);}
\DoxyCodeLine{00910   m\_imageResLabel-\/>setText(values.imageRes);}
\DoxyCodeLine{00911 }
\DoxyCodeLine{00912   m\_doPremultiply-\/>setCheckState(values.doPremulti);}
\DoxyCodeLine{00913   m\_whiteTransp-\/>setCheckState(values.whiteTransp);}
\DoxyCodeLine{00914   m\_doAntialias-\/>setCheckState(values.doAntialias);}
\DoxyCodeLine{00915   \textcolor{keywordflow}{if} (values.softness < 0)}
\DoxyCodeLine{00916     m\_antialiasSoftness-\/>setText(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00917   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00918     m\_antialiasSoftness-\/>\mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit_ac16f2b6d59faec8c3f73944f01e46f53}{setValue}}(values.softness);}
\DoxyCodeLine{00919   \textcolor{keywordflow}{if} (values.subsampling < 0)}
\DoxyCodeLine{00920     m\_subsamplingFld-\/>setText(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00921   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00922     m\_subsamplingFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit_ac16f2b6d59faec8c3f73944f01e46f53}{setValue}}(values.subsampling);}
\DoxyCodeLine{00923   \textcolor{comment}{// disable the softness field when the antialias is not active}}
\DoxyCodeLine{00924   \textcolor{keywordflow}{if} (m\_doAntialias-\/>checkState() != Qt::Checked)}
\DoxyCodeLine{00925     m\_antialiasSoftness-\/>setDisabled(\textcolor{keyword}{true});}
\DoxyCodeLine{00926   \textcolor{comment}{// disable the subsampling field when dirty level is selected}}
\DoxyCodeLine{00927   \textcolor{keywordflow}{if} (values.isDirty != Qt::Unchecked) m\_subsamplingFld-\/>setDisabled(\textcolor{keyword}{true});}
\DoxyCodeLine{00928 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00085}{TXsh\+Cell\+Column\+::get\+Cell()}}, \mbox{\hyperlink{l00233}{TXsheet\+::get\+Cell()}}, \mbox{\hyperlink{l00462}{TXsheet\+::get\+Cell\+Range()}}, \mbox{\hyperlink{l00122}{TApp\+::get\+Current\+Level()}}, \mbox{\hyperlink{l00134}{TApp\+::get\+Current\+Selection()}}, \mbox{\hyperlink{l00110}{TApp\+::get\+Current\+Xsheet()}}, \mbox{\hyperlink{l00229}{TXsheet\+::get\+Frame\+Count()}}, \mbox{\hyperlink{l00039}{TXsh\+Cell\+Column\+::get\+Range()}}, \mbox{\hyperlink{l00215}{TApp\+::instance()}}, and \mbox{\hyperlink{l00141}{DVGui\+::\+Int\+Line\+Edit\+::set\+Value()}}.

\mbox{\Hypertarget{class_level_settings_popup_a65f135312bebdf034a3d7c6fb9025759}\label{class_level_settings_popup_a65f135312bebdf034a3d7c6fb9025759}} 
\index{LevelSettingsPopup@{LevelSettingsPopup}!useCameraDpi@{useCameraDpi}}
\index{useCameraDpi@{useCameraDpi}!LevelSettingsPopup@{LevelSettingsPopup}}
\doxysubsubsection{\texorpdfstring{useCameraDpi}{useCameraDpi}}
{\footnotesize\ttfamily void Level\+Settings\+Popup\+::use\+Camera\+Dpi (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01404                                       \{}
\DoxyCodeLine{01405   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01406   QSetIterator<TXshLevelP> levelItr(m\_selectedLevels);}
\DoxyCodeLine{01407   \textcolor{keywordflow}{while} (levelItr.hasNext()) \{}
\DoxyCodeLine{01408     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} levelP   = levelItr.next();}
\DoxyCodeLine{01409     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshSimpleLevelP}} sl = levelP-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01410     \textcolor{keywordflow}{if} (!sl) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01411     \mbox{\hyperlink{class_level_properties}{LevelProperties}} *prop                = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}();}
\DoxyCodeLine{01412     \mbox{\hyperlink{class_level_properties_a39428db69e55fec37017a264312b61d2}{LevelProperties::DpiPolicy}} oldPolicy = prop-\/>\mbox{\hyperlink{class_level_properties_af80d4404a0da97a8e45d0947f9bd7278}{getDpiPolicy}}();}
\DoxyCodeLine{01413     prop-\/>\mbox{\hyperlink{class_level_properties_aef6e555a773c2f69d2089dc9c009f8be}{setDpiPolicy}}(LevelProperties::DP\_CustomDpi);}
\DoxyCodeLine{01414     \mbox{\hyperlink{class_t_point_t}{TPointD}} oldDpi = prop-\/>\mbox{\hyperlink{class_level_properties_a744228a911310bc962ce76315c9ab2b1}{getDpi}}();}
\DoxyCodeLine{01415     \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi    = getCurrentCameraDpi();}
\DoxyCodeLine{01416     prop-\/>\mbox{\hyperlink{class_level_properties_abdaea012fce05b1617350a174790f473}{setDpi}}(dpi);}
\DoxyCodeLine{01417 }
\DoxyCodeLine{01418     TUndoManager::manager()-\/>add(}
\DoxyCodeLine{01419         \textcolor{keyword}{new} LevelSettingsUndo(levelP.getPointer(), LevelSettingsUndo::DpiType,}
\DoxyCodeLine{01420                               oldPolicy, LevelProperties::DP\_CustomDpi));}
\DoxyCodeLine{01421     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} LevelSettingsUndo(}
\DoxyCodeLine{01422         levelP.getPointer(), LevelSettingsUndo::Dpi,}
\DoxyCodeLine{01423         QPointF(oldDpi.x, oldDpi.y), QPointF(dpi.x, dpi.y)));}
\DoxyCodeLine{01424   \}}
\DoxyCodeLine{01425   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01426   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{01427   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>notifyLevelChange();}
\DoxyCodeLine{01428 }
\DoxyCodeLine{01429   \mbox{\hyperlink{class_level_settings_popup_a05fb70f80029d75c8889f76d33725442}{updateLevelSettings}}();}
\DoxyCodeLine{01430 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/levelsettingspopup.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/levelsettingspopup.\+cpp\end{DoxyCompactItemize}
