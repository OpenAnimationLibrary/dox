\hypertarget{class_drag_selection_tool_1_1_scale}{}\doxysection{Drag\+Selection\+Tool\+::Scale Class Reference}
\label{class_drag_selection_tool_1_1_scale}\index{DragSelectionTool::Scale@{DragSelectionTool::Scale}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a747f3b4a703b5160b47d2caa796e16bc}{Scale}} (\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool}{Deform\+Tool}} $\ast$deform\+Tool, Scale\+Type type)
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a7829c545bd80625817e2c1b9c30b035c}{get\+Intersection\+Point}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&point0, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&point1, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&point2, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&point3, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&p) const
\item 
\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{Four\+Points}} \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a4877f41d2fd019c78e2e4113604c73b4}{bbox\+Scale}} (int index, const \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{Four\+Points}} \&old\+Bbox, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos)
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a9819b3b49b9e491c33b3a7a7a308962d}{compute\+Scale\+Value}} (int moved\+Index, const \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{Four\+Points}} new\+Bbox)
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_ac7378bf104a5ad8ea6e8297062f2af80}{get\+Scaled\+Point}} (int index, const \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{Four\+Points}} \&old\+Bbox, const \mbox{\hyperlink{class_t_point_t}{TPointD}} scale\+Value, const \mbox{\hyperlink{class_t_point_t}{TPointD}} center)
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a2dd5fd4e116e8290b5b7da7722ce3a47}{get\+New\+Center}} (int index, const \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{Four\+Points}} bbox, const \mbox{\hyperlink{class_t_point_t}{TPointD}} scale\+Value)
\item 
\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{Four\+Points}} \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_ac9eb63db2ed2bc19b974001b01813327}{bbox\+Scale\+In\+Center}} (int index, const \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{Four\+Points}} \&old\+Bbox, const \mbox{\hyperlink{class_t_point_t}{TPointD}} new\+Pos, \mbox{\hyperlink{class_t_point_t}{TPointD}} \&scale\+Value, const \mbox{\hyperlink{class_t_point_t}{TPointD}} center, bool recompute\+Scale\+Value)
\item 
void \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a55fed4ff7ee00ad12ae145c1e00309d0}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e)
\item 
void \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_ab11a0f77fcf1457e92ebb56bb625ed31}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e)
\item 
void \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a8d3423617ec645cd88530dfb1de41eb4}{left\+Button\+Up}} ()
\item 
std\+::vector$<$ \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{Four\+Points}} $>$ \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_aa896d642196df4221eaaf1bdfc4c3e22}{get\+Start\+Bboxs}} () const
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a0a9ca37a4b1451bf951bcf32e80ded4e}{get\+Start\+Center}} () const
\item 
bool \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_aef04207dd140cf7f48b15975656d3daf}{scale\+In\+Center}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
Scale\+Type \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_ab0e407626f96341af9e4cfd1436975b3}{m\+\_\+type}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_scale_a747f3b4a703b5160b47d2caa796e16bc}\label{class_drag_selection_tool_1_1_scale_a747f3b4a703b5160b47d2caa796e16bc}} 
\index{DragSelectionTool::Scale@{DragSelectionTool::Scale}!Scale@{Scale}}
\index{Scale@{Scale}!DragSelectionTool::Scale@{DragSelectionTool::Scale}}
\doxysubsubsection{\texorpdfstring{Scale()}{Scale()}}
{\footnotesize\ttfamily Drag\+Selection\+Tool\+::\+Scale\+::\+Scale (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool}{Deform\+Tool}} $\ast$}]{deform\+Tool,  }\item[{Scale\+Type}]{type }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00558     : m\_deformTool(deformTool)}
\DoxyCodeLine{00559     , m\_startCenter(deformTool-\/>getTool()-\/>getCenter())}
\DoxyCodeLine{00560     , m\_type(type)}
\DoxyCodeLine{00561     , m\_isShiftPressed(\textcolor{keyword}{false})}
\DoxyCodeLine{00562     , m\_isAltPressed(\textcolor{keyword}{false})}
\DoxyCodeLine{00563     , m\_scaleInCenter(\textcolor{keyword}{true}) \{}
\DoxyCodeLine{00564   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00565   \textcolor{keywordflow}{for} (i = 0; i < (int)m\_deformTool-\/>getTool()-\/>getBBoxsCount(); i++)}
\DoxyCodeLine{00566     m\_startBboxs.push\_back(m\_deformTool-\/>getTool()-\/>getBBox(i));}
\DoxyCodeLine{00567 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_scale_a4877f41d2fd019c78e2e4113604c73b4}\label{class_drag_selection_tool_1_1_scale_a4877f41d2fd019c78e2e4113604c73b4}} 
\index{DragSelectionTool::Scale@{DragSelectionTool::Scale}!bboxScale@{bboxScale}}
\index{bboxScale@{bboxScale}!DragSelectionTool::Scale@{DragSelectionTool::Scale}}
\doxysubsubsection{\texorpdfstring{bboxScale()}{bboxScale()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{Drag\+Selection\+Tool\+::\+Four\+Points}} Drag\+Selection\+Tool\+::\+Scale\+::bbox\+Scale (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{const \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{Four\+Points}} \&}]{old\+Bbox,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos }\end{DoxyParamCaption})}

\mbox{\hyperlink{class_drag_selection_tool_1_1_scale}{Scale}} {\bfseries{index}} point of {\bfseries{bbox}} in {\bfseries{pos}} and return scaled bbox. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00608                                                               \{}
\DoxyCodeLine{00609   \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{FourPoints}} bbox = oldBbox;}
\DoxyCodeLine{00610   \mbox{\hyperlink{class_t_point_t}{TPointD}} p       = oldBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(index);}
\DoxyCodeLine{00611   \textcolor{keywordtype}{int} nextIndex   = m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_a6490738faac80b56fe70aa31f649de51}{getNextVertexIndex}}(index);}
\DoxyCodeLine{00612   \mbox{\hyperlink{class_t_point_t}{TPointD}} nextP   = oldBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(nextIndex);}
\DoxyCodeLine{00613   \textcolor{keywordtype}{int} nextIndex2  = m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_a6490738faac80b56fe70aa31f649de51}{getNextVertexIndex}}(nextIndex);}
\DoxyCodeLine{00614   \mbox{\hyperlink{class_t_point_t}{TPointD}} next2P  = oldBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(nextIndex2);}
\DoxyCodeLine{00615   \mbox{\hyperlink{class_t_point_t}{TPointD}} newP    = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a7829c545bd80625817e2c1b9c30b035c}{getIntersectionPoint}}(next2P, nextP, nextP, p, pos);}
\DoxyCodeLine{00616   bbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a687f8601ad1d19e625424fef263c7b50}{setPoint}}(nextIndex, newP);}
\DoxyCodeLine{00617 }
\DoxyCodeLine{00618   \textcolor{keywordtype}{int} beforeIndex  = m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_adada477f3f2f940c7d3e3afbf52f078b}{getBeforeVertexIndex}}(index);}
\DoxyCodeLine{00619   \mbox{\hyperlink{class_t_point_t}{TPointD}} beforeP  = oldBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(beforeIndex);}
\DoxyCodeLine{00620   \textcolor{keywordtype}{int} before2Index = m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_adada477f3f2f940c7d3e3afbf52f078b}{getBeforeVertexIndex}}(beforeIndex);}
\DoxyCodeLine{00621   \mbox{\hyperlink{class_t_point_t}{TPointD}} before2P = oldBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(before2Index);}
\DoxyCodeLine{00622   newP             = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a7829c545bd80625817e2c1b9c30b035c}{getIntersectionPoint}}(before2P, beforeP, beforeP, p, pos);}
\DoxyCodeLine{00623   bbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a687f8601ad1d19e625424fef263c7b50}{setPoint}}(beforeIndex, newP);}
\DoxyCodeLine{00624 }
\DoxyCodeLine{00625   \textcolor{keywordflow}{if} (index < 4) bbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a687f8601ad1d19e625424fef263c7b50}{setPoint}}(index, pos);}
\DoxyCodeLine{00626 }
\DoxyCodeLine{00627   \textcolor{keywordflow}{return} bbox;}
\DoxyCodeLine{00628 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00122}{Drag\+Selection\+Tool\+::\+Four\+Points\+::get\+Point()}}, and \mbox{\hyperlink{l00144}{Drag\+Selection\+Tool\+::\+Four\+Points\+::set\+Point()}}.

\mbox{\Hypertarget{class_drag_selection_tool_1_1_scale_ac9eb63db2ed2bc19b974001b01813327}\label{class_drag_selection_tool_1_1_scale_ac9eb63db2ed2bc19b974001b01813327}} 
\index{DragSelectionTool::Scale@{DragSelectionTool::Scale}!bboxScaleInCenter@{bboxScaleInCenter}}
\index{bboxScaleInCenter@{bboxScaleInCenter}!DragSelectionTool::Scale@{DragSelectionTool::Scale}}
\doxysubsubsection{\texorpdfstring{bboxScaleInCenter()}{bboxScaleInCenter()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{Four\+Points}} Drag\+Selection\+Tool\+::\+Scale\+::bbox\+Scale\+In\+Center (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{const \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{Four\+Points}} \&}]{old\+Bbox,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}}}]{new\+Pos,  }\item[{\mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{scale\+Value,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}}}]{center,  }\item[{bool}]{recompute\+Scale\+Value }\end{DoxyParamCaption})}

\mbox{\hyperlink{class_drag_selection_tool_1_1_scale}{Scale}} {\bfseries{bbox}} {\bfseries{index}} point in pos and if {\bfseries{m\+\_\+scale\+In\+Center}} is true scale in {\bfseries{center}} {\bfseries{bbox}} symmetric point; compute scale\+Value. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00749                                                                          \{}
\DoxyCodeLine{00750   \mbox{\hyperlink{class_t_point_t}{TPointD}} oldp = oldBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(index);}
\DoxyCodeLine{00751   \textcolor{keywordflow}{if} (areAlmostEqual(oldp.x, newPos.x, 1e-\/2) \&\&}
\DoxyCodeLine{00752       areAlmostEqual(oldp.y, newPos.y, 1e-\/2))}
\DoxyCodeLine{00753     \textcolor{keywordflow}{return} oldBbox;}
\DoxyCodeLine{00754   \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{FourPoints}} bbox = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a4877f41d2fd019c78e2e4113604c73b4}{bboxScale}}(index, oldBbox, newPos);}
\DoxyCodeLine{00755   \textcolor{keywordflow}{if} (recomputeScaleValue) scaleValue = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a9819b3b49b9e491c33b3a7a7a308962d}{computeScaleValue}}(index, bbox);}
\DoxyCodeLine{00756   \textcolor{keywordflow}{if} (!m\_scaleInCenter) \textcolor{keywordflow}{return} bbox;}
\DoxyCodeLine{00757   \textcolor{keywordtype}{int} symmetricIndex = m\_deformTool-\/>getSymmetricPointIndex(index);}
\DoxyCodeLine{00758   \textcolor{comment}{// Gestisco il caso particolare in cui uno dei fattori di scalatura e' -\/100\% e}}
\DoxyCodeLine{00759   \textcolor{comment}{// center e' al centro della bbox}}
\DoxyCodeLine{00760   \textcolor{keywordflow}{if} (bbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(index) == oldBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(symmetricIndex)) \{}
\DoxyCodeLine{00761     bbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a687f8601ad1d19e625424fef263c7b50}{setPoint}}(symmetricIndex, oldBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(index));}
\DoxyCodeLine{00762     bbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a687f8601ad1d19e625424fef263c7b50}{setPoint}}(m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_a7a5b5ea5f012172eede8ffe0939bc27b}{getNextPointIndex}}(symmetricIndex),}
\DoxyCodeLine{00763                   oldBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_af6ef34f7039792c1a451403cf227ccbc}{getBeforePointIndex}}(index)));}
\DoxyCodeLine{00764     bbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a687f8601ad1d19e625424fef263c7b50}{setPoint}}(m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_af6ef34f7039792c1a451403cf227ccbc}{getBeforePointIndex}}(symmetricIndex),}
\DoxyCodeLine{00765                   oldBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_a7a5b5ea5f012172eede8ffe0939bc27b}{getNextPointIndex}}(index)));}
\DoxyCodeLine{00766   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00767     bbox =}
\DoxyCodeLine{00768         \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a4877f41d2fd019c78e2e4113604c73b4}{bboxScale}}(symmetricIndex, bbox,}
\DoxyCodeLine{00769                   \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_ac7378bf104a5ad8ea6e8297062f2af80}{getScaledPoint}}(symmetricIndex, oldBbox, scaleValue, center));}
\DoxyCodeLine{00770   \textcolor{keywordflow}{return} bbox;}
\DoxyCodeLine{00771 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00122}{Drag\+Selection\+Tool\+::\+Four\+Points\+::get\+Point()}}, and \mbox{\hyperlink{l00144}{Drag\+Selection\+Tool\+::\+Four\+Points\+::set\+Point()}}.



Referenced by \mbox{\hyperlink{l00417}{Drag\+Selection\+Tool\+::\+Raster\+Scale\+Tool\+::transform()}}.

\mbox{\Hypertarget{class_drag_selection_tool_1_1_scale_a9819b3b49b9e491c33b3a7a7a308962d}\label{class_drag_selection_tool_1_1_scale_a9819b3b49b9e491c33b3a7a7a308962d}} 
\index{DragSelectionTool::Scale@{DragSelectionTool::Scale}!computeScaleValue@{computeScaleValue}}
\index{computeScaleValue@{computeScaleValue}!DragSelectionTool::Scale@{DragSelectionTool::Scale}}
\doxysubsubsection{\texorpdfstring{computeScaleValue()}{computeScaleValue()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Drag\+Selection\+Tool\+::\+Scale\+::compute\+Scale\+Value (\begin{DoxyParamCaption}\item[{int}]{moved\+Index,  }\item[{const \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{Four\+Points}}}]{new\+Bbox }\end{DoxyParamCaption})}

Compute new scale value take care of new position of {\bfseries{moved\+Index}} point in {\bfseries{bbox}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00633                                                                               \{}
\DoxyCodeLine{00634   \mbox{\hyperlink{class_t_point_t}{TPointD}} p = m\_startBboxs[0].getPoint(movedIndex);}
\DoxyCodeLine{00635   \textcolor{keywordflow}{if} (movedIndex < 4) \{}
\DoxyCodeLine{00636     \textcolor{keywordtype}{int} beforeIndex = m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_af6ef34f7039792c1a451403cf227ccbc}{getBeforePointIndex}}(movedIndex);}
\DoxyCodeLine{00637     \textcolor{keywordtype}{int} nextIndex   = m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_a7a5b5ea5f012172eede8ffe0939bc27b}{getNextPointIndex}}(movedIndex);}
\DoxyCodeLine{00638     \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{FourPoints}} bbox = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a4877f41d2fd019c78e2e4113604c73b4}{bboxScale}}(nextIndex, newBbox, p);}
\DoxyCodeLine{00639     \mbox{\hyperlink{class_t_point_t}{TPointD}} scale1  = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a9819b3b49b9e491c33b3a7a7a308962d}{computeScaleValue}}(beforeIndex, bbox);}
\DoxyCodeLine{00640     bbox            = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a4877f41d2fd019c78e2e4113604c73b4}{bboxScale}}(beforeIndex, newBbox, p);}
\DoxyCodeLine{00641     \mbox{\hyperlink{class_t_point_t}{TPointD}} scale2  = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a9819b3b49b9e491c33b3a7a7a308962d}{computeScaleValue}}(nextIndex, bbox);}
\DoxyCodeLine{00642     \textcolor{keywordflow}{if} (movedIndex \% 2 == 0)}
\DoxyCodeLine{00643       \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_point_t}{TPointD}}(scale1.x, scale2.y);}
\DoxyCodeLine{00644     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00645       \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_point_t}{TPointD}}(scale2.x, scale1.y);}
\DoxyCodeLine{00646   \}}
\DoxyCodeLine{00647   \textcolor{keywordtype}{int} symmetricIndex = m\_deformTool-\/>getSymmetricPointIndex(movedIndex);}
\DoxyCodeLine{00648   \mbox{\hyperlink{class_t_point_t}{TPointD}} s          = m\_startBboxs[0].getPoint(symmetricIndex);}
\DoxyCodeLine{00649   \mbox{\hyperlink{class_t_point_t}{TPointD}} center     = m\_scaleInCenter ? m\_startCenter : s;}
\DoxyCodeLine{00650   \mbox{\hyperlink{class_t_point_t}{TPointD}} nearP =}
\DoxyCodeLine{00651       m\_startBboxs[0].getPoint(m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_af6ef34f7039792c1a451403cf227ccbc}{getBeforePointIndex}}(movedIndex));}
\DoxyCodeLine{00652   \mbox{\hyperlink{class_t_point_t}{TPointD}} pc   = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a7829c545bd80625817e2c1b9c30b035c}{getIntersectionPoint}}(nearP, p, p, s, center);}
\DoxyCodeLine{00653   \mbox{\hyperlink{class_t_point_t}{TPointD}} newp = newBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(movedIndex);}
\DoxyCodeLine{00654   \mbox{\hyperlink{class_t_point_t}{TPointD}} news = newBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(symmetricIndex);}
\DoxyCodeLine{00655   \mbox{\hyperlink{class_t_point_t}{TPointD}} newNearP =}
\DoxyCodeLine{00656       newBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_af6ef34f7039792c1a451403cf227ccbc}{getBeforePointIndex}}(movedIndex));}
\DoxyCodeLine{00657   \mbox{\hyperlink{class_t_point_t}{TPointD}} newpc = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a7829c545bd80625817e2c1b9c30b035c}{getIntersectionPoint}}(newNearP, newp, newp, news, center);}
\DoxyCodeLine{00658 }
\DoxyCodeLine{00659   \textcolor{keywordtype}{double} newD             = tdistance2(newpc, center);}
\DoxyCodeLine{00660   \textcolor{keywordtype}{double} oldD             = tdistance2(pc, center);}
\DoxyCodeLine{00661   \textcolor{keywordtype}{double} f                = sqrt(newD / oldD) -\/ 1;}
\DoxyCodeLine{00662   \mbox{\hyperlink{class_t_point_t}{TPointD}} startScaleValue = m\_deformTool-\/>getStartScaleValue();}
\DoxyCodeLine{00663   \textcolor{keywordflow}{if} (movedIndex \% 2 == 1) \{}
\DoxyCodeLine{00664     \textcolor{keywordtype}{double} \mbox{\hyperlink{namespacetcg_1_1numeric__ops_abd17f65a269ec069dc06d0f97e41fb77}{sign}} = (pc.x < center.x \&\& newpc.x < center.x) ||}
\DoxyCodeLine{00665                           (pc.x > center.x \&\& newpc.x > center.x)}
\DoxyCodeLine{00666                       ? 1}
\DoxyCodeLine{00667                       : -\/1;}
\DoxyCodeLine{00668     \textcolor{keywordtype}{double} x =}
\DoxyCodeLine{00669         startScaleValue.x == 0 ? f : startScaleValue.x + startScaleValue.x * f;}
\DoxyCodeLine{00670     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_point_t}{TPointD}}(sign * x, startScaleValue.y);}
\DoxyCodeLine{00671   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00672     \textcolor{keywordtype}{double} \mbox{\hyperlink{namespacetcg_1_1numeric__ops_abd17f65a269ec069dc06d0f97e41fb77}{sign}} = (pc.y < center.y \&\& newpc.y < center.y) ||}
\DoxyCodeLine{00673                           (pc.y > center.y \&\& newpc.y > center.y)}
\DoxyCodeLine{00674                       ? 1}
\DoxyCodeLine{00675                       : -\/1;}
\DoxyCodeLine{00676     \textcolor{keywordtype}{double} y =}
\DoxyCodeLine{00677         startScaleValue.y == 0 ? f : startScaleValue.y + startScaleValue.y * f;}
\DoxyCodeLine{00678     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_point_t}{TPointD}}(startScaleValue.x, sign * y);}
\DoxyCodeLine{00679   \}}
\DoxyCodeLine{00680 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00122}{Drag\+Selection\+Tool\+::\+Four\+Points\+::get\+Point()}}.

\mbox{\Hypertarget{class_drag_selection_tool_1_1_scale_a7829c545bd80625817e2c1b9c30b035c}\label{class_drag_selection_tool_1_1_scale_a7829c545bd80625817e2c1b9c30b035c}} 
\index{DragSelectionTool::Scale@{DragSelectionTool::Scale}!getIntersectionPoint@{getIntersectionPoint}}
\index{getIntersectionPoint@{getIntersectionPoint}!DragSelectionTool::Scale@{DragSelectionTool::Scale}}
\doxysubsubsection{\texorpdfstring{getIntersectionPoint()}{getIntersectionPoint()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Drag\+Selection\+Tool\+::\+Scale\+::get\+Intersection\+Point (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{point0,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{point1,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{point2,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{point3,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{p }\end{DoxyParamCaption}) const}

Return intersection between straight line in {\bfseries{point0}}, {\bfseries{point1}} and straight line for {\bfseries{p}} parallel to straight line in {\bfseries{point2}}, {\bfseries{point3}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00575                                                                                \{}
\DoxyCodeLine{00576   \textcolor{comment}{// Parametri della retta passante per point0, point1}}
\DoxyCodeLine{00577   \textcolor{keywordtype}{double} d1x = point0.x -\/ point1.x;}
\DoxyCodeLine{00578   \textcolor{keywordtype}{double} m1  = d1x == 0 ? 0 : (point0.y -\/ point1.y) / d1x;}
\DoxyCodeLine{00579   \textcolor{keywordtype}{double} q1  = point1.y -\/ m1 * point1.x;}
\DoxyCodeLine{00580   \textcolor{comment}{// Parametri della retta passante per p parallela alla retta passante per}}
\DoxyCodeLine{00581   \textcolor{comment}{// point1, point2}}
\DoxyCodeLine{00582   \textcolor{keywordtype}{double} d2x = point2.x -\/ point3.x;}
\DoxyCodeLine{00583   \textcolor{keywordtype}{double} m2  = d2x == 0 ? 0 : (point2.y -\/ point3.y) / d2x;}
\DoxyCodeLine{00584   \textcolor{keywordtype}{double} q2  = p.y -\/ m2 * p.x;}
\DoxyCodeLine{00585   \textcolor{comment}{// Calcolo l'intersezione tra le due rette}}
\DoxyCodeLine{00586   \textcolor{keywordtype}{double} x, y, m, q;}
\DoxyCodeLine{00587   \textcolor{keywordflow}{if} (d1x == 0) \{}
\DoxyCodeLine{00588     x = point0.x;}
\DoxyCodeLine{00589     m = m2;}
\DoxyCodeLine{00590     q = q2;}
\DoxyCodeLine{00591   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (d2x == 0) \{}
\DoxyCodeLine{00592     x = p.x;}
\DoxyCodeLine{00593     m = m1;}
\DoxyCodeLine{00594     q = q1;}
\DoxyCodeLine{00595   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00596     assert(m1 != m2);}
\DoxyCodeLine{00597     x = (q1 -\/ q2) / (m2 -\/ m1);}
\DoxyCodeLine{00598     m = m1;}
\DoxyCodeLine{00599     q = q1;}
\DoxyCodeLine{00600   \}}
\DoxyCodeLine{00601   y = m * x + q;}
\DoxyCodeLine{00602   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_point_t}{TPointD}}(x, y);}
\DoxyCodeLine{00603 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_scale_a2dd5fd4e116e8290b5b7da7722ce3a47}\label{class_drag_selection_tool_1_1_scale_a2dd5fd4e116e8290b5b7da7722ce3a47}} 
\index{DragSelectionTool::Scale@{DragSelectionTool::Scale}!getNewCenter@{getNewCenter}}
\index{getNewCenter@{getNewCenter}!DragSelectionTool::Scale@{DragSelectionTool::Scale}}
\doxysubsubsection{\texorpdfstring{getNewCenter()}{getNewCenter()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Drag\+Selection\+Tool\+::\+Scale\+::get\+New\+Center (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{const \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{Four\+Points}}}]{bbox,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}}}]{scale\+Value }\end{DoxyParamCaption})}

Compute new center after scale of {\bfseries{bbox}} {\bfseries{index}} point. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00720                                                                          \{}
\DoxyCodeLine{00721   \textcolor{keywordtype}{int} xIndex, yIndex;}
\DoxyCodeLine{00722   \textcolor{keywordflow}{if} (index < 4) \{}
\DoxyCodeLine{00723     xIndex = m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_af6ef34f7039792c1a451403cf227ccbc}{getBeforePointIndex}}(index);}
\DoxyCodeLine{00724     yIndex = m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_a7a5b5ea5f012172eede8ffe0939bc27b}{getNextPointIndex}}(index);}
\DoxyCodeLine{00725   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00726     xIndex =}
\DoxyCodeLine{00727         m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_a7a5b5ea5f012172eede8ffe0939bc27b}{getNextPointIndex}}(m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_a7a5b5ea5f012172eede8ffe0939bc27b}{getNextPointIndex}}(index));}
\DoxyCodeLine{00728     yIndex = index;}
\DoxyCodeLine{00729   \}}
\DoxyCodeLine{00730   \textcolor{keywordflow}{if} (index \% 2 == 1) std::swap(xIndex, yIndex);}
\DoxyCodeLine{00731   \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{FourPoints}} xBbox = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a4877f41d2fd019c78e2e4113604c73b4}{bboxScale}}(xIndex, bbox, m\_startCenter);}
\DoxyCodeLine{00732   \mbox{\hyperlink{class_t_point_t}{TPointD}} xCenter  = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_ac7378bf104a5ad8ea6e8297062f2af80}{getScaledPoint}}(}
\DoxyCodeLine{00733       xIndex, xBbox, scaleValue,}
\DoxyCodeLine{00734       xBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(m\_deformTool-\/>getSymmetricPointIndex(xIndex)));}
\DoxyCodeLine{00735   \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{FourPoints}} yBbox = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a4877f41d2fd019c78e2e4113604c73b4}{bboxScale}}(yIndex, bbox, m\_startCenter);}
\DoxyCodeLine{00736   \mbox{\hyperlink{class_t_point_t}{TPointD}} yCenter  = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_ac7378bf104a5ad8ea6e8297062f2af80}{getScaledPoint}}(}
\DoxyCodeLine{00737       yIndex, yBbox, scaleValue,}
\DoxyCodeLine{00738       yBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(m\_deformTool-\/>getSymmetricPointIndex(yIndex)));}
\DoxyCodeLine{00739   \mbox{\hyperlink{class_t_point_t}{TPointD}} in = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a7829c545bd80625817e2c1b9c30b035c}{getIntersectionPoint}}(bbox.getP00(), bbox.getP10(), bbox.getP10(),}
\DoxyCodeLine{00740                                     bbox.getP11(), xCenter);}
\DoxyCodeLine{00741   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a7829c545bd80625817e2c1b9c30b035c}{getIntersectionPoint}}(in, xCenter, bbox.getP00(), bbox.getP10(),}
\DoxyCodeLine{00742                               yCenter);}
\DoxyCodeLine{00743 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00122}{Drag\+Selection\+Tool\+::\+Four\+Points\+::get\+Point()}}.



Referenced by \mbox{\hyperlink{l00417}{Drag\+Selection\+Tool\+::\+Raster\+Scale\+Tool\+::transform()}}.

\mbox{\Hypertarget{class_drag_selection_tool_1_1_scale_ac7378bf104a5ad8ea6e8297062f2af80}\label{class_drag_selection_tool_1_1_scale_ac7378bf104a5ad8ea6e8297062f2af80}} 
\index{DragSelectionTool::Scale@{DragSelectionTool::Scale}!getScaledPoint@{getScaledPoint}}
\index{getScaledPoint@{getScaledPoint}!DragSelectionTool::Scale@{DragSelectionTool::Scale}}
\doxysubsubsection{\texorpdfstring{getScaledPoint()}{getScaledPoint()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Drag\+Selection\+Tool\+::\+Scale\+::get\+Scaled\+Point (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{const \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{Four\+Points}} \&}]{old\+Bbox,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}}}]{scale\+Value,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}}}]{center }\end{DoxyParamCaption})}

Return {\bfseries{index}} point scaled in {\bfseries{center}} of {\bfseries{scale\+Value}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00687                                                                        \{}
\DoxyCodeLine{00688   \mbox{\hyperlink{class_t_point_t}{TPointD}} p          = oldBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(index);}
\DoxyCodeLine{00689   \textcolor{keywordtype}{int} symmetricIndex = m\_deformTool-\/>getSymmetricPointIndex(index);}
\DoxyCodeLine{00690   \mbox{\hyperlink{class_t_point_t}{TPointD}} s          = oldBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(symmetricIndex);}
\DoxyCodeLine{00691   \textcolor{keywordflow}{if} (index < 4) \{}
\DoxyCodeLine{00692     \textcolor{keywordtype}{int} beforeIndex = m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_af6ef34f7039792c1a451403cf227ccbc}{getBeforePointIndex}}(index);}
\DoxyCodeLine{00693     \textcolor{keywordtype}{int} nextIndex   = m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_a7a5b5ea5f012172eede8ffe0939bc27b}{getNextPointIndex}}(index);}
\DoxyCodeLine{00694     \mbox{\hyperlink{class_t_point_t}{TPointD}} newbp   = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_ac7378bf104a5ad8ea6e8297062f2af80}{getScaledPoint}}(beforeIndex, oldBbox, scaleValue, center);}
\DoxyCodeLine{00695     \mbox{\hyperlink{class_t_point_t}{TPointD}} newnp   = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_ac7378bf104a5ad8ea6e8297062f2af80}{getScaledPoint}}(nextIndex, oldBbox, scaleValue, center);}
\DoxyCodeLine{00696     \mbox{\hyperlink{class_t_point_t}{TPointD}} bp = oldBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_af6ef34f7039792c1a451403cf227ccbc}{getBeforePointIndex}}(index));}
\DoxyCodeLine{00697     \mbox{\hyperlink{class_t_point_t}{TPointD}} np = oldBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_a7a5b5ea5f012172eede8ffe0939bc27b}{getNextPointIndex}}(index));}
\DoxyCodeLine{00698     \mbox{\hyperlink{class_t_point_t}{TPointD}} in = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a7829c545bd80625817e2c1b9c30b035c}{getIntersectionPoint}}(np, p, bp, p, newbp);}
\DoxyCodeLine{00699     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a7829c545bd80625817e2c1b9c30b035c}{getIntersectionPoint}}(newbp, in, np, p, newnp);}
\DoxyCodeLine{00700   \}}
\DoxyCodeLine{00701   \mbox{\hyperlink{class_t_point_t}{TPointD}} nearP = oldBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_af6ef34f7039792c1a451403cf227ccbc}{getBeforePointIndex}}(index));}
\DoxyCodeLine{00702   \mbox{\hyperlink{class_t_point_t}{TPointD}} nearS =}
\DoxyCodeLine{00703       oldBbox.\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(m\_deformTool-\/>\mbox{\hyperlink{class_drag_selection_tool_1_1_deform_tool_af6ef34f7039792c1a451403cf227ccbc}{getBeforePointIndex}}(symmetricIndex));}
\DoxyCodeLine{00704   \mbox{\hyperlink{class_t_point_t}{TPointD}} pc = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a7829c545bd80625817e2c1b9c30b035c}{getIntersectionPoint}}(nearP, p, p, s, center);}
\DoxyCodeLine{00705   \mbox{\hyperlink{class_t_point_t}{TPointD}} sc = \mbox{\hyperlink{class_drag_selection_tool_1_1_scale_a7829c545bd80625817e2c1b9c30b035c}{getIntersectionPoint}}(nearS, s, p, s, center);}
\DoxyCodeLine{00706   \textcolor{keywordflow}{if} (center == pc) \textcolor{keywordflow}{return} pc;}
\DoxyCodeLine{00707   \mbox{\hyperlink{class_t_point_t}{TPointD}} v       = normalize(center -\/ pc);}
\DoxyCodeLine{00708   \textcolor{keywordtype}{double} currentD = tdistance(sc, pc);}
\DoxyCodeLine{00709   \textcolor{keywordtype}{double} startD   = (index \% 2 == 1)}
\DoxyCodeLine{00710                       ? currentD / m\_deformTool-\/>getStartScaleValue().x}
\DoxyCodeLine{00711                       : currentD / m\_deformTool-\/>getStartScaleValue().y;}
\DoxyCodeLine{00712   \textcolor{keywordtype}{double} factor = (index \% 2 == 1) ? scaleValue.x : scaleValue.y;}
\DoxyCodeLine{00713   \textcolor{keywordtype}{double} d = (currentD -\/ startD * factor) * tdistance(center, pc) / currentD;}
\DoxyCodeLine{00714   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_point_t}{TPointD}}(pc.x + d * v.x, pc.y + d * v.y);}
\DoxyCodeLine{00715 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00122}{Drag\+Selection\+Tool\+::\+Four\+Points\+::get\+Point()}}.

\mbox{\Hypertarget{class_drag_selection_tool_1_1_scale_aa896d642196df4221eaaf1bdfc4c3e22}\label{class_drag_selection_tool_1_1_scale_aa896d642196df4221eaaf1bdfc4c3e22}} 
\index{DragSelectionTool::Scale@{DragSelectionTool::Scale}!getStartBboxs@{getStartBboxs}}
\index{getStartBboxs@{getStartBboxs}!DragSelectionTool::Scale@{DragSelectionTool::Scale}}
\doxysubsubsection{\texorpdfstring{getStartBboxs()}{getStartBboxs()}}
{\footnotesize\ttfamily std\+::vector$<$ \mbox{\hyperlink{class_drag_selection_tool_1_1_four_points}{Four\+Points}} $>$ Drag\+Selection\+Tool\+::\+Scale\+::get\+Start\+Bboxs (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00305 \{ \textcolor{keywordflow}{return} m\_startBboxs; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_scale_a0a9ca37a4b1451bf951bcf32e80ded4e}\label{class_drag_selection_tool_1_1_scale_a0a9ca37a4b1451bf951bcf32e80ded4e}} 
\index{DragSelectionTool::Scale@{DragSelectionTool::Scale}!getStartCenter@{getStartCenter}}
\index{getStartCenter@{getStartCenter}!DragSelectionTool::Scale@{DragSelectionTool::Scale}}
\doxysubsubsection{\texorpdfstring{getStartCenter()}{getStartCenter()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Drag\+Selection\+Tool\+::\+Scale\+::get\+Start\+Center (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00306 \{ \textcolor{keywordflow}{return} m\_startCenter; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_scale_a55fed4ff7ee00ad12ae145c1e00309d0}\label{class_drag_selection_tool_1_1_scale_a55fed4ff7ee00ad12ae145c1e00309d0}} 
\index{DragSelectionTool::Scale@{DragSelectionTool::Scale}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!DragSelectionTool::Scale@{DragSelectionTool::Scale}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily void Drag\+Selection\+Tool\+::\+Scale\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00776                                                                     \{}
\DoxyCodeLine{00777   m\_isShiftPressed = e.isShiftPressed();}
\DoxyCodeLine{00778   m\_isAltPressed   = e.isAltPressed();}
\DoxyCodeLine{00779 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_scale_ab11a0f77fcf1457e92ebb56bb625ed31}\label{class_drag_selection_tool_1_1_scale_ab11a0f77fcf1457e92ebb56bb625ed31}} 
\index{DragSelectionTool::Scale@{DragSelectionTool::Scale}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!DragSelectionTool::Scale@{DragSelectionTool::Scale}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Drag\+Selection\+Tool\+::\+Scale\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00784                                                                     \{}
\DoxyCodeLine{00785   \mbox{\hyperlink{class_selection_tool}{SelectionTool}} *tool = m\_deformTool-\/>getTool();}
\DoxyCodeLine{00786   \textcolor{keywordtype}{bool} isBboxReset    = \textcolor{keyword}{false};}
\DoxyCodeLine{00787   \textcolor{keywordflow}{if} (m\_isShiftPressed != e.isShiftPressed() ||}
\DoxyCodeLine{00788       m\_isAltPressed != e.isAltPressed()) \{}
\DoxyCodeLine{00789     m\_deformTool-\/>applyTransform(m\_startBboxs[0]);}
\DoxyCodeLine{00790     tool-\/>setBBox(m\_startBboxs[0]);}
\DoxyCodeLine{00791     tool-\/>setCenter(m\_startCenter);}
\DoxyCodeLine{00792     isBboxReset      = \textcolor{keyword}{true};}
\DoxyCodeLine{00793     m\_isShiftPressed = e.isShiftPressed();}
\DoxyCodeLine{00794     m\_isAltPressed   = e.isAltPressed();}
\DoxyCodeLine{00795   \}}
\DoxyCodeLine{00796   \mbox{\hyperlink{class_t_point_t}{TPointD}} newPos    = pos;}
\DoxyCodeLine{00797   \textcolor{keywordtype}{int} selectedIndex = tool-\/>getSelectedPoint();}
\DoxyCodeLine{00798   \textcolor{keywordflow}{if} (m\_isShiftPressed \&\& m\_type == ScaleType::GLOBAL) \{}
\DoxyCodeLine{00799     \mbox{\hyperlink{class_t_point_t}{TPointD}} point = tool-\/>getBBox().\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(selectedIndex);}
\DoxyCodeLine{00800     \mbox{\hyperlink{class_t_point_t}{TPointD}} delta;}
\DoxyCodeLine{00801     \textcolor{keywordflow}{if} (!isBboxReset)}
\DoxyCodeLine{00802       delta = pos -\/ m\_deformTool-\/>getCurPos();}
\DoxyCodeLine{00803     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00804       delta = pos -\/ m\_deformTool-\/>getStartPos();}
\DoxyCodeLine{00805     \textcolor{keywordtype}{int} symmetricIndex = m\_deformTool-\/>getSymmetricPointIndex(selectedIndex);}
\DoxyCodeLine{00806     \mbox{\hyperlink{class_t_point_t}{TPointD}} symmetricPoint = tool-\/>getBBox().\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(symmetricIndex);}
\DoxyCodeLine{00807     \mbox{\hyperlink{class_t_point_t}{TPointD}} v              = normalize(point -\/ symmetricPoint);}
\DoxyCodeLine{00808     delta                  = v * (v * delta);}
\DoxyCodeLine{00809     newPos                 = point + delta;}
\DoxyCodeLine{00810   \}}
\DoxyCodeLine{00811   m\_scaleInCenter = m\_isAltPressed;}
\DoxyCodeLine{00812 }
\DoxyCodeLine{00813   \textcolor{keywordtype}{double} pixelSize = tool-\/>getPixelSize();}
\DoxyCodeLine{00814   \textcolor{keywordtype}{bool} isFastDragging =}
\DoxyCodeLine{00815       tdistance2(pos, m\_deformTool-\/>getCurPos()) > 9.0 * pixelSize * pixelSize;}
\DoxyCodeLine{00816 }
\DoxyCodeLine{00817   m\_deformTool-\/>setCurPos(pos);}
\DoxyCodeLine{00818   \mbox{\hyperlink{class_t_point_t}{TPointD}} scaleValue =}
\DoxyCodeLine{00819       m\_deformTool-\/>transform(selectedIndex, newPos, isFastDragging);}
\DoxyCodeLine{00820   tool-\/>m\_deformValues.m\_scaleValue = scaleValue;}
\DoxyCodeLine{00821   TTool::getApplication()-\/>getCurrentTool()-\/>\mbox{\hyperlink{class_tool_handle_a39e34f1a30868bad11a629228b07bd40}{notifyToolChanged}}();}
\DoxyCodeLine{00822 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_scale_a8d3423617ec645cd88530dfb1de41eb4}\label{class_drag_selection_tool_1_1_scale_a8d3423617ec645cd88530dfb1de41eb4}} 
\index{DragSelectionTool::Scale@{DragSelectionTool::Scale}!leftButtonUp@{leftButtonUp}}
\index{leftButtonUp@{leftButtonUp}!DragSelectionTool::Scale@{DragSelectionTool::Scale}}
\doxysubsubsection{\texorpdfstring{leftButtonUp()}{leftButtonUp()}}
{\footnotesize\ttfamily void Drag\+Selection\+Tool\+::\+Scale\+::left\+Button\+Up (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00826                                           \{}
\DoxyCodeLine{00827   \mbox{\hyperlink{class_selection_tool}{SelectionTool}} *tool = m\_deformTool-\/>getTool();}
\DoxyCodeLine{00828   \mbox{\hyperlink{class_t_point_t}{TPointD}} newPos      = m\_deformTool-\/>getCurPos();}
\DoxyCodeLine{00829   \textcolor{keywordtype}{int} selectedIndex   = tool-\/>getSelectedPoint();}
\DoxyCodeLine{00830   \textcolor{keywordflow}{if} (m\_isShiftPressed \&\& m\_type == ScaleType::GLOBAL) \{}
\DoxyCodeLine{00831     newPos = tool-\/>getBBox().\mbox{\hyperlink{class_drag_selection_tool_1_1_four_points_a6ee06390172fb31fa17e80273c947f4c}{getPoint}}(selectedIndex);}
\DoxyCodeLine{00832   \}}
\DoxyCodeLine{00833   m\_deformTool-\/>transform(selectedIndex, newPos);}
\DoxyCodeLine{00834   TTool::getApplication()-\/>getCurrentTool()-\/>\mbox{\hyperlink{class_tool_handle_a39e34f1a30868bad11a629228b07bd40}{notifyToolChanged}}();}
\DoxyCodeLine{00835 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_scale_aef04207dd140cf7f48b15975656d3daf}\label{class_drag_selection_tool_1_1_scale_aef04207dd140cf7f48b15975656d3daf}} 
\index{DragSelectionTool::Scale@{DragSelectionTool::Scale}!scaleInCenter@{scaleInCenter}}
\index{scaleInCenter@{scaleInCenter}!DragSelectionTool::Scale@{DragSelectionTool::Scale}}
\doxysubsubsection{\texorpdfstring{scaleInCenter()}{scaleInCenter()}}
{\footnotesize\ttfamily bool Drag\+Selection\+Tool\+::\+Scale\+::scale\+In\+Center (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00307 \{ \textcolor{keywordflow}{return} m\_scaleInCenter; \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_scale_ab0e407626f96341af9e4cfd1436975b3}\label{class_drag_selection_tool_1_1_scale_ab0e407626f96341af9e4cfd1436975b3}} 
\index{DragSelectionTool::Scale@{DragSelectionTool::Scale}!m\_type@{m\_type}}
\index{m\_type@{m\_type}!DragSelectionTool::Scale@{DragSelectionTool::Scale}}
\doxysubsubsection{\texorpdfstring{m\_type}{m\_type}}
{\footnotesize\ttfamily Scale\+Type Drag\+Selection\+Tool\+::\+Scale\+::m\+\_\+type}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/selectiontool.\+h\item 
E\+:/opentoonz/toonz/sources/tnztools/selectiontool.\+cpp\end{DoxyCompactItemize}
