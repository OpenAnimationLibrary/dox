\hypertarget{classino__motion__blur}{}\doxysection{ino\+\_\+motion\+\_\+blur Class Reference}
\label{classino__motion__blur}\index{ino\_motion\_blur@{ino\_motion\_blur}}
Inheritance diagram for ino\+\_\+motion\+\_\+blur\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=5.000000cm]{classino__motion__blur}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classino__motion__blur_a7dec1fdb5c6910f70cb2e78fddd9e831}{get\+\_\+render\+\_\+vector}} (const double frame, const \mbox{\hyperlink{class_t_affine}{TAffine}} affine, \mbox{\hyperlink{class_t_point_t}{TPointD}} \&rend\+\_\+vect)
\item 
int \mbox{\hyperlink{classino__motion__blur_afdc41bb44251fdfbeb5067fc966f0a58}{get\+\_\+render\+\_\+margin}} (const double frame, const \mbox{\hyperlink{class_t_affine}{TAffine}} affine)
\item 
void \mbox{\hyperlink{classino__motion__blur_a48634855d3438ae64d4f641234c540f4}{get\+\_\+render\+\_\+enlarge}} (const double frame, const \mbox{\hyperlink{class_t_affine}{TAffine}} affine, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box)
\item 
bool \mbox{\hyperlink{classino__motion__blur_a2f61fa6b5ab2afb2b5c1865fe5e09b5e}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
int \mbox{\hyperlink{classino__motion__blur_ae26bc9475fb7b9e059e755a9a6ee46f1}{get\+Memory\+Requirement}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{classino__motion__blur_ae306abebe3aefc9e86955254a3ada7e7}{transform}} (double frame, int port, const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect\+On\+Output, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info\+On\+Output, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect\+On\+Input, \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info\+On\+Input) override
\item 
bool \mbox{\hyperlink{classino__motion__blur_a9ae1b845df0fcb73c545e4c50365e6bb}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\item 
void \mbox{\hyperlink{classino__motion__blur_a32bbd39b70d03e7188f1fac24a62626c}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&rend\+\_\+sets) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classino__motion__blur_a43f0db35026f3a9213825c8fc98c0a83}\label{classino__motion__blur_a43f0db35026f3a9213825c8fc98c0a83}} 
\index{ino\_motion\_blur@{ino\_motion\_blur}!ino\_motion\_blur@{ino\_motion\_blur}}
\index{ino\_motion\_blur@{ino\_motion\_blur}!ino\_motion\_blur@{ino\_motion\_blur}}
\doxysubsubsection{\texorpdfstring{ino\_motion\_blur()}{ino\_motion\_blur()}}
{\footnotesize\ttfamily ino\+\_\+motion\+\_\+blur\+::ino\+\_\+motion\+\_\+blur (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00025       : m\_depend\_move(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_enum_param}{TIntEnumParam}}(0, \textcolor{stringliteral}{"{}P1 -\/> P2"{}}))}
\DoxyCodeLine{00026       , m\_x1(0.0)}
\DoxyCodeLine{00027       , m\_y1(0.0)}
\DoxyCodeLine{00028       , m\_x2(1.0)}
\DoxyCodeLine{00029       , m\_y2(1.0)}
\DoxyCodeLine{00030       , m\_scale(1.0 * ino::param\_range())}
\DoxyCodeLine{00031       , m\_curve(1.0 * ino::param\_range())}
\DoxyCodeLine{00032       , m\_zanzo\_length(0.0)}
\DoxyCodeLine{00033       , m\_zanzo\_power(1.0 * ino::param\_range())}
\DoxyCodeLine{00034       , m\_alpha\_rendering(\textcolor{keyword}{true})}
\DoxyCodeLine{00035   \textcolor{comment}{// , m\_spread(true)}}
\DoxyCodeLine{00036   \{}
\DoxyCodeLine{00037     this-\/>m\_x1-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00038     this-\/>m\_y1-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00039     this-\/>m\_x2-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00040     this-\/>m\_y2-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00041     this-\/>m\_zanzo\_length-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00042 }
\DoxyCodeLine{00043     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Source"{}}, this-\/>m\_input);}
\DoxyCodeLine{00044 }
\DoxyCodeLine{00045     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}depend\_move"{}}, this-\/>m\_depend\_move);}
\DoxyCodeLine{00046     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}x1"{}}, this-\/>m\_x1);}
\DoxyCodeLine{00047     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}y1"{}}, this-\/>m\_y1);}
\DoxyCodeLine{00048     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}x2"{}}, this-\/>m\_x2);}
\DoxyCodeLine{00049     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}y2"{}}, this-\/>m\_y2);}
\DoxyCodeLine{00050     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}scale"{}}, this-\/>m\_scale);}
\DoxyCodeLine{00051     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}curve"{}}, this-\/>m\_curve);}
\DoxyCodeLine{00052     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}zanzo\_length"{}}, this-\/>m\_zanzo\_length);}
\DoxyCodeLine{00053     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}zanzo\_power"{}}, this-\/>m\_zanzo\_power);}
\DoxyCodeLine{00054     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}alpha\_rendering"{}}, this-\/>m\_alpha\_rendering);}
\DoxyCodeLine{00055     \textcolor{comment}{// bindParam(this,"{}spread"{}, this-\/>m\_spread);}}
\DoxyCodeLine{00056 }
\DoxyCodeLine{00057     this-\/>m\_depend\_move-\/>addItem(1, \textcolor{stringliteral}{"{}Motion"{}});}
\DoxyCodeLine{00058 }
\DoxyCodeLine{00059     this-\/>m\_curve-\/>setValueRange(0.1 * ino::param\_range(),}
\DoxyCodeLine{00060                                  10.0 * ino::param\_range()); \textcolor{comment}{/* gamma値 */}}
\DoxyCodeLine{00061     this-\/>m\_zanzo\_length-\/>setValueRange(0.0, 1000.0);}
\DoxyCodeLine{00062     this-\/>m\_zanzo\_power-\/>setValueRange(0.0 * ino::param\_range(),}
\DoxyCodeLine{00063                                        1.0 * ino::param\_range());}
\DoxyCodeLine{00064 }
\DoxyCodeLine{00065     this-\/>getAttributes()-\/>setIsSpeedAware(\textcolor{keyword}{true});}
\DoxyCodeLine{00066   \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classino__motion__blur_a9ae1b845df0fcb73c545e4c50365e6bb}\label{classino__motion__blur_a9ae1b845df0fcb73c545e4c50365e6bb}} 
\index{ino\_motion\_blur@{ino\_motion\_blur}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!ino\_motion\_blur@{ino\_motion\_blur}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool ino\+\_\+motion\+\_\+blur\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00137                                                                      \{}
\DoxyCodeLine{00138     \textcolor{keywordflow}{if} (0 == this-\/>m\_depend\_move-\/>getValue()) \{}
\DoxyCodeLine{00139       \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00140     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00141       \textcolor{keywordflow}{return} isAlmostIsotropic(info.m\_affine) || m\_scale-\/>getValue(frame) == 0;}
\DoxyCodeLine{00142     \}}
\DoxyCodeLine{00143   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classino__motion__blur_a32bbd39b70d03e7188f1fac24a62626c}\label{classino__motion__blur_a32bbd39b70d03e7188f1fac24a62626c}} 
\index{ino\_motion\_blur@{ino\_motion\_blur}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!ino\_motion\_blur@{ino\_motion\_blur}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void ino\+\_\+motion\+\_\+blur\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{rend\+\_\+sets }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00235                                                                   \{}
\DoxyCodeLine{00236   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 接続していなければ処理しない -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00237   \textcolor{keywordflow}{if} (!this-\/>m\_input.isConnected()) \{}
\DoxyCodeLine{00238     tile.getRaster()-\/>clear(); \textcolor{comment}{/* 塗りつぶしクリア */}}
\DoxyCodeLine{00239     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00240   \}}
\DoxyCodeLine{00241 }
\DoxyCodeLine{00242   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ サポートしていないPixelタイプはエラーを投げる -\/-\/-\/ */}}
\DoxyCodeLine{00243   \textcolor{keywordflow}{if} (!((\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}})tile.getRaster()) \&\& !((\mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}})tile.getRaster())) \{}
\DoxyCodeLine{00244     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_rop_exception}{TRopException}}(\textcolor{stringliteral}{"{}unsupported input pixel type"{}});}
\DoxyCodeLine{00245   \}}
\DoxyCodeLine{00246 }
\DoxyCodeLine{00247   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ Render(Pixel)単位で動作パラメータを得る -\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00248   \textcolor{keyword}{const} \textcolor{keywordtype}{int} depend\_move  = this-\/>m\_depend\_move-\/>getValue();}
\DoxyCodeLine{00249   \textcolor{keyword}{const} \textcolor{keywordtype}{double} scale     = this-\/>m\_scale-\/>getValue(frame) / ino::param\_range();}
\DoxyCodeLine{00250   \textcolor{keyword}{const} \textcolor{keywordtype}{double} curve     = this-\/>m\_curve-\/>getValue(frame) / ino::param\_range();}
\DoxyCodeLine{00251   \textcolor{keyword}{const} \textcolor{keywordtype}{int} zanzo\_length = this-\/>m\_zanzo\_length-\/>getValue(frame) *}
\DoxyCodeLine{00252                            ino::pixel\_per\_mm() *}
\DoxyCodeLine{00253                            sqrt(fabs(rend\_sets.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.det())) /}
\DoxyCodeLine{00254                            ((rend\_sets.\mbox{\hyperlink{class_t_render_settings_a52dd41881bbf6aaf953fe300be2e233e}{m\_shrinkX}} + rend\_sets.\mbox{\hyperlink{class_t_render_settings_ae1882f584ce9ffad12ce6bf9ff23814c}{m\_shrinkY}}) / 2.0);}
\DoxyCodeLine{00255   \textcolor{keyword}{const} \textcolor{keywordtype}{double} zanzo\_power =}
\DoxyCodeLine{00256       this-\/>m\_zanzo\_power-\/>getValue(frame) / ino::param\_range();}
\DoxyCodeLine{00257   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} alp\_rend\_sw = this-\/>m\_alpha\_rendering-\/>getValue();}
\DoxyCodeLine{00258 }
\DoxyCodeLine{00259   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 実際に処理するぼかしの方向vectorを生成 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00260   \mbox{\hyperlink{class_t_point_t}{TPointD}} rend\_vect;}
\DoxyCodeLine{00261   this-\/>get\_render\_vector(frame, rend\_sets.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}, rend\_vect);}
\DoxyCodeLine{00262   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 参照マージンの大きさを得る -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00263   \textcolor{keyword}{const} \textcolor{keywordtype}{int} margin = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(}
\DoxyCodeLine{00264       ceil((fabs(rend\_vect.x) < fabs(rend\_vect.y)) ? fabs(rend\_vect.y)}
\DoxyCodeLine{00265                                                    : fabs(rend\_vect.x)) +}
\DoxyCodeLine{00266       0.5);}
\DoxyCodeLine{00267   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 参照マージン含めた画像を生成 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00268   \mbox{\hyperlink{class_t_rect_t}{TRectD}} bBox =}
\DoxyCodeLine{00269       \mbox{\hyperlink{class_t_rect_t}{TRectD}}(tile.m\_pos \textcolor{comment}{/* Render画像上(Pixel単位)の位置 */}}
\DoxyCodeLine{00270              ,}
\DoxyCodeLine{00271              \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}}(\textcolor{comment}{/* Render画像上(Pixel単位)のサイズ */}}
\DoxyCodeLine{00272                          tile.getRaster()-\/>getLx(), tile.getRaster()-\/>getLy()));}
\DoxyCodeLine{00273   \textcolor{keywordflow}{if} (0 < margin) \{}
\DoxyCodeLine{00274     bBox = bBox.enlarge(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(margin));}
\DoxyCodeLine{00275   \}}
\DoxyCodeLine{00276 }
\DoxyCodeLine{00277   \mbox{\hyperlink{class_t_tile}{TTile}} enlarge\_tile;}
\DoxyCodeLine{00278   this-\/>m\_input-\/>allocateAndCompute(}
\DoxyCodeLine{00279       enlarge\_tile, bBox.getP00(),}
\DoxyCodeLine{00280       \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}}(\textcolor{comment}{/* Pixel単位のdouble -\/> intにしてセット */}}
\DoxyCodeLine{00281                   \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(bBox.getLx() + 0.5),}
\DoxyCodeLine{00282                   \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(bBox.getLy() + 0.5)),}
\DoxyCodeLine{00283       tile.getRaster(), frame, rend\_sets);}
\DoxyCodeLine{00284 }
\DoxyCodeLine{00285   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 保存すべき画像メモリを塗りつぶしクリア -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00286   tile.getRaster()-\/>clear(); \textcolor{comment}{/* 塗りつぶしクリア */}}
\DoxyCodeLine{00287 }
\DoxyCodeLine{00288   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ (app\_begin)log記憶 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00289   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} log\_sw = ino::log\_enable\_sw();}
\DoxyCodeLine{00290 }
\DoxyCodeLine{00291   \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00292     std::ostringstream os;}
\DoxyCodeLine{00293     os << \textcolor{stringliteral}{"{}params"{}}}
\DoxyCodeLine{00294        << \textcolor{stringliteral}{"{}  depend\_move\_num "{}} << depend\_move << \textcolor{stringliteral}{"{}  render\_vector x "{}}}
\DoxyCodeLine{00295        << rend\_vect.x << \textcolor{stringliteral}{"{}  y "{}} << rend\_vect.y << \textcolor{stringliteral}{"{}  margin "{}} << margin}
\DoxyCodeLine{00296        << \textcolor{stringliteral}{"{}  scale "{}} << scale << \textcolor{stringliteral}{"{}  curve "{}} << curve << \textcolor{stringliteral}{"{}  z\_len "{}}}
\DoxyCodeLine{00297        << zanzo\_length << \textcolor{stringliteral}{"{}  z\_pow "{}} << zanzo\_power << \textcolor{stringliteral}{"{}  alp\_rend\_sw "{}}}
\DoxyCodeLine{00298        << alp\_rend\_sw << \textcolor{stringliteral}{"{}   tile w "{}} << tile.getRaster()-\/>getLx() << \textcolor{stringliteral}{"{}  h "{}}}
\DoxyCodeLine{00299        << tile.getRaster()-\/>getLy() << \textcolor{stringliteral}{"{}  pixbits "{}}}
\DoxyCodeLine{00300        << ino::pixel\_bits(tile.getRaster()) << \textcolor{stringliteral}{"{}   frame "{}} << frame}
\DoxyCodeLine{00301        << \textcolor{stringliteral}{"{}   rand\_sets affine\_det "{}} << rend\_sets.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.det() << \textcolor{stringliteral}{"{}  a11 "{}}}
\DoxyCodeLine{00302        << rend\_sets.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.a11 << \textcolor{stringliteral}{"{}  a12 "{}} << rend\_sets.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.a12}
\DoxyCodeLine{00303        << \textcolor{stringliteral}{"{}  a13 "{}} << rend\_sets.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.a13 << \textcolor{stringliteral}{"{}  a21 "{}}}
\DoxyCodeLine{00304        << rend\_sets.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.a21 << \textcolor{stringliteral}{"{}  a22 "{}} << rend\_sets.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.a22}
\DoxyCodeLine{00305        << \textcolor{stringliteral}{"{}  a23 "{}} << rend\_sets.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.a23 << \textcolor{stringliteral}{"{}  x "{}} << rend\_sets.\mbox{\hyperlink{class_t_render_settings_a52dd41881bbf6aaf953fe300be2e233e}{m\_shrinkX}}}
\DoxyCodeLine{00306        << \textcolor{stringliteral}{"{}  y "{}} << rend\_sets.\mbox{\hyperlink{class_t_render_settings_ae1882f584ce9ffad12ce6bf9ff23814c}{m\_shrinkY}};}
\DoxyCodeLine{00307   \}}
\DoxyCodeLine{00308   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ fx処理 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00309   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00310     tile.getRaster()-\/>lock();}
\DoxyCodeLine{00311     fx\_(enlarge\_tile.getRaster()  \textcolor{comment}{// in with margin}}
\DoxyCodeLine{00312         ,}
\DoxyCodeLine{00313         margin  \textcolor{comment}{// margin}}
\DoxyCodeLine{00314         ,}
\DoxyCodeLine{00315         tile.getRaster()  \textcolor{comment}{// out with no margin}}
\DoxyCodeLine{00316         ,}
\DoxyCodeLine{00317         rend\_vect.x, rend\_vect.y, scale, curve, zanzo\_length, zanzo\_power,}
\DoxyCodeLine{00318         alp\_rend\_sw);}
\DoxyCodeLine{00319     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00320   \}}
\DoxyCodeLine{00321   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ error処理 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00322   \textcolor{keywordflow}{catch} (std::bad\_alloc \&e) \{}
\DoxyCodeLine{00323     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00324     \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00325       std::string str(\textcolor{stringliteral}{"{}std::bad\_alloc <"{}});}
\DoxyCodeLine{00326       str += e.what();}
\DoxyCodeLine{00327       str += \textcolor{charliteral}{'>'};}
\DoxyCodeLine{00328     \}}
\DoxyCodeLine{00329     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00330   \} \textcolor{keywordflow}{catch} (std::exception \&e) \{}
\DoxyCodeLine{00331     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00332     \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00333       std::string str(\textcolor{stringliteral}{"{}exception <"{}});}
\DoxyCodeLine{00334       str += e.what();}
\DoxyCodeLine{00335       str += \textcolor{charliteral}{'>'};}
\DoxyCodeLine{00336     \}}
\DoxyCodeLine{00337     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00338   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00339     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00340     \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00341       std::string str(\textcolor{stringliteral}{"{}other exception"{}});}
\DoxyCodeLine{00342     \}}
\DoxyCodeLine{00343     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00344   \}}
\DoxyCodeLine{00345 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classino__motion__blur_a2f61fa6b5ab2afb2b5c1865fe5e09b5e}\label{classino__motion__blur_a2f61fa6b5ab2afb2b5c1865fe5e09b5e}} 
\index{ino\_motion\_blur@{ino\_motion\_blur}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!ino\_motion\_blur@{ino\_motion\_blur}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool ino\+\_\+motion\+\_\+blur\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00115                                                        \{}
\DoxyCodeLine{00116     \textcolor{keywordflow}{if} (\textcolor{keyword}{false} == this-\/>m\_input.isConnected()) \{}
\DoxyCodeLine{00117       bBox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00118       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00119     \}}
\DoxyCodeLine{00120     \textcolor{keyword}{const} \textcolor{keywordtype}{bool} ret = this-\/>m\_input-\/>doGetBBox(frame, bBox, info);}
\DoxyCodeLine{00121     this-\/>get\_render\_enlarge(frame, info.m\_affine, bBox);}
\DoxyCodeLine{00122     \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00123   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classino__motion__blur_a48634855d3438ae64d4f641234c540f4}\label{classino__motion__blur_a48634855d3438ae64d4f641234c540f4}} 
\index{ino\_motion\_blur@{ino\_motion\_blur}!get\_render\_enlarge@{get\_render\_enlarge}}
\index{get\_render\_enlarge@{get\_render\_enlarge}!ino\_motion\_blur@{ino\_motion\_blur}}
\doxysubsubsection{\texorpdfstring{get\_render\_enlarge()}{get\_render\_enlarge()}}
{\footnotesize\ttfamily void ino\+\_\+motion\+\_\+blur\+::get\+\_\+render\+\_\+enlarge (\begin{DoxyParamCaption}\item[{const double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_affine}{TAffine}}}]{affine,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00107                                         \{}
\DoxyCodeLine{00108     \textcolor{keyword}{const} \textcolor{keywordtype}{int} margin = this-\/>get\_render\_margin(frame, affine);}
\DoxyCodeLine{00109     \textcolor{keywordflow}{if} (0 < margin) \{}
\DoxyCodeLine{00110       bBox = bBox.enlarge(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(margin));}
\DoxyCodeLine{00111     \}}
\DoxyCodeLine{00112   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classino__motion__blur_afdc41bb44251fdfbeb5067fc966f0a58}\label{classino__motion__blur_afdc41bb44251fdfbeb5067fc966f0a58}} 
\index{ino\_motion\_blur@{ino\_motion\_blur}!get\_render\_margin@{get\_render\_margin}}
\index{get\_render\_margin@{get\_render\_margin}!ino\_motion\_blur@{ino\_motion\_blur}}
\doxysubsubsection{\texorpdfstring{get\_render\_margin()}{get\_render\_margin()}}
{\footnotesize\ttfamily int ino\+\_\+motion\+\_\+blur\+::get\+\_\+render\+\_\+margin (\begin{DoxyParamCaption}\item[{const double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_affine}{TAffine}}}]{affine }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00098                                                                   \{}
\DoxyCodeLine{00099     \mbox{\hyperlink{class_t_point_t}{TPointD}} rend\_vect;}
\DoxyCodeLine{00100     this-\/>get\_render\_vector(frame, affine, rend\_vect);}
\DoxyCodeLine{00101     \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(ceil((fabs(rend\_vect.x) < fabs(rend\_vect.y))}
\DoxyCodeLine{00102                                      ? fabs(rend\_vect.y)}
\DoxyCodeLine{00103                                      : fabs(rend\_vect.x)) +}
\DoxyCodeLine{00104                             0.5);}
\DoxyCodeLine{00105   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classino__motion__blur_a7dec1fdb5c6910f70cb2e78fddd9e831}\label{classino__motion__blur_a7dec1fdb5c6910f70cb2e78fddd9e831}} 
\index{ino\_motion\_blur@{ino\_motion\_blur}!get\_render\_vector@{get\_render\_vector}}
\index{get\_render\_vector@{get\_render\_vector}!ino\_motion\_blur@{ino\_motion\_blur}}
\doxysubsubsection{\texorpdfstring{get\_render\_vector()}{get\_render\_vector()}}
{\footnotesize\ttfamily void ino\+\_\+motion\+\_\+blur\+::get\+\_\+render\+\_\+vector (\begin{DoxyParamCaption}\item[{const double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_affine}{TAffine}}}]{affine,  }\item[{\mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{rend\+\_\+vect }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00069                                              \{}
\DoxyCodeLine{00070     \textcolor{comment}{/*-\/-\/-\/ ベクトルを得て、render用単位にする -\/-\/-\/*/}}
\DoxyCodeLine{00071     \textcolor{keywordflow}{if} (0 == this-\/>m\_depend\_move-\/>getValue()) \{}
\DoxyCodeLine{00072       rend\_vect.x = this-\/>m\_x2-\/>getValue(frame) -\/ this-\/>m\_x1-\/>getValue(frame);}
\DoxyCodeLine{00073       rend\_vect.y = this-\/>m\_y2-\/>getValue(frame) -\/ this-\/>m\_y1-\/>getValue(frame);}
\DoxyCodeLine{00074 }
\DoxyCodeLine{00075       rend\_vect = rend\_vect * ino::pixel\_per\_mm();}
\DoxyCodeLine{00076       \textcolor{comment}{/* 単位変換(mm -\/-\/> render\_pixel) */}}
\DoxyCodeLine{00077     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00078       rend\_vect = -\/this-\/>getAttributes()-\/>getSpeed();}
\DoxyCodeLine{00079     \}}
\DoxyCodeLine{00080 }
\DoxyCodeLine{00081     \textcolor{comment}{/*-\/-\/-\/ 回転と拡大縮小のGeometryを反映させる -\/-\/-\/*/}}
\DoxyCodeLine{00082     \textcolor{comment}{/*}}
\DoxyCodeLine{00083 \textcolor{comment}{    toonz/main/sources/stdfx/motionblurfx.cpp}}
\DoxyCodeLine{00084 \textcolor{comment}{    750-\/768行を参照して書いた}}
\DoxyCodeLine{00085 \textcolor{comment}{    */}}
\DoxyCodeLine{00086     \mbox{\hyperlink{class_t_affine}{TAffine}} aff(affine);}
\DoxyCodeLine{00087     aff.a13 = aff.a23 = 0; \textcolor{comment}{/* 移動変換をしないで... */}}
\DoxyCodeLine{00088 }
\DoxyCodeLine{00089     rend\_vect = aff * rend\_vect;}
\DoxyCodeLine{00090 }
\DoxyCodeLine{00091     \textcolor{comment}{/*-\/-\/-\/ ユーザー指定による、強弱を付加する -\/-\/-\/*/}}
\DoxyCodeLine{00092     rend\_vect =}
\DoxyCodeLine{00093         rend\_vect * (this-\/>m\_scale-\/>getValue(frame) / ino::param\_range());}
\DoxyCodeLine{00094     \textcolor{comment}{/*-\/-\/-\/ shrinkはGeometry(affine)に含まれる...らしい -\/-\/-\/*/}}
\DoxyCodeLine{00095     \textcolor{comment}{// rend\_vect = rend\_vect}}
\DoxyCodeLine{00096     \textcolor{comment}{//  * (1.0 / ((info.m\_shrinkX + info.m\_shrinkY)/2.));}}
\DoxyCodeLine{00097   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classino__motion__blur_ae26bc9475fb7b9e059e755a9a6ee46f1}\label{classino__motion__blur_ae26bc9475fb7b9e059e755a9a6ee46f1}} 
\index{ino\_motion\_blur@{ino\_motion\_blur}!getMemoryRequirement@{getMemoryRequirement}}
\index{getMemoryRequirement@{getMemoryRequirement}!ino\_motion\_blur@{ino\_motion\_blur}}
\doxysubsubsection{\texorpdfstring{getMemoryRequirement()}{getMemoryRequirement()}}
{\footnotesize\ttfamily int ino\+\_\+motion\+\_\+blur\+::get\+Memory\+Requirement (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Specifies the approximate size (in Mega\+Bytes) of the maximum allocation instance that this fx will need to perform in order to render the passed input. This method should be reimplemented in order to make the Toonz rendering process aware of the use of big raster memory chunks, at least. Observe that the passed tile geometry is implicitly {\itshape  already allocated \texorpdfstring{$<$}{<}\textbackslash{}i\texorpdfstring{$>$}{>} for the fx output. ~\newline
The default implementation returns 0, assuming that the passed implicit memory size is passed below in node computation without further allocation of resources. Fxs can reimplement this to -\/1 to explicitly disable the Toonz\textquotesingle{}s smart memory handling. ~\newline
 ~\newline
\begin{DoxyNote}{Note}
The rendering process ensures that the passed render settings are {\itshape handled} by the fx before this function is invoked -\/ do not waste code for it. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRaster\+Fx\+::memory\+Size}} and TRaster\+Fx\+::can\+Handle methods. 
\end{DoxySeeAlso}
}

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_af8eb991c9756f4fb2e48d9f96cbacfba}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00125                                                                  \{}
\DoxyCodeLine{00126     \mbox{\hyperlink{class_t_rect_t}{TRectD}} bBox(rect);}
\DoxyCodeLine{00127     this-\/>get\_render\_enlarge(frame, info.m\_affine, bBox);}
\DoxyCodeLine{00128     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRasterFx::memorySize}}(bBox, info.m\_bpp);}
\DoxyCodeLine{00129   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00560}{TRaster\+Fx\+::memory\+Size()}}.

\mbox{\Hypertarget{classino__motion__blur_ae306abebe3aefc9e86955254a3ada7e7}\label{classino__motion__blur_ae306abebe3aefc9e86955254a3ada7e7}} 
\index{ino\_motion\_blur@{ino\_motion\_blur}!transform@{transform}}
\index{transform@{transform}!ino\_motion\_blur@{ino\_motion\_blur}}
\doxysubsubsection{\texorpdfstring{transform()}{transform()}}
{\footnotesize\ttfamily void ino\+\_\+motion\+\_\+blur\+::transform (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{int}]{port,  }\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect\+On\+Output,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info\+On\+Output,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect\+On\+Input,  }\item[{\mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info\+On\+Input }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00132                                                         \{}
\DoxyCodeLine{00133     rectOnInput = rectOnOutput;}
\DoxyCodeLine{00134     infoOnInput = infoOnOutput;}
\DoxyCodeLine{00135     this-\/>get\_render\_enlarge(frame, infoOnOutput.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}, rectOnInput);}
\DoxyCodeLine{00136   \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/ino\+\_\+motion\+\_\+blur.\+cpp\end{DoxyCompactItemize}
