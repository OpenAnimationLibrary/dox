\hypertarget{class_iwa___particle}{}\doxysection{Iwa\+\_\+\+Particle Class Reference}
\label{class_iwa___particle}\index{Iwa\_Particle@{Iwa\_Particle}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_iwa___particle_ab43a10ba4e26332330a859f21cf0ada2}{Iwa\+\_\+\+Particle}} (int lifetime, int seed, const std\+::map$<$ int, \mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ $>$ porttiles, const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&ranges, int howmany, int first, int level, int last, float posx, float posy, bool is\+Upward, int init\+Source\+Frame)
\item 
void \mbox{\hyperlink{class_iwa___particle_a07cbb6bb1372689de120532c1e6b423c}{create\+\_\+\+Animation}} (const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, int first, int last)
\item 
int \mbox{\hyperlink{class_iwa___particle_ab02fa73d0aa5f52d84a9411398dad9fe}{check\+\_\+\+Swing}} (const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values)
\item 
void \mbox{\hyperlink{class_iwa___particle_ad9191f5a784fb975754bead57f722090}{create\+\_\+\+Swing}} (const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&ranges, double randomxreference, double randomyreference)
\item 
void \mbox{\hyperlink{class_iwa___particle_a4da68ac53501ab5c792d7c553ba80334}{create\+\_\+\+Colors}} (const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&ranges, std\+::map$<$ int, \mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ $>$ porttiles)
\item 
void \mbox{\hyperlink{class_iwa___particle_a0d019b339b849881d1350d7a6a7ad420}{move}} (const std\+::map$<$ int, \mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ $>$ porttiles, const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&ranges, float windx, float windy, float xgravity, float ygravity, float dpi, int lastframe)
\item 
void \mbox{\hyperlink{class_iwa___particle_a06bd0a111684b9f9b6a81eaabf4a60cb}{spread\+\_\+color}} (TPixel32 \&color, double range)
\item 
void \mbox{\hyperlink{class_iwa___particle_a9884a437ba87d0177277fe377891dd1d}{update\+\_\+\+Animation}} (const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, int first, int last, int keep)
\item 
void \mbox{\hyperlink{class_iwa___particle_a933aa202a4089fee0bbcaf48b4d8cfa5}{update\+\_\+\+Swing}} (const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&ranges, struct \mbox{\hyperlink{structpos__dummy}{pos\+\_\+dummy}} \&dummy, double randomxreference, double randomyreference)
\item 
void \mbox{\hyperlink{class_iwa___particle_aa1f74bef49743a4d6be9b035151836a1}{update\+\_\+\+Scale}} (const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&ranges, double scalereference, double scalestepreference)
\item 
double \mbox{\hyperlink{class_iwa___particle_abba167e80c7865ed06cb7021e8f58612}{set\+\_\+\+Opacity}} (std\+::map$<$ int, \mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ $>$ porttiles, const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, float opacity\+\_\+range, double dist\+\_\+frame)
\item 
void \mbox{\hyperlink{class_iwa___particle_a759a752f51f5160008311b08c021252c}{modify\+\_\+colors}} (TPixel32 \&color, double \&intensity)
\item 
void \mbox{\hyperlink{class_iwa___particle_ac49f713faa56a5c399dfaf87a2b3a932}{modify\+\_\+colors\+\_\+and\+\_\+opacity}} (const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, float curr\+\_\+opacity, int dist\+\_\+frame, \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} raster)
\item 
bool \mbox{\hyperlink{class_iwa___particle_a8c17c53e05465c702afd71e1d403062e}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame)
\item 
void \mbox{\hyperlink{class_iwa___particle_a93a300d6e17dc38da0dada7ba48be98e}{get\+\_\+image\+\_\+reference}} (\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ctrl1, const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, float \&imagereference, int type)
\item 
void \mbox{\hyperlink{class_iwa___particle_a7fd8d796cbd22e3bc33d39eb8f0ea428}{get\+\_\+image\+\_\+reference}} (\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ctrl1, const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, TPixel32 \&color)
\item 
float \mbox{\hyperlink{class_iwa___particle_a233151ddffc24e1ec40301b28a0db793}{get\+\_\+image\+\_\+gravity}} (\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ctrl1, const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, float \&gx, float \&gy)
\item 
void \mbox{\hyperlink{class_iwa___particle_a4689f42838c9864a9b5794a7593fadd7}{get\+\_\+base\+\_\+image\+\_\+texture}} (\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ctrl1, const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} tex\+Raster, const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&tex\+BBox, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&ri)
\item 
void \mbox{\hyperlink{class_iwa___particle_a9d8c491e54a241be4b479065aa90b460}{get\+\_\+base\+\_\+image\+\_\+color}} (\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ctrl1, const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} tex\+Raster, const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&tex\+BBox, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&ri)
\item 
bool \mbox{\hyperlink{class_iwa___particle_a3b35c6ef84ec98904779b96f05342c78}{get\+\_\+image\+\_\+curl}} (\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ctrl1, const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&values, float \&cx, float \&cy)
\item 
void \mbox{\hyperlink{class_iwa___particle_a954f060b14e056dacb97d7aeddee4d95}{set\+\_\+illuminated\+\_\+colors}} (float illuminant, \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} tex\+Raster)
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
double \mbox{\hyperlink{class_iwa___particle_a516436c0dabbd11ca99c103bef681912}{x}}
\item 
float \mbox{\hyperlink{class_iwa___particle_a09d7ca13fa7c195d74126d5fe43519f8}{y}}
\item 
float \mbox{\hyperlink{class_iwa___particle_a1a2d76f60c5f57184f3c14c983e9e3a6}{oldx}}
\item 
float \mbox{\hyperlink{class_iwa___particle_a57ca669b1b28a5ff4c68565b1f536229}{oldy}}
\item 
float \mbox{\hyperlink{class_iwa___particle_a4ddd1d88eca8ccef83271598dda2f1f7}{vx}}
\item 
float \mbox{\hyperlink{class_iwa___particle_adbc37f1010ac6eba236b4fadbefbe435}{vy}}
\item 
float \mbox{\hyperlink{class_iwa___particle_a6a1dd0e88fc449f9c9224c7c8ba0cdc9}{mass}}
\item 
float \mbox{\hyperlink{class_iwa___particle_ab3f5837e473f9568817b915b06d65c61}{scale}}
\item 
float \mbox{\hyperlink{class_iwa___particle_a867e2a59fe0c2473e31170ec695f8701}{angle}}
\item 
float \mbox{\hyperlink{class_iwa___particle_a890e6ea8fb72b75e7ee8ae1a51a074c9}{smswingx}}
\item 
float \mbox{\hyperlink{class_iwa___particle_a91bd71fdf17893aab11a123dba183c0a}{smswingy}}
\item 
float \mbox{\hyperlink{class_iwa___particle_a9c98fa06a7d6881c9e01a84c55a9d4a8}{smswinga}}
\item 
int \mbox{\hyperlink{class_iwa___particle_aef2ebad60bd53bcb3a716e66d8f300aa}{smperiodx}}
\item 
int \mbox{\hyperlink{class_iwa___particle_ad0c62d669715b4366103b5e3d0b8e64d}{smperiody}}
\item 
int \mbox{\hyperlink{class_iwa___particle_a412d8f5ef6c7f6140256ebfce807005b}{smperioda}}
\item 
int \mbox{\hyperlink{class_iwa___particle_a4d8b522f64c91bbe410ff81b7e38b47d}{lifetime}}
\item 
int \mbox{\hyperlink{class_iwa___particle_a9c57575c83d36e654c3f7251b53ca859}{genlifetime}}
\item 
int \mbox{\hyperlink{class_iwa___particle_a2cf3407e5528860a2a2b0807b3ef5e45}{level}}
\item 
int \mbox{\hyperlink{class_iwa___particle_af216f163c05c4d0f7b9bb4a8028c8309}{frame}}
\item 
int \mbox{\hyperlink{class_iwa___particle_a5144ff13fd09836d6588afef720fefd2}{signx}}
\item 
int \mbox{\hyperlink{class_iwa___particle_a9e3c3c2ed1f90e04b6d21c7cc70a35d3}{trail}}
\item 
\mbox{\hyperlink{structcoldata}{coldata}} \mbox{\hyperlink{class_iwa___particle_a992e18c9b688dbdc5b5022275647a833}{gencol}}
\item 
\mbox{\hyperlink{structcoldata}{coldata}} \mbox{\hyperlink{class_iwa___particle_a033c4fd0a7887aa18ebb0f450f0ff5d8}{fincol}}
\item 
\mbox{\hyperlink{structcoldata}{coldata}} \mbox{\hyperlink{class_iwa___particle_aa593debb1dda585aa2d55dec3265d8f9}{foutcol}}
\item 
int \mbox{\hyperlink{class_iwa___particle_a9b41d0585e5d88322cc3793b0abe902d}{changesignx}}
\item 
int \mbox{\hyperlink{class_iwa___particle_aea0110d2142a810d3c374b19a2de6d82}{signy}}
\item 
int \mbox{\hyperlink{class_iwa___particle_a96979dbd9d6c3c585f7a6b4995ee1ae7}{changesigny}}
\item 
int \mbox{\hyperlink{class_iwa___particle_aac2218b7bea0c4e37a6a46438de34d41}{signa}}
\item 
int \mbox{\hyperlink{class_iwa___particle_acbbddbea7e49f638300fb3a2bc9629e6}{changesigna}}
\item 
bool \mbox{\hyperlink{class_iwa___particle_a65f822c116ac189e1af6c2962432cd29}{animswing}}
\item 
\mbox{\hyperlink{class_t_random}{TRandom}} \mbox{\hyperlink{class_iwa___particle_a7d1f4152b435c17393fb6196d00d0762}{random}}
\item 
int \mbox{\hyperlink{class_iwa___particle_a4ff24ea07840615bae22a1ebba7d5e50}{seed}}
\item 
float \mbox{\hyperlink{class_iwa___particle_ae90aaccbe24651219ae858dd2d1e04c7}{initial\+\_\+x}}
\item 
float \mbox{\hyperlink{class_iwa___particle_a62577a8d3718ca0d4e0ac42ff5dc7912}{initial\+\_\+y}}
\item 
float \mbox{\hyperlink{class_iwa___particle_a2d9d5dc1815e6f54fd936dfba9f6f6d1}{initial\+\_\+angle}}
\item 
float \mbox{\hyperlink{class_iwa___particle_ac7e20ca5cedb4bdb1ad194289c95e5d4}{initial\+\_\+scale}}
\item 
float \mbox{\hyperlink{class_iwa___particle_a4fd00c521642bd0bb0c079016eb57758}{curlx}}
\item 
float \mbox{\hyperlink{class_iwa___particle_a467882242aa8aae9a2c35e3ee673b7c3}{curly}}
\item 
float \mbox{\hyperlink{class_iwa___particle_af9ca4f7907ab6ceb8e1dc32e17e20ca9}{curlz}}
\item 
float \mbox{\hyperlink{class_iwa___particle_aa2c1814742e229abec48449afc60cf0a}{flap\+\_\+theta}}
\item 
float \mbox{\hyperlink{class_iwa___particle_a1daba06ac03241b9f05ac06e8f4c1fdf}{flap\+\_\+phi}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_iwa___particle_ab43a10ba4e26332330a859f21cf0ada2}\label{class_iwa___particle_ab43a10ba4e26332330a859f21cf0ada2}} 
\index{Iwa\_Particle@{Iwa\_Particle}!Iwa\_Particle@{Iwa\_Particle}}
\index{Iwa\_Particle@{Iwa\_Particle}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{Iwa\_Particle()}{Iwa\_Particle()}}
{\footnotesize\ttfamily Iwa\+\_\+\+Particle\+::\+Iwa\+\_\+\+Particle (\begin{DoxyParamCaption}\item[{int}]{lifetime,  }\item[{int}]{seed,  }\item[{const std\+::map$<$ int, \mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ $>$}]{porttiles,  }\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&}]{ranges,  }\item[{int}]{howmany,  }\item[{int}]{first,  }\item[{int}]{level,  }\item[{int}]{last,  }\item[{float}]{posx,  }\item[{float}]{posy,  }\item[{bool}]{is\+Upward,  }\item[{int}]{init\+Source\+Frame }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00037 \{}
\DoxyCodeLine{00038   \textcolor{keywordtype}{double} random\_s\_a\_range, random\_speed;}
\DoxyCodeLine{00039   std::map<int, float> imagereferences;}
\DoxyCodeLine{00040   random                 = \mbox{\hyperlink{class_t_random}{TRandom}}(seed);}
\DoxyCodeLine{00041   \textcolor{keywordtype}{float} randomxreference = 0.0;}
\DoxyCodeLine{00042   \textcolor{keywordtype}{float} randomyreference = 0.0;}
\DoxyCodeLine{00043 }
\DoxyCodeLine{00044   \textcolor{comment}{/*-\/ ここで、出発時の素材フレームが決定するので、ParticleOriginに渡す -\/*/}}
\DoxyCodeLine{00045   create\_Animation(values, 0, last);}
\DoxyCodeLine{00046   frame = initSourceFrame;}
\DoxyCodeLine{00047 }
\DoxyCodeLine{00048   this-\/>level = level;}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050   x = posx;}
\DoxyCodeLine{00051   y = posy;}
\DoxyCodeLine{00052 }
\DoxyCodeLine{00053   \textcolor{comment}{/*-\/ 粒子パラメータに参照画像が使われている場合、}}
\DoxyCodeLine{00054 \textcolor{comment}{          参照画像のとる値を先にまとめて得ておく -\/*/}}
\DoxyCodeLine{00055   \textcolor{keywordflow}{for} (std::map<int, TTile *>::iterator it = porttiles.begin();}
\DoxyCodeLine{00056        it != porttiles.end(); ++it) \{}
\DoxyCodeLine{00057     \textcolor{keywordflow}{if} ((values.lifetime\_ctrl\_val == it-\/>first ||}
\DoxyCodeLine{00058          values.speed\_ctrl\_val == it-\/>first ||}
\DoxyCodeLine{00059          values.scale\_ctrl\_val == it-\/>first ||}
\DoxyCodeLine{00060          values.rot\_ctrl\_val == it-\/>first}
\DoxyCodeLine{00061          \textcolor{comment}{/*-\/ Speed Angleを明るさでコントロールする場合 -\/*/}}
\DoxyCodeLine{00062          || (values.speeda\_ctrl\_val == it-\/>first \&\&}
\DoxyCodeLine{00063              !values.speeda\_use\_gradient\_val)) \&\&}
\DoxyCodeLine{00064         it-\/>second-\/>getRaster()) \{}
\DoxyCodeLine{00065       \textcolor{keywordtype}{float} tmpvalue;}
\DoxyCodeLine{00066       get\_image\_reference(it-\/>second, values, tmpvalue,}
\DoxyCodeLine{00067                           Iwa\_TiledParticlesFx::GRAY\_REF);}
\DoxyCodeLine{00068       imagereferences[it-\/>first] = tmpvalue;}
\DoxyCodeLine{00069     \}}
\DoxyCodeLine{00070   \}}
\DoxyCodeLine{00071 }
\DoxyCodeLine{00072   \textcolor{comment}{/*-\/ 寿命にControlが刺さっている場合は、その値に合わせて寿命を減ずる -\/*/}}
\DoxyCodeLine{00073   \textcolor{keywordflow}{if} (values.lifetime\_ctrl\_val) \{}
\DoxyCodeLine{00074     \textcolor{keywordtype}{float} lifetimereference = 0.0;}
\DoxyCodeLine{00075     lifetimereference       = imagereferences[values.lifetime\_ctrl\_val];}
\DoxyCodeLine{00076     lifetime                = g\_lifetime * lifetimereference;}
\DoxyCodeLine{00077   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00078     lifetime = g\_lifetime;}
\DoxyCodeLine{00079 }
\DoxyCodeLine{00080   genlifetime = lifetime;}
\DoxyCodeLine{00081 }
\DoxyCodeLine{00082   \textcolor{comment}{/*-\/ 粒子の初期速度を得る -\/*/}}
\DoxyCodeLine{00083   \textcolor{keywordflow}{if} (values.speed\_ctrl\_val \&\&}
\DoxyCodeLine{00084       (porttiles.find(values.speed\_ctrl\_val) != porttiles.end())) \{}
\DoxyCodeLine{00085     \textcolor{keywordtype}{float} speedreference = 0.0;}
\DoxyCodeLine{00086     speedreference       = imagereferences[values.speed\_ctrl\_val];}
\DoxyCodeLine{00087     random\_speed =}
\DoxyCodeLine{00088         values.speed\_val.first + (ranges.speed\_range) * speedreference;}
\DoxyCodeLine{00089   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00090     random\_speed =}
\DoxyCodeLine{00091         values.speed\_val.first + (ranges.speed\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}();}
\DoxyCodeLine{00092 }
\DoxyCodeLine{00093   \textcolor{comment}{/*-\/ 粒子の初期移動方向を得る -\/*/}}
\DoxyCodeLine{00094   \textcolor{keywordflow}{if} (values.speeda\_ctrl\_val \&\&}
\DoxyCodeLine{00095       (porttiles.find(values.speeda\_ctrl\_val) != porttiles.end())) \{}
\DoxyCodeLine{00096     \textcolor{keywordflow}{if} (values.speeda\_use\_gradient\_val) \{}
\DoxyCodeLine{00097       \textcolor{comment}{/*-\/ 参照画像のGradientを得る関数を利用して角度を得るモード -\/*/}}
\DoxyCodeLine{00098       \textcolor{keywordtype}{float} dir\_x, dir\_y;}
\DoxyCodeLine{00099       get\_image\_gravity(porttiles[values.speeda\_ctrl\_val], values, dir\_x,}
\DoxyCodeLine{00100                         dir\_y);}
\DoxyCodeLine{00101       \textcolor{keywordflow}{if} (dir\_x == 0.0f \&\& dir\_y == 0.0f)}
\DoxyCodeLine{00102         random\_s\_a\_range = values.speed\_val.first;}
\DoxyCodeLine{00103       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00104         random\_s\_a\_range = atan2f(dir\_x, -\/dir\_y);}
\DoxyCodeLine{00105     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00106       \textcolor{keywordtype}{float} speedareference = 0.0;}
\DoxyCodeLine{00107       speedareference       = imagereferences[values.speeda\_ctrl\_val];}
\DoxyCodeLine{00108       random\_s\_a\_range =}
\DoxyCodeLine{00109           values.speeda\_val.first + (ranges.speeda\_range) * speedareference;}
\DoxyCodeLine{00110     \}}
\DoxyCodeLine{00111   \} \textcolor{keywordflow}{else} \textcolor{comment}{/*-\/ Controlが無ければランダム -\/*/}}
\DoxyCodeLine{00112     random\_s\_a\_range =}
\DoxyCodeLine{00113         values.speeda\_val.first + (ranges.speeda\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}();}
\DoxyCodeLine{00114 }
\DoxyCodeLine{00115   \textcolor{comment}{/*-\/ 移動方向から速度のX,Y成分を得る -\/*/}}
\DoxyCodeLine{00116   vx = random\_speed * sin(random\_s\_a\_range);}
\DoxyCodeLine{00117   vy = -\/random\_speed * cos(random\_s\_a\_range);}
\DoxyCodeLine{00118 }
\DoxyCodeLine{00119   trail =}
\DoxyCodeLine{00120       (int)(values.trail\_val.first + (ranges.trail\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}());}
\DoxyCodeLine{00121   oldx = 0;}
\DoxyCodeLine{00122   oldy = 0;}
\DoxyCodeLine{00123   \textcolor{comment}{/*-\/ 質量を指定（動きにくさ） -\/*/}}
\DoxyCodeLine{00124   mass = values.mass\_val.first + (ranges.mass\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}();}
\DoxyCodeLine{00125   \textcolor{comment}{/*-\/ サイズを得る -\/*/}}
\DoxyCodeLine{00126   \textcolor{keywordflow}{if} (values.scale\_ctrl\_val \&\&}
\DoxyCodeLine{00127       (porttiles.find(values.scale\_ctrl\_val) != porttiles.end())) \{}
\DoxyCodeLine{00128     \textcolor{keywordtype}{float} scalereference = 0.0f;}
\DoxyCodeLine{00129     scalereference       = imagereferences[values.scale\_ctrl\_val];}
\DoxyCodeLine{00130     scale = values.scale\_val.first + (ranges.scale\_range) * scalereference;}
\DoxyCodeLine{00131   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00132     \textcolor{comment}{/*-\/ ONのとき、かつ、ScaleにControlが無い場合、}}
\DoxyCodeLine{00133 \textcolor{comment}{            粒子サイズが小さいほど(遠くにあるので)多く分布するようになる。 -\/*/}}
\DoxyCodeLine{00134     \textcolor{keywordflow}{if} (values.perspective\_distribution\_val) \{}
\DoxyCodeLine{00135       scale =}
\DoxyCodeLine{00136           (values.scale\_val.first * values.scale\_val.second) /}
\DoxyCodeLine{00137           (values.scale\_val.second -\/ (ranges.scale\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}());}
\DoxyCodeLine{00138     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00139       scale = values.scale\_val.first + (ranges.scale\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}();}
\DoxyCodeLine{00140   \}}
\DoxyCodeLine{00141 }
\DoxyCodeLine{00142   \textcolor{comment}{/*-\/ 向きを得る -\/*/}}
\DoxyCodeLine{00143   \textcolor{keywordflow}{if} (values.rot\_ctrl\_val \&\&}
\DoxyCodeLine{00144       (porttiles.find(values.rot\_ctrl\_val) != porttiles.end())) \{}
\DoxyCodeLine{00145     \textcolor{keywordtype}{float} anglereference = 0.0f;}
\DoxyCodeLine{00146     anglereference       = imagereferences[values.rot\_ctrl\_val];}
\DoxyCodeLine{00147     angle = -\/(values.rot\_val.first) -\/ (ranges.rot\_range) * anglereference;}
\DoxyCodeLine{00148   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00149     angle = -\/(values.rot\_val.first) -\/ (ranges.rot\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}();}
\DoxyCodeLine{00150 }
\DoxyCodeLine{00151   \textcolor{comment}{// 140212 初期粒子向き}}
\DoxyCodeLine{00152   \textcolor{keywordflow}{if} (!isUpward) angle += 180.0f;}
\DoxyCodeLine{00153 }
\DoxyCodeLine{00154   \textcolor{comment}{/*-\/ ランダムな動きのふれはば -\/*/}}
\DoxyCodeLine{00155   \textcolor{keywordflow}{if} (values.randomx\_ctrl\_val)}
\DoxyCodeLine{00156     randomxreference = imagereferences[values.randomx\_ctrl\_val];}
\DoxyCodeLine{00157   \textcolor{keywordflow}{if} (values.randomy\_ctrl\_val)}
\DoxyCodeLine{00158     randomyreference = imagereferences[values.randomy\_ctrl\_val];}
\DoxyCodeLine{00159   create\_Swing(values, ranges, randomxreference, randomyreference);}
\DoxyCodeLine{00160 }
\DoxyCodeLine{00161   create\_Colors(values, ranges, porttiles);}
\DoxyCodeLine{00162 }
\DoxyCodeLine{00163   \textcolor{keywordflow}{if} (scale < 0.001f) scale = 0;}
\DoxyCodeLine{00164 }
\DoxyCodeLine{00165   \textcolor{comment}{/*-\/ ひらひらした動き -\/*/}}
\DoxyCodeLine{00166   \textcolor{keywordflow}{if} (values.flap\_ctrl\_val \&\&}
\DoxyCodeLine{00167       (porttiles.find(values.flap\_ctrl\_val) != porttiles.end())) \{}
\DoxyCodeLine{00168     \textcolor{comment}{//*-\/ 参照画像のGradientを得る関数を利用して角度を得る -\/*/}}
\DoxyCodeLine{00169     \textcolor{keywordtype}{float} dir\_x, dir\_y;}
\DoxyCodeLine{00170     \textcolor{keywordtype}{float} norm;}
\DoxyCodeLine{00171     norm = get\_image\_gravity(porttiles[values.flap\_ctrl\_val], values, dir\_x,}
\DoxyCodeLine{00172                              dir\_y);}
\DoxyCodeLine{00173     \textcolor{keywordflow}{if} (dir\_x == 0.0f \&\& dir\_y == 0.0f) \{}
\DoxyCodeLine{00174       flap\_theta = 0.0f;}
\DoxyCodeLine{00175       flap\_phi   = 0.0f;}
\DoxyCodeLine{00176     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00177       flap\_theta = atan2f(dir\_y, dir\_x) * 180.0f / 3.14159f;}
\DoxyCodeLine{00178       flap\_phi   = values.iw\_flap\_velocity\_val * norm / mass;}
\DoxyCodeLine{00179     \}}
\DoxyCodeLine{00180   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00181     flap\_theta = 0.0f;}
\DoxyCodeLine{00182     flap\_phi   = 0.0f;}
\DoxyCodeLine{00183   \}}
\DoxyCodeLine{00184 }
\DoxyCodeLine{00185   initial\_x     = x;}
\DoxyCodeLine{00186   initial\_y     = y;}
\DoxyCodeLine{00187   initial\_angle = angle;}
\DoxyCodeLine{00188   initial\_scale = scale;}
\DoxyCodeLine{00189 }
\DoxyCodeLine{00190   curlx = 0.0f;}
\DoxyCodeLine{00191   curly = 0.0f;}
\DoxyCodeLine{00192   curlz = random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}();}
\DoxyCodeLine{00193 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_a2c0ccce60a3c8a70458395fa354b304f}\label{class_iwa___particle_a2c0ccce60a3c8a70458395fa354b304f}} 
\index{Iwa\_Particle@{Iwa\_Particle}!````~Iwa\_Particle@{$\sim$Iwa\_Particle}}
\index{````~Iwa\_Particle@{$\sim$Iwa\_Particle}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{$\sim$Iwa\_Particle()}{~Iwa\_Particle()}}
{\footnotesize\ttfamily Iwa\+\_\+\+Particle\+::$\sim$\+Iwa\+\_\+\+Particle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00213 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_iwa___particle_a8c17c53e05465c702afd71e1d403062e}\label{class_iwa___particle_a8c17c53e05465c702afd71e1d403062e}} 
\index{Iwa\_Particle@{Iwa\_Particle}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool Iwa\+\_\+\+Particle\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00250 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_ab02fa73d0aa5f52d84a9411398dad9fe}\label{class_iwa___particle_ab02fa73d0aa5f52d84a9411398dad9fe}} 
\index{Iwa\_Particle@{Iwa\_Particle}!check\_Swing@{check\_Swing}}
\index{check\_Swing@{check\_Swing}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{check\_Swing()}{check\_Swing()}}
{\footnotesize\ttfamily int Iwa\+\_\+\+Particle\+::check\+\_\+\+Swing (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00197                                                             \{}
\DoxyCodeLine{00198   \textcolor{keywordflow}{return} (values.randomx\_val.first || values.randomx\_val.second ||}
\DoxyCodeLine{00199           values.randomy\_val.first || values.randomy\_val.second ||}
\DoxyCodeLine{00200           values.rotsca\_val.first || values.rotsca\_val.second);}
\DoxyCodeLine{00201 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_a07cbb6bb1372689de120532c1e6b423c}\label{class_iwa___particle_a07cbb6bb1372689de120532c1e6b423c}} 
\index{Iwa\_Particle@{Iwa\_Particle}!create\_Animation@{create\_Animation}}
\index{create\_Animation@{create\_Animation}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{create\_Animation()}{create\_Animation()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Particle\+::create\+\_\+\+Animation (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{int}]{first,  }\item[{int}]{last }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00017                                               \{}
\DoxyCodeLine{00018   \textcolor{keywordflow}{switch} (values.animation\_val) \{}
\DoxyCodeLine{00019   \textcolor{keywordflow}{case} Iwa\_TiledParticlesFx::ANIM\_CYCLE:}
\DoxyCodeLine{00020   \textcolor{keywordflow}{case} Iwa\_TiledParticlesFx::ANIM\_S\_CYCLE:}
\DoxyCodeLine{00021     animswing = 0; \textcolor{comment}{/*frame <0 perche' c'e' il preroll dialmeno un frame*/}}
\DoxyCodeLine{00022     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00023   \textcolor{keywordflow}{case} Iwa\_TiledParticlesFx::ANIM\_SR\_CYCLE:}
\DoxyCodeLine{00024     animswing = random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() > 0.5 ? 1 : 0;}
\DoxyCodeLine{00025     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00026   \}}
\DoxyCodeLine{00027 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_a4da68ac53501ab5c792d7c553ba80334}\label{class_iwa___particle_a4da68ac53501ab5c792d7c553ba80334}} 
\index{Iwa\_Particle@{Iwa\_Particle}!create\_Colors@{create\_Colors}}
\index{create\_Colors@{create\_Colors}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{create\_Colors()}{create\_Colors()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Particle\+::create\+\_\+\+Colors (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&}]{ranges,  }\item[{std\+::map$<$ int, \mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ $>$}]{porttiles }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00245                                                                  \{}
\DoxyCodeLine{00246   \textcolor{keywordflow}{if} (values.genfadecol\_val) \{}
\DoxyCodeLine{00247     TPixel32 color;}
\DoxyCodeLine{00248     \textcolor{keywordflow}{if} (values.gencol\_ctrl\_val \&\&}
\DoxyCodeLine{00249         (porttiles.find(values.gencol\_ctrl\_val) != porttiles.end()))}
\DoxyCodeLine{00250       get\_image\_reference(porttiles[values.gencol\_ctrl\_val], values, color);}
\DoxyCodeLine{00251     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00252       color = values.gencol\_val.getPremultipliedValue(random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}());}
\DoxyCodeLine{00253     gencol.fadecol = values.genfadecol\_val;}
\DoxyCodeLine{00254     \textcolor{keywordflow}{if} (values.gencol\_spread\_val) spread\_color(color, values.gencol\_spread\_val);}
\DoxyCodeLine{00255     gencol.col = color;}
\DoxyCodeLine{00256   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00257     gencol.col     = TPixel32::Transparent;}
\DoxyCodeLine{00258     gencol.fadecol = 0;}
\DoxyCodeLine{00259   \}}
\DoxyCodeLine{00260 }
\DoxyCodeLine{00261   \textcolor{keywordflow}{if} (values.finfadecol\_val) \{}
\DoxyCodeLine{00262     TPixel32 color;}
\DoxyCodeLine{00263     \textcolor{keywordflow}{if} (values.fincol\_ctrl\_val \&\&}
\DoxyCodeLine{00264         (porttiles.find(values.fincol\_ctrl\_val) != porttiles.end()))}
\DoxyCodeLine{00265       get\_image\_reference(porttiles[values.fincol\_ctrl\_val], values, color);}
\DoxyCodeLine{00266     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00267       color = values.fincol\_val.getPremultipliedValue(random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}());}
\DoxyCodeLine{00268     fincol.rangecol = (int)values.finrangecol\_val;}
\DoxyCodeLine{00269     fincol.fadecol  = values.finfadecol\_val;}
\DoxyCodeLine{00270     if (values.fincol\_spread\_val) spread\_color(color, values.fincol\_spread\_val);}
\DoxyCodeLine{00271     fincol.col = color;}
\DoxyCodeLine{00272   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00273     fincol.col      = TPixel32::Transparent;}
\DoxyCodeLine{00274     fincol.rangecol = 0;}
\DoxyCodeLine{00275     fincol.fadecol  = 0;}
\DoxyCodeLine{00276   \}}
\DoxyCodeLine{00277 }
\DoxyCodeLine{00278   \textcolor{keywordflow}{if} (values.foutfadecol\_val) \{}
\DoxyCodeLine{00279     TPixel32 color;}
\DoxyCodeLine{00280     \textcolor{keywordflow}{if} (values.foutcol\_ctrl\_val \&\&}
\DoxyCodeLine{00281         (porttiles.find(values.foutcol\_ctrl\_val) != porttiles.end()))}
\DoxyCodeLine{00282       get\_image\_reference(porttiles[values.foutcol\_ctrl\_val], values, color);}
\DoxyCodeLine{00283     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00284       color = values.foutcol\_val.getPremultipliedValue(random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}());}
\DoxyCodeLine{00285     ;}
\DoxyCodeLine{00286     foutcol.rangecol = (int)values.foutrangecol\_val;}
\DoxyCodeLine{00287     foutcol.fadecol  = values.foutfadecol\_val;}
\DoxyCodeLine{00288     if (values.foutcol\_spread\_val)}
\DoxyCodeLine{00289       spread\_color(color, values.foutcol\_spread\_val);}
\DoxyCodeLine{00290     foutcol.col = color;}
\DoxyCodeLine{00291   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00292     foutcol.col      = TPixel32::Transparent;}
\DoxyCodeLine{00293     foutcol.rangecol = 0;}
\DoxyCodeLine{00294     foutcol.fadecol  = 0;}
\DoxyCodeLine{00295   \}}
\DoxyCodeLine{00296 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_ad9191f5a784fb975754bead57f722090}\label{class_iwa___particle_ad9191f5a784fb975754bead57f722090}} 
\index{Iwa\_Particle@{Iwa\_Particle}!create\_Swing@{create\_Swing}}
\index{create\_Swing@{create\_Swing}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{create\_Swing()}{create\_Swing()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Particle\+::create\+\_\+\+Swing (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&}]{ranges,  }\item[{double}]{randomxreference,  }\item[{double}]{randomyreference }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00208                                                          \{}
\DoxyCodeLine{00209   changesignx =}
\DoxyCodeLine{00210       (int)(values.swing\_val.first + random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.swing\_range));}
\DoxyCodeLine{00211   changesigny =}
\DoxyCodeLine{00212       (int)(values.swing\_val.first + random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.swing\_range));}
\DoxyCodeLine{00213   changesigna = (int)(values.rotswing\_val.first +}
\DoxyCodeLine{00214                       random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.rotswing\_range));}
\DoxyCodeLine{00215   \textcolor{keywordflow}{if} (values.swingmode\_val == Iwa\_TiledParticlesFx::SWING\_SMOOTH) \{}
\DoxyCodeLine{00216     \textcolor{keywordflow}{if} (values.randomx\_ctrl\_val)}
\DoxyCodeLine{00217       smswingx = abs((\textcolor{keywordtype}{int})values.randomx\_val.first) +}
\DoxyCodeLine{00218                  randomxreference * (ranges.randomx\_range);}
\DoxyCodeLine{00219     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00220       smswingx = abs((\textcolor{keywordtype}{int})values.randomx\_val.first) +}
\DoxyCodeLine{00221                  random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.randomx\_range);}
\DoxyCodeLine{00222     \textcolor{keywordflow}{if} (values.randomy\_ctrl\_val)}
\DoxyCodeLine{00223       smswingy = abs((\textcolor{keywordtype}{int})values.randomy\_val.first) +}
\DoxyCodeLine{00224                  randomyreference * (ranges.randomy\_range);}
\DoxyCodeLine{00225     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00226       smswingy = abs((\textcolor{keywordtype}{int})values.randomy\_val.first) +}
\DoxyCodeLine{00227                  random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.randomy\_range);}
\DoxyCodeLine{00228     smperiodx = changesignx;}
\DoxyCodeLine{00229     smperiody = changesigny;}
\DoxyCodeLine{00230   \}}
\DoxyCodeLine{00231   \textcolor{keywordflow}{if} (values.rotswingmode\_val == Iwa\_TiledParticlesFx::SWING\_SMOOTH) \{}
\DoxyCodeLine{00232     smswinga  = abs((\textcolor{keywordtype}{int})(values.rotsca\_val.first +}
\DoxyCodeLine{00233                          random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.rotsca\_range)));}
\DoxyCodeLine{00234     smperioda = changesigna;}
\DoxyCodeLine{00235   \}}
\DoxyCodeLine{00236   signx = random.\mbox{\hyperlink{class_t_random_aaba89e229a3e3e7146d439bc5bbeb848}{getBool}}() ? 1 : -\/1;}
\DoxyCodeLine{00237   signy = random.\mbox{\hyperlink{class_t_random_aaba89e229a3e3e7146d439bc5bbeb848}{getBool}}() ? 1 : -\/1;}
\DoxyCodeLine{00238   signa = random.\mbox{\hyperlink{class_t_random_aaba89e229a3e3e7146d439bc5bbeb848}{getBool}}() ? 1 : -\/1;}
\DoxyCodeLine{00239 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_a9d8c491e54a241be4b479065aa90b460}\label{class_iwa___particle_a9d8c491e54a241be4b479065aa90b460}} 
\index{Iwa\_Particle@{Iwa\_Particle}!get\_base\_image\_color@{get\_base\_image\_color}}
\index{get\_base\_image\_color@{get\_base\_image\_color}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{get\_base\_image\_color()}{get\_base\_image\_color()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Particle\+::get\+\_\+base\+\_\+image\+\_\+color (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$}]{ctrl1,  }\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{\mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}}}]{tex\+Raster,  }\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{tex\+BBox,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{ri }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00809                                                                    \{}
\DoxyCodeLine{00810   \textcolor{comment}{/*-\/ まず、色を拾う -\/*/}}
\DoxyCodeLine{00811   TPixel32 color;}
\DoxyCodeLine{00812   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} baseRas32 = ctrl1-\/>getRaster();}
\DoxyCodeLine{00813   \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} baseRas64 = ctrl1-\/>getRaster();}
\DoxyCodeLine{00814 }
\DoxyCodeLine{00815   \mbox{\hyperlink{class_t_point_t}{TPointD}} tmp(initial\_x, initial\_y);}
\DoxyCodeLine{00816 }
\DoxyCodeLine{00817   tmp = ri.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}} * tmp;}
\DoxyCodeLine{00818 }
\DoxyCodeLine{00819   tmp -\/= ctrl1-\/>m\_pos;}
\DoxyCodeLine{00820   \textcolor{keywordflow}{if} (baseRas32 \&\& tmp.x >= 0 \&\& tmp.x < baseRas32-\/>getLx() \&\& tmp.y >= 0 \&\&}
\DoxyCodeLine{00821       troundp(tmp.y) < baseRas32-\/>getLy()) \{}
\DoxyCodeLine{00822     color = baseRas32-\/>pixels(troundp(tmp.y))[(int)tmp.x];}
\DoxyCodeLine{00823   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (baseRas64 \&\& tmp.x >= 0 \&\& tmp.x < baseRas64-\/>getLx() \&\&}
\DoxyCodeLine{00824              tmp.y >= 0 \&\& troundp(tmp.y) < baseRas64-\/>getLy()) \{}
\DoxyCodeLine{00825     TPixel64 pix64 = baseRas64-\/>pixels(troundp(tmp.y))[(\textcolor{keywordtype}{int})tmp.x];}
\DoxyCodeLine{00826     color = TPixel32((\textcolor{keywordtype}{int})pix64.r / 256, (\textcolor{keywordtype}{int})pix64.g / 256, (\textcolor{keywordtype}{int})pix64.b / 256,}
\DoxyCodeLine{00827                      (\textcolor{keywordtype}{int})pix64.m / 256);}
\DoxyCodeLine{00828   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00829     color = TPixel32::Transparent;}
\DoxyCodeLine{00830 }
\DoxyCodeLine{00831   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} texRas32 = texRaster;}
\DoxyCodeLine{00832   \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} texRas64 = texRaster;}
\DoxyCodeLine{00833   \textcolor{keywordflow}{if} (texRas32) \{}
\DoxyCodeLine{00834     texRas32-\/>lock();}
\DoxyCodeLine{00835     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < texRas32-\/>getLy(); j++) \{}
\DoxyCodeLine{00836       TPixel32 *pix    = texRas32-\/>pixels(j);}
\DoxyCodeLine{00837       TPixel32 *endPix = pix + texRas32-\/>getLx();}
\DoxyCodeLine{00838       \textcolor{keywordflow}{while} (pix < endPix) \{}
\DoxyCodeLine{00839         \textcolor{keywordtype}{double} factor = pix-\/>m / (double)TPixel32::maxChannelValue;}
\DoxyCodeLine{00840         pix-\/>r        = (UCHAR)(factor * color.r);}
\DoxyCodeLine{00841         pix-\/>g        = (UCHAR)(factor * color.g);}
\DoxyCodeLine{00842         pix-\/>b        = (UCHAR)(factor * color.b);}
\DoxyCodeLine{00843         pix-\/>m        = (UCHAR)(factor * color.m);}
\DoxyCodeLine{00844         ++pix;}
\DoxyCodeLine{00845       \}}
\DoxyCodeLine{00846     \}}
\DoxyCodeLine{00847     texRas32-\/>unlock();}
\DoxyCodeLine{00848   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (texRas64) \{}
\DoxyCodeLine{00849     texRas64-\/>lock();}
\DoxyCodeLine{00850     TPixel64 color64(color.r * 256, color.g * 256, color.b * 256,}
\DoxyCodeLine{00851                      color.m * 256);}
\DoxyCodeLine{00852     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < texRas64-\/>getLy(); j++) \{}
\DoxyCodeLine{00853       TPixel64 *pix    = texRas64-\/>pixels(j);}
\DoxyCodeLine{00854       TPixel64 *endPix = pix + texRas64-\/>getLx();}
\DoxyCodeLine{00855       \textcolor{keywordflow}{while} (pix < endPix) \{}
\DoxyCodeLine{00856         \textcolor{keywordtype}{double} factor = pix-\/>m / (double)TPixel64::maxChannelValue;}
\DoxyCodeLine{00857         pix-\/>r        = (USHORT)(factor * color64.r);}
\DoxyCodeLine{00858         pix-\/>g        = (USHORT)(factor * color64.g);}
\DoxyCodeLine{00859         pix-\/>b        = (USHORT)(factor * color64.b);}
\DoxyCodeLine{00860         pix-\/>m        = (USHORT)(factor * color64.m);}
\DoxyCodeLine{00861         ++pix;}
\DoxyCodeLine{00862       \}}
\DoxyCodeLine{00863     \}}
\DoxyCodeLine{00864     texRas64-\/>unlock();}
\DoxyCodeLine{00865   \}}
\DoxyCodeLine{00866 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_a4689f42838c9864a9b5794a7593fadd7}\label{class_iwa___particle_a4689f42838c9864a9b5794a7593fadd7}} 
\index{Iwa\_Particle@{Iwa\_Particle}!get\_base\_image\_texture@{get\_base\_image\_texture}}
\index{get\_base\_image\_texture@{get\_base\_image\_texture}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{get\_base\_image\_texture()}{get\_base\_image\_texture()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Particle\+::get\+\_\+base\+\_\+image\+\_\+texture (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$}]{ctrl1,  }\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{\mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}}}]{tex\+Raster,  }\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{tex\+BBox,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{ri }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00727                                                                      \{}
\DoxyCodeLine{00728   \textcolor{comment}{/*-\/ ベースの絵を粒子の初期位置にあわせ移動させる -\/*/}}
\DoxyCodeLine{00729   \mbox{\hyperlink{class_t_point_t}{TPointD}} pos(initial\_x, initial\_y);}
\DoxyCodeLine{00730   pos = ri.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}} * pos;}
\DoxyCodeLine{00731   \mbox{\hyperlink{class_t_rotation}{TRotation}} rotM(-\/initial\_angle);}
\DoxyCodeLine{00732   \mbox{\hyperlink{class_t_scale}{TScale}} scaleM(1.0);}
\DoxyCodeLine{00733   \mbox{\hyperlink{class_t_affine}{TAffine}} M = \mbox{\hyperlink{class_t_translation}{TTranslation}}(-\/texBBox.getP00()) * scaleM * rotM *}
\DoxyCodeLine{00734               \mbox{\hyperlink{class_t_translation}{TTranslation}}(-\/pos + ctrl1-\/>m\_pos);}
\DoxyCodeLine{00735 }
\DoxyCodeLine{00736   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} baseRas32 = ctrl1-\/>getRaster();}
\DoxyCodeLine{00737   \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} baseRas64 = ctrl1-\/>getRaster();}
\DoxyCodeLine{00738   \textcolor{keywordflow}{if} (baseRas32) \{}
\DoxyCodeLine{00739     baseRas32-\/>lock();}
\DoxyCodeLine{00740 }
\DoxyCodeLine{00741     \textcolor{comment}{/*-\/ 粒子と同サイズのラスタを用意 -\/*/}}
\DoxyCodeLine{00742     \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} kirinukiBaseRas(texRaster-\/>getSize());}
\DoxyCodeLine{00743     kirinukiBaseRas-\/>lock();}
\DoxyCodeLine{00744     \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} texRas32 = texRaster;}
\DoxyCodeLine{00745     texRas32-\/>lock();}
\DoxyCodeLine{00746     \textcolor{comment}{/*-\/ そこにquickput -\/*/}}
\DoxyCodeLine{00747     \mbox{\hyperlink{namespace_t_rop_a1f6b04b4725e957a0d554e198e26a117}{TRop::quickPut}}(kirinukiBaseRas, baseRas32, M);}
\DoxyCodeLine{00748 }
\DoxyCodeLine{00749     \textcolor{comment}{/*-\/ 粒子のRGBをベース絵で置換していく -\/*/}}
\DoxyCodeLine{00750     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < texRaster-\/>getLy(); j++) \{}
\DoxyCodeLine{00751       TPixel32 *pix     = texRas32-\/>pixels(j);}
\DoxyCodeLine{00752       TPixel32 *endPix  = pix + texRas32-\/>getLx();}
\DoxyCodeLine{00753       TPixel32 *basePix = kirinukiBaseRas-\/>pixels(j);}
\DoxyCodeLine{00754       \textcolor{keywordflow}{while} (pix < endPix) \{}
\DoxyCodeLine{00755         \textcolor{keywordtype}{double} factor = pix-\/>m / 255.0;}
\DoxyCodeLine{00756         pix-\/>r        = (UCHAR)(factor * basePix-\/>r);}
\DoxyCodeLine{00757         pix-\/>g        = (UCHAR)(factor * basePix-\/>g);}
\DoxyCodeLine{00758         pix-\/>b        = (UCHAR)(factor * basePix-\/>b);}
\DoxyCodeLine{00759         pix-\/>m        = (UCHAR)(factor * basePix-\/>m);}
\DoxyCodeLine{00760 }
\DoxyCodeLine{00761         ++pix;}
\DoxyCodeLine{00762         ++basePix;}
\DoxyCodeLine{00763       \}}
\DoxyCodeLine{00764     \}}
\DoxyCodeLine{00765 }
\DoxyCodeLine{00766     kirinukiBaseRas-\/>unlock();}
\DoxyCodeLine{00767     baseRas32-\/>unlock();}
\DoxyCodeLine{00768     texRas32-\/>unlock();}
\DoxyCodeLine{00769   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (baseRas64) \{}
\DoxyCodeLine{00770     baseRas64-\/>lock();}
\DoxyCodeLine{00771 }
\DoxyCodeLine{00772     \textcolor{comment}{/*-\/ 粒子と同サイズのラスタを用意 -\/*/}}
\DoxyCodeLine{00773     \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} kirinukiBaseRas(texRaster-\/>getSize());}
\DoxyCodeLine{00774     kirinukiBaseRas-\/>lock();}
\DoxyCodeLine{00775     \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} texRas64 = texRaster;}
\DoxyCodeLine{00776     texRas64-\/>lock();}
\DoxyCodeLine{00777     \textcolor{comment}{/*-\/ そこにquickput -\/*/}}
\DoxyCodeLine{00778     \mbox{\hyperlink{namespace_t_rop_a1f6b04b4725e957a0d554e198e26a117}{TRop::quickPut}}(kirinukiBaseRas, baseRas64, M);}
\DoxyCodeLine{00779 }
\DoxyCodeLine{00780     \textcolor{comment}{/*-\/ 粒子のRGBをベース絵で置換していく -\/*/}}
\DoxyCodeLine{00781     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < texRaster-\/>getLy(); j++) \{}
\DoxyCodeLine{00782       TPixel64 *pix     = texRas64-\/>pixels(j);}
\DoxyCodeLine{00783       TPixel64 *endPix  = pix + texRas64-\/>getLx();}
\DoxyCodeLine{00784       TPixel64 *basePix = kirinukiBaseRas-\/>pixels(j);}
\DoxyCodeLine{00785       \textcolor{keywordflow}{while} (pix < endPix) \{}
\DoxyCodeLine{00786         \textcolor{keywordtype}{double} factor = (double)pix-\/>m / (\textcolor{keywordtype}{double})TPixel64::maxChannelValue;}
\DoxyCodeLine{00787         pix-\/>r        = (TPixel64::Channel)(factor * basePix-\/>r);}
\DoxyCodeLine{00788         pix-\/>g        = (TPixel64::Channel)(factor * basePix-\/>g);}
\DoxyCodeLine{00789         pix-\/>b        = (TPixel64::Channel)(factor * basePix-\/>b);}
\DoxyCodeLine{00790         pix-\/>m        = (TPixel64::Channel)(factor * basePix-\/>m);}
\DoxyCodeLine{00791 }
\DoxyCodeLine{00792         ++pix;}
\DoxyCodeLine{00793         ++basePix;}
\DoxyCodeLine{00794       \}}
\DoxyCodeLine{00795     \}}
\DoxyCodeLine{00796 }
\DoxyCodeLine{00797     kirinukiBaseRas-\/>unlock();}
\DoxyCodeLine{00798     baseRas64-\/>unlock();}
\DoxyCodeLine{00799     texRas64-\/>unlock();}
\DoxyCodeLine{00800   \}}
\DoxyCodeLine{00801 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_a3b35c6ef84ec98904779b96f05342c78}\label{class_iwa___particle_a3b35c6ef84ec98904779b96f05342c78}} 
\index{Iwa\_Particle@{Iwa\_Particle}!get\_image\_curl@{get\_image\_curl}}
\index{get\_image\_curl@{get\_image\_curl}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{get\_image\_curl()}{get\_image\_curl()}}
{\footnotesize\ttfamily bool Iwa\+\_\+\+Particle\+::get\+\_\+image\+\_\+curl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$}]{ctrl1,  }\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{float \&}]{cx,  }\item[{float \&}]{cy }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00649                                                         \{}
\DoxyCodeLine{00650   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} raster32 = ctrl1-\/>getRaster();}
\DoxyCodeLine{00651   \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} raster64 = ctrl1-\/>getRaster();}
\DoxyCodeLine{00652   \mbox{\hyperlink{class_t_point_t}{TPointD}} tmp(x, y);}
\DoxyCodeLine{00653   tmp -\/= ctrl1-\/>m\_pos;}
\DoxyCodeLine{00654   \textcolor{keywordtype}{int} radius = 4;}
\DoxyCodeLine{00655   cx         = 0;}
\DoxyCodeLine{00656   cy         = 0;}
\DoxyCodeLine{00657 }
\DoxyCodeLine{00658   \textcolor{keywordtype}{bool} ret;}
\DoxyCodeLine{00659 }
\DoxyCodeLine{00660   \textcolor{keywordflow}{if} (raster32) \{}
\DoxyCodeLine{00661     raster32-\/>lock();}
\DoxyCodeLine{00662     \textcolor{keywordflow}{if} (raster32 \&\& tmp.x >= radius + 1 \&\&}
\DoxyCodeLine{00663         tmp.x < raster32-\/>getLx() -\/ radius -\/ 1 \&\& tmp.y >= radius + 1 \&\&}
\DoxyCodeLine{00664         tmp.y < raster32-\/>getLy() -\/ radius -\/ 1) \{}
\DoxyCodeLine{00665       TPixel32 *pix = \&(raster32-\/>pixels(troundp(tmp.y))[(int)tmp.x]);}
\DoxyCodeLine{00666 }
\DoxyCodeLine{00667       cx = -\/\mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(*(pix + radius * raster32-\/>getWrap())).value +}
\DoxyCodeLine{00668            \mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(*(pix -\/ radius * raster32-\/>getWrap())).value;}
\DoxyCodeLine{00669       cy = \mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(*(pix + radius)).value -\/}
\DoxyCodeLine{00670            \mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(*(pix -\/ radius)).value;}
\DoxyCodeLine{00671       ret = \textcolor{keyword}{true};}
\DoxyCodeLine{00672     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00673       ret = \textcolor{keyword}{false};}
\DoxyCodeLine{00674     raster32-\/>unlock();}
\DoxyCodeLine{00675   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (raster64) \{}
\DoxyCodeLine{00676     raster64-\/>lock();}
\DoxyCodeLine{00677     \textcolor{keywordflow}{if} (raster64 \&\& tmp.x >= radius + 1 \&\&}
\DoxyCodeLine{00678         tmp.x < raster64-\/>getLx() -\/ radius -\/ 1 \&\& tmp.y >= radius + 1 \&\&}
\DoxyCodeLine{00679         tmp.y < raster64-\/>getLy() -\/ radius -\/ 1) \{}
\DoxyCodeLine{00680       TPixel64 *pix = \&(raster64-\/>pixels(troundp(tmp.y))[(int)tmp.x]);}
\DoxyCodeLine{00681 }
\DoxyCodeLine{00682       cx = -\/TPixelGR16::from(*(pix + radius * raster64-\/>getWrap())).value +}
\DoxyCodeLine{00683            TPixelGR16::from(*(pix -\/ radius * raster64-\/>getWrap())).value;}
\DoxyCodeLine{00684       cy = TPixelGR16::from(*(pix + radius)).value -\/}
\DoxyCodeLine{00685            TPixelGR16::from(*(pix -\/ radius)).value;}
\DoxyCodeLine{00686       cx /= 256.0f;}
\DoxyCodeLine{00687       cy /= 256.0f;}
\DoxyCodeLine{00688       ret = \textcolor{keyword}{true};}
\DoxyCodeLine{00689     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00690       ret = \textcolor{keyword}{false};}
\DoxyCodeLine{00691     raster64-\/>unlock();}
\DoxyCodeLine{00692   \}}
\DoxyCodeLine{00693   \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00694 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_a233151ddffc24e1ec40301b28a0db793}\label{class_iwa___particle_a233151ddffc24e1ec40301b28a0db793}} 
\index{Iwa\_Particle@{Iwa\_Particle}!get\_image\_gravity@{get\_image\_gravity}}
\index{get\_image\_gravity@{get\_image\_gravity}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{get\_image\_gravity()}{get\_image\_gravity()}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::get\+\_\+image\+\_\+gravity (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$}]{ctrl1,  }\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{float \&}]{gx,  }\item[{float \&}]{gy }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00566                                                  \{}
\DoxyCodeLine{00567   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} raster32 = ctrl1-\/>getRaster();}
\DoxyCodeLine{00568   \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} raster64 = ctrl1-\/>getRaster();}
\DoxyCodeLine{00569   \mbox{\hyperlink{class_t_point_t}{TPointD}} tmp(x, y);}
\DoxyCodeLine{00570   tmp -\/= ctrl1-\/>m\_pos;}
\DoxyCodeLine{00571   \textcolor{keywordtype}{int} radius = 2;}
\DoxyCodeLine{00572   gx         = 0;}
\DoxyCodeLine{00573   gy         = 0;}
\DoxyCodeLine{00574 }
\DoxyCodeLine{00575   \textcolor{keywordtype}{float} norm = 1.0f;}
\DoxyCodeLine{00576 }
\DoxyCodeLine{00577   \textcolor{keywordflow}{if} (raster32) \{}
\DoxyCodeLine{00578     raster32-\/>lock();}
\DoxyCodeLine{00579     \textcolor{keywordflow}{if} (raster32 \&\& tmp.x >= radius \&\& tmp.x < raster32-\/>getLx() -\/ radius \&\&}
\DoxyCodeLine{00580         tmp.y >= radius \&\& tmp.y < raster32-\/>getLy() -\/ radius) \{}
\DoxyCodeLine{00581       TPixel32 *pix = \&(raster32-\/>pixels(troundp(tmp.y))[(int)tmp.x]);}
\DoxyCodeLine{00582 }
\DoxyCodeLine{00583       gx += 2 * \mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(*(pix + 1)).value;}
\DoxyCodeLine{00584       gx += \mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(*(pix + 1 + raster32-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00585       gx += \mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(*(pix + 1 -\/ raster32-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00586 }
\DoxyCodeLine{00587       gx -\/= 2 * \mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(*(pix -\/ 1)).value;}
\DoxyCodeLine{00588       gx -\/= \mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(*(pix -\/ 1 + raster32-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00589       gx -\/= \mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(*(pix -\/ 1 -\/ raster32-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00590 }
\DoxyCodeLine{00591       gy += 2 * \mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(*(pix + raster32-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00592       gy += \mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(*(pix + raster32-\/>getWrap() * 1 + 1)).value;}
\DoxyCodeLine{00593       gy += \mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(*(pix + raster32-\/>getWrap() * 1 -\/ 1)).value;}
\DoxyCodeLine{00594 }
\DoxyCodeLine{00595       gy -\/= 2 * \mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(*(pix -\/ raster32-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00596       gy -\/= \mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(*(pix -\/ raster32-\/>getWrap() * 1 + 1)).value;}
\DoxyCodeLine{00597       gy -\/= \mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(*(pix -\/ raster32-\/>getWrap() * 1 -\/ 1)).value;}
\DoxyCodeLine{00598 }
\DoxyCodeLine{00599       norm = sqrtf(gx * gx + gy * gy);}
\DoxyCodeLine{00600       \textcolor{keywordflow}{if} (norm) \{}
\DoxyCodeLine{00601         \textcolor{keywordtype}{float} inorm = 0.1f / norm;}
\DoxyCodeLine{00602         gx          = gx * inorm;}
\DoxyCodeLine{00603         gy          = gy * inorm;}
\DoxyCodeLine{00604       \}}
\DoxyCodeLine{00605     \}}
\DoxyCodeLine{00606     raster32-\/>unlock();}
\DoxyCodeLine{00607 }
\DoxyCodeLine{00608     norm /= (float)(TPixelGR8::maxChannelValue);}
\DoxyCodeLine{00609 }
\DoxyCodeLine{00610   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (raster64) \{}
\DoxyCodeLine{00611     raster64-\/>lock();}
\DoxyCodeLine{00612     \textcolor{keywordflow}{if} (raster64 \&\& tmp.x >= radius \&\& tmp.x < raster64-\/>getLx() -\/ radius \&\&}
\DoxyCodeLine{00613         tmp.y >= radius \&\& tmp.y < raster64-\/>getLy() -\/ radius) \{}
\DoxyCodeLine{00614       TPixel64 *pix = \&(raster64-\/>pixels(troundp(tmp.y))[(\textcolor{keywordtype}{int})tmp.x]);}
\DoxyCodeLine{00615 }
\DoxyCodeLine{00616       gx += 2 * TPixelGR16::from(*(pix + 1)).value;}
\DoxyCodeLine{00617       gx += TPixelGR16::from(*(pix + 1 + raster64-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00618       gx += TPixelGR16::from(*(pix + 1 -\/ raster64-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00619 }
\DoxyCodeLine{00620       gx -\/= 2 * TPixelGR16::from(*(pix -\/ 1)).value;}
\DoxyCodeLine{00621       gx -\/= TPixelGR16::from(*(pix -\/ 1 + raster64-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00622       gx -\/= TPixelGR16::from(*(pix -\/ 1 -\/ raster64-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00623 }
\DoxyCodeLine{00624       gy += 2 * TPixelGR16::from(*(pix + raster64-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00625       gy += TPixelGR16::from(*(pix + raster64-\/>getWrap() * 1 + 1)).value;}
\DoxyCodeLine{00626       gy += TPixelGR16::from(*(pix + raster64-\/>getWrap() * 1 -\/ 1)).value;}
\DoxyCodeLine{00627 }
\DoxyCodeLine{00628       gy -\/= 2 * TPixelGR16::from(*(pix -\/ raster64-\/>getWrap() * 1)).value;}
\DoxyCodeLine{00629       gy -\/= TPixelGR16::from(*(pix -\/ raster64-\/>getWrap() * 1 + 1)).value;}
\DoxyCodeLine{00630       gy -\/= TPixelGR16::from(*(pix -\/ raster64-\/>getWrap() * 1 -\/ 1)).value;}
\DoxyCodeLine{00631 }
\DoxyCodeLine{00632       norm = sqrtf(gx * gx + gy * gy);}
\DoxyCodeLine{00633       \textcolor{keywordflow}{if} (norm) \{}
\DoxyCodeLine{00634         \textcolor{keywordtype}{float} inorm = 0.1 / norm;}
\DoxyCodeLine{00635         gx          = gx * inorm;}
\DoxyCodeLine{00636         gy          = gy * inorm;}
\DoxyCodeLine{00637       \}}
\DoxyCodeLine{00638     \}}
\DoxyCodeLine{00639 }
\DoxyCodeLine{00640     raster64-\/>unlock();}
\DoxyCodeLine{00641     norm /= (float)(TPixelGR16::maxChannelValue);}
\DoxyCodeLine{00642   \}}
\DoxyCodeLine{00643   \textcolor{keywordflow}{return} norm;}
\DoxyCodeLine{00644 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_a93a300d6e17dc38da0dada7ba48be98e}\label{class_iwa___particle_a93a300d6e17dc38da0dada7ba48be98e}} 
\index{Iwa\_Particle@{Iwa\_Particle}!get\_image\_reference@{get\_image\_reference}}
\index{get\_image\_reference@{get\_image\_reference}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{get\_image\_reference()}{get\_image\_reference()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Particle\+::get\+\_\+image\+\_\+reference (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$}]{ctrl1,  }\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{float \&}]{imagereference,  }\item[{int}]{type }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00511                                                                         \{}
\DoxyCodeLine{00512   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} raster32 = ctrl-\/>getRaster();}
\DoxyCodeLine{00513   \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} raster64 = ctrl-\/>getRaster();}
\DoxyCodeLine{00514   \mbox{\hyperlink{class_t_point_t}{TPointD}} tmp(x, y);}
\DoxyCodeLine{00515   tmp -\/= ctrl-\/>m\_pos;}
\DoxyCodeLine{00516   imagereference = 0.0;}
\DoxyCodeLine{00517 }
\DoxyCodeLine{00518   \textcolor{keywordflow}{if} (raster32)}
\DoxyCodeLine{00519     raster32-\/>lock();}
\DoxyCodeLine{00520   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (raster64)}
\DoxyCodeLine{00521     raster64-\/>lock();}
\DoxyCodeLine{00522 }
\DoxyCodeLine{00523   \textcolor{keywordflow}{switch} (type) \{}
\DoxyCodeLine{00524   \textcolor{keywordflow}{case} Iwa\_TiledParticlesFx::GRAY\_REF:}
\DoxyCodeLine{00525     \textcolor{keywordflow}{if} (raster32 \&\& tmp.x >= 0 \&\& tmp.x < raster32-\/>getLx() \&\& tmp.y >= 0 \&\&}
\DoxyCodeLine{00526         troundp(tmp.y) < raster32-\/>getLy()) \{}
\DoxyCodeLine{00527       TPixel32 pix = raster32-\/>pixels(troundp(tmp.y))[(int)tmp.x];}
\DoxyCodeLine{00528       imagereference =}
\DoxyCodeLine{00529           \mbox{\hyperlink{class_t_pixel_g_r8_aa60eac9adab1b27ada505bffd6301e51}{TPixelGR8::from}}(pix).value / (float)TPixelGR8::maxChannelValue;}
\DoxyCodeLine{00530     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (raster64 \&\& tmp.x >= 0 \&\& tmp.x < raster64-\/>getLx() \&\&}
\DoxyCodeLine{00531                tmp.y >= 0 \&\& troundp(tmp.y) < raster64-\/>getLy()) \{}
\DoxyCodeLine{00532       TPixel64 pix = raster64-\/>pixels(troundp(tmp.y))[(\textcolor{keywordtype}{int})tmp.x];}
\DoxyCodeLine{00533       imagereference =}
\DoxyCodeLine{00534           TPixelGR16::from(pix).value / (float)TPixelGR16::maxChannelValue;}
\DoxyCodeLine{00535     \}}
\DoxyCodeLine{00536     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00537   \textcolor{keywordflow}{case} Iwa\_TiledParticlesFx::H\_REF:}
\DoxyCodeLine{00538     \textcolor{keywordflow}{if} (raster32 \&\& tmp.x >= 0 \&\& tmp.x < raster32-\/>getLx() \&\& tmp.y >= 0 \&\&}
\DoxyCodeLine{00539         tround(tmp.y) < raster32-\/>getLy()) \{}
\DoxyCodeLine{00540       \textcolor{keywordtype}{float} aux = (float)TPixel32::maxChannelValue;}
\DoxyCodeLine{00541       \textcolor{keywordtype}{double} h, s, v;}
\DoxyCodeLine{00542       TPixel32 pix = raster32-\/>pixels(troundp(tmp.y))[(\textcolor{keywordtype}{int})tmp.x];}
\DoxyCodeLine{00543       OLDRGB2HSV(pix.r / aux, pix.g / aux, pix.b / aux, \&h, \&s, \&v);}
\DoxyCodeLine{00544       imagereference = (float)h / 360.0f;}
\DoxyCodeLine{00545     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (raster64 \&\& tmp.x >= 0 \&\& tmp.x < raster64-\/>getLx() \&\&}
\DoxyCodeLine{00546                tmp.y >= 0 \&\& tround(tmp.y) < raster64-\/>getLy()) \{}
\DoxyCodeLine{00547       \textcolor{keywordtype}{float} aux = (float)TPixel64::maxChannelValue;}
\DoxyCodeLine{00548       \textcolor{keywordtype}{double} h, s, v;}
\DoxyCodeLine{00549       TPixel64 pix = raster64-\/>pixels(troundp(tmp.y))[(\textcolor{keywordtype}{int})tmp.x];}
\DoxyCodeLine{00550       OLDRGB2HSV(pix.r / aux, pix.g / aux, pix.b / aux, \&h, \&s, \&v);}
\DoxyCodeLine{00551       imagereference = (float)h / 360.0f;}
\DoxyCodeLine{00552     \}}
\DoxyCodeLine{00553     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00554   \}}
\DoxyCodeLine{00555 }
\DoxyCodeLine{00556   \textcolor{keywordflow}{if} (raster32)}
\DoxyCodeLine{00557     raster32-\/>unlock();}
\DoxyCodeLine{00558   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (raster64)}
\DoxyCodeLine{00559     raster64-\/>unlock();}
\DoxyCodeLine{00560 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_a7fd8d796cbd22e3bc33d39eb8f0ea428}\label{class_iwa___particle_a7fd8d796cbd22e3bc33d39eb8f0ea428}} 
\index{Iwa\_Particle@{Iwa\_Particle}!get\_image\_reference@{get\_image\_reference}}
\index{get\_image\_reference@{get\_image\_reference}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{get\_image\_reference()}{get\_image\_reference()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Particle\+::get\+\_\+image\+\_\+reference (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} $\ast$}]{ctrl1,  }\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{TPixel32 \&}]{color }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00700                                                         \{}
\DoxyCodeLine{00701   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} raster32 = ctrl1-\/>getRaster();}
\DoxyCodeLine{00702   \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} raster64 = ctrl1-\/>getRaster();}
\DoxyCodeLine{00703 }
\DoxyCodeLine{00704   \mbox{\hyperlink{class_t_point_t}{TPointD}} tmp(x, y);}
\DoxyCodeLine{00705   tmp -\/= ctrl1-\/>m\_pos;}
\DoxyCodeLine{00706 }
\DoxyCodeLine{00707   \textcolor{keywordflow}{if} (raster32 \&\& tmp.x >= 0 \&\& tmp.x < raster32-\/>getLx() \&\& tmp.y >= 0 \&\&}
\DoxyCodeLine{00708       troundp(tmp.y) < raster32-\/>getLy()) \{}
\DoxyCodeLine{00709     color = raster32-\/>pixels(troundp(tmp.y))[(int)tmp.x];}
\DoxyCodeLine{00710   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (raster64 \&\& tmp.x >= 0 \&\& tmp.x < raster64-\/>getLx() \&\&}
\DoxyCodeLine{00711              tmp.y >= 0 \&\& troundp(tmp.y) < raster64-\/>getLy()) \{}
\DoxyCodeLine{00712     TPixel64 pix64 = raster64-\/>pixels(troundp(tmp.y))[(\textcolor{keywordtype}{int})tmp.x];}
\DoxyCodeLine{00713     color = TPixel32((\textcolor{keywordtype}{int})pix64.r / 256, (\textcolor{keywordtype}{int})pix64.g / 256, (\textcolor{keywordtype}{int})pix64.b / 256,}
\DoxyCodeLine{00714                      (\textcolor{keywordtype}{int})pix64.m / 256);}
\DoxyCodeLine{00715   \}}
\DoxyCodeLine{00716   \textcolor{comment}{/*-\/ 参照画像のBBoxの外側で、粒子の色を透明にする -\/*/}}
\DoxyCodeLine{00717   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00718     color = TPixel32::Transparent;}
\DoxyCodeLine{00719 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_a759a752f51f5160008311b08c021252c}\label{class_iwa___particle_a759a752f51f5160008311b08c021252c}} 
\index{Iwa\_Particle@{Iwa\_Particle}!modify\_colors@{modify\_colors}}
\index{modify\_colors@{modify\_colors}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{modify\_colors()}{modify\_colors()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Particle\+::modify\+\_\+colors (\begin{DoxyParamCaption}\item[{TPixel32 \&}]{color,  }\item[{double \&}]{intensity }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00302                                                                    \{}
\DoxyCodeLine{00303   \textcolor{keywordtype}{float} percent = 0;}
\DoxyCodeLine{00304 }
\DoxyCodeLine{00305   \textcolor{keywordflow}{if} ((gencol.fadecol || fincol.fadecol) \&\&}
\DoxyCodeLine{00306       (genlifetime -\/ lifetime) <= fincol.rangecol) \{}
\DoxyCodeLine{00307     \textcolor{keywordflow}{if} (fincol.rangecol)}
\DoxyCodeLine{00308       percent = (genlifetime -\/ lifetime) / (\textcolor{keywordtype}{float})(fincol.rangecol);}
\DoxyCodeLine{00309     color     = blend(gencol.col, fincol.col, percent);}
\DoxyCodeLine{00310     intensity = gencol.fadecol + percent * (fincol.fadecol -\/ gencol.fadecol);}
\DoxyCodeLine{00311   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (foutcol.fadecol \&\& lifetime <= foutcol.rangecol) \{}
\DoxyCodeLine{00312     \textcolor{keywordflow}{if} (foutcol.rangecol)}
\DoxyCodeLine{00313       percent = 1 -\/ (lifetime -\/ 1) / (\textcolor{keywordtype}{float})(foutcol.rangecol);}
\DoxyCodeLine{00314     \textcolor{keywordflow}{if} (fincol.rangecol \&\& fincol.fadecol) \{}
\DoxyCodeLine{00315       color     = blend(fincol.col, foutcol.col, percent);}
\DoxyCodeLine{00316       intensity = fincol.fadecol + percent * (foutcol.fadecol -\/ fincol.fadecol);}
\DoxyCodeLine{00317     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00318       color     = blend(gencol.col, foutcol.col, percent);}
\DoxyCodeLine{00319       intensity = gencol.fadecol + percent * (foutcol.fadecol -\/ gencol.fadecol);}
\DoxyCodeLine{00320     \}}
\DoxyCodeLine{00321   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00322     \textcolor{keywordflow}{if} (fincol.fadecol \&\& fincol.rangecol) \{}
\DoxyCodeLine{00323       color     = fincol.col;}
\DoxyCodeLine{00324       intensity = fincol.fadecol;}
\DoxyCodeLine{00325     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00326       color     = gencol.col;}
\DoxyCodeLine{00327       intensity = gencol.fadecol;}
\DoxyCodeLine{00328     \}}
\DoxyCodeLine{00329   \}}
\DoxyCodeLine{00330 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_ac49f713faa56a5c399dfaf87a2b3a932}\label{class_iwa___particle_ac49f713faa56a5c399dfaf87a2b3a932}} 
\index{Iwa\_Particle@{Iwa\_Particle}!modify\_colors\_and\_opacity@{modify\_colors\_and\_opacity}}
\index{modify\_colors\_and\_opacity@{modify\_colors\_and\_opacity}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{modify\_colors\_and\_opacity()}{modify\_colors\_and\_opacity()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Particle\+::modify\+\_\+colors\+\_\+and\+\_\+opacity (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{float}]{curr\+\_\+opacity,  }\item[{int}]{dist\+\_\+frame,  }\item[{\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}}]{raster }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00337                                                                   \{}
\DoxyCodeLine{00338   \textcolor{keywordtype}{double} intensity = 0;}
\DoxyCodeLine{00339   TPixel32 col;}
\DoxyCodeLine{00340   \textcolor{keywordflow}{if} (gencol.fadecol || fincol.fadecol || foutcol.fadecol) \{}
\DoxyCodeLine{00341     modify\_colors(col, intensity);}
\DoxyCodeLine{00342     \textcolor{keywordtype}{int} j;}
\DoxyCodeLine{00343     raster32-\/>lock();}
\DoxyCodeLine{00344     \textcolor{keywordflow}{for} (j = 0; j < raster32-\/>getLy(); j++) \{}
\DoxyCodeLine{00345       TPixel32 *pix    = raster32-\/>pixels(j);}
\DoxyCodeLine{00346       TPixel32 *endPix = pix + raster32-\/>getLx();}
\DoxyCodeLine{00347       \textcolor{keywordflow}{while} (pix < endPix) \{}
\DoxyCodeLine{00348         \textcolor{keywordtype}{double} factor = pix-\/>m / 255.0;}
\DoxyCodeLine{00349         pix-\/>r        = (UCHAR)(pix-\/>r + intensity * (factor * col.r -\/ pix-\/>r));}
\DoxyCodeLine{00350         pix-\/>g        = (UCHAR)(pix-\/>g + intensity * (factor * col.g -\/ pix-\/>g));}
\DoxyCodeLine{00351         pix-\/>b        = (UCHAR)(pix-\/>b + intensity * (factor * col.b -\/ pix-\/>b));}
\DoxyCodeLine{00352         pix-\/>m        = (UCHAR)(pix-\/>m + intensity * (factor * col.m -\/ pix-\/>m));}
\DoxyCodeLine{00353         ++pix;}
\DoxyCodeLine{00354       \}}
\DoxyCodeLine{00355     \}}
\DoxyCodeLine{00356     raster32-\/>unlock();}
\DoxyCodeLine{00357   \}}
\DoxyCodeLine{00358 }
\DoxyCodeLine{00359   \textcolor{keywordflow}{if} (curr\_opacity != 1.0)}
\DoxyCodeLine{00360     \mbox{\hyperlink{namespace_t_rop_a66da5845870f824caab9c6fc47d6b8bd}{TRop::rgbmScale}}(raster32, raster32, 1, 1, 1, curr\_opacity);}
\DoxyCodeLine{00361 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_a0d019b339b849881d1350d7a6a7ad420}\label{class_iwa___particle_a0d019b339b849881d1350d7a6a7ad420}} 
\index{Iwa\_Particle@{Iwa\_Particle}!move@{move}}
\index{move@{move}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{move()}{move()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Particle\+::move (\begin{DoxyParamCaption}\item[{const std\+::map$<$ int, \mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ $>$}]{porttiles,  }\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&}]{ranges,  }\item[{float}]{windx,  }\item[{float}]{windy,  }\item[{float}]{xgravity,  }\item[{float}]{ygravity,  }\item[{float}]{dpi,  }\item[{int}]{lastframe }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00932                                                       \{}
\DoxyCodeLine{00933   \textcolor{keyword}{struct }\mbox{\hyperlink{structpos__dummy}{pos\_dummy}} dummy;}
\DoxyCodeLine{00934   std::map<int, float> imagereferences;}
\DoxyCodeLine{00935   dummy.x = dummy.y = dummy.a = 0.0;}
\DoxyCodeLine{00936 }
\DoxyCodeLine{00937   \textcolor{keywordtype}{float} frictreference     = 1;}
\DoxyCodeLine{00938   \textcolor{keywordtype}{float} scalereference     = 0;}
\DoxyCodeLine{00939   \textcolor{keywordtype}{float} scalestepreference = 0;}
\DoxyCodeLine{00940   \textcolor{keywordtype}{float} randomxreference   = 1;}
\DoxyCodeLine{00941   \textcolor{keywordtype}{float} randomyreference   = 1;}
\DoxyCodeLine{00942 }
\DoxyCodeLine{00943   \textcolor{comment}{/*-\/}}
\DoxyCodeLine{00944 \textcolor{comment}{   * 移動に用いるパラメータに参照画像が刺さっている場合は、あらかじめ取得しておく}}
\DoxyCodeLine{00945 \textcolor{comment}{   * -\/*/}}
\DoxyCodeLine{00946   \textcolor{keywordflow}{for} (std::map<int, TTile *>::iterator it = porttiles.begin();}
\DoxyCodeLine{00947        it != porttiles.end(); ++it) \{}
\DoxyCodeLine{00948     \textcolor{keywordflow}{if} ((values.friction\_ctrl\_val == it-\/>first ||}
\DoxyCodeLine{00949          values.scale\_ctrl\_val == it-\/>first ||}
\DoxyCodeLine{00950          values.scalestep\_ctrl\_val == it-\/>first ||}
\DoxyCodeLine{00951          values.randomx\_ctrl\_val == it-\/>first ||}
\DoxyCodeLine{00952          values.randomy\_ctrl\_val == it-\/>first) \&\&}
\DoxyCodeLine{00953         it-\/>second-\/>getRaster()) \{}
\DoxyCodeLine{00954       \textcolor{keywordtype}{float} tmpvalue;}
\DoxyCodeLine{00955       get\_image\_reference(it-\/>second, values, tmpvalue,}
\DoxyCodeLine{00956                           Iwa\_TiledParticlesFx::GRAY\_REF);}
\DoxyCodeLine{00957       imagereferences[it-\/>first] = tmpvalue;}
\DoxyCodeLine{00958     \}}
\DoxyCodeLine{00959   \}}
\DoxyCodeLine{00960 }
\DoxyCodeLine{00961   \textcolor{keywordflow}{if} (values.randomx\_ctrl\_val)}
\DoxyCodeLine{00962     randomxreference = imagereferences[values.randomx\_ctrl\_val];}
\DoxyCodeLine{00963   \textcolor{keywordflow}{if} (values.randomy\_ctrl\_val)}
\DoxyCodeLine{00964     randomyreference = imagereferences[values.randomy\_ctrl\_val];}
\DoxyCodeLine{00965 }
\DoxyCodeLine{00966   \textcolor{keywordflow}{if} (check\_Swing(values))}
\DoxyCodeLine{00967     update\_Swing(values, ranges, dummy, randomxreference, randomyreference);}
\DoxyCodeLine{00968 }
\DoxyCodeLine{00969   \textcolor{keywordflow}{if} (values.friction\_ctrl\_val)}
\DoxyCodeLine{00970     frictreference = imagereferences[values.friction\_ctrl\_val];}
\DoxyCodeLine{00971 }
\DoxyCodeLine{00972   \textcolor{keywordflow}{if} (values.scale\_ctrl\_val)}
\DoxyCodeLine{00973     scalereference = imagereferences[values.scale\_ctrl\_val];}
\DoxyCodeLine{00974   \textcolor{keywordflow}{if} (values.scalestep\_ctrl\_val)}
\DoxyCodeLine{00975     scalestepreference = imagereferences[values.scalestep\_ctrl\_val];}
\DoxyCodeLine{00976   lifetime-\/-\/;}
\DoxyCodeLine{00977   oldx = x;}
\DoxyCodeLine{00978   oldy = y;}
\DoxyCodeLine{00979 }
\DoxyCodeLine{00980   \textcolor{keywordflow}{if} (values.gravity\_ctrl\_val \&\&}
\DoxyCodeLine{00981       (porttiles.find(values.gravity\_ctrl\_val) != porttiles.end())) \{}
\DoxyCodeLine{00982     get\_image\_gravity(porttiles[values.gravity\_ctrl\_val], values, xgravity,}
\DoxyCodeLine{00983                       ygravity);}
\DoxyCodeLine{00984     xgravity *= values.gravity\_val;}
\DoxyCodeLine{00985     ygravity *= values.gravity\_val;}
\DoxyCodeLine{00986   \}}
\DoxyCodeLine{00987 }
\DoxyCodeLine{00988   \textcolor{keywordflow}{if} (\textcolor{keywordtype}{double} friction = values.friction\_val * frictreference) \{}
\DoxyCodeLine{00989     \textcolor{keywordflow}{if} (vx || vy) \{}
\DoxyCodeLine{00990       \textcolor{keywordtype}{double} v           = std::sqrt(vx * vx + vy * vy);}
\DoxyCodeLine{00991       \textcolor{keywordtype}{double} frictined\_v = v * (1 + friction) + (10 / v) * friction;}
\DoxyCodeLine{00992       \textcolor{keywordflow}{if} (frictined\_v < 0) frictined\_v = 0;}
\DoxyCodeLine{00993 }
\DoxyCodeLine{00994       \textcolor{keywordtype}{double} f\_ratio = frictined\_v / v;}
\DoxyCodeLine{00995       \textcolor{keywordflow}{if} (vx) vx *= f\_ratio;}
\DoxyCodeLine{00996       \textcolor{keywordflow}{if} (vy) vy *= f\_ratio;}
\DoxyCodeLine{00997     \}}
\DoxyCodeLine{00998     \textcolor{keywordflow}{if} (!vx \&\& fabs(friction * 10) > fabs(xgravity)) \{}
\DoxyCodeLine{00999       xgravity = 0;}
\DoxyCodeLine{01000       dummy.x  = 0;}
\DoxyCodeLine{01001       dummy.a  = 0;}
\DoxyCodeLine{01002       windx    = 0;}
\DoxyCodeLine{01003     \}}
\DoxyCodeLine{01004     \textcolor{keywordflow}{if} (!vy \&\& fabs(friction * 10) > fabs(xgravity)) \{}
\DoxyCodeLine{01005       xgravity = 0;}
\DoxyCodeLine{01006       dummy.x  = 0;}
\DoxyCodeLine{01007       dummy.a  = 0;}
\DoxyCodeLine{01008       windx    = 0;}
\DoxyCodeLine{01009     \}}
\DoxyCodeLine{01010   \}}
\DoxyCodeLine{01011 }
\DoxyCodeLine{01012   \textcolor{comment}{/*-\/ 重力を徐々に付けていく処理を入れる -\/*/}}
\DoxyCodeLine{01013   \textcolor{keywordflow}{if} (genlifetime -\/ lifetime < values.iw\_gravityBufferFrame\_val) \{}
\DoxyCodeLine{01014     \textcolor{keywordtype}{float} ratio = (float)(genlifetime -\/ lifetime) /}
\DoxyCodeLine{01015                   (float)values.iw\_gravityBufferFrame\_val;}
\DoxyCodeLine{01016     xgravity *= ratio;}
\DoxyCodeLine{01017     ygravity *= ratio;}
\DoxyCodeLine{01018   \}}
\DoxyCodeLine{01019 }
\DoxyCodeLine{01020   \textcolor{comment}{/*-\/ 重力の寄与 -\/*/}}
\DoxyCodeLine{01021   vx += xgravity * mass;}
\DoxyCodeLine{01022   vy += ygravity * mass;}
\DoxyCodeLine{01023 }
\DoxyCodeLine{01024   \textcolor{comment}{/*-\/ カールノイズ的動き 奥行き持たせる -\/*/}}
\DoxyCodeLine{01025   \textcolor{keywordflow}{if} (values.curl\_ctrl\_1\_val \&\&}
\DoxyCodeLine{01026       (porttiles.find(values.curl\_ctrl\_1\_val) != porttiles.end())) \{}
\DoxyCodeLine{01027     \textcolor{keywordtype}{float} tmpCurlx, tmpCurly;}
\DoxyCodeLine{01028     \textcolor{keywordflow}{if} (get\_image\_curl(porttiles[values.curl\_ctrl\_1\_val], values, tmpCurlx,}
\DoxyCodeLine{01029                        tmpCurly)) \{}
\DoxyCodeLine{01030       \textcolor{keywordflow}{if} (values.curl\_ctrl\_2\_val \&\&}
\DoxyCodeLine{01031           (porttiles.find(values.curl\_ctrl\_2\_val) != porttiles.end())) \{}
\DoxyCodeLine{01032         \textcolor{keywordtype}{float} tmpCurlx2, tmpCurly2;}
\DoxyCodeLine{01033         \textcolor{keywordflow}{if} (get\_image\_curl(porttiles[values.curl\_ctrl\_2\_val], values, tmpCurlx2,}
\DoxyCodeLine{01034                            tmpCurly2)) \{}
\DoxyCodeLine{01035           \textcolor{keywordtype}{float} length1 = sqrtf(tmpCurlx * tmpCurlx + tmpCurly * tmpCurly);}
\DoxyCodeLine{01036           \textcolor{keywordtype}{float} length2 = sqrtf(tmpCurlx2 * tmpCurlx2 + tmpCurly2 * tmpCurly2);}
\DoxyCodeLine{01037           \textcolor{keywordtype}{float} length  = length1 * curlz + length2 * (1.0f -\/ curlz);}
\DoxyCodeLine{01038 }
\DoxyCodeLine{01039           tmpCurlx     = tmpCurlx * curlz + tmpCurlx2 * (1.0f -\/ curlz);}
\DoxyCodeLine{01040           tmpCurly     = tmpCurly * curlz + tmpCurly2 * (1.0f -\/ curlz);}
\DoxyCodeLine{01041           \textcolor{keywordtype}{float} tmpLen = tmpCurlx * tmpCurlx + tmpCurly * tmpCurly;}
\DoxyCodeLine{01042           \textcolor{keywordflow}{if} (tmpLen > 0.0f) \{}
\DoxyCodeLine{01043             tmpLen = sqrtf(tmpLen);}
\DoxyCodeLine{01044             tmpCurlx *= length / tmpLen;}
\DoxyCodeLine{01045             tmpCurly *= length / tmpLen;}
\DoxyCodeLine{01046           \}}
\DoxyCodeLine{01047         \}}
\DoxyCodeLine{01048       \}}
\DoxyCodeLine{01049 }
\DoxyCodeLine{01050       tmpCurlx *= values.curl\_val * mass;}
\DoxyCodeLine{01051       tmpCurly *= values.curl\_val * mass;}
\DoxyCodeLine{01052 }
\DoxyCodeLine{01053       \textcolor{comment}{/*-\/ ローパスフィルタをかます -\/*/}}
\DoxyCodeLine{01054       curlx = 0.5f * curlx + 0.5f * tmpCurlx;}
\DoxyCodeLine{01055       curly = 0.5f * curly + 0.5f * tmpCurly;}
\DoxyCodeLine{01056 }
\DoxyCodeLine{01057       vx = vx * 0.5 + curlx;}
\DoxyCodeLine{01058       vy = vy * 0.5 + curly;}
\DoxyCodeLine{01059     \}}
\DoxyCodeLine{01060   \}}
\DoxyCodeLine{01061 }
\DoxyCodeLine{01062   \textcolor{comment}{/*-\/ 現在位置に速度を足す -\/*/}}
\DoxyCodeLine{01063   \textcolor{keywordflow}{if} (values.speedscale\_val) \{}
\DoxyCodeLine{01064     \textcolor{keywordtype}{float} scalecorr = scale / dpicorr;}
\DoxyCodeLine{01065     x += (vx + windx + dummy.x) * scalecorr;}
\DoxyCodeLine{01066     y += (vy + windy + dummy.y) * scalecorr;}
\DoxyCodeLine{01067   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01068     x += vx + windx + dummy.x;}
\DoxyCodeLine{01069     y += vy + windy + dummy.y;}
\DoxyCodeLine{01070   \}}
\DoxyCodeLine{01071   \textcolor{comment}{/*-\/ 粒子の向きを計算 -\/*/}}
\DoxyCodeLine{01072   angle -\/= values.rotspeed\_val + dummy.a;}
\DoxyCodeLine{01073 }
\DoxyCodeLine{01074   \textcolor{keywordflow}{if} (!(lifetime \% values.step\_val) || (frame < 0)) \{}
\DoxyCodeLine{01075     update\_Animation(values, 0, lastframe, 0);}
\DoxyCodeLine{01076   \}}
\DoxyCodeLine{01077 }
\DoxyCodeLine{01078   update\_Scale(values, ranges, scalereference, scalestepreference);}
\DoxyCodeLine{01079 }
\DoxyCodeLine{01080   \textcolor{comment}{/*-\/  ひらひら -\/*/}}
\DoxyCodeLine{01081   \textcolor{keywordflow}{if} (values.flap\_ctrl\_val \&\&}
\DoxyCodeLine{01082       (porttiles.find(values.flap\_ctrl\_val) != porttiles.end())) \{}
\DoxyCodeLine{01083     \textcolor{comment}{/*-\/ 参照画像のGradientを得る関数を利用して角度を得る -\/*/}}
\DoxyCodeLine{01084     \textcolor{keywordtype}{float} dir\_x, dir\_y;}
\DoxyCodeLine{01085     \textcolor{keywordtype}{double} norm;}
\DoxyCodeLine{01086     norm = get\_image\_gravity(porttiles[values.flap\_ctrl\_val], values, dir\_x,}
\DoxyCodeLine{01087                              dir\_y);}
\DoxyCodeLine{01088     \textcolor{keywordflow}{if} (dir\_x == 0.0f \&\& dir\_y == 0.0f) \{}
\DoxyCodeLine{01089     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01090       \textcolor{keywordtype}{float} newTheta = atan2f(dir\_y, dir\_x) * 180.0f / 3.14159f;}
\DoxyCodeLine{01091 }
\DoxyCodeLine{01092       \textcolor{comment}{/*-\/ Thetaを補間する。右回り/左回りで近いほうを選ぶ -\/*/}}
\DoxyCodeLine{01093       \textcolor{keywordflow}{if} (newTheta > flap\_theta \&\& newTheta -\/ flap\_theta > 180.0f)}
\DoxyCodeLine{01094         newTheta -\/= 360.0f;}
\DoxyCodeLine{01095       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (newTheta < flap\_theta \&\& flap\_theta -\/ newTheta > 180.0f)}
\DoxyCodeLine{01096         newTheta += 360.0f;}
\DoxyCodeLine{01097       flap\_theta = flap\_theta * (1.0f -\/ values.iw\_flap\_dir\_sensitivity\_val) +}
\DoxyCodeLine{01098                    newTheta * values.iw\_flap\_dir\_sensitivity\_val;}
\DoxyCodeLine{01099       if (flap\_theta < 0.0f)}
\DoxyCodeLine{01100         flap\_theta += 360.0f;}
\DoxyCodeLine{01101       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (flap\_theta > 360.0f)}
\DoxyCodeLine{01102         flap\_theta -\/= 360.0f;}
\DoxyCodeLine{01103 }
\DoxyCodeLine{01104       flap\_phi += values.iw\_flap\_velocity\_val * norm / mass;}
\DoxyCodeLine{01105 }
\DoxyCodeLine{01106       \textcolor{keywordflow}{while} (flap\_phi > 360.0f) flap\_phi -\/= 360.0f;}
\DoxyCodeLine{01107     \}}
\DoxyCodeLine{01108   \}}
\DoxyCodeLine{01109 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_a954f060b14e056dacb97d7aeddee4d95}\label{class_iwa___particle_a954f060b14e056dacb97d7aeddee4d95}} 
\index{Iwa\_Particle@{Iwa\_Particle}!set\_illuminated\_colors@{set\_illuminated\_colors}}
\index{set\_illuminated\_colors@{set\_illuminated\_colors}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{set\_illuminated\_colors()}{set\_illuminated\_colors()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Particle\+::set\+\_\+illuminated\+\_\+colors (\begin{DoxyParamCaption}\item[{float}]{illuminant,  }\item[{\mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}}}]{tex\+Raster }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00871                                                               \{}
\DoxyCodeLine{00872   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} texRas32 = texRaster;}
\DoxyCodeLine{00873   \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} texRas64 = texRaster;}
\DoxyCodeLine{00874   \textcolor{keywordflow}{if} (texRas32) \{}
\DoxyCodeLine{00875     texRas32-\/>lock();}
\DoxyCodeLine{00876     TPixel32::Channel val =}
\DoxyCodeLine{00877         (TPixel32::Channel)(illuminant * TPixel32::maxChannelValue);}
\DoxyCodeLine{00878     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < texRas32-\/>getLy(); j++) \{}
\DoxyCodeLine{00879       TPixel32 *pix    = texRas32-\/>pixels(j);}
\DoxyCodeLine{00880       TPixel32 *endPix = pix + texRas32-\/>getLx();}
\DoxyCodeLine{00881       \textcolor{keywordflow}{while} (pix < endPix) \{}
\DoxyCodeLine{00882         \textcolor{keywordtype}{double} factor = pix-\/>m / (double)TPixel32::maxChannelValue;}
\DoxyCodeLine{00883         pix-\/>r        = (UCHAR)(factor * val);}
\DoxyCodeLine{00884         pix-\/>g        = (UCHAR)(factor * val);}
\DoxyCodeLine{00885         pix-\/>b        = (UCHAR)(factor * val);}
\DoxyCodeLine{00886         ++pix;}
\DoxyCodeLine{00887       \}}
\DoxyCodeLine{00888     \}}
\DoxyCodeLine{00889     texRas32-\/>unlock();}
\DoxyCodeLine{00890   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (texRas64) \{}
\DoxyCodeLine{00891     texRas64-\/>lock();}
\DoxyCodeLine{00892     TPixel64::Channel val =}
\DoxyCodeLine{00893         (TPixel64::Channel)(illuminant * TPixel64::maxChannelValue);}
\DoxyCodeLine{00894     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < texRas64-\/>getLy(); j++) \{}
\DoxyCodeLine{00895       TPixel64 *pix    = texRas64-\/>pixels(j);}
\DoxyCodeLine{00896       TPixel64 *endPix = pix + texRas64-\/>getLx();}
\DoxyCodeLine{00897       \textcolor{keywordflow}{while} (pix < endPix) \{}
\DoxyCodeLine{00898         \textcolor{keywordtype}{double} factor = pix-\/>m / (double)TPixel64::maxChannelValue;}
\DoxyCodeLine{00899         pix-\/>r        = (USHORT)(factor * val);}
\DoxyCodeLine{00900         pix-\/>g        = (USHORT)(factor * val);}
\DoxyCodeLine{00901         pix-\/>b        = (USHORT)(factor * val);}
\DoxyCodeLine{00902         ++pix;}
\DoxyCodeLine{00903       \}}
\DoxyCodeLine{00904     \}}
\DoxyCodeLine{00905     texRas64-\/>unlock();}
\DoxyCodeLine{00906   \}}
\DoxyCodeLine{00907 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_abba167e80c7865ed06cb7021e8f58612}\label{class_iwa___particle_abba167e80c7865ed06cb7021e8f58612}} 
\index{Iwa\_Particle@{Iwa\_Particle}!set\_Opacity@{set\_Opacity}}
\index{set\_Opacity@{set\_Opacity}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{set\_Opacity()}{set\_Opacity()}}
{\footnotesize\ttfamily double Iwa\+\_\+\+Particle\+::set\+\_\+\+Opacity (\begin{DoxyParamCaption}\item[{std\+::map$<$ int, \mbox{\hyperlink{class_t_tile}{TTile}} $\ast$ $>$}]{porttiles,  }\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{float}]{opacity\+\_\+range,  }\item[{double}]{dist\+\_\+frame }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01115                                                                          \{}
\DoxyCodeLine{01116   \textcolor{keywordtype}{double} opacity = 1.0, trailcorr;}
\DoxyCodeLine{01117 }
\DoxyCodeLine{01118   \textcolor{keywordflow}{if} (values.fadein\_val \&\& (genlifetime -\/ lifetime) < values.fadein\_val)}
\DoxyCodeLine{01119     opacity *= (genlifetime -\/ lifetime -\/ 1) / (values.fadein\_val);}
\DoxyCodeLine{01120   \textcolor{keywordflow}{if} (values.fadeout\_val \&\& lifetime < values.fadeout\_val)}
\DoxyCodeLine{01121     opacity *= (lifetime) / values.fadeout\_val;}
\DoxyCodeLine{01122 }
\DoxyCodeLine{01123   if (trail) \{}
\DoxyCodeLine{01124     trailcorr =}
\DoxyCodeLine{01125         values.trailopacity\_val.first +}
\DoxyCodeLine{01126         (values.trailopacity\_val.second -\/ values.trailopacity\_val.first) *}
\DoxyCodeLine{01127             (1 -\/ (dist\_frame) / trail);}
\DoxyCodeLine{01128     opacity *= trailcorr;}
\DoxyCodeLine{01129   \}}
\DoxyCodeLine{01130   \textcolor{keywordflow}{if} (values.opacity\_ctrl\_val \&\&}
\DoxyCodeLine{01131       (porttiles.find(values.opacity\_ctrl\_val) != porttiles.end())) \{}
\DoxyCodeLine{01132     \textcolor{keywordtype}{float} opacityreference = 0.0f;}
\DoxyCodeLine{01133     get\_image\_reference(porttiles[values.opacity\_ctrl\_val], values,}
\DoxyCodeLine{01134                         opacityreference, Iwa\_TiledParticlesFx::GRAY\_REF);}
\DoxyCodeLine{01135     opacity =}
\DoxyCodeLine{01136         values.opacity\_val.first + (opacity\_range)*opacityreference * opacity;}
\DoxyCodeLine{01137   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01138     opacity = values.opacity\_val.first + opacity\_range * opacity;}
\DoxyCodeLine{01139   \textcolor{keywordflow}{return} opacity;}
\DoxyCodeLine{01140 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_a06bd0a111684b9f9b6a81eaabf4a60cb}\label{class_iwa___particle_a06bd0a111684b9f9b6a81eaabf4a60cb}} 
\index{Iwa\_Particle@{Iwa\_Particle}!spread\_color@{spread\_color}}
\index{spread\_color@{spread\_color}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{spread\_color()}{spread\_color()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Particle\+::spread\+\_\+color (\begin{DoxyParamCaption}\item[{TPixel32 \&}]{color,  }\item[{double}]{range }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00911                                                              \{}
\DoxyCodeLine{00912   \textcolor{keywordtype}{int} randcol = (int)((random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() -\/ 0.5) * range);}
\DoxyCodeLine{00913   \textcolor{keywordtype}{int} r       = color.r + randcol;}
\DoxyCodeLine{00914   \textcolor{keywordtype}{int} g       = color.g + randcol;}
\DoxyCodeLine{00915   \textcolor{keywordtype}{int} b       = color.b + randcol;}
\DoxyCodeLine{00916   color.r     = (UCHAR)tcrop<TINT32>(r, (TINT32)0, (TINT32)255);}
\DoxyCodeLine{00917   color.g     = (UCHAR)tcrop<TINT32>(g, (TINT32)0, (TINT32)255);}
\DoxyCodeLine{00918   color.b     = (UCHAR)tcrop<TINT32>(b, (TINT32)0, (TINT32)255);}
\DoxyCodeLine{00919 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_a9884a437ba87d0177277fe377891dd1d}\label{class_iwa___particle_a9884a437ba87d0177277fe377891dd1d}} 
\index{Iwa\_Particle@{Iwa\_Particle}!update\_Animation@{update\_Animation}}
\index{update\_Animation@{update\_Animation}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{update\_Animation()}{update\_Animation()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Particle\+::update\+\_\+\+Animation (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{int}]{first,  }\item[{int}]{last,  }\item[{int}]{keep }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00365                                                         \{}
\DoxyCodeLine{00366   \textcolor{keywordflow}{switch} (values.animation\_val) \{}
\DoxyCodeLine{00367   \textcolor{keywordflow}{case} Iwa\_TiledParticlesFx::ANIM\_RANDOM:}
\DoxyCodeLine{00368     frame = (int)(first + random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (last -\/ first));}
\DoxyCodeLine{00369     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00370   \textcolor{keywordflow}{case} Iwa\_TiledParticlesFx::ANIM\_R\_CYCLE:}
\DoxyCodeLine{00371   \textcolor{keywordflow}{case} Iwa\_TiledParticlesFx::ANIM\_CYCLE:}
\DoxyCodeLine{00372     \textcolor{keywordflow}{if} (!keep || frame != keep -\/ 1)}
\DoxyCodeLine{00373       frame = first + (frame + 1) \% (last -\/ first);}
\DoxyCodeLine{00374     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00375   \textcolor{keywordflow}{case} Iwa\_TiledParticlesFx::ANIM\_S\_CYCLE:}
\DoxyCodeLine{00376   \textcolor{keywordflow}{case} Iwa\_TiledParticlesFx::ANIM\_SR\_CYCLE:}
\DoxyCodeLine{00377     \textcolor{keywordflow}{if} (!keep || frame != keep -\/ 1) \{}
\DoxyCodeLine{00378       \textcolor{keywordflow}{if} (!animswing \&\& frame < last -\/ 1) \{}
\DoxyCodeLine{00379         frame = (frame + 1);}
\DoxyCodeLine{00380         \textcolor{keywordflow}{if} (frame == last -\/ 1) animswing = 1;}
\DoxyCodeLine{00381       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00382         frame = (frame -\/ 1);}
\DoxyCodeLine{00383       \textcolor{keywordflow}{if} (frame <= first) \{}
\DoxyCodeLine{00384         animswing = 0;}
\DoxyCodeLine{00385         frame     = first;}
\DoxyCodeLine{00386       \}}
\DoxyCodeLine{00387     \}}
\DoxyCodeLine{00388     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00389   \}}
\DoxyCodeLine{00390 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_aa1f74bef49743a4d6be9b035151836a1}\label{class_iwa___particle_aa1f74bef49743a4d6be9b035151836a1}} 
\index{Iwa\_Particle@{Iwa\_Particle}!update\_Scale@{update\_Scale}}
\index{update\_Scale@{update\_Scale}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{update\_Scale()}{update\_Scale()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Particle\+::update\+\_\+\+Scale (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&}]{ranges,  }\item[{double}]{scalereference,  }\item[{double}]{scalestepreference }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00491                                                            \{}
\DoxyCodeLine{00492   \textcolor{keywordtype}{double} scalestep;}
\DoxyCodeLine{00493 }
\DoxyCodeLine{00494   \textcolor{keywordflow}{if} (values.scale\_ctrl\_val \&\& values.scale\_ctrl\_all\_val)}
\DoxyCodeLine{00495     scale = values.scale\_val.first + (ranges.scale\_range) * scalereference;}
\DoxyCodeLine{00496   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00497     \textcolor{keywordflow}{if} (values.scalestep\_ctrl\_val)}
\DoxyCodeLine{00498       scalestep = values.scalestep\_val.first +}
\DoxyCodeLine{00499                   (ranges.scalestep\_range) * scalestepreference;}
\DoxyCodeLine{00500     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00501       scalestep = values.scalestep\_val.first +}
\DoxyCodeLine{00502                   (ranges.scalestep\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}();}
\DoxyCodeLine{00503     \textcolor{keywordflow}{if} (scalestep) scale += scalestep;}
\DoxyCodeLine{00504   \}}
\DoxyCodeLine{00505   \textcolor{keywordflow}{if} (scale < 0.001) scale = 0;}
\DoxyCodeLine{00506 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___particle_a933aa202a4089fee0bbcaf48b4d8cfa5}\label{class_iwa___particle_a933aa202a4089fee0bbcaf48b4d8cfa5}} 
\index{Iwa\_Particle@{Iwa\_Particle}!update\_Swing@{update\_Swing}}
\index{update\_Swing@{update\_Swing}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{update\_Swing()}{update\_Swing()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Particle\+::update\+\_\+\+Swing (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structparticles__values}{particles\+\_\+values}} \&}]{values,  }\item[{const \mbox{\hyperlink{structparticles__ranges}{particles\+\_\+ranges}} \&}]{ranges,  }\item[{struct \mbox{\hyperlink{structpos__dummy}{pos\+\_\+dummy}} \&}]{dummy,  }\item[{double}]{randomxreference,  }\item[{double}]{randomyreference }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00397                                                          \{}
\DoxyCodeLine{00398   \textcolor{keywordflow}{if} (values.swingmode\_val == Iwa\_TiledParticlesFx::SWING\_SMOOTH) \{}
\DoxyCodeLine{00399     \textcolor{keywordflow}{if} (smperiodx)}
\DoxyCodeLine{00400       dummy.x =}
\DoxyCodeLine{00401           smswingx * randomxreference * sin((M\_PI * changesignx) / smperiodx);}
\DoxyCodeLine{00402     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00403       dummy.x = 0;}
\DoxyCodeLine{00404     \textcolor{keywordflow}{if} (smperiody)}
\DoxyCodeLine{00405       dummy.y =}
\DoxyCodeLine{00406           smswingy * randomyreference * sin((M\_PI * changesigny) / smperiody);}
\DoxyCodeLine{00407     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00408       dummy.y = 0;}
\DoxyCodeLine{00409   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00410     \textcolor{keywordflow}{if} (values.randomx\_ctrl\_val)}
\DoxyCodeLine{00411       dummy.x = (values.randomx\_val.first +}
\DoxyCodeLine{00412                  (ranges.randomx\_range) * randomxreference);}
\DoxyCodeLine{00413     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00414       dummy.x = (values.randomx\_val.first +}
\DoxyCodeLine{00415                  (ranges.randomx\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}());}
\DoxyCodeLine{00416     \textcolor{keywordflow}{if} (values.randomy\_ctrl\_val)}
\DoxyCodeLine{00417       dummy.y = (values.randomy\_val.first +}
\DoxyCodeLine{00418                  (ranges.randomy\_range) * randomyreference);}
\DoxyCodeLine{00419     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00420       dummy.y = (values.randomy\_val.first +}
\DoxyCodeLine{00421                  (ranges.randomy\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}());}
\DoxyCodeLine{00422   \}}
\DoxyCodeLine{00423 }
\DoxyCodeLine{00424   \textcolor{keywordflow}{if} (values.rotswingmode\_val == Iwa\_TiledParticlesFx::SWING\_SMOOTH) \{}
\DoxyCodeLine{00425     \textcolor{keywordflow}{if} (smperioda)}
\DoxyCodeLine{00426       dummy.a = smswinga * sin((M\_PI * changesigna) / smperioda);}
\DoxyCodeLine{00427     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00428       dummy.a = 0;}
\DoxyCodeLine{00429   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00430     dummy.a =}
\DoxyCodeLine{00431         (values.rotsca\_val.first + (ranges.rotsca\_range) * random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}());}
\DoxyCodeLine{00432 }
\DoxyCodeLine{00433   \textcolor{keywordflow}{if} (!(genlifetime -\/ lifetime)) \{}
\DoxyCodeLine{00434     signx = dummy.x > 0 ? 1 : -\/1;}
\DoxyCodeLine{00435     signy = dummy.y > 0 ? 1 : -\/1;}
\DoxyCodeLine{00436     signa = dummy.a > 0 ? 1 : -\/1;}
\DoxyCodeLine{00437   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00438     dummy.x = (fabs(dummy.x)) * signx;}
\DoxyCodeLine{00439     dummy.y = (fabs(dummy.y)) * signy;}
\DoxyCodeLine{00440     dummy.a = (fabs(dummy.a)) * signa;}
\DoxyCodeLine{00441   \}}
\DoxyCodeLine{00442 }
\DoxyCodeLine{00443   changesignx-\/-\/;}
\DoxyCodeLine{00444   changesigny-\/-\/;}
\DoxyCodeLine{00445   changesigna-\/-\/;}
\DoxyCodeLine{00446   \textcolor{keywordflow}{if} (changesignx <= 0) \{}
\DoxyCodeLine{00447     \textcolor{comment}{//  if(random-\/>getFloat()<0.5);}}
\DoxyCodeLine{00448     signx *= -\/1;}
\DoxyCodeLine{00449     changesignx = abs((\textcolor{keywordtype}{int})(values.swing\_val.first) +}
\DoxyCodeLine{00450                       (\textcolor{keywordtype}{int})(random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.swing\_range)));}
\DoxyCodeLine{00451     \textcolor{keywordflow}{if} (values.swingmode\_val == Iwa\_TiledParticlesFx::SWING\_SMOOTH) \{}
\DoxyCodeLine{00452       smperiodx = changesignx;}
\DoxyCodeLine{00453       \textcolor{keywordflow}{if} (values.randomx\_ctrl\_val)}
\DoxyCodeLine{00454         smswingx = values.randomx\_val.first +}
\DoxyCodeLine{00455                    randomxreference * (ranges.randomx\_range);}
\DoxyCodeLine{00456       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00457         smswingx = values.randomx\_val.first +}
\DoxyCodeLine{00458                    random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.randomx\_range);}
\DoxyCodeLine{00459     \}}
\DoxyCodeLine{00460   \}}
\DoxyCodeLine{00461   \textcolor{keywordflow}{if} (changesigny <= 0) \{}
\DoxyCodeLine{00462     \textcolor{comment}{//  if(random-\/>getFloat()<0.5);}}
\DoxyCodeLine{00463     signy *= -\/1;}
\DoxyCodeLine{00464     changesigny = abs((\textcolor{keywordtype}{int})(values.swing\_val.first) +}
\DoxyCodeLine{00465                       (\textcolor{keywordtype}{int})(random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.swing\_range)));}
\DoxyCodeLine{00466     \textcolor{keywordflow}{if} (values.swingmode\_val == Iwa\_TiledParticlesFx::SWING\_SMOOTH) \{}
\DoxyCodeLine{00467       smperiody = changesigny;}
\DoxyCodeLine{00468       \textcolor{keywordflow}{if} (values.randomy\_ctrl\_val)}
\DoxyCodeLine{00469         smswingy = values.randomy\_val.first +}
\DoxyCodeLine{00470                    randomyreference * (ranges.randomy\_range);}
\DoxyCodeLine{00471       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00472         smswingy = values.randomy\_val.first +}
\DoxyCodeLine{00473                    random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.randomy\_range);}
\DoxyCodeLine{00474     \}}
\DoxyCodeLine{00475   \}}
\DoxyCodeLine{00476   \textcolor{keywordflow}{if} (changesigna <= 0) \{}
\DoxyCodeLine{00477     signa *= -\/1;}
\DoxyCodeLine{00478     changesigna = abs((\textcolor{keywordtype}{int})(values.rotswing\_val.first) +}
\DoxyCodeLine{00479                       (\textcolor{keywordtype}{int})(random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.rotswing\_range)));}
\DoxyCodeLine{00480     \textcolor{keywordflow}{if} (values.rotswingmode\_val == Iwa\_TiledParticlesFx::SWING\_SMOOTH) \{}
\DoxyCodeLine{00481       smperioda = changesigna;}
\DoxyCodeLine{00482       smswinga =}
\DoxyCodeLine{00483           values.rotsca\_val.first + random.\mbox{\hyperlink{class_t_random_a3a7f6b3a8992fcde5b0c5e8bd2049e41}{getFloat}}() * (ranges.rotsca\_range);}
\DoxyCodeLine{00484     \}}
\DoxyCodeLine{00485   \}}
\DoxyCodeLine{00486 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_iwa___particle_a867e2a59fe0c2473e31170ec695f8701}\label{class_iwa___particle_a867e2a59fe0c2473e31170ec695f8701}} 
\index{Iwa\_Particle@{Iwa\_Particle}!angle@{angle}}
\index{angle@{angle}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{angle}{angle}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::angle}

\mbox{\Hypertarget{class_iwa___particle_a65f822c116ac189e1af6c2962432cd29}\label{class_iwa___particle_a65f822c116ac189e1af6c2962432cd29}} 
\index{Iwa\_Particle@{Iwa\_Particle}!animswing@{animswing}}
\index{animswing@{animswing}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{animswing}{animswing}}
{\footnotesize\ttfamily bool Iwa\+\_\+\+Particle\+::animswing}

\mbox{\Hypertarget{class_iwa___particle_acbbddbea7e49f638300fb3a2bc9629e6}\label{class_iwa___particle_acbbddbea7e49f638300fb3a2bc9629e6}} 
\index{Iwa\_Particle@{Iwa\_Particle}!changesigna@{changesigna}}
\index{changesigna@{changesigna}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{changesigna}{changesigna}}
{\footnotesize\ttfamily int Iwa\+\_\+\+Particle\+::changesigna}

\mbox{\Hypertarget{class_iwa___particle_a9b41d0585e5d88322cc3793b0abe902d}\label{class_iwa___particle_a9b41d0585e5d88322cc3793b0abe902d}} 
\index{Iwa\_Particle@{Iwa\_Particle}!changesignx@{changesignx}}
\index{changesignx@{changesignx}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{changesignx}{changesignx}}
{\footnotesize\ttfamily int Iwa\+\_\+\+Particle\+::changesignx}

\mbox{\Hypertarget{class_iwa___particle_a96979dbd9d6c3c585f7a6b4995ee1ae7}\label{class_iwa___particle_a96979dbd9d6c3c585f7a6b4995ee1ae7}} 
\index{Iwa\_Particle@{Iwa\_Particle}!changesigny@{changesigny}}
\index{changesigny@{changesigny}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{changesigny}{changesigny}}
{\footnotesize\ttfamily int Iwa\+\_\+\+Particle\+::changesigny}

\mbox{\Hypertarget{class_iwa___particle_a4fd00c521642bd0bb0c079016eb57758}\label{class_iwa___particle_a4fd00c521642bd0bb0c079016eb57758}} 
\index{Iwa\_Particle@{Iwa\_Particle}!curlx@{curlx}}
\index{curlx@{curlx}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{curlx}{curlx}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::curlx}

\mbox{\Hypertarget{class_iwa___particle_a467882242aa8aae9a2c35e3ee673b7c3}\label{class_iwa___particle_a467882242aa8aae9a2c35e3ee673b7c3}} 
\index{Iwa\_Particle@{Iwa\_Particle}!curly@{curly}}
\index{curly@{curly}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{curly}{curly}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::curly}

\mbox{\Hypertarget{class_iwa___particle_af9ca4f7907ab6ceb8e1dc32e17e20ca9}\label{class_iwa___particle_af9ca4f7907ab6ceb8e1dc32e17e20ca9}} 
\index{Iwa\_Particle@{Iwa\_Particle}!curlz@{curlz}}
\index{curlz@{curlz}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{curlz}{curlz}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::curlz}

\mbox{\Hypertarget{class_iwa___particle_a033c4fd0a7887aa18ebb0f450f0ff5d8}\label{class_iwa___particle_a033c4fd0a7887aa18ebb0f450f0ff5d8}} 
\index{Iwa\_Particle@{Iwa\_Particle}!fincol@{fincol}}
\index{fincol@{fincol}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{fincol}{fincol}}
{\footnotesize\ttfamily \mbox{\hyperlink{structcoldata}{coldata}} Iwa\+\_\+\+Particle\+::fincol}

\mbox{\Hypertarget{class_iwa___particle_a1daba06ac03241b9f05ac06e8f4c1fdf}\label{class_iwa___particle_a1daba06ac03241b9f05ac06e8f4c1fdf}} 
\index{Iwa\_Particle@{Iwa\_Particle}!flap\_phi@{flap\_phi}}
\index{flap\_phi@{flap\_phi}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{flap\_phi}{flap\_phi}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::flap\+\_\+phi}

\mbox{\Hypertarget{class_iwa___particle_aa2c1814742e229abec48449afc60cf0a}\label{class_iwa___particle_aa2c1814742e229abec48449afc60cf0a}} 
\index{Iwa\_Particle@{Iwa\_Particle}!flap\_theta@{flap\_theta}}
\index{flap\_theta@{flap\_theta}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{flap\_theta}{flap\_theta}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::flap\+\_\+theta}

\mbox{\Hypertarget{class_iwa___particle_aa593debb1dda585aa2d55dec3265d8f9}\label{class_iwa___particle_aa593debb1dda585aa2d55dec3265d8f9}} 
\index{Iwa\_Particle@{Iwa\_Particle}!foutcol@{foutcol}}
\index{foutcol@{foutcol}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{foutcol}{foutcol}}
{\footnotesize\ttfamily \mbox{\hyperlink{structcoldata}{coldata}} Iwa\+\_\+\+Particle\+::foutcol}

\mbox{\Hypertarget{class_iwa___particle_af216f163c05c4d0f7b9bb4a8028c8309}\label{class_iwa___particle_af216f163c05c4d0f7b9bb4a8028c8309}} 
\index{Iwa\_Particle@{Iwa\_Particle}!frame@{frame}}
\index{frame@{frame}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{frame}{frame}}
{\footnotesize\ttfamily int Iwa\+\_\+\+Particle\+::frame}

\mbox{\Hypertarget{class_iwa___particle_a992e18c9b688dbdc5b5022275647a833}\label{class_iwa___particle_a992e18c9b688dbdc5b5022275647a833}} 
\index{Iwa\_Particle@{Iwa\_Particle}!gencol@{gencol}}
\index{gencol@{gencol}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{gencol}{gencol}}
{\footnotesize\ttfamily \mbox{\hyperlink{structcoldata}{coldata}} Iwa\+\_\+\+Particle\+::gencol}

\mbox{\Hypertarget{class_iwa___particle_a9c57575c83d36e654c3f7251b53ca859}\label{class_iwa___particle_a9c57575c83d36e654c3f7251b53ca859}} 
\index{Iwa\_Particle@{Iwa\_Particle}!genlifetime@{genlifetime}}
\index{genlifetime@{genlifetime}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{genlifetime}{genlifetime}}
{\footnotesize\ttfamily int Iwa\+\_\+\+Particle\+::genlifetime}

\mbox{\Hypertarget{class_iwa___particle_a2d9d5dc1815e6f54fd936dfba9f6f6d1}\label{class_iwa___particle_a2d9d5dc1815e6f54fd936dfba9f6f6d1}} 
\index{Iwa\_Particle@{Iwa\_Particle}!initial\_angle@{initial\_angle}}
\index{initial\_angle@{initial\_angle}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{initial\_angle}{initial\_angle}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::initial\+\_\+angle}

\mbox{\Hypertarget{class_iwa___particle_ac7e20ca5cedb4bdb1ad194289c95e5d4}\label{class_iwa___particle_ac7e20ca5cedb4bdb1ad194289c95e5d4}} 
\index{Iwa\_Particle@{Iwa\_Particle}!initial\_scale@{initial\_scale}}
\index{initial\_scale@{initial\_scale}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{initial\_scale}{initial\_scale}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::initial\+\_\+scale}

\mbox{\Hypertarget{class_iwa___particle_ae90aaccbe24651219ae858dd2d1e04c7}\label{class_iwa___particle_ae90aaccbe24651219ae858dd2d1e04c7}} 
\index{Iwa\_Particle@{Iwa\_Particle}!initial\_x@{initial\_x}}
\index{initial\_x@{initial\_x}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{initial\_x}{initial\_x}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::initial\+\_\+x}

\mbox{\Hypertarget{class_iwa___particle_a62577a8d3718ca0d4e0ac42ff5dc7912}\label{class_iwa___particle_a62577a8d3718ca0d4e0ac42ff5dc7912}} 
\index{Iwa\_Particle@{Iwa\_Particle}!initial\_y@{initial\_y}}
\index{initial\_y@{initial\_y}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{initial\_y}{initial\_y}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::initial\+\_\+y}

\mbox{\Hypertarget{class_iwa___particle_a2cf3407e5528860a2a2b0807b3ef5e45}\label{class_iwa___particle_a2cf3407e5528860a2a2b0807b3ef5e45}} 
\index{Iwa\_Particle@{Iwa\_Particle}!level@{level}}
\index{level@{level}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{level}{level}}
{\footnotesize\ttfamily int Iwa\+\_\+\+Particle\+::level}

\mbox{\Hypertarget{class_iwa___particle_a4d8b522f64c91bbe410ff81b7e38b47d}\label{class_iwa___particle_a4d8b522f64c91bbe410ff81b7e38b47d}} 
\index{Iwa\_Particle@{Iwa\_Particle}!lifetime@{lifetime}}
\index{lifetime@{lifetime}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{lifetime}{lifetime}}
{\footnotesize\ttfamily int Iwa\+\_\+\+Particle\+::lifetime}

\mbox{\Hypertarget{class_iwa___particle_a6a1dd0e88fc449f9c9224c7c8ba0cdc9}\label{class_iwa___particle_a6a1dd0e88fc449f9c9224c7c8ba0cdc9}} 
\index{Iwa\_Particle@{Iwa\_Particle}!mass@{mass}}
\index{mass@{mass}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{mass}{mass}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::mass}

\mbox{\Hypertarget{class_iwa___particle_a1a2d76f60c5f57184f3c14c983e9e3a6}\label{class_iwa___particle_a1a2d76f60c5f57184f3c14c983e9e3a6}} 
\index{Iwa\_Particle@{Iwa\_Particle}!oldx@{oldx}}
\index{oldx@{oldx}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{oldx}{oldx}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::oldx}

\mbox{\Hypertarget{class_iwa___particle_a57ca669b1b28a5ff4c68565b1f536229}\label{class_iwa___particle_a57ca669b1b28a5ff4c68565b1f536229}} 
\index{Iwa\_Particle@{Iwa\_Particle}!oldy@{oldy}}
\index{oldy@{oldy}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{oldy}{oldy}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::oldy}

\mbox{\Hypertarget{class_iwa___particle_a7d1f4152b435c17393fb6196d00d0762}\label{class_iwa___particle_a7d1f4152b435c17393fb6196d00d0762}} 
\index{Iwa\_Particle@{Iwa\_Particle}!random@{random}}
\index{random@{random}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{random}{random}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_random}{TRandom}} Iwa\+\_\+\+Particle\+::random}

\mbox{\Hypertarget{class_iwa___particle_ab3f5837e473f9568817b915b06d65c61}\label{class_iwa___particle_ab3f5837e473f9568817b915b06d65c61}} 
\index{Iwa\_Particle@{Iwa\_Particle}!scale@{scale}}
\index{scale@{scale}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{scale}{scale}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::scale}

\mbox{\Hypertarget{class_iwa___particle_a4ff24ea07840615bae22a1ebba7d5e50}\label{class_iwa___particle_a4ff24ea07840615bae22a1ebba7d5e50}} 
\index{Iwa\_Particle@{Iwa\_Particle}!seed@{seed}}
\index{seed@{seed}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{seed}{seed}}
{\footnotesize\ttfamily int Iwa\+\_\+\+Particle\+::seed}

\mbox{\Hypertarget{class_iwa___particle_aac2218b7bea0c4e37a6a46438de34d41}\label{class_iwa___particle_aac2218b7bea0c4e37a6a46438de34d41}} 
\index{Iwa\_Particle@{Iwa\_Particle}!signa@{signa}}
\index{signa@{signa}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{signa}{signa}}
{\footnotesize\ttfamily int Iwa\+\_\+\+Particle\+::signa}

\mbox{\Hypertarget{class_iwa___particle_a5144ff13fd09836d6588afef720fefd2}\label{class_iwa___particle_a5144ff13fd09836d6588afef720fefd2}} 
\index{Iwa\_Particle@{Iwa\_Particle}!signx@{signx}}
\index{signx@{signx}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{signx}{signx}}
{\footnotesize\ttfamily int Iwa\+\_\+\+Particle\+::signx}

\mbox{\Hypertarget{class_iwa___particle_aea0110d2142a810d3c374b19a2de6d82}\label{class_iwa___particle_aea0110d2142a810d3c374b19a2de6d82}} 
\index{Iwa\_Particle@{Iwa\_Particle}!signy@{signy}}
\index{signy@{signy}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{signy}{signy}}
{\footnotesize\ttfamily int Iwa\+\_\+\+Particle\+::signy}

\mbox{\Hypertarget{class_iwa___particle_a412d8f5ef6c7f6140256ebfce807005b}\label{class_iwa___particle_a412d8f5ef6c7f6140256ebfce807005b}} 
\index{Iwa\_Particle@{Iwa\_Particle}!smperioda@{smperioda}}
\index{smperioda@{smperioda}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{smperioda}{smperioda}}
{\footnotesize\ttfamily int Iwa\+\_\+\+Particle\+::smperioda}

\mbox{\Hypertarget{class_iwa___particle_aef2ebad60bd53bcb3a716e66d8f300aa}\label{class_iwa___particle_aef2ebad60bd53bcb3a716e66d8f300aa}} 
\index{Iwa\_Particle@{Iwa\_Particle}!smperiodx@{smperiodx}}
\index{smperiodx@{smperiodx}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{smperiodx}{smperiodx}}
{\footnotesize\ttfamily int Iwa\+\_\+\+Particle\+::smperiodx}

\mbox{\Hypertarget{class_iwa___particle_ad0c62d669715b4366103b5e3d0b8e64d}\label{class_iwa___particle_ad0c62d669715b4366103b5e3d0b8e64d}} 
\index{Iwa\_Particle@{Iwa\_Particle}!smperiody@{smperiody}}
\index{smperiody@{smperiody}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{smperiody}{smperiody}}
{\footnotesize\ttfamily int Iwa\+\_\+\+Particle\+::smperiody}

\mbox{\Hypertarget{class_iwa___particle_a9c98fa06a7d6881c9e01a84c55a9d4a8}\label{class_iwa___particle_a9c98fa06a7d6881c9e01a84c55a9d4a8}} 
\index{Iwa\_Particle@{Iwa\_Particle}!smswinga@{smswinga}}
\index{smswinga@{smswinga}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{smswinga}{smswinga}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::smswinga}

\mbox{\Hypertarget{class_iwa___particle_a890e6ea8fb72b75e7ee8ae1a51a074c9}\label{class_iwa___particle_a890e6ea8fb72b75e7ee8ae1a51a074c9}} 
\index{Iwa\_Particle@{Iwa\_Particle}!smswingx@{smswingx}}
\index{smswingx@{smswingx}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{smswingx}{smswingx}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::smswingx}

\mbox{\Hypertarget{class_iwa___particle_a91bd71fdf17893aab11a123dba183c0a}\label{class_iwa___particle_a91bd71fdf17893aab11a123dba183c0a}} 
\index{Iwa\_Particle@{Iwa\_Particle}!smswingy@{smswingy}}
\index{smswingy@{smswingy}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{smswingy}{smswingy}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::smswingy}

\mbox{\Hypertarget{class_iwa___particle_a9e3c3c2ed1f90e04b6d21c7cc70a35d3}\label{class_iwa___particle_a9e3c3c2ed1f90e04b6d21c7cc70a35d3}} 
\index{Iwa\_Particle@{Iwa\_Particle}!trail@{trail}}
\index{trail@{trail}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{trail}{trail}}
{\footnotesize\ttfamily int Iwa\+\_\+\+Particle\+::trail}

\mbox{\Hypertarget{class_iwa___particle_a4ddd1d88eca8ccef83271598dda2f1f7}\label{class_iwa___particle_a4ddd1d88eca8ccef83271598dda2f1f7}} 
\index{Iwa\_Particle@{Iwa\_Particle}!vx@{vx}}
\index{vx@{vx}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{vx}{vx}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::vx}

\mbox{\Hypertarget{class_iwa___particle_adbc37f1010ac6eba236b4fadbefbe435}\label{class_iwa___particle_adbc37f1010ac6eba236b4fadbefbe435}} 
\index{Iwa\_Particle@{Iwa\_Particle}!vy@{vy}}
\index{vy@{vy}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{vy}{vy}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::vy}

\mbox{\Hypertarget{class_iwa___particle_a516436c0dabbd11ca99c103bef681912}\label{class_iwa___particle_a516436c0dabbd11ca99c103bef681912}} 
\index{Iwa\_Particle@{Iwa\_Particle}!x@{x}}
\index{x@{x}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{x}{x}}
{\footnotesize\ttfamily double Iwa\+\_\+\+Particle\+::x}

\mbox{\Hypertarget{class_iwa___particle_a09d7ca13fa7c195d74126d5fe43519f8}\label{class_iwa___particle_a09d7ca13fa7c195d74126d5fe43519f8}} 
\index{Iwa\_Particle@{Iwa\_Particle}!y@{y}}
\index{y@{y}!Iwa\_Particle@{Iwa\_Particle}}
\doxysubsubsection{\texorpdfstring{y}{y}}
{\footnotesize\ttfamily float Iwa\+\_\+\+Particle\+::y}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/iwa\+\_\+particles.\+h\item 
E\+:/opentoonz/toonz/sources/stdfx/iwa\+\_\+particles.\+cpp\end{DoxyCompactItemize}
