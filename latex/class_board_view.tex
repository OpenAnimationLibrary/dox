\hypertarget{class_board_view}{}\doxysection{Board\+View Class Reference}
\label{class_board_view}\index{BoardView@{BoardView}}
Inheritance diagram for Board\+View\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_board_view}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_board_view_a53b7557bdb4455479979db1588e178d9}{Board\+View}} (QWidget $\ast$parent=nullptr)
\item 
void \mbox{\hyperlink{class_board_view_abd57aa1a4c9b3d9bcd0e9b201c37d66d}{invalidate}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_board_view_a6ea62d61f2e3f9b6ecb772b89e60a0a2}{paint\+Event}} (QPaint\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_board_view_ae49158b2e1d2fb33dd9c1ecbcdfc9609}{resize\+Event}} (QResize\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_board_view_a4a8543fcc9e79546b691886f83e8e502}{mouse\+Move\+Event}} (QMouse\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_board_view_aea3b7f52ba2c5958f3a36e09191642fd}{mouse\+Press\+Event}} (QMouse\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_board_view_ac584d72c51d60ada62277ebb0b7bfd0c}{mouse\+Release\+Event}} (QMouse\+Event $\ast$event) override
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_board_view_a53b7557bdb4455479979db1588e178d9}\label{class_board_view_a53b7557bdb4455479979db1588e178d9}} 
\index{BoardView@{BoardView}!BoardView@{BoardView}}
\index{BoardView@{BoardView}!BoardView@{BoardView}}
\doxysubsubsection{\texorpdfstring{BoardView()}{BoardView()}}
{\footnotesize\ttfamily Board\+View\+::\+Board\+View (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent = {\ttfamily nullptr} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00078                                     : QWidget(parent) \{}
\DoxyCodeLine{00079   setMouseTracking(\textcolor{keyword}{true});}
\DoxyCodeLine{00080 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_board_view_abd57aa1a4c9b3d9bcd0e9b201c37d66d}\label{class_board_view_abd57aa1a4c9b3d9bcd0e9b201c37d66d}} 
\index{BoardView@{BoardView}!invalidate@{invalidate}}
\index{invalidate@{invalidate}!BoardView@{BoardView}}
\doxysubsubsection{\texorpdfstring{invalidate()}{invalidate()}}
{\footnotesize\ttfamily void Board\+View\+::invalidate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00054 \{ m\_valid = \textcolor{keyword}{false}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_board_view_a4a8543fcc9e79546b691886f83e8e502}\label{class_board_view_a4a8543fcc9e79546b691886f83e8e502}} 
\index{BoardView@{BoardView}!mouseMoveEvent@{mouseMoveEvent}}
\index{mouseMoveEvent@{mouseMoveEvent}!BoardView@{BoardView}}
\doxysubsubsection{\texorpdfstring{mouseMoveEvent()}{mouseMoveEvent()}}
{\footnotesize\ttfamily void Board\+View\+::mouse\+Move\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00160                                                  \{}
\DoxyCodeLine{00161   \textcolor{comment}{// mouse move -\/ change drag item}}
\DoxyCodeLine{00162   \textcolor{keywordflow}{if} (!(event-\/>buttons() \& Qt::LeftButton)) \{}
\DoxyCodeLine{00163     \textcolor{keywordflow}{if} (!currentBoardItem()) \{}
\DoxyCodeLine{00164       m\_dragItem = None;}
\DoxyCodeLine{00165       setCursor(Qt::ArrowCursor);}
\DoxyCodeLine{00166       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00167     \}}
\DoxyCodeLine{00168 }
\DoxyCodeLine{00169     QPointF posOnImg = QPointF(event-\/>pos()) -\/ m\_boardImgRect.topLeft();}
\DoxyCodeLine{00170 }
\DoxyCodeLine{00171     QRectF itemRect =}
\DoxyCodeLine{00172         currentBoardItem()-\/>getItemRect(m\_boardImgRect.size().toSize());}
\DoxyCodeLine{00173 }
\DoxyCodeLine{00174     qreal distance = 10.0;}
\DoxyCodeLine{00175 }
\DoxyCodeLine{00176     \textcolor{keywordflow}{if} ((itemRect.topLeft() -\/ posOnImg).manhattanLength() < distance) \{}
\DoxyCodeLine{00177       m\_dragItem = TopLeftCorner;}
\DoxyCodeLine{00178       setCursor(Qt::SizeFDiagCursor);}
\DoxyCodeLine{00179     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((itemRect.topRight() -\/ posOnImg).manhattanLength() < distance) \{}
\DoxyCodeLine{00180       m\_dragItem = TopRightCorner;}
\DoxyCodeLine{00181       setCursor(Qt::SizeBDiagCursor);}
\DoxyCodeLine{00182     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((itemRect.bottomRight() -\/ posOnImg).manhattanLength() <}
\DoxyCodeLine{00183                distance) \{}
\DoxyCodeLine{00184       m\_dragItem = BottomRightCorner;}
\DoxyCodeLine{00185       setCursor(Qt::SizeFDiagCursor);}
\DoxyCodeLine{00186     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((itemRect.bottomLeft() -\/ posOnImg).manhattanLength() <}
\DoxyCodeLine{00187                distance) \{}
\DoxyCodeLine{00188       m\_dragItem = BottomLeftCorner;}
\DoxyCodeLine{00189       setCursor(Qt::SizeBDiagCursor);}
\DoxyCodeLine{00190     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (std::abs(itemRect.top() -\/ posOnImg.y()) < distance \&\&}
\DoxyCodeLine{00191                itemRect.left() < posOnImg.x() \&\&}
\DoxyCodeLine{00192                itemRect.right() > posOnImg.x()) \{}
\DoxyCodeLine{00193       m\_dragItem = TopEdge;}
\DoxyCodeLine{00194       setCursor(Qt::SizeVerCursor);}
\DoxyCodeLine{00195     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (std::abs(itemRect.right() -\/ posOnImg.x()) < distance \&\&}
\DoxyCodeLine{00196                itemRect.top() < posOnImg.y() \&\&}
\DoxyCodeLine{00197                itemRect.bottom() > posOnImg.y()) \{}
\DoxyCodeLine{00198       m\_dragItem = RightEdge;}
\DoxyCodeLine{00199       setCursor(Qt::SizeHorCursor);}
\DoxyCodeLine{00200     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (std::abs(itemRect.bottom() -\/ posOnImg.y()) < distance \&\&}
\DoxyCodeLine{00201                itemRect.left() < posOnImg.x() \&\&}
\DoxyCodeLine{00202                itemRect.right() > posOnImg.x()) \{}
\DoxyCodeLine{00203       m\_dragItem = BottomEdge;}
\DoxyCodeLine{00204       setCursor(Qt::SizeVerCursor);}
\DoxyCodeLine{00205     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (std::abs(itemRect.left() -\/ posOnImg.x()) < distance \&\&}
\DoxyCodeLine{00206                itemRect.top() < posOnImg.y() \&\&}
\DoxyCodeLine{00207                itemRect.bottom() > posOnImg.y()) \{}
\DoxyCodeLine{00208       m\_dragItem = LeftEdge;}
\DoxyCodeLine{00209       setCursor(Qt::SizeHorCursor);}
\DoxyCodeLine{00210     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (itemRect.contains(posOnImg)) \{}
\DoxyCodeLine{00211       m\_dragItem = Translate;}
\DoxyCodeLine{00212       setCursor(Qt::SizeAllCursor);}
\DoxyCodeLine{00213     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00214       m\_dragItem = None;}
\DoxyCodeLine{00215       setCursor(Qt::ArrowCursor);}
\DoxyCodeLine{00216     \}}
\DoxyCodeLine{00217 }
\DoxyCodeLine{00218     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00219   \}}
\DoxyCodeLine{00220 }
\DoxyCodeLine{00221   \textcolor{comment}{// left mouse drag}}
\DoxyCodeLine{00222   \textcolor{keywordflow}{if} (m\_dragItem == None) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00223 }
\DoxyCodeLine{00224   \textcolor{keywordflow}{if} (m\_dragStartItemRect.isNull()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00225 }
\DoxyCodeLine{00226   QPointF posOnImg = QPointF(event-\/>pos()) -\/ m\_boardImgRect.topLeft();}
\DoxyCodeLine{00227   QPointF ratioPos = QPointF(posOnImg.x() / m\_boardImgRect.width(),}
\DoxyCodeLine{00228                              posOnImg.y() / m\_boardImgRect.height());}
\DoxyCodeLine{00229 }
\DoxyCodeLine{00230   \textcolor{comment}{// with alt : center resize}}
\DoxyCodeLine{00231   \textcolor{keywordtype}{bool} altPressed = \textcolor{keyword}{event}-\/>modifiers() \& Qt::AltModifier;}
\DoxyCodeLine{00232   \textcolor{comment}{// with shift : align to discrete position}}
\DoxyCodeLine{00233   \textcolor{keywordtype}{bool} shiftPressed = \textcolor{keyword}{event}-\/>modifiers() \& Qt::ShiftModifier;}
\DoxyCodeLine{00234 }
\DoxyCodeLine{00235   \textcolor{keyword}{auto} adjVal = [\&](\textcolor{keywordtype}{double} p) \{}
\DoxyCodeLine{00236     \textcolor{keywordtype}{double} step = 0.05;}
\DoxyCodeLine{00237     \textcolor{keywordflow}{if} (!shiftPressed) \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{00238     \textcolor{keywordflow}{return} std::round(p / step) * step;}
\DoxyCodeLine{00239   \};}
\DoxyCodeLine{00240   \textcolor{keyword}{auto} adjPos = [\&](QPointF p) \{}
\DoxyCodeLine{00241     \textcolor{keywordflow}{if} (!shiftPressed) \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{00242     \textcolor{keywordflow}{return} QPointF(adjVal(p.x()), adjVal(p.y()));}
\DoxyCodeLine{00243   \};}
\DoxyCodeLine{00244 }
\DoxyCodeLine{00245   QRectF newRect = m\_dragStartItemRect;}
\DoxyCodeLine{00246   QPointF d      = ratioPos -\/ m\_dragStartPos;}
\DoxyCodeLine{00247   \textcolor{keywordflow}{switch} (m\_dragItem) \{}
\DoxyCodeLine{00248   \textcolor{keywordflow}{case} Translate:}
\DoxyCodeLine{00249     newRect.translate(ratioPos -\/ m\_dragStartPos);}
\DoxyCodeLine{00250     \textcolor{keywordflow}{if} (shiftPressed) \{}
\DoxyCodeLine{00251       newRect.setTopLeft(adjPos(newRect.topLeft()));}
\DoxyCodeLine{00252       newRect.setBottomRight(adjPos(newRect.bottomRight()));}
\DoxyCodeLine{00253     \}}
\DoxyCodeLine{00254     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00255 }
\DoxyCodeLine{00256   \textcolor{keywordflow}{case} TopLeftCorner:}
\DoxyCodeLine{00257     newRect.setTopLeft(adjPos(newRect.topLeft() + d));}
\DoxyCodeLine{00258     \textcolor{keywordflow}{if} (altPressed) newRect.setBottomRight(adjPos(newRect.bottomRight() -\/ d));}
\DoxyCodeLine{00259     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00260 }
\DoxyCodeLine{00261   \textcolor{keywordflow}{case} TopRightCorner:}
\DoxyCodeLine{00262     newRect.setTopRight(adjPos(newRect.topRight() + d));}
\DoxyCodeLine{00263     \textcolor{keywordflow}{if} (altPressed) newRect.setBottomLeft(adjPos(newRect.bottomLeft() -\/ d));}
\DoxyCodeLine{00264     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00265 }
\DoxyCodeLine{00266   \textcolor{keywordflow}{case} BottomRightCorner:}
\DoxyCodeLine{00267     newRect.setBottomRight(adjPos(newRect.bottomRight() + d));}
\DoxyCodeLine{00268     \textcolor{keywordflow}{if} (altPressed) newRect.setTopLeft(adjPos(newRect.topLeft() -\/ d));}
\DoxyCodeLine{00269     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00270 }
\DoxyCodeLine{00271   \textcolor{keywordflow}{case} BottomLeftCorner:}
\DoxyCodeLine{00272     newRect.setBottomLeft(adjPos(newRect.bottomLeft() + d));}
\DoxyCodeLine{00273     \textcolor{keywordflow}{if} (altPressed) newRect.setTopRight(adjPos(newRect.topRight() -\/ d));}
\DoxyCodeLine{00274     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00275 }
\DoxyCodeLine{00276   \textcolor{keywordflow}{case} TopEdge:}
\DoxyCodeLine{00277     newRect.setTop(adjVal(newRect.top() + d.y()));}
\DoxyCodeLine{00278     \textcolor{keywordflow}{if} (altPressed) newRect.setBottom(adjVal(newRect.bottom() -\/ d.y()));}
\DoxyCodeLine{00279     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00280 }
\DoxyCodeLine{00281   \textcolor{keywordflow}{case} RightEdge:}
\DoxyCodeLine{00282     newRect.setRight(adjVal(newRect.right() + d.x()));}
\DoxyCodeLine{00283     \textcolor{keywordflow}{if} (altPressed) newRect.setLeft(adjVal(newRect.left() -\/ d.x()));}
\DoxyCodeLine{00284     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00285 }
\DoxyCodeLine{00286   \textcolor{keywordflow}{case} BottomEdge:}
\DoxyCodeLine{00287     newRect.setBottom(adjVal(newRect.bottom() + d.y()));}
\DoxyCodeLine{00288     \textcolor{keywordflow}{if} (altPressed) newRect.setTop(adjVal(newRect.top() -\/ d.y()));}
\DoxyCodeLine{00289     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00290 }
\DoxyCodeLine{00291   \textcolor{keywordflow}{case} LeftEdge:}
\DoxyCodeLine{00292     newRect.setLeft(adjVal(newRect.left() + d.x()));}
\DoxyCodeLine{00293     \textcolor{keywordflow}{if} (altPressed) newRect.setRight(adjVal(newRect.right() -\/ d.x()));}
\DoxyCodeLine{00294     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00295   \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00296     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00297   \}}
\DoxyCodeLine{00298 }
\DoxyCodeLine{00299   currentBoardItem()-\/>setRatioRect(newRect.normalized());}
\DoxyCodeLine{00300   invalidate();}
\DoxyCodeLine{00301   update();}
\DoxyCodeLine{00302 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_board_view_aea3b7f52ba2c5958f3a36e09191642fd}\label{class_board_view_aea3b7f52ba2c5958f3a36e09191642fd}} 
\index{BoardView@{BoardView}!mousePressEvent@{mousePressEvent}}
\index{mousePressEvent@{mousePressEvent}!BoardView@{BoardView}}
\doxysubsubsection{\texorpdfstring{mousePressEvent()}{mousePressEvent()}}
{\footnotesize\ttfamily void Board\+View\+::mouse\+Press\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00304                                                   \{}
\DoxyCodeLine{00305   \textcolor{comment}{// only the left button counts}}
\DoxyCodeLine{00306   \textcolor{keywordflow}{if} (event-\/>button() != Qt::LeftButton) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00307   \textcolor{comment}{// store the current item rect and mouse pos, relative to the image size}}
\DoxyCodeLine{00308   m\_dragStartItemRect = currentBoardItem()-\/>getRatioRect();}
\DoxyCodeLine{00309   QPointF posOnImg    = QPointF(event-\/>pos()) -\/ m\_boardImgRect.topLeft();}
\DoxyCodeLine{00310   m\_dragStartPos      = QPointF(posOnImg.x() / m\_boardImgRect.width(),}
\DoxyCodeLine{00311                            posOnImg.y() / m\_boardImgRect.height());}
\DoxyCodeLine{00312 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_board_view_ac584d72c51d60ada62277ebb0b7bfd0c}\label{class_board_view_ac584d72c51d60ada62277ebb0b7bfd0c}} 
\index{BoardView@{BoardView}!mouseReleaseEvent@{mouseReleaseEvent}}
\index{mouseReleaseEvent@{mouseReleaseEvent}!BoardView@{BoardView}}
\doxysubsubsection{\texorpdfstring{mouseReleaseEvent()}{mouseReleaseEvent()}}
{\footnotesize\ttfamily void Board\+View\+::mouse\+Release\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00314                                                     \{}
\DoxyCodeLine{00315   m\_dragStartItemRect = QRectF();}
\DoxyCodeLine{00316   m\_dragStartPos      = QPointF();}
\DoxyCodeLine{00317 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_board_view_a6ea62d61f2e3f9b6ecb772b89e60a0a2}\label{class_board_view_a6ea62d61f2e3f9b6ecb772b89e60a0a2}} 
\index{BoardView@{BoardView}!paintEvent@{paintEvent}}
\index{paintEvent@{paintEvent}!BoardView@{BoardView}}
\doxysubsubsection{\texorpdfstring{paintEvent()}{paintEvent()}}
{\footnotesize\ttfamily void Board\+View\+::paint\+Event (\begin{DoxyParamCaption}\item[{QPaint\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00082                                              \{}
\DoxyCodeLine{00083   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}}* scene = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{00084   \textcolor{keywordflow}{if} (!scene) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00085   \mbox{\hyperlink{class_t_output_properties}{TOutputProperties}}* outProp   = scene-\/>\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}()-\/>\mbox{\hyperlink{class_t_scene_properties_abea7b4b8e4f0cedbf753b26ec30b5331}{getOutputProperties}}();}
\DoxyCodeLine{00086   \mbox{\hyperlink{class_board_settings}{BoardSettings}}* boardSettings = outProp-\/>getBoardSettings();}
\DoxyCodeLine{00087 }
\DoxyCodeLine{00088   QPainter p(\textcolor{keyword}{this});}
\DoxyCodeLine{00089 }
\DoxyCodeLine{00090   p.fillRect(rect(), Qt::black);}
\DoxyCodeLine{00091 }
\DoxyCodeLine{00092   \textcolor{comment}{// Duration must be more than 0 to save the clapperboard.}}
\DoxyCodeLine{00093   \textcolor{comment}{// Scene file can maintain compatibility with older versions if you set the}}
\DoxyCodeLine{00094   \textcolor{comment}{// duration to 0.}}
\DoxyCodeLine{00095   \textcolor{keywordflow}{if} (boardSettings-\/>getDuration() == 0) \{}
\DoxyCodeLine{00096     p.setPen(Qt::white);}
\DoxyCodeLine{00097     QFont font = p.font();}
\DoxyCodeLine{00098     font.setPixelSize(30);}
\DoxyCodeLine{00099     p.setFont(font);}
\DoxyCodeLine{00100     p.drawText(}
\DoxyCodeLine{00101         rect().adjusted(5, 5, -\/5, -\/5), Qt::AlignCenter | Qt::TextWordWrap,}
\DoxyCodeLine{00102         tr(\textcolor{stringliteral}{"{}Please set the duration more than 0 frame first, or the "{}}}
\DoxyCodeLine{00103            \textcolor{stringliteral}{"{}clapperboard settings will not be saved in the scene at all!"{}}));}
\DoxyCodeLine{00104 }
\DoxyCodeLine{00105     p.setPen(QPen(Qt::red, 2));}
\DoxyCodeLine{00106     p.drawLine(5, 5, 150, 5);}
\DoxyCodeLine{00107     p.drawLine(5, 10, 150, 10);}
\DoxyCodeLine{00108 }
\DoxyCodeLine{00109     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00110   \}}
\DoxyCodeLine{00111 }
\DoxyCodeLine{00112   \textcolor{keywordflow}{if} (!m\_valid) \{}
\DoxyCodeLine{00113     \textcolor{keywordtype}{int} shrinkX          = outProp-\/>\mbox{\hyperlink{class_t_output_properties_afa7c771452b57b50047aa4afc6032cad}{getRenderSettings}}().\mbox{\hyperlink{class_t_render_settings_a52dd41881bbf6aaf953fe300be2e233e}{m\_shrinkX}},}
\DoxyCodeLine{00114         shrinkY          = outProp-\/>\mbox{\hyperlink{class_t_output_properties_afa7c771452b57b50047aa4afc6032cad}{getRenderSettings}}().\mbox{\hyperlink{class_t_render_settings_ae1882f584ce9ffad12ce6bf9ff23814c}{m\_shrinkY}};}
\DoxyCodeLine{00115     \mbox{\hyperlink{class_t_dimension_t}{TDimension}} frameSize = scene-\/>\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}()-\/>\mbox{\hyperlink{class_t_camera_a9a7c573e7a2c397ffae4b747809ea2a5}{getRes}}();}
\DoxyCodeLine{00116     \mbox{\hyperlink{class_t_dimension_t}{TDimension}} cameraRes(frameSize.lx / shrinkX, frameSize.ly / shrinkY);}
\DoxyCodeLine{00117 }
\DoxyCodeLine{00118     m\_boardImg = boardSettings-\/>getBoardImage(cameraRes, shrinkX, scene);}
\DoxyCodeLine{00119     m\_valid    = \textcolor{keyword}{true};}
\DoxyCodeLine{00120   \}}
\DoxyCodeLine{00121 }
\DoxyCodeLine{00122   p.drawImage(m\_boardImgRect, m\_boardImg);}
\DoxyCodeLine{00123 }
\DoxyCodeLine{00124   p.translate(m\_boardImgRect.topLeft());}
\DoxyCodeLine{00125 }
\DoxyCodeLine{00126   p.setBrush(Qt::NoBrush);}
\DoxyCodeLine{00127   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < boardSettings-\/>getItemCount(); i++) \{}
\DoxyCodeLine{00128     \mbox{\hyperlink{class_board_item}{BoardItem}}* item = \&(boardSettings-\/>getItem(i));}
\DoxyCodeLine{00129     \textcolor{keywordflow}{if} (item == currentBoardItem()) \{}
\DoxyCodeLine{00130       p.setPen(QPen(QColor(255, 100, 0), 2));}
\DoxyCodeLine{00131     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00132       p.setPen(QPen(QColor(64, 64, 255), 1, Qt::DashLine));}
\DoxyCodeLine{00133     \}}
\DoxyCodeLine{00134     p.drawRect(item-\/>getItemRect(m\_boardImgRect.size().toSize()));}
\DoxyCodeLine{00135   \}}
\DoxyCodeLine{00136 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_board_view_ae49158b2e1d2fb33dd9c1ecbcdfc9609}\label{class_board_view_ae49158b2e1d2fb33dd9c1ecbcdfc9609}} 
\index{BoardView@{BoardView}!resizeEvent@{resizeEvent}}
\index{resizeEvent@{resizeEvent}!BoardView@{BoardView}}
\doxysubsubsection{\texorpdfstring{resizeEvent()}{resizeEvent()}}
{\footnotesize\ttfamily void Board\+View\+::resize\+Event (\begin{DoxyParamCaption}\item[{QResize\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00138                                                \{}
\DoxyCodeLine{00139   QSize boardRes;}
\DoxyCodeLine{00140   \textcolor{keywordflow}{if} (m\_valid) \{}
\DoxyCodeLine{00141     boardRes = m\_boardImg.size();}
\DoxyCodeLine{00142   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00143     \mbox{\hyperlink{class_toonz_scene}{ToonzScene}}* scene = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{00144     \mbox{\hyperlink{class_t_output_properties}{TOutputProperties}}* outProp = scene-\/>\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}()-\/>\mbox{\hyperlink{class_t_scene_properties_abea7b4b8e4f0cedbf753b26ec30b5331}{getOutputProperties}}();}
\DoxyCodeLine{00145     \textcolor{keywordtype}{int} shrinkX                = outProp-\/>\mbox{\hyperlink{class_t_output_properties_afa7c771452b57b50047aa4afc6032cad}{getRenderSettings}}().\mbox{\hyperlink{class_t_render_settings_a52dd41881bbf6aaf953fe300be2e233e}{m\_shrinkX}},}
\DoxyCodeLine{00146         shrinkY                = outProp-\/>\mbox{\hyperlink{class_t_output_properties_afa7c771452b57b50047aa4afc6032cad}{getRenderSettings}}().\mbox{\hyperlink{class_t_render_settings_ae1882f584ce9ffad12ce6bf9ff23814c}{m\_shrinkY}};}
\DoxyCodeLine{00147     \mbox{\hyperlink{class_t_dimension_t}{TDimension}} frameSize       = scene-\/>\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}()-\/>\mbox{\hyperlink{class_t_camera_a9a7c573e7a2c397ffae4b747809ea2a5}{getRes}}();}
\DoxyCodeLine{00148     boardRes = QSize(frameSize.lx / shrinkX, frameSize.ly / shrinkY);}
\DoxyCodeLine{00149   \}}
\DoxyCodeLine{00150 }
\DoxyCodeLine{00151   \textcolor{keywordtype}{float} ratio = std::min((\textcolor{keywordtype}{float})width() / (\textcolor{keywordtype}{float})boardRes.width(),}
\DoxyCodeLine{00152                          (\textcolor{keywordtype}{float})height() / (\textcolor{keywordtype}{float})boardRes.height());}
\DoxyCodeLine{00153   QSizeF imgSize = QSizeF(boardRes) * ratio;}
\DoxyCodeLine{00154   QPointF imgTopLeft(((\textcolor{keywordtype}{float})width() -\/ imgSize.width()) * 0.5,}
\DoxyCodeLine{00155                      ((\textcolor{keywordtype}{float})height() -\/ imgSize.height()) * 0.5);}
\DoxyCodeLine{00156 }
\DoxyCodeLine{00157   m\_boardImgRect = QRectF(imgTopLeft, imgSize);}
\DoxyCodeLine{00158 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/boardsettingspopup.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/boardsettingspopup.\+cpp\end{DoxyCompactItemize}
