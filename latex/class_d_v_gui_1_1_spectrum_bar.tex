\hypertarget{class_d_v_gui_1_1_spectrum_bar}{}\doxysection{DVGui\+::Spectrum\+Bar Class Reference}
\label{class_d_v_gui_1_1_spectrum_bar}\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}}


The \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar}{Spectrum\+Bar}} class provides a bar to display a spectrum.  


Inheritance diagram for DVGui\+::Spectrum\+Bar\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_d_v_gui_1_1_spectrum_bar}
\end{center}
\end{figure}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a716c78588839d9a158ce7d2f819182dc}{set\+Current\+Pos}} (int pos, bool is\+Dragging)
\item 
void \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a62baa9a3afedebd4eb6901b33cf53dab}{set\+Current\+Color}} (const TPixel32 \&color)
\item 
void \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_aa34753461ac953e2fbdf400012ecbc0c}{add\+Key\+At}} (int pos)
\end{DoxyCompactItemize}
\doxysubsection*{Signals}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a2d1c6a2e3fcbb52f08a5beb6783f4396}{current\+Pos\+Changed}} (bool is\+Dragging)
\item 
void \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_ab6dc7c778ba3d01b2ce1d24e4227aca6}{current\+Key\+Changed}} ()
\item 
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_abd40bfab32dd91ceb5f9a26f52c5aa35}\label{class_d_v_gui_1_1_spectrum_bar_abd40bfab32dd91ceb5f9a26f52c5aa35}} 
void {\bfseries current\+Key\+Added} (int)
\item 
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_a4697654f816f66173b785c348251a05e}\label{class_d_v_gui_1_1_spectrum_bar_a4697654f816f66173b785c348251a05e}} 
void {\bfseries current\+Key\+Removed} (int)
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a8c38d856acd79bc6b0ca4b4c210221ee}{Spectrum\+Bar}} (QWidget $\ast$parent=0, TPixel32 color=TPixel32(0, 0, 0, 255))
\item 
int \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a413a8141c63f94e1e99d649e71356cb0}{get\+Current\+Key\+Index}} ()
\item 
void \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a99a9a701924d15f1d672c437a965ee84}{set\+Current\+Key\+Index}} (int index)
\item 
int \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a20ef1026f9a4f9564b632bcce774b5d8}{get\+Current\+Pos}} ()
\item 
TPixel32 \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a2ef140653587fb101c6084c7e54f34b3}{get\+Current\+Color}} ()
\item 
\mbox{\hyperlink{class_t_spectrum_t}{TSpectrum}} \& \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a6760dbbb9ff4fcab5dfc9d5047bd6e37}{get\+Spectrum}} ()
\item 
void \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a0a62a3c475982537d58b2d825b240b7d}{set\+Spectrum}} (\mbox{\hyperlink{class_t_spectrum_t}{TSpectrum}} \&spectrum)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
double \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_ac65711c070cc49718d4932563855cbb7}{pos\+To\+Spectrum\+Value}} (int pos)
\item 
int \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a18526ea40045b5e3b56a360ee1d93840}{spectrum\+Value\+To\+Pos}} (double spectrum\+Value)
\item 
void \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_ad5c84e516b74d8234b4518b5ea1dc1e3}{paint\+Event}} (QPaint\+Event $\ast$e) override
\item 
void \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a9db94ca6015902cb2de0d1985e70721b}{mouse\+Press\+Event}} (QMouse\+Event $\ast$e) override
\item 
void \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a56d65f4d43baeb165532e279a87ae4af}{mouse\+Move\+Event}} (QMouse\+Event $\ast$e) override
\item 
void \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_aa0c36dd11f350e26ee9e9a562de60344}{mouse\+Release\+Event}} (QMouse\+Event $\ast$e) override
\item 
int \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_ace5597e858a5ad132669228ccc62d3ee}{get\+Max\+Pos\+Key\+Index}} ()
\item 
int \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a1539cc8d292f02c0e676f5682965655d}{get\+Min\+Pos\+Key\+Index}} ()
\item 
int \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a6ff6313fce7c7531849a744487efeb78}{get\+Near\+Pos\+Key\+Index}} (int pos)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar}{Spectrum\+Bar}} class provides a bar to display a spectrum. 

\begin{DoxyVerb}         Inherits \b QWidget.

         The object allows to manage a spectrum, permit you to insert,
\end{DoxyVerb}
 move and remove key.

You can set spectrum default color in constructor, or set color of current key, {\bfseries{\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a2ef140653587fb101c6084c7e54f34b3}{get\+Current\+Color()}}}}, using {\bfseries{\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a62baa9a3afedebd4eb6901b33cf53dab}{set\+Current\+Color()}}}}. It\textquotesingle{}s possible to change current key, {\bfseries{get\+Current\+Key\+Index()}}, through its index, {\bfseries{\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a99a9a701924d15f1d672c437a965ee84}{set\+Current\+Key\+Index()}}}}. You can also set current key position, {\bfseries{\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a20ef1026f9a4f9564b632bcce774b5d8}{get\+Current\+Pos()}}}}, using {\bfseries{\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a716c78588839d9a158ce7d2f819182dc}{set\+Current\+Pos()}}}} or add a new key in a specific position, \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_aa34753461ac953e2fbdf400012ecbc0c}{add\+Key\+At()}}. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_a8c38d856acd79bc6b0ca4b4c210221ee}\label{class_d_v_gui_1_1_spectrum_bar_a8c38d856acd79bc6b0ca4b4c210221ee}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!SpectrumBar@{SpectrumBar}}
\index{SpectrumBar@{SpectrumBar}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{SpectrumBar()}{SpectrumBar()}}
{\footnotesize\ttfamily Spectrum\+Bar\+::\+Spectrum\+Bar (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent = {\ttfamily 0},  }\item[{TPixel32}]{color = {\ttfamily TPixel32(0,~0,~0,~255)} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00049     : QWidget(parent)}
\DoxyCodeLine{00050     , m\_x0(10)}
\DoxyCodeLine{00051     , m\_currentKeyIndex(0)}
\DoxyCodeLine{00052     , m\_spectrum(color, color)}
\DoxyCodeLine{00053     , m\_chessBg(\textcolor{stringliteral}{"{}:Resources/backg.png"{}}) \{}
\DoxyCodeLine{00054   setMinimumWidth(200);}
\DoxyCodeLine{00055   setFixedHeight(WidgetHeight);}
\DoxyCodeLine{00056 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_ac5d228506e0314e446954c2fcf704bff}\label{class_d_v_gui_1_1_spectrum_bar_ac5d228506e0314e446954c2fcf704bff}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!````~SpectrumBar@{$\sim$SpectrumBar}}
\index{````~SpectrumBar@{$\sim$SpectrumBar}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{$\sim$SpectrumBar()}{~SpectrumBar()}}
{\footnotesize\ttfamily Spectrum\+Bar\+::$\sim$\+Spectrum\+Bar (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00060 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_aa34753461ac953e2fbdf400012ecbc0c}\label{class_d_v_gui_1_1_spectrum_bar_aa34753461ac953e2fbdf400012ecbc0c}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!addKeyAt@{addKeyAt}}
\index{addKeyAt@{addKeyAt}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{addKeyAt}{addKeyAt}}
{\footnotesize\ttfamily void Spectrum\+Bar\+::add\+Key\+At (\begin{DoxyParamCaption}\item[{int}]{x }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Add a new key to spectrum. Key position is computed {\bfseries{x}} using {\bfseries{\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_ac65711c070cc49718d4932563855cbb7}{pos\+To\+Spectrum\+Value()}}}} and color come from position. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00096                                 \{}
\DoxyCodeLine{00097   TPixel32 color = m\_spectrum.getValue(\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_ac65711c070cc49718d4932563855cbb7}{posToSpectrumValue}}(x));}
\DoxyCodeLine{00098   TSpectrum::ColorKey key(\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_ac65711c070cc49718d4932563855cbb7}{posToSpectrumValue}}(x), color);}
\DoxyCodeLine{00099   m\_spectrum.addKey(key);}
\DoxyCodeLine{00100   \textcolor{keywordtype}{int} newIndex = m\_spectrum.getKeyCount() -\/ 1;}
\DoxyCodeLine{00101   \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a99a9a701924d15f1d672c437a965ee84}{setCurrentKeyIndex}}(newIndex);}
\DoxyCodeLine{00102   emit currentKeyAdded(newIndex);}
\DoxyCodeLine{00103 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00133}{pos\+To\+Spectrum\+Value()}}, and \mbox{\hyperlink{l00085}{set\+Current\+Key\+Index()}}.



Referenced by \mbox{\hyperlink{l00218}{mouse\+Move\+Event()}}, and \mbox{\hyperlink{l00193}{mouse\+Press\+Event()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_ab6dc7c778ba3d01b2ce1d24e4227aca6}\label{class_d_v_gui_1_1_spectrum_bar_ab6dc7c778ba3d01b2ce1d24e4227aca6}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!currentKeyChanged@{currentKeyChanged}}
\index{currentKeyChanged@{currentKeyChanged}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{currentKeyChanged}{currentKeyChanged}}
{\footnotesize\ttfamily void DVGui\+::\+Spectrum\+Bar\+::current\+Key\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [signal]}}

The signal is emitted when current key index change. 

Referenced by \mbox{\hyperlink{l00085}{set\+Current\+Key\+Index()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_a2d1c6a2e3fcbb52f08a5beb6783f4396}\label{class_d_v_gui_1_1_spectrum_bar_a2d1c6a2e3fcbb52f08a5beb6783f4396}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!currentPosChanged@{currentPosChanged}}
\index{currentPosChanged@{currentPosChanged}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{currentPosChanged}{currentPosChanged}}
{\footnotesize\ttfamily void DVGui\+::\+Spectrum\+Bar\+::current\+Pos\+Changed (\begin{DoxyParamCaption}\item[{bool}]{is\+Dragging }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [signal]}}

The signal is emitted when current key position change. 

Referenced by \mbox{\hyperlink{l00109}{set\+Current\+Pos()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_a2ef140653587fb101c6084c7e54f34b3}\label{class_d_v_gui_1_1_spectrum_bar_a2ef140653587fb101c6084c7e54f34b3}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!getCurrentColor@{getCurrentColor}}
\index{getCurrentColor@{getCurrentColor}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{getCurrentColor()}{getCurrentColor()}}
{\footnotesize\ttfamily TPixel32 Spectrum\+Bar\+::get\+Current\+Color (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Return current key color. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00073                                       \{}
\DoxyCodeLine{00074   \textcolor{keywordflow}{if} (m\_currentKeyIndex == -\/1)  \textcolor{comment}{// C'e' sicuramente una key perche' lo spectrum}}
\DoxyCodeLine{00075                                 \textcolor{comment}{// e' strutturato in modo da non avere mai size}}
\DoxyCodeLine{00076                                 \textcolor{comment}{// nulla.}}
\DoxyCodeLine{00077     \textcolor{keywordflow}{return} m\_spectrum.getKey(\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_ace5597e858a5ad132669228ccc62d3ee}{getMaxPosKeyIndex}}()).second;}
\DoxyCodeLine{00078   \textcolor{keywordflow}{return} m\_spectrum.getKey(m\_currentKeyIndex).second;}
\DoxyCodeLine{00079 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00261}{get\+Max\+Pos\+Key\+Index()}}.



Referenced by \mbox{\hyperlink{l00366}{DVGui\+::\+Spectrum\+Field\+::on\+Current\+Key\+Changed()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_a413a8141c63f94e1e99d649e71356cb0}\label{class_d_v_gui_1_1_spectrum_bar_a413a8141c63f94e1e99d649e71356cb0}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!getCurrentKeyIndex@{getCurrentKeyIndex}}
\index{getCurrentKeyIndex@{getCurrentKeyIndex}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{getCurrentKeyIndex()}{getCurrentKeyIndex()}}
{\footnotesize\ttfamily int DVGui\+::\+Spectrum\+Bar\+::get\+Current\+Key\+Index (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00046 \{ \textcolor{keywordflow}{return} m\_currentKeyIndex; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_a20ef1026f9a4f9564b632bcce774b5d8}\label{class_d_v_gui_1_1_spectrum_bar_a20ef1026f9a4f9564b632bcce774b5d8}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!getCurrentPos@{getCurrentPos}}
\index{getCurrentPos@{getCurrentPos}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{getCurrentPos()}{getCurrentPos()}}
{\footnotesize\ttfamily int Spectrum\+Bar\+::get\+Current\+Pos (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Return current key position. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00065                                \{}
\DoxyCodeLine{00066   \textcolor{keywordflow}{if} (m\_currentKeyIndex == -\/1) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00067   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a18526ea40045b5e3b56a360ee1d93840}{spectrumValueToPos}}(m\_spectrum.getKey(m\_currentKeyIndex).first);}
\DoxyCodeLine{00068 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00140}{spectrum\+Value\+To\+Pos()}}.



Referenced by \mbox{\hyperlink{l00383}{DVGui\+::\+Spectrum\+Field\+::paint\+Event()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_ace5597e858a5ad132669228ccc62d3ee}\label{class_d_v_gui_1_1_spectrum_bar_ace5597e858a5ad132669228ccc62d3ee}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!getMaxPosKeyIndex@{getMaxPosKeyIndex}}
\index{getMaxPosKeyIndex@{getMaxPosKeyIndex}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{getMaxPosKeyIndex()}{getMaxPosKeyIndex()}}
{\footnotesize\ttfamily int Spectrum\+Bar\+::get\+Max\+Pos\+Key\+Index (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Return index of key with maximum position. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00261                                    \{}
\DoxyCodeLine{00262   \textcolor{keywordtype}{int} spectrumSize = m\_spectrum.getKeyCount();}
\DoxyCodeLine{00263   \textcolor{keywordflow}{if} (!spectrumSize) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00264   \textcolor{keywordtype}{int} maxPosIndex = 0;}
\DoxyCodeLine{00265   \textcolor{keywordtype}{int} maxPos      = \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a18526ea40045b5e3b56a360ee1d93840}{spectrumValueToPos}}(m\_spectrum.getKey(0).first);}
\DoxyCodeLine{00266   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00267   \textcolor{keywordflow}{for} (i = 0; i < spectrumSize; i++) \{}
\DoxyCodeLine{00268     \textcolor{keywordtype}{int} newPos = \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a18526ea40045b5e3b56a360ee1d93840}{spectrumValueToPos}}(m\_spectrum.getKey(i).first);}
\DoxyCodeLine{00269     \textcolor{keywordflow}{if} (maxPos < newPos) \{}
\DoxyCodeLine{00270       maxPos      = newPos;}
\DoxyCodeLine{00271       maxPosIndex = i;}
\DoxyCodeLine{00272     \}}
\DoxyCodeLine{00273   \}}
\DoxyCodeLine{00274   \textcolor{keywordflow}{return} maxPosIndex;}
\DoxyCodeLine{00275 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00140}{spectrum\+Value\+To\+Pos()}}.



Referenced by \mbox{\hyperlink{l00073}{get\+Current\+Color()}}, and \mbox{\hyperlink{l00193}{mouse\+Press\+Event()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_a1539cc8d292f02c0e676f5682965655d}\label{class_d_v_gui_1_1_spectrum_bar_a1539cc8d292f02c0e676f5682965655d}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!getMinPosKeyIndex@{getMinPosKeyIndex}}
\index{getMinPosKeyIndex@{getMinPosKeyIndex}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{getMinPosKeyIndex()}{getMinPosKeyIndex()}}
{\footnotesize\ttfamily int Spectrum\+Bar\+::get\+Min\+Pos\+Key\+Index (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Return index of key with minimum position. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00280                                    \{}
\DoxyCodeLine{00281   \textcolor{keywordtype}{int} spectrumSize = m\_spectrum.getKeyCount();}
\DoxyCodeLine{00282   \textcolor{keywordflow}{if} (!spectrumSize) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00283   \textcolor{keywordtype}{int} minPosIndex = 0;}
\DoxyCodeLine{00284   \textcolor{keywordtype}{int} minPos      = \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a18526ea40045b5e3b56a360ee1d93840}{spectrumValueToPos}}(m\_spectrum.getKey(0).first);}
\DoxyCodeLine{00285   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00286   \textcolor{keywordflow}{for} (i = 0; i < spectrumSize; i++) \{}
\DoxyCodeLine{00287     \textcolor{keywordtype}{int} newPos = \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a18526ea40045b5e3b56a360ee1d93840}{spectrumValueToPos}}(m\_spectrum.getKey(i).first);}
\DoxyCodeLine{00288     \textcolor{keywordflow}{if} (minPos > newPos) \{}
\DoxyCodeLine{00289       minPos      = newPos;}
\DoxyCodeLine{00290       minPosIndex = i;}
\DoxyCodeLine{00291     \}}
\DoxyCodeLine{00292   \}}
\DoxyCodeLine{00293   \textcolor{keywordflow}{return} minPosIndex;}
\DoxyCodeLine{00294 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00140}{spectrum\+Value\+To\+Pos()}}.



Referenced by \mbox{\hyperlink{l00193}{mouse\+Press\+Event()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_a6ff6313fce7c7531849a744487efeb78}\label{class_d_v_gui_1_1_spectrum_bar_a6ff6313fce7c7531849a744487efeb78}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!getNearPosKeyIndex@{getNearPosKeyIndex}}
\index{getNearPosKeyIndex@{getNearPosKeyIndex}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{getNearPosKeyIndex()}{getNearPosKeyIndex()}}
{\footnotesize\ttfamily int Spectrum\+Bar\+::get\+Near\+Pos\+Key\+Index (\begin{DoxyParamCaption}\item[{int}]{pos }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Return index of key \char`\"{}near\char`\"{} {\bfseries{pos}}. \char`\"{}near\char`\"{} mean with a dinstace less than a constant size. If there aren\textquotesingle{}t key near pos return {\bfseries{-\/1}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00300                                            \{}
\DoxyCodeLine{00301   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00302   \textcolor{keywordtype}{int} gap = 20;}
\DoxyCodeLine{00303   \textcolor{keywordflow}{for} (i = 0; i < m\_spectrum.getKeyCount(); i++)}
\DoxyCodeLine{00304     \textcolor{keywordflow}{if} (areAlmostEqual(\textcolor{keywordtype}{double}(pos),}
\DoxyCodeLine{00305                        \textcolor{keywordtype}{double}(\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a18526ea40045b5e3b56a360ee1d93840}{spectrumValueToPos}}(m\_spectrum.getKey(i).first)),}
\DoxyCodeLine{00306                        gap))}
\DoxyCodeLine{00307       \textcolor{keywordflow}{return} i;}
\DoxyCodeLine{00308   \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00309 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00140}{spectrum\+Value\+To\+Pos()}}.



Referenced by \mbox{\hyperlink{l00193}{mouse\+Press\+Event()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_a6760dbbb9ff4fcab5dfc9d5047bd6e37}\label{class_d_v_gui_1_1_spectrum_bar_a6760dbbb9ff4fcab5dfc9d5047bd6e37}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!getSpectrum@{getSpectrum}}
\index{getSpectrum@{getSpectrum}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{getSpectrum()}{getSpectrum()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_spectrum_t}{TSpectrum}} \& DVGui\+::\+Spectrum\+Bar\+::get\+Spectrum (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00052 \{ \textcolor{keywordflow}{return} m\_spectrum; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_a56d65f4d43baeb165532e279a87ae4af}\label{class_d_v_gui_1_1_spectrum_bar_a56d65f4d43baeb165532e279a87ae4af}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!mouseMoveEvent@{mouseMoveEvent}}
\index{mouseMoveEvent@{mouseMoveEvent}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{mouseMoveEvent()}{mouseMoveEvent()}}
{\footnotesize\ttfamily void Spectrum\+Bar\+::mouse\+Move\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}

Manage mouse move event. If y position value greater than widget height erase current key; otherwise move current key position. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00218                                                \{}
\DoxyCodeLine{00219   QPoint pos = e-\/>pos();}
\DoxyCodeLine{00220   \textcolor{keywordtype}{int} x      = pos.x();}
\DoxyCodeLine{00221   \textcolor{keywordtype}{int} y      = pos.y();}
\DoxyCodeLine{00222   \textcolor{keywordflow}{if} (x < m\_x0 || x > width() -\/ m\_x0 -\/ 1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00223 }
\DoxyCodeLine{00224   \textcolor{comment}{// Se il valore della y e' maggiore dell'altezza widget, cioe' va fuori dal}}
\DoxyCodeLine{00225   \textcolor{comment}{// widget}}
\DoxyCodeLine{00226   \textcolor{comment}{// elimino la key corrente}}
\DoxyCodeLine{00227   \textcolor{keywordflow}{if} (y > height()) \{}
\DoxyCodeLine{00228     \textcolor{keywordflow}{if} (m\_currentKeyIndex == -\/1 || m\_spectrum.getKeyCount() == 1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00229 }
\DoxyCodeLine{00230     m\_spectrum.removeKey(m\_currentKeyIndex);}
\DoxyCodeLine{00231     \textcolor{keywordtype}{int} keyIndex = m\_currentKeyIndex;}
\DoxyCodeLine{00232     \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a99a9a701924d15f1d672c437a965ee84}{setCurrentKeyIndex}}(-\/1);}
\DoxyCodeLine{00233     emit currentKeyRemoved(keyIndex);}
\DoxyCodeLine{00234     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00235   \}}
\DoxyCodeLine{00236 }
\DoxyCodeLine{00237   \textcolor{comment}{// Se il valore della y e' interno al widget}}
\DoxyCodeLine{00238   \textcolor{comment}{// Se l'indice della key corrente e' -\/1 avevo eliminato un key; ora devo}}
\DoxyCodeLine{00239   \textcolor{comment}{// riaggiungerla.}}
\DoxyCodeLine{00240   \textcolor{keywordflow}{if} (m\_currentKeyIndex == -\/1) \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_aa34753461ac953e2fbdf400012ecbc0c}{addKeyAt}}(x);}
\DoxyCodeLine{00241 }
\DoxyCodeLine{00242   \textcolor{comment}{// Setto la nuova posizione x alla chiave corrente}}
\DoxyCodeLine{00243   \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a716c78588839d9a158ce7d2f819182dc}{setCurrentPos}}(x, \textcolor{keyword}{true});}
\DoxyCodeLine{00244 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00096}{add\+Key\+At()}}, \mbox{\hyperlink{l00085}{set\+Current\+Key\+Index()}}, and \mbox{\hyperlink{l00109}{set\+Current\+Pos()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_a9db94ca6015902cb2de0d1985e70721b}\label{class_d_v_gui_1_1_spectrum_bar_a9db94ca6015902cb2de0d1985e70721b}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!mousePressEvent@{mousePressEvent}}
\index{mousePressEvent@{mousePressEvent}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{mousePressEvent()}{mousePressEvent()}}
{\footnotesize\ttfamily void Spectrum\+Bar\+::mouse\+Press\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}

Manage mouse press event. Search existing key near click position, if there is set it as current key; otherwise add a new key in click position. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00193                                                 \{}
\DoxyCodeLine{00194   QPoint pos = e-\/>pos();}
\DoxyCodeLine{00195   \textcolor{keywordtype}{int} x      = pos.x();}
\DoxyCodeLine{00196 }
\DoxyCodeLine{00197   \textcolor{comment}{// Verifico se esiste una key vicino alla posizione in cui ho cliccato}}
\DoxyCodeLine{00198   \textcolor{keywordtype}{int} index        = -\/1;}
\DoxyCodeLine{00199   \textcolor{keywordtype}{int} spectrumSize = m\_spectrum.getKeyCount();}
\DoxyCodeLine{00200   \textcolor{keywordflow}{if} (x < m\_x0)}
\DoxyCodeLine{00201     index = \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a1539cc8d292f02c0e676f5682965655d}{getMinPosKeyIndex}}();}
\DoxyCodeLine{00202   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (x > width() -\/ m\_x0)}
\DoxyCodeLine{00203     index = \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_ace5597e858a5ad132669228ccc62d3ee}{getMaxPosKeyIndex}}();}
\DoxyCodeLine{00204   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00205     index = \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a6ff6313fce7c7531849a744487efeb78}{getNearPosKeyIndex}}(x);}
\DoxyCodeLine{00206 }
\DoxyCodeLine{00207   \textcolor{comment}{// Se x e' vicino a una key esistente setto questa come corrente}}
\DoxyCodeLine{00208   \textcolor{keywordflow}{if} (index != -\/1)}
\DoxyCodeLine{00209     \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a99a9a701924d15f1d672c437a965ee84}{setCurrentKeyIndex}}(index);}
\DoxyCodeLine{00210   \textcolor{keywordflow}{else}  \textcolor{comment}{// Altrimenti aggiungo una nuova key}}
\DoxyCodeLine{00211     \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_aa34753461ac953e2fbdf400012ecbc0c}{addKeyAt}}(x);}
\DoxyCodeLine{00212 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00096}{add\+Key\+At()}}, \mbox{\hyperlink{l00261}{get\+Max\+Pos\+Key\+Index()}}, \mbox{\hyperlink{l00280}{get\+Min\+Pos\+Key\+Index()}}, \mbox{\hyperlink{l00300}{get\+Near\+Pos\+Key\+Index()}}, and \mbox{\hyperlink{l00085}{set\+Current\+Key\+Index()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_aa0c36dd11f350e26ee9e9a562de60344}\label{class_d_v_gui_1_1_spectrum_bar_aa0c36dd11f350e26ee9e9a562de60344}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!mouseReleaseEvent@{mouseReleaseEvent}}
\index{mouseReleaseEvent@{mouseReleaseEvent}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{mouseReleaseEvent()}{mouseReleaseEvent()}}
{\footnotesize\ttfamily void Spectrum\+Bar\+::mouse\+Release\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00247                                                   \{}
\DoxyCodeLine{00248   \textcolor{keywordflow}{if} (m\_currentKeyIndex == -\/1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00249   QPoint pos = e-\/>pos();}
\DoxyCodeLine{00250   \textcolor{keywordtype}{int} x      = pos.x();}
\DoxyCodeLine{00251   \textcolor{keywordtype}{int} y      = pos.y();}
\DoxyCodeLine{00252   \textcolor{keywordflow}{if} (x < m\_x0 || x > width() -\/ m\_x0 -\/ 1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00253   \textcolor{keywordflow}{if} (y > height()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00254 }
\DoxyCodeLine{00255   \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a716c78588839d9a158ce7d2f819182dc}{setCurrentPos}}(x, \textcolor{keyword}{false});}
\DoxyCodeLine{00256 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_ad5c84e516b74d8234b4518b5ea1dc1e3}\label{class_d_v_gui_1_1_spectrum_bar_ad5c84e516b74d8234b4518b5ea1dc1e3}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!paintEvent@{paintEvent}}
\index{paintEvent@{paintEvent}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{paintEvent()}{paintEvent()}}
{\footnotesize\ttfamily void Spectrum\+Bar\+::paint\+Event (\begin{DoxyParamCaption}\item[{QPaint\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}

Paint widget object\+: \begin{DoxyItemize}
\item a linear gradient computed with spectrum value; \item arrows for each spectrum key. \end{DoxyItemize}

\begin{DoxyCode}{0}
\DoxyCodeLine{00149                                            \{}
\DoxyCodeLine{00150   QPainter p(\textcolor{keyword}{this});}
\DoxyCodeLine{00151 }
\DoxyCodeLine{00152   \textcolor{keywordtype}{int} h          = height() -\/ 1;}
\DoxyCodeLine{00153   \textcolor{keywordtype}{int} y1         = height() / 2;}
\DoxyCodeLine{00154   \textcolor{keywordtype}{int} x1         = width() -\/ m\_x0;}
\DoxyCodeLine{00155   QRectF rectBar = QRectF(m\_x0, 0, x1 -\/ m\_x0 + 1, y1);}
\DoxyCodeLine{00156 }
\DoxyCodeLine{00157   \textcolor{comment}{// Build the linear gradient}}
\DoxyCodeLine{00158   QLinearGradient linearGrad(QPointF(m\_x0, h), QPointF(x1, h));}
\DoxyCodeLine{00159   \textcolor{keywordtype}{int} spectrumSize = m\_spectrum.getKeyCount();}
\DoxyCodeLine{00160   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00161   \textcolor{keywordflow}{for} (i = 0; i < spectrumSize; i++) \{}
\DoxyCodeLine{00162     TSpectrum::ColorKey key = m\_spectrum.getKey(i);}
\DoxyCodeLine{00163     \textcolor{comment}{// Linear Gradient}}
\DoxyCodeLine{00164     TPixel32 pix         = key.second;}
\DoxyCodeLine{00165     \textcolor{keywordtype}{double} spectrumValue = key.first;}
\DoxyCodeLine{00166     linearGrad.setColorAt(spectrumValue, QColor(pix.r, pix.g, pix.b, pix.m));}
\DoxyCodeLine{00167     \textcolor{comment}{// Frecce delle key}}
\DoxyCodeLine{00168     \textcolor{keywordtype}{int} pos = \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a18526ea40045b5e3b56a360ee1d93840}{spectrumValueToPos}}(spectrumValue);}
\DoxyCodeLine{00169     \textcolor{keywordtype}{int} f   = 4;}
\DoxyCodeLine{00170     drawArrow(p, QPointF(pos -\/ f, y1 + f), QPointF(pos, y1),}
\DoxyCodeLine{00171               QPointF(pos + f, y1 + f), \textcolor{keyword}{true},}
\DoxyCodeLine{00172               (m\_currentKeyIndex == i) ? Qt::black : Qt::white);}
\DoxyCodeLine{00173   \}}
\DoxyCodeLine{00174 }
\DoxyCodeLine{00175   p.setPen(Qt::NoPen);}
\DoxyCodeLine{00176 }
\DoxyCodeLine{00177   \textcolor{comment}{// Draw chess bg}}
\DoxyCodeLine{00178   QBrush bg;}
\DoxyCodeLine{00179   bg.setTexture(m\_chessBg);}
\DoxyCodeLine{00180   p.setBrush(bg);}
\DoxyCodeLine{00181   p.drawRect(rectBar);}
\DoxyCodeLine{00182 }
\DoxyCodeLine{00183   \textcolor{comment}{// Draw the gradient}}
\DoxyCodeLine{00184   p.setBrush(linearGrad);}
\DoxyCodeLine{00185   p.drawRect(rectBar);}
\DoxyCodeLine{00186 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00140}{spectrum\+Value\+To\+Pos()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_ac65711c070cc49718d4932563855cbb7}\label{class_d_v_gui_1_1_spectrum_bar_ac65711c070cc49718d4932563855cbb7}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!posToSpectrumValue@{posToSpectrumValue}}
\index{posToSpectrumValue@{posToSpectrumValue}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{posToSpectrumValue()}{posToSpectrumValue()}}
{\footnotesize\ttfamily double Spectrum\+Bar\+::pos\+To\+Spectrum\+Value (\begin{DoxyParamCaption}\item[{int}]{pos }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Return spectrum value from widget position {\bfseries{pos}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00133                                               \{}
\DoxyCodeLine{00134   \textcolor{keywordflow}{return} (\textcolor{keywordtype}{double})(pos -\/ m\_x0) / (\textcolor{keywordtype}{double})(width() -\/ 2 * m\_x0 -\/ 1);}
\DoxyCodeLine{00135 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00096}{add\+Key\+At()}}, and \mbox{\hyperlink{l00109}{set\+Current\+Pos()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_a62baa9a3afedebd4eb6901b33cf53dab}\label{class_d_v_gui_1_1_spectrum_bar_a62baa9a3afedebd4eb6901b33cf53dab}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!setCurrentColor@{setCurrentColor}}
\index{setCurrentColor@{setCurrentColor}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{setCurrentColor}{setCurrentColor}}
{\footnotesize\ttfamily void Spectrum\+Bar\+::set\+Current\+Color (\begin{DoxyParamCaption}\item[{const TPixel32 \&}]{color }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Set current key color to {\bfseries{color}}. Update spectrum bar. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00120                                                        \{}
\DoxyCodeLine{00121   \textcolor{keywordflow}{if} (m\_currentKeyIndex == -\/1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00122   TSpectrum::ColorKey key = m\_spectrum.getKey(m\_currentKeyIndex);}
\DoxyCodeLine{00123   TPixel32 oldColor       = key.second;}
\DoxyCodeLine{00124   \textcolor{keywordflow}{if} (oldColor == color) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00125   key.second = color;}
\DoxyCodeLine{00126   m\_spectrum.setKey(m\_currentKeyIndex, key);}
\DoxyCodeLine{00127   update();}
\DoxyCodeLine{00128 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00375}{DVGui\+::\+Spectrum\+Field\+::on\+Color\+Changed()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_a99a9a701924d15f1d672c437a965ee84}\label{class_d_v_gui_1_1_spectrum_bar_a99a9a701924d15f1d672c437a965ee84}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!setCurrentKeyIndex@{setCurrentKeyIndex}}
\index{setCurrentKeyIndex@{setCurrentKeyIndex}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{setCurrentKeyIndex()}{setCurrentKeyIndex()}}
{\footnotesize\ttfamily void Spectrum\+Bar\+::set\+Current\+Key\+Index (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})}

Set current key index to {\bfseries{index}}. Update spectrum bar and emit a signal to notify current key changed {\bfseries{\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_ab6dc7c778ba3d01b2ce1d24e4227aca6}{current\+Key\+Changed()}}}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00085                                               \{}
\DoxyCodeLine{00086   \textcolor{keywordflow}{if} (m\_currentKeyIndex == index) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00087   m\_currentKeyIndex = index;}
\DoxyCodeLine{00088   update();}
\DoxyCodeLine{00089   emit \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_ab6dc7c778ba3d01b2ce1d24e4227aca6}{currentKeyChanged}}();}
\DoxyCodeLine{00090 \}}

\end{DoxyCode}


References \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_ab6dc7c778ba3d01b2ce1d24e4227aca6}{current\+Key\+Changed()}}.



Referenced by \mbox{\hyperlink{l00096}{add\+Key\+At()}}, \mbox{\hyperlink{l00218}{mouse\+Move\+Event()}}, and \mbox{\hyperlink{l00193}{mouse\+Press\+Event()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_a716c78588839d9a158ce7d2f819182dc}\label{class_d_v_gui_1_1_spectrum_bar_a716c78588839d9a158ce7d2f819182dc}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!setCurrentPos@{setCurrentPos}}
\index{setCurrentPos@{setCurrentPos}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{setCurrentPos}{setCurrentPos}}
{\footnotesize\ttfamily void Spectrum\+Bar\+::set\+Current\+Pos (\begin{DoxyParamCaption}\item[{int}]{pos,  }\item[{bool}]{is\+Dragging }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Set current key position to {\bfseries{pos}}. Update spectrum bar and emit a signal to notify current key changed {\bfseries{\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_ab6dc7c778ba3d01b2ce1d24e4227aca6}{current\+Key\+Changed()}}}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00109                                                         \{}
\DoxyCodeLine{00110   TSpectrum::ColorKey key = m\_spectrum.getKey(m\_currentKeyIndex);}
\DoxyCodeLine{00111   key.first               = \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_ac65711c070cc49718d4932563855cbb7}{posToSpectrumValue}}(pos);}
\DoxyCodeLine{00112   m\_spectrum.setKey(m\_currentKeyIndex, key);}
\DoxyCodeLine{00113   update();}
\DoxyCodeLine{00114   emit \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a2d1c6a2e3fcbb52f08a5beb6783f4396}{currentPosChanged}}(isDragging);}
\DoxyCodeLine{00115 \}}

\end{DoxyCode}


References \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a2d1c6a2e3fcbb52f08a5beb6783f4396}{current\+Pos\+Changed()}}, and \mbox{\hyperlink{l00133}{pos\+To\+Spectrum\+Value()}}.



Referenced by \mbox{\hyperlink{l00218}{mouse\+Move\+Event()}}.

\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_a0a62a3c475982537d58b2d825b240b7d}\label{class_d_v_gui_1_1_spectrum_bar_a0a62a3c475982537d58b2d825b240b7d}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!setSpectrum@{setSpectrum}}
\index{setSpectrum@{setSpectrum}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{setSpectrum()}{setSpectrum()}}
{\footnotesize\ttfamily void DVGui\+::\+Spectrum\+Bar\+::set\+Spectrum (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_spectrum_t}{TSpectrum}} \&}]{spectrum }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00053                                         \{}
\DoxyCodeLine{00054     m\_spectrum = spectrum;}
\DoxyCodeLine{00055     \textcolor{comment}{/*-\/-\/ Undoの場合、Spectrumの差し替えによってIndexがあふれてしまうことがある}}
\DoxyCodeLine{00056 \textcolor{comment}{     * -\/-\/*/}}
\DoxyCodeLine{00057     \textcolor{keywordflow}{if} (m\_currentKeyIndex >= m\_spectrum.getKeyCount())}
\DoxyCodeLine{00058       \mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_a99a9a701924d15f1d672c437a965ee84}{setCurrentKeyIndex}}(\mbox{\hyperlink{class_d_v_gui_1_1_spectrum_bar_ace5597e858a5ad132669228ccc62d3ee}{getMaxPosKeyIndex}}());}
\DoxyCodeLine{00059     update();}
\DoxyCodeLine{00060   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_d_v_gui_1_1_spectrum_bar_a18526ea40045b5e3b56a360ee1d93840}\label{class_d_v_gui_1_1_spectrum_bar_a18526ea40045b5e3b56a360ee1d93840}} 
\index{DVGui::SpectrumBar@{DVGui::SpectrumBar}!spectrumValueToPos@{spectrumValueToPos}}
\index{spectrumValueToPos@{spectrumValueToPos}!DVGui::SpectrumBar@{DVGui::SpectrumBar}}
\doxysubsubsection{\texorpdfstring{spectrumValueToPos()}{spectrumValueToPos()}}
{\footnotesize\ttfamily int Spectrum\+Bar\+::spectrum\+Value\+To\+Pos (\begin{DoxyParamCaption}\item[{double}]{spectrum\+Value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Return widget position from spectrum value {\bfseries{spectrum\+Value}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00140                                                         \{}
\DoxyCodeLine{00141   \textcolor{keywordflow}{return} m\_x0 + int(0.5 + spectrumValue * (width() -\/ 2 * m\_x0));}
\DoxyCodeLine{00142 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00065}{get\+Current\+Pos()}}, \mbox{\hyperlink{l00261}{get\+Max\+Pos\+Key\+Index()}}, \mbox{\hyperlink{l00280}{get\+Min\+Pos\+Key\+Index()}}, \mbox{\hyperlink{l00300}{get\+Near\+Pos\+Key\+Index()}}, and \mbox{\hyperlink{l00149}{paint\+Event()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonzqt/spectrumfield.\+h\item 
E\+:/opentoonz/toonz/sources/toonzqt/spectrumfield.\+cpp\end{DoxyCompactItemize}
