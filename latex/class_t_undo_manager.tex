\hypertarget{class_t_undo_manager}{}\doxysection{TUndo\+Manager Class Reference}
\label{class_t_undo_manager}\index{TUndoManager@{TUndoManager}}
Inheritance diagram for TUndo\+Manager\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_t_undo_manager}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_t_undo_manager_1_1_t_undo_manager_imp}{TUndo\+Manager\+Imp}}
\end{DoxyCompactItemize}
\doxysubsection*{Signals}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_t_undo_manager_aa1971f7d3cbf43be42f5983d0b95ae14}\label{class_t_undo_manager_aa1971f7d3cbf43be42f5983d0b95ae14}} 
void {\bfseries history\+Changed} ()
\item 
\mbox{\Hypertarget{class_t_undo_manager_ae805affbcedc2e2e249d84efde5ddfce}\label{class_t_undo_manager_ae805affbcedc2e2e249d84efde5ddfce}} 
void {\bfseries something\+Changed} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_t_undo_manager_a76847198d2e80e59c3732f082fae178a}{begin\+Block}} ()
\item 
void \mbox{\hyperlink{class_t_undo_manager_a5e5d41c5542461aa7f2c62a35e1e8ebe}{end\+Block}} ()
\item 
void \mbox{\hyperlink{class_t_undo_manager_a6e06b826a0d47f23262881ab9d920351}{add}} (\mbox{\hyperlink{class_t_undo}{TUndo}} $\ast$undo)
\item 
bool \mbox{\hyperlink{class_t_undo_manager_a201ef0ce64854274b3db974f2a8efd47}{undo}} ()
\item 
bool \mbox{\hyperlink{class_t_undo_manager_add3b14e5eb1f489bf008b623902f6780}{redo}} ()
\item 
void \mbox{\hyperlink{class_t_undo_manager_ab8b7669f44fd75f3a3d277ee30ac4aa6}{reset}} ()
\item 
void \mbox{\hyperlink{class_t_undo_manager_aec936de7730ed653b8524a1d8ad59c39}{pop\+Undo}} (int n=-\/1, bool forward=false)
\item 
void \mbox{\hyperlink{class_t_undo_manager_a16f50a00e2269a6e20402d05cc16a52f}{skip}} ()
\item 
void \mbox{\hyperlink{class_t_undo_manager_aa06d709ede65b3f1d4e05037b5086279}{set\+Undo\+Memory\+Size}} (int memory\+Syze)
\item 
int \mbox{\hyperlink{class_t_undo_manager_a1e3a6167af4fd6c5d0090ed76e030b04}{get\+History\+Count}} ()
\item 
int \mbox{\hyperlink{class_t_undo_manager_afe049ae38a3ca5ef920d5d1e37ac7db1}{get\+Current\+History\+Index}} ()
\item 
\mbox{\hyperlink{class_t_undo}{TUndo}} $\ast$ \mbox{\hyperlink{class_t_undo_manager_ad14e990be030ef36f55bcc828b8fbc32}{get\+Undo\+Item}} (int index)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_t_undo_manager}{TUndo\+Manager}} $\ast$ \mbox{\hyperlink{class_t_undo_manager_acba1602d538aa1513269760f7211d993}{manager}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_undo_manager_aea18105ddf0fc133ace272cca82afe65}\label{class_t_undo_manager_aea18105ddf0fc133ace272cca82afe65}} 
\index{TUndoManager@{TUndoManager}!TUndoManager@{TUndoManager}}
\index{TUndoManager@{TUndoManager}!TUndoManager@{TUndoManager}}
\doxysubsubsection{\texorpdfstring{TUndoManager()}{TUndoManager()}}
{\footnotesize\ttfamily TUndo\+Manager\+::\+TUndo\+Manager (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00158 : m\_imp(\textcolor{keyword}{new} TUndoManagerImp) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_undo_manager_ab5a196513a20489f1239ed67cfce2dbf}\label{class_t_undo_manager_ab5a196513a20489f1239ed67cfce2dbf}} 
\index{TUndoManager@{TUndoManager}!````~TUndoManager@{$\sim$TUndoManager}}
\index{````~TUndoManager@{$\sim$TUndoManager}!TUndoManager@{TUndoManager}}
\doxysubsubsection{\texorpdfstring{$\sim$TUndoManager()}{~TUndoManager()}}
{\footnotesize\ttfamily TUndo\+Manager\+::$\sim$\+TUndo\+Manager (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00162                             \{}
\DoxyCodeLine{00163   \textcolor{comment}{// cout << "{}Distrutto undo manager"{} << endl;}}
\DoxyCodeLine{00164   assert(m\_imp-\/>m\_blockStack.empty());}
\DoxyCodeLine{00165   reset();}
\DoxyCodeLine{00166 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_undo_manager_a6e06b826a0d47f23262881ab9d920351}\label{class_t_undo_manager_a6e06b826a0d47f23262881ab9d920351}} 
\index{TUndoManager@{TUndoManager}!add@{add}}
\index{add@{add}!TUndoManager@{TUndoManager}}
\doxysubsubsection{\texorpdfstring{add()}{add()}}
{\footnotesize\ttfamily void TUndo\+Manager\+::add (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_undo}{TUndo}} $\ast$}]{undo }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00301                                   \{}
\DoxyCodeLine{00302   assert(undo);}
\DoxyCodeLine{00303   \textcolor{keywordflow}{if} (!undo) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00304 }
\DoxyCodeLine{00305   m\_imp-\/>add(undo);}
\DoxyCodeLine{00306   Q\_EMIT historyChanged();}
\DoxyCodeLine{00307 }
\DoxyCodeLine{00308   undo-\/>onAdd();}
\DoxyCodeLine{00309   Q\_EMIT somethingChanged();}
\DoxyCodeLine{00310 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_undo_manager_a76847198d2e80e59c3732f082fae178a}\label{class_t_undo_manager_a76847198d2e80e59c3732f082fae178a}} 
\index{TUndoManager@{TUndoManager}!beginBlock@{beginBlock}}
\index{beginBlock@{beginBlock}!TUndoManager@{TUndoManager}}
\doxysubsubsection{\texorpdfstring{beginBlock()}{beginBlock()}}
{\footnotesize\ttfamily void TUndo\+Manager\+::begin\+Block (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00209                               \{}
\DoxyCodeLine{00210   \textcolor{keywordflow}{if} (m\_imp-\/>m\_current != m\_imp-\/>m\_undoList.end()) \{}
\DoxyCodeLine{00211     std::for\_each(m\_imp-\/>m\_current, m\_imp-\/>m\_undoList.end(), deleteUndo);}
\DoxyCodeLine{00212     m\_imp-\/>m\_undoList.erase(m\_imp-\/>m\_current, m\_imp-\/>m\_undoList.end());}
\DoxyCodeLine{00213   \}}
\DoxyCodeLine{00214 }
\DoxyCodeLine{00215   TUndoBlock *undoBlock = \textcolor{keyword}{new} TUndoBlock;}
\DoxyCodeLine{00216   m\_imp-\/>m\_blockStack.push\_back(undoBlock);}
\DoxyCodeLine{00217   m\_imp-\/>m\_current = m\_imp-\/>m\_undoList.end();}
\DoxyCodeLine{00218 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_undo_manager_a5e5d41c5542461aa7f2c62a35e1e8ebe}\label{class_t_undo_manager_a5e5d41c5542461aa7f2c62a35e1e8ebe}} 
\index{TUndoManager@{TUndoManager}!endBlock@{endBlock}}
\index{endBlock@{endBlock}!TUndoManager@{TUndoManager}}
\doxysubsubsection{\texorpdfstring{endBlock()}{endBlock()}}
{\footnotesize\ttfamily void TUndo\+Manager\+::end\+Block (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00222                             \{}
\DoxyCodeLine{00223   \textcolor{comment}{// vogliamo fare anche resize del vector ???}}
\DoxyCodeLine{00224   assert(m\_imp-\/>m\_blockStack.empty() == \textcolor{keyword}{false});}
\DoxyCodeLine{00225   TUndoBlock *undoBlock = m\_imp-\/>m\_blockStack.back();}
\DoxyCodeLine{00226   m\_imp-\/>m\_blockStack.pop\_back();}
\DoxyCodeLine{00227   \textcolor{keywordflow}{if} (undoBlock-\/>getUndoCount() > 0) \{}
\DoxyCodeLine{00228     undoBlock-\/>setLast();}
\DoxyCodeLine{00229     m\_imp-\/>add(undoBlock);}
\DoxyCodeLine{00230     emit historyChanged();}
\DoxyCodeLine{00231   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00232     \textcolor{keyword}{delete} undoBlock;}
\DoxyCodeLine{00233     m\_imp-\/>m\_current = m\_imp-\/>m\_undoList.end();}
\DoxyCodeLine{00234   \}}
\DoxyCodeLine{00235 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_undo_manager_afe049ae38a3ca5ef920d5d1e37ac7db1}\label{class_t_undo_manager_afe049ae38a3ca5ef920d5d1e37ac7db1}} 
\index{TUndoManager@{TUndoManager}!getCurrentHistoryIndex@{getCurrentHistoryIndex}}
\index{getCurrentHistoryIndex@{getCurrentHistoryIndex}!TUndoManager@{TUndoManager}}
\doxysubsubsection{\texorpdfstring{getCurrentHistoryIndex()}{getCurrentHistoryIndex()}}
{\footnotesize\ttfamily int TUndo\+Manager\+::get\+Current\+History\+Index (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00396                                          \{}
\DoxyCodeLine{00397   \textcolor{keywordtype}{int} index           = 0;}
\DoxyCodeLine{00398   UndoListIterator it = m\_imp-\/>m\_undoList.begin();}
\DoxyCodeLine{00399   \textcolor{keywordflow}{while} (1) \{}
\DoxyCodeLine{00400     \textcolor{keywordflow}{if} (it == m\_imp-\/>m\_current) \textcolor{keywordflow}{return} index;}
\DoxyCodeLine{00401 }
\DoxyCodeLine{00402     \textcolor{keywordflow}{if} (it == m\_imp-\/>m\_undoList.end()) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00403 }
\DoxyCodeLine{00404     index++;}
\DoxyCodeLine{00405     it++;}
\DoxyCodeLine{00406   \}}
\DoxyCodeLine{00407   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00408 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_undo_manager_a1e3a6167af4fd6c5d0090ed76e030b04}\label{class_t_undo_manager_a1e3a6167af4fd6c5d0090ed76e030b04}} 
\index{TUndoManager@{TUndoManager}!getHistoryCount@{getHistoryCount}}
\index{getHistoryCount@{getHistoryCount}!TUndoManager@{TUndoManager}}
\doxysubsubsection{\texorpdfstring{getHistoryCount()}{getHistoryCount()}}
{\footnotesize\ttfamily int TUndo\+Manager\+::get\+History\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00392 \{ \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int})m\_imp-\/>m\_undoList.size(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_undo_manager_ad14e990be030ef36f55bcc828b8fbc32}\label{class_t_undo_manager_ad14e990be030ef36f55bcc828b8fbc32}} 
\index{TUndoManager@{TUndoManager}!getUndoItem@{getUndoItem}}
\index{getUndoItem@{getUndoItem}!TUndoManager@{TUndoManager}}
\doxysubsubsection{\texorpdfstring{getUndoItem()}{getUndoItem()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_undo}{TUndo}} $\ast$ TUndo\+Manager\+::get\+Undo\+Item (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00412                                           \{}
\DoxyCodeLine{00413   \textcolor{keywordflow}{if} (index > (\textcolor{keywordtype}{int})m\_imp-\/>m\_undoList.size() || index <= 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00414 }
\DoxyCodeLine{00415   \textcolor{keywordflow}{return} m\_imp-\/>m\_undoList.at(index -\/ 1);}
\DoxyCodeLine{00416 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_undo_manager_acba1602d538aa1513269760f7211d993}\label{class_t_undo_manager_acba1602d538aa1513269760f7211d993}} 
\index{TUndoManager@{TUndoManager}!manager@{manager}}
\index{manager@{manager}!TUndoManager@{TUndoManager}}
\doxysubsubsection{\texorpdfstring{manager()}{manager()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_undo_manager}{TUndo\+Manager}} $\ast$ TUndo\+Manager\+::manager (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00150                                     \{}
\DoxyCodeLine{00151   \textcolor{keywordflow}{if} (!TUndoManagerImp::theManager.m\_ptr)}
\DoxyCodeLine{00152     TUndoManagerImp::theManager.m\_ptr = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_undo_manager}{TUndoManager}};}
\DoxyCodeLine{00153   \textcolor{keywordflow}{return} TUndoManagerImp::theManager.m\_ptr;}
\DoxyCodeLine{00154 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_undo_manager_aec936de7730ed653b8524a1d8ad59c39}\label{class_t_undo_manager_aec936de7730ed653b8524a1d8ad59c39}} 
\index{TUndoManager@{TUndoManager}!popUndo@{popUndo}}
\index{popUndo@{popUndo}!TUndoManager@{TUndoManager}}
\doxysubsubsection{\texorpdfstring{popUndo()}{popUndo()}}
{\footnotesize\ttfamily void TUndo\+Manager\+::pop\+Undo (\begin{DoxyParamCaption}\item[{int}]{n = {\ttfamily -\/1},  }\item[{bool}]{forward = {\ttfamily false} }\end{DoxyParamCaption})}

If forward = false remove n elements in the stack before m\+\_\+imp-\/\texorpdfstring{$>$}{>}m\+\_\+current; else if forward = true remove n elements in the stack after m\+\_\+imp-\/\texorpdfstring{$>$}{>}m\+\_\+current. If n = -\/1 remove all elements before or after m\+\_\+imp-\/\texorpdfstring{$>$}{>}m\+\_\+current. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00326                                               \{}
\DoxyCodeLine{00327   \textcolor{keywordflow}{if} (!forward) \{}
\DoxyCodeLine{00328     \textcolor{keywordflow}{if} (m\_imp-\/>m\_blockStack.empty()) \{}
\DoxyCodeLine{00329       \textcolor{keywordflow}{if} (n == -\/1) \{}
\DoxyCodeLine{00330         UndoListIterator start = m\_imp-\/>m\_undoList.begin();}
\DoxyCodeLine{00331         n                      = 0;}
\DoxyCodeLine{00332         \textcolor{keywordflow}{while} (start != m\_imp-\/>m\_current) ++n;}
\DoxyCodeLine{00333       \}}
\DoxyCodeLine{00334       \textcolor{keywordflow}{if} (m\_imp-\/>m\_undoList.empty() || n <= 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00335       \textcolor{keywordflow}{if} (m\_imp-\/>m\_current == m\_imp-\/>m\_undoList.end()) \{}
\DoxyCodeLine{00336         \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00337         \textcolor{keywordflow}{for} (i = 0; i < n \&\& m\_imp-\/>m\_current != m\_imp-\/>m\_undoList.begin();}
\DoxyCodeLine{00338              i++) \{}
\DoxyCodeLine{00339           m\_imp-\/>m\_current-\/-\/;}
\DoxyCodeLine{00340           \textcolor{keyword}{delete} (*m\_imp-\/>m\_current);}
\DoxyCodeLine{00341           m\_imp-\/>m\_undoList.erase(m\_imp-\/>m\_current);}
\DoxyCodeLine{00342           m\_imp-\/>m\_current = m\_imp-\/>m\_undoList.end();}
\DoxyCodeLine{00343         \}}
\DoxyCodeLine{00344       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00345         \mbox{\hyperlink{class_t_undo}{TUndo}} *undo = *m\_imp-\/>m\_current;}
\DoxyCodeLine{00346         UndoListIterator start, end = m\_imp-\/>m\_current;}
\DoxyCodeLine{00347         \textcolor{keywordflow}{if} (end == m\_imp-\/>m\_undoList.begin()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00348 }
\DoxyCodeLine{00349         \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00350         \textcolor{keywordflow}{for} (i = 0; i < n \&\& m\_imp-\/>m\_current != m\_imp-\/>m\_undoList.begin(); i++)}
\DoxyCodeLine{00351           m\_imp-\/>m\_current-\/-\/;}
\DoxyCodeLine{00352 }
\DoxyCodeLine{00353         start                 = m\_imp-\/>m\_current;}
\DoxyCodeLine{00354         UndoListIterator \_end = end;}
\DoxyCodeLine{00355         while (\_end != start) \{}
\DoxyCodeLine{00356           \_end-\/-\/;}
\DoxyCodeLine{00357           \textcolor{keyword}{delete} (*\_end);}
\DoxyCodeLine{00358         \}}
\DoxyCodeLine{00359         m\_imp-\/>m\_undoList.erase(start, end);}
\DoxyCodeLine{00360 }
\DoxyCodeLine{00361         m\_imp-\/>m\_current = m\_imp-\/>m\_undoList.begin();}
\DoxyCodeLine{00362         \textcolor{keywordflow}{while} (*m\_imp-\/>m\_current != undo) m\_imp-\/>m\_current++;}
\DoxyCodeLine{00363       \}}
\DoxyCodeLine{00364     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00365       m\_imp-\/>m\_blockStack.back()-\/>popUndo(n);}
\DoxyCodeLine{00366     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00367   \}}
\DoxyCodeLine{00368 }
\DoxyCodeLine{00369   \textcolor{keywordflow}{if} (m\_imp-\/>m\_current == m\_imp-\/>m\_undoList.end()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00370   \textcolor{keywordflow}{if} (m\_imp-\/>m\_blockStack.empty()) \{}
\DoxyCodeLine{00371     UndoListIterator end, start = m\_imp-\/>m\_current++;}
\DoxyCodeLine{00372     \textcolor{keywordflow}{if} (n == -\/1)}
\DoxyCodeLine{00373       end = m\_imp-\/>m\_undoList.end();}
\DoxyCodeLine{00374     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00375       UndoListIterator it = start;}
\DoxyCodeLine{00376       end                 = it;}
\DoxyCodeLine{00377       \textcolor{keywordtype}{int} i               = 0;}
\DoxyCodeLine{00378       \textcolor{keywordflow}{while} (i != n \&\& end != m\_imp-\/>m\_undoList.end()) \{}
\DoxyCodeLine{00379         ++end;}
\DoxyCodeLine{00380         i++;}
\DoxyCodeLine{00381       \}}
\DoxyCodeLine{00382     \}}
\DoxyCodeLine{00383     std::for\_each(start, end, deleteUndo);}
\DoxyCodeLine{00384     m\_imp-\/>m\_undoList.erase(start, end);}
\DoxyCodeLine{00385     m\_imp-\/>m\_current = m\_imp-\/>m\_undoList.end();}
\DoxyCodeLine{00386   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00387     m\_imp-\/>m\_blockStack.back()-\/>popUndo(n);}
\DoxyCodeLine{00388 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01069}{Raster\+Selection\+::delete\+Selection()}}, and \mbox{\hyperlink{l01037}{Raster\+Selection\+::paste\+Floating\+Selection()}}.

\mbox{\Hypertarget{class_t_undo_manager_add3b14e5eb1f489bf008b623902f6780}\label{class_t_undo_manager_add3b14e5eb1f489bf008b623902f6780}} 
\index{TUndoManager@{TUndoManager}!redo@{redo}}
\index{redo@{redo}!TUndoManager@{TUndoManager}}
\doxysubsubsection{\texorpdfstring{redo()}{redo()}}
{\footnotesize\ttfamily bool TUndo\+Manager\+::redo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00258                         \{}
\DoxyCodeLine{00259   assert(m\_imp-\/>m\_blockStack.empty());}
\DoxyCodeLine{00260   UndoListIterator \&it = m\_imp-\/>m\_current;}
\DoxyCodeLine{00261   \textcolor{keywordflow}{if} (it != m\_imp-\/>m\_undoList.end()) \{}
\DoxyCodeLine{00262     m\_imp-\/>m\_skipped = \textcolor{keyword}{false};}
\DoxyCodeLine{00263     (*it)-\/>redo();}
\DoxyCodeLine{00264     ++it;}
\DoxyCodeLine{00265     emit historyChanged();}
\DoxyCodeLine{00266     \textcolor{keywordflow}{if} (m\_imp-\/>m\_skipped) \{}
\DoxyCodeLine{00267       m\_imp-\/>m\_skipped = \textcolor{keyword}{false};}
\DoxyCodeLine{00268       \textcolor{keywordflow}{return} redo();}
\DoxyCodeLine{00269     \}}
\DoxyCodeLine{00270     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00271   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00272     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00273 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_undo_manager_ab8b7669f44fd75f3a3d277ee30ac4aa6}\label{class_t_undo_manager_ab8b7669f44fd75f3a3d277ee30ac4aa6}} 
\index{TUndoManager@{TUndoManager}!reset@{reset}}
\index{reset@{reset}!TUndoManager@{TUndoManager}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily void TUndo\+Manager\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00314                          \{}
\DoxyCodeLine{00315   assert(m\_imp-\/>m\_blockStack.empty());}
\DoxyCodeLine{00316   m\_imp-\/>m\_blockStack.clear();}
\DoxyCodeLine{00317   UndoList \&lst = m\_imp-\/>m\_undoList;}
\DoxyCodeLine{00318   std::for\_each(lst.begin(), lst.end(), deleteUndo);}
\DoxyCodeLine{00319   lst.clear();}
\DoxyCodeLine{00320   m\_imp-\/>m\_current = m\_imp-\/>m\_undoList.end();}
\DoxyCodeLine{00321   Q\_EMIT historyChanged();}
\DoxyCodeLine{00322 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_undo_manager_aa06d709ede65b3f1d4e05037b5086279}\label{class_t_undo_manager_aa06d709ede65b3f1d4e05037b5086279}} 
\index{TUndoManager@{TUndoManager}!setUndoMemorySize@{setUndoMemorySize}}
\index{setUndoMemorySize@{setUndoMemorySize}!TUndoManager@{TUndoManager}}
\doxysubsubsection{\texorpdfstring{setUndoMemorySize()}{setUndoMemorySize()}}
{\footnotesize\ttfamily void TUndo\+Manager\+::set\+Undo\+Memory\+Size (\begin{DoxyParamCaption}\item[{int}]{memory\+Syze }\end{DoxyParamCaption})}

Set the size of memory used for undo redo. {\bfseries{memory\+Syze}} is expressed in MB 
\begin{DoxyCode}{0}
\DoxyCodeLine{00295                                                    \{}
\DoxyCodeLine{00296   m\_imp-\/>m\_undoMemorySize = 1048576 * memorySyze;}
\DoxyCodeLine{00297 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_undo_manager_a16f50a00e2269a6e20402d05cc16a52f}\label{class_t_undo_manager_a16f50a00e2269a6e20402d05cc16a52f}} 
\index{TUndoManager@{TUndoManager}!skip@{skip}}
\index{skip@{skip}!TUndoManager@{TUndoManager}}
\doxysubsubsection{\texorpdfstring{skip()}{skip()}}
{\footnotesize\ttfamily void TUndo\+Manager\+::skip (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

undo() and redo() methods call TUndo\+Manager\+::manager()-\/\texorpdfstring{$>$}{>}\mbox{\hyperlink{class_t_undo_manager_a16f50a00e2269a6e20402d05cc16a52f}{skip()}} if they want another undo/redo performed 
\begin{DoxyCode}{0}
\DoxyCodeLine{00291 \{ m\_imp-\/>m\_skipped = \textcolor{keyword}{true}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_undo_manager_a201ef0ce64854274b3db974f2a8efd47}\label{class_t_undo_manager_a201ef0ce64854274b3db974f2a8efd47}} 
\index{TUndoManager@{TUndoManager}!undo@{undo}}
\index{undo@{undo}!TUndoManager@{TUndoManager}}
\doxysubsubsection{\texorpdfstring{undo()}{undo()}}
{\footnotesize\ttfamily bool TUndo\+Manager\+::undo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00239                         \{}
\DoxyCodeLine{00240   assert(m\_imp-\/>m\_blockStack.empty());}
\DoxyCodeLine{00241   UndoListIterator \&it = m\_imp-\/>m\_current;}
\DoxyCodeLine{00242   \textcolor{keywordflow}{if} (it != m\_imp-\/>m\_undoList.begin()) \{}
\DoxyCodeLine{00243     m\_imp-\/>m\_skipped = \textcolor{keyword}{false};}
\DoxyCodeLine{00244     -\/-\/it;}
\DoxyCodeLine{00245     (*it)-\/>undo();}
\DoxyCodeLine{00246     emit historyChanged();}
\DoxyCodeLine{00247     \textcolor{keywordflow}{if} (m\_imp-\/>m\_skipped) \{}
\DoxyCodeLine{00248       m\_imp-\/>m\_skipped = \textcolor{keyword}{false};}
\DoxyCodeLine{00249       \textcolor{keywordflow}{return} undo();}
\DoxyCodeLine{00250     \}}
\DoxyCodeLine{00251     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00252   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00253     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00254 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/tundo.\+h\item 
E\+:/opentoonz/toonz/sources/common/tcore/tundo.\+cpp\end{DoxyCompactItemize}
