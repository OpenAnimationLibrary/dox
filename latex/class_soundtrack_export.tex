\hypertarget{class_soundtrack_export}{}\doxysection{Soundtrack\+Export Class Reference}
\label{class_soundtrack_export}\index{SoundtrackExport@{SoundtrackExport}}
Inheritance diagram for Soundtrack\+Export\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_soundtrack_export}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_soundtrack_export_ab0466016f7788b4a72f2b4a5df786ad0}{has\+Sound\+Track}} ()
\item 
void \mbox{\hyperlink{class_soundtrack_export_af165d86949dc4979c182309e66664459}{make\+Soundtrack}} (int r0, int r1, double fps)
\item 
void \mbox{\hyperlink{class_soundtrack_export_a099eea5c7ab2c571b6f55af6777664cf}{save\+Soundtrack}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_soundtrack_export_a340b3f7ad7912f460fc3932b4c3506c9}{m\+\_\+has\+Soundtrack}}
\item 
\mbox{\hyperlink{class_t_smart_pointer_t}{TSound\+TrackP}} \mbox{\hyperlink{class_soundtrack_export_a127e899562f703b549232848b518dab8}{m\+\_\+st}}
\item 
\mbox{\hyperlink{class_t_sound_track}{TSound\+Track}} $\ast$ \mbox{\hyperlink{class_soundtrack_export_ae0b1aede0849b0448452b8f9b498af6d}{m\+\_\+sound}}
\item 
\mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}} $\ast$ \mbox{\hyperlink{class_soundtrack_export_a9353813d5dde70187a12ae8c0b5b6951}{m\+\_\+scene}}
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_soundtrack_export_ad92cc04572b128ac30e9e51b5693a6be}{m\+\_\+fp}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_soundtrack_export_a5eb17d35311e8638482e3631375ce89e}\label{class_soundtrack_export_a5eb17d35311e8638482e3631375ce89e}} 
\index{SoundtrackExport@{SoundtrackExport}!SoundtrackExport@{SoundtrackExport}}
\index{SoundtrackExport@{SoundtrackExport}!SoundtrackExport@{SoundtrackExport}}
\doxysubsubsection{\texorpdfstring{SoundtrackExport()}{SoundtrackExport()}}
{\footnotesize\ttfamily Soundtrack\+Export\+::\+Soundtrack\+Export (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00026                                    \{}
\DoxyCodeLine{00027   m\_scene = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{00028 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_soundtrack_export_ab0466016f7788b4a72f2b4a5df786ad0}\label{class_soundtrack_export_ab0466016f7788b4a72f2b4a5df786ad0}} 
\index{SoundtrackExport@{SoundtrackExport}!hasSoundTrack@{hasSoundTrack}}
\index{hasSoundTrack@{hasSoundTrack}!SoundtrackExport@{SoundtrackExport}}
\doxysubsubsection{\texorpdfstring{hasSoundTrack()}{hasSoundTrack()}}
{\footnotesize\ttfamily bool Soundtrack\+Export\+::has\+Sound\+Track (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00032                                      \{}
\DoxyCodeLine{00033   \mbox{\hyperlink{class_t_xsheet_handle}{TXsheetHandle}} *xsheetHandle    = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}();}
\DoxyCodeLine{00034   \mbox{\hyperlink{class_t_xsheet_1_1_sound_properties}{TXsheet::SoundProperties}} *prop = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_xsheet_1_1_sound_properties}{TXsheet::SoundProperties}}();}
\DoxyCodeLine{00035   m\_sound                        = xsheetHandle-\/>getXsheet()-\/>makeSound(prop);}
\DoxyCodeLine{00036   \textcolor{keywordflow}{if} (m\_sound == NULL) \{}
\DoxyCodeLine{00037     m\_hasSoundtrack = \textcolor{keyword}{false};}
\DoxyCodeLine{00038     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00039   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00040     m\_hasSoundtrack = \textcolor{keyword}{true};}
\DoxyCodeLine{00041     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00042   \}}
\DoxyCodeLine{00043 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_soundtrack_export_af165d86949dc4979c182309e66664459}\label{class_soundtrack_export_af165d86949dc4979c182309e66664459}} 
\index{SoundtrackExport@{SoundtrackExport}!makeSoundtrack@{makeSoundtrack}}
\index{makeSoundtrack@{makeSoundtrack}!SoundtrackExport@{SoundtrackExport}}
\doxysubsubsection{\texorpdfstring{makeSoundtrack()}{makeSoundtrack()}}
{\footnotesize\ttfamily void Soundtrack\+Export\+::make\+Soundtrack (\begin{DoxyParamCaption}\item[{int}]{r0,  }\item[{int}]{r1,  }\item[{double}]{fps }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00045                                                                 \{}
\DoxyCodeLine{00046   \mbox{\hyperlink{macros_8h_abcaf2f3bbaba74cf330e778baf26fb8a}{TCG\_ASSERT}}(r0 <= r1, \textcolor{keywordflow}{return} );}
\DoxyCodeLine{00047   \textcolor{keywordtype}{long} m\_whiteSample;}
\DoxyCodeLine{00048   \textcolor{keywordtype}{double} samplePerFrame = m\_sound-\/>getSampleRate() / fps;}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050   \textcolor{comment}{// Extract the useful part of scene soundtrack}}
\DoxyCodeLine{00051   \mbox{\hyperlink{class_t_smart_pointer_t}{TSoundTrackP}} snd1 = m\_sound-\/>\mbox{\hyperlink{class_t_sound_track_a6efbb9d14bb633cff1257095eba11096}{extract}}((TINT32)(r0 * samplePerFrame),}
\DoxyCodeLine{00052                                        (TINT32)(r1 * samplePerFrame));}
\DoxyCodeLine{00053 }
\DoxyCodeLine{00054   assert(!m\_st);}
\DoxyCodeLine{00055   \textcolor{keywordflow}{if} (!m\_st) \{}
\DoxyCodeLine{00056     m\_whiteSample = 0;}
\DoxyCodeLine{00057     \textcolor{comment}{// First, add white sound before the 'from' instant}}
\DoxyCodeLine{00058     m\_st          = \mbox{\hyperlink{class_t_sound_track_a9a83177a9a5b9a7470f32b87e7f21f3d}{TSoundTrack::create}}(snd1-\/>\mbox{\hyperlink{class_t_sound_track_aa58db0cee313f7174bc023e295b701a9}{getFormat}}(), m\_whiteSample);}
\DoxyCodeLine{00059     m\_whiteSample = 0;}
\DoxyCodeLine{00060   \}}
\DoxyCodeLine{00061 }
\DoxyCodeLine{00062   \textcolor{comment}{// Then, add the rest}}
\DoxyCodeLine{00063   TINT32 fromSample = m\_st-\/>getSampleCount();}
\DoxyCodeLine{00064   TINT32 numSample =}
\DoxyCodeLine{00065       std::max(TINT32((r1 -\/ r0 + 1) * samplePerFrame), snd1-\/>getSampleCount());}
\DoxyCodeLine{00066 }
\DoxyCodeLine{00067   m\_st = \mbox{\hyperlink{namespace_t_sop_a0fefdd72dbc5cf869c88ffef4e0adb7e}{TSop::insertBlank}}(m\_st, fromSample, numSample + m\_whiteSample);}
\DoxyCodeLine{00068   m\_st-\/>\mbox{\hyperlink{class_t_sound_track_a77370b67b41927689f5490bbe15a907d}{copy}}(snd1, TINT32(fromSample + m\_whiteSample));}
\DoxyCodeLine{00069 }
\DoxyCodeLine{00070   m\_whiteSample = 0;}
\DoxyCodeLine{00071 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_soundtrack_export_a099eea5c7ab2c571b6f55af6777664cf}\label{class_soundtrack_export_a099eea5c7ab2c571b6f55af6777664cf}} 
\index{SoundtrackExport@{SoundtrackExport}!saveSoundtrack@{saveSoundtrack}}
\index{saveSoundtrack@{saveSoundtrack}!SoundtrackExport@{SoundtrackExport}}
\doxysubsubsection{\texorpdfstring{saveSoundtrack()}{saveSoundtrack()}}
{\footnotesize\ttfamily void Soundtrack\+Export\+::save\+Soundtrack (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00073                                       \{}
\DoxyCodeLine{00074   \textcolor{keywordflow}{if} (!m\_st) \{}
\DoxyCodeLine{00075     \mbox{\hyperlink{class_generic_save_file_popup}{GenericSaveFilePopup}} *m\_saveShortcutsPopup =}
\DoxyCodeLine{00076         \textcolor{keyword}{new} \mbox{\hyperlink{class_generic_save_file_popup}{GenericSaveFilePopup}}(\textcolor{stringliteral}{"{}Export Soundtrack"{}});}
\DoxyCodeLine{00077     m\_saveShortcutsPopup-\/>addFilterType(\textcolor{stringliteral}{"{}wav"{}});}
\DoxyCodeLine{00078     \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = m\_saveShortcutsPopup-\/>\mbox{\hyperlink{class_generic_save_file_popup_a60a6017d0e411695c066c478b4974745}{getPath}}();}
\DoxyCodeLine{00079     \textcolor{keywordflow}{if} (fp == \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00080 }
\DoxyCodeLine{00081     \mbox{\hyperlink{class_t_scene_properties}{TSceneProperties}} *sprop = m\_scene-\/>\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}();}
\DoxyCodeLine{00082 }
\DoxyCodeLine{00083     \textcolor{keywordtype}{int} step;}
\DoxyCodeLine{00084     \textcolor{keywordtype}{int} from, to;}
\DoxyCodeLine{00085     sprop-\/>\mbox{\hyperlink{class_t_scene_properties_abea7b4b8e4f0cedbf753b26ec30b5331}{getOutputProperties}}()-\/>\mbox{\hyperlink{class_t_output_properties_aae127cbd8b19eaed0b0fbaf589349176}{getRange}}(from, to, step);}
\DoxyCodeLine{00086     \textcolor{keywordflow}{if} (to < 0) \{}
\DoxyCodeLine{00087       \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xs = m\_scene-\/>\mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}();}
\DoxyCodeLine{00088 }
\DoxyCodeLine{00089       \textcolor{comment}{// NOTE: Use of numeric\_limits::min is justified since the type is}}
\DoxyCodeLine{00090       \textcolor{comment}{// *INTERGRAL*.}}
\DoxyCodeLine{00091       from = (std::numeric\_limits<int>::max)(),}
\DoxyCodeLine{00092       to   = (std::numeric\_limits<int>::min)();}
\DoxyCodeLine{00093 }
\DoxyCodeLine{00094       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < xs-\/>\mbox{\hyperlink{class_t_xsheet_a17464dc5617cf87a46f03e1a52d36cc1}{getColumnCount}}(); ++k) \{}
\DoxyCodeLine{00095         \textcolor{keywordtype}{int} r0, r1;}
\DoxyCodeLine{00096         xs-\/>\mbox{\hyperlink{class_t_xsheet_a26850469fb0f2886b717479050c32be2}{getCellRange}}(k, r0, r1);}
\DoxyCodeLine{00097 }
\DoxyCodeLine{00098         from = std::min(from, r0), to = std::max(to, r1);}
\DoxyCodeLine{00099       \}}
\DoxyCodeLine{00100     \}}
\DoxyCodeLine{00101     makeSoundtrack(}
\DoxyCodeLine{00102         from, to,}
\DoxyCodeLine{00103         m\_scene-\/>\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}()-\/>\mbox{\hyperlink{class_t_scene_properties_abea7b4b8e4f0cedbf753b26ec30b5331}{getOutputProperties}}()-\/>\mbox{\hyperlink{class_t_output_properties_a0d9662971bc33097aa1b55111965b967}{getFrameRate}}());}
\DoxyCodeLine{00104     TSoundTrackWriter::save(fp, m\_st);}
\DoxyCodeLine{00105   \}}
\DoxyCodeLine{00106 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_soundtrack_export_ad92cc04572b128ac30e9e51b5693a6be}\label{class_soundtrack_export_ad92cc04572b128ac30e9e51b5693a6be}} 
\index{SoundtrackExport@{SoundtrackExport}!m\_fp@{m\_fp}}
\index{m\_fp@{m\_fp}!SoundtrackExport@{SoundtrackExport}}
\doxysubsubsection{\texorpdfstring{m\_fp}{m\_fp}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Soundtrack\+Export\+::m\+\_\+fp\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_soundtrack_export_a340b3f7ad7912f460fc3932b4c3506c9}\label{class_soundtrack_export_a340b3f7ad7912f460fc3932b4c3506c9}} 
\index{SoundtrackExport@{SoundtrackExport}!m\_hasSoundtrack@{m\_hasSoundtrack}}
\index{m\_hasSoundtrack@{m\_hasSoundtrack}!SoundtrackExport@{SoundtrackExport}}
\doxysubsubsection{\texorpdfstring{m\_hasSoundtrack}{m\_hasSoundtrack}}
{\footnotesize\ttfamily bool Soundtrack\+Export\+::m\+\_\+has\+Soundtrack\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_soundtrack_export_a9353813d5dde70187a12ae8c0b5b6951}\label{class_soundtrack_export_a9353813d5dde70187a12ae8c0b5b6951}} 
\index{SoundtrackExport@{SoundtrackExport}!m\_scene@{m\_scene}}
\index{m\_scene@{m\_scene}!SoundtrackExport@{SoundtrackExport}}
\doxysubsubsection{\texorpdfstring{m\_scene}{m\_scene}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}}$\ast$ Soundtrack\+Export\+::m\+\_\+scene\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_soundtrack_export_ae0b1aede0849b0448452b8f9b498af6d}\label{class_soundtrack_export_ae0b1aede0849b0448452b8f9b498af6d}} 
\index{SoundtrackExport@{SoundtrackExport}!m\_sound@{m\_sound}}
\index{m\_sound@{m\_sound}!SoundtrackExport@{SoundtrackExport}}
\doxysubsubsection{\texorpdfstring{m\_sound}{m\_sound}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_sound_track}{TSound\+Track}}$\ast$ Soundtrack\+Export\+::m\+\_\+sound\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_soundtrack_export_a127e899562f703b549232848b518dab8}\label{class_soundtrack_export_a127e899562f703b549232848b518dab8}} 
\index{SoundtrackExport@{SoundtrackExport}!m\_st@{m\_st}}
\index{m\_st@{m\_st}!SoundtrackExport@{SoundtrackExport}}
\doxysubsubsection{\texorpdfstring{m\_st}{m\_st}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_smart_pointer_t}{TSound\+TrackP}} Soundtrack\+Export\+::m\+\_\+st\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/soundtrackexport.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/soundtrackexport.\+cpp\end{DoxyCompactItemize}
