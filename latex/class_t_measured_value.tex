\hypertarget{class_t_measured_value}{}\doxysection{TMeasured\+Value Class Reference}
\label{class_t_measured_value}\index{TMeasuredValue@{TMeasuredValue}}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum {\bfseries Unit\+Type} \{ {\bfseries Main\+Unit}
, {\bfseries Current\+Unit}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_measured_value_ac265f203b8011d490241252780e06116}{TMeasured\+Value}} (std\+::string measure\+Name)
\item 
const \mbox{\hyperlink{class_t_measure}{TMeasure}} $\ast$ \mbox{\hyperlink{class_t_measured_value_aff9c182a63d35d2eda52526d80e5902b}{get\+Measure}} () const
\item 
void \mbox{\hyperlink{class_t_measured_value_a3c796b49d1eff316bcae96380f5dc738}{set\+Measure}} (const \mbox{\hyperlink{class_t_measure}{TMeasure}} $\ast$measure)
\item 
void \mbox{\hyperlink{class_t_measured_value_a6fa650fe2e67c88df5f284b9a0bcd1b9}{set\+Measure}} (std\+::string measure\+Name)
\item 
void \mbox{\hyperlink{class_t_measured_value_a7e01cd93200dab841c9153ec5fff60bd}{modify\+Value}} (double direction, int precision=0)
\item 
double \mbox{\hyperlink{class_t_measured_value_a0a14fbe008303d2495da6bc6496b307b}{get\+Value}} (Unit\+Type u\+Type) const
\item 
void \mbox{\hyperlink{class_t_measured_value_a9968397e654511944f0532d396bc252a}{set\+Value}} (Unit\+Type u\+Type, double value)
\item 
bool \mbox{\hyperlink{class_t_measured_value_af79be26f36e86c5d628379e6e148180d}{set\+Value}} (std\+::wstring s, int $\ast$p\+Err=0)
\item 
std\+::wstring \mbox{\hyperlink{class_t_measured_value_aa10ff5f83850541dfba4bd738f54171e}{to\+Wide\+String}} (int decimals=7) const
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{class_t_measured_value_a0e7100ba156760ebf8734acd645d794c}\label{class_t_measured_value_a0e7100ba156760ebf8734acd645d794c}} 
\index{TMeasuredValue@{TMeasuredValue}!UnitType@{UnitType}}
\index{UnitType@{UnitType}!TMeasuredValue@{TMeasuredValue}}
\doxysubsubsection{\texorpdfstring{UnitType}{UnitType}}
{\footnotesize\ttfamily enum TMeasured\+Value\+::\+Unit\+Type}


\begin{DoxyCode}{0}
\DoxyCodeLine{00160 \{ MainUnit, CurrentUnit \};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_measured_value_ac265f203b8011d490241252780e06116}\label{class_t_measured_value_ac265f203b8011d490241252780e06116}} 
\index{TMeasuredValue@{TMeasuredValue}!TMeasuredValue@{TMeasuredValue}}
\index{TMeasuredValue@{TMeasuredValue}!TMeasuredValue@{TMeasuredValue}}
\doxysubsubsection{\texorpdfstring{TMeasuredValue()}{TMeasuredValue()}}
{\footnotesize\ttfamily TMeasured\+Value\+::\+TMeasured\+Value (\begin{DoxyParamCaption}\item[{std\+::string}]{measure\+Name }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00434     : m\_measure(0), m\_value(0) \{}
\DoxyCodeLine{00435   setMeasure(measureName);}
\DoxyCodeLine{00436 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_measured_value_a2999c26211865cff5a0360b99ff80bc0}\label{class_t_measured_value_a2999c26211865cff5a0360b99ff80bc0}} 
\index{TMeasuredValue@{TMeasuredValue}!````~TMeasuredValue@{$\sim$TMeasuredValue}}
\index{````~TMeasuredValue@{$\sim$TMeasuredValue}!TMeasuredValue@{TMeasuredValue}}
\doxysubsubsection{\texorpdfstring{$\sim$TMeasuredValue()}{~TMeasuredValue()}}
{\footnotesize\ttfamily TMeasured\+Value\+::$\sim$\+TMeasured\+Value (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00440 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_measured_value_aff9c182a63d35d2eda52526d80e5902b}\label{class_t_measured_value_aff9c182a63d35d2eda52526d80e5902b}} 
\index{TMeasuredValue@{TMeasuredValue}!getMeasure@{getMeasure}}
\index{getMeasure@{getMeasure}!TMeasuredValue@{TMeasuredValue}}
\doxysubsubsection{\texorpdfstring{getMeasure()}{getMeasure()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_measure}{TMeasure}} $\ast$ TMeasured\+Value\+::get\+Measure (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00150 \{ \textcolor{keywordflow}{return} m\_measure; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_measured_value_a0a14fbe008303d2495da6bc6496b307b}\label{class_t_measured_value_a0a14fbe008303d2495da6bc6496b307b}} 
\index{TMeasuredValue@{TMeasuredValue}!getValue@{getValue}}
\index{getValue@{getValue}!TMeasuredValue@{TMeasuredValue}}
\doxysubsubsection{\texorpdfstring{getValue()}{getValue()}}
{\footnotesize\ttfamily double TMeasured\+Value\+::get\+Value (\begin{DoxyParamCaption}\item[{Unit\+Type}]{u\+Type }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00162                                         \{}
\DoxyCodeLine{00163     \textcolor{keywordflow}{return} uType == MainUnit ? m\_value}
\DoxyCodeLine{00164                              : m\_measure-\/>getCurrentUnit()-\/>convertTo(m\_value);}
\DoxyCodeLine{00165   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_measured_value_a7e01cd93200dab841c9153ec5fff60bd}\label{class_t_measured_value_a7e01cd93200dab841c9153ec5fff60bd}} 
\index{TMeasuredValue@{TMeasuredValue}!modifyValue@{modifyValue}}
\index{modifyValue@{modifyValue}!TMeasuredValue@{TMeasuredValue}}
\doxysubsubsection{\texorpdfstring{modifyValue()}{modifyValue()}}
{\footnotesize\ttfamily void TMeasured\+Value\+::modify\+Value (\begin{DoxyParamCaption}\item[{double}]{direction,  }\item[{int}]{precision = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00546                                                                 \{}
\DoxyCodeLine{00547   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < precision; i++) \{}
\DoxyCodeLine{00548     direction /= 10;}
\DoxyCodeLine{00549   \}}
\DoxyCodeLine{00550   std::wstring currExtension =}
\DoxyCodeLine{00551       getMeasure()-\/>getCurrentUnit()-\/>getDefaultExtension();}
\DoxyCodeLine{00552   \textcolor{comment}{// use a smaller value for inches and cm}}
\DoxyCodeLine{00553   \textcolor{keywordflow}{if} (currExtension == L\textcolor{stringliteral}{"{}\(\backslash\)"{}"{}} || currExtension == L\textcolor{stringliteral}{"{}cm"{}}) direction /= 10;}
\DoxyCodeLine{00554   \textcolor{keywordtype}{double} v = getValue(CurrentUnit);}
\DoxyCodeLine{00555   setValue(CurrentUnit, v + direction);}
\DoxyCodeLine{00556 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_measured_value_a3c796b49d1eff316bcae96380f5dc738}\label{class_t_measured_value_a3c796b49d1eff316bcae96380f5dc738}} 
\index{TMeasuredValue@{TMeasuredValue}!setMeasure@{setMeasure}}
\index{setMeasure@{setMeasure}!TMeasuredValue@{TMeasuredValue}}
\doxysubsubsection{\texorpdfstring{setMeasure()}{setMeasure()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void TMeasured\+Value\+::set\+Measure (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_measure}{TMeasure}} $\ast$}]{measure }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00444                                                        \{}
\DoxyCodeLine{00445   assert(measure);}
\DoxyCodeLine{00446   \textcolor{keywordflow}{if} (!measure) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00447   m\_measure = measure;}
\DoxyCodeLine{00448   m\_value   = m\_measure-\/>getDefaultValue();}
\DoxyCodeLine{00449 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_measured_value_a6fa650fe2e67c88df5f284b9a0bcd1b9}\label{class_t_measured_value_a6fa650fe2e67c88df5f284b9a0bcd1b9}} 
\index{TMeasuredValue@{TMeasuredValue}!setMeasure@{setMeasure}}
\index{setMeasure@{setMeasure}!TMeasuredValue@{TMeasuredValue}}
\doxysubsubsection{\texorpdfstring{setMeasure()}{setMeasure()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void TMeasured\+Value\+::set\+Measure (\begin{DoxyParamCaption}\item[{std\+::string}]{measure\+Name }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00453                                                      \{}
\DoxyCodeLine{00454   setMeasure(TMeasureManager::instance()-\/>get(measureName));}
\DoxyCodeLine{00455 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_measured_value_af79be26f36e86c5d628379e6e148180d}\label{class_t_measured_value_af79be26f36e86c5d628379e6e148180d}} 
\index{TMeasuredValue@{TMeasuredValue}!setValue@{setValue}}
\index{setValue@{setValue}!TMeasuredValue@{TMeasuredValue}}
\doxysubsubsection{\texorpdfstring{setValue()}{setValue()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily bool TMeasured\+Value\+::set\+Value (\begin{DoxyParamCaption}\item[{std\+::wstring}]{s,  }\item[{int $\ast$}]{p\+Err = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00459                                                      \{}
\DoxyCodeLine{00460   \textcolor{keywordflow}{if} (s == L\textcolor{stringliteral}{"{}"{}} || s == L\textcolor{stringliteral}{"{}-\/"{}}) \{}
\DoxyCodeLine{00461     \textcolor{keywordflow}{if} (pErr) *pErr = -\/1;}
\DoxyCodeLine{00462     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00463   \}}
\DoxyCodeLine{00464   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_unit}{TUnit}} *unit = m\_measure-\/>getCurrentUnit();}
\DoxyCodeLine{00465   \textcolor{keywordtype}{double} value      = 0;}
\DoxyCodeLine{00466   \textcolor{keywordtype}{bool} valueFlag    = \textcolor{keyword}{false};}
\DoxyCodeLine{00467   \textcolor{keywordtype}{int} i = 0, len = s.length();}
\DoxyCodeLine{00468   \textcolor{comment}{// skip blanks}}
\DoxyCodeLine{00469   i = s.find\_first\_not\_of(::to\_wstring(\textcolor{stringliteral}{"{} \(\backslash\)t"{}}));}
\DoxyCodeLine{00470   assert(i != (\textcolor{keywordtype}{int})std::wstring::npos);}
\DoxyCodeLine{00471   \textcolor{keywordtype}{int} j = i;}
\DoxyCodeLine{00472   \textcolor{comment}{// match number}}
\DoxyCodeLine{00473   \textcolor{keywordflow}{if} (i < len \&\& (s[i] == L\textcolor{charliteral}{'-\/'} || s[i] == L\textcolor{charliteral}{'+'})) i++;}
\DoxyCodeLine{00474   \textcolor{keywordflow}{while} (i < len \&\& L\textcolor{charliteral}{'0'} <= s[i] \&\& s[i] <= L\textcolor{charliteral}{'9'}) i++;}
\DoxyCodeLine{00475   \textcolor{keywordflow}{if} (i < len \&\& s[i] == L\textcolor{charliteral}{'.'}) \{}
\DoxyCodeLine{00476     i++;}
\DoxyCodeLine{00477     \textcolor{keywordflow}{while} (i < len \&\& L\textcolor{charliteral}{'0'} <= s[i] \&\& s[i] <= L\textcolor{charliteral}{'9'}) i++;}
\DoxyCodeLine{00478     \textcolor{keywordflow}{if} (i < len \&\& (s[i] == L\textcolor{charliteral}{'E'} || s[i] == L\textcolor{charliteral}{'e'})) \{}
\DoxyCodeLine{00479       i++;}
\DoxyCodeLine{00480       \textcolor{keywordflow}{if} (i < len \&\& (s[i] == L\textcolor{charliteral}{'-\/'} || s[i] == L\textcolor{charliteral}{'+'})) i++;}
\DoxyCodeLine{00481       \textcolor{keywordflow}{while} (i < len \&\& L\textcolor{charliteral}{'0'} <= s[i] \&\& s[i] <= L\textcolor{charliteral}{'9'}) i++;}
\DoxyCodeLine{00482     \}}
\DoxyCodeLine{00483   \}}
\DoxyCodeLine{00484   \textcolor{keywordflow}{if} (i > j) \{}
\DoxyCodeLine{00485     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00486       value = std::stod(s.substr(j, i -\/ j));}
\DoxyCodeLine{00487     \}}
\DoxyCodeLine{00488     \textcolor{comment}{// handle exceptions}}
\DoxyCodeLine{00489     \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} std::invalid\_argument \&e) \{}
\DoxyCodeLine{00490       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00491     \} \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} std::out\_of\_range \&e) \{}
\DoxyCodeLine{00492       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00493     \}}
\DoxyCodeLine{00494 }
\DoxyCodeLine{00495     valueFlag = \textcolor{keyword}{true};}
\DoxyCodeLine{00496     \textcolor{comment}{// skip blanks}}
\DoxyCodeLine{00497     i = s.find\_first\_not\_of(::to\_wstring(\textcolor{stringliteral}{"{} \(\backslash\)t"{}}), i);}
\DoxyCodeLine{00498     \textcolor{keywordflow}{if} (i == (\textcolor{keywordtype}{int})std::wstring::npos) i = s.length();}
\DoxyCodeLine{00499   \}}
\DoxyCodeLine{00500 }
\DoxyCodeLine{00501   \textcolor{comment}{// remove trailing blanks}}
\DoxyCodeLine{00502   \textcolor{keywordflow}{if} (i < (\textcolor{keywordtype}{int})s.length()) \{}
\DoxyCodeLine{00503     j = i;}
\DoxyCodeLine{00504     i = s.find\_last\_not\_of(::to\_wstring(\textcolor{stringliteral}{"{} \(\backslash\)t"{}}));}
\DoxyCodeLine{00505     \textcolor{keywordflow}{if} (i == (\textcolor{keywordtype}{int})std::wstring::npos) i = len -\/ 1;}
\DoxyCodeLine{00506     \textcolor{keywordflow}{if} (j <= i) \{}
\DoxyCodeLine{00507       std::wstring unitExt = s.substr(j, i + 1 -\/ j);}
\DoxyCodeLine{00508       unit                 = m\_measure-\/>getUnit(unitExt);}
\DoxyCodeLine{00509       \textcolor{keywordflow}{if} (!unit) \{}
\DoxyCodeLine{00510         \textcolor{keywordflow}{if} (pErr) *pErr = -\/2;}
\DoxyCodeLine{00511         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00512       \}}
\DoxyCodeLine{00513     \}}
\DoxyCodeLine{00514   \}}
\DoxyCodeLine{00515 }
\DoxyCodeLine{00516   \textcolor{keywordflow}{if} (valueFlag) \{}
\DoxyCodeLine{00517     \textcolor{keywordtype}{double} newValue = unit-\/>convertFrom(value);}
\DoxyCodeLine{00518     \textcolor{keywordflow}{if} (m\_value == newValue) \{}
\DoxyCodeLine{00519       \textcolor{keywordflow}{if} (pErr) *pErr = 0;}
\DoxyCodeLine{00520       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00521     \}}
\DoxyCodeLine{00522     m\_value = newValue;}
\DoxyCodeLine{00523   \}}
\DoxyCodeLine{00524   \textcolor{keywordflow}{if} (pErr) *pErr = (valueFlag || unit != 0) ? 0 : -\/3;}
\DoxyCodeLine{00525   \textcolor{keywordflow}{return} valueFlag || unit != 0;}
\DoxyCodeLine{00526 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_measured_value_a9968397e654511944f0532d396bc252a}\label{class_t_measured_value_a9968397e654511944f0532d396bc252a}} 
\index{TMeasuredValue@{TMeasuredValue}!setValue@{setValue}}
\index{setValue@{setValue}!TMeasuredValue@{TMeasuredValue}}
\doxysubsubsection{\texorpdfstring{setValue()}{setValue()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void TMeasured\+Value\+::set\+Value (\begin{DoxyParamCaption}\item[{Unit\+Type}]{u\+Type,  }\item[{double}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00166                                               \{}
\DoxyCodeLine{00167     m\_value = uType == MainUnit}
\DoxyCodeLine{00168                   ? value}
\DoxyCodeLine{00169                   : m\_measure-\/>getCurrentUnit()-\/>convertFrom(value);}
\DoxyCodeLine{00170   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_measured_value_aa10ff5f83850541dfba4bd738f54171e}\label{class_t_measured_value_aa10ff5f83850541dfba4bd738f54171e}} 
\index{TMeasuredValue@{TMeasuredValue}!toWideString@{toWideString}}
\index{toWideString@{toWideString}!TMeasuredValue@{TMeasuredValue}}
\doxysubsubsection{\texorpdfstring{toWideString()}{toWideString()}}
{\footnotesize\ttfamily std\+::wstring TMeasured\+Value\+::to\+Wide\+String (\begin{DoxyParamCaption}\item[{int}]{decimals = {\ttfamily 7} }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00530                                                           \{}
\DoxyCodeLine{00531   \textcolor{keywordtype}{double} v      = getValue(CurrentUnit);}
\DoxyCodeLine{00532   std::string s = ::to\_string(v, decimals);}
\DoxyCodeLine{00533   \textcolor{keywordflow}{if} (s.find(\textcolor{charliteral}{'.'}) != std::string::npos) \{}
\DoxyCodeLine{00534     \textcolor{keywordtype}{int} i = s.length();}
\DoxyCodeLine{00535     \textcolor{keywordflow}{while} (i > 0 \&\& s[i -\/ 1] == \textcolor{charliteral}{'0'}) i-\/-\/;}
\DoxyCodeLine{00536     \textcolor{keywordflow}{if} (i > 0 \&\& s[i -\/ 1] == \textcolor{charliteral}{'.'}) i-\/-\/;}
\DoxyCodeLine{00537     \textcolor{keywordflow}{if} (i < (\textcolor{keywordtype}{int})s.length()) s = s.substr(0, i);}
\DoxyCodeLine{00538   \}}
\DoxyCodeLine{00539   std::wstring measure = m\_measure-\/>getCurrentUnit()-\/>getDefaultExtension();}
\DoxyCodeLine{00540   \textcolor{keywordflow}{if} (measure.empty()) return ::to\_wstring(s);}
\DoxyCodeLine{00541   return ::to\_wstring(s) + L\textcolor{stringliteral}{"{} "{}} + measure;}
\DoxyCodeLine{00542 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/tunit.\+h\item 
E\+:/opentoonz/toonz/sources/common/tunit/tunit.\+cpp\end{DoxyCompactItemize}
