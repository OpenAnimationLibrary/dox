\hypertarget{class_drag_selection_tool_1_1_vector_change_thickness_tool}{}\doxysection{Drag\+Selection\+Tool\+::Vector\+Change\+Thickness\+Tool Class Reference}
\label{class_drag_selection_tool_1_1_vector_change_thickness_tool}\index{DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}}
Inheritance diagram for Drag\+Selection\+Tool\+::Vector\+Change\+Thickness\+Tool\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_drag_selection_tool_1_1_vector_change_thickness_tool}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_drag_selection_tool_1_1_vector_change_thickness_tool_a7ca8b927092c1d33c178a3497ac6a703}{Vector\+Change\+Thickness\+Tool}} (\mbox{\hyperlink{class_vector_selection_tool}{Vector\+Selection\+Tool}} $\ast$tool)
\item 
void \mbox{\hyperlink{class_drag_selection_tool_1_1_vector_change_thickness_tool_aec42830db990772b908071416a2c318b}{set\+Strokes\+Thickness}} (\mbox{\hyperlink{class_t_vector_image}{TVector\+Image}} \&vi)
\item 
void \mbox{\hyperlink{class_drag_selection_tool_1_1_vector_change_thickness_tool_aefbe4ba95a561e2e898d5ee1cde1844b}{set\+Thickness\+Change}} (double value)
\item 
void \mbox{\hyperlink{class_drag_selection_tool_1_1_vector_change_thickness_tool_a6076de02de96ae8da16e5ec09bec7dd1}{change\+Image\+Thickness}} (\mbox{\hyperlink{class_t_vector_image}{TVector\+Image}} \&vi, double new\+Thickness)
\item 
void \mbox{\hyperlink{class_drag_selection_tool_1_1_vector_change_thickness_tool_aa395aca99d1803b5d1a9044e327f374f}{add\+Undo}} ()
\item 
void \mbox{\hyperlink{class_drag_selection_tool_1_1_vector_change_thickness_tool_aad094bcdb418ce647d90dc94a294bf05}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_drag_selection_tool_1_1_vector_change_thickness_tool_a776a40adaf4c795eb4ba9da2344f5d4e}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_drag_selection_tool_1_1_vector_change_thickness_tool_a665f1a67ec6aae2f514d926e0e8c0aa6}{left\+Button\+Up}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_drag_selection_tool_1_1_vector_change_thickness_tool_ab43c22dd3679c753339b4d1d45860cfe}{draw}} () override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_vector_change_thickness_tool_a7ca8b927092c1d33c178a3497ac6a703}\label{class_drag_selection_tool_1_1_vector_change_thickness_tool_a7ca8b927092c1d33c178a3497ac6a703}} 
\index{DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}!VectorChangeThicknessTool@{VectorChangeThicknessTool}}
\index{VectorChangeThicknessTool@{VectorChangeThicknessTool}!DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}}
\doxysubsubsection{\texorpdfstring{VectorChangeThicknessTool()}{VectorChangeThicknessTool()}}
{\footnotesize\ttfamily Drag\+Selection\+Tool\+::\+Vector\+Change\+Thickness\+Tool\+::\+Vector\+Change\+Thickness\+Tool (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_vector_selection_tool}{Vector\+Selection\+Tool}} $\ast$}]{tool }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00912     : \mbox{\hyperlink{class_drag_selection_tool_1_1_drag_tool}{DragTool}}(tool), m\_curPos(), m\_firstPos(), m\_thicknessChange(0) \{}
\DoxyCodeLine{00913   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi = tool-\/>\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00914   assert(vi);}
\DoxyCodeLine{00915 }
\DoxyCodeLine{00916   setStrokesThickness(*vi);}
\DoxyCodeLine{00917 }
\DoxyCodeLine{00918   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *level =}
\DoxyCodeLine{00919       TTool::getApplication()-\/>getCurrentLevel()-\/>getSimpleLevel();}
\DoxyCodeLine{00920   m\_undo.reset(\textcolor{keyword}{new} \mbox{\hyperlink{class_drag_selection_tool_1_1_undo_change_strokes}{UndoChangeStrokes}}(level, tool-\/>\mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}(), tool,}
\DoxyCodeLine{00921                                      tool-\/>strokeSelection()));}
\DoxyCodeLine{00922 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_vector_change_thickness_tool_adf2f30a43cad75ffcbc0c18287895b49}\label{class_drag_selection_tool_1_1_vector_change_thickness_tool_adf2f30a43cad75ffcbc0c18287895b49}} 
\index{DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}!````~VectorChangeThicknessTool@{$\sim$VectorChangeThicknessTool}}
\index{````~VectorChangeThicknessTool@{$\sim$VectorChangeThicknessTool}!DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}}
\doxysubsubsection{\texorpdfstring{$\sim$VectorChangeThicknessTool()}{~VectorChangeThicknessTool()}}
{\footnotesize\ttfamily Vector\+Change\+Thickness\+Tool\+::$\sim$\+Vector\+Change\+Thickness\+Tool (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00926 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_vector_change_thickness_tool_aa395aca99d1803b5d1a9044e327f374f}\label{class_drag_selection_tool_1_1_vector_change_thickness_tool_aa395aca99d1803b5d1a9044e327f374f}} 
\index{DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}!addUndo@{addUndo}}
\index{addUndo@{addUndo}!DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}}
\doxysubsubsection{\texorpdfstring{addUndo()}{addUndo()}}
{\footnotesize\ttfamily void Drag\+Selection\+Tool\+::\+Vector\+Change\+Thickness\+Tool\+::add\+Undo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01037                                                          \{}
\DoxyCodeLine{01038   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} curVi = getTool()-\/>\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01039   \textcolor{keywordflow}{if} (!curVi) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01040 }
\DoxyCodeLine{01041   m\_undo-\/>registerStrokes();}
\DoxyCodeLine{01042 }
\DoxyCodeLine{01043   \mbox{\hyperlink{class_selection_tool}{SelectionTool}} *tool = getTool();}
\DoxyCodeLine{01044   \textcolor{keywordflow}{if} (tool-\/>isLevelType() || tool-\/>isSelectedFramesType()) \{}
\DoxyCodeLine{01045     \mbox{\hyperlink{class_vector_selection_tool}{VectorSelectionTool}} *vtool = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_vector_selection_tool}{VectorSelectionTool}} *\textcolor{keyword}{>}(tool);}
\DoxyCodeLine{01046     assert(vtool \&\& !vtool-\/>levelSelection().\mbox{\hyperlink{class_level_selection_a264955fde632f3d59330edea8903b3ed}{isEmpty}}());}
\DoxyCodeLine{01047 }
\DoxyCodeLine{01048     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *level =}
\DoxyCodeLine{01049         TTool::getApplication()-\/>getCurrentLevel()-\/>getSimpleLevel();}
\DoxyCodeLine{01050 }
\DoxyCodeLine{01051     \textcolor{comment}{// Retrieve frames available in the level}}
\DoxyCodeLine{01052     std::vector<TFrameId> fids;}
\DoxyCodeLine{01053     level-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{getFids}}(fids);}
\DoxyCodeLine{01054 }
\DoxyCodeLine{01055     \textcolor{comment}{// Remove unwanted frames}}
\DoxyCodeLine{01056     fids.erase(std::remove\_if(fids.begin(), fids.end(),}
\DoxyCodeLine{01057                               boost::bind(::currentOrNotSelected,}
\DoxyCodeLine{01058                                           boost::cref(*vtool), \_1)),}
\DoxyCodeLine{01059                fids.end());}
\DoxyCodeLine{01060 }
\DoxyCodeLine{01061     TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01062     \{}
\DoxyCodeLine{01063       \textcolor{comment}{// Current frame added separately}}
\DoxyCodeLine{01064       TUndoManager::manager()-\/>add(m\_undo.release());  \textcolor{comment}{// Inside an undo block}}
\DoxyCodeLine{01065 }
\DoxyCodeLine{01066       \textcolor{comment}{// Iterate remaining ones}}
\DoxyCodeLine{01067       \textcolor{keywordtype}{int} f, fCount = int(fids.size());}
\DoxyCodeLine{01068       \textcolor{keywordflow}{for} (f = 0; f != fCount; ++f) \{}
\DoxyCodeLine{01069         \textcolor{keyword}{const} \mbox{\hyperlink{class_t_frame_id}{TFrameId}} \&fid = fids[f];}
\DoxyCodeLine{01070 }
\DoxyCodeLine{01071         \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi = level-\/>getFrame(fid, \textcolor{keyword}{true});}
\DoxyCodeLine{01072         \textcolor{keywordflow}{if} (!vi) \{}
\DoxyCodeLine{01073           assert(vi);}
\DoxyCodeLine{01074           \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01075         \}}
\DoxyCodeLine{01076 }
\DoxyCodeLine{01077         \textcolor{comment}{// Transform fid's selection}}
\DoxyCodeLine{01078         std::unique\_ptr<UndoChangeStrokes> undo(}
\DoxyCodeLine{01079             \textcolor{keyword}{new} \mbox{\hyperlink{class_drag_selection_tool_1_1_undo_change_strokes}{UndoChangeStrokes}}(level, fid, vtool, vtool-\/>levelSelection()));}
\DoxyCodeLine{01080 }
\DoxyCodeLine{01081         setStrokesThickness(*vi);}
\DoxyCodeLine{01082         changeImageThickness(*vi, m\_thicknessChange);}
\DoxyCodeLine{01083 }
\DoxyCodeLine{01084         m\_strokesThickness.clear();}
\DoxyCodeLine{01085         undo-\/>registerStrokes();}
\DoxyCodeLine{01086 }
\DoxyCodeLine{01087         TUndoManager::manager()-\/>add(undo.release());}
\DoxyCodeLine{01088       \}}
\DoxyCodeLine{01089     \}}
\DoxyCodeLine{01090     TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01091 }
\DoxyCodeLine{01092     \textcolor{comment}{// Finally, notify changed frames}}
\DoxyCodeLine{01093     std::for\_each(fids.begin(), fids.end(),}
\DoxyCodeLine{01094                   boost::bind(  \textcolor{comment}{// NOTE: current frame is not here -\/ it was}}
\DoxyCodeLine{01095                       \&\mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{TTool::notifyImageChanged}}, m\_tool,}
\DoxyCodeLine{01096                       \_1));  \textcolor{comment}{//       aldready notified}}
\DoxyCodeLine{01097   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01098     TUndoManager::manager()-\/>add(m\_undo.release());  \textcolor{comment}{// Outside any undo block}}
\DoxyCodeLine{01099 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_vector_change_thickness_tool_a6076de02de96ae8da16e5ec09bec7dd1}\label{class_drag_selection_tool_1_1_vector_change_thickness_tool_a6076de02de96ae8da16e5ec09bec7dd1}} 
\index{DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}!changeImageThickness@{changeImageThickness}}
\index{changeImageThickness@{changeImageThickness}!DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}}
\doxysubsubsection{\texorpdfstring{changeImageThickness()}{changeImageThickness()}}
{\footnotesize\ttfamily void Drag\+Selection\+Tool\+::\+Vector\+Change\+Thickness\+Tool\+::change\+Image\+Thickness (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_vector_image}{TVector\+Image}} \&}]{vi,  }\item[{double}]{new\+Thickness }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00997                                            \{}
\DoxyCodeLine{00998   \textcolor{keyword}{struct }locals \{}
\DoxyCodeLine{00999     \textcolor{keyword}{static} \textcolor{keywordtype}{void} changeThickness(\textcolor{keyword}{const} ChangeImageThickness::Data \&data, \textcolor{keywordtype}{int} s) \{}
\DoxyCodeLine{01000       \mbox{\hyperlink{class_t_stroke}{TStroke}} \&stroke = *data.m\_vi.getStroke(s);}
\DoxyCodeLine{01001 }
\DoxyCodeLine{01002       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} cp = 0; cp < (int)stroke.\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}(); ++cp) \{}
\DoxyCodeLine{01003         \textcolor{keywordtype}{double} thickness =}
\DoxyCodeLine{01004             tcrop(data.m\_tool.m\_strokesThickness[s][cp] + data.m\_newThickness,}
\DoxyCodeLine{01005                   0.0, 255.0);}
\DoxyCodeLine{01006 }
\DoxyCodeLine{01007         \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} point(\mbox{\hyperlink{class_t_point_t}{TPointD}}(stroke.\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(cp)), thickness);}
\DoxyCodeLine{01008 }
\DoxyCodeLine{01009         stroke.\mbox{\hyperlink{class_t_stroke_abc4f174af1e2712c400ae63e005aac18}{setControlPoint}}(cp, point);}
\DoxyCodeLine{01010       \}}
\DoxyCodeLine{01011     \}}
\DoxyCodeLine{01012 }
\DoxyCodeLine{01013   \};  \textcolor{comment}{// locals}}
\DoxyCodeLine{01014 }
\DoxyCodeLine{01015   ChangeImageThickness::Data data = \{*\textcolor{keyword}{this}, vi, newThickness\};}
\DoxyCodeLine{01016 }
\DoxyCodeLine{01017   \mbox{\hyperlink{class_vector_selection_tool}{VectorSelectionTool}} *vsTool = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_vector_selection_tool}{VectorSelectionTool}} *\textcolor{keyword}{>}(getTool());}
\DoxyCodeLine{01018   \textcolor{keyword}{const} \mbox{\hyperlink{class_level_selection}{LevelSelection}} \&levelSelection = vsTool-\/>levelSelection();}
\DoxyCodeLine{01019 }
\DoxyCodeLine{01020   \textcolor{keywordflow}{if} (levelSelection.\mbox{\hyperlink{class_level_selection_a264955fde632f3d59330edea8903b3ed}{isEmpty}}()) \{}
\DoxyCodeLine{01021     \mbox{\hyperlink{class_stroke_selection}{StrokeSelection}} *strokeSelection =}
\DoxyCodeLine{01022         \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_stroke_selection}{StrokeSelection}} *\textcolor{keyword}{>}(m\_tool-\/>\mbox{\hyperlink{class_selection_tool_a8041c0371ff11a50bc4165812fa64d8a}{getSelection}}());}
\DoxyCodeLine{01023     \textcolor{keyword}{const} std::set<int> \&selectedStrokeIdxs = strokeSelection-\/>getSelection();}
\DoxyCodeLine{01024 }
\DoxyCodeLine{01025     std::for\_each(selectedStrokeIdxs.begin(), selectedStrokeIdxs.end(),}
\DoxyCodeLine{01026                   boost::bind(locals::changeThickness, boost::ref(data), \_1));}
\DoxyCodeLine{01027   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01028     std::vector<int> strokeIdxs = getSelectedStrokes(vi, levelSelection);}
\DoxyCodeLine{01029 }
\DoxyCodeLine{01030     std::for\_each(strokeIdxs.begin(), strokeIdxs.end(),}
\DoxyCodeLine{01031                   boost::bind(locals::changeThickness, boost::ref(data), \_1));}
\DoxyCodeLine{01032   \}}
\DoxyCodeLine{01033 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_vector_change_thickness_tool_ab43c22dd3679c753339b4d1d45860cfe}\label{class_drag_selection_tool_1_1_vector_change_thickness_tool_ab43c22dd3679c753339b4d1d45860cfe}} 
\index{DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}!draw@{draw}}
\index{draw@{draw}!DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Drag\+Selection\+Tool\+::\+Vector\+Change\+Thickness\+Tool\+::draw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_drag_selection_tool_1_1_drag_tool}{Drag\+Selection\+Tool\+::\+Drag\+Tool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00259 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_vector_change_thickness_tool_aad094bcdb418ce647d90dc94a294bf05}\label{class_drag_selection_tool_1_1_vector_change_thickness_tool_aad094bcdb418ce647d90dc94a294bf05}} 
\index{DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily void Drag\+Selection\+Tool\+::\+Vector\+Change\+Thickness\+Tool\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_drag_selection_tool_1_1_drag_tool}{Drag\+Selection\+Tool\+::\+Drag\+Tool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01104                                               \{}
\DoxyCodeLine{01105   m\_curPos   = pos;}
\DoxyCodeLine{01106   m\_firstPos = pos;}
\DoxyCodeLine{01107 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_vector_change_thickness_tool_a776a40adaf4c795eb4ba9da2344f5d4e}\label{class_drag_selection_tool_1_1_vector_change_thickness_tool_a776a40adaf4c795eb4ba9da2344f5d4e}} 
\index{DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Drag\+Selection\+Tool\+::\+Vector\+Change\+Thickness\+Tool\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_drag_selection_tool_1_1_drag_tool}{Drag\+Selection\+Tool\+::\+Drag\+Tool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01112                                               \{}
\DoxyCodeLine{01113   \mbox{\hyperlink{class_t_affine}{TAffine}} aff;}
\DoxyCodeLine{01114   \mbox{\hyperlink{class_t_point_t}{TPointD}} delta    = pos -\/ m\_curPos;}
\DoxyCodeLine{01115   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi = getTool()-\/>\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01116   \textcolor{keywordflow}{if} (!vi) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01117   \mbox{\hyperlink{class_vector_selection_tool}{VectorSelectionTool}} *tool = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_vector_selection_tool}{VectorSelectionTool}} *\textcolor{keyword}{>}(m\_tool);}
\DoxyCodeLine{01118   tool-\/>setResetCenter(\textcolor{keyword}{false});}
\DoxyCodeLine{01119   m\_thicknessChange = (pos.y -\/ m\_firstPos.y) * 0.2;}
\DoxyCodeLine{01120   changeImageThickness(*vi, m\_thicknessChange);}
\DoxyCodeLine{01121   getTool()-\/>m\_deformValues.m\_maxSelectionThickness = m\_thicknessChange;}
\DoxyCodeLine{01122   getTool()-\/>computeBBox();}
\DoxyCodeLine{01123   getTool()-\/>\mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{01124   m\_curPos = pos;}
\DoxyCodeLine{01125   getTool()-\/>\mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}();}
\DoxyCodeLine{01126   TTool::getApplication()-\/>getCurrentTool()-\/>\mbox{\hyperlink{class_tool_handle_a39e34f1a30868bad11a629228b07bd40}{notifyToolChanged}}();}
\DoxyCodeLine{01127 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_vector_change_thickness_tool_a665f1a67ec6aae2f514d926e0e8c0aa6}\label{class_drag_selection_tool_1_1_vector_change_thickness_tool_a665f1a67ec6aae2f514d926e0e8c0aa6}} 
\index{DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}!leftButtonUp@{leftButtonUp}}
\index{leftButtonUp@{leftButtonUp}!DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}}
\doxysubsubsection{\texorpdfstring{leftButtonUp()}{leftButtonUp()}}
{\footnotesize\ttfamily void Drag\+Selection\+Tool\+::\+Vector\+Change\+Thickness\+Tool\+::left\+Button\+Up (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_drag_selection_tool_1_1_drag_tool}{Drag\+Selection\+Tool\+::\+Drag\+Tool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01132                                               \{}
\DoxyCodeLine{01133   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} curVi = getTool()-\/>\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01134   \textcolor{keywordflow}{if} (!curVi) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01135   addUndo();}
\DoxyCodeLine{01136   m\_strokesThickness.clear();}
\DoxyCodeLine{01137 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_vector_change_thickness_tool_aec42830db990772b908071416a2c318b}\label{class_drag_selection_tool_1_1_vector_change_thickness_tool_aec42830db990772b908071416a2c318b}} 
\index{DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}!setStrokesThickness@{setStrokesThickness}}
\index{setStrokesThickness@{setStrokesThickness}!DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}}
\doxysubsubsection{\texorpdfstring{setStrokesThickness()}{setStrokesThickness()}}
{\footnotesize\ttfamily void Drag\+Selection\+Tool\+::\+Vector\+Change\+Thickness\+Tool\+::set\+Strokes\+Thickness (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_vector_image}{TVector\+Image}} \&}]{vi }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00943                       \{}
\DoxyCodeLine{00944   \textcolor{keyword}{struct }locals \{}
\DoxyCodeLine{00945     \textcolor{keyword}{static} \textcolor{keywordtype}{void} setThickness(\textcolor{keyword}{const} SetStrokeThickness::Data \&data, \textcolor{keywordtype}{int} s) \{}
\DoxyCodeLine{00946       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_stroke}{TStroke}} \&stroke = *data.m\_vi.getStroke(s);}
\DoxyCodeLine{00947 }
\DoxyCodeLine{00948       std::vector<double> strokeThickness;}
\DoxyCodeLine{00949 }
\DoxyCodeLine{00950       \textcolor{keywordtype}{int} cp, cpCount = stroke.\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}();}
\DoxyCodeLine{00951       strokeThickness.reserve(cpCount);}
\DoxyCodeLine{00952 }
\DoxyCodeLine{00953       \textcolor{keywordflow}{for} (cp = 0; cp != cpCount; ++cp)}
\DoxyCodeLine{00954         strokeThickness.push\_back(stroke.\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(cp).thick);}
\DoxyCodeLine{00955 }
\DoxyCodeLine{00956       data.m\_tool.m\_strokesThickness[s] = strokeThickness;}
\DoxyCodeLine{00957     \}}
\DoxyCodeLine{00958 }
\DoxyCodeLine{00959   \};  \textcolor{comment}{// locals}}
\DoxyCodeLine{00960 }
\DoxyCodeLine{00961   SetStrokeThickness::Data data = \{*\textcolor{keyword}{this}, vi\};}
\DoxyCodeLine{00962 }
\DoxyCodeLine{00963   \mbox{\hyperlink{class_vector_selection_tool}{VectorSelectionTool}} *vsTool = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_vector_selection_tool}{VectorSelectionTool}} *\textcolor{keyword}{>}(m\_tool);}
\DoxyCodeLine{00964   \textcolor{keyword}{const} \mbox{\hyperlink{class_level_selection}{LevelSelection}} \&levelSelection = vsTool-\/>levelSelection();}
\DoxyCodeLine{00965 }
\DoxyCodeLine{00966   \textcolor{keywordflow}{if} (levelSelection.\mbox{\hyperlink{class_level_selection_a264955fde632f3d59330edea8903b3ed}{isEmpty}}()) \{}
\DoxyCodeLine{00967     \mbox{\hyperlink{class_stroke_selection}{StrokeSelection}} *strokeSelection =}
\DoxyCodeLine{00968         \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_stroke_selection}{StrokeSelection}} *\textcolor{keyword}{>}(m\_tool-\/>\mbox{\hyperlink{class_selection_tool_a8041c0371ff11a50bc4165812fa64d8a}{getSelection}}());}
\DoxyCodeLine{00969     \textcolor{keyword}{const} std::set<int> \&selectedStrokeIdxs = strokeSelection-\/>getSelection();}
\DoxyCodeLine{00970 }
\DoxyCodeLine{00971     std::for\_each(selectedStrokeIdxs.begin(), selectedStrokeIdxs.end(),}
\DoxyCodeLine{00972                   boost::bind(locals::setThickness, boost::cref(data), \_1));}
\DoxyCodeLine{00973   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00974     std::vector<int> strokeIdxs = getSelectedStrokes(vi, levelSelection);}
\DoxyCodeLine{00975 }
\DoxyCodeLine{00976     std::for\_each(strokeIdxs.begin(), strokeIdxs.end(),}
\DoxyCodeLine{00977                   boost::bind(locals::setThickness, boost::cref(data), \_1));}
\DoxyCodeLine{00978   \}}
\DoxyCodeLine{00979 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_drag_selection_tool_1_1_vector_change_thickness_tool_aefbe4ba95a561e2e898d5ee1cde1844b}\label{class_drag_selection_tool_1_1_vector_change_thickness_tool_aefbe4ba95a561e2e898d5ee1cde1844b}} 
\index{DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}!setThicknessChange@{setThicknessChange}}
\index{setThicknessChange@{setThicknessChange}!DragSelectionTool::VectorChangeThicknessTool@{DragSelectionTool::VectorChangeThicknessTool}}
\doxysubsubsection{\texorpdfstring{setThicknessChange()}{setThicknessChange()}}
{\footnotesize\ttfamily void Drag\+Selection\+Tool\+::\+Vector\+Change\+Thickness\+Tool\+::set\+Thickness\+Change (\begin{DoxyParamCaption}\item[{double}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00251 \{ m\_thicknessChange = value; \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/vectorselectiontool.\+h\item 
E\+:/opentoonz/toonz/sources/tnztools/vectorselectiontool.\+cpp\end{DoxyCompactItemize}
