\hypertarget{class_delete_links_undo}{}\doxysection{Delete\+Links\+Undo Class Reference}
\label{class_delete_links_undo}\index{DeleteLinksUndo@{DeleteLinksUndo}}
Inheritance diagram for Delete\+Links\+Undo\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4.000000cm]{class_delete_links_undo}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_delete_links_undo_ae30319d332b95ae6ad8773c8da4df332}{Delete\+Links\+Undo}} (const std\+::list$<$ \mbox{\hyperlink{class_t_fx_command_1_1_link}{TFx\+Command\+::\+Link}} $>$ \&links, \mbox{\hyperlink{class_t_xsheet_handle}{TXsheet\+Handle}} $\ast$xsh\+Handle)
\item 
bool \mbox{\hyperlink{class_delete_links_undo_a5e0e594b23aa4c88db338477015fe2f9}{is\+Consistent}} () const override
\item 
void \mbox{\hyperlink{class_delete_links_undo_a11e03792f52e482b875f32cfa8ec211e}{redo}} () const override
\item 
void \mbox{\hyperlink{class_delete_links_undo_afeca9d052cd5a183f13e1ea32ad31929}{undo}} () const override
\item 
int \mbox{\hyperlink{class_delete_links_undo_ae48ed3d6536b101a22a9d52b67b84224}{get\+Size}} () const override
\item 
QString \mbox{\hyperlink{class_delete_links_undo_a9a6d8c1bfb4792b49fde2c8de8e2f176}{get\+History\+String}} () override
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_delete_links_undo_a15fe16cb7853f8137fd6125c52e52632}{Delete\+Links\+Undo}} (\mbox{\hyperlink{class_t_xsheet_handle}{TXsheet\+Handle}} $\ast$xsh\+Handle)
\item 
void \mbox{\hyperlink{class_delete_links_undo_aba57bccc5d4ae7db189aad77ae3c3b38}{initialize}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::list$<$ \mbox{\hyperlink{class_t_fx_command_1_1_link}{TFx\+Command\+::\+Link}} $>$ \mbox{\hyperlink{class_delete_links_undo_a1f16d5adb1939e96d622ac44b826563a}{m\+\_\+links}}
\begin{DoxyCompactList}\small\item\em The input links to remove. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_delete_links_undo_ae30319d332b95ae6ad8773c8da4df332}\label{class_delete_links_undo_ae30319d332b95ae6ad8773c8da4df332}} 
\index{DeleteLinksUndo@{DeleteLinksUndo}!DeleteLinksUndo@{DeleteLinksUndo}}
\index{DeleteLinksUndo@{DeleteLinksUndo}!DeleteLinksUndo@{DeleteLinksUndo}}
\doxysubsubsection{\texorpdfstring{DeleteLinksUndo()}{DeleteLinksUndo()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily Delete\+Links\+Undo\+::\+Delete\+Links\+Undo (\begin{DoxyParamCaption}\item[{const std\+::list$<$ \mbox{\hyperlink{class_t_fx_command_1_1_link}{TFx\+Command\+::\+Link}} $>$ \&}]{links,  }\item[{\mbox{\hyperlink{class_t_xsheet_handle}{TXsheet\+Handle}} $\ast$}]{xsh\+Handle }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01826       : \mbox{\hyperlink{class_delete_links_undo_a1f16d5adb1939e96d622ac44b826563a}{m\_links}}(links), m\_xshHandle(xshHandle) \{}
\DoxyCodeLine{01827     initialize();}
\DoxyCodeLine{01828   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_delete_links_undo_a15fe16cb7853f8137fd6125c52e52632}\label{class_delete_links_undo_a15fe16cb7853f8137fd6125c52e52632}} 
\index{DeleteLinksUndo@{DeleteLinksUndo}!DeleteLinksUndo@{DeleteLinksUndo}}
\index{DeleteLinksUndo@{DeleteLinksUndo}!DeleteLinksUndo@{DeleteLinksUndo}}
\doxysubsubsection{\texorpdfstring{DeleteLinksUndo()}{DeleteLinksUndo()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily Delete\+Links\+Undo\+::\+Delete\+Links\+Undo (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsheet_handle}{TXsheet\+Handle}} $\ast$}]{xsh\+Handle }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01840 : m\_xshHandle(xshHandle) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_delete_links_undo_a9a6d8c1bfb4792b49fde2c8de8e2f176}\label{class_delete_links_undo_a9a6d8c1bfb4792b49fde2c8de8e2f176}} 
\index{DeleteLinksUndo@{DeleteLinksUndo}!getHistoryString@{getHistoryString}}
\index{getHistoryString@{getHistoryString}!DeleteLinksUndo@{DeleteLinksUndo}}
\doxysubsubsection{\texorpdfstring{getHistoryString()}{getHistoryString()}}
{\footnotesize\ttfamily QString Delete\+Links\+Undo\+::get\+History\+String (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_undo}{TUndo}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02029                                           \{}
\DoxyCodeLine{02030   QString str = QObject::tr(\textcolor{stringliteral}{"{}Delete Link"{}});}
\DoxyCodeLine{02031   \textcolor{keywordflow}{if} (!m\_normalLinks.empty()) \{}
\DoxyCodeLine{02032     str += QString(\textcolor{stringliteral}{"{}  :  "{}});}
\DoxyCodeLine{02033     std::list<TFxCommand::Link>::const\_iterator it;}
\DoxyCodeLine{02034     \textcolor{keywordflow}{for} (it = m\_normalLinks.begin(); it != m\_normalLinks.end(); it++) \{}
\DoxyCodeLine{02035       \textcolor{keywordflow}{if} (it != m\_normalLinks.begin()) str += QString(\textcolor{stringliteral}{"{},  "{}});}
\DoxyCodeLine{02036       \mbox{\hyperlink{class_t_fx_command_1_1_link}{TFxCommand::Link}} boundingFxs = *it;}
\DoxyCodeLine{02037       str +=}
\DoxyCodeLine{02038           QString(\textcolor{stringliteral}{"{}\%1-\/ -\/\%2"{}})}
\DoxyCodeLine{02039               .arg(QString::fromStdWString(boundingFxs.m\_inputFx-\/>getName()))}
\DoxyCodeLine{02040               .arg(QString::fromStdWString(boundingFxs.m\_outputFx-\/>getName()));}
\DoxyCodeLine{02041     \}}
\DoxyCodeLine{02042   \}}
\DoxyCodeLine{02043 }
\DoxyCodeLine{02044   \textcolor{keywordflow}{if} (!m\_terminalFxs.empty()) \{}
\DoxyCodeLine{02045     str += QString(\textcolor{stringliteral}{"{}  :  "{}});}
\DoxyCodeLine{02046     std::list<TFx *>::const\_iterator ft;}
\DoxyCodeLine{02047     \textcolor{keywordflow}{for} (ft = m\_terminalFxs.begin(); ft != m\_terminalFxs.end(); ++ft) \{}
\DoxyCodeLine{02048       \textcolor{keywordflow}{if} (ft != m\_terminalFxs.begin()) str += QString(\textcolor{stringliteral}{"{},  "{}});}
\DoxyCodeLine{02049       str +=}
\DoxyCodeLine{02050           QString(\textcolor{stringliteral}{"{}\%1-\/ -\/Xsheet"{}}).arg(QString::fromStdWString((*ft)-\/>getName()));}
\DoxyCodeLine{02051     \}}
\DoxyCodeLine{02052   \}}
\DoxyCodeLine{02053 }
\DoxyCodeLine{02054   \textcolor{keywordflow}{return} str;}
\DoxyCodeLine{02055 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_delete_links_undo_ae48ed3d6536b101a22a9d52b67b84224}\label{class_delete_links_undo_ae48ed3d6536b101a22a9d52b67b84224}} 
\index{DeleteLinksUndo@{DeleteLinksUndo}!getSize@{getSize}}
\index{getSize@{getSize}!DeleteLinksUndo@{DeleteLinksUndo}}
\doxysubsubsection{\texorpdfstring{getSize()}{getSize()}}
{\footnotesize\ttfamily int Delete\+Links\+Undo\+::get\+Size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_undo}{TUndo}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01835 \{ \textcolor{keywordflow}{return} 10 << 10; \}  \textcolor{comment}{// Say, around 10 kB}}

\end{DoxyCode}
\mbox{\Hypertarget{class_delete_links_undo_aba57bccc5d4ae7db189aad77ae3c3b38}\label{class_delete_links_undo_aba57bccc5d4ae7db189aad77ae3c3b38}} 
\index{DeleteLinksUndo@{DeleteLinksUndo}!initialize@{initialize}}
\index{initialize@{initialize}!DeleteLinksUndo@{DeleteLinksUndo}}
\doxysubsubsection{\texorpdfstring{initialize()}{initialize()}}
{\footnotesize\ttfamily void Delete\+Links\+Undo\+::initialize (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01847                                  \{}
\DoxyCodeLine{01848   \textcolor{keyword}{struct }locals \{}
\DoxyCodeLine{01849     \textcolor{keyword}{static} \textcolor{keywordtype}{bool} isInvalid(\mbox{\hyperlink{class_fx_dag}{FxDag}} *fxDag, \textcolor{keyword}{const} \mbox{\hyperlink{class_t_fx_command_1_1_link}{TFxCommand::Link}} \&link) \{}
\DoxyCodeLine{01850       \textcolor{keywordflow}{if} (link.\mbox{\hyperlink{class_t_fx_command_1_1_link_a59252bec823e61280e1e6c1c9b5ce377}{m\_index}} < 0)}
\DoxyCodeLine{01851         \textcolor{keywordflow}{return} !fxDag-\/>getTerminalFxs()-\/>containsFx(}
\DoxyCodeLine{01852             link.m\_inputFx.getPointer());}
\DoxyCodeLine{01853 }
\DoxyCodeLine{01854       \mbox{\hyperlink{class_t_fx}{TFx}} *inFx  = ::getActualOut(link.m\_inputFx.getPointer());}
\DoxyCodeLine{01855       \mbox{\hyperlink{class_t_fx}{TFx}} *outFx = ::getActualIn(link.m\_outputFx.getPointer());}
\DoxyCodeLine{01856 }
\DoxyCodeLine{01857       \textcolor{keywordflow}{return} (link.\mbox{\hyperlink{class_t_fx_command_1_1_link_a59252bec823e61280e1e6c1c9b5ce377}{m\_index}} >= outFx-\/>getInputPortCount())}
\DoxyCodeLine{01858                  ? true}
\DoxyCodeLine{01859                  : (outFx-\/>getInputPort(link.\mbox{\hyperlink{class_t_fx_command_1_1_link_a59252bec823e61280e1e6c1c9b5ce377}{m\_index}})-\/>getFx() != inFx);}
\DoxyCodeLine{01860     \}}
\DoxyCodeLine{01861   \};}
\DoxyCodeLine{01862 }
\DoxyCodeLine{01863   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = m\_xshHandle-\/>getXsheet();}
\DoxyCodeLine{01864   \mbox{\hyperlink{class_fx_dag}{FxDag}} *fxDag = xsh-\/>\mbox{\hyperlink{class_t_xsheet_adc7c74cce346abf3699bb250eb17a9c2}{getFxDag}}();}
\DoxyCodeLine{01865 }
\DoxyCodeLine{01866   \textcolor{comment}{// Forget links dealing with an open macro Fx. Note that this INCLUDES}}
\DoxyCodeLine{01867   \textcolor{comment}{// inside/outside links.}}
\DoxyCodeLine{01868   ::FilterInsideAMacro filterInMacro = \{xsh\};}
\DoxyCodeLine{01869   \mbox{\hyperlink{class_delete_links_undo_a1f16d5adb1939e96d622ac44b826563a}{m\_links}}.erase(std::remove\_if(\mbox{\hyperlink{class_delete_links_undo_a1f16d5adb1939e96d622ac44b826563a}{m\_links}}.begin(), \mbox{\hyperlink{class_delete_links_undo_a1f16d5adb1939e96d622ac44b826563a}{m\_links}}.end(), filterInMacro),}
\DoxyCodeLine{01870                 \mbox{\hyperlink{class_delete_links_undo_a1f16d5adb1939e96d622ac44b826563a}{m\_links}}.end());}
\DoxyCodeLine{01871 }
\DoxyCodeLine{01872   \textcolor{comment}{// Remove invalid links}}
\DoxyCodeLine{01873   \mbox{\hyperlink{class_delete_links_undo_a1f16d5adb1939e96d622ac44b826563a}{m\_links}}.erase(std::remove\_if(\mbox{\hyperlink{class_delete_links_undo_a1f16d5adb1939e96d622ac44b826563a}{m\_links}}.begin(), \mbox{\hyperlink{class_delete_links_undo_a1f16d5adb1939e96d622ac44b826563a}{m\_links}}.end(),}
\DoxyCodeLine{01874                                [fxDag](\textcolor{keyword}{const} \mbox{\hyperlink{class_t_fx_command_1_1_link}{TFxCommand::Link}} \&link) \{}
\DoxyCodeLine{01875                                  return locals::isInvalid(fxDag, link);}
\DoxyCodeLine{01876                                \}),}
\DoxyCodeLine{01877                 \mbox{\hyperlink{class_delete_links_undo_a1f16d5adb1939e96d622ac44b826563a}{m\_links}}.end());}
\DoxyCodeLine{01878 }
\DoxyCodeLine{01879   std::list<TFxCommand::Link>::iterator lt, lEnd(\mbox{\hyperlink{class_delete_links_undo_a1f16d5adb1939e96d622ac44b826563a}{m\_links}}.end());}
\DoxyCodeLine{01880   \textcolor{keywordflow}{for} (lt = \mbox{\hyperlink{class_delete_links_undo_a1f16d5adb1939e96d622ac44b826563a}{m\_links}}.begin(); lt != lEnd; ++lt) \{}
\DoxyCodeLine{01881     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_fx_command_1_1_link}{TFxCommand::Link}} \&link = *lt;}
\DoxyCodeLine{01882 }
\DoxyCodeLine{01883     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsheet_fx}{TXsheetFx}} *xsheetFx =}
\DoxyCodeLine{01884             \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_xsheet_fx}{TXsheetFx}} *\textcolor{keyword}{>}(link.m\_outputFx.getPointer())) \{}
\DoxyCodeLine{01885       \textcolor{comment}{// The input fx is connected to an xsheet node -\/ ie it's terminal}}
\DoxyCodeLine{01886       m\_terminalFxs.push\_back(link.m\_inputFx.getPointer());}
\DoxyCodeLine{01887       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01888     \}}
\DoxyCodeLine{01889 }
\DoxyCodeLine{01890     \mbox{\hyperlink{class_t_fx}{TFx}} *outputFx = link.m\_outputFx.getPointer();}
\DoxyCodeLine{01891 }
\DoxyCodeLine{01892     \textcolor{comment}{// Zerary columns wrap the actual zerary fx -\/ that is the fx holding input}}
\DoxyCodeLine{01893     \textcolor{comment}{// ports}}
\DoxyCodeLine{01894     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_zerary_column_fx}{TZeraryColumnFx}} *zfx = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_zerary_column_fx}{TZeraryColumnFx}} *\textcolor{keyword}{>}(outputFx))}
\DoxyCodeLine{01895       outputFx = zfx-\/>getZeraryFx();}
\DoxyCodeLine{01896 }
\DoxyCodeLine{01897     \mbox{\hyperlink{class_t_fx_port}{TFxPort}} *port = outputFx-\/>getInputPort(link.\mbox{\hyperlink{class_t_fx_command_1_1_link_a59252bec823e61280e1e6c1c9b5ce377}{m\_index}});}
\DoxyCodeLine{01898 }
\DoxyCodeLine{01899     \textcolor{keywordtype}{int} portGroup = port-\/>getGroupIndex();}
\DoxyCodeLine{01900     \textcolor{keywordflow}{if} (portGroup < 0) m\_normalLinks.push\_back(link);}
\DoxyCodeLine{01901 }
\DoxyCodeLine{01902     \textcolor{keywordflow}{if} (outputFx-\/>hasDynamicPortGroups())}
\DoxyCodeLine{01903       m\_dynamicLinks.insert(std::make\_pair(outputFx, DynamicLinksVector()));}
\DoxyCodeLine{01904   \}}
\DoxyCodeLine{01905 }
\DoxyCodeLine{01906   m\_normalLinks.sort();  \textcolor{comment}{// Really necessary?}}
\DoxyCodeLine{01907 }
\DoxyCodeLine{01908   \textcolor{comment}{// Store the complete configuration of dynamic groups -\/ not just the ones}}
\DoxyCodeLine{01909   \textcolor{comment}{// touched by}}
\DoxyCodeLine{01910   \textcolor{comment}{// link editing, ALL of them.}}
\DoxyCodeLine{01911   std::map<TFx *, DynamicLinksVector>::iterator dlt,}
\DoxyCodeLine{01912       dlEnd(m\_dynamicLinks.end());}
\DoxyCodeLine{01913   \textcolor{keywordflow}{for} (dlt = m\_dynamicLinks.begin(); dlt != dlEnd; ++dlt) \{}
\DoxyCodeLine{01914     \mbox{\hyperlink{class_t_fx}{TFx}} *outputFx                = dlt-\/>first;}
\DoxyCodeLine{01915     DynamicLinksVector \&dynLinks = dlt-\/>second;}
\DoxyCodeLine{01916 }
\DoxyCodeLine{01917     \textcolor{keywordtype}{int} p, pCount = outputFx-\/>getInputPortCount();}
\DoxyCodeLine{01918     \textcolor{keywordflow}{for} (p = 0; p != pCount; ++p) \{}
\DoxyCodeLine{01919       \mbox{\hyperlink{class_t_fx_port}{TFxPort}} *port = outputFx-\/>getInputPort(p);}
\DoxyCodeLine{01920 }
\DoxyCodeLine{01921       \textcolor{keywordtype}{int} g = port-\/>getGroupIndex();}
\DoxyCodeLine{01922       \textcolor{keywordflow}{if} (g >= 0) \{}
\DoxyCodeLine{01923         DynamicLink dLink = \{g, outputFx-\/>getInputPortName(p), port-\/>getFx()\};}
\DoxyCodeLine{01924         dynLinks.push\_back(dLink);}
\DoxyCodeLine{01925       \}}
\DoxyCodeLine{01926     \}}
\DoxyCodeLine{01927   \}}
\DoxyCodeLine{01928 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_delete_links_undo_a5e0e594b23aa4c88db338477015fe2f9}\label{class_delete_links_undo_a5e0e594b23aa4c88db338477015fe2f9}} 
\index{DeleteLinksUndo@{DeleteLinksUndo}!isConsistent@{isConsistent}}
\index{isConsistent@{isConsistent}!DeleteLinksUndo@{DeleteLinksUndo}}
\doxysubsubsection{\texorpdfstring{isConsistent()}{isConsistent()}}
{\footnotesize\ttfamily bool Delete\+Links\+Undo\+::is\+Consistent (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_fx_command_undo}{Fx\+Command\+Undo}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01830 \{ \textcolor{keywordflow}{return} !\mbox{\hyperlink{class_delete_links_undo_a1f16d5adb1939e96d622ac44b826563a}{m\_links}}.empty(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_delete_links_undo_a11e03792f52e482b875f32cfa8ec211e}\label{class_delete_links_undo_a11e03792f52e482b875f32cfa8ec211e}} 
\index{DeleteLinksUndo@{DeleteLinksUndo}!redo@{redo}}
\index{redo@{redo}!DeleteLinksUndo@{DeleteLinksUndo}}
\doxysubsubsection{\texorpdfstring{redo()}{redo()}}
{\footnotesize\ttfamily void Delete\+Links\+Undo\+::redo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_undo}{TUndo}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01932                                  \{}
\DoxyCodeLine{01933   \mbox{\hyperlink{class_fx_dag}{FxDag}} *fxDag = m\_xshHandle-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_adc7c74cce346abf3699bb250eb17a9c2}{getFxDag}}();}
\DoxyCodeLine{01934 }
\DoxyCodeLine{01935   \textcolor{comment}{// Perform unlinking}}
\DoxyCodeLine{01936   std::list<TFxCommand::Link>::const\_iterator lt, lEnd(\mbox{\hyperlink{class_delete_links_undo_a1f16d5adb1939e96d622ac44b826563a}{m\_links}}.end());}
\DoxyCodeLine{01937   \textcolor{keywordflow}{for} (lt = \mbox{\hyperlink{class_delete_links_undo_a1f16d5adb1939e96d622ac44b826563a}{m\_links}}.begin(); lt != lEnd; ++lt) \{}
\DoxyCodeLine{01938     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_fx_command_1_1_link}{TFxCommand::Link}} \&link = *lt;}
\DoxyCodeLine{01939 }
\DoxyCodeLine{01940     \mbox{\hyperlink{class_t_fx}{TFx}} *outputFx = lt-\/>m\_outputFx.getPointer();}
\DoxyCodeLine{01941 }
\DoxyCodeLine{01942     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsheet_fx}{TXsheetFx}} *xsheetFx = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_xsheet_fx}{TXsheetFx}} *\textcolor{keyword}{>}(outputFx)) \{}
\DoxyCodeLine{01943       \textcolor{comment}{// Terminal fx link case}}
\DoxyCodeLine{01944       fxDag-\/>removeFromXsheet(link.m\_inputFx.getPointer());}
\DoxyCodeLine{01945       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01946     \}}
\DoxyCodeLine{01947 }
\DoxyCodeLine{01948     \textcolor{comment}{// Actual link case}}
\DoxyCodeLine{01949     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_zerary_column_fx}{TZeraryColumnFx}} *zcfx = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_zerary_column_fx}{TZeraryColumnFx}} *\textcolor{keyword}{>}(outputFx))}
\DoxyCodeLine{01950       outputFx = zcfx-\/>getZeraryFx();}
\DoxyCodeLine{01951 }
\DoxyCodeLine{01952     \textcolor{keywordtype}{int} index = lt-\/>m\_index;}
\DoxyCodeLine{01953 }
\DoxyCodeLine{01954     assert(index < outputFx-\/>getInputPortCount());}
\DoxyCodeLine{01955     \textcolor{keywordflow}{if} (index < outputFx-\/>getInputPortCount())}
\DoxyCodeLine{01956       outputFx-\/>getInputPort(index)-\/>setFx(0);}
\DoxyCodeLine{01957   \}}
\DoxyCodeLine{01958 }
\DoxyCodeLine{01959   \textcolor{keywordflow}{if} (m\_isLastInRedoBlock) m\_xshHandle-\/>notifyXsheetChanged();}
\DoxyCodeLine{01960 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_delete_links_undo_afeca9d052cd5a183f13e1ea32ad31929}\label{class_delete_links_undo_afeca9d052cd5a183f13e1ea32ad31929}} 
\index{DeleteLinksUndo@{DeleteLinksUndo}!undo@{undo}}
\index{undo@{undo}!DeleteLinksUndo@{DeleteLinksUndo}}
\doxysubsubsection{\texorpdfstring{undo()}{undo()}}
{\footnotesize\ttfamily void Delete\+Links\+Undo\+::undo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_undo}{TUndo}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01964                                  \{}
\DoxyCodeLine{01965   \mbox{\hyperlink{class_fx_dag}{FxDag}} *fxDag = m\_xshHandle-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_adc7c74cce346abf3699bb250eb17a9c2}{getFxDag}}();}
\DoxyCodeLine{01966 }
\DoxyCodeLine{01967   \textcolor{comment}{// Re-\/attach terminal fxs}}
\DoxyCodeLine{01968   std::list<TFx *>::const\_iterator ft;}
\DoxyCodeLine{01969   \textcolor{keywordflow}{for} (ft = m\_terminalFxs.begin(); ft != m\_terminalFxs.end(); ++ft) \{}
\DoxyCodeLine{01970     \textcolor{keywordflow}{if} (fxDag-\/>\mbox{\hyperlink{class_fx_dag_a14a860e94e47d5f7b950dc047e4649ef}{checkLoop}}(*ft, fxDag-\/>getXsheetFx())) \{}
\DoxyCodeLine{01971       assert(fxDag-\/>\mbox{\hyperlink{class_fx_dag_a14a860e94e47d5f7b950dc047e4649ef}{checkLoop}}(*ft, fxDag-\/>getXsheetFx()));}
\DoxyCodeLine{01972       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01973     \}}
\DoxyCodeLine{01974 }
\DoxyCodeLine{01975     fxDag-\/>addToXsheet(*ft);}
\DoxyCodeLine{01976   \}}
\DoxyCodeLine{01977 }
\DoxyCodeLine{01978   \textcolor{comment}{// Restore common links}}
\DoxyCodeLine{01979   std::list<TFxCommand::Link>::const\_iterator lt, lEnd(m\_normalLinks.end());}
\DoxyCodeLine{01980   \textcolor{keywordflow}{for} (lt = m\_normalLinks.begin(); lt != lEnd; ++lt) \{}
\DoxyCodeLine{01981     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_fx_command_1_1_link}{TFxCommand::Link}} \&link = *lt;}
\DoxyCodeLine{01982 }
\DoxyCodeLine{01983     \textcolor{keywordtype}{int} index     = link.\mbox{\hyperlink{class_t_fx_command_1_1_link_a59252bec823e61280e1e6c1c9b5ce377}{m\_index}};}
\DoxyCodeLine{01984     \mbox{\hyperlink{class_t_fx}{TFx}} *inputFx  = link.m\_inputFx.getPointer();}
\DoxyCodeLine{01985     \mbox{\hyperlink{class_t_fx}{TFx}} *outputFx = link.m\_outputFx.getPointer();}
\DoxyCodeLine{01986 }
\DoxyCodeLine{01987     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_zerary_column_fx}{TZeraryColumnFx}} *zcfx = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_zerary_column_fx}{TZeraryColumnFx}} *\textcolor{keyword}{>}(outputFx))}
\DoxyCodeLine{01988       outputFx = zcfx-\/>getZeraryFx();}
\DoxyCodeLine{01989 }
\DoxyCodeLine{01990     \textcolor{keywordflow}{if} (fxDag-\/>\mbox{\hyperlink{class_fx_dag_a14a860e94e47d5f7b950dc047e4649ef}{checkLoop}}(inputFx, outputFx)) \{}
\DoxyCodeLine{01991       assert(fxDag-\/>\mbox{\hyperlink{class_fx_dag_a14a860e94e47d5f7b950dc047e4649ef}{checkLoop}}(inputFx, outputFx));}
\DoxyCodeLine{01992       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01993     \}}
\DoxyCodeLine{01994 }
\DoxyCodeLine{01995     assert(index < outputFx-\/>getInputPortCount());}
\DoxyCodeLine{01996 }
\DoxyCodeLine{01997     \textcolor{keywordflow}{if} (index < outputFx-\/>getInputPortCount())}
\DoxyCodeLine{01998       outputFx-\/>getInputPort(index)-\/>setFx(inputFx);}
\DoxyCodeLine{01999   \}}
\DoxyCodeLine{02000 }
\DoxyCodeLine{02001   \textcolor{comment}{// Restore complete dynamic port groups configuration}}
\DoxyCodeLine{02002   std::map<TFx *, DynamicLinksVector>::const\_iterator dlt,}
\DoxyCodeLine{02003       dlEnd(m\_dynamicLinks.end());}
\DoxyCodeLine{02004   \textcolor{keywordflow}{for} (dlt = m\_dynamicLinks.begin(); dlt != dlEnd; ++dlt) \{}
\DoxyCodeLine{02005     \mbox{\hyperlink{class_t_fx}{TFx}} *outputFx                      = dlt-\/>first;}
\DoxyCodeLine{02006     \textcolor{keyword}{const} DynamicLinksVector \&dynLinks = dlt-\/>second;}
\DoxyCodeLine{02007 }
\DoxyCodeLine{02008     \{}
\DoxyCodeLine{02009       \textcolor{keywordtype}{int} g, gCount = outputFx-\/>dynamicPortGroupsCount();}
\DoxyCodeLine{02010       \textcolor{keywordflow}{for} (g = 0; g != gCount; ++g) outputFx-\/>\mbox{\hyperlink{class_t_fx_ab559c5ebe9823fab7cb101ad28e6b1cb}{clearDynamicPortGroup}}(g);}
\DoxyCodeLine{02011     \}}
\DoxyCodeLine{02012 }
\DoxyCodeLine{02013     \textcolor{keywordtype}{size\_t} d, dCount = dynLinks.size();}
\DoxyCodeLine{02014     \textcolor{keywordflow}{for} (d = 0; d != dCount; ++d) \{}
\DoxyCodeLine{02015       \textcolor{keyword}{const} DynamicLink \&link = dynLinks[d];}
\DoxyCodeLine{02016 }
\DoxyCodeLine{02017       \mbox{\hyperlink{class_t_fx_port}{TFxPort}} *port = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_raster_fx_port}{TRasterFxPort}};  \textcolor{comment}{// isAControlPort... semi-\/obsolete}}
\DoxyCodeLine{02018       port-\/>setFx(link.m\_inputFx);}
\DoxyCodeLine{02019 }
\DoxyCodeLine{02020       outputFx-\/>\mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(link.m\_portName, port, link.m\_groupIndex);}
\DoxyCodeLine{02021     \}}
\DoxyCodeLine{02022   \}}
\DoxyCodeLine{02023 }
\DoxyCodeLine{02024   \textcolor{keywordflow}{if} (m\_isLastInBlock) m\_xshHandle-\/>notifyXsheetChanged();}
\DoxyCodeLine{02025 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_delete_links_undo_a1f16d5adb1939e96d622ac44b826563a}\label{class_delete_links_undo_a1f16d5adb1939e96d622ac44b826563a}} 
\index{DeleteLinksUndo@{DeleteLinksUndo}!m\_links@{m\_links}}
\index{m\_links@{m\_links}!DeleteLinksUndo@{DeleteLinksUndo}}
\doxysubsubsection{\texorpdfstring{m\_links}{m\_links}}
{\footnotesize\ttfamily std\+::list$<$\mbox{\hyperlink{class_t_fx_command_1_1_link}{TFx\+Command\+::\+Link}}$>$ Delete\+Links\+Undo\+::m\+\_\+links\hspace{0.3cm}{\ttfamily [protected]}}



The input links to remove. 



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonzlib/fxcommand.\+cpp\end{DoxyCompactItemize}
