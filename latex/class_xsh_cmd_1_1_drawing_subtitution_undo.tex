\hypertarget{class_xsh_cmd_1_1_drawing_subtitution_undo}{}\doxysection{Xsh\+Cmd\+::Drawing\+Subtitution\+Undo Class Reference}
\label{class_xsh_cmd_1_1_drawing_subtitution_undo}\index{XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}}
Inheritance diagram for Xsh\+Cmd\+::Drawing\+Subtitution\+Undo\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_xsh_cmd_1_1_drawing_subtitution_undo}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_xsh_cmd_1_1_drawing_subtitution_undo_abb39d7baae9a17b829362b51e245ae19}{Drawing\+Subtitution\+Undo}} (int dir, \mbox{\hyperlink{class_t_cell_selection_1_1_range}{TCell\+Selection\+::\+Range}} range, int row, int col, bool selected)
\item 
void \mbox{\hyperlink{class_xsh_cmd_1_1_drawing_subtitution_undo_a7210c281701ad7ef3c345fabf713d37f}{undo}} () const override
\item 
void \mbox{\hyperlink{class_xsh_cmd_1_1_drawing_subtitution_undo_aa552f4db23091b9c301f2f0320233ba1}{redo}} () const override
\item 
int \mbox{\hyperlink{class_xsh_cmd_1_1_drawing_subtitution_undo_a51b61ce2d5a14b4a7478df90ca6731f6}{get\+Size}} () const override
\item 
QString \mbox{\hyperlink{class_xsh_cmd_1_1_drawing_subtitution_undo_aaff68abc5752109fce93b392af1ebb61}{get\+History\+String}} () override
\item 
int \mbox{\hyperlink{class_xsh_cmd_1_1_drawing_subtitution_undo_aa57c27a10ee86f268233cdc0ea6d955a}{get\+History\+Type}} () override
\end{DoxyCompactItemize}
\doxysubsection*{Static Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
static bool \mbox{\hyperlink{class_xsh_cmd_1_1_drawing_subtitution_undo_a05455cbef992782ca04f256cec70c0e6}{change\+Drawing}} (int delta, int row, int col)
\item 
static void \mbox{\hyperlink{class_xsh_cmd_1_1_drawing_subtitution_undo_a51476b831b601563bc5e038b815d9750}{set\+Drawing}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid, int row, int col, \mbox{\hyperlink{class_t_xsh_cell}{TXsh\+Cell}} cell, \mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}} $\ast$level)
\end{DoxyCompactItemize}
\doxysubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_xsh_cmd_1_1_drawing_subtitution_undo_ad82b1513858ee2faa8aeae678c0eae79}{Drawing\+Subtitution\+Group\+Undo}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_xsh_cmd_1_1_drawing_subtitution_undo_abb39d7baae9a17b829362b51e245ae19}\label{class_xsh_cmd_1_1_drawing_subtitution_undo_abb39d7baae9a17b829362b51e245ae19}} 
\index{XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}!DrawingSubtitutionUndo@{DrawingSubtitutionUndo}}
\index{DrawingSubtitutionUndo@{DrawingSubtitutionUndo}!XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}}
\doxysubsubsection{\texorpdfstring{DrawingSubtitutionUndo()}{DrawingSubtitutionUndo()}}
{\footnotesize\ttfamily Xsh\+Cmd\+::\+Drawing\+Subtitution\+Undo\+::\+Drawing\+Subtitution\+Undo (\begin{DoxyParamCaption}\item[{int}]{dir,  }\item[{\mbox{\hyperlink{class_t_cell_selection_1_1_range}{TCell\+Selection\+::\+Range}}}]{range,  }\item[{int}]{row,  }\item[{int}]{col,  }\item[{bool}]{selected }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00577       : m\_direction(dir)}
\DoxyCodeLine{00578       , m\_range(range)}
\DoxyCodeLine{00579       , m\_row(row)}
\DoxyCodeLine{00580       , m\_col(col)}
\DoxyCodeLine{00581       , m\_selected(selected) \{}
\DoxyCodeLine{00582     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}();}
\DoxyCodeLine{00583     \textcolor{keywordtype}{int} tempCol, tempRow;}
\DoxyCodeLine{00584     \textcolor{keywordtype}{int} c = m\_range.m\_c0;}
\DoxyCodeLine{00585     \textcolor{keywordtype}{int} r = m\_range.m\_r0;}
\DoxyCodeLine{00586     \textcolor{keywordflow}{while} (c <= m\_range.m\_c1) \{}
\DoxyCodeLine{00587       tempCol = c;}
\DoxyCodeLine{00588       \textcolor{keywordflow}{while} (r <= m\_range.m\_r1) \{}
\DoxyCodeLine{00589         tempRow = r;}
\DoxyCodeLine{00590         \textcolor{keywordflow}{if} (xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(tempRow, tempCol).\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \{}
\DoxyCodeLine{00591           emptyCells.push\_back(std::make\_pair(tempRow, tempCol));}
\DoxyCodeLine{00592         \}}
\DoxyCodeLine{00593         r++;}
\DoxyCodeLine{00594       \}}
\DoxyCodeLine{00595       r = m\_range.m\_r0;}
\DoxyCodeLine{00596       c++;}
\DoxyCodeLine{00597     \}}
\DoxyCodeLine{00598   \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_xsh_cmd_1_1_drawing_subtitution_undo_a05455cbef992782ca04f256cec70c0e6}\label{class_xsh_cmd_1_1_drawing_subtitution_undo_a05455cbef992782ca04f256cec70c0e6}} 
\index{XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}!changeDrawing@{changeDrawing}}
\index{changeDrawing@{changeDrawing}!XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}}
\doxysubsubsection{\texorpdfstring{changeDrawing()}{changeDrawing()}}
{\footnotesize\ttfamily bool Xsh\+Cmd\+::\+Drawing\+Subtitution\+Undo\+::change\+Drawing (\begin{DoxyParamCaption}\item[{int}]{delta,  }\item[{int}]{row,  }\item[{int}]{col }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00790                                                                       \{}
\DoxyCodeLine{00791   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{00792   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh            = app-\/>getCurrentScene()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}();}
\DoxyCodeLine{00793   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell           = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col);}
\DoxyCodeLine{00794   \textcolor{keywordtype}{bool} usePrevCell        = \textcolor{keyword}{false};}
\DoxyCodeLine{00795   \textcolor{keywordflow}{if} (cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \{}
\DoxyCodeLine{00796     \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} prevCell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row -\/ 1, col);}
\DoxyCodeLine{00797     \textcolor{keywordflow}{if} (prevCell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}() || !(prevCell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}() ||}
\DoxyCodeLine{00798                                 prevCell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a6ef7d48e41f4f214b414e959512e6377}{getChildLevel}}() ||}
\DoxyCodeLine{00799                                 prevCell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a855d1db152d4484e44f87e777f8207b3}{getSoundTextLevel}}()))}
\DoxyCodeLine{00800       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00801     cell        = prevCell;}
\DoxyCodeLine{00802     usePrevCell = \textcolor{keyword}{true};}
\DoxyCodeLine{00803   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!cell.m\_level || !(cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}() ||}
\DoxyCodeLine{00804                                 cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a6ef7d48e41f4f214b414e959512e6377}{getChildLevel}}() ||}
\DoxyCodeLine{00805                                 cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a855d1db152d4484e44f87e777f8207b3}{getSoundTextLevel}}()))}
\DoxyCodeLine{00806     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00807   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level = cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{00808   \textcolor{keywordflow}{if} (!level) level = cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a6ef7d48e41f4f214b414e959512e6377}{getChildLevel}}();}
\DoxyCodeLine{00809   \textcolor{keywordflow}{if} (!level) level = cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a855d1db152d4484e44f87e777f8207b3}{getSoundTextLevel}}();}
\DoxyCodeLine{00810 }
\DoxyCodeLine{00811   std::vector<TFrameId> fids;}
\DoxyCodeLine{00812   \textcolor{keywordtype}{int} framesTextSize = 0;}
\DoxyCodeLine{00813   \textcolor{keywordtype}{int} n, index;}
\DoxyCodeLine{00814   \textcolor{keywordtype}{bool} usingSoundText = \textcolor{keyword}{false};}
\DoxyCodeLine{00815   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} cellFrameId;}
\DoxyCodeLine{00816   \textcolor{keywordflow}{if} (cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}())}
\DoxyCodeLine{00817     cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}()-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{getFids}}(fids);}
\DoxyCodeLine{00818   \textcolor{keywordflow}{if} (cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a6ef7d48e41f4f214b414e959512e6377}{getChildLevel}}())}
\DoxyCodeLine{00819     cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a6ef7d48e41f4f214b414e959512e6377}{getChildLevel}}()-\/>\mbox{\hyperlink{class_t_xsh_child_level_ac95021e1f2e394be3928adc6f274e624}{getFids}}(fids);}
\DoxyCodeLine{00820   \textcolor{keywordflow}{if} (cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a855d1db152d4484e44f87e777f8207b3}{getSoundTextLevel}}()) \{}
\DoxyCodeLine{00821     n              = cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a855d1db152d4484e44f87e777f8207b3}{getSoundTextLevel}}()-\/>m\_framesText.size();}
\DoxyCodeLine{00822     usingSoundText = \textcolor{keyword}{true};}
\DoxyCodeLine{00823   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00824     n = fids.size();}
\DoxyCodeLine{00825 }
\DoxyCodeLine{00826   \textcolor{keywordflow}{if} (n < 2) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00827 }
\DoxyCodeLine{00828   \textcolor{keywordflow}{if} (!usingSoundText) \{}
\DoxyCodeLine{00829     std::vector<TFrameId>::iterator it;}
\DoxyCodeLine{00830     it = std::find(fids.begin(), fids.end(), cell.m\_frameId);}
\DoxyCodeLine{00831 }
\DoxyCodeLine{00832     \textcolor{keywordflow}{if} (it == fids.end()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00833 }
\DoxyCodeLine{00834     index = std::distance(fids.begin(), it);}
\DoxyCodeLine{00835   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00836     index = cell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}().getNumber();}
\DoxyCodeLine{00837 }
\DoxyCodeLine{00838   \textcolor{keywordflow}{if} (usePrevCell) \{}
\DoxyCodeLine{00839     index -\/= delta;}
\DoxyCodeLine{00840     cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col);}
\DoxyCodeLine{00841   \}}
\DoxyCodeLine{00842 }
\DoxyCodeLine{00843   \textcolor{comment}{// if negative direction, add the size to the direction to avoid a negative}}
\DoxyCodeLine{00844   \textcolor{comment}{// modulo}}
\DoxyCodeLine{00845   \textcolor{keywordflow}{while} (delta < 0) delta += n;}
\DoxyCodeLine{00846   \textcolor{comment}{// the index is the remainder}}
\DoxyCodeLine{00847   index = (index + delta) \% n;}
\DoxyCodeLine{00848   assert(index < n);}
\DoxyCodeLine{00849 }
\DoxyCodeLine{00850   \textcolor{comment}{// sound text levels can't have a 0 index frame id}}
\DoxyCodeLine{00851   \textcolor{comment}{// the index points to a qlist<qstring>}}
\DoxyCodeLine{00852   \textcolor{comment}{// reading 1 below the frameid number}}
\DoxyCodeLine{00853   \textcolor{comment}{// and you can't have a -\/1 index on a qlist}}
\DoxyCodeLine{00854   \textcolor{keywordflow}{if} (usingSoundText \&\& index == 0) index = n;}
\DoxyCodeLine{00855 }
\DoxyCodeLine{00856   \textcolor{keywordflow}{if} (!usingSoundText)}
\DoxyCodeLine{00857     cellFrameId = fids[index];}
\DoxyCodeLine{00858   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00859     cellFrameId = \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(index);}
\DoxyCodeLine{00860 }
\DoxyCodeLine{00861   setDrawing(cellFrameId, row, col, cell, level);}
\DoxyCodeLine{00862 }
\DoxyCodeLine{00863   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00864 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsh_cmd_1_1_drawing_subtitution_undo_aaff68abc5752109fce93b392af1ebb61}\label{class_xsh_cmd_1_1_drawing_subtitution_undo_aaff68abc5752109fce93b392af1ebb61}} 
\index{XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}!getHistoryString@{getHistoryString}}
\index{getHistoryString@{getHistoryString}!XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}}
\doxysubsubsection{\texorpdfstring{getHistoryString()}{getHistoryString()}}
{\footnotesize\ttfamily QString Xsh\+Cmd\+::\+Drawing\+Subtitution\+Undo\+::get\+History\+String (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_undo}{TUndo}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00664                                       \{}
\DoxyCodeLine{00665     \textcolor{keywordflow}{return} QObject::tr(\textcolor{stringliteral}{"{}Change current drawing \%1"{}})}
\DoxyCodeLine{00666         .arg(QString::number(m\_direction));}
\DoxyCodeLine{00667   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsh_cmd_1_1_drawing_subtitution_undo_aa57c27a10ee86f268233cdc0ea6d955a}\label{class_xsh_cmd_1_1_drawing_subtitution_undo_aa57c27a10ee86f268233cdc0ea6d955a}} 
\index{XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}!getHistoryType@{getHistoryType}}
\index{getHistoryType@{getHistoryType}!XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}}
\doxysubsubsection{\texorpdfstring{getHistoryType()}{getHistoryType()}}
{\footnotesize\ttfamily int Xsh\+Cmd\+::\+Drawing\+Subtitution\+Undo\+::get\+History\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_undo}{TUndo}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00669 \{ \textcolor{keywordflow}{return} HistoryType::Xsheet; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsh_cmd_1_1_drawing_subtitution_undo_a51b61ce2d5a14b4a7478df90ca6731f6}\label{class_xsh_cmd_1_1_drawing_subtitution_undo_a51b61ce2d5a14b4a7478df90ca6731f6}} 
\index{XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}!getSize@{getSize}}
\index{getSize@{getSize}!XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}}
\doxysubsubsection{\texorpdfstring{getSize()}{getSize()}}
{\footnotesize\ttfamily int Xsh\+Cmd\+::\+Drawing\+Subtitution\+Undo\+::get\+Size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_undo}{TUndo}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00662 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{sizeof}(*this); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsh_cmd_1_1_drawing_subtitution_undo_aa552f4db23091b9c301f2f0320233ba1}\label{class_xsh_cmd_1_1_drawing_subtitution_undo_aa552f4db23091b9c301f2f0320233ba1}} 
\index{XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}!redo@{redo}}
\index{redo@{redo}!XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}}
\doxysubsubsection{\texorpdfstring{redo()}{redo()}}
{\footnotesize\ttfamily void Xsh\+Cmd\+::\+Drawing\+Subtitution\+Undo\+::redo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_undo}{TUndo}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00637                              \{}
\DoxyCodeLine{00638     \textcolor{keywordflow}{if} (!m\_selected) \{}
\DoxyCodeLine{00639       changeDrawing(m\_direction, m\_row, m\_col);}
\DoxyCodeLine{00640       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{00641       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{00642       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00643     \}}
\DoxyCodeLine{00644 }
\DoxyCodeLine{00645     \textcolor{keywordtype}{int} col, row;}
\DoxyCodeLine{00646     \textcolor{keywordtype}{int} c = m\_range.m\_c0;}
\DoxyCodeLine{00647     \textcolor{keywordtype}{int} r = m\_range.m\_r0;}
\DoxyCodeLine{00648     \textcolor{keywordflow}{while} (c <= m\_range.m\_c1) \{}
\DoxyCodeLine{00649       col = c;}
\DoxyCodeLine{00650       \textcolor{keywordflow}{while} (r <= m\_range.m\_r1) \{}
\DoxyCodeLine{00651         row = r;}
\DoxyCodeLine{00652         changeDrawing(m\_direction, row, col);}
\DoxyCodeLine{00653         r++;}
\DoxyCodeLine{00654       \}}
\DoxyCodeLine{00655       r = m\_range.m\_r0;}
\DoxyCodeLine{00656       c++;}
\DoxyCodeLine{00657     \}}
\DoxyCodeLine{00658     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{00659     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{00660   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsh_cmd_1_1_drawing_subtitution_undo_a51476b831b601563bc5e038b815d9750}\label{class_xsh_cmd_1_1_drawing_subtitution_undo_a51476b831b601563bc5e038b815d9750}} 
\index{XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}!setDrawing@{setDrawing}}
\index{setDrawing@{setDrawing}!XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}}
\doxysubsubsection{\texorpdfstring{setDrawing()}{setDrawing()}}
{\footnotesize\ttfamily void Xsh\+Cmd\+::\+Drawing\+Subtitution\+Undo\+::set\+Drawing (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid,  }\item[{int}]{row,  }\item[{int}]{col,  }\item[{\mbox{\hyperlink{class_t_xsh_cell}{TXsh\+Cell}}}]{cell,  }\item[{\mbox{\hyperlink{class_t_xsh_level}{TXsh\+Level}} $\ast$}]{level }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00867                                                                          \{}
\DoxyCodeLine{00868   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{00869   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh            = app-\/>getCurrentScene()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}();}
\DoxyCodeLine{00870   cell.m\_frameId          = fid;}
\DoxyCodeLine{00871   cell.m\_level            = level;}
\DoxyCodeLine{00872   xsh-\/>setCell(row, col, cell);}
\DoxyCodeLine{00873   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *pegbar = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(TStageObjectId::ColumnId(col));}
\DoxyCodeLine{00874   pegbar-\/>\mbox{\hyperlink{class_t_stage_object_a6e3e9725839b34216225a943cbfb3f0a}{setOffset}}(pegbar-\/>\mbox{\hyperlink{class_t_stage_object_acca88f20b53a77f07ef090cc871ce43a}{getOffset}}());}
\DoxyCodeLine{00875 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsh_cmd_1_1_drawing_subtitution_undo_a7210c281701ad7ef3c345fabf713d37f}\label{class_xsh_cmd_1_1_drawing_subtitution_undo_a7210c281701ad7ef3c345fabf713d37f}} 
\index{XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}!undo@{undo}}
\index{undo@{undo}!XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}}
\doxysubsubsection{\texorpdfstring{undo()}{undo()}}
{\footnotesize\ttfamily void Xsh\+Cmd\+::\+Drawing\+Subtitution\+Undo\+::undo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_undo}{TUndo}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00600                              \{}
\DoxyCodeLine{00601     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}();}
\DoxyCodeLine{00602 }
\DoxyCodeLine{00603     \textcolor{keywordflow}{if} (!m\_selected) \{}
\DoxyCodeLine{00604       changeDrawing(-\/m\_direction, m\_row, m\_col);}
\DoxyCodeLine{00605       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{00606       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{00607       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00608     \}}
\DoxyCodeLine{00609     \textcolor{keywordtype}{int} col, row;}
\DoxyCodeLine{00610     \textcolor{keywordtype}{int} c = m\_range.m\_c0;}
\DoxyCodeLine{00611     \textcolor{keywordtype}{int} r = m\_range.m\_r0;}
\DoxyCodeLine{00612     \textcolor{keywordflow}{while} (c <= m\_range.m\_c1) \{}
\DoxyCodeLine{00613       col = c;}
\DoxyCodeLine{00614       \textcolor{keywordflow}{while} (r <= m\_range.m\_r1) \{}
\DoxyCodeLine{00615         row        = r;}
\DoxyCodeLine{00616         \textcolor{keywordtype}{bool} found = \textcolor{keyword}{false};}
\DoxyCodeLine{00617         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < emptyCells.size(); i++) \{}
\DoxyCodeLine{00618           \textcolor{keywordflow}{if} (emptyCells[i].first == row \&\& emptyCells[i].second == col) \{}
\DoxyCodeLine{00619             xsh-\/>\mbox{\hyperlink{class_t_xsheet_a28381fbf27f33822b68cf66f689266da}{clearCells}}(row, col);}
\DoxyCodeLine{00620             found = \textcolor{keyword}{true};}
\DoxyCodeLine{00621           \}}
\DoxyCodeLine{00622         \}}
\DoxyCodeLine{00623         \textcolor{keywordflow}{if} (found) \{}
\DoxyCodeLine{00624           r++;}
\DoxyCodeLine{00625           \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00626         \}}
\DoxyCodeLine{00627         changeDrawing(-\/m\_direction, row, col);}
\DoxyCodeLine{00628         r++;}
\DoxyCodeLine{00629       \}}
\DoxyCodeLine{00630       r = m\_range.m\_r0;}
\DoxyCodeLine{00631       c++;}
\DoxyCodeLine{00632     \}}
\DoxyCodeLine{00633     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{00634     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{00635   \}}

\end{DoxyCode}


\doxysubsection{Friends And Related Function Documentation}
\mbox{\Hypertarget{class_xsh_cmd_1_1_drawing_subtitution_undo_ad82b1513858ee2faa8aeae678c0eae79}\label{class_xsh_cmd_1_1_drawing_subtitution_undo_ad82b1513858ee2faa8aeae678c0eae79}} 
\index{XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}!DrawingSubtitutionGroupUndo@{DrawingSubtitutionGroupUndo}}
\index{DrawingSubtitutionGroupUndo@{DrawingSubtitutionGroupUndo}!XshCmd::DrawingSubtitutionUndo@{XshCmd::DrawingSubtitutionUndo}}
\doxysubsubsection{\texorpdfstring{DrawingSubtitutionGroupUndo}{DrawingSubtitutionGroupUndo}}
{\footnotesize\ttfamily friend class \mbox{\hyperlink{class_xsh_cmd_1_1_drawing_subtitution_group_undo}{Drawing\+Subtitution\+Group\+Undo}}\hspace{0.3cm}{\ttfamily [friend]}}



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/xsheetcmd.\+cpp\end{DoxyCompactItemize}
