\hypertarget{class_convert2_tlv}{}\doxysection{Convert2\+Tlv Class Reference}
\label{class_convert2_tlv}\index{Convert2Tlv@{Convert2Tlv}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_convert2_tlv_a2028bc6930bcf5368ef35ff38fddb679}{Convert2\+Tlv}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&filepath1, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&filepath2, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&out\+Folder, const QString \&out\+Name, int from, int to, bool do\+Autoclose, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&palette\+Path, int color\+Tolerance, int antialias\+Type, int antialias\+Value, bool is\+Unpainted\+From\+NAA, bool append\+Default\+Palette, double dpi)
\item 
bool \mbox{\hyperlink{class_convert2_tlv_a02d1e0e98950e07459e567702e5a00a2}{init}} (std\+::string \&error\+Message)
\item 
int \mbox{\hyperlink{class_convert2_tlv_ae93d55a0931aceba3d7e0f7eb1a61316}{get\+Frames\+To\+Convert\+Count}} ()
\item 
bool \mbox{\hyperlink{class_convert2_tlv_af31a8c1c0b96f5afdab3f1f7017e505c}{abort}} ()
\item 
bool \mbox{\hyperlink{class_convert2_tlv_ad4fb27e0e0c854f07e251f7198d2d984}{convert\+Next}} (std\+::string \&error\+Message)
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_convert2_tlv_a976af146a358260f56d35e3ffa05186c}{m\+\_\+level\+In1}}
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_convert2_tlv_a08faa90ee2fcc676d960aec223ac3c16}{m\+\_\+level\+In2}}
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_convert2_tlv_aae64a284c3faceee9a7138a89e8bd360}{m\+\_\+level\+Out}}
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_convert2_tlv_a3dc1af09745487ada90697873c47161b}{m\+\_\+palette\+Path}}
\item 
bool \mbox{\hyperlink{class_convert2_tlv_a3c9833db5ef15aa12d68a2167ef87af6}{m\+\_\+autoclose}}
\item 
bool \mbox{\hyperlink{class_convert2_tlv_a99eb466b070c8e365f868d5c85f4a1dd}{m\+\_\+premultiply}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_convert2_tlv_a2028bc6930bcf5368ef35ff38fddb679}\label{class_convert2_tlv_a2028bc6930bcf5368ef35ff38fddb679}} 
\index{Convert2Tlv@{Convert2Tlv}!Convert2Tlv@{Convert2Tlv}}
\index{Convert2Tlv@{Convert2Tlv}!Convert2Tlv@{Convert2Tlv}}
\doxysubsubsection{\texorpdfstring{Convert2Tlv()}{Convert2Tlv()}}
{\footnotesize\ttfamily Convert2\+Tlv\+::\+Convert2\+Tlv (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{filepath1,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{filepath2,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{out\+Folder,  }\item[{const QString \&}]{out\+Name,  }\item[{int}]{from,  }\item[{int}]{to,  }\item[{bool}]{do\+Autoclose,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{palette\+Path,  }\item[{int}]{color\+Tolerance,  }\item[{int}]{antialias\+Type,  }\item[{int}]{antialias\+Value,  }\item[{bool}]{is\+Unpainted\+From\+NAA,  }\item[{bool}]{append\+Default\+Palette,  }\item[{double}]{dpi }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00652     : m\_size(0, 0)}
\DoxyCodeLine{00653     , m\_level1()}
\DoxyCodeLine{00654     , m\_levelIn1()}
\DoxyCodeLine{00655     , m\_levelIn2()}
\DoxyCodeLine{00656     , m\_levelOut()}
\DoxyCodeLine{00657     , m\_autoclose(doAutoclose)}
\DoxyCodeLine{00658     , m\_premultiply(\textcolor{keyword}{false})}
\DoxyCodeLine{00659     , m\_count(0)}
\DoxyCodeLine{00660     , m\_from(from)}
\DoxyCodeLine{00661     , m\_to(to)}
\DoxyCodeLine{00662     , m\_palettePath(palettePath)}
\DoxyCodeLine{00663     , m\_colorTolerance(colorTolerance)}
\DoxyCodeLine{00664     , m\_palette(0)}
\DoxyCodeLine{00665     , m\_antialiasType(antialiasType)}
\DoxyCodeLine{00666     , m\_antialiasValue(antialiasValue)}
\DoxyCodeLine{00667     , m\_isUnpaintedFromNAA(isUnpaintedFromNAA)}
\DoxyCodeLine{00668     , m\_appendDefaultPalette(appendDefaultPalette)}
\DoxyCodeLine{00669     , m\_dpi(dpi) \{}
\DoxyCodeLine{00670   \textcolor{keywordflow}{if} (filepath1 != \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \{}
\DoxyCodeLine{00671     m\_levelIn1 = filepath1.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() + filepath1.\mbox{\hyperlink{class_t_file_path_a9b256108e6e5ff99f3ba828d4cdbd7ee}{getLevelName}}();}
\DoxyCodeLine{00672     \textcolor{keywordflow}{if} (outFolder != \mbox{\hyperlink{class_t_file_path}{TFilePath}}())}
\DoxyCodeLine{00673       m\_levelOut =}
\DoxyCodeLine{00674           m\_levelIn1.\mbox{\hyperlink{class_t_file_path_a09d12d68c4264183e0268dde6f592b2e}{withParentDir}}(outFolder).withNoFrame().\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(\textcolor{stringliteral}{"{}tlv"{}});}
\DoxyCodeLine{00675     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00676       m\_levelOut = m\_levelIn1.withNoFrame().\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(}
\DoxyCodeLine{00677           \textcolor{stringliteral}{"{}tlv"{}});  \textcolor{comment}{// filePaths[0].getParentDir() +}}
\DoxyCodeLine{00678                    \textcolor{comment}{// TFilePath(filePaths[0].getWideName() + L"{}.tlv"{});}}
\DoxyCodeLine{00679 }
\DoxyCodeLine{00680     \textcolor{keywordflow}{if} (outName != \textcolor{stringliteral}{"{}"{}}) m\_levelOut = m\_levelOut.\mbox{\hyperlink{class_t_file_path_a3ebf9ced558cfef97a60bba536b23c6f}{withName}}(outName.toStdString());}
\DoxyCodeLine{00681   \}}
\DoxyCodeLine{00682 }
\DoxyCodeLine{00683   \textcolor{keywordflow}{if} (filepath2 != \mbox{\hyperlink{class_t_file_path}{TFilePath}}())}
\DoxyCodeLine{00684     m\_levelIn2 = filepath2.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() + filepath2.\mbox{\hyperlink{class_t_file_path_a9b256108e6e5ff99f3ba828d4cdbd7ee}{getLevelName}}();}
\DoxyCodeLine{00685 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_convert2_tlv_af31a8c1c0b96f5afdab3f1f7017e505c}\label{class_convert2_tlv_af31a8c1c0b96f5afdab3f1f7017e505c}} 
\index{Convert2Tlv@{Convert2Tlv}!abort@{abort}}
\index{abort@{abort}!Convert2Tlv@{Convert2Tlv}}
\doxysubsubsection{\texorpdfstring{abort()}{abort()}}
{\footnotesize\ttfamily bool Convert2\+Tlv\+::abort (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00918                         \{}
\DoxyCodeLine{00919   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00920     m\_lr1    = \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}}();}
\DoxyCodeLine{00921     m\_lr2    = \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}}();}
\DoxyCodeLine{00922     m\_lw     = \mbox{\hyperlink{class_t_level_writer_p}{TLevelWriterP}}();}
\DoxyCodeLine{00923     m\_level1 = \mbox{\hyperlink{class_t_level_p}{TLevelP}}();}
\DoxyCodeLine{00924 }
\DoxyCodeLine{00925     std::cout << \textcolor{stringliteral}{"{}No output generated\(\backslash\)n"{}};}
\DoxyCodeLine{00926     TSystem::deleteFile(m\_levelOut);}
\DoxyCodeLine{00927     TSystem::deleteFile(m\_levelOut.\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(\textcolor{stringliteral}{"{}tpl"{}}));}
\DoxyCodeLine{00928     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00929   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00930     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00931   \}}
\DoxyCodeLine{00932 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert2_tlv_ad4fb27e0e0c854f07e251f7198d2d984}\label{class_convert2_tlv_ad4fb27e0e0c854f07e251f7198d2d984}} 
\index{Convert2Tlv@{Convert2Tlv}!convertNext@{convertNext}}
\index{convertNext@{convertNext}!Convert2Tlv@{Convert2Tlv}}
\doxysubsubsection{\texorpdfstring{convertNext()}{convertNext()}}
{\footnotesize\ttfamily bool Convert2\+Tlv\+::convert\+Next (\begin{DoxyParamCaption}\item[{std\+::string \&}]{error\+Message }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00848                                                      \{}
\DoxyCodeLine{00849   \textcolor{keywordflow}{if} (m\_count == 0 \&\& m\_from != -\/1)}
\DoxyCodeLine{00850     \textcolor{keywordflow}{while} (m\_it != m\_level1-\/>end() \&\& m\_it-\/>first.getNumber() < m\_from) m\_it++;}
\DoxyCodeLine{00851 }
\DoxyCodeLine{00852   std::cout << \textcolor{stringliteral}{"{}Processing image "{}} << ++m\_count << \textcolor{stringliteral}{"{} of "{}}}
\DoxyCodeLine{00853             << getFramesCount(m\_level1, m\_from, m\_to) << \textcolor{stringliteral}{"{}...\(\backslash\)n"{}};}
\DoxyCodeLine{00854   std::cout << \textcolor{stringliteral}{"{}      Loading frame "{}} << m\_it-\/>first.getNumber() << \textcolor{stringliteral}{"{}...\(\backslash\)n"{}};}
\DoxyCodeLine{00855   \mbox{\hyperlink{class_t_image_reader_p}{TImageReaderP}} ir1    = m\_lr1-\/>getFrameReader(m\_it-\/>first);}
\DoxyCodeLine{00856   \mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} imgIn1 = (\mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}})ir1-\/>load();}
\DoxyCodeLine{00857   \textcolor{keywordflow}{if} (!imgIn1) \{}
\DoxyCodeLine{00858     errorMessage = \textcolor{stringliteral}{"{}Error: cannot read frame"{}} +}
\DoxyCodeLine{00859                    std::to\_string(m\_it-\/>first.getNumber()) + \textcolor{stringliteral}{"{} of "{}} +}
\DoxyCodeLine{00860                    ::to\_string(m\_levelIn1.getWideString()) + \textcolor{stringliteral}{"{}!"{}};}
\DoxyCodeLine{00861     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00862   \}}
\DoxyCodeLine{00863   \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} rin1 = imgIn1-\/>getRaster();}
\DoxyCodeLine{00864 }
\DoxyCodeLine{00865   assert((\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}})rin1 || (\mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}})rin1);}
\DoxyCodeLine{00866 }
\DoxyCodeLine{00867   \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} rin2;}
\DoxyCodeLine{00868   \mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} imgIn2;}
\DoxyCodeLine{00869 }
\DoxyCodeLine{00870   \textcolor{keywordflow}{if} (m\_lr2) \{}
\DoxyCodeLine{00871     \mbox{\hyperlink{class_t_image_reader_p}{TImageReaderP}} ir2 = m\_lr2-\/>getFrameReader(m\_it-\/>first);}
\DoxyCodeLine{00872     imgIn2            = (\mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}})ir2-\/>load();}
\DoxyCodeLine{00873     \textcolor{keywordflow}{if} (!imgIn2) \{}
\DoxyCodeLine{00874       errorMessage = \textcolor{stringliteral}{"{}Error: cannot read frame "{}} +}
\DoxyCodeLine{00875                      std::to\_string(m\_it-\/>first.getNumber()) + \textcolor{stringliteral}{"{} of "{}} +}
\DoxyCodeLine{00876                      ::to\_string(m\_levelIn2.getWideString()) + \textcolor{stringliteral}{"{}!"{}};}
\DoxyCodeLine{00877       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00878     \}}
\DoxyCodeLine{00879     rin2 = imgIn2-\/>getRaster();}
\DoxyCodeLine{00880     assert((\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}})rin2 || (\mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}})rin2);}
\DoxyCodeLine{00881   \}}
\DoxyCodeLine{00882 }
\DoxyCodeLine{00883   \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} rout(m\_size);}
\DoxyCodeLine{00884   buildToonzRaster(rout, rin1, rin2);}
\DoxyCodeLine{00885 }
\DoxyCodeLine{00886   std::cout << \textcolor{stringliteral}{"{}      saving frame in level \(\backslash\)'"{}} << m\_levelOut.\mbox{\hyperlink{class_t_file_path_a9b256108e6e5ff99f3ba828d4cdbd7ee}{getLevelName}}()}
\DoxyCodeLine{00887             << \textcolor{stringliteral}{"{}\(\backslash\)'...\(\backslash\)n\(\backslash\)n"{}};}
\DoxyCodeLine{00888   \mbox{\hyperlink{class_t_image_writer_p}{TImageWriterP}} iw  = m\_lw-\/>getFrameWriter(m\_it-\/>first);}
\DoxyCodeLine{00889   \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} timg = \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}}(rout, rout-\/>getBounds());}
\DoxyCodeLine{00890 }
\DoxyCodeLine{00891   \mbox{\hyperlink{class_t_rect_t}{TRect}} bbox;}
\DoxyCodeLine{00892   \mbox{\hyperlink{namespace_t_rop_a1dfdba06d4f71d86755d8e0833a7a071}{TRop::computeBBox}}(rout, bbox);}
\DoxyCodeLine{00893   timg-\/>setSavebox(bbox);}
\DoxyCodeLine{00894 }
\DoxyCodeLine{00895   \textcolor{keywordflow}{if} (m\_dpi > 0.0)  \textcolor{comment}{// specify dpi in the convert popup}}
\DoxyCodeLine{00896     timg-\/>setDpi(m\_dpi, m\_dpi);}
\DoxyCodeLine{00897   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00898     \textcolor{keywordtype}{double} dpix, dpiy;}
\DoxyCodeLine{00899     imgIn1-\/>getDpi(dpix, dpiy);}
\DoxyCodeLine{00900     timg-\/>setDpi(dpix, dpiy);}
\DoxyCodeLine{00901   \}}
\DoxyCodeLine{00902 }
\DoxyCodeLine{00903   TLevel::Iterator itaux = m\_it;}
\DoxyCodeLine{00904   itaux++;}
\DoxyCodeLine{00905   \textcolor{keywordflow}{if} (itaux == m\_level1-\/>end() ||}
\DoxyCodeLine{00906       (m\_to != -\/1 \&\&}
\DoxyCodeLine{00907        itaux-\/>first.getNumber() > m\_to))  \textcolor{comment}{// ultimo frame da scrivere.}}
\DoxyCodeLine{00908     timg-\/>setPalette(buildPalette());}
\DoxyCodeLine{00909 }
\DoxyCodeLine{00910   iw-\/>save(timg);}
\DoxyCodeLine{00911 }
\DoxyCodeLine{00912   ++m\_it;}
\DoxyCodeLine{00913   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00914 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert2_tlv_ae93d55a0931aceba3d7e0f7eb1a61316}\label{class_convert2_tlv_ae93d55a0931aceba3d7e0f7eb1a61316}} 
\index{Convert2Tlv@{Convert2Tlv}!getFramesToConvertCount@{getFramesToConvertCount}}
\index{getFramesToConvertCount@{getFramesToConvertCount}!Convert2Tlv@{Convert2Tlv}}
\doxysubsubsection{\texorpdfstring{getFramesToConvertCount()}{getFramesToConvertCount()}}
{\footnotesize\ttfamily int Convert2\+Tlv\+::get\+Frames\+To\+Convert\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00689                                          \{}
\DoxyCodeLine{00690   \textcolor{keywordflow}{if} (m\_level1 \&\& m\_level1-\/>getFrameCount() > 0)}
\DoxyCodeLine{00691     \textcolor{keywordflow}{return} getFramesCount(m\_level1, m\_from,}
\DoxyCodeLine{00692                           m\_to);  \textcolor{comment}{// m\_level1-\/>getFrameCount();}}
\DoxyCodeLine{00693   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00694     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00695       \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}} lr = \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}}(m\_levelIn1);}
\DoxyCodeLine{00696       \textcolor{keywordflow}{if} (lr) \{}
\DoxyCodeLine{00697         \mbox{\hyperlink{class_t_level_p}{TLevelP}} l = lr-\/>loadInfo();}
\DoxyCodeLine{00698         \textcolor{keywordflow}{if} (l) \{}
\DoxyCodeLine{00699           \textcolor{keywordflow}{return} getFramesCount(l, m\_from, m\_to);}
\DoxyCodeLine{00700         \}}
\DoxyCodeLine{00701       \}}
\DoxyCodeLine{00702     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00703       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00704     \}}
\DoxyCodeLine{00705   \}}
\DoxyCodeLine{00706   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00707 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_convert2_tlv_a02d1e0e98950e07459e567702e5a00a2}\label{class_convert2_tlv_a02d1e0e98950e07459e567702e5a00a2}} 
\index{Convert2Tlv@{Convert2Tlv}!init@{init}}
\index{init@{init}!Convert2Tlv@{Convert2Tlv}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily bool Convert2\+Tlv\+::init (\begin{DoxyParamCaption}\item[{std\+::string \&}]{error\+Message }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00711                                               \{}
\DoxyCodeLine{00712   m\_lastIndex = m\_maxPaletteIndex = 0;}
\DoxyCodeLine{00713   m\_colorMap.clear();}
\DoxyCodeLine{00714 }
\DoxyCodeLine{00715   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00716     m\_lr1 = \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}}(m\_levelIn1);}
\DoxyCodeLine{00717     \textcolor{keywordflow}{if} (m\_lr1) m\_level1 = m\_lr1-\/>loadInfo();}
\DoxyCodeLine{00718   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00719     errorMessage =}
\DoxyCodeLine{00720         \textcolor{stringliteral}{"{}Error: can't read level "{}} + ::to\_string(m\_levelIn1.getWideString());}
\DoxyCodeLine{00721     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00722   \}}
\DoxyCodeLine{00723 }
\DoxyCodeLine{00724   \textcolor{keywordflow}{if} (m\_level1-\/>getFrameCount() == 0) \{}
\DoxyCodeLine{00725     errorMessage =}
\DoxyCodeLine{00726         \textcolor{stringliteral}{"{}Error: can't find level "{}} + ::to\_string(m\_levelIn1.getWideString());}
\DoxyCodeLine{00727     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00728   \}}
\DoxyCodeLine{00729 }
\DoxyCodeLine{00730   \mbox{\hyperlink{class_t_level_p}{TLevelP}} level2;}
\DoxyCodeLine{00731 }
\DoxyCodeLine{00732   \textcolor{keywordflow}{if} (m\_levelIn2 != \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \{}
\DoxyCodeLine{00733     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00734       m\_lr2 = \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}}(m\_levelIn2);}
\DoxyCodeLine{00735       \textcolor{keywordflow}{if} (m\_lr2) level2 = m\_lr2-\/>loadInfo();}
\DoxyCodeLine{00736     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00737       errorMessage =}
\DoxyCodeLine{00738           \textcolor{stringliteral}{"{}Error: can't read level "{}} + ::to\_string(m\_levelIn2.getWideString());}
\DoxyCodeLine{00739       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00740     \}}
\DoxyCodeLine{00741 }
\DoxyCodeLine{00742     \textcolor{keywordflow}{if} (level2-\/>getFrameCount() == 0) \{}
\DoxyCodeLine{00743       errorMessage =}
\DoxyCodeLine{00744           \textcolor{stringliteral}{"{}Error: can't find level "{}} + ::to\_string(m\_levelIn2.getWideString());}
\DoxyCodeLine{00745       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00746     \}}
\DoxyCodeLine{00747 }
\DoxyCodeLine{00748     \textcolor{keywordflow}{if} (m\_level1-\/>getFrameCount() != level2-\/>getFrameCount()) \{}
\DoxyCodeLine{00749       errorMessage = \textcolor{stringliteral}{"{}Error: the two input levels must have same frame number"{}};}
\DoxyCodeLine{00750       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00751     \}}
\DoxyCodeLine{00752   \}}
\DoxyCodeLine{00753 }
\DoxyCodeLine{00754   m\_size = \mbox{\hyperlink{class_t_dimension_t}{TDimension}}();}
\DoxyCodeLine{00755 }
\DoxyCodeLine{00756   m\_lw = \mbox{\hyperlink{class_t_level_writer_p}{TLevelWriterP}}(m\_levelOut);}
\DoxyCodeLine{00757   m\_it = m\_level1-\/>begin();}
\DoxyCodeLine{00758 }
\DoxyCodeLine{00759   TLevel::Iterator it2;}
\DoxyCodeLine{00760 }
\DoxyCodeLine{00761   \textcolor{keywordflow}{if} (level2-\/>getFrameCount() > 0) it2 = level2-\/>begin();}
\DoxyCodeLine{00762 }
\DoxyCodeLine{00763   \textcolor{keywordflow}{for} (; m\_it != m\_level1-\/>end(); ++m\_it) \{}
\DoxyCodeLine{00764     \mbox{\hyperlink{class_t_image_reader_p}{TImageReaderP}} ir1       = m\_lr1-\/>getFrameReader(m\_it-\/>first);}
\DoxyCodeLine{00765     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_image_info}{TImageInfo}} *info1 = ir1-\/>getImageInfo();}
\DoxyCodeLine{00766     \textcolor{keywordflow}{if} (!info1) \{}
\DoxyCodeLine{00767       errorMessage = \textcolor{stringliteral}{"{}Error: can't read frame "{}} +}
\DoxyCodeLine{00768                      std::to\_string(m\_it-\/>first.getNumber()) + \textcolor{stringliteral}{"{} of level  "{}} +}
\DoxyCodeLine{00769                      ::to\_string(m\_levelIn1.getWideString());}
\DoxyCodeLine{00770       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00771     \}}
\DoxyCodeLine{00772 }
\DoxyCodeLine{00773     \textcolor{keywordflow}{if} (info1-\/>\mbox{\hyperlink{class_t_image_info_aa69221d579b49a27bcd54ffaabb2e8be}{m\_bitsPerSample}} != 8) \{}
\DoxyCodeLine{00774       errorMessage = \textcolor{stringliteral}{"{}Error: all frames must have 8 bits per channel!\(\backslash\)n"{}};}
\DoxyCodeLine{00775       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00776     \}}
\DoxyCodeLine{00777     m\_size.lx = std::max(m\_size.lx, info1-\/>\mbox{\hyperlink{class_t_image_info_afe82a2118ba303797b2c8a12b47b771d}{m\_lx}});}
\DoxyCodeLine{00778     m\_size.ly = std::max(m\_size.ly, info1-\/>\mbox{\hyperlink{class_t_image_info_affef879628cc3843968c932e706541b6}{m\_ly}});}
\DoxyCodeLine{00779 }
\DoxyCodeLine{00780     \textcolor{keywordflow}{if} (m\_lr2 != \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}}()) \{}
\DoxyCodeLine{00781       \mbox{\hyperlink{class_t_image_reader_p}{TImageReaderP}} ir2 = m\_lr2-\/>getFrameReader(it2-\/>first);}
\DoxyCodeLine{00782 }
\DoxyCodeLine{00783       \textcolor{keywordflow}{if} (ir2) \{}
\DoxyCodeLine{00784         \textcolor{keyword}{const} \mbox{\hyperlink{class_t_image_info}{TImageInfo}} *info2 = ir2-\/>getImageInfo();}
\DoxyCodeLine{00785         \textcolor{keywordflow}{if} (!info1) \{}
\DoxyCodeLine{00786           errorMessage = \textcolor{stringliteral}{"{}Error: can't read frame "{}} +}
\DoxyCodeLine{00787                          std::to\_string(it2-\/>first.getNumber()) +}
\DoxyCodeLine{00788                          \textcolor{stringliteral}{"{} of level  "{}} +}
\DoxyCodeLine{00789                          ::to\_string(m\_levelIn2.getWideString());}
\DoxyCodeLine{00790           ;}
\DoxyCodeLine{00791           \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00792         \}}
\DoxyCodeLine{00793 }
\DoxyCodeLine{00794         \textcolor{keywordflow}{if} (info1-\/>\mbox{\hyperlink{class_t_image_info_afe82a2118ba303797b2c8a12b47b771d}{m\_lx}} != info2-\/>\mbox{\hyperlink{class_t_image_info_afe82a2118ba303797b2c8a12b47b771d}{m\_lx}} || info1-\/>\mbox{\hyperlink{class_t_image_info_affef879628cc3843968c932e706541b6}{m\_ly}} != info2-\/>\mbox{\hyperlink{class_t_image_info_affef879628cc3843968c932e706541b6}{m\_ly}}) \{}
\DoxyCodeLine{00795           errorMessage =}
\DoxyCodeLine{00796               \textcolor{stringliteral}{"{}Error: painted frames must have same resolution of matching "{}}}
\DoxyCodeLine{00797               \textcolor{stringliteral}{"{}unpainted frames!\(\backslash\)n"{}};}
\DoxyCodeLine{00798           \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00799         \}}
\DoxyCodeLine{00800         \textcolor{keywordflow}{if} (info2-\/>\mbox{\hyperlink{class_t_image_info_aa69221d579b49a27bcd54ffaabb2e8be}{m\_bitsPerSample}} != 8) \{}
\DoxyCodeLine{00801           errorMessage = \textcolor{stringliteral}{"{}Error: all frames must have 8 bits per channel!\(\backslash\)n"{}};}
\DoxyCodeLine{00802           \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00803         \}}
\DoxyCodeLine{00804       \}}
\DoxyCodeLine{00805       ++it2;}
\DoxyCodeLine{00806     \}}
\DoxyCodeLine{00807   \}}
\DoxyCodeLine{00808 }
\DoxyCodeLine{00809   m\_palette = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_palette}{TPalette}}();}
\DoxyCodeLine{00810 }
\DoxyCodeLine{00811   \textcolor{keywordflow}{if} (m\_palettePath != \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \{}
\DoxyCodeLine{00812     \mbox{\hyperlink{class_t_i_stream}{TIStream}} is(m\_palettePath);}
\DoxyCodeLine{00813     is >> m\_palette;}
\DoxyCodeLine{00814     \textcolor{keywordflow}{if} (m\_palette-\/>getStyleInPagesCount() == 0) \{}
\DoxyCodeLine{00815       errorMessage = \textcolor{stringliteral}{"{}Error: invalid palette!\(\backslash\)n"{}};}
\DoxyCodeLine{00816 }
\DoxyCodeLine{00817       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00818     \}}
\DoxyCodeLine{00819     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_palette-\/>getStyleCount(); i++)}
\DoxyCodeLine{00820       \textcolor{keywordflow}{if} (m\_palette-\/>getStylePage(i)) \{}
\DoxyCodeLine{00821         m\_colorMap[m\_palette-\/>getStyle(i)-\/>getMainColor()] = i;}
\DoxyCodeLine{00822         \textcolor{keywordflow}{if} (i > m\_lastIndex) m\_lastIndex = i;}
\DoxyCodeLine{00823       \}}
\DoxyCodeLine{00824     assert(m\_colorMap.size() == m\_palette-\/>getStyleInPagesCount());}
\DoxyCodeLine{00825   \}}
\DoxyCodeLine{00826 }
\DoxyCodeLine{00827   m\_maxPaletteIndex = m\_lastIndex;}
\DoxyCodeLine{00828 }
\DoxyCodeLine{00829   m\_it = m\_level1-\/>begin();}
\DoxyCodeLine{00830 }
\DoxyCodeLine{00831   \textcolor{comment}{/*-\/}}
\DoxyCodeLine{00832 \textcolor{comment}{  If the palette is empty, make an initial palette with black, red, blue and}}
\DoxyCodeLine{00833 \textcolor{comment}{  green styles.}}
\DoxyCodeLine{00834 \textcolor{comment}{  For the latter three styles the "{}autopaint"{} option should be set.}}
\DoxyCodeLine{00835 \textcolor{comment}{  -\/*/}}
\DoxyCodeLine{00836   \textcolor{keywordflow}{if} (m\_lastIndex == 0) \{}
\DoxyCodeLine{00837     m\_colorMap[TPixel::Black] = ++m\_lastIndex;}
\DoxyCodeLine{00838     m\_colorMap[TPixel::Red]   = ++m\_lastIndex;}
\DoxyCodeLine{00839     m\_colorMap[TPixel::Blue]  = ++m\_lastIndex;}
\DoxyCodeLine{00840     m\_colorMap[TPixel::Green] = ++m\_lastIndex;}
\DoxyCodeLine{00841   \}}
\DoxyCodeLine{00842 }
\DoxyCodeLine{00843   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00844 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_convert2_tlv_a3c9833db5ef15aa12d68a2167ef87af6}\label{class_convert2_tlv_a3c9833db5ef15aa12d68a2167ef87af6}} 
\index{Convert2Tlv@{Convert2Tlv}!m\_autoclose@{m\_autoclose}}
\index{m\_autoclose@{m\_autoclose}!Convert2Tlv@{Convert2Tlv}}
\doxysubsubsection{\texorpdfstring{m\_autoclose}{m\_autoclose}}
{\footnotesize\ttfamily bool Convert2\+Tlv\+::m\+\_\+autoclose}

\mbox{\Hypertarget{class_convert2_tlv_a976af146a358260f56d35e3ffa05186c}\label{class_convert2_tlv_a976af146a358260f56d35e3ffa05186c}} 
\index{Convert2Tlv@{Convert2Tlv}!m\_levelIn1@{m\_levelIn1}}
\index{m\_levelIn1@{m\_levelIn1}!Convert2Tlv@{Convert2Tlv}}
\doxysubsubsection{\texorpdfstring{m\_levelIn1}{m\_levelIn1}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Convert2\+Tlv\+::m\+\_\+level\+In1}

\mbox{\Hypertarget{class_convert2_tlv_a08faa90ee2fcc676d960aec223ac3c16}\label{class_convert2_tlv_a08faa90ee2fcc676d960aec223ac3c16}} 
\index{Convert2Tlv@{Convert2Tlv}!m\_levelIn2@{m\_levelIn2}}
\index{m\_levelIn2@{m\_levelIn2}!Convert2Tlv@{Convert2Tlv}}
\doxysubsubsection{\texorpdfstring{m\_levelIn2}{m\_levelIn2}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Convert2\+Tlv\+::m\+\_\+level\+In2}

\mbox{\Hypertarget{class_convert2_tlv_aae64a284c3faceee9a7138a89e8bd360}\label{class_convert2_tlv_aae64a284c3faceee9a7138a89e8bd360}} 
\index{Convert2Tlv@{Convert2Tlv}!m\_levelOut@{m\_levelOut}}
\index{m\_levelOut@{m\_levelOut}!Convert2Tlv@{Convert2Tlv}}
\doxysubsubsection{\texorpdfstring{m\_levelOut}{m\_levelOut}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Convert2\+Tlv\+::m\+\_\+level\+Out}

\mbox{\Hypertarget{class_convert2_tlv_a3dc1af09745487ada90697873c47161b}\label{class_convert2_tlv_a3dc1af09745487ada90697873c47161b}} 
\index{Convert2Tlv@{Convert2Tlv}!m\_palettePath@{m\_palettePath}}
\index{m\_palettePath@{m\_palettePath}!Convert2Tlv@{Convert2Tlv}}
\doxysubsubsection{\texorpdfstring{m\_palettePath}{m\_palettePath}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Convert2\+Tlv\+::m\+\_\+palette\+Path}

\mbox{\Hypertarget{class_convert2_tlv_a99eb466b070c8e365f868d5c85f4a1dd}\label{class_convert2_tlv_a99eb466b070c8e365f868d5c85f4a1dd}} 
\index{Convert2Tlv@{Convert2Tlv}!m\_premultiply@{m\_premultiply}}
\index{m\_premultiply@{m\_premultiply}!Convert2Tlv@{Convert2Tlv}}
\doxysubsubsection{\texorpdfstring{m\_premultiply}{m\_premultiply}}
{\footnotesize\ttfamily bool Convert2\+Tlv\+::m\+\_\+premultiply}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/convert2tlv.\+h\item 
E\+:/opentoonz/toonz/sources/toonzlib/convert2tlv.\+cpp\end{DoxyCompactItemize}
