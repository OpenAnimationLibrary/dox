\hypertarget{class_directional_blur_base_fx}{}\doxysection{Directional\+Blur\+Base\+Fx Class Reference}
\label{class_directional_blur_base_fx}\index{DirectionalBlurBaseFx@{DirectionalBlurBaseFx}}
Inheritance diagram for Directional\+Blur\+Base\+Fx\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=6.000000cm]{class_directional_blur_base_fx}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_directional_blur_base_fx_a82f73b5781be8bcb93b8b557ac297d39}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
\mbox{\hyperlink{class_directional_blur_base_fx_a3fa66196757d676bb348cf03b1d769b9}{Directional\+Blur\+Base\+Fx}} (bool is\+Motion\+BLur)
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_directional_blur_base_fx_a2314a2aeeefe8da21356602645550c7e}{get\+Blur\+Vector}} (double frame) const
\item 
void \mbox{\hyperlink{class_directional_blur_base_fx_aaeb31a32a61dbe7e0b1311d96c249e0b}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&) override
\item 
bool \mbox{\hyperlink{class_directional_blur_base_fx_a097fa6b5354c6f64652cc18097b56df2}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\item 
int \mbox{\hyperlink{class_directional_blur_base_fx_a0cdf1a5d12768ba1cb17e9af183e47be}{get\+Memory\+Requirement}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_directional_blur_base_fx_a67ed8bbbc8c6e9a3c6a3f102dbf38035}{m\+\_\+is\+Motion\+Blur}}
\item 
\mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} \mbox{\hyperlink{class_directional_blur_base_fx_ac9f4f542985f4edcfd6514a5c746968b}{m\+\_\+input}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_directional_blur_base_fx_abb07d50e78cd826c984e7a1b7678a473}{m\+\_\+angle}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_directional_blur_base_fx_a0b627ad2b9a74864be39c34173182360}{m\+\_\+intensity}}
\item 
TBool\+ParamP \mbox{\hyperlink{class_directional_blur_base_fx_aedd212df23c9a7b5e4bcc983901d2e95}{m\+\_\+bidirectional}}
\item 
TBool\+ParamP \mbox{\hyperlink{class_directional_blur_base_fx_acf18ed8cd987d8004587691e7a4e90df}{m\+\_\+spread}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_directional_blur_base_fx_a3fa66196757d676bb348cf03b1d769b9}\label{class_directional_blur_base_fx_a3fa66196757d676bb348cf03b1d769b9}} 
\index{DirectionalBlurBaseFx@{DirectionalBlurBaseFx}!DirectionalBlurBaseFx@{DirectionalBlurBaseFx}}
\index{DirectionalBlurBaseFx@{DirectionalBlurBaseFx}!DirectionalBlurBaseFx@{DirectionalBlurBaseFx}}
\doxysubsubsection{\texorpdfstring{DirectionalBlurBaseFx()}{DirectionalBlurBaseFx()}}
{\footnotesize\ttfamily Directional\+Blur\+Base\+Fx\+::\+Directional\+Blur\+Base\+Fx (\begin{DoxyParamCaption}\item[{bool}]{is\+Motion\+BLur }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00384       : m\_isMotionBlur(isMotionBLur)}
\DoxyCodeLine{00385       , m\_angle(0.0)}
\DoxyCodeLine{00386       , m\_intensity(10.0)}
\DoxyCodeLine{00387       , m\_bidirectional(\textcolor{keyword}{false})}
\DoxyCodeLine{00388       , m\_spread(\textcolor{keyword}{true}) \{}
\DoxyCodeLine{00389     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}intensity"{}}, m\_intensity);}
\DoxyCodeLine{00390     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}bidirectional"{}}, m\_bidirectional);}
\DoxyCodeLine{00391     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}spread"{}}, m\_spread);}
\DoxyCodeLine{00392 }
\DoxyCodeLine{00393     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Source"{}}, m\_input);}
\DoxyCodeLine{00394     m\_intensity-\/>setValueRange(0, (std::numeric\_limits<double>::max)());}
\DoxyCodeLine{00395 }
\DoxyCodeLine{00396     getAttributes()-\/>setIsSpeedAware(\textcolor{keyword}{true});}
\DoxyCodeLine{00397   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_directional_blur_base_fx_ac49d20cb510410b1c39cd3de93987df0}\label{class_directional_blur_base_fx_ac49d20cb510410b1c39cd3de93987df0}} 
\index{DirectionalBlurBaseFx@{DirectionalBlurBaseFx}!````~DirectionalBlurBaseFx@{$\sim$DirectionalBlurBaseFx}}
\index{````~DirectionalBlurBaseFx@{$\sim$DirectionalBlurBaseFx}!DirectionalBlurBaseFx@{DirectionalBlurBaseFx}}
\doxysubsubsection{\texorpdfstring{$\sim$DirectionalBlurBaseFx()}{~DirectionalBlurBaseFx()}}
{\footnotesize\ttfamily Directional\+Blur\+Base\+Fx\+::$\sim$\+Directional\+Blur\+Base\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00405 \{\};}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_directional_blur_base_fx_a097fa6b5354c6f64652cc18097b56df2}\label{class_directional_blur_base_fx_a097fa6b5354c6f64652cc18097b56df2}} 
\index{DirectionalBlurBaseFx@{DirectionalBlurBaseFx}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!DirectionalBlurBaseFx@{DirectionalBlurBaseFx}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool Directional\+Blur\+Base\+Fx\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00409                                                                      \{}
\DoxyCodeLine{00410     \textcolor{keywordflow}{return} isAlmostIsotropic(info.m\_affine) ||}
\DoxyCodeLine{00411            m\_intensity-\/>getValue(frame) == 0;}
\DoxyCodeLine{00412   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_directional_blur_base_fx_aaeb31a32a61dbe7e0b1311d96c249e0b}\label{class_directional_blur_base_fx_aaeb31a32a61dbe7e0b1311d96c249e0b}} 
\index{DirectionalBlurBaseFx@{DirectionalBlurBaseFx}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!DirectionalBlurBaseFx@{DirectionalBlurBaseFx}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void Directional\+Blur\+Base\+Fx\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{ri }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00501                                                                  \{}
\DoxyCodeLine{00502   \textcolor{keywordflow}{if} (!m\_input.isConnected()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00503 }
\DoxyCodeLine{00504   \mbox{\hyperlink{class_t_point_t}{TPointD}} blurVector;}
\DoxyCodeLine{00505   \textcolor{keywordflow}{if} (m\_isMotionBlur) \{}
\DoxyCodeLine{00506     blurVector = getBlurVector(frame);}
\DoxyCodeLine{00507   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00508     \textcolor{keywordtype}{double} angle = m\_angle-\/>getValue(frame) * M\_PI\_180;}
\DoxyCodeLine{00509     blurVector.x = m\_intensity-\/>getValue(frame) * cos(angle);}
\DoxyCodeLine{00510     blurVector.y = m\_intensity-\/>getValue(frame) * sin(angle);}
\DoxyCodeLine{00511   \}}
\DoxyCodeLine{00512 }
\DoxyCodeLine{00513   \textcolor{keyword}{const} \textcolor{keywordtype}{double} limit = 900.0;}
\DoxyCodeLine{00514   blurVector.x       = tcrop(blurVector.x, -\/limit, limit);}
\DoxyCodeLine{00515   blurVector.y       = tcrop(blurVector.y, -\/limit, limit);}
\DoxyCodeLine{00516   \textcolor{keywordtype}{double} shrink      = (ri.\mbox{\hyperlink{class_t_render_settings_a52dd41881bbf6aaf953fe300be2e233e}{m\_shrinkX}} + ri.\mbox{\hyperlink{class_t_render_settings_ae1882f584ce9ffad12ce6bf9ff23814c}{m\_shrinkY}}) / 2.0;}
\DoxyCodeLine{00517 }
\DoxyCodeLine{00518   \mbox{\hyperlink{class_t_affine}{TAffine}} aff = ri.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}};}
\DoxyCodeLine{00519   aff.a13 = aff.a23 = 0;}
\DoxyCodeLine{00520   \mbox{\hyperlink{class_t_point_t}{TPointD}} blur      = (1.0 / shrink) * (aff * blurVector);}
\DoxyCodeLine{00521 }
\DoxyCodeLine{00522   \textcolor{keywordtype}{double} blurValue = norm(blur);}
\DoxyCodeLine{00523   \textcolor{keywordflow}{if} (areAlmostEqual(blurValue, 0, 1e-\/3)) \{}
\DoxyCodeLine{00524     m\_input-\/>compute(tile, frame, ri);}
\DoxyCodeLine{00525     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00526   \}}
\DoxyCodeLine{00527 }
\DoxyCodeLine{00528   \mbox{\hyperlink{class_t_rect_t}{TRectD}} rectTile = \mbox{\hyperlink{class_t_rect_t}{TRectD}}(tile.m\_pos, \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}}(tile.getRaster()-\/>getLx(),}
\DoxyCodeLine{00529                                                    tile.getRaster()-\/>getLy()));}
\DoxyCodeLine{00530   \textcolor{keywordflow}{if} (!rectTile.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \{}
\DoxyCodeLine{00531     \mbox{\hyperlink{class_t_rect_t}{TRectD}} bboxIn;}
\DoxyCodeLine{00532     m\_input-\/>getBBox(frame, bboxIn, ri);}
\DoxyCodeLine{00533     \textcolor{keywordflow}{if} (bboxIn == TConsts::infiniteRectD) bboxIn = rectTile;}
\DoxyCodeLine{00534     \mbox{\hyperlink{class_t_point_t}{TPointD}} blur = (1.0 / shrink) * (aff * blurVector);}
\DoxyCodeLine{00535     \textcolor{comment}{// enlarge must be bidirectional, because we need pixel on the other side of}}
\DoxyCodeLine{00536     \textcolor{comment}{// blur}}
\DoxyCodeLine{00537     enlargeDir(bboxIn, blur, \textcolor{keyword}{true});}
\DoxyCodeLine{00538     rectTile = bboxIn * rectTile.enlarge(fabs(blur.x), fabs(blur.y));}
\DoxyCodeLine{00539     \mbox{\hyperlink{class_t_rect_t}{TRect}} rectIn;}
\DoxyCodeLine{00540     rectIn.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} = tfloor(rectTile.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}});}
\DoxyCodeLine{00541     rectIn.y0 = tfloor(rectTile.y0);}
\DoxyCodeLine{00542     rectIn.x1 = tceil(rectTile.x1);}
\DoxyCodeLine{00543     rectIn.y1 = tceil(rectTile.y1);}
\DoxyCodeLine{00544 }
\DoxyCodeLine{00545     \textcolor{keywordtype}{int} rasInLx = rectIn.getLx();}
\DoxyCodeLine{00546     \textcolor{keywordtype}{int} rasInLy = rectIn.getLy();}
\DoxyCodeLine{00547     \mbox{\hyperlink{class_t_tile}{TTile}} tileIn;}
\DoxyCodeLine{00548     m\_input-\/>allocateAndCompute(tileIn, convert(rectIn.getP00()),}
\DoxyCodeLine{00549                                 \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(rasInLx, rasInLy), tile.getRaster(),}
\DoxyCodeLine{00550                                 frame, ri);}
\DoxyCodeLine{00551     \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} rasIn = tileIn.getRaster();}
\DoxyCodeLine{00552     \mbox{\hyperlink{class_t_rect_t}{TRect}} rectOut =}
\DoxyCodeLine{00553         rasIn-\/>getBounds() + (rectIn.getP00() -\/ convert(tile.m\_pos));}
\DoxyCodeLine{00554     \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} rasOut = tile.getRaster()-\/>extract(rectOut);}
\DoxyCodeLine{00555 }
\DoxyCodeLine{00556     \mbox{\hyperlink{class_t_point_t}{TPoint}} p;}
\DoxyCodeLine{00557     \textcolor{keywordflow}{if} (rectIn.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} < tile.m\_pos.x) p.x = rectIn.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} -\/ tile.m\_pos.x;}
\DoxyCodeLine{00558     \textcolor{keywordflow}{if} (rectIn.y0 < tile.m\_pos.y) p.y = rectIn.y0 -\/ tile.m\_pos.y;}
\DoxyCodeLine{00559     \textcolor{keywordflow}{if} ((\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}})rasIn \&\& (\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}})rasOut)}
\DoxyCodeLine{00560       directionalBlur<TPixel32>(rasOut, rasIn, blur, p,}
\DoxyCodeLine{00561                                 m\_bidirectional-\/>getValue());}
\DoxyCodeLine{00562     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((\mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}})rasIn \&\& (\mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}})rasOut)}
\DoxyCodeLine{00563       directionalBlur<TPixel64>(rasOut, rasIn, blur, p,}
\DoxyCodeLine{00564                                 m\_bidirectional-\/>getValue());}
\DoxyCodeLine{00565   \}}
\DoxyCodeLine{00566 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_directional_blur_base_fx_a82f73b5781be8bcb93b8b557ac297d39}\label{class_directional_blur_base_fx_a82f73b5781be8bcb93b8b557ac297d39}} 
\index{DirectionalBlurBaseFx@{DirectionalBlurBaseFx}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!DirectionalBlurBaseFx@{DirectionalBlurBaseFx}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool Directional\+Blur\+Base\+Fx\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00475                                                                    \{}
\DoxyCodeLine{00476   \textcolor{keywordflow}{if} (m\_input.isConnected()) \{}
\DoxyCodeLine{00477     \textcolor{keywordtype}{bool} ret = m\_input-\/>doGetBBox(frame, bBox, info);}
\DoxyCodeLine{00478     \textcolor{keywordflow}{if} (m\_spread-\/>getValue()) \{}
\DoxyCodeLine{00479       \mbox{\hyperlink{class_t_point_t}{TPointD}} blur;}
\DoxyCodeLine{00480 }
\DoxyCodeLine{00481       \textcolor{keywordflow}{if} (m\_isMotionBlur)}
\DoxyCodeLine{00482         blur = getBlurVector(frame);}
\DoxyCodeLine{00483       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00484         \textcolor{keywordtype}{double} angle = m\_angle-\/>getValue(frame) * M\_PI\_180;}
\DoxyCodeLine{00485         blur.x       = m\_intensity-\/>getValue(frame) * cos(angle);}
\DoxyCodeLine{00486         blur.y       = m\_intensity-\/>getValue(frame) * sin(angle);}
\DoxyCodeLine{00487       \}}
\DoxyCodeLine{00488 }
\DoxyCodeLine{00489       enlargeDir(bBox, blur, m\_bidirectional-\/>getValue());}
\DoxyCodeLine{00490     \}}
\DoxyCodeLine{00491     \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00492   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00493     bBox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00494     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00495   \}}
\DoxyCodeLine{00496 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_directional_blur_base_fx_a2314a2aeeefe8da21356602645550c7e}\label{class_directional_blur_base_fx_a2314a2aeeefe8da21356602645550c7e}} 
\index{DirectionalBlurBaseFx@{DirectionalBlurBaseFx}!getBlurVector@{getBlurVector}}
\index{getBlurVector@{getBlurVector}!DirectionalBlurBaseFx@{DirectionalBlurBaseFx}}
\doxysubsubsection{\texorpdfstring{getBlurVector()}{getBlurVector()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Directional\+Blur\+Base\+Fx\+::get\+Blur\+Vector (\begin{DoxyParamCaption}\item[{double}]{frame }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00399                                             \{}
\DoxyCodeLine{00400     \mbox{\hyperlink{class_t_point_t}{TPointD}} speed = getAttributes()-\/>getSpeed();}
\DoxyCodeLine{00401     \textcolor{keywordtype}{double} value  = m\_intensity-\/>getValue(frame);}
\DoxyCodeLine{00402     \textcolor{keywordflow}{return} value * speed;}
\DoxyCodeLine{00403   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_directional_blur_base_fx_a0cdf1a5d12768ba1cb17e9af183e47be}\label{class_directional_blur_base_fx_a0cdf1a5d12768ba1cb17e9af183e47be}} 
\index{DirectionalBlurBaseFx@{DirectionalBlurBaseFx}!getMemoryRequirement@{getMemoryRequirement}}
\index{getMemoryRequirement@{getMemoryRequirement}!DirectionalBlurBaseFx@{DirectionalBlurBaseFx}}
\doxysubsubsection{\texorpdfstring{getMemoryRequirement()}{getMemoryRequirement()}}
{\footnotesize\ttfamily int Directional\+Blur\+Base\+Fx\+::get\+Memory\+Requirement (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Specifies the approximate size (in Mega\+Bytes) of the maximum allocation instance that this fx will need to perform in order to render the passed input. This method should be reimplemented in order to make the Toonz rendering process aware of the use of big raster memory chunks, at least. Observe that the passed tile geometry is implicitly {\itshape  already allocated \texorpdfstring{$<$}{<}\textbackslash{}i\texorpdfstring{$>$}{>} for the fx output. ~\newline
The default implementation returns 0, assuming that the passed implicit memory size is passed below in node computation without further allocation of resources. Fxs can reimplement this to -\/1 to explicitly disable the Toonz\textquotesingle{}s smart memory handling. ~\newline
 ~\newline
\begin{DoxyNote}{Note}
The rendering process ensures that the passed render settings are {\itshape handled} by the fx before this function is invoked -\/ do not waste code for it. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRaster\+Fx\+::memory\+Size}} and TRaster\+Fx\+::can\+Handle methods. 
\end{DoxySeeAlso}
}

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_af8eb991c9756f4fb2e48d9f96cbacfba}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00572                                                                              \{}
\DoxyCodeLine{00573   \mbox{\hyperlink{class_t_point_t}{TPointD}} blurVector;}
\DoxyCodeLine{00574   \textcolor{keywordflow}{if} (m\_isMotionBlur) \{}
\DoxyCodeLine{00575     blurVector = getBlurVector(frame);}
\DoxyCodeLine{00576   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00577     \textcolor{keywordtype}{double} angle = m\_angle-\/>getValue(frame) * M\_PI\_180;}
\DoxyCodeLine{00578     blurVector.x = m\_intensity-\/>getValue(frame) * cos(angle);}
\DoxyCodeLine{00579     blurVector.y = m\_intensity-\/>getValue(frame) * sin(angle);}
\DoxyCodeLine{00580   \}}
\DoxyCodeLine{00581 }
\DoxyCodeLine{00582   \textcolor{keyword}{const} \textcolor{keywordtype}{double} limit = 900.0;}
\DoxyCodeLine{00583   blurVector.x       = tcrop(blurVector.x, -\/limit, limit);}
\DoxyCodeLine{00584   blurVector.y       = tcrop(blurVector.y, -\/limit, limit);}
\DoxyCodeLine{00585   \textcolor{keywordtype}{double} shrink      = (info.m\_shrinkX + info.m\_shrinkY) / 2.0;}
\DoxyCodeLine{00586 }
\DoxyCodeLine{00587   \mbox{\hyperlink{class_t_affine}{TAffine}} aff = info.m\_affine;}
\DoxyCodeLine{00588   aff.a13 = aff.a23 = 0;}
\DoxyCodeLine{00589   \mbox{\hyperlink{class_t_point_t}{TPointD}} blur      = (1.0 / shrink) * (aff * blurVector);}
\DoxyCodeLine{00590 }
\DoxyCodeLine{00591   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRasterFx::memorySize}}(rect.enlarge(blur.x, blur.y), info.m\_bpp);}
\DoxyCodeLine{00592 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00560}{TRaster\+Fx\+::memory\+Size()}}.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_directional_blur_base_fx_abb07d50e78cd826c984e7a1b7678a473}\label{class_directional_blur_base_fx_abb07d50e78cd826c984e7a1b7678a473}} 
\index{DirectionalBlurBaseFx@{DirectionalBlurBaseFx}!m\_angle@{m\_angle}}
\index{m\_angle@{m\_angle}!DirectionalBlurBaseFx@{DirectionalBlurBaseFx}}
\doxysubsubsection{\texorpdfstring{m\_angle}{m\_angle}}
{\footnotesize\ttfamily TDouble\+ParamP Directional\+Blur\+Base\+Fx\+::m\+\_\+angle\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_directional_blur_base_fx_aedd212df23c9a7b5e4bcc983901d2e95}\label{class_directional_blur_base_fx_aedd212df23c9a7b5e4bcc983901d2e95}} 
\index{DirectionalBlurBaseFx@{DirectionalBlurBaseFx}!m\_bidirectional@{m\_bidirectional}}
\index{m\_bidirectional@{m\_bidirectional}!DirectionalBlurBaseFx@{DirectionalBlurBaseFx}}
\doxysubsubsection{\texorpdfstring{m\_bidirectional}{m\_bidirectional}}
{\footnotesize\ttfamily TBool\+ParamP Directional\+Blur\+Base\+Fx\+::m\+\_\+bidirectional\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_directional_blur_base_fx_ac9f4f542985f4edcfd6514a5c746968b}\label{class_directional_blur_base_fx_ac9f4f542985f4edcfd6514a5c746968b}} 
\index{DirectionalBlurBaseFx@{DirectionalBlurBaseFx}!m\_input@{m\_input}}
\index{m\_input@{m\_input}!DirectionalBlurBaseFx@{DirectionalBlurBaseFx}}
\doxysubsubsection{\texorpdfstring{m\_input}{m\_input}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} Directional\+Blur\+Base\+Fx\+::m\+\_\+input\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_directional_blur_base_fx_a0b627ad2b9a74864be39c34173182360}\label{class_directional_blur_base_fx_a0b627ad2b9a74864be39c34173182360}} 
\index{DirectionalBlurBaseFx@{DirectionalBlurBaseFx}!m\_intensity@{m\_intensity}}
\index{m\_intensity@{m\_intensity}!DirectionalBlurBaseFx@{DirectionalBlurBaseFx}}
\doxysubsubsection{\texorpdfstring{m\_intensity}{m\_intensity}}
{\footnotesize\ttfamily TDouble\+ParamP Directional\+Blur\+Base\+Fx\+::m\+\_\+intensity\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_directional_blur_base_fx_a67ed8bbbc8c6e9a3c6a3f102dbf38035}\label{class_directional_blur_base_fx_a67ed8bbbc8c6e9a3c6a3f102dbf38035}} 
\index{DirectionalBlurBaseFx@{DirectionalBlurBaseFx}!m\_isMotionBlur@{m\_isMotionBlur}}
\index{m\_isMotionBlur@{m\_isMotionBlur}!DirectionalBlurBaseFx@{DirectionalBlurBaseFx}}
\doxysubsubsection{\texorpdfstring{m\_isMotionBlur}{m\_isMotionBlur}}
{\footnotesize\ttfamily bool Directional\+Blur\+Base\+Fx\+::m\+\_\+is\+Motion\+Blur\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_directional_blur_base_fx_acf18ed8cd987d8004587691e7a4e90df}\label{class_directional_blur_base_fx_acf18ed8cd987d8004587691e7a4e90df}} 
\index{DirectionalBlurBaseFx@{DirectionalBlurBaseFx}!m\_spread@{m\_spread}}
\index{m\_spread@{m\_spread}!DirectionalBlurBaseFx@{DirectionalBlurBaseFx}}
\doxysubsubsection{\texorpdfstring{m\_spread}{m\_spread}}
{\footnotesize\ttfamily TBool\+ParamP Directional\+Blur\+Base\+Fx\+::m\+\_\+spread\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/motionblurfx.\+cpp\end{DoxyCompactItemize}
