\hypertarget{class_t_syntax_1_1_parser}{}\doxysection{TSyntax\+::Parser Class Reference}
\label{class_t_syntax_1_1_parser}\index{TSyntax::Parser@{TSyntax::Parser}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_t_syntax_1_1_parser_1_1_imp}{Imp}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum {\bfseries Syntax\+Status} \{ {\bfseries Correct}
, {\bfseries Incomplete}
, {\bfseries Error}
, {\bfseries Extra\+Ignored}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_syntax_1_1_parser_a3903bd8a0982ac4d50d25d32659ce95f}{Parser}} (const \mbox{\hyperlink{class_t_syntax_1_1_grammar}{Grammar}} $\ast$grammar)
\item 
\mbox{\hyperlink{class_t_syntax_1_1_calculator}{Calculator}} $\ast$ \mbox{\hyperlink{class_t_syntax_1_1_parser_a46375af18777e6fbf717eecc86b84add}{parse}} (std\+::string text)
\item 
bool \mbox{\hyperlink{class_t_syntax_1_1_parser_a0dcc5629472348b1bcd1149c48321a81}{is\+Valid}} () const
\begin{DoxyCompactList}\small\item\em return true if the last parsed string was correct \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_t_syntax_1_1_parser_a8fa7fd76a36fe7abfb48d6f02ae2835c}{has\+Reference}} () const
\begin{DoxyCompactList}\small\item\em return true if the last parsed string was correct \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{class_t_syntax_1_1_parser_a2d84ce82a52141764cbb4a6cdf18b673}{get\+Text}} () const
\begin{DoxyCompactList}\small\item\em return the last parsed string \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{class_t_syntax_1_1_parser_aacf0903af0a830a4bfacbedaa0b7dede}{get\+Error}} () const
\item 
std\+::pair$<$ int, int $>$ \mbox{\hyperlink{class_t_syntax_1_1_parser_a3c31d0181bb5f0d26853aaf85d08db48}{get\+Error\+Pos}} () const
\item 
Syntax\+Status \mbox{\hyperlink{class_t_syntax_1_1_parser_ac7eee6d69aae5eef79c0535d223db537}{check\+Syntax}} (std\+::vector$<$ \mbox{\hyperlink{struct_t_syntax_1_1_syntax_token}{Syntax\+Token}} $>$ \&tokens, std\+::string text)
\item 
void \mbox{\hyperlink{class_t_syntax_1_1_parser_a9e299043e2aaeeaa5fc84403cb5aef3f}{get\+Suggestions}} (Grammar\+::\+Suggestions \&suggestions, std\+::string text)
\item 
std\+::string \mbox{\hyperlink{class_t_syntax_1_1_parser_aca608229e7c4084b2f9afe3a50709a4c}{get\+Current\+Pattern\+String}} (std\+::string text)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{class_t_syntax_1_1_parser_a5c6016c1dc65c9ea977509978c564082}\label{class_t_syntax_1_1_parser_a5c6016c1dc65c9ea977509978c564082}} 
\index{TSyntax::Parser@{TSyntax::Parser}!SyntaxStatus@{SyntaxStatus}}
\index{SyntaxStatus@{SyntaxStatus}!TSyntax::Parser@{TSyntax::Parser}}
\doxysubsubsection{\texorpdfstring{SyntaxStatus}{SyntaxStatus}}
{\footnotesize\ttfamily enum TSyntax\+::\+Parser\+::\+Syntax\+Status}


\begin{DoxyCode}{0}
\DoxyCodeLine{00058 \{ Correct, Incomplete, Error, ExtraIgnored \};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_syntax_1_1_parser_a3903bd8a0982ac4d50d25d32659ce95f}\label{class_t_syntax_1_1_parser_a3903bd8a0982ac4d50d25d32659ce95f}} 
\index{TSyntax::Parser@{TSyntax::Parser}!Parser@{Parser}}
\index{Parser@{Parser}!TSyntax::Parser@{TSyntax::Parser}}
\doxysubsubsection{\texorpdfstring{Parser()}{Parser()}}
{\footnotesize\ttfamily TSyntax\+::\+Parser\+::\+Parser (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_syntax_1_1_grammar}{Grammar}} $\ast$}]{grammar }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00093 : m\_imp(\textcolor{keyword}{new} Imp(grammar)) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_syntax_1_1_parser_a94abe229c5fb907c75ceb7ea6e196b64}\label{class_t_syntax_1_1_parser_a94abe229c5fb907c75ceb7ea6e196b64}} 
\index{TSyntax::Parser@{TSyntax::Parser}!````~Parser@{$\sim$Parser}}
\index{````~Parser@{$\sim$Parser}!TSyntax::Parser@{TSyntax::Parser}}
\doxysubsubsection{\texorpdfstring{$\sim$Parser()}{~Parser()}}
{\footnotesize\ttfamily TSyntax\+::\+Parser\+::$\sim$\+Parser (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00097 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_syntax_1_1_parser_ac7eee6d69aae5eef79c0535d223db537}\label{class_t_syntax_1_1_parser_ac7eee6d69aae5eef79c0535d223db537}} 
\index{TSyntax::Parser@{TSyntax::Parser}!checkSyntax@{checkSyntax}}
\index{checkSyntax@{checkSyntax}!TSyntax::Parser@{TSyntax::Parser}}
\doxysubsubsection{\texorpdfstring{checkSyntax()}{checkSyntax()}}
{\footnotesize\ttfamily Parser\+::\+Syntax\+Status TSyntax\+::\+Parser\+::check\+Syntax (\begin{DoxyParamCaption}\item[{std\+::vector$<$ \mbox{\hyperlink{struct_t_syntax_1_1_syntax_token}{Syntax\+Token}} $>$ \&}]{tokens,  }\item[{std\+::string}]{text }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00271                                                          \{}
\DoxyCodeLine{00272   m\_imp-\/>m\_tokenizer.setBuffer(text);}
\DoxyCodeLine{00273   \textcolor{keywordflow}{if} (m\_imp-\/>m\_tokenizer.eos()) \textcolor{keywordflow}{return} Incomplete;}
\DoxyCodeLine{00274   \textcolor{keywordtype}{bool} ret = m\_imp-\/>parseExpression(\textcolor{keyword}{true});}
\DoxyCodeLine{00275   tokens   = m\_imp-\/>m\_syntaxTokens;}
\DoxyCodeLine{00276   \textcolor{keywordflow}{if} (ret \&\& m\_imp-\/>m\_tokenizer.eos()) \textcolor{keywordflow}{return} Correct;}
\DoxyCodeLine{00277   \textcolor{keywordflow}{if} (tokens.empty()) \textcolor{keywordflow}{return} Incomplete;}
\DoxyCodeLine{00278   SyntaxToken \&lastToken = tokens.back();}
\DoxyCodeLine{00279   \textcolor{keywordflow}{if} (lastToken.m\_type == Eos) \textcolor{keywordflow}{return} Incomplete;}
\DoxyCodeLine{00280 }
\DoxyCodeLine{00281   \textcolor{keywordtype}{int} k = lastToken.m\_pos + lastToken.m\_length;}
\DoxyCodeLine{00282   \textcolor{keywordflow}{if} (k >= (\textcolor{keywordtype}{int})text.length()) \{}
\DoxyCodeLine{00283     \textcolor{keywordflow}{if} (lastToken.m\_type < Unknown) \{}
\DoxyCodeLine{00284       lastToken.m\_type = Unknown;}
\DoxyCodeLine{00285     \}}
\DoxyCodeLine{00286     \textcolor{keywordflow}{return} ExtraIgnored;}
\DoxyCodeLine{00287   \}}
\DoxyCodeLine{00288 }
\DoxyCodeLine{00289   SyntaxToken extraIgnored;}
\DoxyCodeLine{00290   extraIgnored.m\_type   = Unknown;}
\DoxyCodeLine{00291   extraIgnored.m\_pos    = k;}
\DoxyCodeLine{00292   extraIgnored.m\_length = text.length() -\/ k;}
\DoxyCodeLine{00293   tokens.push\_back(extraIgnored);}
\DoxyCodeLine{00294 }
\DoxyCodeLine{00295   \textcolor{keywordflow}{return} Error;}
\DoxyCodeLine{00296 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_syntax_1_1_parser_aca608229e7c4084b2f9afe3a50709a4c}\label{class_t_syntax_1_1_parser_aca608229e7c4084b2f9afe3a50709a4c}} 
\index{TSyntax::Parser@{TSyntax::Parser}!getCurrentPatternString@{getCurrentPatternString}}
\index{getCurrentPatternString@{getCurrentPatternString}!TSyntax::Parser@{TSyntax::Parser}}
\doxysubsubsection{\texorpdfstring{getCurrentPatternString()}{getCurrentPatternString()}}
{\footnotesize\ttfamily std\+::string TSyntax\+::\+Parser\+::get\+Current\+Pattern\+String (\begin{DoxyParamCaption}\item[{std\+::string}]{text }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00311                                                         \{}
\DoxyCodeLine{00312   \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}ohime"{}};}
\DoxyCodeLine{00313 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_syntax_1_1_parser_aacf0903af0a830a4bfacbedaa0b7dede}\label{class_t_syntax_1_1_parser_aacf0903af0a830a4bfacbedaa0b7dede}} 
\index{TSyntax::Parser@{TSyntax::Parser}!getError@{getError}}
\index{getError@{getError}!TSyntax::Parser@{TSyntax::Parser}}
\doxysubsubsection{\texorpdfstring{getError()}{getError()}}
{\footnotesize\ttfamily std\+::string TSyntax\+::\+Parser\+::get\+Error (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

return the last error code (if the last parsed string was correct then returns \char`\"{}\char`\"{}) 
\begin{DoxyCode}{0}
\DoxyCodeLine{00329 \{ \textcolor{keywordflow}{return} m\_imp-\/>m\_errorString; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_syntax_1_1_parser_a3c31d0181bb5f0d26853aaf85d08db48}\label{class_t_syntax_1_1_parser_a3c31d0181bb5f0d26853aaf85d08db48}} 
\index{TSyntax::Parser@{TSyntax::Parser}!getErrorPos@{getErrorPos}}
\index{getErrorPos@{getErrorPos}!TSyntax::Parser@{TSyntax::Parser}}
\doxysubsubsection{\texorpdfstring{getErrorPos()}{getErrorPos()}}
{\footnotesize\ttfamily std\+::pair$<$ int, int $>$ TSyntax\+::\+Parser\+::get\+Error\+Pos (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

if \mbox{\hyperlink{class_t_syntax_1_1_parser_aacf0903af0a830a4bfacbedaa0b7dede}{get\+Error()}} != \char`\"{}\char`\"{} returns the position of the last parsed token the pair contains the indices of the first and the last characters of the token 
\begin{DoxyCode}{0}
\DoxyCodeLine{00333                                             \{}
\DoxyCodeLine{00334   \textcolor{keywordflow}{if} (m\_imp-\/>m\_errorString == \textcolor{stringliteral}{"{}"{}}) \textcolor{keywordflow}{return} std::make\_pair(0, -\/1);}
\DoxyCodeLine{00335   Token token = m\_imp-\/>m\_tokenizer.getToken();}
\DoxyCodeLine{00336   \textcolor{keywordflow}{return} std::make\_pair(token.getPos(), token.getPos1());}
\DoxyCodeLine{00337 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_syntax_1_1_parser_a9e299043e2aaeeaa5fc84403cb5aef3f}\label{class_t_syntax_1_1_parser_a9e299043e2aaeeaa5fc84403cb5aef3f}} 
\index{TSyntax::Parser@{TSyntax::Parser}!getSuggestions@{getSuggestions}}
\index{getSuggestions@{getSuggestions}!TSyntax::Parser@{TSyntax::Parser}}
\doxysubsubsection{\texorpdfstring{getSuggestions()}{getSuggestions()}}
{\footnotesize\ttfamily void TSyntax\+::\+Parser\+::get\+Suggestions (\begin{DoxyParamCaption}\item[{Grammar\+::\+Suggestions \&}]{suggestions,  }\item[{std\+::string}]{text }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00301                                             \{}
\DoxyCodeLine{00302   std::vector<SyntaxToken> tokens;}
\DoxyCodeLine{00303   Parser::SyntaxStatus status = checkSyntax(tokens, text);}
\DoxyCodeLine{00304   suggestions.clear();}
\DoxyCodeLine{00305   \textcolor{keywordflow}{if} (status == Correct || status == Incomplete || status == ExtraIgnored)}
\DoxyCodeLine{00306     m\_imp-\/>m\_grammar-\/>getSuggestions(suggestions, m\_imp-\/>m\_position);}
\DoxyCodeLine{00307 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_syntax_1_1_parser_a2d84ce82a52141764cbb4a6cdf18b673}\label{class_t_syntax_1_1_parser_a2d84ce82a52141764cbb4a6cdf18b673}} 
\index{TSyntax::Parser@{TSyntax::Parser}!getText@{getText}}
\index{getText@{getText}!TSyntax::Parser@{TSyntax::Parser}}
\doxysubsubsection{\texorpdfstring{getText()}{getText()}}
{\footnotesize\ttfamily std\+::string TSyntax\+::\+Parser\+::get\+Text (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



return the last parsed string 


\begin{DoxyCode}{0}
\DoxyCodeLine{00325 \{ \textcolor{keywordflow}{return} m\_imp-\/>m\_tokenizer.getBuffer(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_syntax_1_1_parser_a8fa7fd76a36fe7abfb48d6f02ae2835c}\label{class_t_syntax_1_1_parser_a8fa7fd76a36fe7abfb48d6f02ae2835c}} 
\index{TSyntax::Parser@{TSyntax::Parser}!hasReference@{hasReference}}
\index{hasReference@{hasReference}!TSyntax::Parser@{TSyntax::Parser}}
\doxysubsubsection{\texorpdfstring{hasReference()}{hasReference()}}
{\footnotesize\ttfamily bool TSyntax\+::\+Parser\+::has\+Reference (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



return true if the last parsed string was correct 


\begin{DoxyCode}{0}
\DoxyCodeLine{00321 \{ \textcolor{keywordflow}{return} m\_imp-\/>m\_hasReference; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_syntax_1_1_parser_a0dcc5629472348b1bcd1149c48321a81}\label{class_t_syntax_1_1_parser_a0dcc5629472348b1bcd1149c48321a81}} 
\index{TSyntax::Parser@{TSyntax::Parser}!isValid@{isValid}}
\index{isValid@{isValid}!TSyntax::Parser@{TSyntax::Parser}}
\doxysubsubsection{\texorpdfstring{isValid()}{isValid()}}
{\footnotesize\ttfamily bool TSyntax\+::\+Parser\+::is\+Valid (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



return true if the last parsed string was correct 


\begin{DoxyCode}{0}
\DoxyCodeLine{00317 \{ \textcolor{keywordflow}{return} m\_imp-\/>m\_isValid; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_syntax_1_1_parser_a46375af18777e6fbf717eecc86b84add}\label{class_t_syntax_1_1_parser_a46375af18777e6fbf717eecc86b84add}} 
\index{TSyntax::Parser@{TSyntax::Parser}!parse@{parse}}
\index{parse@{parse}!TSyntax::Parser@{TSyntax::Parser}}
\doxysubsubsection{\texorpdfstring{parse()}{parse()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_syntax_1_1_calculator}{Calculator}} $\ast$ TSyntax\+::\+Parser\+::parse (\begin{DoxyParamCaption}\item[{std\+::string}]{text }\end{DoxyParamCaption})}

parse the input string and create the corresponding calculator (returns 0 if the text contains mistakes) 
\begin{DoxyCode}{0}
\DoxyCodeLine{00237                                         \{}
\DoxyCodeLine{00238   m\_imp-\/>m\_tokenizer.setBuffer(text);}
\DoxyCodeLine{00239   clearPointerContainer(m\_imp-\/>m\_nodeStack);}
\DoxyCodeLine{00240   m\_imp-\/>m\_errorString  = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00241   m\_imp-\/>m\_isValid      = \textcolor{keyword}{false};}
\DoxyCodeLine{00242   m\_imp-\/>m\_hasReference = \textcolor{keyword}{false};}
\DoxyCodeLine{00243   m\_imp-\/>m\_calculator   = \textcolor{keyword}{new} Calculator();}
\DoxyCodeLine{00244   \textcolor{keywordtype}{bool} ret              = m\_imp-\/>parseExpression(\textcolor{keyword}{false});}
\DoxyCodeLine{00245   \textcolor{keywordflow}{if} (ret \&\& !m\_imp-\/>m\_nodeStack.empty()) \{}
\DoxyCodeLine{00246     m\_imp-\/>m\_calculator-\/>setRootNode(m\_imp-\/>m\_nodeStack.back());}
\DoxyCodeLine{00247 }
\DoxyCodeLine{00248     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} node : m\_imp-\/>m\_nodeStack) \{}
\DoxyCodeLine{00249       \textcolor{keywordflow}{if} (node-\/>hasReference()) \{}
\DoxyCodeLine{00250         m\_imp-\/>m\_hasReference = \textcolor{keyword}{true};}
\DoxyCodeLine{00251         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00252       \}}
\DoxyCodeLine{00253     \}}
\DoxyCodeLine{00254 }
\DoxyCodeLine{00255     m\_imp-\/>m\_nodeStack.pop\_back();}
\DoxyCodeLine{00256     m\_imp-\/>m\_isValid = \textcolor{keyword}{true};}
\DoxyCodeLine{00257 }
\DoxyCodeLine{00258   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00259     \textcolor{keyword}{delete} m\_imp-\/>m\_calculator;}
\DoxyCodeLine{00260     m\_imp-\/>m\_calculator = 0;}
\DoxyCodeLine{00261   \}}
\DoxyCodeLine{00262   clearPointerContainer(m\_imp-\/>m\_nodeStack);}
\DoxyCodeLine{00263   Calculator *calculator = m\_imp-\/>m\_calculator;}
\DoxyCodeLine{00264   m\_imp-\/>m\_calculator    = 0;}
\DoxyCodeLine{00265   \textcolor{keywordflow}{return} calculator;}
\DoxyCodeLine{00266 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/tparser.\+h\item 
E\+:/opentoonz/toonz/sources/common/expressions/tparser.\+cpp\end{DoxyCompactItemize}
