\hypertarget{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator}{}\doxysection{tcg\+::Tri\+Mesh\+Stuff\+::Default\+Evaluator\texorpdfstring{$<$}{<} Tri\+Mesh\+\_\+type \texorpdfstring{$>$}{>} Struct Template Reference}
\label{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator}\index{tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$@{tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$}}
Inheritance diagram for tcg\+::Tri\+Mesh\+Stuff\+::Default\+Evaluator\texorpdfstring{$<$}{<} Tri\+Mesh\+\_\+type \texorpdfstring{$>$}{>}\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator_a60637b4d6bbc55a357bda03a675cfa5c}{Default\+Evaluator}} (double collapse\+Value, double split\+Value)
\item 
void \mbox{\hyperlink{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator_ad61c27e1aca7c908729666d0e51b0c10}{action\+Sort}} (const Tri\+Mesh\+\_\+type \&mesh, int e, typename \mbox{\hyperlink{structtcg_1_1_tri_mesh_stuff_1_1_action_evaluator}{Action\+Evaluator}}$<$ Tri\+Mesh\+\_\+type $>$\+::\+Action $\ast$action\+Sequence)
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
double \mbox{\hyperlink{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator_a5227f6aae1526250db6b23b8b9154d29}{m\+\_\+collapse\+Value}}
\item 
double \mbox{\hyperlink{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator_ab0728ad4ae13fb7bd2b7a77b49a91536}{m\+\_\+split\+Value}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$typename Tri\+Mesh\+\_\+type$>$\newline
struct tcg\+::\+Tri\+Mesh\+Stuff\+::\+Default\+Evaluator$<$ Tri\+Mesh\+\_\+type $>$}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator_a60637b4d6bbc55a357bda03a675cfa5c}\label{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator_a60637b4d6bbc55a357bda03a675cfa5c}} 
\index{tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$@{tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$}!DefaultEvaluator@{DefaultEvaluator}}
\index{DefaultEvaluator@{DefaultEvaluator}!tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$@{tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$}}
\doxysubsubsection{\texorpdfstring{DefaultEvaluator()}{DefaultEvaluator()}}
{\footnotesize\ttfamily template$<$typename Tri\+Mesh\+\_\+type $>$ \\
\mbox{\hyperlink{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator}{tcg\+::\+Tri\+Mesh\+Stuff\+::\+Default\+Evaluator}}$<$ Tri\+Mesh\+\_\+type $>$\+::\+Default\+Evaluator (\begin{DoxyParamCaption}\item[{double}]{collapse\+Value,  }\item[{double}]{split\+Value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Sorts actions to achieve near-\/target\+Length edge lengths. Split and collapse actions follow the rules\+:

Collapse if length \texorpdfstring{$<$}{<} collapse\+Value \texorpdfstring{$<$}{<}\begin{DoxyItemize}
\item \texorpdfstring{$>$}{>}  Split if length \texorpdfstring{$>$}{>} split\+Value \texorpdfstring{$<$}{<}\item \texorpdfstring{$>$}{>}\end{DoxyItemize}
\begin{DoxyWarning}{Warning}
The simplification procedure may loop on certain configurations where collapses and splits alternate repeatedly. 
\end{DoxyWarning}

\begin{DoxyCode}{0}
\DoxyCodeLine{00063       : m\_collapseValue(collapseValue), m\_splitValue(splitValue) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator_ad61c27e1aca7c908729666d0e51b0c10}\label{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator_ad61c27e1aca7c908729666d0e51b0c10}} 
\index{tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$@{tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$}!actionSort@{actionSort}}
\index{actionSort@{actionSort}!tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$@{tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$}}
\doxysubsubsection{\texorpdfstring{actionSort()}{actionSort()}}
{\footnotesize\ttfamily template$<$typename Tri\+Mesh\+\_\+type $>$ \\
void \mbox{\hyperlink{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator}{tcg\+::\+Tri\+Mesh\+Stuff\+::\+Default\+Evaluator}}$<$ mesh\+\_\+type $>$\+::action\+Sort (\begin{DoxyParamCaption}\item[{const Tri\+Mesh\+\_\+type \&}]{mesh,  }\item[{int}]{e,  }\item[{typename \mbox{\hyperlink{structtcg_1_1_tri_mesh_stuff_1_1_action_evaluator}{Action\+Evaluator}}$<$ Tri\+Mesh\+\_\+type $>$\+::\+Action $\ast$}]{action\+Sequence }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00266                                                                \{}
\DoxyCodeLine{00267   \textcolor{keyword}{typedef} ActionEvaluator<mesh\_type> ActionEvaluator;}
\DoxyCodeLine{00268 }
\DoxyCodeLine{00269   \textcolor{keywordtype}{int} count = 0;}
\DoxyCodeLine{00270   memset(actionSequence, ActionEvaluator::NONE,}
\DoxyCodeLine{00271          3 * \textcolor{keyword}{sizeof}(\textcolor{keyword}{typename} ActionEvaluator::Action));}
\DoxyCodeLine{00272 }
\DoxyCodeLine{00273   \textcolor{comment}{// Try to minimize the edge length deviation in e's neighbourhood}}
\DoxyCodeLine{00274   \textcolor{keyword}{const} \textcolor{keyword}{typename} mesh\_type::edge\_type \&ed = mesh.edge(e);}
\DoxyCodeLine{00275   \textcolor{keywordtype}{int} f1 = ed.face(0), f2 = ed.face(1);}
\DoxyCodeLine{00276   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_point_t}{TPointD}} *v1, *v2, *v3, *v4;}
\DoxyCodeLine{00277   \textcolor{keywordtype}{double} length[6];}
\DoxyCodeLine{00278 }
\DoxyCodeLine{00279   v1 = \&mesh.vertex(ed.vertex(0)).P();}
\DoxyCodeLine{00280   v2 = \&mesh.vertex(ed.vertex(1)).P();}
\DoxyCodeLine{00281 }
\DoxyCodeLine{00282   length[0]        = norm(*v2 -\/ *v1);}
\DoxyCodeLine{00283   \textcolor{keywordtype}{double} lengthMax = length[0], lengthMin = length[0];}
\DoxyCodeLine{00284 }
\DoxyCodeLine{00285   \textcolor{keywordflow}{if} (f1 >= 0) \{}
\DoxyCodeLine{00286     v3        = \&mesh.vertex(mesh.otherFaceVertex(f1, e)).P();}
\DoxyCodeLine{00287     length[1] = norm(*v3 -\/ *v1);}
\DoxyCodeLine{00288     length[2] = norm(*v3 -\/ *v2);}
\DoxyCodeLine{00289     lengthMax = std::max(\{lengthMax, length[1], length[2]\});}
\DoxyCodeLine{00290     lengthMin = std::min(\{lengthMin, length[1], length[2]\});}
\DoxyCodeLine{00291   \}}
\DoxyCodeLine{00292 }
\DoxyCodeLine{00293   \textcolor{keywordflow}{if} (f2 >= 0) \{}
\DoxyCodeLine{00294     v4        = \&mesh.vertex(mesh.otherFaceVertex(f2, e)).P();}
\DoxyCodeLine{00295     length[3] = norm(*v4 -\/ *v1);}
\DoxyCodeLine{00296     length[4] = norm(*v4 -\/ *v2);}
\DoxyCodeLine{00297     lengthMax = std::max(\{lengthMax, length[3], length[4]\});}
\DoxyCodeLine{00298     lengthMin = std::min(\{lengthMin, length[3], length[4]\});}
\DoxyCodeLine{00299   \}}
\DoxyCodeLine{00300 }
\DoxyCodeLine{00301   \textcolor{keywordflow}{if} (f1 >= 0 \&\& f2 >= 0) \{}
\DoxyCodeLine{00302     \textcolor{comment}{// Build the edge lengths}}
\DoxyCodeLine{00303     length[5] = norm(*v4 -\/ *v3);}
\DoxyCodeLine{00304 }
\DoxyCodeLine{00305     \textcolor{comment}{// Evaluate swap -\/ take the triangles with least maximum mean boundary edge}}
\DoxyCodeLine{00306     \textcolor{keywordtype}{double} m1 = (length[0] + length[1] + length[2]) / 3.0;}
\DoxyCodeLine{00307     \textcolor{keywordtype}{double} m2 = (length[0] + length[3] + length[4]) / 3.0;}
\DoxyCodeLine{00308     \textcolor{keywordtype}{double} m3 = (length[5] + length[1] + length[3]) / 3.0;}
\DoxyCodeLine{00309     \textcolor{keywordtype}{double} m4 = (length[5] + length[2] + length[4]) / 3.0;}
\DoxyCodeLine{00310 }
\DoxyCodeLine{00311     \textcolor{keywordflow}{if} (std::max(m3, m4) < std::max(m1, m2) -\/ 1e-\/5)}
\DoxyCodeLine{00312       actionSequence[count++] = ActionEvaluator::SWAP;}
\DoxyCodeLine{00313 }
\DoxyCodeLine{00314     \textcolor{comment}{// NOTE: The original swap evaluation was about maximizing the minimal face}}
\DoxyCodeLine{00315     \textcolor{comment}{// angle.}}
\DoxyCodeLine{00316     \textcolor{comment}{// However, this requires quite some cross products -\/ the above test is}}
\DoxyCodeLine{00317     \textcolor{comment}{// sufficiently}}
\DoxyCodeLine{00318     \textcolor{comment}{// simple and has a similar behaviour.}}
\DoxyCodeLine{00319 }
\DoxyCodeLine{00320     \textcolor{comment}{// Evaluate collapse}}
\DoxyCodeLine{00321     \textcolor{keywordflow}{if} (length[0] < m\_collapseValue)}
\DoxyCodeLine{00322       actionSequence[count++] = ActionEvaluator::COLLAPSE;}
\DoxyCodeLine{00323   \}}
\DoxyCodeLine{00324 }
\DoxyCodeLine{00325   \textcolor{comment}{// Evaluate split}}
\DoxyCodeLine{00326   \textcolor{keywordflow}{if} (length[0] > m\_splitValue)}
\DoxyCodeLine{00327     actionSequence[count++] = ActionEvaluator::SPLIT;}
\DoxyCodeLine{00328 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator_a5227f6aae1526250db6b23b8b9154d29}\label{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator_a5227f6aae1526250db6b23b8b9154d29}} 
\index{tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$@{tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$}!m\_collapseValue@{m\_collapseValue}}
\index{m\_collapseValue@{m\_collapseValue}!tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$@{tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$}}
\doxysubsubsection{\texorpdfstring{m\_collapseValue}{m\_collapseValue}}
{\footnotesize\ttfamily template$<$typename Tri\+Mesh\+\_\+type $>$ \\
double \mbox{\hyperlink{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator}{tcg\+::\+Tri\+Mesh\+Stuff\+::\+Default\+Evaluator}}$<$ Tri\+Mesh\+\_\+type $>$\+::m\+\_\+collapse\+Value}

\mbox{\Hypertarget{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator_ab0728ad4ae13fb7bd2b7a77b49a91536}\label{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator_ab0728ad4ae13fb7bd2b7a77b49a91536}} 
\index{tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$@{tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$}!m\_splitValue@{m\_splitValue}}
\index{m\_splitValue@{m\_splitValue}!tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$@{tcg::TriMeshStuff::DefaultEvaluator$<$ TriMesh\_type $>$}}
\doxysubsubsection{\texorpdfstring{m\_splitValue}{m\_splitValue}}
{\footnotesize\ttfamily template$<$typename Tri\+Mesh\+\_\+type $>$ \\
double \mbox{\hyperlink{structtcg_1_1_tri_mesh_stuff_1_1_default_evaluator}{tcg\+::\+Tri\+Mesh\+Stuff\+::\+Default\+Evaluator}}$<$ Tri\+Mesh\+\_\+type $>$\+::m\+\_\+split\+Value}



The documentation for this struct was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/tcg/triangulate.\+h\item 
E\+:/opentoonz/toonz/sources/include/tcg/hpp/triangulate.\+hpp\end{DoxyCompactItemize}
