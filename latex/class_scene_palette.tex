\hypertarget{class_scene_palette}{}\doxysection{Scene\+Palette Class Reference}
\label{class_scene_palette}\index{ScenePalette@{ScenePalette}}


{\ttfamily \#include $<$sceneresources.\+h$>$}

Inheritance diagram for Scene\+Palette\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_scene_palette}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_scene_palette_aca6e63f61735779c6ceb188d92761b04}{Scene\+Palette}} (\mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}} $\ast$scene, \mbox{\hyperlink{class_t_xsh_palette_level}{TXsh\+Palette\+Level}} $\ast$pl)
\item 
void \mbox{\hyperlink{class_scene_palette_a5266a572a981ab2cae8c67df6bd392cc}{save}} () override
\item 
void \mbox{\hyperlink{class_scene_palette_a8835136dec30056b746e3518e292702f}{update\+Path}} () override
\item 
void \mbox{\hyperlink{class_scene_palette_a1c6018889f79196cf532c8f2847a95d7}{rollback\+Path}} () override
\item 
void \mbox{\hyperlink{class_scene_palette_ad253fbcd0ce17a60cc065d5c20e205b4}{accept}} (\mbox{\hyperlink{class_resource_processor}{Resource\+Processor}} $\ast$processor) override
\begin{DoxyCompactList}\small\item\em visitor pattern \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_scene_palette_aa74e459f42e2d3cdc843e7ebd57d433e}{is\+Dirty}} () override
\item 
QString\+List \mbox{\hyperlink{class_scene_palette_a5a3ed9ed94fb39e5ad34c1071328b419}{get\+Resource\+Name}} () override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{class_scene_palette}{Scene\+Palette}} class provides a container for scene palette resource and allows its management.

Inherits {\bfseries{\mbox{\hyperlink{class_scene_resource}{Scene\+Resource}}}}. ~\newline
 The class, more than {\bfseries{\mbox{\hyperlink{class_scene_resources}{Scene\+Resources}}}}, contains a pointer to a palette level {\bfseries{\mbox{\hyperlink{class_t_xsh_palette_level}{TXsh\+Palette\+Level}}}}, two path for old save path, one decoded and one no, two path for old scanned path, one decoded and one no. The class allows to save simple level \mbox{\hyperlink{class_scene_palette_a5266a572a981ab2cae8c67df6bd392cc}{save()}} and to update or to restore old path (save and scan) \mbox{\hyperlink{class_scene_palette_a8835136dec30056b746e3518e292702f}{update\+Path()}} \mbox{\hyperlink{class_scene_palette_a1c6018889f79196cf532c8f2847a95d7}{rollback\+Path()}}. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_scene_palette_aca6e63f61735779c6ceb188d92761b04}\label{class_scene_palette_aca6e63f61735779c6ceb188d92761b04}} 
\index{ScenePalette@{ScenePalette}!ScenePalette@{ScenePalette}}
\index{ScenePalette@{ScenePalette}!ScenePalette@{ScenePalette}}
\doxysubsubsection{\texorpdfstring{ScenePalette()}{ScenePalette()}}
{\footnotesize\ttfamily Scene\+Palette\+::\+Scene\+Palette (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}} $\ast$}]{scene,  }\item[{\mbox{\hyperlink{class_t_xsh_palette_level}{TXsh\+Palette\+Level}} $\ast$}]{pl }\end{DoxyParamCaption})}

Constructs \mbox{\hyperlink{class_scene_level}{Scene\+Level}} with {\bfseries{\mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}}}} {\bfseries{scene}} and {\bfseries{\mbox{\hyperlink{class_t_xsh_palette_level}{TXsh\+Palette\+Level}}}} {\bfseries{pl}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00372     : \mbox{\hyperlink{class_scene_resource_a5fad6166777678e8dad0be523c7503ad}{SceneResource}}(scene)}
\DoxyCodeLine{00373     , m\_pl(pl)}
\DoxyCodeLine{00374     , m\_oldPath(pl-\/>\mbox{\hyperlink{class_t_xsh_palette_level_a01ec7fba4a06e19887cf52897388fb8b}{getPath}}())}
\DoxyCodeLine{00375     , m\_oldActualPath(scene-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(pl-\/>\mbox{\hyperlink{class_t_xsh_palette_level_a01ec7fba4a06e19887cf52897388fb8b}{getPath}}())) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_scene_palette_ad253fbcd0ce17a60cc065d5c20e205b4}\label{class_scene_palette_ad253fbcd0ce17a60cc065d5c20e205b4}} 
\index{ScenePalette@{ScenePalette}!accept@{accept}}
\index{accept@{accept}!ScenePalette@{ScenePalette}}
\doxysubsubsection{\texorpdfstring{accept()}{accept()}}
{\footnotesize\ttfamily void Scene\+Palette\+::accept (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_resource_processor}{Resource\+Processor}} $\ast$}]{processor }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



visitor pattern 



Implements \mbox{\hyperlink{class_scene_resource_aaa54723b0eca72e52f75dec6865173ac}{Scene\+Resource}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00156                                                      \{}
\DoxyCodeLine{00157     processor-\/>process(m\_pl);}
\DoxyCodeLine{00158   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_scene_palette_a5a3ed9ed94fb39e5ad34c1071328b419}\label{class_scene_palette_a5a3ed9ed94fb39e5ad34c1071328b419}} 
\index{ScenePalette@{ScenePalette}!getResourceName@{getResourceName}}
\index{getResourceName@{getResourceName}!ScenePalette@{ScenePalette}}
\doxysubsubsection{\texorpdfstring{getResourceName()}{getResourceName()}}
{\footnotesize\ttfamily QString\+List Scene\+Palette\+::get\+Resource\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_scene_resource}{Scene\+Resource}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00414                                           \{}
\DoxyCodeLine{00415   \textcolor{keywordflow}{return} QStringList(QString::fromStdString(m\_pl-\/>\mbox{\hyperlink{class_t_xsh_palette_level_a01ec7fba4a06e19887cf52897388fb8b}{getPath}}().\mbox{\hyperlink{class_t_file_path_a9b256108e6e5ff99f3ba828d4cdbd7ee}{getLevelName}}()));}
\DoxyCodeLine{00416 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_scene_palette_aa74e459f42e2d3cdc843e7ebd57d433e}\label{class_scene_palette_aa74e459f42e2d3cdc843e7ebd57d433e}} 
\index{ScenePalette@{ScenePalette}!isDirty@{isDirty}}
\index{isDirty@{isDirty}!ScenePalette@{ScenePalette}}
\doxysubsubsection{\texorpdfstring{isDirty()}{isDirty()}}
{\footnotesize\ttfamily bool Scene\+Palette\+::is\+Dirty (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_scene_resource}{Scene\+Resource}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00410 \{ \textcolor{keywordflow}{return} m\_pl-\/>\mbox{\hyperlink{class_t_xsh_palette_level_a10f4de1fc40ba426ff7d93f548fae83d}{getPalette}}()-\/>\mbox{\hyperlink{class_t_palette_a4e573ec80c4779bcdb543e4b743a8c34}{getDirtyFlag}}(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_scene_palette_a1c6018889f79196cf532c8f2847a95d7}\label{class_scene_palette_a1c6018889f79196cf532c8f2847a95d7}} 
\index{ScenePalette@{ScenePalette}!rollbackPath@{rollbackPath}}
\index{rollbackPath@{rollbackPath}!ScenePalette@{ScenePalette}}
\doxysubsubsection{\texorpdfstring{rollbackPath()}{rollbackPath()}}
{\footnotesize\ttfamily void Scene\+Palette\+::rollback\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Set simple level path to old path. 

Implements \mbox{\hyperlink{class_scene_resource_a5dffdd4b64e9146207260136f3b9b4b9}{Scene\+Resource}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00406 \{ m\_pl-\/>\mbox{\hyperlink{class_t_xsh_palette_level_a0b093c13c44700fb6413784731648bae}{setPath}}(m\_oldPath); \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00045}{TXsh\+Palette\+Level\+::set\+Path()}}.

\mbox{\Hypertarget{class_scene_palette_a5266a572a981ab2cae8c67df6bd392cc}\label{class_scene_palette_a5266a572a981ab2cae8c67df6bd392cc}} 
\index{ScenePalette@{ScenePalette}!save@{save}}
\index{save@{save}!ScenePalette@{ScenePalette}}
\doxysubsubsection{\texorpdfstring{save()}{save()}}
{\footnotesize\ttfamily void Scene\+Palette\+::save (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Save simple level in right path. 

Implements \mbox{\hyperlink{class_scene_resource_afa8a3313c6ac21337194901a7272eaba}{Scene\+Resource}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00379                         \{}
\DoxyCodeLine{00380   assert(m\_oldPath != \mbox{\hyperlink{class_t_file_path}{TFilePath}}());}
\DoxyCodeLine{00381   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = m\_oldPath;}
\DoxyCodeLine{00382   \mbox{\hyperlink{class_scene_resource_ae3d4cd5a80eb708bbed4f619cb7b1731}{SceneResource::updatePath}}(fp);}
\DoxyCodeLine{00383   \mbox{\hyperlink{class_t_file_path}{TFilePath}} actualFp = m\_scene-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(fp);}
\DoxyCodeLine{00384   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00385     TSystem::touchParentDir(actualFp);}
\DoxyCodeLine{00386     \textcolor{keywordflow}{if} (actualFp != m\_oldActualPath \&\&}
\DoxyCodeLine{00387         TSystem::doesExistFileOrLevel(m\_oldActualPath)) \{}
\DoxyCodeLine{00388       TSystem::copyFile(actualFp, m\_oldActualPath);}
\DoxyCodeLine{00389     \}}
\DoxyCodeLine{00390     m\_pl-\/>\mbox{\hyperlink{class_t_xsh_palette_level_ae735fc3c004f5fc120d9cdc8a96f3a71}{save}}();  \textcolor{comment}{// actualFp non so perche' era cosi'}}
\DoxyCodeLine{00391   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00392     TLogger::error() << \textcolor{stringliteral}{"{}Can't save "{}} << actualFp;}
\DoxyCodeLine{00393   \}}
\DoxyCodeLine{00394 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01231}{Toonz\+Scene\+::decode\+File\+Path()}}, \mbox{\hyperlink{l00101}{TXsh\+Palette\+Level\+::save()}}, and \mbox{\hyperlink{class_scene_resource_ae3d4cd5a80eb708bbed4f619cb7b1731}{Scene\+Resource\+::update\+Path()}}.

\mbox{\Hypertarget{class_scene_palette_a8835136dec30056b746e3518e292702f}\label{class_scene_palette_a8835136dec30056b746e3518e292702f}} 
\index{ScenePalette@{ScenePalette}!updatePath@{updatePath}}
\index{updatePath@{updatePath}!ScenePalette@{ScenePalette}}
\doxysubsubsection{\texorpdfstring{updatePath()}{updatePath()}}
{\footnotesize\ttfamily void Scene\+Palette\+::update\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Update simple level path. 

Implements \mbox{\hyperlink{class_scene_resource_ae3d4cd5a80eb708bbed4f619cb7b1731}{Scene\+Resource}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00398                               \{}
\DoxyCodeLine{00399   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = m\_oldPath;}
\DoxyCodeLine{00400   \mbox{\hyperlink{class_scene_resource_ae3d4cd5a80eb708bbed4f619cb7b1731}{SceneResource::updatePath}}(fp);}
\DoxyCodeLine{00401   \textcolor{keywordflow}{if} (fp != m\_oldPath) m\_pl-\/>\mbox{\hyperlink{class_t_xsh_palette_level_a0b093c13c44700fb6413784731648bae}{setPath}}(fp);}
\DoxyCodeLine{00402 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00045}{TXsh\+Palette\+Level\+::set\+Path()}}, and \mbox{\hyperlink{class_scene_resource_ae3d4cd5a80eb708bbed4f619cb7b1731}{Scene\+Resource\+::update\+Path()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonz/sceneresources.\+h\item 
E\+:/opentoonz/toonz/sources/toonzlib/sceneresources.\+cpp\end{DoxyCompactItemize}
