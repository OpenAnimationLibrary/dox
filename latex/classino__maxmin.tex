\hypertarget{classino__maxmin}{}\doxysection{ino\+\_\+maxmin Class Reference}
\label{classino__maxmin}\index{ino\_maxmin@{ino\_maxmin}}
Inheritance diagram for ino\+\_\+maxmin\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=5.000000cm]{classino__maxmin}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{classino__maxmin_a27f91b011674b5985ff5f819fdff26a1}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
bool \mbox{\hyperlink{classino__maxmin_a2eea588e71a5e37354935e8e13a859a0}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\item 
int \mbox{\hyperlink{classino__maxmin_abbc2c926c8e91a131a6fe56accc0b97d}{get\+Memory\+Requirement}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{classino__maxmin_a32c64310881787e920bb6b507a8ffced}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&rend\+\_\+sets) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classino__maxmin_ae99580be4b7b0b1fdb50c502ba0b238b}\label{classino__maxmin_ae99580be4b7b0b1fdb50c502ba0b238b}} 
\index{ino\_maxmin@{ino\_maxmin}!ino\_maxmin@{ino\_maxmin}}
\index{ino\_maxmin@{ino\_maxmin}!ino\_maxmin@{ino\_maxmin}}
\doxysubsubsection{\texorpdfstring{ino\_maxmin()}{ino\_maxmin()}}
{\footnotesize\ttfamily ino\+\_\+maxmin\+::ino\+\_\+maxmin (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00025       : m\_max\_min\_select(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_enum_param}{TIntEnumParam}}(0, \textcolor{stringliteral}{"{}Max"{}}))}
\DoxyCodeLine{00026       , m\_radius(1.0)}
\DoxyCodeLine{00027       \textcolor{comment}{/*    1mmにしたければ 1.0 * 640. / 12. / 25.4 とする}}
\DoxyCodeLine{00028 \textcolor{comment}{            0.35    = mm = ユーザ指定の初期値}}
\DoxyCodeLine{00029 \textcolor{comment}{            640/12  = 53.33333 = toonz独自の係数 =tunit.cpp参照}}
\DoxyCodeLine{00030 \textcolor{comment}{            25.4    = mm/inch}}
\DoxyCodeLine{00031 \textcolor{comment}{    */}}
\DoxyCodeLine{00032       , m\_polygon\_number(2.0)}
\DoxyCodeLine{00033       , m\_degree(0.0)}
\DoxyCodeLine{00034       , m\_alpha\_rendering(\textcolor{keyword}{true})}
\DoxyCodeLine{00035 }
\DoxyCodeLine{00036       , m\_ref\_mode(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_enum_param}{TIntEnumParam}}()) \{}
\DoxyCodeLine{00037     this-\/>m\_radius-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00038 }
\DoxyCodeLine{00039     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Source"{}}, this-\/>m\_input);}
\DoxyCodeLine{00040     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Reference"{}}, this-\/>m\_refer);}
\DoxyCodeLine{00041 }
\DoxyCodeLine{00042     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}max\_min\_select"{}}, this-\/>m\_max\_min\_select);}
\DoxyCodeLine{00043     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}radius"{}}, this-\/>m\_radius);}
\DoxyCodeLine{00044     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}polygon\_number"{}}, this-\/>m\_polygon\_number);}
\DoxyCodeLine{00045     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}degree"{}}, this-\/>m\_degree);}
\DoxyCodeLine{00046     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}alpha\_rendering"{}}, this-\/>m\_alpha\_rendering);}
\DoxyCodeLine{00047 }
\DoxyCodeLine{00048     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}reference"{}}, this-\/>m\_ref\_mode);}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050     this-\/>m\_max\_min\_select-\/>addItem(1, \textcolor{stringliteral}{"{}Min"{}});}
\DoxyCodeLine{00051     this-\/>m\_radius-\/>setValueRange(0.0, 100.0);}
\DoxyCodeLine{00052     this-\/>m\_polygon\_number-\/>setValueRange(2.0, 16.0);}
\DoxyCodeLine{00053     this-\/>m\_degree-\/>setValueRange(0.0, std::numeric\_limits<double>::max());}
\DoxyCodeLine{00054 }
\DoxyCodeLine{00055     this-\/>m\_ref\_mode-\/>addItem(0, \textcolor{stringliteral}{"{}Red"{}});}
\DoxyCodeLine{00056     this-\/>m\_ref\_mode-\/>addItem(1, \textcolor{stringliteral}{"{}Green"{}});}
\DoxyCodeLine{00057     this-\/>m\_ref\_mode-\/>addItem(2, \textcolor{stringliteral}{"{}Blue"{}});}
\DoxyCodeLine{00058     this-\/>m\_ref\_mode-\/>addItem(3, \textcolor{stringliteral}{"{}Alpha"{}});}
\DoxyCodeLine{00059     this-\/>m\_ref\_mode-\/>addItem(4, \textcolor{stringliteral}{"{}Luminance"{}});}
\DoxyCodeLine{00060     this-\/>m\_ref\_mode-\/>addItem(-\/1, \textcolor{stringliteral}{"{}Nothing"{}});}
\DoxyCodeLine{00061     this-\/>m\_ref\_mode-\/>setDefaultValue(0);}
\DoxyCodeLine{00062     this-\/>m\_ref\_mode-\/>setValue(0);}
\DoxyCodeLine{00063   \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classino__maxmin_a2eea588e71a5e37354935e8e13a859a0}\label{classino__maxmin_a2eea588e71a5e37354935e8e13a859a0}} 
\index{ino\_maxmin@{ino\_maxmin}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!ino\_maxmin@{ino\_maxmin}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool ino\+\_\+maxmin\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00080                                                                      \{}
\DoxyCodeLine{00081     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00082   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classino__maxmin_a32c64310881787e920bb6b507a8ffced}\label{classino__maxmin_a32c64310881787e920bb6b507a8ffced}} 
\index{ino\_maxmin@{ino\_maxmin}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!ino\_maxmin@{ino\_maxmin}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void ino\+\_\+maxmin\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{rend\+\_\+sets }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00148                                                              \{}
\DoxyCodeLine{00149   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 接続していなければ処理しない -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00150   \textcolor{keywordflow}{if} (!this-\/>m\_input.isConnected()) \{}
\DoxyCodeLine{00151     tile.getRaster()-\/>clear(); \textcolor{comment}{/* 塗りつぶしクリア */}}
\DoxyCodeLine{00152     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00153   \}}
\DoxyCodeLine{00154 }
\DoxyCodeLine{00155   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ サポートしていないPixelタイプはエラーを投げる -\/-\/-\/ */}}
\DoxyCodeLine{00156   \textcolor{keywordflow}{if} (!((\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}})tile.getRaster()) \&\& !((\mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}})tile.getRaster())) \{}
\DoxyCodeLine{00157     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_rop_exception}{TRopException}}(\textcolor{stringliteral}{"{}unsupported input pixel type"{}});}
\DoxyCodeLine{00158   \}}
\DoxyCodeLine{00159 }
\DoxyCodeLine{00160   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ Pixel単位で動作パラメータを得る -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00161   \textcolor{keyword}{const} \textcolor{keywordtype}{double} mm2scale\_shrink\_pixel =}
\DoxyCodeLine{00162       ino::pixel\_per\_mm() * sqrt(fabs(rend\_sets.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.det())) /}
\DoxyCodeLine{00163       ((rend\_sets.\mbox{\hyperlink{class_t_render_settings_a52dd41881bbf6aaf953fe300be2e233e}{m\_shrinkX}} + rend\_sets.\mbox{\hyperlink{class_t_render_settings_ae1882f584ce9ffad12ce6bf9ff23814c}{m\_shrinkY}}) / 2.0);}
\DoxyCodeLine{00164 }
\DoxyCodeLine{00165   \textcolor{comment}{/* 動作パラメータを得る */}}
\DoxyCodeLine{00166   \textcolor{keyword}{const} \textcolor{keywordtype}{int} min\_sw    = this-\/>m\_max\_min\_select-\/>getValue();  \textcolor{comment}{// 0,1}}
\DoxyCodeLine{00167   \textcolor{keyword}{const} \textcolor{keywordtype}{double} radius = this-\/>m\_radius-\/>getValue(frame) * mm2scale\_shrink\_pixel;}
\DoxyCodeLine{00168   \textcolor{keyword}{const} \textcolor{keywordtype}{int} npolygon  = this-\/>m\_polygon\_number-\/>getValue(frame);}
\DoxyCodeLine{00169   \textcolor{keyword}{const} \textcolor{keywordtype}{double} degree = this-\/>m\_degree-\/>getValue(frame);}
\DoxyCodeLine{00170   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} alp\_rend\_sw = this-\/>m\_alpha\_rendering-\/>getValue();}
\DoxyCodeLine{00171 }
\DoxyCodeLine{00172   \textcolor{keyword}{const} \textcolor{keywordtype}{int} refer\_mode = this-\/>m\_ref\_mode-\/>getValue();}
\DoxyCodeLine{00173 }
\DoxyCodeLine{00174   \textcolor{comment}{/*    tcomposer(RenderManager)でRenderingするときはthreadは1つ、}}
\DoxyCodeLine{00175 \textcolor{comment}{          toonz(Desktop)でPreview,Outputするなら-\/1を指定}}
\DoxyCodeLine{00176 \textcolor{comment}{          -\/1は自動でthread数を決めCPUを最大に使い高速化 */}}
\DoxyCodeLine{00177   \textcolor{keyword}{const} \textcolor{keywordtype}{int} nthread = -\/1;}
\DoxyCodeLine{00178 }
\DoxyCodeLine{00179   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 参照マージン含めた画像生成 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00180   \textcolor{comment}{/* Rendering画像のBBox値 -\/-\/> Pixel単位のdouble値 */}}
\DoxyCodeLine{00181   \textcolor{comment}{/*    typedef TRectT<double> TRectD;}}
\DoxyCodeLine{00182 \textcolor{comment}{          inline TRectT<double>::TRectT(}}
\DoxyCodeLine{00183 \textcolor{comment}{                  const TPointT<double> \&bottomLeft}}
\DoxyCodeLine{00184 \textcolor{comment}{                  , const TDimensionT<double> \&d}}
\DoxyCodeLine{00185 \textcolor{comment}{          ) : x0(bottomLeft.x)}}
\DoxyCodeLine{00186 \textcolor{comment}{                  , y0(bottomLeft.y)}}
\DoxyCodeLine{00187 \textcolor{comment}{                  , x1(bottomLeft.x+d.lx)}}
\DoxyCodeLine{00188 \textcolor{comment}{                  , y1(bottomLeft.y+d.ly)}}
\DoxyCodeLine{00189 \textcolor{comment}{          \{\}}}
\DoxyCodeLine{00190 \textcolor{comment}{  */}}
\DoxyCodeLine{00191   \mbox{\hyperlink{class_t_rect_t}{TRectD}} enlarge\_rect =}
\DoxyCodeLine{00192       \mbox{\hyperlink{class_t_rect_t}{TRectD}}(tile.m\_pos \textcolor{comment}{/* TPointD */}}
\DoxyCodeLine{00193              ,}
\DoxyCodeLine{00194              \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}}(\textcolor{comment}{/* int -\/-\/> doubleにしてセット */}}
\DoxyCodeLine{00195                          tile.getRaster()-\/>getLx(), tile.getRaster()-\/>getLy()));}
\DoxyCodeLine{00196   \textcolor{comment}{/* BBoxの拡大 Pixel単位 */}}
\DoxyCodeLine{00197   \textcolor{keyword}{const} \textcolor{keywordtype}{int} enlarge\_pixel = (int)(ceil(radius + smoothing\_edge\_) + 0.5);}
\DoxyCodeLine{00198   enlarge\_rect            = enlarge\_rect.enlarge(enlarge\_pixel);}
\DoxyCodeLine{00199 }
\DoxyCodeLine{00200   \textcolor{comment}{/*    void TRasterFx::allocateAndCompute(}}
\DoxyCodeLine{00201 \textcolor{comment}{                  TTile \&tile,}}
\DoxyCodeLine{00202 \textcolor{comment}{                  const TPointD \&pos, const TDimension \&size,}}
\DoxyCodeLine{00203 \textcolor{comment}{                  const TRasterP \&templateRas, double frame,}}
\DoxyCodeLine{00204 \textcolor{comment}{                  const TRenderSettings \&info}}
\DoxyCodeLine{00205 \textcolor{comment}{          ) \{}}
\DoxyCodeLine{00206 \textcolor{comment}{                  if (templateRas) \{}}
\DoxyCodeLine{00207 \textcolor{comment}{          tile.getRaster() = templateRas-\/>create(size.lx, size.ly);}}
\DoxyCodeLine{00208 \textcolor{comment}{                  \} else \{}}
\DoxyCodeLine{00209 \textcolor{comment}{          tile.getRaster() = TRaster32P(size.lx, size.ly);}}
\DoxyCodeLine{00210 \textcolor{comment}{                  \}}}
\DoxyCodeLine{00211 \textcolor{comment}{          tile.m\_pos = pos;}}
\DoxyCodeLine{00212 \textcolor{comment}{                  compute(tile, frame, info);}}
\DoxyCodeLine{00213 \textcolor{comment}{          \}}}
\DoxyCodeLine{00214 \textcolor{comment}{  */}}
\DoxyCodeLine{00215   \mbox{\hyperlink{class_t_tile}{TTile}} enlarge\_tile;}
\DoxyCodeLine{00216   this-\/>m\_input-\/>allocateAndCompute(}
\DoxyCodeLine{00217       enlarge\_tile, enlarge\_rect.getP00(),}
\DoxyCodeLine{00218       \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}}(\textcolor{comment}{/* Pixel単位のdouble -\/> intにしてセット */}}
\DoxyCodeLine{00219                   (\textcolor{keywordtype}{int})(enlarge\_rect.getLx() + 0.5),}
\DoxyCodeLine{00220                   (\textcolor{keywordtype}{int})(enlarge\_rect.getLy() + 0.5)),}
\DoxyCodeLine{00221       tile.getRaster(), frame, rend\_sets);}
\DoxyCodeLine{00222 }
\DoxyCodeLine{00223   \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/ 参照画像生成 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00224   \mbox{\hyperlink{class_t_tile}{TTile}} refer\_tile;}
\DoxyCodeLine{00225   \textcolor{keywordtype}{bool} refer\_sw = \textcolor{keyword}{false};}
\DoxyCodeLine{00226   \textcolor{keywordflow}{if} (this-\/>m\_refer.isConnected()) \{}
\DoxyCodeLine{00227     refer\_sw = \textcolor{keyword}{true};}
\DoxyCodeLine{00228     this-\/>m\_refer-\/>allocateAndCompute(}
\DoxyCodeLine{00229         refer\_tile, enlarge\_tile.m\_pos,}
\DoxyCodeLine{00230         \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}}(\textcolor{comment}{/* Pixel単位 */}}
\DoxyCodeLine{00231                     enlarge\_tile.getRaster()-\/>getLx(),}
\DoxyCodeLine{00232                     enlarge\_tile.getRaster()-\/>getLy()),}
\DoxyCodeLine{00233         enlarge\_tile.getRaster(), frame, rend\_sets);}
\DoxyCodeLine{00234   \}}
\DoxyCodeLine{00235   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 保存すべき画像メモリを塗りつぶしクリア -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00236   tile.getRaster()-\/>clear(); \textcolor{comment}{/* 塗りつぶしクリア */}}
\DoxyCodeLine{00237 }
\DoxyCodeLine{00238   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ (app\_begin)log記憶 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00239   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} log\_sw = ino::log\_enable\_sw();}
\DoxyCodeLine{00240 }
\DoxyCodeLine{00241   \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00242     std::ostringstream os;}
\DoxyCodeLine{00243     os << \textcolor{stringliteral}{"{}params"{}}}
\DoxyCodeLine{00244        << \textcolor{stringliteral}{"{}  min\_sw "{}} << min\_sw << \textcolor{stringliteral}{"{}  radius "{}} << radius << \textcolor{stringliteral}{"{}  npolygon "{}}}
\DoxyCodeLine{00245        << npolygon << \textcolor{stringliteral}{"{}  degree "{}} << degree << \textcolor{stringliteral}{"{}  alp\_rend\_sw "{}} << alp\_rend\_sw}
\DoxyCodeLine{00246        << \textcolor{stringliteral}{"{}  smoothing\_edge "{}} << smoothing\_edge\_ << \textcolor{stringliteral}{"{}  nthread "{}} << nthread}
\DoxyCodeLine{00247        << \textcolor{stringliteral}{"{}  refer\_mode "{}} << refer\_mode << \textcolor{stringliteral}{"{}   tile w "{}}}
\DoxyCodeLine{00248        << tile.getRaster()-\/>getLx() << \textcolor{stringliteral}{"{}  h "{}} << tile.getRaster()-\/>getLy()}
\DoxyCodeLine{00249        << \textcolor{stringliteral}{"{}  pixbits "{}} << ino::pixel\_bits(tile.getRaster()) << \textcolor{stringliteral}{"{}   frame "{}}}
\DoxyCodeLine{00250        << frame << \textcolor{stringliteral}{"{}   rand\_sets affine\_det "{}} << rend\_sets.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.det()}
\DoxyCodeLine{00251        << \textcolor{stringliteral}{"{}  shrink x "{}} << rend\_sets.\mbox{\hyperlink{class_t_render_settings_a52dd41881bbf6aaf953fe300be2e233e}{m\_shrinkX}} << \textcolor{stringliteral}{"{}  y "{}} << rend\_sets.\mbox{\hyperlink{class_t_render_settings_ae1882f584ce9ffad12ce6bf9ff23814c}{m\_shrinkY}};}
\DoxyCodeLine{00252     \textcolor{keywordflow}{if} (refer\_sw) \{}
\DoxyCodeLine{00253       os << \textcolor{stringliteral}{"{}  refer\_tile.m\_pos "{}} << refer\_tile.m\_pos << \textcolor{stringliteral}{"{}  refer\_tile\_getLx "{}}}
\DoxyCodeLine{00254          << refer\_tile.getRaster()-\/>getLx() << \textcolor{stringliteral}{"{}  y "{}}}
\DoxyCodeLine{00255          << refer\_tile.getRaster()-\/>getLy();}
\DoxyCodeLine{00256     \}}
\DoxyCodeLine{00257   \}}
\DoxyCodeLine{00258   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ fx処理 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00259   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00260     tile.getRaster()-\/>lock();}
\DoxyCodeLine{00261     enlarge\_tile.getRaster()-\/>lock();}
\DoxyCodeLine{00262     \textcolor{keywordflow}{if} (refer\_tile.getRaster() != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{00263       refer\_tile.getRaster()-\/>lock();}
\DoxyCodeLine{00264     \}}
\DoxyCodeLine{00265     fx\_(enlarge\_tile.getRaster()  \textcolor{comment}{// in with margin}}
\DoxyCodeLine{00266         ,}
\DoxyCodeLine{00267         enlarge\_pixel  \textcolor{comment}{// margin}}
\DoxyCodeLine{00268         ,}
\DoxyCodeLine{00269         tile.getRaster()  \textcolor{comment}{// out with no margin}}
\DoxyCodeLine{00270 }
\DoxyCodeLine{00271         ,}
\DoxyCodeLine{00272         refer\_tile.getRaster(), refer\_mode}
\DoxyCodeLine{00273 }
\DoxyCodeLine{00274         ,}
\DoxyCodeLine{00275         min\_sw, radius, smoothing\_edge\_, npolygon, degree, alp\_rend\_sw}
\DoxyCodeLine{00276 }
\DoxyCodeLine{00277         ,}
\DoxyCodeLine{00278         nthread);}
\DoxyCodeLine{00279     \textcolor{keywordflow}{if} (refer\_tile.getRaster() != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{00280       refer\_tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00281     \}}
\DoxyCodeLine{00282     enlarge\_tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00283     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00284   \}}
\DoxyCodeLine{00285   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ error処理 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00286   \textcolor{keywordflow}{catch} (std::bad\_alloc \&e) \{}
\DoxyCodeLine{00287     \textcolor{keywordflow}{if} (refer\_tile.getRaster() != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{00288       refer\_tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00289     \}}
\DoxyCodeLine{00290     enlarge\_tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00291     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00292     \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00293       std::string str(\textcolor{stringliteral}{"{}std::bad\_alloc <"{}});}
\DoxyCodeLine{00294       str += e.what();}
\DoxyCodeLine{00295       str += \textcolor{charliteral}{'>'};}
\DoxyCodeLine{00296     \}}
\DoxyCodeLine{00297     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00298   \} \textcolor{keywordflow}{catch} (std::exception \&e) \{}
\DoxyCodeLine{00299     \textcolor{keywordflow}{if} (refer\_tile.getRaster() != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{00300       refer\_tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00301     \}}
\DoxyCodeLine{00302     enlarge\_tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00303     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00304     \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00305       std::string str(\textcolor{stringliteral}{"{}exception <"{}});}
\DoxyCodeLine{00306       str += e.what();}
\DoxyCodeLine{00307       str += \textcolor{charliteral}{'>'};}
\DoxyCodeLine{00308     \}}
\DoxyCodeLine{00309     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00310   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00311     \textcolor{keywordflow}{if} (refer\_tile.getRaster() != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{00312       refer\_tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00313     \}}
\DoxyCodeLine{00314     enlarge\_tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00315     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00316     \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00317       std::string str(\textcolor{stringliteral}{"{}other exception"{}});}
\DoxyCodeLine{00318     \}}
\DoxyCodeLine{00319     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00320   \}}
\DoxyCodeLine{00321 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classino__maxmin_a27f91b011674b5985ff5f819fdff26a1}\label{classino__maxmin_a27f91b011674b5985ff5f819fdff26a1}} 
\index{ino\_maxmin@{ino\_maxmin}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!ino\_maxmin@{ino\_maxmin}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool ino\+\_\+maxmin\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00065                                                        \{}
\DoxyCodeLine{00066     \textcolor{keywordflow}{if} (this-\/>m\_input.isConnected()) \{}
\DoxyCodeLine{00067       \textcolor{keyword}{const} \textcolor{keywordtype}{bool} ret = this-\/>m\_input-\/>doGetBBox(frame, bBox, info);}
\DoxyCodeLine{00068       \textcolor{keyword}{const} \textcolor{keywordtype}{double} margin =}
\DoxyCodeLine{00069           ceil(ino::pixel\_per\_mm() *}
\DoxyCodeLine{00070                (this-\/>m\_radius-\/>getValue(frame) + smoothing\_edge\_));}
\DoxyCodeLine{00071       \textcolor{keywordflow}{if} (0.0 < margin) \{}
\DoxyCodeLine{00072         bBox = bBox.enlarge(margin);}
\DoxyCodeLine{00073       \}}
\DoxyCodeLine{00074       \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00075     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00076       bBox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00077       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00078     \}}
\DoxyCodeLine{00079   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classino__maxmin_abbc2c926c8e91a131a6fe56accc0b97d}\label{classino__maxmin_abbc2c926c8e91a131a6fe56accc0b97d}} 
\index{ino\_maxmin@{ino\_maxmin}!getMemoryRequirement@{getMemoryRequirement}}
\index{getMemoryRequirement@{getMemoryRequirement}!ino\_maxmin@{ino\_maxmin}}
\doxysubsubsection{\texorpdfstring{getMemoryRequirement()}{getMemoryRequirement()}}
{\footnotesize\ttfamily int ino\+\_\+maxmin\+::get\+Memory\+Requirement (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Specifies the approximate size (in Mega\+Bytes) of the maximum allocation instance that this fx will need to perform in order to render the passed input. This method should be reimplemented in order to make the Toonz rendering process aware of the use of big raster memory chunks, at least. Observe that the passed tile geometry is implicitly {\itshape  already allocated \texorpdfstring{$<$}{<}\textbackslash{}i\texorpdfstring{$>$}{>} for the fx output. ~\newline
The default implementation returns 0, assuming that the passed implicit memory size is passed below in node computation without further allocation of resources. Fxs can reimplement this to -\/1 to explicitly disable the Toonz\textquotesingle{}s smart memory handling. ~\newline
 ~\newline
\begin{DoxyNote}{Note}
The rendering process ensures that the passed render settings are {\itshape handled} by the fx before this function is invoked -\/ do not waste code for it. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRaster\+Fx\+::memory\+Size}} and TRaster\+Fx\+::can\+Handle methods. 
\end{DoxySeeAlso}
}

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_af8eb991c9756f4fb2e48d9f96cbacfba}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00084                                                                  \{}
\DoxyCodeLine{00085     \textcolor{keyword}{const} \textcolor{keywordtype}{double} radius = (this-\/>m\_radius-\/>getValue(frame) + smoothing\_edge\_) *}
\DoxyCodeLine{00086                           ino::pixel\_per\_mm() *}
\DoxyCodeLine{00087                           sqrt(fabs(info.m\_affine.det())) /}
\DoxyCodeLine{00088                           ((info.m\_shrinkX + info.m\_shrinkY) / 2.0);}
\DoxyCodeLine{00089     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRasterFx::memorySize}}(rect.enlarge(ceil(radius) + 0.5), info.m\_bpp);}
\DoxyCodeLine{00090   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00560}{TRaster\+Fx\+::memory\+Size()}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/ino\+\_\+maxmin.\+cpp\end{DoxyCompactItemize}
