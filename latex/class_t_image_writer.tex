\hypertarget{class_t_image_writer}{}\doxysection{TImage\+Writer Class Reference}
\label{class_t_image_writer}\index{TImageWriter@{TImageWriter}}


{\ttfamily \#include $<$timage\+\_\+io.\+h$>$}

Inheritance diagram for TImage\+Writer\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=12.000000cm]{class_t_image_writer}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_image_writer_a67d0fcf0d9468eb98ac89b92a05caaaa}{TImage\+Writer}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path)
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_t_image_writer_ab72fe2f6e5146e0b884cd65c147187ed}{get\+File\+Path}} () const
\item 
void \mbox{\hyperlink{class_t_image_writer_a6e998c4f99b997c866c63242fbf0e53a}{set\+Properties}} (const \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$)
\item 
virtual void \mbox{\hyperlink{class_t_image_writer_ae17459b8740dd0eac8f6ec03af7b9bec}{save}} (const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \&img)
\item 
virtual bool \mbox{\hyperlink{class_t_image_writer_a332a196f14d97a872352bc67ae296a24}{is64bit\+Output\+Supported}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{class_t_image_writer_a432a657efaf9029af199c866fda2eb26}{save}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&, \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}})
\item 
static void \mbox{\hyperlink{class_t_image_writer_ad8cb6a5c4c8268fd0ff8f5c3a42bf0ce}{save}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&, const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \&)
\item 
static void \mbox{\hyperlink{class_t_image_writer_a423f3985b433c8f4edb90660583707f6}{get\+Supported\+Formats}} (QString\+List \&names, bool only\+Render\+Formats)
\item 
static void \mbox{\hyperlink{class_t_image_writer_a6d373bd5d38ab0d2a1668772c54be2f7}{define}} (QString extension, TImage\+Writer\+Create\+Proc $\ast$proc, bool is\+Render\+Format)
\item 
static void \mbox{\hyperlink{class_t_image_writer_acd426b5d23d0b419e11301e869f2a1fc}{set\+Background\+Color}} (TPixel32 color)
\item 
static TPixel32 \mbox{\hyperlink{class_t_image_writer_a6df9a96b64921b94d3900983d7e8d42f}{get\+Background\+Color}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_t_image_writer_ae33eb40b43d11fcfc1c04ad3ef2473b9}{m\+\_\+path}}
\item 
\mbox{\hyperlink{class_tiio_1_1_writer}{Tiio\+::\+Writer}} $\ast$ \mbox{\hyperlink{class_t_image_writer_a4475598961c92892c7e0598db77eebcc}{m\+\_\+writer}}
\item 
\mbox{\hyperlink{class_tiio_1_1_vector_writer}{Tiio\+::\+Vector\+Writer}} $\ast$ \mbox{\hyperlink{class_t_image_writer_ab6cd0b4157da175a046d3659f075bf0a}{m\+\_\+vector\+Writer}}
\item 
\mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ \mbox{\hyperlink{class_t_image_writer_a4c5151730eea158d36ebf3ec2e018c07}{m\+\_\+properties}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}

\begin{DoxyCodeInclude}{0}

\end{DoxyCodeInclude}
 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_image_writer_a67d0fcf0d9468eb98ac89b92a05caaaa}\label{class_t_image_writer_a67d0fcf0d9468eb98ac89b92a05caaaa}} 
\index{TImageWriter@{TImageWriter}!TImageWriter@{TImageWriter}}
\index{TImageWriter@{TImageWriter}!TImageWriter@{TImageWriter}}
\doxysubsubsection{\texorpdfstring{TImageWriter()}{TImageWriter()}}
{\footnotesize\ttfamily TImage\+Writer\+::\+TImage\+Writer (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00510     : \mbox{\hyperlink{class_t_smart_object}{TSmartObject}}(m\_classCode)}
\DoxyCodeLine{00511     , m\_path(path)}
\DoxyCodeLine{00512     , m\_writer(0)}
\DoxyCodeLine{00513     , m\_vectorWriter(0)}
\DoxyCodeLine{00514     , m\_properties(0) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_writer_a65cd9a3ec3d3da0a4da621102b9e2b48}\label{class_t_image_writer_a65cd9a3ec3d3da0a4da621102b9e2b48}} 
\index{TImageWriter@{TImageWriter}!````~TImageWriter@{$\sim$TImageWriter}}
\index{````~TImageWriter@{$\sim$TImageWriter}!TImageWriter@{TImageWriter}}
\doxysubsubsection{\texorpdfstring{$\sim$TImageWriter()}{~TImageWriter()}}
{\footnotesize\ttfamily TImage\+Writer\+::$\sim$\+TImage\+Writer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00518                             \{}
\DoxyCodeLine{00519   \textcolor{keyword}{delete} m\_writer;}
\DoxyCodeLine{00520   \textcolor{keyword}{delete} m\_vectorWriter;}
\DoxyCodeLine{00521   \textcolor{keyword}{delete} m\_properties;}
\DoxyCodeLine{00522 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_image_writer_a6d373bd5d38ab0d2a1668772c54be2f7}\label{class_t_image_writer_a6d373bd5d38ab0d2a1668772c54be2f7}} 
\index{TImageWriter@{TImageWriter}!define@{define}}
\index{define@{define}!TImageWriter@{TImageWriter}}
\doxysubsubsection{\texorpdfstring{define()}{define()}}
{\footnotesize\ttfamily void TImage\+Writer\+::define (\begin{DoxyParamCaption}\item[{QString}]{extension,  }\item[{TImage\+Writer\+Create\+Proc $\ast$}]{proc,  }\item[{bool}]{is\+Render\+Format }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00788                                                \{}
\DoxyCodeLine{00789   ImageWriterTable[extension] =}
\DoxyCodeLine{00790       std::pair<TImageWriterCreateProc *, bool>(proc, isRenderFormat);}
\DoxyCodeLine{00791 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_writer_a6df9a96b64921b94d3900983d7e8d42f}\label{class_t_image_writer_a6df9a96b64921b94d3900983d7e8d42f}} 
\index{TImageWriter@{TImageWriter}!getBackgroundColor@{getBackgroundColor}}
\index{getBackgroundColor@{getBackgroundColor}!TImageWriter@{TImageWriter}}
\doxysubsubsection{\texorpdfstring{getBackgroundColor()}{getBackgroundColor()}}
{\footnotesize\ttfamily TPixel32 TImage\+Writer\+::get\+Background\+Color (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00773 \{ \textcolor{keywordflow}{return} m\_backgroundColor; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_writer_ab72fe2f6e5146e0b884cd65c147187ed}\label{class_t_image_writer_ab72fe2f6e5146e0b884cd65c147187ed}} 
\index{TImageWriter@{TImageWriter}!getFilePath@{getFilePath}}
\index{getFilePath@{getFilePath}!TImageWriter@{TImageWriter}}
\doxysubsubsection{\texorpdfstring{getFilePath()}{getFilePath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} TImage\+Writer\+::get\+File\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00230 \{ \textcolor{keywordflow}{return} m\_path; \};}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_writer_a423f3985b433c8f4edb90660583707f6}\label{class_t_image_writer_a423f3985b433c8f4edb90660583707f6}} 
\index{TImageWriter@{TImageWriter}!getSupportedFormats@{getSupportedFormats}}
\index{getSupportedFormats@{getSupportedFormats}!TImageWriter@{TImageWriter}}
\doxysubsubsection{\texorpdfstring{getSupportedFormats()}{getSupportedFormats()}}
{\footnotesize\ttfamily void TImage\+Writer\+::get\+Supported\+Formats (\begin{DoxyParamCaption}\item[{QString\+List \&}]{names,  }\item[{bool}]{only\+Render\+Formats }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00806                                                               \{}
\DoxyCodeLine{00807   \textcolor{keywordflow}{for} (std::map<QString, std::pair<TImageWriterCreateProc *, bool>>::iterator}
\DoxyCodeLine{00808            it = ImageWriterTable.begin();}
\DoxyCodeLine{00809        it != ImageWriterTable.end(); ++it) \{}
\DoxyCodeLine{00810     \textcolor{keywordflow}{if} (!onlyRenderFormat || it-\/>second.second) names.push\_back(it-\/>first);}
\DoxyCodeLine{00811   \}}
\DoxyCodeLine{00812 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_writer_a332a196f14d97a872352bc67ae296a24}\label{class_t_image_writer_a332a196f14d97a872352bc67ae296a24}} 
\index{TImageWriter@{TImageWriter}!is64bitOutputSupported@{is64bitOutputSupported}}
\index{is64bitOutputSupported@{is64bitOutputSupported}!TImageWriter@{TImageWriter}}
\doxysubsubsection{\texorpdfstring{is64bitOutputSupported()}{is64bitOutputSupported()}}
{\footnotesize\ttfamily virtual bool TImage\+Writer\+::is64bit\+Output\+Supported (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00236 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_writer_ad8cb6a5c4c8268fd0ff8f5c3a42bf0ce}\label{class_t_image_writer_ad8cb6a5c4c8268fd0ff8f5c3a42bf0ce}} 
\index{TImageWriter@{TImageWriter}!save@{save}}
\index{save@{save}!TImageWriter@{TImageWriter}}
\doxysubsubsection{\texorpdfstring{save()}{save()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily void TImage\+Writer\+::save (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path,  }\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \&}]{image }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00759                                                                    \{}
\DoxyCodeLine{00760   \mbox{\hyperlink{class_t_image_writer_p}{TImageWriterP}}(path)-\/>save(image);}
\DoxyCodeLine{00761 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_writer_a432a657efaf9029af199c866fda2eb26}\label{class_t_image_writer_a432a657efaf9029af199c866fda2eb26}} 
\index{TImageWriter@{TImageWriter}!save@{save}}
\index{save@{save}!TImageWriter@{TImageWriter}}
\doxysubsubsection{\texorpdfstring{save()}{save()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily void TImage\+Writer\+::save (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path,  }\item[{\mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}}}]{raster }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00752                                                               \{}
\DoxyCodeLine{00753   \mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} rasImage(raster);}
\DoxyCodeLine{00754   \mbox{\hyperlink{class_t_image_writer_p}{TImageWriterP}}(path)-\/>save(\mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}(rasImage));}
\DoxyCodeLine{00755 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_writer_ae17459b8740dd0eac8f6ec03af7b9bec}\label{class_t_image_writer_ae17459b8740dd0eac8f6ec03af7b9bec}} 
\index{TImageWriter@{TImageWriter}!save@{save}}
\index{save@{save}!TImageWriter@{TImageWriter}}
\doxysubsubsection{\texorpdfstring{save()}{save()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily void TImage\+Writer\+::save (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \&}]{img }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00560                                           \{}
\DoxyCodeLine{00561   \textcolor{keyword}{const} std::string \&type = toLower(m\_path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}());}
\DoxyCodeLine{00562 }
\DoxyCodeLine{00563   \mbox{\hyperlink{class_tiio_1_1_writer}{Tiio::Writer}} *writer = Tiio::makeWriter(type);}
\DoxyCodeLine{00564   \textcolor{keywordflow}{if} (!writer)}
\DoxyCodeLine{00565     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_image_exception}{TImageException}}(m\_path, \textcolor{stringliteral}{"{}unsupported format for raster images"{}});}
\DoxyCodeLine{00566 }
\DoxyCodeLine{00567   writer-\/>setProperties(m\_properties);}
\DoxyCodeLine{00568 }
\DoxyCodeLine{00569   FILE *file = fopen(m\_path, \textcolor{stringliteral}{"{}wb"{}});}
\DoxyCodeLine{00570   \textcolor{keywordflow}{if} (file == NULL) \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_image_exception}{TImageException}}(m\_path, \textcolor{stringliteral}{"{}Can't write file"{}});}
\DoxyCodeLine{00571 }
\DoxyCodeLine{00572   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} ri = img) \{}
\DoxyCodeLine{00573     \mbox{\hyperlink{class_t_image_info}{TImageInfo}} info;}
\DoxyCodeLine{00574     \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} ras;}
\DoxyCodeLine{00575 }
\DoxyCodeLine{00576     \mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}} rasGr = ri-\/>getRaster();}
\DoxyCodeLine{00577     \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} ras32  = ri-\/>getRaster();}
\DoxyCodeLine{00578     \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} ras64  = ri-\/>getRaster();}
\DoxyCodeLine{00579 }
\DoxyCodeLine{00580     \mbox{\hyperlink{class_t_enum_property}{TEnumProperty}} *p =}
\DoxyCodeLine{00581         m\_properties}
\DoxyCodeLine{00582             ? (\mbox{\hyperlink{class_t_enum_property}{TEnumProperty}} *)m\_properties-\/>\mbox{\hyperlink{class_t_property_group_afb08f3145e5f77da6f163cdc9decad2f}{getProperty}}(\textcolor{stringliteral}{"{}Bits Per Pixel"{}})}
\DoxyCodeLine{00583             : 0;}
\DoxyCodeLine{00584 }
\DoxyCodeLine{00585     \textcolor{keywordflow}{if} (p \&\& ri-\/>isScanBW()) \{}
\DoxyCodeLine{00586       \textcolor{keyword}{const} std::vector<std::wstring> \&range = p-\/>getRange();}
\DoxyCodeLine{00587       p-\/>setValue(range[2]);  \textcolor{comment}{// Horrible. See tiio\_tif.cpp (732 or near) -\/.-\/'}}
\DoxyCodeLine{00588     \}}
\DoxyCodeLine{00589 }
\DoxyCodeLine{00590     \textcolor{keywordtype}{int} bpp = p ? std::stoi(p-\/>getValue()) : 32;}
\DoxyCodeLine{00591 }
\DoxyCodeLine{00592     \textcolor{comment}{//  bpp       1  8  16 24 32 40  48 56  64}}
\DoxyCodeLine{00593     \textcolor{keywordtype}{int} spp[] = \{}
\DoxyCodeLine{00594         1, 1, 1, 4, 4,}
\DoxyCodeLine{00595         0, 4, 0, 4\};  \textcolor{comment}{// 0s are for pixel sizes which are normally unsupported}}
\DoxyCodeLine{00596     \textcolor{keywordtype}{int} bps[] = \{}
\DoxyCodeLine{00597         1, 8,  16, 8, 8,}
\DoxyCodeLine{00598         0, 16, 0,  16\};  \textcolor{comment}{// by image formats, let alone by Toonz raster ones.}}
\DoxyCodeLine{00599     \textcolor{comment}{// The 24 and 48 cases get automatically promoted to 32 and 64.}}
\DoxyCodeLine{00600     \textcolor{keywordtype}{int} bypp = bpp / 8;}
\DoxyCodeLine{00601     assert(bypp < boost::size(spp) \&\& spp[bypp] \&\& bps[bypp]);}
\DoxyCodeLine{00602 }
\DoxyCodeLine{00603     info.m\_samplePerPixel = spp[bypp];}
\DoxyCodeLine{00604     info.m\_bitsPerSample  = bps[bypp];}
\DoxyCodeLine{00605 }
\DoxyCodeLine{00606     \textcolor{keywordflow}{if} (rasGr) \{}
\DoxyCodeLine{00607       \textcolor{keywordflow}{if} (bypp < 2)   \textcolor{comment}{// Seems 16 bit greymaps are not handled... why?}}
\DoxyCodeLine{00608         ras = rasGr;  \textcolor{comment}{// we do have a Toonz raster for those...    >:|}}
\DoxyCodeLine{00609       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00610         convertForWriting(ras, rasGr, bpp);}
\DoxyCodeLine{00611     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ras32) \{}
\DoxyCodeLine{00612       \textcolor{keywordflow}{if} (bpp == 32 || bpp == 24)}
\DoxyCodeLine{00613         ras = ras32;}
\DoxyCodeLine{00614       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00615         convertForWriting(ras, ras32, bpp);}
\DoxyCodeLine{00616     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ras64) \{}
\DoxyCodeLine{00617       \textcolor{keywordflow}{if} (bpp == 64 || bpp == 48)}
\DoxyCodeLine{00618         ras = ras64;}
\DoxyCodeLine{00619       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00620         convertForWriting(ras, ras64, bpp);}
\DoxyCodeLine{00621     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00622       fclose(file);}
\DoxyCodeLine{00623       \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_image_exception}{TImageException}}(m\_path, \textcolor{stringliteral}{"{}unsupported raster type"{}});}
\DoxyCodeLine{00624     \}}
\DoxyCodeLine{00625 }
\DoxyCodeLine{00626     info.m\_lx = ras-\/>getLx();}
\DoxyCodeLine{00627     info.m\_ly = ras-\/>getLy();}
\DoxyCodeLine{00628 }
\DoxyCodeLine{00629     ri-\/>getDpi(info.m\_dpix, info.m\_dpiy);}
\DoxyCodeLine{00630 }
\DoxyCodeLine{00631     \textcolor{keywordflow}{if} (writer-\/>getProperties() \&\& m\_properties)}
\DoxyCodeLine{00632       writer-\/>getProperties()-\/>setProperties(m\_properties);}
\DoxyCodeLine{00633 }
\DoxyCodeLine{00634     writer-\/>open(file, info);}
\DoxyCodeLine{00635 }
\DoxyCodeLine{00636     \textcolor{comment}{// add background colors for non alpha-\/enabled image types}}
\DoxyCodeLine{00637     \textcolor{keywordflow}{if} ((ras32 || ras64) \&\& !writer-\/>writeAlphaSupported() \&\&}
\DoxyCodeLine{00638         TImageWriter::getBackgroundColor() != TPixel::Black) \{}
\DoxyCodeLine{00639       \textcolor{keywordflow}{if} (bpp == 32 || bpp == 24)}
\DoxyCodeLine{00640         \mbox{\hyperlink{namespace_t_rop_a789f797a79d572d97182478cc9826c8a}{TRop::addBackground}}(ras, TImageWriter::getBackgroundColor());}
\DoxyCodeLine{00641       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (bpp == 64 || bpp == 48) \{}
\DoxyCodeLine{00642         \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} bgRas(ras-\/>getSize());}
\DoxyCodeLine{00643         bgRas-\/>fill(toPixel64(TImageWriter::getBackgroundColor()));}
\DoxyCodeLine{00644         \mbox{\hyperlink{namespace_t_rop_ae5fd1fb0c2f625e1da14fe92ae0e5122}{TRop::over}}(bgRas, ras);}
\DoxyCodeLine{00645         ras = bgRas;}
\DoxyCodeLine{00646       \}  \textcolor{comment}{// for other bpp values, do nothing for now}}
\DoxyCodeLine{00647     \}}
\DoxyCodeLine{00648 }
\DoxyCodeLine{00649     ras-\/>lock();}
\DoxyCodeLine{00650 }
\DoxyCodeLine{00651     \textcolor{keywordflow}{if} (writer-\/>getRowOrder() == Tiio::BOTTOM2TOP) \{}
\DoxyCodeLine{00652       \textcolor{keywordflow}{if} (bpp == 1 || bpp == 8 || bpp == 24 || bpp == 32 || bpp == 16)}
\DoxyCodeLine{00653         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < ras-\/>getLy(); i++)}
\DoxyCodeLine{00654           writer-\/>writeLine((\textcolor{keywordtype}{char} *)ras-\/>getRawData(0, i));}
\DoxyCodeLine{00655       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00656         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < ras-\/>getLy(); i++)}
\DoxyCodeLine{00657           writer-\/>writeLine((\textcolor{keywordtype}{short} *)ras-\/>getRawData(0, i));}
\DoxyCodeLine{00658     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00659       \textcolor{keywordflow}{if} (bpp == 1 || bpp == 8 || bpp == 24 || bpp == 32 || bpp == 16)}
\DoxyCodeLine{00660         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = ras-\/>getLy() -\/ 1; i >= 0; i-\/-\/)}
\DoxyCodeLine{00661           writer-\/>writeLine((\textcolor{keywordtype}{char} *)ras-\/>getRawData(0, i));}
\DoxyCodeLine{00662       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00663         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = ras-\/>getLy() -\/ 1; i >= 0; i-\/-\/)}
\DoxyCodeLine{00664           writer-\/>writeLine((\textcolor{keywordtype}{short} *)ras-\/>getRawData(0, i));}
\DoxyCodeLine{00665     \}}
\DoxyCodeLine{00666 }
\DoxyCodeLine{00667     ras-\/>unlock();}
\DoxyCodeLine{00668 }
\DoxyCodeLine{00669     writer-\/>flush();}
\DoxyCodeLine{00670     \textcolor{keyword}{delete} writer;}
\DoxyCodeLine{00671   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi = img) \{}
\DoxyCodeLine{00672     \mbox{\hyperlink{class_tiio_1_1_vector_writer}{Tiio::VectorWriter}} *writer = Tiio::makeVectorWriter(type);}
\DoxyCodeLine{00673     \textcolor{keywordflow}{if} (!writer) \{}
\DoxyCodeLine{00674       fclose(file);}
\DoxyCodeLine{00675       \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_image_exception}{TImageException}}(m\_path, \textcolor{stringliteral}{"{}unsupported format for vector images"{}});}
\DoxyCodeLine{00676     \}}
\DoxyCodeLine{00677 }
\DoxyCodeLine{00678     writer-\/>open(file);}
\DoxyCodeLine{00679     writer-\/>write(vi.getPointer());}
\DoxyCodeLine{00680 }
\DoxyCodeLine{00681     \textcolor{keyword}{delete} writer;}
\DoxyCodeLine{00682   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00683     fclose(file);}
\DoxyCodeLine{00684     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_image_exception}{TImageException}}(m\_path, \textcolor{stringliteral}{"{}Can't write file"{}});}
\DoxyCodeLine{00685   \}}
\DoxyCodeLine{00686 }
\DoxyCodeLine{00687   fclose(file);}
\DoxyCodeLine{00688 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_writer_acd426b5d23d0b419e11301e869f2a1fc}\label{class_t_image_writer_acd426b5d23d0b419e11301e869f2a1fc}} 
\index{TImageWriter@{TImageWriter}!setBackgroundColor@{setBackgroundColor}}
\index{setBackgroundColor@{setBackgroundColor}!TImageWriter@{TImageWriter}}
\doxysubsubsection{\texorpdfstring{setBackgroundColor()}{setBackgroundColor()}}
{\footnotesize\ttfamily void TImage\+Writer\+::set\+Background\+Color (\begin{DoxyParamCaption}\item[{TPixel32}]{color }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00769                                                     \{}
\DoxyCodeLine{00770   m\_backgroundColor = color;}
\DoxyCodeLine{00771 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_writer_a6e998c4f99b997c866c63242fbf0e53a}\label{class_t_image_writer_a6e998c4f99b997c866c63242fbf0e53a}} 
\index{TImageWriter@{TImageWriter}!setProperties@{setProperties}}
\index{setProperties@{setProperties}!TImageWriter@{TImageWriter}}
\doxysubsubsection{\texorpdfstring{setProperties()}{setProperties()}}
{\footnotesize\ttfamily void TImage\+Writer\+::set\+Properties (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$}]{g }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00526                                                         \{}
\DoxyCodeLine{00527   \textcolor{keywordflow}{if} (m\_properties) \{}
\DoxyCodeLine{00528     assert(m\_properties != g);}
\DoxyCodeLine{00529     \textcolor{keyword}{delete} m\_properties;}
\DoxyCodeLine{00530   \}}
\DoxyCodeLine{00531   m\_properties = g ? g-\/>clone() : 0;}
\DoxyCodeLine{00532 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_t_image_writer_ae33eb40b43d11fcfc1c04ad3ef2473b9}\label{class_t_image_writer_ae33eb40b43d11fcfc1c04ad3ef2473b9}} 
\index{TImageWriter@{TImageWriter}!m\_path@{m\_path}}
\index{m\_path@{m\_path}!TImageWriter@{TImageWriter}}
\doxysubsubsection{\texorpdfstring{m\_path}{m\_path}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} TImage\+Writer\+::m\+\_\+path\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_image_writer_a4c5151730eea158d36ebf3ec2e018c07}\label{class_t_image_writer_a4c5151730eea158d36ebf3ec2e018c07}} 
\index{TImageWriter@{TImageWriter}!m\_properties@{m\_properties}}
\index{m\_properties@{m\_properties}!TImageWriter@{TImageWriter}}
\doxysubsubsection{\texorpdfstring{m\_properties}{m\_properties}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}}$\ast$ TImage\+Writer\+::m\+\_\+properties\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_image_writer_ab6cd0b4157da175a046d3659f075bf0a}\label{class_t_image_writer_ab6cd0b4157da175a046d3659f075bf0a}} 
\index{TImageWriter@{TImageWriter}!m\_vectorWriter@{m\_vectorWriter}}
\index{m\_vectorWriter@{m\_vectorWriter}!TImageWriter@{TImageWriter}}
\doxysubsubsection{\texorpdfstring{m\_vectorWriter}{m\_vectorWriter}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_tiio_1_1_vector_writer}{Tiio\+::\+Vector\+Writer}}$\ast$ TImage\+Writer\+::m\+\_\+vector\+Writer\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_image_writer_a4475598961c92892c7e0598db77eebcc}\label{class_t_image_writer_a4475598961c92892c7e0598db77eebcc}} 
\index{TImageWriter@{TImageWriter}!m\_writer@{m\_writer}}
\index{m\_writer@{m\_writer}!TImageWriter@{TImageWriter}}
\doxysubsubsection{\texorpdfstring{m\_writer}{m\_writer}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_tiio_1_1_writer}{Tiio\+::\+Writer}}$\ast$ TImage\+Writer\+::m\+\_\+writer\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/timage\+\_\+io.\+h\item 
E\+:/opentoonz/toonz/sources/common/timage\+\_\+io/timage\+\_\+io.\+cpp\end{DoxyCompactItemize}
