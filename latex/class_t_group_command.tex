\hypertarget{class_t_group_command}{}\doxysection{TGroup\+Command Class Reference}
\label{class_t_group_command}\index{TGroupCommand@{TGroupCommand}}
Inheritance diagram for TGroup\+Command\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_t_group_command}
\end{center}
\end{figure}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \{ \newline
{\bfseries NONE} = 0
, {\bfseries FRONT} = 1
, {\bfseries FORWARD} = 2
, {\bfseries BACKWARD} = 4
, \newline
{\bfseries BACK} = 8
, {\bfseries GROUP} = 16
, {\bfseries UNGROUP} = 32
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_t_group_command_a6acc6c448f929e64f9c221fa1982058a}{set\+Selection}} (\mbox{\hyperlink{class_stroke_selection}{Stroke\+Selection}} $\ast$sel)
\item 
UCHAR \mbox{\hyperlink{class_t_group_command_aeb1d8896f2f6b36d70a98d80585bafb0}{get\+Grouping\+Options}} ()
\item 
void \mbox{\hyperlink{class_t_group_command_a7780cd91e3343aefe1025ad23cc6d422}{add\+Menu\+Items}} (QMenu $\ast$menu)
\item 
void \mbox{\hyperlink{class_t_group_command_a85321c166c2b2dc3ddf50df3dc20a3cb}{back}} ()
\item 
void \mbox{\hyperlink{class_t_group_command_a82b1f9cf39c4089449d13105c6de1e06}{backward}} ()
\item 
void \mbox{\hyperlink{class_t_group_command_ad50c2383b1f186455753de4ca01f4e93}{front}} ()
\item 
void \mbox{\hyperlink{class_t_group_command_ac80add43fd202f0a4e776a1517ca888d}{forward}} ()
\item 
void \mbox{\hyperlink{class_t_group_command_a79468e33582d254b765ddc7971cdac0c}{group}} ()
\item 
void \mbox{\hyperlink{class_t_group_command_acd140cfeb479abaa0e301f48a5eddcfb}{ungroup}} ()
\item 
void \mbox{\hyperlink{class_t_group_command_aae4775a94a105f9a4fa1a09143052a9f}{enter\+Group}} ()
\item 
void \mbox{\hyperlink{class_t_group_command_a2b6cd58f7291be62bdd4e7bcdb7cb7bb}{exit\+Group}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_stroke_selection}{Stroke\+Selection}} $\ast$ \mbox{\hyperlink{class_t_group_command_ad287d1f96507ea31a5fd165064b326c7}{m\+\_\+sel}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{class_t_group_command_acca7caa1ec2e579dfcfd4c3672637871}\label{class_t_group_command_acca7caa1ec2e579dfcfd4c3672637871}} 
\doxysubsubsection{\texorpdfstring{anonymous enum}{anonymous enum}}
{\footnotesize\ttfamily anonymous enum}


\begin{DoxyCode}{0}
\DoxyCodeLine{00025        \{}
\DoxyCodeLine{00026     NONE     = 0,}
\DoxyCodeLine{00027     FRONT    = 1,}
\DoxyCodeLine{00028     FORWARD  = 2,}
\DoxyCodeLine{00029     BACKWARD = 4,}
\DoxyCodeLine{00030     BACK     = 8,}
\DoxyCodeLine{00031     GROUP    = 16,}
\DoxyCodeLine{00032     UNGROUP  = 32}
\DoxyCodeLine{00033   \};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_group_command_a8267d7cd9fa06994499a1043406117b3}\label{class_t_group_command_a8267d7cd9fa06994499a1043406117b3}} 
\index{TGroupCommand@{TGroupCommand}!TGroupCommand@{TGroupCommand}}
\index{TGroupCommand@{TGroupCommand}!TGroupCommand@{TGroupCommand}}
\doxysubsubsection{\texorpdfstring{TGroupCommand()}{TGroupCommand()}}
{\footnotesize\ttfamily TGroup\+Command\+::\+TGroup\+Command (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00037 : m\_sel(0) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_group_command_a7780cd91e3343aefe1025ad23cc6d422}\label{class_t_group_command_a7780cd91e3343aefe1025ad23cc6d422}} 
\index{TGroupCommand@{TGroupCommand}!addMenuItems@{addMenuItems}}
\index{addMenuItems@{addMenuItems}!TGroupCommand@{TGroupCommand}}
\doxysubsubsection{\texorpdfstring{addMenuItems()}{addMenuItems()}}
{\footnotesize\ttfamily void TGroup\+Command\+::add\+Menu\+Items (\begin{DoxyParamCaption}\item[{QMenu $\ast$}]{menu }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00786                                             \{}
\DoxyCodeLine{00787   UCHAR optionMask = getGroupingOptions();}
\DoxyCodeLine{00788   \textcolor{keywordflow}{if} (optionMask == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00789 }
\DoxyCodeLine{00790   \mbox{\hyperlink{class_command_manager}{CommandManager}} *cm = CommandManager::instance();}
\DoxyCodeLine{00791 }
\DoxyCodeLine{00792   \textcolor{keywordflow}{if} (optionMask \& TGroupCommand::GROUP)}
\DoxyCodeLine{00793     menu-\/>addAction(cm-\/>getAction(MI\_Group));}
\DoxyCodeLine{00794 }
\DoxyCodeLine{00795   \textcolor{keywordflow}{if} (optionMask \& TGroupCommand::UNGROUP)}
\DoxyCodeLine{00796     menu-\/>addAction(cm-\/>getAction(MI\_Ungroup));}
\DoxyCodeLine{00797 }
\DoxyCodeLine{00798   \textcolor{keywordflow}{if} (optionMask \& (TGroupCommand::GROUP | TGroupCommand::UNGROUP) \&\&}
\DoxyCodeLine{00799       optionMask \& (TGroupCommand::FORWARD | TGroupCommand::BACKWARD))}
\DoxyCodeLine{00800     menu-\/>addSeparator();}
\DoxyCodeLine{00801 }
\DoxyCodeLine{00802   \textcolor{keywordflow}{if} (optionMask \& TGroupCommand::FORWARD) \{}
\DoxyCodeLine{00803     menu-\/>addAction(cm-\/>getAction(MI\_BringToFront));}
\DoxyCodeLine{00804     menu-\/>addAction(cm-\/>getAction(MI\_BringForward));}
\DoxyCodeLine{00805   \}}
\DoxyCodeLine{00806   \textcolor{keywordflow}{if} (optionMask \& TGroupCommand::BACKWARD) \{}
\DoxyCodeLine{00807     menu-\/>addAction(cm-\/>getAction(MI\_SendBack));}
\DoxyCodeLine{00808     menu-\/>addAction(cm-\/>getAction(MI\_SendBackward));}
\DoxyCodeLine{00809   \}}
\DoxyCodeLine{00810   menu-\/>addSeparator();}
\DoxyCodeLine{00811 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_group_command_a85321c166c2b2dc3ddf50df3dc20a3cb}\label{class_t_group_command_a85321c166c2b2dc3ddf50df3dc20a3cb}} 
\index{TGroupCommand@{TGroupCommand}!back@{back}}
\index{back@{back}!TGroupCommand@{TGroupCommand}}
\doxysubsubsection{\texorpdfstring{back()}{back()}}
{\footnotesize\ttfamily void TGroup\+Command\+::back (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00044               \{}
\DoxyCodeLine{00045     \textcolor{keywordflow}{if} (!(getGroupingOptions() \& BACK)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00046     moveGroup(BACK);}
\DoxyCodeLine{00047   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_group_command_a82b1f9cf39c4089449d13105c6de1e06}\label{class_t_group_command_a82b1f9cf39c4089449d13105c6de1e06}} 
\index{TGroupCommand@{TGroupCommand}!backward@{backward}}
\index{backward@{backward}!TGroupCommand@{TGroupCommand}}
\doxysubsubsection{\texorpdfstring{backward()}{backward()}}
{\footnotesize\ttfamily void TGroup\+Command\+::backward (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00048                   \{}
\DoxyCodeLine{00049     \textcolor{keywordflow}{if} (!(getGroupingOptions() \& BACKWARD)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00050     moveGroup(BACKWARD);}
\DoxyCodeLine{00051   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_group_command_aae4775a94a105f9a4fa1a09143052a9f}\label{class_t_group_command_aae4775a94a105f9a4fa1a09143052a9f}} 
\index{TGroupCommand@{TGroupCommand}!enterGroup@{enterGroup}}
\index{enterGroup@{enterGroup}!TGroupCommand@{TGroupCommand}}
\doxysubsubsection{\texorpdfstring{enterGroup()}{enterGroup()}}
{\footnotesize\ttfamily void TGroup\+Command\+::enter\+Group (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00499                                \{}
\DoxyCodeLine{00500   \mbox{\hyperlink{class_t_tool}{TTool}} *tool = TTool::getApplication()-\/>getCurrentTool()-\/>getTool();}
\DoxyCodeLine{00501   \textcolor{keywordflow}{if} (!tool) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00502   \mbox{\hyperlink{class_t_vector_image}{TVectorImage}} *vimg = (\mbox{\hyperlink{class_t_vector_image}{TVectorImage}} *)tool-\/>\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00503 }
\DoxyCodeLine{00504   \textcolor{keywordflow}{if} (!vimg) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00505 }
\DoxyCodeLine{00506   \textcolor{keywordflow}{if} (!m\_sel-\/>isEditable()) \{}
\DoxyCodeLine{00507     DVGui::error(}
\DoxyCodeLine{00508         QObject::tr(\textcolor{stringliteral}{"{}The selection cannot be entered. It is not editable."{}}));}
\DoxyCodeLine{00509     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00510   \}}
\DoxyCodeLine{00511 }
\DoxyCodeLine{00512   \textcolor{keywordtype}{int} index = -\/1;}
\DoxyCodeLine{00513 }
\DoxyCodeLine{00514   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)vimg-\/>\mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{getStrokeCount}}(); i++)}
\DoxyCodeLine{00515     \textcolor{keywordflow}{if} (m\_sel-\/>isSelected(i)) \{}
\DoxyCodeLine{00516       index = i;}
\DoxyCodeLine{00517       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00518     \}}
\DoxyCodeLine{00519 }
\DoxyCodeLine{00520   \textcolor{keywordflow}{if} (index == -\/1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00521 }
\DoxyCodeLine{00522   \textcolor{keywordflow}{if} (!vimg-\/>canEnterGroup(index)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00523   vimg-\/>enterGroup(index);}
\DoxyCodeLine{00524   \mbox{\hyperlink{class_t_selection}{TSelection}} *selection = TSelection::getCurrent();}
\DoxyCodeLine{00525   \textcolor{keywordflow}{if} (selection) selection-\/>selectNone();}
\DoxyCodeLine{00526 }
\DoxyCodeLine{00527   TTool::getApplication()-\/>getCurrentScene()-\/>notifySceneChanged();}
\DoxyCodeLine{00528 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_group_command_a2b6cd58f7291be62bdd4e7bcdb7cb7bb}\label{class_t_group_command_a2b6cd58f7291be62bdd4e7bcdb7cb7bb}} 
\index{TGroupCommand@{TGroupCommand}!exitGroup@{exitGroup}}
\index{exitGroup@{exitGroup}!TGroupCommand@{TGroupCommand}}
\doxysubsubsection{\texorpdfstring{exitGroup()}{exitGroup()}}
{\footnotesize\ttfamily void TGroup\+Command\+::exit\+Group (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00532                               \{}
\DoxyCodeLine{00533   \mbox{\hyperlink{class_t_tool}{TTool}} *tool = TTool::getApplication()-\/>getCurrentTool()-\/>getTool();}
\DoxyCodeLine{00534   \textcolor{keywordflow}{if} (!tool) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00535   \mbox{\hyperlink{class_t_vector_image}{TVectorImage}} *vimg = (\mbox{\hyperlink{class_t_vector_image}{TVectorImage}} *)tool-\/>\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00536 }
\DoxyCodeLine{00537   \textcolor{keywordflow}{if} (!vimg) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00538   vimg-\/>exitGroup();}
\DoxyCodeLine{00539   TTool::getApplication()-\/>getCurrentScene()-\/>notifySceneChanged();}
\DoxyCodeLine{00540 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_group_command_ac80add43fd202f0a4e776a1517ca888d}\label{class_t_group_command_ac80add43fd202f0a4e776a1517ca888d}} 
\index{TGroupCommand@{TGroupCommand}!forward@{forward}}
\index{forward@{forward}!TGroupCommand@{TGroupCommand}}
\doxysubsubsection{\texorpdfstring{forward()}{forward()}}
{\footnotesize\ttfamily void TGroup\+Command\+::forward (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00056                  \{}
\DoxyCodeLine{00057     \textcolor{keywordflow}{if} (!(getGroupingOptions() \& FORWARD)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00058     moveGroup(FORWARD);}
\DoxyCodeLine{00059   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_group_command_ad50c2383b1f186455753de4ca01f4e93}\label{class_t_group_command_ad50c2383b1f186455753de4ca01f4e93}} 
\index{TGroupCommand@{TGroupCommand}!front@{front}}
\index{front@{front}!TGroupCommand@{TGroupCommand}}
\doxysubsubsection{\texorpdfstring{front()}{front()}}
{\footnotesize\ttfamily void TGroup\+Command\+::front (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00052                \{}
\DoxyCodeLine{00053     \textcolor{keywordflow}{if} (!(getGroupingOptions() \& FRONT)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00054     moveGroup(FRONT);}
\DoxyCodeLine{00055   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_group_command_aeb1d8896f2f6b36d70a98d80585bafb0}\label{class_t_group_command_aeb1d8896f2f6b36d70a98d80585bafb0}} 
\index{TGroupCommand@{TGroupCommand}!getGroupingOptions@{getGroupingOptions}}
\index{getGroupingOptions@{getGroupingOptions}!TGroupCommand@{TGroupCommand}}
\doxysubsubsection{\texorpdfstring{getGroupingOptions()}{getGroupingOptions()}}
{\footnotesize\ttfamily UCHAR TGroup\+Command\+::get\+Grouping\+Options (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00265                                         \{}
\DoxyCodeLine{00266   \mbox{\hyperlink{class_t_tool}{TTool}} *tool = TTool::getApplication()-\/>getCurrentTool()-\/>getTool();}
\DoxyCodeLine{00267   \textcolor{keywordflow}{if} (!tool) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00268   \mbox{\hyperlink{class_t_vector_image}{TVectorImage}} *vimg = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_vector_image}{TVectorImage}} *\textcolor{keyword}{>}(tool-\/>\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{false}));}
\DoxyCodeLine{00269   \textcolor{keywordflow}{if} (!vimg) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00270 }
\DoxyCodeLine{00271   UCHAR mask = 0;}
\DoxyCodeLine{00272   \textcolor{keywordtype}{int} count  = 0;}
\DoxyCodeLine{00273   UINT i, j;}
\DoxyCodeLine{00274 }
\DoxyCodeLine{00275   \textcolor{comment}{// spostamento: si possono  spostare solo gruppi interi  oppure  stroke   non}}
\DoxyCodeLine{00276   \textcolor{comment}{// gruppate}}
\DoxyCodeLine{00277 }
\DoxyCodeLine{00278   std::vector<std::pair<TStroke *, int>> strokeIndexes =}
\DoxyCodeLine{00279       getSelectedGroups(vimg, m\_sel);}
\DoxyCodeLine{00280 }
\DoxyCodeLine{00281   \textcolor{comment}{/*}}
\DoxyCodeLine{00282 \textcolor{comment}{  //spostamento: si puo' spostare solo un gruppo(e uno solo per volta) oppure}}
\DoxyCodeLine{00283 \textcolor{comment}{una stroke singola  non gruppata}}
\DoxyCodeLine{00284 \textcolor{comment}{for (i=0; i<vimg-\/>getStrokeCount(); i++)}}
\DoxyCodeLine{00285 \textcolor{comment}{  if (m\_sel-\/>isSelected(i))}}
\DoxyCodeLine{00286 \textcolor{comment}{  \{}}
\DoxyCodeLine{00287 \textcolor{comment}{          if (strokeIndex != -\/1)}}
\DoxyCodeLine{00288 \textcolor{comment}{                  \{}}
\DoxyCodeLine{00289 \textcolor{comment}{                  if (!vimg-\/>isStrokeGrouped(i) ||}}
\DoxyCodeLine{00290 \textcolor{comment}{!vimg-\/>sameSubGroup(strokeIndex, i))}}
\DoxyCodeLine{00291 \textcolor{comment}{                          break;}}
\DoxyCodeLine{00292 \textcolor{comment}{                  \}}}
\DoxyCodeLine{00293 \textcolor{comment}{          else}}
\DoxyCodeLine{00294 \textcolor{comment}{                  \{}}
\DoxyCodeLine{00295 \textcolor{comment}{                  strokeIndex = i;}}
\DoxyCodeLine{00296 \textcolor{comment}{                  if (vimg-\/>isStrokeGrouped(i))}}
\DoxyCodeLine{00297 \textcolor{comment}{                          \{}}
\DoxyCodeLine{00298 \textcolor{comment}{                          for (j=0; j<vimg-\/>getStrokeCount(); j++)}}
\DoxyCodeLine{00299 \textcolor{comment}{                                  if (!m\_sel-\/>isSelected(j) \&\&}}
\DoxyCodeLine{00300 \textcolor{comment}{vimg-\/>sameSubGroup(i, j))}}
\DoxyCodeLine{00301 \textcolor{comment}{                                          break;//non tutto il gruppo e'}}
\DoxyCodeLine{00302 \textcolor{comment}{selezionato}}
\DoxyCodeLine{00303 \textcolor{comment}{                          if (j<vimg-\/>getStrokeCount())}}
\DoxyCodeLine{00304 \textcolor{comment}{                                  break;}}
\DoxyCodeLine{00305 \textcolor{comment}{                          \}}}
\DoxyCodeLine{00306 \textcolor{comment}{                  \}}}
\DoxyCodeLine{00307 \textcolor{comment}{          count++;}}
\DoxyCodeLine{00308 \textcolor{comment}{          \}}}
\DoxyCodeLine{00309 \textcolor{comment}{   */}}
\DoxyCodeLine{00310 }
\DoxyCodeLine{00311   \textcolor{keywordflow}{if} (strokeIndexes.empty()) \textcolor{keywordflow}{return} 0;  \textcolor{comment}{// no stroke selected}}
\DoxyCodeLine{00312 }
\DoxyCodeLine{00313   \textcolor{keywordtype}{int} strokeIndex = vimg-\/>\mbox{\hyperlink{class_t_vector_image_af002208e7a24a894a816756e7978acef}{getStrokeIndex}}(strokeIndexes[0].first);}
\DoxyCodeLine{00314 }
\DoxyCodeLine{00315   \textcolor{keywordflow}{if} (strokeIndexes.size() > 1 || strokeIndex > 0) \{}
\DoxyCodeLine{00316     mask |= BACK;}
\DoxyCodeLine{00317     mask |= BACKWARD;}
\DoxyCodeLine{00318   \}}
\DoxyCodeLine{00319   \textcolor{keywordflow}{if} (strokeIndexes.size() > 1 ||}
\DoxyCodeLine{00320       strokeIndex + strokeIndexes[0].second -\/ 1 <}
\DoxyCodeLine{00321           (\textcolor{keywordtype}{int})vimg-\/>\mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{getStrokeCount}}() -\/ 1) \{}
\DoxyCodeLine{00322     mask |= FRONT;}
\DoxyCodeLine{00323     mask |= FORWARD;}
\DoxyCodeLine{00324   \}}
\DoxyCodeLine{00325 }
\DoxyCodeLine{00326   \textcolor{comment}{/*}}
\DoxyCodeLine{00327 \textcolor{comment}{if (i == vimg-\/>getStrokeCount())}}
\DoxyCodeLine{00328 \textcolor{comment}{\{}}
\DoxyCodeLine{00329 \textcolor{comment}{  if (strokeIndex+count<(int)vimg-\/>getStrokeCount())}}
\DoxyCodeLine{00330 \textcolor{comment}{    \{}}
\DoxyCodeLine{00331 \textcolor{comment}{          mask |= FRONT;}}
\DoxyCodeLine{00332 \textcolor{comment}{          mask |= FORWARD;}}
\DoxyCodeLine{00333 \textcolor{comment}{    \}}}
\DoxyCodeLine{00334 \textcolor{comment}{  if (strokeIndex>0)}}
\DoxyCodeLine{00335 \textcolor{comment}{    \{}}
\DoxyCodeLine{00336 \textcolor{comment}{          mask |= BACK;}}
\DoxyCodeLine{00337 \textcolor{comment}{          mask |= BACKWARD;}}
\DoxyCodeLine{00338 \textcolor{comment}{    \}}}
\DoxyCodeLine{00339 \textcolor{comment}{\}}}
\DoxyCodeLine{00340 \textcolor{comment}{*/}}
\DoxyCodeLine{00341 }
\DoxyCodeLine{00342   \textcolor{comment}{// PER l'UNGROUP: si ungruppa solo se tutti gli stroke selezionati stanno nel}}
\DoxyCodeLine{00343   \textcolor{comment}{// gruppo (anche piu' gruppi insieme)}}
\DoxyCodeLine{00344 }
\DoxyCodeLine{00345   \textcolor{keywordflow}{for} (i = 0; i < vimg-\/>\mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{getStrokeCount}}(); i++) \{}
\DoxyCodeLine{00346     \textcolor{keywordflow}{if} (m\_sel-\/>isSelected(i)) \{}
\DoxyCodeLine{00347       \textcolor{keywordflow}{if} (!vimg-\/>isStrokeGrouped(i)) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00348       \textcolor{keywordflow}{for} (j = 0; j < vimg-\/>\mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{getStrokeCount}}(); j++)}
\DoxyCodeLine{00349         \textcolor{keywordflow}{if} (!m\_sel-\/>isSelected(j) \&\& vimg-\/>\mbox{\hyperlink{class_t_vector_image_aea598419eaeaccfdf8b87dcce203d740}{sameSubGroup}}(i, j)) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00350       \textcolor{keywordflow}{if} (j < vimg-\/>getStrokeCount()) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00351     \}}
\DoxyCodeLine{00352   \}}
\DoxyCodeLine{00353   \textcolor{keywordflow}{if} (i == vimg-\/>\mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{getStrokeCount}}()) mask |= UNGROUP;}
\DoxyCodeLine{00354 }
\DoxyCodeLine{00355   \textcolor{comment}{// PER il GROUP: si raggruppa solo  se:}}
\DoxyCodeLine{00356   \textcolor{comment}{// //almeno una delle  stroke selezionate non fa parte di gruppi o e' di un}}
\DoxyCodeLine{00357   \textcolor{comment}{// gruppo diverso}}
\DoxyCodeLine{00358   \textcolor{comment}{// e se c'e' una stroke di un gruppo, allora tutto il gruppo della stroke e'}}
\DoxyCodeLine{00359   \textcolor{comment}{// selezionato}}
\DoxyCodeLine{00360 }
\DoxyCodeLine{00361   \textcolor{keywordtype}{bool} groupingMakesSense = \textcolor{keyword}{false};}
\DoxyCodeLine{00362   \textcolor{keywordtype}{int} refStroke           = -\/1;}
\DoxyCodeLine{00363   \textcolor{keywordflow}{for} (i = 0; i < vimg-\/>\mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{getStrokeCount}}(); i++)}
\DoxyCodeLine{00364     \textcolor{keywordflow}{if} (m\_sel-\/>isSelected(i)) \{}
\DoxyCodeLine{00365       \textcolor{keywordflow}{if} (vimg-\/>isStrokeGrouped(i)) \{}
\DoxyCodeLine{00366         \textcolor{keywordflow}{if} (refStroke == -\/1)}
\DoxyCodeLine{00367           refStroke = i;}
\DoxyCodeLine{00368         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!vimg-\/>\mbox{\hyperlink{class_t_vector_image_aea598419eaeaccfdf8b87dcce203d740}{sameSubGroup}}(refStroke, i))}
\DoxyCodeLine{00369           groupingMakesSense = \textcolor{keyword}{true};  \textcolor{comment}{// gli storke selezionati non sono gia'}}
\DoxyCodeLine{00370                                       \textcolor{comment}{// tutti dello stesso gruppo}}
\DoxyCodeLine{00371         \textcolor{keywordflow}{for} (j = 0; j < vimg-\/>\mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{getStrokeCount}}(); j++)}
\DoxyCodeLine{00372           \textcolor{keywordflow}{if} (!m\_sel-\/>isSelected(j) \&\& vimg-\/>\mbox{\hyperlink{class_t_vector_image_a90c030d3d2eba96443fd604e343dd8e5}{sameGroup}}(i, j)) \textcolor{keywordflow}{return} mask;}
\DoxyCodeLine{00373       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00374         groupingMakesSense = \textcolor{keyword}{true};}
\DoxyCodeLine{00375     \}}
\DoxyCodeLine{00376 }
\DoxyCodeLine{00377   \textcolor{keywordflow}{if} (groupingMakesSense) mask |= GROUP;}
\DoxyCodeLine{00378 }
\DoxyCodeLine{00379   \textcolor{keywordflow}{return} mask;}
\DoxyCodeLine{00380 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_group_command_a79468e33582d254b765ddc7971cdac0c}\label{class_t_group_command_a79468e33582d254b765ddc7971cdac0c}} 
\index{TGroupCommand@{TGroupCommand}!group@{group}}
\index{group@{group}!TGroupCommand@{TGroupCommand}}
\doxysubsubsection{\texorpdfstring{group()}{group()}}
{\footnotesize\ttfamily void TGroup\+Command\+::group (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00474                           \{}
\DoxyCodeLine{00475   \textcolor{keywordflow}{if} (!(getGroupingOptions() \& GROUP)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00476 }
\DoxyCodeLine{00477   \mbox{\hyperlink{class_t_tool}{TTool}} *tool = TTool::getApplication()-\/>getCurrentTool()-\/>getTool();}
\DoxyCodeLine{00478   \textcolor{keywordflow}{if} (!tool) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00479   \mbox{\hyperlink{class_t_vector_image}{TVectorImage}} *vimg = (\mbox{\hyperlink{class_t_vector_image}{TVectorImage}} *)tool-\/>\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00480 }
\DoxyCodeLine{00481   \textcolor{keywordflow}{if} (!vimg) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00482 }
\DoxyCodeLine{00483   \textcolor{keywordflow}{if} (!m\_sel-\/>isEditable()) \{}
\DoxyCodeLine{00484     DVGui::error(}
\DoxyCodeLine{00485         QObject::tr(\textcolor{stringliteral}{"{}The selection cannot be grouped. It is not editable."{}}));}
\DoxyCodeLine{00486     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00487   \}}
\DoxyCodeLine{00488 }
\DoxyCodeLine{00489   QMutexLocker lock(vimg-\/>getMutex());}
\DoxyCodeLine{00490   groupWithoutUndo(vimg, m\_sel);}
\DoxyCodeLine{00491   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *level =}
\DoxyCodeLine{00492       TTool::getApplication()-\/>getCurrentLevel()-\/>getSimpleLevel();}
\DoxyCodeLine{00493   TUndoManager::manager()-\/>add(}
\DoxyCodeLine{00494       \textcolor{keyword}{new} GroupUndo(level, tool-\/>\mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}(), \textcolor{keyword}{new} \mbox{\hyperlink{class_stroke_selection}{StrokeSelection}}(*m\_sel)));}
\DoxyCodeLine{00495 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_group_command_a6acc6c448f929e64f9c221fa1982058a}\label{class_t_group_command_a6acc6c448f929e64f9c221fa1982058a}} 
\index{TGroupCommand@{TGroupCommand}!setSelection@{setSelection}}
\index{setSelection@{setSelection}!TGroupCommand@{TGroupCommand}}
\doxysubsubsection{\texorpdfstring{setSelection()}{setSelection()}}
{\footnotesize\ttfamily void TGroup\+Command\+::set\+Selection (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_stroke_selection}{Stroke\+Selection}} $\ast$}]{sel }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00039 \{ m\_sel = sel; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_group_command_acd140cfeb479abaa0e301f48a5eddcfb}\label{class_t_group_command_acd140cfeb479abaa0e301f48a5eddcfb}} 
\index{TGroupCommand@{TGroupCommand}!ungroup@{ungroup}}
\index{ungroup@{ungroup}!TGroupCommand@{TGroupCommand}}
\doxysubsubsection{\texorpdfstring{ungroup()}{ungroup()}}
{\footnotesize\ttfamily void TGroup\+Command\+::ungroup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00544                             \{}
\DoxyCodeLine{00545   \textcolor{keywordflow}{if} (!(getGroupingOptions() \& UNGROUP)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00546   \mbox{\hyperlink{class_t_tool}{TTool}} *tool = TTool::getApplication()-\/>getCurrentTool()-\/>getTool();}
\DoxyCodeLine{00547   \textcolor{keywordflow}{if} (!tool) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00548   \mbox{\hyperlink{class_t_vector_image}{TVectorImage}} *vimg = (\mbox{\hyperlink{class_t_vector_image}{TVectorImage}} *)tool-\/>\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00549   \textcolor{keywordflow}{if} (!vimg) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00550 }
\DoxyCodeLine{00551   \textcolor{keywordflow}{if} (!m\_sel-\/>isEditable()) \{}
\DoxyCodeLine{00552     DVGui::error(}
\DoxyCodeLine{00553         QObject::tr(\textcolor{stringliteral}{"{}The selection cannot be ungrouped. It is not editable."{}}));}
\DoxyCodeLine{00554     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00555   \}}
\DoxyCodeLine{00556 }
\DoxyCodeLine{00557   QMutexLocker lock(vimg-\/>getMutex());}
\DoxyCodeLine{00558   ungroupWithoutUndo(vimg, m\_sel);}
\DoxyCodeLine{00559   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *level =}
\DoxyCodeLine{00560       TTool::getApplication()-\/>getCurrentLevel()-\/>getSimpleLevel();}
\DoxyCodeLine{00561   TUndoManager::manager()-\/>add(\textcolor{keyword}{new} UngroupUndo(level, tool-\/>\mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}(),}
\DoxyCodeLine{00562                                                \textcolor{keyword}{new} \mbox{\hyperlink{class_stroke_selection}{StrokeSelection}}(*m\_sel)));}
\DoxyCodeLine{00563 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_t_group_command_ad287d1f96507ea31a5fd165064b326c7}\label{class_t_group_command_ad287d1f96507ea31a5fd165064b326c7}} 
\index{TGroupCommand@{TGroupCommand}!m\_sel@{m\_sel}}
\index{m\_sel@{m\_sel}!TGroupCommand@{TGroupCommand}}
\doxysubsubsection{\texorpdfstring{m\_sel}{m\_sel}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_stroke_selection}{Stroke\+Selection}}$\ast$ TGroup\+Command\+::m\+\_\+sel}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/tools/imagegrouping.\+h\item 
E\+:/opentoonz/toonz/sources/tnztools/imagegrouping.\+cpp\end{DoxyCompactItemize}
