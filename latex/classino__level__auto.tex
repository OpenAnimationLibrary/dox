\hypertarget{classino__level__auto}{}\doxysection{ino\+\_\+level\+\_\+auto Class Reference}
\label{classino__level__auto}\index{ino\_level\_auto@{ino\_level\_auto}}
Inheritance diagram for ino\+\_\+level\+\_\+auto\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=6.000000cm]{classino__level__auto}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{classino__level__auto_a24fd4daf3ec3bf121b30569fa6ef4ef1}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
bool \mbox{\hyperlink{classino__level__auto_a2282cd53cb921cee943ea6efd4134179}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\item 
void \mbox{\hyperlink{classino__level__auto_abecd953d3e66c76334f00ea05d7c84f7}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&rend\+\_\+sets) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classino__level__auto_aa0407c64ad70f04bd4fddf3960888665}\label{classino__level__auto_aa0407c64ad70f04bd4fddf3960888665}} 
\index{ino\_level\_auto@{ino\_level\_auto}!ino\_level\_auto@{ino\_level\_auto}}
\index{ino\_level\_auto@{ino\_level\_auto}!ino\_level\_auto@{ino\_level\_auto}}
\doxysubsubsection{\texorpdfstring{ino\_level\_auto()}{ino\_level\_auto()}}
{\footnotesize\ttfamily ino\+\_\+level\+\_\+auto\+::ino\+\_\+level\+\_\+auto (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00019       : m\_in\_min\_shift(0.0 * ino::param\_range())}
\DoxyCodeLine{00020       , m\_in\_max\_shift(0.0 * ino::param\_range())}
\DoxyCodeLine{00021       , m\_out\_min(0.0 * ino::param\_range())}
\DoxyCodeLine{00022       , m\_out\_max(1.0 * ino::param\_range())}
\DoxyCodeLine{00023       , m\_gamma(1.0 * ino::param\_range()) \{}
\DoxyCodeLine{00024     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Source"{}}, this-\/>m\_input);}
\DoxyCodeLine{00025 }
\DoxyCodeLine{00026     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}in\_min\_shift"{}}, this-\/>m\_in\_min\_shift);}
\DoxyCodeLine{00027     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}in\_max\_shift"{}}, this-\/>m\_in\_max\_shift);}
\DoxyCodeLine{00028     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}out\_min"{}}, this-\/>m\_out\_min);}
\DoxyCodeLine{00029     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}out\_max"{}}, this-\/>m\_out\_max);}
\DoxyCodeLine{00030     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}gamma"{}}, this-\/>m\_gamma);}
\DoxyCodeLine{00031 }
\DoxyCodeLine{00032     this-\/>m\_in\_min\_shift-\/>setValueRange(-\/1.0 * ino::param\_range(),}
\DoxyCodeLine{00033                                         1.0 * ino::param\_range());}
\DoxyCodeLine{00034     this-\/>m\_in\_max\_shift-\/>setValueRange(-\/1.0 * ino::param\_range(),}
\DoxyCodeLine{00035                                         1.0 * ino::param\_range());}
\DoxyCodeLine{00036     this-\/>m\_out\_min-\/>setValueRange(0.0 * ino::param\_range(),}
\DoxyCodeLine{00037                                    1.0 * ino::param\_range());}
\DoxyCodeLine{00038     this-\/>m\_out\_max-\/>setValueRange(0.0 * ino::param\_range(),}
\DoxyCodeLine{00039                                    1.0 * ino::param\_range());}
\DoxyCodeLine{00040     this-\/>m\_gamma-\/>setValueRange(0.1 * ino::param\_range(),}
\DoxyCodeLine{00041                                  10.0 * ino::param\_range()); \textcolor{comment}{/* gamma値 */}}
\DoxyCodeLine{00042   \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classino__level__auto_a2282cd53cb921cee943ea6efd4134179}\label{classino__level__auto_a2282cd53cb921cee943ea6efd4134179}} 
\index{ino\_level\_auto@{ino\_level\_auto}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!ino\_level\_auto@{ino\_level\_auto}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool ino\+\_\+level\+\_\+auto\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00052                                                                      \{}
\DoxyCodeLine{00053     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00054   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classino__level__auto_abecd953d3e66c76334f00ea05d7c84f7}\label{classino__level__auto_abecd953d3e66c76334f00ea05d7c84f7}} 
\index{ino\_level\_auto@{ino\_level\_auto}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!ino\_level\_auto@{ino\_level\_auto}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void ino\+\_\+level\+\_\+auto\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{rend\+\_\+sets }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00093                                                                  \{}
\DoxyCodeLine{00094   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 接続していなければ処理しない -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00095   \textcolor{keywordflow}{if} (!this-\/>m\_input.isConnected()) \{}
\DoxyCodeLine{00096     tile.getRaster()-\/>clear(); \textcolor{comment}{/* 塗りつぶしクリア */}}
\DoxyCodeLine{00097     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00098   \}}
\DoxyCodeLine{00099 }
\DoxyCodeLine{00100   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ サポートしていないPixelタイプはエラーを投げる -\/-\/-\/ */}}
\DoxyCodeLine{00101   \textcolor{keywordflow}{if} (!((\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}})tile.getRaster()) \&\& !((\mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}})tile.getRaster())) \{}
\DoxyCodeLine{00102     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_rop_exception}{TRopException}}(\textcolor{stringliteral}{"{}unsupported input pixel type"{}});}
\DoxyCodeLine{00103   \}}
\DoxyCodeLine{00104 }
\DoxyCodeLine{00105   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 動作パラメータを得る -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00106   \textcolor{keywordtype}{bool} act\_sw[4];}
\DoxyCodeLine{00107   \textcolor{keywordtype}{double} in\_min\_sft[4];}
\DoxyCodeLine{00108   \textcolor{keywordtype}{double} in\_max\_sft[4];}
\DoxyCodeLine{00109   \textcolor{keywordtype}{double} out\_min[4];}
\DoxyCodeLine{00110   \textcolor{keywordtype}{double} out\_max[4];}
\DoxyCodeLine{00111   \textcolor{keywordtype}{double} gamma[4];}
\DoxyCodeLine{00112 }
\DoxyCodeLine{00113   act\_sw[0] = act\_sw[1] = act\_sw[2] = act\_sw[3] = \textcolor{keyword}{true};}
\DoxyCodeLine{00114   in\_min\_sft[0] = in\_min\_sft[1] = in\_min\_sft[2] = in\_min\_sft[3] =}
\DoxyCodeLine{00115       this-\/>m\_in\_min\_shift-\/>getValue(frame) / ino::param\_range();}
\DoxyCodeLine{00116   in\_max\_sft[0] = in\_max\_sft[1] = in\_max\_sft[2] = in\_max\_sft[3] =}
\DoxyCodeLine{00117       this-\/>m\_in\_max\_shift-\/>getValue(frame) / ino::param\_range();}
\DoxyCodeLine{00118   out\_min[0] = out\_min[1] = out\_min[2] = out\_min[3] =}
\DoxyCodeLine{00119       this-\/>m\_out\_min-\/>getValue(frame) / ino::param\_range();}
\DoxyCodeLine{00120   out\_max[0] = out\_max[1] = out\_max[2] = out\_max[3] =}
\DoxyCodeLine{00121       this-\/>m\_out\_max-\/>getValue(frame) / ino::param\_range();}
\DoxyCodeLine{00122   gamma[0] = gamma[1] = gamma[2] = gamma[3] =}
\DoxyCodeLine{00123       \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(this-\/>m\_gamma-\/>getValue(frame) / ino::param\_range());}
\DoxyCodeLine{00124   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 画像生成 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00125   this-\/>m\_input-\/>compute(tile, frame, rend\_sets);}
\DoxyCodeLine{00126   \textcolor{comment}{/*-\/-\/-\/ カメラの範囲をノイズを掛ける範囲としておく(余白含ず) -\/*/}}
\DoxyCodeLine{00127   \textcolor{keywordtype}{int} camera\_x = 0;}
\DoxyCodeLine{00128   \textcolor{keywordtype}{int} camera\_y = 0;}
\DoxyCodeLine{00129   \textcolor{keywordtype}{int} camera\_w = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(rend\_sets.m\_cameraBox.getLx() + 0.5);}
\DoxyCodeLine{00130   \textcolor{keywordtype}{int} camera\_h = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(rend\_sets.m\_cameraBox.getLy() + 0.5);}
\DoxyCodeLine{00131   \textcolor{comment}{/*-\/-\/-\/ カメラ範囲外へのmargin付き(たぶん)はノイズ範囲から外す -\/*/}}
\DoxyCodeLine{00132   \textcolor{keyword}{const} \textcolor{keywordtype}{int} margin\_w = tile.getRaster()-\/>getLx() -\/ camera\_w;}
\DoxyCodeLine{00133   \textcolor{keyword}{const} \textcolor{keywordtype}{int} margin\_h = tile.getRaster()-\/>getLy() -\/ camera\_h;}
\DoxyCodeLine{00134   \textcolor{keywordflow}{if} ((0 <= margin\_h \&\& 0 < margin\_w)    \textcolor{comment}{/* 横方向のみ余白あり */}}
\DoxyCodeLine{00135       || (0 < margin\_h \&\& 0 <= margin\_w) \textcolor{comment}{/* 縦方向のみ余白あり */}}
\DoxyCodeLine{00136       || (0 < margin\_h \&\& 0 < margin\_w)  \textcolor{comment}{/* 縦横両方に余白あり */}}
\DoxyCodeLine{00137   ) \{}
\DoxyCodeLine{00138     \textcolor{comment}{/*camera\_x = static\_cast<int>(ceil((double)margin\_w / 2.));}}
\DoxyCodeLine{00139 \textcolor{comment}{    camera\_y = static\_cast<int>(ceil((double)margin\_h / 2.));*/}}
\DoxyCodeLine{00140     camera\_x = margin\_w / 2;}
\DoxyCodeLine{00141     camera\_y = margin\_h / 2;}
\DoxyCodeLine{00142     camera\_w = rend\_sets.m\_cameraBox.getLx();}
\DoxyCodeLine{00143     camera\_h = rend\_sets.m\_cameraBox.getLy();}
\DoxyCodeLine{00144   \}}
\DoxyCodeLine{00145   \textcolor{comment}{/*-\/-\/-\/ 入力画像がカメラより一部でも小さい}}
\DoxyCodeLine{00146 \textcolor{comment}{          (ノイズ範囲指定対応できない-\/-\/>懸案事項) -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00147   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00148     camera\_w = tile.getRaster()-\/>getLx();}
\DoxyCodeLine{00149     camera\_h = tile.getRaster()-\/>getLy();}
\DoxyCodeLine{00150   \}}
\DoxyCodeLine{00151   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ (app\_begin)log記憶 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00152   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} log\_sw = ino::log\_enable\_sw();}
\DoxyCodeLine{00153 }
\DoxyCodeLine{00154   \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00155     std::ostringstream os;}
\DoxyCodeLine{00156     os << \textcolor{stringliteral}{"{}params  act true"{}}}
\DoxyCodeLine{00157        << \textcolor{stringliteral}{"{}  in\_min\_shift "{}} << in\_min\_sft[0] << \textcolor{stringliteral}{"{}  in\_max\_shift "{}}}
\DoxyCodeLine{00158        << in\_max\_sft[0] << \textcolor{stringliteral}{"{}  out\_min "{}} << out\_min[0] << \textcolor{stringliteral}{"{}  out\_max "{}}}
\DoxyCodeLine{00159        << out\_max[0] << \textcolor{stringliteral}{"{}  gamma "{}} << gamma[0] << \textcolor{stringliteral}{"{}  frame "{}} << frame}
\DoxyCodeLine{00160        << \textcolor{stringliteral}{"{}  pixbits "{}} << ino::pixel\_bits(tile.getRaster()) << \textcolor{stringliteral}{"{}  tile.m\_pos "{}}}
\DoxyCodeLine{00161        << tile.m\_pos << \textcolor{stringliteral}{"{}  tile\_getLx "{}} << tile.getRaster()-\/>getLx() << \textcolor{stringliteral}{"{}  y "{}}}
\DoxyCodeLine{00162        << tile.getRaster()-\/>getLy() << \textcolor{stringliteral}{"{}  rend\_sets.m\_cameraBox "{}}}
\DoxyCodeLine{00163        << rend\_sets.m\_cameraBox << \textcolor{stringliteral}{"{}  rend\_sets.m\_affine "{}} << rend\_sets.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}}
\DoxyCodeLine{00164        << \textcolor{stringliteral}{"{}  camera x "{}} << camera\_x << \textcolor{stringliteral}{"{}  y "{}} << camera\_y << \textcolor{stringliteral}{"{}  w "{}} << camera\_w}
\DoxyCodeLine{00165        << \textcolor{stringliteral}{"{}  h "{}} << camera\_h;}
\DoxyCodeLine{00166   \}}
\DoxyCodeLine{00167   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ fx処理 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00168   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00169     tile.getRaster()-\/>lock();}
\DoxyCodeLine{00170     fx\_(tile.getRaster(), act\_sw, in\_min\_sft, in\_max\_sft, out\_min, out\_max,}
\DoxyCodeLine{00171         gamma, camera\_x, camera\_y, camera\_w, camera\_h);}
\DoxyCodeLine{00172     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00173   \}}
\DoxyCodeLine{00174   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ error処理 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00175   \textcolor{keywordflow}{catch} (std::bad\_alloc \&e) \{}
\DoxyCodeLine{00176     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00177     \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00178       std::string str(\textcolor{stringliteral}{"{}std::bad\_alloc <"{}});}
\DoxyCodeLine{00179       str += e.what();}
\DoxyCodeLine{00180       str += \textcolor{charliteral}{'>'};}
\DoxyCodeLine{00181     \}}
\DoxyCodeLine{00182     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00183   \} \textcolor{keywordflow}{catch} (std::exception \&e) \{}
\DoxyCodeLine{00184     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00185     \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00186       std::string str(\textcolor{stringliteral}{"{}exception <"{}});}
\DoxyCodeLine{00187       str += e.what();}
\DoxyCodeLine{00188       str += \textcolor{charliteral}{'>'};}
\DoxyCodeLine{00189     \}}
\DoxyCodeLine{00190     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00191   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00192     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00193     \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00194       std::string str(\textcolor{stringliteral}{"{}other exception"{}});}
\DoxyCodeLine{00195     \}}
\DoxyCodeLine{00196     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00197   \}}
\DoxyCodeLine{00198 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classino__level__auto_a24fd4daf3ec3bf121b30569fa6ef4ef1}\label{classino__level__auto_a24fd4daf3ec3bf121b30569fa6ef4ef1}} 
\index{ino\_level\_auto@{ino\_level\_auto}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!ino\_level\_auto@{ino\_level\_auto}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool ino\+\_\+level\+\_\+auto\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00044                                                        \{}
\DoxyCodeLine{00045     \textcolor{keywordflow}{if} (this-\/>m\_input.isConnected()) \{}
\DoxyCodeLine{00046       \textcolor{keywordflow}{return} this-\/>m\_input-\/>doGetBBox(frame, bBox, info);}
\DoxyCodeLine{00047     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00048       bBox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00049       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00050     \}}
\DoxyCodeLine{00051   \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/ino\+\_\+level\+\_\+auto.\+cpp\end{DoxyCompactItemize}
