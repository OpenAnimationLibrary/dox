\hypertarget{class_c_s_t_pic}{}\doxysection{CSTPic\texorpdfstring{$<$}{<} P \texorpdfstring{$>$}{>} Class Template Reference}
\label{class_c_s_t_pic}\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}


{\ttfamily \#include $<$STPic.\+h$>$}

Inheritance diagram for CSTPic\texorpdfstring{$<$}{<} P \texorpdfstring{$>$}{>}\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_c_s_t_pic}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_c_s_t_pic_a1f387b8a42526e6f894a8306100c82f3}{null\+Pic}} ()
\item 
void \mbox{\hyperlink{class_c_s_t_pic_ab064a2f6b02565124a1cad1748a65b4f}{lock}} ()
\begin{DoxyCompactList}\small\item\em Retrieves the raster image from the cache to work with it. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_c_s_t_pic_a7a4af9d2c4118800036bf8501daee2a9}{unlock}} ()
\begin{DoxyCompactList}\small\item\em Release the raster image for inactivity periods. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_c_s_t_pic_a5744d1efefbb3cbf2775448980b32dbf}{CSTPic}} (const int lX, const int lY)
\item 
\mbox{\hyperlink{class_c_s_t_pic_a28125e9cb31ffe8e65f308c16e6b28a5}{CSTPic}} (const \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$ \&sp)
\item 
void \mbox{\hyperlink{class_c_s_t_pic_ad481a6c5ca2e3e95b27c756f5a50c999}{init\+Pic}} ()
\item 
void \mbox{\hyperlink{class_c_s_t_pic_aaaa1ff6f78688e06634ca7a5ed00ed62}{null}} ()
\item 
void \mbox{\hyperlink{class_c_s_t_pic_ac2d723c1ca70b43b789e8593a564d262}{draw\+Rect}} (const P \&ip)
\item 
ST\+\_\+\+TYPE \mbox{\hyperlink{class_c_s_t_pic_ac9f5dc9d8b7c65c2dc5fd205a0242020}{get\+Type}} () const
\item 
void \mbox{\hyperlink{class_c_s_t_pic_a5735c89fa921c2b779b0a1bda7eabbad}{copy\+Pic}} (const \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$ \&sp)
\item 
void \mbox{\hyperlink{class_c_s_t_pic_ad5a4bfee789c6148e024415f5f72d0d8}{copy\+Pic}} (const \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$ \&sp, const \mbox{\hyperlink{struct_s_r_e_c_t}{SRECT}} \&r, const \mbox{\hyperlink{struct_s_p_o_i_n_t}{SPOINT}} \&p)
\item 
void \mbox{\hyperlink{class_c_s_t_pic_a66e869b891951675d343458a7e1437ff}{draw\+Rect}} (const \mbox{\hyperlink{struct_s_r_e_c_t}{SRECT}} \&rect, const P \&ip)
\item 
void \mbox{\hyperlink{class_c_s_t_pic_a34fcac0c20d76e7038ad09e5fe7bfdf7}{erease}} ()
\item 
void \mbox{\hyperlink{class_c_s_t_pic_a34528ccab529c333d7364dd50b4bacff}{fill}} (const P \&ip)
\item 
bool \mbox{\hyperlink{class_c_s_t_pic_abd6fcb38f4ca9df825bd280750a71a4b}{is\+In\+Pic}} (const int x, const int y) const
\item 
void \mbox{\hyperlink{class_c_s_t_pic_a2ea0228ab50586797d400e357b6e0fd1}{set\+RGB}} (const int x, const int y, const P \&ip)
\item 
void \mbox{\hyperlink{class_c_s_t_pic_af01681c464a80efe8ebccfe2b4117012}{set\+RGBM}} (const int x, const int y, const P \&ip)
\item 
void \mbox{\hyperlink{class_c_s_t_pic_a908e34e89cdcef5a74093ba22692c516}{set\+RGB}} (const int x, const int y, const \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&ip)
\item 
void \mbox{\hyperlink{class_c_s_t_pic_aea8ed106cad326e7203c4eae71ef848b}{set\+RGBM}} (const int x, const int y, const \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&ip)
\item 
void \mbox{\hyperlink{class_c_s_t_pic_afaefcabcb6c7aa39ce9ab220ad306e4e}{get\+Pixel}} (const int x, const int y, P \&ip) const
\item 
void \mbox{\hyperlink{class_c_s_t_pic_af6b617fb67363eeedd1d19a0f00a2ca6}{get\+Pixel}} (const int x, const int y, \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&ip) const
\item 
void \mbox{\hyperlink{class_c_s_t_pic_a8a5f187dbddd77333ac09347265068d1}{get\+Raster\+Pixel}} (const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$ras, const int x, const int y, \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&ip) const
\item 
void \mbox{\hyperlink{class_c_s_t_pic_a940642c3324f95154c41d1102d8c574d}{get\+Raster\+Pixel}} (const int x, const int y, \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&ip) const
\item 
void \mbox{\hyperlink{class_c_s_t_pic_afe817d6683efc153603049c51db11f53}{set\+Raster\+Pixel}} (\mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$ras, const int x, const int y, const \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&ip) const
\item 
bool \mbox{\hyperlink{class_c_s_t_pic_ad16eabe06260f72f29682811846696c1}{copy\+\_\+raster}} (const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$ir, \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$out\+\_\+r, const int x\+Beg, const int y\+Beg, const int x\+End, const int y\+End, const int ox, const int oy)
\item 
virtual void \mbox{\hyperlink{class_c_s_t_pic_a95b3eea147c606262e4f41a21839b9c8}{read}} (const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$ras)
\item 
const \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$ \& \mbox{\hyperlink{class_c_s_t_pic_a445ad3e91904d1649b28a123a0fd0995}{operator=}} (const \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$ \&sp)
\item 
virtual void \mbox{\hyperlink{class_c_s_t_pic_a8fe776f8c5db000b70980f38015575b1}{write}} (\mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$ras) const
\item 
virtual void \mbox{\hyperlink{class_c_s_t_pic_abd4f71a56b6a60064305a38fb8ed469f}{write}} (\mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$ras, const \mbox{\hyperlink{struct_s_r_e_c_t}{SRECT}} \&r, const \mbox{\hyperlink{struct_s_p_o_i_n_t}{SPOINT}} \&p) const
\item 
virtual void \mbox{\hyperlink{class_c_s_t_pic_ae57b9580f888f9e67308e2acb96b0462}{write\+Out\+Border}} (const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$rasin, const int border, \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$ras, const \mbox{\hyperlink{struct_s_r_e_c_t}{SRECT}} \&r, const \mbox{\hyperlink{struct_s_p_o_i_n_t}{SPOINT}} \&p) const
\item 
void \mbox{\hyperlink{class_c_s_t_pic_a84534d11fdb50f6a80ac343ea80e0363}{convert\+To\+Current\+Type}} (P \&d, const \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&s) const
\item 
bool \mbox{\hyperlink{class_c_s_t_pic_a16a96008ab2bf1f4697526b2f2e069e1}{is\+Same\+Color}} (const P $\ast$a, const P $\ast$b) const
\item 
void \mbox{\hyperlink{class_c_s_t_pic_a1980204855dc696aef0c67aaddcf6254}{color\+Noise}} (const \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&cc1, const \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&cc2, const double d)
\item 
void \mbox{\hyperlink{class_c_s_t_pic_a0a9738de965c97e164c49a184510553f}{rgb2hls}} (UCHAR r, UCHAR g, UCHAR b, double $\ast$h, double $\ast$l, double $\ast$s)
\item 
double \mbox{\hyperlink{class_c_s_t_pic_a340934ad7e8f935ca32726b235421d7d}{from\+Hue}} (double n1, double n2, double hue)
\item 
void \mbox{\hyperlink{class_c_s_t_pic_ae4901cf1c068e42afcc3f1bad783f844}{hls2rgb}} (double h, double l, double s, UCHAR $\ast$r, UCHAR $\ast$g, UCHAR $\ast$b)
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{class_c_s_t_pic_ae6f4b4ca344ce528fe2389e616af775c}{m\+\_\+lX}}
\item 
int \mbox{\hyperlink{class_c_s_t_pic_a510dc86bf0be11ff15c5ddb2fbe9ef61}{m\+\_\+lY}}
\item 
P $\ast$ \mbox{\hyperlink{class_c_s_t_pic_a5053d193ce438f450a0f629ed7a13799}{m\+\_\+pic}}
\item 
const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$ \mbox{\hyperlink{class_c_s_t_pic_a2608edeab007a7cce20efa940c76040b}{m\+\_\+ras}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$class P$>$\newline
class CSTPic$<$ P $>$}
Old 4.\+6 picture class template (sandor fxs). There is a significant modification to be considered starting from Toonz 6.\+1 -\/ the allocated raster is now managed by the image cache. Basically, when constructing one such object, the image is locked in the Toonz cache -\/ and you must remember to unlock and relock it along inactivity periods. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_c_s_t_pic_a7042f4644cad0784ca0476080d6c3ca2}\label{class_c_s_t_pic_a7042f4644cad0784ca0476080d6c3ca2}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!CSTPic@{CSTPic}}
\index{CSTPic@{CSTPic}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{CSTPic()}{CSTPic()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily template$<$class P $>$ \\
\mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\mbox{\hyperlink{class_c_s_t_pic}{\+::\+CSTPic}} (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00064       : m\_cacheId(TImageCache::instance()-\/>getUniqueId())}
\DoxyCodeLine{00065       , m\_lX(0)}
\DoxyCodeLine{00066       , m\_lY(0)}
\DoxyCodeLine{00067       , m\_pic(0)}
\DoxyCodeLine{00068       , m\_ras(0) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a5744d1efefbb3cbf2775448980b32dbf}\label{class_c_s_t_pic_a5744d1efefbb3cbf2775448980b32dbf}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!CSTPic@{CSTPic}}
\index{CSTPic@{CSTPic}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{CSTPic()}{CSTPic()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily template$<$class P $>$ \\
\mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\mbox{\hyperlink{class_c_s_t_pic}{\+::\+CSTPic}} (\begin{DoxyParamCaption}\item[{const int}]{lX,  }\item[{const int}]{lY }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00089       :  \textcolor{comment}{// throw(SMemAllocError) :}}
\DoxyCodeLine{00090       m\_cacheId(TImageCache::instance()-\/>getUniqueId())}
\DoxyCodeLine{00091       , m\_lX(lX)}
\DoxyCodeLine{00092       , m\_lY(lY)}
\DoxyCodeLine{00093       , m\_pic(0)}
\DoxyCodeLine{00094       , m\_ras(0) \{}
\DoxyCodeLine{00095     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00096       \mbox{\hyperlink{class_c_s_t_pic_ad481a6c5ca2e3e95b27c756f5a50c999}{initPic}}();}
\DoxyCodeLine{00097     \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_s_mem_alloc_error}{SMemAllocError}}) \{}
\DoxyCodeLine{00098       null();}
\DoxyCodeLine{00099       \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00100     \}}
\DoxyCodeLine{00101   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a28125e9cb31ffe8e65f308c16e6b28a5}\label{class_c_s_t_pic_a28125e9cb31ffe8e65f308c16e6b28a5}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!CSTPic@{CSTPic}}
\index{CSTPic@{CSTPic}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{CSTPic()}{CSTPic()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily template$<$class P $>$ \\
\mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\mbox{\hyperlink{class_c_s_t_pic}{\+::\+CSTPic}} (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$ \&}]{sp }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00104       :  \textcolor{comment}{// throw(SMemAllocError) :}}
\DoxyCodeLine{00105       m\_lX(sp.m\_lX)}
\DoxyCodeLine{00106       , m\_lY(sp.m\_lY)}
\DoxyCodeLine{00107       , m\_pic(0)}
\DoxyCodeLine{00108       , m\_ras(sp.m\_ras) \{}
\DoxyCodeLine{00109     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00110       \mbox{\hyperlink{class_c_s_t_pic_ad481a6c5ca2e3e95b27c756f5a50c999}{initPic}}();}
\DoxyCodeLine{00111       copyPic(sp);}
\DoxyCodeLine{00112     \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_s_mem_alloc_error}{SMemAllocError}}) \{}
\DoxyCodeLine{00113       null();}
\DoxyCodeLine{00114       \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00115     \}}
\DoxyCodeLine{00116   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_ab103a0615584eaa2ce929f2d28246cb2}\label{class_c_s_t_pic_ab103a0615584eaa2ce929f2d28246cb2}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!````~CSTPic@{$\sim$CSTPic}}
\index{````~CSTPic@{$\sim$CSTPic}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{$\sim$CSTPic()}{~CSTPic()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
\mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::$\sim$\mbox{\hyperlink{class_c_s_t_pic}{CSTPic}} (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00118 \{ null(); \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_c_s_t_pic_a1980204855dc696aef0c67aaddcf6254}\label{class_c_s_t_pic_a1980204855dc696aef0c67aaddcf6254}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!colorNoise@{colorNoise}}
\index{colorNoise@{colorNoise}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{colorNoise()}{colorNoise()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::color\+Noise (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&}]{cc1,  }\item[{const \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&}]{cc2,  }\item[{const double}]{d }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00609                                                                           \{}
\DoxyCodeLine{00610     P c1, c2;}
\DoxyCodeLine{00611 }
\DoxyCodeLine{00612     \textcolor{keywordflow}{if} (d <= 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00613 }
\DoxyCodeLine{00614     convertToCurrentType(c1, cc1);}
\DoxyCodeLine{00615     convertToCurrentType(c2, cc2);}
\DoxyCodeLine{00616     \textcolor{keywordtype}{int} xy  = m\_lX * m\_lY;}
\DoxyCodeLine{00617     P *pPic = m\_pic;}
\DoxyCodeLine{00618     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < xy; i++, pPic++)}
\DoxyCodeLine{00619       \textcolor{keywordflow}{if} (isSameColor(\&c1, pPic)) \{}
\DoxyCodeLine{00620         \textcolor{keywordtype}{double} q = (rand() \% 101) / 100.0;}
\DoxyCodeLine{00621         q        = d * q;}
\DoxyCodeLine{00622         q        = q > 1.0 ? 1.0 : q;}
\DoxyCodeLine{00623         \textcolor{keywordtype}{double} r = (1.0 -\/ q) * (\textcolor{keywordtype}{double})c1.r + q * (double)c2.r;}
\DoxyCodeLine{00624         \textcolor{keywordtype}{double} g = (1.0 -\/ q) * (double)c1.g + q * (\textcolor{keywordtype}{double})c2.g;}
\DoxyCodeLine{00625         \textcolor{keywordtype}{double} b = (1.0 -\/ q) * (\textcolor{keywordtype}{double})c1.b + q * (double)c2.b;}
\DoxyCodeLine{00626         r        = D\_CUT\_0\_255(r);}
\DoxyCodeLine{00627         g        = D\_CUT\_0\_255(g);}
\DoxyCodeLine{00628         b        = D\_CUT\_0\_255(b);}
\DoxyCodeLine{00629         pPic-\/>r  = UC\_ROUND(r);}
\DoxyCodeLine{00630         pPic-\/>g  = UC\_ROUND(g);}
\DoxyCodeLine{00631         pPic-\/>b  = UC\_ROUND(b);}
\DoxyCodeLine{00632       \}}
\DoxyCodeLine{00633   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a84534d11fdb50f6a80ac343ea80e0363}\label{class_c_s_t_pic_a84534d11fdb50f6a80ac343ea80e0363}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!convertToCurrentType@{convertToCurrentType}}
\index{convertToCurrentType@{convertToCurrentType}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{convertToCurrentType()}{convertToCurrentType()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::convert\+To\+Current\+Type (\begin{DoxyParamCaption}\item[{P \&}]{d,  }\item[{const \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&}]{s }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00589                                                           \{}
\DoxyCodeLine{00590     \textcolor{keywordflow}{if} (getType() == ST\_RGBM) \{}
\DoxyCodeLine{00591       d.r = (UCHAR)s.r;}
\DoxyCodeLine{00592       d.g = (UCHAR)s.g;}
\DoxyCodeLine{00593       d.b = (UCHAR)s.b;}
\DoxyCodeLine{00594       d.m = (UCHAR)s.m;}
\DoxyCodeLine{00595     \}}
\DoxyCodeLine{00596     \textcolor{keywordflow}{if} (getType() == ST\_RGBM64) \{}
\DoxyCodeLine{00597       d.r = (USHORT)s.r;}
\DoxyCodeLine{00598       d.g = (USHORT)s.g;}
\DoxyCodeLine{00599       d.b = (USHORT)s.b;}
\DoxyCodeLine{00600       d.m = (USHORT)s.m;}
\DoxyCodeLine{00601     \}}
\DoxyCodeLine{00602   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_ad16eabe06260f72f29682811846696c1}\label{class_c_s_t_pic_ad16eabe06260f72f29682811846696c1}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!copy\_raster@{copy\_raster}}
\index{copy\_raster@{copy\_raster}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{copy\_raster()}{copy\_raster()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
bool \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::copy\+\_\+raster (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$}]{ir,  }\item[{\mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$}]{out\+\_\+r,  }\item[{const int}]{x\+Beg,  }\item[{const int}]{y\+Beg,  }\item[{const int}]{x\+End,  }\item[{const int}]{y\+End,  }\item[{const int}]{ox,  }\item[{const int}]{oy }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00373   \{}
\DoxyCodeLine{00374     \textcolor{keywordflow}{if} ((ir-\/>lx <= 0) || (ir-\/>ly <= 0) || (out\_r-\/>lx <= 0) || (out\_r-\/>ly <= 0))}
\DoxyCodeLine{00375       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00376     \textcolor{keywordflow}{if} (ir-\/>buffer == NULL || out\_r-\/>buffer == NULL) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00377     \textcolor{keywordflow}{if} (out\_r-\/>type == RAS\_CM32) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00378     \textcolor{keywordflow}{if} (ir-\/>type == RAS\_CM32 \&\& (ir-\/>cmap.buffer == NULL)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00379 }
\DoxyCodeLine{00380     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = yBeg, yy = oy; y <= yEnd; y++, yy++)}
\DoxyCodeLine{00381       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = xBeg, xx = ox; x <= xEnd; x++, xx++) \{}
\DoxyCodeLine{00382         \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\_PIXEL}} ip;}
\DoxyCodeLine{00383         getRasterPixel(ir, x, y, ip);}
\DoxyCodeLine{00384         \textcolor{keywordflow}{if} (xx >= 0 \&\& yy >= 0 \&\& xx < out\_r-\/>lx \&\& yy < out\_r-\/>ly) \{}
\DoxyCodeLine{00385           \mbox{\hyperlink{struct_l_p_i_x_e_l}{LPIXEL}} *pL;}
\DoxyCodeLine{00386           \mbox{\hyperlink{struct_s_p_i_x_e_l}{SPIXEL}} *pS;}
\DoxyCodeLine{00387           \textcolor{keywordflow}{if} (out\_r-\/>type == RAS\_RGBM \&\&}
\DoxyCodeLine{00388               (ir-\/>type == RAS\_RGBM || ir-\/>type == RAS\_CM32)) \{}
\DoxyCodeLine{00389             pL    = (\mbox{\hyperlink{struct_l_p_i_x_e_l}{LPIXEL}} *)(out\_r-\/>buffer) + yy * out\_r-\/>wrap + xx;}
\DoxyCodeLine{00390             pL-\/>r = (UCHAR)ip.r;}
\DoxyCodeLine{00391             pL-\/>g = (UCHAR)ip.g;}
\DoxyCodeLine{00392             pL-\/>b = (UCHAR)ip.b;}
\DoxyCodeLine{00393             pL-\/>m = (UCHAR)ip.m;}
\DoxyCodeLine{00394           \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (out\_r-\/>type == RAS\_RGBM \&\& ir-\/>type == RAS\_RGBM64) \{}
\DoxyCodeLine{00395             pL    = (\mbox{\hyperlink{struct_l_p_i_x_e_l}{LPIXEL}} *)(out\_r-\/>buffer) + yy * out\_r-\/>wrap + xx;}
\DoxyCodeLine{00396             pL-\/>r = PIX\_BYTE\_FROM\_USHORT((USHORT)ip.r);}
\DoxyCodeLine{00397             pL-\/>g = PIX\_BYTE\_FROM\_USHORT((USHORT)ip.g);}
\DoxyCodeLine{00398             pL-\/>b = PIX\_BYTE\_FROM\_USHORT((USHORT)ip.b);}
\DoxyCodeLine{00399             pL-\/>m = PIX\_BYTE\_FROM\_USHORT((USHORT)ip.m);}
\DoxyCodeLine{00400           \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (out\_r-\/>type == RAS\_RGBM64 \&\&}
\DoxyCodeLine{00401                      (ir-\/>type == RAS\_RGBM || ir-\/>type == RAS\_CM32)) \{}
\DoxyCodeLine{00402             pS    = (\mbox{\hyperlink{struct_s_p_i_x_e_l}{SPIXEL}} *)(out\_r-\/>buffer) + yy * out\_r-\/>wrap + xx;}
\DoxyCodeLine{00403             pS-\/>r = PIX\_USHORT\_FROM\_BYTE((UCHAR)ip.r);}
\DoxyCodeLine{00404             pS-\/>g = PIX\_USHORT\_FROM\_BYTE((UCHAR)ip.g);}
\DoxyCodeLine{00405             pS-\/>b = PIX\_USHORT\_FROM\_BYTE((UCHAR)ip.b);}
\DoxyCodeLine{00406             pS-\/>m = PIX\_USHORT\_FROM\_BYTE((UCHAR)ip.m);}
\DoxyCodeLine{00407           \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (out\_r-\/>type == RAS\_RGBM64 \&\& ir-\/>type == RAS\_RGBM64) \{}
\DoxyCodeLine{00408             pS    = (\mbox{\hyperlink{struct_s_p_i_x_e_l}{SPIXEL}} *)(out\_r-\/>buffer) + yy * out\_r-\/>wrap + xx;}
\DoxyCodeLine{00409             pS-\/>r = (USHORT)ip.r;}
\DoxyCodeLine{00410             pS-\/>g = (USHORT)ip.g;}
\DoxyCodeLine{00411             pS-\/>b = (USHORT)ip.b;}
\DoxyCodeLine{00412             pS-\/>m = (USHORT)ip.m;}
\DoxyCodeLine{00413           \}}
\DoxyCodeLine{00414         \}}
\DoxyCodeLine{00415       \}}
\DoxyCodeLine{00416     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00417   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a5735c89fa921c2b779b0a1bda7eabbad}\label{class_c_s_t_pic_a5735c89fa921c2b779b0a1bda7eabbad}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!copyPic@{copyPic}}
\index{copyPic@{copyPic}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{copyPic()}{copyPic()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::copy\+Pic (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$ \&}]{sp }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00166                                     \{}
\DoxyCodeLine{00167     P p;}
\DoxyCodeLine{00168     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < m\_lY \&\& y < sp.m\_lY; y++)}
\DoxyCodeLine{00169       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < m\_lX \&\& x < sp.m\_lX; x++) \{}
\DoxyCodeLine{00170         sp.getPixel(x, y, p);}
\DoxyCodeLine{00171         setRGBM(x, y, p);}
\DoxyCodeLine{00172       \}}
\DoxyCodeLine{00173   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_ad5a4bfee789c6148e024415f5f72d0d8}\label{class_c_s_t_pic_ad5a4bfee789c6148e024415f5f72d0d8}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!copyPic@{copyPic}}
\index{copyPic@{copyPic}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{copyPic()}{copyPic()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::copy\+Pic (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$ \&}]{sp,  }\item[{const \mbox{\hyperlink{struct_s_r_e_c_t}{SRECT}} \&}]{r,  }\item[{const \mbox{\hyperlink{struct_s_p_o_i_n_t}{SPOINT}} \&}]{p }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00177                                                                      \{}
\DoxyCodeLine{00178     P ip;}
\DoxyCodeLine{00179     \textcolor{keywordtype}{int} xs, ys, xd, yd;}
\DoxyCodeLine{00180     \textcolor{keywordflow}{for} (ys = r.y0, yd = p.y; ys <= r.y1; ys++, yd++)}
\DoxyCodeLine{00181       \textcolor{keywordflow}{for} (xs = r.x0, xd = p.x; xs <= r.x1; xs++, xd++) \{}
\DoxyCodeLine{00182         sp.getPixel(xs, ys, ip);}
\DoxyCodeLine{00183         setRGBM(xd, yd, ip);}
\DoxyCodeLine{00184       \}}
\DoxyCodeLine{00185   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_ac2d723c1ca70b43b789e8593a564d262}\label{class_c_s_t_pic_ac2d723c1ca70b43b789e8593a564d262}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!drawRect@{drawRect}}
\index{drawRect@{drawRect}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{drawRect()}{drawRect()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::draw\+Rect (\begin{DoxyParamCaption}\item[{const P \&}]{ip }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00146                              \{}
\DoxyCodeLine{00147     \mbox{\hyperlink{struct_s_r_e_c_t}{SRECT}} rect = \{0, 0, m\_lX -\/ 1, m\_lY -\/ 1\};}
\DoxyCodeLine{00148     drawRect(rect, ip);}
\DoxyCodeLine{00149   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a66e869b891951675d343458a7e1437ff}\label{class_c_s_t_pic_a66e869b891951675d343458a7e1437ff}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!drawRect@{drawRect}}
\index{drawRect@{drawRect}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{drawRect()}{drawRect()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::draw\+Rect (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_s_r_e_c_t}{SRECT}} \&}]{rect,  }\item[{const P \&}]{ip }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00188                                                 \{}
\DoxyCodeLine{00189     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = rect.x0; x <= rect.x1; x++) \{}
\DoxyCodeLine{00190       setRGBM(x, rect.y0, ip);}
\DoxyCodeLine{00191       setRGBM(x, rect.y1, ip);}
\DoxyCodeLine{00192     \}}
\DoxyCodeLine{00193     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = rect.y0; y <= rect.y1; y++) \{}
\DoxyCodeLine{00194       setRGBM(rect.x0, y, ip);}
\DoxyCodeLine{00195       setRGBM(rect.x1, y, ip);}
\DoxyCodeLine{00196     \}}
\DoxyCodeLine{00197   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a34fcac0c20d76e7038ad09e5fe7bfdf7}\label{class_c_s_t_pic_a34fcac0c20d76e7038ad09e5fe7bfdf7}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!erease@{erease}}
\index{erease@{erease}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{erease()}{erease()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::erease (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00199                 \{}
\DoxyCodeLine{00200     P p = \{0, 0, 0, 0\};}
\DoxyCodeLine{00201     fill(p);}
\DoxyCodeLine{00202   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a34528ccab529c333d7364dd50b4bacff}\label{class_c_s_t_pic_a34528ccab529c333d7364dd50b4bacff}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!fill@{fill}}
\index{fill@{fill}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{fill()}{fill()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::fill (\begin{DoxyParamCaption}\item[{const P \&}]{ip }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00204                          \{}
\DoxyCodeLine{00205     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < m\_lY; y++)}
\DoxyCodeLine{00206       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < m\_lX; x++) setRGBM(x, y, ip);}
\DoxyCodeLine{00207   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a340934ad7e8f935ca32726b235421d7d}\label{class_c_s_t_pic_a340934ad7e8f935ca32726b235421d7d}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!fromHue@{fromHue}}
\index{fromHue@{fromHue}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{fromHue()}{fromHue()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
double \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::from\+Hue (\begin{DoxyParamCaption}\item[{double}]{n1,  }\item[{double}]{n2,  }\item[{double}]{hue }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00679                                                    \{}
\DoxyCodeLine{00680     \textcolor{keywordtype}{double} v, h;}
\DoxyCodeLine{00681 }
\DoxyCodeLine{00682     h = hue > 360.0 ? hue -\/ 360.0 : hue;}
\DoxyCodeLine{00683     h = h < 0.0 ? h + 360.0 : h;}
\DoxyCodeLine{00684 }
\DoxyCodeLine{00685     \textcolor{keywordflow}{if} (h < 60.0) \{}
\DoxyCodeLine{00686       v = n1 + (n2 -\/ n1) * h / 60.0;}
\DoxyCodeLine{00687     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (h < 180.0) \{}
\DoxyCodeLine{00688       v = n2;}
\DoxyCodeLine{00689     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (h < 240.0) \{}
\DoxyCodeLine{00690       v = n1 + (n2 -\/ n1) * (240.0 -\/ h) / 60.0;}
\DoxyCodeLine{00691     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00692       v = n1;}
\DoxyCodeLine{00693     \textcolor{keywordflow}{return} (v);}
\DoxyCodeLine{00694   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_af6b617fb67363eeedd1d19a0f00a2ca6}\label{class_c_s_t_pic_af6b617fb67363eeedd1d19a0f00a2ca6}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!getPixel@{getPixel}}
\index{getPixel@{getPixel}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{getPixel()}{getPixel()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::get\+Pixel (\begin{DoxyParamCaption}\item[{const int}]{x,  }\item[{const int}]{y,  }\item[{\mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&}]{ip }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00277                                                              \{}
\DoxyCodeLine{00278     \textcolor{keywordflow}{if} (ISINPIC(x, y)) \{}
\DoxyCodeLine{00279       \textcolor{keyword}{const} P *p = m\_pic + y * m\_lX + x;}
\DoxyCodeLine{00280       ip.r       = (int)p-\/>r;}
\DoxyCodeLine{00281       ip.g       = (\textcolor{keywordtype}{int})p-\/>g;}
\DoxyCodeLine{00282       ip.b       = (int)p-\/>b;}
\DoxyCodeLine{00283       ip.m       = (\textcolor{keywordtype}{int})p-\/>m;}
\DoxyCodeLine{00284       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00285     \}}
\DoxyCodeLine{00286     ip.r = ip.g = ip.b = ip.m = 0;}
\DoxyCodeLine{00287   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_afaefcabcb6c7aa39ce9ab220ad306e4e}\label{class_c_s_t_pic_afaefcabcb6c7aa39ce9ab220ad306e4e}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!getPixel@{getPixel}}
\index{getPixel@{getPixel}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{getPixel()}{getPixel()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::get\+Pixel (\begin{DoxyParamCaption}\item[{const int}]{x,  }\item[{const int}]{y,  }\item[{P \&}]{ip }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00268                                                        \{}
\DoxyCodeLine{00269     \textcolor{keywordflow}{if} (ISINPIC(x, y)) \{}
\DoxyCodeLine{00270       \textcolor{keyword}{const} P *p = m\_pic + y * m\_lX + x;}
\DoxyCodeLine{00271       ASSIGN\_PIXEL(\&ip, p);}
\DoxyCodeLine{00272       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00273     \}}
\DoxyCodeLine{00274     ip.r = ip.g = ip.b = ip.m = 0;}
\DoxyCodeLine{00275   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a940642c3324f95154c41d1102d8c574d}\label{class_c_s_t_pic_a940642c3324f95154c41d1102d8c574d}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!getRasterPixel@{getRasterPixel}}
\index{getRasterPixel@{getRasterPixel}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{getRasterPixel()}{getRasterPixel()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::get\+Raster\+Pixel (\begin{DoxyParamCaption}\item[{const int}]{x,  }\item[{const int}]{y,  }\item[{\mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&}]{ip }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00332                                                                    \{}
\DoxyCodeLine{00333     \textcolor{keywordflow}{if} (m\_ras)}
\DoxyCodeLine{00334       getRasterPixel(m\_ras, x, y, ip);}
\DoxyCodeLine{00335     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00336       ip.r = ip.g = ip.b = ip.m = 0;}
\DoxyCodeLine{00337   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a8a5f187dbddd77333ac09347265068d1}\label{class_c_s_t_pic_a8a5f187dbddd77333ac09347265068d1}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!getRasterPixel@{getRasterPixel}}
\index{getRasterPixel@{getRasterPixel}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{getRasterPixel()}{getRasterPixel()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::get\+Raster\+Pixel (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$}]{ras,  }\item[{const int}]{x,  }\item[{const int}]{y,  }\item[{\mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&}]{ip }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00293                                          \{}
\DoxyCodeLine{00294     \textcolor{keywordflow}{if} (x >= 0 \&\& x < ras-\/>lx \&\& y >= 0 \&\& y < ras-\/>ly \&\& ras-\/>buffer) \{}
\DoxyCodeLine{00295       \mbox{\hyperlink{struct_l_p_i_x_e_l}{LPIXEL}} *pL;}
\DoxyCodeLine{00296       \mbox{\hyperlink{struct_l_p_i_x_e_l}{LPIXEL}} pLL;}
\DoxyCodeLine{00297       \mbox{\hyperlink{struct_s_p_i_x_e_l}{SPIXEL}} *pS;}
\DoxyCodeLine{00298       UD44\_CMAPINDEX32 *ci32;}
\DoxyCodeLine{00299       \textcolor{comment}{// UD44\_PIXEL32* pen;}}
\DoxyCodeLine{00300       UD44\_PIXEL32 *col;}
\DoxyCodeLine{00301       \textcolor{keywordflow}{switch} (ras-\/>type) \{}
\DoxyCodeLine{00302       \textcolor{keywordflow}{case} (RAS\_RGBM):}
\DoxyCodeLine{00303         pL   = (\mbox{\hyperlink{struct_l_p_i_x_e_l}{LPIXEL}} *)(ras-\/>buffer) + y * ras-\/>wrap + x;}
\DoxyCodeLine{00304         ip.r = (int)pL-\/>r;}
\DoxyCodeLine{00305         ip.g = (\textcolor{keywordtype}{int})pL-\/>g;}
\DoxyCodeLine{00306         ip.b = (int)pL-\/>b;}
\DoxyCodeLine{00307         ip.m = (\textcolor{keywordtype}{int})pL-\/>m;}
\DoxyCodeLine{00308         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00309       \textcolor{keywordflow}{case} (RAS\_RGBM64):}
\DoxyCodeLine{00310         pS   = (\mbox{\hyperlink{struct_s_p_i_x_e_l}{SPIXEL}} *)(ras-\/>buffer) + y * ras-\/>wrap + x;}
\DoxyCodeLine{00311         ip.r = (int)pS-\/>r;}
\DoxyCodeLine{00312         ip.g = (\textcolor{keywordtype}{int})pS-\/>g;}
\DoxyCodeLine{00313         ip.b = (int)pS-\/>b;}
\DoxyCodeLine{00314         ip.m = (\textcolor{keywordtype}{int})pS-\/>m;}
\DoxyCodeLine{00315         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00316       \textcolor{keywordflow}{case} (RAS\_CM32):}
\DoxyCodeLine{00317         ci32 = (UD44\_CMAPINDEX32 *)(ras-\/>buffer) + y * ras-\/>wrap + x;}
\DoxyCodeLine{00318         col  = (UD44\_PIXEL32 *)(ras-\/>cmap.buffer);}
\DoxyCodeLine{00319         PIX\_CM32\_MAP\_TO\_RGBM(*ci32, col, pLL)}
\DoxyCodeLine{00320         ip.r = (int)pLL.r;}
\DoxyCodeLine{00321         ip.g = (\textcolor{keywordtype}{int})pLL.g;}
\DoxyCodeLine{00322         ip.b = (int)pLL.b;}
\DoxyCodeLine{00323         ip.m = (\textcolor{keywordtype}{int})pLL.m;}
\DoxyCodeLine{00324         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00325       \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00326          \textcolor{keywordflow}{break};}
\DoxyCodeLine{00327      \}}
\DoxyCodeLine{00328     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00329       ip.r = ip.g = ip.b = ip.m = 0;}
\DoxyCodeLine{00330   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_ac9f5dc9d8b7c65c2dc5fd205a0242020}\label{class_c_s_t_pic_ac9f5dc9d8b7c65c2dc5fd205a0242020}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!getType@{getType}}
\index{getType@{getType}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{getType()}{getType()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
ST\+\_\+\+TYPE \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::get\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00157                           \{}
\DoxyCodeLine{00158     \textcolor{keywordflow}{if} (!m\_pic) \textcolor{keywordflow}{return} ST\_NIL;}
\DoxyCodeLine{00159     \textcolor{keywordflow}{if} (\textcolor{keyword}{sizeof}(m\_pic-\/>r) == \textcolor{keyword}{sizeof}(UCHAR)) \textcolor{keywordflow}{return} ST\_RGBM;}
\DoxyCodeLine{00160     \textcolor{keywordflow}{if} (\textcolor{keyword}{sizeof}(m\_pic-\/>r) == \textcolor{keyword}{sizeof}(USHORT)) \textcolor{keywordflow}{return} ST\_RGBM64;}
\DoxyCodeLine{00161     \textcolor{keywordflow}{return} ST\_NIL;}
\DoxyCodeLine{00162   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_ae4901cf1c068e42afcc3f1bad783f844}\label{class_c_s_t_pic_ae4901cf1c068e42afcc3f1bad783f844}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!hls2rgb@{hls2rgb}}
\index{hls2rgb@{hls2rgb}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{hls2rgb()}{hls2rgb()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::hls2rgb (\begin{DoxyParamCaption}\item[{double}]{h,  }\item[{double}]{l,  }\item[{double}]{s,  }\item[{UCHAR $\ast$}]{r,  }\item[{UCHAR $\ast$}]{g,  }\item[{UCHAR $\ast$}]{b }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00696                                                                            \{}
\DoxyCodeLine{00697     \textcolor{keywordtype}{double} rf, gf, bf;}
\DoxyCodeLine{00698     \textcolor{keywordtype}{double} m1, m2;}
\DoxyCodeLine{00699 }
\DoxyCodeLine{00700     m2 = l <= 0.5 ? l * (1.0 + s) : l + s -\/ l * s;}
\DoxyCodeLine{00701     m1 = 2 * l -\/ m2;}
\DoxyCodeLine{00702     \textcolor{keywordflow}{if} (fabs(s -\/ 0.0) < 0.000001) \{}
\DoxyCodeLine{00703       \textcolor{keywordflow}{if} (fabs(h -\/ UNDEFINED) < 0.000001) \{}
\DoxyCodeLine{00704         rf = gf = bf = l * 255.0;}
\DoxyCodeLine{00705       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00706         rf = gf = bf = 0.0;}
\DoxyCodeLine{00707     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00708       rf = fromHue(m1, m2, h + 120.0) * 255.0;}
\DoxyCodeLine{00709       gf = fromHue(m1, m2, h) * 255.0;}
\DoxyCodeLine{00710       bf = fromHue(m1, m2, h -\/ 120.0) * 255.0;}
\DoxyCodeLine{00711     \}}
\DoxyCodeLine{00712     rf = D\_CUT\_0\_255(rf);}
\DoxyCodeLine{00713     gf = D\_CUT\_0\_255(gf);}
\DoxyCodeLine{00714     bf = D\_CUT\_0\_255(bf);}
\DoxyCodeLine{00715     *r = UC\_ROUND(rf);}
\DoxyCodeLine{00716     *g = UC\_ROUND(gf);}
\DoxyCodeLine{00717     *b = UC\_ROUND(bf);}
\DoxyCodeLine{00718   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_ad481a6c5ca2e3e95b27c756f5a50c999}\label{class_c_s_t_pic_ad481a6c5ca2e3e95b27c756f5a50c999}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!initPic@{initPic}}
\index{initPic@{initPic}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{initPic()}{initPic()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::init\+Pic (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Allocates the specified raster and surrenders it to the image cache. {\bfseries{NOTE\+:}} The raster being initialized is LOCKED after this call. You must remember to UNLOCK it when no more used. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00124   \{}
\DoxyCodeLine{00125     nullPic();}
\DoxyCodeLine{00126     \textcolor{keywordflow}{if} (m\_lX > 0 \&\& m\_lY > 0) \{}
\DoxyCodeLine{00127       \textcolor{comment}{// m\_pic=new P[m\_lX*m\_lY];}}
\DoxyCodeLine{00128       \mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}} ras(m\_lX * m\_lY * \textcolor{keyword}{sizeof}(P), 1);}
\DoxyCodeLine{00129       \textcolor{keywordflow}{if} (!ras) \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_s_mem_alloc_error}{SMemAllocError}}(\textcolor{stringliteral}{"{}in initPic"{}});}
\DoxyCodeLine{00130       TImageCache::instance()-\/>\mbox{\hyperlink{class_t_image_cache_a124eae4cf370288f42c22b3477cb5163}{add}}(m\_cacheId, \mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}}(ras));}
\DoxyCodeLine{00131       \mbox{\hyperlink{class_c_s_t_pic_ab064a2f6b02565124a1cad1748a65b4f}{lock}}();}
\DoxyCodeLine{00132     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00133       \textcolor{keywordtype}{char} s[200];}
\DoxyCodeLine{00134       snprintf(s, \textcolor{keyword}{sizeof}(s), \textcolor{stringliteral}{"{}in initPic lXY=(\%d,\%d)\(\backslash\)n"{}}, m\_lX, m\_lY);}
\DoxyCodeLine{00135       \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_s_mem_alloc_error}{SMemAllocError}}(s);}
\DoxyCodeLine{00136     \}}
\DoxyCodeLine{00137   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01153}{TImage\+Cache\+::add()}}, and \mbox{\hyperlink{l00077}{CSTPic$<$ P $>$\+::lock()}}.

\mbox{\Hypertarget{class_c_s_t_pic_abd6fcb38f4ca9df825bd280750a71a4b}\label{class_c_s_t_pic_abd6fcb38f4ca9df825bd280750a71a4b}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!isInPic@{isInPic}}
\index{isInPic@{isInPic}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{isInPic()}{isInPic()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
bool \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::is\+In\+Pic (\begin{DoxyParamCaption}\item[{const int}]{x,  }\item[{const int}]{y }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00210                                                       \{}
\DoxyCodeLine{00211     \textcolor{keywordflow}{return} (m\_pic \&\& x >= 0 \&\& x < m\_lX \&\& y >= 0 \&\& y < m\_lY);}
\DoxyCodeLine{00212   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a16a96008ab2bf1f4697526b2f2e069e1}\label{class_c_s_t_pic_a16a96008ab2bf1f4697526b2f2e069e1}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!isSameColor@{isSameColor}}
\index{isSameColor@{isSameColor}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{isSameColor()}{isSameColor()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
bool \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::is\+Same\+Color (\begin{DoxyParamCaption}\item[{const P $\ast$}]{a,  }\item[{const P $\ast$}]{b }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00604                                                  \{}
\DoxyCodeLine{00605     \textcolor{keywordflow}{if} (a-\/>r == b-\/>r \&\& a-\/>g == b-\/>g \&\& a-\/>b == b-\/>b) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00606     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00607   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_ab064a2f6b02565124a1cad1748a65b4f}\label{class_c_s_t_pic_ab064a2f6b02565124a1cad1748a65b4f}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!lock@{lock}}
\index{lock@{lock}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{lock()}{lock()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::lock (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Retrieves the raster image from the cache to work with it. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00077               \{}
\DoxyCodeLine{00078     m\_picP = TImageCache::instance()-\/>\mbox{\hyperlink{class_t_image_cache_aea3ac2752efd6fa9689f5a7c1e895e41}{get}}(m\_cacheId, \textcolor{keyword}{true});}
\DoxyCodeLine{00079     m\_pic  = (P *)m\_picP-\/>getRaster()-\/>getRawData();}
\DoxyCodeLine{00080   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01672}{TImage\+Cache\+::get()}}.



Referenced by \mbox{\hyperlink{l00123}{CSTPic$<$ P $>$\+::init\+Pic()}}.

\mbox{\Hypertarget{class_c_s_t_pic_aaaa1ff6f78688e06634ca7a5ed00ed62}\label{class_c_s_t_pic_aaaa1ff6f78688e06634ca7a5ed00ed62}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!null@{null}}
\index{null@{null}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{null()}{null()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::null (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00139               \{}
\DoxyCodeLine{00140     nullPic();}
\DoxyCodeLine{00141     m\_lX = m\_lY = 0;}
\DoxyCodeLine{00142     m\_ras       = 0;}
\DoxyCodeLine{00143   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a1f387b8a42526e6f894a8306100c82f3}\label{class_c_s_t_pic_a1f387b8a42526e6f894a8306100c82f3}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!nullPic@{nullPic}}
\index{nullPic@{nullPic}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{nullPic()}{nullPic()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::null\+Pic (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00070                  \{}
\DoxyCodeLine{00071     \textcolor{comment}{// if ( m\_pic ) \{ delete [] m\_pic; m\_pic=0; \}}}
\DoxyCodeLine{00072     \mbox{\hyperlink{class_c_s_t_pic_a7a4af9d2c4118800036bf8501daee2a9}{unlock}}();}
\DoxyCodeLine{00073     TImageCache::instance()-\/>\mbox{\hyperlink{class_t_image_cache_a57d63227dfe2532b0aed22c47113be66}{remove}}(m\_cacheId);}
\DoxyCodeLine{00074   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a445ad3e91904d1649b28a123a0fd0995}\label{class_c_s_t_pic_a445ad3e91904d1649b28a123a0fd0995}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!operator=@{operator=}}
\index{operator=@{operator=}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
const \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$ \& \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$ \&}]{sp }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00486   \{}
\DoxyCodeLine{00487     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00488       null();}
\DoxyCodeLine{00489       m\_lX  = sp.m\_lX;}
\DoxyCodeLine{00490       m\_lY  = sp.m\_lY;}
\DoxyCodeLine{00491       m\_ras = sp.m\_ras;}
\DoxyCodeLine{00492       \mbox{\hyperlink{class_c_s_t_pic_ad481a6c5ca2e3e95b27c756f5a50c999}{initPic}}();}
\DoxyCodeLine{00493       copyPic(sp);}
\DoxyCodeLine{00494     \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_s_mem_alloc_error}{SMemAllocError}}) \{}
\DoxyCodeLine{00495       null();}
\DoxyCodeLine{00496       \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00497     \}}
\DoxyCodeLine{00498 }
\DoxyCodeLine{00499     \textcolor{keywordflow}{return} (*\textcolor{keyword}{this});}
\DoxyCodeLine{00500   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a95b3eea147c606262e4f41a21839b9c8}\label{class_c_s_t_pic_a95b3eea147c606262e4f41a21839b9c8}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!read@{read}}
\index{read@{read}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{read()}{read()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
virtual void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::read (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$}]{ras }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00424   \{}
\DoxyCodeLine{00425     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00426       null();}
\DoxyCodeLine{00427       \textcolor{keywordflow}{if} (((ras-\/>type == RAS\_RGBM || ras-\/>type == RAS\_RGBM64) \&\& ras-\/>buffer \&\&}
\DoxyCodeLine{00428            ras-\/>lx > 0 \&\& ras-\/>ly > 0) ||}
\DoxyCodeLine{00429           (ras-\/>type == RAS\_CM32 \&\& ras-\/>buffer \&\& ras-\/>cmap.buffer \&\&}
\DoxyCodeLine{00430            ras-\/>lx > 0 \&\& ras-\/>ly > 0)) \{}
\DoxyCodeLine{00431         m\_lX  = ras-\/>lx;}
\DoxyCodeLine{00432         m\_lY  = ras-\/>ly;}
\DoxyCodeLine{00433         m\_ras = ras;}
\DoxyCodeLine{00434         \mbox{\hyperlink{class_c_s_t_pic_ad481a6c5ca2e3e95b27c756f5a50c999}{initPic}}();}
\DoxyCodeLine{00435         \mbox{\hyperlink{class_c_s_t_pic_ab064a2f6b02565124a1cad1748a65b4f}{lock}}();}
\DoxyCodeLine{00436         ST\_TYPE type = getType();}
\DoxyCodeLine{00437         P *p         = m\_pic;}
\DoxyCodeLine{00438         \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\_PIXEL}} ip;}
\DoxyCodeLine{00439         memset(\&ip, 0, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{struct___i___p_i_x_e_l}{I\_PIXEL}}));}
\DoxyCodeLine{00440         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < m\_lY; y++)}
\DoxyCodeLine{00441           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < m\_lX; x++, p++) \{}
\DoxyCodeLine{00442             getRasterPixel(ras, x, y, ip);}
\DoxyCodeLine{00443             \textcolor{keywordflow}{switch} (type) \{}
\DoxyCodeLine{00444             \textcolor{keywordflow}{case} (ST\_RGBM):}
\DoxyCodeLine{00445               \textcolor{keywordflow}{if} (ras-\/>type == RAS\_RGBM64) \{}
\DoxyCodeLine{00446                 \textcolor{comment}{// RGBM have to be 'scaled' from USHORT to UCHAR}}
\DoxyCodeLine{00447                 p-\/>r = PIX\_BYTE\_FROM\_USHORT((USHORT)ip.r);}
\DoxyCodeLine{00448                 p-\/>g = PIX\_BYTE\_FROM\_USHORT((USHORT)ip.g);}
\DoxyCodeLine{00449                 p-\/>b = PIX\_BYTE\_FROM\_USHORT((USHORT)ip.b);}
\DoxyCodeLine{00450                 p-\/>m = PIX\_BYTE\_FROM\_USHORT((USHORT)ip.m);}
\DoxyCodeLine{00451               \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00452                 \textcolor{comment}{// RGBM are UCHAR in the raster}}
\DoxyCodeLine{00453                 p-\/>r = (UCHAR)ip.r;}
\DoxyCodeLine{00454                 p-\/>g = (UCHAR)ip.g;}
\DoxyCodeLine{00455                 p-\/>b = (UCHAR)ip.b;}
\DoxyCodeLine{00456                 p-\/>m = (UCHAR)ip.m;}
\DoxyCodeLine{00457               \}}
\DoxyCodeLine{00458               \textcolor{keywordflow}{break};}
\DoxyCodeLine{00459             \textcolor{keywordflow}{case} (ST\_RGBM64):}
\DoxyCodeLine{00460               \textcolor{keywordflow}{if} (ras-\/>type == RAS\_RGBM64) \{}
\DoxyCodeLine{00461                 \textcolor{comment}{// RGBM are USHORT in the raster}}
\DoxyCodeLine{00462                 p-\/>r = ip.r;}
\DoxyCodeLine{00463                 p-\/>g = ip.g;}
\DoxyCodeLine{00464                 p-\/>b = ip.b;}
\DoxyCodeLine{00465                 p-\/>m = ip.m;}
\DoxyCodeLine{00466               \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00467                 \textcolor{comment}{// RGBM have to be 'scaled' from UCHAR to USHORT}}
\DoxyCodeLine{00468                 p-\/>r = PIX\_USHORT\_FROM\_BYTE((UCHAR)ip.r);}
\DoxyCodeLine{00469                 p-\/>g = PIX\_USHORT\_FROM\_BYTE((UCHAR)ip.g);}
\DoxyCodeLine{00470                 p-\/>b = PIX\_USHORT\_FROM\_BYTE((UCHAR)ip.b);}
\DoxyCodeLine{00471                 p-\/>m = PIX\_USHORT\_FROM\_BYTE((UCHAR)ip.m);}
\DoxyCodeLine{00472               \}}
\DoxyCodeLine{00473               \textcolor{keywordflow}{break};}
\DoxyCodeLine{00474             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00475               \textcolor{keywordflow}{break};}
\DoxyCodeLine{00476             \}}
\DoxyCodeLine{00477           \}}
\DoxyCodeLine{00478       \}}
\DoxyCodeLine{00479     \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_s_mem_alloc_error}{SMemAllocError}}) \{}
\DoxyCodeLine{00480       null();}
\DoxyCodeLine{00481       \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00482     \}}
\DoxyCodeLine{00483   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a0a9738de965c97e164c49a184510553f}\label{class_c_s_t_pic_a0a9738de965c97e164c49a184510553f}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!rgb2hls@{rgb2hls}}
\index{rgb2hls@{rgb2hls}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{rgb2hls()}{rgb2hls()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::rgb2hls (\begin{DoxyParamCaption}\item[{UCHAR}]{r,  }\item[{UCHAR}]{g,  }\item[{UCHAR}]{b,  }\item[{double $\ast$}]{h,  }\item[{double $\ast$}]{l,  }\item[{double $\ast$}]{s }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00650                                                                            \{}
\DoxyCodeLine{00651     \textcolor{keywordtype}{double} ma, mi, delta, sum;}
\DoxyCodeLine{00652     \textcolor{keywordtype}{double} rf, gf, bf;}
\DoxyCodeLine{00653 }
\DoxyCodeLine{00654     rf = (double)r / 255.0;}
\DoxyCodeLine{00655     gf = (double)g / 255.0;}
\DoxyCodeLine{00656     bf = (double)b / 255.0;}
\DoxyCodeLine{00657 }
\DoxyCodeLine{00658     ma    = rf > gf ? rf : gf;}
\DoxyCodeLine{00659     ma    = ma > bf ? ma : bf;}
\DoxyCodeLine{00660     mi    = rf < gf ? rf : gf;}
\DoxyCodeLine{00661     mi    = mi < bf ? mi : bf;}
\DoxyCodeLine{00662     sum   = ma + mi;}
\DoxyCodeLine{00663     delta = ma -\/ mi;}
\DoxyCodeLine{00664     *l    = sum / 2.0;}
\DoxyCodeLine{00665     \textcolor{keywordflow}{if} (fabs(delta) < 0.000001) \{}
\DoxyCodeLine{00666       *s = 0.0;}
\DoxyCodeLine{00667       *h = UNDEFINED;}
\DoxyCodeLine{00668     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00669       *s = *l <= 0.5 ? delta / sum : delta / (2.0 -\/ sum);}
\DoxyCodeLine{00670       *h = fabs((rf -\/ ma)) < 0.000001}
\DoxyCodeLine{00671                ? (gf -\/ bf) / delta}
\DoxyCodeLine{00672                : (fabs((gf -\/ ma)) < 0.000001 ? 2.0 + (bf -\/ rf) / delta}
\DoxyCodeLine{00673                                              : 4.0 + (rf -\/ gf) / delta);}
\DoxyCodeLine{00674       *h *= 60;}
\DoxyCodeLine{00675       *h = *h < 0.0 ? *h + 360.0 : *h;}
\DoxyCodeLine{00676     \}}
\DoxyCodeLine{00677   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_afe817d6683efc153603049c51db11f53}\label{class_c_s_t_pic_afe817d6683efc153603049c51db11f53}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!setRasterPixel@{setRasterPixel}}
\index{setRasterPixel@{setRasterPixel}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{setRasterPixel()}{setRasterPixel()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::set\+Raster\+Pixel (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$}]{ras,  }\item[{const int}]{x,  }\item[{const int}]{y,  }\item[{const \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&}]{ip }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00344                                                \{}
\DoxyCodeLine{00345     \textcolor{keywordflow}{if} (x >= 0 \&\& x < ras-\/>lx \&\& y >= 0 \&\& y < ras-\/>ly \&\& ras-\/>buffer) \{}
\DoxyCodeLine{00346       \mbox{\hyperlink{struct_l_p_i_x_e_l}{LPIXEL}} *pL;}
\DoxyCodeLine{00347       \mbox{\hyperlink{struct_s_p_i_x_e_l}{SPIXEL}} *pS;}
\DoxyCodeLine{00348       \textcolor{keywordflow}{switch} (ras-\/>type) \{}
\DoxyCodeLine{00349       \textcolor{keywordflow}{case} (RAS\_RGBM):}
\DoxyCodeLine{00350         pL    = (\mbox{\hyperlink{struct_l_p_i_x_e_l}{LPIXEL}} *)(ras-\/>buffer) + y * ras-\/>wrap + x;}
\DoxyCodeLine{00351         pL-\/>r = (UCHAR)ip.r;}
\DoxyCodeLine{00352         pL-\/>g = (UCHAR)ip.g;}
\DoxyCodeLine{00353         pL-\/>b = (UCHAR)ip.b;}
\DoxyCodeLine{00354         pL-\/>m = (UCHAR)ip.m;}
\DoxyCodeLine{00355         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00356       \textcolor{keywordflow}{case} (RAS\_RGBM64):}
\DoxyCodeLine{00357         pS    = (\mbox{\hyperlink{struct_s_p_i_x_e_l}{SPIXEL}} *)(ras-\/>buffer) + y * ras-\/>wrap + x;}
\DoxyCodeLine{00358         pS-\/>r = (USHORT)ip.r;}
\DoxyCodeLine{00359         pS-\/>g = (USHORT)ip.g;}
\DoxyCodeLine{00360         pS-\/>b = (USHORT)ip.b;}
\DoxyCodeLine{00361         pS-\/>m = (USHORT)ip.m;}
\DoxyCodeLine{00362         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00363       \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00364          \textcolor{keywordflow}{break};}
\DoxyCodeLine{00365       \}}
\DoxyCodeLine{00366     \}}
\DoxyCodeLine{00367   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a908e34e89cdcef5a74093ba22692c516}\label{class_c_s_t_pic_a908e34e89cdcef5a74093ba22692c516}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!setRGB@{setRGB}}
\index{setRGB@{setRGB}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{setRGB()}{setRGB()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::set\+RGB (\begin{DoxyParamCaption}\item[{const int}]{x,  }\item[{const int}]{y,  }\item[{const \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&}]{ip }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00235                                                            \{}
\DoxyCodeLine{00236     \textcolor{keywordflow}{if} (ISINPIC(x, y)) \{}
\DoxyCodeLine{00237       P *p = m\_pic + y * m\_lX + x;}
\DoxyCodeLine{00238       \textcolor{keywordflow}{if} (getType() == ST\_RGBM) \{}
\DoxyCodeLine{00239         p-\/>r = (UCHAR)I\_CUT\_0\_255(ip.r);}
\DoxyCodeLine{00240         p-\/>g = (UCHAR)I\_CUT\_0\_255(ip.g);}
\DoxyCodeLine{00241         p-\/>b = (UCHAR)I\_CUT\_0\_255(ip.b);}
\DoxyCodeLine{00242       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (getType() == ST\_RGBM64) \{}
\DoxyCodeLine{00243         p-\/>r = (USHORT)I\_CUT\_0\_65535(ip.r);}
\DoxyCodeLine{00244         p-\/>g = (USHORT)I\_CUT\_0\_65535(ip.g);}
\DoxyCodeLine{00245         p-\/>b = (USHORT)I\_CUT\_0\_65535(ip.b);}
\DoxyCodeLine{00246       \}}
\DoxyCodeLine{00247     \}}
\DoxyCodeLine{00248   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a2ea0228ab50586797d400e357b6e0fd1}\label{class_c_s_t_pic_a2ea0228ab50586797d400e357b6e0fd1}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!setRGB@{setRGB}}
\index{setRGB@{setRGB}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{setRGB()}{setRGB()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::set\+RGB (\begin{DoxyParamCaption}\item[{const int}]{x,  }\item[{const int}]{y,  }\item[{const P \&}]{ip }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00215                                                      \{}
\DoxyCodeLine{00216     \textcolor{keywordflow}{if} (ISINPIC(x, y)) \{}
\DoxyCodeLine{00217       P *p = m\_pic + y * m\_lX + x;}
\DoxyCodeLine{00218       p-\/>r = ip.r;}
\DoxyCodeLine{00219       p-\/>g = ip.g;}
\DoxyCodeLine{00220       p-\/>b = ip.b;}
\DoxyCodeLine{00221     \}}
\DoxyCodeLine{00222   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_aea8ed106cad326e7203c4eae71ef848b}\label{class_c_s_t_pic_aea8ed106cad326e7203c4eae71ef848b}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!setRGBM@{setRGBM}}
\index{setRGBM@{setRGBM}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{setRGBM()}{setRGBM()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::set\+RGBM (\begin{DoxyParamCaption}\item[{const int}]{x,  }\item[{const int}]{y,  }\item[{const \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\+\_\+\+PIXEL}} \&}]{ip }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00250                                                             \{}
\DoxyCodeLine{00251     \textcolor{keywordflow}{if} (ISINPIC(x, y)) \{}
\DoxyCodeLine{00252       P *p = m\_pic + y * m\_lX + x;}
\DoxyCodeLine{00253       \textcolor{keywordflow}{if} (getType() == ST\_RGBM) \{}
\DoxyCodeLine{00254         p-\/>r = (UCHAR)I\_CUT\_0\_255(ip.r);}
\DoxyCodeLine{00255         p-\/>g = (UCHAR)I\_CUT\_0\_255(ip.g);}
\DoxyCodeLine{00256         p-\/>b = (UCHAR)I\_CUT\_0\_255(ip.b);}
\DoxyCodeLine{00257         p-\/>m = (UCHAR)I\_CUT\_0\_255(ip.m);}
\DoxyCodeLine{00258       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (getType() == ST\_RGBM64) \{}
\DoxyCodeLine{00259         p-\/>r = I\_CUT\_0\_65535(ip.r);}
\DoxyCodeLine{00260         p-\/>g = I\_CUT\_0\_65535(ip.g);}
\DoxyCodeLine{00261         p-\/>b = I\_CUT\_0\_65535(ip.b);}
\DoxyCodeLine{00262         p-\/>m = I\_CUT\_0\_65535(ip.m);}
\DoxyCodeLine{00263       \}}
\DoxyCodeLine{00264     \}}
\DoxyCodeLine{00265   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_af01681c464a80efe8ebccfe2b4117012}\label{class_c_s_t_pic_af01681c464a80efe8ebccfe2b4117012}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!setRGBM@{setRGBM}}
\index{setRGBM@{setRGBM}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{setRGBM()}{setRGBM()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::set\+RGBM (\begin{DoxyParamCaption}\item[{const int}]{x,  }\item[{const int}]{y,  }\item[{const P \&}]{ip }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00224                                                       \{}
\DoxyCodeLine{00225     \textcolor{keywordflow}{if} (ISINPIC(x, y)) \{}
\DoxyCodeLine{00226       P *p = m\_pic + y * m\_lX + x;}
\DoxyCodeLine{00227       p-\/>r = ip.r;}
\DoxyCodeLine{00228       p-\/>g = ip.g;}
\DoxyCodeLine{00229       p-\/>b = ip.b;}
\DoxyCodeLine{00230       p-\/>m = ip.m;}
\DoxyCodeLine{00231     \}}
\DoxyCodeLine{00232   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a7a4af9d2c4118800036bf8501daee2a9}\label{class_c_s_t_pic_a7a4af9d2c4118800036bf8501daee2a9}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!unlock@{unlock}}
\index{unlock@{unlock}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{unlock()}{unlock()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::unlock (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Release the raster image for inactivity periods. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00083                 \{}
\DoxyCodeLine{00084     m\_picP = 0;}
\DoxyCodeLine{00085     m\_pic  = 0;}
\DoxyCodeLine{00086   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_a8fe776f8c5db000b70980f38015575b1}\label{class_c_s_t_pic_a8fe776f8c5db000b70980f38015575b1}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!write@{write}}
\index{write@{write}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{write()}{write()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$class P $>$ \\
virtual void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::write (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$}]{ras }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00504   \{}
\DoxyCodeLine{00505     \textcolor{keywordflow}{if} ((ras-\/>type == RAS\_RGBM || ras-\/>type == RAS\_RGBM64) \&\& ras-\/>lx > 0 \&\&}
\DoxyCodeLine{00506         ras-\/>ly > 0 \&\& ras-\/>buffer) \{}
\DoxyCodeLine{00507       \textcolor{keywordtype}{int} x, y;}
\DoxyCodeLine{00508       \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\_PIXEL}} ip;}
\DoxyCodeLine{00509       \textcolor{keyword}{const} P *p;}
\DoxyCodeLine{00510       \textcolor{keywordflow}{for} (y = 0; y < m\_lY \&\& y < ras-\/>ly; y++)}
\DoxyCodeLine{00511         \textcolor{keywordflow}{for} (x = 0; x < m\_lX \&\& x < ras-\/>lx; x++) \{}
\DoxyCodeLine{00512           p    = m\_pic + y * m\_lX + x;}
\DoxyCodeLine{00513           ip.r = (int)p-\/>r;}
\DoxyCodeLine{00514           ip.g = (\textcolor{keywordtype}{int})p-\/>g;}
\DoxyCodeLine{00515           ip.b = (int)p-\/>b;}
\DoxyCodeLine{00516           ip.m = (\textcolor{keywordtype}{int})p-\/>m;}
\DoxyCodeLine{00517           setRasterPixel(ras, x, y, ip);}
\DoxyCodeLine{00518         \}}
\DoxyCodeLine{00519     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00520       \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_s_write_raster_error}{SWriteRasterError}}(\textcolor{stringliteral}{"{}(bad Raster type)"{}});}
\DoxyCodeLine{00521   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_abd4f71a56b6a60064305a38fb8ed469f}\label{class_c_s_t_pic_abd4f71a56b6a60064305a38fb8ed469f}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!write@{write}}
\index{write@{write}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{write()}{write()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$class P $>$ \\
virtual void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::write (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$}]{ras,  }\item[{const \mbox{\hyperlink{struct_s_r_e_c_t}{SRECT}} \&}]{r,  }\item[{const \mbox{\hyperlink{struct_s_p_o_i_n_t}{SPOINT}} \&}]{p }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00526   \{}
\DoxyCodeLine{00527     \textcolor{keywordflow}{if} (ras-\/>type == RAS\_RGBM || ras-\/>type == RAS\_RGBM64) \{}
\DoxyCodeLine{00528       \textcolor{keywordtype}{int} xs, ys, xd, yd;}
\DoxyCodeLine{00529       P pp;}
\DoxyCodeLine{00530       \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\_PIXEL}} ip;}
\DoxyCodeLine{00531       \textcolor{keywordflow}{for} (ys = r.y0, yd = p.y; ys <= r.y1; ys++, yd++)}
\DoxyCodeLine{00532         \textcolor{keywordflow}{for} (xs = r.x0, xd = p.x; xs <= r.x1; xs++, xd++) \{}
\DoxyCodeLine{00533           getPixel(xs, ys, pp);}
\DoxyCodeLine{00534           ip.r = (int)pp.r;}
\DoxyCodeLine{00535           ip.g = (\textcolor{keywordtype}{int})pp.g;}
\DoxyCodeLine{00536           ip.b = (int)pp.b;}
\DoxyCodeLine{00537           ip.m = (\textcolor{keywordtype}{int})pp.m;}
\DoxyCodeLine{00538           setRasterPixel(ras, xd, yd, ip);}
\DoxyCodeLine{00539         \}}
\DoxyCodeLine{00540     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00541       \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_s_write_raster_error}{SWriteRasterError}}(\textcolor{stringliteral}{"{}(bad Raster type)"{}});}
\DoxyCodeLine{00542   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_c_s_t_pic_ae57b9580f888f9e67308e2acb96b0462}\label{class_c_s_t_pic_ae57b9580f888f9e67308e2acb96b0462}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!writeOutBorder@{writeOutBorder}}
\index{writeOutBorder@{writeOutBorder}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{writeOutBorder()}{writeOutBorder()}}
{\footnotesize\ttfamily template$<$class P $>$ \\
virtual void \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::write\+Out\+Border (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$}]{rasin,  }\item[{const int}]{border,  }\item[{\mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} $\ast$}]{ras,  }\item[{const \mbox{\hyperlink{struct_s_r_e_c_t}{SRECT}} \&}]{r,  }\item[{const \mbox{\hyperlink{struct_s_p_o_i_n_t}{SPOINT}} \&}]{p }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00548   \{}
\DoxyCodeLine{00549     assert(rasin-\/>type == RAS\_CM32);}
\DoxyCodeLine{00550     UD44\_PIXEL32 *col = (UD44\_PIXEL32 *)(rasin-\/>cmap.buffer);}
\DoxyCodeLine{00551 }
\DoxyCodeLine{00552     \textcolor{keywordflow}{if} (ras-\/>type == RAS\_RGBM || ras-\/>type == RAS\_RGBM64) \{}
\DoxyCodeLine{00553       \textcolor{keywordtype}{int} xs, ys, xd, yd;}
\DoxyCodeLine{00554 }
\DoxyCodeLine{00555       \mbox{\hyperlink{struct___i___p_i_x_e_l}{I\_PIXEL}} ip;}
\DoxyCodeLine{00556       \textcolor{keywordflow}{for} (ys = r.y0, yd = p.y; ys <= r.y1; ys++, yd++)}
\DoxyCodeLine{00557         \textcolor{keywordflow}{for} (xs = r.x0, xd = p.x; xs <= r.x1; xs++, xd++) \{}
\DoxyCodeLine{00558           \textcolor{keywordtype}{int} x = xd -\/ border;}
\DoxyCodeLine{00559           \textcolor{keywordtype}{int} y = yd -\/ border;}
\DoxyCodeLine{00560           \textcolor{keywordflow}{if} (x >= 0 \&\& y >= 0 \&\& x < rasin-\/>lx \&\& y < rasin-\/>ly) \{}
\DoxyCodeLine{00561             UD44\_CMAPINDEX32 pixel =}
\DoxyCodeLine{00562                 *(((UD44\_CMAPINDEX32 *)rasin-\/>buffer) + y * rasin-\/>wrap + x);}
\DoxyCodeLine{00563             \textcolor{comment}{// int tone = (pix\&0xff);}}
\DoxyCodeLine{00564             \textcolor{comment}{// int paint = ((pix>>8)\&0xfff);}}
\DoxyCodeLine{00565             \textcolor{keywordflow}{if} ((pixel \& 0xff) == 0 || ((pixel >> 8) \& 0xfff) != 0) \{}
\DoxyCodeLine{00566               \mbox{\hyperlink{struct_l_p_i_x_e_l}{LPIXEL}} pLL;}
\DoxyCodeLine{00567               PIX\_CM32\_MAP\_TO\_RGBM(pixel, col, pLL)}
\DoxyCodeLine{00568               ip.r = (int)pLL.r;}
\DoxyCodeLine{00569               ip.g = (\textcolor{keywordtype}{int})pLL.g;}
\DoxyCodeLine{00570               ip.b = (int)pLL.b;}
\DoxyCodeLine{00571               ip.m = (\textcolor{keywordtype}{int})pLL.m;}
\DoxyCodeLine{00572               setRasterPixel(ras, xd, yd, ip);}
\DoxyCodeLine{00573               \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00574             \}}
\DoxyCodeLine{00575           \}}
\DoxyCodeLine{00576 }
\DoxyCodeLine{00577           P pp;}
\DoxyCodeLine{00578           getPixel(xs, ys, pp);}
\DoxyCodeLine{00579           ip.r = (int)pp.r;}
\DoxyCodeLine{00580           ip.g = (\textcolor{keywordtype}{int})pp.g;}
\DoxyCodeLine{00581           ip.b = (int)pp.b;}
\DoxyCodeLine{00582           ip.m = (\textcolor{keywordtype}{int})pp.m;}
\DoxyCodeLine{00583           setRasterPixel(ras, xd, yd, ip);}
\DoxyCodeLine{00584         \}}
\DoxyCodeLine{00585     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00586       \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_s_write_raster_error}{SWriteRasterError}}(\textcolor{stringliteral}{"{}(bad Raster type)"{}});}
\DoxyCodeLine{00587   \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_c_s_t_pic_ae6f4b4ca344ce528fe2389e616af775c}\label{class_c_s_t_pic_ae6f4b4ca344ce528fe2389e616af775c}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!m\_lX@{m\_lX}}
\index{m\_lX@{m\_lX}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{m\_lX}{m\_lX}}
{\footnotesize\ttfamily template$<$class P $>$ \\
int \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::m\+\_\+lX}

\mbox{\Hypertarget{class_c_s_t_pic_a510dc86bf0be11ff15c5ddb2fbe9ef61}\label{class_c_s_t_pic_a510dc86bf0be11ff15c5ddb2fbe9ef61}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!m\_lY@{m\_lY}}
\index{m\_lY@{m\_lY}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{m\_lY}{m\_lY}}
{\footnotesize\ttfamily template$<$class P $>$ \\
int \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::m\+\_\+lY}

\mbox{\Hypertarget{class_c_s_t_pic_a5053d193ce438f450a0f629ed7a13799}\label{class_c_s_t_pic_a5053d193ce438f450a0f629ed7a13799}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!m\_pic@{m\_pic}}
\index{m\_pic@{m\_pic}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{m\_pic}{m\_pic}}
{\footnotesize\ttfamily template$<$class P $>$ \\
P$\ast$ \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::m\+\_\+pic}

\mbox{\Hypertarget{class_c_s_t_pic_a2608edeab007a7cce20efa940c76040b}\label{class_c_s_t_pic_a2608edeab007a7cce20efa940c76040b}} 
\index{CSTPic$<$ P $>$@{CSTPic$<$ P $>$}!m\_ras@{m\_ras}}
\index{m\_ras@{m\_ras}!CSTPic$<$ P $>$@{CSTPic$<$ P $>$}}
\doxysubsubsection{\texorpdfstring{m\_ras}{m\_ras}}
{\footnotesize\ttfamily template$<$class P $>$ \\
const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}}$\ast$ \mbox{\hyperlink{class_c_s_t_pic}{CSTPic}}$<$ P $>$\+::m\+\_\+ras}



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonzlib/sandor\+\_\+fxs/STPic.\+h\end{DoxyCompactItemize}
