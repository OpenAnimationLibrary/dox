\hypertarget{class_tracker_tool}{}\doxysection{Tracker\+Tool Class Reference}
\label{class_tracker_tool}\index{TrackerTool@{TrackerTool}}
Inheritance diagram for Tracker\+Tool\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_tracker_tool}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} \mbox{\hyperlink{class_tracker_tool_a00922106d344fabe7db7086e2cbd388b}{get\+Tool\+Type}} () const override
\item 
void \mbox{\hyperlink{class_tracker_tool_ac7c26df9d1e700d20ab1413ff538c9e5}{update\+Translation}} () override
\item 
\mbox{\hyperlink{class_tracker_objects_set}{Tracker\+Objects\+Set}} $\ast$ \mbox{\hyperlink{class_tracker_tool_aac42e64aa7af215f4daabc841e79cc56}{get\+Tracker\+Objects\+Set}} () const
\item 
\mbox{\hyperlink{class_hook_set}{Hook\+Set}} $\ast$ \mbox{\hyperlink{class_tracker_tool_a2c742c17f8da8bb6b6fdb466e6f83427}{get\+Hook\+Set}} () const
\item 
void \mbox{\hyperlink{class_tracker_tool_ac4f484cbcc637cd22c3b803463d1f83a}{draw}} () override
\begin{DoxyCompactList}\small\item\em Draws the tool on the viewer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_tracker_tool_a56cee69246ce067cbe481d5bcdf6558f}{delete\+Selected\+Tracker\+Region}} ()
\item 
void \mbox{\hyperlink{class_tracker_tool_a36b3e408fac2e2d8b87dfe76d70d5da2}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_tracker_tool_a1ece87125ef5bda362d7cbcfc1f58ed0}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_tracker_tool_a7236ee12868b50caf5b4c449e478e588}{left\+Button\+Up}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\item 
void \mbox{\hyperlink{class_tracker_tool_ade4f22ad1080f430e7e7120eee038b60}{mouse\+Move}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
bool \mbox{\hyperlink{class_tracker_tool_a6259ee3fae2e31267797e89aa703545b}{key\+Down}} (QKey\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_tracker_tool_aa8f1b485f6aac6fd196d7c14b2de8ca9}{on\+Enter}} () override
\begin{DoxyCompactList}\small\item\em Callback for the mouse entering the viewer area. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_tracker_tool_a59d2ad52afd3fbe75ec61ef09f7c177b}{on\+Leave}} () override
\begin{DoxyCompactList}\small\item\em Callback for the mouse leaving the viewer area. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_tracker_tool_a487d9562afa8a7aef9456374c1104938}{on\+Activate}} () override
\begin{DoxyCompactList}\small\item\em Callback invoked whenever the tool activates. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_tracker_tool_a553f87540af25edbfacd6f65ffba986e}{on\+Deactivate}} () override
\begin{DoxyCompactList}\small\item\em Callback for tool deactivation, includes tool switch. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_tracker_tool_a8a25dc132a66faef0e5ff3bca15118b7}{on\+Image\+Changed}} () override
\begin{DoxyCompactList}\small\item\em Notifies changes in the image in use. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_tracker_tool_a83551e9aba8256e5168c138f6af5e089}{reset}} () override
\item 
\mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ \mbox{\hyperlink{class_tracker_tool_a410515287cf803610d7336359d041fb8}{get\+Properties}} (int target\+Type) override
\item 
void \mbox{\hyperlink{class_tracker_tool_a5d93fb5fadfa5b60036546ac6f6b74bc}{on\+Selection\+Changed}} ()
\item 
bool \mbox{\hyperlink{class_tracker_tool_afd954cb1238b8c2aa78d6e2dc806e086}{on\+Property\+Changed}} (std\+::string property\+Name) override
\item 
bool \mbox{\hyperlink{class_tracker_tool_a7192ed11d9eff974b70787965c9245d6}{select}} (const \mbox{\hyperlink{class_t_selection}{TSelection}} $\ast$)
\item 
bool \mbox{\hyperlink{class_tracker_tool_a9e869d69edd781976f9270a156d32219}{pick}} (int \&hook\+Index, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos)
\item 
int \mbox{\hyperlink{class_tracker_tool_a7da6c28ea991a1f0ad982536c1d9aff9}{get\+Cursor\+Id}} () const override
\begin{DoxyCompactList}\small\item\em Returns the type of cursor used by the tool. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_tracker_tool_afa215ea77eb0659763656287628e5779}{is\+Event\+Acceptable}} (QEvent $\ast$e) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_tracker_tool_a4c67734cac23b686ae59895702356fba}\label{class_tracker_tool_a4c67734cac23b686ae59895702356fba}} 
\index{TrackerTool@{TrackerTool}!TrackerTool@{TrackerTool}}
\index{TrackerTool@{TrackerTool}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{TrackerTool()}{TrackerTool()}}
{\footnotesize\ttfamily Tracker\+Tool\+::\+Tracker\+Tool (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00231     : \mbox{\hyperlink{class_t_tool_a9c63ec35f606e755d0d036bf4fed62ab}{TTool}}(\textcolor{stringliteral}{"{}T\_Tracker"{}})}
\DoxyCodeLine{00232     , m\_hookSelectedIndex(-\/1)}
\DoxyCodeLine{00233     , m\_lastHookSelectedIndex(-\/1)}
\DoxyCodeLine{00234     , m\_deselectArmed(\textcolor{keyword}{false})}
\DoxyCodeLine{00235     , m\_toolSizeWidth(\textcolor{stringliteral}{"{}Width:"{}}, 0, 1000, 10)    \textcolor{comment}{// W\_ToolOptions}}
\DoxyCodeLine{00236     , m\_toolSizeHeight(\textcolor{stringliteral}{"{}Height:"{}}, 0, 1000, 10)  \textcolor{comment}{// W\_ToolOptions}}
\DoxyCodeLine{00237     , m\_toolPosX(\textcolor{stringliteral}{"{}X:"{}}, -\/9000, 9000, 10)         \textcolor{comment}{// W\_ToolOptions}}
\DoxyCodeLine{00238     , m\_toolPosY(\textcolor{stringliteral}{"{}Y:"{}}, -\/9000, 9000, 10)         \textcolor{comment}{// W\_ToolOptions}}
\DoxyCodeLine{00239     , m\_shapeBBox()}
\DoxyCodeLine{00240     , m\_buttonDown(\textcolor{keyword}{false})}
\DoxyCodeLine{00241     , m\_dragged(\textcolor{keyword}{false})}
\DoxyCodeLine{00242     , m\_oldPos(\mbox{\hyperlink{class_t_point_t}{TPointD}}(0, 0))}
\DoxyCodeLine{00243     , m\_newObjectAdded(\textcolor{keyword}{false}) \{}
\DoxyCodeLine{00244   bind(TTool::CommonLevels);}
\DoxyCodeLine{00245   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_toolSizeWidth);}
\DoxyCodeLine{00246   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_toolSizeHeight);}
\DoxyCodeLine{00247   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_toolPosX);}
\DoxyCodeLine{00248   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_toolPosY);}
\DoxyCodeLine{00249   m\_selection.setTool(\textcolor{keyword}{this});}
\DoxyCodeLine{00250 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_tracker_tool_a56cee69246ce067cbe481d5bcdf6558f}\label{class_tracker_tool_a56cee69246ce067cbe481d5bcdf6558f}} 
\index{TrackerTool@{TrackerTool}!deleteSelectedTrackerRegion@{deleteSelectedTrackerRegion}}
\index{deleteSelectedTrackerRegion@{deleteSelectedTrackerRegion}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{deleteSelectedTrackerRegion()}{deleteSelectedTrackerRegion()}}
{\footnotesize\ttfamily void Tracker\+Tool\+::delete\+Selected\+Tracker\+Region (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00665                                               \{}
\DoxyCodeLine{00666   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{00667   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl           = app-\/>getCurrentLevel()-\/>getLevel();}
\DoxyCodeLine{00668   \mbox{\hyperlink{class_hook_set}{HookSet}} *hookSet        = xl-\/>\mbox{\hyperlink{class_t_xsh_level_a6e1f2998c39699adbe9133f87109a104}{getHookSet}}();}
\DoxyCodeLine{00669   \textcolor{keywordflow}{if} (!xl || !xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}() || !hookSet ||}
\DoxyCodeLine{00670       xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}()-\/>isReadOnly())}
\DoxyCodeLine{00671     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00672 }
\DoxyCodeLine{00673   \textcolor{comment}{// HookUndo *undo = new HookUndo(xl-\/>getSimpleLevel());}}
\DoxyCodeLine{00674   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{00675 }
\DoxyCodeLine{00676   \mbox{\hyperlink{class_hook}{Hook}} *hook          = hookSet-\/>getHook(m\_hookSelectedIndex);}
\DoxyCodeLine{00677   m\_hookSelectedIndex = -\/1;}
\DoxyCodeLine{00678   \textcolor{keywordflow}{if} (!hook || hook-\/>isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00679 }
\DoxyCodeLine{00680   hookSet-\/>\mbox{\hyperlink{class_hook_set_ad05306356921f704fede3cd946c8c37f}{clearHook}}(hook);}
\DoxyCodeLine{00681 }
\DoxyCodeLine{00682   \textcolor{comment}{// TUndoManager::manager()-\/>add(undo);}}
\DoxyCodeLine{00683   app-\/>getCurrentScene()}
\DoxyCodeLine{00684       -\/>getScene()}
\DoxyCodeLine{00685       -\/>\mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}()}
\DoxyCodeLine{00686       -\/>\mbox{\hyperlink{class_t_xsheet_a5dc925584e35e1678f5678b79c470959}{getStageObjectTree}}()}
\DoxyCodeLine{00687       -\/>\mbox{\hyperlink{class_t_stage_object_tree_aa88239ff5581af5d748d822d1f01cd9d}{invalidateAll}}();}
\DoxyCodeLine{00688   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00689 }
\DoxyCodeLine{00690   \textcolor{comment}{// emit signal in order to update schematic}}
\DoxyCodeLine{00691   TTool::getApplication()-\/>getCurrentXsheet()-\/>notifyXsheetChanged();}
\DoxyCodeLine{00692 }
\DoxyCodeLine{00693   \textcolor{comment}{/*}}
\DoxyCodeLine{00694 \textcolor{comment}{  int a = m\_selectedObjectId;}}
\DoxyCodeLine{00695 \textcolor{comment}{  int b = m\_selectedTrackerRegionIndex;}}
\DoxyCodeLine{00696 \textcolor{comment}{  if(m\_selectedObjectId<0 ||m\_selectedTrackerRegionIndex<0) return;}}
\DoxyCodeLine{00697 \textcolor{comment}{  TrackerObjectsSet *trackerObjectsSet = getTrackerObjectsSet();}}
\DoxyCodeLine{00698 \textcolor{comment}{  TFrameId fid = getCurrentFid();}}
\DoxyCodeLine{00699 \textcolor{comment}{if(!trackerObjectsSet) return;}}
\DoxyCodeLine{00700 \textcolor{comment}{  TrackerObject *trackerObject=}}
\DoxyCodeLine{00701 \textcolor{comment}{trackerObjectsSet-\/>getObject(m\_selectedObjectId);}}
\DoxyCodeLine{00702 \textcolor{comment}{  if(trackerObject==NULL) return;}}
\DoxyCodeLine{00703 \textcolor{comment}{  if(trackerObject-\/>getHooksCount()==0)}}
\DoxyCodeLine{00704 \textcolor{comment}{  \{}}
\DoxyCodeLine{00705 \textcolor{comment}{          trackerObjectsSet-\/>removeObject(m\_selectedObjectId);}}
\DoxyCodeLine{00706 \textcolor{comment}{          m\_selectedObjectId = -\/1;}}
\DoxyCodeLine{00707 \textcolor{comment}{          m\_selectedTrackerRegionIndex = -\/1;}}
\DoxyCodeLine{00708 \textcolor{comment}{          return;}}
\DoxyCodeLine{00709 \textcolor{comment}{  \}}}
\DoxyCodeLine{00710 \textcolor{comment}{  trackerObject-\/>removeHook(m\_selectedTrackerRegionIndex);}}
\DoxyCodeLine{00711 \textcolor{comment}{  m\_selectedTrackerRegionIndex = trackerObject-\/>getHooksCount()-\/1;}}
\DoxyCodeLine{00712 \textcolor{comment}{invalidate(); */}}
\DoxyCodeLine{00713 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_ac4f484cbcc637cd22c3b803463d1f83a}\label{class_tracker_tool_ac4f484cbcc637cd22c3b803463d1f83a}} 
\index{TrackerTool@{TrackerTool}!draw@{draw}}
\index{draw@{draw}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Tracker\+Tool\+::draw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Draws the tool on the viewer. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a058bf656d73bf3cd63b9826cbaaf48e0}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00276                        \{}
\DoxyCodeLine{00277   \mbox{\hyperlink{class_hook_set}{HookSet}} *hookSet = getHookSet();}
\DoxyCodeLine{00278   \textcolor{keywordflow}{if} (!hookSet) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00279   \textcolor{keywordflow}{if} (hookSet-\/>getHookCount() <= m\_hookSelectedIndex) m\_hookSelectedIndex = -\/1;}
\DoxyCodeLine{00280 }
\DoxyCodeLine{00281   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{00282   \textcolor{keywordtype}{int} selectedObjectId;}
\DoxyCodeLine{00283   \textcolor{keywordflow}{if} (m\_hookSelectedIndex >= 0 \&\& hookSet-\/>getHook(m\_hookSelectedIndex))}
\DoxyCodeLine{00284     selectedObjectId =}
\DoxyCodeLine{00285         hookSet-\/>getHook(m\_hookSelectedIndex)-\/>\mbox{\hyperlink{class_hook_a555b661db008ae8cf26cf74552c423a3}{getTrackerObjectId}}();}
\DoxyCodeLine{00286   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00287     selectedObjectId = -\/1;}
\DoxyCodeLine{00288   \textcolor{keywordtype}{int} i              = 0;}
\DoxyCodeLine{00289   \textcolor{keywordtype}{double} pixelSize   = getPixelSize();}
\DoxyCodeLine{00290 }
\DoxyCodeLine{00291   std::vector<TRectD> balloons;  \textcolor{comment}{// this is used to avoid balloons overlapping}}
\DoxyCodeLine{00292   \textcolor{comment}{// draw hooks}}
\DoxyCodeLine{00293   \textcolor{keywordflow}{for} (i = 0; i < hookSet-\/>getHookCount(); i++) \{}
\DoxyCodeLine{00294     \mbox{\hyperlink{class_hook}{Hook}} *hook = hookSet-\/>getHook(i);}
\DoxyCodeLine{00295     \textcolor{keywordflow}{if} (!hook || hook-\/>isEmpty()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00296     assert(hook);}
\DoxyCodeLine{00297     \textcolor{comment}{// Se l'Hook ha una TrackerRegion allora la disegno}}
\DoxyCodeLine{00298     \textcolor{keywordflow}{if} (hook-\/>getTrackerObjectId() >= 0) \{}
\DoxyCodeLine{00299       \mbox{\hyperlink{class_t_rect_t}{TRectD}} rect;}
\DoxyCodeLine{00300       rect = hook-\/>getTrackerRegion(fid);}
\DoxyCodeLine{00301       TPixel32 textColor(127, 127, 127);}
\DoxyCodeLine{00302       TPixel32 trackerObjectColor(0, 0, 0);}
\DoxyCodeLine{00303 }
\DoxyCodeLine{00304       \textcolor{keywordflow}{if} (hook-\/>getTrackerObjectId() == selectedObjectId) \{}
\DoxyCodeLine{00305         \textcolor{keywordflow}{if} (m\_hookSelectedIndex == i) \{}
\DoxyCodeLine{00306           TPixel32 frameColor(127, 127, 127);}
\DoxyCodeLine{00307           drawSquare(0.5 * (rect.getP01() + rect.getP11()), pixelSize * 4,}
\DoxyCodeLine{00308                      frameColor);  \textcolor{comment}{// scalaY}}
\DoxyCodeLine{00309           drawSquare(0.5 * (rect.getP11() + rect.getP10()), pixelSize * 4,}
\DoxyCodeLine{00310                      frameColor);                                \textcolor{comment}{// scalaX}}
\DoxyCodeLine{00311           drawSquare(rect.getP00(), pixelSize * 4, frameColor);  \textcolor{comment}{// scala}}
\DoxyCodeLine{00312           drawSquare(rect.getP10(), pixelSize * 4, frameColor);  \textcolor{comment}{// ridimensiona}}
\DoxyCodeLine{00313           trackerObjectColor = TPixel32(183, 227, 0);}
\DoxyCodeLine{00314           textColor          = TPixel32(155, 213, 219);}
\DoxyCodeLine{00315         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00316           textColor          = TPixel32(183, 227, 0);}
\DoxyCodeLine{00317           trackerObjectColor = TPixel32(155, 213, 219);}
\DoxyCodeLine{00318         \}}
\DoxyCodeLine{00319       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00320         trackerObjectColor = TPixel32(0, 0, 0);}
\DoxyCodeLine{00321 }
\DoxyCodeLine{00322       tglColor(trackerObjectColor);}
\DoxyCodeLine{00323       tglDrawRect(rect);}
\DoxyCodeLine{00324       tglColor(textColor);}
\DoxyCodeLine{00325       glPushMatrix();}
\DoxyCodeLine{00326       glTranslated(hook-\/>getPos(fid).x, hook-\/>getPos(fid).y, 0);}
\DoxyCodeLine{00327       glScaled(pixelSize, pixelSize, 1);}
\DoxyCodeLine{00328       \textcolor{keywordtype}{int} objectId = hook-\/>getTrackerObjectId();}
\DoxyCodeLine{00329       std::string text(\{\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'A'} + objectId)\});}
\DoxyCodeLine{00330       tglDrawText(\mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/15, 10), text);}
\DoxyCodeLine{00331       glPopMatrix();}
\DoxyCodeLine{00332     \}}
\DoxyCodeLine{00333 }
\DoxyCodeLine{00334     \mbox{\hyperlink{class_t_point_t}{TPointD}} p0  = hook-\/>getAPos(fid);}
\DoxyCodeLine{00335     \mbox{\hyperlink{class_t_point_t}{TPointD}} p1  = hook-\/>getBPos(fid);}
\DoxyCodeLine{00336     \textcolor{keywordtype}{bool} linked = p0 == p1;}
\DoxyCodeLine{00337     drawHook(p0, linked ? ToolUtils::NormalHook : ToolUtils::PassHookA,}
\DoxyCodeLine{00338              m\_hookSelectedIndex == i);}
\DoxyCodeLine{00339     std::string hookName = std::to\_string(i + 1);}
\DoxyCodeLine{00340     TPixel32 balloonColor(200, 220, 205, 200);}
\DoxyCodeLine{00341     \mbox{\hyperlink{class_t_point_t}{TPoint}} balloonOffset(20, 20);}
\DoxyCodeLine{00342     drawBalloon(p0, hookName, balloonColor, balloonOffset, pixelSize, \textcolor{keyword}{false},}
\DoxyCodeLine{00343                 \&balloons);}
\DoxyCodeLine{00344     \textcolor{keywordflow}{if} (!linked) \{}
\DoxyCodeLine{00345       drawHook(p1, PassHookB, m\_selection.isSelected(i, 2));}
\DoxyCodeLine{00346       drawBalloon(p1, hookName, balloonColor, balloonOffset, pixelSize, \textcolor{keyword}{false},}
\DoxyCodeLine{00347                   \&balloons);}
\DoxyCodeLine{00348     \}}
\DoxyCodeLine{00349   \}}
\DoxyCodeLine{00350 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00688}{TTool\+::get\+Current\+Fid()}}, and \mbox{\hyperlink{l00066}{Hook\+::get\+Tracker\+Object\+Id()}}.

\mbox{\Hypertarget{class_tracker_tool_a7da6c28ea991a1f0ad982536c1d9aff9}\label{class_tracker_tool_a7da6c28ea991a1f0ad982536c1d9aff9}} 
\index{TrackerTool@{TrackerTool}!getCursorId@{getCursorId}}
\index{getCursorId@{getCursorId}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{getCursorId()}{getCursorId()}}
{\footnotesize\ttfamily int Tracker\+Tool\+::get\+Cursor\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Returns the type of cursor used by the tool. 

\begin{DoxySeeAlso}{See also}
For a list of cursor ids \mbox{\hyperlink{}{cursor.\+h}} 
\end{DoxySeeAlso}


Reimplemented from \mbox{\hyperlink{class_t_tool_a1768a57b8b6d1480618fd923fad15f1d}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00761                                    \{}
\DoxyCodeLine{00762   \textcolor{keywordflow}{switch} (m\_what) \{}
\DoxyCodeLine{00763   \textcolor{keywordflow}{case} Outside:}
\DoxyCodeLine{00764     \textcolor{keywordflow}{return} ToolCursor::TrackerCursor;}
\DoxyCodeLine{00765   \textcolor{keywordflow}{case} Inside:}
\DoxyCodeLine{00766     \textcolor{keywordflow}{return} ToolCursor::MoveCursor;}
\DoxyCodeLine{00767   \textcolor{keywordflow}{case} NormalHook:}
\DoxyCodeLine{00768     \textcolor{keywordflow}{return} ToolCursor::MoveCursor;}
\DoxyCodeLine{00769   \textcolor{keywordflow}{case} P00:}
\DoxyCodeLine{00770     \textcolor{keywordflow}{return} ToolCursor::ScaleCursor;}
\DoxyCodeLine{00771   \textcolor{keywordflow}{case} P01:}
\DoxyCodeLine{00772     \textcolor{keywordflow}{return} ToolCursor::MoveCursor;}
\DoxyCodeLine{00773   \textcolor{keywordflow}{case} P10:}
\DoxyCodeLine{00774     \textcolor{keywordflow}{return} ToolCursor::ScaleCursor;}
\DoxyCodeLine{00775   \textcolor{keywordflow}{case} P1M:}
\DoxyCodeLine{00776     \textcolor{keywordflow}{return} ToolCursor::ScaleHCursor;}
\DoxyCodeLine{00777   \textcolor{keywordflow}{case} PM1:}
\DoxyCodeLine{00778     \textcolor{keywordflow}{return} ToolCursor::ScaleVCursor;}
\DoxyCodeLine{00779   \textcolor{keywordflow}{case} ADD\_OBJECT:}
\DoxyCodeLine{00780     \textcolor{keywordflow}{return} ToolCursor::SplineEditorCursorAdd;}
\DoxyCodeLine{00781   \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00782     \textcolor{keywordflow}{return} ToolCursor::TrackerCursor;}
\DoxyCodeLine{00783   \}}
\DoxyCodeLine{00784   \textcolor{keywordflow}{return} ToolCursor::TrackerCursor;}
\DoxyCodeLine{00785 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_a2c742c17f8da8bb6b6fdb466e6f83427}\label{class_tracker_tool_a2c742c17f8da8bb6b6fdb466e6f83427}} 
\index{TrackerTool@{TrackerTool}!getHookSet@{getHookSet}}
\index{getHookSet@{getHookSet}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{getHookSet()}{getHookSet()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_hook_set}{Hook\+Set}} $\ast$ Tracker\+Tool\+::get\+Hook\+Set (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00268                                        \{}
\DoxyCodeLine{00269   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = TTool::getApplication()-\/>getCurrentLevel()-\/>getLevel();}
\DoxyCodeLine{00270   \textcolor{keywordflow}{if} (!xl) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00271   \textcolor{keywordflow}{return} xl-\/>\mbox{\hyperlink{class_t_xsh_level_a6e1f2998c39699adbe9133f87109a104}{getHookSet}}();}
\DoxyCodeLine{00272 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_a410515287cf803610d7336359d041fb8}\label{class_tracker_tool_a410515287cf803610d7336359d041fb8}} 
\index{TrackerTool@{TrackerTool}!getProperties@{getProperties}}
\index{getProperties@{getProperties}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{getProperties()}{getProperties()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ Tracker\+Tool\+::get\+Properties (\begin{DoxyParamCaption}\item[{int}]{target\+Type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00211 \{ \textcolor{keywordflow}{return} \&m\_prop; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_a00922106d344fabe7db7086e2cbd388b}\label{class_tracker_tool_a00922106d344fabe7db7086e2cbd388b}} 
\index{TrackerTool@{TrackerTool}!getToolType@{getToolType}}
\index{getToolType@{getToolType}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{getToolType()}{getToolType()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} Tracker\+Tool\+::get\+Tool\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00187 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca18d911ba387409847ad5ae6a731031f8}{TTool::LevelReadTool}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_aac42e64aa7af215f4daabc841e79cc56}\label{class_tracker_tool_aac42e64aa7af215f4daabc841e79cc56}} 
\index{TrackerTool@{TrackerTool}!getTrackerObjectsSet@{getTrackerObjectsSet}}
\index{getTrackerObjectsSet@{getTrackerObjectsSet}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{getTrackerObjectsSet()}{getTrackerObjectsSet()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_tracker_objects_set}{Tracker\+Objects\+Set}} $\ast$ Tracker\+Tool\+::get\+Tracker\+Objects\+Set (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00263                                                            \{}
\DoxyCodeLine{00264   \mbox{\hyperlink{class_hook_set}{HookSet}} *hookSet = getHookSet();}
\DoxyCodeLine{00265   \textcolor{keywordflow}{if} (!hookSet) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00266   \textcolor{keywordflow}{return} hookSet-\/>\mbox{\hyperlink{class_hook_set_add5db5b96d6943e455819202711704b0}{getTrackerObjectsSet}}();}
\DoxyCodeLine{00267 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_afa215ea77eb0659763656287628e5779}\label{class_tracker_tool_afa215ea77eb0659763656287628e5779}} 
\index{TrackerTool@{TrackerTool}!isEventAcceptable@{isEventAcceptable}}
\index{isEventAcceptable@{isEventAcceptable}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{isEventAcceptable()}{isEventAcceptable()}}
{\footnotesize\ttfamily bool Tracker\+Tool\+::is\+Event\+Acceptable (\begin{DoxyParamCaption}\item[{QEvent $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00866                                              \{}
\DoxyCodeLine{00867   \textcolor{keywordflow}{if} (!isEnabled()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00868   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = TTool::getApplication()-\/>getCurrentLevel()-\/>getLevel();}
\DoxyCodeLine{00869   \textcolor{keywordflow}{if} (!xl) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00870   \mbox{\hyperlink{class_hook_set}{HookSet}} *hookSet = xl-\/>\mbox{\hyperlink{class_t_xsh_level_a6e1f2998c39699adbe9133f87109a104}{getHookSet}}();}
\DoxyCodeLine{00871   \textcolor{keywordflow}{if} (!hookSet) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00872   \mbox{\hyperlink{class_hook}{Hook}} *hook = hookSet-\/>getHook(m\_hookSelectedIndex);}
\DoxyCodeLine{00873   \textcolor{keywordflow}{if} (!hook || hook-\/>isEmpty()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00874 }
\DoxyCodeLine{00875   QKeyEvent *keyEvent = \textcolor{keyword}{static\_cast<}QKeyEvent *\textcolor{keyword}{>}(e);}
\DoxyCodeLine{00876   \textcolor{comment}{// shift + arrow will not be recognized for now}}
\DoxyCodeLine{00877   \textcolor{keywordflow}{if} (keyEvent-\/>modifiers() \& Qt::ShiftModifier) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00878   \textcolor{keywordtype}{int} key = keyEvent-\/>key();}
\DoxyCodeLine{00879   \textcolor{keywordflow}{return} (key == Qt::Key\_Up || key == Qt::Key\_Down || key == Qt::Key\_Left ||}
\DoxyCodeLine{00880           key == Qt::Key\_Right);}
\DoxyCodeLine{00881   \textcolor{comment}{// no need to override page up \& down keys since they cannot be}}
\DoxyCodeLine{00882   \textcolor{comment}{// used as shortcut key for now}}
\DoxyCodeLine{00883 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_a6259ee3fae2e31267797e89aa703545b}\label{class_tracker_tool_a6259ee3fae2e31267797e89aa703545b}} 
\index{TrackerTool@{TrackerTool}!keyDown@{keyDown}}
\index{keyDown@{keyDown}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{keyDown()}{keyDown()}}
{\footnotesize\ttfamily bool Tracker\+Tool\+::key\+Down (\begin{DoxyParamCaption}\item[{QKey\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00786                                           \{}
\DoxyCodeLine{00787   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = TTool::getApplication()-\/>getCurrentLevel()-\/>getLevel();}
\DoxyCodeLine{00788   \textcolor{keywordflow}{if} (!xl) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00789   \mbox{\hyperlink{class_hook_set}{HookSet}} *hookSet = xl-\/>\mbox{\hyperlink{class_t_xsh_level_a6e1f2998c39699adbe9133f87109a104}{getHookSet}}();}
\DoxyCodeLine{00790   \textcolor{keywordflow}{if} (!hookSet) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00791   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{00792   \mbox{\hyperlink{class_hook}{Hook}} *hook   = hookSet-\/>getHook(m\_hookSelectedIndex);}
\DoxyCodeLine{00793   \textcolor{keywordflow}{if} (!hook || hook-\/>isEmpty()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00794   \mbox{\hyperlink{class_t_point_t}{TPointD}} hookPos = hook-\/>getPos(fid);}
\DoxyCodeLine{00795   \mbox{\hyperlink{class_t_point_t}{TPointD}} delta(0, 0);}
\DoxyCodeLine{00796   \textcolor{keywordtype}{double} pixelSize = getPixelSize();}
\DoxyCodeLine{00797 }
\DoxyCodeLine{00798   \textcolor{keywordflow}{switch} (event-\/>key()) \{}
\DoxyCodeLine{00799   \textcolor{keywordflow}{case} Qt::Key\_Up:}
\DoxyCodeLine{00800     delta.y = 1;}
\DoxyCodeLine{00801     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00802   \textcolor{keywordflow}{case} Qt::Key\_Down:}
\DoxyCodeLine{00803     delta.y = -\/1;}
\DoxyCodeLine{00804     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00805   \textcolor{keywordflow}{case} Qt::Key\_Left:}
\DoxyCodeLine{00806     delta.x = -\/1;}
\DoxyCodeLine{00807     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00808   \textcolor{keywordflow}{case} Qt::Key\_0:}
\DoxyCodeLine{00809     delta.x = 1;}
\DoxyCodeLine{00810     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00811   \textcolor{keywordflow}{case} Qt::Key\_PageUp:  \textcolor{comment}{// converto in Hook}}
\DoxyCodeLine{00812     hook-\/>setTrackerObjectId(-\/1);}
\DoxyCodeLine{00813     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00814   \textcolor{keywordflow}{case} Qt::Key\_PageDown:  \textcolor{comment}{// converto in trackerRegion}}
\DoxyCodeLine{00815   \{}
\DoxyCodeLine{00816     \mbox{\hyperlink{class_tracker_objects_set}{TrackerObjectsSet}} *trackerObjectsSet = getTrackerObjectsSet();}
\DoxyCodeLine{00817     \textcolor{keywordflow}{if} (!trackerObjectsSet) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00818     \textcolor{keywordtype}{int} trackerObjectId = hook-\/>getTrackerObjectId();}
\DoxyCodeLine{00819     \textcolor{keywordflow}{if} (trackerObjectId != -\/1) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00820     trackerObjectId = trackerObjectsSet-\/>addObject();}
\DoxyCodeLine{00821     hook-\/>setTrackerObjectId(trackerObjectId);}
\DoxyCodeLine{00822     hook-\/>setTrackerRegionHeight(pixelSize * 20);}
\DoxyCodeLine{00823     hook-\/>setTrackerRegionWidth(pixelSize * 20);}
\DoxyCodeLine{00824   \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{00825   \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00826     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00827     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00828   \}}
\DoxyCodeLine{00829 }
\DoxyCodeLine{00830   hookPos += delta;}
\DoxyCodeLine{00831   hook-\/>setAPos(fid, hookPos);}
\DoxyCodeLine{00832   \textcolor{comment}{// TTool::getApplication()-\/>getCurrentTool()-\/>getTool()-\/>notifyImageChanged();}}
\DoxyCodeLine{00833   \textcolor{comment}{//  TNotifier::instance()-\/>notify(TLevelChange());}}
\DoxyCodeLine{00834 }
\DoxyCodeLine{00835   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00836 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_a36b3e408fac2e2d8b87dfe76d70d5da2}\label{class_tracker_tool_a36b3e408fac2e2d8b87dfe76d70d5da2}} 
\index{TrackerTool@{TrackerTool}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily void Tracker\+Tool\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00441                                                                          \{}
\DoxyCodeLine{00442   m\_buttonDown  = \textcolor{keyword}{true};}
\DoxyCodeLine{00443   m\_picked      = \textcolor{keyword}{true};}
\DoxyCodeLine{00444   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = TTool::getApplication()-\/>getCurrentLevel()-\/>getLevel();}
\DoxyCodeLine{00445   \textcolor{keywordflow}{if} (!xl) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00446   m\_selection.setLevel(xl);}
\DoxyCodeLine{00447   m\_firstPos = m\_lastPos = pos;}
\DoxyCodeLine{00448 }
\DoxyCodeLine{00449   m\_deselectArmed = \textcolor{keyword}{false};}
\DoxyCodeLine{00450 }
\DoxyCodeLine{00451   m\_oldPos         = pos;}
\DoxyCodeLine{00452   \textcolor{keywordtype}{double} pixelSize = getPixelSize();}
\DoxyCodeLine{00453 }
\DoxyCodeLine{00454   \mbox{\hyperlink{class_hook_set}{HookSet}} *hookSet = xl-\/>\mbox{\hyperlink{class_t_xsh_level_a6e1f2998c39699adbe9133f87109a104}{getHookSet}}();}
\DoxyCodeLine{00455   \textcolor{keywordflow}{if} (!hookSet) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00456   \mbox{\hyperlink{class_tracker_objects_set}{TrackerObjectsSet}} *trackerObjectsSet = getTrackerObjectsSet();}
\DoxyCodeLine{00457   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid                         = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{00458   \textcolor{keywordflow}{if} (!trackerObjectsSet) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00459   \textcolor{keywordflow}{if} (pick(m\_hookSelectedIndex, pos)) \{}
\DoxyCodeLine{00460     \textcolor{keywordflow}{if} (m\_what == NormalHook) \{}
\DoxyCodeLine{00461       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00462       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00463     \}}
\DoxyCodeLine{00464     \mbox{\hyperlink{class_hook}{Hook}} *hook = hookSet-\/>getHook(m\_hookSelectedIndex);}
\DoxyCodeLine{00465     \textcolor{keywordflow}{if} (!hook) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00466     m\_selection.selectNone();}
\DoxyCodeLine{00467     m\_selection.select(m\_hookSelectedIndex, m\_hookSelectedIndex);}
\DoxyCodeLine{00468     m\_toolSizeWidth.setValue(hook-\/>getTrackerRegionWidth());}
\DoxyCodeLine{00469     m\_toolSizeHeight.setValue(hook-\/>getTrackerRegionHeight());}
\DoxyCodeLine{00470     m\_toolPosX.setValue(hook-\/>getPos(fid).x);}
\DoxyCodeLine{00471     m\_toolPosY.setValue(hook-\/>getPos(fid).y);}
\DoxyCodeLine{00472     m\_toolSizeWidth.notifyListeners();}
\DoxyCodeLine{00473     m\_toolSizeHeight.notifyListeners();}
\DoxyCodeLine{00474     m\_toolPosX.notifyListeners();}
\DoxyCodeLine{00475     m\_toolPosY.notifyListeners();}
\DoxyCodeLine{00476   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00477     m\_selection.selectNone();}
\DoxyCodeLine{00478 }
\DoxyCodeLine{00479     \textcolor{keywordflow}{if} (xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}() \&\& !xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}()-\/>isReadOnly()) \{}
\DoxyCodeLine{00480       \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{00481       m\_what       = P10;}
\DoxyCodeLine{00482 }
\DoxyCodeLine{00483       \textcolor{comment}{// Se non è selezionato alcun oggetto allora aggiungo un nuovo oggetto e a}}
\DoxyCodeLine{00484       \textcolor{comment}{// questo}}
\DoxyCodeLine{00485       \textcolor{comment}{// aggiungo una trackerRegion}}
\DoxyCodeLine{00486       \textcolor{keywordtype}{int} trackerObjectId;}
\DoxyCodeLine{00487       \textcolor{keywordflow}{if} (m\_hookSelectedIndex == -\/1 ||}
\DoxyCodeLine{00488           hookSet-\/>getHook(m\_hookSelectedIndex) == 0) \{}
\DoxyCodeLine{00489         trackerObjectId  = trackerObjectsSet-\/>addObject();}
\DoxyCodeLine{00490         m\_newObjectAdded = \textcolor{keyword}{true};}
\DoxyCodeLine{00491       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00492         trackerObjectId =}
\DoxyCodeLine{00493             hookSet-\/>getHook(m\_hookSelectedIndex)-\/>\mbox{\hyperlink{class_hook_a555b661db008ae8cf26cf74552c423a3}{getTrackerObjectId}}();}
\DoxyCodeLine{00494       \textcolor{comment}{// se l'oggetto selezionato è un semplice Hook (senza region)}}
\DoxyCodeLine{00495       \textcolor{comment}{// allora creo un nuovo hook con region}}
\DoxyCodeLine{00496       \textcolor{keywordflow}{if} (trackerObjectId == -\/1) \{}
\DoxyCodeLine{00497         trackerObjectId  = trackerObjectsSet-\/>addObject();}
\DoxyCodeLine{00498         m\_newObjectAdded = \textcolor{keyword}{true};}
\DoxyCodeLine{00499       \}}
\DoxyCodeLine{00500 }
\DoxyCodeLine{00501       \textcolor{comment}{// aggiungo un Hook all'oggetto selezionato}}
\DoxyCodeLine{00502       \mbox{\hyperlink{class_hook}{Hook}} *newHook = hookSet-\/>\mbox{\hyperlink{class_hook_set_aa1e6762564a3de08d0b70e178b7c5df7}{addHook}}();}
\DoxyCodeLine{00503       \textcolor{keywordflow}{if} (newHook) \{}
\DoxyCodeLine{00504         newHook-\/>setTrackerObjectId(trackerObjectId);}
\DoxyCodeLine{00505         newHook-\/>\mbox{\hyperlink{class_hook_abf17c554743ef71af14c997180965d76}{setAPos}}(fid, pos);}
\DoxyCodeLine{00506         newHook-\/>setTrackerRegionHeight(pixelSize * 10);}
\DoxyCodeLine{00507         newHook-\/>setTrackerRegionWidth(pixelSize * 10);}
\DoxyCodeLine{00508         \textcolor{comment}{// setto l'indice della trackerRegion corrente}}
\DoxyCodeLine{00509         m\_hookSelectedIndex = newHook-\/>getId();  \textcolor{comment}{// hookSet-\/>getHookCount()-\/1;}}
\DoxyCodeLine{00510       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00511         \textcolor{keywordflow}{if} (hookSet-\/>getHookCount() >= 20)}
\DoxyCodeLine{00512           QMessageBox::warning(0, \textcolor{stringliteral}{"{}TrackerTool Error"{}},}
\DoxyCodeLine{00513                                \textcolor{stringliteral}{"{}Hooks number must be at most 20"{}});}
\DoxyCodeLine{00514         m\_hookSelectedIndex = -\/1;}
\DoxyCodeLine{00515       \}}
\DoxyCodeLine{00516     \}}
\DoxyCodeLine{00517   \}}
\DoxyCodeLine{00518   m\_selection.makeCurrent();}
\DoxyCodeLine{00519   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00520   \textcolor{keywordflow}{return};}
\DoxyCodeLine{00521 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_a1ece87125ef5bda362d7cbcfc1f58ed0}\label{class_tracker_tool_a1ece87125ef5bda362d7cbcfc1f58ed0}} 
\index{TrackerTool@{TrackerTool}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Tracker\+Tool\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00525                                                                         \{}
\DoxyCodeLine{00526   \textcolor{keywordflow}{if} (!m\_buttonDown) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00527   \textcolor{keywordflow}{if} (m\_hookSelectedIndex < 0 \&\& m\_what != NormalHook) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00528   \mbox{\hyperlink{class_hook_set}{HookSet}} *hookSet = getHookSet();}
\DoxyCodeLine{00529   \textcolor{keywordflow}{if} (!hookSet) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00530   assert(hookSet-\/>getHook(m\_hookSelectedIndex) != 0);}
\DoxyCodeLine{00531   \mbox{\hyperlink{class_tracker_objects_set}{TrackerObjectsSet}} *trackerObjectsSet = getTrackerObjectsSet();}
\DoxyCodeLine{00532   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid                         = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{00533   \textcolor{keywordflow}{if} (!trackerObjectsSet) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00534 }
\DoxyCodeLine{00535   \textcolor{keywordflow}{if} (m\_dragged == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{00536     m\_dragged = \textcolor{keyword}{true};}
\DoxyCodeLine{00537   \}}
\DoxyCodeLine{00538 }
\DoxyCodeLine{00539   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = TTool::getApplication()-\/>getCurrentLevel()-\/>getLevel();}
\DoxyCodeLine{00540   \textcolor{keywordflow}{if} (xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}() \&\& xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}()-\/>isReadOnly() \&\&}
\DoxyCodeLine{00541       m\_what != Inside \&\& m\_what != NormalHook)}
\DoxyCodeLine{00542     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00543 }
\DoxyCodeLine{00544   \textcolor{keywordflow}{if} (m\_dragged == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{00545     \mbox{\hyperlink{class_hook}{Hook}} *hook = \textcolor{keyword}{new} \mbox{\hyperlink{class_hook}{Hook}}();}
\DoxyCodeLine{00546     hook       = getHookSet()-\/>getHook(m\_hookSelectedIndex);}
\DoxyCodeLine{00547     \textcolor{keywordflow}{if} (!hook || hook-\/>isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00548     \mbox{\hyperlink{class_t_point_t}{TPointD}} deltaPos = pp -\/ m\_oldPos;}
\DoxyCodeLine{00549     m\_oldPos         = pp;}
\DoxyCodeLine{00550     \textcolor{keywordtype}{double} newWidth  = hook-\/>getTrackerRegionWidth();}
\DoxyCodeLine{00551     \textcolor{keywordtype}{double} newHeight = hook-\/>getTrackerRegionHeight();}
\DoxyCodeLine{00552     \mbox{\hyperlink{class_t_affine}{TAffine}} aff;}
\DoxyCodeLine{00553     \textcolor{keyword}{const} \textcolor{keywordtype}{double} epsilon = 1e-\/2;}
\DoxyCodeLine{00554     \mbox{\hyperlink{class_t_point_t}{TPointD}} posCenter    = hook-\/>getPos(fid);}
\DoxyCodeLine{00555     \textcolor{keywordtype}{double} a             = norm2(pp -\/ posCenter);}
\DoxyCodeLine{00556     \textcolor{keywordtype}{double} b             = norm2(pp -\/ deltaPos -\/ posCenter);}
\DoxyCodeLine{00557     \textcolor{keywordflow}{switch} (m\_what) \{}
\DoxyCodeLine{00558     \textcolor{keywordflow}{case} Inside:  \textcolor{comment}{// Traslazione}}
\DoxyCodeLine{00559       hook-\/>setAPos(fid, hook-\/>getPos(fid) + deltaPos);}
\DoxyCodeLine{00560       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00561     \textcolor{keywordflow}{case} NormalHook:  \textcolor{comment}{// Traslazione Hook}}
\DoxyCodeLine{00562     \{}
\DoxyCodeLine{00563       hook-\/>setAPos(fid, hook-\/>getPos(fid) + deltaPos);}
\DoxyCodeLine{00564       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00565       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00566     \}}
\DoxyCodeLine{00567     \textcolor{keywordflow}{case} P00:  \textcolor{comment}{// Scalatura}}
\DoxyCodeLine{00568     \{}
\DoxyCodeLine{00569       \textcolor{keywordflow}{if} (a <= epsilon || b <= epsilon) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00570       aff         = \mbox{\hyperlink{class_t_scale}{TScale}}(posCenter, sqrt(a / b));}
\DoxyCodeLine{00571       \mbox{\hyperlink{class_t_rect_t}{TRectD}} rect = hook-\/>getTrackerRegion(fid);}
\DoxyCodeLine{00572       \mbox{\hyperlink{class_t_point_t}{TPointD}} av(hook-\/>getTrackerRegion(fid).getP00());}
\DoxyCodeLine{00573       \mbox{\hyperlink{class_t_point_t}{TPointD}} av2(hook-\/>getTrackerRegion(fid).getP11());}
\DoxyCodeLine{00574       av        = aff * av;}
\DoxyCodeLine{00575       av2       = aff * av2;}
\DoxyCodeLine{00576       rect      = \mbox{\hyperlink{class_t_rect_t}{TRectD}}(av, av2);}
\DoxyCodeLine{00577       newWidth  = rect.getLx();}
\DoxyCodeLine{00578       newHeight = rect.getLy();}
\DoxyCodeLine{00579       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00580     \}}
\DoxyCodeLine{00581     \textcolor{keywordflow}{case} P10:  \textcolor{comment}{// Scalatura X e Y}}
\DoxyCodeLine{00582     \{}
\DoxyCodeLine{00583       \mbox{\hyperlink{class_t_point_t}{TPointD}} pos                = hook-\/>getPos(fid);}
\DoxyCodeLine{00584       \mbox{\hyperlink{class_t_point_t}{TPointD}} diffPos            = pp -\/ pos;}
\DoxyCodeLine{00585       \textcolor{keywordtype}{int} signumx                = 1;}
\DoxyCodeLine{00586       \textcolor{keywordtype}{int} signumy                = 1;}
\DoxyCodeLine{00587       \textcolor{keywordflow}{if} (diffPos.x < 0) signumx = -\/1;}
\DoxyCodeLine{00588       \textcolor{keywordflow}{if} (diffPos.y < 0) signumy = -\/1;}
\DoxyCodeLine{00589       newWidth = fabs(hook-\/>getTrackerRegionWidth() + 2 * signumx * deltaPos.x);}
\DoxyCodeLine{00590       newHeight =}
\DoxyCodeLine{00591           fabs(hook-\/>getTrackerRegionHeight() + 2 * signumy * deltaPos.y);}
\DoxyCodeLine{00592       \textcolor{comment}{// double newWidth = fabs(2*diffPos.x-\/fabs(2*signumx*deltaPos.x));}}
\DoxyCodeLine{00593       \textcolor{comment}{// double newHeight = fabs(2*diffPos.y-\/fabs(2*signumy*deltaPos.y));}}
\DoxyCodeLine{00594       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00595     \}}
\DoxyCodeLine{00596     \textcolor{keywordflow}{case} P1M:  \textcolor{comment}{// Ridimensiono X}}
\DoxyCodeLine{00597     \{}
\DoxyCodeLine{00598       \mbox{\hyperlink{class_t_rect_t}{TRectD}} rect = hook-\/>getTrackerRegion(fid);}
\DoxyCodeLine{00599       rect        = rect.enlarge(deltaPos.x, 0);}
\DoxyCodeLine{00600       newWidth    = rect.getLx();}
\DoxyCodeLine{00601       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00602     \}}
\DoxyCodeLine{00603     \textcolor{keywordflow}{case} PM1:  \textcolor{comment}{// Ridimensiono Y}}
\DoxyCodeLine{00604     \{}
\DoxyCodeLine{00605       \mbox{\hyperlink{class_t_rect_t}{TRectD}} rect = hook-\/>getTrackerRegion(fid);}
\DoxyCodeLine{00606       rect        = rect.enlarge(0, deltaPos.y);}
\DoxyCodeLine{00607       newHeight   = rect.getLy();}
\DoxyCodeLine{00608       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00609     \}}
\DoxyCodeLine{00610     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00611       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00612     \}}
\DoxyCodeLine{00613     \textcolor{keywordflow}{if} (newWidth > m\_toolSizeWidth.getRange().second ||}
\DoxyCodeLine{00614         newHeight > m\_toolSizeHeight.getRange().second)}
\DoxyCodeLine{00615       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00616     hook-\/>setTrackerRegionWidth(newWidth);}
\DoxyCodeLine{00617     hook-\/>setTrackerRegionHeight(newHeight);}
\DoxyCodeLine{00618     m\_toolSizeWidth.setValue(hook-\/>getTrackerRegionWidth());}
\DoxyCodeLine{00619     m\_toolSizeHeight.setValue(hook-\/>getTrackerRegionHeight());}
\DoxyCodeLine{00620     m\_toolPosX.setValue(hook-\/>getPos(fid).x);}
\DoxyCodeLine{00621     m\_toolPosY.setValue(hook-\/>getPos(fid).y);}
\DoxyCodeLine{00622     m\_toolPosX.notifyListeners();}
\DoxyCodeLine{00623     m\_toolPosY.notifyListeners();}
\DoxyCodeLine{00624     m\_toolSizeWidth.notifyListeners();}
\DoxyCodeLine{00625     m\_toolSizeHeight.notifyListeners();}
\DoxyCodeLine{00626   \}}
\DoxyCodeLine{00627   \textcolor{comment}{// TTool::Application *app = TTool::getApplication());}}
\DoxyCodeLine{00628   \textcolor{comment}{// app-\/>getCurrentScene()-\/>getScene()-\/>getXsheet()-\/>getPegbarTree()-\/>invalidateAll();}}
\DoxyCodeLine{00629   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00630 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_a7236ee12868b50caf5b4c449e478e588}\label{class_tracker_tool_a7236ee12868b50caf5b4c449e478e588}} 
\index{TrackerTool@{TrackerTool}!leftButtonUp@{leftButtonUp}}
\index{leftButtonUp@{leftButtonUp}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{leftButtonUp()}{leftButtonUp()}}
{\footnotesize\ttfamily void Tracker\+Tool\+::left\+Button\+Up (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00634                                                                       \{}
\DoxyCodeLine{00635   \textcolor{comment}{// note: apparently sometimes (when the user triple-\/clicks) we receive this}}
\DoxyCodeLine{00636   \textcolor{comment}{// event twice}}
\DoxyCodeLine{00637   \textcolor{keywordflow}{if} (!m\_buttonDown) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00638   \textcolor{comment}{// se clicco su una TrackerRegion già selezionato lo deseleziono (per}}
\DoxyCodeLine{00639   \textcolor{comment}{// permettere}}
\DoxyCodeLine{00640   \textcolor{comment}{// poi l'aggiunta di un nuovo TrackerObject}}
\DoxyCodeLine{00641   \textcolor{keywordflow}{if} (m\_dragged == \textcolor{keyword}{false} \&\& m\_hookSelectedIndex == m\_lastHookSelectedIndex) \{}
\DoxyCodeLine{00642     m\_hookSelectedIndex = -\/1;}
\DoxyCodeLine{00643   \}}
\DoxyCodeLine{00644   \textcolor{keywordflow}{if} (m\_newObjectAdded) \{}
\DoxyCodeLine{00645     m\_hookSelectedIndex = -\/1;}
\DoxyCodeLine{00646     m\_newObjectAdded    = \textcolor{keyword}{false};}
\DoxyCodeLine{00647     \textcolor{comment}{// emit signal in order to update schematic}}
\DoxyCodeLine{00648     TTool::getApplication()-\/>getCurrentXsheet()-\/>notifyXsheetChanged();}
\DoxyCodeLine{00649   \}}
\DoxyCodeLine{00650   m\_lastHookSelectedIndex = m\_hookSelectedIndex;}
\DoxyCodeLine{00651 }
\DoxyCodeLine{00652   m\_dragged    = \textcolor{keyword}{false};}
\DoxyCodeLine{00653   m\_buttonDown = \textcolor{keyword}{false};}
\DoxyCodeLine{00654 }
\DoxyCodeLine{00655   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = TTool::getApplication()-\/>getCurrentLevel()-\/>getLevel();}
\DoxyCodeLine{00656   \textcolor{keywordflow}{if} (!xl || !xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00657   xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}()-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a61fc160a558f50d75be87c6fae066d57}{setDirtyFlag}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00658 }
\DoxyCodeLine{00659   \textcolor{comment}{// m\_selection.selectNone();}}
\DoxyCodeLine{00660   \textcolor{keywordflow}{return};}
\DoxyCodeLine{00661 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_ade4f22ad1080f430e7e7120eee038b60}\label{class_tracker_tool_ade4f22ad1080f430e7e7120eee038b60}} 
\index{TrackerTool@{TrackerTool}!mouseMove@{mouseMove}}
\index{mouseMove@{mouseMove}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{mouseMove()}{mouseMove()}}
{\footnotesize\ttfamily void Tracker\+Tool\+::mouse\+Move (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00717                                                                     \{}
\DoxyCodeLine{00718   m\_picked = \textcolor{keyword}{true};}
\DoxyCodeLine{00719   \textcolor{keywordflow}{if} (m\_dragged == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{00720     \textcolor{keywordtype}{int} hookSelectedIndex;}
\DoxyCodeLine{00721     pick(hookSelectedIndex, pos);}
\DoxyCodeLine{00722     \textcolor{keywordflow}{if} (hookSelectedIndex < 0) \{}
\DoxyCodeLine{00723       m\_pos    = pos;}
\DoxyCodeLine{00724       m\_picked = \textcolor{keyword}{false};}
\DoxyCodeLine{00725     \}}
\DoxyCodeLine{00726     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00727   \}}
\DoxyCodeLine{00728 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_a487d9562afa8a7aef9456374c1104938}\label{class_tracker_tool_a487d9562afa8a7aef9456374c1104938}} 
\index{TrackerTool@{TrackerTool}!onActivate@{onActivate}}
\index{onActivate@{onActivate}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{onActivate()}{onActivate()}}
{\footnotesize\ttfamily void Tracker\+Tool\+::on\+Activate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback invoked whenever the tool activates. 



Reimplemented from \mbox{\hyperlink{class_t_tool_ac286a2681633b4db6106596b4f54e53b}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00853 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_a553f87540af25edbfacd6f65ffba986e}\label{class_tracker_tool_a553f87540af25edbfacd6f65ffba986e}} 
\index{TrackerTool@{TrackerTool}!onDeactivate@{onDeactivate}}
\index{onDeactivate@{onDeactivate}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{onDeactivate()}{onDeactivate()}}
{\footnotesize\ttfamily void Tracker\+Tool\+::on\+Deactivate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for tool deactivation, includes tool switch. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a00fee58728c1e12fb50846f47d7e9f5e}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00857                                \{}
\DoxyCodeLine{00858   \textcolor{comment}{// m\_selection.selectNone();}}
\DoxyCodeLine{00859   \textcolor{comment}{// TSelection::setCurrent(0);}}
\DoxyCodeLine{00860 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_aa8f1b485f6aac6fd196d7c14b2de8ca9}\label{class_tracker_tool_aa8f1b485f6aac6fd196d7c14b2de8ca9}} 
\index{TrackerTool@{TrackerTool}!onEnter@{onEnter}}
\index{onEnter@{onEnter}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{onEnter()}{onEnter()}}
{\footnotesize\ttfamily void Tracker\+Tool\+::on\+Enter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for the mouse entering the viewer area. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a3e775cfcd05aa3c35048b11fa40ab3e4}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00838                           \{}
\DoxyCodeLine{00839   \mbox{\hyperlink{class_hook_set}{HookSet}} *hookSet = getHookSet();}
\DoxyCodeLine{00840   \textcolor{keywordflow}{if} (!hookSet || hookSet-\/>getHookCount() <= m\_hookSelectedIndex)}
\DoxyCodeLine{00841     m\_hookSelectedIndex = -\/1;}
\DoxyCodeLine{00842 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_a8a25dc132a66faef0e5ff3bca15118b7}\label{class_tracker_tool_a8a25dc132a66faef0e5ff3bca15118b7}} 
\index{TrackerTool@{TrackerTool}!onImageChanged@{onImageChanged}}
\index{onImageChanged@{onImageChanged}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{onImageChanged()}{onImageChanged()}}
{\footnotesize\ttfamily void Tracker\+Tool\+::on\+Image\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Notifies changes in the image in use. 



Reimplemented from \mbox{\hyperlink{class_t_tool_aaf1e021290e74c1b085e4b095668e1ed}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00209 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_a59d2ad52afd3fbe75ec61ef09f7c177b}\label{class_tracker_tool_a59d2ad52afd3fbe75ec61ef09f7c177b}} 
\index{TrackerTool@{TrackerTool}!onLeave@{onLeave}}
\index{onLeave@{onLeave}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{onLeave()}{onLeave()}}
{\footnotesize\ttfamily void Tracker\+Tool\+::on\+Leave (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for the mouse leaving the viewer area. 



Reimplemented from \mbox{\hyperlink{class_t_tool_af7fb05265a94131da081da654e271a22}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00846                           \{}
\DoxyCodeLine{00847   \mbox{\hyperlink{class_tracker_objects_set}{TrackerObjectsSet}} *trackerObjectsSet = getTrackerObjectsSet();}
\DoxyCodeLine{00848   \textcolor{keywordflow}{if} (trackerObjectsSet) trackerObjectsSet-\/>clearAll();}
\DoxyCodeLine{00849 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_afd954cb1238b8c2aa78d6e2dc806e086}\label{class_tracker_tool_afd954cb1238b8c2aa78d6e2dc806e086}} 
\index{TrackerTool@{TrackerTool}!onPropertyChanged@{onPropertyChanged}}
\index{onPropertyChanged@{onPropertyChanged}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{onPropertyChanged()}{onPropertyChanged()}}
{\footnotesize\ttfamily bool Tracker\+Tool\+::on\+Property\+Changed (\begin{DoxyParamCaption}\item[{std\+::string}]{property\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

\begin{DoxyVerb} Does the tasks associated to changes in \p propertyName and returns \p
\end{DoxyVerb}
 true; Does the tasks associated to changes in {\ttfamily property\+Name} and returns {\ttfamily true}. 

Reimplemented from \mbox{\hyperlink{class_t_tool_a06694e0586f807c34b18e16341aa9ee2}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00731                                                           \{}
\DoxyCodeLine{00732   \mbox{\hyperlink{class_hook_set}{HookSet}} *hookSet = getHookSet();}
\DoxyCodeLine{00733   \textcolor{keywordflow}{if} (!hookSet || m\_hookSelectedIndex < 0) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00734   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{00735   \mbox{\hyperlink{class_hook}{Hook}} *hook   = hookSet-\/>getHook(m\_hookSelectedIndex);}
\DoxyCodeLine{00736   \textcolor{keywordflow}{if} (!hook || hook-\/>isEmpty()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00737   \textcolor{keywordflow}{if} (propertyName == \textcolor{stringliteral}{"{}Width:"{}}) \{}
\DoxyCodeLine{00738     \textcolor{keywordtype}{double} width = m\_toolSizeWidth.getValue();}
\DoxyCodeLine{00739     hook-\/>setTrackerRegionWidth(width);}
\DoxyCodeLine{00740   \}}
\DoxyCodeLine{00741   \textcolor{keywordflow}{if} (propertyName == \textcolor{stringliteral}{"{}Height:"{}}) \{}
\DoxyCodeLine{00742     \textcolor{keywordtype}{double} height = m\_toolSizeHeight.getValue();}
\DoxyCodeLine{00743     hook-\/>setTrackerRegionHeight(height);}
\DoxyCodeLine{00744   \}}
\DoxyCodeLine{00745   \textcolor{keywordflow}{if} (propertyName == \textcolor{stringliteral}{"{}X:"{}}) \{}
\DoxyCodeLine{00746     \textcolor{keywordtype}{double} x    = m\_toolPosX.getValue();}
\DoxyCodeLine{00747     \mbox{\hyperlink{class_t_point_t}{TPointD}} pos = hook-\/>getPos(fid);}
\DoxyCodeLine{00748     pos.x       = x;}
\DoxyCodeLine{00749     hook-\/>setAPos(fid, pos);}
\DoxyCodeLine{00750   \}}
\DoxyCodeLine{00751   \textcolor{keywordflow}{if} (propertyName == \textcolor{stringliteral}{"{}Y:"{}}) \{}
\DoxyCodeLine{00752     \textcolor{keywordtype}{double} y    = m\_toolPosY.getValue();}
\DoxyCodeLine{00753     \mbox{\hyperlink{class_t_point_t}{TPointD}} pos = hook-\/>getPos(fid);}
\DoxyCodeLine{00754     pos.y       = y;}
\DoxyCodeLine{00755     hook-\/>setAPos(fid, pos);}
\DoxyCodeLine{00756   \}}
\DoxyCodeLine{00757   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00758   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00759 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00688}{TTool\+::get\+Current\+Fid()}}, and \mbox{\hyperlink{l00540}{TTool\+::invalidate()}}.

\mbox{\Hypertarget{class_tracker_tool_a5d93fb5fadfa5b60036546ac6f6b74bc}\label{class_tracker_tool_a5d93fb5fadfa5b60036546ac6f6b74bc}} 
\index{TrackerTool@{TrackerTool}!onSelectionChanged@{onSelectionChanged}}
\index{onSelectionChanged@{onSelectionChanged}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{onSelectionChanged()}{onSelectionChanged()}}
{\footnotesize\ttfamily void Tracker\+Tool\+::on\+Selection\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00213 \{ \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_a9e869d69edd781976f9270a156d32219}\label{class_tracker_tool_a9e869d69edd781976f9270a156d32219}} 
\index{TrackerTool@{TrackerTool}!pick@{pick}}
\index{pick@{pick}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{pick()}{pick()}}
{\footnotesize\ttfamily bool Tracker\+Tool\+::pick (\begin{DoxyParamCaption}\item[{int \&}]{hook\+Index,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00354                                                          \{}
\DoxyCodeLine{00355   \textcolor{keywordtype}{double} minDistance = -\/1;}
\DoxyCodeLine{00356   m\_what             = Outside;}
\DoxyCodeLine{00357 }
\DoxyCodeLine{00358   \mbox{\hyperlink{class_hook_set}{HookSet}} *hookSet = getHookSet();}
\DoxyCodeLine{00359   \textcolor{keywordflow}{if} (!hookSet) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00360   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{00361 }
\DoxyCodeLine{00362   \textcolor{keywordtype}{double} pixelSize = getPixelSize();}
\DoxyCodeLine{00363   \textcolor{keywordtype}{int} i            = 0;}
\DoxyCodeLine{00364   \textcolor{keywordflow}{for} (i = 0; i < (int)hookSet-\/>getHookCount(); i++) \{}
\DoxyCodeLine{00365     \mbox{\hyperlink{class_hook}{Hook}} *hook = hookSet-\/>getHook(i);}
\DoxyCodeLine{00366     \textcolor{keywordflow}{if} (!hook || hook-\/>isEmpty()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00367     \textcolor{keywordtype}{int} trackerObjectId = hook-\/>getTrackerObjectId();}
\DoxyCodeLine{00368     \textcolor{keywordflow}{if} (trackerObjectId < 0)  \textcolor{comment}{// se non è una trackeRregion}}
\DoxyCodeLine{00369     \{}
\DoxyCodeLine{00370       \mbox{\hyperlink{class_t_point_t}{TPointD}} hookPos = hook-\/>getPos(fid);}
\DoxyCodeLine{00371       \mbox{\hyperlink{class_t_rect_t}{TRectD}} overArea =}
\DoxyCodeLine{00372           \mbox{\hyperlink{class_t_rect_t}{TRectD}}(hookPos.x -\/ 20 * pixelSize, hookPos.y -\/ 20 * pixelSize,}
\DoxyCodeLine{00373                  hookPos.x + 20 * pixelSize, hookPos.y + 20 * pixelSize);}
\DoxyCodeLine{00374       \textcolor{keywordflow}{if} (overArea.contains(pos)) \{}
\DoxyCodeLine{00375         hookIndex = i;  \textcolor{comment}{// setto l'indice dell'hook}}
\DoxyCodeLine{00376         m\_what    = NormalHook;}
\DoxyCodeLine{00377         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00378       \}}
\DoxyCodeLine{00379     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00380       \textcolor{comment}{/*}}
\DoxyCodeLine{00381 \textcolor{comment}{      TrackerObjectsSet *trackerObjectsSet = getTrackerObjectsSet();}}
\DoxyCodeLine{00382 \textcolor{comment}{      if(!trackerObjectsSet) return false;}}
\DoxyCodeLine{00383 \textcolor{comment}{      TrackerObject *trackerObject = trackerObjectsSet-\/>getObjectFromIndex(i);}}
\DoxyCodeLine{00384 \textcolor{comment}{      int j=0;}}
\DoxyCodeLine{00385 \textcolor{comment}{      for(j=0;j<(int)trackerObject-\/>getHooksCount();j++)}}
\DoxyCodeLine{00386 \textcolor{comment}{      \{*/}}
\DoxyCodeLine{00387       \mbox{\hyperlink{class_t_point_t}{TPointD}} centerPos = hook-\/>getPos(fid);}
\DoxyCodeLine{00388       \textcolor{keywordtype}{double} width      = hook-\/>getTrackerRegionWidth();}
\DoxyCodeLine{00389       \textcolor{keywordtype}{double} height     = hook-\/>getTrackerRegionHeight();}
\DoxyCodeLine{00390       \textcolor{keywordtype}{double} distance   = tdistance2(centerPos, pos);}
\DoxyCodeLine{00391       \mbox{\hyperlink{class_t_point_t}{TPointD}} localPos  = pos -\/ centerPos;}
\DoxyCodeLine{00392       \mbox{\hyperlink{class_t_rect_t}{TRectD}} rect       = hook-\/>getTrackerRegion(fid);}
\DoxyCodeLine{00393       \mbox{\hyperlink{class_t_rect_t}{TRectD}} overArea   = \mbox{\hyperlink{class_t_rect_t}{TRectD}}(}
\DoxyCodeLine{00394           rect.getP00().x -\/ 4 * pixelSize, rect.getP00().y -\/ 4 * pixelSize,}
\DoxyCodeLine{00395           rect.getP11().x + 4 * pixelSize, rect.getP11().y + 4 * pixelSize);}
\DoxyCodeLine{00396       \textcolor{comment}{// se pos è all'interno del'area sensibile del rettangolo}}
\DoxyCodeLine{00397       \textcolor{keywordflow}{if} (overArea.contains(pos)) \{}
\DoxyCodeLine{00398         \textcolor{keywordflow}{if} (distance < minDistance || minDistance == -\/1) \{}
\DoxyCodeLine{00399           minDistance = distance;}
\DoxyCodeLine{00400           hookIndex   = i;}
\DoxyCodeLine{00401 }
\DoxyCodeLine{00402           m\_what = Inside;}
\DoxyCodeLine{00403 }
\DoxyCodeLine{00404           \textcolor{comment}{// scale Y Area}}
\DoxyCodeLine{00405           \textcolor{keywordtype}{double} x =}
\DoxyCodeLine{00406               0.5 * (rect.getP01().x + rect.getP11().x);  \textcolor{comment}{// ascissa punto medio}}
\DoxyCodeLine{00407           \mbox{\hyperlink{class_t_point_t}{TPointD}} my = \mbox{\hyperlink{class_t_point_t}{TPointD}}(x, rect.getP11().y);}
\DoxyCodeLine{00408           \mbox{\hyperlink{class_t_rect_t}{TRectD}} scaleYArea =}
\DoxyCodeLine{00409               \mbox{\hyperlink{class_t_rect_t}{TRectD}}(my.x -\/ 4 * pixelSize, my.y -\/ 4 * pixelSize,}
\DoxyCodeLine{00410                      my.x + 4 * pixelSize, my.y + 4 * pixelSize);}
\DoxyCodeLine{00411           \textcolor{keywordflow}{if} (scaleYArea.contains(pos)) m\_what = PM1;}
\DoxyCodeLine{00412           \textcolor{comment}{// scale X Area}}
\DoxyCodeLine{00413           \textcolor{keywordtype}{double} y = 0.5 * (rect.getP11().y +}
\DoxyCodeLine{00414                             rect.getP10().y);  \textcolor{comment}{// ordinata punto medio}}
\DoxyCodeLine{00415           \mbox{\hyperlink{class_t_point_t}{TPointD}} mx = \mbox{\hyperlink{class_t_point_t}{TPointD}}(rect.getP10().x, y);}
\DoxyCodeLine{00416           \mbox{\hyperlink{class_t_rect_t}{TRectD}} scaleXArea =}
\DoxyCodeLine{00417               \mbox{\hyperlink{class_t_rect_t}{TRectD}}(mx.x -\/ 4 * pixelSize, mx.y -\/ 4 * pixelSize,}
\DoxyCodeLine{00418                      mx.x + 4 * pixelSize, mx.y + 4 * pixelSize);}
\DoxyCodeLine{00419           \textcolor{keywordflow}{if} (scaleXArea.contains(pos)) m\_what = P1M;}
\DoxyCodeLine{00420           \textcolor{comment}{// resize area (scale X and Y)}}
\DoxyCodeLine{00421           \mbox{\hyperlink{class_t_rect_t}{TRectD}} resizeArea = \mbox{\hyperlink{class_t_rect_t}{TRectD}}(}
\DoxyCodeLine{00422               rect.getP10().x -\/ 4 * pixelSize, rect.getP10().y -\/ 4 * pixelSize,}
\DoxyCodeLine{00423               rect.getP10().x + 4 * pixelSize, rect.getP10().y + 4 * pixelSize);}
\DoxyCodeLine{00424           \textcolor{keywordflow}{if} (resizeArea.contains(pos)) m\_what = P10;}
\DoxyCodeLine{00425           \textcolor{comment}{// scale area}}
\DoxyCodeLine{00426 }
\DoxyCodeLine{00427           \mbox{\hyperlink{class_t_rect_t}{TRectD}} scaleArea = \mbox{\hyperlink{class_t_rect_t}{TRectD}}(}
\DoxyCodeLine{00428               rect.getP00().x -\/ 4 * pixelSize, rect.getP00().y -\/ 4 * pixelSize,}
\DoxyCodeLine{00429               rect.getP00().x + 4 * pixelSize, rect.getP00().y + 4 * pixelSize);}
\DoxyCodeLine{00430           \textcolor{keywordflow}{if} (scaleArea.contains(pos)) m\_what = P00;}
\DoxyCodeLine{00431         \}}
\DoxyCodeLine{00432       \}}
\DoxyCodeLine{00433       \textcolor{comment}{//\}}}
\DoxyCodeLine{00434     \}}
\DoxyCodeLine{00435   \}}
\DoxyCodeLine{00436   \textcolor{keywordflow}{return} (minDistance != -\/1);}
\DoxyCodeLine{00437 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_a83551e9aba8256e5168c138f6af5e089}\label{class_tracker_tool_a83551e9aba8256e5168c138f6af5e089}} 
\index{TrackerTool@{TrackerTool}!reset@{reset}}
\index{reset@{reset}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily void Tracker\+Tool\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00760 \{ m\_hookSelectedIndex = -\/1; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_a7192ed11d9eff974b70787965c9245d6}\label{class_tracker_tool_a7192ed11d9eff974b70787965c9245d6}} 
\index{TrackerTool@{TrackerTool}!select@{select}}
\index{select@{select}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{select()}{select()}}
{\footnotesize\ttfamily bool Tracker\+Tool\+::select (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_selection}{TSelection}} $\ast$}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00215 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_tool_ac7c26df9d1e700d20ab1413ff538c9e5}\label{class_tracker_tool_ac7c26df9d1e700d20ab1413ff538c9e5}} 
\index{TrackerTool@{TrackerTool}!updateTranslation@{updateTranslation}}
\index{updateTranslation@{updateTranslation}!TrackerTool@{TrackerTool}}
\doxysubsubsection{\texorpdfstring{updateTranslation()}{updateTranslation()}}
{\footnotesize\ttfamily void Tracker\+Tool\+::update\+Translation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00254                                     \{}
\DoxyCodeLine{00255   m\_toolSizeWidth.setQStringName(tr(\textcolor{stringliteral}{"{}Width:"{}}));}
\DoxyCodeLine{00256   m\_toolSizeHeight.setQStringName(tr(\textcolor{stringliteral}{"{}Height:"{}}));}
\DoxyCodeLine{00257   m\_toolPosX.setQStringName(tr(\textcolor{stringliteral}{"{}X:"{}}));}
\DoxyCodeLine{00258   m\_toolPosY.setQStringName(tr(\textcolor{stringliteral}{"{}Y:"{}}));}
\DoxyCodeLine{00259 \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/trackertool.\+cpp\end{DoxyCompactItemize}
