\hypertarget{class_canvas_size_popup}{}\doxysection{Canvas\+Size\+Popup Class Reference}
\label{class_canvas_size_popup}\index{CanvasSizePopup@{CanvasSizePopup}}
Inheritance diagram for Canvas\+Size\+Popup\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_canvas_size_popup}
\end{center}
\end{figure}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_canvas_size_popup_ab2b34d454038d17509df56b104849bd8}{on\+Ok\+Btn}} ()
\item 
void \mbox{\hyperlink{class_canvas_size_popup_a4f756f02a49150c20d142cab86ff7d45}{on\+Size\+Changed}} ()
\item 
void \mbox{\hyperlink{class_canvas_size_popup_a412076da6cb2451d7fddea0053fb8439}{on\+Relative}} (bool)
\item 
void \mbox{\hyperlink{class_canvas_size_popup_afad0b46e4a88c129225e2460810d59e3}{on\+Unit\+Changed}} (int)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_canvas_size_popup_aece1c39b18594a14df6968d7cbfaa48c}{show\+Event}} (QShow\+Event $\ast$e) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_canvas_size_popup_a6741ade8b1c0d34ae10a2aff6cb8043c}\label{class_canvas_size_popup_a6741ade8b1c0d34ae10a2aff6cb8043c}} 
\index{CanvasSizePopup@{CanvasSizePopup}!CanvasSizePopup@{CanvasSizePopup}}
\index{CanvasSizePopup@{CanvasSizePopup}!CanvasSizePopup@{CanvasSizePopup}}
\doxysubsubsection{\texorpdfstring{CanvasSizePopup()}{CanvasSizePopup()}}
{\footnotesize\ttfamily Canvas\+Size\+Popup\+::\+Canvas\+Size\+Popup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00515     : \mbox{\hyperlink{class_d_v_gui_1_1_dialog}{DVGui::Dialog}}(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getMainWindow(), \textcolor{keyword}{true}, \textcolor{keyword}{true},}
\DoxyCodeLine{00516                     \textcolor{stringliteral}{"{}CanvasSize"{}}) \{}
\DoxyCodeLine{00517   m\_sl = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getSimpleLevel();}
\DoxyCodeLine{00518   assert(m\_sl);}
\DoxyCodeLine{00519   setWindowTitle(tr(\textcolor{stringliteral}{"{}Canvas Size"{}}));}
\DoxyCodeLine{00520   setMinimumSize(QSize(300, 350));}
\DoxyCodeLine{00521 }
\DoxyCodeLine{00522   \mbox{\hyperlink{class_d_v_gui_1_1_dialog_ae7de609b3b23233656bc68852a2d10cb}{beginVLayout}}();}
\DoxyCodeLine{00523 }
\DoxyCodeLine{00524   \mbox{\hyperlink{class_d_v_gui_1_1_dialog_aeb345870c2a42ee51811e0239585fbbb}{addSeparator}}(tr(\textcolor{stringliteral}{"{}Current Size"{}}));}
\DoxyCodeLine{00525 }
\DoxyCodeLine{00526   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} dim = m\_sl-\/>getResolution();}
\DoxyCodeLine{00527 }
\DoxyCodeLine{00528   \textcolor{comment}{// Current Xsize}}
\DoxyCodeLine{00529   m\_currentXSize = \textcolor{keyword}{new} QLabel(QString::number(dim.lx));}
\DoxyCodeLine{00530   m\_currentXSize-\/>setAlignment(Qt::AlignLeft | Qt::AlignVCenter);}
\DoxyCodeLine{00531   m\_currentXSize-\/>setFixedHeight(DVGui::WidgetHeight);}
\DoxyCodeLine{00532   \mbox{\hyperlink{class_d_v_gui_1_1_dialog_ada55b78010dbe97d4f2692cc6f2e933f}{addWidget}}(tr(\textcolor{stringliteral}{"{}Width:"{}}), m\_currentXSize);}
\DoxyCodeLine{00533 }
\DoxyCodeLine{00534   \textcolor{comment}{// Current Ysize}}
\DoxyCodeLine{00535   m\_currentYSize = \textcolor{keyword}{new} QLabel(QString::number(dim.ly));}
\DoxyCodeLine{00536   m\_currentYSize-\/>setAlignment(Qt::AlignLeft | Qt::AlignVCenter);}
\DoxyCodeLine{00537   m\_currentYSize-\/>setFixedHeight(DVGui::WidgetHeight);}
\DoxyCodeLine{00538   \mbox{\hyperlink{class_d_v_gui_1_1_dialog_ada55b78010dbe97d4f2692cc6f2e933f}{addWidget}}(tr(\textcolor{stringliteral}{"{}Height:"{}}), m\_currentYSize);}
\DoxyCodeLine{00539 }
\DoxyCodeLine{00540   \mbox{\hyperlink{class_d_v_gui_1_1_dialog_aeb345870c2a42ee51811e0239585fbbb}{addSeparator}}(tr(\textcolor{stringliteral}{"{}New Size"{}}));}
\DoxyCodeLine{00541 }
\DoxyCodeLine{00542   \textcolor{comment}{// Unit}}
\DoxyCodeLine{00543   m\_unit = \textcolor{keyword}{new} QComboBox(\textcolor{keyword}{this});}
\DoxyCodeLine{00544   m\_unit-\/>addItem(tr(\textcolor{stringliteral}{"{}pixel"{}}), \textcolor{stringliteral}{"{}pixel"{}});}
\DoxyCodeLine{00545   m\_unit-\/>addItem(tr(\textcolor{stringliteral}{"{}mm"{}}), \textcolor{stringliteral}{"{}mm"{}});}
\DoxyCodeLine{00546   m\_unit-\/>addItem(tr(\textcolor{stringliteral}{"{}cm"{}}), \textcolor{stringliteral}{"{}cm"{}});}
\DoxyCodeLine{00547   m\_unit-\/>addItem(tr(\textcolor{stringliteral}{"{}field"{}}), \textcolor{stringliteral}{"{}field"{}});}
\DoxyCodeLine{00548   m\_unit-\/>addItem(tr(\textcolor{stringliteral}{"{}inch"{}}), \textcolor{stringliteral}{"{}inch"{}});}
\DoxyCodeLine{00549   m\_unit-\/>setFixedHeight(DVGui::WidgetHeight);}
\DoxyCodeLine{00550   \mbox{\hyperlink{class_d_v_gui_1_1_dialog_ada55b78010dbe97d4f2692cc6f2e933f}{addWidget}}(tr(\textcolor{stringliteral}{"{}Unit:"{}}), m\_unit);}
\DoxyCodeLine{00551   connect(m\_unit, SIGNAL(currentIndexChanged(\textcolor{keywordtype}{int})), \textcolor{keyword}{this},}
\DoxyCodeLine{00552           SLOT(onUnitChanged(\textcolor{keywordtype}{int})));}
\DoxyCodeLine{00553 }
\DoxyCodeLine{00554   \textcolor{comment}{// New Xsize}}
\DoxyCodeLine{00555   m\_xSizeFld = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit}{DVGui::DoubleLineEdit}}(\textcolor{keyword}{this}, dim.lx);}
\DoxyCodeLine{00556   m\_xSizeFld-\/>setFixedSize(80, DVGui::WidgetHeight);}
\DoxyCodeLine{00557   \mbox{\hyperlink{class_d_v_gui_1_1_dialog_ada55b78010dbe97d4f2692cc6f2e933f}{addWidget}}(tr(\textcolor{stringliteral}{"{}Width:"{}}), m\_xSizeFld);}
\DoxyCodeLine{00558   connect(m\_xSizeFld, SIGNAL(textChanged(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00559           SLOT(onSizeChanged()));}
\DoxyCodeLine{00560 }
\DoxyCodeLine{00561   \textcolor{comment}{// New Ysize}}
\DoxyCodeLine{00562   m\_ySizeFld = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit}{DVGui::DoubleLineEdit}}(\textcolor{keyword}{this}, dim.ly);}
\DoxyCodeLine{00563   m\_ySizeFld-\/>setFixedSize(80, DVGui::WidgetHeight);}
\DoxyCodeLine{00564   \mbox{\hyperlink{class_d_v_gui_1_1_dialog_ada55b78010dbe97d4f2692cc6f2e933f}{addWidget}}(tr(\textcolor{stringliteral}{"{}Height:"{}}), m\_ySizeFld);}
\DoxyCodeLine{00565   connect(m\_ySizeFld, SIGNAL(textChanged(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00566           SLOT(onSizeChanged()));}
\DoxyCodeLine{00567 }
\DoxyCodeLine{00568   \textcolor{comment}{// Relative}}
\DoxyCodeLine{00569   m\_relative = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_check_box}{DVGui::CheckBox}}(tr(\textcolor{stringliteral}{"{}Relative"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00570   m\_relative-\/>setFixedHeight(DVGui::WidgetHeight);}
\DoxyCodeLine{00571   m\_relative-\/>setChecked(\textcolor{keyword}{false});}
\DoxyCodeLine{00572   connect(m\_relative, SIGNAL(toggled(\textcolor{keywordtype}{bool})), \textcolor{keyword}{this}, SLOT(onRelative(\textcolor{keywordtype}{bool})));}
\DoxyCodeLine{00573   \mbox{\hyperlink{class_d_v_gui_1_1_dialog_ada55b78010dbe97d4f2692cc6f2e933f}{addWidget}}(m\_relative);}
\DoxyCodeLine{00574 }
\DoxyCodeLine{00575   \mbox{\hyperlink{class_d_v_gui_1_1_dialog_aeb345870c2a42ee51811e0239585fbbb}{addSeparator}}(tr(\textcolor{stringliteral}{"{}Anchor"{}}));}
\DoxyCodeLine{00576 }
\DoxyCodeLine{00577   m\_pegging = \textcolor{keyword}{new} \mbox{\hyperlink{class_pegging_widget}{PeggingWidget}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00578   \mbox{\hyperlink{class_d_v_gui_1_1_dialog_ada55b78010dbe97d4f2692cc6f2e933f}{addWidget}}(\textcolor{stringliteral}{"{}"{}}, m\_pegging);}
\DoxyCodeLine{00579 }
\DoxyCodeLine{00580   \mbox{\hyperlink{class_d_v_gui_1_1_dialog_ab88d88334402845e544da6ca1f207c79}{endVLayout}}();}
\DoxyCodeLine{00581 }
\DoxyCodeLine{00582   \textcolor{comment}{// add buttons}}
\DoxyCodeLine{00583   QPushButton *okBtn = \textcolor{keyword}{new} QPushButton(tr(\textcolor{stringliteral}{"{}Resize"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00584   okBtn-\/>setDefault(\textcolor{keyword}{true});}
\DoxyCodeLine{00585   QPushButton *cancelBtn = \textcolor{keyword}{new} QPushButton(tr(\textcolor{stringliteral}{"{}Cancel"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00586   connect(okBtn, SIGNAL(clicked()), \textcolor{keyword}{this}, SLOT(onOkBtn()));}
\DoxyCodeLine{00587   connect(cancelBtn, SIGNAL(clicked()), \textcolor{keyword}{this}, SLOT(reject()));}
\DoxyCodeLine{00588 }
\DoxyCodeLine{00589   \mbox{\hyperlink{class_d_v_gui_1_1_dialog_aff324b24a1ad0c06fdc178024c1f0cf0}{addButtonBarWidget}}(okBtn, cancelBtn);}
\DoxyCodeLine{00590 }
\DoxyCodeLine{00591   m\_xMeasure = TMeasureManager::instance()-\/>get(\textcolor{stringliteral}{"{}canvas.lx"{}});}
\DoxyCodeLine{00592   m\_yMeasure = TMeasureManager::instance()-\/>get(\textcolor{stringliteral}{"{}canvas.ly"{}});}
\DoxyCodeLine{00593 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_canvas_size_popup_ab2b34d454038d17509df56b104849bd8}\label{class_canvas_size_popup_ab2b34d454038d17509df56b104849bd8}} 
\index{CanvasSizePopup@{CanvasSizePopup}!onOkBtn@{onOkBtn}}
\index{onOkBtn@{onOkBtn}!CanvasSizePopup@{CanvasSizePopup}}
\doxysubsubsection{\texorpdfstring{onOkBtn}{onOkBtn}}
{\footnotesize\ttfamily void Canvas\+Size\+Popup\+::on\+Ok\+Btn (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00677                               \{}
\DoxyCodeLine{00678   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} dim = m\_sl-\/>getResolution();}
\DoxyCodeLine{00679   \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi    = m\_sl-\/>getDpi();}
\DoxyCodeLine{00680   QString unit   = m\_unit-\/>currentData().toString();}
\DoxyCodeLine{00681   \textcolor{keywordtype}{int} newXValue =}
\DoxyCodeLine{00682       getPixelLength(m\_xSizeFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a4cb043e4d9f7c7ffeed57a72bc10a26e}{getValue}}(), m\_xMeasure, dpi.x, unit);}
\DoxyCodeLine{00683   \textcolor{keywordtype}{int} newYValue =}
\DoxyCodeLine{00684       getPixelLength(m\_ySizeFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a4cb043e4d9f7c7ffeed57a72bc10a26e}{getValue}}(), m\_yMeasure, dpi.y, unit);}
\DoxyCodeLine{00685   \textcolor{keywordtype}{bool} relative = m\_relative-\/>isChecked();}
\DoxyCodeLine{00686   newXValue     = relative ? dim.lx + newXValue : newXValue;}
\DoxyCodeLine{00687   newYValue     = relative ? dim.ly + newYValue : newYValue;}
\DoxyCodeLine{00688   newXValue     = newXValue > 0 ? newXValue : 1;}
\DoxyCodeLine{00689   newYValue     = newYValue > 0 ? newYValue : 1;}
\DoxyCodeLine{00690 }
\DoxyCodeLine{00691   \textcolor{keywordflow}{if} ((relative \&\& newXValue == 0 \&\& newYValue == 0) ||}
\DoxyCodeLine{00692       (!relative \&\& dim.lx == newXValue \&\& dim.ly == newYValue)) \{}
\DoxyCodeLine{00693     close();}
\DoxyCodeLine{00694     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00695   \}}
\DoxyCodeLine{00696 }
\DoxyCodeLine{00697   \textcolor{keywordflow}{if} (dim.lx > newXValue || dim.ly > newYValue) \{}
\DoxyCodeLine{00698     \textcolor{keywordtype}{int} ret = DVGui::MsgBox(tr(\textcolor{stringliteral}{"{}The new canvas size is smaller than the "{}}}
\DoxyCodeLine{00699                                \textcolor{stringliteral}{"{}current one.\(\backslash\)nDo you want to crop the canvas?"{}}),}
\DoxyCodeLine{00700                             tr(\textcolor{stringliteral}{"{}Crop"{}}), tr(\textcolor{stringliteral}{"{}Cancel"{}}));}
\DoxyCodeLine{00701     \textcolor{keywordflow}{if} (ret == 2) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00702   \}}
\DoxyCodeLine{00703   close();}
\DoxyCodeLine{00704 }
\DoxyCodeLine{00705   QApplication::setOverrideCursor(Qt::WaitCursor);}
\DoxyCodeLine{00706   PeggingPositions pegPos = m\_pegging-\/>getPeggingPosition();}
\DoxyCodeLine{00707   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} newDim(newXValue, newYValue);}
\DoxyCodeLine{00708 }
\DoxyCodeLine{00709   \mbox{\hyperlink{class_t_point_t}{TPoint}} pos;}
\DoxyCodeLine{00710   \textcolor{keywordflow}{if} (pegPos == e00 || pegPos == e10 || pegPos == e20) pos.x = 0;}
\DoxyCodeLine{00711   \textcolor{keywordflow}{if} (pegPos == e01 || pegPos == e11 || pegPos == e21)}
\DoxyCodeLine{00712     pos.x = (newDim.lx -\/ dim.lx) * 0.5;}
\DoxyCodeLine{00713   \textcolor{keywordflow}{if} (pegPos == e02 || pegPos == e12 || pegPos == e22)}
\DoxyCodeLine{00714     pos.x = newDim.lx -\/ dim.lx;}
\DoxyCodeLine{00715 }
\DoxyCodeLine{00716   \textcolor{keywordflow}{if} (pegPos == e20 || pegPos == e21 || pegPos == e22) pos.y = 0;}
\DoxyCodeLine{00717   \textcolor{keywordflow}{if} (pegPos == e10 || pegPos == e11 || pegPos == e12)}
\DoxyCodeLine{00718     pos.y = (newDim.ly -\/ dim.ly) * 0.5;}
\DoxyCodeLine{00719   \textcolor{keywordflow}{if} (pegPos == e00 || pegPos == e01 || pegPos == e02)}
\DoxyCodeLine{00720     pos.y = newDim.ly -\/ dim.ly;}
\DoxyCodeLine{00721 }
\DoxyCodeLine{00722   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00723   std::vector<TFrameId> fids;}
\DoxyCodeLine{00724   m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{getFids}}(fids);}
\DoxyCodeLine{00725   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{00726   \textcolor{keywordflow}{for} (i = 0; i < (int)fids.size(); i++) \{}
\DoxyCodeLine{00727     \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img = m\_sl-\/>getFrame(fids[i], \textcolor{keyword}{true});}
\DoxyCodeLine{00728     \mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} ri(img);}
\DoxyCodeLine{00729     \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti(img);}
\DoxyCodeLine{00730 }
\DoxyCodeLine{00731     \textcolor{keywordflow}{if} (ri) \{}
\DoxyCodeLine{00732       \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} ras    = ri-\/>getRaster();}
\DoxyCodeLine{00733       \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} newRas = ras-\/>create(newDim.lx, newDim.ly);}
\DoxyCodeLine{00734       \textcolor{keywordflow}{if} (newRas-\/>getPixelSize() < 4)}
\DoxyCodeLine{00735         memset(newRas-\/>\mbox{\hyperlink{class_t_raster_a5ce02b7e8a5b8b594863aa272d8dcdbc}{getRawData}}(), 255,}
\DoxyCodeLine{00736                newRas-\/>getPixelSize() * newRas-\/>\mbox{\hyperlink{class_t_raster_a760946b6cb48d7414f90cd421078912c}{getWrap}}() * newRas-\/>getLy());}
\DoxyCodeLine{00737       \textcolor{comment}{// TRop::addBackground(newRas,TPixel32::White);}}
\DoxyCodeLine{00738       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00739         newRas-\/>clear();}
\DoxyCodeLine{00740       newRas-\/>\mbox{\hyperlink{class_t_raster_a3c590c4ebe4cb8c1f352437692ffd20e}{copy}}(ras, pos);}
\DoxyCodeLine{00741       \mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} newImg(newRas);}
\DoxyCodeLine{00742       \textcolor{keywordtype}{double} xdpi, ydpi;}
\DoxyCodeLine{00743       ri-\/>getDpi(xdpi, ydpi);}
\DoxyCodeLine{00744       newImg-\/>setDpi(xdpi, ydpi);}
\DoxyCodeLine{00745       m\_sl-\/>setFrame(fids[i], newImg);}
\DoxyCodeLine{00746       TUndoManager::manager()-\/>add(}
\DoxyCodeLine{00747           \textcolor{keyword}{new} ResizeCanvasUndo(m\_sl, fids[i], img, newImg, dim, newDim));}
\DoxyCodeLine{00748     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ti) \{}
\DoxyCodeLine{00749       \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} ras    = ti-\/>getRaster();}
\DoxyCodeLine{00750       \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} newRas = ras-\/>create(newDim.lx, newDim.ly);}
\DoxyCodeLine{00751       newRas-\/>clear();}
\DoxyCodeLine{00752       newRas-\/>\mbox{\hyperlink{class_t_raster_a3c590c4ebe4cb8c1f352437692ffd20e}{copy}}(ras, pos);}
\DoxyCodeLine{00753       \mbox{\hyperlink{class_t_rect_t}{TRect}} box;}
\DoxyCodeLine{00754       \mbox{\hyperlink{namespace_t_rop_a1dfdba06d4f71d86755d8e0833a7a071}{TRop::computeBBox}}(newRas, box);}
\DoxyCodeLine{00755       \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} newImg(newRas, box);}
\DoxyCodeLine{00756       \textcolor{keywordtype}{double} xdpi, ydpi;}
\DoxyCodeLine{00757       ti-\/>getDpi(xdpi, ydpi);}
\DoxyCodeLine{00758       newImg-\/>setDpi(xdpi, ydpi);}
\DoxyCodeLine{00759       m\_sl-\/>setFrame(fids[i], newImg);}
\DoxyCodeLine{00760       TUndoManager::manager()-\/>add(}
\DoxyCodeLine{00761           \textcolor{keyword}{new} ResizeCanvasUndo(m\_sl, fids[i], img, newImg, dim, newDim));}
\DoxyCodeLine{00762     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00763       assert(0);}
\DoxyCodeLine{00764     IconGenerator::instance()-\/>invalidate(m\_sl.getPointer(), fids[i]);}
\DoxyCodeLine{00765     m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a3c20a8d11037048322d2035b0f286209}{touchFrame}}(fids[i]);}
\DoxyCodeLine{00766   \}}
\DoxyCodeLine{00767   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{00768   m\_sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a9dd72acd3e3fd85e3d44c6b44a8f9ff4}{setImageRes}}(newDim);}
\DoxyCodeLine{00769   IconGenerator::instance()-\/>invalidateSceneIcon();}
\DoxyCodeLine{00770   QApplication::restoreOverrideCursor();}
\DoxyCodeLine{00771   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>notifyCanvasSizeChange();}
\DoxyCodeLine{00772 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_canvas_size_popup_a412076da6cb2451d7fddea0053fb8439}\label{class_canvas_size_popup_a412076da6cb2451d7fddea0053fb8439}} 
\index{CanvasSizePopup@{CanvasSizePopup}!onRelative@{onRelative}}
\index{onRelative@{onRelative}!CanvasSizePopup@{CanvasSizePopup}}
\doxysubsubsection{\texorpdfstring{onRelative}{onRelative}}
{\footnotesize\ttfamily void Canvas\+Size\+Popup\+::on\+Relative (\begin{DoxyParamCaption}\item[{bool}]{toggled }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00635                                              \{}
\DoxyCodeLine{00636   \textcolor{keywordflow}{if} (toggled) \{}
\DoxyCodeLine{00637     m\_xSizeFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a7d777640f0e092fcccc84976e72e2e5f}{setValue}}(0);}
\DoxyCodeLine{00638     m\_ySizeFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a7d777640f0e092fcccc84976e72e2e5f}{setValue}}(0);}
\DoxyCodeLine{00639   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00640     \mbox{\hyperlink{class_t_dimension_t}{TDimension}} dim = m\_sl-\/>getResolution();}
\DoxyCodeLine{00641     \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi    = m\_sl-\/>getDpi();}
\DoxyCodeLine{00642     QString unit   = m\_unit-\/>currentData().toString();}
\DoxyCodeLine{00643     \textcolor{keywordtype}{double} dimLx   = getMeasuredLength(dim.lx, m\_xMeasure, dpi.x, unit);}
\DoxyCodeLine{00644     \textcolor{keywordtype}{double} dimLy   = getMeasuredLength(dim.ly, m\_yMeasure, dpi.y, unit);}
\DoxyCodeLine{00645     m\_xSizeFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a7d777640f0e092fcccc84976e72e2e5f}{setValue}}(dimLx);}
\DoxyCodeLine{00646     m\_ySizeFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a7d777640f0e092fcccc84976e72e2e5f}{setValue}}(dimLy);}
\DoxyCodeLine{00647   \}}
\DoxyCodeLine{00648 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_canvas_size_popup_a4f756f02a49150c20d142cab86ff7d45}\label{class_canvas_size_popup_a4f756f02a49150c20d142cab86ff7d45}} 
\index{CanvasSizePopup@{CanvasSizePopup}!onSizeChanged@{onSizeChanged}}
\index{onSizeChanged@{onSizeChanged}!CanvasSizePopup@{CanvasSizePopup}}
\doxysubsubsection{\texorpdfstring{onSizeChanged}{onSizeChanged}}
{\footnotesize\ttfamily void Canvas\+Size\+Popup\+::on\+Size\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00616                                     \{}
\DoxyCodeLine{00617   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} dim        = m\_sl-\/>getResolution();}
\DoxyCodeLine{00618   \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi           = m\_sl-\/>getDpi();}
\DoxyCodeLine{00619   QString unit          = m\_unit-\/>currentData().toString();}
\DoxyCodeLine{00620   \textcolor{keywordtype}{double} measuredXValue = m\_relative-\/>isChecked()}
\DoxyCodeLine{00621                               ? dim.lx + m\_xSizeFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a4cb043e4d9f7c7ffeed57a72bc10a26e}{getValue}}()}
\DoxyCodeLine{00622                               : m\_xSizeFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a4cb043e4d9f7c7ffeed57a72bc10a26e}{getValue}}();}
\DoxyCodeLine{00623   \textcolor{keywordtype}{double} measuredYValue = m\_relative-\/>isChecked()}
\DoxyCodeLine{00624                               ? dim.ly + m\_ySizeFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a4cb043e4d9f7c7ffeed57a72bc10a26e}{getValue}}()}
\DoxyCodeLine{00625                               : m\_ySizeFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a4cb043e4d9f7c7ffeed57a72bc10a26e}{getValue}}();}
\DoxyCodeLine{00626   \textcolor{keywordtype}{double} newXValue = getPixelLength(measuredXValue, m\_xMeasure, dpi.x, unit);}
\DoxyCodeLine{00627   \textcolor{keywordtype}{double} newYValue = getPixelLength(measuredYValue, m\_yMeasure, dpi.y, unit);}
\DoxyCodeLine{00628   m\_pegging-\/>cutLx(dim.lx > newXValue);}
\DoxyCodeLine{00629   m\_pegging-\/>cutLy(dim.ly > newYValue);}
\DoxyCodeLine{00630   m\_pegging-\/>updateAnchor();}
\DoxyCodeLine{00631 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_canvas_size_popup_afad0b46e4a88c129225e2460810d59e3}\label{class_canvas_size_popup_afad0b46e4a88c129225e2460810d59e3}} 
\index{CanvasSizePopup@{CanvasSizePopup}!onUnitChanged@{onUnitChanged}}
\index{onUnitChanged@{onUnitChanged}!CanvasSizePopup@{CanvasSizePopup}}
\doxysubsubsection{\texorpdfstring{onUnitChanged}{onUnitChanged}}
{\footnotesize\ttfamily void Canvas\+Size\+Popup\+::on\+Unit\+Changed (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00652                                              \{}
\DoxyCodeLine{00653   \textcolor{keywordflow}{if} (m\_relative-\/>isChecked()) \{}
\DoxyCodeLine{00654     m\_xSizeFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a7d777640f0e092fcccc84976e72e2e5f}{setValue}}(0);}
\DoxyCodeLine{00655     m\_ySizeFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a7d777640f0e092fcccc84976e72e2e5f}{setValue}}(0);}
\DoxyCodeLine{00656     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00657   \}}
\DoxyCodeLine{00658   QString unit = m\_unit-\/>itemData(index).toString();}
\DoxyCodeLine{00659   \textcolor{keywordflow}{if} (unit != \textcolor{stringliteral}{"{}pixel"{}}) \{}
\DoxyCodeLine{00660     \mbox{\hyperlink{class_t_unit}{TUnit}} *measureUnit = m\_xMeasure-\/>getUnit(unit.toStdWString());}
\DoxyCodeLine{00661     m\_xMeasure-\/>setCurrentUnit(measureUnit);}
\DoxyCodeLine{00662     measureUnit = m\_yMeasure-\/>getUnit(unit.toStdWString());}
\DoxyCodeLine{00663     m\_yMeasure-\/>setCurrentUnit(measureUnit);}
\DoxyCodeLine{00664   \}}
\DoxyCodeLine{00665   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} dim = m\_sl-\/>getResolution();}
\DoxyCodeLine{00666   \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi    = m\_sl-\/>getDpi();}
\DoxyCodeLine{00667   \textcolor{keywordtype}{double} dimLx   = getMeasuredLength(dim.lx, m\_xMeasure, dpi.x, unit);}
\DoxyCodeLine{00668   \textcolor{keywordtype}{double} dimLy   = getMeasuredLength(dim.ly, m\_yMeasure, dpi.y, unit);}
\DoxyCodeLine{00669   m\_currentXSize-\/>setText(QString::number(dimLx));}
\DoxyCodeLine{00670   m\_currentYSize-\/>setText(QString::number(dimLy));}
\DoxyCodeLine{00671   m\_xSizeFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a7d777640f0e092fcccc84976e72e2e5f}{setValue}}(dimLx);}
\DoxyCodeLine{00672   m\_ySizeFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a7d777640f0e092fcccc84976e72e2e5f}{setValue}}(dimLy);}
\DoxyCodeLine{00673 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_canvas_size_popup_aece1c39b18594a14df6968d7cbfaa48c}\label{class_canvas_size_popup_aece1c39b18594a14df6968d7cbfaa48c}} 
\index{CanvasSizePopup@{CanvasSizePopup}!showEvent@{showEvent}}
\index{showEvent@{showEvent}!CanvasSizePopup@{CanvasSizePopup}}
\doxysubsubsection{\texorpdfstring{showEvent()}{showEvent()}}
{\footnotesize\ttfamily void Canvas\+Size\+Popup\+::show\+Event (\begin{DoxyParamCaption}\item[{QShow\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00597                                              \{}
\DoxyCodeLine{00598   m\_sl = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getSimpleLevel();}
\DoxyCodeLine{00599   assert(m\_sl);}
\DoxyCodeLine{00600   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} dim = m\_sl-\/>getResolution();}
\DoxyCodeLine{00601   \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi    = m\_sl-\/>getDpi();}
\DoxyCodeLine{00602   \textcolor{keywordtype}{double} dimLx   = getMeasuredLength(dim.lx, m\_xMeasure, dpi.x,}
\DoxyCodeLine{00603                                    m\_unit-\/>currentData().toString());}
\DoxyCodeLine{00604   \textcolor{keywordtype}{double} dimLy = getMeasuredLength(dim.ly, m\_yMeasure, dpi.y,}
\DoxyCodeLine{00605                                    m\_unit-\/>currentData().toString());}
\DoxyCodeLine{00606   m\_currentXSize-\/>setText(QString::number(dimLx));}
\DoxyCodeLine{00607   m\_currentYSize-\/>setText(QString::number(dimLy));}
\DoxyCodeLine{00608   m\_relative-\/>setChecked(\textcolor{keyword}{false});}
\DoxyCodeLine{00609   m\_xSizeFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a7d777640f0e092fcccc84976e72e2e5f}{setValue}}(dimLx);}
\DoxyCodeLine{00610   m\_ySizeFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a7d777640f0e092fcccc84976e72e2e5f}{setValue}}(dimLy);}
\DoxyCodeLine{00611   m\_pegging-\/>resetWidget();}
\DoxyCodeLine{00612 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/canvassizepopup.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/canvassizepopup.\+cpp\end{DoxyCompactItemize}
