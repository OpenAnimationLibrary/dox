\hypertarget{class_spline_painter}{}\doxysection{Spline\+Painter Class Reference}
\label{class_spline_painter}\index{SplinePainter@{SplinePainter}}
Inheritance diagram for Spline\+Painter\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_spline_painter}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_spline_painter_a00b8ece23202fa48b01aac745a5ff9ab}{Spline\+Painter}} (\mbox{\hyperlink{class_stage_schematic_spline_node}{Stage\+Schematic\+Spline\+Node}} $\ast$parent, double width, double height, const QString \&name)
\item 
QRectF \mbox{\hyperlink{class_spline_painter_aecc42dd9710033e72b9388ac2cbfa166}{bounding\+Rect}} () const override
\item 
void \mbox{\hyperlink{class_spline_painter_a9e426cf0651d3649ecc52ce2378cae34}{paint}} (QPainter $\ast$painter, const QStyle\+Option\+Graphics\+Item $\ast$option, QWidget $\ast$widget=0) override
\item 
void \mbox{\hyperlink{class_spline_painter_a5f93dec08a48a8874809a724653e85c6}{set\+Name}} (const QString \&name)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_spline_painter_a67dc3c8f1ab6f15f7856f9ba755cd895}{context\+Menu\+Event}} (QGraphics\+Scene\+Context\+Menu\+Event $\ast$cme) override
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_spline_painter_a00b8ece23202fa48b01aac745a5ff9ab}\label{class_spline_painter_a00b8ece23202fa48b01aac745a5ff9ab}} 
\index{SplinePainter@{SplinePainter}!SplinePainter@{SplinePainter}}
\index{SplinePainter@{SplinePainter}!SplinePainter@{SplinePainter}}
\doxysubsubsection{\texorpdfstring{SplinePainter()}{SplinePainter()}}
{\footnotesize\ttfamily Spline\+Painter\+::\+Spline\+Painter (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_stage_schematic_spline_node}{Stage\+Schematic\+Spline\+Node}} $\ast$}]{parent,  }\item[{double}]{width,  }\item[{double}]{height,  }\item[{const QString \&}]{name }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00611     : QGraphicsItem(parent)}
\DoxyCodeLine{00612     , m\_parent(parent)}
\DoxyCodeLine{00613     , m\_width(width)}
\DoxyCodeLine{00614     , m\_height(height)}
\DoxyCodeLine{00615     , m\_name(name) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_spline_painter_a1969cabec7e16ce030be2ffa6532f449}\label{class_spline_painter_a1969cabec7e16ce030be2ffa6532f449}} 
\index{SplinePainter@{SplinePainter}!````~SplinePainter@{$\sim$SplinePainter}}
\index{````~SplinePainter@{$\sim$SplinePainter}!SplinePainter@{SplinePainter}}
\doxysubsubsection{\texorpdfstring{$\sim$SplinePainter()}{~SplinePainter()}}
{\footnotesize\ttfamily Spline\+Painter\+::$\sim$\+Spline\+Painter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00619 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_spline_painter_aecc42dd9710033e72b9388ac2cbfa166}\label{class_spline_painter_aecc42dd9710033e72b9388ac2cbfa166}} 
\index{SplinePainter@{SplinePainter}!boundingRect@{boundingRect}}
\index{boundingRect@{boundingRect}!SplinePainter@{SplinePainter}}
\doxysubsubsection{\texorpdfstring{boundingRect()}{boundingRect()}}
{\footnotesize\ttfamily QRectF Spline\+Painter\+::bounding\+Rect (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00623                                          \{}
\DoxyCodeLine{00624   \textcolor{keywordflow}{if} (m\_parent-\/>isOpened())}
\DoxyCodeLine{00625     \textcolor{keywordflow}{return} QRectF(-\/5, -\/5, m\_width + 10, m\_height + 59);}
\DoxyCodeLine{00626   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00627     \textcolor{keywordflow}{return} QRectF(-\/5, -\/5, m\_width + 10, m\_height + 10);}
\DoxyCodeLine{00628 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_spline_painter_a67dc3c8f1ab6f15f7856f9ba755cd895}\label{class_spline_painter_a67dc3c8f1ab6f15f7856f9ba755cd895}} 
\index{SplinePainter@{SplinePainter}!contextMenuEvent@{contextMenuEvent}}
\index{contextMenuEvent@{contextMenuEvent}!SplinePainter@{SplinePainter}}
\doxysubsubsection{\texorpdfstring{contextMenuEvent()}{contextMenuEvent()}}
{\footnotesize\ttfamily void Spline\+Painter\+::context\+Menu\+Event (\begin{DoxyParamCaption}\item[{QGraphics\+Scene\+Context\+Menu\+Event $\ast$}]{cme }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00675                                                                         \{}
\DoxyCodeLine{00676   \mbox{\hyperlink{class_stage_schematic_scene}{StageSchematicScene}} *stageScene =}
\DoxyCodeLine{00677       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_stage_schematic_scene}{StageSchematicScene}} *\textcolor{keyword}{>}(scene());}
\DoxyCodeLine{00678   QMenu menu(stageScene-\/>views()[0]);}
\DoxyCodeLine{00679 }
\DoxyCodeLine{00680   QAction *removeSpline = \textcolor{keyword}{new} QAction(tr(\textcolor{stringliteral}{"{}\&Delete"{}}), \&menu);}
\DoxyCodeLine{00681   connect(removeSpline, SIGNAL(triggered()), stageScene,}
\DoxyCodeLine{00682           SLOT(onRemoveSpline()));}
\DoxyCodeLine{00683   QAction *saveSpline = \textcolor{keyword}{new} QAction(tr(\textcolor{stringliteral}{"{}\&Save Motion Path..."{}}), \&menu);}
\DoxyCodeLine{00684   connect(saveSpline, SIGNAL(triggered()), stageScene, SLOT(onSaveSpline()));}
\DoxyCodeLine{00685   QAction *loadSpline = \textcolor{keyword}{new} QAction(tr(\textcolor{stringliteral}{"{}\&Load Motion Path..."{}}), \&menu);}
\DoxyCodeLine{00686   connect(loadSpline, SIGNAL(triggered()), stageScene, SLOT(onLoadSpline()));}
\DoxyCodeLine{00687 }
\DoxyCodeLine{00688   QAction *\mbox{\hyperlink{namespace_t_rop_a229eb7fd85c23c325ea4ba55478d5712}{copy}}  = CommandManager::instance()-\/>getAction(\textcolor{stringliteral}{"{}MI\_Copy"{}});}
\DoxyCodeLine{00689   QAction *cut   = CommandManager::instance()-\/>getAction(\textcolor{stringliteral}{"{}MI\_Cut"{}});}
\DoxyCodeLine{00690   QAction *paste = CommandManager::instance()-\/>getAction(\textcolor{stringliteral}{"{}MI\_Paste"{}});}
\DoxyCodeLine{00691 }
\DoxyCodeLine{00692   menu.addAction(saveSpline);}
\DoxyCodeLine{00693   menu.addAction(loadSpline);}
\DoxyCodeLine{00694   menu.addSeparator();}
\DoxyCodeLine{00695   menu.addAction(removeSpline);}
\DoxyCodeLine{00696   menu.addAction(copy);}
\DoxyCodeLine{00697   menu.addAction(cut);}
\DoxyCodeLine{00698   menu.addAction(paste);}
\DoxyCodeLine{00699   menu.exec(cme-\/>screenPos());}
\DoxyCodeLine{00700 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_spline_painter_a9e426cf0651d3649ecc52ce2378cae34}\label{class_spline_painter_a9e426cf0651d3649ecc52ce2378cae34}} 
\index{SplinePainter@{SplinePainter}!paint@{paint}}
\index{paint@{paint}!SplinePainter@{SplinePainter}}
\doxysubsubsection{\texorpdfstring{paint()}{paint()}}
{\footnotesize\ttfamily void Spline\+Painter\+::paint (\begin{DoxyParamCaption}\item[{QPainter $\ast$}]{painter,  }\item[{const QStyle\+Option\+Graphics\+Item $\ast$}]{option,  }\item[{QWidget $\ast$}]{widget = {\ttfamily 0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}

draw the name only if it is not editing
\begin{DoxyCode}{0}
\DoxyCodeLine{00634                                            \{}
\DoxyCodeLine{00635   \mbox{\hyperlink{class_stage_schematic_scene}{StageSchematicScene}} *stageScene =}
\DoxyCodeLine{00636       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_stage_schematic_scene}{StageSchematicScene}} *\textcolor{keyword}{>}(scene());}
\DoxyCodeLine{00637   \textcolor{keywordflow}{if} (!stageScene) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00638 }
\DoxyCodeLine{00639   \mbox{\hyperlink{class_schematic_viewer}{SchematicViewer}} *viewer = stageScene-\/>getSchematicViewer();}
\DoxyCodeLine{00640 }
\DoxyCodeLine{00641   painter-\/>setBrush(viewer-\/>getSplineColor());}
\DoxyCodeLine{00642   painter-\/>setPen(Qt::NoPen);}
\DoxyCodeLine{00643   painter-\/>drawRoundRect(QRectF(0, 0, m\_width, m\_height), 20, 99);}
\DoxyCodeLine{00644   \textcolor{keywordflow}{if} (m\_parent-\/>isOpened()) \{}
\DoxyCodeLine{00645     \textcolor{comment}{// Draw the pixmap}}
\DoxyCodeLine{00646     painter-\/>setBrush(Qt::NoBrush);}
\DoxyCodeLine{00647     painter-\/>setPen(QColor(0, 0, 0, 255));}
\DoxyCodeLine{00648     QPixmap pixmap = scalePixmapKeepingAspectRatio(}
\DoxyCodeLine{00649         m\_parent-\/>getPixmap(), QSize(m\_width, 49), Qt::transparent);}
\DoxyCodeLine{00650     \textcolor{keywordflow}{if} (!pixmap.isNull()) \{}
\DoxyCodeLine{00651       painter-\/>drawPixmap(QPointF(0, 18), pixmap);}
\DoxyCodeLine{00652     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00653       painter-\/>setBrush(QColor(255, 255, 255, 255));}
\DoxyCodeLine{00654       painter-\/>drawRect(0, 18, m\_width, 49);}
\DoxyCodeLine{00655     \}}
\DoxyCodeLine{00656   \}}
\DoxyCodeLine{00657 }
\DoxyCodeLine{00659   \textcolor{keywordflow}{if} (!m\_parent-\/>isNameEditing()) \{}
\DoxyCodeLine{00660     \textcolor{comment}{/* There is no current spline}}
\DoxyCodeLine{00661 \textcolor{comment}{              TStageObjectId currObj = stageScene-\/>getCurrentObject();}}
\DoxyCodeLine{00662 \textcolor{comment}{        if(currObj.getCode() == m\_parent-\/>getSpline()-\/>getId())}}
\DoxyCodeLine{00663 \textcolor{comment}{          painter-\/>setPen(viewer-\/>getSelectedNodeTextColor());}}
\DoxyCodeLine{00664 \textcolor{comment}{        else}}
\DoxyCodeLine{00665 \textcolor{comment}{    */}}
\DoxyCodeLine{00666     painter-\/>setPen(viewer-\/>getTextColor());}
\DoxyCodeLine{00667     QRectF rect(18, 0, 72, 18);}
\DoxyCodeLine{00668     QString elidedName = elideText(m\_name, painter-\/>font(), rect.width());}
\DoxyCodeLine{00669     painter-\/>drawText(rect, Qt::AlignLeft | Qt::AlignVCenter, elidedName);}
\DoxyCodeLine{00670   \}}
\DoxyCodeLine{00671 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_spline_painter_a5f93dec08a48a8874809a724653e85c6}\label{class_spline_painter_a5f93dec08a48a8874809a724653e85c6}} 
\index{SplinePainter@{SplinePainter}!setName@{setName}}
\index{setName@{setName}!SplinePainter@{SplinePainter}}
\doxysubsubsection{\texorpdfstring{setName()}{setName()}}
{\footnotesize\ttfamily void Spline\+Painter\+::set\+Name (\begin{DoxyParamCaption}\item[{const QString \&}]{name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00198 \{ m\_name = name; \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonzqt/stageschematicnode.\+h\item 
E\+:/opentoonz/toonz/sources/toonzqt/stageschematicnode.\+cpp\end{DoxyCompactItemize}
