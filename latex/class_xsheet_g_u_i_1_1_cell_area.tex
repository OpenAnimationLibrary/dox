\hypertarget{class_xsheet_g_u_i_1_1_cell_area}{}\doxysection{Xsheet\+GUI\+::Cell\+Area Class Reference}
\label{class_xsheet_g_u_i_1_1_cell_area}\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}}


La classe si occupa della visualizzazione delle celle nel viewer.  




{\ttfamily \#include $<$xshcellviewer.\+h$>$}

Inheritance diagram for Xsheet\+GUI\+::Cell\+Area\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_xsheet_g_u_i_1_1_cell_area}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_aa5c433545c3feb53a0f234d29f1e2563}{Cell\+Area}} (\mbox{\hyperlink{class_xsheet_viewer}{Xsheet\+Viewer}} $\ast$parent, Qt\+::\+WFlags flags=0)
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a908ae0a77b45e3907291d2be953148c7}{mouse\+Move\+Event}} (QMouse\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a27a66d5adde4142ac1c1b946342adb1b}{on\+Control\+Pressed}} (bool pressed)
\item 
const bool \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a0d5a29e2eb78b3411537780b5f113e23}{is\+Control\+Pressed}} ()
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a14d74627e18efdae69a063cbce304039}{show\+Rename\+Field}} (int row, int col, bool multi\+Column\+Selected=false)
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a2f68217b6b4aa82a3a316b30dfda8247}{hide\+Rename\+Field}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_ad52301a3b7e523ce4a6a62ea342165c8}{open\+Note}} ()
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a5b573be58a3e38d1dd1418d22f2f6046}{delete\+Note}} ()
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a9dd399c0ad4dca36c4c66c6f8031bb30}{on\+Step\+Changed}} (QAction $\ast$)
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a8834bc87ebb88a6662b380587295f785}{on\+Replace\+By\+Casted\+Level}} (QAction $\ast$action)
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a1075cc38246704488fc056df58e3e864}{on\+Set\+Cell\+Mark}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_ae299ad0140bc908b93a99b062edf769c}{paint\+Event}} (QPaint\+Event $\ast$) override
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_ae025276e19351e2b2430720383ba1518}{mouse\+Press\+Event}} (QMouse\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_aa0f5b71c06e8170b16c1d33c5e288855}{mouse\+Release\+Event}} (QMouse\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a90ddb8058286d19ca83ee0c05b67b06b}{mouse\+Double\+Click\+Event}} (QMouse\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_ad52503d710a0c28f77802345a378153f}{context\+Menu\+Event}} (QContext\+Menu\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a2c382fbf8b9f30b6163c4abdb20284a6}{drag\+Enter\+Event}} (QDrag\+Enter\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a199b99c41f49c666c03c2c2a8e38a07a}{drag\+Leave\+Event}} (QDrag\+Leave\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_abd78e6d1f1050115fa21ba98160b672d}{drag\+Move\+Event}} (QDrag\+Move\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a3701a194f3309e7b632d5263d6e6cc5b}{drop\+Event}} (QDrop\+Event $\ast$event) override
\item 
bool \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_ae40f89d46182a628b14e956c13357887}{event}} (QEvent $\ast$event) override
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a5a776b5b465ce6a03fc010a13fccb24a}{create\+Cell\+Menu}} (QMenu \&menu, bool is\+Cell\+Selected, \mbox{\hyperlink{class_t_xsh_cell}{TXsh\+Cell}} cell, int row, int col)
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a4f983304012306e204a4aba11514bfd5}{create\+Key\+Menu}} (QMenu \&menu)
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a32990a254fbeec3d3a8f0f826adacce9}{create\+Key\+Line\+Menu}} (QMenu \&menu, int row, int col)
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a4db067a47b699d3b285eed81d4d1dd15}{create\+Note\+Menu}} (QMenu \&menu)
\begin{DoxyCompactList}\small\item\em Crea il menu\textquotesingle{} del tasto destro che si visualizza quando si sopra una nota. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
La classe si occupa della visualizzazione delle celle nel viewer. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_aa5c433545c3feb53a0f234d29f1e2563}\label{class_xsheet_g_u_i_1_1_cell_area_aa5c433545c3feb53a0f234d29f1e2563}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!CellArea@{CellArea}}
\index{CellArea@{CellArea}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{CellArea()}{CellArea()}}
{\footnotesize\ttfamily Xsheet\+GUI\+::\+Cell\+Area\+::\+Cell\+Area (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_xsheet_viewer}{Xsheet\+Viewer}} $\ast$}]{parent,  }\item[{Qt\+::\+WFlags}]{flags = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01124     : QWidget(parent, flags)}
\DoxyCodeLine{01125     , m\_viewer(parent)}
\DoxyCodeLine{01126     , m\_levelExtenderRect()}
\DoxyCodeLine{01127     , m\_soundLevelModifyRects()}
\DoxyCodeLine{01128     , m\_isPanning(\textcolor{keyword}{false})}
\DoxyCodeLine{01129     , m\_isMousePressed(\textcolor{keyword}{false})}
\DoxyCodeLine{01130     , m\_pos(-\/1, -\/1)}
\DoxyCodeLine{01131     , m\_tooltip(tr(\textcolor{stringliteral}{"{}"{}}))}
\DoxyCodeLine{01132     , m\_renameCell(\textcolor{keyword}{new} RenameCellField(\textcolor{keyword}{this}, m\_viewer)) \{}
\DoxyCodeLine{01133   setAcceptDrops(\textcolor{keyword}{true});}
\DoxyCodeLine{01134   setMouseTracking(\textcolor{keyword}{true});}
\DoxyCodeLine{01135   m\_renameCell-\/>hide();}
\DoxyCodeLine{01136   setFocusPolicy(Qt::NoFocus);}
\DoxyCodeLine{01137   setObjectName(\textcolor{stringliteral}{"{}XsheetCellArea"{}});}
\DoxyCodeLine{01138 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a2f2e2f6f13ca062fdff1beb03d82db0b}\label{class_xsheet_g_u_i_1_1_cell_area_a2f2e2f6f13ca062fdff1beb03d82db0b}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!````~CellArea@{$\sim$CellArea}}
\index{````~CellArea@{$\sim$CellArea}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{$\sim$CellArea()}{~CellArea()}}
{\footnotesize\ttfamily Xsheet\+GUI\+::\+Cell\+Area\+::$\sim$\+Cell\+Area (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01142 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_ad52503d710a0c28f77802345a378153f}\label{class_xsheet_g_u_i_1_1_cell_area_ad52503d710a0c28f77802345a378153f}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!contextMenuEvent@{contextMenuEvent}}
\index{contextMenuEvent@{contextMenuEvent}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{contextMenuEvent()}{contextMenuEvent()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::context\+Menu\+Event (\begin{DoxyParamCaption}\item[{QContext\+Menu\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{03579                                                         \{}
\DoxyCodeLine{03580   \textcolor{keyword}{const} \mbox{\hyperlink{class_orientation}{Orientation}} *o = m\_viewer-\/>orientation();}
\DoxyCodeLine{03581   \mbox{\hyperlink{class_t_point_t}{TPoint}} pos(event-\/>pos().x(), event-\/>pos().y());}
\DoxyCodeLine{03582   \mbox{\hyperlink{class_cell_position}{CellPosition}} cellPosition = m\_viewer-\/>xyToPosition(event-\/>pos());}
\DoxyCodeLine{03583   \textcolor{keywordtype}{int} row                   = cellPosition.frame();}
\DoxyCodeLine{03584   \textcolor{keywordtype}{int} col                   = cellPosition.layer();}
\DoxyCodeLine{03585   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell             = m\_viewer-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col);}
\DoxyCodeLine{03586 }
\DoxyCodeLine{03587   QMenu menu(\textcolor{keyword}{this});}
\DoxyCodeLine{03588 }
\DoxyCodeLine{03589   \textcolor{comment}{// Verifico se ho cliccato su una nota}}
\DoxyCodeLine{03590   \mbox{\hyperlink{class_t_xsh_note_set}{TXshNoteSet}} *notes = m\_viewer-\/>getXsheet()-\/>getNotes();}
\DoxyCodeLine{03591   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{03592   \textcolor{keywordflow}{for} (i = notes-\/>getCount() -\/ 1; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{03593     \textcolor{keywordtype}{int} r       = notes-\/>getNoteRow(i);}
\DoxyCodeLine{03594     \textcolor{keywordtype}{int} c       = notes-\/>getNoteCol(i);}
\DoxyCodeLine{03595     QPoint xy   = m\_viewer-\/>positionToXY(\mbox{\hyperlink{class_cell_position}{CellPosition}}(r, c));}
\DoxyCodeLine{03596     \mbox{\hyperlink{class_t_point_t}{TPointD}} pos = notes-\/>getNotePos(i) + \mbox{\hyperlink{class_t_point_t}{TPointD}}(xy.x(), xy.y());}
\DoxyCodeLine{03597     QRect rect  = o-\/>rect(PredefinedRect::NOTE\_ICON).translated(pos.x, pos.y);}
\DoxyCodeLine{03598     \textcolor{keywordflow}{if} (!rect.contains(event-\/>pos())) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03599     m\_viewer-\/>setCurrentNoteIndex(i);}
\DoxyCodeLine{03600     \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a4db067a47b699d3b285eed81d4d1dd15}{createNoteMenu}}(menu);}
\DoxyCodeLine{03601     \textcolor{keywordflow}{if} (!menu.isEmpty()) menu.exec(event-\/>globalPos());}
\DoxyCodeLine{03602     \textcolor{keywordflow}{return};}
\DoxyCodeLine{03603   \}}
\DoxyCodeLine{03604 }
\DoxyCodeLine{03605   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh         = m\_viewer-\/>getXsheet();}
\DoxyCodeLine{03606   \textcolor{keywordtype}{int} x0               = m\_viewer-\/>positionToXY(cellPosition).x();}
\DoxyCodeLine{03607   \textcolor{keywordtype}{int} x                = pos.x -\/ x0;}
\DoxyCodeLine{03608   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *pegbar = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(m\_viewer-\/>\mbox{\hyperlink{class_xsheet_viewer_acef259f8c33344981f8c218590bca5d9}{getObjectId}}(col));}
\DoxyCodeLine{03609   \textcolor{keywordtype}{int} k0, k1;}
\DoxyCodeLine{03610   \textcolor{keywordtype}{int} r0, r1, c0, c1;}
\DoxyCodeLine{03611   m\_viewer-\/>getCellSelection()-\/>getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{03612 }
\DoxyCodeLine{03613   QPoint cellTopLeft = m\_viewer-\/>positionToXY(\mbox{\hyperlink{class_cell_position}{CellPosition}}(row, col));}
\DoxyCodeLine{03614   QPoint mouseInCell = \textcolor{keyword}{event}-\/>pos() -\/ cellTopLeft;}
\DoxyCodeLine{03615   \textcolor{keywordtype}{bool} isKeyframeFrame =}
\DoxyCodeLine{03616       Preferences::instance()-\/>isShowKeyframesOnXsheetCellAreaEnabled() \&\&}
\DoxyCodeLine{03617       pegbar \&\& pegbar-\/>getKeyframeRange(k0, k1) \&\& k0 <= row \&\& row <= k1 + 1;}
\DoxyCodeLine{03618 }
\DoxyCodeLine{03619   \textcolor{keywordflow}{if} (isKeyframeFrame \&\& isKeyFrameArea(col, row, mouseInCell)) \{}
\DoxyCodeLine{03620     \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} objectId;}
\DoxyCodeLine{03621     \textcolor{keywordflow}{if} (col < 0)}
\DoxyCodeLine{03622       objectId = TStageObjectId::CameraId(xsh-\/>getCameraColumnIndex());}
\DoxyCodeLine{03623     \textcolor{keywordflow}{else} \{  \textcolor{comment}{// Set the current column and the current object}}
\DoxyCodeLine{03624       objectId = TStageObjectId::ColumnId(col);}
\DoxyCodeLine{03625       m\_viewer-\/>setCurrentColumn(col);}
\DoxyCodeLine{03626     \}}
\DoxyCodeLine{03627     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a0d91c122eec2b756b7c4780014e49f9e}{getCurrentObject}}()-\/>setObjectId(objectId);}
\DoxyCodeLine{03628     m\_viewer-\/>setCurrentRow(row);}
\DoxyCodeLine{03629     \textcolor{keywordflow}{if} (pegbar-\/>\mbox{\hyperlink{class_t_stage_object_af2c8c37f71b2b2e2c2a15c6eb73b8b38}{isKeyframe}}(row)) \{  \textcolor{comment}{// clicking on keyframes}}
\DoxyCodeLine{03630       \mbox{\hyperlink{class_t_keyframe_selection}{TKeyframeSelection}} *keyframeSelection = m\_viewer-\/>getKeyframeSelection();}
\DoxyCodeLine{03631       keyframeSelection-\/>select(row, col);}
\DoxyCodeLine{03632       keyframeSelection-\/>makeCurrent();}
\DoxyCodeLine{03633       \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a4f983304012306e204a4aba11514bfd5}{createKeyMenu}}(menu);}
\DoxyCodeLine{03634     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(col) ||}
\DoxyCodeLine{03635                !xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(col)}
\DoxyCodeLine{03636                     -\/>\mbox{\hyperlink{class_t_xsh_column_a04953896aae8860ace46010956a28db9}{isLocked}}())  \textcolor{comment}{// on the line between two keyframes}}
\DoxyCodeLine{03637       \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a32990a254fbeec3d3a8f0f826adacce9}{createKeyLineMenu}}(menu, row, col);}
\DoxyCodeLine{03638   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_viewer-\/>getCellSelection()-\/>isCellSelected(}
\DoxyCodeLine{03639                  row, col) \&\&  \textcolor{comment}{// La cella e' selezionata}}
\DoxyCodeLine{03640              (abs(r1 -\/ r0) > 0 ||}
\DoxyCodeLine{03641               abs(c1 -\/ c0) >}
\DoxyCodeLine{03642                   0))  \textcolor{comment}{// Il numero di celle selezionate e' maggiore di 1}}
\DoxyCodeLine{03643   \{                    \textcolor{comment}{// Sono su una selezione di celle}}
\DoxyCodeLine{03644     m\_viewer-\/>setCurrentColumn(col);}
\DoxyCodeLine{03645     \textcolor{keywordtype}{int} e, f;}
\DoxyCodeLine{03646     \textcolor{keywordtype}{bool} areCellsEmpty = \textcolor{keyword}{false};}
\DoxyCodeLine{03647     \textcolor{keywordflow}{for} (e = r0; e <= r1; e++) \{}
\DoxyCodeLine{03648       \textcolor{keywordflow}{for} (f = c0; f <= c1; f++)}
\DoxyCodeLine{03649         \textcolor{keywordflow}{if} (!xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(e, f).\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \{}
\DoxyCodeLine{03650           areCellsEmpty = \textcolor{keyword}{true};}
\DoxyCodeLine{03651           \textcolor{keywordflow}{break};}
\DoxyCodeLine{03652         \}}
\DoxyCodeLine{03653       \textcolor{keywordflow}{if} (areCellsEmpty) \textcolor{keywordflow}{break};}
\DoxyCodeLine{03654     \}}
\DoxyCodeLine{03655     \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a5a776b5b465ce6a03fc010a13fccb24a}{createCellMenu}}(menu, areCellsEmpty, cell, row, col);}
\DoxyCodeLine{03656   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{03657     m\_viewer-\/>getCellSelection()-\/>makeCurrent();}
\DoxyCodeLine{03658     m\_viewer-\/>getCellSelection()-\/>selectCell(row, col);}
\DoxyCodeLine{03659     m\_viewer-\/>setCurrentColumn(col);}
\DoxyCodeLine{03660 }
\DoxyCodeLine{03661     \mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a5a776b5b465ce6a03fc010a13fccb24a}{createCellMenu}}(menu, !cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}(), cell, row, col);}
\DoxyCodeLine{03662   \}}
\DoxyCodeLine{03663 }
\DoxyCodeLine{03664   \textcolor{keywordflow}{if} (!menu.isEmpty()) menu.exec(event-\/>globalPos());}
\DoxyCodeLine{03665 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a5a776b5b465ce6a03fc010a13fccb24a}\label{class_xsheet_g_u_i_1_1_cell_area_a5a776b5b465ce6a03fc010a13fccb24a}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!createCellMenu@{createCellMenu}}
\index{createCellMenu@{createCellMenu}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{createCellMenu()}{createCellMenu()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::create\+Cell\+Menu (\begin{DoxyParamCaption}\item[{QMenu \&}]{menu,  }\item[{bool}]{is\+Cell\+Selected,  }\item[{\mbox{\hyperlink{class_t_xsh_cell}{TXsh\+Cell}}}]{cell,  }\item[{int}]{row,  }\item[{int}]{col }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Crea il menu\textquotesingle{} del tasto destro che si visualizza quando si clicca sulla cella, distinguendo i due casi\+: cella piena, cella vuota. 
\begin{DoxyCode}{0}
\DoxyCodeLine{03751                                                 \{}
\DoxyCodeLine{03752   \mbox{\hyperlink{class_command_manager}{CommandManager}} *cmdManager = CommandManager::instance();}
\DoxyCodeLine{03753 }
\DoxyCodeLine{03754   \textcolor{keywordtype}{bool} soundCellsSelected     = m\_viewer-\/>\mbox{\hyperlink{class_xsheet_viewer_a268e48f8420c2b83bc15f73733527d42}{areSoundCellsSelected}}();}
\DoxyCodeLine{03755   \textcolor{keywordtype}{bool} soundTextCellsSelected = m\_viewer-\/>areSoundTextCellsSelected();}
\DoxyCodeLine{03756   \textcolor{keywordtype}{bool} cameraCellsSelected    = m\_viewer-\/>areCameraCellsSelected();}
\DoxyCodeLine{03757 }
\DoxyCodeLine{03758   menu.addSeparator();}
\DoxyCodeLine{03759 }
\DoxyCodeLine{03760   \textcolor{keywordflow}{if} (!soundCellsSelected) \{}
\DoxyCodeLine{03761     menu.addAction(cmdManager-\/>getAction(MI\_LoadLevel));}
\DoxyCodeLine{03762     menu.addAction(cmdManager-\/>getAction(MI\_NewLevel));}
\DoxyCodeLine{03763     menu.addSeparator();}
\DoxyCodeLine{03764   \}}
\DoxyCodeLine{03765 }
\DoxyCodeLine{03766   \textcolor{keywordflow}{if} (isCellSelected) \{}
\DoxyCodeLine{03767     \textcolor{keywordtype}{bool} addSeparator = \textcolor{keyword}{false};}
\DoxyCodeLine{03768     \textcolor{comment}{// open fx settings instead of level settings when clicked on zerary fx}}
\DoxyCodeLine{03769     \textcolor{comment}{// level}}
\DoxyCodeLine{03770     \textcolor{keywordflow}{if} (cell.m\_level \&\& cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a903cb5c2c50f8f34fdda2b89ecdece7f}{getZeraryFxLevel}}()) \{}
\DoxyCodeLine{03771       menu.addAction(cmdManager-\/>getAction(MI\_FxParamEditor));}
\DoxyCodeLine{03772       addSeparator = \textcolor{keyword}{true};}
\DoxyCodeLine{03773     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!soundTextCellsSelected) \{}
\DoxyCodeLine{03774       menu.addAction(cmdManager-\/>getAction(MI\_LevelSettings));}
\DoxyCodeLine{03775       addSeparator = \textcolor{keyword}{true};}
\DoxyCodeLine{03776     \}}
\DoxyCodeLine{03777     \textcolor{keywordflow}{if} (addSeparator) menu.addSeparator();}
\DoxyCodeLine{03778 }
\DoxyCodeLine{03779     \textcolor{keywordflow}{if} (!soundCellsSelected) \{}
\DoxyCodeLine{03780       QMenu *reframeSubMenu = \textcolor{keyword}{new} QMenu(tr(\textcolor{stringliteral}{"{}Reframe"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{03781       \{}
\DoxyCodeLine{03782         reframeSubMenu-\/>addAction(cmdManager-\/>getAction(MI\_Reframe1));}
\DoxyCodeLine{03783         reframeSubMenu-\/>addAction(cmdManager-\/>getAction(MI\_Reframe2));}
\DoxyCodeLine{03784         reframeSubMenu-\/>addAction(cmdManager-\/>getAction(MI\_Reframe3));}
\DoxyCodeLine{03785         reframeSubMenu-\/>addAction(cmdManager-\/>getAction(MI\_Reframe4));}
\DoxyCodeLine{03786         reframeSubMenu-\/>addAction(}
\DoxyCodeLine{03787             cmdManager-\/>getAction(MI\_ReframeWithEmptyInbetweens));}
\DoxyCodeLine{03788       \}}
\DoxyCodeLine{03789       menu.addMenu(reframeSubMenu);}
\DoxyCodeLine{03790 }
\DoxyCodeLine{03791       QMenu *stepSubMenu = \textcolor{keyword}{new} QMenu(tr(\textcolor{stringliteral}{"{}Step"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{03792       \{}
\DoxyCodeLine{03793         stepSubMenu-\/>addAction(cmdManager-\/>getAction(MI\_Step2));}
\DoxyCodeLine{03794         stepSubMenu-\/>addAction(cmdManager-\/>getAction(MI\_Step3));}
\DoxyCodeLine{03795         stepSubMenu-\/>addAction(cmdManager-\/>getAction(MI\_Step4));}
\DoxyCodeLine{03796         stepSubMenu-\/>addAction(cmdManager-\/>getAction(MI\_ResetStep));}
\DoxyCodeLine{03797         stepSubMenu-\/>addAction(cmdManager-\/>getAction(MI\_IncreaseStep));}
\DoxyCodeLine{03798         stepSubMenu-\/>addAction(cmdManager-\/>getAction(MI\_DecreaseStep));}
\DoxyCodeLine{03799       \}}
\DoxyCodeLine{03800       menu.addMenu(stepSubMenu);}
\DoxyCodeLine{03801       QMenu *eachSubMenu = \textcolor{keyword}{new} QMenu(tr(\textcolor{stringliteral}{"{}Each"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{03802       \{}
\DoxyCodeLine{03803         eachSubMenu-\/>addAction(cmdManager-\/>getAction(MI\_Each2));}
\DoxyCodeLine{03804         eachSubMenu-\/>addAction(cmdManager-\/>getAction(MI\_Each3));}
\DoxyCodeLine{03805         eachSubMenu-\/>addAction(cmdManager-\/>getAction(MI\_Each4));}
\DoxyCodeLine{03806       \}}
\DoxyCodeLine{03807       menu.addMenu(eachSubMenu);}
\DoxyCodeLine{03808 }
\DoxyCodeLine{03809       \textcolor{keywordflow}{if} (!soundTextCellsSelected) \{}
\DoxyCodeLine{03810         QMenu *editCellNumbersMenu = \textcolor{keyword}{new} QMenu(tr(\textcolor{stringliteral}{"{}Edit Cell Numbers"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{03811         \{}
\DoxyCodeLine{03812           editCellNumbersMenu-\/>addAction(cmdManager-\/>getAction(MI\_Reverse));}
\DoxyCodeLine{03813           editCellNumbersMenu-\/>addAction(cmdManager-\/>getAction(MI\_Swing));}
\DoxyCodeLine{03814           editCellNumbersMenu-\/>addAction(cmdManager-\/>getAction(MI\_Random));}
\DoxyCodeLine{03815           editCellNumbersMenu-\/>addAction(cmdManager-\/>getAction(MI\_Dup));}
\DoxyCodeLine{03816           editCellNumbersMenu-\/>addAction(cmdManager-\/>getAction(MI\_Rollup));}
\DoxyCodeLine{03817           editCellNumbersMenu-\/>addAction(cmdManager-\/>getAction(MI\_Rolldown));}
\DoxyCodeLine{03818           editCellNumbersMenu-\/>addAction(cmdManager-\/>getAction(MI\_TimeStretch));}
\DoxyCodeLine{03819           editCellNumbersMenu-\/>addAction(}
\DoxyCodeLine{03820               cmdManager-\/>getAction(MI\_AutoInputCellNumber));}
\DoxyCodeLine{03821         \}}
\DoxyCodeLine{03822         menu.addMenu(editCellNumbersMenu);}
\DoxyCodeLine{03823       \}}
\DoxyCodeLine{03824       menu.addAction(cmdManager-\/>getAction(MI\_FillEmptyCell));}
\DoxyCodeLine{03825 }
\DoxyCodeLine{03826       menu.addSeparator();}
\DoxyCodeLine{03827 }
\DoxyCodeLine{03828       \textcolor{keywordflow}{if} (!soundTextCellsSelected)}
\DoxyCodeLine{03829         menu.addAction(cmdManager-\/>getAction(MI\_Autorenumber));}
\DoxyCodeLine{03830     \}}
\DoxyCodeLine{03831 }
\DoxyCodeLine{03832     \textcolor{keywordflow}{if} (!soundTextCellsSelected) \{}
\DoxyCodeLine{03833       QMenu *replaceLevelMenu = \textcolor{keyword}{new} QMenu(tr(\textcolor{stringliteral}{"{}Replace Level"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{03834       menu.addMenu(replaceLevelMenu);}
\DoxyCodeLine{03835 }
\DoxyCodeLine{03836       replaceLevelMenu-\/>addAction(cmdManager-\/>getAction(MI\_ReplaceLevel));}
\DoxyCodeLine{03837 }
\DoxyCodeLine{03838       replaceLevelMenu-\/>addAction(}
\DoxyCodeLine{03839           cmdManager-\/>getAction(MI\_ReplaceParentDirectory));}
\DoxyCodeLine{03840 }
\DoxyCodeLine{03841       \{}
\DoxyCodeLine{03842         \textcolor{comment}{// replace with another level in scene cast}}
\DoxyCodeLine{03843         std::vector<TXshLevel *> levels;}
\DoxyCodeLine{03844         \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()}
\DoxyCodeLine{03845             -\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()}
\DoxyCodeLine{03846             -\/>getScene()}
\DoxyCodeLine{03847             -\/>\mbox{\hyperlink{class_toonz_scene_ac1a8bf0d2cec4f59c87b0001991264b5}{getLevelSet}}()}
\DoxyCodeLine{03848             -\/>listLevels(levels);}
\DoxyCodeLine{03849         \textcolor{keywordflow}{if} (!levels.empty()) \{}
\DoxyCodeLine{03850           QMenu *replaceMenu = replaceLevelMenu-\/>addMenu(tr(\textcolor{stringliteral}{"{}Replace with"{}}));}
\DoxyCodeLine{03851           connect(replaceMenu, SIGNAL(triggered(QAction *)), \textcolor{keyword}{this},}
\DoxyCodeLine{03852                   SLOT(\mbox{\hyperlink{class_xsheet_g_u_i_1_1_cell_area_a8834bc87ebb88a6662b380587295f785}{onReplaceByCastedLevel}}(QAction *)));}
\DoxyCodeLine{03853           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)levels.size(); i++) \{}
\DoxyCodeLine{03854             \textcolor{keywordflow}{if} (!levels[i]-\/>getSimpleLevel() \&\& !levels[i]-\/>getChildLevel())}
\DoxyCodeLine{03855               \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03856 }
\DoxyCodeLine{03857             \textcolor{keywordflow}{if} (levels[i]-\/>getChildLevel() \&\&}
\DoxyCodeLine{03858                 !\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_a2fbaf0d4ff704a20a333f605609c64a1}{isLevelUsed}}(}
\DoxyCodeLine{03859                     levels[i]))}
\DoxyCodeLine{03860               \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03861 }
\DoxyCodeLine{03862             QString tmpLevelName =}
\DoxyCodeLine{03863                 QString::fromStdWString(levels[i]-\/>getName());}
\DoxyCodeLine{03864             QAction *tmpAction = \textcolor{keyword}{new} QAction(tmpLevelName, replaceMenu);}
\DoxyCodeLine{03865             tmpAction-\/>setData(tmpLevelName);}
\DoxyCodeLine{03866             replaceMenu-\/>addAction(tmpAction);}
\DoxyCodeLine{03867           \}}
\DoxyCodeLine{03868         \}}
\DoxyCodeLine{03869       \}}
\DoxyCodeLine{03870 }
\DoxyCodeLine{03871       \textcolor{keywordflow}{if} (!soundCellsSelected \&\& !soundTextCellsSelected) \{}
\DoxyCodeLine{03872         \textcolor{keywordflow}{if} (selectionContainTlvImage(m\_viewer-\/>getCellSelection(),}
\DoxyCodeLine{03873                                      m\_viewer-\/>getXsheet()))}
\DoxyCodeLine{03874           replaceLevelMenu-\/>addAction(}
\DoxyCodeLine{03875               cmdManager-\/>getAction(MI\_RevertToCleanedUp));}
\DoxyCodeLine{03876         \textcolor{keywordflow}{if} (selectionContainLevelImage(m\_viewer-\/>getCellSelection(),}
\DoxyCodeLine{03877                                        m\_viewer-\/>getXsheet()))}
\DoxyCodeLine{03878           replaceLevelMenu-\/>addAction(}
\DoxyCodeLine{03879               cmdManager-\/>getAction(MI\_RevertToLastSaved));}
\DoxyCodeLine{03880         menu.addAction(cmdManager-\/>getAction(MI\_SetKeyframes));}
\DoxyCodeLine{03881         menu.addAction(cmdManager-\/>getAction(MI\_ShiftKeyframesDown));}
\DoxyCodeLine{03882         menu.addAction(cmdManager-\/>getAction(MI\_ShiftKeyframesUp));}
\DoxyCodeLine{03883       \}}
\DoxyCodeLine{03884       menu.addSeparator();}
\DoxyCodeLine{03885     \}}
\DoxyCodeLine{03886 }
\DoxyCodeLine{03887     menu.addAction(cmdManager-\/>getAction(MI\_Cut));}
\DoxyCodeLine{03888     menu.addAction(cmdManager-\/>getAction(MI\_Copy));}
\DoxyCodeLine{03889     menu.addAction(cmdManager-\/>getAction(MI\_Paste));}
\DoxyCodeLine{03890 }
\DoxyCodeLine{03891     QMenu *pasteSpecialMenu = \textcolor{keyword}{new} QMenu(tr(\textcolor{stringliteral}{"{}Paste Special"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{03892     \{}
\DoxyCodeLine{03893       pasteSpecialMenu-\/>addAction(cmdManager-\/>getAction(MI\_PasteInto));}
\DoxyCodeLine{03894       pasteSpecialMenu-\/>addAction(cmdManager-\/>getAction(MI\_PasteNumbers));}
\DoxyCodeLine{03895       \textcolor{keywordflow}{if} (!soundTextCellsSelected) \{}
\DoxyCodeLine{03896         pasteSpecialMenu-\/>addAction(cmdManager-\/>getAction(MI\_PasteDuplicate));}
\DoxyCodeLine{03897       \}}
\DoxyCodeLine{03898     \}}
\DoxyCodeLine{03899     menu.addMenu(pasteSpecialMenu);}
\DoxyCodeLine{03900 }
\DoxyCodeLine{03901     menu.addAction(cmdManager-\/>getAction(MI\_Clear));}
\DoxyCodeLine{03902     menu.addAction(cmdManager-\/>getAction(MI\_Insert));}
\DoxyCodeLine{03903     \textcolor{keywordflow}{if} (!soundTextCellsSelected) \{}
\DoxyCodeLine{03904       menu.addAction(cmdManager-\/>getAction(MI\_CreateBlankDrawing));}
\DoxyCodeLine{03905       menu.addAction(cmdManager-\/>getAction(MI\_Duplicate));}
\DoxyCodeLine{03906     \}}
\DoxyCodeLine{03907     menu.addSeparator();}
\DoxyCodeLine{03908 }
\DoxyCodeLine{03909     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getSimpleLevel();}
\DoxyCodeLine{03910     \textcolor{keywordflow}{if} (sl || soundCellsSelected)}
\DoxyCodeLine{03911       menu.addAction(cmdManager-\/>getAction(MI\_FileInfo));}
\DoxyCodeLine{03912     \textcolor{keywordflow}{if} (sl \&\& (sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() \& LEVELCOLUMN\_XSHLEVEL))}
\DoxyCodeLine{03913       menu.addAction(cmdManager-\/>getAction(MI\_ViewFile));}
\DoxyCodeLine{03914 }
\DoxyCodeLine{03915     menu.addSeparator();}
\DoxyCodeLine{03916 }
\DoxyCodeLine{03917     \textcolor{keywordflow}{if} (!cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}() \&\& cell.m\_level \&\& cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a6ef7d48e41f4f214b414e959512e6377}{getChildLevel}}()) \{}
\DoxyCodeLine{03918       menu.addAction(cmdManager-\/>getAction(MI\_OpenChild));}
\DoxyCodeLine{03919 }
\DoxyCodeLine{03920       menu.addSeparator();}
\DoxyCodeLine{03921     \}}
\DoxyCodeLine{03922 }
\DoxyCodeLine{03923     \textcolor{keywordflow}{if} (selectionContainRasterImage(m\_viewer-\/>getCellSelection(),}
\DoxyCodeLine{03924                                     m\_viewer-\/>getXsheet())) \{}
\DoxyCodeLine{03925       QMenu *editImageMenu = \textcolor{keyword}{new} QMenu(tr(\textcolor{stringliteral}{"{}Edit Image"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{03926       \{}
\DoxyCodeLine{03927         editImageMenu-\/>addAction(cmdManager-\/>getAction(MI\_AdjustLevels));}
\DoxyCodeLine{03928         editImageMenu-\/>addAction(cmdManager-\/>getAction(MI\_LinesFade));}
\DoxyCodeLine{03929         editImageMenu-\/>addAction(}
\DoxyCodeLine{03930             cmdManager-\/>getAction(MI\_BrightnessAndContrast));}
\DoxyCodeLine{03931         editImageMenu-\/>addAction(cmdManager-\/>getAction(MI\_Antialias));}
\DoxyCodeLine{03932         editImageMenu-\/>addAction(cmdManager-\/>getAction(MI\_CanvasSize));}
\DoxyCodeLine{03933       \}}
\DoxyCodeLine{03934       menu.addMenu(editImageMenu);}
\DoxyCodeLine{03935 }
\DoxyCodeLine{03936     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (selectionContainTlvImage(m\_viewer-\/>getCellSelection(),}
\DoxyCodeLine{03937                                         m\_viewer-\/>getXsheet()))}
\DoxyCodeLine{03938       menu.addAction(cmdManager-\/>getAction(MI\_CanvasSize));}
\DoxyCodeLine{03939 }
\DoxyCodeLine{03940     QMenu *lipSyncMenu = \textcolor{keyword}{new} QMenu(tr(\textcolor{stringliteral}{"{}Lip Sync"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{03941     \{}
\DoxyCodeLine{03942       \textcolor{keywordflow}{if} (sl ||}
\DoxyCodeLine{03943           (\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentLevel()-\/>getLevel() \&\&}
\DoxyCodeLine{03944            \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentLevel()-\/>getLevel()-\/>getChildLevel()))}
\DoxyCodeLine{03945         lipSyncMenu-\/>addAction(cmdManager-\/>getAction(MI\_LipSyncPopup));}
\DoxyCodeLine{03946       \textcolor{keywordflow}{if} (!soundCellsSelected)}
\DoxyCodeLine{03947         lipSyncMenu-\/>addAction(cmdManager-\/>getAction(MI\_ImportMagpieFile));}
\DoxyCodeLine{03948     \}}
\DoxyCodeLine{03949     \textcolor{keywordflow}{if} (lipSyncMenu-\/>actions().isEmpty())}
\DoxyCodeLine{03950       \textcolor{keyword}{delete} lipSyncMenu;}
\DoxyCodeLine{03951     \textcolor{keywordflow}{else}}
\DoxyCodeLine{03952       menu.addMenu(lipSyncMenu);}
\DoxyCodeLine{03953 }
\DoxyCodeLine{03954   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{03955     menu.addAction(cmdManager-\/>getAction(MI\_CreateBlankDrawing));}
\DoxyCodeLine{03956     menu.addSeparator();}
\DoxyCodeLine{03957     menu.addAction(cmdManager-\/>getAction(MI\_FillEmptyCell));}
\DoxyCodeLine{03958     \textcolor{keywordflow}{if} (cameraCellsSelected) \{}
\DoxyCodeLine{03959       menu.addSeparator();}
\DoxyCodeLine{03960       menu.addAction(cmdManager-\/>getAction(MI\_SetKeyframes));}
\DoxyCodeLine{03961       menu.addAction(cmdManager-\/>getAction(MI\_ShiftKeyframesDown));}
\DoxyCodeLine{03962       menu.addAction(cmdManager-\/>getAction(MI\_ShiftKeyframesUp));}
\DoxyCodeLine{03963     \}}
\DoxyCodeLine{03964   \}}
\DoxyCodeLine{03965 }
\DoxyCodeLine{03966   \textcolor{comment}{// cell mark menu}}
\DoxyCodeLine{03967   \mbox{\hyperlink{class_t_xsh_cell_column}{TXshCellColumn}} *cellColumn =}
\DoxyCodeLine{03968       (m\_viewer-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(col))}
\DoxyCodeLine{03969           ? m\_viewer-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(col)-\/>getCellColumn()}
\DoxyCodeLine{03970           : \textcolor{keyword}{nullptr};}
\DoxyCodeLine{03971   \textcolor{keywordflow}{if} (cellColumn) \{}
\DoxyCodeLine{03972     QMenu *marksMenu    = \textcolor{keyword}{new} QMenu(tr(\textcolor{stringliteral}{"{}Cell Mark"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{03973     \textcolor{keywordtype}{int} markId          = cellColumn-\/>getCellMark(row);}
\DoxyCodeLine{03974     QAction *markAction = marksMenu-\/>addAction(tr(\textcolor{stringliteral}{"{}None"{}}));}
\DoxyCodeLine{03975     markAction-\/>setCheckable(\textcolor{keyword}{true});}
\DoxyCodeLine{03976     markAction-\/>setChecked(markId == -\/1);}
\DoxyCodeLine{03977     markAction-\/>setEnabled(markId != -\/1);}
\DoxyCodeLine{03978     markAction-\/>setData(QList<QVariant>\{row, col, -\/1\});}
\DoxyCodeLine{03979     connect(markAction, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(onSetCellMark()));}
\DoxyCodeLine{03980     QList<TSceneProperties::CellMark> marks = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()}
\DoxyCodeLine{03981                                                   -\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()}
\DoxyCodeLine{03982                                                   -\/>getScene()}
\DoxyCodeLine{03983                                                   -\/>\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}()}
\DoxyCodeLine{03984                                                   -\/>getCellMarks();}
\DoxyCodeLine{03985     \textcolor{keywordtype}{int} curId = 0;}
\DoxyCodeLine{03986     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} mark : marks) \{}
\DoxyCodeLine{03987       QString label = QString(\textcolor{stringliteral}{"{}\%1: \%2"{}}).arg(curId).arg(mark.name);}
\DoxyCodeLine{03988       markAction    = marksMenu-\/>addAction(getColorChipIcon(mark.color), label);}
\DoxyCodeLine{03989       markAction-\/>setCheckable(\textcolor{keyword}{true});}
\DoxyCodeLine{03990       markAction-\/>setChecked(markId == curId);}
\DoxyCodeLine{03991       markAction-\/>setEnabled(markId != curId);}
\DoxyCodeLine{03992       markAction-\/>setData(QList<QVariant>\{row, col, curId\});}
\DoxyCodeLine{03993       connect(markAction, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(onSetCellMark()));}
\DoxyCodeLine{03994       curId++;}
\DoxyCodeLine{03995     \}}
\DoxyCodeLine{03996 }
\DoxyCodeLine{03997     menu.addMenu(marksMenu);}
\DoxyCodeLine{03998   \}}
\DoxyCodeLine{03999 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a32990a254fbeec3d3a8f0f826adacce9}\label{class_xsheet_g_u_i_1_1_cell_area_a32990a254fbeec3d3a8f0f826adacce9}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!createKeyLineMenu@{createKeyLineMenu}}
\index{createKeyLineMenu@{createKeyLineMenu}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{createKeyLineMenu()}{createKeyLineMenu()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::create\+Key\+Line\+Menu (\begin{DoxyParamCaption}\item[{QMenu \&}]{menu,  }\item[{int}]{row,  }\item[{int}]{col }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Crea il menu\textquotesingle{} del tasto destro che si visualizza quando si clicca sulla linea tre due key frame. 
\begin{DoxyCode}{0}
\DoxyCodeLine{04073                                                               \{}
\DoxyCodeLine{04074   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *pegbar =}
\DoxyCodeLine{04075       m\_viewer-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(m\_viewer-\/>\mbox{\hyperlink{class_xsheet_viewer_acef259f8c33344981f8c218590bca5d9}{getObjectId}}(col));}
\DoxyCodeLine{04076   \mbox{\hyperlink{class_command_manager}{CommandManager}} *cmdManager = CommandManager::instance();}
\DoxyCodeLine{04077   \textcolor{keywordtype}{int} r0, r1, rh0, rh1;}
\DoxyCodeLine{04078   \textcolor{keywordtype}{double} e0, e1;}
\DoxyCodeLine{04079   \textcolor{keywordflow}{if} (pegbar-\/>getKeyframeSpan(row, r0, e0, r1, e1) \&\&}
\DoxyCodeLine{04080       getEaseHandles(r0, r1, e0, e1, rh0, rh1)) \{}
\DoxyCodeLine{04081     menu.addAction(cmdManager-\/>getAction(MI\_SetAcceleration));}
\DoxyCodeLine{04082     menu.addAction(cmdManager-\/>getAction(MI\_SetDeceleration));}
\DoxyCodeLine{04083     menu.addAction(cmdManager-\/>getAction(MI\_SetConstantSpeed));}
\DoxyCodeLine{04084     menu.addSeparator();}
\DoxyCodeLine{04085   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{04086     \textcolor{comment}{// Se le due chiavi non sono linear aggiungo il comando ResetInterpolation}}
\DoxyCodeLine{04087     \textcolor{keywordtype}{bool} isR0FullK = pegbar-\/>\mbox{\hyperlink{class_t_stage_object_acb0e456655902de4a39774f0f53a1940}{isFullKeyframe}}(r0);}
\DoxyCodeLine{04088     \textcolor{keywordtype}{bool} isR1FullK = pegbar-\/>\mbox{\hyperlink{class_t_stage_object_acb0e456655902de4a39774f0f53a1940}{isFullKeyframe}}(r1);}
\DoxyCodeLine{04089     TDoubleKeyframe::Type r0Type =}
\DoxyCodeLine{04090         pegbar-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a23087217a2f7436152fa0ee4b2362448}{TStageObject::T\_X}})-\/>getKeyframeAt(r0).m\_type;}
\DoxyCodeLine{04091     TDoubleKeyframe::Type r1Type =}
\DoxyCodeLine{04092         pegbar-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a23087217a2f7436152fa0ee4b2362448}{TStageObject::T\_X}})-\/>getKeyframeAt(r1).m\_prevType;}
\DoxyCodeLine{04093     \textcolor{keywordflow}{if} (isGlobalKeyFrameWithSameTypeDiffFromLinear(pegbar, r0) \&\&}
\DoxyCodeLine{04094         isGlobalKeyFrameWithSamePrevTypeDiffFromLinear(pegbar, r1)) \{}
\DoxyCodeLine{04095       menu.addAction(cmdManager-\/>getAction(MI\_ResetInterpolation));}
\DoxyCodeLine{04096       menu.addSeparator();}
\DoxyCodeLine{04097     \}}
\DoxyCodeLine{04098   \}}
\DoxyCodeLine{04099 }
\DoxyCodeLine{04100   TDoubleKeyframe::Type rType =}
\DoxyCodeLine{04101       pegbar-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a23087217a2f7436152fa0ee4b2362448}{TStageObject::T\_X}})-\/>getKeyframeAt(r0).m\_type;}
\DoxyCodeLine{04102 }
\DoxyCodeLine{04103   \textcolor{keywordflow}{if} (rType != TDoubleKeyframe::Constant)}
\DoxyCodeLine{04104     menu.addAction(cmdManager-\/>getAction(MI\_UseConstantInterpolation));}
\DoxyCodeLine{04105   \textcolor{keywordflow}{if} (rType != TDoubleKeyframe::Linear)}
\DoxyCodeLine{04106     menu.addAction(cmdManager-\/>getAction(MI\_UseLinearInterpolation));}
\DoxyCodeLine{04107   \textcolor{keywordflow}{if} (rType != TDoubleKeyframe::SpeedInOut)}
\DoxyCodeLine{04108     menu.addAction(cmdManager-\/>getAction(MI\_UseSpeedInOutInterpolation));}
\DoxyCodeLine{04109   \textcolor{keywordflow}{if} (rType != TDoubleKeyframe::EaseInOut)}
\DoxyCodeLine{04110     menu.addAction(cmdManager-\/>getAction(MI\_UseEaseInOutInterpolation));}
\DoxyCodeLine{04111   \textcolor{keywordflow}{if} (rType != TDoubleKeyframe::EaseInOutPercentage)}
\DoxyCodeLine{04112     menu.addAction(cmdManager-\/>getAction(MI\_UseEaseInOutPctInterpolation));}
\DoxyCodeLine{04113   \textcolor{keywordflow}{if} (rType != TDoubleKeyframe::Exponential)}
\DoxyCodeLine{04114     menu.addAction(cmdManager-\/>getAction(MI\_UseExponentialInterpolation));}
\DoxyCodeLine{04115 }
\DoxyCodeLine{04116   \textcolor{keywordflow}{if} (col < 0) \{}
\DoxyCodeLine{04117     menu.addSeparator();}
\DoxyCodeLine{04118     menu.addAction(cmdManager-\/>getAction(MI\_SetKeyframes));}
\DoxyCodeLine{04119     menu.addAction(cmdManager-\/>getAction(MI\_ShiftKeyframesDown));}
\DoxyCodeLine{04120     menu.addAction(cmdManager-\/>getAction(MI\_ShiftKeyframesUp));}
\DoxyCodeLine{04121   \}}
\DoxyCodeLine{04122 }
\DoxyCodeLine{04123   menu.addSeparator();}
\DoxyCodeLine{04124   \textcolor{comment}{// int paramStep             = getParamStep(pegbar, r0);}}
\DoxyCodeLine{04125   QActionGroup *actionGroup = \textcolor{keyword}{new} QActionGroup(\textcolor{keyword}{this});}
\DoxyCodeLine{04126   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{04127   \textcolor{keywordflow}{for} (i = 1; i <= 4; i++) \{}
\DoxyCodeLine{04128     QAction *act = \textcolor{keyword}{new} QAction(}
\DoxyCodeLine{04129         QString(\textcolor{stringliteral}{"{}Interpolation on "{}}) + QString::number(i) + \textcolor{stringliteral}{"{}'s"{}}, \textcolor{keyword}{this});}
\DoxyCodeLine{04130     \textcolor{comment}{// if (paramStep == i) act-\/>setEnabled(false);}}
\DoxyCodeLine{04131     QList<QVariant> list;}
\DoxyCodeLine{04132     list.append(QVariant(i));}
\DoxyCodeLine{04133     list.append(QVariant(r0));}
\DoxyCodeLine{04134     list.append(QVariant(col));}
\DoxyCodeLine{04135     act-\/>setData(QVariant(list));}
\DoxyCodeLine{04136     actionGroup-\/>addAction(act);}
\DoxyCodeLine{04137     menu.addAction(act);}
\DoxyCodeLine{04138   \}}
\DoxyCodeLine{04139   connect(actionGroup, SIGNAL(triggered(QAction *)), \textcolor{keyword}{this},}
\DoxyCodeLine{04140           SLOT(onStepChanged(QAction *)));}
\DoxyCodeLine{04141 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a4f983304012306e204a4aba11514bfd5}\label{class_xsheet_g_u_i_1_1_cell_area_a4f983304012306e204a4aba11514bfd5}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!createKeyMenu@{createKeyMenu}}
\index{createKeyMenu@{createKeyMenu}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{createKeyMenu()}{createKeyMenu()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::create\+Key\+Menu (\begin{DoxyParamCaption}\item[{QMenu \&}]{menu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Crea il menu\textquotesingle{} del tasto destro che si visualizza si clicca su un key frame. 
\begin{DoxyCode}{0}
\DoxyCodeLine{04047                                         \{}
\DoxyCodeLine{04048   \mbox{\hyperlink{class_command_manager}{CommandManager}} *cmdManager = CommandManager::instance();}
\DoxyCodeLine{04049   menu.addAction(cmdManager-\/>getAction(MI\_SelectRowKeyframes));}
\DoxyCodeLine{04050   menu.addAction(cmdManager-\/>getAction(MI\_SelectColumnKeyframes));}
\DoxyCodeLine{04051   menu.addAction(cmdManager-\/>getAction(MI\_SelectAllKeyframes));}
\DoxyCodeLine{04052   menu.addAction(cmdManager-\/>getAction(MI\_SelectAllKeyframesNotBefore));}
\DoxyCodeLine{04053   menu.addAction(cmdManager-\/>getAction(MI\_SelectAllKeyframesNotAfter));}
\DoxyCodeLine{04054   menu.addAction(cmdManager-\/>getAction(MI\_SelectPreviousKeysInColumn));}
\DoxyCodeLine{04055   menu.addAction(cmdManager-\/>getAction(MI\_SelectFollowingKeysInColumn));}
\DoxyCodeLine{04056   menu.addAction(cmdManager-\/>getAction(MI\_SelectPreviousKeysInRow));}
\DoxyCodeLine{04057   menu.addAction(cmdManager-\/>getAction(MI\_SelectFollowingKeysInRow));}
\DoxyCodeLine{04058   menu.addAction(cmdManager-\/>getAction(MI\_InvertKeyframeSelection));}
\DoxyCodeLine{04059   menu.addSeparator();}
\DoxyCodeLine{04060   menu.addAction(cmdManager-\/>getAction(MI\_Cut));}
\DoxyCodeLine{04061   menu.addAction(cmdManager-\/>getAction(MI\_Copy));}
\DoxyCodeLine{04062   menu.addAction(cmdManager-\/>getAction(MI\_Paste));}
\DoxyCodeLine{04063   menu.addAction(cmdManager-\/>getAction(MI\_Clear));}
\DoxyCodeLine{04064   menu.addSeparator();}
\DoxyCodeLine{04065   menu.addAction(cmdManager-\/>getAction(MI\_ShiftKeyframesDown));}
\DoxyCodeLine{04066   menu.addAction(cmdManager-\/>getAction(MI\_ShiftKeyframesUp));}
\DoxyCodeLine{04067   menu.addSeparator();}
\DoxyCodeLine{04068   menu.addAction(cmdManager-\/>getAction(MI\_OpenFunctionEditor));}
\DoxyCodeLine{04069 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a4db067a47b699d3b285eed81d4d1dd15}\label{class_xsheet_g_u_i_1_1_cell_area_a4db067a47b699d3b285eed81d4d1dd15}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!createNoteMenu@{createNoteMenu}}
\index{createNoteMenu@{createNoteMenu}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{createNoteMenu()}{createNoteMenu()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::create\+Note\+Menu (\begin{DoxyParamCaption}\item[{QMenu \&}]{menu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Crea il menu\textquotesingle{} del tasto destro che si visualizza quando si sopra una nota. 


\begin{DoxyCode}{0}
\DoxyCodeLine{04145                                          \{}
\DoxyCodeLine{04146   QAction *openAct   = menu.addAction(tr(\textcolor{stringliteral}{"{}Open Memo"{}}));}
\DoxyCodeLine{04147   QAction *deleteAct = menu.addAction(tr(\textcolor{stringliteral}{"{}Delete Memo"{}}));}
\DoxyCodeLine{04148   \textcolor{keywordtype}{bool} ret = connect(openAct, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(openNote()));}
\DoxyCodeLine{04149   ret =}
\DoxyCodeLine{04150       ret \&\& connect(deleteAct, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(deleteNote()));}
\DoxyCodeLine{04151 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a5b573be58a3e38d1dd1418d22f2f6046}\label{class_xsheet_g_u_i_1_1_cell_area_a5b573be58a3e38d1dd1418d22f2f6046}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!deleteNote@{deleteNote}}
\index{deleteNote@{deleteNote}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{deleteNote}{deleteNote}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::delete\+Note (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{04163                           \{}
\DoxyCodeLine{04164   \mbox{\hyperlink{class_t_xsh_note_set}{TXshNoteSet}} *notes = m\_viewer-\/>getXsheet()-\/>getNotes();}
\DoxyCodeLine{04165   \textcolor{keywordtype}{int} currentIndex   = m\_viewer-\/>getCurrentNoteIndex();}
\DoxyCodeLine{04166   notes-\/>removeNote(currentIndex);}
\DoxyCodeLine{04167   m\_viewer-\/>\mbox{\hyperlink{class_xsheet_viewer_a5b26ae9f867205f5ff7b8fe98f0e0d49}{discardNoteWidget}}();}
\DoxyCodeLine{04168 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a2c382fbf8b9f30b6163c4abdb20284a6}\label{class_xsheet_g_u_i_1_1_cell_area_a2c382fbf8b9f30b6163c4abdb20284a6}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!dragEnterEvent@{dragEnterEvent}}
\index{dragEnterEvent@{dragEnterEvent}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{dragEnterEvent()}{dragEnterEvent()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::drag\+Enter\+Event (\begin{DoxyParamCaption}\item[{QDrag\+Enter\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{03669                                                 \{}
\DoxyCodeLine{03670   \textcolor{keywordtype}{bool} isResourceOrFolderDrop =}
\DoxyCodeLine{03671       acceptResourceOrFolderDrop(e-\/>mimeData()-\/>urls());}
\DoxyCodeLine{03672   \textcolor{keywordflow}{if} (isResourceOrFolderDrop ||}
\DoxyCodeLine{03673       e-\/>mimeData()-\/>hasFormat(CastItems::getMimeFormat()) ||}
\DoxyCodeLine{03674       e-\/>mimeData()-\/>hasFormat(\textcolor{stringliteral}{"{}application/vnd.toonz.drawings"{}})) \{}
\DoxyCodeLine{03675     setDragTool(XsheetGUI::DragTool::makeDragAndDropDataTool(m\_viewer));}
\DoxyCodeLine{03676     \textcolor{comment}{// For file dragging force CopyAction}}
\DoxyCodeLine{03677     \textcolor{keywordflow}{if} (isResourceOrFolderDrop) e-\/>setDropAction(Qt::CopyAction);}
\DoxyCodeLine{03678     m\_viewer-\/>dragToolClick(e);}
\DoxyCodeLine{03679     \textcolor{comment}{// For files, don't accept original proposed action in case it's a move}}
\DoxyCodeLine{03680     isResourceOrFolderDrop ? e-\/>accept() : e-\/>acceptProposedAction();}
\DoxyCodeLine{03681   \}}
\DoxyCodeLine{03682 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a199b99c41f49c666c03c2c2a8e38a07a}\label{class_xsheet_g_u_i_1_1_cell_area_a199b99c41f49c666c03c2c2a8e38a07a}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!dragLeaveEvent@{dragLeaveEvent}}
\index{dragLeaveEvent@{dragLeaveEvent}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{dragLeaveEvent()}{dragLeaveEvent()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::drag\+Leave\+Event (\begin{DoxyParamCaption}\item[{QDrag\+Leave\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{03686                                                 \{}
\DoxyCodeLine{03687   \textcolor{keywordflow}{if} (!getDragTool()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03688   m\_viewer-\/>dragToolLeave(e);}
\DoxyCodeLine{03689 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_abd78e6d1f1050115fa21ba98160b672d}\label{class_xsheet_g_u_i_1_1_cell_area_abd78e6d1f1050115fa21ba98160b672d}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!dragMoveEvent@{dragMoveEvent}}
\index{dragMoveEvent@{dragMoveEvent}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{dragMoveEvent()}{dragMoveEvent()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::drag\+Move\+Event (\begin{DoxyParamCaption}\item[{QDrag\+Move\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{03693                                               \{}
\DoxyCodeLine{03694   \textcolor{keywordflow}{if} (!getDragTool()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03695   \textcolor{keywordtype}{bool} isResourceOrFolderDrop =}
\DoxyCodeLine{03696       acceptResourceOrFolderDrop(e-\/>mimeData()-\/>urls());}
\DoxyCodeLine{03697   \textcolor{comment}{// For file dragging force CopyAction}}
\DoxyCodeLine{03698   \textcolor{keywordflow}{if} (isResourceOrFolderDrop) e-\/>setDropAction(Qt::CopyAction);}
\DoxyCodeLine{03699   m\_viewer-\/>dragToolDrag(e);}
\DoxyCodeLine{03700   \textcolor{comment}{// For files, don't accept original proposed action in case it's a move}}
\DoxyCodeLine{03701   isResourceOrFolderDrop ? e-\/>accept() : e-\/>acceptProposedAction();}
\DoxyCodeLine{03702 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a3701a194f3309e7b632d5263d6e6cc5b}\label{class_xsheet_g_u_i_1_1_cell_area_a3701a194f3309e7b632d5263d6e6cc5b}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!dropEvent@{dropEvent}}
\index{dropEvent@{dropEvent}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{dropEvent()}{dropEvent()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::drop\+Event (\begin{DoxyParamCaption}\item[{QDrop\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{03706                                       \{}
\DoxyCodeLine{03707   \textcolor{keywordflow}{if} (!getDragTool()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03708   m\_viewer-\/>dragToolRelease(e);}
\DoxyCodeLine{03709   \textcolor{keywordflow}{if} (e-\/>source() == \textcolor{keyword}{this}) \{}
\DoxyCodeLine{03710     e-\/>setDropAction(Qt::MoveAction);}
\DoxyCodeLine{03711     e-\/>accept();}
\DoxyCodeLine{03712   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (acceptResourceOrFolderDrop(e-\/>mimeData()-\/>urls())) \{}
\DoxyCodeLine{03713     \textcolor{comment}{// For file dragging force CopyAction}}
\DoxyCodeLine{03714     e-\/>setDropAction(Qt::CopyAction);}
\DoxyCodeLine{03715     \textcolor{comment}{// For files, don't accept original proposed action in case it's a move}}
\DoxyCodeLine{03716     e-\/>accept();}
\DoxyCodeLine{03717   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{03718     e-\/>acceptProposedAction();}
\DoxyCodeLine{03719 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_ae40f89d46182a628b14e956c13357887}\label{class_xsheet_g_u_i_1_1_cell_area_ae40f89d46182a628b14e956c13357887}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!event@{event}}
\index{event@{event}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{event()}{event()}}
{\footnotesize\ttfamily bool Xsheet\+GUI\+::\+Cell\+Area\+::event (\begin{DoxyParamCaption}\item[{QEvent $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{03723                                   \{}
\DoxyCodeLine{03724   QEvent::Type type = \textcolor{keyword}{event}-\/>type();}
\DoxyCodeLine{03725   \textcolor{keywordflow}{if} (type == QEvent::ToolTip) \{}
\DoxyCodeLine{03726     \textcolor{keywordflow}{if} (!m\_tooltip.isEmpty())}
\DoxyCodeLine{03727       QToolTip::showText(mapToGlobal(m\_pos), m\_tooltip);}
\DoxyCodeLine{03728     \textcolor{keywordflow}{else}}
\DoxyCodeLine{03729       QToolTip::hideText();}
\DoxyCodeLine{03730   \}}
\DoxyCodeLine{03731   \textcolor{keywordflow}{if} (type == QEvent::WindowDeactivate \&\& m\_isMousePressed) \{}
\DoxyCodeLine{03732     QMouseEvent e(QEvent::MouseButtonRelease, m\_pos, Qt::LeftButton,}
\DoxyCodeLine{03733                   Qt::NoButton, Qt::NoModifier);}
\DoxyCodeLine{03734     mouseReleaseEvent(\&e);}
\DoxyCodeLine{03735   \}}
\DoxyCodeLine{03736   \textcolor{keywordflow}{return} QWidget::event(event);}
\DoxyCodeLine{03737 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a2f68217b6b4aa82a3a316b30dfda8247}\label{class_xsheet_g_u_i_1_1_cell_area_a2f68217b6b4aa82a3a316b30dfda8247}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!hideRenameField@{hideRenameField}}
\index{hideRenameField@{hideRenameField}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{hideRenameField()}{hideRenameField()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::hide\+Rename\+Field (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00155 \{ m\_renameCell-\/>hide(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a0d5a29e2eb78b3411537780b5f113e23}\label{class_xsheet_g_u_i_1_1_cell_area_a0d5a29e2eb78b3411537780b5f113e23}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!isControlPressed@{isControlPressed}}
\index{isControlPressed@{isControlPressed}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{isControlPressed()}{isControlPressed()}}
{\footnotesize\ttfamily const bool Xsheet\+GUI\+::\+Cell\+Area\+::is\+Control\+Pressed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{03747 \{ \textcolor{keywordflow}{return} isCtrlPressed; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a90ddb8058286d19ca83ee0c05b67b06b}\label{class_xsheet_g_u_i_1_1_cell_area_a90ddb8058286d19ca83ee0c05b67b06b}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!mouseDoubleClickEvent@{mouseDoubleClickEvent}}
\index{mouseDoubleClickEvent@{mouseDoubleClickEvent}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{mouseDoubleClickEvent()}{mouseDoubleClickEvent()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::mouse\+Double\+Click\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{03532                                                        \{}
\DoxyCodeLine{03533   \textcolor{keyword}{const} \mbox{\hyperlink{class_orientation}{Orientation}} *o = m\_viewer-\/>orientation();}
\DoxyCodeLine{03534   \mbox{\hyperlink{class_t_point_t}{TPoint}} pos(event-\/>pos().x(), event-\/>pos().y());}
\DoxyCodeLine{03535   \mbox{\hyperlink{class_cell_position}{CellPosition}} cellPosition = m\_viewer-\/>xyToPosition(event-\/>pos());}
\DoxyCodeLine{03536   \textcolor{keywordtype}{int} row                   = cellPosition.frame();}
\DoxyCodeLine{03537   \textcolor{keywordtype}{int} col                   = cellPosition.layer();}
\DoxyCodeLine{03538   \textcolor{comment}{// Se la colonna e' sound non devo fare nulla}}
\DoxyCodeLine{03539   \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = m\_viewer-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(col);}
\DoxyCodeLine{03540   \textcolor{keywordflow}{if} (column \&\& column-\/>getSoundColumn()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03541 }
\DoxyCodeLine{03542   \textcolor{comment}{// Se ho cliccato su una nota devo aprire il popup}}
\DoxyCodeLine{03543   \mbox{\hyperlink{class_t_xsh_note_set}{TXshNoteSet}} *notes = m\_viewer-\/>getXsheet()-\/>getNotes();}
\DoxyCodeLine{03544   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{03545   \textcolor{keywordflow}{for} (i = notes-\/>getCount() -\/ 1; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{03546     \textcolor{keywordtype}{int} r       = notes-\/>getNoteRow(i);}
\DoxyCodeLine{03547     \textcolor{keywordtype}{int} c       = notes-\/>getNoteCol(i);}
\DoxyCodeLine{03548     QPoint xy   = m\_viewer-\/>positionToXY(\mbox{\hyperlink{class_cell_position}{CellPosition}}(r, c));}
\DoxyCodeLine{03549     \mbox{\hyperlink{class_t_point_t}{TPointD}} pos = notes-\/>getNotePos(i) + \mbox{\hyperlink{class_t_point_t}{TPointD}}(xy.x(), xy.y());}
\DoxyCodeLine{03550     QRect rect  = o-\/>rect(PredefinedRect::NOTE\_ICON).translated(pos.x, pos.y);}
\DoxyCodeLine{03551     \textcolor{keywordflow}{if} (!rect.contains(event-\/>pos())) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03552     m\_viewer-\/>setCurrentNoteIndex(i);}
\DoxyCodeLine{03553     m\_viewer-\/>getNotesWidget().at(i)-\/>openNotePopup();}
\DoxyCodeLine{03554     \textcolor{keywordflow}{return};}
\DoxyCodeLine{03555   \}}
\DoxyCodeLine{03556 }
\DoxyCodeLine{03557   \mbox{\hyperlink{class_t_object_handle}{TObjectHandle}} *oh = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a0d91c122eec2b756b7c4780014e49f9e}{getCurrentObject}}();}
\DoxyCodeLine{03558   oh-\/>setObjectId(m\_viewer-\/>\mbox{\hyperlink{class_xsheet_viewer_acef259f8c33344981f8c218590bca5d9}{getObjectId}}(col));}
\DoxyCodeLine{03559 }
\DoxyCodeLine{03560   \textcolor{keywordflow}{if} (col == -\/1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03561 }
\DoxyCodeLine{03562   \textcolor{comment}{// in modalita' xsheet as animation sheet non deve essere possibile creare}}
\DoxyCodeLine{03563   \textcolor{comment}{// livelli con doppio click: se la cella e' vuota non bisogna fare nulla}}
\DoxyCodeLine{03564   \textcolor{keywordflow}{if} ((Preferences::instance()-\/>isAnimationSheetEnabled() \&\&}
\DoxyCodeLine{03565        m\_viewer-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col).\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}())) \{}
\DoxyCodeLine{03566     \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = m\_viewer-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(col);}
\DoxyCodeLine{03567     \textcolor{keywordflow}{if} (!column ||}
\DoxyCodeLine{03568         column-\/>getColumnType() != TXshColumn::ColumnType::eSoundTextType)}
\DoxyCodeLine{03569       \textcolor{keywordflow}{return};}
\DoxyCodeLine{03570   \}}
\DoxyCodeLine{03571 }
\DoxyCodeLine{03572   \textcolor{keywordtype}{int} colCount = m\_viewer-\/>getCellSelection()-\/>getSelectedCells().getColCount();}
\DoxyCodeLine{03573 }
\DoxyCodeLine{03574   m\_renameCell-\/>showInRowCol(row, col, colCount > 1);}
\DoxyCodeLine{03575 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a908ae0a77b45e3907291d2be953148c7}\label{class_xsheet_g_u_i_1_1_cell_area_a908ae0a77b45e3907291d2be953148c7}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!mouseMoveEvent@{mouseMoveEvent}}
\index{mouseMoveEvent@{mouseMoveEvent}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{mouseMoveEvent()}{mouseMoveEvent()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::mouse\+Move\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{03391                                                 \{}
\DoxyCodeLine{03392   \textcolor{keyword}{const} \mbox{\hyperlink{class_orientation}{Orientation}} *o = m\_viewer-\/>orientation();}
\DoxyCodeLine{03393   QPoint frameAdj      = m\_viewer-\/>getFrameZoomAdjustment();}
\DoxyCodeLine{03394 }
\DoxyCodeLine{03395   m\_viewer-\/>setQtModifiers(event-\/>modifiers());}
\DoxyCodeLine{03396   setCursor(Qt::ArrowCursor);}
\DoxyCodeLine{03397   QPoint pos        = \textcolor{keyword}{event}-\/>pos();}
\DoxyCodeLine{03398   QRect visibleRect = visibleRegion().boundingRect();}
\DoxyCodeLine{03399   \textcolor{keywordflow}{if} (m\_isPanning) \{}
\DoxyCodeLine{03400     \textcolor{comment}{// Pan tasto centrale}}
\DoxyCodeLine{03401     m\_viewer-\/>scroll(m\_pos -\/ pos);}
\DoxyCodeLine{03402     \textcolor{keywordflow}{return};}
\DoxyCodeLine{03403   \}}
\DoxyCodeLine{03404   \textcolor{keywordflow}{if} ((event-\/>buttons() \& Qt::LeftButton) != 0 \&\&}
\DoxyCodeLine{03405       !visibleRegion().contains(pos)) \{}
\DoxyCodeLine{03406     QRect bounds = visibleRegion().boundingRect();}
\DoxyCodeLine{03407     m\_viewer-\/>setAutoPanSpeed(bounds, pos);}
\DoxyCodeLine{03408   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{03409     m\_viewer-\/>stopAutoPan();}
\DoxyCodeLine{03410 }
\DoxyCodeLine{03411   m\_pos = pos;}
\DoxyCodeLine{03412   \textcolor{keywordflow}{if} (getDragTool()) \{}
\DoxyCodeLine{03413     getDragTool()-\/>onDrag(event);}
\DoxyCodeLine{03414     \textcolor{keywordflow}{return};}
\DoxyCodeLine{03415   \}}
\DoxyCodeLine{03416 }
\DoxyCodeLine{03417   \mbox{\hyperlink{class_cell_position}{CellPosition}} cellPosition = m\_viewer-\/>xyToPosition(pos);}
\DoxyCodeLine{03418   \textcolor{keywordtype}{int} row                   = cellPosition.frame();}
\DoxyCodeLine{03419   \textcolor{keywordtype}{int} col                   = cellPosition.layer();}
\DoxyCodeLine{03420   QPoint cellTopLeft        = m\_viewer-\/>positionToXY(\mbox{\hyperlink{class_cell_position}{CellPosition}}(row, col));}
\DoxyCodeLine{03421   \textcolor{keywordtype}{int} x                     = m\_pos.x() -\/ cellTopLeft.x();}
\DoxyCodeLine{03422   \textcolor{keywordtype}{int} y                     = m\_pos.y() -\/ cellTopLeft.y();}
\DoxyCodeLine{03423   QPoint mouseInCell        = m\_pos -\/ cellTopLeft;}
\DoxyCodeLine{03424 }
\DoxyCodeLine{03425   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = m\_viewer-\/>getXsheet();}
\DoxyCodeLine{03426 }
\DoxyCodeLine{03427   \textcolor{comment}{// Verifico se e' una colonna sound}}
\DoxyCodeLine{03428   \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column     = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(col);}
\DoxyCodeLine{03429   \textcolor{keywordtype}{bool} isSoundColumn     = \textcolor{keyword}{false};}
\DoxyCodeLine{03430   \textcolor{keywordtype}{bool} isZeraryColumn    = \textcolor{keyword}{false};}
\DoxyCodeLine{03431   \textcolor{keywordtype}{bool} isSoundTextColumn = \textcolor{keyword}{false};}
\DoxyCodeLine{03432   \textcolor{keywordflow}{if} (column) \{}
\DoxyCodeLine{03433     \mbox{\hyperlink{class_t_xsh_sound_column}{TXshSoundColumn}} *soundColumn         = column-\/>getSoundColumn();}
\DoxyCodeLine{03434     isSoundColumn                        = (!soundColumn) ? \textcolor{keyword}{false} : \textcolor{keyword}{true};}
\DoxyCodeLine{03435     \mbox{\hyperlink{class_t_xsh_zerary_fx_column}{TXshZeraryFxColumn}} *zeraryColumn     = column-\/>getZeraryFxColumn();}
\DoxyCodeLine{03436     isZeraryColumn                       = (!zeraryColumn) ? \textcolor{keyword}{false} : \textcolor{keyword}{true};}
\DoxyCodeLine{03437     \mbox{\hyperlink{class_t_xsh_sound_text_column}{TXshSoundTextColumn}} *soundTextColumn = column-\/>getSoundTextColumn();}
\DoxyCodeLine{03438     isSoundTextColumn                    = (!soundTextColumn) ? \textcolor{keyword}{false} : \textcolor{keyword}{true};}
\DoxyCodeLine{03439   \}}
\DoxyCodeLine{03440 }
\DoxyCodeLine{03441   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *pegbar = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(m\_viewer-\/>\mbox{\hyperlink{class_xsheet_viewer_acef259f8c33344981f8c218590bca5d9}{getObjectId}}(col));}
\DoxyCodeLine{03442   \textcolor{keywordtype}{int} k0, k1;}
\DoxyCodeLine{03443   \textcolor{keywordtype}{bool} isKeyframeFrame =}
\DoxyCodeLine{03444       Preferences::instance()-\/>isShowKeyframesOnXsheetCellAreaEnabled() \&\&}
\DoxyCodeLine{03445       pegbar \&\& pegbar-\/>getKeyframeRange(k0, k1) \&\& k0 <= row \&\& row <= k1 + 1;}
\DoxyCodeLine{03446 }
\DoxyCodeLine{03447   \textcolor{keywordflow}{if} (isKeyframeFrame \&\& isKeyFrameArea(col, row, mouseInCell)) \{}
\DoxyCodeLine{03448     \textcolor{keywordflow}{if} (pegbar-\/>\mbox{\hyperlink{class_t_stage_object_af2c8c37f71b2b2e2c2a15c6eb73b8b38}{isKeyframe}}(row))  \textcolor{comment}{// key frame}}
\DoxyCodeLine{03449       m\_tooltip = tr(\textcolor{stringliteral}{"{}Click to select keyframe, drag to move it"{}});}
\DoxyCodeLine{03450     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{03451       \textcolor{keywordtype}{int} r0, r1;}
\DoxyCodeLine{03452       \textcolor{keywordtype}{double} e0, e1;}
\DoxyCodeLine{03453       \textcolor{keywordtype}{int} rh0, rh1;}
\DoxyCodeLine{03454       \textcolor{keywordflow}{if} (pegbar-\/>getKeyframeSpan(row, r0, e0, r1, e1) \&\&}
\DoxyCodeLine{03455           getEaseHandles(r0, r1, e0, e1, rh0,}
\DoxyCodeLine{03456                          rh1)) \{  \textcolor{comment}{// triangles in the segment between key frames}}
\DoxyCodeLine{03457         \textcolor{keywordflow}{if} (rh0 == row)}
\DoxyCodeLine{03458           m\_tooltip = tr(\textcolor{stringliteral}{"{}Click and drag to set the acceleration range"{}});}
\DoxyCodeLine{03459         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (rh1 == row)}
\DoxyCodeLine{03460           m\_tooltip = tr(\textcolor{stringliteral}{"{}Click and drag to set the deceleration range"{}});}
\DoxyCodeLine{03461       \}}
\DoxyCodeLine{03462     \}}
\DoxyCodeLine{03463   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (isKeyframeFrame \&\& row == k1 + 1 \&\&}
\DoxyCodeLine{03464              o-\/>rect((col < 0) ? PredefinedRect::CAMERA\_LOOP\_ICON}
\DoxyCodeLine{03465                                : PredefinedRect::LOOP\_ICON)}
\DoxyCodeLine{03466                  .contains(mouseInCell))  \textcolor{comment}{// cycle toggle of key frames}}
\DoxyCodeLine{03467     m\_tooltip = tr(\textcolor{stringliteral}{"{}Set the cycle of previous keyframes"{}});}
\DoxyCodeLine{03468   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((!xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col).\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \&\&}
\DoxyCodeLine{03469            o-\/>rect(PredefinedRect::DRAG\_AREA)}
\DoxyCodeLine{03470                .adjusted(0, 0, -\/frameAdj.x(), -\/frameAdj.y())}
\DoxyCodeLine{03471                .contains(mouseInCell))}
\DoxyCodeLine{03472     m\_tooltip = tr(\textcolor{stringliteral}{"{}Click and drag to move the selection"{}});}
\DoxyCodeLine{03473   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (isZeraryColumn)}
\DoxyCodeLine{03474     m\_tooltip = QString::fromStdWString(column-\/>getZeraryFxColumn()}
\DoxyCodeLine{03475                                             -\/>getZeraryColumnFx()}
\DoxyCodeLine{03476                                             -\/>getZeraryFx()}
\DoxyCodeLine{03477                                             -\/>getName());}
\DoxyCodeLine{03478   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((!isSoundColumn \&\& !xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col).\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \&\&  \textcolor{comment}{// x > 6 \&\&}}
\DoxyCodeLine{03479            x < (o-\/>cellWidth() -\/ frameAdj.x())) \{}
\DoxyCodeLine{03480     \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell          = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col);}
\DoxyCodeLine{03481     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid           = cell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}();}
\DoxyCodeLine{03482     std::wstring levelName = cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a3a59fb1bd3261baee4e889a9edbf0ae8}{getName}}();}
\DoxyCodeLine{03483 }
\DoxyCodeLine{03484     \textcolor{comment}{// convert the last one digit of the frame number to alphabet}}
\DoxyCodeLine{03485     \textcolor{comment}{// Ex.  12 -\/> 1B    21 -\/> 2A   30 -\/> 3}}
\DoxyCodeLine{03486     \textcolor{keywordflow}{if} (isSoundTextColumn)}
\DoxyCodeLine{03487       m\_tooltip = cell.\mbox{\hyperlink{class_t_xsh_cell_afabf22a14eb891c9f3affebe0535456a}{getSoundTextLevel}}()-\/>getFrameText(}
\DoxyCodeLine{03488           cell.m\_frameId.getNumber() -\/ 1);}
\DoxyCodeLine{03489     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (Preferences::instance()-\/>isShowFrameNumberWithLettersEnabled()) \{}
\DoxyCodeLine{03490       m\_tooltip =}
\DoxyCodeLine{03491           (fid.isEmptyFrame() || fid.isNoFrame())}
\DoxyCodeLine{03492               ? QString::fromStdWString(levelName)}
\DoxyCodeLine{03493               : QString::fromStdWString(levelName) + QString(\textcolor{stringliteral}{"{} "{}}) +}
\DoxyCodeLine{03494                     m\_viewer-\/>\mbox{\hyperlink{class_xsheet_viewer_ae0642aaf7b9dae8978c26f20ea74ed49}{getFrameNumberWithLetters}}(fid.getNumber());}
\DoxyCodeLine{03495     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{03496       QString frameNumber(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{03497       \textcolor{keywordflow}{if} (fid.getNumber() >= 0) frameNumber = QString::number(fid.getNumber());}
\DoxyCodeLine{03498       \textcolor{keywordflow}{if} (!fid.getLetter().isEmpty()) frameNumber += fid.getLetter();}
\DoxyCodeLine{03499       m\_tooltip =}
\DoxyCodeLine{03500           QString((frameNumber.isEmpty()) ? QString::fromStdWString(levelName)}
\DoxyCodeLine{03501                                           : QString::fromStdWString(levelName) +}
\DoxyCodeLine{03502                                                 QString(\textcolor{stringliteral}{"{} "{}}) + frameNumber);}
\DoxyCodeLine{03503     \}}
\DoxyCodeLine{03504   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (isSoundColumn \&\& o-\/>rect(PredefinedRect::PREVIEW\_TRACK)}
\DoxyCodeLine{03505                                   .adjusted(0, 0, -\/frameAdj.x(), -\/frameAdj.y())}
\DoxyCodeLine{03506                                   .contains(mouseInCell))}
\DoxyCodeLine{03507     m\_tooltip = tr(\textcolor{stringliteral}{"{}Click and drag to play"{}});}
\DoxyCodeLine{03508   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_levelExtenderRect.contains(pos))}
\DoxyCodeLine{03509     m\_tooltip = tr(\textcolor{stringliteral}{"{}Click and drag to repeat selected cells"{}});}
\DoxyCodeLine{03510   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (isSoundColumn \&\& rectContainsPos(m\_soundLevelModifyRects, pos)) \{}
\DoxyCodeLine{03511     \textcolor{keywordflow}{if} (o-\/>isVerticalTimeline())}
\DoxyCodeLine{03512       setCursor(Qt::SplitVCursor);}
\DoxyCodeLine{03513     \textcolor{keywordflow}{else}}
\DoxyCodeLine{03514       setCursor(Qt::SplitHCursor);}
\DoxyCodeLine{03515     m\_tooltip = tr(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{03516   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{03517     m\_tooltip = tr(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{03518 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_ae025276e19351e2b2430720383ba1518}\label{class_xsheet_g_u_i_1_1_cell_area_ae025276e19351e2b2430720383ba1518}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!mousePressEvent@{mousePressEvent}}
\index{mousePressEvent@{mousePressEvent}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{mousePressEvent()}{mousePressEvent()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::mouse\+Press\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{03213                                                  \{}
\DoxyCodeLine{03214   \textcolor{keyword}{const} \mbox{\hyperlink{class_orientation}{Orientation}} *o = m\_viewer-\/>orientation();}
\DoxyCodeLine{03215 }
\DoxyCodeLine{03216   m\_viewer-\/>setQtModifiers(event-\/>modifiers());}
\DoxyCodeLine{03217   assert(!m\_isPanning);}
\DoxyCodeLine{03218   m\_isMousePressed = \textcolor{keyword}{true};}
\DoxyCodeLine{03219   QPoint frameAdj  = m\_viewer-\/>getFrameZoomAdjustment();}
\DoxyCodeLine{03220   \textcolor{keywordflow}{if} (event-\/>button() == Qt::LeftButton) \{}
\DoxyCodeLine{03221     assert(getDragTool() == 0);}
\DoxyCodeLine{03222 }
\DoxyCodeLine{03223     \mbox{\hyperlink{class_t_point_t}{TPoint}} pos(event-\/>pos().x(), event-\/>pos().y());}
\DoxyCodeLine{03224     \mbox{\hyperlink{class_cell_position}{CellPosition}} cellPosition = m\_viewer-\/>xyToPosition(event-\/>pos());}
\DoxyCodeLine{03225     \textcolor{keywordtype}{int} row                   = cellPosition.frame();}
\DoxyCodeLine{03226     \textcolor{keywordtype}{int} col                   = cellPosition.layer();}
\DoxyCodeLine{03227     QPoint cellTopLeft        = m\_viewer-\/>positionToXY(\mbox{\hyperlink{class_cell_position}{CellPosition}}(row, col));}
\DoxyCodeLine{03228     QPoint mouseInCell        = \textcolor{keyword}{event}-\/>pos() -\/ cellTopLeft;}
\DoxyCodeLine{03229     \textcolor{keywordtype}{int} x                     = mouseInCell.x();  \textcolor{comment}{// where in the cell click is}}
\DoxyCodeLine{03230 }
\DoxyCodeLine{03231     \textcolor{comment}{// Check if a note is clicked}}
\DoxyCodeLine{03232     \mbox{\hyperlink{class_t_xsh_note_set}{TXshNoteSet}} *notes = m\_viewer-\/>getXsheet()-\/>getNotes();}
\DoxyCodeLine{03233     \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{03234     \textcolor{keywordflow}{for} (i = notes-\/>getCount() -\/ 1; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{03235       \textcolor{keywordtype}{int} r       = notes-\/>getNoteRow(i);}
\DoxyCodeLine{03236       \textcolor{keywordtype}{int} c       = notes-\/>getNoteCol(i);}
\DoxyCodeLine{03237       QPoint xy   = m\_viewer-\/>positionToXY(\mbox{\hyperlink{class_cell_position}{CellPosition}}(r, c));}
\DoxyCodeLine{03238       \mbox{\hyperlink{class_t_point_t}{TPointD}} pos = notes-\/>getNotePos(i) + \mbox{\hyperlink{class_t_point_t}{TPointD}}(xy.x(), xy.y());}
\DoxyCodeLine{03239       QRect rect  = o-\/>rect(PredefinedRect::NOTE\_ICON).translated(pos.x, pos.y);}
\DoxyCodeLine{03240       \textcolor{keywordflow}{if} (!rect.contains(event-\/>pos())) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03241       setDragTool(XsheetGUI::DragTool::makeNoteMoveTool(m\_viewer));}
\DoxyCodeLine{03242       m\_viewer-\/>setCurrentNoteIndex(i);}
\DoxyCodeLine{03243       m\_viewer-\/>dragToolClick(event);}
\DoxyCodeLine{03244       \textcolor{keyword}{event}-\/>accept();}
\DoxyCodeLine{03245       update();}
\DoxyCodeLine{03246       \textcolor{keywordflow}{return};}
\DoxyCodeLine{03247     \}}
\DoxyCodeLine{03248     \textcolor{comment}{// If I have not clicked on a note, and there's a note selected, deselect it}}
\DoxyCodeLine{03249     \textcolor{keywordflow}{if} (m\_viewer-\/>getCurrentNoteIndex() >= 0) m\_viewer-\/>setCurrentNoteIndex(-\/1);}
\DoxyCodeLine{03250 }
\DoxyCodeLine{03251     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh       = m\_viewer-\/>getXsheet();}
\DoxyCodeLine{03252     \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(col);}
\DoxyCodeLine{03253 }
\DoxyCodeLine{03254     \textcolor{comment}{// Check if it's the sound column}}
\DoxyCodeLine{03255     \textcolor{keywordtype}{bool} isSoundColumn = \textcolor{keyword}{false};}
\DoxyCodeLine{03256     \textcolor{keywordflow}{if} (column) \{}
\DoxyCodeLine{03257       \mbox{\hyperlink{class_t_xsh_sound_column}{TXshSoundColumn}} *soundColumn = column-\/>getSoundColumn();}
\DoxyCodeLine{03258       isSoundColumn                = (!soundColumn) ? \textcolor{keyword}{false} : \textcolor{keyword}{true};}
\DoxyCodeLine{03259     \}}
\DoxyCodeLine{03260 }
\DoxyCodeLine{03261     \textcolor{comment}{// TObjectHandle *oh = TApp::instance()-\/>getCurrentObject();}}
\DoxyCodeLine{03262     \textcolor{comment}{// oh-\/>setObjectId(m\_viewer-\/>getObjectId(col));}}
\DoxyCodeLine{03263 }
\DoxyCodeLine{03264     \textcolor{comment}{// gmt, 28/12/2009. Non dovrebbe essere necessario, visto che dopo}}
\DoxyCodeLine{03265     \textcolor{comment}{// verra cambiata la colonna e quindi l'oggetto corrente}}
\DoxyCodeLine{03266     \textcolor{comment}{// Inoltre, facendolo qui, c'e' un problema con il calcolo del dpi}}
\DoxyCodeLine{03267     \textcolor{comment}{// (cfr. SceneViewer::onLevelChanged()): setObjectId() chiama (in cascata)}}
\DoxyCodeLine{03268     \textcolor{comment}{// onLevelChanged(), ma la colonna corrente risulta ancora quella di prima e}}
\DoxyCodeLine{03269     \textcolor{comment}{// quindi}}
\DoxyCodeLine{03270     \textcolor{comment}{// il dpi viene calcolato male. Quando si cambia la colonna l'oggetto}}
\DoxyCodeLine{03271     \textcolor{comment}{// corrente risulta}}
\DoxyCodeLine{03272     \textcolor{comment}{// gia' aggiornato e quindi non ci sono altre chiamate a onLevelChanged()}}
\DoxyCodeLine{03273     \textcolor{comment}{// cfr bug\#5235}}
\DoxyCodeLine{03274 }
\DoxyCodeLine{03275     \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *pegbar = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(m\_viewer-\/>\mbox{\hyperlink{class_xsheet_viewer_acef259f8c33344981f8c218590bca5d9}{getObjectId}}(col));}
\DoxyCodeLine{03276 }
\DoxyCodeLine{03277     \textcolor{keywordflow}{if} (Preferences::instance()-\/>isShowKeyframesOnXsheetCellAreaEnabled()) \{}
\DoxyCodeLine{03278       \textcolor{comment}{// only if key frame area is active}}
\DoxyCodeLine{03279       \textcolor{keywordtype}{int} k0, k1;}
\DoxyCodeLine{03280       \textcolor{keywordtype}{bool} isKeyframeFrame = pegbar \&\& pegbar-\/>getKeyframeRange(k0, k1) \&\&}
\DoxyCodeLine{03281                              (k1 > k0 || k0 == row) \&\& k0 <= row \&\&}
\DoxyCodeLine{03282                              row <= k1 + 1;}
\DoxyCodeLine{03283       \textcolor{keywordtype}{bool} accept = \textcolor{keyword}{false};}
\DoxyCodeLine{03284 }
\DoxyCodeLine{03285       \textcolor{keywordflow}{if} (isKeyframeFrame \&\&}
\DoxyCodeLine{03286           isKeyFrameArea(col, row,}
\DoxyCodeLine{03287                          mouseInCell)) \{  \textcolor{comment}{// They are in the keyframe selection}}
\DoxyCodeLine{03288         \textcolor{keywordflow}{if} (pegbar-\/>\mbox{\hyperlink{class_t_stage_object_af2c8c37f71b2b2e2c2a15c6eb73b8b38}{isKeyframe}}(row))      \textcolor{comment}{// in the keyframe}}
\DoxyCodeLine{03289         \{}
\DoxyCodeLine{03290           m\_viewer-\/>setCurrentRow(}
\DoxyCodeLine{03291               row);  \textcolor{comment}{// If you click on the key, change the current row as well}}
\DoxyCodeLine{03292           setDragTool(XsheetGUI::DragTool::makeKeyframeMoverTool(m\_viewer));}
\DoxyCodeLine{03293           accept = \textcolor{keyword}{true};}
\DoxyCodeLine{03294         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{03295           \textcolor{keywordtype}{int} r0, r1;}
\DoxyCodeLine{03296           \textcolor{keywordtype}{double} e0, e1;}
\DoxyCodeLine{03297           \textcolor{keywordtype}{int} rh0, rh1;}
\DoxyCodeLine{03298           \textcolor{keywordflow}{if} (pegbar-\/>getKeyframeSpan(row, r0, e0, r1, e1) \&\&}
\DoxyCodeLine{03299               getEaseHandles(r0, r1, e0, e1, rh0, rh1)) \{}
\DoxyCodeLine{03300             \textcolor{keywordflow}{if} (rh0 == row) \{  \textcolor{comment}{// in a keyframe handle}}
\DoxyCodeLine{03301               setDragTool(XsheetGUI::DragTool::makeKeyFrameHandleMoverTool(}
\DoxyCodeLine{03302                   m\_viewer, \textcolor{keyword}{true}, r0));}
\DoxyCodeLine{03303               accept = \textcolor{keyword}{true};}
\DoxyCodeLine{03304             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (rh1 == row) \{  \textcolor{comment}{// in a keyframe handle}}
\DoxyCodeLine{03305               setDragTool(XsheetGUI::DragTool::makeKeyFrameHandleMoverTool(}
\DoxyCodeLine{03306                   m\_viewer, \textcolor{keyword}{false}, r1));}
\DoxyCodeLine{03307               accept = \textcolor{keyword}{true};}
\DoxyCodeLine{03308             \}}
\DoxyCodeLine{03309           \}}
\DoxyCodeLine{03310         \}}
\DoxyCodeLine{03311       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (isKeyframeFrame \&\& row == k1 + 1 \&\&}
\DoxyCodeLine{03312                  o-\/>rect((col < 0) ? PredefinedRect::CAMERA\_LOOP\_ICON}
\DoxyCodeLine{03313                                    : PredefinedRect::LOOP\_ICON)}
\DoxyCodeLine{03314                      .contains(mouseInCell)) \{  \textcolor{comment}{// cycle toggle}}
\DoxyCodeLine{03315         CycleUndo *undo = \textcolor{keyword}{new} CycleUndo(pegbar, \textcolor{keyword}{this});}
\DoxyCodeLine{03316         undo-\/>redo();}
\DoxyCodeLine{03317         TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{03318         accept = \textcolor{keyword}{true};}
\DoxyCodeLine{03319       \}}
\DoxyCodeLine{03320       \textcolor{keywordflow}{if} (accept) \{}
\DoxyCodeLine{03321         m\_viewer-\/>dragToolClick(event);}
\DoxyCodeLine{03322         \textcolor{keyword}{event}-\/>accept();}
\DoxyCodeLine{03323         update();}
\DoxyCodeLine{03324         \textcolor{keywordflow}{return};}
\DoxyCodeLine{03325       \}}
\DoxyCodeLine{03326       \textcolor{comment}{// keep searching}}
\DoxyCodeLine{03327     \}}
\DoxyCodeLine{03328 }
\DoxyCodeLine{03329     \textcolor{keywordflow}{if} (m\_levelExtenderRect.contains(pos.x, pos.y)) \{}
\DoxyCodeLine{03330       m\_viewer-\/>getKeyframeSelection()-\/>selectNone();}
\DoxyCodeLine{03331       \textcolor{keywordflow}{if} (event-\/>modifiers() \& Qt::ControlModifier)}
\DoxyCodeLine{03332         setDragTool(}
\DoxyCodeLine{03333             XsheetGUI::DragTool::makeLevelExtenderTool(m\_viewer, \textcolor{keyword}{false}));}
\DoxyCodeLine{03334       \textcolor{keywordflow}{else}}
\DoxyCodeLine{03335         setDragTool(XsheetGUI::DragTool::makeLevelExtenderTool(m\_viewer, \textcolor{keyword}{true}));}
\DoxyCodeLine{03336     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (event-\/>modifiers() \& Qt::ControlModifier \&\&}
\DoxyCodeLine{03337                m\_upperLevelExtenderRect.contains(pos.x, pos.y)) \{}
\DoxyCodeLine{03338       m\_viewer-\/>getKeyframeSelection()-\/>selectNone();}
\DoxyCodeLine{03339       setDragTool(}
\DoxyCodeLine{03340           XsheetGUI::DragTool::makeLevelExtenderTool(m\_viewer, \textcolor{keyword}{false}, \textcolor{keyword}{true}));}
\DoxyCodeLine{03341     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((!xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col).\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \&\&}
\DoxyCodeLine{03342                o-\/>rect(PredefinedRect::DRAG\_AREA)}
\DoxyCodeLine{03343                    .adjusted(0, 0, -\/frameAdj.x(), -\/frameAdj.y())}
\DoxyCodeLine{03344                    .contains(mouseInCell)) \{}
\DoxyCodeLine{03345       \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(col);}
\DoxyCodeLine{03346       \textcolor{keywordflow}{if} (column \&\& !m\_viewer-\/>getCellSelection()-\/>isCellSelected(row, col)) \{}
\DoxyCodeLine{03347         \textcolor{keywordtype}{int} r0, r1;}
\DoxyCodeLine{03348         column-\/>getLevelRange(row, r0, r1);}
\DoxyCodeLine{03349         \textcolor{keywordflow}{if} (event-\/>modifiers() \& Qt::ControlModifier) \{}
\DoxyCodeLine{03350           m\_viewer-\/>getCellKeyframeSelection()-\/>makeCurrent();}
\DoxyCodeLine{03351           m\_viewer-\/>getCellKeyframeSelection()-\/>\mbox{\hyperlink{class_t_cell_keyframe_selection_a398f9b96df010d52ae8137d52f7a60af}{selectCellsKeyframes}}(r0, col,}
\DoxyCodeLine{03352                                                                      r1, col);}
\DoxyCodeLine{03353         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{03354           m\_viewer-\/>getKeyframeSelection()-\/>selectNone();}
\DoxyCodeLine{03355           m\_viewer-\/>getCellSelection()-\/>makeCurrent();}
\DoxyCodeLine{03356           m\_viewer-\/>getCellSelection()-\/>\mbox{\hyperlink{class_t_cell_selection_ac081c8305a9b9269fbf82eb0c9e06bc3}{selectCells}}(r0, col, r1, col);}
\DoxyCodeLine{03357         \}}
\DoxyCodeLine{03358         \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>notifySelectionChanged();}
\DoxyCodeLine{03359       \}}
\DoxyCodeLine{03360       \mbox{\hyperlink{class_t_selection}{TSelection}} *selection =}
\DoxyCodeLine{03361           \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>getSelection();}
\DoxyCodeLine{03362       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_cell_keyframe_selection}{TCellKeyframeSelection}} *cellKeyframeSelection =}
\DoxyCodeLine{03363               \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_cell_keyframe_selection}{TCellKeyframeSelection}} *\textcolor{keyword}{>}(selection))}
\DoxyCodeLine{03364         setDragTool(XsheetGUI::DragTool::makeCellKeyframeMoverTool(m\_viewer));}
\DoxyCodeLine{03365       \textcolor{keywordflow}{else}}
\DoxyCodeLine{03366         setDragTool(XsheetGUI::DragTool::makeLevelMoverTool(m\_viewer));}
\DoxyCodeLine{03367     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{03368       m\_viewer-\/>getKeyframeSelection()-\/>selectNone();}
\DoxyCodeLine{03369       \textcolor{keywordflow}{if} (isSoundColumn \&\& o-\/>rect(PredefinedRect::PREVIEW\_TRACK)}
\DoxyCodeLine{03370                                .adjusted(0, 0, -\/frameAdj.x(), -\/frameAdj.y())}
\DoxyCodeLine{03371                                .contains(mouseInCell))}
\DoxyCodeLine{03372         setDragTool(XsheetGUI::DragTool::makeSoundScrubTool(}
\DoxyCodeLine{03373             m\_viewer, column-\/>getSoundColumn()));}
\DoxyCodeLine{03374       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (isSoundColumn \&\&}
\DoxyCodeLine{03375                rectContainsPos(m\_soundLevelModifyRects, event-\/>pos()))}
\DoxyCodeLine{03376         setDragTool(XsheetGUI::DragTool::makeSoundLevelModifierTool(m\_viewer));}
\DoxyCodeLine{03377       \textcolor{keywordflow}{else}}
\DoxyCodeLine{03378         setDragTool(XsheetGUI::DragTool::makeSelectionTool(m\_viewer));}
\DoxyCodeLine{03379     \}}
\DoxyCodeLine{03380     m\_viewer-\/>dragToolClick(event);}
\DoxyCodeLine{03381   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (event-\/>button() == Qt::MidButton) \{}
\DoxyCodeLine{03382     m\_pos       = \textcolor{keyword}{event}-\/>pos();}
\DoxyCodeLine{03383     m\_isPanning = \textcolor{keyword}{true};}
\DoxyCodeLine{03384   \}}
\DoxyCodeLine{03385   \textcolor{keyword}{event}-\/>accept();}
\DoxyCodeLine{03386   update();}
\DoxyCodeLine{03387 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_aa0f5b71c06e8170b16c1d33c5e288855}\label{class_xsheet_g_u_i_1_1_cell_area_aa0f5b71c06e8170b16c1d33c5e288855}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!mouseReleaseEvent@{mouseReleaseEvent}}
\index{mouseReleaseEvent@{mouseReleaseEvent}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{mouseReleaseEvent()}{mouseReleaseEvent()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::mouse\+Release\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{03522                                                    \{}
\DoxyCodeLine{03523   m\_viewer-\/>setQtModifiers(0);}
\DoxyCodeLine{03524   m\_isMousePressed = \textcolor{keyword}{false};}
\DoxyCodeLine{03525   m\_viewer-\/>stopAutoPan();}
\DoxyCodeLine{03526   m\_isPanning = \textcolor{keyword}{false};}
\DoxyCodeLine{03527   m\_viewer-\/>dragToolRelease(event);}
\DoxyCodeLine{03528 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a27a66d5adde4142ac1c1b946342adb1b}\label{class_xsheet_g_u_i_1_1_cell_area_a27a66d5adde4142ac1c1b946342adb1b}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!onControlPressed@{onControlPressed}}
\index{onControlPressed@{onControlPressed}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{onControlPressed()}{onControlPressed()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::on\+Control\+Pressed (\begin{DoxyParamCaption}\item[{bool}]{pressed }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{03740                                             \{}
\DoxyCodeLine{03741   isCtrlPressed = pressed;}
\DoxyCodeLine{03742   update();}
\DoxyCodeLine{03743 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a8834bc87ebb88a6662b380587295f785}\label{class_xsheet_g_u_i_1_1_cell_area_a8834bc87ebb88a6662b380587295f785}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!onReplaceByCastedLevel@{onReplaceByCastedLevel}}
\index{onReplaceByCastedLevel@{onReplaceByCastedLevel}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{onReplaceByCastedLevel}{onReplaceByCastedLevel}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::on\+Replace\+By\+Casted\+Level (\begin{DoxyParamCaption}\item[{QAction $\ast$}]{action }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

replace level with another level in the cast 
\begin{DoxyCode}{0}
\DoxyCodeLine{04004                                                      \{}
\DoxyCodeLine{04005   std::wstring levelName = action-\/>data().toString().toStdWString();}
\DoxyCodeLine{04006   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level =}
\DoxyCodeLine{04007       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_ac1a8bf0d2cec4f59c87b0001991264b5}{getLevelSet}}()-\/>getLevel(}
\DoxyCodeLine{04008           levelName);}
\DoxyCodeLine{04009 }
\DoxyCodeLine{04010   \textcolor{keywordflow}{if} (!level) \textcolor{keywordflow}{return};}
\DoxyCodeLine{04011   \mbox{\hyperlink{class_t_cell_selection}{TCellSelection}} *cellSelection = m\_viewer-\/>getCellSelection();}
\DoxyCodeLine{04012   \textcolor{keywordflow}{if} (cellSelection-\/>isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{04013   \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{04014   cellSelection-\/>getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{04015 }
\DoxyCodeLine{04016   \textcolor{keywordtype}{bool} changed = \textcolor{keyword}{false};}
\DoxyCodeLine{04017 }
\DoxyCodeLine{04018   \mbox{\hyperlink{class_t_undo_manager}{TUndoManager}} *um = TUndoManager::manager();}
\DoxyCodeLine{04019   um-\/>beginBlock();}
\DoxyCodeLine{04020 }
\DoxyCodeLine{04021   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{04022   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} c = c0; c <= c1; c++) \{}
\DoxyCodeLine{04023     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} r = r0; r <= r1; r++) \{}
\DoxyCodeLine{04024       \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r, c);}
\DoxyCodeLine{04025       \textcolor{keywordflow}{if} (!cell.m\_level.getPointer() || cell.m\_level.getPointer() == level)}
\DoxyCodeLine{04026         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{04027 }
\DoxyCodeLine{04028       \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} oldCell = cell;}
\DoxyCodeLine{04029 }
\DoxyCodeLine{04030       cell.m\_level = \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}}(level);}
\DoxyCodeLine{04031       xsh-\/>setCell(r, c, cell);}
\DoxyCodeLine{04032 }
\DoxyCodeLine{04033       RenameCellUndo *undo = \textcolor{keyword}{new} RenameCellUndo(r, c, oldCell, cell);}
\DoxyCodeLine{04034       um-\/>add(undo);}
\DoxyCodeLine{04035 }
\DoxyCodeLine{04036       changed = \textcolor{keyword}{true};}
\DoxyCodeLine{04037     \}}
\DoxyCodeLine{04038   \}}
\DoxyCodeLine{04039 }
\DoxyCodeLine{04040   \textcolor{keywordflow}{if} (changed) \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{04041 }
\DoxyCodeLine{04042   um-\/>endBlock();}
\DoxyCodeLine{04043 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00233}{TXsheet\+::get\+Cell()}}, \mbox{\hyperlink{l00106}{TApp\+::get\+Current\+Scene()}}, \mbox{\hyperlink{l00110}{TApp\+::get\+Current\+Xsheet()}}, \mbox{\hyperlink{l00093}{Toonz\+Scene\+::get\+Level\+Set()}}, and \mbox{\hyperlink{l00215}{TApp\+::instance()}}.

\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a1075cc38246704488fc056df58e3e864}\label{class_xsheet_g_u_i_1_1_cell_area_a1075cc38246704488fc056df58e3e864}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!onSetCellMark@{onSetCellMark}}
\index{onSetCellMark@{onSetCellMark}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{onSetCellMark}{onSetCellMark}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::on\+Set\+Cell\+Mark (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{04251                              \{}
\DoxyCodeLine{04252   QAction *senderAction = qobject\_cast<QAction *>(sender());}
\DoxyCodeLine{04253   assert(senderAction);}
\DoxyCodeLine{04254   QList<QVariant> params = senderAction-\/>data().toList();}
\DoxyCodeLine{04255   assert(params.count() == 3);}
\DoxyCodeLine{04256   \textcolor{keywordtype}{int} row               = params[0].toInt();}
\DoxyCodeLine{04257   \textcolor{keywordtype}{int} col               = params[1].toInt();}
\DoxyCodeLine{04258   \textcolor{keywordtype}{int} \textcolor{keywordtype}{id}                = params[2].toInt();}
\DoxyCodeLine{04259   SetCellMarkUndo *undo = \textcolor{keyword}{new} SetCellMarkUndo(row, col, \textcolor{keywordtype}{id});}
\DoxyCodeLine{04260   undo-\/>redo();}
\DoxyCodeLine{04261   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{04262 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a9dd399c0ad4dca36c4c66c6f8031bb30}\label{class_xsheet_g_u_i_1_1_cell_area_a9dd399c0ad4dca36c4c66c6f8031bb30}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!onStepChanged@{onStepChanged}}
\index{onStepChanged@{onStepChanged}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{onStepChanged}{onStepChanged}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::on\+Step\+Changed (\begin{DoxyParamCaption}\item[{QAction $\ast$}]{act }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{04172                                          \{}
\DoxyCodeLine{04173   QList<QVariant> list = act-\/>data().toList();}
\DoxyCodeLine{04174   \textcolor{keywordtype}{int} step             = list.at(0).toInt();}
\DoxyCodeLine{04175   \textcolor{keywordtype}{int} frame            = list.at(1).toInt();}
\DoxyCodeLine{04176   \textcolor{keywordtype}{int} col              = list.at(2).toInt();}
\DoxyCodeLine{04177 }
\DoxyCodeLine{04178   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{04179   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *stageObject =}
\DoxyCodeLine{04180       m\_viewer-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(m\_viewer-\/>\mbox{\hyperlink{class_xsheet_viewer_acef259f8c33344981f8c218590bca5d9}{getObjectId}}(col));}
\DoxyCodeLine{04181   \mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *param = stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a08806eb331bdede66bb3113b1642a6ad}{TStageObject::T\_Angle}});}
\DoxyCodeLine{04182   \textcolor{keywordtype}{int} keyFrameIndex   = param-\/>getClosestKeyframe(frame);}
\DoxyCodeLine{04183   \textcolor{keywordflow}{if} (keyFrameIndex >= 0) \{}
\DoxyCodeLine{04184     setParamStep(keyFrameIndex, step,}
\DoxyCodeLine{04185                  stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a08806eb331bdede66bb3113b1642a6ad}{TStageObject::T\_Angle}}));}
\DoxyCodeLine{04186   \}}
\DoxyCodeLine{04187 }
\DoxyCodeLine{04188   param         = stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a23087217a2f7436152fa0ee4b2362448}{TStageObject::T\_X}});}
\DoxyCodeLine{04189   keyFrameIndex = param-\/>getClosestKeyframe(frame);}
\DoxyCodeLine{04190   \textcolor{keywordflow}{if} (keyFrameIndex >= 0) \{}
\DoxyCodeLine{04191     setParamStep(keyFrameIndex, step, stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a23087217a2f7436152fa0ee4b2362448}{TStageObject::T\_X}}));}
\DoxyCodeLine{04192   \}}
\DoxyCodeLine{04193   param         = stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a45e2b29d25f50909ebd06d1bd9c1944a}{TStageObject::T\_Y}});}
\DoxyCodeLine{04194   keyFrameIndex = param-\/>getClosestKeyframe(frame);}
\DoxyCodeLine{04195   \textcolor{keywordflow}{if} (keyFrameIndex >= 0) \{}
\DoxyCodeLine{04196     setParamStep(keyFrameIndex, step, stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a45e2b29d25f50909ebd06d1bd9c1944a}{TStageObject::T\_Y}}));}
\DoxyCodeLine{04197   \}}
\DoxyCodeLine{04198   param         = stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a6c8e9e0e35cdf4d4a5427a00eaeb255d}{TStageObject::T\_Z}});}
\DoxyCodeLine{04199   keyFrameIndex = param-\/>getClosestKeyframe(frame);}
\DoxyCodeLine{04200   \textcolor{keywordflow}{if} (keyFrameIndex >= 0) \{}
\DoxyCodeLine{04201     setParamStep(keyFrameIndex, step, stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a6c8e9e0e35cdf4d4a5427a00eaeb255d}{TStageObject::T\_Z}}));}
\DoxyCodeLine{04202   \}}
\DoxyCodeLine{04203   param         = stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a426bfbbf201379648fff0257dd067289}{TStageObject::T\_SO}});}
\DoxyCodeLine{04204   keyFrameIndex = param-\/>getClosestKeyframe(frame);}
\DoxyCodeLine{04205   \textcolor{keywordflow}{if} (keyFrameIndex >= 0) \{}
\DoxyCodeLine{04206     setParamStep(keyFrameIndex, step,}
\DoxyCodeLine{04207                  stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a426bfbbf201379648fff0257dd067289}{TStageObject::T\_SO}}));}
\DoxyCodeLine{04208   \}}
\DoxyCodeLine{04209   param         = stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a078a9701f533b38eb16dfe8914c45958}{TStageObject::T\_ScaleX}});}
\DoxyCodeLine{04210   keyFrameIndex = param-\/>getClosestKeyframe(frame);}
\DoxyCodeLine{04211   \textcolor{keywordflow}{if} (keyFrameIndex >= 0) \{}
\DoxyCodeLine{04212     setParamStep(keyFrameIndex, step,}
\DoxyCodeLine{04213                  stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a078a9701f533b38eb16dfe8914c45958}{TStageObject::T\_ScaleX}}));}
\DoxyCodeLine{04214   \}}
\DoxyCodeLine{04215   param         = stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a9bda4b3de61fbbebf8ce48749d22dd86}{TStageObject::T\_ScaleY}});}
\DoxyCodeLine{04216   keyFrameIndex = param-\/>getClosestKeyframe(frame);}
\DoxyCodeLine{04217   \textcolor{keywordflow}{if} (keyFrameIndex >= 0) \{}
\DoxyCodeLine{04218     setParamStep(keyFrameIndex, step,}
\DoxyCodeLine{04219                  stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a9bda4b3de61fbbebf8ce48749d22dd86}{TStageObject::T\_ScaleY}}));}
\DoxyCodeLine{04220   \}}
\DoxyCodeLine{04221   param         = stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(TStageObject::T\_Scale);}
\DoxyCodeLine{04222   keyFrameIndex = param-\/>getClosestKeyframe(frame);}
\DoxyCodeLine{04223   \textcolor{keywordflow}{if} (keyFrameIndex >= 0) \{}
\DoxyCodeLine{04224     setParamStep(keyFrameIndex, step,}
\DoxyCodeLine{04225                  stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(TStageObject::T\_Scale));}
\DoxyCodeLine{04226   \}}
\DoxyCodeLine{04227   param         = stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439aa0630d9663bbf752a92702f3a1818e58}{TStageObject::T\_Path}});}
\DoxyCodeLine{04228   keyFrameIndex = param-\/>getClosestKeyframe(frame);}
\DoxyCodeLine{04229   \textcolor{keywordflow}{if} (keyFrameIndex >= 0) \{}
\DoxyCodeLine{04230     setParamStep(keyFrameIndex, step,}
\DoxyCodeLine{04231                  stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439aa0630d9663bbf752a92702f3a1818e58}{TStageObject::T\_Path}}));}
\DoxyCodeLine{04232   \}}
\DoxyCodeLine{04233   param         = stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a92fbb950a2ad460478a6fa7606196a17}{TStageObject::T\_ShearX}});}
\DoxyCodeLine{04234   keyFrameIndex = param-\/>getClosestKeyframe(frame);}
\DoxyCodeLine{04235   \textcolor{keywordflow}{if} (keyFrameIndex >= 0) \{}
\DoxyCodeLine{04236     setParamStep(keyFrameIndex, step,}
\DoxyCodeLine{04237                  stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a92fbb950a2ad460478a6fa7606196a17}{TStageObject::T\_ShearX}}));}
\DoxyCodeLine{04238   \}}
\DoxyCodeLine{04239   param         = stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a0c485ea820893a408d07bab60b9b7a0d}{TStageObject::T\_ShearY}});}
\DoxyCodeLine{04240   keyFrameIndex = param-\/>getClosestKeyframe(frame);}
\DoxyCodeLine{04241   \textcolor{keywordflow}{if} (keyFrameIndex >= 0) \{}
\DoxyCodeLine{04242     setParamStep(keyFrameIndex, step,}
\DoxyCodeLine{04243                  stageObject-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}(\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439a0c485ea820893a408d07bab60b9b7a0d}{TStageObject::T\_ShearY}}));}
\DoxyCodeLine{04244   \}}
\DoxyCodeLine{04245 }
\DoxyCodeLine{04246   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{04247 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_ad52301a3b7e523ce4a6a62ea342165c8}\label{class_xsheet_g_u_i_1_1_cell_area_ad52301a3b7e523ce4a6a62ea342165c8}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!openNote@{openNote}}
\index{openNote@{openNote}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{openNote}{openNote}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::open\+Note (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{04155                         \{}
\DoxyCodeLine{04156   \mbox{\hyperlink{class_t_xsh_note_set}{TXshNoteSet}} *notes = m\_viewer-\/>getXsheet()-\/>getNotes();}
\DoxyCodeLine{04157   \textcolor{keywordtype}{int} currentIndex   = m\_viewer-\/>getCurrentNoteIndex();}
\DoxyCodeLine{04158   m\_viewer-\/>getNotesWidget().at(currentIndex)-\/>openNotePopup();}
\DoxyCodeLine{04159 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_ae299ad0140bc908b93a99b062edf769c}\label{class_xsheet_g_u_i_1_1_cell_area_ae299ad0140bc908b93a99b062edf769c}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!paintEvent@{paintEvent}}
\index{paintEvent@{paintEvent}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{paintEvent()}{paintEvent()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::paint\+Event (\begin{DoxyParamCaption}\item[{QPaint\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{03105                                             \{}
\DoxyCodeLine{03106   QRect toBeUpdated = \textcolor{keyword}{event}-\/>rect();}
\DoxyCodeLine{03107 }
\DoxyCodeLine{03108   QPainter p(\textcolor{keyword}{this});}
\DoxyCodeLine{03109   p.setClipRect(toBeUpdated);}
\DoxyCodeLine{03110 }
\DoxyCodeLine{03111   p.fillRect(toBeUpdated, QBrush(m\_viewer-\/>getEmptyCellColor()));}
\DoxyCodeLine{03112 }
\DoxyCodeLine{03113   drawCells(p, toBeUpdated);}
\DoxyCodeLine{03114   \textcolor{keywordflow}{if} (Preferences::instance()-\/>isShowKeyframesOnXsheetCellAreaEnabled())}
\DoxyCodeLine{03115     drawKeyframe(p, toBeUpdated);}
\DoxyCodeLine{03116   drawNotes(p, toBeUpdated);}
\DoxyCodeLine{03117 }
\DoxyCodeLine{03118   \textcolor{comment}{// focus cell border}}
\DoxyCodeLine{03119   QPoint frameAdj = m\_viewer-\/>getFrameZoomAdjustment();}
\DoxyCodeLine{03120   \textcolor{keywordtype}{int} row         = m\_viewer-\/>getCurrentRow();}
\DoxyCodeLine{03121   \textcolor{keywordtype}{int} col         = m\_viewer-\/>getCurrentColumn();}
\DoxyCodeLine{03122   QPoint xy       = m\_viewer-\/>positionToXY(\mbox{\hyperlink{class_cell_position}{CellPosition}}(row, col));}
\DoxyCodeLine{03123   QRect rect =}
\DoxyCodeLine{03124       m\_viewer-\/>orientation()}
\DoxyCodeLine{03125           -\/>rect((col < 0) ? PredefinedRect::CAMERA\_CELL : PredefinedRect::CELL)}
\DoxyCodeLine{03126           .translated(xy)}
\DoxyCodeLine{03127           .adjusted(0, 0, -\/1 -\/ frameAdj.x(), -\/frameAdj.y());}
\DoxyCodeLine{03128   p.setPen(m\_viewer-\/>getCellFocusColor());}
\DoxyCodeLine{03129   p.setBrush(Qt::NoBrush);}
\DoxyCodeLine{03130   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; i++)  \textcolor{comment}{// thick border within cell}}
\DoxyCodeLine{03131     p.drawRect(QRect(rect.topLeft() + QPoint(i, i),}
\DoxyCodeLine{03132                      rect.size() -\/ QSize(2 * i, 2 * i)));}
\DoxyCodeLine{03133 }
\DoxyCodeLine{03134   \textcolor{keywordflow}{if} (getDragTool()) getDragTool()-\/>drawCellsArea(p);}
\DoxyCodeLine{03135 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_cell_area_a14d74627e18efdae69a063cbce304039}\label{class_xsheet_g_u_i_1_1_cell_area_a14d74627e18efdae69a063cbce304039}} 
\index{XsheetGUI::CellArea@{XsheetGUI::CellArea}!showRenameField@{showRenameField}}
\index{showRenameField@{showRenameField}!XsheetGUI::CellArea@{XsheetGUI::CellArea}}
\doxysubsubsection{\texorpdfstring{showRenameField()}{showRenameField()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Cell\+Area\+::show\+Rename\+Field (\begin{DoxyParamCaption}\item[{int}]{row,  }\item[{int}]{col,  }\item[{bool}]{multi\+Column\+Selected = {\ttfamily false} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00152                                                                            \{}
\DoxyCodeLine{00153     m\_renameCell-\/>showInRowCol(row, col, multiColumnSelected);}
\DoxyCodeLine{00154   \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/xshcellviewer.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/xshcellviewer.\+cpp\end{DoxyCompactItemize}
