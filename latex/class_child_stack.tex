\hypertarget{class_child_stack}{}\doxysection{Child\+Stack Class Reference}
\label{class_child_stack}\index{ChildStack@{ChildStack}}


The \mbox{\hyperlink{class_child_stack}{Child\+Stack}} class provides a stack of xsheet and allows its management.  




{\ttfamily \#include $<$childstack.\+h$>$}

\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_child_stack_1_1_node}{Node}}
\begin{DoxyCompactList}\small\item\em The \mbox{\hyperlink{class_child_stack_1_1_node}{Node}} class is a container of element necessary to define a sub-\/xsheet. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_child_stack_a821d2a2e2fdc64f85751ccb8e659ee2a}{Child\+Stack}} (\mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}} $\ast$scene)
\item 
\mbox{\hyperlink{class_child_stack_a6aec2cd194fccdf509a84cd4701ec9b0}{$\sim$\+Child\+Stack}} ()
\item 
void \mbox{\hyperlink{class_child_stack_a45ee4c46f539dc56bc687a10c27caa57}{clear}} ()
\item 
bool \mbox{\hyperlink{class_child_stack_ab9be6544b43a6f75fda20993e2a79de8}{open\+Child}} (int row, int col)
\item 
bool \mbox{\hyperlink{class_child_stack_a1e7fd4360890cbd22472574a5f954d74}{close\+Child}} (int \&row, int \&col)
\item 
\mbox{\hyperlink{class_t_xsh_child_level}{TXsh\+Child\+Level}} $\ast$ \mbox{\hyperlink{class_child_stack_a2c3b07ea7a0f6adf23cf762397d10cb0}{create\+Child}} (int row, int col)
\item 
int \mbox{\hyperlink{class_child_stack_adf32015ee9da2ea3255ba9bd2597f899}{get\+Ancestor\+Count}} () const
\item 
\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$ \mbox{\hyperlink{class_child_stack_acc3acc547e134c1571b01ec5e75e9705}{get\+Top\+Xsheet}} () const
\item 
\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$ \mbox{\hyperlink{class_child_stack_aeb633c4351ac8fb0e72782c9f9d1e2b4}{get\+Xsheet}} () const
\item 
void \mbox{\hyperlink{class_child_stack_adc57fd8bf201b1336a76212186262d79}{set\+Xsheet}} (\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$xsheet)
\item 
std\+::pair$<$ \mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$, int $>$ \mbox{\hyperlink{class_child_stack_a6cddfa0ca994527a3b90a3456eb8656f}{get\+Ancestor}} (int row) const
\item 
bool \mbox{\hyperlink{class_child_stack_a8f1fa04ddb083c41ceb3c958e6423744}{get\+Ancestor\+Affine}} (\mbox{\hyperlink{class_t_affine}{TAffine}} \&aff, int row) const
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{class_child_stack}{Child\+Stack}} class provides a stack of xsheet and allows its management. 

The class has a vector of {\bfseries{\mbox{\hyperlink{class_child_stack_1_1_node}{Child\+Stack\+::\+Node}}}}, a pointer to current {\bfseries{\mbox{\hyperlink{class_t_xsheet}{TXsheet}}}} \mbox{\hyperlink{class_child_stack_aeb633c4351ac8fb0e72782c9f9d1e2b4}{get\+Xsheet()}}, and a pointer to current {\bfseries{\mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}}}} {\bfseries{m\+\_\+scene}}. The {\bfseries{\mbox{\hyperlink{class_child_stack_1_1_node}{Child\+Stack\+::\+Node}}}} vector is as a subxsheet vector.

Through this class you can create, open \mbox{\hyperlink{class_child_stack_ab9be6544b43a6f75fda20993e2a79de8}{open\+Child()}}, close \mbox{\hyperlink{class_child_stack_a1e7fd4360890cbd22472574a5f954d74}{close\+Child()}} or clear \mbox{\hyperlink{class_child_stack_a45ee4c46f539dc56bc687a10c27caa57}{clear()}} a sub-\/xsheet.

The class provides a collection of functions that return set of subxsheet properties, \mbox{\hyperlink{class_child_stack_a6cddfa0ca994527a3b90a3456eb8656f}{get\+Ancestor()}}, \mbox{\hyperlink{class_child_stack_adf32015ee9da2ea3255ba9bd2597f899}{get\+Ancestor\+Count()}}, \mbox{\hyperlink{class_child_stack_a8f1fa04ddb083c41ceb3c958e6423744}{get\+Ancestor\+Affine()}}, \mbox{\hyperlink{class_child_stack_acc3acc547e134c1571b01ec5e75e9705}{get\+Top\+Xsheet()}}. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_child_stack_a821d2a2e2fdc64f85751ccb8e659ee2a}\label{class_child_stack_a821d2a2e2fdc64f85751ccb8e659ee2a}} 
\index{ChildStack@{ChildStack}!ChildStack@{ChildStack}}
\index{ChildStack@{ChildStack}!ChildStack@{ChildStack}}
\doxysubsubsection{\texorpdfstring{ChildStack()}{ChildStack()}}
{\footnotesize\ttfamily Child\+Stack\+::\+Child\+Stack (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}} $\ast$}]{scene }\end{DoxyParamCaption})}

Constructs a \mbox{\hyperlink{class_child_stack}{Child\+Stack}} with default value and current {\bfseries{scene}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00035     : m\_scene(scene), m\_xsheet(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_xsheet}{TXsheet}}()) \{}
\DoxyCodeLine{00036   m\_xsheet-\/>\mbox{\hyperlink{class_t_xsheet_acb634f75579e77275e6dd5fad3ead2b6}{setScene}}(m\_scene);}
\DoxyCodeLine{00037   m\_xsheet-\/>addRef();}
\DoxyCodeLine{00038 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01579}{TXsheet\+::set\+Scene()}}.

\mbox{\Hypertarget{class_child_stack_a6aec2cd194fccdf509a84cd4701ec9b0}\label{class_child_stack_a6aec2cd194fccdf509a84cd4701ec9b0}} 
\index{ChildStack@{ChildStack}!````~ChildStack@{$\sim$ChildStack}}
\index{````~ChildStack@{$\sim$ChildStack}!ChildStack@{ChildStack}}
\doxysubsubsection{\texorpdfstring{$\sim$ChildStack()}{~ChildStack()}}
{\footnotesize\ttfamily Child\+Stack\+::$\sim$\+Child\+Stack (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Destroys the \mbox{\hyperlink{class_child_stack}{Child\+Stack}} object. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00042                         \{}
\DoxyCodeLine{00043   m\_xsheet-\/>release();}
\DoxyCodeLine{00044   clearPointerContainer(m\_stack);}
\DoxyCodeLine{00045 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_child_stack_a45ee4c46f539dc56bc687a10c27caa57}\label{class_child_stack_a45ee4c46f539dc56bc687a10c27caa57}} 
\index{ChildStack@{ChildStack}!clear@{clear}}
\index{clear@{clear}!ChildStack@{ChildStack}}
\doxysubsubsection{\texorpdfstring{clear()}{clear()}}
{\footnotesize\ttfamily void Child\+Stack\+::clear (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Clear child stack. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00049                        \{}
\DoxyCodeLine{00050   m\_xsheet-\/>\mbox{\hyperlink{class_t_xsheet_a5c453d16606875c8f1d5fc718df2a71d}{clearAll}}();}
\DoxyCodeLine{00051   m\_xsheet-\/>\mbox{\hyperlink{class_t_xsheet_acb634f75579e77275e6dd5fad3ead2b6}{setScene}}(m\_scene);}
\DoxyCodeLine{00052 }
\DoxyCodeLine{00053   clearPointerContainer(m\_stack);}
\DoxyCodeLine{00054 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00439}{TXsheet\+::clear\+All()}}, and \mbox{\hyperlink{l01579}{TXsheet\+::set\+Scene()}}.



Referenced by \mbox{\hyperlink{l00308}{Toonz\+Scene\+::clear()}}.

\mbox{\Hypertarget{class_child_stack_a1e7fd4360890cbd22472574a5f954d74}\label{class_child_stack_a1e7fd4360890cbd22472574a5f954d74}} 
\index{ChildStack@{ChildStack}!closeChild@{closeChild}}
\index{closeChild@{closeChild}!ChildStack@{ChildStack}}
\doxysubsubsection{\texorpdfstring{closeChild()}{closeChild()}}
{\footnotesize\ttfamily bool Child\+Stack\+::close\+Child (\begin{DoxyParamCaption}\item[{int \&}]{row,  }\item[{int \&}]{col }\end{DoxyParamCaption})}

Close current xsheet if is a sub-\/xsheet. Return false if stack is empty. Set {\bfseries{row}}, {\bfseries{col}} to sub-\/xsheet row and column. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00090                                               \{}
\DoxyCodeLine{00091   \textcolor{keywordflow}{if} (m\_stack.empty()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00092 }
\DoxyCodeLine{00093   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *childXsh = m\_xsheet;}
\DoxyCodeLine{00094   childXsh}
\DoxyCodeLine{00095       -\/>\mbox{\hyperlink{class_t_xsheet_ac5e05acb2ce9809c0dcadd2a8b06b393}{updateFrameCount}}();  \textcolor{comment}{// non dovrebbe essere necessario, ma non si sa mai}}
\DoxyCodeLine{00096   \textcolor{keywordtype}{int} childFrameCount = childXsh-\/>\mbox{\hyperlink{class_t_xsheet_a12a62da7dc04395088112e492d73374f}{getFrameCount}}();}
\DoxyCodeLine{00097 }
\DoxyCodeLine{00098   \mbox{\hyperlink{class_node}{Node}} *node = m\_stack.back();}
\DoxyCodeLine{00099   m\_stack.pop\_back();}
\DoxyCodeLine{00100 }
\DoxyCodeLine{00101   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *parentXsh = node-\/>m\_xsheet;}
\DoxyCodeLine{00102   \mbox{\hyperlink{class_t_smart_pointer_t}{TXshChildLevelP}} cl = node-\/>m\_cl;}
\DoxyCodeLine{00103   row                = node-\/>m\_row;}
\DoxyCodeLine{00104   col                = node-\/>m\_col;}
\DoxyCodeLine{00105   \textcolor{keywordtype}{bool} justCreated   = node-\/>m\_justCreated;}
\DoxyCodeLine{00106   \textcolor{keyword}{delete} node;}
\DoxyCodeLine{00107 }
\DoxyCodeLine{00108   m\_xsheet = parentXsh;}
\DoxyCodeLine{00109   m\_xsheet-\/>\mbox{\hyperlink{class_t_xsheet_ac5e05acb2ce9809c0dcadd2a8b06b393}{updateFrameCount}}();}
\DoxyCodeLine{00110 }
\DoxyCodeLine{00111   \textcolor{comment}{// if(cl) cl-\/>invalidateIcon();}}
\DoxyCodeLine{00112 }
\DoxyCodeLine{00113   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = m\_xsheet;}
\DoxyCodeLine{00114   \textcolor{keywordflow}{if} (justCreated) \{}
\DoxyCodeLine{00115     assert(xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col).m\_level.getPointer() == cl.getPointer());}
\DoxyCodeLine{00116     \textcolor{keywordflow}{if} (childFrameCount > 1) \{}
\DoxyCodeLine{00117       xsh-\/>\mbox{\hyperlink{class_t_xsheet_abd28bd6d7b54d51bc066279ae4d1d94e}{insertCells}}(row + 1, col, childFrameCount -\/ 1);}
\DoxyCodeLine{00118       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i < childFrameCount; i++)}
\DoxyCodeLine{00119         xsh-\/>setCell(row + i, col, \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}}(cl.getPointer(), \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(1 + i)));}
\DoxyCodeLine{00120     \}}
\DoxyCodeLine{00121   \}}
\DoxyCodeLine{00122 }
\DoxyCodeLine{00123   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00124 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00233}{TXsheet\+::get\+Cell()}}, \mbox{\hyperlink{l00229}{TXsheet\+::get\+Frame\+Count()}}, \mbox{\hyperlink{l00392}{TXsheet\+::insert\+Cells()}}, and \mbox{\hyperlink{l01166}{TXsheet\+::update\+Frame\+Count()}}.

\mbox{\Hypertarget{class_child_stack_a2c3b07ea7a0f6adf23cf762397d10cb0}\label{class_child_stack_a2c3b07ea7a0f6adf23cf762397d10cb0}} 
\index{ChildStack@{ChildStack}!createChild@{createChild}}
\index{createChild@{createChild}!ChildStack@{ChildStack}}
\doxysubsubsection{\texorpdfstring{createChild()}{createChild()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsh_child_level}{TXsh\+Child\+Level}} $\ast$ Child\+Stack\+::create\+Child (\begin{DoxyParamCaption}\item[{int}]{row,  }\item[{int}]{col }\end{DoxyParamCaption})}

Create a sub-\/xsheet in cell {\bfseries{row}}, {\bfseries{col}} and returns the new child level. ~\newline
Column col must be empty, The current xsheet remains unchanged 
\begin{DoxyCode}{0}
\DoxyCodeLine{00128                                                         \{}
\DoxyCodeLine{00129   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = m\_scene-\/>\mbox{\hyperlink{class_toonz_scene_ac8791183db4daa28bdffdd40e15c3b9e}{createNewLevel}}(CHILD\_XSHLEVEL);}
\DoxyCodeLine{00130   m\_xsheet-\/>setCell(row, col, \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}}(xl, \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(1)));}
\DoxyCodeLine{00131 }
\DoxyCodeLine{00132   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = m\_xsheet-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col);}
\DoxyCodeLine{00133   \textcolor{keywordflow}{return} cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a6ef7d48e41f4f214b414e959512e6377}{getChildLevel}}();}
\DoxyCodeLine{00134 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00864}{Toonz\+Scene\+::create\+New\+Level()}}, \mbox{\hyperlink{l00233}{TXsheet\+::get\+Cell()}}, and \mbox{\hyperlink{l00098}{TXsh\+Level\+::get\+Child\+Level()}}.

\mbox{\Hypertarget{class_child_stack_a6cddfa0ca994527a3b90a3456eb8656f}\label{class_child_stack_a6cddfa0ca994527a3b90a3456eb8656f}} 
\index{ChildStack@{ChildStack}!getAncestor@{getAncestor}}
\index{getAncestor@{getAncestor}!ChildStack@{ChildStack}}
\doxysubsubsection{\texorpdfstring{getAncestor()}{getAncestor()}}
{\footnotesize\ttfamily std\+::pair$<$ \mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$, int $>$ Child\+Stack\+::get\+Ancestor (\begin{DoxyParamCaption}\item[{int}]{row }\end{DoxyParamCaption}) const}

Return the ancestor and respective frame that contains {\bfseries{row}}. ~\newline
Useful by edit in place. Oss.\+: {\bfseries{row}} of current xsheet. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00148                                                              \{}
\DoxyCodeLine{00149   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = m\_xsheet;}
\DoxyCodeLine{00150   \textcolor{keywordtype}{int} i        = m\_stack.size() -\/ 1;}
\DoxyCodeLine{00151   \textcolor{keywordflow}{while} (i >= 0) \{}
\DoxyCodeLine{00152     std::map<int, int>::const\_iterator it = m\_stack[i]-\/>m\_rowTable.find(row);}
\DoxyCodeLine{00153     \textcolor{keywordflow}{if} (it == m\_stack[i]-\/>m\_rowTable.end()) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00154     row = it-\/>second;}
\DoxyCodeLine{00155     xsh = m\_stack[i]-\/>m\_xsheet;}
\DoxyCodeLine{00156     i-\/-\/;}
\DoxyCodeLine{00157   \}}
\DoxyCodeLine{00158   \textcolor{keywordflow}{return} std::make\_pair(xsh, row);}
\DoxyCodeLine{00159 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_child_stack_a8f1fa04ddb083c41ceb3c958e6423744}\label{class_child_stack_a8f1fa04ddb083c41ceb3c958e6423744}} 
\index{ChildStack@{ChildStack}!getAncestorAffine@{getAncestorAffine}}
\index{getAncestorAffine@{getAncestorAffine}!ChildStack@{ChildStack}}
\doxysubsubsection{\texorpdfstring{getAncestorAffine()}{getAncestorAffine()}}
{\footnotesize\ttfamily bool Child\+Stack\+::get\+Ancestor\+Affine (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_affine}{TAffine}} \&}]{aff,  }\item[{int}]{row }\end{DoxyParamCaption}) const}

Set aff to ancestor affine in {\bfseries{row}}. Return true if all ancestors are visible in {\bfseries{row}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00163                                                               \{}
\DoxyCodeLine{00164   aff   = \mbox{\hyperlink{class_t_affine}{TAffine}}();}
\DoxyCodeLine{00165   \textcolor{keywordtype}{int} i = m\_stack.size() -\/ 1;}
\DoxyCodeLine{00166   \textcolor{keywordflow}{while} (i >= 0) \{}
\DoxyCodeLine{00167     std::map<int, int>::const\_iterator it = m\_stack[i]-\/>m\_rowTable.find(row);}
\DoxyCodeLine{00168     \textcolor{keywordflow}{if} (it == m\_stack[i]-\/>m\_rowTable.end()) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00169 }
\DoxyCodeLine{00170     row        = it-\/>second;}
\DoxyCodeLine{00171     \mbox{\hyperlink{class_node}{Node}} *node = m\_stack[i];}
\DoxyCodeLine{00172     \mbox{\hyperlink{class_t_affine}{TAffine}} aff2;}
\DoxyCodeLine{00173     \textcolor{keywordflow}{if} (!getColumnPlacement(aff2, node-\/>m\_xsheet, row, node-\/>m\_col, \textcolor{keyword}{false}))}
\DoxyCodeLine{00174       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00175     aff = aff2 * aff;}
\DoxyCodeLine{00176     i-\/-\/;}
\DoxyCodeLine{00177   \}}
\DoxyCodeLine{00178   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00179 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_child_stack_adf32015ee9da2ea3255ba9bd2597f899}\label{class_child_stack_adf32015ee9da2ea3255ba9bd2597f899}} 
\index{ChildStack@{ChildStack}!getAncestorCount@{getAncestorCount}}
\index{getAncestorCount@{getAncestorCount}!ChildStack@{ChildStack}}
\doxysubsubsection{\texorpdfstring{getAncestorCount()}{getAncestorCount()}}
{\footnotesize\ttfamily int Child\+Stack\+::get\+Ancestor\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Return ancestor number, size of {\bfseries{\mbox{\hyperlink{class_child_stack_1_1_node}{Child\+Stack\+::\+Node}}}} vector. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00138 \{ \textcolor{keywordflow}{return} m\_stack.size(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_child_stack_acc3acc547e134c1571b01ec5e75e9705}\label{class_child_stack_acc3acc547e134c1571b01ec5e75e9705}} 
\index{ChildStack@{ChildStack}!getTopXsheet@{getTopXsheet}}
\index{getTopXsheet@{getTopXsheet}!ChildStack@{ChildStack}}
\doxysubsubsection{\texorpdfstring{getTopXsheet()}{getTopXsheet()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$ Child\+Stack\+::get\+Top\+Xsheet (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Return a pointer to top xsheet of stack, if stack is empty to current xsheet. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00142                                         \{}
\DoxyCodeLine{00143   \textcolor{keywordflow}{return} m\_stack.empty() ? m\_xsheet : m\_stack.front()-\/>m\_xsheet;}
\DoxyCodeLine{00144 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01492}{Toonz\+Scene\+::get\+Sound\+Columns()}}, \mbox{\hyperlink{l00961}{Toonz\+Scene\+::get\+Top\+Xsheet()}}, and \mbox{\hyperlink{l00590}{Toonz\+Scene\+::save()}}.

\mbox{\Hypertarget{class_child_stack_aeb633c4351ac8fb0e72782c9f9d1e2b4}\label{class_child_stack_aeb633c4351ac8fb0e72782c9f9d1e2b4}} 
\index{ChildStack@{ChildStack}!getXsheet@{getXsheet}}
\index{getXsheet@{getXsheet}!ChildStack@{ChildStack}}
\doxysubsubsection{\texorpdfstring{getXsheet()}{getXsheet()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$ Child\+Stack\+::get\+Xsheet (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Return a pointer to current xsheet. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00098 \{ \textcolor{keywordflow}{return} m\_xsheet; \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00957}{Toonz\+Scene\+::get\+Xsheet()}}.

\mbox{\Hypertarget{class_child_stack_ab9be6544b43a6f75fda20993e2a79de8}\label{class_child_stack_ab9be6544b43a6f75fda20993e2a79de8}} 
\index{ChildStack@{ChildStack}!openChild@{openChild}}
\index{openChild@{openChild}!ChildStack@{ChildStack}}
\doxysubsubsection{\texorpdfstring{openChild()}{openChild()}}
{\footnotesize\ttfamily bool Child\+Stack\+::open\+Child (\begin{DoxyParamCaption}\item[{int}]{row,  }\item[{int}]{col }\end{DoxyParamCaption})}

Open a sub-\/xsheet in cell {\bfseries{row}}, {\bfseries{col}}. Return true if it\textquotesingle{}s possible. ~\newline
If cell {\bfseries{row}}, {\bfseries{col}} is empty create a new sub-\/xheet empty and return true, if cell contains a sub-\/xsheet set this as current xsheet and return true, if cell contains another element return false. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00058                                            \{}
\DoxyCodeLine{00059   \mbox{\hyperlink{class_t_xsh_child_level}{TXshChildLevel}} *childLevel = 0;}
\DoxyCodeLine{00060   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell              = m\_xsheet-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col);}
\DoxyCodeLine{00061   \textcolor{keywordflow}{if} (!cell.m\_level) \{}
\DoxyCodeLine{00062     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00063   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00064     childLevel = cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a6ef7d48e41f4f214b414e959512e6377}{getChildLevel}}();}
\DoxyCodeLine{00065   \textcolor{keywordflow}{if} (!childLevel) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00066   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *childXsheet = childLevel-\/>\mbox{\hyperlink{class_t_xsh_child_level_ad2676276ae1db83a898a3eef10e0ace8}{getXsheet}}();}
\DoxyCodeLine{00067   \mbox{\hyperlink{class_node}{Node}} *node           = \textcolor{keyword}{new} \mbox{\hyperlink{class_node}{Node}}();}
\DoxyCodeLine{00068   node-\/>m\_row          = row;}
\DoxyCodeLine{00069   node-\/>m\_col          = col;}
\DoxyCodeLine{00070   node-\/>m\_xsheet       = m\_xsheet;}
\DoxyCodeLine{00071   node-\/>m\_cl           = childLevel;}
\DoxyCodeLine{00072   node-\/>m\_justCreated  = !cell.m\_level;}
\DoxyCodeLine{00073   \textcolor{keywordtype}{int} r0 = 0, r1 = -\/1;}
\DoxyCodeLine{00074   m\_xsheet-\/>\mbox{\hyperlink{class_t_xsheet_a26850469fb0f2886b717479050c32be2}{getCellRange}}(col, r0, r1);}
\DoxyCodeLine{00075   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} r = r0; r <= r1; r++) \{}
\DoxyCodeLine{00076     \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = m\_xsheet-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r, col);}
\DoxyCodeLine{00077     \textcolor{keywordflow}{if} (cell.m\_level.getPointer() == childLevel) \{}
\DoxyCodeLine{00078       \textcolor{keywordtype}{int} d = cell.m\_frameId.getNumber() -\/ 1;}
\DoxyCodeLine{00079       std::map<int, int>::iterator it = node-\/>m\_rowTable.find(d);}
\DoxyCodeLine{00080       \textcolor{keywordflow}{if} (it == node-\/>m\_rowTable.end()) node-\/>m\_rowTable[d] = r;}
\DoxyCodeLine{00081     \}}
\DoxyCodeLine{00082   \}}
\DoxyCodeLine{00083   m\_stack.push\_back(node);}
\DoxyCodeLine{00084   m\_xsheet = childXsheet;}
\DoxyCodeLine{00085   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00086 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00233}{TXsheet\+::get\+Cell()}}, \mbox{\hyperlink{l00462}{TXsheet\+::get\+Cell\+Range()}}, \mbox{\hyperlink{l00098}{TXsh\+Level\+::get\+Child\+Level()}}, and \mbox{\hyperlink{l00065}{TXsh\+Child\+Level\+::get\+Xsheet()}}.

\mbox{\Hypertarget{class_child_stack_adc57fd8bf201b1336a76212186262d79}\label{class_child_stack_adc57fd8bf201b1336a76212186262d79}} 
\index{ChildStack@{ChildStack}!setXsheet@{setXsheet}}
\index{setXsheet@{setXsheet}!ChildStack@{ChildStack}}
\doxysubsubsection{\texorpdfstring{setXsheet()}{setXsheet()}}
{\footnotesize\ttfamily void Child\+Stack\+::set\+Xsheet (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$}]{xsheet }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00102 \{ m\_xsheet = xsheet; \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonz/childstack.\+h\item 
E\+:/opentoonz/toonz/sources/toonzlib/childstack.\+cpp\end{DoxyCompactItemize}
