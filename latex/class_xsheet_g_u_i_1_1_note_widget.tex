\hypertarget{class_xsheet_g_u_i_1_1_note_widget}{}\doxysection{Xsheet\+GUI\+::Note\+Widget Class Reference}
\label{class_xsheet_g_u_i_1_1_note_widget}\index{XsheetGUI::NoteWidget@{XsheetGUI::NoteWidget}}
Inheritance diagram for Xsheet\+GUI\+::Note\+Widget\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_xsheet_g_u_i_1_1_note_widget}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_xsheet_g_u_i_1_1_note_widget_ab0eed8f2a8d0ca3dc8c5dc3a337dad1b}{Note\+Widget}} (\mbox{\hyperlink{class_xsheet_viewer}{Xsheet\+Viewer}} $\ast$parent=0, int note\+Index=-\/1)
\item 
int \mbox{\hyperlink{class_xsheet_g_u_i_1_1_note_widget_ab1b64e335302635e9136842be6d6c577}{get\+Note\+Index}} () const
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_note_widget_aa010e8379ad0600d9999023bdde45f9a}{set\+Note\+Index}} (int index)
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_note_widget_a5039e3beaee249e627f565ac74304880}{paint}} (QPainter $\ast$painter, QPoint pos=QPoint(), bool is\+Current=false)
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_note_widget_ac80e7d90765e3ce257eb209d2df66f94}{open\+Note\+Popup}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_note_widget_a3eb249cdb2f8b8bfe9a9c0a61c3ca607}{paint\+Event}} (QPaint\+Event $\ast$event) override
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_note_widget_ab0eed8f2a8d0ca3dc8c5dc3a337dad1b}\label{class_xsheet_g_u_i_1_1_note_widget_ab0eed8f2a8d0ca3dc8c5dc3a337dad1b}} 
\index{XsheetGUI::NoteWidget@{XsheetGUI::NoteWidget}!NoteWidget@{NoteWidget}}
\index{NoteWidget@{NoteWidget}!XsheetGUI::NoteWidget@{XsheetGUI::NoteWidget}}
\doxysubsubsection{\texorpdfstring{NoteWidget()}{NoteWidget()}}
{\footnotesize\ttfamily Xsheet\+GUI\+::\+Note\+Widget\+::\+Note\+Widget (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_xsheet_viewer}{Xsheet\+Viewer}} $\ast$}]{parent = {\ttfamily 0},  }\item[{int}]{note\+Index = {\ttfamily -\/1} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00366     : QWidget(parent)}
\DoxyCodeLine{00367     , m\_viewer(parent)}
\DoxyCodeLine{00368     , m\_noteIndex(noteIndex)}
\DoxyCodeLine{00369     , m\_isHovered(\textcolor{keyword}{false}) \{}
\DoxyCodeLine{00370   \textcolor{keywordtype}{int} width = (m\_noteIndex < 0) ? 40 : NoteWidth;}
\DoxyCodeLine{00371   setFixedSize(width, NoteHeight);}
\DoxyCodeLine{00372 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_note_widget_ab1b64e335302635e9136842be6d6c577}\label{class_xsheet_g_u_i_1_1_note_widget_ab1b64e335302635e9136842be6d6c577}} 
\index{XsheetGUI::NoteWidget@{XsheetGUI::NoteWidget}!getNoteIndex@{getNoteIndex}}
\index{getNoteIndex@{getNoteIndex}!XsheetGUI::NoteWidget@{XsheetGUI::NoteWidget}}
\doxysubsubsection{\texorpdfstring{getNoteIndex()}{getNoteIndex()}}
{\footnotesize\ttfamily int Xsheet\+GUI\+::\+Note\+Widget\+::get\+Note\+Index (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00099 \{ \textcolor{keywordflow}{return} m\_noteIndex; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_note_widget_ac80e7d90765e3ce257eb209d2df66f94}\label{class_xsheet_g_u_i_1_1_note_widget_ac80e7d90765e3ce257eb209d2df66f94}} 
\index{XsheetGUI::NoteWidget@{XsheetGUI::NoteWidget}!openNotePopup@{openNotePopup}}
\index{openNotePopup@{openNotePopup}!XsheetGUI::NoteWidget@{XsheetGUI::NoteWidget}}
\doxysubsubsection{\texorpdfstring{openNotePopup()}{openNotePopup()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Note\+Widget\+::open\+Note\+Popup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00428                                \{}
\DoxyCodeLine{00429   \textcolor{keywordflow}{if} (!m\_noteEditor) \{}
\DoxyCodeLine{00430     m\_noteEditor.reset(\textcolor{keyword}{new} \mbox{\hyperlink{class_xsheet_g_u_i_1_1_note_popup}{XsheetGUI::NotePopup}}(m\_viewer, m\_noteIndex));}
\DoxyCodeLine{00431   \}}
\DoxyCodeLine{00432 }
\DoxyCodeLine{00433   \textcolor{keywordflow}{if} (m\_noteEditor-\/>isVisible()) \{}
\DoxyCodeLine{00434     m\_noteEditor-\/>activateWindow();}
\DoxyCodeLine{00435   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00436     m\_noteEditor-\/>show();}
\DoxyCodeLine{00437   \}}
\DoxyCodeLine{00438 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_note_widget_a5039e3beaee249e627f565ac74304880}\label{class_xsheet_g_u_i_1_1_note_widget_a5039e3beaee249e627f565ac74304880}} 
\index{XsheetGUI::NoteWidget@{XsheetGUI::NoteWidget}!paint@{paint}}
\index{paint@{paint}!XsheetGUI::NoteWidget@{XsheetGUI::NoteWidget}}
\doxysubsubsection{\texorpdfstring{paint()}{paint()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Note\+Widget\+::paint (\begin{DoxyParamCaption}\item[{QPainter $\ast$}]{painter,  }\item[{QPoint}]{pos = {\ttfamily QPoint()},  }\item[{bool}]{is\+Current = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00376                                                                     \{}
\DoxyCodeLine{00377   painter-\/>translate(pos);}
\DoxyCodeLine{00378   QRect rect = m\_viewer-\/>orientation()-\/>rect(PredefinedRect::NOTE\_ICON);}
\DoxyCodeLine{00379 }
\DoxyCodeLine{00380   \mbox{\hyperlink{class_t_xsh_note_set}{TXshNoteSet}} *notes   = m\_viewer-\/>getXsheet()-\/>getNotes();}
\DoxyCodeLine{00381   \mbox{\hyperlink{class_t_scene_properties}{TSceneProperties}} *sp = m\_viewer-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_a35d49d436513243d059eee3a25ffa2ef}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}();}
\DoxyCodeLine{00382   TPixel32 c;}
\DoxyCodeLine{00383   \textcolor{keywordflow}{if} (m\_noteIndex < 0)}
\DoxyCodeLine{00384     c.m = 0;}
\DoxyCodeLine{00385   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00386     c = sp-\/>getNoteColor(notes-\/>getNoteColorIndex(m\_noteIndex));}
\DoxyCodeLine{00387   QColor color(c.r, c.g, c.b, c.m);}
\DoxyCodeLine{00388   QPoint topLeft = rect.topLeft();}
\DoxyCodeLine{00389   \textcolor{keywordtype}{int} d          = 8;}
\DoxyCodeLine{00390   \textcolor{keywordflow}{if} (isCurrent)}
\DoxyCodeLine{00391     painter-\/>setPen(Qt::white);}
\DoxyCodeLine{00392   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00393     painter-\/>setPen(Qt::black);}
\DoxyCodeLine{00394   QPainterPath rectPath(topLeft + QPoint(d, 0));}
\DoxyCodeLine{00395   rectPath.lineTo(rect.topRight());}
\DoxyCodeLine{00396   rectPath.lineTo(rect.bottomRight());}
\DoxyCodeLine{00397   rectPath.lineTo(rect.bottomLeft());}
\DoxyCodeLine{00398   rectPath.lineTo(topLeft + QPoint(0, d));}
\DoxyCodeLine{00399   rectPath.lineTo(topLeft + QPoint(d, 0));}
\DoxyCodeLine{00400   painter-\/>fillPath(rectPath, QBrush(color));}
\DoxyCodeLine{00401   painter-\/>drawPath(rectPath);}
\DoxyCodeLine{00402 }
\DoxyCodeLine{00403   color = QColor(tcrop(c.r -\/ 20, 0, 255), tcrop(c.g -\/ 20, 0, 255),}
\DoxyCodeLine{00404                  tcrop(c.b -\/ 20, 0, 255), tcrop(c.m -\/ 20, 0, 255));}
\DoxyCodeLine{00405   QPainterPath path(topLeft + QPoint(d, 0));}
\DoxyCodeLine{00406   path.lineTo(topLeft + QPoint(d, d));}
\DoxyCodeLine{00407   path.lineTo(topLeft + QPoint(0, d));}
\DoxyCodeLine{00408   path.lineTo(topLeft + QPoint(d, 0));}
\DoxyCodeLine{00409   painter-\/>fillPath(path, QBrush(color));}
\DoxyCodeLine{00410   painter-\/>drawPath(path);}
\DoxyCodeLine{00411 }
\DoxyCodeLine{00412   painter-\/>setPen(Qt::black);}
\DoxyCodeLine{00413   \textcolor{keywordflow}{if} (m\_noteIndex >= 0) \{}
\DoxyCodeLine{00414     QTextDocument document;}
\DoxyCodeLine{00415     document.setHtml(notes-\/>\mbox{\hyperlink{class_t_xsh_note_set_a9586875cc855881ad78fbb2defb1d1fd}{getNoteHtmlText}}(m\_noteIndex));}
\DoxyCodeLine{00416     painter-\/>translate(d, -\/1);}
\DoxyCodeLine{00417     document.drawContents(painter, rect.adjusted(0, 0, -\/2 * d, 0));}
\DoxyCodeLine{00418     painter-\/>translate(-\/d, 1);}
\DoxyCodeLine{00419   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00420     painter-\/>drawText(rect.adjusted(d + 1, 1, -\/d, 0),}
\DoxyCodeLine{00421                       Qt::AlignCenter | Qt::AlignTop, QString(\textcolor{stringliteral}{"{}+"{}}));}
\DoxyCodeLine{00422 }
\DoxyCodeLine{00423   painter-\/>translate(-\/pos);}
\DoxyCodeLine{00424 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_note_widget_a3eb249cdb2f8b8bfe9a9c0a61c3ca607}\label{class_xsheet_g_u_i_1_1_note_widget_a3eb249cdb2f8b8bfe9a9c0a61c3ca607}} 
\index{XsheetGUI::NoteWidget@{XsheetGUI::NoteWidget}!paintEvent@{paintEvent}}
\index{paintEvent@{paintEvent}!XsheetGUI::NoteWidget@{XsheetGUI::NoteWidget}}
\doxysubsubsection{\texorpdfstring{paintEvent()}{paintEvent()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Note\+Widget\+::paint\+Event (\begin{DoxyParamCaption}\item[{QPaint\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00442                                               \{}
\DoxyCodeLine{00443   QPainter p(\textcolor{keyword}{this});}
\DoxyCodeLine{00444   paint(\&p);}
\DoxyCodeLine{00445 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_note_widget_aa010e8379ad0600d9999023bdde45f9a}\label{class_xsheet_g_u_i_1_1_note_widget_aa010e8379ad0600d9999023bdde45f9a}} 
\index{XsheetGUI::NoteWidget@{XsheetGUI::NoteWidget}!setNoteIndex@{setNoteIndex}}
\index{setNoteIndex@{setNoteIndex}!XsheetGUI::NoteWidget@{XsheetGUI::NoteWidget}}
\doxysubsubsection{\texorpdfstring{setNoteIndex()}{setNoteIndex()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Note\+Widget\+::set\+Note\+Index (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00100                                \{}
\DoxyCodeLine{00101     m\_noteIndex = index;}
\DoxyCodeLine{00102     \textcolor{keywordflow}{if} (m\_noteEditor) m\_noteEditor-\/>setCurrentNoteIndex(index);}
\DoxyCodeLine{00103   \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/xshnoteviewer.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/xshnoteviewer.\+cpp\end{DoxyCompactItemize}
