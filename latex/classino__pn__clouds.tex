\hypertarget{classino__pn__clouds}{}\doxysection{ino\+\_\+pn\+\_\+clouds Class Reference}
\label{classino__pn__clouds}\index{ino\_pn\_clouds@{ino\_pn\_clouds}}
Inheritance diagram for ino\+\_\+pn\+\_\+clouds\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=6.000000cm]{classino__pn__clouds}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{classino__pn__clouds_aa65fc2217eae5352f49a849c0b32cbfe}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
bool \mbox{\hyperlink{classino__pn__clouds_add44d30d3281bfb99b80e9fc2af56410}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\item 
void \mbox{\hyperlink{classino__pn__clouds_a6a543392afffb46d52e3574d70ef2b39}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&rend\+\_\+sets) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classino__pn__clouds_a7866d62b48f96edb38a8cc1b9abed8c2}\label{classino__pn__clouds_a7866d62b48f96edb38a8cc1b9abed8c2}} 
\index{ino\_pn\_clouds@{ino\_pn\_clouds}!ino\_pn\_clouds@{ino\_pn\_clouds}}
\index{ino\_pn\_clouds@{ino\_pn\_clouds}!ino\_pn\_clouds@{ino\_pn\_clouds}}
\doxysubsubsection{\texorpdfstring{ino\_pn\_clouds()}{ino\_pn\_clouds()}}
{\footnotesize\ttfamily ino\+\_\+pn\+\_\+clouds\+::ino\+\_\+pn\+\_\+clouds (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00022       : m\_size(10.0)}
\DoxyCodeLine{00023       , m\_z(0.0)}
\DoxyCodeLine{00024       , m\_octaves(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_enum_param}{TIntEnumParam}}(0, \textcolor{stringliteral}{"{}1"{}}))}
\DoxyCodeLine{00025       , m\_persistance(0.5)}
\DoxyCodeLine{00026       , m\_alpha\_rendering(\textcolor{keyword}{true}) \{}
\DoxyCodeLine{00027     this-\/>m\_size-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00028 }
\DoxyCodeLine{00029     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}size"{}}, this-\/>m\_size);}
\DoxyCodeLine{00030     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}z"{}}, this-\/>m\_z);}
\DoxyCodeLine{00031 }
\DoxyCodeLine{00032     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}octaves"{}}, this-\/>m\_octaves);}
\DoxyCodeLine{00033     this-\/>m\_octaves-\/>addItem(1, \textcolor{stringliteral}{"{}2"{}});}
\DoxyCodeLine{00034     this-\/>m\_octaves-\/>addItem(2, \textcolor{stringliteral}{"{}3"{}});}
\DoxyCodeLine{00035     this-\/>m\_octaves-\/>addItem(3, \textcolor{stringliteral}{"{}4"{}});}
\DoxyCodeLine{00036     this-\/>m\_octaves-\/>addItem(4, \textcolor{stringliteral}{"{}5"{}});}
\DoxyCodeLine{00037     this-\/>m\_octaves-\/>addItem(5, \textcolor{stringliteral}{"{}6"{}});}
\DoxyCodeLine{00038     this-\/>m\_octaves-\/>addItem(6, \textcolor{stringliteral}{"{}7"{}});}
\DoxyCodeLine{00039     this-\/>m\_octaves-\/>addItem(7, \textcolor{stringliteral}{"{}8"{}});}
\DoxyCodeLine{00040     this-\/>m\_octaves-\/>addItem(8, \textcolor{stringliteral}{"{}9"{}});}
\DoxyCodeLine{00041     this-\/>m\_octaves-\/>addItem(9, \textcolor{stringliteral}{"{}10"{}});}
\DoxyCodeLine{00042 }
\DoxyCodeLine{00043     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}persistance"{}}, this-\/>m\_persistance);}
\DoxyCodeLine{00044     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}alpha\_rendering"{}}, this-\/>m\_alpha\_rendering);}
\DoxyCodeLine{00045 }
\DoxyCodeLine{00046     this-\/>m\_size-\/>setValueRange(0.0, 1000.0);}
\DoxyCodeLine{00047     this-\/>m\_persistance-\/>setValueRange(0.1 * ino::param\_range(),}
\DoxyCodeLine{00048                                        2.0 * ino::param\_range());}
\DoxyCodeLine{00049   \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classino__pn__clouds_add44d30d3281bfb99b80e9fc2af56410}\label{classino__pn__clouds_add44d30d3281bfb99b80e9fc2af56410}} 
\index{ino\_pn\_clouds@{ino\_pn\_clouds}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!ino\_pn\_clouds@{ino\_pn\_clouds}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool ino\+\_\+pn\+\_\+clouds\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00055                                                                      \{}
\DoxyCodeLine{00056     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00057   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classino__pn__clouds_a6a543392afffb46d52e3574d70ef2b39}\label{classino__pn__clouds_a6a543392afffb46d52e3574d70ef2b39}} 
\index{ino\_pn\_clouds@{ino\_pn\_clouds}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!ino\_pn\_clouds@{ino\_pn\_clouds}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void ino\+\_\+pn\+\_\+clouds\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{rend\+\_\+sets }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00080                                                                 \{}
\DoxyCodeLine{00081   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ サポートしていないPixelタイプはエラーを投げる -\/-\/-\/ */}}
\DoxyCodeLine{00082   \textcolor{keywordflow}{if} (!((\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}})tile.getRaster()) \&\& !((\mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}})tile.getRaster())) \{}
\DoxyCodeLine{00083     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_rop_exception}{TRopException}}(\textcolor{stringliteral}{"{}unsupported input pixel type"{}});}
\DoxyCodeLine{00084   \}}
\DoxyCodeLine{00085 }
\DoxyCodeLine{00086   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ Pixel単位で動作パラメータを得る -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00087   \textcolor{comment}{/* 単位変換用スケーリング}}
\DoxyCodeLine{00088 \textcolor{comment}{  行列値(=外積?=面積?)}}
\DoxyCodeLine{00089 \textcolor{comment}{          rend\_sets.m\_affine.det() = a11*a22-\/a12*a21 // double}}
\DoxyCodeLine{00090 \textcolor{comment}{  シュリンク値}}
\DoxyCodeLine{00091 \textcolor{comment}{          rend\_sets.m\_shrinkX // int}}
\DoxyCodeLine{00092 \textcolor{comment}{          rend\_sets.m\_shrinkY // int}}
\DoxyCodeLine{00093 \textcolor{comment}{  2009-\/10-\/09}}
\DoxyCodeLine{00094 \textcolor{comment}{          必ず1が返るようになり、}}
\DoxyCodeLine{00095 \textcolor{comment}{          シュリンク値はscale値と中心の移動値として}}
\DoxyCodeLine{00096 \textcolor{comment}{          m\_affineに含まれるようになった、}}
\DoxyCodeLine{00097 \textcolor{comment}{          いつからか分からない、、、。}}
\DoxyCodeLine{00098 \textcolor{comment}{          詳細不明。??????????????????}}
\DoxyCodeLine{00099 \textcolor{comment}{  */}}
\DoxyCodeLine{00100 }
\DoxyCodeLine{00101   \textcolor{comment}{/* 動作パラメータを得る */}}
\DoxyCodeLine{00102   \textcolor{keyword}{const} \textcolor{keywordtype}{double} size        = this-\/>m\_size-\/>getValue(frame);}
\DoxyCodeLine{00103   \textcolor{keyword}{const} \textcolor{keywordtype}{double} zz          = this-\/>m\_z-\/>getValue(frame);}
\DoxyCodeLine{00104   \textcolor{keyword}{const} \textcolor{keywordtype}{int} octaves        = this-\/>m\_octaves-\/>getValue();}
\DoxyCodeLine{00105   \textcolor{keyword}{const} \textcolor{keywordtype}{double} persistance = this-\/>m\_persistance-\/>getValue(frame);}
\DoxyCodeLine{00106   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} alp\_rend\_sw   = this-\/>m\_alpha\_rendering-\/>getValue();}
\DoxyCodeLine{00107 }
\DoxyCodeLine{00108   \mbox{\hyperlink{class_t_affine}{TAffine}} aff        = rend\_sets.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}} * \mbox{\hyperlink{class_t_scale}{TScale}}(ino::pixel\_per\_mm());}
\DoxyCodeLine{00109   \textcolor{keyword}{const} \textcolor{keywordtype}{double} scale = 1.0 / (size * sqrt(fabs(aff.det())));}
\DoxyCodeLine{00110   \mbox{\hyperlink{class_t_affine}{TAffine}} aff\_pn     = \mbox{\hyperlink{class_t_scale}{TScale}}(scale) * \mbox{\hyperlink{class_t_translation}{TTranslation}}(tile.m\_pos);}
\DoxyCodeLine{00111 }
\DoxyCodeLine{00112   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 保存すべき画像メモリを塗りつぶしクリア -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00113   tile.getRaster()-\/>clear(); \textcolor{comment}{/* 塗りつぶしクリア */}}
\DoxyCodeLine{00114 }
\DoxyCodeLine{00115   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ (app\_begin)log記憶 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00116   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} log\_sw = ino::log\_enable\_sw();}
\DoxyCodeLine{00117 }
\DoxyCodeLine{00118   \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00119     std::ostringstream os;}
\DoxyCodeLine{00120     os << \textcolor{stringliteral}{"{}params"{}}}
\DoxyCodeLine{00121        << \textcolor{stringliteral}{"{}  size "{}} << size << \textcolor{stringliteral}{"{}  z "{}} << zz << \textcolor{stringliteral}{"{}  octaves "{}} << octaves}
\DoxyCodeLine{00122        << \textcolor{stringliteral}{"{}  persistance "{}} << persistance << \textcolor{stringliteral}{"{}  alp\_rend\_sw "{}} << alp\_rend\_sw}
\DoxyCodeLine{00123 }
\DoxyCodeLine{00124        << \textcolor{stringliteral}{"{}   tile w "{}} << tile.getRaster()-\/>getLx() << \textcolor{stringliteral}{"{}  h "{}}}
\DoxyCodeLine{00125        << tile.getRaster()-\/>getLy() << \textcolor{stringliteral}{"{}  pixbits "{}}}
\DoxyCodeLine{00126        << ino::pixel\_bits(tile.getRaster());}
\DoxyCodeLine{00127     os << \textcolor{stringliteral}{"{}   frame "{}} << frame << \textcolor{stringliteral}{"{}   aff\_pn scale "{}} << scale << \textcolor{stringliteral}{"{}  pos x "{}}}
\DoxyCodeLine{00128        << tile.m\_pos.x << \textcolor{stringliteral}{"{}  y "{}} << tile.m\_pos.y;}
\DoxyCodeLine{00129   \}}
\DoxyCodeLine{00130   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ fx処理 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00131   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00132     tile.getRaster()-\/>lock();}
\DoxyCodeLine{00133     fx\_(tile.getRaster(), zz, octaves, persistance, alp\_rend\_sw, aff\_pn.a11,}
\DoxyCodeLine{00134         aff\_pn.a12, aff\_pn.a13, aff\_pn.a21, aff\_pn.a22, aff\_pn.a23);}
\DoxyCodeLine{00135     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00136   \}}
\DoxyCodeLine{00137   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ error処理 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00138   \textcolor{keywordflow}{catch} (std::bad\_alloc \&e) \{}
\DoxyCodeLine{00139     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00140     \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00141       std::string str(\textcolor{stringliteral}{"{}std::bad\_alloc <"{}});}
\DoxyCodeLine{00142       str += e.what();}
\DoxyCodeLine{00143       str += \textcolor{charliteral}{'>'};}
\DoxyCodeLine{00144     \}}
\DoxyCodeLine{00145     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00146   \} \textcolor{keywordflow}{catch} (std::exception \&e) \{}
\DoxyCodeLine{00147     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00148     \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00149       std::string str(\textcolor{stringliteral}{"{}exception <"{}});}
\DoxyCodeLine{00150       str += e.what();}
\DoxyCodeLine{00151       str += \textcolor{charliteral}{'>'};}
\DoxyCodeLine{00152     \}}
\DoxyCodeLine{00153     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00154   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00155     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00156     \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00157       std::string str(\textcolor{stringliteral}{"{}other exception"{}});}
\DoxyCodeLine{00158     \}}
\DoxyCodeLine{00159     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00160   \}}
\DoxyCodeLine{00161 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classino__pn__clouds_aa65fc2217eae5352f49a849c0b32cbfe}\label{classino__pn__clouds_aa65fc2217eae5352f49a849c0b32cbfe}} 
\index{ino\_pn\_clouds@{ino\_pn\_clouds}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!ino\_pn\_clouds@{ino\_pn\_clouds}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool ino\+\_\+pn\+\_\+clouds\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00051                                                        \{}
\DoxyCodeLine{00052     bBox = TConsts::infiniteRectD;}
\DoxyCodeLine{00053     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00054   \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/ino\+\_\+pn\+\_\+clouds.\+cpp\end{DoxyCompactItemize}
