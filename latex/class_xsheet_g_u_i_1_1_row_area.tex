\hypertarget{class_xsheet_g_u_i_1_1_row_area}{}\doxysection{Xsheet\+GUI\+::Row\+Area Class Reference}
\label{class_xsheet_g_u_i_1_1_row_area}\index{XsheetGUI::RowArea@{XsheetGUI::RowArea}}


La classe si occupa della visualizzazione dell\textquotesingle{}area che gestisce le righe.  




{\ttfamily \#include $<$xshrowviewer.\+h$>$}

Inheritance diagram for Xsheet\+GUI\+::Row\+Area\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_xsheet_g_u_i_1_1_row_area}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_xsheet_g_u_i_1_1_row_area_ab3219866cf89f2cf41b7b69459b64573}{Row\+Area}} (\mbox{\hyperlink{class_xsheet_viewer}{Xsheet\+Viewer}} $\ast$parent, Qt\+::\+WFlags flags=0)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_row_area_addb01c14efcc31704107ec4796a53db1}{on\+Set\+Start\+Marker}} ()
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_row_area_ab3aee617bb7a1665d0139d8e5a3640c2}{on\+Set\+Stop\+Marker}} ()
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_row_area_a0ad33e6c101f27e28a971071dbbf5ddb}{on\+Remove\+Markers}} ()
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_row_area_a1480bb9a8d998de6f96cab97c3993621}{on\+Set\+Auto\+Markers}} ()
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_row_area_aa025819be58645898a774f13bd6601e5}{on\+Preview\+This}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_row_area_a8e27c72f2d09c090a0dde8812d194cba}{paint\+Event}} (QPaint\+Event $\ast$) override
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_row_area_ad2b8b53e4cce01b1e65a38fb556ad220}{mouse\+Press\+Event}} (QMouse\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_row_area_a76a7d2dbffc917e854e9c0baa2a78b17}{mouse\+Move\+Event}} (QMouse\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_row_area_acb38c69b0586b15d2a28f739000a8a75}{mouse\+Release\+Event}} (QMouse\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_row_area_a39a3e53246bb8c87ee90d7c4ec59dbf4}{context\+Menu\+Event}} (QContext\+Menu\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_row_area_ac3b8ee5e889f4a96fe4f3663d622877a}{mouse\+Double\+Click\+Event}} (QMouse\+Event $\ast$event) override
\item 
bool \mbox{\hyperlink{class_xsheet_g_u_i_1_1_row_area_affc07ce15ced3455de4b6152a009ea32}{event}} (QEvent $\ast$event) override
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_row_area_a4a3f55ead39a5ce81367c071438c42ef}{set\+Marker}} (int index)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
La classe si occupa della visualizzazione dell\textquotesingle{}area che gestisce le righe. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_row_area_ab3219866cf89f2cf41b7b69459b64573}\label{class_xsheet_g_u_i_1_1_row_area_ab3219866cf89f2cf41b7b69459b64573}} 
\index{XsheetGUI::RowArea@{XsheetGUI::RowArea}!RowArea@{RowArea}}
\index{RowArea@{RowArea}!XsheetGUI::RowArea@{XsheetGUI::RowArea}}
\doxysubsubsection{\texorpdfstring{RowArea()}{RowArea()}}
{\footnotesize\ttfamily Xsheet\+GUI\+::\+Row\+Area\+::\+Row\+Area (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_xsheet_viewer}{Xsheet\+Viewer}} $\ast$}]{parent,  }\item[{Qt\+::\+WFlags}]{flags = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00050     : QWidget(parent, flags)}
\DoxyCodeLine{00051     , m\_viewer(parent)}
\DoxyCodeLine{00052     , m\_row(-\/1)}
\DoxyCodeLine{00053     , m\_showOnionToSet(None)}
\DoxyCodeLine{00054     , m\_pos(-\/1, -\/1)}
\DoxyCodeLine{00055     , m\_playRangeActiveInMousePress(\textcolor{keyword}{false})}
\DoxyCodeLine{00056     , m\_mousePressRow(-\/1)}
\DoxyCodeLine{00057     , m\_tooltip(tr(\textcolor{stringliteral}{"{}"{}}))}
\DoxyCodeLine{00058     , m\_r0(0)}
\DoxyCodeLine{00059     , m\_r1(5)}
\DoxyCodeLine{00060     , m\_isPanning(\textcolor{keyword}{false}) \{}
\DoxyCodeLine{00061   setFocusPolicy(Qt::NoFocus);}
\DoxyCodeLine{00062   setMouseTracking(\textcolor{keyword}{true});}
\DoxyCodeLine{00063   connect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentOnionSkin(),}
\DoxyCodeLine{00064           SIGNAL(onionSkinMaskChanged()), \textcolor{keyword}{this}, SLOT(update()));}
\DoxyCodeLine{00065   \textcolor{comment}{// for displaying the pinned center keys when the skeleton tool is selected}}
\DoxyCodeLine{00066   connect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentTool(), SIGNAL(toolSwitched()), \textcolor{keyword}{this},}
\DoxyCodeLine{00067           SLOT(update()));}
\DoxyCodeLine{00068 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_row_area_a7e5fe905c94d84375f6de834ab1f4da7}\label{class_xsheet_g_u_i_1_1_row_area_a7e5fe905c94d84375f6de834ab1f4da7}} 
\index{XsheetGUI::RowArea@{XsheetGUI::RowArea}!````~RowArea@{$\sim$RowArea}}
\index{````~RowArea@{$\sim$RowArea}!XsheetGUI::RowArea@{XsheetGUI::RowArea}}
\doxysubsubsection{\texorpdfstring{$\sim$RowArea()}{~RowArea()}}
{\footnotesize\ttfamily Xsheet\+GUI\+::\+Row\+Area\+::$\sim$\+Row\+Area (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00072 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_row_area_a39a3e53246bb8c87ee90d7c4ec59dbf4}\label{class_xsheet_g_u_i_1_1_row_area_a39a3e53246bb8c87ee90d7c4ec59dbf4}} 
\index{XsheetGUI::RowArea@{XsheetGUI::RowArea}!contextMenuEvent@{contextMenuEvent}}
\index{contextMenuEvent@{contextMenuEvent}!XsheetGUI::RowArea@{XsheetGUI::RowArea}}
\doxysubsubsection{\texorpdfstring{contextMenuEvent()}{contextMenuEvent()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Row\+Area\+::context\+Menu\+Event (\begin{DoxyParamCaption}\item[{QContext\+Menu\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01221                                                        \{}
\DoxyCodeLine{01222   \mbox{\hyperlink{class_onion_skin_mask}{OnionSkinMask}} osMask =}
\DoxyCodeLine{01223       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_afcdd56d9130b7c39a5227de08a0b65e4}{getCurrentOnionSkin}}()-\/>getOnionSkinMask();}
\DoxyCodeLine{01224 }
\DoxyCodeLine{01225   QMenu *menu             = \textcolor{keyword}{new} QMenu(\textcolor{keyword}{this});}
\DoxyCodeLine{01226   QAction *setStartMarker = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Set Start Marker"{}}));}
\DoxyCodeLine{01227   connect(setStartMarker, SIGNAL(triggered()), SLOT(onSetStartMarker()));}
\DoxyCodeLine{01228   QAction *setStopMarker = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Set Stop Marker"{}}));}
\DoxyCodeLine{01229   connect(setStopMarker, SIGNAL(triggered()), SLOT(onSetStopMarker()));}
\DoxyCodeLine{01230 }
\DoxyCodeLine{01231   QAction *setAutoMarkers = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Set Auto Markers"{}}));}
\DoxyCodeLine{01232   connect(setAutoMarkers, SIGNAL(triggered()), SLOT(onSetAutoMarkers()));}
\DoxyCodeLine{01233   setAutoMarkers-\/>setEnabled(canSetAutoMarkers());}
\DoxyCodeLine{01234 }
\DoxyCodeLine{01235   QAction *removeMarkers = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Remove Markers"{}}));}
\DoxyCodeLine{01236   connect(removeMarkers, SIGNAL(triggered()), SLOT(onRemoveMarkers()));}
\DoxyCodeLine{01237 }
\DoxyCodeLine{01238   \textcolor{comment}{// set both the from and to markers at the specified row}}
\DoxyCodeLine{01239   QAction *previewThis = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Preview This"{}}));}
\DoxyCodeLine{01240   connect(previewThis, SIGNAL(triggered()), SLOT(onPreviewThis()));}
\DoxyCodeLine{01241 }
\DoxyCodeLine{01242   menu-\/>addSeparator();}
\DoxyCodeLine{01243 }
\DoxyCodeLine{01244   \textcolor{keywordflow}{if} (Preferences::instance()-\/>isOnionSkinEnabled()) \{}
\DoxyCodeLine{01245     OnioniSkinMaskGUI::addOnionSkinCommand(menu);}
\DoxyCodeLine{01246     menu-\/>addSeparator();}
\DoxyCodeLine{01247   \}}
\DoxyCodeLine{01248 }
\DoxyCodeLine{01249   \mbox{\hyperlink{class_command_manager}{CommandManager}} *cmdManager = CommandManager::instance();}
\DoxyCodeLine{01250 }
\DoxyCodeLine{01251   \textcolor{keywordflow}{if} (!m\_viewer-\/>orientation()-\/>isVerticalTimeline()) \{}
\DoxyCodeLine{01252     menu-\/>addAction(cmdManager-\/>getAction(MI\_ToggleCurrentTimeIndicator));}
\DoxyCodeLine{01253     menu-\/>addSeparator();}
\DoxyCodeLine{01254   \}}
\DoxyCodeLine{01255 }
\DoxyCodeLine{01256   menu-\/>addAction(cmdManager-\/>getAction(MI\_InsertSceneFrame));}
\DoxyCodeLine{01257   menu-\/>addAction(cmdManager-\/>getAction(MI\_RemoveSceneFrame));}
\DoxyCodeLine{01258   menu-\/>addAction(cmdManager-\/>getAction(MI\_InsertGlobalKeyframe));}
\DoxyCodeLine{01259   menu-\/>addAction(cmdManager-\/>getAction(MI\_RemoveGlobalKeyframe));}
\DoxyCodeLine{01260   menu-\/>addAction(cmdManager-\/>getAction(MI\_DrawingSubForward));}
\DoxyCodeLine{01261   menu-\/>addAction(cmdManager-\/>getAction(MI\_DrawingSubBackward));}
\DoxyCodeLine{01262   menu-\/>addSeparator();}
\DoxyCodeLine{01263   menu-\/>addAction(cmdManager-\/>getAction(MI\_ShiftTrace));}
\DoxyCodeLine{01264   menu-\/>addAction(cmdManager-\/>getAction(MI\_EditShift));}
\DoxyCodeLine{01265   menu-\/>addAction(cmdManager-\/>getAction(MI\_NoShift));}
\DoxyCodeLine{01266   menu-\/>addAction(cmdManager-\/>getAction(MI\_ResetShift));}
\DoxyCodeLine{01267 }
\DoxyCodeLine{01268   menu-\/>exec(event-\/>globalPos());}
\DoxyCodeLine{01269 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_row_area_affc07ce15ced3455de4b6152a009ea32}\label{class_xsheet_g_u_i_1_1_row_area_affc07ce15ced3455de4b6152a009ea32}} 
\index{XsheetGUI::RowArea@{XsheetGUI::RowArea}!event@{event}}
\index{event@{event}!XsheetGUI::RowArea@{XsheetGUI::RowArea}}
\doxysubsubsection{\texorpdfstring{event()}{event()}}
{\footnotesize\ttfamily bool Xsheet\+GUI\+::\+Row\+Area\+::event (\begin{DoxyParamCaption}\item[{QEvent $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01326                                  \{}
\DoxyCodeLine{01327   \textcolor{keywordflow}{if} (event-\/>type() == QEvent::ToolTip) \{}
\DoxyCodeLine{01328     \textcolor{keywordflow}{if} (!m\_tooltip.isEmpty())}
\DoxyCodeLine{01329       QToolTip::showText(mapToGlobal(m\_pos), m\_tooltip);}
\DoxyCodeLine{01330     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01331       QToolTip::hideText();}
\DoxyCodeLine{01332   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (event-\/>type() == QEvent::Leave) \{}
\DoxyCodeLine{01333     m\_showOnionToSet = None;}
\DoxyCodeLine{01334   \}}
\DoxyCodeLine{01335   \textcolor{keywordflow}{return} QWidget::event(event);}
\DoxyCodeLine{01336 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_row_area_ac3b8ee5e889f4a96fe4f3663d622877a}\label{class_xsheet_g_u_i_1_1_row_area_ac3b8ee5e889f4a96fe4f3663d622877a}} 
\index{XsheetGUI::RowArea@{XsheetGUI::RowArea}!mouseDoubleClickEvent@{mouseDoubleClickEvent}}
\index{mouseDoubleClickEvent@{mouseDoubleClickEvent}!XsheetGUI::RowArea@{XsheetGUI::RowArea}}
\doxysubsubsection{\texorpdfstring{mouseDoubleClickEvent()}{mouseDoubleClickEvent()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Row\+Area\+::mouse\+Double\+Click\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01299                                                       \{}
\DoxyCodeLine{01300   \textcolor{keywordtype}{int} currentFrame = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}()-\/>getFrame();}
\DoxyCodeLine{01301   \textcolor{keywordtype}{int} row          = m\_viewer-\/>xyToPosition(event-\/>pos()).frame();}
\DoxyCodeLine{01302   QPoint frameAdj  = m\_viewer-\/>getFrameZoomAdjustment();}
\DoxyCodeLine{01303   QPoint topLeft   = m\_viewer-\/>positionToXY(\mbox{\hyperlink{class_cell_position}{CellPosition}}(row, -\/1));}
\DoxyCodeLine{01304   \textcolor{keywordflow}{if} (!m\_viewer-\/>orientation()-\/>isVerticalTimeline())}
\DoxyCodeLine{01305     topLeft.setY(0);}
\DoxyCodeLine{01306   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01307     topLeft.setX(0);}
\DoxyCodeLine{01308   QPoint mouseInCell = \textcolor{keyword}{event}-\/>pos() -\/ topLeft;}
\DoxyCodeLine{01309   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentFrame()-\/>isEditingScene() \&\&}
\DoxyCodeLine{01310       event-\/>buttons() \& Qt::LeftButton \&\&}
\DoxyCodeLine{01311       Preferences::instance()-\/>isOnionSkinEnabled() \&\& row == currentFrame \&\&}
\DoxyCodeLine{01312       m\_viewer-\/>orientation()}
\DoxyCodeLine{01313           -\/>rect(PredefinedRect::ONION)}
\DoxyCodeLine{01314           .translated(-\/frameAdj / 2)}
\DoxyCodeLine{01315           .contains(mouseInCell)) \{}
\DoxyCodeLine{01316     \mbox{\hyperlink{class_t_onion_skin_mask_handle}{TOnionSkinMaskHandle}} *osmh = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_afcdd56d9130b7c39a5227de08a0b65e4}{getCurrentOnionSkin}}();}
\DoxyCodeLine{01317     \mbox{\hyperlink{class_onion_skin_mask}{OnionSkinMask}} osm          = osmh-\/>getOnionSkinMask();}
\DoxyCodeLine{01318     osm.enable(!osm.isEnabled());}
\DoxyCodeLine{01319     osmh-\/>setOnionSkinMask(osm);}
\DoxyCodeLine{01320     osmh-\/>notifyOnionSkinMaskChanged();}
\DoxyCodeLine{01321   \}}
\DoxyCodeLine{01322 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_row_area_a76a7d2dbffc917e854e9c0baa2a78b17}\label{class_xsheet_g_u_i_1_1_row_area_a76a7d2dbffc917e854e9c0baa2a78b17}} 
\index{XsheetGUI::RowArea@{XsheetGUI::RowArea}!mouseMoveEvent@{mouseMoveEvent}}
\index{mouseMoveEvent@{mouseMoveEvent}!XsheetGUI::RowArea@{XsheetGUI::RowArea}}
\doxysubsubsection{\texorpdfstring{mouseMoveEvent()}{mouseMoveEvent()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Row\+Area\+::mouse\+Move\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01046                                                \{}
\DoxyCodeLine{01047   \textcolor{keyword}{const} \mbox{\hyperlink{class_orientation}{Orientation}} *o = m\_viewer-\/>orientation();}
\DoxyCodeLine{01048   m\_viewer-\/>setQtModifiers(event-\/>modifiers());}
\DoxyCodeLine{01049   QPoint pos = \textcolor{keyword}{event}-\/>pos();}
\DoxyCodeLine{01050 }
\DoxyCodeLine{01051   \textcolor{comment}{// pan by middle-\/drag}}
\DoxyCodeLine{01052   \textcolor{keywordflow}{if} (m\_isPanning) \{}
\DoxyCodeLine{01053     QPoint delta = m\_pos -\/ pos;}
\DoxyCodeLine{01054     \textcolor{keywordflow}{if} (o-\/>isVerticalTimeline())}
\DoxyCodeLine{01055       delta.setX(0);}
\DoxyCodeLine{01056     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01057       delta.setY(0);}
\DoxyCodeLine{01058     m\_viewer-\/>scroll(delta);}
\DoxyCodeLine{01059     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01060   \}}
\DoxyCodeLine{01061 }
\DoxyCodeLine{01062   m\_row = m\_viewer-\/>xyToPosition(pos).frame();}
\DoxyCodeLine{01063   \textcolor{keywordtype}{int} x = pos.x();}
\DoxyCodeLine{01064 }
\DoxyCodeLine{01065   \textcolor{keywordflow}{if} ((event-\/>buttons() \& Qt::LeftButton) != 0 \&\&}
\DoxyCodeLine{01066       !visibleRegion().contains(pos)) \{}
\DoxyCodeLine{01067     QRect bounds = visibleRegion().boundingRect();}
\DoxyCodeLine{01068     \textcolor{keywordflow}{if} (o-\/>isVerticalTimeline())}
\DoxyCodeLine{01069       m\_viewer-\/>setAutoPanSpeed(bounds, QPoint(bounds.left(), pos.y()));}
\DoxyCodeLine{01070     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01071       m\_viewer-\/>setAutoPanSpeed(bounds, QPoint(pos.x(), bounds.top()));}
\DoxyCodeLine{01072   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01073     m\_viewer-\/>stopAutoPan();}
\DoxyCodeLine{01074 }
\DoxyCodeLine{01075   m\_pos = pos;}
\DoxyCodeLine{01076 }
\DoxyCodeLine{01077   m\_viewer-\/>dragToolDrag(event);}
\DoxyCodeLine{01078 }
\DoxyCodeLine{01079   m\_showOnionToSet = None;}
\DoxyCodeLine{01080 }
\DoxyCodeLine{01081   \textcolor{keywordflow}{if} (getDragTool()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01082 }
\DoxyCodeLine{01083   \textcolor{keywordtype}{int} currentRow  = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}()-\/>getFrame();}
\DoxyCodeLine{01084   \textcolor{keywordtype}{int} row         = m\_viewer-\/>xyToPosition(m\_pos).frame();}
\DoxyCodeLine{01085   QPoint frameAdj = m\_viewer-\/>getFrameZoomAdjustment();}
\DoxyCodeLine{01086   QPoint topLeft  = m\_viewer-\/>positionToXY(\mbox{\hyperlink{class_cell_position}{CellPosition}}(row, -\/1));}
\DoxyCodeLine{01087   \textcolor{keywordflow}{if} (!m\_viewer-\/>orientation()-\/>isVerticalTimeline())}
\DoxyCodeLine{01088     topLeft.setY(0);}
\DoxyCodeLine{01089   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01090     topLeft.setX(0);}
\DoxyCodeLine{01091   QPoint mouseInCell = \textcolor{keyword}{event}-\/>pos() -\/ topLeft;}
\DoxyCodeLine{01092   \textcolor{keywordflow}{if} (row < 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01093 }
\DoxyCodeLine{01094   m\_tooltip = tr(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01095 }
\DoxyCodeLine{01096   \textcolor{comment}{// whether to show ability to move the shift and trace ghost frame}}
\DoxyCodeLine{01097   \textcolor{keywordflow}{if} (CommandManager::instance()-\/>getAction(MI\_ShiftTrace)-\/>isChecked()) \{}
\DoxyCodeLine{01098     \textcolor{keywordflow}{if} (o-\/>rect(PredefinedRect::SHIFTTRACE\_DOT\_AREA)}
\DoxyCodeLine{01099             .adjusted(0, 0, -\/frameAdj.x(), -\/frameAdj.y())}
\DoxyCodeLine{01100             .contains(mouseInCell)) \{}
\DoxyCodeLine{01101       m\_showOnionToSet = ShiftTraceGhost;}
\DoxyCodeLine{01102 }
\DoxyCodeLine{01103       \mbox{\hyperlink{class_onion_skin_mask}{OnionSkinMask}} osMask =}
\DoxyCodeLine{01104           \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_afcdd56d9130b7c39a5227de08a0b65e4}{getCurrentOnionSkin}}()-\/>getOnionSkinMask();}
\DoxyCodeLine{01105       \textcolor{keywordtype}{int} prevOffset    = osMask.getShiftTraceGhostFrameOffset(0);}
\DoxyCodeLine{01106       \textcolor{keywordtype}{int} forwardOffset = osMask.getShiftTraceGhostFrameOffset(1);}
\DoxyCodeLine{01107       \textcolor{keywordflow}{if} (row == currentRow)}
\DoxyCodeLine{01108         m\_tooltip =}
\DoxyCodeLine{01109             tr(\textcolor{stringliteral}{"{}Click to Reset Shift \& Trace Markers to Neighbor Frames\(\backslash\)nHold "{}}}
\DoxyCodeLine{01110                \textcolor{stringliteral}{"{}F2 Key on the Viewer to Show This Frame Only"{}});}
\DoxyCodeLine{01111       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (row == currentRow + prevOffset)}
\DoxyCodeLine{01112         m\_tooltip =}
\DoxyCodeLine{01113             tr(\textcolor{stringliteral}{"{}Click to Hide This Frame from Shift \& Trace\(\backslash\)nHold F1 Key on "{}}}
\DoxyCodeLine{01114                \textcolor{stringliteral}{"{}the Viewer to Show This Frame Only"{}});}
\DoxyCodeLine{01115       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (row == currentRow + forwardOffset)}
\DoxyCodeLine{01116         m\_tooltip =}
\DoxyCodeLine{01117             tr(\textcolor{stringliteral}{"{}Click to Hide This Frame from Shift \& Trace\(\backslash\)nHold F3 Key on "{}}}
\DoxyCodeLine{01118                \textcolor{stringliteral}{"{}the Viewer to Show This Frame Only"{}});}
\DoxyCodeLine{01119       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01120         m\_tooltip = tr(\textcolor{stringliteral}{"{}Click to Move Shift \& Trace Marker"{}});}
\DoxyCodeLine{01121     \}}
\DoxyCodeLine{01122   \}}
\DoxyCodeLine{01123   \textcolor{comment}{// whether to show ability to set onion marks}}
\DoxyCodeLine{01124   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (Preferences::instance()-\/>isOnionSkinEnabled() \&\& row != currentRow) \{}
\DoxyCodeLine{01125     \textcolor{keywordflow}{if} (o-\/>rect(PredefinedRect::ONION\_FIXED\_DOT\_AREA)}
\DoxyCodeLine{01126             .adjusted(0, 0, -\/frameAdj.x(), -\/frameAdj.y())}
\DoxyCodeLine{01127             .contains(mouseInCell))}
\DoxyCodeLine{01128       m\_showOnionToSet = Fos;}
\DoxyCodeLine{01129     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (o-\/>rect(PredefinedRect::ONION\_DOT\_AREA)}
\DoxyCodeLine{01130                  .adjusted(0, 0, -\/frameAdj.x(), -\/frameAdj.y())}
\DoxyCodeLine{01131                  .contains(mouseInCell))}
\DoxyCodeLine{01132       m\_showOnionToSet = Mos;}
\DoxyCodeLine{01133   \}}
\DoxyCodeLine{01134 }
\DoxyCodeLine{01135   \textcolor{comment}{/*-\/ For showing the pinned center keys -\/*/}}
\DoxyCodeLine{01136   \textcolor{keywordtype}{bool} isOnPinnedCenterKey = \textcolor{keyword}{false};}
\DoxyCodeLine{01137   \textcolor{keywordtype}{bool} isRootBonePinned;}
\DoxyCodeLine{01138   \textcolor{keywordtype}{int} pinnedCenterColumnId = -\/1;}
\DoxyCodeLine{01139   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentTool()-\/>getTool()-\/>getName() == T\_Skeleton \&\&}
\DoxyCodeLine{01140       o-\/>rect(PredefinedRect::PINNED\_CENTER\_KEY)}
\DoxyCodeLine{01141           .translated(-\/frameAdj / 2)}
\DoxyCodeLine{01142           .contains(mouseInCell)) \{}
\DoxyCodeLine{01143     \textcolor{keywordtype}{int} col      = m\_viewer-\/>getCurrentColumn();}
\DoxyCodeLine{01144     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = m\_viewer-\/>getXsheet();}
\DoxyCodeLine{01145     \textcolor{keywordflow}{if} (col >= 0 \&\& xsh \&\& !xsh-\/>\mbox{\hyperlink{class_t_xsheet_a83aecebd1b7714017a64e2b786e91a4e}{isColumnEmpty}}(col)) \{}
\DoxyCodeLine{01146       \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} ancestorId =}
\DoxyCodeLine{01147           getAncestor(xsh, TStageObjectId::ColumnId(col));}
\DoxyCodeLine{01148       \textcolor{keywordtype}{int} columnCount = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a17464dc5617cf87a46f03e1a52d36cc1}{getColumnCount}}();}
\DoxyCodeLine{01149       \textcolor{comment}{/*-\/ Check if the current row is the pinned center key-\/*/}}
\DoxyCodeLine{01150       \textcolor{keywordtype}{int} prev\_pinnedCol =}
\DoxyCodeLine{01151           (row == 0) ? -\/2}
\DoxyCodeLine{01152                      : getPinnedColumnId(row -\/ 1, xsh, ancestorId, columnCount);}
\DoxyCodeLine{01153       \textcolor{keywordtype}{int} pinnedCol = getPinnedColumnId(row, xsh, ancestorId, columnCount);}
\DoxyCodeLine{01154       \textcolor{keywordflow}{if} (pinnedCol != prev\_pinnedCol) \{}
\DoxyCodeLine{01155         isOnPinnedCenterKey = \textcolor{keyword}{true};}
\DoxyCodeLine{01156         isRootBonePinned    = (pinnedCol == -\/1);}
\DoxyCodeLine{01157         pinnedCenterColumnId =}
\DoxyCodeLine{01158             (isRootBonePinned) ? ancestorId.getIndex() : pinnedCol;}
\DoxyCodeLine{01159       \}}
\DoxyCodeLine{01160     \}}
\DoxyCodeLine{01161   \}}
\DoxyCodeLine{01162 }
\DoxyCodeLine{01163   update();}
\DoxyCodeLine{01164 }
\DoxyCodeLine{01165   QPoint base0 = m\_viewer-\/>positionToXY(\mbox{\hyperlink{class_cell_position}{CellPosition}}(m\_r0, -\/1));}
\DoxyCodeLine{01166   \textcolor{keywordflow}{if} (!m\_viewer-\/>orientation()-\/>isVerticalTimeline())}
\DoxyCodeLine{01167     base0.setY(0);}
\DoxyCodeLine{01168   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01169     base0.setX(0);}
\DoxyCodeLine{01170   QPoint base1 = m\_viewer-\/>positionToXY(\mbox{\hyperlink{class_cell_position}{CellPosition}}(m\_r1, -\/1));}
\DoxyCodeLine{01171   \textcolor{keywordflow}{if} (!m\_viewer-\/>orientation()-\/>isVerticalTimeline())}
\DoxyCodeLine{01172     base1.setY(0);}
\DoxyCodeLine{01173   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01174     base1.setX(0);}
\DoxyCodeLine{01175   QPainterPath startArrow =}
\DoxyCodeLine{01176       o-\/>path(PredefinedPath::BEGIN\_PLAY\_RANGE).translated(base0);}
\DoxyCodeLine{01177   QPainterPath endArrow =}
\DoxyCodeLine{01178       o-\/>path(PredefinedPath::END\_PLAY\_RANGE).translated(base1);}
\DoxyCodeLine{01179 }
\DoxyCodeLine{01180   \textcolor{keywordflow}{if} (!m\_tooltip.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01181   \textcolor{keywordflow}{if} (startArrow.contains(m\_pos))}
\DoxyCodeLine{01182     m\_tooltip = tr(\textcolor{stringliteral}{"{}Playback Start Marker"{}});}
\DoxyCodeLine{01183   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (endArrow.contains(m\_pos))}
\DoxyCodeLine{01184     m\_tooltip = tr(\textcolor{stringliteral}{"{}Playback End Marker"{}});}
\DoxyCodeLine{01185   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (isOnPinnedCenterKey)}
\DoxyCodeLine{01186     m\_tooltip = tr(\textcolor{stringliteral}{"{}Pinned Center : Col\%1\%2"{}})}
\DoxyCodeLine{01187                     .arg(pinnedCenterColumnId + 1)}
\DoxyCodeLine{01188                     .arg((isRootBonePinned) ? \textcolor{stringliteral}{"{} (Root)"{}} : \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01189   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (row == currentRow) \{}
\DoxyCodeLine{01190     \textcolor{keywordflow}{if} (Preferences::instance()-\/>isOnionSkinEnabled() \&\&}
\DoxyCodeLine{01191         o-\/>rect(PredefinedRect::ONION)}
\DoxyCodeLine{01192             .translated(-\/frameAdj / 2)}
\DoxyCodeLine{01193             .contains(mouseInCell))}
\DoxyCodeLine{01194       m\_tooltip = tr(\textcolor{stringliteral}{"{}Double Click to Toggle Onion Skin"{}});}
\DoxyCodeLine{01195     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01196       m\_tooltip = tr(\textcolor{stringliteral}{"{}Current Frame"{}});}
\DoxyCodeLine{01197   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_showOnionToSet == Fos)}
\DoxyCodeLine{01198     m\_tooltip = tr(\textcolor{stringliteral}{"{}Fixed Onion Skin Toggle"{}});}
\DoxyCodeLine{01199   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_showOnionToSet == Mos)}
\DoxyCodeLine{01200     m\_tooltip = tr(\textcolor{stringliteral}{"{}Relative Onion Skin Toggle"{}});}
\DoxyCodeLine{01201 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_row_area_ad2b8b53e4cce01b1e65a38fb556ad220}\label{class_xsheet_g_u_i_1_1_row_area_ad2b8b53e4cce01b1e65a38fb556ad220}} 
\index{XsheetGUI::RowArea@{XsheetGUI::RowArea}!mousePressEvent@{mousePressEvent}}
\index{mousePressEvent@{mousePressEvent}!XsheetGUI::RowArea@{XsheetGUI::RowArea}}
\doxysubsubsection{\texorpdfstring{mousePressEvent()}{mousePressEvent()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Row\+Area\+::mouse\+Press\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00921                                                 \{}
\DoxyCodeLine{00922   \textcolor{keyword}{const} \mbox{\hyperlink{class_orientation}{Orientation}} *o = m\_viewer-\/>orientation();}
\DoxyCodeLine{00923 }
\DoxyCodeLine{00924   m\_viewer-\/>setQtModifiers(event-\/>modifiers());}
\DoxyCodeLine{00925   \textcolor{keywordflow}{if} (event-\/>button() == Qt::LeftButton) \{}
\DoxyCodeLine{00926     \textcolor{keywordtype}{bool} frameAreaIsClicked = \textcolor{keyword}{false};}
\DoxyCodeLine{00927 }
\DoxyCodeLine{00928     \mbox{\hyperlink{class_t_app}{TApp}} *app    = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}();}
\DoxyCodeLine{00929     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}();}
\DoxyCodeLine{00930     \mbox{\hyperlink{class_t_point_t}{TPoint}} pos(event-\/>pos().x(), event-\/>pos().y());}
\DoxyCodeLine{00931     \textcolor{keywordtype}{int} currentFrame = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}()-\/>getFrame();}
\DoxyCodeLine{00932 }
\DoxyCodeLine{00933     \textcolor{keywordtype}{int} row        = m\_viewer-\/>xyToPosition(pos).frame();}
\DoxyCodeLine{00934     QPoint topLeft = m\_viewer-\/>positionToXY(\mbox{\hyperlink{class_cell_position}{CellPosition}}(row, -\/1));}
\DoxyCodeLine{00935     \textcolor{keywordflow}{if} (!m\_viewer-\/>orientation()-\/>isVerticalTimeline())}
\DoxyCodeLine{00936       topLeft.setY(0);}
\DoxyCodeLine{00937     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00938       topLeft.setX(0);}
\DoxyCodeLine{00939     QPoint mouseInCell = \textcolor{keyword}{event}-\/>pos() -\/ topLeft;}
\DoxyCodeLine{00940     QPoint frameAdj    = m\_viewer-\/>getFrameZoomAdjustment();}
\DoxyCodeLine{00941 }
\DoxyCodeLine{00942     \textcolor{keywordflow}{if} (CommandManager::instance()-\/>getAction(MI\_ShiftTrace)-\/>isChecked() \&\&}
\DoxyCodeLine{00943         o-\/>rect(PredefinedRect::SHIFTTRACE\_DOT\_AREA)}
\DoxyCodeLine{00944             .adjusted(0, 0, -\/frameAdj.x(), -\/frameAdj.y())}
\DoxyCodeLine{00945             .contains(mouseInCell)) \{}
\DoxyCodeLine{00946       \textcolor{comment}{// Reset ghosts to neighbor frames}}
\DoxyCodeLine{00947       \textcolor{keywordflow}{if} (row == currentFrame)}
\DoxyCodeLine{00948         OnioniSkinMaskGUI::resetShiftTraceFrameOffset();}
\DoxyCodeLine{00949       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00950         \mbox{\hyperlink{class_onion_skin_mask}{OnionSkinMask}} osMask =}
\DoxyCodeLine{00951             \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_afcdd56d9130b7c39a5227de08a0b65e4}{getCurrentOnionSkin}}()-\/>getOnionSkinMask();}
\DoxyCodeLine{00952         \textcolor{keywordtype}{int} prevOffset    = osMask.getShiftTraceGhostFrameOffset(0);}
\DoxyCodeLine{00953         \textcolor{keywordtype}{int} forwardOffset = osMask.getShiftTraceGhostFrameOffset(1);}
\DoxyCodeLine{00954         \textcolor{comment}{// Hide previous ghost}}
\DoxyCodeLine{00955         \textcolor{keywordflow}{if} (row == currentFrame + prevOffset)}
\DoxyCodeLine{00956           osMask.setShiftTraceGhostFrameOffset(0, 0);}
\DoxyCodeLine{00957         \textcolor{comment}{// Hide forward ghost}}
\DoxyCodeLine{00958         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (row == currentFrame + forwardOffset)}
\DoxyCodeLine{00959           osMask.setShiftTraceGhostFrameOffset(1, 0);}
\DoxyCodeLine{00960         \textcolor{comment}{// Move previous ghost}}
\DoxyCodeLine{00961         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (row < currentFrame)}
\DoxyCodeLine{00962           osMask.setShiftTraceGhostFrameOffset(0, row -\/ currentFrame);}
\DoxyCodeLine{00963         \textcolor{comment}{// Move forward ghost}}
\DoxyCodeLine{00964         \textcolor{keywordflow}{else}}
\DoxyCodeLine{00965           osMask.setShiftTraceGhostFrameOffset(1, row -\/ currentFrame);}
\DoxyCodeLine{00966         \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_afcdd56d9130b7c39a5227de08a0b65e4}{getCurrentOnionSkin}}()-\/>setOnionSkinMask(osMask);}
\DoxyCodeLine{00967       \}}
\DoxyCodeLine{00968       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_afcdd56d9130b7c39a5227de08a0b65e4}{getCurrentOnionSkin}}()-\/>notifyOnionSkinMaskChanged();}
\DoxyCodeLine{00969       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00970     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!CommandManager::instance()}
\DoxyCodeLine{00971                     -\/>getAction(MI\_ShiftTrace)}
\DoxyCodeLine{00972                     -\/>isChecked() \&\&}
\DoxyCodeLine{00973                Preferences::instance()-\/>isOnionSkinEnabled() \&\&}
\DoxyCodeLine{00974                o-\/>rect(PredefinedRect::ONION\_AREA)}
\DoxyCodeLine{00975                    .adjusted(0, 0, -\/frameAdj.x(), -\/frameAdj.y())}
\DoxyCodeLine{00976                    .contains(mouseInCell)) \{}
\DoxyCodeLine{00977       \textcolor{keywordflow}{if} (row == currentFrame) \{}
\DoxyCodeLine{00978         setDragTool(}
\DoxyCodeLine{00979             XsheetGUI::DragTool::makeCurrentFrameModifierTool(m\_viewer));}
\DoxyCodeLine{00980         frameAreaIsClicked = \textcolor{keyword}{true};}
\DoxyCodeLine{00981       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (o-\/>rect(PredefinedRect::ONION\_FIXED\_DOT\_AREA)}
\DoxyCodeLine{00982                      .adjusted(0, 0, -\/frameAdj.x(), -\/frameAdj.y())}
\DoxyCodeLine{00983                      .contains(mouseInCell))}
\DoxyCodeLine{00984         setDragTool(XsheetGUI::DragTool::makeKeyOnionSkinMaskModifierTool(}
\DoxyCodeLine{00985             m\_viewer, \textcolor{keyword}{true}));}
\DoxyCodeLine{00986       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (o-\/>rect(PredefinedRect::ONION\_DOT\_AREA)}
\DoxyCodeLine{00987                    .adjusted(0, 0, -\/frameAdj.x(), -\/frameAdj.y())}
\DoxyCodeLine{00988                    .contains(mouseInCell))}
\DoxyCodeLine{00989         setDragTool(XsheetGUI::DragTool::makeKeyOnionSkinMaskModifierTool(}
\DoxyCodeLine{00990             m\_viewer, \textcolor{keyword}{false}));}
\DoxyCodeLine{00991     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00992       \textcolor{keywordtype}{int} playR0, playR1, step;}
\DoxyCodeLine{00993       XsheetGUI::getPlayRange(playR0, playR1, step);}
\DoxyCodeLine{00994 }
\DoxyCodeLine{00995       \textcolor{keywordtype}{bool} playRangeEnabled = playR0 <= playR1;}
\DoxyCodeLine{00996       \textcolor{keywordflow}{if} (!playRangeEnabled) \{}
\DoxyCodeLine{00997         \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = m\_viewer-\/>getXsheet();}
\DoxyCodeLine{00998         playR1       = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a12a62da7dc04395088112e492d73374f}{getFrameCount}}() -\/ 1;}
\DoxyCodeLine{00999         playR0       = 0;}
\DoxyCodeLine{01000       \}}
\DoxyCodeLine{01001 }
\DoxyCodeLine{01002       \textcolor{keywordflow}{if} (playR1 == -\/1) \{  \textcolor{comment}{// getFrameCount = 0 i.e. xsheet is empty}}
\DoxyCodeLine{01003         setDragTool(}
\DoxyCodeLine{01004             XsheetGUI::DragTool::makeCurrentFrameModifierTool(m\_viewer));}
\DoxyCodeLine{01005         frameAreaIsClicked = \textcolor{keyword}{true};}
\DoxyCodeLine{01006       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (o-\/>rect(PredefinedRect::PLAY\_RANGE)}
\DoxyCodeLine{01007                      .adjusted(0, 0, -\/frameAdj.x(), -\/frameAdj.y())}
\DoxyCodeLine{01008                      .contains(mouseInCell) \&\&}
\DoxyCodeLine{01009                  (row == playR0 || row == playR1)) \{}
\DoxyCodeLine{01010         \textcolor{keywordflow}{if} (!playRangeEnabled) XsheetGUI::setPlayRange(playR0, playR1, step);}
\DoxyCodeLine{01011         setDragTool(XsheetGUI::DragTool::makePlayRangeModifierTool(m\_viewer));}
\DoxyCodeLine{01012       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01013         setDragTool(}
\DoxyCodeLine{01014             XsheetGUI::DragTool::makeCurrentFrameModifierTool(m\_viewer));}
\DoxyCodeLine{01015         frameAreaIsClicked = \textcolor{keyword}{true};}
\DoxyCodeLine{01016       \}}
\DoxyCodeLine{01017     \}}
\DoxyCodeLine{01018     \textcolor{comment}{// when shift+click the row area, select a single row region in the cell}}
\DoxyCodeLine{01019     \textcolor{comment}{// area}}
\DoxyCodeLine{01020     \textcolor{keywordflow}{if} (frameAreaIsClicked \&\& 0 != (event-\/>modifiers() \& Qt::ShiftModifier)) \{}
\DoxyCodeLine{01021       \textcolor{keywordtype}{int} filledCol;}
\DoxyCodeLine{01022       \textcolor{keywordflow}{for} (filledCol = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a17464dc5617cf87a46f03e1a52d36cc1}{getColumnCount}}() -\/ 1; filledCol >= 0; filledCol-\/-\/) \{}
\DoxyCodeLine{01023         \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *currentColumn = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(filledCol);}
\DoxyCodeLine{01024         \textcolor{keywordflow}{if} (!currentColumn) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01025         \textcolor{keywordflow}{if} (!currentColumn-\/>isEmpty()) \textcolor{keywordflow}{break};}
\DoxyCodeLine{01026       \}}
\DoxyCodeLine{01027 }
\DoxyCodeLine{01028       m\_viewer-\/>getCellSelection()-\/>selectNone();}
\DoxyCodeLine{01029       m\_viewer-\/>getCellSelection()-\/>\mbox{\hyperlink{class_t_cell_selection_ac081c8305a9b9269fbf82eb0c9e06bc3}{selectCells}}(row, 0, row,}
\DoxyCodeLine{01030                                                 std::max(0, filledCol));}
\DoxyCodeLine{01031       m\_viewer-\/>updateCellRowAree();}
\DoxyCodeLine{01032     \}}
\DoxyCodeLine{01033 }
\DoxyCodeLine{01034     m\_viewer-\/>dragToolClick(event);}
\DoxyCodeLine{01035     \textcolor{keyword}{event}-\/>accept();}
\DoxyCodeLine{01036   \}  \textcolor{comment}{// left-\/click}}
\DoxyCodeLine{01037      \textcolor{comment}{// pan by middle-\/drag}}
\DoxyCodeLine{01038   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (event-\/>button() == Qt::MidButton) \{}
\DoxyCodeLine{01039     m\_pos       = \textcolor{keyword}{event}-\/>pos();}
\DoxyCodeLine{01040     m\_isPanning = \textcolor{keyword}{true};}
\DoxyCodeLine{01041   \}}
\DoxyCodeLine{01042 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_row_area_acb38c69b0586b15d2a28f739000a8a75}\label{class_xsheet_g_u_i_1_1_row_area_acb38c69b0586b15d2a28f739000a8a75}} 
\index{XsheetGUI::RowArea@{XsheetGUI::RowArea}!mouseReleaseEvent@{mouseReleaseEvent}}
\index{mouseReleaseEvent@{mouseReleaseEvent}!XsheetGUI::RowArea@{XsheetGUI::RowArea}}
\doxysubsubsection{\texorpdfstring{mouseReleaseEvent()}{mouseReleaseEvent()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Row\+Area\+::mouse\+Release\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01205                                                   \{}
\DoxyCodeLine{01206   m\_viewer-\/>setQtModifiers(0);}
\DoxyCodeLine{01207   m\_viewer-\/>stopAutoPan();}
\DoxyCodeLine{01208   m\_isPanning = \textcolor{keyword}{false};}
\DoxyCodeLine{01209   m\_viewer-\/>dragToolRelease(event);}
\DoxyCodeLine{01210 }
\DoxyCodeLine{01211   \mbox{\hyperlink{class_t_point_t}{TPoint}} pos(event-\/>pos().x(), event-\/>pos().y());}
\DoxyCodeLine{01212 }
\DoxyCodeLine{01213   \textcolor{keywordtype}{int} row = m\_viewer-\/>xyToPosition(pos).frame();}
\DoxyCodeLine{01214   \textcolor{keywordflow}{if} (m\_playRangeActiveInMousePress \&\& row == m\_mousePressRow \&\&}
\DoxyCodeLine{01215       (13 <= pos.x \&\& pos.x <= 26 \&\& (row == m\_r0 || row == m\_r1)))}
\DoxyCodeLine{01216     onRemoveMarkers();}
\DoxyCodeLine{01217 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_row_area_aa025819be58645898a774f13bd6601e5}\label{class_xsheet_g_u_i_1_1_row_area_aa025819be58645898a774f13bd6601e5}} 
\index{XsheetGUI::RowArea@{XsheetGUI::RowArea}!onPreviewThis@{onPreviewThis}}
\index{onPreviewThis@{onPreviewThis}!XsheetGUI::RowArea@{XsheetGUI::RowArea}}
\doxysubsubsection{\texorpdfstring{onPreviewThis}{onPreviewThis}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Row\+Area\+::on\+Preview\+This (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01377                             \{}
\DoxyCodeLine{01378   assert(m\_row >= 0);}
\DoxyCodeLine{01379   \textcolor{keywordtype}{int} r0, r1, step;}
\DoxyCodeLine{01380   getPlayRange(r0, r1, step);}
\DoxyCodeLine{01381   setPlayRange(m\_row, m\_row, step);}
\DoxyCodeLine{01382   update();}
\DoxyCodeLine{01383 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_row_area_a0ad33e6c101f27e28a971071dbbf5ddb}\label{class_xsheet_g_u_i_1_1_row_area_a0ad33e6c101f27e28a971071dbbf5ddb}} 
\index{XsheetGUI::RowArea@{XsheetGUI::RowArea}!onRemoveMarkers@{onRemoveMarkers}}
\index{onRemoveMarkers@{onRemoveMarkers}!XsheetGUI::RowArea@{XsheetGUI::RowArea}}
\doxysubsubsection{\texorpdfstring{onRemoveMarkers}{onRemoveMarkers}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Row\+Area\+::on\+Remove\+Markers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01401                               \{}
\DoxyCodeLine{01402   \textcolor{keywordtype}{int} step;}
\DoxyCodeLine{01403   XsheetGUI::getPlayRange(m\_r0, m\_r1, step);}
\DoxyCodeLine{01404   XsheetGUI::setPlayRange(0, -\/1, step);}
\DoxyCodeLine{01405   update();}
\DoxyCodeLine{01406 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_row_area_a1480bb9a8d998de6f96cab97c3993621}\label{class_xsheet_g_u_i_1_1_row_area_a1480bb9a8d998de6f96cab97c3993621}} 
\index{XsheetGUI::RowArea@{XsheetGUI::RowArea}!onSetAutoMarkers@{onSetAutoMarkers}}
\index{onSetAutoMarkers@{onSetAutoMarkers}!XsheetGUI::RowArea@{XsheetGUI::RowArea}}
\doxysubsubsection{\texorpdfstring{onSetAutoMarkers}{onSetAutoMarkers}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Row\+Area\+::on\+Set\+Auto\+Markers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01387                                \{}
\DoxyCodeLine{01388   \textcolor{keywordtype}{int} currentColumn = m\_viewer-\/>getCurrentColumn();}
\DoxyCodeLine{01389 }
\DoxyCodeLine{01390   \textcolor{keywordtype}{int} top    = getNonEmptyCell(m\_row, currentColumn, Direction::up);}
\DoxyCodeLine{01391   \textcolor{keywordtype}{int} bottom = getNonEmptyCell(m\_row, currentColumn, Direction::down);}
\DoxyCodeLine{01392 }
\DoxyCodeLine{01393   \textcolor{keywordtype}{int} r0, r1, step;}
\DoxyCodeLine{01394   getPlayRange(r0, r1, step);}
\DoxyCodeLine{01395   setPlayRange(top, bottom, step);}
\DoxyCodeLine{01396   update();}
\DoxyCodeLine{01397 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_row_area_addb01c14efcc31704107ec4796a53db1}\label{class_xsheet_g_u_i_1_1_row_area_addb01c14efcc31704107ec4796a53db1}} 
\index{XsheetGUI::RowArea@{XsheetGUI::RowArea}!onSetStartMarker@{onSetStartMarker}}
\index{onSetStartMarker@{onSetStartMarker}!XsheetGUI::RowArea@{XsheetGUI::RowArea}}
\doxysubsubsection{\texorpdfstring{onSetStartMarker}{onSetStartMarker}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Row\+Area\+::on\+Set\+Start\+Marker (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01363                                \{}
\DoxyCodeLine{01364   setMarker(0);}
\DoxyCodeLine{01365   update();}
\DoxyCodeLine{01366 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_row_area_ab3aee617bb7a1665d0139d8e5a3640c2}\label{class_xsheet_g_u_i_1_1_row_area_ab3aee617bb7a1665d0139d8e5a3640c2}} 
\index{XsheetGUI::RowArea@{XsheetGUI::RowArea}!onSetStopMarker@{onSetStopMarker}}
\index{onSetStopMarker@{onSetStopMarker}!XsheetGUI::RowArea@{XsheetGUI::RowArea}}
\doxysubsubsection{\texorpdfstring{onSetStopMarker}{onSetStopMarker}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Row\+Area\+::on\+Set\+Stop\+Marker (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01370                               \{}
\DoxyCodeLine{01371   setMarker(1);}
\DoxyCodeLine{01372   update();}
\DoxyCodeLine{01373 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_row_area_a8e27c72f2d09c090a0dde8812d194cba}\label{class_xsheet_g_u_i_1_1_row_area_a8e27c72f2d09c090a0dde8812d194cba}} 
\index{XsheetGUI::RowArea@{XsheetGUI::RowArea}!paintEvent@{paintEvent}}
\index{paintEvent@{paintEvent}!XsheetGUI::RowArea@{XsheetGUI::RowArea}}
\doxysubsubsection{\texorpdfstring{paintEvent()}{paintEvent()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Row\+Area\+::paint\+Event (\begin{DoxyParamCaption}\item[{QPaint\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00859                                            \{}
\DoxyCodeLine{00860   QRect toBeUpdated = \textcolor{keyword}{event}-\/>rect();}
\DoxyCodeLine{00861 }
\DoxyCodeLine{00862   QPainter p(\textcolor{keyword}{this});}
\DoxyCodeLine{00863 }
\DoxyCodeLine{00864   \mbox{\hyperlink{class_cell_range}{CellRange}} cellRange = m\_viewer-\/>xyRectToRange(toBeUpdated);}
\DoxyCodeLine{00865   \textcolor{keywordtype}{int} r0, r1;  \textcolor{comment}{// range of visible rows}}
\DoxyCodeLine{00866   r0 = cellRange.from().frame();}
\DoxyCodeLine{00867   r1 = cellRange.to().frame();}
\DoxyCodeLine{00868 }
\DoxyCodeLine{00869   p.setClipRect(toBeUpdated);}
\DoxyCodeLine{00870 }
\DoxyCodeLine{00871   \textcolor{comment}{// fill background}}
\DoxyCodeLine{00872   p.fillRect(toBeUpdated, m\_viewer-\/>getBGColor());}
\DoxyCodeLine{00873 }
\DoxyCodeLine{00874   drawPlayRangeBackground(p, r0, r1);}
\DoxyCodeLine{00875 }
\DoxyCodeLine{00876   \textcolor{keywordflow}{if} (Preferences::instance()-\/>isOnionSkinEnabled())}
\DoxyCodeLine{00877     drawOnionSkinBackground(p, r0, r1);}
\DoxyCodeLine{00878 }
\DoxyCodeLine{00879   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentFrame()-\/>isEditingScene())}
\DoxyCodeLine{00880     \textcolor{comment}{// current frame}}
\DoxyCodeLine{00881     drawCurrentRowGadget(p, r0, r1);}
\DoxyCodeLine{00882 }
\DoxyCodeLine{00883 \textcolor{preprocessor}{\#if defined(x64)}}
\DoxyCodeLine{00884   \mbox{\hyperlink{class_stop_motion}{StopMotion}} *stopMotion = StopMotion::instance();}
\DoxyCodeLine{00885   \textcolor{keywordflow}{if} (stopMotion-\/>getPlaceOnXSheet() \&\& (stopMotion-\/>m\_liveViewStatus > 0)) \{}
\DoxyCodeLine{00886     drawStopMotionCameraIndicator(p);}
\DoxyCodeLine{00887   \}}
\DoxyCodeLine{00888 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00889 }
\DoxyCodeLine{00890   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentFrame()-\/>isEditingScene() \&\&}
\DoxyCodeLine{00891       Preferences::instance()-\/>isCurrentTimelineIndicatorEnabled() \&\&}
\DoxyCodeLine{00892       !m\_viewer-\/>orientation()-\/>isVerticalTimeline())}
\DoxyCodeLine{00893     drawCurrentTimeLine(p);}
\DoxyCodeLine{00894 }
\DoxyCodeLine{00895   drawRows(p, r0, r1);}
\DoxyCodeLine{00896 }
\DoxyCodeLine{00897   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentFrame()-\/>isEditingScene()) \{}
\DoxyCodeLine{00898     \textcolor{keywordflow}{if} (CommandManager::instance()-\/>getAction(MI\_ShiftTrace)-\/>isChecked())}
\DoxyCodeLine{00899       drawShiftTraceMarker(p);}
\DoxyCodeLine{00900     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (Preferences::instance()-\/>isOnionSkinEnabled())}
\DoxyCodeLine{00901       drawOnionSkinSelection(p);}
\DoxyCodeLine{00902     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (Preferences::instance()-\/>isCurrentTimelineIndicatorEnabled() \&\&}
\DoxyCodeLine{00903              !m\_viewer-\/>orientation()-\/>isVerticalTimeline())}
\DoxyCodeLine{00904       drawCurrentTimeIndicator(p);}
\DoxyCodeLine{00905   \}}
\DoxyCodeLine{00906 }
\DoxyCodeLine{00907   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentTool()-\/>getTool()-\/>getName() == T\_Skeleton)}
\DoxyCodeLine{00908     drawPinnedCenterKeys(p, r0, r1);}
\DoxyCodeLine{00909 }
\DoxyCodeLine{00910   drawPlayRange(p, r0, r1);}
\DoxyCodeLine{00911   p.setPen(m\_viewer-\/>getVerticalLineColor());}
\DoxyCodeLine{00912   p.setBrush(Qt::NoBrush);}
\DoxyCodeLine{00913   \textcolor{keywordflow}{if} (m\_viewer-\/>orientation()-\/>isVerticalTimeline())}
\DoxyCodeLine{00914     p.drawRect(toBeUpdated.adjusted(-\/1, -\/1, -\/1, 0));}
\DoxyCodeLine{00915   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00916     p.drawRect(toBeUpdated.adjusted(-\/1, -\/1, 0, -\/1));}
\DoxyCodeLine{00917 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_row_area_a4a3f55ead39a5ce81367c071438c42ef}\label{class_xsheet_g_u_i_1_1_row_area_a4a3f55ead39a5ce81367c071438c42ef}} 
\index{XsheetGUI::RowArea@{XsheetGUI::RowArea}!setMarker@{setMarker}}
\index{setMarker@{setMarker}!XsheetGUI::RowArea@{XsheetGUI::RowArea}}
\doxysubsubsection{\texorpdfstring{setMarker()}{setMarker()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Row\+Area\+::set\+Marker (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01340                                  \{}
\DoxyCodeLine{01341   assert(m\_row >= 0);}
\DoxyCodeLine{01342   \textcolor{comment}{// I use only the step value..}}
\DoxyCodeLine{01343   \textcolor{keywordtype}{int} unused0, unused1, step;}
\DoxyCodeLine{01344   getPlayRange(unused0, unused1, step);}
\DoxyCodeLine{01345   \textcolor{keywordflow}{if} (m\_r0 > m\_r1) \{}
\DoxyCodeLine{01346     m\_r0 = 0;}
\DoxyCodeLine{01347     m\_r1 = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_ab5cd3ad6f894b1acc5656ca747a80627}{getFrameCount}}() -\/ 1;}
\DoxyCodeLine{01348     \textcolor{keywordflow}{if} (m\_r1 < 1) m\_r1 = 1;}
\DoxyCodeLine{01349   \}}
\DoxyCodeLine{01350   \textcolor{keywordflow}{if} (index == 0) \{}
\DoxyCodeLine{01351     m\_r0 = m\_row;}
\DoxyCodeLine{01352     \textcolor{keywordflow}{if} (m\_r1 < m\_r0) m\_r1 = m\_r0;}
\DoxyCodeLine{01353   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (index == 1) \{}
\DoxyCodeLine{01354     m\_r1 = m\_row;}
\DoxyCodeLine{01355     \textcolor{keywordflow}{if} (m\_r1 < m\_r0) m\_r0 = m\_r1;}
\DoxyCodeLine{01356     m\_r1 -\/= (step == 0) ? (m\_r1 -\/ m\_r0) : (m\_r1 -\/ m\_r0) \% step;}
\DoxyCodeLine{01357   \}}
\DoxyCodeLine{01358   setPlayRange(m\_r0, m\_r1, step);}
\DoxyCodeLine{01359 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/xshrowviewer.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/xshrowviewer.\+cpp\end{DoxyCompactItemize}
