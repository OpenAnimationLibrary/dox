\hypertarget{class_studio_palette_tree_viewer}{}\doxysection{Studio\+Palette\+Tree\+Viewer Class Reference}
\label{class_studio_palette_tree_viewer}\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}


The \mbox{\hyperlink{class_studio_palette_tree_viewer}{Studio\+Palette\+Tree\+Viewer}} class provides an object to view and manage palettes files.  




{\ttfamily \#include $<$studiopaletteviewer.\+h$>$}

Inheritance diagram for Studio\+Palette\+Tree\+Viewer\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=1.325444cm]{class_studio_palette_tree_viewer}
\end{center}
\end{figure}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a04106cc82d275125c8231f9a61b4d0c0}{add\+New\+Palette}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a2c76fd71da8ef23e9f034d8bd8f2e5f2}{add\+New\+Folder}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a5a093802a4783f933cfdb9a4755ce12d}{delete\+Items}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a8240aa4f26be7b2e0d5df9b385f379bc}{search\+For\+Palette}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a897e6041135cec873c04577593689fdb}{load\+In\+Current\+Palette}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a9a3eb22e14268c1c2cc424802eca6ff6}{load\+In\+Current\+Palette\+And\+Adapt\+Level}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_aee176e84ad2ddbab6c670e0d3be76366}{replace\+Current\+Palette}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_ae2dccac2d7613c7af906f722abf60923}{merge\+To\+Current\+Palette}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_aba38e878c7e1dc0981cc25b24186ac0c}{convert\+To\+Studio\+Palette}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a5b6a40049be26cc97b12bd632c60fab7}{add\+New\+Plt}} ()
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a2c76fd71da8ef23e9f034d8bd8f2e5f2}\label{class_studio_palette_tree_viewer_a2c76fd71da8ef23e9f034d8bd8f2e5f2}} 
void {\bfseries add\+New\+Folder} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a17200c8bfb58803af40f6f4b8ef734c2}{delete\+Item}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a8ceb7bfaa4e0a9aa2a2067007bc1e430}{search\+For\+Plt}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a61d22683462cf149ae10c345f50cf667}{load\+In\+Current\+Cleanup\+Plt}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_afebb758946bf00344c7cdd77635e36fc}{replace\+Current\+Cleanup\+Plt}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a4ecab59ca754753c9636f22ee6dd56c1}{load\+In\+Current\+Plt}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_aa58eeb193b487dfd5ea8d11009319298}{replace\+Current\+Plt}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a34d626147f946259f178761d5dabb495}{merge\+To\+Current\+Plt}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_studio_palette_tree_viewer_af075bbc516ca39b6ac2b675fe3b0e17d}{Studio\+Palette\+Tree\+Viewer}} (QWidget $\ast$parent, \mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$studio\+Palette\+Handle, \mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$level\+Palette\+Handle, \mbox{\hyperlink{class_t_xsheet_handle}{TXsheet\+Handle}} $\ast$xsheet\+Handle, \mbox{\hyperlink{class_t_xsh_level_handle}{TXsh\+Level\+Handle}} $\ast$current\+Level\+Handle)
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a46d1065cac73530562362ecc3be157af}{set\+Level\+Palette\+Handle}} (\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$palette\+Handle)
\item 
\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$ \mbox{\hyperlink{class_studio_palette_tree_viewer_a90a64f4492bb042c677dbb3368ab4136}{get\+Level\+Palette\+Handle}} () const
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_ab2e8ab68a6ad67dda31a6adb7d85f58b}{set\+Current\+Level\+Handle}} (\mbox{\hyperlink{class_t_xsh_level_handle}{TXsh\+Level\+Handle}} $\ast$current\+Level\+Handle)
\item 
\mbox{\hyperlink{class_t_xsh_level_handle}{TXsh\+Level\+Handle}} $\ast$ \mbox{\hyperlink{class_studio_palette_tree_viewer_a204b24c91a5a326f1a7bf0c2f1ec5d15}{get\+Current\+Level\+Handle}} () const
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_ad6519dce8843d62123ced96cf2d487df}{set\+Std\+Palette\+Handle}} (\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$std\+Palette\+Handle)
\item 
\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$ \mbox{\hyperlink{class_studio_palette_tree_viewer_aa86fc6c2fbc1005ef05d377cecb5a01e}{get\+Std\+Palette\+Handle}} () const
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_ae68c7acfbe83cd99c70f6cca7bafb8fc}{on\+Studio\+Palette\+Tree\+Change}} () override
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a9a54ccb32077b7f3f75fea0b956d6187}{on\+Studio\+Palette\+Move}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&dst\+Path, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&src\+Path) override
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a787f374ee08bd11f4c4285b3f2c6e333}{on\+Studio\+Palette\+Change}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&palette) override
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_af850b819e2734a7c118404ed533850ad}{on\+Project\+Switched}} () override
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a1de6311f0dbbce2dae61617d3c4ea4f3}{on\+Project\+Changed}} () override
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_studio_palette_tree_viewer_ac473c25305b0d63319b2f5702ada3b9f}{get\+Current\+Item\+Path}} ()
\item 
\mbox{\hyperlink{class_studio_palette_tree_viewer_a52fb7358b8c61d047de0fc4206deef40}{Studio\+Palette\+Tree\+Viewer}} (QWidget $\ast$parent=0, \mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$studio\+Palette\+Handle=0, \mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$level\+Palette\+Handle=0)
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a46d1065cac73530562362ecc3be157af}\label{class_studio_palette_tree_viewer_a46d1065cac73530562362ecc3be157af}} 
void {\bfseries set\+Level\+Palette\+Handle} (\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$palette\+Handle)
\item 
\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$ \mbox{\hyperlink{class_studio_palette_tree_viewer_a90a64f4492bb042c677dbb3368ab4136}{get\+Level\+Palette\+Handle}} () const
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a4f4e14989f239692bf50d311b3affa36}\label{class_studio_palette_tree_viewer_a4f4e14989f239692bf50d311b3affa36}} 
void {\bfseries set\+Std\+Palette\+Handle} (\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$std\+Plt\+Handle)
\item 
\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$ \mbox{\hyperlink{class_studio_palette_tree_viewer_aa86fc6c2fbc1005ef05d377cecb5a01e}{get\+Std\+Palette\+Handle}} () const
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a4e2ef28c9953f3bc8ee3f5b581bc9e2a}{set\+Scene\+Handle}} (\mbox{\hyperlink{class_t_scene_handle}{TScene\+Handle}} $\ast$scene\+Handle)
\item 
\mbox{\hyperlink{class_t_scene_handle}{TScene\+Handle}} $\ast$ \mbox{\hyperlink{class_studio_palette_tree_viewer_a703e565385480f46e4ab103a8db7316e}{get\+Scene\+Handle}} () const
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_accc17be8602ba303606002cd6e67b853}{set\+Level\+Handle}} (\mbox{\hyperlink{class_t_xsh_level_handle}{TXsh\+Level\+Handle}} $\ast$level\+Handle)
\item 
\mbox{\hyperlink{class_t_xsh_level_handle}{TXsh\+Level\+Handle}} $\ast$ \mbox{\hyperlink{class_studio_palette_tree_viewer_ae6546b86c3f2a68d2ca31dc982af1418}{get\+Level\+Handle}} () const
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a87c90cacb4fb3f8ffcca97edf535dc54}{on\+Studio\+Palette\+Tree\+Change}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_afd729ce83718af4116d601a43a426d67}{on\+Studio\+Palette\+Move}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&dst\+Path, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&src\+Path)
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_ad7e216bdd9060d5286be82d114ff3d95}{on\+Studio\+Palette\+Change}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&palette)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_ace5d550860943c0f0a8e06d1ee7510ff}{refresh}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_ad83cc7bd4ac97500ed0625afc790c6d9}{refresh\+Item}} (QTree\+Widget\+Item $\ast$)
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a7a3e5126ecfb14e5fefb73eefda35959}{reset\+Project\+Palette\+Folder}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_ae59db53f8eb69c4c15546c89c5f27257}{on\+Item\+Clicked}} (QTree\+Widget\+Item $\ast$item, int column)
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_ae4c6c4b4decb111b91ce0bece875d454}{on\+Item\+Changed}} (QTree\+Widget\+Item $\ast$item, int column)
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a46e3d33c215ced93ab39011eb7abce59}{on\+Current\+Item\+Changed}} (QTree\+Widget\+Item $\ast$current, QTree\+Widget\+Item $\ast$previous)
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_abfd17bacd49b9f84ee2d27be59d423ef}{on\+Tree\+Item\+Expanded}} (QTree\+Widget\+Item $\ast$)
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_aa18bebfb894de00b3e03fb09fbcbb55b}{on\+Refresh\+Tree\+Shortcut\+Triggered}} ()
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_ace5d550860943c0f0a8e06d1ee7510ff}\label{class_studio_palette_tree_viewer_ace5d550860943c0f0a8e06d1ee7510ff}} 
void {\bfseries refresh} ()
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_ad83cc7bd4ac97500ed0625afc790c6d9}\label{class_studio_palette_tree_viewer_ad83cc7bd4ac97500ed0625afc790c6d9}} 
void {\bfseries refresh\+Item} (QTree\+Widget\+Item $\ast$)
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_ae4c6c4b4decb111b91ce0bece875d454}\label{class_studio_palette_tree_viewer_ae4c6c4b4decb111b91ce0bece875d454}} 
void {\bfseries on\+Item\+Changed} (QTree\+Widget\+Item $\ast$item, int column)
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_aef81354cc2e9dad3d18f3b1d03ef33d0}{on\+Item\+Expanded}} (QTree\+Widget\+Item $\ast$item)
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_aca677fd2531b0b83d948f00f3592e1a5}{on\+Item\+Collapsed}} (QTree\+Widget\+Item $\ast$item)
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a6c2f9da5363fb8bd7af13cb199347323}{on\+Item\+Selection\+Changed}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_ae528a3de5967b2082bb192d272d5bfa5}{delete\+Item}} (QTree\+Widget\+Item $\ast$item)
\item 
QTree\+Widget\+Item $\ast$ \mbox{\hyperlink{class_studio_palette_tree_viewer_a1db9c3187eab1dd0297dd6be214cac33}{create\+Root\+Item}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} path)
\item 
bool \mbox{\hyperlink{class_studio_palette_tree_viewer_a3e3383c594288120c6f00438c2d889fe}{is\+Root\+Item}} (QTree\+Widget\+Item $\ast$item)
\item 
QTree\+Widget\+Item $\ast$ \mbox{\hyperlink{class_studio_palette_tree_viewer_a0a8916e68466f52ca64003f2f8b3f90c}{create\+Item}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} path)
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_studio_palette_tree_viewer_a5b2365c3338ed80d9dfe8ea7cecb4241}{get\+Item\+Path}} (QTree\+Widget\+Item $\ast$)
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}{get\+Current\+Folder\+Path}} ()
\item 
QTree\+Widget\+Item $\ast$ \mbox{\hyperlink{class_studio_palette_tree_viewer_a48a072cf3dc4a6a1a59a94bd1f03d142}{get\+Item}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} path)
\item 
QTree\+Widget\+Item $\ast$ \mbox{\hyperlink{class_studio_palette_tree_viewer_a9d05ca454c7f689a645472c5b47c1f77}{get\+Folder\+Item}} (QTree\+Widget\+Item $\ast$parent, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} path)
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_aab303a8421450b1e62c991afaa6a135b}{reset\+Drop\+Item}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_aa717d1d54fd6828597293bd08f33a407}{paint\+Event}} (QPaint\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a240170ace1474af50ec36e13dfa21d46}{context\+Menu\+Event}} (QContext\+Menu\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_ae8c251721c4e26a121ef3bb783b1d2a0}{create\+Menu\+Action}} (QMenu \&menu, const char $\ast$id, QString name, const char $\ast$slot)
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_add4646da03339fd7e9970709d6cc5ed2}{mouse\+Press\+Event}} (QMouse\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a91755882a68dbd4cea9d6020ebab6b9a}{mouse\+Move\+Event}} (QMouse\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a09147c8382e140986c2f2a99c2f4765f}{mouse\+Release\+Event}} (QMouse\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a226de8a57fac1906bcaea77b8f7bf8b7}{start\+Drag\+Drop}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a52eb83179f1bb72f9970b334169fe7ad}{drag\+Enter\+Event}} (QDrag\+Enter\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a5728c37009972308d0bd10127c2483e4}{drag\+Move\+Event}} (QDrag\+Move\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_aaadd323c7e582f03145592cb3ed60aab}{drop\+Event}} (QDrop\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_ad1db2141b86b77879486d82df54cae8c}{drag\+Leave\+Event}} (QDrag\+Leave\+Event $\ast$event) override
\item 
QTree\+Widget\+Item $\ast$ \mbox{\hyperlink{class_studio_palette_tree_viewer_a37981cfa5d88073276c9564209874a65}{create\+Root\+Item}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} path, const QPixmap pix)
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a3e3383c594288120c6f00438c2d889fe}\label{class_studio_palette_tree_viewer_a3e3383c594288120c6f00438c2d889fe}} 
bool {\bfseries is\+Root\+Item} (QTree\+Widget\+Item $\ast$item)
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a0a8916e68466f52ca64003f2f8b3f90c}\label{class_studio_palette_tree_viewer_a0a8916e68466f52ca64003f2f8b3f90c}} 
QTree\+Widget\+Item $\ast$ {\bfseries create\+Item} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} path)
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_studio_palette_tree_viewer_afc12eedb3554a41b519b45177a8ff731}{get\+Folder\+Path}} (QTree\+Widget\+Item $\ast$)
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}\label{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}} 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} {\bfseries get\+Current\+Folder\+Path} ()
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a48a072cf3dc4a6a1a59a94bd1f03d142}\label{class_studio_palette_tree_viewer_a48a072cf3dc4a6a1a59a94bd1f03d142}} 
QTree\+Widget\+Item $\ast$ {\bfseries get\+Item} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} path)
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a9d05ca454c7f689a645472c5b47c1f77}\label{class_studio_palette_tree_viewer_a9d05ca454c7f689a645472c5b47c1f77}} 
QTree\+Widget\+Item $\ast$ {\bfseries get\+Folder\+Item} (QTree\+Widget\+Item $\ast$parent, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} path)
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a4ebf135b1bc2392d4a28d8502f03c3a2}\label{class_studio_palette_tree_viewer_a4ebf135b1bc2392d4a28d8502f03c3a2}} 
void {\bfseries paint\+Event} (QPaint\+Event $\ast$event)
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a741c8095da4f76833f81e215de1fa3d9}\label{class_studio_palette_tree_viewer_a741c8095da4f76833f81e215de1fa3d9}} 
void {\bfseries context\+Menu\+Event} (QContext\+Menu\+Event $\ast$event)
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a92abdc44fb9945d40ac0f9f901e6f704}{create\+Menu\+Action}} (QMenu \&menu, QString name, const char $\ast$slot)
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_aa5a1b2edb83cdc4fd5823743f7ad2a62}\label{class_studio_palette_tree_viewer_aa5a1b2edb83cdc4fd5823743f7ad2a62}} 
void {\bfseries mouse\+Move\+Event} (QMouse\+Event $\ast$event)
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a226de8a57fac1906bcaea77b8f7bf8b7}\label{class_studio_palette_tree_viewer_a226de8a57fac1906bcaea77b8f7bf8b7}} 
void {\bfseries start\+Drag\+Drop} ()
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_ab5ed0b24808463903df1090ca610b8f5}\label{class_studio_palette_tree_viewer_ab5ed0b24808463903df1090ca610b8f5}} 
void {\bfseries drag\+Enter\+Event} (QDrag\+Enter\+Event $\ast$event)
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_acb92608879e8eb93615db2c16df2d12b}\label{class_studio_palette_tree_viewer_acb92608879e8eb93615db2c16df2d12b}} 
void {\bfseries drag\+Move\+Event} (QDrag\+Move\+Event $\ast$event)
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_adb55048fd515c7b09c884c4fafe218bf}\label{class_studio_palette_tree_viewer_adb55048fd515c7b09c884c4fafe218bf}} 
void {\bfseries drop\+Event} (QDrop\+Event $\ast$event)
\item 
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a37b81a6f4ba5f46e88cf874a2554b7cd}\label{class_studio_palette_tree_viewer_a37b81a6f4ba5f46e88cf874a2554b7cd}} 
void {\bfseries drag\+Leave\+Event} (QDrag\+Leave\+Event $\ast$event)
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a9f42e973412d2d149b91fba2bcef642c}{hide\+Event}} (QHide\+Event $\ast$event)
\item 
void \mbox{\hyperlink{class_studio_palette_tree_viewer_a46e689748ec09d7ac94fb03bf48b652e}{show\+Event}} (QShow\+Event $\ast$event)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{class_studio_palette_tree_viewer}{Studio\+Palette\+Tree\+Viewer}} class provides an object to view and manage palettes files. 

The \mbox{\hyperlink{class_studio_palette_tree_viewer}{Studio\+Palette\+Tree\+Viewer}} class provides an object to view and manage palettes files.

Inherits {\bfseries{QTree\+Widget}}, {\bfseries{\mbox{\hyperlink{class_studio_palette_1_1_listener}{Studio\+Palette\+::\+Listener}}}} and {\bfseries{Project\+Manager\+::\+Listener}}. \begin{DoxyVerb}         This object provides interface for class \b StudioPalette.
         StudioPaletteTreeViewer is a \b QTreeWidget with three root item
\end{DoxyVerb}
 related to level palette folder and current project palette folder, the three root folder of {\bfseries{\mbox{\hyperlink{class_studio_palette}{Studio\+Palette}}}}.

Inherits {\bfseries{QTree\+Widget}} and {\bfseries{\mbox{\hyperlink{class_studio_palette_1_1_listener}{Studio\+Palette\+::\+Listener}}}}.

This object provides interface for class {\bfseries{\mbox{\hyperlink{class_studio_palette}{Studio\+Palette}}}}. \mbox{\hyperlink{class_studio_palette_tree_viewer}{Studio\+Palette\+Tree\+Viewer}} is a {\bfseries{QTree\+Widget}} with three root item related to level palette folder, cleanup palette folder and current project palette folder, the three root folder of {\bfseries{\mbox{\hyperlink{class_studio_palette}{Studio\+Palette}}}}. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_af075bbc516ca39b6ac2b675fe3b0e17d}\label{class_studio_palette_tree_viewer_af075bbc516ca39b6ac2b675fe3b0e17d}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{StudioPaletteTreeViewer()}{StudioPaletteTreeViewer()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily Studio\+Palette\+Tree\+Viewer\+::\+Studio\+Palette\+Tree\+Viewer (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent,  }\item[{\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$}]{studio\+Palette\+Handle,  }\item[{\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$}]{level\+Palette\+Handle,  }\item[{\mbox{\hyperlink{class_t_xsheet_handle}{TXsheet\+Handle}} $\ast$}]{xsheet\+Handle,  }\item[{\mbox{\hyperlink{class_t_xsh_level_handle}{TXsh\+Level\+Handle}} $\ast$}]{current\+Level\+Handle }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00098     : QTreeWidget(parent)}
\DoxyCodeLine{00099     , m\_dropItem(0)}
\DoxyCodeLine{00100     , m\_studioPaletteHandle(studioPaletteHandle)}
\DoxyCodeLine{00101     , m\_levelPaletteHandle(levelPaletteHandle)}
\DoxyCodeLine{00102     , m\_currentLevelHandle(currentLevelHandle)}
\DoxyCodeLine{00103     , m\_xsheetHandle(xsheetHandle)}
\DoxyCodeLine{00104     , m\_folderIcon(QIcon())}
\DoxyCodeLine{00105     , m\_levelPaletteIcon(QIcon())}
\DoxyCodeLine{00106     , m\_studioPaletteIcon(QIcon())}
\DoxyCodeLine{00107     , m\_startPos() \{}
\DoxyCodeLine{00108   setIndentation(14);}
\DoxyCodeLine{00109   setAlternatingRowColors(\textcolor{keyword}{true});}
\DoxyCodeLine{00110 }
\DoxyCodeLine{00111   header()-\/>close();}
\DoxyCodeLine{00112   setUniformRowHeights(\textcolor{keyword}{true});}
\DoxyCodeLine{00113   setIconSize(QSize(21, 18));}
\DoxyCodeLine{00114 }
\DoxyCodeLine{00115   QList<QTreeWidgetItem *> paletteItems;}
\DoxyCodeLine{00116 }
\DoxyCodeLine{00117   QString levelPaletteIcon = QString(\textcolor{stringliteral}{"{}:Resources/palette.svg"{}});}
\DoxyCodeLine{00118   m\_levelPaletteIcon.addPixmap(levelPaletteIcon, QIcon::Normal, QIcon::On);}
\DoxyCodeLine{00119   QString studioPaletteIcon = QString(\textcolor{stringliteral}{"{}:Resources/studiopalette.svg"{}});}
\DoxyCodeLine{00120   m\_studioPaletteIcon.addPixmap(studioPaletteIcon, QIcon::Normal, QIcon::On);}
\DoxyCodeLine{00121 }
\DoxyCodeLine{00122   \mbox{\hyperlink{class_studio_palette}{StudioPalette}} *studioPalette = StudioPalette::instance();}
\DoxyCodeLine{00123 }
\DoxyCodeLine{00124   \mbox{\hyperlink{class_t_file_path}{TFilePath}} levelPalettePath = studioPalette-\/>getLevelPalettesRoot();}
\DoxyCodeLine{00125   paletteItems.append(\mbox{\hyperlink{class_studio_palette_tree_viewer_a1db9c3187eab1dd0297dd6be214cac33}{createRootItem}}(levelPalettePath));}
\DoxyCodeLine{00126 }
\DoxyCodeLine{00127   \mbox{\hyperlink{class_t_file_path}{TFilePath}} projectPalettePath = studioPalette-\/>getProjectPalettesRoot();}
\DoxyCodeLine{00128   \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(projectPalettePath))}
\DoxyCodeLine{00129     paletteItems.append(\mbox{\hyperlink{class_studio_palette_tree_viewer_a1db9c3187eab1dd0297dd6be214cac33}{createRootItem}}(projectPalettePath));}
\DoxyCodeLine{00130 }
\DoxyCodeLine{00131   insertTopLevelItems(0, paletteItems);}
\DoxyCodeLine{00132 }
\DoxyCodeLine{00133   \textcolor{keywordtype}{bool} ret = connect(\textcolor{keyword}{this}, SIGNAL(itemChanged(QTreeWidgetItem *, \textcolor{keywordtype}{int})),}
\DoxyCodeLine{00134                      SLOT(\mbox{\hyperlink{class_studio_palette_tree_viewer_ae4c6c4b4decb111b91ce0bece875d454}{onItemChanged}}(QTreeWidgetItem *, \textcolor{keywordtype}{int})));}
\DoxyCodeLine{00135   ret      = ret \&\& connect(\textcolor{keyword}{this}, SIGNAL(itemClicked(QTreeWidgetItem *, \textcolor{keywordtype}{int})),}
\DoxyCodeLine{00136                        SLOT(onItemClicked(QTreeWidgetItem *, \textcolor{keywordtype}{int})));}
\DoxyCodeLine{00137   ret =}
\DoxyCodeLine{00138       ret \&\&}
\DoxyCodeLine{00139       connect(\textcolor{keyword}{this},}
\DoxyCodeLine{00140               SIGNAL(currentItemChanged(QTreeWidgetItem *, QTreeWidgetItem *)),}
\DoxyCodeLine{00141               SLOT(\mbox{\hyperlink{class_studio_palette_tree_viewer_a46e3d33c215ced93ab39011eb7abce59}{onCurrentItemChanged}}(QTreeWidgetItem *, QTreeWidgetItem *)));}
\DoxyCodeLine{00142   ret = ret \&\& connect(\textcolor{keyword}{this}, SIGNAL(itemClicked(QTreeWidgetItem *, \textcolor{keywordtype}{int})), \textcolor{keyword}{this},}
\DoxyCodeLine{00143                        SLOT(\mbox{\hyperlink{class_studio_palette_tree_viewer_abfd17bacd49b9f84ee2d27be59d423ef}{onTreeItemExpanded}}(QTreeWidgetItem *)));}
\DoxyCodeLine{00144 }
\DoxyCodeLine{00145   \textcolor{comment}{// refresh tree with shortcut key}}
\DoxyCodeLine{00146   QAction *refreshAct = CommandManager::instance()-\/>getAction(MI\_RefreshTree);}
\DoxyCodeLine{00147   ret                 = ret \&\& connect(refreshAct, SIGNAL(triggered()), \textcolor{keyword}{this},}
\DoxyCodeLine{00148                        SLOT(\mbox{\hyperlink{class_studio_palette_tree_viewer_aa18bebfb894de00b3e03fb09fbcbb55b}{onRefreshTreeShortcutTriggered}}()));}
\DoxyCodeLine{00149   addAction(refreshAct);}
\DoxyCodeLine{00150 }
\DoxyCodeLine{00151   m\_palettesScanPopup = \textcolor{keyword}{new} \mbox{\hyperlink{class_palettes_scan_popup}{PalettesScanPopup}}();}
\DoxyCodeLine{00152 }
\DoxyCodeLine{00153   setAcceptDrops(\textcolor{keyword}{true});}
\DoxyCodeLine{00154 }
\DoxyCodeLine{00155   \textcolor{comment}{// Per la selezione multipla}}
\DoxyCodeLine{00156   setSelectionMode(QAbstractItemView::ExtendedSelection);}
\DoxyCodeLine{00157 }
\DoxyCodeLine{00158   StudioPalette::instance()-\/>addListener(\textcolor{keyword}{this});}
\DoxyCodeLine{00159   \mbox{\hyperlink{class_t_project_manager_a150ca0d6e2eb171b8117b0c5f03dbfad}{TProjectManager::instance}}()-\/>\mbox{\hyperlink{class_t_project_manager_afeb424880912096d949e24c686d3aa97}{addListener}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00160 }
\DoxyCodeLine{00161   \mbox{\hyperlink{class_studio_palette_tree_viewer_ace5d550860943c0f0a8e06d1ee7510ff}{refresh}}();}
\DoxyCodeLine{00162 }
\DoxyCodeLine{00163   assert(ret);}
\DoxyCodeLine{00164 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_aa6c1065e2d9a7a83105a308841ee328e}\label{class_studio_palette_tree_viewer_aa6c1065e2d9a7a83105a308841ee328e}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!````~StudioPaletteTreeViewer@{$\sim$StudioPaletteTreeViewer}}
\index{````~StudioPaletteTreeViewer@{$\sim$StudioPaletteTreeViewer}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{$\sim$StudioPaletteTreeViewer()}{~StudioPaletteTreeViewer()}}
{\footnotesize\ttfamily Studio\+Palette\+Tree\+Viewer\+::$\sim$\+Studio\+Palette\+Tree\+Viewer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00156 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a52fb7358b8c61d047de0fc4206deef40}\label{class_studio_palette_tree_viewer_a52fb7358b8c61d047de0fc4206deef40}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{StudioPaletteTreeViewer()}{StudioPaletteTreeViewer()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily Studio\+Palette\+Tree\+Viewer\+::\+Studio\+Palette\+Tree\+Viewer (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent = {\ttfamily 0},  }\item[{\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$}]{studio\+Palette\+Handle = {\ttfamily 0},  }\item[{\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$}]{level\+Palette\+Handle = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00104     : QTreeWidget(parent)}
\DoxyCodeLine{00105     , m\_dropItem(0)}
\DoxyCodeLine{00106     , m\_stdPltHandle(studioPaletteHandle)}
\DoxyCodeLine{00107     , m\_levelPltHandle(levelPaletteHandle)}
\DoxyCodeLine{00108     , m\_sceneHandle(0)}
\DoxyCodeLine{00109     , m\_levelHandle(0) \{}
\DoxyCodeLine{00110   header()-\/>close();}
\DoxyCodeLine{00111   setIconSize(QSize(20, 20));}
\DoxyCodeLine{00112 }
\DoxyCodeLine{00113   \textcolor{comment}{// Da sistemare le icone dei tre folder principali}}
\DoxyCodeLine{00114   \textcolor{keyword}{static} QPixmap PaletteIconPxmp(\textcolor{stringliteral}{"{}:Resources/icon.png"{}});}
\DoxyCodeLine{00115 }
\DoxyCodeLine{00116   QList<QTreeWidgetItem *> paletteItems;}
\DoxyCodeLine{00117 }
\DoxyCodeLine{00118   \mbox{\hyperlink{class_studio_palette}{StudioPalette}} *studioPlt = StudioPalette::instance();}
\DoxyCodeLine{00119 }
\DoxyCodeLine{00120   \textcolor{comment}{// static QPixmap PaletteLevelIconPxmp("{}:Resources/studio\_plt\_toonz.png"{});}}
\DoxyCodeLine{00121   \mbox{\hyperlink{class_t_file_path}{TFilePath}} levelPltPath = studioPlt-\/>getLevelPalettesRoot();}
\DoxyCodeLine{00122   paletteItems.append(\mbox{\hyperlink{class_studio_palette_tree_viewer_a1db9c3187eab1dd0297dd6be214cac33}{createRootItem}}(levelPltPath, PaletteIconPxmp));}
\DoxyCodeLine{00123 }
\DoxyCodeLine{00124   \textcolor{comment}{// static QPixmap PaletteCleanupIconPxmp("{}:Resources/studio\_plt\_cleanup.png"{});}}
\DoxyCodeLine{00125   \mbox{\hyperlink{class_t_file_path}{TFilePath}} cleanupPltPath = studioPlt-\/>getCleanupPalettesRoot();}
\DoxyCodeLine{00126   paletteItems.append(\mbox{\hyperlink{class_studio_palette_tree_viewer_a1db9c3187eab1dd0297dd6be214cac33}{createRootItem}}(cleanupPltPath, PaletteIconPxmp));}
\DoxyCodeLine{00127 }
\DoxyCodeLine{00128   \textcolor{comment}{// DAFARE}}
\DoxyCodeLine{00129   \textcolor{comment}{// Oss.: se il folder non c'e' non fa nulla, non si aprono neanche i menu' da}}
\DoxyCodeLine{00130   \textcolor{comment}{// tasto destro!}}
\DoxyCodeLine{00131   \textcolor{comment}{// static QPixmap PaletteProjectIconPxmp("{}:Resources/studio\_plt\_project.png"{});}}
\DoxyCodeLine{00132   \mbox{\hyperlink{class_t_file_path}{TFilePath}} projectPltPath = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(}
\DoxyCodeLine{00133       \textcolor{stringliteral}{"{}C:\(\backslash\)\(\backslash\)Toonz 6.0 stuff\(\backslash\)\(\backslash\)projects\(\backslash\)\(\backslash\)Project Palettes"{}});  \textcolor{comment}{// studioPlt-\/>getProjectPalettesRoot();}}
\DoxyCodeLine{00134                                                            \textcolor{comment}{// Per ora lo fisso}}
\DoxyCodeLine{00135   paletteItems.append(\mbox{\hyperlink{class_studio_palette_tree_viewer_a1db9c3187eab1dd0297dd6be214cac33}{createRootItem}}(projectPltPath, PaletteIconPxmp));}
\DoxyCodeLine{00136 }
\DoxyCodeLine{00137   insertTopLevelItems(0, paletteItems);}
\DoxyCodeLine{00138 }
\DoxyCodeLine{00139   connect(\textcolor{keyword}{this}, SIGNAL(itemChanged(QTreeWidgetItem *, \textcolor{keywordtype}{int})), \textcolor{keyword}{this},}
\DoxyCodeLine{00140           SLOT(\mbox{\hyperlink{class_studio_palette_tree_viewer_ae4c6c4b4decb111b91ce0bece875d454}{onItemChanged}}(QTreeWidgetItem *, \textcolor{keywordtype}{int})));}
\DoxyCodeLine{00141 }
\DoxyCodeLine{00142   connect(\textcolor{keyword}{this}, SIGNAL(itemExpanded(QTreeWidgetItem *)), \textcolor{keyword}{this},}
\DoxyCodeLine{00143           SLOT(\mbox{\hyperlink{class_studio_palette_tree_viewer_aef81354cc2e9dad3d18f3b1d03ef33d0}{onItemExpanded}}(QTreeWidgetItem *)));}
\DoxyCodeLine{00144   connect(\textcolor{keyword}{this}, SIGNAL(itemCollapsed(QTreeWidgetItem *)), \textcolor{keyword}{this},}
\DoxyCodeLine{00145           SLOT(\mbox{\hyperlink{class_studio_palette_tree_viewer_aca677fd2531b0b83d948f00f3592e1a5}{onItemCollapsed}}(QTreeWidgetItem *)));}
\DoxyCodeLine{00146 }
\DoxyCodeLine{00147   connect(\textcolor{keyword}{this}, SIGNAL(itemSelectionChanged()), \textcolor{keyword}{this},}
\DoxyCodeLine{00148           SLOT(\mbox{\hyperlink{class_studio_palette_tree_viewer_a6c2f9da5363fb8bd7af13cb199347323}{onItemSelectionChanged}}()));}
\DoxyCodeLine{00149 }
\DoxyCodeLine{00150   m\_palettesScanPopup = \textcolor{keyword}{new} \mbox{\hyperlink{class_palettes_scan_popup}{PalettesScanPopup}}();}
\DoxyCodeLine{00151   setAcceptDrops(\textcolor{keyword}{true});}
\DoxyCodeLine{00152 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a2c76fd71da8ef23e9f034d8bd8f2e5f2}\label{class_studio_palette_tree_viewer_a2c76fd71da8ef23e9f034d8bd8f2e5f2}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!addNewFolder@{addNewFolder}}
\index{addNewFolder@{addNewFolder}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{addNewFolder}{addNewFolder}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::add\+New\+Folder (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Create a new {\bfseries{\mbox{\hyperlink{class_studio_palette}{Studio\+Palette}}}} folder in current item path. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00464                                            \{}
\DoxyCodeLine{00465   \textcolor{keywordflow}{if} (!currentItem()) \{}
\DoxyCodeLine{00466     error(\textcolor{stringliteral}{"{}Error: No folder selected."{}});}
\DoxyCodeLine{00467     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00468   \}}
\DoxyCodeLine{00469   \mbox{\hyperlink{class_t_file_path}{TFilePath}} newPath;}
\DoxyCodeLine{00470   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00471     newPath = \mbox{\hyperlink{namespace_studio_palette_cmd_abeb8dfb9edb15438498fa95007352b12}{StudioPaletteCmd::addFolder}}(\mbox{\hyperlink{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}{getCurrentFolderPath}}());}
\DoxyCodeLine{00472   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{00473     error(\textcolor{stringliteral}{"{}Can't create palette folder: "{}} +}
\DoxyCodeLine{00474           QString(toString(e.getMessage()).c\_str()));}
\DoxyCodeLine{00475   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00476     error(\textcolor{stringliteral}{"{}Can't create palette folder"{}});}
\DoxyCodeLine{00477   \}}
\DoxyCodeLine{00478 }
\DoxyCodeLine{00479   setCurrentItem(\mbox{\hyperlink{class_studio_palette_tree_viewer_a48a072cf3dc4a6a1a59a94bd1f03d142}{getItem}}(newPath));}
\DoxyCodeLine{00480 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00473}{Studio\+Palette\+Cmd\+::add\+Folder()}}, \mbox{\hyperlink{l00259}{get\+Current\+Folder\+Path()}}, and \mbox{\hyperlink{l00266}{get\+Item()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a04106cc82d275125c8231f9a61b4d0c0}\label{class_studio_palette_tree_viewer_a04106cc82d275125c8231f9a61b4d0c0}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!addNewPalette@{addNewPalette}}
\index{addNewPalette@{addNewPalette}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{addNewPalette}{addNewPalette}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::add\+New\+Palette (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Create a new {\bfseries{\mbox{\hyperlink{class_studio_palette}{Studio\+Palette}}}} palette in current item path. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00530                                             \{}
\DoxyCodeLine{00531   \textcolor{keywordflow}{if} (!currentItem()) \{}
\DoxyCodeLine{00532     error(\textcolor{stringliteral}{"{}Error: No folder selected."{}});}
\DoxyCodeLine{00533     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00534   \}}
\DoxyCodeLine{00535   \mbox{\hyperlink{class_t_file_path}{TFilePath}} newPath;}
\DoxyCodeLine{00536   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00537     newPath = \mbox{\hyperlink{namespace_studio_palette_cmd_ae42db0d6de444f183fd5aed671dbdae0}{StudioPaletteCmd::createPalette}}(\mbox{\hyperlink{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}{getCurrentFolderPath}}(), \textcolor{stringliteral}{"{}"{}}, 0);}
\DoxyCodeLine{00538   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{00539     error(\textcolor{stringliteral}{"{}Can't create palette: "{}} +}
\DoxyCodeLine{00540           QString(::to\_string(e.getMessage()).c\_str()));}
\DoxyCodeLine{00541   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00542     error(\textcolor{stringliteral}{"{}Can't create palette"{}});}
\DoxyCodeLine{00543   \}}
\DoxyCodeLine{00544   \mbox{\hyperlink{class_studio_palette_tree_viewer_ad83cc7bd4ac97500ed0625afc790c6d9}{refreshItem}}(currentItem());}
\DoxyCodeLine{00545   setCurrentItem(\mbox{\hyperlink{class_studio_palette_tree_viewer_a48a072cf3dc4a6a1a59a94bd1f03d142}{getItem}}(newPath));}
\DoxyCodeLine{00546 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00697}{Studio\+Palette\+Cmd\+::create\+Palette()}}, \mbox{\hyperlink{l00259}{get\+Current\+Folder\+Path()}}, \mbox{\hyperlink{l00266}{get\+Item()}}, and \mbox{\hyperlink{l00330}{refresh\+Item()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a5b6a40049be26cc97b12bd632c60fab7}\label{class_studio_palette_tree_viewer_a5b6a40049be26cc97b12bd632c60fab7}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!addNewPlt@{addNewPlt}}
\index{addNewPlt@{addNewPlt}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{addNewPlt}{addNewPlt}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::add\+New\+Plt (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Create a new {\bfseries{\mbox{\hyperlink{class_studio_palette}{Studio\+Palette}}}} palette in current item path. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00445                                         \{}
\DoxyCodeLine{00446   \textcolor{keywordflow}{if} (!currentItem()) \{}
\DoxyCodeLine{00447     error(\textcolor{stringliteral}{"{}Error: No folder selected."{}});}
\DoxyCodeLine{00448     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00449   \}}
\DoxyCodeLine{00450   \mbox{\hyperlink{class_t_file_path}{TFilePath}} newPath;}
\DoxyCodeLine{00451   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00452     newPath = \mbox{\hyperlink{namespace_studio_palette_cmd_ae42db0d6de444f183fd5aed671dbdae0}{StudioPaletteCmd::createPalette}}(\mbox{\hyperlink{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}{getCurrentFolderPath}}(), \textcolor{stringliteral}{"{}"{}}, 0);}
\DoxyCodeLine{00453   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{00454     error(\textcolor{stringliteral}{"{}Can't create palette: "{}} + QString(toString(e.getMessage()).c\_str()));}
\DoxyCodeLine{00455   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00456     error(\textcolor{stringliteral}{"{}Can't create palette"{}});}
\DoxyCodeLine{00457   \}}
\DoxyCodeLine{00458   setCurrentItem(\mbox{\hyperlink{class_studio_palette_tree_viewer_a48a072cf3dc4a6a1a59a94bd1f03d142}{getItem}}(newPath));}
\DoxyCodeLine{00459 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00697}{Studio\+Palette\+Cmd\+::create\+Palette()}}, \mbox{\hyperlink{l00259}{get\+Current\+Folder\+Path()}}, and \mbox{\hyperlink{l00266}{get\+Item()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a240170ace1474af50ec36e13dfa21d46}\label{class_studio_palette_tree_viewer_a240170ace1474af50ec36e13dfa21d46}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!contextMenuEvent@{contextMenuEvent}}
\index{contextMenuEvent@{contextMenuEvent}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{contextMenuEvent()}{contextMenuEvent()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::context\+Menu\+Event (\begin{DoxyParamCaption}\item[{QContext\+Menu\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}

Open a context menu considering current item data role {\bfseries{Qt\+::\+User\+Role}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00589                                                                        \{}
\DoxyCodeLine{00590   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = \mbox{\hyperlink{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}{getCurrentFolderPath}}();}
\DoxyCodeLine{00591 }
\DoxyCodeLine{00592   \mbox{\hyperlink{class_studio_palette}{StudioPalette}} *studioPlt = StudioPalette::instance();}
\DoxyCodeLine{00593 }
\DoxyCodeLine{00594   \textcolor{comment}{// Verify if click position is in a row containing an item.}}
\DoxyCodeLine{00595   QRect rect = visualItemRect(currentItem());}
\DoxyCodeLine{00596   \textcolor{keywordflow}{if} (!QRect(0, rect.y(), width(), rect.height()).contains(event-\/>pos()))}
\DoxyCodeLine{00597     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00598 }
\DoxyCodeLine{00599   \textcolor{keywordtype}{bool} isLevelFolder =}
\DoxyCodeLine{00600       (studioPlt-\/>isFolder(path) \&\& !studioPlt-\/>isCleanupFolder(path));}
\DoxyCodeLine{00601 }
\DoxyCodeLine{00602   QMenu menu(\textcolor{keyword}{this});}
\DoxyCodeLine{00603   \textcolor{keywordflow}{if} (isLevelFolder) \{}
\DoxyCodeLine{00604     \mbox{\hyperlink{class_studio_palette_tree_viewer_ae8c251721c4e26a121ef3bb783b1d2a0}{createMenuAction}}(menu, tr(\textcolor{stringliteral}{"{}New Palette"{}}), \textcolor{stringliteral}{"{}addNewPlt()"{}});}
\DoxyCodeLine{00605     \mbox{\hyperlink{class_studio_palette_tree_viewer_ae8c251721c4e26a121ef3bb783b1d2a0}{createMenuAction}}(menu, tr(\textcolor{stringliteral}{"{}New Folder"{}}), \textcolor{stringliteral}{"{}addNewFolder()"{}});}
\DoxyCodeLine{00606   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (studioPlt-\/>isCleanupFolder(path)) \{}
\DoxyCodeLine{00607     \mbox{\hyperlink{class_studio_palette_tree_viewer_ae8c251721c4e26a121ef3bb783b1d2a0}{createMenuAction}}(menu, tr(\textcolor{stringliteral}{"{}New Cleanup Palette"{}}), \textcolor{stringliteral}{"{}addNewPlt()"{}});}
\DoxyCodeLine{00608     \mbox{\hyperlink{class_studio_palette_tree_viewer_ae8c251721c4e26a121ef3bb783b1d2a0}{createMenuAction}}(menu, tr(\textcolor{stringliteral}{"{}New Folder"{}}), \textcolor{stringliteral}{"{}addNewFolder()"{}});}
\DoxyCodeLine{00609   \}}
\DoxyCodeLine{00610 }
\DoxyCodeLine{00611   \textcolor{keywordflow}{if} (studioPlt-\/>isFolder(path) \&\& studioPlt-\/>getLevelPalettesRoot() != path \&\&}
\DoxyCodeLine{00612       studioPlt-\/>getCleanupPalettesRoot() != path \&\&}
\DoxyCodeLine{00613       \mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}C:\(\backslash\)\(\backslash\)Toonz 6.0 stuff\(\backslash\)\(\backslash\)projects\(\backslash\)\(\backslash\)Project Palettes"{}}) !=}
\DoxyCodeLine{00614           path)  \textcolor{comment}{// DAFARE studioPlt-\/>getProjectPalettesRoot(); Per ora lo}}
\DoxyCodeLine{00615                  \textcolor{comment}{// fisso)}}
\DoxyCodeLine{00616   \{}
\DoxyCodeLine{00617     menu.addSeparator();}
\DoxyCodeLine{00618     \mbox{\hyperlink{class_studio_palette_tree_viewer_ae8c251721c4e26a121ef3bb783b1d2a0}{createMenuAction}}(menu, tr(\textcolor{stringliteral}{"{}Delete Folder"{}}), \textcolor{stringliteral}{"{}deleteItem()"{}});}
\DoxyCodeLine{00619   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (studioPlt-\/>isPalette(path)) \{}
\DoxyCodeLine{00620     \textcolor{keywordflow}{if} (studioPlt-\/>isCleanupPalette(path)) \{}
\DoxyCodeLine{00621       \mbox{\hyperlink{class_studio_palette_tree_viewer_ae8c251721c4e26a121ef3bb783b1d2a0}{createMenuAction}}(menu, tr(\textcolor{stringliteral}{"{}Load into Current Cleaunp Palette"{}}),}
\DoxyCodeLine{00622                        \textcolor{stringliteral}{"{}loadInCurrentCleanupPlt()"{}});}
\DoxyCodeLine{00623       \mbox{\hyperlink{class_studio_palette_tree_viewer_ae8c251721c4e26a121ef3bb783b1d2a0}{createMenuAction}}(menu, tr(\textcolor{stringliteral}{"{}Replace with Current Cleaunp Palette"{}}),}
\DoxyCodeLine{00624                        \textcolor{stringliteral}{"{}replaceCurrentCleanupPlt()"{}});}
\DoxyCodeLine{00625       menu.addSeparator();}
\DoxyCodeLine{00626     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_stdPltHandle-\/>getPalette()) \{}
\DoxyCodeLine{00627       \mbox{\hyperlink{class_studio_palette_tree_viewer_ae8c251721c4e26a121ef3bb783b1d2a0}{createMenuAction}}(menu, tr(\textcolor{stringliteral}{"{}Load into Current Palette"{}}),}
\DoxyCodeLine{00628                        \textcolor{stringliteral}{"{}loadInCurrentPlt()"{}});}
\DoxyCodeLine{00629       \mbox{\hyperlink{class_studio_palette_tree_viewer_ae8c251721c4e26a121ef3bb783b1d2a0}{createMenuAction}}(menu, tr(\textcolor{stringliteral}{"{}Merge to Current Palette"{}}),}
\DoxyCodeLine{00630                        \textcolor{stringliteral}{"{}mergeToCurrentPlt()"{}});}
\DoxyCodeLine{00631       \mbox{\hyperlink{class_studio_palette_tree_viewer_ae8c251721c4e26a121ef3bb783b1d2a0}{createMenuAction}}(menu, tr(\textcolor{stringliteral}{"{}Replace with Current Palette"{}}),}
\DoxyCodeLine{00632                        \textcolor{stringliteral}{"{}replaceCurrentPlt()"{}});}
\DoxyCodeLine{00633       menu.addSeparator();}
\DoxyCodeLine{00634     \}}
\DoxyCodeLine{00635     \mbox{\hyperlink{class_studio_palette_tree_viewer_ae8c251721c4e26a121ef3bb783b1d2a0}{createMenuAction}}(menu, tr(\textcolor{stringliteral}{"{}Delete Palette"{}}), \textcolor{stringliteral}{"{}deleteItem()"{}});}
\DoxyCodeLine{00636     menu.addSeparator();}
\DoxyCodeLine{00637     menu.addAction(}
\DoxyCodeLine{00638         CommandManager::instance()-\/>getAction(\textcolor{stringliteral}{"{}MI\_LoadColorModelInStdPlt"{}}));}
\DoxyCodeLine{00639   \}}
\DoxyCodeLine{00640   \textcolor{keywordflow}{if} (isLevelFolder) \{}
\DoxyCodeLine{00641     menu.addSeparator();}
\DoxyCodeLine{00642     \mbox{\hyperlink{class_studio_palette_tree_viewer_ae8c251721c4e26a121ef3bb783b1d2a0}{createMenuAction}}(menu, tr(\textcolor{stringliteral}{"{}Search for Palettes"{}}), \textcolor{stringliteral}{"{}searchForPlt()"{}});}
\DoxyCodeLine{00643   \}}
\DoxyCodeLine{00644   menu.exec(event-\/>globalPos());}
\DoxyCodeLine{00645 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00971}{create\+Menu\+Action()}}, and \mbox{\hyperlink{l00259}{get\+Current\+Folder\+Path()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_aba38e878c7e1dc0981cc25b24186ac0c}\label{class_studio_palette_tree_viewer_aba38e878c7e1dc0981cc25b24186ac0c}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!convertToStudioPalette@{convertToStudioPalette}}
\index{convertToStudioPalette@{convertToStudioPalette}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{convertToStudioPalette}{convertToStudioPalette}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::convert\+To\+Studio\+Palette (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Convert level palette to studio palette. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00571                                                      \{}
\DoxyCodeLine{00572   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path               = \mbox{\hyperlink{class_studio_palette_tree_viewer_a5b2365c3338ed80d9dfe8ea7cecb4241}{getItemPath}}(currentItem());}
\DoxyCodeLine{00573   \mbox{\hyperlink{class_studio_palette}{StudioPalette}} *studioPalette = StudioPalette::instance();}
\DoxyCodeLine{00574   \textcolor{keywordflow}{if} (studioPalette-\/>isPalette(path)) \{}
\DoxyCodeLine{00575     \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = studioPalette-\/>getPalette(path);}
\DoxyCodeLine{00576 }
\DoxyCodeLine{00577     \textcolor{keywordflow}{if} (!palette) \{}
\DoxyCodeLine{00578       error(\textcolor{stringliteral}{"{}Can't touch palette"{}});}
\DoxyCodeLine{00579       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00580     \}}
\DoxyCodeLine{00581 }
\DoxyCodeLine{00582     \textcolor{keywordflow}{if} (m\_currentPalette-\/>\mbox{\hyperlink{class_t_palette_af0bb56df19af40d1a729482efc85f492}{getPaletteName}}() != palette-\/>getPaletteName()) \{}
\DoxyCodeLine{00583       error(\textcolor{stringliteral}{"{}Can't touch palette"{}});}
\DoxyCodeLine{00584       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00585     \}}
\DoxyCodeLine{00586 }
\DoxyCodeLine{00587     QString question =}
\DoxyCodeLine{00588         tr(\textcolor{stringliteral}{"{}Convert \%1 to Studio Palette and Overwrite. \(\backslash\)nAre you sure ?"{}})}
\DoxyCodeLine{00589             .arg(QString::fromStdWString(path.getWideString()));}
\DoxyCodeLine{00590     \textcolor{keywordtype}{int} ret = DVGui::MsgBox(question, tr(\textcolor{stringliteral}{"{}Convert"{}}), tr(\textcolor{stringliteral}{"{}Cancel"{}}));}
\DoxyCodeLine{00591     \textcolor{keywordflow}{if} (ret == 0 || ret == 2) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00592 }
\DoxyCodeLine{00593     \textcolor{comment}{// apply global name}}
\DoxyCodeLine{00594     time\_t ltime;}
\DoxyCodeLine{00595     time(\&ltime);}
\DoxyCodeLine{00596     wstring gname = std::to\_wstring(ltime) + L\textcolor{stringliteral}{"{}\_"{}} + std::to\_wstring(rand());}
\DoxyCodeLine{00597     m\_currentPalette-\/>\mbox{\hyperlink{class_t_palette_a0d1a5c3b332f133235f6fd758d22f683}{setGlobalName}}(gname);}
\DoxyCodeLine{00598     studioPalette-\/>setStylesGlobalNames(m\_currentPalette.getPointer());}
\DoxyCodeLine{00599     studioPalette-\/>save(path, m\_currentPalette.getPointer());}
\DoxyCodeLine{00600 }
\DoxyCodeLine{00601     m\_currentPalette-\/>\mbox{\hyperlink{class_t_palette_a382fa102abee4e69e386cb5a4d8d5184}{setDirtyFlag}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00602     currentItem()-\/>setIcon(0, m\_studioPaletteIcon);}
\DoxyCodeLine{00603 }
\DoxyCodeLine{00604   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00605     error(\textcolor{stringliteral}{"{}Can't find palette"{}});}
\DoxyCodeLine{00606 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00248}{get\+Item\+Path()}}, \mbox{\hyperlink{l00414}{TPalette\+::get\+Palette\+Name()}}, \mbox{\hyperlink{l00240}{TPalette\+::set\+Dirty\+Flag()}}, and \mbox{\hyperlink{l00236}{TPalette\+::set\+Global\+Name()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a0a8916e68466f52ca64003f2f8b3f90c}\label{class_studio_palette_tree_viewer_a0a8916e68466f52ca64003f2f8b3f90c}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!createItem@{createItem}}
\index{createItem@{createItem}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{createItem()}{createItem()}}
{\footnotesize\ttfamily QTree\+Widget\+Item $\ast$ Studio\+Palette\+Tree\+Viewer\+::create\+Item (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}]{path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Create a new item related to path {\bfseries{path}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00226                                                                          \{}
\DoxyCodeLine{00227   \textcolor{keyword}{static} QPixmap PaletteIconPxmp(\textcolor{stringliteral}{"{}:Resources/icon.png"{}});}
\DoxyCodeLine{00228   \textcolor{keyword}{static} QPixmap FolderIconPxmp(\textcolor{stringliteral}{"{}:Resources/newfolder\_over.png"{}});}
\DoxyCodeLine{00229 }
\DoxyCodeLine{00230   \mbox{\hyperlink{class_studio_palette}{StudioPalette}} *studioPlt = StudioPalette::instance();}
\DoxyCodeLine{00231 }
\DoxyCodeLine{00232   QString itemName = QString(path.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}().c\_str());}
\DoxyCodeLine{00233   QTreeWidgetItem *item =}
\DoxyCodeLine{00234       \textcolor{keyword}{new} QTreeWidgetItem((QTreeWidget *)0, QStringList(itemName));}
\DoxyCodeLine{00235   \textcolor{keywordflow}{if} (studioPlt-\/>isPalette(path))}
\DoxyCodeLine{00236     item-\/>setIcon(0, PaletteIconPxmp);}
\DoxyCodeLine{00237   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (studioPlt-\/>isFolder(path))}
\DoxyCodeLine{00238     item-\/>setIcon(0, FolderIconPxmp);}
\DoxyCodeLine{00239   item-\/>setData(1, Qt::UserRole, toQString(path));}
\DoxyCodeLine{00240   item-\/>setFlags(item-\/>flags() | Qt::ItemIsEditable);}
\DoxyCodeLine{00241 }
\DoxyCodeLine{00242   \textcolor{keywordflow}{return} item;}
\DoxyCodeLine{00243 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00636}{TFile\+Path\+::get\+Name()}}.



Referenced by \mbox{\hyperlink{l00330}{refresh\+Item()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_ae8c251721c4e26a121ef3bb783b1d2a0}\label{class_studio_palette_tree_viewer_ae8c251721c4e26a121ef3bb783b1d2a0}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!createMenuAction@{createMenuAction}}
\index{createMenuAction@{createMenuAction}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{createMenuAction()}{createMenuAction()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::create\+Menu\+Action (\begin{DoxyParamCaption}\item[{QMenu \&}]{menu,  }\item[{const char $\ast$}]{id,  }\item[{QString}]{name,  }\item[{const char $\ast$}]{slot }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Add an action to menu {\bfseries{menu}}; the action has text {\bfseries{name}} and its {\bfseries{triggered()}} signal is connetted with {\bfseries{slot}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00972                                                                                \{}
\DoxyCodeLine{00973   QAction *act = menu.addAction(name);}
\DoxyCodeLine{00974   \textcolor{keywordtype}{string} slotName(slot);}
\DoxyCodeLine{00975   slotName = string(\textcolor{stringliteral}{"{}1"{}}) + slotName;}
\DoxyCodeLine{00976   connect(act, SIGNAL(triggered()), slotName.c\_str());}
\DoxyCodeLine{00977 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00589}{context\+Menu\+Event()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a92abdc44fb9945d40ac0f9f901e6f704}\label{class_studio_palette_tree_viewer_a92abdc44fb9945d40ac0f9f901e6f704}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!createMenuAction@{createMenuAction}}
\index{createMenuAction@{createMenuAction}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{createMenuAction()}{createMenuAction()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::create\+Menu\+Action (\begin{DoxyParamCaption}\item[{QMenu \&}]{menu,  }\item[{QString}]{name,  }\item[{const char $\ast$}]{slot }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Add an action to menu {\bfseries{menu}}; the action has text {\bfseries{name}} and its {\bfseries{triggered()}} signal is connetted with {\bfseries{slot}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00652                                                                  \{}
\DoxyCodeLine{00653   QAction *act = menu.addAction(name);}
\DoxyCodeLine{00654   \textcolor{keywordtype}{string} slotName(slot);}
\DoxyCodeLine{00655   slotName = string(\textcolor{stringliteral}{"{}1"{}}) + slotName;}
\DoxyCodeLine{00656   connect(act, SIGNAL(triggered()), slotName.c\_str());}
\DoxyCodeLine{00657 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a1db9c3187eab1dd0297dd6be214cac33}\label{class_studio_palette_tree_viewer_a1db9c3187eab1dd0297dd6be214cac33}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!createRootItem@{createRootItem}}
\index{createRootItem@{createRootItem}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{createRootItem()}{createRootItem()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily QTree\+Widget\+Item $\ast$ Studio\+Palette\+Tree\+Viewer\+::create\+Root\+Item (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}]{path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Create and refresh root item\+: Studio Palette and Cleanup Palette. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00195                                                                        \{}
\DoxyCodeLine{00196   QString rootName = QString::fromStdWString(path.getWideName());}
\DoxyCodeLine{00197   \textcolor{keywordflow}{if} (rootName != \textcolor{stringliteral}{"{}Global Palettes"{}}) rootName = \textcolor{stringliteral}{"{}Project Palettes"{}};}
\DoxyCodeLine{00198   QTreeWidgetItem *rootItem =}
\DoxyCodeLine{00199       \textcolor{keyword}{new} QTreeWidgetItem((QTreeWidget *)0, QStringList(rootName));}
\DoxyCodeLine{00200   rootItem-\/>setIcon(0, createQIcon(\textcolor{stringliteral}{"{}folder"{}}, \textcolor{keyword}{true}));}
\DoxyCodeLine{00201   rootItem-\/>setData(1, Qt::UserRole, toQString(path));}
\DoxyCodeLine{00202 }
\DoxyCodeLine{00203   \mbox{\hyperlink{class_studio_palette_tree_viewer_ad83cc7bd4ac97500ed0625afc790c6d9}{refreshItem}}(rootItem);}
\DoxyCodeLine{00204 }
\DoxyCodeLine{00205   \textcolor{keywordflow}{return} rootItem;}
\DoxyCodeLine{00206 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00330}{refresh\+Item()}}.



Referenced by \mbox{\hyperlink{l00407}{reset\+Project\+Palette\+Folder()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a37981cfa5d88073276c9564209874a65}\label{class_studio_palette_tree_viewer_a37981cfa5d88073276c9564209874a65}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!createRootItem@{createRootItem}}
\index{createRootItem@{createRootItem}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{createRootItem()}{createRootItem()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily QTree\+Widget\+Item $\ast$ Studio\+Palette\+Tree\+Viewer\+::create\+Root\+Item (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}]{path,  }\item[{const QPixmap}]{pix }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Create root item related to path {\bfseries{path}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00188                                                                             \{}
\DoxyCodeLine{00189   QString rootName = QString(path.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}().c\_str());}
\DoxyCodeLine{00190   QTreeWidgetItem *rootItem =}
\DoxyCodeLine{00191       \textcolor{keyword}{new} QTreeWidgetItem((QTreeWidget *)0, QStringList(rootName));}
\DoxyCodeLine{00192   rootItem-\/>setIcon(0, pix);}
\DoxyCodeLine{00193   rootItem-\/>setData(1, Qt::UserRole, toQString(path));}
\DoxyCodeLine{00194 }
\DoxyCodeLine{00195   \mbox{\hyperlink{class_studio_palette_tree_viewer_ad83cc7bd4ac97500ed0625afc790c6d9}{refreshItem}}(rootItem);}
\DoxyCodeLine{00196 }
\DoxyCodeLine{00197   \textcolor{keywordflow}{return} rootItem;}
\DoxyCodeLine{00198 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00636}{TFile\+Path\+::get\+Name()}}, and \mbox{\hyperlink{l00330}{refresh\+Item()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a17200c8bfb58803af40f6f4b8ef734c2}\label{class_studio_palette_tree_viewer_a17200c8bfb58803af40f6f4b8ef734c2}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!deleteItem@{deleteItem}}
\index{deleteItem@{deleteItem}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{deleteItem}{deleteItem}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::delete\+Item (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Delete current item path from {\bfseries{\mbox{\hyperlink{class_studio_palette}{Studio\+Palette}}}}. If item is a not empty folder send a question to know if must delete item or not. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00486                                          \{}
\DoxyCodeLine{00487   \textcolor{keywordflow}{if} (!currentItem()) \{}
\DoxyCodeLine{00488     error(\textcolor{stringliteral}{"{}Nothing to delete"{}});}
\DoxyCodeLine{00489     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00490   \}}
\DoxyCodeLine{00491   QTreeWidgetItem *parent = currentItem()-\/>parent();}
\DoxyCodeLine{00492   \textcolor{keywordflow}{if} (!parent) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00493 }
\DoxyCodeLine{00494   \textcolor{keywordflow}{if} (currentItem()-\/>childCount() > 0) \{}
\DoxyCodeLine{00495     QString question;}
\DoxyCodeLine{00496     question = tr(\textcolor{stringliteral}{"{}This folder is not empty. Delete anyway?"{}});}
\DoxyCodeLine{00497     \textcolor{keywordtype}{int} ret  = MsgBox(0, question, QObject::tr(\textcolor{stringliteral}{"{}Yes"{}}), QObject::tr(\textcolor{stringliteral}{"{}No"{}}));}
\DoxyCodeLine{00498     \textcolor{keywordflow}{if} (ret == 0 || ret == 2) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00499   \}}
\DoxyCodeLine{00500 }
\DoxyCodeLine{00501   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path           = \mbox{\hyperlink{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}{getCurrentFolderPath}}();}
\DoxyCodeLine{00502   \mbox{\hyperlink{class_studio_palette}{StudioPalette}} *studioPlt = StudioPalette::instance();}
\DoxyCodeLine{00503   \textcolor{keywordflow}{if} (studioPlt-\/>isFolder(path)) \{}
\DoxyCodeLine{00504     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00505       \mbox{\hyperlink{namespace_studio_palette_cmd_af2894c04809b30eb8e0bf94d6d4df6e8}{StudioPaletteCmd::deleteFolder}}(path);}
\DoxyCodeLine{00506     \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{00507       error(\textcolor{stringliteral}{"{}Can't delete palette: "{}} +}
\DoxyCodeLine{00508             QString(toString(e.getMessage()).c\_str()));}
\DoxyCodeLine{00509     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00510       error(\textcolor{stringliteral}{"{}Can't delete palette"{}});}
\DoxyCodeLine{00511     \}}
\DoxyCodeLine{00512   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00513     assert(studioPlt-\/>isPalette(path));}
\DoxyCodeLine{00514     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00515       \mbox{\hyperlink{namespace_studio_palette_cmd_a641fa67fe539b48abccf84da592626ca}{StudioPaletteCmd::deletePalette}}(path);}
\DoxyCodeLine{00516     \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{00517       error(\textcolor{stringliteral}{"{}Can't delete palette: "{}} +}
\DoxyCodeLine{00518             QString(toString(e.getMessage()).c\_str()));}
\DoxyCodeLine{00519     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00520       error(\textcolor{stringliteral}{"{}Can't delete palette"{}});}
\DoxyCodeLine{00521     \}}
\DoxyCodeLine{00522   \}}
\DoxyCodeLine{00523 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00491}{Studio\+Palette\+Cmd\+::delete\+Folder()}}, \mbox{\hyperlink{l00416}{Studio\+Palette\+Cmd\+::delete\+Palette()}}, and \mbox{\hyperlink{l00259}{get\+Current\+Folder\+Path()}}.



Referenced by \mbox{\hyperlink{l00649}{delete\+Items()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_ae528a3de5967b2082bb192d272d5bfa5}\label{class_studio_palette_tree_viewer_ae528a3de5967b2082bb192d272d5bfa5}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!deleteItem@{deleteItem}}
\index{deleteItem@{deleteItem}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{deleteItem()}{deleteItem()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::delete\+Item (\begin{DoxyParamCaption}\item[{QTree\+Widget\+Item $\ast$}]{item }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Delete {\bfseries{item}} path from {\bfseries{\mbox{\hyperlink{class_studio_palette}{Studio\+Palette}}}}. If item is a not empty folder send a question to know if must delete item or not. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00610                                                               \{}
\DoxyCodeLine{00611   QTreeWidgetItem *parent = item-\/>parent();}
\DoxyCodeLine{00612   \textcolor{keywordflow}{if} (!parent) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00613 }
\DoxyCodeLine{00614   \textcolor{keywordflow}{if} (item-\/>childCount() > 0) \{}
\DoxyCodeLine{00615     QString question;}
\DoxyCodeLine{00616     question = tr(\textcolor{stringliteral}{"{}This folder is not empty. Delete anyway?"{}});}
\DoxyCodeLine{00617     \textcolor{keywordtype}{int} ret  = DVGui::MsgBox(question, tr(\textcolor{stringliteral}{"{}Delete"{}}), tr(\textcolor{stringliteral}{"{}Cancel"{}}));}
\DoxyCodeLine{00618     \textcolor{keywordflow}{if} (ret == 0 || ret == 2) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00619   \}}
\DoxyCodeLine{00620 }
\DoxyCodeLine{00621   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path               = \mbox{\hyperlink{class_studio_palette_tree_viewer_a5b2365c3338ed80d9dfe8ea7cecb4241}{getItemPath}}(item);}
\DoxyCodeLine{00622   \mbox{\hyperlink{class_studio_palette}{StudioPalette}} *studioPalette = StudioPalette::instance();}
\DoxyCodeLine{00623   \textcolor{keywordflow}{if} (studioPalette-\/>isFolder(path)) \{}
\DoxyCodeLine{00624     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00625       \mbox{\hyperlink{namespace_studio_palette_cmd_af2894c04809b30eb8e0bf94d6d4df6e8}{StudioPaletteCmd::deleteFolder}}(path);}
\DoxyCodeLine{00626     \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{00627       error(\textcolor{stringliteral}{"{}Can't delete folder: "{}} +}
\DoxyCodeLine{00628             QString(::to\_string(e.getMessage()).c\_str()));}
\DoxyCodeLine{00629     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00630       error(\textcolor{stringliteral}{"{}Can't delete folder"{}});}
\DoxyCodeLine{00631     \}}
\DoxyCodeLine{00632   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00633     assert(studioPalette-\/>isPalette(path));}
\DoxyCodeLine{00634     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00635       \mbox{\hyperlink{namespace_studio_palette_cmd_a641fa67fe539b48abccf84da592626ca}{StudioPaletteCmd::deletePalette}}(path);}
\DoxyCodeLine{00636     \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{00637       error(\textcolor{stringliteral}{"{}Can't delete palette: "{}} +}
\DoxyCodeLine{00638             QString(::to\_string(e.getMessage()).c\_str()));}
\DoxyCodeLine{00639     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00640       error(\textcolor{stringliteral}{"{}Can't delete palette"{}});}
\DoxyCodeLine{00641     \}}
\DoxyCodeLine{00642   \}}
\DoxyCodeLine{00643 }
\DoxyCodeLine{00644   \mbox{\hyperlink{class_studio_palette_tree_viewer_ad83cc7bd4ac97500ed0625afc790c6d9}{refreshItem}}(parent);}
\DoxyCodeLine{00645 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00491}{Studio\+Palette\+Cmd\+::delete\+Folder()}}, \mbox{\hyperlink{l00416}{Studio\+Palette\+Cmd\+::delete\+Palette()}}, \mbox{\hyperlink{l00248}{get\+Item\+Path()}}, and \mbox{\hyperlink{l00330}{refresh\+Item()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a5a093802a4783f933cfdb9a4755ce12d}\label{class_studio_palette_tree_viewer_a5a093802a4783f933cfdb9a4755ce12d}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!deleteItems@{deleteItems}}
\index{deleteItems@{deleteItems}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{deleteItems}{deleteItems}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::delete\+Items (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Delete all item selected recalling {\bfseries{\mbox{\hyperlink{class_studio_palette_tree_viewer_a17200c8bfb58803af40f6f4b8ef734c2}{delete\+Item()}}}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00649                                           \{}
\DoxyCodeLine{00650   QList<QTreeWidgetItem *> items = selectedItems();}
\DoxyCodeLine{00651   \textcolor{keywordtype}{int} count                      = items.size();}
\DoxyCodeLine{00652 }
\DoxyCodeLine{00653   \textcolor{keywordflow}{if} (count == 0) \{}
\DoxyCodeLine{00654     error(\textcolor{stringliteral}{"{}Nothing to delete"{}});}
\DoxyCodeLine{00655     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00656   \}}
\DoxyCodeLine{00657   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00658   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{00659   \textcolor{keywordflow}{for} (i = 0; i < count; i++) \mbox{\hyperlink{class_studio_palette_tree_viewer_a17200c8bfb58803af40f6f4b8ef734c2}{deleteItem}}(items[i]);}
\DoxyCodeLine{00660   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{00661 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00486}{delete\+Item()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a52eb83179f1bb72f9970b334169fe7ad}\label{class_studio_palette_tree_viewer_a52eb83179f1bb72f9970b334169fe7ad}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!dragEnterEvent@{dragEnterEvent}}
\index{dragEnterEvent@{dragEnterEvent}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{dragEnterEvent()}{dragEnterEvent()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::drag\+Enter\+Event (\begin{DoxyParamCaption}\item[{QDrag\+Enter\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}

Verify drag enter data, if it has an url and it\textquotesingle{}s path is a palette or data is a \mbox{\hyperlink{class_palette_data}{Palette\+Data}} accept drag event. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00691                                                                    \{}
\DoxyCodeLine{00692   \textcolor{keyword}{const} QMimeData *mimeData      = \textcolor{keyword}{event}-\/>mimeData();}
\DoxyCodeLine{00693   \textcolor{keyword}{const} \mbox{\hyperlink{class_palette_data}{PaletteData}} *paletteData = \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_palette_data}{PaletteData}} *\textcolor{keyword}{>}(mimeData);}
\DoxyCodeLine{00694 }
\DoxyCodeLine{00695   \textcolor{keywordflow}{if} (mimeData-\/>hasUrls()) \{}
\DoxyCodeLine{00696     \textcolor{keywordflow}{if} (mimeData-\/>urls().size() != 1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00697     QUrl url = mimeData-\/>urls()[0];}
\DoxyCodeLine{00698     \mbox{\hyperlink{class_t_file_path}{TFilePath}} path(url.toLocalFile().toStdWString());}
\DoxyCodeLine{00699     \textcolor{keywordflow}{if} (path.isEmpty() || (path.getType() != \textcolor{stringliteral}{"{}tpl"{}} \&\& path.getType() != \textcolor{stringliteral}{"{}pli"{}} \&\&}
\DoxyCodeLine{00700                            path.getType() != \textcolor{stringliteral}{"{}tlv"{}} \&\& path.getType() != \textcolor{stringliteral}{"{}tnz"{}}))}
\DoxyCodeLine{00701       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00702     \textcolor{keyword}{event}-\/>acceptProposedAction();}
\DoxyCodeLine{00703   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (paletteData \&\& !paletteData-\/>hasStyleIndeces())}
\DoxyCodeLine{00704     \textcolor{keyword}{event}-\/>acceptProposedAction();}
\DoxyCodeLine{00705   viewport()-\/>update();}
\DoxyCodeLine{00706 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00225}{TFile\+Path\+::get\+Type()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_ad1db2141b86b77879486d82df54cae8c}\label{class_studio_palette_tree_viewer_ad1db2141b86b77879486d82df54cae8c}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!dragLeaveEvent@{dragLeaveEvent}}
\index{dragLeaveEvent@{dragLeaveEvent}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{dragLeaveEvent()}{dragLeaveEvent()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::drag\+Leave\+Event (\begin{DoxyParamCaption}\item[{QDrag\+Leave\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}

Set drop\+Item to 0 and update the tree. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00788                                                                    \{}
\DoxyCodeLine{00789   m\_dropItem = 0;}
\DoxyCodeLine{00790   update();}
\DoxyCodeLine{00791 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a5728c37009972308d0bd10127c2483e4}\label{class_studio_palette_tree_viewer_a5728c37009972308d0bd10127c2483e4}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!dragMoveEvent@{dragMoveEvent}}
\index{dragMoveEvent@{dragMoveEvent}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{dragMoveEvent()}{dragMoveEvent()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::drag\+Move\+Event (\begin{DoxyParamCaption}\item[{QDrag\+Move\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}

Find item folder nearest to current position. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00711                                                                  \{}
\DoxyCodeLine{00712   QTreeWidgetItem *item = itemAt(event-\/>pos());}
\DoxyCodeLine{00713   \mbox{\hyperlink{class_t_file_path}{TFilePath}} newPath     = \mbox{\hyperlink{class_studio_palette_tree_viewer_afc12eedb3554a41b519b45177a8ff731}{getFolderPath}}(item);}
\DoxyCodeLine{00714 }
\DoxyCodeLine{00715   \textcolor{keywordflow}{if} (newPath.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tpl"{}}) \{}
\DoxyCodeLine{00716     m\_dropItem = 0;}
\DoxyCodeLine{00717     \textcolor{keyword}{event}-\/>ignore();}
\DoxyCodeLine{00718   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00719     m\_dropItem = item;}
\DoxyCodeLine{00720     \textcolor{keyword}{event}-\/>acceptProposedAction();}
\DoxyCodeLine{00721   \}}
\DoxyCodeLine{00722   viewport()-\/>update();}
\DoxyCodeLine{00723 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00249}{get\+Folder\+Path()}}, and \mbox{\hyperlink{l00225}{TFile\+Path\+::get\+Type()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_aaadd323c7e582f03145592cb3ed60aab}\label{class_studio_palette_tree_viewer_aaadd323c7e582f03145592cb3ed60aab}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!dropEvent@{dropEvent}}
\index{dropEvent@{dropEvent}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{dropEvent()}{dropEvent()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::drop\+Event (\begin{DoxyParamCaption}\item[{QDrop\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}

Execute drop event. If dropped palette is in studio palette folder move palette, otherwise copy palette in current folder. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00729                                                          \{}
\DoxyCodeLine{00730   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path;}
\DoxyCodeLine{00731   \textcolor{keyword}{const} QMimeData *mimeData = \textcolor{keyword}{event}-\/>mimeData();}
\DoxyCodeLine{00732   \textcolor{keywordflow}{if} (!mimeData-\/>hasUrls()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00733 }
\DoxyCodeLine{00734   \textcolor{keywordflow}{if} (mimeData-\/>urls().size() != 1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00735 }
\DoxyCodeLine{00736   QUrl url = mimeData-\/>urls()[0];}
\DoxyCodeLine{00737   path     = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(url.toLocalFile().toStdWString());}
\DoxyCodeLine{00738 }
\DoxyCodeLine{00739   \textcolor{keyword}{event}-\/>setDropAction(Qt::CopyAction);}
\DoxyCodeLine{00740   \textcolor{keyword}{event}-\/>accept();}
\DoxyCodeLine{00741 }
\DoxyCodeLine{00742   \mbox{\hyperlink{class_t_file_path}{TFilePath}} newPath = \mbox{\hyperlink{class_studio_palette_tree_viewer_afc12eedb3554a41b519b45177a8ff731}{getFolderPath}}(m\_dropItem);}
\DoxyCodeLine{00743 }
\DoxyCodeLine{00744   \mbox{\hyperlink{class_studio_palette}{StudioPalette}} *studioPlt = StudioPalette::instance();}
\DoxyCodeLine{00745   \textcolor{keywordflow}{if} (path == newPath || path.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() == newPath) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00746 }
\DoxyCodeLine{00747   \textcolor{keywordflow}{if} (isInStudioPalette(path)) \{}
\DoxyCodeLine{00748     newPath += \mbox{\hyperlink{class_t_file_path}{TFilePath}}(path.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}() + path.\mbox{\hyperlink{class_t_file_path_ae69f3fd881d12ebb858c7462417c82b8}{getDottedType}}());}
\DoxyCodeLine{00749     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00750       \mbox{\hyperlink{namespace_studio_palette_cmd_a091a7f168889ea48f1ba76a21e9e244a}{StudioPaletteCmd::movePalette}}(newPath, path);}
\DoxyCodeLine{00751     \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{00752       error(\textcolor{stringliteral}{"{}Can't rename palette: "{}} +}
\DoxyCodeLine{00753             QString(toString(e.getMessage()).c\_str()));}
\DoxyCodeLine{00754     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00755       error(\textcolor{stringliteral}{"{}Can't rename palette"{}});}
\DoxyCodeLine{00756     \}}
\DoxyCodeLine{00757   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00758     \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = studioPlt-\/>getPalette(path);}
\DoxyCodeLine{00759     \textcolor{comment}{// Se non trova palette sto importando: -\/ la palette del livello corrente o}}
\DoxyCodeLine{00760     \textcolor{comment}{// -\/ la cleanupPalette!}}
\DoxyCodeLine{00761     \textcolor{keywordflow}{if} (!palette) \{}
\DoxyCodeLine{00762       \textcolor{keywordflow}{if} (path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}pli"{}} || path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tlv"{}}) \{}
\DoxyCodeLine{00763         \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level = m\_levelHandle-\/>getLevel();}
\DoxyCodeLine{00764         assert(level \&\& level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}());}
\DoxyCodeLine{00765         palette = level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}()-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}();}
\DoxyCodeLine{00766         path    = level-\/>\mbox{\hyperlink{class_t_xsh_level_ab8ffcf067cadf0e1c4081b54ffde249d}{getPath}}();}
\DoxyCodeLine{00767       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}}) \{}
\DoxyCodeLine{00768         palette =}
\DoxyCodeLine{00769             m\_sceneHandle-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}()-\/>getCleanupPalette();}
\DoxyCodeLine{00770         path = \mbox{\hyperlink{class_t_file_path}{TFilePath}}();}
\DoxyCodeLine{00771       \}}
\DoxyCodeLine{00772     \}}
\DoxyCodeLine{00773     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00774       \mbox{\hyperlink{namespace_studio_palette_cmd_ae42db0d6de444f183fd5aed671dbdae0}{StudioPaletteCmd::createPalette}}(newPath, path.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}(), palette);}
\DoxyCodeLine{00775     \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{00776       error(\textcolor{stringliteral}{"{}Can't create palette: "{}} +}
\DoxyCodeLine{00777             QString(toString(e.getMessage()).c\_str()));}
\DoxyCodeLine{00778     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00779       error(\textcolor{stringliteral}{"{}Can't create palette"{}});}
\DoxyCodeLine{00780     \}}
\DoxyCodeLine{00781   \}}
\DoxyCodeLine{00782   m\_dropItem = 0;}
\DoxyCodeLine{00783 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00697}{Studio\+Palette\+Cmd\+::create\+Palette()}}, \mbox{\hyperlink{l00570}{TFile\+Path\+::get\+Dotted\+Type()}}, \mbox{\hyperlink{l00249}{get\+Folder\+Path()}}, \mbox{\hyperlink{l00636}{TFile\+Path\+::get\+Name()}}, \mbox{\hyperlink{l00424}{TXsh\+Simple\+Level\+::get\+Palette()}}, \mbox{\hyperlink{l00683}{TFile\+Path\+::get\+Parent\+Dir()}}, \mbox{\hyperlink{l00121}{TXsh\+Level\+::get\+Path()}}, \mbox{\hyperlink{l00087}{Toonz\+Scene\+::get\+Properties()}}, \mbox{\hyperlink{l00095}{TXsh\+Level\+::get\+Simple\+Level()}}, \mbox{\hyperlink{l00225}{TFile\+Path\+::get\+Type()}}, and \mbox{\hyperlink{l00434}{Studio\+Palette\+Cmd\+::move\+Palette()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}\label{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!getCurrentFolderPath@{getCurrentFolderPath}}
\index{getCurrentFolderPath@{getCurrentFolderPath}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{getCurrentFolderPath()}{getCurrentFolderPath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Studio\+Palette\+Tree\+Viewer\+::get\+Current\+Folder\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Return current item path. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00259                                                         \{}
\DoxyCodeLine{00260   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_studio_palette_tree_viewer_afc12eedb3554a41b519b45177a8ff731}{getFolderPath}}(currentItem());}
\DoxyCodeLine{00261 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00249}{get\+Folder\+Path()}}.



Referenced by \mbox{\hyperlink{l00464}{add\+New\+Folder()}}, \mbox{\hyperlink{l00530}{add\+New\+Palette()}}, \mbox{\hyperlink{l00445}{add\+New\+Plt()}}, \mbox{\hyperlink{l00589}{context\+Menu\+Event()}}, \mbox{\hyperlink{l00486}{delete\+Item()}}, \mbox{\hyperlink{l00537}{load\+In\+Current\+Cleanup\+Plt()}}, \mbox{\hyperlink{l00553}{load\+In\+Current\+Plt()}}, \mbox{\hyperlink{l00569}{merge\+To\+Current\+Plt()}}, \mbox{\hyperlink{l00475}{on\+Current\+Item\+Changed()}}, \mbox{\hyperlink{l00374}{on\+Item\+Changed()}}, \mbox{\hyperlink{l00412}{on\+Item\+Selection\+Changed()}}, \mbox{\hyperlink{l00545}{replace\+Current\+Cleanup\+Plt()}}, \mbox{\hyperlink{l00561}{replace\+Current\+Plt()}}, \mbox{\hyperlink{l00665}{search\+For\+Palette()}}, \mbox{\hyperlink{l00528}{search\+For\+Plt()}}, and \mbox{\hyperlink{l00671}{start\+Drag\+Drop()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_ac473c25305b0d63319b2f5702ada3b9f}\label{class_studio_palette_tree_viewer_ac473c25305b0d63319b2f5702ada3b9f}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!getCurrentItemPath@{getCurrentItemPath}}
\index{getCurrentItemPath@{getCurrentItemPath}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{getCurrentItemPath()}{getCurrentItemPath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Studio\+Palette\+Tree\+Viewer\+::get\+Current\+Item\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00103 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_studio_palette_tree_viewer_a5b2365c3338ed80d9dfe8ea7cecb4241}{getItemPath}}(currentItem()); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a204b24c91a5a326f1a7bf0c2f1ec5d15}\label{class_studio_palette_tree_viewer_a204b24c91a5a326f1a7bf0c2f1ec5d15}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!getCurrentLevelHandle@{getCurrentLevelHandle}}
\index{getCurrentLevelHandle@{getCurrentLevelHandle}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{getCurrentLevelHandle()}{getCurrentLevelHandle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsh_level_handle}{TXsh\+Level\+Handle}} $\ast$ Studio\+Palette\+Tree\+Viewer\+::get\+Current\+Level\+Handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00081                                                  \{}
\DoxyCodeLine{00082     \textcolor{keywordflow}{return} m\_currentLevelHandle;}
\DoxyCodeLine{00083   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a9d05ca454c7f689a645472c5b47c1f77}\label{class_studio_palette_tree_viewer_a9d05ca454c7f689a645472c5b47c1f77}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!getFolderItem@{getFolderItem}}
\index{getFolderItem@{getFolderItem}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{getFolderItem()}{getFolderItem()}}
{\footnotesize\ttfamily QTree\+Widget\+Item $\ast$ Studio\+Palette\+Tree\+Viewer\+::get\+Folder\+Item (\begin{DoxyParamCaption}\item[{QTree\+Widget\+Item $\ast$}]{parent,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}]{path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Return item child of {\bfseries{parent}} identified by {\bfseries{path}}; if it doesn\textquotesingle{}t exist return 0. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00289                                                                               \{}
\DoxyCodeLine{00290   \textcolor{keywordtype}{int} childrenCount = parent-\/>childCount();}
\DoxyCodeLine{00291   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00292   \textcolor{keywordflow}{for} (i = 0; i < childrenCount; i++) \{}
\DoxyCodeLine{00293     QTreeWidgetItem *item = parent-\/>child(i);}
\DoxyCodeLine{00294     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_studio_palette_tree_viewer_afc12eedb3554a41b519b45177a8ff731}{getFolderPath}}(item) == path)}
\DoxyCodeLine{00295       \textcolor{keywordflow}{return} item;}
\DoxyCodeLine{00296     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00297       item = \mbox{\hyperlink{class_studio_palette_tree_viewer_a9d05ca454c7f689a645472c5b47c1f77}{getFolderItem}}(item, path);}
\DoxyCodeLine{00298       \textcolor{keywordflow}{if} (item) \textcolor{keywordflow}{return} item;}
\DoxyCodeLine{00299     \}}
\DoxyCodeLine{00300   \}}
\DoxyCodeLine{00301   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00302 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00288}{get\+Folder\+Item()}}, and \mbox{\hyperlink{l00249}{get\+Folder\+Path()}}.



Referenced by \mbox{\hyperlink{l00288}{get\+Folder\+Item()}}, and \mbox{\hyperlink{l00266}{get\+Item()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_afc12eedb3554a41b519b45177a8ff731}\label{class_studio_palette_tree_viewer_afc12eedb3554a41b519b45177a8ff731}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!getFolderPath@{getFolderPath}}
\index{getFolderPath@{getFolderPath}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{getFolderPath()}{getFolderPath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Studio\+Palette\+Tree\+Viewer\+::get\+Folder\+Path (\begin{DoxyParamCaption}\item[{QTree\+Widget\+Item $\ast$}]{item }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Return path related to item {\bfseries{item}} if {\bfseries{item}} exist, otherwise return an empty path {\bfseries{\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00249                                                                       \{}
\DoxyCodeLine{00250   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path =}
\DoxyCodeLine{00251       (item) ? \mbox{\hyperlink{class_t_file_path}{TFilePath}}(item-\/>data(1, Qt::UserRole).toString().toStdWString())}
\DoxyCodeLine{00252              : \mbox{\hyperlink{class_t_file_path}{TFilePath}}();}
\DoxyCodeLine{00253   \textcolor{keywordflow}{return} path;}
\DoxyCodeLine{00254 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00711}{drag\+Move\+Event()}}, \mbox{\hyperlink{l00729}{drop\+Event()}}, \mbox{\hyperlink{l00259}{get\+Current\+Folder\+Path()}}, \mbox{\hyperlink{l00288}{get\+Folder\+Item()}}, \mbox{\hyperlink{l00203}{is\+Root\+Item()}}, and \mbox{\hyperlink{l00330}{refresh\+Item()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a48a072cf3dc4a6a1a59a94bd1f03d142}\label{class_studio_palette_tree_viewer_a48a072cf3dc4a6a1a59a94bd1f03d142}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!getItem@{getItem}}
\index{getItem@{getItem}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{getItem()}{getItem()}}
{\footnotesize\ttfamily QTree\+Widget\+Item $\ast$ Studio\+Palette\+Tree\+Viewer\+::get\+Item (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}]{path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Return item identified by {\bfseries{path}}; if it doesn\textquotesingle{}t exist return 0. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00266                                                                       \{}
\DoxyCodeLine{00267   QList<QTreeWidgetItem *> oldItems =}
\DoxyCodeLine{00268       findItems(QString(\textcolor{stringliteral}{"{}"{}}), Qt::MatchContains, 0);}
\DoxyCodeLine{00269   \textcolor{keywordflow}{if} (oldItems.isEmpty()) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00270   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00271   \textcolor{keywordflow}{for} (i = 0; i < (int)oldItems.size(); i++) \{}
\DoxyCodeLine{00272     \mbox{\hyperlink{class_t_file_path}{TFilePath}} oldItemPath(}
\DoxyCodeLine{00273         oldItems[i]-\/>data(1, Qt::UserRole).toString().toStdWString());}
\DoxyCodeLine{00274     \textcolor{keywordflow}{if} (oldItemPath == path)}
\DoxyCodeLine{00275       \textcolor{keywordflow}{return} oldItems[i];}
\DoxyCodeLine{00276     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00277       QTreeWidgetItem *item = \mbox{\hyperlink{class_studio_palette_tree_viewer_a9d05ca454c7f689a645472c5b47c1f77}{getFolderItem}}(oldItems[i], path);}
\DoxyCodeLine{00278       \textcolor{keywordflow}{if} (item) \textcolor{keywordflow}{return} item;}
\DoxyCodeLine{00279     \}}
\DoxyCodeLine{00280   \}}
\DoxyCodeLine{00281   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00282 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00288}{get\+Folder\+Item()}}.



Referenced by \mbox{\hyperlink{l00464}{add\+New\+Folder()}}, \mbox{\hyperlink{l00530}{add\+New\+Palette()}}, \mbox{\hyperlink{l00445}{add\+New\+Plt()}}, \mbox{\hyperlink{l00475}{on\+Current\+Item\+Changed()}}, \mbox{\hyperlink{l00374}{on\+Item\+Changed()}}, \mbox{\hyperlink{l00412}{on\+Item\+Selection\+Changed()}}, and \mbox{\hyperlink{l00307}{refresh()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a5b2365c3338ed80d9dfe8ea7cecb4241}\label{class_studio_palette_tree_viewer_a5b2365c3338ed80d9dfe8ea7cecb4241}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!getItemPath@{getItemPath}}
\index{getItemPath@{getItemPath}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{getItemPath()}{getItemPath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Studio\+Palette\+Tree\+Viewer\+::get\+Item\+Path (\begin{DoxyParamCaption}\item[{QTree\+Widget\+Item $\ast$}]{item }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Return path related to item {\bfseries{item}} if {\bfseries{item}} exist, otherwise return an empty path {\bfseries{\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00248                                                                     \{}
\DoxyCodeLine{00249   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path =}
\DoxyCodeLine{00250       (item) ? \mbox{\hyperlink{class_t_file_path}{TFilePath}}(item-\/>data(1, Qt::UserRole).toString().toStdWString())}
\DoxyCodeLine{00251              : \mbox{\hyperlink{class_t_file_path}{TFilePath}}();}
\DoxyCodeLine{00252   \textcolor{keywordflow}{return} path;}
\DoxyCodeLine{00253 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00571}{convert\+To\+Studio\+Palette()}}, \mbox{\hyperlink{l00610}{delete\+Item()}}, \mbox{\hyperlink{l00765}{load\+In\+Current\+Palette()}}, \mbox{\hyperlink{l00849}{merge\+To\+Current\+Palette()}}, \mbox{\hyperlink{l00475}{on\+Current\+Item\+Changed()}}, \mbox{\hyperlink{l00808}{replace\+Current\+Palette()}}, and \mbox{\hyperlink{l00407}{reset\+Project\+Palette\+Folder()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_ae6546b86c3f2a68d2ca31dc982af1418}\label{class_studio_palette_tree_viewer_ae6546b86c3f2a68d2ca31dc982af1418}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!getLevelHandle@{getLevelHandle}}
\index{getLevelHandle@{getLevelHandle}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{getLevelHandle()}{getLevelHandle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsh_level_handle}{TXsh\+Level\+Handle}} $\ast$ Studio\+Palette\+Tree\+Viewer\+::get\+Level\+Handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00050 \{ \textcolor{keywordflow}{return} m\_levelHandle; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a90a64f4492bb042c677dbb3368ab4136}\label{class_studio_palette_tree_viewer_a90a64f4492bb042c677dbb3368ab4136}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!getLevelPaletteHandle@{getLevelPaletteHandle}}
\index{getLevelPaletteHandle@{getLevelPaletteHandle}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{getLevelPaletteHandle()}{getLevelPaletteHandle()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$ Studio\+Palette\+Tree\+Viewer\+::get\+Level\+Palette\+Handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00078 \{ \textcolor{keywordflow}{return} m\_levelPaletteHandle; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a90a64f4492bb042c677dbb3368ab4136}\label{class_studio_palette_tree_viewer_a90a64f4492bb042c677dbb3368ab4136}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!getLevelPaletteHandle@{getLevelPaletteHandle}}
\index{getLevelPaletteHandle@{getLevelPaletteHandle}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{getLevelPaletteHandle()}{getLevelPaletteHandle()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$ Studio\+Palette\+Tree\+Viewer\+::get\+Level\+Palette\+Handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00041 \{ \textcolor{keywordflow}{return} m\_levelPltHandle; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a703e565385480f46e4ab103a8db7316e}\label{class_studio_palette_tree_viewer_a703e565385480f46e4ab103a8db7316e}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!getSceneHandle@{getSceneHandle}}
\index{getSceneHandle@{getSceneHandle}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{getSceneHandle()}{getSceneHandle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_scene_handle}{TScene\+Handle}} $\ast$ Studio\+Palette\+Tree\+Viewer\+::get\+Scene\+Handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00047 \{ \textcolor{keywordflow}{return} m\_sceneHandle; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_aa86fc6c2fbc1005ef05d377cecb5a01e}\label{class_studio_palette_tree_viewer_aa86fc6c2fbc1005ef05d377cecb5a01e}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!getStdPaletteHandle@{getStdPaletteHandle}}
\index{getStdPaletteHandle@{getStdPaletteHandle}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{getStdPaletteHandle()}{getStdPaletteHandle()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$ Studio\+Palette\+Tree\+Viewer\+::get\+Std\+Palette\+Handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00086 \{ \textcolor{keywordflow}{return} m\_studioPaletteHandle; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_aa86fc6c2fbc1005ef05d377cecb5a01e}\label{class_studio_palette_tree_viewer_aa86fc6c2fbc1005ef05d377cecb5a01e}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!getStdPaletteHandle@{getStdPaletteHandle}}
\index{getStdPaletteHandle@{getStdPaletteHandle}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{getStdPaletteHandle()}{getStdPaletteHandle()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$ Studio\+Palette\+Tree\+Viewer\+::get\+Std\+Palette\+Handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00044 \{ \textcolor{keywordflow}{return} m\_stdPltHandle; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a9f42e973412d2d149b91fba2bcef642c}\label{class_studio_palette_tree_viewer_a9f42e973412d2d149b91fba2bcef642c}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!hideEvent@{hideEvent}}
\index{hideEvent@{hideEvent}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{hideEvent()}{hideEvent()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::hide\+Event (\begin{DoxyParamCaption}\item[{QHide\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Receive widget hide events. Remove this listener from {\bfseries{\mbox{\hyperlink{class_studio_palette}{Studio\+Palette}}}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00796                                                          \{}
\DoxyCodeLine{00797   StudioPalette::instance()-\/>removeListener(\textcolor{keyword}{this});}
\DoxyCodeLine{00798 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a3e3383c594288120c6f00438c2d889fe}\label{class_studio_palette_tree_viewer_a3e3383c594288120c6f00438c2d889fe}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!isRootItem@{isRootItem}}
\index{isRootItem@{isRootItem}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{isRootItem()}{isRootItem()}}
{\footnotesize\ttfamily bool Studio\+Palette\+Tree\+Viewer\+::is\+Root\+Item (\begin{DoxyParamCaption}\item[{QTree\+Widget\+Item $\ast$}]{item }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Return true if {\bfseries{item}} match with Studio Palette or Cleanup Palette folder.

Return true if {\bfseries{item}} is a root item; false otherwise. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00203                                                               \{}
\DoxyCodeLine{00204   assert(item);}
\DoxyCodeLine{00205   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = \mbox{\hyperlink{class_studio_palette_tree_viewer_afc12eedb3554a41b519b45177a8ff731}{getFolderPath}}(item);}
\DoxyCodeLine{00206 }
\DoxyCodeLine{00207   \textcolor{comment}{// DAFARE}}
\DoxyCodeLine{00208   \textcolor{comment}{// Oss.: se il folder non c'e' non fa nulla, non si aprono neanche i menu' da}}
\DoxyCodeLine{00209   \textcolor{comment}{// tasto destro!}}
\DoxyCodeLine{00210   \textcolor{comment}{// static QPixmap PaletteProjectIconPxmp("{}:Resources/studio\_plt\_project.png"{});}}
\DoxyCodeLine{00211   \mbox{\hyperlink{class_t_file_path}{TFilePath}} projectPltPath = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(}
\DoxyCodeLine{00212       \textcolor{stringliteral}{"{}C:\(\backslash\)\(\backslash\)Toonz 6.0 stuff\(\backslash\)\(\backslash\)projects\(\backslash\)\(\backslash\)Project Palettes"{}});  \textcolor{comment}{// studioPlt-\/>getProjectPalettesRoot();}}
\DoxyCodeLine{00213                                                            \textcolor{comment}{// Per ora lo fisso}}
\DoxyCodeLine{00214 }
\DoxyCodeLine{00215   \mbox{\hyperlink{class_studio_palette}{StudioPalette}} *stdPalette = StudioPalette::instance();}
\DoxyCodeLine{00216   \textcolor{keywordflow}{if} (path == stdPalette-\/>getCleanupPalettesRoot() ||}
\DoxyCodeLine{00217       path == stdPalette-\/>getLevelPalettesRoot() || path == projectPltPath)}
\DoxyCodeLine{00218     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00219 }
\DoxyCodeLine{00220   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00221 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00249}{get\+Folder\+Path()}}.



Referenced by \mbox{\hyperlink{l00403}{on\+Item\+Collapsed()}}, and \mbox{\hyperlink{l00394}{on\+Item\+Expanded()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a61d22683462cf149ae10c345f50cf667}\label{class_studio_palette_tree_viewer_a61d22683462cf149ae10c345f50cf667}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!loadInCurrentCleanupPlt@{loadInCurrentCleanupPlt}}
\index{loadInCurrentCleanupPlt@{loadInCurrentCleanupPlt}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{loadInCurrentCleanupPlt}{loadInCurrentCleanupPlt}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::load\+In\+Current\+Cleanup\+Plt (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Recall {\bfseries{Studio\+Palette\+Cmd\+::load\+Into\+Cleanup\+Palette}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00537                                                       \{}
\DoxyCodeLine{00538   StudioPaletteCmd::loadIntoCleanupPalette(m\_levelPltHandle, m\_sceneHandle,}
\DoxyCodeLine{00539                                            \mbox{\hyperlink{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}{getCurrentFolderPath}}());}
\DoxyCodeLine{00540 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00259}{get\+Current\+Folder\+Path()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a897e6041135cec873c04577593689fdb}\label{class_studio_palette_tree_viewer_a897e6041135cec873c04577593689fdb}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!loadInCurrentPalette@{loadInCurrentPalette}}
\index{loadInCurrentPalette@{loadInCurrentPalette}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{loadInCurrentPalette}{loadInCurrentPalette}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::load\+In\+Current\+Palette (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Recall {\bfseries{Studio\+Palette\+Cmd\+::load\+Into\+Current\+Palette}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00765                                                    \{}
\DoxyCodeLine{00766   QList<QTreeWidgetItem *> items = selectedItems();}
\DoxyCodeLine{00767   \textcolor{keywordtype}{int} count                      = items.size();}
\DoxyCodeLine{00768   \textcolor{keywordflow}{if} (count == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00769 }
\DoxyCodeLine{00770   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = m\_levelPaletteHandle-\/>getPalette();}
\DoxyCodeLine{00771   \textcolor{keywordflow}{if} (!palette) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00772 }
\DoxyCodeLine{00773   \textcolor{keywordflow}{if} (palette-\/>isLocked()) \{}
\DoxyCodeLine{00774     DVGui::warning(\textcolor{stringliteral}{"{}Palette is Locked!"{}});}
\DoxyCodeLine{00775     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00776   \}}
\DoxyCodeLine{00777 }
\DoxyCodeLine{00778   \mbox{\hyperlink{class_t_palette}{TPalette}} *newPalette =}
\DoxyCodeLine{00779       StudioPalette::instance()-\/>getPalette(\mbox{\hyperlink{class_studio_palette_tree_viewer_a5b2365c3338ed80d9dfe8ea7cecb4241}{getItemPath}}(items[0]), \textcolor{keyword}{false});}
\DoxyCodeLine{00780   \textcolor{keywordflow}{if} (!newPalette) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00781   \textcolor{keywordflow}{if} (m\_xsheetHandle) \{}
\DoxyCodeLine{00782     \textcolor{keywordtype}{int} ret = DVGui::eraseStylesInDemand(palette, m\_xsheetHandle, newPalette);}
\DoxyCodeLine{00783     \textcolor{keywordflow}{if} (ret == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00784   \}}
\DoxyCodeLine{00785 }
\DoxyCodeLine{00786   StudioPaletteCmd::loadIntoCurrentPalette(m\_levelPaletteHandle, newPalette);}
\DoxyCodeLine{00787   m\_currentLevelHandle-\/>notifyLevelChange();}
\DoxyCodeLine{00788 }
\DoxyCodeLine{00789   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level = m\_currentLevelHandle-\/>getLevel();}
\DoxyCodeLine{00790   \textcolor{keywordflow}{if} (level) \{}
\DoxyCodeLine{00791     std::vector<TFrameId> fids;}
\DoxyCodeLine{00792     level-\/>getFids(fids);}
\DoxyCodeLine{00793     invalidateIcons(level, fids);}
\DoxyCodeLine{00794   \}}
\DoxyCodeLine{00795 }
\DoxyCodeLine{00796   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00797   \textcolor{keywordflow}{for} (i = 1; i < count; i++) \{}
\DoxyCodeLine{00798     \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = \mbox{\hyperlink{class_studio_palette_tree_viewer_a5b2365c3338ed80d9dfe8ea7cecb4241}{getItemPath}}(items[i]);}
\DoxyCodeLine{00799     StudioPaletteCmd::mergeIntoCurrentPalette(m\_levelPaletteHandle, path);}
\DoxyCodeLine{00800   \}}
\DoxyCodeLine{00801   \textcolor{comment}{// in order to update the title bar of palette viewer}}
\DoxyCodeLine{00802   m\_levelPaletteHandle-\/>getPalette()-\/>\mbox{\hyperlink{class_t_palette_a382fa102abee4e69e386cb5a4d8d5184}{setDirtyFlag}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00803   m\_levelPaletteHandle-\/>notifyPaletteChanged();}
\DoxyCodeLine{00804 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00248}{get\+Item\+Path()}}, and \mbox{\hyperlink{l00240}{TPalette\+::set\+Dirty\+Flag()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a9a3eb22e14268c1c2cc424802eca6ff6}\label{class_studio_palette_tree_viewer_a9a3eb22e14268c1c2cc424802eca6ff6}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!loadInCurrentPaletteAndAdaptLevel@{loadInCurrentPaletteAndAdaptLevel}}
\index{loadInCurrentPaletteAndAdaptLevel@{loadInCurrentPaletteAndAdaptLevel}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{loadInCurrentPaletteAndAdaptLevel}{loadInCurrentPaletteAndAdaptLevel}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::load\+In\+Current\+Palette\+And\+Adapt\+Level (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00722                                                                 \{}
\DoxyCodeLine{00723   QList<QTreeWidgetItem *> items = selectedItems();}
\DoxyCodeLine{00724   assert(items.size() == 1);}
\DoxyCodeLine{00725 }
\DoxyCodeLine{00726   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = m\_levelPaletteHandle-\/>getPalette();}
\DoxyCodeLine{00727   \textcolor{keywordflow}{if} (!palette) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00728 }
\DoxyCodeLine{00729   \textcolor{comment}{// prevent crash when the command is applied to the palette level}}
\DoxyCodeLine{00730   \textcolor{keywordflow}{if} (!m\_currentLevelHandle-\/>getSimpleLevel()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00731 }
\DoxyCodeLine{00732   \mbox{\hyperlink{class_t_palette}{TPalette}} *newPalette =}
\DoxyCodeLine{00733       StudioPalette::instance()-\/>getPalette(\mbox{\hyperlink{class_studio_palette_tree_viewer_a5b2365c3338ed80d9dfe8ea7cecb4241}{getItemPath}}(items[0]), \textcolor{keyword}{true});}
\DoxyCodeLine{00734   \textcolor{keywordflow}{if} (!newPalette) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00735 }
\DoxyCodeLine{00736   \mbox{\hyperlink{class_adjust_palette_dialog}{AdjustPaletteDialog}} apd;}
\DoxyCodeLine{00737 }
\DoxyCodeLine{00738   \textcolor{keywordflow}{if} (apd.exec() != QDialog::Accepted) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00739 }
\DoxyCodeLine{00740   \textcolor{comment}{/* awful patch: since in StudioPaletteCmd(defined in toonzlib) I cannot use}}
\DoxyCodeLine{00741 \textcolor{comment}{the invalidateIcons(defined in toonzqt)}}
\DoxyCodeLine{00742 \textcolor{comment}{i do invalidate icons from here using a "{}fake TUndo"{}, named InvalidateIconsUndo.}}
\DoxyCodeLine{00743 \textcolor{comment}{And, since I need to refresh icons at the end of the processing, i have to put}}
\DoxyCodeLine{00744 \textcolor{comment}{that fake undo twice, one before and one after.}}
\DoxyCodeLine{00745 \textcolor{comment}{this way , when the user do either an undo or a redo operation, I am ensured}}
\DoxyCodeLine{00746 \textcolor{comment}{that the last operation is the icon refresh...}}
\DoxyCodeLine{00747 \textcolor{comment}{*/}}
\DoxyCodeLine{00748   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{00749 }
\DoxyCodeLine{00750   TUndoManager::manager()-\/>add(\textcolor{keyword}{new} \mbox{\hyperlink{class_invalidate_icons_undo}{InvalidateIconsUndo}}(m\_currentLevelHandle));}
\DoxyCodeLine{00751 }
\DoxyCodeLine{00752   StudioPaletteCmd::loadIntoCurrentPalette(m\_levelPaletteHandle, newPalette,}
\DoxyCodeLine{00753                                            m\_currentLevelHandle,}
\DoxyCodeLine{00754                                            apd.getTolerance());}
\DoxyCodeLine{00755 }
\DoxyCodeLine{00756   TUndoManager::manager()-\/>add(\textcolor{keyword}{new} \mbox{\hyperlink{class_invalidate_icons_undo}{InvalidateIconsUndo}}(m\_currentLevelHandle));}
\DoxyCodeLine{00757 }
\DoxyCodeLine{00758   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{00759 }
\DoxyCodeLine{00760   \mbox{\hyperlink{class_invalidate_icons_undo}{InvalidateIconsUndo}}(m\_currentLevelHandle).undo();}
\DoxyCodeLine{00761 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a4ecab59ca754753c9636f22ee6dd56c1}\label{class_studio_palette_tree_viewer_a4ecab59ca754753c9636f22ee6dd56c1}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!loadInCurrentPlt@{loadInCurrentPlt}}
\index{loadInCurrentPlt@{loadInCurrentPlt}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{loadInCurrentPlt}{loadInCurrentPlt}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::load\+In\+Current\+Plt (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Recall {\bfseries{Studio\+Palette\+Cmd\+::load\+Into\+Current\+Palette}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00553                                                \{}
\DoxyCodeLine{00554   StudioPaletteCmd::loadIntoCurrentPalette(m\_levelPltHandle, m\_sceneHandle,}
\DoxyCodeLine{00555                                            \mbox{\hyperlink{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}{getCurrentFolderPath}}());}
\DoxyCodeLine{00556 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00259}{get\+Current\+Folder\+Path()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_ae2dccac2d7613c7af906f722abf60923}\label{class_studio_palette_tree_viewer_ae2dccac2d7613c7af906f722abf60923}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!mergeToCurrentPalette@{mergeToCurrentPalette}}
\index{mergeToCurrentPalette@{mergeToCurrentPalette}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{mergeToCurrentPalette}{mergeToCurrentPalette}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::merge\+To\+Current\+Palette (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Recall {\bfseries{Studio\+Palette\+Cmd\+::merge\+Into\+Current\+Palette}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00849                                                     \{}
\DoxyCodeLine{00850   QList<QTreeWidgetItem *> items = selectedItems();}
\DoxyCodeLine{00851   \textcolor{keywordtype}{int} count                      = items.size();}
\DoxyCodeLine{00852   \textcolor{keywordflow}{if} (count == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00853 }
\DoxyCodeLine{00854   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{00855   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00856   \textcolor{keywordflow}{for} (i = 0; i < count; i++)}
\DoxyCodeLine{00857     StudioPaletteCmd::mergeIntoCurrentPalette(m\_levelPaletteHandle,}
\DoxyCodeLine{00858                                               \mbox{\hyperlink{class_studio_palette_tree_viewer_a5b2365c3338ed80d9dfe8ea7cecb4241}{getItemPath}}(items[i]));}
\DoxyCodeLine{00859   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{00860 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00248}{get\+Item\+Path()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a34d626147f946259f178761d5dabb495}\label{class_studio_palette_tree_viewer_a34d626147f946259f178761d5dabb495}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!mergeToCurrentPlt@{mergeToCurrentPlt}}
\index{mergeToCurrentPlt@{mergeToCurrentPlt}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{mergeToCurrentPlt}{mergeToCurrentPlt}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::merge\+To\+Current\+Plt (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Recall {\bfseries{Studio\+Palette\+Cmd\+::merge\+Into\+Current\+Palette}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00569                                                 \{}
\DoxyCodeLine{00570   StudioPaletteCmd::mergeIntoCurrentPalette(m\_levelPltHandle, m\_sceneHandle,}
\DoxyCodeLine{00571                                             \mbox{\hyperlink{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}{getCurrentFolderPath}}());}
\DoxyCodeLine{00572 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00259}{get\+Current\+Folder\+Path()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a91755882a68dbd4cea9d6020ebab6b9a}\label{class_studio_palette_tree_viewer_a91755882a68dbd4cea9d6020ebab6b9a}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!mouseMoveEvent@{mouseMoveEvent}}
\index{mouseMoveEvent@{mouseMoveEvent}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{mouseMoveEvent()}{mouseMoveEvent()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::mouse\+Move\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}

If button left is pressed start drag and drop. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00662                                                                \{}
\DoxyCodeLine{00663   \textcolor{comment}{// If left button is not pressed return; is not drag event.}}
\DoxyCodeLine{00664   \textcolor{keywordflow}{if} (!(event-\/>buttons() \& Qt::LeftButton)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00665   \mbox{\hyperlink{class_studio_palette_tree_viewer_a226de8a57fac1906bcaea77b8f7bf8b7}{startDragDrop}}();}
\DoxyCodeLine{00666 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00671}{start\+Drag\+Drop()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_add4646da03339fd7e9970709d6cc5ed2}\label{class_studio_palette_tree_viewer_add4646da03339fd7e9970709d6cc5ed2}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!mousePressEvent@{mousePressEvent}}
\index{mousePressEvent@{mousePressEvent}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{mousePressEvent()}{mousePressEvent()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::mouse\+Press\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}

If button left is pressed start drag and drop. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00981                                                                 \{}
\DoxyCodeLine{00982   QTreeWidget::mousePressEvent(event);}
\DoxyCodeLine{00983   \textcolor{comment}{// If left button is not pressed return}}
\DoxyCodeLine{00984   \textcolor{keywordflow}{if} (event-\/>button() == Qt::LeftButton) m\_startPos = \textcolor{keyword}{event}-\/>pos();}
\DoxyCodeLine{00985 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a09147c8382e140986c2f2a99c2f4765f}\label{class_studio_palette_tree_viewer_a09147c8382e140986c2f2a99c2f4765f}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!mouseReleaseEvent@{mouseReleaseEvent}}
\index{mouseReleaseEvent@{mouseReleaseEvent}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{mouseReleaseEvent()}{mouseReleaseEvent()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::mouse\+Release\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00999                                                                   \{}
\DoxyCodeLine{01000   QTreeWidget::mouseReleaseEvent(event);}
\DoxyCodeLine{01001   \textcolor{keywordflow}{if} (event-\/>button() == Qt::LeftButton) m\_startPos = QPoint();}
\DoxyCodeLine{01002 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a46e3d33c215ced93ab39011eb7abce59}\label{class_studio_palette_tree_viewer_a46e3d33c215ced93ab39011eb7abce59}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!onCurrentItemChanged@{onCurrentItemChanged}}
\index{onCurrentItemChanged@{onCurrentItemChanged}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{onCurrentItemChanged}{onCurrentItemChanged}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::on\+Current\+Item\+Changed (\begin{DoxyParamCaption}\item[{QTree\+Widget\+Item $\ast$}]{current,  }\item[{QTree\+Widget\+Item $\ast$}]{previous }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

Called when the current palette is switched 
\begin{DoxyCode}{0}
\DoxyCodeLine{00476                                                                               \{}
\DoxyCodeLine{00477   \mbox{\hyperlink{class_t_file_path}{TFilePath}} oldPath = \mbox{\hyperlink{class_studio_palette_tree_viewer_a5b2365c3338ed80d9dfe8ea7cecb4241}{getItemPath}}(previous);}
\DoxyCodeLine{00478   \mbox{\hyperlink{class_t_file_path}{TFilePath}} newPath = \mbox{\hyperlink{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}{getCurrentFolderPath}}();}
\DoxyCodeLine{00479   \textcolor{keywordflow}{if} (!m\_studioPaletteHandle) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00480 }
\DoxyCodeLine{00481   \textcolor{keywordflow}{if} (m\_currentPalette.getPointer() \&\& m\_currentPalette-\/>\mbox{\hyperlink{class_t_palette_a4e573ec80c4779bcdb543e4b743a8c34}{getDirtyFlag}}()) \{}
\DoxyCodeLine{00482     \mbox{\hyperlink{class_t_file_path}{TFilePath}} oldPath = StudioPalette::instance()-\/>getPalettePath(}
\DoxyCodeLine{00483         m\_currentPalette-\/>\mbox{\hyperlink{class_t_palette_ad3199523465a1961c1564a82db46b451}{getGlobalName}}());}
\DoxyCodeLine{00484     \textcolor{keywordflow}{if} (oldPath == newPath) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00485     wstring gname = m\_currentPalette-\/>\mbox{\hyperlink{class_t_palette_ad3199523465a1961c1564a82db46b451}{getGlobalName}}();}
\DoxyCodeLine{00486     QString question =}
\DoxyCodeLine{00487         tr(\textcolor{stringliteral}{"{}The current palette \%1\(\backslash\)nin the studio palette has been modified. "{}}}
\DoxyCodeLine{00488            \textcolor{stringliteral}{"{}Do you want to "{}}}
\DoxyCodeLine{00489            \textcolor{stringliteral}{"{}save your changes?"{}})}
\DoxyCodeLine{00490             .arg(QString::fromStdWString(oldPath.getWideString()));}
\DoxyCodeLine{00491     \textcolor{keywordtype}{int} ret =}
\DoxyCodeLine{00492         DVGui::MsgBox(question, tr(\textcolor{stringliteral}{"{}Save"{}}), tr(\textcolor{stringliteral}{"{}Discard"{}}), tr(\textcolor{stringliteral}{"{}Cancel"{}}), 0);}
\DoxyCodeLine{00493     \textcolor{keywordflow}{if} (ret == 3) \{}
\DoxyCodeLine{00494       setCurrentItem(\mbox{\hyperlink{class_studio_palette_tree_viewer_a48a072cf3dc4a6a1a59a94bd1f03d142}{getItem}}(oldPath));}
\DoxyCodeLine{00495       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00496     \}}
\DoxyCodeLine{00497     \textcolor{keywordflow}{if} (ret == 1) \{}
\DoxyCodeLine{00498       \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00499         \textcolor{comment}{// If the palette is level palette (i.e. NOT stdio palette), just}}
\DoxyCodeLine{00500         \textcolor{comment}{// overwrite it}}
\DoxyCodeLine{00501         \textcolor{keywordflow}{if} (gname.empty())}
\DoxyCodeLine{00502           StudioPalette::instance()-\/>save(oldPath,}
\DoxyCodeLine{00503                                           m\_currentPalette.getPointer());}
\DoxyCodeLine{00504         \textcolor{keywordflow}{else}}
\DoxyCodeLine{00505           StudioPalette::instance()-\/>setPalette(}
\DoxyCodeLine{00506               oldPath, m\_currentPalette.getPointer(), \textcolor{keyword}{false});}
\DoxyCodeLine{00507       \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_system_exception}{TSystemException}} se) \{}
\DoxyCodeLine{00508         DVGui::warning(QString::fromStdWString(se.getMessage()));}
\DoxyCodeLine{00509         setCurrentItem(previous);}
\DoxyCodeLine{00510         \textcolor{keywordflow}{return};}
\DoxyCodeLine{00511       \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00512         DVGui::warning(}
\DoxyCodeLine{00513             QString::fromStdWString(oldPath.getWideString() + L\textcolor{stringliteral}{"{}\(\backslash\)n"{}}) +}
\DoxyCodeLine{00514             tr(\textcolor{stringliteral}{"{}Failed to save palette."{}}));}
\DoxyCodeLine{00515         setCurrentItem(previous);}
\DoxyCodeLine{00516         \textcolor{keywordflow}{return};}
\DoxyCodeLine{00517       \}}
\DoxyCodeLine{00518     \}}
\DoxyCodeLine{00519     m\_currentPalette-\/>\mbox{\hyperlink{class_t_palette_a382fa102abee4e69e386cb5a4d8d5184}{setDirtyFlag}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00520   \}}
\DoxyCodeLine{00521   \textcolor{comment}{// load palette here}}
\DoxyCodeLine{00522   m\_currentPalette = StudioPalette::instance()-\/>getPalette(newPath, \textcolor{keyword}{false});}
\DoxyCodeLine{00523   m\_studioPaletteHandle-\/>setPalette(m\_currentPalette.getPointer());}
\DoxyCodeLine{00524   m\_studioPaletteHandle-\/>notifyPaletteSwitched();}
\DoxyCodeLine{00525   StudioPaletteCmd::updateAllLinkedStyles(m\_levelPaletteHandle, m\_xsheetHandle);}
\DoxyCodeLine{00526 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00259}{get\+Current\+Folder\+Path()}}, \mbox{\hyperlink{l00247}{TPalette\+::get\+Dirty\+Flag()}}, \mbox{\hyperlink{l00233}{TPalette\+::get\+Global\+Name()}}, \mbox{\hyperlink{l00266}{get\+Item()}}, \mbox{\hyperlink{l00248}{get\+Item\+Path()}}, and \mbox{\hyperlink{l00240}{TPalette\+::set\+Dirty\+Flag()}}.



Referenced by \mbox{\hyperlink{l00808}{replace\+Current\+Palette()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_ae4c6c4b4decb111b91ce0bece875d454}\label{class_studio_palette_tree_viewer_ae4c6c4b4decb111b91ce0bece875d454}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!onItemChanged@{onItemChanged}}
\index{onItemChanged@{onItemChanged}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{onItemChanged}{onItemChanged}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::on\+Item\+Changed (\begin{DoxyParamCaption}\item[{QTree\+Widget\+Item $\ast$}]{item,  }\item[{int}]{column }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

If item {\bfseries{item}} name change update path name in {\bfseries{\mbox{\hyperlink{class_studio_palette}{Studio\+Palette}}}}.

If item {\bfseries{item}} name changed update name item related path name in {\bfseries{\mbox{\hyperlink{class_studio_palette}{Studio\+Palette}}}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00374                                                                              \{}
\DoxyCodeLine{00375   \textcolor{keywordflow}{if} (item != currentItem()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00376   \textcolor{keywordtype}{string} name       = item-\/>text(column).toStdString();}
\DoxyCodeLine{00377   \mbox{\hyperlink{class_t_file_path}{TFilePath}} oldPath = \mbox{\hyperlink{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}{getCurrentFolderPath}}();}
\DoxyCodeLine{00378   \textcolor{keywordflow}{if} (oldPath.isEmpty() || name.empty() || oldPath.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}() == name) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00379   \mbox{\hyperlink{class_t_file_path}{TFilePath}} newPath(oldPath.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() +}
\DoxyCodeLine{00380                     \mbox{\hyperlink{class_t_file_path}{TFilePath}}(name + oldPath.\mbox{\hyperlink{class_t_file_path_ae69f3fd881d12ebb858c7462417c82b8}{getDottedType}}()));}
\DoxyCodeLine{00381   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00382     \mbox{\hyperlink{namespace_studio_palette_cmd_a091a7f168889ea48f1ba76a21e9e244a}{StudioPaletteCmd::movePalette}}(newPath, oldPath);}
\DoxyCodeLine{00383   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{00384     error(\textcolor{stringliteral}{"{}Can't rename palette: "{}} + QString(toString(e.getMessage()).c\_str()));}
\DoxyCodeLine{00385   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00386     error(\textcolor{stringliteral}{"{}Can't rename palette"{}});}
\DoxyCodeLine{00387   \}}
\DoxyCodeLine{00388   setCurrentItem(\mbox{\hyperlink{class_studio_palette_tree_viewer_a48a072cf3dc4a6a1a59a94bd1f03d142}{getItem}}(newPath));}
\DoxyCodeLine{00389 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00259}{get\+Current\+Folder\+Path()}}, \mbox{\hyperlink{l00570}{TFile\+Path\+::get\+Dotted\+Type()}}, \mbox{\hyperlink{l00266}{get\+Item()}}, \mbox{\hyperlink{l00636}{TFile\+Path\+::get\+Name()}}, \mbox{\hyperlink{l00683}{TFile\+Path\+::get\+Parent\+Dir()}}, and \mbox{\hyperlink{l00434}{Studio\+Palette\+Cmd\+::move\+Palette()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_ae59db53f8eb69c4c15546c89c5f27257}\label{class_studio_palette_tree_viewer_ae59db53f8eb69c4c15546c89c5f27257}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!onItemClicked@{onItemClicked}}
\index{onItemClicked@{onItemClicked}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{onItemClicked}{onItemClicked}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::on\+Item\+Clicked (\begin{DoxyParamCaption}\item[{QTree\+Widget\+Item $\ast$}]{item,  }\item[{int}]{column }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00437                                                                              \{}
\DoxyCodeLine{00438   \textcolor{keywordflow}{if} (currentItem() \&\& m\_studioPaletteHandle \&\& m\_currentPalette.getPointer()) \{}
\DoxyCodeLine{00439     \textcolor{comment}{// if(m\_studioPaletteHandle-\/>getPalette() != m\_currentPalette.getPointer())}}
\DoxyCodeLine{00440     \{}
\DoxyCodeLine{00441       m\_studioPaletteHandle-\/>setPalette(m\_currentPalette.getPointer());}
\DoxyCodeLine{00442       m\_studioPaletteHandle-\/>notifyPaletteSwitched();}
\DoxyCodeLine{00443       StudioPaletteCmd::updateAllLinkedStyles(m\_levelPaletteHandle,}
\DoxyCodeLine{00444                                               m\_xsheetHandle);}
\DoxyCodeLine{00445     \}}
\DoxyCodeLine{00446   \}}
\DoxyCodeLine{00447 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_aca677fd2531b0b83d948f00f3592e1a5}\label{class_studio_palette_tree_viewer_aca677fd2531b0b83d948f00f3592e1a5}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!onItemCollapsed@{onItemCollapsed}}
\index{onItemCollapsed@{onItemCollapsed}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{onItemCollapsed}{onItemCollapsed}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::on\+Item\+Collapsed (\begin{DoxyParamCaption}\item[{QTree\+Widget\+Item $\ast$}]{item }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

If item {\bfseries{item}} is collapsed change item icon. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00403                                                                    \{}
\DoxyCodeLine{00404   \textcolor{keywordflow}{if} (!item || \mbox{\hyperlink{class_studio_palette_tree_viewer_a3e3383c594288120c6f00438c2d889fe}{isRootItem}}(item)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00405   \textcolor{keyword}{static} QPixmap FolderIconPxmp(\textcolor{stringliteral}{"{}:Resources/newfolder\_over.png"{}});}
\DoxyCodeLine{00406   item-\/>setIcon(0, FolderIconPxmp);}
\DoxyCodeLine{00407 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00203}{is\+Root\+Item()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_aef81354cc2e9dad3d18f3b1d03ef33d0}\label{class_studio_palette_tree_viewer_aef81354cc2e9dad3d18f3b1d03ef33d0}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!onItemExpanded@{onItemExpanded}}
\index{onItemExpanded@{onItemExpanded}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{onItemExpanded}{onItemExpanded}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::on\+Item\+Expanded (\begin{DoxyParamCaption}\item[{QTree\+Widget\+Item $\ast$}]{item }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

If item {\bfseries{item}} is expanded change item icon. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00394                                                                   \{}
\DoxyCodeLine{00395   \textcolor{keywordflow}{if} (!item || \mbox{\hyperlink{class_studio_palette_tree_viewer_a3e3383c594288120c6f00438c2d889fe}{isRootItem}}(item)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00396   \textcolor{keyword}{static} QPixmap FolderIconExpandedPxmp(\textcolor{stringliteral}{"{}:Resources/folder\_open.png"{}});}
\DoxyCodeLine{00397   item-\/>setIcon(0, FolderIconExpandedPxmp);}
\DoxyCodeLine{00398 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00203}{is\+Root\+Item()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a6c2f9da5363fb8bd7af13cb199347323}\label{class_studio_palette_tree_viewer_a6c2f9da5363fb8bd7af13cb199347323}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!onItemSelectionChanged@{onItemSelectionChanged}}
\index{onItemSelectionChanged@{onItemSelectionChanged}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{onItemSelectionChanged}{onItemSelectionChanged}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::on\+Item\+Selection\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

If current item is a palette set current studio\+Palette to it. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00412                                                      \{}
\DoxyCodeLine{00413   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = \mbox{\hyperlink{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}{getCurrentFolderPath}}();}
\DoxyCodeLine{00414   \textcolor{keywordflow}{if} (!m\_stdPltHandle || path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() != \textcolor{stringliteral}{"{}tpl"{}}) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00415 }
\DoxyCodeLine{00416   \textcolor{keywordflow}{if} (m\_stdPltHandle-\/>getPalette() \&\&}
\DoxyCodeLine{00417       m\_stdPltHandle-\/>getPalette()-\/>\mbox{\hyperlink{class_t_palette_a4e573ec80c4779bcdb543e4b743a8c34}{getDirtyFlag}}()) \{}
\DoxyCodeLine{00418     QString question;}
\DoxyCodeLine{00419     question =}
\DoxyCodeLine{00420         \textcolor{stringliteral}{"{}Current Studio Palette has been modified.\(\backslash\)n"{}}}
\DoxyCodeLine{00421         \textcolor{stringliteral}{"{}Do you want to save your changes?"{}};}
\DoxyCodeLine{00422     \textcolor{keywordtype}{int} ret = MsgBox(0, question, QObject::tr(\textcolor{stringliteral}{"{}Save"{}}),}
\DoxyCodeLine{00423                      QObject::tr(\textcolor{stringliteral}{"{}Don't Save"{}}), QObject::tr(\textcolor{stringliteral}{"{}Cancel"{}}), 0);}
\DoxyCodeLine{00424 }
\DoxyCodeLine{00425     \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} oldPalette = m\_stdPltHandle-\/>getPalette();}
\DoxyCodeLine{00426     \mbox{\hyperlink{class_t_file_path}{TFilePath}} oldPath =}
\DoxyCodeLine{00427         StudioPalette::instance()-\/>getPalettePath(oldPalette-\/>\mbox{\hyperlink{class_t_palette_ad3199523465a1961c1564a82db46b451}{getGlobalName}}());}
\DoxyCodeLine{00428 }
\DoxyCodeLine{00429     \textcolor{keywordflow}{if} (ret == 3) \{}
\DoxyCodeLine{00430       setCurrentItem(\mbox{\hyperlink{class_studio_palette_tree_viewer_a48a072cf3dc4a6a1a59a94bd1f03d142}{getItem}}(oldPath));}
\DoxyCodeLine{00431       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00432     \}}
\DoxyCodeLine{00433     \textcolor{keywordflow}{if} (ret == 1)}
\DoxyCodeLine{00434       StudioPalette::instance()-\/>save(oldPath, oldPalette.getPointer());}
\DoxyCodeLine{00435     oldPalette-\/>\mbox{\hyperlink{class_t_palette_a382fa102abee4e69e386cb5a4d8d5184}{setDirtyFlag}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00436   \}}
\DoxyCodeLine{00437   m\_stdPltHandle-\/>setPalette(StudioPalette::instance()-\/>getPalette(path, \textcolor{keyword}{true}));}
\DoxyCodeLine{00438 }
\DoxyCodeLine{00439   m\_stdPltHandle-\/>notifyPaletteSwitched();}
\DoxyCodeLine{00440 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00259}{get\+Current\+Folder\+Path()}}, \mbox{\hyperlink{l00247}{TPalette\+::get\+Dirty\+Flag()}}, \mbox{\hyperlink{l00233}{TPalette\+::get\+Global\+Name()}}, \mbox{\hyperlink{l00266}{get\+Item()}}, \mbox{\hyperlink{l00225}{TFile\+Path\+::get\+Type()}}, and \mbox{\hyperlink{l00240}{TPalette\+::set\+Dirty\+Flag()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a1de6311f0dbbce2dae61617d3c4ea4f3}\label{class_studio_palette_tree_viewer_a1de6311f0dbbce2dae61617d3c4ea4f3}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!onProjectChanged@{onProjectChanged}}
\index{onProjectChanged@{onProjectChanged}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{onProjectChanged()}{onProjectChanged()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::on\+Project\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Overridden from \mbox{\hyperlink{class_t_project_manager_1_1_listener}{TProject\+Manager\+::\+Listener}}. 

Implements \mbox{\hyperlink{class_t_project_manager_1_1_listener}{TProject\+Manager\+::\+Listener}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00101 \{ \mbox{\hyperlink{class_studio_palette_tree_viewer_a7a3e5126ecfb14e5fefb73eefda35959}{resetProjectPaletteFolder}}(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_af850b819e2734a7c118404ed533850ad}\label{class_studio_palette_tree_viewer_af850b819e2734a7c118404ed533850ad}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!onProjectSwitched@{onProjectSwitched}}
\index{onProjectSwitched@{onProjectSwitched}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{onProjectSwitched()}{onProjectSwitched()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::on\+Project\+Switched (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Overridden from \mbox{\hyperlink{class_t_project_manager_1_1_listener}{TProject\+Manager\+::\+Listener}}. 

Implements \mbox{\hyperlink{class_t_project_manager_1_1_listener}{TProject\+Manager\+::\+Listener}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00099 \{ \mbox{\hyperlink{class_studio_palette_tree_viewer_a7a3e5126ecfb14e5fefb73eefda35959}{resetProjectPaletteFolder}}(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_aa18bebfb894de00b3e03fb09fbcbb55b}\label{class_studio_palette_tree_viewer_aa18bebfb894de00b3e03fb09fbcbb55b}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!onRefreshTreeShortcutTriggered@{onRefreshTreeShortcutTriggered}}
\index{onRefreshTreeShortcutTriggered@{onRefreshTreeShortcutTriggered}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{onRefreshTreeShortcutTriggered}{onRefreshTreeShortcutTriggered}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::on\+Refresh\+Tree\+Shortcut\+Triggered (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

Refresh tree only when this widget has focus 
\begin{DoxyCode}{0}
\DoxyCodeLine{00345                                                              \{}
\DoxyCodeLine{00346   \textcolor{keywordflow}{if} (hasFocus()) \mbox{\hyperlink{class_studio_palette_tree_viewer_ace5d550860943c0f0a8e06d1ee7510ff}{refresh}}();}
\DoxyCodeLine{00347 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00307}{refresh()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_ad7e216bdd9060d5286be82d114ff3d95}\label{class_studio_palette_tree_viewer_ad7e216bdd9060d5286be82d114ff3d95}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!onStudioPaletteChange@{onStudioPaletteChange}}
\index{onStudioPaletteChange@{onStudioPaletteChange}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{onStudioPaletteChange()}{onStudioPaletteChange()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::on\+Studio\+Palette\+Change (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{palette }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_studio_palette_1_1_listener}{Studio\+Palette\+::\+Listener}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00057 \{ \mbox{\hyperlink{class_studio_palette_tree_viewer_ace5d550860943c0f0a8e06d1ee7510ff}{refresh}}(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a787f374ee08bd11f4c4285b3f2c6e333}\label{class_studio_palette_tree_viewer_a787f374ee08bd11f4c4285b3f2c6e333}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!onStudioPaletteChange@{onStudioPaletteChange}}
\index{onStudioPaletteChange@{onStudioPaletteChange}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{onStudioPaletteChange()}{onStudioPaletteChange()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::on\+Studio\+Palette\+Change (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{palette }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Overridden from \mbox{\hyperlink{class_studio_palette_1_1_listener}{Studio\+Palette\+::\+Listener}}. 

Reimplemented from \mbox{\hyperlink{class_studio_palette_1_1_listener}{Studio\+Palette\+::\+Listener}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00096 \{ \mbox{\hyperlink{class_studio_palette_tree_viewer_ace5d550860943c0f0a8e06d1ee7510ff}{refresh}}(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_afd729ce83718af4116d601a43a426d67}\label{class_studio_palette_tree_viewer_afd729ce83718af4116d601a43a426d67}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!onStudioPaletteMove@{onStudioPaletteMove}}
\index{onStudioPaletteMove@{onStudioPaletteMove}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{onStudioPaletteMove()}{onStudioPaletteMove()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::on\+Studio\+Palette\+Move (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{dst\+Path,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{src\+Path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_studio_palette_1_1_listener}{Studio\+Palette\+::\+Listener}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00054                                                                                \{}
\DoxyCodeLine{00055     \mbox{\hyperlink{class_studio_palette_tree_viewer_ace5d550860943c0f0a8e06d1ee7510ff}{refresh}}();}
\DoxyCodeLine{00056   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a9a54ccb32077b7f3f75fea0b956d6187}\label{class_studio_palette_tree_viewer_a9a54ccb32077b7f3f75fea0b956d6187}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!onStudioPaletteMove@{onStudioPaletteMove}}
\index{onStudioPaletteMove@{onStudioPaletteMove}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{onStudioPaletteMove()}{onStudioPaletteMove()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::on\+Studio\+Palette\+Move (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{dst\+Path,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{src\+Path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Overridden from \mbox{\hyperlink{class_studio_palette_1_1_listener}{Studio\+Palette\+::\+Listener}}. 

Reimplemented from \mbox{\hyperlink{class_studio_palette_1_1_listener}{Studio\+Palette\+::\+Listener}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00092                                                               \{}
\DoxyCodeLine{00093     \mbox{\hyperlink{class_studio_palette_tree_viewer_ace5d550860943c0f0a8e06d1ee7510ff}{refresh}}();}
\DoxyCodeLine{00094   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a87c90cacb4fb3f8ffcca97edf535dc54}\label{class_studio_palette_tree_viewer_a87c90cacb4fb3f8ffcca97edf535dc54}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!onStudioPaletteTreeChange@{onStudioPaletteTreeChange}}
\index{onStudioPaletteTreeChange@{onStudioPaletteTreeChange}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{onStudioPaletteTreeChange()}{onStudioPaletteTreeChange()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::on\+Studio\+Palette\+Tree\+Change (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_studio_palette_1_1_listener}{Studio\+Palette\+::\+Listener}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00053 \{ \mbox{\hyperlink{class_studio_palette_tree_viewer_ace5d550860943c0f0a8e06d1ee7510ff}{refresh}}(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_ae68c7acfbe83cd99c70f6cca7bafb8fc}\label{class_studio_palette_tree_viewer_ae68c7acfbe83cd99c70f6cca7bafb8fc}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!onStudioPaletteTreeChange@{onStudioPaletteTreeChange}}
\index{onStudioPaletteTreeChange@{onStudioPaletteTreeChange}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{onStudioPaletteTreeChange()}{onStudioPaletteTreeChange()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::on\+Studio\+Palette\+Tree\+Change (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Overridden from \mbox{\hyperlink{class_studio_palette_1_1_listener}{Studio\+Palette\+::\+Listener}}. 

Reimplemented from \mbox{\hyperlink{class_studio_palette_1_1_listener}{Studio\+Palette\+::\+Listener}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00089 \{ \mbox{\hyperlink{class_studio_palette_tree_viewer_ace5d550860943c0f0a8e06d1ee7510ff}{refresh}}(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_abfd17bacd49b9f84ee2d27be59d423ef}\label{class_studio_palette_tree_viewer_abfd17bacd49b9f84ee2d27be59d423ef}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!onTreeItemExpanded@{onTreeItemExpanded}}
\index{onTreeItemExpanded@{onTreeItemExpanded}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{onTreeItemExpanded}{onTreeItemExpanded}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::on\+Tree\+Item\+Expanded (\begin{DoxyParamCaption}\item[{QTree\+Widget\+Item $\ast$}]{item }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

When expand a tree, prepare the child items of it 
\begin{DoxyCode}{0}
\DoxyCodeLine{00332                                                                       \{}
\DoxyCodeLine{00333   \textcolor{keywordflow}{if} (!item) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00334 }
\DoxyCodeLine{00335   \textcolor{comment}{// if this item was not yet opened, then get the children of this item}}
\DoxyCodeLine{00336   \textcolor{keywordflow}{if} (!m\_openedItems.contains(item)) \mbox{\hyperlink{class_studio_palette_tree_viewer_ad83cc7bd4ac97500ed0625afc790c6d9}{refreshItem}}(item);}
\DoxyCodeLine{00337 }
\DoxyCodeLine{00338   \textcolor{comment}{// expand the item}}
\DoxyCodeLine{00339   item-\/>setExpanded(!item-\/>isExpanded());}
\DoxyCodeLine{00340 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00330}{refresh\+Item()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_aa717d1d54fd6828597293bd08f33a407}\label{class_studio_palette_tree_viewer_aa717d1d54fd6828597293bd08f33a407}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!paintEvent@{paintEvent}}
\index{paintEvent@{paintEvent}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{paintEvent()}{paintEvent()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::paint\+Event (\begin{DoxyParamCaption}\item[{QPaint\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00576                                                            \{}
\DoxyCodeLine{00577   QTreeWidget::paintEvent(event);}
\DoxyCodeLine{00578   QPainter p(viewport());}
\DoxyCodeLine{00579   \textcolor{keywordflow}{if} (m\_dropItem) \{}
\DoxyCodeLine{00580     QRect rect = visualItemRect(m\_dropItem).adjusted(0, 0, -\/5, 0);}
\DoxyCodeLine{00581     p.setPen(Qt::red);}
\DoxyCodeLine{00582     p.drawRect(rect);}
\DoxyCodeLine{00583   \}}
\DoxyCodeLine{00584 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_ace5d550860943c0f0a8e06d1ee7510ff}\label{class_studio_palette_tree_viewer_ace5d550860943c0f0a8e06d1ee7510ff}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!refresh@{refresh}}
\index{refresh@{refresh}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{refresh}{refresh}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::refresh (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

Refresh all item of three root item in tree and preserve current item. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00307                                       \{}
\DoxyCodeLine{00308   \mbox{\hyperlink{class_studio_palette}{StudioPalette}} *studioPlt = StudioPalette::instance();}
\DoxyCodeLine{00309 }
\DoxyCodeLine{00310   \mbox{\hyperlink{class_t_file_path}{TFilePath}} levelPltPath = studioPlt-\/>getLevelPalettesRoot();}
\DoxyCodeLine{00311   \mbox{\hyperlink{class_studio_palette_tree_viewer_ad83cc7bd4ac97500ed0625afc790c6d9}{refreshItem}}(\mbox{\hyperlink{class_studio_palette_tree_viewer_a48a072cf3dc4a6a1a59a94bd1f03d142}{getItem}}(levelPltPath));}
\DoxyCodeLine{00312 }
\DoxyCodeLine{00313   \mbox{\hyperlink{class_t_file_path}{TFilePath}} cleanupPltPath = studioPlt-\/>getCleanupPalettesRoot();}
\DoxyCodeLine{00314   \mbox{\hyperlink{class_studio_palette_tree_viewer_ad83cc7bd4ac97500ed0625afc790c6d9}{refreshItem}}(\mbox{\hyperlink{class_studio_palette_tree_viewer_a48a072cf3dc4a6a1a59a94bd1f03d142}{getItem}}(cleanupPltPath));}
\DoxyCodeLine{00315 }
\DoxyCodeLine{00316   \textcolor{comment}{// DAFARE}}
\DoxyCodeLine{00317   \mbox{\hyperlink{class_t_file_path}{TFilePath}} projectPltPath = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(}
\DoxyCodeLine{00318       \textcolor{stringliteral}{"{}C:\(\backslash\)\(\backslash\)Toonz 6.0 stuff\(\backslash\)\(\backslash\)projects\(\backslash\)\(\backslash\)Project Palettes"{}});  \textcolor{comment}{// studioPlt-\/>getProjectPalettesRoot();}}
\DoxyCodeLine{00319                                                            \textcolor{comment}{// Per ora lo fisso}}
\DoxyCodeLine{00320   \mbox{\hyperlink{class_studio_palette_tree_viewer_ad83cc7bd4ac97500ed0625afc790c6d9}{refreshItem}}(\mbox{\hyperlink{class_studio_palette_tree_viewer_a48a072cf3dc4a6a1a59a94bd1f03d142}{getItem}}(projectPltPath));}
\DoxyCodeLine{00321 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00266}{get\+Item()}}, and \mbox{\hyperlink{l00330}{refresh\+Item()}}.



Referenced by \mbox{\hyperlink{l00345}{on\+Refresh\+Tree\+Shortcut\+Triggered()}}, \mbox{\hyperlink{l00665}{search\+For\+Palette()}}, \mbox{\hyperlink{l00528}{search\+For\+Plt()}}, and \mbox{\hyperlink{l00804}{show\+Event()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_ad83cc7bd4ac97500ed0625afc790c6d9}\label{class_studio_palette_tree_viewer_ad83cc7bd4ac97500ed0625afc790c6d9}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!refreshItem@{refreshItem}}
\index{refreshItem@{refreshItem}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{refreshItem}{refreshItem}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::refresh\+Item (\begin{DoxyParamCaption}\item[{QTree\+Widget\+Item $\ast$}]{item }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

Refresh item {\bfseries{item}} and its children; take path concerning {\bfseries{item}} and compare {\bfseries{\mbox{\hyperlink{class_studio_palette}{Studio\+Palette}}}} folder in path with folder in item. If are not equal add or remove child to current {\bfseries{item}}. Recall itself for each item child.

Update the content of item 
\begin{DoxyCode}{0}
\DoxyCodeLine{00330                                                                \{}
\DoxyCodeLine{00331   \mbox{\hyperlink{class_t_file_path}{TFilePath}} folderPath = \mbox{\hyperlink{class_studio_palette_tree_viewer_afc12eedb3554a41b519b45177a8ff731}{getFolderPath}}(item);}
\DoxyCodeLine{00332   assert(folderPath != \mbox{\hyperlink{class_t_file_path}{TFilePath}}());}
\DoxyCodeLine{00333   std::vector<TFilePath> childrenPath;}
\DoxyCodeLine{00334   StudioPalette::instance()-\/>getChildren(childrenPath, folderPath);}
\DoxyCodeLine{00335   \textcolor{keywordtype}{int} currentChildCount = item-\/>childCount();}
\DoxyCodeLine{00336   std::vector<QTreeWidgetItem *> currentChildren;}
\DoxyCodeLine{00337   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00338   \textcolor{keywordflow}{for} (i = 0; i < currentChildCount; i++)}
\DoxyCodeLine{00339     currentChildren.push\_back(item-\/>child(i));}
\DoxyCodeLine{00340 }
\DoxyCodeLine{00341   \textcolor{keywordtype}{int} childrenPathCount = childrenPath.size();}
\DoxyCodeLine{00342   \textcolor{keywordtype}{int} itemIndex         = 0;}
\DoxyCodeLine{00343   \textcolor{keywordtype}{int} pathIndex         = 0;}
\DoxyCodeLine{00344   \textcolor{keywordflow}{while} (itemIndex < currentChildCount || pathIndex < childrenPathCount) \{}
\DoxyCodeLine{00345     \mbox{\hyperlink{class_t_file_path}{TFilePath}} path =}
\DoxyCodeLine{00346         (pathIndex < childrenPathCount) ? childrenPath[pathIndex] : \mbox{\hyperlink{class_t_file_path}{TFilePath}}();}
\DoxyCodeLine{00347     QTreeWidgetItem *currentItem =}
\DoxyCodeLine{00348         (itemIndex < currentChildCount) ? currentChildren[itemIndex] : 0;}
\DoxyCodeLine{00349     \mbox{\hyperlink{class_t_file_path}{TFilePath}} currentItemPath = \mbox{\hyperlink{class_studio_palette_tree_viewer_afc12eedb3554a41b519b45177a8ff731}{getFolderPath}}(currentItem);}
\DoxyCodeLine{00350 }
\DoxyCodeLine{00351     \textcolor{keywordflow}{if} (path == currentItemPath) \{}
\DoxyCodeLine{00352       itemIndex++;}
\DoxyCodeLine{00353       pathIndex++;}
\DoxyCodeLine{00354       \mbox{\hyperlink{class_studio_palette_tree_viewer_ad83cc7bd4ac97500ed0625afc790c6d9}{refreshItem}}(currentItem);}
\DoxyCodeLine{00355     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((!path.isEmpty() \&\& path < currentItemPath) ||}
\DoxyCodeLine{00356                currentItemPath.isEmpty()) \{}
\DoxyCodeLine{00357       currentItem = \mbox{\hyperlink{class_studio_palette_tree_viewer_a0a8916e68466f52ca64003f2f8b3f90c}{createItem}}(path);}
\DoxyCodeLine{00358       item-\/>insertChild(pathIndex, currentItem);}
\DoxyCodeLine{00359       \mbox{\hyperlink{class_studio_palette_tree_viewer_ad83cc7bd4ac97500ed0625afc790c6d9}{refreshItem}}(currentItem);}
\DoxyCodeLine{00360       pathIndex++;}
\DoxyCodeLine{00361     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00362       assert(currentItemPath < path || path.isEmpty());}
\DoxyCodeLine{00363       assert(currentItem);}
\DoxyCodeLine{00364       item-\/>removeChild(currentItem);}
\DoxyCodeLine{00365       itemIndex++;}
\DoxyCodeLine{00366     \}}
\DoxyCodeLine{00367   \}}
\DoxyCodeLine{00368 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00226}{create\+Item()}}, \mbox{\hyperlink{l00249}{get\+Folder\+Path()}}, and \mbox{\hyperlink{l00330}{refresh\+Item()}}.



Referenced by \mbox{\hyperlink{l00530}{add\+New\+Palette()}}, \mbox{\hyperlink{l00187}{create\+Root\+Item()}}, \mbox{\hyperlink{l00610}{delete\+Item()}}, \mbox{\hyperlink{l00332}{on\+Tree\+Item\+Expanded()}}, \mbox{\hyperlink{l00307}{refresh()}}, and \mbox{\hyperlink{l00330}{refresh\+Item()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_afebb758946bf00344c7cdd77635e36fc}\label{class_studio_palette_tree_viewer_afebb758946bf00344c7cdd77635e36fc}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!replaceCurrentCleanupPlt@{replaceCurrentCleanupPlt}}
\index{replaceCurrentCleanupPlt@{replaceCurrentCleanupPlt}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{replaceCurrentCleanupPlt}{replaceCurrentCleanupPlt}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::replace\+Current\+Cleanup\+Plt (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Recall {\bfseries{Studio\+Palette\+Cmd\+::replace\+With\+Cleanup\+Palette}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00545                                                        \{}
\DoxyCodeLine{00546   StudioPaletteCmd::replaceWithCleanupPalette(}
\DoxyCodeLine{00547       m\_levelPltHandle, m\_stdPltHandle, m\_sceneHandle, \mbox{\hyperlink{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}{getCurrentFolderPath}}());}
\DoxyCodeLine{00548 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00259}{get\+Current\+Folder\+Path()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_aee176e84ad2ddbab6c670e0d3be76366}\label{class_studio_palette_tree_viewer_aee176e84ad2ddbab6c670e0d3be76366}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!replaceCurrentPalette@{replaceCurrentPalette}}
\index{replaceCurrentPalette@{replaceCurrentPalette}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{replaceCurrentPalette}{replaceCurrentPalette}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::replace\+Current\+Palette (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Recall {\bfseries{Studio\+Palette\+Cmd\+::replace\+With\+Current\+Palette}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00808                                                     \{}
\DoxyCodeLine{00809   QList<QTreeWidgetItem *> items = selectedItems();}
\DoxyCodeLine{00810   \textcolor{keywordtype}{int} count                      = items.size();}
\DoxyCodeLine{00811   \textcolor{keywordflow}{if} (count == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00812 }
\DoxyCodeLine{00813   \textcolor{comment}{// exec confirmation dialog}}
\DoxyCodeLine{00814   \mbox{\hyperlink{class_t_palette}{TPalette}} *current = m\_levelPaletteHandle-\/>getPalette();}
\DoxyCodeLine{00815   \textcolor{keywordflow}{if} (!current) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00816 }
\DoxyCodeLine{00817   QString label;}
\DoxyCodeLine{00818   \textcolor{keywordflow}{if} (count != 1)  \textcolor{comment}{// replacing to multiple palettes}}
\DoxyCodeLine{00819     label = tr(\textcolor{stringliteral}{"{}Replacing all selected palettes with the palette \(\backslash\)"{}\%1\(\backslash\)"{}. \(\backslash\)nAre "{}}}
\DoxyCodeLine{00820                \textcolor{stringliteral}{"{}you sure ?"{}})}
\DoxyCodeLine{00821                 .arg(QString::fromStdWString(current-\/>\mbox{\hyperlink{class_t_palette_af0bb56df19af40d1a729482efc85f492}{getPaletteName}}()));}
\DoxyCodeLine{00822   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00823     \mbox{\hyperlink{class_t_palette}{TPalette}} *dstPalette =}
\DoxyCodeLine{00824         StudioPalette::instance()-\/>getPalette(\mbox{\hyperlink{class_studio_palette_tree_viewer_a5b2365c3338ed80d9dfe8ea7cecb4241}{getItemPath}}(items[0]));}
\DoxyCodeLine{00825     \textcolor{keywordflow}{if} (!dstPalette) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00826     label = tr(\textcolor{stringliteral}{"{}Replacing the palette \(\backslash\)"{}\%1\(\backslash\)"{} with the palette \(\backslash\)"{}\%2\(\backslash\)"{}. \(\backslash\)nAre "{}}}
\DoxyCodeLine{00827                \textcolor{stringliteral}{"{}you sure ?"{}})}
\DoxyCodeLine{00828                 .arg(QString::fromStdWString(dstPalette-\/>\mbox{\hyperlink{class_t_palette_af0bb56df19af40d1a729482efc85f492}{getPaletteName}}()))}
\DoxyCodeLine{00829                 .arg(QString::fromStdWString(current-\/>\mbox{\hyperlink{class_t_palette_af0bb56df19af40d1a729482efc85f492}{getPaletteName}}()));}
\DoxyCodeLine{00830   \}}
\DoxyCodeLine{00831 }
\DoxyCodeLine{00832   \textcolor{keywordtype}{int} ret = DVGui::MsgBox(label, tr(\textcolor{stringliteral}{"{}Replace"{}}), tr(\textcolor{stringliteral}{"{}Cancel"{}}), 1);}
\DoxyCodeLine{00833   \textcolor{keywordflow}{if} (ret == 0 || ret == 2) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00834 }
\DoxyCodeLine{00835   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{00836   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00837   \textcolor{keywordflow}{for} (i = 0; i < count; i++)}
\DoxyCodeLine{00838     StudioPaletteCmd::replaceWithCurrentPalette(}
\DoxyCodeLine{00839         m\_levelPaletteHandle, m\_studioPaletteHandle, \mbox{\hyperlink{class_studio_palette_tree_viewer_a5b2365c3338ed80d9dfe8ea7cecb4241}{getItemPath}}(items[i]));}
\DoxyCodeLine{00840   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{00841 }
\DoxyCodeLine{00842   \textcolor{keywordflow}{if} (m\_currentPalette) m\_currentPalette-\/>\mbox{\hyperlink{class_t_palette_a382fa102abee4e69e386cb5a4d8d5184}{setDirtyFlag}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00843   \textcolor{comment}{// in order to update display}}
\DoxyCodeLine{00844   \mbox{\hyperlink{class_studio_palette_tree_viewer_a46e3d33c215ced93ab39011eb7abce59}{onCurrentItemChanged}}(currentItem(), currentItem());}
\DoxyCodeLine{00845 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00248}{get\+Item\+Path()}}, \mbox{\hyperlink{l00414}{TPalette\+::get\+Palette\+Name()}}, \mbox{\hyperlink{l00475}{on\+Current\+Item\+Changed()}}, and \mbox{\hyperlink{l00240}{TPalette\+::set\+Dirty\+Flag()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_aa58eeb193b487dfd5ea8d11009319298}\label{class_studio_palette_tree_viewer_aa58eeb193b487dfd5ea8d11009319298}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!replaceCurrentPlt@{replaceCurrentPlt}}
\index{replaceCurrentPlt@{replaceCurrentPlt}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{replaceCurrentPlt}{replaceCurrentPlt}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::replace\+Current\+Plt (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Recall {\bfseries{Studio\+Palette\+Cmd\+::replace\+With\+Current\+Palette}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00561                                                 \{}
\DoxyCodeLine{00562   StudioPaletteCmd::replaceWithCurrentPalette(}
\DoxyCodeLine{00563       m\_levelPltHandle, m\_stdPltHandle, m\_sceneHandle, \mbox{\hyperlink{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}{getCurrentFolderPath}}());}
\DoxyCodeLine{00564 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00259}{get\+Current\+Folder\+Path()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_aab303a8421450b1e62c991afaa6a135b}\label{class_studio_palette_tree_viewer_aab303a8421450b1e62c991afaa6a135b}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!resetDropItem@{resetDropItem}}
\index{resetDropItem@{resetDropItem}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{resetDropItem()}{resetDropItem()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::reset\+Drop\+Item (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00301                                             \{}
\DoxyCodeLine{00302   \textcolor{keywordflow}{if} (!m\_dropItem) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00303   m\_dropItem = 0;}
\DoxyCodeLine{00304 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a7a3e5126ecfb14e5fefb73eefda35959}\label{class_studio_palette_tree_viewer_a7a3e5126ecfb14e5fefb73eefda35959}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!resetProjectPaletteFolder@{resetProjectPaletteFolder}}
\index{resetProjectPaletteFolder@{resetProjectPaletteFolder}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{resetProjectPaletteFolder}{resetProjectPaletteFolder}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::reset\+Project\+Palette\+Folder (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}

Delete old project palette item and create the new one. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00407                                                         \{}
\DoxyCodeLine{00408   \textcolor{keywordtype}{int} projectPaletteIndex = 1;}
\DoxyCodeLine{00409   \mbox{\hyperlink{class_t_file_path}{TFilePath}} projectPalettePath =}
\DoxyCodeLine{00410       StudioPalette::instance()-\/>getProjectPalettesRoot();}
\DoxyCodeLine{00411   \textcolor{comment}{// Prendo l'item del project palette.}}
\DoxyCodeLine{00412   QTreeWidgetItem *projectPaletteItem = topLevelItem(projectPaletteIndex);}
\DoxyCodeLine{00413   \textcolor{keywordflow}{if} (projectPaletteItem) \{}
\DoxyCodeLine{00414     \textcolor{comment}{// Se il path dell'item e' uguale a quello del project palette corrente}}
\DoxyCodeLine{00415     \textcolor{comment}{// ritorno.}}
\DoxyCodeLine{00416     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_studio_palette_tree_viewer_a5b2365c3338ed80d9dfe8ea7cecb4241}{getItemPath}}(projectPaletteItem) == projectPalettePath) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00417     \textcolor{comment}{// Altrimenti lo rimuovo.}}
\DoxyCodeLine{00418     removeItemWidget(projectPaletteItem, 0);}
\DoxyCodeLine{00419     \textcolor{keyword}{delete} projectPaletteItem;}
\DoxyCodeLine{00420     \textcolor{comment}{// clear the item list in order to search the folder from scratch}}
\DoxyCodeLine{00421     m\_openedItems.clear();}
\DoxyCodeLine{00422     \textcolor{comment}{// Toonz Palette is not changed, so resurrect the ToonzPaletteRoot}}
\DoxyCodeLine{00423     m\_openedItems.insert(topLevelItem(0));}
\DoxyCodeLine{00424   \}}
\DoxyCodeLine{00425   \textcolor{keywordflow}{if} (!TSystem::doesExistFileOrLevel(projectPalettePath)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00426   \textcolor{comment}{// Creo il nuovo item con il nuovo project folder e lo inserisco nell'albero.}}
\DoxyCodeLine{00427   \textcolor{comment}{// Items in the ProjectPaletteRoot are refreshed here. Stored in openedItems}}
\DoxyCodeLine{00428   \textcolor{comment}{// as well.}}
\DoxyCodeLine{00429   QTreeWidgetItem *newProjectPaletteItem = \mbox{\hyperlink{class_studio_palette_tree_viewer_a1db9c3187eab1dd0297dd6be214cac33}{createRootItem}}(projectPalettePath);}
\DoxyCodeLine{00430   insertTopLevelItem(projectPaletteIndex, newProjectPaletteItem);}
\DoxyCodeLine{00431 }
\DoxyCodeLine{00432   setCurrentItem(0);}
\DoxyCodeLine{00433 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00195}{create\+Root\+Item()}}, and \mbox{\hyperlink{l00248}{get\+Item\+Path()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a8240aa4f26be7b2e0d5df9b385f379bc}\label{class_studio_palette_tree_viewer_a8240aa4f26be7b2e0d5df9b385f379bc}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!searchForPalette@{searchForPalette}}
\index{searchForPalette@{searchForPalette}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{searchForPalette}{searchForPalette}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::search\+For\+Palette (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Open a {\bfseries{\mbox{\hyperlink{class_palettes_scan_popup}{Palettes\+Scan\+Popup}}}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00665                                                \{}
\DoxyCodeLine{00666   m\_palettesScanPopup-\/>\mbox{\hyperlink{class_palettes_scan_popup_a22c19009d59b07ce07ed88d76f27e25e}{setCurrentFolder}}(\mbox{\hyperlink{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}{getCurrentFolderPath}}());}
\DoxyCodeLine{00667   \textcolor{keywordtype}{int} ret = m\_palettesScanPopup-\/>exec();}
\DoxyCodeLine{00668   \textcolor{keywordflow}{if} (ret == QDialog::Accepted) \mbox{\hyperlink{class_studio_palette_tree_viewer_ace5d550860943c0f0a8e06d1ee7510ff}{refresh}}();}
\DoxyCodeLine{00669 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00259}{get\+Current\+Folder\+Path()}}, \mbox{\hyperlink{l00307}{refresh()}}, and \mbox{\hyperlink{l00053}{Palettes\+Scan\+Popup\+::set\+Current\+Folder()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a8ceb7bfaa4e0a9aa2a2067007bc1e430}\label{class_studio_palette_tree_viewer_a8ceb7bfaa4e0a9aa2a2067007bc1e430}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!searchForPlt@{searchForPlt}}
\index{searchForPlt@{searchForPlt}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{searchForPlt}{searchForPlt}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::search\+For\+Plt (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Open a {\bfseries{\mbox{\hyperlink{class_palettes_scan_popup}{Palettes\+Scan\+Popup}}}}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00528                                            \{}
\DoxyCodeLine{00529   m\_palettesScanPopup-\/>\mbox{\hyperlink{class_palettes_scan_popup_a22c19009d59b07ce07ed88d76f27e25e}{setCurrentFolder}}(\mbox{\hyperlink{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}{getCurrentFolderPath}}());}
\DoxyCodeLine{00530   \textcolor{keywordtype}{int} ret = m\_palettesScanPopup-\/>exec();}
\DoxyCodeLine{00531   \textcolor{keywordflow}{if} (ret == QDialog::Accepted) \mbox{\hyperlink{class_studio_palette_tree_viewer_ace5d550860943c0f0a8e06d1ee7510ff}{refresh}}();}
\DoxyCodeLine{00532 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00259}{get\+Current\+Folder\+Path()}}, \mbox{\hyperlink{l00307}{refresh()}}, and \mbox{\hyperlink{l00053}{Palettes\+Scan\+Popup\+::set\+Current\+Folder()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_ab2e8ab68a6ad67dda31a6adb7d85f58b}\label{class_studio_palette_tree_viewer_ab2e8ab68a6ad67dda31a6adb7d85f58b}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!setCurrentLevelHandle@{setCurrentLevelHandle}}
\index{setCurrentLevelHandle@{setCurrentLevelHandle}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{setCurrentLevelHandle()}{setCurrentLevelHandle()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::set\+Current\+Level\+Handle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsh_level_handle}{TXsh\+Level\+Handle}} $\ast$}]{current\+Level\+Handle }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00175                                          \{}
\DoxyCodeLine{00176   m\_currentLevelHandle = currentLevelHandle;}
\DoxyCodeLine{00177 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_accc17be8602ba303606002cd6e67b853}\label{class_studio_palette_tree_viewer_accc17be8602ba303606002cd6e67b853}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!setLevelHandle@{setLevelHandle}}
\index{setLevelHandle@{setLevelHandle}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{setLevelHandle()}{setLevelHandle()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::set\+Level\+Handle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsh_level_handle}{TXsh\+Level\+Handle}} $\ast$}]{level\+Handle }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00180                                                                          \{}
\DoxyCodeLine{00181   m\_levelHandle = levelHandle;}
\DoxyCodeLine{00182 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a46d1065cac73530562362ecc3be157af}\label{class_studio_palette_tree_viewer_a46d1065cac73530562362ecc3be157af}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!setLevelPaletteHandle@{setLevelPaletteHandle}}
\index{setLevelPaletteHandle@{setLevelPaletteHandle}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{setLevelPaletteHandle()}{setLevelPaletteHandle()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::set\+Level\+Palette\+Handle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$}]{palette\+Handle }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00161                                    \{}
\DoxyCodeLine{00162   m\_levelPltHandle = paletteHandle;}
\DoxyCodeLine{00163 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a4e2ef28c9953f3bc8ee3f5b581bc9e2a}\label{class_studio_palette_tree_viewer_a4e2ef28c9953f3bc8ee3f5b581bc9e2a}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!setSceneHandle@{setSceneHandle}}
\index{setSceneHandle@{setSceneHandle}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{setSceneHandle()}{setSceneHandle()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::set\+Scene\+Handle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_scene_handle}{TScene\+Handle}} $\ast$}]{scene\+Handle }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00174                                                                       \{}
\DoxyCodeLine{00175   m\_sceneHandle = sceneHandle;}
\DoxyCodeLine{00176 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_ad6519dce8843d62123ced96cf2d487df}\label{class_studio_palette_tree_viewer_ad6519dce8843d62123ced96cf2d487df}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!setStdPaletteHandle@{setStdPaletteHandle}}
\index{setStdPaletteHandle@{setStdPaletteHandle}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{setStdPaletteHandle()}{setStdPaletteHandle()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::set\+Std\+Palette\+Handle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$}]{std\+Palette\+Handle }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00168                                   \{}
\DoxyCodeLine{00169   m\_stdPltHandle = stdPltHandle;}
\DoxyCodeLine{00170 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_tree_viewer_a46e689748ec09d7ac94fb03bf48b652e}\label{class_studio_palette_tree_viewer_a46e689748ec09d7ac94fb03bf48b652e}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!showEvent@{showEvent}}
\index{showEvent@{showEvent}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{showEvent()}{showEvent()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::show\+Event (\begin{DoxyParamCaption}\item[{QShow\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Receive widget show events. Add this listener to {\bfseries{\mbox{\hyperlink{class_studio_palette}{Studio\+Palette}}}} and refresh tree. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00804                                                          \{}
\DoxyCodeLine{00805   StudioPalette::instance()-\/>addListener(\textcolor{keyword}{this});}
\DoxyCodeLine{00806   \mbox{\hyperlink{class_studio_palette_tree_viewer_ace5d550860943c0f0a8e06d1ee7510ff}{refresh}}();}
\DoxyCodeLine{00807 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00307}{refresh()}}.

\mbox{\Hypertarget{class_studio_palette_tree_viewer_a226de8a57fac1906bcaea77b8f7bf8b7}\label{class_studio_palette_tree_viewer_a226de8a57fac1906bcaea77b8f7bf8b7}} 
\index{StudioPaletteTreeViewer@{StudioPaletteTreeViewer}!startDragDrop@{startDragDrop}}
\index{startDragDrop@{startDragDrop}!StudioPaletteTreeViewer@{StudioPaletteTreeViewer}}
\doxysubsubsection{\texorpdfstring{startDragDrop()}{startDragDrop()}}
{\footnotesize\ttfamily void Studio\+Palette\+Tree\+Viewer\+::start\+Drag\+Drop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

If path related to current item exist and is a palette execute drag. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00671                                             \{}
\DoxyCodeLine{00672   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = \mbox{\hyperlink{class_studio_palette_tree_viewer_a8093e2da007200b6f4e3bf4576f81515}{getCurrentFolderPath}}();}
\DoxyCodeLine{00673   \textcolor{keywordflow}{if} (!path.isEmpty() \&\& (path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tpl"{}} || path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}pli"{}} ||}
\DoxyCodeLine{00674                           path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tlv"{}} || path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tnz"{}})) \{}
\DoxyCodeLine{00675     QDrag *drag         = \textcolor{keyword}{new} QDrag(\textcolor{keyword}{this});}
\DoxyCodeLine{00676     QMimeData *mimeData = \textcolor{keyword}{new} QMimeData;}
\DoxyCodeLine{00677     QList<QUrl> urls;}
\DoxyCodeLine{00678     urls.append(pathToUrl(path));}
\DoxyCodeLine{00679     mimeData-\/>setUrls(urls);}
\DoxyCodeLine{00680     drag-\/>setMimeData(mimeData);}
\DoxyCodeLine{00681 }
\DoxyCodeLine{00682     Qt::DropAction dropAction = drag-\/>exec(Qt::CopyAction | Qt::MoveAction);}
\DoxyCodeLine{00683   \}}
\DoxyCodeLine{00684   viewport()-\/>update();}
\DoxyCodeLine{00685 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00259}{get\+Current\+Folder\+Path()}}, and \mbox{\hyperlink{l00225}{TFile\+Path\+::get\+Type()}}.



Referenced by \mbox{\hyperlink{l00662}{mouse\+Move\+Event()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonzqt/studiopaletteviewer.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/studiopaletteviewer.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/studiopaletteviewer.\+cpp\item 
E\+:/opentoonz/toonz/sources/toonzqt/studiopaletteviewer.\+cpp\end{DoxyCompactItemize}
