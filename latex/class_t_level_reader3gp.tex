\hypertarget{class_t_level_reader3gp}{}\doxysection{TLevel\+Reader3gp Class Reference}
\label{class_t_level_reader3gp}\index{TLevelReader3gp@{TLevelReader3gp}}
Inheritance diagram for TLevel\+Reader3gp\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_t_level_reader3gp}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_level_reader3gp_a16c24e88da696a9d69d14baab640342c}{TLevel\+Reader3gp}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path)
\item 
\mbox{\hyperlink{class_t_image_reader_p}{TImage\+ReaderP}} \mbox{\hyperlink{class_t_level_reader3gp_a65b10efcb28a176fb6bbdd9be80b246b}{get\+Frame\+Reader}} (\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} fid) override
\item 
\mbox{\hyperlink{class_t_level_p}{TLevelP}} \mbox{\hyperlink{class_t_level_reader3gp_aade4846631de97f81f65c9c52b1b4129}{load\+Info}} () override
\item 
void \mbox{\hyperlink{class_t_level_reader3gp_a7f3553a909f3ad1d96fd73f7e1740da8}{load}} (const \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \&rasP, int frame\+Index, const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&pos, int shrinkX=1, int shrinkY=1)
\item 
\mbox{\hyperlink{class_t_dimension_t}{TDimension}} \mbox{\hyperlink{class_t_level_reader3gp_adae9669ddb256d5891d1e7286cfbbdbc}{get\+Size}} () const
\item 
\mbox{\hyperlink{class_t_rect_t}{TRect}} \mbox{\hyperlink{class_t_level_reader3gp_ad9520388ba0bdc7700c29b2221ac56f9}{get\+BBox}} () const
\item 
\mbox{\Hypertarget{class_t_level_reader3gp_a16c24e88da696a9d69d14baab640342c}\label{class_t_level_reader3gp_a16c24e88da696a9d69d14baab640342c}} 
{\bfseries TLevel\+Reader3gp} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path)
\item 
\mbox{\hyperlink{class_t_image_reader_p}{TImage\+ReaderP}} \mbox{\hyperlink{class_t_level_reader3gp_a342cba1b2d023a143ebd481d890a7bfb}{get\+Frame\+Reader}} (\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} fid)
\item 
\mbox{\hyperlink{class_t_level_p}{TLevelP}} \mbox{\hyperlink{class_t_level_reader3gp_aa9fe9c4fe8ba0e1bdbc1728a8cf2a768}{load\+Info}} ()
\item 
\mbox{\Hypertarget{class_t_level_reader3gp_a7f3553a909f3ad1d96fd73f7e1740da8}\label{class_t_level_reader3gp_a7f3553a909f3ad1d96fd73f7e1740da8}} 
void {\bfseries load} (const \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \&rasP, int frame\+Index, const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&pos, int shrinkX=1, int shrinkY=1)
\item 
\mbox{\hyperlink{class_t_dimension_t}{TDimension}} \mbox{\hyperlink{class_t_level_reader3gp_adae9669ddb256d5891d1e7286cfbbdbc}{get\+Size}} () const
\item 
\mbox{\hyperlink{class_t_rect_t}{TRect}} \mbox{\hyperlink{class_t_level_reader3gp_ad9520388ba0bdc7700c29b2221ac56f9}{get\+BBox}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_t_level_reader}{TLevel\+Reader}} $\ast$ \mbox{\hyperlink{class_t_level_reader3gp_abea1960eae3b94611335f851bac8587c}{create}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&f)
\item 
static \mbox{\hyperlink{class_t_level_reader}{TLevel\+Reader}} $\ast$ \mbox{\hyperlink{class_t_level_reader3gp_abea1960eae3b94611335f851bac8587c}{create}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&f)
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{class_t_level_reader3gp_aaff781253ed33a2521bc7bc1bd5335d3}{m\+\_\+\+IOError}}
\item 
\mbox{\hyperlink{class_t_thread_1_1_mutex}{TThread\+::\+Mutex}} \mbox{\hyperlink{class_t_level_reader3gp_a429fb6f2927225f9e19857f09df7c324}{m\+\_\+mutex}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_level_reader3gp_a16c24e88da696a9d69d14baab640342c}\label{class_t_level_reader3gp_a16c24e88da696a9d69d14baab640342c}} 
\index{TLevelReader3gp@{TLevelReader3gp}!TLevelReader3gp@{TLevelReader3gp}}
\index{TLevelReader3gp@{TLevelReader3gp}!TLevelReader3gp@{TLevelReader3gp}}
\doxysubsubsection{\texorpdfstring{TLevelReader3gp()}{TLevelReader3gp()}}
{\footnotesize\ttfamily TLevel\+Reader3gp\+::\+TLevel\+Reader3gp (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00842     : \mbox{\hyperlink{class_t_level_reader}{TLevelReader}}(path)}
\DoxyCodeLine{00843     , m\_IOError(QTNoError)}
\DoxyCodeLine{00844     , m\_track(0)}
\DoxyCodeLine{00845     , m\_movie(0)}
\DoxyCodeLine{00846     , m\_depth(0)}
\DoxyCodeLine{00847 \textcolor{comment}{//                ,m\_timeScale(0)}}
\DoxyCodeLine{00848 \{}
\DoxyCodeLine{00849   FSSpec fspec;}
\DoxyCodeLine{00850   QDErr err;}
\DoxyCodeLine{00851   Boolean dataRefWasChanged;}
\DoxyCodeLine{00852   \textcolor{keywordflow}{if} (QuickTimeStuff::instance()-\/>getStatus() != noErr) \{}
\DoxyCodeLine{00853     m\_IOError = QTNotInstalled;}
\DoxyCodeLine{00854     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00855   \}}
\DoxyCodeLine{00856 }
\DoxyCodeLine{00857   std::string \textcolor{keyword}{const} str\_path = ::to\_string(m\_path).c\_str();}
\DoxyCodeLine{00858   FSMakeFSSpec(0, 0, \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} \textcolor{keyword}{const }*\textcolor{keyword}{>}(str\_path.c\_str()),}
\DoxyCodeLine{00859                \&fspec);}
\DoxyCodeLine{00860   getFSSpecFromPosixPath(str\_path.c\_str(), \&fspec, \textcolor{keyword}{false});}
\DoxyCodeLine{00861 }
\DoxyCodeLine{00862   \textcolor{keywordflow}{if} ((err = OpenMovieFile(\&fspec, \&m\_refNum, fsRdPerm))) \{}
\DoxyCodeLine{00863     m\_IOError = QTUnableToOpenFile;}
\DoxyCodeLine{00864     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00865   \}}
\DoxyCodeLine{00866 }
\DoxyCodeLine{00867   m\_resId = 0;}
\DoxyCodeLine{00868   Str255 name;}
\DoxyCodeLine{00869   err = NewMovieFromFile(\&m\_movie, m\_refNum, \&m\_resId, name, fsRdPerm,}
\DoxyCodeLine{00870                          \&dataRefWasChanged);}
\DoxyCodeLine{00871 }
\DoxyCodeLine{00872   \textcolor{keywordtype}{int} numTracks = GetMovieTrackCount(m\_movie);}
\DoxyCodeLine{00873   assert(numTracks == 1 || numTracks == 2);}
\DoxyCodeLine{00874 }
\DoxyCodeLine{00875   m\_track =}
\DoxyCodeLine{00876       GetMovieIndTrackType(m\_movie, 1, VideoMediaType, movieTrackMediaType);}
\DoxyCodeLine{00877 }
\DoxyCodeLine{00878   \textcolor{comment}{// m\_track=GetMovieTrack(m\_movie,numTracks);}}
\DoxyCodeLine{00879 }
\DoxyCodeLine{00880   ImageDescriptionHandle imageH;}
\DoxyCodeLine{00881   imageH = (ImageDescriptionHandle)NewHandleClear(\textcolor{keyword}{sizeof}(ImageDescription));}
\DoxyCodeLine{00882   TINT32 index   = 1;}
\DoxyCodeLine{00883   Media theMedia = GetTrackMedia(m\_track);}
\DoxyCodeLine{00884 }
\DoxyCodeLine{00885   GetMediaSampleDescription(theMedia, index, (SampleDescriptionHandle)imageH);}
\DoxyCodeLine{00886   ImageDescriptionPtr imagePtr    = *imageH;}
\DoxyCodeLine{00887   m\_lx                            = imagePtr-\/>width;}
\DoxyCodeLine{00888   m\_ly                            = imagePtr-\/>height;}
\DoxyCodeLine{00889   m\_depth                         = imagePtr-\/>depth;}
\DoxyCodeLine{00890   m\_info                          = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_image_info}{TImageInfo}}();}
\DoxyCodeLine{00891   m\_info-\/>\mbox{\hyperlink{class_t_image_info_afe82a2118ba303797b2c8a12b47b771d}{m\_lx}}                    = m\_lx;}
\DoxyCodeLine{00892   m\_info-\/>\mbox{\hyperlink{class_t_image_info_affef879628cc3843968c932e706541b6}{m\_ly}}                    = m\_ly;}
\DoxyCodeLine{00893   \mbox{\hyperlink{class_tiio_1_1_mov_writer_properties}{Tiio::MovWriterProperties}} *prop = \textcolor{keyword}{new} \mbox{\hyperlink{class_tiio_1_1_mov_writer_properties}{Tiio::MovWriterProperties}}();}
\DoxyCodeLine{00894   m\_info-\/>\mbox{\hyperlink{class_t_image_info_af19bdfa77849b4ca4de94f3fa1caad9d}{m\_properties}}            = prop;}
\DoxyCodeLine{00895 }
\DoxyCodeLine{00896   DisposeHandle((Handle)imageH);}
\DoxyCodeLine{00897 }
\DoxyCodeLine{00898   m\_info-\/>\mbox{\hyperlink{class_t_image_info_a644330b52ec1ef76a1b0ca6cfdb166fe}{m\_frameRate}} = GetMediaTimeScale(theMedia);}
\DoxyCodeLine{00899 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_reader3gp_a4d003036beb1a7bbf0d70c8617c4ebcb}\label{class_t_level_reader3gp_a4d003036beb1a7bbf0d70c8617c4ebcb}} 
\index{TLevelReader3gp@{TLevelReader3gp}!````~TLevelReader3gp@{$\sim$TLevelReader3gp}}
\index{````~TLevelReader3gp@{$\sim$TLevelReader3gp}!TLevelReader3gp@{TLevelReader3gp}}
\doxysubsubsection{\texorpdfstring{$\sim$TLevelReader3gp()}{~TLevelReader3gp()}}
{\footnotesize\ttfamily TLevel\+Reader3gp\+::$\sim$\+TLevel\+Reader3gp (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00917                                   \{}
\DoxyCodeLine{00918   StopMovie(m\_movie);}
\DoxyCodeLine{00919 }
\DoxyCodeLine{00920   \textcolor{keywordflow}{if} (m\_refNum) CloseMovieFile(m\_refNum);}
\DoxyCodeLine{00921   \textcolor{keywordflow}{if} (m\_movie) DisposeMovie(m\_movie);}
\DoxyCodeLine{00922   \textcolor{comment}{// ExitMovies();}}
\DoxyCodeLine{00923   \textcolor{comment}{// TerminateQTML();}}
\DoxyCodeLine{00924 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_level_reader3gp_abea1960eae3b94611335f851bac8587c}\label{class_t_level_reader3gp_abea1960eae3b94611335f851bac8587c}} 
\index{TLevelReader3gp@{TLevelReader3gp}!create@{create}}
\index{create@{create}!TLevelReader3gp@{TLevelReader3gp}}
\doxysubsubsection{\texorpdfstring{create()}{create()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily static \mbox{\hyperlink{class_t_level_reader}{TLevel\+Reader}} $\ast$ TLevel\+Reader3gp\+::create (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{f }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00111                                                   \{}
\DoxyCodeLine{00112     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{class_t_level_reader3gp}{TLevelReader3gp}}(f);}
\DoxyCodeLine{00113   \};}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_reader3gp_abea1960eae3b94611335f851bac8587c}\label{class_t_level_reader3gp_abea1960eae3b94611335f851bac8587c}} 
\index{TLevelReader3gp@{TLevelReader3gp}!create@{create}}
\index{create@{create}!TLevelReader3gp@{TLevelReader3gp}}
\doxysubsubsection{\texorpdfstring{create()}{create()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily static \mbox{\hyperlink{class_t_level_reader}{TLevel\+Reader}} $\ast$ TLevel\+Reader3gp\+::create (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{f }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00089                                                   \{}
\DoxyCodeLine{00090     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{class_t_level_reader3gp}{TLevelReader3gp}}(f);}
\DoxyCodeLine{00091   \};}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_reader3gp_ad9520388ba0bdc7700c29b2221ac56f9}\label{class_t_level_reader3gp_ad9520388ba0bdc7700c29b2221ac56f9}} 
\index{TLevelReader3gp@{TLevelReader3gp}!getBBox@{getBBox}}
\index{getBBox@{getBBox}!TLevelReader3gp@{TLevelReader3gp}}
\doxysubsubsection{\texorpdfstring{getBBox()}{getBBox()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRect}} TLevel\+Reader3gp\+::get\+BBox (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00097 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_rect_t}{TRect}}(0, 0, m\_lx -\/ 1, m\_ly -\/ 1); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_reader3gp_ad9520388ba0bdc7700c29b2221ac56f9}\label{class_t_level_reader3gp_ad9520388ba0bdc7700c29b2221ac56f9}} 
\index{TLevelReader3gp@{TLevelReader3gp}!getBBox@{getBBox}}
\index{getBBox@{getBBox}!TLevelReader3gp@{TLevelReader3gp}}
\doxysubsubsection{\texorpdfstring{getBBox()}{getBBox()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRect}} TLevel\+Reader3gp\+::get\+BBox (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00075 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_rect_t}{TRect}}(0, 0, m\_lx -\/ 1, m\_ly -\/ 1); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_reader3gp_a342cba1b2d023a143ebd481d890a7bfb}\label{class_t_level_reader3gp_a342cba1b2d023a143ebd481d890a7bfb}} 
\index{TLevelReader3gp@{TLevelReader3gp}!getFrameReader@{getFrameReader}}
\index{getFrameReader@{getFrameReader}!TLevelReader3gp@{TLevelReader3gp}}
\doxysubsubsection{\texorpdfstring{getFrameReader()}{getFrameReader()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_image_reader_p}{TImage\+ReaderP}} TLevel\+Reader3gp\+::get\+Frame\+Reader (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}}}]{fid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_level_reader}{TLevel\+Reader}}.

\mbox{\Hypertarget{class_t_level_reader3gp_a65b10efcb28a176fb6bbdd9be80b246b}\label{class_t_level_reader3gp_a65b10efcb28a176fb6bbdd9be80b246b}} 
\index{TLevelReader3gp@{TLevelReader3gp}!getFrameReader@{getFrameReader}}
\index{getFrameReader@{getFrameReader}!TLevelReader3gp@{TLevelReader3gp}}
\doxysubsubsection{\texorpdfstring{getFrameReader()}{getFrameReader()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_image_reader_p}{TImage\+ReaderP}} TLevel\+Reader3gp\+::get\+Frame\+Reader (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}}}]{fid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_level_reader}{TLevel\+Reader}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01120                                                           \{}
\DoxyCodeLine{01121   \textcolor{keywordflow}{if} (m\_IOError != QTNoError)}
\DoxyCodeLine{01122     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_image_exception}{TImageException}}(m\_path, buildQTErrorString(m\_IOError));}
\DoxyCodeLine{01123 }
\DoxyCodeLine{01124   \textcolor{keywordflow}{if} (fid.getLetter() != 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_image_reader_p}{TImageReaderP}}(0);}
\DoxyCodeLine{01125   \textcolor{keywordtype}{int} index = fid.getNumber() -\/ 1;}
\DoxyCodeLine{01126 }
\DoxyCodeLine{01127   \mbox{\hyperlink{class_t_image_reader3gp}{TImageReader3gp}} *irm = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_image_reader3gp}{TImageReader3gp}}(m\_path, index, \textcolor{keyword}{this});}
\DoxyCodeLine{01128   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_image_reader_p}{TImageReaderP}}(irm);}
\DoxyCodeLine{01129 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_reader3gp_adae9669ddb256d5891d1e7286cfbbdbc}\label{class_t_level_reader3gp_adae9669ddb256d5891d1e7286cfbbdbc}} 
\index{TLevelReader3gp@{TLevelReader3gp}!getSize@{getSize}}
\index{getSize@{getSize}!TLevelReader3gp@{TLevelReader3gp}}
\doxysubsubsection{\texorpdfstring{getSize()}{getSize()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_dimension_t}{TDimension}} TLevel\+Reader3gp\+::get\+Size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00096 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(m\_lx, m\_ly); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_reader3gp_adae9669ddb256d5891d1e7286cfbbdbc}\label{class_t_level_reader3gp_adae9669ddb256d5891d1e7286cfbbdbc}} 
\index{TLevelReader3gp@{TLevelReader3gp}!getSize@{getSize}}
\index{getSize@{getSize}!TLevelReader3gp@{TLevelReader3gp}}
\doxysubsubsection{\texorpdfstring{getSize()}{getSize()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_dimension_t}{TDimension}} TLevel\+Reader3gp\+::get\+Size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00074 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(m\_lx, m\_ly); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_reader3gp_a7f3553a909f3ad1d96fd73f7e1740da8}\label{class_t_level_reader3gp_a7f3553a909f3ad1d96fd73f7e1740da8}} 
\index{TLevelReader3gp@{TLevelReader3gp}!load@{load}}
\index{load@{load}!TLevelReader3gp@{TLevelReader3gp}}
\doxysubsubsection{\texorpdfstring{load()}{load()}}
{\footnotesize\ttfamily void TLevel\+Reader3gp\+::load (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \&}]{rasP,  }\item[{int}]{frame\+Index,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&}]{pos,  }\item[{int}]{shrinkX = {\ttfamily 1},  }\item[{int}]{shrinkY = {\ttfamily 1} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01013                                                                         \{}
\DoxyCodeLine{01014   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} ras = rasP;}
\DoxyCodeLine{01015 }
\DoxyCodeLine{01016   \{}
\DoxyCodeLine{01017     QMutexLocker sl(\&m\_mutex);}
\DoxyCodeLine{01018     ras-\/>lock();}
\DoxyCodeLine{01019     \textcolor{keywordflow}{if} (m\_IOError != QTNoError) \textcolor{keywordflow}{goto} error;}
\DoxyCodeLine{01020 }
\DoxyCodeLine{01021     Rect rect;}
\DoxyCodeLine{01022     rect.right  = pos.x + ras-\/>getLx();}
\DoxyCodeLine{01023     rect.left   = pos.x;}
\DoxyCodeLine{01024     rect.bottom = pos.y + ras-\/>getLy();}
\DoxyCodeLine{01025     rect.top    = pos.y;}
\DoxyCodeLine{01026 }
\DoxyCodeLine{01027     GWorldPtr offscreenGWorld;}
\DoxyCodeLine{01028     OSErr err;}
\DoxyCodeLine{01029 }
\DoxyCodeLine{01030 \textcolor{preprocessor}{\#if defined TNZ\_MACHINE\_CHANNEL\_ORDER\_BGRM}}
\DoxyCodeLine{01031     OSType pixelFormat = k32BGRAPixelFormat;}
\DoxyCodeLine{01032 \textcolor{preprocessor}{\#elif defined TNZ\_MACHINE\_CHANNEL\_ORDER\_MRGB}}
\DoxyCodeLine{01033     OSType pixelFormat = k32ARGBPixelFormat;}
\DoxyCodeLine{01034 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01035 }
\DoxyCodeLine{01036     err = QTNewGWorldFromPtr(\&offscreenGWorld, pixelFormat, \&rect, 0, 0, 0,}
\DoxyCodeLine{01037                              ras-\/>getRawData(), ras-\/>getWrap() * 4);}
\DoxyCodeLine{01038 }
\DoxyCodeLine{01039     \textcolor{keywordflow}{if} (err != noErr) \{}
\DoxyCodeLine{01040       m\_IOError = QTUnableToCreateResource;}
\DoxyCodeLine{01041       \textcolor{keywordflow}{goto} error;}
\DoxyCodeLine{01042     \}}
\DoxyCodeLine{01043 }
\DoxyCodeLine{01044     SetMovieBox(m\_movie, \&rect);}
\DoxyCodeLine{01045     err = GetMoviesError();}
\DoxyCodeLine{01046     \textcolor{keywordflow}{if} (err != noErr) \{}
\DoxyCodeLine{01047       m\_IOError = QTUnableToSetMovieBox;}
\DoxyCodeLine{01048 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{01049     DisposeGWorld(offscreenGWorld);}
\DoxyCodeLine{01050 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01051       \textcolor{keywordflow}{goto} error;}
\DoxyCodeLine{01052     \}}
\DoxyCodeLine{01053 }
\DoxyCodeLine{01054 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{01055   SetMovieGWorld(m\_movie, offscreenGWorld, GetGWorldDevice(offscreenGWorld));}
\DoxyCodeLine{01056 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01057     err = GetMoviesError();}
\DoxyCodeLine{01058     \textcolor{keywordflow}{if} (err != noErr) \{}
\DoxyCodeLine{01059       m\_IOError = QTUnableToSetMovieGWorld;}
\DoxyCodeLine{01060 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{01061     DisposeGWorld(offscreenGWorld);}
\DoxyCodeLine{01062 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01063       \textcolor{keywordflow}{goto} error;}
\DoxyCodeLine{01064     \}}
\DoxyCodeLine{01065 }
\DoxyCodeLine{01066     TimeValue currentTime = currentTimes[frameIndex];}
\DoxyCodeLine{01067 }
\DoxyCodeLine{01068     SetMovieTimeValue(m\_movie, currentTime);}
\DoxyCodeLine{01069 }
\DoxyCodeLine{01070     err = GetMoviesError();}
\DoxyCodeLine{01071     \textcolor{keywordflow}{if} (err != noErr) \{}
\DoxyCodeLine{01072       m\_IOError = QTUnableToSetTimeValue;}
\DoxyCodeLine{01073 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{01074     DisposeGWorld(offscreenGWorld);}
\DoxyCodeLine{01075 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01076       \textcolor{keywordflow}{goto} error;}
\DoxyCodeLine{01077     \}}
\DoxyCodeLine{01078 }
\DoxyCodeLine{01079     err = UpdateMovie(m\_movie);}
\DoxyCodeLine{01080     \textcolor{keywordflow}{if} (err != noErr) \{}
\DoxyCodeLine{01081       m\_IOError = QTUnableToUpdateMovie;}
\DoxyCodeLine{01082 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{01083     DisposeGWorld(offscreenGWorld);}
\DoxyCodeLine{01084 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01085       \textcolor{keywordflow}{goto} error;}
\DoxyCodeLine{01086     \}}
\DoxyCodeLine{01087 }
\DoxyCodeLine{01088     MoviesTask(m\_movie, 0);}
\DoxyCodeLine{01089     err = GetMoviesError();}
\DoxyCodeLine{01090     \textcolor{keywordflow}{if} (err != noErr) \{}
\DoxyCodeLine{01091       m\_IOError = QTUnableToDoMovieTask;}
\DoxyCodeLine{01092 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{01093     DisposeGWorld(offscreenGWorld);}
\DoxyCodeLine{01094 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01095       \textcolor{keywordflow}{goto} error;}
\DoxyCodeLine{01096     \}}
\DoxyCodeLine{01097 }
\DoxyCodeLine{01098     SetMovieGWorld(m\_movie, 0, 0);}
\DoxyCodeLine{01099 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{01100   DisposeGWorld(offscreenGWorld);}
\DoxyCodeLine{01101 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01102     ras-\/>unlock();}
\DoxyCodeLine{01103   \}}
\DoxyCodeLine{01104 }
\DoxyCodeLine{01105   \textcolor{keywordflow}{if} (m\_depth != 32) \{}
\DoxyCodeLine{01106     setMatteAndYMirror(rasP);}
\DoxyCodeLine{01107   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01108     rasP-\/>yMirror();}
\DoxyCodeLine{01109   \}}
\DoxyCodeLine{01110 }
\DoxyCodeLine{01111   \textcolor{keywordflow}{return};}
\DoxyCodeLine{01112 }
\DoxyCodeLine{01113 error:}
\DoxyCodeLine{01114   ras-\/>unlock();}
\DoxyCodeLine{01115   \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_image_exception}{TImageException}}(m\_path, buildQTErrorString(m\_IOError));}
\DoxyCodeLine{01116 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_reader3gp_aa9fe9c4fe8ba0e1bdbc1728a8cf2a768}\label{class_t_level_reader3gp_aa9fe9c4fe8ba0e1bdbc1728a8cf2a768}} 
\index{TLevelReader3gp@{TLevelReader3gp}!loadInfo@{loadInfo}}
\index{loadInfo@{loadInfo}!TLevelReader3gp@{TLevelReader3gp}}
\doxysubsubsection{\texorpdfstring{loadInfo()}{loadInfo()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_level_p}{TLevelP}} TLevel\+Reader3gp\+::load\+Info (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_level_reader}{TLevel\+Reader}}.

\mbox{\Hypertarget{class_t_level_reader3gp_aade4846631de97f81f65c9c52b1b4129}\label{class_t_level_reader3gp_aade4846631de97f81f65c9c52b1b4129}} 
\index{TLevelReader3gp@{TLevelReader3gp}!loadInfo@{loadInfo}}
\index{loadInfo@{loadInfo}!TLevelReader3gp@{TLevelReader3gp}}
\doxysubsubsection{\texorpdfstring{loadInfo()}{loadInfo()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_level_p}{TLevelP}} TLevel\+Reader3gp\+::load\+Info (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_level_reader}{TLevel\+Reader}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00928                                   \{}
\DoxyCodeLine{00929   \mbox{\hyperlink{class_t_level_p}{TLevelP}} level;}
\DoxyCodeLine{00930   \textcolor{keywordflow}{if} (m\_IOError != QTNoError)}
\DoxyCodeLine{00931     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_image_exception}{TImageException}}(m\_path, buildQTErrorString(m\_IOError));}
\DoxyCodeLine{00932 }
\DoxyCodeLine{00933   OSType mediaType = VisualMediaCharacteristic;}
\DoxyCodeLine{00934   TimeValue nextTime, currentTime;}
\DoxyCodeLine{00935   currentTime = 0;}
\DoxyCodeLine{00936   nextTime    = 0;}
\DoxyCodeLine{00937   \textcolor{comment}{// per il primo}}
\DoxyCodeLine{00938   \textcolor{keywordtype}{int} f = 1;}
\DoxyCodeLine{00939   \textcolor{comment}{// io vorrei fare '|', ma sul manuale c'e' scritto '+'}}
\DoxyCodeLine{00940   GetMovieNextInterestingTime(m\_movie, nextTimeMediaSample + nextTimeEdgeOK, 1,}
\DoxyCodeLine{00941                               \&mediaType, currentTime, 0, \&nextTime, 0);}
\DoxyCodeLine{00942   \textcolor{keywordflow}{if} (nextTime != -\/1) \{}
\DoxyCodeLine{00943     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} frame(f);}
\DoxyCodeLine{00944     level-\/>setFrame(frame, \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}());}
\DoxyCodeLine{00945     currentTimes.push\_back(nextTime);}
\DoxyCodeLine{00946     f++;}
\DoxyCodeLine{00947   \}}
\DoxyCodeLine{00948   currentTime = nextTime;}
\DoxyCodeLine{00949   \textcolor{keywordflow}{while} (nextTime != -\/1) \{}
\DoxyCodeLine{00950     GetMovieNextInterestingTime(m\_movie, nextTimeMediaSample, 1, \&mediaType,}
\DoxyCodeLine{00951                                 currentTime, 0, \&nextTime, 0);}
\DoxyCodeLine{00952     \textcolor{keywordflow}{if} (nextTime != -\/1) \{}
\DoxyCodeLine{00953       \mbox{\hyperlink{class_t_frame_id}{TFrameId}} frame(f);}
\DoxyCodeLine{00954       level-\/>setFrame(frame, \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}());}
\DoxyCodeLine{00955       currentTimes.push\_back(nextTime);}
\DoxyCodeLine{00956       f++;}
\DoxyCodeLine{00957     \}}
\DoxyCodeLine{00958     currentTime = nextTime;}
\DoxyCodeLine{00959   \}}
\DoxyCodeLine{00960   \textcolor{keywordflow}{return} level;}
\DoxyCodeLine{00961 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_t_level_reader3gp_aaff781253ed33a2521bc7bc1bd5335d3}\label{class_t_level_reader3gp_aaff781253ed33a2521bc7bc1bd5335d3}} 
\index{TLevelReader3gp@{TLevelReader3gp}!m\_IOError@{m\_IOError}}
\index{m\_IOError@{m\_IOError}!TLevelReader3gp@{TLevelReader3gp}}
\doxysubsubsection{\texorpdfstring{m\_IOError}{m\_IOError}}
{\footnotesize\ttfamily int TLevel\+Reader3gp\+::m\+\_\+\+IOError}

\mbox{\Hypertarget{class_t_level_reader3gp_a429fb6f2927225f9e19857f09df7c324}\label{class_t_level_reader3gp_a429fb6f2927225f9e19857f09df7c324}} 
\index{TLevelReader3gp@{TLevelReader3gp}!m\_mutex@{m\_mutex}}
\index{m\_mutex@{m\_mutex}!TLevelReader3gp@{TLevelReader3gp}}
\doxysubsubsection{\texorpdfstring{m\_mutex}{m\_mutex}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_thread_1_1_mutex}{TThread\+::\+Mutex}} TLevel\+Reader3gp\+::m\+\_\+mutex}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/image/3gp/tiio\+\_\+3gp.\+h\item 
E\+:/opentoonz/toonz/sources/image/3gp/tiio\+\_\+3gp\+M.\+h\item 
E\+:/opentoonz/toonz/sources/image/3gp/tiio\+\_\+3gp\+M.\+cpp\item 
E\+:/opentoonz/toonz/sources/image/3gp/tiio\+\_\+3gp\+W.\+cpp\end{DoxyCompactItemize}
