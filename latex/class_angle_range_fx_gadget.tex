\hypertarget{class_angle_range_fx_gadget}{}\doxysection{Angle\+Range\+Fx\+Gadget Class Reference}
\label{class_angle_range_fx_gadget}\index{AngleRangeFxGadget@{AngleRangeFxGadget}}
Inheritance diagram for Angle\+Range\+Fx\+Gadget\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_angle_range_fx_gadget}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_angle_range_fx_gadget_a862b83e10d941fb1ab6888d54407da6e}{Angle\+Range\+Fx\+Gadget}} (\mbox{\hyperlink{class_fx_gadget_controller}{Fx\+Gadget\+Controller}} $\ast$controller, const TDouble\+ParamP \&start\+Angle, const TDouble\+ParamP \&end\+Angle, const TPoint\+ParamP \&center)
\item 
void \mbox{\hyperlink{class_angle_range_fx_gadget_a66d816f1f106473bc60ec8480e3f1a24}{draw}} (bool picking) override
\item 
void \mbox{\hyperlink{class_angle_range_fx_gadget_adf5caf61a84b8dc5de5aa8a8c14d8618}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\item 
void \mbox{\hyperlink{class_angle_range_fx_gadget_a0f95715b7d2e96ac1c0a52b4355c197e}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\item 
void \mbox{\hyperlink{class_angle_range_fx_gadget_a938b175a6f410b5aae8614a7eb41fbe1}{left\+Button\+Up}} () override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_angle_range_fx_gadget_a862b83e10d941fb1ab6888d54407da6e}\label{class_angle_range_fx_gadget_a862b83e10d941fb1ab6888d54407da6e}} 
\index{AngleRangeFxGadget@{AngleRangeFxGadget}!AngleRangeFxGadget@{AngleRangeFxGadget}}
\index{AngleRangeFxGadget@{AngleRangeFxGadget}!AngleRangeFxGadget@{AngleRangeFxGadget}}
\doxysubsubsection{\texorpdfstring{AngleRangeFxGadget()}{AngleRangeFxGadget()}}
{\footnotesize\ttfamily Angle\+Range\+Fx\+Gadget\+::\+Angle\+Range\+Fx\+Gadget (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_fx_gadget_controller}{Fx\+Gadget\+Controller}} $\ast$}]{controller,  }\item[{const TDouble\+ParamP \&}]{start\+Angle,  }\item[{const TDouble\+ParamP \&}]{end\+Angle,  }\item[{const TPoint\+ParamP \&}]{center }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00562     : \mbox{\hyperlink{class_fx_gadget}{FxGadget}}(controller, 2)}
\DoxyCodeLine{00563     , m\_startAngle(startAngle)}
\DoxyCodeLine{00564     , m\_endAngle(endAngle)}
\DoxyCodeLine{00565     , m\_center(center) \{}
\DoxyCodeLine{00566   addParam(startAngle);}
\DoxyCodeLine{00567   addParam(endAngle);}
\DoxyCodeLine{00568   addParam(center-\/>getX());}
\DoxyCodeLine{00569   addParam(center-\/>getY());}
\DoxyCodeLine{00570 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_angle_range_fx_gadget_a66d816f1f106473bc60ec8480e3f1a24}\label{class_angle_range_fx_gadget_a66d816f1f106473bc60ec8480e3f1a24}} 
\index{AngleRangeFxGadget@{AngleRangeFxGadget}!draw@{draw}}
\index{draw@{draw}!AngleRangeFxGadget@{AngleRangeFxGadget}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Angle\+Range\+Fx\+Gadget\+::draw (\begin{DoxyParamCaption}\item[{bool}]{picking }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_fx_gadget}{Fx\+Gadget}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00574                                           \{}
\DoxyCodeLine{00575   \textcolor{keyword}{auto} setColorById = [\&](\textcolor{keywordtype}{int} id) \{}
\DoxyCodeLine{00576     \textcolor{keywordflow}{if} (isSelected(\textcolor{keywordtype}{id}))}
\DoxyCodeLine{00577       glColor3dv(m\_selectedColor);}
\DoxyCodeLine{00578     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00579       glColor3d(0, 0, 1);}
\DoxyCodeLine{00580   \};}
\DoxyCodeLine{00581 }
\DoxyCodeLine{00582   \textcolor{keywordtype}{double} pixelSize = sqrt(tglGetPixelSize2()) * getDevPixRatio();}
\DoxyCodeLine{00583   \textcolor{keywordtype}{double} r         = pixelSize * 200;}
\DoxyCodeLine{00584   \textcolor{keywordtype}{double} a         = pixelSize * 30;}
\DoxyCodeLine{00585 }
\DoxyCodeLine{00586   \mbox{\hyperlink{class_t_point_t}{TPointD}} center = getValue(m\_center);}
\DoxyCodeLine{00587   \textcolor{keywordtype}{double} start   = getValue(m\_startAngle);}
\DoxyCodeLine{00588   \textcolor{keywordtype}{double} end     = getValue(m\_endAngle);}
\DoxyCodeLine{00589 }
\DoxyCodeLine{00590   glPushMatrix();}
\DoxyCodeLine{00591   glTranslated(center.x, center.y, 0);}
\DoxyCodeLine{00592 }
\DoxyCodeLine{00593   setColorById(StartAngle);}
\DoxyCodeLine{00594   glPushMatrix();}
\DoxyCodeLine{00595   glPushName(getId() + StartAngle);}
\DoxyCodeLine{00596   glRotated(start, 0, 0, 1);}
\DoxyCodeLine{00597   glBegin(GL\_LINE\_STRIP);}
\DoxyCodeLine{00598   glVertex2d(0, 0);}
\DoxyCodeLine{00599   glVertex2d(r, 0);}
\DoxyCodeLine{00600   \textcolor{comment}{// expand handle while dragging}}
\DoxyCodeLine{00601   \textcolor{keywordflow}{if} (m\_handle == StartAngle) glVertex2d(r * 5.0, 0);}
\DoxyCodeLine{00602   glEnd();}
\DoxyCodeLine{00603   glPopName();}
\DoxyCodeLine{00604 }
\DoxyCodeLine{00605   glPushMatrix();}
\DoxyCodeLine{00606   glTranslated(r * 1.05, 0, 0.0);}
\DoxyCodeLine{00607   glScaled(pixelSize * 1.6, pixelSize * 1.6, 1);}
\DoxyCodeLine{00608   glRotated(-\/start, 0, 0, 1);}
\DoxyCodeLine{00609   tglDrawText(\mbox{\hyperlink{class_t_point_t}{TPointD}}(0, 0), \textcolor{stringliteral}{"{}Start Angle"{}});}
\DoxyCodeLine{00610   glPopMatrix();}
\DoxyCodeLine{00611 }
\DoxyCodeLine{00612   glPopMatrix();}
\DoxyCodeLine{00613 }
\DoxyCodeLine{00614   setColorById(EndAngle);}
\DoxyCodeLine{00615   glPushMatrix();}
\DoxyCodeLine{00616   glPushName(getId() + EndAngle);}
\DoxyCodeLine{00617   glRotated(end, 0, 0, 1);}
\DoxyCodeLine{00618   glBegin(GL\_LINE\_STRIP);}
\DoxyCodeLine{00619   glVertex2d(0, 0);}
\DoxyCodeLine{00620   glVertex2d(r, 0);}
\DoxyCodeLine{00621   \textcolor{comment}{// expand handle while dragging}}
\DoxyCodeLine{00622   \textcolor{keywordflow}{if} (m\_handle == EndAngle) glVertex2d(r * 5.0, 0);}
\DoxyCodeLine{00623   glEnd();}
\DoxyCodeLine{00624 }
\DoxyCodeLine{00625   glPopName();}
\DoxyCodeLine{00626   glPushMatrix();}
\DoxyCodeLine{00627   glTranslated(r * 1.05, 0, 0.0);}
\DoxyCodeLine{00628   glScaled(pixelSize * 1.6, pixelSize * 1.6, 1);}
\DoxyCodeLine{00629   glRotated(-\/end, 0, 0, 1);}
\DoxyCodeLine{00630   tglDrawText(\mbox{\hyperlink{class_t_point_t}{TPointD}}(0, 0), \textcolor{stringliteral}{"{}End Angle"{}});}
\DoxyCodeLine{00631   glPopMatrix();}
\DoxyCodeLine{00632 }
\DoxyCodeLine{00633   glPopMatrix();}
\DoxyCodeLine{00634 }
\DoxyCodeLine{00635   \textcolor{comment}{// draw arc}}
\DoxyCodeLine{00636   \textcolor{keywordflow}{while} (end <= start) end += 360.0;}
\DoxyCodeLine{00637 }
\DoxyCodeLine{00638   glColor3d(0, 0, 1);}
\DoxyCodeLine{00639   glBegin(GL\_LINE\_STRIP);}
\DoxyCodeLine{00640   \textcolor{keywordtype}{double} angle  = start;}
\DoxyCodeLine{00641   \textcolor{keywordtype}{double} dAngle = 5.0;}
\DoxyCodeLine{00642   \textcolor{keywordflow}{while} (angle <= end) \{}
\DoxyCodeLine{00643     \textcolor{keywordtype}{double} rad = angle / M\_180\_PI;}
\DoxyCodeLine{00644     glVertex2d(a * std::cos(rad), a * std::sin(rad));}
\DoxyCodeLine{00645     angle += dAngle;}
\DoxyCodeLine{00646   \}}
\DoxyCodeLine{00647   \textcolor{keywordflow}{if} (angle != end)}
\DoxyCodeLine{00648     glVertex2d(a * std::cos(end / M\_180\_PI), a * std::sin(end / M\_180\_PI));}
\DoxyCodeLine{00649   glEnd();}
\DoxyCodeLine{00650 }
\DoxyCodeLine{00651   glPopMatrix();}
\DoxyCodeLine{00652 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_angle_range_fx_gadget_adf5caf61a84b8dc5de5aa8a8c14d8618}\label{class_angle_range_fx_gadget_adf5caf61a84b8dc5de5aa8a8c14d8618}} 
\index{AngleRangeFxGadget@{AngleRangeFxGadget}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!AngleRangeFxGadget@{AngleRangeFxGadget}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily void Angle\+Range\+Fx\+Gadget\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_fx_gadget}{Fx\+Gadget}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00657                                                              \{}
\DoxyCodeLine{00658   m\_handle = (HANDLE)m\_selected;}
\DoxyCodeLine{00659   \textcolor{keywordflow}{if} (m\_handle == None) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00660   \mbox{\hyperlink{class_t_point_t}{TPointD}} d             = pos -\/ getValue(m\_center);}
\DoxyCodeLine{00661   m\_clickedAngle        = atan2(d.y, d.x) * M\_180\_PI;}
\DoxyCodeLine{00662   TDoubleParamP target  = (m\_handle == StartAngle) ? m\_startAngle : m\_endAngle;}
\DoxyCodeLine{00663   TDoubleParamP another = (m\_handle == StartAngle) ? m\_endAngle : m\_startAngle;}
\DoxyCodeLine{00664   m\_targetAngle         = getValue(target);}
\DoxyCodeLine{00665   m\_anotherAngle        = getValue(another);}
\DoxyCodeLine{00666 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_angle_range_fx_gadget_a0f95715b7d2e96ac1c0a52b4355c197e}\label{class_angle_range_fx_gadget_a0f95715b7d2e96ac1c0a52b4355c197e}} 
\index{AngleRangeFxGadget@{AngleRangeFxGadget}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!AngleRangeFxGadget@{AngleRangeFxGadget}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Angle\+Range\+Fx\+Gadget\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_fx_gadget}{Fx\+Gadget}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00671                                                               \{}
\DoxyCodeLine{00672   \textcolor{keywordflow}{if} (m\_handle == None) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00673   TDoubleParamP target = (m\_handle == StartAngle) ? m\_startAngle : m\_endAngle;}
\DoxyCodeLine{00674   \mbox{\hyperlink{class_t_point_t}{TPointD}} d            = pos -\/ getValue(m\_center);}
\DoxyCodeLine{00675   \textcolor{keywordtype}{double} angle         = atan2(d.y, d.x) * M\_180\_PI;}
\DoxyCodeLine{00676   \textcolor{keywordtype}{double} targetAngle   = m\_targetAngle + angle -\/ m\_clickedAngle;}
\DoxyCodeLine{00677   \textcolor{comment}{// move every 10 degrees when pressing Shift key}}
\DoxyCodeLine{00678   \textcolor{keywordflow}{if} (e.isShiftPressed()) targetAngle = std::round(targetAngle / 10.0) * 10.0;}
\DoxyCodeLine{00679   setValue(target, targetAngle);}
\DoxyCodeLine{00680 }
\DoxyCodeLine{00681   \textcolor{comment}{// move both angles when pressing Ctrl key}}
\DoxyCodeLine{00682   \textcolor{keywordflow}{if} (e.isCtrlPressed()) \{}
\DoxyCodeLine{00683     TDoubleParamP another =}
\DoxyCodeLine{00684         (m\_handle == StartAngle) ? m\_endAngle : m\_startAngle;}
\DoxyCodeLine{00685     \textcolor{keywordtype}{double} anotherAngle = m\_anotherAngle + angle -\/ m\_clickedAngle;}
\DoxyCodeLine{00686     \textcolor{keywordflow}{if} (e.isShiftPressed())}
\DoxyCodeLine{00687       anotherAngle = std::round(anotherAngle / 10.0) * 10.0;}
\DoxyCodeLine{00688     setValue(another, anotherAngle);}
\DoxyCodeLine{00689   \}}
\DoxyCodeLine{00690 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_angle_range_fx_gadget_a938b175a6f410b5aae8614a7eb41fbe1}\label{class_angle_range_fx_gadget_a938b175a6f410b5aae8614a7eb41fbe1}} 
\index{AngleRangeFxGadget@{AngleRangeFxGadget}!leftButtonUp@{leftButtonUp}}
\index{leftButtonUp@{leftButtonUp}!AngleRangeFxGadget@{AngleRangeFxGadget}}
\doxysubsubsection{\texorpdfstring{leftButtonUp()}{leftButtonUp()}}
{\footnotesize\ttfamily void Angle\+Range\+Fx\+Gadget\+::left\+Button\+Up (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_fx_gadget}{Fx\+Gadget}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00694 \{ m\_handle = None; \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/edittoolgadgets.\+cpp\end{DoxyCompactItemize}
