\hypertarget{class_t_external_program_fx}{}\doxysection{TExternal\+Program\+Fx Class Reference}
\label{class_t_external_program_fx}\index{TExternalProgramFx@{TExternalProgramFx}}
Inheritance diagram for TExternal\+Program\+Fx\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=6.000000cm]{class_t_external_program_fx}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_external_program_fx_afa9b284964f45213e7a3378e42cf0800}{TExternal\+Program\+Fx}} (std\+::string name)
\item 
void \mbox{\hyperlink{class_t_external_program_fx_ab5801198a0352840b5c4bfcbe6a8b884}{initialize}} (std\+::string name)
\item 
\mbox{\hyperlink{class_t_fx}{TFx}} $\ast$ \mbox{\hyperlink{class_t_external_program_fx_a268c42ef6f90456812d9a4a39c1d11e1}{clone}} (bool recursive=true) const override
\item 
bool \mbox{\hyperlink{class_t_external_program_fx_a4ed1afe67b4cb1df21c20c36e1a4bfb2}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{class_t_external_program_fx_a1a8f4110b0d9674c59e07d1ab86efe3b}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&ri) override
\item 
bool \mbox{\hyperlink{class_t_external_program_fx_a18fa3f2b924772b5b0b7aa58279abe3c}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\item 
void \mbox{\hyperlink{class_t_external_program_fx_ac3e47902f59a1e61f515e207f05ab94d}{set\+Executable}} (\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} fp, std\+::string args)
\item 
void \mbox{\hyperlink{class_t_external_program_fx_a6605fc988243dad2634393474188744e}{add\+Port}} (std\+::string port\+Name, std\+::string ext, bool is\+Input)
\item 
void \mbox{\hyperlink{class_t_external_program_fx_acb6d4d750fcc4b73c86ae3bd79bf4c0f}{load\+Data}} (\mbox{\hyperlink{class_t_i_stream}{TIStream}} \&is) override
\item 
void \mbox{\hyperlink{class_t_external_program_fx_a4428a31fa1f7bdf9211bd4baea32fe53}{save\+Data}} (\mbox{\hyperlink{class_t_o_stream}{TOStream}} \&os) override
\item 
void \mbox{\hyperlink{class_t_external_program_fx_ad92872705c7707ec4245894a871eb6dc}{set\+Extern\+Fx\+Name}} (std\+::string name)
\item 
std\+::string \mbox{\hyperlink{class_t_external_program_fx_af1a00b78332c3e08f22cff023a6db971}{get\+Extern\+Fx\+Name}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_external_program_fx_afa9b284964f45213e7a3378e42cf0800}\label{class_t_external_program_fx_afa9b284964f45213e7a3378e42cf0800}} 
\index{TExternalProgramFx@{TExternalProgramFx}!TExternalProgramFx@{TExternalProgramFx}}
\index{TExternalProgramFx@{TExternalProgramFx}!TExternalProgramFx@{TExternalProgramFx}}
\doxysubsubsection{\texorpdfstring{TExternalProgramFx()}{TExternalProgramFx()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily TExternal\+Program\+Fx\+::\+TExternal\+Program\+Fx (\begin{DoxyParamCaption}\item[{std\+::string}]{name }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00036     : m\_externFxName(name) \{}
\DoxyCodeLine{00037   initialize(name);}
\DoxyCodeLine{00038   setName(L\textcolor{stringliteral}{"{}ExternalProgramFx"{}});}
\DoxyCodeLine{00039   \textcolor{comment}{//    addInputPort("{}input2"{}, m\_input2);}}
\DoxyCodeLine{00040 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_external_program_fx_ae747bad7446d4020af79ce7a870a7c32}\label{class_t_external_program_fx_ae747bad7446d4020af79ce7a870a7c32}} 
\index{TExternalProgramFx@{TExternalProgramFx}!TExternalProgramFx@{TExternalProgramFx}}
\index{TExternalProgramFx@{TExternalProgramFx}!TExternalProgramFx@{TExternalProgramFx}}
\doxysubsubsection{\texorpdfstring{TExternalProgramFx()}{TExternalProgramFx()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily TExternal\+Program\+Fx\+::\+TExternal\+Program\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00044                                        : m\_externFxName() \{}
\DoxyCodeLine{00045   setName(L\textcolor{stringliteral}{"{}ExternalProgramFx"{}});}
\DoxyCodeLine{00046   \textcolor{comment}{//    addInputPort("{}input2"{}, m\_input2);}}
\DoxyCodeLine{00047 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_external_program_fx_a507e73b2937a604504721f210ffaec03}\label{class_t_external_program_fx_a507e73b2937a604504721f210ffaec03}} 
\index{TExternalProgramFx@{TExternalProgramFx}!````~TExternalProgramFx@{$\sim$TExternalProgramFx}}
\index{````~TExternalProgramFx@{$\sim$TExternalProgramFx}!TExternalProgramFx@{TExternalProgramFx}}
\doxysubsubsection{\texorpdfstring{$\sim$TExternalProgramFx()}{~TExternalProgramFx()}}
{\footnotesize\ttfamily TExternal\+Program\+Fx\+::$\sim$\+TExternal\+Program\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00051 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_external_program_fx_a6605fc988243dad2634393474188744e}\label{class_t_external_program_fx_a6605fc988243dad2634393474188744e}} 
\index{TExternalProgramFx@{TExternalProgramFx}!addPort@{addPort}}
\index{addPort@{addPort}!TExternalProgramFx@{TExternalProgramFx}}
\doxysubsubsection{\texorpdfstring{addPort()}{addPort()}}
{\footnotesize\ttfamily void TExternal\+Program\+Fx\+::add\+Port (\begin{DoxyParamCaption}\item[{std\+::string}]{port\+Name,  }\item[{std\+::string}]{ext,  }\item[{bool}]{is\+Input }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00103                                                \{}
\DoxyCodeLine{00104   \textcolor{keywordflow}{if} (isInput) \{}
\DoxyCodeLine{00105     \mbox{\hyperlink{class_t_raster_fx_port}{TRasterFxPort}} *port = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_raster_fx_port}{TRasterFxPort}}();}
\DoxyCodeLine{00106     m\_ports[portName]   = Port(portName, ext, port);}
\DoxyCodeLine{00107     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(portName, *port);}
\DoxyCodeLine{00108   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00109     m\_ports[portName] = Port(portName, ext, 0);}
\DoxyCodeLine{00110 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_external_program_fx_a18fa3f2b924772b5b0b7aa58279abe3c}\label{class_t_external_program_fx_a18fa3f2b924772b5b0b7aa58279abe3c}} 
\index{TExternalProgramFx@{TExternalProgramFx}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!TExternalProgramFx@{TExternalProgramFx}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool TExternal\+Program\+Fx\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00065                                                                      \{}
\DoxyCodeLine{00066     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00067   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_external_program_fx_a268c42ef6f90456812d9a4a39c1d11e1}\label{class_t_external_program_fx_a268c42ef6f90456812d9a4a39c1d11e1}} 
\index{TExternalProgramFx@{TExternalProgramFx}!clone@{clone}}
\index{clone@{clone}!TExternalProgramFx@{TExternalProgramFx}}
\doxysubsubsection{\texorpdfstring{clone()}{clone()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_fx}{TFx}} $\ast$ TExternal\+Program\+Fx\+::clone (\begin{DoxyParamCaption}\item[{bool}]{recursive = {\ttfamily true} }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_fx}{TFx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00122                                                    \{}
\DoxyCodeLine{00123   \mbox{\hyperlink{class_t_external_program_fx}{TExternalProgramFx}} *fx =}
\DoxyCodeLine{00124       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_external_program_fx}{TExternalProgramFx}} *\textcolor{keyword}{>}(TExternFx::create(m\_externFxName));}
\DoxyCodeLine{00125   assert(fx);}
\DoxyCodeLine{00126   \textcolor{comment}{// new TExternalProgramFx();}}
\DoxyCodeLine{00127   \textcolor{comment}{// fx-\/>setExecutable(m\_executablePath, m\_args);}}
\DoxyCodeLine{00128 }
\DoxyCodeLine{00129   \textcolor{comment}{// copia della time region}}
\DoxyCodeLine{00130   fx-\/>setActiveTimeRegion(getActiveTimeRegion());}
\DoxyCodeLine{00131   \textcolor{comment}{// fx-\/>m\_imp-\/>m\_activeTimeRegion = m\_imp-\/>m\_activeTimeRegion;}}
\DoxyCodeLine{00132 }
\DoxyCodeLine{00133   fx-\/>getParams()-\/>copy(getParams());}
\DoxyCodeLine{00134 }
\DoxyCodeLine{00135   assert(getInputPortCount() == fx-\/>getInputPortCount());}
\DoxyCodeLine{00136 }
\DoxyCodeLine{00137   \textcolor{comment}{// std::map<std::string, Port>::const\_iterator j;}}
\DoxyCodeLine{00138   \textcolor{comment}{// for(j=m\_ports.begin(); j!=m\_ports.end(); ++j)}}
\DoxyCodeLine{00139   \textcolor{comment}{//  fx-\/>addPort(j-\/>first, j-\/>second.m\_ext, j-\/>second.m\_port != 0);}}
\DoxyCodeLine{00140 }
\DoxyCodeLine{00141   \textcolor{comment}{// copia ricorsiva sulle porte}}
\DoxyCodeLine{00142   \textcolor{keywordflow}{if} (recursive) \{}
\DoxyCodeLine{00143     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < getInputPortCount(); ++i) \{}
\DoxyCodeLine{00144       \mbox{\hyperlink{class_t_fx_port}{TFxPort}} *port = getInputPort(i);}
\DoxyCodeLine{00145       \textcolor{keywordflow}{if} (port-\/>getFx())}
\DoxyCodeLine{00146         fx-\/>\mbox{\hyperlink{class_t_fx_a2f3083c0f21b5a3579b7124db70c06a7}{connect}}(getInputPortName(i), port-\/>getFx()-\/>clone(\textcolor{keyword}{true}));}
\DoxyCodeLine{00147     \}}
\DoxyCodeLine{00148   \}}
\DoxyCodeLine{00149 }
\DoxyCodeLine{00150   \textcolor{comment}{// std::map<std::string, TParamP>::const\_iterator j;}}
\DoxyCodeLine{00151   \textcolor{comment}{// for(j=m\_params.begin(); j!=m\_params.end(); ++j)}}
\DoxyCodeLine{00152   \textcolor{comment}{//  fx-\/>addParam(j-\/>first, j-\/>second-\/>clone());}}
\DoxyCodeLine{00153 }
\DoxyCodeLine{00154   \textcolor{keywordflow}{return} fx;}
\DoxyCodeLine{00155 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_external_program_fx_a1a8f4110b0d9674c59e07d1ab86efe3b}\label{class_t_external_program_fx_a1a8f4110b0d9674c59e07d1ab86efe3b}} 
\index{TExternalProgramFx@{TExternalProgramFx}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!TExternalProgramFx@{TExternalProgramFx}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void TExternal\+Program\+Fx\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{ri }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00199                                                               \{}
\DoxyCodeLine{00200   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} ras = tile.getRaster();}
\DoxyCodeLine{00201   \textcolor{keywordflow}{if} (!ras) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00202   std::string args           = m\_args;}
\DoxyCodeLine{00203   std::string executablePath = ::to\_string(m\_executablePath);}
\DoxyCodeLine{00204   std::map<std::string, TFilePath> tmpFiles;  \textcolor{comment}{// portname -\/-\/> file}}
\DoxyCodeLine{00205   \mbox{\hyperlink{class_t_file_path}{TFilePath}} outputTmpFile;}
\DoxyCodeLine{00206 }
\DoxyCodeLine{00207   std::map<std::string, Port>::const\_iterator portIt;}
\DoxyCodeLine{00208   \textcolor{keywordflow}{for} (portIt = m\_ports.begin(); portIt != m\_ports.end(); ++portIt) \{}
\DoxyCodeLine{00209     \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp            = TSystem::getUniqueFile(\textcolor{stringliteral}{"{}externfx"{}});}
\DoxyCodeLine{00210     fp                      = fp.\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(portIt-\/>second.m\_ext);}
\DoxyCodeLine{00211     tmpFiles[portIt-\/>first] = fp;}
\DoxyCodeLine{00212     \textcolor{keywordflow}{if} (portIt-\/>second.m\_port == 0)  \textcolor{comment}{// solo una porta e' di output}}
\DoxyCodeLine{00213       outputTmpFile = fp;}
\DoxyCodeLine{00214     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00215       \mbox{\hyperlink{class_t_raster_fx_port}{TRasterFxPort}} *tmp;}
\DoxyCodeLine{00216       tmp = portIt-\/>second.m\_port;}
\DoxyCodeLine{00217       \textcolor{keywordflow}{if} (tmp-\/>isConnected()) \{}
\DoxyCodeLine{00218         (*tmp)-\/>compute(tile, frame, ri);}
\DoxyCodeLine{00219         TImageWriter::save(fp, ras);}
\DoxyCodeLine{00220       \}}
\DoxyCodeLine{00221     \}}
\DoxyCodeLine{00222   \}}
\DoxyCodeLine{00223 }
\DoxyCodeLine{00224   \textcolor{comment}{// args e' della forma "{}\$src \$ctrl -\/o \$out -\/v \$value"{}}}
\DoxyCodeLine{00225   \textcolor{comment}{// sostituisco le variabili}}
\DoxyCodeLine{00226   \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{00227   \textcolor{keywordflow}{for} (;;) \{}
\DoxyCodeLine{00228     i = args.find(\textcolor{charliteral}{'\$'}, i);}
\DoxyCodeLine{00229     \textcolor{keywordflow}{if} (i == (\textcolor{keywordtype}{int})std::string::npos) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00230     \textcolor{keywordtype}{int} j   = i + 1;}
\DoxyCodeLine{00231     \textcolor{keywordtype}{int} len = args.length();}
\DoxyCodeLine{00232     \textcolor{keywordflow}{while} (j < len \&\& isalnum(args[j])) j++;}
\DoxyCodeLine{00233     \textcolor{comment}{// un '\$' non seguito da caratteri alfanumerici va ignorato}}
\DoxyCodeLine{00234     \textcolor{keywordflow}{if} (j == i + 1) \{}
\DoxyCodeLine{00235       \textcolor{comment}{// la sequenza '\$\$' diventa '\$'}}
\DoxyCodeLine{00236       \textcolor{keywordflow}{if} (j < len \&\& args[j] == \textcolor{charliteral}{'\$'}) args.replace(i, 2, \textcolor{stringliteral}{"{}\$"{}});}
\DoxyCodeLine{00237       i++;}
\DoxyCodeLine{00238       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00239     \}}
\DoxyCodeLine{00240     \textcolor{comment}{// ho trovato una variabile}}
\DoxyCodeLine{00241     \textcolor{keywordtype}{int} m            = j -\/ i -\/ 1;}
\DoxyCodeLine{00242     std::string name = args.substr(i + 1, m);}
\DoxyCodeLine{00243     \textcolor{comment}{// calcolo il valore.}}
\DoxyCodeLine{00244     std::string value;}
\DoxyCodeLine{00245 }
\DoxyCodeLine{00246     std::map<std::string, TFilePath>::const\_iterator it;}
\DoxyCodeLine{00247     it = tmpFiles.find(name);}
\DoxyCodeLine{00248     \textcolor{keywordflow}{if} (it != tmpFiles.end()) \{}
\DoxyCodeLine{00249       \textcolor{comment}{// e' una porta. il valore e' il nome del}}
\DoxyCodeLine{00250       \textcolor{comment}{// file temporaneo}}
\DoxyCodeLine{00251       value = \textcolor{stringliteral}{"{}\(\backslash\)"{}"{}} + ::to\_string(it-\/>second.getWideString()) + \textcolor{stringliteral}{"{}\(\backslash\)"{}"{}};}
\DoxyCodeLine{00252     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00253       \textcolor{comment}{// e' un parametro}}
\DoxyCodeLine{00254       \textcolor{comment}{// se il nome non viene riconosciuto sostituisco la stringa nulla}}
\DoxyCodeLine{00255       TDoubleParamP param = \mbox{\hyperlink{class_t_smart_pointer_t}{TParamP}}(getParams()-\/>getParam(name));}
\DoxyCodeLine{00256       \textcolor{keywordflow}{if} (param) value    = std::to\_string(param-\/>getValue(frame));}
\DoxyCodeLine{00257     \}}
\DoxyCodeLine{00258 }
\DoxyCodeLine{00259     args.replace(i, m + 1, value);}
\DoxyCodeLine{00260   \}}
\DoxyCodeLine{00261   args = \textcolor{stringliteral}{"{} "{}} + args;  \textcolor{comment}{// aggiungo uno spazio per sicurezza}}
\DoxyCodeLine{00262   \textcolor{comment}{// ofstream os("{}C:\(\backslash\)\(\backslash\)temp\(\backslash\)\(\backslash\)butta.txt"{});}}
\DoxyCodeLine{00263   \textcolor{comment}{// os << args << endl;}}
\DoxyCodeLine{00264 }
\DoxyCodeLine{00265   \textcolor{comment}{// bisognerebbe calcolare le immagini dalla/e porta/e di input}}
\DoxyCodeLine{00266   \textcolor{comment}{// scrivere il/i valore/i nei files temporanei/o}}
\DoxyCodeLine{00267   \textcolor{comment}{// chiamare "{}m\_executablePath args"{}}}
\DoxyCodeLine{00268   \textcolor{comment}{// e leggere l'immagine scritta in outputTmpFile}}
\DoxyCodeLine{00269   \textcolor{comment}{// poi cancellare tutto}}
\DoxyCodeLine{00270   std::string expandedargs;}
\DoxyCodeLine{00271   \textcolor{keywordtype}{char} buffer[1024];}
\DoxyCodeLine{00272 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{00273   ExpandEnvironmentStrings(args.c\_str(), buffer, 1024);}
\DoxyCodeLine{00274 }
\DoxyCodeLine{00275   STARTUPINFO si;}
\DoxyCodeLine{00276   PROCESS\_INFORMATION pinfo;}
\DoxyCodeLine{00277 }
\DoxyCodeLine{00278   GetStartupInfo(\&si);}
\DoxyCodeLine{00279 }
\DoxyCodeLine{00280   BOOL ret = CreateProcess(}
\DoxyCodeLine{00281       (\textcolor{keywordtype}{char} *)executablePath.c\_str(),           \textcolor{comment}{// name of executable module}}
\DoxyCodeLine{00282       buffer,                                   \textcolor{comment}{// command line string}}
\DoxyCodeLine{00283       NULL,                                     \textcolor{comment}{// SD}}
\DoxyCodeLine{00284       NULL,                                     \textcolor{comment}{// SD}}
\DoxyCodeLine{00285       TRUE,                                     \textcolor{comment}{// handle inheritance option}}
\DoxyCodeLine{00286       CREATE\_NO\_WINDOW, \textcolor{comment}{/*CREATE\_NEW\_CONSOLE*/}  \textcolor{comment}{// creation flags}}
\DoxyCodeLine{00287       NULL,                                     \textcolor{comment}{// new environment block}}
\DoxyCodeLine{00288       NULL,                                     \textcolor{comment}{// current directory name}}
\DoxyCodeLine{00289       \&si,                                      \textcolor{comment}{// startup information}}
\DoxyCodeLine{00290       \&pinfo                                    \textcolor{comment}{// process information}}
\DoxyCodeLine{00291       );}
\DoxyCodeLine{00292 }
\DoxyCodeLine{00293   \textcolor{keywordflow}{if} (!ret) DWORD err = GetLastError();}
\DoxyCodeLine{00294 }
\DoxyCodeLine{00295   \textcolor{comment}{// aspetta che il processo termini}}
\DoxyCodeLine{00296   WaitForSingleObject(pinfo.hProcess, INFINITE);}
\DoxyCodeLine{00297 }
\DoxyCodeLine{00298   DWORD exitCode;}
\DoxyCodeLine{00299   ret = GetExitCodeProcess(pinfo.hProcess,  \textcolor{comment}{// handle to the process}}
\DoxyCodeLine{00300                            \&exitCode);      \textcolor{comment}{// termination status}}
\DoxyCodeLine{00301 }
\DoxyCodeLine{00302 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00303   std::string cmdline = executablePath + buffer;}
\DoxyCodeLine{00304   \textcolor{comment}{//    int exitCode =}}
\DoxyCodeLine{00305   system(cmdline.c\_str());}
\DoxyCodeLine{00306 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00307   \textcolor{comment}{/*}}
\DoxyCodeLine{00308 \textcolor{comment}{string name = m\_executablePath.getName();}}
\DoxyCodeLine{00309 \textcolor{comment}{TPixel32 color;}}
\DoxyCodeLine{00310 \textcolor{comment}{if(name == "{}saturate"{}) color = TPixel32::Magenta;}}
\DoxyCodeLine{00311 \textcolor{comment}{else if(name == "{}over"{}) color = TPixel32::Green;}}
\DoxyCodeLine{00312 \textcolor{comment}{else color = TPixel32::Red;}}
\DoxyCodeLine{00313 \textcolor{comment}{for(int iy=0;iy<ras-\/>getLy();iy++)}}
\DoxyCodeLine{00314 \textcolor{comment}{\{}}
\DoxyCodeLine{00315 \textcolor{comment}{TPixel32 *pix = ras-\/>pixels(iy);}}
\DoxyCodeLine{00316 \textcolor{comment}{TPixel32 *endPix = pix + ras-\/>getLx();}}
\DoxyCodeLine{00317 \textcolor{comment}{double x = tile.m\_pos.x;}}
\DoxyCodeLine{00318 \textcolor{comment}{double y = tile.m\_pos.y + iy;}}
\DoxyCodeLine{00319 \textcolor{comment}{while(pix<endPix)}}
\DoxyCodeLine{00320 \textcolor{comment}{ \{}}
\DoxyCodeLine{00321 \textcolor{comment}{  if(x*x+y*y<900) *pix = color;}}
\DoxyCodeLine{00322 \textcolor{comment}{  else *pix = TPixel32(0,0,0,0);}}
\DoxyCodeLine{00323 \textcolor{comment}{  ++pix;}}
\DoxyCodeLine{00324 \textcolor{comment}{  x+=1.0;}}
\DoxyCodeLine{00325 \textcolor{comment}{ \}}}
\DoxyCodeLine{00326 \textcolor{comment}{\}}}
\DoxyCodeLine{00327 \textcolor{comment}{*/}}
\DoxyCodeLine{00328 }
\DoxyCodeLine{00329   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00330     \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} ras = tile.getRaster();}
\DoxyCodeLine{00331     \mbox{\hyperlink{class_t_image_reader_ade3cafcda8a3e691b08892fb9cb3a97a}{TImageReader::load}}(outputTmpFile, ras);}
\DoxyCodeLine{00332   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00333   \}}
\DoxyCodeLine{00334 }
\DoxyCodeLine{00335   \textcolor{comment}{// butto i file temporanei creati}}
\DoxyCodeLine{00336   std::map<std::string, TFilePath>::const\_iterator fileIt;}
\DoxyCodeLine{00337   \textcolor{keywordflow}{for} (fileIt = tmpFiles.begin(); fileIt != tmpFiles.end(); ++fileIt) \{}
\DoxyCodeLine{00338     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(fileIt-\/>second).doesExist() == \textcolor{keyword}{true}) \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00339         TSystem::deleteFile(fileIt-\/>second);}
\DoxyCodeLine{00340       \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00341       \}}
\DoxyCodeLine{00342   \}}
\DoxyCodeLine{00343   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(outputTmpFile).doesExist() == \textcolor{keyword}{true}) \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00344       TSystem::deleteFile(outputTmpFile);}
\DoxyCodeLine{00345     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00346     \}}
\DoxyCodeLine{00347 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_external_program_fx_a4ed1afe67b4cb1df21c20c36e1a4bfb2}\label{class_t_external_program_fx_a4ed1afe67b4cb1df21c20c36e1a4bfb2}} 
\index{TExternalProgramFx@{TExternalProgramFx}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!TExternalProgramFx@{TExternalProgramFx}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool TExternal\+Program\+Fx\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00160                                                                 \{}
\DoxyCodeLine{00161   \textcolor{comment}{// bBox = TRectD(-\/30,-\/30,30,30);}}
\DoxyCodeLine{00162   \textcolor{comment}{//  return true;}}
\DoxyCodeLine{00163 }
\DoxyCodeLine{00164   std::map<std::string, Port>::const\_iterator portIt;}
\DoxyCodeLine{00165   \textcolor{keywordflow}{for} (portIt = m\_ports.begin(); portIt != m\_ports.end(); ++portIt) \{}
\DoxyCodeLine{00166     \textcolor{keywordflow}{if} (portIt-\/>second.m\_port != 0) \{}
\DoxyCodeLine{00167       \mbox{\hyperlink{class_t_raster_fx_port}{TRasterFxPort}} *tmp;}
\DoxyCodeLine{00168       tmp = portIt-\/>second.m\_port;}
\DoxyCodeLine{00169       \textcolor{keywordflow}{if} (tmp-\/>isConnected()) \{}
\DoxyCodeLine{00170         \mbox{\hyperlink{class_t_rect_t}{TRectD}} tmpbBox;}
\DoxyCodeLine{00171         (*tmp)-\/>doGetBBox(frame, tmpbBox, info);}
\DoxyCodeLine{00172         bBox += tmpbBox;}
\DoxyCodeLine{00173       \}}
\DoxyCodeLine{00174     \}}
\DoxyCodeLine{00175   \}}
\DoxyCodeLine{00176 }
\DoxyCodeLine{00177   \textcolor{keywordflow}{if} (bBox.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \{}
\DoxyCodeLine{00178     bBox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00179     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00180   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00181     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00182   \textcolor{comment}{/*}}
\DoxyCodeLine{00183 \textcolor{comment}{if(m\_input1.isConnected() || m\_input2.isConnected())}}
\DoxyCodeLine{00184 \textcolor{comment}{\{}}
\DoxyCodeLine{00185 \textcolor{comment}{bool ret = m\_input1-\/>doGetBBox(frame, bBox) || m\_input1-\/>doGetBBox(frame, bBox);}}
\DoxyCodeLine{00186 \textcolor{comment}{return ret;}}
\DoxyCodeLine{00187 \textcolor{comment}{\}}}
\DoxyCodeLine{00188 \textcolor{comment}{else}}
\DoxyCodeLine{00189 \textcolor{comment}{\{}}
\DoxyCodeLine{00190 \textcolor{comment}{bBox = TRectD();}}
\DoxyCodeLine{00191 \textcolor{comment}{return false;}}
\DoxyCodeLine{00192 \textcolor{comment}{\}}}
\DoxyCodeLine{00193 \textcolor{comment}{*/}}
\DoxyCodeLine{00194 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_external_program_fx_af1a00b78332c3e08f22cff023a6db971}\label{class_t_external_program_fx_af1a00b78332c3e08f22cff023a6db971}} 
\index{TExternalProgramFx@{TExternalProgramFx}!getExternFxName@{getExternFxName}}
\index{getExternFxName@{getExternFxName}!TExternalProgramFx@{TExternalProgramFx}}
\doxysubsubsection{\texorpdfstring{getExternFxName()}{getExternFxName()}}
{\footnotesize\ttfamily std\+::string TExternal\+Program\+Fx\+::get\+Extern\+Fx\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00081 \{ \textcolor{keywordflow}{return} m\_externFxName; \};}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_external_program_fx_ab5801198a0352840b5c4bfcbe6a8b884}\label{class_t_external_program_fx_ab5801198a0352840b5c4bfcbe6a8b884}} 
\index{TExternalProgramFx@{TExternalProgramFx}!initialize@{initialize}}
\index{initialize@{initialize}!TExternalProgramFx@{TExternalProgramFx}}
\doxysubsubsection{\texorpdfstring{initialize()}{initialize()}}
{\footnotesize\ttfamily void TExternal\+Program\+Fx\+::initialize (\begin{DoxyParamCaption}\item[{std\+::string}]{name }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00055                                                   \{}
\DoxyCodeLine{00056   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = getExternFxPath() + (name + \textcolor{stringliteral}{"{}.xml"{}});}
\DoxyCodeLine{00057   \mbox{\hyperlink{class_t_i_stream}{TIStream}} is(fp);}
\DoxyCodeLine{00058   \textcolor{keywordflow}{if} (!is) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00059 }
\DoxyCodeLine{00060   std::string tagName;}
\DoxyCodeLine{00061   \textcolor{keywordflow}{if} (!is.matchTag(tagName) || tagName != \textcolor{stringliteral}{"{}externFx"{}}) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00062 }
\DoxyCodeLine{00063   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00064     \textcolor{keywordflow}{while} (is.matchTag(tagName)) \{}
\DoxyCodeLine{00065       \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}executable"{}}) \{}
\DoxyCodeLine{00066         \mbox{\hyperlink{class_t_file_path}{TFilePath}} executable = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(is.getTagAttribute(\textcolor{stringliteral}{"{}path"{}}));}
\DoxyCodeLine{00067         std::string args     = is.getTagAttribute(\textcolor{stringliteral}{"{}args"{}});}
\DoxyCodeLine{00068         \textcolor{keywordflow}{if} (executable == \mbox{\hyperlink{class_t_file_path}{TFilePath}}())}
\DoxyCodeLine{00069           \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}missing executable path"{}});}
\DoxyCodeLine{00070         \textcolor{keywordflow}{if} (args == \textcolor{stringliteral}{"{}"{}}) \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}missing args string"{}});}
\DoxyCodeLine{00071         setExecutable(executable, args);}
\DoxyCodeLine{00072       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}inport"{}} || tagName == \textcolor{stringliteral}{"{}outport"{}}) \{}
\DoxyCodeLine{00073         std::string portName = is.getTagAttribute(\textcolor{stringliteral}{"{}name"{}});}
\DoxyCodeLine{00074         std::string ext      = is.getTagAttribute(\textcolor{stringliteral}{"{}ext"{}});}
\DoxyCodeLine{00075         \textcolor{keywordflow}{if} (portName == \textcolor{stringliteral}{"{}"{}}) \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}missing port name"{}});}
\DoxyCodeLine{00076         \textcolor{keywordflow}{if} (ext == \textcolor{stringliteral}{"{}"{}}) \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}missing port ext"{}});}
\DoxyCodeLine{00077         addPort(portName, ext, tagName == \textcolor{stringliteral}{"{}inport"{}});}
\DoxyCodeLine{00078       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}param"{}}) \{}
\DoxyCodeLine{00079         std::string paramName = is.getTagAttribute(\textcolor{stringliteral}{"{}name"{}});}
\DoxyCodeLine{00080         \textcolor{keywordflow}{if} (paramName == \textcolor{stringliteral}{"{}"{}}) \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}missing param name"{}});}
\DoxyCodeLine{00081         std::string type = is.getTagAttribute(\textcolor{stringliteral}{"{}type"{}});}
\DoxyCodeLine{00082         \textcolor{keywordflow}{if} (type == \textcolor{stringliteral}{"{}"{}}) \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}missing param type"{}});}
\DoxyCodeLine{00083         \textcolor{keywordflow}{if} (type != \textcolor{stringliteral}{"{}double"{}})}
\DoxyCodeLine{00084           \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}param type not yet implemented"{}});}
\DoxyCodeLine{00085         TDoubleParamP param = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_double_param}{TDoubleParam}}();}
\DoxyCodeLine{00086         param-\/>setName(paramName);}
\DoxyCodeLine{00087         m\_params.push\_back(param);}
\DoxyCodeLine{00088       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00089         \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}unexpected tag "{}} + tagName);}
\DoxyCodeLine{00090     \}}
\DoxyCodeLine{00091     is.closeChild();}
\DoxyCodeLine{00092 }
\DoxyCodeLine{00093     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)m\_params.size(); i++)}
\DoxyCodeLine{00094       bindParam(\textcolor{keyword}{this}, m\_params[i]-\/>getName(), m\_params[i]);}
\DoxyCodeLine{00095 }
\DoxyCodeLine{00096   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00097   \}}
\DoxyCodeLine{00098 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_external_program_fx_acb6d4d750fcc4b73c86ae3bd79bf4c0f}\label{class_t_external_program_fx_acb6d4d750fcc4b73c86ae3bd79bf4c0f}} 
\index{TExternalProgramFx@{TExternalProgramFx}!loadData@{loadData}}
\index{loadData@{loadData}!TExternalProgramFx@{TExternalProgramFx}}
\doxysubsubsection{\texorpdfstring{loadData()}{loadData()}}
{\footnotesize\ttfamily void TExternal\+Program\+Fx\+::load\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_i_stream}{TIStream}} \&}]{is }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

\begin{DoxyVerb} This is a pure virtual function and must be overridden with a method
\end{DoxyVerb}
 that implements the object loading from a stream (i.\+e take the object\textquotesingle{}s features from a formatted data stream). For example the \mbox{\hyperlink{class_t_stage_object}{TStage\+Object}} class use his implementation to take the values of the parameters that characterizes a stage object as name, coordinates, etc... from a file. {\itshape is} is an input file stream 

Implements \mbox{\hyperlink{class_t_persist_a9e9d78431e843edb9299095af867a136}{TPersist}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00351                                               \{}
\DoxyCodeLine{00352   std::string tagName;}
\DoxyCodeLine{00353   \textcolor{keywordflow}{while} (is.\mbox{\hyperlink{class_t_i_stream_a735640240402316f00c595134bfe6b4b}{openChild}}(tagName)) \{}
\DoxyCodeLine{00354     \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}path"{}}) \{}
\DoxyCodeLine{00355       is >> m\_executablePath;}
\DoxyCodeLine{00356     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}args"{}}) \{}
\DoxyCodeLine{00357       is >> m\_args;}
\DoxyCodeLine{00358     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}name"{}}) \{}
\DoxyCodeLine{00359       is >> m\_externFxName;}
\DoxyCodeLine{00360       \textcolor{comment}{// initialize(m\_externFxName);}}
\DoxyCodeLine{00361     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}params"{}}) \{}
\DoxyCodeLine{00362       \textcolor{keywordflow}{while} (is.\mbox{\hyperlink{class_t_i_stream_a5fe7ddb5560e39e0ab4ff57d24926d41}{matchTag}}(tagName)) \{}
\DoxyCodeLine{00363         \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}param"{}}) \{}
\DoxyCodeLine{00364           \textcolor{comment}{// assert(0);}}
\DoxyCodeLine{00365           std::string paramName = is.\mbox{\hyperlink{class_t_i_stream_a03a74e5481dd5b2d328351c5c4022ab2}{getTagAttribute}}(\textcolor{stringliteral}{"{}name"{}});}
\DoxyCodeLine{00366           TDoubleParamP param   = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_double_param}{TDoubleParam}}();}
\DoxyCodeLine{00367           param-\/>setName(paramName);}
\DoxyCodeLine{00368           m\_params.push\_back(param);}
\DoxyCodeLine{00369         \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00370           \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}unexpected tag "{}} + tagName);}
\DoxyCodeLine{00371       \}}
\DoxyCodeLine{00372       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)m\_params.size(); i++)}
\DoxyCodeLine{00373         bindParam(\textcolor{keyword}{this}, m\_params[i]-\/>getName(), m\_params[i]);}
\DoxyCodeLine{00374     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}ports"{}}) \{}
\DoxyCodeLine{00375       \textcolor{keywordflow}{while} (is.\mbox{\hyperlink{class_t_i_stream_a5fe7ddb5560e39e0ab4ff57d24926d41}{matchTag}}(tagName)) \{}
\DoxyCodeLine{00376         \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}port"{}}) \{}
\DoxyCodeLine{00377           std::string name = is.\mbox{\hyperlink{class_t_i_stream_a03a74e5481dd5b2d328351c5c4022ab2}{getTagAttribute}}(\textcolor{stringliteral}{"{}name"{}});}
\DoxyCodeLine{00378           std::string ext  = is.\mbox{\hyperlink{class_t_i_stream_a03a74e5481dd5b2d328351c5c4022ab2}{getTagAttribute}}(\textcolor{stringliteral}{"{}ext"{}});}
\DoxyCodeLine{00379           addPort(name, ext, \textcolor{keyword}{true});}
\DoxyCodeLine{00380         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}outport"{}}) \{}
\DoxyCodeLine{00381           std::string name = is.\mbox{\hyperlink{class_t_i_stream_a03a74e5481dd5b2d328351c5c4022ab2}{getTagAttribute}}(\textcolor{stringliteral}{"{}name"{}});}
\DoxyCodeLine{00382           std::string ext  = is.\mbox{\hyperlink{class_t_i_stream_a03a74e5481dd5b2d328351c5c4022ab2}{getTagAttribute}}(\textcolor{stringliteral}{"{}ext"{}});}
\DoxyCodeLine{00383           addPort(name, ext, \textcolor{keyword}{false});}
\DoxyCodeLine{00384         \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00385           \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}unexpected tag "{}} + tagName);}
\DoxyCodeLine{00386       \}}
\DoxyCodeLine{00387     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}super"{}}) \{}
\DoxyCodeLine{00388       \mbox{\hyperlink{class_t_fx_a501532b34979b9e44318ddbc2aed95be}{TExternFx::loadData}}(is);}
\DoxyCodeLine{00389     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00390       \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}unexpected tag "{}} + tagName);}
\DoxyCodeLine{00391     is.\mbox{\hyperlink{class_t_i_stream_a57d85a02799eb0e904c8b22788dc671b}{closeChild}}();}
\DoxyCodeLine{00392   \}}
\DoxyCodeLine{00393 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01242}{TIStream\+::close\+Child()}}, \mbox{\hyperlink{l01190}{TIStream\+::get\+Tag\+Attribute()}}, \mbox{\hyperlink{l00703}{TFx\+::load\+Data()}}, \mbox{\hyperlink{l01178}{TIStream\+::match\+Tag()}}, and \mbox{\hyperlink{l01231}{TIStream\+::open\+Child()}}.

\mbox{\Hypertarget{class_t_external_program_fx_a4428a31fa1f7bdf9211bd4baea32fe53}\label{class_t_external_program_fx_a4428a31fa1f7bdf9211bd4baea32fe53}} 
\index{TExternalProgramFx@{TExternalProgramFx}!saveData@{saveData}}
\index{saveData@{saveData}!TExternalProgramFx@{TExternalProgramFx}}
\doxysubsubsection{\texorpdfstring{saveData()}{saveData()}}
{\footnotesize\ttfamily void TExternal\+Program\+Fx\+::save\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_o_stream}{TOStream}} \&}]{os }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

\begin{DoxyVerb} This is a pure virtual function and must be overridden with a method
\end{DoxyVerb}
 that implements the object saving to a data stream (i.\+e put the object\textquotesingle{}s features on a formatted data stream). For example the \mbox{\hyperlink{class_t_stage_object}{TStage\+Object}} class use his implementation to save the values of the parameters that characterizes a stage object as name, coordinates, etc... on a file {\itshape os} is an output file stream. 

Implements \mbox{\hyperlink{class_t_persist_afb991f7b26f14dbee1740ef036ff4e85}{TPersist}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00395                                               \{}
\DoxyCodeLine{00396   os.\mbox{\hyperlink{class_t_o_stream_a9cd1359e6b21d85786708c7e680756d1}{child}}(\textcolor{stringliteral}{"{}name"{}}) << m\_externFxName;}
\DoxyCodeLine{00397   os.\mbox{\hyperlink{class_t_o_stream_a9cd1359e6b21d85786708c7e680756d1}{child}}(\textcolor{stringliteral}{"{}path"{}}) << m\_executablePath;}
\DoxyCodeLine{00398   os.\mbox{\hyperlink{class_t_o_stream_a9cd1359e6b21d85786708c7e680756d1}{child}}(\textcolor{stringliteral}{"{}args"{}}) << m\_args;}
\DoxyCodeLine{00399   os.\mbox{\hyperlink{class_t_o_stream_a38fe0f56d934f1c25e2b5d8156415673}{openChild}}(\textcolor{stringliteral}{"{}params"{}});}
\DoxyCodeLine{00400   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < getParams()-\/>getParamCount(); i++) \{}
\DoxyCodeLine{00401     std::map<std::string, std::string> attr;}
\DoxyCodeLine{00402     attr[\textcolor{stringliteral}{"{}name"{}}] = getParams()-\/>getParamName(i);}
\DoxyCodeLine{00403     attr[\textcolor{stringliteral}{"{}type"{}}] = \textcolor{stringliteral}{"{}double"{}};}
\DoxyCodeLine{00404     os.\mbox{\hyperlink{class_t_o_stream_a4568ce0cc2ace90c334f96eddcd11f17}{openCloseChild}}(\textcolor{stringliteral}{"{}param"{}}, attr);}
\DoxyCodeLine{00405   \}}
\DoxyCodeLine{00406   os.\mbox{\hyperlink{class_t_o_stream_ae80752da32b21a502953e151e7c4b2ee}{closeChild}}();}
\DoxyCodeLine{00407   os.\mbox{\hyperlink{class_t_o_stream_a38fe0f56d934f1c25e2b5d8156415673}{openChild}}(\textcolor{stringliteral}{"{}ports"{}});}
\DoxyCodeLine{00408   std::map<std::string, Port>::iterator portIt;}
\DoxyCodeLine{00409   \textcolor{keywordflow}{for} (portIt = m\_ports.begin(); portIt != m\_ports.end(); ++portIt) \{}
\DoxyCodeLine{00410     std::map<std::string, std::string> attr;}
\DoxyCodeLine{00411     attr[\textcolor{stringliteral}{"{}name"{}}]        = portIt-\/>second.m\_name;}
\DoxyCodeLine{00412     attr[\textcolor{stringliteral}{"{}ext"{}}]         = portIt-\/>second.m\_ext;}
\DoxyCodeLine{00413     std::string tagName = portIt-\/>second.m\_port == 0 ? \textcolor{stringliteral}{"{}outport"{}} : \textcolor{stringliteral}{"{}port"{}};}
\DoxyCodeLine{00414     os.\mbox{\hyperlink{class_t_o_stream_a4568ce0cc2ace90c334f96eddcd11f17}{openCloseChild}}(tagName, attr);}
\DoxyCodeLine{00415   \}}
\DoxyCodeLine{00416   os.\mbox{\hyperlink{class_t_o_stream_ae80752da32b21a502953e151e7c4b2ee}{closeChild}}();}
\DoxyCodeLine{00417   os.\mbox{\hyperlink{class_t_o_stream_a38fe0f56d934f1c25e2b5d8156415673}{openChild}}(\textcolor{stringliteral}{"{}super"{}});}
\DoxyCodeLine{00418   \mbox{\hyperlink{class_t_fx_af9e88c53699cfa73960e37bb104ebcfb}{TExternFx::saveData}}(os);}
\DoxyCodeLine{00419   os.\mbox{\hyperlink{class_t_o_stream_ae80752da32b21a502953e151e7c4b2ee}{closeChild}}();}
\DoxyCodeLine{00420 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00482}{TOStream\+::child()}}, \mbox{\hyperlink{l00520}{TOStream\+::close\+Child()}}, \mbox{\hyperlink{class_t_o_stream_a38fe0f56d934f1c25e2b5d8156415673}{TOStream\+::open\+Child()}}, \mbox{\hyperlink{l00535}{TOStream\+::open\+Close\+Child()}}, and \mbox{\hyperlink{l00845}{TFx\+::save\+Data()}}.

\mbox{\Hypertarget{class_t_external_program_fx_ac3e47902f59a1e61f515e207f05ab94d}\label{class_t_external_program_fx_ac3e47902f59a1e61f515e207f05ab94d}} 
\index{TExternalProgramFx@{TExternalProgramFx}!setExecutable@{setExecutable}}
\index{setExecutable@{setExecutable}!TExternalProgramFx@{TExternalProgramFx}}
\doxysubsubsection{\texorpdfstring{setExecutable()}{setExecutable()}}
{\footnotesize\ttfamily void TExternal\+Program\+Fx\+::set\+Executable (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}]{fp,  }\item[{std\+::string}]{args }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00069                                                    \{}
\DoxyCodeLine{00070     m\_executablePath = fp;}
\DoxyCodeLine{00071     m\_args           = args;}
\DoxyCodeLine{00072   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_external_program_fx_ad92872705c7707ec4245894a871eb6dc}\label{class_t_external_program_fx_ad92872705c7707ec4245894a871eb6dc}} 
\index{TExternalProgramFx@{TExternalProgramFx}!setExternFxName@{setExternFxName}}
\index{setExternFxName@{setExternFxName}!TExternalProgramFx@{TExternalProgramFx}}
\doxysubsubsection{\texorpdfstring{setExternFxName()}{setExternFxName()}}
{\footnotesize\ttfamily void TExternal\+Program\+Fx\+::set\+Extern\+Fx\+Name (\begin{DoxyParamCaption}\item[{std\+::string}]{name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00080 \{ m\_externFxName = name; \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/texternfx.\+h\item 
E\+:/opentoonz/toonz/sources/tnzbase/texternfx.\+cpp\end{DoxyCompactItemize}
