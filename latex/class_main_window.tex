\hypertarget{class_main_window}{}\doxysection{Main\+Window Class Reference}
\label{class_main_window}\index{MainWindow@{MainWindow}}
Inheritance diagram for Main\+Window\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_main_window}
\end{center}
\end{figure}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_main_window_ac51dda060e7642e5634123c57ee91daf}{change\+Window\+Title}} ()
\item 
void \mbox{\hyperlink{class_main_window_a1672970900f842303fb864d7fe33003e}{change\+Window\+Title}} (QString \&)
\end{DoxyCompactItemize}
\doxysubsection*{Signals}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_main_window_ae33287d584d9840067cca12e5089b5d1}\label{class_main_window_ae33287d584d9840067cca12e5089b5d1}} 
void {\bfseries exit} (bool \&)
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_main_window_a71e3d7719d78a668cc1c85085cc39917}{Main\+Window}} (const QString \&argument\+Layout\+File\+Name, QWidget $\ast$parent=0, Qt\+::\+WFlags flags=0)
\item 
void \mbox{\hyperlink{class_main_window_a8e21ac5436b30ed6de440c71751b59f4}{startup\+Floating\+Panels}} ()
\item 
void \mbox{\hyperlink{class_main_window_a396d25e5a2750fa909ba152ebe815472}{on\+Quit}} ()
\item 
void \mbox{\hyperlink{class_main_window_ab53e62f6946d426add94fc29f1384428}{on\+Undo}} ()
\item 
void \mbox{\hyperlink{class_main_window_a449c6ed68cdacce074489d55ee8ce265}{on\+Redo}} ()
\item 
void \mbox{\hyperlink{class_main_window_a90bde85e6f008b4ab8dc11a7336431ae}{on\+New\+Scene}} ()
\item 
void \mbox{\hyperlink{class_main_window_a1d6287b5ca3eb8a0434d82a971284dcf}{on\+Load\+Scene}} ()
\item 
void \mbox{\hyperlink{class_main_window_ac0be70955753ffef344fc43e201d01e5}{on\+Load\+Sub\+Scene}} ()
\item 
void \mbox{\hyperlink{class_main_window_af7ea7bf7b464c1a5241e22819ef139a5}{reset\+Rooms\+Layout}} ()
\item 
void \mbox{\hyperlink{class_main_window_a19ebc2d372ccf4afe3d1d578fe0e62b5}{maximize\+Panel}} ()
\item 
void \mbox{\hyperlink{class_main_window_a75f9926e242e03545c8befedb11fb25e}{full\+Screen\+Window}} ()
\item 
void \mbox{\hyperlink{class_main_window_a2cbf559b3d0dcf370befca1748bcfc24}{autofill\+Toggle}} ()
\item 
void \mbox{\hyperlink{class_main_window_a427070d53b46eec45269c4435094919d}{on\+Upgrade\+Tab\+Pro}} ()
\item 
void \mbox{\hyperlink{class_main_window_ada07f1501d5aa1ee3c67f4986ba8b153}{on\+About}} ()
\item 
void \mbox{\hyperlink{class_main_window_a3017ed1b8e8c2fe6cf8182d4e320acf7}{on\+Open\+Online\+Manual}} ()
\item 
void \mbox{\hyperlink{class_main_window_adbea4cb169d9ad6c8bcd3b762fdb1d53}{on\+Open\+Whats\+New}} ()
\item 
void \mbox{\hyperlink{class_main_window_a616229237e321dd0c601eee8a48ce269}{on\+Open\+Community\+Forum}} ()
\item 
void \mbox{\hyperlink{class_main_window_a0dea767f66c89973af5bdc4e2c12b3ae}{on\+Open\+Report\+ABug}} ()
\item 
void \mbox{\hyperlink{class_main_window_a10750b9bdf057c5863a1ff682390170f}{check\+For\+Updates}} ()
\item 
int \mbox{\hyperlink{class_main_window_a64289b5fb9730cc522183413254b378b}{get\+Room\+Count}} () const
\item 
\mbox{\hyperlink{class_room}{Room}} $\ast$ \mbox{\hyperlink{class_main_window_a86b908922cb552e7cff28cd57c66ce09}{get\+Room}} (int index) const
\item 
\mbox{\hyperlink{class_room}{Room}} $\ast$ \mbox{\hyperlink{class_main_window_a3699443d43812fc67462aab5d2a6cfb2}{get\+Room\+By\+Name}} (QString \&room\+Name)
\item 
\mbox{\hyperlink{class_room}{Room}} $\ast$ \mbox{\hyperlink{class_main_window_ac1fae5d4e2b6b9b01cb798a8c37d1bd5}{get\+Current\+Room}} () const
\item 
void \mbox{\hyperlink{class_main_window_a4f61b12505dba1c41a8ff5da5169b873}{refresh\+Write\+Settings}} ()
\item 
void \mbox{\hyperlink{class_main_window_ac00a5fad59509df5a942ef0f645114f9}{on\+New\+Vector\+Level\+Button\+Pressed}} ()
\item 
void \mbox{\hyperlink{class_main_window_a6c843678fa96d4fe231f1c785f7fd9f8}{on\+New\+Toonz\+Raster\+Level\+Button\+Pressed}} ()
\item 
void \mbox{\hyperlink{class_main_window_ad7d37843716b28954eea0193e9d71a90}{on\+New\+Raster\+Level\+Button\+Pressed}} ()
\item 
void \mbox{\hyperlink{class_main_window_afd6fcccd707546243a6f4165185d4c2e}{clear\+Cache\+Folder}} ()
\item 
QString \mbox{\hyperlink{class_main_window_a36e4582b255e0026b6ee4ad39075b350}{get\+Layout\+Name}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_main_window_afd060ec403f170826c2371bd20f0633c}{on\+Current\+Room\+Changed}} (int new\+Room\+Index)
\item 
void \mbox{\hyperlink{class_main_window_ab3e1fb29b4e22e0c707c39b320ea9750}{on\+Index\+Swapped}} (int first\+Index, int second\+Index)
\item 
void \mbox{\hyperlink{class_main_window_a618e9b9f469ce2421ad1704d72d73303}{insert\+New\+Room}} ()
\item 
void \mbox{\hyperlink{class_main_window_af54bfff43f2bb86c357ac35b21de2f38}{delete\+Room}} (int index)
\item 
void \mbox{\hyperlink{class_main_window_aafc6092830badf147b7b24994a538552}{rename\+Room}} (int index, const QString name)
\item 
void \mbox{\hyperlink{class_main_window_a2dfc907ddc3690c72984e22bc936d7ff}{on\+Menu\+Checkbox\+Changed}} ()
\item 
void \mbox{\hyperlink{class_main_window_a3663213f7496f8a29f840fdc2d146029}{on\+Ink\+Check\+Triggered}} (bool on)
\item 
void \mbox{\hyperlink{class_main_window_a636e1d7dfd5cc08b610d25d19c94f3c2}{on\+Ink1\+Check\+Triggered}} (bool on)
\item 
void \mbox{\hyperlink{class_main_window_a020089ec40a89a3a88dad164c4ee8a05}{on\+Update\+Checker\+Done}} (bool)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_main_window_ac0d01c4182ffba584aca3450d8ca01bc}{show\+Event}} (QShow\+Event $\ast$) override
\item 
void \mbox{\hyperlink{class_main_window_a4aa386518569b0bbceb958df0ddc8f32}{close\+Event}} (QClose\+Event $\ast$) override
\item 
void \mbox{\hyperlink{class_main_window_add5c56df24de179209e0c8e9084ddc2c}{read\+Settings}} (const QString \&layout\+File\+Name)
\item 
void \mbox{\hyperlink{class_main_window_a49be45fc9b993fdc3afe55d4b6fa0650}{write\+Settings}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_main_window_a71e3d7719d78a668cc1c85085cc39917}\label{class_main_window_a71e3d7719d78a668cc1c85085cc39917}} 
\index{MainWindow@{MainWindow}!MainWindow@{MainWindow}}
\index{MainWindow@{MainWindow}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{MainWindow()}{MainWindow()}}
{\footnotesize\ttfamily Main\+Window\+::\+Main\+Window (\begin{DoxyParamCaption}\item[{const QString \&}]{argument\+Layout\+File\+Name,  }\item[{QWidget $\ast$}]{parent = {\ttfamily 0},  }\item[{Qt\+::\+WFlags}]{flags = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00370     : QMainWindow(parent, flags)}
\DoxyCodeLine{00371     , m\_saveSettingsOnQuit(\textcolor{keyword}{true})}
\DoxyCodeLine{00372     , m\_oldRoomIndex(0)}
\DoxyCodeLine{00373     , m\_layoutName(\textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{00374   \textcolor{comment}{// store a main window pointer in advance of making its contents}}
\DoxyCodeLine{00375   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>setMainWindow(\textcolor{keyword}{this});}
\DoxyCodeLine{00376 }
\DoxyCodeLine{00377   m\_toolsActionGroup = \textcolor{keyword}{new} QActionGroup(\textcolor{keyword}{this});}
\DoxyCodeLine{00378   m\_toolsActionGroup-\/>setExclusive(\textcolor{keyword}{true});}
\DoxyCodeLine{00379   m\_currentRoomsChoice = Preferences::instance()-\/>getCurrentRoomChoice();}
\DoxyCodeLine{00380   defineActions();}
\DoxyCodeLine{00381   \textcolor{comment}{// user defined shortcuts will be loaded here}}
\DoxyCodeLine{00382   CommandManager::instance()-\/>loadShortcuts();}
\DoxyCodeLine{00383 }
\DoxyCodeLine{00384   \textcolor{comment}{// initialize tool options shortcuts}}
\DoxyCodeLine{00385   ToolOptionsShortcutInvoker::instance()-\/>initialize();}
\DoxyCodeLine{00386 }
\DoxyCodeLine{00387   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{false});}
\DoxyCodeLine{00388 }
\DoxyCodeLine{00389   \textcolor{comment}{// La menuBar altro non è che una toolbar}}
\DoxyCodeLine{00390   \textcolor{comment}{// in cui posso inserire quanti custom widget voglio.}}
\DoxyCodeLine{00391   m\_topBar = \textcolor{keyword}{new} \mbox{\hyperlink{class_top_bar}{TopBar}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00392 }
\DoxyCodeLine{00393   addToolBar(m\_topBar);}
\DoxyCodeLine{00394   addToolBarBreak(Qt::TopToolBarArea);}
\DoxyCodeLine{00395 }
\DoxyCodeLine{00396   m\_stackedWidget = \textcolor{keyword}{new} QStackedWidget(\textcolor{keyword}{this});}
\DoxyCodeLine{00397 }
\DoxyCodeLine{00398   \textcolor{comment}{// For the style sheet}}
\DoxyCodeLine{00399   m\_stackedWidget-\/>setObjectName(\textcolor{stringliteral}{"{}MainStackedWidget"{}});}
\DoxyCodeLine{00400   m\_stackedWidget-\/>setFrameStyle(QFrame::StyledPanel);}
\DoxyCodeLine{00401 }
\DoxyCodeLine{00402   \textcolor{comment}{// To give a border to the stackedWidget.}}
\DoxyCodeLine{00403   \textcolor{comment}{/*QFrame *centralWidget = new QFrame(this);}}
\DoxyCodeLine{00404 \textcolor{comment}{centralWidget-\/>setFrameStyle(QFrame::StyledPanel);}}
\DoxyCodeLine{00405 \textcolor{comment}{centralWidget-\/>setObjectName("{}centralWidget"{});}}
\DoxyCodeLine{00406 \textcolor{comment}{QHBoxLayout *centralWidgetLayout = new QHBoxLayout;}}
\DoxyCodeLine{00407 \textcolor{comment}{centralWidgetLayout-\/>setMargin(3);}}
\DoxyCodeLine{00408 \textcolor{comment}{centralWidgetLayout-\/>addWidget(m\_stackedWidget);}}
\DoxyCodeLine{00409 \textcolor{comment}{centralWidget-\/>setLayout(centralWidgetLayout);*/}}
\DoxyCodeLine{00410 }
\DoxyCodeLine{00411   setCentralWidget(m\_stackedWidget);}
\DoxyCodeLine{00412 }
\DoxyCodeLine{00413   \textcolor{comment}{// Leggo i settings}}
\DoxyCodeLine{00414   readSettings(argumentLayoutFileName);}
\DoxyCodeLine{00415 }
\DoxyCodeLine{00416   \textcolor{comment}{// Setto le stanze}}
\DoxyCodeLine{00417   QTabBar *roomTabWidget = m\_topBar-\/>getRoomTabWidget();}
\DoxyCodeLine{00418   connect(m\_stackedWidget, SIGNAL(currentChanged(\textcolor{keywordtype}{int})),}
\DoxyCodeLine{00419           SLOT(onCurrentRoomChanged(\textcolor{keywordtype}{int})));}
\DoxyCodeLine{00420   connect(roomTabWidget, SIGNAL(currentChanged(\textcolor{keywordtype}{int})), m\_stackedWidget,}
\DoxyCodeLine{00421           SLOT(setCurrentIndex(\textcolor{keywordtype}{int})));}
\DoxyCodeLine{00422 }
\DoxyCodeLine{00423   \textcolor{comment}{/*-\/-\/ タイトルバーにScene名を表示する -\/-\/*/}}
\DoxyCodeLine{00424   connect(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentScene(), SIGNAL(nameSceneChanged()), \textcolor{keyword}{this},}
\DoxyCodeLine{00425           SLOT(changeWindowTitle()));}
\DoxyCodeLine{00426   changeWindowTitle();}
\DoxyCodeLine{00427 }
\DoxyCodeLine{00428   \textcolor{comment}{// Connetto i comandi che sono in RoomTabWidget}}
\DoxyCodeLine{00429   connect(roomTabWidget, SIGNAL(indexSwapped(\textcolor{keywordtype}{int}, \textcolor{keywordtype}{int})),}
\DoxyCodeLine{00430           SLOT(onIndexSwapped(\textcolor{keywordtype}{int}, \textcolor{keywordtype}{int})));}
\DoxyCodeLine{00431   connect(roomTabWidget, SIGNAL(insertNewTabRoom()), SLOT(insertNewRoom()));}
\DoxyCodeLine{00432   connect(roomTabWidget, SIGNAL(deleteTabRoom(\textcolor{keywordtype}{int})), SLOT(deleteRoom(\textcolor{keywordtype}{int})));}
\DoxyCodeLine{00433   connect(roomTabWidget, SIGNAL(renameTabRoom(\textcolor{keywordtype}{int}, \textcolor{keyword}{const} QString)),}
\DoxyCodeLine{00434           SLOT(renameRoom(\textcolor{keywordtype}{int}, \textcolor{keyword}{const} QString)));}
\DoxyCodeLine{00435 }
\DoxyCodeLine{00436   setCommandHandler(\textcolor{stringliteral}{"{}MI\_Quit"{}}, \textcolor{keyword}{this}, \&MainWindow::onQuit);}
\DoxyCodeLine{00437   setCommandHandler(\textcolor{stringliteral}{"{}MI\_Undo"{}}, \textcolor{keyword}{this}, \&MainWindow::onUndo);}
\DoxyCodeLine{00438   setCommandHandler(\textcolor{stringliteral}{"{}MI\_Redo"{}}, \textcolor{keyword}{this}, \&MainWindow::onRedo);}
\DoxyCodeLine{00439   setCommandHandler(\textcolor{stringliteral}{"{}MI\_NewScene"{}}, \textcolor{keyword}{this}, \&MainWindow::onNewScene);}
\DoxyCodeLine{00440   setCommandHandler(\textcolor{stringliteral}{"{}MI\_LoadScene"{}}, \textcolor{keyword}{this}, \&MainWindow::onLoadScene);}
\DoxyCodeLine{00441   setCommandHandler(\textcolor{stringliteral}{"{}MI\_LoadSubSceneFile"{}}, \textcolor{keyword}{this}, \&MainWindow::onLoadSubScene);}
\DoxyCodeLine{00442   setCommandHandler(\textcolor{stringliteral}{"{}MI\_ResetRoomLayout"{}}, \textcolor{keyword}{this}, \&MainWindow::resetRoomsLayout);}
\DoxyCodeLine{00443   setCommandHandler(MI\_AutoFillToggle, \textcolor{keyword}{this}, \&MainWindow::autofillToggle);}
\DoxyCodeLine{00444 }
\DoxyCodeLine{00445   setCommandHandler(MI\_About, \textcolor{keyword}{this}, \&MainWindow::onAbout);}
\DoxyCodeLine{00446   setCommandHandler(MI\_OpenOnlineManual, \textcolor{keyword}{this}, \&MainWindow::onOpenOnlineManual);}
\DoxyCodeLine{00447   setCommandHandler(MI\_OpenWhatsNew, \textcolor{keyword}{this}, \&MainWindow::onOpenWhatsNew);}
\DoxyCodeLine{00448   setCommandHandler(MI\_OpenCommunityForum, \textcolor{keyword}{this},}
\DoxyCodeLine{00449                     \&MainWindow::onOpenCommunityForum);}
\DoxyCodeLine{00450   setCommandHandler(MI\_OpenReportABug, \textcolor{keyword}{this}, \&MainWindow::onOpenReportABug);}
\DoxyCodeLine{00451 }
\DoxyCodeLine{00452   setCommandHandler(MI\_MaximizePanel, \textcolor{keyword}{this}, \&MainWindow::maximizePanel);}
\DoxyCodeLine{00453   setCommandHandler(MI\_FullScreenWindow, \textcolor{keyword}{this}, \&MainWindow::fullScreenWindow);}
\DoxyCodeLine{00454   setCommandHandler(\textcolor{stringliteral}{"{}MI\_NewVectorLevel"{}}, \textcolor{keyword}{this},}
\DoxyCodeLine{00455                     \&MainWindow::onNewVectorLevelButtonPressed);}
\DoxyCodeLine{00456   setCommandHandler(\textcolor{stringliteral}{"{}MI\_NewToonzRasterLevel"{}}, \textcolor{keyword}{this},}
\DoxyCodeLine{00457                     \&MainWindow::onNewToonzRasterLevelButtonPressed);}
\DoxyCodeLine{00458   setCommandHandler(\textcolor{stringliteral}{"{}MI\_NewRasterLevel"{}}, \textcolor{keyword}{this},}
\DoxyCodeLine{00459                     \&MainWindow::onNewRasterLevelButtonPressed);}
\DoxyCodeLine{00460   setCommandHandler(MI\_ClearCacheFolder, \textcolor{keyword}{this}, \&MainWindow::clearCacheFolder);}
\DoxyCodeLine{00461   \textcolor{comment}{// remove ffmpegCache if still exists from crashed exit}}
\DoxyCodeLine{00462   QString ffmpegCachePath =}
\DoxyCodeLine{00463       ToonzFolder::getCacheRootFolder().getQString() + \textcolor{stringliteral}{"{}//ffmpeg"{}};}
\DoxyCodeLine{00464   \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(ffmpegCachePath))) \{}
\DoxyCodeLine{00465     TSystem::rmDirTree(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(ffmpegCachePath));}
\DoxyCodeLine{00466   \}}
\DoxyCodeLine{00467 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_ae98d00a93bc118200eeef9f9bba1dba7}\label{class_main_window_ae98d00a93bc118200eeef9f9bba1dba7}} 
\index{MainWindow@{MainWindow}!````~MainWindow@{$\sim$MainWindow}}
\index{````~MainWindow@{$\sim$MainWindow}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{$\sim$MainWindow()}{~MainWindow()}}
{\footnotesize\ttfamily Main\+Window\+::$\sim$\+Main\+Window (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00471                         \{}
\DoxyCodeLine{00472   TEnv::saveAllEnvVariables();}
\DoxyCodeLine{00473   \textcolor{comment}{// cleanup ffmpeg cache}}
\DoxyCodeLine{00474   QString ffmpegCachePath =}
\DoxyCodeLine{00475       ToonzFolder::getCacheRootFolder().getQString() + \textcolor{stringliteral}{"{}//ffmpeg"{}};}
\DoxyCodeLine{00476   \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(ffmpegCachePath))) \{}
\DoxyCodeLine{00477     TSystem::rmDirTree(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(ffmpegCachePath));}
\DoxyCodeLine{00478   \}}
\DoxyCodeLine{00479 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_main_window_a2cbf559b3d0dcf370befca1748bcfc24}\label{class_main_window_a2cbf559b3d0dcf370befca1748bcfc24}} 
\index{MainWindow@{MainWindow}!autofillToggle@{autofillToggle}}
\index{autofillToggle@{autofillToggle}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{autofillToggle()}{autofillToggle()}}
{\footnotesize\ttfamily void Main\+Window\+::autofill\+Toggle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01028                                 \{}
\DoxyCodeLine{01029   \mbox{\hyperlink{class_t_palette_handle}{TPaletteHandle}} *h = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a33dbcbc578915e0b69fe6927b74cf426}{getCurrentPalette}}();}
\DoxyCodeLine{01030   h-\/>toggleAutopaint();}
\DoxyCodeLine{01031 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_ac51dda060e7642e5634123c57ee91daf}\label{class_main_window_ac51dda060e7642e5634123c57ee91daf}} 
\index{MainWindow@{MainWindow}!changeWindowTitle@{changeWindowTitle}}
\index{changeWindowTitle@{changeWindowTitle}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{changeWindowTitle}{changeWindowTitle}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Main\+Window\+::change\+Window\+Title (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00483                                    \{}
\DoxyCodeLine{00484   \mbox{\hyperlink{class_t_app}{TApp}} *app         = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}();}
\DoxyCodeLine{00485   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{00486   \textcolor{keywordflow}{if} (!scene) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00487 }
\DoxyCodeLine{00488   \mbox{\hyperlink{class_t_project}{TProject}} *project   = scene-\/>\mbox{\hyperlink{class_toonz_scene_afec1477d4fe0bb1e1152e80c3a0b20ab}{getProject}}();}
\DoxyCodeLine{00489   QString projectName = QString::fromStdString(project-\/>\mbox{\hyperlink{class_t_project_a258a4b6435978b730722a92ab104cd89}{getName}}().\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}());}
\DoxyCodeLine{00490 }
\DoxyCodeLine{00491   QString sceneName = QString::fromStdWString(scene-\/>\mbox{\hyperlink{class_toonz_scene_a1fa0a1cbf9eb6360d980392acc99924b}{getSceneName}}());}
\DoxyCodeLine{00492 }
\DoxyCodeLine{00493   \textcolor{keywordflow}{if} (sceneName.isEmpty()) sceneName = tr(\textcolor{stringliteral}{"{}Untitled"{}});}
\DoxyCodeLine{00494   \textcolor{keywordflow}{if} (app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getDirtyFlag()) sceneName += QString(\textcolor{stringliteral}{"{}*"{}});}
\DoxyCodeLine{00495 }
\DoxyCodeLine{00496   \textcolor{comment}{/*-\/-\/-\/ レイアウトファイル名を頭に表示させる -\/-\/-\/*/}}
\DoxyCodeLine{00497   \textcolor{keywordflow}{if} (!m\_layoutName.isEmpty()) sceneName.prepend(m\_layoutName + \textcolor{stringliteral}{"{} : "{}});}
\DoxyCodeLine{00498 }
\DoxyCodeLine{00499   QString name = sceneName + \textcolor{stringliteral}{"{} ["{}} + projectName + \textcolor{stringliteral}{"{}] : "{}} +}
\DoxyCodeLine{00500                  QString::fromStdString(TEnv::getApplicationFullName());}
\DoxyCodeLine{00501 }
\DoxyCodeLine{00502   setWindowTitle(name);}
\DoxyCodeLine{00503 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a1672970900f842303fb864d7fe33003e}\label{class_main_window_a1672970900f842303fb864d7fe33003e}} 
\index{MainWindow@{MainWindow}!changeWindowTitle@{changeWindowTitle}}
\index{changeWindowTitle@{changeWindowTitle}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{changeWindowTitle}{changeWindowTitle}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Main\+Window\+::change\+Window\+Title (\begin{DoxyParamCaption}\item[{QString \&}]{str }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00507 \{ setWindowTitle(str); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a10750b9bdf057c5863a1ff682390170f}\label{class_main_window_a10750b9bdf057c5863a1ff682390170f}} 
\index{MainWindow@{MainWindow}!checkForUpdates@{checkForUpdates}}
\index{checkForUpdates@{checkForUpdates}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{checkForUpdates()}{checkForUpdates()}}
{\footnotesize\ttfamily void Main\+Window\+::check\+For\+Updates (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01249                                  \{}
\DoxyCodeLine{01250   \textcolor{comment}{// Since there is only a single version of Opentoonz, we can do a simple check}}
\DoxyCodeLine{01251   \textcolor{comment}{// against a string}}
\DoxyCodeLine{01252   QString updateUrl(\textcolor{stringliteral}{"{}http://opentoonz.github.io/opentoonz-\/version.txt"{}});}
\DoxyCodeLine{01253 }
\DoxyCodeLine{01254   m\_updateChecker = \textcolor{keyword}{new} \mbox{\hyperlink{class_update_checker}{UpdateChecker}}(updateUrl);}
\DoxyCodeLine{01255   connect(m\_updateChecker, SIGNAL(done(\textcolor{keywordtype}{bool})), \textcolor{keyword}{this},}
\DoxyCodeLine{01256           SLOT(onUpdateCheckerDone(\textcolor{keywordtype}{bool})));}
\DoxyCodeLine{01257 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_afd6fcccd707546243a6f4165185d4c2e}\label{class_main_window_afd6fcccd707546243a6f4165185d4c2e}} 
\index{MainWindow@{MainWindow}!clearCacheFolder@{clearCacheFolder}}
\index{clearCacheFolder@{clearCacheFolder}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{clearCacheFolder()}{clearCacheFolder()}}
{\footnotesize\ttfamily void Main\+Window\+::clear\+Cache\+Folder (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02892                                   \{}
\DoxyCodeLine{02893   \textcolor{comment}{// currently cache folder is used for following purposes}}
\DoxyCodeLine{02894   \textcolor{comment}{// 1. \$CACHE/[ProcessID] : for disk swap of image cache.}}
\DoxyCodeLine{02895   \textcolor{comment}{//    To be deleted on exit. Remains on crash.}}
\DoxyCodeLine{02896   \textcolor{comment}{// 2. \$CACHE/ffmpeg : ffmpeg cache.}}
\DoxyCodeLine{02897   \textcolor{comment}{//    To be cleared on the end of rendering, on exist and on launch.}}
\DoxyCodeLine{02898   \textcolor{comment}{// 3. \$CACHE/temp : untitled scene data.}}
\DoxyCodeLine{02899   \textcolor{comment}{//    To be deleted on switching or exiting scenes. Remains on crash.}}
\DoxyCodeLine{02900 }
\DoxyCodeLine{02901   \textcolor{comment}{// So, this function will delete all files / folders in \$CACHE}}
\DoxyCodeLine{02902   \textcolor{comment}{// except the following items:}}
\DoxyCodeLine{02903   \textcolor{comment}{// 1. \$CACHE/[Current ProcessID]}}
\DoxyCodeLine{02904   \textcolor{comment}{// 2. \$CACHE/temp/[Current scene folder] if the current scene is untitled}}
\DoxyCodeLine{02905 }
\DoxyCodeLine{02906   \mbox{\hyperlink{class_t_file_path}{TFilePath}} cacheRoot = ToonzFolder::getCacheRootFolder();}
\DoxyCodeLine{02907   \textcolor{keywordflow}{if} (cacheRoot.isEmpty()) cacheRoot = TEnv::getStuffDir() + \textcolor{stringliteral}{"{}cache"{}};}
\DoxyCodeLine{02908 }
\DoxyCodeLine{02909   TFilePathSet filesToBeRemoved;}
\DoxyCodeLine{02910 }
\DoxyCodeLine{02911   TSystem::readDirectory(filesToBeRemoved, cacheRoot, \textcolor{keyword}{false});}
\DoxyCodeLine{02912 }
\DoxyCodeLine{02913   \textcolor{comment}{// keep the imagecache folder}}
\DoxyCodeLine{02914   filesToBeRemoved.remove(cacheRoot + std::to\_string(TSystem::getProcessId()));}
\DoxyCodeLine{02915   \textcolor{comment}{// keep the untitled scene data folder}}
\DoxyCodeLine{02916   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentScene()-\/>getScene()-\/>isUntitled()) \{}
\DoxyCodeLine{02917     filesToBeRemoved.remove(cacheRoot + \textcolor{stringliteral}{"{}temp"{}});}
\DoxyCodeLine{02918     TFilePathSet untitledData =}
\DoxyCodeLine{02919         TSystem::readDirectory(cacheRoot + \textcolor{stringliteral}{"{}temp"{}}, \textcolor{keyword}{false});}
\DoxyCodeLine{02920     untitledData.remove(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()}
\DoxyCodeLine{02921                             -\/>getCurrentScene()}
\DoxyCodeLine{02922                             -\/>getScene()}
\DoxyCodeLine{02923                             -\/>getScenePath()}
\DoxyCodeLine{02924                             .getParentDir());}
\DoxyCodeLine{02925     filesToBeRemoved.insert(filesToBeRemoved.end(), untitledData.begin(),}
\DoxyCodeLine{02926                             untitledData.end());}
\DoxyCodeLine{02927   \}}
\DoxyCodeLine{02928 }
\DoxyCodeLine{02929   \textcolor{comment}{// return if there is no files/folders to be deleted}}
\DoxyCodeLine{02930   \textcolor{keywordflow}{if} (filesToBeRemoved.size() == 0) \{}
\DoxyCodeLine{02931     QMessageBox::information(}
\DoxyCodeLine{02932         \textcolor{keyword}{this}, tr(\textcolor{stringliteral}{"{}Clear Cache Folder"{}}),}
\DoxyCodeLine{02933         tr(\textcolor{stringliteral}{"{}There are no unused items in the cache folder."{}}));}
\DoxyCodeLine{02934     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02935   \}}
\DoxyCodeLine{02936 }
\DoxyCodeLine{02937   QString message(tr(\textcolor{stringliteral}{"{}Deleting the following items:\(\backslash\)n"{}}));}
\DoxyCodeLine{02938   \textcolor{keywordtype}{int} count = 0;}
\DoxyCodeLine{02939   \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&fileToBeRemoved : filesToBeRemoved) \{}
\DoxyCodeLine{02940     QString dirPrefix =}
\DoxyCodeLine{02941         (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(fileToBeRemoved).isDirectory()) ? tr(\textcolor{stringliteral}{"{}<DIR> "{}}) : \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{02942     message +=}
\DoxyCodeLine{02943         \textcolor{stringliteral}{"{}   "{}} + dirPrefix + (fileToBeRemoved -\/ cacheRoot).getQString() + \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{02944     count++;}
\DoxyCodeLine{02945     \textcolor{keywordflow}{if} (count == 5) \textcolor{keywordflow}{break};}
\DoxyCodeLine{02946   \}}
\DoxyCodeLine{02947   \textcolor{keywordflow}{if} (filesToBeRemoved.size() > 5)}
\DoxyCodeLine{02948     message +=}
\DoxyCodeLine{02949         tr(\textcolor{stringliteral}{"{}   ... and \%1 more items\(\backslash\)n"{}}).arg(filesToBeRemoved.size() -\/ 5);}
\DoxyCodeLine{02950 }
\DoxyCodeLine{02951   message +=}
\DoxyCodeLine{02952       tr(\textcolor{stringliteral}{"{}\(\backslash\)nAre you sure?\(\backslash\)n\(\backslash\)nN.B. Make sure you are not running another "{}}}
\DoxyCodeLine{02953          \textcolor{stringliteral}{"{}process of OpenToonz,\(\backslash\)nor you may delete necessary files for it."{}});}
\DoxyCodeLine{02954 }
\DoxyCodeLine{02955   QMessageBox::StandardButton ret = QMessageBox::question(}
\DoxyCodeLine{02956       \textcolor{keyword}{this}, tr(\textcolor{stringliteral}{"{}Clear Cache Folder"{}}), message,}
\DoxyCodeLine{02957       QMessageBox::StandardButtons(QMessageBox::Ok | QMessageBox::Cancel));}
\DoxyCodeLine{02958 }
\DoxyCodeLine{02959   \textcolor{keywordflow}{if} (ret != QMessageBox::Ok) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02960 }
\DoxyCodeLine{02961   \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&fileToBeRemoved : filesToBeRemoved) \{}
\DoxyCodeLine{02962     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{02963       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(fileToBeRemoved).isDirectory())}
\DoxyCodeLine{02964         TSystem::rmDirTree(fileToBeRemoved);}
\DoxyCodeLine{02965       \textcolor{keywordflow}{else}}
\DoxyCodeLine{02966         TSystem::deleteFile(fileToBeRemoved);}
\DoxyCodeLine{02967     \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_t_exception}{TException}} \&e) \{}
\DoxyCodeLine{02968       QMessageBox::warning(}
\DoxyCodeLine{02969           \textcolor{keyword}{this}, tr(\textcolor{stringliteral}{"{}Clear Cache Folder"{}}),}
\DoxyCodeLine{02970           tr(\textcolor{stringliteral}{"{}Can't delete \%1 : "{}}).arg(fileToBeRemoved.getQString()) +}
\DoxyCodeLine{02971               QString::fromStdWString(e.getMessage()));}
\DoxyCodeLine{02972     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{02973       QMessageBox::warning(}
\DoxyCodeLine{02974           \textcolor{keyword}{this}, tr(\textcolor{stringliteral}{"{}Clear Cache Folder"{}}),}
\DoxyCodeLine{02975           tr(\textcolor{stringliteral}{"{}Can't delete \%1 : "{}}).arg(fileToBeRemoved.getQString()));}
\DoxyCodeLine{02976     \}}
\DoxyCodeLine{02977   \}}
\DoxyCodeLine{02978 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a4aa386518569b0bbceb958df0ddc8f32}\label{class_main_window_a4aa386518569b0bbceb958df0ddc8f32}} 
\index{MainWindow@{MainWindow}!closeEvent@{closeEvent}}
\index{closeEvent@{closeEvent}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{closeEvent()}{closeEvent()}}
{\footnotesize\ttfamily void Main\+Window\+::close\+Event (\begin{DoxyParamCaption}\item[{QClose\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01295                                               \{}
\DoxyCodeLine{01296   \textcolor{comment}{// il riferimento alla variabile booleana doExit viene passato a tutti gli}}
\DoxyCodeLine{01297   \textcolor{comment}{// slot che catturano l'emissione}}
\DoxyCodeLine{01298   \textcolor{comment}{// del segnale. Impostando a false tale variabile, l'applicazione non viene}}
\DoxyCodeLine{01299   \textcolor{comment}{// chiusa!}}
\DoxyCodeLine{01300   \textcolor{keywordtype}{bool} doExit = \textcolor{keyword}{true};}
\DoxyCodeLine{01301   emit exit(doExit);}
\DoxyCodeLine{01302   \textcolor{keywordflow}{if} (!doExit) \{}
\DoxyCodeLine{01303     \textcolor{keyword}{event}-\/>ignore();}
\DoxyCodeLine{01304     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01305   \}}
\DoxyCodeLine{01306 }
\DoxyCodeLine{01307   \textcolor{keywordflow}{if} (!IoCmd::saveSceneIfNeeded(QApplication::tr(\textcolor{stringliteral}{"{}Quit"{}}))) \{}
\DoxyCodeLine{01308     \textcolor{keyword}{event}-\/>ignore();}
\DoxyCodeLine{01309     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01310   \}}
\DoxyCodeLine{01311 }
\DoxyCodeLine{01312   \textcolor{comment}{// sto facendo quit. interrompo (il prima possibile) le threads}}
\DoxyCodeLine{01313   IconGenerator::instance()-\/>clearRequests();}
\DoxyCodeLine{01314 }
\DoxyCodeLine{01315   \textcolor{keywordflow}{if} (m\_saveSettingsOnQuit) writeSettings();}
\DoxyCodeLine{01316 }
\DoxyCodeLine{01317   \textcolor{comment}{// svuoto la directory di output}}
\DoxyCodeLine{01318   \mbox{\hyperlink{class_t_file_path}{TFilePath}} outputsDir = TEnv::getStuffDir() + \textcolor{stringliteral}{"{}outputs"{}};}
\DoxyCodeLine{01319   TFilePathSet fps;}
\DoxyCodeLine{01320   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(outputsDir).isDirectory()) \{}
\DoxyCodeLine{01321     TSystem::readDirectory(fps, outputsDir);}
\DoxyCodeLine{01322     TFilePathSet::iterator fpsIt;}
\DoxyCodeLine{01323     \textcolor{keywordflow}{for} (fpsIt = fps.begin(); fpsIt != fps.end(); ++fpsIt) \{}
\DoxyCodeLine{01324       \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = *fpsIt;}
\DoxyCodeLine{01325       \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(fp)) \{}
\DoxyCodeLine{01326         \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01327           TSystem::removeFileOrLevel(fp);}
\DoxyCodeLine{01328         \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{01329         \}}
\DoxyCodeLine{01330       \}}
\DoxyCodeLine{01331     \}}
\DoxyCodeLine{01332   \}}
\DoxyCodeLine{01333 }
\DoxyCodeLine{01334   TImageCache::instance()-\/>\mbox{\hyperlink{class_t_image_cache_a6ad930f92d348ab6231f50b46888c8cf}{clear}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01335 }
\DoxyCodeLine{01336   \textcolor{keyword}{event}-\/>accept();}
\DoxyCodeLine{01337   TThread::shutdown();}
\DoxyCodeLine{01338   qApp-\/>quit();}
\DoxyCodeLine{01339 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_af54bfff43f2bb86c357ac35b21de2f38}\label{class_main_window_af54bfff43f2bb86c357ac35b21de2f38}} 
\index{MainWindow@{MainWindow}!deleteRoom@{deleteRoom}}
\index{deleteRoom@{deleteRoom}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{deleteRoom}{deleteRoom}}
{\footnotesize\ttfamily void Main\+Window\+::delete\+Room (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01141                                      \{}
\DoxyCodeLine{01142   \mbox{\hyperlink{class_room}{Room}} *room = getRoom(index);}
\DoxyCodeLine{01143 }
\DoxyCodeLine{01144   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = room-\/>getPath();}
\DoxyCodeLine{01145   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{01146     TSystem::deleteFile(fp);}
\DoxyCodeLine{01147   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{01148     DVGui::error(tr(\textcolor{stringliteral}{"{}Cannot delete"{}}) + toQString(fp));}
\DoxyCodeLine{01149     \textcolor{comment}{// Se non ho rimosso la stanza devo rimettere il tab!!}}
\DoxyCodeLine{01150     m\_topBar-\/>getRoomTabWidget()-\/>insertTab(index, room-\/>getName());}
\DoxyCodeLine{01151     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01152   \}}
\DoxyCodeLine{01153 }
\DoxyCodeLine{01154   \textcolor{comment}{/*-\/ delete menubar settings file as well -\/*/}}
\DoxyCodeLine{01155   std::string mbFileName = fp.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}() + \textcolor{stringliteral}{"{}\_menubar.xml"{}};}
\DoxyCodeLine{01156   \mbox{\hyperlink{class_t_file_path}{TFilePath}} mbFp         = fp.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}() + mbFileName;}
\DoxyCodeLine{01157   TSystem::deleteFile(mbFp);}
\DoxyCodeLine{01158 }
\DoxyCodeLine{01159   \textcolor{comment}{// The old room index must be updated if index < of it}}
\DoxyCodeLine{01160   \textcolor{keywordflow}{if} (index < m\_oldRoomIndex) m\_oldRoomIndex-\/-\/;}
\DoxyCodeLine{01161 }
\DoxyCodeLine{01162   m\_stackedWidget-\/>removeWidget(room);}
\DoxyCodeLine{01163   \textcolor{keyword}{delete} room;}
\DoxyCodeLine{01164 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a75f9926e242e03545c8befedb11fb25e}\label{class_main_window_a75f9926e242e03545c8befedb11fb25e}} 
\index{MainWindow@{MainWindow}!fullScreenWindow@{fullScreenWindow}}
\index{fullScreenWindow@{fullScreenWindow}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{fullScreenWindow()}{fullScreenWindow()}}
{\footnotesize\ttfamily void Main\+Window\+::full\+Screen\+Window (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01076                                   \{}
\DoxyCodeLine{01077   \textcolor{keywordflow}{if} (isFullScreen())}
\DoxyCodeLine{01078     showNormal();}
\DoxyCodeLine{01079   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01080 \textcolor{preprocessor}{\#if defined(\_WIN32)}}
\DoxyCodeLine{01081     \textcolor{comment}{// http://doc.qt.io/qt-\/5/windows-\/issues.html\#fullscreen-\/opengl-\/based-\/windows}}
\DoxyCodeLine{01082     this-\/>winId();}
\DoxyCodeLine{01083     QWindowsWindowFunctions::setHasBorderInFullScreen(this-\/>windowHandle(),}
\DoxyCodeLine{01084                                                       \textcolor{keyword}{true});}
\DoxyCodeLine{01085 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01086     this-\/>showFullScreen();}
\DoxyCodeLine{01087   \}}
\DoxyCodeLine{01088 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_ac1fae5d4e2b6b9b01cb798a8c37d1bd5}\label{class_main_window_ac1fae5d4e2b6b9b01cb798a8c37d1bd5}} 
\index{MainWindow@{MainWindow}!getCurrentRoom@{getCurrentRoom}}
\index{getCurrentRoom@{getCurrentRoom}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{getCurrentRoom()}{getCurrentRoom()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_room}{Room}} $\ast$ Main\+Window\+::get\+Current\+Room (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00926                                        \{}
\DoxyCodeLine{00927   \textcolor{keywordflow}{return} getRoom(m\_stackedWidget-\/>currentIndex());}
\DoxyCodeLine{00928 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a36e4582b255e0026b6ee4ad39075b350}\label{class_main_window_a36e4582b255e0026b6ee4ad39075b350}} 
\index{MainWindow@{MainWindow}!getLayoutName@{getLayoutName}}
\index{getLayoutName@{getLayoutName}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{getLayoutName()}{getLayoutName()}}
{\footnotesize\ttfamily QString Main\+Window\+::get\+Layout\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00115 \{ \textcolor{keywordflow}{return} m\_layoutName; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a86b908922cb552e7cff28cd57c66ce09}\label{class_main_window_a86b908922cb552e7cff28cd57c66ce09}} 
\index{MainWindow@{MainWindow}!getRoom@{getRoom}}
\index{getRoom@{getRoom}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{getRoom()}{getRoom()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_room}{Room}} $\ast$ Main\+Window\+::get\+Room (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00523                                          \{}
\DoxyCodeLine{00524   assert(index >= 0 \&\& index < getRoomCount());}
\DoxyCodeLine{00525   \textcolor{keywordflow}{return} \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_room}{Room}} *\textcolor{keyword}{>}(m\_stackedWidget-\/>widget(index));}
\DoxyCodeLine{00526 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a3699443d43812fc67462aab5d2a6cfb2}\label{class_main_window_a3699443d43812fc67462aab5d2a6cfb2}} 
\index{MainWindow@{MainWindow}!getRoomByName@{getRoomByName}}
\index{getRoomByName@{getRoomByName}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{getRoomByName()}{getRoomByName()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_room}{Room}} $\ast$ Main\+Window\+::get\+Room\+By\+Name (\begin{DoxyParamCaption}\item[{QString \&}]{room\+Name }\end{DoxyParamCaption})}

Roomを名前から探す 
\begin{DoxyCode}{0}
\DoxyCodeLine{00531                                                  \{}
\DoxyCodeLine{00532   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < getRoomCount(); i++) \{}
\DoxyCodeLine{00533     \mbox{\hyperlink{class_room}{Room}} *room = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_room}{Room}} *\textcolor{keyword}{>}(m\_stackedWidget-\/>widget(i));}
\DoxyCodeLine{00534     \textcolor{keywordflow}{if} (room) \{}
\DoxyCodeLine{00535       \textcolor{keywordflow}{if} (room-\/>getName() == roomName) \textcolor{keywordflow}{return} room;}
\DoxyCodeLine{00536     \}}
\DoxyCodeLine{00537   \}}
\DoxyCodeLine{00538   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00539 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a64289b5fb9730cc522183413254b378b}\label{class_main_window_a64289b5fb9730cc522183413254b378b}} 
\index{MainWindow@{MainWindow}!getRoomCount@{getRoomCount}}
\index{getRoomCount@{getRoomCount}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{getRoomCount()}{getRoomCount()}}
{\footnotesize\ttfamily int Main\+Window\+::get\+Room\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00543 \{ \textcolor{keywordflow}{return} m\_stackedWidget-\/>count(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a618e9b9f469ce2421ad1704d72d73303}\label{class_main_window_a618e9b9f469ce2421ad1704d72d73303}} 
\index{MainWindow@{MainWindow}!insertNewRoom@{insertNewRoom}}
\index{insertNewRoom@{insertNewRoom}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{insertNewRoom}{insertNewRoom}}
{\footnotesize\ttfamily void Main\+Window\+::insert\+New\+Room (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01129                                \{}
\DoxyCodeLine{01130   \mbox{\hyperlink{class_room}{Room}} *room = \textcolor{keyword}{new} \mbox{\hyperlink{class_room}{Room}}(\textcolor{keyword}{this});}
\DoxyCodeLine{01131   room-\/>setName(\textcolor{stringliteral}{"{}room"{}});}
\DoxyCodeLine{01132   \textcolor{keywordflow}{if} (m\_saveSettingsOnQuit) makePrivate(room);}
\DoxyCodeLine{01133   m\_stackedWidget-\/>insertWidget(0, room);}
\DoxyCodeLine{01134 }
\DoxyCodeLine{01135   \textcolor{comment}{// Finally, old room index is increased by 1}}
\DoxyCodeLine{01136   m\_oldRoomIndex++;}
\DoxyCodeLine{01137 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a19ebc2d372ccf4afe3d1d578fe0e62b5}\label{class_main_window_a19ebc2d372ccf4afe3d1d578fe0e62b5}} 
\index{MainWindow@{MainWindow}!maximizePanel@{maximizePanel}}
\index{maximizePanel@{maximizePanel}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{maximizePanel()}{maximizePanel()}}
{\footnotesize\ttfamily void Main\+Window\+::maximize\+Panel (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01062                                \{}
\DoxyCodeLine{01063   \mbox{\hyperlink{class_dock_layout}{DockLayout}} *currDockLayout = getCurrentRoom()-\/>dockLayout();}
\DoxyCodeLine{01064   \textcolor{keywordflow}{if} (currDockLayout-\/>getMaximized() \&\&}
\DoxyCodeLine{01065       currDockLayout-\/>getMaximized()-\/>isMaximized()) \{}
\DoxyCodeLine{01066     currDockLayout-\/>getMaximized()-\/>maximizeDock();  \textcolor{comment}{// release maximization}}
\DoxyCodeLine{01067     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01068   \}}
\DoxyCodeLine{01069 }
\DoxyCodeLine{01070   QPoint p            = mapFromGlobal(QCursor::pos());}
\DoxyCodeLine{01071   QWidget *currWidget = currDockLayout-\/>containerOf(p);}
\DoxyCodeLine{01072   \mbox{\hyperlink{class_dock_widget}{DockWidget}} *currW   = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_dock_widget}{DockWidget}} *\textcolor{keyword}{>}(currWidget);}
\DoxyCodeLine{01073   \textcolor{keywordflow}{if} (currW) currW-\/>maximizeDock();}
\DoxyCodeLine{01074 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_ada07f1501d5aa1ee3c67f4986ba8b153}\label{class_main_window_ada07f1501d5aa1ee3c67f4986ba8b153}} 
\index{MainWindow@{MainWindow}!onAbout@{onAbout}}
\index{onAbout@{onAbout}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onAbout()}{onAbout()}}
{\footnotesize\ttfamily void Main\+Window\+::on\+About (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00968                          \{}
\DoxyCodeLine{00969   QLabel *label  = \textcolor{keyword}{new} QLabel();}
\DoxyCodeLine{00970   QPixmap pixmap = QIcon(\textcolor{stringliteral}{"{}:Resources/splash.svg"{}}).pixmap(QSize(610, 344));}
\DoxyCodeLine{00971   pixmap.setDevicePixelRatio(QApplication::desktop()-\/>devicePixelRatio());}
\DoxyCodeLine{00972   label-\/>setPixmap(pixmap);}
\DoxyCodeLine{00973 }
\DoxyCodeLine{00974   \mbox{\hyperlink{class_d_v_gui_1_1_dialog}{DVGui::Dialog}} *dialog = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_dialog}{DVGui::Dialog}}(\textcolor{keyword}{this}, \textcolor{keyword}{true});}
\DoxyCodeLine{00975   dialog-\/>setWindowTitle(tr(\textcolor{stringliteral}{"{}About OpenToonz"{}}));}
\DoxyCodeLine{00976   dialog-\/>\mbox{\hyperlink{class_d_v_gui_1_1_dialog_a7aa8ccf399f483fe1f36c30a1318987a}{setTopMargin}}(0);}
\DoxyCodeLine{00977   dialog-\/>\mbox{\hyperlink{class_d_v_gui_1_1_dialog_ada55b78010dbe97d4f2692cc6f2e933f}{addWidget}}(label);}
\DoxyCodeLine{00978 }
\DoxyCodeLine{00979   QString name = QString::fromStdString(TEnv::getApplicationFullName());}
\DoxyCodeLine{00980   name += \textcolor{stringliteral}{"{} (built "{}} \_\_DATE\_\_ \textcolor{stringliteral}{"{} "{}} \_\_TIME\_\_ \textcolor{stringliteral}{"{})"{}};}
\DoxyCodeLine{00981   dialog-\/>\mbox{\hyperlink{class_d_v_gui_1_1_dialog_ada55b78010dbe97d4f2692cc6f2e933f}{addWidget}}(\textcolor{keyword}{new} QLabel(name));}
\DoxyCodeLine{00982 }
\DoxyCodeLine{00983   QPushButton *button = \textcolor{keyword}{new} QPushButton(tr(\textcolor{stringliteral}{"{}Close"{}}), dialog);}
\DoxyCodeLine{00984   button-\/>setDefault(\textcolor{keyword}{true});}
\DoxyCodeLine{00985   dialog-\/>\mbox{\hyperlink{class_d_v_gui_1_1_dialog_aff324b24a1ad0c06fdc178024c1f0cf0}{addButtonBarWidget}}(button);}
\DoxyCodeLine{00986   connect(button, SIGNAL(clicked()), dialog, SLOT(accept()));}
\DoxyCodeLine{00987 }
\DoxyCodeLine{00988   dialog-\/>exec();}
\DoxyCodeLine{00989 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_afd060ec403f170826c2371bd20f0633c}\label{class_main_window_afd060ec403f170826c2371bd20f0633c}} 
\index{MainWindow@{MainWindow}!onCurrentRoomChanged@{onCurrentRoomChanged}}
\index{onCurrentRoomChanged@{onCurrentRoomChanged}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onCurrentRoomChanged}{onCurrentRoomChanged}}
{\footnotesize\ttfamily void Main\+Window\+::on\+Current\+Room\+Changed (\begin{DoxyParamCaption}\item[{int}]{new\+Room\+Index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01092                                                       \{}
\DoxyCodeLine{01093   \mbox{\hyperlink{class_room}{Room}} *oldRoom            = getRoom(m\_oldRoomIndex);}
\DoxyCodeLine{01094   \mbox{\hyperlink{class_room}{Room}} *newRoom            = getRoom(newRoomIndex);}
\DoxyCodeLine{01095   QList<TPanel *> paneList = oldRoom-\/>findChildren<\mbox{\hyperlink{class_t_panel}{TPanel}} *>();}
\DoxyCodeLine{01096 }
\DoxyCodeLine{01097   \textcolor{comment}{// Change the parent of all the floating dockWidgets}}
\DoxyCodeLine{01098   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < paneList.size(); i++) \{}
\DoxyCodeLine{01099     \mbox{\hyperlink{class_t_panel}{TPanel}} *pane = paneList.at(i);}
\DoxyCodeLine{01100     \textcolor{keywordflow}{if} (pane-\/>isFloating() \&\& !pane-\/>isHidden()) \{}
\DoxyCodeLine{01101       QRect oldGeometry = pane-\/>geometry();}
\DoxyCodeLine{01102       \textcolor{comment}{// Just setting the new parent is not enough for the new layout manager.}}
\DoxyCodeLine{01103       \textcolor{comment}{// Must be removed from the old and added to the new.}}
\DoxyCodeLine{01104       oldRoom-\/>removeDockWidget(pane);}
\DoxyCodeLine{01105       newRoom-\/>\mbox{\hyperlink{class_t_main_window_a5bd7a251e7bca80111d0d9bd90943015}{addDockWidget}}(pane);}
\DoxyCodeLine{01106       \textcolor{comment}{// pane-\/>setParent(newRoom);}}
\DoxyCodeLine{01107 }
\DoxyCodeLine{01108       \textcolor{comment}{// Some flags are lost when the parent changes.}}
\DoxyCodeLine{01109       pane-\/>\mbox{\hyperlink{class_t_dock_widget_a82cb9128c0aafa45faa75ac25cfd062b}{setFloating}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01110       pane-\/>setGeometry(oldGeometry);}
\DoxyCodeLine{01111       pane-\/>show();}
\DoxyCodeLine{01112     \}}
\DoxyCodeLine{01113   \}}
\DoxyCodeLine{01114   m\_oldRoomIndex = newRoomIndex;}
\DoxyCodeLine{01115   TSelection::setCurrent(0);}
\DoxyCodeLine{01116 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_ab3e1fb29b4e22e0c707c39b320ea9750}\label{class_main_window_ab3e1fb29b4e22e0c707c39b320ea9750}} 
\index{MainWindow@{MainWindow}!onIndexSwapped@{onIndexSwapped}}
\index{onIndexSwapped@{onIndexSwapped}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onIndexSwapped}{onIndexSwapped}}
{\footnotesize\ttfamily void Main\+Window\+::on\+Index\+Swapped (\begin{DoxyParamCaption}\item[{int}]{first\+Index,  }\item[{int}]{second\+Index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01120                                                                \{}
\DoxyCodeLine{01121   assert(firstIndex >= 0 \&\& secondIndex >= 0);}
\DoxyCodeLine{01122   \mbox{\hyperlink{class_room}{Room}} *mainWindow = getRoom(firstIndex);}
\DoxyCodeLine{01123   m\_stackedWidget-\/>removeWidget(mainWindow);}
\DoxyCodeLine{01124   m\_stackedWidget-\/>insertWidget(secondIndex, mainWindow);}
\DoxyCodeLine{01125 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a636e1d7dfd5cc08b610d25d19c94f3c2}\label{class_main_window_a636e1d7dfd5cc08b610d25d19c94f3c2}} 
\index{MainWindow@{MainWindow}!onInk1CheckTriggered@{onInk1CheckTriggered}}
\index{onInk1CheckTriggered@{onInk1CheckTriggered}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onInk1CheckTriggered}{onInk1CheckTriggered}}
{\footnotesize\ttfamily void Main\+Window\+::on\+Ink1\+Check\+Triggered (\begin{DoxyParamCaption}\item[{bool}]{on }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02857                                              \{}
\DoxyCodeLine{02858   \textcolor{keywordflow}{if} (!on) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02859   QAction *inkCheckAction = CommandManager::instance()-\/>getAction(MI\_ICheck);}
\DoxyCodeLine{02860   \textcolor{keywordflow}{if} (inkCheckAction) inkCheckAction-\/>setChecked(\textcolor{keyword}{false});}
\DoxyCodeLine{02861 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a3663213f7496f8a29f840fdc2d146029}\label{class_main_window_a3663213f7496f8a29f840fdc2d146029}} 
\index{MainWindow@{MainWindow}!onInkCheckTriggered@{onInkCheckTriggered}}
\index{onInkCheckTriggered@{onInkCheckTriggered}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onInkCheckTriggered}{onInkCheckTriggered}}
{\footnotesize\ttfamily void Main\+Window\+::on\+Ink\+Check\+Triggered (\begin{DoxyParamCaption}\item[{bool}]{on }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02848                                             \{}
\DoxyCodeLine{02849   \textcolor{keywordflow}{if} (!on) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02850   QAction *ink1CheckAction =}
\DoxyCodeLine{02851       CommandManager::instance()-\/>getAction(MI\_Ink1Check);}
\DoxyCodeLine{02852   \textcolor{keywordflow}{if} (ink1CheckAction) ink1CheckAction-\/>setChecked(\textcolor{keyword}{false});}
\DoxyCodeLine{02853 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a1d6287b5ca3eb8a0434d82a971284dcf}\label{class_main_window_a1d6287b5ca3eb8a0434d82a971284dcf}} 
\index{MainWindow@{MainWindow}!onLoadScene@{onLoadScene}}
\index{onLoadScene@{onLoadScene}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onLoadScene()}{onLoadScene()}}
{\footnotesize\ttfamily void Main\+Window\+::on\+Load\+Scene (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00957 \{ IoCmd::loadScene(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_ac0be70955753ffef344fc43e201d01e5}\label{class_main_window_ac0be70955753ffef344fc43e201d01e5}} 
\index{MainWindow@{MainWindow}!onLoadSubScene@{onLoadSubScene}}
\index{onLoadSubScene@{onLoadSubScene}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onLoadSubScene()}{onLoadSubScene()}}
{\footnotesize\ttfamily void Main\+Window\+::on\+Load\+Sub\+Scene (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00961 \{ IoCmd::loadSubScene(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a2dfc907ddc3690c72984e22bc936d7ff}\label{class_main_window_a2dfc907ddc3690c72984e22bc936d7ff}} 
\index{MainWindow@{MainWindow}!onMenuCheckboxChanged@{onMenuCheckboxChanged}}
\index{onMenuCheckboxChanged@{onMenuCheckboxChanged}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onMenuCheckboxChanged}{onMenuCheckboxChanged}}
{\footnotesize\ttfamily void Main\+Window\+::on\+Menu\+Checkbox\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01176                                        \{}
\DoxyCodeLine{01177   QAction *action = qobject\_cast<QAction *>(sender());}
\DoxyCodeLine{01178 }
\DoxyCodeLine{01179   \textcolor{keywordtype}{int} isChecked = action-\/>isChecked();}
\DoxyCodeLine{01180 }
\DoxyCodeLine{01181   \mbox{\hyperlink{class_command_manager}{CommandManager}} *cm = CommandManager::instance();}
\DoxyCodeLine{01182 }
\DoxyCodeLine{01183   \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_ViewCamera) == action)}
\DoxyCodeLine{01184     ViewCameraToggleAction = isChecked;}
\DoxyCodeLine{01185   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_ViewTable) == action)}
\DoxyCodeLine{01186     ViewTableToggleAction = isChecked;}
\DoxyCodeLine{01187   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_ToggleEditInPlace) == action)}
\DoxyCodeLine{01188     EditInPlaceToggleAction = isChecked;}
\DoxyCodeLine{01189   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_ViewBBox) == action)}
\DoxyCodeLine{01190     ViewBBoxToggleAction = isChecked;}
\DoxyCodeLine{01191   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_FieldGuide) == action)}
\DoxyCodeLine{01192     FieldGuideToggleAction = isChecked;}
\DoxyCodeLine{01193   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_RasterizePli) == action) \{}
\DoxyCodeLine{01194     \textcolor{keywordflow}{if} (!QGLPixelBuffer::hasOpenGLPbuffers()) isChecked = 0;}
\DoxyCodeLine{01195     RasterizePliToggleAction = isChecked;}
\DoxyCodeLine{01196   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_SafeArea) == action)}
\DoxyCodeLine{01197     SafeAreaToggleAction = isChecked;}
\DoxyCodeLine{01198   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_ViewColorcard) == action)}
\DoxyCodeLine{01199     ViewColorcardToggleAction = isChecked;}
\DoxyCodeLine{01200   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_ViewGuide) == action)}
\DoxyCodeLine{01201     ViewGuideToggleAction = isChecked;}
\DoxyCodeLine{01202   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_ViewRuler) == action)}
\DoxyCodeLine{01203     ViewRulerToggleAction = isChecked;}
\DoxyCodeLine{01204   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_TCheck) == action)}
\DoxyCodeLine{01205     TCheckToggleAction = isChecked;}
\DoxyCodeLine{01206   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_DockingCheck) == action)}
\DoxyCodeLine{01207     DockingCheckToggleAction = isChecked;}
\DoxyCodeLine{01208   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_ICheck) == action)}
\DoxyCodeLine{01209     ICheckToggleAction = isChecked;}
\DoxyCodeLine{01210   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_Ink1Check) == action)}
\DoxyCodeLine{01211     Ink1CheckToggleAction = isChecked;}
\DoxyCodeLine{01212   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_PCheck) == action)}
\DoxyCodeLine{01213     PCheckToggleAction = isChecked;}
\DoxyCodeLine{01214   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_BCheck) == action)}
\DoxyCodeLine{01215     BCheckToggleAction = isChecked;}
\DoxyCodeLine{01216   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_GCheck) == action)}
\DoxyCodeLine{01217     GCheckToggleAction = isChecked;}
\DoxyCodeLine{01218   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_ACheck) == action)}
\DoxyCodeLine{01219     ACheckToggleAction = isChecked;}
\DoxyCodeLine{01220   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_IOnly) == action)}
\DoxyCodeLine{01221     IOnlyToggleAction = isChecked;}
\DoxyCodeLine{01222   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_Link) == action)}
\DoxyCodeLine{01223     LinkToggleAction = isChecked;}
\DoxyCodeLine{01224   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_ShiftTrace) == action)}
\DoxyCodeLine{01225     ShiftTraceToggleAction = isChecked;}
\DoxyCodeLine{01226   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_EditShift) == action)}
\DoxyCodeLine{01227     EditShiftToggleAction = isChecked;}
\DoxyCodeLine{01228   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_NoShift) == action)}
\DoxyCodeLine{01229     NoShiftToggleAction = isChecked;}
\DoxyCodeLine{01230   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>getAction(MI\_TouchGestureControl) == action)}
\DoxyCodeLine{01231     TouchGestureControl = isChecked;}
\DoxyCodeLine{01232 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_ad7d37843716b28954eea0193e9d71a90}\label{class_main_window_ad7d37843716b28954eea0193e9d71a90}} 
\index{MainWindow@{MainWindow}!onNewRasterLevelButtonPressed@{onNewRasterLevelButtonPressed}}
\index{onNewRasterLevelButtonPressed@{onNewRasterLevelButtonPressed}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onNewRasterLevelButtonPressed()}{onNewRasterLevelButtonPressed()}}
{\footnotesize\ttfamily void Main\+Window\+::on\+New\+Raster\+Level\+Button\+Pressed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02883                                                \{}
\DoxyCodeLine{02884   \textcolor{keywordtype}{int} defaultLevelType = Preferences::instance()-\/>getDefLevelType();}
\DoxyCodeLine{02885   Preferences::instance()-\/>setValue(DefLevelType, OVL\_XSHLEVEL);}
\DoxyCodeLine{02886   CommandManager::instance()-\/>execute(\textcolor{stringliteral}{"{}MI\_NewLevel"{}});}
\DoxyCodeLine{02887   Preferences::instance()-\/>setValue(DefLevelType, defaultLevelType);}
\DoxyCodeLine{02888 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a90bde85e6f008b4ab8dc11a7336431ae}\label{class_main_window_a90bde85e6f008b4ab8dc11a7336431ae}} 
\index{MainWindow@{MainWindow}!onNewScene@{onNewScene}}
\index{onNewScene@{onNewScene}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onNewScene()}{onNewScene()}}
{\footnotesize\ttfamily void Main\+Window\+::on\+New\+Scene (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00946                             \{}
\DoxyCodeLine{00947   IoCmd::newScene();}
\DoxyCodeLine{00948   \mbox{\hyperlink{class_command_manager}{CommandManager}} *cm = CommandManager::instance();}
\DoxyCodeLine{00949   cm-\/>setChecked(MI\_ShiftTrace, \textcolor{keyword}{false});}
\DoxyCodeLine{00950   cm-\/>setChecked(MI\_EditShift, \textcolor{keyword}{false});}
\DoxyCodeLine{00951   cm-\/>setChecked(MI\_NoShift, \textcolor{keyword}{false});}
\DoxyCodeLine{00952   cm-\/>setChecked(MI\_VectorGuidedDrawing, \textcolor{keyword}{false});}
\DoxyCodeLine{00953 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a6c843678fa96d4fe231f1c785f7fd9f8}\label{class_main_window_a6c843678fa96d4fe231f1c785f7fd9f8}} 
\index{MainWindow@{MainWindow}!onNewToonzRasterLevelButtonPressed@{onNewToonzRasterLevelButtonPressed}}
\index{onNewToonzRasterLevelButtonPressed@{onNewToonzRasterLevelButtonPressed}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onNewToonzRasterLevelButtonPressed()}{onNewToonzRasterLevelButtonPressed()}}
{\footnotesize\ttfamily void Main\+Window\+::on\+New\+Toonz\+Raster\+Level\+Button\+Pressed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02874                                                     \{}
\DoxyCodeLine{02875   \textcolor{keywordtype}{int} defaultLevelType = Preferences::instance()-\/>getDefLevelType();}
\DoxyCodeLine{02876   Preferences::instance()-\/>setValue(DefLevelType, TZP\_XSHLEVEL);}
\DoxyCodeLine{02877   CommandManager::instance()-\/>execute(\textcolor{stringliteral}{"{}MI\_NewLevel"{}});}
\DoxyCodeLine{02878   Preferences::instance()-\/>setValue(DefLevelType, defaultLevelType);}
\DoxyCodeLine{02879 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_ac00a5fad59509df5a942ef0f645114f9}\label{class_main_window_ac00a5fad59509df5a942ef0f645114f9}} 
\index{MainWindow@{MainWindow}!onNewVectorLevelButtonPressed@{onNewVectorLevelButtonPressed}}
\index{onNewVectorLevelButtonPressed@{onNewVectorLevelButtonPressed}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onNewVectorLevelButtonPressed()}{onNewVectorLevelButtonPressed()}}
{\footnotesize\ttfamily void Main\+Window\+::on\+New\+Vector\+Level\+Button\+Pressed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02865                                                \{}
\DoxyCodeLine{02866   \textcolor{keywordtype}{int} defaultLevelType = Preferences::instance()-\/>getDefLevelType();}
\DoxyCodeLine{02867   Preferences::instance()-\/>setValue(DefLevelType, PLI\_XSHLEVEL);}
\DoxyCodeLine{02868   CommandManager::instance()-\/>execute(\textcolor{stringliteral}{"{}MI\_NewLevel"{}});}
\DoxyCodeLine{02869   Preferences::instance()-\/>setValue(DefLevelType, defaultLevelType);}
\DoxyCodeLine{02870 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a616229237e321dd0c601eee8a48ce269}\label{class_main_window_a616229237e321dd0c601eee8a48ce269}} 
\index{MainWindow@{MainWindow}!onOpenCommunityForum@{onOpenCommunityForum}}
\index{onOpenCommunityForum@{onOpenCommunityForum}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onOpenCommunityForum()}{onOpenCommunityForum()}}
{\footnotesize\ttfamily void Main\+Window\+::on\+Open\+Community\+Forum (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01006                                       \{}
\DoxyCodeLine{01007   QDesktopServices::openUrl(}
\DoxyCodeLine{01008       QUrl(tr(\textcolor{stringliteral}{"{}https://groups.google.com/forum/\#!forum/opentoonz\_en"{}})));}
\DoxyCodeLine{01009 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a3017ed1b8e8c2fe6cf8182d4e320acf7}\label{class_main_window_a3017ed1b8e8c2fe6cf8182d4e320acf7}} 
\index{MainWindow@{MainWindow}!onOpenOnlineManual@{onOpenOnlineManual}}
\index{onOpenOnlineManual@{onOpenOnlineManual}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onOpenOnlineManual()}{onOpenOnlineManual()}}
{\footnotesize\ttfamily void Main\+Window\+::on\+Open\+Online\+Manual (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00993                                     \{}
\DoxyCodeLine{00994   QDesktopServices::openUrl(QUrl(tr(\textcolor{stringliteral}{"{}http://opentoonz.readthedocs.io"{}})));}
\DoxyCodeLine{00995 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a0dea767f66c89973af5bdc4e2c12b3ae}\label{class_main_window_a0dea767f66c89973af5bdc4e2c12b3ae}} 
\index{MainWindow@{MainWindow}!onOpenReportABug@{onOpenReportABug}}
\index{onOpenReportABug@{onOpenReportABug}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onOpenReportABug()}{onOpenReportABug()}}
{\footnotesize\ttfamily void Main\+Window\+::on\+Open\+Report\+ABug (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01013                                   \{}
\DoxyCodeLine{01014   QString str = QString(}
\DoxyCodeLine{01015       tr(\textcolor{stringliteral}{"{}To report a bug, click on the button below to open a web browser "{}}}
\DoxyCodeLine{01016          \textcolor{stringliteral}{"{}window for OpenToonz's Issues page on https://github.com.  Click on "{}}}
\DoxyCodeLine{01017          \textcolor{stringliteral}{"{}the 'New issue' button and fill out the form."{}}));}
\DoxyCodeLine{01018 }
\DoxyCodeLine{01019   std::vector<QString> buttons = \{QObject::tr(\textcolor{stringliteral}{"{}Report a Bug"{}}),}
\DoxyCodeLine{01020                                   QObject::tr(\textcolor{stringliteral}{"{}Close"{}})\};}
\DoxyCodeLine{01021   \textcolor{keywordtype}{int} ret = DVGui::MsgBox(DVGui::INFORMATION, str, buttons, 1);}
\DoxyCodeLine{01022   \textcolor{keywordflow}{if} (ret == 1)}
\DoxyCodeLine{01023     QDesktopServices::openUrl(}
\DoxyCodeLine{01024         QUrl(\textcolor{stringliteral}{"{}https://github.com/opentoonz/opentoonz/issues"{}}));}
\DoxyCodeLine{01025 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_adbea4cb169d9ad6c8bcd3b762fdb1d53}\label{class_main_window_adbea4cb169d9ad6c8bcd3b762fdb1d53}} 
\index{MainWindow@{MainWindow}!onOpenWhatsNew@{onOpenWhatsNew}}
\index{onOpenWhatsNew@{onOpenWhatsNew}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onOpenWhatsNew()}{onOpenWhatsNew()}}
{\footnotesize\ttfamily void Main\+Window\+::on\+Open\+Whats\+New (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00999                                 \{}
\DoxyCodeLine{01000   QDesktopServices::openUrl(}
\DoxyCodeLine{01001       QUrl(tr(\textcolor{stringliteral}{"{}https://github.com/opentoonz/opentoonz/releases/latest"{}})));}
\DoxyCodeLine{01002 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a396d25e5a2750fa909ba152ebe815472}\label{class_main_window_a396d25e5a2750fa909ba152ebe815472}} 
\index{MainWindow@{MainWindow}!onQuit@{onQuit}}
\index{onQuit@{onQuit}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onQuit()}{onQuit()}}
{\footnotesize\ttfamily void Main\+Window\+::on\+Quit (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02991 \{ close(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a449c6ed68cdacce074489d55ee8ce265}\label{class_main_window_a449c6ed68cdacce074489d55ee8ce265}} 
\index{MainWindow@{MainWindow}!onRedo@{onRedo}}
\index{onRedo@{onRedo}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onRedo()}{onRedo()}}
{\footnotesize\ttfamily void Main\+Window\+::on\+Redo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00939                         \{}
\DoxyCodeLine{00940   \textcolor{keywordtype}{bool} ret = TUndoManager::manager()-\/>redo();}
\DoxyCodeLine{00941   \textcolor{keywordflow}{if} (!ret) DVGui::error(QObject::tr(\textcolor{stringliteral}{"{}No more Redo operations available."{}}));}
\DoxyCodeLine{00942 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_ab53e62f6946d426add94fc29f1384428}\label{class_main_window_ab53e62f6946d426add94fc29f1384428}} 
\index{MainWindow@{MainWindow}!onUndo@{onUndo}}
\index{onUndo@{onUndo}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onUndo()}{onUndo()}}
{\footnotesize\ttfamily void Main\+Window\+::on\+Undo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00932                         \{}
\DoxyCodeLine{00933   \textcolor{keywordtype}{bool} ret = TUndoManager::manager()-\/>undo();}
\DoxyCodeLine{00934   \textcolor{keywordflow}{if} (!ret) DVGui::error(QObject::tr(\textcolor{stringliteral}{"{}No more Undo operations available."{}}));}
\DoxyCodeLine{00935 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a020089ec40a89a3a88dad164c4ee8a05}\label{class_main_window_a020089ec40a89a3a88dad164c4ee8a05}} 
\index{MainWindow@{MainWindow}!onUpdateCheckerDone@{onUpdateCheckerDone}}
\index{onUpdateCheckerDone@{onUpdateCheckerDone}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onUpdateCheckerDone}{onUpdateCheckerDone}}
{\footnotesize\ttfamily void Main\+Window\+::on\+Update\+Checker\+Done (\begin{DoxyParamCaption}\item[{bool}]{error }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01260                                                \{}
\DoxyCodeLine{01261   \textcolor{keywordflow}{if} (error) \{}
\DoxyCodeLine{01262     \textcolor{comment}{// Get the last update date}}
\DoxyCodeLine{01263     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01264   \}}
\DoxyCodeLine{01265 }
\DoxyCodeLine{01266   \textcolor{keywordtype}{int} \textcolor{keyword}{const} software\_version =}
\DoxyCodeLine{01267       get\_version\_code\_from(TEnv::getApplicationVersion());}
\DoxyCodeLine{01268   \textcolor{keywordtype}{int} \textcolor{keyword}{const} latest\_version =}
\DoxyCodeLine{01269       get\_version\_code\_from(m\_updateChecker-\/>getLatestVersion().toStdString());}
\DoxyCodeLine{01270   \textcolor{keywordflow}{if} (software\_version < latest\_version) \{}
\DoxyCodeLine{01271     QStringList buttons;}
\DoxyCodeLine{01272     buttons.push\_back(QObject::tr(\textcolor{stringliteral}{"{}Visit Web Site"{}}));}
\DoxyCodeLine{01273     buttons.push\_back(QObject::tr(\textcolor{stringliteral}{"{}Cancel"{}}));}
\DoxyCodeLine{01274     \mbox{\hyperlink{class_d_v_gui_1_1_message_and_checkbox_dialog}{DVGui::MessageAndCheckboxDialog}} *dialog = DVGui::createMsgandCheckbox(}
\DoxyCodeLine{01275         DVGui::INFORMATION,}
\DoxyCodeLine{01276         QObject::tr(\textcolor{stringliteral}{"{}An update is available for this software.\(\backslash\)nVisit the Web "{}}}
\DoxyCodeLine{01277                     \textcolor{stringliteral}{"{}site for more information."{}}),}
\DoxyCodeLine{01278         QObject::tr(\textcolor{stringliteral}{"{}Check for the latest version on launch."{}}), buttons, 0,}
\DoxyCodeLine{01279         Qt::Checked);}
\DoxyCodeLine{01280     \textcolor{keywordtype}{int} ret = dialog-\/>exec();}
\DoxyCodeLine{01281     \textcolor{keywordflow}{if} (dialog-\/>getChecked() == Qt::Unchecked)}
\DoxyCodeLine{01282       Preferences::instance()-\/>setValue(latestVersionCheckEnabled, \textcolor{keyword}{false});}
\DoxyCodeLine{01283     dialog-\/>deleteLater();}
\DoxyCodeLine{01284     \textcolor{keywordflow}{if} (ret == 1) \{}
\DoxyCodeLine{01285       \textcolor{comment}{// Write the new last date to file}}
\DoxyCodeLine{01286       QDesktopServices::openUrl(QObject::tr(\textcolor{stringliteral}{"{}https://opentoonz.github.io/e/"{}}));}
\DoxyCodeLine{01287     \}}
\DoxyCodeLine{01288   \}}
\DoxyCodeLine{01289 }
\DoxyCodeLine{01290   disconnect(m\_updateChecker);}
\DoxyCodeLine{01291   m\_updateChecker-\/>deleteLater();}
\DoxyCodeLine{01292 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a427070d53b46eec45269c4435094919d}\label{class_main_window_a427070d53b46eec45269c4435094919d}} 
\index{MainWindow@{MainWindow}!onUpgradeTabPro@{onUpgradeTabPro}}
\index{onUpgradeTabPro@{onUpgradeTabPro}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{onUpgradeTabPro()}{onUpgradeTabPro()}}
{\footnotesize\ttfamily void Main\+Window\+::on\+Upgrade\+Tab\+Pro (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00964 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_add5c56df24de179209e0c8e9084ddc2c}\label{class_main_window_add5c56df24de179209e0c8e9084ddc2c}} 
\index{MainWindow@{MainWindow}!readSettings@{readSettings}}
\index{readSettings@{readSettings}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{readSettings()}{readSettings()}}
{\footnotesize\ttfamily void Main\+Window\+::read\+Settings (\begin{DoxyParamCaption}\item[{const QString \&}]{layout\+File\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00551                                                                    \{}
\DoxyCodeLine{00552   QTabBar *roomTabWidget = m\_topBar-\/>getRoomTabWidget();}
\DoxyCodeLine{00553 }
\DoxyCodeLine{00554   \textcolor{comment}{/*-\/-\/ Pageを追加すると同時にMenubarを追加する -\/-\/*/}}
\DoxyCodeLine{00555   \mbox{\hyperlink{class_stacked_menu_bar}{StackedMenuBar}} *stackedMenuBar = m\_topBar-\/>getStackedMenuBar();}
\DoxyCodeLine{00556 }
\DoxyCodeLine{00557   std::vector<Room *> rooms;}
\DoxyCodeLine{00558 }
\DoxyCodeLine{00559   \textcolor{comment}{// leggo l'elenco dei layout}}
\DoxyCodeLine{00560   std::vector<TFilePath> roomPaths;}
\DoxyCodeLine{00561 }
\DoxyCodeLine{00562   \textcolor{keywordflow}{if} (readRoomList(roomPaths, argumentLayoutFileName)) \{}
\DoxyCodeLine{00563     \textcolor{keywordflow}{if} (!argumentLayoutFileName.isEmpty()) \{}
\DoxyCodeLine{00564       \textcolor{comment}{/*-\/-\/}}
\DoxyCodeLine{00565 \textcolor{comment}{       * タイトルバーに表示するレイアウト名を作る：\_layoutがあればそこから省く。無ければ.txtのみ省く}}
\DoxyCodeLine{00566 \textcolor{comment}{       * -\/-\/*/}}
\DoxyCodeLine{00567       \textcolor{keywordtype}{int} pos = (argumentLayoutFileName.indexOf(\textcolor{stringliteral}{"{}\_layout"{}}) == -\/1)}
\DoxyCodeLine{00568                     ? argumentLayoutFileName.indexOf(\textcolor{stringliteral}{"{}.txt"{}})}
\DoxyCodeLine{00569                     : argumentLayoutFileName.indexOf(\textcolor{stringliteral}{"{}\_layout"{}});}
\DoxyCodeLine{00570       m\_layoutName = argumentLayoutFileName.left(pos);}
\DoxyCodeLine{00571     \}}
\DoxyCodeLine{00572   \}}
\DoxyCodeLine{00573 }
\DoxyCodeLine{00574   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00575   \textcolor{keywordflow}{for} (i = 0; i < (int)roomPaths.size(); i++) \{}
\DoxyCodeLine{00576     \mbox{\hyperlink{class_t_file_path}{TFilePath}} roomPath = roomPaths[i];}
\DoxyCodeLine{00577     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(roomPath).doesExist()) \{}
\DoxyCodeLine{00578       \mbox{\hyperlink{class_room}{Room}} *room = \textcolor{keyword}{new} \mbox{\hyperlink{class_room}{Room}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00579       room-\/>load(roomPath);}
\DoxyCodeLine{00580       m\_stackedWidget-\/>addWidget(room);}
\DoxyCodeLine{00581       roomTabWidget-\/>addTab(room-\/>getName());}
\DoxyCodeLine{00582 }
\DoxyCodeLine{00583       \textcolor{comment}{/*-\/ ここでMenuBarファイルをロードする -\/*/}}
\DoxyCodeLine{00584       std::string mbFileName = roomPath.\mbox{\hyperlink{class_t_file_path_af94f9b0aeceb6cdb980fa1789473503a}{getName}}() + \textcolor{stringliteral}{"{}\_menubar.xml"{}};}
\DoxyCodeLine{00585       stackedMenuBar-\/>loadAndAddMenubar(ToonzFolder::getRoomsFile(mbFileName));}
\DoxyCodeLine{00586 }
\DoxyCodeLine{00587       \textcolor{comment}{// room-\/>setDockOptions(QMainWindow::DockOptions(}}
\DoxyCodeLine{00588       \textcolor{comment}{//  (QMainWindow::AnimatedDocks | QMainWindow::AllowNestedDocks) \&}}
\DoxyCodeLine{00589       \textcolor{comment}{//  \string~QMainWindow::AllowTabbedDocks));}}
\DoxyCodeLine{00590       rooms.push\_back(room);}
\DoxyCodeLine{00591     \}}
\DoxyCodeLine{00592   \}}
\DoxyCodeLine{00593 }
\DoxyCodeLine{00594   \textcolor{comment}{// Read the flipbook history}}
\DoxyCodeLine{00595   FlipBookPool::instance()-\/>\mbox{\hyperlink{class_flip_book_pool_a52a619f7fa4db67b6dd7a6872e0de4ce}{load}}(ToonzFolder::getMyModuleDir() +}
\DoxyCodeLine{00596                                  \mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}fliphistory.ini"{}}));}
\DoxyCodeLine{00597 }
\DoxyCodeLine{00598   \textcolor{comment}{/*-\/ レイアウト設定ファイルが見つからなかった場合、初期Roomの生成 -\/*/}}
\DoxyCodeLine{00599   \textcolor{comment}{// Se leggendo i settings non ho inizializzato le stanze lo faccio ora.}}
\DoxyCodeLine{00600   \textcolor{comment}{// Puo' accadere se si buttano i file di inizializzazione.}}
\DoxyCodeLine{00601   \textcolor{keywordflow}{if} (rooms.empty()) \{}
\DoxyCodeLine{00602     \textcolor{comment}{// CleanupRoom}}
\DoxyCodeLine{00603     \mbox{\hyperlink{class_room}{Room}} *cleanupRoom = createCleanupRoom();}
\DoxyCodeLine{00604     m\_stackedWidget-\/>addWidget(cleanupRoom);}
\DoxyCodeLine{00605     rooms.push\_back(cleanupRoom);}
\DoxyCodeLine{00606     stackedMenuBar-\/>createMenuBarByName(cleanupRoom-\/>getName());}
\DoxyCodeLine{00607 }
\DoxyCodeLine{00608     \textcolor{comment}{// PltEditRoom}}
\DoxyCodeLine{00609     \mbox{\hyperlink{class_room}{Room}} *pltEditRoom = createPltEditRoom();}
\DoxyCodeLine{00610     m\_stackedWidget-\/>addWidget(pltEditRoom);}
\DoxyCodeLine{00611     rooms.push\_back(pltEditRoom);}
\DoxyCodeLine{00612     stackedMenuBar-\/>createMenuBarByName(pltEditRoom-\/>getName());}
\DoxyCodeLine{00613 }
\DoxyCodeLine{00614     \textcolor{comment}{// InknPaintRoom}}
\DoxyCodeLine{00615     \mbox{\hyperlink{class_room}{Room}} *inknPaintRoom = createInknPaintRoom();}
\DoxyCodeLine{00616     m\_stackedWidget-\/>addWidget(inknPaintRoom);}
\DoxyCodeLine{00617     rooms.push\_back(inknPaintRoom);}
\DoxyCodeLine{00618     stackedMenuBar-\/>createMenuBarByName(inknPaintRoom-\/>getName());}
\DoxyCodeLine{00619 }
\DoxyCodeLine{00620     \textcolor{comment}{// XsheetRoom}}
\DoxyCodeLine{00621     \mbox{\hyperlink{class_room}{Room}} *xsheetRoom = createXsheetRoom();}
\DoxyCodeLine{00622     m\_stackedWidget-\/>addWidget(xsheetRoom);}
\DoxyCodeLine{00623     rooms.push\_back(xsheetRoom);}
\DoxyCodeLine{00624     stackedMenuBar-\/>createMenuBarByName(xsheetRoom-\/>getName());}
\DoxyCodeLine{00625 }
\DoxyCodeLine{00626     \textcolor{comment}{// BatchesRoom}}
\DoxyCodeLine{00627     \mbox{\hyperlink{class_room}{Room}} *batchesRoom = createBatchesRoom();}
\DoxyCodeLine{00628     m\_stackedWidget-\/>addWidget(batchesRoom);}
\DoxyCodeLine{00629     rooms.push\_back(batchesRoom);}
\DoxyCodeLine{00630     stackedMenuBar-\/>createMenuBarByName(batchesRoom-\/>getName());}
\DoxyCodeLine{00631 }
\DoxyCodeLine{00632     \textcolor{comment}{// BrowserRoom}}
\DoxyCodeLine{00633     \mbox{\hyperlink{class_room}{Room}} *browserRoom = createBrowserRoom();}
\DoxyCodeLine{00634     m\_stackedWidget-\/>addWidget(browserRoom);}
\DoxyCodeLine{00635     rooms.push\_back(browserRoom);}
\DoxyCodeLine{00636     stackedMenuBar-\/>createMenuBarByName(browserRoom-\/>getName());}
\DoxyCodeLine{00637   \}}
\DoxyCodeLine{00638 }
\DoxyCodeLine{00639   \textcolor{comment}{/*-\/ If the layout files were loaded from template, then save them as private}}
\DoxyCodeLine{00640 \textcolor{comment}{   * ones -\/*/}}
\DoxyCodeLine{00641   makePrivate(rooms);}
\DoxyCodeLine{00642   writeRoomList(rooms);}
\DoxyCodeLine{00643 }
\DoxyCodeLine{00644   \textcolor{comment}{// Imposto la stanza corrente}}
\DoxyCodeLine{00645   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = ToonzFolder::getRoomsFile(currentRoomFileName);}
\DoxyCodeLine{00646   \mbox{\hyperlink{class_tifstream}{Tifstream}} is(fp);}
\DoxyCodeLine{00647   std::string currentRoomName;}
\DoxyCodeLine{00648   is >> currentRoomName;}
\DoxyCodeLine{00649   \textcolor{keywordflow}{if} (currentRoomName != \textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{00650     \textcolor{keywordtype}{int} count = m\_stackedWidget-\/>count();}
\DoxyCodeLine{00651     \textcolor{keywordtype}{int} index;}
\DoxyCodeLine{00652     \textcolor{keywordflow}{for} (index = 0; index < count; index++)}
\DoxyCodeLine{00653       \textcolor{keywordflow}{if} (getRoom(index)-\/>getName().toStdString() == currentRoomName) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00654     \textcolor{keywordflow}{if} (index < count) \{}
\DoxyCodeLine{00655       m\_oldRoomIndex = index;}
\DoxyCodeLine{00656       roomTabWidget-\/>setCurrentIndex(index);}
\DoxyCodeLine{00657       m\_stackedWidget-\/>setCurrentIndex(index);}
\DoxyCodeLine{00658     \}}
\DoxyCodeLine{00659   \}}
\DoxyCodeLine{00660 }
\DoxyCodeLine{00661   RecentFiles::instance()-\/>loadRecentFiles();}
\DoxyCodeLine{00662 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a4f61b12505dba1c41a8ff5da5169b873}\label{class_main_window_a4f61b12505dba1c41a8ff5da5169b873}} 
\index{MainWindow@{MainWindow}!refreshWriteSettings@{refreshWriteSettings}}
\index{refreshWriteSettings@{refreshWriteSettings}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{refreshWriteSettings()}{refreshWriteSettings()}}
{\footnotesize\ttfamily void Main\+Window\+::refresh\+Write\+Settings (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00547 \{ writeSettings(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_aafc6092830badf147b7b24994a538552}\label{class_main_window_aafc6092830badf147b7b24994a538552}} 
\index{MainWindow@{MainWindow}!renameRoom@{renameRoom}}
\index{renameRoom@{renameRoom}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{renameRoom}{renameRoom}}
{\footnotesize\ttfamily void Main\+Window\+::rename\+Room (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{const QString}]{name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01168                                                          \{}
\DoxyCodeLine{01169   \mbox{\hyperlink{class_room}{Room}} *room = getRoom(index);}
\DoxyCodeLine{01170   room-\/>setName(name);}
\DoxyCodeLine{01171   \textcolor{keywordflow}{if} (m\_saveSettingsOnQuit) room-\/>save();}
\DoxyCodeLine{01172 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_af7ea7bf7b464c1a5241e22819ef139a5}\label{class_main_window_af7ea7bf7b464c1a5241e22819ef139a5}} 
\index{MainWindow@{MainWindow}!resetRoomsLayout@{resetRoomsLayout}}
\index{resetRoomsLayout@{resetRoomsLayout}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{resetRoomsLayout()}{resetRoomsLayout()}}
{\footnotesize\ttfamily void Main\+Window\+::reset\+Rooms\+Layout (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01033                                   \{}
\DoxyCodeLine{01034   \textcolor{keywordflow}{if} (!m\_saveSettingsOnQuit) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01035 }
\DoxyCodeLine{01036   m\_saveSettingsOnQuit = \textcolor{keyword}{false};}
\DoxyCodeLine{01037 }
\DoxyCodeLine{01038   \mbox{\hyperlink{class_t_file_path}{TFilePath}} layoutDir = ToonzFolder::getMyRoomsDir();}
\DoxyCodeLine{01039   \textcolor{keywordflow}{if} (layoutDir != \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \{}
\DoxyCodeLine{01040     \textcolor{comment}{// TSystem::deleteFile(layoutDir);}}
\DoxyCodeLine{01041     TSystem::rmDirTree(layoutDir);}
\DoxyCodeLine{01042   \}}
\DoxyCodeLine{01043   \textcolor{comment}{/*if (layoutDir != TFilePath()) \{}}
\DoxyCodeLine{01044 \textcolor{comment}{          try \{}}
\DoxyCodeLine{01045 \textcolor{comment}{                  TFilePathSet fpset;}}
\DoxyCodeLine{01046 \textcolor{comment}{                  TSystem::readDirectory(fpset, layoutDir, true, false);}}
\DoxyCodeLine{01047 \textcolor{comment}{                  for (auto const\& path : fpset) \{}}
\DoxyCodeLine{01048 \textcolor{comment}{                          QString fn = toQString(path.withoutParentDir());}}
\DoxyCodeLine{01049 \textcolor{comment}{                          if (fn.startsWith("{}room"{}) || fn.startsWith("{}popups"{}))}}
\DoxyCodeLine{01050 \textcolor{comment}{  \{}}
\DoxyCodeLine{01051 \textcolor{comment}{                                  TSystem::deleteFile(path);}}
\DoxyCodeLine{01052 \textcolor{comment}{                          \}}}
\DoxyCodeLine{01053 \textcolor{comment}{                  \}}}
\DoxyCodeLine{01054 \textcolor{comment}{          \} catch (...) \{}}
\DoxyCodeLine{01055 \textcolor{comment}{          \}}}
\DoxyCodeLine{01056 \textcolor{comment}{  \}*/}}
\DoxyCodeLine{01057 }
\DoxyCodeLine{01058   DVGui::info(}
\DoxyCodeLine{01059       QObject::tr(\textcolor{stringliteral}{"{}The rooms will be reset the next time you run Toonz."{}}));}
\DoxyCodeLine{01060 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_ac0d01c4182ffba584aca3450d8ca01bc}\label{class_main_window_ac0d01c4182ffba584aca3450d8ca01bc}} 
\index{MainWindow@{MainWindow}!showEvent@{showEvent}}
\index{showEvent@{showEvent}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{showEvent()}{showEvent()}}
{\footnotesize\ttfamily void Main\+Window\+::show\+Event (\begin{DoxyParamCaption}\item[{QShow\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01236                                             \{}
\DoxyCodeLine{01237   getCurrentRoom()-\/>layout()-\/>setEnabled(\textcolor{keyword}{true});  \textcolor{comment}{// See main function in}}
\DoxyCodeLine{01238                                                  \textcolor{comment}{// main.cpp}}
\DoxyCodeLine{01239   \textcolor{keywordflow}{if} (Preferences::instance()-\/>isStartupPopupEnabled() \&\&}
\DoxyCodeLine{01240       !m\_startupPopupShown) \{}
\DoxyCodeLine{01241     \mbox{\hyperlink{class_startup_popup}{StartupPopup}} *startupPopup = \textcolor{keyword}{new} \mbox{\hyperlink{class_startup_popup}{StartupPopup}}();}
\DoxyCodeLine{01242     startupPopup-\/>show();}
\DoxyCodeLine{01243     m\_startupPopupShown = \textcolor{keyword}{true};}
\DoxyCodeLine{01244   \}}
\DoxyCodeLine{01245 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a8e21ac5436b30ed6de440c71751b59f4}\label{class_main_window_a8e21ac5436b30ed6de440c71751b59f4}} 
\index{MainWindow@{MainWindow}!startupFloatingPanels@{startupFloatingPanels}}
\index{startupFloatingPanels@{startupFloatingPanels}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{startupFloatingPanels()}{startupFloatingPanels()}}
{\footnotesize\ttfamily void Main\+Window\+::startup\+Floating\+Panels (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00511                                        \{}
\DoxyCodeLine{00512   \textcolor{comment}{// Show all floating panels}}
\DoxyCodeLine{00513   \mbox{\hyperlink{class_dock_layout}{DockLayout}} *currDockLayout = getCurrentRoom()-\/>dockLayout();}
\DoxyCodeLine{00514   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00515   \textcolor{keywordflow}{for} (i = 0; i < currDockLayout-\/>count(); ++i) \{}
\DoxyCodeLine{00516     \mbox{\hyperlink{class_t_panel}{TPanel}} *currPanel = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_t_panel}{TPanel}} *\textcolor{keyword}{>}(currDockLayout-\/>widgetAt(i));}
\DoxyCodeLine{00517     \textcolor{keywordflow}{if} (currPanel-\/>isFloating()) currPanel-\/>show();}
\DoxyCodeLine{00518   \}}
\DoxyCodeLine{00519 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_main_window_a49be45fc9b993fdc3afe55d4b6fa0650}\label{class_main_window_a49be45fc9b993fdc3afe55d4b6fa0650}} 
\index{MainWindow@{MainWindow}!writeSettings@{writeSettings}}
\index{writeSettings@{writeSettings}!MainWindow@{MainWindow}}
\doxysubsubsection{\texorpdfstring{writeSettings()}{writeSettings()}}
{\footnotesize\ttfamily void Main\+Window\+::write\+Settings (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00666                                \{}
\DoxyCodeLine{00667   std::vector<Room *> rooms;}
\DoxyCodeLine{00668   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00669 }
\DoxyCodeLine{00670   \textcolor{comment}{// Flipbook history}}
\DoxyCodeLine{00671   \mbox{\hyperlink{class_dock_layout}{DockLayout}} *currRoomLayout(getCurrentRoom()-\/>dockLayout());}
\DoxyCodeLine{00672   \textcolor{keywordflow}{for} (i = 0; i < currRoomLayout-\/>count(); ++i) \{}
\DoxyCodeLine{00673     \textcolor{comment}{// Remove all floating flipbooks from current room and return them into}}
\DoxyCodeLine{00674     \textcolor{comment}{// the flipbook pool.}}
\DoxyCodeLine{00675     \mbox{\hyperlink{class_t_panel}{TPanel}} *panel = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_t_panel}{TPanel}} *\textcolor{keyword}{>}(currRoomLayout-\/>itemAt(i)-\/>widget());}
\DoxyCodeLine{00676     \textcolor{keywordflow}{if} (panel-\/>isFloating() \&\& panel-\/>getPanelType() == \textcolor{stringliteral}{"{}FlipBook"{}}) \{}
\DoxyCodeLine{00677       currRoomLayout-\/>removeWidget(panel);}
\DoxyCodeLine{00678       \mbox{\hyperlink{class_flip_book}{FlipBook}} *flipbook = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_flip_book}{FlipBook}} *\textcolor{keyword}{>}(panel-\/>widget());}
\DoxyCodeLine{00679       FlipBookPool::instance()-\/>push(flipbook);}
\DoxyCodeLine{00680       -\/-\/i;}
\DoxyCodeLine{00681     \}}
\DoxyCodeLine{00682   \}}
\DoxyCodeLine{00683 }
\DoxyCodeLine{00684   FlipBookPool::instance()-\/>\mbox{\hyperlink{class_flip_book_pool_ac3a7623ffdc98e25fffb088ac2149fb6}{save}}();}
\DoxyCodeLine{00685 }
\DoxyCodeLine{00686   \textcolor{comment}{// Room layouts}}
\DoxyCodeLine{00687   \textcolor{keywordflow}{for} (i = 0; i < m\_stackedWidget-\/>count(); i++) \{}
\DoxyCodeLine{00688     \mbox{\hyperlink{class_room}{Room}} *room = getRoom(i);}
\DoxyCodeLine{00689     rooms.push\_back(room);}
\DoxyCodeLine{00690     room-\/>save();}
\DoxyCodeLine{00691   \}}
\DoxyCodeLine{00692   \textcolor{keywordflow}{if} (m\_currentRoomsChoice == Preferences::instance()-\/>getCurrentRoomChoice()) \{}
\DoxyCodeLine{00693     writeRoomList(rooms);}
\DoxyCodeLine{00694   \}}
\DoxyCodeLine{00695 }
\DoxyCodeLine{00696   \textcolor{comment}{// Current room settings}}
\DoxyCodeLine{00697   \mbox{\hyperlink{class_tofstream}{Tofstream}} os(ToonzFolder::getMyRoomsDir() + currentRoomFileName);}
\DoxyCodeLine{00698   os << getCurrentRoom()-\/>getName().toStdString();}
\DoxyCodeLine{00699 }
\DoxyCodeLine{00700   \textcolor{comment}{// Main window settings}}
\DoxyCodeLine{00701   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = ToonzFolder::getMyModuleDir() + \mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}mainwindow.ini"{}});}
\DoxyCodeLine{00702   QSettings settings(toQString(fp), QSettings::IniFormat);}
\DoxyCodeLine{00703 }
\DoxyCodeLine{00704   settings.setValue(\textcolor{stringliteral}{"{}MainWindowGeometry"{}}, saveGeometry());}
\DoxyCodeLine{00705 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/mainwindow.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/mainwindow.\+cpp\end{DoxyCompactItemize}
