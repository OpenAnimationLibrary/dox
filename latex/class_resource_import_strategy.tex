\hypertarget{class_resource_import_strategy}{}\doxysection{Resource\+Import\+Strategy Class Reference}
\label{class_resource_import_strategy}\index{ResourceImportStrategy@{ResourceImportStrategy}}


{\ttfamily \#include $<$sceneresources.\+h$>$}

\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \{ {\bfseries DONT\+\_\+\+IMPORT}
, {\bfseries IMPORT\+\_\+\+AND\+\_\+\+OVERWRITE}
, {\bfseries IMPORT\+\_\+\+AND\+\_\+\+RENAME}
 \}
\item 
typedef std\+::map$<$ \mbox{\hyperlink{class_t_file_path}{TFile\+Path}}, \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} $>$ \mbox{\hyperlink{class_resource_import_strategy_a9228e0d3cd6478fda1d4abf65d98570b}{Import\+Log}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_resource_import_strategy_a3de278918c122ff87f1a488e788da9c0}{Resource\+Import\+Strategy}} (int strategy)
\item 
virtual bool \mbox{\hyperlink{class_resource_import_strategy_ab84ee9918d64f99ecb452141e7271fd4}{aborted}} ()
\item 
bool \mbox{\hyperlink{class_resource_import_strategy_a0914e62340a927a0a901190c12e88517}{is\+Child\+Folder\+Enabled}} () const
\item 
void \mbox{\hyperlink{class_resource_import_strategy_ab67914ca222d08b231757672e728adaf}{set\+Child\+Folder\+Enabled}} (bool enabled)
\item 
virtual \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_resource_import_strategy_a5855a6fe244cee56794ae66006f843ca}{process}} (\mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}} $\ast$dst\+Scene, \mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}} $\ast$src\+Scene, \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} src\+File)=0
\item 
const Import\+Log \& \mbox{\hyperlink{class_resource_import_strategy_aa3aed69133c70383862d00a398183f12}{get\+Import\+Log}} () const
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\mbox{\hyperlink{class_resource_import_strategy}{Resource\+Import\+Strategy}} allows to control the resource import behaviour during load operation. It can be statically defined (i.\+e. DONT\+\_\+\+IMPORT). Subclass it to provide dialog boxes. All the actual file copies are recorded (Import\+Log). \begin{DoxySeeAlso}{See also}
Resource\+Import\+Map, Resource\+Import\+Dialog (defined in toonz) 
\end{DoxySeeAlso}


\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{class_resource_import_strategy_a9228e0d3cd6478fda1d4abf65d98570b}\label{class_resource_import_strategy_a9228e0d3cd6478fda1d4abf65d98570b}} 
\index{ResourceImportStrategy@{ResourceImportStrategy}!ImportLog@{ImportLog}}
\index{ImportLog@{ImportLog}!ResourceImportStrategy@{ResourceImportStrategy}}
\doxysubsubsection{\texorpdfstring{ImportLog}{ImportLog}}
{\footnotesize\ttfamily typedef std\+::map$<$\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}, \mbox{\hyperlink{class_t_file_path}{TFile\+Path}}$>$ Resource\+Import\+Strategy\+::\+Import\+Log}



\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{class_resource_import_strategy_a83be33477eaba53381d9db791219b0a1}\label{class_resource_import_strategy_a83be33477eaba53381d9db791219b0a1}} 
\doxysubsubsection{\texorpdfstring{anonymous enum}{anonymous enum}}
{\footnotesize\ttfamily anonymous enum}


\begin{DoxyCode}{0}
\DoxyCodeLine{00042 \{ DONT\_IMPORT, IMPORT\_AND\_OVERWRITE, IMPORT\_AND\_RENAME \};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_resource_import_strategy_a3de278918c122ff87f1a488e788da9c0}\label{class_resource_import_strategy_a3de278918c122ff87f1a488e788da9c0}} 
\index{ResourceImportStrategy@{ResourceImportStrategy}!ResourceImportStrategy@{ResourceImportStrategy}}
\index{ResourceImportStrategy@{ResourceImportStrategy}!ResourceImportStrategy@{ResourceImportStrategy}}
\doxysubsubsection{\texorpdfstring{ResourceImportStrategy()}{ResourceImportStrategy()}}
{\footnotesize\ttfamily Resource\+Import\+Strategy\+::\+Resource\+Import\+Strategy (\begin{DoxyParamCaption}\item[{int}]{strategy }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00107     : m\_childFolderEnabled(\textcolor{keyword}{false}), m\_strategy(strategy) \{}
\DoxyCodeLine{00108   setChildFolderEnabled(Preferences::instance()-\/>isSubsceneFolderEnabled());}
\DoxyCodeLine{00109 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_resource_import_strategy_ab84ee9918d64f99ecb452141e7271fd4}\label{class_resource_import_strategy_ab84ee9918d64f99ecb452141e7271fd4}} 
\index{ResourceImportStrategy@{ResourceImportStrategy}!aborted@{aborted}}
\index{aborted@{aborted}!ResourceImportStrategy@{ResourceImportStrategy}}
\doxysubsubsection{\texorpdfstring{aborted()}{aborted()}}
{\footnotesize\ttfamily virtual bool Resource\+Import\+Strategy\+::aborted (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00045 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_resource_import_strategy_aa3aed69133c70383862d00a398183f12}\label{class_resource_import_strategy_aa3aed69133c70383862d00a398183f12}} 
\index{ResourceImportStrategy@{ResourceImportStrategy}!getImportLog@{getImportLog}}
\index{getImportLog@{getImportLog}!ResourceImportStrategy@{ResourceImportStrategy}}
\doxysubsubsection{\texorpdfstring{getImportLog()}{getImportLog()}}
{\footnotesize\ttfamily const Import\+Log \& Resource\+Import\+Strategy\+::get\+Import\+Log (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00055 \{ \textcolor{keywordflow}{return} m\_importLog; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_resource_import_strategy_a0914e62340a927a0a901190c12e88517}\label{class_resource_import_strategy_a0914e62340a927a0a901190c12e88517}} 
\index{ResourceImportStrategy@{ResourceImportStrategy}!isChildFolderEnabled@{isChildFolderEnabled}}
\index{isChildFolderEnabled@{isChildFolderEnabled}!ResourceImportStrategy@{ResourceImportStrategy}}
\doxysubsubsection{\texorpdfstring{isChildFolderEnabled()}{isChildFolderEnabled()}}
{\footnotesize\ttfamily bool Resource\+Import\+Strategy\+::is\+Child\+Folder\+Enabled (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00048 \{ \textcolor{keywordflow}{return} m\_childFolderEnabled; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_resource_import_strategy_a5855a6fe244cee56794ae66006f843ca}\label{class_resource_import_strategy_a5855a6fe244cee56794ae66006f843ca}} 
\index{ResourceImportStrategy@{ResourceImportStrategy}!process@{process}}
\index{process@{process}!ResourceImportStrategy@{ResourceImportStrategy}}
\doxysubsubsection{\texorpdfstring{process()}{process()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Resource\+Import\+Strategy\+::process (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}} $\ast$}]{dst\+Scene,  }\item[{\mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}} $\ast$}]{src\+Scene,  }\item[{\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}]{src\+File }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00115                                                              \{}
\DoxyCodeLine{00116   \mbox{\hyperlink{class_t_file_path}{TFilePath}} srcActualPath = srcScene-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(srcPath);}
\DoxyCodeLine{00117   \textcolor{keywordflow}{if} (!scene-\/>isExternPath(srcActualPath) || m\_strategy == DONT\_IMPORT)}
\DoxyCodeLine{00118     \textcolor{keywordflow}{return} srcPath;}
\DoxyCodeLine{00119 }
\DoxyCodeLine{00120   \mbox{\hyperlink{class_t_file_path}{TFilePath}} dstPath;}
\DoxyCodeLine{00121   \textcolor{keywordflow}{if} (srcPath.getWideString().find(L\textcolor{charliteral}{'+'}) == 0)}
\DoxyCodeLine{00122     dstPath = srcPath;}
\DoxyCodeLine{00123   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00124     dstPath = scene-\/>getImportedLevelPath(srcPath);}
\DoxyCodeLine{00125   \mbox{\hyperlink{class_t_file_path}{TFilePath}} actualDstPath = scene-\/>decodeFilePath(dstPath);}
\DoxyCodeLine{00126   assert(actualDstPath != \mbox{\hyperlink{class_t_file_path}{TFilePath}}());}
\DoxyCodeLine{00127 }
\DoxyCodeLine{00128   \textcolor{keywordflow}{if} (m\_strategy == IMPORT\_AND\_OVERWRITE) \{}
\DoxyCodeLine{00129     \textcolor{comment}{// bool overwritten = false;}}
\DoxyCodeLine{00130     \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(actualDstPath)) \{}
\DoxyCodeLine{00131       TSystem::removeFileOrLevel(actualDstPath);}
\DoxyCodeLine{00132       \textcolor{comment}{//  overwritten = true;}}
\DoxyCodeLine{00133     \}}
\DoxyCodeLine{00134     \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(srcPath))}
\DoxyCodeLine{00135       \mbox{\hyperlink{class_t_xsh_simple_level_a821df490f42bb53d419ed4d3c4b97972}{TXshSimpleLevel::copyFiles}}(actualDstPath, srcPath);}
\DoxyCodeLine{00136 }
\DoxyCodeLine{00137     \textcolor{keywordflow}{return} dstPath;}
\DoxyCodeLine{00138   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_strategy == IMPORT\_AND\_RENAME) \{}
\DoxyCodeLine{00139     std::wstring levelName    = srcPath.getWideName();}
\DoxyCodeLine{00140     \mbox{\hyperlink{class_t_level_set}{TLevelSet}} *parentLevelSet = scene-\/>getLevelSet();}
\DoxyCodeLine{00141     \mbox{\hyperlink{class_name_modifier}{NameModifier}} nm(levelName);}
\DoxyCodeLine{00142     std::wstring newName;}
\DoxyCodeLine{00143     \textcolor{keywordflow}{for} (;;) \{}
\DoxyCodeLine{00144       newName = nm.getNext();}
\DoxyCodeLine{00145       \textcolor{keywordflow}{if} (!parentLevelSet-\/>hasLevel(newName)) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00146     \}}
\DoxyCodeLine{00147 }
\DoxyCodeLine{00148     dstPath       = dstPath.\mbox{\hyperlink{class_t_file_path_a3ebf9ced558cfef97a60bba536b23c6f}{withName}}(newName);}
\DoxyCodeLine{00149     actualDstPath = scene-\/>decodeFilePath(dstPath);}
\DoxyCodeLine{00150 }
\DoxyCodeLine{00151     \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(actualDstPath))}
\DoxyCodeLine{00152       TSystem::removeFileOrLevel(actualDstPath);}
\DoxyCodeLine{00153 }
\DoxyCodeLine{00154     \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(srcActualPath)) \{}
\DoxyCodeLine{00155       \mbox{\hyperlink{class_t_xsh_simple_level_a821df490f42bb53d419ed4d3c4b97972}{TXshSimpleLevel::copyFiles}}(actualDstPath, srcActualPath);}
\DoxyCodeLine{00156     \}}
\DoxyCodeLine{00157     \textcolor{keywordflow}{return} dstPath;}
\DoxyCodeLine{00158   \}}
\DoxyCodeLine{00159   \textcolor{keywordflow}{return} srcPath;}
\DoxyCodeLine{00160 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_resource_import_strategy_ab67914ca222d08b231757672e728adaf}\label{class_resource_import_strategy_ab67914ca222d08b231757672e728adaf}} 
\index{ResourceImportStrategy@{ResourceImportStrategy}!setChildFolderEnabled@{setChildFolderEnabled}}
\index{setChildFolderEnabled@{setChildFolderEnabled}!ResourceImportStrategy@{ResourceImportStrategy}}
\doxysubsubsection{\texorpdfstring{setChildFolderEnabled()}{setChildFolderEnabled()}}
{\footnotesize\ttfamily void Resource\+Import\+Strategy\+::set\+Child\+Folder\+Enabled (\begin{DoxyParamCaption}\item[{bool}]{enabled }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00049 \{ m\_childFolderEnabled = enabled; \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonz/sceneresources.\+h\item 
E\+:/opentoonz/toonz/sources/toonzlib/sceneresources.\+cpp\end{DoxyCompactItemize}
