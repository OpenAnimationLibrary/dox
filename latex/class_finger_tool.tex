\hypertarget{class_finger_tool}{}\doxysection{Finger\+Tool Class Reference}
\label{class_finger_tool}\index{FingerTool@{FingerTool}}
Inheritance diagram for Finger\+Tool\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_finger_tool}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_finger_tool_a5584c85f9a9ce54dc322cdfda29639a1}{draw}} () override
\begin{DoxyCompactList}\small\item\em Draws the tool on the viewer. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_finger_tool_a92aa07511aa4c50d89c86c1be6894d6d}\label{class_finger_tool_a92aa07511aa4c50d89c86c1be6894d6d}} 
void {\bfseries update} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonz\+ImageP}} ti, \mbox{\hyperlink{class_t_rect_t}{TRectD}} area)
\item 
void \mbox{\hyperlink{class_finger_tool_a28497dd6b3ca6b752a1396817c0249da}{update\+Translation}} () override
\item 
void \mbox{\hyperlink{class_finger_tool_a4c18243d71a9fad3583e744892be56a4}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_finger_tool_a181691ceb450d65ce770ad19b3381023}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_finger_tool_abbccaa03de6ba8b54ec7b5e581ce259c}{left\+Button\+Up}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\item 
void \mbox{\hyperlink{class_finger_tool_ae30ae54d4b717e705bf2f76e3bdff1c3}{mouse\+Move}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_finger_tool_ab07fac888b030841c1ae27b9a19df138}{on\+Enter}} () override
\begin{DoxyCompactList}\small\item\em Callback for the mouse entering the viewer area. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_finger_tool_a15c6e8cc8f0ca22630de6d5d9f719fb8}{on\+Leave}} () override
\begin{DoxyCompactList}\small\item\em Callback for the mouse leaving the viewer area. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_finger_tool_a614f12f8de02585c83eb043c729e6885}{on\+Activate}} () override
\begin{DoxyCompactList}\small\item\em Callback invoked whenever the tool activates. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_finger_tool_a8795b380d239114abd1d3b6de8eebea7}{on\+Deactivate}} () override
\begin{DoxyCompactList}\small\item\em Callback for tool deactivation, includes tool switch. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_finger_tool_a2c909888f0dbec8feb09b1bc26ae9daa}{on\+Property\+Changed}} (std\+::string property\+Name) override
\item 
\mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ \mbox{\hyperlink{class_finger_tool_a6d5d364d53855d71f0a0f11667afb525}{get\+Properties}} (int target\+Type) override
\item 
\mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} \mbox{\hyperlink{class_finger_tool_a5ce6d0e6510321afd5e686c1c1a721c8}{get\+Tool\+Type}} () const override
\item 
int \mbox{\hyperlink{class_finger_tool_a99100304e7ea16ce3227e669da65a387}{get\+Cursor\+Id}} () const override
\begin{DoxyCompactList}\small\item\em Returns the type of cursor used by the tool. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_finger_tool_aab139a9d7fc369aa00a81b5b47e88f93}{get\+Color\+Class}} () const
\item 
void \mbox{\hyperlink{class_finger_tool_a5d31ad993515f1edc982f0124e85a8cc}{finish\+Brush}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_finger_tool_a1d416402cf499ba14a2bf39e93215759}\label{class_finger_tool_a1d416402cf499ba14a2bf39e93215759}} 
\index{FingerTool@{FingerTool}!FingerTool@{FingerTool}}
\index{FingerTool@{FingerTool}!FingerTool@{FingerTool}}
\doxysubsubsection{\texorpdfstring{FingerTool()}{FingerTool()}}
{\footnotesize\ttfamily Finger\+Tool\+::\+Finger\+Tool (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00310     : \mbox{\hyperlink{class_t_tool_a9c63ec35f606e755d0d036bf4fed62ab}{TTool}}(\textcolor{stringliteral}{"{}T\_Finger"{}})}
\DoxyCodeLine{00311     , m\_rasterTrack(0)}
\DoxyCodeLine{00312     , m\_pointSize(-\/1)}
\DoxyCodeLine{00313     , m\_selecting(\textcolor{keyword}{false})}
\DoxyCodeLine{00314     , m\_tileSaver(0)}
\DoxyCodeLine{00315     , m\_cursor(ToolCursor::EraserCursor)}
\DoxyCodeLine{00316     , m\_toolSize(\textcolor{stringliteral}{"{}Size:"{}}, 1, 1000, 10, \textcolor{keyword}{false})}
\DoxyCodeLine{00317     , m\_invert(\textcolor{stringliteral}{"{}Invert"{}}, \textcolor{keyword}{false})}
\DoxyCodeLine{00318     , m\_firstTime(\textcolor{keyword}{true})}
\DoxyCodeLine{00319     , m\_workingFrameId(\mbox{\hyperlink{class_t_frame_id}{TFrameId}}()) \{}
\DoxyCodeLine{00320   bind(\mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{TTool::ToonzImage}});}
\DoxyCodeLine{00321 }
\DoxyCodeLine{00322   m\_toolSize.setNonLinearSlider();}
\DoxyCodeLine{00323 }
\DoxyCodeLine{00324   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_toolSize);}
\DoxyCodeLine{00325   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_invert);}
\DoxyCodeLine{00326 }
\DoxyCodeLine{00327   m\_invert.setId(\textcolor{stringliteral}{"{}Invert"{}});}
\DoxyCodeLine{00328 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_finger_tool_a5584c85f9a9ce54dc322cdfda29639a1}\label{class_finger_tool_a5584c85f9a9ce54dc322cdfda29639a1}} 
\index{FingerTool@{FingerTool}!draw@{draw}}
\index{draw@{draw}!FingerTool@{FingerTool}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Finger\+Tool\+::draw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Draws the tool on the viewer. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a058bf656d73bf3cd63b9826cbaaf48e0}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00339                       \{}
\DoxyCodeLine{00340   \textcolor{keywordflow}{if} (m\_pointSize == -\/1) \{}
\DoxyCodeLine{00341     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00342   \}}
\DoxyCodeLine{00343 }
\DoxyCodeLine{00344   \textcolor{comment}{// If toggled off, don't draw brush outline}}
\DoxyCodeLine{00345   \textcolor{keywordflow}{if} (!Preferences::instance()-\/>isCursorOutlineEnabled()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00346 }
\DoxyCodeLine{00347   \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}})\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00348   \textcolor{keywordflow}{if} (!ti) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00349   \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} ras = ti-\/>getRaster();}
\DoxyCodeLine{00350   \textcolor{keywordtype}{int} lx       = ras-\/>getLx();}
\DoxyCodeLine{00351   \textcolor{keywordtype}{int} ly       = ras-\/>getLy();}
\DoxyCodeLine{00352 }
\DoxyCodeLine{00353   \textcolor{keywordflow}{if} ((ToonzCheck::instance()-\/>getChecks() \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876a7ad1deef6a508e60252b818c61ce83e9}{ToonzCheck::eInk}}) ||}
\DoxyCodeLine{00354       (ToonzCheck::instance()-\/>getChecks() \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876a5a4df203cdba2a5eb6f7eba19f9ab62e}{ToonzCheck::ePaint}}))}
\DoxyCodeLine{00355     glColor3d(0.5, 0.8, 0.8);}
\DoxyCodeLine{00356   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00357     glColor3d(1.0, 0.0, 0.0);}
\DoxyCodeLine{00358 }
\DoxyCodeLine{00359   drawEmptyCircle(m\_toolSize.getValue(), m\_mousePos, \textcolor{keyword}{true}, lx \% 2 == 0,}
\DoxyCodeLine{00360                   ly \% 2 == 0);}
\DoxyCodeLine{00361 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00045}{Toonz\+Check\+::e\+Ink}}, \mbox{\hyperlink{l00046}{Toonz\+Check\+::e\+Paint}}, and \mbox{\hyperlink{l00276}{TTool\+::get\+Image()}}.

\mbox{\Hypertarget{class_finger_tool_a5d31ad993515f1edc982f0124e85a8cc}\label{class_finger_tool_a5d31ad993515f1edc982f0124e85a8cc}} 
\index{FingerTool@{FingerTool}!finishBrush@{finishBrush}}
\index{finishBrush@{finishBrush}!FingerTool@{FingerTool}}
\doxysubsubsection{\texorpdfstring{finishBrush()}{finishBrush()}}
{\footnotesize\ttfamily void Finger\+Tool\+::finish\+Brush (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

ドラッグ中にツールが切り替わった場合に備え、on\+Deactivateにも\+Mouse\+Releaseと同じ処理を行う FIdを指定して、作業中にフレームが動いても、 クリック時の\+Fidのサムネイルが更新されるようにする。
\begin{DoxyCode}{0}
\DoxyCodeLine{00510                              \{}
\DoxyCodeLine{00511   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}})\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true})) \{}
\DoxyCodeLine{00512     \textcolor{keywordflow}{if} (m\_rasterTrack) \{}
\DoxyCodeLine{00513       \textcolor{keywordtype}{int} thickness = m\_toolSize.getValue();}
\DoxyCodeLine{00514       m\_rasterTrack-\/>add(\mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(}
\DoxyCodeLine{00515           m\_mousePos + convert(ti-\/>getRaster()-\/>getCenter()), thickness));}
\DoxyCodeLine{00516       m\_tileSaver-\/>save(m\_rasterTrack-\/>getLastRect());}
\DoxyCodeLine{00517       \mbox{\hyperlink{class_t_rect_t}{TRect}} modifiedBbox = m\_rasterTrack-\/>generateLastPieceOfStroke(\textcolor{keyword}{true}, \textcolor{keyword}{true});}
\DoxyCodeLine{00518 }
\DoxyCodeLine{00519       \mbox{\hyperlink{class_t_application}{TTool::Application}} *app   = TTool::getApplication();}
\DoxyCodeLine{00520       \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level          = app-\/>getCurrentLevel()-\/>getLevel();}
\DoxyCodeLine{00521       \mbox{\hyperlink{class_t_smart_pointer_t}{TXshSimpleLevelP}} simLevel = level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{00522 }
\DoxyCodeLine{00523       \mbox{\hyperlink{class_t_frame_id}{TFrameId}} frameId =}
\DoxyCodeLine{00524           m\_workingFrameId.isEmptyFrame() ? \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}() : m\_workingFrameId;}
\DoxyCodeLine{00525 }
\DoxyCodeLine{00526       TUndoManager::manager()-\/>add(\textcolor{keyword}{new} FingerUndo(}
\DoxyCodeLine{00527           m\_tileSaver-\/>getTileSet(), m\_rasterTrack-\/>getPointsSequence(),}
\DoxyCodeLine{00528           m\_rasterTrack-\/>getStyleId(), m\_rasterTrack-\/>isSelective(),}
\DoxyCodeLine{00529           simLevel.getPointer(), frameId));}
\DoxyCodeLine{00530       ToolUtils::updateSaveBox();}
\DoxyCodeLine{00531 }
\DoxyCodeLine{00535       \mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}(frameId);}
\DoxyCodeLine{00536 }
\DoxyCodeLine{00537       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00538       \textcolor{keyword}{delete} m\_rasterTrack;}
\DoxyCodeLine{00539       m\_rasterTrack = 0;}
\DoxyCodeLine{00540       \textcolor{keyword}{delete} m\_tileSaver;}
\DoxyCodeLine{00541 }
\DoxyCodeLine{00542       \textcolor{comment}{/*-\/-\/ 作業中fIdをリセット -\/-\/*/}}
\DoxyCodeLine{00543       m\_workingFrameId = \mbox{\hyperlink{class_t_frame_id}{TFrameId}}();}
\DoxyCodeLine{00544     \}}
\DoxyCodeLine{00545   \}}
\DoxyCodeLine{00546   m\_selecting = \textcolor{keyword}{false};}
\DoxyCodeLine{00547 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00688}{TTool\+::get\+Current\+Fid()}}, \mbox{\hyperlink{l00276}{TTool\+::get\+Image()}}, \mbox{\hyperlink{l00095}{TXsh\+Level\+::get\+Simple\+Level()}}, \mbox{\hyperlink{l00540}{TTool\+::invalidate()}}, and \mbox{\hyperlink{l00609}{TTool\+::notify\+Image\+Changed()}}.



Referenced by \mbox{\hyperlink{l00499}{on\+Deactivate()}}.

\mbox{\Hypertarget{class_finger_tool_aab139a9d7fc369aa00a81b5b47e88f93}\label{class_finger_tool_aab139a9d7fc369aa00a81b5b47e88f93}} 
\index{FingerTool@{FingerTool}!getColorClass@{getColorClass}}
\index{getColorClass@{getColorClass}!FingerTool@{FingerTool}}
\doxysubsubsection{\texorpdfstring{getColorClass()}{getColorClass()}}
{\footnotesize\ttfamily int Finger\+Tool\+::get\+Color\+Class (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00293 \{ \textcolor{keywordflow}{return} 2; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_finger_tool_a99100304e7ea16ce3227e669da65a387}\label{class_finger_tool_a99100304e7ea16ce3227e669da65a387}} 
\index{FingerTool@{FingerTool}!getCursorId@{getCursorId}}
\index{getCursorId@{getCursorId}!FingerTool@{FingerTool}}
\doxysubsubsection{\texorpdfstring{getCursorId()}{getCursorId()}}
{\footnotesize\ttfamily int Finger\+Tool\+::get\+Cursor\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Returns the type of cursor used by the tool. 

\begin{DoxySeeAlso}{See also}
For a list of cursor ids \mbox{\hyperlink{}{cursor.\+h}} 
\end{DoxySeeAlso}


Reimplemented from \mbox{\hyperlink{class_t_tool_a1768a57b8b6d1480618fd923fad15f1d}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00291 \{ \textcolor{keywordflow}{return} m\_cursor; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_finger_tool_a6d5d364d53855d71f0a0f11667afb525}\label{class_finger_tool_a6d5d364d53855d71f0a0f11667afb525}} 
\index{FingerTool@{FingerTool}!getProperties@{getProperties}}
\index{getProperties@{getProperties}!FingerTool@{FingerTool}}
\doxysubsubsection{\texorpdfstring{getProperties()}{getProperties()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ Finger\+Tool\+::get\+Properties (\begin{DoxyParamCaption}\item[{int}]{target\+Type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00289 \{ \textcolor{keywordflow}{return} \&m\_prop; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_finger_tool_a5ce6d0e6510321afd5e686c1c1a721c8}\label{class_finger_tool_a5ce6d0e6510321afd5e686c1c1a721c8}} 
\index{FingerTool@{FingerTool}!getToolType@{getToolType}}
\index{getToolType@{getToolType}!FingerTool@{FingerTool}}
\doxysubsubsection{\texorpdfstring{getToolType()}{getToolType()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} Finger\+Tool\+::get\+Tool\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00290 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca01ffd66b00b05a88c02ce8ceb5da3b8b}{TTool::LevelWriteTool}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_finger_tool_a4c18243d71a9fad3583e744892be56a4}\label{class_finger_tool_a4c18243d71a9fad3583e744892be56a4}} 
\index{FingerTool@{FingerTool}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!FingerTool@{FingerTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily void Finger\+Tool\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00396                                                                         \{}
\DoxyCodeLine{00397   pick(pos);}
\DoxyCodeLine{00398 }
\DoxyCodeLine{00399   m\_selecting = \textcolor{keyword}{true};}
\DoxyCodeLine{00400   \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} image(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}));}
\DoxyCodeLine{00401 }
\DoxyCodeLine{00402   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = image) \{}
\DoxyCodeLine{00403     \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} ras = ti-\/>getRaster();}
\DoxyCodeLine{00404     \textcolor{keywordflow}{if} (ras) \{}
\DoxyCodeLine{00405       \textcolor{keywordtype}{int} thickness = m\_toolSize.getValue();}
\DoxyCodeLine{00406       \textcolor{keywordtype}{int} styleId   = TTool::getApplication()-\/>getCurrentLevelStyleIndex();}
\DoxyCodeLine{00407       \mbox{\hyperlink{class_t_tile_set_c_m32}{TTileSetCM32}} *tileSet = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_tile_set_c_m32}{TTileSetCM32}}(ras-\/>getSize());}
\DoxyCodeLine{00408       m\_tileSaver           = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_tile_saver_c_m32}{TTileSaverCM32}}(ras, tileSet);}
\DoxyCodeLine{00409       m\_rasterTrack         = \textcolor{keyword}{new} \mbox{\hyperlink{class_raster_stroke_generator}{RasterStrokeGenerator}}(}
\DoxyCodeLine{00410           ras, FINGER, INK, styleId,}
\DoxyCodeLine{00411           \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(pos + convert(ras-\/>getCenter()), thickness),}
\DoxyCodeLine{00412           m\_invert.getValue(), 0, \textcolor{keyword}{false}, \textcolor{keyword}{false});}
\DoxyCodeLine{00413 }
\DoxyCodeLine{00414       \textcolor{comment}{/*-\/-\/ 作業中Fidを現在のFIDにする -\/-\/*/}}
\DoxyCodeLine{00415       m\_workingFrameId = getFrameId();}
\DoxyCodeLine{00416 }
\DoxyCodeLine{00417       m\_tileSaver-\/>save(m\_rasterTrack-\/>getLastRect());}
\DoxyCodeLine{00418       \mbox{\hyperlink{class_t_rect_t}{TRect}} modifiedBbox = m\_rasterTrack-\/>generateLastPieceOfStroke(\textcolor{keyword}{true});}
\DoxyCodeLine{00419       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00420     \}}
\DoxyCodeLine{00421   \}}
\DoxyCodeLine{00422 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_finger_tool_a181691ceb450d65ce770ad19b3381023}\label{class_finger_tool_a181691ceb450d65ce770ad19b3381023}} 
\index{FingerTool@{FingerTool}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!FingerTool@{FingerTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Finger\+Tool\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00426                                                                         \{}
\DoxyCodeLine{00427   \textcolor{keywordflow}{if} (!m\_selecting) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00428 }
\DoxyCodeLine{00429   m\_mousePos = pos;}
\DoxyCodeLine{00430   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ri = \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}))) \{}
\DoxyCodeLine{00431     \textcolor{comment}{/*-\/-\/-\/   マウスを動かしながらショートカットで切り替わった場合、}}
\DoxyCodeLine{00432 \textcolor{comment}{                    いきなりleftButtonDragから呼ばれることがあり、}}
\DoxyCodeLine{00433 \textcolor{comment}{                    m\_rasterTrackが無くて落ちることがある。 -\/-\/-\/*/}}
\DoxyCodeLine{00434     \textcolor{keywordflow}{if} (m\_rasterTrack) \{}
\DoxyCodeLine{00435       \textcolor{keywordtype}{int} thickness = m\_toolSize.getValue();}
\DoxyCodeLine{00436       m\_rasterTrack-\/>add(}
\DoxyCodeLine{00437           \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(pos + convert(ri-\/>getRaster()-\/>getCenter()), thickness));}
\DoxyCodeLine{00438       m\_tileSaver-\/>save(m\_rasterTrack-\/>getLastRect());}
\DoxyCodeLine{00439       \mbox{\hyperlink{class_t_rect_t}{TRect}} modifiedBbox = m\_rasterTrack-\/>generateLastPieceOfStroke(\textcolor{keyword}{true});}
\DoxyCodeLine{00440       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00441     \}}
\DoxyCodeLine{00442   \}}
\DoxyCodeLine{00443 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_finger_tool_abbccaa03de6ba8b54ec7b5e581ce259c}\label{class_finger_tool_abbccaa03de6ba8b54ec7b5e581ce259c}} 
\index{FingerTool@{FingerTool}!leftButtonUp@{leftButtonUp}}
\index{leftButtonUp@{leftButtonUp}!FingerTool@{FingerTool}}
\doxysubsubsection{\texorpdfstring{leftButtonUp()}{leftButtonUp()}}
{\footnotesize\ttfamily void Finger\+Tool\+::left\+Button\+Up (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00447                                                                      \{}
\DoxyCodeLine{00448   \textcolor{keywordflow}{if} (!m\_selecting) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00449 }
\DoxyCodeLine{00450   m\_mousePos = pos;}
\DoxyCodeLine{00451 }
\DoxyCodeLine{00452   \mbox{\hyperlink{class_finger_tool_a5d31ad993515f1edc982f0124e85a8cc}{finishBrush}}();}
\DoxyCodeLine{00453 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_finger_tool_ae30ae54d4b717e705bf2f76e3bdff1c3}\label{class_finger_tool_ae30ae54d4b717e705bf2f76e3bdff1c3}} 
\index{FingerTool@{FingerTool}!mouseMove@{mouseMove}}
\index{mouseMove@{mouseMove}!FingerTool@{FingerTool}}
\doxysubsubsection{\texorpdfstring{mouseMove()}{mouseMove()}}
{\footnotesize\ttfamily void Finger\+Tool\+::mouse\+Move (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00457                                                                    \{}
\DoxyCodeLine{00458   m\_mousePos = pos;}
\DoxyCodeLine{00459   \mbox{\hyperlink{class_t_point_t}{TPointD}} pp(tround(pos.x), tround(pos.y));}
\DoxyCodeLine{00460   m\_mousePos = pp;}
\DoxyCodeLine{00461   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00462 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_finger_tool_a614f12f8de02585c83eb043c729e6885}\label{class_finger_tool_a614f12f8de02585c83eb043c729e6885}} 
\index{FingerTool@{FingerTool}!onActivate@{onActivate}}
\index{onActivate@{onActivate}!FingerTool@{FingerTool}}
\doxysubsubsection{\texorpdfstring{onActivate()}{onActivate()}}
{\footnotesize\ttfamily void Finger\+Tool\+::on\+Activate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback invoked whenever the tool activates. 



Reimplemented from \mbox{\hyperlink{class_t_tool_ac286a2681633b4db6106596b4f54e53b}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00495 \{ \mbox{\hyperlink{class_finger_tool_ab07fac888b030841c1ae27b9a19df138}{onEnter}}(); \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00466}{on\+Enter()}}.

\mbox{\Hypertarget{class_finger_tool_a8795b380d239114abd1d3b6de8eebea7}\label{class_finger_tool_a8795b380d239114abd1d3b6de8eebea7}} 
\index{FingerTool@{FingerTool}!onDeactivate@{onDeactivate}}
\index{onDeactivate@{onDeactivate}!FingerTool@{FingerTool}}
\doxysubsubsection{\texorpdfstring{onDeactivate()}{onDeactivate()}}
{\footnotesize\ttfamily void Finger\+Tool\+::on\+Deactivate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for tool deactivation, includes tool switch. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a00fee58728c1e12fb50846f47d7e9f5e}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00499                               \{}
\DoxyCodeLine{00500   \textcolor{comment}{/*-\/-\/-\/}}
\DoxyCodeLine{00501 \textcolor{comment}{   * マウスドラッグ中(m\_selecting=true)にツールが切り替わったときに線を終わらせる}}
\DoxyCodeLine{00502 \textcolor{comment}{   * -\/-\/-\/*/}}
\DoxyCodeLine{00503   \textcolor{keywordflow}{if} (m\_selecting) \mbox{\hyperlink{class_finger_tool_a5d31ad993515f1edc982f0124e85a8cc}{finishBrush}}();}
\DoxyCodeLine{00504 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00510}{finish\+Brush()}}.

\mbox{\Hypertarget{class_finger_tool_ab07fac888b030841c1ae27b9a19df138}\label{class_finger_tool_ab07fac888b030841c1ae27b9a19df138}} 
\index{FingerTool@{FingerTool}!onEnter@{onEnter}}
\index{onEnter@{onEnter}!FingerTool@{FingerTool}}
\doxysubsubsection{\texorpdfstring{onEnter()}{onEnter()}}
{\footnotesize\ttfamily void Finger\+Tool\+::on\+Enter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for the mouse entering the viewer area. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a3e775cfcd05aa3c35048b11fa40ab3e4}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00466                          \{}
\DoxyCodeLine{00467   \textcolor{keywordflow}{if} (m\_firstTime) \{}
\DoxyCodeLine{00468     m\_invert.setValue(FingerInvert ? 1 : 0);}
\DoxyCodeLine{00469     m\_toolSize.setValue(FingerSize);}
\DoxyCodeLine{00470     m\_firstTime = \textcolor{keyword}{false};}
\DoxyCodeLine{00471   \}}
\DoxyCodeLine{00472   \textcolor{keywordtype}{double} x = m\_toolSize.getValue();}
\DoxyCodeLine{00473 }
\DoxyCodeLine{00474   \textcolor{keywordtype}{double} minRange = 1;}
\DoxyCodeLine{00475   \textcolor{keywordtype}{double} maxRange = 100;}
\DoxyCodeLine{00476 }
\DoxyCodeLine{00477   \textcolor{keywordtype}{double} minSize = 0.01;}
\DoxyCodeLine{00478   \textcolor{keywordtype}{double} maxSize = 100;}
\DoxyCodeLine{00479 }
\DoxyCodeLine{00480   m\_pointSize =}
\DoxyCodeLine{00481       (x -\/ minRange) / (maxRange -\/ minRange) * (maxSize -\/ minSize) + minSize;}
\DoxyCodeLine{00482 }
\DoxyCodeLine{00483   \textcolor{keywordflow}{if} ((\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}})\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{false}))}
\DoxyCodeLine{00484     m\_cursor = ToolCursor::PenCursor;}
\DoxyCodeLine{00485   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00486     m\_cursor = ToolCursor::CURSOR\_NO;}
\DoxyCodeLine{00487 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00276}{TTool\+::get\+Image()}}.



Referenced by \mbox{\hyperlink{l00495}{on\+Activate()}}.

\mbox{\Hypertarget{class_finger_tool_a15c6e8cc8f0ca22630de6d5d9f719fb8}\label{class_finger_tool_a15c6e8cc8f0ca22630de6d5d9f719fb8}} 
\index{FingerTool@{FingerTool}!onLeave@{onLeave}}
\index{onLeave@{onLeave}!FingerTool@{FingerTool}}
\doxysubsubsection{\texorpdfstring{onLeave()}{onLeave()}}
{\footnotesize\ttfamily void Finger\+Tool\+::on\+Leave (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for the mouse leaving the viewer area. 



Reimplemented from \mbox{\hyperlink{class_t_tool_af7fb05265a94131da081da654e271a22}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00491 \{ m\_pointSize = -\/1; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_finger_tool_a2c909888f0dbec8feb09b1bc26ae9daa}\label{class_finger_tool_a2c909888f0dbec8feb09b1bc26ae9daa}} 
\index{FingerTool@{FingerTool}!onPropertyChanged@{onPropertyChanged}}
\index{onPropertyChanged@{onPropertyChanged}!FingerTool@{FingerTool}}
\doxysubsubsection{\texorpdfstring{onPropertyChanged()}{onPropertyChanged()}}
{\footnotesize\ttfamily bool Finger\+Tool\+::on\+Property\+Changed (\begin{DoxyParamCaption}\item[{std\+::string}]{property\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

\begin{DoxyVerb} Does the tasks associated to changes in \p propertyName and returns \p
\end{DoxyVerb}
 true; Does the tasks associated to changes in {\ttfamily property\+Name} and returns {\ttfamily true}. 

Reimplemented from \mbox{\hyperlink{class_t_tool_a06694e0586f807c34b18e16341aa9ee2}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00369                                                          \{}
\DoxyCodeLine{00370   \textcolor{comment}{/*-\/-\/ サイズ -\/-\/*/}}
\DoxyCodeLine{00371   \textcolor{keywordflow}{if} (propertyName == m\_toolSize.getName()) \{}
\DoxyCodeLine{00372     FingerSize = m\_toolSize.getValue();}
\DoxyCodeLine{00373     \textcolor{keywordtype}{double} x   = m\_toolSize.getValue();}
\DoxyCodeLine{00374 }
\DoxyCodeLine{00375     \textcolor{keywordtype}{double} minRange = 1;}
\DoxyCodeLine{00376     \textcolor{keywordtype}{double} maxRange = 100;}
\DoxyCodeLine{00377 }
\DoxyCodeLine{00378     \textcolor{keywordtype}{double} minSize = 0.01;}
\DoxyCodeLine{00379     \textcolor{keywordtype}{double} maxSize = 100;}
\DoxyCodeLine{00380 }
\DoxyCodeLine{00381     m\_pointSize =}
\DoxyCodeLine{00382         (x -\/ minRange) / (maxRange -\/ minRange) * (maxSize -\/ minSize) + minSize;}
\DoxyCodeLine{00383     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00384   \}}
\DoxyCodeLine{00385 }
\DoxyCodeLine{00386   \textcolor{comment}{// Invert}}
\DoxyCodeLine{00387   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == m\_invert.getName()) \{}
\DoxyCodeLine{00388     FingerInvert = (int)(m\_invert.getValue());}
\DoxyCodeLine{00389   \}}
\DoxyCodeLine{00390 }
\DoxyCodeLine{00391   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00392 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00540}{TTool\+::invalidate()}}.

\mbox{\Hypertarget{class_finger_tool_a28497dd6b3ca6b752a1396817c0249da}\label{class_finger_tool_a28497dd6b3ca6b752a1396817c0249da}} 
\index{FingerTool@{FingerTool}!updateTranslation@{updateTranslation}}
\index{updateTranslation@{updateTranslation}!FingerTool@{FingerTool}}
\doxysubsubsection{\texorpdfstring{updateTranslation()}{updateTranslation()}}
{\footnotesize\ttfamily void Finger\+Tool\+::update\+Translation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00332                                    \{}
\DoxyCodeLine{00333   m\_toolSize.setQStringName(tr(\textcolor{stringliteral}{"{}Size:"{}}));}
\DoxyCodeLine{00334   m\_invert.setQStringName(tr(\textcolor{stringliteral}{"{}Invert"{}}, NULL));}
\DoxyCodeLine{00335 \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/fingertool.\+cpp\end{DoxyCompactItemize}
