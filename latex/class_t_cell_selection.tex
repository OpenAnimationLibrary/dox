\hypertarget{class_t_cell_selection}{}\doxysection{TCell\+Selection Class Reference}
\label{class_t_cell_selection}\index{TCellSelection@{TCellSelection}}
Inheritance diagram for TCell\+Selection\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_t_cell_selection}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_t_cell_selection_1_1_range}{Range}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_cell_selection_a9d2ab1f33dabcdbe924bbc721072b879}{TCell\+Selection}} (\mbox{\hyperlink{class_t_cell_selection_1_1_range}{Range}} range)
\item 
void \mbox{\hyperlink{class_t_cell_selection_a0fb469da53c008b3229691dbb5c92b01}{enable\+Commands}} () override
\item 
bool \mbox{\hyperlink{class_t_cell_selection_a7bbcaba5c770178d498c0de9275cb61f}{is\+Empty}} () const override
\item 
void \mbox{\hyperlink{class_t_cell_selection_a2f408d0a134c5d6797fdaa3b6bb1de86}{copy\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a245377ce303009f1b513a8e1d9fec3ad}{paste\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a688e865defd984b3c93f41a4e2ccf58d}{paste\+Duplicate\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a23a0e44803438bf751d0b12a12c75bdf}{delete\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a58a24fdd6598f6611f32b65014fbb6ff}{cut\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a2838782d907fb76cf88cf9ba2bae7528}{cut\+Cells}} (bool without\+Copy)
\item 
void \mbox{\hyperlink{class_t_cell_selection_aa2f689b09a8e79f317418f0d794eeb42}{over\+Write\+Paste\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a898442459597a445ce2fe1c5ae8eff2b}{overwrite\+Paste\+Numbers}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_ac081c8305a9b9269fbf82eb0c9e06bc3}{select\+Cells}} (int r0, int c0, int r1, int c1)
\item 
void \mbox{\hyperlink{class_t_cell_selection_a613da84aef1e8b3ad8ae3ddeff389eb9}{select\+Cell}} (int row, int col)
\item 
void \mbox{\hyperlink{class_t_cell_selection_a31f52d1d3468973f75c1a1af06919afb}{select\+None}} () override
\item 
void \mbox{\hyperlink{class_t_cell_selection_ac71dc0f74133a03c5fa877ac5cd99ea4}{get\+Selected\+Cells}} (int \&r0, int \&c0, int \&r1, int \&c1) const
\item 
\mbox{\hyperlink{class_t_cell_selection_1_1_range}{Range}} \mbox{\hyperlink{class_t_cell_selection_add1b4099fbcd03886b8cf4a655a576b5}{get\+Selected\+Cells}} () const
\item 
bool \mbox{\hyperlink{class_t_cell_selection_aacffab5e5b3bae471c625ba02d193a98}{is\+Cell\+Selected}} (int r, int c) const
\item 
bool \mbox{\hyperlink{class_t_cell_selection_a324da514411ef5709fc13c54ca43e84c}{is\+Row\+Selected}} (int row) const
\item 
bool \mbox{\hyperlink{class_t_cell_selection_a206daf2e833c7d024868ef471287e79b}{is\+Col\+Selected}} (int col) const
\item 
bool \mbox{\hyperlink{class_t_cell_selection_af1d318e7b0b72067a58d77319d04602d}{are\+All\+Col\+Selected\+Locked}} () const
\item 
bool \mbox{\hyperlink{class_t_cell_selection_a82d768820c37fad2a3bfd5a8010231d6}{are\+Only\+Vector\+Cells\+Selected}} ()
\item 
\mbox{\hyperlink{class_t_xsh_simple_level}{TXsh\+Simple\+Level}} $\ast$ \mbox{\hyperlink{class_t_cell_selection_ab0b6b54919b03fa6acafa49a114bfd87}{get\+New\+Toonz\+Raster\+Level}} (\mbox{\hyperlink{class_t_xsh_simple_level}{TXsh\+Simple\+Level}} $\ast$sl)
\item 
void \mbox{\hyperlink{class_t_cell_selection_aff1258f4c8bcd3e529d8a0ff219c238c}{reverse\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a24a10369fcbb5f3423fc5f1f7b3cba7c}{swing\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_afb78e86efba836e0489cd24b3a7dcb49}{increment\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a98381ae4476289dea228d19b53115529}{random\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a8dd63bccc570eea22282ddcedc20d864}{step\+Cells}} (int count)
\item 
void \mbox{\hyperlink{class_t_cell_selection_a18c47f1430a80a954b818c7b1ea9a494}{each\+Cells}} (int count)
\item 
void \mbox{\hyperlink{class_t_cell_selection_a188d56ef90f3b1e312e2b857c4034d64}{reset\+Step\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_af3f1d077f7e167f2c55c922ed4fc058e}{increase\+Step\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_aa1c61a3a78a7d014ddf8530d6191d6a1}{decrease\+Step\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a72a51581dfa83726172e2e448c0d6579}{step2\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_aafb2d648c0b9fcb87609563070653d29}{step3\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a6839e6c45c02e97813dae3138b28fbbd}{step4\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a8565e77d934802650db62fea8012c945}{each2\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a5166d4eaa0e496af48ae13f63140f0bf}{each3\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a0e04d22154f1258fd9e245e4f1e5fe01}{each4\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_afed38e75d75b4bd08a9d0907d7820ba7}{rollup\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a86d6137066fe92526a7dee1b95235e43}{rolldown\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a96ad35820aeb9367d5a78e0a5b63ae88}{set\+Keyframes}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_acac9d336f4b6af609e33e45b4e45964a}{paste\+Keyframes\+Into}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a3a42a00974fc4733b222ccaa9254a9c8}{shift\+Keyframes}} (int direction)
\item 
void \mbox{\hyperlink{class_t_cell_selection_aece067f963d7a8f4cef2e10b86d8f95f}{shift\+Keyframes\+Up}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_ab49555cbb2732fe17fe1fb92f3f5baea}{shift\+Keyframes\+Down}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a5a9239f3ebb9b3ca1129d02ccd62bce8}{clone\+Level}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a956fdff4d3d0795de5d8dee3cdd772dc}{insert\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a0b0664e13d46bea2ffbd0a662430d217}{open\+Time\+Stretch\+Popup}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a2a0958598bed19540500a08a57c46bcb}{d\+Renumber\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_abeb9c37dc25ea593302deaafb6db613a}{d\+Paste\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a1516975fd55d2312a017ff727cf58fa4}{reframe\+Cells}} (int count)
\item 
void \mbox{\hyperlink{class_t_cell_selection_a22a1f894d869220650cc172cb98a8a70}{reframe1\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_abc36b5c70732153d91d1c5420c272ead}{reframe2\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a739ac44b553b650fc5fb990115c99880}{reframe3\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a350770a07a0501b39a89459e74775938}{reframe4\+Cells}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a379d83b38ebac9e0bbb0c4eebaebcbbe}{convert\+To\+Toonz\+Raster}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a93f20a24f17fcbd1e196ebf9da9e3e43}{convert\+Vectorto\+Vector}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a23038086029dbe1b597374caf36ed131}{reframe\+With\+Empty\+Inbetweens}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_a3a05f20da7ef1cf0b712e518c0e905a4}{duplicate\+Frame}} (int row, int col, bool multiple)
\item 
void \mbox{\hyperlink{class_t_cell_selection_af5f4305ad5dda7d2123a09207fae83ec}{duplicate\+Frames}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_aebb087261219a290dcaf543794117fb1}{rename\+Cells}} (\mbox{\hyperlink{class_t_xsh_cell}{TXsh\+Cell}} \&cell)
\item 
void \mbox{\hyperlink{class_t_cell_selection_a8135ef40aa2100dad165b0d169422cfc}{rename\+Multi\+Cells}} (QList$<$ \mbox{\hyperlink{class_t_xsh_cell}{TXsh\+Cell}} $>$ \&cells)
\item 
void \mbox{\hyperlink{class_t_cell_selection_a54b4c79743df003944acf3f3a5ebcad0}{create\+Blank\+Drawing}} (int row, int col, bool in\+Range)
\item 
void \mbox{\hyperlink{class_t_cell_selection_abd7f9db12e0c3a9548bfbc272ab889cf}{create\+Blank\+Drawings}} ()
\item 
void \mbox{\hyperlink{class_t_cell_selection_aa5e93192e78245346e947495d6dc99e6}{fill\+Empty\+Cell}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static bool \mbox{\hyperlink{class_t_cell_selection_a3b6f7895cfeb7e3e585eb03de6b69cad}{is\+Enabled\+Command}} (std\+::string command\+Id)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_cell_selection_a101108ac2a260b675c2a9f3987ec0f25}\label{class_t_cell_selection_a101108ac2a260b675c2a9f3987ec0f25}} 
\index{TCellSelection@{TCellSelection}!TCellSelection@{TCellSelection}}
\index{TCellSelection@{TCellSelection}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{TCellSelection()}{TCellSelection()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily TCell\+Selection\+::\+TCell\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01413 : m\_timeStretchPopup(0), m\_reframePopup(0) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a9d2ab1f33dabcdbe924bbc721072b879}\label{class_t_cell_selection_a9d2ab1f33dabcdbe924bbc721072b879}} 
\index{TCellSelection@{TCellSelection}!TCellSelection@{TCellSelection}}
\index{TCellSelection@{TCellSelection}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{TCellSelection()}{TCellSelection()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily TCell\+Selection\+::\+TCell\+Selection (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_cell_selection_1_1_range}{Range}}}]{range }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00039 : m\_range(range) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a0f17d731c787009e2e008d478223df24}\label{class_t_cell_selection_a0f17d731c787009e2e008d478223df24}} 
\index{TCellSelection@{TCellSelection}!````~TCellSelection@{$\sim$TCellSelection}}
\index{````~TCellSelection@{$\sim$TCellSelection}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{$\sim$TCellSelection()}{~TCellSelection()}}
{\footnotesize\ttfamily TCell\+Selection\+::$\sim$\+TCell\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01417 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_cell_selection_af1d318e7b0b72067a58d77319d04602d}\label{class_t_cell_selection_af1d318e7b0b72067a58d77319d04602d}} 
\index{TCellSelection@{TCellSelection}!areAllColSelectedLocked@{areAllColSelectedLocked}}
\index{areAllColSelectedLocked@{areAllColSelectedLocked}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{areAllColSelectedLocked()}{areAllColSelectedLocked()}}
{\footnotesize\ttfamily bool TCell\+Selection\+::are\+All\+Col\+Selected\+Locked (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{01598                                                    \{}
\DoxyCodeLine{01599   \textcolor{keywordtype}{int} c;}
\DoxyCodeLine{01600   \textcolor{keywordflow}{for} (c = m\_range.m\_c0; c <= m\_range.m\_c1; c++) \{}
\DoxyCodeLine{01601     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh       = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{01602     \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(c);}
\DoxyCodeLine{01603     \textcolor{keywordflow}{if} (column \&\& !xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(c)-\/>\mbox{\hyperlink{class_t_xsh_column_a04953896aae8860ace46010956a28db9}{isLocked}}()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01604   \}}
\DoxyCodeLine{01605   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01606 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a82d768820c37fad2a3bfd5a8010231d6}\label{class_t_cell_selection_a82d768820c37fad2a3bfd5a8010231d6}} 
\index{TCellSelection@{TCellSelection}!areOnlyVectorCellsSelected@{areOnlyVectorCellsSelected}}
\index{areOnlyVectorCellsSelected@{areOnlyVectorCellsSelected}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{areOnlyVectorCellsSelected()}{areOnlyVectorCellsSelected()}}
{\footnotesize\ttfamily bool TCell\+Selection\+::are\+Only\+Vector\+Cells\+Selected (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{03305                                                 \{}
\DoxyCodeLine{03306   \textcolor{comment}{// set up basics}}
\DoxyCodeLine{03307   \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{03308   getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{03309   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{03310   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{03311   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh      = scene-\/>\mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}();}
\DoxyCodeLine{03312 }
\DoxyCodeLine{03313   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} firstCell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r0, c0);}
\DoxyCodeLine{03314   \textcolor{keywordflow}{if} (firstCell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \{}
\DoxyCodeLine{03315     DVGui::error(QObject::tr(\textcolor{stringliteral}{"{}This command only works on vector cells."{}}));}
\DoxyCodeLine{03316     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{03317   \}}
\DoxyCodeLine{03318 }
\DoxyCodeLine{03319   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sourceSl = firstCell.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{03320   \textcolor{keywordflow}{if} (!sourceSl || sourceSl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() != PLI\_XSHLEVEL) \{}
\DoxyCodeLine{03321     DVGui::error(QObject::tr(\textcolor{stringliteral}{"{}This command only works on vector cells."{}}));}
\DoxyCodeLine{03322     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{03323   \}}
\DoxyCodeLine{03324 }
\DoxyCodeLine{03325   \textcolor{keywordflow}{if} (c0 != c1) \{}
\DoxyCodeLine{03326     DVGui::error(}
\DoxyCodeLine{03327         QObject::tr(\textcolor{stringliteral}{"{}Please select only one column for this command."{}}));}
\DoxyCodeLine{03328     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{03329   \}}
\DoxyCodeLine{03330 }
\DoxyCodeLine{03331   \textcolor{keywordflow}{for} (i = r0; i <= r1; i++) \{}
\DoxyCodeLine{03332     \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} testCell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(i, c0);}
\DoxyCodeLine{03333     \textcolor{keywordflow}{if} (testCell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}() || testCell.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}() != sourceSl) \{}
\DoxyCodeLine{03334       DVGui::error(}
\DoxyCodeLine{03335           QObject::tr(\textcolor{stringliteral}{"{}All selected cells must belong to the same level."{}}));}
\DoxyCodeLine{03336       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{03337     \}}
\DoxyCodeLine{03338   \}}
\DoxyCodeLine{03339   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{03340 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a5a9239f3ebb9b3ca1129d02ccd62bce8}\label{class_t_cell_selection_a5a9239f3ebb9b3ca1129d02ccd62bce8}} 
\index{TCellSelection@{TCellSelection}!cloneLevel@{cloneLevel}}
\index{cloneLevel@{cloneLevel}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{cloneLevel()}{cloneLevel()}}
{\footnotesize\ttfamily void TCell\+Selection\+::clone\+Level (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01677                                 \{}
\DoxyCodeLine{01678   std::unique\_ptr<CloneLevelUndo> undo(\textcolor{keyword}{new} CloneLevelUndo(m\_range));}
\DoxyCodeLine{01679 }
\DoxyCodeLine{01680   \textcolor{keywordflow}{if} (undo-\/>redo(), undo-\/>m\_ok) TUndoManager::manager()-\/>add(undo.release());}
\DoxyCodeLine{01681 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a379d83b38ebac9e0bbb0c4eebaebcbbe}\label{class_t_cell_selection_a379d83b38ebac9e0bbb0c4eebaebcbbe}} 
\index{TCellSelection@{TCellSelection}!convertToToonzRaster@{convertToToonzRaster}}
\index{convertToToonzRaster@{convertToToonzRaster}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{convertToToonzRaster()}{convertToToonzRaster()}}
{\footnotesize\ttfamily void TCell\+Selection\+::convert\+To\+Toonz\+Raster (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{03434                                           \{}
\DoxyCodeLine{03435   \textcolor{comment}{// set up basics}}
\DoxyCodeLine{03436   \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{03437   getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{03438 }
\DoxyCodeLine{03439   \mbox{\hyperlink{class_t_app}{TApp}} *app = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}();}
\DoxyCodeLine{03440   \textcolor{keywordtype}{int} row   = app-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}()-\/>getFrame();}
\DoxyCodeLine{03441   \textcolor{keywordtype}{int} col   = app-\/>\mbox{\hyperlink{class_t_app_a1e294e7cff300851d12a8c3d196943f6}{getCurrentColumn}}()-\/>getColumnIndex();}
\DoxyCodeLine{03442   \textcolor{keywordtype}{int} i, j;}
\DoxyCodeLine{03443 }
\DoxyCodeLine{03444   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{03445   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh      = scene-\/>\mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}();}
\DoxyCodeLine{03446 }
\DoxyCodeLine{03447   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} firstCell        = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r0, c0);}
\DoxyCodeLine{03448   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sourceSl = firstCell.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{03449 }
\DoxyCodeLine{03450   \textcolor{keywordflow}{if} (!areOnlyVectorCellsSelected()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03451 }
\DoxyCodeLine{03452   \textcolor{comment}{// set up new level}}
\DoxyCodeLine{03453   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = getNewToonzRasterLevel(sourceSl);}
\DoxyCodeLine{03454 }
\DoxyCodeLine{03455   \textcolor{comment}{// get camera settings}}
\DoxyCodeLine{03456   \mbox{\hyperlink{class_t_camera}{TCamera}} *camera = app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}();}
\DoxyCodeLine{03457   \textcolor{keywordtype}{double} dpi      = camera-\/>\mbox{\hyperlink{class_t_camera_adf45510b5dc53f6481308ef489fbd5a9}{getDpi}}().x;}
\DoxyCodeLine{03458   \textcolor{keywordtype}{int} xres        = camera-\/>\mbox{\hyperlink{class_t_camera_a9a7c573e7a2c397ffae4b747809ea2a5}{getRes}}().lx;}
\DoxyCodeLine{03459   \textcolor{keywordtype}{int} yres        = camera-\/>\mbox{\hyperlink{class_t_camera_a9a7c573e7a2c397ffae4b747809ea2a5}{getRes}}().ly;}
\DoxyCodeLine{03460 }
\DoxyCodeLine{03461   assert(sl);}
\DoxyCodeLine{03462 }
\DoxyCodeLine{03463   sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_aef6e555a773c2f69d2089dc9c009f8be}{setDpiPolicy}}(LevelProperties::DP\_ImageDpi);}
\DoxyCodeLine{03464   sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_abdaea012fce05b1617350a174790f473}{setDpi}}(dpi);}
\DoxyCodeLine{03465   sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a62b744354e8acc21f75e19fec84bbe6c}{setImageDpi}}(\mbox{\hyperlink{class_t_point_t}{TPointD}}(dpi, dpi));}
\DoxyCodeLine{03466   sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a9dd72acd3e3fd85e3d44c6b44a8f9ff4}{setImageRes}}(\mbox{\hyperlink{class_t_dimension_t}{TDimension}}(xres, yres));}
\DoxyCodeLine{03467 }
\DoxyCodeLine{03468   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} frameId = firstCell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}();}
\DoxyCodeLine{03469   std::set<TFrameId> frameIdsSet;}
\DoxyCodeLine{03470   std::vector<TFrameId> frameIds;}
\DoxyCodeLine{03471   frameIds.push\_back(frameId);}
\DoxyCodeLine{03472   \textcolor{keywordflow}{for} (i = r0 + 1; i <= r1; i++) \{}
\DoxyCodeLine{03473     \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} newCell    = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(i, c0);}
\DoxyCodeLine{03474     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} newFrameId = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(i, c0).\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}();}
\DoxyCodeLine{03475     \textcolor{keywordflow}{if} (newCell.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}() == sourceSl) \{}
\DoxyCodeLine{03476       \textcolor{keywordflow}{if} (std::find(frameIds.begin(), frameIds.end(), newCell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}()) ==}
\DoxyCodeLine{03477           frameIds.end()) \{}
\DoxyCodeLine{03478         frameIds.push\_back(newFrameId);}
\DoxyCodeLine{03479       \}}
\DoxyCodeLine{03480     \}}
\DoxyCodeLine{03481   \}}
\DoxyCodeLine{03482 }
\DoxyCodeLine{03483   \textcolor{keywordtype}{int} totalImages = frameIds.size();}
\DoxyCodeLine{03484   \textcolor{keywordflow}{for} (i = 0; i < totalImages; i++) \{}
\DoxyCodeLine{03485     frameIdsSet.insert(frameIds[i]);}
\DoxyCodeLine{03486   \}}
\DoxyCodeLine{03487 }
\DoxyCodeLine{03488   \mbox{\hyperlink{class_drawing_data}{DrawingData}} *data = \textcolor{keyword}{new} \mbox{\hyperlink{class_drawing_data}{DrawingData}}();}
\DoxyCodeLine{03489   data-\/>setLevelFrames(sourceSl, frameIdsSet);}
\DoxyCodeLine{03490 }
\DoxyCodeLine{03491   \textcolor{comment}{// This is where the copying actually happens}}
\DoxyCodeLine{03492   std::set<TFrameId> newFrameIds;}
\DoxyCodeLine{03493   \textcolor{keywordflow}{for} (i = 0; i < totalImages; i++) \{}
\DoxyCodeLine{03494     \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} raster(xres, yres);}
\DoxyCodeLine{03495     raster-\/>fill(\mbox{\hyperlink{class_t_pixel_c_m32}{TPixelCM32}}());}
\DoxyCodeLine{03496     \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} firstImage(raster, \mbox{\hyperlink{class_t_rect_t}{TRect}}());}
\DoxyCodeLine{03497     firstImage-\/>setDpi(dpi, dpi);}
\DoxyCodeLine{03498     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} newFrameId = \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(i + 1);}
\DoxyCodeLine{03499     sl-\/>setFrame(newFrameId, firstImage);}
\DoxyCodeLine{03500     newFrameIds.insert(newFrameId);}
\DoxyCodeLine{03501     firstImage-\/>setSavebox(\mbox{\hyperlink{class_t_rect_t}{TRect}}(0, 0, xres -\/ 1, yres -\/ 1));}
\DoxyCodeLine{03502   \}}
\DoxyCodeLine{03503 }
\DoxyCodeLine{03504   \textcolor{keywordtype}{bool} keepOriginalPalette;}
\DoxyCodeLine{03505   \textcolor{keywordtype}{bool} success = data-\/>getLevelFrames(}
\DoxyCodeLine{03506       sl, newFrameIds, DrawingData::OVER\_SELECTION, \textcolor{keyword}{true}, keepOriginalPalette,}
\DoxyCodeLine{03507       \textcolor{keyword}{true});  \textcolor{comment}{// setting is redo = true skips the}}
\DoxyCodeLine{03508               \textcolor{comment}{// question about the palette}}
\DoxyCodeLine{03509   std::vector<TFrameId> newFids;}
\DoxyCodeLine{03510   sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{getFids}}(newFids);}
\DoxyCodeLine{03511 }
\DoxyCodeLine{03512   \textcolor{comment}{// make a new column}}
\DoxyCodeLine{03513   col += 1;}
\DoxyCodeLine{03514   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a1e294e7cff300851d12a8c3d196943f6}{getCurrentColumn}}()-\/>setColumnIndex(col);}
\DoxyCodeLine{03515   xsh-\/>\mbox{\hyperlink{class_t_xsheet_a5ea42662e27e52ef36ce77b4a5d8e06c}{insertColumn}}(col);}
\DoxyCodeLine{03516 }
\DoxyCodeLine{03517   \mbox{\hyperlink{class_create_level_undo}{CreateLevelUndo}} *undo = \textcolor{keyword}{new} \mbox{\hyperlink{class_create_level_undo}{CreateLevelUndo}}(row, col, totalImages, 1, \textcolor{keyword}{true});}
\DoxyCodeLine{03518   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{03519 }
\DoxyCodeLine{03520   \textcolor{comment}{// expose the new frames in the column}}
\DoxyCodeLine{03521   \textcolor{keywordflow}{for} (i = 0; i < totalImages; i++) \{}
\DoxyCodeLine{03522     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = r0; k <= r1; k++) \{}
\DoxyCodeLine{03523       \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} oldCell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(k, c0);}
\DoxyCodeLine{03524       \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} newCell(sl, newFids[i]);}
\DoxyCodeLine{03525       \textcolor{keywordflow}{if} (oldCell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}() == frameIds[i]) \{}
\DoxyCodeLine{03526         xsh-\/>setCell(k, col, newCell);}
\DoxyCodeLine{03527       \}}
\DoxyCodeLine{03528     \}}
\DoxyCodeLine{03529   \}}
\DoxyCodeLine{03530 }
\DoxyCodeLine{03531   invalidateIcons(sl, newFrameIds);}
\DoxyCodeLine{03532   sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a5ceff3b4f997fbe62be18948fc893404}{save}}(sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}(), \mbox{\hyperlink{class_t_file_path}{TFilePath}}(), \textcolor{keyword}{true});}
\DoxyCodeLine{03533 }
\DoxyCodeLine{03534   DvDirModel::instance()-\/>refreshFolder(sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}().\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}());}
\DoxyCodeLine{03535 }
\DoxyCodeLine{03536   undo-\/>onAdd(sl);}
\DoxyCodeLine{03537 }
\DoxyCodeLine{03538   app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>notifySceneChanged();}
\DoxyCodeLine{03539   app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>notifyCastChange();}
\DoxyCodeLine{03540   app-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{03541 }
\DoxyCodeLine{03542   app-\/>\mbox{\hyperlink{class_t_app_ad70b447aff489792cfc3dbac7150a540}{getCurrentTool}}()-\/>onImageChanged(}
\DoxyCodeLine{03543       (\mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1}{TImage::Type}})app-\/>\mbox{\hyperlink{class_t_app_a45713935f77f415f7bff62db71f2adbe}{getCurrentImageType}}());}
\DoxyCodeLine{03544 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a93f20a24f17fcbd1e196ebf9da9e3e43}\label{class_t_cell_selection_a93f20a24f17fcbd1e196ebf9da9e3e43}} 
\index{TCellSelection@{TCellSelection}!convertVectortoVector@{convertVectortoVector}}
\index{convertVectortoVector@{convertVectortoVector}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{convertVectortoVector()}{convertVectortoVector()}}
{\footnotesize\ttfamily void TCell\+Selection\+::convert\+Vectorto\+Vector (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{03549                                            \{}
\DoxyCodeLine{03550   \textcolor{comment}{// set up basics}}
\DoxyCodeLine{03551   \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{03552   getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{03553 }
\DoxyCodeLine{03554   \mbox{\hyperlink{class_t_app}{TApp}} *app = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}();}
\DoxyCodeLine{03555   \textcolor{keywordtype}{int} row   = app-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}()-\/>getFrame();}
\DoxyCodeLine{03556   \textcolor{keywordtype}{int} col   = app-\/>\mbox{\hyperlink{class_t_app_a1e294e7cff300851d12a8c3d196943f6}{getCurrentColumn}}()-\/>getColumnIndex();}
\DoxyCodeLine{03557   \textcolor{keywordtype}{int} i, j;}
\DoxyCodeLine{03558 }
\DoxyCodeLine{03559   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{03560   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh      = scene-\/>\mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}();}
\DoxyCodeLine{03561 }
\DoxyCodeLine{03562   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} firstCell        = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r0, c0);}
\DoxyCodeLine{03563   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sourceSl = firstCell.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{03564   \textcolor{keywordflow}{if} (!areOnlyVectorCellsSelected()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03565 }
\DoxyCodeLine{03566   \textcolor{comment}{// set up new level name}}
\DoxyCodeLine{03567   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = getNewToonzRasterLevel(sourceSl);}
\DoxyCodeLine{03568   assert(sl);}
\DoxyCodeLine{03569 }
\DoxyCodeLine{03570   \textcolor{comment}{// get camera settings}}
\DoxyCodeLine{03571   \mbox{\hyperlink{class_t_camera}{TCamera}} *camera = app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}();}
\DoxyCodeLine{03572   \textcolor{keywordtype}{double} dpi      = camera-\/>\mbox{\hyperlink{class_t_camera_adf45510b5dc53f6481308ef489fbd5a9}{getDpi}}().x;}
\DoxyCodeLine{03573   \textcolor{keywordtype}{int} xres        = camera-\/>\mbox{\hyperlink{class_t_camera_a9a7c573e7a2c397ffae4b747809ea2a5}{getRes}}().lx;}
\DoxyCodeLine{03574   \textcolor{keywordtype}{int} yres        = camera-\/>\mbox{\hyperlink{class_t_camera_a9a7c573e7a2c397ffae4b747809ea2a5}{getRes}}().ly;}
\DoxyCodeLine{03575 }
\DoxyCodeLine{03576   \textcolor{keywordflow}{if} (Preferences::instance()-\/>getUseHigherDpiOnVectorSimplify()) \{}
\DoxyCodeLine{03577     dpi *= 2;}
\DoxyCodeLine{03578     xres *= 2;}
\DoxyCodeLine{03579     yres *= 2;}
\DoxyCodeLine{03580   \}}
\DoxyCodeLine{03581 }
\DoxyCodeLine{03582   sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_aef6e555a773c2f69d2089dc9c009f8be}{setDpiPolicy}}(LevelProperties::DP\_ImageDpi);}
\DoxyCodeLine{03583   sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_abdaea012fce05b1617350a174790f473}{setDpi}}(dpi);}
\DoxyCodeLine{03584   sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a62b744354e8acc21f75e19fec84bbe6c}{setImageDpi}}(\mbox{\hyperlink{class_t_point_t}{TPointD}}(dpi, dpi));}
\DoxyCodeLine{03585   sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a9dd72acd3e3fd85e3d44c6b44a8f9ff4}{setImageRes}}(\mbox{\hyperlink{class_t_dimension_t}{TDimension}}(xres, yres));}
\DoxyCodeLine{03586 }
\DoxyCodeLine{03587   \textcolor{comment}{// Get the used FrameIds and images}}
\DoxyCodeLine{03588   \textcolor{comment}{// The cloned images are used in the undo.}}
\DoxyCodeLine{03589   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} frameId = firstCell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}();}
\DoxyCodeLine{03590   std::set<TFrameId> frameIdsSet;}
\DoxyCodeLine{03591   std::vector<TFrameId> frameIds;}
\DoxyCodeLine{03592   std::vector<TImageP> oldImages;}
\DoxyCodeLine{03593   frameIds.push\_back(frameId);}
\DoxyCodeLine{03594   oldImages.push\_back(firstCell.\mbox{\hyperlink{class_t_xsh_cell_a20b623d308bc09b820ec6b116516f564}{getImage}}(\textcolor{keyword}{false}).getPointer()-\/>\mbox{\hyperlink{class_t_image_a3632b96b398057030a4adfe6917d2e28}{cloneImage}}());}
\DoxyCodeLine{03595   \textcolor{keywordflow}{for} (i = r0 + 1; i <= r1; i++) \{}
\DoxyCodeLine{03596     \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} newCell    = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(i, c0);}
\DoxyCodeLine{03597     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} newFrameId = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(i, c0).\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}();}
\DoxyCodeLine{03598     \textcolor{keywordflow}{if} (newCell.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}() == sourceSl) \{}
\DoxyCodeLine{03599       \textcolor{keywordflow}{if} (std::find(frameIds.begin(), frameIds.end(), newCell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}()) ==}
\DoxyCodeLine{03600           frameIds.end()) \{}
\DoxyCodeLine{03601         frameIds.push\_back(newFrameId);}
\DoxyCodeLine{03602         oldImages.push\_back(newCell.\mbox{\hyperlink{class_t_xsh_cell_a20b623d308bc09b820ec6b116516f564}{getImage}}(\textcolor{keyword}{false})-\/>\mbox{\hyperlink{class_t_image_a3632b96b398057030a4adfe6917d2e28}{cloneImage}}());}
\DoxyCodeLine{03603       \}}
\DoxyCodeLine{03604     \}}
\DoxyCodeLine{03605   \}}
\DoxyCodeLine{03606 }
\DoxyCodeLine{03607   \textcolor{keywordtype}{int} totalImages = frameIds.size();}
\DoxyCodeLine{03608 }
\DoxyCodeLine{03609   \textcolor{keywordflow}{for} (i = 0; i < totalImages; i++) \{}
\DoxyCodeLine{03610     frameIdsSet.insert(frameIds[i]);}
\DoxyCodeLine{03611   \}}
\DoxyCodeLine{03612 }
\DoxyCodeLine{03613   \mbox{\hyperlink{class_drawing_data}{DrawingData}} *data = \textcolor{keyword}{new} \mbox{\hyperlink{class_drawing_data}{DrawingData}}();}
\DoxyCodeLine{03614   data-\/>setLevelFrames(sourceSl, frameIdsSet);}
\DoxyCodeLine{03615 }
\DoxyCodeLine{03616   \textcolor{comment}{// Make empty frames for the new data}}
\DoxyCodeLine{03617   std::set<TFrameId> newFrameIds;}
\DoxyCodeLine{03618   \textcolor{keywordflow}{for} (i = 0; i < totalImages; i++) \{}
\DoxyCodeLine{03619     \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} raster(xres, yres);}
\DoxyCodeLine{03620     raster-\/>fill(\mbox{\hyperlink{class_t_pixel_c_m32}{TPixelCM32}}());}
\DoxyCodeLine{03621     \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} firstImage(raster, \mbox{\hyperlink{class_t_rect_t}{TRect}}());}
\DoxyCodeLine{03622     firstImage-\/>setDpi(dpi, dpi);}
\DoxyCodeLine{03623     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} newFrameId = \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(i + 1);}
\DoxyCodeLine{03624     sl-\/>setFrame(newFrameId, firstImage);}
\DoxyCodeLine{03625     newFrameIds.insert(newFrameId);}
\DoxyCodeLine{03626     firstImage-\/>setSavebox(\mbox{\hyperlink{class_t_rect_t}{TRect}}(0, 0, xres -\/ 1, yres -\/ 1));}
\DoxyCodeLine{03627   \}}
\DoxyCodeLine{03628 }
\DoxyCodeLine{03629   \textcolor{comment}{// This is where the copying actually happens}}
\DoxyCodeLine{03630   \textcolor{comment}{// copy old frames to Toonz Raster}}
\DoxyCodeLine{03631   \textcolor{keywordtype}{bool} keepOriginalPalette;}
\DoxyCodeLine{03632   \textcolor{keywordtype}{bool} success = data-\/>getLevelFrames(}
\DoxyCodeLine{03633       sl, newFrameIds, DrawingData::OVER\_SELECTION, \textcolor{keyword}{true}, keepOriginalPalette,}
\DoxyCodeLine{03634       \textcolor{keyword}{true});  \textcolor{comment}{// setting is redo = true skips the}}
\DoxyCodeLine{03635               \textcolor{comment}{// question about the palette}}
\DoxyCodeLine{03636               \textcolor{comment}{// get the new FrameIds}}
\DoxyCodeLine{03637   std::vector<TFrameId> newFids;}
\DoxyCodeLine{03638   sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{getFids}}(newFids);}
\DoxyCodeLine{03639 }
\DoxyCodeLine{03640   \textcolor{comment}{// copy the Toonz Raster frames onto the old level}}
\DoxyCodeLine{03641   data-\/>clear();}
\DoxyCodeLine{03642   data-\/>setLevelFrames(sl, newFrameIds);}
\DoxyCodeLine{03643   \textcolor{keywordflow}{if} (Preferences::instance()-\/>getKeepFillOnVectorSimplify())}
\DoxyCodeLine{03644     data-\/>setKeepVectorFills(\textcolor{keyword}{true});}
\DoxyCodeLine{03645   success = data-\/>getLevelFrames(}
\DoxyCodeLine{03646       sourceSl, frameIdsSet, DrawingData::OVER\_SELECTION, \textcolor{keyword}{true},}
\DoxyCodeLine{03647       keepOriginalPalette, \textcolor{keyword}{true});  \textcolor{comment}{// setting is redo = true skips the}}
\DoxyCodeLine{03648                                    \textcolor{comment}{// question about the palette}}
\DoxyCodeLine{03649 }
\DoxyCodeLine{03650   \textcolor{comment}{// get clones of the new images for undo}}
\DoxyCodeLine{03651   std::vector<TImageP> newImages;}
\DoxyCodeLine{03652   \textcolor{keywordflow}{for} (i = 0; i < totalImages; i++) \{}
\DoxyCodeLine{03653     newImages.push\_back(sourceSl-\/>getFrame(frameIds[i], \textcolor{keyword}{false})-\/>\mbox{\hyperlink{class_t_image_a3632b96b398057030a4adfe6917d2e28}{cloneImage}}());}
\DoxyCodeLine{03654   \}}
\DoxyCodeLine{03655 }
\DoxyCodeLine{03656   \mbox{\hyperlink{class_hook_set}{HookSet}} *oldLevelHooks = \textcolor{keyword}{new} \mbox{\hyperlink{class_hook_set}{HookSet}}();}
\DoxyCodeLine{03657   *oldLevelHooks         = *sourceSl-\/>\mbox{\hyperlink{class_t_xsh_level_a6e1f2998c39699adbe9133f87109a104}{getHookSet}}();}
\DoxyCodeLine{03658 }
\DoxyCodeLine{03659   TUndoManager::manager()-\/>add(\textcolor{keyword}{new} \mbox{\hyperlink{class_vector_to_vector_undo}{VectorToVectorUndo}}(}
\DoxyCodeLine{03660       sourceSl, frameIds, oldImages, newImages, oldLevelHooks));}
\DoxyCodeLine{03661 }
\DoxyCodeLine{03662   invalidateIcons(sourceSl, frameIdsSet);}
\DoxyCodeLine{03663 }
\DoxyCodeLine{03664   \textcolor{comment}{// remove the toonz raster level}}
\DoxyCodeLine{03665   sl-\/>clearFrames();}
\DoxyCodeLine{03666   app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_ac1a8bf0d2cec4f59c87b0001991264b5}{getLevelSet}}()-\/>removeLevel(sl, \textcolor{keyword}{true});}
\DoxyCodeLine{03667 }
\DoxyCodeLine{03668   app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>notifySceneChanged();}
\DoxyCodeLine{03669   app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>notifyCastChange();}
\DoxyCodeLine{03670   app-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{03671 }
\DoxyCodeLine{03672   app-\/>\mbox{\hyperlink{class_t_app_ad70b447aff489792cfc3dbac7150a540}{getCurrentTool}}()-\/>onImageChanged(}
\DoxyCodeLine{03673       (\mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1}{TImage::Type}})app-\/>\mbox{\hyperlink{class_t_app_a45713935f77f415f7bff62db71f2adbe}{getCurrentImageType}}());}
\DoxyCodeLine{03674 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a2f408d0a134c5d6797fdaa3b6bb1de86}\label{class_t_cell_selection_a2f408d0a134c5d6797fdaa3b6bb1de86}} 
\index{TCellSelection@{TCellSelection}!copyCells@{copyCells}}
\index{copyCells@{copyCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{copyCells()}{copyCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::copy\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01610                                \{}
\DoxyCodeLine{01611   \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{01612   getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{01613   \textcolor{keywordflow}{if} (isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01614   copyCellsWithoutUndo(r0, c0, r1, c1);}
\DoxyCodeLine{01615 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a54b4c79743df003944acf3f3a5ebcad0}\label{class_t_cell_selection_a54b4c79743df003944acf3f3a5ebcad0}} 
\index{TCellSelection@{TCellSelection}!createBlankDrawing@{createBlankDrawing}}
\index{createBlankDrawing@{createBlankDrawing}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{createBlankDrawing()}{createBlankDrawing()}}
{\footnotesize\ttfamily void TCell\+Selection\+::create\+Blank\+Drawing (\begin{DoxyParamCaption}\item[{int}]{row,  }\item[{int}]{col,  }\item[{bool}]{in\+Range }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02391                                                                        \{}
\DoxyCodeLine{02392   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{02393 }
\DoxyCodeLine{02394   \textcolor{keywordflow}{if} (col < 0) \{}
\DoxyCodeLine{02395     \textcolor{keywordflow}{if} (!multiple)}
\DoxyCodeLine{02396       DVGui::warning(}
\DoxyCodeLine{02397           QObject::tr(\textcolor{stringliteral}{"{}Unable to create a blank drawing on the camera column"{}}));}
\DoxyCodeLine{02398     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02399   \}}
\DoxyCodeLine{02400 }
\DoxyCodeLine{02401   \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(col);}
\DoxyCodeLine{02402   \textcolor{keywordflow}{if} (column \&\& column-\/>isLocked()) \{}
\DoxyCodeLine{02403     \textcolor{keywordflow}{if} (!multiple) DVGui::warning(QObject::tr(\textcolor{stringliteral}{"{}The current column is locked"{}}));}
\DoxyCodeLine{02404     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02405   \}}
\DoxyCodeLine{02406 }
\DoxyCodeLine{02407   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a1e294e7cff300851d12a8c3d196943f6}{getCurrentColumn}}()-\/>setColumnIndex(col);}
\DoxyCodeLine{02408   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}()-\/>setCurrentFrame(row + 1);}
\DoxyCodeLine{02409 }
\DoxyCodeLine{02410   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getLevel();}
\DoxyCodeLine{02411   \textcolor{keywordflow}{if} (!level \&\& Preferences::instance()-\/>isAutoCreateEnabled() \&\&}
\DoxyCodeLine{02412       Preferences::instance()-\/>isAnimationSheetEnabled()) \{}
\DoxyCodeLine{02413     \textcolor{keywordtype}{int} r0, r1;}
\DoxyCodeLine{02414     xsh-\/>\mbox{\hyperlink{class_t_xsheet_a26850469fb0f2886b717479050c32be2}{getCellRange}}(col, r0, r1);}
\DoxyCodeLine{02415     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} r = std::min(r1, row); r > r0; r-\/-\/) \{}
\DoxyCodeLine{02416       \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r, col);}
\DoxyCodeLine{02417       \textcolor{keywordflow}{if} (cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02418       level = cell.m\_level.getPointer();}
\DoxyCodeLine{02419       \textcolor{keywordflow}{if} (!level) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02420       \textcolor{keywordflow}{break};}
\DoxyCodeLine{02421     \}}
\DoxyCodeLine{02422   \}}
\DoxyCodeLine{02423   \textcolor{keywordflow}{if} (level) \{}
\DoxyCodeLine{02424     \textcolor{keywordtype}{int} levelType = level-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}();}
\DoxyCodeLine{02425     \textcolor{keywordflow}{if} (levelType == ZERARYFX\_XSHLEVEL || levelType == PLT\_XSHLEVEL ||}
\DoxyCodeLine{02426         levelType == SND\_XSHLEVEL || levelType == SND\_TXT\_XSHLEVEL ||}
\DoxyCodeLine{02427         levelType == MESH\_XSHLEVEL) \{}
\DoxyCodeLine{02428       \textcolor{keywordflow}{if} (!multiple)}
\DoxyCodeLine{02429         DVGui::warning(}
\DoxyCodeLine{02430             QObject::tr(\textcolor{stringliteral}{"{}Cannot create a blank drawing on the current column"{}}));}
\DoxyCodeLine{02431       \textcolor{keywordflow}{return};}
\DoxyCodeLine{02432     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}() \&\&}
\DoxyCodeLine{02433                level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}()-\/>isReadOnly()) \{}
\DoxyCodeLine{02434       \textcolor{keywordflow}{if} (!multiple)}
\DoxyCodeLine{02435         DVGui::warning(QObject::tr(\textcolor{stringliteral}{"{}The current level is not editable"{}}));}
\DoxyCodeLine{02436       \textcolor{keywordflow}{return};}
\DoxyCodeLine{02437     \}}
\DoxyCodeLine{02438   \}}
\DoxyCodeLine{02439 }
\DoxyCodeLine{02440   \mbox{\hyperlink{class_tool_handle}{ToolHandle}} *toolHandle = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad70b447aff489792cfc3dbac7150a540}{getCurrentTool}}();}
\DoxyCodeLine{02441 }
\DoxyCodeLine{02442   \textcolor{comment}{// If autocreate disabled, let's turn it on temporarily}}
\DoxyCodeLine{02443   \textcolor{keywordtype}{bool} isAutoCreateEnabled = Preferences::instance()-\/>isAutoCreateEnabled();}
\DoxyCodeLine{02444   \textcolor{keywordflow}{if} (!isAutoCreateEnabled)}
\DoxyCodeLine{02445     Preferences::instance()-\/>setValue(EnableAutocreation, \textcolor{keyword}{true}, \textcolor{keyword}{false});}
\DoxyCodeLine{02446   \textcolor{comment}{// Enable inserting in the hold cells temporarily too.}}
\DoxyCodeLine{02447   \textcolor{keywordtype}{bool} isCreationInHoldCellsEnabled =}
\DoxyCodeLine{02448       Preferences::instance()-\/>isCreationInHoldCellsEnabled();}
\DoxyCodeLine{02449   \textcolor{keywordflow}{if} (!isCreationInHoldCellsEnabled)}
\DoxyCodeLine{02450     Preferences::instance()-\/>setValue(EnableCreationInHoldCells, \textcolor{keyword}{true}, \textcolor{keyword}{false});}
\DoxyCodeLine{02451 }
\DoxyCodeLine{02452   \mbox{\hyperlink{class_t_image}{TImage}} *img = toolHandle-\/>getTool()-\/>\mbox{\hyperlink{class_t_tool_a668ac4790094a864ba6e37bd902303f1}{touchImage}}();}
\DoxyCodeLine{02453 }
\DoxyCodeLine{02454   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell       = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col);}
\DoxyCodeLine{02455   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = cell.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{02456 }
\DoxyCodeLine{02457   \textcolor{keywordflow}{if} (!img || !sl) \{}
\DoxyCodeLine{02458     \textcolor{keywordflow}{if} (!isAutoCreateEnabled)}
\DoxyCodeLine{02459       Preferences::instance()-\/>setValue(EnableAutocreation, \textcolor{keyword}{false}, \textcolor{keyword}{false});}
\DoxyCodeLine{02460     \textcolor{keywordflow}{if} (!isCreationInHoldCellsEnabled)}
\DoxyCodeLine{02461       Preferences::instance()-\/>setValue(EnableCreationInHoldCells, \textcolor{keyword}{false},}
\DoxyCodeLine{02462                                         \textcolor{keyword}{false});}
\DoxyCodeLine{02463     \textcolor{keywordflow}{if} (!multiple)}
\DoxyCodeLine{02464       DVGui::warning(QObject::tr(}
\DoxyCodeLine{02465           \textcolor{stringliteral}{"{}Unable to create a blank drawing on the current column"{}}));}
\DoxyCodeLine{02466     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02467   \}}
\DoxyCodeLine{02468 }
\DoxyCodeLine{02469   \textcolor{keywordflow}{if} (!toolHandle-\/>getTool()-\/>\mbox{\hyperlink{class_t_tool_aabd06af7335f1ba0c96f36f1ac3e9976}{m\_isFrameCreated}}) \{}
\DoxyCodeLine{02470     \textcolor{keywordflow}{if} (!isAutoCreateEnabled)}
\DoxyCodeLine{02471       Preferences::instance()-\/>setValue(EnableAutocreation, \textcolor{keyword}{false}, \textcolor{keyword}{false});}
\DoxyCodeLine{02472     \textcolor{keywordflow}{if} (!isCreationInHoldCellsEnabled)}
\DoxyCodeLine{02473       Preferences::instance()-\/>setValue(EnableCreationInHoldCells, \textcolor{keyword}{false},}
\DoxyCodeLine{02474                                         \textcolor{keyword}{false});}
\DoxyCodeLine{02475     \textcolor{keywordflow}{if} (!multiple)}
\DoxyCodeLine{02476       DVGui::warning(QObject::tr(}
\DoxyCodeLine{02477           \textcolor{stringliteral}{"{}Unable to replace the current drawing with a blank drawing"{}}));}
\DoxyCodeLine{02478     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02479   \}}
\DoxyCodeLine{02480 }
\DoxyCodeLine{02481   sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a2d43337766628739707849f8808bf300}{setDirtyFlag}}(\textcolor{keyword}{true});}
\DoxyCodeLine{02482 }
\DoxyCodeLine{02483   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}();}
\DoxyCodeLine{02484   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} frame    = cell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}();}
\DoxyCodeLine{02485 }
\DoxyCodeLine{02486   CreateBlankDrawingUndo *undo = \textcolor{keyword}{new} CreateBlankDrawingUndo(}
\DoxyCodeLine{02487       sl, frame, toolHandle-\/>getTool()-\/>\mbox{\hyperlink{class_t_tool_afec1db61477579b224321fd469e4ec00}{m\_isLevelCreated}}, palette);}
\DoxyCodeLine{02488   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{02489 }
\DoxyCodeLine{02490   IconGenerator::instance()-\/>invalidate(sl, frame);}
\DoxyCodeLine{02491 }
\DoxyCodeLine{02492   \textcolor{comment}{// Reset back to what these were}}
\DoxyCodeLine{02493   \textcolor{keywordflow}{if} (!isAutoCreateEnabled)}
\DoxyCodeLine{02494     Preferences::instance()-\/>setValue(EnableAutocreation, \textcolor{keyword}{false}, \textcolor{keyword}{false});}
\DoxyCodeLine{02495   \textcolor{keywordflow}{if} (!isCreationInHoldCellsEnabled)}
\DoxyCodeLine{02496     Preferences::instance()-\/>setValue(EnableCreationInHoldCells, \textcolor{keyword}{false}, \textcolor{keyword}{false});}
\DoxyCodeLine{02497 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_abd7f9db12e0c3a9548bfbc272ab889cf}\label{class_t_cell_selection_abd7f9db12e0c3a9548bfbc272ab889cf}} 
\index{TCellSelection@{TCellSelection}!createBlankDrawings@{createBlankDrawings}}
\index{createBlankDrawings@{createBlankDrawings}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{createBlankDrawings()}{createBlankDrawings()}}
{\footnotesize\ttfamily void TCell\+Selection\+::create\+Blank\+Drawings (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02501                                          \{}
\DoxyCodeLine{02502   \textcolor{keywordtype}{int} col = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a1e294e7cff300851d12a8c3d196943f6}{getCurrentColumn}}()-\/>getColumnIndex();}
\DoxyCodeLine{02503   \textcolor{keywordtype}{int} row = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}()-\/>getFrameIndex();}
\DoxyCodeLine{02504 }
\DoxyCodeLine{02505   \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{02506   getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{02507 }
\DoxyCodeLine{02508   \textcolor{keywordtype}{bool} multiple = (r1 -\/ r0 > 1) || (c1 -\/ c0 > 1);}
\DoxyCodeLine{02509 }
\DoxyCodeLine{02510   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{02511   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} c = c0; c <= c1; c++) \{}
\DoxyCodeLine{02512     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} r = r0; r <= r1; r++) \{}
\DoxyCodeLine{02513       createBlankDrawing(r, c, multiple);}
\DoxyCodeLine{02514     \}}
\DoxyCodeLine{02515   \}}
\DoxyCodeLine{02516   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{02517 }
\DoxyCodeLine{02518   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a1e294e7cff300851d12a8c3d196943f6}{getCurrentColumn}}()-\/>setColumnIndex(col);}
\DoxyCodeLine{02519   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}()-\/>setCurrentFrame(row + 1);}
\DoxyCodeLine{02520 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a58a24fdd6598f6611f32b65014fbb6ff}\label{class_t_cell_selection_a58a24fdd6598f6611f32b65014fbb6ff}} 
\index{TCellSelection@{TCellSelection}!cutCells@{cutCells}}
\index{cutCells@{cutCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{cutCells()}{cutCells()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void TCell\+Selection\+::cut\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02295 \{ cutCells(\textcolor{keyword}{false}); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a2838782d907fb76cf88cf9ba2bae7528}\label{class_t_cell_selection_a2838782d907fb76cf88cf9ba2bae7528}} 
\index{TCellSelection@{TCellSelection}!cutCells@{cutCells}}
\index{cutCells@{cutCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{cutCells()}{cutCells()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void TCell\+Selection\+::cut\+Cells (\begin{DoxyParamCaption}\item[{bool}]{without\+Copy }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02299                                               \{}
\DoxyCodeLine{02300   \textcolor{keywordflow}{if} (isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02301 }
\DoxyCodeLine{02302   CutCellsUndo *undo = \textcolor{keyword}{new} CutCellsUndo(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_cell_selection}{TCellSelection}}(m\_range));}
\DoxyCodeLine{02303 }
\DoxyCodeLine{02304   \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{02305   getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{02306   \textcolor{keywordflow}{if} (c0 < 0) c0 = 0;  \textcolor{comment}{// Ignore camera column}}
\DoxyCodeLine{02307 }
\DoxyCodeLine{02308   std::set<int> removedColIds;}
\DoxyCodeLine{02309   \textcolor{comment}{// check if the operation may remove expression reference as column becomes}}
\DoxyCodeLine{02310   \textcolor{comment}{// empty and deleted after the operation.}}
\DoxyCodeLine{02311   \textcolor{keywordflow}{if} (!checkColumnRemoval(r0, c0, r1, c1, removedColIds)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02312 }
\DoxyCodeLine{02313   undo-\/>setCurrentData(r0, c0, r1, c1);}
\DoxyCodeLine{02314   \textcolor{keywordflow}{if} (!withoutCopy) copyCellsWithoutUndo(r0, c0, r1, c1);}
\DoxyCodeLine{02315 }
\DoxyCodeLine{02316   \textcolor{comment}{// clear empty column}}
\DoxyCodeLine{02317   \textcolor{keywordflow}{if} (!removedColIds.empty()) \{}
\DoxyCodeLine{02318     TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{02319     \textcolor{comment}{// remove, then insert empty column}}
\DoxyCodeLine{02320     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} colId : removedColIds) \{}
\DoxyCodeLine{02321       ColumnCmd::deleteColumn(colId, \textcolor{keyword}{true});}
\DoxyCodeLine{02322       ColumnCmd::insertEmptyColumn(colId);}
\DoxyCodeLine{02323     \}}
\DoxyCodeLine{02324   \}}
\DoxyCodeLine{02325 }
\DoxyCodeLine{02326   cutCellsWithoutUndo(r0, c0, r1, c1);}
\DoxyCodeLine{02327 }
\DoxyCodeLine{02328   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{02329 }
\DoxyCodeLine{02330   \textcolor{keywordflow}{if} (!removedColIds.empty()) \{}
\DoxyCodeLine{02331     TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{02332   \}}
\DoxyCodeLine{02333 }
\DoxyCodeLine{02334   \textcolor{comment}{// cutCellsWithoutUndo will clear the selection, so select cells again}}
\DoxyCodeLine{02335   \textcolor{keywordflow}{if} (Preferences::instance()-\/>isUseArrowKeyToShiftCellSelectionEnabled()) \{}
\DoxyCodeLine{02336     \mbox{\hyperlink{class_t_cell_selection_ac081c8305a9b9269fbf82eb0c9e06bc3}{selectCells}}(r0, c0, r1, c1);}
\DoxyCodeLine{02337     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>notifySelectionChanged();}
\DoxyCodeLine{02338   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{02339     selectNone();}
\DoxyCodeLine{02340 }
\DoxyCodeLine{02341   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{02342 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_aa1c61a3a78a7d014ddf8530d6191d6a1}\label{class_t_cell_selection_aa1c61a3a78a7d014ddf8530d6191d6a1}} 
\index{TCellSelection@{TCellSelection}!decreaseStepCells@{decreaseStepCells}}
\index{decreaseStepCells@{decreaseStepCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{decreaseStepCells()}{decreaseStepCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::decrease\+Step\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01108                                        \{}
\DoxyCodeLine{01109   \textcolor{keywordflow}{if} (isEmpty()) \{}
\DoxyCodeLine{01110     \textcolor{keywordtype}{int} row = TTool::getApplication()-\/>getCurrentFrame()-\/>getFrame();}
\DoxyCodeLine{01111     \textcolor{keywordtype}{int} col = TTool::getApplication()-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{01112     \textcolor{keywordtype}{int} r1  = row;}
\DoxyCodeLine{01113     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{01114     \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell;}
\DoxyCodeLine{01115     \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} nextCell;}
\DoxyCodeLine{01116     \textcolor{keywordtype}{bool} sameCells = \textcolor{keyword}{true};}
\DoxyCodeLine{01117     cell           = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col);}
\DoxyCodeLine{01118     \textcolor{keywordflow}{if} (cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01119 }
\DoxyCodeLine{01120     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; sameCells; i++) \{}
\DoxyCodeLine{01121       nextCell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row + i, col);}
\DoxyCodeLine{01122       \textcolor{keywordflow}{if} (nextCell.m\_frameId == cell.m\_frameId \&\&}
\DoxyCodeLine{01123           nextCell.m\_level == cell.m\_level) \{}
\DoxyCodeLine{01124         r1 = row + i;}
\DoxyCodeLine{01125       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01126         sameCells = \textcolor{keyword}{false};}
\DoxyCodeLine{01127     \}}
\DoxyCodeLine{01128     m\_range.m\_r0 = row;}
\DoxyCodeLine{01129     m\_range.m\_r1 = r1;}
\DoxyCodeLine{01130     m\_range.m\_c0 = col;}
\DoxyCodeLine{01131     m\_range.m\_c1 = col;}
\DoxyCodeLine{01132     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>notifySelectionChanged();}
\DoxyCodeLine{01133   \}}
\DoxyCodeLine{01134   DecreaseStepUndo *undo = \textcolor{keyword}{new} DecreaseStepUndo(m\_range.m\_r0, m\_range.m\_c0,}
\DoxyCodeLine{01135                                                 m\_range.m\_r1, m\_range.m\_c1);}
\DoxyCodeLine{01136   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{01137 }
\DoxyCodeLine{01138   undo-\/>redo();}
\DoxyCodeLine{01139 }
\DoxyCodeLine{01140   \textcolor{keywordflow}{if} (undo-\/>m\_newR1 != m\_range.m\_r1) \{}
\DoxyCodeLine{01141     m\_range.m\_r1 = undo-\/>m\_newR1;}
\DoxyCodeLine{01142     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>notifySelectionChanged();}
\DoxyCodeLine{01143   \}}
\DoxyCodeLine{01144 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a23a0e44803438bf751d0b12a12c75bdf}\label{class_t_cell_selection_a23a0e44803438bf751d0b12a12c75bdf}} 
\index{TCellSelection@{TCellSelection}!deleteCells@{deleteCells}}
\index{deleteCells@{deleteCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{deleteCells()}{deleteCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::delete\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02244                                  \{}
\DoxyCodeLine{02245   \textcolor{keywordflow}{if} (isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02246   \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{02247   getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{02248   \textcolor{keywordflow}{if} (c0 < 0) c0 = 0;  \textcolor{comment}{// Ignore camera column}}
\DoxyCodeLine{02249   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{02250   \textcolor{comment}{// if all the selected cells are already empty, then do nothing}}
\DoxyCodeLine{02251   \textcolor{keywordflow}{if} (xsh-\/>\mbox{\hyperlink{class_t_xsheet_a5f295ab0d739ace0e7755748a5dcea69}{isRectEmpty}}(\mbox{\hyperlink{class_cell_position}{CellPosition}}(r0, c0), \mbox{\hyperlink{class_cell_position}{CellPosition}}(r1, c1))) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02252 }
\DoxyCodeLine{02253   std::set<int> removedColIds;}
\DoxyCodeLine{02254   \textcolor{comment}{// check if the operation may remove expression reference as column becomes}}
\DoxyCodeLine{02255   \textcolor{comment}{// empty and deleted after the operation.}}
\DoxyCodeLine{02256   \textcolor{keywordflow}{if} (!checkColumnRemoval(r0, c0, r1, c1, removedColIds)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02257 }
\DoxyCodeLine{02258   \mbox{\hyperlink{class_t_cell_data}{TCellData}} *data = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_cell_data}{TCellData}}();}
\DoxyCodeLine{02259   data-\/>setCells(xsh, r0, c0, r1, c1);}
\DoxyCodeLine{02260 }
\DoxyCodeLine{02261   \textcolor{comment}{// clear empty column}}
\DoxyCodeLine{02262   \textcolor{keywordflow}{if} (!removedColIds.empty()) \{}
\DoxyCodeLine{02263     TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{02264     \textcolor{comment}{// remove, then insert empty column}}
\DoxyCodeLine{02265     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} colId : removedColIds) \{}
\DoxyCodeLine{02266       ColumnCmd::deleteColumn(colId, \textcolor{keyword}{true});}
\DoxyCodeLine{02267       ColumnCmd::insertEmptyColumn(colId);}
\DoxyCodeLine{02268     \}}
\DoxyCodeLine{02269   \}}
\DoxyCodeLine{02270 }
\DoxyCodeLine{02271   DeleteCellsUndo *undo =}
\DoxyCodeLine{02272       \textcolor{keyword}{new} DeleteCellsUndo(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_cell_selection}{TCellSelection}}(m\_range), data);}
\DoxyCodeLine{02273 }
\DoxyCodeLine{02274   deleteCellsWithoutUndo(r0, c0, r1, c1);}
\DoxyCodeLine{02275 }
\DoxyCodeLine{02276   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{02277 }
\DoxyCodeLine{02278   \textcolor{keywordflow}{if} (!removedColIds.empty()) \{}
\DoxyCodeLine{02279     TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{02280   \}}
\DoxyCodeLine{02281 }
\DoxyCodeLine{02282   \textcolor{comment}{// emit selectionChanged() signal so that the rename field will update}}
\DoxyCodeLine{02283   \textcolor{comment}{// accordingly}}
\DoxyCodeLine{02284   \textcolor{keywordflow}{if} (Preferences::instance()-\/>isUseArrowKeyToShiftCellSelectionEnabled())}
\DoxyCodeLine{02285     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>notifySelectionChanged();}
\DoxyCodeLine{02286   \textcolor{keywordflow}{else}}
\DoxyCodeLine{02287     selectNone();}
\DoxyCodeLine{02288 }
\DoxyCodeLine{02289   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{02290   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{02291 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_abeb9c37dc25ea593302deaafb6db613a}\label{class_t_cell_selection_abeb9c37dc25ea593302deaafb6db613a}} 
\index{TCellSelection@{TCellSelection}!dPasteCells@{dPasteCells}}
\index{dPasteCells@{dPasteCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{dPasteCells()}{dPasteCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::d\+Paste\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02950                                  \{}
\DoxyCodeLine{02951   \textcolor{keywordflow}{if} (isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02952   \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{02953   getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{02954   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{02955   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh              = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{02956   QClipboard *clipboard     = QApplication::clipboard();}
\DoxyCodeLine{02957   \textcolor{keyword}{const} QMimeData *mimeData = clipboard-\/>mimeData();}
\DoxyCodeLine{02958   \textcolor{keywordflow}{if} (DYNAMIC\_CAST(\mbox{\hyperlink{class_t_cell_data}{TCellData}}, cellData, mimeData)) \{}
\DoxyCodeLine{02959     \textcolor{keywordflow}{if} (!cellData-\/>canChange(xsh, c0)) \{}
\DoxyCodeLine{02960       TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{02961       \textcolor{keywordflow}{return};}
\DoxyCodeLine{02962     \}}
\DoxyCodeLine{02963     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} c = 0; c < cellData-\/>getColCount(); c++) \{}
\DoxyCodeLine{02964       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} r = 0; r < cellData-\/>getRowCount(); r++) \{}
\DoxyCodeLine{02965         \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} src = cellData-\/>getCell(r, c);}
\DoxyCodeLine{02966         \textcolor{keywordflow}{if} (src.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}())}
\DoxyCodeLine{02967           createNewDrawing(xsh, r0 + r, c0 + c,}
\DoxyCodeLine{02968                            src.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}()-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}());}
\DoxyCodeLine{02969       \}}
\DoxyCodeLine{02970     \}}
\DoxyCodeLine{02971   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (DYNAMIC\_CAST(\mbox{\hyperlink{class_drawing_data}{DrawingData}}, drawingData, mimeData)) \{}
\DoxyCodeLine{02972     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *level = drawingData-\/>getLevel();}
\DoxyCodeLine{02973     \textcolor{keywordflow}{if} (level) \{}
\DoxyCodeLine{02974       std::set<TFrameId> frameIds;}
\DoxyCodeLine{02975       drawingData-\/>getFrames(frameIds);}
\DoxyCodeLine{02976       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < frameIds.size(); ++i)}
\DoxyCodeLine{02977         createNewDrawing(xsh, r0 + i, c0, level-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}());}
\DoxyCodeLine{02978     \}}
\DoxyCodeLine{02979   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (DYNAMIC\_CAST(\mbox{\hyperlink{class_strokes_data}{StrokesData}}, strokesData, mimeData)) \{}
\DoxyCodeLine{02980     createNewDrawing(xsh, r0, c0, PLI\_XSHLEVEL);}
\DoxyCodeLine{02981   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (DYNAMIC\_CAST(\mbox{\hyperlink{class_toonz_image_data}{ToonzImageData}}, toonzImageData, mimeData)) \{}
\DoxyCodeLine{02982     createNewDrawing(xsh, r0, c0, TZP\_XSHLEVEL);}
\DoxyCodeLine{02983   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (DYNAMIC\_CAST(\mbox{\hyperlink{class_full_color_image_data}{FullColorImageData}}, fullColorImageData, mimeData)) \{}
\DoxyCodeLine{02984     createNewDrawing(xsh, r0, c0, OVL\_XSHLEVEL);}
\DoxyCodeLine{02985   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02986   \}}
\DoxyCodeLine{02987   pasteCells();}
\DoxyCodeLine{02988   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{02989 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a2a0958598bed19540500a08a57c46bcb}\label{class_t_cell_selection_a2a0958598bed19540500a08a57c46bcb}} 
\index{TCellSelection@{TCellSelection}!dRenumberCells@{dRenumberCells}}
\index{dRenumberCells@{dRenumberCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{dRenumberCells()}{dRenumberCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::d\+Renumber\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02760                                     \{}
\DoxyCodeLine{02761   \mbox{\hyperlink{class_t_undo_manager}{TUndoManager}} *undoManager = TUndoManager::manager();}
\DoxyCodeLine{02762 }
\DoxyCodeLine{02763   undoManager-\/>beginBlock();}
\DoxyCodeLine{02764   undoManager-\/>add(\textcolor{keyword}{new} RenumberUndo::UndoNotifier);}
\DoxyCodeLine{02765 }
\DoxyCodeLine{02766   \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{02767   getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{02768   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} c = c1; c >= c0; -\/-\/c) ::dRenumberCells(c, r0, r1);}
\DoxyCodeLine{02769 }
\DoxyCodeLine{02770   undoManager-\/>add(\textcolor{keyword}{new} RenumberUndo::RedoNotifier);}
\DoxyCodeLine{02771   undoManager-\/>endBlock();}
\DoxyCodeLine{02772 }
\DoxyCodeLine{02773   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{02774   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{02775 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a3a05f20da7ef1cf0b712e518c0e905a4}\label{class_t_cell_selection_a3a05f20da7ef1cf0b712e518c0e905a4}} 
\index{TCellSelection@{TCellSelection}!duplicateFrame@{duplicateFrame}}
\index{duplicateFrame@{duplicateFrame}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{duplicateFrame()}{duplicateFrame()}}
{\footnotesize\ttfamily void TCell\+Selection\+::duplicate\+Frame (\begin{DoxyParamCaption}\item[{int}]{row,  }\item[{int}]{col,  }\item[{bool}]{multiple }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02524                                                                    \{}
\DoxyCodeLine{02525   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{02526 }
\DoxyCodeLine{02527   \textcolor{keywordflow}{if} (col < 0) \{}
\DoxyCodeLine{02528     \textcolor{keywordflow}{if} (!multiple)}
\DoxyCodeLine{02529       DVGui::warning(QObject::tr(}
\DoxyCodeLine{02530           \textcolor{stringliteral}{"{}There are no drawings in the camera column to duplicate"{}}));}
\DoxyCodeLine{02531     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02532   \}}
\DoxyCodeLine{02533 }
\DoxyCodeLine{02534   \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(col);}
\DoxyCodeLine{02535   \textcolor{keywordflow}{if} (column \&\& column-\/>isLocked()) \{}
\DoxyCodeLine{02536     \textcolor{keywordflow}{if} (!multiple) DVGui::warning(QObject::tr(\textcolor{stringliteral}{"{}The current column is locked"{}}));}
\DoxyCodeLine{02537     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02538   \}}
\DoxyCodeLine{02539 }
\DoxyCodeLine{02540   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a1e294e7cff300851d12a8c3d196943f6}{getCurrentColumn}}()-\/>setColumnIndex(col);}
\DoxyCodeLine{02541   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}()-\/>setCurrentFrame(row + 1);}
\DoxyCodeLine{02542 }
\DoxyCodeLine{02543   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>getLevel();}
\DoxyCodeLine{02544   \textcolor{keywordflow}{if} (!level \&\& Preferences::instance()-\/>isAutoCreateEnabled() \&\&}
\DoxyCodeLine{02545       Preferences::instance()-\/>isAnimationSheetEnabled()) \{}
\DoxyCodeLine{02546     \textcolor{keywordtype}{int} r0, r1;}
\DoxyCodeLine{02547     xsh-\/>\mbox{\hyperlink{class_t_xsheet_a26850469fb0f2886b717479050c32be2}{getCellRange}}(col, r0, r1);}
\DoxyCodeLine{02548     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} r = std::min(r1, row); r > r0; r-\/-\/) \{}
\DoxyCodeLine{02549       \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r, col);}
\DoxyCodeLine{02550       \textcolor{keywordflow}{if} (cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02551       level = cell.m\_level.getPointer();}
\DoxyCodeLine{02552       \textcolor{keywordflow}{if} (!level) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02553       \textcolor{keywordflow}{break};}
\DoxyCodeLine{02554     \}}
\DoxyCodeLine{02555   \}}
\DoxyCodeLine{02556   \textcolor{keywordflow}{if} (level) \{}
\DoxyCodeLine{02557     \textcolor{keywordtype}{int} levelType = level-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}();}
\DoxyCodeLine{02558     \textcolor{keywordflow}{if} (levelType == ZERARYFX\_XSHLEVEL || levelType == PLT\_XSHLEVEL ||}
\DoxyCodeLine{02559         levelType == SND\_XSHLEVEL || levelType == SND\_TXT\_XSHLEVEL ||}
\DoxyCodeLine{02560         levelType == MESH\_XSHLEVEL) \{}
\DoxyCodeLine{02561       \textcolor{keywordflow}{if} (!multiple)}
\DoxyCodeLine{02562         DVGui::warning(}
\DoxyCodeLine{02563             QObject::tr(\textcolor{stringliteral}{"{}Cannot duplicate a drawing in the current column"{}}));}
\DoxyCodeLine{02564       \textcolor{keywordflow}{return};}
\DoxyCodeLine{02565     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}() \&\&}
\DoxyCodeLine{02566                level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}()-\/>isReadOnly()) \{}
\DoxyCodeLine{02567       \textcolor{keywordflow}{if} (!multiple)}
\DoxyCodeLine{02568         DVGui::warning(QObject::tr(\textcolor{stringliteral}{"{}The current level is not editable"{}}));}
\DoxyCodeLine{02569       \textcolor{keywordflow}{return};}
\DoxyCodeLine{02570     \}}
\DoxyCodeLine{02571   \}}
\DoxyCodeLine{02572 }
\DoxyCodeLine{02573   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} targetCell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col);}
\DoxyCodeLine{02574   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} prevCell   = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row -\/ 1, col);}
\DoxyCodeLine{02575   ;}
\DoxyCodeLine{02576 }
\DoxyCodeLine{02577   \textcolor{comment}{// check if we use the current cell to duplicate or the previous cell}}
\DoxyCodeLine{02578   \textcolor{keywordflow}{if} (!targetCell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}() \&\& targetCell != prevCell) \{}
\DoxyCodeLine{02579     \textcolor{comment}{// Current cell has a drawing to duplicate and it's not a hold shift focus}}
\DoxyCodeLine{02580     \textcolor{comment}{// to next cell as if they selected that one to duplicate into}}
\DoxyCodeLine{02581     prevCell = targetCell;}
\DoxyCodeLine{02582     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}()-\/>setCurrentFrame(row + 2);}
\DoxyCodeLine{02583     row++;}
\DoxyCodeLine{02584   \}}
\DoxyCodeLine{02585 }
\DoxyCodeLine{02586   \textcolor{keywordflow}{if} (prevCell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}() || !(prevCell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}())) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02587 }
\DoxyCodeLine{02588   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = prevCell.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{02589   \textcolor{keywordflow}{if} (!sl || sl-\/>isSubsequence() || sl-\/>isReadOnly()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02590 }
\DoxyCodeLine{02591   \mbox{\hyperlink{class_tool_handle}{ToolHandle}} *toolHandle = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad70b447aff489792cfc3dbac7150a540}{getCurrentTool}}();}
\DoxyCodeLine{02592 }
\DoxyCodeLine{02593   \textcolor{comment}{// If autocreate disabled, let's turn it on temporarily}}
\DoxyCodeLine{02594   \textcolor{keywordtype}{bool} isAutoCreateEnabled = Preferences::instance()-\/>isAutoCreateEnabled();}
\DoxyCodeLine{02595   \textcolor{keywordflow}{if} (!isAutoCreateEnabled)}
\DoxyCodeLine{02596     Preferences::instance()-\/>setValue(EnableAutocreation, \textcolor{keyword}{true}, \textcolor{keyword}{false});}
\DoxyCodeLine{02597   \textcolor{comment}{// Enable inserting in the hold cells temporarily too.}}
\DoxyCodeLine{02598   \textcolor{keywordtype}{bool} isCreationInHoldCellsEnabled =}
\DoxyCodeLine{02599       Preferences::instance()-\/>isCreationInHoldCellsEnabled();}
\DoxyCodeLine{02600   \textcolor{keywordflow}{if} (!isCreationInHoldCellsEnabled)}
\DoxyCodeLine{02601     Preferences::instance()-\/>setValue(EnableCreationInHoldCells, \textcolor{keyword}{true}, \textcolor{keyword}{false});}
\DoxyCodeLine{02602 }
\DoxyCodeLine{02603   \mbox{\hyperlink{class_t_image}{TImage}} *img = toolHandle-\/>getTool()-\/>\mbox{\hyperlink{class_t_tool_a668ac4790094a864ba6e37bd902303f1}{touchImage}}();}
\DoxyCodeLine{02604   \textcolor{keywordflow}{if} (!img) \{}
\DoxyCodeLine{02605     \textcolor{keywordflow}{if} (!isAutoCreateEnabled)}
\DoxyCodeLine{02606       Preferences::instance()-\/>setValue(EnableAutocreation, \textcolor{keyword}{false}, \textcolor{keyword}{false});}
\DoxyCodeLine{02607     \textcolor{keywordflow}{if} (!isCreationInHoldCellsEnabled)}
\DoxyCodeLine{02608       Preferences::instance()-\/>setValue(EnableCreationInHoldCells, \textcolor{keyword}{false},}
\DoxyCodeLine{02609                                         \textcolor{keyword}{false});}
\DoxyCodeLine{02610     \textcolor{keywordflow}{if} (!multiple)}
\DoxyCodeLine{02611       DVGui::warning(}
\DoxyCodeLine{02612           QObject::tr(\textcolor{stringliteral}{"{}Unable to duplicate a drawing on the current column"{}}));}
\DoxyCodeLine{02613     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02614   \}}
\DoxyCodeLine{02615 }
\DoxyCodeLine{02616   \textcolor{keywordtype}{bool} frameCreated = toolHandle-\/>getTool()-\/>\mbox{\hyperlink{class_t_tool_aabd06af7335f1ba0c96f36f1ac3e9976}{m\_isFrameCreated}};}
\DoxyCodeLine{02617   \textcolor{keywordflow}{if} (!frameCreated) \{}
\DoxyCodeLine{02618     \textcolor{keywordflow}{if} (!isAutoCreateEnabled)}
\DoxyCodeLine{02619       Preferences::instance()-\/>setValue(EnableAutocreation, \textcolor{keyword}{false}, \textcolor{keyword}{false});}
\DoxyCodeLine{02620     \textcolor{keywordflow}{if} (!isCreationInHoldCellsEnabled)}
\DoxyCodeLine{02621       Preferences::instance()-\/>setValue(EnableCreationInHoldCells, \textcolor{keyword}{false},}
\DoxyCodeLine{02622                                         \textcolor{keyword}{false});}
\DoxyCodeLine{02623     \textcolor{keywordflow}{if} (!multiple)}
\DoxyCodeLine{02624       DVGui::warning(}
\DoxyCodeLine{02625           QObject::tr(\textcolor{stringliteral}{"{}Unable to replace the current or next drawing with a "{}}}
\DoxyCodeLine{02626                       \textcolor{stringliteral}{"{}duplicate drawing"{}}));}
\DoxyCodeLine{02627     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02628   \}}
\DoxyCodeLine{02629 }
\DoxyCodeLine{02630   targetCell           = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col);}
\DoxyCodeLine{02631   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette    = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a9aea4f8e34caef293d5e5c7694047564}{getPalette}}();}
\DoxyCodeLine{02632   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} srcFrame    = prevCell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}();}
\DoxyCodeLine{02633   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} targetFrame = targetCell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}();}
\DoxyCodeLine{02634   std::set<TFrameId> frames;}
\DoxyCodeLine{02635 }
\DoxyCodeLine{02636   FilmstripCmd::duplicateFrameWithoutUndo(sl, srcFrame, targetFrame);}
\DoxyCodeLine{02637 }
\DoxyCodeLine{02638   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>notifyLevelChange();}
\DoxyCodeLine{02639 }
\DoxyCodeLine{02640   DuplicateDrawingUndo *undo =}
\DoxyCodeLine{02641       \textcolor{keyword}{new} DuplicateDrawingUndo(sl, srcFrame, targetFrame);}
\DoxyCodeLine{02642   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{02643 }
\DoxyCodeLine{02644   \textcolor{keywordflow}{if} (!isAutoCreateEnabled)}
\DoxyCodeLine{02645     Preferences::instance()-\/>setValue(EnableAutocreation, \textcolor{keyword}{false}, \textcolor{keyword}{false});}
\DoxyCodeLine{02646   \textcolor{keywordflow}{if} (!isCreationInHoldCellsEnabled)}
\DoxyCodeLine{02647     Preferences::instance()-\/>setValue(EnableCreationInHoldCells, \textcolor{keyword}{false}, \textcolor{keyword}{false});}
\DoxyCodeLine{02648 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_af5f4305ad5dda7d2123a09207fae83ec}\label{class_t_cell_selection_af5f4305ad5dda7d2123a09207fae83ec}} 
\index{TCellSelection@{TCellSelection}!duplicateFrames@{duplicateFrames}}
\index{duplicateFrames@{duplicateFrames}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{duplicateFrames()}{duplicateFrames()}}
{\footnotesize\ttfamily void TCell\+Selection\+::duplicate\+Frames (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02652                                      \{}
\DoxyCodeLine{02653   \textcolor{keywordtype}{int} col = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a1e294e7cff300851d12a8c3d196943f6}{getCurrentColumn}}()-\/>getColumnIndex();}
\DoxyCodeLine{02654   \textcolor{keywordtype}{int} row = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}()-\/>getFrameIndex();}
\DoxyCodeLine{02655 }
\DoxyCodeLine{02656   \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{02657   getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{02658 }
\DoxyCodeLine{02659   \textcolor{keywordtype}{bool} multiple = (r1 -\/ r0 > 1) || (c1 -\/ c0 > 1);}
\DoxyCodeLine{02660 }
\DoxyCodeLine{02661   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{02662   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} c = c0; c <= c1; c++) \{}
\DoxyCodeLine{02663     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} r = r0; r <= r1; r++) \{}
\DoxyCodeLine{02664       duplicateFrame(r, c, multiple);}
\DoxyCodeLine{02665     \}}
\DoxyCodeLine{02666   \}}
\DoxyCodeLine{02667   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{02668 }
\DoxyCodeLine{02669   \textcolor{keywordflow}{if} (multiple) \{}
\DoxyCodeLine{02670     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a1e294e7cff300851d12a8c3d196943f6}{getCurrentColumn}}()-\/>setColumnIndex(col);}
\DoxyCodeLine{02671     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}()-\/>setCurrentFrame(row + 1);}
\DoxyCodeLine{02672   \}}
\DoxyCodeLine{02673 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a8565e77d934802650db62fea8012c945}\label{class_t_cell_selection_a8565e77d934802650db62fea8012c945}} 
\index{TCellSelection@{TCellSelection}!each2Cells@{each2Cells}}
\index{each2Cells@{each2Cells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{each2Cells()}{each2Cells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::each2\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00087 \{ eachCells(2); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a5166d4eaa0e496af48ae13f63140f0bf}\label{class_t_cell_selection_a5166d4eaa0e496af48ae13f63140f0bf}} 
\index{TCellSelection@{TCellSelection}!each3Cells@{each3Cells}}
\index{each3Cells@{each3Cells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{each3Cells()}{each3Cells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::each3\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00088 \{ eachCells(3); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a0e04d22154f1258fd9e245e4f1e5fe01}\label{class_t_cell_selection_a0e04d22154f1258fd9e245e4f1e5fe01}} 
\index{TCellSelection@{TCellSelection}!each4Cells@{each4Cells}}
\index{each4Cells@{each4Cells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{each4Cells()}{each4Cells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::each4\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00089 \{ eachCells(4); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a18c47f1430a80a954b818c7b1ea9a494}\label{class_t_cell_selection_a18c47f1430a80a954b818c7b1ea9a494}} 
\index{TCellSelection@{TCellSelection}!eachCells@{eachCells}}
\index{eachCells@{eachCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{eachCells()}{eachCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::each\+Cells (\begin{DoxyParamCaption}\item[{int}]{count }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00540                                        \{}
\DoxyCodeLine{00541   \textcolor{keywordflow}{if} (isEmpty() || areAllColSelectedLocked()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00542 }
\DoxyCodeLine{00543   \mbox{\hyperlink{class_t_undo}{TUndo}} *undo = \textcolor{keyword}{new} EachUndo(m\_range.m\_r0, m\_range.m\_c0, m\_range.m\_r1,}
\DoxyCodeLine{00544                              m\_range.m\_c1, each);}
\DoxyCodeLine{00545   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{00546 }
\DoxyCodeLine{00547   undo-\/>redo();}
\DoxyCodeLine{00548   m\_range.m\_r1 = m\_range.m\_r0 + (m\_range.m\_r1 -\/ m\_range.m\_r0 + each) / each -\/ 1;}
\DoxyCodeLine{00549 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a0fb469da53c008b3229691dbb5c92b01}\label{class_t_cell_selection_a0fb469da53c008b3229691dbb5c92b01}} 
\index{TCellSelection@{TCellSelection}!enableCommands@{enableCommands}}
\index{enableCommands@{enableCommands}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{enableCommands()}{enableCommands()}}
{\footnotesize\ttfamily void TCell\+Selection\+::enable\+Commands (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_selection}{TSelection}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01421                                     \{}
\DoxyCodeLine{01422   \textcolor{comment}{// enableCommand(this, MI\_PasteNew,     \&TCellSelection::dPasteCells);}}
\DoxyCodeLine{01423   enableCommand(\textcolor{keyword}{this}, MI\_Autorenumber, \&TCellSelection::dRenumberCells);}
\DoxyCodeLine{01424 }
\DoxyCodeLine{01425   enableCommand(\textcolor{keyword}{this}, MI\_Reverse, \&TCellSelection::reverseCells);}
\DoxyCodeLine{01426   enableCommand(\textcolor{keyword}{this}, MI\_Swing, \&TCellSelection::swingCells);}
\DoxyCodeLine{01427   enableCommand(\textcolor{keyword}{this}, MI\_Random, \&TCellSelection::randomCells);}
\DoxyCodeLine{01428   enableCommand(\textcolor{keyword}{this}, MI\_Increment, \&TCellSelection::incrementCells);}
\DoxyCodeLine{01429   enableCommand(\textcolor{keyword}{this}, MI\_ResetStep, \&TCellSelection::resetStepCells);}
\DoxyCodeLine{01430   enableCommand(\textcolor{keyword}{this}, MI\_IncreaseStep, \&TCellSelection::increaseStepCells);}
\DoxyCodeLine{01431   enableCommand(\textcolor{keyword}{this}, MI\_DecreaseStep, \&TCellSelection::decreaseStepCells);}
\DoxyCodeLine{01432   enableCommand(\textcolor{keyword}{this}, MI\_Step2, \&TCellSelection::step2Cells);}
\DoxyCodeLine{01433   enableCommand(\textcolor{keyword}{this}, MI\_Step3, \&TCellSelection::step3Cells);}
\DoxyCodeLine{01434   enableCommand(\textcolor{keyword}{this}, MI\_Step4, \&TCellSelection::step4Cells);}
\DoxyCodeLine{01435   enableCommand(\textcolor{keyword}{this}, MI\_Each2, \&TCellSelection::each2Cells);}
\DoxyCodeLine{01436   enableCommand(\textcolor{keyword}{this}, MI\_Each3, \&TCellSelection::each3Cells);}
\DoxyCodeLine{01437   enableCommand(\textcolor{keyword}{this}, MI\_Each4, \&TCellSelection::each4Cells);}
\DoxyCodeLine{01438 }
\DoxyCodeLine{01439   enableCommand(\textcolor{keyword}{this}, MI\_Rollup, \&TCellSelection::rollupCells);}
\DoxyCodeLine{01440   enableCommand(\textcolor{keyword}{this}, MI\_Rolldown, \&TCellSelection::rolldownCells);}
\DoxyCodeLine{01441 }
\DoxyCodeLine{01442   enableCommand(\textcolor{keyword}{this}, MI\_TimeStretch, \&TCellSelection::openTimeStretchPopup);}
\DoxyCodeLine{01443   enableCommand(\textcolor{keyword}{this}, MI\_CloneLevel, \&TCellSelection::cloneLevel);}
\DoxyCodeLine{01444   enableCommand(\textcolor{keyword}{this}, MI\_SetKeyframes, \&TCellSelection::setKeyframes);}
\DoxyCodeLine{01445 }
\DoxyCodeLine{01446   enableCommand(\textcolor{keyword}{this}, MI\_ShiftKeyframesDown,}
\DoxyCodeLine{01447                 \&TCellSelection::shiftKeyframesDown);}
\DoxyCodeLine{01448   enableCommand(\textcolor{keyword}{this}, MI\_ShiftKeyframesUp, \&TCellSelection::shiftKeyframesUp);}
\DoxyCodeLine{01449 }
\DoxyCodeLine{01450   enableCommand(\textcolor{keyword}{this}, MI\_Copy, \&TCellSelection::copyCells);}
\DoxyCodeLine{01451   enableCommand(\textcolor{keyword}{this}, MI\_Paste, \&TCellSelection::pasteCells);}
\DoxyCodeLine{01452 }
\DoxyCodeLine{01453   \textcolor{keywordflow}{if} (\textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_t_keyframe_data}{TKeyframeData}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{01454           QApplication::clipboard()-\/>mimeData()))}
\DoxyCodeLine{01455     enableCommand(\textcolor{keyword}{this}, MI\_PasteInto, \&TCellSelection::pasteKeyframesInto);}
\DoxyCodeLine{01456 }
\DoxyCodeLine{01457   enableCommand(\textcolor{keyword}{this}, MI\_Cut, \&TCellSelection::cutCells);}
\DoxyCodeLine{01458   enableCommand(\textcolor{keyword}{this}, MI\_Clear, \&TCellSelection::deleteCells);}
\DoxyCodeLine{01459   enableCommand(\textcolor{keyword}{this}, MI\_Insert, \&TCellSelection::insertCells);}
\DoxyCodeLine{01460 }
\DoxyCodeLine{01461   enableCommand(\textcolor{keyword}{this}, MI\_PasteInto, \&TCellSelection::overWritePasteCells);}
\DoxyCodeLine{01462 }
\DoxyCodeLine{01463   enableCommand(\textcolor{keyword}{this}, MI\_FillEmptyCell, \&TCellSelection::fillEmptyCell);}
\DoxyCodeLine{01464   enableCommand(\textcolor{keyword}{this}, MI\_Reframe1, \&TCellSelection::reframe1Cells);}
\DoxyCodeLine{01465   enableCommand(\textcolor{keyword}{this}, MI\_Reframe2, \&TCellSelection::reframe2Cells);}
\DoxyCodeLine{01466   enableCommand(\textcolor{keyword}{this}, MI\_Reframe3, \&TCellSelection::reframe3Cells);}
\DoxyCodeLine{01467   enableCommand(\textcolor{keyword}{this}, MI\_Reframe4, \&TCellSelection::reframe4Cells);}
\DoxyCodeLine{01468   enableCommand(\textcolor{keyword}{this}, MI\_ConvertToToonzRaster,}
\DoxyCodeLine{01469                 \&TCellSelection::convertToToonzRaster);}
\DoxyCodeLine{01470   enableCommand(\textcolor{keyword}{this}, MI\_ConvertVectorToVector,}
\DoxyCodeLine{01471                 \&TCellSelection::convertVectortoVector);}
\DoxyCodeLine{01472   enableCommand(\textcolor{keyword}{this}, MI\_ReframeWithEmptyInbetweens,}
\DoxyCodeLine{01473                 \&TCellSelection::reframeWithEmptyInbetweens);}
\DoxyCodeLine{01474 }
\DoxyCodeLine{01475   enableCommand(\textcolor{keyword}{this}, MI\_PasteNumbers, \&TCellSelection::overwritePasteNumbers);}
\DoxyCodeLine{01476   enableCommand(\textcolor{keyword}{this}, MI\_CreateBlankDrawing,}
\DoxyCodeLine{01477                 \&TCellSelection::createBlankDrawings);}
\DoxyCodeLine{01478   enableCommand(\textcolor{keyword}{this}, MI\_Duplicate, \&TCellSelection::duplicateFrames);}
\DoxyCodeLine{01479   enableCommand(\textcolor{keyword}{this}, MI\_PasteDuplicate, \&TCellSelection::pasteDuplicateCells);}
\DoxyCodeLine{01480 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_aa5e93192e78245346e947495d6dc99e6}\label{class_t_cell_selection_aa5e93192e78245346e947495d6dc99e6}} 
\index{TCellSelection@{TCellSelection}!fillEmptyCell@{fillEmptyCell}}
\index{fillEmptyCell@{fillEmptyCell}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{fillEmptyCell()}{fillEmptyCell()}}
{\footnotesize\ttfamily void TCell\+Selection\+::fill\+Empty\+Cell (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{03676                                    \{}
\DoxyCodeLine{03677   \textcolor{keywordflow}{if} (isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03678 }
\DoxyCodeLine{03679   \textcolor{comment}{// set up basics}}
\DoxyCodeLine{03680   \textcolor{keywordtype}{bool} initUndo = \textcolor{keyword}{false};}
\DoxyCodeLine{03681   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh  = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{03682   \textcolor{keywordtype}{int} r, r0, c0, c, r1, c1;}
\DoxyCodeLine{03683 }
\DoxyCodeLine{03684   getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{03685 }
\DoxyCodeLine{03686   \textcolor{keywordflow}{for} (c = c0; c <= c1; c++) \{}
\DoxyCodeLine{03687     \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(c);}
\DoxyCodeLine{03688     \textcolor{keywordflow}{if} (!column || column-\/>isEmpty() || column-\/>isLocked() ||}
\DoxyCodeLine{03689         column-\/>getSoundColumn())}
\DoxyCodeLine{03690       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03691 }
\DoxyCodeLine{03692     \textcolor{keywordflow}{for} (r = r1; r >= r0; r-\/-\/) \{}
\DoxyCodeLine{03693       \textcolor{keywordtype}{int} fillCount = 0;}
\DoxyCodeLine{03694       \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r, c);}
\DoxyCodeLine{03695 }
\DoxyCodeLine{03696       \textcolor{keywordflow}{if} (cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) fillCount++;}
\DoxyCodeLine{03697 }
\DoxyCodeLine{03698       \textcolor{keywordtype}{int} prevR = r -\/ 1;}
\DoxyCodeLine{03699       \textcolor{keywordflow}{while} (prevR >= 0) \{}
\DoxyCodeLine{03700         cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(prevR, c);}
\DoxyCodeLine{03701         \textcolor{keywordflow}{if} (!cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \textcolor{keywordflow}{break};}
\DoxyCodeLine{03702 }
\DoxyCodeLine{03703         prevR-\/-\/;}
\DoxyCodeLine{03704         fillCount++;}
\DoxyCodeLine{03705       \}}
\DoxyCodeLine{03706 }
\DoxyCodeLine{03707       \textcolor{comment}{// We've gone past the beginning of timeline without finding a cell.}}
\DoxyCodeLine{03708       \textcolor{comment}{// Do nothing, and end current column processing immediately.}}
\DoxyCodeLine{03709       \textcolor{keywordflow}{if} (prevR < 0) \textcolor{keywordflow}{break};}
\DoxyCodeLine{03710 }
\DoxyCodeLine{03711       \textcolor{comment}{// Adjacent cell is filled.  Move to next one.}}
\DoxyCodeLine{03712       \textcolor{keywordflow}{if} (!fillCount) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03713 }
\DoxyCodeLine{03714       \textcolor{comment}{// Ok, time fill}}
\DoxyCodeLine{03715       \textcolor{keywordtype}{int} startR = prevR + 1;}
\DoxyCodeLine{03716       \textcolor{keywordtype}{int} endR   = startR + fillCount -\/ 1;}
\DoxyCodeLine{03717 }
\DoxyCodeLine{03718       \textcolor{keywordflow}{if} (!initUndo) \{}
\DoxyCodeLine{03719         initUndo = \textcolor{keyword}{true};}
\DoxyCodeLine{03720         TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{03721       \}}
\DoxyCodeLine{03722 }
\DoxyCodeLine{03723       FillEmptyCellUndo *undo = \textcolor{keyword}{new} FillEmptyCellUndo(startR, endR, c, cell);}
\DoxyCodeLine{03724       TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{03725       undo-\/>redo();}
\DoxyCodeLine{03726 }
\DoxyCodeLine{03727       \textcolor{comment}{// Let's skip cells we just filled}}
\DoxyCodeLine{03728       r = prevR;}
\DoxyCodeLine{03729     \}}
\DoxyCodeLine{03730   \}}
\DoxyCodeLine{03731 }
\DoxyCodeLine{03732   \textcolor{keywordflow}{if} (initUndo) TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{03733 }
\DoxyCodeLine{03734   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{03735 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_ab0b6b54919b03fa6acafa49a114bfd87}\label{class_t_cell_selection_ab0b6b54919b03fa6acafa49a114bfd87}} 
\index{TCellSelection@{TCellSelection}!getNewToonzRasterLevel@{getNewToonzRasterLevel}}
\index{getNewToonzRasterLevel@{getNewToonzRasterLevel}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{getNewToonzRasterLevel()}{getNewToonzRasterLevel()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsh_simple_level}{TXsh\+Simple\+Level}} $\ast$ TCell\+Selection\+::get\+New\+Toonz\+Raster\+Level (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsh_simple_level}{TXsh\+Simple\+Level}} $\ast$}]{sl }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{03343                                \{}
\DoxyCodeLine{03344   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene       = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{03345   \mbox{\hyperlink{class_t_file_path}{TFilePath}} sourcePath    = sourceSl-\/>getPath();}
\DoxyCodeLine{03346   std::wstring sourceName = sourcePath.getWideName();}
\DoxyCodeLine{03347   \mbox{\hyperlink{class_t_file_path}{TFilePath}} parentDir     = sourceSl-\/>getPath().\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}();}
\DoxyCodeLine{03348   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp            = scene-\/>\mbox{\hyperlink{class_toonz_scene_a3f7940ad6794546ba923304231820f00}{getDefaultLevelPath}}(TZP\_XSHLEVEL, sourceName)}
\DoxyCodeLine{03349                      .\mbox{\hyperlink{class_t_file_path_a09d12d68c4264183e0268dde6f592b2e}{withParentDir}}(parentDir);}
\DoxyCodeLine{03350   \mbox{\hyperlink{class_t_file_path}{TFilePath}} actualFp = scene-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(fp);}
\DoxyCodeLine{03351 }
\DoxyCodeLine{03352   \textcolor{keywordtype}{int} i                = 1;}
\DoxyCodeLine{03353   std::wstring newName = sourceName;}
\DoxyCodeLine{03354   \textcolor{keywordflow}{while} (TSystem::doesExistFileOrLevel(actualFp)) \{}
\DoxyCodeLine{03355     newName = sourceName + QString::number(i).toStdWString();}
\DoxyCodeLine{03356     fp      = scene-\/>\mbox{\hyperlink{class_toonz_scene_a3f7940ad6794546ba923304231820f00}{getDefaultLevelPath}}(TZP\_XSHLEVEL, newName)}
\DoxyCodeLine{03357              .\mbox{\hyperlink{class_t_file_path_a09d12d68c4264183e0268dde6f592b2e}{withParentDir}}(parentDir);}
\DoxyCodeLine{03358     actualFp = scene-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(fp);}
\DoxyCodeLine{03359     i++;}
\DoxyCodeLine{03360   \}}
\DoxyCodeLine{03361   parentDir = scene-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(parentDir);}
\DoxyCodeLine{03362 }
\DoxyCodeLine{03363   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level =}
\DoxyCodeLine{03364       scene-\/>\mbox{\hyperlink{class_toonz_scene_ac8791183db4daa28bdffdd40e15c3b9e}{createNewLevel}}(TZP\_XSHLEVEL, newName, \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(), 0, fp);}
\DoxyCodeLine{03365   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *\textcolor{keyword}{>}(level);}
\DoxyCodeLine{03366   \textcolor{keywordflow}{return} sl;}
\DoxyCodeLine{03367 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_add1b4099fbcd03886b8cf4a655a576b5}\label{class_t_cell_selection_add1b4099fbcd03886b8cf4a655a576b5}} 
\index{TCellSelection@{TCellSelection}!getSelectedCells@{getSelectedCells}}
\index{getSelectedCells@{getSelectedCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{getSelectedCells()}{getSelectedCells()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_cell_selection_1_1_range}{TCell\+Selection\+::\+Range}} TCell\+Selection\+::get\+Selected\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{01575                                                            \{}
\DoxyCodeLine{01576   \textcolor{keywordflow}{return} m\_range;}
\DoxyCodeLine{01577 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_ac71dc0f74133a03c5fa877ac5cd99ea4}\label{class_t_cell_selection_ac71dc0f74133a03c5fa877ac5cd99ea4}} 
\index{TCellSelection@{TCellSelection}!getSelectedCells@{getSelectedCells}}
\index{getSelectedCells@{getSelectedCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{getSelectedCells()}{getSelectedCells()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void TCell\+Selection\+::get\+Selected\+Cells (\begin{DoxyParamCaption}\item[{int \&}]{r0,  }\item[{int \&}]{c0,  }\item[{int \&}]{r1,  }\item[{int \&}]{c1 }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{01566                                                      \{}
\DoxyCodeLine{01567   r0 = m\_range.m\_r0;}
\DoxyCodeLine{01568   r1 = m\_range.m\_r1;}
\DoxyCodeLine{01569   c0 = m\_range.m\_c0;}
\DoxyCodeLine{01570   c1 = m\_range.m\_c1;}
\DoxyCodeLine{01571 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_af3f1d077f7e167f2c55c922ed4fc058e}\label{class_t_cell_selection_af3f1d077f7e167f2c55c922ed4fc058e}} 
\index{TCellSelection@{TCellSelection}!increaseStepCells@{increaseStepCells}}
\index{increaseStepCells@{increaseStepCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{increaseStepCells()}{increaseStepCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::increase\+Step\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00983                                        \{}
\DoxyCodeLine{00984   \textcolor{keywordflow}{if} (isEmpty()) \{}
\DoxyCodeLine{00985     \textcolor{keywordtype}{int} row = TTool::getApplication()-\/>getCurrentFrame()-\/>getFrame();}
\DoxyCodeLine{00986     \textcolor{keywordtype}{int} col = TTool::getApplication()-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{00987     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{00988     m\_range.m\_r0 = row;}
\DoxyCodeLine{00989     m\_range.m\_r1 = row;}
\DoxyCodeLine{00990     m\_range.m\_c0 = col;}
\DoxyCodeLine{00991     m\_range.m\_c1 = col;}
\DoxyCodeLine{00992     \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell;}
\DoxyCodeLine{00993     cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col);}
\DoxyCodeLine{00994     \textcolor{keywordflow}{if} (cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00995   \}}
\DoxyCodeLine{00996   \textcolor{keywordflow}{if} (areAllColSelectedLocked()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00997 }
\DoxyCodeLine{00998   IncreaseStepUndo *undo = \textcolor{keyword}{new} IncreaseStepUndo(m\_range.m\_r0, m\_range.m\_c0,}
\DoxyCodeLine{00999                                                 m\_range.m\_r1, m\_range.m\_c1);}
\DoxyCodeLine{01000   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{01001 }
\DoxyCodeLine{01002   undo-\/>redo();}
\DoxyCodeLine{01003 }
\DoxyCodeLine{01004   \textcolor{keywordflow}{if} (undo-\/>m\_newR1 != m\_range.m\_r1) \{}
\DoxyCodeLine{01005     m\_range.m\_r1 = undo-\/>m\_newR1;}
\DoxyCodeLine{01006     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>notifySelectionChanged();}
\DoxyCodeLine{01007   \}}
\DoxyCodeLine{01008 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_afb78e86efba836e0489cd24b3a7dcb49}\label{class_t_cell_selection_afb78e86efba836e0489cd24b3a7dcb49}} 
\index{TCellSelection@{TCellSelection}!incrementCells@{incrementCells}}
\index{incrementCells@{incrementCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{incrementCells()}{incrementCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::increment\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00229                                     \{}
\DoxyCodeLine{00230   \textcolor{keywordflow}{if} (isEmpty() || areAllColSelectedLocked()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00231 }
\DoxyCodeLine{00232   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{00233 }
\DoxyCodeLine{00234   std::unique\_ptr<IncrementUndo> undo(\textcolor{keyword}{new} IncrementUndo(}
\DoxyCodeLine{00235       m\_range.m\_r0, m\_range.m\_c0, m\_range.m\_r1, m\_range.m\_c1));}
\DoxyCodeLine{00236 }
\DoxyCodeLine{00237   \textcolor{keywordflow}{if} (undo-\/>redo(), !undo-\/>m\_ok) \{}
\DoxyCodeLine{00238     DVGui::error(}
\DoxyCodeLine{00239         QObject::tr(\textcolor{stringliteral}{"{}Invalid selection: each selected column must contain one "{}}}
\DoxyCodeLine{00240                     \textcolor{stringliteral}{"{}single level with increasing frame numbering."{}}));}
\DoxyCodeLine{00241     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00242   \}}
\DoxyCodeLine{00243 }
\DoxyCodeLine{00244   TUndoManager::manager()-\/>add(undo.release());}
\DoxyCodeLine{00245 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a956fdff4d3d0795de5d8dee3cdd772dc}\label{class_t_cell_selection_a956fdff4d3d0795de5d8dee3cdd772dc}} 
\index{TCellSelection@{TCellSelection}!insertCells@{insertCells}}
\index{insertCells@{insertCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{insertCells()}{insertCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::insert\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02346                                  \{}
\DoxyCodeLine{02347   \textcolor{keywordflow}{if} (isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02348   InsertUndo *undo = \textcolor{keyword}{new} InsertUndo(getSelectedCells());}
\DoxyCodeLine{02349   undo-\/>redo();}
\DoxyCodeLine{02350   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{02351   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{02352 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_aacffab5e5b3bae471c625ba02d193a98}\label{class_t_cell_selection_aacffab5e5b3bae471c625ba02d193a98}} 
\index{TCellSelection@{TCellSelection}!isCellSelected@{isCellSelected}}
\index{isCellSelected@{isCellSelected}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{isCellSelected()}{isCellSelected()}}
{\footnotesize\ttfamily bool TCell\+Selection\+::is\+Cell\+Selected (\begin{DoxyParamCaption}\item[{int}]{r,  }\item[{int}]{c }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{01581                                                       \{}
\DoxyCodeLine{01582   \textcolor{keywordflow}{return} m\_range.contains(r, c);}
\DoxyCodeLine{01583 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a206daf2e833c7d024868ef471287e79b}\label{class_t_cell_selection_a206daf2e833c7d024868ef471287e79b}} 
\index{TCellSelection@{TCellSelection}!isColSelected@{isColSelected}}
\index{isColSelected@{isColSelected}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{isColSelected()}{isColSelected()}}
{\footnotesize\ttfamily bool TCell\+Selection\+::is\+Col\+Selected (\begin{DoxyParamCaption}\item[{int}]{col }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{01593                                               \{}
\DoxyCodeLine{01594   \textcolor{keywordflow}{return} m\_range.m\_c0 <= c \&\& c >= m\_range.m\_c1;}
\DoxyCodeLine{01595 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a7bbcaba5c770178d498c0de9275cb61f}\label{class_t_cell_selection_a7bbcaba5c770178d498c0de9275cb61f}} 
\index{TCellSelection@{TCellSelection}!isEmpty@{isEmpty}}
\index{isEmpty@{isEmpty}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{isEmpty()}{isEmpty()}}
{\footnotesize\ttfamily bool TCell\+Selection\+::is\+Empty (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_selection}{TSelection}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01530 \{ \textcolor{keywordflow}{return} m\_range.isEmpty(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a3b6f7895cfeb7e3e585eb03de6b69cad}\label{class_t_cell_selection_a3b6f7895cfeb7e3e585eb03de6b69cad}} 
\index{TCellSelection@{TCellSelection}!isEnabledCommand@{isEnabledCommand}}
\index{isEnabledCommand@{isEnabledCommand}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{isEnabledCommand()}{isEnabledCommand()}}
{\footnotesize\ttfamily bool TCell\+Selection\+::is\+Enabled\+Command (\begin{DoxyParamCaption}\item[{std\+::string}]{command\+Id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01485                          \{  \textcolor{comment}{// static function}}
\DoxyCodeLine{01486   \textcolor{keyword}{static} QList<std::string> commands = \{MI\_Autorenumber,}
\DoxyCodeLine{01487                                         MI\_Reverse,}
\DoxyCodeLine{01488                                         MI\_Swing,}
\DoxyCodeLine{01489                                         MI\_Random,}
\DoxyCodeLine{01490                                         MI\_Increment,}
\DoxyCodeLine{01491                                         MI\_ResetStep,}
\DoxyCodeLine{01492                                         MI\_IncreaseStep,}
\DoxyCodeLine{01493                                         MI\_DecreaseStep,}
\DoxyCodeLine{01494                                         MI\_Step2,}
\DoxyCodeLine{01495                                         MI\_Step3,}
\DoxyCodeLine{01496                                         MI\_Step4,}
\DoxyCodeLine{01497                                         MI\_Each2,}
\DoxyCodeLine{01498                                         MI\_Each3,}
\DoxyCodeLine{01499                                         MI\_Each4,}
\DoxyCodeLine{01500                                         MI\_Rollup,}
\DoxyCodeLine{01501                                         MI\_Rolldown,}
\DoxyCodeLine{01502                                         MI\_TimeStretch,}
\DoxyCodeLine{01503                                         MI\_CloneLevel,}
\DoxyCodeLine{01504                                         MI\_SetKeyframes,}
\DoxyCodeLine{01505                                         MI\_ShiftKeyframesDown,}
\DoxyCodeLine{01506                                         MI\_ShiftKeyframesUp,}
\DoxyCodeLine{01507                                         MI\_Copy,}
\DoxyCodeLine{01508                                         MI\_Paste,}
\DoxyCodeLine{01509                                         MI\_PasteInto,}
\DoxyCodeLine{01510                                         MI\_Cut,}
\DoxyCodeLine{01511                                         MI\_Clear,}
\DoxyCodeLine{01512                                         MI\_Insert,}
\DoxyCodeLine{01513                                         MI\_Reframe1,}
\DoxyCodeLine{01514                                         MI\_Reframe2,}
\DoxyCodeLine{01515                                         MI\_Reframe3,}
\DoxyCodeLine{01516                                         MI\_Reframe4,}
\DoxyCodeLine{01517                                         MI\_ReframeWithEmptyInbetweens,}
\DoxyCodeLine{01518                                         MI\_Undo,}
\DoxyCodeLine{01519                                         MI\_Redo,}
\DoxyCodeLine{01520                                         MI\_PasteNumbers,}
\DoxyCodeLine{01521                                         MI\_ConvertToToonzRaster,}
\DoxyCodeLine{01522                                         MI\_ConvertVectorToVector,}
\DoxyCodeLine{01523                                         MI\_CreateBlankDrawing,}
\DoxyCodeLine{01524                                         MI\_FillEmptyCell\};}
\DoxyCodeLine{01525   \textcolor{keywordflow}{return} commands.contains(commandId);}
\DoxyCodeLine{01526 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a324da514411ef5709fc13c54ca43e84c}\label{class_t_cell_selection_a324da514411ef5709fc13c54ca43e84c}} 
\index{TCellSelection@{TCellSelection}!isRowSelected@{isRowSelected}}
\index{isRowSelected@{isRowSelected}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{isRowSelected()}{isRowSelected()}}
{\footnotesize\ttfamily bool TCell\+Selection\+::is\+Row\+Selected (\begin{DoxyParamCaption}\item[{int}]{row }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{01587                                               \{}
\DoxyCodeLine{01588   \textcolor{keywordflow}{return} m\_range.m\_r0 <= r \&\& r <= m\_range.m\_r1;}
\DoxyCodeLine{01589 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a0b0664e13d46bea2ffbd0a662430d217}\label{class_t_cell_selection_a0b0664e13d46bea2ffbd0a662430d217}} 
\index{TCellSelection@{TCellSelection}!openTimeStretchPopup@{openTimeStretchPopup}}
\index{openTimeStretchPopup@{openTimeStretchPopup}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{openTimeStretchPopup()}{openTimeStretchPopup()}}
{\footnotesize\ttfamily void TCell\+Selection\+::open\+Time\+Stretch\+Popup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02677                                           \{}
\DoxyCodeLine{02678   \textcolor{keywordflow}{if} (!m\_timeStretchPopup) m\_timeStretchPopup = \textcolor{keyword}{new} \mbox{\hyperlink{class_time_stretch_popup}{TimeStretchPopup}}();}
\DoxyCodeLine{02679   m\_timeStretchPopup-\/>show();}
\DoxyCodeLine{02680   m\_timeStretchPopup-\/>raise();}
\DoxyCodeLine{02681   m\_timeStretchPopup-\/>activateWindow();}
\DoxyCodeLine{02682 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_aa2f689b09a8e79f317418f0d794eeb42}\label{class_t_cell_selection_aa2f689b09a8e79f317418f0d794eeb42}} 
\index{TCellSelection@{TCellSelection}!overWritePasteCells@{overWritePasteCells}}
\index{overWritePasteCells@{overWritePasteCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{overWritePasteCells()}{overWritePasteCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::over\+Write\+Paste\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02993                                          \{}
\DoxyCodeLine{02994   \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{02995   getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{02996 }
\DoxyCodeLine{02997   QClipboard *clipboard     = QApplication::clipboard();}
\DoxyCodeLine{02998   \textcolor{keyword}{const} QMimeData *mimeData = clipboard-\/>mimeData();}
\DoxyCodeLine{02999 }
\DoxyCodeLine{03000   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{03001   \textcolor{keywordflow}{if} (\textcolor{keyword}{const} \mbox{\hyperlink{class_t_cell_data}{TCellData}} *cellData = \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_t_cell_data}{TCellData}} *\textcolor{keyword}{>}(mimeData)) \{}
\DoxyCodeLine{03002     \textcolor{keywordflow}{if} (isEmpty())  \textcolor{comment}{// Se la selezione delle celle e' vuota ritorno.}}
\DoxyCodeLine{03003       \textcolor{keywordflow}{return};}
\DoxyCodeLine{03004 }
\DoxyCodeLine{03005     \textcolor{keywordflow}{if} (cellData-\/>getCellCount() == 0) \{}
\DoxyCodeLine{03006       DVGui::error(QObject::tr(\textcolor{stringliteral}{"{}No data to paste."{}}));}
\DoxyCodeLine{03007       \textcolor{keywordflow}{return};}
\DoxyCodeLine{03008     \}}
\DoxyCodeLine{03009 }
\DoxyCodeLine{03010     \mbox{\hyperlink{class_xsheet_viewer}{XsheetViewer}} *viewer = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentXsheetViewer();}
\DoxyCodeLine{03011     \textcolor{keywordflow}{if} (viewer \&\& !viewer-\/>orientation()-\/>isVerticalTimeline()) \{}
\DoxyCodeLine{03012       \textcolor{keywordtype}{int} cAdj = cellData-\/>getColCount() -\/ 1;}
\DoxyCodeLine{03013       c0 -\/= cAdj;}
\DoxyCodeLine{03014       c1 -\/= cAdj;}
\DoxyCodeLine{03015     \}}
\DoxyCodeLine{03016 }
\DoxyCodeLine{03017     \textcolor{keywordtype}{int} oldR0 = r0;}
\DoxyCodeLine{03018     \textcolor{keywordtype}{int} oldC0 = c0;}
\DoxyCodeLine{03019     \textcolor{keywordtype}{int} oldR1 = r1;}
\DoxyCodeLine{03020     \textcolor{keywordtype}{int} oldC1 = c1;}
\DoxyCodeLine{03021 }
\DoxyCodeLine{03022     \textcolor{comment}{/*-\/-\/ ペースト先の各カラムが、コピーした各セルと同種ならばOK -\/-\/*/}}
\DoxyCodeLine{03023     \textcolor{keywordflow}{if} (!cellData-\/>canChange(xsh, c0)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03024 }
\DoxyCodeLine{03025     \textcolor{comment}{// Check Circular References}}
\DoxyCodeLine{03026     \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{03027     \textcolor{keywordflow}{for} (i = 0; i < cellData-\/>getCellCount(); i++) \{}
\DoxyCodeLine{03028       \textcolor{keywordflow}{if} (!xsh-\/>\mbox{\hyperlink{class_t_xsheet_a2643b21089ce82cc7d1337958a0b344e}{checkCircularReferences}}(cellData-\/>getCell(i))) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03029       DVGui::error(}
\DoxyCodeLine{03030           QObject::tr(\textcolor{stringliteral}{"{}It is not possible to paste the cells: there is a "{}}}
\DoxyCodeLine{03031                       \textcolor{stringliteral}{"{}circular reference."{}}));}
\DoxyCodeLine{03032       \textcolor{keywordflow}{return};}
\DoxyCodeLine{03033     \}}
\DoxyCodeLine{03034 }
\DoxyCodeLine{03035     \textcolor{comment}{/*-\/-\/-\/-\/ Undoのためにペースト前のCellDataを保存しておく -\/-\/*/}}
\DoxyCodeLine{03036     r1                    = r0 + cellData-\/>getRowCount() -\/ 1;}
\DoxyCodeLine{03037     c1                    = c0 + cellData-\/>getColCount() -\/ 1;}
\DoxyCodeLine{03038     \mbox{\hyperlink{class_t_cell_data}{TCellData}} *beforeData = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_cell_data}{TCellData}}();}
\DoxyCodeLine{03039     beforeData-\/>setCells(xsh, r0, c0, r1, c1);}
\DoxyCodeLine{03040 }
\DoxyCodeLine{03041     \textcolor{comment}{/*-\/-\/ InsertをFalseにすることで、Overwriteペーストになる}}
\DoxyCodeLine{03042 \textcolor{comment}{            r1,c1はペースト範囲にあわせリサイズされる}}
\DoxyCodeLine{03043 \textcolor{comment}{    -\/-\/*/}}
\DoxyCodeLine{03044     \textcolor{keywordtype}{bool} isPaste = pasteCellsWithoutUndo(r0, c0, r1, c1, \textcolor{keyword}{false});}
\DoxyCodeLine{03045 }
\DoxyCodeLine{03046     \textcolor{keywordflow}{if} (!isPaste) \{}
\DoxyCodeLine{03047       \textcolor{keyword}{delete} beforeData;}
\DoxyCodeLine{03048       \textcolor{keywordflow}{return};}
\DoxyCodeLine{03049     \}}
\DoxyCodeLine{03050 }
\DoxyCodeLine{03051     \textcolor{comment}{/*-\/-\/ 各カラムについて、ペースト前にカラムが空だったならtrue -\/-\/*/}}
\DoxyCodeLine{03052     std::vector<bool> areColumnsEmpty;}
\DoxyCodeLine{03053     \textcolor{keywordtype}{int} c;}
\DoxyCodeLine{03054     \textcolor{comment}{/*-\/-\/ ペースト後の各カラムについて -\/-\/*/}}
\DoxyCodeLine{03055     \textcolor{keywordflow}{for} (c = c0; c <= c1; c++) \{}
\DoxyCodeLine{03056       \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(c);}
\DoxyCodeLine{03057       \textcolor{keywordflow}{if} (!column) \{}
\DoxyCodeLine{03058         areColumnsEmpty.push\_back(\textcolor{keyword}{false});}
\DoxyCodeLine{03059         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03060       \}}
\DoxyCodeLine{03061       \textcolor{keywordtype}{int} newCr0, newCr1;}
\DoxyCodeLine{03062       \textcolor{comment}{/*-\/-\/ 新たなカラムに何かペーストされているかどうか -\/-\/*/}}
\DoxyCodeLine{03063       column-\/>getRange(newCr0, newCr1);}
\DoxyCodeLine{03064       areColumnsEmpty.push\_back(!column || column-\/>isEmpty() ||}
\DoxyCodeLine{03065                                 (newCr0 == r0 \&\& newCr1 == r1));}
\DoxyCodeLine{03066     \}}
\DoxyCodeLine{03067     TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{03068 }
\DoxyCodeLine{03069     \textcolor{comment}{// make sure that the pasting levels are registered in the scene cast}}
\DoxyCodeLine{03070     \textcolor{comment}{// it may rename the level if there is another level with the same name}}
\DoxyCodeLine{03071     std::set<TXshLevel *> pastedLevels;}
\DoxyCodeLine{03072     getLevelSetFromData(cellData, pastedLevels);}
\DoxyCodeLine{03073     LevelCmd::addMissingLevelsToCast(pastedLevels);}
\DoxyCodeLine{03074 }
\DoxyCodeLine{03075     \textcolor{comment}{/*-\/-\/ r0,c0,r1,c1はペーストされた範囲　old付きはペースト前の選択範囲 -\/-\/*/}}
\DoxyCodeLine{03076     TUndoManager::manager()-\/>add(}
\DoxyCodeLine{03077         \textcolor{keyword}{new} OverwritePasteCellsUndo(r0, c0, r1, c1, oldR0, oldC0, oldR1, oldC1,}
\DoxyCodeLine{03078                                     areColumnsEmpty, beforeData));}
\DoxyCodeLine{03079     TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{03080     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{03081 }
\DoxyCodeLine{03082     \textcolor{keyword}{delete} beforeData;}
\DoxyCodeLine{03083   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{03084     DVGui::error(QObject::tr(\textcolor{stringliteral}{"{}Cannot paste data \(\backslash\)n Nothing to paste"{}}));}
\DoxyCodeLine{03085 }
\DoxyCodeLine{03086   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{03087 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a898442459597a445ce2fe1c5ae8eff2b}\label{class_t_cell_selection_a898442459597a445ce2fe1c5ae8eff2b}} 
\index{TCellSelection@{TCellSelection}!overwritePasteNumbers@{overwritePasteNumbers}}
\index{overwritePasteNumbers@{overwritePasteNumbers}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{overwritePasteNumbers()}{overwritePasteNumbers()}}
{\footnotesize\ttfamily void TCell\+Selection\+::overwrite\+Paste\+Numbers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{03092                                            \{}
\DoxyCodeLine{03093   \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{03094   getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{03095   \textcolor{keywordflow}{if} (c0 < 0) c0 = 0;  \textcolor{comment}{// Ignore camera column}}
\DoxyCodeLine{03096 }
\DoxyCodeLine{03097   QClipboard *clipboard     = QApplication::clipboard();}
\DoxyCodeLine{03098   \textcolor{keyword}{const} QMimeData *mimeData = clipboard-\/>mimeData();}
\DoxyCodeLine{03099 }
\DoxyCodeLine{03100   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{03101   \textcolor{keywordflow}{if} (\textcolor{keyword}{const} \mbox{\hyperlink{class_t_cell_data}{TCellData}} *cellData = \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_t_cell_data}{TCellData}} *\textcolor{keyword}{>}(mimeData)) \{}
\DoxyCodeLine{03102     \textcolor{keywordflow}{if} (isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03103 }
\DoxyCodeLine{03104     \textcolor{keywordflow}{if} (cellData-\/>getCellCount() == 0) \{}
\DoxyCodeLine{03105       DVGui::error(QObject::tr(\textcolor{stringliteral}{"{}No data to paste."{}}));}
\DoxyCodeLine{03106       \textcolor{keywordflow}{return};}
\DoxyCodeLine{03107     \}}
\DoxyCodeLine{03108 }
\DoxyCodeLine{03109     \mbox{\hyperlink{class_xsheet_viewer}{XsheetViewer}} *viewer = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentXsheetViewer();}
\DoxyCodeLine{03110     \textcolor{keywordflow}{if} (viewer \&\& !viewer-\/>orientation()-\/>isVerticalTimeline()) \{}
\DoxyCodeLine{03111       \textcolor{keywordtype}{int} cAdj = cellData-\/>getColCount() -\/ 1;}
\DoxyCodeLine{03112       c0 -\/= cAdj;}
\DoxyCodeLine{03113       c1 -\/= cAdj;}
\DoxyCodeLine{03114     \}}
\DoxyCodeLine{03115 }
\DoxyCodeLine{03116     \textcolor{keywordtype}{int} oldR0 = r0;}
\DoxyCodeLine{03117     \textcolor{keywordtype}{int} oldC0 = c0;}
\DoxyCodeLine{03118     \textcolor{keywordtype}{int} oldR1 = r1;}
\DoxyCodeLine{03119     \textcolor{keywordtype}{int} oldC1 = c1;}
\DoxyCodeLine{03120 }
\DoxyCodeLine{03121     \textcolor{comment}{// Check if the copied cells are the same type as the target columns}}
\DoxyCodeLine{03122     \textcolor{keywordflow}{if} (!cellData-\/>canChange(xsh, c0)) \{}
\DoxyCodeLine{03123       DVGui::error(}
\DoxyCodeLine{03124           QObject::tr(\textcolor{stringliteral}{"{}It is not possible to paste the cells: "{}}}
\DoxyCodeLine{03125                       \textcolor{stringliteral}{"{}Some column is locked or column type is not match."{}}));}
\DoxyCodeLine{03126       \textcolor{keywordflow}{return};}
\DoxyCodeLine{03127     \}}
\DoxyCodeLine{03128 }
\DoxyCodeLine{03129     \textcolor{comment}{// Check Circular References}}
\DoxyCodeLine{03130     \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{03131     \textcolor{keywordflow}{for} (i = 0; i < cellData-\/>getCellCount(); i++) \{}
\DoxyCodeLine{03132       \textcolor{keywordflow}{if} (!xsh-\/>\mbox{\hyperlink{class_t_xsheet_a2643b21089ce82cc7d1337958a0b344e}{checkCircularReferences}}(cellData-\/>getCell(i))) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03133       DVGui::error(}
\DoxyCodeLine{03134           QObject::tr(\textcolor{stringliteral}{"{}It is not possible to paste the cells: there is a "{}}}
\DoxyCodeLine{03135                       \textcolor{stringliteral}{"{}circular reference."{}}));}
\DoxyCodeLine{03136       \textcolor{keywordflow}{return};}
\DoxyCodeLine{03137     \}}
\DoxyCodeLine{03138 }
\DoxyCodeLine{03139     \textcolor{comment}{// store celldata for undo}}
\DoxyCodeLine{03140     r1 = r0 + cellData-\/>getRowCount() -\/ 1;}
\DoxyCodeLine{03141     \textcolor{keywordflow}{if} (cellData-\/>getColCount() != 1 || c0 == c1)}
\DoxyCodeLine{03142       c1 = c0 + cellData-\/>getColCount() -\/ 1;}
\DoxyCodeLine{03143     \mbox{\hyperlink{class_t_cell_data}{TCellData}} *beforeData = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_cell_data}{TCellData}}();}
\DoxyCodeLine{03144     beforeData-\/>setCells(xsh, r0, c0, r1, c1);}
\DoxyCodeLine{03145 }
\DoxyCodeLine{03146     \textcolor{keywordtype}{bool} isPaste = pasteNumbersWithoutUndo(r0, c0, r1, c1);}
\DoxyCodeLine{03147 }
\DoxyCodeLine{03148     \textcolor{keywordflow}{if} (!isPaste) \{}
\DoxyCodeLine{03149       \textcolor{keyword}{delete} beforeData;}
\DoxyCodeLine{03150       \textcolor{keywordflow}{return};}
\DoxyCodeLine{03151     \}}
\DoxyCodeLine{03152 }
\DoxyCodeLine{03153     \textcolor{comment}{// r0,c0,r1,c1 : pasted region  oldR0,oldC0,oldR1,oldC1 : selected area}}
\DoxyCodeLine{03154     \textcolor{comment}{// before pasting}}
\DoxyCodeLine{03155     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} OverwritePasteNumbersUndo(}
\DoxyCodeLine{03156         r0, c0, r1, c1, oldR0, oldC0, oldR1, oldC1, beforeData));}
\DoxyCodeLine{03157     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{03158 }
\DoxyCodeLine{03159     \textcolor{keyword}{delete} beforeData;}
\DoxyCodeLine{03160   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{03161     DVGui::error(QObject::tr(\textcolor{stringliteral}{"{}Cannot paste data \(\backslash\)n Nothing to paste"{}}));}
\DoxyCodeLine{03162 }
\DoxyCodeLine{03163   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{03164 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a245377ce303009f1b513a8e1d9fec3ad}\label{class_t_cell_selection_a245377ce303009f1b513a8e1d9fec3ad}} 
\index{TCellSelection@{TCellSelection}!pasteCells@{pasteCells}}
\index{pasteCells@{pasteCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{pasteCells()}{pasteCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::paste\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01686                                 \{}
\DoxyCodeLine{01687   \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{01688   getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{01689   QClipboard *clipboard     = QApplication::clipboard();}
\DoxyCodeLine{01690   \textcolor{keyword}{const} QMimeData *mimeData = clipboard-\/>mimeData();}
\DoxyCodeLine{01691   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh              = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{01692   \mbox{\hyperlink{class_xsheet_viewer}{XsheetViewer}} *viewer      = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentXsheetViewer();}
\DoxyCodeLine{01693 }
\DoxyCodeLine{01694   \textcolor{keywordtype}{bool} initUndo = \textcolor{keyword}{false};}
\DoxyCodeLine{01695   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_cell_keyframe_data}{TCellKeyframeData}} *cellKeyframeData =}
\DoxyCodeLine{01696       \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_t_cell_keyframe_data}{TCellKeyframeData}} *\textcolor{keyword}{>}(mimeData);}
\DoxyCodeLine{01697 }
\DoxyCodeLine{01698   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_cell_data}{TCellData}} *cellData = \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_t_cell_data}{TCellData}} *\textcolor{keyword}{>}(mimeData);}
\DoxyCodeLine{01699   \textcolor{keywordflow}{if} (!cellData \&\& cellKeyframeData) cellData = cellKeyframeData-\/>getCellData();}
\DoxyCodeLine{01700   \textcolor{keywordflow}{if} (cellData) \{}
\DoxyCodeLine{01701     \textcolor{keywordflow}{if} (isEmpty())  \textcolor{comment}{// Se la selezione delle celle e' vuota ritorno.}}
\DoxyCodeLine{01702       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01703 }
\DoxyCodeLine{01704     \textcolor{keywordflow}{if} (cellData-\/>getCellCount() == 0) \{}
\DoxyCodeLine{01705       DVGui::error(QObject::tr(\textcolor{stringliteral}{"{}No data to paste."{}}));}
\DoxyCodeLine{01706       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01707     \}}
\DoxyCodeLine{01708 }
\DoxyCodeLine{01709     \textcolor{keywordflow}{if} (viewer \&\& !viewer-\/>orientation()-\/>isVerticalTimeline()) \{}
\DoxyCodeLine{01710       \textcolor{keywordtype}{int} cAdj = cellData-\/>getColCount() -\/ 1;}
\DoxyCodeLine{01711       c0 -\/= cAdj;}
\DoxyCodeLine{01712       c1 -\/= cAdj;}
\DoxyCodeLine{01713     \}}
\DoxyCodeLine{01714 }
\DoxyCodeLine{01715     \textcolor{keywordtype}{int} oldR0 = r0;}
\DoxyCodeLine{01716     \textcolor{keywordtype}{int} oldC0 = c0;}
\DoxyCodeLine{01717     \textcolor{keywordtype}{int} oldR1 = r1;}
\DoxyCodeLine{01718     \textcolor{keywordtype}{int} oldC1 = c1;}
\DoxyCodeLine{01719     \textcolor{keywordflow}{if} (!cellData-\/>\mbox{\hyperlink{class_t_cell_data_ad7816889ccb7c40df3f096fc0b9bb0fc}{canChange}}(xsh, c0)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01720 }
\DoxyCodeLine{01721     \textcolor{comment}{// Check Circular References}}
\DoxyCodeLine{01722     \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01723     \textcolor{keywordflow}{for} (i = 0; i < cellData-\/>getCellCount(); i++) \{}
\DoxyCodeLine{01724       \textcolor{keywordflow}{if} (!xsh-\/>\mbox{\hyperlink{class_t_xsheet_a2643b21089ce82cc7d1337958a0b344e}{checkCircularReferences}}(cellData-\/>getCell(i))) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01725       DVGui::error(}
\DoxyCodeLine{01726           QObject::tr(\textcolor{stringliteral}{"{}It is not possible to paste the cells: there is a "{}}}
\DoxyCodeLine{01727                       \textcolor{stringliteral}{"{}circular reference."{}}));}
\DoxyCodeLine{01728       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01729     \}}
\DoxyCodeLine{01730 }
\DoxyCodeLine{01731     \textcolor{keywordtype}{bool} isPaste = pasteCellsWithoutUndo(cellData, r0, c0, r1, c1);}
\DoxyCodeLine{01732 }
\DoxyCodeLine{01733     \textcolor{comment}{// Se la selezione corrente e' TCellSelection selezione le celle copiate}}
\DoxyCodeLine{01734     \mbox{\hyperlink{class_t_cell_selection}{TCellSelection}} *cellSelection = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_cell_selection}{TCellSelection}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{01735         \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>getSelection());}
\DoxyCodeLine{01736     \textcolor{keywordflow}{if} (cellSelection) cellSelection-\/>\mbox{\hyperlink{class_t_cell_selection_ac081c8305a9b9269fbf82eb0c9e06bc3}{selectCells}}(r0, c0, r1, c1);}
\DoxyCodeLine{01737 }
\DoxyCodeLine{01738     \textcolor{comment}{// Controllo se le colonne erano vuote prima del paste}}
\DoxyCodeLine{01739     \textcolor{comment}{// n.b. devo farlo dopo il paste perche' prima non ho il range delle colonne}}
\DoxyCodeLine{01740     \textcolor{comment}{// incollate corrette.}}
\DoxyCodeLine{01741     std::vector<bool> areColumnsEmpty;}
\DoxyCodeLine{01742     \textcolor{keywordtype}{int} c;}
\DoxyCodeLine{01743     \textcolor{keywordflow}{for} (c = c0; c <= c1; c++) \{}
\DoxyCodeLine{01744       \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(c);}
\DoxyCodeLine{01745       \textcolor{keywordflow}{if} (!column) \{}
\DoxyCodeLine{01746         areColumnsEmpty.push\_back(\textcolor{keyword}{false});}
\DoxyCodeLine{01747         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01748       \}}
\DoxyCodeLine{01749       \textcolor{keywordtype}{int} newCr0, newCr1;}
\DoxyCodeLine{01750       column-\/>getRange(newCr0, newCr1);}
\DoxyCodeLine{01751       areColumnsEmpty.push\_back(!column || column-\/>isEmpty() ||}
\DoxyCodeLine{01752                                 (newCr0 == r0 \&\& newCr1 == r1));}
\DoxyCodeLine{01753     \}}
\DoxyCodeLine{01754     \textcolor{keywordflow}{if} (!isPaste) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01755 }
\DoxyCodeLine{01756     initUndo = \textcolor{keyword}{true};}
\DoxyCodeLine{01757     TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01758 }
\DoxyCodeLine{01759     \textcolor{comment}{// make sure that the pasting levels are registered in the scene cast}}
\DoxyCodeLine{01760     \textcolor{comment}{// it may rename the level if there is another level with the same name}}
\DoxyCodeLine{01761     std::set<TXshLevel *> pastedLevels;}
\DoxyCodeLine{01762     getLevelSetFromData(cellData, pastedLevels);}
\DoxyCodeLine{01763     LevelCmd::addMissingLevelsToCast(pastedLevels);}
\DoxyCodeLine{01764 }
\DoxyCodeLine{01765     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} PasteCellsUndo(}
\DoxyCodeLine{01766         r0, c0, r1, c1, oldR0, oldC0, oldR1, oldC1, areColumnsEmpty));}
\DoxyCodeLine{01767     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{01768   \}}
\DoxyCodeLine{01769 }
\DoxyCodeLine{01770   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_keyframe_data}{TKeyframeData}} *keyframeData =}
\DoxyCodeLine{01771       \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_t_keyframe_data}{TKeyframeData}} *\textcolor{keyword}{>}(mimeData);}
\DoxyCodeLine{01772   \textcolor{keywordflow}{if} (!keyframeData \&\& cellKeyframeData)}
\DoxyCodeLine{01773     keyframeData = cellKeyframeData-\/>getKeyframeData();}
\DoxyCodeLine{01774   \textcolor{keywordflow}{if} (keyframeData) \{}
\DoxyCodeLine{01775     \textcolor{keywordflow}{if} (keyframeData-\/>m\_keyData.empty()) \{}
\DoxyCodeLine{01776       DVGui::error(QObject::tr(}
\DoxyCodeLine{01777           \textcolor{stringliteral}{"{}It is not possible to paste data: there is nothing to paste."{}}));}
\DoxyCodeLine{01778       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01779     \}}
\DoxyCodeLine{01780     \mbox{\hyperlink{class_t_keyframe_selection}{TKeyframeSelection}} selection;}
\DoxyCodeLine{01781     \textcolor{keywordflow}{if} (isEmpty() \&\& \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentObject()-\/>getObjectId() ==}
\DoxyCodeLine{01782                          TStageObjectId::CameraId(xsh-\/>getCameraColumnIndex()))}
\DoxyCodeLine{01783     \textcolor{comment}{// Se la selezione e' vuota e l'objectId e' quello della camera sono nella}}
\DoxyCodeLine{01784     \textcolor{comment}{// colonna di camera quindi devo selezionare la row corrente e -\/1.}}
\DoxyCodeLine{01785     \{}
\DoxyCodeLine{01786       \textcolor{keywordtype}{int} row = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}()-\/>getFrame();}
\DoxyCodeLine{01787       selection.select(row, -\/1);}
\DoxyCodeLine{01788     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01789       \textcolor{comment}{// Retrieves all keyframe positions from mime data and translates them by}}
\DoxyCodeLine{01790       \textcolor{comment}{// (r0,c0)}}
\DoxyCodeLine{01791       std::set<TKeyframeSelection::Position> positions;}
\DoxyCodeLine{01792       \textcolor{keywordtype}{int} newC0 = c0;}
\DoxyCodeLine{01793       \textcolor{keywordflow}{if} (viewer \&\& !viewer-\/>orientation()-\/>isVerticalTimeline() \&\& !cellData)}
\DoxyCodeLine{01794         newC0 = c0 -\/ keyframeData-\/>getColumnSpanCount() + 1;}
\DoxyCodeLine{01795       TKeyframeSelection::Position offset(keyframeData-\/>getKeyframesOffset());}
\DoxyCodeLine{01796       positions.insert(TKeyframeSelection::Position(r0 + offset.first,}
\DoxyCodeLine{01797                                                     newC0 + offset.second));}
\DoxyCodeLine{01798       keyframeData-\/>getKeyframes(positions);}
\DoxyCodeLine{01799       selection.select(positions);}
\DoxyCodeLine{01800 }
\DoxyCodeLine{01801       \textcolor{keywordflow}{if} (!cellKeyframeData) \{}
\DoxyCodeLine{01802         \textcolor{comment}{// Retrieve the keyframes bbox}}
\DoxyCodeLine{01803         r1 = positions.rbegin()-\/>first;}
\DoxyCodeLine{01804         c1 = c0;}
\DoxyCodeLine{01805 }
\DoxyCodeLine{01806         std::set<TKeyframeSelection::Position>::const\_iterator it,}
\DoxyCodeLine{01807             end = positions.end();}
\DoxyCodeLine{01808         \textcolor{keywordflow}{for} (it = positions.begin(); it != end; ++it)}
\DoxyCodeLine{01809           c1 = std::max(c1, it-\/>second);}
\DoxyCodeLine{01810       \}}
\DoxyCodeLine{01811     \}}
\DoxyCodeLine{01812     \textcolor{keywordflow}{if} (!initUndo) \{}
\DoxyCodeLine{01813       initUndo = \textcolor{keyword}{true};}
\DoxyCodeLine{01814       TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01815     \}}
\DoxyCodeLine{01816     selection.pasteKeyframesWithShift(r0, r1, c0, c1);}
\DoxyCodeLine{01817   \}}
\DoxyCodeLine{01818 }
\DoxyCodeLine{01819   \textcolor{keywordflow}{if} (\textcolor{keyword}{const} \mbox{\hyperlink{class_drawing_data}{DrawingData}} *drawingData =}
\DoxyCodeLine{01820           \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_drawing_data}{DrawingData}} *\textcolor{keyword}{>}(mimeData)) \{}
\DoxyCodeLine{01821     \textcolor{keywordflow}{if} (isEmpty())  \textcolor{comment}{// Se la selezione delle celle e' vuota ritorno.}}
\DoxyCodeLine{01822       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01823 }
\DoxyCodeLine{01824     std::set<TFrameId> frameIds;}
\DoxyCodeLine{01825     drawingData-\/>getFrames(frameIds);}
\DoxyCodeLine{01826     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *level = drawingData-\/>getLevel();}
\DoxyCodeLine{01827     \textcolor{keywordflow}{if} (level \&\& !frameIds.empty())}
\DoxyCodeLine{01828       pasteDrawingsInCellWithoutUndo(xsh, level, frameIds, r0, c0);}
\DoxyCodeLine{01829     \textcolor{keywordflow}{if} (!initUndo) \{}
\DoxyCodeLine{01830       initUndo = \textcolor{keyword}{true};}
\DoxyCodeLine{01831       TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01832     \}}
\DoxyCodeLine{01833     TUndoManager::manager()-\/>add(}
\DoxyCodeLine{01834         \textcolor{keyword}{new} PasteDrawingsInCellUndo(level, frameIds, r0, c0));}
\DoxyCodeLine{01835   \}}
\DoxyCodeLine{01836   \textcolor{keywordflow}{if} (\textcolor{keyword}{const} \mbox{\hyperlink{class_strokes_data}{StrokesData}} *strokesData =}
\DoxyCodeLine{01837           \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_strokes_data}{StrokesData}} *\textcolor{keyword}{>}(mimeData)) \{}
\DoxyCodeLine{01838     \textcolor{keywordflow}{if} (isEmpty())  \textcolor{comment}{// Se la selezione delle celle e' vuota ritorno.}}
\DoxyCodeLine{01839       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01840 }
\DoxyCodeLine{01841     \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r0, c0).\mbox{\hyperlink{class_t_xsh_cell_a20b623d308bc09b820ec6b116516f564}{getImage}}(\textcolor{keyword}{false});}
\DoxyCodeLine{01842     \textcolor{keywordflow}{if} (!img \&\& r0 > 0) \{}
\DoxyCodeLine{01843       \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r0 -\/ 1, c0);}
\DoxyCodeLine{01844       \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = cell.m\_level.getPointer();}
\DoxyCodeLine{01845       \textcolor{keywordflow}{if} (xl \&\& (xl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() != OVL\_XSHLEVEL ||}
\DoxyCodeLine{01846                  xl-\/>\mbox{\hyperlink{class_t_xsh_level_ab8ffcf067cadf0e1c4081b54ffde249d}{getPath}}().getFrame() != TFrameId::NO\_FRAME))}
\DoxyCodeLine{01847         img = cell.\mbox{\hyperlink{class_t_xsh_cell_a20b623d308bc09b820ec6b116516f564}{getImage}}(\textcolor{keyword}{false});}
\DoxyCodeLine{01848     \}}
\DoxyCodeLine{01849     \textcolor{keywordflow}{if} (!initUndo) \{}
\DoxyCodeLine{01850       initUndo = \textcolor{keyword}{true};}
\DoxyCodeLine{01851       TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01852     \}}
\DoxyCodeLine{01853     \mbox{\hyperlink{class_raster_image_data}{RasterImageData}} *rasterImageData = 0;}
\DoxyCodeLine{01854     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = img) \{}
\DoxyCodeLine{01855       rasterImageData = strokesData-\/>toToonzImageData(ti);}
\DoxyCodeLine{01856       pasteRasterImageInCell(r0, c0, rasterImageData);}
\DoxyCodeLine{01857     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} ri = img) \{}
\DoxyCodeLine{01858       \textcolor{keywordtype}{double} dpix, dpiy;}
\DoxyCodeLine{01859       ri-\/>getDpi(dpix, dpiy);}
\DoxyCodeLine{01860       \textcolor{keywordflow}{if} (dpix == 0 || dpiy == 0) \{}
\DoxyCodeLine{01861         \mbox{\hyperlink{class_t_point_t}{TPointD}} dpi = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a35d49d436513243d059eee3a25ffa2ef}{getScene}}()-\/>\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}()-\/>\mbox{\hyperlink{class_t_camera_adf45510b5dc53f6481308ef489fbd5a9}{getDpi}}();}
\DoxyCodeLine{01862         dpix        = dpi.x;}
\DoxyCodeLine{01863         dpiy        = dpi.y;}
\DoxyCodeLine{01864         ri-\/>setDpi(dpix, dpiy);}
\DoxyCodeLine{01865       \}}
\DoxyCodeLine{01866       rasterImageData = strokesData-\/>toFullColorImageData(ri);}
\DoxyCodeLine{01867       pasteRasterImageInCell(r0, c0, rasterImageData);}
\DoxyCodeLine{01868     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01869       pasteStrokesInCell(r0, c0, strokesData);}
\DoxyCodeLine{01870   \}}
\DoxyCodeLine{01871   \textcolor{keywordflow}{if} (\textcolor{keyword}{const} \mbox{\hyperlink{class_raster_image_data}{RasterImageData}} *rasterImageData =}
\DoxyCodeLine{01872           \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_raster_image_data}{RasterImageData}} *\textcolor{keyword}{>}(mimeData)) \{}
\DoxyCodeLine{01873     \textcolor{keywordflow}{if} (isEmpty())  \textcolor{comment}{// Se la selezione delle celle e' vuota ritorno.}}
\DoxyCodeLine{01874       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01875 }
\DoxyCodeLine{01876     \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r0, c0).\mbox{\hyperlink{class_t_xsh_cell_a20b623d308bc09b820ec6b116516f564}{getImage}}(\textcolor{keyword}{false});}
\DoxyCodeLine{01877     \textcolor{keywordflow}{if} (!img \&\& r0 > 0) \{}
\DoxyCodeLine{01878       \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r0 -\/ 1, c0);}
\DoxyCodeLine{01879       \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = cell.m\_level.getPointer();}
\DoxyCodeLine{01880       \textcolor{keywordflow}{if} (xl \&\& (xl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() != OVL\_XSHLEVEL ||}
\DoxyCodeLine{01881                  xl-\/>\mbox{\hyperlink{class_t_xsh_level_ab8ffcf067cadf0e1c4081b54ffde249d}{getPath}}().getFrame() != TFrameId::NO\_FRAME))}
\DoxyCodeLine{01882         img = cell.\mbox{\hyperlink{class_t_xsh_cell_a20b623d308bc09b820ec6b116516f564}{getImage}}(\textcolor{keyword}{false});}
\DoxyCodeLine{01883     \}}
\DoxyCodeLine{01884     \textcolor{keyword}{const} \mbox{\hyperlink{class_full_color_image_data}{FullColorImageData}} *fullColData =}
\DoxyCodeLine{01885         \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_full_color_image_data}{FullColorImageData}} *\textcolor{keyword}{>}(rasterImageData);}
\DoxyCodeLine{01886     \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti(img);}
\DoxyCodeLine{01887     \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi(img);}
\DoxyCodeLine{01888     \textcolor{keywordflow}{if} (fullColData \&\& (vi || ti)) \{}
\DoxyCodeLine{01889       DVGui::error(QObject::tr(}
\DoxyCodeLine{01890           \textcolor{stringliteral}{"{}The copied selection cannot be pasted in the current drawing."{}}));}
\DoxyCodeLine{01891       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01892     \}}
\DoxyCodeLine{01893     \textcolor{keywordflow}{if} (!initUndo) \{}
\DoxyCodeLine{01894       initUndo = \textcolor{keyword}{true};}
\DoxyCodeLine{01895       TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01896     \}}
\DoxyCodeLine{01897     \textcolor{keywordflow}{if} (vi) \{}
\DoxyCodeLine{01898       \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r0, c0).\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{01899       \textcolor{keywordflow}{if} (!sl) sl = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r0 -\/ 1, c0).\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{01900       assert(sl);}
\DoxyCodeLine{01901       \mbox{\hyperlink{class_strokes_data}{StrokesData}} *strokesData = rasterImageData-\/>toStrokesData(sl-\/>\mbox{\hyperlink{class_t_xsh_level_a06176566e80858dbb206112db08a92b9}{getScene}}());}
\DoxyCodeLine{01902       pasteStrokesInCell(r0, c0, strokesData);}
\DoxyCodeLine{01903     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01904       pasteRasterImageInCell(r0, c0, rasterImageData);}
\DoxyCodeLine{01905   \}}
\DoxyCodeLine{01906   \textcolor{keywordflow}{if} (!initUndo) \{}
\DoxyCodeLine{01907     DVGui::error(QObject::tr(}
\DoxyCodeLine{01908         \textcolor{stringliteral}{"{}It is not possible to paste data: there is nothing to paste."{}}));}
\DoxyCodeLine{01909     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01910   \}}
\DoxyCodeLine{01911   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{01912   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01913 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a688e865defd984b3c93f41a4e2ccf58d}\label{class_t_cell_selection_a688e865defd984b3c93f41a4e2ccf58d}} 
\index{TCellSelection@{TCellSelection}!pasteDuplicateCells@{pasteDuplicateCells}}
\index{pasteDuplicateCells@{pasteDuplicateCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{pasteDuplicateCells()}{pasteDuplicateCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::paste\+Duplicate\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01917                                          \{}
\DoxyCodeLine{01918   \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{01919   getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{01920 }
\DoxyCodeLine{01921   QClipboard *clipboard     = QApplication::clipboard();}
\DoxyCodeLine{01922   \textcolor{keyword}{const} QMimeData *mimeData = clipboard-\/>mimeData();}
\DoxyCodeLine{01923 }
\DoxyCodeLine{01924   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh         = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{01925   \mbox{\hyperlink{class_xsheet_viewer}{XsheetViewer}} *viewer = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentXsheetViewer();}
\DoxyCodeLine{01926 }
\DoxyCodeLine{01927   \textcolor{keywordtype}{bool} initUndo = \textcolor{keyword}{false};}
\DoxyCodeLine{01928   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_cell_keyframe_data}{TCellKeyframeData}} *cellKeyframeData =}
\DoxyCodeLine{01929       \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_t_cell_keyframe_data}{TCellKeyframeData}} *\textcolor{keyword}{>}(mimeData);}
\DoxyCodeLine{01930 }
\DoxyCodeLine{01931   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_cell_data}{TCellData}} *cellData = \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_t_cell_data}{TCellData}} *\textcolor{keyword}{>}(mimeData);}
\DoxyCodeLine{01932   \textcolor{keywordflow}{if} (!cellData \&\& cellKeyframeData) cellData = cellKeyframeData-\/>getCellData();}
\DoxyCodeLine{01933   \textcolor{keywordflow}{if} (!cellData) \{}
\DoxyCodeLine{01934     DVGui::error(QObject::tr(\textcolor{stringliteral}{"{}There are no copied cells to duplicate."{}}));}
\DoxyCodeLine{01935     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01936   \}}
\DoxyCodeLine{01937   \textcolor{keywordflow}{if} (cellData) \{}
\DoxyCodeLine{01938     \textcolor{comment}{// go through all the reasons this might fail}}
\DoxyCodeLine{01939     \textcolor{keywordflow}{if} (isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01940 }
\DoxyCodeLine{01941     \textcolor{keywordflow}{if} (cellData-\/>getCellCount() == 0) \{}
\DoxyCodeLine{01942       DVGui::error(QObject::tr(\textcolor{stringliteral}{"{}No data to paste."{}}));}
\DoxyCodeLine{01943       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01944     \}}
\DoxyCodeLine{01945 }
\DoxyCodeLine{01946     \textcolor{comment}{// xsheet columns increase in number as they go to the right}}
\DoxyCodeLine{01947     \textcolor{comment}{// timeline "{}columns"{} (visually rows) increase in number as they go up}}
\DoxyCodeLine{01948     \textcolor{comment}{// To paste in the frames the user would expect, we need to adjust the}}
\DoxyCodeLine{01949     \textcolor{comment}{// "{}column"{} placement if using the timeline.}}
\DoxyCodeLine{01950 }
\DoxyCodeLine{01951     \textcolor{keywordflow}{if} (viewer \&\& !viewer-\/>orientation()-\/>isVerticalTimeline()) \{}
\DoxyCodeLine{01952       \textcolor{keywordtype}{int} cAdj = cellData-\/>getColCount() -\/ 1;}
\DoxyCodeLine{01953       c0 -\/= cAdj;}
\DoxyCodeLine{01954       c1 -\/= cAdj;}
\DoxyCodeLine{01955     \}}
\DoxyCodeLine{01956 }
\DoxyCodeLine{01957     \textcolor{comment}{// make sure we aren't trying to paste anything in locked columns}}
\DoxyCodeLine{01958     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < cellData-\/>getColCount(); i++) \{}
\DoxyCodeLine{01959       \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(c0 + i);}
\DoxyCodeLine{01960       \textcolor{keywordflow}{if} (column \&\& column-\/>isLocked()) \{}
\DoxyCodeLine{01961         DVGui::warning(QObject::tr(\textcolor{stringliteral}{"{}Cannot paste cells on locked layers."{}}));}
\DoxyCodeLine{01962         \textcolor{keywordflow}{return};}
\DoxyCodeLine{01963       \}}
\DoxyCodeLine{01964     \}}
\DoxyCodeLine{01965 }
\DoxyCodeLine{01966     \textcolor{comment}{// make sure the camera column isn't included in the selection}}
\DoxyCodeLine{01967     \textcolor{keywordflow}{if} (c0 < 0) \{}
\DoxyCodeLine{01968       DVGui::warning(QObject::tr(\textcolor{stringliteral}{"{}Can't place drawings on the camera column."{}}));}
\DoxyCodeLine{01969       \textcolor{keywordflow}{return};}
\DoxyCodeLine{01970     \}}
\DoxyCodeLine{01971 }
\DoxyCodeLine{01972     \textcolor{keywordtype}{int} oldR0 = r0;}
\DoxyCodeLine{01973     \textcolor{keywordtype}{int} oldC0 = c0;}
\DoxyCodeLine{01974     \textcolor{keywordtype}{int} oldR1 = r1;}
\DoxyCodeLine{01975     \textcolor{keywordtype}{int} oldC1 = c1;}
\DoxyCodeLine{01976     \textcolor{keywordflow}{if} (!cellData-\/>\mbox{\hyperlink{class_t_cell_data_ad7816889ccb7c40df3f096fc0b9bb0fc}{canChange}}(xsh, c0)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01977 }
\DoxyCodeLine{01978     \textcolor{comment}{// find what cells we need}}
\DoxyCodeLine{01979     \textcolor{keywordtype}{int} cellCount = cellData-\/>getCellCount();}
\DoxyCodeLine{01980 }
\DoxyCodeLine{01981     \textcolor{comment}{// use a pair to ensure that only unique cells are duplicated}}
\DoxyCodeLine{01982     std::set<TXshCell> cells;}
\DoxyCodeLine{01983     std::vector<TXshCell> cellsVector;}
\DoxyCodeLine{01984     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < cellCount; i++) \{}
\DoxyCodeLine{01985       \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = cellData-\/>getCell(i);}
\DoxyCodeLine{01986       cells.insert(cell);}
\DoxyCodeLine{01987       cellsVector.push\_back(cell);}
\DoxyCodeLine{01988     \}}
\DoxyCodeLine{01989 }
\DoxyCodeLine{01990     \textcolor{comment}{// now put the set into a vector since it's easier to deal with}}
\DoxyCodeLine{01991     std::vector<TXshCell> uniqueCells;}
\DoxyCodeLine{01992     std::set<TXshCell>::iterator it = cells.begin();}
\DoxyCodeLine{01993     \textcolor{keywordflow}{while} (it != cells.end()) \{}
\DoxyCodeLine{01994       uniqueCells.push\_back(*it);}
\DoxyCodeLine{01995       it++;}
\DoxyCodeLine{01996     \}}
\DoxyCodeLine{01997 }
\DoxyCodeLine{01998     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl;}
\DoxyCodeLine{01999     \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} level;}
\DoxyCodeLine{02000 }
\DoxyCodeLine{02001     \textcolor{comment}{// check that the selection only includes types that can be duplicated and}}
\DoxyCodeLine{02002     \textcolor{comment}{// edited}}
\DoxyCodeLine{02003     it = cells.begin();}
\DoxyCodeLine{02004     \textcolor{keywordflow}{while} (it != cells.end()) \{}
\DoxyCodeLine{02005       \textcolor{keywordflow}{if} (it-\/>isEmpty()) \{}
\DoxyCodeLine{02006         it++;}
\DoxyCodeLine{02007         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02008       \}}
\DoxyCodeLine{02009       level = it-\/>m\_level;}
\DoxyCodeLine{02010       \textcolor{keywordflow}{if} (level) \{}
\DoxyCodeLine{02011         \textcolor{keywordtype}{int} levelType = level-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}();}
\DoxyCodeLine{02012         \textcolor{keywordflow}{if} (levelType == ZERARYFX\_XSHLEVEL || levelType == PLT\_XSHLEVEL ||}
\DoxyCodeLine{02013             levelType == SND\_XSHLEVEL || levelType == SND\_TXT\_XSHLEVEL ||}
\DoxyCodeLine{02014             levelType == MESH\_XSHLEVEL) \{}
\DoxyCodeLine{02015           DVGui::warning(}
\DoxyCodeLine{02016               QObject::tr(\textcolor{stringliteral}{"{}Cannot duplicate a drawing in the current column"{}}));}
\DoxyCodeLine{02017           \textcolor{keywordflow}{return};}
\DoxyCodeLine{02018         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}() \&\&}
\DoxyCodeLine{02019                    level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}()-\/>isReadOnly()) \{}
\DoxyCodeLine{02020           DVGui::warning(}
\DoxyCodeLine{02021               QObject::tr(\textcolor{stringliteral}{"{}Cannot duplicate frames in read only levels"{}}));}
\DoxyCodeLine{02022           \textcolor{keywordflow}{return};}
\DoxyCodeLine{02023         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}() \&\&}
\DoxyCodeLine{02024                    it-\/>\mbox{\hyperlink{class_t_xsh_simple_level_abb72e2ab0c1baeda0a8af3146003181d}{getFrameId}}() == TFrameId::NO\_FRAME) \{}
\DoxyCodeLine{02025           DVGui::warning(QObject::tr(}
\DoxyCodeLine{02026               \textcolor{stringliteral}{"{}Can only duplicate frames in image sequence levels."{}}));}
\DoxyCodeLine{02027           \textcolor{keywordflow}{return};}
\DoxyCodeLine{02028         \}}
\DoxyCodeLine{02029       \}}
\DoxyCodeLine{02030       it++;}
\DoxyCodeLine{02031     \}}
\DoxyCodeLine{02032 }
\DoxyCodeLine{02033     \textcolor{comment}{// now we do the work of duplicating cells}}
\DoxyCodeLine{02034 }
\DoxyCodeLine{02035     \textcolor{comment}{// start a undo block first}}
\DoxyCodeLine{02036     initUndo = \textcolor{keyword}{true};}
\DoxyCodeLine{02037     TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{02038 }
\DoxyCodeLine{02039     \textcolor{comment}{// Turn on sync level strip changes with xsheet if it is off}}
\DoxyCodeLine{02040     \textcolor{keywordtype}{bool} syncXsheetOn = \textcolor{keyword}{true};}
\DoxyCodeLine{02041     \textcolor{keywordflow}{if} (!Preferences::instance()-\/>isSyncLevelRenumberWithXsheetEnabled()) \{}
\DoxyCodeLine{02042       syncXsheetOn = \textcolor{keyword}{false};}
\DoxyCodeLine{02043       Preferences::instance()-\/>setValue(syncLevelRenumberWithXsheet, \textcolor{keyword}{true});}
\DoxyCodeLine{02044     \}}
\DoxyCodeLine{02045 }
\DoxyCodeLine{02046     \textcolor{comment}{// now actually duplicate}}
\DoxyCodeLine{02047     std::vector<std::pair<TXshCell, TXshCell>> cellPairs;}
\DoxyCodeLine{02048 }
\DoxyCodeLine{02049     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < uniqueCells.size(); i++) \{}
\DoxyCodeLine{02050       level = uniqueCells[i].m\_level;}
\DoxyCodeLine{02051       \textcolor{keywordflow}{if} (level) \{}
\DoxyCodeLine{02052         sl = uniqueCells[i].\mbox{\hyperlink{class_t_xsh_simple_level_aac1fd1d3ecf0778b8ee139c9119fcdef}{getSimpleLevel}}();}
\DoxyCodeLine{02053         \textcolor{keywordflow}{if} (sl) \{}
\DoxyCodeLine{02054           std::set<TFrameId> frames;}
\DoxyCodeLine{02055           \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = uniqueCells[i].getFrameId();}
\DoxyCodeLine{02056           frames.insert(fid);}
\DoxyCodeLine{02057           FilmstripCmd::duplicate(sl, frames, \textcolor{keyword}{true});}
\DoxyCodeLine{02058 }
\DoxyCodeLine{02059           \textcolor{comment}{// see if we need to increment the frameId of}}
\DoxyCodeLine{02060           \textcolor{comment}{// other cells in the same level}}
\DoxyCodeLine{02061           std::set<int> cellsVectorAlreadyIncremented;}
\DoxyCodeLine{02062           std::set<int> cellsPairsAlreadyIncremented;}
\DoxyCodeLine{02063           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < uniqueCells.size(); j++) \{}
\DoxyCodeLine{02064             \textcolor{keywordflow}{if} (j == i) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02065             \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *tempSl;}
\DoxyCodeLine{02066             \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} tempLevel;}
\DoxyCodeLine{02067             tempLevel = uniqueCells[j].m\_level;}
\DoxyCodeLine{02068             \textcolor{keywordflow}{if} (tempLevel) \{}
\DoxyCodeLine{02069               tempSl = uniqueCells[j].\mbox{\hyperlink{class_t_xsh_simple_level_aac1fd1d3ecf0778b8ee139c9119fcdef}{getSimpleLevel}}();}
\DoxyCodeLine{02070               \textcolor{keywordflow}{if} (tempSl) \{}
\DoxyCodeLine{02071                 \textcolor{keywordflow}{if} (tempSl == sl) \{}
\DoxyCodeLine{02072                   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} tempId    = uniqueCells[j].getFrameId();}
\DoxyCodeLine{02073                   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} currentId = uniqueCells[i].getFrameId();}
\DoxyCodeLine{02074 }
\DoxyCodeLine{02075                   \textcolor{keywordflow}{if} (tempId.getNumber() > currentId.getNumber()) \{}
\DoxyCodeLine{02076                     tempId = \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(tempId.getNumber() + 1, 0);}
\DoxyCodeLine{02077 }
\DoxyCodeLine{02078                     \textcolor{comment}{// keep cellsVector in sync with uniqueCells}}
\DoxyCodeLine{02079                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < cellsVector.size(); k++) \{}
\DoxyCodeLine{02080                       \textcolor{keywordflow}{if} (cellsVector[k] == uniqueCells[j] \&\&}
\DoxyCodeLine{02081                           cellsVectorAlreadyIncremented.find(k) ==}
\DoxyCodeLine{02082                               cellsVectorAlreadyIncremented.end()) \{}
\DoxyCodeLine{02083                         cellsVector[k].m\_frameId = tempId;}
\DoxyCodeLine{02084                         cellsVectorAlreadyIncremented.insert(k);}
\DoxyCodeLine{02085                       \}}
\DoxyCodeLine{02086                     \}}
\DoxyCodeLine{02087                     \textcolor{comment}{// and with cellPairs}}
\DoxyCodeLine{02088                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < cellPairs.size(); k++) \{}
\DoxyCodeLine{02089                       \textcolor{keywordflow}{if} (cellPairs[k].first == uniqueCells[j] \&\&}
\DoxyCodeLine{02090                           cellsPairsAlreadyIncremented.find(k) ==}
\DoxyCodeLine{02091                               cellsPairsAlreadyIncremented.end()) \{}
\DoxyCodeLine{02092                         cellPairs[k].first.m\_frameId = tempId;}
\DoxyCodeLine{02093                         cellPairs[k].second.m\_frameId =}
\DoxyCodeLine{02094                             cellPairs[k].second.m\_frameId + 1;}
\DoxyCodeLine{02095                         cellsPairsAlreadyIncremented.insert(k);}
\DoxyCodeLine{02096                       \}}
\DoxyCodeLine{02097                     \}}
\DoxyCodeLine{02098                     uniqueCells[j].m\_frameId = tempId;}
\DoxyCodeLine{02099                   \}}
\DoxyCodeLine{02100                 \}}
\DoxyCodeLine{02101               \}}
\DoxyCodeLine{02102             \}}
\DoxyCodeLine{02103           \}}
\DoxyCodeLine{02104           \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} newCell;}
\DoxyCodeLine{02105           newCell.m\_level   = sl;}
\DoxyCodeLine{02106           newCell.m\_frameId = fid + 1;}
\DoxyCodeLine{02107           cellPairs.push\_back(std::make\_pair(uniqueCells[i], newCell));}
\DoxyCodeLine{02108         \}}
\DoxyCodeLine{02109       \}}
\DoxyCodeLine{02110     \}}
\DoxyCodeLine{02111 }
\DoxyCodeLine{02112     \textcolor{comment}{// turn off sync with xsheet if it wasn't on originally}}
\DoxyCodeLine{02113     \textcolor{keywordflow}{if} (syncXsheetOn == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{02114       Preferences::instance()-\/>setValue(syncLevelRenumberWithXsheet, \textcolor{keyword}{false});}
\DoxyCodeLine{02115     \}}
\DoxyCodeLine{02116 }
\DoxyCodeLine{02117     \textcolor{comment}{// we should now have a vector with all original cells}}
\DoxyCodeLine{02118     \textcolor{comment}{// and a pair vector with the original cell and its duplicate}}
\DoxyCodeLine{02119     \textcolor{comment}{// let's make a new cellData populated with the new cells when needed.}}
\DoxyCodeLine{02120     std::vector<TXshCell> newCells;}
\DoxyCodeLine{02121     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < cellsVector.size(); i++) \{}
\DoxyCodeLine{02122       std::vector<std::pair<TXshCell, TXshCell>>::iterator pairIt =}
\DoxyCodeLine{02123           cellPairs.begin();}
\DoxyCodeLine{02124       \textcolor{keywordtype}{bool} found = \textcolor{keyword}{false};}
\DoxyCodeLine{02125       \textcolor{keywordflow}{while} (pairIt != cellPairs.end()) \{}
\DoxyCodeLine{02126         \textcolor{keywordflow}{if} (cellsVector[i] == pairIt-\/>first) \{}
\DoxyCodeLine{02127           found = \textcolor{keyword}{true};}
\DoxyCodeLine{02128           newCells.push\_back(pairIt-\/>second);}
\DoxyCodeLine{02129           \textcolor{keywordflow}{break};}
\DoxyCodeLine{02130         \}}
\DoxyCodeLine{02131         pairIt++;}
\DoxyCodeLine{02132       \}}
\DoxyCodeLine{02133       \textcolor{keywordflow}{if} (!found) \{}
\DoxyCodeLine{02134         newCells.push\_back(cellsVector[i]);}
\DoxyCodeLine{02135       \}}
\DoxyCodeLine{02136     \}}
\DoxyCodeLine{02137 }
\DoxyCodeLine{02138     \mbox{\hyperlink{class_t_cell_data}{TCellData}} *newCellData = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_cell_data}{TCellData}}(cellData);}
\DoxyCodeLine{02139     newCellData-\/>replaceCells(newCells);}
\DoxyCodeLine{02140 }
\DoxyCodeLine{02141     assert(newCellData-\/>getCellCount() == cellData-\/>getCellCount());}
\DoxyCodeLine{02142 }
\DoxyCodeLine{02143     \textcolor{keywordtype}{bool} isPaste = pasteCellsWithoutUndo(newCellData, r0, c0, r1, c1);}
\DoxyCodeLine{02144 }
\DoxyCodeLine{02145     \textcolor{comment}{// Se la selezione corrente e' TCellSelection selezione le celle copiate}}
\DoxyCodeLine{02146     \mbox{\hyperlink{class_t_cell_selection}{TCellSelection}} *cellSelection = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_cell_selection}{TCellSelection}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{02147         \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>getSelection());}
\DoxyCodeLine{02148     \textcolor{keywordflow}{if} (cellSelection) cellSelection-\/>\mbox{\hyperlink{class_t_cell_selection_ac081c8305a9b9269fbf82eb0c9e06bc3}{selectCells}}(r0, c0, r1, c1);}
\DoxyCodeLine{02149 }
\DoxyCodeLine{02150     std::vector<bool> areColumnsEmpty;}
\DoxyCodeLine{02151     \textcolor{keywordtype}{int} c;}
\DoxyCodeLine{02152     \textcolor{keywordflow}{for} (c = c0; c <= c1; c++) \{}
\DoxyCodeLine{02153       \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(c);}
\DoxyCodeLine{02154       \textcolor{keywordflow}{if} (!column) \{}
\DoxyCodeLine{02155         areColumnsEmpty.push\_back(\textcolor{keyword}{false});}
\DoxyCodeLine{02156         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02157       \}}
\DoxyCodeLine{02158       \textcolor{keywordtype}{int} newCr0, newCr1;}
\DoxyCodeLine{02159       column-\/>getRange(newCr0, newCr1);}
\DoxyCodeLine{02160       areColumnsEmpty.push\_back(!column || column-\/>isEmpty() ||}
\DoxyCodeLine{02161                                 (newCr0 == r0 \&\& newCr1 == r1));}
\DoxyCodeLine{02162     \}}
\DoxyCodeLine{02163 }
\DoxyCodeLine{02164     \textcolor{keywordflow}{if} (!isPaste) \{}
\DoxyCodeLine{02165       TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{02166       \textcolor{keywordflow}{if} (cellPairs.size() > 0) \{}
\DoxyCodeLine{02167         TUndoManager::manager()-\/>undo();}
\DoxyCodeLine{02168         TUndoManager::manager()-\/>\mbox{\hyperlink{class_t_undo_manager_aec936de7730ed653b8524a1d8ad59c39}{popUndo}}(1);}
\DoxyCodeLine{02169       \}}
\DoxyCodeLine{02170       \textcolor{keywordflow}{return};}
\DoxyCodeLine{02171     \}}
\DoxyCodeLine{02172 }
\DoxyCodeLine{02173     \textcolor{comment}{// make sure that the pasting levels are registered in the scene cast}}
\DoxyCodeLine{02174     \textcolor{comment}{// it may rename the level if there is another level with the same name}}
\DoxyCodeLine{02175     std::set<TXshLevel *> pastedLevels;}
\DoxyCodeLine{02176     getLevelSetFromData(newCellData, pastedLevels);}
\DoxyCodeLine{02177     LevelCmd::addMissingLevelsToCast(pastedLevels);}
\DoxyCodeLine{02178 }
\DoxyCodeLine{02179     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} PasteCellsUndo(}
\DoxyCodeLine{02180         r0, c0, r1, c1, oldR0, oldC0, oldR1, oldC1, areColumnsEmpty));}
\DoxyCodeLine{02181     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{02182   \}}
\DoxyCodeLine{02183 }
\DoxyCodeLine{02184   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_keyframe_data}{TKeyframeData}} *keyframeData =}
\DoxyCodeLine{02185       \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_t_keyframe_data}{TKeyframeData}} *\textcolor{keyword}{>}(mimeData);}
\DoxyCodeLine{02186   \textcolor{keywordflow}{if} (!keyframeData \&\& cellKeyframeData)}
\DoxyCodeLine{02187     keyframeData = cellKeyframeData-\/>getKeyframeData();}
\DoxyCodeLine{02188   \textcolor{keywordflow}{if} (keyframeData) \{}
\DoxyCodeLine{02189     \textcolor{keywordflow}{if} (keyframeData-\/>m\_keyData.empty()) \{}
\DoxyCodeLine{02190       DVGui::error(QObject::tr(}
\DoxyCodeLine{02191           \textcolor{stringliteral}{"{}It is not possible to paste data: there is nothing to paste."{}}));}
\DoxyCodeLine{02192       \textcolor{keywordflow}{return};}
\DoxyCodeLine{02193     \}}
\DoxyCodeLine{02194     \mbox{\hyperlink{class_t_keyframe_selection}{TKeyframeSelection}} selection;}
\DoxyCodeLine{02195     \textcolor{keywordflow}{if} (isEmpty() \&\& \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentObject()-\/>getObjectId() ==}
\DoxyCodeLine{02196                          TStageObjectId::CameraId(xsh-\/>getCameraColumnIndex()))}
\DoxyCodeLine{02197     \textcolor{comment}{// Se la selezione e' vuota e l'objectId e' quello della camera sono nella}}
\DoxyCodeLine{02198     \textcolor{comment}{// colonna di camera quindi devo selezionare la row corrente e -\/1.}}
\DoxyCodeLine{02199     \{}
\DoxyCodeLine{02200       \textcolor{keywordtype}{int} row = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}()-\/>getFrame();}
\DoxyCodeLine{02201       selection.select(row, -\/1);}
\DoxyCodeLine{02202     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02203       \textcolor{comment}{// Retrieves all keyframe positions from mime data and translates them by}}
\DoxyCodeLine{02204       \textcolor{comment}{// (r0,c0)}}
\DoxyCodeLine{02205       std::set<TKeyframeSelection::Position> positions;}
\DoxyCodeLine{02206       \textcolor{keywordtype}{int} newC0 = c0;}
\DoxyCodeLine{02207       \textcolor{keywordflow}{if} (viewer \&\& !viewer-\/>orientation()-\/>isVerticalTimeline() \&\& !cellData)}
\DoxyCodeLine{02208         newC0 = c0 -\/ keyframeData-\/>getColumnSpanCount() + 1;}
\DoxyCodeLine{02209       TKeyframeSelection::Position offset(keyframeData-\/>getKeyframesOffset());}
\DoxyCodeLine{02210       positions.insert(TKeyframeSelection::Position(r0 + offset.first,}
\DoxyCodeLine{02211                                                     newC0 + offset.second));}
\DoxyCodeLine{02212       keyframeData-\/>getKeyframes(positions);}
\DoxyCodeLine{02213       selection.select(positions);}
\DoxyCodeLine{02214 }
\DoxyCodeLine{02215       \textcolor{keywordflow}{if} (!cellKeyframeData) \{}
\DoxyCodeLine{02216         \textcolor{comment}{// Retrieve the keyframes bbox}}
\DoxyCodeLine{02217         r1 = positions.rbegin()-\/>first;}
\DoxyCodeLine{02218         c1 = c0;}
\DoxyCodeLine{02219 }
\DoxyCodeLine{02220         std::set<TKeyframeSelection::Position>::const\_iterator it,}
\DoxyCodeLine{02221             end = positions.end();}
\DoxyCodeLine{02222         \textcolor{keywordflow}{for} (it = positions.begin(); it != end; ++it)}
\DoxyCodeLine{02223           c1 = std::max(c1, it-\/>second);}
\DoxyCodeLine{02224       \}}
\DoxyCodeLine{02225     \}}
\DoxyCodeLine{02226     \textcolor{keywordflow}{if} (!initUndo) \{}
\DoxyCodeLine{02227       initUndo = \textcolor{keyword}{true};}
\DoxyCodeLine{02228       TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{02229     \}}
\DoxyCodeLine{02230     selection.pasteKeyframesWithShift(r0, r1, c0, c1);}
\DoxyCodeLine{02231   \}}
\DoxyCodeLine{02232 }
\DoxyCodeLine{02233   \textcolor{keywordflow}{if} (!initUndo) \{}
\DoxyCodeLine{02234     DVGui::error(QObject::tr(\textcolor{stringliteral}{"{}There are no copied cells to duplicate."{}}));}
\DoxyCodeLine{02235     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02236   \}}
\DoxyCodeLine{02237   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{02238   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{02239   clipboard-\/>clear();}
\DoxyCodeLine{02240 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_acac9d336f4b6af609e33e45b4e45964a}\label{class_t_cell_selection_acac9d336f4b6af609e33e45b4e45964a}} 
\index{TCellSelection@{TCellSelection}!pasteKeyframesInto@{pasteKeyframesInto}}
\index{pasteKeyframesInto@{pasteKeyframesInto}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{pasteKeyframesInto()}{pasteKeyframesInto()}}
{\footnotesize\ttfamily void TCell\+Selection\+::paste\+Keyframes\+Into (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02356                                         \{}
\DoxyCodeLine{02357   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{02358   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_keyframe_data}{TKeyframeData}} *keyframeData = \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_t_keyframe_data}{TKeyframeData}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{02359       QApplication::clipboard()-\/>mimeData());}
\DoxyCodeLine{02360   \textcolor{keywordflow}{if} (keyframeData) \{}
\DoxyCodeLine{02361     \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{02362     getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{02363 }
\DoxyCodeLine{02364     \mbox{\hyperlink{class_t_keyframe_selection}{TKeyframeSelection}} selection;}
\DoxyCodeLine{02365     \textcolor{keywordflow}{if} (isEmpty() \&\& \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentObject()-\/>getObjectId() ==}
\DoxyCodeLine{02366                          TStageObjectId::CameraId(xsh-\/>getCameraColumnIndex()))}
\DoxyCodeLine{02367     \textcolor{comment}{// Se la selezione e' vuota e l'objectId e' quello della camera sono nella}}
\DoxyCodeLine{02368     \textcolor{comment}{// colonna di camera quindi devo selezionare la row corrente e -\/1.}}
\DoxyCodeLine{02369     \{}
\DoxyCodeLine{02370       \textcolor{keywordtype}{int} row = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}()-\/>getFrame();}
\DoxyCodeLine{02371       selection.select(row, -\/1);}
\DoxyCodeLine{02372     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02373       \textcolor{comment}{// Retrieves all keyframe positions from mime data and translates them by}}
\DoxyCodeLine{02374       \textcolor{comment}{// (r0,c0)}}
\DoxyCodeLine{02375       \mbox{\hyperlink{class_xsheet_viewer}{XsheetViewer}} *viewer = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getCurrentXsheetViewer();}
\DoxyCodeLine{02376       std::set<TKeyframeSelection::Position> positions;}
\DoxyCodeLine{02377       \textcolor{keywordtype}{int} newC0 = c0;}
\DoxyCodeLine{02378       \textcolor{keywordflow}{if} (viewer \&\& !viewer-\/>orientation()-\/>isVerticalTimeline())}
\DoxyCodeLine{02379         newC0 = c0 -\/ keyframeData-\/>getColumnSpanCount() + 1;}
\DoxyCodeLine{02380       positions.insert(TKeyframeSelection::Position(r0, newC0));}
\DoxyCodeLine{02381       keyframeData-\/>getKeyframes(positions);}
\DoxyCodeLine{02382       selection.select(positions);}
\DoxyCodeLine{02383     \}}
\DoxyCodeLine{02384 }
\DoxyCodeLine{02385     selection.pasteKeyframes();}
\DoxyCodeLine{02386   \}}
\DoxyCodeLine{02387 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a98381ae4476289dea228d19b53115529}\label{class_t_cell_selection_a98381ae4476289dea228d19b53115529}} 
\index{TCellSelection@{TCellSelection}!randomCells@{randomCells}}
\index{randomCells@{randomCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{randomCells()}{randomCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::random\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00336                                  \{}
\DoxyCodeLine{00337   \textcolor{keywordflow}{if} (isEmpty() || areAllColSelectedLocked()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00338 }
\DoxyCodeLine{00339   \mbox{\hyperlink{class_t_undo}{TUndo}} *undo =}
\DoxyCodeLine{00340       \textcolor{keyword}{new} RandomUndo(m\_range.m\_r0, m\_range.m\_c0, m\_range.m\_r1, m\_range.m\_c1);}
\DoxyCodeLine{00341   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{00342 }
\DoxyCodeLine{00343   undo-\/>redo();}
\DoxyCodeLine{00344 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a22a1f894d869220650cc172cb98a8a70}\label{class_t_cell_selection_a22a1f894d869220650cc172cb98a8a70}} 
\index{TCellSelection@{TCellSelection}!reframe1Cells@{reframe1Cells}}
\index{reframe1Cells@{reframe1Cells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{reframe1Cells()}{reframe1Cells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::reframe1\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00109 \{ reframeCells(1); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_abc36b5c70732153d91d1c5420c272ead}\label{class_t_cell_selection_abc36b5c70732153d91d1c5420c272ead}} 
\index{TCellSelection@{TCellSelection}!reframe2Cells@{reframe2Cells}}
\index{reframe2Cells@{reframe2Cells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{reframe2Cells()}{reframe2Cells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::reframe2\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00110 \{ reframeCells(2); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a739ac44b553b650fc5fb990115c99880}\label{class_t_cell_selection_a739ac44b553b650fc5fb990115c99880}} 
\index{TCellSelection@{TCellSelection}!reframe3Cells@{reframe3Cells}}
\index{reframe3Cells@{reframe3Cells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{reframe3Cells()}{reframe3Cells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::reframe3\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00111 \{ reframeCells(3); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a350770a07a0501b39a89459e74775938}\label{class_t_cell_selection_a350770a07a0501b39a89459e74775938}} 
\index{TCellSelection@{TCellSelection}!reframe4Cells@{reframe4Cells}}
\index{reframe4Cells@{reframe4Cells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{reframe4Cells()}{reframe4Cells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::reframe4\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00112 \{ reframeCells(4); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a1516975fd55d2312a017ff727cf58fa4}\label{class_t_cell_selection_a1516975fd55d2312a017ff727cf58fa4}} 
\index{TCellSelection@{TCellSelection}!reframeCells@{reframeCells}}
\index{reframeCells@{reframeCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{reframeCells()}{reframeCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::reframe\+Cells (\begin{DoxyParamCaption}\item[{int}]{count }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00670                                            \{}
\DoxyCodeLine{00671   \textcolor{keywordflow}{if} (isEmpty() || areAllColSelectedLocked()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00672 }
\DoxyCodeLine{00673   std::vector<int> colIndeces;}
\DoxyCodeLine{00674   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} c = m\_range.m\_c0; c <= m\_range.m\_c1; c++) colIndeces.push\_back(c);}
\DoxyCodeLine{00675 }
\DoxyCodeLine{00676   ReframeUndo *undo =}
\DoxyCodeLine{00677       \textcolor{keyword}{new} ReframeUndo(m\_range.m\_r0, m\_range.m\_r1, colIndeces, count);}
\DoxyCodeLine{00678 }
\DoxyCodeLine{00679   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} c = m\_range.m\_c0; c <= m\_range.m\_c1; c++) \{}
\DoxyCodeLine{00680     \textcolor{keywordtype}{int} nrows = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_afc32335f3b385c6ca339c7f18c7c33ab}{reframeCells}}(}
\DoxyCodeLine{00681         m\_range.m\_r0, m\_range.m\_r1, c, count);}
\DoxyCodeLine{00682     undo-\/>m\_newRows.push\_back(nrows);}
\DoxyCodeLine{00683   \}}
\DoxyCodeLine{00684 }
\DoxyCodeLine{00685   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{00686 }
\DoxyCodeLine{00687   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{00688   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{00689 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a23038086029dbe1b597374caf36ed131}\label{class_t_cell_selection_a23038086029dbe1b597374caf36ed131}} 
\index{TCellSelection@{TCellSelection}!reframeWithEmptyInbetweens@{reframeWithEmptyInbetweens}}
\index{reframeWithEmptyInbetweens@{reframeWithEmptyInbetweens}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{reframeWithEmptyInbetweens()}{reframeWithEmptyInbetweens()}}
{\footnotesize\ttfamily void TCell\+Selection\+::reframe\+With\+Empty\+Inbetweens (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00717                                                 \{}
\DoxyCodeLine{00718   \textcolor{keywordflow}{if} (isEmpty() || areAllColSelectedLocked()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00719 }
\DoxyCodeLine{00720   std::vector<int> colIndeces;}
\DoxyCodeLine{00721   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} c = m\_range.m\_c0; c <= m\_range.m\_c1; c++) colIndeces.push\_back(c);}
\DoxyCodeLine{00722 }
\DoxyCodeLine{00723   \textcolor{comment}{// destruction of m\_reframePopup will be done along with the main window}}
\DoxyCodeLine{00724   \textcolor{keywordflow}{if} (!m\_reframePopup) m\_reframePopup = \textcolor{keyword}{new} \mbox{\hyperlink{class_reframe_popup}{ReframePopup}}();}
\DoxyCodeLine{00725   \textcolor{keywordtype}{int} ret                             = m\_reframePopup-\/>exec();}
\DoxyCodeLine{00726   \textcolor{keywordflow}{if} (ret == QDialog::Rejected) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00727 }
\DoxyCodeLine{00728   \textcolor{keywordtype}{int} step, blank;}
\DoxyCodeLine{00729   m\_reframePopup-\/>getValues(step, blank);}
\DoxyCodeLine{00730 }
\DoxyCodeLine{00731   ReframeUndo *undo =}
\DoxyCodeLine{00732       \textcolor{keyword}{new} ReframeUndo(m\_range.m\_r0, m\_range.m\_r1, colIndeces, step, blank);}
\DoxyCodeLine{00733 }
\DoxyCodeLine{00734   \textcolor{keywordtype}{int} maximumRow = 0;}
\DoxyCodeLine{00735   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} c = m\_range.m\_c0; c <= m\_range.m\_c1; c++) \{}
\DoxyCodeLine{00736     \textcolor{keywordtype}{int} nrows = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_afc32335f3b385c6ca339c7f18c7c33ab}{reframeCells}}(}
\DoxyCodeLine{00737         m\_range.m\_r0, m\_range.m\_r1, c, step, blank);}
\DoxyCodeLine{00738     undo-\/>m\_newRows.push\_back(nrows);}
\DoxyCodeLine{00739     \textcolor{keywordflow}{if} (maximumRow < nrows) maximumRow = nrows;}
\DoxyCodeLine{00740   \}}
\DoxyCodeLine{00741 }
\DoxyCodeLine{00742   \textcolor{keywordflow}{if} (maximumRow == 0) \{}
\DoxyCodeLine{00743     \textcolor{keyword}{delete} undo;}
\DoxyCodeLine{00744     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00745   \}}
\DoxyCodeLine{00746 }
\DoxyCodeLine{00747   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{00748 }
\DoxyCodeLine{00749   \textcolor{comment}{// select reframed range}}
\DoxyCodeLine{00750   \mbox{\hyperlink{class_t_cell_selection_ac081c8305a9b9269fbf82eb0c9e06bc3}{selectCells}}(m\_range.m\_r0, m\_range.m\_c0, m\_range.m\_r0 + maximumRow -\/ 1,}
\DoxyCodeLine{00751               m\_range.m\_c1);}
\DoxyCodeLine{00752 }
\DoxyCodeLine{00753   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{00754   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{00755 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_aebb087261219a290dcaf543794117fb1}\label{class_t_cell_selection_aebb087261219a290dcaf543794117fb1}} 
\index{TCellSelection@{TCellSelection}!renameCells@{renameCells}}
\index{renameCells@{renameCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{renameCells()}{renameCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::rename\+Cells (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsh_cell}{TXsh\+Cell}} \&}]{cell }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{03169                                                \{}
\DoxyCodeLine{03170   \textcolor{keywordflow}{if} (isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03171   \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{03172   getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{03173   \textcolor{comment}{// register undo only if the cell is modified}}
\DoxyCodeLine{03174   \textcolor{keywordflow}{if} (checkIfCellsHaveTheSameContent(r0, c0, r1, c1, cell)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03175   \mbox{\hyperlink{class_t_cell_data}{TCellData}} *data = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_cell_data}{TCellData}}();}
\DoxyCodeLine{03176   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh    = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{03177   data-\/>setCells(xsh, r0, c0, r1, c1);}
\DoxyCodeLine{03178   RenameCellsUndo *undo = \textcolor{keyword}{new} RenameCellsUndo(\textcolor{keyword}{this}, data, cell);}
\DoxyCodeLine{03179   undo-\/>redo();}
\DoxyCodeLine{03180 }
\DoxyCodeLine{03181   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{03182 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a8135ef40aa2100dad165b0d169422cfc}\label{class_t_cell_selection_a8135ef40aa2100dad165b0d169422cfc}} 
\index{TCellSelection@{TCellSelection}!renameMultiCells@{renameMultiCells}}
\index{renameMultiCells@{renameMultiCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{renameMultiCells()}{renameMultiCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::rename\+Multi\+Cells (\begin{DoxyParamCaption}\item[{QList$<$ \mbox{\hyperlink{class_t_xsh_cell}{TXsh\+Cell}} $>$ \&}]{cells }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{03187                                                             \{}
\DoxyCodeLine{03188   \textcolor{keywordflow}{if} (isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03189   \textcolor{keywordtype}{int} r0, c0, r1, c1;}
\DoxyCodeLine{03190   getSelectedCells(r0, c0, r1, c1);}
\DoxyCodeLine{03191   assert(cells.size() == c1 -\/ c0 + 1);}
\DoxyCodeLine{03192   \textcolor{comment}{// register undo only if the cell is modified}}
\DoxyCodeLine{03193   \textcolor{keywordtype}{bool} somethingChanged = \textcolor{keyword}{false};}
\DoxyCodeLine{03194   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} c = c0; c <= c1; c++) \{}
\DoxyCodeLine{03195     somethingChanged =}
\DoxyCodeLine{03196         !checkIfCellsHaveTheSameContent(r0, c, r1, c, cells[c -\/ c0]);}
\DoxyCodeLine{03197     \textcolor{keywordflow}{if} (somethingChanged) \textcolor{keywordflow}{break};}
\DoxyCodeLine{03198   \}}
\DoxyCodeLine{03199   \textcolor{keywordflow}{if} (!somethingChanged) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03200 }
\DoxyCodeLine{03201   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{03202   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{03203   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} c = c0; c <= c1; c++) \{}
\DoxyCodeLine{03204     \mbox{\hyperlink{class_t_cell_data}{TCellData}} *data = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_cell_data}{TCellData}}();}
\DoxyCodeLine{03205     data-\/>setCells(xsh, r0, c, r1, c);}
\DoxyCodeLine{03206     RenameCellsUndo *undo =}
\DoxyCodeLine{03207         \textcolor{keyword}{new} RenameCellsUndo(r0, c, r1, c, data, cells[c -\/ c0]);}
\DoxyCodeLine{03208     undo-\/>redo();}
\DoxyCodeLine{03209     TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{03210   \}}
\DoxyCodeLine{03211   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{03212 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a188d56ef90f3b1e312e2b857c4034d64}\label{class_t_cell_selection_a188d56ef90f3b1e312e2b857c4034d64}} 
\index{TCellSelection@{TCellSelection}!resetStepCells@{resetStepCells}}
\index{resetStepCells@{resetStepCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{resetStepCells()}{resetStepCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::reset\+Step\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00884                                     \{}
\DoxyCodeLine{00885   \textcolor{keywordflow}{if} (isEmpty() || areAllColSelectedLocked()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00886 }
\DoxyCodeLine{00887   \mbox{\hyperlink{class_t_undo}{TUndo}} *undo =}
\DoxyCodeLine{00888       \textcolor{keyword}{new} ResetStepUndo(m\_range.m\_r0, m\_range.m\_c0, m\_range.m\_r1, m\_range.m\_c1);}
\DoxyCodeLine{00889   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{00890 }
\DoxyCodeLine{00891   undo-\/>redo();}
\DoxyCodeLine{00892 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_aff1258f4c8bcd3e529d8a0ff219c238c}\label{class_t_cell_selection_aff1258f4c8bcd3e529d8a0ff219c238c}} 
\index{TCellSelection@{TCellSelection}!reverseCells@{reverseCells}}
\index{reverseCells@{reverseCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{reverseCells()}{reverseCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::reverse\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00093                                   \{}
\DoxyCodeLine{00094   \textcolor{keywordflow}{if} (isEmpty() || areAllColSelectedLocked()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00095 }
\DoxyCodeLine{00096   \mbox{\hyperlink{class_t_undo}{TUndo}} *undo =}
\DoxyCodeLine{00097       \textcolor{keyword}{new} ReverseUndo(m\_range.m\_r0, m\_range.m\_c0, m\_range.m\_r1, m\_range.m\_c1);}
\DoxyCodeLine{00098   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{00099 }
\DoxyCodeLine{00100   undo-\/>redo();}
\DoxyCodeLine{00101 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a86d6137066fe92526a7dee1b95235e43}\label{class_t_cell_selection_a86d6137066fe92526a7dee1b95235e43}} 
\index{TCellSelection@{TCellSelection}!rolldownCells@{rolldownCells}}
\index{rolldownCells@{rolldownCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{rolldownCells()}{rolldownCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::rolldown\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01217                                    \{}
\DoxyCodeLine{01218   \mbox{\hyperlink{class_t_undo}{TUndo}} *undo =}
\DoxyCodeLine{01219       \textcolor{keyword}{new} RolldownUndo(m\_range.m\_r0, m\_range.m\_c0, m\_range.m\_r1, m\_range.m\_c1);}
\DoxyCodeLine{01220   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{01221 }
\DoxyCodeLine{01222   undo-\/>redo();}
\DoxyCodeLine{01223 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_afed38e75d75b4bd08a9d0907d7820ba7}\label{class_t_cell_selection_afed38e75d75b4bd08a9d0907d7820ba7}} 
\index{TCellSelection@{TCellSelection}!rollupCells@{rollupCells}}
\index{rollupCells@{rollupCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{rollupCells()}{rollupCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::rollup\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01189                                  \{}
\DoxyCodeLine{01190   \mbox{\hyperlink{class_t_undo}{TUndo}} *undo =}
\DoxyCodeLine{01191       \textcolor{keyword}{new} RollupUndo(m\_range.m\_r0, m\_range.m\_c0, m\_range.m\_r1, m\_range.m\_c1);}
\DoxyCodeLine{01192   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{01193 }
\DoxyCodeLine{01194   undo-\/>redo();}
\DoxyCodeLine{01195 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a613da84aef1e8b3ad8ae3ddeff389eb9}\label{class_t_cell_selection_a613da84aef1e8b3ad8ae3ddeff389eb9}} 
\index{TCellSelection@{TCellSelection}!selectCell@{selectCell}}
\index{selectCell@{selectCell}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{selectCell()}{selectCell()}}
{\footnotesize\ttfamily void TCell\+Selection\+::select\+Cell (\begin{DoxyParamCaption}\item[{int}]{row,  }\item[{int}]{col }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01547                                                 \{}
\DoxyCodeLine{01548   m\_range.m\_r0            = row;}
\DoxyCodeLine{01549   m\_range.m\_c0            = col;}
\DoxyCodeLine{01550   m\_range.m\_r1            = row;}
\DoxyCodeLine{01551   m\_range.m\_c1            = col;}
\DoxyCodeLine{01552   \textcolor{keywordtype}{bool} onlyOneRasterLevel = containsOnlyOneRasterLevel(row, col, row, col);}
\DoxyCodeLine{01553   CommandManager::instance()-\/>enable(MI\_CanvasSize, onlyOneRasterLevel);}
\DoxyCodeLine{01554 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_ac081c8305a9b9269fbf82eb0c9e06bc3}\label{class_t_cell_selection_ac081c8305a9b9269fbf82eb0c9e06bc3}} 
\index{TCellSelection@{TCellSelection}!selectCells@{selectCells}}
\index{selectCells@{selectCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{selectCells()}{selectCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::select\+Cells (\begin{DoxyParamCaption}\item[{int}]{r0,  }\item[{int}]{c0,  }\item[{int}]{r1,  }\item[{int}]{c1 }\end{DoxyParamCaption})}

\begin{DoxyNote}{Note}
\+: puo\textquotesingle{} anche essere r0\texorpdfstring{$>$}{>}r1 o c0\texorpdfstring{$>$}{>}c1 
\end{DoxyNote}

\begin{DoxyCode}{0}
\DoxyCodeLine{01534                                                                \{}
\DoxyCodeLine{01535   \textcolor{keywordflow}{if} (r0 > r1) std::swap(r0, r1);}
\DoxyCodeLine{01536   \textcolor{keywordflow}{if} (c0 > c1) std::swap(c0, c1);}
\DoxyCodeLine{01537   m\_range.m\_r0            = r0;}
\DoxyCodeLine{01538   m\_range.m\_c0            = c0;}
\DoxyCodeLine{01539   m\_range.m\_r1            = r1;}
\DoxyCodeLine{01540   m\_range.m\_c1            = c1;}
\DoxyCodeLine{01541   \textcolor{keywordtype}{bool} onlyOneRasterLevel = containsOnlyOneRasterLevel(r0, c0, r1, c1);}
\DoxyCodeLine{01542   CommandManager::instance()-\/>enable(MI\_CanvasSize, onlyOneRasterLevel);}
\DoxyCodeLine{01543 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00113}{TCell\+Keyframe\+Selection\+::select\+Cells\+Keyframes()}}.

\mbox{\Hypertarget{class_t_cell_selection_a31f52d1d3468973f75c1a1af06919afb}\label{class_t_cell_selection_a31f52d1d3468973f75c1a1af06919afb}} 
\index{TCellSelection@{TCellSelection}!selectNone@{selectNone}}
\index{selectNone@{selectNone}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{selectNone()}{selectNone()}}
{\footnotesize\ttfamily void TCell\+Selection\+::select\+None (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_selection}{TSelection}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01558                                 \{}
\DoxyCodeLine{01559   m\_range = Range();}
\DoxyCodeLine{01560   CommandManager::instance()-\/>enable(MI\_CanvasSize, \textcolor{keyword}{false});}
\DoxyCodeLine{01561 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a96ad35820aeb9367d5a78e0a5b63ae88}\label{class_t_cell_selection_a96ad35820aeb9367d5a78e0a5b63ae88}} 
\index{TCellSelection@{TCellSelection}!setKeyframes@{setKeyframes}}
\index{setKeyframes@{setKeyframes}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{setKeyframes()}{setKeyframes()}}
{\footnotesize\ttfamily void TCell\+Selection\+::set\+Keyframes (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01229                                   \{}
\DoxyCodeLine{01230   \textcolor{keywordflow}{if} (isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01231 }
\DoxyCodeLine{01232   \textcolor{comment}{// Preliminary data-\/fetching}}
\DoxyCodeLine{01233   \mbox{\hyperlink{class_t_app}{TApp}} *app = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}();}
\DoxyCodeLine{01234 }
\DoxyCodeLine{01235   \mbox{\hyperlink{class_t_xsheet_handle}{TXsheetHandle}} *xshHandle = app-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}();}
\DoxyCodeLine{01236   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh             = xshHandle-\/>getXsheet();}
\DoxyCodeLine{01237 }
\DoxyCodeLine{01238   \textcolor{keywordtype}{int} row = m\_range.m\_r0, col = m\_range.m\_c0;}
\DoxyCodeLine{01239 }
\DoxyCodeLine{01240   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} \&cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col);}
\DoxyCodeLine{01241   \textcolor{keywordflow}{if} (cell.\mbox{\hyperlink{class_t_xsh_cell_a8c7ad08b83f6df4afec4b00334acfea6}{getSoundLevel}}() || cell.\mbox{\hyperlink{class_t_xsh_cell_afabf22a14eb891c9f3affebe0535456a}{getSoundTextLevel}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01242 }
\DoxyCodeLine{01243   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} \&\textcolor{keywordtype}{id} =}
\DoxyCodeLine{01244       col >= 0 ? TStageObjectId::ColumnId(col)}
\DoxyCodeLine{01245                : \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}}::CameraId(xsh-\/>getCameraColumnIndex());}
\DoxyCodeLine{01246 }
\DoxyCodeLine{01247   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *obj = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(\textcolor{keywordtype}{id});}
\DoxyCodeLine{01248   \textcolor{keywordflow}{if} (!obj) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01249 }
\DoxyCodeLine{01250   \textcolor{comment}{// Command body}}
\DoxyCodeLine{01251   \textcolor{keywordflow}{if} (obj-\/>\mbox{\hyperlink{class_t_stage_object_acb0e456655902de4a39774f0f53a1940}{isFullKeyframe}}(row)) \{}
\DoxyCodeLine{01252     \textcolor{keyword}{const} \mbox{\hyperlink{struct_t_stage_object_1_1_keyframe}{TStageObject::Keyframe}} \&key = obj-\/>\mbox{\hyperlink{class_t_stage_object_aacff624691523109a01d3039b8aae432}{getKeyframe}}(row);}
\DoxyCodeLine{01253 }
\DoxyCodeLine{01254     \mbox{\hyperlink{class_undo_remove_key_frame}{UndoRemoveKeyFrame}} *undo = \textcolor{keyword}{new} \mbox{\hyperlink{class_undo_remove_key_frame}{UndoRemoveKeyFrame}}(\textcolor{keywordtype}{id}, row, key, xshHandle);}
\DoxyCodeLine{01255     undo-\/>setObjectHandle(app-\/>\mbox{\hyperlink{class_t_app_a0d91c122eec2b756b7c4780014e49f9e}{getCurrentObject}}());}
\DoxyCodeLine{01256 }
\DoxyCodeLine{01257     TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{01258     undo-\/>redo();}
\DoxyCodeLine{01259   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01260     \mbox{\hyperlink{class_undo_set_key_frame}{UndoSetKeyFrame}} *undo = \textcolor{keyword}{new} \mbox{\hyperlink{class_undo_set_key_frame}{UndoSetKeyFrame}}(\textcolor{keywordtype}{id}, row, xshHandle);}
\DoxyCodeLine{01261     undo-\/>setObjectHandle(app-\/>\mbox{\hyperlink{class_t_app_a0d91c122eec2b756b7c4780014e49f9e}{getCurrentObject}}());}
\DoxyCodeLine{01262 }
\DoxyCodeLine{01263     TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{01264     undo-\/>redo();}
\DoxyCodeLine{01265   \}}
\DoxyCodeLine{01266 }
\DoxyCodeLine{01267   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(}
\DoxyCodeLine{01268       \textcolor{keyword}{true});  \textcolor{comment}{// Should be moved inside the undos!}}
\DoxyCodeLine{01269 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a3a42a00974fc4733b222ccaa9254a9c8}\label{class_t_cell_selection_a3a42a00974fc4733b222ccaa9254a9c8}} 
\index{TCellSelection@{TCellSelection}!shiftKeyframes@{shiftKeyframes}}
\index{shiftKeyframes@{shiftKeyframes}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{shiftKeyframes()}{shiftKeyframes()}}
{\footnotesize\ttfamily void TCell\+Selection\+::shift\+Keyframes (\begin{DoxyParamCaption}\item[{int}]{direction }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01685                                                  \{}
\DoxyCodeLine{01686   \textcolor{keywordflow}{if} (isEmpty() || areAllColSelectedLocked()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01687 }
\DoxyCodeLine{01688   \textcolor{keywordtype}{int} shift = m\_range.getRowCount() * direction;}
\DoxyCodeLine{01689   \textcolor{keywordflow}{if} (!shift) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01690 }
\DoxyCodeLine{01691   \mbox{\hyperlink{class_t_xsheet_handle}{TXsheetHandle}} *xsheet = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}();}
\DoxyCodeLine{01692   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh          = xsheet-\/>getXsheet();}
\DoxyCodeLine{01693   \mbox{\hyperlink{class_t_cell_keyframe_selection}{TCellKeyframeSelection}} *cellKeyframeSelection = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_cell_keyframe_selection}{TCellKeyframeSelection}}(}
\DoxyCodeLine{01694       \textcolor{keyword}{new} \mbox{\hyperlink{class_t_cell_selection}{TCellSelection}}(), \textcolor{keyword}{new} \mbox{\hyperlink{class_t_keyframe_selection}{TKeyframeSelection}}());}
\DoxyCodeLine{01695 }
\DoxyCodeLine{01696   cellKeyframeSelection-\/>setXsheetHandle(xsheet);}
\DoxyCodeLine{01697 }
\DoxyCodeLine{01698   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01699   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} col = m\_range.m\_c0; col <= m\_range.m\_c1; col++) \{}
\DoxyCodeLine{01700     \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(col);}
\DoxyCodeLine{01701     \textcolor{keywordflow}{if} (!column || column-\/>isLocked()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01702 }
\DoxyCodeLine{01703     \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} colId =}
\DoxyCodeLine{01704         col < 0 ? TStageObjectId::ColumnId(xsh-\/>getCameraColumnIndex())}
\DoxyCodeLine{01705                 : \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}}::ColumnId(col);}
\DoxyCodeLine{01706     \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *colObj = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(colId);}
\DoxyCodeLine{01707     \mbox{\hyperlink{class_t_stage_object_aeb7ffeab4e2feefb1248eab636199872}{TStageObject::KeyframeMap}} keyframes;}
\DoxyCodeLine{01708     colObj-\/>\mbox{\hyperlink{class_t_stage_object_abd07edf36366eeefd6f6f68e58b147bc}{getKeyframes}}(keyframes);}
\DoxyCodeLine{01709     \textcolor{keywordflow}{if} (!keyframes.size()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01710     \textcolor{keywordtype}{int} row = m\_range.m\_r0;}
\DoxyCodeLine{01711     \textcolor{keywordflow}{for} (TStageObject::KeyframeMap::iterator it = keyframes.begin();}
\DoxyCodeLine{01712          it != keyframes.end(); it++) \{}
\DoxyCodeLine{01713       \textcolor{keywordflow}{if} (it-\/>first < m\_range.m\_r0) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01714       row = it-\/>first;}
\DoxyCodeLine{01715       cellKeyframeSelection-\/>\mbox{\hyperlink{class_t_cell_keyframe_selection_a398f9b96df010d52ae8137d52f7a60af}{selectCellsKeyframes}}(row, col,}
\DoxyCodeLine{01716                                                   xsh-\/>\mbox{\hyperlink{class_t_xsheet_a12a62da7dc04395088112e492d73374f}{getFrameCount}}(), col);}
\DoxyCodeLine{01717       cellKeyframeSelection-\/>getKeyframeSelection()-\/>shiftKeyframes(}
\DoxyCodeLine{01718           row, row + shift, col, col);}
\DoxyCodeLine{01719       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01720     \}}
\DoxyCodeLine{01721   \}}
\DoxyCodeLine{01722   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01723 }
\DoxyCodeLine{01724   \textcolor{keyword}{delete} cellKeyframeSelection;}
\DoxyCodeLine{01725 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_ab49555cbb2732fe17fe1fb92f3f5baea}\label{class_t_cell_selection_ab49555cbb2732fe17fe1fb92f3f5baea}} 
\index{TCellSelection@{TCellSelection}!shiftKeyframesDown@{shiftKeyframesDown}}
\index{shiftKeyframesDown@{shiftKeyframesDown}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{shiftKeyframesDown()}{shiftKeyframesDown()}}
{\footnotesize\ttfamily void TCell\+Selection\+::shift\+Keyframes\+Down (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00098 \{ shiftKeyframes(1); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_aece067f963d7a8f4cef2e10b86d8f95f}\label{class_t_cell_selection_aece067f963d7a8f4cef2e10b86d8f95f}} 
\index{TCellSelection@{TCellSelection}!shiftKeyframesUp@{shiftKeyframesUp}}
\index{shiftKeyframesUp@{shiftKeyframesUp}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{shiftKeyframesUp()}{shiftKeyframesUp()}}
{\footnotesize\ttfamily void TCell\+Selection\+::shift\+Keyframes\+Up (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00097 \{ shiftKeyframes(-\/1); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a72a51581dfa83726172e2e448c0d6579}\label{class_t_cell_selection_a72a51581dfa83726172e2e448c0d6579}} 
\index{TCellSelection@{TCellSelection}!step2Cells@{step2Cells}}
\index{step2Cells@{step2Cells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{step2Cells()}{step2Cells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::step2\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00084 \{ stepCells(2); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_aafb2d648c0b9fcb87609563070653d29}\label{class_t_cell_selection_aafb2d648c0b9fcb87609563070653d29}} 
\index{TCellSelection@{TCellSelection}!step3Cells@{step3Cells}}
\index{step3Cells@{step3Cells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{step3Cells()}{step3Cells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::step3\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00085 \{ stepCells(3); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a6839e6c45c02e97813dae3138b28fbbd}\label{class_t_cell_selection_a6839e6c45c02e97813dae3138b28fbbd}} 
\index{TCellSelection@{TCellSelection}!step4Cells@{step4Cells}}
\index{step4Cells@{step4Cells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{step4Cells()}{step4Cells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::step4\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00086 \{ stepCells(4); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a8dd63bccc570eea22282ddcedc20d864}\label{class_t_cell_selection_a8dd63bccc570eea22282ddcedc20d864}} 
\index{TCellSelection@{TCellSelection}!stepCells@{stepCells}}
\index{stepCells@{stepCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{stepCells()}{stepCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::step\+Cells (\begin{DoxyParamCaption}\item[{int}]{count }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00436                                        \{}
\DoxyCodeLine{00437   \textcolor{keywordflow}{if} (isEmpty() || areAllColSelectedLocked()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00438 }
\DoxyCodeLine{00439   \mbox{\hyperlink{class_t_undo}{TUndo}} *undo = \textcolor{keyword}{new} StepUndo(m\_range.m\_r0, m\_range.m\_c0, m\_range.m\_r1,}
\DoxyCodeLine{00440                              m\_range.m\_c1, step);}
\DoxyCodeLine{00441   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{00442 }
\DoxyCodeLine{00443   undo-\/>redo();}
\DoxyCodeLine{00444   m\_range.m\_r1 += (step -\/ 1) * m\_range.getRowCount();}
\DoxyCodeLine{00445 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cell_selection_a24a10369fcbb5f3423fc5f1f7b3cba7c}\label{class_t_cell_selection_a24a10369fcbb5f3423fc5f1f7b3cba7c}} 
\index{TCellSelection@{TCellSelection}!swingCells@{swingCells}}
\index{swingCells@{swingCells}!TCellSelection@{TCellSelection}}
\doxysubsubsection{\texorpdfstring{swingCells()}{swingCells()}}
{\footnotesize\ttfamily void TCell\+Selection\+::swing\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00152                                 \{}
\DoxyCodeLine{00153   \textcolor{keywordflow}{if} (isEmpty() || areAllColSelectedLocked()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00154 }
\DoxyCodeLine{00155   \mbox{\hyperlink{class_t_undo}{TUndo}} *undo =}
\DoxyCodeLine{00156       \textcolor{keyword}{new} SwingUndo(m\_range.m\_r0, m\_range.m\_c0, m\_range.m\_r1, m\_range.m\_c1);}
\DoxyCodeLine{00157   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{00158 }
\DoxyCodeLine{00159   undo-\/>redo();}
\DoxyCodeLine{00160 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/cellselection.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/cellselection.\+cpp\item 
E\+:/opentoonz/toonz/sources/toonz/cellselectioncommand.\+cpp\end{DoxyCompactItemize}
