\hypertarget{class_multi_line_primitive}{}\doxysection{Multi\+Line\+Primitive Class Reference}
\label{class_multi_line_primitive}\index{MultiLinePrimitive@{MultiLinePrimitive}}
Inheritance diagram for Multi\+Line\+Primitive\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_multi_line_primitive}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_multi_line_primitive_a743d5cc3f4cf24afca30851944db4df6}{Multi\+Line\+Primitive}} (\mbox{\hyperlink{class_primitive_param}{Primitive\+Param}} $\ast$param, \mbox{\hyperlink{class_geometric_tool}{Geometric\+Tool}} $\ast$tool, bool reaster\+Tool)
\item 
std\+::string \mbox{\hyperlink{class_multi_line_primitive_a5e8c038ac92ed494cdc7311e1c75a328}{get\+Name}} () const override
\item 
void \mbox{\hyperlink{class_multi_line_primitive_a7578857b2f5da0c2b11caede76279f89}{add\+Vertex}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos)
\item 
void \mbox{\hyperlink{class_multi_line_primitive_afb9541966e50048726d1fa627db138bf}{move\+Speed}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&delta)
\item 
void \mbox{\hyperlink{class_multi_line_primitive_aed5eab613a4822fa97f7cf50c6c3ad0c}{draw}} () override
\item 
void \mbox{\hyperlink{class_multi_line_primitive_aede143aecb051d104c9303e0deb285a8}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_multi_line_primitive_a9766f91fabebd614f4cf5bff439bc6eb}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_multi_line_primitive_a88a456754b6de04e98f495e1bfbeaaa2}{left\+Button\+Double\+Click}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_multi_line_primitive_a6e5d8485c64f036c773353795ce3de6d}{left\+Button\+Up}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\item 
void \mbox{\hyperlink{class_multi_line_primitive_a388ac3c8b146716d413ce816475f33d9}{mouse\+Move}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
bool \mbox{\hyperlink{class_multi_line_primitive_a72203f3b4aa669739dc3841875542e9b}{key\+Down}} (QKey\+Event $\ast$event) override
\item 
\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ \mbox{\hyperlink{class_multi_line_primitive_a85f317d1404731fa570fdcee9abaa375}{make\+Stroke}} () const override
\item 
void \mbox{\hyperlink{class_multi_line_primitive_a8ea56290fc41ea82e376750770ce885a}{end\+Line}} ()
\item 
void \mbox{\hyperlink{class_multi_line_primitive_ac3e401bda51cd9fc9df855fb3fcb03d5}{on\+Activate}} () override
\item 
void \mbox{\hyperlink{class_multi_line_primitive_ad9fc42a5e6a97d800196fa1abad9ec68}{on\+Deactivate}} () override
\item 
void \mbox{\hyperlink{class_multi_line_primitive_a749df2634a1f9ffb266c50759c55a498}{on\+Enter}} () override
\item 
void \mbox{\hyperlink{class_multi_line_primitive_af2d989bce7b5ba1fda8d148a4948f2b3}{on\+Image\+Changed}} () override
\item 
void \mbox{\hyperlink{class_multi_line_primitive_a133c38caaf0157bb4dcd38adc7473d75}{set\+Vertexes}} (const std\+::vector$<$ \mbox{\hyperlink{class_t_point_t}{TPointD}} $>$ \&vertex)
\item 
void \mbox{\hyperlink{class_multi_line_primitive_a4e4b4d60656e2969be7ed71989354718}{set\+Speed\+Moved}} (bool speed\+Moved)
\item 
bool \mbox{\hyperlink{class_multi_line_primitive_a281660dec1335a9d5d882ba3ab391c4a}{can\+Touch\+Image\+On\+Pre\+Left\+Click}} () override
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ \mbox{\hyperlink{class_t_point_t}{TPointD}} $>$ \mbox{\hyperlink{class_multi_line_primitive_a48ecc2980e47ec5bbc4ba4a3aabe6741}{m\+\_\+vertex}}
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_multi_line_primitive_a0437bd168357cf4831edfa3736ae105d}{m\+\_\+mouse\+Position}}
\item 
TPixel32 \mbox{\hyperlink{class_multi_line_primitive_a67b92f2650a3d00833d5330d6da6e519}{m\+\_\+color}}
\item 
bool \mbox{\hyperlink{class_multi_line_primitive_a517508935132486bd2091b1643db0790}{m\+\_\+closed}}
\item 
bool \mbox{\hyperlink{class_multi_line_primitive_aee40eb7d32891a89cca1a18092598f62}{m\+\_\+is\+Single\+Line}}
\item 
bool \mbox{\hyperlink{class_multi_line_primitive_a061e7af578f437139003b4eaac29a85f}{m\+\_\+speed\+Moved}}
\begin{DoxyCompactList}\small\item\em True after move\+Speed(), false after add\+Vertex() \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_multi_line_primitive_a926a62fdd2758d414d155735be7dd260}{m\+\_\+before\+Speed\+Moved}}
\begin{DoxyCompactList}\small\item\em Old value of m\+\_\+speed\+Moved. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_multi_line_primitive_a2f89c0a2d13ae7b161739e3a621c1fe0}{m\+\_\+ctrl\+Down}}
\begin{DoxyCompactList}\small\item\em Whether ctrl is hold down. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_multiline_primitive_undo}{Multiline\+Primitive\+Undo}} $\ast$ \mbox{\hyperlink{class_multi_line_primitive_aac626a00490182ac47888c3cd1060482}{m\+\_\+undo}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_multi_line_primitive_a743d5cc3f4cf24afca30851944db4df6}\label{class_multi_line_primitive_a743d5cc3f4cf24afca30851944db4df6}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!MultiLinePrimitive@{MultiLinePrimitive}}
\index{MultiLinePrimitive@{MultiLinePrimitive}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{MultiLinePrimitive()}{MultiLinePrimitive()}}
{\footnotesize\ttfamily Multi\+Line\+Primitive\+::\+Multi\+Line\+Primitive (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_primitive_param}{Primitive\+Param}} $\ast$}]{param,  }\item[{\mbox{\hyperlink{class_geometric_tool}{Geometric\+Tool}} $\ast$}]{tool,  }\item[{bool}]{reaster\+Tool }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00707       : \mbox{\hyperlink{class_primitive}{Primitive}}(param, tool, reasterTool)}
\DoxyCodeLine{00708       , m\_closed(\textcolor{keyword}{false})}
\DoxyCodeLine{00709       , m\_isSingleLine(\textcolor{keyword}{false})}
\DoxyCodeLine{00710       , \mbox{\hyperlink{class_multi_line_primitive_a061e7af578f437139003b4eaac29a85f}{m\_speedMoved}}(\textcolor{keyword}{false})}
\DoxyCodeLine{00711       , \mbox{\hyperlink{class_multi_line_primitive_a926a62fdd2758d414d155735be7dd260}{m\_beforeSpeedMoved}}(\textcolor{keyword}{false})}
\DoxyCodeLine{00712       , \mbox{\hyperlink{class_multi_line_primitive_a2f89c0a2d13ae7b161739e3a621c1fe0}{m\_ctrlDown}}(\textcolor{keyword}{false}) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_multi_line_primitive_a7578857b2f5da0c2b11caede76279f89}\label{class_multi_line_primitive_a7578857b2f5da0c2b11caede76279f89}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!addVertex@{addVertex}}
\index{addVertex@{addVertex}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{addVertex()}{addVertex()}}
{\footnotesize\ttfamily void Multi\+Line\+Primitive\+::add\+Vertex (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01886                                                      \{}
\DoxyCodeLine{01887   \textcolor{keywordtype}{int} count = m\_vertex.size();}
\DoxyCodeLine{01888   \textcolor{comment}{// Inserisco il primo punto}}
\DoxyCodeLine{01889   \textcolor{keywordflow}{if} (count == 0) \{}
\DoxyCodeLine{01890     m\_vertex.push\_back(pos);}
\DoxyCodeLine{01891     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01892   \}}
\DoxyCodeLine{01893 }
\DoxyCodeLine{01894   \mbox{\hyperlink{class_t_point_t}{TPointD}} \&vertex = m\_vertex[count -\/ 1];}
\DoxyCodeLine{01895 }
\DoxyCodeLine{01896   \textcolor{comment}{// Caso particolare in cui inizio una curva e la chiudo subito cliccando sul}}
\DoxyCodeLine{01897   \textcolor{comment}{// punto di pertenza}}
\DoxyCodeLine{01898   \textcolor{keywordflow}{if} (count == 1 \&\& pos == vertex) \{}
\DoxyCodeLine{01899     m\_vertex.push\_back(pos);}
\DoxyCodeLine{01900     m\_vertex.push\_back(pos);}
\DoxyCodeLine{01901     m\_vertex.push\_back(pos);}
\DoxyCodeLine{01902     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01903   \}}
\DoxyCodeLine{01904 }
\DoxyCodeLine{01905   \textcolor{comment}{// Calcolo lo speedOut}}
\DoxyCodeLine{01906   \mbox{\hyperlink{class_t_point_t}{TPointD}} speedOutPoint;}
\DoxyCodeLine{01907   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_multi_line_primitive_a061e7af578f437139003b4eaac29a85f}{m\_speedMoved}})  \textcolor{comment}{// Se non e' stato mosso lo speedOut devo calcolarlo e}}
\DoxyCodeLine{01908                       \textcolor{comment}{// inserirlo}}
\DoxyCodeLine{01909   \{}
\DoxyCodeLine{01910     speedOutPoint = vertex + computeSpeed(vertex, pos, 0.01);}
\DoxyCodeLine{01911     m\_vertex.push\_back(speedOutPoint);}
\DoxyCodeLine{01912   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01913     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_multi_line_primitive_a2f89c0a2d13ae7b161739e3a621c1fe0}{m\_ctrlDown}})}
\DoxyCodeLine{01914       vertex =}
\DoxyCodeLine{01915           m\_vertex[count -\/ 2] + computeSpeed(m\_vertex[count -\/ 2], pos, 0.01);}
\DoxyCodeLine{01916     speedOutPoint = vertex;}
\DoxyCodeLine{01917   \}}
\DoxyCodeLine{01918 }
\DoxyCodeLine{01919   \textcolor{comment}{// Calcolo lo speedIn}}
\DoxyCodeLine{01920   \mbox{\hyperlink{class_t_point_t}{TPointD}} speedInPoint = pos + computeSpeed(pos, speedOutPoint, 0.01);}
\DoxyCodeLine{01921   \textcolor{comment}{// Calcolo il "{}punto di mezzo"{} e lo inserisco}}
\DoxyCodeLine{01922   \mbox{\hyperlink{class_t_point_t}{TPointD}} middlePoint = 0.5 * (speedInPoint + speedOutPoint);}
\DoxyCodeLine{01923 }
\DoxyCodeLine{01924   \textcolor{comment}{// Inserisco il "{}punto di mezzo"{}}}
\DoxyCodeLine{01925   m\_vertex.push\_back(middlePoint);}
\DoxyCodeLine{01926   \textcolor{comment}{// Inserisco lo speedIn}}
\DoxyCodeLine{01927   m\_vertex.push\_back(speedInPoint);}
\DoxyCodeLine{01928   \textcolor{comment}{// Inserisco il nuovo punto}}
\DoxyCodeLine{01929   m\_vertex.push\_back(pos);}
\DoxyCodeLine{01930 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_a281660dec1335a9d5d882ba3ab391c4a}\label{class_multi_line_primitive_a281660dec1335a9d5d882ba3ab391c4a}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!canTouchImageOnPreLeftClick@{canTouchImageOnPreLeftClick}}
\index{canTouchImageOnPreLeftClick@{canTouchImageOnPreLeftClick}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{canTouchImageOnPreLeftClick()}{canTouchImageOnPreLeftClick()}}
{\footnotesize\ttfamily bool Multi\+Line\+Primitive\+::can\+Touch\+Image\+On\+Pre\+Left\+Click (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00741 \{ \textcolor{keywordflow}{return} m\_vertex.empty(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_aed5eab613a4822fa97f7cf50c6c3ad0c}\label{class_multi_line_primitive_aed5eab613a4822fa97f7cf50c6c3ad0c}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!draw@{draw}}
\index{draw@{draw}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Multi\+Line\+Primitive\+::draw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01970                               \{}
\DoxyCodeLine{01971   UINT size = m\_vertex.size();}
\DoxyCodeLine{01972 }
\DoxyCodeLine{01973   drawSnap();}
\DoxyCodeLine{01974 }
\DoxyCodeLine{01975   \textcolor{keywordflow}{if} ((m\_isEditing || m\_isPrompting) \&\& size > 0) \{}
\DoxyCodeLine{01976     tglColor(m\_isEditing ? m\_color : TPixel32::Green);}
\DoxyCodeLine{01977     std::vector<TPointD> points;}
\DoxyCodeLine{01978     points.assign(m\_vertex.begin(), m\_vertex.end());}
\DoxyCodeLine{01979     \textcolor{keywordtype}{int} count = points.size();}
\DoxyCodeLine{01980     \textcolor{keywordflow}{if} (count \% 4 == 1) \{}
\DoxyCodeLine{01981       \textcolor{comment}{// No speedOut}}
\DoxyCodeLine{01982       points.push\_back(points[count -\/ 1]);}
\DoxyCodeLine{01983       count++;}
\DoxyCodeLine{01984     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_multi_line_primitive_a2f89c0a2d13ae7b161739e3a621c1fe0}{m\_ctrlDown}})}
\DoxyCodeLine{01985       points[count -\/ 1] = points[count -\/ 2];}
\DoxyCodeLine{01986 }
\DoxyCodeLine{01987     points.push\_back(0.5 * (m\_mousePosition + points[count -\/ 1]));}
\DoxyCodeLine{01988     points.push\_back(m\_mousePosition);}
\DoxyCodeLine{01989     points.push\_back(m\_mousePosition);}
\DoxyCodeLine{01990 }
\DoxyCodeLine{01991     \textcolor{keywordtype}{double} pixelSize = m\_tool-\/>getPixelSize();}
\DoxyCodeLine{01992 }
\DoxyCodeLine{01993     \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}(points);}
\DoxyCodeLine{01994     drawStrokeCenterline(*stroke, pixelSize);}
\DoxyCodeLine{01995     \textcolor{keyword}{delete} stroke;}
\DoxyCodeLine{01996 }
\DoxyCodeLine{01997     \textcolor{keywordflow}{if} (m\_vertex.size() > 1) \{}
\DoxyCodeLine{01998       tglColor(TPixel(79, 128, 255));}
\DoxyCodeLine{01999       \textcolor{keywordtype}{int} index = (count < 5) ? count -\/ 1 : count -\/ 5;}
\DoxyCodeLine{02000       \textcolor{comment}{// Disegno lo speedOut precedente (che e' quello corrente solo nel caso in}}
\DoxyCodeLine{02001       \textcolor{comment}{// cui count < 5)}}
\DoxyCodeLine{02002       \mbox{\hyperlink{class_t_point_t}{TPointD}} p0 = m\_vertex[index];}
\DoxyCodeLine{02003       \mbox{\hyperlink{class_t_point_t}{TPointD}} p1 = m\_vertex[index -\/ 1];}
\DoxyCodeLine{02004       \textcolor{keywordflow}{if} (tdistance(p0, p1) > 0.1) \{}
\DoxyCodeLine{02005         tglDrawSegment(p0, p1);}
\DoxyCodeLine{02006         tglDrawDisk(p0, 2 * pixelSize);}
\DoxyCodeLine{02007         tglDrawDisk(p1, 4 * pixelSize);}
\DoxyCodeLine{02008       \}}
\DoxyCodeLine{02009       \textcolor{comment}{// Disegno lo speedIn/Out corrente nel caso in cui count > 5}}
\DoxyCodeLine{02010       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_multi_line_primitive_a061e7af578f437139003b4eaac29a85f}{m\_speedMoved}} \&\& count > 5) \{}
\DoxyCodeLine{02011         \mbox{\hyperlink{class_t_point_t}{TPointD}} p0 = m\_vertex[count -\/ 1];}
\DoxyCodeLine{02012         \mbox{\hyperlink{class_t_point_t}{TPointD}} p1 = m\_vertex[count -\/ 2];}
\DoxyCodeLine{02013         \mbox{\hyperlink{class_t_point_t}{TPointD}} p2 = m\_vertex[count -\/ 3];}
\DoxyCodeLine{02014         tglDrawSegment(p0, p2);}
\DoxyCodeLine{02015         tglDrawDisk(p0, 2 * pixelSize);}
\DoxyCodeLine{02016         tglDrawDisk(p1, 4 * pixelSize);}
\DoxyCodeLine{02017         tglDrawDisk(p2, 2 * pixelSize);}
\DoxyCodeLine{02018       \}}
\DoxyCodeLine{02019     \}}
\DoxyCodeLine{02020 }
\DoxyCodeLine{02021     \textcolor{keywordflow}{if} (m\_closed)}
\DoxyCodeLine{02022       tglColor(TPixel32((m\_color.r + 127) \% 255, m\_color.g,}
\DoxyCodeLine{02023                         (m\_color.b + 127) \% 255, m\_color.m));}
\DoxyCodeLine{02024     \textcolor{keywordflow}{else}}
\DoxyCodeLine{02025       tglColor(m\_color);}
\DoxyCodeLine{02026     tglDrawCircle(m\_vertex[0], joinDistance * pixelSize);}
\DoxyCodeLine{02027   \}}
\DoxyCodeLine{02028 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_a8ea56290fc41ea82e376750770ce885a}\label{class_multi_line_primitive_a8ea56290fc41ea82e376750770ce885a}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!endLine@{endLine}}
\index{endLine@{endLine}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{endLine()}{endLine()}}
{\footnotesize\ttfamily void Multi\+Line\+Primitive\+::end\+Line (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02185                                  \{}
\DoxyCodeLine{02186   \textcolor{keywordflow}{if} (!m\_isEditing) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02187 }
\DoxyCodeLine{02188   m\_isEditing        = \textcolor{keyword}{false};}
\DoxyCodeLine{02189   \mbox{\hyperlink{class_multi_line_primitive_a061e7af578f437139003b4eaac29a85f}{m\_speedMoved}}       = \textcolor{keyword}{false};}
\DoxyCodeLine{02190   \mbox{\hyperlink{class_multi_line_primitive_a926a62fdd2758d414d155735be7dd260}{m\_beforeSpeedMoved}} = \textcolor{keyword}{false};}
\DoxyCodeLine{02191 }
\DoxyCodeLine{02192   \textcolor{keywordflow}{if} (!m\_isSingleLine \&\& !m\_vertex.empty() \&\&}
\DoxyCodeLine{02193       m\_vertex.size() \% 4 != 1 \textcolor{comment}{/* \&\& !m\_rasterTool*/}) \{}
\DoxyCodeLine{02194     m\_vertex.erase(-\/-\/m\_vertex.end());}
\DoxyCodeLine{02195     assert(m\_vertex.size() == 3 || m\_vertex.size() \% 4 == 1);}
\DoxyCodeLine{02196   \}}
\DoxyCodeLine{02197 }
\DoxyCodeLine{02198   m\_tool-\/>addStroke();}
\DoxyCodeLine{02199 }
\DoxyCodeLine{02200   \textcolor{keywordflow}{if} (m\_closed) m\_closed = \textcolor{keyword}{false};}
\DoxyCodeLine{02201 }
\DoxyCodeLine{02202   m\_vertex.clear();}
\DoxyCodeLine{02203 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_a5e8c038ac92ed494cdc7311e1c75a328}\label{class_multi_line_primitive_a5e8c038ac92ed494cdc7311e1c75a328}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!getName@{getName}}
\index{getName@{getName}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{getName()}{getName()}}
{\footnotesize\ttfamily std\+::string Multi\+Line\+Primitive\+::get\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00714                                      \{}
\DoxyCodeLine{00715     \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}Polyline"{}};}
\DoxyCodeLine{00716   \}  \textcolor{comment}{// W\_ToolOptions\_ShapePolyline"{};\}}}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_a72203f3b4aa669739dc3841875542e9b}\label{class_multi_line_primitive_a72203f3b4aa669739dc3841875542e9b}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!keyDown@{keyDown}}
\index{keyDown@{keyDown}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{keyDown()}{keyDown()}}
{\footnotesize\ttfamily bool Multi\+Line\+Primitive\+::key\+Down (\begin{DoxyParamCaption}\item[{QKey\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02133                                                  \{}
\DoxyCodeLine{02134   \textcolor{keywordflow}{if} (event-\/>key() == Qt::Key\_Return || event-\/>key() == Qt::Key\_Enter) \{}
\DoxyCodeLine{02135     endLine();}
\DoxyCodeLine{02136     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{02137   \}}
\DoxyCodeLine{02138 }
\DoxyCodeLine{02139   \textcolor{keywordflow}{if} (event-\/>key() != Qt::Key\_Escape || !m\_isEditing) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{02140 }
\DoxyCodeLine{02141   UINT size = m\_vertex.size();}
\DoxyCodeLine{02142   \textcolor{keywordflow}{if} (size <= 1) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{02143 }
\DoxyCodeLine{02144   \textcolor{keywordflow}{if} (!m\_isSingleLine) TUndoManager::manager()-\/>\mbox{\hyperlink{class_t_undo_manager_aec936de7730ed653b8524a1d8ad59c39}{popUndo}}((size -\/ 1) / 4 + 1);}
\DoxyCodeLine{02145 }
\DoxyCodeLine{02146   m\_isEditing        = \textcolor{keyword}{false};}
\DoxyCodeLine{02147   \mbox{\hyperlink{class_multi_line_primitive_a061e7af578f437139003b4eaac29a85f}{m\_speedMoved}}       = \textcolor{keyword}{false};}
\DoxyCodeLine{02148   \mbox{\hyperlink{class_multi_line_primitive_a926a62fdd2758d414d155735be7dd260}{m\_beforeSpeedMoved}} = \textcolor{keyword}{false};}
\DoxyCodeLine{02149   m\_closed           = \textcolor{keyword}{false};}
\DoxyCodeLine{02150 }
\DoxyCodeLine{02151   m\_vertex.clear();}
\DoxyCodeLine{02152   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{02153 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_a88a456754b6de04e98f495e1bfbeaaa2}\label{class_multi_line_primitive_a88a456754b6de04e98f495e1bfbeaaa2}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!leftButtonDoubleClick@{leftButtonDoubleClick}}
\index{leftButtonDoubleClick@{leftButtonDoubleClick}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{leftButtonDoubleClick()}{leftButtonDoubleClick()}}
{\footnotesize\ttfamily void Multi\+Line\+Primitive\+::left\+Button\+Double\+Click (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02091                                                                      \{}
\DoxyCodeLine{02092   endLine();}
\DoxyCodeLine{02093   resetSnap();}
\DoxyCodeLine{02094 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_aede143aecb051d104c9303e0deb285a8}\label{class_multi_line_primitive_aede143aecb051d104c9303e0deb285a8}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily void Multi\+Line\+Primitive\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02033                                                               \{}
\DoxyCodeLine{02034   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{02035   \textcolor{keywordflow}{if} (!app) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02036 }
\DoxyCodeLine{02037   \textcolor{keywordflow}{if} (app-\/>getCurrentObject()-\/>isSpline()) \{}
\DoxyCodeLine{02038     m\_color     = TPixel32::Red;}
\DoxyCodeLine{02039     m\_isEditing = \textcolor{keyword}{true};}
\DoxyCodeLine{02040   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02041     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *style = app-\/>getCurrentLevelStyle();}
\DoxyCodeLine{02042     \textcolor{keywordflow}{if} (style) \{}
\DoxyCodeLine{02043       m\_isEditing = style-\/>\mbox{\hyperlink{class_t_color_style_ad30252c2cfc4e9d5d09b954d74b97b00}{isStrokeStyle}}();}
\DoxyCodeLine{02044       m\_color     = style-\/>\mbox{\hyperlink{class_t_color_style_af5907c6146db5067fcf000edeb8e403b}{getAverageColor}}();}
\DoxyCodeLine{02045     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02046       m\_isEditing = \textcolor{keyword}{false};}
\DoxyCodeLine{02047       m\_color     = TPixel32::Black;}
\DoxyCodeLine{02048     \}}
\DoxyCodeLine{02049   \}}
\DoxyCodeLine{02050 }
\DoxyCodeLine{02051   \textcolor{keywordflow}{if} (!m\_isEditing) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02052 }
\DoxyCodeLine{02053   m\_undo = \textcolor{keyword}{new} \mbox{\hyperlink{class_multiline_primitive_undo}{MultilinePrimitiveUndo}}(m\_vertex, \textcolor{keyword}{this});}
\DoxyCodeLine{02054   TUndoManager::manager()-\/>add(m\_undo);}
\DoxyCodeLine{02055   m\_mousePosition = pos;}
\DoxyCodeLine{02056 }
\DoxyCodeLine{02057   \mbox{\hyperlink{class_t_point_t}{TPointD}} newPos;}
\DoxyCodeLine{02058   newPos = getSnap(pos);}
\DoxyCodeLine{02059 }
\DoxyCodeLine{02060   \textcolor{comment}{// Se clicco nell'ultimo vertice chiudo la linea.}}
\DoxyCodeLine{02061   \mbox{\hyperlink{class_t_point_t}{TPointD}} \_pos = pos;}
\DoxyCodeLine{02062   \textcolor{keywordflow}{if} (m\_closed) \_pos = m\_vertex.front();}
\DoxyCodeLine{02063 }
\DoxyCodeLine{02064   \textcolor{keywordflow}{if} (e.isShiftPressed() \&\& !m\_vertex.empty())}
\DoxyCodeLine{02065     addVertex(rectify(m\_vertex.back(), \_pos));}
\DoxyCodeLine{02066   \textcolor{keywordflow}{else}}
\DoxyCodeLine{02067     addVertex(newPos);}
\DoxyCodeLine{02068   m\_undo-\/>setNewVertex(m\_vertex);}
\DoxyCodeLine{02069 }
\DoxyCodeLine{02070   \mbox{\hyperlink{class_multi_line_primitive_a926a62fdd2758d414d155735be7dd260}{m\_beforeSpeedMoved}} = \mbox{\hyperlink{class_multi_line_primitive_a061e7af578f437139003b4eaac29a85f}{m\_speedMoved}};}
\DoxyCodeLine{02071   \mbox{\hyperlink{class_multi_line_primitive_a061e7af578f437139003b4eaac29a85f}{m\_speedMoved}}       = \textcolor{keyword}{false};}
\DoxyCodeLine{02072 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_a9766f91fabebd614f4cf5bff439bc6eb}\label{class_multi_line_primitive_a9766f91fabebd614f4cf5bff439bc6eb}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Multi\+Line\+Primitive\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02077                                                               \{}
\DoxyCodeLine{02078   \textcolor{keywordflow}{if} (m\_vertex.size() == 0 || m\_isSingleLine) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02079   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_multi_line_primitive_a061e7af578f437139003b4eaac29a85f}{m\_speedMoved}} || tdistance2(m\_vertex[m\_vertex.size() -\/ 1], pos) >}
\DoxyCodeLine{02080                           sq(7.0 * m\_tool-\/>getPixelSize())) \{}
\DoxyCodeLine{02081     moveSpeed(m\_mousePosition -\/ pos);}
\DoxyCodeLine{02082     \mbox{\hyperlink{class_multi_line_primitive_a061e7af578f437139003b4eaac29a85f}{m\_speedMoved}} = \textcolor{keyword}{true};}
\DoxyCodeLine{02083     m\_undo-\/>setNewVertex(m\_vertex);}
\DoxyCodeLine{02084     m\_mousePosition = pos;}
\DoxyCodeLine{02085   \}}
\DoxyCodeLine{02086 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_a6e5d8485c64f036c773353795ce3de6d}\label{class_multi_line_primitive_a6e5d8485c64f036c773353795ce3de6d}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!leftButtonUp@{leftButtonUp}}
\index{leftButtonUp@{leftButtonUp}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{leftButtonUp()}{leftButtonUp()}}
{\footnotesize\ttfamily void Multi\+Line\+Primitive\+::left\+Button\+Up (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02098                                                                              \{}
\DoxyCodeLine{02099   \textcolor{keywordflow}{if} (m\_closed) endLine();}
\DoxyCodeLine{02100   resetSnap();}
\DoxyCodeLine{02101 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_a85f317d1404731fa570fdcee9abaa375}\label{class_multi_line_primitive_a85f317d1404731fa570fdcee9abaa375}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!makeStroke@{makeStroke}}
\index{makeStroke@{makeStroke}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{makeStroke()}{makeStroke()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ Multi\+Line\+Primitive\+::make\+Stroke (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02157                                               \{}
\DoxyCodeLine{02158   \textcolor{keywordtype}{double} thick = getThickness();}
\DoxyCodeLine{02159 }
\DoxyCodeLine{02160   \textcolor{comment}{/*-\/-\/-\/}}
\DoxyCodeLine{02161 \textcolor{comment}{   * Pencilの場合は、線幅を減らす。Thickness1の線を1ピクセルにするため。（thick}}
\DoxyCodeLine{02162 \textcolor{comment}{   * = 0 になる）-\/-\/-\/*/}}
\DoxyCodeLine{02163   \textcolor{keywordflow}{if} (m\_param-\/>m\_pencil.getValue()) thick -\/= 1.0;}
\DoxyCodeLine{02164 }
\DoxyCodeLine{02165   UINT size = m\_vertex.size();}
\DoxyCodeLine{02166   \textcolor{keywordflow}{if} (size <= 1) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{02167 }
\DoxyCodeLine{02168   \textcolor{keywordflow}{if} (!m\_isSingleLine) TUndoManager::manager()-\/>\mbox{\hyperlink{class_t_undo_manager_aec936de7730ed653b8524a1d8ad59c39}{popUndo}}((size -\/ 1) / 4 + 1);}
\DoxyCodeLine{02169 }
\DoxyCodeLine{02170   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = 0;}
\DoxyCodeLine{02171   std::vector<TThickPoint> points;}
\DoxyCodeLine{02172   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{02173   \textcolor{keywordflow}{for} (i = 0; i < (int)size; i++) \{}
\DoxyCodeLine{02174     \mbox{\hyperlink{class_t_point_t}{TPointD}} vertex = m\_vertex[i];}
\DoxyCodeLine{02175     points.push\_back(\mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(vertex, thick));}
\DoxyCodeLine{02176   \}}
\DoxyCodeLine{02177   stroke = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}(points);}
\DoxyCodeLine{02178   \textcolor{keywordflow}{if} (m\_closed) stroke-\/>\mbox{\hyperlink{class_t_stroke_afa2c66ae11a70e68b3de3ce0b4cfb049}{setSelfLoop}}();}
\DoxyCodeLine{02179 }
\DoxyCodeLine{02180   \textcolor{keywordflow}{return} stroke;}
\DoxyCodeLine{02181 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_a388ac3c8b146716d413ce816475f33d9}\label{class_multi_line_primitive_a388ac3c8b146716d413ce816475f33d9}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!mouseMove@{mouseMove}}
\index{mouseMove@{mouseMove}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{mouseMove()}{mouseMove()}}
{\footnotesize\ttfamily void Multi\+Line\+Primitive\+::mouse\+Move (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02105                                                                            \{}
\DoxyCodeLine{02106   \mbox{\hyperlink{class_multi_line_primitive_a2f89c0a2d13ae7b161739e3a621c1fe0}{m\_ctrlDown}} = e.isCtrlPressed();}
\DoxyCodeLine{02107   \mbox{\hyperlink{class_t_point_t}{TPointD}} newPos;}
\DoxyCodeLine{02108   newPos = calculateSnap(pos);}
\DoxyCodeLine{02109   newPos = checkGuideSnapping(pos);}
\DoxyCodeLine{02110 }
\DoxyCodeLine{02111   \textcolor{keywordflow}{if} (m\_isEditing) \{}
\DoxyCodeLine{02112     \textcolor{keywordflow}{if} (e.isShiftPressed() \&\& !m\_vertex.empty())}
\DoxyCodeLine{02113       m\_mousePosition = rectify(m\_vertex.back(), newPos);}
\DoxyCodeLine{02114     \textcolor{keywordflow}{else}}
\DoxyCodeLine{02115       m\_mousePosition = newPos;}
\DoxyCodeLine{02116 }
\DoxyCodeLine{02117     \textcolor{keywordtype}{double} dist = joinDistance * joinDistance;}
\DoxyCodeLine{02118 }
\DoxyCodeLine{02119     \textcolor{keywordflow}{if} (!m\_vertex.empty() \&\&}
\DoxyCodeLine{02120         (tdistance2(pos, m\_vertex.front()) < dist * m\_tool-\/>getPixelSize())) \{}
\DoxyCodeLine{02121       m\_closed        = \textcolor{keyword}{true};}
\DoxyCodeLine{02122       m\_mousePosition = m\_vertex.front();}
\DoxyCodeLine{02123     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{02124       m\_closed = \textcolor{keyword}{false};}
\DoxyCodeLine{02125 }
\DoxyCodeLine{02126   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{02127     m\_mousePosition = newPos;}
\DoxyCodeLine{02128   m\_tool-\/>\mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{02129 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_afb9541966e50048726d1fa627db138bf}\label{class_multi_line_primitive_afb9541966e50048726d1fa627db138bf}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!moveSpeed@{moveSpeed}}
\index{moveSpeed@{moveSpeed}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{moveSpeed()}{moveSpeed()}}
{\footnotesize\ttfamily void Multi\+Line\+Primitive\+::move\+Speed (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{delta }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01934                                                        \{}
\DoxyCodeLine{01935   \textcolor{keywordtype}{int} count = m\_vertex.size();}
\DoxyCodeLine{01936   assert(count > 0);}
\DoxyCodeLine{01937   \mbox{\hyperlink{class_t_point_t}{TPointD}} lastPoint        = m\_vertex[count -\/ 1];}
\DoxyCodeLine{01938   \mbox{\hyperlink{class_t_point_t}{TPointD}} newSpeedOutPoint = lastPoint -\/ delta;}
\DoxyCodeLine{01939   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_multi_line_primitive_a061e7af578f437139003b4eaac29a85f}{m\_speedMoved}})}
\DoxyCodeLine{01940     m\_vertex[count -\/ 1] = newSpeedOutPoint;}
\DoxyCodeLine{01941   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01942     m\_vertex.push\_back(newSpeedOutPoint);}
\DoxyCodeLine{01943     ++count;}
\DoxyCodeLine{01944   \}}
\DoxyCodeLine{01945   \textcolor{keywordflow}{if} (count < 5) \{}
\DoxyCodeLine{01946     assert(count == 2);}
\DoxyCodeLine{01947     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01948   \}}
\DoxyCodeLine{01949 }
\DoxyCodeLine{01950   \mbox{\hyperlink{class_t_point_t}{TPointD}} vertex = m\_vertex[count -\/ 2];}
\DoxyCodeLine{01951 }
\DoxyCodeLine{01952   \mbox{\hyperlink{class_t_point_t}{TPointD}} v(0, 0);}
\DoxyCodeLine{01953   \textcolor{keywordflow}{if} (newSpeedOutPoint != vertex) v = normalize(newSpeedOutPoint -\/ vertex);}
\DoxyCodeLine{01954 }
\DoxyCodeLine{01955   \textcolor{keywordtype}{double} speedOut         = tdistance(newSpeedOutPoint, vertex);}
\DoxyCodeLine{01956   \mbox{\hyperlink{class_t_point_t}{TPointD}} newSpeedInPoint = vertex -\/ \mbox{\hyperlink{class_t_point_t}{TPointD}}(speedOut * v.x, speedOut * v.y);}
\DoxyCodeLine{01957 }
\DoxyCodeLine{01958   m\_vertex[count -\/ 3] = newSpeedInPoint;}
\DoxyCodeLine{01959   \textcolor{keywordflow}{if} (tdistance(m\_vertex[count -\/ 5], m\_vertex[count -\/ 6]) <= 0.02)}
\DoxyCodeLine{01960     \textcolor{comment}{// see ControlPointEditorStroke::isSpeedOutLinear() from}}
\DoxyCodeLine{01961     \textcolor{comment}{// controlpointselection.cpp}}
\DoxyCodeLine{01962     m\_vertex[count -\/ 5] =}
\DoxyCodeLine{01963         m\_vertex[count -\/ 6] +}
\DoxyCodeLine{01964         computeSpeed(m\_vertex[count -\/ 6], m\_vertex[count -\/ 3], 0.01);}
\DoxyCodeLine{01965   m\_vertex[count -\/ 4] = 0.5 * (m\_vertex[count -\/ 3] + m\_vertex[count -\/ 5]);}
\DoxyCodeLine{01966 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_ac3e401bda51cd9fc9df855fb3fcb03d5}\label{class_multi_line_primitive_ac3e401bda51cd9fc9df855fb3fcb03d5}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!onActivate@{onActivate}}
\index{onActivate@{onActivate}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{onActivate()}{onActivate()}}
{\footnotesize\ttfamily void Multi\+Line\+Primitive\+::on\+Activate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02207                                     \{}
\DoxyCodeLine{02208   m\_isEditing = \textcolor{keyword}{false};}
\DoxyCodeLine{02209   m\_closed    = \textcolor{keyword}{false};}
\DoxyCodeLine{02210   m\_vertex.clear();}
\DoxyCodeLine{02211   \mbox{\hyperlink{class_multi_line_primitive_a061e7af578f437139003b4eaac29a85f}{m\_speedMoved}}       = \textcolor{keyword}{false};}
\DoxyCodeLine{02212   \mbox{\hyperlink{class_multi_line_primitive_a926a62fdd2758d414d155735be7dd260}{m\_beforeSpeedMoved}} = \textcolor{keyword}{false};}
\DoxyCodeLine{02213 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_ad9fc42a5e6a97d800196fa1abad9ec68}\label{class_multi_line_primitive_ad9fc42a5e6a97d800196fa1abad9ec68}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!onDeactivate@{onDeactivate}}
\index{onDeactivate@{onDeactivate}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{onDeactivate()}{onDeactivate()}}
{\footnotesize\ttfamily void Multi\+Line\+Primitive\+::on\+Deactivate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00730                                \{}
\DoxyCodeLine{00731     m\_vertex.clear();}
\DoxyCodeLine{00732     \mbox{\hyperlink{class_multi_line_primitive_a061e7af578f437139003b4eaac29a85f}{m\_speedMoved}}       = \textcolor{keyword}{false};}
\DoxyCodeLine{00733     \mbox{\hyperlink{class_multi_line_primitive_a926a62fdd2758d414d155735be7dd260}{m\_beforeSpeedMoved}} = \textcolor{keyword}{false};}
\DoxyCodeLine{00734   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_a749df2634a1f9ffb266c50759c55a498}\label{class_multi_line_primitive_a749df2634a1f9ffb266c50759c55a498}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!onEnter@{onEnter}}
\index{onEnter@{onEnter}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{onEnter()}{onEnter()}}
{\footnotesize\ttfamily void Multi\+Line\+Primitive\+::on\+Enter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02217                                  \{}
\DoxyCodeLine{02218   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{02219   \textcolor{keywordflow}{if} (!app) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02220 }
\DoxyCodeLine{02221   \textcolor{keywordflow}{if} (app-\/>getCurrentObject()-\/>isSpline())}
\DoxyCodeLine{02222     m\_color = TPixel32::Red;}
\DoxyCodeLine{02223   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02224     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *style = app-\/>getCurrentLevelStyle();}
\DoxyCodeLine{02225     \textcolor{keywordflow}{if} (style) m\_color = style-\/>\mbox{\hyperlink{class_t_color_style_af5907c6146db5067fcf000edeb8e403b}{getAverageColor}}();}
\DoxyCodeLine{02226   \}}
\DoxyCodeLine{02227 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_af2d989bce7b5ba1fda8d148a4948f2b3}\label{class_multi_line_primitive_af2d989bce7b5ba1fda8d148a4948f2b3}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!onImageChanged@{onImageChanged}}
\index{onImageChanged@{onImageChanged}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{onImageChanged()}{onImageChanged()}}
{\footnotesize\ttfamily void Multi\+Line\+Primitive\+::on\+Image\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02231 \{ onActivate(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_a4e4b4d60656e2969be7ed71989354718}\label{class_multi_line_primitive_a4e4b4d60656e2969be7ed71989354718}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!setSpeedMoved@{setSpeedMoved}}
\index{setSpeedMoved@{setSpeedMoved}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{setSpeedMoved()}{setSpeedMoved()}}
{\footnotesize\ttfamily void Multi\+Line\+Primitive\+::set\+Speed\+Moved (\begin{DoxyParamCaption}\item[{bool}]{speed\+Moved }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00738 \{ \mbox{\hyperlink{class_multi_line_primitive_a061e7af578f437139003b4eaac29a85f}{m\_speedMoved}} = speedMoved; \};}

\end{DoxyCode}
\mbox{\Hypertarget{class_multi_line_primitive_a133c38caaf0157bb4dcd38adc7473d75}\label{class_multi_line_primitive_a133c38caaf0157bb4dcd38adc7473d75}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!setVertexes@{setVertexes}}
\index{setVertexes@{setVertexes}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{setVertexes()}{setVertexes()}}
{\footnotesize\ttfamily void Multi\+Line\+Primitive\+::set\+Vertexes (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \mbox{\hyperlink{class_t_point_t}{TPointD}} $>$ \&}]{vertex }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00737 \{ m\_vertex = vertex; \};}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_multi_line_primitive_a926a62fdd2758d414d155735be7dd260}\label{class_multi_line_primitive_a926a62fdd2758d414d155735be7dd260}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!m\_beforeSpeedMoved@{m\_beforeSpeedMoved}}
\index{m\_beforeSpeedMoved@{m\_beforeSpeedMoved}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{m\_beforeSpeedMoved}{m\_beforeSpeedMoved}}
{\footnotesize\ttfamily bool Multi\+Line\+Primitive\+::m\+\_\+before\+Speed\+Moved\hspace{0.3cm}{\ttfamily [protected]}}



Old value of m\+\_\+speed\+Moved. 

\mbox{\Hypertarget{class_multi_line_primitive_a517508935132486bd2091b1643db0790}\label{class_multi_line_primitive_a517508935132486bd2091b1643db0790}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!m\_closed@{m\_closed}}
\index{m\_closed@{m\_closed}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{m\_closed}{m\_closed}}
{\footnotesize\ttfamily bool Multi\+Line\+Primitive\+::m\+\_\+closed\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_multi_line_primitive_a67b92f2650a3d00833d5330d6da6e519}\label{class_multi_line_primitive_a67b92f2650a3d00833d5330d6da6e519}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!m\_color@{m\_color}}
\index{m\_color@{m\_color}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{m\_color}{m\_color}}
{\footnotesize\ttfamily TPixel32 Multi\+Line\+Primitive\+::m\+\_\+color\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_multi_line_primitive_a2f89c0a2d13ae7b161739e3a621c1fe0}\label{class_multi_line_primitive_a2f89c0a2d13ae7b161739e3a621c1fe0}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!m\_ctrlDown@{m\_ctrlDown}}
\index{m\_ctrlDown@{m\_ctrlDown}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{m\_ctrlDown}{m\_ctrlDown}}
{\footnotesize\ttfamily bool Multi\+Line\+Primitive\+::m\+\_\+ctrl\+Down\hspace{0.3cm}{\ttfamily [protected]}}



Whether ctrl is hold down. 

\mbox{\Hypertarget{class_multi_line_primitive_aee40eb7d32891a89cca1a18092598f62}\label{class_multi_line_primitive_aee40eb7d32891a89cca1a18092598f62}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!m\_isSingleLine@{m\_isSingleLine}}
\index{m\_isSingleLine@{m\_isSingleLine}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{m\_isSingleLine}{m\_isSingleLine}}
{\footnotesize\ttfamily bool Multi\+Line\+Primitive\+::m\+\_\+is\+Single\+Line\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_multi_line_primitive_a0437bd168357cf4831edfa3736ae105d}\label{class_multi_line_primitive_a0437bd168357cf4831edfa3736ae105d}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!m\_mousePosition@{m\_mousePosition}}
\index{m\_mousePosition@{m\_mousePosition}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{m\_mousePosition}{m\_mousePosition}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Multi\+Line\+Primitive\+::m\+\_\+mouse\+Position\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_multi_line_primitive_a061e7af578f437139003b4eaac29a85f}\label{class_multi_line_primitive_a061e7af578f437139003b4eaac29a85f}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!m\_speedMoved@{m\_speedMoved}}
\index{m\_speedMoved@{m\_speedMoved}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{m\_speedMoved}{m\_speedMoved}}
{\footnotesize\ttfamily bool Multi\+Line\+Primitive\+::m\+\_\+speed\+Moved\hspace{0.3cm}{\ttfamily [protected]}}



True after move\+Speed(), false after add\+Vertex() 

\mbox{\Hypertarget{class_multi_line_primitive_aac626a00490182ac47888c3cd1060482}\label{class_multi_line_primitive_aac626a00490182ac47888c3cd1060482}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!m\_undo@{m\_undo}}
\index{m\_undo@{m\_undo}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{m\_undo}{m\_undo}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_multiline_primitive_undo}{Multiline\+Primitive\+Undo}}$\ast$ Multi\+Line\+Primitive\+::m\+\_\+undo\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_multi_line_primitive_a48ecc2980e47ec5bbc4ba4a3aabe6741}\label{class_multi_line_primitive_a48ecc2980e47ec5bbc4ba4a3aabe6741}} 
\index{MultiLinePrimitive@{MultiLinePrimitive}!m\_vertex@{m\_vertex}}
\index{m\_vertex@{m\_vertex}!MultiLinePrimitive@{MultiLinePrimitive}}
\doxysubsubsection{\texorpdfstring{m\_vertex}{m\_vertex}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{class_t_point_t}{TPointD}}$>$ Multi\+Line\+Primitive\+::m\+\_\+vertex\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/geometrictool.\+cpp\end{DoxyCompactItemize}
