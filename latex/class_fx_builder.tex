\hypertarget{class_fx_builder}{}\doxysection{Fx\+Builder Class Reference}
\label{class_fx_builder}\index{FxBuilder@{FxBuilder}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_fx_builder_a8ea63072330ed73d674ab7f46c6c71fb}\label{class_fx_builder_a8ea63072330ed73d674ab7f46c6c71fb}} 
virtual \mbox{\hyperlink{class_t_fx}{TFx}} $\ast$ {\bfseries create} ()=0
\item 
\mbox{\hyperlink{class_fx_builder_a6b36d3d2e4519905709916d8ead67b32}{Fx\+Builder}} (\mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}} $\ast$scene, \mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$xsh, double frame, int which\+Levels, bool is\+Preview=false, bool expand\+XSheet=true)
\item 
\mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} \mbox{\hyperlink{class_fx_builder_acb1d1d5091403098a59b18343630d5cb}{build\+Fx}} ()
\item 
\mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} \mbox{\hyperlink{class_fx_builder_ac6a20f86015205c3f4c3172f04cb3563}{build\+Fx}} (const \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} \&root, BSFX\+\_\+\+Transforms\+\_\+\+Enum transforms)
\item 
\mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} \mbox{\hyperlink{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}{make\+PF}} (\mbox{\hyperlink{class_t_level_column_fx}{TLevel\+Column\+Fx}} $\ast$fx)
\begin{DoxyCompactList}\small\item\em Creates and returns a \mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} for a \mbox{\hyperlink{class_t_level_column_fx}{TLevel\+Column\+Fx}}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} \mbox{\hyperlink{class_fx_builder_a86621eb84b5875b07b55ea40ff1d3666}{make\+PF}} (\mbox{\hyperlink{class_t_palette_column_fx}{TPalette\+Column\+Fx}} $\ast$fx)
\item 
\mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} \mbox{\hyperlink{class_fx_builder_a667b5d262be3d9eaadcd9b07c963e042}{make\+PF}} (\mbox{\hyperlink{class_t_zerary_column_fx}{TZerary\+Column\+Fx}} $\ast$fx)
\item 
\mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} \mbox{\hyperlink{class_fx_builder_a1308f052cb48063d9f09070aa3cb5011}{make\+PF}} (\mbox{\hyperlink{class_t_xsheet_fx}{TXsheet\+Fx}} $\ast$fx)
\item 
\mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} \mbox{\hyperlink{class_fx_builder_af2cd5c3ff5f84d9ee57c8aa120499d3f}{make\+PFfrom\+Unary\+Fx}} (\mbox{\hyperlink{class_t_fx}{TFx}} $\ast$fx)
\item 
\mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} \mbox{\hyperlink{class_fx_builder_a58c42d6b54479ccf18a383cf41c47c18}{make\+PFfrom\+Generic\+Fx}} (\mbox{\hyperlink{class_t_fx}{TFx}} $\ast$fx)
\item 
\mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} \mbox{\hyperlink{class_fx_builder_a105b12f0f084a99b7f9c07720b1abad1}{make\+PF}} (\mbox{\hyperlink{class_t_fx}{TFx}} $\ast$fx)
\item 
\mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} \mbox{\hyperlink{class_fx_builder_a48745e61176afd14b1061c85ac90deef}{get\+Fx\+With\+Column\+Movements}} (const \mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} \&pf)
\item 
bool \mbox{\hyperlink{class_fx_builder_afb678d126b7110d9eb2777fc27933c34}{add\+Plastic\+Deformer\+Fx}} (\mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} \&pf)
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}} $\ast$ \mbox{\hyperlink{class_fx_builder_a7605d87ea2fd2da04e8e653e227591b2}{m\+\_\+scene}}
\item 
\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$ \mbox{\hyperlink{class_fx_builder_a8b0cb40853b2c631ce2226d3e8fbee27}{m\+\_\+xsh}}
\item 
\mbox{\hyperlink{class_t_affine}{TAffine}} \mbox{\hyperlink{class_fx_builder_aebedc07193e4c1c3f7836eee158d307b}{m\+\_\+camera\+Aff}}
\item 
double \mbox{\hyperlink{class_fx_builder_ab193cbe36ac178a47e89352104fb72f7}{m\+\_\+cameraZ}}
\item 
double \mbox{\hyperlink{class_fx_builder_a7e3accce3ade7141906b6c8290c0dc83}{m\+\_\+frame}}
\item 
int \mbox{\hyperlink{class_fx_builder_a847ef9f9181a798f01f56aafb31c9456}{m\+\_\+which\+Levels}}
\item 
bool \mbox{\hyperlink{class_fx_builder_a40e338c0b1fc2412bbf8058aaa247293}{m\+\_\+is\+Preview}}
\item 
bool \mbox{\hyperlink{class_fx_builder_ae4a1bbd35d06c3843732c737587c71c6}{m\+\_\+expand\+XSheet}}
\item 
int \mbox{\hyperlink{class_fx_builder_abbef4e5db9b886b35f22d18557d626f0}{m\+\_\+particle\+Descendent\+Count}}
\item 
QMap$<$ std\+::wstring, QPair$<$ \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}}, bool $>$ $>$ \mbox{\hyperlink{class_fx_builder_a047a6e90b2c124db3704a7870e88543b}{m\+\_\+global\+Controlled\+Fx}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_fx_builder_a731954fc28728ce40986c032a47f1d11}\label{class_fx_builder_a731954fc28728ce40986c032a47f1d11}} 
\index{FxBuilder@{FxBuilder}!````~FxBuilder@{$\sim$FxBuilder}}
\index{````~FxBuilder@{$\sim$FxBuilder}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{$\sim$FxBuilder()}{~FxBuilder()}}
{\footnotesize\ttfamily virtual Fx\+Builder\+::$\sim$\+Fx\+Builder (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00028 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_builder_a6b36d3d2e4519905709916d8ead67b32}\label{class_fx_builder_a6b36d3d2e4519905709916d8ead67b32}} 
\index{FxBuilder@{FxBuilder}!FxBuilder@{FxBuilder}}
\index{FxBuilder@{FxBuilder}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{FxBuilder()}{FxBuilder()}}
{\footnotesize\ttfamily Fx\+Builder\+::\+Fx\+Builder (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}} $\ast$}]{scene,  }\item[{\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$}]{xsh,  }\item[{double}]{frame,  }\item[{int}]{which\+Levels,  }\item[{bool}]{is\+Preview = {\ttfamily false},  }\item[{bool}]{expand\+XSheet = {\ttfamily true} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00588     : m\_scene(scene)}
\DoxyCodeLine{00589     , m\_xsh(xsh)}
\DoxyCodeLine{00590     , m\_frame(frame)}
\DoxyCodeLine{00591     , m\_whichLevels(whichLevels)}
\DoxyCodeLine{00592     , m\_isPreview(isPreview)}
\DoxyCodeLine{00593     , m\_expandXSheet(expandXSheet)}
\DoxyCodeLine{00594     , m\_particleDescendentCount(0) \{}
\DoxyCodeLine{00595   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} cameraId;}
\DoxyCodeLine{00596   \textcolor{keywordflow}{if} (m\_isPreview)}
\DoxyCodeLine{00597     cameraId = m\_xsh-\/>\mbox{\hyperlink{class_t_xsheet_a5dc925584e35e1678f5678b79c470959}{getStageObjectTree}}()-\/>getCurrentPreviewCameraId();}
\DoxyCodeLine{00598   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00599     cameraId = m\_xsh-\/>\mbox{\hyperlink{class_t_xsheet_a5dc925584e35e1678f5678b79c470959}{getStageObjectTree}}()-\/>\mbox{\hyperlink{class_t_stage_object_tree_a7d63ae5d60c3a3aacf5da58c108ac167}{getCurrentCameraId}}();}
\DoxyCodeLine{00600 }
\DoxyCodeLine{00601   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *camera = m\_xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(cameraId);}
\DoxyCodeLine{00602   m\_cameraAff          = camera-\/>getPlacement(m\_frame);}
\DoxyCodeLine{00603   m\_cameraZ            = camera-\/>\mbox{\hyperlink{class_t_stage_object_a52b1a3ec50ed35fbc07c9a3b64ecc21c}{getZ}}(m\_frame);}
\DoxyCodeLine{00604 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_fx_builder_afb678d126b7110d9eb2777fc27933c34}\label{class_fx_builder_afb678d126b7110d9eb2777fc27933c34}} 
\index{FxBuilder@{FxBuilder}!addPlasticDeformerFx@{addPlasticDeformerFx}}
\index{addPlasticDeformerFx@{addPlasticDeformerFx}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{addPlasticDeformerFx()}{addPlasticDeformerFx()}}
{\footnotesize\ttfamily bool Fx\+Builder\+::add\+Plastic\+Deformer\+Fx (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} \&}]{pf }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00659                                                  \{}
\DoxyCodeLine{00660   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *obj =}
\DoxyCodeLine{00661       m\_xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(TStageObjectId::ColumnId(pf.\mbox{\hyperlink{class_placed_fx_aab44f6db03fdb9520b8af551c73c26ea}{m\_columnIndex}}));}
\DoxyCodeLine{00662   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} parentId(obj-\/>\mbox{\hyperlink{class_t_stage_object_afb4724a8cc2ef7eb2c6c7585834210f2}{getParent}}());}
\DoxyCodeLine{00663 }
\DoxyCodeLine{00664   \textcolor{keywordflow}{if} (parentId.isColumn() \&\& obj-\/>\mbox{\hyperlink{class_t_stage_object_a6025ddfaaae4ebe384894230d69f0b46}{getParentHandle}}()[0] != \textcolor{charliteral}{'H'}) \{}
\DoxyCodeLine{00665     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{SkDP}} \&sd =}
\DoxyCodeLine{00666         m\_xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(parentId)-\/>\mbox{\hyperlink{class_t_stage_object_af2c5d9f172e73e4cb09b769700df3acb}{getPlasticSkeletonDeformation}}();}
\DoxyCodeLine{00667 }
\DoxyCodeLine{00668     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} \&parentCell = m\_xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(m\_frame, parentId.getIndex());}
\DoxyCodeLine{00669     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *parentSl  = parentCell.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{00670 }
\DoxyCodeLine{00671     \textcolor{keywordflow}{if} (sd \&\& parentSl \&\& (parentSl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == MESH\_XSHLEVEL)) \{}
\DoxyCodeLine{00672       \textcolor{comment}{// Plastic Deformer case -\/ add the corresponding fx,}}
\DoxyCodeLine{00673       \textcolor{comment}{// absorb the dpi and local column placement affines}}
\DoxyCodeLine{00674 }
\DoxyCodeLine{00675       \mbox{\hyperlink{class_plastic_deformer_fx}{PlasticDeformerFx}} *plasticFx = \textcolor{keyword}{new} \mbox{\hyperlink{class_plastic_deformer_fx}{PlasticDeformerFx}};}
\DoxyCodeLine{00676       plasticFx-\/>\mbox{\hyperlink{class_plastic_deformer_fx_aa0d443233d404b44a7e63852a169ebc3}{m\_xsh}}             = m\_xsh;}
\DoxyCodeLine{00677       plasticFx-\/>\mbox{\hyperlink{class_plastic_deformer_fx_a33941c5b65ba7bbc34e7bb883fae1789}{m\_col}}             = parentId.getIndex();}
\DoxyCodeLine{00678       plasticFx-\/>\mbox{\hyperlink{class_plastic_deformer_fx_a941793d2367b5fbf9a47edb906d4e49f}{m\_texPlacement}}    = obj-\/>\mbox{\hyperlink{class_t_stage_object_a37868110f695275d9e2027fb47870515}{getLocalPlacement}}(m\_frame);}
\DoxyCodeLine{00679 }
\DoxyCodeLine{00680       \textcolor{keywordflow}{if} (!plasticFx-\/>\mbox{\hyperlink{class_t_fx_a2f3083c0f21b5a3579b7124db70c06a7}{connect}}(\textcolor{stringliteral}{"{}source"{}}, pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}.getPointer()))}
\DoxyCodeLine{00681         assert(!\textcolor{stringliteral}{"{}Could not connect ports!"{}});}
\DoxyCodeLine{00682 }
\DoxyCodeLine{00683       pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}  = plasticFx;}
\DoxyCodeLine{00684       pf.m\_aff = pf.m\_aff * plasticFx-\/>\mbox{\hyperlink{class_plastic_deformer_fx_a941793d2367b5fbf9a47edb906d4e49f}{m\_texPlacement}}.\mbox{\hyperlink{class_t_affine_a570529b96b1ec5abc711aaa9aac09ff9}{inv}}();}
\DoxyCodeLine{00685 }
\DoxyCodeLine{00686       \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00687     \}}
\DoxyCodeLine{00688   \}}
\DoxyCodeLine{00689 }
\DoxyCodeLine{00690   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00691 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_builder_acb1d1d5091403098a59b18343630d5cb}\label{class_fx_builder_acb1d1d5091403098a59b18343630d5cb}} 
\index{FxBuilder@{FxBuilder}!buildFx@{buildFx}}
\index{buildFx@{buildFx}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{buildFx()}{buildFx()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} Fx\+Builder\+::build\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00608                         \{}
\DoxyCodeLine{00609   \mbox{\hyperlink{class_t_fx}{TFx}} *outputFx = m\_xsh-\/>\mbox{\hyperlink{class_t_xsheet_adc7c74cce346abf3699bb250eb17a9c2}{getFxDag}}()-\/>getOutputFx(0);}
\DoxyCodeLine{00610   \textcolor{keywordflow}{if} (!outputFx || outputFx-\/>getInputPortCount() != 1 ||}
\DoxyCodeLine{00611       outputFx-\/>getInputPort(0)-\/>getFx() == 0)}
\DoxyCodeLine{00612     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}}();}
\DoxyCodeLine{00613 }
\DoxyCodeLine{00614   outputFx-\/>setName(L\textcolor{stringliteral}{"{}OutputFx"{}});}
\DoxyCodeLine{00615 }
\DoxyCodeLine{00616   assert(m\_particleDescendentCount == 0);}
\DoxyCodeLine{00617   \mbox{\hyperlink{class_placed_fx}{PlacedFx}} pf = \mbox{\hyperlink{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}{makePF}}(outputFx-\/>getInputPort(0)-\/>getFx());}
\DoxyCodeLine{00618   assert(m\_particleDescendentCount == 0);}
\DoxyCodeLine{00619 }
\DoxyCodeLine{00620   \mbox{\hyperlink{class_t_affine}{TAffine}} cameraFullAff = m\_cameraAff * \mbox{\hyperlink{class_t_scale}{TScale}}((1000 + m\_cameraZ) / 1000);}
\DoxyCodeLine{00621   \textcolor{keywordflow}{return} TFxUtil::makeAffine(pf.makeFx(), cameraFullAff.\mbox{\hyperlink{class_t_affine_a570529b96b1ec5abc711aaa9aac09ff9}{inv}}());}
\DoxyCodeLine{00622 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_builder_ac6a20f86015205c3f4c3172f04cb3563}\label{class_fx_builder_ac6a20f86015205c3f4c3172f04cb3563}} 
\index{FxBuilder@{FxBuilder}!buildFx@{buildFx}}
\index{buildFx@{buildFx}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{buildFx()}{buildFx()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} Fx\+Builder\+::build\+Fx (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} \&}]{root,  }\item[{BSFX\+\_\+\+Transforms\+\_\+\+Enum}]{transforms }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00626                                                                          \{}
\DoxyCodeLine{00627   assert(m\_particleDescendentCount == 0);}
\DoxyCodeLine{00628   \mbox{\hyperlink{class_placed_fx}{PlacedFx}} pf = \mbox{\hyperlink{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}{makePF}}(root.getPointer());}
\DoxyCodeLine{00629   assert(m\_particleDescendentCount == 0);}
\DoxyCodeLine{00630 }
\DoxyCodeLine{00631   \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} fx = (transforms \& BSFX\_COLUMN\_TR) ? pf.makeFx() : pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}};}
\DoxyCodeLine{00632   \textcolor{keywordflow}{if} (transforms \& BSFX\_CAMERA\_TR) \{}
\DoxyCodeLine{00633     \mbox{\hyperlink{class_t_affine}{TAffine}} cameraFullAff = m\_cameraAff * \mbox{\hyperlink{class_t_scale}{TScale}}((1000 + m\_cameraZ) / 1000);}
\DoxyCodeLine{00634     fx                    = TFxUtil::makeAffine(fx, cameraFullAff.\mbox{\hyperlink{class_t_affine_a570529b96b1ec5abc711aaa9aac09ff9}{inv}}());}
\DoxyCodeLine{00635   \}}
\DoxyCodeLine{00636 }
\DoxyCodeLine{00637   \textcolor{keywordflow}{return} fx;}
\DoxyCodeLine{00638 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_builder_a48745e61176afd14b1061c85ac90deef}\label{class_fx_builder_a48745e61176afd14b1061c85ac90deef}} 
\index{FxBuilder@{FxBuilder}!getFxWithColumnMovements@{getFxWithColumnMovements}}
\index{getFxWithColumnMovements@{getFxWithColumnMovements}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{getFxWithColumnMovements()}{getFxWithColumnMovements()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} Fx\+Builder\+::get\+Fx\+With\+Column\+Movements (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} \&}]{pf }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00642                                                            \{}
\DoxyCodeLine{00643   \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} fx = pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}};}
\DoxyCodeLine{00644   \textcolor{keywordflow}{if} (!fx) \textcolor{keywordflow}{return} fx;}
\DoxyCodeLine{00645 }
\DoxyCodeLine{00646   \textcolor{keywordflow}{if} (pf.\mbox{\hyperlink{class_placed_fx_aab44f6db03fdb9520b8af551c73c26ea}{m\_columnIndex}} == -\/1) \textcolor{keywordflow}{return} pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}};}
\DoxyCodeLine{00647 }
\DoxyCodeLine{00648   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} \textcolor{keywordtype}{id}    = TStageObjectId::ColumnId(pf.\mbox{\hyperlink{class_placed_fx_aab44f6db03fdb9520b8af551c73c26ea}{m\_columnIndex}});}
\DoxyCodeLine{00649   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *pegbar = m\_xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00650 }
\DoxyCodeLine{00651   \mbox{\hyperlink{class_affine_fx}{AffineFx}} *affFx = \textcolor{keyword}{new} \mbox{\hyperlink{class_affine_fx}{AffineFx}}(m\_xsh, pegbar);}
\DoxyCodeLine{00652   affFx-\/>getInputPort(0)-\/>setFx(fx.getPointer());}
\DoxyCodeLine{00653 }
\DoxyCodeLine{00654   \textcolor{keywordflow}{return} affFx;}
\DoxyCodeLine{00655 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_builder_a105b12f0f084a99b7f9c07720b1abad1}\label{class_fx_builder_a105b12f0f084a99b7f9c07720b1abad1}} 
\index{FxBuilder@{FxBuilder}!makePF@{makePF}}
\index{makePF@{makePF}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{makePF()}{makePF()}\hspace{0.1cm}{\footnotesize\ttfamily [1/5]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} Fx\+Builder\+::make\+PF (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_fx}{TFx}} $\ast$}]{fx }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00695                                   \{}
\DoxyCodeLine{00696   \textcolor{keywordflow}{if} (!fx) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_placed_fx}{PlacedFx}}();}
\DoxyCodeLine{00697 }
\DoxyCodeLine{00698   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_level_column_fx}{TLevelColumnFx}} *lcfx = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_level_column_fx}{TLevelColumnFx}} *\textcolor{keyword}{>}(fx))}
\DoxyCodeLine{00699     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}{makePF}}(lcfx);}
\DoxyCodeLine{00700   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_palette_column_fx}{TPaletteColumnFx}} *pcfx = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_palette_column_fx}{TPaletteColumnFx}} *\textcolor{keyword}{>}(fx))}
\DoxyCodeLine{00701     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}{makePF}}(pcfx);}
\DoxyCodeLine{00702   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_zerary_column_fx}{TZeraryColumnFx}} *zcfx = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_zerary_column_fx}{TZeraryColumnFx}} *\textcolor{keyword}{>}(fx))}
\DoxyCodeLine{00703     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}{makePF}}(zcfx);}
\DoxyCodeLine{00704   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsheet_fx}{TXsheetFx}} *xsfx = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_xsheet_fx}{TXsheetFx}} *\textcolor{keyword}{>}(fx))}
\DoxyCodeLine{00705     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}{makePF}}(xsfx);}
\DoxyCodeLine{00706   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (fx-\/>getInputPortCount() == 1)}
\DoxyCodeLine{00707     \textcolor{keywordflow}{return} makePFfromUnaryFx(fx);}
\DoxyCodeLine{00708   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00709     \textcolor{keywordflow}{return} makePFfromGenericFx(fx);}
\DoxyCodeLine{00710 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}\label{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}} 
\index{FxBuilder@{FxBuilder}!makePF@{makePF}}
\index{makePF@{makePF}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{makePF()}{makePF()}\hspace{0.1cm}{\footnotesize\ttfamily [2/5]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} Fx\+Builder\+::make\+PF (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_level_column_fx}{TLevel\+Column\+Fx}} $\ast$}]{fx }\end{DoxyParamCaption})}



Creates and returns a \mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} for a \mbox{\hyperlink{class_t_level_column_fx}{TLevel\+Column\+Fx}}. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00787                                                \{}
\DoxyCodeLine{00788   assert(m\_scene);}
\DoxyCodeLine{00789   assert(lcfx);}
\DoxyCodeLine{00790   assert(lcfx-\/>getColumn());}
\DoxyCodeLine{00791   \textcolor{keywordflow}{if} (!lcfx || !lcfx-\/>getColumn() || lcfx-\/>getColumn()-\/>isEmpty())}
\DoxyCodeLine{00792     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_placed_fx}{PlacedFx}}();}
\DoxyCodeLine{00793 }
\DoxyCodeLine{00794   \textcolor{keywordflow}{if} (!lcfx-\/>getColumn()-\/>isPreviewVisible())  \textcolor{comment}{// This is the 'eye' icon}}
\DoxyCodeLine{00795                                                \textcolor{comment}{// property in the column header}}
\DoxyCodeLine{00796                                                \textcolor{comment}{// interface}}
\DoxyCodeLine{00797     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_placed_fx}{PlacedFx}}();  \textcolor{comment}{// that disables rendering of this particular column}}
\DoxyCodeLine{00798 }
\DoxyCodeLine{00799   \textcolor{comment}{// Retrieve the corresponding xsheet cell to build up}}
\DoxyCodeLine{00800   \textcolor{comment}{/*-\/-\/ 現在のフレームのセルを取得 -\/-\/*/}}
\DoxyCodeLine{00801   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell  = lcfx-\/>getColumn()-\/>getCell(tfloor(m\_frame));}
\DoxyCodeLine{00802   \textcolor{keywordtype}{int} levelFrame = cell.m\_frameId.getNumber() -\/ 1;}
\DoxyCodeLine{00803 }
\DoxyCodeLine{00804   \textcolor{comment}{/*-\/-\/  ParticlesFxに繋がっておらず、空セルの場合は 中身無しを返す -\/-\/*/}}
\DoxyCodeLine{00805   \textcolor{comment}{// -\/> even if the cell is empty, pass the affine infotmation of the column to}}
\DoxyCodeLine{00806   \textcolor{comment}{// the subsequent nodes}}
\DoxyCodeLine{00807   \textcolor{comment}{// if (m\_particleDescendentCount == 0 \&\& cell.isEmpty()) return PlacedFx();}}
\DoxyCodeLine{00808 }
\DoxyCodeLine{00809   \textcolor{keywordflow}{if} (m\_whichLevels == TOutputProperties::AnimatedOnly) \{}
\DoxyCodeLine{00810     \textcolor{comment}{// In case only 'animated levels' are selected to be rendered, exclude all}}
\DoxyCodeLine{00811     \textcolor{comment}{// 'backgrounds' -\/ that is,}}
\DoxyCodeLine{00812     \textcolor{comment}{// fullcolor levels...}}
\DoxyCodeLine{00813 }
\DoxyCodeLine{00814     \textcolor{comment}{// Still, I wonder if this is still used in Toonz. I don't remember seeing}}
\DoxyCodeLine{00815     \textcolor{comment}{// it anywhere :\(\backslash\) ?}}
\DoxyCodeLine{00816 }
\DoxyCodeLine{00817     \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = cell.m\_level.getPointer();}
\DoxyCodeLine{00818     \textcolor{comment}{// if the cell is empty, use a level of the first occupied cell instead.}}
\DoxyCodeLine{00819     \textcolor{keywordflow}{if} (!xl) \{}
\DoxyCodeLine{00820       \textcolor{keywordtype}{int} r0, r1;}
\DoxyCodeLine{00821       \textcolor{keywordflow}{if} (lcfx-\/>getColumn()-\/>getRange(r0, r1) > 0)}
\DoxyCodeLine{00822         xl = lcfx-\/>getColumn()-\/>getCell(r0).m\_level.getPointer();}
\DoxyCodeLine{00823     \}}
\DoxyCodeLine{00824 }
\DoxyCodeLine{00825     \textcolor{comment}{/*-\/-\/ ParticleFxのTextureポートに繋がっていない場合 -\/-\/*/}}
\DoxyCodeLine{00826     \textcolor{keywordflow}{if} (m\_particleDescendentCount == 0) \{}
\DoxyCodeLine{00827       \textcolor{keywordflow}{if} (!xl ||}
\DoxyCodeLine{00828           (xl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() != PLI\_XSHLEVEL \&\& xl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() != TZP\_XSHLEVEL \&\&}
\DoxyCodeLine{00829            xl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() != CHILD\_XSHLEVEL))}
\DoxyCodeLine{00830         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_placed_fx}{PlacedFx}}();}
\DoxyCodeLine{00831     \}}
\DoxyCodeLine{00832     \textcolor{comment}{/*-\/-\/ ParticleFxのTextureポートに繋がっている場合 -\/-\/*/}}
\DoxyCodeLine{00833     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00834       \textcolor{keywordflow}{if} (xl \&\& xl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() != PLI\_XSHLEVEL \&\&}
\DoxyCodeLine{00835           xl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() != TZP\_XSHLEVEL \&\& xl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() != CHILD\_XSHLEVEL)}
\DoxyCodeLine{00836         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_placed_fx}{PlacedFx}}();}
\DoxyCodeLine{00837     \}}
\DoxyCodeLine{00838   \}}
\DoxyCodeLine{00839 }
\DoxyCodeLine{00840   \textcolor{comment}{// Build a PlacedFx for the column -\/ start with the standard version for}}
\DoxyCodeLine{00841   \textcolor{comment}{// common (image) levels}}
\DoxyCodeLine{00842   \mbox{\hyperlink{class_placed_fx}{PlacedFx}} pf;}
\DoxyCodeLine{00843   pf.\mbox{\hyperlink{class_placed_fx_aab44f6db03fdb9520b8af551c73c26ea}{m\_columnIndex}} = lcfx-\/>getColumn()-\/>getIndex();}
\DoxyCodeLine{00844   \textcolor{comment}{// Build column placement}}
\DoxyCodeLine{00845   \textcolor{keywordtype}{bool} columnVisible =}
\DoxyCodeLine{00846       getColumnPlacement(pf, m\_xsh, m\_frame, pf.\mbox{\hyperlink{class_placed_fx_aab44f6db03fdb9520b8af551c73c26ea}{m\_columnIndex}}, m\_isPreview);}
\DoxyCodeLine{00847 }
\DoxyCodeLine{00848   \textcolor{comment}{// if the cell is empty, only inherits its placement}}
\DoxyCodeLine{00849   \textcolor{keywordflow}{if} ((m\_particleDescendentCount == 0 \&\& cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}())) \textcolor{keywordflow}{return} pf;}
\DoxyCodeLine{00850 }
\DoxyCodeLine{00851   pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}} = lcfx;}
\DoxyCodeLine{00852 }
\DoxyCodeLine{00853   \textcolor{comment}{/*-\/-\/ subXsheetのとき、その中身もBuildFxを実行 -\/-\/*/}}
\DoxyCodeLine{00854   \textcolor{keywordflow}{if} (!cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}() \&\& cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a6ef7d48e41f4f214b414e959512e6377}{getChildLevel}}()) \{}
\DoxyCodeLine{00855     \textcolor{comment}{// Treat the sub-\/xsheet case -\/ build the sub-\/render-\/tree and reassign stuff}}
\DoxyCodeLine{00856     \textcolor{comment}{// to pf}}
\DoxyCodeLine{00857     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a6ef7d48e41f4f214b414e959512e6377}{getChildLevel}}()-\/>\mbox{\hyperlink{class_t_xsh_child_level_ad2676276ae1db83a898a3eef10e0ace8}{getXsheet}}();}
\DoxyCodeLine{00858 }
\DoxyCodeLine{00859     \textcolor{comment}{// Build the sub-\/render-\/tree}}
\DoxyCodeLine{00860     \mbox{\hyperlink{class_fx_builder}{FxBuilder}} builder(m\_scene, xsh, levelFrame, m\_whichLevels, m\_isPreview);}
\DoxyCodeLine{00861 }
\DoxyCodeLine{00862     \textcolor{comment}{// Then, add the TimeShuffleFx}}
\DoxyCodeLine{00863     pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}} = timeShuffle(builder.buildFx(), levelFrame, lcfx-\/>getTimeRegion(),}
\DoxyCodeLine{00864                           lcfx-\/>getColumn());}
\DoxyCodeLine{00865     pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}-\/>setIdentifier(lcfx-\/>getIdentifier());}
\DoxyCodeLine{00866     pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}-\/>getAttributes()-\/>passiveCacheDataIdx() =}
\DoxyCodeLine{00867         lcfx-\/>getAttributes()-\/>passiveCacheDataIdx();}
\DoxyCodeLine{00868 }
\DoxyCodeLine{00869     \textcolor{comment}{// If the level should sustain a Plastic deformation, add the corresponding}}
\DoxyCodeLine{00870     \textcolor{comment}{// fx}}
\DoxyCodeLine{00871     addPlasticDeformerFx(pf);}
\DoxyCodeLine{00872   \}}
\DoxyCodeLine{00873 }
\DoxyCodeLine{00874   \textcolor{keywordflow}{if} (columnVisible) \{}
\DoxyCodeLine{00875     \textcolor{comment}{// Column is visible, alright}}
\DoxyCodeLine{00876     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}() ? 0 : cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{00877     \textcolor{keywordflow}{if} (sl) \{}
\DoxyCodeLine{00878       \textcolor{comment}{// If the level should sustain a Plastic deformation, add the}}
\DoxyCodeLine{00879       \textcolor{comment}{// corresponding fx}}
\DoxyCodeLine{00880       \textcolor{keywordflow}{if} (!addPlasticDeformerFx(pf)) \{}
\DoxyCodeLine{00881         \textcolor{comment}{// Common (image) level case -\/ add an NaAffineFx to compensate for the}}
\DoxyCodeLine{00882         \textcolor{comment}{// image's dpi}}
\DoxyCodeLine{00883         \mbox{\hyperlink{class_t_affine}{TAffine}} dpiAff = ::getDpiAffine(}
\DoxyCodeLine{00884             sl, cell.m\_frameId, \textcolor{keyword}{true});  \textcolor{comment}{// true stands for 'force full-\/sampling'}}
\DoxyCodeLine{00885         pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}} = TFxUtil::makeAffine(pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}, dpiAff);}
\DoxyCodeLine{00886         \textcolor{keywordflow}{if} (pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}) pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}-\/>setName(L\textcolor{stringliteral}{"{}LevelColumn AffineFx"{}});}
\DoxyCodeLine{00887       \}}
\DoxyCodeLine{00888     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00889       \textcolor{comment}{// Okay, weird code ensues. This is what happens on non-\/common image}}
\DoxyCodeLine{00890       \textcolor{comment}{// cases, which should be:}}
\DoxyCodeLine{00891 }
\DoxyCodeLine{00892       \textcolor{comment}{//  1. Sub-\/Xsheet cases -\/ and it really shouldn't}}
\DoxyCodeLine{00893       \textcolor{comment}{//  2. Empty cell cases -\/ with m\_particles\_blabla > 0; and again I don't}}
\DoxyCodeLine{00894       \textcolor{comment}{//  get why on earth this should happen...}}
\DoxyCodeLine{00895 }
\DoxyCodeLine{00896       \textcolor{comment}{// Please, note that (1) is a bug, although it happens when inserting a}}
\DoxyCodeLine{00897       \textcolor{comment}{// common level and a sub-\/xsh}}
\DoxyCodeLine{00898       \textcolor{comment}{// level in the same column...}}
\DoxyCodeLine{00899 }
\DoxyCodeLine{00900       \textcolor{comment}{// when a cell not exists, there is no way to keep the dpi of the image!}}
\DoxyCodeLine{00901       \textcolor{comment}{// in this case it is kept the dpi of the first cell not empty in the}}
\DoxyCodeLine{00902       \textcolor{comment}{// column!}}
\DoxyCodeLine{00903       \textcolor{comment}{/*-\/-\/}}
\DoxyCodeLine{00904 \textcolor{comment}{       * 空セルのとき、Dpiアフィン変換には、その素材が入っている一番上のセルのものを使う}}
\DoxyCodeLine{00905 \textcolor{comment}{       * -\/-\/*/}}
\DoxyCodeLine{00906       \mbox{\hyperlink{class_t_xsh_level_column}{TXshLevelColumn}} *column = lcfx-\/>getColumn();}
\DoxyCodeLine{00907 }
\DoxyCodeLine{00908       \textcolor{keywordtype}{int} r0, r1;}
\DoxyCodeLine{00909       \textcolor{keywordflow}{if} (column-\/>getRange(r0, r1) > 0)}
\DoxyCodeLine{00910         sl = column-\/>getCell(r0).m\_level-\/>getSimpleLevel();}
\DoxyCodeLine{00911       \textcolor{keywordflow}{if} (sl) \{}
\DoxyCodeLine{00912         \mbox{\hyperlink{class_t_affine}{TAffine}} dpiAff =}
\DoxyCodeLine{00913             ::getDpiAffine(sl, column-\/>getCell(r0).m\_frameId, \textcolor{keyword}{true});}
\DoxyCodeLine{00914         pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}} = TFxUtil::makeAffine(pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}, dpiAff);}
\DoxyCodeLine{00915       \}}
\DoxyCodeLine{00916     \}}
\DoxyCodeLine{00917 }
\DoxyCodeLine{00918     \textcolor{comment}{// Apply column's color filter and semi-\/transparency for rendering}}
\DoxyCodeLine{00919     \mbox{\hyperlink{class_t_xsh_level_column}{TXshLevelColumn}} *column = lcfx-\/>getColumn();}
\DoxyCodeLine{00920     \textcolor{keywordflow}{if} (m\_scene-\/>\mbox{\hyperlink{class_toonz_scene_a8ef96fedc17d7def810ac419b0939254}{getProperties}}()-\/>isColumnColorFilterOnRenderEnabled() \&\&}
\DoxyCodeLine{00921         (column-\/>getFilterColorId() != TXshColumn::FilterNone ||}
\DoxyCodeLine{00922          (column-\/>isCamstandVisible() \&\& column-\/>getOpacity() != 255))) \{}
\DoxyCodeLine{00923       TPixel32 colorScale = column-\/>getFilterColor();}
\DoxyCodeLine{00924       colorScale.m        = column-\/>getOpacity();}
\DoxyCodeLine{00925       pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}             = TFxUtil::makeColumnColorFilter(pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}, colorScale);}
\DoxyCodeLine{00926     \}}
\DoxyCodeLine{00927 }
\DoxyCodeLine{00928     \textcolor{keywordflow}{return} pf;}
\DoxyCodeLine{00929   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00930     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_placed_fx}{PlacedFx}}();}
\DoxyCodeLine{00931 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00085}{TXsh\+Cell\+Column\+::get\+Cell()}}, \mbox{\hyperlink{l00098}{TXsh\+Level\+::get\+Child\+Level()}}, \mbox{\hyperlink{l00087}{Toonz\+Scene\+::get\+Properties()}}, \mbox{\hyperlink{l00039}{TXsh\+Cell\+Column\+::get\+Range()}}, \mbox{\hyperlink{l00095}{TXsh\+Level\+::get\+Simple\+Level()}}, \mbox{\hyperlink{l00081}{TXsh\+Level\+::get\+Type()}}, \mbox{\hyperlink{l00065}{TXsh\+Child\+Level\+::get\+Xsheet()}}, \mbox{\hyperlink{l00078}{TXsh\+Cell\+::is\+Empty()}}, \mbox{\hyperlink{l00343}{TXsh\+Cell\+Column\+::is\+Empty()}}, \mbox{\hyperlink{l00641}{TXsh\+Column\+::is\+Preview\+Visible()}}, \mbox{\hyperlink{l00243}{Placed\+Fx\+::m\+\_\+column\+Index}}, and \mbox{\hyperlink{l00246}{Placed\+Fx\+::m\+\_\+fx}}.

\mbox{\Hypertarget{class_fx_builder_a86621eb84b5875b07b55ea40ff1d3666}\label{class_fx_builder_a86621eb84b5875b07b55ea40ff1d3666}} 
\index{FxBuilder@{FxBuilder}!makePF@{makePF}}
\index{makePF@{makePF}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{makePF()}{makePF()}\hspace{0.1cm}{\footnotesize\ttfamily [3/5]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} Fx\+Builder\+::make\+PF (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_palette_column_fx}{TPalette\+Column\+Fx}} $\ast$}]{fx }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00935                                                  \{}
\DoxyCodeLine{00936   assert(pcfx);}
\DoxyCodeLine{00937   assert(pcfx-\/>getColumn());}
\DoxyCodeLine{00938   \textcolor{keywordflow}{if} (!pcfx-\/>getColumn()-\/>isPreviewVisible()) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_placed_fx}{PlacedFx}}();}
\DoxyCodeLine{00939 }
\DoxyCodeLine{00940   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = pcfx-\/>getColumn()-\/>getCell(tfloor(m\_frame));}
\DoxyCodeLine{00941   \textcolor{keywordflow}{if} (cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_placed_fx}{PlacedFx}}();}
\DoxyCodeLine{00942 }
\DoxyCodeLine{00943   \mbox{\hyperlink{class_placed_fx}{PlacedFx}} pf;}
\DoxyCodeLine{00944   pf.\mbox{\hyperlink{class_placed_fx_aab44f6db03fdb9520b8af551c73c26ea}{m\_columnIndex}} = pcfx-\/>getColumn()-\/>getIndex();}
\DoxyCodeLine{00945   pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}          = pcfx;}
\DoxyCodeLine{00946 }
\DoxyCodeLine{00947   \textcolor{keywordflow}{return} pf;}
\DoxyCodeLine{00948 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_builder_a1308f052cb48063d9f09070aa3cb5011}\label{class_fx_builder_a1308f052cb48063d9f09070aa3cb5011}} 
\index{FxBuilder@{FxBuilder}!makePF@{makePF}}
\index{makePF@{makePF}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{makePF()}{makePF()}\hspace{0.1cm}{\footnotesize\ttfamily [4/5]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} Fx\+Builder\+::make\+PF (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsheet_fx}{TXsheet\+Fx}} $\ast$}]{fx }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00714                                         \{}
\DoxyCodeLine{00715   \textcolor{keywordflow}{if} (!m\_expandXSheet)  \textcolor{comment}{// Xsheet expansion is typically blocked for render-\/tree}}
\DoxyCodeLine{00716                         \textcolor{comment}{// building of post-\/xsheet fxs only.}}
\DoxyCodeLine{00717   \{}
\DoxyCodeLine{00718     \mbox{\hyperlink{class_placed_fx}{PlacedFx}} ret(fx);}
\DoxyCodeLine{00719     ret.m\_isPostXsheetNode = \textcolor{keyword}{true};}
\DoxyCodeLine{00720     \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00721   \}}
\DoxyCodeLine{00722 }
\DoxyCodeLine{00723   \textcolor{comment}{// Expand the render-\/tree from terminal fxs}}
\DoxyCodeLine{00724   \mbox{\hyperlink{class_t_fx_set}{TFxSet}} *fxs = m\_xsh-\/>\mbox{\hyperlink{class_t_xsheet_adc7c74cce346abf3699bb250eb17a9c2}{getFxDag}}()-\/>getTerminalFxs();}
\DoxyCodeLine{00725   \textcolor{keywordtype}{int} m       = fxs-\/>getFxCount();}
\DoxyCodeLine{00726   \textcolor{keywordflow}{if} (m == 0) \{}
\DoxyCodeLine{00727     \mbox{\hyperlink{class_placed_fx}{PlacedFx}} ret;}
\DoxyCodeLine{00728     ret.m\_isPostXsheetNode = \textcolor{keyword}{true};}
\DoxyCodeLine{00729     \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00730   \}}
\DoxyCodeLine{00731 }
\DoxyCodeLine{00732   std::vector<PlacedFx> pfs(m);}
\DoxyCodeLine{00733   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00734   \textcolor{keywordflow}{for} (i = 0; i < m; i++) \{}
\DoxyCodeLine{00735     \textcolor{comment}{// Expand each terminal fx}}
\DoxyCodeLine{00736     \mbox{\hyperlink{class_t_fx}{TFx}} *fx = fxs-\/>getFx(i);}
\DoxyCodeLine{00737     assert(fx);}
\DoxyCodeLine{00738     pfs[i] = \mbox{\hyperlink{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}{makePF}}(fx);  \textcolor{comment}{// Builds the sub-\/render-\/trees here}}
\DoxyCodeLine{00739   \}}
\DoxyCodeLine{00740 }
\DoxyCodeLine{00741   \textcolor{comment}{/*-\/-\/}}
\DoxyCodeLine{00742 \textcolor{comment}{   * Xsheetに複数ノードが繋がっていた場合、PlacedFxの条件に従ってOverノードの付く順番を決める}}
\DoxyCodeLine{00743 \textcolor{comment}{   * -\/-\/*/}}
\DoxyCodeLine{00744   std::sort(pfs.begin(),}
\DoxyCodeLine{00745             pfs.end());  \textcolor{comment}{// Sort each terminal depending on Z/SO/Column index}}
\DoxyCodeLine{00746 }
\DoxyCodeLine{00747   \textcolor{comment}{// Compose them in a cascade of overs (or affines 'leftXsheetPort' cases)}}
\DoxyCodeLine{00748   \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} currentFx =}
\DoxyCodeLine{00749       pfs[0].makeFx();  \textcolor{comment}{// Adds an NaAffineFx if pf.m\_aff is not the identity}}
\DoxyCodeLine{00750   \textcolor{keywordflow}{for} (i = 1; i < m; i++) \{}
\DoxyCodeLine{00751     \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} fx = pfs[i].makeFx();  \textcolor{comment}{// See above}}
\DoxyCodeLine{00752     \textcolor{keywordflow}{if} (pfs[i].m\_leftXsheetPort) \{}
\DoxyCodeLine{00753       \textcolor{comment}{// LeftXsheetPort cases happen for those fxs like Add, Multiply, etc that}}
\DoxyCodeLine{00754       \textcolor{comment}{// declare an xsheet-\/like input port.}}
\DoxyCodeLine{00755       \textcolor{comment}{// That is, all terminal fxs below ours are attached COMPOSED to enter the}}
\DoxyCodeLine{00756       \textcolor{comment}{// fx's leftXsheet input port.}}
\DoxyCodeLine{00757 }
\DoxyCodeLine{00758       \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} inputFx = currentFx;}
\DoxyCodeLine{00759       inputFx      = TFxUtil::makeAffine(inputFx, pfs[i].m\_aff.inv());}
\DoxyCodeLine{00760       pfs[i].m\_leftXsheetPort-\/>setFx(inputFx.getPointer());}
\DoxyCodeLine{00761       currentFx = fx;}
\DoxyCodeLine{00762     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00763       \textcolor{keywordflow}{if} (Preferences::instance()}
\DoxyCodeLine{00764               -\/>isShowRasterImagesDarkenBlendedInViewerEnabled())}
\DoxyCodeLine{00765         currentFx = TFxUtil::makeDarken(currentFx, fx);}
\DoxyCodeLine{00766       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00767         currentFx = TFxUtil::makeOver(currentFx, fx);  \textcolor{comment}{// Common over case}}
\DoxyCodeLine{00768     \}}
\DoxyCodeLine{00769   \}}
\DoxyCodeLine{00770 }
\DoxyCodeLine{00771   \mbox{\hyperlink{class_placed_fx}{PlacedFx}} ret(currentFx);}
\DoxyCodeLine{00772   ret.m\_isPostXsheetNode = \textcolor{keyword}{true};}
\DoxyCodeLine{00773   \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00774 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_builder_a667b5d262be3d9eaadcd9b07c963e042}\label{class_fx_builder_a667b5d262be3d9eaadcd9b07c963e042}} 
\index{FxBuilder@{FxBuilder}!makePF@{makePF}}
\index{makePF@{makePF}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{makePF()}{makePF()}\hspace{0.1cm}{\footnotesize\ttfamily [5/5]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} Fx\+Builder\+::make\+PF (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_zerary_column_fx}{TZerary\+Column\+Fx}} $\ast$}]{fx }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00952                                                 \{}
\DoxyCodeLine{00953   assert(zcfx);}
\DoxyCodeLine{00954   assert(zcfx-\/>getColumn());}
\DoxyCodeLine{00955 }
\DoxyCodeLine{00956   \textcolor{keywordflow}{if} (!zcfx-\/>getColumn()-\/>isPreviewVisible())  \textcolor{comment}{// ...}}
\DoxyCodeLine{00957     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_placed_fx}{PlacedFx}}();}
\DoxyCodeLine{00958 }
\DoxyCodeLine{00959   \textcolor{keywordflow}{if} (!zcfx-\/>getAttributes()-\/>isEnabled())  \textcolor{comment}{// ...}}
\DoxyCodeLine{00960     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_placed_fx}{PlacedFx}}();}
\DoxyCodeLine{00961 }
\DoxyCodeLine{00962   \mbox{\hyperlink{class_t_fx}{TFx}} *fx = zcfx-\/>getZeraryFx();}
\DoxyCodeLine{00963   \textcolor{keywordflow}{if} (!fx || !fx-\/>getAttributes()-\/>isEnabled())  \textcolor{comment}{// ... Perhaps these shouldn't}}
\DoxyCodeLine{00964                                                  \textcolor{comment}{// be tested altogether? Only 1}}
\DoxyCodeLine{00965                                                  \textcolor{comment}{// truly works !}}
\DoxyCodeLine{00966     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_placed_fx}{PlacedFx}}();}
\DoxyCodeLine{00967 }
\DoxyCodeLine{00968   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = zcfx-\/>getColumn()-\/>getCell(tfloor(m\_frame));}
\DoxyCodeLine{00969 }
\DoxyCodeLine{00970   \textcolor{comment}{// Build}}
\DoxyCodeLine{00971   \mbox{\hyperlink{class_placed_fx}{PlacedFx}} pf;}
\DoxyCodeLine{00972   pf.\mbox{\hyperlink{class_placed_fx_aab44f6db03fdb9520b8af551c73c26ea}{m\_columnIndex}} = zcfx-\/>getColumn()-\/>getIndex();}
\DoxyCodeLine{00973 }
\DoxyCodeLine{00974   \textcolor{comment}{// Add the column placement NaAffineFx}}
\DoxyCodeLine{00975   \textcolor{keywordflow}{if} (!getColumnPlacement(pf, m\_xsh, m\_frame, pf.\mbox{\hyperlink{class_placed_fx_aab44f6db03fdb9520b8af551c73c26ea}{m\_columnIndex}}, m\_isPreview))}
\DoxyCodeLine{00976     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_placed_fx}{PlacedFx}}();}
\DoxyCodeLine{00977 }
\DoxyCodeLine{00978   \textcolor{comment}{// if the cell is empty, only inherits its placement}}
\DoxyCodeLine{00979   \textcolor{keywordflow}{if} (cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \textcolor{keywordflow}{return} pf;}
\DoxyCodeLine{00980 }
\DoxyCodeLine{00981   \textcolor{comment}{// set m\_fx only when the current cell is not empty}}
\DoxyCodeLine{00982   pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}} =}
\DoxyCodeLine{00983       fx-\/>clone(\textcolor{keyword}{false});  \textcolor{comment}{// Detach the fx with a clone. Why? It's typically done}}
\DoxyCodeLine{00984                          \textcolor{comment}{// to build fx connections in the render-\/tree freely.}}
\DoxyCodeLine{00985                          \textcolor{comment}{// Here, it's used just for particles, I guess...}}
\DoxyCodeLine{00986 }
\DoxyCodeLine{00987   \textcolor{comment}{// Deal with input sub-\/trees}}
\DoxyCodeLine{00988   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < fx-\/>getInputPortCount(); ++i) \{}
\DoxyCodeLine{00989     \textcolor{comment}{// Note that only particles should end up here, currently}}
\DoxyCodeLine{00990     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} inputFx = fx-\/>getInputPort(i)-\/>getFx()) \{}
\DoxyCodeLine{00991       \mbox{\hyperlink{class_placed_fx}{PlacedFx}} inputPF;}
\DoxyCodeLine{00992 }
\DoxyCodeLine{00993       \textcolor{comment}{// if the effect is a particle fx, it is necessary to consider also empty}}
\DoxyCodeLine{00994       \textcolor{comment}{// cells}}
\DoxyCodeLine{00995       \textcolor{comment}{// this causes a connection with the effect and a level also with empty}}
\DoxyCodeLine{00996       \textcolor{comment}{// cells.}}
\DoxyCodeLine{00997       \textcolor{keywordflow}{if} (fx-\/>getFxType() == \textcolor{stringliteral}{"{}STD\_particlesFx"{}} ||}
\DoxyCodeLine{00998           fx-\/>getFxType() == \textcolor{stringliteral}{"{}STD\_iwa\_TiledParticlesFx"{}} ||}
\DoxyCodeLine{00999           fx-\/>getFxType() == \textcolor{stringliteral}{"{}STD\_tiledParticlesFx"{}}) \{}
\DoxyCodeLine{01000         m\_particleDescendentCount++;}
\DoxyCodeLine{01001         inputPF = \mbox{\hyperlink{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}{makePF}}(inputFx.getPointer());}
\DoxyCodeLine{01002         m\_particleDescendentCount-\/-\/;}
\DoxyCodeLine{01003       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01004         inputPF = \mbox{\hyperlink{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}{makePF}}(inputFx.getPointer());}
\DoxyCodeLine{01005 }
\DoxyCodeLine{01006       inputFx = getFxWithColumnMovements(inputPF);}
\DoxyCodeLine{01007       \textcolor{keywordflow}{if} (!inputFx) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01008 }
\DoxyCodeLine{01009       inputFx = TFxUtil::makeAffine(inputFx, pf.m\_aff.\mbox{\hyperlink{class_t_affine_a570529b96b1ec5abc711aaa9aac09ff9}{inv}}());}
\DoxyCodeLine{01010       \textcolor{keywordflow}{if} (!pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}-\/>\mbox{\hyperlink{class_t_fx_a2f3083c0f21b5a3579b7124db70c06a7}{connect}}(pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}-\/>getInputPortName(i), inputFx.getPointer()))}
\DoxyCodeLine{01011         assert(!\textcolor{stringliteral}{"{}Could not connect ports!"{}});}
\DoxyCodeLine{01012     \}}
\DoxyCodeLine{01013   \}}
\DoxyCodeLine{01014 }
\DoxyCodeLine{01015   \textcolor{keywordflow}{if} (pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}-\/>getFxType() == \textcolor{stringliteral}{"{}STD\_iwa\_TextFx"{}}) \{}
\DoxyCodeLine{01016     \mbox{\hyperlink{class_text_aware_base_fx}{TextAwareBaseFx}} *textFx =}
\DoxyCodeLine{01017         \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_text_aware_base_fx}{TextAwareBaseFx}} *\textcolor{keyword}{>}(pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}.getPointer());}
\DoxyCodeLine{01018     \textcolor{keywordflow}{if} (textFx \&\& textFx-\/>getSourceType() != TextAwareBaseFx::INPUT\_TEXT) \{}
\DoxyCodeLine{01019       \textcolor{keywordtype}{int} noteColumnIndex = textFx-\/>getNoteColumnIndex();}
\DoxyCodeLine{01020       \textcolor{keywordtype}{bool} getNeighbor =}
\DoxyCodeLine{01021           (textFx-\/>getSourceType() == TextAwareBaseFx::NEARBY\_COLUMN);}
\DoxyCodeLine{01022       textFx-\/>setNoteLevelStr(getNoteText(m\_xsh, m\_frame, pf.\mbox{\hyperlink{class_placed_fx_aab44f6db03fdb9520b8af551c73c26ea}{m\_columnIndex}},}
\DoxyCodeLine{01023                                           noteColumnIndex, getNeighbor));}
\DoxyCodeLine{01024     \}}
\DoxyCodeLine{01025   \}}
\DoxyCodeLine{01026 }
\DoxyCodeLine{01027   \textcolor{keywordflow}{return} pf;}
\DoxyCodeLine{01028 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_builder_a58c42d6b54479ccf18a383cf41c47c18}\label{class_fx_builder_a58c42d6b54479ccf18a383cf41c47c18}} 
\index{FxBuilder@{FxBuilder}!makePFfromGenericFx@{makePFfromGenericFx}}
\index{makePFfromGenericFx@{makePFfromGenericFx}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{makePFfromGenericFx()}{makePFfromGenericFx()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} Fx\+Builder\+::make\+PFfrom\+Generic\+Fx (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_fx}{TFx}} $\ast$}]{fx }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01118                                                \{}
\DoxyCodeLine{01119   assert(!\textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_level_column_fx}{TLevelColumnFx}} *\textcolor{keyword}{>}(fx));}
\DoxyCodeLine{01120   assert(!\textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_zerary_column_fx}{TZeraryColumnFx}} *\textcolor{keyword}{>}(fx));}
\DoxyCodeLine{01121 }
\DoxyCodeLine{01122   \mbox{\hyperlink{class_placed_fx}{PlacedFx}} pf;}
\DoxyCodeLine{01123 }
\DoxyCodeLine{01124   \textcolor{keywordflow}{if} (!fx-\/>getAttributes()-\/>isEnabled()) \{}
\DoxyCodeLine{01125     \textcolor{keywordflow}{if} (fx-\/>getInputPortCount() == 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_placed_fx}{PlacedFx}}();}
\DoxyCodeLine{01126 }
\DoxyCodeLine{01127     \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} inputFx = fx-\/>getInputPort(fx-\/>getPreferredInputPort())-\/>getFx();}
\DoxyCodeLine{01128     \textcolor{keywordflow}{if} (inputFx) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}{makePF}}(inputFx.getPointer());}
\DoxyCodeLine{01129 }
\DoxyCodeLine{01130     \textcolor{keywordflow}{return} pf;}
\DoxyCodeLine{01131   \}}
\DoxyCodeLine{01132 }
\DoxyCodeLine{01133   \textcolor{comment}{// global controllable fx}}
\DoxyCodeLine{01134   \textcolor{keywordflow}{if} (fx-\/>getAttributes()-\/>hasGlobalControl()) \{}
\DoxyCodeLine{01135     \textcolor{keywordflow}{if} (!m\_globalControlledFx.contains(fx-\/>getFxId())) \{}
\DoxyCodeLine{01136       \mbox{\hyperlink{class_global_controllable_fx}{GlobalControllableFx}} *gcFx = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_global_controllable_fx}{GlobalControllableFx}} *\textcolor{keyword}{>}(fx);}
\DoxyCodeLine{01137       \textcolor{keywordtype}{double} val                 = gcFx-\/>getGrobalControlValue(m\_frame);}
\DoxyCodeLine{01138       \textcolor{keywordflow}{if} (val < 1.0) \{}
\DoxyCodeLine{01139         \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} inputFx = fx-\/>getInputPort(fx-\/>getPreferredInputPort())-\/>getFx();}
\DoxyCodeLine{01140         \textcolor{keywordflow}{if} (!inputFx) \textcolor{keywordflow}{return} pf;}
\DoxyCodeLine{01141         \textcolor{comment}{// insert cross dissolve fx and mix with the input fx}}
\DoxyCodeLine{01142         \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} blendFx = TFx::create(\textcolor{stringliteral}{"{}blendFx"{}});}
\DoxyCodeLine{01143         blendFx-\/>\mbox{\hyperlink{class_t_fx_a2f3083c0f21b5a3579b7124db70c06a7}{connect}}(\textcolor{stringliteral}{"{}Source1"{}}, fx);}
\DoxyCodeLine{01144         blendFx-\/>\mbox{\hyperlink{class_t_fx_a2f3083c0f21b5a3579b7124db70c06a7}{connect}}(\textcolor{stringliteral}{"{}Source2"{}}, inputFx.getPointer());}
\DoxyCodeLine{01145         m\_globalControlledFx.insert(fx-\/>getFxId(), \{blendFx, true\});}
\DoxyCodeLine{01146         \textcolor{comment}{// set the global intensity value to the cross dissolve fx}}
\DoxyCodeLine{01147         \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *\textcolor{keyword}{>}(blendFx-\/>getParams()-\/>getParam(\textcolor{stringliteral}{"{}value"{}}))}
\DoxyCodeLine{01148             -\/>setDefaultValue(val * 100.0);}
\DoxyCodeLine{01149         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}{makePF}}(blendFx.getPointer());}
\DoxyCodeLine{01150       \}}
\DoxyCodeLine{01151     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_globalControlledFx.value(fx-\/>getFxId()).second)}
\DoxyCodeLine{01152       m\_globalControlledFx[fx-\/>getFxId()].second = \textcolor{keyword}{false};}
\DoxyCodeLine{01153     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01154       m\_globalControlledFx[fx-\/>getFxId()].second = \textcolor{keyword}{true};}
\DoxyCodeLine{01155       \textcolor{keywordflow}{return} \mbox{\hyperlink{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}{makePF}}(}
\DoxyCodeLine{01156           m\_globalControlledFx.value(fx-\/>getFxId()).first.getPointer());}
\DoxyCodeLine{01157     \}}
\DoxyCodeLine{01158   \}}
\DoxyCodeLine{01159 }
\DoxyCodeLine{01160   \textcolor{comment}{// Multi-\/input fxs are always cloned -\/ since at least one of its input ports}}
\DoxyCodeLine{01161   \textcolor{comment}{// will have an NaAffineFx}}
\DoxyCodeLine{01162   \textcolor{comment}{// injected just before its actual input fx.}}
\DoxyCodeLine{01163   pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}} = fx-\/>clone(\textcolor{keyword}{false});}
\DoxyCodeLine{01164 }
\DoxyCodeLine{01165   \textcolor{keywordtype}{bool} firstInput = \textcolor{keyword}{true};}
\DoxyCodeLine{01166 }
\DoxyCodeLine{01167   \textcolor{keywordtype}{int} m = fx-\/>getInputPortCount();}
\DoxyCodeLine{01168   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m; ++i) \{}
\DoxyCodeLine{01169     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} inputFx = fx-\/>getInputPort(i)-\/>getFx()) \{}
\DoxyCodeLine{01170       \mbox{\hyperlink{class_placed_fx}{PlacedFx}} inputPF = \mbox{\hyperlink{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}{makePF}}(inputFx.getPointer());}
\DoxyCodeLine{01171       inputFx          = inputPF.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}};}
\DoxyCodeLine{01172       \textcolor{comment}{// check the column index instead of inputFx}}
\DoxyCodeLine{01173       \textcolor{comment}{// so that the firstly-\/found input column always inherits}}
\DoxyCodeLine{01174       \textcolor{comment}{// its placement even if the current cell is empty.}}
\DoxyCodeLine{01175       \textcolor{keywordflow}{if} (inputPF.\mbox{\hyperlink{class_placed_fx_aab44f6db03fdb9520b8af551c73c26ea}{m\_columnIndex}} < 0 \&\& !inputPF.m\_isPostXsheetNode) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01176 }
\DoxyCodeLine{01177       \textcolor{keywordflow}{if} (firstInput) \{}
\DoxyCodeLine{01178         firstInput = \textcolor{keyword}{false};}
\DoxyCodeLine{01179 }
\DoxyCodeLine{01180         \textcolor{comment}{// The first found input PlacedFx carries its placement infos up}}
\DoxyCodeLine{01181         pf.m\_aff              = inputPF.m\_aff;}
\DoxyCodeLine{01182         pf.\mbox{\hyperlink{class_placed_fx_aab44f6db03fdb9520b8af551c73c26ea}{m\_columnIndex}}      = inputPF.\mbox{\hyperlink{class_placed_fx_aab44f6db03fdb9520b8af551c73c26ea}{m\_columnIndex}};}
\DoxyCodeLine{01183         pf.\mbox{\hyperlink{class_placed_fx_a910b9cb891b480fae5bff3a907faa17a}{m\_z}}                = inputPF.\mbox{\hyperlink{class_placed_fx_a910b9cb891b480fae5bff3a907faa17a}{m\_z}};}
\DoxyCodeLine{01184         pf.\mbox{\hyperlink{class_placed_fx_a19ef25be41afd3a5c402eb962f609e2d}{m\_so}}               = inputPF.\mbox{\hyperlink{class_placed_fx_a19ef25be41afd3a5c402eb962f609e2d}{m\_so}};}
\DoxyCodeLine{01185         pf.m\_isPostXsheetNode = inputPF.m\_isPostXsheetNode;}
\DoxyCodeLine{01186 }
\DoxyCodeLine{01187         \textcolor{comment}{/*-\/-\/ 軌跡を取得するBinaryFxの場合 -\/-\/*/}}
\DoxyCodeLine{01188         \textcolor{keywordflow}{if} (pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}-\/>getAttributes()-\/>isSpeedAware()) \{}
\DoxyCodeLine{01189           \mbox{\hyperlink{class_motion_aware_base_fx}{MotionAwareBaseFx}} *mabfx =}
\DoxyCodeLine{01190               \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_motion_aware_base_fx}{MotionAwareBaseFx}} *\textcolor{keyword}{>}(pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}.getPointer());}
\DoxyCodeLine{01191           \textcolor{keywordflow}{if} (mabfx) \{}
\DoxyCodeLine{01192             \textcolor{keywordtype}{double} shutterStart = mabfx-\/>getShutterStart()-\/>getValue(m\_frame);}
\DoxyCodeLine{01193             \textcolor{keywordtype}{double} shutterEnd   = mabfx-\/>getShutterEnd()-\/>getValue(m\_frame);}
\DoxyCodeLine{01194             \textcolor{keywordtype}{int} traceResolution = mabfx-\/>getTraceResolution()-\/>getValue();}
\DoxyCodeLine{01195             \textcolor{comment}{/*-\/-\/ 移動の参考にするオブジェクトの取得。自分自身の場合はNoneId -\/-\/*/}}
\DoxyCodeLine{01196             MotionObjectType type   = mabfx-\/>getMotionObjectType();}
\DoxyCodeLine{01197             \textcolor{keywordtype}{int} index               = mabfx-\/>getMotionObjectIndex()-\/>getValue();}
\DoxyCodeLine{01198             \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} objectId = getMotionObjectId(type, index);}
\DoxyCodeLine{01199             pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}-\/>getAttributes()-\/>setMotionPoints(getColumnMotionPoints(}
\DoxyCodeLine{01200                 m\_xsh, m\_frame, pf.\mbox{\hyperlink{class_placed_fx_aab44f6db03fdb9520b8af551c73c26ea}{m\_columnIndex}}, objectId, m\_isPreview,}
\DoxyCodeLine{01201                 shutterStart, shutterEnd, traceResolution));}
\DoxyCodeLine{01202           \}}
\DoxyCodeLine{01203         \}}
\DoxyCodeLine{01204 }
\DoxyCodeLine{01205         \textcolor{keywordflow}{if} (!inputFx) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01206 }
\DoxyCodeLine{01207       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!inputFx)}
\DoxyCodeLine{01208         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01209       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01210         \textcolor{comment}{// The follow-\/ups traduce their PlacedFx::m\_aff into an NaAffineFx,}}
\DoxyCodeLine{01211         \textcolor{comment}{// instead}}
\DoxyCodeLine{01212         inputFx = getFxWithColumnMovements(inputPF);}
\DoxyCodeLine{01213         inputFx = TFxUtil::makeAffine(inputFx, pf.m\_aff.\mbox{\hyperlink{class_t_affine_a570529b96b1ec5abc711aaa9aac09ff9}{inv}}());}
\DoxyCodeLine{01214       \}}
\DoxyCodeLine{01215 }
\DoxyCodeLine{01216       \textcolor{keywordflow}{if} (!pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}-\/>\mbox{\hyperlink{class_t_fx_a2f3083c0f21b5a3579b7124db70c06a7}{connect}}(pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}-\/>getInputPortName(i), inputFx.getPointer()))}
\DoxyCodeLine{01217         assert(!\textcolor{stringliteral}{"{}Could not connect ports!"{}});}
\DoxyCodeLine{01218     \}}
\DoxyCodeLine{01219   \}}
\DoxyCodeLine{01220 }
\DoxyCodeLine{01221   \textcolor{comment}{// The xsheet-\/like input port is activated and brought upwards whenever it is}}
\DoxyCodeLine{01222   \textcolor{comment}{// both}}
\DoxyCodeLine{01223   \textcolor{comment}{// specified by the fx, and there is no input fx attached to it.}}
\DoxyCodeLine{01224   \textcolor{keywordflow}{if} (pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}-\/>getXsheetPort() \&\& pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}-\/>getXsheetPort()-\/>getFx() == 0)}
\DoxyCodeLine{01225     pf.m\_leftXsheetPort = pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}-\/>getXsheetPort();}
\DoxyCodeLine{01226 }
\DoxyCodeLine{01227   \textcolor{keywordflow}{return} pf;}
\DoxyCodeLine{01228 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_fx_builder_af2cd5c3ff5f84d9ee57c8aa120499d3f}\label{class_fx_builder_af2cd5c3ff5f84d9ee57c8aa120499d3f}} 
\index{FxBuilder@{FxBuilder}!makePFfromUnaryFx@{makePFfromUnaryFx}}
\index{makePFfromUnaryFx@{makePFfromUnaryFx}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{makePFfromUnaryFx()}{makePFfromUnaryFx()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_placed_fx}{Placed\+Fx}} Fx\+Builder\+::make\+PFfrom\+Unary\+Fx (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_fx}{TFx}} $\ast$}]{fx }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01032                                              \{}
\DoxyCodeLine{01033   assert(!\textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_level_column_fx}{TLevelColumnFx}} *\textcolor{keyword}{>}(fx));}
\DoxyCodeLine{01034   assert(!\textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_zerary_column_fx}{TZeraryColumnFx}} *\textcolor{keyword}{>}(fx));}
\DoxyCodeLine{01035   assert(fx-\/>getInputPortCount() == 1);}
\DoxyCodeLine{01036 }
\DoxyCodeLine{01037   \mbox{\hyperlink{class_t_fx}{TFx}} *inputFx = fx-\/>getInputPort(0)-\/>getFx();}
\DoxyCodeLine{01038   \textcolor{keywordflow}{if} (!inputFx) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_placed_fx}{PlacedFx}}();}
\DoxyCodeLine{01039 }
\DoxyCodeLine{01040   \textcolor{comment}{// global controllable fx}}
\DoxyCodeLine{01041   \textcolor{keywordflow}{if} (fx-\/>getAttributes()-\/>hasGlobalControl()) \{}
\DoxyCodeLine{01042     \textcolor{keywordflow}{if} (!m\_globalControlledFx.contains(fx-\/>getFxId())) \{}
\DoxyCodeLine{01043       \mbox{\hyperlink{class_global_controllable_fx}{GlobalControllableFx}} *gcFx = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_global_controllable_fx}{GlobalControllableFx}} *\textcolor{keyword}{>}(fx);}
\DoxyCodeLine{01044       \textcolor{keywordtype}{double} val                 = gcFx-\/>getGrobalControlValue(m\_frame);}
\DoxyCodeLine{01045       \textcolor{keywordflow}{if} (val < 1.0) \{}
\DoxyCodeLine{01046         \textcolor{comment}{// insert cross dissolve fx and mix with the input fx}}
\DoxyCodeLine{01047         \mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}} blendFx = TFx::create(\textcolor{stringliteral}{"{}blendFx"{}});}
\DoxyCodeLine{01048         blendFx-\/>\mbox{\hyperlink{class_t_fx_a2f3083c0f21b5a3579b7124db70c06a7}{connect}}(\textcolor{stringliteral}{"{}Source1"{}}, fx);}
\DoxyCodeLine{01049         blendFx-\/>\mbox{\hyperlink{class_t_fx_a2f3083c0f21b5a3579b7124db70c06a7}{connect}}(\textcolor{stringliteral}{"{}Source2"{}}, inputFx);}
\DoxyCodeLine{01050         \textcolor{comment}{// set the global intensity value to the cross dissolve fx}}
\DoxyCodeLine{01051         \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *\textcolor{keyword}{>}(blendFx-\/>getParams()-\/>getParam(\textcolor{stringliteral}{"{}value"{}}))}
\DoxyCodeLine{01052             -\/>setDefaultValue(val * 100.0);}
\DoxyCodeLine{01053         m\_globalControlledFx.insert(fx-\/>getFxId(), \{blendFx, \textcolor{keyword}{true}\});}
\DoxyCodeLine{01054         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}{makePF}}(blendFx.getPointer());}
\DoxyCodeLine{01055       \}}
\DoxyCodeLine{01056     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_globalControlledFx.value(fx-\/>getFxId()).second)}
\DoxyCodeLine{01057       m\_globalControlledFx[fx-\/>getFxId()].second = \textcolor{keyword}{false};}
\DoxyCodeLine{01058     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01059       m\_globalControlledFx[fx-\/>getFxId()].second = \textcolor{keyword}{true};}
\DoxyCodeLine{01060       \textcolor{keywordflow}{return} \mbox{\hyperlink{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}{makePF}}(}
\DoxyCodeLine{01061           m\_globalControlledFx.value(fx-\/>getFxId()).first.getPointer());}
\DoxyCodeLine{01062     \}}
\DoxyCodeLine{01063   \}}
\DoxyCodeLine{01064 }
\DoxyCodeLine{01065   \mbox{\hyperlink{class_placed_fx}{PlacedFx}} pf = \mbox{\hyperlink{class_fx_builder_af4024bf49b3f6b19ba3fe964807f5741}{makePF}}(inputFx);  \textcolor{comment}{// Build sub-\/render-\/tree}}
\DoxyCodeLine{01066   \textcolor{keywordflow}{if} (pf.\mbox{\hyperlink{class_placed_fx_aab44f6db03fdb9520b8af551c73c26ea}{m\_columnIndex}} < 0 \&\& !pf.m\_isPostXsheetNode) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_placed_fx}{PlacedFx}}();}
\DoxyCodeLine{01067   \textcolor{comment}{// inherit the column placement even if the current cell is empty}}
\DoxyCodeLine{01068   \textcolor{keywordflow}{if} (!pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}) \textcolor{keywordflow}{return} pf;}
\DoxyCodeLine{01069 }
\DoxyCodeLine{01070   \textcolor{keywordflow}{if} (fx-\/>getAttributes()-\/>isEnabled()) \{}
\DoxyCodeLine{01071     \textcolor{comment}{// Fx is enabled, so insert it in the render-\/tree}}
\DoxyCodeLine{01072 }
\DoxyCodeLine{01073     \textcolor{comment}{// Clone this fx necessary}}
\DoxyCodeLine{01074     \textcolor{keywordflow}{if} (pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}.getPointer() != inputFx ||  \textcolor{comment}{// As in an earlier makePF, clone}}
\DoxyCodeLine{01075                                             \textcolor{comment}{// whenever input connections have}}
\DoxyCodeLine{01076                                             \textcolor{comment}{// changed}}
\DoxyCodeLine{01077         fx-\/>getAttributes()-\/>isSpeedAware() ||  \textcolor{comment}{// In the 'speedAware' case,}}
\DoxyCodeLine{01078                                                 \textcolor{comment}{// we'll alter the fx's}}
\DoxyCodeLine{01079                                                 \textcolor{comment}{// attributes (see below)}}
\DoxyCodeLine{01080         \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_macro_fx}{TMacroFx}} *\textcolor{keyword}{>}(fx))  \textcolor{comment}{// As for macros... I'm not sure. Not}}
\DoxyCodeLine{01081                                        \textcolor{comment}{// even who wrote this *understood*}}
\DoxyCodeLine{01082     \textcolor{comment}{// why -\/ it just solved a bug  X( . Investigate!}}
\DoxyCodeLine{01083     \{}
\DoxyCodeLine{01084       fx = fx-\/>clone(\textcolor{keyword}{false});}
\DoxyCodeLine{01085       \textcolor{keywordflow}{if} (!fx-\/>\mbox{\hyperlink{class_t_fx_a2f3083c0f21b5a3579b7124db70c06a7}{connect}}(fx-\/>getInputPortName(0), pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}}.getPointer()))}
\DoxyCodeLine{01086         assert(!\textcolor{stringliteral}{"{}Could not connect ports!"{}});}
\DoxyCodeLine{01087     \}}
\DoxyCodeLine{01088 }
\DoxyCodeLine{01089     pf.\mbox{\hyperlink{class_placed_fx_af8263bb84b35a0b77d078b6025f96546}{m\_fx}} = fx;}
\DoxyCodeLine{01090 }
\DoxyCodeLine{01091     \textcolor{keywordflow}{if} (fx-\/>getAttributes()-\/>isSpeedAware()) \{}
\DoxyCodeLine{01092       \textcolor{comment}{/*-\/-\/ スピードでなく、軌跡を取得する場合 -\/-\/*/}}
\DoxyCodeLine{01093       \mbox{\hyperlink{class_motion_aware_base_fx}{MotionAwareBaseFx}} *mabfx = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_motion_aware_base_fx}{MotionAwareBaseFx}} *\textcolor{keyword}{>}(fx);}
\DoxyCodeLine{01094       \textcolor{keywordflow}{if} (mabfx) \{}
\DoxyCodeLine{01095         \textcolor{keywordtype}{double} shutterStart = mabfx-\/>getShutterStart()-\/>getValue(m\_frame);}
\DoxyCodeLine{01096         \textcolor{keywordtype}{double} shutterEnd   = mabfx-\/>getShutterEnd()-\/>getValue(m\_frame);}
\DoxyCodeLine{01097         \textcolor{keywordtype}{int} traceResolution = mabfx-\/>getTraceResolution()-\/>getValue();}
\DoxyCodeLine{01098         \textcolor{comment}{/*-\/-\/ 移動の参考にするオブジェクトの取得。自分自身の場合はNoneId -\/-\/*/}}
\DoxyCodeLine{01099         MotionObjectType type   = mabfx-\/>getMotionObjectType();}
\DoxyCodeLine{01100         \textcolor{keywordtype}{int} index               = mabfx-\/>getMotionObjectIndex()-\/>getValue();}
\DoxyCodeLine{01101         \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} objectId = getMotionObjectId(type, index);}
\DoxyCodeLine{01102         fx-\/>getAttributes()-\/>setMotionPoints(getColumnMotionPoints(}
\DoxyCodeLine{01103             m\_xsh, m\_frame, pf.\mbox{\hyperlink{class_placed_fx_aab44f6db03fdb9520b8af551c73c26ea}{m\_columnIndex}}, objectId, m\_isPreview,}
\DoxyCodeLine{01104             shutterStart, shutterEnd, traceResolution));}
\DoxyCodeLine{01105       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01106         \mbox{\hyperlink{class_t_point_t}{TPointD}} speed =}
\DoxyCodeLine{01107             getColumnSpeed(m\_xsh, m\_frame, pf.\mbox{\hyperlink{class_placed_fx_aab44f6db03fdb9520b8af551c73c26ea}{m\_columnIndex}}, m\_isPreview);}
\DoxyCodeLine{01108         fx-\/>getAttributes()-\/>setSpeed(speed);}
\DoxyCodeLine{01109       \}}
\DoxyCodeLine{01110     \}}
\DoxyCodeLine{01111   \}}
\DoxyCodeLine{01112 }
\DoxyCodeLine{01113   \textcolor{keywordflow}{return} pf;}
\DoxyCodeLine{01114 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_fx_builder_aebedc07193e4c1c3f7836eee158d307b}\label{class_fx_builder_aebedc07193e4c1c3f7836eee158d307b}} 
\index{FxBuilder@{FxBuilder}!m\_cameraAff@{m\_cameraAff}}
\index{m\_cameraAff@{m\_cameraAff}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{m\_cameraAff}{m\_cameraAff}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_affine}{TAffine}} Fx\+Builder\+::m\+\_\+camera\+Aff}

\mbox{\Hypertarget{class_fx_builder_ab193cbe36ac178a47e89352104fb72f7}\label{class_fx_builder_ab193cbe36ac178a47e89352104fb72f7}} 
\index{FxBuilder@{FxBuilder}!m\_cameraZ@{m\_cameraZ}}
\index{m\_cameraZ@{m\_cameraZ}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{m\_cameraZ}{m\_cameraZ}}
{\footnotesize\ttfamily double Fx\+Builder\+::m\+\_\+cameraZ}

\mbox{\Hypertarget{class_fx_builder_ae4a1bbd35d06c3843732c737587c71c6}\label{class_fx_builder_ae4a1bbd35d06c3843732c737587c71c6}} 
\index{FxBuilder@{FxBuilder}!m\_expandXSheet@{m\_expandXSheet}}
\index{m\_expandXSheet@{m\_expandXSheet}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{m\_expandXSheet}{m\_expandXSheet}}
{\footnotesize\ttfamily bool Fx\+Builder\+::m\+\_\+expand\+XSheet}

\mbox{\Hypertarget{class_fx_builder_a7e3accce3ade7141906b6c8290c0dc83}\label{class_fx_builder_a7e3accce3ade7141906b6c8290c0dc83}} 
\index{FxBuilder@{FxBuilder}!m\_frame@{m\_frame}}
\index{m\_frame@{m\_frame}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{m\_frame}{m\_frame}}
{\footnotesize\ttfamily double Fx\+Builder\+::m\+\_\+frame}

\mbox{\Hypertarget{class_fx_builder_a047a6e90b2c124db3704a7870e88543b}\label{class_fx_builder_a047a6e90b2c124db3704a7870e88543b}} 
\index{FxBuilder@{FxBuilder}!m\_globalControlledFx@{m\_globalControlledFx}}
\index{m\_globalControlledFx@{m\_globalControlledFx}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{m\_globalControlledFx}{m\_globalControlledFx}}
{\footnotesize\ttfamily QMap$<$std\+::wstring, QPair$<$\mbox{\hyperlink{class_t_smart_pointer_t}{TFxP}}, bool$>$ $>$ Fx\+Builder\+::m\+\_\+global\+Controlled\+Fx}

\mbox{\Hypertarget{class_fx_builder_a40e338c0b1fc2412bbf8058aaa247293}\label{class_fx_builder_a40e338c0b1fc2412bbf8058aaa247293}} 
\index{FxBuilder@{FxBuilder}!m\_isPreview@{m\_isPreview}}
\index{m\_isPreview@{m\_isPreview}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{m\_isPreview}{m\_isPreview}}
{\footnotesize\ttfamily bool Fx\+Builder\+::m\+\_\+is\+Preview}

\mbox{\Hypertarget{class_fx_builder_abbef4e5db9b886b35f22d18557d626f0}\label{class_fx_builder_abbef4e5db9b886b35f22d18557d626f0}} 
\index{FxBuilder@{FxBuilder}!m\_particleDescendentCount@{m\_particleDescendentCount}}
\index{m\_particleDescendentCount@{m\_particleDescendentCount}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{m\_particleDescendentCount}{m\_particleDescendentCount}}
{\footnotesize\ttfamily int Fx\+Builder\+::m\+\_\+particle\+Descendent\+Count}

\mbox{\Hypertarget{class_fx_builder_a7605d87ea2fd2da04e8e653e227591b2}\label{class_fx_builder_a7605d87ea2fd2da04e8e653e227591b2}} 
\index{FxBuilder@{FxBuilder}!m\_scene@{m\_scene}}
\index{m\_scene@{m\_scene}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{m\_scene}{m\_scene}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_toonz_scene}{Toonz\+Scene}}$\ast$ Fx\+Builder\+::m\+\_\+scene}

\mbox{\Hypertarget{class_fx_builder_a847ef9f9181a798f01f56aafb31c9456}\label{class_fx_builder_a847ef9f9181a798f01f56aafb31c9456}} 
\index{FxBuilder@{FxBuilder}!m\_whichLevels@{m\_whichLevels}}
\index{m\_whichLevels@{m\_whichLevels}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{m\_whichLevels}{m\_whichLevels}}
{\footnotesize\ttfamily int Fx\+Builder\+::m\+\_\+which\+Levels}

\mbox{\Hypertarget{class_fx_builder_a8b0cb40853b2c631ce2226d3e8fbee27}\label{class_fx_builder_a8b0cb40853b2c631ce2226d3e8fbee27}} 
\index{FxBuilder@{FxBuilder}!m\_xsh@{m\_xsh}}
\index{m\_xsh@{m\_xsh}!FxBuilder@{FxBuilder}}
\doxysubsubsection{\texorpdfstring{m\_xsh}{m\_xsh}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsheet}{TXsheet}}$\ast$ Fx\+Builder\+::m\+\_\+xsh}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/tw/fxbrowser.\+h\item 
E\+:/opentoonz/toonz/sources/toonzlib/scenefx.\+cpp\end{DoxyCompactItemize}
