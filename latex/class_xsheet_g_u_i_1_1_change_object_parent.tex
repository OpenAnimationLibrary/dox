\hypertarget{class_xsheet_g_u_i_1_1_change_object_parent}{}\doxysection{Xsheet\+GUI\+::Change\+Object\+Parent Class Reference}
\label{class_xsheet_g_u_i_1_1_change_object_parent}\index{XsheetGUI::ChangeObjectParent@{XsheetGUI::ChangeObjectParent}}
Inheritance diagram for Xsheet\+GUI\+::Change\+Object\+Parent\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_xsheet_g_u_i_1_1_change_object_parent}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_xsheet_g_u_i_1_1_change_object_parent_a68be034eed9789c1dc168f44c7d33eb7}{Change\+Object\+Parent}} (QWidget $\ast$parent=0)
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_change_object_parent_a6d0f376c105db13c1dd8378142af2601}{refresh}} () override
\end{DoxyCompactItemize}
\doxysubsection*{Protected Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_xsheet_g_u_i_1_1_change_object_parent_ac373064b608955d8dcbba1a59ca032ce}{on\+Text\+Changed}} (const QString \&) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_change_object_parent_a68be034eed9789c1dc168f44c7d33eb7}\label{class_xsheet_g_u_i_1_1_change_object_parent_a68be034eed9789c1dc168f44c7d33eb7}} 
\index{XsheetGUI::ChangeObjectParent@{XsheetGUI::ChangeObjectParent}!ChangeObjectParent@{ChangeObjectParent}}
\index{ChangeObjectParent@{ChangeObjectParent}!XsheetGUI::ChangeObjectParent@{XsheetGUI::ChangeObjectParent}}
\doxysubsubsection{\texorpdfstring{ChangeObjectParent()}{ChangeObjectParent()}}
{\footnotesize\ttfamily Xsheet\+GUI\+::\+Change\+Object\+Parent\+::\+Change\+Object\+Parent (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00400     : ChangeObjectWidget(parent) \{}
\DoxyCodeLine{00401   \textcolor{keywordtype}{bool} ret = connect(\textcolor{keyword}{this}, SIGNAL(currentTextChanged(\textcolor{keyword}{const} QString \&)), \textcolor{keyword}{this},}
\DoxyCodeLine{00402                      SLOT(onTextChanged(\textcolor{keyword}{const} QString \&)));}
\DoxyCodeLine{00403   assert(ret);}
\DoxyCodeLine{00404 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_change_object_parent_a6e2c85909841c42b00bbb97f4b8d6a1c}\label{class_xsheet_g_u_i_1_1_change_object_parent_a6e2c85909841c42b00bbb97f4b8d6a1c}} 
\index{XsheetGUI::ChangeObjectParent@{XsheetGUI::ChangeObjectParent}!````~ChangeObjectParent@{$\sim$ChangeObjectParent}}
\index{````~ChangeObjectParent@{$\sim$ChangeObjectParent}!XsheetGUI::ChangeObjectParent@{XsheetGUI::ChangeObjectParent}}
\doxysubsubsection{\texorpdfstring{$\sim$ChangeObjectParent()}{~ChangeObjectParent()}}
{\footnotesize\ttfamily Xsheet\+GUI\+::\+Change\+Object\+Parent\+::$\sim$\+Change\+Object\+Parent (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00408 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_change_object_parent_ac373064b608955d8dcbba1a59ca032ce}\label{class_xsheet_g_u_i_1_1_change_object_parent_ac373064b608955d8dcbba1a59ca032ce}} 
\index{XsheetGUI::ChangeObjectParent@{XsheetGUI::ChangeObjectParent}!onTextChanged@{onTextChanged}}
\index{onTextChanged@{onTextChanged}!XsheetGUI::ChangeObjectParent@{XsheetGUI::ChangeObjectParent}}
\doxysubsubsection{\texorpdfstring{onTextChanged}{onTextChanged}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Change\+Object\+Parent\+::on\+Text\+Changed (\begin{DoxyParamCaption}\item[{const QString \&}]{text }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00488                                                           \{}
\DoxyCodeLine{00489   assert(m\_xsheetHandle);}
\DoxyCodeLine{00490   assert(m\_objectHandle);}
\DoxyCodeLine{00491   \textcolor{keywordflow}{if} (text.isEmpty()) \{}
\DoxyCodeLine{00492     hide();}
\DoxyCodeLine{00493     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00494   \}}
\DoxyCodeLine{00495   \textcolor{keywordtype}{bool} isPegbar = \textcolor{keyword}{false};}
\DoxyCodeLine{00496   \textcolor{keywordflow}{if} (text.startsWith(\textcolor{stringliteral}{"{}Peg"{}})) isPegbar = \textcolor{keyword}{true};}
\DoxyCodeLine{00497   \textcolor{keywordtype}{bool} isTable = \textcolor{keyword}{false};}
\DoxyCodeLine{00498   \textcolor{keywordflow}{if} (text == \textcolor{stringliteral}{"{}Table"{}}) isTable = \textcolor{keyword}{true};}
\DoxyCodeLine{00499   QString number = text;}
\DoxyCodeLine{00500   number.remove(0, 4);}
\DoxyCodeLine{00501   \textcolor{comment}{// Remove names from the index}}
\DoxyCodeLine{00502   \textcolor{keywordtype}{int} spaceIndex = number.indexOf(\textcolor{stringliteral}{"{} "{}});}
\DoxyCodeLine{00503   \textcolor{keywordflow}{if} (spaceIndex > -\/1) number.remove(spaceIndex, 1000);}
\DoxyCodeLine{00504   \textcolor{keywordtype}{int} index = number.toInt() -\/ 1;}
\DoxyCodeLine{00505   \textcolor{keywordflow}{if} (!isTable \&\& index < 0) \{}
\DoxyCodeLine{00506     hide();}
\DoxyCodeLine{00507     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00508   \}}
\DoxyCodeLine{00509   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh                   = m\_xsheetHandle-\/>getXsheet();}
\DoxyCodeLine{00510   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} currentObjectId = m\_objectHandle-\/>getObjectId();}
\DoxyCodeLine{00511   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} currentParentId =}
\DoxyCodeLine{00512       xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(currentObjectId)-\/>\mbox{\hyperlink{class_t_stage_object_afb4724a8cc2ef7eb2c6c7585834210f2}{getParent}}();}
\DoxyCodeLine{00513   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} newStageObjectId;}
\DoxyCodeLine{00514   \textcolor{keywordflow}{if} (isPegbar)}
\DoxyCodeLine{00515     newStageObjectId = TStageObjectId::PegbarId(index);}
\DoxyCodeLine{00516   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (isTable)}
\DoxyCodeLine{00517     newStageObjectId = TStageObjectId::TableId;}
\DoxyCodeLine{00518   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00519     newStageObjectId = TStageObjectId::ColumnId(index);}
\DoxyCodeLine{00520 }
\DoxyCodeLine{00521   \textcolor{keywordflow}{if} (newStageObjectId == currentObjectId) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00522 }
\DoxyCodeLine{00523   \textcolor{keywordflow}{if} (newStageObjectId == currentParentId) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00524 }
\DoxyCodeLine{00525   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *stageObject =}
\DoxyCodeLine{00526       m\_xsheetHandle-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(currentObjectId);}
\DoxyCodeLine{00527   TStageObjectCmd::setParent(currentObjectId, newStageObjectId, \textcolor{stringliteral}{"{}B"{}},}
\DoxyCodeLine{00528                              m\_xsheetHandle);}
\DoxyCodeLine{00529 }
\DoxyCodeLine{00530   hide();}
\DoxyCodeLine{00531   m\_objectHandle-\/>notifyObjectIdChanged(\textcolor{keyword}{false});}
\DoxyCodeLine{00532   m\_xsheetHandle-\/>notifyXsheetChanged();}
\DoxyCodeLine{00533 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_xsheet_g_u_i_1_1_change_object_parent_a6d0f376c105db13c1dd8378142af2601}\label{class_xsheet_g_u_i_1_1_change_object_parent_a6d0f376c105db13c1dd8378142af2601}} 
\index{XsheetGUI::ChangeObjectParent@{XsheetGUI::ChangeObjectParent}!refresh@{refresh}}
\index{refresh@{refresh}!XsheetGUI::ChangeObjectParent@{XsheetGUI::ChangeObjectParent}}
\doxysubsubsection{\texorpdfstring{refresh()}{refresh()}}
{\footnotesize\ttfamily void Xsheet\+GUI\+::\+Change\+Object\+Parent\+::refresh (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_xsheet_g_u_i_1_1_change_object_widget}{Xsheet\+GUI\+::\+Change\+Object\+Widget}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00412                                  \{}
\DoxyCodeLine{00413   clear();}
\DoxyCodeLine{00414   assert(m\_xsheetHandle);}
\DoxyCodeLine{00415   assert(m\_objectHandle);}
\DoxyCodeLine{00416   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh                   = m\_xsheetHandle-\/>getXsheet();}
\DoxyCodeLine{00417   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} currentObjectId = m\_objectHandle-\/>getObjectId();}
\DoxyCodeLine{00418   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} parentId = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(currentObjectId)-\/>\mbox{\hyperlink{class_t_stage_object_afb4724a8cc2ef7eb2c6c7585834210f2}{getParent}}();}
\DoxyCodeLine{00419   \mbox{\hyperlink{class_t_stage_object_tree}{TStageObjectTree}} *tree  = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a5dc925584e35e1678f5678b79c470959}{getStageObjectTree}}();}
\DoxyCodeLine{00420   \textcolor{keywordtype}{int} objectCount         = tree-\/>\mbox{\hyperlink{class_t_stage_object_tree_ad0f2bb7d9ffc580ba20305d40566d2a8}{getStageObjectCount}}();}
\DoxyCodeLine{00421   QString text;}
\DoxyCodeLine{00422   QList<QString> pegbarList;}
\DoxyCodeLine{00423   QList<QString> columnList;}
\DoxyCodeLine{00424   QString theLongestTxt;}
\DoxyCodeLine{00425   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00426   \textcolor{keywordflow}{for} (i = 0; i < objectCount; i++) \{}
\DoxyCodeLine{00427     \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} \textcolor{keywordtype}{id} = tree-\/>\mbox{\hyperlink{class_t_stage_object_tree_a688e5b4f2f5730afb0cb10264f13a113}{getStageObject}}(i)-\/>\mbox{\hyperlink{class_t_stage_object_a7acac7f9d2b8aabae125a81cc4ac5b10}{getId}}();}
\DoxyCodeLine{00428     \textcolor{keywordtype}{int} index         = \textcolor{keywordtype}{id}.getIndex();}
\DoxyCodeLine{00429     QString indexStr(std::to\_string(\textcolor{keywordtype}{id}.getIndex() + 1).c\_str());}
\DoxyCodeLine{00430     QString newText;}
\DoxyCodeLine{00431     \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id} == parentId) \{}
\DoxyCodeLine{00432       \textcolor{keywordflow}{if} (parentId.\mbox{\hyperlink{class_t_stage_object_id_a2ab00aa1e5039ac19b1bf7ab0dead466}{isTable}}())}
\DoxyCodeLine{00433         text = QString(\textcolor{stringliteral}{"{}Table"{}});}
\DoxyCodeLine{00434       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (parentId.\mbox{\hyperlink{class_t_stage_object_id_a87a62052c05b8bfb6cb28c05f555a718}{isPegbar}}())}
\DoxyCodeLine{00435         text = QString(\textcolor{stringliteral}{"{}Peg "{}}) + indexStr;}
\DoxyCodeLine{00436       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (parentId.\mbox{\hyperlink{class_t_stage_object_id_af6d13fcf31e7e10eef28f085855f469c}{isColumn}}()) \{}
\DoxyCodeLine{00437         text             = QString(\textcolor{stringliteral}{"{}Col "{}}) + indexStr;}
\DoxyCodeLine{00438         QString tempText = newText;}
\DoxyCodeLine{00439         std::string name = tree-\/>\mbox{\hyperlink{class_t_stage_object_tree_a688e5b4f2f5730afb0cb10264f13a113}{getStageObject}}(i)-\/>getName();}
\DoxyCodeLine{00440         \textcolor{keywordflow}{if} (name != tempText.replace(\textcolor{stringliteral}{"{} "{}}, \textcolor{stringliteral}{"{}"{}}).toStdString()) \{}
\DoxyCodeLine{00441           text += \textcolor{stringliteral}{"{} ("{}} + QString::fromStdString(name) + \textcolor{stringliteral}{"{} )"{}};}
\DoxyCodeLine{00442         \}}
\DoxyCodeLine{00443       \}}
\DoxyCodeLine{00444     \}}
\DoxyCodeLine{00445     \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id} == currentObjectId) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00446     \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.isTable()) \{}
\DoxyCodeLine{00447       newText = QString(\textcolor{stringliteral}{"{}Table"{}});}
\DoxyCodeLine{00448       pegbarList.append(newText);}
\DoxyCodeLine{00449     \}}
\DoxyCodeLine{00450     \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.isPegbar()) \{}
\DoxyCodeLine{00451       newText = QString(\textcolor{stringliteral}{"{}Peg "{}}) + indexStr;}
\DoxyCodeLine{00452       pegbarList.append(newText);}
\DoxyCodeLine{00453     \}}
\DoxyCodeLine{00454     \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.isColumn() \&\& (!xsh-\/>\mbox{\hyperlink{class_t_xsheet_a83aecebd1b7714017a64e2b786e91a4e}{isColumnEmpty}}(index) || index < 2)) \{}
\DoxyCodeLine{00455       newText          = QString(\textcolor{stringliteral}{"{}Col "{}}) + indexStr;}
\DoxyCodeLine{00456       QString tempText = newText;}
\DoxyCodeLine{00457       std::string name = tree-\/>\mbox{\hyperlink{class_t_stage_object_tree_a688e5b4f2f5730afb0cb10264f13a113}{getStageObject}}(i)-\/>getName();}
\DoxyCodeLine{00458       \textcolor{keywordflow}{if} (name.length() > 0 \&\&}
\DoxyCodeLine{00459           name != tempText.replace(\textcolor{stringliteral}{"{} "{}}, \textcolor{stringliteral}{"{}"{}}).toStdString()) \{}
\DoxyCodeLine{00460         newText += \textcolor{stringliteral}{"{} ("{}} + QString::fromStdString(name) + \textcolor{stringliteral}{"{} )"{}};}
\DoxyCodeLine{00461       \}}
\DoxyCodeLine{00462       columnList.append(newText);}
\DoxyCodeLine{00463     \}}
\DoxyCodeLine{00464     \textcolor{keywordflow}{if} (newText.length() > theLongestTxt.length()) theLongestTxt = newText;}
\DoxyCodeLine{00465   \}}
\DoxyCodeLine{00466   \textcolor{keywordflow}{for} (i = 0; i < columnList.size(); i++) addItem(columnList.at(i));}
\DoxyCodeLine{00467   \textcolor{keywordflow}{for} (i = 0; i < pegbarList.size(); i++) addItem(pegbarList.at(i));}
\DoxyCodeLine{00468 }
\DoxyCodeLine{00469   QString fontName = Preferences::instance()-\/>getInterfaceFont();}
\DoxyCodeLine{00470   \textcolor{keywordflow}{if} (fontName == \textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{00471 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{00472     fontName = \textcolor{stringliteral}{"{}Arial"{}};}
\DoxyCodeLine{00473 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00474     fontName = \textcolor{stringliteral}{"{}Helvetica"{}};}
\DoxyCodeLine{00475 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00476   \}}
\DoxyCodeLine{00477   \textcolor{keyword}{static} QFont font(fontName, -\/1, QFont::Normal);}
\DoxyCodeLine{00478   \textcolor{comment}{// set font size in pixel}}
\DoxyCodeLine{00479   font.setPixelSize(XSHEET\_FONT\_PX\_SIZE);}
\DoxyCodeLine{00480 }
\DoxyCodeLine{00481   m\_width             = QFontMetrics(font).width(theLongestTxt) + 22;}
\DoxyCodeLine{00482   std::string strText = text.toStdString();}
\DoxyCodeLine{00483   selectCurrent(text);}
\DoxyCodeLine{00484 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/xshcolumnviewer.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/xshcolumnviewer.\+cpp\end{DoxyCompactItemize}
