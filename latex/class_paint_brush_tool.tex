\hypertarget{class_paint_brush_tool}{}\doxysection{Paint\+Brush\+Tool Class Reference}
\label{class_paint_brush_tool}\index{PaintBrushTool@{PaintBrushTool}}
Inheritance diagram for Paint\+Brush\+Tool\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_paint_brush_tool}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} \mbox{\hyperlink{class_paint_brush_tool_afde496af17586e6244d31b179c3026c2}{get\+Tool\+Type}} () const override
\item 
void \mbox{\hyperlink{class_paint_brush_tool_a379e67156bea0ec690c1d7155489dfa0}{draw}} () override
\begin{DoxyCompactList}\small\item\em Draws the tool on the viewer. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_paint_brush_tool_af4c100161de6c72281c84de3b3ff1a93}\label{class_paint_brush_tool_af4c100161de6c72281c84de3b3ff1a93}} 
void {\bfseries update} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonz\+ImageP}} ti, \mbox{\hyperlink{class_t_rect_t}{TRectD}} area)
\item 
void \mbox{\hyperlink{class_paint_brush_tool_a9c6f42224430c77310b65e4f8dec066e}{update\+Translation}} () override
\item 
void \mbox{\hyperlink{class_paint_brush_tool_a82e178c78ef4583a2cadb7ef552e15f2}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_paint_brush_tool_a25b5b8c6accc7e31de2bbc62832b31f4}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_paint_brush_tool_abaf5d0d6c8fe5a32a48696a77d64467a}{left\+Button\+Up}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\item 
void \mbox{\hyperlink{class_paint_brush_tool_a9388950420c0691843f12523b6581ab6}{mouse\+Move}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_paint_brush_tool_a19e1c19353c40259f636d99c067d9862}{on\+Enter}} () override
\begin{DoxyCompactList}\small\item\em Callback for the mouse entering the viewer area. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_paint_brush_tool_a7ceffa637d1e45664ed3879960168765}{on\+Leave}} () override
\begin{DoxyCompactList}\small\item\em Callback for the mouse leaving the viewer area. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_paint_brush_tool_af258ef41f7a283c7bffe5a36cfa4cec7}{on\+Activate}} () override
\begin{DoxyCompactList}\small\item\em Callback invoked whenever the tool activates. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_paint_brush_tool_a35b116494359aad3f0f3a66c905b1bc2}{on\+Deactivate}} () override
\begin{DoxyCompactList}\small\item\em Callback for tool deactivation, includes tool switch. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_paint_brush_tool_a6fea495827c90c0c14f065a8619294d7}{on\+Property\+Changed}} (std\+::string property\+Name) override
\item 
\mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ \mbox{\hyperlink{class_paint_brush_tool_ae65fce0b42b004676621523914e6fcd5}{get\+Properties}} (int target\+Type) override
\item 
int \mbox{\hyperlink{class_paint_brush_tool_a9052fe3ab44be95bfc3a9e539785e792}{get\+Cursor\+Id}} () const override
\begin{DoxyCompactList}\small\item\em Returns the type of cursor used by the tool. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_paint_brush_tool_ac3afd05f8dd5a146eb529ec704d0f2fd}{get\+Centered\+Cursor\+Pos}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&original\+Cursor\+Pos)
\item 
void \mbox{\hyperlink{class_paint_brush_tool_aaf6892645674bcd8fe17414a59b32c9a}{fix\+Mouse\+Pos}} (\mbox{\hyperlink{class_t_point_t}{TPointD}} pos, bool precise=false)
\item 
int \mbox{\hyperlink{class_paint_brush_tool_a851906cd5dc4510d9c7d8d5786d9f91a}{get\+Color\+Class}} () const
\item 
void \mbox{\hyperlink{class_paint_brush_tool_a900274445d686dd731e6a1de02709b4b}{finish\+Brush}} ()
\item 
bool \mbox{\hyperlink{class_paint_brush_tool_aeddb5e2175267b6057f9e48505197205}{is\+Pencil\+Mode\+Active}} () override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_paint_brush_tool_affefc55f5c62b5266ffb77415938c1f6}\label{class_paint_brush_tool_affefc55f5c62b5266ffb77415938c1f6}} 
\index{PaintBrushTool@{PaintBrushTool}!PaintBrushTool@{PaintBrushTool}}
\index{PaintBrushTool@{PaintBrushTool}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{PaintBrushTool()}{PaintBrushTool()}}
{\footnotesize\ttfamily Paint\+Brush\+Tool\+::\+Paint\+Brush\+Tool (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00322     : \mbox{\hyperlink{class_t_tool_a9c63ec35f606e755d0d036bf4fed62ab}{TTool}}(\textcolor{stringliteral}{"{}T\_PaintBrush"{}})}
\DoxyCodeLine{00323     , m\_rasterTrack(0)}
\DoxyCodeLine{00324     , m\_pointSize(-\/1)}
\DoxyCodeLine{00325     , m\_selecting(\textcolor{keyword}{false})}
\DoxyCodeLine{00326     , m\_tileSaver(0)}
\DoxyCodeLine{00327     , m\_cursor(ToolCursor::EraserCursor)}
\DoxyCodeLine{00328     \textcolor{comment}{// sostituire i nomi con quelli del current, tipo W\_ToolOptions...}}
\DoxyCodeLine{00329     , m\_toolSize(\textcolor{stringliteral}{"{}Size:"{}}, 1, 1000, 10, \textcolor{keyword}{false})  \textcolor{comment}{// W\_ToolOptions\_BrushToolSize}}
\DoxyCodeLine{00330     , m\_colorType(\textcolor{stringliteral}{"{}Mode:"{}})                     \textcolor{comment}{// W\_ToolOptions\_InkOrPaint}}
\DoxyCodeLine{00331     , m\_onlyEmptyAreas(\textcolor{stringliteral}{"{}Selective"{}}, \textcolor{keyword}{false})     \textcolor{comment}{// W\_ToolOptions\_Selective}}
\DoxyCodeLine{00332     , m\_firstTime(\textcolor{keyword}{true})}
\DoxyCodeLine{00333     , m\_workingFrameId(\mbox{\hyperlink{class_t_frame_id}{TFrameId}}())}
\DoxyCodeLine{00334     , m\_modifierLockAlpha(\textcolor{stringliteral}{"{}Lock Alpha"{}}, \textcolor{keyword}{false}) \{}
\DoxyCodeLine{00335   m\_toolSize.setNonLinearSlider();}
\DoxyCodeLine{00336 }
\DoxyCodeLine{00337   m\_colorType.addValue(LINES);}
\DoxyCodeLine{00338   m\_colorType.addValue(AREAS);}
\DoxyCodeLine{00339   m\_colorType.addValue(ALL);}
\DoxyCodeLine{00340 }
\DoxyCodeLine{00341   bind(\mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{TTool::ToonzImage}});}
\DoxyCodeLine{00342 }
\DoxyCodeLine{00343   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_toolSize);}
\DoxyCodeLine{00344   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_colorType);}
\DoxyCodeLine{00345   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_onlyEmptyAreas);}
\DoxyCodeLine{00346   m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_modifierLockAlpha);}
\DoxyCodeLine{00347 }
\DoxyCodeLine{00348   m\_onlyEmptyAreas.setId(\textcolor{stringliteral}{"{}Selective"{}});}
\DoxyCodeLine{00349   m\_colorType.setId(\textcolor{stringliteral}{"{}Mode"{}});}
\DoxyCodeLine{00350   m\_modifierLockAlpha.setId(\textcolor{stringliteral}{"{}LockAlpha"{}});}
\DoxyCodeLine{00351 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_paint_brush_tool_a379e67156bea0ec690c1d7155489dfa0}\label{class_paint_brush_tool_a379e67156bea0ec690c1d7155489dfa0}} 
\index{PaintBrushTool@{PaintBrushTool}!draw@{draw}}
\index{draw@{draw}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Paint\+Brush\+Tool\+::draw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Draws the tool on the viewer. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a058bf656d73bf3cd63b9826cbaaf48e0}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00398                           \{}
\DoxyCodeLine{00399   \textcolor{comment}{/*-\/-\/ MouseLeave時にBrushTipが描かれるのを防止する -\/-\/*/}}
\DoxyCodeLine{00400   \textcolor{keywordflow}{if} (m\_pointSize == -\/1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00401 }
\DoxyCodeLine{00402   \textcolor{comment}{// If toggled off, don't draw brush outline}}
\DoxyCodeLine{00403   \textcolor{keywordflow}{if} (!Preferences::instance()-\/>isCursorOutlineEnabled()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00404 }
\DoxyCodeLine{00405   \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}})\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00406   \textcolor{keywordflow}{if} (!ti) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00407   \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} ras = ti-\/>getRaster();}
\DoxyCodeLine{00408   \textcolor{keywordtype}{int} lx       = ras-\/>getLx();}
\DoxyCodeLine{00409   \textcolor{keywordtype}{int} ly       = ras-\/>getLy();}
\DoxyCodeLine{00410 }
\DoxyCodeLine{00411   \textcolor{keywordflow}{if} ((ToonzCheck::instance()-\/>getChecks() \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876a7ad1deef6a508e60252b818c61ce83e9}{ToonzCheck::eInk}}) ||}
\DoxyCodeLine{00412       (ToonzCheck::instance()-\/>getChecks() \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876a5a4df203cdba2a5eb6f7eba19f9ab62e}{ToonzCheck::ePaint}}) ||}
\DoxyCodeLine{00413       (ToonzCheck::instance()-\/>getChecks() \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876a3137d7221943909520731bd1977219eb}{ToonzCheck::eInk1}}))}
\DoxyCodeLine{00414     glColor3d(0.5, 0.8, 0.8);}
\DoxyCodeLine{00415   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00416     glColor3d(1.0, 0.0, 0.0);}
\DoxyCodeLine{00417 }
\DoxyCodeLine{00418   drawEmptyCircle(m\_toolSize.getValue(), m\_mousePos, \textcolor{keyword}{true}, lx \% 2 == 0,}
\DoxyCodeLine{00419                   ly \% 2 == 0);}
\DoxyCodeLine{00420 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00045}{Toonz\+Check\+::e\+Ink}}, \mbox{\hyperlink{l00050}{Toonz\+Check\+::e\+Ink1}}, \mbox{\hyperlink{l00046}{Toonz\+Check\+::e\+Paint}}, and \mbox{\hyperlink{l00276}{TTool\+::get\+Image()}}.

\mbox{\Hypertarget{class_paint_brush_tool_a900274445d686dd731e6a1de02709b4b}\label{class_paint_brush_tool_a900274445d686dd731e6a1de02709b4b}} 
\index{PaintBrushTool@{PaintBrushTool}!finishBrush@{finishBrush}}
\index{finishBrush@{finishBrush}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{finishBrush()}{finishBrush()}}
{\footnotesize\ttfamily void Paint\+Brush\+Tool\+::finish\+Brush (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

描画中にツールが切り替わった場合に備え、on\+Deactivateでも\+Mouse\+Releaseと同じ終了処理を行う 
\begin{DoxyCode}{0}
\DoxyCodeLine{00583                                  \{}
\DoxyCodeLine{00584   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}})\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true})) \{}
\DoxyCodeLine{00585     \textcolor{keywordflow}{if} (m\_rasterTrack) \{}
\DoxyCodeLine{00586       \textcolor{keywordtype}{int} thickness = m\_toolSize.getValue();}
\DoxyCodeLine{00587       m\_rasterTrack-\/>add(\mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(}
\DoxyCodeLine{00588           m\_mousePos + convert(ti-\/>getRaster()-\/>getCenter()), thickness));}
\DoxyCodeLine{00589       m\_tileSaver-\/>save(m\_rasterTrack-\/>getLastRect());}
\DoxyCodeLine{00590       m\_rasterTrack-\/>generateLastPieceOfStroke(\textcolor{keyword}{true}, \textcolor{keyword}{true});}
\DoxyCodeLine{00591 }
\DoxyCodeLine{00592       \mbox{\hyperlink{class_t_application}{TTool::Application}} *app   = TTool::getApplication();}
\DoxyCodeLine{00593       \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level          = app-\/>getCurrentLevel()-\/>getLevel();}
\DoxyCodeLine{00594       \mbox{\hyperlink{class_t_smart_pointer_t}{TXshSimpleLevelP}} simLevel = level-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{00595 }
\DoxyCodeLine{00596       \textcolor{comment}{/*-\/-\/ 描画中にフレームが動いても、描画開始時のFidに対してUndoを記録する}}
\DoxyCodeLine{00597 \textcolor{comment}{       * -\/-\/*/}}
\DoxyCodeLine{00598       \mbox{\hyperlink{class_t_frame_id}{TFrameId}} frameId =}
\DoxyCodeLine{00599           m\_workingFrameId.isEmptyFrame() ? \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}() : m\_workingFrameId;}
\DoxyCodeLine{00600 }
\DoxyCodeLine{00601       TUndoManager::manager()-\/>add(\textcolor{keyword}{new} BrushUndo(}
\DoxyCodeLine{00602           m\_tileSaver-\/>getTileSet(), m\_rasterTrack-\/>getPointsSequence(),}
\DoxyCodeLine{00603           m\_colorTypeBrush, m\_rasterTrack-\/>getStyleId(),}
\DoxyCodeLine{00604           m\_rasterTrack-\/>isSelective(), simLevel.getPointer(), frameId,}
\DoxyCodeLine{00605           m\_rasterTrack-\/>isAlphaLocked()));}
\DoxyCodeLine{00606       ToolUtils::updateSaveBox();}
\DoxyCodeLine{00607 }
\DoxyCodeLine{00608       \textcolor{comment}{/*-\/-\/-\/ FIdを指定して、描画中にフレームが変わっても、}}
\DoxyCodeLine{00609 \textcolor{comment}{              クリック時のFidのサムネイルが更新されるようにする。-\/-\/-\/*/}}
\DoxyCodeLine{00610       \mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}(frameId);}
\DoxyCodeLine{00611 }
\DoxyCodeLine{00612       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00613       \textcolor{keyword}{delete} m\_rasterTrack;}
\DoxyCodeLine{00614       m\_rasterTrack = 0;}
\DoxyCodeLine{00615       \textcolor{keyword}{delete} m\_tileSaver;}
\DoxyCodeLine{00616 }
\DoxyCodeLine{00617       \textcolor{comment}{/*-\/-\/-\/ 作業中のフレームをリセット -\/-\/-\/*/}}
\DoxyCodeLine{00618       m\_workingFrameId = \mbox{\hyperlink{class_t_frame_id}{TFrameId}}();}
\DoxyCodeLine{00619     \}}
\DoxyCodeLine{00620 }
\DoxyCodeLine{00621     ToolUtils::updateSaveBox();}
\DoxyCodeLine{00622   \}}
\DoxyCodeLine{00623 }
\DoxyCodeLine{00624   m\_selecting = \textcolor{keyword}{false};}
\DoxyCodeLine{00625 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00688}{TTool\+::get\+Current\+Fid()}}, \mbox{\hyperlink{l00276}{TTool\+::get\+Image()}}, \mbox{\hyperlink{l00095}{TXsh\+Level\+::get\+Simple\+Level()}}, \mbox{\hyperlink{l00540}{TTool\+::invalidate()}}, and \mbox{\hyperlink{l00609}{TTool\+::notify\+Image\+Changed()}}.



Referenced by \mbox{\hyperlink{l00574}{on\+Deactivate()}}.

\mbox{\Hypertarget{class_paint_brush_tool_aaf6892645674bcd8fe17414a59b32c9a}\label{class_paint_brush_tool_aaf6892645674bcd8fe17414a59b32c9a}} 
\index{PaintBrushTool@{PaintBrushTool}!fixMousePos@{fixMousePos}}
\index{fixMousePos@{fixMousePos}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{fixMousePos()}{fixMousePos()}}
{\footnotesize\ttfamily void Paint\+Brush\+Tool\+::fix\+Mouse\+Pos (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_point_t}{TPointD}}}]{pos,  }\item[{bool}]{precise = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00388                                                           \{}
\DoxyCodeLine{00389   m\_mousePos = getCenteredCursorPos(pos);}
\DoxyCodeLine{00390   \textcolor{keywordflow}{if} (precise) \{}
\DoxyCodeLine{00391     \mbox{\hyperlink{class_t_point_t}{TPointD}} pp(tround(m\_mousePos.x), tround(m\_mousePos.y));}
\DoxyCodeLine{00392     m\_mousePos = pp;}
\DoxyCodeLine{00393   \}}
\DoxyCodeLine{00394 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_paint_brush_tool_ac3afd05f8dd5a146eb529ec704d0f2fd}\label{class_paint_brush_tool_ac3afd05f8dd5a146eb529ec704d0f2fd}} 
\index{PaintBrushTool@{PaintBrushTool}!getCenteredCursorPos@{getCenteredCursorPos}}
\index{getCenteredCursorPos@{getCenteredCursorPos}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{getCenteredCursorPos()}{getCenteredCursorPos()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Paint\+Brush\+Tool\+::get\+Centered\+Cursor\+Pos (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{original\+Cursor\+Pos }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00369                                                                              \{}
\DoxyCodeLine{00370   \mbox{\hyperlink{class_t_xsh_level_handle}{TXshLevelHandle}} *levelHandle = m\_application-\/>getCurrentLevel();}
\DoxyCodeLine{00371   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *level = levelHandle ? levelHandle-\/>getSimpleLevel() : 0;}
\DoxyCodeLine{00372   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} resolution =}
\DoxyCodeLine{00373       level ? level-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_adac2b8c3ed147184fc78799cd65ca8f9}{getImageRes}}() : \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(0, 0);}
\DoxyCodeLine{00374 }
\DoxyCodeLine{00375   \textcolor{keywordtype}{bool} xEven = (resolution.lx \% 2 == 0);}
\DoxyCodeLine{00376   \textcolor{keywordtype}{bool} yEven = (resolution.ly \% 2 == 0);}
\DoxyCodeLine{00377 }
\DoxyCodeLine{00378   \mbox{\hyperlink{class_t_point_t}{TPointD}} centeredCursorPos = originalCursorPos;}
\DoxyCodeLine{00379 }
\DoxyCodeLine{00380   \textcolor{keywordflow}{if} (xEven) centeredCursorPos.x -\/= 0.5;}
\DoxyCodeLine{00381   \textcolor{keywordflow}{if} (yEven) centeredCursorPos.y -\/= 0.5;}
\DoxyCodeLine{00382 }
\DoxyCodeLine{00383   \textcolor{keywordflow}{return} centeredCursorPos;}
\DoxyCodeLine{00384 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_paint_brush_tool_a851906cd5dc4510d9c7d8d5786d9f91a}\label{class_paint_brush_tool_a851906cd5dc4510d9c7d8d5786d9f91a}} 
\index{PaintBrushTool@{PaintBrushTool}!getColorClass@{getColorClass}}
\index{getColorClass@{getColorClass}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{getColorClass()}{getColorClass()}}
{\footnotesize\ttfamily int Paint\+Brush\+Tool\+::get\+Color\+Class (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00301 \{ \textcolor{keywordflow}{return} 2; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_paint_brush_tool_a9052fe3ab44be95bfc3a9e539785e792}\label{class_paint_brush_tool_a9052fe3ab44be95bfc3a9e539785e792}} 
\index{PaintBrushTool@{PaintBrushTool}!getCursorId@{getCursorId}}
\index{getCursorId@{getCursorId}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{getCursorId()}{getCursorId()}}
{\footnotesize\ttfamily int Paint\+Brush\+Tool\+::get\+Cursor\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Returns the type of cursor used by the tool. 

\begin{DoxySeeAlso}{See also}
For a list of cursor ids \mbox{\hyperlink{}{cursor.\+h}} 
\end{DoxySeeAlso}


Reimplemented from \mbox{\hyperlink{class_t_tool_a1768a57b8b6d1480618fd923fad15f1d}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00297 \{ \textcolor{keywordflow}{return} m\_cursor; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_paint_brush_tool_ae65fce0b42b004676621523914e6fcd5}\label{class_paint_brush_tool_ae65fce0b42b004676621523914e6fcd5}} 
\index{PaintBrushTool@{PaintBrushTool}!getProperties@{getProperties}}
\index{getProperties@{getProperties}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{getProperties()}{getProperties()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ Paint\+Brush\+Tool\+::get\+Properties (\begin{DoxyParamCaption}\item[{int}]{target\+Type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00295 \{ \textcolor{keywordflow}{return} \&m\_prop; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_paint_brush_tool_afde496af17586e6244d31b179c3026c2}\label{class_paint_brush_tool_afde496af17586e6244d31b179c3026c2}} 
\index{PaintBrushTool@{PaintBrushTool}!getToolType@{getToolType}}
\index{getToolType@{getToolType}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{getToolType()}{getToolType()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} Paint\+Brush\+Tool\+::get\+Tool\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00278 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca01ffd66b00b05a88c02ce8ceb5da3b8b}{TTool::LevelWriteTool}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_paint_brush_tool_aeddb5e2175267b6057f9e48505197205}\label{class_paint_brush_tool_aeddb5e2175267b6057f9e48505197205}} 
\index{PaintBrushTool@{PaintBrushTool}!isPencilModeActive@{isPencilModeActive}}
\index{isPencilModeActive@{isPencilModeActive}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{isPencilModeActive()}{isPencilModeActive()}}
{\footnotesize\ttfamily bool Paint\+Brush\+Tool\+::is\+Pencil\+Mode\+Active (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00310 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_paint_brush_tool_a82e178c78ef4583a2cadb7ef552e15f2}\label{class_paint_brush_tool_a82e178c78ef4583a2cadb7ef552e15f2}} 
\index{PaintBrushTool@{PaintBrushTool}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily void Paint\+Brush\+Tool\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00470                                                                             \{}
\DoxyCodeLine{00471   fixMousePos(pos);}
\DoxyCodeLine{00472   m\_selecting = \textcolor{keyword}{true};}
\DoxyCodeLine{00473   \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} image(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}));}
\DoxyCodeLine{00474   \textcolor{keywordflow}{if} (m\_colorType.getValue() == LINES) m\_colorTypeBrush = INK;}
\DoxyCodeLine{00475   \textcolor{keywordflow}{if} (m\_colorType.getValue() == AREAS) m\_colorTypeBrush = PAINT;}
\DoxyCodeLine{00476   \textcolor{keywordflow}{if} (m\_colorType.getValue() == ALL) m\_colorTypeBrush   = INKNPAINT;}
\DoxyCodeLine{00477 }
\DoxyCodeLine{00478   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = image) \{}
\DoxyCodeLine{00479     \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} ras = ti-\/>getRaster();}
\DoxyCodeLine{00480     \textcolor{keywordflow}{if} (ras) \{}
\DoxyCodeLine{00481       \textcolor{keywordtype}{int} thickness = m\_toolSize.getValue();}
\DoxyCodeLine{00482       \textcolor{keywordtype}{int} styleId   = TTool::getApplication()-\/>getCurrentLevelStyleIndex();}
\DoxyCodeLine{00483       \mbox{\hyperlink{class_t_tile_set_c_m32}{TTileSetCM32}} *tileSet = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_tile_set_c_m32}{TTileSetCM32}}(ras-\/>getSize());}
\DoxyCodeLine{00484       m\_tileSaver           = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_tile_saver_c_m32}{TTileSaverCM32}}(ras, tileSet);}
\DoxyCodeLine{00485       m\_rasterTrack         = \textcolor{keyword}{new} \mbox{\hyperlink{class_raster_stroke_generator}{RasterStrokeGenerator}}(}
\DoxyCodeLine{00486           ras, PAINTBRUSH, m\_colorTypeBrush, styleId,}
\DoxyCodeLine{00487           \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(m\_mousePos + convert(ras-\/>getCenter()), thickness),}
\DoxyCodeLine{00488           m\_onlyEmptyAreas.getValue(), 0, m\_modifierLockAlpha.getValue(),}
\DoxyCodeLine{00489           \textcolor{keyword}{false});}
\DoxyCodeLine{00490       \textcolor{comment}{/*-\/-\/ 現在のFidを記憶 -\/-\/*/}}
\DoxyCodeLine{00491       m\_workingFrameId = getFrameId();}
\DoxyCodeLine{00492       m\_tileSaver-\/>save(m\_rasterTrack-\/>getLastRect());}
\DoxyCodeLine{00493       m\_rasterTrack-\/>generateLastPieceOfStroke(\textcolor{keyword}{true});}
\DoxyCodeLine{00494       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00495     \}}
\DoxyCodeLine{00496   \}}
\DoxyCodeLine{00497 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_paint_brush_tool_a25b5b8c6accc7e31de2bbc62832b31f4}\label{class_paint_brush_tool_a25b5b8c6accc7e31de2bbc62832b31f4}} 
\index{PaintBrushTool@{PaintBrushTool}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Paint\+Brush\+Tool\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00501                                                                             \{}
\DoxyCodeLine{00502   \textcolor{keywordflow}{if} (!m\_selecting) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00503 }
\DoxyCodeLine{00504   fixMousePos(pos);}
\DoxyCodeLine{00505   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ri = \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}))) \{}
\DoxyCodeLine{00506     \textcolor{comment}{/*-\/-\/-\/ マウスを動かしながらショートカットでこのツールに切り替わった場合、}}
\DoxyCodeLine{00507 \textcolor{comment}{            いきなりleftButtonDragから呼ばれることがあり、m\_rasterTrackが無い可能性がある}}
\DoxyCodeLine{00508 \textcolor{comment}{　-\/-\/-\/*/}}
\DoxyCodeLine{00509     \textcolor{keywordflow}{if} (m\_rasterTrack) \{}
\DoxyCodeLine{00510       \textcolor{keywordtype}{int} thickness = m\_toolSize.getValue();}
\DoxyCodeLine{00511       m\_rasterTrack-\/>add(\mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(}
\DoxyCodeLine{00512           m\_mousePos + convert(ri-\/>getRaster()-\/>getCenter()), thickness));}
\DoxyCodeLine{00513       m\_tileSaver-\/>save(m\_rasterTrack-\/>getLastRect());}
\DoxyCodeLine{00514       \mbox{\hyperlink{class_t_rect_t}{TRect}} modifiedBbox = m\_rasterTrack-\/>generateLastPieceOfStroke(\textcolor{keyword}{true});}
\DoxyCodeLine{00515       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00516     \}}
\DoxyCodeLine{00517   \}}
\DoxyCodeLine{00518 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_paint_brush_tool_abaf5d0d6c8fe5a32a48696a77d64467a}\label{class_paint_brush_tool_abaf5d0d6c8fe5a32a48696a77d64467a}} 
\index{PaintBrushTool@{PaintBrushTool}!leftButtonUp@{leftButtonUp}}
\index{leftButtonUp@{leftButtonUp}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{leftButtonUp()}{leftButtonUp()}}
{\footnotesize\ttfamily void Paint\+Brush\+Tool\+::left\+Button\+Up (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00522                                                                          \{}
\DoxyCodeLine{00523   \textcolor{keywordflow}{if} (!m\_selecting) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00524 }
\DoxyCodeLine{00525   fixMousePos(pos);}
\DoxyCodeLine{00526 }
\DoxyCodeLine{00527   \mbox{\hyperlink{class_paint_brush_tool_a900274445d686dd731e6a1de02709b4b}{finishBrush}}();}
\DoxyCodeLine{00528 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_paint_brush_tool_a9388950420c0691843f12523b6581ab6}\label{class_paint_brush_tool_a9388950420c0691843f12523b6581ab6}} 
\index{PaintBrushTool@{PaintBrushTool}!mouseMove@{mouseMove}}
\index{mouseMove@{mouseMove}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{mouseMove()}{mouseMove()}}
{\footnotesize\ttfamily void Paint\+Brush\+Tool\+::mouse\+Move (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00532                                                                        \{}
\DoxyCodeLine{00533   fixMousePos(pos, \textcolor{keyword}{true});}
\DoxyCodeLine{00534   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00535 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_paint_brush_tool_af258ef41f7a283c7bffe5a36cfa4cec7}\label{class_paint_brush_tool_af258ef41f7a283c7bffe5a36cfa4cec7}} 
\index{PaintBrushTool@{PaintBrushTool}!onActivate@{onActivate}}
\index{onActivate@{onActivate}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{onActivate()}{onActivate()}}
{\footnotesize\ttfamily void Paint\+Brush\+Tool\+::on\+Activate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback invoked whenever the tool activates. 



Reimplemented from \mbox{\hyperlink{class_t_tool_ac286a2681633b4db6106596b4f54e53b}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00570 \{ \mbox{\hyperlink{class_paint_brush_tool_a19e1c19353c40259f636d99c067d9862}{onEnter}}(); \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00539}{on\+Enter()}}.

\mbox{\Hypertarget{class_paint_brush_tool_a35b116494359aad3f0f3a66c905b1bc2}\label{class_paint_brush_tool_a35b116494359aad3f0f3a66c905b1bc2}} 
\index{PaintBrushTool@{PaintBrushTool}!onDeactivate@{onDeactivate}}
\index{onDeactivate@{onDeactivate}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{onDeactivate()}{onDeactivate()}}
{\footnotesize\ttfamily void Paint\+Brush\+Tool\+::on\+Deactivate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for tool deactivation, includes tool switch. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a00fee58728c1e12fb50846f47d7e9f5e}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00574                                   \{}
\DoxyCodeLine{00575   \textcolor{comment}{/*-\/-\/マウスドラッグ中(m\_selecting=true)にツールが切り替わったときに描画の終了処理を行う-\/-\/-\/*/}}
\DoxyCodeLine{00576   \textcolor{keywordflow}{if} (m\_selecting) \mbox{\hyperlink{class_paint_brush_tool_a900274445d686dd731e6a1de02709b4b}{finishBrush}}();}
\DoxyCodeLine{00577 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00583}{finish\+Brush()}}.

\mbox{\Hypertarget{class_paint_brush_tool_a19e1c19353c40259f636d99c067d9862}\label{class_paint_brush_tool_a19e1c19353c40259f636d99c067d9862}} 
\index{PaintBrushTool@{PaintBrushTool}!onEnter@{onEnter}}
\index{onEnter@{onEnter}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{onEnter()}{onEnter()}}
{\footnotesize\ttfamily void Paint\+Brush\+Tool\+::on\+Enter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for the mouse entering the viewer area. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a3e775cfcd05aa3c35048b11fa40ab3e4}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00539                              \{}
\DoxyCodeLine{00540   \textcolor{keywordflow}{if} (m\_firstTime) \{}
\DoxyCodeLine{00541     m\_onlyEmptyAreas.setValue(PaintBrushSelective ? 1 : 0);}
\DoxyCodeLine{00542     m\_colorType.setValue(::to\_wstring(PaintBrushColorType.getValue()));}
\DoxyCodeLine{00543     m\_toolSize.setValue(PaintBrushSize);}
\DoxyCodeLine{00544     m\_modifierLockAlpha.setValue(PaintBrushModifierLockAlpha ? 1 : 0);}
\DoxyCodeLine{00545     m\_firstTime = \textcolor{keyword}{false};}
\DoxyCodeLine{00546   \}}
\DoxyCodeLine{00547   \textcolor{keywordtype}{double} x = m\_toolSize.getValue();}
\DoxyCodeLine{00548 }
\DoxyCodeLine{00549   \textcolor{keywordtype}{double} minRange = 1;}
\DoxyCodeLine{00550   \textcolor{keywordtype}{double} maxRange = 100;}
\DoxyCodeLine{00551 }
\DoxyCodeLine{00552   \textcolor{keywordtype}{double} minSize = 0.01;}
\DoxyCodeLine{00553   \textcolor{keywordtype}{double} maxSize = 100;}
\DoxyCodeLine{00554 }
\DoxyCodeLine{00555   m\_pointSize =}
\DoxyCodeLine{00556       (x -\/ minRange) / (maxRange -\/ minRange) * (maxSize -\/ minSize) + minSize;}
\DoxyCodeLine{00557 }
\DoxyCodeLine{00558   \textcolor{keywordflow}{if} ((\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}})\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{false}))}
\DoxyCodeLine{00559     m\_cursor = ToolCursor::PenCursor;}
\DoxyCodeLine{00560   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00561     m\_cursor = ToolCursor::CURSOR\_NO;}
\DoxyCodeLine{00562 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00276}{TTool\+::get\+Image()}}.



Referenced by \mbox{\hyperlink{l00570}{on\+Activate()}}.

\mbox{\Hypertarget{class_paint_brush_tool_a7ceffa637d1e45664ed3879960168765}\label{class_paint_brush_tool_a7ceffa637d1e45664ed3879960168765}} 
\index{PaintBrushTool@{PaintBrushTool}!onLeave@{onLeave}}
\index{onLeave@{onLeave}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{onLeave()}{onLeave()}}
{\footnotesize\ttfamily void Paint\+Brush\+Tool\+::on\+Leave (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for the mouse leaving the viewer area. 



Reimplemented from \mbox{\hyperlink{class_t_tool_af7fb05265a94131da081da654e271a22}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00566 \{ m\_pointSize = -\/1; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_paint_brush_tool_a6fea495827c90c0c14f065a8619294d7}\label{class_paint_brush_tool_a6fea495827c90c0c14f065a8619294d7}} 
\index{PaintBrushTool@{PaintBrushTool}!onPropertyChanged@{onPropertyChanged}}
\index{onPropertyChanged@{onPropertyChanged}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{onPropertyChanged()}{onPropertyChanged()}}
{\footnotesize\ttfamily bool Paint\+Brush\+Tool\+::on\+Property\+Changed (\begin{DoxyParamCaption}\item[{std\+::string}]{property\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

\begin{DoxyVerb} Does the tasks associated to changes in \p propertyName and returns \p
\end{DoxyVerb}
 true; Does the tasks associated to changes in {\ttfamily property\+Name} and returns {\ttfamily true}. 

Reimplemented from \mbox{\hyperlink{class_t_tool_a06694e0586f807c34b18e16341aa9ee2}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00428                                                              \{}
\DoxyCodeLine{00429   \textcolor{comment}{/*-\/-\/ Size -\/-\/-\/*/}}
\DoxyCodeLine{00430   \textcolor{keywordflow}{if} (propertyName == m\_toolSize.getName()) \{}
\DoxyCodeLine{00431     PaintBrushSize = m\_toolSize.getValue();}
\DoxyCodeLine{00432     \textcolor{keywordtype}{double} x       = m\_toolSize.getValue();}
\DoxyCodeLine{00433 }
\DoxyCodeLine{00434     \textcolor{keywordtype}{double} minRange = 1;}
\DoxyCodeLine{00435     \textcolor{keywordtype}{double} maxRange = 100;}
\DoxyCodeLine{00436 }
\DoxyCodeLine{00437     \textcolor{keywordtype}{double} minSize = 0.01;}
\DoxyCodeLine{00438     \textcolor{keywordtype}{double} maxSize = 100;}
\DoxyCodeLine{00439 }
\DoxyCodeLine{00440     m\_pointSize =}
\DoxyCodeLine{00441         (x -\/ minRange) / (maxRange -\/ minRange) * (maxSize -\/ minSize) + minSize;}
\DoxyCodeLine{00442     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00443   \}}
\DoxyCodeLine{00444 }
\DoxyCodeLine{00445   \textcolor{comment}{// Selective}}
\DoxyCodeLine{00446   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == m\_onlyEmptyAreas.getName()) \{}
\DoxyCodeLine{00447     PaintBrushSelective = (int)(m\_onlyEmptyAreas.getValue());}
\DoxyCodeLine{00448     \textcolor{keywordflow}{if} (m\_onlyEmptyAreas.getValue() \&\& m\_modifierLockAlpha.getValue())}
\DoxyCodeLine{00449       m\_modifierLockAlpha.setValue(\textcolor{keyword}{false});}
\DoxyCodeLine{00450   \}}
\DoxyCodeLine{00451 }
\DoxyCodeLine{00452   \textcolor{comment}{// Areas, Lines etc.}}
\DoxyCodeLine{00453   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == m\_colorType.getName()) \{}
\DoxyCodeLine{00454     PaintBrushColorType = ::to\_string(m\_colorType.getValue());}
\DoxyCodeLine{00455     \textcolor{comment}{/*-\/-\/-\/ ColorModelのCursor更新のためにSIGNALを出す -\/-\/-\/*/}}
\DoxyCodeLine{00456     TTool::getApplication()-\/>getCurrentTool()-\/>\mbox{\hyperlink{class_tool_handle_a39e34f1a30868bad11a629228b07bd40}{notifyToolChanged}}();}
\DoxyCodeLine{00457   \}}
\DoxyCodeLine{00458 }
\DoxyCodeLine{00459   \textcolor{comment}{// Lock Alpha}}
\DoxyCodeLine{00460   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == m\_modifierLockAlpha.getName()) \{}
\DoxyCodeLine{00461     PaintBrushModifierLockAlpha = (int)(m\_modifierLockAlpha.getValue());}
\DoxyCodeLine{00462     \textcolor{keywordflow}{if} (m\_modifierLockAlpha.getValue() \&\& m\_onlyEmptyAreas.getValue())}
\DoxyCodeLine{00463       m\_onlyEmptyAreas.setValue(\textcolor{keyword}{false});}
\DoxyCodeLine{00464   \}}
\DoxyCodeLine{00465   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00466 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00540}{TTool\+::invalidate()}}, and \mbox{\hyperlink{l00065}{Tool\+Handle\+::notify\+Tool\+Changed()}}.

\mbox{\Hypertarget{class_paint_brush_tool_a9c6f42224430c77310b65e4f8dec066e}\label{class_paint_brush_tool_a9c6f42224430c77310b65e4f8dec066e}} 
\index{PaintBrushTool@{PaintBrushTool}!updateTranslation@{updateTranslation}}
\index{updateTranslation@{updateTranslation}!PaintBrushTool@{PaintBrushTool}}
\doxysubsubsection{\texorpdfstring{updateTranslation()}{updateTranslation()}}
{\footnotesize\ttfamily void Paint\+Brush\+Tool\+::update\+Translation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00355                                        \{}
\DoxyCodeLine{00356   m\_toolSize.setQStringName(tr(\textcolor{stringliteral}{"{}Size:"{}}));}
\DoxyCodeLine{00357 }
\DoxyCodeLine{00358   m\_colorType.setQStringName(tr(\textcolor{stringliteral}{"{}Mode:"{}}));}
\DoxyCodeLine{00359   m\_colorType.setItemUIName(LINES, tr(\textcolor{stringliteral}{"{}Lines"{}}));}
\DoxyCodeLine{00360   m\_colorType.setItemUIName(AREAS, tr(\textcolor{stringliteral}{"{}Areas"{}}));}
\DoxyCodeLine{00361   m\_colorType.setItemUIName(ALL, tr(\textcolor{stringliteral}{"{}Lines \& Areas"{}}));}
\DoxyCodeLine{00362 }
\DoxyCodeLine{00363   m\_onlyEmptyAreas.setQStringName(tr(\textcolor{stringliteral}{"{}Selective"{}}, NULL));}
\DoxyCodeLine{00364   m\_modifierLockAlpha.setQStringName(tr(\textcolor{stringliteral}{"{}Lock Alpha"{}}));}
\DoxyCodeLine{00365 \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/paintbrushtool.\+cpp\end{DoxyCompactItemize}
