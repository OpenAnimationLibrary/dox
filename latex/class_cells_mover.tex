\hypertarget{class_cells_mover}{}\doxysection{Cells\+Mover Class Reference}
\label{class_cells_mover}\index{CellsMover@{CellsMover}}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum {\bfseries Qualifier} \{ {\bfseries e\+Copy\+Cells} = 0x1
, {\bfseries e\+Insert\+Cells} = 0x2
, {\bfseries e\+Overwrite\+Cells} = 0x4
, {\bfseries e\+Move\+Columns}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_cells_mover_a69b1973f58f376de1882df01f6607e8f}{start}} (int r0, int c0, int r1, int c1, int qualifiers, const \mbox{\hyperlink{class_orientation}{Orientation}} $\ast$o)
\item 
int \mbox{\hyperlink{class_cells_mover_a18bf1740d476ebe18ae007c92d41787e}{get\+Qualifiers}} () const
\item 
\mbox{\hyperlink{class_t_point_t}{TPoint}} \mbox{\hyperlink{class_cells_mover_ac9acac03c31b0b1054ee0ec8cddde13c}{get\+Start\+Pos}} () const
\item 
\mbox{\hyperlink{class_t_point_t}{TPoint}} \mbox{\hyperlink{class_cells_mover_a1194f5f25733e4d4e7b6cd2ce1250669}{get\+Pos}} () const
\item 
int \mbox{\hyperlink{class_cells_mover_a081d2c6c4757901c9c155763f26f70fe}{get\+Column\+Count}} () const
\item 
int \mbox{\hyperlink{class_cells_mover_aecbff6e07ff231a6b35ae23b96ca2ee8}{get\+Row\+Count}} () const
\item 
void \mbox{\hyperlink{class_cells_mover_a9fcbfb909e31d6f0ac7e243925460d41}{set\+Start\+Pos}} (const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&p)
\item 
void \mbox{\hyperlink{class_cells_mover_adc77fe0742ee648c5b62aecea6609801}{set\+Start\+Pos}} (int r, int c)
\item 
void \mbox{\hyperlink{class_cells_mover_acc565fb060d064578d3dbabe0180c49f}{set\+Pos}} (const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&p)
\item 
void \mbox{\hyperlink{class_cells_mover_a444982974c9d6aedc0eb8d4bd10baf40}{set\+Pos}} (int r, int c)
\item 
void \mbox{\hyperlink{class_cells_mover_ae0e1423010c8e0de47b7e2c39765dfc5}{save\+Cells}} ()
\item 
void \mbox{\hyperlink{class_cells_mover_a32cd0184a1253a38464225e2519c7d3e}{move\+Cells}} (const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&pos) const
\item 
void \mbox{\hyperlink{class_cells_mover_ad751c885af5cbf141ebef94a5abaea12}{move\+Cells}} () const
\item 
void \mbox{\hyperlink{class_cells_mover_a8bb7dee3120054b7a62838736f9c43ac}{undo\+Move\+Cells}} (const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&pos) const
\item 
void \mbox{\hyperlink{class_cells_mover_ae7025ebf51fa7c6041f53646ac822779}{undo\+Move\+Cells}} () const
\item 
bool \mbox{\hyperlink{class_cells_mover_a7f092b1a2a3cac73d89b541812d1b03e}{can\+Move\+Cells}} (const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&pos)
\item 
void \mbox{\hyperlink{class_cells_mover_a04efe4330dbc0bd766009ac8b83d00c4}{restore\+Columns}} (int c) const
\item 
void \mbox{\hyperlink{class_cells_mover_a22970c06fa148ea9c3022e1419bfa6f2}{empty\+Columns}} (int c) const
\item 
TXsh\+Column\+::\+Column\+Type \mbox{\hyperlink{class_cells_mover_a5b237e0973e18c87f3c71d73a3c5f455}{get\+Column\+Type\+From\+Cell}} (int index) const
\item 
const \mbox{\hyperlink{class_orientation}{Orientation}} $\ast$ \mbox{\hyperlink{class_cells_mover_acccbb9482badaeb3ad4cc90a94706641}{get\+Orientation}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{class_cells_mover_a4bfa598300813029863daabe3dfd951e}{m\+\_\+uffa}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{class_cells_mover_a90a1753dd40dfc9528024cf8afad20c9}\label{class_cells_mover_a90a1753dd40dfc9528024cf8afad20c9}} 
\index{CellsMover@{CellsMover}!Qualifier@{Qualifier}}
\index{Qualifier@{Qualifier}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{Qualifier}{Qualifier}}
{\footnotesize\ttfamily enum Cells\+Mover\+::\+Qualifier}


\begin{DoxyCode}{0}
\DoxyCodeLine{00054                  \{}
\DoxyCodeLine{00055     eCopyCells   = 0x1,  \textcolor{comment}{// leaves a copy of cells block at the starting point}}
\DoxyCodeLine{00056     eInsertCells = 0x2,}
\DoxyCodeLine{00057     eOverwriteCells = 0x4,}
\DoxyCodeLine{00058     eMoveColumns =}
\DoxyCodeLine{00059         0x8  \textcolor{comment}{// move columns only (if the destination columns are empty)}}
\DoxyCodeLine{00060   \};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_cells_mover_a7a7f42037ce0e9ef3f7565125f5311de}\label{class_cells_mover_a7a7f42037ce0e9ef3f7565125f5311de}} 
\index{CellsMover@{CellsMover}!CellsMover@{CellsMover}}
\index{CellsMover@{CellsMover}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{CellsMover()}{CellsMover()}}
{\footnotesize\ttfamily Cells\+Mover\+::\+Cells\+Mover (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00046     : m\_rowCount(0)}
\DoxyCodeLine{00047     , m\_colCount(0)}
\DoxyCodeLine{00048     , m\_pos(0, 0)}
\DoxyCodeLine{00049     , m\_startPos(0, 0)}
\DoxyCodeLine{00050     , m\_columnsData(0)}
\DoxyCodeLine{00051     , m\_qualifiers(0)}
\DoxyCodeLine{00052     , m\_uffa(0)}
\DoxyCodeLine{00053     , m\_orientation(\textcolor{keyword}{nullptr}) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_a40f55539cc3b191ac7f40c15ec29ec84}\label{class_cells_mover_a40f55539cc3b191ac7f40c15ec29ec84}} 
\index{CellsMover@{CellsMover}!````~CellsMover@{$\sim$CellsMover}}
\index{````~CellsMover@{$\sim$CellsMover}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{$\sim$CellsMover()}{~CellsMover()}}
{\footnotesize\ttfamily Cells\+Mover\+::$\sim$\+Cells\+Mover (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00055                         \{}
\DoxyCodeLine{00056   \textcolor{keyword}{delete} m\_columnsData;}
\DoxyCodeLine{00057   m\_columnsData = 0;}
\DoxyCodeLine{00058 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_cells_mover_a7f092b1a2a3cac73d89b541812d1b03e}\label{class_cells_mover_a7f092b1a2a3cac73d89b541812d1b03e}} 
\index{CellsMover@{CellsMover}!canMoveCells@{canMoveCells}}
\index{canMoveCells@{canMoveCells}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{canMoveCells()}{canMoveCells()}}
{\footnotesize\ttfamily bool Cells\+Mover\+::can\+Move\+Cells (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&}]{pos }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00269                                                \{}
\DoxyCodeLine{00270   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = getXsheet();}
\DoxyCodeLine{00271   \textcolor{keywordtype}{int} r        = pos.y;}
\DoxyCodeLine{00272   \textcolor{keywordtype}{int} c        = pos.x;}
\DoxyCodeLine{00273   \textcolor{keywordtype}{int} cStart   = m\_startPos.x;}
\DoxyCodeLine{00274   \textcolor{keywordflow}{if} (!m\_orientation-\/>isVerticalTimeline()) \{}
\DoxyCodeLine{00275     r      = pos.x;}
\DoxyCodeLine{00276     c      = pos.y;}
\DoxyCodeLine{00277     cStart = m\_startPos.y;}
\DoxyCodeLine{00278   \}}
\DoxyCodeLine{00279   \textcolor{keywordflow}{if} (c < 0 ||}
\DoxyCodeLine{00280       (!m\_orientation-\/>isVerticalTimeline() \&\& c >= xsh-\/>\mbox{\hyperlink{class_t_xsheet_a17464dc5617cf87a46f03e1a52d36cc1}{getColumnCount}}()))}
\DoxyCodeLine{00281     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00282   \textcolor{keywordflow}{if} (c != cStart) \{}
\DoxyCodeLine{00283     \textcolor{keywordtype}{int} count = 0;}
\DoxyCodeLine{00284     \textcolor{comment}{// controlla il tipo}}
\DoxyCodeLine{00285     \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{00286     \textcolor{keywordflow}{while} (i < m\_rowCount * m\_colCount) \{}
\DoxyCodeLine{00287       TXshColumn::ColumnType srcType = getColumnTypeFromCell(i);}
\DoxyCodeLine{00288       \textcolor{keywordtype}{int} dstIndex                   = c + i;}
\DoxyCodeLine{00289       \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *dstColumn          = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(dstIndex);}
\DoxyCodeLine{00290       \textcolor{keywordflow}{if} (srcType == TXshColumn::eZeraryFxType ||}
\DoxyCodeLine{00291           srcType == TXshColumn::eSoundTextType)}
\DoxyCodeLine{00292         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00293       \textcolor{keywordflow}{if} (dstColumn \&\& !dstColumn-\/>isEmpty() \&\&}
\DoxyCodeLine{00294           dstColumn-\/>getColumnType() != srcType)}
\DoxyCodeLine{00295         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00296       \textcolor{keywordflow}{if} (!dstColumn || dstColumn-\/>\mbox{\hyperlink{class_t_xsh_column_a04953896aae8860ace46010956a28db9}{isLocked}}() == \textcolor{keyword}{false}) count++;}
\DoxyCodeLine{00297       i += m\_rowCount;}
\DoxyCodeLine{00298     \}}
\DoxyCodeLine{00299     \textcolor{keywordflow}{if} (count == 0) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00300   \}}
\DoxyCodeLine{00301   \textcolor{keywordflow}{if} ((m\_qualifiers \& CellsMover::eInsertCells) ||}
\DoxyCodeLine{00302       (m\_qualifiers \& CellsMover::eOverwriteCells))}
\DoxyCodeLine{00303     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00304   \textcolor{keywordtype}{int} count = 0;}
\DoxyCodeLine{00305   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_colCount; i++) \{}
\DoxyCodeLine{00306     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < m\_rowCount; j++) \{}
\DoxyCodeLine{00307       \textcolor{keywordflow}{if} (!xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r + j, c + i).\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00308       count++;}
\DoxyCodeLine{00309     \}}
\DoxyCodeLine{00310   \}}
\DoxyCodeLine{00311   \textcolor{keywordflow}{if} (count == 0) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00312   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00313 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_a22970c06fa148ea9c3022e1419bfa6f2}\label{class_cells_mover_a22970c06fa148ea9c3022e1419bfa6f2}} 
\index{CellsMover@{CellsMover}!emptyColumns@{emptyColumns}}
\index{emptyColumns@{emptyColumns}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{emptyColumns()}{emptyColumns()}}
{\footnotesize\ttfamily void Cells\+Mover\+::empty\+Columns (\begin{DoxyParamCaption}\item[{int}]{c }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00362                                          \{}
\DoxyCodeLine{00363   std::set<int> ii;}
\DoxyCodeLine{00364   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_colCount; i++) ii.insert(c + i);}
\DoxyCodeLine{00365   ColumnCmd::deleteColumns(ii, \textcolor{keyword}{false}, \textcolor{keyword}{true});}
\DoxyCodeLine{00366   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = getXsheet();}
\DoxyCodeLine{00367   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_colCount; i++) xsh-\/>\mbox{\hyperlink{class_t_xsheet_a5ea42662e27e52ef36ce77b4a5d8e06c}{insertColumn}}(c);}
\DoxyCodeLine{00368 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_a081d2c6c4757901c9c155763f26f70fe}\label{class_cells_mover_a081d2c6c4757901c9c155763f26f70fe}} 
\index{CellsMover@{CellsMover}!getColumnCount@{getColumnCount}}
\index{getColumnCount@{getColumnCount}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{getColumnCount()}{getColumnCount()}}
{\footnotesize\ttfamily int Cells\+Mover\+::get\+Column\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00075 \{ \textcolor{keywordflow}{return} m\_colCount; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_a5b237e0973e18c87f3c71d73a3c5f455}\label{class_cells_mover_a5b237e0973e18c87f3c71d73a3c5f455}} 
\index{CellsMover@{CellsMover}!getColumnTypeFromCell@{getColumnTypeFromCell}}
\index{getColumnTypeFromCell@{getColumnTypeFromCell}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{getColumnTypeFromCell()}{getColumnTypeFromCell()}}
{\footnotesize\ttfamily TXsh\+Column\+::\+Column\+Type Cells\+Mover\+::get\+Column\+Type\+From\+Cell (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00370                                                                       \{}
\DoxyCodeLine{00371   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{TXshLevelP}} \&xl = m\_cells[index].m\_level;}
\DoxyCodeLine{00372   \textcolor{keywordflow}{return} xl ? \mbox{\hyperlink{class_t_xsh_column_ae8f60aa38588cfb590725ce632ee6d02}{TXshColumn::toColumnType}}(xl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}()) : \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}}::eLevelType;}
\DoxyCodeLine{00373 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_acccbb9482badaeb3ad4cc90a94706641}\label{class_cells_mover_acccbb9482badaeb3ad4cc90a94706641}} 
\index{CellsMover@{CellsMover}!getOrientation@{getOrientation}}
\index{getOrientation@{getOrientation}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{getOrientation()}{getOrientation()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_orientation}{Orientation}} $\ast$ Cells\+Mover\+::get\+Orientation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00094 \{ \textcolor{keywordflow}{return} m\_orientation; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_a1194f5f25733e4d4e7b6cd2ce1250669}\label{class_cells_mover_a1194f5f25733e4d4e7b6cd2ce1250669}} 
\index{CellsMover@{CellsMover}!getPos@{getPos}}
\index{getPos@{getPos}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{getPos()}{getPos()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPoint}} Cells\+Mover\+::get\+Pos (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00074 \{ \textcolor{keywordflow}{return} m\_pos; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_a18bf1740d476ebe18ae007c92d41787e}\label{class_cells_mover_a18bf1740d476ebe18ae007c92d41787e}} 
\index{CellsMover@{CellsMover}!getQualifiers@{getQualifiers}}
\index{getQualifiers@{getQualifiers}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{getQualifiers()}{getQualifiers()}}
{\footnotesize\ttfamily int Cells\+Mover\+::get\+Qualifiers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00072 \{ \textcolor{keywordflow}{return} m\_qualifiers; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_aecbff6e07ff231a6b35ae23b96ca2ee8}\label{class_cells_mover_aecbff6e07ff231a6b35ae23b96ca2ee8}} 
\index{CellsMover@{CellsMover}!getRowCount@{getRowCount}}
\index{getRowCount@{getRowCount}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{getRowCount()}{getRowCount()}}
{\footnotesize\ttfamily int Cells\+Mover\+::get\+Row\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00076 \{ \textcolor{keywordflow}{return} m\_rowCount; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_ac9acac03c31b0b1054ee0ec8cddde13c}\label{class_cells_mover_ac9acac03c31b0b1054ee0ec8cddde13c}} 
\index{CellsMover@{CellsMover}!getStartPos@{getStartPos}}
\index{getStartPos@{getStartPos}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{getStartPos()}{getStartPos()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPoint}} Cells\+Mover\+::get\+Start\+Pos (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00073 \{ \textcolor{keywordflow}{return} m\_startPos; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_ad751c885af5cbf141ebef94a5abaea12}\label{class_cells_mover_ad751c885af5cbf141ebef94a5abaea12}} 
\index{CellsMover@{CellsMover}!moveCells@{moveCells}}
\index{moveCells@{moveCells}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{moveCells()}{moveCells()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Cells\+Mover\+::move\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00085 \{ moveCells(m\_pos); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_a32cd0184a1253a38464225e2519c7d3e}\label{class_cells_mover_a32cd0184a1253a38464225e2519c7d3e}} 
\index{CellsMover@{CellsMover}!moveCells@{moveCells}}
\index{moveCells@{moveCells}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{moveCells()}{moveCells()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Cells\+Mover\+::move\+Cells (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&}]{pos }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00173                                                   \{}
\DoxyCodeLine{00174   \textcolor{keywordtype}{int} r = pos.y;}
\DoxyCodeLine{00175   \textcolor{keywordtype}{int} c = pos.x;}
\DoxyCodeLine{00176   \textcolor{keywordflow}{if} (!getOrientation()-\/>isVerticalTimeline()) \{}
\DoxyCodeLine{00177     r = pos.x;}
\DoxyCodeLine{00178     c = pos.y;}
\DoxyCodeLine{00179   \}}
\DoxyCodeLine{00180   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = getXsheet();}
\DoxyCodeLine{00181   \textcolor{keywordflow}{if} (m\_qualifiers \& eInsertCells) \{}
\DoxyCodeLine{00182     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_colCount; i++) \{}
\DoxyCodeLine{00183       \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(c + i);}
\DoxyCodeLine{00184       \textcolor{keywordflow}{if} (column) \{}
\DoxyCodeLine{00185         \textcolor{keywordflow}{if} (column-\/>getCellColumn() == 0 || column-\/>isLocked()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00186         xsh-\/>\mbox{\hyperlink{class_t_xsheet_abd28bd6d7b54d51bc066279ae4d1d94e}{insertCells}}(r, c + i, m\_rowCount);}
\DoxyCodeLine{00187       \}}
\DoxyCodeLine{00188     \}}
\DoxyCodeLine{00189   \}}
\DoxyCodeLine{00190   setCells(m\_cells, r, c);}
\DoxyCodeLine{00191 }
\DoxyCodeLine{00192   \textcolor{comment}{// Act like implicit hold when dragging cells with pressing Shift key}}
\DoxyCodeLine{00193   \textcolor{comment}{// ( and WITHOUT Alt key ) and dragging within the same column.}}
\DoxyCodeLine{00194   \textcolor{keywordflow}{if} (m\_qualifiers \& eInsertCells \&\& !(m\_qualifiers \& eOverwriteCells)) \{}
\DoxyCodeLine{00195     \textcolor{keywordtype}{int} startCol =}
\DoxyCodeLine{00196         (m\_orientation-\/>isVerticalTimeline()) ? m\_startPos.x : m\_startPos.y;}
\DoxyCodeLine{00197     if (startCol == c) \{}
\DoxyCodeLine{00198       \textcolor{keywordtype}{int} infoId = 0;}
\DoxyCodeLine{00199       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_colCount; i++) \{}
\DoxyCodeLine{00200         \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(c + i);}
\DoxyCodeLine{00201         \textcolor{keywordflow}{if} (!column || column-\/>getCellColumn() == 0 || column-\/>isLocked())}
\DoxyCodeLine{00202           \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00203 }
\DoxyCodeLine{00204         QMap<int, TXshCell>::const\_iterator itr =}
\DoxyCodeLine{00205             m\_implicitCellInfo[infoId].lowerBound(r);}
\DoxyCodeLine{00206         \textcolor{keywordflow}{if} (itr == m\_implicitCellInfo[infoId].end() || itr.key() == r) \{}
\DoxyCodeLine{00207           infoId++;}
\DoxyCodeLine{00208           \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00209         \}}
\DoxyCodeLine{00210         \textcolor{comment}{// a cell at the bottom of the inserted cells}}
\DoxyCodeLine{00211         \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} bottomCell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r + m\_rowCount -\/ 1, c + i);}
\DoxyCodeLine{00212         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} tmp\_r = r + m\_rowCount; tmp\_r <= itr.key() -\/ 1 + m\_rowCount;}
\DoxyCodeLine{00213              tmp\_r++)}
\DoxyCodeLine{00214           xsh-\/>setCell(tmp\_r, c + i, bottomCell);}
\DoxyCodeLine{00215 }
\DoxyCodeLine{00216         infoId++;}
\DoxyCodeLine{00217       \}}
\DoxyCodeLine{00218     \}}
\DoxyCodeLine{00219   \}}
\DoxyCodeLine{00220 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_a04efe4330dbc0bd766009ac8b83d00c4}\label{class_cells_mover_a04efe4330dbc0bd766009ac8b83d00c4}} 
\index{CellsMover@{CellsMover}!restoreColumns@{restoreColumns}}
\index{restoreColumns@{restoreColumns}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{restoreColumns()}{restoreColumns()}}
{\footnotesize\ttfamily void Cells\+Mover\+::restore\+Columns (\begin{DoxyParamCaption}\item[{int}]{c }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00338                                            \{}
\DoxyCodeLine{00339   std::set<int> ii;}
\DoxyCodeLine{00340   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_colCount; i++) ii.insert(c + i);}
\DoxyCodeLine{00341   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = getXsheet();}
\DoxyCodeLine{00342   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_colCount; i++) xsh-\/>\mbox{\hyperlink{class_t_xsheet_ace0d4e8b8eb7646b60caf69747b66c0e}{removeColumn}}(c);}
\DoxyCodeLine{00343   std::list<int> restoredSplineIds;}
\DoxyCodeLine{00344   m\_columnsData-\/>\mbox{\hyperlink{class_stage_objects_data_acb1ab2a0891bd82400614e2b81f0ce0e}{restoreObjects}}(}
\DoxyCodeLine{00345       ii, restoredSplineIds, xsh,}
\DoxyCodeLine{00346       StageObjectsData::eDoClone | StageObjectsData::eResetFxDagPositions);}
\DoxyCodeLine{00347   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_colCount; i++) \{}
\DoxyCodeLine{00348     \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(c + i);}
\DoxyCodeLine{00349     \textcolor{keywordflow}{if} (!column) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00350     \mbox{\hyperlink{class_t_xsh_cell_column}{TXshCellColumn}} *cellColumn = column-\/>getCellColumn();}
\DoxyCodeLine{00351     \textcolor{keywordflow}{if} (!cellColumn) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00352     \textcolor{keywordtype}{int} r0 = 0, r1 = -\/1;}
\DoxyCodeLine{00353     cellColumn-\/>\mbox{\hyperlink{class_t_xsh_cell_column_ab684089dcfd22454e7cbad249a04e29c}{getRange}}(r0, r1);}
\DoxyCodeLine{00354     \textcolor{keywordflow}{if} (r0 <= r1) cellColumn-\/>\mbox{\hyperlink{class_t_xsh_cell_column_a2e143e05d7c869fb49b3c7535984b2c2}{clearCells}}(r0, r1 -\/ r0 + 1);}
\DoxyCodeLine{00355   \}}
\DoxyCodeLine{00356 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_ae0e1423010c8e0de47b7e2c39765dfc5}\label{class_cells_mover_ae0e1423010c8e0de47b7e2c39765dfc5}} 
\index{CellsMover@{CellsMover}!saveCells@{saveCells}}
\index{saveCells@{saveCells}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{saveCells()}{saveCells()}}
{\footnotesize\ttfamily void Cells\+Mover\+::save\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00160                            \{}
\DoxyCodeLine{00161   \textcolor{keywordtype}{int} r = m\_pos.y;}
\DoxyCodeLine{00162   \textcolor{keywordtype}{int} c = m\_pos.x;}
\DoxyCodeLine{00163   \textcolor{keywordflow}{if} (!getOrientation()-\/>isVerticalTimeline()) \{}
\DoxyCodeLine{00164     r = m\_pos.x;}
\DoxyCodeLine{00165     c = m\_pos.y;}
\DoxyCodeLine{00166   \}}
\DoxyCodeLine{00167   getCells(m\_oldCells, r, c);}
\DoxyCodeLine{00168 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_acc565fb060d064578d3dbabe0180c49f}\label{class_cells_mover_acc565fb060d064578d3dbabe0180c49f}} 
\index{CellsMover@{CellsMover}!setPos@{setPos}}
\index{setPos@{setPos}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{setPos()}{setPos()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Cells\+Mover\+::set\+Pos (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&}]{p }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00080 \{ m\_pos = p; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_a444982974c9d6aedc0eb8d4bd10baf40}\label{class_cells_mover_a444982974c9d6aedc0eb8d4bd10baf40}} 
\index{CellsMover@{CellsMover}!setPos@{setPos}}
\index{setPos@{setPos}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{setPos()}{setPos()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Cells\+Mover\+::set\+Pos (\begin{DoxyParamCaption}\item[{int}]{r,  }\item[{int}]{c }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00081 \{ setPos(\mbox{\hyperlink{class_t_point_t}{TPoint}}(c, r)); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_a9fcbfb909e31d6f0ac7e243925460d41}\label{class_cells_mover_a9fcbfb909e31d6f0ac7e243925460d41}} 
\index{CellsMover@{CellsMover}!setStartPos@{setStartPos}}
\index{setStartPos@{setStartPos}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{setStartPos()}{setStartPos()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Cells\+Mover\+::set\+Start\+Pos (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&}]{p }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00078 \{ m\_startPos = p; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_adc77fe0742ee648c5b62aecea6609801}\label{class_cells_mover_adc77fe0742ee648c5b62aecea6609801}} 
\index{CellsMover@{CellsMover}!setStartPos@{setStartPos}}
\index{setStartPos@{setStartPos}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{setStartPos()}{setStartPos()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Cells\+Mover\+::set\+Start\+Pos (\begin{DoxyParamCaption}\item[{int}]{r,  }\item[{int}]{c }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00079 \{ setStartPos(\mbox{\hyperlink{class_t_point_t}{TPoint}}(c, r)); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_a69b1973f58f376de1882df01f6607e8f}\label{class_cells_mover_a69b1973f58f376de1882df01f6607e8f}} 
\index{CellsMover@{CellsMover}!start@{start}}
\index{start@{start}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{start()}{start()}}
{\footnotesize\ttfamily void Cells\+Mover\+::start (\begin{DoxyParamCaption}\item[{int}]{r0,  }\item[{int}]{c0,  }\item[{int}]{r1,  }\item[{int}]{c1,  }\item[{int}]{qualifiers,  }\item[{const \mbox{\hyperlink{class_orientation}{Orientation}} $\ast$}]{o }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00064                                              \{}
\DoxyCodeLine{00065   m\_rowCount = r1 -\/ r0 + 1;}
\DoxyCodeLine{00066   m\_colCount = c1 -\/ c0 + 1;}
\DoxyCodeLine{00067   assert(m\_rowCount > 0);}
\DoxyCodeLine{00068   assert(m\_colCount > 0);}
\DoxyCodeLine{00069   m\_orientation = o;}
\DoxyCodeLine{00070   m\_startPos    = m\_pos =}
\DoxyCodeLine{00071       (o-\/>isVerticalTimeline() ? \mbox{\hyperlink{class_t_point_t}{TPoint}}(c0, r0) : \mbox{\hyperlink{class_t_point_t}{TPoint}}(r0, c0));}
\DoxyCodeLine{00072   m\_qualifiers = qualifiers;}
\DoxyCodeLine{00073   m\_cells.resize(m\_rowCount * m\_colCount, \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}}());}
\DoxyCodeLine{00074   m\_oldCells.resize(m\_rowCount * m\_colCount, \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}}());}
\DoxyCodeLine{00075   getCells(m\_cells, r0, c0);}
\DoxyCodeLine{00076   getColumnsData(c0, c1);}
\DoxyCodeLine{00077 }
\DoxyCodeLine{00078   \textcolor{keywordflow}{if} (m\_qualifiers \& eInsertCells \&\& !(m\_qualifiers \& eOverwriteCells))}
\DoxyCodeLine{00079     getImplicitCellInfo();}
\DoxyCodeLine{00080 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_ae7025ebf51fa7c6041f53646ac822779}\label{class_cells_mover_ae7025ebf51fa7c6041f53646ac822779}} 
\index{CellsMover@{CellsMover}!undoMoveCells@{undoMoveCells}}
\index{undoMoveCells@{undoMoveCells}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{undoMoveCells()}{undoMoveCells()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Cells\+Mover\+::undo\+Move\+Cells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00087 \{ undoMoveCells(m\_pos); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_cells_mover_a8bb7dee3120054b7a62838736f9c43ac}\label{class_cells_mover_a8bb7dee3120054b7a62838736f9c43ac}} 
\index{CellsMover@{CellsMover}!undoMoveCells@{undoMoveCells}}
\index{undoMoveCells@{undoMoveCells}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{undoMoveCells()}{undoMoveCells()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Cells\+Mover\+::undo\+Move\+Cells (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&}]{pos }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00222                                                       \{}
\DoxyCodeLine{00223   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = getXsheet();}
\DoxyCodeLine{00224   \textcolor{keywordtype}{int} r        = pos.y;}
\DoxyCodeLine{00225   \textcolor{keywordtype}{int} c        = pos.x;}
\DoxyCodeLine{00226   \textcolor{keywordflow}{if} (!m\_orientation-\/>isVerticalTimeline()) \{}
\DoxyCodeLine{00227     r = pos.x;}
\DoxyCodeLine{00228     c = pos.y;}
\DoxyCodeLine{00229   \}}
\DoxyCodeLine{00230 }
\DoxyCodeLine{00231   \textcolor{keywordflow}{if} (m\_qualifiers \& eInsertCells) \{}
\DoxyCodeLine{00232     \textcolor{comment}{// Act like implicit hold when dragging cells with pressing Shift key}}
\DoxyCodeLine{00233     \textcolor{comment}{// ( and WITHOUT Alt key ) and dragging within the same column.}}
\DoxyCodeLine{00234     \textcolor{keywordflow}{if} (!(m\_qualifiers \& eOverwriteCells) \&\& r > 0) \{}
\DoxyCodeLine{00235       \textcolor{keywordtype}{int} startCol =}
\DoxyCodeLine{00236           (m\_orientation-\/>isVerticalTimeline()) ? m\_startPos.x : m\_startPos.y;}
\DoxyCodeLine{00237       if (startCol == c) \{}
\DoxyCodeLine{00238         \textcolor{keywordtype}{int} infoId = 0;}
\DoxyCodeLine{00239         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_colCount; i++) \{}
\DoxyCodeLine{00240           \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(c + i);}
\DoxyCodeLine{00241           \textcolor{keywordflow}{if} (!column || column-\/>getCellColumn() == 0 || column-\/>isLocked())}
\DoxyCodeLine{00242             \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00243 }
\DoxyCodeLine{00244           \textcolor{comment}{// clear the cells and restore original arrangement}}
\DoxyCodeLine{00245           \mbox{\hyperlink{class_t_xsh_cell_column}{TXshCellColumn}} *cellCol = column-\/>getCellColumn();}
\DoxyCodeLine{00246           \textcolor{keywordtype}{int} r0, r1;}
\DoxyCodeLine{00247           cellCol-\/>\mbox{\hyperlink{class_t_xsh_cell_column_ab684089dcfd22454e7cbad249a04e29c}{getRange}}(r0, r1);}
\DoxyCodeLine{00248           cellCol-\/>\mbox{\hyperlink{class_t_xsh_cell_column_a2e143e05d7c869fb49b3c7535984b2c2}{clearCells}}(r0, r1 -\/ r0 + 1);}
\DoxyCodeLine{00249           QList<int> implicitKeys = m\_implicitCellInfo[infoId].keys();}
\DoxyCodeLine{00250           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < implicitKeys.size() -\/ 1; k++) \{}
\DoxyCodeLine{00251             \textcolor{keywordtype}{int} from = implicitKeys[k];}
\DoxyCodeLine{00252             \textcolor{keywordtype}{int} to   = implicitKeys[k + 1] -\/ 1;}
\DoxyCodeLine{00253             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} f = from; f <= to; f++)}
\DoxyCodeLine{00254               cellCol-\/>\mbox{\hyperlink{class_t_xsh_cell_column_a7dc6cd2fa2a50088c4168a02dca582c1}{setCell}}(f, m\_implicitCellInfo[infoId].value(from));}
\DoxyCodeLine{00255           \}}
\DoxyCodeLine{00256           infoId++;}
\DoxyCodeLine{00257         \}}
\DoxyCodeLine{00258         \textcolor{keywordflow}{return};}
\DoxyCodeLine{00259       \}}
\DoxyCodeLine{00260     \}}
\DoxyCodeLine{00261 }
\DoxyCodeLine{00262     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_colCount; i++) xsh-\/>\mbox{\hyperlink{class_t_xsheet_a5eb63e3947f59d2c57c0b0f4b9cad519}{removeCells}}(r, c + i, m\_rowCount);}
\DoxyCodeLine{00263   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00264     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_colCount; i++) xsh-\/>\mbox{\hyperlink{class_t_xsheet_a28381fbf27f33822b68cf66f689266da}{clearCells}}(r, c + i, m\_rowCount);}
\DoxyCodeLine{00265     \textcolor{keywordflow}{if} (m\_qualifiers \& eOverwriteCells) setCells(m\_oldCells, r, c);}
\DoxyCodeLine{00266   \}}
\DoxyCodeLine{00267 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_cells_mover_a4bfa598300813029863daabe3dfd951e}\label{class_cells_mover_a4bfa598300813029863daabe3dfd951e}} 
\index{CellsMover@{CellsMover}!m\_uffa@{m\_uffa}}
\index{m\_uffa@{m\_uffa}!CellsMover@{CellsMover}}
\doxysubsubsection{\texorpdfstring{m\_uffa}{m\_uffa}}
{\footnotesize\ttfamily int Cells\+Mover\+::m\+\_\+uffa}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/xshcellmover.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/xshcellmover.\+cpp\end{DoxyCompactItemize}
