\hypertarget{class_raster_tape_tool}{}\doxysection{Raster\+Tape\+Tool Class Reference}
\label{class_raster_tape_tool}\index{RasterTapeTool@{RasterTapeTool}}
Inheritance diagram for Raster\+Tape\+Tool\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_raster_tape_tool}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} \mbox{\hyperlink{class_raster_tape_tool_ae622e2fcd4177688a7c1f06cb0e2662d}{get\+Tool\+Type}} () const override
\item 
void \mbox{\hyperlink{class_raster_tape_tool_a1ce03fffd02ae882ce563514bd0a3cb0}{update\+Translation}} () override
\item 
void \mbox{\hyperlink{class_raster_tape_tool_ae96dc4c8b9afacc4434d231eebf33d3c}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
bool \mbox{\hyperlink{class_raster_tape_tool_a76347b9240a332f7252c3e246b3d24e5}{apply\+Autoclose}} (const \mbox{\hyperlink{class_t_toonz_image_p}{TToonz\+ImageP}} \&ti, const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&sel\+Rect=\mbox{\hyperlink{class_t_rect_t}{TRectD}}(), \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$stroke=0)
\item 
\mbox{\hyperlink{class_t_rect_t}{TRectD}} \mbox{\hyperlink{class_raster_tape_tool_ac084816a03f5f9184acadb1f706ae418}{interpolate\+Rect}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&r1, const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&r2, double t)
\item 
void \mbox{\hyperlink{class_raster_tape_tool_a203b6cb97326a4076a8bc8f0c43950b7}{multi\+Apply\+Autoclose}} (\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} first\+Fid, \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} last\+Fid, \mbox{\hyperlink{class_t_rect_t}{TRectD}} first\+Rect, \mbox{\hyperlink{class_t_rect_t}{TRectD}} last\+Rect, \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$first\+Stroke=0, \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$last\+Stroke=0)
\item 
void \mbox{\hyperlink{class_raster_tape_tool_ae773f2bb4dd2d9cd4d1b2697029268ec}{multi\+Apply\+Autoclose}} (\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} first\+Frame\+Id, \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} last\+Frame\+Id)
\item 
void \mbox{\hyperlink{class_raster_tape_tool_a3ab5a4ee68d94fac17a3a8bbc6c2d26a}{left\+Button\+Up}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_raster_tape_tool_aee0b615722dab5032bcd3ec165cf21aa}{draw}} () override
\begin{DoxyCompactList}\small\item\em Draws the tool on the viewer. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_raster_tape_tool_a6145e6d7ea245d3acd23827c1d3c150e}{on\+Property\+Changed}} (std\+::string property\+Name) override
\item 
void \mbox{\hyperlink{class_raster_tape_tool_a3561ef8e2bf51ecab7b01dd3bc9d0c81}{reset\+Multi}} ()
\item 
void \mbox{\hyperlink{class_raster_tape_tool_a6b6a61367c64725a37960f384b8675ab}{on\+Image\+Changed}} () override
\begin{DoxyCompactList}\small\item\em Notifies changes in the image in use. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_raster_tape_tool_a856ea0da3252e5c8a595023c89304ba5}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\item 
void \mbox{\hyperlink{class_raster_tape_tool_ab708a280c0eff1f9b93bff36dff9211c}{left\+Button\+Double\+Click}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_raster_tape_tool_a98f1d7cf190166cf6b979821c30e864b}{mouse\+Move}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_raster_tape_tool_a9db93b1a6cc5285aa030d1fff8b30618}{on\+Enter}} () override
\begin{DoxyCompactList}\small\item\em Callback for the mouse entering the viewer area. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ \mbox{\hyperlink{class_raster_tape_tool_a6bed1c8e8b40fb8b5881271dbbcd12e4}{get\+Properties}} (int target\+Type) override
\item 
void \mbox{\hyperlink{class_raster_tape_tool_a6611fdb7f2c73476edbe5e96f070ced2}{on\+Activate}} () override
\begin{DoxyCompactList}\small\item\em Callback invoked whenever the tool activates. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_raster_tape_tool_a4e770b41368501df4d30c1da1d88cc40}{on\+Deactivate}} () override
\begin{DoxyCompactList}\small\item\em Callback for tool deactivation, includes tool switch. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_raster_tape_tool_a2e787ac6decc204b024e9aa7b70093e1}{get\+Cursor\+Id}} () const override
\begin{DoxyCompactList}\small\item\em Returns the type of cursor used by the tool. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_raster_tape_tool_afe1dee22684e38ff7e7d644f3484e67e}{start\+Freehand}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos)
\item 
void \mbox{\hyperlink{class_raster_tape_tool_aee5a45ce8730477f54ec3e5c95dbfc21}{freehand\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos)
\item 
void \mbox{\hyperlink{class_raster_tape_tool_aad9549a688488704df194d5c760c0331}{close\+Freehand}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos)
\item 
void \mbox{\hyperlink{class_raster_tape_tool_a46d53c325cbfa3918ac20eaac2944134}{add\+Point\+Polyline}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos)
\begin{DoxyCompactList}\small\item\em Viene aggiunto un punto al vettore m\+\_\+polyline. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_raster_tape_tool_a6277cebb53c962e46b5c73b1b2fa19e4}{close\+Polyline}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos)
\item 
void \mbox{\hyperlink{class_raster_tape_tool_a289fcf2f785d8a415803e41f712c911f}{check\+Segments}} (std\+::vector$<$ TAutocloser\+::\+Segment $>$ \&segments, \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$stroke, const \mbox{\hyperlink{class_t_raster_p_t}{TRaster\+CM32P}} \&ras, const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&delta)
\begin{DoxyCompactList}\small\item\em Elimina i segmenti che non sono contenuti all\textquotesingle{}interno dello stroke!!! \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_raster_tape_tool_a3c3bbe26e521ffbe8aa8ffb5c76eb1dd}{multi\+Autoclose\+Region}} (\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$stroke, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e)
\item 
void \mbox{\hyperlink{class_raster_tape_tool_aea4f6140fdaf656c5f6e93ef8a63afcd}{do\+Close}} (double t, const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \&img, const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&first\+Image, const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&last\+Image)
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_raster_tape_tool_a90c201a662da1c61717d57e10d3cd462}\label{class_raster_tape_tool_a90c201a662da1c61717d57e10d3cd462}} 
\index{RasterTapeTool@{RasterTapeTool}!RasterTapeTool@{RasterTapeTool}}
\index{RasterTapeTool@{RasterTapeTool}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{RasterTapeTool()}{RasterTapeTool()}}
{\footnotesize\ttfamily Raster\+Tape\+Tool\+::\+Raster\+Tape\+Tool (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00137       : \mbox{\hyperlink{class_t_tool_a9c63ec35f606e755d0d036bf4fed62ab}{TTool}}(\textcolor{stringliteral}{"{}T\_Tape"{}})}
\DoxyCodeLine{00138       , m\_closeType(\textcolor{stringliteral}{"{}Type:"{}})                    \textcolor{comment}{// W\_ToolOptions\_CloseType}}
\DoxyCodeLine{00139       , m\_distance(\textcolor{stringliteral}{"{}Distance:"{}}, 1, 100, 10)     \textcolor{comment}{// W\_ToolOptions\_Distance}}
\DoxyCodeLine{00140       , m\_angle(\textcolor{stringliteral}{"{}Angle:"{}}, 1, 180, 60)           \textcolor{comment}{// W\_ToolOptions\_Angle}}
\DoxyCodeLine{00141       , m\_inkIndex(\textcolor{stringliteral}{"{}Style Index:"{}}, L\textcolor{stringliteral}{"{}current"{}})  \textcolor{comment}{// W\_ToolOptions\_InkIndex}}
\DoxyCodeLine{00142       , m\_opacity(\textcolor{stringliteral}{"{}Opacity:"{}}, 1, 255, 255)}
\DoxyCodeLine{00143       , m\_multi(\textcolor{stringliteral}{"{}Frame Range"{}}, \textcolor{keyword}{false})  \textcolor{comment}{// W\_ToolOptions\_FrameRange}}
\DoxyCodeLine{00144       , m\_selecting(\textcolor{keyword}{false})}
\DoxyCodeLine{00145       , m\_selectingRect()}
\DoxyCodeLine{00146       , m\_firstRect()}
\DoxyCodeLine{00147       , m\_level(0)}
\DoxyCodeLine{00148       , m\_firstFrameSelected(\textcolor{keyword}{false})}
\DoxyCodeLine{00149       , m\_isXsheetCell(\textcolor{keyword}{false})}
\DoxyCodeLine{00150       , m\_currCell(-\/1, -\/1)}
\DoxyCodeLine{00151       , m\_firstPos()}
\DoxyCodeLine{00152       , m\_mousePosition()}
\DoxyCodeLine{00153       , m\_thick(0.5)}
\DoxyCodeLine{00154       , m\_stroke(0)}
\DoxyCodeLine{00155       , m\_firstStroke(0)}
\DoxyCodeLine{00156       , m\_firstTime(\textcolor{keyword}{true}) \{}
\DoxyCodeLine{00157     bind(\mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{TTool::ToonzImage}});}
\DoxyCodeLine{00158     m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_closeType);}
\DoxyCodeLine{00159     m\_closeType.addValue(NORMAL\_CLOSE);}
\DoxyCodeLine{00160     m\_closeType.addValue(RECT\_CLOSE);}
\DoxyCodeLine{00161     m\_closeType.addValue(FREEHAND\_CLOSE);}
\DoxyCodeLine{00162     m\_closeType.addValue(POLYLINE\_CLOSE);}
\DoxyCodeLine{00163     m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_multi);}
\DoxyCodeLine{00164     m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_distance);}
\DoxyCodeLine{00165     m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_angle);}
\DoxyCodeLine{00166     m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_inkIndex);}
\DoxyCodeLine{00167     m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_opacity);}
\DoxyCodeLine{00168     m\_multi.setId(\textcolor{stringliteral}{"{}FrameRange"{}});}
\DoxyCodeLine{00169     m\_closeType.setId(\textcolor{stringliteral}{"{}Type"{}});}
\DoxyCodeLine{00170   \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_raster_tape_tool_a46d53c325cbfa3918ac20eaac2944134}\label{class_raster_tape_tool_a46d53c325cbfa3918ac20eaac2944134}} 
\index{RasterTapeTool@{RasterTapeTool}!addPointPolyline@{addPointPolyline}}
\index{addPointPolyline@{addPointPolyline}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{addPointPolyline()}{addPointPolyline()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::add\+Point\+Polyline (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Viene aggiunto un punto al vettore m\+\_\+polyline. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00740                                             \{}
\DoxyCodeLine{00741     m\_firstPos = pos;}
\DoxyCodeLine{00742     m\_polyline.push\_back(pos);}
\DoxyCodeLine{00743   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_a76347b9240a332f7252c3e246b3d24e5}\label{class_raster_tape_tool_a76347b9240a332f7252c3e246b3d24e5}} 
\index{RasterTapeTool@{RasterTapeTool}!applyAutoclose@{applyAutoclose}}
\index{applyAutoclose@{applyAutoclose}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{applyAutoclose()}{applyAutoclose()}}
{\footnotesize\ttfamily bool Raster\+Tape\+Tool\+::apply\+Autoclose (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_toonz_image_p}{TToonz\+ImageP}} \&}]{ti,  }\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{sel\+Rect = {\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRectD}}()},  }\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke = {\ttfamily 0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00210                                            \{}
\DoxyCodeLine{00211     \textcolor{keywordflow}{if} (!ti) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00212     \textcolor{comment}{// inizializzo gli AutocloseParameters}}
\DoxyCodeLine{00213     AutocloseParameters params;}
\DoxyCodeLine{00214     params.m\_closingDistance = (int)(m\_distance.getValue());}
\DoxyCodeLine{00215     params.m\_spotAngle       = (int)(m\_angle.getValue());}
\DoxyCodeLine{00216     params.m\_opacity         = m\_opacity.getValue();}
\DoxyCodeLine{00217     std::string inkString    = ::to\_string(m\_inkIndex.getValue());}
\DoxyCodeLine{00218     \textcolor{keywordtype}{int} inkIndex =}
\DoxyCodeLine{00219         TTool::getApplication()}
\DoxyCodeLine{00220             -\/>getCurrentLevelStyleIndex();  \textcolor{comment}{// TApp::instance()-\/>getCurrentPalette()-\/>getStyleIndex();}}
\DoxyCodeLine{00221     \textcolor{keywordflow}{if} (isInt(inkString)) inkIndex = std::stoi(inkString);}
\DoxyCodeLine{00222     params.m\_inkIndex = inkIndex;}
\DoxyCodeLine{00223 }
\DoxyCodeLine{00224     \mbox{\hyperlink{class_t_point_t}{TPoint}} delta;}
\DoxyCodeLine{00225     \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} ras, raux = ti-\/>getRaster();}
\DoxyCodeLine{00226     \textcolor{keywordflow}{if} (m\_closeType.getValue() == RECT\_CLOSE \&\& raux \&\& !selRect.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \{}
\DoxyCodeLine{00227       \mbox{\hyperlink{class_t_rect_t}{TRectD}} selArea = selRect;}
\DoxyCodeLine{00228       \textcolor{keywordflow}{if} (selRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} > selRect.x1) \{}
\DoxyCodeLine{00229         selArea.x1 = selRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}};}
\DoxyCodeLine{00230         selArea.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} = selRect.x1;}
\DoxyCodeLine{00231       \}}
\DoxyCodeLine{00232       \textcolor{keywordflow}{if} (selRect.y0 > selRect.y1) \{}
\DoxyCodeLine{00233         selArea.y1 = selRect.y0;}
\DoxyCodeLine{00234         selArea.y0 = selRect.y1;}
\DoxyCodeLine{00235       \}}
\DoxyCodeLine{00236       \mbox{\hyperlink{class_t_rect_t}{TRect}} myRect(ToonzImageUtils::convertWorldToRaster(selArea, ti));}
\DoxyCodeLine{00237       ras   = raux-\/>extract(myRect);}
\DoxyCodeLine{00238       delta = myRect.getP00();}
\DoxyCodeLine{00239     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((m\_closeType.getValue() == FREEHAND\_CLOSE ||}
\DoxyCodeLine{00240                 m\_closeType.getValue() == POLYLINE\_CLOSE) \&\&}
\DoxyCodeLine{00241                stroke) \{}
\DoxyCodeLine{00242       \mbox{\hyperlink{class_t_rect_t}{TRectD}} selArea = stroke-\/>\mbox{\hyperlink{class_t_stroke_a456bedcae5e8af3a84823cb251584957}{getBBox}}();}
\DoxyCodeLine{00243       \mbox{\hyperlink{class_t_rect_t}{TRect}} myRect(ToonzImageUtils::convertWorldToRaster(selArea, ti));}
\DoxyCodeLine{00244       ras   = raux-\/>extract(myRect);}
\DoxyCodeLine{00245       delta = myRect.getP00();}
\DoxyCodeLine{00246     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00247       ras = raux;}
\DoxyCodeLine{00248     \textcolor{keywordflow}{if} (!ras) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00249 }
\DoxyCodeLine{00250     \mbox{\hyperlink{class_t_autocloser}{TAutocloser}} ac(ras, params.m\_closingDistance, params.m\_spotAngle,}
\DoxyCodeLine{00251                    params.m\_inkIndex, params.m\_opacity);}
\DoxyCodeLine{00252 }
\DoxyCodeLine{00253     std::vector<TAutocloser::Segment> segments;}
\DoxyCodeLine{00254     ac.compute(segments);}
\DoxyCodeLine{00255 }
\DoxyCodeLine{00256     \textcolor{keywordflow}{if} ((m\_closeType.getValue() == FREEHAND\_CLOSE ||}
\DoxyCodeLine{00257          m\_closeType.getValue() == POLYLINE\_CLOSE) \&\&}
\DoxyCodeLine{00258         stroke)}
\DoxyCodeLine{00259       \mbox{\hyperlink{class_raster_tape_tool_a289fcf2f785d8a415803e41f712c911f}{checkSegments}}(segments, stroke, raux, delta);}
\DoxyCodeLine{00260 }
\DoxyCodeLine{00261     std::vector<TAutocloser::Segment> segments2(segments);}
\DoxyCodeLine{00262 }
\DoxyCodeLine{00263     \textcolor{comment}{/*-\/-\/ segmentが取得できなければfalseを返す -\/-\/*/}}
\DoxyCodeLine{00264     \textcolor{keywordflow}{if} (segments2.empty()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00265 }
\DoxyCodeLine{00266     \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00267     \textcolor{keywordflow}{if} (delta != \mbox{\hyperlink{class_t_point_t}{TPoint}}(0, 0))}
\DoxyCodeLine{00268       \textcolor{keywordflow}{for} (i = 0; i < (int)segments2.size(); i++) \{}
\DoxyCodeLine{00269         segments2[i].first += delta;}
\DoxyCodeLine{00270         segments2[i].second += delta;}
\DoxyCodeLine{00271       \}}
\DoxyCodeLine{00272 }
\DoxyCodeLine{00273     \mbox{\hyperlink{class_t_tile_set_c_m32}{TTileSetCM32}} *tileSet = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_tile_set_c_m32}{TTileSetCM32}}(raux-\/>getSize());}
\DoxyCodeLine{00274     \textcolor{keywordflow}{for} (i = 0; i < (int)segments2.size(); i++) \{}
\DoxyCodeLine{00275       \mbox{\hyperlink{class_t_rect_t}{TRect}} bbox(segments2[i].first, segments2[i].second);}
\DoxyCodeLine{00276       bbox = bbox.enlarge(2);}
\DoxyCodeLine{00277       tileSet-\/>add(raux, bbox);}
\DoxyCodeLine{00278     \}}
\DoxyCodeLine{00279 }
\DoxyCodeLine{00280     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl =}
\DoxyCodeLine{00281         TTool::getApplication()-\/>getCurrentLevel()-\/>getSimpleLevel();}
\DoxyCodeLine{00282     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} \textcolor{keywordtype}{id} = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{00283     TUndoManager::manager()-\/>add(}
\DoxyCodeLine{00284         \textcolor{keyword}{new} RasterAutocloseUndo(tileSet, params, segments2, sl, \textcolor{keywordtype}{id}));}
\DoxyCodeLine{00285     ac.draw(segments);}
\DoxyCodeLine{00286     ToolUtils::updateSaveBox();}
\DoxyCodeLine{00287     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00288   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_a289fcf2f785d8a415803e41f712c911f}\label{class_raster_tape_tool_a289fcf2f785d8a415803e41f712c911f}} 
\index{RasterTapeTool@{RasterTapeTool}!checkSegments@{checkSegments}}
\index{checkSegments@{checkSegments}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{checkSegments()}{checkSegments()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::check\+Segments (\begin{DoxyParamCaption}\item[{std\+::vector$<$ TAutocloser\+::\+Segment $>$ \&}]{segments,  }\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke,  }\item[{const \mbox{\hyperlink{class_t_raster_p_t}{TRaster\+CM32P}} \&}]{ras,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPoint}} \&}]{delta }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Elimina i segmenti che non sono contenuti all\textquotesingle{}interno dello stroke!!! 


\begin{DoxyCode}{0}
\DoxyCodeLine{00762                                           \{}
\DoxyCodeLine{00763     \mbox{\hyperlink{class_t_vector_image}{TVectorImage}} vi;}
\DoxyCodeLine{00764     \mbox{\hyperlink{class_t_stroke}{TStroke}} *app = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}();}
\DoxyCodeLine{00765     *app         = *stroke;}
\DoxyCodeLine{00766     app-\/>\mbox{\hyperlink{class_t_stroke_a919f059066dc8dcabeb57ece1775d590}{transform}}(\mbox{\hyperlink{class_t_translation}{TTranslation}}(convert(ras-\/>getCenter())));}
\DoxyCodeLine{00767     vi.\mbox{\hyperlink{class_t_vector_image_ae79fbf2aec0f00876382f920227bfa05}{addStroke}}(app);}
\DoxyCodeLine{00768     vi.findRegions();}
\DoxyCodeLine{00769     std::vector<TAutocloser::Segment>::iterator it = segments.begin();}
\DoxyCodeLine{00770     \textcolor{keywordflow}{for} (; it < segments.end(); it++) \{}
\DoxyCodeLine{00771       \textcolor{keywordflow}{if} (it == segments.end()) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00772 }
\DoxyCodeLine{00773       \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00774       \textcolor{keywordtype}{bool} isContained = \textcolor{keyword}{false};}
\DoxyCodeLine{00775       \textcolor{keywordflow}{for} (i = 0; i < (int)vi.\mbox{\hyperlink{class_t_vector_image_a12e56e674828c172749d5bc1855bc977}{getRegionCount}}(); i++) \{}
\DoxyCodeLine{00776         \mbox{\hyperlink{class_t_region}{TRegion}} *reg = vi.\mbox{\hyperlink{class_t_vector_image_a17f9e44c72c82c54d0cf9fefed85e12f}{getRegion}}(i);}
\DoxyCodeLine{00777         \textcolor{keywordflow}{if} (reg-\/>contains(convert(it-\/>first + delta)) \&\&}
\DoxyCodeLine{00778             reg-\/>contains(convert(it-\/>second + delta))) \{}
\DoxyCodeLine{00779           isContained = \textcolor{keyword}{true};}
\DoxyCodeLine{00780           \textcolor{keywordflow}{break};}
\DoxyCodeLine{00781         \}}
\DoxyCodeLine{00782       \}}
\DoxyCodeLine{00783       \textcolor{keywordflow}{if} (!isContained) \{}
\DoxyCodeLine{00784         it = segments.erase(it);}
\DoxyCodeLine{00785         \textcolor{keywordflow}{if} (it != segments.end() \&\& it != segments.begin())}
\DoxyCodeLine{00786           it-\/-\/;}
\DoxyCodeLine{00787         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (it == segments.end())}
\DoxyCodeLine{00788           \textcolor{keywordflow}{break};}
\DoxyCodeLine{00789       \}}
\DoxyCodeLine{00790     \}}
\DoxyCodeLine{00791   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00150}{TVector\+Image\+::add\+Stroke()}}, \mbox{\hyperlink{l00406}{TVector\+Image\+::get\+Region()}}, \mbox{\hyperlink{l00399}{TVector\+Image\+::get\+Region\+Count()}}, and \mbox{\hyperlink{l02292}{TStroke\+::transform()}}.

\mbox{\Hypertarget{class_raster_tape_tool_aad9549a688488704df194d5c760c0331}\label{class_raster_tape_tool_aad9549a688488704df194d5c760c0331}} 
\index{RasterTapeTool@{RasterTapeTool}!closeFreehand@{closeFreehand}}
\index{closeFreehand@{closeFreehand}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{closeFreehand()}{closeFreehand()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::close\+Freehand (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Viene chiuso il lazzo (si aggiunge l\textquotesingle{}ultimo punto ad m\+\_\+track) e viene creato lo stroke rappresentante il lazzo. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00727                                          \{}
\DoxyCodeLine{00728     \textcolor{keywordflow}{if} (m\_track.\mbox{\hyperlink{class_stroke_generator_a85461eab47ef4791610974866efb61aa}{isEmpty}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00729     \textcolor{keywordtype}{double} pixelSize2 = getPixelSize() * getPixelSize();}
\DoxyCodeLine{00730     m\_track.\mbox{\hyperlink{class_stroke_generator_a6b8f7f919bde3cf7695c9c58980c9ba3}{add}}(\mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(m\_firstPos, m\_thick), pixelSize2);}
\DoxyCodeLine{00731     m\_track.\mbox{\hyperlink{class_stroke_generator_a493d7aac12911e5618057115dde42131}{filterPoints}}();}
\DoxyCodeLine{00732     \textcolor{keywordtype}{double} error = (30.0 / 11) * sqrt(pixelSize2);}
\DoxyCodeLine{00733     m\_stroke     = m\_track.\mbox{\hyperlink{class_stroke_generator_a647b44a77222a0d8b4bc21db2fdb9f93}{makeStroke}}(error);}
\DoxyCodeLine{00734     m\_stroke-\/>\mbox{\hyperlink{class_t_stroke_a33f59dfbed74b577700351eac8c2fc7b}{setStyle}}(1);}
\DoxyCodeLine{00735   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00029}{Stroke\+Generator\+::add()}}, \mbox{\hyperlink{l00055}{Stroke\+Generator\+::filter\+Points()}}, \mbox{\hyperlink{l00025}{Stroke\+Generator\+::is\+Empty()}}, \mbox{\hyperlink{l00277}{Stroke\+Generator\+::make\+Stroke()}}, and \mbox{\hyperlink{l02370}{TStroke\+::set\+Style()}}.

\mbox{\Hypertarget{class_raster_tape_tool_a6277cebb53c962e46b5c73b1b2fa19e4}\label{class_raster_tape_tool_a6277cebb53c962e46b5c73b1b2fa19e4}} 
\index{RasterTapeTool@{RasterTapeTool}!closePolyline@{closePolyline}}
\index{closePolyline@{closePolyline}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{closePolyline()}{closePolyline()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::close\+Polyline (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Agginge l\textquotesingle{}ultimo pos a {\bfseries{m\+\_\+polyline}} e chiude la spezzata (aggiunge {\bfseries{m\+\_\+polyline.\+front()}} alla fine del vettore) 
\begin{DoxyCode}{0}
\DoxyCodeLine{00749                                          \{}
\DoxyCodeLine{00750     \textcolor{keywordflow}{if} (m\_polyline.size() <= 1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00751     \textcolor{keywordflow}{if} (m\_polyline.back() != pos) m\_polyline.push\_back(pos);}
\DoxyCodeLine{00752     \textcolor{keywordflow}{if} (m\_polyline.back() != m\_polyline.front())}
\DoxyCodeLine{00753       m\_polyline.push\_back(m\_polyline.front());}
\DoxyCodeLine{00754     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00755   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00540}{TTool\+::invalidate()}}.

\mbox{\Hypertarget{class_raster_tape_tool_aea4f6140fdaf656c5f6e93ef8a63afcd}\label{class_raster_tape_tool_aea4f6140fdaf656c5f6e93ef8a63afcd}} 
\index{RasterTapeTool@{RasterTapeTool}!doClose@{doClose}}
\index{doClose@{doClose}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{doClose()}{doClose()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::do\+Close (\begin{DoxyParamCaption}\item[{double}]{t,  }\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \&}]{img,  }\item[{const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&}]{first\+Image,  }\item[{const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&}]{last\+Image }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00825                                                \{}
\DoxyCodeLine{00826     \textcolor{keywordflow}{if} (t == 0)}
\DoxyCodeLine{00827       applyAutoclose(img, \mbox{\hyperlink{class_t_rect_t}{TRectD}}(), firstImage-\/>getStroke(0));}
\DoxyCodeLine{00828     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (t == 1)}
\DoxyCodeLine{00829       applyAutoclose(img, \mbox{\hyperlink{class_t_rect_t}{TRectD}}(), lastImage-\/>getStroke(0));}
\DoxyCodeLine{00830     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00831       assert(firstImage-\/>getStrokeCount() == 1);}
\DoxyCodeLine{00832       assert(lastImage-\/>getStrokeCount() == 1);}
\DoxyCodeLine{00833       \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi = \mbox{\hyperlink{class_t_inbetween}{TInbetween}}(firstImage, lastImage).tween(t);}
\DoxyCodeLine{00834       assert(vi-\/>getStrokeCount() == 1);}
\DoxyCodeLine{00835       applyAutoclose(img, \mbox{\hyperlink{class_t_rect_t}{TRectD}}(), vi-\/>getStroke(0));}
\DoxyCodeLine{00836     \}}
\DoxyCodeLine{00837   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_aee0b615722dab5032bcd3ec165cf21aa}\label{class_raster_tape_tool_aee0b615722dab5032bcd3ec165cf21aa}} 
\index{RasterTapeTool@{RasterTapeTool}!draw@{draw}}
\index{draw@{draw}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::draw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Draws the tool on the viewer. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a058bf656d73bf3cd63b9826cbaaf48e0}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00452                        \{}
\DoxyCodeLine{00453     \textcolor{keywordtype}{double} pixelSize2 = getPixelSize() * getPixelSize();}
\DoxyCodeLine{00454     m\_thick           = sqrt(pixelSize2) / 2.0;}
\DoxyCodeLine{00455     \textcolor{keywordflow}{if} (m\_closeType.getValue() == RECT\_CLOSE) \{}
\DoxyCodeLine{00456       TPixel color = ToonzCheck::instance()-\/>getChecks() \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876ab6d35869ac2f7cfc956d498b2089a1ff}{ToonzCheck::eBlackBg}}}
\DoxyCodeLine{00457                          ? TPixel32::White}
\DoxyCodeLine{00458                          : TPixel32::Black;}
\DoxyCodeLine{00459       \textcolor{keywordflow}{if} (m\_multi.getValue() \&\& m\_firstFrameSelected)}
\DoxyCodeLine{00460         drawRect(m\_firstRect, color, 0x3F33, \textcolor{keyword}{true});}
\DoxyCodeLine{00461 }
\DoxyCodeLine{00462       \textcolor{keywordflow}{if} (m\_selecting || (m\_multi.getValue() \&\& !m\_firstFrameSelected))}
\DoxyCodeLine{00463         drawRect(m\_selectingRect, color, 0x3F33, \textcolor{keyword}{true});}
\DoxyCodeLine{00464     \}}
\DoxyCodeLine{00465     \textcolor{keywordflow}{if} ((m\_closeType.getValue() == FREEHAND\_CLOSE ||}
\DoxyCodeLine{00466          m\_closeType.getValue() == POLYLINE\_CLOSE) \&\&}
\DoxyCodeLine{00467         m\_multi.getValue() \&\& m\_firstStroke) \{}
\DoxyCodeLine{00468       TPixel color = ToonzCheck::instance()-\/>getChecks() \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876ab6d35869ac2f7cfc956d498b2089a1ff}{ToonzCheck::eBlackBg}}}
\DoxyCodeLine{00469                          ? TPixel32::White}
\DoxyCodeLine{00470                          : TPixel32::Black;}
\DoxyCodeLine{00471       tglColor(color);}
\DoxyCodeLine{00472       drawStrokeCenterline(*m\_firstStroke, 1);}
\DoxyCodeLine{00473     \}}
\DoxyCodeLine{00474     \textcolor{keywordflow}{if} (m\_closeType.getValue() == POLYLINE\_CLOSE \&\& !m\_polyline.empty()) \{}
\DoxyCodeLine{00475       TPixel color = ToonzCheck::instance()-\/>getChecks() \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876ab6d35869ac2f7cfc956d498b2089a1ff}{ToonzCheck::eBlackBg}}}
\DoxyCodeLine{00476                          ? TPixel32::White}
\DoxyCodeLine{00477                          : TPixel32::Black;}
\DoxyCodeLine{00478       tglColor(color);}
\DoxyCodeLine{00479       tglDrawCircle(m\_polyline[0], 2);}
\DoxyCodeLine{00480       glBegin(GL\_LINE\_STRIP);}
\DoxyCodeLine{00481       \textcolor{keywordflow}{for} (UINT i = 0; i < m\_polyline.size(); i++) tglVertex(m\_polyline[i]);}
\DoxyCodeLine{00482       tglVertex(m\_mousePosition);}
\DoxyCodeLine{00483       glEnd();}
\DoxyCodeLine{00484     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_closeType.getValue() == FREEHAND\_CLOSE \&\& !m\_track.\mbox{\hyperlink{class_stroke_generator_a85461eab47ef4791610974866efb61aa}{isEmpty}}()) \{}
\DoxyCodeLine{00485       TPixel color = ToonzCheck::instance()-\/>getChecks() \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876ab6d35869ac2f7cfc956d498b2089a1ff}{ToonzCheck::eBlackBg}}}
\DoxyCodeLine{00486                          ? TPixel32::White}
\DoxyCodeLine{00487                          : TPixel32::Black;}
\DoxyCodeLine{00488       tglColor(color);}
\DoxyCodeLine{00489       m\_track.\mbox{\hyperlink{class_stroke_generator_a36ec59cf8b18831d60760706068c9c8f}{drawAllFragments}}();}
\DoxyCodeLine{00490     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_multi.getValue() \&\& m\_firstFrameSelected)}
\DoxyCodeLine{00491       drawCross(m\_firstPoint, 5);}
\DoxyCodeLine{00492   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00224}{Stroke\+Generator\+::draw\+All\+Fragments()}}, \mbox{\hyperlink{l00044}{Toonz\+Check\+::e\+Black\+Bg}}, and \mbox{\hyperlink{l00025}{Stroke\+Generator\+::is\+Empty()}}.

\mbox{\Hypertarget{class_raster_tape_tool_aee5a45ce8730477f54ec3e5c95dbfc21}\label{class_raster_tape_tool_aee5a45ce8730477f54ec3e5c95dbfc21}} 
\index{RasterTapeTool@{RasterTapeTool}!freehandDrag@{freehandDrag}}
\index{freehandDrag@{freehandDrag}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{freehandDrag()}{freehandDrag()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::freehand\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Viene aggiunto {\bfseries{pos}} a {\bfseries{m\+\_\+track}} e disegnato un altro pezzetto del lazzo. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00718                                         \{}
\DoxyCodeLine{00719     \textcolor{keywordtype}{double} pixelSize2 = getPixelSize() * getPixelSize();}
\DoxyCodeLine{00720     m\_track.\mbox{\hyperlink{class_stroke_generator_a6b8f7f919bde3cf7695c9c58980c9ba3}{add}}(\mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(pos, m\_thick), pixelSize2);}
\DoxyCodeLine{00721   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00029}{Stroke\+Generator\+::add()}}.

\mbox{\Hypertarget{class_raster_tape_tool_a2e787ac6decc204b024e9aa7b70093e1}\label{class_raster_tape_tool_a2e787ac6decc204b024e9aa7b70093e1}} 
\index{RasterTapeTool@{RasterTapeTool}!getCursorId@{getCursorId}}
\index{getCursorId@{getCursorId}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{getCursorId()}{getCursorId()}}
{\footnotesize\ttfamily int Raster\+Tape\+Tool\+::get\+Cursor\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Returns the type of cursor used by the tool. 

\begin{DoxySeeAlso}{See also}
For a list of cursor ids \mbox{\hyperlink{}{cursor.\+h}} 
\end{DoxySeeAlso}


Reimplemented from \mbox{\hyperlink{class_t_tool_a1768a57b8b6d1480618fd923fad15f1d}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00687                                    \{}
\DoxyCodeLine{00688     \textcolor{keywordtype}{int} ret = ToolCursor::TapeCursor;}
\DoxyCodeLine{00689 }
\DoxyCodeLine{00690     \textcolor{keywordflow}{if} (m\_closeType.getValue() == FREEHAND\_CLOSE)}
\DoxyCodeLine{00691       ret = ret | ToolCursor::Ex\_FreeHand;}
\DoxyCodeLine{00692     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_closeType.getValue() == POLYLINE\_CLOSE)}
\DoxyCodeLine{00693       ret = ret | ToolCursor::Ex\_PolyLine;}
\DoxyCodeLine{00694     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_closeType.getValue() == RECT\_CLOSE)}
\DoxyCodeLine{00695       ret = ret | ToolCursor::Ex\_Rectangle;}
\DoxyCodeLine{00696 }
\DoxyCodeLine{00697     \textcolor{keywordflow}{if} (ToonzCheck::instance()-\/>getChecks() \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876ab6d35869ac2f7cfc956d498b2089a1ff}{ToonzCheck::eBlackBg}})}
\DoxyCodeLine{00698       ret = ret | ToolCursor::Ex\_Negate;}
\DoxyCodeLine{00699 }
\DoxyCodeLine{00700     \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00701   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00044}{Toonz\+Check\+::e\+Black\+Bg}}.

\mbox{\Hypertarget{class_raster_tape_tool_a6bed1c8e8b40fb8b5881271dbbcd12e4}\label{class_raster_tape_tool_a6bed1c8e8b40fb8b5881271dbbcd12e4}} 
\index{RasterTapeTool@{RasterTapeTool}!getProperties@{getProperties}}
\index{getProperties@{getProperties}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{getProperties()}{getProperties()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ Raster\+Tape\+Tool\+::get\+Properties (\begin{DoxyParamCaption}\item[{int}]{target\+Type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00664 \{ \textcolor{keywordflow}{return} \&m\_prop; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_ae622e2fcd4177688a7c1f06cb0e2662d}\label{class_raster_tape_tool_ae622e2fcd4177688a7c1f06cb0e2662d}} 
\index{RasterTapeTool@{RasterTapeTool}!getToolType@{getToolType}}
\index{getToolType@{getToolType}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{getToolType()}{getToolType()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} Raster\+Tape\+Tool\+::get\+Tool\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00174 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca01ffd66b00b05a88c02ce8ceb5da3b8b}{TTool::LevelWriteTool}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_ac084816a03f5f9184acadb1f706ae418}\label{class_raster_tape_tool_ac084816a03f5f9184acadb1f706ae418}} 
\index{RasterTapeTool@{RasterTapeTool}!interpolateRect@{interpolateRect}}
\index{interpolateRect@{interpolateRect}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{interpolateRect()}{interpolateRect()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRectD}} Raster\+Tape\+Tool\+::interpolate\+Rect (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{r1,  }\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{r2,  }\item[{double}]{t }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00292                                                                               \{}
\DoxyCodeLine{00293     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_rect_t}{TRectD}}(r1.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} + (r2.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} -\/ r1.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}) * t, r1.y0 + (r2.y0 -\/ r1.y0) * t,}
\DoxyCodeLine{00294                   r1.x1 + (r2.x1 -\/ r1.x1) * t, r1.y1 + (r2.y1 -\/ r1.y1) * t);}
\DoxyCodeLine{00295   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_ab708a280c0eff1f9b93bff36dff9211c}\label{class_raster_tape_tool_ab708a280c0eff1f9b93bff36dff9211c}} 
\index{RasterTapeTool@{RasterTapeTool}!leftButtonDoubleClick@{leftButtonDoubleClick}}
\index{leftButtonDoubleClick@{leftButtonDoubleClick}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDoubleClick()}{leftButtonDoubleClick()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::left\+Button\+Double\+Click (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00620                                                             \{}
\DoxyCodeLine{00621     \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}}(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}));}
\DoxyCodeLine{00622     \textcolor{keywordflow}{if} (m\_closeType.getValue() == POLYLINE\_CLOSE \&\& ti) \{}
\DoxyCodeLine{00623       \mbox{\hyperlink{class_raster_tape_tool_a6277cebb53c962e46b5c73b1b2fa19e4}{closePolyline}}(pos);}
\DoxyCodeLine{00624 }
\DoxyCodeLine{00625       std::vector<TThickPoint> strokePoints;}
\DoxyCodeLine{00626       \textcolor{keywordflow}{for} (UINT i = 0; i < m\_polyline.size() -\/ 1; i++) \{}
\DoxyCodeLine{00627         strokePoints.push\_back(\mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(m\_polyline[i], 1));}
\DoxyCodeLine{00628         strokePoints.push\_back(}
\DoxyCodeLine{00629             \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(0.5 * (m\_polyline[i] + m\_polyline[i + 1]), 1));}
\DoxyCodeLine{00630       \}}
\DoxyCodeLine{00631       strokePoints.push\_back(\mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(m\_polyline.back(), 1));}
\DoxyCodeLine{00632       m\_polyline.clear();}
\DoxyCodeLine{00633       m\_stroke = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}(strokePoints);}
\DoxyCodeLine{00634       assert(m\_stroke-\/>\mbox{\hyperlink{class_t_stroke_ace861e064b925c5d41a6d7381ae6ada5}{getPoint}}(0) == m\_stroke-\/>\mbox{\hyperlink{class_t_stroke_ace861e064b925c5d41a6d7381ae6ada5}{getPoint}}(1));}
\DoxyCodeLine{00635       \textcolor{keywordflow}{if} (m\_multi.getValue())}
\DoxyCodeLine{00636         multiAutocloseRegion(m\_stroke, e);}
\DoxyCodeLine{00637       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00638         applyAutoclose(ti, \mbox{\hyperlink{class_t_rect_t}{TRectD}}(), m\_stroke);}
\DoxyCodeLine{00639       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00640     \}}
\DoxyCodeLine{00641     \textcolor{keywordflow}{if} (m\_stroke) \{}
\DoxyCodeLine{00642       \textcolor{keyword}{delete} m\_stroke;}
\DoxyCodeLine{00643       m\_stroke = 0;}
\DoxyCodeLine{00644     \}}
\DoxyCodeLine{00645   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_a856ea0da3252e5c8a595023c89304ba5}\label{class_raster_tape_tool_a856ea0da3252e5c8a595023c89304ba5}} 
\index{RasterTapeTool@{RasterTapeTool}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00570                                                                         \{}
\DoxyCodeLine{00571     \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}}(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}));}
\DoxyCodeLine{00572     \textcolor{keywordflow}{if} (!ti) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00573 }
\DoxyCodeLine{00574     \textcolor{keywordflow}{if} (m\_closeType.getValue() == RECT\_CLOSE) \{}
\DoxyCodeLine{00575       m\_selecting        = \textcolor{keyword}{true};}
\DoxyCodeLine{00576       m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} = pos.x;}
\DoxyCodeLine{00577       m\_selectingRect.y0 = pos.y;}
\DoxyCodeLine{00578       m\_selectingRect.x1 = pos.x + 1;}
\DoxyCodeLine{00579       m\_selectingRect.y1 = pos.y + 1;}
\DoxyCodeLine{00580       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00581     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_closeType.getValue() == FREEHAND\_CLOSE) \{}
\DoxyCodeLine{00582       \mbox{\hyperlink{class_raster_tape_tool_afe1dee22684e38ff7e7d644f3484e67e}{startFreehand}}(pos);}
\DoxyCodeLine{00583       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00584     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_closeType.getValue() == POLYLINE\_CLOSE) \{}
\DoxyCodeLine{00585       \mbox{\hyperlink{class_raster_tape_tool_a46d53c325cbfa3918ac20eaac2944134}{addPointPolyline}}(pos);}
\DoxyCodeLine{00586       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00587     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_closeType.getValue() == NORMAL\_CLOSE) \{}
\DoxyCodeLine{00588       \textcolor{keywordflow}{if} (m\_multi.getValue()) \{}
\DoxyCodeLine{00589         \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{00590         \textcolor{keywordflow}{if} (m\_firstFrameSelected) \{}
\DoxyCodeLine{00591           multiApplyAutoclose(m\_firstFrameId, getFrameId());}
\DoxyCodeLine{00592           \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00593           \textcolor{keywordflow}{if} (m\_isXsheetCell) \{}
\DoxyCodeLine{00594             app-\/>getCurrentColumn()-\/>setColumnIndex(m\_currCell.first);}
\DoxyCodeLine{00595             app-\/>getCurrentFrame()-\/>setFrame(m\_currCell.second);}
\DoxyCodeLine{00596           \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00597             app-\/>getCurrentFrame()-\/>setFid(m\_veryFirstFrameId);}
\DoxyCodeLine{00598           resetMulti();}
\DoxyCodeLine{00599         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00600           m\_isXsheetCell = app-\/>getCurrentFrame()-\/>isEditingScene();}
\DoxyCodeLine{00601           \textcolor{comment}{// if (m\_isXsheetCell)}}
\DoxyCodeLine{00602           m\_currCell = std::pair<int, int>(\mbox{\hyperlink{class_t_tool_a7214525a3ae0cdcb0a0393e4dc4d3bf5}{getColumnIndex}}(), \mbox{\hyperlink{class_t_tool_a85025fe6544609814a1672ded5847874}{getFrame}}());}
\DoxyCodeLine{00603           m\_firstFrameSelected = \textcolor{keyword}{true};}
\DoxyCodeLine{00604           m\_firstPoint         = pos;}
\DoxyCodeLine{00605         \}}
\DoxyCodeLine{00606         \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00607         \textcolor{keywordflow}{return};}
\DoxyCodeLine{00608       \}}
\DoxyCodeLine{00609 }
\DoxyCodeLine{00610       m\_selecting = \textcolor{keyword}{false};}
\DoxyCodeLine{00611       applyAutoclose(ti);}
\DoxyCodeLine{00612       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00613       \mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}();}
\DoxyCodeLine{00614     \}}
\DoxyCodeLine{00615   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_ae96dc4c8b9afacc4434d231eebf33d3c}\label{class_raster_tape_tool_ae96dc4c8b9afacc4434d231eebf33d3c}} 
\index{RasterTapeTool@{RasterTapeTool}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00195                                                                          \{}
\DoxyCodeLine{00196     \textcolor{keywordflow}{if} (m\_closeType.getValue() == RECT\_CLOSE) \{}
\DoxyCodeLine{00197       \textcolor{keywordflow}{if} (!m\_selecting) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00198       m\_selectingRect.x1 = pos.x;}
\DoxyCodeLine{00199       m\_selectingRect.y1 = pos.y;}
\DoxyCodeLine{00200       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00201     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_closeType.getValue() == FREEHAND\_CLOSE) \{}
\DoxyCodeLine{00202       \mbox{\hyperlink{class_raster_tape_tool_aee5a45ce8730477f54ec3e5c95dbfc21}{freehandDrag}}(pos);}
\DoxyCodeLine{00203       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00204     \}}
\DoxyCodeLine{00205   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_a3ab5a4ee68d94fac17a3a8bbc6c2d26a}\label{class_raster_tape_tool_a3ab5a4ee68d94fac17a3a8bbc6c2d26a}} 
\index{RasterTapeTool@{RasterTapeTool}!leftButtonUp@{leftButtonUp}}
\index{leftButtonUp@{leftButtonUp}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{leftButtonUp()}{leftButtonUp()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::left\+Button\+Up (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00384                                                                        \{}
\DoxyCodeLine{00385     \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}}(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}));}
\DoxyCodeLine{00386     \textcolor{keywordflow}{if} (!ti) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00387 }
\DoxyCodeLine{00388     \textcolor{comment}{/*-\/-\/ Rectの座標の向きを揃える -\/-\/*/}}
\DoxyCodeLine{00389     \textcolor{keywordflow}{if} (m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} > m\_selectingRect.x1)}
\DoxyCodeLine{00390       std::swap(m\_selectingRect.x1, m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}});}
\DoxyCodeLine{00391     \textcolor{keywordflow}{if} (m\_selectingRect.y0 > m\_selectingRect.y1)}
\DoxyCodeLine{00392       std::swap(m\_selectingRect.y1, m\_selectingRect.y0);}
\DoxyCodeLine{00393 }
\DoxyCodeLine{00394     \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{00395 }
\DoxyCodeLine{00396     m\_selecting = \textcolor{keyword}{false};}
\DoxyCodeLine{00397     \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} ras;}
\DoxyCodeLine{00398     \textcolor{keywordflow}{if} (m\_closeType.getValue() == RECT\_CLOSE) \{}
\DoxyCodeLine{00399       \textcolor{keywordflow}{if} (m\_multi.getValue()) \{}
\DoxyCodeLine{00400         \textcolor{keywordflow}{if} (m\_firstFrameSelected) \{}
\DoxyCodeLine{00401           multiApplyAutoclose(m\_firstFrameId, getFrameId(), m\_firstRect,}
\DoxyCodeLine{00402                               m\_selectingRect);}
\DoxyCodeLine{00403           \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}(m\_selectingRect.enlarge(2));}
\DoxyCodeLine{00404           \textcolor{keywordflow}{if} (e.isShiftPressed()) \{}
\DoxyCodeLine{00405             m\_firstRect    = m\_selectingRect;}
\DoxyCodeLine{00406             m\_firstFrameId = getFrameId();}
\DoxyCodeLine{00407           \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00408             \textcolor{keywordflow}{if} (m\_isXsheetCell) \{}
\DoxyCodeLine{00409               app-\/>getCurrentColumn()-\/>setColumnIndex(m\_currCell.first);}
\DoxyCodeLine{00410               app-\/>getCurrentFrame()-\/>setFrame(m\_currCell.second);}
\DoxyCodeLine{00411             \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00412               app-\/>getCurrentFrame()-\/>setFid(m\_veryFirstFrameId);}
\DoxyCodeLine{00413             resetMulti();}
\DoxyCodeLine{00414           \}}
\DoxyCodeLine{00415         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00416           m\_isXsheetCell = app-\/>getCurrentFrame()-\/>isEditingScene();}
\DoxyCodeLine{00417           \textcolor{comment}{// if (m\_isXsheetCell)}}
\DoxyCodeLine{00418           m\_currCell = std::pair<int, int>(\mbox{\hyperlink{class_t_tool_a7214525a3ae0cdcb0a0393e4dc4d3bf5}{getColumnIndex}}(), this-\/>\mbox{\hyperlink{class_t_tool_a85025fe6544609814a1672ded5847874}{getFrame}}());}
\DoxyCodeLine{00419         \}}
\DoxyCodeLine{00420         \textcolor{keywordflow}{return};}
\DoxyCodeLine{00421       \}}
\DoxyCodeLine{00422 }
\DoxyCodeLine{00423       \textcolor{comment}{/*-\/-\/ AutoCloseが実行されたか判定する -\/-\/*/}}
\DoxyCodeLine{00424       \textcolor{keywordflow}{if} (!applyAutoclose(ti, m\_selectingRect)) \{}
\DoxyCodeLine{00425         \textcolor{keywordflow}{if} (m\_stroke) \{}
\DoxyCodeLine{00426           \textcolor{keyword}{delete} m\_stroke;}
\DoxyCodeLine{00427           m\_stroke = 0;}
\DoxyCodeLine{00428         \}}
\DoxyCodeLine{00429         \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00430         \textcolor{keywordflow}{return};}
\DoxyCodeLine{00431       \}}
\DoxyCodeLine{00432 }
\DoxyCodeLine{00433       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00434       \mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}();}
\DoxyCodeLine{00435     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_closeType.getValue() == FREEHAND\_CLOSE) \{}
\DoxyCodeLine{00436       \mbox{\hyperlink{class_raster_tape_tool_aad9549a688488704df194d5c760c0331}{closeFreehand}}(pos);}
\DoxyCodeLine{00437       \textcolor{keywordflow}{if} (m\_multi.getValue())}
\DoxyCodeLine{00438         multiAutocloseRegion(m\_stroke, e);}
\DoxyCodeLine{00439       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00440         applyAutoclose(ti, \mbox{\hyperlink{class_t_rect_t}{TRectD}}(), m\_stroke);}
\DoxyCodeLine{00441       m\_track.\mbox{\hyperlink{class_stroke_generator_a4a78460714a37e461296d169715ba460}{clear}}();}
\DoxyCodeLine{00442       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00443     \}}
\DoxyCodeLine{00444     \textcolor{keywordflow}{if} (m\_stroke) \{}
\DoxyCodeLine{00445       \textcolor{keyword}{delete} m\_stroke;}
\DoxyCodeLine{00446       m\_stroke = 0;}
\DoxyCodeLine{00447     \}}
\DoxyCodeLine{00448   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_a98f1d7cf190166cf6b979821c30e864b}\label{class_raster_tape_tool_a98f1d7cf190166cf6b979821c30e864b}} 
\index{RasterTapeTool@{RasterTapeTool}!mouseMove@{mouseMove}}
\index{mouseMove@{mouseMove}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{mouseMove()}{mouseMove()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::mouse\+Move (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00649                                                                     \{}
\DoxyCodeLine{00650     \textcolor{keywordflow}{if} (m\_closeType.getValue() == POLYLINE\_CLOSE) \{}
\DoxyCodeLine{00651       m\_mousePosition = pos;}
\DoxyCodeLine{00652       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00653     \}}
\DoxyCodeLine{00654   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_a203b6cb97326a4076a8bc8f0c43950b7}\label{class_raster_tape_tool_a203b6cb97326a4076a8bc8f0c43950b7}} 
\index{RasterTapeTool@{RasterTapeTool}!multiApplyAutoclose@{multiApplyAutoclose}}
\index{multiApplyAutoclose@{multiApplyAutoclose}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{multiApplyAutoclose()}{multiApplyAutoclose()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::multi\+Apply\+Autoclose (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}}}]{first\+Fid,  }\item[{\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}}}]{last\+Fid,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}}}]{first\+Rect,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}}}]{last\+Rect,  }\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{first\+Stroke = {\ttfamily 0},  }\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{last\+Stroke = {\ttfamily 0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00301                                                                               \{}
\DoxyCodeLine{00302     \textcolor{keywordtype}{bool} backward = \textcolor{keyword}{false};}
\DoxyCodeLine{00303     \textcolor{keywordflow}{if} (firstFid > lastFid) \{}
\DoxyCodeLine{00304       std::swap(firstFid, lastFid);}
\DoxyCodeLine{00305       backward = \textcolor{keyword}{true};}
\DoxyCodeLine{00306     \}}
\DoxyCodeLine{00307     assert(firstFid <= lastFid);}
\DoxyCodeLine{00308     std::vector<TFrameId> allFids;}
\DoxyCodeLine{00309     m\_level-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{getFids}}(allFids);}
\DoxyCodeLine{00310 }
\DoxyCodeLine{00311     std::vector<TFrameId>::iterator i0 = allFids.begin();}
\DoxyCodeLine{00312     \textcolor{keywordflow}{while} (i0 != allFids.end() \&\& *i0 < firstFid) i0++;}
\DoxyCodeLine{00313     \textcolor{keywordflow}{if} (i0 == allFids.end()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00314     std::vector<TFrameId>::iterator i1 = i0;}
\DoxyCodeLine{00315     \textcolor{keywordflow}{while} (i1 != allFids.end() \&\& *i1 <= lastFid) i1++;}
\DoxyCodeLine{00316     assert(i0 < i1);}
\DoxyCodeLine{00317     std::vector<TFrameId> fids(i0, i1);}
\DoxyCodeLine{00318     \textcolor{keywordtype}{int} m = fids.size();}
\DoxyCodeLine{00319     assert(m > 0);}
\DoxyCodeLine{00320 }
\DoxyCodeLine{00321     \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} firstImage;}
\DoxyCodeLine{00322     \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} lastImage;}
\DoxyCodeLine{00323     \textcolor{keywordflow}{if} ((m\_closeType.getValue() == FREEHAND\_CLOSE ||}
\DoxyCodeLine{00324          m\_closeType.getValue() == POLYLINE\_CLOSE) \&\&}
\DoxyCodeLine{00325         firstStroke \&\& lastStroke) \{}
\DoxyCodeLine{00326       \mbox{\hyperlink{class_t_stroke}{TStroke}} *first = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}(*firstStroke);}
\DoxyCodeLine{00327       \mbox{\hyperlink{class_t_stroke}{TStroke}} *last  = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}(*lastStroke);}
\DoxyCodeLine{00328       firstImage     = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_vector_image}{TVectorImage}}();}
\DoxyCodeLine{00329       lastImage      = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_vector_image}{TVectorImage}}();}
\DoxyCodeLine{00330       firstImage-\/>addStroke(first);}
\DoxyCodeLine{00331       lastImage-\/>addStroke(last);}
\DoxyCodeLine{00332     \}}
\DoxyCodeLine{00333 }
\DoxyCodeLine{00334     TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{00335     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m; ++i) \{}
\DoxyCodeLine{00336       \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid     = fids[i];}
\DoxyCodeLine{00337       \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} img = (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}})m\_level-\/>getFrame(fid, \textcolor{keyword}{true});}
\DoxyCodeLine{00338       \textcolor{keywordflow}{if} (!img) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00339       \textcolor{keywordtype}{double} t = m > 1 ? (double)i / (\textcolor{keywordtype}{double})(m -\/ 1) : 0.5;}
\DoxyCodeLine{00340       \textcolor{keywordflow}{if} (m\_closeType.getValue() == RECT\_CLOSE)}
\DoxyCodeLine{00341         applyAutoclose(img, interpolateRect(firstRect, lastRect, t));}
\DoxyCodeLine{00342       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((m\_closeType.getValue() == FREEHAND\_CLOSE ||}
\DoxyCodeLine{00343                 m\_closeType.getValue() == POLYLINE\_CLOSE) \&\&}
\DoxyCodeLine{00344                firstStroke \&\& lastStroke)}
\DoxyCodeLine{00345         doClose(t, img, firstImage, lastImage);}
\DoxyCodeLine{00346       m\_level-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a61fc160a558f50d75be87c6fae066d57}{setDirtyFlag}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00347     \}}
\DoxyCodeLine{00348     TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{00349 }
\DoxyCodeLine{00350     TTool::getApplication()-\/>getCurrentXsheet()-\/>notifyXsheetChanged();}
\DoxyCodeLine{00351 }
\DoxyCodeLine{00352     \textcolor{comment}{//      TNotifier::instance()-\/>notify(TLevelChange());}}
\DoxyCodeLine{00353     \textcolor{comment}{//      TNotifier::instance()-\/>notify(TStageChange());}}
\DoxyCodeLine{00354   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_ae773f2bb4dd2d9cd4d1b2697029268ec}\label{class_raster_tape_tool_ae773f2bb4dd2d9cd4d1b2697029268ec}} 
\index{RasterTapeTool@{RasterTapeTool}!multiApplyAutoclose@{multiApplyAutoclose}}
\index{multiApplyAutoclose@{multiApplyAutoclose}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{multiApplyAutoclose()}{multiApplyAutoclose()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::multi\+Apply\+Autoclose (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}}}]{first\+Frame\+Id,  }\item[{\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}}}]{last\+Frame\+Id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00358                                                                         \{}
\DoxyCodeLine{00359     \textcolor{keywordtype}{int} r0 = firstFrameId.getNumber();}
\DoxyCodeLine{00360     \textcolor{keywordtype}{int} r1 = lastFrameId.getNumber();}
\DoxyCodeLine{00361 }
\DoxyCodeLine{00362     \textcolor{keywordflow}{if} (r0 > r1) \{}
\DoxyCodeLine{00363       std::swap(r0, r1);}
\DoxyCodeLine{00364       std::swap(firstFrameId, lastFrameId);}
\DoxyCodeLine{00365     \}}
\DoxyCodeLine{00366     \textcolor{keywordflow}{if} ((r1 -\/ r0) < 2) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00367 }
\DoxyCodeLine{00368     TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{00369     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = r0; i <= r1; ++i) \{}
\DoxyCodeLine{00370       \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid(i);}
\DoxyCodeLine{00371       \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img = m\_level-\/>getFrame(fid, \textcolor{keyword}{true});}
\DoxyCodeLine{00372       applyAutoclose(img);}
\DoxyCodeLine{00373     \}}
\DoxyCodeLine{00374     TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{00375 }
\DoxyCodeLine{00376     TTool::getApplication()-\/>getCurrentXsheet()-\/>notifyXsheetChanged();}
\DoxyCodeLine{00377 }
\DoxyCodeLine{00378     \textcolor{comment}{//      TNotifier::instance()-\/>notify(TLevelChange());}}
\DoxyCodeLine{00379     \textcolor{comment}{//      TNotifier::instance()-\/>notify(TStageChange());}}
\DoxyCodeLine{00380   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_a3c3bbe26e521ffbe8aa8ffb5c76eb1dd}\label{class_raster_tape_tool_a3c3bbe26e521ffbe8aa8ffb5c76eb1dd}} 
\index{RasterTapeTool@{RasterTapeTool}!multiAutocloseRegion@{multiAutocloseRegion}}
\index{multiAutocloseRegion@{multiAutocloseRegion}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{multiAutocloseRegion()}{multiAutocloseRegion()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::multi\+Autoclose\+Region (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00795                                                                    \{}
\DoxyCodeLine{00796     \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{00797     \textcolor{keywordflow}{if} (m\_firstStroke) \{}
\DoxyCodeLine{00798       multiApplyAutoclose(m\_firstFrameId, getFrameId(), \mbox{\hyperlink{class_t_rect_t}{TRectD}}(), \mbox{\hyperlink{class_t_rect_t}{TRectD}}(),}
\DoxyCodeLine{00799                           m\_firstStroke, stroke);}
\DoxyCodeLine{00800       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00801       \textcolor{keywordflow}{if} (e.isShiftPressed()) \{}
\DoxyCodeLine{00802         \textcolor{keyword}{delete} m\_firstStroke;}
\DoxyCodeLine{00803         m\_firstStroke  = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}(*stroke);}
\DoxyCodeLine{00804         m\_firstFrameId = getFrameId();}
\DoxyCodeLine{00805       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00806         \textcolor{keywordflow}{if} (m\_isXsheetCell) \{}
\DoxyCodeLine{00807           app-\/>getCurrentColumn()-\/>setColumnIndex(m\_currCell.first);}
\DoxyCodeLine{00808           app-\/>getCurrentFrame()-\/>setFrame(m\_currCell.second);}
\DoxyCodeLine{00809         \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00810           app-\/>getCurrentFrame()-\/>setFid(m\_veryFirstFrameId);}
\DoxyCodeLine{00811         resetMulti();}
\DoxyCodeLine{00812       \}}
\DoxyCodeLine{00813     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00814       m\_isXsheetCell = app-\/>getCurrentFrame()-\/>isEditingScene();}
\DoxyCodeLine{00815       \textcolor{comment}{// if (m\_isXsheetCell)}}
\DoxyCodeLine{00816       m\_currCell    = std::pair<int, int>(\mbox{\hyperlink{class_t_tool_a7214525a3ae0cdcb0a0393e4dc4d3bf5}{getColumnIndex}}(), \mbox{\hyperlink{class_t_tool_a85025fe6544609814a1672ded5847874}{getFrame}}());}
\DoxyCodeLine{00817       m\_firstStroke = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}(*stroke);}
\DoxyCodeLine{00818     \}}
\DoxyCodeLine{00819     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00820   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_a6611fdb7f2c73476edbe5e96f070ced2}\label{class_raster_tape_tool_a6611fdb7f2c73476edbe5e96f070ced2}} 
\index{RasterTapeTool@{RasterTapeTool}!onActivate@{onActivate}}
\index{onActivate@{onActivate}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{onActivate()}{onActivate()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::on\+Activate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Callback invoked whenever the tool activates. 



Reimplemented from \mbox{\hyperlink{class_t_tool_ac286a2681633b4db6106596b4f54e53b}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00668                              \{}
\DoxyCodeLine{00669     \textcolor{keywordflow}{if} (m\_firstTime) \{}
\DoxyCodeLine{00670       m\_closeType.setValue(::to\_wstring(AutocloseVectorType.getValue()));}
\DoxyCodeLine{00671       m\_distance.setValue(AutocloseDistance);}
\DoxyCodeLine{00672       m\_angle.setValue(AutocloseAngle);}
\DoxyCodeLine{00673       m\_opacity.setValue(AutocloseOpacity);}
\DoxyCodeLine{00674       m\_multi.setValue(AutocloseRange ? 1 : 0);}
\DoxyCodeLine{00675       m\_firstTime = \textcolor{keyword}{false};}
\DoxyCodeLine{00676     \}}
\DoxyCodeLine{00677     \textcolor{comment}{//          getApplication()-\/>editImage();}}
\DoxyCodeLine{00678     resetMulti();}
\DoxyCodeLine{00679   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_a4e770b41368501df4d30c1da1d88cc40}\label{class_raster_tape_tool_a4e770b41368501df4d30c1da1d88cc40}} 
\index{RasterTapeTool@{RasterTapeTool}!onDeactivate@{onDeactivate}}
\index{onDeactivate@{onDeactivate}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{onDeactivate()}{onDeactivate()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::on\+Deactivate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for tool deactivation, includes tool switch. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a00fee58728c1e12fb50846f47d7e9f5e}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00683 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_a9db93b1a6cc5285aa030d1fff8b30618}\label{class_raster_tape_tool_a9db93b1a6cc5285aa030d1fff8b30618}} 
\index{RasterTapeTool@{RasterTapeTool}!onEnter@{onEnter}}
\index{onEnter@{onEnter}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{onEnter()}{onEnter()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::on\+Enter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for the mouse entering the viewer area. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a3e775cfcd05aa3c35048b11fa40ab3e4}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00658                           \{}
\DoxyCodeLine{00659     \textcolor{comment}{//      getApplication()-\/>editImage();}}
\DoxyCodeLine{00660   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_a6b6a61367c64725a37960f384b8675ab}\label{class_raster_tape_tool_a6b6a61367c64725a37960f384b8675ab}} 
\index{RasterTapeTool@{RasterTapeTool}!onImageChanged@{onImageChanged}}
\index{onImageChanged@{onImageChanged}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{onImageChanged()}{onImageChanged()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::on\+Image\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Notifies changes in the image in use. 



Reimplemented from \mbox{\hyperlink{class_t_tool_aaf1e021290e74c1b085e4b095668e1ed}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00542                                  \{}
\DoxyCodeLine{00543     \textcolor{keywordflow}{if} (!m\_multi.getValue()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00544     \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{00545     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *xshl   = 0;}
\DoxyCodeLine{00546     \textcolor{keywordflow}{if} (app-\/>getCurrentLevel()-\/>getLevel())}
\DoxyCodeLine{00547       xshl = app-\/>getCurrentLevel()-\/>getSimpleLevel();}
\DoxyCodeLine{00548 }
\DoxyCodeLine{00549     \textcolor{keywordflow}{if} (!xshl || m\_level.getPointer() != xshl ||}
\DoxyCodeLine{00550         (m\_closeType.getValue() == RECT\_CLOSE \&\& m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) ||}
\DoxyCodeLine{00551         ((m\_closeType.getValue() == FREEHAND\_CLOSE ||}
\DoxyCodeLine{00552           m\_closeType.getValue() == POLYLINE\_CLOSE) \&\&}
\DoxyCodeLine{00553          !m\_firstStroke))}
\DoxyCodeLine{00554       resetMulti();}
\DoxyCodeLine{00555     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_firstFrameId == getFrameId())}
\DoxyCodeLine{00556       m\_firstFrameSelected = \textcolor{keyword}{false};  \textcolor{comment}{// nel caso sono passato allo stato 1 e}}
\DoxyCodeLine{00557                                      \textcolor{comment}{// torno all'immagine iniziale, torno allo}}
\DoxyCodeLine{00558                                      \textcolor{comment}{// stato iniziale}}
\DoxyCodeLine{00559     \textcolor{keywordflow}{else} \{                           \textcolor{comment}{// cambio stato.}}
\DoxyCodeLine{00560       m\_firstFrameSelected = \textcolor{keyword}{true};}
\DoxyCodeLine{00561       \textcolor{keywordflow}{if} (m\_closeType.getValue() == RECT\_CLOSE) \{}
\DoxyCodeLine{00562         assert(!m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}());}
\DoxyCodeLine{00563         m\_firstRect = m\_selectingRect;}
\DoxyCodeLine{00564       \}}
\DoxyCodeLine{00565     \}}
\DoxyCodeLine{00566   \}}

\end{DoxyCode}


References \mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{TRect\+T$<$ T $>$\+::is\+Empty()}}.

\mbox{\Hypertarget{class_raster_tape_tool_a6145e6d7ea245d3acd23827c1d3c150e}\label{class_raster_tape_tool_a6145e6d7ea245d3acd23827c1d3c150e}} 
\index{RasterTapeTool@{RasterTapeTool}!onPropertyChanged@{onPropertyChanged}}
\index{onPropertyChanged@{onPropertyChanged}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{onPropertyChanged()}{onPropertyChanged()}}
{\footnotesize\ttfamily bool Raster\+Tape\+Tool\+::on\+Property\+Changed (\begin{DoxyParamCaption}\item[{std\+::string}]{property\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

\begin{DoxyVerb} Does the tasks associated to changes in \p propertyName and returns \p
\end{DoxyVerb}
 true; Does the tasks associated to changes in {\ttfamily property\+Name} and returns {\ttfamily true}. 

Reimplemented from \mbox{\hyperlink{class_t_tool_a06694e0586f807c34b18e16341aa9ee2}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00496                                                           \{}
\DoxyCodeLine{00497     \textcolor{keywordflow}{if} (propertyName == m\_closeType.getName()) \{}
\DoxyCodeLine{00498       AutocloseVectorType = ::to\_string(m\_closeType.getValue());}
\DoxyCodeLine{00499       resetMulti();}
\DoxyCodeLine{00500     \}}
\DoxyCodeLine{00501 }
\DoxyCodeLine{00502     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == m\_distance.getName())}
\DoxyCodeLine{00503       AutocloseDistance = m\_distance.getValue();}
\DoxyCodeLine{00504 }
\DoxyCodeLine{00505     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == m\_angle.getName())}
\DoxyCodeLine{00506       AutocloseAngle = m\_angle.getValue();}
\DoxyCodeLine{00507 }
\DoxyCodeLine{00508     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == m\_inkIndex.getName()) \{}
\DoxyCodeLine{00509     \}}
\DoxyCodeLine{00510 }
\DoxyCodeLine{00511     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == m\_opacity.getName())}
\DoxyCodeLine{00512       AutocloseOpacity = m\_opacity.getValue();}
\DoxyCodeLine{00513 }
\DoxyCodeLine{00514     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == m\_multi.getName()) \{}
\DoxyCodeLine{00515       AutocloseRange = (int)((m\_multi.getValue()));}
\DoxyCodeLine{00516       resetMulti();}
\DoxyCodeLine{00517     \}}
\DoxyCodeLine{00518 }
\DoxyCodeLine{00519     \textcolor{keywordflow}{if} (ToonzCheck::instance()-\/>getChecks() \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876a780c15982eceeb7f1e912a5d55029cef}{ToonzCheck::eAutoclose}})}
\DoxyCodeLine{00520       \mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}();}
\DoxyCodeLine{00521 }
\DoxyCodeLine{00522     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00523   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00048}{Toonz\+Check\+::e\+Autoclose}}, and \mbox{\hyperlink{l00609}{TTool\+::notify\+Image\+Changed()}}.

\mbox{\Hypertarget{class_raster_tape_tool_a3561ef8e2bf51ecab7b01dd3bc9d0c81}\label{class_raster_tape_tool_a3561ef8e2bf51ecab7b01dd3bc9d0c81}} 
\index{RasterTapeTool@{RasterTapeTool}!resetMulti@{resetMulti}}
\index{resetMulti@{resetMulti}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{resetMulti()}{resetMulti()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::reset\+Multi (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00527                     \{}
\DoxyCodeLine{00528     m\_firstFrameSelected = \textcolor{keyword}{false};}
\DoxyCodeLine{00529     m\_firstRect.empty();}
\DoxyCodeLine{00530     m\_firstPoint = \mbox{\hyperlink{class_t_point_t}{TPointD}}();}
\DoxyCodeLine{00531     m\_selectingRect.empty();}
\DoxyCodeLine{00532     \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{00533     m\_level                 = app-\/>getCurrentLevel()-\/>getLevel()}
\DoxyCodeLine{00534                   ? app-\/>getCurrentLevel()-\/>getSimpleLevel()}
\DoxyCodeLine{00535                   : 0;}
\DoxyCodeLine{00536     m\_firstFrameId = m\_veryFirstFrameId = getFrameId();}
\DoxyCodeLine{00537     m\_firstStroke                       = 0;}
\DoxyCodeLine{00538   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_raster_tape_tool_afe1dee22684e38ff7e7d644f3484e67e}\label{class_raster_tape_tool_afe1dee22684e38ff7e7d644f3484e67e}} 
\index{RasterTapeTool@{RasterTapeTool}!startFreehand@{startFreehand}}
\index{startFreehand@{startFreehand}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{startFreehand()}{startFreehand()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::start\+Freehand (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Viene aggiunto {\bfseries{pos}} a {\bfseries{m\+\_\+track}} e disegnato il primo pezzetto del lazzo. Viene inizializzato {\bfseries{m\+\_\+first\+Pos}} 
\begin{DoxyCode}{0}
\DoxyCodeLine{00707                                          \{}
\DoxyCodeLine{00708     m\_track.\mbox{\hyperlink{class_stroke_generator_a4a78460714a37e461296d169715ba460}{clear}}();}
\DoxyCodeLine{00709     m\_firstPos        = pos;}
\DoxyCodeLine{00710     \textcolor{keywordtype}{double} pixelSize2 = getPixelSize() * getPixelSize();}
\DoxyCodeLine{00711     m\_track.\mbox{\hyperlink{class_stroke_generator_a6b8f7f919bde3cf7695c9c58980c9ba3}{add}}(\mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(pos, m\_thick), pixelSize2);}
\DoxyCodeLine{00712   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00029}{Stroke\+Generator\+::add()}}, and \mbox{\hyperlink{l00014}{Stroke\+Generator\+::clear()}}.

\mbox{\Hypertarget{class_raster_tape_tool_a1ce03fffd02ae882ce563514bd0a3cb0}\label{class_raster_tape_tool_a1ce03fffd02ae882ce563514bd0a3cb0}} 
\index{RasterTapeTool@{RasterTapeTool}!updateTranslation@{updateTranslation}}
\index{updateTranslation@{updateTranslation}!RasterTapeTool@{RasterTapeTool}}
\doxysubsubsection{\texorpdfstring{updateTranslation()}{updateTranslation()}}
{\footnotesize\ttfamily void Raster\+Tape\+Tool\+::update\+Translation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00178                                     \{}
\DoxyCodeLine{00179     m\_closeType.setQStringName(tr(\textcolor{stringliteral}{"{}Type:"{}}));}
\DoxyCodeLine{00180     m\_closeType.setItemUIName(NORMAL\_CLOSE, tr(\textcolor{stringliteral}{"{}Normal"{}}));}
\DoxyCodeLine{00181     m\_closeType.setItemUIName(RECT\_CLOSE, tr(\textcolor{stringliteral}{"{}Rectangular"{}}));}
\DoxyCodeLine{00182     m\_closeType.setItemUIName(FREEHAND\_CLOSE, tr(\textcolor{stringliteral}{"{}Freehand"{}}));}
\DoxyCodeLine{00183     m\_closeType.setItemUIName(POLYLINE\_CLOSE, tr(\textcolor{stringliteral}{"{}Polyline"{}}));}
\DoxyCodeLine{00184 }
\DoxyCodeLine{00185     m\_distance.setQStringName(tr(\textcolor{stringliteral}{"{}Distance:"{}}));}
\DoxyCodeLine{00186     m\_inkIndex.setQStringName(tr(\textcolor{stringliteral}{"{}Style Index:"{}}));}
\DoxyCodeLine{00187     m\_inkIndex.setValue(tr(\textcolor{stringliteral}{"{}current"{}}).toStdWString());}
\DoxyCodeLine{00188     m\_opacity.setQStringName(tr(\textcolor{stringliteral}{"{}Opacity:"{}}));}
\DoxyCodeLine{00189     m\_multi.setQStringName(tr(\textcolor{stringliteral}{"{}Frame Range"{}}));}
\DoxyCodeLine{00190     m\_angle.setQStringName(tr(\textcolor{stringliteral}{"{}Angle:"{}}));}
\DoxyCodeLine{00191   \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/rastertapetool.\+cpp\end{DoxyCompactItemize}
