\hypertarget{class_room}{}\doxysection{Room Class Reference}
\label{class_room}\index{Room@{Room}}
Inheritance diagram for Room\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_room}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_room_afa507de760e12180ffe2b4efa3cc0197}{Room}} (QWidget $\ast$parent=0, Qt\+::\+WFlags flags=0)
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_room_a7350b8e0c9dae10a34d942649945b170}{get\+Path}} () const
\item 
void \mbox{\hyperlink{class_room_a32fbae52b0df0667548dc618eaf001cd}{set\+Path}} (\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} path)
\item 
QString \mbox{\hyperlink{class_room_abb7b9f5a0e826c0b811654ae9b6cddb0}{get\+Name}} () const
\item 
void \mbox{\hyperlink{class_room_a8c0638bd1644b415b2186535829b558b}{set\+Name}} (QString name)
\item 
void \mbox{\hyperlink{class_room_ad795aa64d503519ba0777e3f1d81e54c}{save}} ()
\item 
void \mbox{\hyperlink{class_room_a3e55ca962629fc2a9dd95f21094562e6}{load}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp)
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_room_afa507de760e12180ffe2b4efa3cc0197}\label{class_room_afa507de760e12180ffe2b4efa3cc0197}} 
\index{Room@{Room}!Room@{Room}}
\index{Room@{Room}!Room@{Room}}
\doxysubsubsection{\texorpdfstring{Room()}{Room()}}
{\footnotesize\ttfamily Room\+::\+Room (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent = {\ttfamily 0},  }\item[{Qt\+::\+WFlags}]{flags = {\ttfamily 0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00039       : \mbox{\hyperlink{class_t_main_window}{TMainWindow}}(parent, flags) \{}
\DoxyCodeLine{00040   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_room_a67d5da09983cc53097807fd43ba5481a}\label{class_room_a67d5da09983cc53097807fd43ba5481a}} 
\index{Room@{Room}!````~Room@{$\sim$Room}}
\index{````~Room@{$\sim$Room}!Room@{Room}}
\doxysubsubsection{\texorpdfstring{$\sim$Room()}{~Room()}}
{\footnotesize\ttfamily Room\+::$\sim$\+Room (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00042 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_room_abb7b9f5a0e826c0b811654ae9b6cddb0}\label{class_room_abb7b9f5a0e826c0b811654ae9b6cddb0}} 
\index{Room@{Room}!getName@{getName}}
\index{getName@{getName}!Room@{Room}}
\doxysubsubsection{\texorpdfstring{getName()}{getName()}}
{\footnotesize\ttfamily QString Room\+::get\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00047 \{ \textcolor{keywordflow}{return} m\_name; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_room_a7350b8e0c9dae10a34d942649945b170}\label{class_room_a7350b8e0c9dae10a34d942649945b170}} 
\index{Room@{Room}!getPath@{getPath}}
\index{getPath@{getPath}!Room@{Room}}
\doxysubsubsection{\texorpdfstring{getPath()}{getPath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Room\+::get\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00044 \{ \textcolor{keywordflow}{return} m\_path; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_room_a3e55ca962629fc2a9dd95f21094562e6}\label{class_room_a3e55ca962629fc2a9dd95f21094562e6}} 
\index{Room@{Room}!load@{load}}
\index{load@{load}!Room@{Room}}
\doxysubsubsection{\texorpdfstring{load()}{load()}}
{\footnotesize\ttfamily void Room\+::load (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00282                                    \{}
\DoxyCodeLine{00283   QSettings settings(toQString(fp), QSettings::IniFormat);}
\DoxyCodeLine{00284 }
\DoxyCodeLine{00285   setPath(fp);}
\DoxyCodeLine{00286 }
\DoxyCodeLine{00287   \mbox{\hyperlink{class_dock_layout}{DockLayout}} *layout = dockLayout();}
\DoxyCodeLine{00288 }
\DoxyCodeLine{00289   settings.beginGroup(\textcolor{stringliteral}{"{}room"{}});}
\DoxyCodeLine{00290   QStringList itemsList = settings.childGroups();}
\DoxyCodeLine{00291 }
\DoxyCodeLine{00292   std::vector<QRect> geometries;}
\DoxyCodeLine{00293   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00294   \textcolor{keywordflow}{for} (i = 0; i < itemsList.size(); i++) \{}
\DoxyCodeLine{00295     \textcolor{comment}{// Panel i}}
\DoxyCodeLine{00296     \textcolor{comment}{// NOTE: Panels have to be retrieved in the precise order they were saved.}}
\DoxyCodeLine{00297     \textcolor{comment}{// settings.beginGroup(itemsList[i]);  //NO! itemsList has lexicographical}}
\DoxyCodeLine{00298     \textcolor{comment}{// ordering!!}}
\DoxyCodeLine{00299     settings.beginGroup(\textcolor{stringliteral}{"{}pane\_"{}} + QString::number(i));}
\DoxyCodeLine{00300 }
\DoxyCodeLine{00301     \mbox{\hyperlink{class_t_panel}{TPanel}} *pane = 0;}
\DoxyCodeLine{00302     QString paneObjectName;}
\DoxyCodeLine{00303 }
\DoxyCodeLine{00304     \textcolor{comment}{// Retrieve panel name}}
\DoxyCodeLine{00305     QVariant name = settings.value(\textcolor{stringliteral}{"{}name"{}});}
\DoxyCodeLine{00306     \textcolor{keywordflow}{if} (name.canConvert(QVariant::String)) \{}
\DoxyCodeLine{00307       \textcolor{comment}{// Allocate panel}}
\DoxyCodeLine{00308       paneObjectName          = name.toString();}
\DoxyCodeLine{00309       std::string paneStrName = paneObjectName.toStdString();}
\DoxyCodeLine{00310       pane = TPanelFactory::createPanel(\textcolor{keyword}{this}, paneObjectName);}
\DoxyCodeLine{00311       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_save_load_q_settings}{SaveLoadQSettings}} *persistent =}
\DoxyCodeLine{00312               \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_save_load_q_settings}{SaveLoadQSettings}} *\textcolor{keyword}{>}(pane-\/>widget()))}
\DoxyCodeLine{00313         persistent-\/>load(settings);}
\DoxyCodeLine{00314     \}}
\DoxyCodeLine{00315 }
\DoxyCodeLine{00316     \textcolor{keywordflow}{if} (!pane) \{}
\DoxyCodeLine{00317       \textcolor{comment}{// Allocate a message panel}}
\DoxyCodeLine{00318       \mbox{\hyperlink{class_message_panel}{MessagePanel}} *message = \textcolor{keyword}{new} \mbox{\hyperlink{class_message_panel}{MessagePanel}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00319       message-\/>setWindowTitle(name.toString());}
\DoxyCodeLine{00320       message-\/>setMessage(}
\DoxyCodeLine{00321           \textcolor{stringliteral}{"{}This panel is not supported by the currently set license!"{}});}
\DoxyCodeLine{00322 }
\DoxyCodeLine{00323       pane = message;}
\DoxyCodeLine{00324       pane-\/>setPanelType(paneObjectName.toStdString());}
\DoxyCodeLine{00325       pane-\/>setObjectName(paneObjectName);}
\DoxyCodeLine{00326     \}}
\DoxyCodeLine{00327 }
\DoxyCodeLine{00328     pane-\/>setObjectName(paneObjectName);}
\DoxyCodeLine{00329 }
\DoxyCodeLine{00330     \textcolor{comment}{// Add panel to room}}
\DoxyCodeLine{00331     \mbox{\hyperlink{class_t_main_window_a5bd7a251e7bca80111d0d9bd90943015}{addDockWidget}}(pane);}
\DoxyCodeLine{00332 }
\DoxyCodeLine{00333     \textcolor{comment}{// Store its geometry}}
\DoxyCodeLine{00334     geometries.push\_back(settings.value(\textcolor{stringliteral}{"{}geometry"{}}).toRect());}
\DoxyCodeLine{00335 }
\DoxyCodeLine{00336     \textcolor{comment}{// Restore view type if present}}
\DoxyCodeLine{00337     \textcolor{keywordflow}{if} (settings.contains(\textcolor{stringliteral}{"{}viewtype"{}}))}
\DoxyCodeLine{00338       pane-\/>setViewType(settings.value(\textcolor{stringliteral}{"{}viewtype"{}}).toInt());}
\DoxyCodeLine{00339 }
\DoxyCodeLine{00340     \textcolor{comment}{// Restore flipbook pool indices}}
\DoxyCodeLine{00341     \textcolor{keywordflow}{if} (paneObjectName == \textcolor{stringliteral}{"{}FlipBook"{}}) \{}
\DoxyCodeLine{00342       \textcolor{keywordtype}{int} index = settings.value(\textcolor{stringliteral}{"{}index"{}}).toInt();}
\DoxyCodeLine{00343       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_flip_book}{FlipBook}} *\textcolor{keyword}{>}(pane-\/>widget())-\/>setPoolIndex(index);}
\DoxyCodeLine{00344     \}}
\DoxyCodeLine{00345 }
\DoxyCodeLine{00346     settings.endGroup();}
\DoxyCodeLine{00347   \}}
\DoxyCodeLine{00348 }
\DoxyCodeLine{00349   \textcolor{comment}{// resolve resize events here to avoid unwanted minimize of floating viewer}}
\DoxyCodeLine{00350   qApp-\/>processEvents();}
\DoxyCodeLine{00351 }
\DoxyCodeLine{00352   DockLayout::State state(geometries, settings.value(\textcolor{stringliteral}{"{}hierarchy"{}}).toString());}
\DoxyCodeLine{00353 }
\DoxyCodeLine{00354   layout-\/>\mbox{\hyperlink{class_dock_layout_a8203490f8ec20cfe0fb1fb66d986553d}{restoreState}}(state);}
\DoxyCodeLine{00355 }
\DoxyCodeLine{00356   setName(settings.value(\textcolor{stringliteral}{"{}name"{}}).toString());}
\DoxyCodeLine{00357 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_room_ad795aa64d503519ba0777e3f1d81e54c}\label{class_room_ad795aa64d503519ba0777e3f1d81e54c}} 
\index{Room@{Room}!save@{save}}
\index{save@{save}!Room@{Room}}
\doxysubsubsection{\texorpdfstring{save()}{save()}}
{\footnotesize\ttfamily void Room\+::save (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00241                 \{}
\DoxyCodeLine{00242   \mbox{\hyperlink{class_dock_layout}{DockLayout}} *layout = dockLayout();}
\DoxyCodeLine{00243 }
\DoxyCodeLine{00244   \textcolor{comment}{// Now save layout state}}
\DoxyCodeLine{00245   DockLayout::State state        = layout-\/>\mbox{\hyperlink{class_dock_layout_a43bacb88156d890692a1cf7440654d4e}{saveState}}();}
\DoxyCodeLine{00246   std::vector<QRect> \&geometries = state.first;}
\DoxyCodeLine{00247 }
\DoxyCodeLine{00248   QSettings settings(toQString(getPath()), QSettings::IniFormat);}
\DoxyCodeLine{00249   settings.remove(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00250 }
\DoxyCodeLine{00251   settings.beginGroup(\textcolor{stringliteral}{"{}room"{}});}
\DoxyCodeLine{00252 }
\DoxyCodeLine{00253   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00254   \textcolor{keywordflow}{for} (i = 0; i < layout-\/>count(); ++i) \{}
\DoxyCodeLine{00255     settings.beginGroup(\textcolor{stringliteral}{"{}pane\_"{}} + QString::number(i));}
\DoxyCodeLine{00256     \mbox{\hyperlink{class_t_panel}{TPanel}} *pane = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_t_panel}{TPanel}} *\textcolor{keyword}{>}(layout-\/>itemAt(i)-\/>widget());}
\DoxyCodeLine{00257     settings.setValue(\textcolor{stringliteral}{"{}name"{}}, pane-\/>objectName());}
\DoxyCodeLine{00258     settings.setValue(\textcolor{stringliteral}{"{}geometry"{}}, geometries[i]);  \textcolor{comment}{// Use passed geometry}}
\DoxyCodeLine{00259     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_save_load_q_settings}{SaveLoadQSettings}} *persistent =}
\DoxyCodeLine{00260             \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_save_load_q_settings}{SaveLoadQSettings}} *\textcolor{keyword}{>}(pane-\/>widget()))}
\DoxyCodeLine{00261       persistent-\/>save(settings);}
\DoxyCodeLine{00262     \textcolor{keywordflow}{if} (pane-\/>getViewType() != -\/1)}
\DoxyCodeLine{00263       \textcolor{comment}{// If panel has different viewtypes, store current one}}
\DoxyCodeLine{00264       settings.setValue(\textcolor{stringliteral}{"{}viewtype"{}}, pane-\/>getViewType());}
\DoxyCodeLine{00265     \textcolor{keywordflow}{if} (pane-\/>objectName() == \textcolor{stringliteral}{"{}FlipBook"{}}) \{}
\DoxyCodeLine{00266       \textcolor{comment}{// Store flipbook's identification number}}
\DoxyCodeLine{00267       \mbox{\hyperlink{class_flip_book}{FlipBook}} *flip = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_flip_book}{FlipBook}} *\textcolor{keyword}{>}(pane-\/>widget());}
\DoxyCodeLine{00268       settings.setValue(\textcolor{stringliteral}{"{}index"{}}, flip-\/>getPoolIndex());}
\DoxyCodeLine{00269     \}}
\DoxyCodeLine{00270     settings.endGroup();}
\DoxyCodeLine{00271   \}}
\DoxyCodeLine{00272 }
\DoxyCodeLine{00273   \textcolor{comment}{// Adding hierarchy string}}
\DoxyCodeLine{00274   settings.setValue(\textcolor{stringliteral}{"{}hierarchy"{}}, state.second);}
\DoxyCodeLine{00275   settings.setValue(\textcolor{stringliteral}{"{}name"{}}, QVariant(QString(m\_name)));}
\DoxyCodeLine{00276 }
\DoxyCodeLine{00277   settings.endGroup();}
\DoxyCodeLine{00278 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_room_a8c0638bd1644b415b2186535829b558b}\label{class_room_a8c0638bd1644b415b2186535829b558b}} 
\index{Room@{Room}!setName@{setName}}
\index{setName@{setName}!Room@{Room}}
\doxysubsubsection{\texorpdfstring{setName()}{setName()}}
{\footnotesize\ttfamily void Room\+::set\+Name (\begin{DoxyParamCaption}\item[{QString}]{name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00048 \{ m\_name = name; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_room_a32fbae52b0df0667548dc618eaf001cd}\label{class_room_a32fbae52b0df0667548dc618eaf001cd}} 
\index{Room@{Room}!setPath@{setPath}}
\index{setPath@{setPath}!Room@{Room}}
\doxysubsubsection{\texorpdfstring{setPath()}{setPath()}}
{\footnotesize\ttfamily void Room\+::set\+Path (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_file_path}{TFile\+Path}}}]{path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00045 \{ m\_path = path; \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/mainwindow.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/mainwindow.\+cpp\end{DoxyCompactItemize}
