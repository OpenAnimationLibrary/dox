\hypertarget{class_texture_style_chooser_page}{}\doxysection{Texture\+Style\+Chooser\+Page Class Reference}
\label{class_texture_style_chooser_page}\index{TextureStyleChooserPage@{TextureStyleChooserPage}}
Inheritance diagram for Texture\+Style\+Chooser\+Page\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4.000000cm]{class_texture_style_chooser_page}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_texture_style_chooser_page_a8c66e4ad1ccd49659b3c70c05ffda31b}{Texture\+Style\+Chooser\+Page}} (QWidget $\ast$parent=0)
\item 
bool \mbox{\hyperlink{class_texture_style_chooser_page_a1b57c55dd0da87fbe5346ae84d126ac9}{load\+If\+Needed}} () override
\item 
int \mbox{\hyperlink{class_texture_style_chooser_page_a336c3f9b25778b803e9b0c36b64a5171}{get\+Chip\+Count}} () const override
\item 
void \mbox{\hyperlink{class_texture_style_chooser_page_a828ae70657bef878b8324be0aeadd0e9}{draw\+Chip}} (QPainter \&p, QRect rect, int index) override
\item 
void \mbox{\hyperlink{class_texture_style_chooser_page_a61fd70e52404c74ae212d4325bdc0103}{on\+Select}} (int index) override
\item 
bool \mbox{\hyperlink{class_texture_style_chooser_page_ab603ceaee92e21880aa6e381a9c7ffc6}{event}} (QEvent $\ast$e) override
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{class_texture_style_chooser_page_acfa650b332a332879f50de6b3b9a04ee}{load\+Texture}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&fp)
\item 
static void \mbox{\hyperlink{class_texture_style_chooser_page_a4822193ce63acaa09857457a5b3782be}{load\+Items}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_texture_style_chooser_page_a8c66e4ad1ccd49659b3c70c05ffda31b}\label{class_texture_style_chooser_page_a8c66e4ad1ccd49659b3c70c05ffda31b}} 
\index{TextureStyleChooserPage@{TextureStyleChooserPage}!TextureStyleChooserPage@{TextureStyleChooserPage}}
\index{TextureStyleChooserPage@{TextureStyleChooserPage}!TextureStyleChooserPage@{TextureStyleChooserPage}}
\doxysubsubsection{\texorpdfstring{TextureStyleChooserPage()}{TextureStyleChooserPage()}}
{\footnotesize\ttfamily Texture\+Style\+Chooser\+Page\+::\+Texture\+Style\+Chooser\+Page (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent = {\ttfamily 0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02372 : \mbox{\hyperlink{class_style_editor_g_u_i_1_1_style_chooser_page}{StyleChooserPage}}(parent) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_texture_style_chooser_page_a828ae70657bef878b8324be0aeadd0e9}\label{class_texture_style_chooser_page_a828ae70657bef878b8324be0aeadd0e9}} 
\index{TextureStyleChooserPage@{TextureStyleChooserPage}!drawChip@{drawChip}}
\index{drawChip@{drawChip}!TextureStyleChooserPage@{TextureStyleChooserPage}}
\doxysubsubsection{\texorpdfstring{drawChip()}{drawChip()}}
{\footnotesize\ttfamily void Texture\+Style\+Chooser\+Page\+::draw\+Chip (\begin{DoxyParamCaption}\item[{QPainter \&}]{p,  }\item[{QRect}]{rect,  }\item[{int}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_style_editor_g_u_i_1_1_style_chooser_page}{Style\+Editor\+GUI\+::\+Style\+Chooser\+Page}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02388                                                              \{}
\DoxyCodeLine{02389     assert(0 <= index \&\& index < getChipCount());}
\DoxyCodeLine{02390     p.drawImage(rect, rasterToQImage(m\_textures[index].m\_raster));}
\DoxyCodeLine{02391   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_texture_style_chooser_page_ab603ceaee92e21880aa6e381a9c7ffc6}\label{class_texture_style_chooser_page_ab603ceaee92e21880aa6e381a9c7ffc6}} 
\index{TextureStyleChooserPage@{TextureStyleChooserPage}!event@{event}}
\index{event@{event}!TextureStyleChooserPage@{TextureStyleChooserPage}}
\doxysubsubsection{\texorpdfstring{event()}{event()}}
{\footnotesize\ttfamily bool Texture\+Style\+Chooser\+Page\+::event (\begin{DoxyParamCaption}\item[{QEvent $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02479                                              \{}
\DoxyCodeLine{02480   \textcolor{keywordflow}{if} (e-\/>type() == QEvent::ToolTip) \{}
\DoxyCodeLine{02481     QHelpEvent *helpEvent = \textcolor{keyword}{dynamic\_cast<}QHelpEvent *\textcolor{keyword}{>}(e);}
\DoxyCodeLine{02482     QString toolTip;}
\DoxyCodeLine{02483     QPoint pos = helpEvent-\/>pos();}
\DoxyCodeLine{02484     \textcolor{keywordtype}{int} index  = posToIndex(pos);}
\DoxyCodeLine{02485     \textcolor{keywordflow}{if} (index >= 0 \&\& index < (\textcolor{keywordtype}{int})m\_textures.size()) \{}
\DoxyCodeLine{02486       toolTip = m\_textures[index].m\_name;}
\DoxyCodeLine{02487       QToolTip::showText(}
\DoxyCodeLine{02488           helpEvent-\/>globalPos(),}
\DoxyCodeLine{02489           toolTip != QString()}
\DoxyCodeLine{02490               ? toolTip}
\DoxyCodeLine{02491               : QObject::tr(\textcolor{stringliteral}{"{}Custom Texture"{}}, \textcolor{stringliteral}{"{}TextureStyleChooserPage"{}}));}
\DoxyCodeLine{02492     \}}
\DoxyCodeLine{02493     e-\/>accept();}
\DoxyCodeLine{02494   \}}
\DoxyCodeLine{02495   \textcolor{keywordflow}{return} StyleChooserPage::event(e);}
\DoxyCodeLine{02496 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_texture_style_chooser_page_a336c3f9b25778b803e9b0c36b64a5171}\label{class_texture_style_chooser_page_a336c3f9b25778b803e9b0c36b64a5171}} 
\index{TextureStyleChooserPage@{TextureStyleChooserPage}!getChipCount@{getChipCount}}
\index{getChipCount@{getChipCount}!TextureStyleChooserPage@{TextureStyleChooserPage}}
\doxysubsubsection{\texorpdfstring{getChipCount()}{getChipCount()}}
{\footnotesize\ttfamily int Texture\+Style\+Chooser\+Page\+::get\+Chip\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_style_editor_g_u_i_1_1_style_chooser_page}{Style\+Editor\+GUI\+::\+Style\+Chooser\+Page}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02383 \{ \textcolor{keywordflow}{return} m\_textures.size(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_texture_style_chooser_page_a1b57c55dd0da87fbe5346ae84d126ac9}\label{class_texture_style_chooser_page_a1b57c55dd0da87fbe5346ae84d126ac9}} 
\index{TextureStyleChooserPage@{TextureStyleChooserPage}!loadIfNeeded@{loadIfNeeded}}
\index{loadIfNeeded@{loadIfNeeded}!TextureStyleChooserPage@{TextureStyleChooserPage}}
\doxysubsubsection{\texorpdfstring{loadIfNeeded()}{loadIfNeeded()}}
{\footnotesize\ttfamily bool Texture\+Style\+Chooser\+Page\+::load\+If\+Needed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_style_editor_g_u_i_1_1_style_chooser_page}{Style\+Editor\+GUI\+::\+Style\+Chooser\+Page}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02374                                \{}
\DoxyCodeLine{02375     \textcolor{keywordflow}{if} (!m\_loaded) \{}
\DoxyCodeLine{02376       loadItems();}
\DoxyCodeLine{02377       m\_loaded = \textcolor{keyword}{true};}
\DoxyCodeLine{02378       \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{02379     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{02380       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{02381   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_texture_style_chooser_page_a4822193ce63acaa09857457a5b3782be}\label{class_texture_style_chooser_page_a4822193ce63acaa09857457a5b3782be}} 
\index{TextureStyleChooserPage@{TextureStyleChooserPage}!loadItems@{loadItems}}
\index{loadItems@{loadItems}!TextureStyleChooserPage@{TextureStyleChooserPage}}
\doxysubsubsection{\texorpdfstring{loadItems()}{loadItems()}}
{\footnotesize\ttfamily void Texture\+Style\+Chooser\+Page\+::load\+Items (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02444                                         \{}
\DoxyCodeLine{02445   m\_textures.clear();}
\DoxyCodeLine{02446   \textcolor{keywordflow}{if} (getRootPath() == \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02447   \mbox{\hyperlink{class_t_file_path}{TFilePath}} texturePath = getRootPath() + \textcolor{stringliteral}{"{}textures"{}};}
\DoxyCodeLine{02448   TFilePathSet fps;}
\DoxyCodeLine{02449   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{02450     fps = TSystem::readDirectory(texturePath);}
\DoxyCodeLine{02451   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{02452     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02453   \}}
\DoxyCodeLine{02454   \textcolor{keywordflow}{if} (fps.empty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02455   \textcolor{keywordtype}{int} count = 0;}
\DoxyCodeLine{02456   \textcolor{keywordflow}{for} (TFilePathSet::iterator it = fps.begin(); it != fps.end(); it++)}
\DoxyCodeLine{02457     \textcolor{keywordflow}{if} (TFileType::getInfo(*it) == TFileType::RASTER\_IMAGE) \{}
\DoxyCodeLine{02458       \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{02459         loadTexture(*it);}
\DoxyCodeLine{02460         ++count;}
\DoxyCodeLine{02461       \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{02462       \}}
\DoxyCodeLine{02463     \}}
\DoxyCodeLine{02464   loadTexture(\mbox{\hyperlink{class_t_file_path}{TFilePath}}());  \textcolor{comment}{// custom texture}}
\DoxyCodeLine{02465 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_texture_style_chooser_page_acfa650b332a332879f50de6b3b9a04ee}\label{class_texture_style_chooser_page_acfa650b332a332879f50de6b3b9a04ee}} 
\index{TextureStyleChooserPage@{TextureStyleChooserPage}!loadTexture@{loadTexture}}
\index{loadTexture@{loadTexture}!TextureStyleChooserPage@{TextureStyleChooserPage}}
\doxysubsubsection{\texorpdfstring{loadTexture()}{loadTexture()}}
{\footnotesize\ttfamily void Texture\+Style\+Chooser\+Page\+::load\+Texture (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{fp }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{02405                                                              \{}
\DoxyCodeLine{02406   \textcolor{keywordflow}{if} (fp == \mbox{\hyperlink{class_t_file_path}{TFilePath}}()) \{}
\DoxyCodeLine{02407     \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} ras(25, 25);}
\DoxyCodeLine{02408     \mbox{\hyperlink{class_t_texture_style_a2295dffe50c8c112486a0f59403c8554}{TTextureStyle::fillCustomTextureIcon}}(ras);}
\DoxyCodeLine{02409     \textcolor{comment}{// ras-\/>fill(TPixel::Blue);}}
\DoxyCodeLine{02410     \mbox{\hyperlink{struct_texture}{Texture}} customText = \{ras, QString(\textcolor{stringliteral}{"{}"{}})\};}
\DoxyCodeLine{02411 }
\DoxyCodeLine{02412     m\_textures.push\_back(customText);}
\DoxyCodeLine{02413     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02414   \}}
\DoxyCodeLine{02415 }
\DoxyCodeLine{02416   \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} ras;}
\DoxyCodeLine{02417   \mbox{\hyperlink{class_t_image_reader_ade3cafcda8a3e691b08892fb9cb3a97a}{TImageReader::load}}(fp, ras);}
\DoxyCodeLine{02418   \textcolor{keywordflow}{if} (!ras || ras-\/>getLx() < 2 || ras-\/>getLy() < 2) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02419 }
\DoxyCodeLine{02420   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} ras32 = ras;}
\DoxyCodeLine{02421   \textcolor{keywordflow}{if} (!ras32) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02422 }
\DoxyCodeLine{02423   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} d(2, 2);}
\DoxyCodeLine{02424   \textcolor{keywordflow}{while} (d.lx < 256 \&\& d.lx * 2 <= ras32-\/>getLx()) d.lx *= 2;}
\DoxyCodeLine{02425   \textcolor{keywordflow}{while} (d.ly < 256 \&\& d.ly * 2 <= ras32-\/>getLy()) d.ly *= 2;}
\DoxyCodeLine{02426 }
\DoxyCodeLine{02427   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} texture;}
\DoxyCodeLine{02428   \textcolor{keywordflow}{if} (d == ras32-\/>getSize())}
\DoxyCodeLine{02429     texture = ras32;}
\DoxyCodeLine{02430   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02431     texture = \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}(d);}
\DoxyCodeLine{02432     \mbox{\hyperlink{class_t_scale}{TScale}} sc((\textcolor{keywordtype}{double})texture-\/>getLx() / ras32-\/>getLx(),}
\DoxyCodeLine{02433               (\textcolor{keywordtype}{double})texture-\/>getLy() / ras32-\/>getLy());}
\DoxyCodeLine{02434     \mbox{\hyperlink{namespace_t_rop_a5e39bc748039afe42001ba44f2d2a073}{TRop::resample}}(texture, ras32, sc);}
\DoxyCodeLine{02435   \}}
\DoxyCodeLine{02436 }
\DoxyCodeLine{02437   \mbox{\hyperlink{struct_texture}{Texture}} text = \{texture, QString::fromStdWString(fp.getLevelNameW())\};}
\DoxyCodeLine{02438 }
\DoxyCodeLine{02439   m\_textures.push\_back(text);}
\DoxyCodeLine{02440 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_texture_style_chooser_page_a61fd70e52404c74ae212d4325bdc0103}\label{class_texture_style_chooser_page_a61fd70e52404c74ae212d4325bdc0103}} 
\index{TextureStyleChooserPage@{TextureStyleChooserPage}!onSelect@{onSelect}}
\index{onSelect@{onSelect}!TextureStyleChooserPage@{TextureStyleChooserPage}}
\doxysubsubsection{\texorpdfstring{onSelect()}{onSelect()}}
{\footnotesize\ttfamily void Texture\+Style\+Chooser\+Page\+::on\+Select (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_style_editor_g_u_i_1_1_style_chooser_page}{Style\+Editor\+GUI\+::\+Style\+Chooser\+Page}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02469                                                 \{}
\DoxyCodeLine{02470   assert(0 <= index \&\& index < (\textcolor{keywordtype}{int})m\_textures.size());}
\DoxyCodeLine{02471 }
\DoxyCodeLine{02472   \mbox{\hyperlink{class_t_texture_style}{TTextureStyle}} style(m\_textures[index].m\_raster,}
\DoxyCodeLine{02473                       \mbox{\hyperlink{class_t_file_path}{TFilePath}}(m\_textures[index].m\_name.toStdWString()));}
\DoxyCodeLine{02474   emit styleSelected(style);}
\DoxyCodeLine{02475 \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonzqt/styleeditor.\+cpp\end{DoxyCompactItemize}
