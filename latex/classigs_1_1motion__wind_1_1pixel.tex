\hypertarget{classigs_1_1motion__wind_1_1pixel}{}\doxysection{igs\+::motion\+\_\+wind\+::pixel Class Reference}
\label{classigs_1_1motion__wind_1_1pixel}\index{igs::motion\_wind::pixel@{igs::motion\_wind::pixel}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classigs_1_1motion__wind_1_1pixel_a915c8635ab97842bab65491c6af81ec1}{pixel}} (const bool blow\+\_\+dark\+\_\+sw, const bool blow\+\_\+alpha\+\_\+sw, const unsigned long length\+\_\+random\+\_\+seed, const double length\+\_\+min, const double length\+\_\+max, const double length\+\_\+bias, const bool length\+\_\+ref\+\_\+sw, const unsigned long force\+\_\+random\+\_\+seed, const double force\+\_\+min, const double force\+\_\+max, const double force\+\_\+bias, const bool force\+\_\+ref\+\_\+sw, const unsigned long density\+\_\+random\+\_\+seed, const double density\+\_\+min, const double density\+\_\+max, const double density\+\_\+bias, const bool density\+\_\+ref\+\_\+sw)
\item 
int \mbox{\hyperlink{classigs_1_1motion__wind_1_1pixel_a42e7dba50ef2e5d8713626122a93f234}{change}} (const bool key\+\_\+reset\+\_\+sw, const double ref\+\_\+val, const int channels, double $\ast$pixel\+\_\+tgt)
\item 
void \mbox{\hyperlink{classigs_1_1motion__wind_1_1pixel_a73a928ef74db0cb65249725c2a522e23}{clear}} (void)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classigs_1_1motion__wind_1_1pixel_a915c8635ab97842bab65491c6af81ec1}\label{classigs_1_1motion__wind_1_1pixel_a915c8635ab97842bab65491c6af81ec1}} 
\index{igs::motion\_wind::pixel@{igs::motion\_wind::pixel}!pixel@{pixel}}
\index{pixel@{pixel}!igs::motion\_wind::pixel@{igs::motion\_wind::pixel}}
\doxysubsubsection{\texorpdfstring{pixel()}{pixel()}}
{\footnotesize\ttfamily igs\+::motion\+\_\+wind\+::pixel\+::pixel (\begin{DoxyParamCaption}\item[{const bool}]{blow\+\_\+dark\+\_\+sw,  }\item[{const bool}]{blow\+\_\+alpha\+\_\+sw,  }\item[{const unsigned long}]{length\+\_\+random\+\_\+seed,  }\item[{const double}]{length\+\_\+min,  }\item[{const double}]{length\+\_\+max,  }\item[{const double}]{length\+\_\+bias,  }\item[{const bool}]{length\+\_\+ref\+\_\+sw,  }\item[{const unsigned long}]{force\+\_\+random\+\_\+seed,  }\item[{const double}]{force\+\_\+min,  }\item[{const double}]{force\+\_\+max,  }\item[{const double}]{force\+\_\+bias,  }\item[{const bool}]{force\+\_\+ref\+\_\+sw,  }\item[{const unsigned long}]{density\+\_\+random\+\_\+seed,  }\item[{const double}]{density\+\_\+min,  }\item[{const double}]{density\+\_\+max,  }\item[{const double}]{density\+\_\+bias,  }\item[{const bool}]{density\+\_\+ref\+\_\+sw }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00020     : blow\_dark\_sw\_(blow\_dark\_sw)}
\DoxyCodeLine{00021     , blow\_alpha\_sw\_(blow\_alpha\_sw)}
\DoxyCodeLine{00022 }
\DoxyCodeLine{00023     , length\_min\_(length\_min)}
\DoxyCodeLine{00024     , length\_max\_(length\_max)}
\DoxyCodeLine{00025     , length\_bias\_(length\_bias)}
\DoxyCodeLine{00026     , length\_ref\_sw\_(length\_ref\_sw)}
\DoxyCodeLine{00027 }
\DoxyCodeLine{00028     , force\_min\_(force\_min)}
\DoxyCodeLine{00029     , force\_max\_(force\_max)}
\DoxyCodeLine{00030     , force\_bias\_(force\_bias)}
\DoxyCodeLine{00031     , force\_ref\_sw\_(force\_ref\_sw)}
\DoxyCodeLine{00032 }
\DoxyCodeLine{00033     , density\_min\_(density\_min)}
\DoxyCodeLine{00034     , density\_max\_(density\_max)}
\DoxyCodeLine{00035     , density\_bias\_(density\_bias)}
\DoxyCodeLine{00036     , density\_ref\_sw\_(density\_ref\_sw)}
\DoxyCodeLine{00037 }
\DoxyCodeLine{00038     , key\_lightness\_(0)}
\DoxyCodeLine{00039     , table\_len\_(0)}
\DoxyCodeLine{00040     , table\_pos\_(0)}
\DoxyCodeLine{00041     , table\_array\_(0) \{}
\DoxyCodeLine{00042   this-\/>table\_.resize(igs::motion\_wind::table\_size(length\_min, length\_max));}
\DoxyCodeLine{00043   this-\/>length\_random\_.seed(length\_random\_seed);}
\DoxyCodeLine{00044   this-\/>force\_random\_.seed(force\_random\_seed);}
\DoxyCodeLine{00045   this-\/>density\_random\_.seed(density\_random\_seed);}
\DoxyCodeLine{00046 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classigs_1_1motion__wind_1_1pixel_a42e7dba50ef2e5d8713626122a93f234}\label{classigs_1_1motion__wind_1_1pixel_a42e7dba50ef2e5d8713626122a93f234}} 
\index{igs::motion\_wind::pixel@{igs::motion\_wind::pixel}!change@{change}}
\index{change@{change}!igs::motion\_wind::pixel@{igs::motion\_wind::pixel}}
\doxysubsubsection{\texorpdfstring{change()}{change()}}
{\footnotesize\ttfamily int igs\+::motion\+\_\+wind\+::pixel\+::change (\begin{DoxyParamCaption}\item[{const bool}]{key\+\_\+reset\+\_\+sw,  }\item[{const double}]{ref\+\_\+val,  }\item[{const int}]{channels,  }\item[{double $\ast$}]{pixel\+\_\+tgt }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em key\+\_\+reset\+\_\+sw} & $\ast$, const int ref\+\_\+channel , const double $\ast$ref\+\_\+pixel$\ast$$\ast$ \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{00160                                            \{}
\DoxyCodeLine{00161   \textcolor{comment}{/* 指定があるなら白黒反転、}}
\DoxyCodeLine{00162 \textcolor{comment}{  このプログラム内ではすべて明るさで処理する */}}
\DoxyCodeLine{00163   \textcolor{keywordflow}{if} (this-\/>blow\_dark\_sw\_) \{}
\DoxyCodeLine{00164     invert\_pixel\_(channels, pixel\_tgt);}
\DoxyCodeLine{00165   \}}
\DoxyCodeLine{00166 }
\DoxyCodeLine{00167   \textcolor{comment}{/* 現位置の明るさを求める */}}
\DoxyCodeLine{00168   \textcolor{keyword}{const} \textcolor{keywordtype}{double} crnt\_lightness =}
\DoxyCodeLine{00169       get\_lightness\_(channels, pixel\_tgt  \textcolor{comment}{// , this-\/>blow\_dark\_sw\_}}
\DoxyCodeLine{00170                      );}
\DoxyCodeLine{00171 }
\DoxyCodeLine{00172   \textcolor{comment}{/* スキャンラインの始点のではkey pixel値のreset */}}
\DoxyCodeLine{00173   \textcolor{keywordflow}{if} (key\_reset\_sw) \{}
\DoxyCodeLine{00174     this-\/>key\_lightness\_ = crnt\_lightness;}
\DoxyCodeLine{00175     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} ii = 0; ii < channels; ++ii) \{}
\DoxyCodeLine{00176       this-\/>pixel\_key\_[ii] = pixel\_tgt[ii];}
\DoxyCodeLine{00177     \}}
\DoxyCodeLine{00178   \}}
\DoxyCodeLine{00179 }
\DoxyCodeLine{00180   \textcolor{comment}{/* 値がkeyより小さい(山の頂上より小さい)時 */}}
\DoxyCodeLine{00181   \textcolor{keywordflow}{if} (crnt\_lightness < this-\/>key\_lightness\_) \{}
\DoxyCodeLine{00182     \textcolor{comment}{/* 風テーブルがゼロなら}}
\DoxyCodeLine{00183 \textcolor{comment}{    風データを設定し、風テーブルを設定する */}}
\DoxyCodeLine{00184     \textcolor{keywordflow}{if} (0 == this-\/>table\_array\_) \{}
\DoxyCodeLine{00185       \textcolor{keywordtype}{double} length\_min   = this-\/>length\_min\_;}
\DoxyCodeLine{00186       \textcolor{keywordtype}{double} length\_max   = this-\/>length\_max\_;}
\DoxyCodeLine{00187       \textcolor{keywordtype}{double} length\_bias  = this-\/>length\_bias\_;}
\DoxyCodeLine{00188       \textcolor{keywordtype}{double} force\_min    = this-\/>force\_min\_;}
\DoxyCodeLine{00189       \textcolor{keywordtype}{double} force\_max    = this-\/>force\_max\_;}
\DoxyCodeLine{00190       \textcolor{keywordtype}{double} force\_bias   = this-\/>force\_bias\_;}
\DoxyCodeLine{00191       \textcolor{keywordtype}{double} density\_min  = this-\/>density\_min\_;}
\DoxyCodeLine{00192       \textcolor{keywordtype}{double} density\_max  = this-\/>density\_max\_;}
\DoxyCodeLine{00193       \textcolor{keywordtype}{double} density\_bias = this-\/>density\_bias\_;}
\DoxyCodeLine{00194 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{00195             \textcolor{keywordtype}{double} ref\_value;}
\DoxyCodeLine{00196             \textcolor{comment}{/* 画像から強弱を得る */}}
\DoxyCodeLine{00197             \textcolor{keywordflow}{if} (0 != ref\_pixel) \{\textcolor{comment}{/* 参照画像のRGBAから */}}
\DoxyCodeLine{00198                 ref\_value = ref\_pixel[ref\_channel];}
\DoxyCodeLine{00199             \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{/* 自画像から強弱を得る */}}
\DoxyCodeLine{00200                 ref\_value = get\_lightness\_(}
\DoxyCodeLine{00201                     channels, pixel\_tgt);}
\DoxyCodeLine{00202             \}}
\DoxyCodeLine{00203 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00204       \textcolor{keywordtype}{double} ref\_value = ref\_val;}
\DoxyCodeLine{00205       \textcolor{comment}{/* 参照画像から取らないときは自画像から強弱を得る */}}
\DoxyCodeLine{00206       \textcolor{keywordflow}{if} (ref\_value < 0.0) \{}
\DoxyCodeLine{00207         ref\_value = get\_lightness\_(channels, pixel\_tgt);}
\DoxyCodeLine{00208       \}}
\DoxyCodeLine{00209 }
\DoxyCodeLine{00210       \textcolor{keywordflow}{if} (this-\/>length\_ref\_sw\_) \{}
\DoxyCodeLine{00211         length\_min *= ref\_value;}
\DoxyCodeLine{00212         length\_max *= ref\_value;}
\DoxyCodeLine{00213       \}}
\DoxyCodeLine{00214       \textcolor{keywordflow}{if} (this-\/>force\_ref\_sw\_) \{}
\DoxyCodeLine{00215         force\_min *= ref\_value;}
\DoxyCodeLine{00216         force\_max *= ref\_value;}
\DoxyCodeLine{00217       \}}
\DoxyCodeLine{00218       \textcolor{keywordflow}{if} (this-\/>density\_ref\_sw\_) \{}
\DoxyCodeLine{00219         density\_min *= ref\_value;}
\DoxyCodeLine{00220         density\_max *= ref\_value;}
\DoxyCodeLine{00221       \}}
\DoxyCodeLine{00222 }
\DoxyCodeLine{00223       \textcolor{comment}{/* 風データを得る(流れのパターンの更新) */}}
\DoxyCodeLine{00224 \textcolor{comment}{      /***std::cout}}
\DoxyCodeLine{00225 \textcolor{comment}{<< "{}lmin "{} << length\_min << "{}  lmax "{} << length\_max}}
\DoxyCodeLine{00226 \textcolor{comment}{<< "{}\(\backslash\)ncmin "{} << force\_min  << "{}  cmax "{} << force\_max}}
\DoxyCodeLine{00227 \textcolor{comment}{<< "{}\(\backslash\)nhmin "{} << density\_min << "{}  hmax "{} << density\_max}}
\DoxyCodeLine{00228 \textcolor{comment}{<< "{}\(\backslash\)n"{}}}
\DoxyCodeLine{00229 \textcolor{comment}{;***/}}
\DoxyCodeLine{00230       \textcolor{comment}{/* 更新した、風データを、カレントにセットする */}}
\DoxyCodeLine{00231       this-\/>table\_len\_ = igs::motion\_wind::make\_table(}
\DoxyCodeLine{00232           this-\/>table\_, this-\/>length\_random\_, this-\/>force\_random\_,}
\DoxyCodeLine{00233           this-\/>density\_random\_, length\_min, length\_max, length\_bias, force\_min,}
\DoxyCodeLine{00234           force\_max, force\_bias, density\_min, density\_max, density\_bias);}
\DoxyCodeLine{00235       this-\/>table\_array\_ = \&this-\/>table\_.at(0);}
\DoxyCodeLine{00236       this-\/>table\_pos\_   = 1;}
\DoxyCodeLine{00237 \textcolor{comment}{      /***for (int ii=0;ii<this-\/>table\_len\_;++ii) \{}}
\DoxyCodeLine{00238 \textcolor{comment}{std::cout << this-\/>table\_array\_[ii] << "{}\(\backslash\)n"{};}}
\DoxyCodeLine{00239 \textcolor{comment}{\}***/}}
\DoxyCodeLine{00240 }
\DoxyCodeLine{00241       \textcolor{comment}{/* 風の中である。}}
\DoxyCodeLine{00242 \textcolor{comment}{      風の長さは１かもしれない... */}}
\DoxyCodeLine{00243     \}}
\DoxyCodeLine{00244 }
\DoxyCodeLine{00245     \textcolor{comment}{/* 風に影響された値を出力値にいれる */}}
\DoxyCodeLine{00246     \textcolor{keywordflow}{if} (this-\/>table\_pos\_ < this-\/>table\_len\_) \{}
\DoxyCodeLine{00247       \textcolor{comment}{/* 風の計算 */}}
\DoxyCodeLine{00248       blow\_wind\_(channels, this-\/>pixel\_key\_, this-\/>table\_array\_,}
\DoxyCodeLine{00249                  this-\/>table\_pos\_, this-\/>blow\_alpha\_sw\_, pixel\_tgt);}
\DoxyCodeLine{00250       ++this-\/>table\_pos\_;}
\DoxyCodeLine{00251 }
\DoxyCodeLine{00252       \textcolor{comment}{/* 保存すべき値となったので白黒反転を戻す */}}
\DoxyCodeLine{00253       \textcolor{keywordflow}{if} (this-\/>blow\_dark\_sw\_) \{}
\DoxyCodeLine{00254         invert\_pixel\_(channels, pixel\_tgt);}
\DoxyCodeLine{00255       \}}
\DoxyCodeLine{00256 }
\DoxyCodeLine{00257       \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \textcolor{comment}{/* 風ん中 */}}
\DoxyCodeLine{00258     \}}
\DoxyCodeLine{00259   \}}
\DoxyCodeLine{00260 }
\DoxyCodeLine{00261   \textcolor{comment}{/*    ここに来たということは、}}
\DoxyCodeLine{00262 \textcolor{comment}{          風の外である、}}
\DoxyCodeLine{00263 \textcolor{comment}{                  つまり風の影響範囲からはずれたとき、}}
\DoxyCodeLine{00264 \textcolor{comment}{                  つまりtable\_pos\_がtable\_len\_から外れた、}}
\DoxyCodeLine{00265 \textcolor{comment}{          あるいは、}}
\DoxyCodeLine{00266 \textcolor{comment}{          値が等しいかkeyより大きい値のとき、}}
\DoxyCodeLine{00267 \textcolor{comment}{                  つまりcrnt\_lightnessがkey\_lightness\_以上、}}
\DoxyCodeLine{00268 \textcolor{comment}{          なので、現在値をメモリする(keyにいれる)}}
\DoxyCodeLine{00269 \textcolor{comment}{  */}}
\DoxyCodeLine{00270 }
\DoxyCodeLine{00271   this-\/>key\_lightness\_ = crnt\_lightness;}
\DoxyCodeLine{00272   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} ii = 0L; ii < channels; ++ii) \{}
\DoxyCodeLine{00273     this-\/>pixel\_key\_[ii] = pixel\_tgt[ii];}
\DoxyCodeLine{00274   \}}
\DoxyCodeLine{00275 }
\DoxyCodeLine{00276   \textcolor{comment}{/* 風が途切れたので風テーブルをゼロとする */}}
\DoxyCodeLine{00277   this-\/>table\_array\_ = 0;}
\DoxyCodeLine{00278 }
\DoxyCodeLine{00279   \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \textcolor{comment}{/* 風の外 */}}
\DoxyCodeLine{00280 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classigs_1_1motion__wind_1_1pixel_a73a928ef74db0cb65249725c2a522e23}\label{classigs_1_1motion__wind_1_1pixel_a73a928ef74db0cb65249725c2a522e23}} 
\index{igs::motion\_wind::pixel@{igs::motion\_wind::pixel}!clear@{clear}}
\index{clear@{clear}!igs::motion\_wind::pixel@{igs::motion\_wind::pixel}}
\doxysubsubsection{\texorpdfstring{clear()}{clear()}}
{\footnotesize\ttfamily void igs\+::motion\+\_\+wind\+::pixel\+::clear (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00047 \{ this-\/>table\_.clear(); \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/igs\+\_\+motion\+\_\+wind\+\_\+pixel.\+h\item 
E\+:/opentoonz/toonz/sources/stdfx/igs\+\_\+motion\+\_\+wind\+\_\+pixel.\+cpp\end{DoxyCompactItemize}
