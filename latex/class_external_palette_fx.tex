\hypertarget{class_external_palette_fx}{}\doxysection{External\+Palette\+Fx Class Reference}
\label{class_external_palette_fx}\index{ExternalPaletteFx@{ExternalPaletteFx}}
Inheritance diagram for External\+Palette\+Fx\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=6.000000cm]{class_external_palette_fx}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_external_palette_fx_a9e64977c8e0ca57ccc8350e7d1ce2f7b}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
std\+::string \mbox{\hyperlink{class_external_palette_fx_a852f41b2e57b780bd7b0d0bbb9b3cb63}{get\+Alias}} (double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) const override
\item 
void \mbox{\hyperlink{class_external_palette_fx_a0ba8cad2b12692fb0679e7d0ffb68c86}{do\+Dry\+Compute}} (\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{class_external_palette_fx_a907cf9d64db240921ad6561cba470505}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&ri) override
\item 
bool \mbox{\hyperlink{class_external_palette_fx_a283777462b36d464c50cf25f3fc6efff}{allow\+User\+Cache\+On\+Port}} (int port) override
\item 
bool \mbox{\hyperlink{class_external_palette_fx_a886e9ea45539a9a40aad5814606e23cf}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_external_palette_fx_a2f79a209634976801639eac5ef954e1b}\label{class_external_palette_fx_a2f79a209634976801639eac5ef954e1b}} 
\index{ExternalPaletteFx@{ExternalPaletteFx}!ExternalPaletteFx@{ExternalPaletteFx}}
\index{ExternalPaletteFx@{ExternalPaletteFx}!ExternalPaletteFx@{ExternalPaletteFx}}
\doxysubsubsection{\texorpdfstring{ExternalPaletteFx()}{ExternalPaletteFx()}}
{\footnotesize\ttfamily External\+Palette\+Fx\+::\+External\+Palette\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00024   \{}
\DoxyCodeLine{00025     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Source"{}}, m\_input);}
\DoxyCodeLine{00026     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Palette"{}}, m\_expalette);}
\DoxyCodeLine{00027   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_external_palette_fx_a0cc2e625e5648f5fb119db442952cc43}\label{class_external_palette_fx_a0cc2e625e5648f5fb119db442952cc43}} 
\index{ExternalPaletteFx@{ExternalPaletteFx}!````~ExternalPaletteFx@{$\sim$ExternalPaletteFx}}
\index{````~ExternalPaletteFx@{$\sim$ExternalPaletteFx}!ExternalPaletteFx@{ExternalPaletteFx}}
\doxysubsubsection{\texorpdfstring{$\sim$ExternalPaletteFx()}{~ExternalPaletteFx()}}
{\footnotesize\ttfamily External\+Palette\+Fx\+::$\sim$\+External\+Palette\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00029 \{\};}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_external_palette_fx_a283777462b36d464c50cf25f3fc6efff}\label{class_external_palette_fx_a283777462b36d464c50cf25f3fc6efff}} 
\index{ExternalPaletteFx@{ExternalPaletteFx}!allowUserCacheOnPort@{allowUserCacheOnPort}}
\index{allowUserCacheOnPort@{allowUserCacheOnPort}!ExternalPaletteFx@{ExternalPaletteFx}}
\doxysubsubsection{\texorpdfstring{allowUserCacheOnPort()}{allowUserCacheOnPort()}}
{\footnotesize\ttfamily bool External\+Palette\+Fx\+::allow\+User\+Cache\+On\+Port (\begin{DoxyParamCaption}\item[{int}]{port }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00049 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_external_palette_fx_a886e9ea45539a9a40aad5814606e23cf}\label{class_external_palette_fx_a886e9ea45539a9a40aad5814606e23cf}} 
\index{ExternalPaletteFx@{ExternalPaletteFx}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!ExternalPaletteFx@{ExternalPaletteFx}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool External\+Palette\+Fx\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00051                                                                      \{}
\DoxyCodeLine{00052     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00053   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_external_palette_fx_a907cf9d64db240921ad6561cba470505}\label{class_external_palette_fx_a907cf9d64db240921ad6561cba470505}} 
\index{ExternalPaletteFx@{ExternalPaletteFx}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!ExternalPaletteFx@{ExternalPaletteFx}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void External\+Palette\+Fx\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{ri }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00133                                                              \{}
\DoxyCodeLine{00134   \textcolor{keywordflow}{if} (!m\_input.isConnected()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00135 }
\DoxyCodeLine{00136   \textcolor{keywordflow}{if} (m\_expalette.isConnected()) \{}
\DoxyCodeLine{00137     \mbox{\hyperlink{class_t_fx}{TFx}} *fx              = m\_expalette.getFx();}
\DoxyCodeLine{00138     std::string pltAlias = m\_expalette-\/>getAlias(frame, ri);}
\DoxyCodeLine{00139 }
\DoxyCodeLine{00140     \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} palette(getPalette(fx, frame));}
\DoxyCodeLine{00141     \textcolor{keywordflow}{if} (palette \&\& palette-\/>isAnimated()) pltAlias += std::to\_string(frame);}
\DoxyCodeLine{00142 }
\DoxyCodeLine{00143     \mbox{\hyperlink{class_t_render_settings}{TRenderSettings}} ri2(ri);}
\DoxyCodeLine{00144     \mbox{\hyperlink{class_external_palette_fx_render_data}{ExternalPaletteFxRenderData}} *data =}
\DoxyCodeLine{00145         \textcolor{keyword}{new} \mbox{\hyperlink{class_external_palette_fx_render_data}{ExternalPaletteFxRenderData}}(palette, pltAlias);}
\DoxyCodeLine{00146     ri2.m\_data.push\_back(data);}
\DoxyCodeLine{00147     m\_input-\/>compute(tile, frame, ri2);}
\DoxyCodeLine{00148   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00149     m\_input-\/>compute(tile, frame, ri);}
\DoxyCodeLine{00150 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_external_palette_fx_a0ba8cad2b12692fb0679e7d0ffb68c86}\label{class_external_palette_fx_a0ba8cad2b12692fb0679e7d0ffb68c86}} 
\index{ExternalPaletteFx@{ExternalPaletteFx}!doDryCompute@{doDryCompute}}
\index{doDryCompute@{doDryCompute}!ExternalPaletteFx@{ExternalPaletteFx}}
\doxysubsubsection{\texorpdfstring{doDryCompute()}{doDryCompute()}}
{\footnotesize\ttfamily void External\+Palette\+Fx\+::do\+Dry\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Declares the computation scheme of this fx for rendering optimization purposes. This is an important function of the Toonz rendering API, and should be reimplemented with the necessary care. The Toonz rendering process makes use of this function to enact most of the optimization steps about the fx computation, in particular fx caching. A correct implementation of this method should follow these rules\+:  The invocation of child node computations should be faithfully reproduced.  TRaster\+Fx\+::compute and TRaster\+Fx\+::allocate\+And\+Compute calls have to be translated to TRaster\+Fx\+::dry\+Compute calls.  This fx is intended for precomputation stage, so the hard rendering code should be skipped here. By default, this method raises a dry\+Compute call to each input port in increasing order, using the TRaster\+Fx\+::transform method to identify the tiles to be passed on input precomputation. 

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_a47ec31d2d4c3a066cd6744fb8c80edf2}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00109                                                                 \{}
\DoxyCodeLine{00110   \textcolor{keywordflow}{if} (!m\_input.isConnected()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00111 }
\DoxyCodeLine{00112   \textcolor{keywordflow}{if} (m\_expalette.isConnected()) \{}
\DoxyCodeLine{00113     \mbox{\hyperlink{class_t_fx}{TFx}} *fx              = m\_expalette.getFx();}
\DoxyCodeLine{00114     std::string pltAlias = m\_expalette-\/>getAlias(frame, ri);}
\DoxyCodeLine{00115 }
\DoxyCodeLine{00116     \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} palette(getPalette(fx, frame));}
\DoxyCodeLine{00117     \textcolor{keywordflow}{if} (palette \&\& palette-\/>isAnimated()) pltAlias += std::to\_string(frame);}
\DoxyCodeLine{00118 }
\DoxyCodeLine{00119     \mbox{\hyperlink{class_t_render_settings}{TRenderSettings}} ri2(ri);}
\DoxyCodeLine{00120     \mbox{\hyperlink{class_external_palette_fx_render_data}{ExternalPaletteFxRenderData}} *data =}
\DoxyCodeLine{00121         \textcolor{keyword}{new} \mbox{\hyperlink{class_external_palette_fx_render_data}{ExternalPaletteFxRenderData}}(palette, pltAlias);}
\DoxyCodeLine{00122     ri2.m\_data.push\_back(data);}
\DoxyCodeLine{00123     ri2.m\_userCachable = \textcolor{keyword}{false};}
\DoxyCodeLine{00124 }
\DoxyCodeLine{00125     m\_input-\/>dryCompute(rect, frame, ri2);}
\DoxyCodeLine{00126   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00127     m\_input-\/>dryCompute(rect, frame, ri);}
\DoxyCodeLine{00128 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00101}{TRender\+Settings\+::m\+\_\+data}}, and \mbox{\hyperlink{l00139}{TRender\+Settings\+::m\+\_\+user\+Cachable}}.

\mbox{\Hypertarget{class_external_palette_fx_a9e64977c8e0ca57ccc8350e7d1ce2f7b}\label{class_external_palette_fx_a9e64977c8e0ca57ccc8350e7d1ce2f7b}} 
\index{ExternalPaletteFx@{ExternalPaletteFx}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!ExternalPaletteFx@{ExternalPaletteFx}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool External\+Palette\+Fx\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00032                                                        \{}
\DoxyCodeLine{00033     \textcolor{keywordflow}{if} (m\_input.isConnected()) \{}
\DoxyCodeLine{00034       \textcolor{keywordtype}{bool} ret = m\_input-\/>doGetBBox(frame, bBox, info);}
\DoxyCodeLine{00035       \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00036     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00037       bBox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00038       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00039     \}}
\DoxyCodeLine{00040   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_external_palette_fx_a852f41b2e57b780bd7b0d0bbb9b3cb63}\label{class_external_palette_fx_a852f41b2e57b780bd7b0d0bbb9b3cb63}} 
\index{ExternalPaletteFx@{ExternalPaletteFx}!getAlias@{getAlias}}
\index{getAlias@{getAlias}!ExternalPaletteFx@{ExternalPaletteFx}}
\doxysubsubsection{\texorpdfstring{getAlias()}{getAlias()}}
{\footnotesize\ttfamily std\+::string External\+Palette\+Fx\+::get\+Alias (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00094                                                                            \{}
\DoxyCodeLine{00095   std::string alias(TRasterFx::getAlias(frame, info));}
\DoxyCodeLine{00096 }
\DoxyCodeLine{00097   \textcolor{keywordflow}{if} (m\_expalette.isConnected()) \{}
\DoxyCodeLine{00098     \mbox{\hyperlink{class_t_fx}{TFx}} *fx = m\_expalette.getFx();}
\DoxyCodeLine{00099     \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} plt(getPalette(fx, frame));}
\DoxyCodeLine{00100     \textcolor{keywordflow}{if} (plt \&\& plt-\/>isAnimated()) alias += std::to\_string(frame);}
\DoxyCodeLine{00101   \}}
\DoxyCodeLine{00102 }
\DoxyCodeLine{00103   \textcolor{keywordflow}{return} alias;}
\DoxyCodeLine{00104 \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/externalpalettefx.\+cpp\end{DoxyCompactItemize}
