\hypertarget{class_studio_palette}{}\doxysection{Studio\+Palette Class Reference}
\label{class_studio_palette}\index{StudioPalette@{StudioPalette}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_studio_palette_1_1_listener}{Listener}}
\item 
class \mbox{\hyperlink{class_studio_palette_1_1_palette}{Palette}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$ \mbox{\hyperlink{class_studio_palette_a1bb041d91f5ffb21dfeae58388cfc69f}{get\+Palette}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path, bool load\+Ref\+Img=false)
\item 
int \mbox{\hyperlink{class_studio_palette_a8110d408324f84da20feb31ddac580ad}{get\+Children}} (std\+::vector$<$ \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} $>$ \&fps, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&folder\+Path)
\item 
int \mbox{\hyperlink{class_studio_palette_a8b79a157775c7a3a700df9bf66b14107}{get\+Child\+Count}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&folder\+Path)
\item 
bool \mbox{\hyperlink{class_studio_palette_a2e74bd3c318e44f07dc808044e8f89a5}{is\+Folder}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path)
\item 
bool \mbox{\hyperlink{class_studio_palette_ac0abd8b9d65925c21ef7103969bc5b76}{is\+Palette}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path)
\item 
bool \mbox{\hyperlink{class_studio_palette_a56a0a0150764f5a55807241faf181107}{is\+Read\+Only}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path)
\item 
bool \mbox{\hyperlink{class_studio_palette_a9d668ed41c5055737d059f5e8ce8aac3}{is\+Level\+Palette}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path)
\item 
bool \mbox{\hyperlink{class_studio_palette_af3fe1e8513126938d47374426892f8df}{has\+Global\+Name}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path)
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_studio_palette_adfecc02c23af59a2d5fa2076aed6daec}{create\+Folder}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&parent\+Folder\+Path)
\item 
void \mbox{\hyperlink{class_studio_palette_add0092398a8c98d7a95be1f7ff9e1abe}{create\+Folder}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&parent\+Folder\+Path, std\+::wstring name)
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_studio_palette_a86d21d742f86bcd49ca8707a0719fe21}{create\+Palette}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&folder\+Path, std\+::string palette\+Name=\char`\"{}\char`\"{})
\item 
void \mbox{\hyperlink{class_studio_palette_a8066bb4a36e479b67d0ecd8789d5978a}{set\+Palette}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&palette\+Path, const \mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$palette, bool notify\+Palette\+Changed)
\item 
void \mbox{\hyperlink{class_studio_palette_a5c375728757cd3c70b780910daac2987}{delete\+Palette}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&palette\+Path)
\item 
void \mbox{\hyperlink{class_studio_palette_a5867b987fe7dc89288254c4589623775}{delete\+Folder}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&folder\+Path)
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_studio_palette_ab92eef8f0e7c1d58f9ec6cad1028241e}{import\+Palette}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&dst\+Folder, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&src\+Path)
\item 
void \mbox{\hyperlink{class_studio_palette_a0bc3104bf544a836c8790d7bf17a132c}{move\+Palette}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&dst\+Path, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&src\+Path)
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_studio_palette_ac05fe01c2ce1c0f7e9ddbbf821a79035}{get\+Level\+Palettes\+Root}} ()
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_studio_palette_a25cbf9550685ea06d2b207027f184087}{get\+Project\+Palettes\+Root}} ()
\item 
bool \mbox{\hyperlink{class_studio_palette_a8174aad5fff24c6a08849628e35c8ec2}{update\+Linked\+Colors}} (\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$palette)
\item 
void \mbox{\hyperlink{class_studio_palette_a3e61fb5afaab29d333d943a90a6a7135}{set\+Styles\+Global\+Names}} (\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$palette)
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_studio_palette_a81f5a76c954c5fcf533df9b8d88e483c}{get\+Palette\+Path}} (std\+::wstring palette\+Id)
\item 
\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$ \mbox{\hyperlink{class_studio_palette_acbee7325917a622ec2d4668bdb22152c}{get\+Palette}} (std\+::wstring palette\+Id)
\item 
\mbox{\hyperlink{class_t_color_style}{TColor\+Style}} $\ast$ \mbox{\hyperlink{class_studio_palette_a96827fd025cc5cb2023f5f3a204095e9}{get\+Style}} (std\+::wstring style\+Id)
\item 
std\+::pair$<$ \mbox{\hyperlink{class_t_file_path}{TFile\+Path}}, int $>$ \mbox{\hyperlink{class_studio_palette_a42c5a28223dc6ec0b8e1526ad89f7f7e}{get\+Source\+Style}} (\mbox{\hyperlink{class_t_color_style}{TColor\+Style}} $\ast$cs)
\item 
void \mbox{\hyperlink{class_studio_palette_aa0ef44795203ba083d3d86105ec8bfc2}{add\+Listener}} (\mbox{\hyperlink{class_studio_palette_1_1_listener}{Listener}} $\ast$listener)
\item 
void \mbox{\hyperlink{class_studio_palette_a675131289e3de9705b5beb354853f695}{remove\+Listener}} (\mbox{\hyperlink{class_studio_palette_1_1_listener}{Listener}} $\ast$listener)
\item 
void \mbox{\hyperlink{class_studio_palette_aff11070fbb91856cd0d4f2b502842fbb}{notify\+Tree\+Change}} ()
\item 
void \mbox{\hyperlink{class_studio_palette_a81b2ef792827e66cf7d8063a5fb91f97}{notify\+Move}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&dst\+Path, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&src\+Path)
\item 
void \mbox{\hyperlink{class_studio_palette_a3ccb114745cf74b5afaf1e0aa6f1c558}{notify\+Palette\+Change}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&name)
\item 
void \mbox{\hyperlink{class_studio_palette_ac907a1bc64a72ca27e0d367e00364c45}{save}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path, \mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$palette)
\item 
void \mbox{\hyperlink{class_studio_palette_a9ef5c9995e1a6ef4e8852239e9fa2a05}{remove\+Entry}} (const std\+::wstring palette\+Id)
\item 
void \mbox{\hyperlink{class_studio_palette_a43a8e75e24a14844334eb6983de14a9e}{add\+Entry}} (const std\+::wstring palette\+Id, const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_studio_palette}{Studio\+Palette}} $\ast$ \mbox{\hyperlink{class_studio_palette_ae487a7fdf09dc0ac55a76219cb73fb6e}{instance}} ()
\item 
static bool \mbox{\hyperlink{class_studio_palette_aca0d5ee39cd30509447e40cb9f9423a0}{is\+Enabled}} ()
\item 
static void \mbox{\hyperlink{class_studio_palette_a6f356d5e1362bf45ecafdabfcafaa764}{enable}} (bool enabled)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_studio_palette_a6cf78a70a03dc7cd15ef2b16eaa04476}\label{class_studio_palette_a6cf78a70a03dc7cd15ef2b16eaa04476}} 
\index{StudioPalette@{StudioPalette}!````~StudioPalette@{$\sim$StudioPalette}}
\index{````~StudioPalette@{$\sim$StudioPalette}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{$\sim$StudioPalette()}{~StudioPalette()}}
{\footnotesize\ttfamily Studio\+Palette\+::$\sim$\+Studio\+Palette (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00199 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_studio_palette_a43a8e75e24a14844334eb6983de14a9e}\label{class_studio_palette_a43a8e75e24a14844334eb6983de14a9e}} 
\index{StudioPalette@{StudioPalette}!addEntry@{addEntry}}
\index{addEntry@{addEntry}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{addEntry()}{addEntry()}}
{\footnotesize\ttfamily void Studio\+Palette\+::add\+Entry (\begin{DoxyParamCaption}\item[{const std\+::wstring}]{palette\+Id,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00730                                                     \{}
\DoxyCodeLine{00731   \mbox{\hyperlink{class_t_file_path}{TFilePath}} rootFps[2] = \{m\_root, getProjectPalettesRoot()\};}
\DoxyCodeLine{00732   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} rootFp : rootFps) \{}
\DoxyCodeLine{00733     \textcolor{keywordflow}{if} (rootFp.isEmpty()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00734     \textcolor{keywordflow}{if} (!rootFp.isAncestorOf(path)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00735 }
\DoxyCodeLine{00736     \mbox{\hyperlink{class_t_file_path}{TFilePath}} tablePath = rootFp + pathTableFileName;}
\DoxyCodeLine{00737     QSettings tableSettings(QString::fromStdWString(tablePath.getWideString()),}
\DoxyCodeLine{00738                             QSettings::IniFormat);}
\DoxyCodeLine{00739     QString pathValue = (path -\/ rootFp).getQString();}
\DoxyCodeLine{00740     tableSettings.setValue(QString::fromStdWString(paletteId), pathValue);}
\DoxyCodeLine{00741   \}}
\DoxyCodeLine{00742 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_aa0ef44795203ba083d3d86105ec8bfc2}\label{class_studio_palette_aa0ef44795203ba083d3d86105ec8bfc2}} 
\index{StudioPalette@{StudioPalette}!addListener@{addListener}}
\index{addListener@{addListener}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{addListener()}{addListener()}}
{\footnotesize\ttfamily void Studio\+Palette\+::add\+Listener (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_studio_palette_1_1_listener}{Listener}} $\ast$}]{listener }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00671                                                   \{}
\DoxyCodeLine{00672   \textcolor{keywordflow}{if} (std::find(m\_listeners.begin(), m\_listeners.end(), listener) ==}
\DoxyCodeLine{00673       m\_listeners.end())}
\DoxyCodeLine{00674     m\_listeners.push\_back(listener);}
\DoxyCodeLine{00675 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_adfecc02c23af59a2d5fa2076aed6daec}\label{class_studio_palette_adfecc02c23af59a2d5fa2076aed6daec}} 
\index{StudioPalette@{StudioPalette}!createFolder@{createFolder}}
\index{createFolder@{createFolder}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{createFolder()}{createFolder()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Studio\+Palette\+::create\+Folder (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{parent\+Folder\+Path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00367                                                                        \{}
\DoxyCodeLine{00368   \mbox{\hyperlink{class_t_file_path}{TFilePath}} path = makeUniqueName(parentFolderPath + \textcolor{stringliteral}{"{}new folder"{}});}
\DoxyCodeLine{00369   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00370     TSystem::mkDir(path);}
\DoxyCodeLine{00371   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00372     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_file_path}{TFilePath}}();}
\DoxyCodeLine{00373   \}}
\DoxyCodeLine{00374   FolderListenerManager::instance()-\/>notifyFolderChanged(parentFolderPath);}
\DoxyCodeLine{00375   notifyTreeChange();}
\DoxyCodeLine{00376   \textcolor{keywordflow}{return} path;}
\DoxyCodeLine{00377 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_add0092398a8c98d7a95be1f7ff9e1abe}\label{class_studio_palette_add0092398a8c98d7a95be1f7ff9e1abe}} 
\index{StudioPalette@{StudioPalette}!createFolder@{createFolder}}
\index{createFolder@{createFolder}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{createFolder()}{createFolder()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Studio\+Palette\+::create\+Folder (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{parent\+Folder\+Path,  }\item[{std\+::wstring}]{name }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00382                                                   \{}
\DoxyCodeLine{00383   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = parentFolderPath + name;}
\DoxyCodeLine{00384   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(fp).doesExist()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00385   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00386     TSystem::mkDir(fp);}
\DoxyCodeLine{00387   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00388     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00389   \}}
\DoxyCodeLine{00390   FolderListenerManager::instance()-\/>notifyFolderChanged(parentFolderPath);}
\DoxyCodeLine{00391   notifyTreeChange();}
\DoxyCodeLine{00392 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a86d21d742f86bcd49ca8707a0719fe21}\label{class_studio_palette_a86d21d742f86bcd49ca8707a0719fe21}} 
\index{StudioPalette@{StudioPalette}!createPalette@{createPalette}}
\index{createPalette@{createPalette}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{createPalette()}{createPalette()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Studio\+Palette\+::create\+Palette (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{folder\+Path,  }\item[{std\+::string}]{palette\+Name = {\ttfamily \char`\"{}\char`\"{}} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00397                                                        \{}
\DoxyCodeLine{00398   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = 0;}
\DoxyCodeLine{00399   \textcolor{keywordflow}{if} (name == \textcolor{stringliteral}{"{}"{}}) name = \textcolor{stringliteral}{"{}new palette"{}};}
\DoxyCodeLine{00400   palette      = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_palette}{TPalette}}();}
\DoxyCodeLine{00401   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = makeUniqueName(folderPath + (name + \textcolor{stringliteral}{"{}.tpl"{}}));}
\DoxyCodeLine{00402   time\_t ltime;}
\DoxyCodeLine{00403   time(\&ltime);}
\DoxyCodeLine{00404   std::wstring gname = std::to\_wstring(ltime) + L\textcolor{stringliteral}{"{}\_"{}} + std::to\_wstring(rand());}
\DoxyCodeLine{00405   palette-\/>setGlobalName(gname);}
\DoxyCodeLine{00406   setStylesGlobalNames(palette);}
\DoxyCodeLine{00407   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00408     save(fp, palette);}
\DoxyCodeLine{00409   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00410     \textcolor{keyword}{delete} palette;}
\DoxyCodeLine{00411     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00412   \}}
\DoxyCodeLine{00413   \textcolor{keyword}{delete} palette;}
\DoxyCodeLine{00414   notifyTreeChange();}
\DoxyCodeLine{00415   \textcolor{keywordflow}{return} fp;}
\DoxyCodeLine{00416 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a5867b987fe7dc89288254c4589623775}\label{class_studio_palette_a5867b987fe7dc89288254c4589623775}} 
\index{StudioPalette@{StudioPalette}!deleteFolder@{deleteFolder}}
\index{deleteFolder@{deleteFolder}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{deleteFolder()}{deleteFolder()}}
{\footnotesize\ttfamily void Studio\+Palette\+::delete\+Folder (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{folder\+Path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00455                                                       \{}
\DoxyCodeLine{00456   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00457     TSystem::rmDirTree(path);}
\DoxyCodeLine{00458   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00459   \}}
\DoxyCodeLine{00460   notifyTreeChange();}
\DoxyCodeLine{00461 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a5c375728757cd3c70b780910daac2987}\label{class_studio_palette_a5c375728757cd3c70b780910daac2987}} 
\index{StudioPalette@{StudioPalette}!deletePalette@{deletePalette}}
\index{deletePalette@{deletePalette}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{deletePalette()}{deletePalette()}}
{\footnotesize\ttfamily void Studio\+Palette\+::delete\+Palette (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{palette\+Path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00443                                                               \{}
\DoxyCodeLine{00444   assert(palettePath.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tpl"{}});}
\DoxyCodeLine{00445   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00446     TSystem::deleteFile(palettePath);}
\DoxyCodeLine{00447   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00448     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00449   \}}
\DoxyCodeLine{00450   notifyTreeChange();}
\DoxyCodeLine{00451 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a6f356d5e1362bf45ecafdabfcafaa764}\label{class_studio_palette_a6f356d5e1362bf45ecafdabfcafaa764}} 
\index{StudioPalette@{StudioPalette}!enable@{enable}}
\index{enable@{enable}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{enable()}{enable()}}
{\footnotesize\ttfamily void Studio\+Palette\+::enable (\begin{DoxyParamCaption}\item[{bool}]{enabled }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00207                                        \{}
\DoxyCodeLine{00208   assert(studioPaletteHasBeenReferred == \textcolor{keyword}{false});}
\DoxyCodeLine{00209   m\_enabled = enabled;}
\DoxyCodeLine{00210 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a8b79a157775c7a3a700df9bf66b14107}\label{class_studio_palette_a8b79a157775c7a3a700df9bf66b14107}} 
\index{StudioPalette@{StudioPalette}!getChildCount@{getChildCount}}
\index{getChildCount@{getChildCount}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{getChildCount()}{getChildCount()}}
{\footnotesize\ttfamily int Studio\+Palette\+::get\+Child\+Count (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{folder\+Path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00320                                                             \{}
\DoxyCodeLine{00321   TFilePathSet q;}
\DoxyCodeLine{00322   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00323     TSystem::readDirectory(q, folderPath);}
\DoxyCodeLine{00324   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00325   \}}
\DoxyCodeLine{00326   \textcolor{keywordflow}{return} q.size();}
\DoxyCodeLine{00327 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a8110d408324f84da20feb31ddac580ad}\label{class_studio_palette_a8110d408324f84da20feb31ddac580ad}} 
\index{StudioPalette@{StudioPalette}!getChildren@{getChildren}}
\index{getChildren@{getChildren}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{getChildren()}{getChildren()}}
{\footnotesize\ttfamily int Studio\+Palette\+::get\+Children (\begin{DoxyParamCaption}\item[{std\+::vector$<$ \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} $>$ \&}]{fps,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{folder\+Path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00293                                                             \{}
\DoxyCodeLine{00294   TFilePathSet q;}
\DoxyCodeLine{00295   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(folderPath).isDirectory()) \{}
\DoxyCodeLine{00296     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00297       TSystem::readDirectory(q, folderPath, \textcolor{keyword}{false}, \textcolor{keyword}{false});}
\DoxyCodeLine{00298     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00299     \}}
\DoxyCodeLine{00300   \}}
\DoxyCodeLine{00301 }
\DoxyCodeLine{00302   \textcolor{comment}{// put the folders above the palette items}}
\DoxyCodeLine{00303   std::vector<TFilePath> palettes;}
\DoxyCodeLine{00304   \textcolor{keywordflow}{for} (TFilePathSet::iterator i = q.begin(); i != q.end(); ++i) \{}
\DoxyCodeLine{00305     \textcolor{keywordflow}{if} (isFolder(*i))}
\DoxyCodeLine{00306       fps.push\_back(*i);}
\DoxyCodeLine{00307     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (isPalette(*i))}
\DoxyCodeLine{00308       palettes.push\_back(*i);}
\DoxyCodeLine{00309   \}}
\DoxyCodeLine{00310   \textcolor{keywordflow}{if} (!palettes.empty()) \{}
\DoxyCodeLine{00311     fps.reserve(fps.size() + palettes.size());}
\DoxyCodeLine{00312     std::copy(palettes.begin(), palettes.end(), std::back\_inserter(fps));}
\DoxyCodeLine{00313   \}}
\DoxyCodeLine{00314   \textcolor{comment}{//  fps.push\_back(m\_root+"{}butta.tpl"{});}}
\DoxyCodeLine{00315   \textcolor{keywordflow}{return} fps.size();}
\DoxyCodeLine{00316 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_ac05fe01c2ce1c0f7e9ddbbf821a79035}\label{class_studio_palette_ac05fe01c2ce1c0f7e9ddbbf821a79035}} 
\index{StudioPalette@{StudioPalette}!getLevelPalettesRoot@{getLevelPalettesRoot}}
\index{getLevelPalettesRoot@{getLevelPalettesRoot}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{getLevelPalettesRoot()}{getLevelPalettesRoot()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Studio\+Palette\+::get\+Level\+Palettes\+Root (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00223                                               \{}
\DoxyCodeLine{00224   \textcolor{keywordflow}{return} m\_root + \textcolor{stringliteral}{"{}Global Palettes"{}};}
\DoxyCodeLine{00225 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a1bb041d91f5ffb21dfeae58388cfc69f}\label{class_studio_palette_a1bb041d91f5ffb21dfeae58388cfc69f}} 
\index{StudioPalette@{StudioPalette}!getPalette@{getPalette}}
\index{getPalette@{getPalette}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{getPalette()}{getPalette()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$ Studio\+Palette\+::get\+Palette (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path,  }\item[{bool}]{load\+Ref\+Img = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00259                                                          \{}
\DoxyCodeLine{00260   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00261     \textcolor{keywordflow}{if} (path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() != \textcolor{stringliteral}{"{}tpl"{}}) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00262     \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = load(path);}
\DoxyCodeLine{00263     \textcolor{keywordflow}{if} (!palette) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00264     \textcolor{keywordflow}{if} (loadRefImgFlag) loadRefImg(palette, path.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}());}
\DoxyCodeLine{00265     \textcolor{comment}{// palette-\/>addRef(); // ci va??}}
\DoxyCodeLine{00266     \textcolor{keywordflow}{return} palette;}
\DoxyCodeLine{00267   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00268     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00269   \}}
\DoxyCodeLine{00270 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_acbee7325917a622ec2d4668bdb22152c}\label{class_studio_palette_acbee7325917a622ec2d4668bdb22152c}} 
\index{StudioPalette@{StudioPalette}!getPalette@{getPalette}}
\index{getPalette@{getPalette}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{getPalette()}{getPalette()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$ Studio\+Palette\+::get\+Palette (\begin{DoxyParamCaption}\item[{std\+::wstring}]{palette\+Id }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00538                                                         \{}
\DoxyCodeLine{00539   \mbox{\hyperlink{class_t_file_path}{TFilePath}} palettePath = getPalettePath(paletteId);}
\DoxyCodeLine{00540   \textcolor{keywordflow}{if} (palettePath != \mbox{\hyperlink{class_t_file_path}{TFilePath}}())}
\DoxyCodeLine{00541     \textcolor{keywordflow}{return} getPalette(palettePath);}
\DoxyCodeLine{00542   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00543     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00544 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a81f5a76c954c5fcf533df9b8d88e483c}\label{class_studio_palette_a81f5a76c954c5fcf533df9b8d88e483c}} 
\index{StudioPalette@{StudioPalette}!getPalettePath@{getPalettePath}}
\index{getPalettePath@{getPalettePath}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{getPalettePath()}{getPalettePath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Studio\+Palette\+::get\+Palette\+Path (\begin{DoxyParamCaption}\item[{std\+::wstring}]{palette\+Id }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00508                                                             \{}
\DoxyCodeLine{00509   std::map<std::wstring, TFilePath>::iterator it = table.find(paletteId);}
\DoxyCodeLine{00510   \textcolor{keywordflow}{if} (it != table.end()) \textcolor{keywordflow}{return} it-\/>second;}
\DoxyCodeLine{00511   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp;}
\DoxyCodeLine{00512   \textcolor{comment}{// not found in the verified table, then check for the cached table}}
\DoxyCodeLine{00513   it = table\_cached.find(paletteId);}
\DoxyCodeLine{00514   \textcolor{comment}{// found in the cached table}}
\DoxyCodeLine{00515   \textcolor{keywordflow}{if} (it != table\_cached.end()) \{}
\DoxyCodeLine{00516     fp = it-\/>second;}
\DoxyCodeLine{00517     \textcolor{comment}{// verify if cached path is correct}}
\DoxyCodeLine{00518     \textcolor{keywordflow}{if} (fp.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() != \textcolor{stringliteral}{"{}tpl"{}} ||}
\DoxyCodeLine{00519         readPaletteGlobalName(it-\/>second) != paletteId) \{}
\DoxyCodeLine{00520       fp = \mbox{\hyperlink{class_t_file_path}{TFilePath}}();}
\DoxyCodeLine{00521       \textcolor{comment}{// erase the entry}}
\DoxyCodeLine{00522       it = table\_cached.erase(it);}
\DoxyCodeLine{00523       removeEntry(paletteId);}
\DoxyCodeLine{00524     \}}
\DoxyCodeLine{00525   \}}
\DoxyCodeLine{00526   \textcolor{keywordflow}{if} (fp.isEmpty()) \{}
\DoxyCodeLine{00527     fp = searchPalette(m\_root, paletteId);}
\DoxyCodeLine{00528     \textcolor{keywordflow}{if} (fp.isEmpty()) fp = searchPalette(getProjectPalettesRoot(), paletteId);}
\DoxyCodeLine{00529 }
\DoxyCodeLine{00530     addEntry(paletteId, fp);}
\DoxyCodeLine{00531   \}}
\DoxyCodeLine{00532   table[paletteId] = fp;}
\DoxyCodeLine{00533   \textcolor{keywordflow}{return} fp;}
\DoxyCodeLine{00534 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a25cbf9550685ea06d2b207027f184087}\label{class_studio_palette_a25cbf9550685ea06d2b207027f184087}} 
\index{StudioPalette@{StudioPalette}!getProjectPalettesRoot@{getProjectPalettesRoot}}
\index{getProjectPalettesRoot@{getProjectPalettesRoot}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{getProjectPalettesRoot()}{getProjectPalettesRoot()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Studio\+Palette\+::get\+Project\+Palettes\+Root (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00229                                                 \{}
\DoxyCodeLine{00230   \mbox{\hyperlink{class_t_smart_pointer_t}{TProjectP}} p          = \mbox{\hyperlink{class_t_project_manager_a150ca0d6e2eb171b8117b0c5f03dbfad}{TProjectManager::instance}}()-\/>\mbox{\hyperlink{class_t_project_manager_a5267cfeae48d4e7585c3fc56d8d5b0b3}{getCurrentProject}}();}
\DoxyCodeLine{00231   \mbox{\hyperlink{class_t_file_path}{TFilePath}} folderName = p-\/>getFolder(\mbox{\hyperlink{class_t_project_a092d328ed133774a3522d4029eedf06c}{TProject::Palettes}});}
\DoxyCodeLine{00232   \textcolor{keywordflow}{if} (folderName.isEmpty()) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_file_path}{TFilePath}}();}
\DoxyCodeLine{00233   \textcolor{keywordflow}{if} (folderName.isAbsolute()) \textcolor{keywordflow}{return} folderName;}
\DoxyCodeLine{00234   \textcolor{keywordflow}{return} p-\/>getProjectFolder() + folderName;}
\DoxyCodeLine{00235 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a42c5a28223dc6ec0b8e1526ad89f7f7e}\label{class_studio_palette_a42c5a28223dc6ec0b8e1526ad89f7f7e}} 
\index{StudioPalette@{StudioPalette}!getSourceStyle@{getSourceStyle}}
\index{getSourceStyle@{getSourceStyle}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{getSourceStyle()}{getSourceStyle()}}
{\footnotesize\ttfamily std\+::pair$<$ \mbox{\hyperlink{class_t_file_path}{TFile\+Path}}, int $>$ Studio\+Palette\+::get\+Source\+Style (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_color_style}{TColor\+Style}} $\ast$}]{cs }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00552                                                                      \{}
\DoxyCodeLine{00553   std::pair<TFilePath, int> ret(\mbox{\hyperlink{class_t_file_path}{TFilePath}}(), -\/1);}
\DoxyCodeLine{00554   \textcolor{keywordflow}{if} (!cs) \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00555   std::wstring gname = cs-\/>\mbox{\hyperlink{class_t_color_style_ad275b1ae7fbbf9b7a0266b799ce53d40}{getGlobalName}}();}
\DoxyCodeLine{00556   \textcolor{keywordflow}{if} (gname == L\textcolor{stringliteral}{"{}"{}}) \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00557   \textcolor{keywordtype}{int} k = gname.find\_first\_of(L\textcolor{charliteral}{'-\/'}, 1);}
\DoxyCodeLine{00558   \textcolor{keywordflow}{if} (k == (\textcolor{keywordtype}{int})std::wstring::npos) \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00559   std::wstring paletteId = gname.substr(1, k -\/ 1);}
\DoxyCodeLine{00560   ret.first              = getPalettePath(paletteId) -\/ m\_root;}
\DoxyCodeLine{00561   ret.second             = std::stoi(gname.substr(k + 1));}
\DoxyCodeLine{00562   \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00563 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a96827fd025cc5cb2023f5f3a204095e9}\label{class_studio_palette_a96827fd025cc5cb2023f5f3a204095e9}} 
\index{StudioPalette@{StudioPalette}!getStyle@{getStyle}}
\index{getStyle@{getStyle}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{getStyle()}{getStyle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_color_style}{TColor\+Style}} $\ast$ Studio\+Palette\+::get\+Style (\begin{DoxyParamCaption}\item[{std\+::wstring}]{style\+Id }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00548 \{ \textcolor{keywordflow}{return} 0; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_af3fe1e8513126938d47374426892f8df}\label{class_studio_palette_af3fe1e8513126938d47374426892f8df}} 
\index{StudioPalette@{StudioPalette}!hasGlobalName@{hasGlobalName}}
\index{hasGlobalName@{hasGlobalName}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{hasGlobalName()}{hasGlobalName()}}
{\footnotesize\ttfamily bool Studio\+Palette\+::has\+Global\+Name (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path }\end{DoxyParamCaption})}

check if the palette is studio palette or level palette in order to separate icons in the Studio\+Palette\+Tree. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00351                                                        \{}
\DoxyCodeLine{00352   \textcolor{keywordflow}{return} (readPaletteGlobalName(path) != L\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00353 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_ab92eef8f0e7c1d58f9ec6cad1028241e}\label{class_studio_palette_ab92eef8f0e7c1d58f9ec6cad1028241e}} 
\index{StudioPalette@{StudioPalette}!importPalette@{importPalette}}
\index{importPalette@{importPalette}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{importPalette()}{importPalette()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} Studio\+Palette\+::import\+Palette (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{dst\+Folder,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{src\+Path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00466                                                                  \{}
\DoxyCodeLine{00467   \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} palette;}
\DoxyCodeLine{00468   std::string ext = srcPath.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}();}
\DoxyCodeLine{00469   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00470     \textcolor{keywordflow}{if} (ext == \textcolor{stringliteral}{"{}plt"{}})}
\DoxyCodeLine{00471       palette = loadToonz46Palette(srcPath);}
\DoxyCodeLine{00472     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ext == \textcolor{stringliteral}{"{}pli"{}})}
\DoxyCodeLine{00473       palette = loadPliPalette(srcPath);}
\DoxyCodeLine{00474     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ext == \textcolor{stringliteral}{"{}tpl"{}})}
\DoxyCodeLine{00475       palette = loadTplPalette(srcPath);}
\DoxyCodeLine{00476   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00477   \}}
\DoxyCodeLine{00478 }
\DoxyCodeLine{00479   \textcolor{keywordflow}{if} (!palette) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_file_path}{TFilePath}}();}
\DoxyCodeLine{00480   std::wstring name = srcPath.getWideName();}
\DoxyCodeLine{00481 }
\DoxyCodeLine{00482   assert(!palette-\/>isCleanupPalette());}
\DoxyCodeLine{00483   \textcolor{comment}{//    convertToLevelPalette(palette.getPointer());}}
\DoxyCodeLine{00484 }
\DoxyCodeLine{00485   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp = makeUniqueName(dstFolder + (name + L\textcolor{stringliteral}{"{}.tpl"{}}));}
\DoxyCodeLine{00486   time\_t ltime;}
\DoxyCodeLine{00487   time(\&ltime);}
\DoxyCodeLine{00488   std::wstring gname = std::to\_wstring(ltime) + L\textcolor{stringliteral}{"{}\_"{}} + std::to\_wstring(rand());}
\DoxyCodeLine{00489   palette-\/>setGlobalName(gname);}
\DoxyCodeLine{00490   setStylesGlobalNames(palette.getPointer());}
\DoxyCodeLine{00491   TSystem::touchParentDir(fp);}
\DoxyCodeLine{00492   save(fp, palette.getPointer());}
\DoxyCodeLine{00493   notifyTreeChange();}
\DoxyCodeLine{00494   \textcolor{keywordflow}{return} fp;}
\DoxyCodeLine{00495 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_ae487a7fdf09dc0ac55a76219cb73fb6e}\label{class_studio_palette_ae487a7fdf09dc0ac55a76219cb73fb6e}} 
\index{StudioPalette@{StudioPalette}!instance@{instance}}
\index{instance@{instance}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{instance()}{instance()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_studio_palette}{Studio\+Palette}} $\ast$ Studio\+Palette\+::instance (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00214                                        \{}
\DoxyCodeLine{00215   \textcolor{keyword}{static} \mbox{\hyperlink{class_studio_palette}{StudioPalette}} \_instance;}
\DoxyCodeLine{00216   studioPaletteHasBeenReferred = \textcolor{keyword}{true};}
\DoxyCodeLine{00217   assert(m\_enabled);}
\DoxyCodeLine{00218   \textcolor{keywordflow}{return} \&\_instance;}
\DoxyCodeLine{00219 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_aca0d5ee39cd30509447e40cb9f9423a0}\label{class_studio_palette_aca0d5ee39cd30509447e40cb9f9423a0}} 
\index{StudioPalette@{StudioPalette}!isEnabled@{isEnabled}}
\index{isEnabled@{isEnabled}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{isEnabled()}{isEnabled()}}
{\footnotesize\ttfamily static bool Studio\+Palette\+::is\+Enabled (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00105 \{ \textcolor{keywordflow}{return} m\_enabled; \};}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a2e74bd3c318e44f07dc808044e8f89a5}\label{class_studio_palette_a2e74bd3c318e44f07dc808044e8f89a5}} 
\index{StudioPalette@{StudioPalette}!isFolder@{isFolder}}
\index{isFolder@{isFolder}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{isFolder()}{isFolder()}}
{\footnotesize\ttfamily bool Studio\+Palette\+::is\+Folder (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00331                                                   \{}
\DoxyCodeLine{00332   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_file_status}{TFileStatus}}(path).isDirectory();}
\DoxyCodeLine{00333 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a9d668ed41c5055737d059f5e8ce8aac3}\label{class_studio_palette_a9d668ed41c5055737d059f5e8ce8aac3}} 
\index{StudioPalette@{StudioPalette}!isLevelPalette@{isLevelPalette}}
\index{isLevelPalette@{isLevelPalette}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{isLevelPalette()}{isLevelPalette()}}
{\footnotesize\ttfamily bool Studio\+Palette\+::is\+Level\+Palette (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00357                                                         \{}
\DoxyCodeLine{00358   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = getPalette(path);}
\DoxyCodeLine{00359   \textcolor{keywordflow}{if} (!palette) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00360   \textcolor{keywordtype}{bool} ret = !palette-\/>isCleanupPalette();}
\DoxyCodeLine{00361   \textcolor{keyword}{delete} palette;}
\DoxyCodeLine{00362   \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00363 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_ac0abd8b9d65925c21ef7103969bc5b76}\label{class_studio_palette_ac0abd8b9d65925c21ef7103969bc5b76}} 
\index{StudioPalette@{StudioPalette}!isPalette@{isPalette}}
\index{isPalette@{isPalette}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{isPalette()}{isPalette()}}
{\footnotesize\ttfamily bool Studio\+Palette\+::is\+Palette (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00343                                                    \{}
\DoxyCodeLine{00344   \textcolor{keywordflow}{return} path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tpl"{}};}
\DoxyCodeLine{00345 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a56a0a0150764f5a55807241faf181107}\label{class_studio_palette_a56a0a0150764f5a55807241faf181107}} 
\index{StudioPalette@{StudioPalette}!isReadOnly@{isReadOnly}}
\index{isReadOnly@{isReadOnly}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{isReadOnly()}{isReadOnly()}}
{\footnotesize\ttfamily bool Studio\+Palette\+::is\+Read\+Only (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00337                                                     \{}
\DoxyCodeLine{00338   \textcolor{keywordflow}{return} !\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(path).isWritable();}
\DoxyCodeLine{00339 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a0bc3104bf544a836c8790d7bf17a132c}\label{class_studio_palette_a0bc3104bf544a836c8790d7bf17a132c}} 
\index{StudioPalette@{StudioPalette}!movePalette@{movePalette}}
\index{movePalette@{movePalette}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{movePalette()}{movePalette()}}
{\footnotesize\ttfamily void Studio\+Palette\+::move\+Palette (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{dst\+Path,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{src\+Path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00275                                                           \{}
\DoxyCodeLine{00276   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00277     \textcolor{comment}{// do not allow overwrite palette}}
\DoxyCodeLine{00278     TSystem::renameFile(dstPath, srcPath, \textcolor{keyword}{false});}
\DoxyCodeLine{00279   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00280     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00281   \}}
\DoxyCodeLine{00282   std::wstring \textcolor{keywordtype}{id} = readPaletteGlobalName(dstPath);}
\DoxyCodeLine{00283   table.erase(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00284   removeEntry(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00285   FolderListenerManager::instance()-\/>notifyFolderChanged(}
\DoxyCodeLine{00286       dstPath.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}());}
\DoxyCodeLine{00287   notifyMove(dstPath, srcPath);}
\DoxyCodeLine{00288 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a81b2ef792827e66cf7d8063a5fb91f97}\label{class_studio_palette_a81b2ef792827e66cf7d8063a5fb91f97}} 
\index{StudioPalette@{StudioPalette}!notifyMove@{notifyMove}}
\index{notifyMove@{notifyMove}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{notifyMove()}{notifyMove()}}
{\footnotesize\ttfamily void Studio\+Palette\+::notify\+Move (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{dst\+Path,  }\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{src\+Path }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00696                                                          \{}
\DoxyCodeLine{00697   \textcolor{keywordflow}{for} (std::vector<Listener *>::iterator it = m\_listeners.begin();}
\DoxyCodeLine{00698        it != m\_listeners.end(); ++it)}
\DoxyCodeLine{00699     (*it)-\/>onStudioPaletteMove(dstPath, srcPath);}
\DoxyCodeLine{00700 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a3ccb114745cf74b5afaf1e0aa6f1c558}\label{class_studio_palette_a3ccb114745cf74b5afaf1e0aa6f1c558}} 
\index{StudioPalette@{StudioPalette}!notifyPaletteChange@{notifyPaletteChange}}
\index{notifyPaletteChange@{notifyPaletteChange}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{notifyPaletteChange()}{notifyPaletteChange()}}
{\footnotesize\ttfamily void Studio\+Palette\+::notify\+Palette\+Change (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{name }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00704                                                                 \{}
\DoxyCodeLine{00705   \textcolor{keywordflow}{for} (std::vector<Listener *>::iterator it = m\_listeners.begin();}
\DoxyCodeLine{00706        it != m\_listeners.end(); ++it)}
\DoxyCodeLine{00707     (*it)-\/>onStudioPaletteChange(palette);}
\DoxyCodeLine{00708 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_aff11070fbb91856cd0d4f2b502842fbb}\label{class_studio_palette_aff11070fbb91856cd0d4f2b502842fbb}} 
\index{StudioPalette@{StudioPalette}!notifyTreeChange@{notifyTreeChange}}
\index{notifyTreeChange@{notifyTreeChange}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{notifyTreeChange()}{notifyTreeChange()}}
{\footnotesize\ttfamily void Studio\+Palette\+::notify\+Tree\+Change (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00687                                      \{}
\DoxyCodeLine{00688   \textcolor{keywordflow}{for} (std::vector<Listener *>::iterator it = m\_listeners.begin();}
\DoxyCodeLine{00689        it != m\_listeners.end(); ++it)}
\DoxyCodeLine{00690     (*it)-\/>onStudioPaletteTreeChange();}
\DoxyCodeLine{00691 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a9ef5c9995e1a6ef4e8852239e9fa2a05}\label{class_studio_palette_a9ef5c9995e1a6ef4e8852239e9fa2a05}} 
\index{StudioPalette@{StudioPalette}!removeEntry@{removeEntry}}
\index{removeEntry@{removeEntry}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{removeEntry()}{removeEntry()}}
{\footnotesize\ttfamily void Studio\+Palette\+::remove\+Entry (\begin{DoxyParamCaption}\item[{const std\+::wstring}]{palette\+Id }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00712                                                           \{}
\DoxyCodeLine{00713   \mbox{\hyperlink{class_t_file_path}{TFilePath}} rootFps[2] = \{m\_root, getProjectPalettesRoot()\};}
\DoxyCodeLine{00714   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} rootFp : rootFps) \{}
\DoxyCodeLine{00715     \textcolor{keywordflow}{if} (rootFp.isEmpty()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00716     \mbox{\hyperlink{class_t_file_path}{TFilePath}} tablePath = rootFp + pathTableFileName;}
\DoxyCodeLine{00717     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(tablePath).doesExist()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00718     QSettings tableSettings(QString::fromStdWString(tablePath.getWideString()),}
\DoxyCodeLine{00719                             QSettings::IniFormat);}
\DoxyCodeLine{00720     \textcolor{keywordflow}{if} (tableSettings.contains(QString::fromStdWString(paletteId))) \{}
\DoxyCodeLine{00721       tableSettings.remove(QString::fromStdWString(paletteId));}
\DoxyCodeLine{00722       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00723     \}}
\DoxyCodeLine{00724   \}}
\DoxyCodeLine{00725 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a675131289e3de9705b5beb354853f695}\label{class_studio_palette_a675131289e3de9705b5beb354853f695}} 
\index{StudioPalette@{StudioPalette}!removeListener@{removeListener}}
\index{removeListener@{removeListener}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{removeListener()}{removeListener()}}
{\footnotesize\ttfamily void Studio\+Palette\+::remove\+Listener (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_studio_palette_1_1_listener}{Listener}} $\ast$}]{listener }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00679                                                      \{}
\DoxyCodeLine{00680   m\_listeners.erase(}
\DoxyCodeLine{00681       std::remove(m\_listeners.begin(), m\_listeners.end(), listener),}
\DoxyCodeLine{00682       m\_listeners.end());}
\DoxyCodeLine{00683 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_ac907a1bc64a72ca27e0d367e00364c45}\label{class_studio_palette_ac907a1bc64a72ca27e0d367e00364c45}} 
\index{StudioPalette@{StudioPalette}!save@{save}}
\index{save@{save}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{save()}{save()}}
{\footnotesize\ttfamily void Studio\+Palette\+::save (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path,  }\item[{\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$}]{palette }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00627                                                                  \{}
\DoxyCodeLine{00628   \mbox{\hyperlink{class_t_file_status}{TFileStatus}} fs(path);}
\DoxyCodeLine{00629   \textcolor{keywordflow}{if} (fs.doesExist() \&\& !fs.isWritable()) \{}
\DoxyCodeLine{00630     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_system_exception}{TSystemException}}(path,}
\DoxyCodeLine{00631                            \textcolor{stringliteral}{"{}The studio palette cannot be saved: it is a read "{}}}
\DoxyCodeLine{00632                            \textcolor{stringliteral}{"{}only studio palette."{}});}
\DoxyCodeLine{00633   \}}
\DoxyCodeLine{00634 }
\DoxyCodeLine{00635   \mbox{\hyperlink{class_t_o_stream}{TOStream}} os(path);}
\DoxyCodeLine{00636   \textcolor{keywordflow}{if} (!os) \{}
\DoxyCodeLine{00637     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_system_exception}{TSystemException}}(path,}
\DoxyCodeLine{00638                            \textcolor{stringliteral}{"{}The studio palette cannot be saved: the output "{}}}
\DoxyCodeLine{00639                            \textcolor{stringliteral}{"{}stream status is invalid."{}});}
\DoxyCodeLine{00640   \}}
\DoxyCodeLine{00641   std::map<std::string, std::string> attr;}
\DoxyCodeLine{00642   attr[\textcolor{stringliteral}{"{}name"{}}] = ::to\_string(palette-\/>getGlobalName());}
\DoxyCodeLine{00643   os.openChild(\textcolor{stringliteral}{"{}palette"{}}, attr);}
\DoxyCodeLine{00644   palette-\/>saveData(os);}
\DoxyCodeLine{00645   os.closeChild();}
\DoxyCodeLine{00646 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a8066bb4a36e479b67d0ecd8789d5978a}\label{class_studio_palette_a8066bb4a36e479b67d0ecd8789d5978a}} 
\index{StudioPalette@{StudioPalette}!setPalette@{setPalette}}
\index{setPalette@{setPalette}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{setPalette()}{setPalette()}}
{\footnotesize\ttfamily void Studio\+Palette\+::set\+Palette (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{palette\+Path,  }\item[{const \mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$}]{palette,  }\item[{bool}]{notify\+Palette\+Changed }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00421                                                                                \{}
\DoxyCodeLine{00422   assert(palettePath.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}tpl"{}});}
\DoxyCodeLine{00423   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = plt-\/>clone();}
\DoxyCodeLine{00424   palette-\/>setIsLocked(plt-\/>isLocked());}
\DoxyCodeLine{00425   palette-\/>addRef();}
\DoxyCodeLine{00426   std::wstring pgn = palette-\/>getGlobalName();}
\DoxyCodeLine{00427   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(palettePath).doesExist())}
\DoxyCodeLine{00428     pgn = readPaletteGlobalName(palettePath);}
\DoxyCodeLine{00429   palette-\/>setGlobalName(pgn);}
\DoxyCodeLine{00430   setStylesGlobalNames(palette);}
\DoxyCodeLine{00431   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00432     save(palettePath, palette);}
\DoxyCodeLine{00433   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00434     palette-\/>release();}
\DoxyCodeLine{00435     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00436   \}}
\DoxyCodeLine{00437   palette-\/>release();}
\DoxyCodeLine{00438   \textcolor{keywordflow}{if} (notifyPaletteChanged) notifyPaletteChange(palettePath);}
\DoxyCodeLine{00439 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a3e61fb5afaab29d333d943a90a6a7135}\label{class_studio_palette_a3e61fb5afaab29d333d943a90a6a7135}} 
\index{StudioPalette@{StudioPalette}!setStylesGlobalNames@{setStylesGlobalNames}}
\index{setStylesGlobalNames@{setStylesGlobalNames}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{setStylesGlobalNames()}{setStylesGlobalNames()}}
{\footnotesize\ttfamily void Studio\+Palette\+::set\+Styles\+Global\+Names (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$}]{palette }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00613                                                           \{}
\DoxyCodeLine{00614   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < palette-\/>getStyleCount(); i++) \{}
\DoxyCodeLine{00615     \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *cs = palette-\/>getStyle(i);}
\DoxyCodeLine{00616     \textcolor{comment}{// set global name only to the styles of which the global name is empty}}
\DoxyCodeLine{00617     \textcolor{keywordflow}{if} (cs-\/>\mbox{\hyperlink{class_t_color_style_ad275b1ae7fbbf9b7a0266b799ce53d40}{getGlobalName}}() == L\textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{00618       std::wstring gname =}
\DoxyCodeLine{00619           L\textcolor{stringliteral}{"{}-\/"{}} + palette-\/>getGlobalName() + L\textcolor{stringliteral}{"{}-\/"{}} + std::to\_wstring(i);}
\DoxyCodeLine{00620       cs-\/>\mbox{\hyperlink{class_t_color_style_af6a3579e3785b9addcf434574bc89367}{setGlobalName}}(gname);}
\DoxyCodeLine{00621     \}}
\DoxyCodeLine{00622   \}}
\DoxyCodeLine{00623 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_studio_palette_a8174aad5fff24c6a08849628e35c8ec2}\label{class_studio_palette_a8174aad5fff24c6a08849628e35c8ec2}} 
\index{StudioPalette@{StudioPalette}!updateLinkedColors@{updateLinkedColors}}
\index{updateLinkedColors@{updateLinkedColors}!StudioPalette@{StudioPalette}}
\doxysubsubsection{\texorpdfstring{updateLinkedColors()}{updateLinkedColors()}}
{\footnotesize\ttfamily bool Studio\+Palette\+::update\+Linked\+Colors (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$}]{palette }\end{DoxyParamCaption})}

return if any style in the palette is changed 
\begin{DoxyCode}{0}
\DoxyCodeLine{00568                                                         \{}
\DoxyCodeLine{00569   \textcolor{keywordtype}{bool} paletteIsChanged = \textcolor{keyword}{false};}
\DoxyCodeLine{00570   std::map<std::wstring, TPaletteP> table;}
\DoxyCodeLine{00571 }
\DoxyCodeLine{00572   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < palette-\/>getStyleCount(); i++) \{}
\DoxyCodeLine{00573     \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *cs    = palette-\/>getStyle(i);}
\DoxyCodeLine{00574     std::wstring gname = cs-\/>\mbox{\hyperlink{class_t_color_style_ad275b1ae7fbbf9b7a0266b799ce53d40}{getGlobalName}}();}
\DoxyCodeLine{00575     \textcolor{keywordflow}{if} (gname == L\textcolor{stringliteral}{"{}"{}} || gname[0] != L\textcolor{charliteral}{'+'}) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00576     \textcolor{keywordtype}{int} k = gname.find\_first\_of(L\textcolor{charliteral}{'-\/'}, 1);}
\DoxyCodeLine{00577     \textcolor{keywordflow}{if} (k == (\textcolor{keywordtype}{int})std::wstring::npos) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00578     std::wstring paletteId = gname.substr(1, k -\/ 1);}
\DoxyCodeLine{00579     std::map<std::wstring, TPaletteP>::iterator it;}
\DoxyCodeLine{00580     it                  = table.find(paletteId);}
\DoxyCodeLine{00581     \mbox{\hyperlink{class_t_palette}{TPalette}} *spPalette = 0;}
\DoxyCodeLine{00582     \textcolor{keywordflow}{if} (it == table.end()) \{}
\DoxyCodeLine{00583       spPalette = getPalette(paletteId);}
\DoxyCodeLine{00584       \textcolor{keywordflow}{if} (!spPalette) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00585       table[paletteId] = spPalette;}
\DoxyCodeLine{00586       \textcolor{comment}{// spPalette-\/>release();}}
\DoxyCodeLine{00587       assert(spPalette-\/>getRefCount() == 1);}
\DoxyCodeLine{00588     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00589       spPalette = it-\/>second.getPointer();}
\DoxyCodeLine{00590 }
\DoxyCodeLine{00591     \textcolor{keywordtype}{int} j = std::stoi(gname.substr(k + 1));}
\DoxyCodeLine{00592     \textcolor{keywordflow}{if} (spPalette \&\& 0 <= j \&\& j < spPalette-\/>getStyleCount()) \{}
\DoxyCodeLine{00593       \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *spStyle = spPalette-\/>\mbox{\hyperlink{class_t_palette_a0f6a4eda7dafb0a9f2b43160cfec81e4}{getStyle}}(j);}
\DoxyCodeLine{00594       assert(spStyle);}
\DoxyCodeLine{00595       spStyle = spStyle-\/>\mbox{\hyperlink{class_t_color_style_a7b7e50c731a150aa84f746a261765adf}{clone}}();}
\DoxyCodeLine{00596       spStyle-\/>\mbox{\hyperlink{class_t_color_style_af6a3579e3785b9addcf434574bc89367}{setGlobalName}}(gname);}
\DoxyCodeLine{00597 }
\DoxyCodeLine{00598       \textcolor{comment}{// put the style name in the studio palette into the original name}}
\DoxyCodeLine{00599       spStyle-\/>\mbox{\hyperlink{class_t_color_style_a22061dd49a8282e8af93840441998532}{setOriginalName}}(spStyle-\/>\mbox{\hyperlink{class_t_color_style_a611de20d126c5838456f9113b4682c4f}{getName}}());}
\DoxyCodeLine{00600       \textcolor{comment}{//.. and keep the style name unchanged}}
\DoxyCodeLine{00601       spStyle-\/>\mbox{\hyperlink{class_t_color_style_aeb25e0ae1708d473bd551b0d0c9bf4a9}{setName}}(cs-\/>\mbox{\hyperlink{class_t_color_style_a611de20d126c5838456f9113b4682c4f}{getName}}());}
\DoxyCodeLine{00602 }
\DoxyCodeLine{00603       palette-\/>setStyle(i, spStyle);}
\DoxyCodeLine{00604 }
\DoxyCodeLine{00605       paletteIsChanged = \textcolor{keyword}{true};}
\DoxyCodeLine{00606     \}}
\DoxyCodeLine{00607   \}}
\DoxyCodeLine{00608   \textcolor{keywordflow}{return} paletteIsChanged;}
\DoxyCodeLine{00609 \}}

\end{DoxyCode}


References \mbox{\hyperlink{class_t_color_style_a7b7e50c731a150aa84f746a261765adf}{TColor\+Style\+::clone()}}, \mbox{\hyperlink{l00200}{TColor\+Style\+::get\+Global\+Name()}}, \mbox{\hyperlink{l00190}{TColor\+Style\+::get\+Name()}}, \mbox{\hyperlink{l00283}{TPalette\+::get\+Style()}}, \mbox{\hyperlink{l00197}{TColor\+Style\+::set\+Global\+Name()}}, \mbox{\hyperlink{l00187}{TColor\+Style\+::set\+Name()}}, and \mbox{\hyperlink{l00204}{TColor\+Style\+::set\+Original\+Name()}}.



Referenced by \mbox{\hyperlink{l01083}{TXsh\+Simple\+Level\+::load()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonz/studiopalette.\+h\item 
E\+:/opentoonz/toonz/sources/toonzlib/studiopalette.\+cpp\end{DoxyCompactItemize}
