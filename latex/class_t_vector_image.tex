\hypertarget{class_t_vector_image}{}\doxysection{TVector\+Image Class Reference}
\label{class_t_vector_image}\index{TVectorImage@{TVectorImage}}


{\ttfamily \#include $<$tvectorimage.\+h$>$}

Inheritance diagram for TVector\+Image\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_t_vector_image}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_t_vector_image_1_1_imp}{Imp}}
\item 
struct \mbox{\hyperlink{struct_t_vector_image_1_1_intersection_branch}{Intersection\+Branch}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_vector_image_a61605055ad066eddbd5fbddc498f6e1e}{TVector\+Image}} (bool loaded=false)
\begin{DoxyCompactList}\small\item\em if the vectorimage is loaded from disc, loaded=true \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1}{TImage\+::\+Type}} \mbox{\hyperlink{class_t_vector_image_aba9fb8516ce39273c1cf0dbca2b62b23}{get\+Type}} () const override
\item 
void \mbox{\hyperlink{class_t_vector_image_a025c88bdd434e110192d0b64a5f28ba9}{validate\+Regions}} (bool state=false)
\item 
bool \mbox{\hyperlink{class_t_vector_image_a989544a62bcc3060517f5a514bfe3dd0}{are\+Valid\+Regions}} ()
\begin{DoxyCompactList}\small\item\em Get valid regions flags. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \mbox{\hyperlink{class_t_vector_image_a0aeac8f2cab4178fa732a237a9b3dbd9}{clone}} () const
\begin{DoxyCompactList}\small\item\em Return a clone of image. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_image}{TImage}} $\ast$ \mbox{\hyperlink{class_t_vector_image_acd445472f4f986f215f7b05c344a8ec8}{clone\+Image}} () const override
\begin{DoxyCompactList}\small\item\em Create a new {\bfseries{\mbox{\hyperlink{class_t_image}{TImage}}}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_vector_image_af4ee3955add924a22b49197302597196}{transform}} (const \mbox{\hyperlink{class_t_affine}{TAffine}} \&aff, bool do\+Change\+Thickness=false)
\begin{DoxyCompactList}\small\item\em Transform a stroke using an affine {\bfseries{\mbox{\hyperlink{class_t_affine}{TAffine}}}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_vector_image_aab16bf34646991b9da7e78c0d300ea2a}{put\+Region}} (\mbox{\hyperlink{class_t_region}{TRegion}} $\ast$region)
\begin{DoxyCompactList}\small\item\em Put a region in the regions\textquotesingle{} container. \end{DoxyCompactList}\item 
UINT \mbox{\hyperlink{class_t_vector_image_a12e56e674828c172749d5bc1855bc977}{get\+Region\+Count}} () const
\begin{DoxyCompactList}\small\item\em Return the regions\textquotesingle{} count. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_region}{TRegion}} $\ast$ \mbox{\hyperlink{class_t_vector_image_a17f9e44c72c82c54d0cf9fefed85e12f}{get\+Region}} (UINT index) const
\begin{DoxyCompactList}\small\item\em Get a region at index position. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_region}{TRegion}} $\ast$ \mbox{\hyperlink{class_t_vector_image_a6ad014d955b2b96caf5415ffebf30582}{get\+Region}} (\mbox{\hyperlink{class_t_region_id}{TRegion\+Id}}) const
\begin{DoxyCompactList}\small\item\em Get a region at {\bfseries{\mbox{\hyperlink{class_t_region_id}{TRegion\+Id}}}} id. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_region}{TRegion}} $\ast$ \mbox{\hyperlink{class_t_vector_image_aa720fd18b1fd94d3121fdd533392d9e8}{find\+Region}} (const \mbox{\hyperlink{class_t_region}{TRegion}} \&region) const
\begin{DoxyCompactList}\small\item\em returns the region equivalent to region, 0 if does not exists. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_t_vector_image_a8deccc106b069aca896e672772179c79}\label{class_t_vector_image_a8deccc106b069aca896e672772179c79}} 
void {\bfseries find\+Regions} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect)
\item 
UINT \mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{get\+Stroke\+Count}} () const
\begin{DoxyCompactList}\small\item\em Return the strokes\textquotesingle{} count. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ \mbox{\hyperlink{class_t_vector_image_a1aa2f3ab6c30a6f8a64b2cb35072ffeb}{get\+Stroke}} (UINT index) const
\begin{DoxyCompactList}\small\item\em Get a {\bfseries{\mbox{\hyperlink{class_t_stroke}{TStroke}}}} stroke at index position. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_v_i_stroke}{VIStroke}} $\ast$ \mbox{\hyperlink{class_t_vector_image_aafc4a988330c27a598b0e55140c94731}{get\+VIStroke}} (UINT index) const
\begin{DoxyCompactList}\small\item\em Get a {\bfseries{\mbox{\hyperlink{class_v_i_stroke}{VIStroke}}}} stroke at index position. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_v_i_stroke}{VIStroke}} $\ast$ \mbox{\hyperlink{class_t_vector_image_ae52f53ddb30dadf50856f12bd7d52319}{get\+Stroke\+By\+Id}} (int id) const
\begin{DoxyCompactList}\small\item\em Get a {\bfseries{\mbox{\hyperlink{class_v_i_stroke}{VIStroke}}}} stroke at id. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_t_vector_image_ac34046b52e2318c10721d4f0cfd181f0}{get\+Stroke\+Index\+By\+Id}} (int id) const
\begin{DoxyCompactList}\small\item\em Get the stroke index by id. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_t_vector_image_af002208e7a24a894a816756e7978acef}{get\+Stroke\+Index}} (\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$stroke) const
\begin{DoxyCompactList}\small\item\em Get the stroke index by id. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_vector_image_a98b3b27c9f496d13fe584d9cf83bf230}{group}} (int from\+Index, int count)
\begin{DoxyCompactList}\small\item\em Group strokes in the {\bfseries{from\+Index}} -\/ {\bfseries{to\+Index}} range. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_t_vector_image_a4b98d3d3d69758009fe833788bc53fc0}{ungroup}} (int index)
\begin{DoxyCompactList}\small\item\em Ungroup all the strokes in the group of index {\bfseries{index}}. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_t_vector_image_a8cce47a9dbd46f0f58145600101387d1}{is\+Stroke\+Grouped}} (UINT index) const
\item 
int \mbox{\hyperlink{class_t_vector_image_ab427973777596a7e35ef16a60f97d97c}{get\+Group\+Depth}} (UINT index) const
\item 
bool \mbox{\hyperlink{class_t_vector_image_aea598419eaeaccfdf8b87dcce203d740}{same\+Sub\+Group}} (int stroke\+Index0, int stroke\+Index1) const
\item 
int \mbox{\hyperlink{class_t_vector_image_ac68c0c97171598ad8d9edfdc9a8179c6}{get\+Common\+Group\+Depth}} (int stroke\+Index0, int stroke\+Index1) const
\item 
int \mbox{\hyperlink{class_t_vector_image_a1957d05b7edf80aee137479d23dc33fb}{are\+Different\+Group}} (UINT index1, bool is\+Region1, UINT index2, bool is\+Region2) const
\begin{DoxyCompactList}\small\item\em Return -\/1 if two object are contained in the same group. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_t_vector_image_aa81f3c0e294c12aefefb675e714bf161}{same\+Parent\+Group\+Strokes}} (UINT index1, UINT index2) const
\begin{DoxyCompactList}\small\item\em Return true if two strokes has common parent groups. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_t_vector_image_a90c030d3d2eba96443fd604e343dd8e5}{same\+Group}} (UINT index1, UINT index2) const
\begin{DoxyCompactList}\small\item\em Return true if two objects are contained into the same group. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_t_vector_image_a3e1d82ceb5ba95fd2452bac0d5a9c6b7}{same\+Group\+Stroke\+And\+Region}} (UINT stroke\+Index, UINT region\+Index) const
\begin{DoxyCompactList}\small\item\em Return true if a stroke and a region have common parent groups. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_t_vector_image_adc30e2ab5870c5903ffac15882918ee8}{in\+Current\+Group}} (int stroke\+Index) const
\item 
bool \mbox{\hyperlink{class_t_vector_image_a845401353dfb8186744db8ede7db0494}{can\+Enter\+Group}} (int stroke\+Index) const
\item 
bool \mbox{\hyperlink{class_t_vector_image_a989fe45c3cb3d2f228041598f9e71298}{selectable}} (int stroke\+Index) const
\item 
bool \mbox{\hyperlink{class_t_vector_image_a74aab683699638fdb1c93fb42483a31e}{enter\+Group}} (int index)
\item 
int \mbox{\hyperlink{class_t_vector_image_ad4cb3fe28d9ce75b41f222259f0c42fd}{exit\+Group}} ()
\item 
bool \mbox{\hyperlink{class_t_vector_image_a4ceb67c26db62c340b0deab21a9e1e0f}{is\+Entered\+Group\+Stroke}} (int index) const
\item 
bool \mbox{\hyperlink{class_t_vector_image_a1d5406a8fffac3eca70a5bbb37ee4ed3}{can\+Move\+Strokes}} (int stroke\+Index, int count, int move\+Before) const
\item 
int \mbox{\hyperlink{class_t_vector_image_a6f4a8c2a463ebbe94f7cf98002d61d05}{is\+Inside\+Group}} () const
\item 
int \mbox{\hyperlink{class_t_vector_image_af2976de9e4eeea9229a5300d952a1081}{pick\+Group}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos) const
\item 
int \mbox{\hyperlink{class_t_vector_image_a0064206baa02646982bdfff78fa571b9}{get\+Group\+By\+Stroke}} (UINT index) const
\item 
int \mbox{\hyperlink{class_t_vector_image_afe6ce30ff27fda99fa803a4c3f1d9049}{get\+Group\+By\+Region}} (UINT index) const
\item 
bool \mbox{\hyperlink{class_t_vector_image_abc85189e12c100c482fb0ef7dc378602}{get\+Nearest\+Stroke}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&p, double \&outw, UINT \&stroke\+Index, double \&dist2, bool in\+Current\+Group=true) const
\item 
\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ \mbox{\hyperlink{class_t_vector_image_a33a9f3cddc17630c35c8bf62e9989cc2}{remove\+Stroke}} (int index, bool do\+Compute\+Regions=true)
\item 
void \mbox{\hyperlink{class_t_vector_image_a33d15a5d52bf9e4109f7f0aaafdbd2c7}{remove\+Strokes}} (const std\+::vector$<$ int $>$ \&tobe\+Removed, bool delete\+Them, bool recompute\+Regions)
\begin{DoxyCompactList}\small\item\em Remove the strokes identified by indexes in the vector {\bfseries{to\+Be\+Removed}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_vector_image_a914b70e20e28adc9a1b25fc46de03a0e}{delete\+Stroke}} (int index)
\begin{DoxyCompactList}\small\item\em Delete the {\bfseries{\mbox{\hyperlink{class_t_stroke}{TStroke}}}} stroke of index {\bfseries{index}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_vector_image_ad16a83d2bcf39c4cf2133081786eb380}{delete\+Stroke}} (\mbox{\hyperlink{class_v_i_stroke}{VIStroke}} $\ast$stroke)
\begin{DoxyCompactList}\small\item\em Delete the {\bfseries{\mbox{\hyperlink{class_v_i_stroke}{VIStroke}}}} stroke. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_t_vector_image_ae79fbf2aec0f00876382f920227bfa05}{add\+Stroke}} (\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$, bool discard\+Points=true)
\item 
int \mbox{\hyperlink{class_t_vector_image_ad23e658b3e0a511e919f4181982a3698}{add\+Stroke\+To\+Group}} (\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$stroke, int stroke\+Index)
\item 
void \mbox{\hyperlink{class_t_vector_image_a615c5f07ed0827d5a8b4b5b15d0fcf78}{replace\+Stroke}} (int index, \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$new\+Stroke)
\begin{DoxyCompactList}\small\item\em Replace the stroke at index {\bfseries{index}} with {\bfseries{new\+Stroke}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_vector_image_afeb50170dac01241772194dd87549a32}{insert\+Stroke\+At}} (\mbox{\hyperlink{class_v_i_stroke}{VIStroke}} $\ast$vs, int stroke\+Index, bool recompute\+Regions=true)
\begin{DoxyCompactList}\small\item\em Insert a {\bfseries{\mbox{\hyperlink{class_v_i_stroke}{VIStroke}}}} {\bfseries{vs}} at index {\bfseries{stroke\+Index}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_vector_image_a764dfe9b8772127ee068b199e22fbcca}{move\+Strokes}} (int from\+Index, int count, int move\+Before)
\item 
void \mbox{\hyperlink{class_t_vector_image_abdf8a0d61015b8a6788175cd5e84ccc2}{find\+Regions}} ()
\begin{DoxyCompactList}\small\item\em Find regions of a {\bfseries{\mbox{\hyperlink{class_t_vector_image}{TVector\+Image}}}}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} \mbox{\hyperlink{class_t_vector_image_aae111c1199b73fb91a6f43759c12373d}{render}} (bool only\+Strokes)
\item 
\mbox{\hyperlink{class_t_region}{TRegion}} $\ast$ \mbox{\hyperlink{class_t_vector_image_ac6235eb0e4e37158e6750cb153464358}{get\+Region}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&p)
\item 
int \mbox{\hyperlink{class_t_vector_image_afbae92c94924bf743f889bed31535786}{fill}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&p, int style\+Id, bool only\+Empty=false)
\item 
bool \mbox{\hyperlink{class_t_vector_image_a21a45dbb1a37fa54736d23d546fe2588}{select\+Fill}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&select\+Area, \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$s, int style\+Id, bool only\+Unfilled, bool fill\+Areas, bool fill\+Lines)
\item 
void \mbox{\hyperlink{class_t_vector_image_afaa6c9898bf396fbe0c549750d085523}{area\+Fill}} (\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$stroke, int style\+Index, bool only\+Unfilled)
\begin{DoxyCompactList}\small\item\em Fill all regions contained in the {\bfseries{stroke}} area with {\bfseries{style\+Index}}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_t_vector_image_a8741d6e24b4c1d39f95a68cbcb1694f4}{fill\+Strokes}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&p, int new\+Style\+Id)
\item 
bool \mbox{\hyperlink{class_t_vector_image_ab0a1b79a4f49258b52147919212f9b3d}{is\+Computed\+Region\+Almost\+Once}} () const
\begin{DoxyCompactList}\small\item\em Return true if {\bfseries{compute\+Region}} method was called. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_rect_t}{TRectD}} \mbox{\hyperlink{class_t_vector_image_a86205b8e894a807fe76937c923f6abc0}{get\+BBox}} () const override
\begin{DoxyCompactList}\small\item\em Return the image bounding box in the image coordinate system. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_vector_image_a033795f887a81bb5c43873901bcaf8d7}{notify\+Changed\+Strokes}} (const std\+::vector$<$ int $>$ \&stroke\+Index\+Array, const std\+::vector$<$ \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ $>$ \&old\+Stroke\+Array, bool are\+Flipped=false)
\item 
void \mbox{\hyperlink{class_t_vector_image_a748abdc562d090f5cd80ffcbfa592c5a}{notify\+Changed\+Strokes}} (int stroke\+Index, \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$old\+Stroke=0, bool is\+Flipped=false)
\begin{DoxyCompactList}\small\item\em Call the following method after stroke modification. \end{DoxyCompactList}\item 
UINT \mbox{\hyperlink{class_t_vector_image_ad36e6c6587a107533a493e0c055d35a1}{get\+Fill\+Data}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{struct_t_vector_image_1_1_intersection_branch}{Intersection\+Branch}}\mbox{[}$\,$\mbox{]}$>$ \&v)
\item 
void \mbox{\hyperlink{class_t_vector_image_a1c5610a577ffb2ed9411970c15a76414}{set\+Fill\+Data}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{struct_t_vector_image_1_1_intersection_branch}{Intersection\+Branch}}\mbox{[}$\,$\mbox{]}$>$ const \&v, UINT size, bool do\+Compute\+Regions=true)
\item 
\mbox{\Hypertarget{class_t_vector_image_aaf27aad0a15120e206dc2906651f2461}\label{class_t_vector_image_aaf27aad0a15120e206dc2906651f2461}} 
void {\bfseries draw\+Autocloses} (const \mbox{\hyperlink{class_t_vector_render_data}{TVector\+Render\+Data}} \&rd) const
\item 
void \mbox{\hyperlink{class_t_vector_image_ab15deb6f96621857a54f377844fc8b41}{enable\+Region\+Computing}} (bool enabled, bool not\+Intersecting\+Strokes)
\item 
void \mbox{\hyperlink{class_t_vector_image_ac3d0e824b28ae3687d81987d1113ae58}{enable\+Minimize\+Edges}} (bool enabled)
\item 
\mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \mbox{\hyperlink{class_t_vector_image_aafe867b20d42316e773349d67963a7ea}{split\+Selected}} (bool remove\+Flag)
\item 
int \mbox{\hyperlink{class_t_vector_image_a70f699d338a41eee1589ea7131978cdf}{merge\+Image}} (const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&img, const \mbox{\hyperlink{class_t_affine}{TAffine}} \&affine, bool same\+Stroke\+Id=true)
\begin{DoxyCompactList}\small\item\em Merge the image with the {\bfseries{img}}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_t_vector_image_a94f380fab02a3583445c92d56a8275d4}{merge\+Image}} (const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&img, const \mbox{\hyperlink{class_t_affine}{TAffine}} \&affine, const std\+::map$<$ int, int $>$ \&style\+Table, bool same\+Stroke\+Id=true)
\item 
void \mbox{\hyperlink{class_t_vector_image_ad345a17710980f408d800d16cd21e7bc}{merge\+Image}} (const std\+::vector$<$ const \mbox{\hyperlink{class_t_vector_image}{TVector\+Image}} $\ast$ $>$ \&images)
\begin{DoxyCompactList}\small\item\em Merge the image with the vector of image {\bfseries{images}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_vector_image_a3baa3ace3a3972b976071f4e45b24204}{insert\+Image}} (const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&img, const std\+::vector$<$ int $>$ \&dst\+Indices)
\begin{DoxyCompactList}\small\item\em Insert the {\bfseries{\mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}}}} {\bfseries{img}}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \mbox{\hyperlink{class_t_vector_image_a4628d1d5287b5a9e8110dbbb6630e241}{split\+Image}} (const std\+::vector$<$ int $>$ \&indices, bool remove\+Flag)
\item 
void \mbox{\hyperlink{class_t_vector_image_ad898b236a4487fb55dffb3d5ded7d825}{get\+Used\+Styles}} (std\+::set$<$ int $>$ \&styles) const
\begin{DoxyCompactList}\small\item\em Return the used styles in the image. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_vector_image_a1428dee57a176a510da8079385a771dd}{reassign\+Styles}} (std\+::map$<$ int, int $>$ \&table)
\begin{DoxyCompactList}\small\item\em Reassign all stroke\textquotesingle{}s style. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_vector_image_a3104d5000ae8a21d6a69b261918c2c1c}{set\+Edge\+Colors}} (int stroke\+Index, int left\+Color\+Index, int right\+Color\+Index)
\item 
void \mbox{\hyperlink{class_t_vector_image_a9e8f62442d211e3777e2550cd612c15c}{split\+Stroke}} (int stroke\+Index, const std\+::vector$<$ Double\+Pair $>$ \&sorted\+WRanges)
\item 
\mbox{\hyperlink{class_v_i_stroke}{VIStroke}} $\ast$ \mbox{\hyperlink{class_t_vector_image_a0beab74f417fa292ca1d9575a6ff5ec4}{join\+Stroke}} (int index1, int index2, int cp\+Index1, int cp\+Index2, bool is\+Smooth)
\item 
\mbox{\hyperlink{class_v_i_stroke}{VIStroke}} $\ast$ \mbox{\hyperlink{class_t_vector_image_aa1e4db51bb687cca480f69f8773d0b96}{extend\+Stroke}} (int index, const \mbox{\hyperlink{class_t_thick_point}{TThick\+Point}} \&p, int cp\+Index, bool is\+Smooth)
\item 
\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ \mbox{\hyperlink{class_t_vector_image_aded1aaf380a466a773d03da55f7ebad2}{remove\+Endpoints}} (int stroke\+Index)
\item 
void \mbox{\hyperlink{class_t_vector_image_a6c01ce6a1797eac29163e9b92b7304c9}{restore\+Endpoints}} (int index, \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$old\+Stroke)
\item 
void \mbox{\hyperlink{class_t_vector_image_a3ed7e8f50c74faa95f75f787d5975f73}{set\+Autoclose\+Tolerance}} (double val)
\begin{DoxyCompactList}\small\item\em Set the autoclose tolerance to the specified value. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{class_t_vector_image_a99d62ac46627e7e05945c2e963a5ce29}{get\+Autoclose\+Tolerance}} () const
\begin{DoxyCompactList}\small\item\em Return the autoclose tolerance. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_vector_image_a193a77942595f079e999749a6066c4b8}{recompute\+Regions\+If\+Needed}} ()
\item 
void \mbox{\hyperlink{class_t_vector_image_af7a6c9f9b6298178b8dfa36d8711fae5}{erase\+Style\+Ids}} (const std\+::vector$<$ int $>$ style\+Ids)
\item 
\mbox{\hyperlink{class_t_thread_1_1_mutex}{TThread\+::\+Mutex}} $\ast$ \mbox{\hyperlink{class_t_vector_image_afb2774e089cbcee3db86b89f0d1caa91}{get\+Mutex}} () const
\item 
\mbox{\Hypertarget{class_t_vector_image_a90fb2a3db0ba459a43e75d4b2495ab7e}\label{class_t_vector_image_a90fb2a3db0ba459a43e75d4b2495ab7e}} 
void {\bfseries compute\+Region} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&p, int style\+Id)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{class_t_vector_image_ae5741356bfcc0715ed63c5ce9be16d92}{enable\+Stroke\+Style}} (int index, bool enable)
\begin{DoxyCompactList}\small\item\em Enable or disable the style of a stroke according to the {\bfseries{enable}} param. \end{DoxyCompactList}\item 
static bool \mbox{\hyperlink{class_t_vector_image_acf0efcaa32b85acc82688ace2c2b5afe}{is\+Stroke\+Style\+Enabled}} (int index)
\begin{DoxyCompactList}\small\item\em Return true if the style of the stroke identified by {\bfseries{index}} is enabled. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{class_t_vector_image_a484c802b55b763ae00e5e44706055b09}{transfer\+Stroke\+Colors}} (\mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} source\+Image, int source\+Stroke, \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} destination\+Image, int destination\+Stroke)
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{class_t_vector_image_1_1_imp}{Imp}} $>$ \mbox{\hyperlink{class_t_vector_image_a910e271d430158a1d14a40506dd351e0}{m\+\_\+imp}}
\end{DoxyCompactItemize}
\doxysubsection*{Related Functions}
(Note that these are not member functions.) \begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_vector_image_a8e4b6d01f1eb55b6aab4f5758f46d631}{Imp}} (\mbox{\hyperlink{class_t_vector_image}{TVector\+Image}} $\ast$vi)
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
\mbox{\hyperlink{class_t_vector_image}{TVector\+Image}}\+: describe a vector image. A vector image is a set of strokes and regions. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_vector_image_a61605055ad066eddbd5fbddc498f6e1e}\label{class_t_vector_image_a61605055ad066eddbd5fbddc498f6e1e}} 
\index{TVectorImage@{TVectorImage}!TVectorImage@{TVectorImage}}
\index{TVectorImage@{TVectorImage}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{TVectorImage()}{TVectorImage()}}
{\footnotesize\ttfamily TVector\+Image\+::\+TVector\+Image (\begin{DoxyParamCaption}\item[{bool}]{loaded = {\ttfamily false} }\end{DoxyParamCaption})}



if the vectorimage is loaded from disc, loaded=true 


\begin{DoxyCode}{0}
\DoxyCodeLine{00118                                       : m\_imp(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_vector_image_1_1_imp}{TVectorImage::Imp}}(\textcolor{keyword}{this})) \{}
\DoxyCodeLine{00119   \textcolor{keywordflow}{if} (loaded) m\_imp-\/>m\_justLoaded = \textcolor{keyword}{true};}
\DoxyCodeLine{00120 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01157}{clone\+Image()}}, and \mbox{\hyperlink{l01554}{split\+Selected()}}.

\mbox{\Hypertarget{class_t_vector_image_a4d6e07bbd786de26dea0b2443377a30e}\label{class_t_vector_image_a4d6e07bbd786de26dea0b2443377a30e}} 
\index{TVectorImage@{TVectorImage}!````~TVectorImage@{$\sim$TVectorImage}}
\index{````~TVectorImage@{$\sim$TVectorImage}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{$\sim$TVectorImage()}{~TVectorImage()}}
{\footnotesize\ttfamily TVector\+Image\+::$\sim$\+TVector\+Image (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00124 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_vector_image_ae79fbf2aec0f00876382f920227bfa05}\label{class_t_vector_image_ae79fbf2aec0f00876382f920227bfa05}} 
\index{TVectorImage@{TVectorImage}!addStroke@{addStroke}}
\index{addStroke@{addStroke}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{addStroke()}{addStroke()}}
{\footnotesize\ttfamily int TVector\+Image\+::add\+Stroke (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke,  }\item[{bool}]{discard\+Points = {\ttfamily true} }\end{DoxyParamCaption})}

Add a stroke at the end of the vector; returns position of the stroke (or -\/1 if not added) 
\begin{DoxyCode}{0}
\DoxyCodeLine{00150                                                                \{}
\DoxyCodeLine{00151   \textcolor{keywordflow}{if} (discardPoints) \{}
\DoxyCodeLine{00152     \mbox{\hyperlink{class_t_rect_t}{TRectD}} bBox = stroke-\/>\mbox{\hyperlink{class_t_stroke_a456bedcae5e8af3a84823cb251584957}{getBBox}}();}
\DoxyCodeLine{00153     \textcolor{keywordflow}{if} (bBox.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} == bBox.x1 \&\& bBox.y0 == bBox.y1)  \textcolor{comment}{// empty stroke: discard}}
\DoxyCodeLine{00154       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00155   \}}
\DoxyCodeLine{00156 }
\DoxyCodeLine{00157   \textcolor{keywordflow}{if} (m\_imp-\/>m\_insideGroup != \mbox{\hyperlink{class_t_group_id}{TGroupId}}()) \{}
\DoxyCodeLine{00158     \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00159     \textcolor{keywordflow}{for} (i = m\_imp-\/>m\_strokes.size() -\/ 1; i >= 0; i-\/-\/)}
\DoxyCodeLine{00160       \textcolor{keywordflow}{if} (m\_imp-\/>m\_insideGroup.isParentOf(m\_imp-\/>m\_strokes[i]-\/>m\_groupId)) \{}
\DoxyCodeLine{00161         m\_imp-\/>insertStrokeAt(}
\DoxyCodeLine{00162             \textcolor{keyword}{new} \mbox{\hyperlink{class_v_i_stroke}{VIStroke}}(stroke, m\_imp-\/>m\_strokes[i]-\/>m\_groupId), i + 1);}
\DoxyCodeLine{00163         \textcolor{keywordflow}{return} i + 1;}
\DoxyCodeLine{00164       \}}
\DoxyCodeLine{00165   \}}
\DoxyCodeLine{00166 }
\DoxyCodeLine{00167   \mbox{\hyperlink{class_t_group_id}{TGroupId}} gid;}
\DoxyCodeLine{00168   \textcolor{keywordflow}{if} (m\_imp-\/>m\_strokes.empty() ||}
\DoxyCodeLine{00169       m\_imp-\/>m\_strokes.back()-\/>m\_groupId.isGrouped() != 0)}
\DoxyCodeLine{00170     gid = \mbox{\hyperlink{class_t_group_id}{TGroupId}}(\textcolor{keyword}{this}, \textcolor{keyword}{true});}
\DoxyCodeLine{00171   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00172     gid = m\_imp-\/>m\_strokes.back()-\/>m\_groupId;}
\DoxyCodeLine{00173 }
\DoxyCodeLine{00174   m\_imp-\/>m\_strokes.push\_back(\textcolor{keyword}{new} \mbox{\hyperlink{class_v_i_stroke}{VIStroke}}(stroke, gid));}
\DoxyCodeLine{00175   m\_imp-\/>m\_areValidRegions = \textcolor{keyword}{false};}
\DoxyCodeLine{00176   \textcolor{keywordflow}{return} m\_imp-\/>m\_strokes.size() -\/ 1;}
\DoxyCodeLine{00177 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01861}{TStroke\+::get\+BBox()}}, and \mbox{\hyperlink{l00557}{TRect\+T$<$ T $>$\+::x0}}.



Referenced by \mbox{\hyperlink{l02417}{area\+Fill()}}, \mbox{\hyperlink{l00760}{Raster\+Tape\+Tool\+::check\+Segments()}}, \mbox{\hyperlink{l02107}{TImage\+Reader\+Svg\+::load()}}, and \mbox{\hyperlink{l00277}{Area\+Filler\+::stroke\+Fill()}}.

\mbox{\Hypertarget{class_t_vector_image_ad23e658b3e0a511e919f4181982a3698}\label{class_t_vector_image_ad23e658b3e0a511e919f4181982a3698}} 
\index{TVectorImage@{TVectorImage}!addStrokeToGroup@{addStrokeToGroup}}
\index{addStrokeToGroup@{addStrokeToGroup}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{addStrokeToGroup()}{addStrokeToGroup()}}
{\footnotesize\ttfamily int TVector\+Image\+::add\+Stroke\+To\+Group (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke,  }\item[{int}]{stroke\+Index }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00134                                                                    \{}
\DoxyCodeLine{00135   \textcolor{keywordflow}{if} (!m\_imp-\/>m\_strokes[strokeIndex]-\/>m\_groupId.isGrouped())}
\DoxyCodeLine{00136     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_vector_image_ae79fbf2aec0f00876382f920227bfa05}{addStroke}}(stroke, \textcolor{keyword}{true});}
\DoxyCodeLine{00137   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = m\_imp-\/>m\_strokes.size() -\/ 1; i >= 0; i-\/-\/)}
\DoxyCodeLine{00138     \textcolor{keywordflow}{if} (m\_imp-\/>m\_strokes[i]-\/>m\_groupId ==}
\DoxyCodeLine{00139         m\_imp-\/>m\_strokes[strokeIndex]-\/>m\_groupId) \{}
\DoxyCodeLine{00140       m\_imp-\/>insertStrokeAt(}
\DoxyCodeLine{00141           \textcolor{keyword}{new} \mbox{\hyperlink{class_v_i_stroke}{VIStroke}}(stroke, m\_imp-\/>m\_strokes[i]-\/>m\_groupId), i + 1);}
\DoxyCodeLine{00142       \textcolor{keywordflow}{return} i + 1;}
\DoxyCodeLine{00143     \}}
\DoxyCodeLine{00144   assert(\textcolor{keyword}{false});}
\DoxyCodeLine{00145   \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00146 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_afaa6c9898bf396fbe0c549750d085523}\label{class_t_vector_image_afaa6c9898bf396fbe0c549750d085523}} 
\index{TVectorImage@{TVectorImage}!areaFill@{areaFill}}
\index{areaFill@{areaFill}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{areaFill()}{areaFill()}}
{\footnotesize\ttfamily void TVector\+Image\+::area\+Fill (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke,  }\item[{int}]{style\+Index,  }\item[{bool}]{only\+Unfilled }\end{DoxyParamCaption})}



Fill all regions contained in the {\bfseries{stroke}} area with {\bfseries{style\+Index}}. 


\begin{DoxyCode}{0}
\DoxyCodeLine{02417                                                                            \{}
\DoxyCodeLine{02418   \mbox{\hyperlink{class_t_vector_image}{TVectorImage}} v;}
\DoxyCodeLine{02419   v.\mbox{\hyperlink{class_t_vector_image_ae79fbf2aec0f00876382f920227bfa05}{addStroke}}(stroke);}
\DoxyCodeLine{02420   v.findRegions();}
\DoxyCodeLine{02421 }
\DoxyCodeLine{02422   \textcolor{keywordflow}{for} (UINT i = 0; i < v.\mbox{\hyperlink{class_t_vector_image_a12e56e674828c172749d5bc1855bc977}{getRegionCount}}(); i++)}
\DoxyCodeLine{02423     \textcolor{keywordflow}{for} (UINT j = 0; j < \mbox{\hyperlink{class_t_vector_image_a12e56e674828c172749d5bc1855bc977}{getRegionCount}}(); j++) \{}
\DoxyCodeLine{02424       \textcolor{keywordflow}{if} (m\_imp-\/>m\_insideGroup != \mbox{\hyperlink{class_t_group_id}{TGroupId}}() \&\&}
\DoxyCodeLine{02425           !m\_imp-\/>m\_insideGroup.isParentOf(}
\DoxyCodeLine{02426               m\_imp-\/>m\_strokes[\mbox{\hyperlink{class_t_vector_image_a17f9e44c72c82c54d0cf9fefed85e12f}{getRegion}}(j)-\/>getEdge(0)-\/>m\_index]-\/>m\_groupId))}
\DoxyCodeLine{02427         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02428 }
\DoxyCodeLine{02429       \textcolor{keywordflow}{if} (v.\mbox{\hyperlink{class_t_vector_image_a17f9e44c72c82c54d0cf9fefed85e12f}{getRegion}}(i)-\/>contains(*\mbox{\hyperlink{class_t_vector_image_a17f9e44c72c82c54d0cf9fefed85e12f}{getRegion}}(j)))}
\DoxyCodeLine{02430         \mbox{\hyperlink{class_t_vector_image_a17f9e44c72c82c54d0cf9fefed85e12f}{getRegion}}(j)-\/>setStyle(index);}
\DoxyCodeLine{02431     \}}
\DoxyCodeLine{02432 }
\DoxyCodeLine{02433   v.\mbox{\hyperlink{class_t_vector_image_a33a9f3cddc17630c35c8bf62e9989cc2}{removeStroke}}(0);}
\DoxyCodeLine{02434 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00150}{add\+Stroke()}}, \mbox{\hyperlink{l00406}{get\+Region()}}, \mbox{\hyperlink{l00399}{get\+Region\+Count()}}, and \mbox{\hyperlink{l00274}{remove\+Stroke()}}.

\mbox{\Hypertarget{class_t_vector_image_a1957d05b7edf80aee137479d23dc33fb}\label{class_t_vector_image_a1957d05b7edf80aee137479d23dc33fb}} 
\index{TVectorImage@{TVectorImage}!areDifferentGroup@{areDifferentGroup}}
\index{areDifferentGroup@{areDifferentGroup}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{areDifferentGroup()}{areDifferentGroup()}}
{\footnotesize\ttfamily int TVector\+Image\+::are\+Different\+Group (\begin{DoxyParamCaption}\item[{UINT}]{index1,  }\item[{bool}]{is\+Region1,  }\item[{UINT}]{index2,  }\item[{bool}]{is\+Region2 }\end{DoxyParamCaption}) const}



Return -\/1 if two object are contained in the same group. 

Objects can be strokes or regions\+: they are identified by {\bfseries{index1}} and {\bfseries{index2}}. If objects aren\textquotesingle{}t in the same group, the method return the number of equal level into the nested groups. 
\begin{DoxyCode}{0}
\DoxyCodeLine{02583                                                           \{}
\DoxyCodeLine{02584   \textcolor{keywordflow}{return} m\_imp-\/>areDifferentGroup(index1, isRegion1, index2, isRegion2);}
\DoxyCodeLine{02585 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a989544a62bcc3060517f5a514bfe3dd0}\label{class_t_vector_image_a989544a62bcc3060517f5a514bfe3dd0}} 
\index{TVectorImage@{TVectorImage}!areValidRegions@{areValidRegions}}
\index{areValidRegions@{areValidRegions}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{areValidRegions()}{areValidRegions()}}
{\footnotesize\ttfamily bool TVector\+Image\+::are\+Valid\+Regions (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Get valid regions flags. 

Call \mbox{\hyperlink{class_t_vector_image_a025c88bdd434e110192d0b64a5f28ba9}{validate\+Regions()}} after region/stroke changes \mbox{\Hypertarget{class_t_vector_image_a845401353dfb8186744db8ede7db0494}\label{class_t_vector_image_a845401353dfb8186744db8ede7db0494}} 
\index{TVectorImage@{TVectorImage}!canEnterGroup@{canEnterGroup}}
\index{canEnterGroup@{canEnterGroup}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{canEnterGroup()}{canEnterGroup()}}
{\footnotesize\ttfamily bool TVector\+Image\+::can\+Enter\+Group (\begin{DoxyParamCaption}\item[{int}]{stroke\+Index }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{02926                                                       \{}
\DoxyCodeLine{02927   \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *vs = m\_imp-\/>m\_strokes[strokeIndex];}
\DoxyCodeLine{02928 }
\DoxyCodeLine{02929   \textcolor{keywordflow}{if} (!vs-\/>m\_groupId.isGrouped()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{02930 }
\DoxyCodeLine{02931   \textcolor{keywordflow}{return} m\_imp-\/>m\_insideGroup == \mbox{\hyperlink{class_t_group_id}{TGroupId}}() ||}
\DoxyCodeLine{02932          vs-\/>m\_groupId != m\_imp-\/>m\_insideGroup;}
\DoxyCodeLine{02933 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a1d5406a8fffac3eca70a5bbb37ee4ed3}\label{class_t_vector_image_a1d5406a8fffac3eca70a5bbb37ee4ed3}} 
\index{TVectorImage@{TVectorImage}!canMoveStrokes@{canMoveStrokes}}
\index{canMoveStrokes@{canMoveStrokes}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{canMoveStrokes()}{canMoveStrokes()}}
{\footnotesize\ttfamily bool TVector\+Image\+::can\+Move\+Strokes (\begin{DoxyParamCaption}\item[{int}]{stroke\+Index,  }\item[{int}]{count,  }\item[{int}]{move\+Before }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{02804                                                         \{}
\DoxyCodeLine{02805   \textcolor{keywordflow}{return} m\_imp-\/>canMoveStrokes(strokeIndex, count, moveBefore);}
\DoxyCodeLine{02806 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a0aeac8f2cab4178fa732a237a9b3dbd9}\label{class_t_vector_image_a0aeac8f2cab4178fa732a237a9b3dbd9}} 
\index{TVectorImage@{TVectorImage}!clone@{clone}}
\index{clone@{clone}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{clone()}{clone()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} TVector\+Image\+::clone (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Return a clone of image. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01151                                         \{}
\DoxyCodeLine{01152   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}}(\mbox{\hyperlink{class_t_vector_image_acd445472f4f986f215f7b05c344a8ec8}{cloneImage}}());}
\DoxyCodeLine{01153 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01157}{clone\+Image()}}.



Referenced by \mbox{\hyperlink{l00821}{Stage\+::\+Raster\+Painter\+::on\+Vector\+Image()}}.

\mbox{\Hypertarget{class_t_vector_image_acd445472f4f986f215f7b05c344a8ec8}\label{class_t_vector_image_acd445472f4f986f215f7b05c344a8ec8}} 
\index{TVectorImage@{TVectorImage}!cloneImage@{cloneImage}}
\index{cloneImage@{cloneImage}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{cloneImage()}{cloneImage()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_image}{TImage}} $\ast$ TVector\+Image\+::clone\+Image (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Create a new {\bfseries{\mbox{\hyperlink{class_t_image}{TImage}}}}. 



Implements \mbox{\hyperlink{class_t_image_a3632b96b398057030a4adfe6917d2e28}{TImage}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01157                                        \{}
\DoxyCodeLine{01158   \mbox{\hyperlink{class_t_vector_image}{TVectorImage}} *out = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_vector_image_a61605055ad066eddbd5fbddc498f6e1e}{TVectorImage}};}
\DoxyCodeLine{01159 }
\DoxyCodeLine{01160   out-\/>m\_imp-\/>m\_autocloseTolerance = m\_imp-\/>m\_autocloseTolerance;}
\DoxyCodeLine{01161   out-\/>m\_imp-\/>m\_maxGroupId         = m\_imp-\/>m\_maxGroupId;}
\DoxyCodeLine{01162   out-\/>m\_imp-\/>m\_maxGhostGroupId    = m\_imp-\/>m\_maxGhostGroupId;}
\DoxyCodeLine{01163 }
\DoxyCodeLine{01164   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)m\_imp-\/>m\_strokes.size(); i++) \{}
\DoxyCodeLine{01165     out-\/>m\_imp-\/>m\_strokes.push\_back(\textcolor{keyword}{new} \mbox{\hyperlink{class_v_i_stroke}{VIStroke}}(*(m\_imp-\/>m\_strokes[i])));}
\DoxyCodeLine{01166     out-\/>m\_imp-\/>m\_strokes.back()-\/>m\_s-\/>setId(m\_imp-\/>m\_strokes[i]-\/>m\_s-\/>getId());}
\DoxyCodeLine{01167   \}}
\DoxyCodeLine{01168 }
\DoxyCodeLine{01169   m\_imp-\/>cloneRegions(*out-\/>m\_imp);}
\DoxyCodeLine{01170 }
\DoxyCodeLine{01171   out-\/>\mbox{\hyperlink{class_t_image_a3377c18a849addff5c2cb238176ad04f}{setPalette}}(getPalette());}
\DoxyCodeLine{01172   out-\/>m\_imp-\/>m\_computedAlmostOnce = m\_imp-\/>m\_computedAlmostOnce;}
\DoxyCodeLine{01173   out-\/>m\_imp-\/>m\_justLoaded         = m\_imp-\/>m\_justLoaded;}
\DoxyCodeLine{01174 }
\DoxyCodeLine{01175   \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{01176 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00009}{TImage\+::set\+Palette()}}, and \mbox{\hyperlink{l00118}{TVector\+Image()}}.



Referenced by \mbox{\hyperlink{l01151}{clone()}}.

\mbox{\Hypertarget{class_t_vector_image_a914b70e20e28adc9a1b25fc46de03a0e}\label{class_t_vector_image_a914b70e20e28adc9a1b25fc46de03a0e}} 
\index{TVectorImage@{TVectorImage}!deleteStroke@{deleteStroke}}
\index{deleteStroke@{deleteStroke}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{deleteStroke()}{deleteStroke()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void TVector\+Image\+::delete\+Stroke (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})}



Delete the {\bfseries{\mbox{\hyperlink{class_t_stroke}{TStroke}}}} stroke of index {\bfseries{index}}. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00330                                          \{}
\DoxyCodeLine{00331   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = \mbox{\hyperlink{class_t_vector_image_a33a9f3cddc17630c35c8bf62e9989cc2}{removeStroke}}(index);}
\DoxyCodeLine{00332   \textcolor{keyword}{delete} stroke;}
\DoxyCodeLine{00333 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00274}{remove\+Stroke()}}.



Referenced by \mbox{\hyperlink{l00337}{delete\+Stroke()}}.

\mbox{\Hypertarget{class_t_vector_image_ad16a83d2bcf39c4cf2133081786eb380}\label{class_t_vector_image_ad16a83d2bcf39c4cf2133081786eb380}} 
\index{TVectorImage@{TVectorImage}!deleteStroke@{deleteStroke}}
\index{deleteStroke@{deleteStroke}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{deleteStroke()}{deleteStroke()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void TVector\+Image\+::delete\+Stroke (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_v_i_stroke}{VIStroke}} $\ast$}]{stroke }\end{DoxyParamCaption})}



Delete the {\bfseries{\mbox{\hyperlink{class_v_i_stroke}{VIStroke}}}} stroke. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00337                                                 \{}
\DoxyCodeLine{00338   UINT index = 0;}
\DoxyCodeLine{00339   \textcolor{keywordflow}{for} (; index < m\_imp-\/>m\_strokes.size(); index++)}
\DoxyCodeLine{00340     \textcolor{keywordflow}{if} (m\_imp-\/>m\_strokes[index] == stroke) \{}
\DoxyCodeLine{00341       \mbox{\hyperlink{class_t_vector_image_a914b70e20e28adc9a1b25fc46de03a0e}{deleteStroke}}(index);}
\DoxyCodeLine{00342       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00343     \}}
\DoxyCodeLine{00344 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00330}{delete\+Stroke()}}.

\mbox{\Hypertarget{class_t_vector_image_ac3d0e824b28ae3687d81987d1113ae58}\label{class_t_vector_image_ac3d0e824b28ae3687d81987d1113ae58}} 
\index{TVectorImage@{TVectorImage}!enableMinimizeEdges@{enableMinimizeEdges}}
\index{enableMinimizeEdges@{enableMinimizeEdges}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{enableMinimizeEdges()}{enableMinimizeEdges()}}
{\footnotesize\ttfamily void TVector\+Image\+::enable\+Minimize\+Edges (\begin{DoxyParamCaption}\item[{bool}]{enabled }\end{DoxyParamCaption})}

if enabled, region edges are joined together when possible. for flash render, should be disabled! 
\begin{DoxyCode}{0}
\DoxyCodeLine{01521                                                    \{}
\DoxyCodeLine{01522   m\_imp-\/>m\_minimizeEdges = enabled;}
\DoxyCodeLine{01523 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_ab15deb6f96621857a54f377844fc8b41}\label{class_t_vector_image_ab15deb6f96621857a54f377844fc8b41}} 
\index{TVectorImage@{TVectorImage}!enableRegionComputing@{enableRegionComputing}}
\index{enableRegionComputing@{enableRegionComputing}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{enableRegionComputing()}{enableRegionComputing()}}
{\footnotesize\ttfamily void TVector\+Image\+::enable\+Region\+Computing (\begin{DoxyParamCaption}\item[{bool}]{enabled,  }\item[{bool}]{not\+Intersecting\+Strokes }\end{DoxyParamCaption})}

Includes a (transformed) copy of imgs in this. If set\+Selected==true then selects imported strokes. It also includes the color information. Try to assign the same stroke ids (if unused) 
\begin{DoxyCode}{0}
\DoxyCodeLine{01514                                                                       \{}
\DoxyCodeLine{01515   m\_imp-\/>m\_computeRegions         = enabled;}
\DoxyCodeLine{01516   m\_imp-\/>m\_notIntersectingStrokes = notIntersectingStrokes;}
\DoxyCodeLine{01517 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_ae5741356bfcc0715ed63c5ce9be16d92}\label{class_t_vector_image_ae5741356bfcc0715ed63c5ce9be16d92}} 
\index{TVectorImage@{TVectorImage}!enableStrokeStyle@{enableStrokeStyle}}
\index{enableStrokeStyle@{enableStrokeStyle}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{enableStrokeStyle()}{enableStrokeStyle()}}
{\footnotesize\ttfamily void TVector\+Image\+::enable\+Stroke\+Style (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{bool}]{enable }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Enable or disable the style of a stroke according to the {\bfseries{enable}} param. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01607                                                            \{}
\DoxyCodeLine{01608   DisabledStrokeStyles \&disabledSet = getDisabledStrokeStyleSet();}
\DoxyCodeLine{01609   \textcolor{keywordflow}{if} (enable)}
\DoxyCodeLine{01610     disabledSet.erase(index);}
\DoxyCodeLine{01611   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01612     disabledSet.insert(index);}
\DoxyCodeLine{01613 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a74aab683699638fdb1c93fb42483a31e}\label{class_t_vector_image_a74aab683699638fdb1c93fb42483a31e}} 
\index{TVectorImage@{TVectorImage}!enterGroup@{enterGroup}}
\index{enterGroup@{enterGroup}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{enterGroup()}{enterGroup()}}
{\footnotesize\ttfamily bool TVector\+Image\+::enter\+Group (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02509                                        \{}
\DoxyCodeLine{02510   \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *vs = \mbox{\hyperlink{class_t_vector_image_aafc4a988330c27a598b0e55140c94731}{getVIStroke}}(index);}
\DoxyCodeLine{02511 }
\DoxyCodeLine{02512   \textcolor{keywordflow}{if} (!vs-\/>m\_groupId.isGrouped()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{02513 }
\DoxyCodeLine{02514   \textcolor{keywordtype}{int} newDepth = vs-\/>m\_groupId.getCommonParentDepth(m\_imp-\/>m\_insideGroup) + 1;}
\DoxyCodeLine{02515 }
\DoxyCodeLine{02516   \mbox{\hyperlink{class_t_group_id}{TGroupId}} newGroupId = vs-\/>m\_groupId;}
\DoxyCodeLine{02517 }
\DoxyCodeLine{02518   \textcolor{keywordflow}{while} (newGroupId.getDepth() > newDepth) newGroupId = newGroupId.getParent();}
\DoxyCodeLine{02519 }
\DoxyCodeLine{02520   \textcolor{keywordflow}{if} (newGroupId == m\_imp-\/>m\_insideGroup) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{02521 }
\DoxyCodeLine{02522   m\_imp-\/>m\_insideGroup = newGroupId;}
\DoxyCodeLine{02523   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{02524 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_af7a6c9f9b6298178b8dfa36d8711fae5}\label{class_t_vector_image_af7a6c9f9b6298178b8dfa36d8711fae5}} 
\index{TVectorImage@{TVectorImage}!eraseStyleIds@{eraseStyleIds}}
\index{eraseStyleIds@{eraseStyleIds}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{eraseStyleIds()}{eraseStyleIds()}}
{\footnotesize\ttfamily void TVector\+Image\+::erase\+Style\+Ids (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ int $>$}]{style\+Ids }\end{DoxyParamCaption})}

Remove all image strokes and all image regions with style index contained in {\bfseries{style\+Ids}} vector. 
\begin{DoxyCode}{0}
\DoxyCodeLine{01458                                                               \{}
\DoxyCodeLine{01459   \textcolor{keywordtype}{int} j;}
\DoxyCodeLine{01460   \textcolor{keywordflow}{for} (j = 0; j < (int)styleIds.size(); j++) \{}
\DoxyCodeLine{01461     \textcolor{keywordtype}{int} styleId = styleIds[j];}
\DoxyCodeLine{01462 }
\DoxyCodeLine{01463     \textcolor{keywordtype}{int} strokeCount = \mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{getStrokeCount}}();}
\DoxyCodeLine{01464     \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01465     \textcolor{keywordflow}{for} (i = strokeCount -\/ 1; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{01466       \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = \mbox{\hyperlink{class_t_vector_image_a1aa2f3ab6c30a6f8a64b2cb35072ffeb}{getStroke}}(i);}
\DoxyCodeLine{01467       \textcolor{keywordflow}{if} (stroke \&\& stroke-\/>\mbox{\hyperlink{class_t_stroke_ab77068d7894a29cc1878e173f46ed785}{getStyle}}() == styleId) \mbox{\hyperlink{class_t_vector_image_a33a9f3cddc17630c35c8bf62e9989cc2}{removeStroke}}(i);}
\DoxyCodeLine{01468     \}}
\DoxyCodeLine{01469     \textcolor{keywordtype}{int} regionCount = \mbox{\hyperlink{class_t_vector_image_a12e56e674828c172749d5bc1855bc977}{getRegionCount}}();}
\DoxyCodeLine{01470     \textcolor{keywordflow}{for} (i = 0; i < regionCount; i++) \{}
\DoxyCodeLine{01471       \mbox{\hyperlink{class_t_region}{TRegion}} *region = \mbox{\hyperlink{class_t_vector_image_a17f9e44c72c82c54d0cf9fefed85e12f}{getRegion}}(i);}
\DoxyCodeLine{01472       \textcolor{keywordflow}{if} (!region || region-\/>getStyle() != styleId) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01473       \mbox{\hyperlink{class_t_point_t}{TPointD}} p;}
\DoxyCodeLine{01474       \textcolor{keywordflow}{if} (region-\/>getInternalPoint(p)) \mbox{\hyperlink{class_t_vector_image_afbae92c94924bf743f889bed31535786}{fill}}(p, 0);}
\DoxyCodeLine{01475     \}}
\DoxyCodeLine{01476   \}}
\DoxyCodeLine{01477 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00705}{fill()}}, \mbox{\hyperlink{l00406}{get\+Region()}}, \mbox{\hyperlink{l00399}{get\+Region\+Count()}}, \mbox{\hyperlink{l00524}{get\+Stroke()}}, \mbox{\hyperlink{l00388}{get\+Stroke\+Count()}}, \mbox{\hyperlink{l02366}{TStroke\+::get\+Style()}}, and \mbox{\hyperlink{l00274}{remove\+Stroke()}}.

\mbox{\Hypertarget{class_t_vector_image_ad4cb3fe28d9ce75b41f222259f0c42fd}\label{class_t_vector_image_ad4cb3fe28d9ce75b41f222259f0c42fd}} 
\index{TVectorImage@{TVectorImage}!exitGroup@{exitGroup}}
\index{exitGroup@{exitGroup}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{exitGroup()}{exitGroup()}}
{\footnotesize\ttfamily int TVector\+Image\+::exit\+Group (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02528                             \{}
\DoxyCodeLine{02529   \textcolor{keywordflow}{if} (m\_imp-\/>m\_insideGroup == \mbox{\hyperlink{class_t_group_id}{TGroupId}}()) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{02530 }
\DoxyCodeLine{02531   \textcolor{keywordtype}{int} i, ret = -\/1;}
\DoxyCodeLine{02532   \textcolor{keywordflow}{for} (i = 0; i < (int)m\_imp-\/>m\_strokes.size(); i++) \{}
\DoxyCodeLine{02533     \textcolor{keywordflow}{if} (m\_imp-\/>m\_strokes[i]-\/>m\_groupId.getCommonParentDepth(}
\DoxyCodeLine{02534             m\_imp-\/>m\_insideGroup) >= m\_imp-\/>m\_insideGroup.getDepth()) \{}
\DoxyCodeLine{02535       ret = i;}
\DoxyCodeLine{02536       \textcolor{keywordflow}{break};}
\DoxyCodeLine{02537     \}}
\DoxyCodeLine{02538   \}}
\DoxyCodeLine{02539 }
\DoxyCodeLine{02540   assert(i != m\_imp-\/>m\_strokes.size());}
\DoxyCodeLine{02541 }
\DoxyCodeLine{02542   m\_imp-\/>m\_insideGroup = m\_imp-\/>m\_insideGroup.getParent();}
\DoxyCodeLine{02543   \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{02544 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_aa1e4db51bb687cca480f69f8773d0b96}\label{class_t_vector_image_aa1e4db51bb687cca480f69f8773d0b96}} 
\index{TVectorImage@{TVectorImage}!extendStroke@{extendStroke}}
\index{extendStroke@{extendStroke}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{extendStroke()}{extendStroke()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} $\ast$ TVector\+Image\+::extend\+Stroke (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{const \mbox{\hyperlink{class_t_thick_point}{TThick\+Point}} \&}]{p,  }\item[{int}]{cp\+Index,  }\item[{bool}]{is\+Smooth }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02377                                                                  \{}
\DoxyCodeLine{02378   \textcolor{keywordflow}{if} (isSmooth)}
\DoxyCodeLine{02379     \textcolor{keywordflow}{return} m\_imp-\/>extendStrokeSmoothly(index, p, cpIndex);}
\DoxyCodeLine{02380   \textcolor{keywordflow}{else}}
\DoxyCodeLine{02381     \textcolor{keywordflow}{return} m\_imp-\/>extendStroke(index, p, cpIndex);}
\DoxyCodeLine{02382 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_afbae92c94924bf743f889bed31535786}\label{class_t_vector_image_afbae92c94924bf743f889bed31535786}} 
\index{TVectorImage@{TVectorImage}!fill@{fill}}
\index{fill@{fill}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{fill()}{fill()}}
{\footnotesize\ttfamily int TVector\+Image\+::fill (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{p,  }\item[{int}]{style\+Id,  }\item[{bool}]{only\+Empty = {\ttfamily false} }\end{DoxyParamCaption})}

Fill the region which contains {\bfseries{p}} with {\bfseries{style\+Id}}. it returns the style of the region before filling or -\/1 if not filled. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00705                                                                        \{}
\DoxyCodeLine{00706   \mbox{\hyperlink{class_t_region}{TRegion}} *r = \mbox{\hyperlink{class_t_vector_image_a17f9e44c72c82c54d0cf9fefed85e12f}{getRegion}}(p);}
\DoxyCodeLine{00707   \textcolor{keywordflow}{if} (onlyEmpty \&\& r \&\& r-\/>getStyle() != 0) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00708 }
\DoxyCodeLine{00709   \textcolor{keywordflow}{if} (!m\_imp-\/>m\_areValidRegions) m\_imp-\/>computeRegions();}
\DoxyCodeLine{00710   \textcolor{keywordflow}{return} m\_imp-\/>fill(p, newStyleId);}
\DoxyCodeLine{00711 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00406}{get\+Region()}}.



Referenced by \mbox{\hyperlink{l01458}{erase\+Style\+Ids()}}.

\mbox{\Hypertarget{class_t_vector_image_a8741d6e24b4c1d39f95a68cbcb1694f4}\label{class_t_vector_image_a8741d6e24b4c1d39f95a68cbcb1694f4}} 
\index{TVectorImage@{TVectorImage}!fillStrokes@{fillStrokes}}
\index{fillStrokes@{fillStrokes}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{fillStrokes()}{fillStrokes()}}
{\footnotesize\ttfamily int TVector\+Image\+::fill\+Strokes (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{p,  }\item[{int}]{new\+Style\+Id }\end{DoxyParamCaption})}

Fill the stroke which contains {\bfseries{p}} with {\bfseries{new\+Style\+Id}}; it returns the style of stroke before filling or -\/1 if not filled. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00679                                                            \{}
\DoxyCodeLine{00680   UINT index;}
\DoxyCodeLine{00681   \textcolor{keywordtype}{double} outW, dist2;}
\DoxyCodeLine{00682 }
\DoxyCodeLine{00683   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_vector_image_abc85189e12c100c482fb0ef7dc378602}{getNearestStroke}}(p, outW, index, dist2, \textcolor{keyword}{true})) \{}
\DoxyCodeLine{00684     \textcolor{keywordtype}{double} thick = \mbox{\hyperlink{class_t_vector_image_a1aa2f3ab6c30a6f8a64b2cb35072ffeb}{getStroke}}(index)-\/>\mbox{\hyperlink{class_t_stroke_ada4f6fc3fea4a7c0b949cd1d9dc6e640}{getThickPoint}}(outW).thick * 1.25;}
\DoxyCodeLine{00685     \textcolor{keywordflow}{if} (thick < 0.5) thick = 0.5;}
\DoxyCodeLine{00686 }
\DoxyCodeLine{00687     \textcolor{keywordflow}{if} (dist2 > thick * thick) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00688     assert(index >= 0 \&\& index < m\_imp-\/>m\_strokes.size());}
\DoxyCodeLine{00689     \textcolor{keywordtype}{int} ret = m\_imp-\/>m\_strokes[index]-\/>m\_s-\/>getStyle();}
\DoxyCodeLine{00690     m\_imp-\/>m\_strokes[index]-\/>m\_s-\/>setStyle(styleId);}
\DoxyCodeLine{00691     \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00692   \}}
\DoxyCodeLine{00693 }
\DoxyCodeLine{00694   \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00695 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00592}{get\+Nearest\+Stroke()}}, \mbox{\hyperlink{l00524}{get\+Stroke()}}, and \mbox{\hyperlink{l01960}{TStroke\+::get\+Thick\+Point()}}.

\mbox{\Hypertarget{class_t_vector_image_aa720fd18b1fd94d3121fdd533392d9e8}\label{class_t_vector_image_aa720fd18b1fd94d3121fdd533392d9e8}} 
\index{TVectorImage@{TVectorImage}!findRegion@{findRegion}}
\index{findRegion@{findRegion}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{findRegion()}{findRegion()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_region}{TRegion}} $\ast$ TVector\+Image\+::find\+Region (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_region}{TRegion}} \&}]{region }\end{DoxyParamCaption}) const}



returns the region equivalent to region, 0 if does not exists. 


\begin{DoxyCode}{0}
\DoxyCodeLine{03015                                                              \{}
\DoxyCodeLine{03016   \mbox{\hyperlink{class_t_region}{TRegion}} *ret = 0;}
\DoxyCodeLine{03017 }
\DoxyCodeLine{03018   \textcolor{keywordflow}{for} (std::vector<TRegion *>::iterator it = m\_imp-\/>m\_regions.begin();}
\DoxyCodeLine{03019        it != m\_imp-\/>m\_regions.end(); ++it)}
\DoxyCodeLine{03020     \textcolor{keywordflow}{if} ((ret = (*it)-\/>findRegion(region)) != 0) \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{03021 }
\DoxyCodeLine{03022   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{03023 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00121}{TRegion\+::find\+Region()}}.

\mbox{\Hypertarget{class_t_vector_image_abdf8a0d61015b8a6788175cd5e84ccc2}\label{class_t_vector_image_abdf8a0d61015b8a6788175cd5e84ccc2}} 
\index{TVectorImage@{TVectorImage}!findRegions@{findRegions}}
\index{findRegions@{findRegions}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{findRegions()}{findRegions()}}
{\footnotesize\ttfamily void TVector\+Image\+::find\+Regions (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Find regions of a {\bfseries{\mbox{\hyperlink{class_t_vector_image}{TVector\+Image}}}}. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01117                                \{}
\DoxyCodeLine{01118   \textcolor{comment}{// for (int i=0; i<(int)m\_imp-\/>m\_strokes.size(); i++)}}
\DoxyCodeLine{01119   \textcolor{comment}{//  \{}}
\DoxyCodeLine{01120   \textcolor{comment}{//  m\_imp-\/>eraseIntersection(i);}}
\DoxyCodeLine{01121   \textcolor{comment}{//      m\_imp-\/>m\_strokes[i]-\/>m\_isNewForFill=true;}}
\DoxyCodeLine{01122   \textcolor{comment}{//  \}}}
\DoxyCodeLine{01123 }
\DoxyCodeLine{01124   \textcolor{keywordflow}{if} (m\_imp-\/>m\_areValidRegions) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01125 }
\DoxyCodeLine{01126   \textcolor{comment}{// m\_imp-\/>m\_regions.clear();}}
\DoxyCodeLine{01127 }
\DoxyCodeLine{01128   \textcolor{comment}{// compute regions...}}
\DoxyCodeLine{01129   m\_imp-\/>computeRegions();  \textcolor{comment}{// m\_imp-\/>m\_strokes, m\_imp-\/>m\_regions);}}
\DoxyCodeLine{01130 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a99d62ac46627e7e05945c2e963a5ce29}\label{class_t_vector_image_a99d62ac46627e7e05945c2e963a5ce29}} 
\index{TVectorImage@{TVectorImage}!getAutocloseTolerance@{getAutocloseTolerance}}
\index{getAutocloseTolerance@{getAutocloseTolerance}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getAutocloseTolerance()}{getAutocloseTolerance()}}
{\footnotesize\ttfamily double TVector\+Image\+::get\+Autoclose\+Tolerance (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Return the autoclose tolerance. 


\begin{DoxyCode}{0}
\DoxyCodeLine{02407                                                  \{}
\DoxyCodeLine{02408   \textcolor{keywordflow}{return} m\_imp-\/>m\_autocloseTolerance;}
\DoxyCodeLine{02409 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a86205b8e894a807fe76937c923f6abc0}\label{class_t_vector_image_a86205b8e894a807fe76937c923f6abc0}} 
\index{TVectorImage@{TVectorImage}!getBBox@{getBBox}}
\index{getBBox@{getBBox}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getBBox()}{getBBox()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRectD}} TVector\+Image\+::get\+BBox (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Return the image bounding box in the image coordinate system. 



Implements \mbox{\hyperlink{class_t_image_ac6a21b84486dec0c86b5b0b3f34be0ef}{TImage}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00567                                    \{}
\DoxyCodeLine{00568   UINT strokeCount = m\_imp-\/>m\_strokes.size();}
\DoxyCodeLine{00569   \textcolor{keywordflow}{if} (strokeCount == 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00570 }
\DoxyCodeLine{00571   \mbox{\hyperlink{class_t_palette}{TPalette}} *plt = getPalette();}
\DoxyCodeLine{00572   \mbox{\hyperlink{class_t_rect_t}{TRectD}} bbox;}
\DoxyCodeLine{00573 }
\DoxyCodeLine{00574   \textcolor{keywordflow}{for} (UINT i = 0; i < strokeCount; ++i) \{}
\DoxyCodeLine{00575     \mbox{\hyperlink{class_t_rect_t}{TRectD}} r           = m\_imp-\/>m\_strokes[i]-\/>m\_s-\/>getBBox();}
\DoxyCodeLine{00576     \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *style = 0;}
\DoxyCodeLine{00577     \textcolor{keywordflow}{if} (plt) style = plt-\/>\mbox{\hyperlink{class_t_palette_a0f6a4eda7dafb0a9f2b43160cfec81e4}{getStyle}}(m\_imp-\/>m\_strokes[i]-\/>m\_s-\/>getStyle());}
\DoxyCodeLine{00578     \textcolor{keywordflow}{if} (\textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_raster_image_pattern_stroke_style}{TRasterImagePatternStrokeStyle}} *\textcolor{keyword}{>}(style) ||}
\DoxyCodeLine{00579         \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_vector_image_pattern_stroke_style}{TVectorImagePatternStrokeStyle}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{00580             style))  \textcolor{comment}{// con i pattern style, il render a volte taglia sulla bbox}}
\DoxyCodeLine{00581                      \textcolor{comment}{// dello stroke....}}
\DoxyCodeLine{00582       \textcolor{comment}{// aumento la bbox della meta' delle sue dimensioni:pezzaccia.}}
\DoxyCodeLine{00583       r = r.enlarge(std::max(r.getLx() * 0.25, r.getLy() * 0.25));}
\DoxyCodeLine{00584     bbox = ((i == 0) ? r : bbox + r);}
\DoxyCodeLine{00585   \}}
\DoxyCodeLine{00586 }
\DoxyCodeLine{00587   \textcolor{keywordflow}{return} bbox;}
\DoxyCodeLine{00588 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00283}{TPalette\+::get\+Style()}}.



Referenced by \mbox{\hyperlink{l00821}{Stage\+::\+Raster\+Painter\+::on\+Vector\+Image()}}, and \mbox{\hyperlink{l00629}{render()}}.

\mbox{\Hypertarget{class_t_vector_image_ac68c0c97171598ad8d9edfdc9a8179c6}\label{class_t_vector_image_ac68c0c97171598ad8d9edfdc9a8179c6}} 
\index{TVectorImage@{TVectorImage}!getCommonGroupDepth@{getCommonGroupDepth}}
\index{getCommonGroupDepth@{getCommonGroupDepth}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getCommonGroupDepth()}{getCommonGroupDepth()}}
{\footnotesize\ttfamily int TVector\+Image\+::get\+Common\+Group\+Depth (\begin{DoxyParamCaption}\item[{int}]{stroke\+Index0,  }\item[{int}]{stroke\+Index1 }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{02454                                                                   \{}
\DoxyCodeLine{02455   \textcolor{keywordflow}{if} (index0 < 0 || index1 < 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{02456   \textcolor{keywordflow}{return} m\_imp-\/>m\_strokes[index0]-\/>m\_groupId.getCommonParentDepth(}
\DoxyCodeLine{02457       m\_imp-\/>m\_strokes[index1]-\/>m\_groupId);}
\DoxyCodeLine{02458 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_ad36e6c6587a107533a493e0c055d35a1}\label{class_t_vector_image_ad36e6c6587a107533a493e0c055d35a1}} 
\index{TVectorImage@{TVectorImage}!getFillData@{getFillData}}
\index{getFillData@{getFillData}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getFillData()}{getFillData()}}
{\footnotesize\ttfamily UINT TVector\+Image\+::get\+Fill\+Data (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{struct_t_vector_image_1_1_intersection_branch}{Intersection\+Branch}}\mbox{[}$\,$\mbox{]}$>$ \&}]{v }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01601                                                                      \{}
\DoxyCodeLine{01602   \textcolor{keywordflow}{return} m\_imp-\/>getFillData(v);}
\DoxyCodeLine{01603 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_afe6ce30ff27fda99fa803a4c3f1d9049}\label{class_t_vector_image_afe6ce30ff27fda99fa803a4c3f1d9049}} 
\index{TVectorImage@{TVectorImage}!getGroupByRegion@{getGroupByRegion}}
\index{getGroupByRegion@{getGroupByRegion}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getGroupByRegion()}{getGroupByRegion()}}
{\footnotesize\ttfamily int TVector\+Image\+::get\+Group\+By\+Region (\begin{DoxyParamCaption}\item[{UINT}]{index }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{02977                                                    \{}
\DoxyCodeLine{02978   \mbox{\hyperlink{class_t_region}{TRegion}} *r = m\_imp-\/>m\_regions[index];}
\DoxyCodeLine{02979   \textcolor{keywordflow}{for} (UINT i = 0; i < r-\/>getEdgeCount(); i++)}
\DoxyCodeLine{02980     \textcolor{keywordflow}{if} (r-\/>getEdge(i)-\/>m\_index >= 0) \{}
\DoxyCodeLine{02981       \textcolor{keywordflow}{return} m\_imp-\/>m\_strokes[r-\/>getEdge(i)-\/>m\_index]-\/>m\_groupId.m\_id.back();}
\DoxyCodeLine{02982     \}}
\DoxyCodeLine{02983 }
\DoxyCodeLine{02984   \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{02985 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a0064206baa02646982bdfff78fa571b9}\label{class_t_vector_image_a0064206baa02646982bdfff78fa571b9}} 
\index{TVectorImage@{TVectorImage}!getGroupByStroke@{getGroupByStroke}}
\index{getGroupByStroke@{getGroupByStroke}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getGroupByStroke()}{getGroupByStroke()}}
{\footnotesize\ttfamily int TVector\+Image\+::get\+Group\+By\+Stroke (\begin{DoxyParamCaption}\item[{UINT}]{index }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{02970                                                    \{}
\DoxyCodeLine{02971   \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *viStroke = \mbox{\hyperlink{class_t_vector_image_aafc4a988330c27a598b0e55140c94731}{getVIStroke}}(index);}
\DoxyCodeLine{02972   \textcolor{keywordflow}{return} viStroke-\/>m\_groupId.m\_id.back();}
\DoxyCodeLine{02973 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_ab427973777596a7e35ef16a60f97d97c}\label{class_t_vector_image_ab427973777596a7e35ef16a60f97d97c}} 
\index{TVectorImage@{TVectorImage}!getGroupDepth@{getGroupDepth}}
\index{getGroupDepth@{getGroupDepth}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getGroupDepth()}{getGroupDepth()}}
{\footnotesize\ttfamily int TVector\+Image\+::get\+Group\+Depth (\begin{DoxyParamCaption}\item[{UINT}]{index }\end{DoxyParamCaption}) const}

Return a value grater of zero if stroke of index {\bfseries{index}} is contained in a group

The returned number is the depth of the nested group containing the stroke. 
\begin{DoxyCode}{0}
\DoxyCodeLine{02574                                                 \{}
\DoxyCodeLine{02575   assert(index < m\_imp-\/>m\_strokes.size());}
\DoxyCodeLine{02576 }
\DoxyCodeLine{02577   \textcolor{keywordflow}{return} m\_imp-\/>m\_strokes[index]-\/>m\_groupId.isGrouped();}
\DoxyCodeLine{02578 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_afb2774e089cbcee3db86b89f0d1caa91}\label{class_t_vector_image_afb2774e089cbcee3db86b89f0d1caa91}} 
\index{TVectorImage@{TVectorImage}!getMutex@{getMutex}}
\index{getMutex@{getMutex}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getMutex()}{getMutex()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_thread_1_1_mutex}{TThread\+::\+Mutex}} $\ast$ TVector\+Image\+::get\+Mutex (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{02413 \{ \textcolor{keywordflow}{return} m\_imp-\/>m\_mutex; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_abc85189e12c100c482fb0ef7dc378602}\label{class_t_vector_image_abc85189e12c100c482fb0ef7dc378602}} 
\index{TVectorImage@{TVectorImage}!getNearestStroke@{getNearestStroke}}
\index{getNearestStroke@{getNearestStroke}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getNearestStroke()}{getNearestStroke()}}
{\footnotesize\ttfamily bool TVector\+Image\+::get\+Nearest\+Stroke (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{p,  }\item[{double \&}]{outw,  }\item[{UINT \&}]{stroke\+Index,  }\item[{double \&}]{dist2,  }\item[{bool}]{in\+Current\+Group = {\ttfamily true} }\end{DoxyParamCaption}) const}

get the stroke nearest at point \begin{DoxyNote}{Note}
outw is stroke parameter w in \mbox{[}0,1\mbox{]} 
\end{DoxyNote}
\begin{DoxyParagraph}{p \mbox{[}input\mbox{]} is point nearest stroke}

\end{DoxyParagraph}
\begin{DoxyParagraph}{outw \mbox{[}output\mbox{]} is parameter of minimum in stroke}

\end{DoxyParagraph}
\begin{DoxyParagraph}{stroke\+Index \mbox{[}output\mbox{]} is index of stroke in vector image}

\end{DoxyParagraph}
\begin{DoxyParagraph}{dist2 \mbox{[}output\mbox{]} is the square value of distance}
\textbackslash{}ret true if a value is found 
\end{DoxyParagraph}

\begin{DoxyCode}{0}
\DoxyCodeLine{00594                                                                    \{}
\DoxyCodeLine{00595   dist2       = (std::numeric\_limits<double>::max)();}
\DoxyCodeLine{00596   strokeIndex = \mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{getStrokeCount}}();}
\DoxyCodeLine{00597   outW        = -\/1;}
\DoxyCodeLine{00598 }
\DoxyCodeLine{00599   \textcolor{keywordtype}{double} tempdis2, tempPar;}
\DoxyCodeLine{00600 }
\DoxyCodeLine{00601   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)m\_imp-\/>m\_strokes.size(); ++i) \{}
\DoxyCodeLine{00602     \textcolor{keywordflow}{if} (onlyInCurrentGroup \&\& !inCurrentGroup(i)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00603     \mbox{\hyperlink{class_t_stroke}{TStroke}} *s = m\_imp-\/>m\_strokes[i]-\/>m\_s;}
\DoxyCodeLine{00604     tempPar    = s-\/>\mbox{\hyperlink{class_t_stroke_a38326dc317f9ff3828940996f41376a6}{getW}}(p);}
\DoxyCodeLine{00605 }
\DoxyCodeLine{00606     tempdis2 = tdistance2(\mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(p, 0), s-\/>\mbox{\hyperlink{class_t_stroke_ada4f6fc3fea4a7c0b949cd1d9dc6e640}{getThickPoint}}(tempPar));}
\DoxyCodeLine{00607 }
\DoxyCodeLine{00608     \textcolor{keywordflow}{if} (tempdis2 < dist2) \{}
\DoxyCodeLine{00609       outW        = tempPar;}
\DoxyCodeLine{00610       dist2       = tempdis2;}
\DoxyCodeLine{00611       strokeIndex = i;}
\DoxyCodeLine{00612     \}}
\DoxyCodeLine{00613   \}}
\DoxyCodeLine{00614 }
\DoxyCodeLine{00615   \textcolor{keywordflow}{return} dist2 < (std::numeric\_limits<double>::max)();}
\DoxyCodeLine{00616 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00388}{get\+Stroke\+Count()}}, \mbox{\hyperlink{l01960}{TStroke\+::get\+Thick\+Point()}}, and \mbox{\hyperlink{l02029}{TStroke\+::get\+W()}}.



Referenced by \mbox{\hyperlink{l00679}{fill\+Strokes()}}.

\mbox{\Hypertarget{class_t_vector_image_ac6235eb0e4e37158e6750cb153464358}\label{class_t_vector_image_ac6235eb0e4e37158e6750cb153464358}} 
\index{TVectorImage@{TVectorImage}!getRegion@{getRegion}}
\index{getRegion@{getRegion}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getRegion()}{getRegion()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_region}{TRegion}} $\ast$ TVector\+Image\+::get\+Region (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{p }\end{DoxyParamCaption})}

Return the region which contains {\bfseries{p}}, if none regions contains {\bfseries{p}} return 0 
\begin{DoxyCode}{0}
\DoxyCodeLine{00648                                                  \{}
\DoxyCodeLine{00649 \textcolor{preprocessor}{\#ifndef NEW\_REGION\_FILL}}
\DoxyCodeLine{00650   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_t_vector_image_ab0a1b79a4f49258b52147919212f9b3d}{isComputedRegionAlmostOnce}}()) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00651 }
\DoxyCodeLine{00652   \textcolor{keywordflow}{if} (!m\_imp-\/>m\_areValidRegions) m\_imp-\/>computeRegions();}
\DoxyCodeLine{00653 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00654 }
\DoxyCodeLine{00655   \textcolor{keywordflow}{return} m\_imp-\/>getRegion(p);}
\DoxyCodeLine{00656 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01736}{is\+Computed\+Region\+Almost\+Once()}}.

\mbox{\Hypertarget{class_t_vector_image_a6ad014d955b2b96caf5415ffebf30582}\label{class_t_vector_image_a6ad014d955b2b96caf5415ffebf30582}} 
\index{TVectorImage@{TVectorImage}!getRegion@{getRegion}}
\index{getRegion@{getRegion}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getRegion()}{getRegion()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_region}{TRegion}} $\ast$ TVector\+Image\+::get\+Region (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_region_id}{TRegion\+Id}}}]{reg\+Id }\end{DoxyParamCaption}) const}



Get a region at {\bfseries{\mbox{\hyperlink{class_t_region_id}{TRegion\+Id}}}} id. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00414                                                       \{}
\DoxyCodeLine{00415   \textcolor{keywordtype}{int} index = \mbox{\hyperlink{class_t_vector_image_ac34046b52e2318c10721d4f0cfd181f0}{getStrokeIndexById}}(regId.m\_strokeId);}
\DoxyCodeLine{00416 }
\DoxyCodeLine{00417   assert(m\_imp-\/>m\_areValidRegions);}
\DoxyCodeLine{00418 }
\DoxyCodeLine{00419   \mbox{\hyperlink{class_t_region}{TRegion}} *reg = m\_imp-\/>getRegion(regId, index);}
\DoxyCodeLine{00420   \textcolor{comment}{// assert( reg );}}
\DoxyCodeLine{00421   \textcolor{keywordflow}{return} reg;}
\DoxyCodeLine{00422 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00545}{get\+Stroke\+Index\+By\+Id()}}.

\mbox{\Hypertarget{class_t_vector_image_a17f9e44c72c82c54d0cf9fefed85e12f}\label{class_t_vector_image_a17f9e44c72c82c54d0cf9fefed85e12f}} 
\index{TVectorImage@{TVectorImage}!getRegion@{getRegion}}
\index{getRegion@{getRegion}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getRegion()}{getRegion()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_region}{TRegion}} $\ast$ TVector\+Image\+::get\+Region (\begin{DoxyParamCaption}\item[{UINT}]{index }\end{DoxyParamCaption}) const}



Get a region at index position. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00406                                                  \{}
\DoxyCodeLine{00407   assert(index < m\_imp-\/>m\_regions.size());}
\DoxyCodeLine{00408   \textcolor{comment}{//  assert( m\_imp-\/>m\_areValidRegions );}}
\DoxyCodeLine{00409   \textcolor{keywordflow}{return} m\_imp-\/>m\_regions[index];}
\DoxyCodeLine{00410 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l02417}{area\+Fill()}}, \mbox{\hyperlink{l00760}{Raster\+Tape\+Tool\+::check\+Segments()}}, \mbox{\hyperlink{l01458}{erase\+Style\+Ids()}}, \mbox{\hyperlink{l00705}{fill()}}, and \mbox{\hyperlink{l00277}{Area\+Filler\+::stroke\+Fill()}}.

\mbox{\Hypertarget{class_t_vector_image_a12e56e674828c172749d5bc1855bc977}\label{class_t_vector_image_a12e56e674828c172749d5bc1855bc977}} 
\index{TVectorImage@{TVectorImage}!getRegionCount@{getRegionCount}}
\index{getRegionCount@{getRegionCount}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getRegionCount()}{getRegionCount()}}
{\footnotesize\ttfamily UINT TVector\+Image\+::get\+Region\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Return the regions\textquotesingle{} count. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00399                                         \{}
\DoxyCodeLine{00400   \textcolor{comment}{//  assert( m\_imp-\/>m\_areValidRegions || m\_imp-\/>m\_regions.empty());}}
\DoxyCodeLine{00401   \textcolor{keywordflow}{return} m\_imp-\/>m\_regions.size();}
\DoxyCodeLine{00402 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l02417}{area\+Fill()}}, \mbox{\hyperlink{l00760}{Raster\+Tape\+Tool\+::check\+Segments()}}, \mbox{\hyperlink{l01458}{erase\+Style\+Ids()}}, and \mbox{\hyperlink{l00277}{Area\+Filler\+::stroke\+Fill()}}.

\mbox{\Hypertarget{class_t_vector_image_a1aa2f3ab6c30a6f8a64b2cb35072ffeb}\label{class_t_vector_image_a1aa2f3ab6c30a6f8a64b2cb35072ffeb}} 
\index{TVectorImage@{TVectorImage}!getStroke@{getStroke}}
\index{getStroke@{getStroke}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getStroke()}{getStroke()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ TVector\+Image\+::get\+Stroke (\begin{DoxyParamCaption}\item[{UINT}]{index }\end{DoxyParamCaption}) const}



Get a {\bfseries{\mbox{\hyperlink{class_t_stroke}{TStroke}}}} stroke at index position. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00524                                                  \{}
\DoxyCodeLine{00525   assert(index < m\_imp-\/>m\_strokes.size());}
\DoxyCodeLine{00526   \textcolor{keywordflow}{return} m\_imp-\/>m\_strokes[index]-\/>m\_s;}
\DoxyCodeLine{00527 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01458}{erase\+Style\+Ids()}}, \mbox{\hyperlink{l00522}{Palette\+Cmd\+::erase\+Styles()}}, \mbox{\hyperlink{l00679}{fill\+Strokes()}}, \mbox{\hyperlink{l00919}{notify\+Changed\+Strokes()}}, and \mbox{\hyperlink{l03283}{reassign\+Styles()}}.

\mbox{\Hypertarget{class_t_vector_image_ae52f53ddb30dadf50856f12bd7d52319}\label{class_t_vector_image_ae52f53ddb30dadf50856f12bd7d52319}} 
\index{TVectorImage@{TVectorImage}!getStrokeById@{getStrokeById}}
\index{getStrokeById@{getStrokeById}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getStrokeById()}{getStrokeById()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} $\ast$ TVector\+Image\+::get\+Stroke\+By\+Id (\begin{DoxyParamCaption}\item[{int}]{id }\end{DoxyParamCaption}) const}



Get a {\bfseries{\mbox{\hyperlink{class_v_i_stroke}{VIStroke}}}} stroke at id. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00536                                                   \{}
\DoxyCodeLine{00537   \textcolor{keywordtype}{int} n = m\_imp-\/>m\_strokes.size();}
\DoxyCodeLine{00538   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < n; i++)}
\DoxyCodeLine{00539     \textcolor{keywordflow}{if} (m\_imp-\/>m\_strokes[i]-\/>m\_s-\/>getId() == \textcolor{keywordtype}{id}) \textcolor{keywordflow}{return} m\_imp-\/>m\_strokes[i];}
\DoxyCodeLine{00540   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00541 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01481}{insert\+Image()}}, and \mbox{\hyperlink{l01384}{merge\+Image()}}.

\mbox{\Hypertarget{class_t_vector_image_add44e109ce62ba075799c0602724a841}\label{class_t_vector_image_add44e109ce62ba075799c0602724a841}} 
\index{TVectorImage@{TVectorImage}!getStrokeCount@{getStrokeCount}}
\index{getStrokeCount@{getStrokeCount}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getStrokeCount()}{getStrokeCount()}}
{\footnotesize\ttfamily UINT TVector\+Image\+::get\+Stroke\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Return the strokes\textquotesingle{} count. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00388 \{ \textcolor{keywordflow}{return} m\_imp-\/>m\_strokes.size(); \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01458}{erase\+Style\+Ids()}}, \mbox{\hyperlink{l00522}{Palette\+Cmd\+::erase\+Styles()}}, \mbox{\hyperlink{l00592}{get\+Nearest\+Stroke()}}, \mbox{\hyperlink{l01623}{get\+Used\+Styles()}}, \mbox{\hyperlink{l02107}{TImage\+Reader\+Svg\+::load()}}, \mbox{\hyperlink{l01384}{merge\+Image()}}, \mbox{\hyperlink{l00821}{Stage\+::\+Raster\+Painter\+::on\+Vector\+Image()}}, \mbox{\hyperlink{l03283}{reassign\+Styles()}}, and \mbox{\hyperlink{l01554}{split\+Selected()}}.

\mbox{\Hypertarget{class_t_vector_image_af002208e7a24a894a816756e7978acef}\label{class_t_vector_image_af002208e7a24a894a816756e7978acef}} 
\index{TVectorImage@{TVectorImage}!getStrokeIndex@{getStrokeIndex}}
\index{getStrokeIndex@{getStrokeIndex}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getStrokeIndex()}{getStrokeIndex()}}
{\footnotesize\ttfamily int TVector\+Image\+::get\+Stroke\+Index (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke }\end{DoxyParamCaption}) const}



Get the stroke index by id. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00556                                                       \{}
\DoxyCodeLine{00557   \textcolor{keywordtype}{int} n = m\_imp-\/>m\_strokes.size();}
\DoxyCodeLine{00558 }
\DoxyCodeLine{00559   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < n; i++)}
\DoxyCodeLine{00560     \textcolor{keywordflow}{if} (m\_imp-\/>m\_strokes[i]-\/>m\_s == stroke) \textcolor{keywordflow}{return} i;}
\DoxyCodeLine{00561 }
\DoxyCodeLine{00562   \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00563 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_ac34046b52e2318c10721d4f0cfd181f0}\label{class_t_vector_image_ac34046b52e2318c10721d4f0cfd181f0}} 
\index{TVectorImage@{TVectorImage}!getStrokeIndexById@{getStrokeIndexById}}
\index{getStrokeIndexById@{getStrokeIndexById}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getStrokeIndexById()}{getStrokeIndexById()}}
{\footnotesize\ttfamily int TVector\+Image\+::get\+Stroke\+Index\+By\+Id (\begin{DoxyParamCaption}\item[{int}]{id }\end{DoxyParamCaption}) const}



Get the stroke index by id. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00545                                                  \{}
\DoxyCodeLine{00546   \textcolor{keywordtype}{int} n = m\_imp-\/>m\_strokes.size();}
\DoxyCodeLine{00547 }
\DoxyCodeLine{00548   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < n; i++)}
\DoxyCodeLine{00549     \textcolor{keywordflow}{if} (m\_imp-\/>m\_strokes[i]-\/>m\_s-\/>getId() == \textcolor{keywordtype}{id}) \textcolor{keywordflow}{return} i;}
\DoxyCodeLine{00550 }
\DoxyCodeLine{00551   \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00552 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00414}{get\+Region()}}.

\mbox{\Hypertarget{class_t_vector_image_aba9fb8516ce39273c1cf0dbca2b62b23}\label{class_t_vector_image_aba9fb8516ce39273c1cf0dbca2b62b23}} 
\index{TVectorImage@{TVectorImage}!getType@{getType}}
\index{getType@{getType}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getType()}{getType()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1}{TImage\+::\+Type}} TVector\+Image\+::get\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

This method must return the type of the image. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1}{Type}}. 
\end{DoxySeeAlso}


Implements \mbox{\hyperlink{class_t_image_a52205464a87894ee940a1083a7641d86}{TImage}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00077 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1aae0e08194ada9a9bb8271dfd21ef8b2e}{VECTOR}}; \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00050}{TImage\+::\+VECTOR}}.

\mbox{\Hypertarget{class_t_vector_image_ad898b236a4487fb55dffb3d5ded7d825}\label{class_t_vector_image_ad898b236a4487fb55dffb3d5ded7d825}} 
\index{TVectorImage@{TVectorImage}!getUsedStyles@{getUsedStyles}}
\index{getUsedStyles@{getUsedStyles}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getUsedStyles()}{getUsedStyles()}}
{\footnotesize\ttfamily void TVector\+Image\+::get\+Used\+Styles (\begin{DoxyParamCaption}\item[{std\+::set$<$ int $>$ \&}]{styles }\end{DoxyParamCaption}) const}



Return the used styles in the image. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01623                                                           \{}
\DoxyCodeLine{01624   UINT strokeCount = \mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{getStrokeCount}}();}
\DoxyCodeLine{01625   UINT i           = 0;}
\DoxyCodeLine{01626   \textcolor{keywordflow}{for} (; i < strokeCount; ++i) \{}
\DoxyCodeLine{01627     \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *srcStroke = m\_imp-\/>m\_strokes[i];}
\DoxyCodeLine{01628     \textcolor{keywordtype}{int} styleId         = srcStroke-\/>m\_s-\/>\mbox{\hyperlink{class_t_stroke_ab77068d7894a29cc1878e173f46ed785}{getStyle}}();}
\DoxyCodeLine{01629     \textcolor{keywordflow}{if} (styleId != 0) styles.insert(styleId);}
\DoxyCodeLine{01630     std::list<TEdge *>::const\_iterator it = srcStroke-\/>m\_edgeList.begin();}
\DoxyCodeLine{01631     \textcolor{keywordflow}{for} (; it != srcStroke-\/>m\_edgeList.end(); ++it) \{}
\DoxyCodeLine{01632       styleId = (*it)-\/>m\_styleId;}
\DoxyCodeLine{01633       \textcolor{keywordflow}{if} (styleId != 0) styles.insert(styleId);}
\DoxyCodeLine{01634     \}}
\DoxyCodeLine{01635   \}}
\DoxyCodeLine{01636 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00388}{get\+Stroke\+Count()}}, and \mbox{\hyperlink{l02366}{TStroke\+::get\+Style()}}.

\mbox{\Hypertarget{class_t_vector_image_aafc4a988330c27a598b0e55140c94731}\label{class_t_vector_image_aafc4a988330c27a598b0e55140c94731}} 
\index{TVectorImage@{TVectorImage}!getVIStroke@{getVIStroke}}
\index{getVIStroke@{getVIStroke}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{getVIStroke()}{getVIStroke()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} $\ast$ TVector\+Image\+::get\+VIStroke (\begin{DoxyParamCaption}\item[{UINT}]{index }\end{DoxyParamCaption}) const}



Get a {\bfseries{\mbox{\hyperlink{class_v_i_stroke}{VIStroke}}}} stroke at index position. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00529                                                     \{}
\DoxyCodeLine{00530   assert(index < m\_imp-\/>m\_strokes.size());}
\DoxyCodeLine{00531   \textcolor{keywordflow}{return} m\_imp-\/>m\_strokes[index];}
\DoxyCodeLine{00532 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a98b3b27c9f496d13fe584d9cf83bf230}\label{class_t_vector_image_a98b3b27c9f496d13fe584d9cf83bf230}} 
\index{TVectorImage@{TVectorImage}!group@{group}}
\index{group@{group}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{group()}{group()}}
{\footnotesize\ttfamily void TVector\+Image\+::group (\begin{DoxyParamCaption}\item[{int}]{from\+Index,  }\item[{int}]{count }\end{DoxyParamCaption})}



Group strokes in the {\bfseries{from\+Index}} -\/ {\bfseries{to\+Index}} range. 

Only adjacent strokes can be grouped 
\begin{DoxyCode}{0}
\DoxyCodeLine{02548                                                  \{}
\DoxyCodeLine{02549   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{02550   assert(count >= 0);}
\DoxyCodeLine{02551   std::vector<int> changedStroke;}
\DoxyCodeLine{02552 }
\DoxyCodeLine{02553   \mbox{\hyperlink{class_t_group_id}{TGroupId}} parent = \mbox{\hyperlink{class_t_group_id}{TGroupId}}(\textcolor{keyword}{this}, \textcolor{keyword}{false});}
\DoxyCodeLine{02554 }
\DoxyCodeLine{02555   \textcolor{keywordflow}{for} (i = 0; i < count; i++) \{}
\DoxyCodeLine{02556     m\_imp-\/>m\_strokes[fromIndex + i]-\/>m\_groupId =}
\DoxyCodeLine{02557         \mbox{\hyperlink{class_t_group_id}{TGroupId}}(parent, m\_imp-\/>m\_strokes[fromIndex + i]-\/>m\_groupId);}
\DoxyCodeLine{02558     changedStroke.push\_back(fromIndex + i);}
\DoxyCodeLine{02559   \}}
\DoxyCodeLine{02560 }
\DoxyCodeLine{02561   m\_imp-\/>rearrangeMultiGroup();  \textcolor{comment}{// see method's comment}}
\DoxyCodeLine{02562 }
\DoxyCodeLine{02563   m\_imp-\/>regroupGhosts(changedStroke);}
\DoxyCodeLine{02564 }
\DoxyCodeLine{02565   \mbox{\hyperlink{class_t_vector_image_a033795f887a81bb5c43873901bcaf8d7}{notifyChangedStrokes}}(changedStroke, std::vector<TStroke *>(), \textcolor{keyword}{false});}
\DoxyCodeLine{02566 }
\DoxyCodeLine{02567 \textcolor{preprocessor}{\#ifdef \_DEBUG}}
\DoxyCodeLine{02568   m\_imp-\/>checkGroups();}
\DoxyCodeLine{02569 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02570 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00898}{notify\+Changed\+Strokes()}}.



Referenced by \mbox{\hyperlink{l02107}{TImage\+Reader\+Svg\+::load()}}.

\mbox{\Hypertarget{class_t_vector_image_adc30e2ab5870c5903ffac15882918ee8}\label{class_t_vector_image_adc30e2ab5870c5903ffac15882918ee8}} 
\index{TVectorImage@{TVectorImage}!inCurrentGroup@{inCurrentGroup}}
\index{inCurrentGroup@{inCurrentGroup}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{inCurrentGroup()}{inCurrentGroup()}}
{\footnotesize\ttfamily bool TVector\+Image\+::in\+Current\+Group (\begin{DoxyParamCaption}\item[{int}]{stroke\+Index }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{02937                                                        \{}
\DoxyCodeLine{02938   \textcolor{keywordflow}{return} m\_imp-\/>inCurrentGroup(strokeIndex);}
\DoxyCodeLine{02939 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a3baa3ace3a3972b976071f4e45b24204}\label{class_t_vector_image_a3baa3ace3a3972b976071f4e45b24204}} 
\index{TVectorImage@{TVectorImage}!insertImage@{insertImage}}
\index{insertImage@{insertImage}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{insertImage()}{insertImage()}}
{\footnotesize\ttfamily void TVector\+Image\+::insert\+Image (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&}]{img,  }\item[{const std\+::vector$<$ int $>$ \&}]{dst\+Indices }\end{DoxyParamCaption})}



Insert the {\bfseries{\mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}}}} {\bfseries{img}}. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01482                                                                  \{}
\DoxyCodeLine{01483   UINT i;}
\DoxyCodeLine{01484   UINT imageSize = img-\/>getStrokeCount();}
\DoxyCodeLine{01485   assert(dstIndices.size() == imageSize);}
\DoxyCodeLine{01486 }
\DoxyCodeLine{01487   \textcolor{comment}{// img-\/>m\_imp-\/>reindexGroups(*m\_imp);}}
\DoxyCodeLine{01488   std::vector<int> changedStrokeArray(imageSize);}
\DoxyCodeLine{01489 }
\DoxyCodeLine{01490   std::vector<VIStroke *>::iterator it = m\_imp-\/>m\_strokes.begin();}
\DoxyCodeLine{01491 }
\DoxyCodeLine{01492   \textcolor{keywordflow}{for} (i = 0; i < imageSize; i++) \{}
\DoxyCodeLine{01493     assert(i == 0 || dstIndices[i] > dstIndices[i -\/ 1]);}
\DoxyCodeLine{01494 }
\DoxyCodeLine{01495     \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *srcStroke = img-\/>m\_imp-\/>m\_strokes[i];}
\DoxyCodeLine{01496     \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *tarStroke = \textcolor{keyword}{new} \mbox{\hyperlink{class_v_i_stroke}{VIStroke}}(*srcStroke);}
\DoxyCodeLine{01497     \textcolor{keywordtype}{int} strokeId        = srcStroke-\/>m\_s-\/>getId();}
\DoxyCodeLine{01498     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_vector_image_ae52f53ddb30dadf50856f12bd7d52319}{getStrokeById}}(strokeId) == 0) tarStroke-\/>m\_s-\/>setId(strokeId);}
\DoxyCodeLine{01499     advance(it, (i == 0) ? dstIndices[i] : dstIndices[i] -\/ dstIndices[i -\/ 1]);}
\DoxyCodeLine{01500 }
\DoxyCodeLine{01501     it = m\_imp-\/>m\_strokes.insert(it, tarStroke);}
\DoxyCodeLine{01502 }
\DoxyCodeLine{01503     changedStrokeArray[i] = dstIndices[i];}
\DoxyCodeLine{01504   \}}
\DoxyCodeLine{01505   m\_imp-\/>reindexEdges(changedStrokeArray, \textcolor{keyword}{true});}
\DoxyCodeLine{01506 }
\DoxyCodeLine{01507   \mbox{\hyperlink{class_t_vector_image_a033795f887a81bb5c43873901bcaf8d7}{notifyChangedStrokes}}(changedStrokeArray, std::vector<TStroke *>(), \textcolor{keyword}{false});}
\DoxyCodeLine{01508   \textcolor{comment}{// m\_imp-\/>computeRegions();}}
\DoxyCodeLine{01509 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00536}{get\+Stroke\+By\+Id()}}, and \mbox{\hyperlink{l00898}{notify\+Changed\+Strokes()}}.

\mbox{\Hypertarget{class_t_vector_image_afeb50170dac01241772194dd87549a32}\label{class_t_vector_image_afeb50170dac01241772194dd87549a32}} 
\index{TVectorImage@{TVectorImage}!insertStrokeAt@{insertStrokeAt}}
\index{insertStrokeAt@{insertStrokeAt}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{insertStrokeAt()}{insertStrokeAt()}}
{\footnotesize\ttfamily void TVector\+Image\+::insert\+Stroke\+At (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_v_i_stroke}{VIStroke}} $\ast$}]{vs,  }\item[{int}]{stroke\+Index,  }\item[{bool}]{recompute\+Regions = {\ttfamily true} }\end{DoxyParamCaption})}



Insert a {\bfseries{\mbox{\hyperlink{class_v_i_stroke}{VIStroke}}}} {\bfseries{vs}} at index {\bfseries{stroke\+Index}}. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00216                                                          \{}
\DoxyCodeLine{00217   m\_imp-\/>insertStrokeAt(vs, strokeIndex, recomputeRegions);}
\DoxyCodeLine{00218 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_ab0a1b79a4f49258b52147919212f9b3d}\label{class_t_vector_image_ab0a1b79a4f49258b52147919212f9b3d}} 
\index{TVectorImage@{TVectorImage}!isComputedRegionAlmostOnce@{isComputedRegionAlmostOnce}}
\index{isComputedRegionAlmostOnce@{isComputedRegionAlmostOnce}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{isComputedRegionAlmostOnce()}{isComputedRegionAlmostOnce()}}
{\footnotesize\ttfamily bool TVector\+Image\+::is\+Computed\+Region\+Almost\+Once (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Return true if {\bfseries{compute\+Region}} method was called. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01736                                                     \{}
\DoxyCodeLine{01737   \textcolor{keywordflow}{return} m\_imp-\/>m\_computedAlmostOnce;}
\DoxyCodeLine{01738 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00648}{get\+Region()}}.

\mbox{\Hypertarget{class_t_vector_image_a4ceb67c26db62c340b0deab21a9e1e0f}\label{class_t_vector_image_a4ceb67c26db62c340b0deab21a9e1e0f}} 
\index{TVectorImage@{TVectorImage}!isEnteredGroupStroke@{isEnteredGroupStroke}}
\index{isEnteredGroupStroke@{isEnteredGroupStroke}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{isEnteredGroupStroke()}{isEnteredGroupStroke()}}
{\footnotesize\ttfamily bool TVector\+Image\+::is\+Entered\+Group\+Stroke (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{02503                                                        \{}
\DoxyCodeLine{02504   \textcolor{keywordflow}{return} m\_imp-\/>m\_insideGroup.isParentOf(\mbox{\hyperlink{class_t_vector_image_aafc4a988330c27a598b0e55140c94731}{getVIStroke}}(index)-\/>m\_groupId);}
\DoxyCodeLine{02505 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a6f4a8c2a463ebbe94f7cf98002d61d05}\label{class_t_vector_image_a6f4a8c2a463ebbe94f7cf98002d61d05}} 
\index{TVectorImage@{TVectorImage}!isInsideGroup@{isInsideGroup}}
\index{isInsideGroup@{isInsideGroup}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{isInsideGroup()}{isInsideGroup()}}
{\footnotesize\ttfamily int TVector\+Image\+::is\+Inside\+Group (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00128                                       \{}
\DoxyCodeLine{00129   \textcolor{keywordflow}{return} m\_imp-\/>m\_insideGroup.getDepth();}
\DoxyCodeLine{00130 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a8cce47a9dbd46f0f58145600101387d1}\label{class_t_vector_image_a8cce47a9dbd46f0f58145600101387d1}} 
\index{TVectorImage@{TVectorImage}!isStrokeGrouped@{isStrokeGrouped}}
\index{isStrokeGrouped@{isStrokeGrouped}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{isStrokeGrouped()}{isStrokeGrouped()}}
{\footnotesize\ttfamily bool TVector\+Image\+::is\+Stroke\+Grouped (\begin{DoxyParamCaption}\item[{UINT}]{index }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00137 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_vector_image_ab427973777596a7e35ef16a60f97d97c}{getGroupDepth}}(index) > 0; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_acf0efcaa32b85acc82688ace2c2b5afe}\label{class_t_vector_image_acf0efcaa32b85acc82688ace2c2b5afe}} 
\index{TVectorImage@{TVectorImage}!isStrokeStyleEnabled@{isStrokeStyleEnabled}}
\index{isStrokeStyleEnabled@{isStrokeStyleEnabled}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{isStrokeStyleEnabled()}{isStrokeStyleEnabled()}}
{\footnotesize\ttfamily bool TVector\+Image\+::is\+Stroke\+Style\+Enabled (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Return true if the style of the stroke identified by {\bfseries{index}} is enabled. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01617                                                  \{}
\DoxyCodeLine{01618   \textcolor{keywordflow}{return} isStrokeStyleEnabled\_\_(index);}
\DoxyCodeLine{01619 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a0beab74f417fa292ca1d9575a6ff5ec4}\label{class_t_vector_image_a0beab74f417fa292ca1d9575a6ff5ec4}} 
\index{TVectorImage@{TVectorImage}!joinStroke@{joinStroke}}
\index{joinStroke@{joinStroke}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{joinStroke()}{joinStroke()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} $\ast$ TVector\+Image\+::join\+Stroke (\begin{DoxyParamCaption}\item[{int}]{index1,  }\item[{int}]{index2,  }\item[{int}]{cp\+Index1,  }\item[{int}]{cp\+Index2,  }\item[{bool}]{is\+Smooth }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{02342                                                                 \{}
\DoxyCodeLine{02343   \textcolor{keywordtype}{int} finalStyle = -\/1;}
\DoxyCodeLine{02344 }
\DoxyCodeLine{02345   \textcolor{keywordflow}{if} (index1 > index2) \{}
\DoxyCodeLine{02346     finalStyle = \mbox{\hyperlink{class_t_vector_image_a1aa2f3ab6c30a6f8a64b2cb35072ffeb}{getStroke}}(index1)-\/>\mbox{\hyperlink{class_t_stroke_ab77068d7894a29cc1878e173f46ed785}{getStyle}}();}
\DoxyCodeLine{02347     std::swap(index1, index2);}
\DoxyCodeLine{02348     std::swap(cpIndex1, cpIndex2);}
\DoxyCodeLine{02349   \}}
\DoxyCodeLine{02350   \textcolor{comment}{/*}}
\DoxyCodeLine{02351 \textcolor{comment}{if (index1==index2) //selfLoop!}}
\DoxyCodeLine{02352 \textcolor{comment}{\{}}
\DoxyCodeLine{02353 \textcolor{comment}{if (index1>0 \&\& index1<(int)getStrokeCount()-\/1 \&\&}}
\DoxyCodeLine{02354 \textcolor{comment}{  !getStroke(index1-\/1)-\/>isSelfLoop() \&\&}}
\DoxyCodeLine{02355 \textcolor{comment}{  !getStroke(index1+1)-\/>isSelfLoop())}}
\DoxyCodeLine{02356 \textcolor{comment}{\{}}
\DoxyCodeLine{02357 \textcolor{comment}{for (UINT i = index1+2; i<getStrokeCount() \&\& !getStroke(i)-\/>isSelfLoop(); i++)}}
\DoxyCodeLine{02358 \textcolor{comment}{  ;}}
\DoxyCodeLine{02359 \textcolor{comment}{moveStroke(index1, i-\/1);}}
\DoxyCodeLine{02360 \textcolor{comment}{index1 = index2 = i-\/1;}}
\DoxyCodeLine{02361 \textcolor{comment}{\}}}
\DoxyCodeLine{02362 \textcolor{comment}{\}}}
\DoxyCodeLine{02363 \textcolor{comment}{*/}}
\DoxyCodeLine{02364   \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *ret;}
\DoxyCodeLine{02365   \textcolor{keywordflow}{if} (isSmooth)}
\DoxyCodeLine{02366     ret = m\_imp-\/>joinStrokeSmoothly(index1, index2, cpIndex1, cpIndex2);}
\DoxyCodeLine{02367   \textcolor{keywordflow}{else}}
\DoxyCodeLine{02368     ret = m\_imp-\/>joinStroke(index1, index2, cpIndex1, cpIndex2);}
\DoxyCodeLine{02369 }
\DoxyCodeLine{02370   \textcolor{keywordflow}{if} (finalStyle != -\/1) \mbox{\hyperlink{class_t_vector_image_a1aa2f3ab6c30a6f8a64b2cb35072ffeb}{getStroke}}(index1)-\/>\mbox{\hyperlink{class_t_stroke_a33f59dfbed74b577700351eac8c2fc7b}{setStyle}}(finalStyle);}
\DoxyCodeLine{02371   \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{02372 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_ad345a17710980f408d800d16cd21e7bc}\label{class_t_vector_image_ad345a17710980f408d800d16cd21e7bc}} 
\index{TVectorImage@{TVectorImage}!mergeImage@{mergeImage}}
\index{mergeImage@{mergeImage}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{mergeImage()}{mergeImage()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily void TVector\+Image\+::merge\+Image (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ const \mbox{\hyperlink{class_t_vector_image}{TVector\+Image}} $\ast$ $>$ \&}]{images }\end{DoxyParamCaption})}



Merge the image with the vector of image {\bfseries{images}}. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01384                                                                            \{}
\DoxyCodeLine{01385   UINT oldSize = \mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{getStrokeCount}}();}
\DoxyCodeLine{01386   std::vector<int> changedStrokeArray;}
\DoxyCodeLine{01387   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_vector_image}{TVectorImage}} *img;}
\DoxyCodeLine{01388   \textcolor{keywordtype}{int} index;}
\DoxyCodeLine{01389 }
\DoxyCodeLine{01390   \textcolor{keywordflow}{if} (m\_imp-\/>m\_insideGroup != \mbox{\hyperlink{class_t_group_id}{TGroupId}}()) \{}
\DoxyCodeLine{01391     \textcolor{keywordflow}{for} (index = m\_imp-\/>m\_strokes.size() -\/ 1; index > -\/1; index-\/-\/)}
\DoxyCodeLine{01392       \textcolor{keywordflow}{if} (m\_imp-\/>m\_insideGroup.isParentOf(m\_imp-\/>m\_strokes[index]-\/>m\_groupId))}
\DoxyCodeLine{01393         \textcolor{keywordflow}{break};}
\DoxyCodeLine{01394     assert(index > -\/1);}
\DoxyCodeLine{01395   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01396     index = \mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{getStrokeCount}}() -\/ 1;}
\DoxyCodeLine{01397 }
\DoxyCodeLine{01398   \textcolor{keywordflow}{for} (UINT j = 0; j < images.size(); ++j) \{}
\DoxyCodeLine{01399     img = images[j];}
\DoxyCodeLine{01400     \textcolor{keywordflow}{if} (img-\/>\mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{getStrokeCount}}() == 0) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01401 }
\DoxyCodeLine{01402     img-\/>m\_imp-\/>reindexGroups(*m\_imp);}
\DoxyCodeLine{01403 }
\DoxyCodeLine{01404     \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{01405     \textcolor{comment}{/*if (!m\_imp-\/>m\_strokes.empty() \&\&}}
\DoxyCodeLine{01406 \textcolor{comment}{m\_imp-\/>m\_strokes[index-\/1]-\/>m\_groupId.isGrouped(true)!=0 \&\&}}
\DoxyCodeLine{01407 \textcolor{comment}{img-\/>m\_imp-\/>m\_strokes[0]-\/>m\_groupId.isGrouped(true)!=0)}}
\DoxyCodeLine{01408 \textcolor{comment}{\{}}
\DoxyCodeLine{01409 \textcolor{comment}{assert(false);}}
\DoxyCodeLine{01410 \textcolor{comment}{TGroupId idNew = m\_imp-\/>m\_strokes[index]-\/>m\_groupId, idOld =}}
\DoxyCodeLine{01411 \textcolor{comment}{img-\/>m\_imp-\/>m\_strokes[0]-\/>m\_groupId;}}
\DoxyCodeLine{01412 \textcolor{comment}{for  (;i<(int)img-\/>m\_imp-\/>m\_strokes.size() \&\&}}
\DoxyCodeLine{01413 \textcolor{comment}{img-\/>m\_imp-\/>m\_strokes[i]-\/>m\_groupId==idOld; i++)}}
\DoxyCodeLine{01414 \textcolor{comment}{img-\/>m\_imp-\/>m\_strokes[i]-\/>m\_groupId==idNew;}}
\DoxyCodeLine{01415 \textcolor{comment}{\}*/}}
\DoxyCodeLine{01416 }
\DoxyCodeLine{01417     \textcolor{keywordtype}{int} strokeCount = img-\/>\mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{getStrokeCount}}();}
\DoxyCodeLine{01418     m\_imp-\/>m\_computedAlmostOnce |= img-\/>m\_imp-\/>m\_computedAlmostOnce;}
\DoxyCodeLine{01419     \textcolor{keywordflow}{for} (i = 0; i < strokeCount; i++) \{}
\DoxyCodeLine{01420       \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *srcStroke = img-\/>m\_imp-\/>m\_strokes[i];}
\DoxyCodeLine{01421       \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *tarStroke = \textcolor{keyword}{new} \mbox{\hyperlink{class_v_i_stroke}{VIStroke}}(*srcStroke);}
\DoxyCodeLine{01422       \textcolor{keywordtype}{int} strokeId        = srcStroke-\/>m\_s-\/>getId();}
\DoxyCodeLine{01423       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_vector_image_ae52f53ddb30dadf50856f12bd7d52319}{getStrokeById}}(strokeId) == 0) tarStroke-\/>m\_s-\/>setId(strokeId);}
\DoxyCodeLine{01424 }
\DoxyCodeLine{01425       index++;}
\DoxyCodeLine{01426       \textcolor{keywordflow}{if} (m\_imp-\/>m\_insideGroup == \mbox{\hyperlink{class_t_group_id}{TGroupId}}())}
\DoxyCodeLine{01427         m\_imp-\/>m\_strokes.push\_back(tarStroke);}
\DoxyCodeLine{01428       \textcolor{keywordflow}{else}  \textcolor{comment}{// if we are inside a group, the images must become part of that}}
\DoxyCodeLine{01429             \textcolor{comment}{// group}}
\DoxyCodeLine{01430       \{}
\DoxyCodeLine{01431         tarStroke-\/>m\_groupId =}
\DoxyCodeLine{01432             \mbox{\hyperlink{class_t_group_id}{TGroupId}}(m\_imp-\/>m\_insideGroup, tarStroke-\/>m\_groupId);}
\DoxyCodeLine{01433         m\_imp-\/>insertStrokeAt(tarStroke, index);}
\DoxyCodeLine{01434       \}}
\DoxyCodeLine{01435 }
\DoxyCodeLine{01436       changedStrokeArray.push\_back(index);}
\DoxyCodeLine{01437     \}}
\DoxyCodeLine{01438   \}}
\DoxyCodeLine{01439 }
\DoxyCodeLine{01440   \mbox{\hyperlink{class_t_vector_image_a033795f887a81bb5c43873901bcaf8d7}{notifyChangedStrokes}}(changedStrokeArray, std::vector<TStroke *>(), \textcolor{keyword}{false});}
\DoxyCodeLine{01441 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00536}{get\+Stroke\+By\+Id()}}, \mbox{\hyperlink{l00388}{get\+Stroke\+Count()}}, and \mbox{\hyperlink{l00898}{notify\+Changed\+Strokes()}}.

\mbox{\Hypertarget{class_t_vector_image_a70f699d338a41eee1589ea7131978cdf}\label{class_t_vector_image_a70f699d338a41eee1589ea7131978cdf}} 
\index{TVectorImage@{TVectorImage}!mergeImage@{mergeImage}}
\index{mergeImage@{mergeImage}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{mergeImage()}{mergeImage()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily int TVector\+Image\+::merge\+Image (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&}]{img,  }\item[{const \mbox{\hyperlink{class_t_affine}{TAffine}} \&}]{affine,  }\item[{bool}]{same\+Stroke\+Id = {\ttfamily true} }\end{DoxyParamCaption})}



Merge the image with the {\bfseries{img}}. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01223                                                 \{}
\DoxyCodeLine{01224   QMutexLocker sl(m\_imp-\/>m\_mutex);}
\DoxyCodeLine{01225 }
\DoxyCodeLine{01226 \textcolor{preprocessor}{\#ifdef \_DEBUG}}
\DoxyCodeLine{01227   checkIntersections();}
\DoxyCodeLine{01228 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01229 }
\DoxyCodeLine{01230   \mbox{\hyperlink{class_t_palette}{TPalette}} *tarPlt = getPalette();}
\DoxyCodeLine{01231   \mbox{\hyperlink{class_t_palette}{TPalette}} *srcPlt = img-\/>getPalette();}
\DoxyCodeLine{01232 }
\DoxyCodeLine{01233   assert(tarPlt);}
\DoxyCodeLine{01234   assert(tarPlt-\/>\mbox{\hyperlink{class_t_palette_afd211cadf0f047450bc31897f858fa73}{getPageCount}}() > 0);}
\DoxyCodeLine{01235 }
\DoxyCodeLine{01236   \textcolor{comment}{// merge della palette}}
\DoxyCodeLine{01237   std::map<int, int> styleTable;}
\DoxyCodeLine{01238   std::set<int> usedStyles;}
\DoxyCodeLine{01239   img-\/>getUsedStyles(usedStyles);}
\DoxyCodeLine{01240 }
\DoxyCodeLine{01241   \textcolor{comment}{// gmt, 16/10/07. Quando si copia e incolla un path su uno stroke succede}}
\DoxyCodeLine{01242   \textcolor{comment}{// che la palette dell'immagine sorgente sia vuota. Non mi sembra sbagliato}}
\DoxyCodeLine{01243   \textcolor{comment}{// mettere comunque un test qui}}
\DoxyCodeLine{01244   \textcolor{keywordflow}{if} (srcPlt) mergePalette(tarPlt, styleTable, srcPlt, usedStyles);}
\DoxyCodeLine{01245 }
\DoxyCodeLine{01246   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_vector_image_a70f699d338a41eee1589ea7131978cdf}{mergeImage}}(img, affine, styleTable, sameStrokeId);}
\DoxyCodeLine{01247 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00368}{TPalette\+::get\+Page\+Count()}}, and \mbox{\hyperlink{l01222}{merge\+Image()}}.



Referenced by \mbox{\hyperlink{l01222}{merge\+Image()}}.

\mbox{\Hypertarget{class_t_vector_image_a94f380fab02a3583445c92d56a8275d4}\label{class_t_vector_image_a94f380fab02a3583445c92d56a8275d4}} 
\index{TVectorImage@{TVectorImage}!mergeImage@{mergeImage}}
\index{mergeImage@{mergeImage}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{mergeImage()}{mergeImage()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily int TVector\+Image\+::merge\+Image (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&}]{img,  }\item[{const \mbox{\hyperlink{class_t_affine}{TAffine}} \&}]{affine,  }\item[{const std\+::map$<$ int, int $>$ \&}]{style\+Table,  }\item[{bool}]{same\+Stroke\+Id = {\ttfamily true} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01253                                                 \{}
\DoxyCodeLine{01254   \textcolor{keywordtype}{int} imageSize = img-\/>getStrokeCount();}
\DoxyCodeLine{01255   \textcolor{keywordflow}{if} (imageSize == 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{01256   QMutexLocker sl(m\_imp-\/>m\_mutex);}
\DoxyCodeLine{01257 }
\DoxyCodeLine{01258   m\_imp-\/>m\_computedAlmostOnce |= img-\/>m\_imp-\/>m\_computedAlmostOnce;}
\DoxyCodeLine{01259 }
\DoxyCodeLine{01260   std::vector<int> changedStrokeArray(imageSize);}
\DoxyCodeLine{01261 }
\DoxyCodeLine{01262   img-\/>m\_imp-\/>reindexGroups(*m\_imp);}
\DoxyCodeLine{01263 }
\DoxyCodeLine{01264   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01265   \textcolor{keywordtype}{int} insertAt = 0;}
\DoxyCodeLine{01266 }
\DoxyCodeLine{01267   \textcolor{keywordflow}{if} (m\_imp-\/>m\_insideGroup !=}
\DoxyCodeLine{01268       \mbox{\hyperlink{class_t_group_id}{TGroupId}}())  \textcolor{comment}{// if is inside a group, new image is put in that group.}}
\DoxyCodeLine{01269   \{}
\DoxyCodeLine{01270     \mbox{\hyperlink{class_t_group_id}{TGroupId}} groupId;}
\DoxyCodeLine{01271     \textcolor{keywordflow}{for} (i = m\_imp-\/>m\_strokes.size() -\/ 1; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{01272       \textcolor{keywordflow}{if} (m\_imp-\/>m\_insideGroup.isParentOf(m\_imp-\/>m\_strokes[i]-\/>m\_groupId)) \{}
\DoxyCodeLine{01273         insertAt = i + 1;}
\DoxyCodeLine{01274         groupId  = m\_imp-\/>m\_strokes[i]-\/>m\_groupId;}
\DoxyCodeLine{01275         \textcolor{keywordflow}{break};}
\DoxyCodeLine{01276       \}}
\DoxyCodeLine{01277     \}}
\DoxyCodeLine{01278     \textcolor{keywordflow}{if} (insertAt != 0) \{}
\DoxyCodeLine{01279       \textcolor{keywordflow}{for} (i = 0; i < (int)img-\/>m\_imp-\/>m\_strokes.size(); i++) \{}
\DoxyCodeLine{01280         \textcolor{keywordflow}{if} (!img-\/>m\_imp-\/>m\_strokes[i]-\/>m\_groupId.isGrouped()) \{}
\DoxyCodeLine{01281           img-\/>m\_imp-\/>m\_strokes[i]-\/>m\_groupId = groupId;}
\DoxyCodeLine{01282         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01283           img-\/>m\_imp-\/>m\_strokes[i]-\/>m\_groupId =}
\DoxyCodeLine{01284               \mbox{\hyperlink{class_t_group_id}{TGroupId}}(groupId, img-\/>m\_imp-\/>m\_strokes[i]-\/>m\_groupId);}
\DoxyCodeLine{01285         \}}
\DoxyCodeLine{01286       \}}
\DoxyCodeLine{01287     \}}
\DoxyCodeLine{01288   \}}
\DoxyCodeLine{01289 }
\DoxyCodeLine{01290   \textcolor{comment}{// si fondono l'ultimo gruppo ghost della vecchia a e il primo della nuova}}
\DoxyCodeLine{01291 }
\DoxyCodeLine{01292   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!m\_imp-\/>m\_strokes.empty() \&\&}
\DoxyCodeLine{01293            m\_imp-\/>m\_strokes.back()-\/>m\_groupId.isGrouped(\textcolor{keyword}{true}) != 0 \&\&}
\DoxyCodeLine{01294            img-\/>m\_imp-\/>m\_strokes[0]-\/>m\_groupId.isGrouped(\textcolor{keyword}{true}) != 0) \{}
\DoxyCodeLine{01295     \mbox{\hyperlink{class_t_group_id}{TGroupId}} idNew = m\_imp-\/>m\_strokes.back()-\/>m\_groupId,}
\DoxyCodeLine{01296              idOld = img-\/>m\_imp-\/>m\_strokes[0]-\/>m\_groupId;}
\DoxyCodeLine{01297     \textcolor{keywordflow}{for} (i = 0; i < (int)img-\/>m\_imp-\/>m\_strokes.size() \&\&}
\DoxyCodeLine{01298                 img-\/>m\_imp-\/>m\_strokes[i]-\/>m\_groupId == idOld;}
\DoxyCodeLine{01299          i++)}
\DoxyCodeLine{01300       img-\/>m\_imp-\/>m\_strokes[i]-\/>m\_groupId = idNew;}
\DoxyCodeLine{01301   \}}
\DoxyCodeLine{01302 }
\DoxyCodeLine{01303   \textcolor{comment}{// merge dell'immagine}}
\DoxyCodeLine{01304   std::map<int, int>::const\_iterator styleTableIt;}
\DoxyCodeLine{01305   \textcolor{keywordtype}{int} oldSize = \mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{getStrokeCount}}();}
\DoxyCodeLine{01306 }
\DoxyCodeLine{01307   \textcolor{keywordflow}{for} (i = 0; i < imageSize; i++) \{}
\DoxyCodeLine{01308     \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *srcStroke = img-\/>m\_imp-\/>m\_strokes[i];}
\DoxyCodeLine{01309     \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *tarStroke = \textcolor{keyword}{new} \mbox{\hyperlink{class_v_i_stroke}{VIStroke}}(*srcStroke, sameStrokeId);}
\DoxyCodeLine{01310 }
\DoxyCodeLine{01311     \textcolor{keywordtype}{int} styleId;}
\DoxyCodeLine{01312     \textcolor{comment}{// cambio i colori delle regioni}}
\DoxyCodeLine{01313     std::list<TEdge *>::const\_iterator it   = tarStroke-\/>m\_edgeList.begin(),}
\DoxyCodeLine{01314                                        it\_e = tarStroke-\/>m\_edgeList.end();}
\DoxyCodeLine{01315     \textcolor{keywordflow}{for} (; it != it\_e; ++it) \{}
\DoxyCodeLine{01316       \textcolor{keywordtype}{int} styleId  = (*it)-\/>m\_styleId;}
\DoxyCodeLine{01317       styleTableIt = styleTable.find(styleId);}
\DoxyCodeLine{01318       assert(styleTableIt != styleTable.end());}
\DoxyCodeLine{01319       \textcolor{keywordflow}{if} (styleTableIt != styleTable.end())}
\DoxyCodeLine{01320         (*it)-\/>m\_styleId = styleTableIt-\/>second;}
\DoxyCodeLine{01321     \}}
\DoxyCodeLine{01322 }
\DoxyCodeLine{01323     tarStroke-\/>m\_s-\/>\mbox{\hyperlink{class_t_stroke_a919f059066dc8dcabeb57ece1775d590}{transform}}(affine, \textcolor{keyword}{true});}
\DoxyCodeLine{01324     \textcolor{keywordtype}{int} strokeId = srcStroke-\/>m\_s-\/>getId();}
\DoxyCodeLine{01325     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_vector_image_ae52f53ddb30dadf50856f12bd7d52319}{getStrokeById}}(strokeId) == 0) tarStroke-\/>m\_s-\/>setId(strokeId);}
\DoxyCodeLine{01326 }
\DoxyCodeLine{01327     \textcolor{comment}{// cambio i colori dello stroke}}
\DoxyCodeLine{01328     styleId      = srcStroke-\/>m\_s-\/>\mbox{\hyperlink{class_t_stroke_ab77068d7894a29cc1878e173f46ed785}{getStyle}}();}
\DoxyCodeLine{01329     styleTableIt = styleTable.find(styleId);}
\DoxyCodeLine{01330     assert(styleTableIt != styleTable.end());}
\DoxyCodeLine{01331     \textcolor{keywordflow}{if} (styleTableIt != styleTable.end())}
\DoxyCodeLine{01332       tarStroke-\/>m\_s-\/>\mbox{\hyperlink{class_t_stroke_a33f59dfbed74b577700351eac8c2fc7b}{setStyle}}(styleTableIt-\/>second);}
\DoxyCodeLine{01333     \textcolor{keywordflow}{if} (insertAt == 0) \{}
\DoxyCodeLine{01334       m\_imp-\/>m\_strokes.push\_back(tarStroke);}
\DoxyCodeLine{01335       changedStrokeArray[i] = oldSize + i;}
\DoxyCodeLine{01336     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01337       std::vector<VIStroke *>::iterator it = m\_imp-\/>m\_strokes.begin();}
\DoxyCodeLine{01338       advance(it, insertAt + i);}
\DoxyCodeLine{01339       m\_imp-\/>m\_strokes.insert(it, tarStroke);}
\DoxyCodeLine{01340       changedStrokeArray[i] = insertAt + i;}
\DoxyCodeLine{01341     \}}
\DoxyCodeLine{01342   \}}
\DoxyCodeLine{01343   \textcolor{keywordflow}{if} (insertAt > 0) \{}
\DoxyCodeLine{01344     \textcolor{comment}{// for (i=changedStrokeArray.back()+1; i<m\_imp-\/>m\_strokes.size(); i++)}}
\DoxyCodeLine{01345     \textcolor{comment}{//  changedStrokeArray.push\_back(i);}}
\DoxyCodeLine{01346     m\_imp-\/>reindexEdges(changedStrokeArray, \textcolor{keyword}{true});}
\DoxyCodeLine{01347   \}}
\DoxyCodeLine{01348 }
\DoxyCodeLine{01349   \mbox{\hyperlink{class_t_vector_image_a033795f887a81bb5c43873901bcaf8d7}{notifyChangedStrokes}}(changedStrokeArray, std::vector<TStroke *>(), \textcolor{keyword}{false});}
\DoxyCodeLine{01350 }
\DoxyCodeLine{01351 \textcolor{preprocessor}{\#ifdef \_DEBUG}}
\DoxyCodeLine{01352   checkIntersections();}
\DoxyCodeLine{01353 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01354 }
\DoxyCodeLine{01355   \textcolor{keywordflow}{return} insertAt;}
\DoxyCodeLine{01356 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a764dfe9b8772127ee068b199e22fbcca}\label{class_t_vector_image_a764dfe9b8772127ee068b199e22fbcca}} 
\index{TVectorImage@{TVectorImage}!moveStrokes@{moveStrokes}}
\index{moveStrokes@{moveStrokes}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{moveStrokes()}{moveStrokes()}}
{\footnotesize\ttfamily void TVector\+Image\+::move\+Strokes (\begin{DoxyParamCaption}\item[{int}]{from\+Index,  }\item[{int}]{count,  }\item[{int}]{move\+Before }\end{DoxyParamCaption})}

Move {\bfseries{count}} strokes starting from {\bfseries{from\+Index}} before the stroke identified by the {\bfseries{move\+Before}} index. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00181                                                                        \{}
\DoxyCodeLine{00182 \textcolor{preprocessor}{\#ifdef \_DEBUG}}
\DoxyCodeLine{00183   m\_imp-\/>checkGroups();}
\DoxyCodeLine{00184 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00185   m\_imp-\/>moveStrokes(fromIndex, count, moveBefore, \textcolor{keyword}{true});}
\DoxyCodeLine{00186 \textcolor{preprocessor}{\#ifdef \_DEBUG}}
\DoxyCodeLine{00187   m\_imp-\/>checkGroups();}
\DoxyCodeLine{00188 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00189 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a033795f887a81bb5c43873901bcaf8d7}\label{class_t_vector_image_a033795f887a81bb5c43873901bcaf8d7}} 
\index{TVectorImage@{TVectorImage}!notifyChangedStrokes@{notifyChangedStrokes}}
\index{notifyChangedStrokes@{notifyChangedStrokes}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{notifyChangedStrokes()}{notifyChangedStrokes()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void TVector\+Image\+::notify\+Changed\+Strokes (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ int $>$ \&}]{stroke\+Index\+Array,  }\item[{const std\+::vector$<$ \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ $>$ \&}]{old\+Stroke\+Array,  }\item[{bool}]{are\+Flipped = {\ttfamily false} }\end{DoxyParamCaption})}

Call the following method after stroke modification \begin{DoxyNote}{Note}
you must specify, using the second argument, whether the modification was a reflection 
\end{DoxyNote}

\begin{DoxyCode}{0}
\DoxyCodeLine{00900                                                                  \{}
\DoxyCodeLine{00901   std::vector<TStroke *> aux;}
\DoxyCodeLine{00902 }
\DoxyCodeLine{00903   \textcolor{comment}{/*}}
\DoxyCodeLine{00904 \textcolor{comment}{if (oldStrokeArray.empty())}}
\DoxyCodeLine{00905 \textcolor{comment}{\{}}
\DoxyCodeLine{00906 \textcolor{comment}{  for (int i=0; i<(int)strokeIndexArray.size(); i++)}}
\DoxyCodeLine{00907 \textcolor{comment}{    \{}}
\DoxyCodeLine{00908 \textcolor{comment}{          TStroke *s = getStroke(strokeIndexArray[i]);}}
\DoxyCodeLine{00909 \textcolor{comment}{    aux.push\_back(s);}}
\DoxyCodeLine{00910 \textcolor{comment}{          \}}}
\DoxyCodeLine{00911 \textcolor{comment}{m\_imp-\/>notifyChangedStrokes(strokeIndexArray, aux, areFlipped);}}
\DoxyCodeLine{00912 \textcolor{comment}{  \}}}
\DoxyCodeLine{00913 \textcolor{comment}{else*/}}
\DoxyCodeLine{00914   m\_imp-\/>notifyChangedStrokes(strokeIndexArray, oldStrokeArray, areFlipped);}
\DoxyCodeLine{00915 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l02548}{group()}}, \mbox{\hyperlink{l01481}{insert\+Image()}}, \mbox{\hyperlink{l01384}{merge\+Image()}}, and \mbox{\hyperlink{l02462}{ungroup()}}.

\mbox{\Hypertarget{class_t_vector_image_a748abdc562d090f5cd80ffcbfa592c5a}\label{class_t_vector_image_a748abdc562d090f5cd80ffcbfa592c5a}} 
\index{TVectorImage@{TVectorImage}!notifyChangedStrokes@{notifyChangedStrokes}}
\index{notifyChangedStrokes@{notifyChangedStrokes}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{notifyChangedStrokes()}{notifyChangedStrokes()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void TVector\+Image\+::notify\+Changed\+Strokes (\begin{DoxyParamCaption}\item[{int}]{stroke\+Index,  }\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{old\+Stroke = {\ttfamily 0},  }\item[{bool}]{is\+Flipped = {\ttfamily false} }\end{DoxyParamCaption})}



Call the following method after stroke modification. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00920                                                                             \{}
\DoxyCodeLine{00921   std::vector<int> app(1);}
\DoxyCodeLine{00922   app[0] = strokeIndexArray;}
\DoxyCodeLine{00923 }
\DoxyCodeLine{00924   std::vector<TStroke *> oldStrokeArray(1);}
\DoxyCodeLine{00925   oldStrokeArray[0] = oldStroke ? oldStroke : \mbox{\hyperlink{class_t_vector_image_a1aa2f3ab6c30a6f8a64b2cb35072ffeb}{getStroke}}(strokeIndexArray);}
\DoxyCodeLine{00926   m\_imp-\/>notifyChangedStrokes(app, oldStrokeArray, isFlipped);}
\DoxyCodeLine{00927 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00524}{get\+Stroke()}}.

\mbox{\Hypertarget{class_t_vector_image_af2976de9e4eeea9229a5300d952a1081}\label{class_t_vector_image_af2976de9e4eeea9229a5300d952a1081}} 
\index{TVectorImage@{TVectorImage}!pickGroup@{pickGroup}}
\index{pickGroup@{pickGroup}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{pickGroup()}{pickGroup()}}
{\footnotesize\ttfamily int TVector\+Image\+::pick\+Group (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{03088                                                     \{}
\DoxyCodeLine{03089   \textcolor{keywordtype}{int} index;}
\DoxyCodeLine{03090   \textcolor{keywordflow}{if} ((index = pickGroup(pos, \textcolor{keyword}{true})) == -\/1) \textcolor{keywordflow}{return} pickGroup(pos, \textcolor{keyword}{false});}
\DoxyCodeLine{03091 }
\DoxyCodeLine{03092   \textcolor{keywordflow}{return} index;}
\DoxyCodeLine{03093 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_aab16bf34646991b9da7e78c0d300ea2a}\label{class_t_vector_image_aab16bf34646991b9da7e78c0d300ea2a}} 
\index{TVectorImage@{TVectorImage}!putRegion@{putRegion}}
\index{putRegion@{putRegion}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{putRegion()}{putRegion()}}
{\footnotesize\ttfamily void TVector\+Image\+::put\+Region (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_region}{TRegion}} $\ast$}]{region }\end{DoxyParamCaption})}



Put a region in the regions\textquotesingle{} container. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01134                                             \{}
\DoxyCodeLine{01135   m\_imp-\/>m\_regions.push\_back(region);}
\DoxyCodeLine{01136 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a1428dee57a176a510da8079385a771dd}\label{class_t_vector_image_a1428dee57a176a510da8079385a771dd}} 
\index{TVectorImage@{TVectorImage}!reassignStyles@{reassignStyles}}
\index{reassignStyles@{reassignStyles}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{reassignStyles()}{reassignStyles()}}
{\footnotesize\ttfamily void TVector\+Image\+::reassign\+Styles (\begin{DoxyParamCaption}\item[{std\+::map$<$ int, int $>$ \&}]{table }\end{DoxyParamCaption})}



Reassign all stroke\textquotesingle{}s style. 


\begin{DoxyCode}{0}
\DoxyCodeLine{03283                                                       \{}
\DoxyCodeLine{03284   UINT i;}
\DoxyCodeLine{03285   UINT strokeCount = \mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{getStrokeCount}}();}
\DoxyCodeLine{03286   \textcolor{comment}{// UINT regionCount = getRegionCount();}}
\DoxyCodeLine{03287   \textcolor{keywordflow}{for} (i = 0; i < strokeCount; ++i) \{}
\DoxyCodeLine{03288     \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = \mbox{\hyperlink{class_t_vector_image_a1aa2f3ab6c30a6f8a64b2cb35072ffeb}{getStroke}}(i);}
\DoxyCodeLine{03289     \textcolor{keywordtype}{int} styleId     = stroke-\/>\mbox{\hyperlink{class_t_stroke_ab77068d7894a29cc1878e173f46ed785}{getStyle}}();}
\DoxyCodeLine{03290     \textcolor{keywordflow}{if} (styleId != 0) \{}
\DoxyCodeLine{03291       map<int, int>::iterator it = table.find(styleId);}
\DoxyCodeLine{03292       \textcolor{keywordflow}{if} (it != table.end()) stroke-\/>\mbox{\hyperlink{class_t_stroke_a33f59dfbed74b577700351eac8c2fc7b}{setStyle}}(it-\/>second);}
\DoxyCodeLine{03293     \}}
\DoxyCodeLine{03294   \}}
\DoxyCodeLine{03295 }
\DoxyCodeLine{03296   \mbox{\hyperlink{class_intersection}{Intersection}} *p1;}
\DoxyCodeLine{03297   \mbox{\hyperlink{class_intersected_stroke}{IntersectedStroke}} *p2;}
\DoxyCodeLine{03298 }
\DoxyCodeLine{03299   \textcolor{keywordflow}{for} (p1 = m\_imp-\/>m\_intersectionData-\/>m\_intList.first(); p1; p1 = p1-\/>next())}
\DoxyCodeLine{03300     \textcolor{keywordflow}{for} (p2 = (*p1).m\_strokeList.first(); p2; p2 = p2-\/>next())}
\DoxyCodeLine{03301       \textcolor{keywordflow}{if} (p2-\/>m\_edge.m\_styleId != 0) \{}
\DoxyCodeLine{03302         map<int, int>::iterator it = table.find(p2-\/>m\_edge.m\_styleId);}
\DoxyCodeLine{03303         \textcolor{keywordflow}{if} (it != table.end()) p2-\/>m\_edge.m\_styleId = it-\/>second;}
\DoxyCodeLine{03304         \textcolor{comment}{// assert(it-\/>second<100);}}
\DoxyCodeLine{03305       \}}
\DoxyCodeLine{03306 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00524}{get\+Stroke()}}, \mbox{\hyperlink{l00388}{get\+Stroke\+Count()}}, \mbox{\hyperlink{l02366}{TStroke\+::get\+Style()}}, and \mbox{\hyperlink{l02370}{TStroke\+::set\+Style()}}.

\mbox{\Hypertarget{class_t_vector_image_a193a77942595f079e999749a6066c4b8}\label{class_t_vector_image_a193a77942595f079e999749a6066c4b8}} 
\index{TVectorImage@{TVectorImage}!recomputeRegionsIfNeeded@{recomputeRegionsIfNeeded}}
\index{recomputeRegionsIfNeeded@{recomputeRegionsIfNeeded}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{recomputeRegionsIfNeeded()}{recomputeRegionsIfNeeded()}}
{\footnotesize\ttfamily void TVector\+Image\+::recompute\+Regions\+If\+Needed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

forces the recomputing of all regions (it is actually done only after having loaded the vectorimage) 
\begin{DoxyCode}{0}
\DoxyCodeLine{01444                                             \{}
\DoxyCodeLine{01445   \textcolor{keywordflow}{if} (!m\_imp-\/>m\_justLoaded) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01446 }
\DoxyCodeLine{01447   m\_imp-\/>m\_justLoaded = \textcolor{keyword}{false};}
\DoxyCodeLine{01448 }
\DoxyCodeLine{01449   std::vector<int> v(m\_imp-\/>m\_strokes.size());}
\DoxyCodeLine{01450   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{01451   \textcolor{keywordflow}{for} (i = 0; i < (int)m\_imp-\/>m\_strokes.size(); i++) v[i] = i;}
\DoxyCodeLine{01452 }
\DoxyCodeLine{01453   m\_imp-\/>notifyChangedStrokes(v, std::vector<TStroke *>(), \textcolor{keyword}{false});}
\DoxyCodeLine{01454 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00821}{Stage\+::\+Raster\+Painter\+::on\+Vector\+Image()}}.

\mbox{\Hypertarget{class_t_vector_image_aded1aaf380a466a773d03da55f7ebad2}\label{class_t_vector_image_aded1aaf380a466a773d03da55f7ebad2}} 
\index{TVectorImage@{TVectorImage}!removeEndpoints@{removeEndpoints}}
\index{removeEndpoints@{removeEndpoints}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{removeEndpoints()}{removeEndpoints()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ TVector\+Image\+::remove\+Endpoints (\begin{DoxyParamCaption}\item[{int}]{stroke\+Index }\end{DoxyParamCaption})}

this method removes the parts of the stroke that are not bounds of regions. only ending parts are removed. If the entire stroke is not bounding any region, it is kept entitely. it returns the original stroke (for undo) 
\begin{DoxyCode}{0}
\DoxyCodeLine{02031                                                       \{}
\DoxyCodeLine{02032   \textcolor{keywordflow}{return} m\_imp-\/>removeEndpoints(strokeIndex);}
\DoxyCodeLine{02033 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a33a9f3cddc17630c35c8bf62e9989cc2}\label{class_t_vector_image_a33a9f3cddc17630c35c8bf62e9989cc2}} 
\index{TVectorImage@{TVectorImage}!removeStroke@{removeStroke}}
\index{removeStroke@{removeStroke}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{removeStroke()}{removeStroke()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ TVector\+Image\+::remove\+Stroke (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{bool}]{do\+Compute\+Regions = {\ttfamily true} }\end{DoxyParamCaption})}

Remove the stroke of index {\bfseries{index}} and if {\bfseries{do\+Compute\+Regions}} is true recompute the regions 
\begin{DoxyCode}{0}
\DoxyCodeLine{00274                                                                     \{}
\DoxyCodeLine{00275   \textcolor{keywordflow}{return} m\_imp-\/>removeStroke(index, doComputeRegions);}
\DoxyCodeLine{00276 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l02417}{area\+Fill()}}, \mbox{\hyperlink{l00330}{delete\+Stroke()}}, \mbox{\hyperlink{l01458}{erase\+Style\+Ids()}}, and \mbox{\hyperlink{l00277}{Area\+Filler\+::stroke\+Fill()}}.

\mbox{\Hypertarget{class_t_vector_image_a33d15a5d52bf9e4109f7f0aaafdbd2c7}\label{class_t_vector_image_a33d15a5d52bf9e4109f7f0aaafdbd2c7}} 
\index{TVectorImage@{TVectorImage}!removeStrokes@{removeStrokes}}
\index{removeStrokes@{removeStrokes}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{removeStrokes()}{removeStrokes()}}
{\footnotesize\ttfamily void TVector\+Image\+::remove\+Strokes (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ int $>$ \&}]{tobe\+Removed,  }\item[{bool}]{delete\+Them,  }\item[{bool}]{recompute\+Regions }\end{DoxyParamCaption})}



Remove the strokes identified by indexes in the vector {\bfseries{to\+Be\+Removed}}. 

If {\bfseries{delete\+Them}} is true strokes are really delete; if {\bfseries{do\+Compute\+Regions}} is true recompute the regions 
\begin{DoxyCode}{0}
\DoxyCodeLine{00299                                                                          \{}
\DoxyCodeLine{00300   m\_imp-\/>removeStrokes(toBeRemoved, deleteThem, recomputeRegions);}
\DoxyCodeLine{00301 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01554}{split\+Selected()}}.

\mbox{\Hypertarget{class_t_vector_image_aae111c1199b73fb91a6f43759c12373d}\label{class_t_vector_image_aae111c1199b73fb91a6f43759c12373d}} 
\index{TVectorImage@{TVectorImage}!render@{render}}
\index{render@{render}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{render()}{render()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} TVector\+Image\+::render (\begin{DoxyParamCaption}\item[{bool}]{only\+Strokes }\end{DoxyParamCaption})}

Make the rendering of the vector image, return a {\bfseries{TRaster32P}} with the image rendered 
\begin{DoxyCode}{0}
\DoxyCodeLine{00629                                                 \{}
\DoxyCodeLine{00630   \mbox{\hyperlink{class_t_rect_t}{TRect}} bBox = convert(\mbox{\hyperlink{class_t_vector_image_a86205b8e894a807fe76937c923f6abc0}{getBBox}}());}
\DoxyCodeLine{00631   \textcolor{keywordflow}{if} (bBox.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \textcolor{keywordflow}{return} (\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}})0;}
\DoxyCodeLine{00632 }
\DoxyCodeLine{00633   std::unique\_ptr<TOfflineGL> offlineGlContext(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_offline_g_l}{TOfflineGL}}(bBox.getSize()));}
\DoxyCodeLine{00634   offlineGlContext-\/>clear(TPixel32(0, 0, 0, 0));}
\DoxyCodeLine{00635   offlineGlContext-\/>makeCurrent();}
\DoxyCodeLine{00636   \mbox{\hyperlink{class_t_vector_render_data}{TVectorRenderData}} rd(\mbox{\hyperlink{class_t_translation}{TTranslation}}(-\/convert(bBox.getP00())),}
\DoxyCodeLine{00637                        \mbox{\hyperlink{class_t_rect_t}{TRect}}(bBox.getSize()), getPalette(), 0, \textcolor{keyword}{true}, \textcolor{keyword}{true});}
\DoxyCodeLine{00638   rd.m\_drawRegions = !onlyStrokes;}
\DoxyCodeLine{00639   offlineGlContext-\/>draw(\textcolor{keyword}{this}, rd, \textcolor{keyword}{false});}
\DoxyCodeLine{00640 }
\DoxyCodeLine{00641   \textcolor{keywordflow}{return} offlineGlContext-\/>getRaster()-\/>clone();}
\DoxyCodeLine{00642 }
\DoxyCodeLine{00643   \textcolor{comment}{// hardRenderVectorImage(rd,ras,this);}}
\DoxyCodeLine{00644 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00567}{get\+BBox()}}, \mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{TRect\+T$<$ T $>$\+::is\+Empty()}}, and \mbox{\hyperlink{l00073}{TVector\+Render\+Data\+::m\+\_\+draw\+Regions}}.

\mbox{\Hypertarget{class_t_vector_image_a615c5f07ed0827d5a8b4b5b15d0fcf78}\label{class_t_vector_image_a615c5f07ed0827d5a8b4b5b15d0fcf78}} 
\index{TVectorImage@{TVectorImage}!replaceStroke@{replaceStroke}}
\index{replaceStroke@{replaceStroke}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{replaceStroke()}{replaceStroke()}}
{\footnotesize\ttfamily void TVector\+Image\+::replace\+Stroke (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{new\+Stroke }\end{DoxyParamCaption})}



Replace the stroke at index {\bfseries{index}} with {\bfseries{new\+Stroke}}. 


\begin{DoxyCode}{0}
\DoxyCodeLine{03058                                                               \{}
\DoxyCodeLine{03059   \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{int})m\_imp-\/>m\_strokes.size() <= index) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03060 }
\DoxyCodeLine{03061   \textcolor{keyword}{delete} m\_imp-\/>m\_strokes[index]-\/>m\_s;}
\DoxyCodeLine{03062   m\_imp-\/>m\_strokes[index]-\/>m\_s = newStroke;}
\DoxyCodeLine{03063 }
\DoxyCodeLine{03064   \mbox{\hyperlink{class_intersection}{Intersection}} *p1;}
\DoxyCodeLine{03065   \mbox{\hyperlink{class_intersected_stroke}{IntersectedStroke}} *p2;}
\DoxyCodeLine{03066 }
\DoxyCodeLine{03067   \textcolor{keywordflow}{for} (p1 = m\_imp-\/>m\_intersectionData-\/>m\_intList.first(); p1; p1 = p1-\/>next())}
\DoxyCodeLine{03068     \textcolor{keywordflow}{for} (p2 = (*p1).m\_strokeList.first(); p2; p2      = p2-\/>next())}
\DoxyCodeLine{03069       \textcolor{keywordflow}{if} (p2-\/>m\_edge.m\_index == index) p2-\/>m\_edge.m\_s = newStroke;}
\DoxyCodeLine{03070 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a6c01ce6a1797eac29163e9b92b7304c9}\label{class_t_vector_image_a6c01ce6a1797eac29163e9b92b7304c9}} 
\index{TVectorImage@{TVectorImage}!restoreEndpoints@{restoreEndpoints}}
\index{restoreEndpoints@{restoreEndpoints}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{restoreEndpoints()}{restoreEndpoints()}}
{\footnotesize\ttfamily void TVector\+Image\+::restore\+Endpoints (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{old\+Stroke }\end{DoxyParamCaption})}

this method replaces the stroke at index with oldstroke. Oldstroke is supposed to contain existing stroke. this method is used for undoing remove\+Endpoints . 
\begin{DoxyCode}{0}
\DoxyCodeLine{02035                                                                  \{}
\DoxyCodeLine{02036   m\_imp-\/>restoreEndpoints(index, oldStroke);}
\DoxyCodeLine{02037 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a90c030d3d2eba96443fd604e343dd8e5}\label{class_t_vector_image_a90c030d3d2eba96443fd604e343dd8e5}} 
\index{TVectorImage@{TVectorImage}!sameGroup@{sameGroup}}
\index{sameGroup@{sameGroup}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{sameGroup()}{sameGroup()}}
{\footnotesize\ttfamily bool TVector\+Image\+::same\+Group (\begin{DoxyParamCaption}\item[{UINT}]{index1,  }\item[{UINT}]{index2 }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Return true if two objects are contained into the same group. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00166                                                  \{}
\DoxyCodeLine{00167     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_vector_image_a1957d05b7edf80aee137479d23dc33fb}{areDifferentGroup}}(index1, \textcolor{keyword}{false}, index2, \textcolor{keyword}{false}) == -\/1;}
\DoxyCodeLine{00168   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a3e1d82ceb5ba95fd2452bac0d5a9c6b7}\label{class_t_vector_image_a3e1d82ceb5ba95fd2452bac0d5a9c6b7}} 
\index{TVectorImage@{TVectorImage}!sameGroupStrokeAndRegion@{sameGroupStrokeAndRegion}}
\index{sameGroupStrokeAndRegion@{sameGroupStrokeAndRegion}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{sameGroupStrokeAndRegion()}{sameGroupStrokeAndRegion()}}
{\footnotesize\ttfamily bool TVector\+Image\+::same\+Group\+Stroke\+And\+Region (\begin{DoxyParamCaption}\item[{UINT}]{stroke\+Index,  }\item[{UINT}]{region\+Index }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Return true if a stroke and a region have common parent groups. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00170                                                                           \{}
\DoxyCodeLine{00171     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_vector_image_a1957d05b7edf80aee137479d23dc33fb}{areDifferentGroup}}(strokeIndex, \textcolor{keyword}{false}, regionIndex, \textcolor{keyword}{true}) == -\/1;}
\DoxyCodeLine{00172   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_aa81f3c0e294c12aefefb675e714bf161}\label{class_t_vector_image_aa81f3c0e294c12aefefb675e714bf161}} 
\index{TVectorImage@{TVectorImage}!sameParentGroupStrokes@{sameParentGroupStrokes}}
\index{sameParentGroupStrokes@{sameParentGroupStrokes}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{sameParentGroupStrokes()}{sameParentGroupStrokes()}}
{\footnotesize\ttfamily bool TVector\+Image\+::same\+Parent\+Group\+Strokes (\begin{DoxyParamCaption}\item[{UINT}]{index1,  }\item[{UINT}]{index2 }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Return true if two strokes has common parent groups. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00161                                                               \{}
\DoxyCodeLine{00162     \textcolor{keywordtype}{int} ret = \mbox{\hyperlink{class_t_vector_image_a1957d05b7edf80aee137479d23dc33fb}{areDifferentGroup}}(index1, \textcolor{keyword}{false}, index2, \textcolor{keyword}{false});}
\DoxyCodeLine{00163     \textcolor{keywordflow}{return} (ret == -\/1 || ret >= 1);}
\DoxyCodeLine{00164   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_aea598419eaeaccfdf8b87dcce203d740}\label{class_t_vector_image_aea598419eaeaccfdf8b87dcce203d740}} 
\index{TVectorImage@{TVectorImage}!sameSubGroup@{sameSubGroup}}
\index{sameSubGroup@{sameSubGroup}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{sameSubGroup()}{sameSubGroup()}}
{\footnotesize\ttfamily bool TVector\+Image\+::same\+Sub\+Group (\begin{DoxyParamCaption}\item[{int}]{stroke\+Index0,  }\item[{int}]{stroke\+Index1 }\end{DoxyParamCaption}) const}

it says if two strokes are in the same group, even qhen the image is entered in a group. 
\begin{DoxyCode}{0}
\DoxyCodeLine{02445                                                             \{}
\DoxyCodeLine{02446   \textcolor{keywordflow}{if} (index0 < 0 || index1 < 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{02447   \textcolor{keywordflow}{return} m\_imp-\/>m\_strokes[index0]-\/>m\_groupId.getCommonParentDepth(}
\DoxyCodeLine{02448              m\_imp-\/>m\_strokes[index1]-\/>m\_groupId) >}
\DoxyCodeLine{02449          m\_imp-\/>m\_insideGroup.getDepth();}
\DoxyCodeLine{02450 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a989fe45c3cb3d2f228041598f9e71298}\label{class_t_vector_image_a989fe45c3cb3d2f228041598f9e71298}} 
\index{TVectorImage@{TVectorImage}!selectable@{selectable}}
\index{selectable@{selectable}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{selectable()}{selectable()}}
{\footnotesize\ttfamily bool TVector\+Image\+::selectable (\begin{DoxyParamCaption}\item[{int}]{stroke\+Index }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{02950                                                    \{}
\DoxyCodeLine{02951   \textcolor{keywordflow}{return} (m\_imp-\/>m\_insideGroup != m\_imp-\/>m\_strokes[strokeIndex]-\/>m\_groupId \&\&}
\DoxyCodeLine{02952           inCurrentGroup(strokeIndex));}
\DoxyCodeLine{02953 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a21a45dbb1a37fa54736d23d546fe2588}\label{class_t_vector_image_a21a45dbb1a37fa54736d23d546fe2588}} 
\index{TVectorImage@{TVectorImage}!selectFill@{selectFill}}
\index{selectFill@{selectFill}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{selectFill()}{selectFill()}}
{\footnotesize\ttfamily bool TVector\+Image\+::select\+Fill (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{select\+Area,  }\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{s,  }\item[{int}]{style\+Id,  }\item[{bool}]{only\+Unfilled,  }\item[{bool}]{fill\+Areas,  }\item[{bool}]{fill\+Lines }\end{DoxyParamCaption})}

Fill all the regions and strokes contained in {\bfseries{select\+Area}} or contained into the regions formed by the stroke {\bfseries{s}} with the style {\bfseries{style\+Id}}.

If {\bfseries{only\+Unfilled}} is true, only regions filled with the style 0 are filled with the new stile. If {\bfseries{fill\+Areas}} is true regions are filled. If {\bfseries{fill\+Lines}} is true stroke are filled. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00774                                               \{}
\DoxyCodeLine{00775   \textcolor{keywordflow}{if} (!m\_imp-\/>m\_areValidRegions) m\_imp-\/>computeRegions();}
\DoxyCodeLine{00776   \textcolor{keywordflow}{return} m\_imp-\/>selectFill(selArea, s, newStyleId, onlyUnfilled, fillAreas,}
\DoxyCodeLine{00777                            fillLines);}
\DoxyCodeLine{00778 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l02107}{TImage\+Reader\+Svg\+::load()}}, and \mbox{\hyperlink{l00821}{Stage\+::\+Raster\+Painter\+::on\+Vector\+Image()}}.

\mbox{\Hypertarget{class_t_vector_image_a3ed7e8f50c74faa95f75f787d5975f73}\label{class_t_vector_image_a3ed7e8f50c74faa95f75f787d5975f73}} 
\index{TVectorImage@{TVectorImage}!setAutocloseTolerance@{setAutocloseTolerance}}
\index{setAutocloseTolerance@{setAutocloseTolerance}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{setAutocloseTolerance()}{setAutocloseTolerance()}}
{\footnotesize\ttfamily void TVector\+Image\+::set\+Autoclose\+Tolerance (\begin{DoxyParamCaption}\item[{double}]{val }\end{DoxyParamCaption})}



Set the autoclose tolerance to the specified value. 


\begin{DoxyCode}{0}
\DoxyCodeLine{02401                                                    \{}
\DoxyCodeLine{02402   m\_imp-\/>m\_autocloseTolerance = val;}
\DoxyCodeLine{02403 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a3104d5000ae8a21d6a69b261918c2c1c}\label{class_t_vector_image_a3104d5000ae8a21d6a69b261918c2c1c}} 
\index{TVectorImage@{TVectorImage}!setEdgeColors@{setEdgeColors}}
\index{setEdgeColors@{setEdgeColors}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{setEdgeColors()}{setEdgeColors()}}
{\footnotesize\ttfamily void TVector\+Image\+::set\+Edge\+Colors (\begin{DoxyParamCaption}\item[{int}]{stroke\+Index,  }\item[{int}]{left\+Color\+Index,  }\item[{int}]{right\+Color\+Index }\end{DoxyParamCaption})}

Set the edges of the stroke identified by {\bfseries{stroke\+Index}} with the styles {\bfseries{left\+Color\+Index}} and \textbackslash{}bright\+Color\+Index. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00501                                                       \{}
\DoxyCodeLine{00502   std::list<TEdge *> \&ll = m\_imp-\/>m\_strokes[strokeIndex]-\/>m\_edgeList;}
\DoxyCodeLine{00503 }
\DoxyCodeLine{00504   std::list<TEdge *>::const\_iterator l   = ll.begin();}
\DoxyCodeLine{00505   std::list<TEdge *>::const\_iterator l\_e = ll.end();}
\DoxyCodeLine{00506   \textcolor{keywordflow}{for} (; l != l\_e; ++l) \{}
\DoxyCodeLine{00507     \textcolor{comment}{// double w0 = (*l)-\/>m\_w0, w1 = (*l)-\/>m\_w1;}}
\DoxyCodeLine{00508     \textcolor{keywordflow}{if} ((*l)-\/>m\_w0 > (*l)-\/>m\_w1) \{}
\DoxyCodeLine{00509       \textcolor{keywordflow}{if} (leftColorIndex != -\/1)}
\DoxyCodeLine{00510         (*l)-\/>m\_styleId = leftColorIndex;}
\DoxyCodeLine{00511       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (rightColorIndex != -\/1)}
\DoxyCodeLine{00512         (*l)-\/>m\_styleId = rightColorIndex;}
\DoxyCodeLine{00513     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00514       \textcolor{keywordflow}{if} (rightColorIndex != -\/1)}
\DoxyCodeLine{00515         (*l)-\/>m\_styleId = rightColorIndex;}
\DoxyCodeLine{00516       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (leftColorIndex != -\/1)}
\DoxyCodeLine{00517         (*l)-\/>m\_styleId = leftColorIndex;}
\DoxyCodeLine{00518     \}}
\DoxyCodeLine{00519   \}}
\DoxyCodeLine{00520 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a1c5610a577ffb2ed9411970c15a76414}\label{class_t_vector_image_a1c5610a577ffb2ed9411970c15a76414}} 
\index{TVectorImage@{TVectorImage}!setFillData@{setFillData}}
\index{setFillData@{setFillData}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{setFillData()}{setFillData()}}
{\footnotesize\ttfamily void TVector\+Image\+::set\+Fill\+Data (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{struct_t_vector_image_1_1_intersection_branch}{Intersection\+Branch}}\mbox{[}$\,$\mbox{]}$>$ const \&}]{v,  }\item[{UINT}]{size,  }\item[{bool}]{do\+Compute\+Regions = {\ttfamily true} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01595                                                                         \{}
\DoxyCodeLine{01596   m\_imp-\/>setFillData(v, branchCount, doComputeRegions);}
\DoxyCodeLine{01597 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a4628d1d5287b5a9e8110dbbb6630e241}\label{class_t_vector_image_a4628d1d5287b5a9e8110dbbb6630e241}} 
\index{TVectorImage@{TVectorImage}!splitImage@{splitImage}}
\index{splitImage@{splitImage}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{splitImage()}{splitImage()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} TVector\+Image\+::split\+Image (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ int $>$ \&}]{indices,  }\item[{bool}]{remove\+Flag }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01528                                                         \{}
\DoxyCodeLine{01529   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} out             = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_vector_image_a61605055ad066eddbd5fbddc498f6e1e}{TVectorImage}};}
\DoxyCodeLine{01530   out-\/>m\_imp-\/>m\_maxGroupId      = m\_imp-\/>m\_maxGroupId;}
\DoxyCodeLine{01531   out-\/>m\_imp-\/>m\_maxGhostGroupId = m\_imp-\/>m\_maxGhostGroupId;}
\DoxyCodeLine{01532 }
\DoxyCodeLine{01533   std::vector<int> toBeRemoved;}
\DoxyCodeLine{01534 }
\DoxyCodeLine{01535   \mbox{\hyperlink{class_t_palette}{TPalette}} *vp = getPalette();}
\DoxyCodeLine{01536   \textcolor{keywordflow}{if} (vp) out-\/>setPalette(vp-\/>\mbox{\hyperlink{class_t_palette_abc3ef5824d89e65687b32c530cf25325}{clone}}());}
\DoxyCodeLine{01537 }
\DoxyCodeLine{01538   \textcolor{keywordflow}{for} (UINT i = 0; i < indices.size(); ++i) \{}
\DoxyCodeLine{01539     \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *ref = m\_imp-\/>m\_strokes[indices[i]];}
\DoxyCodeLine{01540     assert(ref);}
\DoxyCodeLine{01541     \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *vs       = \textcolor{keyword}{new} \mbox{\hyperlink{class_v_i_stroke}{VIStroke}}(*ref);}
\DoxyCodeLine{01542     vs-\/>m\_isNewForFill = \textcolor{keyword}{true};}
\DoxyCodeLine{01543     out-\/>m\_imp-\/>m\_strokes.push\_back(vs);}
\DoxyCodeLine{01544   \}}
\DoxyCodeLine{01545 }
\DoxyCodeLine{01546   \textcolor{keywordflow}{if} (removeFlag) \mbox{\hyperlink{class_t_vector_image_a33d15a5d52bf9e4109f7f0aaafdbd2c7}{removeStrokes}}(indices, \textcolor{keyword}{true}, \textcolor{keyword}{true});}
\DoxyCodeLine{01547   out-\/>m\_imp-\/>m\_areValidRegions    = \textcolor{keyword}{false};}
\DoxyCodeLine{01548   out-\/>m\_imp-\/>m\_computedAlmostOnce = m\_imp-\/>m\_computedAlmostOnce;}
\DoxyCodeLine{01549   \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{01550 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_aafe867b20d42316e773349d67963a7ea}\label{class_t_vector_image_aafe867b20d42316e773349d67963a7ea}} 
\index{TVectorImage@{TVectorImage}!splitSelected@{splitSelected}}
\index{splitSelected@{splitSelected}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{splitSelected()}{splitSelected()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} TVector\+Image\+::split\+Selected (\begin{DoxyParamCaption}\item[{bool}]{remove\+Flag }\end{DoxyParamCaption})}

Creates a new Image using the selected strokes. If remove\+Flag==true then removes selected strokes It includes (in the new image) the color information too. It maintains stroke ids. 
\begin{DoxyCode}{0}
\DoxyCodeLine{01554                                                          \{}
\DoxyCodeLine{01555   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} out = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_vector_image_a61605055ad066eddbd5fbddc498f6e1e}{TVectorImage}};}
\DoxyCodeLine{01556   std::vector<int> toBeRemoved;}
\DoxyCodeLine{01557 }
\DoxyCodeLine{01558   \textcolor{keywordflow}{for} (UINT i = 0; i < \mbox{\hyperlink{class_t_vector_image_add44e109ce62ba075799c0602724a841}{getStrokeCount}}(); ++i) \{}
\DoxyCodeLine{01559     \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *ref = m\_imp-\/>m\_strokes[i];}
\DoxyCodeLine{01560     assert(ref);}
\DoxyCodeLine{01561     \textcolor{keywordflow}{if} (ref-\/>m\_s-\/>\mbox{\hyperlink{class_t_stroke_a4fb5ba0483f542c25ab11499a4e273bb}{getFlag}}(TStroke::c\_selected\_flag)) \{}
\DoxyCodeLine{01562       \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *stroke = \textcolor{keyword}{new} \mbox{\hyperlink{class_v_i_stroke}{VIStroke}}(*ref);}
\DoxyCodeLine{01563       out-\/>m\_imp-\/>m\_strokes.push\_back(stroke);}
\DoxyCodeLine{01564       \textcolor{keywordflow}{if} (removeFlag) \{}
\DoxyCodeLine{01565         toBeRemoved.push\_back(i);}
\DoxyCodeLine{01566         \textcolor{comment}{//        removeStroke(i);}}
\DoxyCodeLine{01567         \textcolor{comment}{//          delete ref;}}
\DoxyCodeLine{01568         \textcolor{comment}{//        i-\/-\/;}}
\DoxyCodeLine{01569       \}}
\DoxyCodeLine{01570     \}}
\DoxyCodeLine{01571   \}}
\DoxyCodeLine{01572   \mbox{\hyperlink{class_t_vector_image_a33d15a5d52bf9e4109f7f0aaafdbd2c7}{removeStrokes}}(toBeRemoved, \textcolor{keyword}{true}, \textcolor{keyword}{true});}
\DoxyCodeLine{01573   out-\/>m\_imp-\/>m\_areValidRegions = \textcolor{keyword}{false};}
\DoxyCodeLine{01574   \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{01575 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l02417}{TStroke\+::get\+Flag()}}, \mbox{\hyperlink{l00388}{get\+Stroke\+Count()}}, \mbox{\hyperlink{l00298}{remove\+Strokes()}}, and \mbox{\hyperlink{l00118}{TVector\+Image()}}.

\mbox{\Hypertarget{class_t_vector_image_a9e8f62442d211e3777e2550cd612c15c}\label{class_t_vector_image_a9e8f62442d211e3777e2550cd612c15c}} 
\index{TVectorImage@{TVectorImage}!splitStroke@{splitStroke}}
\index{splitStroke@{splitStroke}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{splitStroke()}{splitStroke()}}
{\footnotesize\ttfamily void TVector\+Image\+::split\+Stroke (\begin{DoxyParamCaption}\item[{int}]{stroke\+Index,  }\item[{const std\+::vector$<$ Double\+Pair $>$ \&}]{sorted\+WRanges }\end{DoxyParamCaption})}

This functions splits stroke with index \textquotesingle{}stroke\+Index\textquotesingle{} in n+1 strokes, where n is the size of vector sortedW, cutting it in points w specified in sortedW. SortedW must be sorted in ascending order. Resulting strokes are put in Vector\+Image in position stroke\+Index,stroke\+Index+1, ... stroke\+Index+n. Information on fill colors are maintened, as much as possible. 
\begin{DoxyCode}{0}
\DoxyCodeLine{01743                                                                            \{}
\DoxyCodeLine{01744   m\_imp-\/>splitStroke(strokeIndex, sortedWRanges);}
\DoxyCodeLine{01745 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a484c802b55b763ae00e5e44706055b09}\label{class_t_vector_image_a484c802b55b763ae00e5e44706055b09}} 
\index{TVectorImage@{TVectorImage}!transferStrokeColors@{transferStrokeColors}}
\index{transferStrokeColors@{transferStrokeColors}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{transferStrokeColors()}{transferStrokeColors()}}
{\footnotesize\ttfamily void TVector\+Image\+::transfer\+Stroke\+Colors (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}}}]{source\+Image,  }\item[{int}]{source\+Stroke,  }\item[{\mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}}}]{destination\+Image,  }\item[{int}]{destination\+Stroke }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Transfer the stroke style of the {\bfseries{source\+Stroke}} in the {\bfseries{source\+Image}} to the style 
\begin{DoxyCode}{0}
\DoxyCodeLine{01020                                                                \{}
\DoxyCodeLine{01021   std::list<TEdge *> *sourceList =}
\DoxyCodeLine{01022       \&(sourceImage-\/>m\_imp-\/>m\_strokes[sourceStroke]-\/>m\_edgeList);}
\DoxyCodeLine{01023   std::list<TEdge *> *destinationList =}
\DoxyCodeLine{01024       \&(destinationImage-\/>m\_imp-\/>m\_strokes[destinationStroke]-\/>m\_edgeList);}
\DoxyCodeLine{01025   transferColors(*sourceList, *destinationList, \textcolor{keyword}{true}, \textcolor{keyword}{false}, \textcolor{keyword}{false});}
\DoxyCodeLine{01026 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_af4ee3955add924a22b49197302597196}\label{class_t_vector_image_af4ee3955add924a22b49197302597196}} 
\index{TVectorImage@{TVectorImage}!transform@{transform}}
\index{transform@{transform}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{transform()}{transform()}}
{\footnotesize\ttfamily void TVector\+Image\+::transform (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_affine}{TAffine}} \&}]{aff,  }\item[{bool}]{do\+Change\+Thickness = {\ttfamily false} }\end{DoxyParamCaption})}



Transform a stroke using an affine {\bfseries{\mbox{\hyperlink{class_t_affine}{TAffine}}}}. 


\begin{DoxyCode}{0}
\DoxyCodeLine{03229                                                                        \{}
\DoxyCodeLine{03230   UINT i;}
\DoxyCodeLine{03231   \textcolor{keywordflow}{for} (i = 0; i < m\_imp-\/>m\_strokes.size(); ++i)}
\DoxyCodeLine{03232     m\_imp-\/>m\_strokes[i]-\/>m\_s-\/>transform(aff, doChangeThickness);}
\DoxyCodeLine{03233 }
\DoxyCodeLine{03234   map<int, VIStroke *>::iterator it =}
\DoxyCodeLine{03235       m\_imp-\/>m\_intersectionData-\/>m\_autocloseMap.begin();}
\DoxyCodeLine{03236   \textcolor{keywordflow}{for} (; it != m\_imp-\/>m\_intersectionData-\/>m\_autocloseMap.end(); ++it)}
\DoxyCodeLine{03237     it-\/>second-\/>m\_s-\/>transform(aff, \textcolor{keyword}{false});}
\DoxyCodeLine{03238 }
\DoxyCodeLine{03239   \textcolor{keywordflow}{for} (i = 0; i < m\_imp-\/>m\_regions.size(); ++i)}
\DoxyCodeLine{03240     invalidateRegionPropAndBBox(m\_imp-\/>m\_regions[i]);}
\DoxyCodeLine{03241 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_vector_image_a4b98d3d3d69758009fe833788bc53fc0}\label{class_t_vector_image_a4b98d3d3d69758009fe833788bc53fc0}} 
\index{TVectorImage@{TVectorImage}!ungroup@{ungroup}}
\index{ungroup@{ungroup}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{ungroup()}{ungroup()}}
{\footnotesize\ttfamily int TVector\+Image\+::ungroup (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})}



Ungroup all the strokes in the group of index {\bfseries{index}}. 

Return the number of ungroped stroke. 
\begin{DoxyCode}{0}
\DoxyCodeLine{02462                                        \{}
\DoxyCodeLine{02463   m\_imp-\/>m\_insideGroup = \mbox{\hyperlink{class_t_group_id}{TGroupId}}();}
\DoxyCodeLine{02464 }
\DoxyCodeLine{02465   assert(m\_imp-\/>m\_strokes[fromIndex]-\/>m\_groupId.isGrouped() != 0);}
\DoxyCodeLine{02466   std::vector<int> changedStrokes;}
\DoxyCodeLine{02467 }
\DoxyCodeLine{02468   \textcolor{keywordtype}{int} toIndex = fromIndex + 1;}
\DoxyCodeLine{02469 }
\DoxyCodeLine{02470   \textcolor{keywordflow}{while} (toIndex < (\textcolor{keywordtype}{int})m\_imp-\/>m\_strokes.size() \&\&}
\DoxyCodeLine{02471          m\_imp-\/>m\_strokes[fromIndex]-\/>m\_groupId.getCommonParentDepth(}
\DoxyCodeLine{02472              m\_imp-\/>m\_strokes[toIndex]-\/>m\_groupId) >= 1)}
\DoxyCodeLine{02473     toIndex++;}
\DoxyCodeLine{02474 }
\DoxyCodeLine{02475   toIndex-\/-\/;}
\DoxyCodeLine{02476 }
\DoxyCodeLine{02477   \mbox{\hyperlink{class_t_group_id}{TGroupId}} groupId;}
\DoxyCodeLine{02478 }
\DoxyCodeLine{02479   \textcolor{keywordflow}{if} (fromIndex > 0 \&\&}
\DoxyCodeLine{02480       m\_imp-\/>m\_strokes[fromIndex -\/ 1]-\/>m\_groupId.isGrouped(\textcolor{keyword}{true}) != 0)}
\DoxyCodeLine{02481     groupId = m\_imp-\/>m\_strokes[fromIndex -\/ 1]-\/>m\_groupId;}
\DoxyCodeLine{02482   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (toIndex < (\textcolor{keywordtype}{int})m\_imp-\/>m\_strokes.size() -\/ 1 \&\&}
\DoxyCodeLine{02483            m\_imp-\/>m\_strokes[toIndex + 1]-\/>m\_groupId.isGrouped(\textcolor{keyword}{true}) != 0)}
\DoxyCodeLine{02484     groupId = m\_imp-\/>m\_strokes[toIndex + 1]-\/>m\_groupId;}
\DoxyCodeLine{02485   \textcolor{keywordflow}{else}}
\DoxyCodeLine{02486     groupId = \mbox{\hyperlink{class_t_group_id}{TGroupId}}(\textcolor{keyword}{this}, \textcolor{keyword}{true});}
\DoxyCodeLine{02487 }
\DoxyCodeLine{02488   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = fromIndex;}
\DoxyCodeLine{02489        i <= toIndex || (i < (int)m\_imp-\/>m\_strokes.size() \&\&}
\DoxyCodeLine{02490                         m\_imp-\/>m\_strokes[i]-\/>m\_groupId.isGrouped(\textcolor{keyword}{true}) != 0);}
\DoxyCodeLine{02491        i++) \{}
\DoxyCodeLine{02492     m\_imp-\/>m\_strokes[i]-\/>m\_groupId.ungroup(groupId);}
\DoxyCodeLine{02493     changedStrokes.push\_back(i);}
\DoxyCodeLine{02494   \}}
\DoxyCodeLine{02495 }
\DoxyCodeLine{02496   \mbox{\hyperlink{class_t_vector_image_a033795f887a81bb5c43873901bcaf8d7}{notifyChangedStrokes}}(changedStrokes, std::vector<TStroke *>(), \textcolor{keyword}{false});}
\DoxyCodeLine{02497 }
\DoxyCodeLine{02498   \textcolor{keywordflow}{return} toIndex -\/ fromIndex + 1;}
\DoxyCodeLine{02499 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00898}{notify\+Changed\+Strokes()}}.

\mbox{\Hypertarget{class_t_vector_image_a025c88bdd434e110192d0b64a5f28ba9}\label{class_t_vector_image_a025c88bdd434e110192d0b64a5f28ba9}} 
\index{TVectorImage@{TVectorImage}!validateRegions@{validateRegions}}
\index{validateRegions@{validateRegions}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{validateRegions()}{validateRegions()}}
{\footnotesize\ttfamily void TVector\+Image\+::validate\+Regions (\begin{DoxyParamCaption}\item[{bool}]{state = {\ttfamily false} }\end{DoxyParamCaption})}

Set valid regions flags call \mbox{\hyperlink{class_t_vector_image_a025c88bdd434e110192d0b64a5f28ba9}{validate\+Regions()}} after region/stroke changes 
\begin{DoxyCode}{0}
\DoxyCodeLine{01579                                              \{}
\DoxyCodeLine{01580   m\_imp-\/>m\_areValidRegions = state;}
\DoxyCodeLine{01581 \}}

\end{DoxyCode}


\doxysubsection{Friends And Related Function Documentation}
\mbox{\Hypertarget{class_t_vector_image_a8e4b6d01f1eb55b6aab4f5758f46d631}\label{class_t_vector_image_a8e4b6d01f1eb55b6aab4f5758f46d631}} 
\index{TVectorImage@{TVectorImage}!Imp@{Imp}}
\index{Imp@{Imp}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{Imp()}{Imp()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_vector_image_1_1_imp}{Imp}} (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_vector_image}{TVector\+Image}} $\ast$}]{vi }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [related]}}

Permette di copiare effettuare delle copie delle curve

\mbox{\hyperlink{class_t_vector_image_1_1_imp}{TVector\+Image\+::\+Imp}}\+: implementation of \mbox{\hyperlink{class_t_vector_image}{TVector\+Image}} class 
\begin{DoxyCode}{0}
\DoxyCodeLine{00087     : m\_areValidRegions(\textcolor{keyword}{false})}
\DoxyCodeLine{00088     , m\_notIntersectingStrokes(\textcolor{keyword}{false})}
\DoxyCodeLine{00089     , m\_computeRegions(\textcolor{keyword}{true})}
\DoxyCodeLine{00090     , m\_autocloseTolerance(c\_newAutocloseTolerance)}
\DoxyCodeLine{00091     , m\_maxGroupId(1)}
\DoxyCodeLine{00092     , m\_maxGhostGroupId(1)}
\DoxyCodeLine{00093     , m\_mutex(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_thread_1_1_mutex}{TThread::Mutex}}())}
\DoxyCodeLine{00094     , m\_vi(vi)}
\DoxyCodeLine{00095     , m\_intersectionData(0)}
\DoxyCodeLine{00096     , m\_computedAlmostOnce(\textcolor{keyword}{false})}
\DoxyCodeLine{00097     , m\_justLoaded(\textcolor{keyword}{false})}
\DoxyCodeLine{00098     , m\_insideGroup(\mbox{\hyperlink{class_t_group_id}{TGroupId}}())}
\DoxyCodeLine{00099     , m\_minimizeEdges(\textcolor{keyword}{true})}
\DoxyCodeLine{00100 \textcolor{preprocessor}{\#ifdef NEW\_REGION\_FILL}}
\DoxyCodeLine{00101     , m\_regionFinder(0)}
\DoxyCodeLine{00102 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00103 \{}
\DoxyCodeLine{00104 \textcolor{preprocessor}{\#ifdef NEW\_REGION\_FILL}}
\DoxyCodeLine{00105   resetRegionFinder();}
\DoxyCodeLine{00106 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00107   initRegionsData();}
\DoxyCodeLine{00108 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_t_vector_image_a910e271d430158a1d14a40506dd351e0}\label{class_t_vector_image_a910e271d430158a1d14a40506dd351e0}} 
\index{TVectorImage@{TVectorImage}!m\_imp@{m\_imp}}
\index{m\_imp@{m\_imp}!TVectorImage@{TVectorImage}}
\doxysubsubsection{\texorpdfstring{m\_imp}{m\_imp}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{class_t_vector_image_1_1_imp}{Imp}}$>$ TVector\+Image\+::m\+\_\+imp}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/tvectorimage.\+h\item 
E\+:/opentoonz/toonz/sources/common/tvectorimage/tcomputeregions.\+cpp\item 
E\+:/opentoonz/toonz/sources/common/tvectorimage/tvectorimage.\+cpp\end{DoxyCompactItemize}
