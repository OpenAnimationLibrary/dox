\hypertarget{class_rectangle_primitive}{}\doxysection{Rectangle\+Primitive Class Reference}
\label{class_rectangle_primitive}\index{RectanglePrimitive@{RectanglePrimitive}}
Inheritance diagram for Rectangle\+Primitive\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_rectangle_primitive}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_rectangle_primitive_adaa8d52e9d558afac8c758eff7481e33}{Rectangle\+Primitive}} (\mbox{\hyperlink{class_primitive_param}{Primitive\+Param}} $\ast$param, \mbox{\hyperlink{class_geometric_tool}{Geometric\+Tool}} $\ast$tool, bool reaster\+Tool)
\item 
std\+::string \mbox{\hyperlink{class_rectangle_primitive_a97325b33a89435e04e8be278f85fdc8d}{get\+Name}} () const override
\item 
\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ \mbox{\hyperlink{class_rectangle_primitive_ac756cb3e01ffc5c5c10c35c0d7a803ce}{make\+Stroke}} () const override
\item 
void \mbox{\hyperlink{class_rectangle_primitive_afbf8bf543978b64cd434ff4d447629a6}{draw}} () override
\item 
void \mbox{\hyperlink{class_rectangle_primitive_a91f5281ce87c9d1ab9d48636f9b06981}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\item 
void \mbox{\hyperlink{class_rectangle_primitive_a34c043f1ab62498c21a55d3ee1cc5cdc}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&real\+Pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_rectangle_primitive_a857b02a4f0b85746b350d23c38a72905}{left\+Button\+Up}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\item 
void \mbox{\hyperlink{class_rectangle_primitive_a525f2038d3d7135aea7c8692839e482d}{mouse\+Move}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_rectangle_primitive_aa8956406664c01a2ed5a8e05d0c6e25a}{on\+Enter}} () override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_rectangle_primitive_adaa8d52e9d558afac8c758eff7481e33}\label{class_rectangle_primitive_adaa8d52e9d558afac8c758eff7481e33}} 
\index{RectanglePrimitive@{RectanglePrimitive}!RectanglePrimitive@{RectanglePrimitive}}
\index{RectanglePrimitive@{RectanglePrimitive}!RectanglePrimitive@{RectanglePrimitive}}
\doxysubsubsection{\texorpdfstring{RectanglePrimitive()}{RectanglePrimitive()}}
{\footnotesize\ttfamily Rectangle\+Primitive\+::\+Rectangle\+Primitive (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_primitive_param}{Primitive\+Param}} $\ast$}]{param,  }\item[{\mbox{\hyperlink{class_geometric_tool}{Geometric\+Tool}} $\ast$}]{tool,  }\item[{bool}]{reaster\+Tool }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00645       : \mbox{\hyperlink{class_primitive}{Primitive}}(param, tool, reasterTool) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_rectangle_primitive_afbf8bf543978b64cd434ff4d447629a6}\label{class_rectangle_primitive_afbf8bf543978b64cd434ff4d447629a6}} 
\index{RectanglePrimitive@{RectanglePrimitive}!draw@{draw}}
\index{draw@{draw}!RectanglePrimitive@{RectanglePrimitive}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Rectangle\+Primitive\+::draw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01613                               \{}
\DoxyCodeLine{01614   drawSnap();}
\DoxyCodeLine{01615   \textcolor{keywordflow}{if} (m\_isEditing || m\_isPrompting ||}
\DoxyCodeLine{01616       areAlmostEqual(m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, m\_selectingRect.x1) ||}
\DoxyCodeLine{01617       areAlmostEqual(m\_selectingRect.y0, m\_selectingRect.y1)) \{}
\DoxyCodeLine{01618     tglColor(m\_isEditing ? m\_color : TPixel32::Green);}
\DoxyCodeLine{01619     glBegin(GL\_LINE\_LOOP);}
\DoxyCodeLine{01620     tglVertex(m\_selectingRect.getP00());}
\DoxyCodeLine{01621     tglVertex(m\_selectingRect.getP01());}
\DoxyCodeLine{01622     tglVertex(m\_selectingRect.getP11());}
\DoxyCodeLine{01623     tglVertex(m\_selectingRect.getP10());}
\DoxyCodeLine{01624     glEnd();}
\DoxyCodeLine{01625   \}}
\DoxyCodeLine{01626 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_rectangle_primitive_a97325b33a89435e04e8be278f85fdc8d}\label{class_rectangle_primitive_a97325b33a89435e04e8be278f85fdc8d}} 
\index{RectanglePrimitive@{RectanglePrimitive}!getName@{getName}}
\index{getName@{getName}!RectanglePrimitive@{RectanglePrimitive}}
\doxysubsubsection{\texorpdfstring{getName()}{getName()}}
{\footnotesize\ttfamily std\+::string Rectangle\+Primitive\+::get\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00647                                      \{}
\DoxyCodeLine{00648     \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}Rectangle"{}};}
\DoxyCodeLine{00649   \}  \textcolor{comment}{// W\_ToolOptions\_ShapeRect"{}; \}}}

\end{DoxyCode}
\mbox{\Hypertarget{class_rectangle_primitive_a91f5281ce87c9d1ab9d48636f9b06981}\label{class_rectangle_primitive_a91f5281ce87c9d1ab9d48636f9b06981}} 
\index{RectanglePrimitive@{RectanglePrimitive}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!RectanglePrimitive@{RectanglePrimitive}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily void Rectangle\+Primitive\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01631                                                              \{}
\DoxyCodeLine{01632   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{01633   \textcolor{keywordflow}{if} (app-\/>getCurrentObject()-\/>isSpline()) \{}
\DoxyCodeLine{01634     m\_color     = TPixel32::Red;}
\DoxyCodeLine{01635     m\_isEditing = \textcolor{keyword}{true};}
\DoxyCodeLine{01636   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01637     \textcolor{comment}{// app-\/>getCurrentTool()-\/>getTool()-\/>touchImage();}}
\DoxyCodeLine{01638     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *style = app-\/>getCurrentLevelStyle();}
\DoxyCodeLine{01639     m\_isEditing              = style != 0 \&\& style-\/>\mbox{\hyperlink{class_t_color_style_ad30252c2cfc4e9d5d09b954d74b97b00}{isStrokeStyle}}();}
\DoxyCodeLine{01640     m\_color = (style) ? style-\/>\mbox{\hyperlink{class_t_color_style_af5907c6146db5067fcf000edeb8e403b}{getAverageColor}}() : TPixel32::Black;}
\DoxyCodeLine{01641   \}}
\DoxyCodeLine{01642 }
\DoxyCodeLine{01643   \textcolor{keywordflow}{if} (!m\_isEditing) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01644   \mbox{\hyperlink{class_t_point_t}{TPointD}} newPos = getSnap(pos);}
\DoxyCodeLine{01645   \textcolor{keywordflow}{if} (m\_param-\/>m\_pencil.getValue() \&\&}
\DoxyCodeLine{01646       (m\_param-\/>m\_targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{TTool::ToonzImage}} ||}
\DoxyCodeLine{01647        m\_param-\/>m\_targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a89c2e7968afae376f0be7abeff061859}{TTool::RasterImage}})) \{}
\DoxyCodeLine{01648     \textcolor{keywordflow}{if} (m\_param-\/>m\_rasterToolSize.getValue() \% 2 != 0)}
\DoxyCodeLine{01649       m\_startPoint = \mbox{\hyperlink{class_t_point_t}{TPointD}}((\textcolor{keywordtype}{int})pos.x, (\textcolor{keywordtype}{int})pos.y);}
\DoxyCodeLine{01650     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01651       m\_startPoint = \mbox{\hyperlink{class_t_point_t}{TPointD}}((\textcolor{keywordtype}{int})pos.x + 0.5, (\textcolor{keywordtype}{int})pos.y + 0.5);}
\DoxyCodeLine{01652   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01653     m\_startPoint = newPos;}
\DoxyCodeLine{01654   m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} = m\_startPoint.x;}
\DoxyCodeLine{01655   m\_selectingRect.y0 = m\_startPoint.y;}
\DoxyCodeLine{01656   m\_selectingRect.x1 = m\_startPoint.x;}
\DoxyCodeLine{01657   m\_selectingRect.y1 = m\_startPoint.y;}
\DoxyCodeLine{01658 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_rectangle_primitive_a34c043f1ab62498c21a55d3ee1cc5cdc}\label{class_rectangle_primitive_a34c043f1ab62498c21a55d3ee1cc5cdc}} 
\index{RectanglePrimitive@{RectanglePrimitive}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!RectanglePrimitive@{RectanglePrimitive}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Rectangle\+Primitive\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{real\+Pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01663                                                               \{}
\DoxyCodeLine{01664   \textcolor{keywordflow}{if} (!m\_isEditing) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01665 }
\DoxyCodeLine{01666   \mbox{\hyperlink{class_t_point_t}{TPointD}} pos;}
\DoxyCodeLine{01667   \textcolor{keywordflow}{if} (e.isShiftPressed()) \{}
\DoxyCodeLine{01668     \textcolor{keywordtype}{double} distance = tdistance(realPos, m\_startPoint) * M\_SQRT1\_2;}
\DoxyCodeLine{01669     pos.x           = (realPos.x > m\_startPoint.x) ? m\_startPoint.x + distance}
\DoxyCodeLine{01670                                                    : m\_startPoint.x -\/ distance;}
\DoxyCodeLine{01671     pos.y           = (realPos.y > m\_startPoint.y) ? m\_startPoint.y + distance}
\DoxyCodeLine{01672                                                    : m\_startPoint.y -\/ distance;}
\DoxyCodeLine{01673   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01674     pos = calculateSnap(realPos);}
\DoxyCodeLine{01675     pos = checkGuideSnapping(realPos);}
\DoxyCodeLine{01676   \}}
\DoxyCodeLine{01677 }
\DoxyCodeLine{01678   \textcolor{keywordflow}{if} (m\_param-\/>m\_pencil.getValue() \&\&}
\DoxyCodeLine{01679       (m\_param-\/>m\_targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{TTool::ToonzImage}} ||}
\DoxyCodeLine{01680        m\_param-\/>m\_targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a89c2e7968afae376f0be7abeff061859}{TTool::RasterImage}})) \{}
\DoxyCodeLine{01681     \textcolor{keywordflow}{if} (m\_param-\/>m\_rasterToolSize.getValue() \% 2 != 0)}
\DoxyCodeLine{01682       pos = \mbox{\hyperlink{class_t_point_t}{TPointD}}((\textcolor{keywordtype}{int})pos.x, (\textcolor{keywordtype}{int})pos.y);}
\DoxyCodeLine{01683     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01684       pos = \mbox{\hyperlink{class_t_point_t}{TPointD}}((\textcolor{keywordtype}{int})pos.x + 0.5, (\textcolor{keywordtype}{int})pos.y + 0.5);}
\DoxyCodeLine{01685   \}}
\DoxyCodeLine{01686 }
\DoxyCodeLine{01687   m\_selectingRect.x1 = pos.x;}
\DoxyCodeLine{01688   m\_selectingRect.y1 = pos.y;}
\DoxyCodeLine{01689   \textcolor{keywordflow}{if} (!e.isAltPressed()) \{}
\DoxyCodeLine{01690     m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} = m\_startPoint.x;}
\DoxyCodeLine{01691     m\_selectingRect.y0 = m\_startPoint.y;}
\DoxyCodeLine{01692   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01693     m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} = m\_startPoint.x + m\_startPoint.x -\/ pos.x;}
\DoxyCodeLine{01694     m\_selectingRect.y0 = m\_startPoint.y + m\_startPoint.y -\/ pos.y;}
\DoxyCodeLine{01695   \}}
\DoxyCodeLine{01696 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_rectangle_primitive_a857b02a4f0b85746b350d23c38a72905}\label{class_rectangle_primitive_a857b02a4f0b85746b350d23c38a72905}} 
\index{RectanglePrimitive@{RectanglePrimitive}!leftButtonUp@{leftButtonUp}}
\index{leftButtonUp@{leftButtonUp}!RectanglePrimitive@{RectanglePrimitive}}
\doxysubsubsection{\texorpdfstring{leftButtonUp()}{leftButtonUp()}}
{\footnotesize\ttfamily void Rectangle\+Primitive\+::left\+Button\+Up (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01764                                                                              \{}
\DoxyCodeLine{01765   \textcolor{keywordflow}{if} (!m\_isEditing) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01766   m\_isEditing = \textcolor{keyword}{false};}
\DoxyCodeLine{01767   m\_tool-\/>addStroke();}
\DoxyCodeLine{01768   resetSnap();}
\DoxyCodeLine{01769 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_rectangle_primitive_ac756cb3e01ffc5c5c10c35c0d7a803ce}\label{class_rectangle_primitive_ac756cb3e01ffc5c5c10c35c0d7a803ce}} 
\index{RectanglePrimitive@{RectanglePrimitive}!makeStroke@{makeStroke}}
\index{makeStroke@{makeStroke}!RectanglePrimitive@{RectanglePrimitive}}
\doxysubsubsection{\texorpdfstring{makeStroke()}{makeStroke()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ Rectangle\+Primitive\+::make\+Stroke (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01700                                               \{}
\DoxyCodeLine{01701   \textcolor{keywordflow}{if} (areAlmostEqual(m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, m\_selectingRect.x1) ||}
\DoxyCodeLine{01702       areAlmostEqual(m\_selectingRect.y0, m\_selectingRect.y1))}
\DoxyCodeLine{01703     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{01704 }
\DoxyCodeLine{01705   \mbox{\hyperlink{class_t_rect_t}{TRectD}} selArea;}
\DoxyCodeLine{01706   selArea.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} = std::min(m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, m\_selectingRect.x1);}
\DoxyCodeLine{01707   selArea.y0 = std::min(m\_selectingRect.y0, m\_selectingRect.y1);}
\DoxyCodeLine{01708   selArea.x1 = std::max(m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, m\_selectingRect.x1);}
\DoxyCodeLine{01709   selArea.y1 = std::max(m\_selectingRect.y0, m\_selectingRect.y1);}
\DoxyCodeLine{01710 }
\DoxyCodeLine{01711   \textcolor{keywordtype}{double} thick = getThickness();}
\DoxyCodeLine{01712 }
\DoxyCodeLine{01713   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = 0;}
\DoxyCodeLine{01714   \textcolor{keywordflow}{if} (m\_param-\/>m\_targetType \& TTool::Vectors) \{}
\DoxyCodeLine{01715     std::vector<TThickPoint> points(17);}
\DoxyCodeLine{01716 }
\DoxyCodeLine{01717     points[0] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(selArea.x1, selArea.y1, thick);}
\DoxyCodeLine{01718     points[1] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(selArea.x1, selArea.y1, thick) + \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/0.01, 0);}
\DoxyCodeLine{01719 }
\DoxyCodeLine{01720     points[3] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(selArea.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, selArea.y1, thick) + \mbox{\hyperlink{class_t_point_t}{TPointD}}(0.01, 0);}
\DoxyCodeLine{01721     points[4] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(selArea.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, selArea.y1, thick);}
\DoxyCodeLine{01722     points[5] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(selArea.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, selArea.y1, thick) + \mbox{\hyperlink{class_t_point_t}{TPointD}}(0, -\/0.01);}
\DoxyCodeLine{01723 }
\DoxyCodeLine{01724     points[7] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(selArea.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, selArea.y0, thick) + \mbox{\hyperlink{class_t_point_t}{TPointD}}(0, 0.01);}
\DoxyCodeLine{01725     points[8] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(selArea.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, selArea.y0, thick);}
\DoxyCodeLine{01726     points[9] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(selArea.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, selArea.y0, thick) + \mbox{\hyperlink{class_t_point_t}{TPointD}}(0.01, 0);}
\DoxyCodeLine{01727 }
\DoxyCodeLine{01728     points[11] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(selArea.x1, selArea.y0, thick) + \mbox{\hyperlink{class_t_point_t}{TPointD}}(-\/0.01, 0);}
\DoxyCodeLine{01729     points[12] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(selArea.x1, selArea.y0, thick);}
\DoxyCodeLine{01730     points[13] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(selArea.x1, selArea.y0, thick) + \mbox{\hyperlink{class_t_point_t}{TPointD}}(0, 0.01);}
\DoxyCodeLine{01731 }
\DoxyCodeLine{01732     points[15] = points[0] + \mbox{\hyperlink{class_t_point_t}{TPointD}}(0, -\/0.01);}
\DoxyCodeLine{01733     points[16] = points[0];}
\DoxyCodeLine{01734 }
\DoxyCodeLine{01735     points[2]  = 0.5 * (points[1] + points[3]);}
\DoxyCodeLine{01736     points[6]  = 0.5 * (points[5] + points[7]);}
\DoxyCodeLine{01737     points[10] = 0.5 * (points[9] + points[11]);}
\DoxyCodeLine{01738     points[14] = 0.5 * (points[13] + points[15]);}
\DoxyCodeLine{01739 }
\DoxyCodeLine{01740     stroke = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}(points);}
\DoxyCodeLine{01741   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_param-\/>m\_targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{TTool::ToonzImage}} ||}
\DoxyCodeLine{01742              m\_param-\/>m\_targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a89c2e7968afae376f0be7abeff061859}{TTool::RasterImage}}) \{}
\DoxyCodeLine{01743     std::vector<TThickPoint> points(9);}
\DoxyCodeLine{01744     \textcolor{keywordtype}{double} middleX = (selArea.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} + selArea.x1) * 0.5;}
\DoxyCodeLine{01745     \textcolor{keywordtype}{double} middleY = (selArea.y0 + selArea.y1) * 0.5;}
\DoxyCodeLine{01746 }
\DoxyCodeLine{01747     points[0] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(selArea.x1, selArea.y1, thick);}
\DoxyCodeLine{01748     points[1] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(middleX, selArea.y1, thick);}
\DoxyCodeLine{01749     points[2] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(selArea.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, selArea.y1, thick);}
\DoxyCodeLine{01750     points[3] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(selArea.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, middleY, thick);}
\DoxyCodeLine{01751     points[4] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(selArea.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, selArea.y0, thick);}
\DoxyCodeLine{01752     points[5] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(middleX, selArea.y0, thick);}
\DoxyCodeLine{01753     points[6] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(selArea.x1, selArea.y0, thick);}
\DoxyCodeLine{01754     points[7] = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(selArea.x1, middleY, thick);}
\DoxyCodeLine{01755     points[8] = points[0];}
\DoxyCodeLine{01756     stroke    = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}(points);}
\DoxyCodeLine{01757   \}}
\DoxyCodeLine{01758   stroke-\/>\mbox{\hyperlink{class_t_stroke_afa2c66ae11a70e68b3de3ce0b4cfb049}{setSelfLoop}}();}
\DoxyCodeLine{01759   \textcolor{keywordflow}{return} stroke;}
\DoxyCodeLine{01760 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_rectangle_primitive_a525f2038d3d7135aea7c8692839e482d}\label{class_rectangle_primitive_a525f2038d3d7135aea7c8692839e482d}} 
\index{RectanglePrimitive@{RectanglePrimitive}!mouseMove@{mouseMove}}
\index{mouseMove@{mouseMove}!RectanglePrimitive@{RectanglePrimitive}}
\doxysubsubsection{\texorpdfstring{mouseMove()}{mouseMove()}}
{\footnotesize\ttfamily void Rectangle\+Primitive\+::mouse\+Move (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01773                                                                            \{}
\DoxyCodeLine{01774   \mbox{\hyperlink{class_t_point_t}{TPointD}} newPos = calculateSnap(pos);}
\DoxyCodeLine{01775   newPos         = checkGuideSnapping(pos);}
\DoxyCodeLine{01776   m\_pos          = newPos;}
\DoxyCodeLine{01777   m\_tool-\/>\mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{01778 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_rectangle_primitive_aa8956406664c01a2ed5a8e05d0c6e25a}\label{class_rectangle_primitive_aa8956406664c01a2ed5a8e05d0c6e25a}} 
\index{RectanglePrimitive@{RectanglePrimitive}!onEnter@{onEnter}}
\index{onEnter@{onEnter}!RectanglePrimitive@{RectanglePrimitive}}
\doxysubsubsection{\texorpdfstring{onEnter()}{onEnter()}}
{\footnotesize\ttfamily void Rectangle\+Primitive\+::on\+Enter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01782                                  \{}
\DoxyCodeLine{01783   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{01784   \textcolor{keywordflow}{if} (!app) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01785 }
\DoxyCodeLine{01786   \textcolor{keywordflow}{if} (app-\/>getCurrentObject()-\/>isSpline())}
\DoxyCodeLine{01787     m\_color = TPixel32::Red;}
\DoxyCodeLine{01788   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01789     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *style = app-\/>getCurrentLevelStyle();}
\DoxyCodeLine{01790     \textcolor{keywordflow}{if} (style) m\_color = style-\/>\mbox{\hyperlink{class_t_color_style_af5907c6146db5067fcf000edeb8e403b}{getAverageColor}}();}
\DoxyCodeLine{01791   \}}
\DoxyCodeLine{01792 \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/geometrictool.\+cpp\end{DoxyCompactItemize}
