\hypertarget{class_t_image_combination_fx}{}\doxysection{TImage\+Combination\+Fx Class Reference}
\label{class_t_image_combination_fx}\index{TImageCombinationFx@{TImageCombinationFx}}
Inheritance diagram for TImage\+Combination\+Fx\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=12.000000cm]{class_t_image_combination_fx}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \mbox{\hyperlink{class_t_image_combination_fx_ab29e8e0e2d142fe97abf6f7e4e390cc4}{process}} (const \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \&up, const \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \&down, double frame)=0
\item 
virtual bool \mbox{\hyperlink{class_t_image_combination_fx_a38952ba142ec4e1200fc52f0079001d4}{requires\+Full\+Rect}} ()
\item 
int \mbox{\hyperlink{class_t_image_combination_fx_ad6ae1e296282f85b364031b7ef505cfa}{dynamic\+Port\+Groups\+Count}} () const override
\item 
const \mbox{\hyperlink{class_t_fx_port_dynamic_group}{TFx\+Port\+DG}} $\ast$ \mbox{\hyperlink{class_t_image_combination_fx_a7b7e8c266096a629a7136268d2c87c61}{dynamic\+Port\+Group}} (int g) const override
\item 
bool \mbox{\hyperlink{class_t_image_combination_fx_aceae62b939b7876b402862d6567c81cb}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\item 
int \mbox{\hyperlink{class_t_image_combination_fx_aea24345305011eb1a73a0314083119e6}{get\+Memory\+Requirement}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
bool \mbox{\hyperlink{class_t_image_combination_fx_a736ce2bf295162f3660d8bbc6bab2b52}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{class_t_image_combination_fx_a1402008b4b34379c20177ba5cbf359be}{do\+Dry\+Compute}} (\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{class_t_image_combination_fx_a0705fc13c99ad51764f0dcbfc7f9ef96}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{class_t_image_combination_fx_a146864cca228498c091b28527fc2ef07}{compatibility\+Translate\+Port}} (int major\+Version, int minor\+Version, std\+::string \&port\+Name) override
\item 
int \mbox{\hyperlink{class_t_image_combination_fx_a2721d730a210036bff980fb4fe7814b1}{get\+Preferred\+Input\+Port}} () override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_image_combination_fx_a2c2e9c21f1b238656df5f56a066df3f5}\label{class_t_image_combination_fx_a2c2e9c21f1b238656df5f56a066df3f5}} 
\index{TImageCombinationFx@{TImageCombinationFx}!TImageCombinationFx@{TImageCombinationFx}}
\index{TImageCombinationFx@{TImageCombinationFx}!TImageCombinationFx@{TImageCombinationFx}}
\doxysubsubsection{\texorpdfstring{TImageCombinationFx()}{TImageCombinationFx()}}
{\footnotesize\ttfamily TImage\+Combination\+Fx\+::\+TImage\+Combination\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00091                                          : m\_group(\textcolor{stringliteral}{"{}Source"{}}, 2) \{}
\DoxyCodeLine{00092   \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Source1"{}}, \textcolor{keyword}{new} \mbox{\hyperlink{class_t_raster_fx_port}{TRasterFxPort}}, 0);}
\DoxyCodeLine{00093   \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Source2"{}}, \textcolor{keyword}{new} \mbox{\hyperlink{class_t_raster_fx_port}{TRasterFxPort}}, 0);}
\DoxyCodeLine{00094   setName(L\textcolor{stringliteral}{"{}ImageCombinationFx"{}});}
\DoxyCodeLine{00095 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_combination_fx_a2c74a602026f2f0f59431eb945c4a897}\label{class_t_image_combination_fx_a2c74a602026f2f0f59431eb945c4a897}} 
\index{TImageCombinationFx@{TImageCombinationFx}!````~TImageCombinationFx@{$\sim$TImageCombinationFx}}
\index{````~TImageCombinationFx@{$\sim$TImageCombinationFx}!TImageCombinationFx@{TImageCombinationFx}}
\doxysubsubsection{\texorpdfstring{$\sim$TImageCombinationFx()}{~TImageCombinationFx()}}
{\footnotesize\ttfamily virtual TImage\+Combination\+Fx\+::$\sim$\+TImage\+Combination\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00038 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_image_combination_fx_aceae62b939b7876b402862d6567c81cb}\label{class_t_image_combination_fx_aceae62b939b7876b402862d6567c81cb}} 
\index{TImageCombinationFx@{TImageCombinationFx}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!TImageCombinationFx@{TImageCombinationFx}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool TImage\+Combination\+Fx\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00061                                                                      \{}
\DoxyCodeLine{00062     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00063   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_combination_fx_a146864cca228498c091b28527fc2ef07}\label{class_t_image_combination_fx_a146864cca228498c091b28527fc2ef07}} 
\index{TImageCombinationFx@{TImageCombinationFx}!compatibilityTranslatePort@{compatibilityTranslatePort}}
\index{compatibilityTranslatePort@{compatibilityTranslatePort}!TImageCombinationFx@{TImageCombinationFx}}
\doxysubsubsection{\texorpdfstring{compatibilityTranslatePort()}{compatibilityTranslatePort()}}
{\footnotesize\ttfamily void TImage\+Combination\+Fx\+::compatibility\+Translate\+Port (\begin{DoxyParamCaption}\item[{int}]{major\+Version,  }\item[{int}]{minor\+Version,  }\item[{std\+::string \&}]{port\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Compatibility function -\/ used to translate a port name from older Toonz versions into its current form. 

Reimplemented from \mbox{\hyperlink{class_t_fx_ae810347dd45065522c3d772a75db42a7}{TFx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00241                                                                           \{}
\DoxyCodeLine{00242   \textcolor{keywordflow}{if} (VersionNumber(major, minor) < VersionNumber(1, 20)) \{}
\DoxyCodeLine{00243     \textcolor{keywordflow}{if} (portName == \textcolor{stringliteral}{"{}Up"{}})}
\DoxyCodeLine{00244       portName = \textcolor{stringliteral}{"{}Source1"{}};}
\DoxyCodeLine{00245     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (portName == \textcolor{stringliteral}{"{}Down"{}})}
\DoxyCodeLine{00246       portName = \textcolor{stringliteral}{"{}Source2"{}};}
\DoxyCodeLine{00247   \}}
\DoxyCodeLine{00248 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_combination_fx_a0705fc13c99ad51764f0dcbfc7f9ef96}\label{class_t_image_combination_fx_a0705fc13c99ad51764f0dcbfc7f9ef96}} 
\index{TImageCombinationFx@{TImageCombinationFx}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!TImageCombinationFx@{TImageCombinationFx}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void TImage\+Combination\+Fx\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00121                                                                  \{}
\DoxyCodeLine{00122   \textcolor{keywordtype}{int} p, pCount = getInputPortCount();}
\DoxyCodeLine{00123   \mbox{\hyperlink{class_t_raster_fx_port}{TRasterFxPort}} *port = 0;}
\DoxyCodeLine{00124 }
\DoxyCodeLine{00125   \textcolor{comment}{// Skip empty ports}}
\DoxyCodeLine{00126   \textcolor{keywordflow}{for} (p = pCount -\/ 1; p >= 0;}
\DoxyCodeLine{00127        -\/-\/p)  \textcolor{comment}{// Reverse iteration -\/ bottom ports have high indices}}
\DoxyCodeLine{00128   \{}
\DoxyCodeLine{00129     port = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_t_raster_fx_port}{TRasterFxPort}} *\textcolor{keyword}{>}(getInputPort(p));}
\DoxyCodeLine{00130     \textcolor{keywordflow}{if} (port \&\& port-\/>getFx()) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00131   \}}
\DoxyCodeLine{00132 }
\DoxyCodeLine{00133   \textcolor{comment}{// If there is no input, clear and return}}
\DoxyCodeLine{00134   \textcolor{keywordflow}{if} (p < 0) \{}
\DoxyCodeLine{00135     tile.getRaster()}
\DoxyCodeLine{00136         -\/>clear();  \textcolor{comment}{// Probably not necessary unless externally invocation}}
\DoxyCodeLine{00137     \textcolor{keywordflow}{return};  \textcolor{comment}{// deliberately soiled tile -\/ however, should be rare anyway.}}
\DoxyCodeLine{00138   \}}
\DoxyCodeLine{00139 }
\DoxyCodeLine{00140   \textcolor{comment}{// Calculate the tiles' geometries}}
\DoxyCodeLine{00141   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_rect_t}{TRect}} \&tileRect(tile.getRaster()-\/>getBounds());}
\DoxyCodeLine{00142   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \&tileSize(tileRect.getSize());}
\DoxyCodeLine{00143   \mbox{\hyperlink{class_t_rect_t}{TRectD}} tileRectD(tile.m\_pos, \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}}(tileSize.lx, tileSize.ly));}
\DoxyCodeLine{00144 }
\DoxyCodeLine{00145   \textcolor{comment}{// Render the first viable port directly on tile}}
\DoxyCodeLine{00146   (*port)-\/>compute(tile, frame,}
\DoxyCodeLine{00147                    info);  \textcolor{comment}{// Should we do it only if the bbox is not empty?}}
\DoxyCodeLine{00148 }
\DoxyCodeLine{00149   \textcolor{comment}{// Then, render each subsequent port and process() it on top of tile}}
\DoxyCodeLine{00150   \textcolor{keywordtype}{bool} canRestrict = !\mbox{\hyperlink{class_t_image_combination_fx_a38952ba142ec4e1200fc52f0079001d4}{requiresFullRect}}();}
\DoxyCodeLine{00151 }
\DoxyCodeLine{00152   \textcolor{keywordflow}{for} (-\/-\/p; p >= 0; -\/-\/p) \{}
\DoxyCodeLine{00153     port = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_t_raster_fx_port}{TRasterFxPort}} *\textcolor{keyword}{>}(getInputPort(p));}
\DoxyCodeLine{00154     \textcolor{keywordflow}{if} (!(port \&\& port-\/>getFx()))  \textcolor{comment}{// Skip empty ports}}
\DoxyCodeLine{00155       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00156 }
\DoxyCodeLine{00157     \textcolor{comment}{// Will allocate a new tile to calculate the input contribution -\/ so, if}}
\DoxyCodeLine{00158     \textcolor{comment}{// possible}}
\DoxyCodeLine{00159     \textcolor{comment}{// we'll restrict allocation to the input port's bbox}}
\DoxyCodeLine{00160     \mbox{\hyperlink{class_t_rect_t}{TRectD}} computeRect(tileRectD);}
\DoxyCodeLine{00161 }
\DoxyCodeLine{00162     \textcolor{keywordflow}{if} (canRestrict) \{}
\DoxyCodeLine{00163       \mbox{\hyperlink{class_t_rect_t}{TRectD}} inBBox;}
\DoxyCodeLine{00164       (*port)-\/>getBBox(frame, inBBox, info);}
\DoxyCodeLine{00165 }
\DoxyCodeLine{00166       computeRect *= inBBox;}
\DoxyCodeLine{00167 }
\DoxyCodeLine{00168       makeRectCoherent(}
\DoxyCodeLine{00169           computeRect,}
\DoxyCodeLine{00170           tile.m\_pos);  \textcolor{comment}{// Make it coherent with tile's pixel geometry}}
\DoxyCodeLine{00171     \}}
\DoxyCodeLine{00172 }
\DoxyCodeLine{00173     \textcolor{comment}{// Calculate the input port and perform processing}}
\DoxyCodeLine{00174     \mbox{\hyperlink{class_t_dimension_t}{TDimension}} computeSize(tround(computeRect.getLx()),}
\DoxyCodeLine{00175                            tround(computeRect.getLy()));}
\DoxyCodeLine{00176     \textcolor{keywordflow}{if} ((computeSize.lx > 0) \&\& (computeSize.ly > 0)) \{}
\DoxyCodeLine{00177       \mbox{\hyperlink{class_t_tile}{TTile}} inTile;  \textcolor{comment}{// Observe its locality -\/ not incidental}}
\DoxyCodeLine{00178       (*port)-\/>allocateAndCompute(inTile, computeRect.getP00(), computeSize,}
\DoxyCodeLine{00179                                   tile.getRaster(), frame, info);}
\DoxyCodeLine{00180 }
\DoxyCodeLine{00181       \textcolor{comment}{// Invoke process() to deal with the actual fx processing}}
\DoxyCodeLine{00182       \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} up(inTile.getRaster()), down(tile.getRaster());}
\DoxyCodeLine{00183 }
\DoxyCodeLine{00184       \textcolor{keywordflow}{if} (canRestrict) \{}
\DoxyCodeLine{00185         \textcolor{comment}{// Extract from tile the part corresponding to inTile}}
\DoxyCodeLine{00186         \mbox{\hyperlink{class_t_rect_t}{TRect}} downRect(convert(computeRect.getP00() -\/ tile.m\_pos), computeSize);}
\DoxyCodeLine{00187         down = down-\/>extract(downRect);}
\DoxyCodeLine{00188       \}}
\DoxyCodeLine{00189 }
\DoxyCodeLine{00190       assert(up-\/>getSize() == down-\/>getSize());}
\DoxyCodeLine{00191       \mbox{\hyperlink{class_t_image_combination_fx_ab29e8e0e2d142fe97abf6f7e4e390cc4}{process}}(up, down, frame);  \textcolor{comment}{// This is the point with the max concentration}}
\DoxyCodeLine{00192                                  \textcolor{comment}{// of allocated resources}}
\DoxyCodeLine{00193     \}}
\DoxyCodeLine{00194   \}}
\DoxyCodeLine{00195 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_combination_fx_a1402008b4b34379c20177ba5cbf359be}\label{class_t_image_combination_fx_a1402008b4b34379c20177ba5cbf359be}} 
\index{TImageCombinationFx@{TImageCombinationFx}!doDryCompute@{doDryCompute}}
\index{doDryCompute@{doDryCompute}!TImageCombinationFx@{TImageCombinationFx}}
\doxysubsubsection{\texorpdfstring{doDryCompute()}{doDryCompute()}}
{\footnotesize\ttfamily void TImage\+Combination\+Fx\+::do\+Dry\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Declares the computation scheme of this fx for rendering optimization purposes. This is an important function of the Toonz rendering API, and should be reimplemented with the necessary care. The Toonz rendering process makes use of this function to enact most of the optimization steps about the fx computation, in particular fx caching. A correct implementation of this method should follow these rules\+:  The invocation of child node computations should be faithfully reproduced.  TRaster\+Fx\+::compute and TRaster\+Fx\+::allocate\+And\+Compute calls have to be translated to TRaster\+Fx\+::dry\+Compute calls.  This fx is intended for precomputation stage, so the hard rendering code should be skipped here. By default, this method raises a dry\+Compute call to each input port in increasing order, using the TRaster\+Fx\+::transform method to identify the tiles to be passed on input precomputation. 

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_a47ec31d2d4c3a066cd6744fb8c80edf2}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00200                                                                     \{}
\DoxyCodeLine{00201   \textcolor{comment}{// Mere copy of doCompute(), stripped of the actual computations}}
\DoxyCodeLine{00202 }
\DoxyCodeLine{00203   \textcolor{keywordtype}{int} p, pCount = getInputPortCount();}
\DoxyCodeLine{00204   \mbox{\hyperlink{class_t_raster_fx_port}{TRasterFxPort}} *port = 0;}
\DoxyCodeLine{00205 }
\DoxyCodeLine{00206   \textcolor{keywordflow}{for} (p = pCount -\/ 1; p >= 0; -\/-\/p) \{}
\DoxyCodeLine{00207     port = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_t_raster_fx_port}{TRasterFxPort}} *\textcolor{keyword}{>}(getInputPort(p));}
\DoxyCodeLine{00208     \textcolor{keywordflow}{if} (port \&\& port-\/>getFx()) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00209   \}}
\DoxyCodeLine{00210 }
\DoxyCodeLine{00211   \textcolor{keywordflow}{if} (p < 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00212 }
\DoxyCodeLine{00213   (*port)-\/>dryCompute(rect, frame, info);}
\DoxyCodeLine{00214 }
\DoxyCodeLine{00215   \textcolor{keywordtype}{bool} canRestrict = !\mbox{\hyperlink{class_t_image_combination_fx_a38952ba142ec4e1200fc52f0079001d4}{requiresFullRect}}();}
\DoxyCodeLine{00216 }
\DoxyCodeLine{00217   \textcolor{keywordflow}{for} (-\/-\/p; p >= 0; -\/-\/p) \{}
\DoxyCodeLine{00218     port = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_t_raster_fx_port}{TRasterFxPort}} *\textcolor{keyword}{>}(getInputPort(p));}
\DoxyCodeLine{00219     \textcolor{keywordflow}{if} (!(port \&\& port-\/>getFx())) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00220 }
\DoxyCodeLine{00221     \mbox{\hyperlink{class_t_rect_t}{TRectD}} computeRect(rect);}
\DoxyCodeLine{00222 }
\DoxyCodeLine{00223     \textcolor{keywordflow}{if} (canRestrict) \{}
\DoxyCodeLine{00224       \mbox{\hyperlink{class_t_rect_t}{TRectD}} inBBox;}
\DoxyCodeLine{00225       (*port)-\/>getBBox(frame, inBBox, info);}
\DoxyCodeLine{00226 }
\DoxyCodeLine{00227       computeRect *= inBBox;}
\DoxyCodeLine{00228       makeRectCoherent(computeRect, rect.getP00());}
\DoxyCodeLine{00229     \}}
\DoxyCodeLine{00230 }
\DoxyCodeLine{00231     \mbox{\hyperlink{class_t_dimension_t}{TDimension}} computeSize(tround(computeRect.getLx()),}
\DoxyCodeLine{00232                            tround(computeRect.getLy()));}
\DoxyCodeLine{00233     \textcolor{keywordflow}{if} ((computeSize.lx > 0) \&\& (computeSize.ly > 0))}
\DoxyCodeLine{00234       (*port)-\/>dryCompute(computeRect, frame, info);}
\DoxyCodeLine{00235   \}}
\DoxyCodeLine{00236 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00051}{requires\+Full\+Rect()}}.

\mbox{\Hypertarget{class_t_image_combination_fx_a736ce2bf295162f3660d8bbc6bab2b52}\label{class_t_image_combination_fx_a736ce2bf295162f3660d8bbc6bab2b52}} 
\index{TImageCombinationFx@{TImageCombinationFx}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!TImageCombinationFx@{TImageCombinationFx}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool TImage\+Combination\+Fx\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00100                                                                  \{}
\DoxyCodeLine{00101   bBox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00102 }
\DoxyCodeLine{00103   \textcolor{keywordtype}{int} p, pCount = getInputPortCount();}
\DoxyCodeLine{00104   \textcolor{keywordflow}{for} (p = 0; p != pCount; ++p) \{}
\DoxyCodeLine{00105     \mbox{\hyperlink{class_t_raster_fx_port}{TRasterFxPort}} *port = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_t_raster_fx_port}{TRasterFxPort}} *\textcolor{keyword}{>}(getInputPort(p));}
\DoxyCodeLine{00106     \mbox{\hyperlink{class_t_rect_t}{TRectD}} inputBBox;}
\DoxyCodeLine{00107 }
\DoxyCodeLine{00108     \textcolor{keywordtype}{bool} hasInput = (port \&\& port-\/>isConnected())}
\DoxyCodeLine{00109                         ? (*port)-\/>doGetBBox(frame, inputBBox, info)}
\DoxyCodeLine{00110                         : \textcolor{keyword}{false};}
\DoxyCodeLine{00111 }
\DoxyCodeLine{00112     \textcolor{keywordflow}{if} (hasInput) bBox += inputBBox;}
\DoxyCodeLine{00113   \}}
\DoxyCodeLine{00114 }
\DoxyCodeLine{00115   \textcolor{keywordflow}{return} (bBox.getLx() >= 0) \&\& (bBox.getLy() >= 0);}
\DoxyCodeLine{00116 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_combination_fx_a7b7e8c266096a629a7136268d2c87c61}\label{class_t_image_combination_fx_a7b7e8c266096a629a7136268d2c87c61}} 
\index{TImageCombinationFx@{TImageCombinationFx}!dynamicPortGroup@{dynamicPortGroup}}
\index{dynamicPortGroup@{dynamicPortGroup}!TImageCombinationFx@{TImageCombinationFx}}
\doxysubsubsection{\texorpdfstring{dynamicPortGroup()}{dynamicPortGroup()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_fx_port_dynamic_group}{TFx\+Port\+DG}} $\ast$ TImage\+Combination\+Fx\+::dynamic\+Port\+Group (\begin{DoxyParamCaption}\item[{int}]{g }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_fx}{TFx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00057                                                           \{}
\DoxyCodeLine{00058     \textcolor{keywordflow}{return} (g == 0) ? \&m\_group : 0;}
\DoxyCodeLine{00059   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_combination_fx_ad6ae1e296282f85b364031b7ef505cfa}\label{class_t_image_combination_fx_ad6ae1e296282f85b364031b7ef505cfa}} 
\index{TImageCombinationFx@{TImageCombinationFx}!dynamicPortGroupsCount@{dynamicPortGroupsCount}}
\index{dynamicPortGroupsCount@{dynamicPortGroupsCount}!TImageCombinationFx@{TImageCombinationFx}}
\doxysubsubsection{\texorpdfstring{dynamicPortGroupsCount()}{dynamicPortGroupsCount()}}
{\footnotesize\ttfamily int TImage\+Combination\+Fx\+::dynamic\+Port\+Groups\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_fx}{TFx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00056 \{ \textcolor{keywordflow}{return} 1; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_combination_fx_aea24345305011eb1a73a0314083119e6}\label{class_t_image_combination_fx_aea24345305011eb1a73a0314083119e6}} 
\index{TImageCombinationFx@{TImageCombinationFx}!getMemoryRequirement@{getMemoryRequirement}}
\index{getMemoryRequirement@{getMemoryRequirement}!TImageCombinationFx@{TImageCombinationFx}}
\doxysubsubsection{\texorpdfstring{getMemoryRequirement()}{getMemoryRequirement()}}
{\footnotesize\ttfamily int TImage\+Combination\+Fx\+::get\+Memory\+Requirement (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Specifies the approximate size (in Mega\+Bytes) of the maximum allocation instance that this fx will need to perform in order to render the passed input. This method should be reimplemented in order to make the Toonz rendering process aware of the use of big raster memory chunks, at least. Observe that the passed tile geometry is implicitly {\itshape  already allocated \texorpdfstring{$<$}{<}\textbackslash{}i\texorpdfstring{$>$}{>} for the fx output. ~\newline
The default implementation returns 0, assuming that the passed implicit memory size is passed below in node computation without further allocation of resources. Fxs can reimplement this to -\/1 to explicitly disable the Toonz\textquotesingle{}s smart memory handling. ~\newline
 ~\newline
\begin{DoxyNote}{Note}
The rendering process ensures that the passed render settings are {\itshape handled} by the fx before this function is invoked -\/ do not waste code for it. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRaster\+Fx\+::memory\+Size}} and TRaster\+Fx\+::can\+Handle methods. 
\end{DoxySeeAlso}
}

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_af8eb991c9756f4fb2e48d9f96cbacfba}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00066                                                                  \{}
\DoxyCodeLine{00067     \textcolor{comment}{// At max the memory of another tile with the same infos may be allocated}}
\DoxyCodeLine{00068     \textcolor{comment}{// apart from}}
\DoxyCodeLine{00069     \textcolor{comment}{// the externally supplied one.}}
\DoxyCodeLine{00070     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRasterFx::memorySize}}(rect, info.m\_bpp);}
\DoxyCodeLine{00071   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00560}{TRaster\+Fx\+::memory\+Size()}}.

\mbox{\Hypertarget{class_t_image_combination_fx_a2721d730a210036bff980fb4fe7814b1}\label{class_t_image_combination_fx_a2721d730a210036bff980fb4fe7814b1}} 
\index{TImageCombinationFx@{TImageCombinationFx}!getPreferredInputPort@{getPreferredInputPort}}
\index{getPreferredInputPort@{getPreferredInputPort}!TImageCombinationFx@{TImageCombinationFx}}
\doxysubsubsection{\texorpdfstring{getPreferredInputPort()}{getPreferredInputPort()}}
{\footnotesize\ttfamily int TImage\+Combination\+Fx\+::get\+Preferred\+Input\+Port (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_fx}{TFx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00084 \{ \textcolor{keywordflow}{return} 1; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_image_combination_fx_ab29e8e0e2d142fe97abf6f7e4e390cc4}\label{class_t_image_combination_fx_ab29e8e0e2d142fe97abf6f7e4e390cc4}} 
\index{TImageCombinationFx@{TImageCombinationFx}!process@{process}}
\index{process@{process}!TImageCombinationFx@{TImageCombinationFx}}
\doxysubsubsection{\texorpdfstring{process()}{process()}}
{\footnotesize\ttfamily virtual void TImage\+Combination\+Fx\+::process (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \&}]{up,  }\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} \&}]{down,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}

The raster processing function that must be reimplemented to perform the fx 

Implemented in \mbox{\hyperlink{class_over_fx_a7319c23902ac24ff92c4880f14f07786}{Over\+Fx}}, \mbox{\hyperlink{class_add_fx_a05fb1f9352dfc4ac67004eac31b8fa30}{Add\+Fx}}, \mbox{\hyperlink{class_color_dodge_fx_a1d404a9954ad9c43bdd3d43909d10a50}{Color\+Dodge\+Fx}}, \mbox{\hyperlink{class_color_burn_fx_a66064fcb17b695f09a2a4e7f72ae6141}{Color\+Burn\+Fx}}, \mbox{\hyperlink{class_screen_fx_a97674034a2b171e5a2f043288d8b2164}{Screen\+Fx}}, \mbox{\hyperlink{class_sub_fx_aef2766450868c7c78ad84261bb304c82}{Sub\+Fx}}, \mbox{\hyperlink{class_mult_fx_a77a5657e75d9da00525e64b872684cb4}{Mult\+Fx}}, \mbox{\hyperlink{class_min_fx_a8622e27ab6f916d74c001793d264a7db}{Min\+Fx}}, \mbox{\hyperlink{class_max_fx_a4e64039f4e349ce370aebb0062bf03bf}{Max\+Fx}}, \mbox{\hyperlink{class_linear_burn_fx_ab4ff42a67ccaff285b5cc6b2bb65101f}{Linear\+Burn\+Fx}}, \mbox{\hyperlink{class_overlay_fx_aa438513a8f78600b8d2229854c26dccf}{Overlay\+Fx}}, and \mbox{\hyperlink{class_blend_fx_a2d609f958b9defbc3c7361bf91ecb505}{Blend\+Fx}}.

\mbox{\Hypertarget{class_t_image_combination_fx_a38952ba142ec4e1200fc52f0079001d4}\label{class_t_image_combination_fx_a38952ba142ec4e1200fc52f0079001d4}} 
\index{TImageCombinationFx@{TImageCombinationFx}!requiresFullRect@{requiresFullRect}}
\index{requiresFullRect@{requiresFullRect}!TImageCombinationFx@{TImageCombinationFx}}
\doxysubsubsection{\texorpdfstring{requiresFullRect()}{requiresFullRect()}}
{\footnotesize\ttfamily virtual bool TImage\+Combination\+Fx\+::requires\+Full\+Rect (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

Whether the \textquotesingle{}up\textquotesingle{} rasters of \mbox{\hyperlink{class_t_image_combination_fx_ab29e8e0e2d142fe97abf6f7e4e390cc4}{process()}} invocations must be allocated to entirely cover the \textquotesingle{}down\textquotesingle{} counterpart. Should be enabled if the \mbox{\hyperlink{class_t_image_combination_fx_ab29e8e0e2d142fe97abf6f7e4e390cc4}{process()}} function affects \textquotesingle{}down\textquotesingle{} pixels when the \textquotesingle{}up\textquotesingle{}s are fully transparent. 

Reimplemented in \mbox{\hyperlink{class_screen_fx_a7938ff268c62ebf6ad916ea4dd0ff851}{Screen\+Fx}}, \mbox{\hyperlink{class_mult_fx_abfe73444b20cf396422bd26cd192e02d}{Mult\+Fx}}, \mbox{\hyperlink{class_min_fx_a1343ad0e9ec0a8a641fa9c886fda2d49}{Min\+Fx}}, and \mbox{\hyperlink{class_blend_fx_a7e1ea61f821cfb228d2ce0be9f18b6a3}{Blend\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00051 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00199}{do\+Dry\+Compute()}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/common/tfx/binary\+Fx.\+cpp\end{DoxyCompactItemize}
