\hypertarget{class_t_tool}{}\doxysection{TTool Class Reference}
\label{class_t_tool}\index{TTool@{TTool}}


\mbox{\hyperlink{class_t_tool}{TTool}} is the abstract base class defining the interface for Toonz tools -\/ the ones accessible from the \mbox{\hyperlink{class_toolbar}{Toolbar}} panel that users can activate to edit the scene contents interactively.  




{\ttfamily \#include $<$tool.\+h$>$}

Inheritance diagram for TTool\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=12.000000cm]{class_t_tool}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_t_tool_1_1_cell_ops}{Cell\+Ops}}
\item 
class \mbox{\hyperlink{class_t_tool_1_1_viewer}{Viewer}}
\begin{DoxyCompactList}\small\item\em The \mbox{\hyperlink{class_t_tool_1_1_viewer}{TTool\+::\+Viewer}} class is the abstract base class that provides an interface for \mbox{\hyperlink{class_t_tool}{TTool}} viewer widgets (it is required that such widgets support Open\+GL). \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} \{ \newline
\mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296caa8f6293eab5817f82f74f031c0724f28}{Generic\+Tool}} = 1
, \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296cab1cf4660322ca2d4e5a4848bdbc049a9}{Column\+Tool}} = 2
, \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca18d911ba387409847ad5ae6a731031f8}{Level\+Read\+Tool}} = 4
, \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca01ffd66b00b05a88c02ce8ceb5da3b8b}{Level\+Write\+Tool}}
, \newline
{\bfseries Level\+Tool} = Level\+Read\+Tool $\vert$ Level\+Write\+Tool
 \}
\begin{DoxyCompactList}\small\item\em Tool editing type. \end{DoxyCompactList}\item 
enum \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4}{Tool\+Target\+Type}} \{ \newline
{\bfseries No\+Target} = 0x0
, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a6528d353c20fcbe8932de09845117046}{Vector\+Image}} = 0x1
, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{Toonz\+Image}} = 0x2
, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a89c2e7968afae376f0be7abeff061859}{Raster\+Image}} = 0x4
, \newline
\mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c7eda2f062c0790a4ac7dc4acfc7232}{Mesh\+Image}} = 0x8
, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a71d3697cafb025fea3effa714e397980}{Splines}} = 0x10
, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4aa6443a8b4b8f50c7415bee045a27a309}{Level\+Columns}} = 0x20
, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a269e5d6d3f79dd14ab7aa2e3192eeaf1}{Mesh\+Columns}} = 0x40
, \newline
\mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c576a0d6f800899d7be1cfaceef4d12}{Empty\+Target}} = 0x80
, {\bfseries Common\+Images} = Vector\+Image $\vert$ Toonz\+Image $\vert$ Raster\+Image
, {\bfseries All\+Images} = Common\+Images $\vert$ Mesh\+Image
, {\bfseries Vectors} = Vector\+Image $\vert$ Splines
, \newline
{\bfseries Common\+Levels} = Common\+Images $\vert$ Level\+Columns
, {\bfseries Mesh\+Levels} = Mesh\+Image $\vert$ Mesh\+Columns
, {\bfseries All\+Targets} = 0xffffffff
 \}
\begin{DoxyCompactList}\small\item\em Object types the tool can operate on. \end{DoxyCompactList}\item 
typedef \mbox{\hyperlink{class_t_application}{TApplication}} \mbox{\hyperlink{class_t_tool_a8e915653734dd6faf23e9996eec67ebe}{Application}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_tool_a9c63ec35f606e755d0d036bf4fed62ab}{TTool}} (std\+::string tool\+Name)
\begin{DoxyCompactList}\small\item\em every tool (invoking update\+Translation() for each). \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_t_tool_a5c38f583d784d12a9f8c04b162cadea2}\label{class_t_tool_a5c38f583d784d12a9f8c04b162cadea2}} 
virtual \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} {\bfseries get\+Tool\+Type} () const =0
\item 
\mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4}{Tool\+Target\+Type}} \mbox{\hyperlink{class_t_tool_af8760a85b8fa1d81a04f058b8d4396b0}{get\+Target\+Type}} () const
\item 
std\+::string \mbox{\hyperlink{class_t_tool_a679eddd99e9cb717d1b36eea5d7e7bb1}{get\+Name}} () const
\item 
virtual \mbox{\hyperlink{class_tool_options_box}{Tool\+Options\+Box}} $\ast$ \mbox{\hyperlink{class_t_tool_a9e09495b50142df6b7bb9682837263c4}{create\+Options\+Box}} ()
\item 
void \mbox{\hyperlink{class_t_tool_a929998a1d2773ebbb5982283e870a26c}{set\+Viewer}} (\mbox{\hyperlink{class_t_tool_1_1_viewer}{Viewer}} $\ast$viewer)
\item 
\mbox{\hyperlink{class_t_tool_1_1_viewer}{Viewer}} $\ast$ \mbox{\hyperlink{class_t_tool_ad7edbb0cd6c20c371965510fa8d0811f}{get\+Viewer}} () const
\item 
double \mbox{\hyperlink{class_t_tool_a1f5ac0f1e3809fce027e10028a3063a7}{get\+Pixel\+Size}} () const
\item 
void \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect=\mbox{\hyperlink{class_t_rect_t}{TRectD}}())
\item 
int \mbox{\hyperlink{class_t_tool_ab04ed46786cf65fe4564d26ffa5d49c8}{pick}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&p)
\item 
bool \mbox{\hyperlink{class_t_tool_a9b6e629deb25a2c0903d3d82a5f5599c}{is\+Picking}} () const
\item 
virtual void \mbox{\hyperlink{class_t_tool_a902a844478056fa8ace11d75b05fb6a5}{update\+Translation}} ()
\item 
virtual bool \mbox{\hyperlink{class_t_tool_a11d2c27110689caf7fa6f49519808073}{pre\+Left\+Button\+Down}} ()
\item 
virtual void \mbox{\hyperlink{class_t_tool_acb0d5ee41c28fe1f6c3719a1c12353b5}{mouse\+Move}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&)
\item 
virtual void \mbox{\hyperlink{class_t_tool_a12190be0dcb28718b40ae42c93df381b}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&)
\item 
virtual void \mbox{\hyperlink{class_t_tool_a0b3e51fe9fdadc716847b0248f74a4b5}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&)
\item 
virtual void \mbox{\hyperlink{class_t_tool_a740506b9414c8364aaa47de259ecb16b}{left\+Button\+Up}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&)
\item 
virtual void \mbox{\hyperlink{class_t_tool_adb34d1b5a012f8910c7f62aa291d2d46}{left\+Button\+Double\+Click}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&)
\item 
virtual void \mbox{\hyperlink{class_t_tool_ab096789c990785636e8694020344636c}{right\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&)
\item 
virtual bool \mbox{\hyperlink{class_t_tool_a3f577edff4e26b67cfdbfb7308d16389}{key\+Down}} (QKey\+Event $\ast$)
\item 
virtual void \mbox{\hyperlink{class_t_tool_a5257bc53681eaefb43ce4987883d895d}{on\+Input\+Text}} (std\+::wstring, std\+::wstring, int, int)
\item 
virtual void \mbox{\hyperlink{class_t_tool_af69df3eb68917c8017860698f5d3fb67}{on\+Set\+Viewer}} ()
\item 
virtual void \mbox{\hyperlink{class_t_tool_ac286a2681633b4db6106596b4f54e53b}{on\+Activate}} ()
\begin{DoxyCompactList}\small\item\em Callback invoked whenever the tool activates. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_t_tool_a00fee58728c1e12fb50846f47d7e9f5e}{on\+Deactivate}} ()
\begin{DoxyCompactList}\small\item\em Callback for tool deactivation, includes tool switch. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_t_tool_aaf1e021290e74c1b085e4b095668e1ed}{on\+Image\+Changed}} ()
\begin{DoxyCompactList}\small\item\em Notifies changes in the image in use. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_t_tool_a3e775cfcd05aa3c35048b11fa40ab3e4}{on\+Enter}} ()
\begin{DoxyCompactList}\small\item\em Callback for the mouse entering the viewer area. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_t_tool_af7fb05265a94131da081da654e271a22}{on\+Leave}} ()
\begin{DoxyCompactList}\small\item\em Callback for the mouse leaving the viewer area. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_t_tool_a694286232ac766e3ec48f491505a407a}{on\+Frame\+Switched}} ()
\item 
virtual void \mbox{\hyperlink{class_t_tool_a25c28be1539cf682511967dc9b057952}{reset}} ()
\item 
virtual void \mbox{\hyperlink{class_t_tool_a058bf656d73bf3cd63b9826cbaaf48e0}{draw}} ()
\begin{DoxyCompactList}\small\item\em Draws the tool on the viewer. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_t_tool_a6225a72c8bc7ad1ad6eff6b81ac6b0a6}{is\+Active}} () const
\begin{DoxyCompactList}\small\item\em Used to know if a tool is active, (used in Text\+Tool only). \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_tool_affdedb591395f5f88f80e3756f867bc9}{set\+Active}} (bool active)
\item 
virtual \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ \mbox{\hyperlink{class_t_tool_a095bfe8d3690175e39c188ad6246d560}{get\+Properties}} (int)
\item 
virtual bool \mbox{\hyperlink{class_t_tool_a06694e0586f807c34b18e16341aa9ee2}{on\+Property\+Changed}} (std\+::string property\+Name)
\item 
virtual \mbox{\hyperlink{class_t_selection}{TSelection}} $\ast$ \mbox{\hyperlink{class_t_tool_add40ff8dd3dd04ed3ab5a259ed53fb85}{get\+Selection}} ()
\begin{DoxyCompactList}\small\item\em Returns a pointer to the tool selection. \end{DoxyCompactList}\item 
virtual int \mbox{\hyperlink{class_t_tool_a1768a57b8b6d1480618fd923fad15f1d}{get\+Cursor\+Id}} () const
\begin{DoxyCompactList}\small\item\em Returns the type of cursor used by the tool. \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{class_t_tool_a28f722eda896df0fd6b19b68ec99021e}{is\+Event\+Acceptable}} (QEvent $\ast$e)
\item 
\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$ \mbox{\hyperlink{class_t_tool_a8716e1462da359f4902c044a79f2d40d}{get\+Xsheet}} () const
\begin{DoxyCompactList}\small\item\em Returns a pointer to the actual Xsheet. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_t_tool_a85025fe6544609814a1672ded5847874}{get\+Frame}} ()
\begin{DoxyCompactList}\small\item\em Returns the actual frame in use. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_t_tool_a7214525a3ae0cdcb0a0393e4dc4d3bf5}{get\+Column\+Index}} ()
\begin{DoxyCompactList}\small\item\em Returns the actual column index. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} \mbox{\hyperlink{class_t_tool_a25b57b82dfac131d9d6405e07fbd98b4}{get\+Object\+Id}} () const
\begin{DoxyCompactList}\small\item\em Returns a pointer to the actual stage object. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notify\+Image\+Changed}} ()
\item 
void \mbox{\hyperlink{class_t_tool_a40890a3af608b9bfeb144505fd38853d}{notify\+Image\+Changed}} (const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&fid)
\begin{DoxyCompactList}\small\item\em images on the level view. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{get\+Current\+Fid}} () const
\begin{DoxyCompactList}\small\item\em Returns the number of the actual editing frame. \end{DoxyCompactList}\item 
const \mbox{\hyperlink{class_t_affine}{TAffine}} \& \mbox{\hyperlink{class_t_tool_ad66fa5cefa74ee84dd3140e8e2b8336b}{get\+Matrix}} () const
\item 
void \mbox{\hyperlink{class_t_tool_a0f1f2c2326fb0ef3bb6d4108fc0fb24b}{set\+Matrix}} (const \mbox{\hyperlink{class_t_affine}{TAffine}} \&matrix)
\item 
\mbox{\hyperlink{class_t_affine}{TAffine}} \mbox{\hyperlink{class_t_tool_a73c1b7f13eaea33e1d305636f44c4a64}{get\+Current\+Column\+Matrix}} (int frame=-\/1) const
\item 
\mbox{\hyperlink{class_t_affine}{TAffine}} \mbox{\hyperlink{class_t_tool_a57b1120acc73e2127f81688301707177}{get\+Current\+Column\+Parent\+Matrix}} () const
\item 
\mbox{\hyperlink{class_t_affine}{TAffine}} \mbox{\hyperlink{class_t_tool_a5decb470046ec60d32190494d270d52b}{get\+Current\+Object\+Parent\+Matrix}} () const
\item 
\mbox{\hyperlink{class_t_affine}{TAffine}} \mbox{\hyperlink{class_t_tool_a05dea1c094543fc4062c0b9988a38eae}{get\+Current\+Object\+Parent\+Matrix2}} () const
\item 
\mbox{\hyperlink{class_t_affine}{TAffine}} \mbox{\hyperlink{class_t_tool_a99eb4354e2dba454b7210c986015d577}{get\+Column\+Matrix}} (int index, int frame=-\/1) const
\item 
virtual void \mbox{\hyperlink{class_t_tool_a1a5f380464a6b36947212e2f8d5b314c}{update\+Matrix}} ()
\item 
virtual void \mbox{\hyperlink{class_t_tool_ac8a81b368568245d16f7c3d4a17684a1}{add\+Context\+Menu\+Items}} (QMenu $\ast$menu)
\item 
void \mbox{\hyperlink{class_t_tool_a0188d7374490589e82961042ad51cdfb}{enable}} (bool on)
\item 
bool \mbox{\hyperlink{class_t_tool_a19efb128489874d80fb364c613fbf64b}{is\+Enabled}} () const
\item 
QString \mbox{\hyperlink{class_t_tool_a3638517d39dffe6abec0a4e1bcf990d3}{update\+Enabled}} ()
\item 
virtual QString \mbox{\hyperlink{class_t_tool_ad29f43b1ac4db60a46397e1c8263bc4d}{update\+Enabled}} (int row\+Index, int column\+Index)
\item 
bool \mbox{\hyperlink{class_t_tool_a59fe3fb20e44f3c167190ebc8901ca31}{is\+Column\+Locked}} (int column\+Index) const
\item 
void \mbox{\hyperlink{class_t_tool_a985d88ab04fc77b1ddca7ead95ab4884}{reset\+Input\+Method}} ()
\begin{DoxyCompactList}\small\item\em Resets Input Context (IME) \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{class_t_tool_a767b49f02ae01193892a18adb2f7e740}{is\+Pencil\+Mode\+Active}} ()
\item 
virtual bool \mbox{\hyperlink{class_t_tool_a7faf10efcd418f584a15907d88715566}{is\+Dragging}} () const
\item 
void \mbox{\hyperlink{class_t_tool_ae40926a5cc5262b4c4609ae6f05a13e1}{set\+Selected\+Frames}} (const std\+::set$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \&selected\+Frames)
\item 
void \mbox{\hyperlink{class_t_tool_aaa58ad223acef4a6afbffb09d2f04ed6}{tween\+Selected\+Guide\+Strokes}} ()
\item 
void \mbox{\hyperlink{class_t_tool_ae6fe6533949c4098703d15325adc1ce7}{tween\+Guide\+Stroke\+To\+Selected}} ()
\item 
void \mbox{\hyperlink{class_t_tool_a2228ed2a2475d7c793cb5d9b60150724}{flip\+Guide\+Stroke\+Direction}} (int mode)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_t_tool}{TTool}} $\ast$ \mbox{\hyperlink{class_t_tool_ac99234acd256aa0adee5095bc629d793}{get\+Tool}} (std\+::string tool\+Name, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4}{Tool\+Target\+Type}} target\+Type)
\item 
static \mbox{\hyperlink{class_t_application}{TApplication}} $\ast$ \mbox{\hyperlink{class_t_tool_a6d9174a450482028d6b6b77018af98f4}{get\+Application}} ()
\item 
static void \mbox{\hyperlink{class_t_tool_a4d7dc084cba84024ae1594a28ce45f93}{set\+Application}} (\mbox{\hyperlink{class_t_application}{TApplication}} $\ast$application)
\item 
static \mbox{\hyperlink{class_t_xsh_cell}{TXsh\+Cell}} \mbox{\hyperlink{class_t_tool_a158a4612dcff62a7f37e5fc3b47ed31c}{get\+Image\+Cell}} ()
\begin{DoxyCompactList}\small\item\em Returns the level-\/frame pair to be edited by the tool. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{class_t_image}{TImage}} $\ast$ \mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{get\+Image}} (bool to\+Be\+Modified, int subsampling=0)
\begin{DoxyCompactList}\small\item\em Returns the image to be edited by the tool. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{class_t_image}{TImage}} $\ast$ \mbox{\hyperlink{class_t_tool_a668ac4790094a864ba6e37bd902303f1}{touch\+Image}} ()
\item 
static void \mbox{\hyperlink{class_t_tool_a6cb0478607efdb92f5247cce35259188}{update\+Tools\+Properties\+Translation}} ()
\item 
static const std\+::set$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \& \mbox{\hyperlink{class_t_tool_a84779988b40987971c0cbf3699db3b90}{get\+Selected\+Frames}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static std\+::vector$<$ \mbox{\hyperlink{struct_t_tool_1_1_cell_ops}{Cell\+Ops}} $>$ \mbox{\hyperlink{class_t_tool_a9345d88f41578058ccb2d6e681591c09}{m\+\_\+cells\+Data}}
\item 
static bool \mbox{\hyperlink{class_t_tool_afec1db61477579b224321fd469e4ec00}{m\+\_\+is\+Level\+Created}} = false
\item 
static bool \mbox{\hyperlink{class_t_tool_aabd06af7335f1ba0c96f36f1ac3e9976}{m\+\_\+is\+Frame\+Created}} = false
\item 
static std\+::vector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \mbox{\hyperlink{class_t_tool_a89974c7589cad70945bfec7f4c1f1906}{m\+\_\+old\+Fids}}
\item 
static std\+::vector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \mbox{\hyperlink{class_t_tool_aac560f501994828462e15fd54d05ed68}{m\+\_\+new\+Fids}}
\item 
static bool \mbox{\hyperlink{class_t_tool_a5352244b885e57127a018982f4944c89}{m\+\_\+is\+Level\+Renumbererd}} = false
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_t_tool_a2d54eb80783489fab80efc834b38d6f7}{bind}} (int target\+Type)
\item 
virtual void \mbox{\hyperlink{class_t_tool_adfa7a80eb7be96de62040dab2311a5bd}{on\+Selected\+Frames\+Changed}} ()
\item 
virtual QString \mbox{\hyperlink{class_t_tool_a4ac95dc3f7be83c2c8a1d3b8b276d7e4}{disable\+String}} ()
\begin{DoxyCompactList}\small\item\em Returns a custom reason to disable the tool. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::string \mbox{\hyperlink{class_t_tool_ac92abce57c7c53b5b29847144c571fb1}{m\+\_\+name}}
\begin{DoxyCompactList}\small\item\em The tool\textquotesingle{}s name. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_tool_1_1_viewer}{Viewer}} $\ast$ \mbox{\hyperlink{class_t_tool_a66f61f998b655c1c917ee63a595657c6}{m\+\_\+viewer}}
\begin{DoxyCompactList}\small\item\em Tool\textquotesingle{}s current viewer. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_t_affine}{TAffine}} \mbox{\hyperlink{class_t_tool_a3bf7058680c3aef9a5584a7f71351757}{m\+\_\+matrix}}
\begin{DoxyCompactList}\small\item\em World-\/to-\/window reference change affine. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_t_tool_ad84e5837b3ed638e3e73373c3195a589}{m\+\_\+target\+Type}}
\begin{DoxyCompactList}\small\item\em The tool\textquotesingle{}s image type target. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_t_tool_a3552ce52afc39fffcab0492daf72ed16}{m\+\_\+enabled}}
\begin{DoxyCompactList}\small\item\em Whether the tool allows user interaction. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_t_tool_aefd7997f3dc0226dc8ac8fcbd116f02d}{m\+\_\+active}}
\item 
bool \mbox{\hyperlink{class_t_tool_a54bf7db989aa872f4cc412bb2ac3efc0}{m\+\_\+picking}}
\end{DoxyCompactItemize}
\doxysubsection*{Static Protected Attributes}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_t_application}{TApplication}} $\ast$ \mbox{\hyperlink{class_t_tool_a580defbdf43efe0a228d647900d03a60}{m\+\_\+application}} = 0
\item 
static std\+::set$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \mbox{\hyperlink{class_t_tool_adfd05e8e92235633621dbab55fe3c76f}{m\+\_\+selected\+Frames}} = std\+::set$<$\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}}$>$()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\mbox{\hyperlink{class_t_tool}{TTool}} is the abstract base class defining the interface for Toonz tools -\/ the ones accessible from the \mbox{\hyperlink{class_toolbar}{Toolbar}} panel that users can activate to edit the scene contents interactively. 

Toonz implements a number of interactive tools, like the {\itshape Brush Tool}, {\itshape Fill Tool}, {\itshape Zoom Tool} and others. They all inherit from this class, which provides the necessary interface and framework to implement a generic interactive tool in Toonz. \begin{DoxyVerb}        A Toonz Tool should re-implement the following key functionalities:
\end{DoxyVerb}
 
\begin{DoxyItemize}
\item The abstract get\+Tool\+Type() method, which classifies the tool, and eventually get\+Target\+Type() 
\item The \mbox{\hyperlink{class_t_tool_a058bf656d73bf3cd63b9826cbaaf48e0}{draw()}} method, used to draw the tool on screen 
\item The mouse-\/related methods, to grant user interaction 
\item The get\+Properties() and \mbox{\hyperlink{class_t_tool_a06694e0586f807c34b18e16341aa9ee2}{on\+Property\+Changed()}} methods, to define and track a tool\textquotesingle{}s \mbox{\hyperlink{class_t_property}{TProperty}} members 
\item The \mbox{\hyperlink{class_t_tool_ac8a81b368568245d16f7c3d4a17684a1}{add\+Context\+Menu\+Items()}} method, to insert actions in right-\/click menus 
\end{DoxyItemize}\begin{DoxyParagraph}{Tool classification}
Toonz enforces a strict classification of its tools that is used to enable or disable them in the appropriate contexts\+: 
\begin{DoxyItemize}
\item {\bfseries{Generic Tools\+:}} the tool is always enabled, since it does not need to access specific scene contents. Hidden tools typically prefer to select this type since they should handle disablements silently. 
\item {\bfseries{Column Tools\+:}} the tool is used to alter or define the placement of a column\textquotesingle{}s content. It is disabled in \mbox{\hyperlink{class_filmstrip}{Filmstrip}} view mode, since that\textquotesingle{}s a strictly level-\/related view. 
\item {\bfseries{Level\+Read Tools\+:}} the tool is used to {\itshape read} a level\textquotesingle{}s images data. It is therefore enabled on all view modes. The tool is disabled in camera stand or 3D view modes if the level\textquotesingle{}s host column has sustained a placement which makes it impossible to access image data (as is the case with Plastic-\/deformed columns). 
\item {\bfseries{Level\+Write Tools\+:}} the tool is used to {\itshape write} a level\textquotesingle{}s images data. It is disabled in all contexts where a Level\+Read Tool would be disabled. It is also disabled in case the current level is of a type unsupported for write, {\itshape or} the level is read-\/only on disk. 
\end{DoxyItemize}Furthermore, tools define a bitwise combination of {\itshape Target Types}, which are the category of level types it can work on (including every image type and the motion path type). The Target Type is used only associated with Level\+Read and Level\+Write tool types. ~\newline
~\newline
 There are a number of additional generic rules that define whenever a tool is disabled\+: 
\begin{DoxyItemize}
\item Every tool is disabled when a viewer is in playback. 
\item Every non-\/\+Generic tool is disabled on level/columns that do not host a placeable image type (eg sound or magpie data). 
\item Every non-\/\+Generic tool is disabled when working on columns/levels that have been hidden. 
\item Every non-\/\+Generic tool is disabled when working on columns that have been locked (the lock icon on a column header). 
\end{DoxyItemize}
\end{DoxyParagraph}
\begin{DoxyParagraph}{Drawing}
Tools use Open\+GL to draw in their currently associated \mbox{\hyperlink{class_t_tool_1_1_viewer}{Viewer}} instance, which can be retrieved through the get\+Viewer() accessor function. The viewer is assigned to the tool just before it invokes the tool\textquotesingle{}s \mbox{\hyperlink{class_t_tool_a058bf656d73bf3cd63b9826cbaaf48e0}{draw()}} function -\/ use the on\+Set\+Viewer() virtual method to access viewer data {\itshape before} the viewer starts drawing (observe the tool is typically drawn as an overlay, on top of other stuff). ~\newline
~\newline
 Just before \mbox{\hyperlink{class_t_tool_a058bf656d73bf3cd63b9826cbaaf48e0}{draw()}} is invoked by the viewer, the {\ttfamily GL\+\_\+\+MODELVIEW} matrix is automatically pushed by the viewer with the tool-\/to-\/window affine returned by get\+Matrix() (multiplied by the viewer\textquotesingle{}s view affine). Use gl\+Get\+Doublev() to retrieve the effective tool-\/to-\/window reference change affine, and in case reimplement \mbox{\hyperlink{class_t_tool_a1a5f380464a6b36947212e2f8d5b314c}{update\+Matrix()}} to specify the affine returned by get\+Matrix(). ~\newline
~\newline
 The default implementation for \mbox{\hyperlink{class_t_tool_a1a5f380464a6b36947212e2f8d5b314c}{update\+Matrix()}} sets the tool reference to current object\textquotesingle{}s world one.
\end{DoxyParagraph}
\begin{DoxyParagraph}{Tool Properties}
A tool\textquotesingle{}s properties must be implemented by defining one or more \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} containers, and adding them the \mbox{\hyperlink{class_t_property}{TProperty}} specializations corresponding to the required parameters. ~\newline
~\newline
 Every \mbox{\hyperlink{class_t_property}{TProperty}} instance in group 0 is automatically added to the Tool Options panel in Toonz\textquotesingle{}s GUI. Further groups or special toolbar options must be currently hard-\/coded elsewhere. Tool Options panel construction will probably be redirected to the tool in future Toonz versions.
\end{DoxyParagraph}
\begin{DoxyParagraph}{Context Menu Items}
The \mbox{\hyperlink{class_t_tool_ac8a81b368568245d16f7c3d4a17684a1}{add\+Context\+Menu\+Items()}} is used to insert context menu actions {\itshape before} the standard actions provided by the tool viewer. Remember to insert separators to isolate commands of different type (such as view, editing, etc). 
\end{DoxyParagraph}


\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{class_t_tool_a8e915653734dd6faf23e9996eec67ebe}\label{class_t_tool_a8e915653734dd6faf23e9996eec67ebe}} 
\index{TTool@{TTool}!Application@{Application}}
\index{Application@{Application}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{Application}{Application}}
{\footnotesize\ttfamily typedef \mbox{\hyperlink{class_t_application}{TApplication}} \mbox{\hyperlink{class_t_application}{TTool\+::\+Application}}}



\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4}\label{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4}} 
\index{TTool@{TTool}!ToolTargetType@{ToolTargetType}}
\index{ToolTargetType@{ToolTargetType}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{ToolTargetType}{ToolTargetType}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4}{TTool\+::\+Tool\+Target\+Type}}}



Object types the tool can operate on. 

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{VectorImage@{VectorImage}!TTool@{TTool}}\index{TTool@{TTool}!VectorImage@{VectorImage}}}\mbox{\Hypertarget{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a6528d353c20fcbe8932de09845117046}\label{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a6528d353c20fcbe8932de09845117046}} 
Vector\+Image&Will work on vector images. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{ToonzImage@{ToonzImage}!TTool@{TTool}}\index{TTool@{TTool}!ToonzImage@{ToonzImage}}}\mbox{\Hypertarget{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}\label{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}} 
Toonz\+Image&Will work on colormap (tlv) images. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{RasterImage@{RasterImage}!TTool@{TTool}}\index{TTool@{TTool}!RasterImage@{RasterImage}}}\mbox{\Hypertarget{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a89c2e7968afae376f0be7abeff061859}\label{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a89c2e7968afae376f0be7abeff061859}} 
Raster\+Image&Will work on fullcolor images. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{MeshImage@{MeshImage}!TTool@{TTool}}\index{TTool@{TTool}!MeshImage@{MeshImage}}}\mbox{\Hypertarget{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c7eda2f062c0790a4ac7dc4acfc7232}\label{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c7eda2f062c0790a4ac7dc4acfc7232}} 
Mesh\+Image&Will work on mesh images. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Splines@{Splines}!TTool@{TTool}}\index{TTool@{TTool}!Splines@{Splines}}}\mbox{\Hypertarget{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a71d3697cafb025fea3effa714e397980}\label{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a71d3697cafb025fea3effa714e397980}} 
Splines&Will work on motion paths. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{LevelColumns@{LevelColumns}!TTool@{TTool}}\index{TTool@{TTool}!LevelColumns@{LevelColumns}}}\mbox{\Hypertarget{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4aa6443a8b4b8f50c7415bee045a27a309}\label{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4aa6443a8b4b8f50c7415bee045a27a309}} 
Level\+Columns&Will work on level columns. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{MeshColumns@{MeshColumns}!TTool@{TTool}}\index{TTool@{TTool}!MeshColumns@{MeshColumns}}}\mbox{\Hypertarget{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a269e5d6d3f79dd14ab7aa2e3192eeaf1}\label{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a269e5d6d3f79dd14ab7aa2e3192eeaf1}} 
Mesh\+Columns&Will work on mesh columns. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{EmptyTarget@{EmptyTarget}!TTool@{TTool}}\index{TTool@{TTool}!EmptyTarget@{EmptyTarget}}}\mbox{\Hypertarget{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c576a0d6f800899d7be1cfaceef4d12}\label{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c576a0d6f800899d7be1cfaceef4d12}} 
Empty\+Target&Will work on empty cells/columns. \\
\hline

\end{DoxyEnumFields}

\begin{DoxyCode}{0}
\DoxyCodeLine{00277   \{ NoTarget    = 0x0,}
\DoxyCodeLine{00278     \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a6528d353c20fcbe8932de09845117046}{VectorImage}} = 0x1,   }
\DoxyCodeLine{00279     \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{ToonzImage}}  = 0x2,   }
\DoxyCodeLine{00280     \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a89c2e7968afae376f0be7abeff061859}{RasterImage}} = 0x4,   }
\DoxyCodeLine{00281     \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c7eda2f062c0790a4ac7dc4acfc7232}{MeshImage}}   = 0x8,   }
\DoxyCodeLine{00282     \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a71d3697cafb025fea3effa714e397980}{Splines}}     = 0x10,  }
\DoxyCodeLine{00283 }
\DoxyCodeLine{00284     \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4aa6443a8b4b8f50c7415bee045a27a309}{LevelColumns}} = 0x20,  }
\DoxyCodeLine{00285     \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a269e5d6d3f79dd14ab7aa2e3192eeaf1}{MeshColumns}}  = 0x40,  }
\DoxyCodeLine{00286 }
\DoxyCodeLine{00287     \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c576a0d6f800899d7be1cfaceef4d12}{EmptyTarget}} = 0x80,  }
\DoxyCodeLine{00288 }
\DoxyCodeLine{00289     CommonImages = \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a6528d353c20fcbe8932de09845117046}{VectorImage}} | \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{ToonzImage}} | \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a89c2e7968afae376f0be7abeff061859}{RasterImage}},}
\DoxyCodeLine{00290     AllImages    = CommonImages | \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c7eda2f062c0790a4ac7dc4acfc7232}{MeshImage}},}
\DoxyCodeLine{00291     Vectors      = \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a6528d353c20fcbe8932de09845117046}{VectorImage}} | \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a71d3697cafb025fea3effa714e397980}{Splines}},}
\DoxyCodeLine{00292 }
\DoxyCodeLine{00293     CommonLevels = CommonImages | \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4aa6443a8b4b8f50c7415bee045a27a309}{LevelColumns}},}
\DoxyCodeLine{00294     MeshLevels   = \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c7eda2f062c0790a4ac7dc4acfc7232}{MeshImage}} | \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a269e5d6d3f79dd14ab7aa2e3192eeaf1}{MeshColumns}},}
\DoxyCodeLine{00295 }
\DoxyCodeLine{00296     AllTargets = 0xffffffff,}
\DoxyCodeLine{00297   \};}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}\label{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}} 
\index{TTool@{TTool}!ToolType@{ToolType}}
\index{ToolType@{ToolType}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{ToolType}{ToolType}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{TTool\+::\+Tool\+Type}}}



Tool editing type. 

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{GenericTool@{GenericTool}!TTool@{TTool}}\index{TTool@{TTool}!GenericTool@{GenericTool}}}\mbox{\Hypertarget{class_t_tool_a391f099e6530ea54c71d81c9ee39296caa8f6293eab5817f82f74f031c0724f28}\label{class_t_tool_a391f099e6530ea54c71d81c9ee39296caa8f6293eab5817f82f74f031c0724f28}} 
Generic\+Tool&Tool will not deal with specific scene content. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{ColumnTool@{ColumnTool}!TTool@{TTool}}\index{TTool@{TTool}!ColumnTool@{ColumnTool}}}\mbox{\Hypertarget{class_t_tool_a391f099e6530ea54c71d81c9ee39296cab1cf4660322ca2d4e5a4848bdbc049a9}\label{class_t_tool_a391f099e6530ea54c71d81c9ee39296cab1cf4660322ca2d4e5a4848bdbc049a9}} 
Column\+Tool&Tool deals with placement of column objects. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{LevelReadTool@{LevelReadTool}!TTool@{TTool}}\index{TTool@{TTool}!LevelReadTool@{LevelReadTool}}}\mbox{\Hypertarget{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca18d911ba387409847ad5ae6a731031f8}\label{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca18d911ba387409847ad5ae6a731031f8}} 
Level\+Read\+Tool&Tool reads a level\textquotesingle{}s image data. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{LevelWriteTool@{LevelWriteTool}!TTool@{TTool}}\index{TTool@{TTool}!LevelWriteTool@{LevelWriteTool}}}\mbox{\Hypertarget{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca01ffd66b00b05a88c02ce8ceb5da3b8b}\label{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca01ffd66b00b05a88c02ce8ceb5da3b8b}} 
Level\+Write\+Tool&Tool writes a level\textquotesingle{}s image data (implies Level\+Read\+Tool). \\
\hline

\end{DoxyEnumFields}

\begin{DoxyCode}{0}
\DoxyCodeLine{00266   \{ \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296caa8f6293eab5817f82f74f031c0724f28}{GenericTool}}   = 1,  }
\DoxyCodeLine{00267     \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296cab1cf4660322ca2d4e5a4848bdbc049a9}{ColumnTool}}    = 2,  }
\DoxyCodeLine{00268     \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca18d911ba387409847ad5ae6a731031f8}{LevelReadTool}} = 4,  }
\DoxyCodeLine{00269     \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca01ffd66b00b05a88c02ce8ceb5da3b8b}{LevelWriteTool}} =}
\DoxyCodeLine{00270         8,  }
\DoxyCodeLine{00271 }
\DoxyCodeLine{00272     \textcolor{comment}{// Convenience testing flags -\/ getToolType() should not return these}}
\DoxyCodeLine{00273 }
\DoxyCodeLine{00274     LevelTool = \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca18d911ba387409847ad5ae6a731031f8}{LevelReadTool}} | \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca01ffd66b00b05a88c02ce8ceb5da3b8b}{LevelWriteTool}} \};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_tool_a9c63ec35f606e755d0d036bf4fed62ab}\label{class_t_tool_a9c63ec35f606e755d0d036bf4fed62ab}} 
\index{TTool@{TTool}!TTool@{TTool}}
\index{TTool@{TTool}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{TTool()}{TTool()}}
{\footnotesize\ttfamily TTool\+::\+TTool (\begin{DoxyParamCaption}\item[{std\+::string}]{tool\+Name }\end{DoxyParamCaption})}



every tool (invoking update\+Translation() for each). 


\begin{DoxyCode}{0}
\DoxyCodeLine{00172     : \mbox{\hyperlink{class_t_tool_ac92abce57c7c53b5b29847144c571fb1}{m\_name}}(name)}
\DoxyCodeLine{00173     , \mbox{\hyperlink{class_t_tool_a66f61f998b655c1c917ee63a595657c6}{m\_viewer}}(0)}
\DoxyCodeLine{00174     , \mbox{\hyperlink{class_t_tool_ad84e5837b3ed638e3e73373c3195a589}{m\_targetType}}(NoTarget)}
\DoxyCodeLine{00175     , \mbox{\hyperlink{class_t_tool_a3552ce52afc39fffcab0492daf72ed16}{m\_enabled}}(\textcolor{keyword}{true})}
\DoxyCodeLine{00176     , m\_active(\textcolor{keyword}{false})}
\DoxyCodeLine{00177     , m\_picking(\textcolor{keyword}{false}) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a02ed5900b4a3690d19bd5c0af648136b}\label{class_t_tool_a02ed5900b4a3690d19bd5c0af648136b}} 
\index{TTool@{TTool}!````~TTool@{$\sim$TTool}}
\index{````~TTool@{$\sim$TTool}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{$\sim$TTool()}{~TTool()}}
{\footnotesize\ttfamily virtual TTool\+::$\sim$\+TTool (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00341 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_tool_ac8a81b368568245d16f7c3d4a17684a1}\label{class_t_tool_ac8a81b368568245d16f7c3d4a17684a1}} 
\index{TTool@{TTool}!addContextMenuItems@{addContextMenuItems}}
\index{addContextMenuItems@{addContextMenuItems}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{addContextMenuItems()}{addContextMenuItems()}}
{\footnotesize\ttfamily virtual void TTool\+::add\+Context\+Menu\+Items (\begin{DoxyParamCaption}\item[{QMenu $\ast$}]{menu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

Add a context menu to the actual tool, as for example pressing right mouse button with the stroke selection tool. 

Reimplemented in \mbox{\hyperlink{class_control_point_editor_tool_a5228477da9c23e7485a14e18c1ee481b}{Control\+Point\+Editor\+Tool}}, \mbox{\hyperlink{class_plastic_tool_abf7dedd75cc50784fb0ba653f89adc5c}{Plastic\+Tool}}, \mbox{\hyperlink{class_skeleton_tool_a385e7326886eccc593e35e1a6d264dfd}{Skeleton\+Tool}}, and \mbox{\hyperlink{class_vector_selection_tool_ae3d352801662e8a24bc1e7d2e9723baa}{Vector\+Selection\+Tool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00504 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a2d54eb80783489fab80efc834b38d6f7}\label{class_t_tool_a2d54eb80783489fab80efc834b38d6f7}} 
\index{TTool@{TTool}!bind@{bind}}
\index{bind@{bind}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{bind()}{bind()}}
{\footnotesize\ttfamily void TTool\+::bind (\begin{DoxyParamCaption}\item[{int}]{target\+Type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00191                                \{}
\DoxyCodeLine{00192   \mbox{\hyperlink{class_t_tool_ad84e5837b3ed638e3e73373c3195a589}{m\_targetType}} = targetType;}
\DoxyCodeLine{00193 }
\DoxyCodeLine{00194   \textcolor{keywordflow}{if} (!toolTable) toolTable = \textcolor{keyword}{new} ToolTable();}
\DoxyCodeLine{00195 }
\DoxyCodeLine{00196   \textcolor{keywordflow}{if} (!toolNames) toolNames = \textcolor{keyword}{new} std::set<std::string>();}
\DoxyCodeLine{00197 }
\DoxyCodeLine{00198   std::string name = getName();}
\DoxyCodeLine{00199   \textcolor{keywordflow}{if} (toolNames-\/>count(name) == 0) \{}
\DoxyCodeLine{00200     toolNames-\/>insert(name);}
\DoxyCodeLine{00201 }
\DoxyCodeLine{00202     \textcolor{comment}{// Initialize with the dummy tool}}
\DoxyCodeLine{00203     toolTable-\/>insert(}
\DoxyCodeLine{00204         std::make\_pair(std::make\_pair(name, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{ToonzImage}}), \&theDummyTool));}
\DoxyCodeLine{00205     toolTable-\/>insert(}
\DoxyCodeLine{00206         std::make\_pair(std::make\_pair(name, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a6528d353c20fcbe8932de09845117046}{VectorImage}}), \&theDummyTool));}
\DoxyCodeLine{00207     toolTable-\/>insert(}
\DoxyCodeLine{00208         std::make\_pair(std::make\_pair(name, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a89c2e7968afae376f0be7abeff061859}{RasterImage}}), \&theDummyTool));}
\DoxyCodeLine{00209     toolTable-\/>insert(}
\DoxyCodeLine{00210         std::make\_pair(std::make\_pair(name, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c7eda2f062c0790a4ac7dc4acfc7232}{MeshImage}}), \&theDummyTool));}
\DoxyCodeLine{00211 }
\DoxyCodeLine{00212     ToolSelector *toolSelector = \textcolor{keyword}{new} ToolSelector(name);}
\DoxyCodeLine{00213     CommandManager::instance()-\/>setHandler(}
\DoxyCodeLine{00214         name.c\_str(), \textcolor{keyword}{new} \mbox{\hyperlink{class_command_handler_helper}{CommandHandlerHelper<ToolSelector>}}(}
\DoxyCodeLine{00215                           toolSelector, \&ToolSelector::selectTool));}
\DoxyCodeLine{00216   \}}
\DoxyCodeLine{00217 }
\DoxyCodeLine{00218   \textcolor{keywordflow}{if} (targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{ToonzImage}})}
\DoxyCodeLine{00219     (*toolTable)[std::make\_pair(name, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{ToonzImage}})] = \textcolor{keyword}{this};}
\DoxyCodeLine{00220   \textcolor{keywordflow}{if} (targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a6528d353c20fcbe8932de09845117046}{VectorImage}})}
\DoxyCodeLine{00221     (*toolTable)[std::make\_pair(name, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a6528d353c20fcbe8932de09845117046}{VectorImage}})] = \textcolor{keyword}{this};}
\DoxyCodeLine{00222   \textcolor{keywordflow}{if} (targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a89c2e7968afae376f0be7abeff061859}{RasterImage}})}
\DoxyCodeLine{00223     (*toolTable)[std::make\_pair(name, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a89c2e7968afae376f0be7abeff061859}{RasterImage}})] = \textcolor{keyword}{this};}
\DoxyCodeLine{00224   \textcolor{keywordflow}{if} (targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c7eda2f062c0790a4ac7dc4acfc7232}{MeshImage}})}
\DoxyCodeLine{00225     (*toolTable)[std::make\_pair(name, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c7eda2f062c0790a4ac7dc4acfc7232}{MeshImage}})] = \textcolor{keyword}{this};}
\DoxyCodeLine{00226 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a9e09495b50142df6b7bb9682837263c4}\label{class_t_tool_a9e09495b50142df6b7bb9682837263c4}} 
\index{TTool@{TTool}!createOptionsBox@{createOptionsBox}}
\index{createOptionsBox@{createOptionsBox}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{createOptionsBox()}{createOptionsBox()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_tool_options_box}{Tool\+Options\+Box}} $\ast$ TTool\+::create\+Options\+Box (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

The default returns a generic box containing the options for property group 0). \begin{DoxySeeAlso}{See also}
See \mbox{\hyperlink{}{tooloptions.\+h}} for more details. Factory function returning a newly created GUI options box to be displayed for the tool 
\end{DoxySeeAlso}


Reimplemented in \mbox{\hyperlink{class_full_color_brush_tool_a4d4fe669cee5b1e6b1300ca5ca248adf}{Full\+Color\+Brush\+Tool}}, \mbox{\hyperlink{class_plastic_tool_a21ed12bc2cdfd6f1a252cef5addfdc81}{Plastic\+Tool}}, \mbox{\hyperlink{class_toonz_raster_brush_tool_a1da23d3c3840e430138b12e245616d49}{Toonz\+Raster\+Brush\+Tool}}, and \mbox{\hyperlink{class_toonz_vector_brush_tool_aeec29fe8c8de4a3f3c1a2a481a3e6d12}{Toonz\+Vector\+Brush\+Tool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00230                                         \{}
\DoxyCodeLine{00231   \mbox{\hyperlink{class_t_palette_handle}{TPaletteHandle}} *currPalette =}
\DoxyCodeLine{00232       m\_application-\/>getPaletteController()-\/>getCurrentLevelPalette();}
\DoxyCodeLine{00233   \mbox{\hyperlink{class_tool_handle}{ToolHandle}} *currTool = m\_application-\/>getCurrentTool();}
\DoxyCodeLine{00234   \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{class_generic_tool_options_box}{GenericToolOptionsBox}}(0, \textcolor{keyword}{this}, currPalette, 0, currTool);}
\DoxyCodeLine{00235 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a4ac95dc3f7be83c2c8a1d3b8b276d7e4}\label{class_t_tool_a4ac95dc3f7be83c2c8a1d3b8b276d7e4}} 
\index{TTool@{TTool}!disableString@{disableString}}
\index{disableString@{disableString}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{disableString()}{disableString()}}
{\footnotesize\ttfamily virtual QString TTool\+::disable\+String (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Returns a custom reason to disable the tool. 

\mbox{\Hypertarget{class_t_tool_a058bf656d73bf3cd63b9826cbaaf48e0}\label{class_t_tool_a058bf656d73bf3cd63b9826cbaaf48e0}} 
\index{TTool@{TTool}!draw@{draw}}
\index{draw@{draw}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily virtual void TTool\+::draw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Draws the tool on the viewer. 



Reimplemented in \mbox{\hyperlink{class_pinch_tool_a1f3ec0529ae587fd265d5459580221db}{Pinch\+Tool}}, \mbox{\hyperlink{class_control_point_editor_tool_ae736cb807171fa9d2e250a10f81f4c6e}{Control\+Point\+Editor\+Tool}}, \mbox{\hyperlink{class_edit_tool_a8ba2e2f68e01b0635a84982ccce2a4a1}{Edit\+Tool}}, \mbox{\hyperlink{class_fill_tool_a9fe12e5e18644d982279efb0e14e6034}{Fill\+Tool}}, \mbox{\hyperlink{class_finger_tool_a5584c85f9a9ce54dc322cdfda29639a1}{Finger\+Tool}}, \mbox{\hyperlink{class_full_color_brush_tool_ab2a59a2a31dfdfefb275ff7004a9f7df}{Full\+Color\+Brush\+Tool}}, \mbox{\hyperlink{class_full_color_eraser_tool_a595d6f72a8a88cc7a7f72604407baeac}{Full\+Color\+Eraser\+Tool}}, \mbox{\hyperlink{class_geometric_tool_a582bdb66fc6ada662b695800c243f573}{Geometric\+Tool}}, \mbox{\hyperlink{class_hook_tool_a343b508b009569fd1ec11a7fa1d02183}{Hook\+Tool}}, \mbox{\hyperlink{class_magnet_tool_a568746745fa158ff8572cb64fef135ca}{Magnet\+Tool}}, \mbox{\hyperlink{class_paint_brush_tool_a379e67156bea0ec690c1d7155489dfa0}{Paint\+Brush\+Tool}}, \mbox{\hyperlink{class_plastic_tool_a9d46bd4278978baf6cf3f822ee342094}{Plastic\+Tool}}, \mbox{\hyperlink{class_pump_tool_a8d5824d783185e215ec527328435c339}{Pump\+Tool}}, \mbox{\hyperlink{class_raster_selection_tool_a53c4f77bac43b8766df1b290415c09e1}{Raster\+Selection\+Tool}}, \mbox{\hyperlink{class_raster_tape_tool_aee0b615722dab5032bcd3ec165cf21aa}{Raster\+Tape\+Tool}}, \mbox{\hyperlink{class_r_g_b_picker_tool_a1561a7654bf6c12a32a6d503be19e97e}{RGBPicker\+Tool}}, \mbox{\hyperlink{class_ruler_tool_acfcc6322fd4ef6ddeae08857b424abc1}{Ruler\+Tool}}, \mbox{\hyperlink{class_shift_trace_tool_a48727ff6695c72454138f4f10e69cf35}{Shift\+Trace\+Tool}}, \mbox{\hyperlink{class_skeleton_tool_ae4202699f76a9ea8164799fbf8596655}{Skeleton\+Tool}}, \mbox{\hyperlink{class_style_picker_tool_a32ae73caefe3bfd6c364a7b69b1e81ff}{Style\+Picker\+Tool}}, \mbox{\hyperlink{class_toonz_raster_brush_tool_afcaca75d7a357250948936e59c5e5b2b}{Toonz\+Raster\+Brush\+Tool}}, \mbox{\hyperlink{class_toonz_vector_brush_tool_a3691fbb7fffbc574fa0227e2c4d4657b}{Toonz\+Vector\+Brush\+Tool}}, \mbox{\hyperlink{class_tracker_tool_ac4f484cbcc637cd22c3b803463d1f83a}{Tracker\+Tool}}, \mbox{\hyperlink{class_type_tool_a450218e776540a68485f6f535f11fc00}{Type\+Tool}}, \mbox{\hyperlink{class_eraser_tool_a59979313b8409fd36025927655489c21}{Eraser\+Tool}}, \mbox{\hyperlink{class_vector_selection_tool_a5c6d80a5263bad0ae7603e0d7c72f9b5}{Vector\+Selection\+Tool}}, \mbox{\hyperlink{class_vector_tape_tool_aaf17298c2921ce2ccdb1f09f83bf3b08}{Vector\+Tape\+Tool}}, \mbox{\hyperlink{class_rotate_tool_a456d34a7e390486709ec890671c08e62}{Rotate\+Tool}}, \mbox{\hyperlink{class_camera_test_tool_aa0fa1d7fa1d1854157b9a2a91ac32153}{Camera\+Test\+Tool}}, \mbox{\hyperlink{class_set_scan_cropbox_tool_ae04421192aef4a454bfe60391708f8bd}{Set\+Scan\+Cropbox\+Tool}}, and \mbox{\hyperlink{class_selection_tool_a64457ad075be6bd4410efe8b02951dc7}{Selection\+Tool}}.



Referenced by \mbox{\hyperlink{l01598}{Scene\+Viewer\+::draw\+Overlay()}}.

\mbox{\Hypertarget{class_t_tool_a0188d7374490589e82961042ad51cdfb}\label{class_t_tool_a0188d7374490589e82961042ad51cdfb}} 
\index{TTool@{TTool}!enable@{enable}}
\index{enable@{enable}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{enable()}{enable()}}
{\footnotesize\ttfamily void TTool\+::enable (\begin{DoxyParamCaption}\item[{bool}]{on }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00506 \{ \mbox{\hyperlink{class_t_tool_a3552ce52afc39fffcab0492daf72ed16}{m\_enabled}} = on; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a2228ed2a2475d7c793cb5d9b60150724}\label{class_t_tool_a2228ed2a2475d7c793cb5d9b60150724}} 
\index{TTool@{TTool}!flipGuideStrokeDirection@{flipGuideStrokeDirection}}
\index{flipGuideStrokeDirection@{flipGuideStrokeDirection}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{flipGuideStrokeDirection()}{flipGuideStrokeDirection()}}
{\footnotesize\ttfamily void TTool\+::flip\+Guide\+Stroke\+Direction (\begin{DoxyParamCaption}\item[{int}]{mode }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01422                                              \{}
\DoxyCodeLine{01423   \textcolor{keywordflow}{if} (!mode) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01424 }
\DoxyCodeLine{01425   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl =}
\DoxyCodeLine{01426       m\_application-\/>getCurrentLevel()-\/>getLevel()-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01427   \textcolor{keywordflow}{if} (!sl) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01428 }
\DoxyCodeLine{01429   \textcolor{keywordtype}{int} osBack  = -\/1;}
\DoxyCodeLine{01430   \textcolor{keywordtype}{int} osFront = -\/1;}
\DoxyCodeLine{01431   \textcolor{keywordtype}{int} os      = -\/1;}
\DoxyCodeLine{01432   \textcolor{keywordtype}{int} strokeIdx;}
\DoxyCodeLine{01433 }
\DoxyCodeLine{01434   getViewer()-\/>getGuidedFrameIdx(\&osBack, \&osFront);}
\DoxyCodeLine{01435 }
\DoxyCodeLine{01436   \textcolor{keywordflow}{if} (mode < 0) \{  \textcolor{comment}{// Previous Frame}}
\DoxyCodeLine{01437     os        = osBack;}
\DoxyCodeLine{01438     strokeIdx = getViewer()-\/>getGuidedBackStroke();}
\DoxyCodeLine{01439   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mode > 0) \{  \textcolor{comment}{// Next Frame}}
\DoxyCodeLine{01440     os        = osFront;}
\DoxyCodeLine{01441     strokeIdx = getViewer()-\/>getGuidedFrontStroke();}
\DoxyCodeLine{01442   \}}
\DoxyCodeLine{01443 }
\DoxyCodeLine{01444   \textcolor{keywordflow}{if} (os < 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01445 }
\DoxyCodeLine{01446   \mbox{\hyperlink{class_t_frame_handle}{TFrameHandle}} *currentFrame = getApplication()-\/>getCurrentFrame();}
\DoxyCodeLine{01447   \textcolor{keywordtype}{int} row                    = currentFrame-\/>getFrameIndex();}
\DoxyCodeLine{01448   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} cFid              = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{01449   \textcolor{keywordflow}{if} (cFid.isEmptyFrame()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01450 }
\DoxyCodeLine{01451   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} cvi = sl-\/>getFrame(cFid, \textcolor{keyword}{false});}
\DoxyCodeLine{01452   \textcolor{keywordflow}{if} (!cvi) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01453 }
\DoxyCodeLine{01454   \textcolor{keywordtype}{int} cStrokeCount = cvi-\/>getStrokeCount();}
\DoxyCodeLine{01455 }
\DoxyCodeLine{01456   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid;}
\DoxyCodeLine{01457   \textcolor{keywordflow}{if} (currentFrame-\/>isEditingScene()) \{}
\DoxyCodeLine{01458     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = getApplication()-\/>getCurrentXsheet()-\/>getXsheet();}
\DoxyCodeLine{01459     \textcolor{keywordtype}{int} col      = getApplication()-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{01460     \textcolor{keywordflow}{if} (xsh \&\& col >= 0) \{}
\DoxyCodeLine{01461       \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(os, col);}
\DoxyCodeLine{01462       \textcolor{keywordflow}{if} (!cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) fid = cell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}();}
\DoxyCodeLine{01463     \}}
\DoxyCodeLine{01464   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01465     fid = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_abb72e2ab0c1baeda0a8af3146003181d}{getFrameId}}(os);}
\DoxyCodeLine{01466 }
\DoxyCodeLine{01467   \textcolor{keywordflow}{if} (fid.isEmptyFrame()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01468 }
\DoxyCodeLine{01469   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi = sl-\/>getFrame(fid, \textcolor{keyword}{false});}
\DoxyCodeLine{01470   \textcolor{keywordflow}{if} (!vi) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01471 }
\DoxyCodeLine{01472   \textcolor{keywordtype}{int} strokeCount = vi-\/>getStrokeCount();}
\DoxyCodeLine{01473   \textcolor{keywordflow}{if} (!strokeCount) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01474 }
\DoxyCodeLine{01475   \textcolor{keywordflow}{if} (strokeIdx == -\/1) strokeIdx = cStrokeCount;}
\DoxyCodeLine{01476 }
\DoxyCodeLine{01477   \textcolor{keywordflow}{if} (strokeIdx >= strokeCount) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01478 }
\DoxyCodeLine{01479   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke = vi-\/>getStroke(strokeIdx);}
\DoxyCodeLine{01480   \textcolor{keywordflow}{if} (!stroke) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01481 }
\DoxyCodeLine{01482   stroke-\/>\mbox{\hyperlink{class_t_stroke_a35b789ac866cf1baf224710862294e1c}{changeDirection}}();}
\DoxyCodeLine{01483   sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a2d43337766628739707849f8808bf300}{setDirtyFlag}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01484   getViewer()-\/>\mbox{\hyperlink{class_t_tool_1_1_viewer_a3c78921157249891a6ec73eb94501d2a}{invalidateAll}}();}
\DoxyCodeLine{01485   m\_application-\/>getCurrentLevel()-\/>notifyLevelChange();}
\DoxyCodeLine{01486 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a6d9174a450482028d6b6b77018af98f4}\label{class_t_tool_a6d9174a450482028d6b6b77018af98f4}} 
\index{TTool@{TTool}!getApplication@{getApplication}}
\index{getApplication@{getApplication}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getApplication()}{getApplication()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_application}{TTool\+::\+Application}} $\ast$ TTool\+::get\+Application (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00597                                         \{}
\DoxyCodeLine{00598   \textcolor{keywordflow}{if} (m\_application == 0)}
\DoxyCodeLine{00599     assert(!\textcolor{stringliteral}{"{}you MUST call the TTool::setApplication function in the main of the program!"{}});}
\DoxyCodeLine{00600   \textcolor{keywordflow}{return} m\_application;}
\DoxyCodeLine{00601 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a7214525a3ae0cdcb0a0393e4dc4d3bf5}\label{class_t_tool_a7214525a3ae0cdcb0a0393e4dc4d3bf5}} 
\index{TTool@{TTool}!getColumnIndex@{getColumnIndex}}
\index{getColumnIndex@{getColumnIndex}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getColumnIndex()}{getColumnIndex()}}
{\footnotesize\ttfamily int TTool\+::get\+Column\+Index (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Returns the actual column index. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00583                           \{}
\DoxyCodeLine{00584   \textcolor{keywordflow}{if} (!m\_application) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00585   \textcolor{keywordflow}{return} m\_application-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{00586 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01598}{Skeleton\+Tool\+::add\+Context\+Menu\+Items()}}, and \mbox{\hyperlink{l01585}{Edit\+Tool\+::on\+Activate()}}.

\mbox{\Hypertarget{class_t_tool_a99eb4354e2dba454b7210c986015d577}\label{class_t_tool_a99eb4354e2dba454b7210c986015d577}} 
\index{TTool@{TTool}!getColumnMatrix@{getColumnMatrix}}
\index{getColumnMatrix@{getColumnMatrix}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getColumnMatrix()}{getColumnMatrix()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_affine}{TAffine}} TTool\+::get\+Column\+Matrix (\begin{DoxyParamCaption}\item[{int}]{index,  }\item[{int}]{frame = {\ttfamily -\/1} }\end{DoxyParamCaption}) const}

\begin{DoxyVerb}    Returns the matrix transformation of the stage object with column
\end{DoxyVerb}
 index equal to {\ttfamily index} and frame as the current frame. if frame = -\/1 then it uses the current frame \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_xsheet_abd766f516cac9898a2a952463618a9fe}{TXsheet\+::get\+Placement}}. 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00745                                                                \{}
\DoxyCodeLine{00746   \textcolor{keywordflow}{if} (!m\_application) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_affine}{TAffine}}();}
\DoxyCodeLine{00747 }
\DoxyCodeLine{00748   \mbox{\hyperlink{class_t_frame_handle}{TFrameHandle}} *fh = m\_application-\/>getCurrentFrame();}
\DoxyCodeLine{00749   \textcolor{keywordflow}{if} (fh-\/>isEditingLevel()) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_affine}{TAffine}}();}
\DoxyCodeLine{00750   \textcolor{keywordflow}{if} (frame < 0) frame = fh-\/>getFrame();}
\DoxyCodeLine{00751   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = m\_application-\/>getCurrentXsheet()-\/>getXsheet();}
\DoxyCodeLine{00752   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} columnObjId =}
\DoxyCodeLine{00753       (columnIndex >= 0)}
\DoxyCodeLine{00754           ? TStageObjectId::ColumnId(columnIndex)}
\DoxyCodeLine{00755           : TStageObjectId::CameraId(xsh-\/>getCameraColumnIndex());}
\DoxyCodeLine{00756   \mbox{\hyperlink{class_t_affine}{TAffine}} columnPlacement = xsh-\/>\mbox{\hyperlink{class_t_xsheet_abd766f516cac9898a2a952463618a9fe}{getPlacement}}(columnObjId, frame);}
\DoxyCodeLine{00757   \textcolor{keywordtype}{double} columnZ          = xsh-\/>\mbox{\hyperlink{class_t_xsheet_ac3cff0937663af24b324430b134ed8b2}{getZ}}(columnObjId, frame);}
\DoxyCodeLine{00758 }
\DoxyCodeLine{00759   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} cameraId = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a5dc925584e35e1678f5678b79c470959}{getStageObjectTree}}()-\/>\mbox{\hyperlink{class_t_stage_object_tree_a7d63ae5d60c3a3aacf5da58c108ac167}{getCurrentCameraId}}();}
\DoxyCodeLine{00760   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *camera    = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(cameraId);}
\DoxyCodeLine{00761   \mbox{\hyperlink{class_t_affine}{TAffine}} cameraPlacement = camera-\/>getPlacement(frame);}
\DoxyCodeLine{00762   \textcolor{keywordtype}{double} cameraZ          = camera-\/>\mbox{\hyperlink{class_t_stage_object_a52b1a3ec50ed35fbc07c9a3b64ecc21c}{getZ}}(frame);}
\DoxyCodeLine{00763 }
\DoxyCodeLine{00764   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *\textcolor{keywordtype}{object} = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(columnObjId);}
\DoxyCodeLine{00765   \mbox{\hyperlink{class_t_affine}{TAffine}} placement;}
\DoxyCodeLine{00766   \mbox{\hyperlink{class_t_stage_object_a0f219cbc4e42269c0fbd073a62253218}{TStageObject::perspective}}(placement, cameraPlacement, cameraZ,}
\DoxyCodeLine{00767                             columnPlacement, columnZ,}
\DoxyCodeLine{00768                             object-\/>\mbox{\hyperlink{class_t_stage_object_a5d01b3f25af51c058e46982ca047312d}{getGlobalNoScaleZ}}());}
\DoxyCodeLine{00769 }
\DoxyCodeLine{00770   \textcolor{keywordflow}{return} placement;}
\DoxyCodeLine{00771 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00508}{TStage\+Object\+Tree\+::get\+Current\+Camera\+Id()}}, \mbox{\hyperlink{l01443}{TStage\+Object\+::get\+Global\+No\+Scale\+Z()}}, \mbox{\hyperlink{l00555}{TXsheet\+::get\+Placement()}}, \mbox{\hyperlink{l00542}{TXsheet\+::get\+Stage\+Object()}}, \mbox{\hyperlink{l00549}{TXsheet\+::get\+Stage\+Object\+Tree()}}, \mbox{\hyperlink{l00562}{TXsheet\+::get\+Z()}}, \mbox{\hyperlink{l01423}{TStage\+Object\+::get\+Z()}}, and \mbox{\hyperlink{l01945}{TStage\+Object\+::perspective()}}.



Referenced by \mbox{\hyperlink{l00706}{get\+Current\+Column\+Matrix()}}.

\mbox{\Hypertarget{class_t_tool_a73c1b7f13eaea33e1d305636f44c4a64}\label{class_t_tool_a73c1b7f13eaea33e1d305636f44c4a64}} 
\index{TTool@{TTool}!getCurrentColumnMatrix@{getCurrentColumnMatrix}}
\index{getCurrentColumnMatrix@{getCurrentColumnMatrix}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getCurrentColumnMatrix()}{getCurrentColumnMatrix()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_affine}{TAffine}} TTool\+::get\+Current\+Column\+Matrix (\begin{DoxyParamCaption}\item[{int}]{frame = {\ttfamily -\/1} }\end{DoxyParamCaption}) const}

Returns the current column matrix transformation. if frame = -\/1 then it uses the current frame \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_xsheet_abd766f516cac9898a2a952463618a9fe}{TXsheet\+::get\+Placement}}. 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00706                                                      \{}
\DoxyCodeLine{00707   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_a99eb4354e2dba454b7210c986015d577}{getColumnMatrix}}(m\_application-\/>getCurrentColumn()-\/>getColumnIndex(),}
\DoxyCodeLine{00708                          frame);}
\DoxyCodeLine{00709 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00745}{get\+Column\+Matrix()}}.



Referenced by \mbox{\hyperlink{l00540}{invalidate()}}, and \mbox{\hyperlink{l00801}{update\+Matrix()}}.

\mbox{\Hypertarget{class_t_tool_a57b1120acc73e2127f81688301707177}\label{class_t_tool_a57b1120acc73e2127f81688301707177}} 
\index{TTool@{TTool}!getCurrentColumnParentMatrix@{getCurrentColumnParentMatrix}}
\index{getCurrentColumnParentMatrix@{getCurrentColumnParentMatrix}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getCurrentColumnParentMatrix()}{getCurrentColumnParentMatrix()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_affine}{TAffine}} TTool\+::get\+Current\+Column\+Parent\+Matrix (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Returns the current matrix transformation of the current stage object parent. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00713                                                   \{}
\DoxyCodeLine{00714   \textcolor{keywordflow}{if} (!m\_application) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_affine}{TAffine}}();}
\DoxyCodeLine{00715 }
\DoxyCodeLine{00716   \mbox{\hyperlink{class_t_frame_handle}{TFrameHandle}} *fh = m\_application-\/>getCurrentFrame();}
\DoxyCodeLine{00717   \textcolor{keywordflow}{if} (fh-\/>isEditingLevel()) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_affine}{TAffine}}();}
\DoxyCodeLine{00718   \textcolor{keywordtype}{int} frame       = fh-\/>getFrame();}
\DoxyCodeLine{00719   \textcolor{keywordtype}{int} columnIndex = m\_application-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{00720   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh    = m\_application-\/>getCurrentXsheet()-\/>getXsheet();}
\DoxyCodeLine{00721   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} parentId =}
\DoxyCodeLine{00722       xsh-\/>\mbox{\hyperlink{class_t_xsheet_a0a27744ce52cae25ec261a853a554cd1}{getStageObjectParent}}(TStageObjectId::ColumnId(columnIndex));}
\DoxyCodeLine{00723   \textcolor{keywordflow}{return} xsh-\/>\mbox{\hyperlink{class_t_xsheet_abd766f516cac9898a2a952463618a9fe}{getPlacement}}(parentId, frame);}
\DoxyCodeLine{00724 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00555}{TXsheet\+::get\+Placement()}}, and \mbox{\hyperlink{l00598}{TXsheet\+::get\+Stage\+Object\+Parent()}}.

\mbox{\Hypertarget{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}\label{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}} 
\index{TTool@{TTool}!getCurrentFid@{getCurrentFid}}
\index{getCurrentFid@{getCurrentFid}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getCurrentFid()}{getCurrentFid()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} TTool\+::get\+Current\+Fid (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Returns the number of the actual editing frame. 

frame {\ttfamily fid}; used to update images on the level view.

It can depend on the actual frame and the actual cell or on the current fid (editing level). In editing scene if the current cell is empty the method returns TFrame\+Id\+::\+NO\+\_\+\+FRAME. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00688                                     \{}
\DoxyCodeLine{00689   \textcolor{keywordflow}{if} (!m\_application) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_frame_id}{TFrameId}}();}
\DoxyCodeLine{00690 }
\DoxyCodeLine{00691   \mbox{\hyperlink{class_t_frame_handle}{TFrameHandle}} *fh = m\_application-\/>getCurrentFrame();}
\DoxyCodeLine{00692 }
\DoxyCodeLine{00693   \textcolor{keywordflow}{if} (fh-\/>isEditingLevel()) \textcolor{keywordflow}{return} fh-\/>getFid();}
\DoxyCodeLine{00694 }
\DoxyCodeLine{00695   \textcolor{keywordtype}{int} row = m\_application-\/>getCurrentFrame()-\/>getFrame();}
\DoxyCodeLine{00696   \textcolor{keywordtype}{int} col = m\_application-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{00697   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell =}
\DoxyCodeLine{00698       m\_application-\/>getCurrentXsheet()-\/>getXsheet()-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col);}
\DoxyCodeLine{00699   \textcolor{keywordflow}{if} (cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \textcolor{keywordflow}{return} TFrameId::NO\_FRAME;}
\DoxyCodeLine{00700 }
\DoxyCodeLine{00701   \textcolor{keywordflow}{return} cell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}();}
\DoxyCodeLine{00702 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00233}{TXsheet\+::get\+Cell()}}, \mbox{\hyperlink{l00120}{TXsh\+Cell\+::get\+Frame\+Id()}}, and \mbox{\hyperlink{l00078}{TXsh\+Cell\+::is\+Empty()}}.



Referenced by \mbox{\hyperlink{l00259}{Hook\+Tool\+::draw()}}, \mbox{\hyperlink{l00276}{Tracker\+Tool\+::draw()}}, \mbox{\hyperlink{l00510}{Finger\+Tool\+::finish\+Brush()}}, \mbox{\hyperlink{l00583}{Paint\+Brush\+Tool\+::finish\+Brush()}}, \mbox{\hyperlink{l01569}{Toonz\+Raster\+Brush\+Tool\+::finish\+Raster\+Brush()}}, \mbox{\hyperlink{l00540}{invalidate()}}, \mbox{\hyperlink{l01020}{Full\+Color\+Eraser\+Tool\+::on\+Image\+Changed()}}, \mbox{\hyperlink{l00950}{Eraser\+Tool\+::on\+Image\+Changed()}}, \mbox{\hyperlink{l02858}{Scene\+Viewer\+::on\+Level\+Switched()}}, \mbox{\hyperlink{l01991}{Fill\+Tool\+::on\+Property\+Changed()}}, \mbox{\hyperlink{l00731}{Tracker\+Tool\+::on\+Property\+Changed()}}, \mbox{\hyperlink{l01185}{Raster\+Selection\+::paste\+Selection()}}, and \mbox{\hyperlink{l00636}{Drag\+Selection\+Tool\+::\+Vector\+Deform\+Tool\+::transform\+Whole\+Level()}}.

\mbox{\Hypertarget{class_t_tool_a5decb470046ec60d32190494d270d52b}\label{class_t_tool_a5decb470046ec60d32190494d270d52b}} 
\index{TTool@{TTool}!getCurrentObjectParentMatrix@{getCurrentObjectParentMatrix}}
\index{getCurrentObjectParentMatrix@{getCurrentObjectParentMatrix}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getCurrentObjectParentMatrix()}{getCurrentObjectParentMatrix()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_affine}{TAffine}} TTool\+::get\+Current\+Object\+Parent\+Matrix (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00728                                                   \{}
\DoxyCodeLine{00729   \textcolor{keywordflow}{if} (!m\_application) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_affine}{TAffine}}();}
\DoxyCodeLine{00730 }
\DoxyCodeLine{00731   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = m\_application-\/>getCurrentXsheet()-\/>getXsheet();}
\DoxyCodeLine{00732   \textcolor{keywordtype}{int} frame    = m\_application-\/>getCurrentFrame()-\/>getFrame();}
\DoxyCodeLine{00733   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} currentObjectId =}
\DoxyCodeLine{00734       m\_application-\/>getCurrentObject()-\/>getObjectId();}
\DoxyCodeLine{00735   \textcolor{keywordflow}{if} (currentObjectId == TStageObjectId::NoneId) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_affine}{TAffine}}();}
\DoxyCodeLine{00736   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} parentId = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a0a27744ce52cae25ec261a853a554cd1}{getStageObjectParent}}(currentObjectId);}
\DoxyCodeLine{00737   \textcolor{keywordflow}{if} (parentId == TStageObjectId::NoneId)}
\DoxyCodeLine{00738     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_affine}{TAffine}}();}
\DoxyCodeLine{00739   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00740     \textcolor{keywordflow}{return} xsh-\/>\mbox{\hyperlink{class_t_xsheet_abd766f516cac9898a2a952463618a9fe}{getPlacement}}(parentId, frame);}
\DoxyCodeLine{00741 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a05dea1c094543fc4062c0b9988a38eae}\label{class_t_tool_a05dea1c094543fc4062c0b9988a38eae}} 
\index{TTool@{TTool}!getCurrentObjectParentMatrix2@{getCurrentObjectParentMatrix2}}
\index{getCurrentObjectParentMatrix2@{getCurrentObjectParentMatrix2}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getCurrentObjectParentMatrix2()}{getCurrentObjectParentMatrix2()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_affine}{TAffine}} TTool\+::get\+Current\+Object\+Parent\+Matrix2 (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00775                                                    \{}
\DoxyCodeLine{00776   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = m\_application;}
\DoxyCodeLine{00777   \mbox{\hyperlink{class_t_frame_handle}{TFrameHandle}} *fh        = app-\/>getCurrentFrame();}
\DoxyCodeLine{00778   \textcolor{keywordflow}{if} (fh-\/>isEditingLevel()) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_affine}{TAffine}}();}
\DoxyCodeLine{00779   \textcolor{keywordtype}{int} frame               = fh-\/>getFrame();}
\DoxyCodeLine{00780   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh            = app-\/>getCurrentXsheet()-\/>getXsheet();}
\DoxyCodeLine{00781   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} \textcolor{keywordtype}{id}       = app-\/>getCurrentObject()-\/>getObjectId();}
\DoxyCodeLine{00782   \textcolor{keywordtype}{double} objZ             = xsh-\/>\mbox{\hyperlink{class_t_xsheet_ac3cff0937663af24b324430b134ed8b2}{getZ}}(\textcolor{keywordtype}{id}, frame);}
\DoxyCodeLine{00783   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} parentId = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a0a27744ce52cae25ec261a853a554cd1}{getStageObjectParent}}(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00784   \textcolor{keywordflow}{if} (parentId == TStageObjectId::NoneId) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_affine}{TAffine}}();}
\DoxyCodeLine{00785   \textcolor{keywordtype}{id}                   = parentId;}
\DoxyCodeLine{00786   \mbox{\hyperlink{class_t_affine}{TAffine}} objPlacement = xsh-\/>\mbox{\hyperlink{class_t_xsheet_abd766f516cac9898a2a952463618a9fe}{getPlacement}}(\textcolor{keywordtype}{id}, frame);}
\DoxyCodeLine{00787 }
\DoxyCodeLine{00788   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} cameraId = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a5dc925584e35e1678f5678b79c470959}{getStageObjectTree}}()-\/>\mbox{\hyperlink{class_t_stage_object_tree_a7d63ae5d60c3a3aacf5da58c108ac167}{getCurrentCameraId}}();}
\DoxyCodeLine{00789   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *camera    = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(cameraId);}
\DoxyCodeLine{00790   \mbox{\hyperlink{class_t_affine}{TAffine}} cameraPlacement = camera-\/>getPlacement(frame);}
\DoxyCodeLine{00791   \textcolor{keywordtype}{double} cameraZ          = camera-\/>\mbox{\hyperlink{class_t_stage_object_a52b1a3ec50ed35fbc07c9a3b64ecc21c}{getZ}}(frame);}
\DoxyCodeLine{00792 }
\DoxyCodeLine{00793   \mbox{\hyperlink{class_t_affine}{TAffine}} placement;}
\DoxyCodeLine{00794   \mbox{\hyperlink{class_t_stage_object_a0f219cbc4e42269c0fbd073a62253218}{TStageObject::perspective}}(placement, cameraPlacement, cameraZ, objPlacement,}
\DoxyCodeLine{00795                             objZ, 0);}
\DoxyCodeLine{00796   \textcolor{keywordflow}{return} placement;}
\DoxyCodeLine{00797 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a1768a57b8b6d1480618fd923fad15f1d}\label{class_t_tool_a1768a57b8b6d1480618fd923fad15f1d}} 
\index{TTool@{TTool}!getCursorId@{getCursorId}}
\index{getCursorId@{getCursorId}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getCursorId()}{getCursorId()}}
{\footnotesize\ttfamily virtual int TTool\+::get\+Cursor\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Returns the type of cursor used by the tool. 

\begin{DoxySeeAlso}{See also}
For a list of cursor ids \mbox{\hyperlink{}{cursor.\+h}} 
\end{DoxySeeAlso}


Reimplemented in \mbox{\hyperlink{class_pinch_tool_a2dc5ad5048a1122d78de61faf3e38533}{Pinch\+Tool}}, \mbox{\hyperlink{class_control_point_editor_tool_a69ed52b4c54b1d7e4c3028471b011674}{Control\+Point\+Editor\+Tool}}, \mbox{\hyperlink{class_edit_tool_ac8768cdb1941d89c22ce6f19571681bf}{Edit\+Tool}}, \mbox{\hyperlink{class_fill_tool_a4fe37650c48440cd6c93947d97778054}{Fill\+Tool}}, \mbox{\hyperlink{class_finger_tool_a99100304e7ea16ce3227e669da65a387}{Finger\+Tool}}, \mbox{\hyperlink{class_full_color_brush_tool_a4fbcda46879cf5e63587eb6c877a7b70}{Full\+Color\+Brush\+Tool}}, \mbox{\hyperlink{class_full_color_eraser_tool_a7f281b08529187952932472d29ec6e5d}{Full\+Color\+Eraser\+Tool}}, \mbox{\hyperlink{class_full_color_fill_tool_af48488db0702690fd23eb7e30bf87391}{Full\+Color\+Fill\+Tool}}, \mbox{\hyperlink{class_geometric_tool_aac958521e872f88c5815b5632cfe1f18}{Geometric\+Tool}}, \mbox{\hyperlink{class_hook_tool_a9879a3067b86d59380e89bbda3670bdd}{Hook\+Tool}}, \mbox{\hyperlink{class_magnet_tool_a5416d153639cc56d842a9aee4ccd4230}{Magnet\+Tool}}, \mbox{\hyperlink{class_paint_brush_tool_a9052fe3ab44be95bfc3a9e539785e792}{Paint\+Brush\+Tool}}, \mbox{\hyperlink{class_plastic_tool_a15762671b2454062cd39fd52e0ee59a3}{Plastic\+Tool}}, \mbox{\hyperlink{class_pump_tool_a697fbddf89a86d399435758010870e12}{Pump\+Tool}}, \mbox{\hyperlink{class_raster_tape_tool_a2e787ac6decc204b024e9aa7b70093e1}{Raster\+Tape\+Tool}}, \mbox{\hyperlink{class_r_g_b_picker_tool_a3848986595c6427b76017f0293954cc8}{RGBPicker\+Tool}}, \mbox{\hyperlink{class_ruler_tool_ae591687b70428e7f83c512efc5d21d54}{Ruler\+Tool}}, \mbox{\hyperlink{class_selection_tool_a25e63648cac6b3e64f2f7051a511c958}{Selection\+Tool}}, \mbox{\hyperlink{class_shift_trace_tool_ac4ae96148da51a4373a16e789da6df78}{Shift\+Trace\+Tool}}, \mbox{\hyperlink{class_skeleton_tool_ab9934ce9e2dfcf8632262c8db7e4ab87}{Skeleton\+Tool}}, \mbox{\hyperlink{class_style_picker_tool_a8baecb9efd19d1cec43eef45f3ad9a24}{Style\+Picker\+Tool}}, \mbox{\hyperlink{class_toonz_raster_brush_tool_a304658ad28cdffe07ff3ff47540131ac}{Toonz\+Raster\+Brush\+Tool}}, \mbox{\hyperlink{class_toonz_vector_brush_tool_a8230bcdb0540b099a813b6ef5fd6f2fe}{Toonz\+Vector\+Brush\+Tool}}, \mbox{\hyperlink{class_tracker_tool_a7da6c28ea991a1f0ad982536c1d9aff9}{Tracker\+Tool}}, \mbox{\hyperlink{class_type_tool_a2a37ceae24fed6c6fbce7b8b4e3ab951}{Type\+Tool}}, \mbox{\hyperlink{class_eraser_tool_aebdb04386db322fe5627cb013c1a736b}{Eraser\+Tool}}, \mbox{\hyperlink{class_vector_selection_tool_a73c068a75466c5a626cd8a85a7375733}{Vector\+Selection\+Tool}}, \mbox{\hyperlink{class_vector_tape_tool_aaacebdee5d606d350ef4ffa3c198616e}{Vector\+Tape\+Tool}}, \mbox{\hyperlink{class_rotate_tool_ad999c8cf3f5afba31260b6064d03ff34}{Rotate\+Tool}}, \mbox{\hyperlink{class_camera_test_tool_a0bd480854dd0a813a265829bfcac6f28}{Camera\+Test\+Tool}}, and \mbox{\hyperlink{class_set_scan_cropbox_tool_a965586356b0cab3447992eadfcbb3b5e}{Set\+Scan\+Cropbox\+Tool}}.



Referenced by \mbox{\hyperlink{l03234}{Scene\+Viewer\+::invalidate\+Tool\+Status()}}, and \mbox{\hyperlink{l02914}{Scene\+Viewer\+::on\+Tool\+Changed()}}.

\mbox{\Hypertarget{class_t_tool_a85025fe6544609814a1672ded5847874}\label{class_t_tool_a85025fe6544609814a1672ded5847874}} 
\index{TTool@{TTool}!getFrame@{getFrame}}
\index{getFrame@{getFrame}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getFrame()}{getFrame()}}
{\footnotesize\ttfamily int TTool\+::get\+Frame (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Returns the actual frame in use. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00576                     \{}
\DoxyCodeLine{00577   \textcolor{keywordflow}{if} (!m\_application) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00578   \textcolor{keywordflow}{return} m\_application-\/>getCurrentFrame()-\/>getFrame();}
\DoxyCodeLine{00579 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01416}{Edit\+Tool\+::draw()}}, and \mbox{\hyperlink{l00259}{Hook\+Tool\+::draw()}}.

\mbox{\Hypertarget{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}\label{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}} 
\index{TTool@{TTool}!getImage@{getImage}}
\index{getImage@{getImage}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getImage()}{getImage()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_image}{TImage}} $\ast$ TTool\+::get\+Image (\begin{DoxyParamCaption}\item[{bool}]{to\+Be\+Modified,  }\item[{int}]{subsampling = {\ttfamily 0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Returns the image to be edited by the tool. 

The image returned by \mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{get\+Image()}} is either the one associated to \mbox{\hyperlink{class_t_tool_a158a4612dcff62a7f37e5fc3b47ed31c}{get\+Image\+Cell()}}, or the vector image corresponding to currently edited spline path. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00276                                                           \{}
\DoxyCodeLine{00277   assert(m\_application);}
\DoxyCodeLine{00278 }
\DoxyCodeLine{00279   \textcolor{keywordflow}{if} (m\_application-\/>getCurrentFrame()-\/>isPlaying())}
\DoxyCodeLine{00280     toBeModified =}
\DoxyCodeLine{00281         \textcolor{keyword}{false};  \textcolor{comment}{// In playback mode, you are not going to modify images}}
\DoxyCodeLine{00282                 \textcolor{comment}{// Probably useless -\/ tools are disabled when playing...}}
\DoxyCodeLine{00283   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} \&cell = \mbox{\hyperlink{class_t_tool_a158a4612dcff62a7f37e5fc3b47ed31c}{getImageCell}}();}
\DoxyCodeLine{00284   \textcolor{keywordflow}{if} (cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \{}
\DoxyCodeLine{00285     \mbox{\hyperlink{class_t_object_handle}{TObjectHandle}} *currentObject = m\_application-\/>getCurrentObject();}
\DoxyCodeLine{00286     \textcolor{keywordflow}{return} currentObject-\/>isSpline() ? currentObject-\/>getSplineImage()}
\DoxyCodeLine{00287                                      : (\mbox{\hyperlink{class_t_image}{TImage}} *)0;}
\DoxyCodeLine{00288   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00289     \textcolor{keywordflow}{return} cell.\mbox{\hyperlink{class_t_xsh_cell_a20b623d308bc09b820ec6b116516f564}{getImage}}(toBeModified, subsampling).getPointer();}
\DoxyCodeLine{00290 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00008}{TXsh\+Cell\+::get\+Image()}}, \mbox{\hyperlink{l00245}{get\+Image\+Cell()}}, and \mbox{\hyperlink{l00078}{TXsh\+Cell\+::is\+Empty()}}.



Referenced by \mbox{\hyperlink{l00414}{Pinch\+Tool\+::draw()}}, \mbox{\hyperlink{l00355}{Control\+Point\+Editor\+Tool\+::draw()}}, \mbox{\hyperlink{l02144}{Fill\+Tool\+::draw()}}, \mbox{\hyperlink{l00339}{Finger\+Tool\+::draw()}}, \mbox{\hyperlink{l00523}{Full\+Color\+Brush\+Tool\+::draw()}}, \mbox{\hyperlink{l00903}{Full\+Color\+Eraser\+Tool\+::draw()}}, \mbox{\hyperlink{l00259}{Hook\+Tool\+::draw()}}, \mbox{\hyperlink{l00400}{Magnet\+Tool\+::draw()}}, \mbox{\hyperlink{l00398}{Paint\+Brush\+Tool\+::draw()}}, \mbox{\hyperlink{l00159}{Pump\+Tool\+::draw()}}, \mbox{\hyperlink{l01869}{Toonz\+Raster\+Brush\+Tool\+::draw()}}, \mbox{\hyperlink{l01479}{Toonz\+Vector\+Brush\+Tool\+::draw()}}, \mbox{\hyperlink{l00887}{Type\+Tool\+::draw()}}, \mbox{\hyperlink{l00448}{Eraser\+Tool\+::draw()}}, \mbox{\hyperlink{l00278}{Vector\+Tape\+Tool\+::draw()}}, \mbox{\hyperlink{l00510}{Finger\+Tool\+::finish\+Brush()}}, \mbox{\hyperlink{l00583}{Paint\+Brush\+Tool\+::finish\+Brush()}}, \mbox{\hyperlink{l01569}{Toonz\+Raster\+Brush\+Tool\+::finish\+Raster\+Brush()}}, \mbox{\hyperlink{l00226}{Style\+Picker\+Tool\+::get\+Cursor\+Id()}}, \mbox{\hyperlink{l01062}{Eraser\+Tool\+::left\+Button\+Double\+Click()}}, \mbox{\hyperlink{l02270}{Fill\+Tool\+::on\+Activate()}}, \mbox{\hyperlink{l01185}{Geometric\+Tool\+::on\+Activate()}}, \mbox{\hyperlink{l00534}{Pump\+Tool\+::on\+Deactivate()}}, \mbox{\hyperlink{l01676}{Eraser\+Tool\+::on\+Deactivate()}}, \mbox{\hyperlink{l00877}{Control\+Point\+Editor\+Tool\+::on\+Enter()}}, \mbox{\hyperlink{l00466}{Finger\+Tool\+::on\+Enter()}}, \mbox{\hyperlink{l01098}{Full\+Color\+Eraser\+Tool\+::on\+Enter()}}, \mbox{\hyperlink{l01240}{Geometric\+Tool\+::on\+Enter()}}, \mbox{\hyperlink{l00158}{Magnet\+Tool\+::on\+Enter()}}, \mbox{\hyperlink{l00539}{Paint\+Brush\+Tool\+::on\+Enter()}}, \mbox{\hyperlink{l00145}{Pump\+Tool\+::on\+Enter()}}, \mbox{\hyperlink{l01916}{Toonz\+Raster\+Brush\+Tool\+::on\+Enter()}}, \mbox{\hyperlink{l01547}{Toonz\+Vector\+Brush\+Tool\+::on\+Enter()}}, \mbox{\hyperlink{l00952}{Control\+Point\+Editor\+Tool\+::on\+Image\+Changed()}}, \mbox{\hyperlink{l02112}{Fill\+Tool\+::on\+Image\+Changed()}}, \mbox{\hyperlink{l01991}{Fill\+Tool\+::on\+Property\+Changed()}}, and \mbox{\hyperlink{l01266}{Geometric\+Tool\+::on\+Property\+Changed()}}.

\mbox{\Hypertarget{class_t_tool_a158a4612dcff62a7f37e5fc3b47ed31c}\label{class_t_tool_a158a4612dcff62a7f37e5fc3b47ed31c}} 
\index{TTool@{TTool}!getImageCell@{getImageCell}}
\index{getImageCell@{getImageCell}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getImageCell()}{getImageCell()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsh_cell}{TXsh\+Cell}} TTool\+::get\+Image\+Cell (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Returns the level-\/frame pair to be edited by the tool. 

\begin{DoxyWarning}{Warning}
In case there is no level currently selected, {\itshape or the object to be edited is a spline path}, the xsheet cell returned by \mbox{\hyperlink{class_t_tool_a158a4612dcff62a7f37e5fc3b47ed31c}{get\+Image\+Cell()}} is empty. 
\end{DoxyWarning}

\begin{DoxyCode}{0}
\DoxyCodeLine{00245                              \{}
\DoxyCodeLine{00246   assert(m\_application);}
\DoxyCodeLine{00247 }
\DoxyCodeLine{00248   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} result;}
\DoxyCodeLine{00249 }
\DoxyCodeLine{00250   \mbox{\hyperlink{class_t_frame_handle}{TFrameHandle}} *currentFrame    = m\_application-\/>getCurrentFrame();}
\DoxyCodeLine{00251   \mbox{\hyperlink{class_t_xsh_level_handle}{TXshLevelHandle}} *currentLevel = m\_application-\/>getCurrentLevel();}
\DoxyCodeLine{00252 }
\DoxyCodeLine{00253   \textcolor{keywordflow}{if} (currentFrame-\/>isEditingLevel()) \{}
\DoxyCodeLine{00254     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = currentLevel-\/>getLevel()) \{}
\DoxyCodeLine{00255       \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = xl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_aac1fd1d3ecf0778b8ee139c9119fcdef}{getSimpleLevel}}()) \{}
\DoxyCodeLine{00256         result.m\_level   = xl;}
\DoxyCodeLine{00257         result.m\_frameId = currentFrame-\/>getFid();}
\DoxyCodeLine{00258       \}}
\DoxyCodeLine{00259     \}}
\DoxyCodeLine{00260   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00261     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = m\_application-\/>getCurrentXsheet()-\/>getXsheet()) \{}
\DoxyCodeLine{00262       \textcolor{keywordflow}{if} (!m\_application-\/>getCurrentObject()-\/>isSpline()) \{}
\DoxyCodeLine{00263         \textcolor{keywordtype}{int} row = currentFrame-\/>getFrame();}
\DoxyCodeLine{00264         \textcolor{keywordtype}{int} col = m\_application-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{00265 }
\DoxyCodeLine{00266         result = xsh-\/>getCell(row, col);}
\DoxyCodeLine{00267       \}}
\DoxyCodeLine{00268     \}}
\DoxyCodeLine{00269   \}}
\DoxyCodeLine{00270 }
\DoxyCodeLine{00271   \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{00272 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00092}{TXsh\+Simple\+Level\+::get\+Simple\+Level()}}.



Referenced by \mbox{\hyperlink{l00276}{get\+Image()}}.

\mbox{\Hypertarget{class_t_tool_ad66fa5cefa74ee84dd3140e8e2b8336b}\label{class_t_tool_ad66fa5cefa74ee84dd3140e8e2b8336b}} 
\index{TTool@{TTool}!getMatrix@{getMatrix}}
\index{getMatrix@{getMatrix}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getMatrix()}{getMatrix()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_affine}{TAffine}} \& TTool\+::get\+Matrix (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00469 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_a3bf7058680c3aef9a5584a7f71351757}{m\_matrix}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a679eddd99e9cb717d1b36eea5d7e7bb1}\label{class_t_tool_a679eddd99e9cb717d1b36eea5d7e7bb1}} 
\index{TTool@{TTool}!getName@{getName}}
\index{getName@{getName}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getName()}{getName()}}
{\footnotesize\ttfamily std\+::string TTool\+::get\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00346 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_ac92abce57c7c53b5b29847144c571fb1}{m\_name}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a25b57b82dfac131d9d6405e07fbd98b4}\label{class_t_tool_a25b57b82dfac131d9d6405e07fbd98b4}} 
\index{TTool@{TTool}!getObjectId@{getObjectId}}
\index{getObjectId@{getObjectId}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getObjectId()}{getObjectId()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} TTool\+::get\+Object\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Returns a pointer to the actual stage object. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00590                                         \{}
\DoxyCodeLine{00591   \textcolor{keywordflow}{if} (!m\_application) \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}}();}
\DoxyCodeLine{00592   \textcolor{keywordflow}{return} m\_application-\/>getCurrentObject()-\/>getObjectId();}
\DoxyCodeLine{00593 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01416}{Edit\+Tool\+::draw()}}, and \mbox{\hyperlink{l01585}{Edit\+Tool\+::on\+Activate()}}.

\mbox{\Hypertarget{class_t_tool_a1f5ac0f1e3809fce027e10028a3063a7}\label{class_t_tool_a1f5ac0f1e3809fce027e10028a3063a7}} 
\index{TTool@{TTool}!getPixelSize@{getPixelSize}}
\index{getPixelSize@{getPixelSize}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getPixelSize()}{getPixelSize()}}
{\footnotesize\ttfamily double TTool\+::get\+Pixel\+Size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00239                                  \{}
\DoxyCodeLine{00240   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_a66f61f998b655c1c917ee63a595657c6}{m\_viewer}} ? \mbox{\hyperlink{class_t_tool_a66f61f998b655c1c917ee63a595657c6}{m\_viewer}}-\/>\mbox{\hyperlink{class_t_tool_1_1_viewer_a0e87a68354646cc8c05128437b7df35d}{getPixelSize}}() : 1.0;}
\DoxyCodeLine{00241 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a095bfe8d3690175e39c188ad6246d560}\label{class_t_tool_a095bfe8d3690175e39c188ad6246d560}} 
\index{TTool@{TTool}!getProperties@{getProperties}}
\index{getProperties@{getProperties}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getProperties()}{getProperties()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ TTool\+::get\+Properties (\begin{DoxyParamCaption}\item[{int}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00423 \{ \textcolor{keywordflow}{return} 0; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a84779988b40987971c0cbf3699db3b90}\label{class_t_tool_a84779988b40987971c0cbf3699db3b90}} 
\index{TTool@{TTool}!getSelectedFrames@{getSelectedFrames}}
\index{getSelectedFrames@{getSelectedFrames}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getSelectedFrames()}{getSelectedFrames()}}
{\footnotesize\ttfamily static const std\+::set$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \& TTool\+::get\+Selected\+Frames (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00525                                                      \{}
\DoxyCodeLine{00526     \textcolor{keywordflow}{return} m\_selectedFrames;}
\DoxyCodeLine{00527   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_add40ff8dd3dd04ed3ab5a259ed53fb85}\label{class_t_tool_add40ff8dd3dd04ed3ab5a259ed53fb85}} 
\index{TTool@{TTool}!getSelection@{getSelection}}
\index{getSelection@{getSelection}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getSelection()}{getSelection()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{class_t_selection}{TSelection}} $\ast$ TTool\+::get\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Returns a pointer to the tool selection. 



Reimplemented in \mbox{\hyperlink{class_raster_selection_tool_a9a464e45100ead00f947d1700431c384}{Raster\+Selection\+Tool}}, \mbox{\hyperlink{class_vector_selection_tool_a8401bdd71bef9790c20e2512b7a98e0a}{Vector\+Selection\+Tool}}, and \mbox{\hyperlink{class_selection_tool_a8041c0371ff11a50bc4165812fa64d8a}{Selection\+Tool}}.

\mbox{\Hypertarget{class_t_tool_af8760a85b8fa1d81a04f058b8d4396b0}\label{class_t_tool_af8760a85b8fa1d81a04f058b8d4396b0}} 
\index{TTool@{TTool}!getTargetType@{getTargetType}}
\index{getTargetType@{getTargetType}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getTargetType()}{getTargetType()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4}{Tool\+Target\+Type}} TTool\+::get\+Target\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00344 \{ \textcolor{keywordflow}{return} (\mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4}{ToolTargetType}})\mbox{\hyperlink{class_t_tool_ad84e5837b3ed638e3e73373c3195a589}{m\_targetType}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_ac99234acd256aa0adee5095bc629d793}\label{class_t_tool_ac99234acd256aa0adee5095bc629d793}} 
\index{TTool@{TTool}!getTool@{getTool}}
\index{getTool@{getTool}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getTool()}{getTool()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_tool}{TTool}} $\ast$ TTool\+::get\+Tool (\begin{DoxyParamCaption}\item[{std\+::string}]{tool\+Name,  }\item[{\mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4}{Tool\+Target\+Type}}}]{target\+Type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00181                                                                    \{}
\DoxyCodeLine{00182   \textcolor{keywordflow}{if} (!toolTable) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00183   ToolTable::iterator it =}
\DoxyCodeLine{00184       toolTable-\/>find(std::make\_pair(toolName, targetType));}
\DoxyCodeLine{00185   \textcolor{keywordflow}{if} (it == toolTable-\/>end()) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00186   \textcolor{keywordflow}{return} it-\/>second;}
\DoxyCodeLine{00187 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_ad7edbb0cd6c20c371965510fa8d0811f}\label{class_t_tool_ad7edbb0cd6c20c371965510fa8d0811f}} 
\index{TTool@{TTool}!getViewer@{getViewer}}
\index{getViewer@{getViewer}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getViewer()}{getViewer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_tool_1_1_viewer}{Viewer}} $\ast$ TTool\+::get\+Viewer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00360 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_a66f61f998b655c1c917ee63a595657c6}{m\_viewer}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a8716e1462da359f4902c044a79f2d40d}\label{class_t_tool_a8716e1462da359f4902c044a79f2d40d}} 
\index{TTool@{TTool}!getXsheet@{getXsheet}}
\index{getXsheet@{getXsheet}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{getXsheet()}{getXsheet()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$ TTool\+::get\+Xsheet (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Returns a pointer to the actual Xsheet. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00569                                 \{}
\DoxyCodeLine{00570   \textcolor{keywordflow}{if} (!m\_application) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00571   \textcolor{keywordflow}{return} m\_application-\/>getCurrentXsheet()-\/>getXsheet();}
\DoxyCodeLine{00572 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01416}{Edit\+Tool\+::draw()}}, \mbox{\hyperlink{l00259}{Hook\+Tool\+::draw()}}, \mbox{\hyperlink{l01428}{Skeleton\+Tool\+::draw()}}, and \mbox{\hyperlink{l01185}{Raster\+Selection\+::paste\+Selection()}}.

\mbox{\Hypertarget{class_t_tool_a3e791336c642542c5648aa8ea86e2348}\label{class_t_tool_a3e791336c642542c5648aa8ea86e2348}} 
\index{TTool@{TTool}!invalidate@{invalidate}}
\index{invalidate@{invalidate}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{invalidate()}{invalidate()}}
{\footnotesize\ttfamily void TTool\+::invalidate (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect = {\ttfamily \mbox{\hyperlink{class_t_rect_t}{TRectD}}()} }\end{DoxyParamCaption})}

Causes the refreshing of the {\bfseries{rect}} portion of the viewer. If rect is empty all viewer is refreshed. {\bfseries{rect}} must be in image coordinate. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00540                                          \{}
\DoxyCodeLine{00541   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_tool_a66f61f998b655c1c917ee63a595657c6}{m\_viewer}}) \{}
\DoxyCodeLine{00542     \textcolor{keywordflow}{if} (rect.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}())}
\DoxyCodeLine{00543       \mbox{\hyperlink{class_t_tool_a66f61f998b655c1c917ee63a595657c6}{m\_viewer}}-\/>\mbox{\hyperlink{class_t_tool_1_1_viewer_a4e256660e14db34f8b1d3d74b62e8851}{GLInvalidateAll}}();}
\DoxyCodeLine{00544     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00545       \mbox{\hyperlink{class_t_point_t}{TPointD}} dpiScale(1, 1);}
\DoxyCodeLine{00546       \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl =}
\DoxyCodeLine{00547           getApplication()-\/>getCurrentLevel()-\/>getSimpleLevel();}
\DoxyCodeLine{00548       \textcolor{keywordflow}{if} (sl) dpiScale = getCurrentDpiScale(sl, \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}());}
\DoxyCodeLine{00549       \mbox{\hyperlink{class_t_tool_a66f61f998b655c1c917ee63a595657c6}{m\_viewer}}-\/>\mbox{\hyperlink{class_t_tool_1_1_viewer_a3ca66eeb722bff291bc1d0d5463a706b}{GLInvalidateRect}}(\mbox{\hyperlink{class_t_tool_a73c1b7f13eaea33e1d305636f44c4a64}{getCurrentColumnMatrix}}() *}
\DoxyCodeLine{00550                                  \mbox{\hyperlink{class_t_scale}{TScale}}(dpiScale.x, dpiScale.y) * rect);}
\DoxyCodeLine{00551     \}}
\DoxyCodeLine{00552   \}}
\DoxyCodeLine{00553 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00706}{get\+Current\+Column\+Matrix()}}, \mbox{\hyperlink{l00688}{get\+Current\+Fid()}}, \mbox{\hyperlink{class_t_tool_1_1_viewer_a4e256660e14db34f8b1d3d74b62e8851}{TTool\+::\+Viewer\+::\+GLInvalidate\+All()}}, \mbox{\hyperlink{class_t_tool_1_1_viewer_a3ca66eeb722bff291bc1d0d5463a706b}{TTool\+::\+Viewer\+::\+GLInvalidate\+Rect()}}, \mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{TRect\+T$<$ T $>$\+::is\+Empty()}}, and \mbox{\hyperlink{l00555}{m\+\_\+viewer}}.



Referenced by \mbox{\hyperlink{l00749}{Raster\+Tape\+Tool\+::close\+Polyline()}}, \mbox{\hyperlink{l00510}{Finger\+Tool\+::finish\+Brush()}}, \mbox{\hyperlink{l00583}{Paint\+Brush\+Tool\+::finish\+Brush()}}, \mbox{\hyperlink{l01569}{Toonz\+Raster\+Brush\+Tool\+::finish\+Raster\+Brush()}}, \mbox{\hyperlink{l01062}{Eraser\+Tool\+::left\+Button\+Double\+Click()}}, \mbox{\hyperlink{l00534}{Pump\+Tool\+::on\+Deactivate()}}, \mbox{\hyperlink{l00385}{Pinch\+Tool\+::on\+Image\+Changed()}}, \mbox{\hyperlink{l01107}{Geometric\+Tool\+::on\+Image\+Changed()}}, \mbox{\hyperlink{l00112}{Hook\+Tool\+::on\+Image\+Changed()}}, \mbox{\hyperlink{l00094}{Skeleton\+Tool\+::on\+Image\+Changed()}}, \mbox{\hyperlink{l00369}{Finger\+Tool\+::on\+Property\+Changed()}}, \mbox{\hyperlink{l00954}{Full\+Color\+Eraser\+Tool\+::on\+Property\+Changed()}}, \mbox{\hyperlink{l00452}{Magnet\+Tool\+::on\+Property\+Changed()}}, \mbox{\hyperlink{l00428}{Paint\+Brush\+Tool\+::on\+Property\+Changed()}}, \mbox{\hyperlink{l00274}{Skeleton\+Tool\+::on\+Property\+Changed()}}, \mbox{\hyperlink{l01991}{Toonz\+Raster\+Brush\+Tool\+::on\+Property\+Changed()}}, \mbox{\hyperlink{l00731}{Tracker\+Tool\+::on\+Property\+Changed()}}, \mbox{\hyperlink{l01130}{Eraser\+Tool\+::on\+Property\+Changed()}}, \mbox{\hyperlink{l00290}{Full\+Color\+Brush\+Tool\+::pre\+Left\+Button\+Down()}}, \mbox{\hyperlink{l01226}{Toonz\+Raster\+Brush\+Tool\+::pre\+Left\+Button\+Down()}}, and \mbox{\hyperlink{l00655}{Toonz\+Vector\+Brush\+Tool\+::pre\+Left\+Button\+Down()}}.

\mbox{\Hypertarget{class_t_tool_a6225a72c8bc7ad1ad6eff6b81ac6b0a6}\label{class_t_tool_a6225a72c8bc7ad1ad6eff6b81ac6b0a6}} 
\index{TTool@{TTool}!isActive@{isActive}}
\index{isActive@{isActive}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{isActive()}{isActive()}}
{\footnotesize\ttfamily bool TTool\+::is\+Active (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Used to know if a tool is active, (used in Text\+Tool only). 

\mbox{\Hypertarget{class_t_tool_a59fe3fb20e44f3c167190ebc8901ca31}\label{class_t_tool_a59fe3fb20e44f3c167190ebc8901ca31}} 
\index{TTool@{TTool}!isColumnLocked@{isColumnLocked}}
\index{isColumnLocked@{isColumnLocked}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{isColumnLocked()}{isColumnLocked()}}
{\footnotesize\ttfamily bool TTool\+::is\+Column\+Locked (\begin{DoxyParamCaption}\item[{int}]{column\+Index }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00818                                                 \{}
\DoxyCodeLine{00819   \textcolor{keywordflow}{if} (columnIndex < 0) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00820   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh       = \mbox{\hyperlink{class_t_tool_a8716e1462da359f4902c044a79f2d40d}{getXsheet}}();}
\DoxyCodeLine{00821   \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(columnIndex);}
\DoxyCodeLine{00822   \textcolor{keywordflow}{if} (!column) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00823   \textcolor{keywordflow}{return} column-\/>isLocked();}
\DoxyCodeLine{00824 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a7faf10efcd418f584a15907d88715566}\label{class_t_tool_a7faf10efcd418f584a15907d88715566}} 
\index{TTool@{TTool}!isDragging@{isDragging}}
\index{isDragging@{isDragging}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{isDragging()}{isDragging()}}
{\footnotesize\ttfamily virtual bool TTool\+::is\+Dragging (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00522 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \};}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a19efb128489874d80fb364c613fbf64b}\label{class_t_tool_a19efb128489874d80fb364c613fbf64b}} 
\index{TTool@{TTool}!isEnabled@{isEnabled}}
\index{isEnabled@{isEnabled}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{isEnabled()}{isEnabled()}}
{\footnotesize\ttfamily bool TTool\+::is\+Enabled (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00507 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_a3552ce52afc39fffcab0492daf72ed16}{m\_enabled}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a28f722eda896df0fd6b19b68ec99021e}\label{class_t_tool_a28f722eda896df0fd6b19b68ec99021e}} 
\index{TTool@{TTool}!isEventAcceptable@{isEventAcceptable}}
\index{isEventAcceptable@{isEventAcceptable}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{isEventAcceptable()}{isEventAcceptable()}}
{\footnotesize\ttfamily virtual bool TTool\+::is\+Event\+Acceptable (\begin{DoxyParamCaption}\item[{QEvent $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00445 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a767b49f02ae01193892a18adb2f7e740}\label{class_t_tool_a767b49f02ae01193892a18adb2f7e740}} 
\index{TTool@{TTool}!isPencilModeActive@{isPencilModeActive}}
\index{isPencilModeActive@{isPencilModeActive}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{isPencilModeActive()}{isPencilModeActive()}}
{\footnotesize\ttfamily virtual bool TTool\+::is\+Pencil\+Mode\+Active (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Reimplemented in \mbox{\hyperlink{class_toonz_raster_brush_tool_a98e19cb6ab1d05345e02efd693d3fdb8}{Toonz\+Raster\+Brush\+Tool}}, and \mbox{\hyperlink{class_toonz_vector_brush_tool_ac39063e05436a5ef7ed23bd493fc7949}{Toonz\+Vector\+Brush\+Tool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00519 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a9b6e629deb25a2c0903d3d82a5f5599c}\label{class_t_tool_a9b6e629deb25a2c0903d3d82a5f5599c}} 
\index{TTool@{TTool}!isPicking@{isPicking}}
\index{isPicking@{isPicking}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{isPicking()}{isPicking()}}
{\footnotesize\ttfamily bool TTool\+::is\+Picking (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00375 \{ \textcolor{keywordflow}{return} m\_picking; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a3f577edff4e26b67cfdbfb7308d16389}\label{class_t_tool_a3f577edff4e26b67cfdbfb7308d16389}} 
\index{TTool@{TTool}!keyDown@{keyDown}}
\index{keyDown@{keyDown}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{keyDown()}{keyDown()}}
{\footnotesize\ttfamily virtual bool TTool\+::key\+Down (\begin{DoxyParamCaption}\item[{QKey\+Event $\ast$}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00392 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_adb34d1b5a012f8910c7f62aa291d2d46}\label{class_t_tool_adb34d1b5a012f8910c7f62aa291d2d46}} 
\index{TTool@{TTool}!leftButtonDoubleClick@{leftButtonDoubleClick}}
\index{leftButtonDoubleClick@{leftButtonDoubleClick}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDoubleClick()}{leftButtonDoubleClick()}}
{\footnotesize\ttfamily virtual void TTool\+::left\+Button\+Double\+Click (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Reimplemented in \mbox{\hyperlink{class_eraser_tool_a9b2fccbc45990f9a5388ddad938c9845}{Eraser\+Tool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00390 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a12190be0dcb28718b40ae42c93df381b}\label{class_t_tool_a12190be0dcb28718b40ae42c93df381b}} 
\index{TTool@{TTool}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily virtual void TTool\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00387 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a0b3e51fe9fdadc716847b0248f74a4b5}\label{class_t_tool_a0b3e51fe9fdadc716847b0248f74a4b5}} 
\index{TTool@{TTool}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily virtual void TTool\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00388 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a740506b9414c8364aaa47de259ecb16b}\label{class_t_tool_a740506b9414c8364aaa47de259ecb16b}} 
\index{TTool@{TTool}!leftButtonUp@{leftButtonUp}}
\index{leftButtonUp@{leftButtonUp}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{leftButtonUp()}{leftButtonUp()}}
{\footnotesize\ttfamily virtual void TTool\+::left\+Button\+Up (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00389 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_acb0d5ee41c28fe1f6c3719a1c12353b5}\label{class_t_tool_acb0d5ee41c28fe1f6c3719a1c12353b5}} 
\index{TTool@{TTool}!mouseMove@{mouseMove}}
\index{mouseMove@{mouseMove}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{mouseMove()}{mouseMove()}}
{\footnotesize\ttfamily virtual void TTool\+::mouse\+Move (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00386 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_abd1824e9b49705c534e0a773305294c4}\label{class_t_tool_abd1824e9b49705c534e0a773305294c4}} 
\index{TTool@{TTool}!notifyImageChanged@{notifyImageChanged}}
\index{notifyImageChanged@{notifyImageChanged}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{notifyImageChanged()}{notifyImageChanged()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void TTool\+::notify\+Image\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Notifies changes on the actual image; used to update

Notify change of current image\+: update icon and notify level change. If current object is a spline commit spline changed. If current mode is Editing\+Level touch current frame. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00609                                \{}
\DoxyCodeLine{00610   \mbox{\hyperlink{class_t_tool_aaf1e021290e74c1b085e4b095668e1ed}{onImageChanged}}();}
\DoxyCodeLine{00611 }
\DoxyCodeLine{00612   \textcolor{keywordflow}{if} (!m\_application) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00613 }
\DoxyCodeLine{00614   m\_application-\/>getCurrentScene()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{00615   \textcolor{keywordflow}{if} (m\_application-\/>getCurrentFrame()-\/>isEditingLevel()) \{}
\DoxyCodeLine{00616     \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = m\_application-\/>getCurrentLevel()-\/>getLevel();}
\DoxyCodeLine{00617     \textcolor{keywordflow}{if} (!xl) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00618     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{00619     \textcolor{keywordflow}{if} (!sl) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00620     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = m\_application-\/>getCurrentFrame()-\/>getFid();}
\DoxyCodeLine{00621     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a3c20a8d11037048322d2035b0f286209}{touchFrame}}(fid);}
\DoxyCodeLine{00622     \textcolor{comment}{// sl-\/>setDirtyFlag(true);}}
\DoxyCodeLine{00623     IconGenerator::instance()-\/>invalidate(sl, fid);}
\DoxyCodeLine{00624     IconGenerator::instance()-\/>invalidateSceneIcon();}
\DoxyCodeLine{00625   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00626     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = m\_application-\/>getCurrentXsheet()-\/>getXsheet();}
\DoxyCodeLine{00627     \textcolor{keywordflow}{if} (!xsh) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00628 }
\DoxyCodeLine{00629     \mbox{\hyperlink{class_t_object_handle}{TObjectHandle}} *currentObject = m\_application-\/>getCurrentObject();}
\DoxyCodeLine{00630 }
\DoxyCodeLine{00631     \textcolor{keywordflow}{if} (currentObject-\/>isSpline()) \{}
\DoxyCodeLine{00632       m\_application-\/>getCurrentObject()-\/>commitSplineChanges();}
\DoxyCodeLine{00633       \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *pegbar = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(currentObject-\/>getObjectId());}
\DoxyCodeLine{00634       IconGenerator::instance()-\/>invalidate(pegbar-\/>\mbox{\hyperlink{class_t_stage_object_a425cb2dbcefe6ba4e288e1e8bdd16f72}{getSpline}}());}
\DoxyCodeLine{00635     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00636       \textcolor{keywordtype}{int} row = m\_application-\/>getCurrentFrame()-\/>getFrame();}
\DoxyCodeLine{00637       \textcolor{keywordtype}{int} col = m\_application-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{00638       \textcolor{keywordflow}{if} (col < 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00639       \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell       = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col);}
\DoxyCodeLine{00640       \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = cell.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{00641       \textcolor{keywordflow}{if} (sl) \{}
\DoxyCodeLine{00642         IconGenerator::instance()-\/>invalidate(sl, cell.m\_frameId);}
\DoxyCodeLine{00643         sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a3c20a8d11037048322d2035b0f286209}{touchFrame}}(cell.m\_frameId);}
\DoxyCodeLine{00644         IconGenerator::instance()-\/>invalidateSceneIcon();}
\DoxyCodeLine{00645       \}}
\DoxyCodeLine{00646     \}}
\DoxyCodeLine{00647   \}}
\DoxyCodeLine{00648   m\_application-\/>getCurrentLevel()-\/>notifyLevelChange();}
\DoxyCodeLine{00649 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00233}{TXsheet\+::get\+Cell()}}, \mbox{\hyperlink{l00095}{TXsh\+Level\+::get\+Simple\+Level()}}, \mbox{\hyperlink{l00019}{TXsh\+Cell\+::get\+Simple\+Level()}}, \mbox{\hyperlink{l00650}{TStage\+Object\+::get\+Spline()}}, \mbox{\hyperlink{l00542}{TXsheet\+::get\+Stage\+Object()}}, \mbox{\hyperlink{l00403}{on\+Image\+Changed()}}, and \mbox{\hyperlink{l00330}{TXsh\+Simple\+Level\+::touch\+Frame()}}.



Referenced by \mbox{\hyperlink{l01069}{Raster\+Selection\+::delete\+Selection()}}, \mbox{\hyperlink{l00510}{Finger\+Tool\+::finish\+Brush()}}, \mbox{\hyperlink{l00583}{Paint\+Brush\+Tool\+::finish\+Brush()}}, \mbox{\hyperlink{l01569}{Toonz\+Raster\+Brush\+Tool\+::finish\+Raster\+Brush()}}, \mbox{\hyperlink{l01062}{Eraser\+Tool\+::left\+Button\+Double\+Click()}}, \mbox{\hyperlink{l01020}{Raster\+Selection\+::make\+Floating()}}, \mbox{\hyperlink{l01991}{Fill\+Tool\+::on\+Property\+Changed()}}, \mbox{\hyperlink{l00496}{Raster\+Tape\+Tool\+::on\+Property\+Changed()}}, \mbox{\hyperlink{l00242}{Vector\+Tape\+Tool\+::on\+Property\+Changed()}}, \mbox{\hyperlink{l01037}{Raster\+Selection\+::paste\+Floating\+Selection()}}, and \mbox{\hyperlink{l00636}{Drag\+Selection\+Tool\+::\+Vector\+Deform\+Tool\+::transform\+Whole\+Level()}}.

\mbox{\Hypertarget{class_t_tool_a40890a3af608b9bfeb144505fd38853d}\label{class_t_tool_a40890a3af608b9bfeb144505fd38853d}} 
\index{TTool@{TTool}!notifyImageChanged@{notifyImageChanged}}
\index{notifyImageChanged@{notifyImageChanged}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{notifyImageChanged()}{notifyImageChanged()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void TTool\+::notify\+Image\+Changed (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} \&}]{fid }\end{DoxyParamCaption})}



images on the level view. 

Notifies changes on the

Notify change of image in {\bfseries{fid\+:}} update icon and notify level change. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00655                                                   \{}
\DoxyCodeLine{00656   \mbox{\hyperlink{class_t_tool_aaf1e021290e74c1b085e4b095668e1ed}{onImageChanged}}();}
\DoxyCodeLine{00657 }
\DoxyCodeLine{00658   \textcolor{keywordflow}{if} (!m\_application) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00659 }
\DoxyCodeLine{00660   m\_application-\/>getCurrentScene()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{00661   \textcolor{keywordflow}{if} (m\_application-\/>getCurrentFrame()-\/>isEditingLevel()) \{}
\DoxyCodeLine{00662     \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = m\_application-\/>getCurrentLevel()-\/>getLevel();}
\DoxyCodeLine{00663     \textcolor{keywordflow}{if} (!xl) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00664     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{00665     \textcolor{keywordflow}{if} (!sl) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00666     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a2d43337766628739707849f8808bf300}{setDirtyFlag}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00667     IconGenerator::instance()-\/>invalidate(sl, fid);}
\DoxyCodeLine{00668     IconGenerator::instance()-\/>invalidateSceneIcon();}
\DoxyCodeLine{00669   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00670     \textcolor{keywordtype}{int} row = m\_application-\/>getCurrentFrame()-\/>getFrame();}
\DoxyCodeLine{00671     \textcolor{keywordtype}{int} col = m\_application-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{00672     \textcolor{keywordflow}{if} (col < 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00673     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = m\_application-\/>getCurrentXsheet()-\/>getXsheet();}
\DoxyCodeLine{00674     \textcolor{keywordflow}{if} (!xsh) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00675     \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell       = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col);}
\DoxyCodeLine{00676     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = cell.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{00677     \textcolor{keywordflow}{if} (sl) \{}
\DoxyCodeLine{00678       IconGenerator::instance()-\/>invalidate(sl, fid);}
\DoxyCodeLine{00679       IconGenerator::instance()-\/>invalidateSceneIcon();}
\DoxyCodeLine{00680       sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a2d43337766628739707849f8808bf300}{setDirtyFlag}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00681     \}}
\DoxyCodeLine{00682   \}}
\DoxyCodeLine{00683   m\_application-\/>getCurrentLevel()-\/>notifyLevelChange();}
\DoxyCodeLine{00684 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00233}{TXsheet\+::get\+Cell()}}, \mbox{\hyperlink{l00095}{TXsh\+Level\+::get\+Simple\+Level()}}, \mbox{\hyperlink{l00019}{TXsh\+Cell\+::get\+Simple\+Level()}}, \mbox{\hyperlink{l00403}{on\+Image\+Changed()}}, and \mbox{\hyperlink{l00320}{TXsh\+Simple\+Level\+::set\+Dirty\+Flag()}}.

\mbox{\Hypertarget{class_t_tool_ac286a2681633b4db6106596b4f54e53b}\label{class_t_tool_ac286a2681633b4db6106596b4f54e53b}} 
\index{TTool@{TTool}!onActivate@{onActivate}}
\index{onActivate@{onActivate}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{onActivate()}{onActivate()}}
{\footnotesize\ttfamily virtual void TTool\+::on\+Activate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Callback invoked whenever the tool activates. 



Reimplemented in \mbox{\hyperlink{class_pinch_tool_a12ac33f584902b9b8e3e5fbc9b6227ee}{Pinch\+Tool}}, \mbox{\hyperlink{class_control_point_editor_tool_ac26218b59fe5049b120640639f3ef89c}{Control\+Point\+Editor\+Tool}}, \mbox{\hyperlink{class_edit_tool_a757fb5f5182d8d8513efbd83ec02ff6e}{Edit\+Tool}}, \mbox{\hyperlink{class_fill_tool_a9c0a3714baf4d92b5a3b4442fd2d83bf}{Fill\+Tool}}, \mbox{\hyperlink{class_finger_tool_a614f12f8de02585c83eb043c729e6885}{Finger\+Tool}}, \mbox{\hyperlink{class_full_color_brush_tool_a7f8f95f7028a3ea4b60751fa24473154}{Full\+Color\+Brush\+Tool}}, \mbox{\hyperlink{class_full_color_eraser_tool_a71647c830495e2c8b49eb341b19f8c2a}{Full\+Color\+Eraser\+Tool}}, \mbox{\hyperlink{class_full_color_fill_tool_aa26bf6874aac177a0fcd677e5101aaad}{Full\+Color\+Fill\+Tool}}, \mbox{\hyperlink{class_geometric_tool_a44e6cdcf48533cc90cda890d840967d2}{Geometric\+Tool}}, \mbox{\hyperlink{class_hook_tool_a0b0519ff6819053ec13cf3553d8a4b04}{Hook\+Tool}}, \mbox{\hyperlink{class_magnet_tool_a4e43905b73f791bfc30f2d97e87ef7f6}{Magnet\+Tool}}, \mbox{\hyperlink{class_paint_brush_tool_af258ef41f7a283c7bffe5a36cfa4cec7}{Paint\+Brush\+Tool}}, \mbox{\hyperlink{class_plastic_tool_aad3d93c2db31f337a8ad78c62829ab8f}{Plastic\+Tool}}, \mbox{\hyperlink{class_raster_selection_tool_ac4783ee2c2a3d62d914a41769ed76a12}{Raster\+Selection\+Tool}}, \mbox{\hyperlink{class_raster_tape_tool_a6611fdb7f2c73476edbe5e96f070ced2}{Raster\+Tape\+Tool}}, \mbox{\hyperlink{class_r_g_b_picker_tool_a36197c7bc09d42211488ec34b30ae1a7}{RGBPicker\+Tool}}, \mbox{\hyperlink{class_ruler_tool_ab91a0924ef79d5a2229d16ab16efa252}{Ruler\+Tool}}, \mbox{\hyperlink{class_selection_tool_abee6387f8a780096576933bf18d5d4b3}{Selection\+Tool}}, \mbox{\hyperlink{class_shift_trace_tool_a8917dd8559f3e6d9fa59ff3c462a99a8}{Shift\+Trace\+Tool}}, \mbox{\hyperlink{class_skeleton_tool_afdfb35d4fde1381212144ee85a60d45b}{Skeleton\+Tool}}, \mbox{\hyperlink{class_toonz_raster_brush_tool_a1fae3bb18e399eeef0d6dcbfa3e26fd1}{Toonz\+Raster\+Brush\+Tool}}, \mbox{\hyperlink{class_toonz_vector_brush_tool_afbbc8cefb5ab92d1221c617b78f69981}{Toonz\+Vector\+Brush\+Tool}}, \mbox{\hyperlink{class_tracker_tool_a487d9562afa8a7aef9456374c1104938}{Tracker\+Tool}}, \mbox{\hyperlink{class_type_tool_a137705854f076124ac56fd8a109c2000}{Type\+Tool}}, \mbox{\hyperlink{class_eraser_tool_a9412b875b79714088b675feedfe87baf}{Eraser\+Tool}}, \mbox{\hyperlink{class_vector_selection_tool_a97062074cc7f3ef879d907b267ce5806}{Vector\+Selection\+Tool}}, \mbox{\hyperlink{class_vector_tape_tool_a967e65d8f525006ce127119f4ffb13de}{Vector\+Tape\+Tool}}, and \mbox{\hyperlink{class_set_scan_cropbox_tool_a5d9e21210b6a8540e2d96c279b8387e1}{Set\+Scan\+Cropbox\+Tool}}.

\mbox{\Hypertarget{class_t_tool_a00fee58728c1e12fb50846f47d7e9f5e}\label{class_t_tool_a00fee58728c1e12fb50846f47d7e9f5e}} 
\index{TTool@{TTool}!onDeactivate@{onDeactivate}}
\index{onDeactivate@{onDeactivate}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{onDeactivate()}{onDeactivate()}}
{\footnotesize\ttfamily virtual void TTool\+::on\+Deactivate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Callback for tool deactivation, includes tool switch. 



Reimplemented in \mbox{\hyperlink{class_pinch_tool_a818e30c045481b44bb607d6dd19ddb2a}{Pinch\+Tool}}, \mbox{\hyperlink{class_control_point_editor_tool_a5f01b22cd99a322b46ad1fe7c171ba85}{Control\+Point\+Editor\+Tool}}, \mbox{\hyperlink{class_edit_tool_a6a646ea80af4cb9165778e73a82d8d11}{Edit\+Tool}}, \mbox{\hyperlink{class_fill_tool_a8b67bbeb3f26c5d64ef932512f0d31fc}{Fill\+Tool}}, \mbox{\hyperlink{class_finger_tool_a8795b380d239114abd1d3b6de8eebea7}{Finger\+Tool}}, \mbox{\hyperlink{class_full_color_brush_tool_ae806fa9b0cc590386ec0bca5df34fa05}{Full\+Color\+Brush\+Tool}}, \mbox{\hyperlink{class_full_color_eraser_tool_add3ca2ba314d6a1cdbd4c0022e990d0c}{Full\+Color\+Eraser\+Tool}}, \mbox{\hyperlink{class_geometric_tool_a6bf7ff90a711a913956582c44c799578}{Geometric\+Tool}}, \mbox{\hyperlink{class_hook_tool_a726c365403f1ecbd00561bd04194ef73}{Hook\+Tool}}, \mbox{\hyperlink{class_paint_brush_tool_a35b116494359aad3f0f3a66c905b1bc2}{Paint\+Brush\+Tool}}, \mbox{\hyperlink{class_plastic_tool_a33cd82af0673e60dc8b42c1255811944}{Plastic\+Tool}}, \mbox{\hyperlink{class_pump_tool_ae405b450b3312b0ffe1565e64928ce77}{Pump\+Tool}}, \mbox{\hyperlink{class_raster_tape_tool_a4e770b41368501df4d30c1da1d88cc40}{Raster\+Tape\+Tool}}, \mbox{\hyperlink{class_selection_tool_ae346e39d04945bfb8a27fd4a530d110b}{Selection\+Tool}}, \mbox{\hyperlink{class_shift_trace_tool_a9c808812612a2b2372fb4fec4ffe7a4a}{Shift\+Trace\+Tool}}, \mbox{\hyperlink{class_skeleton_tool_ab4e6e3c2284c76e90a849bc41f3fc869}{Skeleton\+Tool}}, \mbox{\hyperlink{class_toonz_raster_brush_tool_aec8e1d34a81172f0542ebebd422ba493}{Toonz\+Raster\+Brush\+Tool}}, \mbox{\hyperlink{class_toonz_vector_brush_tool_a033e3b855a3d09138a8f6dc9febb24f0}{Toonz\+Vector\+Brush\+Tool}}, \mbox{\hyperlink{class_tracker_tool_a553f87540af25edbfacd6f65ffba986e}{Tracker\+Tool}}, \mbox{\hyperlink{class_type_tool_adda740be6ec957288b8f7802deea8059}{Type\+Tool}}, \mbox{\hyperlink{class_eraser_tool_ab602657186ae68782460de011a075e1e}{Eraser\+Tool}}, and \mbox{\hyperlink{class_vector_selection_tool_a0d696c91cd1c64bbd4077cb79c7b2d6b}{Vector\+Selection\+Tool}}.

\mbox{\Hypertarget{class_t_tool_a3e775cfcd05aa3c35048b11fa40ab3e4}\label{class_t_tool_a3e775cfcd05aa3c35048b11fa40ab3e4}} 
\index{TTool@{TTool}!onEnter@{onEnter}}
\index{onEnter@{onEnter}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{onEnter()}{onEnter()}}
{\footnotesize\ttfamily virtual void TTool\+::on\+Enter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Callback for the mouse entering the viewer area. 



Reimplemented in \mbox{\hyperlink{class_pinch_tool_a9e2b21db6abd6214929ee7a05adee9fc}{Pinch\+Tool}}, \mbox{\hyperlink{class_control_point_editor_tool_a8da6296cd702c773d5c37eeb4c1be262}{Control\+Point\+Editor\+Tool}}, \mbox{\hyperlink{class_fill_tool_af61e1af3180129755438225ac47c05d0}{Fill\+Tool}}, \mbox{\hyperlink{class_finger_tool_ab07fac888b030841c1ae27b9a19df138}{Finger\+Tool}}, \mbox{\hyperlink{class_full_color_brush_tool_af3ca8d769734f5293e3e09aeed3a6a19}{Full\+Color\+Brush\+Tool}}, \mbox{\hyperlink{class_full_color_eraser_tool_a4417638b3ee1db420a7abd9bcb46fc87}{Full\+Color\+Eraser\+Tool}}, \mbox{\hyperlink{class_geometric_tool_aaf5fa3569d197433d70dd800eca8bbbc}{Geometric\+Tool}}, \mbox{\hyperlink{class_hook_tool_adb546c57196dc20dc21157823683b9ff}{Hook\+Tool}}, \mbox{\hyperlink{class_magnet_tool_ad7d276db6c85a7e6b33be5f0f690fc55}{Magnet\+Tool}}, \mbox{\hyperlink{class_paint_brush_tool_a19e1c19353c40259f636d99c067d9862}{Paint\+Brush\+Tool}}, \mbox{\hyperlink{class_plastic_tool_aae403bfc45fc1110f5f54b311f0aa15c}{Plastic\+Tool}}, \mbox{\hyperlink{class_pump_tool_aa5eba20d789549e7c6f822a4d3c42846}{Pump\+Tool}}, \mbox{\hyperlink{class_raster_tape_tool_a9db93b1a6cc5285aa030d1fff8b30618}{Raster\+Tape\+Tool}}, \mbox{\hyperlink{class_skeleton_tool_ae7be52da2d9982a0319e01abf3453877}{Skeleton\+Tool}}, \mbox{\hyperlink{class_toonz_raster_brush_tool_a090aa351be51d4f5ccb2df5c9e4cea1c}{Toonz\+Raster\+Brush\+Tool}}, \mbox{\hyperlink{class_toonz_vector_brush_tool_a988fffbde4e589bc27029cf79f721335}{Toonz\+Vector\+Brush\+Tool}}, \mbox{\hyperlink{class_tracker_tool_aa8f1b485f6aac6fd196d7c14b2de8ca9}{Tracker\+Tool}}, \mbox{\hyperlink{class_eraser_tool_ae7fce14dcfbe2341df60eea86c9b50e0}{Eraser\+Tool}}, \mbox{\hyperlink{class_vector_tape_tool_af22937ca6f35b2320b9cb3071ec05002}{Vector\+Tape\+Tool}}, and \mbox{\hyperlink{class_set_scan_cropbox_tool_a35e51519ed9550ae726506248aece722}{Set\+Scan\+Cropbox\+Tool}}.

\mbox{\Hypertarget{class_t_tool_a694286232ac766e3ec48f491505a407a}\label{class_t_tool_a694286232ac766e3ec48f491505a407a}} 
\index{TTool@{TTool}!onFrameSwitched@{onFrameSwitched}}
\index{onFrameSwitched@{onFrameSwitched}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{onFrameSwitched()}{onFrameSwitched()}}
{\footnotesize\ttfamily virtual void TTool\+::on\+Frame\+Switched (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00412 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_aaf1e021290e74c1b085e4b095668e1ed}\label{class_t_tool_aaf1e021290e74c1b085e4b095668e1ed}} 
\index{TTool@{TTool}!onImageChanged@{onImageChanged}}
\index{onImageChanged@{onImageChanged}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{onImageChanged()}{onImageChanged()}}
{\footnotesize\ttfamily virtual void TTool\+::on\+Image\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Notifies changes in the image in use. 



Reimplemented in \mbox{\hyperlink{class_pinch_tool_aa66410f4fdc7d43dc7eb563ec8f3da8b}{Pinch\+Tool}}, \mbox{\hyperlink{class_control_point_editor_tool_a03767a0350c80a7651d2ff25d226b579}{Control\+Point\+Editor\+Tool}}, \mbox{\hyperlink{class_fill_tool_a49e242f05ee306d70fbc9f015990f726}{Fill\+Tool}}, \mbox{\hyperlink{class_full_color_brush_tool_a77a0c6650516f58c90832c86d5e352f2}{Full\+Color\+Brush\+Tool}}, \mbox{\hyperlink{class_full_color_eraser_tool_aab1c1681b7d82a198d3fc393c173270f}{Full\+Color\+Eraser\+Tool}}, \mbox{\hyperlink{class_geometric_tool_a1ccbb4c129e97a1b9320f73ca2f170fd}{Geometric\+Tool}}, \mbox{\hyperlink{class_hook_tool_ab13910dfcb9af20fde2959033895ddac}{Hook\+Tool}}, \mbox{\hyperlink{class_raster_selection_tool_aa353b8a43062f8293fd06d1b86546c07}{Raster\+Selection\+Tool}}, \mbox{\hyperlink{class_raster_tape_tool_a6b6a61367c64725a37960f384b8675ab}{Raster\+Tape\+Tool}}, \mbox{\hyperlink{class_r_g_b_picker_tool_a8e54f6882c12b63ea4b8fffddae06382}{RGBPicker\+Tool}}, \mbox{\hyperlink{class_ruler_tool_ad84e2b9274f466606cd0c3fc39f5ef48}{Ruler\+Tool}}, \mbox{\hyperlink{class_skeleton_tool_afc4e4130bd22451d107deb7461d236e4}{Skeleton\+Tool}}, \mbox{\hyperlink{class_style_picker_tool_a34bca7249b30cd29dfebd8e205e07660}{Style\+Picker\+Tool}}, \mbox{\hyperlink{class_toonz_raster_brush_tool_a07e0fb58ddac113766ac4154a6eedc83}{Toonz\+Raster\+Brush\+Tool}}, \mbox{\hyperlink{class_tracker_tool_a8a25dc132a66faef0e5ff3bca15118b7}{Tracker\+Tool}}, \mbox{\hyperlink{class_type_tool_a67419064bd2d7fc33f110cf4799fc3ec}{Type\+Tool}}, \mbox{\hyperlink{class_eraser_tool_a55b8227fa7264a7c8f0b8c32e5b6d7f0}{Eraser\+Tool}}, \mbox{\hyperlink{class_vector_selection_tool_a021fc8aabe068a494a4cd50cd22ea86f}{Vector\+Selection\+Tool}}, and \mbox{\hyperlink{class_selection_tool_a5ea1e5cda592831a8f40e3db766de94c}{Selection\+Tool}}.



Referenced by \mbox{\hyperlink{l01598}{Scene\+Viewer\+::draw\+Overlay()}}, and \mbox{\hyperlink{l00609}{notify\+Image\+Changed()}}.

\mbox{\Hypertarget{class_t_tool_a5257bc53681eaefb43ce4987883d895d}\label{class_t_tool_a5257bc53681eaefb43ce4987883d895d}} 
\index{TTool@{TTool}!onInputText@{onInputText}}
\index{onInputText@{onInputText}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{onInputText()}{onInputText()}}
{\footnotesize\ttfamily virtual void TTool\+::on\+Input\+Text (\begin{DoxyParamCaption}\item[{std\+::wstring}]{,  }\item[{std\+::wstring}]{,  }\item[{int}]{,  }\item[{int}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00394 \{\};}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_af7fb05265a94131da081da654e271a22}\label{class_t_tool_af7fb05265a94131da081da654e271a22}} 
\index{TTool@{TTool}!onLeave@{onLeave}}
\index{onLeave@{onLeave}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{onLeave()}{onLeave()}}
{\footnotesize\ttfamily virtual void TTool\+::on\+Leave (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Callback for the mouse leaving the viewer area. 



Reimplemented in \mbox{\hyperlink{class_pinch_tool_a97b1d30e3a6e4c825af23d1315f4cd46}{Pinch\+Tool}}, \mbox{\hyperlink{class_control_point_editor_tool_a2d92b85a916014da278d2deaae90b104}{Control\+Point\+Editor\+Tool}}, \mbox{\hyperlink{class_finger_tool_a15c6e8cc8f0ca22630de6d5d9f719fb8}{Finger\+Tool}}, \mbox{\hyperlink{class_full_color_brush_tool_a58250c67ed51cbbe7d75018239900b76}{Full\+Color\+Brush\+Tool}}, \mbox{\hyperlink{class_paint_brush_tool_a7ceffa637d1e45664ed3879960168765}{Paint\+Brush\+Tool}}, \mbox{\hyperlink{class_plastic_tool_a81f6017d7c8162ed23921c39f9ae9f8f}{Plastic\+Tool}}, \mbox{\hyperlink{class_pump_tool_a35187a25ecf2bec34b751cd19a89b08a}{Pump\+Tool}}, \mbox{\hyperlink{class_shift_trace_tool_a22a808ff50e75dde59daac45dbb7081d}{Shift\+Trace\+Tool}}, \mbox{\hyperlink{class_toonz_raster_brush_tool_ab375f322b0297680f3f14ee3d1f7a80e}{Toonz\+Raster\+Brush\+Tool}}, \mbox{\hyperlink{class_toonz_vector_brush_tool_abd825b876313ef17b442448ff77fe2bf}{Toonz\+Vector\+Brush\+Tool}}, \mbox{\hyperlink{class_tracker_tool_a59d2ad52afd3fbe75ec61ef09f7c177b}{Tracker\+Tool}}, \mbox{\hyperlink{class_eraser_tool_a9d9e765cdb8805aa71fba45fa311fd35}{Eraser\+Tool}}, and \mbox{\hyperlink{class_vector_tape_tool_a481764c410bba81186e8ee985bc8b161}{Vector\+Tape\+Tool}}.

\mbox{\Hypertarget{class_t_tool_a06694e0586f807c34b18e16341aa9ee2}\label{class_t_tool_a06694e0586f807c34b18e16341aa9ee2}} 
\index{TTool@{TTool}!onPropertyChanged@{onPropertyChanged}}
\index{onPropertyChanged@{onPropertyChanged}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{onPropertyChanged()}{onPropertyChanged()}}
{\footnotesize\ttfamily virtual bool TTool\+::on\+Property\+Changed (\begin{DoxyParamCaption}\item[{std\+::string}]{property\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

\begin{DoxyVerb} Does the tasks associated to changes in \p propertyName and returns \p
\end{DoxyVerb}
 true; Does the tasks associated to changes in {\ttfamily property\+Name} and returns {\ttfamily true}. 

Reimplemented in \mbox{\hyperlink{class_control_point_editor_tool_a5de1575c41151e6701025477440c6e5f}{Control\+Point\+Editor\+Tool}}, \mbox{\hyperlink{class_edit_tool_a95f4147a7d6c342c6a4c766df8d6d38a}{Edit\+Tool}}, \mbox{\hyperlink{class_fill_tool_a6d4ed6a6894253534c06673f04da9c97}{Fill\+Tool}}, \mbox{\hyperlink{class_finger_tool_a2c909888f0dbec8feb09b1bc26ae9daa}{Finger\+Tool}}, \mbox{\hyperlink{class_full_color_brush_tool_a279db400c7bb9dfac35d9087dedbdef7}{Full\+Color\+Brush\+Tool}}, \mbox{\hyperlink{class_full_color_eraser_tool_a79f7c576577750ad1476e77091fcc798}{Full\+Color\+Eraser\+Tool}}, \mbox{\hyperlink{class_full_color_fill_tool_a3ecbc6239b69892459a7db754516a2d2}{Full\+Color\+Fill\+Tool}}, \mbox{\hyperlink{class_geometric_tool_ac845ff1c6b05f75e3c20097e2b48b8ce}{Geometric\+Tool}}, \mbox{\hyperlink{class_magnet_tool_ab836116a4a7702d3864868b31c0f1882}{Magnet\+Tool}}, \mbox{\hyperlink{class_paint_brush_tool_a6fea495827c90c0c14f065a8619294d7}{Paint\+Brush\+Tool}}, \mbox{\hyperlink{class_plastic_tool_a8323f7aaf07e52dffd963595b81bd7d8}{Plastic\+Tool}}, \mbox{\hyperlink{class_raster_selection_tool_af0114538fae18e880af79f0286c27c1e}{Raster\+Selection\+Tool}}, \mbox{\hyperlink{class_raster_tape_tool_a6145e6d7ea245d3acd23827c1d3c150e}{Raster\+Tape\+Tool}}, \mbox{\hyperlink{class_r_g_b_picker_tool_a46def62f5940eee5d3a2432d196123e5}{RGBPicker\+Tool}}, \mbox{\hyperlink{class_selection_tool_ab75a88cb099f2bd7f33333a203de0578}{Selection\+Tool}}, \mbox{\hyperlink{class_skeleton_tool_a60413502350c6db6f81ec5359aa039d0}{Skeleton\+Tool}}, \mbox{\hyperlink{class_style_picker_tool_aab504e0638e31438542244d81fa9d004}{Style\+Picker\+Tool}}, \mbox{\hyperlink{class_toonz_raster_brush_tool_a155bef55e93ce3bb63adfe0891a55547}{Toonz\+Raster\+Brush\+Tool}}, \mbox{\hyperlink{class_toonz_vector_brush_tool_a0250a40a781f004a4ff6483a00dc94dd}{Toonz\+Vector\+Brush\+Tool}}, \mbox{\hyperlink{class_tracker_tool_afd954cb1238b8c2aa78d6e2dc806e086}{Tracker\+Tool}}, \mbox{\hyperlink{class_type_tool_aedcc4b901393b4f61c380483d84b5f66}{Type\+Tool}}, \mbox{\hyperlink{class_eraser_tool_afcd9c815a5585364231a65a3102c3592}{Eraser\+Tool}}, \mbox{\hyperlink{class_vector_selection_tool_a4db988c389e5c8afd7ff6b7f73e32e62}{Vector\+Selection\+Tool}}, and \mbox{\hyperlink{class_vector_tape_tool_a5b6f17e60cb8d6dbab3a9817c14d51d8}{Vector\+Tape\+Tool}}.

\mbox{\Hypertarget{class_t_tool_adfa7a80eb7be96de62040dab2311a5bd}\label{class_t_tool_adfa7a80eb7be96de62040dab2311a5bd}} 
\index{TTool@{TTool}!onSelectedFramesChanged@{onSelectedFramesChanged}}
\index{onSelectedFramesChanged@{onSelectedFramesChanged}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{onSelectedFramesChanged()}{onSelectedFramesChanged()}}
{\footnotesize\ttfamily virtual void TTool\+::on\+Selected\+Frames\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00571 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_af69df3eb68917c8017860698f5d3fb67}\label{class_t_tool_af69df3eb68917c8017860698f5d3fb67}} 
\index{TTool@{TTool}!onSetViewer@{onSetViewer}}
\index{onSetViewer@{onSetViewer}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{onSetViewer()}{onSetViewer()}}
{\footnotesize\ttfamily virtual void TTool\+::on\+Set\+Viewer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00396 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_ab04ed46786cf65fe4564d26ffa5d49c8}\label{class_t_tool_ab04ed46786cf65fe4564d26ffa5d49c8}} 
\index{TTool@{TTool}!pick@{pick}}
\index{pick@{pick}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{pick()}{pick()}}
{\footnotesize\ttfamily int TTool\+::pick (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{p }\end{DoxyParamCaption})}

Picks a region of the scene, using an Open\+GL projection matrix to restrict drawing to a small regionaround {\ttfamily p} of the viewport. Returns -\/1 if no object\textquotesingle{}s view has been changed. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00557                                 \{}
\DoxyCodeLine{00558   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_t_tool_a66f61f998b655c1c917ee63a595657c6}{m\_viewer}}) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00559 }
\DoxyCodeLine{00560   m\_picking = \textcolor{keyword}{true};}
\DoxyCodeLine{00561   \textcolor{keywordtype}{int} ret   = \mbox{\hyperlink{class_t_tool_a66f61f998b655c1c917ee63a595657c6}{m\_viewer}}-\/>\mbox{\hyperlink{class_t_tool_1_1_viewer_a25c39c87c36587cf9cb0fdc09c59e6d4}{pick}}(p);}
\DoxyCodeLine{00562   m\_picking = \textcolor{keyword}{false};}
\DoxyCodeLine{00563 }
\DoxyCodeLine{00564   \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00565 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00555}{m\+\_\+viewer}}, and \mbox{\hyperlink{class_t_tool_1_1_viewer_a25c39c87c36587cf9cb0fdc09c59e6d4}{TTool\+::\+Viewer\+::pick()}}.

\mbox{\Hypertarget{class_t_tool_a11d2c27110689caf7fa6f49519808073}\label{class_t_tool_a11d2c27110689caf7fa6f49519808073}} 
\index{TTool@{TTool}!preLeftButtonDown@{preLeftButtonDown}}
\index{preLeftButtonDown@{preLeftButtonDown}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{preLeftButtonDown()}{preLeftButtonDown()}}
{\footnotesize\ttfamily virtual bool TTool\+::pre\+Left\+Button\+Down (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

This method is called before left\+Button\+Down() and can be used e.\+g. to create the image if needed. return true if the method execution can have changed the current tool 

Reimplemented in \mbox{\hyperlink{class_full_color_brush_tool_a26cbb75fe58336f4b27dd4d2d63e9194}{Full\+Color\+Brush\+Tool}}, \mbox{\hyperlink{class_geometric_tool_ac08d11c96329e1c5170f1cc253e97e03}{Geometric\+Tool}}, \mbox{\hyperlink{class_toonz_raster_brush_tool_a4b6a127ee38e477ea8c04917463bc9f5}{Toonz\+Raster\+Brush\+Tool}}, \mbox{\hyperlink{class_toonz_vector_brush_tool_a0f463a81847443e65540ca2a9b4272f8}{Toonz\+Vector\+Brush\+Tool}}, and \mbox{\hyperlink{class_type_tool_af9b8c95ac03396fac616bb96abe535c7}{Type\+Tool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00384 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a25c28be1539cf682511967dc9b057952}\label{class_t_tool_a25c28be1539cf682511967dc9b057952}} 
\index{TTool@{TTool}!reset@{reset}}
\index{reset@{reset}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily virtual void TTool\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00414 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a985d88ab04fc77b1ddca7ead95ab4884}\label{class_t_tool_a985d88ab04fc77b1ddca7ead95ab4884}} 
\index{TTool@{TTool}!resetInputMethod@{resetInputMethod}}
\index{resetInputMethod@{resetInputMethod}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{resetInputMethod()}{resetInputMethod()}}
{\footnotesize\ttfamily void TTool\+::reset\+Input\+Method (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Resets Input Context (IME) 


\begin{DoxyCode}{0}
\DoxyCodeLine{00812                              \{}
\DoxyCodeLine{00813   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_tool_a66f61f998b655c1c917ee63a595657c6}{m\_viewer}}) \mbox{\hyperlink{class_t_tool_a66f61f998b655c1c917ee63a595657c6}{m\_viewer}}-\/>resetInputMethod();}
\DoxyCodeLine{00814 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00555}{m\+\_\+viewer}}.



Referenced by \mbox{\hyperlink{l01708}{Type\+Tool\+::on\+Deactivate()}}.

\mbox{\Hypertarget{class_t_tool_ab096789c990785636e8694020344636c}\label{class_t_tool_ab096789c990785636e8694020344636c}} 
\index{TTool@{TTool}!rightButtonDown@{rightButtonDown}}
\index{rightButtonDown@{rightButtonDown}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{rightButtonDown()}{rightButtonDown()}}
{\footnotesize\ttfamily virtual void TTool\+::right\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00391 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_affdedb591395f5f88f80e3756f867bc9}\label{class_t_tool_affdedb591395f5f88f80e3756f867bc9}} 
\index{TTool@{TTool}!setActive@{setActive}}
\index{setActive@{setActive}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{setActive()}{setActive()}}
{\footnotesize\ttfamily void TTool\+::set\+Active (\begin{DoxyParamCaption}\item[{bool}]{active }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00421 \{ m\_active = active; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a4d7dc084cba84024ae1594a28ce45f93}\label{class_t_tool_a4d7dc084cba84024ae1594a28ce45f93}} 
\index{TTool@{TTool}!setApplication@{setApplication}}
\index{setApplication@{setApplication}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{setApplication()}{setApplication()}}
{\footnotesize\ttfamily static void TTool\+::set\+Application (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_application}{TApplication}} $\ast$}]{application }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00303                                                         \{}
\DoxyCodeLine{00304     m\_application = application;}
\DoxyCodeLine{00305   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a0f1f2c2326fb0ef3bb6d4108fc0fb24b}\label{class_t_tool_a0f1f2c2326fb0ef3bb6d4108fc0fb24b}} 
\index{TTool@{TTool}!setMatrix@{setMatrix}}
\index{setMatrix@{setMatrix}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{setMatrix()}{setMatrix()}}
{\footnotesize\ttfamily void TTool\+::set\+Matrix (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_affine}{TAffine}} \&}]{matrix }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00470 \{ \mbox{\hyperlink{class_t_tool_a3bf7058680c3aef9a5584a7f71351757}{m\_matrix}} = matrix; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_ae40926a5cc5262b4c4609ae6f05a13e1}\label{class_t_tool_ae40926a5cc5262b4c4609ae6f05a13e1}} 
\index{TTool@{TTool}!setSelectedFrames@{setSelectedFrames}}
\index{setSelectedFrames@{setSelectedFrames}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{setSelectedFrames()}{setSelectedFrames()}}
{\footnotesize\ttfamily void TTool\+::set\+Selected\+Frames (\begin{DoxyParamCaption}\item[{const std\+::set$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \&}]{selected\+Frames }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01064                                                                     \{}
\DoxyCodeLine{01065   m\_selectedFrames = selectedFrames;}
\DoxyCodeLine{01066   onSelectedFramesChanged();}
\DoxyCodeLine{01067 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a929998a1d2773ebbb5982283e870a26c}\label{class_t_tool_a929998a1d2773ebbb5982283e870a26c}} 
\index{TTool@{TTool}!setViewer@{setViewer}}
\index{setViewer@{setViewer}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{setViewer()}{setViewer()}}
{\footnotesize\ttfamily void TTool\+::set\+Viewer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tool_1_1_viewer}{Viewer}} $\ast$}]{viewer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00356                                  \{}
\DoxyCodeLine{00357     \mbox{\hyperlink{class_t_tool_a66f61f998b655c1c917ee63a595657c6}{m\_viewer}} = viewer;}
\DoxyCodeLine{00358     onSetViewer();}
\DoxyCodeLine{00359   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a668ac4790094a864ba6e37bd902303f1}\label{class_t_tool_a668ac4790094a864ba6e37bd902303f1}} 
\index{TTool@{TTool}!touchImage@{touchImage}}
\index{touchImage@{touchImage}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{touchImage()}{touchImage()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_image}{TImage}} $\ast$ TTool\+::touch\+Image (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Returns a pointer to the actual image -\/ the one of the frame that has been selected. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00294                           \{}
\DoxyCodeLine{00295   \textcolor{keywordflow}{if} (!m\_application) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00296 }
\DoxyCodeLine{00297   \mbox{\hyperlink{class_t_tool_a9345d88f41578058ccb2d6e681591c09}{m\_cellsData}}.clear();}
\DoxyCodeLine{00298   m\_oldFids.clear();}
\DoxyCodeLine{00299   m\_newFids.clear();}
\DoxyCodeLine{00300 }
\DoxyCodeLine{00301   \mbox{\hyperlink{class_t_tool_afec1db61477579b224321fd469e4ec00}{m\_isLevelCreated}}     = \textcolor{keyword}{false};}
\DoxyCodeLine{00302   \mbox{\hyperlink{class_t_tool_aabd06af7335f1ba0c96f36f1ac3e9976}{m\_isFrameCreated}}     = \textcolor{keyword}{false};}
\DoxyCodeLine{00303   m\_isLevelRenumbererd = \textcolor{keyword}{false};}
\DoxyCodeLine{00304   \mbox{\hyperlink{class_preferences}{Preferences}} *pref    = Preferences::instance();}
\DoxyCodeLine{00305 }
\DoxyCodeLine{00306   \textcolor{keywordtype}{bool} isAutoCreateEnabled        = pref-\/>isAutoCreateEnabled();}
\DoxyCodeLine{00307   \textcolor{keywordtype}{bool} animationSheetEnabled      = pref-\/>isAnimationSheetEnabled();}
\DoxyCodeLine{00308   \textcolor{keywordtype}{bool} isAutoStretchEnabled       = pref-\/>isAutoStretchEnabled();}
\DoxyCodeLine{00309   \textcolor{keywordtype}{bool} isAutoRenumberEnabled      = pref-\/>isAutorenumberEnabled();}
\DoxyCodeLine{00310   \textcolor{keywordtype}{bool} isCreateInHoldCellsEnabled = pref-\/>isCreationInHoldCellsEnabled();}
\DoxyCodeLine{00311 }
\DoxyCodeLine{00312   \mbox{\hyperlink{class_t_frame_handle}{TFrameHandle}} *currentFrame    = m\_application-\/>getCurrentFrame();}
\DoxyCodeLine{00313   \mbox{\hyperlink{class_t_xsh_level_handle}{TXshLevelHandle}} *currentLevel = m\_application-\/>getCurrentLevel();}
\DoxyCodeLine{00314 }
\DoxyCodeLine{00315   \textcolor{keywordflow}{if} (currentFrame-\/>isEditingLevel()) \{}
\DoxyCodeLine{00316     \textcolor{comment}{// Editing level}}
\DoxyCodeLine{00317 }
\DoxyCodeLine{00318     \textcolor{comment}{// no level => return 0}}
\DoxyCodeLine{00319     \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl = currentLevel-\/>getLevel();}
\DoxyCodeLine{00320     \textcolor{keywordflow}{if} (!xl) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00321     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{00322     \textcolor{keywordflow}{if} (!sl || sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a7c256d2745209a181a2dbccdec949c5e}{isEmpty}}()) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00323 }
\DoxyCodeLine{00324     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = currentFrame-\/>getFid();}
\DoxyCodeLine{00325     \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img  = sl-\/>getFrame(fid, \textcolor{keyword}{true});}
\DoxyCodeLine{00326     \textcolor{keywordflow}{if} (!img) \{}
\DoxyCodeLine{00327       \textcolor{comment}{// no drawing found}}
\DoxyCodeLine{00328       \textcolor{keywordflow}{if} (sl-\/>isSubsequence() || sl-\/>isReadOnly() || !isAutoCreateEnabled)}
\DoxyCodeLine{00329         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00330 }
\DoxyCodeLine{00331       \textcolor{comment}{// create a new drawing}}
\DoxyCodeLine{00332       img = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a32326317b949489c443457ddd55ce256}{createEmptyFrame}}();}
\DoxyCodeLine{00333       sl-\/>setFrame(fid, img);}
\DoxyCodeLine{00334       currentLevel-\/>notifyLevelChange();}
\DoxyCodeLine{00335       \mbox{\hyperlink{class_t_tool_aabd06af7335f1ba0c96f36f1ac3e9976}{m\_isFrameCreated}} = \textcolor{keyword}{true};}
\DoxyCodeLine{00336     \}}
\DoxyCodeLine{00337     \textcolor{keywordflow}{return} img.getPointer();}
\DoxyCodeLine{00338   \}}
\DoxyCodeLine{00339 }
\DoxyCodeLine{00340   \textcolor{comment}{//-\/ -\/ -\/ -\/ editing xsheet case starts here -\/ -\/ -\/ -\/}}
\DoxyCodeLine{00341 }
\DoxyCodeLine{00342   \textcolor{keywordflow}{if} (m\_application-\/>getCurrentObject()-\/>isSpline()) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00343 }
\DoxyCodeLine{00344   \mbox{\hyperlink{class_t_scene_handle}{TSceneHandle}} *currentScene = m\_application-\/>getCurrentScene();}
\DoxyCodeLine{00345   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene          = currentScene-\/>getScene();}
\DoxyCodeLine{00346   \textcolor{keywordtype}{int} row                    = currentFrame-\/>getFrame();}
\DoxyCodeLine{00347   \textcolor{keywordtype}{int} col = m\_application-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{00348   \textcolor{keywordflow}{if} (col < 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00349 }
\DoxyCodeLine{00350   \mbox{\hyperlink{class_t_xsheet_handle}{TXsheetHandle}} *currentXsheet = m\_application-\/>getCurrentXsheet();}
\DoxyCodeLine{00351   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh                 = currentXsheet-\/>getXsheet();}
\DoxyCodeLine{00352   \textcolor{keywordflow}{if} (!xsh) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00353 }
\DoxyCodeLine{00354   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell       = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col);}
\DoxyCodeLine{00355   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = cell.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{00356 }
\DoxyCodeLine{00357   \textcolor{keywordflow}{if} (sl) \{}
\DoxyCodeLine{00358     \textcolor{comment}{// current cell is not empty}}
\DoxyCodeLine{00359     \textcolor{keywordflow}{if} (isCreateInHoldCellsEnabled \&\& row > 0 \&\&}
\DoxyCodeLine{00360         xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row -\/ 1, col) == xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col)) \{}
\DoxyCodeLine{00361       \textcolor{comment}{// CreateInHoldCells is enabled and the current cell is a "{}hold"{}.}}
\DoxyCodeLine{00362       \textcolor{comment}{// We must create a new drawing.}}
\DoxyCodeLine{00363       \textcolor{comment}{// measure the hold length (starting from the current row) : r0-\/r1}}
\DoxyCodeLine{00364       \textcolor{keywordtype}{int} r0 = row, r1 = row;}
\DoxyCodeLine{00365       \textcolor{keywordflow}{if} (isAutoStretchEnabled)}
\DoxyCodeLine{00366         \textcolor{keywordflow}{while} (xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r1 + 1, col) == cell) r1++;}
\DoxyCodeLine{00367       \textcolor{comment}{// find the proper frameid (possibly addisng suffix, in order to avoid a}}
\DoxyCodeLine{00368       \textcolor{comment}{// fid already used)}}
\DoxyCodeLine{00369       \textcolor{comment}{// find the proper frameid}}
\DoxyCodeLine{00370       \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid;}
\DoxyCodeLine{00371       \mbox{\hyperlink{class_t_xsh_cell_column}{TXshCellColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(col)-\/>getCellColumn();}
\DoxyCodeLine{00372       \textcolor{keywordflow}{if} (isAutoRenumberEnabled \&\& column) \{}
\DoxyCodeLine{00373         \mbox{\hyperlink{class_t_frame_id}{TFrameId}} maxFid;}
\DoxyCodeLine{00374         \textcolor{keywordflow}{if} (animationSheetEnabled) \{}
\DoxyCodeLine{00375           fid    = \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(row + 1);}
\DoxyCodeLine{00376           maxFid = \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(row);}
\DoxyCodeLine{00377         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00378           \textcolor{keywordtype}{int} r\_begin, r\_end;}
\DoxyCodeLine{00379           column-\/>getRange(r\_begin, r\_end);}
\DoxyCodeLine{00380           fid = getDesiredFId(column, r\_begin, sl, row, maxFid);}
\DoxyCodeLine{00381         \}}
\DoxyCodeLine{00382         \textcolor{comment}{// renumber fids}}
\DoxyCodeLine{00383         sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{getFids}}(m\_oldFids);}
\DoxyCodeLine{00384         m\_isLevelRenumbererd = ToolUtils::renumberForInsertFId(}
\DoxyCodeLine{00385             sl, fid, maxFid, scene-\/>\mbox{\hyperlink{class_toonz_scene_aaffd562eebbd8faba4caeaed69bfcc18}{getTopXsheet}}());}
\DoxyCodeLine{00386         \textcolor{keywordflow}{if} (m\_isLevelRenumbererd) sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{getFids}}(m\_newFids);}
\DoxyCodeLine{00387       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00388         fid = (animationSheetEnabled) ? getNewFrameId(sl, row)}
\DoxyCodeLine{00389                                       : sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a07279a40ffad2c6ccc597c0a418f78fb}{index2fid}}(sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a3fe127306d6669a3eb9e9d8802660d7b}{getFrameCount}}());}
\DoxyCodeLine{00390       \textcolor{comment}{// create the new drawing}}
\DoxyCodeLine{00391       \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img      = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a32326317b949489c443457ddd55ce256}{createEmptyFrame}}();}
\DoxyCodeLine{00392       \mbox{\hyperlink{class_t_tool_aabd06af7335f1ba0c96f36f1ac3e9976}{m\_isFrameCreated}} = \textcolor{keyword}{true};}
\DoxyCodeLine{00393       \textcolor{comment}{// insert the drawing in the level}}
\DoxyCodeLine{00394       sl-\/>setFrame(fid, img);}
\DoxyCodeLine{00395       \textcolor{comment}{// update the cell}}
\DoxyCodeLine{00396       cell = \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}}(sl, fid);}
\DoxyCodeLine{00397       \textcolor{comment}{// update the xsheet (change the current cell and possibly all the}}
\DoxyCodeLine{00398       \textcolor{comment}{// following "{}hold"{})}}
\DoxyCodeLine{00399       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} r = r0; r <= r1; r++) xsh-\/>setCell(r, col, cell);}
\DoxyCodeLine{00400       \textcolor{comment}{// notify}}
\DoxyCodeLine{00401       currentXsheet-\/>notifyXsheetChanged();}
\DoxyCodeLine{00402       currentScene-\/>notifyCastChange();}
\DoxyCodeLine{00403       currentLevel-\/>notifyLevelChange();}
\DoxyCodeLine{00404       \mbox{\hyperlink{class_t_tool_a9345d88f41578058ccb2d6e681591c09}{m\_cellsData}}.push\_back(\{r0, r1, CellOps::ExistingToNew\});}
\DoxyCodeLine{00405     \}}
\DoxyCodeLine{00406     \textcolor{comment}{// if the level does not contain a frame in the current cell}}
\DoxyCodeLine{00407     \textcolor{comment}{// (i.e. drawing on the cell with red numbers)}}
\DoxyCodeLine{00408     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a14de45c4b17032346cfcffbca8ef9751}{isFid}}(cell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}())) \{}
\DoxyCodeLine{00409       \textcolor{comment}{// no drawing found}}
\DoxyCodeLine{00410       \textcolor{keywordflow}{if} (sl-\/>isSubsequence() || sl-\/>isReadOnly() || !isAutoCreateEnabled)}
\DoxyCodeLine{00411         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00412       \textcolor{comment}{// create a new drawing}}
\DoxyCodeLine{00413       \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a32326317b949489c443457ddd55ce256}{createEmptyFrame}}();}
\DoxyCodeLine{00414       sl-\/>setFrame(cell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}(), img);}
\DoxyCodeLine{00415       currentXsheet-\/>notifyXsheetChanged();}
\DoxyCodeLine{00416       currentLevel-\/>notifyLevelChange();}
\DoxyCodeLine{00417       \mbox{\hyperlink{class_t_tool_aabd06af7335f1ba0c96f36f1ac3e9976}{m\_isFrameCreated}} = \textcolor{keyword}{true};}
\DoxyCodeLine{00418       \textcolor{keywordflow}{return} img.getPointer();}
\DoxyCodeLine{00419     \}}
\DoxyCodeLine{00420 }
\DoxyCodeLine{00421     \textcolor{comment}{// we've found the image. return it.}}
\DoxyCodeLine{00422     \textcolor{keywordflow}{return} cell.\mbox{\hyperlink{class_t_xsh_cell_a20b623d308bc09b820ec6b116516f564}{getImage}}(\textcolor{keyword}{true}).getPointer();}
\DoxyCodeLine{00423   \}}
\DoxyCodeLine{00424 }
\DoxyCodeLine{00425   \textcolor{comment}{// current cell is empty.}}
\DoxyCodeLine{00426   \textcolor{keywordflow}{if} (!isAutoCreateEnabled) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00427 }
\DoxyCodeLine{00428   \textcolor{comment}{// get the column range}}
\DoxyCodeLine{00429   \textcolor{keywordtype}{int} r0, r1;}
\DoxyCodeLine{00430   xsh-\/>\mbox{\hyperlink{class_t_xsheet_a26850469fb0f2886b717479050c32be2}{getCellRange}}(col, r0, r1);}
\DoxyCodeLine{00431   \textcolor{comment}{// in case the column is not empty}}
\DoxyCodeLine{00432   \textcolor{keywordflow}{if} (r0 <= r1) \{}
\DoxyCodeLine{00433     \textcolor{comment}{// We must create a new drawing in the column level and possibly add "{}holds"{}}}
\DoxyCodeLine{00434 }
\DoxyCodeLine{00435     \textcolor{comment}{// find the last not-\/empty cell before the current one (a) and the first}}
\DoxyCodeLine{00436     \textcolor{comment}{// after (b)}}
\DoxyCodeLine{00437     \textcolor{keywordtype}{int} a = row -\/ 1, b = row + 1;}
\DoxyCodeLine{00438     \textcolor{keywordflow}{while} (a >= r0 \&\& xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(a, col).\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) a-\/-\/;}
\DoxyCodeLine{00439     \textcolor{keywordflow}{while} (b <= r1 \&\& xsh-\/>getCell(b, col).isEmpty()) b++;}
\DoxyCodeLine{00440 }
\DoxyCodeLine{00441     \textcolor{comment}{// find the level we must attach to}}
\DoxyCodeLine{00442     \textcolor{keywordflow}{if} (a >= r0) \{}
\DoxyCodeLine{00443       \textcolor{comment}{// there is a not-\/empty cell before the current one}}
\DoxyCodeLine{00444       sl = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(a, col).\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{00445     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (b <= r1) \{}
\DoxyCodeLine{00446       sl = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(b, col).\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{00447     \}}
\DoxyCodeLine{00448     \textcolor{keywordflow}{if} (sl \&\& !sl-\/>isSubsequence() \&\& !sl-\/>isReadOnly()) \{}
\DoxyCodeLine{00449       \textcolor{comment}{// note: sl should be always !=0 (the column is not empty)}}
\DoxyCodeLine{00450       \textcolor{comment}{// if -\/ for some reason -\/ it is == 0 or it is not editable,}}
\DoxyCodeLine{00451       \textcolor{comment}{// then we skip to empty-\/column behaviour}}
\DoxyCodeLine{00452 }
\DoxyCodeLine{00453       \textcolor{comment}{// create the drawing}}
\DoxyCodeLine{00454       \textcolor{comment}{// find the proper frameid}}
\DoxyCodeLine{00455       \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid;}
\DoxyCodeLine{00456       \mbox{\hyperlink{class_t_xsh_cell_column}{TXshCellColumn}} *column = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(col)-\/>getCellColumn();}
\DoxyCodeLine{00457       \textcolor{keywordflow}{if} (isAutoRenumberEnabled \&\& column) \{}
\DoxyCodeLine{00458         \mbox{\hyperlink{class_t_frame_id}{TFrameId}} maxFid(row);}
\DoxyCodeLine{00459         fid = (animationSheetEnabled)}
\DoxyCodeLine{00460                   ? \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(row + 1)}
\DoxyCodeLine{00461                   : getDesiredFId(column, r0, sl, row, maxFid);}
\DoxyCodeLine{00462         sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{getFids}}(m\_oldFids);}
\DoxyCodeLine{00463         m\_isLevelRenumbererd = ToolUtils::renumberForInsertFId(}
\DoxyCodeLine{00464             sl, fid, maxFid, scene-\/>\mbox{\hyperlink{class_toonz_scene_aaffd562eebbd8faba4caeaed69bfcc18}{getTopXsheet}}());}
\DoxyCodeLine{00465         \textcolor{keywordflow}{if} (m\_isLevelRenumbererd) sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a567daee4ca12a0e92445bcf98a6541f1}{getFids}}(m\_newFids);}
\DoxyCodeLine{00466       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00467         fid = (animationSheetEnabled) ? getNewFrameId(sl, row)}
\DoxyCodeLine{00468                                       : sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a07279a40ffad2c6ccc597c0a418f78fb}{index2fid}}(sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a3fe127306d6669a3eb9e9d8802660d7b}{getFrameCount}}());}
\DoxyCodeLine{00469       \textcolor{comment}{// create the new drawing}}
\DoxyCodeLine{00470       \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img      = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a32326317b949489c443457ddd55ce256}{createEmptyFrame}}();}
\DoxyCodeLine{00471       \mbox{\hyperlink{class_t_tool_aabd06af7335f1ba0c96f36f1ac3e9976}{m\_isFrameCreated}} = \textcolor{keyword}{true};}
\DoxyCodeLine{00472       \textcolor{comment}{// insert the drawing in the level}}
\DoxyCodeLine{00473       sl-\/>setFrame(fid, img);}
\DoxyCodeLine{00474       \textcolor{comment}{// update the cell}}
\DoxyCodeLine{00475       cell = \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}}(sl, fid);}
\DoxyCodeLine{00476       xsh-\/>setCell(row, col, cell);}
\DoxyCodeLine{00477 }
\DoxyCodeLine{00478       \textcolor{comment}{// create holds}}
\DoxyCodeLine{00479       \textcolor{keywordflow}{if} (!isAutoStretchEnabled) \{}
\DoxyCodeLine{00480         \mbox{\hyperlink{class_t_tool_a9345d88f41578058ccb2d6e681591c09}{m\_cellsData}}.push\_back(\{row, row, CellOps::BlankToNew\});}
\DoxyCodeLine{00481       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00482         \textcolor{keywordflow}{if} (a >= r0) \{}
\DoxyCodeLine{00483           \textcolor{comment}{// create a hold before : [a+1, row-\/1]}}
\DoxyCodeLine{00484           \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} aCell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(a, col);}
\DoxyCodeLine{00485           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = a + 1; i < row; i++) xsh-\/>setCell(i, col, aCell);}
\DoxyCodeLine{00486           \mbox{\hyperlink{class_t_tool_a9345d88f41578058ccb2d6e681591c09}{m\_cellsData}}.push\_back(\{a + 1, row -\/ 1, CellOps::BlankToExisting\});}
\DoxyCodeLine{00487 }
\DoxyCodeLine{00488           \textcolor{keywordflow}{if} (b <= r1 \&\& xsh-\/>getCell(b, col).getSimpleLevel() == sl) \{}
\DoxyCodeLine{00489             \textcolor{comment}{// create also a hold after}}
\DoxyCodeLine{00490             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = row + 1; i < b; i++) xsh-\/>setCell(i, col, cell);}
\DoxyCodeLine{00491             \mbox{\hyperlink{class_t_tool_a9345d88f41578058ccb2d6e681591c09}{m\_cellsData}}.push\_back(\{row, b -\/ 1, CellOps::BlankToNew\});}
\DoxyCodeLine{00492           \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00493             \mbox{\hyperlink{class_t_tool_a9345d88f41578058ccb2d6e681591c09}{m\_cellsData}}.push\_back(\{row, row, CellOps::BlankToNew\});}
\DoxyCodeLine{00494           \}}
\DoxyCodeLine{00495         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (b <= r1) \{}
\DoxyCodeLine{00496           \textcolor{comment}{// create a hold after}}
\DoxyCodeLine{00497           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = row + 1; i < b; i++) xsh-\/>setCell(i, col, cell);}
\DoxyCodeLine{00498           \mbox{\hyperlink{class_t_tool_a9345d88f41578058ccb2d6e681591c09}{m\_cellsData}}.push\_back(\{row, b -\/ 1, CellOps::BlankToNew\});}
\DoxyCodeLine{00499         \}}
\DoxyCodeLine{00500       \}}
\DoxyCodeLine{00501       \textcolor{comment}{// notify \& return}}
\DoxyCodeLine{00502       currentXsheet-\/>notifyXsheetChanged();}
\DoxyCodeLine{00503       currentScene-\/>notifyCastChange();}
\DoxyCodeLine{00504       currentLevel-\/>notifyLevelChange();}
\DoxyCodeLine{00505       \textcolor{keywordflow}{return} cell.\mbox{\hyperlink{class_t_xsh_cell_a20b623d308bc09b820ec6b116516f564}{getImage}}(\textcolor{keyword}{true}).getPointer();}
\DoxyCodeLine{00506     \}}
\DoxyCodeLine{00507   \}}
\DoxyCodeLine{00508 }
\DoxyCodeLine{00509   \textcolor{comment}{// -\/ -\/ -\/ -\/ empty column case starts here -\/ -\/ -\/ -\/}}
\DoxyCodeLine{00510   \textcolor{comment}{// autoCreate is enabled: we must create a new level}}
\DoxyCodeLine{00511   \textcolor{keywordtype}{int} levelType    = pref-\/>getDefLevelType();}
\DoxyCodeLine{00512   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl    = scene-\/>\mbox{\hyperlink{class_toonz_scene_ac8791183db4daa28bdffdd40e15c3b9e}{createNewLevel}}(levelType);}
\DoxyCodeLine{00513   sl               = xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{00514   \mbox{\hyperlink{class_t_tool_afec1db61477579b224321fd469e4ec00}{m\_isLevelCreated}} = \textcolor{keyword}{true};}
\DoxyCodeLine{00515 }
\DoxyCodeLine{00516   \textcolor{comment}{// create the drawing}}
\DoxyCodeLine{00517   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = animationSheetEnabled ? getNewFrameId(sl, row) : \mbox{\hyperlink{class_t_frame_id}{TFrameId}}(1);}
\DoxyCodeLine{00518   \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img  = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a32326317b949489c443457ddd55ce256}{createEmptyFrame}}();}
\DoxyCodeLine{00519   \mbox{\hyperlink{class_t_tool_aabd06af7335f1ba0c96f36f1ac3e9976}{m\_isFrameCreated}} = \textcolor{keyword}{true};}
\DoxyCodeLine{00520   sl-\/>setFrame(fid, img);}
\DoxyCodeLine{00521   cell = \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}}(sl, fid);}
\DoxyCodeLine{00522   xsh-\/>setCell(row, col, cell);}
\DoxyCodeLine{00523   \mbox{\hyperlink{class_t_tool_a9345d88f41578058ccb2d6e681591c09}{m\_cellsData}}.push\_back(\{row, row, CellOps::BlankToNew\});  \textcolor{comment}{// vuoto => nuovo}}
\DoxyCodeLine{00524   currentXsheet-\/>notifyXsheetChanged();}
\DoxyCodeLine{00525   currentScene-\/>notifyCastChange();}
\DoxyCodeLine{00526   currentLevel-\/>notifyLevelChange();}
\DoxyCodeLine{00527   \textcolor{keywordflow}{return} img.getPointer();}
\DoxyCodeLine{00528 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01978}{TXsh\+Simple\+Level\+::create\+Empty\+Frame()}}, \mbox{\hyperlink{l00864}{Toonz\+Scene\+::create\+New\+Level()}}, \mbox{\hyperlink{l00233}{TXsheet\+::get\+Cell()}}, \mbox{\hyperlink{l00462}{TXsheet\+::get\+Cell\+Range()}}, \mbox{\hyperlink{l01418}{TXsheet\+::get\+Column()}}, \mbox{\hyperlink{l00448}{TXsh\+Simple\+Level\+::get\+Fids()}}, \mbox{\hyperlink{l00158}{TXsh\+Simple\+Level\+::get\+Frame\+Count()}}, \mbox{\hyperlink{l00120}{TXsh\+Cell\+::get\+Frame\+Id()}}, \mbox{\hyperlink{l00008}{TXsh\+Cell\+::get\+Image()}}, \mbox{\hyperlink{l00095}{TXsh\+Level\+::get\+Simple\+Level()}}, \mbox{\hyperlink{l00019}{TXsh\+Cell\+::get\+Simple\+Level()}}, \mbox{\hyperlink{l00961}{Toonz\+Scene\+::get\+Top\+Xsheet()}}, \mbox{\hyperlink{l00544}{TXsh\+Simple\+Level\+::index2fid()}}, \mbox{\hyperlink{l00078}{TXsh\+Cell\+::is\+Empty()}}, \mbox{\hyperlink{l00147}{TXsh\+Simple\+Level\+::is\+Empty()}}, \mbox{\hyperlink{l00454}{TXsh\+Simple\+Level\+::is\+Fid()}}, \mbox{\hyperlink{l00540}{m\+\_\+cells\+Data}}, \mbox{\hyperlink{l00546}{m\+\_\+is\+Frame\+Created}}, and \mbox{\hyperlink{l00544}{m\+\_\+is\+Level\+Created}}.



Referenced by \mbox{\hyperlink{l01185}{Raster\+Selection\+::paste\+Selection()}}, \mbox{\hyperlink{l00290}{Full\+Color\+Brush\+Tool\+::pre\+Left\+Button\+Down()}}, \mbox{\hyperlink{l01057}{Geometric\+Tool\+::pre\+Left\+Button\+Down()}}, \mbox{\hyperlink{l01226}{Toonz\+Raster\+Brush\+Tool\+::pre\+Left\+Button\+Down()}}, \mbox{\hyperlink{l00655}{Toonz\+Vector\+Brush\+Tool\+::pre\+Left\+Button\+Down()}}, and \mbox{\hyperlink{l01205}{Type\+Tool\+::pre\+Left\+Button\+Down()}}.

\mbox{\Hypertarget{class_t_tool_ae6fe6533949c4098703d15325adc1ce7}\label{class_t_tool_ae6fe6533949c4098703d15325adc1ce7}} 
\index{TTool@{TTool}!tweenGuideStrokeToSelected@{tweenGuideStrokeToSelected}}
\index{tweenGuideStrokeToSelected@{tweenGuideStrokeToSelected}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{tweenGuideStrokeToSelected()}{tweenGuideStrokeToSelected()}}
{\footnotesize\ttfamily void TTool\+::tween\+Guide\+Stroke\+To\+Selected (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01312                                        \{}
\DoxyCodeLine{01313   \textcolor{keywordflow}{if} (!getViewer() || !m\_application) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01314 }
\DoxyCodeLine{01315   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl =}
\DoxyCodeLine{01316       m\_application-\/>getCurrentLevel()-\/>getLevel()-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01317   \textcolor{keywordflow}{if} (!sl) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01318 }
\DoxyCodeLine{01319   \textcolor{keywordtype}{int} backIdx = -\/1, frontIdx = -\/1;}
\DoxyCodeLine{01320 }
\DoxyCodeLine{01321   getViewer()-\/>getGuidedFrameIdx(\&backIdx, \&frontIdx);}
\DoxyCodeLine{01322 }
\DoxyCodeLine{01323   \mbox{\hyperlink{class_t_frame_handle}{TFrameHandle}} *currentFrame = getApplication()-\/>getCurrentFrame();}
\DoxyCodeLine{01324   \textcolor{keywordtype}{int} row                    = currentFrame-\/>getFrameIndex();}
\DoxyCodeLine{01325   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} bFid, cFid, fFid;}
\DoxyCodeLine{01326   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} bvi, cvi, fvi;}
\DoxyCodeLine{01327 }
\DoxyCodeLine{01328   cFid = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{01329   \textcolor{keywordflow}{if} (cFid.isEmptyFrame()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01330 }
\DoxyCodeLine{01331   cvi = sl-\/>getFrame(cFid, \textcolor{keyword}{false});}
\DoxyCodeLine{01332   \textcolor{keywordflow}{if} (!cvi) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01333 }
\DoxyCodeLine{01334   \textcolor{keywordtype}{int} cStrokeCount = cvi-\/>getStrokeCount();}
\DoxyCodeLine{01335   \textcolor{keywordflow}{if} (!cStrokeCount) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01336 }
\DoxyCodeLine{01337   \mbox{\hyperlink{class_stroke_selection}{StrokeSelection}} *strokeSelection =}
\DoxyCodeLine{01338       \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_stroke_selection}{StrokeSelection}} *\textcolor{keyword}{>}(\mbox{\hyperlink{class_t_tool_add40ff8dd3dd04ed3ab5a259ed53fb85}{getSelection}}());}
\DoxyCodeLine{01339   \textcolor{keywordflow}{if} (!strokeSelection || strokeSelection-\/>isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01340   \textcolor{keyword}{const} std::set<int> \&selectedStrokeIdxs = strokeSelection-\/>getSelection();}
\DoxyCodeLine{01341   \textcolor{keyword}{const} std::set<int>::iterator it        = selectedStrokeIdxs.begin();}
\DoxyCodeLine{01342   \textcolor{keywordtype}{int} cStrokeIdx                          = *it;}
\DoxyCodeLine{01343 }
\DoxyCodeLine{01344   \mbox{\hyperlink{class_t_stroke}{TStroke}} *cStroke = cvi-\/>getStroke(cStrokeIdx);}
\DoxyCodeLine{01345   \textcolor{keywordflow}{if} (!cStroke) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01346 }
\DoxyCodeLine{01347   \textcolor{keywordflow}{if} (backIdx != -\/1) \{}
\DoxyCodeLine{01348     \textcolor{keywordflow}{if} (currentFrame-\/>isEditingScene()) \{}
\DoxyCodeLine{01349       \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = m\_application-\/>getCurrentXsheet()-\/>getXsheet();}
\DoxyCodeLine{01350       \textcolor{keywordtype}{int} col      = m\_application-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{01351       \textcolor{keywordflow}{if} (xsh \&\& col >= 0) \{}
\DoxyCodeLine{01352         \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(backIdx, col);}
\DoxyCodeLine{01353         \textcolor{keywordflow}{if} (!cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) bFid = cell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}();}
\DoxyCodeLine{01354       \}}
\DoxyCodeLine{01355     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01356       bFid = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_abb72e2ab0c1baeda0a8af3146003181d}{getFrameId}}(backIdx);}
\DoxyCodeLine{01357 }
\DoxyCodeLine{01358     \textcolor{keywordflow}{if} (!bFid.isEmptyFrame()) bvi = sl-\/>getFrame(bFid, \textcolor{keyword}{false});}
\DoxyCodeLine{01359   \}}
\DoxyCodeLine{01360 }
\DoxyCodeLine{01361   \textcolor{keywordflow}{if} (frontIdx != -\/1) \{}
\DoxyCodeLine{01362     \textcolor{keywordflow}{if} (currentFrame-\/>isEditingScene()) \{}
\DoxyCodeLine{01363       \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = m\_application-\/>getCurrentXsheet()-\/>getXsheet();}
\DoxyCodeLine{01364       \textcolor{keywordtype}{int} col      = m\_application-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{01365       \textcolor{keywordflow}{if} (xsh \&\& col >= 0) \{}
\DoxyCodeLine{01366         \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(frontIdx, col);}
\DoxyCodeLine{01367         \textcolor{keywordflow}{if} (!cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) fFid = cell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}();}
\DoxyCodeLine{01368       \}}
\DoxyCodeLine{01369     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01370       fFid = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_abb72e2ab0c1baeda0a8af3146003181d}{getFrameId}}(frontIdx);}
\DoxyCodeLine{01371 }
\DoxyCodeLine{01372     \textcolor{keywordflow}{if} (!fFid.isEmptyFrame()) fvi = sl-\/>getFrame(fFid, \textcolor{keyword}{false});}
\DoxyCodeLine{01373   \}}
\DoxyCodeLine{01374 }
\DoxyCodeLine{01375   \textcolor{keywordflow}{if} (!bvi \&\& !fvi) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01376 }
\DoxyCodeLine{01377   \textcolor{keywordtype}{int} bStrokeCount = bvi ? bvi-\/>getStrokeCount() : 0;}
\DoxyCodeLine{01378   \textcolor{keywordtype}{int} fStrokeCount = fvi ? fvi-\/>getStrokeCount() : 0;}
\DoxyCodeLine{01379 }
\DoxyCodeLine{01380   \textcolor{keywordflow}{if} (!bStrokeCount \&\& !fStrokeCount) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01381 }
\DoxyCodeLine{01382   \textcolor{keywordtype}{int} bStrokeIdx = getViewer()-\/>getGuidedBackStroke() != -\/1}
\DoxyCodeLine{01383                        ? getViewer()-\/>getGuidedBackStroke()}
\DoxyCodeLine{01384                        : cStrokeCount;}
\DoxyCodeLine{01385   \textcolor{keywordtype}{int} fStrokeIdx = getViewer()-\/>getGuidedFrontStroke() != -\/1}
\DoxyCodeLine{01386                        ? getViewer()-\/>getGuidedFrontStroke()}
\DoxyCodeLine{01387                        : cStrokeCount;}
\DoxyCodeLine{01388 }
\DoxyCodeLine{01389   \textcolor{keywordflow}{if} ((bStrokeCount \&\& bStrokeIdx >= bStrokeCount) ||}
\DoxyCodeLine{01390       (fStrokeCount \&\& fStrokeIdx >= fStrokeCount))}
\DoxyCodeLine{01391     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01392 }
\DoxyCodeLine{01393   \mbox{\hyperlink{class_t_stroke}{TStroke}} *bStroke = bvi ? bvi-\/>getStroke(bStrokeIdx) : 0;}
\DoxyCodeLine{01394   \mbox{\hyperlink{class_t_stroke}{TStroke}} *fStroke = fvi ? fvi-\/>getStroke(fStrokeIdx) : 0;}
\DoxyCodeLine{01395 }
\DoxyCodeLine{01396   \textcolor{keywordflow}{if} (!bStroke \&\& !fStroke) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01397 }
\DoxyCodeLine{01398   \mbox{\hyperlink{class_t_tool}{TTool}} *tool = TTool::getTool(T\_Brush, TTool::ToolTargetType::VectorImage);}
\DoxyCodeLine{01399   \mbox{\hyperlink{class_toonz_vector_brush_tool}{ToonzVectorBrushTool}} *vbTool = (\mbox{\hyperlink{class_toonz_vector_brush_tool}{ToonzVectorBrushTool}} *)tool;}
\DoxyCodeLine{01400   \textcolor{keywordflow}{if} (vbTool) \{}
\DoxyCodeLine{01401     \mbox{\hyperlink{class_t_tool_aabd06af7335f1ba0c96f36f1ac3e9976}{m\_isFrameCreated}} = \textcolor{keyword}{false};}
\DoxyCodeLine{01402     \mbox{\hyperlink{class_t_tool_afec1db61477579b224321fd469e4ec00}{m\_isLevelCreated}} = \textcolor{keyword}{false};}
\DoxyCodeLine{01403     vbTool-\/>\mbox{\hyperlink{class_t_tool_a668ac4790094a864ba6e37bd902303f1}{touchImage}}();}
\DoxyCodeLine{01404     vbTool-\/>setViewer(\mbox{\hyperlink{class_t_tool_a66f61f998b655c1c917ee63a595657c6}{m\_viewer}});}
\DoxyCodeLine{01405     TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{01406     \textcolor{keywordflow}{if} (bStroke)}
\DoxyCodeLine{01407       vbTool-\/>doFrameRangeStrokes(}
\DoxyCodeLine{01408           bFid, bStroke, cFid, cStroke,}
\DoxyCodeLine{01409           Preferences::instance()-\/>getGuidedInterpolation(), \textcolor{keyword}{false}, \textcolor{keyword}{false},}
\DoxyCodeLine{01410           \textcolor{keyword}{false}, \textcolor{keyword}{false}, \textcolor{keyword}{false}, \textcolor{keyword}{false});}
\DoxyCodeLine{01411     \textcolor{keywordflow}{if} (fStroke)}
\DoxyCodeLine{01412       vbTool-\/>doFrameRangeStrokes(}
\DoxyCodeLine{01413           cFid, cStroke, fFid, fStroke,}
\DoxyCodeLine{01414           Preferences::instance()-\/>getGuidedInterpolation(), \textcolor{keyword}{false}, \textcolor{keyword}{false},}
\DoxyCodeLine{01415           \textcolor{keyword}{false}, \textcolor{keyword}{false}, \textcolor{keyword}{false}, \textcolor{keyword}{false});}
\DoxyCodeLine{01416     TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{01417   \}}
\DoxyCodeLine{01418 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_aaa58ad223acef4a6afbffb09d2f04ed6}\label{class_t_tool_aaa58ad223acef4a6afbffb09d2f04ed6}} 
\index{TTool@{TTool}!tweenSelectedGuideStrokes@{tweenSelectedGuideStrokes}}
\index{tweenSelectedGuideStrokes@{tweenSelectedGuideStrokes}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{tweenSelectedGuideStrokes()}{tweenSelectedGuideStrokes()}}
{\footnotesize\ttfamily void TTool\+::tween\+Selected\+Guide\+Strokes (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01232                                       \{}
\DoxyCodeLine{01233   \textcolor{keywordflow}{if} (!getViewer() || !m\_application) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01234 }
\DoxyCodeLine{01235   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl =}
\DoxyCodeLine{01236       m\_application-\/>getCurrentLevel()-\/>getLevel()-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}();}
\DoxyCodeLine{01237   \textcolor{keywordflow}{if} (!sl) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01238 }
\DoxyCodeLine{01239   \textcolor{keywordtype}{int} backIdx = -\/1, frontIdx = -\/1;}
\DoxyCodeLine{01240 }
\DoxyCodeLine{01241   getViewer()-\/>getGuidedFrameIdx(\&backIdx, \&frontIdx);}
\DoxyCodeLine{01242 }
\DoxyCodeLine{01243   \textcolor{keywordflow}{if} (backIdx == -\/1 || frontIdx == -\/1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01244 }
\DoxyCodeLine{01245   \mbox{\hyperlink{class_t_frame_handle}{TFrameHandle}} *currentFrame = getApplication()-\/>getCurrentFrame();}
\DoxyCodeLine{01246   \textcolor{keywordtype}{int} row                    = currentFrame-\/>getFrameIndex();}
\DoxyCodeLine{01247   \mbox{\hyperlink{class_t_frame_id}{TFrameId}} bFid, cFid, fFid;}
\DoxyCodeLine{01248 }
\DoxyCodeLine{01249   cFid = \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}();}
\DoxyCodeLine{01250   \textcolor{keywordflow}{if} (cFid.isEmptyFrame()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01251 }
\DoxyCodeLine{01252   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} cvi = sl-\/>getFrame(cFid, \textcolor{keyword}{false});}
\DoxyCodeLine{01253   \textcolor{keywordflow}{if} (!cvi) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01254 }
\DoxyCodeLine{01255   \textcolor{keywordtype}{int} cStrokeCount = cvi-\/>getStrokeCount();}
\DoxyCodeLine{01256 }
\DoxyCodeLine{01257   \textcolor{keywordflow}{if} (currentFrame-\/>isEditingScene()) \{}
\DoxyCodeLine{01258     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = m\_application-\/>getCurrentXsheet()-\/>getXsheet();}
\DoxyCodeLine{01259     \textcolor{keywordtype}{int} col      = m\_application-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{01260     \textcolor{keywordflow}{if} (xsh \&\& col >= 0) \{}
\DoxyCodeLine{01261       \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(backIdx, col);}
\DoxyCodeLine{01262       \textcolor{keywordflow}{if} (!cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) bFid = cell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}();}
\DoxyCodeLine{01263       cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(frontIdx, col);}
\DoxyCodeLine{01264       \textcolor{keywordflow}{if} (!cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) fFid = cell.\mbox{\hyperlink{class_t_xsh_cell_a5a1965b96c2c698d6f0fb42a80c03406}{getFrameId}}();}
\DoxyCodeLine{01265     \}}
\DoxyCodeLine{01266   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01267     bFid = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_abb72e2ab0c1baeda0a8af3146003181d}{getFrameId}}(backIdx);}
\DoxyCodeLine{01268     fFid = sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_abb72e2ab0c1baeda0a8af3146003181d}{getFrameId}}(frontIdx);}
\DoxyCodeLine{01269   \}}
\DoxyCodeLine{01270   \textcolor{keywordflow}{if} (bFid.isEmptyFrame() || fFid.isEmptyFrame()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01271 }
\DoxyCodeLine{01272   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} bvi = sl-\/>getFrame(bFid, \textcolor{keyword}{false});}
\DoxyCodeLine{01273   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} fvi = sl-\/>getFrame(fFid, \textcolor{keyword}{false});}
\DoxyCodeLine{01274 }
\DoxyCodeLine{01275   \textcolor{keywordflow}{if} (!bvi || !fvi) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01276 }
\DoxyCodeLine{01277   \textcolor{keywordtype}{int} bStrokeCount = bvi-\/>getStrokeCount();}
\DoxyCodeLine{01278   \textcolor{keywordtype}{int} fStrokeCount = fvi-\/>getStrokeCount();}
\DoxyCodeLine{01279 }
\DoxyCodeLine{01280   \textcolor{keywordflow}{if} (!bStrokeCount || !fStrokeCount) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01281 }
\DoxyCodeLine{01282   \textcolor{keywordtype}{int} bStrokeIdx = getViewer()-\/>getGuidedBackStroke() != -\/1}
\DoxyCodeLine{01283                        ? getViewer()-\/>getGuidedBackStroke()}
\DoxyCodeLine{01284                        : cStrokeCount;}
\DoxyCodeLine{01285   \textcolor{keywordtype}{int} fStrokeIdx = getViewer()-\/>getGuidedFrontStroke() != -\/1}
\DoxyCodeLine{01286                        ? getViewer()-\/>getGuidedFrontStroke()}
\DoxyCodeLine{01287                        : cStrokeCount;}
\DoxyCodeLine{01288 }
\DoxyCodeLine{01289   \textcolor{keywordflow}{if} (bStrokeIdx >= bStrokeCount || fStrokeIdx >= fStrokeCount) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01290 }
\DoxyCodeLine{01291   \mbox{\hyperlink{class_t_stroke}{TStroke}} *bStroke = bvi-\/>getStroke(bStrokeIdx);}
\DoxyCodeLine{01292   \mbox{\hyperlink{class_t_stroke}{TStroke}} *fStroke = fvi-\/>getStroke(fStrokeIdx);}
\DoxyCodeLine{01293 }
\DoxyCodeLine{01294   \textcolor{keywordflow}{if} (!bStroke || !fStroke) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01295 }
\DoxyCodeLine{01296   \mbox{\hyperlink{class_t_tool}{TTool}} *tool = TTool::getTool(T\_Brush, TTool::ToolTargetType::VectorImage);}
\DoxyCodeLine{01297   \mbox{\hyperlink{class_toonz_vector_brush_tool}{ToonzVectorBrushTool}} *vbTool = (\mbox{\hyperlink{class_toonz_vector_brush_tool}{ToonzVectorBrushTool}} *)tool;}
\DoxyCodeLine{01298   \textcolor{keywordflow}{if} (vbTool) \{}
\DoxyCodeLine{01299     \mbox{\hyperlink{class_t_tool_aabd06af7335f1ba0c96f36f1ac3e9976}{m\_isFrameCreated}} = \textcolor{keyword}{false};}
\DoxyCodeLine{01300     \mbox{\hyperlink{class_t_tool_afec1db61477579b224321fd469e4ec00}{m\_isLevelCreated}} = \textcolor{keyword}{false};}
\DoxyCodeLine{01301     vbTool-\/>\mbox{\hyperlink{class_t_tool_a668ac4790094a864ba6e37bd902303f1}{touchImage}}();}
\DoxyCodeLine{01302     vbTool-\/>setViewer(\mbox{\hyperlink{class_t_tool_a66f61f998b655c1c917ee63a595657c6}{m\_viewer}});}
\DoxyCodeLine{01303     vbTool-\/>doFrameRangeStrokes(}
\DoxyCodeLine{01304         bFid, bStroke, fFid, fStroke,}
\DoxyCodeLine{01305         Preferences::instance()-\/>getGuidedInterpolation(), \textcolor{keyword}{false}, \textcolor{keyword}{false}, \textcolor{keyword}{false},}
\DoxyCodeLine{01306         \textcolor{keyword}{false}, \textcolor{keyword}{false}, \textcolor{keyword}{true});}
\DoxyCodeLine{01307   \}}
\DoxyCodeLine{01308 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a3638517d39dffe6abec0a4e1bcf990d3}\label{class_t_tool_a3638517d39dffe6abec0a4e1bcf990d3}} 
\index{TTool@{TTool}!updateEnabled@{updateEnabled}}
\index{updateEnabled@{updateEnabled}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{updateEnabled()}{updateEnabled()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily QString TTool\+::update\+Enabled (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Sets the tool\textquotesingle{}s {\itshape enability} and returns a reason in case the tool was disabled. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00828                              \{}
\DoxyCodeLine{00829   \textcolor{keywordtype}{int} rowIndex    = m\_application-\/>getCurrentFrame()-\/>getFrame();}
\DoxyCodeLine{00830   \textcolor{keywordtype}{int} columnIndex = m\_application-\/>getCurrentColumn()-\/>getColumnIndex();}
\DoxyCodeLine{00831 }
\DoxyCodeLine{00832   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_a3638517d39dffe6abec0a4e1bcf990d3}{updateEnabled}}(rowIndex, columnIndex);}
\DoxyCodeLine{00833 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00828}{update\+Enabled()}}.



Referenced by \mbox{\hyperlink{l03234}{Scene\+Viewer\+::invalidate\+Tool\+Status()}}, \mbox{\hyperlink{l00828}{update\+Enabled()}}, and \mbox{\hyperlink{l00092}{Toolbar\+::update\+Toolbar()}}.

\mbox{\Hypertarget{class_t_tool_ad29f43b1ac4db60a46397e1c8263bc4d}\label{class_t_tool_ad29f43b1ac4db60a46397e1c8263bc4d}} 
\index{TTool@{TTool}!updateEnabled@{updateEnabled}}
\index{updateEnabled@{updateEnabled}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{updateEnabled()}{updateEnabled()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily QString TTool\+::update\+Enabled (\begin{DoxyParamCaption}\item[{int}]{row\+Index,  }\item[{int}]{column\+Index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00836                                                           \{}
\DoxyCodeLine{00837   \textcolor{comment}{// Disable every tool during playback}}
\DoxyCodeLine{00838   \textcolor{keywordflow}{if} (m\_application-\/>getCurrentFrame()-\/>isPlaying())}
\DoxyCodeLine{00839     \textcolor{keywordflow}{return} (enable(\textcolor{keyword}{false}), QString());}
\DoxyCodeLine{00840 }
\DoxyCodeLine{00841   \textcolor{comment}{// Release Generic tools at once}}
\DoxyCodeLine{00842   \textcolor{keywordtype}{int} toolType   = getToolType();}
\DoxyCodeLine{00843   \textcolor{keywordtype}{int} targetType = getTargetType();}
\DoxyCodeLine{00844 }
\DoxyCodeLine{00845   \textcolor{keywordflow}{if} (toolType == \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296caa8f6293eab5817f82f74f031c0724f28}{TTool::GenericTool}}) \textcolor{keywordflow}{return} (enable(\textcolor{keyword}{true}), QString());}
\DoxyCodeLine{00846 }
\DoxyCodeLine{00847   \textcolor{comment}{// Retrieve vars and view modes}}
\DoxyCodeLine{00848   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh = m\_application-\/>getCurrentXsheet()-\/>getXsheet();}
\DoxyCodeLine{00849 }
\DoxyCodeLine{00850   \mbox{\hyperlink{class_t_xsh_column}{TXshColumn}} *column = (columnIndex >= 0) ? xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(columnIndex) : 0;}
\DoxyCodeLine{00851 }
\DoxyCodeLine{00852   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *xl       = m\_application-\/>getCurrentLevel()-\/>getLevel();}
\DoxyCodeLine{00853   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = xl ? xl-\/>\mbox{\hyperlink{class_t_xsh_level_a023065559cff76164ecb6344c586ba27}{getSimpleLevel}}() : 0;}
\DoxyCodeLine{00854   \textcolor{keywordtype}{int} levelType       = sl ? sl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() : NO\_XSHLEVEL;}
\DoxyCodeLine{00855 }
\DoxyCodeLine{00856   \textcolor{comment}{// If not in Level editor, let's use our current cell from the xsheet to}}
\DoxyCodeLine{00857   \textcolor{comment}{// find the nearest level before it}}
\DoxyCodeLine{00858   \textcolor{keywordflow}{if} (levelType == NO\_XSHLEVEL \&\&}
\DoxyCodeLine{00859       !m\_application-\/>getCurrentFrame()-\/>isEditingLevel()) \{}
\DoxyCodeLine{00860     \textcolor{keywordflow}{if} (!column || (column \&\& !column-\/>getSoundColumn())) \{}
\DoxyCodeLine{00861       \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(rowIndex, columnIndex);}
\DoxyCodeLine{00862       xl            = cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}() ? 0 : (\mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *)(\&cell.m\_level);}
\DoxyCodeLine{00863       sl            = cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}() ? 0 : cell.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{00864       levelType     = cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}() ? NO\_XSHLEVEL : cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}();}
\DoxyCodeLine{00865     \}}
\DoxyCodeLine{00866   \}}
\DoxyCodeLine{00867 }
\DoxyCodeLine{00868   \textcolor{keywordflow}{if} (Preferences::instance()-\/>isAutoCreateEnabled()) \{}
\DoxyCodeLine{00869     \textcolor{comment}{// If not in Level editor, let's use our current cell from the xsheet to}}
\DoxyCodeLine{00870     \textcolor{comment}{// find the nearest level before it}}
\DoxyCodeLine{00871     \textcolor{keywordflow}{if} (levelType == NO\_XSHLEVEL \&\&}
\DoxyCodeLine{00872         !m\_application-\/>getCurrentFrame()-\/>isEditingLevel()) \{}
\DoxyCodeLine{00873       \textcolor{keywordflow}{if} (!column || (column \&\& !column-\/>getSoundColumn())) \{}
\DoxyCodeLine{00874         \textcolor{keywordtype}{int} r0, r1;}
\DoxyCodeLine{00875         xsh-\/>\mbox{\hyperlink{class_t_xsheet_a26850469fb0f2886b717479050c32be2}{getCellRange}}(columnIndex, r0, r1);}
\DoxyCodeLine{00876         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} r = std::min(r1, rowIndex); r > r0; r-\/-\/) \{}
\DoxyCodeLine{00877           \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r, columnIndex);}
\DoxyCodeLine{00878           \textcolor{keywordflow}{if} (cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00879           xl        = (\mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *)(\&cell.m\_level);}
\DoxyCodeLine{00880           sl        = cell.\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{00881           levelType = cell.m\_level-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}();}
\DoxyCodeLine{00882           \textcolor{keywordflow}{break};}
\DoxyCodeLine{00883         \}}
\DoxyCodeLine{00884       \}}
\DoxyCodeLine{00885     \}}
\DoxyCodeLine{00886 }
\DoxyCodeLine{00887     \textcolor{comment}{// If the current tool does not match the current type, check for}}
\DoxyCodeLine{00888     \textcolor{comment}{// a version of the same tool that does}}
\DoxyCodeLine{00889     \{}
\DoxyCodeLine{00890       \mbox{\hyperlink{class_t_tool}{TTool}} *tool = \textcolor{keyword}{this};}
\DoxyCodeLine{00891 }
\DoxyCodeLine{00892       \textcolor{keywordflow}{if} ((levelType == PLI\_XSHLEVEL) \&\& !(targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a6528d353c20fcbe8932de09845117046}{VectorImage}}))}
\DoxyCodeLine{00893         tool = TTool::getTool(\mbox{\hyperlink{class_t_tool_ac92abce57c7c53b5b29847144c571fb1}{m\_name}}, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a6528d353c20fcbe8932de09845117046}{VectorImage}});}
\DoxyCodeLine{00894       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((levelType == TZP\_XSHLEVEL) \&\& !(targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{ToonzImage}}))}
\DoxyCodeLine{00895         tool = TTool::getTool(\mbox{\hyperlink{class_t_tool_ac92abce57c7c53b5b29847144c571fb1}{m\_name}}, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{ToonzImage}});}
\DoxyCodeLine{00896       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((levelType == OVL\_XSHLEVEL) \&\& !(targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a89c2e7968afae376f0be7abeff061859}{RasterImage}}))}
\DoxyCodeLine{00897         tool = TTool::getTool(\mbox{\hyperlink{class_t_tool_ac92abce57c7c53b5b29847144c571fb1}{m\_name}}, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a89c2e7968afae376f0be7abeff061859}{RasterImage}});}
\DoxyCodeLine{00898       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((levelType == MESH\_XSHLEVEL) \&\& !(targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c7eda2f062c0790a4ac7dc4acfc7232}{MeshImage}}))}
\DoxyCodeLine{00899         tool = TTool::getTool(\mbox{\hyperlink{class_t_tool_ac92abce57c7c53b5b29847144c571fb1}{m\_name}}, \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c7eda2f062c0790a4ac7dc4acfc7232}{MeshImage}});}
\DoxyCodeLine{00900 }
\DoxyCodeLine{00901       \textcolor{keywordflow}{if} (tool \&\& tool != \textcolor{keyword}{this} \&\& tool-\/>getTargetType() != TTool::NoTarget)}
\DoxyCodeLine{00902         \textcolor{keywordflow}{return} tool-\/>\mbox{\hyperlink{class_t_tool_a3638517d39dffe6abec0a4e1bcf990d3}{updateEnabled}}();}
\DoxyCodeLine{00903     \}}
\DoxyCodeLine{00904   \}}
\DoxyCodeLine{00905 }
\DoxyCodeLine{00906   \textcolor{keywordtype}{bool} spline = m\_application-\/>getCurrentObject()-\/>isSpline();}
\DoxyCodeLine{00907 }
\DoxyCodeLine{00908   \textcolor{keywordtype}{bool} filmstrip = m\_application-\/>getCurrentFrame()-\/>isEditingLevel();}
\DoxyCodeLine{00909 }
\DoxyCodeLine{00910   \textcolor{comment}{/*-\/-\/ MultiLayerStylePickerON -\/-\/*/}}
\DoxyCodeLine{00911   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_tool_ac92abce57c7c53b5b29847144c571fb1}{m\_name}} == T\_StylePicker \&\&}
\DoxyCodeLine{00912       Preferences::instance()-\/>isMultiLayerStylePickerEnabled())}
\DoxyCodeLine{00913     \textcolor{keywordflow}{return} (enable(\textcolor{keyword}{true}), QString());}
\DoxyCodeLine{00914 }
\DoxyCodeLine{00915   \textcolor{comment}{// Check against camera column}}
\DoxyCodeLine{00916   \textcolor{keywordflow}{if} (!filmstrip \&\& columnIndex < 0 \&\& (targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c576a0d6f800899d7be1cfaceef4d12}{TTool::EmptyTarget}}) \&\&}
\DoxyCodeLine{00917       (\mbox{\hyperlink{class_t_tool_ac92abce57c7c53b5b29847144c571fb1}{m\_name}} == T\_Type || \mbox{\hyperlink{class_t_tool_ac92abce57c7c53b5b29847144c571fb1}{m\_name}} == T\_Geometric || \mbox{\hyperlink{class_t_tool_ac92abce57c7c53b5b29847144c571fb1}{m\_name}} == T\_Brush))}
\DoxyCodeLine{00918     \textcolor{keywordflow}{return} (enable(\textcolor{keyword}{false}), QString());}
\DoxyCodeLine{00919 }
\DoxyCodeLine{00920   \textcolor{keywordtype}{bool} isZeraryCol =}
\DoxyCodeLine{00921       column ? (column-\/>getZeraryFxColumn() ? true : \textcolor{keyword}{false}) : \textcolor{keyword}{false};}
\DoxyCodeLine{00922   \textcolor{keywordtype}{bool} isPaletteCol =}
\DoxyCodeLine{00923       column ? (column-\/>getPaletteColumn() ? true : \textcolor{keyword}{false}) : \textcolor{keyword}{false};}
\DoxyCodeLine{00924   \textcolor{keywordtype}{bool} isMeshCol = column ? (column-\/>getMeshColumn() ? true : \textcolor{keyword}{false}) : \textcolor{keyword}{false};}
\DoxyCodeLine{00925 }
\DoxyCodeLine{00926   \textcolor{comment}{// Check against splines}}
\DoxyCodeLine{00927   \textcolor{keywordflow}{if} (spline \&\& (toolType \& TTool::LevelTool)) \{}
\DoxyCodeLine{00928     \textcolor{keywordflow}{return} (targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a71d3697cafb025fea3effa714e397980}{Splines}})}
\DoxyCodeLine{00929                ? (enable(\textcolor{keyword}{true}), QString())}
\DoxyCodeLine{00930                : (enable(\textcolor{keyword}{false}), QObject::tr(\textcolor{stringliteral}{"{}The current tool cannot be "{}}}
\DoxyCodeLine{00931                                              \textcolor{stringliteral}{"{}used to edit a motion path."{}}));}
\DoxyCodeLine{00932   \}}
\DoxyCodeLine{00933 }
\DoxyCodeLine{00934   \textcolor{comment}{// Check against unplaced columns (not in filmstrip mode)}}
\DoxyCodeLine{00935   \textcolor{keywordflow}{if} (column \&\& !filmstrip) \{}
\DoxyCodeLine{00936     \textcolor{keywordflow}{if} (column-\/>isLocked() \&\& \mbox{\hyperlink{class_t_tool_ac92abce57c7c53b5b29847144c571fb1}{m\_name}} != T\_Selection)}
\DoxyCodeLine{00937       \textcolor{keywordflow}{return} (enable(\textcolor{keyword}{false}), QObject::tr(\textcolor{stringliteral}{"{}The current column is locked."{}}));}
\DoxyCodeLine{00938 }
\DoxyCodeLine{00939     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!column-\/>isCamstandVisible())}
\DoxyCodeLine{00940       \textcolor{keywordflow}{return} (enable(\textcolor{keyword}{false}), QObject::tr(\textcolor{stringliteral}{"{}The current column is hidden."{}}));}
\DoxyCodeLine{00941 }
\DoxyCodeLine{00942     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (column-\/>getSoundColumn())}
\DoxyCodeLine{00943       \textcolor{keywordflow}{return} (enable(\textcolor{keyword}{false}),}
\DoxyCodeLine{00944               QObject::tr(\textcolor{stringliteral}{"{}It is not possible to edit the audio column."{}}));}
\DoxyCodeLine{00945 }
\DoxyCodeLine{00946     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (column-\/>getSoundTextColumn())}
\DoxyCodeLine{00947       \textcolor{keywordflow}{return} (}
\DoxyCodeLine{00948           enable(\textcolor{keyword}{false}),}
\DoxyCodeLine{00949           QObject::tr(}
\DoxyCodeLine{00950               \textcolor{stringliteral}{"{}Note columns can only be edited in the xsheet or timeline."{}}));}
\DoxyCodeLine{00951 }
\DoxyCodeLine{00952     \textcolor{keywordflow}{if} (toolType == \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296cab1cf4660322ca2d4e5a4848bdbc049a9}{TTool::ColumnTool}}) \{}
\DoxyCodeLine{00953       \textcolor{comment}{// Check column target}}
\DoxyCodeLine{00954       \textcolor{keywordflow}{if} (column-\/>getLevelColumn() \&\& !(targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4aa6443a8b4b8f50c7415bee045a27a309}{LevelColumns}}))}
\DoxyCodeLine{00955         \textcolor{keywordflow}{return} (}
\DoxyCodeLine{00956             enable(\textcolor{keyword}{false}),}
\DoxyCodeLine{00957             QObject::tr(\textcolor{stringliteral}{"{}The current tool cannot be used on a Level column."{}}));}
\DoxyCodeLine{00958 }
\DoxyCodeLine{00959       \textcolor{keywordflow}{if} (column-\/>getMeshColumn() \&\& !(targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a269e5d6d3f79dd14ab7aa2e3192eeaf1}{MeshColumns}}))}
\DoxyCodeLine{00960         \textcolor{keywordflow}{return} (}
\DoxyCodeLine{00961             enable(\textcolor{keyword}{false}),}
\DoxyCodeLine{00962             QObject::tr(\textcolor{stringliteral}{"{}The current tool cannot be used on a Mesh column."{}}));}
\DoxyCodeLine{00963     \}}
\DoxyCodeLine{00964   \}}
\DoxyCodeLine{00965 }
\DoxyCodeLine{00966   \textcolor{comment}{// Check column tools}}
\DoxyCodeLine{00967   \textcolor{keywordflow}{if} (toolType == \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296cab1cf4660322ca2d4e5a4848bdbc049a9}{TTool::ColumnTool}}) \{}
\DoxyCodeLine{00968     \textcolor{keywordflow}{if} (filmstrip)}
\DoxyCodeLine{00969       \textcolor{keywordflow}{return} (}
\DoxyCodeLine{00970           enable(\textcolor{keyword}{false}),}
\DoxyCodeLine{00971           QObject::tr(\textcolor{stringliteral}{"{}The current tool cannot be used in Level Strip mode."{}}));}
\DoxyCodeLine{00972 }
\DoxyCodeLine{00973     \textcolor{keywordflow}{if} ((!column || column-\/>isEmpty()) \&\& !(targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c576a0d6f800899d7be1cfaceef4d12}{TTool::EmptyTarget}}))}
\DoxyCodeLine{00974       \textcolor{keywordflow}{return} (enable(\textcolor{keyword}{false}), QString());}
\DoxyCodeLine{00975   \}}
\DoxyCodeLine{00976 }
\DoxyCodeLine{00977   \textcolor{comment}{// Check LevelRead \& LevelWrite tools}}
\DoxyCodeLine{00978   \textcolor{keywordflow}{if} (toolType \& TTool::LevelTool) \{}
\DoxyCodeLine{00979     \textcolor{comment}{// Check against empty levels}}
\DoxyCodeLine{00980     \textcolor{keywordflow}{if} (!xl)}
\DoxyCodeLine{00981       \textcolor{keywordflow}{return} ((targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c576a0d6f800899d7be1cfaceef4d12}{EmptyTarget}}) \&\& !isZeraryCol \&\& !isPaletteCol \&\&}
\DoxyCodeLine{00982               !isMeshCol)}
\DoxyCodeLine{00983                  ? (enable(\textcolor{keyword}{true}), QString())}
\DoxyCodeLine{00984                  : (enable(\textcolor{keyword}{false}), QString());}
\DoxyCodeLine{00985 }
\DoxyCodeLine{00986     \textcolor{comment}{// Check against simple-\/level-\/edness}}
\DoxyCodeLine{00987     \textcolor{keywordflow}{if} (!sl)}
\DoxyCodeLine{00988       \textcolor{keywordflow}{return} (enable(\textcolor{keyword}{false}),}
\DoxyCodeLine{00989               QObject::tr(\textcolor{stringliteral}{"{}The current level is not editable."{}}));  \textcolor{comment}{// Does it}}
\DoxyCodeLine{00990                                                                    \textcolor{comment}{// happen at}}
\DoxyCodeLine{00991                                                                    \textcolor{comment}{// all btw?}}
\DoxyCodeLine{00992 }
\DoxyCodeLine{00993     \textcolor{comment}{// Check against level types}}
\DoxyCodeLine{00994     \{}
\DoxyCodeLine{00995       \textcolor{keywordflow}{if} ((levelType == PLI\_XSHLEVEL) \&\& !(targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a6528d353c20fcbe8932de09845117046}{VectorImage}}))}
\DoxyCodeLine{00996         \textcolor{keywordflow}{return} (}
\DoxyCodeLine{00997             enable(\textcolor{keyword}{false}),}
\DoxyCodeLine{00998             QObject::tr(\textcolor{stringliteral}{"{}The current tool cannot be used on a Vector Level."{}}));}
\DoxyCodeLine{00999 }
\DoxyCodeLine{01000       \textcolor{keywordflow}{if} ((levelType == TZP\_XSHLEVEL) \&\& !(targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a68b7e2c2f25d134cb0debc4548d23ce1}{ToonzImage}}))}
\DoxyCodeLine{01001         \textcolor{keywordflow}{return} (}
\DoxyCodeLine{01002             enable(\textcolor{keyword}{false}),}
\DoxyCodeLine{01003             QObject::tr(\textcolor{stringliteral}{"{}The current tool cannot be used on a Toonz Level."{}}));}
\DoxyCodeLine{01004 }
\DoxyCodeLine{01005       \textcolor{keywordflow}{if} ((levelType == OVL\_XSHLEVEL) \&\& !(targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a89c2e7968afae376f0be7abeff061859}{RasterImage}}))}
\DoxyCodeLine{01006         \textcolor{keywordflow}{return} (}
\DoxyCodeLine{01007             enable(\textcolor{keyword}{false}),}
\DoxyCodeLine{01008             QObject::tr(\textcolor{stringliteral}{"{}The current tool cannot be used on a Raster Level."{}}));}
\DoxyCodeLine{01009 }
\DoxyCodeLine{01010       \textcolor{keywordflow}{if} ((levelType == MESH\_XSHLEVEL) \&\& !(targetType \& \mbox{\hyperlink{class_t_tool_adf0ea3a7f9d003f761fe57638dd6eff4a2c7eda2f062c0790a4ac7dc4acfc7232}{MeshImage}}))}
\DoxyCodeLine{01011         \textcolor{keywordflow}{return} (}
\DoxyCodeLine{01012             enable(\textcolor{keyword}{false}),}
\DoxyCodeLine{01013             QObject::tr(\textcolor{stringliteral}{"{}The current tool cannot be used on a Mesh Level."{}}));}
\DoxyCodeLine{01014     \}}
\DoxyCodeLine{01015 }
\DoxyCodeLine{01016     \textcolor{comment}{// Check against impossibly traceable movements on the column}}
\DoxyCodeLine{01017     \textcolor{keywordflow}{if} ((levelType \& LEVELCOLUMN\_XSHLEVEL) \&\& !filmstrip \&\& columnIndex >= 0) \{}
\DoxyCodeLine{01018       \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *obj =}
\DoxyCodeLine{01019           xsh-\/>\mbox{\hyperlink{class_t_xsheet_a13d9b9c08ca8dde39769f5644e046ee5}{getStageObject}}(TStageObjectId::ColumnId(columnIndex));}
\DoxyCodeLine{01020       \textcolor{comment}{// Test for Mesh-\/deformed levels}}
\DoxyCodeLine{01021       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} \&parentId = obj-\/>\mbox{\hyperlink{class_t_stage_object_afb4724a8cc2ef7eb2c6c7585834210f2}{getParent}}();}
\DoxyCodeLine{01022       \textcolor{keywordflow}{if} (parentId.\mbox{\hyperlink{class_t_stage_object_id_af6d13fcf31e7e10eef28f085855f469c}{isColumn}}() \&\& obj-\/>\mbox{\hyperlink{class_t_stage_object_a6025ddfaaae4ebe384894230d69f0b46}{getParentHandle}}()[0] != \textcolor{charliteral}{'H'}) \{}
\DoxyCodeLine{01023         \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *parentSl =}
\DoxyCodeLine{01024             xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(rowIndex, parentId.getIndex()).getSimpleLevel();}
\DoxyCodeLine{01025         \textcolor{keywordflow}{if} (parentSl \&\& parentSl-\/>\mbox{\hyperlink{class_t_xsh_level_a1a147f1e970a62120c0bbaf0020a8932}{getType}}() == MESH\_XSHLEVEL \&\&}
\DoxyCodeLine{01026             \mbox{\hyperlink{class_t_tool_ac92abce57c7c53b5b29847144c571fb1}{m\_name}} != T\_Selection)}
\DoxyCodeLine{01027           \textcolor{keywordflow}{return} (}
\DoxyCodeLine{01028               enable(\textcolor{keyword}{false}),}
\DoxyCodeLine{01029               QObject::tr(}
\DoxyCodeLine{01030                   \textcolor{stringliteral}{"{}The current tool cannot be used on a mesh-\/deformed level"{}}));}
\DoxyCodeLine{01031       \}}
\DoxyCodeLine{01032     \}}
\DoxyCodeLine{01033 }
\DoxyCodeLine{01034     \textcolor{comment}{// Check TTool::ImageType tools}}
\DoxyCodeLine{01035     \textcolor{keywordflow}{if} (toolType == \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca01ffd66b00b05a88c02ce8ceb5da3b8b}{TTool::LevelWriteTool}} \&\& \mbox{\hyperlink{class_t_tool_ac92abce57c7c53b5b29847144c571fb1}{m\_name}} != T\_Selection) \{}
\DoxyCodeLine{01036       \textcolor{comment}{// Check level against read-\/only status}}
\DoxyCodeLine{01037       \textcolor{keywordflow}{if} (sl-\/>isFrameReadOnly(\mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}()))}
\DoxyCodeLine{01038         \textcolor{keywordflow}{return} (enable(\textcolor{keyword}{false}),}
\DoxyCodeLine{01039                 QObject::tr(}
\DoxyCodeLine{01040                     \textcolor{stringliteral}{"{}The current frame is locked: any editing is forbidden."{}}));}
\DoxyCodeLine{01041 }
\DoxyCodeLine{01042       \textcolor{comment}{// Check level type write support}}
\DoxyCodeLine{01043       \textcolor{keywordflow}{if} (sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}().\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() ==}
\DoxyCodeLine{01044               \textcolor{stringliteral}{"{}psd"{}} ||  \textcolor{comment}{// We don't have the API to write psd files}}
\DoxyCodeLine{01045           sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}().\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}gif"{}} ||}
\DoxyCodeLine{01046           sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}().\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}mp4"{}} ||}
\DoxyCodeLine{01047           sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a668293d53a70cca8811db28d87011c55}{getPath}}().\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}() == \textcolor{stringliteral}{"{}webm"{}} ||}
\DoxyCodeLine{01048           sl-\/>is16BitChannelLevel() ||  \textcolor{comment}{// Inherited by previous}}
\DoxyCodeLine{01049                                         \textcolor{comment}{// implementation.}}
\DoxyCodeLine{01050                                         \textcolor{comment}{// Could be fixed?}}
\DoxyCodeLine{01051           sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a88741317c54640d3b509f32a7c0fdf84}{getBpp}}() ==}
\DoxyCodeLine{01052               1)  \textcolor{comment}{// Black \& White images. Again, could be fixed?}}
\DoxyCodeLine{01053 }
\DoxyCodeLine{01054         \textcolor{keywordflow}{return} (enable(\textcolor{keyword}{false}),}
\DoxyCodeLine{01055                 QObject::tr(\textcolor{stringliteral}{"{}The current level is not editable."{}}));}
\DoxyCodeLine{01056     \}}
\DoxyCodeLine{01057   \}}
\DoxyCodeLine{01058 }
\DoxyCodeLine{01059   \textcolor{keywordflow}{return} (enable(\textcolor{keyword}{true}), QString());}
\DoxyCodeLine{01060 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a1a5f380464a6b36947212e2f8d5b314c}\label{class_t_tool_a1a5f380464a6b36947212e2f8d5b314c}} 
\index{TTool@{TTool}!updateMatrix@{updateMatrix}}
\index{updateMatrix@{updateMatrix}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{updateMatrix()}{updateMatrix()}}
{\footnotesize\ttfamily void TTool\+::update\+Matrix (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Updates the current matrix transformation with the actual column matrix transformation. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_tool_a73c1b7f13eaea33e1d305636f44c4a64}{get\+Current\+Column\+Matrix()}}. 
\end{DoxySeeAlso}


Reimplemented in \mbox{\hyperlink{class_edit_tool_afd852a706783ccf324c899f613764cd0}{Edit\+Tool}}, \mbox{\hyperlink{class_hook_tool_ab13e00509be85e6ab57c8acaf51f3606}{Hook\+Tool}}, \mbox{\hyperlink{class_skeleton_tool_ae13ff691474b99b7720df4fee38d893c}{Skeleton\+Tool}}, and \mbox{\hyperlink{class_rotate_tool_adb19b97fe1040caabdec28c0a7dbb834}{Rotate\+Tool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00801                          \{}
\DoxyCodeLine{00802   assert(m\_application);}
\DoxyCodeLine{00803 }
\DoxyCodeLine{00804   \textcolor{keywordflow}{if} (m\_application-\/>getCurrentObject()-\/>isSpline())}
\DoxyCodeLine{00805     setMatrix(getCurrentObjectParentMatrix2());}
\DoxyCodeLine{00806   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00807     setMatrix(\mbox{\hyperlink{class_t_tool_a73c1b7f13eaea33e1d305636f44c4a64}{getCurrentColumnMatrix}}());}
\DoxyCodeLine{00808 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00706}{get\+Current\+Column\+Matrix()}}.



Referenced by \mbox{\hyperlink{l03234}{Scene\+Viewer\+::invalidate\+Tool\+Status()}}, and \mbox{\hyperlink{l00152}{Hook\+Tool\+::update\+Matrix()}}.

\mbox{\Hypertarget{class_t_tool_a6cb0478607efdb92f5247cce35259188}\label{class_t_tool_a6cb0478607efdb92f5247cce35259188}} 
\index{TTool@{TTool}!updateToolsPropertiesTranslation@{updateToolsPropertiesTranslation}}
\index{updateToolsPropertiesTranslation@{updateToolsPropertiesTranslation}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{updateToolsPropertiesTranslation()}{updateToolsPropertiesTranslation()}}
{\footnotesize\ttfamily void TTool\+::update\+Tools\+Properties\+Translation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

This function is necessary since tools are created before the main application (TAB or Toonz) starts, and hence tr() calls have no effect (the translation is not yet installed -\/ to install one you need at least an instance of QApplication / QCore\+Application).

\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{deprecated__deprecated000009}{Deprecated}}]This so much stinks of a bug turned into design choice... \end{DoxyRefDesc}
Updates translation of the bound properties of 
\begin{DoxyCode}{0}
\DoxyCodeLine{00532                                              \{}
\DoxyCodeLine{00533   ToolTable::iterator tt, tEnd(toolTable-\/>end());}
\DoxyCodeLine{00534   \textcolor{keywordflow}{for} (tt = toolTable-\/>begin(); tt != tEnd; ++tt)}
\DoxyCodeLine{00535     tt-\/>second-\/>updateTranslation();}
\DoxyCodeLine{00536 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_tool_a902a844478056fa8ace11d75b05fb6a5}\label{class_t_tool_a902a844478056fa8ace11d75b05fb6a5}} 
\index{TTool@{TTool}!updateTranslation@{updateTranslation}}
\index{updateTranslation@{updateTranslation}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{updateTranslation()}{updateTranslation()}}
{\footnotesize\ttfamily virtual void TTool\+::update\+Translation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00377 \{\};}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_t_tool_aefd7997f3dc0226dc8ac8fcbd116f02d}\label{class_t_tool_aefd7997f3dc0226dc8ac8fcbd116f02d}} 
\index{TTool@{TTool}!m\_active@{m\_active}}
\index{m\_active@{m\_active}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{m\_active}{m\_active}}
{\footnotesize\ttfamily bool TTool\+::m\+\_\+active\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_tool_a580defbdf43efe0a228d647900d03a60}\label{class_t_tool_a580defbdf43efe0a228d647900d03a60}} 
\index{TTool@{TTool}!m\_application@{m\_application}}
\index{m\_application@{m\_application}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{m\_application}{m\_application}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_application}{TTool\+::\+Application}} $\ast$ TTool\+::m\+\_\+application = 0\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_tool_a9345d88f41578058ccb2d6e681591c09}\label{class_t_tool_a9345d88f41578058ccb2d6e681591c09}} 
\index{TTool@{TTool}!m\_cellsData@{m\_cellsData}}
\index{m\_cellsData@{m\_cellsData}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{m\_cellsData}{m\_cellsData}}
{\footnotesize\ttfamily std\+::vector$<$ \mbox{\hyperlink{struct_t_tool_1_1_cell_ops}{TTool\+::\+Cell\+Ops}} $>$ TTool\+::m\+\_\+cells\+Data\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{deprecated__deprecated000010}{Deprecated}}]brutto brutto. fix quick \& dirty del baco \#6213 (undo \end{DoxyRefDesc}


Referenced by \mbox{\hyperlink{l00294}{touch\+Image()}}.

\mbox{\Hypertarget{class_t_tool_a3552ce52afc39fffcab0492daf72ed16}\label{class_t_tool_a3552ce52afc39fffcab0492daf72ed16}} 
\index{TTool@{TTool}!m\_enabled@{m\_enabled}}
\index{m\_enabled@{m\_enabled}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{m\_enabled}{m\_enabled}}
{\footnotesize\ttfamily bool TTool\+::m\+\_\+enabled\hspace{0.3cm}{\ttfamily [protected]}}



Whether the tool allows user interaction. 

\mbox{\Hypertarget{class_t_tool_aabd06af7335f1ba0c96f36f1ac3e9976}\label{class_t_tool_aabd06af7335f1ba0c96f36f1ac3e9976}} 
\index{TTool@{TTool}!m\_isFrameCreated@{m\_isFrameCreated}}
\index{m\_isFrameCreated@{m\_isFrameCreated}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{m\_isFrameCreated}{m\_isFrameCreated}}
{\footnotesize\ttfamily bool TTool\+::m\+\_\+is\+Frame\+Created = false\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{deprecated__deprecated000012}{Deprecated}}]Shouldn\textquotesingle{}t expose global static variables. \end{DoxyRefDesc}


Referenced by \mbox{\hyperlink{l01569}{Toonz\+Raster\+Brush\+Tool\+::finish\+Raster\+Brush()}}, \mbox{\hyperlink{l00290}{Full\+Color\+Brush\+Tool\+::pre\+Left\+Button\+Down()}}, \mbox{\hyperlink{l01226}{Toonz\+Raster\+Brush\+Tool\+::pre\+Left\+Button\+Down()}}, \mbox{\hyperlink{l00655}{Toonz\+Vector\+Brush\+Tool\+::pre\+Left\+Button\+Down()}}, and \mbox{\hyperlink{l00294}{touch\+Image()}}.

\mbox{\Hypertarget{class_t_tool_afec1db61477579b224321fd469e4ec00}\label{class_t_tool_afec1db61477579b224321fd469e4ec00}} 
\index{TTool@{TTool}!m\_isLevelCreated@{m\_isLevelCreated}}
\index{m\_isLevelCreated@{m\_isLevelCreated}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{m\_isLevelCreated}{m\_isLevelCreated}}
{\footnotesize\ttfamily bool TTool\+::m\+\_\+is\+Level\+Created = false\hspace{0.3cm}{\ttfamily [static]}}

con animation sheet) spiegazioni in \mbox{\hyperlink{}{tool.\+cpp}} \begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{deprecated__deprecated000011}{Deprecated}}]Shouldn\textquotesingle{}t expose global static variables. \end{DoxyRefDesc}


Referenced by \mbox{\hyperlink{l01569}{Toonz\+Raster\+Brush\+Tool\+::finish\+Raster\+Brush()}}, and \mbox{\hyperlink{l00294}{touch\+Image()}}.

\mbox{\Hypertarget{class_t_tool_a5352244b885e57127a018982f4944c89}\label{class_t_tool_a5352244b885e57127a018982f4944c89}} 
\index{TTool@{TTool}!m\_isLevelRenumbererd@{m\_isLevelRenumbererd}}
\index{m\_isLevelRenumbererd@{m\_isLevelRenumbererd}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{m\_isLevelRenumbererd}{m\_isLevelRenumbererd}}
{\footnotesize\ttfamily bool TTool\+::m\+\_\+is\+Level\+Renumbererd = false\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\Hypertarget{class_t_tool_a3bf7058680c3aef9a5584a7f71351757}\label{class_t_tool_a3bf7058680c3aef9a5584a7f71351757}} 
\index{TTool@{TTool}!m\_matrix@{m\_matrix}}
\index{m\_matrix@{m\_matrix}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{m\_matrix}{m\_matrix}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_affine}{TAffine}} TTool\+::m\+\_\+matrix\hspace{0.3cm}{\ttfamily [protected]}}



World-\/to-\/window reference change affine. 

\mbox{\Hypertarget{class_t_tool_ac92abce57c7c53b5b29847144c571fb1}\label{class_t_tool_ac92abce57c7c53b5b29847144c571fb1}} 
\index{TTool@{TTool}!m\_name@{m\_name}}
\index{m\_name@{m\_name}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{m\_name}{m\_name}}
{\footnotesize\ttfamily std\+::string TTool\+::m\+\_\+name\hspace{0.3cm}{\ttfamily [protected]}}



The tool\textquotesingle{}s name. 

\mbox{\Hypertarget{class_t_tool_aac560f501994828462e15fd54d05ed68}\label{class_t_tool_aac560f501994828462e15fd54d05ed68}} 
\index{TTool@{TTool}!m\_newFids@{m\_newFids}}
\index{m\_newFids@{m\_newFids}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{m\_newFids}{m\_newFids}}
{\footnotesize\ttfamily std\+::vector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ TTool\+::m\+\_\+new\+Fids\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\Hypertarget{class_t_tool_a89974c7589cad70945bfec7f4c1f1906}\label{class_t_tool_a89974c7589cad70945bfec7f4c1f1906}} 
\index{TTool@{TTool}!m\_oldFids@{m\_oldFids}}
\index{m\_oldFids@{m\_oldFids}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{m\_oldFids}{m\_oldFids}}
{\footnotesize\ttfamily std\+::vector$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ TTool\+::m\+\_\+old\+Fids\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\Hypertarget{class_t_tool_a54bf7db989aa872f4cc412bb2ac3efc0}\label{class_t_tool_a54bf7db989aa872f4cc412bb2ac3efc0}} 
\index{TTool@{TTool}!m\_picking@{m\_picking}}
\index{m\_picking@{m\_picking}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{m\_picking}{m\_picking}}
{\footnotesize\ttfamily bool TTool\+::m\+\_\+picking\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_tool_adfd05e8e92235633621dbab55fe3c76f}\label{class_t_tool_adfd05e8e92235633621dbab55fe3c76f}} 
\index{TTool@{TTool}!m\_selectedFrames@{m\_selectedFrames}}
\index{m\_selectedFrames@{m\_selectedFrames}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{m\_selectedFrames}{m\_selectedFrames}}
{\footnotesize\ttfamily std\+::set$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ TTool\+::m\+\_\+selected\+Frames = std\+::set$<$\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}}$>$()\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_tool_ad84e5837b3ed638e3e73373c3195a589}\label{class_t_tool_ad84e5837b3ed638e3e73373c3195a589}} 
\index{TTool@{TTool}!m\_targetType@{m\_targetType}}
\index{m\_targetType@{m\_targetType}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{m\_targetType}{m\_targetType}}
{\footnotesize\ttfamily int TTool\+::m\+\_\+target\+Type\hspace{0.3cm}{\ttfamily [protected]}}



The tool\textquotesingle{}s image type target. 



Referenced by \mbox{\hyperlink{l02144}{Fill\+Tool\+::draw()}}, \mbox{\hyperlink{l02270}{Fill\+Tool\+::on\+Activate()}}, and \mbox{\hyperlink{l01185}{Geometric\+Tool\+::on\+Activate()}}.

\mbox{\Hypertarget{class_t_tool_a66f61f998b655c1c917ee63a595657c6}\label{class_t_tool_a66f61f998b655c1c917ee63a595657c6}} 
\index{TTool@{TTool}!m\_viewer@{m\_viewer}}
\index{m\_viewer@{m\_viewer}!TTool@{TTool}}
\doxysubsubsection{\texorpdfstring{m\_viewer}{m\_viewer}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_tool_1_1_viewer}{Viewer}}$\ast$ TTool\+::m\+\_\+viewer\hspace{0.3cm}{\ttfamily [protected]}}



Tool\textquotesingle{}s current viewer. 



Referenced by \mbox{\hyperlink{l00187}{Rotate\+Tool\+::draw()}}, \mbox{\hyperlink{l00970}{Control\+Point\+Editor\+Tool\+::get\+Cursor\+Id()}}, \mbox{\hyperlink{l01254}{Geometric\+Tool\+::get\+Cursor\+Id()}}, \mbox{\hyperlink{l00446}{Magnet\+Tool\+::get\+Cursor\+Id()}}, \mbox{\hyperlink{l00121}{Pump\+Tool\+::get\+Cursor\+Id()}}, \mbox{\hyperlink{l00110}{Toonz\+Vector\+Brush\+Tool\+::get\+Cursor\+Id()}}, \mbox{\hyperlink{l00392}{Type\+Tool\+::get\+Cursor\+Id()}}, \mbox{\hyperlink{l00335}{Vector\+Selection\+Tool\+::get\+Cursor\+Id()}}, \mbox{\hyperlink{l00540}{invalidate()}}, \mbox{\hyperlink{l00557}{pick()}}, and \mbox{\hyperlink{l00812}{reset\+Input\+Method()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/tools/tool.\+h\item 
E\+:/opentoonz/toonz/sources/tnztools/tool.\+cpp\end{DoxyCompactItemize}
