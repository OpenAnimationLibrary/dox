\hypertarget{class_iwa___motion_blur_comp_fx}{}\doxysection{Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx Class Reference}
\label{class_iwa___motion_blur_comp_fx}\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
Inheritance diagram for Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=6.000000cm]{class_iwa___motion_blur_comp_fx}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_adab766a775b6419f0b439e8a67ac9c69}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&settings) override
\item 
void \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_a327ebc894847f82b32882e0263592611}{do\+Compute\+\_\+\+CPU}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&settings, \mbox{\hyperlink{structfloat4}{float4}} $\ast$points\+Table, int point\+Amount, double hardness, double shutter\+Start, double shutter\+End, int trace\+Resolution, float start\+Value, float start\+Curve, float end\+Value, float end\+Curve, int margin\+Left, int margin\+Right, int margin\+Top, int margin\+Bottom, \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&enlarged\+Dim\+In, \mbox{\hyperlink{class_t_tile}{TTile}} \&enlarge\+\_\+tile, \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&dim\+Out, \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&filter\+Dim, \mbox{\hyperlink{class_t_tile}{TTile}} \&back\+\_\+tile)
\item 
bool \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_ac0fa6814252660b1fe973aa97cbaf092}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
bool \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_a9b67c5c036d69665ada64307561c88bd}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\item 
std\+::string \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_ade05d49d3ef77cbdb1b3c01bc129b411}{get\+Alias}} (double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) const override
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} , typename PIXEL $>$ }\\bool \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_ae5a183329edd395bf078de2552d4a800}{set\+Source\+Raster}} (const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} src\+Ras, \mbox{\hyperlink{structfloat4}{float4}} $\ast$dst\+Mem, \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} dim, Premulti\+Types type=AUTO)
\item 
{\footnotesize template$<$typename \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} , typename PIXEL $>$ }\\void \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_a9462f2eed0f19b7bcb2d1926d04f7f3c}{set\+Output\+Raster}} (\mbox{\hyperlink{structfloat4}{float4}} $\ast$src\+Mem, const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} dst\+Ras, \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} dim, \mbox{\hyperlink{structint2}{int2}} margin)
\item 
void \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_a77ce3e97a975b8963a56470a4c09c33e}{make\+Motion\+Blur\+Filter\+\_\+\+CPU}} (float $\ast$filter\+\_\+p, \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&filter\+Dim, int margin\+Left, int margin\+Bottom, \mbox{\hyperlink{structfloat4}{float4}} $\ast$points\+Table, int point\+Amount, float start\+Value, float start\+Curve, float end\+Value, float end\+Curve)
\item 
void \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_a86581b6a51c482164b7a56aced7e90d0}{make\+Zanzo\+Filter\+\_\+\+CPU}} (float $\ast$filter\+\_\+p, \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&filter\+Dim, int margin\+Left, int margin\+Bottom, \mbox{\hyperlink{structfloat4}{float4}} $\ast$points\+Table, int point\+Amount, float start\+Value, float start\+Curve, float end\+Value, float end\+Curve)
\item 
void \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_ac9d766e1a64922ef4b65400d4e7b6370}{convert\+RGBto\+Exposure\+\_\+\+CPU}} (\mbox{\hyperlink{structfloat4}{float4}} $\ast$in\+\_\+tile\+\_\+p, \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&dim, float hardness, bool source\+Is\+Premultiplied)
\item 
void \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_a5ce333d1a8fbbd86de2fc6b8c77a85f1}{apply\+Blur\+Filter\+\_\+\+CPU}} (\mbox{\hyperlink{structfloat4}{float4}} $\ast$in\+\_\+tile\+\_\+p, \mbox{\hyperlink{structfloat4}{float4}} $\ast$out\+\_\+tile\+\_\+p, \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&dim, float $\ast$filter\+\_\+p, \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&filter\+Dim, int margin\+Left, int margin\+Bottom, int margin\+Right, int margin\+Top, \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&out\+Dim)
\item 
void \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_a0f31d4027423e62d18e0e184ff7b60f9}{convert\+Exposure\+To\+RGB\+\_\+\+CPU}} (\mbox{\hyperlink{structfloat4}{float4}} $\ast$out\+\_\+tile\+\_\+p, \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&dim, float hardness)
\item 
void \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_a7d8b7016a5d8ac4072d7b35eaa216dd6}{compose\+With\+No\+Motion}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&settings)
\item 
void \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_a410627006e014e8cc3eeea24bb0c0964}{compose\+Background\+Exposure\+\_\+\+CPU}} (\mbox{\hyperlink{structfloat4}{float4}} $\ast$out\+\_\+tile\+\_\+p, \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&enlarged\+Dim\+In, int margin\+Right, int margin\+Top, \mbox{\hyperlink{class_t_tile}{TTile}} \&back\+\_\+tile, \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&dim\+Out, float hardness)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_aac4c650e8b2577fae37b60457038787f}{m\+\_\+input}}
\item 
\mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_aad78d5dde8a10463f9cb0ed0c9690a20}{m\+\_\+background}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_a8649c5adac787e9a47c0e65fee80982e}{m\+\_\+hardness}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_ac16fb60ae13fe358e5a8252359334809}{m\+\_\+start\+Value}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_a9b5e98f57dc57b20995aca462b6755a5}{m\+\_\+start\+Curve}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_acbaad9f146d76b3310ec9c8a05aee256}{m\+\_\+end\+Value}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_af8b21373cdc37b4d0664af3cf8e4c410}{m\+\_\+end\+Curve}}
\item 
TBool\+ParamP \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_a697b30a9360ac9da9d8fdd3a3c508d3f}{m\+\_\+zanzo\+Mode}}
\item 
\mbox{\hyperlink{class_t_int_enum_param_p}{TInt\+Enum\+ParamP}} \mbox{\hyperlink{class_iwa___motion_blur_comp_fx_a5e86c058d5007ece3226ef691adad633}{m\+\_\+premulti\+Type}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_ac1db54ead55f5fd1c103ad05febe82bf}\label{class_iwa___motion_blur_comp_fx_ac1db54ead55f5fd1c103ad05febe82bf}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{Iwa\_MotionBlurCompFx()}{Iwa\_MotionBlurCompFx()}}
{\footnotesize\ttfamily Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::\+Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00600     : m\_hardness(0.3)}
\DoxyCodeLine{00601     \textcolor{comment}{/* Parameters for blurring left and right */}}
\DoxyCodeLine{00602     , m\_startValue(1.0)}
\DoxyCodeLine{00603     , m\_startCurve(1.0)}
\DoxyCodeLine{00604     , m\_endValue(1.0)}
\DoxyCodeLine{00605     , m\_endCurve(1.0)}
\DoxyCodeLine{00606     , m\_zanzoMode(\textcolor{keyword}{false})}
\DoxyCodeLine{00607     , m\_premultiType(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_enum_param}{TIntEnumParam}}(AUTO, \textcolor{stringliteral}{"{}Auto"{}})) \{}
\DoxyCodeLine{00608   \textcolor{comment}{/* Bind common parameters */}}
\DoxyCodeLine{00609   \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Source"{}}, m\_input);}
\DoxyCodeLine{00610   \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Back"{}}, m\_background);}
\DoxyCodeLine{00611 }
\DoxyCodeLine{00612   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}hardness"{}}, m\_hardness);}
\DoxyCodeLine{00613   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}shutterStart"{}}, m\_shutterStart);}
\DoxyCodeLine{00614   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}shutterEnd"{}}, m\_shutterEnd);}
\DoxyCodeLine{00615   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}traceResolution"{}}, m\_traceResolution);}
\DoxyCodeLine{00616   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}motionObjectType"{}}, m\_motionObjectType);}
\DoxyCodeLine{00617   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}motionObjectIndex"{}}, m\_motionObjectIndex);}
\DoxyCodeLine{00618 }
\DoxyCodeLine{00619   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}startValue"{}}, m\_startValue);}
\DoxyCodeLine{00620   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}startCurve"{}}, m\_startCurve);}
\DoxyCodeLine{00621   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}endValue"{}}, m\_endValue);}
\DoxyCodeLine{00622   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}endCurve"{}}, m\_endCurve);}
\DoxyCodeLine{00623 }
\DoxyCodeLine{00624   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}zanzoMode"{}}, m\_zanzoMode);}
\DoxyCodeLine{00625 }
\DoxyCodeLine{00626   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}premultiType"{}}, m\_premultiType);}
\DoxyCodeLine{00627 }
\DoxyCodeLine{00628   \textcolor{comment}{/* Common parameter range setting */}}
\DoxyCodeLine{00629   m\_hardness-\/>setValueRange(0.05, 10.0);}
\DoxyCodeLine{00630   m\_startValue-\/>setValueRange(0.0, 1.0);}
\DoxyCodeLine{00631   m\_startCurve-\/>setValueRange(0.1, 10.0);}
\DoxyCodeLine{00632   m\_endValue-\/>setValueRange(0.0, 1.0);}
\DoxyCodeLine{00633   m\_endCurve-\/>setValueRange(0.1, 10.0);}
\DoxyCodeLine{00634 }
\DoxyCodeLine{00635   m\_premultiType-\/>addItem(SOURCE\_IS\_PREMULTIPLIED, \textcolor{stringliteral}{"{}Source is premultiplied"{}});}
\DoxyCodeLine{00636   m\_premultiType-\/>addItem(SOURCE\_IS\_NOT\_PREMUTIPLIED,}
\DoxyCodeLine{00637                           \textcolor{stringliteral}{"{}Source is NOT premultiplied"{}});}
\DoxyCodeLine{00638 }
\DoxyCodeLine{00639   getAttributes()-\/>setIsSpeedAware(\textcolor{keyword}{true});}
\DoxyCodeLine{00640 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_a5ce333d1a8fbbd86de2fc6b8c77a85f1}\label{class_iwa___motion_blur_comp_fx_a5ce333d1a8fbbd86de2fc6b8c77a85f1}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!applyBlurFilter\_CPU@{applyBlurFilter\_CPU}}
\index{applyBlurFilter\_CPU@{applyBlurFilter\_CPU}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{applyBlurFilter\_CPU()}{applyBlurFilter\_CPU()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::apply\+Blur\+Filter\+\_\+\+CPU (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structfloat4}{float4}} $\ast$}]{in\+\_\+tile\+\_\+p,  }\item[{\mbox{\hyperlink{structfloat4}{float4}} $\ast$}]{out\+\_\+tile\+\_\+p,  }\item[{\mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&}]{dim,  }\item[{float $\ast$}]{filter\+\_\+p,  }\item[{\mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&}]{filter\+Dim,  }\item[{int}]{margin\+Left,  }\item[{int}]{margin\+Bottom,  }\item[{int}]{margin\+Right,  }\item[{int}]{margin\+Top,  }\item[{\mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&}]{out\+Dim }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00420                                                          \{}
\DoxyCodeLine{00421   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < outDim.lx * outDim.ly; i++) \{}
\DoxyCodeLine{00422     \textcolor{comment}{/* in\_tile\_dev and out\_tile\_dev contain data with dimensions lx * ly.}}
\DoxyCodeLine{00423 \textcolor{comment}{     * So, convert i to coordinates for output. */}}
\DoxyCodeLine{00424     \mbox{\hyperlink{structint2}{int2}} outPos  = \{i \% outDim.lx + marginRight, i / outDim.lx + marginTop\};}
\DoxyCodeLine{00425     \textcolor{keywordtype}{int} outIndex = outPos.y * enlargedDim.lx + outPos.x;}
\DoxyCodeLine{00426     \textcolor{comment}{/* put the result in out\_tile\_dev [outIndex] */}}
\DoxyCodeLine{00427 }
\DoxyCodeLine{00428     \textcolor{comment}{/* Prepare a container to accumulate values ​​-\/ */}}
\DoxyCodeLine{00429     \mbox{\hyperlink{structfloat4}{float4}} value = \{0.0f, 0.0f, 0.0f, 0.0f\};}
\DoxyCodeLine{00430 }
\DoxyCodeLine{00431     \textcolor{comment}{/* Loop by filter size.}}
\DoxyCodeLine{00432 \textcolor{comment}{     * Note that the filter is used to 'collect' pixels at sample points}}
\DoxyCodeLine{00433 \textcolor{comment}{     * so flip the filter vertically and horizontally and sample it */}}
\DoxyCodeLine{00434     \textcolor{keywordtype}{int} filterIndex = 0;}
\DoxyCodeLine{00435     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} fily = -\/marginBottom; fily < filterDim.ly -\/ marginBottom; fily++) \{}
\DoxyCodeLine{00436       \textcolor{comment}{/* Sample coordinates and index of the end of this scan line */}}
\DoxyCodeLine{00437       \mbox{\hyperlink{structint2}{int2}} samplePos  = \{outPos.x + marginLeft, outPos.y -\/ fily\};}
\DoxyCodeLine{00438       \textcolor{keywordtype}{int} sampleIndex = samplePos.y * enlargedDim.lx + samplePos.x;}
\DoxyCodeLine{00439 }
\DoxyCodeLine{00440       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} filx = -\/marginLeft; filx < filterDim.lx -\/ marginLeft;}
\DoxyCodeLine{00441            filx++, filterIndex++, sampleIndex-\/-\/) \{}
\DoxyCodeLine{00442         \textcolor{comment}{/* If the filter value is 0 or the sample pixel is transparent, continue}}
\DoxyCodeLine{00443 \textcolor{comment}{         */}}
\DoxyCodeLine{00444         \textcolor{keywordflow}{if} (filter\_p[filterIndex] == 0.0f || in\_tile\_p[sampleIndex].w == 0.0f)}
\DoxyCodeLine{00445           \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00446         \textcolor{comment}{/* multiply the sample point value by the filter value and integrate */}}
\DoxyCodeLine{00447         value.x += in\_tile\_p[sampleIndex].x * filter\_p[filterIndex];}
\DoxyCodeLine{00448         value.y += in\_tile\_p[sampleIndex].y * filter\_p[filterIndex];}
\DoxyCodeLine{00449         value.z += in\_tile\_p[sampleIndex].z * filter\_p[filterIndex];}
\DoxyCodeLine{00450         value.w += in\_tile\_p[sampleIndex].w * filter\_p[filterIndex];}
\DoxyCodeLine{00451       \}}
\DoxyCodeLine{00452     \}}
\DoxyCodeLine{00453 }
\DoxyCodeLine{00454     out\_tile\_p[outIndex].x = value.x;}
\DoxyCodeLine{00455     out\_tile\_p[outIndex].y = value.y;}
\DoxyCodeLine{00456     out\_tile\_p[outIndex].z = value.z;}
\DoxyCodeLine{00457     out\_tile\_p[outIndex].w = value.w;}
\DoxyCodeLine{00458   \}}
\DoxyCodeLine{00459 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_a9b67c5c036d69665ada64307561c88bd}\label{class_iwa___motion_blur_comp_fx_a9b67c5c036d69665ada64307561c88bd}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00917                                                    \{}
\DoxyCodeLine{00918   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00919 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_a410627006e014e8cc3eeea24bb0c0964}\label{class_iwa___motion_blur_comp_fx_a410627006e014e8cc3eeea24bb0c0964}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!composeBackgroundExposure\_CPU@{composeBackgroundExposure\_CPU}}
\index{composeBackgroundExposure\_CPU@{composeBackgroundExposure\_CPU}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{composeBackgroundExposure\_CPU()}{composeBackgroundExposure\_CPU()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::compose\+Background\+Exposure\+\_\+\+CPU (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structfloat4}{float4}} $\ast$}]{out\+\_\+tile\+\_\+p,  }\item[{\mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&}]{enlarged\+Dim\+In,  }\item[{int}]{margin\+Right,  }\item[{int}]{margin\+Top,  }\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{back\+\_\+tile,  }\item[{\mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&}]{dim\+Out,  }\item[{float}]{hardness }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00531                                                                           \{}
\DoxyCodeLine{00532   \textcolor{comment}{/* Memory allocation of host */}}
\DoxyCodeLine{00533   \mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}} background\_host\_ras(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structfloat4}{float4}}) * dimOut.lx, dimOut.ly);}
\DoxyCodeLine{00534   background\_host\_ras-\/>lock();}
\DoxyCodeLine{00535   \mbox{\hyperlink{structfloat4}{float4}} *background\_host = (\mbox{\hyperlink{structfloat4}{float4}} *)background\_host\_ras-\/>getRawData();}
\DoxyCodeLine{00536 }
\DoxyCodeLine{00537   \textcolor{keywordtype}{bool} bgIsPremultiplied;}
\DoxyCodeLine{00538 }
\DoxyCodeLine{00539   \textcolor{comment}{/* normalize the background image to 0 -\/ 1 and read it into the host memory}}
\DoxyCodeLine{00540 \textcolor{comment}{   */}}
\DoxyCodeLine{00541   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} backRas32 = (\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}})back\_tile.getRaster();}
\DoxyCodeLine{00542   \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} backRas64 = (\mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}})back\_tile.getRaster();}
\DoxyCodeLine{00543   \textcolor{keywordflow}{if} (backRas32)}
\DoxyCodeLine{00544     bgIsPremultiplied = setSourceRaster<TRaster32P, TPixel32>(}
\DoxyCodeLine{00545         backRas32, background\_host, dimOut);}
\DoxyCodeLine{00546   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (backRas64)}
\DoxyCodeLine{00547     bgIsPremultiplied = setSourceRaster<TRaster64P, TPixel64>(}
\DoxyCodeLine{00548         backRas64, background\_host, dimOut);}
\DoxyCodeLine{00549 }
\DoxyCodeLine{00550   \mbox{\hyperlink{structfloat4}{float4}} *bg\_p = background\_host;}
\DoxyCodeLine{00551   \mbox{\hyperlink{structfloat4}{float4}} *out\_p;}
\DoxyCodeLine{00552 }
\DoxyCodeLine{00553   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < dimOut.ly; j++) \{}
\DoxyCodeLine{00554     out\_p = out\_tile\_p + ((marginTop + j) * enlargedDimIn.lx + marginRight);}
\DoxyCodeLine{00555     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < dimOut.lx; i++, bg\_p++, out\_p++) \{}
\DoxyCodeLine{00556       \textcolor{comment}{/* if upper layer is completely opaque continue */}}
\DoxyCodeLine{00557       \textcolor{keywordflow}{if} ((*out\_p).w >= 1.0f) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00558 }
\DoxyCodeLine{00559       \textcolor{comment}{/* even if the lower layer is completely transparent continue */}}
\DoxyCodeLine{00560       \textcolor{keywordflow}{if} ((*bg\_p).w < 0.0001f) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00561 }
\DoxyCodeLine{00562       \mbox{\hyperlink{structfloat3}{float3}} bgExposure = \{(*bg\_p).x, (*bg\_p).y, (*bg\_p).z\};}
\DoxyCodeLine{00563 }
\DoxyCodeLine{00564       \textcolor{comment}{/* Unpremultiply on sources that are premultiplied, such as regular Level.}}
\DoxyCodeLine{00565 \textcolor{comment}{       * It is not done for 'digital overlay' (image with alpha mask added by}}
\DoxyCodeLine{00566 \textcolor{comment}{       * using Photoshop, as known as 'DigiBook' in Japanese animation industry)}}
\DoxyCodeLine{00567 \textcolor{comment}{       * etc.}}
\DoxyCodeLine{00568 \textcolor{comment}{      */}}
\DoxyCodeLine{00569       \textcolor{keywordflow}{if} (bgIsPremultiplied) \{}
\DoxyCodeLine{00570         \textcolor{comment}{// Unpremultiply}}
\DoxyCodeLine{00571         bgExposure.x /= (*bg\_p).w;}
\DoxyCodeLine{00572         bgExposure.y /= (*bg\_p).w;}
\DoxyCodeLine{00573         bgExposure.z /= (*bg\_p).w;}
\DoxyCodeLine{00574       \}}
\DoxyCodeLine{00575 }
\DoxyCodeLine{00576       \textcolor{comment}{/* Set Exposure to RGB value */}}
\DoxyCodeLine{00577       bgExposure.x = powf(10, (bgExposure.x -\/ 0.5f) * hardness);}
\DoxyCodeLine{00578       bgExposure.y = powf(10, (bgExposure.y -\/ 0.5f) * hardness);}
\DoxyCodeLine{00579       bgExposure.z = powf(10, (bgExposure.z -\/ 0.5f) * hardness);}
\DoxyCodeLine{00580 }
\DoxyCodeLine{00581       \textcolor{comment}{// multiply}}
\DoxyCodeLine{00582       bgExposure.x *= (*bg\_p).w;}
\DoxyCodeLine{00583       bgExposure.y *= (*bg\_p).w;}
\DoxyCodeLine{00584       bgExposure.z *= (*bg\_p).w;}
\DoxyCodeLine{00585 }
\DoxyCodeLine{00586       \textcolor{comment}{/* Over composite with front layers */}}
\DoxyCodeLine{00587       (*out\_p).x = (*out\_p).x + bgExposure.x * (1.0f -\/ (*out\_p).w);}
\DoxyCodeLine{00588       (*out\_p).y = (*out\_p).y + bgExposure.y * (1.0f -\/ (*out\_p).w);}
\DoxyCodeLine{00589       (*out\_p).z = (*out\_p).z + bgExposure.z * (1.0f -\/ (*out\_p).w);}
\DoxyCodeLine{00590       \textcolor{comment}{/* Alpha value also over-\/composited */}}
\DoxyCodeLine{00591       (*out\_p).w = (*out\_p).w + (*bg\_p).w * (1.0f -\/ (*out\_p).w);}
\DoxyCodeLine{00592     \}}
\DoxyCodeLine{00593   \}}
\DoxyCodeLine{00594   background\_host\_ras-\/>unlock();}
\DoxyCodeLine{00595 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_a7d8b7016a5d8ac4072d7b35eaa216dd6}\label{class_iwa___motion_blur_comp_fx_a7d8b7016a5d8ac4072d7b35eaa216dd6}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!composeWithNoMotion@{composeWithNoMotion}}
\index{composeWithNoMotion@{composeWithNoMotion}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{composeWithNoMotion()}{composeWithNoMotion()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::compose\+With\+No\+Motion (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{settings }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00512                                                                 \{}
\DoxyCodeLine{00513   assert(m\_background.isConnected());}
\DoxyCodeLine{00514 }
\DoxyCodeLine{00515   m\_background-\/>compute(tile, frame, settings);}
\DoxyCodeLine{00516 }
\DoxyCodeLine{00517   \mbox{\hyperlink{class_t_tile}{TTile}} fore\_tile;}
\DoxyCodeLine{00518   m\_input-\/>allocateAndCompute(fore\_tile, tile.m\_pos,}
\DoxyCodeLine{00519                               tile.getRaster()-\/>getSize(), tile.getRaster(),}
\DoxyCodeLine{00520                               frame, settings);}
\DoxyCodeLine{00521 }
\DoxyCodeLine{00522   \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} up(fore\_tile.getRaster()), down(tile.getRaster());}
\DoxyCodeLine{00523   \mbox{\hyperlink{namespace_t_rop_ae5fd1fb0c2f625e1da14fe92ae0e5122}{TRop::over}}(down, up);}
\DoxyCodeLine{00524 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_a0f31d4027423e62d18e0e184ff7b60f9}\label{class_iwa___motion_blur_comp_fx_a0f31d4027423e62d18e0e184ff7b60f9}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!convertExposureToRGB\_CPU@{convertExposureToRGB\_CPU}}
\index{convertExposureToRGB\_CPU@{convertExposureToRGB\_CPU}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{convertExposureToRGB\_CPU()}{convertExposureToRGB\_CPU()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::convert\+Exposure\+To\+RGB\+\_\+\+CPU (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structfloat4}{float4}} $\ast$}]{out\+\_\+tile\+\_\+p,  }\item[{\mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&}]{dim,  }\item[{float}]{hardness }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00469                                                                     \{}
\DoxyCodeLine{00470   \mbox{\hyperlink{structfloat4}{float4}} *cur\_tile\_p = out\_tile\_p;}
\DoxyCodeLine{00471   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < dim.lx * dim.ly; i++, cur\_tile\_p++) \{}
\DoxyCodeLine{00472     \textcolor{comment}{/* if alpha is 0 return */}}
\DoxyCodeLine{00473     \textcolor{keywordflow}{if} (cur\_tile\_p-\/>w == 0.0f) \{}
\DoxyCodeLine{00474       cur\_tile\_p-\/>x = 0.0f;}
\DoxyCodeLine{00475       cur\_tile\_p-\/>y = 0.0f;}
\DoxyCodeLine{00476       cur\_tile\_p-\/>z = 0.0f;}
\DoxyCodeLine{00477       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00478     \}}
\DoxyCodeLine{00479 }
\DoxyCodeLine{00480     \textcolor{comment}{// unpremultiply}}
\DoxyCodeLine{00481     cur\_tile\_p-\/>x /= cur\_tile\_p-\/>w;}
\DoxyCodeLine{00482     cur\_tile\_p-\/>y /= cur\_tile\_p-\/>w;}
\DoxyCodeLine{00483     cur\_tile\_p-\/>z /= cur\_tile\_p-\/>w;}
\DoxyCodeLine{00484 }
\DoxyCodeLine{00485     \textcolor{comment}{/* Convert Exposure to RGB value */}}
\DoxyCodeLine{00486     cur\_tile\_p-\/>x = log10f(cur\_tile\_p-\/>x) / hardness + 0.5f;}
\DoxyCodeLine{00487     cur\_tile\_p-\/>y = log10f(cur\_tile\_p-\/>y) / hardness + 0.5f;}
\DoxyCodeLine{00488     cur\_tile\_p-\/>z = log10f(cur\_tile\_p-\/>z) / hardness + 0.5f;}
\DoxyCodeLine{00489 }
\DoxyCodeLine{00490     \textcolor{comment}{// multiply}}
\DoxyCodeLine{00491     cur\_tile\_p-\/>x *= cur\_tile\_p-\/>w;}
\DoxyCodeLine{00492     cur\_tile\_p-\/>y *= cur\_tile\_p-\/>w;}
\DoxyCodeLine{00493     cur\_tile\_p-\/>z *= cur\_tile\_p-\/>w;}
\DoxyCodeLine{00494 }
\DoxyCodeLine{00495     \textcolor{comment}{/* Clamp */}}
\DoxyCodeLine{00496     cur\_tile\_p-\/>x = (cur\_tile\_p-\/>x > 1.0f)}
\DoxyCodeLine{00497                         ? 1.0f}
\DoxyCodeLine{00498                         : ((cur\_tile\_p-\/>x < 0.0f) ? 0.0f : cur\_tile\_p-\/>x);}
\DoxyCodeLine{00499     cur\_tile\_p-\/>y = (cur\_tile\_p-\/>y > 1.0f)}
\DoxyCodeLine{00500                         ? 1.0f}
\DoxyCodeLine{00501                         : ((cur\_tile\_p-\/>y < 0.0f) ? 0.0f : cur\_tile\_p-\/>y);}
\DoxyCodeLine{00502     cur\_tile\_p-\/>z = (cur\_tile\_p-\/>z > 1.0f)}
\DoxyCodeLine{00503                         ? 1.0f}
\DoxyCodeLine{00504                         : ((cur\_tile\_p-\/>z < 0.0f) ? 0.0f : cur\_tile\_p-\/>z);}
\DoxyCodeLine{00505   \}}
\DoxyCodeLine{00506 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_ac9d766e1a64922ef4b65400d4e7b6370}\label{class_iwa___motion_blur_comp_fx_ac9d766e1a64922ef4b65400d4e7b6370}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!convertRGBtoExposure\_CPU@{convertRGBtoExposure\_CPU}}
\index{convertRGBtoExposure\_CPU@{convertRGBtoExposure\_CPU}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{convertRGBtoExposure\_CPU()}{convertRGBtoExposure\_CPU()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::convert\+RGBto\+Exposure\+\_\+\+CPU (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structfloat4}{float4}} $\ast$}]{in\+\_\+tile\+\_\+p,  }\item[{\mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&}]{dim,  }\item[{float}]{hardness,  }\item[{bool}]{source\+Is\+Premultiplied }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00378                                 \{}
\DoxyCodeLine{00379   \mbox{\hyperlink{structfloat4}{float4}} *cur\_tile\_p = in\_tile\_p;}
\DoxyCodeLine{00380   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < dim.lx * dim.ly; i++, cur\_tile\_p++) \{}
\DoxyCodeLine{00381     \textcolor{comment}{/* if alpha is 0, return */}}
\DoxyCodeLine{00382     \textcolor{keywordflow}{if} (cur\_tile\_p-\/>w == 0.0f) \{}
\DoxyCodeLine{00383       cur\_tile\_p-\/>x = 0.0f;}
\DoxyCodeLine{00384       cur\_tile\_p-\/>y = 0.0f;}
\DoxyCodeLine{00385       cur\_tile\_p-\/>z = 0.0f;}
\DoxyCodeLine{00386       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00387     \}}
\DoxyCodeLine{00388 }
\DoxyCodeLine{00389     \textcolor{comment}{/* Unpremultiply on sources that are premultiplied, such as regular Level.}}
\DoxyCodeLine{00390 \textcolor{comment}{     * It is not done for 'digital overlay' (image with alpha mask added by}}
\DoxyCodeLine{00391 \textcolor{comment}{     * using Photoshop, as known as 'DigiBook' in Japanese animation industry)}}
\DoxyCodeLine{00392 \textcolor{comment}{     * etc. */}}
\DoxyCodeLine{00393     \textcolor{keywordflow}{if} (sourceIsPremultiplied) \{}
\DoxyCodeLine{00394       \textcolor{comment}{/* unpremultiply */}}
\DoxyCodeLine{00395       cur\_tile\_p-\/>x /= cur\_tile\_p-\/>w;}
\DoxyCodeLine{00396       cur\_tile\_p-\/>y /= cur\_tile\_p-\/>w;}
\DoxyCodeLine{00397       cur\_tile\_p-\/>z /= cur\_tile\_p-\/>w;}
\DoxyCodeLine{00398     \}}
\DoxyCodeLine{00399 }
\DoxyCodeLine{00400     \textcolor{comment}{/* convert RGB to Exposure */}}
\DoxyCodeLine{00401     cur\_tile\_p-\/>x = powf(10, (cur\_tile\_p-\/>x -\/ 0.5f) * hardness);}
\DoxyCodeLine{00402     cur\_tile\_p-\/>y = powf(10, (cur\_tile\_p-\/>y -\/ 0.5f) * hardness);}
\DoxyCodeLine{00403     cur\_tile\_p-\/>z = powf(10, (cur\_tile\_p-\/>z -\/ 0.5f) * hardness);}
\DoxyCodeLine{00404 }
\DoxyCodeLine{00405     \textcolor{comment}{/* Then multiply with the alpha channel */}}
\DoxyCodeLine{00406     cur\_tile\_p-\/>x *= cur\_tile\_p-\/>w;}
\DoxyCodeLine{00407     cur\_tile\_p-\/>y *= cur\_tile\_p-\/>w;}
\DoxyCodeLine{00408     cur\_tile\_p-\/>z *= cur\_tile\_p-\/>w;}
\DoxyCodeLine{00409   \}}
\DoxyCodeLine{00410 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_adab766a775b6419f0b439e8a67ac9c69}\label{class_iwa___motion_blur_comp_fx_adab766a775b6419f0b439e8a67ac9c69}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{settings }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00645                                                                       \{}
\DoxyCodeLine{00646   \textcolor{comment}{/* Do not process if not connected */}}
\DoxyCodeLine{00647   \textcolor{keywordflow}{if} (!m\_input.isConnected() \&\& !m\_background.isConnected()) \{}
\DoxyCodeLine{00648     tile.getRaster()-\/>clear();}
\DoxyCodeLine{00649     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00650   \}}
\DoxyCodeLine{00651   \textcolor{comment}{/* For BG only connection */}}
\DoxyCodeLine{00652   \textcolor{keywordflow}{if} (!m\_input.isConnected()) \{}
\DoxyCodeLine{00653     m\_background-\/>compute(tile, frame, settings);}
\DoxyCodeLine{00654     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00655   \}}
\DoxyCodeLine{00656 }
\DoxyCodeLine{00657   \textcolor{comment}{/* Get parameters */}}
\DoxyCodeLine{00658   QList<TPointD> points = getAttributes()-\/>getMotionPoints();}
\DoxyCodeLine{00659   \textcolor{keywordtype}{double} hardness       = m\_hardness-\/>getValue(frame);}
\DoxyCodeLine{00660   \textcolor{keywordtype}{double} shutterStart   = m\_shutterStart-\/>getValue(frame);}
\DoxyCodeLine{00661   \textcolor{keywordtype}{double} shutterEnd     = m\_shutterEnd-\/>getValue(frame);}
\DoxyCodeLine{00662   \textcolor{keywordtype}{int} traceResolution   = m\_traceResolution-\/>getValue();}
\DoxyCodeLine{00663   \textcolor{keywordtype}{float} startValue      = (float)m\_startValue-\/>getValue(frame);}
\DoxyCodeLine{00664   \textcolor{keywordtype}{float} startCurve      = (float)m\_startCurve-\/>getValue(frame);}
\DoxyCodeLine{00665   \textcolor{keywordtype}{float} endValue        = (float)m\_endValue-\/>getValue(frame);}
\DoxyCodeLine{00666   \textcolor{keywordtype}{float} endCurve        = (float)m\_endCurve-\/>getValue(frame);}
\DoxyCodeLine{00667 }
\DoxyCodeLine{00668   \textcolor{comment}{/* Do not process if there are no more than two trajectory data */}}
\DoxyCodeLine{00669   \textcolor{keywordflow}{if} (points.size() < 2) \{}
\DoxyCodeLine{00670     \textcolor{keywordflow}{if} (!m\_background.isConnected()) m\_input-\/>compute(tile, frame, settings);}
\DoxyCodeLine{00671     \textcolor{comment}{/* If there is a background and the foreground does not move, simply over */}}
\DoxyCodeLine{00672     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00673       composeWithNoMotion(tile, frame, settings);}
\DoxyCodeLine{00674     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00675   \}}
\DoxyCodeLine{00676   \textcolor{comment}{/* Get display area */}}
\DoxyCodeLine{00677   \mbox{\hyperlink{class_t_rect_t}{TRectD}} bBox =}
\DoxyCodeLine{00678       \mbox{\hyperlink{class_t_rect_t}{TRectD}}(tile.m\_pos \textcolor{comment}{/* Render position on Pixel unit */}}
\DoxyCodeLine{00679              ,}
\DoxyCodeLine{00680              \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}}(\textcolor{comment}{/* Size of Render image (Pixel unit) */}}
\DoxyCodeLine{00681                          tile.getRaster()-\/>getLx(), tile.getRaster()-\/>getLy()));}
\DoxyCodeLine{00682 }
\DoxyCodeLine{00683   \textcolor{comment}{/* Get upper, lower, left and right margin */}}
\DoxyCodeLine{00684   \textcolor{keywordtype}{double} minX = 0.0;}
\DoxyCodeLine{00685   \textcolor{keywordtype}{double} maxX = 0.0;}
\DoxyCodeLine{00686   \textcolor{keywordtype}{double} minY = 0.0;}
\DoxyCodeLine{00687   \textcolor{keywordtype}{double} maxY = 0.0;}
\DoxyCodeLine{00688   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} p = 0; p < points.size(); p++) \{}
\DoxyCodeLine{00689     \textcolor{keywordflow}{if} (points.at(p).x > maxX) maxX = points.at(p).x;}
\DoxyCodeLine{00690     \textcolor{keywordflow}{if} (points.at(p).x < minX) minX = points.at(p).x;}
\DoxyCodeLine{00691     \textcolor{keywordflow}{if} (points.at(p).y > maxY) maxY = points.at(p).y;}
\DoxyCodeLine{00692     \textcolor{keywordflow}{if} (points.at(p).y < minY) minY = points.at(p).y;}
\DoxyCodeLine{00693   \}}
\DoxyCodeLine{00694   \textcolor{keywordtype}{int} marginLeft   = (int)ceil(std::abs(minX));}
\DoxyCodeLine{00695   \textcolor{keywordtype}{int} marginRight  = (int)ceil(std::abs(maxX));}
\DoxyCodeLine{00696   \textcolor{keywordtype}{int} marginTop    = (int)ceil(std::abs(maxY));}
\DoxyCodeLine{00697   \textcolor{keywordtype}{int} marginBottom = (int)ceil(std::abs(minY));}
\DoxyCodeLine{00698 }
\DoxyCodeLine{00699   \textcolor{comment}{/* Return the input tile as-\/is if there is not movement}}
\DoxyCodeLine{00700 \textcolor{comment}{  * (= filter margins are all 0). */}}
\DoxyCodeLine{00701   \textcolor{keywordflow}{if} (marginLeft == 0 \&\& marginRight == 0 \&\& marginTop == 0 \&\&}
\DoxyCodeLine{00702       marginBottom == 0) \{}
\DoxyCodeLine{00703     \textcolor{keywordflow}{if} (!m\_background.isConnected()) m\_input-\/>compute(tile, frame, settings);}
\DoxyCodeLine{00704     \textcolor{comment}{/* If there is a background, and the foreground does not move, simply over}}
\DoxyCodeLine{00705 \textcolor{comment}{     */}}
\DoxyCodeLine{00706     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00707       composeWithNoMotion(tile, frame, settings);}
\DoxyCodeLine{00708     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00709   \}}
\DoxyCodeLine{00710 }
\DoxyCodeLine{00711   \textcolor{comment}{/* resize the bbox with the upper/lower/left/right inverted margins.}}
\DoxyCodeLine{00712 \textcolor{comment}{   */}}
\DoxyCodeLine{00713   \mbox{\hyperlink{class_t_rect_t}{TRectD}} enlargedBBox(bBox.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} -\/ (\textcolor{keywordtype}{double})marginRight,}
\DoxyCodeLine{00714                       bBox.y0 -\/ (\textcolor{keywordtype}{double})marginTop, bBox.x1 + (\textcolor{keywordtype}{double})marginLeft,}
\DoxyCodeLine{00715                       bBox.y1 + (\textcolor{keywordtype}{double})marginBottom);}
\DoxyCodeLine{00716 }
\DoxyCodeLine{00717   \textcolor{comment}{// std::cout<<"{}Margin Left:"{}<<marginLeft<<"{} Right:"{}<<marginRight<<}}
\DoxyCodeLine{00718   \textcolor{comment}{//    "{} Bottom:"{}<<marginBottom<<"{} Top:"{}<<marginTop<<std::endl;}}
\DoxyCodeLine{00719 }
\DoxyCodeLine{00720   \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} enlargedDimIn(\textcolor{comment}{/* Rounded to the nearest Pixel */}}
\DoxyCodeLine{00721                             (\textcolor{keywordtype}{int})(enlargedBBox.getLx() + 0.5),}
\DoxyCodeLine{00722                             (\textcolor{keywordtype}{int})(enlargedBBox.getLy() + 0.5));}
\DoxyCodeLine{00723 }
\DoxyCodeLine{00724   \mbox{\hyperlink{class_t_tile}{TTile}} enlarge\_tile;}
\DoxyCodeLine{00725   m\_input-\/>allocateAndCompute(enlarge\_tile, enlargedBBox.getP00(),}
\DoxyCodeLine{00726                               enlargedDimIn, tile.getRaster(), frame, settings);}
\DoxyCodeLine{00727 }
\DoxyCodeLine{00728   \textcolor{comment}{/* If background is required */}}
\DoxyCodeLine{00729   \mbox{\hyperlink{class_t_tile}{TTile}} back\_Tile;}
\DoxyCodeLine{00730   \textcolor{keywordflow}{if} (m\_background.isConnected()) \{}
\DoxyCodeLine{00731     m\_background-\/>allocateAndCompute(back\_Tile, tile.m\_pos,}
\DoxyCodeLine{00732                                      tile.getRaster()-\/>getSize(),}
\DoxyCodeLine{00733                                      tile.getRaster(), frame, settings);}
\DoxyCodeLine{00734   \}}
\DoxyCodeLine{00735 }
\DoxyCodeLine{00736   \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00737   \textcolor{comment}{/* Compute range */}}
\DoxyCodeLine{00738   \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} dimOut(tile.getRaster()-\/>getLx(), tile.getRaster()-\/>getLy());}
\DoxyCodeLine{00739   \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} filterDim(marginLeft + marginRight + 1,}
\DoxyCodeLine{00740                         marginTop + marginBottom + 1);}
\DoxyCodeLine{00741 }
\DoxyCodeLine{00742   \textcolor{comment}{/* Release of pointsTable is done within each doCompute */}}
\DoxyCodeLine{00743   \textcolor{keywordtype}{int} pointAmount     = points.size();}
\DoxyCodeLine{00744   \mbox{\hyperlink{structfloat4}{float4}} *pointsTable = \textcolor{keyword}{new} \mbox{\hyperlink{structfloat4}{float4}}[pointAmount];}
\DoxyCodeLine{00745   \textcolor{keywordtype}{float} dt = (float)(shutterStart + shutterEnd) / (float)traceResolution;}
\DoxyCodeLine{00746   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} p = 0; p < pointAmount; p++) \{}
\DoxyCodeLine{00747     pointsTable[p].x = (float)points.at(p).x;}
\DoxyCodeLine{00748     pointsTable[p].y = (float)points.at(p).y;}
\DoxyCodeLine{00749     \textcolor{comment}{/* z stores the distance of p -\/> p + 1 vector */}}
\DoxyCodeLine{00750     \textcolor{keywordflow}{if} (p < pointAmount -\/ 1) \{}
\DoxyCodeLine{00751       \mbox{\hyperlink{structfloat2}{float2}} vec = \{(float)(points.at(p + 1).x -\/ points.at(p).x),}
\DoxyCodeLine{00752                     (\textcolor{keywordtype}{float})(points.at(p + 1).y -\/ points.at(p).y)\};}
\DoxyCodeLine{00753       pointsTable[p].z = sqrtf(vec.x * vec.x + vec.y * vec.y);}
\DoxyCodeLine{00754     \}}
\DoxyCodeLine{00755     \textcolor{comment}{/* w stores shutter time offset */}}
\DoxyCodeLine{00756     pointsTable[p].w = -\/(float)shutterStart + (\textcolor{keywordtype}{float})p * dt;}
\DoxyCodeLine{00757   \}}
\DoxyCodeLine{00758 }
\DoxyCodeLine{00759   doCompute\_CPU(tile, frame, settings, pointsTable, pointAmount, hardness,}
\DoxyCodeLine{00760                 shutterStart, shutterEnd, traceResolution, startValue,}
\DoxyCodeLine{00761                 startCurve, endValue, endCurve, marginLeft, marginRight,}
\DoxyCodeLine{00762                 marginTop, marginBottom, enlargedDimIn, enlarge\_tile, dimOut,}
\DoxyCodeLine{00763                 filterDim, back\_Tile);}
\DoxyCodeLine{00764 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_a327ebc894847f82b32882e0263592611}\label{class_iwa___motion_blur_comp_fx_a327ebc894847f82b32882e0263592611}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!doCompute\_CPU@{doCompute\_CPU}}
\index{doCompute\_CPU@{doCompute\_CPU}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{doCompute\_CPU()}{doCompute\_CPU()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::do\+Compute\+\_\+\+CPU (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{settings,  }\item[{\mbox{\hyperlink{structfloat4}{float4}} $\ast$}]{points\+Table,  }\item[{int}]{point\+Amount,  }\item[{double}]{hardness,  }\item[{double}]{shutter\+Start,  }\item[{double}]{shutter\+End,  }\item[{int}]{trace\+Resolution,  }\item[{float}]{start\+Value,  }\item[{float}]{start\+Curve,  }\item[{float}]{end\+Value,  }\item[{float}]{end\+Curve,  }\item[{int}]{margin\+Left,  }\item[{int}]{margin\+Right,  }\item[{int}]{margin\+Top,  }\item[{int}]{margin\+Bottom,  }\item[{\mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&}]{enlarged\+Dim\+In,  }\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{enlarge\+\_\+tile,  }\item[{\mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&}]{dim\+Out,  }\item[{\mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&}]{filter\+Dim,  }\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{back\+\_\+tile }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00775                       \{}
\DoxyCodeLine{00776   \textcolor{comment}{/* Processing memory */}}
\DoxyCodeLine{00777   \mbox{\hyperlink{structfloat4}{float4}} *in\_tile\_p;  \textcolor{comment}{/* With margin */}}
\DoxyCodeLine{00778   \mbox{\hyperlink{structfloat4}{float4}} *out\_tile\_p; \textcolor{comment}{/* With margin */}}
\DoxyCodeLine{00779   \textcolor{comment}{/* Filter */}}
\DoxyCodeLine{00780   \textcolor{keywordtype}{float} *filter\_p;}
\DoxyCodeLine{00781 }
\DoxyCodeLine{00782   \textcolor{comment}{/* Memory allocation */}}
\DoxyCodeLine{00783   \mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}} in\_tile\_ras(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structfloat4}{float4}}) * enlargedDimIn.lx, enlargedDimIn.ly);}
\DoxyCodeLine{00784   in\_tile\_ras-\/>lock();}
\DoxyCodeLine{00785   in\_tile\_p = (\mbox{\hyperlink{structfloat4}{float4}} *)in\_tile\_ras-\/>getRawData();}
\DoxyCodeLine{00786   \mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}} out\_tile\_ras(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structfloat4}{float4}}) * enlargedDimIn.lx, enlargedDimIn.ly);}
\DoxyCodeLine{00787   out\_tile\_ras-\/>lock();}
\DoxyCodeLine{00788   out\_tile\_p = (\mbox{\hyperlink{structfloat4}{float4}} *)out\_tile\_ras-\/>getRawData();}
\DoxyCodeLine{00789   \mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}} filter\_ras(\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float}) * filterDim.lx, filterDim.ly);}
\DoxyCodeLine{00790   filter\_ras-\/>lock();}
\DoxyCodeLine{00791   filter\_p = (\textcolor{keywordtype}{float} *)filter\_ras-\/>getRawData();}
\DoxyCodeLine{00792 }
\DoxyCodeLine{00793   \textcolor{keywordtype}{bool} sourceIsPremultiplied;}
\DoxyCodeLine{00794   \textcolor{comment}{/* normalize the source image to 0 -\/ 1 and read it into memory */}}
\DoxyCodeLine{00795   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} ras32 = (\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}})enlarge\_tile.getRaster();}
\DoxyCodeLine{00796   \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} ras64 = (\mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}})enlarge\_tile.getRaster();}
\DoxyCodeLine{00797   \textcolor{keywordflow}{if} (ras32)}
\DoxyCodeLine{00798     sourceIsPremultiplied = setSourceRaster<TRaster32P, TPixel32>(}
\DoxyCodeLine{00799         ras32, in\_tile\_p, enlargedDimIn,}
\DoxyCodeLine{00800         (PremultiTypes)m\_premultiType-\/>getValue());}
\DoxyCodeLine{00801   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ras64)}
\DoxyCodeLine{00802     sourceIsPremultiplied = setSourceRaster<TRaster64P, TPixel64>(}
\DoxyCodeLine{00803         ras64, in\_tile\_p, enlargedDimIn,}
\DoxyCodeLine{00804         (PremultiTypes)m\_premultiType-\/>getValue());}
\DoxyCodeLine{00805 }
\DoxyCodeLine{00806   \textcolor{comment}{/* When afterimage mode is off */}}
\DoxyCodeLine{00807   \textcolor{keywordflow}{if} (!m\_zanzoMode-\/>getValue()) \{}
\DoxyCodeLine{00808     \textcolor{comment}{/* Create and normalize filters */}}
\DoxyCodeLine{00809     makeMotionBlurFilter\_CPU(filter\_p, filterDim, marginLeft, marginBottom,}
\DoxyCodeLine{00810                              pointsTable, pointAmount, startValue, startCurve,}
\DoxyCodeLine{00811                              endValue, endCurve);}
\DoxyCodeLine{00812   \}}
\DoxyCodeLine{00813   \textcolor{comment}{/* When afterimage mode is ON */}}
\DoxyCodeLine{00814   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00815     \textcolor{comment}{/* Create / normalize the afterimage filter */}}
\DoxyCodeLine{00816     makeZanzoFilter\_CPU(filter\_p, filterDim, marginLeft, marginBottom,}
\DoxyCodeLine{00817                         pointsTable, pointAmount, startValue, startCurve,}
\DoxyCodeLine{00818                         endValue, endCurve);}
\DoxyCodeLine{00819   \}}
\DoxyCodeLine{00820 }
\DoxyCodeLine{00821   \textcolor{keyword}{delete}[] pointsTable;}
\DoxyCodeLine{00822 }
\DoxyCodeLine{00823   \textcolor{comment}{/* Unpremultiply RGB value (0 to 1)}}
\DoxyCodeLine{00824 \textcolor{comment}{   * -\/> convert it to exposure value}}
\DoxyCodeLine{00825 \textcolor{comment}{   * -\/> premultiply again}}
\DoxyCodeLine{00826 \textcolor{comment}{   */}}
\DoxyCodeLine{00827   convertRGBtoExposure\_CPU(in\_tile\_p, enlargedDimIn, hardness,}
\DoxyCodeLine{00828                            sourceIsPremultiplied);}
\DoxyCodeLine{00829 }
\DoxyCodeLine{00830   \textcolor{comment}{/* Filter and blur exposure value */}}
\DoxyCodeLine{00831   applyBlurFilter\_CPU(in\_tile\_p, out\_tile\_p, enlargedDimIn, filter\_p, filterDim,}
\DoxyCodeLine{00832                       marginLeft, marginBottom, marginRight, marginTop, dimOut);}
\DoxyCodeLine{00833   \textcolor{comment}{/* Memory release */}}
\DoxyCodeLine{00834   in\_tile\_ras-\/>unlock();}
\DoxyCodeLine{00835   filter\_ras-\/>unlock();}
\DoxyCodeLine{00836 }
\DoxyCodeLine{00837   \textcolor{comment}{/* If there is a background, do Exposure multiplication */}}
\DoxyCodeLine{00838   \textcolor{keywordflow}{if} (m\_background.isConnected()) \{}
\DoxyCodeLine{00839     composeBackgroundExposure\_CPU(out\_tile\_p, enlargedDimIn, marginRight,}
\DoxyCodeLine{00840                                   marginTop, back\_tile, dimOut,}
\DoxyCodeLine{00841                                   (\textcolor{keywordtype}{float})hardness);}
\DoxyCodeLine{00842   \}}
\DoxyCodeLine{00843   \textcolor{comment}{/* Unpremultiply the exposure value}}
\DoxyCodeLine{00844 \textcolor{comment}{   * -\/> convert back to RGB value (0 to 1)}}
\DoxyCodeLine{00845 \textcolor{comment}{   * -\/> premultiply */}}
\DoxyCodeLine{00846   convertExposureToRGB\_CPU(out\_tile\_p, enlargedDimIn, hardness);}
\DoxyCodeLine{00847 }
\DoxyCodeLine{00848   \textcolor{comment}{/* Clear raster */}}
\DoxyCodeLine{00849   tile.getRaster()-\/>clear();}
\DoxyCodeLine{00850   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} outRas32 = (\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}})tile.getRaster();}
\DoxyCodeLine{00851   \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} outRas64 = (\mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}})tile.getRaster();}
\DoxyCodeLine{00852   \mbox{\hyperlink{structint2}{int2}} margin         = \{marginRight, marginTop\};}
\DoxyCodeLine{00853   \textcolor{keywordflow}{if} (outRas32)}
\DoxyCodeLine{00854     setOutputRaster<TRaster32P, TPixel32>(out\_tile\_p, outRas32, enlargedDimIn,}
\DoxyCodeLine{00855                                           margin);}
\DoxyCodeLine{00856   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (outRas64)}
\DoxyCodeLine{00857     setOutputRaster<TRaster64P, TPixel64>(out\_tile\_p, outRas64, enlargedDimIn,}
\DoxyCodeLine{00858                                           margin);}
\DoxyCodeLine{00859 }
\DoxyCodeLine{00860   \textcolor{comment}{/* Memory release */}}
\DoxyCodeLine{00861   out\_tile\_ras-\/>unlock();}
\DoxyCodeLine{00862 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_ac0fa6814252660b1fe973aa97cbaf092}\label{class_iwa___motion_blur_comp_fx_ac0fa6814252660b1fe973aa97cbaf092}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00867                                                                   \{}
\DoxyCodeLine{00868   \textcolor{keywordflow}{if} (!m\_input.isConnected() \&\& !m\_background.isConnected()) \{}
\DoxyCodeLine{00869     bBox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00870     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00871   \}}
\DoxyCodeLine{00872 }
\DoxyCodeLine{00873   \textcolor{comment}{/* Rough implementation -\/ return infinite size if the background is connected}}
\DoxyCodeLine{00874 \textcolor{comment}{   */}}
\DoxyCodeLine{00875   \textcolor{keywordflow}{if} (m\_background.isConnected()) \{}
\DoxyCodeLine{00876     \textcolor{keywordtype}{bool} \_ret = m\_background-\/>doGetBBox(frame, bBox, info);}
\DoxyCodeLine{00877     bBox      = TConsts::infiniteRectD;}
\DoxyCodeLine{00878     \textcolor{keywordflow}{return} \_ret;}
\DoxyCodeLine{00879   \}}
\DoxyCodeLine{00880 }
\DoxyCodeLine{00881   \textcolor{keywordtype}{bool} ret = m\_input-\/>doGetBBox(frame, bBox, info);}
\DoxyCodeLine{00882 }
\DoxyCodeLine{00883   \textcolor{keywordflow}{if} (bBox == TConsts::infiniteRectD) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00884 }
\DoxyCodeLine{00885   QList<TPointD> points = getAttributes()-\/>getMotionPoints();}
\DoxyCodeLine{00886   \textcolor{comment}{/* Compute the margin from the bounding box of the moved trajectory */}}
\DoxyCodeLine{00887   \textcolor{comment}{/* Obtain the maximum absolute value of the coordinates of each trajectory}}
\DoxyCodeLine{00888 \textcolor{comment}{   * point */}}
\DoxyCodeLine{00889   \textcolor{comment}{/* Get upper, lower, left and right margins */}}
\DoxyCodeLine{00890   \textcolor{keywordtype}{double} minX = 0.0;}
\DoxyCodeLine{00891   \textcolor{keywordtype}{double} maxX = 0.0;}
\DoxyCodeLine{00892   \textcolor{keywordtype}{double} minY = 0.0;}
\DoxyCodeLine{00893   \textcolor{keywordtype}{double} maxY = 0.0;}
\DoxyCodeLine{00894   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} p = 0; p < points.size(); p++) \{}
\DoxyCodeLine{00895     \textcolor{keywordflow}{if} (points.at(p).x > maxX) maxX = points.at(p).x;}
\DoxyCodeLine{00896     \textcolor{keywordflow}{if} (points.at(p).x < minX) minX = points.at(p).x;}
\DoxyCodeLine{00897     \textcolor{keywordflow}{if} (points.at(p).y > maxY) maxY = points.at(p).y;}
\DoxyCodeLine{00898     \textcolor{keywordflow}{if} (points.at(p).y < minY) minY = points.at(p).y;}
\DoxyCodeLine{00899   \}}
\DoxyCodeLine{00900   \textcolor{keywordtype}{int} marginLeft   = (int)ceil(std::abs(minX));}
\DoxyCodeLine{00901   \textcolor{keywordtype}{int} marginRight  = (int)ceil(std::abs(maxX));}
\DoxyCodeLine{00902   \textcolor{keywordtype}{int} marginTop    = (int)ceil(std::abs(maxY));}
\DoxyCodeLine{00903   \textcolor{keywordtype}{int} marginBottom = (int)ceil(std::abs(minY));}
\DoxyCodeLine{00904 }
\DoxyCodeLine{00905   \mbox{\hyperlink{class_t_rect_t}{TRectD}} enlargedBBox(}
\DoxyCodeLine{00906       bBox.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} -\/ (\textcolor{keywordtype}{double})marginLeft, bBox.y0 -\/ (\textcolor{keywordtype}{double})marginBottom,}
\DoxyCodeLine{00907       bBox.x1 + (\textcolor{keywordtype}{double})marginRight, bBox.y1 + (\textcolor{keywordtype}{double})marginTop);}
\DoxyCodeLine{00908 }
\DoxyCodeLine{00909   bBox = enlargedBBox;}
\DoxyCodeLine{00910 }
\DoxyCodeLine{00911   \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00912 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_ade05d49d3ef77cbdb1b3c01bc129b411}\label{class_iwa___motion_blur_comp_fx_ade05d49d3ef77cbdb1b3c01bc129b411}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!getAlias@{getAlias}}
\index{getAlias@{getAlias}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{getAlias()}{getAlias()}}
{\footnotesize\ttfamily std\+::string Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::get\+Alias (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00927                                                                               \{}
\DoxyCodeLine{00928   std::string alias = getFxType();}
\DoxyCodeLine{00929   alias += \textcolor{stringliteral}{"{}["{}};}
\DoxyCodeLine{00930 }
\DoxyCodeLine{00931   \textcolor{comment}{// alias of the effects related to the input ports separated by commas}}
\DoxyCodeLine{00932   \textcolor{comment}{// a port that is not connected to an alias blank (empty string)}}
\DoxyCodeLine{00933   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00934   \textcolor{keywordflow}{for} (i = 0; i < getInputPortCount(); i++) \{}
\DoxyCodeLine{00935     \mbox{\hyperlink{class_t_fx_port}{TFxPort}} *port = getInputPort(i);}
\DoxyCodeLine{00936     \textcolor{keywordflow}{if} (port-\/>isConnected()) \{}
\DoxyCodeLine{00937       \mbox{\hyperlink{class_t_raster_fx_p}{TRasterFxP}} ifx = port-\/>getFx();}
\DoxyCodeLine{00938       assert(ifx);}
\DoxyCodeLine{00939       alias += ifx-\/>getAlias(frame, info);}
\DoxyCodeLine{00940     \}}
\DoxyCodeLine{00941     alias += \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00942   \}}
\DoxyCodeLine{00943 }
\DoxyCodeLine{00944   std::string paramalias(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00945   \textcolor{keywordflow}{for} (i = 0; i < getParams()-\/>getParamCount(); i++) \{}
\DoxyCodeLine{00946     \mbox{\hyperlink{class_t_param}{TParam}} *param = getParams()-\/>getParam(i);}
\DoxyCodeLine{00947     paramalias += param-\/>\mbox{\hyperlink{class_t_param_a8dd575552e05b174775f3c67fdf357cd}{getName}}() + \textcolor{stringliteral}{"{}="{}} + param-\/>\mbox{\hyperlink{class_t_param_a0b535b9277ba29bd778a67ba8efc91e6}{getValueAlias}}(frame, 3);}
\DoxyCodeLine{00948   \}}
\DoxyCodeLine{00949   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \textcolor{keywordtype}{id} = getIdentifier();}
\DoxyCodeLine{00950   \textcolor{keywordflow}{return} alias + std::to\_string(frame) + \textcolor{stringliteral}{"{},"{}} + std::to\_string(\textcolor{keywordtype}{id}) + paramalias +}
\DoxyCodeLine{00951          \textcolor{stringliteral}{"{}]"{}};}
\DoxyCodeLine{00952 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_a77ce3e97a975b8963a56470a4c09c33e}\label{class_iwa___motion_blur_comp_fx_a77ce3e97a975b8963a56470a4c09c33e}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!makeMotionBlurFilter\_CPU@{makeMotionBlurFilter\_CPU}}
\index{makeMotionBlurFilter\_CPU@{makeMotionBlurFilter\_CPU}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{makeMotionBlurFilter\_CPU()}{makeMotionBlurFilter\_CPU()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::make\+Motion\+Blur\+Filter\+\_\+\+CPU (\begin{DoxyParamCaption}\item[{float $\ast$}]{filter\+\_\+p,  }\item[{\mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&}]{filter\+Dim,  }\item[{int}]{margin\+Left,  }\item[{int}]{margin\+Bottom,  }\item[{\mbox{\hyperlink{structfloat4}{float4}} $\ast$}]{points\+Table,  }\item[{int}]{point\+Amount,  }\item[{float}]{start\+Value,  }\item[{float}]{start\+Curve,  }\item[{float}]{end\+Value,  }\item[{float}]{end\+Curve }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00103                                     \{}
\DoxyCodeLine{00104   \textcolor{comment}{/* Variable for adding filter value*/}}
\DoxyCodeLine{00105   \textcolor{keywordtype}{float} fil\_val\_sum = 0.0f;}
\DoxyCodeLine{00106   \textcolor{comment}{/* The current filter position to be looped in the 'for' statement */}}
\DoxyCodeLine{00107   \textcolor{keywordtype}{float} *current\_fil\_p = filter\_p;}
\DoxyCodeLine{00108   \textcolor{comment}{/* For each coordinate in the filter */}}
\DoxyCodeLine{00109   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} fily = 0; fily < filterDim.ly; fily++) \{}
\DoxyCodeLine{00110     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} filx = 0; filx < filterDim.lx; filx++, current\_fil\_p++) \{}
\DoxyCodeLine{00111       \textcolor{comment}{/* Get filter coordinates */}}
\DoxyCodeLine{00112       \mbox{\hyperlink{structfloat2}{float2}} pos = \{\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(filx -\/ marginLeft),}
\DoxyCodeLine{00113                     \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(fily -\/ marginBottom)\};}
\DoxyCodeLine{00114       \textcolor{comment}{/* Value to be updated */}}
\DoxyCodeLine{00115       \textcolor{keywordtype}{float} nearestDist2         = 100.0f;}
\DoxyCodeLine{00116       \textcolor{keywordtype}{int} nearestIndex           = -\/1;}
\DoxyCodeLine{00117       \textcolor{keywordtype}{float} nearestFramePosRatio = 0.0f;}
\DoxyCodeLine{00118 }
\DoxyCodeLine{00119       \textcolor{comment}{/* Find the nearest point for each pair of sample points */}}
\DoxyCodeLine{00120       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} v = 0; v < pointAmount -\/ 1; v++) \{}
\DoxyCodeLine{00121         \mbox{\hyperlink{structfloat4}{float4}} p0 = pointsTable[v];}
\DoxyCodeLine{00122         \mbox{\hyperlink{structfloat4}{float4}} p1 = pointsTable[v + 1];}
\DoxyCodeLine{00123 }
\DoxyCodeLine{00124         \textcolor{comment}{/* If it is not within the range, continue */}}
\DoxyCodeLine{00125         \textcolor{keywordflow}{if} (pos.x < std::min(p0.x, p1.x) -\/ 1.0f ||}
\DoxyCodeLine{00126             pos.x > std::max(p0.x, p1.x) + 1.0f ||}
\DoxyCodeLine{00127             pos.y < std::min(p0.y, p1.y) -\/ 1.0f ||}
\DoxyCodeLine{00128             pos.y > std::max(p0.y, p1.y) + 1.0f)}
\DoxyCodeLine{00129           \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00130 }
\DoxyCodeLine{00131         \textcolor{comment}{/* Since it is within the range, obtain the distance between the line}}
\DoxyCodeLine{00132 \textcolor{comment}{         * segment and the point. */}}
\DoxyCodeLine{00133         \textcolor{comment}{/* Calculate the inner product of 'p0'-\/>sampling point and 'p0'-\/>'p1' */}}
\DoxyCodeLine{00134         \mbox{\hyperlink{structfloat2}{float2}} vec\_p0\_sample = \{\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(pos.x -\/ p0.x),}
\DoxyCodeLine{00135                                 \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(pos.y -\/ p0.y)\};}
\DoxyCodeLine{00136         \mbox{\hyperlink{structfloat2}{float2}} vec\_p0\_p1 = \{\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(p1.x -\/ p0.x),}
\DoxyCodeLine{00137                             \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(p1.y -\/ p0.y)\};}
\DoxyCodeLine{00138         \textcolor{keywordtype}{float} dot =}
\DoxyCodeLine{00139             vec\_p0\_sample.x * vec\_p0\_p1.x + vec\_p0\_sample.y * vec\_p0\_p1.y;}
\DoxyCodeLine{00140         \textcolor{comment}{/* Calculate the square of distance */}}
\DoxyCodeLine{00141         \textcolor{keywordtype}{float} dist2;}
\DoxyCodeLine{00142         \textcolor{keywordtype}{float} framePosRatio;}
\DoxyCodeLine{00143         \textcolor{comment}{/* If it is before 'p0' */}}
\DoxyCodeLine{00144         \textcolor{keywordflow}{if} (dot <= 0.0f) \{}
\DoxyCodeLine{00145           dist2 = vec\_p0\_sample.x * vec\_p0\_sample.x +}
\DoxyCodeLine{00146                   vec\_p0\_sample.y * vec\_p0\_sample.y;}
\DoxyCodeLine{00147           framePosRatio = 0.0f;}
\DoxyCodeLine{00148         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00149           \textcolor{comment}{/* Calculate the square of the length of the trajectory vector */}}
\DoxyCodeLine{00150           \textcolor{keywordtype}{float} length2 = p0.z * p0.z;}
\DoxyCodeLine{00151 }
\DoxyCodeLine{00152           \textcolor{comment}{/* If it is between 'p0' and 'p1'}}
\DoxyCodeLine{00153 \textcolor{comment}{           * If the trajectory at p is a point,}}
\DoxyCodeLine{00154 \textcolor{comment}{           * 'length2' becomes 0, so it will never fall into this condition.}}
\DoxyCodeLine{00155 \textcolor{comment}{           * So, there should not be worry of becoming ZeroDivide. */}}
\DoxyCodeLine{00156           \textcolor{keywordflow}{if} (dot < length2) \{}
\DoxyCodeLine{00157             \textcolor{keywordtype}{float} p0\_sample\_dist2 = vec\_p0\_sample.x * vec\_p0\_sample.x +}
\DoxyCodeLine{00158                                     vec\_p0\_sample.y * vec\_p0\_sample.y;}
\DoxyCodeLine{00159             dist2         = p0\_sample\_dist2 -\/ dot * dot / length2;}
\DoxyCodeLine{00160             framePosRatio = dot / length2;}
\DoxyCodeLine{00161           \}}
\DoxyCodeLine{00162           \textcolor{comment}{/* If it is before 'p1' */}}
\DoxyCodeLine{00163           \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00164             \mbox{\hyperlink{structfloat2}{float2}} vec\_p1\_sample = \{pos.x -\/ p1.x, pos.y -\/ p1.y\};}
\DoxyCodeLine{00165             dist2                = vec\_p1\_sample.x * vec\_p1\_sample.x +}
\DoxyCodeLine{00166                     vec\_p1\_sample.y * vec\_p1\_sample.y;}
\DoxyCodeLine{00167             framePosRatio = 1.0f;}
\DoxyCodeLine{00168           \}}
\DoxyCodeLine{00169         \}}
\DoxyCodeLine{00170         \textcolor{comment}{/* If the distance is farther than (√ 2 + 1) / 2, continue}}
\DoxyCodeLine{00171 \textcolor{comment}{         * Because it is a comparison with dist2, the value is squared */}}
\DoxyCodeLine{00172         \textcolor{keywordflow}{if} (dist2 > 1.4571f) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00173 }
\DoxyCodeLine{00174         \textcolor{comment}{/* Update if distance is closer */}}
\DoxyCodeLine{00175         \textcolor{keywordflow}{if} (dist2 < nearestDist2) \{}
\DoxyCodeLine{00176           nearestDist2         = dist2;}
\DoxyCodeLine{00177           nearestIndex         = v;}
\DoxyCodeLine{00178           nearestFramePosRatio = framePosRatio;}
\DoxyCodeLine{00179         \}}
\DoxyCodeLine{00180       \}}
\DoxyCodeLine{00181 }
\DoxyCodeLine{00182       \textcolor{comment}{/* If neighborhood vector of the current pixel can not be found,}}
\DoxyCodeLine{00183 \textcolor{comment}{       * set the filter value to 0 and return */}}
\DoxyCodeLine{00184       \textcolor{keywordflow}{if} (nearestIndex == -\/1) \{}
\DoxyCodeLine{00185         *current\_fil\_p = 0.0f;}
\DoxyCodeLine{00186         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00187       \}}
\DoxyCodeLine{00188 }
\DoxyCodeLine{00189       \textcolor{comment}{/* Count how many subpixels (16 * 16) of the current pixel}}
\DoxyCodeLine{00190 \textcolor{comment}{       * are in the range 0.5 from the neighborhood vector.}}
\DoxyCodeLine{00191 \textcolor{comment}{       */}}
\DoxyCodeLine{00192       \textcolor{keywordtype}{int} count  = 0;}
\DoxyCodeLine{00193       \mbox{\hyperlink{structfloat4}{float4}} np0 = pointsTable[nearestIndex];}
\DoxyCodeLine{00194       \mbox{\hyperlink{structfloat4}{float4}} np1 = pointsTable[nearestIndex + 1];}
\DoxyCodeLine{00195       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} yy = 0; yy < 16; yy++) \{}
\DoxyCodeLine{00196         \textcolor{comment}{/* Y coordinate of the subpixel */}}
\DoxyCodeLine{00197         \textcolor{keywordtype}{float} subPosY = pos.y + ((float)yy -\/ 7.5f) / 16.0f;}
\DoxyCodeLine{00198         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} xx = 0; xx < 16; xx++) \{}
\DoxyCodeLine{00199           \textcolor{comment}{/* X coordinate of the subpixel */}}
\DoxyCodeLine{00200           \textcolor{keywordtype}{float} subPosX = pos.x + ((float)xx -\/ 7.5f) / 16.0f;}
\DoxyCodeLine{00201 }
\DoxyCodeLine{00202           \mbox{\hyperlink{structfloat2}{float2}} vec\_np0\_sub = \{subPosX -\/ np0.x, subPosY -\/ np0.y\};}
\DoxyCodeLine{00203           \mbox{\hyperlink{structfloat2}{float2}} vec\_np0\_np1 = \{np1.x -\/ np0.x, np1.y -\/ np0.y\};}
\DoxyCodeLine{00204           \textcolor{keywordtype}{float} dot =}
\DoxyCodeLine{00205               vec\_np0\_sub.x * vec\_np0\_np1.x + vec\_np0\_sub.y * vec\_np0\_np1.y;}
\DoxyCodeLine{00206           \textcolor{comment}{/* Calculate the square of the distance */}}
\DoxyCodeLine{00207           \textcolor{keywordtype}{float} dist2;}
\DoxyCodeLine{00208           \textcolor{comment}{/* If it is before 'p0' */}}
\DoxyCodeLine{00209           \textcolor{keywordflow}{if} (dot <= 0.0f)}
\DoxyCodeLine{00210             dist2 =}
\DoxyCodeLine{00211                 vec\_np0\_sub.x * vec\_np0\_sub.x + vec\_np0\_sub.y * vec\_np0\_sub.y;}
\DoxyCodeLine{00212           \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00213             \textcolor{comment}{/* Compute the square of the length of the trajectory vector */}}
\DoxyCodeLine{00214             \textcolor{keywordtype}{float} length2 = np0.z * np0.z;}
\DoxyCodeLine{00215             \textcolor{comment}{/* If it is between 'p0' and 'p1' */}}
\DoxyCodeLine{00216             \textcolor{keywordflow}{if} (dot < length2) \{}
\DoxyCodeLine{00217               \textcolor{keywordtype}{float} np0\_sub\_dist2 =}
\DoxyCodeLine{00218                   vec\_np0\_sub.x * vec\_np0\_sub.x + vec\_np0\_sub.y * vec\_np0\_sub.y;}
\DoxyCodeLine{00219               dist2 = np0\_sub\_dist2 -\/ dot * dot / length2;}
\DoxyCodeLine{00220             \}}
\DoxyCodeLine{00221             \textcolor{comment}{/* if it is before 'p1' */}}
\DoxyCodeLine{00222             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00223               \mbox{\hyperlink{structfloat2}{float2}} vec\_np1\_sub = \{subPosX -\/ np1.x, subPosY -\/ np1.y\};}
\DoxyCodeLine{00224               dist2 =}
\DoxyCodeLine{00225                   vec\_np1\_sub.x * vec\_np1\_sub.x + vec\_np1\_sub.y * vec\_np1\_sub.y;}
\DoxyCodeLine{00226             \}}
\DoxyCodeLine{00227           \}}
\DoxyCodeLine{00228           \textcolor{comment}{/* Increment count if squared distance is less than 0.25 */}}
\DoxyCodeLine{00229           \textcolor{keywordflow}{if} (dist2 <= 0.25f) count++;}
\DoxyCodeLine{00230         \}}
\DoxyCodeLine{00231       \}}
\DoxyCodeLine{00232       \textcolor{comment}{/* 'safeguard' -\/ If the count is 0, set the field value to 0 and return.}}
\DoxyCodeLine{00233 \textcolor{comment}{       */}}
\DoxyCodeLine{00234       \textcolor{keywordflow}{if} (count == 0) \{}
\DoxyCodeLine{00235         *current\_fil\_p = 0.0f;}
\DoxyCodeLine{00236         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00237       \}}
\DoxyCodeLine{00238 }
\DoxyCodeLine{00239       \textcolor{comment}{/* Count is 256 at a maximum */}}
\DoxyCodeLine{00240       \textcolor{keywordtype}{float} countRatio = (float)count / 256.0f;}
\DoxyCodeLine{00241 }
\DoxyCodeLine{00242       \textcolor{comment}{/* The brightness of the filter value is inversely proportional}}
\DoxyCodeLine{00243 \textcolor{comment}{       * to the area of ​​the line of width 1 made by the vector.}}
\DoxyCodeLine{00244 \textcolor{comment}{       *}}
\DoxyCodeLine{00245 \textcolor{comment}{       * Since there are semicircular caps with radius 0.5}}
\DoxyCodeLine{00246 \textcolor{comment}{       * before and after the vector, it will never be 0-\/divide}}
\DoxyCodeLine{00247 \textcolor{comment}{       * even if the length of vector is 0.}}
\DoxyCodeLine{00248 \textcolor{comment}{       */}}
\DoxyCodeLine{00249 }
\DoxyCodeLine{00250       \textcolor{comment}{/* Area of the neighborhood vector when width = 1 */}}
\DoxyCodeLine{00251       \textcolor{keywordtype}{float} vecMenseki = 0.25f * 3.14159265f + np0.z;}
\DoxyCodeLine{00252 }
\DoxyCodeLine{00253       \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00254       \textcolor{comment}{/* Next, get the value of the gamma strength */}}
\DoxyCodeLine{00255       \textcolor{comment}{/* Offset value of the frame of the neighbor point */}}
\DoxyCodeLine{00256       \textcolor{keywordtype}{float} curveValue;}
\DoxyCodeLine{00257       \textcolor{keywordtype}{float} frameOffset =}
\DoxyCodeLine{00258           np0.w * (1.0f -\/ nearestFramePosRatio) + np1.w * nearestFramePosRatio;}
\DoxyCodeLine{00259       \textcolor{comment}{/* If the frame is exactly at the frame origin,}}
\DoxyCodeLine{00260 \textcolor{comment}{       * or there is no attenuation value, set curveValue to 1 */}}
\DoxyCodeLine{00261       if (frameOffset == 0.0f || (frameOffset < 0.0f \&\& startValue == 1.0f) ||}
\DoxyCodeLine{00262           (frameOffset > 0.0f \&\& endValue == 1.0f))}
\DoxyCodeLine{00263         curveValue = 1.0f;}
\DoxyCodeLine{00264       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00265         \textcolor{comment}{/* Change according to positive / negative of offset */}}
\DoxyCodeLine{00266         \textcolor{keywordtype}{float} value, curve, ratio;}
\DoxyCodeLine{00267         \textcolor{keywordflow}{if} (frameOffset < 0.0f) \textcolor{comment}{/* Start side */}}
\DoxyCodeLine{00268         \{}
\DoxyCodeLine{00269           value = startValue;}
\DoxyCodeLine{00270           curve = startCurve;}
\DoxyCodeLine{00271           ratio = 1.0f -\/ (frameOffset / pointsTable[0].w);}
\DoxyCodeLine{00272         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00273           value = endValue;}
\DoxyCodeLine{00274           curve = endCurve;}
\DoxyCodeLine{00275           ratio = 1.0f -\/ (frameOffset / pointsTable[pointAmount -\/ 1].w);}
\DoxyCodeLine{00276         \}}
\DoxyCodeLine{00277 }
\DoxyCodeLine{00278         curveValue = value + (1.0f -\/ value) * powf(ratio, 1.0f / curve);}
\DoxyCodeLine{00279       \}}
\DoxyCodeLine{00280       \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00281 }
\DoxyCodeLine{00282       \textcolor{comment}{/* Store field value */}}
\DoxyCodeLine{00283       *current\_fil\_p = curveValue * countRatio / vecMenseki;}
\DoxyCodeLine{00284       fil\_val\_sum += *current\_fil\_p;}
\DoxyCodeLine{00285     \}}
\DoxyCodeLine{00286   \}}
\DoxyCodeLine{00287 }
\DoxyCodeLine{00288   \textcolor{comment}{/* Normalization */}}
\DoxyCodeLine{00289   current\_fil\_p = filter\_p;}
\DoxyCodeLine{00290   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} f = 0; f < filterDim.lx * filterDim.ly; f++, current\_fil\_p++) \{}
\DoxyCodeLine{00291     *current\_fil\_p /= fil\_val\_sum;}
\DoxyCodeLine{00292   \}}
\DoxyCodeLine{00293 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_a86581b6a51c482164b7a56aced7e90d0}\label{class_iwa___motion_blur_comp_fx_a86581b6a51c482164b7a56aced7e90d0}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!makeZanzoFilter\_CPU@{makeZanzoFilter\_CPU}}
\index{makeZanzoFilter\_CPU@{makeZanzoFilter\_CPU}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{makeZanzoFilter\_CPU()}{makeZanzoFilter\_CPU()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::make\+Zanzo\+Filter\+\_\+\+CPU (\begin{DoxyParamCaption}\item[{float $\ast$}]{filter\+\_\+p,  }\item[{\mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&}]{filter\+Dim,  }\item[{int}]{margin\+Left,  }\item[{int}]{margin\+Bottom,  }\item[{\mbox{\hyperlink{structfloat4}{float4}} $\ast$}]{points\+Table,  }\item[{int}]{point\+Amount,  }\item[{float}]{start\+Value,  }\item[{float}]{start\+Curve,  }\item[{float}]{end\+Value,  }\item[{float}]{end\+Curve }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00302                                     \{}
\DoxyCodeLine{00303   \textcolor{comment}{/* Variable for adding filter value */}}
\DoxyCodeLine{00304   \textcolor{keywordtype}{float} fil\_val\_sum = 0.0f;}
\DoxyCodeLine{00305   \textcolor{comment}{/* The current filter position to be looped in the 'for' statement */}}
\DoxyCodeLine{00306   \textcolor{keywordtype}{float} *current\_fil\_p = filter\_p;}
\DoxyCodeLine{00307   \textcolor{comment}{/* For each coordinate in the filter */}}
\DoxyCodeLine{00308   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} fily = 0; fily < filterDim.ly; fily++) \{}
\DoxyCodeLine{00309     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} filx = 0; filx < filterDim.lx; filx++, current\_fil\_p++) \{}
\DoxyCodeLine{00310       \textcolor{comment}{/* Get filter coordinates */}}
\DoxyCodeLine{00311       \mbox{\hyperlink{structfloat2}{float2}} pos = \{(float)(filx -\/ marginLeft), (float)(fily -\/ marginBottom)\};}
\DoxyCodeLine{00312       \textcolor{comment}{/* Variable to be accumulated */}}
\DoxyCodeLine{00313       \textcolor{keywordtype}{float} filter\_sum = 0.0f;}
\DoxyCodeLine{00314       \textcolor{comment}{/* Measure the distance for each sample point and accumulate the density}}
\DoxyCodeLine{00315 \textcolor{comment}{       */}}
\DoxyCodeLine{00316       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} v = 0; v < pointAmount; v++) \{}
\DoxyCodeLine{00317         \mbox{\hyperlink{structfloat4}{float4}} p0 = pointsTable[v];}
\DoxyCodeLine{00318         \textcolor{comment}{/* If it is not within the distance 1 around the coordinates of 'p0',}}
\DoxyCodeLine{00319 \textcolor{comment}{         * continue */}}
\DoxyCodeLine{00320         \textcolor{keywordflow}{if} (pos.x < p0.x -\/ 1.0f || pos.x > p0.x + 1.0f || pos.y < p0.y -\/ 1.0f ||}
\DoxyCodeLine{00321             pos.y > p0.y + 1.0f)}
\DoxyCodeLine{00322           \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00323 }
\DoxyCodeLine{00324         \textcolor{comment}{/* Linear interpolation with 4 neighboring pixels */}}
\DoxyCodeLine{00325         \textcolor{keywordtype}{float} xRatio = 1.0f -\/ std::abs(pos.x -\/ p0.x);}
\DoxyCodeLine{00326         \textcolor{keywordtype}{float} yRatio = 1.0f -\/ std::abs(pos.y -\/ p0.y);}
\DoxyCodeLine{00327 }
\DoxyCodeLine{00328         \textcolor{comment}{/* Next, get the value of the gamma strength */}}
\DoxyCodeLine{00329         \textcolor{comment}{/* Offset value of the frame of the neighbor point */}}
\DoxyCodeLine{00330         \textcolor{keywordtype}{float} curveValue;}
\DoxyCodeLine{00331         \textcolor{keywordtype}{float} frameOffset = p0.w;}
\DoxyCodeLine{00332         \textcolor{comment}{/* If the frame is exactly at the frame origin,}}
\DoxyCodeLine{00333 \textcolor{comment}{        * or there is no attenuation value, set curveValue to 1 */}}
\DoxyCodeLine{00334         \textcolor{keywordflow}{if} (frameOffset == 0.0f || (frameOffset < 0.0f \&\& startValue == 1.0f) ||}
\DoxyCodeLine{00335             (frameOffset > 0.0f \&\& endValue == 1.0f))}
\DoxyCodeLine{00336           curveValue = 1.0f;}
\DoxyCodeLine{00337         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00338           \textcolor{comment}{/* Change according to positive / negative of offset */}}
\DoxyCodeLine{00339           \textcolor{keywordtype}{float} value, curve, ratio;}
\DoxyCodeLine{00340           \textcolor{keywordflow}{if} (frameOffset < 0.0f) \textcolor{comment}{/* Start side */}}
\DoxyCodeLine{00341           \{}
\DoxyCodeLine{00342             value = startValue;}
\DoxyCodeLine{00343             curve = startCurve;}
\DoxyCodeLine{00344             ratio = 1.0f -\/ (frameOffset / pointsTable[0].w);}
\DoxyCodeLine{00345           \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00346             value = endValue;}
\DoxyCodeLine{00347             curve = endCurve;}
\DoxyCodeLine{00348             ratio = 1.0f -\/ (frameOffset / pointsTable[pointAmount -\/ 1].w);}
\DoxyCodeLine{00349           \}}
\DoxyCodeLine{00350 }
\DoxyCodeLine{00351           curveValue = value + (1.0f -\/ value) * powf(ratio, 1.0f / curve);}
\DoxyCodeLine{00352         \}}
\DoxyCodeLine{00353         \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00354 }
\DoxyCodeLine{00355         \textcolor{comment}{/* Filter value integration */}}
\DoxyCodeLine{00356         filter\_sum += xRatio * yRatio * curveValue;}
\DoxyCodeLine{00357       \}}
\DoxyCodeLine{00358 }
\DoxyCodeLine{00359       \textcolor{comment}{/* Store value */}}
\DoxyCodeLine{00360       *current\_fil\_p = filter\_sum;}
\DoxyCodeLine{00361       fil\_val\_sum += *current\_fil\_p;}
\DoxyCodeLine{00362     \}}
\DoxyCodeLine{00363   \}}
\DoxyCodeLine{00364 }
\DoxyCodeLine{00365   \textcolor{comment}{/* Normalization */}}
\DoxyCodeLine{00366   current\_fil\_p = filter\_p;}
\DoxyCodeLine{00367   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} f = 0; f < filterDim.lx * filterDim.ly; f++, current\_fil\_p++) \{}
\DoxyCodeLine{00368     *current\_fil\_p /= fil\_val\_sum;}
\DoxyCodeLine{00369   \}}
\DoxyCodeLine{00370 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_a9462f2eed0f19b7bcb2d1926d04f7f3c}\label{class_iwa___motion_blur_comp_fx_a9462f2eed0f19b7bcb2d1926d04f7f3c}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!setOutputRaster@{setOutputRaster}}
\index{setOutputRaster@{setOutputRaster}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{setOutputRaster()}{setOutputRaster()}}
{\footnotesize\ttfamily template$<$typename \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} , typename PIXEL $>$ \\
void Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::set\+Output\+Raster (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structfloat4}{float4}} $\ast$}]{src\+Mem,  }\item[{const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}}}]{dst\+Ras,  }\item[{\mbox{\hyperlink{class_t_dimension_t}{TDimensionI}}}]{dim,  }\item[{\mbox{\hyperlink{structint2}{int2}}}]{margin }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00066                                                                          \{}
\DoxyCodeLine{00067   \textcolor{keywordtype}{int} out\_j = 0;}
\DoxyCodeLine{00068   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = margin.y; j < dstRas-\/>getLy() + margin.y; j++, out\_j++) \{}
\DoxyCodeLine{00069     PIXEL *pix     = dstRas-\/>pixels(out\_j);}
\DoxyCodeLine{00070     \mbox{\hyperlink{structfloat4}{float4}} *chan\_p = srcMem;}
\DoxyCodeLine{00071     chan\_p += j * dim.lx + margin.x;}
\DoxyCodeLine{00072     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < dstRas-\/>getLx(); i++) \{}
\DoxyCodeLine{00073       \textcolor{keywordtype}{float} val;}
\DoxyCodeLine{00074       val    = (*chan\_p).x * (float)PIXEL::maxChannelValue + 0.5f;}
\DoxyCodeLine{00075       pix-\/>r = (\textcolor{keyword}{typename} PIXEL::Channel)((val > (\textcolor{keywordtype}{float})PIXEL::maxChannelValue)}
\DoxyCodeLine{00076                                              ? (\textcolor{keywordtype}{float})PIXEL::maxChannelValue}
\DoxyCodeLine{00077                                              : val);}
\DoxyCodeLine{00078       val    = (*chan\_p).y * (float)PIXEL::maxChannelValue + 0.5f;}
\DoxyCodeLine{00079       pix-\/>g = (\textcolor{keyword}{typename} PIXEL::Channel)((val > (\textcolor{keywordtype}{float})PIXEL::maxChannelValue)}
\DoxyCodeLine{00080                                              ? (\textcolor{keywordtype}{float})PIXEL::maxChannelValue}
\DoxyCodeLine{00081                                              : val);}
\DoxyCodeLine{00082       val    = (*chan\_p).z * (float)PIXEL::maxChannelValue + 0.5f;}
\DoxyCodeLine{00083       pix-\/>b = (\textcolor{keyword}{typename} PIXEL::Channel)((val > (\textcolor{keywordtype}{float})PIXEL::maxChannelValue)}
\DoxyCodeLine{00084                                              ? (\textcolor{keywordtype}{float})PIXEL::maxChannelValue}
\DoxyCodeLine{00085                                              : val);}
\DoxyCodeLine{00086       val    = (*chan\_p).w * (float)PIXEL::maxChannelValue + 0.5f;}
\DoxyCodeLine{00087       pix-\/>m = (\textcolor{keyword}{typename} PIXEL::Channel)((val > (\textcolor{keywordtype}{float})PIXEL::maxChannelValue)}
\DoxyCodeLine{00088                                              ? (\textcolor{keywordtype}{float})PIXEL::maxChannelValue}
\DoxyCodeLine{00089                                              : val);}
\DoxyCodeLine{00090       pix++;}
\DoxyCodeLine{00091       chan\_p++;}
\DoxyCodeLine{00092     \}}
\DoxyCodeLine{00093   \}}
\DoxyCodeLine{00094 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_ae5a183329edd395bf078de2552d4a800}\label{class_iwa___motion_blur_comp_fx_ae5a183329edd395bf078de2552d4a800}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!setSourceRaster@{setSourceRaster}}
\index{setSourceRaster@{setSourceRaster}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{setSourceRaster()}{setSourceRaster()}}
{\footnotesize\ttfamily template$<$typename \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} , typename PIXEL $>$ \\
bool Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::set\+Source\+Raster (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}}}]{src\+Ras,  }\item[{\mbox{\hyperlink{structfloat4}{float4}} $\ast$}]{dst\+Mem,  }\item[{\mbox{\hyperlink{class_t_dimension_t}{TDimensionI}}}]{dim,  }\item[{Premulti\+Types}]{type = {\ttfamily AUTO} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00020                                                                \{}
\DoxyCodeLine{00021   \textcolor{keywordtype}{bool} isPremultiplied = (type == SOURCE\_IS\_NOT\_PREMUTIPLIED) ? \textcolor{keyword}{false} : \textcolor{keyword}{true};}
\DoxyCodeLine{00022 }
\DoxyCodeLine{00023   \mbox{\hyperlink{structfloat4}{float4}} *chann\_p = dstMem;}
\DoxyCodeLine{00024 }
\DoxyCodeLine{00025   \textcolor{keywordtype}{float} threshold = 100.0 / (float)TPixel64::maxChannelValue;}
\DoxyCodeLine{00026 }
\DoxyCodeLine{00027   \textcolor{keywordtype}{int} max = 0;}
\DoxyCodeLine{00028   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < dim.ly; j++) \{}
\DoxyCodeLine{00029     PIXEL *pix = srcRas-\/>pixels(j);}
\DoxyCodeLine{00030     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < dim.lx; i++) \{}
\DoxyCodeLine{00031       (*chann\_p).x = (float)pix-\/>r / (\textcolor{keywordtype}{float})PIXEL::maxChannelValue;}
\DoxyCodeLine{00032       (*chann\_p).y = (float)pix-\/>g / (\textcolor{keywordtype}{float})PIXEL::maxChannelValue;}
\DoxyCodeLine{00033       (*chann\_p).z = (float)pix-\/>b / (\textcolor{keywordtype}{float})PIXEL::maxChannelValue;}
\DoxyCodeLine{00034       (*chann\_p).w = (float)pix-\/>m / (\textcolor{keywordtype}{float})PIXEL::maxChannelValue;}
\DoxyCodeLine{00035 }
\DoxyCodeLine{00036       \textcolor{comment}{/* If there are pixels whose RGB values ​​are larger than the alpha}}
\DoxyCodeLine{00037 \textcolor{comment}{       * channel, determine the source is not premutiplied */}}
\DoxyCodeLine{00038       \textcolor{keywordflow}{if} (type == AUTO \&\& isPremultiplied \&\&}
\DoxyCodeLine{00039           (((*chann\_p).x > (*chann\_p).w \&\& (*chann\_p).x > threshold) ||}
\DoxyCodeLine{00040            ((*chann\_p).y > (*chann\_p).w \&\& (*chann\_p).y > threshold) ||}
\DoxyCodeLine{00041            ((*chann\_p).z > (*chann\_p).w \&\& (*chann\_p).z > threshold)))}
\DoxyCodeLine{00042         isPremultiplied = \textcolor{keyword}{false};}
\DoxyCodeLine{00043 }
\DoxyCodeLine{00044       pix++;}
\DoxyCodeLine{00045       chann\_p++;}
\DoxyCodeLine{00046     \}}
\DoxyCodeLine{00047   \}}
\DoxyCodeLine{00048 }
\DoxyCodeLine{00049   \textcolor{keywordflow}{if} (isPremultiplied) \{}
\DoxyCodeLine{00050     chann\_p = dstMem;}
\DoxyCodeLine{00051     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < dim.lx * dim.ly; i++, chann\_p++) \{}
\DoxyCodeLine{00052       \textcolor{keywordflow}{if} ((*chann\_p).x > (*chann\_p).w) (*chann\_p).x = (*chann\_p).w;}
\DoxyCodeLine{00053       \textcolor{keywordflow}{if} ((*chann\_p).y > (*chann\_p).w) (*chann\_p).y = (*chann\_p).w;}
\DoxyCodeLine{00054       \textcolor{keywordflow}{if} ((*chann\_p).z > (*chann\_p).w) (*chann\_p).z = (*chann\_p).w;}
\DoxyCodeLine{00055     \}}
\DoxyCodeLine{00056   \}}
\DoxyCodeLine{00057 }
\DoxyCodeLine{00058   \textcolor{keywordflow}{return} isPremultiplied;}
\DoxyCodeLine{00059 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_aad78d5dde8a10463f9cb0ed0c9690a20}\label{class_iwa___motion_blur_comp_fx_aad78d5dde8a10463f9cb0ed0c9690a20}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!m\_background@{m\_background}}
\index{m\_background@{m\_background}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{m\_background}{m\_background}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::m\+\_\+background\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_af8b21373cdc37b4d0664af3cf8e4c410}\label{class_iwa___motion_blur_comp_fx_af8b21373cdc37b4d0664af3cf8e4c410}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!m\_endCurve@{m\_endCurve}}
\index{m\_endCurve@{m\_endCurve}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{m\_endCurve}{m\_endCurve}}
{\footnotesize\ttfamily TDouble\+ParamP Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::m\+\_\+end\+Curve\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_acbaad9f146d76b3310ec9c8a05aee256}\label{class_iwa___motion_blur_comp_fx_acbaad9f146d76b3310ec9c8a05aee256}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!m\_endValue@{m\_endValue}}
\index{m\_endValue@{m\_endValue}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{m\_endValue}{m\_endValue}}
{\footnotesize\ttfamily TDouble\+ParamP Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::m\+\_\+end\+Value\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_a8649c5adac787e9a47c0e65fee80982e}\label{class_iwa___motion_blur_comp_fx_a8649c5adac787e9a47c0e65fee80982e}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!m\_hardness@{m\_hardness}}
\index{m\_hardness@{m\_hardness}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{m\_hardness}{m\_hardness}}
{\footnotesize\ttfamily TDouble\+ParamP Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::m\+\_\+hardness\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_aac4c650e8b2577fae37b60457038787f}\label{class_iwa___motion_blur_comp_fx_aac4c650e8b2577fae37b60457038787f}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!m\_input@{m\_input}}
\index{m\_input@{m\_input}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{m\_input}{m\_input}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::m\+\_\+input\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_a5e86c058d5007ece3226ef691adad633}\label{class_iwa___motion_blur_comp_fx_a5e86c058d5007ece3226ef691adad633}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!m\_premultiType@{m\_premultiType}}
\index{m\_premultiType@{m\_premultiType}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{m\_premultiType}{m\_premultiType}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_int_enum_param_p}{TInt\+Enum\+ParamP}} Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::m\+\_\+premulti\+Type\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_a9b5e98f57dc57b20995aca462b6755a5}\label{class_iwa___motion_blur_comp_fx_a9b5e98f57dc57b20995aca462b6755a5}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!m\_startCurve@{m\_startCurve}}
\index{m\_startCurve@{m\_startCurve}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{m\_startCurve}{m\_startCurve}}
{\footnotesize\ttfamily TDouble\+ParamP Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::m\+\_\+start\+Curve\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_ac16fb60ae13fe358e5a8252359334809}\label{class_iwa___motion_blur_comp_fx_ac16fb60ae13fe358e5a8252359334809}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!m\_startValue@{m\_startValue}}
\index{m\_startValue@{m\_startValue}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{m\_startValue}{m\_startValue}}
{\footnotesize\ttfamily TDouble\+ParamP Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::m\+\_\+start\+Value\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___motion_blur_comp_fx_a697b30a9360ac9da9d8fdd3a3c508d3f}\label{class_iwa___motion_blur_comp_fx_a697b30a9360ac9da9d8fdd3a3c508d3f}} 
\index{Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}!m\_zanzoMode@{m\_zanzoMode}}
\index{m\_zanzoMode@{m\_zanzoMode}!Iwa\_MotionBlurCompFx@{Iwa\_MotionBlurCompFx}}
\doxysubsubsection{\texorpdfstring{m\_zanzoMode}{m\_zanzoMode}}
{\footnotesize\ttfamily TBool\+ParamP Iwa\+\_\+\+Motion\+Blur\+Comp\+Fx\+::m\+\_\+zanzo\+Mode\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/iwa\+\_\+motionblurfx.\+h\item 
E\+:/opentoonz/toonz/sources/stdfx/iwa\+\_\+motionblurfx.\+cpp\end{DoxyCompactItemize}
