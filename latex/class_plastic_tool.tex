\hypertarget{class_plastic_tool}{}\doxysection{Plastic\+Tool Class Reference}
\label{class_plastic_tool}\index{PlasticTool@{PlasticTool}}
Inheritance diagram for Plastic\+Tool\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_plastic_tool}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_plastic_tool_1_1_mesh_index}{Mesh\+Index}}
\item 
class \mbox{\hyperlink{class_plastic_tool_1_1_temporary_activation}{Temporary\+Activation}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum {\bfseries Modes} \{ \newline
{\bfseries MESH\+\_\+\+IDX} = 0
, {\bfseries RIGIDITY\+\_\+\+IDX}
, {\bfseries BUILD\+\_\+\+IDX}
, {\bfseries ANIMATE\+\_\+\+IDX}
, \newline
{\bfseries MODES\+\_\+\+COUNT}
 \}
\item 
typedef \mbox{\hyperlink{class_multiple_selection}{Multiple\+Selection}}$<$ \mbox{\hyperlink{struct_plastic_tool_1_1_mesh_index}{Mesh\+Index}} $>$ \mbox{\hyperlink{class_plastic_tool_ac5aa32c29021becd07b3d2065f0f520e}{Mesh\+Selection}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_plastic_tool_a46eed34176efc8d18e836a6eeead7509}{swap\+Edge\+\_\+mesh\+\_\+undo}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_a74a548f48e5eb8d9e5a326c262b87803}{collapse\+Edge\+\_\+mesh\+\_\+undo}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_a4ac14fb8348dde9ad9ad1ea8c87e6f07}{split\+Edge\+\_\+mesh\+\_\+undo}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_aa5dce16dad8209d746b2800c46bd8d1e}{cut\+Edges\+\_\+mesh\+\_\+undo}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_aa8f3bd3d07484ed0552914984f726742}{delete\+Selected\+Vertex\+\_\+undo}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_ae84e7929e0693974d7e9f2b4f038c61e}{set\+Key\+\_\+undo}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_a0ab6897095a480405d76a8ae53129734}{set\+Global\+Key\+\_\+undo}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_a942fc7fe51ebc590095c2b6c52716339}{set\+Rest\+Key\+\_\+undo}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_a1a8aa43f4b1b7e2ce53cc39093da6d83}{set\+Global\+Rest\+Key\+\_\+undo}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_a3dc0d677ee4c59db73f177fa80488028}{copy\+Skeleton}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_a6ea5da9f1dce47940f8b4124792e90c5}{paste\+Skeleton\+\_\+undo}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_ae89698862a6b52ba373f9fc6cdb8eedf}{copy\+Deformation}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_a4452953485b1f530335d223583ff9867}{paste\+Deformation\+\_\+undo}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Signals}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_plastic_tool_aba8d63459389c78c95ee996bf015fe7a}\label{class_plastic_tool_aba8d63459389c78c95ee996bf015fe7a}} 
void {\bfseries skel\+Ids\+List\+Changed} ()
\item 
\mbox{\Hypertarget{class_plastic_tool_afc6fbecd9f9e2efacf88bf33cbb48d58}\label{class_plastic_tool_afc6fbecd9f9e2efacf88bf33cbb48d58}} 
void {\bfseries skel\+Id\+Changed} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} \mbox{\hyperlink{class_plastic_tool_a87b192f0a948cbc5a4728afc342e9d46}{get\+Tool\+Type}} () const override
\item 
int \mbox{\hyperlink{class_plastic_tool_a15762671b2454062cd39fd52e0ee59a3}{get\+Cursor\+Id}} () const override
\begin{DoxyCompactList}\small\item\em Returns the type of cursor used by the tool. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_tool_options_box}{Tool\+Options\+Box}} $\ast$ \mbox{\hyperlink{class_plastic_tool_a21ed12bc2cdfd6f1a252cef5addfdc81}{create\+Options\+Box}} () override
\item 
\mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ \mbox{\hyperlink{class_plastic_tool_a6e002abbbdf11589e1cb375e07a6c3bd}{get\+Properties}} (int idx) override
\item 
void \mbox{\hyperlink{class_plastic_tool_a628101d38a0539726203a1ed402229bc}{update\+Translation}} () override
\item 
void \mbox{\hyperlink{class_plastic_tool_ac3f0077314c29c9d29959100fb3edb04}{on\+Set\+Viewer}} () override
\item 
void \mbox{\hyperlink{class_plastic_tool_aad3d93c2db31f337a8ad78c62829ab8f}{on\+Activate}} () override
\begin{DoxyCompactList}\small\item\em Callback invoked whenever the tool activates. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_plastic_tool_a33cd82af0673e60dc8b42c1255811944}{on\+Deactivate}} () override
\begin{DoxyCompactList}\small\item\em Callback for tool deactivation, includes tool switch. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_plastic_tool_aae403bfc45fc1110f5f54b311f0aa15c}{on\+Enter}} () override
\begin{DoxyCompactList}\small\item\em Callback for the mouse entering the viewer area. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_plastic_tool_a81f6017d7c8162ed23921c39f9ae9f8f}{on\+Leave}} () override
\begin{DoxyCompactList}\small\item\em Callback for the mouse leaving the viewer area. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_plastic_tool_abf7dedd75cc50784fb0ba653f89adc5c}{add\+Context\+Menu\+Items}} (QMenu $\ast$menu) override
\item 
void \mbox{\hyperlink{class_plastic_tool_aac8bc66ff560eeec22a02a2fa2610b12}{reset}} () override
\item 
bool \mbox{\hyperlink{class_plastic_tool_a8323f7aaf07e52dffd963595b81bd7d8}{on\+Property\+Changed}} (std\+::string property\+Name) override
\item 
void \mbox{\hyperlink{class_plastic_tool_afd0e94209d0168ab02069771a85dadea}{mouse\+Move}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me) override
\item 
void \mbox{\hyperlink{class_plastic_tool_a575a7f3eef802a90c4c448663925ef18}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me) override
\item 
void \mbox{\hyperlink{class_plastic_tool_a8c0b4ce8f2cec957544f8c78ad08a4fe}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me) override
\item 
void \mbox{\hyperlink{class_plastic_tool_a6aeffb649909210d8de987df8954a56b}{left\+Button\+Up}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me) override
\item 
void \mbox{\hyperlink{class_plastic_tool_a9d46bd4278978baf6cf3f822ee342094}{draw}} () override
\begin{DoxyCompactList}\small\item\em Draws the tool on the viewer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_plastic_tool_af05d6e151732ac3cd1459aac30df1089}{set\+Skeleton\+Selection}} (const \mbox{\hyperlink{class_plastic_vertex_selection}{Plastic\+Vertex\+Selection}} \&v\+Sel)
\item 
void \mbox{\hyperlink{class_plastic_tool_aebe8509d4cc3a8961ec1d64cd94a64a0}{toggle\+Skeleton\+Selection}} (const \mbox{\hyperlink{class_plastic_vertex_selection}{Plastic\+Vertex\+Selection}} \&v\+Sel)
\item 
void \mbox{\hyperlink{class_plastic_tool_aa73d9f869f629c9b2074cf02e5f804e7}{clear\+Skeleton\+Selections}} ()
\item 
const \mbox{\hyperlink{class_plastic_vertex_selection}{Plastic\+Vertex\+Selection}} \& \mbox{\hyperlink{class_plastic_tool_a75f0f123268e2c257b841d294a72bd04}{skeleton\+Vertex\+Selection}} () const
\item 
\mbox{\hyperlink{class_plastic_vertex_selection}{Plastic\+Vertex\+Selection}} \mbox{\hyperlink{class_plastic_tool_a087e24797ebba0b4362e744b3b81896c}{branch\+Selection}} (int v\+Idx) const
\item 
void \mbox{\hyperlink{class_plastic_tool_a1c3e32a9818ba7b2af19c33fb8f3204e}{move\+Vertex\+\_\+build}} (const std\+::vector$<$ \mbox{\hyperlink{class_t_point_t}{TPointD}} $>$ \&original\+Vxs\+Pos, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos\+Shift)
\item 
void \mbox{\hyperlink{class_plastic_tool_ac6b7d24f15e060e542b4c2b91f5c3e12}{add\+Vertex}} (const \mbox{\hyperlink{struct_plastic_skeleton_vertex}{Plastic\+Skeleton\+Vertex}} \&vx)
\item 
void \mbox{\hyperlink{class_plastic_tool_aef473bc4bbfbd769fa7a4322528e6b22}{insert\+Vertex}} (const \mbox{\hyperlink{struct_plastic_skeleton_vertex}{Plastic\+Skeleton\+Vertex}} \&vx, int e)
\item 
void \mbox{\hyperlink{class_plastic_tool_a54d0b7ebdfa7ac622c76c65716c49c14}{insert\+Vertex}} (const \mbox{\hyperlink{struct_plastic_skeleton_vertex}{Plastic\+Skeleton\+Vertex}} \&vx, int parent, const std\+::vector$<$ int $>$ \&children)
\item 
void \mbox{\hyperlink{class_plastic_tool_aef54680fcde64e3cca4aea1ddc19b4f1}{remove\+Vertex}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_af2a6e617b465cdacab431c8e63417362}{set\+Vertex\+Name}} (QString \&name)
\item 
int \mbox{\hyperlink{class_plastic_tool_aba1df223f4a63fb85a36980c2a73e58c}{add\+Skeleton}} (const \mbox{\hyperlink{class_t_smart_pointer_t}{Plastic\+SkeletonP}} \&skeleton)
\item 
void \mbox{\hyperlink{class_plastic_tool_af7525f6c064cc4616a6a37d9c4219fba}{add\+Skeleton}} (int skel\+Id, const \mbox{\hyperlink{class_t_smart_pointer_t}{Plastic\+SkeletonP}} \&skeleton)
\item 
void \mbox{\hyperlink{class_plastic_tool_a1b7ba485907f0c2879a5219ac5a81364}{remove\+Skeleton}} (int skel\+Id)
\item 
\mbox{\hyperlink{class_t_smart_pointer_t}{Plastic\+SkeletonP}} \mbox{\hyperlink{class_plastic_tool_a1513100450c878b4b7692463ccc1359c}{skeleton}} () const
\item 
void \mbox{\hyperlink{class_plastic_tool_aedec43dd8da73ec366aa807df2f0c190}{touch\+Skeleton}} ()
\item 
\mbox{\hyperlink{class_t_smart_pointer_t}{Plastic\+Skeleton\+DeformationP}} \mbox{\hyperlink{class_plastic_tool_acf7ad4e722291ede3d2845de382b1ec0}{deformation}} () const
\item 
void \mbox{\hyperlink{class_plastic_tool_ac0c5fb8452acba1fd9f03b865296463b}{touch\+Deformation}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_a6043dedfdc3c368cb40927e71327f949}{store\+Deformation}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_a8b1ed0256af4be3db212ddd49a360b95}{store\+Skeleton\+Id}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_aa43c3d522277771d9feb40630aeb6b69}{on\+Change}} ()
\item 
const \mbox{\hyperlink{class_multiple_selection}{Mesh\+Selection}} \& \mbox{\hyperlink{class_plastic_tool_a808570a0a3f78642e7eb8f8323ca43ff}{mesh\+Vertexes\+Selection}} () const
\item 
const \mbox{\hyperlink{class_multiple_selection}{Mesh\+Selection}} \& \mbox{\hyperlink{class_plastic_tool_a78e489c794ec8de699cdd1db882bcead}{mesh\+Edges\+Selection}} () const
\item 
void \mbox{\hyperlink{class_plastic_tool_aa3293f4c39cbdba8417dd07afe9b7854}{set\+Mesh\+Vertexes\+Selection}} (const \mbox{\hyperlink{class_multiple_selection}{Mesh\+Selection}} \&v\+Sel)
\item 
void \mbox{\hyperlink{class_plastic_tool_adb779ca24e311b46323e036b74d9b7ca}{toggle\+Mesh\+Vertexes\+Selection}} (const \mbox{\hyperlink{class_multiple_selection}{Mesh\+Selection}} \&v\+Sel)
\item 
void \mbox{\hyperlink{class_plastic_tool_ade4094d2c8562000a9df3756b7794941}{set\+Mesh\+Edges\+Selection}} (const \mbox{\hyperlink{class_multiple_selection}{Mesh\+Selection}} \&e\+Sel)
\item 
void \mbox{\hyperlink{class_plastic_tool_a5f6c8ddd027283d264cc540d3dd1d5f8}{toggle\+Mesh\+Edges\+Selection}} (const \mbox{\hyperlink{class_multiple_selection}{Mesh\+Selection}} \&e\+Sel)
\item 
void \mbox{\hyperlink{class_plastic_tool_a6540da56d1e6e7ff877103d23ca1e31b}{clear\+Mesh\+Selections}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_a1ec21ce252475eb8085e166bf4624c37}{store\+Mesh\+Image}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_a2306de6ee0d7b1bd849a7e72860eb9a1}{move\+Vertex\+\_\+mesh}} (const std\+::vector$<$ \mbox{\hyperlink{class_t_point_t}{TPointD}} $>$ \&original\+Vxs\+Pos, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos\+Shift)
\item 
int \mbox{\hyperlink{class_plastic_tool_a14cb6a541e1b47994e611a83976e168c}{add\+Skeleton\+\_\+undo}} (const \mbox{\hyperlink{class_t_smart_pointer_t}{Plastic\+SkeletonP}} \&skeleton)
\item 
void \mbox{\hyperlink{class_plastic_tool_ad8c406dc99dd319baf68b200df8d7282}{add\+Skeleton\+\_\+undo}} (int skel\+Id, const \mbox{\hyperlink{class_t_smart_pointer_t}{Plastic\+SkeletonP}} \&skeleton)
\item 
void \mbox{\hyperlink{class_plastic_tool_a09a8a6f014acfdcaec2841613a3c7e72}{remove\+Skeleton\+\_\+undo}} (int skel\+Id)
\item 
void \mbox{\hyperlink{class_plastic_tool_a76fc66f44e8be1d0ff4fa9b00a8de530}{remove\+Skeleton\+\_\+with\+Keyframes\+\_\+undo}} (int skel\+Id)
\item 
void \mbox{\hyperlink{class_plastic_tool_ad37f34c1b7e0f2eaad62b1296cb2c5f7}{edit\+Skel\+Id\+\_\+undo}} (int skel\+Id)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_plastic_tool_a31e46f5e54fd20e0dd04024322d8a546}{mouse\+Move\+\_\+mesh}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me)
\item 
void \mbox{\hyperlink{class_plastic_tool_a38a9e0e9c29035d591e44988cf9ff33a}{left\+Button\+Down\+\_\+mesh}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me)
\item 
void \mbox{\hyperlink{class_plastic_tool_a74b7beb023bd5fed3a26c047fcc6e13c}{left\+Button\+Drag\+\_\+mesh}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me)
\item 
void \mbox{\hyperlink{class_plastic_tool_a8f6baa4efb5e8acea3f17e05b375a9cc}{left\+Button\+Up\+\_\+mesh}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me)
\item 
void \mbox{\hyperlink{class_plastic_tool_adf607065faa66972be679e150fb785e6}{add\+Context\+Menu\+Actions\+\_\+mesh}} (QMenu $\ast$menu)
\item 
void \mbox{\hyperlink{class_plastic_tool_a1c55ebe16b1fff96f122968d3ff5d954}{mouse\+Move\+\_\+build}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me)
\item 
void \mbox{\hyperlink{class_plastic_tool_a3b89ebf552cac6a04ac465b2e8efd926}{left\+Button\+Down\+\_\+build}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me)
\item 
void \mbox{\hyperlink{class_plastic_tool_a1d506a415fc54f1f38edd598085801d8}{left\+Button\+Drag\+\_\+build}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me)
\item 
void \mbox{\hyperlink{class_plastic_tool_aab20b3c23cc043b269468b83a19b22db}{left\+Button\+Up\+\_\+build}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me)
\item 
void \mbox{\hyperlink{class_plastic_tool_aad7982327d78521133aeb107d52155e9}{add\+Context\+Menu\+Actions\+\_\+build}} (QMenu $\ast$menu)
\item 
void \mbox{\hyperlink{class_plastic_tool_a5657d4be413aedf4766dc4bcfd930b78}{mouse\+Move\+\_\+rigidity}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me)
\item 
void \mbox{\hyperlink{class_plastic_tool_aa7c4530b6dac695c675ec93b58e54f54}{left\+Button\+Down\+\_\+rigidity}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me)
\item 
void \mbox{\hyperlink{class_plastic_tool_a4a5232094b2b73c519c93a1c70a2512d}{left\+Button\+Drag\+\_\+rigidity}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me)
\item 
void \mbox{\hyperlink{class_plastic_tool_a4e0a96343d58ea3f3c6645039cd98070}{left\+Button\+Up\+\_\+rigidity}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me)
\item 
void \mbox{\hyperlink{class_plastic_tool_a7963e9a3c92a53f55200d1bd98d8428f}{add\+Context\+Menu\+Actions\+\_\+rigidity}} (QMenu $\ast$menu)
\item 
void \mbox{\hyperlink{class_plastic_tool_af484e08909486b43f1230868c73e2afb}{mouse\+Move\+\_\+animate}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me)
\item 
void \mbox{\hyperlink{class_plastic_tool_ae5cc55f55e3476647f0f9a670e03e649}{left\+Button\+Down\+\_\+animate}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me)
\item 
void \mbox{\hyperlink{class_plastic_tool_af082e0fbff4af95b10d1888ebc38feca}{left\+Button\+Drag\+\_\+animate}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me)
\item 
void \mbox{\hyperlink{class_plastic_tool_ad0985427698feade79fa33ce86e73cd1}{left\+Button\+Up\+\_\+animate}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&me)
\item 
void \mbox{\hyperlink{class_plastic_tool_a645b0f3a434c7d94848d88bede54a9aa}{add\+Context\+Menu\+Actions\+\_\+animate}} (QMenu $\ast$menu)
\item 
void \mbox{\hyperlink{class_plastic_tool_a116c13220389fd89e6851cfb86bb6168}{draw\+\_\+mesh}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_abd5b61873acac050313f0458c1daf337}{draw\+\_\+build}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_a4a96d8c929c3486cd360d330a412313e}{draw\+\_\+rigidity}} ()
\item 
void \mbox{\hyperlink{class_plastic_tool_ae5dd801f4b9d3e2fb84e665d2786101d}{draw\+\_\+animate}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_plastic_tool_adf17f5108be290fc81e566a6a4b21646}{Plastic\+Tool\+Options\+Box}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{class_plastic_tool_ac5aa32c29021becd07b3d2065f0f520e}\label{class_plastic_tool_ac5aa32c29021becd07b3d2065f0f520e}} 
\index{PlasticTool@{PlasticTool}!MeshSelection@{MeshSelection}}
\index{MeshSelection@{MeshSelection}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{MeshSelection}{MeshSelection}}
{\footnotesize\ttfamily typedef \mbox{\hyperlink{class_multiple_selection}{Multiple\+Selection}}$<$\mbox{\hyperlink{struct_plastic_tool_1_1_mesh_index}{Mesh\+Index}}$>$ \mbox{\hyperlink{class_multiple_selection}{Plastic\+Tool\+::\+Mesh\+Selection}}}



\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{class_plastic_tool_a02ae7dbe7d624ae2ac198cf1da392f92}\label{class_plastic_tool_a02ae7dbe7d624ae2ac198cf1da392f92}} 
\index{PlasticTool@{PlasticTool}!Modes@{Modes}}
\index{Modes@{Modes}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{Modes}{Modes}}
{\footnotesize\ttfamily enum Plastic\+Tool\+::\+Modes}


\begin{DoxyCode}{0}
\DoxyCodeLine{00174              \{}
\DoxyCodeLine{00175     MESH\_IDX = 0,}
\DoxyCodeLine{00176     RIGIDITY\_IDX,}
\DoxyCodeLine{00177     BUILD\_IDX,}
\DoxyCodeLine{00178     ANIMATE\_IDX,}
\DoxyCodeLine{00179     MODES\_COUNT}
\DoxyCodeLine{00180   \};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_plastic_tool_a68f687dd034dc37030d8cd831afebd31}\label{class_plastic_tool_a68f687dd034dc37030d8cd831afebd31}} 
\index{PlasticTool@{PlasticTool}!PlasticTool@{PlasticTool}}
\index{PlasticTool@{PlasticTool}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{PlasticTool()}{PlasticTool()}}
{\footnotesize\ttfamily Plastic\+Tool\+::\+Plastic\+Tool (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00618     : \mbox{\hyperlink{class_t_tool_a9c63ec35f606e755d0d036bf4fed62ab}{TTool}}(T\_Plastic)}
\DoxyCodeLine{00619     , m\_skelId(-\/(std::numeric\_limits<int>::max)())}
\DoxyCodeLine{00620     , m\_propGroup(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_property_group}{TPropertyGroup}}[MODES\_COUNT + 1])}
\DoxyCodeLine{00621     , m\_mode(\textcolor{stringliteral}{"{}mode"{}})}
\DoxyCodeLine{00622     , m\_vertexName(\textcolor{stringliteral}{"{}vertexName"{}}, L\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{00623     , m\_interpolate(\textcolor{stringliteral}{"{}interpolate"{}}, \textcolor{keyword}{false})}
\DoxyCodeLine{00624     , m\_snapToMesh(\textcolor{stringliteral}{"{}snapToMesh"{}}, \textcolor{keyword}{false})}
\DoxyCodeLine{00625     , m\_thickness(\textcolor{stringliteral}{"{}Thickness"{}}, 1, 100, 5)}
\DoxyCodeLine{00626     , m\_rigidValue(\textcolor{stringliteral}{"{}rigidValue"{}})}
\DoxyCodeLine{00627     , m\_globalKey(\textcolor{stringliteral}{"{}globalKeyframe"{}}, \textcolor{keyword}{true})}
\DoxyCodeLine{00628     , m\_keepDistance(\textcolor{stringliteral}{"{}keepDistance"{}}, \textcolor{keyword}{true})}
\DoxyCodeLine{00629     , m\_minAngle(\textcolor{stringliteral}{"{}minAngle"{}}, L\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{00630     , m\_maxAngle(\textcolor{stringliteral}{"{}maxAngle"{}}, L\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{00631     , m\_distanceRelay(\textcolor{stringliteral}{"{}distanceRelay"{}})}
\DoxyCodeLine{00632     , m\_angleRelay(\textcolor{stringliteral}{"{}angleRelay"{}})}
\DoxyCodeLine{00633     , m\_soRelay(\textcolor{stringliteral}{"{}soRelay"{}})}
\DoxyCodeLine{00634     , m\_skelIdRelay(\textcolor{stringliteral}{"{}skelIdRelay"{}})}
\DoxyCodeLine{00635     , m\_pressedPos(TConsts::napd)}
\DoxyCodeLine{00636     , m\_dragged(\textcolor{keyword}{false})}
\DoxyCodeLine{00637     , m\_svHigh(-\/1)}
\DoxyCodeLine{00638     , m\_seHigh(-\/1)}
\DoxyCodeLine{00639     , m\_mvHigh(-\/1)}
\DoxyCodeLine{00640     , m\_meHigh(-\/1)}
\DoxyCodeLine{00641     , m\_rigidityPainter(createRigidityPainter())}
\DoxyCodeLine{00642     , m\_showSkeletonOS(\textcolor{keyword}{true})}
\DoxyCodeLine{00643     , m\_recompileOnMouseRelease(\textcolor{keyword}{false}) \{}
\DoxyCodeLine{00644   \textcolor{comment}{// And now, a little trick about tool binding}}
\DoxyCodeLine{00645   bind(TTool::AllImages);   \textcolor{comment}{// Attach the tool to all types :)}}
\DoxyCodeLine{00646   bind(TTool::MeshLevels);  \textcolor{comment}{// But disable it for all but meshes :0}}
\DoxyCodeLine{00647 }
\DoxyCodeLine{00648   \textcolor{comment}{// This little trick is needed to associate the tool to common levels (the}}
\DoxyCodeLine{00649   \textcolor{comment}{// toolbar must appear), in}}
\DoxyCodeLine{00650   \textcolor{comment}{// order to make them meshable.}}
\DoxyCodeLine{00651 }
\DoxyCodeLine{00652   \textcolor{comment}{// Bind properties to the appropriate property group (needed by the automatic}}
\DoxyCodeLine{00653   \textcolor{comment}{// toolbar builder)}}
\DoxyCodeLine{00654   m\_propGroup[MODES\_COUNT].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_mode);}
\DoxyCodeLine{00655   m\_propGroup[MODES\_COUNT].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_vertexName);}
\DoxyCodeLine{00656 }
\DoxyCodeLine{00657   m\_propGroup[RIGIDITY\_IDX].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_thickness);}
\DoxyCodeLine{00658   m\_propGroup[RIGIDITY\_IDX].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_rigidValue);}
\DoxyCodeLine{00659 }
\DoxyCodeLine{00660   m\_propGroup[BUILD\_IDX].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_interpolate);}
\DoxyCodeLine{00661   m\_propGroup[BUILD\_IDX].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_snapToMesh);}
\DoxyCodeLine{00662 }
\DoxyCodeLine{00663   m\_propGroup[ANIMATE\_IDX].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_globalKey);}
\DoxyCodeLine{00664   m\_propGroup[ANIMATE\_IDX].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_keepDistance);}
\DoxyCodeLine{00665   m\_propGroup[ANIMATE\_IDX].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_minAngle);}
\DoxyCodeLine{00666   m\_propGroup[ANIMATE\_IDX].\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_maxAngle);}
\DoxyCodeLine{00667 }
\DoxyCodeLine{00668   m\_relayGroup.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_distanceRelay);}
\DoxyCodeLine{00669   m\_relayGroup.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_angleRelay);}
\DoxyCodeLine{00670   m\_relayGroup.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_soRelay);}
\DoxyCodeLine{00671 }
\DoxyCodeLine{00672   m\_mode.setId(\textcolor{stringliteral}{"{}SkeletonMode"{}});}
\DoxyCodeLine{00673   m\_vertexName.setId(\textcolor{stringliteral}{"{}VertexName"{}});}
\DoxyCodeLine{00674   m\_interpolate.setId(\textcolor{stringliteral}{"{}Interpolate"{}});}
\DoxyCodeLine{00675   m\_snapToMesh.setId(\textcolor{stringliteral}{"{}SnapToMesh"{}});}
\DoxyCodeLine{00676   m\_thickness.setId(\textcolor{stringliteral}{"{}Thickness"{}});}
\DoxyCodeLine{00677   m\_rigidValue.setId(\textcolor{stringliteral}{"{}RigidValue"{}});}
\DoxyCodeLine{00678   m\_globalKey.setId(\textcolor{stringliteral}{"{}GlobalKey"{}});}
\DoxyCodeLine{00679   m\_keepDistance.setId(\textcolor{stringliteral}{"{}KeepDistance"{}});}
\DoxyCodeLine{00680   m\_minAngle.setId(\textcolor{stringliteral}{"{}MinAngle"{}});}
\DoxyCodeLine{00681   m\_maxAngle.setId(\textcolor{stringliteral}{"{}MaxAngle"{}});}
\DoxyCodeLine{00682   m\_distanceRelay.setId(\textcolor{stringliteral}{"{}DistanceRelay"{}});}
\DoxyCodeLine{00683   m\_angleRelay.setId(\textcolor{stringliteral}{"{}AngleRelay"{}});}
\DoxyCodeLine{00684   m\_soRelay.setId(\textcolor{stringliteral}{"{}SoRelay"{}});}
\DoxyCodeLine{00685   m\_skelIdRelay.setId(\textcolor{stringliteral}{"{}SkelIdRelay"{}});}
\DoxyCodeLine{00686 }
\DoxyCodeLine{00687   \textcolor{comment}{// Attach to selections}}
\DoxyCodeLine{00688   m\_svSel.setView(\textcolor{keyword}{this});}
\DoxyCodeLine{00689   m\_mvSel.setView(\textcolor{keyword}{this}), m\_meSel.setView(\textcolor{keyword}{this});}
\DoxyCodeLine{00690 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_ad24fc3f6a5aaf65d079e4287530bc3c6}\label{class_plastic_tool_ad24fc3f6a5aaf65d079e4287530bc3c6}} 
\index{PlasticTool@{PlasticTool}!````~PlasticTool@{$\sim$PlasticTool}}
\index{````~PlasticTool@{$\sim$PlasticTool}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{$\sim$PlasticTool()}{~PlasticTool()}}
{\footnotesize\ttfamily Plastic\+Tool\+::$\sim$\+Plastic\+Tool (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00694                           \{}
\DoxyCodeLine{00695   \textcolor{keywordflow}{if} (m\_sd) m\_sd-\/>removeObserver(\textcolor{keyword}{this});}
\DoxyCodeLine{00696 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_plastic_tool_a645b0f3a434c7d94848d88bede54a9aa}\label{class_plastic_tool_a645b0f3a434c7d94848d88bede54a9aa}} 
\index{PlasticTool@{PlasticTool}!addContextMenuActions\_animate@{addContextMenuActions\_animate}}
\index{addContextMenuActions\_animate@{addContextMenuActions\_animate}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{addContextMenuActions\_animate()}{addContextMenuActions\_animate()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::add\+Context\+Menu\+Actions\+\_\+animate (\begin{DoxyParamCaption}\item[{QMenu $\ast$}]{menu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00188                                                            \{}
\DoxyCodeLine{00189   \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{true};}
\DoxyCodeLine{00190 }
\DoxyCodeLine{00191   \textcolor{keywordflow}{if} (!m\_svSel.isEmpty()) \{}
\DoxyCodeLine{00192     QAction *setKey = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Set Key"{}}));}
\DoxyCodeLine{00193     ret = ret \&\& connect(setKey, SIGNAL(triggered()), \&l\_plasticTool,}
\DoxyCodeLine{00194                          SLOT(setKey\_undo()));}
\DoxyCodeLine{00195 }
\DoxyCodeLine{00196     QAction *setRestKey = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Set Rest Key"{}}));}
\DoxyCodeLine{00197     ret = ret \&\& connect(setRestKey, SIGNAL(triggered()), \&l\_plasticTool,}
\DoxyCodeLine{00198                          SLOT(setRestKey\_undo()));}
\DoxyCodeLine{00199   \}}
\DoxyCodeLine{00200 }
\DoxyCodeLine{00201   QAction *setGlobalKey = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Set Global Key"{}}));}
\DoxyCodeLine{00202   ret = ret \&\& connect(setGlobalKey, SIGNAL(triggered()), \&l\_plasticTool,}
\DoxyCodeLine{00203                        SLOT(setGlobalKey\_undo()));}
\DoxyCodeLine{00204 }
\DoxyCodeLine{00205   QAction *setGlobalRestKey = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Set Global Rest Key"{}}));}
\DoxyCodeLine{00206   ret = ret \&\& connect(setGlobalRestKey, SIGNAL(triggered()), \&l\_plasticTool,}
\DoxyCodeLine{00207                        SLOT(setGlobalRestKey\_undo()));}
\DoxyCodeLine{00208 }
\DoxyCodeLine{00209   menu-\/>addSeparator();}
\DoxyCodeLine{00210 }
\DoxyCodeLine{00211   assert(ret);}
\DoxyCodeLine{00212 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_aad7982327d78521133aeb107d52155e9}\label{class_plastic_tool_aad7982327d78521133aeb107d52155e9}} 
\index{PlasticTool@{PlasticTool}!addContextMenuActions\_build@{addContextMenuActions\_build}}
\index{addContextMenuActions\_build@{addContextMenuActions\_build}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{addContextMenuActions\_build()}{addContextMenuActions\_build()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::add\+Context\+Menu\+Actions\+\_\+build (\begin{DoxyParamCaption}\item[{QMenu $\ast$}]{menu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00626                                                          \{}
\DoxyCodeLine{00627   \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{true};}
\DoxyCodeLine{00628 }
\DoxyCodeLine{00629   \textcolor{keywordflow}{if} (!m\_svSel.isEmpty()) \{}
\DoxyCodeLine{00630     QAction *deleteVertex = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Delete Vertex"{}}));}
\DoxyCodeLine{00631     ret = ret \&\& connect(deleteVertex, SIGNAL(triggered()), \&l\_plasticTool,}
\DoxyCodeLine{00632                          SLOT(deleteSelectedVertex\_undo()));}
\DoxyCodeLine{00633 }
\DoxyCodeLine{00634     menu-\/>addSeparator();}
\DoxyCodeLine{00635   \}}
\DoxyCodeLine{00636 }
\DoxyCodeLine{00637   assert(ret);}
\DoxyCodeLine{00638 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_adf607065faa66972be679e150fb785e6}\label{class_plastic_tool_adf607065faa66972be679e150fb785e6}} 
\index{PlasticTool@{PlasticTool}!addContextMenuActions\_mesh@{addContextMenuActions\_mesh}}
\index{addContextMenuActions\_mesh@{addContextMenuActions\_mesh}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{addContextMenuActions\_mesh()}{addContextMenuActions\_mesh()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::add\+Context\+Menu\+Actions\+\_\+mesh (\begin{DoxyParamCaption}\item[{QMenu $\ast$}]{menu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01109                                                         \{}
\DoxyCodeLine{01110   \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{true};}
\DoxyCodeLine{01111 }
\DoxyCodeLine{01112   \textcolor{keywordflow}{if} (!m\_meSel.isEmpty()) \{}
\DoxyCodeLine{01113     \textcolor{keywordflow}{if} (m\_meSel.hasSingleObject()) \{}
\DoxyCodeLine{01114       \textcolor{keyword}{const} MeshIndex \&mIdx    = m\_meSel.objects().front();}
\DoxyCodeLine{01115       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_texture_mesh}{TTextureMesh}} \&mesh = *m\_mi-\/>meshes()[mIdx.m\_meshIdx];}
\DoxyCodeLine{01116 }
\DoxyCodeLine{01117       \textcolor{keywordflow}{if} (::testSwapEdge(mesh, mIdx.m\_idx)) \{}
\DoxyCodeLine{01118         QAction *swapEdge = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Swap Edge"{}}));}
\DoxyCodeLine{01119         ret = ret \&\& connect(swapEdge, SIGNAL(triggered()), \&l\_plasticTool,}
\DoxyCodeLine{01120                              SLOT(swapEdge\_mesh\_undo()));}
\DoxyCodeLine{01121       \}}
\DoxyCodeLine{01122 }
\DoxyCodeLine{01123       \textcolor{keywordflow}{if} (::testCollapseEdge(mesh, mIdx.m\_idx)) \{}
\DoxyCodeLine{01124         QAction *collapseEdge = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Collapse Edge"{}}));}
\DoxyCodeLine{01125         ret = ret \&\& connect(collapseEdge, SIGNAL(triggered()), \&l\_plasticTool,}
\DoxyCodeLine{01126                              SLOT(collapseEdge\_mesh\_undo()));}
\DoxyCodeLine{01127       \}}
\DoxyCodeLine{01128 }
\DoxyCodeLine{01129       QAction *splitEdge = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Split Edge"{}}));}
\DoxyCodeLine{01130       ret = ret \&\& connect(splitEdge, SIGNAL(triggered()), \&l\_plasticTool,}
\DoxyCodeLine{01131                            SLOT(splitEdge\_mesh\_undo()));}
\DoxyCodeLine{01132     \}}
\DoxyCodeLine{01133 }
\DoxyCodeLine{01134     \textcolor{keywordflow}{if} (::testCutMesh(*m\_mi, m\_meSel)) \{}
\DoxyCodeLine{01135       QAction *cutEdges = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Cut Mesh"{}}));}
\DoxyCodeLine{01136       ret = ret \&\& connect(cutEdges, SIGNAL(triggered()), \&l\_plasticTool,}
\DoxyCodeLine{01137                            SLOT(cutEdges\_mesh\_undo()));}
\DoxyCodeLine{01138     \}}
\DoxyCodeLine{01139 }
\DoxyCodeLine{01140     menu-\/>addSeparator();}
\DoxyCodeLine{01141   \}}
\DoxyCodeLine{01142 }
\DoxyCodeLine{01143   assert(ret);}
\DoxyCodeLine{01144 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a7963e9a3c92a53f55200d1bd98d8428f}\label{class_plastic_tool_a7963e9a3c92a53f55200d1bd98d8428f}} 
\index{PlasticTool@{PlasticTool}!addContextMenuActions\_rigidity@{addContextMenuActions\_rigidity}}
\index{addContextMenuActions\_rigidity@{addContextMenuActions\_rigidity}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{addContextMenuActions\_rigidity()}{addContextMenuActions\_rigidity()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::add\+Context\+Menu\+Actions\+\_\+rigidity (\begin{DoxyParamCaption}\item[{QMenu $\ast$}]{menu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00247 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_abf7dedd75cc50784fb0ba653f89adc5c}\label{class_plastic_tool_abf7dedd75cc50784fb0ba653f89adc5c}} 
\index{PlasticTool@{PlasticTool}!addContextMenuItems@{addContextMenuItems}}
\index{addContextMenuItems@{addContextMenuItems}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{addContextMenuItems()}{addContextMenuItems()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::add\+Context\+Menu\+Items (\begin{DoxyParamCaption}\item[{QMenu $\ast$}]{menu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Add a context menu to the actual tool, as for example pressing right mouse button with the stroke selection tool. 

Reimplemented from \mbox{\hyperlink{class_t_tool_ac8a81b368568245d16f7c3d4a17684a1}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01452                                                  \{}
\DoxyCodeLine{01453   \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{true};}
\DoxyCodeLine{01454 }
\DoxyCodeLine{01455   \textcolor{comment}{// Add global actions}}
\DoxyCodeLine{01456   \textcolor{keywordflow}{if} (m\_sd \&\& m\_sd-\/>skeleton(::skeletonId())) \{}
\DoxyCodeLine{01457     QAction *copySkeleton = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Copy Skeleton"{}}));}
\DoxyCodeLine{01458     ret = ret \&\& connect(copySkeleton, SIGNAL(triggered()), \&l\_plasticTool,}
\DoxyCodeLine{01459                          SLOT(copySkeleton()));}
\DoxyCodeLine{01460   \}}
\DoxyCodeLine{01461 }
\DoxyCodeLine{01462   \textcolor{keywordflow}{if} (\textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{struct_plastic_skeleton_p_mime}{PlasticSkeletonPMime}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{01463           QApplication::clipboard()-\/>mimeData())) \{}
\DoxyCodeLine{01464     QAction *pasteSkeleton = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Paste Skeleton"{}}));}
\DoxyCodeLine{01465     ret = ret \&\& connect(pasteSkeleton, SIGNAL(triggered()), \&l\_plasticTool,}
\DoxyCodeLine{01466                          SLOT(pasteSkeleton\_undo()));}
\DoxyCodeLine{01467   \}}
\DoxyCodeLine{01468 }
\DoxyCodeLine{01469   menu-\/>addSeparator();  \textcolor{comment}{// Separate actions type}}
\DoxyCodeLine{01470 }
\DoxyCodeLine{01471   \textcolor{comment}{// Add editing actions}}
\DoxyCodeLine{01472   \textcolor{keywordflow}{switch} (m\_mode.getIndex()) \{}
\DoxyCodeLine{01473   \textcolor{keywordflow}{case} MESH\_IDX:}
\DoxyCodeLine{01474     addContextMenuActions\_mesh(menu);}
\DoxyCodeLine{01475     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01476   \textcolor{keywordflow}{case} BUILD\_IDX:}
\DoxyCodeLine{01477     addContextMenuActions\_build(menu);}
\DoxyCodeLine{01478     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01479   \textcolor{keywordflow}{case} RIGIDITY\_IDX:}
\DoxyCodeLine{01480     addContextMenuActions\_rigidity(menu);}
\DoxyCodeLine{01481     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01482   \textcolor{keywordflow}{case} ANIMATE\_IDX:}
\DoxyCodeLine{01483     addContextMenuActions\_animate(menu);}
\DoxyCodeLine{01484     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01485   \}}
\DoxyCodeLine{01486 }
\DoxyCodeLine{01487   \textcolor{comment}{// Add view actions}}
\DoxyCodeLine{01488   QAction *showMesh = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Show Mesh"{}}));}
\DoxyCodeLine{01489   showMesh-\/>setCheckable(\textcolor{keyword}{true});}
\DoxyCodeLine{01490   showMesh-\/>setChecked(m\_pvs.\mbox{\hyperlink{struct_plastic_visual_settings_a0eedc983dcb0d83144b509b10f602116}{m\_drawMeshesWireframe}});}
\DoxyCodeLine{01491 }
\DoxyCodeLine{01492   ret = ret \&\& connect(showMesh, SIGNAL(triggered(\textcolor{keywordtype}{bool})), \&l\_plasticTool,}
\DoxyCodeLine{01493                        SLOT(onShowMeshToggled(\textcolor{keywordtype}{bool})));}
\DoxyCodeLine{01494 }
\DoxyCodeLine{01495   QAction *showRigidity = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Show Rigidity"{}}));}
\DoxyCodeLine{01496   showRigidity-\/>setCheckable(\textcolor{keyword}{true});}
\DoxyCodeLine{01497   showRigidity-\/>setChecked(m\_pvs.\mbox{\hyperlink{struct_plastic_visual_settings_a65617de53b0d1cc91dc4d3b25f44766f}{m\_drawRigidity}});}
\DoxyCodeLine{01498 }
\DoxyCodeLine{01499   ret = ret \&\& connect(showRigidity, SIGNAL(triggered(\textcolor{keywordtype}{bool})), \&l\_plasticTool,}
\DoxyCodeLine{01500                        SLOT(onShowRigidityToggled(\textcolor{keywordtype}{bool})));}
\DoxyCodeLine{01501 }
\DoxyCodeLine{01502   QAction *showSO = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Show SO"{}}));}
\DoxyCodeLine{01503   showSO-\/>setCheckable(\textcolor{keyword}{true});}
\DoxyCodeLine{01504   showSO-\/>setChecked(m\_pvs.\mbox{\hyperlink{struct_plastic_visual_settings_a9075c3a1d3a7e278ab5a90ef9fac7ffc}{m\_drawSO}});}
\DoxyCodeLine{01505 }
\DoxyCodeLine{01506   ret = ret \&\& connect(showSO, SIGNAL(triggered(\textcolor{keywordtype}{bool})), \&l\_plasticTool,}
\DoxyCodeLine{01507                        SLOT(onShowSOToggled(\textcolor{keywordtype}{bool})));}
\DoxyCodeLine{01508 }
\DoxyCodeLine{01509   QAction *showSkeletonOS = menu-\/>addAction(tr(\textcolor{stringliteral}{"{}Show Skeleton Onion Skin"{}}));}
\DoxyCodeLine{01510   showSkeletonOS-\/>setCheckable(\textcolor{keyword}{true});}
\DoxyCodeLine{01511   showSkeletonOS-\/>setChecked(m\_showSkeletonOS);}
\DoxyCodeLine{01512 }
\DoxyCodeLine{01513   ret = ret \&\& connect(showSkeletonOS, SIGNAL(triggered(\textcolor{keywordtype}{bool})), \&l\_plasticTool,}
\DoxyCodeLine{01514                        SLOT(onShowSkelOSToggled(\textcolor{keywordtype}{bool})));}
\DoxyCodeLine{01515 }
\DoxyCodeLine{01516   assert(ret);}
\DoxyCodeLine{01517 }
\DoxyCodeLine{01518   menu-\/>addSeparator();  \textcolor{comment}{// Separate from common view options}}
\DoxyCodeLine{01519 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_aba1df223f4a63fb85a36980c2a73e58c}\label{class_plastic_tool_aba1df223f4a63fb85a36980c2a73e58c}} 
\index{PlasticTool@{PlasticTool}!addSkeleton@{addSkeleton}}
\index{addSkeleton@{addSkeleton}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{addSkeleton()}{addSkeleton()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily int Plastic\+Tool\+::add\+Skeleton (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{Plastic\+SkeletonP}} \&}]{skeleton }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00755                                                              \{}
\DoxyCodeLine{00756   assert(TTool::isEnabled());}
\DoxyCodeLine{00757 }
\DoxyCodeLine{00758   touchDeformation();}
\DoxyCodeLine{00759 }
\DoxyCodeLine{00760   \textcolor{keywordtype}{int} skelId;}
\DoxyCodeLine{00761   \{}
\DoxyCodeLine{00762     \textcolor{keywordflow}{if} (m\_sd-\/>empty())}
\DoxyCodeLine{00763       skelId = 1;}
\DoxyCodeLine{00764     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00765       \textcolor{comment}{// Get the first unused skeleton id in m\_sd}}
\DoxyCodeLine{00766       \mbox{\hyperlink{classtcg_1_1any__iterator}{SkD::skelId\_iterator}} st, sEnd;}
\DoxyCodeLine{00767       m\_sd-\/>\mbox{\hyperlink{class_plastic_skeleton_deformation_a3a03a8a742ba5427d9ae95af6e53926e}{skeletonIds}}(st, sEnd);}
\DoxyCodeLine{00768 }
\DoxyCodeLine{00769       \textcolor{keywordflow}{for} (skelId = 1; st != sEnd \&\& skelId == *st; ++skelId, ++st)}
\DoxyCodeLine{00770         ;}
\DoxyCodeLine{00771     \}}
\DoxyCodeLine{00772   \}}
\DoxyCodeLine{00773 }
\DoxyCodeLine{00774   addSkeleton(skelId, skeleton);}
\DoxyCodeLine{00775   \textcolor{keywordflow}{return} skelId;}
\DoxyCodeLine{00776 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_af7525f6c064cc4616a6a37d9c4219fba}\label{class_plastic_tool_af7525f6c064cc4616a6a37d9c4219fba}} 
\index{PlasticTool@{PlasticTool}!addSkeleton@{addSkeleton}}
\index{addSkeleton@{addSkeleton}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{addSkeleton()}{addSkeleton()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Plastic\+Tool\+::add\+Skeleton (\begin{DoxyParamCaption}\item[{int}]{skel\+Id,  }\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{Plastic\+SkeletonP}} \&}]{skeleton }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00780                                                                           \{}
\DoxyCodeLine{00781   assert(TTool::isEnabled());}
\DoxyCodeLine{00782 }
\DoxyCodeLine{00783   touchDeformation();}
\DoxyCodeLine{00784   m\_sd-\/>\mbox{\hyperlink{class_plastic_skeleton_deformation_ae8aa59959248514bf788cfa716d80c01}{attach}}(skelId, skeleton.getPointer());}
\DoxyCodeLine{00785 }
\DoxyCodeLine{00786   emit skelIdsListChanged();}
\DoxyCodeLine{00787 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a14cb6a541e1b47994e611a83976e168c}\label{class_plastic_tool_a14cb6a541e1b47994e611a83976e168c}} 
\index{PlasticTool@{PlasticTool}!addSkeleton\_undo@{addSkeleton\_undo}}
\index{addSkeleton\_undo@{addSkeleton\_undo}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{addSkeleton\_undo()}{addSkeleton\_undo()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily int Plastic\+Tool\+::add\+Skeleton\+\_\+undo (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{Plastic\+SkeletonP}} \&}]{skeleton }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00843                                                                   \{}
\DoxyCodeLine{00844   \textcolor{keywordtype}{int} skelId;}
\DoxyCodeLine{00845 }
\DoxyCodeLine{00846   \mbox{\hyperlink{class_t_undo_manager}{TUndoManager}} *manager = TUndoManager::manager();}
\DoxyCodeLine{00847   manager-\/>beginBlock();}
\DoxyCodeLine{00848   \{}
\DoxyCodeLine{00849     skelId = l\_plasticTool.addSkeleton(skeleton);}
\DoxyCodeLine{00850     assert(l\_plasticTool.deformation());}
\DoxyCodeLine{00851 }
\DoxyCodeLine{00852     \mbox{\hyperlink{class_t_undo}{TUndo}} *addUndo =}
\DoxyCodeLine{00853         \textcolor{keyword}{new} AddSkeletonUndo(skelId, \textcolor{keyword}{new} \mbox{\hyperlink{class_plastic_skeleton}{PlasticSkeleton}}(*skeleton));}
\DoxyCodeLine{00854     manager-\/>add(addUndo);}
\DoxyCodeLine{00855 }
\DoxyCodeLine{00856     \mbox{\hyperlink{class_t_undo}{TUndo}} *setIdUndo = \textcolor{keyword}{new} SetSkeletonIdUndo(skelId);}
\DoxyCodeLine{00857     manager-\/>add(setIdUndo);}
\DoxyCodeLine{00858 }
\DoxyCodeLine{00859     setIdUndo-\/>redo();}
\DoxyCodeLine{00860   \}}
\DoxyCodeLine{00861   manager-\/>endBlock();}
\DoxyCodeLine{00862 }
\DoxyCodeLine{00863   ::invalidateXsheet();}
\DoxyCodeLine{00864   \textcolor{keywordflow}{return} skelId;}
\DoxyCodeLine{00865 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_ad8c406dc99dd319baf68b200df8d7282}\label{class_plastic_tool_ad8c406dc99dd319baf68b200df8d7282}} 
\index{PlasticTool@{PlasticTool}!addSkeleton\_undo@{addSkeleton\_undo}}
\index{addSkeleton\_undo@{addSkeleton\_undo}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{addSkeleton\_undo()}{addSkeleton\_undo()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Plastic\+Tool\+::add\+Skeleton\+\_\+undo (\begin{DoxyParamCaption}\item[{int}]{skel\+Id,  }\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{Plastic\+SkeletonP}} \&}]{skeleton }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00870                                                                      \{}
\DoxyCodeLine{00871   \mbox{\hyperlink{class_t_undo_manager}{TUndoManager}} *manager = TUndoManager::manager();}
\DoxyCodeLine{00872   manager-\/>beginBlock();}
\DoxyCodeLine{00873   \{}
\DoxyCodeLine{00874     l\_plasticTool.addSkeleton(skelId, skeleton);}
\DoxyCodeLine{00875     assert(l\_plasticTool.deformation());}
\DoxyCodeLine{00876 }
\DoxyCodeLine{00877     \mbox{\hyperlink{class_t_undo}{TUndo}} *addUndo =}
\DoxyCodeLine{00878         \textcolor{keyword}{new} AddSkeletonUndo(skelId, \textcolor{keyword}{new} \mbox{\hyperlink{class_plastic_skeleton}{PlasticSkeleton}}(*skeleton));}
\DoxyCodeLine{00879     manager-\/>add(addUndo);}
\DoxyCodeLine{00880 }
\DoxyCodeLine{00881     \mbox{\hyperlink{class_t_undo}{TUndo}} *setIdUndo = \textcolor{keyword}{new} SetSkeletonIdUndo(skelId);}
\DoxyCodeLine{00882     manager-\/>add(setIdUndo);}
\DoxyCodeLine{00883 }
\DoxyCodeLine{00884     setIdUndo-\/>redo();}
\DoxyCodeLine{00885   \}}
\DoxyCodeLine{00886   manager-\/>endBlock();}
\DoxyCodeLine{00887 }
\DoxyCodeLine{00888   ::invalidateXsheet();}
\DoxyCodeLine{00889 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_ac6b7d24f15e060e542b4c2b91f5c3e12}\label{class_plastic_tool_ac6b7d24f15e060e542b4c2b91f5c3e12}} 
\index{PlasticTool@{PlasticTool}!addVertex@{addVertex}}
\index{addVertex@{addVertex}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{addVertex()}{addVertex()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::add\+Vertex (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_plastic_skeleton_vertex}{Plastic\+Skeleton\+Vertex}} \&}]{vx }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00664                                                            \{}
\DoxyCodeLine{00665   touchSkeleton();}
\DoxyCodeLine{00666   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonP}} \&skeleton = this-\/>skeleton();}
\DoxyCodeLine{00667 }
\DoxyCodeLine{00668   l\_suspendParamsObservation =}
\DoxyCodeLine{00669       \textcolor{keyword}{true};  \textcolor{comment}{// Some vertex parameters change during insert}}
\DoxyCodeLine{00670 }
\DoxyCodeLine{00671   assert(}
\DoxyCodeLine{00672       m\_svSel.isEmpty() ||}
\DoxyCodeLine{00673       m\_svSel}
\DoxyCodeLine{00674           .hasSingleObject());  \textcolor{comment}{// Could there be no parent (inserting the root)}}
\DoxyCodeLine{00675   setSkeletonSelection(skeleton-\/>addVertex(vx, m\_svSel));}
\DoxyCodeLine{00676 }
\DoxyCodeLine{00677   l\_suspendParamsObservation = \textcolor{keyword}{false};}
\DoxyCodeLine{00678   \mbox{\hyperlink{class_plastic_tool_aa43c3d522277771d9feb40630aeb6b69}{onChange}}();  \textcolor{comment}{// Update once after add}}
\DoxyCodeLine{00679 }
\DoxyCodeLine{00680   \textcolor{comment}{// NOTE: Root addition does NOT currently add channels, so the above}}
\DoxyCodeLine{00681   \textcolor{comment}{// onChange() is}}
\DoxyCodeLine{00682   \textcolor{comment}{// quite necessary to cover that case too!}}
\DoxyCodeLine{00683 }
\DoxyCodeLine{00684   \textcolor{comment}{// Xsheet change notification is necessary to inform the Function Editor that}}
\DoxyCodeLine{00685   \textcolor{comment}{// new}}
\DoxyCodeLine{00686   \textcolor{comment}{// channels (the vertex deformation ones) have been introduced}}
\DoxyCodeLine{00687   TTool::getApplication()-\/>getCurrentXsheet()-\/>notifyXsheetChanged();}
\DoxyCodeLine{00688   PlasticDeformerStorage::instance()-\/>\mbox{\hyperlink{class_plastic_deformer_storage_a39a845a381c4dde3b1c97295a4df36b9}{invalidateSkeleton}}(}
\DoxyCodeLine{00689       m\_sd.getPointer(), ::skeletonId(), PlasticDeformerStorage::ALL);}
\DoxyCodeLine{00690 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a087e24797ebba0b4362e744b3b81896c}\label{class_plastic_tool_a087e24797ebba0b4362e744b3b81896c}} 
\index{PlasticTool@{PlasticTool}!branchSelection@{branchSelection}}
\index{branchSelection@{branchSelection}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{branchSelection()}{branchSelection()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_plastic_vertex_selection}{Plastic\+Vertex\+Selection}} Plastic\+Tool\+::branch\+Selection (\begin{DoxyParamCaption}\item[{int}]{v\+Idx }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{01145                                                                   \{}
\DoxyCodeLine{01146   \textcolor{keyword}{struct }locals \{}
\DoxyCodeLine{01147     \textcolor{keyword}{static} \textcolor{keywordtype}{void} addBranch(\textcolor{keyword}{const} \mbox{\hyperlink{class_plastic_skeleton}{PlasticSkeleton}} \&skeleton, \textcolor{keywordtype}{int} v,}
\DoxyCodeLine{01148                           std::vector<int> \&branch) \{}
\DoxyCodeLine{01149       branch.push\_back(v);}
\DoxyCodeLine{01150 }
\DoxyCodeLine{01151       \textcolor{keyword}{const} \mbox{\hyperlink{struct_plastic_skeleton_vertex}{PlasticSkeletonVertex}} \&vx = skeleton.vertex(v);}
\DoxyCodeLine{01152 }
\DoxyCodeLine{01153       \mbox{\hyperlink{structtcg_1_1list_1_1const__iterator}{PlasticSkeletonVertex::edges\_const\_iterator}} et, eEnd = vx.edgesEnd();}
\DoxyCodeLine{01154       \textcolor{keywordflow}{for} (et = vx.edgesBegin(); et != eEnd; ++et) \{}
\DoxyCodeLine{01155         \textcolor{keywordtype}{int} child = skeleton.edge(*et).vertex(1);}
\DoxyCodeLine{01156 }
\DoxyCodeLine{01157         \textcolor{keywordflow}{if} (v != child)  \textcolor{comment}{// The edge to parent is in the list}}
\DoxyCodeLine{01158           addBranch(skeleton, child,}
\DoxyCodeLine{01159                     branch);  \textcolor{comment}{// I wonder if it's ensured to be always at begin?}}
\DoxyCodeLine{01160       \}}
\DoxyCodeLine{01161     \}}
\DoxyCodeLine{01162   \};}
\DoxyCodeLine{01163 }
\DoxyCodeLine{01164   assert(skeleton());}
\DoxyCodeLine{01165 }
\DoxyCodeLine{01166   std::vector<int> selectedIdxs;}
\DoxyCodeLine{01167   locals::addBranch(*skeleton(), vIdx, selectedIdxs);}
\DoxyCodeLine{01168 }
\DoxyCodeLine{01169   \textcolor{keywordflow}{return} selectedIdxs;}
\DoxyCodeLine{01170 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a6540da56d1e6e7ff877103d23ca1e31b}\label{class_plastic_tool_a6540da56d1e6e7ff877103d23ca1e31b}} 
\index{PlasticTool@{PlasticTool}!clearMeshSelections@{clearMeshSelections}}
\index{clearMeshSelections@{clearMeshSelections}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{clearMeshSelections()}{clearMeshSelections()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::clear\+Mesh\+Selections (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00972                                       \{}
\DoxyCodeLine{00973   m\_mvHigh = m\_meHigh = MeshIndex();}
\DoxyCodeLine{00974 }
\DoxyCodeLine{00975   m\_mvSel.selectNone();}
\DoxyCodeLine{00976   m\_mvSel.makeNotCurrent();}
\DoxyCodeLine{00977 }
\DoxyCodeLine{00978   m\_meSel.selectNone();}
\DoxyCodeLine{00979   m\_meSel.makeNotCurrent();}
\DoxyCodeLine{00980 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_aa73d9f869f629c9b2074cf02e5f804e7}\label{class_plastic_tool_aa73d9f869f629c9b2074cf02e5f804e7}} 
\index{PlasticTool@{PlasticTool}!clearSkeletonSelections@{clearSkeletonSelections}}
\index{clearSkeletonSelections@{clearSkeletonSelections}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{clearSkeletonSelections()}{clearSkeletonSelections()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::clear\+Skeleton\+Selections (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01136                                           \{}
\DoxyCodeLine{01137   m\_svHigh = m\_seHigh = -\/1;}
\DoxyCodeLine{01138 }
\DoxyCodeLine{01139   m\_svSel.selectNone();}
\DoxyCodeLine{01140   m\_svSel.makeNotCurrent();}
\DoxyCodeLine{01141 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a74a548f48e5eb8d9e5a326c262b87803}\label{class_plastic_tool_a74a548f48e5eb8d9e5a326c262b87803}} 
\index{PlasticTool@{PlasticTool}!collapseEdge\_mesh\_undo@{collapseEdge\_mesh\_undo}}
\index{collapseEdge\_mesh\_undo@{collapseEdge\_mesh\_undo}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{collapseEdge\_mesh\_undo}{collapseEdge\_mesh\_undo}}
{\footnotesize\ttfamily void Plastic\+Tool\+::collapse\+Edge\+\_\+mesh\+\_\+undo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01193                                          \{}
\DoxyCodeLine{01194   \textcolor{keywordflow}{if} (!(m\_mi \&\& m\_meSel.hasSingleObject())) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01195 }
\DoxyCodeLine{01196   \textcolor{comment}{// Test collapsibility of current edge}}
\DoxyCodeLine{01197   \{}
\DoxyCodeLine{01198     \textcolor{keyword}{const} MeshIndex \&eIdx    = m\_meSel.objects().front();}
\DoxyCodeLine{01199     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_texture_mesh}{TTextureMesh}} \&mesh = *m\_mi-\/>meshes()[eIdx.m\_meshIdx];}
\DoxyCodeLine{01200 }
\DoxyCodeLine{01201     \textcolor{keywordflow}{if} (!::testCollapseEdge(mesh, eIdx.m\_idx)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01202   \}}
\DoxyCodeLine{01203 }
\DoxyCodeLine{01204   \textcolor{comment}{// Perform operation}}
\DoxyCodeLine{01205   std::unique\_ptr<TUndo> undo(\textcolor{keyword}{new} CollapseEdgeUndo(m\_meSel.objects().front()));}
\DoxyCodeLine{01206   undo-\/>redo();}
\DoxyCodeLine{01207 }
\DoxyCodeLine{01208   TUndoManager::manager()-\/>add(undo.release());}
\DoxyCodeLine{01209 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_ae89698862a6b52ba373f9fc6cdb8eedf}\label{class_plastic_tool_ae89698862a6b52ba373f9fc6cdb8eedf}} 
\index{PlasticTool@{PlasticTool}!copyDeformation@{copyDeformation}}
\index{copyDeformation@{copyDeformation}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{copyDeformation}{copyDeformation}}
{\footnotesize\ttfamily void Plastic\+Tool\+::copy\+Deformation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01216                                   \{}
\DoxyCodeLine{01217   \textcolor{keywordflow}{if} (!m\_sd) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01218 }
\DoxyCodeLine{01219   \textcolor{comment}{// Copy a reference to currently addressed skeleton in the app clipboard}}
\DoxyCodeLine{01220   QMimeData *data = \textcolor{keyword}{new} \mbox{\hyperlink{struct_sk_d_p_mime}{SkDPMime}}(m\_sd);}
\DoxyCodeLine{01221   QApplication::clipboard()-\/>setMimeData(data, QClipboard::Clipboard);}
\DoxyCodeLine{01222 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a3dc0d677ee4c59db73f177fa80488028}\label{class_plastic_tool_a3dc0d677ee4c59db73f177fa80488028}} 
\index{PlasticTool@{PlasticTool}!copySkeleton@{copySkeleton}}
\index{copySkeleton@{copySkeleton}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{copySkeleton}{copySkeleton}}
{\footnotesize\ttfamily void Plastic\+Tool\+::copy\+Skeleton (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01174                                \{}
\DoxyCodeLine{01175   \textcolor{keywordflow}{if} (!m\_sd) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01176 }
\DoxyCodeLine{01177   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonP}} \&skel = m\_sd-\/>skeleton(::skeletonId());}
\DoxyCodeLine{01178   \textcolor{keywordflow}{if} (!skel) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01179 }
\DoxyCodeLine{01180   \textcolor{comment}{// Copy a CLONE of currently addressed skeleton in the app clipboard}}
\DoxyCodeLine{01181   QMimeData *data = \textcolor{keyword}{new} \mbox{\hyperlink{struct_plastic_skeleton_p_mime}{PlasticSkeletonPMime}}(\textcolor{keyword}{new} \mbox{\hyperlink{class_plastic_skeleton}{PlasticSkeleton}}(*skel));}
\DoxyCodeLine{01182   QApplication::clipboard()-\/>setMimeData(data, QClipboard::Clipboard);}
\DoxyCodeLine{01183 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a21ed12bc2cdfd6f1a252cef5addfdc81}\label{class_plastic_tool_a21ed12bc2cdfd6f1a252cef5addfdc81}} 
\index{PlasticTool@{PlasticTool}!createOptionsBox@{createOptionsBox}}
\index{createOptionsBox@{createOptionsBox}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{createOptionsBox()}{createOptionsBox()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_tool_options_box}{Tool\+Options\+Box}} $\ast$ Plastic\+Tool\+::create\+Options\+Box (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

The default returns a generic box containing the options for property group 0). \begin{DoxySeeAlso}{See also}
See \mbox{\hyperlink{}{tooloptions.\+h}} for more details. Factory function returning a newly created GUI options box to be displayed for the tool 
\end{DoxySeeAlso}


Reimplemented from \mbox{\hyperlink{class_t_tool_a9e09495b50142df6b7bb9682837263c4}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00744                                               \{}
\DoxyCodeLine{00745   \textcolor{comment}{// Create the options box}}
\DoxyCodeLine{00746   \mbox{\hyperlink{class_t_palette_handle}{TPaletteHandle}} *currPalette =}
\DoxyCodeLine{00747       TTool::getApplication()-\/>getPaletteController()-\/>getCurrentLevelPalette();}
\DoxyCodeLine{00748   \mbox{\hyperlink{class_tool_handle}{ToolHandle}} *currTool = m\_application-\/>getCurrentTool();}
\DoxyCodeLine{00749   \mbox{\hyperlink{class_plastic_tool_options_box}{PlasticToolOptionsBox}} *optionsBox =}
\DoxyCodeLine{00750       \textcolor{keyword}{new} \mbox{\hyperlink{class_plastic_tool_options_box}{PlasticToolOptionsBox}}(0, \textcolor{keyword}{this}, currPalette, currTool);}
\DoxyCodeLine{00751 }
\DoxyCodeLine{00752   \textcolor{comment}{// Connect it to receive m\_mode notifications}}
\DoxyCodeLine{00753   m\_mode.addListener(optionsBox);}
\DoxyCodeLine{00754 }
\DoxyCodeLine{00755   \textcolor{keywordflow}{return} optionsBox;}
\DoxyCodeLine{00756 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_aa5dce16dad8209d746b2800c46bd8d1e}\label{class_plastic_tool_aa5dce16dad8209d746b2800c46bd8d1e}} 
\index{PlasticTool@{PlasticTool}!cutEdges\_mesh\_undo@{cutEdges\_mesh\_undo}}
\index{cutEdges\_mesh\_undo@{cutEdges\_mesh\_undo}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{cutEdges\_mesh\_undo}{cutEdges\_mesh\_undo}}
{\footnotesize\ttfamily void Plastic\+Tool\+::cut\+Edges\+\_\+mesh\+\_\+undo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01224                                      \{}
\DoxyCodeLine{01225   \textcolor{keywordflow}{if} (!m\_mi) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01226 }
\DoxyCodeLine{01227   std::unique\_ptr<CutEdgesUndo> undo(\textcolor{keyword}{new} CutEdgesUndo(m\_meSel.objects()));}
\DoxyCodeLine{01228 }
\DoxyCodeLine{01229   \textcolor{keywordflow}{if} (undo-\/>do\_()) TUndoManager::manager()-\/>add(undo.release());}
\DoxyCodeLine{01230 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_acf7ad4e722291ede3d2845de382b1ec0}\label{class_plastic_tool_acf7ad4e722291ede3d2845de382b1ec0}} 
\index{PlasticTool@{PlasticTool}!deformation@{deformation}}
\index{deformation@{deformation}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{deformation()}{deformation()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_smart_pointer_t}{Plastic\+Skeleton\+DeformationP}} Plastic\+Tool\+::deformation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00246 \{ \textcolor{keywordflow}{return} m\_sd; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_aa8f3bd3d07484ed0552914984f726742}\label{class_plastic_tool_aa8f3bd3d07484ed0552914984f726742}} 
\index{PlasticTool@{PlasticTool}!deleteSelectedVertex\_undo@{deleteSelectedVertex\_undo}}
\index{deleteSelectedVertex\_undo@{deleteSelectedVertex\_undo}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{deleteSelectedVertex\_undo}{deleteSelectedVertex\_undo}}
{\footnotesize\ttfamily void Plastic\+Tool\+::delete\+Selected\+Vertex\+\_\+undo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00811                                             \{}
\DoxyCodeLine{00812   \textcolor{keywordflow}{if} (m\_svSel.isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00813 }
\DoxyCodeLine{00814   \mbox{\hyperlink{class_t_undo_manager}{TUndoManager}} *manager = TUndoManager::manager();}
\DoxyCodeLine{00815 }
\DoxyCodeLine{00816   \textcolor{keywordflow}{if} (m\_svSel.contains(0)) \{}
\DoxyCodeLine{00817     \mbox{\hyperlink{class_t_undo}{TUndo}} *op = \textcolor{keyword}{new} RemoveSkeletonUndo(::skeletonId());}
\DoxyCodeLine{00818     manager-\/>add(op);}
\DoxyCodeLine{00819 }
\DoxyCodeLine{00820     op-\/>redo();}
\DoxyCodeLine{00821   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00822     \textcolor{keyword}{typedef} PlasticVertexSelection::objects\_container objects\_container;}
\DoxyCodeLine{00823 }
\DoxyCodeLine{00824     objects\_container vertexIdxs =}
\DoxyCodeLine{00825         m\_svSel.objects();  \textcolor{comment}{// Each undo will reset the vertex selection,}}
\DoxyCodeLine{00826                             \textcolor{comment}{// so we need a copy}}
\DoxyCodeLine{00827     manager-\/>beginBlock();}
\DoxyCodeLine{00828     \{}
\DoxyCodeLine{00829       objects\_container::const\_iterator vit, viEnd = vertexIdxs.end();}
\DoxyCodeLine{00830       \textcolor{keywordflow}{for} (vit = vertexIdxs.begin(); vit != viEnd; ++vit) \{}
\DoxyCodeLine{00831         \mbox{\hyperlink{class_t_undo}{TUndo}} *op = \textcolor{keyword}{new} RemoveVertexUndo(*vit);}
\DoxyCodeLine{00832         manager-\/>add(op);}
\DoxyCodeLine{00833 }
\DoxyCodeLine{00834         op-\/>redo();}
\DoxyCodeLine{00835       \}}
\DoxyCodeLine{00836     \}}
\DoxyCodeLine{00837     manager-\/>endBlock();}
\DoxyCodeLine{00838   \}}
\DoxyCodeLine{00839 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a9d46bd4278978baf6cf3f822ee342094}\label{class_plastic_tool_a9d46bd4278978baf6cf3f822ee342094}} 
\index{PlasticTool@{PlasticTool}!draw@{draw}}
\index{draw@{draw}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::draw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Draws the tool on the viewer. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a058bf656d73bf3cd63b9826cbaaf48e0}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02112                        \{}
\DoxyCodeLine{02113   glPushAttrib(GL\_LINE\_BIT | GL\_COLOR\_BUFFER\_BIT | GL\_ENABLE\_BIT);}
\DoxyCodeLine{02114 }
\DoxyCodeLine{02115   glEnable(GL\_BLEND);}
\DoxyCodeLine{02116   glBlendFunc(GL\_SRC\_ALPHA, GL\_ONE\_MINUS\_SRC\_ALPHA);}
\DoxyCodeLine{02117   glEnable(GL\_LINE\_SMOOTH);}
\DoxyCodeLine{02118 }
\DoxyCodeLine{02119   \textcolor{keywordflow}{switch} (m\_mode.getIndex()) \{}
\DoxyCodeLine{02120   \textcolor{keywordflow}{case} MESH\_IDX:}
\DoxyCodeLine{02121     draw\_mesh();}
\DoxyCodeLine{02122     \textcolor{keywordflow}{break};}
\DoxyCodeLine{02123   \textcolor{keywordflow}{case} BUILD\_IDX:}
\DoxyCodeLine{02124     draw\_build();}
\DoxyCodeLine{02125     \textcolor{keywordflow}{break};}
\DoxyCodeLine{02126   \textcolor{keywordflow}{case} RIGIDITY\_IDX:}
\DoxyCodeLine{02127     draw\_rigidity();}
\DoxyCodeLine{02128     \textcolor{keywordflow}{break};}
\DoxyCodeLine{02129   \textcolor{keywordflow}{case} ANIMATE\_IDX:}
\DoxyCodeLine{02130     draw\_animate();}
\DoxyCodeLine{02131     \textcolor{keywordflow}{break};}
\DoxyCodeLine{02132   \};}
\DoxyCodeLine{02133 }
\DoxyCodeLine{02134   glPopAttrib();}
\DoxyCodeLine{02135 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_ae5dd801f4b9d3e2fb84e665d2786101d}\label{class_plastic_tool_ae5dd801f4b9d3e2fb84e665d2786101d}} 
\index{PlasticTool@{PlasticTool}!draw\_animate@{draw\_animate}}
\index{draw\_animate@{draw\_animate}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{draw\_animate()}{draw\_animate()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::draw\+\_\+animate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00233                                \{}
\DoxyCodeLine{00234   \textcolor{keywordtype}{double} pixelSize = getPixelSize();}
\DoxyCodeLine{00235 }
\DoxyCodeLine{00236   \mbox{\hyperlink{class_plastic_skeleton}{PlasticSkeleton}} \&deformedSkeleton = this-\/>deformedSkeleton();}
\DoxyCodeLine{00237 }
\DoxyCodeLine{00238   \textcolor{comment}{// Draw deformed skeleton}}
\DoxyCodeLine{00239   \textcolor{keywordflow}{if} (m\_sd) \{}
\DoxyCodeLine{00240     drawOnionSkinSkeletons\_animate(pixelSize);}
\DoxyCodeLine{00241     drawSkeleton(deformedSkeleton, pixelSize);}
\DoxyCodeLine{00242     drawSelections(m\_sd, deformedSkeleton, pixelSize);}
\DoxyCodeLine{00243     drawAngleLimits(m\_sd, m\_skelId, m\_svSel, pixelSize);}
\DoxyCodeLine{00244   \}}
\DoxyCodeLine{00245 }
\DoxyCodeLine{00246   drawHighlights(m\_sd, \&deformedSkeleton, pixelSize);}
\DoxyCodeLine{00247 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_abd5b61873acac050313f0458c1daf337}\label{class_plastic_tool_abd5b61873acac050313f0458c1daf337}} 
\index{PlasticTool@{PlasticTool}!draw\_build@{draw\_build}}
\index{draw\_build@{draw\_build}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{draw\_build()}{draw\_build()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::draw\+\_\+build (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00920                              \{}
\DoxyCodeLine{00921   \textcolor{keywordtype}{double} pixelSize = getPixelSize();}
\DoxyCodeLine{00922 }
\DoxyCodeLine{00923   \textcolor{comment}{// Draw original skeleton}}
\DoxyCodeLine{00924   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonP}} \&skeleton = this-\/>skeleton();}
\DoxyCodeLine{00925   \textcolor{keywordflow}{if} (skeleton) \{}
\DoxyCodeLine{00926     drawOnionSkinSkeletons\_build(pixelSize);}
\DoxyCodeLine{00927     drawSkeleton(*skeleton, pixelSize);}
\DoxyCodeLine{00928     drawSelections(m\_sd, *skeleton, pixelSize);}
\DoxyCodeLine{00929   \}}
\DoxyCodeLine{00930 }
\DoxyCodeLine{00931   drawHighlights(m\_sd, skeleton.getPointer(), pixelSize);}
\DoxyCodeLine{00932 }
\DoxyCodeLine{00933   \textcolor{keywordflow}{if} (!skeleton || skeleton-\/>vertices().empty() ||}
\DoxyCodeLine{00934       (m\_svSel.hasSingleObject() \&\& m\_svHigh < 0 \&\& m\_seHigh < 0)) \{}
\DoxyCodeLine{00935     \textcolor{comment}{// Draw a handle at current mouse pos (will add a vertex)}}
\DoxyCodeLine{00936     drawSquare(m\_pos, HANDLE\_SIZE * pixelSize);}
\DoxyCodeLine{00937   \}}
\DoxyCodeLine{00938 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a116c13220389fd89e6851cfb86bb6168}\label{class_plastic_tool_a116c13220389fd89e6851cfb86bb6168}} 
\index{PlasticTool@{PlasticTool}!draw\_mesh@{draw\_mesh}}
\index{draw\_mesh@{draw\_mesh}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{draw\_mesh()}{draw\_mesh()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::draw\+\_\+mesh (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01234                             \{}
\DoxyCodeLine{01235   \textcolor{keyword}{struct }Locals \{}
\DoxyCodeLine{01236     \mbox{\hyperlink{class_plastic_tool}{PlasticTool}} *m\_this;}
\DoxyCodeLine{01237     \textcolor{keywordtype}{double} m\_pixelSize;}
\DoxyCodeLine{01238 }
\DoxyCodeLine{01239     \textcolor{keywordtype}{void} drawLine(\textcolor{keyword}{const} \mbox{\hyperlink{class_t_point_t}{TPointD}} \&a, \textcolor{keyword}{const} \mbox{\hyperlink{class_t_point_t}{TPointD}} \&b) \{}
\DoxyCodeLine{01240       glVertex2d(a.x, a.y);}
\DoxyCodeLine{01241       glVertex2d(b.x, b.y);}
\DoxyCodeLine{01242     \}}
\DoxyCodeLine{01243 }
\DoxyCodeLine{01244     \textcolor{keywordtype}{void} drawVertexSelections() \{}
\DoxyCodeLine{01245       \textcolor{keyword}{typedef} MeshSelection::objects\_container objects\_container;}
\DoxyCodeLine{01246       \textcolor{keyword}{const} objects\_container \&objects = m\_this-\/>m\_mvSel.objects();}
\DoxyCodeLine{01247 }
\DoxyCodeLine{01248       glColor3ub(255, 0, 0);  \textcolor{comment}{// Red}}
\DoxyCodeLine{01249       glLineWidth(1.0f);}
\DoxyCodeLine{01250 }
\DoxyCodeLine{01251       \textcolor{keyword}{const} \textcolor{keywordtype}{double} hSize = MESH\_SELECTED\_HANDLE\_SIZE * m\_pixelSize;}
\DoxyCodeLine{01252 }
\DoxyCodeLine{01253       objects\_container::const\_iterator vt, vEnd = objects.end();}
\DoxyCodeLine{01254       \textcolor{keywordflow}{for} (vt = objects.begin(); vt != vEnd; ++vt) \{}
\DoxyCodeLine{01255         \textcolor{keyword}{const} \mbox{\hyperlink{classtcg_1_1_vertex}{TTextureVertex}} \&vx =}
\DoxyCodeLine{01256             m\_this-\/>m\_mi-\/>meshes()[vt-\/>m\_meshIdx]-\/>vertex(vt-\/>m\_idx);}
\DoxyCodeLine{01257 }
\DoxyCodeLine{01258         ::drawFullSquare(vx.P(), hSize);}
\DoxyCodeLine{01259       \}}
\DoxyCodeLine{01260     \}}
\DoxyCodeLine{01261 }
\DoxyCodeLine{01262     \textcolor{keywordtype}{void} drawEdgeSelections() \{}
\DoxyCodeLine{01263       \textcolor{keyword}{typedef} MeshSelection::objects\_container objects\_container;}
\DoxyCodeLine{01264       \textcolor{keyword}{const} objects\_container \&objects = m\_this-\/>m\_meSel.objects();}
\DoxyCodeLine{01265 }
\DoxyCodeLine{01266       glColor3ub(0, 0, 255);  \textcolor{comment}{// Blue}}
\DoxyCodeLine{01267       glLineWidth(2.0f);}
\DoxyCodeLine{01268 }
\DoxyCodeLine{01269       glBegin(GL\_LINES);}
\DoxyCodeLine{01270 }
\DoxyCodeLine{01271       objects\_container::const\_iterator et, eEnd = objects.end();}
\DoxyCodeLine{01272       \textcolor{keywordflow}{for} (et = objects.begin(); et != eEnd; ++et) \{}
\DoxyCodeLine{01273         \textcolor{keyword}{const} \mbox{\hyperlink{classtcg_1_1_vertex}{TTextureVertex}}}
\DoxyCodeLine{01274             \&vx0 =}
\DoxyCodeLine{01275                 m\_this-\/>m\_mi-\/>meshes()[et-\/>m\_meshIdx]-\/>edgeVertex(et-\/>m\_idx, 0),}
\DoxyCodeLine{01276             \&vx1 =}
\DoxyCodeLine{01277                 m\_this-\/>m\_mi-\/>meshes()[et-\/>m\_meshIdx]-\/>edgeVertex(et-\/>m\_idx, 1);}
\DoxyCodeLine{01278 }
\DoxyCodeLine{01279         drawLine(vx0.P(), vx1.P());}
\DoxyCodeLine{01280       \}}
\DoxyCodeLine{01281 }
\DoxyCodeLine{01282       glEnd();}
\DoxyCodeLine{01283     \}}
\DoxyCodeLine{01284 }
\DoxyCodeLine{01285     \textcolor{keywordtype}{void} drawVertexHighlights() \{}
\DoxyCodeLine{01286       \textcolor{keywordflow}{if} (m\_this-\/>m\_mvHigh) \{}
\DoxyCodeLine{01287         \textcolor{keyword}{const} MeshIndex \&vHigh = m\_this-\/>m\_mvHigh;}
\DoxyCodeLine{01288 }
\DoxyCodeLine{01289         \textcolor{keyword}{const} \mbox{\hyperlink{classtcg_1_1_vertex}{TTextureMesh::vertex\_type}} \&vx =}
\DoxyCodeLine{01290             m\_this-\/>m\_mi-\/>meshes()[vHigh.m\_meshIdx]-\/>vertex(vHigh.m\_idx);}
\DoxyCodeLine{01291 }
\DoxyCodeLine{01292         glColor3ub(255, 0, 0);  \textcolor{comment}{// Red}}
\DoxyCodeLine{01293         glLineWidth(1.0f);}
\DoxyCodeLine{01294 }
\DoxyCodeLine{01295         \textcolor{keyword}{const} \textcolor{keywordtype}{double} hSize = MESH\_HIGHLIGHTED\_HANDLE\_SIZE * m\_pixelSize;}
\DoxyCodeLine{01296 }
\DoxyCodeLine{01297         ::drawSquare(vx.P(), hSize);}
\DoxyCodeLine{01298       \}}
\DoxyCodeLine{01299     \}}
\DoxyCodeLine{01300 }
\DoxyCodeLine{01301     \textcolor{keywordtype}{void} drawEdgeHighlights() \{}
\DoxyCodeLine{01302       \textcolor{keywordflow}{if} (m\_this-\/>m\_meHigh) \{}
\DoxyCodeLine{01303         \textcolor{keyword}{const} MeshIndex \&eHigh = m\_this-\/>m\_meHigh;}
\DoxyCodeLine{01304 }
\DoxyCodeLine{01305         \textcolor{keyword}{const} \mbox{\hyperlink{classtcg_1_1_vertex}{TTextureMesh::vertex\_type}}}
\DoxyCodeLine{01306             \&vx0 = m\_this-\/>m\_mi-\/>meshes()[eHigh.m\_meshIdx]-\/>edgeVertex(}
\DoxyCodeLine{01307                 eHigh.m\_idx, 0),}
\DoxyCodeLine{01308             \&vx1 = m\_this-\/>m\_mi-\/>meshes()[eHigh.m\_meshIdx]-\/>edgeVertex(}
\DoxyCodeLine{01309                 eHigh.m\_idx, 1);}
\DoxyCodeLine{01310 }
\DoxyCodeLine{01311         \{}
\DoxyCodeLine{01312           glPushAttrib(GL\_LINE\_BIT);}
\DoxyCodeLine{01313 }
\DoxyCodeLine{01314           glEnable(GL\_LINE\_STIPPLE);}
\DoxyCodeLine{01315           glLineStipple(1, 0xCCCC);}
\DoxyCodeLine{01316 }
\DoxyCodeLine{01317           glColor3ub(0, 0, 255);  \textcolor{comment}{// Blue}}
\DoxyCodeLine{01318           glLineWidth(1.0f);}
\DoxyCodeLine{01319 }
\DoxyCodeLine{01320           glBegin(GL\_LINES);}
\DoxyCodeLine{01321           drawLine(vx0.P(), vx1.P());}
\DoxyCodeLine{01322           glEnd();}
\DoxyCodeLine{01323 }
\DoxyCodeLine{01324           glPopAttrib();}
\DoxyCodeLine{01325         \}}
\DoxyCodeLine{01326       \}}
\DoxyCodeLine{01327     \}}
\DoxyCodeLine{01328 }
\DoxyCodeLine{01329   \} locals = \{\textcolor{keyword}{this}, getPixelSize()\};}
\DoxyCodeLine{01330 }
\DoxyCodeLine{01331   \textcolor{comment}{// The selected mesh image is already drawn by the stage}}
\DoxyCodeLine{01332 }
\DoxyCodeLine{01333   \textcolor{comment}{// Draw additional overlays}}
\DoxyCodeLine{01334   \textcolor{keywordflow}{if} (m\_mi) \{}
\DoxyCodeLine{01335     locals.drawVertexSelections();}
\DoxyCodeLine{01336     locals.drawEdgeSelections();}
\DoxyCodeLine{01337 }
\DoxyCodeLine{01338     locals.drawVertexHighlights();}
\DoxyCodeLine{01339     locals.drawEdgeHighlights();}
\DoxyCodeLine{01340   \}}
\DoxyCodeLine{01341 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a4a96d8c929c3486cd360d330a412313e}\label{class_plastic_tool_a4a96d8c929c3486cd360d330a412313e}} 
\index{PlasticTool@{PlasticTool}!draw\_rigidity@{draw\_rigidity}}
\index{draw\_rigidity@{draw\_rigidity}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{draw\_rigidity()}{draw\_rigidity()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::draw\+\_\+rigidity (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00251                                 \{}
\DoxyCodeLine{00252   \textcolor{keywordflow}{if} (TTool::getApplication()-\/>getCurrentFrame()-\/>isEditingScene()) \{}
\DoxyCodeLine{00253     \textcolor{comment}{// In the rigidity case, we're editing the mesh level -\/ so the implicit}}
\DoxyCodeLine{00254     \textcolor{comment}{// transformation affine loaded by OpenGL gets multiplied by the level's}}
\DoxyCodeLine{00255     \textcolor{comment}{// dpi scale. We have to revert the scale before showing column-\/related}}
\DoxyCodeLine{00256     \textcolor{comment}{// data.}}
\DoxyCodeLine{00257 }
\DoxyCodeLine{00258     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_point_t}{TPointD}} \&dpiScale = TTool::getViewer()-\/>getDpiScale();}
\DoxyCodeLine{00259     glPushMatrix();}
\DoxyCodeLine{00260     \{}
\DoxyCodeLine{00261       tglMultMatrix(\mbox{\hyperlink{class_t_scale}{TScale}}(1.0 / dpiScale.x, 1.0 / dpiScale.y));}
\DoxyCodeLine{00262 }
\DoxyCodeLine{00263       \textcolor{keywordtype}{double} pixelSize = sqrt(tglGetPixelSize2());}
\DoxyCodeLine{00264 }
\DoxyCodeLine{00265       \textcolor{comment}{// Draw original skeleton}}
\DoxyCodeLine{00266       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonP}} \&skeleton = this-\/>skeleton();}
\DoxyCodeLine{00267       \textcolor{keywordflow}{if} (skeleton) \{}
\DoxyCodeLine{00268         drawOnionSkinSkeletons\_build(pixelSize);}
\DoxyCodeLine{00269         drawSkeleton(*skeleton, pixelSize);}
\DoxyCodeLine{00270         drawSelections(m\_sd, *skeleton, pixelSize);}
\DoxyCodeLine{00271       \}}
\DoxyCodeLine{00272     \}}
\DoxyCodeLine{00273     glPopMatrix();}
\DoxyCodeLine{00274   \}}
\DoxyCodeLine{00275 }
\DoxyCodeLine{00276   \textcolor{comment}{// Draw a circle centered at m\_pos with m\_thickness radius}}
\DoxyCodeLine{00277   glColor3f(1.0f, 0.0f, 0.0f);  \textcolor{comment}{// Red}}
\DoxyCodeLine{00278   tglDrawCircle(m\_pos, m\_thickness.getValue());}
\DoxyCodeLine{00279 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_ad37f34c1b7e0f2eaad62b1296cb2c5f7}\label{class_plastic_tool_ad37f34c1b7e0f2eaad62b1296cb2c5f7}} 
\index{PlasticTool@{PlasticTool}!editSkelId\_undo@{editSkelId\_undo}}
\index{editSkelId\_undo@{editSkelId\_undo}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{editSkelId\_undo()}{editSkelId\_undo()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::edit\+Skel\+Id\+\_\+undo (\begin{DoxyParamCaption}\item[{int}]{skel\+Id }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00911                                             \{}
\DoxyCodeLine{00912   \mbox{\hyperlink{class_t_undo}{TUndo}} *op = \textcolor{keyword}{new} SetSkeletonIdUndo(skelId);}
\DoxyCodeLine{00913   TUndoManager::manager()-\/>add(op);}
\DoxyCodeLine{00914 }
\DoxyCodeLine{00915   op-\/>redo();}
\DoxyCodeLine{00916 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a15762671b2454062cd39fd52e0ee59a3}\label{class_plastic_tool_a15762671b2454062cd39fd52e0ee59a3}} 
\index{PlasticTool@{PlasticTool}!getCursorId@{getCursorId}}
\index{getCursorId@{getCursorId}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{getCursorId()}{getCursorId()}}
{\footnotesize\ttfamily int Plastic\+Tool\+::get\+Cursor\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Returns the type of cursor used by the tool. 

\begin{DoxySeeAlso}{See also}
For a list of cursor ids \mbox{\hyperlink{}{cursor.\+h}} 
\end{DoxySeeAlso}


Reimplemented from \mbox{\hyperlink{class_t_tool_a1768a57b8b6d1480618fd923fad15f1d}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00187 \{ \textcolor{keywordflow}{return} ToolCursor::SplineEditorCursor; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a6e002abbbdf11589e1cb375e07a6c3bd}\label{class_plastic_tool_a6e002abbbdf11589e1cb375e07a6c3bd}} 
\index{PlasticTool@{PlasticTool}!getProperties@{getProperties}}
\index{getProperties@{getProperties}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{getProperties()}{getProperties()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ Plastic\+Tool\+::get\+Properties (\begin{DoxyParamCaption}\item[{int}]{idx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00191 \{ \textcolor{keywordflow}{return} \&m\_propGroup[idx]; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a87b192f0a948cbc5a4728afc342e9d46}\label{class_plastic_tool_a87b192f0a948cbc5a4728afc342e9d46}} 
\index{PlasticTool@{PlasticTool}!getToolType@{getToolType}}
\index{getToolType@{getToolType}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{getToolType()}{getToolType()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{TTool\+::\+Tool\+Type}} Plastic\+Tool\+::get\+Tool\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00700                                              \{}
\DoxyCodeLine{00701   \textcolor{keywordflow}{switch} (m\_mode.getIndex()) \{}
\DoxyCodeLine{00702   \textcolor{keywordflow}{case} MESH\_IDX:}
\DoxyCodeLine{00703   \textcolor{keywordflow}{case} RIGIDITY\_IDX:}
\DoxyCodeLine{00704     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca01ffd66b00b05a88c02ce8ceb5da3b8b}{TTool::LevelWriteTool}};}
\DoxyCodeLine{00705 }
\DoxyCodeLine{00706   \textcolor{keywordflow}{case} BUILD\_IDX:}
\DoxyCodeLine{00707   \textcolor{keywordflow}{case} ANIMATE\_IDX:}
\DoxyCodeLine{00708     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296cab1cf4660322ca2d4e5a4848bdbc049a9}{TTool::ColumnTool}};}
\DoxyCodeLine{00709   \}}
\DoxyCodeLine{00710 }
\DoxyCodeLine{00711   assert(\textcolor{keyword}{false});}
\DoxyCodeLine{00712   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296caa8f6293eab5817f82f74f031c0724f28}{TTool::GenericTool}};}
\DoxyCodeLine{00713 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_aef473bc4bbfbd769fa7a4322528e6b22}\label{class_plastic_tool_aef473bc4bbfbd769fa7a4322528e6b22}} 
\index{PlasticTool@{PlasticTool}!insertVertex@{insertVertex}}
\index{insertVertex@{insertVertex}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{insertVertex()}{insertVertex()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Plastic\+Tool\+::insert\+Vertex (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_plastic_skeleton_vertex}{Plastic\+Skeleton\+Vertex}} \&}]{vx,  }\item[{int}]{e }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00714                                                                      \{}
\DoxyCodeLine{00715   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonP}} \&skeleton = this-\/>skeleton();}
\DoxyCodeLine{00716   assert(skeleton);}
\DoxyCodeLine{00717 }
\DoxyCodeLine{00718   \textcolor{keyword}{const} \mbox{\hyperlink{classtcg_1_1_edge}{PlasticSkeleton::edge\_type}} \&ed = skeleton-\/>edge(e);}
\DoxyCodeLine{00719   insertVertex(vx, ed.vertex(0),}
\DoxyCodeLine{00720                std::vector<int>(1, skeleton-\/>edge(e).vertex(1)));}
\DoxyCodeLine{00721 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a54d0b7ebdfa7ac622c76c65716c49c14}\label{class_plastic_tool_a54d0b7ebdfa7ac622c76c65716c49c14}} 
\index{PlasticTool@{PlasticTool}!insertVertex@{insertVertex}}
\index{insertVertex@{insertVertex}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{insertVertex()}{insertVertex()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Plastic\+Tool\+::insert\+Vertex (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_plastic_skeleton_vertex}{Plastic\+Skeleton\+Vertex}} \&}]{vx,  }\item[{int}]{parent,  }\item[{const std\+::vector$<$ int $>$ \&}]{children }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00695                                                                \{}
\DoxyCodeLine{00696   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonP}} \&skeleton = this-\/>skeleton();}
\DoxyCodeLine{00697   assert(skeleton);}
\DoxyCodeLine{00698 }
\DoxyCodeLine{00699   l\_suspendParamsObservation =}
\DoxyCodeLine{00700       \textcolor{keyword}{true};  \textcolor{comment}{// Some vertex parameters change during insert.}}
\DoxyCodeLine{00701 }
\DoxyCodeLine{00702   setSkeletonSelection(skeleton-\/>insertVertex(vx, parent, children));}
\DoxyCodeLine{00703 }
\DoxyCodeLine{00704   l\_suspendParamsObservation = \textcolor{keyword}{false};}
\DoxyCodeLine{00705   \mbox{\hyperlink{class_plastic_tool_aa43c3d522277771d9feb40630aeb6b69}{onChange}}();  \textcolor{comment}{// Update once after insertion}}
\DoxyCodeLine{00706 }
\DoxyCodeLine{00707   TTool::getApplication()-\/>getCurrentXsheet()-\/>notifyXsheetChanged();}
\DoxyCodeLine{00708   PlasticDeformerStorage::instance()-\/>\mbox{\hyperlink{class_plastic_deformer_storage_a39a845a381c4dde3b1c97295a4df36b9}{invalidateSkeleton}}(}
\DoxyCodeLine{00709       m\_sd.getPointer(), ::skeletonId(), PlasticDeformerStorage::ALL);}
\DoxyCodeLine{00710 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a575a7f3eef802a90c4c448663925ef18}\label{class_plastic_tool_a575a7f3eef802a90c4c448663925ef18}} 
\index{PlasticTool@{PlasticTool}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01388                                                                           \{}
\DoxyCodeLine{01389   \textcolor{keywordflow}{switch} (m\_mode.getIndex()) \{}
\DoxyCodeLine{01390   \textcolor{keywordflow}{case} MESH\_IDX:}
\DoxyCodeLine{01391     leftButtonDown\_mesh(pos, me);}
\DoxyCodeLine{01392     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01393   \textcolor{keywordflow}{case} BUILD\_IDX:}
\DoxyCodeLine{01394     leftButtonDown\_build(pos, me);}
\DoxyCodeLine{01395     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01396   \textcolor{keywordflow}{case} RIGIDITY\_IDX:}
\DoxyCodeLine{01397     leftButtonDown\_rigidity(pos, me);}
\DoxyCodeLine{01398     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01399   \textcolor{keywordflow}{case} ANIMATE\_IDX:}
\DoxyCodeLine{01400     leftButtonDown\_animate(pos, me);}
\DoxyCodeLine{01401     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01402   \}}
\DoxyCodeLine{01403 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_ae5cc55f55e3476647f0f9a670e03e649}\label{class_plastic_tool_ae5cc55f55e3476647f0f9a670e03e649}} 
\index{PlasticTool@{PlasticTool}!leftButtonDown\_animate@{leftButtonDown\_animate}}
\index{leftButtonDown\_animate@{leftButtonDown\_animate}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDown\_animate()}{leftButtonDown\_animate()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::left\+Button\+Down\+\_\+animate (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00091                                                                 \{}
\DoxyCodeLine{00092   \textcolor{comment}{// Track mouse position}}
\DoxyCodeLine{00093   m\_pressedPos = m\_pos = pos;}
\DoxyCodeLine{00094 }
\DoxyCodeLine{00095   setSkeletonSelection(m\_svHigh);}
\DoxyCodeLine{00096 }
\DoxyCodeLine{00097   \textcolor{keywordflow}{if} (m\_svSel.hasSingleObject()) \{}
\DoxyCodeLine{00098     \textcolor{comment}{// Store original vertex position and keyframe values}}
\DoxyCodeLine{00099     m\_pressedVxsPos =}
\DoxyCodeLine{00100         std::vector<TPointD>(1, deformedSkeleton().vertex(m\_svSel).P());}
\DoxyCodeLine{00101     m\_sd-\/>\mbox{\hyperlink{class_plastic_skeleton_deformation_ac99d2405b93e81e88ebe4aeafc57bb75}{getKeyframeAt}}(frame(), m\_pressedSkDF);}
\DoxyCodeLine{00102   \}}
\DoxyCodeLine{00103 }
\DoxyCodeLine{00104   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00105 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a3b89ebf552cac6a04ac465b2e8efd926}\label{class_plastic_tool_a3b89ebf552cac6a04ac465b2e8efd926}} 
\index{PlasticTool@{PlasticTool}!leftButtonDown\_build@{leftButtonDown\_build}}
\index{leftButtonDown\_build@{leftButtonDown\_build}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDown\_build()}{leftButtonDown\_build()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::left\+Button\+Down\+\_\+build (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00514                                                               \{}
\DoxyCodeLine{00515   \textcolor{comment}{// Track mouse position}}
\DoxyCodeLine{00516   m\_pressedPos = m\_pos = pos;}
\DoxyCodeLine{00517 }
\DoxyCodeLine{00518   \textcolor{comment}{// Update selections}}
\DoxyCodeLine{00519   \{}
\DoxyCodeLine{00520     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonP}} \&skel = skeleton();}
\DoxyCodeLine{00521 }
\DoxyCodeLine{00522     \textcolor{keywordflow}{if} (m\_svHigh >= 0) \{}
\DoxyCodeLine{00523       \mbox{\hyperlink{class_plastic_vertex_selection}{PlasticVertexSelection}} vSel(}
\DoxyCodeLine{00524           me.isShiftPressed()}
\DoxyCodeLine{00525               ? \mbox{\hyperlink{class_plastic_vertex_selection}{PlasticVertexSelection}}(branchSelection(m\_svHigh))}
\DoxyCodeLine{00526               : \mbox{\hyperlink{class_plastic_vertex_selection}{PlasticVertexSelection}}(m\_svHigh));}
\DoxyCodeLine{00527 }
\DoxyCodeLine{00528       \textcolor{keywordflow}{if} (me.isCtrlPressed())}
\DoxyCodeLine{00529         toggleSkeletonSelection(vSel);}
\DoxyCodeLine{00530       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!m\_svSel.contains(vSel))}
\DoxyCodeLine{00531         setSkeletonSelection(vSel);}
\DoxyCodeLine{00532     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_seHigh >= 0) \{}
\DoxyCodeLine{00533       \textcolor{comment}{// Insert a vertex in the edge}}
\DoxyCodeLine{00534       \mbox{\hyperlink{class_t_undo}{TUndo}} *op = \textcolor{keyword}{new} InsertVertexUndo(}
\DoxyCodeLine{00535           m\_seHigh, \mbox{\hyperlink{struct_plastic_skeleton_vertex}{PlasticSkeletonVertex}}(\mbox{\hyperlink{namespacetcg_1_1point__ops_a9649a6ac6d347e067adc06325fc07a7f}{projection}}(*skel, m\_seHigh, m\_pos)));}
\DoxyCodeLine{00536       TUndoManager::manager()-\/>add(op);}
\DoxyCodeLine{00537 }
\DoxyCodeLine{00538       op-\/>redo();}
\DoxyCodeLine{00539     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!skel || skel-\/>empty() || m\_svSel.hasSingleObject()) \{}
\DoxyCodeLine{00540       \textcolor{comment}{// Snap to mesh if required}}
\DoxyCodeLine{00541       \textcolor{keywordflow}{if} (m\_snapToMesh.getValue()) \{}
\DoxyCodeLine{00542         \textcolor{keywordtype}{double} d, highlightRadius = getPixelSize() * HIGHLIGHT\_DISTANCE;}
\DoxyCodeLine{00543 }
\DoxyCodeLine{00544         \textcolor{keyword}{const} \mbox{\hyperlink{class_t_point_t}{TPointD}} \&mvPos = ::closestMeshVertexPos(}
\DoxyCodeLine{00545             pos, \&d);  \textcolor{comment}{// Again, no need to check against closest}}
\DoxyCodeLine{00546                        \textcolor{comment}{// skeleton vertex.}}
\DoxyCodeLine{00547         \textcolor{keywordflow}{if} (d < highlightRadius) m\_pos = mvPos;}
\DoxyCodeLine{00548       \}}
\DoxyCodeLine{00549 }
\DoxyCodeLine{00550       \textcolor{comment}{// Add a new vertex}}
\DoxyCodeLine{00551       \mbox{\hyperlink{class_t_undo}{TUndo}} *op = \textcolor{keyword}{new} AddVertexUndo(m\_svSel, \mbox{\hyperlink{struct_plastic_skeleton_vertex}{PlasticSkeletonVertex}}(m\_pos));}
\DoxyCodeLine{00552       TUndoManager::manager()-\/>add(op);}
\DoxyCodeLine{00553 }
\DoxyCodeLine{00554       op-\/>redo();}
\DoxyCodeLine{00555 }
\DoxyCodeLine{00556       assert(skeleton());}
\DoxyCodeLine{00557     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00558       setSkeletonSelection(-\/1);}
\DoxyCodeLine{00559   \}}
\DoxyCodeLine{00560 }
\DoxyCodeLine{00561   \textcolor{comment}{// Start move vertex operation}}
\DoxyCodeLine{00562   \textcolor{keywordflow}{if} (!m\_svSel.isEmpty()) \{}
\DoxyCodeLine{00563     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonP}} \&skel = skeleton();}
\DoxyCodeLine{00564     assert(skel);}
\DoxyCodeLine{00565 }
\DoxyCodeLine{00566     \textcolor{comment}{// Adjust mouse press to the selected skeleton vertex, if necessary}}
\DoxyCodeLine{00567     \textcolor{keywordflow}{if} (m\_svSel.hasSingleObject()) m\_pressedPos = skel-\/>vertex(m\_svSel).P();}
\DoxyCodeLine{00568 }
\DoxyCodeLine{00569     \textcolor{comment}{// Store original vertex positions}}
\DoxyCodeLine{00570     std::vector<TPointD> v;}
\DoxyCodeLine{00571     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const} \&e : m\_svSel.objects()) \{}
\DoxyCodeLine{00572       v.push\_back(skel-\/>vertex(e).P());}
\DoxyCodeLine{00573     \}}
\DoxyCodeLine{00574     m\_pressedVxsPos = std::move(v);}
\DoxyCodeLine{00575   \}}
\DoxyCodeLine{00576 }
\DoxyCodeLine{00577   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00578 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a38a9e0e9c29035d591e44988cf9ff33a}\label{class_plastic_tool_a38a9e0e9c29035d591e44988cf9ff33a}} 
\index{PlasticTool@{PlasticTool}!leftButtonDown\_mesh@{leftButtonDown\_mesh}}
\index{leftButtonDown\_mesh@{leftButtonDown\_mesh}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDown\_mesh()}{leftButtonDown\_mesh()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::left\+Button\+Down\+\_\+mesh (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01041                                                              \{}
\DoxyCodeLine{01042   \textcolor{keyword}{struct }Locals \{}
\DoxyCodeLine{01043     \mbox{\hyperlink{class_plastic_tool}{PlasticTool}} *m\_this;}
\DoxyCodeLine{01044 }
\DoxyCodeLine{01045     \textcolor{keywordtype}{void} updateSelection(MeshSelection \&sel, \textcolor{keyword}{const} MeshIndex \&idx,}
\DoxyCodeLine{01046                          \textcolor{keyword}{const} \mbox{\hyperlink{class_t_mouse_event}{TMouseEvent}} \&me) \{}
\DoxyCodeLine{01047       \textcolor{keywordflow}{if} (idx) \{}
\DoxyCodeLine{01048         MeshSelection newSel(idx);}
\DoxyCodeLine{01049 }
\DoxyCodeLine{01050         \textcolor{keywordflow}{if} (me.isCtrlPressed())}
\DoxyCodeLine{01051           m\_this-\/>toggleMeshSelection(sel, newSel);}
\DoxyCodeLine{01052         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!sel.contains(newSel))}
\DoxyCodeLine{01053           m\_this-\/>setMeshSelection(sel, newSel);}
\DoxyCodeLine{01054       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01055         m\_this-\/>setMeshSelection(sel, MeshSelection());}
\DoxyCodeLine{01056     \}}
\DoxyCodeLine{01057   \} locals = \{\textcolor{keyword}{this}\};}
\DoxyCodeLine{01058 }
\DoxyCodeLine{01059   \textcolor{comment}{// Track mouse position}}
\DoxyCodeLine{01060   m\_pressedPos = m\_pos = pos;}
\DoxyCodeLine{01061 }
\DoxyCodeLine{01062   \textcolor{comment}{// Update selection}}
\DoxyCodeLine{01063   locals.updateSelection(m\_mvSel, m\_mvHigh, me);}
\DoxyCodeLine{01064   locals.updateSelection(m\_meSel, m\_meHigh, me);}
\DoxyCodeLine{01065 }
\DoxyCodeLine{01066   \textcolor{comment}{// Store original vertex positions}}
\DoxyCodeLine{01067   \textcolor{keywordflow}{if} (!m\_mvSel.isEmpty()) \{}
\DoxyCodeLine{01068     std::vector<TPointD> v;}
\DoxyCodeLine{01069     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const} \&e : m\_mvSel.objects()) \{}
\DoxyCodeLine{01070       v.push\_back(m\_mi-\/>meshes()[e.m\_meshIdx]-\/>vertex(e.m\_idx).P());}
\DoxyCodeLine{01071     \}}
\DoxyCodeLine{01072     m\_pressedVxsPos = std::move(v);}
\DoxyCodeLine{01073   \}}
\DoxyCodeLine{01074 }
\DoxyCodeLine{01075   \textcolor{comment}{// Redraw selections}}
\DoxyCodeLine{01076   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{01077 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_aa7c4530b6dac695c675ec93b58e54f54}\label{class_plastic_tool_aa7c4530b6dac695c675ec93b58e54f54}} 
\index{PlasticTool@{PlasticTool}!leftButtonDown\_rigidity@{leftButtonDown\_rigidity}}
\index{leftButtonDown\_rigidity@{leftButtonDown\_rigidity}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDown\_rigidity()}{leftButtonDown\_rigidity()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::left\+Button\+Down\+\_\+rigidity (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00205                                                                \{}
\DoxyCodeLine{00206   \textcolor{comment}{// Track mouse position}}
\DoxyCodeLine{00207   m\_pressedPos = m\_pos = pos;}
\DoxyCodeLine{00208 }
\DoxyCodeLine{00209   RigidityPainter *painter =}
\DoxyCodeLine{00210       \textcolor{keyword}{static\_cast<}RigidityPainter *\textcolor{keyword}{>}(m\_rigidityPainter.get());}
\DoxyCodeLine{00211 }
\DoxyCodeLine{00212   painter-\/>startPainting(m\_thickness.getValue(), m\_rigidValue.getIndex());}
\DoxyCodeLine{00213   painter-\/>paint(m\_pos);}
\DoxyCodeLine{00214 }
\DoxyCodeLine{00215   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00216 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a8c0b4ce8f2cec957544f8c78ad08a4fe}\label{class_plastic_tool_a8c0b4ce8f2cec957544f8c78ad08a4fe}} 
\index{PlasticTool@{PlasticTool}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01407                                                                           \{}
\DoxyCodeLine{01408   \textcolor{comment}{// Track dragging status}}
\DoxyCodeLine{01409   m\_dragged = \textcolor{keyword}{true};}
\DoxyCodeLine{01410 }
\DoxyCodeLine{01411   \textcolor{keywordflow}{switch} (m\_mode.getIndex()) \{}
\DoxyCodeLine{01412   \textcolor{keywordflow}{case} MESH\_IDX:}
\DoxyCodeLine{01413     leftButtonDrag\_mesh(pos, me);}
\DoxyCodeLine{01414     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01415   \textcolor{keywordflow}{case} BUILD\_IDX:}
\DoxyCodeLine{01416     leftButtonDrag\_build(pos, me);}
\DoxyCodeLine{01417     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01418   \textcolor{keywordflow}{case} RIGIDITY\_IDX:}
\DoxyCodeLine{01419     leftButtonDrag\_rigidity(pos, me);}
\DoxyCodeLine{01420     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01421   \textcolor{keywordflow}{case} ANIMATE\_IDX:}
\DoxyCodeLine{01422     leftButtonDrag\_animate(pos, me);}
\DoxyCodeLine{01423     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01424   \}}
\DoxyCodeLine{01425 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_af082e0fbff4af95b10d1888ebc38feca}\label{class_plastic_tool_af082e0fbff4af95b10d1888ebc38feca}} 
\index{PlasticTool@{PlasticTool}!leftButtonDrag\_animate@{leftButtonDrag\_animate}}
\index{leftButtonDrag\_animate@{leftButtonDrag\_animate}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag\_animate()}{leftButtonDrag\_animate()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::left\+Button\+Drag\+\_\+animate (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00110                                                                 \{}
\DoxyCodeLine{00111   \textcolor{comment}{// Track mouse position}}
\DoxyCodeLine{00112   m\_pos = pos;}
\DoxyCodeLine{00113 }
\DoxyCodeLine{00114   \textcolor{keywordflow}{if} (m\_sd \&\& m\_svSel.hasSingleObject() \&\&}
\DoxyCodeLine{00115       m\_svSel > 0)  \textcolor{comment}{// Avoid move if vertex is root}}
\DoxyCodeLine{00116   \{}
\DoxyCodeLine{00117     l\_suspendParamsObservation = \textcolor{keyword}{true};  \textcolor{comment}{// Automatic params notification happen}}
\DoxyCodeLine{00118     \textcolor{comment}{// twice (1 x param) -\/ dealing with it manually}}
\DoxyCodeLine{00119 }
\DoxyCodeLine{00120     \textcolor{keywordtype}{double} frame = ::frame();}
\DoxyCodeLine{00121 }
\DoxyCodeLine{00122     \textcolor{comment}{// First, retrieve selected vertex's deformation}}
\DoxyCodeLine{00123     \mbox{\hyperlink{struct_plastic_skeleton_vertex_deformation}{SkVD}} *vd = m\_sd-\/>\mbox{\hyperlink{class_plastic_skeleton_deformation_a0c73e75c7c1f5fd40ebdeaf3a20f80ad}{vertexDeformation}}(::skeletonId(), m\_svSel);}
\DoxyCodeLine{00124     assert(vd);}
\DoxyCodeLine{00125 }
\DoxyCodeLine{00126     \textcolor{comment}{// Move selected branch}}
\DoxyCodeLine{00127     \textcolor{keywordflow}{if} (m\_keepDistance.getValue()) \{}
\DoxyCodeLine{00128       ::setKeyframe(vd-\/>m\_params[\mbox{\hyperlink{struct_plastic_skeleton_vertex_deformation_ad86a0a561a86fe4fecafe375ce9b668aac7395a1a37dd81030a5a3c4b64c834f1}{SkVD::ANGLE}}],}
\DoxyCodeLine{00129                     frame);  \textcolor{comment}{// Set a keyframe for it. It must be done}}
\DoxyCodeLine{00130                              \textcolor{comment}{// to set the correct function interpolation}}
\DoxyCodeLine{00131                              \textcolor{comment}{// type and other stuff.}}
\DoxyCodeLine{00132       m\_sd-\/>updateAngle(*skeleton(), deformedSkeleton(), frame, m\_svSel, pos);}
\DoxyCodeLine{00133     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00134       ::setKeyframe(vd-\/>m\_params[\mbox{\hyperlink{struct_plastic_skeleton_vertex_deformation_ad86a0a561a86fe4fecafe375ce9b668aac7395a1a37dd81030a5a3c4b64c834f1}{SkVD::ANGLE}}],}
\DoxyCodeLine{00135                     frame);  \textcolor{comment}{// Same here. NOTE: Not setting a frame on}}
\DoxyCodeLine{00136       ::setKeyframe(vd-\/>m\_params[\mbox{\hyperlink{struct_plastic_skeleton_vertex_deformation_ad86a0a561a86fe4fecafe375ce9b668aaa8d13a6740a3949b4c3a70fea675c70b}{SkVD::DISTANCE}}],}
\DoxyCodeLine{00137                     frame);  \textcolor{comment}{// vd directly due to SkVD::SO}}
\DoxyCodeLine{00138 }
\DoxyCodeLine{00139       m\_sd-\/>updatePosition(*skeleton(), deformedSkeleton(), frame, m\_svSel,}
\DoxyCodeLine{00140                            pos);}
\DoxyCodeLine{00141     \}}
\DoxyCodeLine{00142 }
\DoxyCodeLine{00143     l\_suspendParamsObservation = \textcolor{keyword}{false};}
\DoxyCodeLine{00144 }
\DoxyCodeLine{00145     \textcolor{comment}{// onChange();                                                     // Due to}}
\DoxyCodeLine{00146     \textcolor{comment}{// a nasty Function Editor dependency,}}
\DoxyCodeLine{00147     \textcolor{comment}{// it's better to call the following directly}}
\DoxyCodeLine{00148     m\_deformedSkeleton.invalidate();}
\DoxyCodeLine{00149     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00150   \}}
\DoxyCodeLine{00151 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a1d506a415fc54f1f38edd598085801d8}\label{class_plastic_tool_a1d506a415fc54f1f38edd598085801d8}} 
\index{PlasticTool@{PlasticTool}!leftButtonDrag\_build@{leftButtonDrag\_build}}
\index{leftButtonDrag\_build@{leftButtonDrag\_build}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag\_build()}{leftButtonDrag\_build()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::left\+Button\+Drag\+\_\+build (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00583                                                               \{}
\DoxyCodeLine{00584   \textcolor{comment}{// Track mouse position}}
\DoxyCodeLine{00585   \textcolor{keywordflow}{if} (m\_snapToMesh.getValue()) \{}
\DoxyCodeLine{00586     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_point_t}{TPointD}} \&mvPos = ::closestMeshVertexPos(pos),}
\DoxyCodeLine{00587                   \&svPos = ::closestSkeletonVertexPos(mvPos);}
\DoxyCodeLine{00588 }
\DoxyCodeLine{00589     \textcolor{keywordflow}{if} (tcg::point\_ops::dist(mvPos, svPos) >}
\DoxyCodeLine{00590         getPixelSize())  \textcolor{comment}{// 1) If said distance is sub-\/pixel, the user}}
\DoxyCodeLine{00591       m\_pos = mvPos;  \textcolor{comment}{//    just cannot see the assignment -\/ so it's not safe.}}
\DoxyCodeLine{00592   \}                   \textcolor{comment}{// 2) The moveVertex\_build() below manipulates m\_pos}}
\DoxyCodeLine{00593   \textcolor{keywordflow}{else}                \textcolor{comment}{//    (not how m\_pressedPos is subtracted), so !=}}
\DoxyCodeLine{00594     m\_pos = pos;      \textcolor{comment}{//    is not a choice.}}
\DoxyCodeLine{00595 }
\DoxyCodeLine{00596   moveVertex\_build(m\_pressedVxsPos, m\_pos -\/ m\_pressedPos);}
\DoxyCodeLine{00597   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00598 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a74b7beb023bd5fed3a26c047fcc6e13c}\label{class_plastic_tool_a74b7beb023bd5fed3a26c047fcc6e13c}} 
\index{PlasticTool@{PlasticTool}!leftButtonDrag\_mesh@{leftButtonDrag\_mesh}}
\index{leftButtonDrag\_mesh@{leftButtonDrag\_mesh}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag\_mesh()}{leftButtonDrag\_mesh()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::left\+Button\+Drag\+\_\+mesh (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01082                                                              \{}
\DoxyCodeLine{01083   \textcolor{comment}{// Track mouse position}}
\DoxyCodeLine{01084   m\_pos = pos;}
\DoxyCodeLine{01085 }
\DoxyCodeLine{01086   \textcolor{keywordflow}{if} (!m\_mvSel.isEmpty()) \{}
\DoxyCodeLine{01087     moveVertex\_mesh(m\_pressedVxsPos, pos -\/ m\_pressedPos);}
\DoxyCodeLine{01088     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{01089   \}}
\DoxyCodeLine{01090 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a4a5232094b2b73c519c93a1c70a2512d}\label{class_plastic_tool_a4a5232094b2b73c519c93a1c70a2512d}} 
\index{PlasticTool@{PlasticTool}!leftButtonDrag\_rigidity@{leftButtonDrag\_rigidity}}
\index{leftButtonDrag\_rigidity@{leftButtonDrag\_rigidity}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag\_rigidity()}{leftButtonDrag\_rigidity()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::left\+Button\+Drag\+\_\+rigidity (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00221                                                                \{}
\DoxyCodeLine{00222   \textcolor{comment}{// Track mouse position}}
\DoxyCodeLine{00223   m\_pos = pos;}
\DoxyCodeLine{00224 }
\DoxyCodeLine{00225   RigidityPainter *painter =}
\DoxyCodeLine{00226       \textcolor{keyword}{static\_cast<}RigidityPainter *\textcolor{keyword}{>}(m\_rigidityPainter.get());}
\DoxyCodeLine{00227 }
\DoxyCodeLine{00228   painter-\/>paint(m\_pos);}
\DoxyCodeLine{00229   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00230 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a6aeffb649909210d8de987df8954a56b}\label{class_plastic_tool_a6aeffb649909210d8de987df8954a56b}} 
\index{PlasticTool@{PlasticTool}!leftButtonUp@{leftButtonUp}}
\index{leftButtonUp@{leftButtonUp}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{leftButtonUp()}{leftButtonUp()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::left\+Button\+Up (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01429                                                                         \{}
\DoxyCodeLine{01430   \textcolor{keywordflow}{switch} (m\_mode.getIndex()) \{}
\DoxyCodeLine{01431   \textcolor{keywordflow}{case} MESH\_IDX:}
\DoxyCodeLine{01432     leftButtonUp\_mesh(pos, me);}
\DoxyCodeLine{01433     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01434   \textcolor{keywordflow}{case} BUILD\_IDX:}
\DoxyCodeLine{01435     leftButtonUp\_build(pos, me);}
\DoxyCodeLine{01436     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01437   \textcolor{keywordflow}{case} RIGIDITY\_IDX:}
\DoxyCodeLine{01438     leftButtonUp\_rigidity(pos, me);}
\DoxyCodeLine{01439     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01440   \textcolor{keywordflow}{case} ANIMATE\_IDX:}
\DoxyCodeLine{01441     leftButtonUp\_animate(pos, me);}
\DoxyCodeLine{01442     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01443   \}}
\DoxyCodeLine{01444 }
\DoxyCodeLine{01445   m\_pressedPos = TConsts::napd;}
\DoxyCodeLine{01446   m\_pressedVxsPos.clear();}
\DoxyCodeLine{01447   m\_dragged = \textcolor{keyword}{false};}
\DoxyCodeLine{01448 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_ad0985427698feade79fa33ce86e73cd1}\label{class_plastic_tool_ad0985427698feade79fa33ce86e73cd1}} 
\index{PlasticTool@{PlasticTool}!leftButtonUp\_animate@{leftButtonUp\_animate}}
\index{leftButtonUp\_animate@{leftButtonUp\_animate}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{leftButtonUp\_animate()}{leftButtonUp\_animate()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::left\+Button\+Up\+\_\+animate (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00156                                                               \{}
\DoxyCodeLine{00157   \textcolor{comment}{// Track mouse position}}
\DoxyCodeLine{00158   m\_pos = pos;}
\DoxyCodeLine{00159 }
\DoxyCodeLine{00160   \textcolor{keywordflow}{if} (m\_svSel.hasSingleObject() \&\& m\_dragged) \{}
\DoxyCodeLine{00161     \textcolor{comment}{// Set a keyframe to each skeleton vertex, if that was requested}}
\DoxyCodeLine{00162     \textcolor{keywordflow}{if} (m\_globalKey.getValue())}
\DoxyCodeLine{00163       ::setKeyframe(m\_sd, ::frame());  \textcolor{comment}{// Already invokes keyframes rebuild}}
\DoxyCodeLine{00164     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00165       stageObject()-\/>\mbox{\hyperlink{class_t_stage_object_a39d6649e151c9c4ffa3a4259be1724a7}{updateKeyframes}}();  \textcolor{comment}{// Otherwise, must be explicit}}
\DoxyCodeLine{00166 }
\DoxyCodeLine{00167     \textcolor{comment}{// Add a corresponding undo}}
\DoxyCodeLine{00168     AnimateValuesUndo *undo = \textcolor{keyword}{new} AnimateValuesUndo(m\_svSel);}
\DoxyCodeLine{00169 }
\DoxyCodeLine{00170     undo-\/>m\_oldValues = m\_pressedSkDF;}
\DoxyCodeLine{00171     m\_sd-\/>\mbox{\hyperlink{class_plastic_skeleton_deformation_ac99d2405b93e81e88ebe4aeafc57bb75}{getKeyframeAt}}(frame(), undo-\/>m\_newValues);}
\DoxyCodeLine{00172 }
\DoxyCodeLine{00173     TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{00174 }
\DoxyCodeLine{00175     \textcolor{comment}{// This is needed to refresh the xsheet (there may be new keyframes)}}
\DoxyCodeLine{00176     TTool::getApplication()-\/>getCurrentObject()-\/>notifyObjectIdChanged(\textcolor{keyword}{false});}
\DoxyCodeLine{00177   \}}
\DoxyCodeLine{00178 }
\DoxyCodeLine{00179   \textcolor{comment}{// In case one of the vertices is attached (as a hook) to an external}}
\DoxyCodeLine{00180   \textcolor{comment}{// position,}}
\DoxyCodeLine{00181   \textcolor{comment}{// we need to update the whole skeleton according to the updated vertex.}}
\DoxyCodeLine{00182   \mbox{\hyperlink{class_t_tool_a1a5f380464a6b36947212e2f8d5b314c}{updateMatrix}}();}
\DoxyCodeLine{00183   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00184 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_aab20b3c23cc043b269468b83a19b22db}\label{class_plastic_tool_aab20b3c23cc043b269468b83a19b22db}} 
\index{PlasticTool@{PlasticTool}!leftButtonUp\_build@{leftButtonUp\_build}}
\index{leftButtonUp\_build@{leftButtonUp\_build}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{leftButtonUp\_build()}{leftButtonUp\_build()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::left\+Button\+Up\+\_\+build (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00603                                                             \{}
\DoxyCodeLine{00604   \textcolor{comment}{// Track mouse position}}
\DoxyCodeLine{00605   \textcolor{keywordflow}{if} (m\_snapToMesh.getValue()) \{}
\DoxyCodeLine{00606     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_point_t}{TPointD}} \&mvPos = ::closestMeshVertexPos(pos),}
\DoxyCodeLine{00607                   \&svPos = ::closestSkeletonVertexPos(mvPos);}
\DoxyCodeLine{00608 }
\DoxyCodeLine{00609     \textcolor{keywordflow}{if} (tcg::point\_ops::dist(mvPos, svPos) > getPixelSize())  \textcolor{comment}{// Same as above}}
\DoxyCodeLine{00610       m\_pos = mvPos;}
\DoxyCodeLine{00611   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00612     m\_pos = pos;}
\DoxyCodeLine{00613 }
\DoxyCodeLine{00614   \textcolor{keywordflow}{if} (!m\_svSel.isEmpty() \&\& m\_dragged) \{}
\DoxyCodeLine{00615     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} MoveVertexUndo\_Build(}
\DoxyCodeLine{00616         m\_svSel.objects(), m\_pressedVxsPos, m\_pos -\/ m\_pressedPos));}
\DoxyCodeLine{00617 }
\DoxyCodeLine{00618     ::stageObject()}
\DoxyCodeLine{00619         -\/>invalidate();  \textcolor{comment}{// Should be a TStageObject's implementation detail ...}}
\DoxyCodeLine{00620     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();        \textcolor{comment}{// .. it's that it caches placement data and we must}}
\DoxyCodeLine{00621   \}                      \textcolor{comment}{// invalidate it. Gross. Can't we do anything about it?}}
\DoxyCodeLine{00622 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a8f6baa4efb5e8acea3f17e05b375a9cc}\label{class_plastic_tool_a8f6baa4efb5e8acea3f17e05b375a9cc}} 
\index{PlasticTool@{PlasticTool}!leftButtonUp\_mesh@{leftButtonUp\_mesh}}
\index{leftButtonUp\_mesh@{leftButtonUp\_mesh}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{leftButtonUp\_mesh()}{leftButtonUp\_mesh()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::left\+Button\+Up\+\_\+mesh (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01094                                                                              \{}
\DoxyCodeLine{01095   \textcolor{comment}{// Track mouse position}}
\DoxyCodeLine{01096   m\_pos = pos;}
\DoxyCodeLine{01097 }
\DoxyCodeLine{01098   \textcolor{keywordflow}{if} (m\_dragged \&\& !m\_mvSel.isEmpty()) \{}
\DoxyCodeLine{01099     TUndoManager::manager()-\/>add(\textcolor{keyword}{new} MoveVertexUndo\_Mesh(}
\DoxyCodeLine{01100         m\_mvSel.objects(), m\_pressedVxsPos, pos -\/ m\_pressedPos));}
\DoxyCodeLine{01101 }
\DoxyCodeLine{01102     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{01103     \mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}();  \textcolor{comment}{// Sets the level's dirty flag      -\/.-\/'}}
\DoxyCodeLine{01104   \}}
\DoxyCodeLine{01105 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a4e0a96343d58ea3f3c6645039cd98070}\label{class_plastic_tool_a4e0a96343d58ea3f3c6645039cd98070}} 
\index{PlasticTool@{PlasticTool}!leftButtonUp\_rigidity@{leftButtonUp\_rigidity}}
\index{leftButtonUp\_rigidity@{leftButtonUp\_rigidity}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{leftButtonUp\_rigidity()}{leftButtonUp\_rigidity()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::left\+Button\+Up\+\_\+rigidity (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00235                                                              \{}
\DoxyCodeLine{00236   \textcolor{comment}{// Track mouse position}}
\DoxyCodeLine{00237   m\_pos = pos;}
\DoxyCodeLine{00238 }
\DoxyCodeLine{00239   RigidityPainter *painter =}
\DoxyCodeLine{00240       \textcolor{keyword}{static\_cast<}RigidityPainter *\textcolor{keyword}{>}(m\_rigidityPainter.get());}
\DoxyCodeLine{00241 }
\DoxyCodeLine{00242   painter-\/>commit();}
\DoxyCodeLine{00243 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a78e489c794ec8de699cdd1db882bcead}\label{class_plastic_tool_a78e489c794ec8de699cdd1db882bcead}} 
\index{PlasticTool@{PlasticTool}!meshEdgesSelection@{meshEdgesSelection}}
\index{meshEdgesSelection@{meshEdgesSelection}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{meshEdgesSelection()}{meshEdgesSelection()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_multiple_selection}{Mesh\+Selection}} \& Plastic\+Tool\+::mesh\+Edges\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00260 \{ \textcolor{keywordflow}{return} m\_meSel; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a808570a0a3f78642e7eb8f8323ca43ff}\label{class_plastic_tool_a808570a0a3f78642e7eb8f8323ca43ff}} 
\index{PlasticTool@{PlasticTool}!meshVertexesSelection@{meshVertexesSelection}}
\index{meshVertexesSelection@{meshVertexesSelection}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{meshVertexesSelection()}{meshVertexesSelection()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_multiple_selection}{Mesh\+Selection}} \& Plastic\+Tool\+::mesh\+Vertexes\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00259 \{ \textcolor{keywordflow}{return} m\_mvSel; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_afd0e94209d0168ab02069771a85dadea}\label{class_plastic_tool_afd0e94209d0168ab02069771a85dadea}} 
\index{PlasticTool@{PlasticTool}!mouseMove@{mouseMove}}
\index{mouseMove@{mouseMove}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{mouseMove()}{mouseMove()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::mouse\+Move (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01368                                                                      \{}
\DoxyCodeLine{01369   \textcolor{comment}{// Discriminate mode}}
\DoxyCodeLine{01370   \textcolor{keywordflow}{switch} (m\_mode.getIndex()) \{}
\DoxyCodeLine{01371   \textcolor{keywordflow}{case} MESH\_IDX:}
\DoxyCodeLine{01372     mouseMove\_mesh(pos, me);}
\DoxyCodeLine{01373     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01374   \textcolor{keywordflow}{case} BUILD\_IDX:}
\DoxyCodeLine{01375     mouseMove\_build(pos, me);}
\DoxyCodeLine{01376     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01377   \textcolor{keywordflow}{case} RIGIDITY\_IDX:}
\DoxyCodeLine{01378     mouseMove\_rigidity(pos, me);}
\DoxyCodeLine{01379     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01380   \textcolor{keywordflow}{case} ANIMATE\_IDX:}
\DoxyCodeLine{01381     mouseMove\_animate(pos, me);}
\DoxyCodeLine{01382     \textcolor{keywordflow}{break};}
\DoxyCodeLine{01383   \}}
\DoxyCodeLine{01384 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_af484e08909486b43f1230868c73e2afb}\label{class_plastic_tool_af484e08909486b43f1230868c73e2afb}} 
\index{PlasticTool@{PlasticTool}!mouseMove\_animate@{mouseMove\_animate}}
\index{mouseMove\_animate@{mouseMove\_animate}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{mouseMove\_animate()}{mouseMove\_animate()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::mouse\+Move\+\_\+animate (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00071                                                                              \{}
\DoxyCodeLine{00072   \textcolor{comment}{// Track mouse position}}
\DoxyCodeLine{00073   m\_pos = pos;  \textcolor{comment}{// Needs to be done now -\/ ensures m\_pos is valid}}
\DoxyCodeLine{00074 }
\DoxyCodeLine{00075   m\_svHigh = m\_seHigh = -\/1;  \textcolor{comment}{// Reset highlighted primitives}}
\DoxyCodeLine{00076 }
\DoxyCodeLine{00077   \textcolor{keywordflow}{if} (m\_sd) \{}
\DoxyCodeLine{00078     \textcolor{keywordtype}{double} d, highlightRadius = getPixelSize() * HIGHLIGHT\_DISTANCE;}
\DoxyCodeLine{00079 }
\DoxyCodeLine{00080     \textcolor{comment}{// Look for nearest vertex}}
\DoxyCodeLine{00081     \textcolor{keywordtype}{int} v = deformedSkeleton().closestVertex(pos, \&d);}
\DoxyCodeLine{00082     \textcolor{keywordflow}{if} (v >= 0 \&\& d < highlightRadius) m\_svHigh = v;}
\DoxyCodeLine{00083 }
\DoxyCodeLine{00084     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00085   \}}
\DoxyCodeLine{00086 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a1c55ebe16b1fff96f122968d3ff5d954}\label{class_plastic_tool_a1c55ebe16b1fff96f122968d3ff5d954}} 
\index{PlasticTool@{PlasticTool}!mouseMove\_build@{mouseMove\_build}}
\index{mouseMove\_build@{mouseMove\_build}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{mouseMove\_build()}{mouseMove\_build()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::mouse\+Move\+\_\+build (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00473                                                                            \{}
\DoxyCodeLine{00474   \textcolor{comment}{// Track mouse position}}
\DoxyCodeLine{00475   m\_pos = pos;  \textcolor{comment}{// Needs to be done now -\/ ensures m\_pos is valid}}
\DoxyCodeLine{00476 }
\DoxyCodeLine{00477   m\_svHigh = m\_seHigh = -\/1;  \textcolor{comment}{// Reset highlighted primitives}}
\DoxyCodeLine{00478 }
\DoxyCodeLine{00479   \textcolor{keywordtype}{double} d, highlightRadius = getPixelSize() * HIGHLIGHT\_DISTANCE;}
\DoxyCodeLine{00480 }
\DoxyCodeLine{00481   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonP}} \&skeleton = this-\/>skeleton();}
\DoxyCodeLine{00482   \textcolor{keywordflow}{if} (skeleton) \{}
\DoxyCodeLine{00483     \textcolor{comment}{// Search nearest skeleton entities}}
\DoxyCodeLine{00484 }
\DoxyCodeLine{00485     \textcolor{comment}{// Look for nearest vertex}}
\DoxyCodeLine{00486     \textcolor{keywordtype}{int} v = skeleton-\/>closestVertex(pos, \&d);}
\DoxyCodeLine{00487     \textcolor{keywordflow}{if} (v >= 0 \&\& d < highlightRadius)}
\DoxyCodeLine{00488       m\_svHigh = v;}
\DoxyCodeLine{00489     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00490       \textcolor{comment}{// Look for nearest edge}}
\DoxyCodeLine{00491       \textcolor{keywordtype}{int} e = skeleton-\/>closestEdge(pos, \&d);}
\DoxyCodeLine{00492       \textcolor{keywordflow}{if} (e >= 0 \&\& d < highlightRadius) m\_seHigh = e;}
\DoxyCodeLine{00493     \}}
\DoxyCodeLine{00494   \}}
\DoxyCodeLine{00495 }
\DoxyCodeLine{00496   \textcolor{keywordflow}{if} (m\_svHigh < 0 \&\& m\_seHigh < 0) \{}
\DoxyCodeLine{00497     \textcolor{comment}{// No highlighted skeleton primitive. Mouse position may be}}
\DoxyCodeLine{00498     \textcolor{comment}{// a candidate for vertex addition -\/ snap to mesh if required}}
\DoxyCodeLine{00499     \textcolor{keywordflow}{if} (m\_snapToMesh.getValue()) \{}
\DoxyCodeLine{00500       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_point_t}{TPointD}} \&mvPos = ::closestMeshVertexPos(}
\DoxyCodeLine{00501           pos, \&d);  \textcolor{comment}{// No need to check against closest skeleton vertex,}}
\DoxyCodeLine{00502                      \textcolor{comment}{// since vertex highlighting kicks in at the same time}}
\DoxyCodeLine{00503       \textcolor{keywordflow}{if} (d < highlightRadius)  \textcolor{comment}{// the snapping would take place.}}
\DoxyCodeLine{00504         m\_pos = mvPos;}
\DoxyCodeLine{00505     \}}
\DoxyCodeLine{00506   \}}
\DoxyCodeLine{00507 }
\DoxyCodeLine{00508   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00509 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a31e46f5e54fd20e0dd04024322d8a546}\label{class_plastic_tool_a31e46f5e54fd20e0dd04024322d8a546}} 
\index{PlasticTool@{PlasticTool}!mouseMove\_mesh@{mouseMove\_mesh}}
\index{mouseMove\_mesh@{mouseMove\_mesh}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{mouseMove\_mesh()}{mouseMove\_mesh()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::mouse\+Move\+\_\+mesh (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01010                                                                           \{}
\DoxyCodeLine{01011   \textcolor{comment}{// Track mouse position}}
\DoxyCodeLine{01012   m\_pos = pos;  \textcolor{comment}{// Needs to be done now -\/ ensures m\_pos is valid}}
\DoxyCodeLine{01013 }
\DoxyCodeLine{01014   m\_mvHigh = MeshIndex();  \textcolor{comment}{// Reset highlighted primitives}}
\DoxyCodeLine{01015 }
\DoxyCodeLine{01016   \textcolor{keywordflow}{if} (m\_mi) \{}
\DoxyCodeLine{01017     \textcolor{comment}{// Look for nearest primitive}}
\DoxyCodeLine{01018     std::pair<double, MeshIndex> closestVertex = ::closestVertex(*m\_mi, pos),}
\DoxyCodeLine{01019                                  closestEdge = ::closestEdge(*m\_mi, pos);}
\DoxyCodeLine{01020 }
\DoxyCodeLine{01021     \textcolor{comment}{// Discriminate on fixed metric}}
\DoxyCodeLine{01022     \textcolor{keyword}{const} \textcolor{keywordtype}{double} hDistSq = sq(getPixelSize() * MESH\_HIGHLIGHT\_DISTANCE);}
\DoxyCodeLine{01023 }
\DoxyCodeLine{01024     m\_mvHigh = m\_meHigh = MeshIndex();}
\DoxyCodeLine{01025 }
\DoxyCodeLine{01026     \textcolor{keywordflow}{if} (closestEdge.first < hDistSq) m\_meHigh = closestEdge.second;}
\DoxyCodeLine{01027 }
\DoxyCodeLine{01028     \textcolor{keywordflow}{if} (closestVertex.first < hDistSq)}
\DoxyCodeLine{01029       m\_mvHigh = closestVertex.second, m\_meHigh = MeshIndex();}
\DoxyCodeLine{01030   \}}
\DoxyCodeLine{01031 }
\DoxyCodeLine{01032   assert(!(m\_mvHigh \&\&}
\DoxyCodeLine{01033            m\_meHigh));  \textcolor{comment}{// Vertex and edge highlights are mutually exclusive}}
\DoxyCodeLine{01034 }
\DoxyCodeLine{01035   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{01036 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a5657d4be413aedf4766dc4bcfd930b78}\label{class_plastic_tool_a5657d4be413aedf4766dc4bcfd930b78}} 
\index{PlasticTool@{PlasticTool}!mouseMove\_rigidity@{mouseMove\_rigidity}}
\index{mouseMove\_rigidity@{mouseMove\_rigidity}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{mouseMove\_rigidity()}{mouseMove\_rigidity()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::mouse\+Move\+\_\+rigidity (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00195                                                                              \{}
\DoxyCodeLine{00196   \textcolor{comment}{// Track mouse position}}
\DoxyCodeLine{00197   m\_pos = pos;  \textcolor{comment}{// Needs to be done now -\/ ensures m\_pos is valid}}
\DoxyCodeLine{00198 }
\DoxyCodeLine{00199   \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00200 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a1c3e32a9818ba7b2af19c33fb8f3204e}\label{class_plastic_tool_a1c3e32a9818ba7b2af19c33fb8f3204e}} 
\index{PlasticTool@{PlasticTool}!moveVertex\_build@{moveVertex\_build}}
\index{moveVertex\_build@{moveVertex\_build}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{moveVertex\_build()}{moveVertex\_build()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::move\+Vertex\+\_\+build (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \mbox{\hyperlink{class_t_point_t}{TPointD}} $>$ \&}]{original\+Vxs\+Pos,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos\+Shift }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00643                                                             \{}
\DoxyCodeLine{00644   \textcolor{keywordflow}{if} (!m\_svSel.isEmpty()) \{}
\DoxyCodeLine{00645     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonP}} \&skeleton = this-\/>skeleton();}
\DoxyCodeLine{00646 }
\DoxyCodeLine{00647     \textcolor{comment}{// Move selected vertices}}
\DoxyCodeLine{00648     \textcolor{keywordtype}{int} v, vCount = int(m\_svSel.objects().size());}
\DoxyCodeLine{00649     \textcolor{keywordflow}{for} (v = 0; v != vCount; ++v)}
\DoxyCodeLine{00650       skeleton-\/>moveVertex(m\_svSel.objects()[v], origVxsPos[v] + posShift);}
\DoxyCodeLine{00651 }
\DoxyCodeLine{00652     \textcolor{comment}{// Deformation must be recompiled}}
\DoxyCodeLine{00653     PlasticDeformerStorage::instance()-\/>\mbox{\hyperlink{class_plastic_deformer_storage_a39a845a381c4dde3b1c97295a4df36b9}{invalidateSkeleton}}(}
\DoxyCodeLine{00654         m\_sd.getPointer(), ::skeletonId(), PlasticDeformerStorage::ALL);}
\DoxyCodeLine{00655 }
\DoxyCodeLine{00656     \textcolor{keywordflow}{if} (m\_mode.getIndex() == ANIMATE\_IDX)}
\DoxyCodeLine{00657       \mbox{\hyperlink{class_plastic_tool_a6043dedfdc3c368cb40927e71327f949}{storeDeformation}}();  \textcolor{comment}{// Rebuild deformed skeleton -\/ default values have}}
\DoxyCodeLine{00658                            \textcolor{comment}{// changed}}
\DoxyCodeLine{00659   \}}
\DoxyCodeLine{00660 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a2306de6ee0d7b1bd849a7e72860eb9a1}\label{class_plastic_tool_a2306de6ee0d7b1bd849a7e72860eb9a1}} 
\index{PlasticTool@{PlasticTool}!moveVertex\_mesh@{moveVertex\_mesh}}
\index{moveVertex\_mesh@{moveVertex\_mesh}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{moveVertex\_mesh()}{moveVertex\_mesh()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::move\+Vertex\+\_\+mesh (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \mbox{\hyperlink{class_t_point_t}{TPointD}} $>$ \&}]{original\+Vxs\+Pos,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos\+Shift }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01149                                                            \{}
\DoxyCodeLine{01150   \textcolor{keywordflow}{if} (m\_mvSel.isEmpty() || !m\_mi) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01151 }
\DoxyCodeLine{01152   assert(origVxsPos.size() == m\_mvSel.objects().size());}
\DoxyCodeLine{01153 }
\DoxyCodeLine{01154   \textcolor{comment}{// Move selected vertices}}
\DoxyCodeLine{01155   \mbox{\hyperlink{class_t_mesh_image_p}{TMeshImageP}} mi = \mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01156   assert(m\_mi == mi);}
\DoxyCodeLine{01157 }
\DoxyCodeLine{01158   \textcolor{keywordtype}{int} v, vCount = int(m\_mvSel.objects().size());}
\DoxyCodeLine{01159   \textcolor{keywordflow}{for} (v = 0; v != vCount; ++v) \{}
\DoxyCodeLine{01160     \textcolor{keyword}{const} MeshIndex \&meshIndex = m\_mvSel.objects()[v];}
\DoxyCodeLine{01161 }
\DoxyCodeLine{01162     \mbox{\hyperlink{class_t_texture_mesh}{TTextureMesh}} \&mesh               = *mi-\/>meshes()[meshIndex.m\_meshIdx];}
\DoxyCodeLine{01163     mesh.vertex(meshIndex.m\_idx).P() = origVxsPos[v] + posShift;}
\DoxyCodeLine{01164   \}}
\DoxyCodeLine{01165 }
\DoxyCodeLine{01166   \textcolor{comment}{// Mesh must be recompiled}}
\DoxyCodeLine{01167   PlasticDeformerStorage::instance()-\/>\mbox{\hyperlink{class_plastic_deformer_storage_aa3d8b19da78ccfd0e8a5748d9bd34743}{invalidateMeshImage}}(}
\DoxyCodeLine{01168       mi.getPointer(), PlasticDeformerStorage::MESH);}
\DoxyCodeLine{01169 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_aad3d93c2db31f337a8ad78c62829ab8f}\label{class_plastic_tool_aad3d93c2db31f337a8ad78c62829ab8f}} 
\index{PlasticTool@{PlasticTool}!onActivate@{onActivate}}
\index{onActivate@{onActivate}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{onActivate()}{onActivate()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::on\+Activate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback invoked whenever the tool activates. 



Reimplemented from \mbox{\hyperlink{class_t_tool_ac286a2681633b4db6106596b4f54e53b}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00958                              \{}
\DoxyCodeLine{00959   \textcolor{keywordtype}{bool} ret;}
\DoxyCodeLine{00960   ret = connect(TTool::m\_application-\/>getCurrentFrame(),}
\DoxyCodeLine{00961                 SIGNAL(frameSwitched()), \textcolor{keyword}{this}, SLOT(onFrameSwitched())),}
\DoxyCodeLine{00962   assert(ret);}
\DoxyCodeLine{00963   ret = connect(TTool::m\_application-\/>getCurrentColumn(),}
\DoxyCodeLine{00964                 SIGNAL(columnIndexSwitched()), \textcolor{keyword}{this}, SLOT(onColumnSwitched())),}
\DoxyCodeLine{00965   assert(ret);}
\DoxyCodeLine{00966   ret = connect(TTool::m\_application-\/>getCurrentXsheet(),}
\DoxyCodeLine{00967                 SIGNAL(xsheetChanged()), \textcolor{keyword}{this}, SLOT(onXsheetChanged())),}
\DoxyCodeLine{00968   assert(ret);}
\DoxyCodeLine{00969   ret = connect(TTool::m\_application-\/>getCurrentXsheet(),}
\DoxyCodeLine{00970                 SIGNAL(xsheetSwitched()), \textcolor{keyword}{this}, SLOT(onXsheetChanged())),}
\DoxyCodeLine{00971   assert(ret);}
\DoxyCodeLine{00972 }
\DoxyCodeLine{00973   onSetViewer();}
\DoxyCodeLine{00974   onColumnSwitched();}
\DoxyCodeLine{00975   onFrameSwitched();}
\DoxyCodeLine{00976 }
\DoxyCodeLine{00977   setActive(\textcolor{keyword}{true});}
\DoxyCodeLine{00978 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_aa43c3d522277771d9feb40630aeb6b69}\label{class_plastic_tool_aa43c3d522277771d9feb40630aeb6b69}} 
\index{PlasticTool@{PlasticTool}!onChange@{onChange}}
\index{onChange@{onChange}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{onChange()}{onChange()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::on\+Change (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Updates the tool after a deformation parameter change. It can be used to refresh the tool in ANIMATION mode. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00895                            \{}
\DoxyCodeLine{00896   \textcolor{comment}{// Since parameters are typically coupled, we could pass multiple, consecutive}}
\DoxyCodeLine{00897   \textcolor{comment}{// times in}}
\DoxyCodeLine{00898   \textcolor{comment}{// this notification function. We have to employ counter-\/measures to prevent}}
\DoxyCodeLine{00899   \textcolor{comment}{// multiple}}
\DoxyCodeLine{00900   \textcolor{comment}{// calls from affecting performance.}}
\DoxyCodeLine{00901 }
\DoxyCodeLine{00902   \textcolor{keyword}{static} \textcolor{keywordtype}{bool} refresh = \textcolor{keyword}{false};  \textcolor{comment}{// Accessible from locals since static}}
\DoxyCodeLine{00903 }
\DoxyCodeLine{00904   \textcolor{keyword}{struct }locals \{}
\DoxyCodeLine{00905     \textcolor{keyword}{struct }RefreshFunctor final : \textcolor{keyword}{public} \mbox{\hyperlink{class_t_functor_invoker_1_1_base_functor}{TFunctorInvoker::BaseFunctor}} \{}
\DoxyCodeLine{00906       \textcolor{keywordtype}{void} operator()()\textcolor{keyword}{ override }\{}
\DoxyCodeLine{00907         refresh = \textcolor{keyword}{false};}
\DoxyCodeLine{00908         l\_plasticTool.\mbox{\hyperlink{class_plastic_tool_a8b1ed0256af4be3db212ddd49a360b95}{storeSkeletonId}}();  \textcolor{comment}{// Calls ::sdFrame()}}
\DoxyCodeLine{00909 }
\DoxyCodeLine{00910         \textcolor{comment}{// This is needed to repaint the xsheet (not automatic otherwise)}}
\DoxyCodeLine{00911         TTool::getApplication()-\/>getCurrentObject()-\/>notifyObjectIdChanged(}
\DoxyCodeLine{00912             \textcolor{keyword}{false});}
\DoxyCodeLine{00913       \}}
\DoxyCodeLine{00914     \};}
\DoxyCodeLine{00915   \};  \textcolor{comment}{// locals}}
\DoxyCodeLine{00916 }
\DoxyCodeLine{00917   \textcolor{comment}{// Using invalidate/update and delayed invocation to prevent multiple calls to}}
\DoxyCodeLine{00918   \textcolor{comment}{// ::sdFrame()}}
\DoxyCodeLine{00919   m\_deformedSkeleton.invalidate();}
\DoxyCodeLine{00920 }
\DoxyCodeLine{00921   \textcolor{keywordflow}{if} (!refresh) \{}
\DoxyCodeLine{00922     refresh = \textcolor{keyword}{true};}
\DoxyCodeLine{00923     QMetaObject::invokeMethod(TFunctorInvoker::instance(), \textcolor{stringliteral}{"{}invoke"{}},}
\DoxyCodeLine{00924                               Qt::QueuedConnection,}
\DoxyCodeLine{00925                               Q\_ARG(\textcolor{keywordtype}{void} *, \textcolor{keyword}{new} locals::RefreshFunctor));}
\DoxyCodeLine{00926   \}}
\DoxyCodeLine{00927 }
\DoxyCodeLine{00928   \textcolor{comment}{// Passing through Qt's event system to compress repaints in a single one}}
\DoxyCodeLine{00929   \mbox{\hyperlink{class_t_tool_1_1_viewer}{TTool::Viewer}} *viewer = getViewer();}
\DoxyCodeLine{00930   \textcolor{keywordflow}{if} (viewer)                 \textcolor{comment}{// This goes through paintEvent(),}}
\DoxyCodeLine{00931     viewer-\/>\mbox{\hyperlink{class_t_tool_1_1_viewer_a3c78921157249891a6ec73eb94501d2a}{invalidateAll}}();  \textcolor{comment}{// \(\backslash\)a unlike TTool::invalidate()}}
\DoxyCodeLine{00932 \}}

\end{DoxyCode}


References \mbox{\hyperlink{class_t_tool_1_1_viewer_a3c78921157249891a6ec73eb94501d2a}{TTool\+::\+Viewer\+::invalidate\+All()}}, and \mbox{\hyperlink{l00826}{store\+Skeleton\+Id()}}.

\mbox{\Hypertarget{class_plastic_tool_a33cd82af0673e60dc8b42c1255811944}\label{class_plastic_tool_a33cd82af0673e60dc8b42c1255811944}} 
\index{PlasticTool@{PlasticTool}!onDeactivate@{onDeactivate}}
\index{onDeactivate@{onDeactivate}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{onDeactivate()}{onDeactivate()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::on\+Deactivate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for tool deactivation, includes tool switch. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a00fee58728c1e12fb50846f47d7e9f5e}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00982                                \{}
\DoxyCodeLine{00983   setActive(\textcolor{keyword}{false});}
\DoxyCodeLine{00984 }
\DoxyCodeLine{00985   \textcolor{keywordtype}{bool} ret;}
\DoxyCodeLine{00986   ret = disconnect(TTool::m\_application-\/>getCurrentFrame(),}
\DoxyCodeLine{00987                    SIGNAL(frameSwitched()), \textcolor{keyword}{this}, SLOT(onFrameSwitched())),}
\DoxyCodeLine{00988   assert(ret);}
\DoxyCodeLine{00989   ret =}
\DoxyCodeLine{00990       disconnect(TTool::m\_application-\/>getCurrentColumn(),}
\DoxyCodeLine{00991                  SIGNAL(columnIndexSwitched()), \textcolor{keyword}{this}, SLOT(onColumnSwitched())),}
\DoxyCodeLine{00992   assert(ret);}
\DoxyCodeLine{00993   ret = disconnect(TTool::m\_application-\/>getCurrentXsheet(),}
\DoxyCodeLine{00994                    SIGNAL(xsheetChanged()), \textcolor{keyword}{this}, SLOT(onXsheetChanged())),}
\DoxyCodeLine{00995   assert(ret);}
\DoxyCodeLine{00996   ret = disconnect(TTool::m\_application-\/>getCurrentXsheet(),}
\DoxyCodeLine{00997                    SIGNAL(xsheetSwitched()), \textcolor{keyword}{this}, SLOT(onXsheetChanged())),}
\DoxyCodeLine{00998   assert(ret);}
\DoxyCodeLine{00999 }
\DoxyCodeLine{01000   Viewer *viewer = getViewer();}
\DoxyCodeLine{01001   \textcolor{keywordflow}{if} (viewer) \{}
\DoxyCodeLine{01002     viewer-\/>visualSettings().m\_plasticVisualSettings = \mbox{\hyperlink{struct_plastic_visual_settings}{PlasticVisualSettings}}();}
\DoxyCodeLine{01003     \textcolor{comment}{// Only the mesh visibility is not reset in order to enable to keep the mesh}}
\DoxyCodeLine{01004     \textcolor{comment}{// hidden while using other tools}}
\DoxyCodeLine{01005     viewer-\/>visualSettings().m\_plasticVisualSettings.m\_drawMeshesWireframe =}
\DoxyCodeLine{01006         m\_pvs.\mbox{\hyperlink{struct_plastic_visual_settings_a0eedc983dcb0d83144b509b10f602116}{m\_drawMeshesWireframe}};}
\DoxyCodeLine{01007   \}}
\DoxyCodeLine{01008   m\_sd = \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonDeformationP}}();}
\DoxyCodeLine{01009 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00030}{Plastic\+Visual\+Settings\+::m\+\_\+draw\+Meshes\+Wireframe}}, and \mbox{\hyperlink{l00053}{Image\+Painter\+::\+Visual\+Settings\+::m\+\_\+plastic\+Visual\+Settings}}.

\mbox{\Hypertarget{class_plastic_tool_aae403bfc45fc1110f5f54b311f0aa15c}\label{class_plastic_tool_aae403bfc45fc1110f5f54b311f0aa15c}} 
\index{PlasticTool@{PlasticTool}!onEnter@{onEnter}}
\index{onEnter@{onEnter}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{onEnter()}{onEnter()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::on\+Enter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for the mouse entering the viewer area. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a3e775cfcd05aa3c35048b11fa40ab3e4}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01013 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a81f6017d7c8162ed23921c39f9ae9f8f}\label{class_plastic_tool_a81f6017d7c8162ed23921c39f9ae9f8f}} 
\index{PlasticTool@{PlasticTool}!onLeave@{onLeave}}
\index{onLeave@{onLeave}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{onLeave()}{onLeave()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::on\+Leave (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for the mouse leaving the viewer area. 



Reimplemented from \mbox{\hyperlink{class_t_tool_af7fb05265a94131da081da654e271a22}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01017                           \{}
\DoxyCodeLine{01018   \textcolor{comment}{// Clear visualization vars}}
\DoxyCodeLine{01019   m\_pos    = TConsts::napd;}
\DoxyCodeLine{01020   m\_svHigh = m\_seHigh = -\/1;}
\DoxyCodeLine{01021   m\_mvHigh = m\_meHigh = MeshIndex();}
\DoxyCodeLine{01022 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a8323f7aaf07e52dffd963595b81bd7d8}\label{class_plastic_tool_a8323f7aaf07e52dffd963595b81bd7d8}} 
\index{PlasticTool@{PlasticTool}!onPropertyChanged@{onPropertyChanged}}
\index{onPropertyChanged@{onPropertyChanged}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{onPropertyChanged()}{onPropertyChanged()}}
{\footnotesize\ttfamily bool Plastic\+Tool\+::on\+Property\+Changed (\begin{DoxyParamCaption}\item[{std\+::string}]{property\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

\begin{DoxyVerb} Does the tasks associated to changes in \p propertyName and returns \p
\end{DoxyVerb}
 true; Does the tasks associated to changes in {\ttfamily property\+Name} and returns {\ttfamily true}. 

Reimplemented from \mbox{\hyperlink{class_t_tool_a06694e0586f807c34b18e16341aa9ee2}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01529                                                           \{}
\DoxyCodeLine{01530   \textcolor{keyword}{struct }locals \{}
\DoxyCodeLine{01531     \textcolor{keyword}{static} \textcolor{keywordtype}{bool} alreadyContainsVertexName(\textcolor{keyword}{const} \mbox{\hyperlink{class_plastic_skeleton}{PlasticSkeleton}} \&skel,}
\DoxyCodeLine{01532                                           \textcolor{keyword}{const} QString \&name) \{}
\DoxyCodeLine{01533       \mbox{\hyperlink{structtcg_1_1list_1_1const__iterator}{tcg::list<PlasticSkeletonVertex>::const\_iterator}} vt,}
\DoxyCodeLine{01534           vEnd(skel.vertices().end());}
\DoxyCodeLine{01535       \textcolor{keywordflow}{for} (vt = skel.vertices().begin(); vt != vEnd; ++vt)}
\DoxyCodeLine{01536         \textcolor{keywordflow}{if} (vt-\/>name() == name) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01537       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01538     \}}
\DoxyCodeLine{01539 }
\DoxyCodeLine{01540     \textcolor{keyword}{static} \textcolor{keywordtype}{int} vdCount(\textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{SkDP}} \&sd, \textcolor{keyword}{const} QString \&name) \{}
\DoxyCodeLine{01541       \mbox{\hyperlink{classtcg_1_1any__iterator}{SkD::vx\_iterator}} vxBegin, vxEnd;}
\DoxyCodeLine{01542       sd-\/>\mbox{\hyperlink{class_plastic_skeleton_deformation_a962b5a336a2fbb8e90a878efa201b021}{vdSkeletonVertices}}(name, vxBegin, vxEnd);}
\DoxyCodeLine{01543 }
\DoxyCodeLine{01544       \textcolor{keywordflow}{return} std::distance(vxBegin, vxEnd);}
\DoxyCodeLine{01545     \}}
\DoxyCodeLine{01546   \};  \textcolor{comment}{// locals}}
\DoxyCodeLine{01547 }
\DoxyCodeLine{01548   \textcolor{keywordflow}{if} (propertyName == \textcolor{stringliteral}{"{}mode"{}}) \{}
\DoxyCodeLine{01549     \textcolor{keywordflow}{switch} (m\_mode.getIndex()) \{}
\DoxyCodeLine{01550     \textcolor{keywordflow}{case} MESH\_IDX:}
\DoxyCodeLine{01551     \textcolor{keywordflow}{case} BUILD\_IDX:}
\DoxyCodeLine{01552     \textcolor{keywordflow}{case} RIGIDITY\_IDX:}
\DoxyCodeLine{01553       m\_pvs.\mbox{\hyperlink{struct_plastic_visual_settings_adff7a25870734f8d9e0d56ba0dd7486e}{m\_showOriginalColumn}} = xshColumn();}
\DoxyCodeLine{01554       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01555     \textcolor{keywordflow}{case} ANIMATE\_IDX:}
\DoxyCodeLine{01556       m\_pvs.\mbox{\hyperlink{struct_plastic_visual_settings_adff7a25870734f8d9e0d56ba0dd7486e}{m\_showOriginalColumn}} = 0;}
\DoxyCodeLine{01557 }
\DoxyCodeLine{01558       \textcolor{keywordflow}{if} (m\_svSel.objects().size() > 1) setSkeletonSelection(-\/1);}
\DoxyCodeLine{01559 }
\DoxyCodeLine{01560       \mbox{\hyperlink{class_plastic_tool_a6043dedfdc3c368cb40927e71327f949}{storeDeformation}}();  \textcolor{comment}{// Rebuild deformed skeleton}}
\DoxyCodeLine{01561       \textcolor{keywordflow}{break};}
\DoxyCodeLine{01562     \}}
\DoxyCodeLine{01563 }
\DoxyCodeLine{01564     m\_mode.notifyListeners();  \textcolor{comment}{// You thought that was automatic, eh? BTW, this}}
\DoxyCodeLine{01565                                \textcolor{comment}{// means}}
\DoxyCodeLine{01566     \textcolor{comment}{// we're requesting toolbars to update options visibility}}
\DoxyCodeLine{01567 }
\DoxyCodeLine{01568     onSetViewer();  \textcolor{comment}{// Store m\_pvs in the viewer's visual settings}}
\DoxyCodeLine{01569     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{01570   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == \textcolor{stringliteral}{"{}vertexName"{}}) \{}
\DoxyCodeLine{01571     \textcolor{keywordflow}{if} (m\_sd \&\& m\_svSel >= 0) \{}
\DoxyCodeLine{01572       \textcolor{comment}{// Update the selected vertex's name}}
\DoxyCodeLine{01573       QString newName(QString::fromStdWString(m\_vertexName.getValue()));}
\DoxyCodeLine{01574 }
\DoxyCodeLine{01575       \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonP}} skeleton = this-\/>skeleton();}
\DoxyCodeLine{01576       assert(skeleton);}
\DoxyCodeLine{01577 }
\DoxyCodeLine{01578       \textcolor{keyword}{const} QString \&oldName = skeleton-\/>vertex(m\_svSel).name();}
\DoxyCodeLine{01579 }
\DoxyCodeLine{01580       \textcolor{keywordtype}{bool} doRename = \textcolor{keyword}{true};}
\DoxyCodeLine{01581       \textcolor{keywordflow}{if} (oldName != newName \&\&}
\DoxyCodeLine{01582           !locals::alreadyContainsVertexName(*skeleton, newName) \&\&}
\DoxyCodeLine{01583           m\_sd-\/>\mbox{\hyperlink{class_plastic_skeleton_deformation_a0c73e75c7c1f5fd40ebdeaf3a20f80ad}{vertexDeformation}}(newName) \&\&}
\DoxyCodeLine{01584           locals::vdCount(m\_sd, oldName) == 1)}
\DoxyCodeLine{01585         doRename =}
\DoxyCodeLine{01586             (DVGui::MsgBox(}
\DoxyCodeLine{01587                  tr(\textcolor{stringliteral}{"{}The previous vertex name will be discarded, and all "{}}}
\DoxyCodeLine{01588                     \textcolor{stringliteral}{"{}associated keys will be lost.\(\backslash\)n\(\backslash\)nDo you want to proceed?"{}}),}
\DoxyCodeLine{01589                  QObject::tr(\textcolor{stringliteral}{"{}Ok"{}}), QObject::tr(\textcolor{stringliteral}{"{}Cancel"{}})) == 1);}
\DoxyCodeLine{01590 }
\DoxyCodeLine{01591       \textcolor{keywordflow}{if} (doRename) \{}
\DoxyCodeLine{01592         \mbox{\hyperlink{class_t_undo}{TUndo}} *undo = \textcolor{keyword}{new} SetVertexNameUndo(m\_svSel, newName);}
\DoxyCodeLine{01593         TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{01594 }
\DoxyCodeLine{01595         undo-\/>redo();}
\DoxyCodeLine{01596       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01597         m\_vertexName.setValue(oldName.toStdWString());}
\DoxyCodeLine{01598         m\_vertexName.notifyListeners();}
\DoxyCodeLine{01599       \}}
\DoxyCodeLine{01600     \}}
\DoxyCodeLine{01601   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == \textcolor{stringliteral}{"{}interpolate"{}}) \{}
\DoxyCodeLine{01602     \textcolor{keywordflow}{if} (m\_sd \&\& m\_svSel >= 0) \{}
\DoxyCodeLine{01603       \textcolor{comment}{// Set interpolation property to the associated skeleton vertex}}
\DoxyCodeLine{01604       \textcolor{keywordtype}{int} skelId = ::skeletonId();}
\DoxyCodeLine{01605 }
\DoxyCodeLine{01606       m\_sd-\/>skeleton(skelId)-\/>vertex(m\_svSel).\mbox{\hyperlink{struct_plastic_skeleton_vertex_aaa73bffcd974ad91dcbdf65fc8dedb5f}{m\_interpolate}} =}
\DoxyCodeLine{01607           m\_interpolate.getValue();}
\DoxyCodeLine{01608 }
\DoxyCodeLine{01609       m\_interpolate.notifyListeners();  \textcolor{comment}{// NOTE: This should NOT invoke this}}
\DoxyCodeLine{01610                                         \textcolor{comment}{// function recursively}}
\DoxyCodeLine{01611 }
\DoxyCodeLine{01612       PlasticDeformerStorage::instance()-\/>\mbox{\hyperlink{class_plastic_deformer_storage_a39a845a381c4dde3b1c97295a4df36b9}{invalidateSkeleton}}(}
\DoxyCodeLine{01613           m\_sd.getPointer(), skelId, PlasticDeformerStorage::ALL);}
\DoxyCodeLine{01614     \}}
\DoxyCodeLine{01615   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == \textcolor{stringliteral}{"{}minAngle"{}}) \{}
\DoxyCodeLine{01616     \textcolor{keywordflow}{if} (m\_sd \&\& m\_svSel >= 0) \{}
\DoxyCodeLine{01617       \textcolor{comment}{// Set maxAngle property to the associated skeleton vertex}}
\DoxyCodeLine{01618       \textcolor{keywordtype}{int} skelId = ::skeletonId();}
\DoxyCodeLine{01619 }
\DoxyCodeLine{01620       \textcolor{keywordtype}{bool} ok;}
\DoxyCodeLine{01621       \textcolor{keywordtype}{double} value =}
\DoxyCodeLine{01622           QString::fromStdWString(m\_minAngle.getValue()).toDouble(\&ok);}
\DoxyCodeLine{01623 }
\DoxyCodeLine{01624       \textcolor{keywordflow}{if} (!ok) value = -\/l\_dmax, m\_minAngle.setValue(L\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01625 }
\DoxyCodeLine{01626       m\_sd-\/>skeleton(skelId)-\/>vertex(m\_svSel).m\_minAngle = value;}
\DoxyCodeLine{01627       \textcolor{keywordflow}{if} (m\_mode.getIndex() == ANIMATE\_IDX)}
\DoxyCodeLine{01628         deformedSkeleton().vertex(m\_svSel).m\_minAngle = value;}
\DoxyCodeLine{01629 }
\DoxyCodeLine{01630       m\_minAngle.notifyListeners();  \textcolor{comment}{// NOTE: This should NOT invoke this}}
\DoxyCodeLine{01631                                      \textcolor{comment}{// function recursively}}
\DoxyCodeLine{01632     \}}
\DoxyCodeLine{01633   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (propertyName == \textcolor{stringliteral}{"{}maxAngle"{}}) \{}
\DoxyCodeLine{01634     \textcolor{keywordflow}{if} (m\_sd \&\& m\_svSel >= 0) \{}
\DoxyCodeLine{01635       \textcolor{comment}{// Set maxAngle property to the associated skeleton vertex}}
\DoxyCodeLine{01636       \textcolor{keywordtype}{int} skelId = ::skeletonId();}
\DoxyCodeLine{01637 }
\DoxyCodeLine{01638       \textcolor{keywordtype}{bool} ok;}
\DoxyCodeLine{01639       \textcolor{keywordtype}{double} value =}
\DoxyCodeLine{01640           QString::fromStdWString(m\_maxAngle.getValue()).toDouble(\&ok);}
\DoxyCodeLine{01641 }
\DoxyCodeLine{01642       \textcolor{keywordflow}{if} (!ok) value = l\_dmax, m\_maxAngle.setValue(L\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01643 }
\DoxyCodeLine{01644       m\_sd-\/>skeleton(skelId)-\/>vertex(m\_svSel).\mbox{\hyperlink{struct_plastic_skeleton_vertex_a366f36a145a9c8bd76fef7aaf1a3fd76}{m\_maxAngle}} = value;}
\DoxyCodeLine{01645       \textcolor{keywordflow}{if} (m\_mode.getIndex() == ANIMATE\_IDX)}
\DoxyCodeLine{01646         deformedSkeleton().vertex(m\_svSel).\mbox{\hyperlink{struct_plastic_skeleton_vertex_a366f36a145a9c8bd76fef7aaf1a3fd76}{m\_maxAngle}} = value;}
\DoxyCodeLine{01647 }
\DoxyCodeLine{01648       m\_maxAngle.notifyListeners();  \textcolor{comment}{// NOTE: This should NOT invoke this}}
\DoxyCodeLine{01649                                      \textcolor{comment}{// function recursively}}
\DoxyCodeLine{01650     \}}
\DoxyCodeLine{01651   \}}
\DoxyCodeLine{01652 }
\DoxyCodeLine{01653   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01654 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00551}{Plastic\+Deformer\+Storage\+::invalidate\+Skeleton()}}, \mbox{\hyperlink{l00076}{Plastic\+Skeleton\+Vertex\+::m\+\_\+max\+Angle}}, and \mbox{\hyperlink{l00748}{Plastic\+Skeleton\+Deformation\+::vd\+Skeleton\+Vertices()}}.

\mbox{\Hypertarget{class_plastic_tool_ac3f0077314c29c9d29959100fb3edb04}\label{class_plastic_tool_ac3f0077314c29c9d29959100fb3edb04}} 
\index{PlasticTool@{PlasticTool}!onSetViewer@{onSetViewer}}
\index{onSetViewer@{onSetViewer}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{onSetViewer()}{onSetViewer()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::on\+Set\+Viewer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00944                               \{}
\DoxyCodeLine{00945   Viewer *viewer = getViewer();}
\DoxyCodeLine{00946   \textcolor{keywordflow}{if} (viewer) \{}
\DoxyCodeLine{00947     \mbox{\hyperlink{struct_plastic_visual_settings}{PlasticVisualSettings}} \&pvs =}
\DoxyCodeLine{00948         viewer-\/>visualSettings().m\_plasticVisualSettings;}
\DoxyCodeLine{00949     pvs = m\_pvs;}
\DoxyCodeLine{00950 }
\DoxyCodeLine{00951     \textcolor{comment}{// Force options if needed}}
\DoxyCodeLine{00952     \textcolor{keywordflow}{if} (m\_mode.getIndex() == RIGIDITY\_IDX) pvs.\mbox{\hyperlink{struct_plastic_visual_settings_a65617de53b0d1cc91dc4d3b25f44766f}{m\_drawRigidity}} = \textcolor{keyword}{true};}
\DoxyCodeLine{00953   \}}
\DoxyCodeLine{00954 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a4452953485b1f530335d223583ff9867}\label{class_plastic_tool_a4452953485b1f530335d223583ff9867}} 
\index{PlasticTool@{PlasticTool}!pasteDeformation\_undo@{pasteDeformation\_undo}}
\index{pasteDeformation\_undo@{pasteDeformation\_undo}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{pasteDeformation\_undo}{pasteDeformation\_undo}}
{\footnotesize\ttfamily void Plastic\+Tool\+::paste\+Deformation\+\_\+undo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01226                                         \{}
\DoxyCodeLine{01227   \textcolor{keyword}{const} \mbox{\hyperlink{struct_sk_d_p_mime}{SkDPMime}} *data =}
\DoxyCodeLine{01228       \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{struct_sk_d_p_mime}{SkDPMime}} *\textcolor{keyword}{>}(QApplication::clipboard()-\/>mimeData());}
\DoxyCodeLine{01229   \textcolor{keywordflow}{if} (!data) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01230 }
\DoxyCodeLine{01231   \textcolor{comment}{// Given a skeleton, attempt to assign it to the current stage object}}
\DoxyCodeLine{01232   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *obj = ::stageObject();}
\DoxyCodeLine{01233   assert(obj);}
\DoxyCodeLine{01234 }
\DoxyCodeLine{01235   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonDeformationP}} \&oldSd =}
\DoxyCodeLine{01236       obj-\/>\mbox{\hyperlink{class_t_stage_object_af2c5d9f172e73e4cb09b769700df3acb}{getPlasticSkeletonDeformation}}();}
\DoxyCodeLine{01237   \textcolor{keywordflow}{if} (oldSd) \{}
\DoxyCodeLine{01238     \textcolor{comment}{// A skeleton already exists. Ask the user if it has to be replaced.}}
\DoxyCodeLine{01239     \textcolor{keywordtype}{bool} replace = DVGui::MsgBox(tr(\textcolor{stringliteral}{"{}A group of skeletons already exists for "{}}}
\DoxyCodeLine{01240                                     \textcolor{stringliteral}{"{}current column. Replacing it will also "{}}}
\DoxyCodeLine{01241                                     \textcolor{stringliteral}{"{}substitute any existing vertex "{}}}
\DoxyCodeLine{01242                                     \textcolor{stringliteral}{"{}animation.\(\backslash\)n\(\backslash\)nDo you want to continue?"{}}),}
\DoxyCodeLine{01243                                  tr(\textcolor{stringliteral}{"{}Ok"{}}), tr(\textcolor{stringliteral}{"{}Cancel"{}})) == 1;}
\DoxyCodeLine{01244 }
\DoxyCodeLine{01245     \textcolor{keywordflow}{if} (!replace) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01246   \}}
\DoxyCodeLine{01247 }
\DoxyCodeLine{01248   \textcolor{comment}{// Clone the whole skeleton deformation (skeleton itself included)}}
\DoxyCodeLine{01249   \mbox{\hyperlink{class_t_smart_pointer_t}{SkDP}} newSd(\textcolor{keyword}{new} \mbox{\hyperlink{class_plastic_skeleton_deformation}{PlasticSkeletonDeformation}}(*data-\/>m\_sd));}
\DoxyCodeLine{01250 }
\DoxyCodeLine{01251   \textcolor{comment}{// Insert the undo and perform the op}}
\DoxyCodeLine{01252   TUndoManager::manager()-\/>add(\textcolor{keyword}{new} PasteDeformationUndo(newSd));}
\DoxyCodeLine{01253 }
\DoxyCodeLine{01254   obj-\/>\mbox{\hyperlink{class_t_stage_object_a6c2902531a1046dc91618c78c47d56c6}{setPlasticSkeletonDeformation}}(newSd);}
\DoxyCodeLine{01255   ::invalidateXsheet();}
\DoxyCodeLine{01256 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a6ea5da9f1dce47940f8b4124792e90c5}\label{class_plastic_tool_a6ea5da9f1dce47940f8b4124792e90c5}} 
\index{PlasticTool@{PlasticTool}!pasteSkeleton\_undo@{pasteSkeleton\_undo}}
\index{pasteSkeleton\_undo@{pasteSkeleton\_undo}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{pasteSkeleton\_undo}{pasteSkeleton\_undo}}
{\footnotesize\ttfamily void Plastic\+Tool\+::paste\+Skeleton\+\_\+undo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01187                                      \{}
\DoxyCodeLine{01188   \textcolor{keyword}{const} \mbox{\hyperlink{struct_plastic_skeleton_p_mime}{PlasticSkeletonPMime}} *data = \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{struct_plastic_skeleton_p_mime}{PlasticSkeletonPMime}} *\textcolor{keyword}{>}(}
\DoxyCodeLine{01189       QApplication::clipboard()-\/>mimeData());}
\DoxyCodeLine{01190   \textcolor{keywordflow}{if} (!data) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01191 }
\DoxyCodeLine{01192   \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonP}} newSkeleton(\textcolor{keyword}{new} \mbox{\hyperlink{class_plastic_skeleton}{PlasticSkeleton}}(*data-\/>m\_skeleton));}
\DoxyCodeLine{01193 }
\DoxyCodeLine{01194   touchDeformation();}
\DoxyCodeLine{01195   assert(m\_sd);}
\DoxyCodeLine{01196 }
\DoxyCodeLine{01197   \textcolor{keywordtype}{int} skelId                      = ::skeletonId();}
\DoxyCodeLine{01198   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonP}} \&oldSkel = m\_sd-\/>skeleton(skelId);}
\DoxyCodeLine{01199 }
\DoxyCodeLine{01200   \textcolor{keywordflow}{if} (oldSkel \&\& !oldSkel-\/>empty()) \{}
\DoxyCodeLine{01201     \textcolor{comment}{// In case there exists a not-\/empty skeleton, add a NEW skeleton}}
\DoxyCodeLine{01202     addSkeleton\_undo(newSkeleton);}
\DoxyCodeLine{01203   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01204     \mbox{\hyperlink{class_t_undo_manager}{TUndoManager}} *manager = TUndoManager::manager();}
\DoxyCodeLine{01205     manager-\/>beginBlock();}
\DoxyCodeLine{01206     \{}
\DoxyCodeLine{01207       removeSkeleton\_undo(skelId);  \textcolor{comment}{// No problem -\/ it's eventually empty}}
\DoxyCodeLine{01208       addSkeleton\_undo(skelId, newSkeleton.getPointer());}
\DoxyCodeLine{01209     \}}
\DoxyCodeLine{01210     manager-\/>endBlock();}
\DoxyCodeLine{01211   \}}
\DoxyCodeLine{01212 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a1b7ba485907f0c2879a5219ac5a81364}\label{class_plastic_tool_a1b7ba485907f0c2879a5219ac5a81364}} 
\index{PlasticTool@{PlasticTool}!removeSkeleton@{removeSkeleton}}
\index{removeSkeleton@{removeSkeleton}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{removeSkeleton()}{removeSkeleton()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::remove\+Skeleton (\begin{DoxyParamCaption}\item[{int}]{skel\+Id }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00791                                            \{}
\DoxyCodeLine{00792   \textcolor{comment}{// Remove the entire deformation}}
\DoxyCodeLine{00793   clearSkeletonSelections();}
\DoxyCodeLine{00794 }
\DoxyCodeLine{00795   \textcolor{keywordflow}{if} (m\_sd) \{}
\DoxyCodeLine{00796     \textcolor{comment}{// in order to solve the crash issue \#1967, try releasing deformer data here}}
\DoxyCodeLine{00797     PlasticDeformerStorage::instance()-\/>\mbox{\hyperlink{class_plastic_deformer_storage_a20ed433b60ee667fc4663652e5e0f6b4}{releaseSkeletonData}}(}
\DoxyCodeLine{00798         stageObject()-\/>getPlasticSkeletonDeformation().getPointer(), skelId);}
\DoxyCodeLine{00799     m\_sd-\/>\mbox{\hyperlink{class_plastic_skeleton_deformation_a9782eb7dfdd1f1d31f71a22488e1fd6f}{detach}}(skelId);}
\DoxyCodeLine{00800     \textcolor{keywordflow}{if} (m\_sd-\/>empty())}
\DoxyCodeLine{00801       stageObject()-\/>\mbox{\hyperlink{class_t_stage_object_a6c2902531a1046dc91618c78c47d56c6}{setPlasticSkeletonDeformation}}(}
\DoxyCodeLine{00802           \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonDeformationP}}());}
\DoxyCodeLine{00803 }
\DoxyCodeLine{00804     ::invalidateXsheet();  \textcolor{comment}{// Updates m\_sd}}
\DoxyCodeLine{00805     emit skelIdsListChanged();}
\DoxyCodeLine{00806   \}}
\DoxyCodeLine{00807 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a09a8a6f014acfdcaec2841613a3c7e72}\label{class_plastic_tool_a09a8a6f014acfdcaec2841613a3c7e72}} 
\index{PlasticTool@{PlasticTool}!removeSkeleton\_undo@{removeSkeleton\_undo}}
\index{removeSkeleton\_undo@{removeSkeleton\_undo}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{removeSkeleton\_undo()}{removeSkeleton\_undo()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::remove\+Skeleton\+\_\+undo (\begin{DoxyParamCaption}\item[{int}]{skel\+Id }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00893                                                 \{}
\DoxyCodeLine{00894   \mbox{\hyperlink{class_t_undo}{TUndo}} *op = \textcolor{keyword}{new} RemoveSkeletonUndo(skelId);}
\DoxyCodeLine{00895   TUndoManager::manager()-\/>add(op);}
\DoxyCodeLine{00896 }
\DoxyCodeLine{00897   op-\/>redo();}
\DoxyCodeLine{00898 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a76fc66f44e8be1d0ff4fa9b00a8de530}\label{class_plastic_tool_a76fc66f44e8be1d0ff4fa9b00a8de530}} 
\index{PlasticTool@{PlasticTool}!removeSkeleton\_withKeyframes\_undo@{removeSkeleton\_withKeyframes\_undo}}
\index{removeSkeleton\_withKeyframes\_undo@{removeSkeleton\_withKeyframes\_undo}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{removeSkeleton\_withKeyframes\_undo()}{removeSkeleton\_withKeyframes\_undo()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::remove\+Skeleton\+\_\+with\+Keyframes\+\_\+undo (\begin{DoxyParamCaption}\item[{int}]{skel\+Id }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00902                                                               \{}
\DoxyCodeLine{00903   \mbox{\hyperlink{class_t_undo}{TUndo}} *op = \textcolor{keyword}{new} RemoveSkeletonUndo\_WithKeyframes(skelId);}
\DoxyCodeLine{00904   TUndoManager::manager()-\/>add(op);}
\DoxyCodeLine{00905 }
\DoxyCodeLine{00906   op-\/>redo();}
\DoxyCodeLine{00907 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_aef54680fcde64e3cca4aea1ddc19b4f1}\label{class_plastic_tool_aef54680fcde64e3cca4aea1ddc19b4f1}} 
\index{PlasticTool@{PlasticTool}!removeVertex@{removeVertex}}
\index{removeVertex@{removeVertex}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{removeVertex()}{removeVertex()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::remove\+Vertex (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00725                                \{}
\DoxyCodeLine{00726   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonP}} \&skeleton = this-\/>skeleton();}
\DoxyCodeLine{00727   assert(skeleton \&\& m\_svSel.hasSingleObject() \&\& m\_svSel > 0);}
\DoxyCodeLine{00728 }
\DoxyCodeLine{00729   l\_suspendParamsObservation =}
\DoxyCodeLine{00730       \textcolor{keyword}{true};  \textcolor{comment}{// Some vertex parameters change during removal.}}
\DoxyCodeLine{00731              \textcolor{comment}{// We need to avoid updating WHILE removing.}}
\DoxyCodeLine{00732   skeleton-\/>removeVertex(m\_svSel);}
\DoxyCodeLine{00733   PlasticDeformerStorage::instance()-\/>\mbox{\hyperlink{class_plastic_deformer_storage_a39a845a381c4dde3b1c97295a4df36b9}{invalidateSkeleton}}(}
\DoxyCodeLine{00734       m\_sd.getPointer(), ::skeletonId(), PlasticDeformerStorage::ALL);}
\DoxyCodeLine{00735 }
\DoxyCodeLine{00736   l\_suspendParamsObservation = \textcolor{keyword}{false};}
\DoxyCodeLine{00737   \mbox{\hyperlink{class_plastic_tool_aa43c3d522277771d9feb40630aeb6b69}{onChange}}();}
\DoxyCodeLine{00738 }
\DoxyCodeLine{00739   clearSkeletonSelections();  \textcolor{comment}{// Remove mesh references -\/ could be}}
\DoxyCodeLine{00740                               \textcolor{comment}{// invalidated...}}
\DoxyCodeLine{00741 }
\DoxyCodeLine{00742   \textcolor{comment}{// Xsheet change notification is necessary to inform the Function Editor that}}
\DoxyCodeLine{00743   \textcolor{comment}{// some}}
\DoxyCodeLine{00744   \textcolor{comment}{// channels (the vertex deformation ones) have been removed}}
\DoxyCodeLine{00745   TTool::getApplication()}
\DoxyCodeLine{00746       -\/>getCurrentXsheet()}
\DoxyCodeLine{00747       -\/>notifyXsheetChanged();  \textcolor{comment}{// NOTE: This COULD invoke invalidate()...}}
\DoxyCodeLine{00748 }
\DoxyCodeLine{00749   \textcolor{comment}{// Rebuild the stage object's keyframes table}}
\DoxyCodeLine{00750   stageObject()-\/>\mbox{\hyperlink{class_t_stage_object_a39d6649e151c9c4ffa3a4259be1724a7}{updateKeyframes}}();}
\DoxyCodeLine{00751 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_aac8bc66ff560eeec22a02a2fa2610b12}\label{class_plastic_tool_aac8bc66ff560eeec22a02a2fa2610b12}} 
\index{PlasticTool@{PlasticTool}!reset@{reset}}
\index{reset@{reset}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01523                         \{}
\DoxyCodeLine{01524   \textcolor{comment}{// NOTE: This is an inherited virtual. Please leave it even if it's empty.}}
\DoxyCodeLine{01525 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a0ab6897095a480405d76a8ae53129734}\label{class_plastic_tool_a0ab6897095a480405d76a8ae53129734}} 
\index{PlasticTool@{PlasticTool}!setGlobalKey\_undo@{setGlobalKey\_undo}}
\index{setGlobalKey\_undo@{setGlobalKey\_undo}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{setGlobalKey\_undo}{setGlobalKey\_undo}}
{\footnotesize\ttfamily void Plastic\+Tool\+::set\+Global\+Key\+\_\+undo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01329                                     \{}
\DoxyCodeLine{01330   keyFunc\_undo(\&PlasticTool::setGlobalKey);}
\DoxyCodeLine{01331 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a1a8aa43f4b1b7e2ce53cc39093da6d83}\label{class_plastic_tool_a1a8aa43f4b1b7e2ce53cc39093da6d83}} 
\index{PlasticTool@{PlasticTool}!setGlobalRestKey\_undo@{setGlobalRestKey\_undo}}
\index{setGlobalRestKey\_undo@{setGlobalRestKey\_undo}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{setGlobalRestKey\_undo}{setGlobalRestKey\_undo}}
{\footnotesize\ttfamily void Plastic\+Tool\+::set\+Global\+Rest\+Key\+\_\+undo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01339                                         \{}
\DoxyCodeLine{01340   keyFunc\_undo(\&PlasticTool::setGlobalRestKey);}
\DoxyCodeLine{01341 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_ae84e7929e0693974d7e9f2b4f038c61e}\label{class_plastic_tool_ae84e7929e0693974d7e9f2b4f038c61e}} 
\index{PlasticTool@{PlasticTool}!setKey\_undo@{setKey\_undo}}
\index{setKey\_undo@{setKey\_undo}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{setKey\_undo}{setKey\_undo}}
{\footnotesize\ttfamily void Plastic\+Tool\+::set\+Key\+\_\+undo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01325 \{ keyFunc\_undo(\&PlasticTool::setKey); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_ade4094d2c8562000a9df3756b7794941}\label{class_plastic_tool_ade4094d2c8562000a9df3756b7794941}} 
\index{PlasticTool@{PlasticTool}!setMeshEdgesSelection@{setMeshEdgesSelection}}
\index{setMeshEdgesSelection@{setMeshEdgesSelection}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{setMeshEdgesSelection()}{setMeshEdgesSelection()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::set\+Mesh\+Edges\+Selection (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_multiple_selection}{Mesh\+Selection}} \&}]{e\+Sel }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00997                                                                  \{}
\DoxyCodeLine{00998   setMeshSelection(m\_meSel, eSel), setMeshSelection(m\_mvSel, MeshSelection());}
\DoxyCodeLine{00999 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_aa3293f4c39cbdba8417dd07afe9b7854}\label{class_plastic_tool_aa3293f4c39cbdba8417dd07afe9b7854}} 
\index{PlasticTool@{PlasticTool}!setMeshVertexesSelection@{setMeshVertexesSelection}}
\index{setMeshVertexesSelection@{setMeshVertexesSelection}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{setMeshVertexesSelection()}{setMeshVertexesSelection()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::set\+Mesh\+Vertexes\+Selection (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_multiple_selection}{Mesh\+Selection}} \&}]{v\+Sel }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00984                                                                     \{}
\DoxyCodeLine{00985   setMeshSelection(m\_meSel, MeshSelection()), setMeshSelection(m\_mvSel, vSel);}
\DoxyCodeLine{00986 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a942fc7fe51ebc590095c2b6c52716339}\label{class_plastic_tool_a942fc7fe51ebc590095c2b6c52716339}} 
\index{PlasticTool@{PlasticTool}!setRestKey\_undo@{setRestKey\_undo}}
\index{setRestKey\_undo@{setRestKey\_undo}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{setRestKey\_undo}{setRestKey\_undo}}
{\footnotesize\ttfamily void Plastic\+Tool\+::set\+Rest\+Key\+\_\+undo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01335 \{ keyFunc\_undo(\&PlasticTool::setRestKey); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_af05d6e151732ac3cd1459aac30df1089}\label{class_plastic_tool_af05d6e151732ac3cd1459aac30df1089}} 
\index{PlasticTool@{PlasticTool}!setSkeletonSelection@{setSkeletonSelection}}
\index{setSkeletonSelection@{setSkeletonSelection}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{setSkeletonSelection()}{setSkeletonSelection()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::set\+Skeleton\+Selection (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_plastic_vertex_selection}{Plastic\+Vertex\+Selection}} \&}]{v\+Sel }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01088                                                                          \{}
\DoxyCodeLine{01089   \textcolor{keywordflow}{if} (vSel.isEmpty()) \{}
\DoxyCodeLine{01090     m\_svSel.selectNone();}
\DoxyCodeLine{01091     m\_svSel.makeNotCurrent();}
\DoxyCodeLine{01092 }
\DoxyCodeLine{01093     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01094   \}}
\DoxyCodeLine{01095 }
\DoxyCodeLine{01096   assert(m\_sd);}
\DoxyCodeLine{01097 }
\DoxyCodeLine{01098   m\_svSel.skeletonId() = m\_skelId;}
\DoxyCodeLine{01099   m\_svSel.setObjects(vSel.objects());}
\DoxyCodeLine{01100 }
\DoxyCodeLine{01101   m\_svSel.notifyView();}
\DoxyCodeLine{01102   m\_svSel.makeCurrent();}
\DoxyCodeLine{01103 }
\DoxyCodeLine{01104   \textcolor{comment}{// Okay, the following is cheap -\/ we have to update the Function Editor}}
\DoxyCodeLine{01105   \textcolor{comment}{// (specifically)}}
\DoxyCodeLine{01106   \textcolor{comment}{// since current vertex is shown in a special color. We know that the same}}
\DoxyCodeLine{01107   \textcolor{comment}{// happens for}}
\DoxyCodeLine{01108   \textcolor{comment}{// the current stage object, so... we'll attach there.}}
\DoxyCodeLine{01109   TTool::getApplication()-\/>getCurrentObject()-\/>notifyObjectIdChanged(}
\DoxyCodeLine{01110       \textcolor{keyword}{false});  \textcolor{comment}{// Carry on, you've seen nothing ;)}}
\DoxyCodeLine{01111 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_af2a6e617b465cdacab431c8e63417362}\label{class_plastic_tool_af2a6e617b465cdacab431c8e63417362}} 
\index{PlasticTool@{PlasticTool}!setVertexName@{setVertexName}}
\index{setVertexName@{setVertexName}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{setVertexName()}{setVertexName()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::set\+Vertex\+Name (\begin{DoxyParamCaption}\item[{QString \&}]{name }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01345                                              \{}
\DoxyCodeLine{01346   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonP}} \&skeleton = this-\/>skeleton();}
\DoxyCodeLine{01347   assert(skeleton \&\& m\_svSel.hasSingleObject() \&\& m\_svSel > 0);}
\DoxyCodeLine{01348 }
\DoxyCodeLine{01349   \textcolor{comment}{// Update the selected vertex's name}}
\DoxyCodeLine{01350   \textcolor{keywordflow}{while} (!m\_sd-\/>skeleton(::skeletonId())-\/>setVertexName(m\_svSel, name))}
\DoxyCodeLine{01351     name += \textcolor{stringliteral}{"{}\_"{}};}
\DoxyCodeLine{01352 }
\DoxyCodeLine{01353   m\_vertexName.setValue(name.toStdWString());}
\DoxyCodeLine{01354   m\_vertexName.notifyListeners();  \textcolor{comment}{// NOTE: This should NOT invoke this function}}
\DoxyCodeLine{01355                                    \textcolor{comment}{// recursively}}
\DoxyCodeLine{01356 }
\DoxyCodeLine{01357   \textcolor{comment}{// Re-\/store the deformed skeleton. This is necessary since any follow-\/up}}
\DoxyCodeLine{01358   \textcolor{comment}{// vertex}}
\DoxyCodeLine{01359   \textcolor{comment}{// manipulation must refer the correct vd name.}}
\DoxyCodeLine{01360   m\_deformedSkeleton.invalidate();}
\DoxyCodeLine{01361 }
\DoxyCodeLine{01362   PlasticDeformerStorage::instance()-\/>\mbox{\hyperlink{class_plastic_deformer_storage_a39a845a381c4dde3b1c97295a4df36b9}{invalidateSkeleton}}(}
\DoxyCodeLine{01363       m\_sd.getPointer(), ::skeletonId(), PlasticDeformerStorage::NONE);}
\DoxyCodeLine{01364 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a1513100450c878b4b7692463ccc1359c}\label{class_plastic_tool_a1513100450c878b4b7692463ccc1359c}} 
\index{PlasticTool@{PlasticTool}!skeleton@{skeleton}}
\index{skeleton@{skeleton}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{skeleton()}{skeleton()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_smart_pointer_t}{Plastic\+SkeletonP}} Plastic\+Tool\+::skeleton (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00760                                              \{}
\DoxyCodeLine{00761   \textcolor{keywordflow}{return} m\_sd ? m\_sd-\/>skeleton(::sdFrame()) : \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonP}}();}
\DoxyCodeLine{00762 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a75f0f123268e2c257b841d294a72bd04}\label{class_plastic_tool_a75f0f123268e2c257b841d294a72bd04}} 
\index{PlasticTool@{PlasticTool}!skeletonVertexSelection@{skeletonVertexSelection}}
\index{skeletonVertexSelection@{skeletonVertexSelection}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{skeletonVertexSelection()}{skeletonVertexSelection()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_plastic_vertex_selection}{Plastic\+Vertex\+Selection}} \& Plastic\+Tool\+::skeleton\+Vertex\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00225                                                                 \{}
\DoxyCodeLine{00226     \textcolor{keywordflow}{return} m\_svSel;}
\DoxyCodeLine{00227   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a4ac14fb8348dde9ad9ad1ea8c87e6f07}\label{class_plastic_tool_a4ac14fb8348dde9ad9ad1ea8c87e6f07}} 
\index{PlasticTool@{PlasticTool}!splitEdge\_mesh\_undo@{splitEdge\_mesh\_undo}}
\index{splitEdge\_mesh\_undo@{splitEdge\_mesh\_undo}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{splitEdge\_mesh\_undo}{splitEdge\_mesh\_undo}}
{\footnotesize\ttfamily void Plastic\+Tool\+::split\+Edge\+\_\+mesh\+\_\+undo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01213                                       \{}
\DoxyCodeLine{01214   \textcolor{keywordflow}{if} (!(m\_mi \&\& m\_meSel.hasSingleObject())) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01215 }
\DoxyCodeLine{01216   std::unique\_ptr<TUndo> undo(\textcolor{keyword}{new} SplitEdgeUndo(m\_meSel.objects().front()));}
\DoxyCodeLine{01217   undo-\/>redo();}
\DoxyCodeLine{01218 }
\DoxyCodeLine{01219   TUndoManager::manager()-\/>add(undo.release());}
\DoxyCodeLine{01220 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a6043dedfdc3c368cb40927e71327f949}\label{class_plastic_tool_a6043dedfdc3c368cb40927e71327f949}} 
\index{PlasticTool@{PlasticTool}!storeDeformation@{storeDeformation}}
\index{storeDeformation@{storeDeformation}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{storeDeformation()}{storeDeformation()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::store\+Deformation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Stores deformation of current column (copying its reference) 
\begin{DoxyCode}{0}
\DoxyCodeLine{00796                                    \{}
\DoxyCodeLine{00797   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{SkDP}} \&sd = stageObject()-\/>\mbox{\hyperlink{class_t_stage_object_af2c5d9f172e73e4cb09b769700df3acb}{getPlasticSkeletonDeformation}}();}
\DoxyCodeLine{00798   \textcolor{keywordflow}{if} (m\_sd != sd) \{}
\DoxyCodeLine{00799     clearSkeletonSelections();}
\DoxyCodeLine{00800 }
\DoxyCodeLine{00801     \textcolor{keywordflow}{if} (m\_sd) \{}
\DoxyCodeLine{00802       m\_sd-\/>removeObserver(\textcolor{keyword}{this});}
\DoxyCodeLine{00803       m\_skelIdRelay.setParam(TDoubleParamP());}
\DoxyCodeLine{00804     \}}
\DoxyCodeLine{00805 }
\DoxyCodeLine{00806     \textcolor{comment}{// Store the deformation, retrieving it from current column stage object}}
\DoxyCodeLine{00807     m\_sd = sd;}
\DoxyCodeLine{00808 }
\DoxyCodeLine{00809     \textcolor{keywordflow}{if} (m\_sd) \{}
\DoxyCodeLine{00810       m\_sd-\/>addObserver(\textcolor{keyword}{this});}
\DoxyCodeLine{00811       m\_skelIdRelay.setParam(m\_sd-\/>\mbox{\hyperlink{class_plastic_skeleton_deformation_a2d2e90162bacd30096e66aa3c333f5f4}{skeletonIdsParam}}());}
\DoxyCodeLine{00812     \}}
\DoxyCodeLine{00813 }
\DoxyCodeLine{00814     m\_skelIdRelay.notifyListeners();}
\DoxyCodeLine{00815   \}}
\DoxyCodeLine{00816 }
\DoxyCodeLine{00817   \mbox{\hyperlink{class_plastic_tool_a8b1ed0256af4be3db212ddd49a360b95}{storeSkeletonId}}();}
\DoxyCodeLine{00818   \textcolor{keywordflow}{if} (m\_mode.getIndex() == ANIMATE\_IDX)}
\DoxyCodeLine{00819     m\_deformedSkeleton.invalidate();  \textcolor{comment}{// Store the deformed skeleton too}}
\DoxyCodeLine{00820 }
\DoxyCodeLine{00821   emit skelIdsListChanged();}
\DoxyCodeLine{00822 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01144}{TStage\+Object\+::get\+Plastic\+Skeleton\+Deformation()}}.

\mbox{\Hypertarget{class_plastic_tool_a1ec21ce252475eb8085e166bf4624c37}\label{class_plastic_tool_a1ec21ce252475eb8085e166bf4624c37}} 
\index{PlasticTool@{PlasticTool}!storeMeshImage@{storeMeshImage}}
\index{storeMeshImage@{storeMeshImage}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{storeMeshImage()}{storeMeshImage()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::store\+Mesh\+Image (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00921                                  \{}
\DoxyCodeLine{00922   \mbox{\hyperlink{class_t_mesh_image_p}{TMeshImageP}} mi = \mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00923 }
\DoxyCodeLine{00924   \textcolor{keywordflow}{if} (mi != m\_mi) \{}
\DoxyCodeLine{00925     m\_mi = mi;}
\DoxyCodeLine{00926     clearMeshSelections();}
\DoxyCodeLine{00927   \}}
\DoxyCodeLine{00928 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a8b1ed0256af4be3db212ddd49a360b95}\label{class_plastic_tool_a8b1ed0256af4be3db212ddd49a360b95}} 
\index{PlasticTool@{PlasticTool}!storeSkeletonId@{storeSkeletonId}}
\index{storeSkeletonId@{storeSkeletonId}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{storeSkeletonId()}{storeSkeletonId()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::store\+Skeleton\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Stores current skeleton id associated to current deformation 
\begin{DoxyCode}{0}
\DoxyCodeLine{00826                                   \{}
\DoxyCodeLine{00827   \textcolor{keywordtype}{int} skelId = m\_sd ? m\_sd-\/>\mbox{\hyperlink{class_plastic_skeleton_deformation_a2d2e90162bacd30096e66aa3c333f5f4}{skeletonIdsParam}}()-\/>getValue(::sdFrame())}
\DoxyCodeLine{00828                     : -\/(std::numeric\_limits<int>::max)();}
\DoxyCodeLine{00829   \textcolor{keywordflow}{if} (m\_skelId != skelId) \{}
\DoxyCodeLine{00830     m\_skelId = skelId;}
\DoxyCodeLine{00831     clearSkeletonSelections();}
\DoxyCodeLine{00832 }
\DoxyCodeLine{00833     emit skelIdChanged();}
\DoxyCodeLine{00834   \}}
\DoxyCodeLine{00835 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00895}{on\+Change()}}.

\mbox{\Hypertarget{class_plastic_tool_a46eed34176efc8d18e836a6eeead7509}\label{class_plastic_tool_a46eed34176efc8d18e836a6eeead7509}} 
\index{PlasticTool@{PlasticTool}!swapEdge\_mesh\_undo@{swapEdge\_mesh\_undo}}
\index{swapEdge\_mesh\_undo@{swapEdge\_mesh\_undo}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{swapEdge\_mesh\_undo}{swapEdge\_mesh\_undo}}
{\footnotesize\ttfamily void Plastic\+Tool\+::swap\+Edge\+\_\+mesh\+\_\+undo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01173                                      \{}
\DoxyCodeLine{01174   \textcolor{keywordflow}{if} (!(m\_mi \&\& m\_meSel.hasSingleObject())) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01175 }
\DoxyCodeLine{01176   \textcolor{comment}{// Test current edge swapability}}
\DoxyCodeLine{01177   \{}
\DoxyCodeLine{01178     \textcolor{keyword}{const} MeshIndex \&eIdx    = m\_meSel.objects().front();}
\DoxyCodeLine{01179     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_texture_mesh}{TTextureMesh}} \&mesh = *m\_mi-\/>meshes()[eIdx.m\_meshIdx];}
\DoxyCodeLine{01180 }
\DoxyCodeLine{01181     \textcolor{keywordflow}{if} (!::testSwapEdge(mesh, eIdx.m\_idx)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01182   \}}
\DoxyCodeLine{01183 }
\DoxyCodeLine{01184   \textcolor{comment}{// Perform operation}}
\DoxyCodeLine{01185   std::unique\_ptr<TUndo> undo(\textcolor{keyword}{new} SwapEdgeUndo(m\_meSel.objects().front()));}
\DoxyCodeLine{01186   undo-\/>redo();}
\DoxyCodeLine{01187 }
\DoxyCodeLine{01188   TUndoManager::manager()-\/>add(undo.release());}
\DoxyCodeLine{01189 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a5f6c8ddd027283d264cc540d3dd1d5f8}\label{class_plastic_tool_a5f6c8ddd027283d264cc540d3dd1d5f8}} 
\index{PlasticTool@{PlasticTool}!toggleMeshEdgesSelection@{toggleMeshEdgesSelection}}
\index{toggleMeshEdgesSelection@{toggleMeshEdgesSelection}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{toggleMeshEdgesSelection()}{toggleMeshEdgesSelection()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::toggle\+Mesh\+Edges\+Selection (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_multiple_selection}{Mesh\+Selection}} \&}]{e\+Sel }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01003                                                                     \{}
\DoxyCodeLine{01004   toggleMeshSelection(m\_meSel, eSel),}
\DoxyCodeLine{01005       setMeshSelection(m\_mvSel, MeshSelection());}
\DoxyCodeLine{01006 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_adb779ca24e311b46323e036b74d9b7ca}\label{class_plastic_tool_adb779ca24e311b46323e036b74d9b7ca}} 
\index{PlasticTool@{PlasticTool}!toggleMeshVertexesSelection@{toggleMeshVertexesSelection}}
\index{toggleMeshVertexesSelection@{toggleMeshVertexesSelection}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{toggleMeshVertexesSelection()}{toggleMeshVertexesSelection()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::toggle\+Mesh\+Vertexes\+Selection (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_multiple_selection}{Mesh\+Selection}} \&}]{v\+Sel }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00990                                                                        \{}
\DoxyCodeLine{00991   setMeshSelection(m\_meSel, MeshSelection()),}
\DoxyCodeLine{00992       toggleMeshSelection(m\_mvSel, vSel);}
\DoxyCodeLine{00993 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_aebe8509d4cc3a8961ec1d64cd94a64a0}\label{class_plastic_tool_aebe8509d4cc3a8961ec1d64cd94a64a0}} 
\index{PlasticTool@{PlasticTool}!toggleSkeletonSelection@{toggleSkeletonSelection}}
\index{toggleSkeletonSelection@{toggleSkeletonSelection}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{toggleSkeletonSelection()}{toggleSkeletonSelection()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::toggle\+Skeleton\+Selection (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_plastic_vertex_selection}{Plastic\+Vertex\+Selection}} \&}]{v\+Sel }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01116                                             \{}
\DoxyCodeLine{01117   \textcolor{keyword}{const} std::vector<int> \&storedIdxs = m\_svSel.objects();}
\DoxyCodeLine{01118   \textcolor{keyword}{const} std::vector<int> \&addedIdxs  = addition.objects();}
\DoxyCodeLine{01119 }
\DoxyCodeLine{01120   \textcolor{comment}{// Build new selection}}
\DoxyCodeLine{01121   std::vector<int> selectedIdxs;}
\DoxyCodeLine{01122 }
\DoxyCodeLine{01123   \textcolor{keywordflow}{if} (m\_svSel.contains(addition)) \{}
\DoxyCodeLine{01124     std::set\_difference(storedIdxs.begin(), storedIdxs.end(), addedIdxs.begin(),}
\DoxyCodeLine{01125                         addedIdxs.end(), std::back\_inserter(selectedIdxs));}
\DoxyCodeLine{01126   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01127     std::set\_union(storedIdxs.begin(), storedIdxs.end(), addedIdxs.begin(),}
\DoxyCodeLine{01128                    addedIdxs.end(), std::back\_inserter(selectedIdxs));}
\DoxyCodeLine{01129   \}}
\DoxyCodeLine{01130 }
\DoxyCodeLine{01131   setSkeletonSelection(selectedIdxs);}
\DoxyCodeLine{01132 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_ac0c5fb8452acba1fd9f03b865296463b}\label{class_plastic_tool_ac0c5fb8452acba1fd9f03b865296463b}} 
\index{PlasticTool@{PlasticTool}!touchDeformation@{touchDeformation}}
\index{touchDeformation@{touchDeformation}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{touchDeformation()}{touchDeformation()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::touch\+Deformation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00786                                    \{}
\DoxyCodeLine{00787   \textcolor{keywordflow}{if} (m\_sd) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00788 }
\DoxyCodeLine{00789   \textcolor{comment}{// Store a new deformation in the column's stage object}}
\DoxyCodeLine{00790   stageObject()-\/>\mbox{\hyperlink{class_t_stage_object_a6c2902531a1046dc91618c78c47d56c6}{setPlasticSkeletonDeformation}}(\textcolor{keyword}{new} \mbox{\hyperlink{class_plastic_skeleton_deformation}{PlasticSkeletonDeformation}});}
\DoxyCodeLine{00791   \mbox{\hyperlink{class_plastic_tool_a6043dedfdc3c368cb40927e71327f949}{storeDeformation}}();  \textcolor{comment}{// Builds the deformed skeleton too}}
\DoxyCodeLine{00792 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_aedec43dd8da73ec366aa807df2f0c190}\label{class_plastic_tool_aedec43dd8da73ec366aa807df2f0c190}} 
\index{PlasticTool@{PlasticTool}!touchSkeleton@{touchSkeleton}}
\index{touchSkeleton@{touchSkeleton}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{touchSkeleton()}{touchSkeleton()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::touch\+Skeleton (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00774                                 \{}
\DoxyCodeLine{00775   touchDeformation();}
\DoxyCodeLine{00776 }
\DoxyCodeLine{00777   \textcolor{keywordtype}{int} skelId = ::skeletonId();}
\DoxyCodeLine{00778   \textcolor{keywordflow}{if} (!m\_sd-\/>skeleton(skelId)) \{}
\DoxyCodeLine{00779     m\_sd-\/>\mbox{\hyperlink{class_plastic_skeleton_deformation_ae8aa59959248514bf788cfa716d80c01}{attach}}(skelId, \textcolor{keyword}{new} \mbox{\hyperlink{class_plastic_skeleton}{PlasticSkeleton}});}
\DoxyCodeLine{00780     emit skelIdsListChanged();}
\DoxyCodeLine{00781   \}}
\DoxyCodeLine{00782 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_plastic_tool_a628101d38a0539726203a1ed402229bc}\label{class_plastic_tool_a628101d38a0539726203a1ed402229bc}} 
\index{PlasticTool@{PlasticTool}!updateTranslation@{updateTranslation}}
\index{updateTranslation@{updateTranslation}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{updateTranslation()}{updateTranslation()}}
{\footnotesize\ttfamily void Plastic\+Tool\+::update\+Translation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00717                                     \{}
\DoxyCodeLine{00718   m\_mode.setQStringName(tr(\textcolor{stringliteral}{"{}Mode:"{}}));}
\DoxyCodeLine{00719   m\_mode.deleteAllValues();}
\DoxyCodeLine{00720   m\_mode.addValue(tr(\textcolor{stringliteral}{"{}Edit Mesh"{}}).toStdWString());}
\DoxyCodeLine{00721   m\_mode.addValue(tr(\textcolor{stringliteral}{"{}Paint Rigid"{}}).toStdWString());}
\DoxyCodeLine{00722   m\_mode.addValue(tr(\textcolor{stringliteral}{"{}Build Skeleton"{}}).toStdWString());}
\DoxyCodeLine{00723   m\_mode.addValue(tr(\textcolor{stringliteral}{"{}Animate"{}}).toStdWString());}
\DoxyCodeLine{00724   m\_mode.setIndex(BUILD\_IDX);}
\DoxyCodeLine{00725 }
\DoxyCodeLine{00726   m\_vertexName.setQStringName(tr(\textcolor{stringliteral}{"{}Vertex Name:"{}}));}
\DoxyCodeLine{00727   m\_interpolate.setQStringName(tr(\textcolor{stringliteral}{"{}Allow Stretching"{}}));}
\DoxyCodeLine{00728   m\_snapToMesh.setQStringName(tr(\textcolor{stringliteral}{"{}Snap To Mesh"{}}));}
\DoxyCodeLine{00729   m\_thickness.setQStringName(tr(\textcolor{stringliteral}{"{}Thickness"{}}));}
\DoxyCodeLine{00730 }
\DoxyCodeLine{00731   m\_rigidValue.setQStringName(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00732   m\_rigidValue.deleteAllValues();}
\DoxyCodeLine{00733   m\_rigidValue.addValue(tr(\textcolor{stringliteral}{"{}Rigid"{}}).toStdWString());}
\DoxyCodeLine{00734   m\_rigidValue.addValue(tr(\textcolor{stringliteral}{"{}Flex"{}}).toStdWString());}
\DoxyCodeLine{00735 }
\DoxyCodeLine{00736   m\_globalKey.setQStringName(tr(\textcolor{stringliteral}{"{}Global Key"{}}));}
\DoxyCodeLine{00737   m\_keepDistance.setQStringName(tr(\textcolor{stringliteral}{"{}Keep Distance"{}}));}
\DoxyCodeLine{00738   m\_minAngle.setQStringName(tr(\textcolor{stringliteral}{"{}Angle Bounds"{}}));}
\DoxyCodeLine{00739   m\_maxAngle.setQStringName(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00740 \}}

\end{DoxyCode}


\doxysubsection{Friends And Related Function Documentation}
\mbox{\Hypertarget{class_plastic_tool_adf17f5108be290fc81e566a6a4b21646}\label{class_plastic_tool_adf17f5108be290fc81e566a6a4b21646}} 
\index{PlasticTool@{PlasticTool}!PlasticToolOptionsBox@{PlasticToolOptionsBox}}
\index{PlasticToolOptionsBox@{PlasticToolOptionsBox}!PlasticTool@{PlasticTool}}
\doxysubsubsection{\texorpdfstring{PlasticToolOptionsBox}{PlasticToolOptionsBox}}
{\footnotesize\ttfamily friend class \mbox{\hyperlink{class_plastic_tool_options_box}{Plastic\+Tool\+Options\+Box}}\hspace{0.3cm}{\ttfamily [friend]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/plastictool.\+h\item 
E\+:/opentoonz/toonz/sources/tnztools/plastictool.\+cpp\item 
E\+:/opentoonz/toonz/sources/tnztools/plastictool\+\_\+animate.\+cpp\item 
E\+:/opentoonz/toonz/sources/tnztools/plastictool\+\_\+build.\+cpp\item 
E\+:/opentoonz/toonz/sources/tnztools/plastictool\+\_\+meshedit.\+cpp\item 
E\+:/opentoonz/toonz/sources/tnztools/plastictool\+\_\+rigidity.\+cpp\end{DoxyCompactItemize}
