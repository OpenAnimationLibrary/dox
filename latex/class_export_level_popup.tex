\hypertarget{class_export_level_popup}{}\doxysection{Export\+Level\+Popup Class Reference}
\label{class_export_level_popup}\index{ExportLevelPopup@{ExportLevelPopup}}


The popup dealing with level exports in Toonz.  




{\ttfamily \#include $<$exportlevelpopup.\+h$>$}

Inheritance diagram for Export\+Level\+Popup\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4.000000cm]{class_export_level_popup}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_export_level_popup_1_1_export_options}{Export\+Options}}
\item 
class \mbox{\hyperlink{class_export_level_popup_1_1_swatch}{Swatch}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_export_level_popup_a3f2df936d39c834c756525b044a7b376}{execute}} () override
\item 
\mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ \mbox{\hyperlink{class_export_level_popup_a219cd5cce5fe66fe1a745f61f9a7fd1d}{get\+Format\+Properties}} (const std\+::string \&ext)
\item 
\mbox{\hyperlink{struct_io_cmd_1_1_export_level_options}{Io\+Cmd\+::\+Export\+Level\+Options}} \mbox{\hyperlink{class_export_level_popup_aea73c9e72a121cc3b48d35afd7afdff5}{get\+Options}} (const std\+::string \&ext)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_export_level_popup_ad9b161d54775c26a56e1b482ae62a7e5}{show\+Event}} (QShow\+Event $\ast$se) override
\item 
void \mbox{\hyperlink{class_export_level_popup_a5bdb5e6cd59a64a65eaa6863a6e17450}{hide\+Event}} (QHide\+Event $\ast$he) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
The popup dealing with level exports in Toonz. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_export_level_popup_aa5962bfa7f9152b18deb6f17d58eb946}\label{class_export_level_popup_aa5962bfa7f9152b18deb6f17d58eb946}} 
\index{ExportLevelPopup@{ExportLevelPopup}!ExportLevelPopup@{ExportLevelPopup}}
\index{ExportLevelPopup@{ExportLevelPopup}!ExportLevelPopup@{ExportLevelPopup}}
\doxysubsubsection{\texorpdfstring{ExportLevelPopup()}{ExportLevelPopup()}}
{\footnotesize\ttfamily Export\+Level\+Popup\+::\+Export\+Level\+Popup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00212     : \mbox{\hyperlink{class_file_browser_popup}{FileBrowserPopup}}(tr(\textcolor{stringliteral}{"{}Export Level"{}}), \mbox{\hyperlink{class_file_browser_popup_a873aa6f7f7a00e34a4f60058db3a3fee}{Options}}(\mbox{\hyperlink{class_file_browser_popup_a873aa6f7f7a00e34a4f60058db3a3feea1f234f31a50247d79479cffa8754f1c9}{CUSTOM\_LAYOUT}})) \{}
\DoxyCodeLine{00213   setOkText(tr(\textcolor{stringliteral}{"{}Export"{}}));}
\DoxyCodeLine{00214 }
\DoxyCodeLine{00215   \mbox{\hyperlink{class_tab_bar_containter}{TabBarContainter}} *tabBarContainer = \textcolor{keyword}{new} \mbox{\hyperlink{class_tab_bar_containter}{TabBarContainter}};}
\DoxyCodeLine{00216   QTabBar *tabBar                   = \textcolor{keyword}{new} QTabBar;}
\DoxyCodeLine{00217   QStackedWidget *stackedWidget     = \textcolor{keyword}{new} QStackedWidget;}
\DoxyCodeLine{00218   QFrame *exportOptionsPage         = \textcolor{keyword}{new} QFrame;}
\DoxyCodeLine{00219   \textcolor{comment}{// Options / Swatch splitter}}
\DoxyCodeLine{00220   QSplitter *splitter     = \textcolor{keyword}{new} QSplitter(Qt::Vertical);}
\DoxyCodeLine{00221   QScrollArea *scrollArea = \textcolor{keyword}{new} QScrollArea(splitter);}
\DoxyCodeLine{00222   QFrame *topWidget       = \textcolor{keyword}{new} QFrame(scrollArea);}
\DoxyCodeLine{00223   m\_exportOptions         = \textcolor{keyword}{new} \mbox{\hyperlink{class_export_level_popup_1_1_export_options}{ExportLevelPopup::ExportOptions}}(splitter);}
\DoxyCodeLine{00224   m\_swatch                = \textcolor{keyword}{new} Swatch(splitter);}
\DoxyCodeLine{00225   \mbox{\hyperlink{class_frame_navigator}{FrameNavigator}} *frameNavigator = \textcolor{keyword}{new} \mbox{\hyperlink{class_frame_navigator}{FrameNavigator}};}
\DoxyCodeLine{00226 }
\DoxyCodeLine{00227   \textcolor{comment}{// Additional buttons between file name and Ok/Cancel}}
\DoxyCodeLine{00228   QWidget *fileFormatContainer = \textcolor{keyword}{new} QWidget;}
\DoxyCodeLine{00229   \textcolor{comment}{// Format selection combo}}
\DoxyCodeLine{00230   QLabel *formatLabel = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Format:"{}}));}
\DoxyCodeLine{00231   m\_format            = \textcolor{keyword}{new} QComboBox(\textcolor{keyword}{this});}
\DoxyCodeLine{00232   \textcolor{comment}{// Retas compliant checkbox}}
\DoxyCodeLine{00233   m\_retas = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_check_box}{DVGui::CheckBox}}(tr(\textcolor{stringliteral}{"{}Retas Compliant"{}}));}
\DoxyCodeLine{00234   \textcolor{comment}{// Format options button}}
\DoxyCodeLine{00235   m\_formatOptions = \textcolor{keyword}{new} QPushButton(tr(\textcolor{stringliteral}{"{}Options"{}}));}
\DoxyCodeLine{00236   \textcolor{comment}{//-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00237 }
\DoxyCodeLine{00238   tabBar-\/>addTab(tr(\textcolor{stringliteral}{"{}File Browser"{}}));}
\DoxyCodeLine{00239   tabBar-\/>addTab(tr(\textcolor{stringliteral}{"{}Export Options"{}}));}
\DoxyCodeLine{00240 }
\DoxyCodeLine{00241   tabBar-\/>setDrawBase(\textcolor{keyword}{false});}
\DoxyCodeLine{00242   tabBar-\/>setExpanding(\textcolor{keyword}{false});}
\DoxyCodeLine{00243 }
\DoxyCodeLine{00244   splitter-\/>setSizePolicy(QSizePolicy(QSizePolicy::MinimumExpanding,}
\DoxyCodeLine{00245                                       QSizePolicy::MinimumExpanding));}
\DoxyCodeLine{00246 }
\DoxyCodeLine{00247   scrollArea-\/>setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);}
\DoxyCodeLine{00248   scrollArea-\/>setWidgetResizable(\textcolor{keyword}{true});}
\DoxyCodeLine{00249   scrollArea-\/>setMinimumWidth(450);}
\DoxyCodeLine{00250 }
\DoxyCodeLine{00251   m\_swatch-\/>setMinimumHeight(150);}
\DoxyCodeLine{00252   m\_swatch-\/>setFocusPolicy(Qt::WheelFocus);}
\DoxyCodeLine{00253 }
\DoxyCodeLine{00254   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} toolbarHeight = 22;}
\DoxyCodeLine{00255   frameNavigator-\/>setFixedHeight(toolbarHeight);}
\DoxyCodeLine{00256   m\_levelFrameIndexHandle.setFrame(}
\DoxyCodeLine{00257       0);  \textcolor{comment}{// Due to TFrameHandle's initialization, the initial frame}}
\DoxyCodeLine{00258   frameNavigator-\/>\mbox{\hyperlink{class_frame_navigator_af3ede4a434e1d6d5c00f851351ddea75}{setFrameHandle}}(}
\DoxyCodeLine{00259       \&m\_levelFrameIndexHandle);  \textcolor{comment}{// is -\/1. Don't ask me why. Patching to 0.}}
\DoxyCodeLine{00260 }
\DoxyCodeLine{00261   formatLabel-\/>setFixedHeight(DVGui::WidgetHeight);}
\DoxyCodeLine{00262   m\_format-\/>setFixedHeight(DVGui::WidgetHeight);}
\DoxyCodeLine{00263   m\_format-\/>setSizePolicy(QSizePolicy::Fixed, QSizePolicy::Maximum);}
\DoxyCodeLine{00264 }
\DoxyCodeLine{00265   QStringList formats;}
\DoxyCodeLine{00266   formats << \textcolor{stringliteral}{"{}tga"{}}}
\DoxyCodeLine{00267           << \textcolor{stringliteral}{"{}tif"{}}}
\DoxyCodeLine{00268           << \textcolor{stringliteral}{"{}png"{}}}
\DoxyCodeLine{00269           << \textcolor{stringliteral}{"{}jpg"{}}}
\DoxyCodeLine{00270           << \textcolor{stringliteral}{"{}bmp"{}};}
\DoxyCodeLine{00271   formats.sort();}
\DoxyCodeLine{00272   m\_format-\/>addItems(formats);}
\DoxyCodeLine{00273 }
\DoxyCodeLine{00274   m\_retas-\/>setMinimumHeight(DVGui::WidgetHeight);}
\DoxyCodeLine{00275   m\_formatOptions-\/>setMinimumSize(60, 25);}
\DoxyCodeLine{00276 }
\DoxyCodeLine{00277   \textcolor{comment}{// layout}}
\DoxyCodeLine{00278   QVBoxLayout *mainLayout = \textcolor{keyword}{new} QVBoxLayout();}
\DoxyCodeLine{00279   mainLayout-\/>setMargin(0);}
\DoxyCodeLine{00280   mainLayout-\/>setSpacing(3);}
\DoxyCodeLine{00281   \{}
\DoxyCodeLine{00282     mainLayout-\/>addWidget(tabBarContainer, 0);}
\DoxyCodeLine{00283 }
\DoxyCodeLine{00284     QHBoxLayout *tabBarLayout = \textcolor{keyword}{new} QHBoxLayout;}
\DoxyCodeLine{00285     tabBarLayout-\/>setMargin(0);}
\DoxyCodeLine{00286     \{}
\DoxyCodeLine{00287       tabBarLayout-\/>addSpacing(6);}
\DoxyCodeLine{00288       tabBarLayout-\/>addWidget(tabBar);}
\DoxyCodeLine{00289     \}}
\DoxyCodeLine{00290     tabBarContainer-\/>setLayout(tabBarLayout);}
\DoxyCodeLine{00291 }
\DoxyCodeLine{00292     \textcolor{comment}{// File Browser}}
\DoxyCodeLine{00293     stackedWidget-\/>addWidget(m\_browser);}
\DoxyCodeLine{00294     \textcolor{comment}{// Export Options Page}}
\DoxyCodeLine{00295     QVBoxLayout *eoPageLayout = \textcolor{keyword}{new} QVBoxLayout;}
\DoxyCodeLine{00296     eoPageLayout-\/>setMargin(0);}
\DoxyCodeLine{00297     eoPageLayout-\/>setSpacing(0);}
\DoxyCodeLine{00298     \{}
\DoxyCodeLine{00299       \textcolor{comment}{// top area -\/ options}}
\DoxyCodeLine{00300       QVBoxLayout *topVLayout =}
\DoxyCodeLine{00301           \textcolor{keyword}{new} QVBoxLayout(topWidget);  \textcolor{comment}{// Needed to justify at top}}
\DoxyCodeLine{00302       \{}
\DoxyCodeLine{00303         topVLayout-\/>addWidget(m\_exportOptions);}
\DoxyCodeLine{00304         topVLayout-\/>addStretch(1);}
\DoxyCodeLine{00305       \}}
\DoxyCodeLine{00306       topWidget-\/>setLayout(topVLayout);}
\DoxyCodeLine{00307 }
\DoxyCodeLine{00308       scrollArea-\/>setWidget(topWidget);}
\DoxyCodeLine{00309       splitter-\/>addWidget(scrollArea);}
\DoxyCodeLine{00310 }
\DoxyCodeLine{00311       \textcolor{comment}{// bottom area -\/ swatch}}
\DoxyCodeLine{00312       splitter-\/>addWidget(m\_swatch);}
\DoxyCodeLine{00313       splitter-\/>setStretchFactor(0, 1);}
\DoxyCodeLine{00314 }
\DoxyCodeLine{00315       eoPageLayout-\/>addWidget(splitter, 1);}
\DoxyCodeLine{00316 }
\DoxyCodeLine{00317       \textcolor{comment}{// toolbar}}
\DoxyCodeLine{00318       QHBoxLayout *toolbarLayout = \textcolor{keyword}{new} QHBoxLayout;}
\DoxyCodeLine{00319       \{}
\DoxyCodeLine{00320         toolbarLayout-\/>addStretch(1);}
\DoxyCodeLine{00321         toolbarLayout-\/>addWidget(frameNavigator, 0, Qt::AlignCenter);}
\DoxyCodeLine{00322         toolbarLayout-\/>addStretch(1);}
\DoxyCodeLine{00323       \}}
\DoxyCodeLine{00324       eoPageLayout-\/>addLayout(toolbarLayout, 0);}
\DoxyCodeLine{00325     \}}
\DoxyCodeLine{00326     exportOptionsPage-\/>setLayout(eoPageLayout);}
\DoxyCodeLine{00327     stackedWidget-\/>addWidget(exportOptionsPage);}
\DoxyCodeLine{00328 }
\DoxyCodeLine{00329     mainLayout-\/>addWidget(stackedWidget, 1);}
\DoxyCodeLine{00330 }
\DoxyCodeLine{00331     \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ Buttons Toolbar -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00332     QHBoxLayout *bottomLay = \textcolor{keyword}{new} QHBoxLayout();}
\DoxyCodeLine{00333     bottomLay-\/>setMargin(5);}
\DoxyCodeLine{00334     bottomLay-\/>setSpacing(3);}
\DoxyCodeLine{00335     \{}
\DoxyCodeLine{00336       bottomLay-\/>addWidget(m\_nameFieldLabel);}
\DoxyCodeLine{00337       bottomLay-\/>addWidget(m\_nameField, 1);}
\DoxyCodeLine{00338 }
\DoxyCodeLine{00339       QHBoxLayout *fileFormatLayout = \textcolor{keyword}{new} QHBoxLayout;}
\DoxyCodeLine{00340       fileFormatLayout-\/>setMargin(0);}
\DoxyCodeLine{00341       fileFormatLayout-\/>setSpacing(8);}
\DoxyCodeLine{00342       fileFormatLayout-\/>setAlignment(Qt::AlignHCenter);}
\DoxyCodeLine{00343       \{}
\DoxyCodeLine{00344         fileFormatLayout-\/>addWidget(formatLabel);}
\DoxyCodeLine{00345         fileFormatLayout-\/>addWidget(m\_format);}
\DoxyCodeLine{00346         fileFormatLayout-\/>addWidget(m\_retas);}
\DoxyCodeLine{00347         fileFormatLayout-\/>addWidget(m\_formatOptions);}
\DoxyCodeLine{00348       \}}
\DoxyCodeLine{00349       fileFormatContainer-\/>setLayout(fileFormatLayout);}
\DoxyCodeLine{00350       bottomLay-\/>addWidget(fileFormatContainer);}
\DoxyCodeLine{00351 }
\DoxyCodeLine{00352       bottomLay-\/>addWidget(m\_okButton);}
\DoxyCodeLine{00353       bottomLay-\/>addWidget(m\_cancelButton);}
\DoxyCodeLine{00354     \}}
\DoxyCodeLine{00355     mainLayout-\/>addLayout(bottomLay, 0);}
\DoxyCodeLine{00356   \}}
\DoxyCodeLine{00357   setLayout(mainLayout);}
\DoxyCodeLine{00358 }
\DoxyCodeLine{00359   \textcolor{comment}{// Establish connections}}
\DoxyCodeLine{00360   \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{true};}
\DoxyCodeLine{00361   ret      = connect(tabBar, SIGNAL(currentChanged(\textcolor{keywordtype}{int})), stackedWidget,}
\DoxyCodeLine{00362                 SLOT(setCurrentIndex(\textcolor{keywordtype}{int})));}
\DoxyCodeLine{00363   ret      = connect(m\_format, SIGNAL(currentIndexChanged(\textcolor{keyword}{const} QString \&)),}
\DoxyCodeLine{00364                 SLOT(onformatChanged(\textcolor{keyword}{const} QString \&))) \&\&}
\DoxyCodeLine{00365         ret;}
\DoxyCodeLine{00366   ret = connect(m\_retas, SIGNAL(stateChanged(\textcolor{keywordtype}{int})), SLOT(onRetas(\textcolor{keywordtype}{int}))) \&\& ret;}
\DoxyCodeLine{00367   ret = connect(m\_formatOptions, SIGNAL(clicked()), SLOT(onOptionsClicked())) \&\&}
\DoxyCodeLine{00368         ret;}
\DoxyCodeLine{00369   ret = connect(\&m\_levelFrameIndexHandle, SIGNAL(frameSwitched()),}
\DoxyCodeLine{00370                 SLOT(updatePreview())) \&\&}
\DoxyCodeLine{00371         ret;}
\DoxyCodeLine{00372   ret = connect(m\_exportOptions, SIGNAL(optionsChanged()),}
\DoxyCodeLine{00373                 SLOT(updatePreview())) \&\&}
\DoxyCodeLine{00374         ret;}
\DoxyCodeLine{00375   assert(ret);}
\DoxyCodeLine{00376 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_export_level_popup_a224bf108bc2746c6d6d692ed373f1313}\label{class_export_level_popup_a224bf108bc2746c6d6d692ed373f1313}} 
\index{ExportLevelPopup@{ExportLevelPopup}!````~ExportLevelPopup@{$\sim$ExportLevelPopup}}
\index{````~ExportLevelPopup@{$\sim$ExportLevelPopup}!ExportLevelPopup@{ExportLevelPopup}}
\doxysubsubsection{\texorpdfstring{$\sim$ExportLevelPopup()}{~ExportLevelPopup()}}
{\footnotesize\ttfamily Export\+Level\+Popup\+::$\sim$\+Export\+Level\+Popup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00380                                     \{}
\DoxyCodeLine{00381   \textcolor{comment}{// The child FrameNavigator must be destroyed BEFORE m\_levelFrameIndexHandle.}}
\DoxyCodeLine{00382   \textcolor{comment}{// This is by FrameNavigator's implicit contract that the supplied frame}}
\DoxyCodeLine{00383   \textcolor{comment}{// handle's}}
\DoxyCodeLine{00384   \textcolor{comment}{// lifetime exceeds its own.}}
\DoxyCodeLine{00385 }
\DoxyCodeLine{00386   QWidget().setLayout(layout());  \textcolor{comment}{// Reparents all layout-\/managed child widgets}}
\DoxyCodeLine{00387 \}  \textcolor{comment}{// (i.e. all) to a temporary}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_export_level_popup_a3f2df936d39c834c756525b044a7b376}\label{class_export_level_popup_a3f2df936d39c834c756525b044a7b376}} 
\index{ExportLevelPopup@{ExportLevelPopup}!execute@{execute}}
\index{execute@{execute}!ExportLevelPopup@{ExportLevelPopup}}
\doxysubsubsection{\texorpdfstring{execute()}{execute()}}
{\footnotesize\ttfamily bool Export\+Level\+Popup\+::execute (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Performs some action on m\+\_\+paths and returns whether the action was successful (accepted) -\/ in which case the popup closes. 

Implements \mbox{\hyperlink{class_file_browser_popup_a8158b9b8756ac5dfa893b78cdc2fd9af}{File\+Browser\+Popup}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00610                                \{}
\DoxyCodeLine{00611   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_file_browser_popup_ae7beff1bedd513cf24b3de9fde617ec1}{m\_selectedPaths}}.empty()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00612 }
\DoxyCodeLine{00613   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp(*\mbox{\hyperlink{class_file_browser_popup_ae7beff1bedd513cf24b3de9fde617ec1}{m\_selectedPaths}}.begin());}
\DoxyCodeLine{00614 }
\DoxyCodeLine{00615   \textcolor{comment}{// Build export options}}
\DoxyCodeLine{00616   \textcolor{keyword}{const} std::string \&ext                = m\_format-\/>currentText().toStdString();}
\DoxyCodeLine{00617   \textcolor{keyword}{const} \mbox{\hyperlink{struct_io_cmd_1_1_export_level_options}{IoCmd::ExportLevelOptions}} \&opts = getOptions(ext);}
\DoxyCodeLine{00618 }
\DoxyCodeLine{00619   \textcolor{comment}{// Retrieve current column selection}}
\DoxyCodeLine{00620   \mbox{\hyperlink{class_t_app}{TApp}} *app                      = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}();}
\DoxyCodeLine{00621   \mbox{\hyperlink{class_t_selection}{TSelection}} *selection          = app-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>getSelection();}
\DoxyCodeLine{00622   \mbox{\hyperlink{class_t_column_selection}{TColumnSelection}} *colSelection = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_column_selection}{TColumnSelection}} *\textcolor{keyword}{>}(selection);}
\DoxyCodeLine{00623   \textcolor{keywordflow}{if} (colSelection \&\& colSelection-\/>getIndices().size() > 1) \{}
\DoxyCodeLine{00624     fp = \mbox{\hyperlink{class_t_file_path}{TFilePath}}(m\_browser-\/>getFolder() + \mbox{\hyperlink{class_t_file_path}{TFilePath}}(\textcolor{stringliteral}{"{}a"{}}))}
\DoxyCodeLine{00625              .\mbox{\hyperlink{class_t_file_path_a1437b0e0720e9258b622f68b6858e95d}{withType}}(ext)}
\DoxyCodeLine{00626              .\mbox{\hyperlink{class_t_file_path_a12f35b225e1882372ad7e02ad7fce543}{withFrame}}();}
\DoxyCodeLine{00627 }
\DoxyCodeLine{00628     \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{true};}
\DoxyCodeLine{00629     MultiExportOverwriteCB overwriteCB;}
\DoxyCodeLine{00630     MultiExportProgressCB progressCB;}
\DoxyCodeLine{00631 }
\DoxyCodeLine{00632     \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh                    = app-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>getXsheet();}
\DoxyCodeLine{00633     \textcolor{keyword}{const} std::set<int> \&colIndices = colSelection-\/>getIndices();}
\DoxyCodeLine{00634 }
\DoxyCodeLine{00635     std::set<int>::const\_iterator it, end = colIndices.end();}
\DoxyCodeLine{00636     \textcolor{keywordflow}{for} (it = colIndices.begin(); it != end; ++it) \{}
\DoxyCodeLine{00637       \textcolor{keywordflow}{if} (progressCB.canceled()) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00638 }
\DoxyCodeLine{00639       \textcolor{keywordtype}{int} r0, r1, c = *it;}
\DoxyCodeLine{00640       xsh-\/>\mbox{\hyperlink{class_t_xsheet_a26850469fb0f2886b717479050c32be2}{getCellRange}}(c, r0, r1);}
\DoxyCodeLine{00641 }
\DoxyCodeLine{00642       \textcolor{keywordflow}{if} (r1 >= r0)  \textcolor{comment}{// There exists a not-\/empty cell}}
\DoxyCodeLine{00643       \{}
\DoxyCodeLine{00644         \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(r0, c).\mbox{\hyperlink{class_t_xsh_cell_a8898cc47eba24e59477bfba8e2511f1d}{getSimpleLevel}}();}
\DoxyCodeLine{00645         assert(sl);}
\DoxyCodeLine{00646 }
\DoxyCodeLine{00647         ret = ret \&\& \mbox{\hyperlink{namespace_io_cmd_a99bbb49fbdaab858ec5310ab8c72521a}{IoCmd::exportLevel}}(fp.withName(sl-\/>\mbox{\hyperlink{class_t_xsh_level_a3a59fb1bd3261baee4e889a9edbf0ae8}{getName}}()), sl, opts,}
\DoxyCodeLine{00648                                         \&overwriteCB, \&progressCB);}
\DoxyCodeLine{00649       \}}
\DoxyCodeLine{00650     \}}
\DoxyCodeLine{00651 }
\DoxyCodeLine{00652     \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00653   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00654     \textcolor{keywordflow}{if} (!isValidFileName(QString::fromStdString(fp.getName()))) \{}
\DoxyCodeLine{00655       DVGui::error(}
\DoxyCodeLine{00656           tr(\textcolor{stringliteral}{"{}The file name cannot be empty or contain any of the following "{}}}
\DoxyCodeLine{00657              \textcolor{stringliteral}{"{}characters:(new line)  \(\backslash\)\(\backslash\) / : * ? \(\backslash\)"{}  |"{}}));}
\DoxyCodeLine{00658       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00659     \}}
\DoxyCodeLine{00660 }
\DoxyCodeLine{00661     \textcolor{keywordflow}{if} (isReservedFileName\_message(QString::fromStdString(fp.getName())))}
\DoxyCodeLine{00662       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00663 }
\DoxyCodeLine{00664     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespace_io_cmd_a99bbb49fbdaab858ec5310ab8c72521a}{IoCmd::exportLevel}}(fp.withType(ext).withFrame(), 0, opts);}
\DoxyCodeLine{00665   \}}
\DoxyCodeLine{00666 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00413}{Io\+Cmd\+::export\+Level()}}, \mbox{\hyperlink{l00233}{TXsheet\+::get\+Cell()}}, \mbox{\hyperlink{l00462}{TXsheet\+::get\+Cell\+Range()}}, \mbox{\hyperlink{l00134}{TApp\+::get\+Current\+Selection()}}, \mbox{\hyperlink{l00110}{TApp\+::get\+Current\+Xsheet()}}, \mbox{\hyperlink{l00636}{TFile\+Path\+::get\+Name()}}, \mbox{\hyperlink{l00115}{TXsh\+Level\+::get\+Name()}}, \mbox{\hyperlink{l00019}{TXsh\+Cell\+::get\+Simple\+Level()}}, \mbox{\hyperlink{l00215}{TApp\+::instance()}}, \mbox{\hyperlink{l00090}{File\+Browser\+Popup\+::m\+\_\+selected\+Paths}}, \mbox{\hyperlink{l00860}{TFile\+Path\+::with\+Frame()}}, \mbox{\hyperlink{l00802}{TFile\+Path\+::with\+Name()}}, and \mbox{\hyperlink{l00774}{TFile\+Path\+::with\+Type()}}.

\mbox{\Hypertarget{class_export_level_popup_a219cd5cce5fe66fe1a745f61f9a7fd1d}\label{class_export_level_popup_a219cd5cce5fe66fe1a745f61f9a7fd1d}} 
\index{ExportLevelPopup@{ExportLevelPopup}!getFormatProperties@{getFormatProperties}}
\index{getFormatProperties@{getFormatProperties}!ExportLevelPopup@{ExportLevelPopup}}
\doxysubsubsection{\texorpdfstring{getFormatProperties()}{getFormatProperties()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ Export\+Level\+Popup\+::get\+Format\+Properties (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{ext }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00463                                                                           \{}
\DoxyCodeLine{00464   \textcolor{keywordflow}{if} (m\_formatProperties.find(ext) != m\_formatProperties.end())}
\DoxyCodeLine{00465     \textcolor{keywordflow}{return} m\_formatProperties[ext];}
\DoxyCodeLine{00466 }
\DoxyCodeLine{00467   \mbox{\hyperlink{class_t_property_group}{TPropertyGroup}} *props   = Tiio::makeWriterProperties(ext);}
\DoxyCodeLine{00468   m\_formatProperties[ext] = props;}
\DoxyCodeLine{00469   \textcolor{keywordflow}{return} props;}
\DoxyCodeLine{00470 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_export_level_popup_aea73c9e72a121cc3b48d35afd7afdff5}\label{class_export_level_popup_aea73c9e72a121cc3b48d35afd7afdff5}} 
\index{ExportLevelPopup@{ExportLevelPopup}!getOptions@{getOptions}}
\index{getOptions@{getOptions}!ExportLevelPopup@{ExportLevelPopup}}
\doxysubsubsection{\texorpdfstring{getOptions()}{getOptions()}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct_io_cmd_1_1_export_level_options}{Io\+Cmd\+::\+Export\+Level\+Options}} Export\+Level\+Popup\+::get\+Options (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{ext }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00474                                                                          \{}
\DoxyCodeLine{00475   \mbox{\hyperlink{struct_io_cmd_1_1_export_level_options}{IoCmd::ExportLevelOptions}} opts = m\_exportOptions-\/>getOptions();}
\DoxyCodeLine{00476 }
\DoxyCodeLine{00477   opts.\mbox{\hyperlink{struct_io_cmd_1_1_export_level_options_a7037b7cdde2fb931afd66ff9392fab13}{m\_props}}    = getFormatProperties(ext);}
\DoxyCodeLine{00478   opts.\mbox{\hyperlink{struct_io_cmd_1_1_export_level_options_ad03d9f575e978f592f7793d3be93b500}{m\_forRetas}} = (m\_retas-\/>checkState() == Qt::Checked);}
\DoxyCodeLine{00479 }
\DoxyCodeLine{00480   \textcolor{keywordflow}{return} opts;}
\DoxyCodeLine{00481 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_export_level_popup_a5bdb5e6cd59a64a65eaa6863a6e17450}\label{class_export_level_popup_a5bdb5e6cd59a64a65eaa6863a6e17450}} 
\index{ExportLevelPopup@{ExportLevelPopup}!hideEvent@{hideEvent}}
\index{hideEvent@{hideEvent}!ExportLevelPopup@{ExportLevelPopup}}
\doxysubsubsection{\texorpdfstring{hideEvent()}{hideEvent()}}
{\footnotesize\ttfamily void Export\+Level\+Popup\+::hide\+Event (\begin{DoxyParamCaption}\item[{QHide\+Event $\ast$}]{he }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00446                                                \{}
\DoxyCodeLine{00447   QDialog::hideEvent(he);}
\DoxyCodeLine{00448 }
\DoxyCodeLine{00449   \mbox{\hyperlink{class_t_app}{TApp}} *app = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}();}
\DoxyCodeLine{00450 }
\DoxyCodeLine{00451   app-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>disconnect(\textcolor{keyword}{this});}
\DoxyCodeLine{00452   app-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}()-\/>disconnect(\textcolor{keyword}{this});}
\DoxyCodeLine{00453 }
\DoxyCodeLine{00454   \textcolor{comment}{// Restore original selection}}
\DoxyCodeLine{00455   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}()-\/>popSelection();}
\DoxyCodeLine{00456 }
\DoxyCodeLine{00457   \textcolor{comment}{// Reset popup state}}
\DoxyCodeLine{00458   m\_swatch-\/>image() = \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}();}
\DoxyCodeLine{00459 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_export_level_popup_ad9b161d54775c26a56e1b482ae62a7e5}\label{class_export_level_popup_ad9b161d54775c26a56e1b482ae62a7e5}} 
\index{ExportLevelPopup@{ExportLevelPopup}!showEvent@{showEvent}}
\index{showEvent@{showEvent}!ExportLevelPopup@{ExportLevelPopup}}
\doxysubsubsection{\texorpdfstring{showEvent()}{showEvent()}}
{\footnotesize\ttfamily void Export\+Level\+Popup\+::show\+Event (\begin{DoxyParamCaption}\item[{QShow\+Event $\ast$}]{se }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00391                                                \{}
\DoxyCodeLine{00392   \textcolor{comment}{// Save current selection -\/ will be restored in the hideEvent()}}
\DoxyCodeLine{00393   \{}
\DoxyCodeLine{00394     \mbox{\hyperlink{class_t_selection_handle}{TSelectionHandle}} *selectionHandle = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}();}
\DoxyCodeLine{00395     \mbox{\hyperlink{class_t_selection}{TSelection}} *selection             = selectionHandle-\/>getSelection();}
\DoxyCodeLine{00396     \textcolor{keywordflow}{if} (Preferences::instance()-\/>getPixelsOnly()) \{}
\DoxyCodeLine{00397       m\_exportOptions-\/>m\_widthFld-\/>hide();}
\DoxyCodeLine{00398       m\_exportOptions-\/>m\_heightFld-\/>hide();}
\DoxyCodeLine{00399       m\_exportOptions-\/>m\_widthLabel-\/>hide();}
\DoxyCodeLine{00400       m\_exportOptions-\/>m\_heightLabel-\/>hide();}
\DoxyCodeLine{00401       m\_exportOptions-\/>m\_dpiLabel-\/>hide();}
\DoxyCodeLine{00402     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00403       m\_exportOptions-\/>m\_widthFld-\/>show();}
\DoxyCodeLine{00404       m\_exportOptions-\/>m\_heightFld-\/>show();}
\DoxyCodeLine{00405       m\_exportOptions-\/>m\_widthLabel-\/>show();}
\DoxyCodeLine{00406       m\_exportOptions-\/>m\_heightLabel-\/>show();}
\DoxyCodeLine{00407       m\_exportOptions-\/>m\_dpiLabel-\/>show();}
\DoxyCodeLine{00408     \}}
\DoxyCodeLine{00409     selectionHandle-\/>pushSelection();}
\DoxyCodeLine{00410     selectionHandle-\/>setSelection(selection);}
\DoxyCodeLine{00411   \}}
\DoxyCodeLine{00412 }
\DoxyCodeLine{00413   \textcolor{comment}{// WARNING: What happens it the restored selection is NO MORE VALID ?}}
\DoxyCodeLine{00414   \textcolor{comment}{//          Consider that this popup is NOT MODAL !!}}
\DoxyCodeLine{00415   \textcolor{comment}{//}}
\DoxyCodeLine{00416   \textcolor{comment}{//          The same applies to all the other popups in}}
\DoxyCodeLine{00417   \textcolor{comment}{//          filebrowserpopup.cpp...}}
\DoxyCodeLine{00418 }
\DoxyCodeLine{00419   updateOnSelection();  \textcolor{comment}{// Here the selection is used}}
\DoxyCodeLine{00420   updatePreview();}
\DoxyCodeLine{00421 }
\DoxyCodeLine{00422   \textcolor{comment}{// Establish connections}}
\DoxyCodeLine{00423   \mbox{\hyperlink{class_t_app}{TApp}} *app = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}();}
\DoxyCodeLine{00424 }
\DoxyCodeLine{00425   \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{true};}
\DoxyCodeLine{00426   \{}
\DoxyCodeLine{00427     ret = connect(app-\/>\mbox{\hyperlink{class_t_app_a6e0ee1978807a89009571ed5ce44323b}{getCurrentSelection}}(),}
\DoxyCodeLine{00428                   SIGNAL(selectionChanged(\mbox{\hyperlink{class_t_selection}{TSelection}} *)),}
\DoxyCodeLine{00429                   SLOT(updateOnSelection())) \&\&}
\DoxyCodeLine{00430           ret;}
\DoxyCodeLine{00431 }
\DoxyCodeLine{00432     ret = connect(app-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}(), SIGNAL(xshLevelSwitched(\mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *)),}
\DoxyCodeLine{00433                   \textcolor{keyword}{this}, SLOT(updatePreview())) \&\&}
\DoxyCodeLine{00434           ret;}
\DoxyCodeLine{00435     ret = connect(app-\/>\mbox{\hyperlink{class_t_app_ad2923c9feaaa44ecd9cdd0fa029aa8aa}{getCurrentLevel}}(), SIGNAL(xshLevelChanged()), \textcolor{keyword}{this},}
\DoxyCodeLine{00436                   SLOT(updatePreview())) \&\&}
\DoxyCodeLine{00437           ret;}
\DoxyCodeLine{00438   \}}
\DoxyCodeLine{00439   assert(ret);}
\DoxyCodeLine{00440 }
\DoxyCodeLine{00441   QDialog::showEvent(se);}
\DoxyCodeLine{00442 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/exportlevelpopup.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/exportlevelpopup.\+cpp\end{DoxyCompactItemize}
