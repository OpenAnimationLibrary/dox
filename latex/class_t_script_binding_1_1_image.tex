\hypertarget{class_t_script_binding_1_1_image}{}\doxysection{TScript\+Binding\+::Image Class Reference}
\label{class_t_script_binding_1_1_image}\index{TScriptBinding::Image@{TScriptBinding::Image}}
Inheritance diagram for TScript\+Binding\+::Image\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_t_script_binding_1_1_image}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_script_binding_1_1_image_ac7ea1afa9da5e169f0b77dad01f07bad}{Image}} (const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} img)
\item 
\mbox{\hyperlink{class_t_script_binding_1_1_image_ae79f948b1cbde6e14ef8d47c82d54f8c}{Image}} (\mbox{\hyperlink{class_t_image}{TImage}} $\ast$img)
\item 
Q\+\_\+\+INVOKABLE QScript\+Value \mbox{\hyperlink{class_t_script_binding_1_1_image_a11ed78e344edf75b1831b618c9ced3aa}{to\+String}} ()
\item 
QString \mbox{\hyperlink{class_t_script_binding_1_1_image_a80835d53083330c39cfc22d631d23256}{get\+Type}} () const
\item 
const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \& \mbox{\hyperlink{class_t_script_binding_1_1_image_a52c99801eaedcd6e9b8a716ae8391690}{get\+Img}} () const
\item 
void \mbox{\hyperlink{class_t_script_binding_1_1_image_a494173671f4a55d867547d59786cef0a}{set\+Img}} (const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \&img)
\item 
int \mbox{\hyperlink{class_t_script_binding_1_1_image_ad41bd9becbf965221a120399ae5a82f5}{get\+Width}} ()
\item 
int \mbox{\hyperlink{class_t_script_binding_1_1_image_a6d68ba5718603a2c2129100f7a0dab3b}{get\+Height}} ()
\item 
double \mbox{\hyperlink{class_t_script_binding_1_1_image_a5aa0f7da8b2263d20bd2d4a9abf9eeb9}{get\+Dpi}} ()
\item 
Q\+\_\+\+INVOKABLE QScript\+Value \mbox{\hyperlink{class_t_script_binding_1_1_image_a23d75e158633c8e2c1abb457673a9f53}{load}} (const QScript\+Value \&fp)
\item 
Q\+\_\+\+INVOKABLE QScript\+Value \mbox{\hyperlink{class_t_script_binding_1_1_image_a4a52adb05f5a0d4ae866475ac9eb716a}{save}} (const QScript\+Value \&fp)
\end{DoxyCompactItemize}
\doxysubsection*{Properties}
\begin{DoxyCompactItemize}
\item 
QString \mbox{\hyperlink{class_t_script_binding_1_1_image_ae6a7a153cf870066de89d1fd4316daa8}{type}}
\item 
int \mbox{\hyperlink{class_t_script_binding_1_1_image_a44c0afea9791dfcb94b8676b7e0aed2a}{width}}
\item 
int \mbox{\hyperlink{class_t_script_binding_1_1_image_ace062a0fb6478aa2f83abdc93e735647}{height}}
\item 
double \mbox{\hyperlink{class_t_script_binding_1_1_image_ad24fe4a369b1ed776efdec1aefb6c17f}{dpi}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_script_binding_1_1_image_ae618a0904c41d6c24aba7152e34b1515}\label{class_t_script_binding_1_1_image_ae618a0904c41d6c24aba7152e34b1515}} 
\index{TScriptBinding::Image@{TScriptBinding::Image}!Image@{Image}}
\index{Image@{Image}!TScriptBinding::Image@{TScriptBinding::Image}}
\doxysubsubsection{\texorpdfstring{Image()}{Image()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily TScript\+Binding\+::\+Image\+::\+Image (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00014 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_image_ac7ea1afa9da5e169f0b77dad01f07bad}\label{class_t_script_binding_1_1_image_ac7ea1afa9da5e169f0b77dad01f07bad}} 
\index{TScriptBinding::Image@{TScriptBinding::Image}!Image@{Image}}
\index{Image@{Image}!TScriptBinding::Image@{TScriptBinding::Image}}
\doxysubsubsection{\texorpdfstring{Image()}{Image()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily TScript\+Binding\+::\+Image\+::\+Image (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}}]{img }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00016 : m\_img(img) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_image_ae79f948b1cbde6e14ef8d47c82d54f8c}\label{class_t_script_binding_1_1_image_ae79f948b1cbde6e14ef8d47c82d54f8c}} 
\index{TScriptBinding::Image@{TScriptBinding::Image}!Image@{Image}}
\index{Image@{Image}!TScriptBinding::Image@{TScriptBinding::Image}}
\doxysubsubsection{\texorpdfstring{Image()}{Image()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily TScript\+Binding\+::\+Image\+::\+Image (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_image}{TImage}} $\ast$}]{img }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00018 : m\_img(img) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_image_a6ffaa91105332169d49709807e5005f2}\label{class_t_script_binding_1_1_image_a6ffaa91105332169d49709807e5005f2}} 
\index{TScriptBinding::Image@{TScriptBinding::Image}!````~Image@{$\sim$Image}}
\index{````~Image@{$\sim$Image}!TScriptBinding::Image@{TScriptBinding::Image}}
\doxysubsubsection{\texorpdfstring{$\sim$Image()}{~Image()}}
{\footnotesize\ttfamily TScript\+Binding\+::\+Image\+::$\sim$\+Image (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00020 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_script_binding_1_1_image_a5aa0f7da8b2263d20bd2d4a9abf9eeb9}\label{class_t_script_binding_1_1_image_a5aa0f7da8b2263d20bd2d4a9abf9eeb9}} 
\index{TScriptBinding::Image@{TScriptBinding::Image}!getDpi@{getDpi}}
\index{getDpi@{getDpi}!TScriptBinding::Image@{TScriptBinding::Image}}
\doxysubsubsection{\texorpdfstring{getDpi()}{getDpi()}}
{\footnotesize\ttfamily double TScript\+Binding\+::\+Image\+::get\+Dpi (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00061                      \{}
\DoxyCodeLine{00062   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} ri = m\_img) \{}
\DoxyCodeLine{00063     \textcolor{keywordtype}{double} dpix = 0, dpiy = 0;}
\DoxyCodeLine{00064     ri-\/>getDpi(dpix, dpiy);}
\DoxyCodeLine{00065     \textcolor{keywordflow}{return} dpix;}
\DoxyCodeLine{00066   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti = m\_img) \{}
\DoxyCodeLine{00067     \textcolor{keywordtype}{double} dpix = 0, dpiy = 0;}
\DoxyCodeLine{00068     ti-\/>getDpi(dpix, dpiy);}
\DoxyCodeLine{00069     \textcolor{keywordflow}{return} dpix;}
\DoxyCodeLine{00070   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00071     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00072 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_image_a6d68ba5718603a2c2129100f7a0dab3b}\label{class_t_script_binding_1_1_image_a6d68ba5718603a2c2129100f7a0dab3b}} 
\index{TScriptBinding::Image@{TScriptBinding::Image}!getHeight@{getHeight}}
\index{getHeight@{getHeight}!TScriptBinding::Image@{TScriptBinding::Image}}
\doxysubsubsection{\texorpdfstring{getHeight()}{getHeight()}}
{\footnotesize\ttfamily int TScript\+Binding\+::\+Image\+::get\+Height (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00057                      \{}
\DoxyCodeLine{00058   \textcolor{keywordflow}{return} !!m\_img \&\& !!m\_img-\/>\mbox{\hyperlink{class_t_image_acab19efe21f788a8016f0604c4c71912}{raster}}() ? m\_img-\/>\mbox{\hyperlink{class_t_image_acab19efe21f788a8016f0604c4c71912}{raster}}()-\/>getSize().ly : 0;}
\DoxyCodeLine{00059 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_image_a52c99801eaedcd6e9b8a716ae8391690}\label{class_t_script_binding_1_1_image_a52c99801eaedcd6e9b8a716ae8391690}} 
\index{TScriptBinding::Image@{TScriptBinding::Image}!getImg@{getImg}}
\index{getImg@{getImg}!TScriptBinding::Image@{TScriptBinding::Image}}
\doxysubsubsection{\texorpdfstring{getImg()}{getImg()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \& TScript\+Binding\+::\+Image\+::get\+Img (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00027 \{ \textcolor{keywordflow}{return} m\_img; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_image_a80835d53083330c39cfc22d631d23256}\label{class_t_script_binding_1_1_image_a80835d53083330c39cfc22d631d23256}} 
\index{TScriptBinding::Image@{TScriptBinding::Image}!getType@{getType}}
\index{getType@{getType}!TScriptBinding::Image@{TScriptBinding::Image}}
\doxysubsubsection{\texorpdfstring{getType()}{getType()}}
{\footnotesize\ttfamily QString TScript\+Binding\+::\+Image\+::get\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00074                              \{}
\DoxyCodeLine{00075   \textcolor{keywordflow}{if} (m\_img) \{}
\DoxyCodeLine{00076     \mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1}{TImage::Type}} type = m\_img-\/>\mbox{\hyperlink{class_t_image_a52205464a87894ee940a1083a7641d86}{getType}}();}
\DoxyCodeLine{00077     \textcolor{keywordflow}{if} (type == \mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1ada6df9de5e7d50b9c9c823871bee09d6}{TImage::RASTER}})}
\DoxyCodeLine{00078       \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}Raster"{}};}
\DoxyCodeLine{00079     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (type == \mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1a4628781c4add56d9e3f547515561db61}{TImage::TOONZ\_RASTER}})}
\DoxyCodeLine{00080       \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}ToonzRaster"{}};}
\DoxyCodeLine{00081     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (type == \mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1aae0e08194ada9a9bb8271dfd21ef8b2e}{TImage::VECTOR}})}
\DoxyCodeLine{00082       \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}Vector"{}};}
\DoxyCodeLine{00083     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00084       \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}Unknown"{}};}
\DoxyCodeLine{00085   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00086     \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}Empty"{}};}
\DoxyCodeLine{00087 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_image_ad41bd9becbf965221a120399ae5a82f5}\label{class_t_script_binding_1_1_image_ad41bd9becbf965221a120399ae5a82f5}} 
\index{TScriptBinding::Image@{TScriptBinding::Image}!getWidth@{getWidth}}
\index{getWidth@{getWidth}!TScriptBinding::Image@{TScriptBinding::Image}}
\doxysubsubsection{\texorpdfstring{getWidth()}{getWidth()}}
{\footnotesize\ttfamily int TScript\+Binding\+::\+Image\+::get\+Width (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00053                     \{}
\DoxyCodeLine{00054   \textcolor{keywordflow}{return} !!m\_img \&\& !!m\_img-\/>\mbox{\hyperlink{class_t_image_acab19efe21f788a8016f0604c4c71912}{raster}}() ? m\_img-\/>\mbox{\hyperlink{class_t_image_acab19efe21f788a8016f0604c4c71912}{raster}}()-\/>getSize().lx : 0;}
\DoxyCodeLine{00055 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_image_a23d75e158633c8e2c1abb457673a9f53}\label{class_t_script_binding_1_1_image_a23d75e158633c8e2c1abb457673a9f53}} 
\index{TScriptBinding::Image@{TScriptBinding::Image}!load@{load}}
\index{load@{load}!TScriptBinding::Image@{TScriptBinding::Image}}
\doxysubsubsection{\texorpdfstring{load()}{load()}}
{\footnotesize\ttfamily QScript\+Value TScript\+Binding\+::\+Image\+::load (\begin{DoxyParamCaption}\item[{const QScript\+Value \&}]{fp }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00089                                                   \{}
\DoxyCodeLine{00090   \textcolor{comment}{// clear the old image (if any)}}
\DoxyCodeLine{00091   m\_img = \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}}();}
\DoxyCodeLine{00092 }
\DoxyCodeLine{00093   \textcolor{comment}{// get the path}}
\DoxyCodeLine{00094   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp;}
\DoxyCodeLine{00095   QScriptValue err = checkFilePath(context(), fpArg, fp);}
\DoxyCodeLine{00096   \textcolor{keywordflow}{if} (err.isError()) \textcolor{keywordflow}{return} err;}
\DoxyCodeLine{00097   QString fpStr = fpArg.toString();}
\DoxyCodeLine{00098 }
\DoxyCodeLine{00099   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00100     \textcolor{comment}{// check if the file/level does exist}}
\DoxyCodeLine{00101     \textcolor{keywordflow}{if} (!TSystem::doesExistFileOrLevel(fp)) \{}
\DoxyCodeLine{00102       \textcolor{keywordflow}{return} context()-\/>throwError(tr(\textcolor{stringliteral}{"{}File \%1 doesn't exist"{}}).arg(fpStr));}
\DoxyCodeLine{00103     \}}
\DoxyCodeLine{00104 }
\DoxyCodeLine{00105     \textcolor{comment}{// the file could be a level}}
\DoxyCodeLine{00106     TFileType::Type fileType = TFileType::getInfo(fp);}
\DoxyCodeLine{00107     \textcolor{keywordflow}{if} (TFileType::isLevel(fileType)) \{}
\DoxyCodeLine{00108       \textcolor{comment}{// file is a level: read first frame}}
\DoxyCodeLine{00109       \mbox{\hyperlink{class_t_level_reader_p}{TLevelReaderP}} lr(fp);}
\DoxyCodeLine{00110       \mbox{\hyperlink{class_t_level_p}{TLevelP}} level = lr-\/>loadInfo();}
\DoxyCodeLine{00111       \textcolor{keywordtype}{int} n         = level-\/>getFrameCount();}
\DoxyCodeLine{00112       \textcolor{keywordflow}{if} (n > 0) \{}
\DoxyCodeLine{00113         \textcolor{comment}{// there are some frames}}
\DoxyCodeLine{00114         \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid = fp.getFrame();}
\DoxyCodeLine{00115         \textcolor{keywordflow}{if} (fid == TFrameId::NO\_FRAME || fid == TFrameId::EMPTY\_FRAME)}
\DoxyCodeLine{00116           fid = level-\/>begin()-\/>first;}
\DoxyCodeLine{00117 }
\DoxyCodeLine{00118         m\_img = lr-\/>getFrameReader(fid)-\/>load();}
\DoxyCodeLine{00119         \textcolor{keywordflow}{if} (!m\_img) \{}
\DoxyCodeLine{00120           \textcolor{keywordflow}{return} context()-\/>throwError(QString(\textcolor{stringliteral}{"{}Could not read \%1"{}}).arg(fpStr));}
\DoxyCodeLine{00121         \}}
\DoxyCodeLine{00122         m\_img-\/>\mbox{\hyperlink{class_t_image_a3377c18a849addff5c2cb238176ad04f}{setPalette}}(level-\/>getPalette());}
\DoxyCodeLine{00123         \textcolor{keywordflow}{if} (n > 1 \&\& (fp.getFrame() == TFrameId::EMPTY\_FRAME ||}
\DoxyCodeLine{00124                       fp.getFrame() == TFrameId::NO\_FRAME)) \{}
\DoxyCodeLine{00125           \textcolor{comment}{// warning: a multi-\/frame level read into an Image}}
\DoxyCodeLine{00126           warning(tr(\textcolor{stringliteral}{"{}Loaded first frame of \%1"{}}).arg(n));}
\DoxyCodeLine{00127         \}}
\DoxyCodeLine{00128       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00129         \textcolor{comment}{// level contains no frame (not sure it can even happen)}}
\DoxyCodeLine{00130         \textcolor{keywordflow}{return} context()-\/>throwError(}
\DoxyCodeLine{00131             QString(\textcolor{stringliteral}{"{}\%1 contains no frames"{}}).arg(fpStr));}
\DoxyCodeLine{00132       \}}
\DoxyCodeLine{00133     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00134       \textcolor{comment}{// plain image: try to read it}}
\DoxyCodeLine{00135       \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_t_image_reader_ade3cafcda8a3e691b08892fb9cb3a97a}{TImageReader::load}}(fp, m\_img)) \{}
\DoxyCodeLine{00136         \textcolor{keywordflow}{return} context()-\/>throwError(}
\DoxyCodeLine{00137             QString(\textcolor{stringliteral}{"{}File \%1 not found or not readable"{}}).arg(fpStr));}
\DoxyCodeLine{00138       \}}
\DoxyCodeLine{00139     \}}
\DoxyCodeLine{00140     \textcolor{comment}{// return a reference to the Image object}}
\DoxyCodeLine{00141     \textcolor{keywordflow}{return} context()-\/>thisObject();}
\DoxyCodeLine{00142   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00143     \textcolor{keywordflow}{return} context()-\/>throwError(}
\DoxyCodeLine{00144         tr(\textcolor{stringliteral}{"{}Unexpected error while reading image"{}}).arg(fpStr));}
\DoxyCodeLine{00145   \}}
\DoxyCodeLine{00146 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_image_a4a52adb05f5a0d4ae866475ac9eb716a}\label{class_t_script_binding_1_1_image_a4a52adb05f5a0d4ae866475ac9eb716a}} 
\index{TScriptBinding::Image@{TScriptBinding::Image}!save@{save}}
\index{save@{save}!TScriptBinding::Image@{TScriptBinding::Image}}
\doxysubsubsection{\texorpdfstring{save()}{save()}}
{\footnotesize\ttfamily QScript\+Value TScript\+Binding\+::\+Image\+::save (\begin{DoxyParamCaption}\item[{const QScript\+Value \&}]{fp }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00148                                                   \{}
\DoxyCodeLine{00149   \textcolor{comment}{// clear the old image (if any)}}
\DoxyCodeLine{00150   \textcolor{keywordflow}{if} (!m\_img) \{}
\DoxyCodeLine{00151     \textcolor{keywordflow}{return} context()-\/>throwError(\textcolor{stringliteral}{"{}Can't save an empty image"{}});}
\DoxyCodeLine{00152   \}}
\DoxyCodeLine{00153 }
\DoxyCodeLine{00154   \textcolor{comment}{// get the path}}
\DoxyCodeLine{00155   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp;}
\DoxyCodeLine{00156   QScriptValue err = checkFilePath(context(), fpArg, fp);}
\DoxyCodeLine{00157   \textcolor{keywordflow}{if} (err.isError()) \textcolor{keywordflow}{return} err;}
\DoxyCodeLine{00158   QString fpStr = fpArg.toString();}
\DoxyCodeLine{00159 }
\DoxyCodeLine{00160   \textcolor{comment}{// handle conversion (if it is needed and possible)}}
\DoxyCodeLine{00161   TFileType::Type fileType = TFileType::getInfo(fp);}
\DoxyCodeLine{00162 }
\DoxyCodeLine{00163   \textcolor{keywordtype}{bool} isCompatible = \textcolor{keyword}{false};}
\DoxyCodeLine{00164   \textcolor{keywordflow}{if} (TFileType::isFullColor(fileType)) \{}
\DoxyCodeLine{00165     \textcolor{keywordflow}{if} (m\_img-\/>\mbox{\hyperlink{class_t_image_a52205464a87894ee940a1083a7641d86}{getType}}() == \mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1ada6df9de5e7d50b9c9c823871bee09d6}{TImage::RASTER}}) isCompatible = \textcolor{keyword}{true};}
\DoxyCodeLine{00166   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (TFileType::isVector(fileType)) \{}
\DoxyCodeLine{00167     \textcolor{keywordflow}{if} (m\_img-\/>\mbox{\hyperlink{class_t_image_a52205464a87894ee940a1083a7641d86}{getType}}() == \mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1aae0e08194ada9a9bb8271dfd21ef8b2e}{TImage::VECTOR}}) isCompatible = \textcolor{keyword}{true};}
\DoxyCodeLine{00168   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (fileType \& TFileType::CMAPPED\_IMAGE) \{}
\DoxyCodeLine{00169     \textcolor{keywordflow}{if} (m\_img-\/>\mbox{\hyperlink{class_t_image_a52205464a87894ee940a1083a7641d86}{getType}}() == \mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1a4628781c4add56d9e3f547515561db61}{TImage::TOONZ\_RASTER}}) isCompatible = \textcolor{keyword}{true};}
\DoxyCodeLine{00170   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00171     \textcolor{keywordflow}{return} context()-\/>throwError(tr(\textcolor{stringliteral}{"{}Unrecognized file type :"{}}).arg(fpStr));}
\DoxyCodeLine{00172   \}}
\DoxyCodeLine{00173   \textcolor{keywordflow}{if} (!isCompatible) \{}
\DoxyCodeLine{00174     \textcolor{keywordflow}{return} context()-\/>throwError(}
\DoxyCodeLine{00175         tr(\textcolor{stringliteral}{"{}Can't save a \%1 image to this file type : \%2"{}})}
\DoxyCodeLine{00176             .arg(getType())}
\DoxyCodeLine{00177             .arg(fpStr));}
\DoxyCodeLine{00178   \}}
\DoxyCodeLine{00179 }
\DoxyCodeLine{00180   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00181     \textcolor{keywordflow}{if} (TFileType::isLevel(fileType)) \{}
\DoxyCodeLine{00182       \mbox{\hyperlink{class_t_level_p}{TLevelP}} level = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_level}{TLevel}}();}
\DoxyCodeLine{00183       level-\/>setPalette(m\_img-\/>getPalette());}
\DoxyCodeLine{00184       level-\/>setFrame(\mbox{\hyperlink{class_t_frame_id}{TFrameId}}(1), m\_img);}
\DoxyCodeLine{00185       \mbox{\hyperlink{class_t_level_writer_p}{TLevelWriterP}} lw(fp);}
\DoxyCodeLine{00186       \textcolor{keywordflow}{if} (m\_img-\/>getPalette()) lw-\/>setPalette(m\_img-\/>getPalette());}
\DoxyCodeLine{00187       lw-\/>save(level);}
\DoxyCodeLine{00188     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00189       \mbox{\hyperlink{class_t_image_writer_p}{TImageWriterP}} iw(fp);}
\DoxyCodeLine{00190       iw-\/>save(fp, m\_img);}
\DoxyCodeLine{00191     \}}
\DoxyCodeLine{00192     \textcolor{comment}{// return a reference to the Image object}}
\DoxyCodeLine{00193     \textcolor{keywordflow}{return} context()-\/>thisObject();}
\DoxyCodeLine{00194   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00195     \textcolor{keywordflow}{return} context()-\/>throwError(}
\DoxyCodeLine{00196         tr(\textcolor{stringliteral}{"{}Unexpected error while writing image"{}}).arg(fpStr));}
\DoxyCodeLine{00197   \}}
\DoxyCodeLine{00198 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_image_a494173671f4a55d867547d59786cef0a}\label{class_t_script_binding_1_1_image_a494173671f4a55d867547d59786cef0a}} 
\index{TScriptBinding::Image@{TScriptBinding::Image}!setImg@{setImg}}
\index{setImg@{setImg}!TScriptBinding::Image@{TScriptBinding::Image}}
\doxysubsubsection{\texorpdfstring{setImg()}{setImg()}}
{\footnotesize\ttfamily void TScript\+Binding\+::\+Image\+::set\+Img (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} \&}]{img }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00028 \{ m\_img = img; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_script_binding_1_1_image_a11ed78e344edf75b1831b618c9ced3aa}\label{class_t_script_binding_1_1_image_a11ed78e344edf75b1831b618c9ced3aa}} 
\index{TScriptBinding::Image@{TScriptBinding::Image}!toString@{toString}}
\index{toString@{toString}!TScriptBinding::Image@{TScriptBinding::Image}}
\doxysubsubsection{\texorpdfstring{toString()}{toString()}}
{\footnotesize\ttfamily QScript\+Value TScript\+Binding\+::\+Image\+::to\+String (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00033                              \{}
\DoxyCodeLine{00034   \textcolor{keywordflow}{if} (m\_img) \{}
\DoxyCodeLine{00035     \mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1}{TImage::Type}} type = m\_img-\/>\mbox{\hyperlink{class_t_image_a52205464a87894ee940a1083a7641d86}{getType}}();}
\DoxyCodeLine{00036     \textcolor{keywordflow}{if} (type == \mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1ada6df9de5e7d50b9c9c823871bee09d6}{TImage::RASTER}})}
\DoxyCodeLine{00037       \textcolor{keywordflow}{return} QString(\textcolor{stringliteral}{"{}Raster image ( \%1 x \%2 )"{}})}
\DoxyCodeLine{00038           .arg(getWidth())}
\DoxyCodeLine{00039           .arg(getHeight());}
\DoxyCodeLine{00040     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (type == \mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1a4628781c4add56d9e3f547515561db61}{TImage::TOONZ\_RASTER}})}
\DoxyCodeLine{00041       \textcolor{keywordflow}{return} QString(\textcolor{stringliteral}{"{}Toonz raster image ( \%1 x \%2 )"{}})}
\DoxyCodeLine{00042           .arg(getWidth())}
\DoxyCodeLine{00043           .arg(getHeight());}
\DoxyCodeLine{00044     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (type == \mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1aae0e08194ada9a9bb8271dfd21ef8b2e}{TImage::VECTOR}})}
\DoxyCodeLine{00045       \textcolor{keywordflow}{return} QString(\textcolor{stringliteral}{"{}Vector image"{}});}
\DoxyCodeLine{00046     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00047       \textcolor{keywordflow}{return} QString(\textcolor{stringliteral}{"{}Image"{}});}
\DoxyCodeLine{00048   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00049     \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}Empty image"{}};}
\DoxyCodeLine{00050   \}}
\DoxyCodeLine{00051 \}}

\end{DoxyCode}


\doxysubsection{Property Documentation}
\mbox{\Hypertarget{class_t_script_binding_1_1_image_ad24fe4a369b1ed776efdec1aefb6c17f}\label{class_t_script_binding_1_1_image_ad24fe4a369b1ed776efdec1aefb6c17f}} 
\index{TScriptBinding::Image@{TScriptBinding::Image}!dpi@{dpi}}
\index{dpi@{dpi}!TScriptBinding::Image@{TScriptBinding::Image}}
\doxysubsubsection{\texorpdfstring{dpi}{dpi}}
{\footnotesize\ttfamily double TScript\+Binding\+::\+Image\+::dpi\hspace{0.3cm}{\ttfamily [read]}}

\mbox{\Hypertarget{class_t_script_binding_1_1_image_ace062a0fb6478aa2f83abdc93e735647}\label{class_t_script_binding_1_1_image_ace062a0fb6478aa2f83abdc93e735647}} 
\index{TScriptBinding::Image@{TScriptBinding::Image}!height@{height}}
\index{height@{height}!TScriptBinding::Image@{TScriptBinding::Image}}
\doxysubsubsection{\texorpdfstring{height}{height}}
{\footnotesize\ttfamily int TScript\+Binding\+::\+Image\+::height\hspace{0.3cm}{\ttfamily [read]}}

\mbox{\Hypertarget{class_t_script_binding_1_1_image_ae6a7a153cf870066de89d1fd4316daa8}\label{class_t_script_binding_1_1_image_ae6a7a153cf870066de89d1fd4316daa8}} 
\index{TScriptBinding::Image@{TScriptBinding::Image}!type@{type}}
\index{type@{type}!TScriptBinding::Image@{TScriptBinding::Image}}
\doxysubsubsection{\texorpdfstring{type}{type}}
{\footnotesize\ttfamily QString TScript\+Binding\+::\+Image\+::type\hspace{0.3cm}{\ttfamily [read]}}

\mbox{\Hypertarget{class_t_script_binding_1_1_image_a44c0afea9791dfcb94b8676b7e0aed2a}\label{class_t_script_binding_1_1_image_a44c0afea9791dfcb94b8676b7e0aed2a}} 
\index{TScriptBinding::Image@{TScriptBinding::Image}!width@{width}}
\index{width@{width}!TScriptBinding::Image@{TScriptBinding::Image}}
\doxysubsubsection{\texorpdfstring{width}{width}}
{\footnotesize\ttfamily int TScript\+Binding\+::\+Image\+::width\hspace{0.3cm}{\ttfamily [read]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonz/scriptbinding\+\_\+image.\+h\item 
E\+:/opentoonz/toonz/sources/toonzlib/scriptbinding\+\_\+image.\+cpp\end{DoxyCompactItemize}
