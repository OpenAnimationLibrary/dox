\hypertarget{class_tile_fx}{}\doxysection{Tile\+Fx Class Reference}
\label{class_tile_fx}\index{TileFx@{TileFx}}
Inheritance diagram for Tile\+Fx\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=5.000000cm]{class_tile_fx}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_tile_fx_a1faba4bf7398d0e365295e02508d1a05}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
bool \mbox{\hyperlink{class_tile_fx_afc339347f8ce572517af28344a1968f0}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\item 
void \mbox{\hyperlink{class_tile_fx_ab2255f8916ea1d280b6a8adc395b63c3}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&ri) override
\item 
int \mbox{\hyperlink{class_tile_fx_a0a66e4b5ad39655cca54d028de2e6fe3}{get\+Memory\+Requirement}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{class_tile_fx_a700bf174919508dc19cae4d74e5dfedf}{transform}} (double frame, int port, const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect\+On\+Output, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info\+On\+Output, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect\+On\+Input, \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info\+On\+Input) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_tile_fx_a407c1cf7dc382e20eb0dde149c4c5b2b}\label{class_tile_fx_a407c1cf7dc382e20eb0dde149c4c5b2b}} 
\index{TileFx@{TileFx}!TileFx@{TileFx}}
\index{TileFx@{TileFx}!TileFx@{TileFx}}
\doxysubsubsection{\texorpdfstring{TileFx()}{TileFx()}}
{\footnotesize\ttfamily Tile\+Fx\+::\+Tile\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00044     : m\_mode(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_enum_param}{TIntEnumParam}}(eTile, \textcolor{stringliteral}{"{}Tile"{}}))}
\DoxyCodeLine{00045     , m\_xMirror(\textcolor{keyword}{false})}
\DoxyCodeLine{00046     , m\_yMirror(\textcolor{keyword}{false})}
\DoxyCodeLine{00047     , m\_margin(-\/1.0) \{}
\DoxyCodeLine{00048   m\_margin-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00049   \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Source"{}}, m\_input);}
\DoxyCodeLine{00050   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}mode"{}}, m\_mode);}
\DoxyCodeLine{00051   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}xMirror"{}}, m\_xMirror);}
\DoxyCodeLine{00052   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}yMirror"{}}, m\_yMirror);}
\DoxyCodeLine{00053   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}margin"{}}, m\_margin);}
\DoxyCodeLine{00054   m\_mode-\/>addItem(eTileHorizontally, \textcolor{stringliteral}{"{}Tile Horizontally"{}});}
\DoxyCodeLine{00055   m\_mode-\/>addItem(eTileVertically, \textcolor{stringliteral}{"{}Tile Vertically"{}});}
\DoxyCodeLine{00056 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tile_fx_a66b37912c0798b9332ef3440ed1e3a14}\label{class_tile_fx_a66b37912c0798b9332ef3440ed1e3a14}} 
\index{TileFx@{TileFx}!````~TileFx@{$\sim$TileFx}}
\index{````~TileFx@{$\sim$TileFx}!TileFx@{TileFx}}
\doxysubsubsection{\texorpdfstring{$\sim$TileFx()}{~TileFx()}}
{\footnotesize\ttfamily Tile\+Fx\+::$\sim$\+Tile\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00060 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_tile_fx_afc339347f8ce572517af28344a1968f0}\label{class_tile_fx_afc339347f8ce572517af28344a1968f0}} 
\index{TileFx@{TileFx}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!TileFx@{TileFx}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool Tile\+Fx\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00064                                                                 \{}
\DoxyCodeLine{00065   \textcolor{comment}{// Currently, only affines which transform the X and Y axis into themselves}}
\DoxyCodeLine{00066   \textcolor{comment}{// may}}
\DoxyCodeLine{00067   \textcolor{comment}{// be handled by this fx...}}
\DoxyCodeLine{00068   \textcolor{keywordflow}{return} (fabs(info.m\_affine.a12) < 0.0001 \&\&}
\DoxyCodeLine{00069           fabs(info.m\_affine.a21) < 0.0001) ||}
\DoxyCodeLine{00070          (fabs(info.m\_affine.a11) < 0.0001 \&\& fabs(info.m\_affine.a22) < 0.0001);}
\DoxyCodeLine{00071 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tile_fx_ab2255f8916ea1d280b6a8adc395b63c3}\label{class_tile_fx_ab2255f8916ea1d280b6a8adc395b63c3}} 
\index{TileFx@{TileFx}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!TileFx@{TileFx}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void Tile\+Fx\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{ri }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00131                                                                            \{}
\DoxyCodeLine{00132   \textcolor{keywordflow}{if} (!m\_input.isConnected()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00133 }
\DoxyCodeLine{00134   \mbox{\hyperlink{class_t_rect_t}{TRectD}} inputBox;}
\DoxyCodeLine{00135   m\_input-\/>getBBox(frame, inputBox, ri);}
\DoxyCodeLine{00136 }
\DoxyCodeLine{00137   \textcolor{keywordtype}{double} scale = sqrt(fabs(ri.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.det()));}
\DoxyCodeLine{00138   \textcolor{keywordtype}{int} margin   = m\_margin-\/>getValue(frame) * scale;}
\DoxyCodeLine{00139   inputBox     = inputBox.enlarge(margin);}
\DoxyCodeLine{00140 }
\DoxyCodeLine{00141   \textcolor{keywordflow}{if} (inputBox.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00142 }
\DoxyCodeLine{00143   \textcolor{keywordflow}{if} (inputBox == TConsts::infiniteRectD) \{}
\DoxyCodeLine{00144     m\_input-\/>compute(tile, frame, ri);}
\DoxyCodeLine{00145     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00146   \}}
\DoxyCodeLine{00147 }
\DoxyCodeLine{00148   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} size(0, 0);}
\DoxyCodeLine{00149   size.lx = tceil(inputBox.getLx());}
\DoxyCodeLine{00150   size.ly = tceil(inputBox.getLy());}
\DoxyCodeLine{00151   \mbox{\hyperlink{class_t_tile}{TTile}} inputTile;}
\DoxyCodeLine{00152   m\_input-\/>allocateAndCompute(inputTile, inputBox.getP00(), size,}
\DoxyCodeLine{00153                               tile.getRaster(), frame, ri);}
\DoxyCodeLine{00154   makeTile(inputTile, tile);}
\DoxyCodeLine{00155 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tile_fx_a1faba4bf7398d0e365295e02508d1a05}\label{class_tile_fx_a1faba4bf7398d0e365295e02508d1a05}} 
\index{TileFx@{TileFx}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!TileFx@{TileFx}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool Tile\+Fx\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00076                                                     \{}
\DoxyCodeLine{00077   \textcolor{keywordflow}{if} (m\_input.isConnected()) \{}
\DoxyCodeLine{00078     bBox = TConsts::infiniteRectD;}
\DoxyCodeLine{00079     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00080   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00081     bBox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00082     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00083   \}}
\DoxyCodeLine{00084 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tile_fx_a0a66e4b5ad39655cca54d028de2e6fe3}\label{class_tile_fx_a0a66e4b5ad39655cca54d028de2e6fe3}} 
\index{TileFx@{TileFx}!getMemoryRequirement@{getMemoryRequirement}}
\index{getMemoryRequirement@{getMemoryRequirement}!TileFx@{TileFx}}
\doxysubsubsection{\texorpdfstring{getMemoryRequirement()}{getMemoryRequirement()}}
{\footnotesize\ttfamily int Tile\+Fx\+::get\+Memory\+Requirement (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Specifies the approximate size (in Mega\+Bytes) of the maximum allocation instance that this fx will need to perform in order to render the passed input. This method should be reimplemented in order to make the Toonz rendering process aware of the use of big raster memory chunks, at least. Observe that the passed tile geometry is implicitly {\itshape  already allocated \texorpdfstring{$<$}{<}\textbackslash{}i\texorpdfstring{$>$}{>} for the fx output. ~\newline
The default implementation returns 0, assuming that the passed implicit memory size is passed below in node computation without further allocation of resources. Fxs can reimplement this to -\/1 to explicitly disable the Toonz\textquotesingle{}s smart memory handling. ~\newline
 ~\newline
\begin{DoxyNote}{Note}
The rendering process ensures that the passed render settings are {\itshape handled} by the fx before this function is invoked -\/ do not waste code for it. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRaster\+Fx\+::memory\+Size}} and TRaster\+Fx\+::can\+Handle methods. 
\end{DoxySeeAlso}
}

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_af8eb991c9756f4fb2e48d9f96cbacfba}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00118                                                               \{}
\DoxyCodeLine{00119   \mbox{\hyperlink{class_t_rect_t}{TRectD}} inputBox;}
\DoxyCodeLine{00120   m\_input-\/>getBBox(frame, inputBox, info);}
\DoxyCodeLine{00121 }
\DoxyCodeLine{00122   \textcolor{keywordtype}{double} scale = sqrt(fabs(info.m\_affine.det()));}
\DoxyCodeLine{00123   \textcolor{keywordtype}{int} margin   = m\_margin-\/>getValue(frame) * scale;}
\DoxyCodeLine{00124   inputBox     = inputBox.enlarge(margin);}
\DoxyCodeLine{00125 }
\DoxyCodeLine{00126   \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRasterFx::memorySize}}(inputBox, info.m\_bpp);}
\DoxyCodeLine{00127 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00560}{TRaster\+Fx\+::memory\+Size()}}.

\mbox{\Hypertarget{class_tile_fx_a700bf174919508dc19cae4d74e5dfedf}\label{class_tile_fx_a700bf174919508dc19cae4d74e5dfedf}} 
\index{TileFx@{TileFx}!transform@{transform}}
\index{transform@{transform}!TileFx@{TileFx}}
\doxysubsubsection{\texorpdfstring{transform()}{transform()}}
{\footnotesize\ttfamily void Tile\+Fx\+::transform (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{int}]{port,  }\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect\+On\+Output,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info\+On\+Output,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect\+On\+Input,  }\item[{\mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info\+On\+Input }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00090                                                      \{}
\DoxyCodeLine{00091   infoOnInput = infoOnOutput;}
\DoxyCodeLine{00092 }
\DoxyCodeLine{00093   \mbox{\hyperlink{class_t_rect_t}{TRectD}} inputBox;}
\DoxyCodeLine{00094   m\_input-\/>getBBox(frame, inputBox, infoOnOutput);}
\DoxyCodeLine{00095 }
\DoxyCodeLine{00096   \textcolor{keywordtype}{double} scale = sqrt(fabs(infoOnOutput.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.det()));}
\DoxyCodeLine{00097   \textcolor{keywordtype}{int} margin   = m\_margin-\/>getValue(frame) * scale;}
\DoxyCodeLine{00098   inputBox     = inputBox.enlarge(margin);}
\DoxyCodeLine{00099 }
\DoxyCodeLine{00100   \textcolor{keywordflow}{if} (inputBox.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}()) \{}
\DoxyCodeLine{00101     rectOnInput.empty();}
\DoxyCodeLine{00102     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00103   \}}
\DoxyCodeLine{00104   \textcolor{keywordflow}{if} (inputBox == TConsts::infiniteRectD) \{}
\DoxyCodeLine{00105     infoOnInput = infoOnOutput;}
\DoxyCodeLine{00106     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00107   \}}
\DoxyCodeLine{00108 }
\DoxyCodeLine{00109   \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}} size(0, 0);}
\DoxyCodeLine{00110   size.lx     = tceil(inputBox.getLx());}
\DoxyCodeLine{00111   size.ly     = tceil(inputBox.getLy());}
\DoxyCodeLine{00112   rectOnInput = \mbox{\hyperlink{class_t_rect_t}{TRectD}}(inputBox.getP00(), size);}
\DoxyCodeLine{00113 \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/tilefx.\+cpp\end{DoxyCompactItemize}
