\hypertarget{namespace_toonz_ext}{}\doxysection{Toonz\+Ext Namespace Reference}
\label{namespace_toonz_ext}\index{ToonzExt@{ToonzExt}}


Toonz Extension namespace.  


\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_composite_status}{Composite\+Status}}
\begin{DoxyCompactList}\small\item\em This class maintains internal data for Dragger manipulator. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{struct_toonz_ext_1_1_context_status}{Context\+Status}}
\begin{DoxyCompactList}\small\item\em This class maintains data required from manipulator. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_corner_deformation}{Corner\+Deformation}}
\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_deformation_selector}{Deformation\+Selector}}
\begin{DoxyCompactList}\small\item\em This class is a Singleton that selects the correct \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl}{Stroke\+Deformation\+Impl}} that will use \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation}{Stroke\+Deformation}}. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_designer}{Designer}}
\begin{DoxyCompactList}\small\item\em This class is a visitor to manage properly Draw method. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_even_int}{Even\+Int}}
\begin{DoxyCompactList}\small\item\em This class is an abstraction to wrap all odd number. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_interface_status}{Interface\+Status}}
\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_linear_potential}{Linear\+Potential}}
\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_not_symmetric_bezier_potential}{Not\+Symmetric\+Bezier\+Potential}}
\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_not_symmetric_exp_potential}{Not\+Symmetric\+Exp\+Potential}}
\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_odd_int}{Odd\+Int}}
\begin{DoxyCompactList}\small\item\em This class is an abstraction to wrap all odd number. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_overall_designer}{Overall\+Designer}}
\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_potential}{Potential}}
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_toonz_ext_1_1_potential}{Potential}} is an abstraction to maintain a mathematical potential function. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_selector}{Selector}}
\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_smooth_deformation}{Smooth\+Deformation}}
\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_square_potential}{Square\+Potential}}
\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_straight_corner_deformation}{Straight\+Corner\+Deformation}}
\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation}{Stroke\+Deformation}}
\begin{DoxyCompactList}\small\item\em This class is the interface for manipulation algorithms. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl}{Stroke\+Deformation\+Impl}}
\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_stroke_parametric_deformer}{Stroke\+Parametric\+Deformer}}
\begin{DoxyCompactList}\small\item\em This class implements new deformer. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{class_toonz_ext_1_1_stroke_status}{Stroke\+Status}}
\begin{DoxyCompactList}\small\item\em This class maintains internal data for Dragger manipulator. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef std\+::pair$<$ double, double $>$ \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{Interval}}
\begin{DoxyCompactList}\small\item\em An useful alias for a pair of double. \end{DoxyCompactList}\item 
typedef std\+::vector$<$ \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{Interval}} $>$ \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Intervals}}
\begin{DoxyCompactList}\small\item\em List of intervals. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
DVAPI bool \mbox{\hyperlink{namespace_toonz_ext_ad34a2f00703a015395583693c4c4db7b}{straight\+Corners\+Detector}} (const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$stroke, std\+::vector$<$ double $>$ \&corners)
\begin{DoxyCompactList}\small\item\em Like corners\+Detector but for straight corners. \end{DoxyCompactList}\item 
DVAPI bool \mbox{\hyperlink{namespace_toonz_ext_a6d0c60df65b9f34e2068f78463502478}{detect\+Straight\+Intervals}} (const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$stroke, \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} \&intervals, double tolerance=TConsts\+::epsilon)
\begin{DoxyCompactList}\small\item\em Find intervals where stroke is a straight line. \end{DoxyCompactList}\item 
DVAPI bool \mbox{\hyperlink{namespace_toonz_ext_a518f83ed246c63667f0185124cf724c5}{find\+Nearest\+Straight\+Corners}} (const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$s, double actualW, \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{Interval}} \&out, const \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} $\ast$const cl=0, double tolerance=TConsts\+::epsilon)
\begin{DoxyCompactList}\small\item\em Retrieve parameters for straight intervals near actualW parameter. \end{DoxyCompactList}\item 
DVAPI bool \mbox{\hyperlink{namespace_toonz_ext_aa06bd1db88289e43f6daf6089c2648f8}{is\+AStraight\+Corner}} (const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$s, double actualW, const \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} $\ast$const cl=0, double tolerance=TConsts\+::epsilon)
\item 
DVAPI bool \mbox{\hyperlink{namespace_toonz_ext_a192dcaf5d96235356ae59ae418b125fe}{corners\+Detector}} (const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$stroke, int min\+Degree, std\+::vector$<$ double $>$ \&corners)
\begin{DoxyCompactList}\small\item\em Enhanced version of Toonz detect corners. \end{DoxyCompactList}\item 
DVAPI bool \mbox{\hyperlink{namespace_toonz_ext_adc55f31b9acafe1321c64777ba6c38c1}{detect\+Spire\+Intervals}} (const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$stroke, \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} \&intervals, int min\+Degree)
\begin{DoxyCompactList}\small\item\em Find intervals where stroke has limited from spire. \end{DoxyCompactList}\item 
DVAPI bool \mbox{\hyperlink{namespace_toonz_ext_af9eab69f85f85841b9bf44c85ac86765}{find\+Nearest\+Spire\+Corners}} (const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$s, double actualW, \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{Interval}} \&out, int corner\+Size, const \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} $\ast$const cl=0, double tolerance=TConsts\+::epsilon)
\begin{DoxyCompactList}\small\item\em Retrieve parameters for corners near actualW parameter. \end{DoxyCompactList}\item 
DVAPI bool \mbox{\hyperlink{namespace_toonz_ext_adc16bc4239c1a2cb1e5b5fcb3ab68240}{is\+ASpire\+Corner}} (const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$s, double w, int corner\+Size, const \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} $\ast$const cl=0, double tolerance=TConsts\+::epsilon)
\item 
DVAPI void \mbox{\hyperlink{namespace_toonz_ext_a06d3af5a612c292a3eea837696e52b7e}{find\+Corners}} (const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$stroke, \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Intervals}} \&corners, \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Intervals}} \&intervals, int angle, double tolerance)
\begin{DoxyCompactList}\small\item\em Retrieve corners of a \mbox{\hyperlink{class_t_stroke}{TStroke}}. \end{DoxyCompactList}\item 
DVAPI bool \mbox{\hyperlink{namespace_toonz_ext_a8ed9bd9d0e778530a6002d29f9f31b80}{find\+Nearest\+Corners}} (const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$stroke, double w, \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{Interval}} \&out, const \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Intervals}} \&values, double tolerance=TConsts\+::epsilon)
\begin{DoxyCompactList}\small\item\em Retrieve corners of a \mbox{\hyperlink{class_t_stroke}{TStroke}}. \end{DoxyCompactList}\item 
DVAPI \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ \mbox{\hyperlink{namespace_toonz_ext_afc2e773c11a739935be9804745e2cd49}{rotate\+Control\+Point}} (const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$stroke, const \mbox{\hyperlink{class_toonz_ext_1_1_even_int}{Toonz\+Ext\+::\+Even\+Int}} \&even, double at\+Length)
\begin{DoxyCompactList}\small\item\em Rotate the control point at even position \mbox{[}0,2,4,...\mbox{]} in a new position along the close path of a self\+Loop stroke. \end{DoxyCompactList}\item 
DVAPI bool \mbox{\hyperlink{namespace_toonz_ext_af2d6f6c363d628eb19659c38fde2c024}{get\+AllW}} (const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$stroke, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pnt, double \&dist2, std\+::vector$<$ double $>$ \&parameters)
\item 
DVAPI bool \mbox{\hyperlink{namespace_toonz_ext_a68a0d750cd9ea968b349828ed2eacfa9}{replace\+Stroke}} (\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$old\+\_\+stroke, \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$new\+\_\+stroke, unsigned int n\+\_\+, \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&vi)
\begin{DoxyCompactList}\small\item\em Replace a stroke in a vector image. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{namespace_toonz_ext_a184441a805e5441cff35f15b937fa451}{clone\+Stroke\+Status}} (const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$from, \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$to)
\begin{DoxyCompactList}\small\item\em Copy several parameters that are not copied with operator=. \end{DoxyCompactList}\item 
{\footnotesize template$<$class T $>$ }\\bool \mbox{\hyperlink{namespace_toonz_ext_ab724837729ae24410cef394ea16ac0e0}{is\+Valid}} (const T $\ast$s)
\item 
bool \mbox{\hyperlink{namespace_toonz_ext_a244deb082112d1d68c1568d4d959e0ad}{is\+Valid}} (double w)
\item 
std\+::ostream \& \mbox{\hyperlink{namespace_toonz_ext_aee3e67cb066977ee0e6269f30afaeee0}{operator$<$$<$}} (std\+::ostream \&os, const \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{Interval}} \&interval)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Toonz Extension namespace. 

This namespace contains a lot of class and functions to manipulate strokes. 

\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}\label{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}} 
\index{ToonzExt@{ToonzExt}!Interval@{Interval}}
\index{Interval@{Interval}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{Interval}{Interval}}
{\footnotesize\ttfamily typedef std\+::pair$<$double, double$>$ \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{Toonz\+Ext\+::\+Interval}}}



An useful alias for a pair of double. 

\mbox{\Hypertarget{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}\label{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}} 
\index{ToonzExt@{ToonzExt}!Intervals@{Intervals}}
\index{Intervals@{Intervals}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{Intervals}{Intervals}}
{\footnotesize\ttfamily typedef std\+::vector$<$\mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{Interval}}$>$ \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}}}



List of intervals. 



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespace_toonz_ext_a184441a805e5441cff35f15b937fa451}\label{namespace_toonz_ext_a184441a805e5441cff35f15b937fa451}} 
\index{ToonzExt@{ToonzExt}!cloneStrokeStatus@{cloneStrokeStatus}}
\index{cloneStrokeStatus@{cloneStrokeStatus}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{cloneStrokeStatus()}{cloneStrokeStatus()}}
{\footnotesize\ttfamily void Toonz\+Ext\+::clone\+Stroke\+Status (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{from,  }\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{to }\end{DoxyParamCaption})}



Copy several parameters that are not copied with operator=. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01117                                                                  \{}
\DoxyCodeLine{01118   \textcolor{keywordflow}{if} (!ToonzExt::isValid(from) || !ToonzExt::isValid(to)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01119 }
\DoxyCodeLine{01120   to-\/>setId(from-\/>getId());}
\DoxyCodeLine{01121   to-\/>\mbox{\hyperlink{class_t_stroke_afa2c66ae11a70e68b3de3ce0b4cfb049}{setSelfLoop}}(from-\/>\mbox{\hyperlink{class_t_stroke_a3565d6c34d3eb02fb1a6993ca626425c}{isSelfLoop}}());}
\DoxyCodeLine{01122   to-\/>\mbox{\hyperlink{class_t_stroke_a33f59dfbed74b577700351eac8c2fc7b}{setStyle}}(from-\/>\mbox{\hyperlink{class_t_stroke_ab77068d7894a29cc1878e173f46ed785}{getStyle}}());}
\DoxyCodeLine{01123   to-\/>\mbox{\hyperlink{class_t_stroke_af4c88e9c3ec57efa8cd56942237cdaf8}{setAverageThickness}}(from-\/>\mbox{\hyperlink{class_t_stroke_aaf5d138270c9dcf7d806457e49649bfa}{getAverageThickness}}());}
\DoxyCodeLine{01124 }
\DoxyCodeLine{01125   to-\/>\mbox{\hyperlink{class_t_stroke_a03d49743089710215ab6984db1f6e3a2}{invalidate}}();}
\DoxyCodeLine{01126   to-\/>enableComputeOfCaches();}
\DoxyCodeLine{01127 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01816}{TStroke\+::get\+Average\+Thickness()}}, \mbox{\hyperlink{l02366}{TStroke\+::get\+Style()}}, \mbox{\hyperlink{l01606}{TStroke\+::invalidate()}}, \mbox{\hyperlink{l02488}{TStroke\+::is\+Self\+Loop()}}, \mbox{\hyperlink{l01825}{TStroke\+::set\+Average\+Thickness()}}, \mbox{\hyperlink{l02469}{TStroke\+::set\+Self\+Loop()}}, and \mbox{\hyperlink{l02370}{TStroke\+::set\+Style()}}.



Referenced by \mbox{\hyperlink{l00470}{Toonz\+Ext\+::\+Stroke\+Deformation\+Impl\+::deactivate\+\_\+impl()}}.

\mbox{\Hypertarget{namespace_toonz_ext_a192dcaf5d96235356ae59ae418b125fe}\label{namespace_toonz_ext_a192dcaf5d96235356ae59ae418b125fe}} 
\index{ToonzExt@{ToonzExt}!cornersDetector@{cornersDetector}}
\index{cornersDetector@{cornersDetector}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{cornersDetector()}{cornersDetector()}}
{\footnotesize\ttfamily DVAPI bool Toonz\+Ext\+::corners\+Detector (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke,  }\item[{int}]{min\+Degree,  }\item[{std\+::vector$<$ double $>$ \&}]{corners }\end{DoxyParamCaption})}



Enhanced version of Toonz detect corners. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01026                                                                  \{}
\DoxyCodeLine{01027   assert(stroke);}
\DoxyCodeLine{01028   \textcolor{keywordflow}{if} (!stroke) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01029   assert(corners.empty());}
\DoxyCodeLine{01030   \textcolor{keywordflow}{if} (!corners.empty()) corners.clear();}
\DoxyCodeLine{01031 }
\DoxyCodeLine{01032   assert(0 <= minDegree \&\& minDegree <= 180);}
\DoxyCodeLine{01033 }
\DoxyCodeLine{01034   minDegree = normalizeAngle(minDegree);}
\DoxyCodeLine{01035 }
\DoxyCodeLine{01036   \textcolor{keyword}{const} \textcolor{keywordtype}{double} minSin = degree2sin(minDegree), minCos = degree2cos(minDegree);}
\DoxyCodeLine{01037 }
\DoxyCodeLine{01038   assert(0.0 <= minSin \&\& minSin <= 1.0);}
\DoxyCodeLine{01039 }
\DoxyCodeLine{01040   \textcolor{comment}{// first step remove chunks with null length}}
\DoxyCodeLine{01041 }
\DoxyCodeLine{01042   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_thick_quadratic}{TThickQuadratic}} *quad1 = 0, *quad2 = 0;}
\DoxyCodeLine{01043 }
\DoxyCodeLine{01044   UINT chunkCount = stroke-\/>\mbox{\hyperlink{class_t_stroke_a81b63663a798724333d8de692fdbcac0}{getChunkCount}}();}
\DoxyCodeLine{01045 }
\DoxyCodeLine{01046   quad1 = stroke-\/>\mbox{\hyperlink{class_t_stroke_a06b18ffed330411aad73ef1748a3f263}{getChunk}}(0);}
\DoxyCodeLine{01047   assert(quad1);}
\DoxyCodeLine{01048   \textcolor{keywordflow}{if} (!quad1) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01049 }
\DoxyCodeLine{01050   \textcolor{keywordtype}{bool} error = \textcolor{keyword}{false}, check = \textcolor{keyword}{false};}
\DoxyCodeLine{01051 }
\DoxyCodeLine{01052   std::set<double> internal\_corners;}
\DoxyCodeLine{01053 }
\DoxyCodeLine{01054   \textcolor{keywordtype}{double} t;}
\DoxyCodeLine{01055 }
\DoxyCodeLine{01056   \textcolor{keywordflow}{if} (curveIsStraight(quad1, t)) \{}
\DoxyCodeLine{01057     \textcolor{keywordflow}{if} (t != -\/1) \{}
\DoxyCodeLine{01058       check = mapValueInStroke(stroke, quad1, t, t);}
\DoxyCodeLine{01059       assert(check);}
\DoxyCodeLine{01060       \textcolor{keywordflow}{if} (check) internal\_corners.insert(t);}
\DoxyCodeLine{01061     \}}
\DoxyCodeLine{01062   \}}
\DoxyCodeLine{01063 }
\DoxyCodeLine{01064   \textcolor{keywordflow}{for} (UINT j = 1; j < chunkCount; j++) \{}
\DoxyCodeLine{01065     quad2 = stroke-\/>\mbox{\hyperlink{class_t_stroke_a06b18ffed330411aad73ef1748a3f263}{getChunk}}(j);}
\DoxyCodeLine{01066     \textcolor{keywordflow}{if} (curveIsStraight(quad2, t)) \{}
\DoxyCodeLine{01067       \textcolor{keywordflow}{if} (t != -\/1) \{}
\DoxyCodeLine{01068         check = mapValueInStroke(stroke, quad2, t, t);}
\DoxyCodeLine{01069         assert(check);}
\DoxyCodeLine{01070         \textcolor{keywordflow}{if} (check) internal\_corners.insert(t);}
\DoxyCodeLine{01071       \}}
\DoxyCodeLine{01072     \}}
\DoxyCodeLine{01073 }
\DoxyCodeLine{01074     assert(quad2);}
\DoxyCodeLine{01075     \textcolor{keywordflow}{if} (!quad2) error = \textcolor{keyword}{true};}
\DoxyCodeLine{01076 }
\DoxyCodeLine{01077     \textcolor{keywordtype}{double} tmp = stroke-\/>\mbox{\hyperlink{class_t_stroke_a38326dc317f9ff3828940996f41376a6}{getW}}(quad2-\/>getP0());}
\DoxyCodeLine{01078 }
\DoxyCodeLine{01079     \textcolor{comment}{// jump zero length curves}}
\DoxyCodeLine{01080     \textcolor{keywordflow}{if} (!isAlmostZero(quad1-\/>\mbox{\hyperlink{class_t_quadratic_ac1db69c69cbf52b1becf396cc8006ca1}{getLength}}()) \&\&}
\DoxyCodeLine{01081         !isAlmostZero(quad2-\/>getLength()) \&\&}
\DoxyCodeLine{01082         isThereACornerMinusThan(minCos, minSin, quad1, quad2))}
\DoxyCodeLine{01083       internal\_corners.insert(tmp);}
\DoxyCodeLine{01084 }
\DoxyCodeLine{01085     \textcolor{keywordflow}{if} (!isAlmostZero(quad2-\/>getLength())) quad1 = quad2;}
\DoxyCodeLine{01086   \}}
\DoxyCodeLine{01087 }
\DoxyCodeLine{01088   \textcolor{keywordflow}{if} (stroke-\/>\mbox{\hyperlink{class_t_stroke_a3565d6c34d3eb02fb1a6993ca626425c}{isSelfLoop}}() \&\& chunkCount > 0) \{}
\DoxyCodeLine{01089     quad2 = stroke-\/>\mbox{\hyperlink{class_t_stroke_a06b18ffed330411aad73ef1748a3f263}{getChunk}}(0);}
\DoxyCodeLine{01090     quad1 = stroke-\/>\mbox{\hyperlink{class_t_stroke_a06b18ffed330411aad73ef1748a3f263}{getChunk}}(chunkCount -\/ 1);}
\DoxyCodeLine{01091 }
\DoxyCodeLine{01092     \textcolor{keywordflow}{if} (isThereACornerMinusThan(minCos, minSin, quad1, quad2))}
\DoxyCodeLine{01093       internal\_corners.insert(0.0);}
\DoxyCodeLine{01094   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01095     internal\_corners.insert(0.0);}
\DoxyCodeLine{01096     internal\_corners.insert(1.0);}
\DoxyCodeLine{01097   \}}
\DoxyCodeLine{01098 }
\DoxyCodeLine{01099   \textcolor{keywordflow}{if} (error) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01100 }
\DoxyCodeLine{01101   std::copy(internal\_corners.begin(), internal\_corners.end(),}
\DoxyCodeLine{01102             std::back\_inserter(corners));}
\DoxyCodeLine{01103 }
\DoxyCodeLine{01104 \textcolor{preprocessor}{\#ifdef \_DEBUG}}
\DoxyCodeLine{01105   \textcolor{keywordtype}{double} temp = 0;}
\DoxyCodeLine{01106   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} k = 0; k < corners.size(); ++k) \{}
\DoxyCodeLine{01107     assert(corners[k] >= temp);}
\DoxyCodeLine{01108     temp = corners[k];}
\DoxyCodeLine{01109   \}}
\DoxyCodeLine{01110 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01111 }
\DoxyCodeLine{01112   \textcolor{keywordflow}{return} !corners.empty();}
\DoxyCodeLine{01113 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00061}{Toonz\+Ext\+::\+Corner\+Deformation\+::check\+\_\+()}}.

\mbox{\Hypertarget{namespace_toonz_ext_adc55f31b9acafe1321c64777ba6c38c1}\label{namespace_toonz_ext_adc55f31b9acafe1321c64777ba6c38c1}} 
\index{ToonzExt@{ToonzExt}!detectSpireIntervals@{detectSpireIntervals}}
\index{detectSpireIntervals@{detectSpireIntervals}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{detectSpireIntervals()}{detectSpireIntervals()}}
{\footnotesize\ttfamily DVAPI bool Toonz\+Ext\+::detect\+Spire\+Intervals (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke,  }\item[{\mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} \&}]{intervals,  }\item[{int}]{min\+Degree }\end{DoxyParamCaption})}



Find intervals where stroke has limited from spire. 

These intervals are stored in an {\ttfamily vector} od Interval. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00768                                                          \{}
\DoxyCodeLine{00769   \textcolor{keywordflow}{if} (!ToonzExt::isValid(stroke)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00770 }
\DoxyCodeLine{00771   minDegree = normalizeAngle(minDegree);}
\DoxyCodeLine{00772   std::vector<double> corners;}
\DoxyCodeLine{00773 }
\DoxyCodeLine{00774   \textcolor{keywordtype}{bool} found = \mbox{\hyperlink{namespace_toonz_ext_a192dcaf5d96235356ae59ae418b125fe}{ToonzExt::cornersDetector}}(stroke, minDegree, corners);}
\DoxyCodeLine{00775   \textcolor{keywordflow}{if} (!found) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00776 }
\DoxyCodeLine{00777   assert(!corners.empty());}
\DoxyCodeLine{00778 }
\DoxyCodeLine{00779   intervals.clear();}
\DoxyCodeLine{00780 }
\DoxyCodeLine{00781   \textcolor{keywordtype}{double} first = corners[0], last = first;}
\DoxyCodeLine{00782 }
\DoxyCodeLine{00783   \textcolor{keywordtype}{int} size = corners.size();}
\DoxyCodeLine{00784 }
\DoxyCodeLine{00785   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i < size; ++i) \{}
\DoxyCodeLine{00786     last = corners[i];}
\DoxyCodeLine{00787     intervals.push\_back(\mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{ToonzExt::Interval}}(first, last));}
\DoxyCodeLine{00788     first = last;}
\DoxyCodeLine{00789   \}}
\DoxyCodeLine{00790 }
\DoxyCodeLine{00791   \textcolor{comment}{// intervals.push\_back( ToonzExt::Interval(last,1.0));}}
\DoxyCodeLine{00792 }
\DoxyCodeLine{00793   \textcolor{keywordflow}{if} (stroke-\/>\mbox{\hyperlink{class_t_stroke_a3565d6c34d3eb02fb1a6993ca626425c}{isSelfLoop}}()) \{}
\DoxyCodeLine{00794     \textcolor{keywordflow}{if} (corners.size() == 1) \{}
\DoxyCodeLine{00795       \textcolor{keywordtype}{double} val = corners[0];}
\DoxyCodeLine{00796       intervals.push\_back(\mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{ToonzExt::Interval}}(val, val));}
\DoxyCodeLine{00797     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!intervals.empty()) \{}
\DoxyCodeLine{00798       \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{ToonzExt::Interval}} first = intervals.front(), last = intervals.back();}
\DoxyCodeLine{00799 }
\DoxyCodeLine{00800       intervals.insert(intervals.begin(),}
\DoxyCodeLine{00801                        \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{ToonzExt::Interval}}(last.second, first.first));}
\DoxyCodeLine{00802     \}}
\DoxyCodeLine{00803   \}}
\DoxyCodeLine{00804 }
\DoxyCodeLine{00805   \textcolor{keywordflow}{return} !intervals.empty();}
\DoxyCodeLine{00806 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_toonz_ext_a6d0c60df65b9f34e2068f78463502478}\label{namespace_toonz_ext_a6d0c60df65b9f34e2068f78463502478}} 
\index{ToonzExt@{ToonzExt}!detectStraightIntervals@{detectStraightIntervals}}
\index{detectStraightIntervals@{detectStraightIntervals}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{detectStraightIntervals()}{detectStraightIntervals()}}
{\footnotesize\ttfamily DVAPI bool Toonz\+Ext\+::detect\+Straight\+Intervals (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke,  }\item[{\mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} \&}]{intervals,  }\item[{double}]{tolerance = {\ttfamily TConsts\+:\+:epsilon} }\end{DoxyParamCaption})}



Find intervals where stroke is a straight line. 

These intervals are stored in an {\ttfamily vector} od Interval. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00648                                                                \{}
\DoxyCodeLine{00649   \textcolor{keywordflow}{if} (!ToonzExt::isValid(stroke)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00650 }
\DoxyCodeLine{00651   assert(tolerance > 0.0 \&\& tolerance < 1.0 \&\&}
\DoxyCodeLine{00652          \textcolor{stringliteral}{"{}Strange tolerance are you sure???"{}});}
\DoxyCodeLine{00653 }
\DoxyCodeLine{00654   intervals.clear();}
\DoxyCodeLine{00655 }
\DoxyCodeLine{00656   \textcolor{comment}{// first step:}}
\DoxyCodeLine{00657   \textcolor{comment}{//  store information about chunk and straight interval}}
\DoxyCodeLine{00658   \textcolor{keyword}{typedef} std::pair<const TThickQuadratic *, ToonzExt::Intervals>}
\DoxyCodeLine{00659       ChunkStraights;}
\DoxyCodeLine{00660 }
\DoxyCodeLine{00661   std::map<int, ChunkStraights> arrayOfChunkIntervals;}
\DoxyCodeLine{00662 }
\DoxyCodeLine{00663   \textcolor{keywordtype}{int} chunkCount = stroke-\/>\mbox{\hyperlink{class_t_stroke_a81b63663a798724333d8de692fdbcac0}{getChunkCount}}();}
\DoxyCodeLine{00664   \textcolor{keywordtype}{int} counter    = 0;}
\DoxyCodeLine{00665 }
\DoxyCodeLine{00666   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < chunkCount; ++i) \{}
\DoxyCodeLine{00667     \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{ToonzExt::Intervals}} values;}
\DoxyCodeLine{00668 }
\DoxyCodeLine{00669     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_thick_quadratic}{TThickQuadratic}} *chunk = stroke-\/>\mbox{\hyperlink{class_t_stroke_a06b18ffed330411aad73ef1748a3f263}{getChunk}}(i);}
\DoxyCodeLine{00670     \textcolor{keywordflow}{if} (chunk-\/>\mbox{\hyperlink{class_t_quadratic_ac1db69c69cbf52b1becf396cc8006ca1}{getLength}}() == 0.0) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00671     \textcolor{keywordtype}{int} howMany = detectStraightIntervals\_(chunk, values, tolerance);}
\DoxyCodeLine{00672     \textcolor{keywordflow}{if} (howMany > 0) \{}
\DoxyCodeLine{00673       arrayOfChunkIntervals[counter] = ChunkStraights(chunk, values);}
\DoxyCodeLine{00674     \}}
\DoxyCodeLine{00675     ++counter;}
\DoxyCodeLine{00676   \}}
\DoxyCodeLine{00677 }
\DoxyCodeLine{00678   \textcolor{comment}{// second step:}}
\DoxyCodeLine{00679   \textcolor{comment}{//  add intervals vs stroke}}
\DoxyCodeLine{00680   std::map<int, ChunkStraights>::iterator it = arrayOfChunkIntervals.begin(),}
\DoxyCodeLine{00681                                           end = arrayOfChunkIntervals.end(),}
\DoxyCodeLine{00682                                           aux;}
\DoxyCodeLine{00683 }
\DoxyCodeLine{00684   \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{ToonzExt::Interval}} myRange = \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{ToonzExt::Interval}}(-\/1, -\/1);}
\DoxyCodeLine{00685 }
\DoxyCodeLine{00686   \textcolor{keywordflow}{for} (; it != end; ++it) \{}
\DoxyCodeLine{00687     aux = it;}
\DoxyCodeLine{00688     std::advance(aux, 1);}
\DoxyCodeLine{00689     ChunkStraights \&cs1 = it-\/>second;}
\DoxyCodeLine{00690     \textcolor{keywordflow}{if} (aux != end) \{}
\DoxyCodeLine{00691       ChunkStraights \&cs2 = aux-\/>second;}
\DoxyCodeLine{00692       \textcolor{keyword}{const} \textcolor{keywordtype}{int} i1 = it-\/>first, i2 = aux-\/>first;}
\DoxyCodeLine{00693 }
\DoxyCodeLine{00694       \textcolor{comment}{// if chunk are a sequence}}
\DoxyCodeLine{00695       \textcolor{keywordflow}{if} ((i1 + 1 == i2) \&\& !corner(cs1.first, cs2.first, tolerance)) \{}
\DoxyCodeLine{00696         \textcolor{keyword}{const} \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{ToonzExt::Intervals}} \&cs1Intervals = cs1.second;}
\DoxyCodeLine{00697 }
\DoxyCodeLine{00698         \textcolor{keyword}{const} \textcolor{keywordtype}{int} size = cs1Intervals.size();}
\DoxyCodeLine{00699         \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00700         \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{ToonzExt::Interval}} tmp;}
\DoxyCodeLine{00701 }
\DoxyCodeLine{00702         \textcolor{keywordflow}{for} (i = 0; i < size; ++i) \{}
\DoxyCodeLine{00703           tmp = cs1Intervals[i];}
\DoxyCodeLine{00704 }
\DoxyCodeLine{00705           \textcolor{keywordflow}{if} (tmp.second == 1.0) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00706 }
\DoxyCodeLine{00707           \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{ToonzExt::Interval}} stroke\_interval;}
\DoxyCodeLine{00708           \textcolor{keywordflow}{if} (mapIntervalInStroke(stroke, cs1.first, tmp, stroke\_interval))}
\DoxyCodeLine{00709             intervals.push\_back(stroke\_interval);}
\DoxyCodeLine{00710         \}}
\DoxyCodeLine{00711         \textcolor{comment}{// assert( i == size-\/1 );}}
\DoxyCodeLine{00712 }
\DoxyCodeLine{00713         \textcolor{keywordflow}{if} (myRange.first == -\/1) \{}
\DoxyCodeLine{00714           \textcolor{keywordflow}{if} (!mapValueInStroke(stroke, cs1.first, tmp.first, myRange.first))}
\DoxyCodeLine{00715             assert(!\textcolor{stringliteral}{"{}Ops problemone!!!"{}});}
\DoxyCodeLine{00716           \textcolor{comment}{// remove value added to merge}}
\DoxyCodeLine{00717           \textcolor{comment}{//  adjacent straight interval}}
\DoxyCodeLine{00718           cs1.second.pop\_back();}
\DoxyCodeLine{00719         \}}
\DoxyCodeLine{00720 }
\DoxyCodeLine{00721         tmp = cs2.second.front();}
\DoxyCodeLine{00722 }
\DoxyCodeLine{00723         \textcolor{keywordflow}{if} (!mapValueInStroke(stroke, cs2.first, tmp.second, myRange.second))}
\DoxyCodeLine{00724           assert(!\textcolor{stringliteral}{"{}Ops problemone!!!"{}});}
\DoxyCodeLine{00725         cs2.second.erase(cs2.second.begin());}
\DoxyCodeLine{00726       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00727         \textcolor{keywordflow}{if} (myRange.first != -\/1 \&\& myRange.second != -\/1) \{}
\DoxyCodeLine{00728           intervals.push\_back(myRange);}
\DoxyCodeLine{00729           myRange = \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{ToonzExt::Interval}}(-\/1, -\/1);}
\DoxyCodeLine{00730         \}}
\DoxyCodeLine{00731 }
\DoxyCodeLine{00732         \textcolor{comment}{// add remaining interval of current stroke}}
\DoxyCodeLine{00733         addQuadraticIntervalInStroke(stroke, intervals, cs1.first, cs1.second);}
\DoxyCodeLine{00734       \}}
\DoxyCodeLine{00735     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00736       \textcolor{keywordflow}{if} (myRange.first != -\/1 \&\& myRange.second != -\/1) \{}
\DoxyCodeLine{00737         intervals.push\_back(myRange);}
\DoxyCodeLine{00738         myRange = \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{ToonzExt::Interval}}(-\/1, -\/1);}
\DoxyCodeLine{00739       \}}
\DoxyCodeLine{00740 }
\DoxyCodeLine{00741       \textcolor{comment}{// add remaining interval of current stroke}}
\DoxyCodeLine{00742       addQuadraticIntervalInStroke(stroke, intervals, cs1.first, cs1.second);}
\DoxyCodeLine{00743     \}}
\DoxyCodeLine{00744   \}}
\DoxyCodeLine{00745 }
\DoxyCodeLine{00746   \textcolor{keywordflow}{if} (stroke-\/>\mbox{\hyperlink{class_t_stroke_a3565d6c34d3eb02fb1a6993ca626425c}{isSelfLoop}}()) \{}
\DoxyCodeLine{00747     \mbox{\hyperlink{class_t_point_t}{TPointD}} v0 = stroke-\/>\mbox{\hyperlink{class_t_stroke_aacd3df1526449eb47659de8ea4c16039}{getSpeed}}(0.0), vn = stroke-\/>\mbox{\hyperlink{class_t_stroke_aacd3df1526449eb47659de8ea4c16039}{getSpeed}}(1.0);}
\DoxyCodeLine{00748 }
\DoxyCodeLine{00749     \textcolor{keywordflow}{if} (areParallel(v0, vn) \&\& areInSameDirection(v0, vn) \&\&}
\DoxyCodeLine{00750         intervals.size() > 1) \{}
\DoxyCodeLine{00751       \textcolor{comment}{// then first interval probably can be merged}}
\DoxyCodeLine{00752       \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{ToonzExt::Interval}} first = intervals.front(), last = intervals.back();}
\DoxyCodeLine{00753       \textcolor{keywordflow}{if} (first.first == 0.0 \&\& last.second == 0.0) \{}
\DoxyCodeLine{00754         intervals.pop\_back();}
\DoxyCodeLine{00755         first.first  = last.first;}
\DoxyCodeLine{00756         intervals[0] = first;}
\DoxyCodeLine{00757       \}}
\DoxyCodeLine{00758     \}}
\DoxyCodeLine{00759   \}}
\DoxyCodeLine{00760 }
\DoxyCodeLine{00761   \textcolor{keywordflow}{return} !intervals.empty();}
\DoxyCodeLine{00762 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_toonz_ext_a06d3af5a612c292a3eea837696e52b7e}\label{namespace_toonz_ext_a06d3af5a612c292a3eea837696e52b7e}} 
\index{ToonzExt@{ToonzExt}!findCorners@{findCorners}}
\index{findCorners@{findCorners}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{findCorners()}{findCorners()}}
{\footnotesize\ttfamily DVAPI void Toonz\+Ext\+::find\+Corners (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke,  }\item[{\mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} \&}]{corners,  }\item[{\mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} \&}]{intervals,  }\item[{int}]{angle,  }\item[{double}]{tolerance }\end{DoxyParamCaption})}



Retrieve corners of a \mbox{\hyperlink{class_t_stroke}{TStroke}}. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01263                                                    \{}
\DoxyCodeLine{01264   assert(stroke \&\& \textcolor{stringliteral}{"{}Stroke is null!!!"{}});}
\DoxyCodeLine{01265   \textcolor{keywordflow}{if} (!ToonzExt::isValid(stroke)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01266 }
\DoxyCodeLine{01267   angle = normalizeAngle(angle);}
\DoxyCodeLine{01268 }
\DoxyCodeLine{01269   \mbox{\hyperlink{namespace_toonz_ext_adc55f31b9acafe1321c64777ba6c38c1}{ToonzExt::detectSpireIntervals}}(stroke, corners, angle);}
\DoxyCodeLine{01270 }
\DoxyCodeLine{01271   \textcolor{comment}{// a corner SPIRE is also a STRAIGHT}}
\DoxyCodeLine{01272   \mbox{\hyperlink{namespace_toonz_ext_a6d0c60df65b9f34e2068f78463502478}{ToonzExt::detectStraightIntervals}}(stroke, intervals, tolerance);}
\DoxyCodeLine{01273 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_toonz_ext_a8ed9bd9d0e778530a6002d29f9f31b80}\label{namespace_toonz_ext_a8ed9bd9d0e778530a6002d29f9f31b80}} 
\index{ToonzExt@{ToonzExt}!findNearestCorners@{findNearestCorners}}
\index{findNearestCorners@{findNearestCorners}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{findNearestCorners()}{findNearestCorners()}}
{\footnotesize\ttfamily DVAPI bool Toonz\+Ext\+::find\+Nearest\+Corners (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke,  }\item[{double}]{w,  }\item[{\mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{Toonz\+Ext\+::\+Interval}} \&}]{out,  }\item[{const \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Intervals}} \&}]{values,  }\item[{double}]{tolerance = {\ttfamily TConsts\+:\+:epsilon} }\end{DoxyParamCaption})}



Retrieve corners of a \mbox{\hyperlink{class_t_stroke}{TStroke}}. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01205                                                           \{}
\DoxyCodeLine{01206   out = \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{ToonzExt::Interval}}(-\/1.0, -\/1.0);}
\DoxyCodeLine{01207 }
\DoxyCodeLine{01208   \textcolor{keywordflow}{if} (!ToonzExt::isValid(stroke) || !ToonzExt::isValid(w) || values.empty())}
\DoxyCodeLine{01209     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01210 }
\DoxyCodeLine{01211   \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{ToonzExt::Interval}} prev = values[0], curr = prev;}
\DoxyCodeLine{01212 }
\DoxyCodeLine{01213   \textcolor{keywordflow}{if} (!stroke-\/>\mbox{\hyperlink{class_t_stroke_a3565d6c34d3eb02fb1a6993ca626425c}{isSelfLoop}}() \&\& areAlmostEqual(w, prev.first, tolerance)) \{}
\DoxyCodeLine{01214     out = prev;}
\DoxyCodeLine{01215     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01216   \}}
\DoxyCodeLine{01217 }
\DoxyCodeLine{01218   \textcolor{keyword}{const} \textcolor{keywordtype}{int} size = values.size();}
\DoxyCodeLine{01219 }
\DoxyCodeLine{01220   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i <= size; ++i) \{}
\DoxyCodeLine{01221     \textcolor{keywordflow}{if} (i < size)}
\DoxyCodeLine{01222       curr = values[i];}
\DoxyCodeLine{01223     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01224       curr = values[0];}
\DoxyCodeLine{01225 }
\DoxyCodeLine{01226     \textcolor{comment}{// this case, w is an extreme and needs to be considered}}
\DoxyCodeLine{01227     \textcolor{comment}{//  the nearest external interval}}
\DoxyCodeLine{01228     \textcolor{keywordflow}{if} (areAlmostEqual(w, curr.first, tolerance) \&\&}
\DoxyCodeLine{01229         (prev.second == curr.first)) \{}
\DoxyCodeLine{01230       \textcolor{keywordflow}{if} (isWGood(prev.first, w, curr.second, stroke) ||}
\DoxyCodeLine{01231           (prev.first == curr.second)) \{}
\DoxyCodeLine{01232         out.first  = prev.first;}
\DoxyCodeLine{01233         out.second = curr.second;}
\DoxyCodeLine{01234         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01235       \}}
\DoxyCodeLine{01236     \}}
\DoxyCodeLine{01237 }
\DoxyCodeLine{01238     \textcolor{comment}{// normal case}}
\DoxyCodeLine{01239     \textcolor{keywordflow}{if} (isWGood(curr.first, w, curr.second, stroke)) \{}
\DoxyCodeLine{01240       out = curr;}
\DoxyCodeLine{01241       \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01242     \}}
\DoxyCodeLine{01243 }
\DoxyCodeLine{01244     prev = curr;}
\DoxyCodeLine{01245   \}}
\DoxyCodeLine{01246 }
\DoxyCodeLine{01247   curr = values.back();}
\DoxyCodeLine{01248 }
\DoxyCodeLine{01249   \textcolor{comment}{// last point}}
\DoxyCodeLine{01250   \textcolor{keywordflow}{if} (!stroke-\/>\mbox{\hyperlink{class_t_stroke_a3565d6c34d3eb02fb1a6993ca626425c}{isSelfLoop}}() \&\& areAlmostEqual(curr.second, w, tolerance)) \{}
\DoxyCodeLine{01251     out = curr;}
\DoxyCodeLine{01252     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01253   \}}
\DoxyCodeLine{01254 }
\DoxyCodeLine{01255   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01256 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_toonz_ext_af9eab69f85f85841b9bf44c85ac86765}\label{namespace_toonz_ext_af9eab69f85f85841b9bf44c85ac86765}} 
\index{ToonzExt@{ToonzExt}!findNearestSpireCorners@{findNearestSpireCorners}}
\index{findNearestSpireCorners@{findNearestSpireCorners}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{findNearestSpireCorners()}{findNearestSpireCorners()}}
{\footnotesize\ttfamily DVAPI bool Toonz\+Ext\+::find\+Nearest\+Spire\+Corners (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{s,  }\item[{double}]{actualW,  }\item[{\mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{Toonz\+Ext\+::\+Interval}} \&}]{out,  }\item[{int}]{corner\+Size,  }\item[{const \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} $\ast$const}]{cl = {\ttfamily 0},  }\item[{double}]{tolerance = {\ttfamily TConsts\+:\+:epsilon} }\end{DoxyParamCaption})}



Retrieve parameters for corners near actualW parameter. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00600                                                          \{}
\DoxyCodeLine{00601   \textcolor{keywordflow}{if} (!ToonzExt::isValid(stroke) || !ToonzExt::isValid(w)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00602 }
\DoxyCodeLine{00603   \textcolor{keyword}{const} \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{ToonzExt::Intervals}} *values = cl;}
\DoxyCodeLine{00604 }
\DoxyCodeLine{00605   \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{ToonzExt::Intervals}} tmpValues;}
\DoxyCodeLine{00606 }
\DoxyCodeLine{00607   \textcolor{keywordflow}{if} (!cl) \{}
\DoxyCodeLine{00608     cornerSize = normalizeAngle(cornerSize);}
\DoxyCodeLine{00609     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespace_toonz_ext_adc55f31b9acafe1321c64777ba6c38c1}{ToonzExt::detectSpireIntervals}}(stroke, tmpValues, cornerSize))}
\DoxyCodeLine{00610       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00611     values = \&tmpValues;}
\DoxyCodeLine{00612   \}}
\DoxyCodeLine{00613 }
\DoxyCodeLine{00614   \textcolor{keywordflow}{if} (!values || values-\/>empty()) \{}
\DoxyCodeLine{00615     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00616   \}}
\DoxyCodeLine{00617 }
\DoxyCodeLine{00618   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespace_toonz_ext_a8ed9bd9d0e778530a6002d29f9f31b80}{findNearestCorners}}(stroke, w, out, *values, tolerance);}
\DoxyCodeLine{00619 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00052}{Toonz\+Ext\+::\+Corner\+Deformation\+::find\+Extremes\+\_\+()}}, \mbox{\hyperlink{l00063}{Toonz\+Ext\+::\+Smooth\+Deformation\+::find\+Extremes\+\_\+()}}, and \mbox{\hyperlink{l00044}{Toonz\+Ext\+::\+Straight\+Corner\+Deformation\+::find\+Extremes\+\_\+()}}.

\mbox{\Hypertarget{namespace_toonz_ext_a518f83ed246c63667f0185124cf724c5}\label{namespace_toonz_ext_a518f83ed246c63667f0185124cf724c5}} 
\index{ToonzExt@{ToonzExt}!findNearestStraightCorners@{findNearestStraightCorners}}
\index{findNearestStraightCorners@{findNearestStraightCorners}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{findNearestStraightCorners()}{findNearestStraightCorners()}}
{\footnotesize\ttfamily DVAPI bool Toonz\+Ext\+::find\+Nearest\+Straight\+Corners (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{s,  }\item[{double}]{actualW,  }\item[{\mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{Toonz\+Ext\+::\+Interval}} \&}]{out,  }\item[{const \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} $\ast$const}]{cl = {\ttfamily 0},  }\item[{double}]{tolerance = {\ttfamily TConsts\+:\+:epsilon} }\end{DoxyParamCaption})}



Retrieve parameters for straight intervals near actualW parameter. 

\begin{DoxyReturn}{Returns}
If not found return \mbox{[}-\/1,-\/1\mbox{]} interval, else the correct interval. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00836                                                          \{}
\DoxyCodeLine{00837   \textcolor{keywordflow}{if} (!stroke || w < 0.0 || w > 1.0) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00838 }
\DoxyCodeLine{00839   \textcolor{keyword}{const} \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{ToonzExt::Intervals}} *values = cl;}
\DoxyCodeLine{00840 }
\DoxyCodeLine{00841   \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{ToonzExt::Intervals}} tmpValues;}
\DoxyCodeLine{00842 }
\DoxyCodeLine{00843   \textcolor{keywordflow}{if} (!cl) \{}
\DoxyCodeLine{00844     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespace_toonz_ext_a6d0c60df65b9f34e2068f78463502478}{ToonzExt::detectStraightIntervals}}(stroke, tmpValues, tolerance))}
\DoxyCodeLine{00845       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00846     values = \&tmpValues;}
\DoxyCodeLine{00847   \}}
\DoxyCodeLine{00848 }
\DoxyCodeLine{00849   \textcolor{keywordflow}{if} (!values || values-\/>empty()) \{}
\DoxyCodeLine{00850     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00851   \}}
\DoxyCodeLine{00852 }
\DoxyCodeLine{00853   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespace_toonz_ext_a8ed9bd9d0e778530a6002d29f9f31b80}{findNearestCorners}}(stroke, w, out, *values, tolerance);}
\DoxyCodeLine{00854 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00069}{Toonz\+Ext\+::\+Straight\+Corner\+Deformation\+::check\+\_\+()}}, and \mbox{\hyperlink{l00044}{Toonz\+Ext\+::\+Straight\+Corner\+Deformation\+::find\+Extremes\+\_\+()}}.

\mbox{\Hypertarget{namespace_toonz_ext_af2d6f6c363d628eb19659c38fde2c024}\label{namespace_toonz_ext_af2d6f6c363d628eb19659c38fde2c024}} 
\index{ToonzExt@{ToonzExt}!getAllW@{getAllW}}
\index{getAllW@{getAllW}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{getAllW()}{getAllW()}}
{\footnotesize\ttfamily DVAPI bool Toonz\+Ext\+::get\+AllW (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pnt,  }\item[{double \&}]{dist2,  }\item[{std\+::vector$<$ double $>$ \&}]{parameters }\end{DoxyParamCaption})}

Retrieve all parameters where stroke has a minimum. 
\begin{DoxyCode}{0}
\DoxyCodeLine{01158                                                                            \{}
\DoxyCodeLine{01159   assert(!\textcolor{stringliteral}{"{}To be finished!!!"{}});}
\DoxyCodeLine{01160   std::set<double> tmp;}
\DoxyCodeLine{01161 }
\DoxyCodeLine{01162   assert(stroke);}
\DoxyCodeLine{01163   \textcolor{keywordflow}{if} (ToonzExt::isValid(stroke)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01164 }
\DoxyCodeLine{01165   \textcolor{keywordtype}{double} outT, w;}
\DoxyCodeLine{01166 }
\DoxyCodeLine{01167   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_thick_quadratic}{TThickQuadratic}} *tq = 0;}
\DoxyCodeLine{01168 }
\DoxyCodeLine{01169   \textcolor{keywordtype}{int} chunkFound = -\/1;}
\DoxyCodeLine{01170 }
\DoxyCodeLine{01171   \textcolor{keywordtype}{double} distance2;}
\DoxyCodeLine{01172 }
\DoxyCodeLine{01173   \textcolor{keywordflow}{if} (stroke-\/>\mbox{\hyperlink{class_t_stroke_a8ac9fd8cf067561e4f75eb706e70bf71}{getNearestChunk}}(pnt, outT, chunkFound, distance2, \textcolor{keyword}{false})) \{}
\DoxyCodeLine{01174     dist2 = distance2;}
\DoxyCodeLine{01175     tq    = stroke-\/>\mbox{\hyperlink{class_t_stroke_a06b18ffed330411aad73ef1748a3f263}{getChunk}}(chunkFound);}
\DoxyCodeLine{01176     \textcolor{keywordflow}{if} (tq) \{}
\DoxyCodeLine{01177       w = stroke-\/>\mbox{\hyperlink{class_t_stroke_a38326dc317f9ff3828940996f41376a6}{getW}}(tq-\/>\mbox{\hyperlink{class_t_quadratic_a3c2903b06b6ee0c7ae16e5528a10f24a}{getPoint}}(outT));}
\DoxyCodeLine{01178       \textcolor{keywordflow}{if} (ToonzExt::isValid(w)) tmp.insert(w);}
\DoxyCodeLine{01179     \}}
\DoxyCodeLine{01180   \}}
\DoxyCodeLine{01181 }
\DoxyCodeLine{01182   \textcolor{keywordtype}{int} i, chunkCount = stroke-\/>\mbox{\hyperlink{class_t_stroke_a81b63663a798724333d8de692fdbcac0}{getChunkCount}}();}
\DoxyCodeLine{01183 }
\DoxyCodeLine{01184   \textcolor{keywordflow}{for} (i = 0; i < chunkCount; i++) \{}
\DoxyCodeLine{01185     \textcolor{keywordflow}{if} (i != chunkFound) \{}
\DoxyCodeLine{01186       tq              = stroke-\/>\mbox{\hyperlink{class_t_stroke_a06b18ffed330411aad73ef1748a3f263}{getChunk}}(i);}
\DoxyCodeLine{01187       \mbox{\hyperlink{class_t_point_t}{TPointD}} tmp\_pnt = tq-\/>\mbox{\hyperlink{class_t_quadratic_a3c2903b06b6ee0c7ae16e5528a10f24a}{getPoint}}(tq-\/>\mbox{\hyperlink{class_t_quadratic_ac0a935d30e22e5be4639979a28aa1c99}{getT}}(pnt));}
\DoxyCodeLine{01188       \textcolor{keywordflow}{if} (areAlmostEqual(\mbox{\hyperlink{class_t_point_t_a0874a05e48fdb75f98ed039fb1645b26}{tdistance2}}(tmp\_pnt, pnt), dist2)) \{}
\DoxyCodeLine{01189         w = stroke-\/>\mbox{\hyperlink{class_t_stroke_a38326dc317f9ff3828940996f41376a6}{getW}}(tmp\_pnt);}
\DoxyCodeLine{01190         \textcolor{keywordflow}{if} (ToonzExt::isValid(w)) tmp.insert(w);}
\DoxyCodeLine{01191       \}}
\DoxyCodeLine{01192     \}}
\DoxyCodeLine{01193   \}}
\DoxyCodeLine{01194 }
\DoxyCodeLine{01195   std::copy(tmp.begin(), tmp.end(), std::back\_inserter(parameters));}
\DoxyCodeLine{01196 }
\DoxyCodeLine{01197   \textcolor{keywordflow}{return} !tmp.empty();}
\DoxyCodeLine{01198 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_toonz_ext_adc16bc4239c1a2cb1e5b5fcb3ab68240}\label{namespace_toonz_ext_adc16bc4239c1a2cb1e5b5fcb3ab68240}} 
\index{ToonzExt@{ToonzExt}!isASpireCorner@{isASpireCorner}}
\index{isASpireCorner@{isASpireCorner}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{isASpireCorner()}{isASpireCorner()}}
{\footnotesize\ttfamily DVAPI bool Toonz\+Ext\+::is\+ASpire\+Corner (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{s,  }\item[{double}]{w,  }\item[{int}]{corner\+Size,  }\item[{const \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} $\ast$const}]{cl = {\ttfamily 0},  }\item[{double}]{tolerance = {\ttfamily TConsts\+:\+:epsilon} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00625                                                       \{}
\DoxyCodeLine{00626   \textcolor{keywordflow}{if} (!ToonzExt::isValid(s) || !ToonzExt::isValid(w)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00627 }
\DoxyCodeLine{00628   \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{ToonzExt::Intervals}} tmpValues;}
\DoxyCodeLine{00629 }
\DoxyCodeLine{00630   \textcolor{keyword}{const} \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{ToonzExt::Intervals}} *values = cl;}
\DoxyCodeLine{00631 }
\DoxyCodeLine{00632   \textcolor{keywordflow}{if} (!cl) \{}
\DoxyCodeLine{00633     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespace_toonz_ext_adc55f31b9acafe1321c64777ba6c38c1}{ToonzExt::detectSpireIntervals}}(s, tmpValues, cornerSize)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00634     values = \&tmpValues;}
\DoxyCodeLine{00635   \}}
\DoxyCodeLine{00636 }
\DoxyCodeLine{00637   \textcolor{keywordflow}{if} (!values || values-\/>empty()) \{}
\DoxyCodeLine{00638     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00639   \}}
\DoxyCodeLine{00640 }
\DoxyCodeLine{00641   \textcolor{keywordflow}{return} isCorner(*values, w, tolerance);}
\DoxyCodeLine{00642 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_toonz_ext_aa06bd1db88289e43f6daf6089c2648f8}\label{namespace_toonz_ext_aa06bd1db88289e43f6daf6089c2648f8}} 
\index{ToonzExt@{ToonzExt}!isAStraightCorner@{isAStraightCorner}}
\index{isAStraightCorner@{isAStraightCorner}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{isAStraightCorner()}{isAStraightCorner()}}
{\footnotesize\ttfamily DVAPI bool Toonz\+Ext\+::is\+AStraight\+Corner (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{s,  }\item[{double}]{actualW,  }\item[{const \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} $\ast$const}]{cl = {\ttfamily 0},  }\item[{double}]{tolerance = {\ttfamily TConsts\+:\+:epsilon} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00812                                                          \{}
\DoxyCodeLine{00813   \textcolor{keywordflow}{if} (!ToonzExt::isValid(stroke) || !ToonzExt::isValid(w)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00814 }
\DoxyCodeLine{00815   \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{ToonzExt::Intervals}} tmpValues;}
\DoxyCodeLine{00816 }
\DoxyCodeLine{00817   \textcolor{keyword}{const} \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{ToonzExt::Intervals}} *values = cl;}
\DoxyCodeLine{00818 }
\DoxyCodeLine{00819   \textcolor{keywordflow}{if} (!cl) \{}
\DoxyCodeLine{00820     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespace_toonz_ext_a6d0c60df65b9f34e2068f78463502478}{ToonzExt::detectStraightIntervals}}(stroke, tmpValues, tolerance))}
\DoxyCodeLine{00821       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00822     values = \&tmpValues;}
\DoxyCodeLine{00823   \}}
\DoxyCodeLine{00824 }
\DoxyCodeLine{00825   \textcolor{keywordflow}{if} (!values || values-\/>empty()) \{}
\DoxyCodeLine{00826     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00827   \}}
\DoxyCodeLine{00828 }
\DoxyCodeLine{00829   \textcolor{keywordflow}{return} isCorner(*values, w, tolerance);}
\DoxyCodeLine{00830 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_toonz_ext_ab724837729ae24410cef394ea16ac0e0}\label{namespace_toonz_ext_ab724837729ae24410cef394ea16ac0e0}} 
\index{ToonzExt@{ToonzExt}!isValid@{isValid}}
\index{isValid@{isValid}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{isValid()}{isValid()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$class T $>$ \\
bool Toonz\+Ext\+::is\+Valid (\begin{DoxyParamCaption}\item[{const T $\ast$}]{s }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00137                                 \{}
\DoxyCodeLine{00138   assert(0 != s);}
\DoxyCodeLine{00139   \textcolor{keywordflow}{if} (!s) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00140   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00141 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_toonz_ext_a244deb082112d1d68c1568d4d959e0ad}\label{namespace_toonz_ext_a244deb082112d1d68c1568d4d959e0ad}} 
\index{ToonzExt@{ToonzExt}!isValid@{isValid}}
\index{isValid@{isValid}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{isValid()}{isValid()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily bool Toonz\+Ext\+::is\+Valid (\begin{DoxyParamCaption}\item[{double}]{w }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00145                               \{}
\DoxyCodeLine{00146   assert(0.0 <= w \&\& w <= 1.0);}
\DoxyCodeLine{00147   \textcolor{keywordflow}{if} (w < 0.0 || w > 1.0) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00148   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00149 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_toonz_ext_aee3e67cb066977ee0e6269f30afaeee0}\label{namespace_toonz_ext_aee3e67cb066977ee0e6269f30afaeee0}} 
\index{ToonzExt@{ToonzExt}!operator$<$$<$@{operator$<$$<$}}
\index{operator$<$$<$@{operator$<$$<$}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{operator$<$$<$()}{operator<<()}}
{\footnotesize\ttfamily std\+::ostream \& Toonz\+Ext\+::operator$<$$<$ (\begin{DoxyParamCaption}\item[{std\+::ostream \&}]{os,  }\item[{const \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{Interval}} \&}]{interval }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00043                                                                         \{}
\DoxyCodeLine{00044   \textcolor{keywordflow}{return} os << \textcolor{charliteral}{'['} << interval.first << \textcolor{charliteral}{','} << interval.second << \textcolor{charliteral}{']'};}
\DoxyCodeLine{00045 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_toonz_ext_a68a0d750cd9ea968b349828ed2eacfa9}\label{namespace_toonz_ext_a68a0d750cd9ea968b349828ed2eacfa9}} 
\index{ToonzExt@{ToonzExt}!replaceStroke@{replaceStroke}}
\index{replaceStroke@{replaceStroke}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{replaceStroke()}{replaceStroke()}}
{\footnotesize\ttfamily DVAPI bool Toonz\+Ext\+::replace\+Stroke (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{old\+\_\+stroke,  }\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{new\+\_\+stroke,  }\item[{unsigned int}]{n\+\_\+,  }\item[{\mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&}]{vi }\end{DoxyParamCaption})}



Replace a stroke in a vector image. 


\begin{DoxyCode}{0}
\DoxyCodeLine{01132                                                                        \{}
\DoxyCodeLine{01133   \textcolor{keywordflow}{if} (!ToonzExt::isValid(old\_stroke) || !ToonzExt::isValid(new\_stroke) || !vi)}
\DoxyCodeLine{01134     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01135 }
\DoxyCodeLine{01136   \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} strokesCount = vi-\/>getStrokeCount();}
\DoxyCodeLine{01137 }
\DoxyCodeLine{01138   assert(n\_ <= strokesCount);}
\DoxyCodeLine{01139   \textcolor{keywordflow}{if} (n\_ > strokesCount) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01140 }
\DoxyCodeLine{01141   assert(vi-\/>getStroke(n\_) == old\_stroke);}
\DoxyCodeLine{01142   \textcolor{keywordflow}{if} (vi-\/>getStroke(n\_) != old\_stroke) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01143 }
\DoxyCodeLine{01144   \textcolor{comment}{// stroke is replaced (old stroke is deleted)}}
\DoxyCodeLine{01145   \textcolor{comment}{// in vector image}}
\DoxyCodeLine{01146   vi-\/>replaceStroke(n\_, new\_stroke);}
\DoxyCodeLine{01147 }
\DoxyCodeLine{01148   \textcolor{keywordtype}{int} new\_id = getStrokeId(new\_stroke, vi);}
\DoxyCodeLine{01149   \textcolor{keywordflow}{if} (new\_id == -\/1) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01150 }
\DoxyCodeLine{01151   n\_ = new\_id;}
\DoxyCodeLine{01152   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01153 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespace_toonz_ext_afc2e773c11a739935be9804745e2cd49}\label{namespace_toonz_ext_afc2e773c11a739935be9804745e2cd49}} 
\index{ToonzExt@{ToonzExt}!rotateControlPoint@{rotateControlPoint}}
\index{rotateControlPoint@{rotateControlPoint}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{rotateControlPoint()}{rotateControlPoint()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ Toonz\+Ext\+::rotate\+Control\+Point (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke,  }\item[{const \mbox{\hyperlink{class_toonz_ext_1_1_even_int}{Toonz\+Ext\+::\+Even\+Int}} \&}]{even,  }\item[{double}]{at\+Length }\end{DoxyParamCaption})}



Rotate the control point at even position \mbox{[}0,2,4,...\mbox{]} in a new position along the close path of a self\+Loop stroke. 

The new position is\+: {\bfseries{at\+Length}}. \begin{DoxyReturn}{Returns}
0 if some problem occurs, else the new stroke. 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000002}{Todo}}]Some refactoring required, code duplication. \end{DoxyRefDesc}

\begin{DoxyCode}{0}
\DoxyCodeLine{00860                                                        \{}
\DoxyCodeLine{00861   \textcolor{keywordflow}{if} (!stroke || !stroke-\/>\mbox{\hyperlink{class_t_stroke_a3565d6c34d3eb02fb1a6993ca626425c}{isSelfLoop}}() || !evenControlPoint.isEven()) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00862 \textcolor{preprocessor}{\#ifdef \_DEBUG}}
\DoxyCodeLine{00863   \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} tp1 = stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(0);}
\DoxyCodeLine{00864   \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} tp2 = stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(stroke-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}() -\/ 1);}
\DoxyCodeLine{00865 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00866   \textcolor{keywordtype}{int} controlPoint = (int)evenControlPoint;}
\DoxyCodeLine{00867 }
\DoxyCodeLine{00868   \textcolor{keyword}{const} \textcolor{keywordtype}{double} length = stroke-\/>\mbox{\hyperlink{class_t_stroke_a079a513cb8a60d9a759b4f0c8211eab4}{getLength}}();}
\DoxyCodeLine{00869 }
\DoxyCodeLine{00870   \textcolor{comment}{// invalid length}}
\DoxyCodeLine{00871   \textcolor{keywordflow}{if} (0.0 > atLength || atLength > length) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00872 }
\DoxyCodeLine{00873   \textcolor{keyword}{const} \textcolor{keywordtype}{int} cpCountAtBegin = stroke-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}();}
\DoxyCodeLine{00874   \textcolor{comment}{// invalid control point}}
\DoxyCodeLine{00875   \textcolor{keywordflow}{if} (0 > controlPoint || controlPoint > cpCountAtBegin) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00876 }
\DoxyCodeLine{00877   \textcolor{comment}{// identity}}
\DoxyCodeLine{00878   \textcolor{keywordflow}{if} ((controlPoint == 0 || controlPoint == (cpCountAtBegin -\/ 1)) \&\&}
\DoxyCodeLine{00879       (areAlmostEqual(atLength, length) || isAlmostZero(atLength)))}
\DoxyCodeLine{00880     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}(*stroke);}
\DoxyCodeLine{00881 }
\DoxyCodeLine{00882   \mbox{\hyperlink{class_t_stroke}{TStroke}} tmpStroke(*stroke);}
\DoxyCodeLine{00883 }
\DoxyCodeLine{00884   std::vector<TThickPoint> cp;}
\DoxyCodeLine{00885   \{}
\DoxyCodeLine{00886     \textcolor{keywordtype}{int} count = stroke-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}();}
\DoxyCodeLine{00887     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < count; ++i) \{}
\DoxyCodeLine{00888       cp.push\_back(stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(i));}
\DoxyCodeLine{00889     \}}
\DoxyCodeLine{00890   \}}
\DoxyCodeLine{00891 }
\DoxyCodeLine{00892   \textcolor{comment}{// add a control point where is necessary to have rotation (head\_queue cp)}}
\DoxyCodeLine{00893   tmpStroke.insertControlPointsAtLength(atLength);}
\DoxyCodeLine{00894 }
\DoxyCodeLine{00895 \textcolor{preprocessor}{\#ifdef \_DEBUG}}
\DoxyCodeLine{00896   \{}
\DoxyCodeLine{00897     \textcolor{keywordtype}{int} count  = stroke-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}(),}
\DoxyCodeLine{00898         count2 = tmpStroke.getControlPointCount();}
\DoxyCodeLine{00899     \textcolor{keywordtype}{int} i, firstDifference = -\/1;}
\DoxyCodeLine{00900     \textcolor{keywordflow}{for} (i = 0; i < count; ++i) \{}
\DoxyCodeLine{00901       \textcolor{keywordflow}{if} ((tp1 = stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(i)) !=}
\DoxyCodeLine{00902           (tp2 = tmpStroke.getControlPoint(i))) \{}
\DoxyCodeLine{00903         firstDifference = i;}
\DoxyCodeLine{00904         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00905       \}}
\DoxyCodeLine{00906     \}}
\DoxyCodeLine{00907 }
\DoxyCodeLine{00908     \textcolor{keywordflow}{for} (i = 0; i < count; ++i) \{}
\DoxyCodeLine{00909       \textcolor{keywordflow}{if} (i < firstDifference)}
\DoxyCodeLine{00910         assert((tp1 = stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(i)) ==}
\DoxyCodeLine{00911                (tp2 = tmpStroke.getControlPoint(i)));}
\DoxyCodeLine{00912       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00913         \textcolor{comment}{//        assert( (tp1=stroke-\/>getControlPoint(i)) ==}}
\DoxyCodeLine{00914         \textcolor{comment}{//                (tp2=tmpStroke.getControlPoint(i+2)));}}
\DoxyCodeLine{00915       \}}
\DoxyCodeLine{00916 }
\DoxyCodeLine{00917       tp1 = stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(i);}
\DoxyCodeLine{00918       tp2 = tmpStroke.getControlPoint(i);}
\DoxyCodeLine{00919     \}}
\DoxyCodeLine{00920   \}}
\DoxyCodeLine{00921 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00922   \textcolor{keyword}{const} \textcolor{keywordtype}{int} cpCount = tmpStroke.getControlPointCount();}
\DoxyCodeLine{00923 }
\DoxyCodeLine{00924   \textcolor{keywordtype}{double} w = tmpStroke.getParameterAtLength(atLength);}
\DoxyCodeLine{00925 }
\DoxyCodeLine{00926   \textcolor{keywordtype}{double} butta = tmpStroke.getLength(w);}
\DoxyCodeLine{00927   assert(areAlmostEqual(butta, atLength));}
\DoxyCodeLine{00928 }
\DoxyCodeLine{00929   \textcolor{comment}{// retrieve head\_queue control point}}
\DoxyCodeLine{00930   \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} head\_queue = tmpStroke.getControlPointAtParameter(w);}
\DoxyCodeLine{00931 }
\DoxyCodeLine{00932   \textcolor{comment}{// recover index}}
\DoxyCodeLine{00933   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00934   \textcolor{keywordflow}{for} (i = 0; i < cpCount; ++i) \{}
\DoxyCodeLine{00935     \textcolor{keywordflow}{if} (head\_queue == tmpStroke.getControlPoint(i)) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00936   \}}
\DoxyCodeLine{00937 }
\DoxyCodeLine{00938   \textcolor{keyword}{const} \textcolor{keywordtype}{int} head\_index = i;}
\DoxyCodeLine{00939 }
\DoxyCodeLine{00940   \textcolor{comment}{// uhmmm really strange}}
\DoxyCodeLine{00941   \textcolor{keywordflow}{if} (head\_index == cpCount) \{}
\DoxyCodeLine{00942     assert(!\textcolor{stringliteral}{"{}Error on procedure!!! Not control point found!!!"{}}}
\DoxyCodeLine{00943                 \textcolor{stringliteral}{"{} Wrong insert control point!!!"{}});}
\DoxyCodeLine{00944     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00945   \}}
\DoxyCodeLine{00946 }
\DoxyCodeLine{00947   \textcolor{comment}{// head\_index is the new head of stroke}}
\DoxyCodeLine{00948   std::vector<TThickPoint> new\_stroke\_cp;}
\DoxyCodeLine{00949 }
\DoxyCodeLine{00950   \textcolor{keywordflow}{for} (i = head\_index; i < cpCount; ++i) \{}
\DoxyCodeLine{00951     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} to\_add = tmpStroke.getControlPoint(i);}
\DoxyCodeLine{00952     new\_stroke\_cp.push\_back(to\_add);}
\DoxyCodeLine{00953   \}}
\DoxyCodeLine{00954 }
\DoxyCodeLine{00955   \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} tmpCP = tmpStroke.getControlPoint(0);}
\DoxyCodeLine{00956 }
\DoxyCodeLine{00957   \textcolor{keywordtype}{bool} check = areAlmostEqual(new\_stroke\_cp.back(), tmpCP, 0.01);}
\DoxyCodeLine{00958   \textcolor{comment}{// relaxed check}}
\DoxyCodeLine{00959   assert(check);}
\DoxyCodeLine{00960 }
\DoxyCodeLine{00961   \textcolor{keywordflow}{if} (!check) \{}
\DoxyCodeLine{00962     assert(!\textcolor{stringliteral}{"{}Error on procedure!!! Please verify algorithm!!!"{}});}
\DoxyCodeLine{00963     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00964   \}}
\DoxyCodeLine{00965 }
\DoxyCodeLine{00966   \textcolor{comment}{// 0 position is already inserted}}
\DoxyCodeLine{00967   \textcolor{keywordflow}{for} (i = 1; i < head\_index; ++i) \{}
\DoxyCodeLine{00968     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} to\_add = tmpStroke.getControlPoint(i);}
\DoxyCodeLine{00969     new\_stroke\_cp.push\_back(to\_add);}
\DoxyCodeLine{00970   \}}
\DoxyCodeLine{00971 }
\DoxyCodeLine{00972   \textcolor{comment}{// now add queue == head cp}}
\DoxyCodeLine{00973   new\_stroke\_cp.push\_back(new\_stroke\_cp[0]);}
\DoxyCodeLine{00974 }
\DoxyCodeLine{00975   assert((\textcolor{keywordtype}{int})new\_stroke\_cp.size() == cpCount);}
\DoxyCodeLine{00976 }
\DoxyCodeLine{00977   \textcolor{keywordflow}{if} (new\_stroke\_cp.back() != tmpStroke.getControlPoint(head\_index)) \{}
\DoxyCodeLine{00978     assert(!\textcolor{stringliteral}{"{}Error on procedure!!! Please verify algorithm!!!"{}});}
\DoxyCodeLine{00979     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00980   \}}
\DoxyCodeLine{00981 }
\DoxyCodeLine{00982   \mbox{\hyperlink{class_t_stroke}{TStroke}} *out = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}(new\_stroke\_cp);}
\DoxyCodeLine{00983   out-\/>\mbox{\hyperlink{class_t_stroke_afa2c66ae11a70e68b3de3ce0b4cfb049}{setSelfLoop}}();}
\DoxyCodeLine{00984   \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{00985 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01352}{TStroke\+::get\+Control\+Point()}}, \mbox{\hyperlink{l01384}{TStroke\+::get\+Control\+Point\+At\+Parameter()}}, \mbox{\hyperlink{l01849}{TStroke\+::get\+Control\+Point\+Count()}}, \mbox{\hyperlink{l01591}{TStroke\+::get\+Length()}}, \mbox{\hyperlink{l01981}{TStroke\+::get\+Parameter\+At\+Length()}}, \mbox{\hyperlink{l01619}{TStroke\+::insert\+Control\+Points\+At\+Length()}}, \mbox{\hyperlink{l00068}{Toonz\+Ext\+::\+Even\+Int\+::is\+Even()}}, \mbox{\hyperlink{l02488}{TStroke\+::is\+Self\+Loop()}}, and \mbox{\hyperlink{l02469}{TStroke\+::set\+Self\+Loop()}}.

\mbox{\Hypertarget{namespace_toonz_ext_ad34a2f00703a015395583693c4c4db7b}\label{namespace_toonz_ext_ad34a2f00703a015395583693c4c4db7b}} 
\index{ToonzExt@{ToonzExt}!straightCornersDetector@{straightCornersDetector}}
\index{straightCornersDetector@{straightCornersDetector}!ToonzExt@{ToonzExt}}
\doxysubsubsection{\texorpdfstring{straightCornersDetector()}{straightCornersDetector()}}
{\footnotesize\ttfamily DVAPI bool Toonz\+Ext\+::straight\+Corners\+Detector (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke,  }\item[{std\+::vector$<$ double $>$ \&}]{corners }\end{DoxyParamCaption})}



Like corners\+Detector but for straight corners. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00994                                                                          \{}
\DoxyCodeLine{00995   \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{ToonzExt::Intervals}} intervals;}
\DoxyCodeLine{00996 }
\DoxyCodeLine{00997   assert(corners.empty());}
\DoxyCodeLine{00998   \textcolor{keywordflow}{if} (!corners.empty()) corners.clear();}
\DoxyCodeLine{00999 }
\DoxyCodeLine{01000   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespace_toonz_ext_a6d0c60df65b9f34e2068f78463502478}{ToonzExt::detectStraightIntervals}}(stroke, intervals)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01001 }
\DoxyCodeLine{01002   assert(!intervals.empty() \&\& \textcolor{stringliteral}{"{}Intervals are empty!!!"{}});}
\DoxyCodeLine{01003   \textcolor{keywordflow}{if} (intervals.empty()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01004 }
\DoxyCodeLine{01005   \textcolor{keywordtype}{double} first;}
\DoxyCodeLine{01006 }
\DoxyCodeLine{01007   \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{ToonzExt::Interval}} prev = intervals[0], curr;}
\DoxyCodeLine{01008 }
\DoxyCodeLine{01009   \textcolor{keywordflow}{if} (stroke-\/>\mbox{\hyperlink{class_t_stroke_a3565d6c34d3eb02fb1a6993ca626425c}{isSelfLoop}}()) first = prev.first;}
\DoxyCodeLine{01010 }
\DoxyCodeLine{01011   \textcolor{keywordtype}{int} size = intervals.size();}
\DoxyCodeLine{01012   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i < size; ++i) \{}
\DoxyCodeLine{01013     curr = intervals[i];}
\DoxyCodeLine{01014     \textcolor{keywordflow}{if} (prev.second == curr.first) corners.push\_back(curr.first);}
\DoxyCodeLine{01015     prev = curr;}
\DoxyCodeLine{01016   \}}
\DoxyCodeLine{01017 }
\DoxyCodeLine{01018   \textcolor{keywordflow}{if} (stroke-\/>\mbox{\hyperlink{class_t_stroke_a3565d6c34d3eb02fb1a6993ca626425c}{isSelfLoop}}() \&\& curr.second == first) corners.push\_back(first);}
\DoxyCodeLine{01019 }
\DoxyCodeLine{01020   \textcolor{keywordflow}{return} !corners.empty();}
\DoxyCodeLine{01021 \}}

\end{DoxyCode}
