\hypertarget{classino__motion__wind}{}\doxysection{ino\+\_\+motion\+\_\+wind Class Reference}
\label{classino__motion__wind}\index{ino\_motion\_wind@{ino\_motion\_wind}}
Inheritance diagram for ino\+\_\+motion\+\_\+wind\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=5.000000cm]{classino__motion__wind}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{classino__motion__wind_abd365bcbbbdab30a953aaf63cc9c2c6e}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
bool \mbox{\hyperlink{classino__motion__wind_a7f52de3540d20ec5482fb1235b1c1a4b}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\item 
int \mbox{\hyperlink{classino__motion__wind_a53db6a66897a2da18ed6582bf6ce8551}{get\+Memory\+Requirement}} (const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
void \mbox{\hyperlink{classino__motion__wind_adaccbee4926a5264150f06ecb80cda11}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&rend\+\_\+sets) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classino__motion__wind_a94eee3406d4c676f92573460c8e9ce42}\label{classino__motion__wind_a94eee3406d4c676f92573460c8e9ce42}} 
\index{ino\_motion\_wind@{ino\_motion\_wind}!ino\_motion\_wind@{ino\_motion\_wind}}
\index{ino\_motion\_wind@{ino\_motion\_wind}!ino\_motion\_wind@{ino\_motion\_wind}}
\doxysubsubsection{\texorpdfstring{ino\_motion\_wind()}{ino\_motion\_wind()}}
{\footnotesize\ttfamily ino\+\_\+motion\+\_\+wind\+::ino\+\_\+motion\+\_\+wind (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00040       : m\_direction(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_enum_param}{TIntEnumParam}}(0, \textcolor{stringliteral}{"{}Right"{}}))}
\DoxyCodeLine{00041       , m\_dark(\textcolor{keyword}{false})}
\DoxyCodeLine{00042       , m\_alpha\_rendering(\textcolor{keyword}{true})}
\DoxyCodeLine{00043 }
\DoxyCodeLine{00044       , m\_length\_min(0.0)}
\DoxyCodeLine{00045       , m\_length\_max(18.0)}
\DoxyCodeLine{00046       , m\_length\_bias(1.0 * ino::param\_range())}
\DoxyCodeLine{00047       , m\_length\_seed(1.0)}
\DoxyCodeLine{00048       , m\_length\_ref(\textcolor{keyword}{false})}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050       , m\_force\_min(1.0 * ino::param\_range())}
\DoxyCodeLine{00051       , m\_force\_max(1.0 * ino::param\_range())}
\DoxyCodeLine{00052       , m\_force\_bias(1.0 * ino::param\_range())}
\DoxyCodeLine{00053       , m\_force\_seed(1.0)}
\DoxyCodeLine{00054       , m\_force\_ref(\textcolor{keyword}{false})}
\DoxyCodeLine{00055 }
\DoxyCodeLine{00056       , m\_density\_min(1.0 * ino::param\_range())}
\DoxyCodeLine{00057       , m\_density\_max(1.0 * ino::param\_range())}
\DoxyCodeLine{00058       , m\_density\_bias(1.0 * ino::param\_range())}
\DoxyCodeLine{00059       , m\_density\_seed(1.0)}
\DoxyCodeLine{00060       , m\_density\_ref(\textcolor{keyword}{false})}
\DoxyCodeLine{00061 }
\DoxyCodeLine{00062       \textcolor{comment}{// , m\_spread(true)}}
\DoxyCodeLine{00063       , m\_ref\_mode(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_enum_param}{TIntEnumParam}}(0, \textcolor{stringliteral}{"{}Red"{}})) \{}
\DoxyCodeLine{00064     this-\/>m\_length\_min-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00065     this-\/>m\_length\_max-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00066 }
\DoxyCodeLine{00067     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Source"{}}, this-\/>m\_input);}
\DoxyCodeLine{00068     \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Reference"{}}, this-\/>m\_refer);}
\DoxyCodeLine{00069 }
\DoxyCodeLine{00070     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}direction"{}}, this-\/>m\_direction);}
\DoxyCodeLine{00071     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}dark"{}}, this-\/>m\_dark);}
\DoxyCodeLine{00072     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}alpha\_rendering"{}}, this-\/>m\_alpha\_rendering);}
\DoxyCodeLine{00073 }
\DoxyCodeLine{00074     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}length\_min"{}}, this-\/>m\_length\_min);}
\DoxyCodeLine{00075     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}length\_max"{}}, this-\/>m\_length\_max);}
\DoxyCodeLine{00076     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}length\_bias"{}}, this-\/>m\_length\_bias);}
\DoxyCodeLine{00077     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}length\_seed"{}}, this-\/>m\_length\_seed);}
\DoxyCodeLine{00078     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}length\_ref"{}}, this-\/>m\_length\_ref);}
\DoxyCodeLine{00079 }
\DoxyCodeLine{00080     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}force\_min"{}}, this-\/>m\_force\_min);}
\DoxyCodeLine{00081     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}force\_max"{}}, this-\/>m\_force\_max);}
\DoxyCodeLine{00082     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}force\_bias"{}}, this-\/>m\_force\_bias);}
\DoxyCodeLine{00083     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}force\_seed"{}}, this-\/>m\_force\_seed);}
\DoxyCodeLine{00084     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}force\_ref"{}}, this-\/>m\_force\_ref);}
\DoxyCodeLine{00085 }
\DoxyCodeLine{00086     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}density\_min"{}}, this-\/>m\_density\_min);}
\DoxyCodeLine{00087     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}density\_max"{}}, this-\/>m\_density\_max);}
\DoxyCodeLine{00088     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}density\_bias"{}}, this-\/>m\_density\_bias);}
\DoxyCodeLine{00089     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}density\_seed"{}}, this-\/>m\_density\_seed);}
\DoxyCodeLine{00090     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}density\_ref"{}}, this-\/>m\_density\_ref);}
\DoxyCodeLine{00091     \textcolor{comment}{// bindParam(this,"{}spread"{}, this-\/>m\_spread);}}
\DoxyCodeLine{00092     bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}reference"{}}, this-\/>m\_ref\_mode);}
\DoxyCodeLine{00093 }
\DoxyCodeLine{00094     this-\/>m\_direction-\/>addItem(1, \textcolor{stringliteral}{"{}Up"{}});}
\DoxyCodeLine{00095     this-\/>m\_direction-\/>addItem(2, \textcolor{stringliteral}{"{}Left"{}});}
\DoxyCodeLine{00096     this-\/>m\_direction-\/>addItem(3, \textcolor{stringliteral}{"{}Down"{}});}
\DoxyCodeLine{00097 }
\DoxyCodeLine{00098     this-\/>m\_length\_min-\/>setValueRange(0.0, 1000.0);}
\DoxyCodeLine{00099     this-\/>m\_length\_max-\/>setValueRange(0.0, 1000.0);}
\DoxyCodeLine{00100     this-\/>m\_length\_bias-\/>setValueRange(0.1 * ino::param\_range(),}
\DoxyCodeLine{00101                                        10.0 * ino::param\_range()); \textcolor{comment}{/* gamma値 */}}
\DoxyCodeLine{00102     this-\/>m\_length\_seed-\/>setValueRange(}
\DoxyCodeLine{00103         0, std::numeric\_limits<unsigned long>::max());}
\DoxyCodeLine{00104 }
\DoxyCodeLine{00105     this-\/>m\_force\_min-\/>setValueRange(0.1 * ino::param\_range(),}
\DoxyCodeLine{00106                                      10.0 * ino::param\_range()); \textcolor{comment}{/* gamma値 */}}
\DoxyCodeLine{00107     this-\/>m\_force\_max-\/>setValueRange(0.1 * ino::param\_range(),}
\DoxyCodeLine{00108                                      10.0 * ino::param\_range()); \textcolor{comment}{/* gamma値 */}}
\DoxyCodeLine{00109     this-\/>m\_force\_bias-\/>setValueRange(0.1 * ino::param\_range(),}
\DoxyCodeLine{00110                                       10.0 * ino::param\_range()); \textcolor{comment}{/* gamma値 */}}
\DoxyCodeLine{00111     this-\/>m\_force\_seed-\/>setValueRange(}
\DoxyCodeLine{00112         0, std::numeric\_limits<unsigned long>::max());}
\DoxyCodeLine{00113 }
\DoxyCodeLine{00114     this-\/>m\_density\_min-\/>setValueRange(0.0 * ino::param\_range(),}
\DoxyCodeLine{00115                                        100.0 * ino::param\_range());}
\DoxyCodeLine{00116     this-\/>m\_density\_max-\/>setValueRange(0.0 * ino::param\_range(),}
\DoxyCodeLine{00117                                        100.0 * ino::param\_range());}
\DoxyCodeLine{00118     this-\/>m\_density\_bias-\/>setValueRange(}
\DoxyCodeLine{00119         0.1 * ino::param\_range(), 10.0 * ino::param\_range()); \textcolor{comment}{/* gamma値 */}}
\DoxyCodeLine{00120     this-\/>m\_density\_seed-\/>setValueRange(}
\DoxyCodeLine{00121         0, std::numeric\_limits<unsigned long>::max());}
\DoxyCodeLine{00122 }
\DoxyCodeLine{00123     this-\/>m\_ref\_mode-\/>addItem(1, \textcolor{stringliteral}{"{}Green"{}});}
\DoxyCodeLine{00124     this-\/>m\_ref\_mode-\/>addItem(2, \textcolor{stringliteral}{"{}Blue"{}});}
\DoxyCodeLine{00125     this-\/>m\_ref\_mode-\/>addItem(3, \textcolor{stringliteral}{"{}Alpha"{}});}
\DoxyCodeLine{00126     this-\/>m\_ref\_mode-\/>addItem(4, \textcolor{stringliteral}{"{}Luminance"{}});}
\DoxyCodeLine{00127     this-\/>m\_ref\_mode-\/>addItem(-\/1, \textcolor{stringliteral}{"{}Nothing"{}});}
\DoxyCodeLine{00128   \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classino__motion__wind_a7f52de3540d20ec5482fb1235b1c1a4b}\label{classino__motion__wind_a7f52de3540d20ec5482fb1235b1c1a4b}} 
\index{ino\_motion\_wind@{ino\_motion\_wind}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!ino\_motion\_wind@{ino\_motion\_wind}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool ino\+\_\+motion\+\_\+wind\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00148                                                                      \{}
\DoxyCodeLine{00149     \textcolor{comment}{// return true;}}
\DoxyCodeLine{00150     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00151   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classino__motion__wind_adaccbee4926a5264150f06ecb80cda11}\label{classino__motion__wind_adaccbee4926a5264150f06ecb80cda11}} 
\index{ino\_motion\_wind@{ino\_motion\_wind}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!ino\_motion\_wind@{ino\_motion\_wind}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void ino\+\_\+motion\+\_\+wind\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{rend\+\_\+sets }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00284                                                                   \{}
\DoxyCodeLine{00285   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 接続していなければ処理しない -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00286   \textcolor{keywordflow}{if} (!this-\/>m\_input.isConnected()) \{}
\DoxyCodeLine{00287     tile.getRaster()-\/>clear(); \textcolor{comment}{/* 塗りつぶしクリア */}}
\DoxyCodeLine{00288     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00289   \}}
\DoxyCodeLine{00290 }
\DoxyCodeLine{00291   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ サポートしていないPixelタイプはエラーを投げる -\/-\/-\/ */}}
\DoxyCodeLine{00292   \textcolor{keywordflow}{if} (!((\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}})tile.getRaster()) \&\& !((\mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}})tile.getRaster())) \{}
\DoxyCodeLine{00293     \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_rop_exception}{TRopException}}(\textcolor{stringliteral}{"{}unsupported input pixel type"{}});}
\DoxyCodeLine{00294   \}}
\DoxyCodeLine{00295 }
\DoxyCodeLine{00296   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ Pixel単位で動作パラメータを得る -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00297   \textcolor{comment}{/* 単位変換用スケーリング}}
\DoxyCodeLine{00298 \textcolor{comment}{  外積(面積)}}
\DoxyCodeLine{00299 \textcolor{comment}{          rend\_sets.m\_affine.det() = a11*a22-\/a12*a21 // double}}
\DoxyCodeLine{00300 \textcolor{comment}{  シュリンク値}}
\DoxyCodeLine{00301 \textcolor{comment}{          rend\_sets.m\_shrinkX // int}}
\DoxyCodeLine{00302 \textcolor{comment}{          rend\_sets.m\_shrinkY // int}}
\DoxyCodeLine{00303 \textcolor{comment}{  */}}
\DoxyCodeLine{00304   \textcolor{keyword}{const} \textcolor{keywordtype}{double} mm2scale\_shrink\_pixel =}
\DoxyCodeLine{00305       ino::pixel\_per\_mm() * sqrt(fabs(rend\_sets.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.det())) /}
\DoxyCodeLine{00306       ((rend\_sets.\mbox{\hyperlink{class_t_render_settings_a52dd41881bbf6aaf953fe300be2e233e}{m\_shrinkX}} + rend\_sets.\mbox{\hyperlink{class_t_render_settings_ae1882f584ce9ffad12ce6bf9ff23814c}{m\_shrinkY}}) / 2.0);}
\DoxyCodeLine{00307 }
\DoxyCodeLine{00308   \textcolor{comment}{/* 動作パラメータを得る */}}
\DoxyCodeLine{00309   \textcolor{keyword}{const} \textcolor{keywordtype}{int} direction    = this-\/>m\_direction-\/>getValue();}
\DoxyCodeLine{00310   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} dark\_sw     = this-\/>m\_dark-\/>getValue();}
\DoxyCodeLine{00311   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} alp\_rend\_sw = this-\/>m\_alpha\_rendering-\/>getValue();}
\DoxyCodeLine{00312 }
\DoxyCodeLine{00313   \textcolor{keyword}{const} \textcolor{keywordtype}{double} length\_min =}
\DoxyCodeLine{00314       this-\/>m\_length\_min-\/>getValue(frame) * mm2scale\_shrink\_pixel;}
\DoxyCodeLine{00315   \textcolor{keyword}{const} \textcolor{keywordtype}{double} length\_max =}
\DoxyCodeLine{00316       this-\/>m\_length\_max-\/>getValue(frame) * mm2scale\_shrink\_pixel;}
\DoxyCodeLine{00317   \textcolor{keyword}{const} \textcolor{keywordtype}{double} length\_bias =}
\DoxyCodeLine{00318       this-\/>m\_length\_bias-\/>getValue(frame) / ino::param\_range();}
\DoxyCodeLine{00319   \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} length\_seed = this-\/>m\_length\_seed-\/>getValue(frame);}
\DoxyCodeLine{00320   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} length\_ref\_sw        = this-\/>m\_length\_ref-\/>getValue();}
\DoxyCodeLine{00321 }
\DoxyCodeLine{00322   \textcolor{keyword}{const} \textcolor{keywordtype}{double} force\_min =}
\DoxyCodeLine{00323       this-\/>m\_force\_min-\/>getValue(frame) / ino::param\_range();}
\DoxyCodeLine{00324   \textcolor{keyword}{const} \textcolor{keywordtype}{double} force\_max =}
\DoxyCodeLine{00325       this-\/>m\_force\_max-\/>getValue(frame) / ino::param\_range();}
\DoxyCodeLine{00326   \textcolor{keyword}{const} \textcolor{keywordtype}{double} force\_bias =}
\DoxyCodeLine{00327       this-\/>m\_force\_bias-\/>getValue(frame) / ino::param\_range();}
\DoxyCodeLine{00328   \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} force\_seed = this-\/>m\_force\_seed-\/>getValue(frame);}
\DoxyCodeLine{00329   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} force\_ref\_sw        = this-\/>m\_force\_ref-\/>getValue();}
\DoxyCodeLine{00330 }
\DoxyCodeLine{00331   \textcolor{keyword}{const} \textcolor{keywordtype}{double} density\_min =}
\DoxyCodeLine{00332       this-\/>m\_density\_min-\/>getValue(frame) / ino::param\_range();}
\DoxyCodeLine{00333   \textcolor{keyword}{const} \textcolor{keywordtype}{double} density\_max =}
\DoxyCodeLine{00334       this-\/>m\_density\_max-\/>getValue(frame) / ino::param\_range();}
\DoxyCodeLine{00335   \textcolor{keyword}{const} \textcolor{keywordtype}{double} density\_bias =}
\DoxyCodeLine{00336       this-\/>m\_density\_bias-\/>getValue(frame) / ino::param\_range();}
\DoxyCodeLine{00337   \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} density\_seed = this-\/>m\_density\_seed-\/>getValue(frame);}
\DoxyCodeLine{00338   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} density\_ref\_sw        = this-\/>m\_density\_ref-\/>getValue();}
\DoxyCodeLine{00339   \textcolor{keyword}{const} \textcolor{keywordtype}{int} refer\_mode             = this-\/>m\_ref\_mode-\/>getValue();}
\DoxyCodeLine{00340 }
\DoxyCodeLine{00341   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 参照マージン含めた画像生成 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00342   \textcolor{comment}{/* Rendering画像のBBox値 -\/-\/> Pixel単位のdouble値 */}}
\DoxyCodeLine{00343   \textcolor{comment}{/*    typedef TRectT<double> TRectD;}}
\DoxyCodeLine{00344 \textcolor{comment}{          inline TRectT<double>::TRectT(}}
\DoxyCodeLine{00345 \textcolor{comment}{                  const TPointT<double> \&bottomLeft}}
\DoxyCodeLine{00346 \textcolor{comment}{                  , const TDimensionT<double> \&d}}
\DoxyCodeLine{00347 \textcolor{comment}{          ) : x0(bottomLeft.x)}}
\DoxyCodeLine{00348 \textcolor{comment}{                  , y0(bottomLeft.y)}}
\DoxyCodeLine{00349 \textcolor{comment}{                  , x1(bottomLeft.x+d.lx)}}
\DoxyCodeLine{00350 \textcolor{comment}{                  , y1(bottomLeft.y+d.ly)}}
\DoxyCodeLine{00351 \textcolor{comment}{          \{\}}}
\DoxyCodeLine{00352 \textcolor{comment}{  */}}
\DoxyCodeLine{00353   \mbox{\hyperlink{class_t_rect_t}{TRectD}} enlarge\_rect =}
\DoxyCodeLine{00354       \mbox{\hyperlink{class_t_rect_t}{TRectD}}(tile.m\_pos \textcolor{comment}{/* TPointD */}}
\DoxyCodeLine{00355              ,}
\DoxyCodeLine{00356              \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}}(\textcolor{comment}{/* int -\/-\/> doubleにしてセット */}}
\DoxyCodeLine{00357                          tile.getRaster()-\/>getLx(), tile.getRaster()-\/>getLy()));}
\DoxyCodeLine{00358   \textcolor{comment}{/* BBoxの拡大 Pixel単位 */}}
\DoxyCodeLine{00359   \textcolor{keyword}{const} \textcolor{keywordtype}{int} enlarge\_pixel =}
\DoxyCodeLine{00360       (int)(ceil((length\_min < length\_max) ? length\_max : length\_min) + 0.5);}
\DoxyCodeLine{00361   enlarge\_rect = enlarge\_rect.enlarge(enlarge\_pixel);}
\DoxyCodeLine{00362 }
\DoxyCodeLine{00363   \textcolor{comment}{/*    void TRasterFx::allocateAndCompute(}}
\DoxyCodeLine{00364 \textcolor{comment}{                  TTile \&tile,}}
\DoxyCodeLine{00365 \textcolor{comment}{                  const TPointD \&pos, const TDimension \&size,}}
\DoxyCodeLine{00366 \textcolor{comment}{                  const TRasterP \&templateRas, double frame,}}
\DoxyCodeLine{00367 \textcolor{comment}{                  const TRenderSettings \&info}}
\DoxyCodeLine{00368 \textcolor{comment}{          ) \{}}
\DoxyCodeLine{00369 \textcolor{comment}{                  if (templateRas) \{}}
\DoxyCodeLine{00370 \textcolor{comment}{          tile.getRaster() = templateRas-\/>create(size.lx, size.ly);}}
\DoxyCodeLine{00371 \textcolor{comment}{                  \} else \{}}
\DoxyCodeLine{00372 \textcolor{comment}{          tile.getRaster() = TRaster32P(size.lx, size.ly);}}
\DoxyCodeLine{00373 \textcolor{comment}{                  \}}}
\DoxyCodeLine{00374 \textcolor{comment}{          tile.m\_pos = pos;}}
\DoxyCodeLine{00375 \textcolor{comment}{                  compute(tile, frame, info);}}
\DoxyCodeLine{00376 \textcolor{comment}{          \}}}
\DoxyCodeLine{00377 \textcolor{comment}{  */}}
\DoxyCodeLine{00378   \mbox{\hyperlink{class_t_tile}{TTile}} enlarge\_tile;}
\DoxyCodeLine{00379   this-\/>m\_input-\/>allocateAndCompute(}
\DoxyCodeLine{00380       enlarge\_tile, enlarge\_rect.getP00(),}
\DoxyCodeLine{00381       \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}}(\textcolor{comment}{/* Pixel単位のdouble -\/> intにしてセット */}}
\DoxyCodeLine{00382                   (\textcolor{keywordtype}{int})(enlarge\_rect.getLx() + 0.5),}
\DoxyCodeLine{00383                   (\textcolor{keywordtype}{int})(enlarge\_rect.getLy() + 0.5)),}
\DoxyCodeLine{00384       tile.getRaster(), frame, rend\_sets);}
\DoxyCodeLine{00385 }
\DoxyCodeLine{00386   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 保存すべき画像メモリを塗りつぶしクリア -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00387   tile.getRaster()-\/>clear(); \textcolor{comment}{/* 塗りつぶしクリア */}}
\DoxyCodeLine{00388 }
\DoxyCodeLine{00389   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ 参照画像生成 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00390   \mbox{\hyperlink{class_t_tile}{TTile}} refer\_tile;}
\DoxyCodeLine{00391   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} refer\_sw = this-\/>m\_refer.isConnected();}
\DoxyCodeLine{00392   \textcolor{keywordflow}{if} (refer\_sw) \{}
\DoxyCodeLine{00393     this-\/>m\_refer-\/>allocateAndCompute(}
\DoxyCodeLine{00394         refer\_tile}
\DoxyCodeLine{00395         \textcolor{comment}{// tile.m\_pos,}}
\DoxyCodeLine{00396         \textcolor{comment}{// tile.getRaster()-\/>getSize(),}}
\DoxyCodeLine{00397         ,}
\DoxyCodeLine{00398         enlarge\_rect.getP00(),}
\DoxyCodeLine{00399         \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}}(\textcolor{comment}{/* Pixel単位のdouble -\/> intにしてセット */}}
\DoxyCodeLine{00400                     (\textcolor{keywordtype}{int})(enlarge\_rect.getLx() + 0.5),}
\DoxyCodeLine{00401                     (\textcolor{keywordtype}{int})(enlarge\_rect.getLy() + 0.5)),}
\DoxyCodeLine{00402         tile.getRaster(), frame, rend\_sets);}
\DoxyCodeLine{00403   \}}
\DoxyCodeLine{00404 }
\DoxyCodeLine{00405   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ (app\_begin)log記憶 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00406   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} log\_sw = ino::log\_enable\_sw();}
\DoxyCodeLine{00407 }
\DoxyCodeLine{00408   \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00409     std::ostringstream os;}
\DoxyCodeLine{00410     os << \textcolor{stringliteral}{"{}params"{}}}
\DoxyCodeLine{00411        << \textcolor{stringliteral}{"{}  dir "{}} << direction << \textcolor{stringliteral}{"{}  dark\_sw "{}} << dark\_sw << \textcolor{stringliteral}{"{}  alp\_rend\_sw "{}}}
\DoxyCodeLine{00412        << alp\_rend\_sw}
\DoxyCodeLine{00413 }
\DoxyCodeLine{00414        << \textcolor{stringliteral}{"{}  len\_min "{}} << length\_min << \textcolor{stringliteral}{"{}  len\_max "{}} << length\_max}
\DoxyCodeLine{00415        << \textcolor{stringliteral}{"{}  len\_bias "{}} << length\_bias << \textcolor{stringliteral}{"{}  len\_seed "{}} << length\_seed}
\DoxyCodeLine{00416        << \textcolor{stringliteral}{"{}  len\_ref\_sw "{}} << length\_ref\_sw}
\DoxyCodeLine{00417 }
\DoxyCodeLine{00418        << \textcolor{stringliteral}{"{}  for\_min "{}} << force\_min << \textcolor{stringliteral}{"{}  for\_max "{}} << force\_max}
\DoxyCodeLine{00419        << \textcolor{stringliteral}{"{}  for\_bias "{}} << force\_bias << \textcolor{stringliteral}{"{}  for\_seed "{}} << force\_seed}
\DoxyCodeLine{00420        << \textcolor{stringliteral}{"{}  for\_ref\_sw "{}} << force\_ref\_sw}
\DoxyCodeLine{00421 }
\DoxyCodeLine{00422        << \textcolor{stringliteral}{"{}  den\_min "{}} << density\_min << \textcolor{stringliteral}{"{}  den\_max "{}} << density\_max}
\DoxyCodeLine{00423        << \textcolor{stringliteral}{"{}  den\_bias "{}} << density\_bias << \textcolor{stringliteral}{"{}  den\_seed "{}} << density\_seed}
\DoxyCodeLine{00424        << \textcolor{stringliteral}{"{}  den\_ref\_sw "{}} << density\_ref\_sw << \textcolor{stringliteral}{"{}  reference "{}} << refer\_mode}
\DoxyCodeLine{00425 }
\DoxyCodeLine{00426        << \textcolor{stringliteral}{"{}   tile w "{}} << tile.getRaster()-\/>getLx() << \textcolor{stringliteral}{"{}  h "{}}}
\DoxyCodeLine{00427        << tile.getRaster()-\/>getLy() << \textcolor{stringliteral}{"{}  pixbits "{}}}
\DoxyCodeLine{00428        << ino::pixel\_bits(tile.getRaster());}
\DoxyCodeLine{00429     \textcolor{keywordflow}{if} (refer\_sw) \{}
\DoxyCodeLine{00430       os << \textcolor{stringliteral}{"{}   rtile w "{}} << refer\_tile.getRaster()-\/>getLx() << \textcolor{stringliteral}{"{}  h "{}}}
\DoxyCodeLine{00431          << refer\_tile.getRaster()-\/>getLy();}
\DoxyCodeLine{00432     \}}
\DoxyCodeLine{00433     os << \textcolor{stringliteral}{"{}   frame "{}} << frame << \textcolor{stringliteral}{"{}   rand\_sets affine\_det "{}}}
\DoxyCodeLine{00434        << rend\_sets.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}.det() << \textcolor{stringliteral}{"{}  shrink x "{}} << rend\_sets.\mbox{\hyperlink{class_t_render_settings_a52dd41881bbf6aaf953fe300be2e233e}{m\_shrinkX}}}
\DoxyCodeLine{00435        << \textcolor{stringliteral}{"{}  y "{}} << rend\_sets.\mbox{\hyperlink{class_t_render_settings_ae1882f584ce9ffad12ce6bf9ff23814c}{m\_shrinkY}};}
\DoxyCodeLine{00436   \}}
\DoxyCodeLine{00437   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ fx処理 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00438   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00439     tile.getRaster()-\/>lock();}
\DoxyCodeLine{00440     enlarge\_tile.getRaster()-\/>lock();}
\DoxyCodeLine{00441     \textcolor{keywordflow}{if} (refer\_tile.getRaster() != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{00442       refer\_tile.getRaster()-\/>lock();}
\DoxyCodeLine{00443     \}}
\DoxyCodeLine{00444     fx\_(enlarge\_tile.getRaster()  \textcolor{comment}{// in with margin}}
\DoxyCodeLine{00445         ,}
\DoxyCodeLine{00446         refer\_tile.getRaster()  \textcolor{comment}{// with margin}}
\DoxyCodeLine{00447         ,}
\DoxyCodeLine{00448         refer\_mode, enlarge\_pixel  \textcolor{comment}{// margin}}
\DoxyCodeLine{00449         ,}
\DoxyCodeLine{00450         tile.getRaster()  \textcolor{comment}{// out with no margin}}
\DoxyCodeLine{00451 }
\DoxyCodeLine{00452         ,}
\DoxyCodeLine{00453         direction, dark\_sw, alp\_rend\_sw}
\DoxyCodeLine{00454 }
\DoxyCodeLine{00455         ,}
\DoxyCodeLine{00456         length\_min, length\_max, length\_bias, length\_seed, length\_ref\_sw,}
\DoxyCodeLine{00457         force\_min, force\_max, force\_bias, force\_seed, force\_ref\_sw, density\_min,}
\DoxyCodeLine{00458         density\_max, density\_bias, density\_seed, density\_ref\_sw);}
\DoxyCodeLine{00459     \textcolor{keywordflow}{if} (refer\_tile.getRaster() != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{00460       refer\_tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00461     \}}
\DoxyCodeLine{00462     enlarge\_tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00463     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00464   \}}
\DoxyCodeLine{00465   \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/ error処理 -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{00466   \textcolor{keywordflow}{catch} (std::bad\_alloc \&e) \{}
\DoxyCodeLine{00467     \textcolor{keywordflow}{if} (refer\_tile.getRaster() != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{00468       refer\_tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00469     \}}
\DoxyCodeLine{00470     enlarge\_tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00471     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00472     \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00473       std::string str(\textcolor{stringliteral}{"{}std::bad\_alloc <"{}});}
\DoxyCodeLine{00474       str += e.what();}
\DoxyCodeLine{00475       str += \textcolor{charliteral}{'>'};}
\DoxyCodeLine{00476     \}}
\DoxyCodeLine{00477     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00478   \} \textcolor{keywordflow}{catch} (std::exception \&e) \{}
\DoxyCodeLine{00479     \textcolor{keywordflow}{if} (refer\_tile.getRaster() != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{00480       refer\_tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00481     \}}
\DoxyCodeLine{00482     enlarge\_tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00483     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00484     \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00485       std::string str(\textcolor{stringliteral}{"{}exception <"{}});}
\DoxyCodeLine{00486       str += e.what();}
\DoxyCodeLine{00487       str += \textcolor{charliteral}{'>'};}
\DoxyCodeLine{00488     \}}
\DoxyCodeLine{00489     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00490   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00491     \textcolor{keywordflow}{if} (refer\_tile.getRaster() != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{00492       refer\_tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00493     \}}
\DoxyCodeLine{00494     enlarge\_tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00495     tile.getRaster()-\/>unlock();}
\DoxyCodeLine{00496     \textcolor{keywordflow}{if} (log\_sw) \{}
\DoxyCodeLine{00497       std::string str(\textcolor{stringliteral}{"{}other exception"{}});}
\DoxyCodeLine{00498     \}}
\DoxyCodeLine{00499     \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00500   \}}
\DoxyCodeLine{00501 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classino__motion__wind_abd365bcbbbdab30a953aaf63cc9c2c6e}\label{classino__motion__wind_abd365bcbbbdab30a953aaf63cc9c2c6e}} 
\index{ino\_motion\_wind@{ino\_motion\_wind}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!ino\_motion\_wind@{ino\_motion\_wind}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool ino\+\_\+motion\+\_\+wind\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00130                                                        \{}
\DoxyCodeLine{00131     \textcolor{keywordflow}{if} (this-\/>m\_input.isConnected()) \{}
\DoxyCodeLine{00132       \textcolor{keyword}{const} \textcolor{keywordtype}{bool} ret = this-\/>m\_input-\/>doGetBBox(frame, bBox, info);}
\DoxyCodeLine{00133       \textcolor{comment}{// if ( this-\/>m\_spread-\/>getValue() ) \{}}
\DoxyCodeLine{00134       \textcolor{keyword}{const} \textcolor{keywordtype}{double} min = this-\/>m\_length\_min-\/>getValue(frame);}
\DoxyCodeLine{00135       \textcolor{keyword}{const} \textcolor{keywordtype}{double} max = this-\/>m\_length\_max-\/>getValue(frame);}
\DoxyCodeLine{00136       \textcolor{keyword}{const} \textcolor{keywordtype}{double} margin =}
\DoxyCodeLine{00137           ceil(ino::pixel\_per\_mm() * ((min < max) ? max : min));}
\DoxyCodeLine{00138       \textcolor{keywordflow}{if} (0.0 < margin) \{}
\DoxyCodeLine{00139         bBox = bBox.enlarge(margin);}
\DoxyCodeLine{00140       \}}
\DoxyCodeLine{00141       \textcolor{comment}{// \}}}
\DoxyCodeLine{00142       \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00143     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00144       bBox = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00145       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00146     \}}
\DoxyCodeLine{00147   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classino__motion__wind_a53db6a66897a2da18ed6582bf6ce8551}\label{classino__motion__wind_a53db6a66897a2da18ed6582bf6ce8551}} 
\index{ino\_motion\_wind@{ino\_motion\_wind}!getMemoryRequirement@{getMemoryRequirement}}
\index{getMemoryRequirement@{getMemoryRequirement}!ino\_motion\_wind@{ino\_motion\_wind}}
\doxysubsubsection{\texorpdfstring{getMemoryRequirement()}{getMemoryRequirement()}}
{\footnotesize\ttfamily int ino\+\_\+motion\+\_\+wind\+::get\+Memory\+Requirement (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Specifies the approximate size (in Mega\+Bytes) of the maximum allocation instance that this fx will need to perform in order to render the passed input. This method should be reimplemented in order to make the Toonz rendering process aware of the use of big raster memory chunks, at least. Observe that the passed tile geometry is implicitly {\itshape  already allocated \texorpdfstring{$<$}{<}\textbackslash{}i\texorpdfstring{$>$}{>} for the fx output. ~\newline
The default implementation returns 0, assuming that the passed implicit memory size is passed below in node computation without further allocation of resources. Fxs can reimplement this to -\/1 to explicitly disable the Toonz\textquotesingle{}s smart memory handling. ~\newline
 ~\newline
\begin{DoxyNote}{Note}
The rendering process ensures that the passed render settings are {\itshape handled} by the fx before this function is invoked -\/ do not waste code for it. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRaster\+Fx\+::memory\+Size}} and TRaster\+Fx\+::can\+Handle methods. 
\end{DoxySeeAlso}
}

Reimplemented from \mbox{\hyperlink{class_t_raster_fx_af8eb991c9756f4fb2e48d9f96cbacfba}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00153                                                                  \{}
\DoxyCodeLine{00154     \textcolor{keyword}{const} \textcolor{keywordtype}{double} mm2scale\_shrink\_pixel =}
\DoxyCodeLine{00155         ino::pixel\_per\_mm() * sqrt(fabs(info.m\_affine.det())) /}
\DoxyCodeLine{00156         ((info.m\_shrinkX + info.m\_shrinkY) / 2.0);}
\DoxyCodeLine{00157     \textcolor{keyword}{const} \textcolor{keywordtype}{double} length\_min =}
\DoxyCodeLine{00158         this-\/>m\_length\_min-\/>getValue(frame) * mm2scale\_shrink\_pixel;}
\DoxyCodeLine{00159     \textcolor{keyword}{const} \textcolor{keywordtype}{double} length\_max =}
\DoxyCodeLine{00160         this-\/>m\_length\_max-\/>getValue(frame) * mm2scale\_shrink\_pixel;}
\DoxyCodeLine{00161     \textcolor{keyword}{const} \textcolor{keywordtype}{int} enlarge\_pixel =}
\DoxyCodeLine{00162         (int)(ceil((length\_min < length\_max) ? length\_max : length\_min) + 0.5);}
\DoxyCodeLine{00163     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_raster_fx_a909a7afa779121b6caef5093da6447b0}{TRasterFx::memorySize}}(rect.enlarge(enlarge\_pixel), info.m\_bpp);}
\DoxyCodeLine{00164   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00560}{TRaster\+Fx\+::memory\+Size()}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/ino\+\_\+motion\+\_\+wind.\+cpp\end{DoxyCompactItemize}
