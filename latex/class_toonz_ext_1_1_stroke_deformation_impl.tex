\hypertarget{class_toonz_ext_1_1_stroke_deformation_impl}{}\doxysection{Toonz\+Ext\+::Stroke\+Deformation\+Impl Class Reference}
\label{class_toonz_ext_1_1_stroke_deformation_impl}\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
Inheritance diagram for Toonz\+Ext\+::Stroke\+Deformation\+Impl\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=1.637427cm]{class_toonz_ext_1_1_stroke_deformation_impl}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{Toonz\+Ext\+::\+Interval}} \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a0987e33aff9b75eafa132762afde52e3}{get\+Extremes}} ()
\item 
const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a1c304ce8ece13e800df1591440cd7e29}{get\+Stroke\+Selected}} () const
\item 
const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a675f4acf33681cebbfe6c08752456c6c}{get\+Copied\+Stroke}} () const
\item 
virtual bool \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a5c94a88b8d99d53dd2bf93491e369886}{activate\+\_\+impl}} (const \mbox{\hyperlink{struct_toonz_ext_1_1_context_status}{Context\+Status}} $\ast$)
\item 
virtual void \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_ac7d9294184d96bbb4ea6ae07ad3df897}{update\+\_\+impl}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&delta)
\item 
virtual \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_aeb78b48764d4d31cc39491928a603a79}{deactivate\+\_\+impl}} ()
\item 
bool \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a07c405f48ad495a95ab0f95f06ee365e}{check}} (const \mbox{\hyperlink{struct_toonz_ext_1_1_context_status}{Context\+Status}} $\ast$)
\item 
virtual void \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a1c16c95fa8d78156bbff65a8583acc19}{reset}} ()
\item 
void \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a71b1d78c6b87d3f814739defe3321f69}{set\+Potential}} (\mbox{\hyperlink{class_toonz_ext_1_1_potential}{Potential}} $\ast$)
\item 
virtual void \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_af5328002d2be2c15cdee226795163436}{draw}} (\mbox{\hyperlink{class_toonz_ext_1_1_designer}{Designer}} $\ast$)
\item 
\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a994938974c9ef05b33f5bb2d31741df3}{get\+Transformed\+Stroke}} ()
\item 
\mbox{\hyperlink{class_toonz_ext_1_1_potential}{Toonz\+Ext\+::\+Potential}} $\ast$ \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a0a240e79b5f077379bf06114b07f8f04}{get\+Potential}} ()
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \& \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a475946043f5968545c0c47830f67690b}{old\+W0}} ()
\item 
int \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_ac8ca69f28eb9171dffc413ae76cdfcfe}{get\+Shortcut\+Key}} () const
\item 
int \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a0af0e2162f43b294463f63be988cc5bb}{get\+Cursor\+Id}} () const
\item 
void \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a06f285dfe94c56c21ef9852158860dec}{set\+Cursor\+Id}} (int id)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static const \mbox{\hyperlink{struct_toonz_ext_1_1_context_status}{Context\+Status}} $\ast$\& \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_ae54c7a3a6fa517e182cb6b3718c451e9}{get\+Impl\+Status}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual bool \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_afa80ae95b9c30163453dc08fdc9610e2}{check\+\_\+}} (const \mbox{\hyperlink{struct_toonz_ext_1_1_context_status}{Context\+Status}} $\ast$)=0
\item 
virtual bool \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a9ed4c2e1089ad53f7cd5699d3fde0061}{find\+Extremes\+\_\+}} (const \mbox{\hyperlink{struct_toonz_ext_1_1_context_status}{Context\+Status}} $\ast$, \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{Interval}} \&)=0
\item 
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a597b1edef438bbc0ffab3dbbea9c007f}\label{class_toonz_ext_1_1_stroke_deformation_impl_a597b1edef438bbc0ffab3dbbea9c007f}} 
virtual double {\bfseries find\+Action\+Length} ()=0
\end{DoxyCompactItemize}
\doxysubsection*{Static Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$\& \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a769fec4c2f3c315fb56ca72ddb359ff4}{get\+Last\+Selected\+Stroke}} ()
\item 
static void \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a7002c77db287f278503cf6442a392d89}{set\+Last\+Selected\+Stroke}} (\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$)
\item 
static int \& \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a817fb05f5126d6db8bc79aa2c0331181}{get\+Last\+Selected\+Degree}} ()
\item 
static void \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_ad995b7dceda8ff35689949e58ccb706c}{set\+Last\+Selected\+Degree}} (int degree)
\item 
static \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} \& \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_ae478a59371929a853435b711346d5fc6}{get\+Spires\+List}} ()
\item 
static \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} \& \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a7403884048c39e233a278de7cc14ec49}{get\+Straights\+List}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_adc0b202271dfdd27ad5a70e9f1069a97}{stroke2manipulate\+\_\+}}
\item 
\mbox{\hyperlink{class_toonz_ext_1_1_stroke_parametric_deformer}{Toonz\+Ext\+::\+Stroke\+Parametric\+Deformer}} $\ast$ \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_affe4cde0d33aa777fdab4ba619c60eb8}{deformer\+\_\+}}
\item 
int \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_afbe627bfce1f8e149f599bf4f8f42038}{shortcut\+Key\+\_\+}}
\item 
double \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a3856e08f807d2488c4cdf9ac5de78105}{old\+\_\+w0\+\_\+}}
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_af69c1bde3a61ae72749aab0a6dcd7457}{old\+\_\+w0\+\_\+pos\+\_\+}}
\item 
std\+::vector$<$ \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ $>$ \mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a97b3884d559f6a247d35d1fa97d8cc00}{strokes\+\_\+}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a9eef861db098d607fcda01ca6fa81218}\label{class_toonz_ext_1_1_stroke_deformation_impl_a9eef861db098d607fcda01ca6fa81218}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!StrokeDeformationImpl@{StrokeDeformationImpl}}
\index{StrokeDeformationImpl@{StrokeDeformationImpl}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{StrokeDeformationImpl()}{StrokeDeformationImpl()}}
{\footnotesize\ttfamily Stroke\+Deformation\+Impl\+::\+Stroke\+Deformation\+Impl (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00261                                              \{}
\DoxyCodeLine{00262   shortcutKey\_ = ContextStatus::NONE;}
\DoxyCodeLine{00263   cursorId\_    = -\/1;}
\DoxyCodeLine{00264   this-\/>\mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a1c16c95fa8d78156bbff65a8583acc19}{reset}}();}
\DoxyCodeLine{00265 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a81bb71c77e3088940476be6333d0ac98}\label{class_toonz_ext_1_1_stroke_deformation_impl_a81bb71c77e3088940476be6333d0ac98}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!````~StrokeDeformationImpl@{$\sim$StrokeDeformationImpl}}
\index{````~StrokeDeformationImpl@{$\sim$StrokeDeformationImpl}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{$\sim$StrokeDeformationImpl()}{~StrokeDeformationImpl()}}
{\footnotesize\ttfamily Stroke\+Deformation\+Impl\+::$\sim$\+Stroke\+Deformation\+Impl (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00269                                               \{}
\DoxyCodeLine{00270   clearPointerContainer(strokes\_);}
\DoxyCodeLine{00271   \textcolor{keyword}{delete} potential\_;}
\DoxyCodeLine{00272   potential\_ = 0;}
\DoxyCodeLine{00273   \textcolor{keyword}{delete} deformer\_;}
\DoxyCodeLine{00274   deformer\_ = 0;}
\DoxyCodeLine{00275   \textcolor{keyword}{delete} copyOfLastSelectedStroke\_;}
\DoxyCodeLine{00276   copyOfLastSelectedStroke\_ = 0;}
\DoxyCodeLine{00277 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a5c94a88b8d99d53dd2bf93491e369886}\label{class_toonz_ext_1_1_stroke_deformation_impl_a5c94a88b8d99d53dd2bf93491e369886}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!activate\_impl@{activate\_impl}}
\index{activate\_impl@{activate\_impl}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{activate\_impl()}{activate\_impl()}}
{\footnotesize\ttfamily bool Stroke\+Deformation\+Impl\+::activate\+\_\+impl (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_toonz_ext_1_1_context_status}{Context\+Status}} $\ast$}]{status }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Wrapper for activate. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00281                                                                      \{}
\DoxyCodeLine{00282   assert(status \&\& \textcolor{stringliteral}{"{}Not status available"{}});}
\DoxyCodeLine{00283 }
\DoxyCodeLine{00284   \textcolor{keywordflow}{if} (!status || !this-\/>init(status)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00285 }
\DoxyCodeLine{00286   \textcolor{keywordtype}{double} w = status-\/>w\_;}
\DoxyCodeLine{00287 }
\DoxyCodeLine{00288   \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{ToonzExt::Interval}} extremes = this-\/>getExtremes();}
\DoxyCodeLine{00289 }
\DoxyCodeLine{00290   \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke2transform;}
\DoxyCodeLine{00291 }
\DoxyCodeLine{00292   \textcolor{keywordflow}{if} (!this-\/>computeStroke2Transform(status, stroke2transform, w, extremes))}
\DoxyCodeLine{00293     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00294 }
\DoxyCodeLine{00295   \textcolor{comment}{// to avoid strange behaviour in limit's value}}
\DoxyCodeLine{00296   \textcolor{keywordflow}{if} (areAlmostEqual(extremes.first, w)) w = extremes.first;}
\DoxyCodeLine{00297 }
\DoxyCodeLine{00298   \textcolor{keywordflow}{if} (areAlmostEqual(extremes.second, w)) w = extremes.second;}
\DoxyCodeLine{00299 }
\DoxyCodeLine{00300   assert(extremes.first <= w \&\& w <= extremes.second);}
\DoxyCodeLine{00301 }
\DoxyCodeLine{00302   \textcolor{keywordflow}{if} (extremes.first > w || w > extremes.second) \{}
\DoxyCodeLine{00303     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00304   \}}
\DoxyCodeLine{00305 }
\DoxyCodeLine{00306   std::vector<double> splitParameter;}
\DoxyCodeLine{00307   splitParameter.push\_back(extremes.first);}
\DoxyCodeLine{00308   splitParameter.push\_back(extremes.second);}
\DoxyCodeLine{00309 }
\DoxyCodeLine{00310   assert(strokes\_.empty());}
\DoxyCodeLine{00311   \textcolor{keywordflow}{if} (!strokes\_.empty()) clearPointerContainer(strokes\_);}
\DoxyCodeLine{00312   splitStroke(*stroke2transform, splitParameter, strokes\_);}
\DoxyCodeLine{00313 }
\DoxyCodeLine{00314   assert(strokes\_.size() == 3);}
\DoxyCodeLine{00315 }
\DoxyCodeLine{00316   \textcolor{comment}{// I don't know how to manage properly this case}}
\DoxyCodeLine{00317   \textcolor{keywordflow}{if} (strokes\_.size() != 3) \{}
\DoxyCodeLine{00318     clearPointerContainer(strokes\_);}
\DoxyCodeLine{00319     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00320   \}}
\DoxyCodeLine{00321 }
\DoxyCodeLine{00322   \textcolor{comment}{// stroke to change}}
\DoxyCodeLine{00323   stroke2manipulate\_ = strokes\_[1];}
\DoxyCodeLine{00324   assert(stroke2manipulate\_ \&\& \textcolor{stringliteral}{"{} Not valid reference to stroke to move!!!"{}});}
\DoxyCodeLine{00325   \textcolor{keywordflow}{if} (!stroke2manipulate\_) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00326 }
\DoxyCodeLine{00327   \textcolor{comment}{// remove empty stroke}}
\DoxyCodeLine{00328   \{}
\DoxyCodeLine{00329     \mbox{\hyperlink{class_t_stroke}{TStroke}} *tmp\_stroke = strokes\_[2];}
\DoxyCodeLine{00330     \textcolor{keywordflow}{if} (isAlmostZero(tmp\_stroke-\/>\mbox{\hyperlink{class_t_stroke_a079a513cb8a60d9a759b4f0c8211eab4}{getLength}}())) \{}
\DoxyCodeLine{00331       std::vector<TStroke *>::iterator it = strokes\_.begin();}
\DoxyCodeLine{00332       std::advance(it, 2);}
\DoxyCodeLine{00333       strokes\_.erase(it);}
\DoxyCodeLine{00334       \textcolor{keyword}{delete} tmp\_stroke;}
\DoxyCodeLine{00335     \}}
\DoxyCodeLine{00336     tmp\_stroke = strokes\_[0];}
\DoxyCodeLine{00337     \textcolor{keywordflow}{if} (isAlmostZero(tmp\_stroke-\/>\mbox{\hyperlink{class_t_stroke_a079a513cb8a60d9a759b4f0c8211eab4}{getLength}}())) \{}
\DoxyCodeLine{00338       strokes\_.erase(strokes\_.begin());}
\DoxyCodeLine{00339       \textcolor{keyword}{delete} tmp\_stroke;}
\DoxyCodeLine{00340     \}}
\DoxyCodeLine{00341     \textcolor{comment}{// little movement of control points to have not empty}}
\DoxyCodeLine{00342     \textcolor{comment}{//  length}}
\DoxyCodeLine{00343     \textcolor{keywordflow}{if} (isAlmostZero(stroke2manipulate\_-\/>\mbox{\hyperlink{class_t_stroke_a079a513cb8a60d9a759b4f0c8211eab4}{getLength}}())) \{}
\DoxyCodeLine{00344       \textcolor{keywordtype}{int} count = stroke2manipulate\_-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}() -\/ 1;}
\DoxyCodeLine{00345       assert(count > 0);}
\DoxyCodeLine{00346 }
\DoxyCodeLine{00347       \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} pnt0  = stroke2manipulate\_-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(0),}
\DoxyCodeLine{00348                   pntn  = stroke2manipulate\_-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(count),}
\DoxyCodeLine{00349                   delta = \mbox{\hyperlink{class_t_thick_point}{TThickPoint}}(2.0 * TConsts::epsilon,}
\DoxyCodeLine{00350                                       -\/2.0 * TConsts::epsilon, 0.0);}
\DoxyCodeLine{00351 }
\DoxyCodeLine{00352       stroke2manipulate\_-\/>\mbox{\hyperlink{class_t_stroke_abc4f174af1e2712c400ae63e005aac18}{setControlPoint}}(0, pnt0 -\/ delta);}
\DoxyCodeLine{00353       stroke2manipulate\_-\/>\mbox{\hyperlink{class_t_stroke_abc4f174af1e2712c400ae63e005aac18}{setControlPoint}}(count, pntn + delta);}
\DoxyCodeLine{00354     \}}
\DoxyCodeLine{00355   \}}
\DoxyCodeLine{00356 }
\DoxyCodeLine{00357   \textcolor{comment}{// simple check for empty chunk}}
\DoxyCodeLine{00358   \textcolor{keywordtype}{int} cp\_count = stroke2manipulate\_-\/>\mbox{\hyperlink{class_t_stroke_a81b63663a798724333d8de692fdbcac0}{getChunkCount}}();}
\DoxyCodeLine{00359   \textcolor{keyword}{const} \mbox{\hyperlink{class_t_thick_quadratic}{TThickQuadratic}} *tq;}
\DoxyCodeLine{00360   \textcolor{keywordtype}{bool} haveEmpty = \textcolor{keyword}{false};}
\DoxyCodeLine{00361   \textcolor{keywordflow}{while} (-\/-\/cp\_count >= 0) \{}
\DoxyCodeLine{00362     tq = stroke2manipulate\_-\/>\mbox{\hyperlink{class_t_stroke_a06b18ffed330411aad73ef1748a3f263}{getChunk}}(cp\_count);}
\DoxyCodeLine{00363     \textcolor{comment}{//    assert( tq-\/>getLength() != 0.0 );}}
\DoxyCodeLine{00364     \textcolor{keywordflow}{if} (tq-\/>\mbox{\hyperlink{class_t_quadratic_ac1db69c69cbf52b1becf396cc8006ca1}{getLength}}() == 0.0) haveEmpty = \textcolor{keyword}{true};}
\DoxyCodeLine{00365   \}}
\DoxyCodeLine{00366 }
\DoxyCodeLine{00367   \textcolor{keywordflow}{if} (haveEmpty) \{}
\DoxyCodeLine{00368     \textcolor{keyword}{const} \textcolor{keywordtype}{double} reductionFactor =}
\DoxyCodeLine{00369         computeReductionFactor(getImplStatus()-\/>pixelSize\_, 1.0);}
\DoxyCodeLine{00370     stroke2manipulate\_-\/>\mbox{\hyperlink{class_t_stroke_a81a280d6be49406cf03d65530b9d9ce6}{reduceControlPoints}}(reductionFactor);}
\DoxyCodeLine{00371   \}}
\DoxyCodeLine{00372 }
\DoxyCodeLine{00373   \mbox{\hyperlink{class_t_point_t}{TPointD}} pntOnStroke = stroke2transform-\/>\mbox{\hyperlink{class_t_stroke_ace861e064b925c5d41a6d7381ae6ada5}{getPoint}}(w);}
\DoxyCodeLine{00374 }
\DoxyCodeLine{00375   \textcolor{comment}{// parameter need to be recomputed to match}}
\DoxyCodeLine{00376   \textcolor{comment}{// with new stroke}}
\DoxyCodeLine{00377   w = stroke2manipulate\_-\/>\mbox{\hyperlink{class_t_stroke_a38326dc317f9ff3828940996f41376a6}{getW}}(pntOnStroke);}
\DoxyCodeLine{00378 }
\DoxyCodeLine{00379   \textcolor{comment}{//  prevStyle\_ = stroke2transform-\/>getStyle();}}
\DoxyCodeLine{00380   \textcolor{comment}{//  set a style for error}}
\DoxyCodeLine{00381   \textcolor{comment}{//  stroke2manipulate\_-\/>setStyle( 4 );}}
\DoxyCodeLine{00382 }
\DoxyCodeLine{00383   \textcolor{comment}{// in this deformer all stroke need to be moved}}
\DoxyCodeLine{00384   \textcolor{keywordtype}{double} lengthOfAction = this-\/>findActionLength();}
\DoxyCodeLine{00385 }
\DoxyCodeLine{00386   \textcolor{keywordtype}{bool} exception = \textcolor{keyword}{false};}
\DoxyCodeLine{00387 }
\DoxyCodeLine{00388   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00389     \textcolor{comment}{// create a new stroke deformer}}
\DoxyCodeLine{00390     \textcolor{keyword}{delete} deformer\_;}
\DoxyCodeLine{00391     deformer\_ = \textcolor{keyword}{new} \mbox{\hyperlink{class_toonz_ext_1_1_stroke_parametric_deformer}{StrokeParametricDeformer}}(}
\DoxyCodeLine{00392         lengthOfAction, w, stroke2manipulate\_, potential\_-\/>\mbox{\hyperlink{class_toonz_ext_1_1_potential_aa92f2894b3fb88be47d742924928642f}{clone}}());}
\DoxyCodeLine{00393   \} \textcolor{keywordflow}{catch} (std::invalid\_argument \&) \{}
\DoxyCodeLine{00394     exception = \textcolor{keyword}{true};}
\DoxyCodeLine{00395     assert(!\textcolor{stringliteral}{"{}Invalid argument"{}});}
\DoxyCodeLine{00396   \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00397     exception = \textcolor{keyword}{true};}
\DoxyCodeLine{00398   \}}
\DoxyCodeLine{00399 }
\DoxyCodeLine{00400   assert(deformer\_ \&\& \textcolor{stringliteral}{"{}Deformer is not available"{}});}
\DoxyCodeLine{00401 }
\DoxyCodeLine{00402   \textcolor{keywordflow}{if} (exception) \{}
\DoxyCodeLine{00403     deformer\_ = 0;}
\DoxyCodeLine{00404     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00405   \}}
\DoxyCodeLine{00406 }
\DoxyCodeLine{00407   assert(getImplStatus() != 0 \&\& \textcolor{stringliteral}{"{}ContextStatus is null???"{}});}
\DoxyCodeLine{00408 }
\DoxyCodeLine{00409   \textcolor{keywordflow}{if} (!getImplStatus()) \{}
\DoxyCodeLine{00410     \textcolor{keyword}{delete} deformer\_;}
\DoxyCodeLine{00411     this-\/>\mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a1c16c95fa8d78156bbff65a8583acc19}{reset}}();}
\DoxyCodeLine{00412     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00413   \}}
\DoxyCodeLine{00414   \textcolor{comment}{// change the threshold value of increser,}}
\DoxyCodeLine{00415   \textcolor{comment}{//  if value is greater than diff add control points}}
\DoxyCodeLine{00416   deformer\_-\/>\mbox{\hyperlink{class_toonz_ext_1_1_stroke_parametric_deformer_aca1ea6023e3e64af5667ad6a8d31266a}{setDiff}}(getImplStatus()-\/>deformerSensitivity\_);}
\DoxyCodeLine{00417 }
\DoxyCodeLine{00418   \textcolor{comment}{// just to be sure to have a control point where}}
\DoxyCodeLine{00419   \textcolor{comment}{// stroke is selected}}
\DoxyCodeLine{00420   stroke2manipulate\_-\/>\mbox{\hyperlink{class_t_stroke_ac8dc8d662e1f0fad77ca0ffce4378f10}{insertControlPoints}}(w);}
\DoxyCodeLine{00421 }
\DoxyCodeLine{00422   \textcolor{comment}{//  two different case:}}
\DoxyCodeLine{00423   \textcolor{comment}{//  (1) point at w=0 is not in stroke to transform}}
\DoxyCodeLine{00424   \textcolor{comment}{//  (2) point at w=0 is in stroke to transform}}
\DoxyCodeLine{00425   \textcolor{comment}{//  in case (2) it is mandatory to retrieve the}}
\DoxyCodeLine{00426   \textcolor{comment}{//  parameter where stroke2transform is equal to}}
\DoxyCodeLine{00427   \textcolor{comment}{//  w=0 and store it.}}
\DoxyCodeLine{00428   \textcolor{comment}{//  old\_w0\_pos\_ will be used in deactivate method}}
\DoxyCodeLine{00429   \textcolor{keywordflow}{if} (old\_w0\_pos\_ != TConsts::napd) \{}
\DoxyCodeLine{00430     \textcolor{keywordtype}{double} w    = stroke2manipulate\_-\/>\mbox{\hyperlink{class_t_stroke_a38326dc317f9ff3828940996f41376a6}{getW}}(old\_w0\_pos\_);}
\DoxyCodeLine{00431     \mbox{\hyperlink{class_t_point_t}{TPointD}} pnt = stroke2manipulate\_-\/>\mbox{\hyperlink{class_t_stroke_ace861e064b925c5d41a6d7381ae6ada5}{getPoint}}(w);}
\DoxyCodeLine{00432 }
\DoxyCodeLine{00433     \textcolor{keywordflow}{if} (tdistance2(pnt, old\_w0\_pos\_) < sq(TConsts::epsilon)) \{}
\DoxyCodeLine{00434       \textcolor{comment}{// the this position can be modifyed during drag}}
\DoxyCodeLine{00435       old\_w0\_ = w;}
\DoxyCodeLine{00436     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00437       old\_w0\_ = -\/1;}
\DoxyCodeLine{00438   \}}
\DoxyCodeLine{00439 }
\DoxyCodeLine{00440   \textcolor{keywordtype}{bool} test = increaseControlPoints(*stroke2manipulate\_, *deformer\_,}
\DoxyCodeLine{00441                                     getImplStatus()-\/>pixelSize\_);}
\DoxyCodeLine{00442   \textcolor{comment}{/*}}
\DoxyCodeLine{00443 \textcolor{comment}{// New Increaser behaviour}}
\DoxyCodeLine{00444 \textcolor{comment}{deformer\_-\/>setMouseMove(0,100);}}
\DoxyCodeLine{00445 \textcolor{comment}{extremes\_ = Toonz::increase\_cp (stroke2manipulate\_,}}
\DoxyCodeLine{00446 \textcolor{comment}{deformer\_);}}
\DoxyCodeLine{00447 \textcolor{comment}{//*/}}
\DoxyCodeLine{00448   \textcolor{keywordflow}{if} (!test) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00449 }
\DoxyCodeLine{00450   stroke2manipulate\_-\/>\mbox{\hyperlink{class_t_stroke_a6f250bc1c05e22775c016b3932d6f9a9}{disableComputeOfCaches}}();}
\DoxyCodeLine{00451   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00452 \}}

\end{DoxyCode}


References \mbox{\hyperlink{class_toonz_ext_1_1_potential_aa92f2894b3fb88be47d742924928642f}{Toonz\+Ext\+::\+Potential\+::clone()}}, \mbox{\hyperlink{l01886}{TStroke\+::disable\+Compute\+Of\+Caches()}}, \mbox{\hyperlink{l01855}{TStroke\+::get\+Chunk()}}, \mbox{\hyperlink{l01845}{TStroke\+::get\+Chunk\+Count()}}, \mbox{\hyperlink{l01352}{TStroke\+::get\+Control\+Point()}}, \mbox{\hyperlink{l01849}{TStroke\+::get\+Control\+Point\+Count()}}, \mbox{\hyperlink{l00208}{TQuadratic\+::get\+Length()}}, \mbox{\hyperlink{l01591}{TStroke\+::get\+Length()}}, \mbox{\hyperlink{l00236}{TStroke\+::get\+Point()}}, \mbox{\hyperlink{l02029}{TStroke\+::get\+W()}}, \mbox{\hyperlink{l01679}{TStroke\+::insert\+Control\+Points()}}, \mbox{\hyperlink{l01806}{TStroke\+::reduce\+Control\+Points()}}, \mbox{\hyperlink{l00532}{reset()}}, \mbox{\hyperlink{l01427}{TStroke\+::set\+Control\+Point()}}, and \mbox{\hyperlink{l00098}{Toonz\+Ext\+::\+Stroke\+Parametric\+Deformer\+::set\+Diff()}}.



Referenced by \mbox{\hyperlink{l00056}{Toonz\+Ext\+::\+Stroke\+Deformation\+::activate()}}.

\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a07c405f48ad495a95ab0f95f06ee365e}\label{class_toonz_ext_1_1_stroke_deformation_impl_a07c405f48ad495a95ab0f95f06ee365e}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!check@{check}}
\index{check@{check}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{check()}{check()}}
{\footnotesize\ttfamily bool Stroke\+Deformation\+Impl\+::check (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_toonz_ext_1_1_context_status}{Context\+Status}} $\ast$}]{status }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00573                                                              \{}
\DoxyCodeLine{00574   \textcolor{keywordflow}{if} (!status || !this-\/>init(status)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00575 }
\DoxyCodeLine{00576   \textcolor{keywordflow}{return} this-\/>\mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_afa80ae95b9c30163453dc08fdc9610e2}{check\_}}(status);}
\DoxyCodeLine{00577 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_afa80ae95b9c30163453dc08fdc9610e2}\label{class_toonz_ext_1_1_stroke_deformation_impl_afa80ae95b9c30163453dc08fdc9610e2}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!check\_@{check\_}}
\index{check\_@{check\_}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{check\_()}{check\_()}}
{\footnotesize\ttfamily virtual bool Toonz\+Ext\+::\+Stroke\+Deformation\+Impl\+::check\+\_\+ (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_toonz_ext_1_1_context_status}{Context\+Status}} $\ast$}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [pure virtual]}}

Is this the correct deformation? 

Implemented in \mbox{\hyperlink{class_toonz_ext_1_1_corner_deformation_aa1a0a340c82cce510483a47bc039486b}{Toonz\+Ext\+::\+Corner\+Deformation}}, \mbox{\hyperlink{class_toonz_ext_1_1_smooth_deformation_a79810324bae66a2b0b87819ffb3d5f9c}{Toonz\+Ext\+::\+Smooth\+Deformation}}, and \mbox{\hyperlink{class_toonz_ext_1_1_straight_corner_deformation_a39e147e439485595fc81b921053d0887}{Toonz\+Ext\+::\+Straight\+Corner\+Deformation}}.

\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_aeb78b48764d4d31cc39491928a603a79}\label{class_toonz_ext_1_1_stroke_deformation_impl_aeb78b48764d4d31cc39491928a603a79}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!deactivate\_impl@{deactivate\_impl}}
\index{deactivate\_impl@{deactivate\_impl}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{deactivate\_impl()}{deactivate\_impl()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ Stroke\+Deformation\+Impl\+::deactivate\+\_\+impl (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Reduce control points and change stroke. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00470                                                 \{}
\DoxyCodeLine{00471   \textcolor{keywordflow}{if} (!stroke2manipulate\_ || !getImplStatus()) \{}
\DoxyCodeLine{00472     this-\/>\mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a1c16c95fa8d78156bbff65a8583acc19}{reset}}();}
\DoxyCodeLine{00473     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00474   \}}
\DoxyCodeLine{00475 }
\DoxyCodeLine{00476   \textcolor{comment}{// retrieve the point}}
\DoxyCodeLine{00477   \textcolor{keywordflow}{if} (old\_w0\_ != -\/1) old\_w0\_pos\_ = stroke2manipulate\_-\/>\mbox{\hyperlink{class_t_stroke_ace861e064b925c5d41a6d7381ae6ada5}{getPoint}}(old\_w0\_);}
\DoxyCodeLine{00478 }
\DoxyCodeLine{00479   \textcolor{keyword}{const} \textcolor{keywordtype}{double} reductionFactor =}
\DoxyCodeLine{00480       computeReductionFactor(getImplStatus()-\/>pixelSize\_, 3.0);}
\DoxyCodeLine{00481 }
\DoxyCodeLine{00482   \textcolor{comment}{// stroke2manipulate\_-\/>enableComputeOfCaches ();}}
\DoxyCodeLine{00483   \textcolor{comment}{// stroke2manipulate\_-\/>reduceControlPoints (reductionFactor);}}
\DoxyCodeLine{00484   \textcolor{keyword}{const} \textcolor{keywordtype}{int} size = stroke2manipulate\_-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}();}
\DoxyCodeLine{00485   std::vector<TThickPoint> pnt(size);}
\DoxyCodeLine{00486   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < size; ++i)}
\DoxyCodeLine{00487     pnt[i]   = stroke2manipulate\_-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(i);}
\DoxyCodeLine{00488 }
\DoxyCodeLine{00489   std::vector<TStroke *>::iterator it =}
\DoxyCodeLine{00490       std::find(strokes\_.begin(), strokes\_.end(), stroke2manipulate\_);}
\DoxyCodeLine{00491   assert(it != strokes\_.end());}
\DoxyCodeLine{00492 }
\DoxyCodeLine{00493   \textcolor{keywordtype}{int} pos            = std::distance(strokes\_.begin(), it);}
\DoxyCodeLine{00494   stroke2manipulate\_ = 0;}
\DoxyCodeLine{00495   \textcolor{keyword}{delete} strokes\_[pos];}
\DoxyCodeLine{00496 }
\DoxyCodeLine{00497   \mbox{\hyperlink{class_t_stroke}{TStroke}} *tmpStroke = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}(pnt);}
\DoxyCodeLine{00498   assert((tmpStroke != 0) \&\& \textcolor{stringliteral}{"{}Not valid stroke!"{}});}
\DoxyCodeLine{00499   strokes\_[pos] = tmpStroke;}
\DoxyCodeLine{00500   strokes\_[pos]-\/>reduceControlPoints(reductionFactor);}
\DoxyCodeLine{00501 }
\DoxyCodeLine{00502   \textcolor{comment}{// strokes\_[pos] = TStroke::interpolate(pnt,}}
\DoxyCodeLine{00503   \textcolor{comment}{//                                   reductionFactor,}}
\DoxyCodeLine{00504   \textcolor{comment}{//                                   false);}}
\DoxyCodeLine{00505 }
\DoxyCodeLine{00506   \mbox{\hyperlink{class_t_stroke}{TStroke}} *ref = Toonz::merge(strokes\_);}
\DoxyCodeLine{00507 }
\DoxyCodeLine{00508   \mbox{\hyperlink{namespace_toonz_ext_a184441a805e5441cff35f15b937fa451}{ToonzExt::cloneStrokeStatus}}(getImplStatus()-\/>stroke2change\_, ref);}
\DoxyCodeLine{00509 }
\DoxyCodeLine{00510   \textcolor{keywordflow}{if} (old\_w0\_pos\_ != TConsts::napd) \{}
\DoxyCodeLine{00511     \textcolor{comment}{// restore (if necessary) the initial position of}}
\DoxyCodeLine{00512     \textcolor{comment}{// a stroke}}
\DoxyCodeLine{00513     \mbox{\hyperlink{class_t_stroke}{TStroke}} *rotated = rotateControlPointAtPoint(ref, old\_w0\_pos\_);}
\DoxyCodeLine{00514     \textcolor{keywordflow}{if} (rotated) \{}
\DoxyCodeLine{00515       \textcolor{keyword}{delete} ref;}
\DoxyCodeLine{00516       ref = rotated;}
\DoxyCodeLine{00517       \textcolor{keywordflow}{if} (getImplStatus())}
\DoxyCodeLine{00518         \mbox{\hyperlink{namespace_toonz_ext_a184441a805e5441cff35f15b937fa451}{ToonzExt::cloneStrokeStatus}}(getImplStatus()-\/>stroke2change\_, ref);}
\DoxyCodeLine{00519       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00520         \textcolor{keyword}{delete} ref;}
\DoxyCodeLine{00521         ref = 0;}
\DoxyCodeLine{00522       \}}
\DoxyCodeLine{00523     \}}
\DoxyCodeLine{00524   \}}
\DoxyCodeLine{00525 }
\DoxyCodeLine{00526   this-\/>\mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a1c16c95fa8d78156bbff65a8583acc19}{reset}}();}
\DoxyCodeLine{00527   \textcolor{keywordflow}{return} ref;}
\DoxyCodeLine{00528 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l01117}{Toonz\+Ext\+::clone\+Stroke\+Status()}}, \mbox{\hyperlink{l01352}{TStroke\+::get\+Control\+Point()}}, \mbox{\hyperlink{l01849}{TStroke\+::get\+Control\+Point\+Count()}}, \mbox{\hyperlink{l00236}{TStroke\+::get\+Point()}}, and \mbox{\hyperlink{l00532}{reset()}}.



Referenced by \mbox{\hyperlink{l00109}{Toonz\+Ext\+::\+Stroke\+Deformation\+::deactivate()}}.

\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_af5328002d2be2c15cdee226795163436}\label{class_toonz_ext_1_1_stroke_deformation_impl_af5328002d2be2c15cdee226795163436}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!draw@{draw}}
\index{draw@{draw}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Stroke\+Deformation\+Impl\+::draw (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_toonz_ext_1_1_designer}{Designer}} $\ast$}]{designer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Apply a designer on current deformation. 

Reimplemented in \mbox{\hyperlink{class_toonz_ext_1_1_corner_deformation_a3b060ba9dcadf5f5e445b6806a6bdf65}{Toonz\+Ext\+::\+Corner\+Deformation}}, \mbox{\hyperlink{class_toonz_ext_1_1_smooth_deformation_aea2ff4e97dab4bcf5287b7d2371faae5}{Toonz\+Ext\+::\+Smooth\+Deformation}}, and \mbox{\hyperlink{class_toonz_ext_1_1_straight_corner_deformation_a5685ef5046f9ba102d467b169130fbe5}{Toonz\+Ext\+::\+Straight\+Corner\+Deformation}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00562 \{\}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00139}{Toonz\+Ext\+::\+Stroke\+Deformation\+::draw()}}, \mbox{\hyperlink{l00045}{Toonz\+Ext\+::\+Corner\+Deformation\+::draw()}}, \mbox{\hyperlink{l00044}{Toonz\+Ext\+::\+Smooth\+Deformation\+::draw()}}, and \mbox{\hyperlink{l00062}{Toonz\+Ext\+::\+Straight\+Corner\+Deformation\+::draw()}}.

\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a9ed4c2e1089ad53f7cd5699d3fde0061}\label{class_toonz_ext_1_1_stroke_deformation_impl_a9ed4c2e1089ad53f7cd5699d3fde0061}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!findExtremes\_@{findExtremes\_}}
\index{findExtremes\_@{findExtremes\_}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{findExtremes\_()}{findExtremes\_()}}
{\footnotesize\ttfamily virtual bool Toonz\+Ext\+::\+Stroke\+Deformation\+Impl\+::find\+Extremes\+\_\+ (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_toonz_ext_1_1_context_status}{Context\+Status}} $\ast$}]{,  }\item[{\mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{Interval}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [pure virtual]}}

Retrieve the nearest extremes to point selected. 

Implemented in \mbox{\hyperlink{class_toonz_ext_1_1_corner_deformation_a33702122ce08d1c190e25a5d479d9fd3}{Toonz\+Ext\+::\+Corner\+Deformation}}, \mbox{\hyperlink{class_toonz_ext_1_1_smooth_deformation_a16f7ac0c1d38aad1e569e2e3f1d2a470}{Toonz\+Ext\+::\+Smooth\+Deformation}}, and \mbox{\hyperlink{class_toonz_ext_1_1_straight_corner_deformation_adce0194f64726956b4472c4f35254f2c}{Toonz\+Ext\+::\+Straight\+Corner\+Deformation}}.

\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a675f4acf33681cebbfe6c08752456c6c}\label{class_toonz_ext_1_1_stroke_deformation_impl_a675f4acf33681cebbfe6c08752456c6c}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!getCopiedStroke@{getCopiedStroke}}
\index{getCopiedStroke@{getCopiedStroke}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{getCopiedStroke()}{getCopiedStroke()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ Toonz\+Ext\+::\+Stroke\+Deformation\+Impl\+::get\+Copied\+Stroke (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00098 \{ \textcolor{keywordflow}{return} this-\/>getStrokeSelected(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a0af0e2162f43b294463f63be988cc5bb}\label{class_toonz_ext_1_1_stroke_deformation_impl_a0af0e2162f43b294463f63be988cc5bb}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!getCursorId@{getCursorId}}
\index{getCursorId@{getCursorId}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{getCursorId()}{getCursorId()}}
{\footnotesize\ttfamily int Toonz\+Ext\+::\+Stroke\+Deformation\+Impl\+::get\+Cursor\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00137 \{ \textcolor{keywordflow}{return} cursorId\_; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a0987e33aff9b75eafa132762afde52e3}\label{class_toonz_ext_1_1_stroke_deformation_impl_a0987e33aff9b75eafa132762afde52e3}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!getExtremes@{getExtremes}}
\index{getExtremes@{getExtremes}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{getExtremes()}{getExtremes()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{Toonz\+Ext\+::\+Interval}} Stroke\+Deformation\+Impl\+::get\+Extremes (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00585                                                     \{}
\DoxyCodeLine{00586   \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{ToonzExt::Interval}} extremes = \mbox{\hyperlink{namespace_toonz_ext_af0f90ec10aea6fde591103d3611b638b}{ToonzExt::Interval}}(-\/1.0, -\/1.0);}
\DoxyCodeLine{00587 }
\DoxyCodeLine{00588   \textcolor{keywordflow}{if} (!getImplStatus()) \textcolor{keywordflow}{return} extremes;}
\DoxyCodeLine{00589 }
\DoxyCodeLine{00590   \textcolor{comment}{// if it is manual}}
\DoxyCodeLine{00591   \textcolor{keywordflow}{if} (getImplStatus()-\/>isManual\_ == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{00592     findExtremesFromActionLength(getImplStatus()-\/>lengthOfAction\_,}
\DoxyCodeLine{00593                                  getImplStatus()-\/>stroke2change\_,}
\DoxyCodeLine{00594                                  getImplStatus()-\/>w\_, extremes);}
\DoxyCodeLine{00595   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00596     \textcolor{comment}{// if there are some special key down all will be managed in deformation}}
\DoxyCodeLine{00597     this-\/>\mbox{\hyperlink{class_toonz_ext_1_1_stroke_deformation_impl_a9ed4c2e1089ad53f7cd5699d3fde0061}{findExtremes\_}}(getImplStatus(), extremes);}
\DoxyCodeLine{00598   \}}
\DoxyCodeLine{00599 }
\DoxyCodeLine{00600   \textcolor{keywordflow}{return} extremes;}
\DoxyCodeLine{00601 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_ae54c7a3a6fa517e182cb6b3718c451e9}\label{class_toonz_ext_1_1_stroke_deformation_impl_ae54c7a3a6fa517e182cb6b3718c451e9}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!getImplStatus@{getImplStatus}}
\index{getImplStatus@{getImplStatus}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{getImplStatus()}{getImplStatus()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{struct_toonz_ext_1_1_context_status}{Context\+Status}} $\ast$\& Stroke\+Deformation\+Impl\+::get\+Impl\+Status (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00207                                                            \{}
\DoxyCodeLine{00208   \textcolor{comment}{// if multi threading this datas need to be serialized}}
\DoxyCodeLine{00209   \textcolor{comment}{// a ref to status}}
\DoxyCodeLine{00210   \textcolor{keyword}{static} \textcolor{keyword}{const} \mbox{\hyperlink{struct_toonz_ext_1_1_context_status}{ContextStatus}} *contextStatus\_instance;}
\DoxyCodeLine{00211   \textcolor{keywordflow}{return} contextStatus\_instance;}
\DoxyCodeLine{00212 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a817fb05f5126d6db8bc79aa2c0331181}\label{class_toonz_ext_1_1_stroke_deformation_impl_a817fb05f5126d6db8bc79aa2c0331181}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!getLastSelectedDegree@{getLastSelectedDegree}}
\index{getLastSelectedDegree@{getLastSelectedDegree}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{getLastSelectedDegree()}{getLastSelectedDegree()}}
{\footnotesize\ttfamily int \& Stroke\+Deformation\+Impl\+::get\+Last\+Selected\+Degree (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00234                                                   \{}
\DoxyCodeLine{00235   \textcolor{keyword}{static} \textcolor{keywordtype}{int} lastSelectedDegree\_instance;}
\DoxyCodeLine{00236   \textcolor{keywordflow}{return} lastSelectedDegree\_instance;}
\DoxyCodeLine{00237 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a769fec4c2f3c315fb56ca72ddb359ff4}\label{class_toonz_ext_1_1_stroke_deformation_impl_a769fec4c2f3c315fb56ca72ddb359ff4}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!getLastSelectedStroke@{getLastSelectedStroke}}
\index{getLastSelectedStroke@{getLastSelectedStroke}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{getLastSelectedStroke()}{getLastSelectedStroke()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$\& Stroke\+Deformation\+Impl\+::get\+Last\+Selected\+Stroke (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00216                                                        \{}
\DoxyCodeLine{00217   \textcolor{keyword}{static} \mbox{\hyperlink{class_t_stroke}{TStroke}} *lastSelectedStroke\_instance;}
\DoxyCodeLine{00218   \textcolor{keywordflow}{return} lastSelectedStroke\_instance;}
\DoxyCodeLine{00219 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a0a240e79b5f077379bf06114b07f8f04}\label{class_toonz_ext_1_1_stroke_deformation_impl_a0a240e79b5f077379bf06114b07f8f04}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!getPotential@{getPotential}}
\index{getPotential@{getPotential}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{getPotential()}{getPotential()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_toonz_ext_1_1_potential}{Toonz\+Ext\+::\+Potential}} $\ast$ Stroke\+Deformation\+Impl\+::get\+Potential (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00556                                                        \{}
\DoxyCodeLine{00557   \textcolor{keywordflow}{return} this-\/>potential\_;}
\DoxyCodeLine{00558 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_ac8ca69f28eb9171dffc413ae76cdfcfe}\label{class_toonz_ext_1_1_stroke_deformation_impl_ac8ca69f28eb9171dffc413ae76cdfcfe}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!getShortcutKey@{getShortcutKey}}
\index{getShortcutKey@{getShortcutKey}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{getShortcutKey()}{getShortcutKey()}}
{\footnotesize\ttfamily int Toonz\+Ext\+::\+Stroke\+Deformation\+Impl\+::get\+Shortcut\+Key (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00135 \{ \textcolor{keywordflow}{return} shortcutKey\_; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_ae478a59371929a853435b711346d5fc6}\label{class_toonz_ext_1_1_stroke_deformation_impl_ae478a59371929a853435b711346d5fc6}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!getSpiresList@{getSpiresList}}
\index{getSpiresList@{getSpiresList}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{getSpiresList()}{getSpiresList()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} \& Stroke\+Deformation\+Impl\+::get\+Spires\+List (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00247                                                         \{}
\DoxyCodeLine{00248   \textcolor{keyword}{static} \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{ToonzExt::Intervals}} listOfSpire\_instance;}
\DoxyCodeLine{00249   \textcolor{keywordflow}{return} listOfSpire\_instance;}
\DoxyCodeLine{00250 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a7403884048c39e233a278de7cc14ec49}\label{class_toonz_ext_1_1_stroke_deformation_impl_a7403884048c39e233a278de7cc14ec49}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!getStraightsList@{getStraightsList}}
\index{getStraightsList@{getStraightsList}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{getStraightsList()}{getStraightsList()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{Toonz\+Ext\+::\+Intervals}} \& Stroke\+Deformation\+Impl\+::get\+Straights\+List (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00254                                                            \{}
\DoxyCodeLine{00255   \textcolor{keyword}{static} \mbox{\hyperlink{namespace_toonz_ext_af0282c012222b6b15e80f8f02685a935}{ToonzExt::Intervals}} listOfStraight\_instance;}
\DoxyCodeLine{00256   \textcolor{keywordflow}{return} listOfStraight\_instance;}
\DoxyCodeLine{00257 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a1c304ce8ece13e800df1591440cd7e29}\label{class_toonz_ext_1_1_stroke_deformation_impl_a1c304ce8ece13e800df1591440cd7e29}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!getStrokeSelected@{getStrokeSelected}}
\index{getStrokeSelected@{getStrokeSelected}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{getStrokeSelected()}{getStrokeSelected()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ Toonz\+Ext\+::\+Stroke\+Deformation\+Impl\+::get\+Stroke\+Selected (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00093                                            \{}
\DoxyCodeLine{00094     \textcolor{keywordflow}{if} (getImplStatus()) \textcolor{keywordflow}{return} this-\/>getImplStatus()-\/>stroke2change\_;}
\DoxyCodeLine{00095     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00096   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a994938974c9ef05b33f5bb2d31741df3}\label{class_toonz_ext_1_1_stroke_deformation_impl_a994938974c9ef05b33f5bb2d31741df3}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!getTransformedStroke@{getTransformedStroke}}
\index{getTransformedStroke@{getTransformedStroke}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{getTransformedStroke()}{getTransformedStroke()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ Stroke\+Deformation\+Impl\+::get\+Transformed\+Stroke (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00550                                                      \{}
\DoxyCodeLine{00551   \textcolor{keywordflow}{return} this-\/>stroke2manipulate\_;}
\DoxyCodeLine{00552 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a475946043f5968545c0c47830f67690b}\label{class_toonz_ext_1_1_stroke_deformation_impl_a475946043f5968545c0c47830f67690b}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!oldW0@{oldW0}}
\index{oldW0@{oldW0}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{oldW0()}{oldW0()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} \& Stroke\+Deformation\+Impl\+::old\+W0 (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00581 \{ \textcolor{keywordflow}{return} old\_w0\_pos\_; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a1c16c95fa8d78156bbff65a8583acc19}\label{class_toonz_ext_1_1_stroke_deformation_impl_a1c16c95fa8d78156bbff65a8583acc19}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!reset@{reset}}
\index{reset@{reset}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily void Stroke\+Deformation\+Impl\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Restore last good status. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00532                                   \{}
\DoxyCodeLine{00533   old\_w0\_     = -\/1;}
\DoxyCodeLine{00534   old\_w0\_pos\_ = TConsts::napd;}
\DoxyCodeLine{00535 }
\DoxyCodeLine{00536   deformer\_       = 0;}
\DoxyCodeLine{00537   getImplStatus() = 0;}
\DoxyCodeLine{00538   this-\/>setLastSelectedDegree(-\/1);}
\DoxyCodeLine{00539   this-\/>setLastSelectedStroke(0);}
\DoxyCodeLine{00540   this-\/>getSpiresList().clear();}
\DoxyCodeLine{00541   this-\/>getStraightsList().clear();}
\DoxyCodeLine{00542 }
\DoxyCodeLine{00543   stroke2manipulate\_ = 0;}
\DoxyCodeLine{00544   clearPointerContainer(strokes\_);  \textcolor{comment}{// stroke2move is deleted here (it}}
\DoxyCodeLine{00545                                     \textcolor{comment}{// is in vector)}}
\DoxyCodeLine{00546 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00056}{Toonz\+Ext\+::\+Stroke\+Deformation\+::activate()}}, \mbox{\hyperlink{l00281}{activate\+\_\+impl()}}, \mbox{\hyperlink{l00109}{Toonz\+Ext\+::\+Stroke\+Deformation\+::deactivate()}}, \mbox{\hyperlink{l00470}{deactivate\+\_\+impl()}}, and \mbox{\hyperlink{l00088}{Toonz\+Ext\+::\+Stroke\+Deformation\+::update()}}.

\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a06f285dfe94c56c21ef9852158860dec}\label{class_toonz_ext_1_1_stroke_deformation_impl_a06f285dfe94c56c21ef9852158860dec}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!setCursorId@{setCursorId}}
\index{setCursorId@{setCursorId}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{setCursorId()}{setCursorId()}}
{\footnotesize\ttfamily void Toonz\+Ext\+::\+Stroke\+Deformation\+Impl\+::set\+Cursor\+Id (\begin{DoxyParamCaption}\item[{int}]{id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00138 \{ cursorId\_ = id; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_ad995b7dceda8ff35689949e58ccb706c}\label{class_toonz_ext_1_1_stroke_deformation_impl_ad995b7dceda8ff35689949e58ccb706c}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!setLastSelectedDegree@{setLastSelectedDegree}}
\index{setLastSelectedDegree@{setLastSelectedDegree}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{setLastSelectedDegree()}{setLastSelectedDegree()}}
{\footnotesize\ttfamily void Stroke\+Deformation\+Impl\+::set\+Last\+Selected\+Degree (\begin{DoxyParamCaption}\item[{int}]{degree }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00241                                                             \{}
\DoxyCodeLine{00242   getLastSelectedDegree() = degree;}
\DoxyCodeLine{00243 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a7002c77db287f278503cf6442a392d89}\label{class_toonz_ext_1_1_stroke_deformation_impl_a7002c77db287f278503cf6442a392d89}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!setLastSelectedStroke@{setLastSelectedStroke}}
\index{setLastSelectedStroke@{setLastSelectedStroke}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{setLastSelectedStroke()}{setLastSelectedStroke()}}
{\footnotesize\ttfamily void Stroke\+Deformation\+Impl\+::set\+Last\+Selected\+Stroke (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$}]{stroke }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00223                                                                  \{}
\DoxyCodeLine{00224   \mbox{\hyperlink{class_t_stroke}{TStroke}} *\&lastSelStroke = getLastSelectedStroke();}
\DoxyCodeLine{00225   lastSelStroke           = stroke;}
\DoxyCodeLine{00226   \textcolor{keywordflow}{if} (lastSelStroke) \{}
\DoxyCodeLine{00227     \textcolor{keyword}{delete} copyOfLastSelectedStroke\_;}
\DoxyCodeLine{00228     copyOfLastSelectedStroke\_ = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}(*lastSelStroke);}
\DoxyCodeLine{00229   \}}
\DoxyCodeLine{00230 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a71b1d78c6b87d3f814739defe3321f69}\label{class_toonz_ext_1_1_stroke_deformation_impl_a71b1d78c6b87d3f814739defe3321f69}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!setPotential@{setPotential}}
\index{setPotential@{setPotential}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{setPotential()}{setPotential()}}
{\footnotesize\ttfamily void Stroke\+Deformation\+Impl\+::set\+Potential (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_toonz_ext_1_1_potential}{Potential}} $\ast$}]{potential }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00566                                                              \{}
\DoxyCodeLine{00567   assert(potential);}
\DoxyCodeLine{00568   potential\_ = potential;}
\DoxyCodeLine{00569 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_ac7d9294184d96bbb4ea6ae07ad3df897}\label{class_toonz_ext_1_1_stroke_deformation_impl_ac7d9294184d96bbb4ea6ae07ad3df897}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!update\_impl@{update\_impl}}
\index{update\_impl@{update\_impl}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{update\_impl()}{update\_impl()}}
{\footnotesize\ttfamily void Stroke\+Deformation\+Impl\+::update\+\_\+impl (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{delta }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Modify stroke. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00456                                                             \{}
\DoxyCodeLine{00457   assert(stroke2manipulate\_ \&\& deformer\_ \&\&}
\DoxyCodeLine{00458          \textcolor{stringliteral}{"{}Stroke and Deformer are available"{}});}
\DoxyCodeLine{00459 }
\DoxyCodeLine{00460   \textcolor{keywordflow}{if} (!stroke2manipulate\_ || !deformer\_) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00461 }
\DoxyCodeLine{00462   \textcolor{comment}{// update delta in deformer}}
\DoxyCodeLine{00463   deformer\_-\/>\mbox{\hyperlink{class_toonz_ext_1_1_stroke_parametric_deformer_a0f263460e87c678515fe17b4d206d5f3}{setMouseMove}}(delta.x, delta.y);}
\DoxyCodeLine{00464 }
\DoxyCodeLine{00465   modifyControlPoints(*stroke2manipulate\_, *deformer\_);}
\DoxyCodeLine{00466 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00066}{Toonz\+Ext\+::\+Stroke\+Parametric\+Deformer\+::set\+Mouse\+Move()}}.



Referenced by \mbox{\hyperlink{l00088}{Toonz\+Ext\+::\+Stroke\+Deformation\+::update()}}.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_affe4cde0d33aa777fdab4ba619c60eb8}\label{class_toonz_ext_1_1_stroke_deformation_impl_affe4cde0d33aa777fdab4ba619c60eb8}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!deformer\_@{deformer\_}}
\index{deformer\_@{deformer\_}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{deformer\_}{deformer\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_toonz_ext_1_1_stroke_parametric_deformer}{Toonz\+Ext\+::\+Stroke\+Parametric\+Deformer}}$\ast$ Toonz\+Ext\+::\+Stroke\+Deformation\+Impl\+::deformer\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a3856e08f807d2488c4cdf9ac5de78105}\label{class_toonz_ext_1_1_stroke_deformation_impl_a3856e08f807d2488c4cdf9ac5de78105}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!old\_w0\_@{old\_w0\_}}
\index{old\_w0\_@{old\_w0\_}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{old\_w0\_}{old\_w0\_}}
{\footnotesize\ttfamily double Toonz\+Ext\+::\+Stroke\+Deformation\+Impl\+::old\+\_\+w0\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_af69c1bde3a61ae72749aab0a6dcd7457}\label{class_toonz_ext_1_1_stroke_deformation_impl_af69c1bde3a61ae72749aab0a6dcd7457}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!old\_w0\_pos\_@{old\_w0\_pos\_}}
\index{old\_w0\_pos\_@{old\_w0\_pos\_}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{old\_w0\_pos\_}{old\_w0\_pos\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} Toonz\+Ext\+::\+Stroke\+Deformation\+Impl\+::old\+\_\+w0\+\_\+pos\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_afbe627bfce1f8e149f599bf4f8f42038}\label{class_toonz_ext_1_1_stroke_deformation_impl_afbe627bfce1f8e149f599bf4f8f42038}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!shortcutKey\_@{shortcutKey\_}}
\index{shortcutKey\_@{shortcutKey\_}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{shortcutKey\_}{shortcutKey\_}}
{\footnotesize\ttfamily int Toonz\+Ext\+::\+Stroke\+Deformation\+Impl\+::shortcut\+Key\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_adc0b202271dfdd27ad5a70e9f1069a97}\label{class_toonz_ext_1_1_stroke_deformation_impl_adc0b202271dfdd27ad5a70e9f1069a97}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!stroke2manipulate\_@{stroke2manipulate\_}}
\index{stroke2manipulate\_@{stroke2manipulate\_}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{stroke2manipulate\_}{stroke2manipulate\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stroke}{TStroke}}$\ast$ Toonz\+Ext\+::\+Stroke\+Deformation\+Impl\+::stroke2manipulate\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_toonz_ext_1_1_stroke_deformation_impl_a97b3884d559f6a247d35d1fa97d8cc00}\label{class_toonz_ext_1_1_stroke_deformation_impl_a97b3884d559f6a247d35d1fa97d8cc00}} 
\index{ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}!strokes\_@{strokes\_}}
\index{strokes\_@{strokes\_}!ToonzExt::StrokeDeformationImpl@{ToonzExt::StrokeDeformationImpl}}
\doxysubsubsection{\texorpdfstring{strokes\_}{strokes\_}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$$>$ Toonz\+Ext\+::\+Stroke\+Deformation\+Impl\+::strokes\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/ext/Stroke\+Deformation\+Impl.\+h\item 
E\+:/opentoonz/toonz/sources/tnzext/Stroke\+Deformation\+Impl.\+cpp\end{DoxyCompactItemize}
