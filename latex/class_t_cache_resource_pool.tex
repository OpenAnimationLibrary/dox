\hypertarget{class_t_cache_resource_pool}{}\doxysection{TCache\+Resource\+Pool Class Reference}
\label{class_t_cache_resource_pool}\index{TCacheResourcePool@{TCacheResourcePool}}
Inheritance diagram for TCache\+Resource\+Pool\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_t_cache_resource_pool}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_t_cache_resource_pool_afc0d81a64dacaacdad079fb1c3edb9f8}{set\+Path}} (QString cache\+Root, QString project\+Name, QString scene\+Name)
\item 
const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \& \mbox{\hyperlink{class_t_cache_resource_pool_a1bfd7dd487879eb2bd6baddc36f91229}{get\+Path}} () const
\item 
void \mbox{\hyperlink{class_t_cache_resource_pool_a4d4a3f15b1fe0e77b664c055a8dfefc2}{reset}} ()
\item 
void \mbox{\hyperlink{class_t_cache_resource_pool_a2c60c23f9744401f8a386e901a3c5bdb}{begin\+Cached\+Search}} ()
\item 
void \mbox{\hyperlink{class_t_cache_resource_pool_a3777fec6ab41e24f1a303ef50411e058}{end\+Cached\+Search}} ()
\item 
\mbox{\Hypertarget{class_t_cache_resource_pool_a58ddbb91e2b32a58a37e57f0f16afdba}\label{class_t_cache_resource_pool_a58ddbb91e2b32a58a37e57f0f16afdba}} 
void {\bfseries flush\+Resources} ()
\item 
\mbox{\Hypertarget{class_t_cache_resource_pool_a2816bca9aa81c40eb9eb645c17e7c11d}\label{class_t_cache_resource_pool_a2816bca9aa81c40eb9eb645c17e7c11d}} 
unsigned int {\bfseries get\+Current\+Size} () const
\item 
\mbox{\Hypertarget{class_t_cache_resource_pool_a9dc1998e250e92fe76c51a6bab1d80d6}\label{class_t_cache_resource_pool_a9dc1998e250e92fe76c51a6bab1d80d6}} 
unsigned int {\bfseries get\+Size\+Accessed\+After\+Days} (int days) const
\item 
\mbox{\Hypertarget{class_t_cache_resource_pool_ac239f4cc162a6186b4ff1a4f3dc5a792}\label{class_t_cache_resource_pool_ac239f4cc162a6186b4ff1a4f3dc5a792}} 
void {\bfseries clear} ()
\item 
\mbox{\Hypertarget{class_t_cache_resource_pool_ac30c4468d385669626504f7fb1e1809b}\label{class_t_cache_resource_pool_ac30c4468d385669626504f7fb1e1809b}} 
void {\bfseries clear} (QString cache\+Root, QString project\+Name, QString scene\+Name)
\item 
\mbox{\Hypertarget{class_t_cache_resource_pool_ace176b0e4b9005cc8188b52e3a2cf77e}\label{class_t_cache_resource_pool_ace176b0e4b9005cc8188b52e3a2cf77e}} 
void {\bfseries clear\+Keyword} (const std\+::string \&keyword)
\item 
\mbox{\Hypertarget{class_t_cache_resource_pool_a6d635ccdc3520c14d945e0aa9da012bd}\label{class_t_cache_resource_pool_a6d635ccdc3520c14d945e0aa9da012bd}} 
void {\bfseries add\+Reference} (\mbox{\hyperlink{class_t_cache_resource_p}{TCache\+ResourceP}} resource, QString flag)
\item 
\mbox{\Hypertarget{class_t_cache_resource_pool_ae18a624db1f5257aff22a3e7770c7b70}\label{class_t_cache_resource_pool_ae18a624db1f5257aff22a3e7770c7b70}} 
void {\bfseries release\+Reference} (\mbox{\hyperlink{class_t_cache_resource_p}{TCache\+ResourceP}} resource, QString flag)
\item 
\mbox{\Hypertarget{class_t_cache_resource_pool_adb1cd2ea1a8f57ca2c98b6110489905b}\label{class_t_cache_resource_pool_adb1cd2ea1a8f57ca2c98b6110489905b}} 
void {\bfseries release\+References} (QString flag)
\item 
\mbox{\Hypertarget{class_t_cache_resource_pool_a3662d97b7e2f1ab5e463f1fd45ffb4f5}\label{class_t_cache_resource_pool_a3662d97b7e2f1ab5e463f1fd45ffb4f5}} 
void {\bfseries clear\+Fx\+Resources} (std\+::wstring fx\+Id)
\item 
\mbox{\Hypertarget{class_t_cache_resource_pool_a212bf123f798b2894351cc285e7700d1}\label{class_t_cache_resource_pool_a212bf123f798b2894351cc285e7700d1}} 
void {\bfseries clear\+Accessed\+Up\+To\+Size} (int MB)
\item 
\mbox{\Hypertarget{class_t_cache_resource_pool_a1b1a6ae945aca066e68356df088f12b0}\label{class_t_cache_resource_pool_a1b1a6ae945aca066e68356df088f12b0}} 
void {\bfseries clear\+Accessed\+After\+Days} (int days)
\item 
\mbox{\Hypertarget{class_t_cache_resource_pool_ac92921c8dbaf5f8dc3c051a90c9bfa06}\label{class_t_cache_resource_pool_ac92921c8dbaf5f8dc3c051a90c9bfa06}} 
void {\bfseries clear\+Accessed\+After\+Sessions} (int sessions\+Count)
\item 
\mbox{\Hypertarget{class_t_cache_resource_pool_aad13300ef5f80ae0878e75677bbacdb4}\label{class_t_cache_resource_pool_aad13300ef5f80ae0878e75677bbacdb4}} 
void {\bfseries set\+Maximum\+Size} (int MB)
\item 
\mbox{\Hypertarget{class_t_cache_resource_pool_a1d3d1be48f85c000fa88eb05b4b776ea}\label{class_t_cache_resource_pool_a1d3d1be48f85c000fa88eb05b4b776ea}} 
int {\bfseries get\+Maximum\+Size} () const
\item 
\mbox{\Hypertarget{class_t_cache_resource_pool_ab872aedba043c6700e9a57de72fd0449}\label{class_t_cache_resource_pool_ab872aedba043c6700e9a57de72fd0449}} 
void {\bfseries set\+Resources\+Access\+Time\+Out} (int days)
\item 
\mbox{\Hypertarget{class_t_cache_resource_pool_a6fe902c8a648e17cced35b39660de993}\label{class_t_cache_resource_pool_a6fe902c8a648e17cced35b39660de993}} 
int {\bfseries get\+Resources\+Access\+Time\+Out} () const
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_t_cache_resource_pool}{TCache\+Resource\+Pool}} $\ast$ \mbox{\hyperlink{class_t_cache_resource_pool_a246d36e376196bded0e16d9ffa1b89f4}{instance}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_t_cache_resource_pool_a15905ce0ed3a0995e1f17317b48031e8}{TCache\+Resource}}
\item 
class \mbox{\hyperlink{class_t_cache_resource_pool_a3d9e971014d432f33435740f298820ca}{TCache\+ResourceP}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_cache_resource_pool_a2c60c23f9744401f8a386e901a3c5bdb}\label{class_t_cache_resource_pool_a2c60c23f9744401f8a386e901a3c5bdb}} 
\index{TCacheResourcePool@{TCacheResourcePool}!beginCachedSearch@{beginCachedSearch}}
\index{beginCachedSearch@{beginCachedSearch}!TCacheResourcePool@{TCacheResourcePool}}
\doxysubsubsection{\texorpdfstring{beginCachedSearch()}{beginCachedSearch()}}
{\footnotesize\ttfamily void TCache\+Resource\+Pool\+::begin\+Cached\+Search (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Initializes an optimized search on the pool for a specific resource, caching successive results. \begin{DoxyNote}{Note}
Pool searches are serialized, and calls to this method lock the pool\textquotesingle{}s mutex until a corresponding number of \mbox{\hyperlink{class_t_cache_resource_pool_a3777fec6ab41e24f1a303ef50411e058}{end\+Cached\+Search()}} methods are invoked. 
\end{DoxyNote}

\begin{DoxyCode}{0}
\DoxyCodeLine{00163                                            \{}
\DoxyCodeLine{00164   m\_memMutex.lock();}
\DoxyCodeLine{00165   m\_searchCount++;}
\DoxyCodeLine{00166 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cache_resource_pool_a3777fec6ab41e24f1a303ef50411e058}\label{class_t_cache_resource_pool_a3777fec6ab41e24f1a303ef50411e058}} 
\index{TCacheResourcePool@{TCacheResourcePool}!endCachedSearch@{endCachedSearch}}
\index{endCachedSearch@{endCachedSearch}!TCacheResourcePool@{TCacheResourcePool}}
\doxysubsubsection{\texorpdfstring{endCachedSearch()}{endCachedSearch()}}
{\footnotesize\ttfamily void TCache\+Resource\+Pool\+::end\+Cached\+Search (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

The inverse to \mbox{\hyperlink{class_t_cache_resource_pool_a2c60c23f9744401f8a386e901a3c5bdb}{begin\+Cached\+Search()}}. This method {\bfseries{MUST}} be called in correspondence to \mbox{\hyperlink{class_t_cache_resource_pool_a2c60c23f9744401f8a386e901a3c5bdb}{begin\+Cached\+Search()}} calls. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00173                                          \{}
\DoxyCodeLine{00174   \textcolor{keywordflow}{if} (-\/-\/m\_searchCount <= 0) \{}
\DoxyCodeLine{00175     m\_foundIterator  = \textcolor{keyword}{false};}
\DoxyCodeLine{00176     m\_searchIterator = m\_memResources.end();}
\DoxyCodeLine{00177   \}}
\DoxyCodeLine{00178   m\_memMutex.unlock();}
\DoxyCodeLine{00179 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cache_resource_pool_a1bfd7dd487879eb2bd6baddc36f91229}\label{class_t_cache_resource_pool_a1bfd7dd487879eb2bd6baddc36f91229}} 
\index{TCacheResourcePool@{TCacheResourcePool}!getPath@{getPath}}
\index{getPath@{getPath}!TCacheResourcePool@{TCacheResourcePool}}
\doxysubsubsection{\texorpdfstring{getPath()}{getPath()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \& TCache\+Resource\+Pool\+::get\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00153 \{ \textcolor{keywordflow}{return} m\_path; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cache_resource_pool_a246d36e376196bded0e16d9ffa1b89f4}\label{class_t_cache_resource_pool_a246d36e376196bded0e16d9ffa1b89f4}} 
\index{TCacheResourcePool@{TCacheResourcePool}!instance@{instance}}
\index{instance@{instance}!TCacheResourcePool@{TCacheResourcePool}}
\doxysubsubsection{\texorpdfstring{instance()}{instance()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_cache_resource_pool}{TCache\+Resource\+Pool}} $\ast$ TCache\+Resource\+Pool\+::instance (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00125                                                  \{}
\DoxyCodeLine{00126   \textcolor{keyword}{static} \mbox{\hyperlink{class_t_cache_resource_pool}{TCacheResourcePool}} theInstance;}
\DoxyCodeLine{00127   \textcolor{keywordflow}{return} \&theInstance;}
\DoxyCodeLine{00128 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cache_resource_pool_a4d4a3f15b1fe0e77b664c055a8dfefc2}\label{class_t_cache_resource_pool_a4d4a3f15b1fe0e77b664c055a8dfefc2}} 
\index{TCacheResourcePool@{TCacheResourcePool}!reset@{reset}}
\index{reset@{reset}!TCacheResourcePool@{TCacheResourcePool}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily void TCache\+Resource\+Pool\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00049 \{ \mbox{\hyperlink{class_t_cache_resource_pool_afc0d81a64dacaacdad079fb1c3edb9f8}{setPath}}(\textcolor{stringliteral}{"{}"{}}, \textcolor{stringliteral}{"{}"{}}, \textcolor{stringliteral}{"{}"{}}); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_cache_resource_pool_afc0d81a64dacaacdad079fb1c3edb9f8}\label{class_t_cache_resource_pool_afc0d81a64dacaacdad079fb1c3edb9f8}} 
\index{TCacheResourcePool@{TCacheResourcePool}!setPath@{setPath}}
\index{setPath@{setPath}!TCacheResourcePool@{TCacheResourcePool}}
\doxysubsubsection{\texorpdfstring{setPath()}{setPath()}}
{\footnotesize\ttfamily void TCache\+Resource\+Pool\+::set\+Path (\begin{DoxyParamCaption}\item[{QString}]{cache\+Root,  }\item[{QString}]{project\+Name,  }\item[{QString}]{scene\+Name }\end{DoxyParamCaption})}

Connects to the pool associated to the given project/scene pair. \begin{DoxyWarning}{Warning}
As this closes the current connection before opening a new one, make sure that no pool access happens at this point. You should also verify that no resource from the old pair still exists. 
\end{DoxyWarning}

\begin{DoxyCode}{0}
\DoxyCodeLine{00080                                                     \{}
\DoxyCodeLine{00081   \textcolor{comment}{// There should be no resource in memory.}}
\DoxyCodeLine{00082   assert(m\_memResources.empty());}
\DoxyCodeLine{00083 }
\DoxyCodeLine{00084   \textcolor{comment}{// However, just in case, invalidate all resources so that no more resource}}
\DoxyCodeLine{00085   \textcolor{comment}{// backing}}
\DoxyCodeLine{00086   \textcolor{comment}{// operation take place for current resources, from now on.}}
\DoxyCodeLine{00087   \textcolor{comment}{// No care is paid as to whether active transactions currently exist. You}}
\DoxyCodeLine{00088   \textcolor{comment}{// have been warned by the way....}}
\DoxyCodeLine{00089   invalidateAll();}
\DoxyCodeLine{00090 }
\DoxyCodeLine{00091   \textcolor{keyword}{delete} m\_hdPool;}
\DoxyCodeLine{00092   m\_hdPool = 0;}
\DoxyCodeLine{00093   m\_path   = \mbox{\hyperlink{class_t_file_path}{TFilePath}}();}
\DoxyCodeLine{00094 }
\DoxyCodeLine{00095 \textcolor{preprocessor}{\#ifdef USE\_SQLITE\_HDPOOL}}
\DoxyCodeLine{00096 }
\DoxyCodeLine{00097   \textcolor{keywordflow}{if} (!(cacheRoot.isEmpty() || projectName.isEmpty() || sceneName.isEmpty())) \{}
\DoxyCodeLine{00098     QString hdPoolRoot(getPoolRoot(cacheRoot, projectName, sceneName));}
\DoxyCodeLine{00099     m\_hdPool = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_h_d_cache_resource_pool}{THDCacheResourcePool}}(hdPoolRoot);}
\DoxyCodeLine{00100     m\_path   = m\_hdPool-\/>getResourcesFilePath();}
\DoxyCodeLine{00101   \}}
\DoxyCodeLine{00102 }
\DoxyCodeLine{00103 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00104 \}}

\end{DoxyCode}


\doxysubsection{Friends And Related Function Documentation}
\mbox{\Hypertarget{class_t_cache_resource_pool_a15905ce0ed3a0995e1f17317b48031e8}\label{class_t_cache_resource_pool_a15905ce0ed3a0995e1f17317b48031e8}} 
\index{TCacheResourcePool@{TCacheResourcePool}!TCacheResource@{TCacheResource}}
\index{TCacheResource@{TCacheResource}!TCacheResourcePool@{TCacheResourcePool}}
\doxysubsubsection{\texorpdfstring{TCacheResource}{TCacheResource}}
{\footnotesize\ttfamily friend class \mbox{\hyperlink{class_t_cache_resource}{TCache\+Resource}}\hspace{0.3cm}{\ttfamily [friend]}}

\mbox{\Hypertarget{class_t_cache_resource_pool_a3d9e971014d432f33435740f298820ca}\label{class_t_cache_resource_pool_a3d9e971014d432f33435740f298820ca}} 
\index{TCacheResourcePool@{TCacheResourcePool}!TCacheResourceP@{TCacheResourceP}}
\index{TCacheResourceP@{TCacheResourceP}!TCacheResourcePool@{TCacheResourcePool}}
\doxysubsubsection{\texorpdfstring{TCacheResourceP}{TCacheResourceP}}
{\footnotesize\ttfamily friend class \mbox{\hyperlink{class_t_cache_resource_p}{TCache\+ResourceP}}\hspace{0.3cm}{\ttfamily [friend]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/tcacheresourcepool.\+h\item 
E\+:/opentoonz/toonz/sources/common/tfx/tcacheresourcepool.\+cpp\end{DoxyCompactItemize}
