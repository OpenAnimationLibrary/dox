\hypertarget{class_t_style_selection}{}\doxysection{TStyle\+Selection Class Reference}
\label{class_t_style_selection}\index{TStyleSelection@{TStyleSelection}}
Inheritance diagram for TStyle\+Selection\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_t_style_selection}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_style_selection_a8a9caa566ccc031292c4cd55a72fd771}{TStyle\+Selection}} (\mbox{\hyperlink{class_t_style_selection}{TStyle\+Selection}} $\ast$style\+Selection)
\item 
void \mbox{\hyperlink{class_t_style_selection_a7869b899709079dacd8e86c08c42c8e1}{select}} (int page\+Index)
\item 
void \mbox{\hyperlink{class_t_style_selection_ae046a418ebea73bf0bae9a2929fb6be8}{select}} (int page\+Index, int style\+Index\+In\+Page, bool on)
\item 
bool \mbox{\hyperlink{class_t_style_selection_a0148ba0614080b79301b02432c70b405}{is\+Selected}} (int page\+Index, int style\+Index\+In\+Page) const
\item 
bool \mbox{\hyperlink{class_t_style_selection_a30c4f2fa9c729f7b688cec7edfc92473}{is\+Page\+Selected}} (int page\+Index) const
\item 
bool \mbox{\hyperlink{class_t_style_selection_a4adfca8b440259646485fbe8c0bda4ef}{can\+Handle\+Styles}} ()
\item 
void \mbox{\hyperlink{class_t_style_selection_ab44c19022ca2fa8a23e09d6830ee2546}{select\+None}} () override
\item 
bool \mbox{\hyperlink{class_t_style_selection_a5b0506099a6c39587b6be8aeba7e9a90}{is\+Empty}} () const override
\item 
int \mbox{\hyperlink{class_t_style_selection_a522185becff95e8cbf07152a19b6fc76}{get\+Style\+Count}} () const
\item 
\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$ \mbox{\hyperlink{class_t_style_selection_a336c1beea5d85b108dcddad71469f487}{get\+Palette\+Handle}} () const
\item 
void \mbox{\hyperlink{class_t_style_selection_a8354866058fe200542afd6283b6698a0}{set\+Palette\+Handle}} (\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$palette\+Handle)
\item 
\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$ \mbox{\hyperlink{class_t_style_selection_a6b264b269628316c717db17e604da5e3}{get\+Palette}} () const
\item 
int \mbox{\hyperlink{class_t_style_selection_a0dfb9ba479b7f46e0fd7a0e764409136}{get\+Page\+Index}} () const
\item 
const std\+::set$<$ int $>$ \& \mbox{\hyperlink{class_t_style_selection_a727b2bc31661bdb62b44ce9122f9084a}{get\+Indices\+In\+Page}} () const
\item 
\mbox{\Hypertarget{class_t_style_selection_aa59ec692fecf6f3b6d2e59a13700948a}\label{class_t_style_selection_aa59ec692fecf6f3b6d2e59a13700948a}} 
void {\bfseries get\+Indices} (std\+::set$<$ int $>$ \&indices) const
\item 
void \mbox{\hyperlink{class_t_style_selection_a37c7493377fdb33d2dda5ed74d38e8a7}{set\+Xsheet\+Handle}} (\mbox{\hyperlink{class_t_xsheet_handle}{TXsheet\+Handle}} $\ast$xsheet\+Handle)
\item 
\mbox{\hyperlink{class_t_xsheet_handle}{TXsheet\+Handle}} $\ast$ \mbox{\hyperlink{class_t_style_selection_a98d3b916a748a07c8c919d09839bec61}{get\+Xsheet\+Handle}} () const
\item 
void \mbox{\hyperlink{class_t_style_selection_ab509d87120b742088a6a3ea937567bc7}{set\+Level\+Handle}} (\mbox{\hyperlink{class_t_xsh_level_handle}{TXsh\+Level\+Handle}} $\ast$level\+Handle)
\item 
void \mbox{\hyperlink{class_t_style_selection_a8fa0bf5cea4a2690fc300de164335752}{cut\+Styles}} ()
\item 
void \mbox{\hyperlink{class_t_style_selection_afca3f2a3e62cf514e387af6b67054e55}{copy\+Styles}} ()
\item 
void \mbox{\hyperlink{class_t_style_selection_a63a27480d0f433271972237fc979416f}{paste\+Styles}} ()
\item 
void \mbox{\hyperlink{class_t_style_selection_a7e3bbca98b294abdac7c67577fcb7b6a}{paste\+Styles\+Values}} (bool paste\+Name, bool paste\+Color=true)
\item 
void \mbox{\hyperlink{class_t_style_selection_a82d691d274812792c92472fcb89e9c3a}{paste\+Styles\+Value}} ()
\item 
void \mbox{\hyperlink{class_t_style_selection_afb181238a62515853f741799b15ba28b}{paste\+Styles\+Color}} ()
\item 
void \mbox{\hyperlink{class_t_style_selection_a34edd25042fde1b97b0cd0d96d5d13b3}{paste\+Styles\+Name}} ()
\item 
void \mbox{\hyperlink{class_t_style_selection_a8f7235f38c33b1626c27bbf08afa0a91}{delete\+Styles}} ()
\item 
void \mbox{\hyperlink{class_t_style_selection_a80f0b0badca110bc245ff438bd33efa1}{erase\+Unused\+Style}} ()
\item 
void \mbox{\hyperlink{class_t_style_selection_a0095bb254af812a17ce3fbabff31bf61}{blend\+Styles}} ()
\item 
void \mbox{\hyperlink{class_t_style_selection_a689738d8ddd5557f34d2c36a8421d367}{toggle\+Link}} ()
\item 
void \mbox{\hyperlink{class_t_style_selection_a3ea4ddada3a1470be728f8766b641496}{erase\+Toggle\+Link}} ()
\item 
void \mbox{\hyperlink{class_t_style_selection_a607fd8d1cdd7da62485884ffbb2bbbb4}{enable\+Commands}} () override
\item 
void \mbox{\hyperlink{class_t_style_selection_a2c67fff580dd532a325e7b4ebd8567ac}{toggle\+Keyframe}} (int frame)
\item 
void \mbox{\hyperlink{class_t_style_selection_a18b6304926b7f21955496b2bf9d3397a}{remove\+Link}} ()
\item 
void \mbox{\hyperlink{class_t_style_selection_a446ba4a462a2d5f09694d9b178652589}{get\+Back\+Original\+Style}} ()
\item 
bool \mbox{\hyperlink{class_t_style_selection_ac1bfbf9626d93d27e910814fdde8b612}{has\+Linked\+Style}} ()
\item 
\mbox{\hyperlink{class_t_style_selection_a8a9caa566ccc031292c4cd55a72fd771}{TStyle\+Selection}} (\mbox{\hyperlink{class_t_style_selection}{TStyle\+Selection}} $\ast$style\+Selection)
\item 
void \mbox{\hyperlink{class_t_style_selection_a8ce0ff7f135e52a1d0df0cf146996072}{select}} (const \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} \&palette, int page\+Index)
\item 
void \mbox{\hyperlink{class_t_style_selection_a61ccaf1f2d730c8f5e3dcdc2b3f45cac}{select}} (const \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} \&palette, int page\+Index, int style\+Index\+In\+Page, bool on)
\item 
bool \mbox{\hyperlink{class_t_style_selection_a51ab630bb626ee89075e89011f3ef616}{is\+Selected}} (const \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} \&palette, int page\+Index, int style\+Index\+In\+Page) const
\item 
bool \mbox{\hyperlink{class_t_style_selection_a486981abe89abb0c4148c4c8971f113b}{is\+Page\+Selected}} (const \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} \&palette, int page\+Index) const
\item 
void \mbox{\hyperlink{class_t_style_selection_acba691eaa8e39eb8aaa5cc01e3cd39ce}{select\+None}} ()
\item 
bool \mbox{\hyperlink{class_t_style_selection_acb80ea4dcd49f96ccc6d6fb195a9ca06}{is\+Empty}} () const
\item 
\mbox{\Hypertarget{class_t_style_selection_a522185becff95e8cbf07152a19b6fc76}\label{class_t_style_selection_a522185becff95e8cbf07152a19b6fc76}} 
int {\bfseries get\+Style\+Count} () const
\item 
const \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} \& \mbox{\hyperlink{class_t_style_selection_a748577acdecb0e54e3e926700a75701d}{get\+Palette}} () const
\item 
int \mbox{\hyperlink{class_t_style_selection_a0dfb9ba479b7f46e0fd7a0e764409136}{get\+Page\+Index}} () const
\item 
const std\+::set$<$ int $>$ \& \mbox{\hyperlink{class_t_style_selection_a727b2bc31661bdb62b44ce9122f9084a}{get\+Indices\+In\+Page}} () const
\item 
\mbox{\Hypertarget{class_t_style_selection_a8fa0bf5cea4a2690fc300de164335752}\label{class_t_style_selection_a8fa0bf5cea4a2690fc300de164335752}} 
void {\bfseries cut\+Styles} ()
\item 
\mbox{\Hypertarget{class_t_style_selection_afca3f2a3e62cf514e387af6b67054e55}\label{class_t_style_selection_afca3f2a3e62cf514e387af6b67054e55}} 
void {\bfseries copy\+Styles} ()
\item 
\mbox{\Hypertarget{class_t_style_selection_a63a27480d0f433271972237fc979416f}\label{class_t_style_selection_a63a27480d0f433271972237fc979416f}} 
void {\bfseries paste\+Styles} ()
\item 
\mbox{\Hypertarget{class_t_style_selection_a82d691d274812792c92472fcb89e9c3a}\label{class_t_style_selection_a82d691d274812792c92472fcb89e9c3a}} 
void {\bfseries paste\+Styles\+Value} ()
\item 
\mbox{\Hypertarget{class_t_style_selection_a8f7235f38c33b1626c27bbf08afa0a91}\label{class_t_style_selection_a8f7235f38c33b1626c27bbf08afa0a91}} 
void {\bfseries delete\+Styles} ()
\item 
\mbox{\Hypertarget{class_t_style_selection_a0095bb254af812a17ce3fbabff31bf61}\label{class_t_style_selection_a0095bb254af812a17ce3fbabff31bf61}} 
void {\bfseries blend\+Styles} ()
\item 
\mbox{\Hypertarget{class_t_style_selection_a689738d8ddd5557f34d2c36a8421d367}\label{class_t_style_selection_a689738d8ddd5557f34d2c36a8421d367}} 
void {\bfseries toggle\+Link} ()
\item 
void \mbox{\hyperlink{class_t_style_selection_a7c57976019ea16fe80a0e581af998ca9}{enable\+Commands}} ()
\item 
QByte\+Array \mbox{\hyperlink{class_t_style_selection_afcdb4c157630339c1147250d726c5fa4}{to\+Byte\+Array}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static QByte\+Array \mbox{\hyperlink{class_t_style_selection_a5f6b6227eaf5e1a2b8000d530f409855}{to\+Byte\+Array}} (int page\+Index, const std\+::set$<$ int $>$ \&indices\+In\+Page, const QString palette\+Global\+Name)
\item 
static void \mbox{\hyperlink{class_t_style_selection_a5fa0831cb3d2731af6df04aa9a0c9ad7}{from\+Byte\+Array}} (QByte\+Array \&byte\+Array, int \&page\+Index, std\+::set$<$ int $>$ \&indices\+In\+Page, QString \&palette\+Global\+Name)
\item 
static const char $\ast$ \mbox{\hyperlink{class_t_style_selection_adc272407db8145934781819be520f9a7}{get\+Mime\+Type}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_style_selection_a190df1536fb11d27ad71362783ca3c03}\label{class_t_style_selection_a190df1536fb11d27ad71362783ca3c03}} 
\index{TStyleSelection@{TStyleSelection}!TStyleSelection@{TStyleSelection}}
\index{TStyleSelection@{TStyleSelection}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{TStyleSelection()}{TStyleSelection()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily TStyle\+Selection\+::\+TStyle\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00277 : m\_palette(0), m\_pageIndex(-\/1) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a8a9caa566ccc031292c4cd55a72fd771}\label{class_t_style_selection_a8a9caa566ccc031292c4cd55a72fd771}} 
\index{TStyleSelection@{TStyleSelection}!TStyleSelection@{TStyleSelection}}
\index{TStyleSelection@{TStyleSelection}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{TStyleSelection()}{TStyleSelection()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily TStyle\+Selection\+::\+TStyle\+Selection (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_style_selection}{TStyle\+Selection}} $\ast$}]{style\+Selection }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00046       : m\_paletteHandle(styleSelection-\/>getPaletteHandle())}
\DoxyCodeLine{00047       , m\_pageIndex(styleSelection-\/>getPageIndex())}
\DoxyCodeLine{00048       , m\_styleIndicesInPage(styleSelection-\/>getIndicesInPage()) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_aa99e5216f4938b7a32c9d4e3e84904b8}\label{class_t_style_selection_aa99e5216f4938b7a32c9d4e3e84904b8}} 
\index{TStyleSelection@{TStyleSelection}!````~TStyleSelection@{$\sim$TStyleSelection}}
\index{````~TStyleSelection@{$\sim$TStyleSelection}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{$\sim$TStyleSelection()}{~TStyleSelection()}}
{\footnotesize\ttfamily TStyle\+Selection\+::$\sim$\+TStyle\+Selection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00281 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a8a9caa566ccc031292c4cd55a72fd771}\label{class_t_style_selection_a8a9caa566ccc031292c4cd55a72fd771}} 
\index{TStyleSelection@{TStyleSelection}!TStyleSelection@{TStyleSelection}}
\index{TStyleSelection@{TStyleSelection}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{TStyleSelection()}{TStyleSelection()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily TStyle\+Selection\+::\+TStyle\+Selection (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_style_selection}{TStyle\+Selection}} $\ast$}]{style\+Selection }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00025       : m\_palette(styleSelection-\/>getPalette())}
\DoxyCodeLine{00026       , m\_pageIndex(styleSelection-\/>getPageIndex())}
\DoxyCodeLine{00027       , m\_styleIndicesInPage(styleSelection-\/>getIndicesInPage()) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_style_selection_a0095bb254af812a17ce3fbabff31bf61}\label{class_t_style_selection_a0095bb254af812a17ce3fbabff31bf61}} 
\index{TStyleSelection@{TStyleSelection}!blendStyles@{blendStyles}}
\index{blendStyles@{blendStyles}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{blendStyles()}{blendStyles()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::blend\+Styles (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00593                                   \{}
\DoxyCodeLine{00594   \textcolor{keywordflow}{if} (!m\_palette || m\_pageIndex < 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00595   \textcolor{keywordtype}{int} n = m\_styleIndicesInPage.size();}
\DoxyCodeLine{00596   \textcolor{keywordflow}{if} (n < 2) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00597 }
\DoxyCodeLine{00598   \mbox{\hyperlink{class_t_palette_1_1_page}{TPalette::Page}} *page = m\_palette-\/>\mbox{\hyperlink{class_t_palette_a25f83b7baf3eb774e50c726fa702056c}{getPage}}(m\_pageIndex);}
\DoxyCodeLine{00599   assert(page);}
\DoxyCodeLine{00600 }
\DoxyCodeLine{00601   std::vector<TColorStyle *> styles;}
\DoxyCodeLine{00602   std::vector<std::pair<int, TColorStyle *>> oldStyles;}
\DoxyCodeLine{00603   \textcolor{keywordflow}{for} (std::set<int>::iterator it = m\_styleIndicesInPage.begin();}
\DoxyCodeLine{00604        it != m\_styleIndicesInPage.end(); ++it) \{}
\DoxyCodeLine{00605     \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *cs = page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_abe9e434ff44cbe1fde53f32aa7978f9c}{getStyle}}(*it);}
\DoxyCodeLine{00606     assert(cs);}
\DoxyCodeLine{00607     styles.push\_back(cs);}
\DoxyCodeLine{00608     oldStyles.push\_back(std::pair<int, TColorStyle *>(*it, cs-\/>\mbox{\hyperlink{class_t_color_style_a7b7e50c731a150aa84f746a261765adf}{clone}}()));}
\DoxyCodeLine{00609   \}}
\DoxyCodeLine{00610   assert(styles.size() >= 2);}
\DoxyCodeLine{00611 }
\DoxyCodeLine{00612   TPixel32 c0 = styles.front()-\/>getMainColor();}
\DoxyCodeLine{00613   TPixel32 c1 = styles.back()-\/>getMainColor();}
\DoxyCodeLine{00614 }
\DoxyCodeLine{00615   \textcolor{keywordtype}{bool} areAllStyleLincked = \textcolor{keyword}{true};}
\DoxyCodeLine{00616   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00617   \textcolor{keywordflow}{for} (i = 1; i < n -\/ 1; i++) \{}
\DoxyCodeLine{00618     QString gname = QString::fromStdWString(styles[i]-\/>getGlobalName());}
\DoxyCodeLine{00619     \textcolor{keywordflow}{if} (!gname.isEmpty() \&\& gname[0] != L\textcolor{charliteral}{'-\/'}) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00620     areAllStyleLincked = \textcolor{keyword}{false};}
\DoxyCodeLine{00621     styles[i]-\/>setMainColor(blend(c0, c1, (\textcolor{keywordtype}{double})i / (\textcolor{keywordtype}{double})(n -\/ 1)));}
\DoxyCodeLine{00622     styles[i]-\/>invalidateIcon();}
\DoxyCodeLine{00623   \}}
\DoxyCodeLine{00624   \textcolor{keywordflow}{if} (areAllStyleLincked) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00625   \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a33dbcbc578915e0b69fe6927b74cf426}{getCurrentPalette}}()-\/>notifyColorStyleChanged();}
\DoxyCodeLine{00626 }
\DoxyCodeLine{00627   UndoBlendColor *undo =}
\DoxyCodeLine{00628       \textcolor{keyword}{new} UndoBlendColor(m\_palette, m\_pageIndex, oldStyles, c0, c1);}
\DoxyCodeLine{00629   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{00630 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a4adfca8b440259646485fbe8c0bda4ef}\label{class_t_style_selection_a4adfca8b440259646485fbe8c0bda4ef}} 
\index{TStyleSelection@{TStyleSelection}!canHandleStyles@{canHandleStyles}}
\index{canHandleStyles@{canHandleStyles}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{canHandleStyles()}{canHandleStyles()}}
{\footnotesize\ttfamily bool TStyle\+Selection\+::can\+Handle\+Styles (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00550                                       \{}
\DoxyCodeLine{00551   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = getPalette();}
\DoxyCodeLine{00552   \textcolor{keywordflow}{if} (!palette) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00553   \mbox{\hyperlink{class_t_palette_1_1_page}{TPalette::Page}} *page = palette-\/>getPage(m\_pageIndex);}
\DoxyCodeLine{00554   \textcolor{keywordflow}{if} (!page) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00555   \textcolor{keywordflow}{if} ((isSelected(m\_pageIndex, 0) \&\& page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_a3d6eed995ee8b1c22d50a73911a45786}{getStyleId}}(0) == 0) ||}
\DoxyCodeLine{00556       (isSelected(m\_pageIndex, 1) \&\& page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_a3d6eed995ee8b1c22d50a73911a45786}{getStyleId}}(1) == 1))}
\DoxyCodeLine{00557     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00558   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00559 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_afca3f2a3e62cf514e387af6b67054e55}\label{class_t_style_selection_afca3f2a3e62cf514e387af6b67054e55}} 
\index{TStyleSelection@{TStyleSelection}!copyStyles@{copyStyles}}
\index{copyStyles@{copyStyles}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{copyStyles()}{copyStyles()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::copy\+Styles (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00373                                  \{}
\DoxyCodeLine{00374   \textcolor{keywordflow}{if} (isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00375   QClipboard *clipboard = QApplication::clipboard();}
\DoxyCodeLine{00376   QMimeData *oldData    = cloneData(clipboard-\/>mimeData());}
\DoxyCodeLine{00377   copyStylesWithoutUndo(m\_palette, m\_pageIndex, \&m\_styleIndicesInPage);}
\DoxyCodeLine{00378   QMimeData *newData = cloneData(clipboard-\/>mimeData());}
\DoxyCodeLine{00379 }
\DoxyCodeLine{00380   TUndoManager::manager()-\/>add(\textcolor{keyword}{new} CopyStylesUndo(oldData, newData));}
\DoxyCodeLine{00381 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a8fa0bf5cea4a2690fc300de164335752}\label{class_t_style_selection_a8fa0bf5cea4a2690fc300de164335752}} 
\index{TStyleSelection@{TStyleSelection}!cutStyles@{cutStyles}}
\index{cutStyles@{cutStyles}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{cutStyles()}{cutStyles()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::cut\+Styles (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00356                                 \{}
\DoxyCodeLine{00357   \textcolor{keywordflow}{if} (isEmpty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00358   QClipboard *clipboard      = QApplication::clipboard();}
\DoxyCodeLine{00359   QMimeData *oldData         = cloneData(clipboard-\/>mimeData());}
\DoxyCodeLine{00360   \mbox{\hyperlink{class_t_style_selection}{TStyleSelection}} *selection = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_style_selection}{TStyleSelection}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00361   \textcolor{keywordflow}{if} (m\_pageIndex == 0 \&\&}
\DoxyCodeLine{00362       (isSelected(m\_palette, 0, 0) || isSelected(m\_palette, 0, 1))) \{}
\DoxyCodeLine{00363     MsgBox(CRITICAL, \textcolor{stringliteral}{"{}Can't delete colors \#0 and \#1"{}});}
\DoxyCodeLine{00364     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00365   \}}
\DoxyCodeLine{00366   cutStylesWithoutUndo(m\_palette, m\_pageIndex, \&m\_styleIndicesInPage);}
\DoxyCodeLine{00367 }
\DoxyCodeLine{00368   TUndoManager::manager()-\/>add(\textcolor{keyword}{new} CutStylesUndo(selection, oldData));}
\DoxyCodeLine{00369 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a8f7235f38c33b1626c27bbf08afa0a91}\label{class_t_style_selection_a8f7235f38c33b1626c27bbf08afa0a91}} 
\index{TStyleSelection@{TStyleSelection}!deleteStyles@{deleteStyles}}
\index{deleteStyles@{deleteStyles}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{deleteStyles()}{deleteStyles()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::delete\+Styles (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00401                                    \{}
\DoxyCodeLine{00402   \textcolor{keywordflow}{if} (!m\_palette || m\_pageIndex < 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00403   \textcolor{keywordflow}{if} (m\_pageIndex == 0 \&\&}
\DoxyCodeLine{00404       (isSelected(m\_palette, 0, 0) || isSelected(m\_palette, 0, 1))) \{}
\DoxyCodeLine{00405     MsgBox(CRITICAL, \textcolor{stringliteral}{"{}Can't delete colors \#0 and \#1"{}});}
\DoxyCodeLine{00406     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00407   \}}
\DoxyCodeLine{00408 }
\DoxyCodeLine{00409   \mbox{\hyperlink{class_style_data}{StyleData}} *data = \textcolor{keyword}{new} \mbox{\hyperlink{class_style_data}{StyleData}}();}
\DoxyCodeLine{00410   std::set<int>::iterator it;}
\DoxyCodeLine{00411   \mbox{\hyperlink{class_t_palette_1_1_page}{TPalette::Page}} *page = m\_palette-\/>\mbox{\hyperlink{class_t_palette_a25f83b7baf3eb774e50c726fa702056c}{getPage}}(m\_pageIndex);}
\DoxyCodeLine{00412   \textcolor{keywordflow}{for} (it = m\_styleIndicesInPage.begin(); it != m\_styleIndicesInPage.end();}
\DoxyCodeLine{00413        ++it) \{}
\DoxyCodeLine{00414     \textcolor{keywordtype}{int} j       = *it;}
\DoxyCodeLine{00415     \textcolor{keywordtype}{int} styleId = page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_a3d6eed995ee8b1c22d50a73911a45786}{getStyleId}}(j);}
\DoxyCodeLine{00416     \textcolor{keywordflow}{if} (styleId < 0) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00417     \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *style = page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_abe9e434ff44cbe1fde53f32aa7978f9c}{getStyle}}(j)-\/>\mbox{\hyperlink{class_t_color_style_a7b7e50c731a150aa84f746a261765adf}{clone}}();}
\DoxyCodeLine{00418     data-\/>addStyle(styleId, style);}
\DoxyCodeLine{00419   \}}
\DoxyCodeLine{00420   \mbox{\hyperlink{class_t_style_selection}{TStyleSelection}} *selection = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_style_selection}{TStyleSelection}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00421 }
\DoxyCodeLine{00422   deleteStylesWithoutUndo(m\_palette, m\_pageIndex, \&m\_styleIndicesInPage);}
\DoxyCodeLine{00423 }
\DoxyCodeLine{00424   TUndoManager::manager()-\/>add(\textcolor{keyword}{new} DeleteStylesUndo(selection, data));}
\DoxyCodeLine{00425 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a7c57976019ea16fe80a0e581af998ca9}\label{class_t_style_selection_a7c57976019ea16fe80a0e581af998ca9}} 
\index{TStyleSelection@{TStyleSelection}!enableCommands@{enableCommands}}
\index{enableCommands@{enableCommands}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{enableCommands()}{enableCommands()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void TStyle\+Selection\+::enable\+Commands (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_selection}{TSelection}}.

\mbox{\Hypertarget{class_t_style_selection_a607fd8d1cdd7da62485884ffbb2bbbb4}\label{class_t_style_selection_a607fd8d1cdd7da62485884ffbb2bbbb4}} 
\index{TStyleSelection@{TStyleSelection}!enableCommands@{enableCommands}}
\index{enableCommands@{enableCommands}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{enableCommands()}{enableCommands()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void TStyle\+Selection\+::enable\+Commands (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_selection}{TSelection}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00285                                      \{}
\DoxyCodeLine{00286   enableCommand(\textcolor{keyword}{this}, MI\_Cut, \&TStyleSelection::cutStyles);}
\DoxyCodeLine{00287   enableCommand(\textcolor{keyword}{this}, MI\_Copy, \&TStyleSelection::copyStyles);}
\DoxyCodeLine{00288   enableCommand(\textcolor{keyword}{this}, MI\_Paste, \&TStyleSelection::pasteStyles);}
\DoxyCodeLine{00289   enableCommand(\textcolor{keyword}{this}, MI\_PasteValues, \&TStyleSelection::pasteStylesValue);}
\DoxyCodeLine{00290   enableCommand(\textcolor{keyword}{this}, MI\_Clear, \&TStyleSelection::deleteStyles);}
\DoxyCodeLine{00291   enableCommand(\textcolor{keyword}{this}, MI\_BlendColors, \&TStyleSelection::blendStyles);}
\DoxyCodeLine{00292 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a3ea4ddada3a1470be728f8766b641496}\label{class_t_style_selection_a3ea4ddada3a1470be728f8766b641496}} 
\index{TStyleSelection@{TStyleSelection}!eraseToggleLink@{eraseToggleLink}}
\index{eraseToggleLink@{eraseToggleLink}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{eraseToggleLink()}{eraseToggleLink()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::erase\+Toggle\+Link (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01513                                       \{}
\DoxyCodeLine{01514   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = getPalette();}
\DoxyCodeLine{01515   \textcolor{keywordflow}{if} (!palette || m\_pageIndex < 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01516   \textcolor{keywordflow}{if} (isEmpty() || palette-\/>isLocked()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01517   \textcolor{keywordtype}{int} n = m\_styleIndicesInPage.size();}
\DoxyCodeLine{01518   \textcolor{keywordflow}{if} (n <= 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01519 }
\DoxyCodeLine{01520   \textcolor{keywordtype}{bool} currentStyleIsInSelection = \textcolor{keyword}{false};}
\DoxyCodeLine{01521 }
\DoxyCodeLine{01522   \mbox{\hyperlink{class_t_palette_1_1_page}{TPalette::Page}} *page = palette-\/>getPage(m\_pageIndex);}
\DoxyCodeLine{01523   assert(page);}
\DoxyCodeLine{01524 }
\DoxyCodeLine{01525   std::vector<std::pair<int, std::wstring>> oldColorStylesLinked;}
\DoxyCodeLine{01526   std::vector<std::pair<int, std::wstring>> newColorStylesLinked;}
\DoxyCodeLine{01527 }
\DoxyCodeLine{01528   UndoLinkToStudioPalette *undo =}
\DoxyCodeLine{01529       \textcolor{keyword}{new} UndoLinkToStudioPalette(m\_paletteHandle, m\_pageIndex);}
\DoxyCodeLine{01530 }
\DoxyCodeLine{01531   \textcolor{keywordflow}{for} (std::set<int>::iterator it = m\_styleIndicesInPage.begin();}
\DoxyCodeLine{01532        it != m\_styleIndicesInPage.end(); ++it) \{}
\DoxyCodeLine{01533     \textcolor{keywordtype}{int} index       = *it;}
\DoxyCodeLine{01534     \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *cs = page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_abe9e434ff44cbe1fde53f32aa7978f9c}{getStyle}}(index);}
\DoxyCodeLine{01535     assert(cs);}
\DoxyCodeLine{01536     \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *oldCs = cs-\/>\mbox{\hyperlink{class_t_color_style_a7b7e50c731a150aa84f746a261765adf}{clone}}();}
\DoxyCodeLine{01537     std::wstring name  = cs-\/>\mbox{\hyperlink{class_t_color_style_ad275b1ae7fbbf9b7a0266b799ce53d40}{getGlobalName}}();}
\DoxyCodeLine{01538     \textcolor{keywordflow}{if} (name != L\textcolor{stringliteral}{"{}"{}} \&\& (name[0] == L\textcolor{charliteral}{'-\/'} || name[0] == L\textcolor{charliteral}{'+'}))}
\DoxyCodeLine{01539       cs-\/>\mbox{\hyperlink{class_t_color_style_af6a3579e3785b9addcf434574bc89367}{setGlobalName}}(L\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01540     undo-\/>setColorStyle(index, oldCs, L\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01541     \textcolor{keywordflow}{if} (*it ==}
\DoxyCodeLine{01542         palette-\/>getPage(m\_pageIndex)-\/>search(m\_paletteHandle-\/>getStyleIndex()))}
\DoxyCodeLine{01543       currentStyleIsInSelection = \textcolor{keyword}{true};}
\DoxyCodeLine{01544   \}}
\DoxyCodeLine{01545 }
\DoxyCodeLine{01546   m\_paletteHandle-\/>notifyColorStyleChanged(\textcolor{keyword}{false});}
\DoxyCodeLine{01547 }
\DoxyCodeLine{01548   \textcolor{keywordflow}{if} (currentStyleIsInSelection) m\_paletteHandle-\/>notifyColorStyleSwitched();}
\DoxyCodeLine{01549 }
\DoxyCodeLine{01550   palette-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{01551 }
\DoxyCodeLine{01552   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{01553 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a80f0b0badca110bc245ff438bd33efa1}\label{class_t_style_selection_a80f0b0badca110bc245ff438bd33efa1}} 
\index{TStyleSelection@{TStyleSelection}!eraseUnusedStyle@{eraseUnusedStyle}}
\index{eraseUnusedStyle@{eraseUnusedStyle}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{eraseUnusedStyle()}{eraseUnusedStyle()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::erase\+Unused\+Style (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00697                                        \{}
\DoxyCodeLine{00698   std::set<TXshSimpleLevel *> levels;}
\DoxyCodeLine{00699   \textcolor{keywordtype}{int} row, column, i, j;}
\DoxyCodeLine{00700   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = m\_paletteHandle-\/>getPalette();}
\DoxyCodeLine{00701   findPaletteLevels(levels, row, column, palette, m\_xsheetHandle-\/>getXsheet());}
\DoxyCodeLine{00702 }
\DoxyCodeLine{00703   \textcolor{comment}{// Verifico quali stili sono usati e quali no}}
\DoxyCodeLine{00704   std::map<int, bool> usedStyleIds;}
\DoxyCodeLine{00705   \textcolor{keywordtype}{int} pageCount = palette-\/>getPageCount();}
\DoxyCodeLine{00706   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const} level : levels) \{}
\DoxyCodeLine{00707     std::vector<TFrameId> fids;}
\DoxyCodeLine{00708     level-\/>getFids(fids);}
\DoxyCodeLine{00709     \textcolor{keywordtype}{int} m, i, j;}
\DoxyCodeLine{00710     \textcolor{keywordflow}{for} (m = 0; m < (int)fids.size(); m++) \{}
\DoxyCodeLine{00711       \mbox{\hyperlink{class_t_smart_pointer_t}{TImageP}} image = level-\/>getFrame(fids[m], \textcolor{keyword}{false});}
\DoxyCodeLine{00712       \textcolor{keywordflow}{if} (!image) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00713       \textcolor{keywordflow}{for} (i = 0; i < pageCount; i++) \{}
\DoxyCodeLine{00714         \mbox{\hyperlink{class_t_palette_1_1_page}{TPalette::Page}} *page = palette-\/>getPage(i);}
\DoxyCodeLine{00715         assert(page);}
\DoxyCodeLine{00716         \textcolor{keywordflow}{for} (j = 0; j < page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_ae6d6b899ee10f5b3900081acd882f8ee}{getStyleCount}}(); j++) \{}
\DoxyCodeLine{00717           \textcolor{keywordtype}{int} styleId = page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_a3d6eed995ee8b1c22d50a73911a45786}{getStyleId}}(j);}
\DoxyCodeLine{00718           \textcolor{keywordflow}{if} (m != 0 \&\& usedStyleIds[styleId]) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00719           \textcolor{keywordflow}{if} (i == 0 \&\&}
\DoxyCodeLine{00720               (j == 0 || j == 1))  \textcolor{comment}{// Il primo stile della prima pagina non deve}}
\DoxyCodeLine{00721                                    \textcolor{comment}{// essere mai cancellato}}
\DoxyCodeLine{00722           \{}
\DoxyCodeLine{00723             usedStyleIds[styleId] = \textcolor{keyword}{true};}
\DoxyCodeLine{00724             \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00725           \}}
\DoxyCodeLine{00726           usedStyleIds[styleId] = isStyleUsed(image, styleId);}
\DoxyCodeLine{00727         \}}
\DoxyCodeLine{00728       \}}
\DoxyCodeLine{00729     \}}
\DoxyCodeLine{00730   \}}
\DoxyCodeLine{00731 }
\DoxyCodeLine{00732   \textcolor{comment}{// check if there are styles to be erased}}
\DoxyCodeLine{00733   QMap<int, std::set<int>> styleIndicesInPageMap;}
\DoxyCodeLine{00734   QString indicesStr;}
\DoxyCodeLine{00735   \textcolor{keywordtype}{int} count = 0;}
\DoxyCodeLine{00736   \textcolor{comment}{// Butto gli stili non usati}}
\DoxyCodeLine{00737   \textcolor{keywordflow}{for} (i = 0; i < pageCount; i++) \{}
\DoxyCodeLine{00738     \textcolor{comment}{// Variabili usate per l'undo}}
\DoxyCodeLine{00739     std::set<int> styleIndicesInPage;}
\DoxyCodeLine{00740     \mbox{\hyperlink{class_t_palette_1_1_page}{TPalette::Page}} *page = palette-\/>getPage(i);}
\DoxyCodeLine{00741     assert(page);}
\DoxyCodeLine{00742     \textcolor{keywordflow}{for} (j = 0; j < page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_ae6d6b899ee10f5b3900081acd882f8ee}{getStyleCount}}(); j++) \{}
\DoxyCodeLine{00743       \textcolor{keywordtype}{int} styleId = page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_a3d6eed995ee8b1c22d50a73911a45786}{getStyleId}}(j);}
\DoxyCodeLine{00744       \textcolor{keywordflow}{if} (usedStyleIds[styleId]) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00745       styleIndicesInPage.insert(j);}
\DoxyCodeLine{00746       \textcolor{keywordflow}{if} (count < 10) indicesStr.append(QString::number(styleId) + \textcolor{stringliteral}{"{}, "{}});}
\DoxyCodeLine{00747       count++;}
\DoxyCodeLine{00748     \}}
\DoxyCodeLine{00749     \textcolor{keywordflow}{if} (!styleIndicesInPage.empty())}
\DoxyCodeLine{00750       styleIndicesInPageMap.insert(i, styleIndicesInPage);}
\DoxyCodeLine{00751   \}}
\DoxyCodeLine{00752 }
\DoxyCodeLine{00753   \textcolor{keywordflow}{if} (styleIndicesInPageMap.isEmpty()) \{}
\DoxyCodeLine{00754     DVGui::error(QObject::tr(\textcolor{stringliteral}{"{}There are no unused styles."{}}));}
\DoxyCodeLine{00755     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00756   \}}
\DoxyCodeLine{00757   \textcolor{keywordflow}{if} (count <= 10)}
\DoxyCodeLine{00758     indicesStr.chop(2);}
\DoxyCodeLine{00759   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00760     indicesStr.append(}
\DoxyCodeLine{00761         QObject::tr(\textcolor{stringliteral}{"{}and \%1 more styles."{}}).arg(QString::number(count -\/ 10)));}
\DoxyCodeLine{00762   \textcolor{comment}{// open confirmation popup}}
\DoxyCodeLine{00763   QString question =}
\DoxyCodeLine{00764       QObject::tr(}
\DoxyCodeLine{00765           \textcolor{stringliteral}{"{}Erasing unused styles with following indices. Are you sure?\(\backslash\)n\(\backslash\)n\%1"{}})}
\DoxyCodeLine{00766           .arg(indicesStr);}
\DoxyCodeLine{00767   \textcolor{keywordtype}{int} ret =}
\DoxyCodeLine{00768       DVGui::MsgBox(question, QObject::tr(\textcolor{stringliteral}{"{}Erase"{}}), QObject::tr(\textcolor{stringliteral}{"{}Cancel"{}}), 0);}
\DoxyCodeLine{00769   \textcolor{keywordflow}{if} (ret == 2 || ret == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00770 }
\DoxyCodeLine{00771   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{00772 }
\DoxyCodeLine{00773   QMap<int, std::set<int>>::const\_iterator styleMapItr =}
\DoxyCodeLine{00774       styleIndicesInPageMap.constBegin();}
\DoxyCodeLine{00775   \textcolor{keywordflow}{while} (styleMapItr != styleIndicesInPageMap.constEnd()) \{}
\DoxyCodeLine{00776     \textcolor{keywordtype}{int} pageIndex                    = styleMapItr.key();}
\DoxyCodeLine{00777     std::set<int> styleIndicesInPage = styleMapItr.value();}
\DoxyCodeLine{00778     \mbox{\hyperlink{class_style_data}{StyleData}} *data                  = \textcolor{keyword}{new} \mbox{\hyperlink{class_style_data}{StyleData}}();}
\DoxyCodeLine{00779     \mbox{\hyperlink{class_t_palette_1_1_page}{TPalette::Page}} *page             = palette-\/>getPage(pageIndex);}
\DoxyCodeLine{00780     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} indexInPage : styleIndicesInPage) \{}
\DoxyCodeLine{00781       \textcolor{keywordtype}{int} styleId = page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_a3d6eed995ee8b1c22d50a73911a45786}{getStyleId}}(indexInPage);}
\DoxyCodeLine{00782       data-\/>addStyle(styleId, page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_abe9e434ff44cbe1fde53f32aa7978f9c}{getStyle}}(indexInPage)-\/>\mbox{\hyperlink{class_t_color_style_a7b7e50c731a150aa84f746a261765adf}{clone}}());}
\DoxyCodeLine{00783     \}}
\DoxyCodeLine{00784 }
\DoxyCodeLine{00785     \textcolor{comment}{// Cancello gli stili}}
\DoxyCodeLine{00786     std::set<int>::reverse\_iterator it;}
\DoxyCodeLine{00787     \textcolor{keywordflow}{for} (it = styleIndicesInPage.rbegin(); it != styleIndicesInPage.rend();}
\DoxyCodeLine{00788          ++it)}
\DoxyCodeLine{00789       page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_a7619abc839bf063d3065596235171982}{removeStyle}}(*it);}
\DoxyCodeLine{00790     \textcolor{comment}{// Undo}}
\DoxyCodeLine{00791     DeleteStylesUndo *undo = \textcolor{keyword}{new} DeleteStylesUndo(\textcolor{keyword}{this}, data);}
\DoxyCodeLine{00792     undo-\/>setPageIndex(pageIndex);}
\DoxyCodeLine{00793     undo-\/>setStyleIndicesInPage(styleIndicesInPage);}
\DoxyCodeLine{00794     TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{00795 }
\DoxyCodeLine{00796     ++styleMapItr;}
\DoxyCodeLine{00797   \}}
\DoxyCodeLine{00798   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{00799   m\_paletteHandle-\/>setStyleIndex(1);}
\DoxyCodeLine{00800 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a5fa0831cb3d2731af6df04aa9a0c9ad7}\label{class_t_style_selection_a5fa0831cb3d2731af6df04aa9a0c9ad7}} 
\index{TStyleSelection@{TStyleSelection}!fromByteArray@{fromByteArray}}
\index{fromByteArray@{fromByteArray}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{fromByteArray()}{fromByteArray()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::from\+Byte\+Array (\begin{DoxyParamCaption}\item[{QByte\+Array \&}]{byte\+Array,  }\item[{int \&}]{page\+Index,  }\item[{std\+::set$<$ int $>$ \&}]{indices\+In\+Page,  }\item[{QString \&}]{palette\+Global\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00697                                                                 \{}
\DoxyCodeLine{00698   QBuffer dataBuffer(\&byteArray);}
\DoxyCodeLine{00699   dataBuffer.open(QIODevice::ReadOnly);}
\DoxyCodeLine{00700   QDataStream in(\&dataBuffer);}
\DoxyCodeLine{00701   \textcolor{keywordtype}{int} i, count = 0;}
\DoxyCodeLine{00702   in >> pageIndex >> count >> paletteGlobalName;}
\DoxyCodeLine{00703   \textcolor{keywordflow}{for} (i = 0; i < count; i++) \{}
\DoxyCodeLine{00704     \textcolor{keywordtype}{int} indexInPage;}
\DoxyCodeLine{00705     in >> indexInPage;}
\DoxyCodeLine{00706     indicesInPage.insert(indexInPage);}
\DoxyCodeLine{00707   \}}
\DoxyCodeLine{00708 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a446ba4a462a2d5f09694d9b178652589}\label{class_t_style_selection_a446ba4a462a2d5f09694d9b178652589}} 
\index{TStyleSelection@{TStyleSelection}!getBackOriginalStyle@{getBackOriginalStyle}}
\index{getBackOriginalStyle@{getBackOriginalStyle}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{getBackOriginalStyle()}{getBackOriginalStyle()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::get\+Back\+Original\+Style (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

get the color from the linked style of the studio palette 
\begin{DoxyCode}{0}
\DoxyCodeLine{01757                                            \{}
\DoxyCodeLine{01758   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = getPalette();}
\DoxyCodeLine{01759   \textcolor{keywordflow}{if} (!palette || m\_pageIndex < 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01760 }
\DoxyCodeLine{01761   \textcolor{keywordflow}{if} (isEmpty() || palette-\/>isLocked()) \textcolor{keywordflow}{return};  \textcolor{comment}{// 110804 iwasawa}}
\DoxyCodeLine{01762 }
\DoxyCodeLine{01763   \textcolor{keywordtype}{int} n = m\_styleIndicesInPage.size();}
\DoxyCodeLine{01764   \textcolor{keywordflow}{if} (n <= 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01765 }
\DoxyCodeLine{01766   \mbox{\hyperlink{class_t_palette_1_1_page}{TPalette::Page}} *page = palette-\/>getPage(m\_pageIndex);}
\DoxyCodeLine{01767   assert(page);}
\DoxyCodeLine{01768 }
\DoxyCodeLine{01769   \textcolor{keywordtype}{bool} somethingChanged = \textcolor{keyword}{false};}
\DoxyCodeLine{01770 }
\DoxyCodeLine{01771   std::map<std::wstring, TPaletteP> table;}
\DoxyCodeLine{01772 }
\DoxyCodeLine{01773   \mbox{\hyperlink{class_t_undo}{TUndo}} *undo = \textcolor{keyword}{new} \mbox{\hyperlink{classget_back_original_style_undo}{getBackOriginalStyleUndo}}(\textcolor{keyword}{this});}
\DoxyCodeLine{01774 }
\DoxyCodeLine{01775   \textcolor{comment}{// for each selected style}}
\DoxyCodeLine{01776   \textcolor{keywordflow}{for} (std::set<int>::iterator it = m\_styleIndicesInPage.begin();}
\DoxyCodeLine{01777        it != m\_styleIndicesInPage.end(); ++it) \{}
\DoxyCodeLine{01778     \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *cs = page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_abe9e434ff44cbe1fde53f32aa7978f9c}{getStyle}}(*it);}
\DoxyCodeLine{01779     assert(cs);}
\DoxyCodeLine{01780     std::wstring gname = cs-\/>\mbox{\hyperlink{class_t_color_style_ad275b1ae7fbbf9b7a0266b799ce53d40}{getGlobalName}}();}
\DoxyCodeLine{01781 }
\DoxyCodeLine{01782     \textcolor{comment}{// if the style has no link}}
\DoxyCodeLine{01783     \textcolor{keywordflow}{if} (gname == L\textcolor{stringliteral}{"{}"{}}) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01784 }
\DoxyCodeLine{01785     \textcolor{comment}{// Find the palette from the table}}
\DoxyCodeLine{01786     \textcolor{keywordtype}{int} k = gname.find\_first\_of(L\textcolor{charliteral}{'-\/'}, 1);}
\DoxyCodeLine{01787     \textcolor{keywordflow}{if} (k == (\textcolor{keywordtype}{int})std::wstring::npos) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01788 }
\DoxyCodeLine{01789     std::wstring paletteId = gname.substr(1, k -\/ 1);}
\DoxyCodeLine{01790 }
\DoxyCodeLine{01791     std::map<std::wstring, TPaletteP>::iterator palIt;}
\DoxyCodeLine{01792     palIt = table.find(paletteId);}
\DoxyCodeLine{01793 }
\DoxyCodeLine{01794     \mbox{\hyperlink{class_t_palette}{TPalette}} *spPalette = 0;}
\DoxyCodeLine{01795 }
\DoxyCodeLine{01796     \textcolor{comment}{// If not found in the table, then search for a new studio palette.}}
\DoxyCodeLine{01797     \textcolor{keywordflow}{if} (palIt == table.end()) \{}
\DoxyCodeLine{01798       spPalette = StudioPalette::instance()-\/>getPalette(paletteId);}
\DoxyCodeLine{01799       \textcolor{keywordflow}{if} (!spPalette) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01800       table[paletteId] = spPalette;}
\DoxyCodeLine{01801       assert(spPalette-\/>getRefCount() == 1);}
\DoxyCodeLine{01802     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01803       spPalette = palIt-\/>second.getPointer();}
\DoxyCodeLine{01804 }
\DoxyCodeLine{01805     \textcolor{comment}{// j is StyleID}}
\DoxyCodeLine{01806     \textcolor{keywordtype}{int} j = std::stoi(gname.substr(k + 1));}
\DoxyCodeLine{01807 }
\DoxyCodeLine{01808     \textcolor{keywordflow}{if} (spPalette \&\& 0 <= j \&\& j < spPalette-\/>getStyleCount()) \{}
\DoxyCodeLine{01809       \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *spStyle = spPalette-\/>\mbox{\hyperlink{class_t_palette_a0f6a4eda7dafb0a9f2b43160cfec81e4}{getStyle}}(j);}
\DoxyCodeLine{01810       assert(spStyle);}
\DoxyCodeLine{01811 }
\DoxyCodeLine{01812       \textcolor{comment}{// edit flag is also copied here}}
\DoxyCodeLine{01813       spStyle = spStyle-\/>\mbox{\hyperlink{class_t_color_style_a7b7e50c731a150aa84f746a261765adf}{clone}}();}
\DoxyCodeLine{01814       spStyle-\/>\mbox{\hyperlink{class_t_color_style_af6a3579e3785b9addcf434574bc89367}{setGlobalName}}(gname);}
\DoxyCodeLine{01815 }
\DoxyCodeLine{01816       \textcolor{comment}{// get the original name from the studio palette}}
\DoxyCodeLine{01817       spStyle-\/>\mbox{\hyperlink{class_t_color_style_a22061dd49a8282e8af93840441998532}{setOriginalName}}(spStyle-\/>\mbox{\hyperlink{class_t_color_style_a611de20d126c5838456f9113b4682c4f}{getName}}());}
\DoxyCodeLine{01818       \textcolor{comment}{// do not change the style name}}
\DoxyCodeLine{01819       spStyle-\/>\mbox{\hyperlink{class_t_color_style_aeb25e0ae1708d473bd551b0d0c9bf4a9}{setName}}(cs-\/>\mbox{\hyperlink{class_t_color_style_a611de20d126c5838456f9113b4682c4f}{getName}}());}
\DoxyCodeLine{01820 }
\DoxyCodeLine{01821       palette-\/>setStyle(page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_a3d6eed995ee8b1c22d50a73911a45786}{getStyleId}}(*it), spStyle);}
\DoxyCodeLine{01822 }
\DoxyCodeLine{01823       somethingChanged = \textcolor{keyword}{true};}
\DoxyCodeLine{01824     \}}
\DoxyCodeLine{01825   \}}
\DoxyCodeLine{01826 }
\DoxyCodeLine{01827   \textcolor{keywordflow}{if} (somethingChanged) \{}
\DoxyCodeLine{01828     palette-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{01829     TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{01830 }
\DoxyCodeLine{01831     m\_paletteHandle-\/>notifyColorStyleChanged(\textcolor{keyword}{false});}
\DoxyCodeLine{01832     m\_paletteHandle-\/>notifyColorStyleSwitched();}
\DoxyCodeLine{01833   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01834     \textcolor{keyword}{delete} undo;}
\DoxyCodeLine{01835 \}}

\end{DoxyCode}


References \mbox{\hyperlink{class_t_color_style_a7b7e50c731a150aa84f746a261765adf}{TColor\+Style\+::clone()}}, \mbox{\hyperlink{l00200}{TColor\+Style\+::get\+Global\+Name()}}, \mbox{\hyperlink{l00190}{TColor\+Style\+::get\+Name()}}, \mbox{\hyperlink{l00122}{TPalette\+::\+Page\+::get\+Style()}}, \mbox{\hyperlink{l00283}{TPalette\+::get\+Style()}}, \mbox{\hyperlink{l00132}{TPalette\+::\+Page\+::get\+Style\+Id()}}, \mbox{\hyperlink{l00197}{TColor\+Style\+::set\+Global\+Name()}}, \mbox{\hyperlink{l00187}{TColor\+Style\+::set\+Name()}}, and \mbox{\hyperlink{l00204}{TColor\+Style\+::set\+Original\+Name()}}.

\mbox{\Hypertarget{class_t_style_selection_a727b2bc31661bdb62b44ce9122f9084a}\label{class_t_style_selection_a727b2bc31661bdb62b44ce9122f9084a}} 
\index{TStyleSelection@{TStyleSelection}!getIndicesInPage@{getIndicesInPage}}
\index{getIndicesInPage@{getIndicesInPage}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{getIndicesInPage()}{getIndicesInPage()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily const std\+::set$<$ int $>$ \& TStyle\+Selection\+::get\+Indices\+In\+Page (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00065 \{ \textcolor{keywordflow}{return} m\_styleIndicesInPage; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a727b2bc31661bdb62b44ce9122f9084a}\label{class_t_style_selection_a727b2bc31661bdb62b44ce9122f9084a}} 
\index{TStyleSelection@{TStyleSelection}!getIndicesInPage@{getIndicesInPage}}
\index{getIndicesInPage@{getIndicesInPage}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{getIndicesInPage()}{getIndicesInPage()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily const std\+::set$<$ int $>$ \& TStyle\+Selection\+::get\+Indices\+In\+Page (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00041 \{ \textcolor{keywordflow}{return} m\_styleIndicesInPage; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_adc272407db8145934781819be520f9a7}\label{class_t_style_selection_adc272407db8145934781819be520f9a7}} 
\index{TStyleSelection@{TStyleSelection}!getMimeType@{getMimeType}}
\index{getMimeType@{getMimeType}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{getMimeType()}{getMimeType()}}
{\footnotesize\ttfamily const char $\ast$ TStyle\+Selection\+::get\+Mime\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00720                                          \{}
\DoxyCodeLine{00721   \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}application/vnd.toonz.style"{}};}
\DoxyCodeLine{00722 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a0dfb9ba479b7f46e0fd7a0e764409136}\label{class_t_style_selection_a0dfb9ba479b7f46e0fd7a0e764409136}} 
\index{TStyleSelection@{TStyleSelection}!getPageIndex@{getPageIndex}}
\index{getPageIndex@{getPageIndex}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{getPageIndex()}{getPageIndex()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily int TStyle\+Selection\+::get\+Page\+Index (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00064 \{ \textcolor{keywordflow}{return} m\_pageIndex; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a0dfb9ba479b7f46e0fd7a0e764409136}\label{class_t_style_selection_a0dfb9ba479b7f46e0fd7a0e764409136}} 
\index{TStyleSelection@{TStyleSelection}!getPageIndex@{getPageIndex}}
\index{getPageIndex@{getPageIndex}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{getPageIndex()}{getPageIndex()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily int TStyle\+Selection\+::get\+Page\+Index (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00040 \{ \textcolor{keywordflow}{return} m\_pageIndex; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a6b264b269628316c717db17e604da5e3}\label{class_t_style_selection_a6b264b269628316c717db17e604da5e3}} 
\index{TStyleSelection@{TStyleSelection}!getPalette@{getPalette}}
\index{getPalette@{getPalette}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{getPalette()}{getPalette()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$ TStyle\+Selection\+::get\+Palette (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00063 \{ \textcolor{keywordflow}{return} m\_paletteHandle-\/>getPalette(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a748577acdecb0e54e3e926700a75701d}\label{class_t_style_selection_a748577acdecb0e54e3e926700a75701d}} 
\index{TStyleSelection@{TStyleSelection}!getPalette@{getPalette}}
\index{getPalette@{getPalette}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{getPalette()}{getPalette()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} \& TStyle\+Selection\+::get\+Palette (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00039 \{ \textcolor{keywordflow}{return} m\_palette; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a336c1beea5d85b108dcddad71469f487}\label{class_t_style_selection_a336c1beea5d85b108dcddad71469f487}} 
\index{TStyleSelection@{TStyleSelection}!getPaletteHandle@{getPaletteHandle}}
\index{getPaletteHandle@{getPaletteHandle}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{getPaletteHandle()}{getPaletteHandle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$ TStyle\+Selection\+::get\+Palette\+Handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00059 \{ \textcolor{keywordflow}{return} m\_paletteHandle; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a522185becff95e8cbf07152a19b6fc76}\label{class_t_style_selection_a522185becff95e8cbf07152a19b6fc76}} 
\index{TStyleSelection@{TStyleSelection}!getStyleCount@{getStyleCount}}
\index{getStyleCount@{getStyleCount}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{getStyleCount()}{getStyleCount()}}
{\footnotesize\ttfamily int TStyle\+Selection\+::get\+Style\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00350                                          \{}
\DoxyCodeLine{00351   \textcolor{keywordflow}{return} m\_styleIndicesInPage.size();}
\DoxyCodeLine{00352 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a98d3b916a748a07c8c919d09839bec61}\label{class_t_style_selection_a98d3b916a748a07c8c919d09839bec61}} 
\index{TStyleSelection@{TStyleSelection}!getXsheetHandle@{getXsheetHandle}}
\index{getXsheetHandle@{getXsheetHandle}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{getXsheetHandle()}{getXsheetHandle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_xsheet_handle}{TXsheet\+Handle}} $\ast$ TStyle\+Selection\+::get\+Xsheet\+Handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00074 \{ \textcolor{keywordflow}{return} m\_xsheetHandle; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_ac1bfbf9626d93d27e910814fdde8b612}\label{class_t_style_selection_ac1bfbf9626d93d27e910814fdde8b612}} 
\index{TStyleSelection@{TStyleSelection}!hasLinkedStyle@{hasLinkedStyle}}
\index{hasLinkedStyle@{hasLinkedStyle}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{hasLinkedStyle()}{hasLinkedStyle()}}
{\footnotesize\ttfamily bool TStyle\+Selection\+::has\+Linked\+Style (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

return true if there is at least one linked style in the selection 
\begin{DoxyCode}{0}
\DoxyCodeLine{01841                                      \{}
\DoxyCodeLine{01842   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = getPalette();}
\DoxyCodeLine{01843   \textcolor{keywordflow}{if} (!palette || m\_pageIndex < 0 || isEmpty()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01844   \textcolor{keywordflow}{if} (m\_styleIndicesInPage.size() <= 0) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01845 }
\DoxyCodeLine{01846   \mbox{\hyperlink{class_t_palette_1_1_page}{TPalette::Page}} *page = palette-\/>getPage(m\_pageIndex);}
\DoxyCodeLine{01847   assert(page);}
\DoxyCodeLine{01848 }
\DoxyCodeLine{01849   \textcolor{comment}{// for each selected style}}
\DoxyCodeLine{01850   \textcolor{keywordflow}{for} (std::set<int>::iterator it = m\_styleIndicesInPage.begin();}
\DoxyCodeLine{01851        it != m\_styleIndicesInPage.end(); ++it) \{}
\DoxyCodeLine{01852     \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *cs    = page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_abe9e434ff44cbe1fde53f32aa7978f9c}{getStyle}}(*it);}
\DoxyCodeLine{01853     std::wstring gname = cs-\/>\mbox{\hyperlink{class_t_color_style_ad275b1ae7fbbf9b7a0266b799ce53d40}{getGlobalName}}();}
\DoxyCodeLine{01854     \textcolor{comment}{// if the style has link, return true}}
\DoxyCodeLine{01855     \textcolor{keywordflow}{if} (gname != L\textcolor{stringliteral}{"{}"{}} \&\& (gname[0] == L\textcolor{charliteral}{'-\/'} || gname[0] == L\textcolor{charliteral}{'+'})) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{01856   \}}
\DoxyCodeLine{01857   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{01858 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00200}{TColor\+Style\+::get\+Global\+Name()}}, and \mbox{\hyperlink{l00122}{TPalette\+::\+Page\+::get\+Style()}}.



Referenced by \mbox{\hyperlink{l01121}{Palette\+Viewer\+GUI\+::\+Page\+Viewer\+::context\+Menu\+Event()}}.

\mbox{\Hypertarget{class_t_style_selection_acb80ea4dcd49f96ccc6d6fb195a9ca06}\label{class_t_style_selection_acb80ea4dcd49f96ccc6d6fb195a9ca06}} 
\index{TStyleSelection@{TStyleSelection}!isEmpty@{isEmpty}}
\index{isEmpty@{isEmpty}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{isEmpty()}{isEmpty()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily bool TStyle\+Selection\+::is\+Empty (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_selection}{TSelection}}.

\mbox{\Hypertarget{class_t_style_selection_a5b0506099a6c39587b6be8aeba7e9a90}\label{class_t_style_selection_a5b0506099a6c39587b6be8aeba7e9a90}} 
\index{TStyleSelection@{TStyleSelection}!isEmpty@{isEmpty}}
\index{isEmpty@{isEmpty}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{isEmpty()}{isEmpty()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily bool TStyle\+Selection\+::is\+Empty (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_selection}{TSelection}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00344                                     \{}
\DoxyCodeLine{00345   \textcolor{keywordflow}{return} m\_pageIndex < 0 \&\& m\_styleIndicesInPage.empty();}
\DoxyCodeLine{00346 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a486981abe89abb0c4148c4c8971f113b}\label{class_t_style_selection_a486981abe89abb0c4148c4c8971f113b}} 
\index{TStyleSelection@{TStyleSelection}!isPageSelected@{isPageSelected}}
\index{isPageSelected@{isPageSelected}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{isPageSelected()}{isPageSelected()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily bool TStyle\+Selection\+::is\+Page\+Selected (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} \&}]{palette,  }\item[{int}]{page\+Index }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00330                                                           \{}
\DoxyCodeLine{00331   \textcolor{keywordflow}{return} m\_palette.getPointer() == palette.getPointer() \&\&}
\DoxyCodeLine{00332          m\_pageIndex == pageIndex;}
\DoxyCodeLine{00333 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a30c4f2fa9c729f7b688cec7edfc92473}\label{class_t_style_selection_a30c4f2fa9c729f7b688cec7edfc92473}} 
\index{TStyleSelection@{TStyleSelection}!isPageSelected@{isPageSelected}}
\index{isPageSelected@{isPageSelected}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{isPageSelected()}{isPageSelected()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily bool TStyle\+Selection\+::is\+Page\+Selected (\begin{DoxyParamCaption}\item[{int}]{page\+Index }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00544                                                         \{}
\DoxyCodeLine{00545   \textcolor{keywordflow}{return} m\_pageIndex == pageIndex;}
\DoxyCodeLine{00546 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a51ab630bb626ee89075e89011f3ef616}\label{class_t_style_selection_a51ab630bb626ee89075e89011f3ef616}} 
\index{TStyleSelection@{TStyleSelection}!isSelected@{isSelected}}
\index{isSelected@{isSelected}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{isSelected()}{isSelected()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily bool TStyle\+Selection\+::is\+Selected (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} \&}]{palette,  }\item[{int}]{page\+Index,  }\item[{int}]{style\+Index\+In\+Page }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00321                                                \{}
\DoxyCodeLine{00322   \textcolor{keywordflow}{return} m\_palette.getPointer() == palette.getPointer() \&\&}
\DoxyCodeLine{00323          m\_pageIndex == pageIndex \&\&}
\DoxyCodeLine{00324          m\_styleIndicesInPage.find(\textcolor{keywordtype}{id}) != m\_styleIndicesInPage.end();}
\DoxyCodeLine{00325 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a0148ba0614080b79301b02432c70b405}\label{class_t_style_selection_a0148ba0614080b79301b02432c70b405}} 
\index{TStyleSelection@{TStyleSelection}!isSelected@{isSelected}}
\index{isSelected@{isSelected}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{isSelected()}{isSelected()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily bool TStyle\+Selection\+::is\+Selected (\begin{DoxyParamCaption}\item[{int}]{page\+Index,  }\item[{int}]{style\+Index\+In\+Page }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00537                                                             \{}
\DoxyCodeLine{00538   \textcolor{keywordflow}{return} m\_pageIndex == pageIndex \&\&}
\DoxyCodeLine{00539          m\_styleIndicesInPage.find(\textcolor{keywordtype}{id}) != m\_styleIndicesInPage.end();}
\DoxyCodeLine{00540 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a63a27480d0f433271972237fc979416f}\label{class_t_style_selection_a63a27480d0f433271972237fc979416f}} 
\index{TStyleSelection@{TStyleSelection}!pasteStyles@{pasteStyles}}
\index{pasteStyles@{pasteStyles}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{pasteStyles()}{pasteStyles()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::paste\+Styles (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00385                                   \{}
\DoxyCodeLine{00386   \textcolor{comment}{// se non c'e' palette o pagina corrente esco}}
\DoxyCodeLine{00387   \textcolor{keywordflow}{if} (!m\_palette || m\_pageIndex < 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00388 }
\DoxyCodeLine{00389   \textcolor{keywordflow}{if} (m\_pageIndex == 0 \&\& !m\_styleIndicesInPage.empty() \&\&}
\DoxyCodeLine{00390       *m\_styleIndicesInPage.begin() < 2) \{}
\DoxyCodeLine{00391     MsgBox(CRITICAL, \textcolor{stringliteral}{"{}Can't paste styles there"{}});}
\DoxyCodeLine{00392     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00393   \}}
\DoxyCodeLine{00394 }
\DoxyCodeLine{00395   pasteStylesWithoutUndo(m\_palette, m\_pageIndex, \&m\_styleIndicesInPage);}
\DoxyCodeLine{00396   TUndoManager::manager()-\/>add(\textcolor{keyword}{new} PasteStylesUndo(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_style_selection}{TStyleSelection}}(\textcolor{keyword}{this})));}
\DoxyCodeLine{00397 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_afb181238a62515853f741799b15ba28b}\label{class_t_style_selection_afb181238a62515853f741799b15ba28b}} 
\index{TStyleSelection@{TStyleSelection}!pasteStylesColor@{pasteStylesColor}}
\index{pasteStylesColor@{pasteStylesColor}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{pasteStylesColor()}{pasteStylesColor()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::paste\+Styles\+Color (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01231 \{ pasteStylesValues(\textcolor{keyword}{false}, \textcolor{keyword}{true}); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a34edd25042fde1b97b0cd0d96d5d13b3}\label{class_t_style_selection_a34edd25042fde1b97b0cd0d96d5d13b3}} 
\index{TStyleSelection@{TStyleSelection}!pasteStylesName@{pasteStylesName}}
\index{pasteStylesName@{pasteStylesName}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{pasteStylesName()}{pasteStylesName()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::paste\+Styles\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01235 \{ pasteStylesValues(\textcolor{keyword}{true}, \textcolor{keyword}{false}); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a82d691d274812792c92472fcb89e9c3a}\label{class_t_style_selection_a82d691d274812792c92472fcb89e9c3a}} 
\index{TStyleSelection@{TStyleSelection}!pasteStylesValue@{pasteStylesValue}}
\index{pasteStylesValue@{pasteStylesValue}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{pasteStylesValue()}{pasteStylesValue()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::paste\+Styles\+Value (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00494                                        \{}
\DoxyCodeLine{00495   \textcolor{keywordflow}{if} (!m\_palette || m\_pageIndex < 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00496   \textcolor{keywordflow}{if} (m\_pageIndex == 0 \&\& isSelected(m\_palette, 0, 0)) \{}
\DoxyCodeLine{00497     MsgBox(CRITICAL, \textcolor{stringliteral}{"{}Can't modify color \#0"{}});}
\DoxyCodeLine{00498     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00499   \}}
\DoxyCodeLine{00500 }
\DoxyCodeLine{00501   \mbox{\hyperlink{class_t_palette_1_1_page}{TPalette::Page}} *page = m\_palette-\/>\mbox{\hyperlink{class_t_palette_a25f83b7baf3eb774e50c726fa702056c}{getPage}}(m\_pageIndex);}
\DoxyCodeLine{00502   assert(page);}
\DoxyCodeLine{00503   \textcolor{keyword}{const} \mbox{\hyperlink{class_style_data}{StyleData}} *data =}
\DoxyCodeLine{00504       \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_style_data}{StyleData}} *\textcolor{keyword}{>}(QApplication::clipboard()-\/>mimeData());}
\DoxyCodeLine{00505   \textcolor{keywordflow}{if} (!data) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00506   \textcolor{keywordtype}{int} i                 = 0;}
\DoxyCodeLine{00507   UndoPasteValues *undo = \textcolor{keyword}{new} UndoPasteValues(m\_palette);}
\DoxyCodeLine{00508   std::set<int>::iterator it;}
\DoxyCodeLine{00509   \textcolor{keywordflow}{for} (it = m\_styleIndicesInPage.begin();}
\DoxyCodeLine{00510        it != m\_styleIndicesInPage.end() \&\& i < data-\/>getStyleCount();}
\DoxyCodeLine{00511        ++it, i++) \{}
\DoxyCodeLine{00512     \textcolor{keywordtype}{int} styleId = page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_a3d6eed995ee8b1c22d50a73911a45786}{getStyleId}}(*it);}
\DoxyCodeLine{00513     undo-\/>addItem(styleId, m\_palette-\/>\mbox{\hyperlink{class_t_palette_a0f6a4eda7dafb0a9f2b43160cfec81e4}{getStyle}}(styleId), data-\/>getStyle(i));}
\DoxyCodeLine{00514     m\_palette-\/>\mbox{\hyperlink{class_t_palette_ab9369e7992a6db74a33b7e5094071121}{setStyle}}(styleId, data-\/>getStyle(i)-\/>\mbox{\hyperlink{class_t_color_style_a7b7e50c731a150aa84f746a261765adf}{clone}}());}
\DoxyCodeLine{00515   \}}
\DoxyCodeLine{00516   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{00517 }
\DoxyCodeLine{00518   \mbox{\hyperlink{class_t_palette_handle}{TPaletteHandle}} *ph = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a33dbcbc578915e0b69fe6927b74cf426}{getCurrentPalette}}();}
\DoxyCodeLine{00519   ph-\/>notifyColorStyleChanged();}
\DoxyCodeLine{00520   ph-\/>updateColor();}
\DoxyCodeLine{00521 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a7e3bbca98b294abdac7c67577fcb7b6a}\label{class_t_style_selection_a7e3bbca98b294abdac7c67577fcb7b6a}} 
\index{TStyleSelection@{TStyleSelection}!pasteStylesValues@{pasteStylesValues}}
\index{pasteStylesValues@{pasteStylesValues}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{pasteStylesValues()}{pasteStylesValues()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::paste\+Styles\+Values (\begin{DoxyParamCaption}\item[{bool}]{paste\+Name,  }\item[{bool}]{paste\+Color = {\ttfamily true} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01050                                                                        \{}
\DoxyCodeLine{01051   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = getPalette();}
\DoxyCodeLine{01052   \textcolor{keywordflow}{if} (!palette || m\_pageIndex < 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01053   \textcolor{keywordflow}{if} (palette-\/>isLocked()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01054   \mbox{\hyperlink{class_t_palette_1_1_page}{TPalette::Page}} *page = palette-\/>getPage(m\_pageIndex);}
\DoxyCodeLine{01055   \textcolor{keywordflow}{if} (!page) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01056   \textcolor{keywordflow}{if} (isSelected(m\_pageIndex, 0) \&\& page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_a3d6eed995ee8b1c22d50a73911a45786}{getStyleId}}(0) == 0) \{}
\DoxyCodeLine{01057     error(QObject::tr(\textcolor{stringliteral}{"{}Can't modify color \#0"{}}));}
\DoxyCodeLine{01058     \textcolor{keywordflow}{return};}
\DoxyCodeLine{01059   \}}
\DoxyCodeLine{01060 }
\DoxyCodeLine{01061   \textcolor{keyword}{const} \mbox{\hyperlink{class_style_data}{StyleData}} *data =}
\DoxyCodeLine{01062       \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{class_style_data}{StyleData}} *\textcolor{keyword}{>}(QApplication::clipboard()-\/>mimeData());}
\DoxyCodeLine{01063   \textcolor{keywordflow}{if} (!data) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01064 }
\DoxyCodeLine{01065   \textcolor{keywordtype}{int} dataStyleCount = data-\/>getStyleCount();}
\DoxyCodeLine{01066   \textcolor{keywordflow}{if} (dataStyleCount > (\textcolor{keywordtype}{int})m\_styleIndicesInPage.size()) \{}
\DoxyCodeLine{01067     QString question = QObject::tr(}
\DoxyCodeLine{01068         \textcolor{stringliteral}{"{}There are more cut/copied styles than selected. Paste anyway (adding "{}}}
\DoxyCodeLine{01069         \textcolor{stringliteral}{"{}styles)?"{}});}
\DoxyCodeLine{01070     \textcolor{keywordtype}{int} ret =}
\DoxyCodeLine{01071         DVGui::MsgBox(question, QObject::tr(\textcolor{stringliteral}{"{}Paste"{}}), QObject::tr(\textcolor{stringliteral}{"{}Cancel"{}}), 0);}
\DoxyCodeLine{01072     \textcolor{keywordflow}{if} (ret == 2 || ret == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01073   \}}
\DoxyCodeLine{01074   \textcolor{keywordtype}{int} i                 = 0;}
\DoxyCodeLine{01075   UndoPasteValues *undo = \textcolor{keyword}{new} UndoPasteValues(\textcolor{keyword}{this}, pasteName, pasteColor);}
\DoxyCodeLine{01076   std::set<int>::iterator it;}
\DoxyCodeLine{01077   \textcolor{keywordtype}{int} indexInPage = 0;}
\DoxyCodeLine{01078   \textcolor{keywordflow}{for} (it = m\_styleIndicesInPage.begin();}
\DoxyCodeLine{01079        it != m\_styleIndicesInPage.end() \&\& i < data-\/>getStyleCount();}
\DoxyCodeLine{01080        ++it, i++) \{}
\DoxyCodeLine{01081     \textcolor{keywordflow}{if} (page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_ae6d6b899ee10f5b3900081acd882f8ee}{getStyleCount}}() < i) \textcolor{keywordflow}{break};}
\DoxyCodeLine{01082     indexInPage = *it;}
\DoxyCodeLine{01083     \textcolor{keywordtype}{int} styleId = page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_a3d6eed995ee8b1c22d50a73911a45786}{getStyleId}}(indexInPage);}
\DoxyCodeLine{01084     undo-\/>addItem(indexInPage, palette-\/>getStyle(styleId), data-\/>getStyle(i));}
\DoxyCodeLine{01085     \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *colorStyle = page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_abe9e434ff44cbe1fde53f32aa7978f9c}{getStyle}}(indexInPage);}
\DoxyCodeLine{01086     std::wstring styleName  = colorStyle-\/>\mbox{\hyperlink{class_t_color_style_a611de20d126c5838456f9113b4682c4f}{getName}}();}
\DoxyCodeLine{01087     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} flags      = colorStyle-\/>\mbox{\hyperlink{class_t_color_style_aa91dc1e9c6827df92c7f56a61c9c6b39}{getFlags}}();}
\DoxyCodeLine{01088 }
\DoxyCodeLine{01089     \textcolor{keywordflow}{if} (pasteColor) \{}
\DoxyCodeLine{01090       \textcolor{comment}{// first, check out the types of copied and pasted styles}}
\DoxyCodeLine{01091       StyleType srcType, dstType;}
\DoxyCodeLine{01092       \textcolor{comment}{// copied (source)}}
\DoxyCodeLine{01093       \textcolor{keywordflow}{if} (data-\/>getStyle(i)-\/>\mbox{\hyperlink{class_t_color_style_ad275b1ae7fbbf9b7a0266b799ce53d40}{getGlobalName}}() == L\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{01094         srcType = NORMALSTYLE;}
\DoxyCodeLine{01095       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (data-\/>getStyle(i)-\/>\mbox{\hyperlink{class_t_color_style_a9bbfc9d628f549c134e6593ea9d6b42e}{getOriginalName}}() == L\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{01096         srcType = STUDIOSTYLE;}
\DoxyCodeLine{01097       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01098         srcType = LINKEDSTYLE;}
\DoxyCodeLine{01099       \textcolor{comment}{// pasted (destination)}}
\DoxyCodeLine{01100       \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *dstStyle        = page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_abe9e434ff44cbe1fde53f32aa7978f9c}{getStyle}}(indexInPage);}
\DoxyCodeLine{01101       std::wstring dstGlobalName   = dstStyle-\/>\mbox{\hyperlink{class_t_color_style_ad275b1ae7fbbf9b7a0266b799ce53d40}{getGlobalName}}();}
\DoxyCodeLine{01102       std::wstring dstOriginalName = dstStyle-\/>\mbox{\hyperlink{class_t_color_style_a9bbfc9d628f549c134e6593ea9d6b42e}{getOriginalName}}();}
\DoxyCodeLine{01103       \textcolor{keywordflow}{if} (dstGlobalName == L\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{01104         dstType = NORMALSTYLE;}
\DoxyCodeLine{01105       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dstOriginalName == L\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{01106         dstType = STUDIOSTYLE;}
\DoxyCodeLine{01107       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01108         dstType = LINKEDSTYLE;}
\DoxyCodeLine{01109 }
\DoxyCodeLine{01110       \textcolor{comment}{// For cleanup styles, do not duplicate the cleanup information. Just}}
\DoxyCodeLine{01111       \textcolor{comment}{// paste color information.}}
\DoxyCodeLine{01112       \mbox{\hyperlink{class_t_cleanup_style}{TCleanupStyle}} *cleanupStyle =}
\DoxyCodeLine{01113           \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_cleanup_style}{TCleanupStyle}} *\textcolor{keyword}{>}(data-\/>getStyle(i));}
\DoxyCodeLine{01114       \textcolor{keywordflow}{if} (cleanupStyle \&\& !palette-\/>isCleanupPalette())}
\DoxyCodeLine{01115         palette-\/>setStyle(styleId, cleanupStyle-\/>\mbox{\hyperlink{class_t_solid_color_style_a99ea32bd112b325f3c94ab0e09552b6a}{getMainColor}}());}
\DoxyCodeLine{01116       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01117         palette-\/>setStyle(styleId, data-\/>getStyle(i)-\/>\mbox{\hyperlink{class_t_color_style_a7b7e50c731a150aa84f746a261765adf}{clone}}());}
\DoxyCodeLine{01118 }
\DoxyCodeLine{01119       \textcolor{comment}{// Process the global and original names according to the pasted style}}
\DoxyCodeLine{01120       \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *pastedStyle = getPalette()-\/>\mbox{\hyperlink{class_t_palette_a0f6a4eda7dafb0a9f2b43160cfec81e4}{getStyle}}(styleId);}
\DoxyCodeLine{01121 }
\DoxyCodeLine{01122       \textcolor{comment}{// If paste color and name are both ON, then paste the link information.}}
\DoxyCodeLine{01123       \textcolor{keywordflow}{if} (pasteName) \{}
\DoxyCodeLine{01124         \textcolor{keywordflow}{if} (srcType == NORMALSTYLE) \{}
\DoxyCodeLine{01125           \textcolor{keywordflow}{if} (dstType == NORMALSTYLE) \{}
\DoxyCodeLine{01126           \}  \textcolor{comment}{// 1. From normal to normal. Do nothing.}}
\DoxyCodeLine{01127           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dstType == STUDIOSTYLE)  \textcolor{comment}{// 2. From normal to studio. Restore}}
\DoxyCodeLine{01128                                             \textcolor{comment}{// the global name}}
\DoxyCodeLine{01129             pastedStyle-\/>\mbox{\hyperlink{class_t_color_style_af6a3579e3785b9addcf434574bc89367}{setGlobalName}}(dstGlobalName);}
\DoxyCodeLine{01130           \textcolor{keywordflow}{else}  \textcolor{comment}{// dstType == LINKEDSTYLE       //3. From normal to}}
\DoxyCodeLine{01131                 \textcolor{comment}{// linked. Restore both the global and the original name.}}
\DoxyCodeLine{01132                 \textcolor{comment}{// Activate the edited flag.}}
\DoxyCodeLine{01133           \{}
\DoxyCodeLine{01134             pastedStyle-\/>\mbox{\hyperlink{class_t_color_style_af6a3579e3785b9addcf434574bc89367}{setGlobalName}}(dstGlobalName);}
\DoxyCodeLine{01135             pastedStyle-\/>\mbox{\hyperlink{class_t_color_style_a22061dd49a8282e8af93840441998532}{setOriginalName}}(dstOriginalName);}
\DoxyCodeLine{01136             pastedStyle-\/>setIsEditedFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{01137           \}}
\DoxyCodeLine{01138         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (srcType == STUDIOSTYLE) \{}
\DoxyCodeLine{01139           \textcolor{keywordflow}{if} (dstType ==}
\DoxyCodeLine{01140               NORMALSTYLE)  \textcolor{comment}{// 4. From studio to normal. Set the studio}}
\DoxyCodeLine{01141                             \textcolor{comment}{// style's name to the original name.}}
\DoxyCodeLine{01142             pastedStyle-\/>\mbox{\hyperlink{class_t_color_style_a22061dd49a8282e8af93840441998532}{setOriginalName}}(data-\/>getStyle(i)-\/>\mbox{\hyperlink{class_t_color_style_a611de20d126c5838456f9113b4682c4f}{getName}}());}
\DoxyCodeLine{01143           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dstType == STUDIOSTYLE)  \textcolor{comment}{// 5. From studio to studio. Restore}}
\DoxyCodeLine{01144                                             \textcolor{comment}{// the global name.}}
\DoxyCodeLine{01145             pastedStyle-\/>\mbox{\hyperlink{class_t_color_style_af6a3579e3785b9addcf434574bc89367}{setGlobalName}}(dstGlobalName);}
\DoxyCodeLine{01146           \textcolor{keywordflow}{else}  \textcolor{comment}{// dstType == LINKEDSTYLE       //6. From studio to}}
\DoxyCodeLine{01147                 \textcolor{comment}{// linked. Set the studio style's name to the original name, and}}
\DoxyCodeLine{01148                 \textcolor{comment}{// set the edited flag to off.}}
\DoxyCodeLine{01149           \{}
\DoxyCodeLine{01150             pastedStyle-\/>\mbox{\hyperlink{class_t_color_style_a22061dd49a8282e8af93840441998532}{setOriginalName}}(data-\/>getStyle(i)-\/>\mbox{\hyperlink{class_t_color_style_a611de20d126c5838456f9113b4682c4f}{getName}}());}
\DoxyCodeLine{01151             pastedStyle-\/>setIsEditedFlag(\textcolor{keyword}{false});}
\DoxyCodeLine{01152           \}}
\DoxyCodeLine{01153         \} \textcolor{keywordflow}{else}  \textcolor{comment}{// srcType == LINKEDSTYLE}}
\DoxyCodeLine{01154         \{}
\DoxyCodeLine{01155           \textcolor{keywordflow}{if} (dstType == NORMALSTYLE) \{}
\DoxyCodeLine{01156           \}  \textcolor{comment}{// 7. From linked to normal. Do nothing.}}
\DoxyCodeLine{01157           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dstType == STUDIOSTYLE)  \textcolor{comment}{// 8. From linked to studio. Restore}}
\DoxyCodeLine{01158                                             \textcolor{comment}{// the global name. Delete the}}
\DoxyCodeLine{01159                                             \textcolor{comment}{// original name. Set the edited}}
\DoxyCodeLine{01160                                             \textcolor{comment}{// flag to off.}}
\DoxyCodeLine{01161           \{}
\DoxyCodeLine{01162             pastedStyle-\/>\mbox{\hyperlink{class_t_color_style_af6a3579e3785b9addcf434574bc89367}{setGlobalName}}(dstGlobalName);}
\DoxyCodeLine{01163             pastedStyle-\/>\mbox{\hyperlink{class_t_color_style_a22061dd49a8282e8af93840441998532}{setOriginalName}}(L\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01164             pastedStyle-\/>setIsEditedFlag(\textcolor{keyword}{false});}
\DoxyCodeLine{01165           \} \textcolor{keywordflow}{else}  \textcolor{comment}{// dstType == LINKEDSTYLE     //9. From linked to}}
\DoxyCodeLine{01166                   \textcolor{comment}{// linked.}}
\DoxyCodeLine{01167                   \textcolor{comment}{// Do nothing (bring all information from the original).}}
\DoxyCodeLine{01168           \{}
\DoxyCodeLine{01169           \}}
\DoxyCodeLine{01170         \}}
\DoxyCodeLine{01171       \}}
\DoxyCodeLine{01172       \textcolor{comment}{// If paste color is ON and paste name is OFF, then revert the link}}
\DoxyCodeLine{01173       \textcolor{comment}{// information (i.e. "{}paste color"{} will paste color info only).}}
\DoxyCodeLine{01174       \textcolor{keywordflow}{else} \{  \textcolor{comment}{// !pasteName}}
\DoxyCodeLine{01175         pastedStyle-\/>\mbox{\hyperlink{class_t_color_style_af6a3579e3785b9addcf434574bc89367}{setGlobalName}}(dstGlobalName);}
\DoxyCodeLine{01176         pastedStyle-\/>\mbox{\hyperlink{class_t_color_style_a22061dd49a8282e8af93840441998532}{setOriginalName}}(dstOriginalName);}
\DoxyCodeLine{01177         pastedStyle-\/>setIsEditedFlag(dstType == LINKEDSTYLE);}
\DoxyCodeLine{01178 }
\DoxyCodeLine{01179         \textcolor{comment}{// put back the name}}
\DoxyCodeLine{01180         page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_abe9e434ff44cbe1fde53f32aa7978f9c}{getStyle}}(indexInPage)-\/>\mbox{\hyperlink{class_t_color_style_aeb25e0ae1708d473bd551b0d0c9bf4a9}{setName}}(styleName);}
\DoxyCodeLine{01181         page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_abe9e434ff44cbe1fde53f32aa7978f9c}{getStyle}}(indexInPage)-\/>\mbox{\hyperlink{class_t_color_style_a5e9cf585973f17917b19d9c031f9a251}{setFlags}}(flags);}
\DoxyCodeLine{01182       \}}
\DoxyCodeLine{01183     \}}
\DoxyCodeLine{01184     \textcolor{comment}{// when "{}paste name"{}}}
\DoxyCodeLine{01185     \textcolor{keywordflow}{if} (pasteName)}
\DoxyCodeLine{01186       page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_abe9e434ff44cbe1fde53f32aa7978f9c}{getStyle}}(indexInPage)-\/>\mbox{\hyperlink{class_t_color_style_aeb25e0ae1708d473bd551b0d0c9bf4a9}{setName}}(data-\/>getStyle(i)-\/>\mbox{\hyperlink{class_t_color_style_a611de20d126c5838456f9113b4682c4f}{getName}}());}
\DoxyCodeLine{01187   \}}
\DoxyCodeLine{01188 }
\DoxyCodeLine{01189   \textcolor{comment}{// If the styles of the data are more than those selected, make a paste of the}}
\DoxyCodeLine{01190   \textcolor{comment}{// styles that remain, inserting the new styles after indexInPage}}
\DoxyCodeLine{01191   \textcolor{keywordflow}{if} (i < dataStyleCount) \{}
\DoxyCodeLine{01192     \mbox{\hyperlink{class_style_data}{StyleData}} *newData = \textcolor{keyword}{new} \mbox{\hyperlink{class_style_data}{StyleData}}();}
\DoxyCodeLine{01193     \textcolor{keywordtype}{int} j;}
\DoxyCodeLine{01194     \textcolor{keywordflow}{for} (j = i; j < dataStyleCount; j++)}
\DoxyCodeLine{01195       newData-\/>addStyle(data-\/>getStyleIndex(j), data-\/>getStyle(j)-\/>\mbox{\hyperlink{class_t_color_style_a7b7e50c731a150aa84f746a261765adf}{clone}}());}
\DoxyCodeLine{01196 }
\DoxyCodeLine{01197     std::set<int> styleIndicesInPage;}
\DoxyCodeLine{01198     pasteStylesDataWithoutUndo(m\_paletteHandle-\/>getPalette(), m\_paletteHandle,}
\DoxyCodeLine{01199                                newData, indexInPage + 1, m\_pageIndex,}
\DoxyCodeLine{01200                                \&styleIndicesInPage);}
\DoxyCodeLine{01201     undo-\/>addItemToInsert(styleIndicesInPage);}
\DoxyCodeLine{01202 }
\DoxyCodeLine{01203     std::set<int>::iterator styleIt;}
\DoxyCodeLine{01204     \textcolor{keywordflow}{for} (styleIt = styleIndicesInPage.begin();}
\DoxyCodeLine{01205          styleIt != styleIndicesInPage.end(); ++styleIt)}
\DoxyCodeLine{01206       m\_styleIndicesInPage.insert(*styleIt);}
\DoxyCodeLine{01207 }
\DoxyCodeLine{01208     \textcolor{keyword}{delete} newData;}
\DoxyCodeLine{01209   \}}
\DoxyCodeLine{01210   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{01211 }
\DoxyCodeLine{01212   \textcolor{comment}{// clear cache(invalidate) of the level}}
\DoxyCodeLine{01213   \textcolor{keywordflow}{if} (m\_levelHandle \&\& m\_levelHandle-\/>getSimpleLevel() \&\&}
\DoxyCodeLine{01214       !m\_levelHandle-\/>getSimpleLevel()-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a19cc395b0312bc880b1d765c93720967}{getDirtyFlag}}())}
\DoxyCodeLine{01215     m\_levelHandle-\/>getSimpleLevel()-\/>invalidateFrames();}
\DoxyCodeLine{01216 }
\DoxyCodeLine{01217   m\_paletteHandle-\/>notifyColorStyleChanged(\textcolor{keyword}{false});}
\DoxyCodeLine{01218   m\_paletteHandle-\/>notifyColorStyleSwitched();}
\DoxyCodeLine{01219 }
\DoxyCodeLine{01220   \textcolor{comment}{// this is to redraw the style editor with colorStyleSwitched() signal}}
\DoxyCodeLine{01221   m\_paletteHandle-\/>setStyleIndex(m\_paletteHandle-\/>getStyleIndex());}
\DoxyCodeLine{01222   palette-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{01223 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a18b6304926b7f21955496b2bf9d3397a}\label{class_t_style_selection_a18b6304926b7f21955496b2bf9d3397a}} 
\index{TStyleSelection@{TStyleSelection}!removeLink@{removeLink}}
\index{removeLink@{removeLink}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{removeLink()}{removeLink()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::remove\+Link (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

remove link from studio palette. Delete the global and the original names. return true if something changed 
\begin{DoxyCode}{0}
\DoxyCodeLine{01642                                  \{}
\DoxyCodeLine{01643   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = getPalette();}
\DoxyCodeLine{01644   \textcolor{keywordflow}{if} (!palette || m\_pageIndex < 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01645   \textcolor{keywordtype}{int} n = m\_styleIndicesInPage.size();}
\DoxyCodeLine{01646   \textcolor{keywordflow}{if} (n <= 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01647 }
\DoxyCodeLine{01648   \mbox{\hyperlink{class_t_palette_1_1_page}{TPalette::Page}} *page = palette-\/>getPage(m\_pageIndex);}
\DoxyCodeLine{01649   assert(page);}
\DoxyCodeLine{01650 }
\DoxyCodeLine{01651   \textcolor{keywordtype}{bool} somethingChanged = \textcolor{keyword}{false};}
\DoxyCodeLine{01652 }
\DoxyCodeLine{01653   \mbox{\hyperlink{class_undo_remove_link}{UndoRemoveLink}} *undo = \textcolor{keyword}{new} \mbox{\hyperlink{class_undo_remove_link}{UndoRemoveLink}}(m\_paletteHandle, m\_pageIndex);}
\DoxyCodeLine{01654 }
\DoxyCodeLine{01655   \textcolor{keywordflow}{for} (std::set<int>::iterator it = m\_styleIndicesInPage.begin();}
\DoxyCodeLine{01656        it != m\_styleIndicesInPage.end(); ++it) \{}
\DoxyCodeLine{01657     \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *cs = page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_abe9e434ff44cbe1fde53f32aa7978f9c}{getStyle}}(*it);}
\DoxyCodeLine{01658     assert(cs);}
\DoxyCodeLine{01659 }
\DoxyCodeLine{01660     \textcolor{keywordflow}{if} (cs-\/>\mbox{\hyperlink{class_t_color_style_ad275b1ae7fbbf9b7a0266b799ce53d40}{getGlobalName}}() != L\textcolor{stringliteral}{"{}"{}} || cs-\/>\mbox{\hyperlink{class_t_color_style_a9bbfc9d628f549c134e6593ea9d6b42e}{getOriginalName}}() != L\textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{01661       undo-\/>setColorStyle(*it, cs);}
\DoxyCodeLine{01662 }
\DoxyCodeLine{01663       cs-\/>\mbox{\hyperlink{class_t_color_style_af6a3579e3785b9addcf434574bc89367}{setGlobalName}}(L\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01664       cs-\/>\mbox{\hyperlink{class_t_color_style_a22061dd49a8282e8af93840441998532}{setOriginalName}}(L\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01665       cs-\/>setIsEditedFlag(\textcolor{keyword}{false});}
\DoxyCodeLine{01666       somethingChanged = \textcolor{keyword}{true};}
\DoxyCodeLine{01667     \}}
\DoxyCodeLine{01668   \}}
\DoxyCodeLine{01669 }
\DoxyCodeLine{01670   \textcolor{keywordflow}{if} (somethingChanged) \{}
\DoxyCodeLine{01671     m\_paletteHandle-\/>notifyColorStyleChanged(\textcolor{keyword}{false});}
\DoxyCodeLine{01672     TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{01673   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{01674     \textcolor{keyword}{delete} undo;}
\DoxyCodeLine{01675 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00200}{TColor\+Style\+::get\+Global\+Name()}}, \mbox{\hyperlink{l00207}{TColor\+Style\+::get\+Original\+Name()}}, \mbox{\hyperlink{l00122}{TPalette\+::\+Page\+::get\+Style()}}, \mbox{\hyperlink{l00197}{TColor\+Style\+::set\+Global\+Name()}}, and \mbox{\hyperlink{l00204}{TColor\+Style\+::set\+Original\+Name()}}.

\mbox{\Hypertarget{class_t_style_selection_a8ce0ff7f135e52a1d0df0cf146996072}\label{class_t_style_selection_a8ce0ff7f135e52a1d0df0cf146996072}} 
\index{TStyleSelection@{TStyleSelection}!select@{select}}
\index{select@{select}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{select()}{select()}\hspace{0.1cm}{\footnotesize\ttfamily [1/4]}}
{\footnotesize\ttfamily void TStyle\+Selection\+::select (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} \&}]{palette,  }\item[{int}]{page\+Index }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00296                                                                     \{}
\DoxyCodeLine{00297   m\_palette   = palette;}
\DoxyCodeLine{00298   m\_pageIndex = pageIndex;}
\DoxyCodeLine{00299   m\_styleIndicesInPage.clear();}
\DoxyCodeLine{00300 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a61ccaf1f2d730c8f5e3dcdc2b3f45cac}\label{class_t_style_selection_a61ccaf1f2d730c8f5e3dcdc2b3f45cac}} 
\index{TStyleSelection@{TStyleSelection}!select@{select}}
\index{select@{select}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{select()}{select()}\hspace{0.1cm}{\footnotesize\ttfamily [2/4]}}
{\footnotesize\ttfamily void TStyle\+Selection\+::select (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TPaletteP}} \&}]{palette,  }\item[{int}]{page\+Index,  }\item[{int}]{style\+Index\+In\+Page,  }\item[{bool}]{on }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00305                                                             \{}
\DoxyCodeLine{00306   \textcolor{keywordflow}{if} (on) \{}
\DoxyCodeLine{00307     \textcolor{keywordflow}{if} (m\_palette.getPointer() != palette.getPointer() ||}
\DoxyCodeLine{00308         pageIndex != m\_pageIndex)}
\DoxyCodeLine{00309       m\_styleIndicesInPage.clear();}
\DoxyCodeLine{00310     m\_palette   = palette;}
\DoxyCodeLine{00311     m\_pageIndex = pageIndex;}
\DoxyCodeLine{00312     m\_styleIndicesInPage.insert(styleIndexInPage);}
\DoxyCodeLine{00313   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_palette.getPointer() == palette.getPointer() \&\&}
\DoxyCodeLine{00314              pageIndex == m\_pageIndex)}
\DoxyCodeLine{00315     m\_styleIndicesInPage.erase(styleIndexInPage);}
\DoxyCodeLine{00316 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a7869b899709079dacd8e86c08c42c8e1}\label{class_t_style_selection_a7869b899709079dacd8e86c08c42c8e1}} 
\index{TStyleSelection@{TStyleSelection}!select@{select}}
\index{select@{select}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{select()}{select()}\hspace{0.1cm}{\footnotesize\ttfamily [3/4]}}
{\footnotesize\ttfamily void TStyle\+Selection\+::select (\begin{DoxyParamCaption}\item[{int}]{page\+Index }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00519                                           \{}
\DoxyCodeLine{00520   m\_pageIndex = pageIndex;}
\DoxyCodeLine{00521   m\_styleIndicesInPage.clear();}
\DoxyCodeLine{00522 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_ae046a418ebea73bf0bae9a2929fb6be8}\label{class_t_style_selection_ae046a418ebea73bf0bae9a2929fb6be8}} 
\index{TStyleSelection@{TStyleSelection}!select@{select}}
\index{select@{select}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{select()}{select()}\hspace{0.1cm}{\footnotesize\ttfamily [4/4]}}
{\footnotesize\ttfamily void TStyle\+Selection\+::select (\begin{DoxyParamCaption}\item[{int}]{page\+Index,  }\item[{int}]{style\+Index\+In\+Page,  }\item[{bool}]{on }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00526                                                                          \{}
\DoxyCodeLine{00527   \textcolor{keywordflow}{if} (on) \{}
\DoxyCodeLine{00528     \textcolor{keywordflow}{if} (pageIndex != m\_pageIndex) m\_styleIndicesInPage.clear();}
\DoxyCodeLine{00529     m\_pageIndex = pageIndex;}
\DoxyCodeLine{00530     m\_styleIndicesInPage.insert(styleIndexInPage);}
\DoxyCodeLine{00531   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (pageIndex == m\_pageIndex)}
\DoxyCodeLine{00532     m\_styleIndicesInPage.erase(styleIndexInPage);}
\DoxyCodeLine{00533 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_acba691eaa8e39eb8aaa5cc01e3cd39ce}\label{class_t_style_selection_acba691eaa8e39eb8aaa5cc01e3cd39ce}} 
\index{TStyleSelection@{TStyleSelection}!selectNone@{selectNone}}
\index{selectNone@{selectNone}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{selectNone()}{selectNone()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void TStyle\+Selection\+::select\+None (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_selection}{TSelection}}.

\mbox{\Hypertarget{class_t_style_selection_ab44c19022ca2fa8a23e09d6830ee2546}\label{class_t_style_selection_ab44c19022ca2fa8a23e09d6830ee2546}} 
\index{TStyleSelection@{TStyleSelection}!selectNone@{selectNone}}
\index{selectNone@{selectNone}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{selectNone()}{selectNone()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void TStyle\+Selection\+::select\+None (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_selection}{TSelection}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00336                                  \{}
\DoxyCodeLine{00337   m\_palette   = 0;}
\DoxyCodeLine{00338   m\_pageIndex = -\/1;}
\DoxyCodeLine{00339   m\_styleIndicesInPage.clear();}
\DoxyCodeLine{00340   notifyView();}
\DoxyCodeLine{00341 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_ab509d87120b742088a6a3ea937567bc7}\label{class_t_style_selection_ab509d87120b742088a6a3ea937567bc7}} 
\index{TStyleSelection@{TStyleSelection}!setLevelHandle@{setLevelHandle}}
\index{setLevelHandle@{setLevelHandle}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{setLevelHandle()}{setLevelHandle()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::set\+Level\+Handle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsh_level_handle}{TXsh\+Level\+Handle}} $\ast$}]{level\+Handle }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00075                                                     \{}
\DoxyCodeLine{00076     m\_levelHandle = levelHandle;}
\DoxyCodeLine{00077   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a8354866058fe200542afd6283b6698a0}\label{class_t_style_selection_a8354866058fe200542afd6283b6698a0}} 
\index{TStyleSelection@{TStyleSelection}!setPaletteHandle@{setPaletteHandle}}
\index{setPaletteHandle@{setPaletteHandle}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{setPaletteHandle()}{setPaletteHandle()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::set\+Palette\+Handle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_palette_handle}{TPalette\+Handle}} $\ast$}]{palette\+Handle }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00060                                                        \{}
\DoxyCodeLine{00061     m\_paletteHandle = paletteHandle;}
\DoxyCodeLine{00062   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a37c7493377fdb33d2dda5ed74d38e8a7}\label{class_t_style_selection_a37c7493377fdb33d2dda5ed74d38e8a7}} 
\index{TStyleSelection@{TStyleSelection}!setXsheetHandle@{setXsheetHandle}}
\index{setXsheetHandle@{setXsheetHandle}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{setXsheetHandle()}{setXsheetHandle()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::set\+Xsheet\+Handle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsheet_handle}{TXsheet\+Handle}} $\ast$}]{xsheet\+Handle }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00071                                                     \{}
\DoxyCodeLine{00072     m\_xsheetHandle = xsheetHandle;}
\DoxyCodeLine{00073   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_afcdb4c157630339c1147250d726c5fa4}\label{class_t_style_selection_afcdb4c157630339c1147250d726c5fa4}} 
\index{TStyleSelection@{TStyleSelection}!toByteArray@{toByteArray}}
\index{toByteArray@{toByteArray}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{toByteArray()}{toByteArray()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily QByte\+Array TStyle\+Selection\+::to\+Byte\+Array (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00712                                               \{}
\DoxyCodeLine{00713   QString globalName =}
\DoxyCodeLine{00714       QString::fromStdWString(m\_palette-\/>\mbox{\hyperlink{class_t_palette_ad3199523465a1961c1564a82db46b451}{getGlobalName}}().c\_str());}
\DoxyCodeLine{00715   \textcolor{keywordflow}{return} toByteArray(m\_pageIndex, m\_styleIndicesInPage, globalName);}
\DoxyCodeLine{00716 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a5f6b6227eaf5e1a2b8000d530f409855}\label{class_t_style_selection_a5f6b6227eaf5e1a2b8000d530f409855}} 
\index{TStyleSelection@{TStyleSelection}!toByteArray@{toByteArray}}
\index{toByteArray@{toByteArray}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{toByteArray()}{toByteArray()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily QByte\+Array TStyle\+Selection\+::to\+Byte\+Array (\begin{DoxyParamCaption}\item[{int}]{page\+Index,  }\item[{const std\+::set$<$ int $>$ \&}]{indices\+In\+Page,  }\item[{const QString}]{palette\+Global\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00680                                                                          \{}
\DoxyCodeLine{00681   QByteArray data;}
\DoxyCodeLine{00682   QBuffer dataBuffer(\&data);}
\DoxyCodeLine{00683   dataBuffer.open(QIODevice::WriteOnly);}
\DoxyCodeLine{00684   QDataStream out(\&dataBuffer);}
\DoxyCodeLine{00685   out << (int)pageIndex << (\textcolor{keywordtype}{int})indicesInPage.size() << paletteGlobalName;}
\DoxyCodeLine{00686 }
\DoxyCodeLine{00687   std::set<int>::const\_iterator it;}
\DoxyCodeLine{00688   \textcolor{keywordflow}{for} (it = indicesInPage.begin(); it != indicesInPage.end(); ++it)}
\DoxyCodeLine{00689     out << (\textcolor{keywordtype}{int})*it;}
\DoxyCodeLine{00690   \textcolor{keywordflow}{return} data;}
\DoxyCodeLine{00691 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a2c67fff580dd532a325e7b4ebd8567ac}\label{class_t_style_selection_a2c67fff580dd532a325e7b4ebd8567ac}} 
\index{TStyleSelection@{TStyleSelection}!toggleKeyframe@{toggleKeyframe}}
\index{toggleKeyframe@{toggleKeyframe}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{toggleKeyframe()}{toggleKeyframe()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::toggle\+Keyframe (\begin{DoxyParamCaption}\item[{int}]{frame }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{01557                                               \{}
\DoxyCodeLine{01558   \mbox{\hyperlink{class_t_palette}{TPalette}} *palette = getPalette();}
\DoxyCodeLine{01559   \textcolor{keywordflow}{if} (!palette || m\_pageIndex < 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{01560   \textcolor{keywordtype}{int} n                = m\_styleIndicesInPage.size();}
\DoxyCodeLine{01561   \mbox{\hyperlink{class_t_palette_1_1_page}{TPalette::Page}} *page = palette-\/>getPage(m\_pageIndex);}
\DoxyCodeLine{01562   assert(page);}
\DoxyCodeLine{01563   \textcolor{keywordflow}{for} (std::set<int>::iterator it = m\_styleIndicesInPage.begin();}
\DoxyCodeLine{01564        it != m\_styleIndicesInPage.end(); ++it) \{}
\DoxyCodeLine{01565     \textcolor{keywordtype}{int} styleId = page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_a3d6eed995ee8b1c22d50a73911a45786}{getStyleId}}(*it);}
\DoxyCodeLine{01566     palette-\/>setKeyframe(styleId, frame);}
\DoxyCodeLine{01567   \}}
\DoxyCodeLine{01568 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_style_selection_a689738d8ddd5557f34d2c36a8421d367}\label{class_t_style_selection_a689738d8ddd5557f34d2c36a8421d367}} 
\index{TStyleSelection@{TStyleSelection}!toggleLink@{toggleLink}}
\index{toggleLink@{toggleLink}!TStyleSelection@{TStyleSelection}}
\doxysubsubsection{\texorpdfstring{toggleLink()}{toggleLink()}}
{\footnotesize\ttfamily void TStyle\+Selection\+::toggle\+Link (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00634                                  \{}
\DoxyCodeLine{00635   \textcolor{keywordflow}{if} (!m\_palette || m\_pageIndex < 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00636   \textcolor{keywordtype}{int} n = m\_styleIndicesInPage.size();}
\DoxyCodeLine{00637   \textcolor{keywordflow}{if} (n <= 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00638 }
\DoxyCodeLine{00639   \textcolor{keywordtype}{bool} somethingHasBeenLinked = \textcolor{keyword}{false};}
\DoxyCodeLine{00640 }
\DoxyCodeLine{00641   \textcolor{keywordtype}{bool} currentStyleIsInSelection = \textcolor{keyword}{false};}
\DoxyCodeLine{00642   \mbox{\hyperlink{class_t_app}{TApp}} *app                      = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}();}
\DoxyCodeLine{00643   \mbox{\hyperlink{class_t_palette_handle}{TPaletteHandle}} *ph             = app-\/>\mbox{\hyperlink{class_t_app_a33dbcbc578915e0b69fe6927b74cf426}{getCurrentPalette}}();}
\DoxyCodeLine{00644 }
\DoxyCodeLine{00645   \mbox{\hyperlink{class_t_palette_1_1_page}{TPalette::Page}} *page = m\_palette-\/>\mbox{\hyperlink{class_t_palette_a25f83b7baf3eb774e50c726fa702056c}{getPage}}(m\_pageIndex);}
\DoxyCodeLine{00646   assert(page);}
\DoxyCodeLine{00647 }
\DoxyCodeLine{00648   \textcolor{keywordflow}{for} (std::set<int>::iterator it = m\_styleIndicesInPage.begin();}
\DoxyCodeLine{00649        it != m\_styleIndicesInPage.end(); ++it) \{}
\DoxyCodeLine{00650     \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *cs = page-\/>\mbox{\hyperlink{class_t_palette_1_1_page_abe9e434ff44cbe1fde53f32aa7978f9c}{getStyle}}(*it);}
\DoxyCodeLine{00651     assert(cs);}
\DoxyCodeLine{00652     wstring name = cs-\/>\mbox{\hyperlink{class_t_color_style_ad275b1ae7fbbf9b7a0266b799ce53d40}{getGlobalName}}();}
\DoxyCodeLine{00653     \textcolor{keywordflow}{if} (name != L\textcolor{stringliteral}{"{}"{}} \&\& (name[0] == L\textcolor{charliteral}{'-\/'} || name[0] == L\textcolor{charliteral}{'+'})) \{}
\DoxyCodeLine{00654       name[0] = name[0] == L\textcolor{charliteral}{'-\/'} ? L\textcolor{charliteral}{'+'} : L\textcolor{charliteral}{'-\/'};}
\DoxyCodeLine{00655       cs-\/>\mbox{\hyperlink{class_t_color_style_af6a3579e3785b9addcf434574bc89367}{setGlobalName}}(name);}
\DoxyCodeLine{00656       \textcolor{keywordflow}{if} (name[0] == L\textcolor{charliteral}{'+'}) somethingHasBeenLinked = \textcolor{keyword}{true};}
\DoxyCodeLine{00657     \}}
\DoxyCodeLine{00658 }
\DoxyCodeLine{00659     \textcolor{keywordflow}{if} (*it == m\_palette-\/>\mbox{\hyperlink{class_t_palette_a25f83b7baf3eb774e50c726fa702056c}{getPage}}(m\_pageIndex)-\/>\mbox{\hyperlink{class_t_palette_1_1_page_a5d85ded487f7152a95ccbab63c5aecd5}{search}}(ph-\/>getStyleIndex()))}
\DoxyCodeLine{00660       currentStyleIsInSelection = \textcolor{keyword}{true};}
\DoxyCodeLine{00661   \}}
\DoxyCodeLine{00662   \textcolor{keywordflow}{if} (somethingHasBeenLinked)}
\DoxyCodeLine{00663     StudioPalette::instance()-\/>\mbox{\hyperlink{class_studio_palette_a8174aad5fff24c6a08849628e35c8ec2}{updateLinkedColors}}(m\_palette.getPointer());}
\DoxyCodeLine{00664 }
\DoxyCodeLine{00665   ph-\/>notifyPaletteChanged();}
\DoxyCodeLine{00666 }
\DoxyCodeLine{00667   \textcolor{keywordflow}{if} (currentStyleIsInSelection) ph-\/>notifyColorStyleSwitched();}
\DoxyCodeLine{00668 }
\DoxyCodeLine{00669   \textcolor{comment}{// DA FARE: e' giusto mettere la nofica del dirty flag a current scene}}
\DoxyCodeLine{00670   \textcolor{comment}{// o e' meglio farlo al livello corrente!?}}
\DoxyCodeLine{00671   app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>setDirtyFlag(\textcolor{keyword}{true});}
\DoxyCodeLine{00672   \textcolor{comment}{//  extern void setPaletteDirtyFlag();}}
\DoxyCodeLine{00673   \textcolor{comment}{//  setPaletteDirtyFlag();}}
\DoxyCodeLine{00674 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonzqt/styleselection.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/styleselection.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/styleselection.\+cpp\item 
E\+:/opentoonz/toonz/sources/toonzqt/styleselection.\+cpp\end{DoxyCompactItemize}
