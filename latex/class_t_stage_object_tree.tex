\hypertarget{class_t_stage_object_tree}{}\doxysection{TStage\+Object\+Tree Class Reference}
\label{class_t_stage_object_tree}\index{TStageObjectTree@{TStageObjectTree}}


{\ttfamily \#include $<$tstageobjecttree.\+h$>$}

Inheritance diagram for TStage\+Object\+Tree\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_t_stage_object_tree}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_t_stage_object_tree_1_1_t_stage_object_tree_imp}{TStage\+Object\+Tree\+Imp}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_stage_object}{TStage\+Object}} $\ast$ \mbox{\hyperlink{class_t_stage_object_tree_a688e5b4f2f5730afb0cb10264f13a113}{get\+Stage\+Object}} (const \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} \&id, bool \mbox{\hyperlink{class_t_persist_a5af0825543bdd74860c0518859a546bc}{create}}=true)
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_afa5aa5663d6fe0b0c41b7e7983d89d4a}{insert\+Column}} (int index)
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_ad573114c9e935da9c7114317639edf1c}{remove\+Column}} (int index)
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_a1100b675dde5a0e995574eb4e3bb6b42}{remove\+Stage\+Object}} (const \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} \&id)
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_a8c4f8e8fc52db23d3b310bad3403f69e}{insert\+Stage\+Object}} (\mbox{\hyperlink{class_t_stage_object}{TStage\+Object}} $\ast$object)
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_af84641011e78fd26fa22794beff4aecc}{swap\+Columns}} (int i, int j)
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_a001fa3480b16ef560ccb3138d95f7583}{load\+Data}} (\mbox{\hyperlink{class_t_i_stream}{TIStream}} \&is, \mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$xsh)
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_a34b3dffe15d8936c9858ad6d15111622}{load\+Data}} (\mbox{\hyperlink{class_t_i_stream}{TIStream}} \&is) override
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_aa2a801df14bd1ae40df836bc029ae8c5}{save\+Data}} (\mbox{\hyperlink{class_t_o_stream}{TOStream}} \&os, int occupied\+Column\+Count, \mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$xsh)
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_a0c95818f4ad11c0954e73945b6a9c0a8}{save\+Data}} (\mbox{\hyperlink{class_t_o_stream}{TOStream}} \&os) override
\item 
int \mbox{\hyperlink{class_t_stage_object_tree_ad0f2bb7d9ffc580ba20305d40566d2a8}{get\+Stage\+Object\+Count}} () const
\item 
\mbox{\hyperlink{class_t_stage_object}{TStage\+Object}} $\ast$ \mbox{\hyperlink{class_t_stage_object_tree_a97cfd6375b6170ea53c5dff73f60b94a}{get\+Stage\+Object}} (int index) const
\item 
\mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} \mbox{\hyperlink{class_t_stage_object_tree_a7d63ae5d60c3a3aacf5da58c108ac167}{get\+Current\+Camera\+Id}} () const
\item 
\mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} \mbox{\hyperlink{class_t_stage_object_tree_a127c9997f42767717cc1d6eff558c4d8}{get\+Current\+Preview\+Camera\+Id}} () const
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_a493dff1b6348d709f7387f05e7656e57}{set\+Current\+Camera\+Id}} (const \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} \&id)
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_ae95c2352020de388bb7e928f02e5df9c}{set\+Current\+Preview\+Camera\+Id}} (const \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} \&id)
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_aa88239ff5581af5d748d822d1f01cd9d}{invalidate\+All}} ()
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_a3ce0c9887c27434a5951f50c654537ca}{set\+Handle\+Manager}} (\mbox{\hyperlink{class_handle_manager}{Handle\+Manager}} $\ast$hm)
\item 
\mbox{\hyperlink{class_t_point_t}{TPointD}} \mbox{\hyperlink{class_t_stage_object_tree_a0b0887136811c9dc74606534fa2727b6}{get\+Handle\+Pos}} (const \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} \&id, std\+::string handle, int row) const
\item 
int \mbox{\hyperlink{class_t_stage_object_tree_ac7f231290ded1ea78306e949545c9f96}{get\+Spline\+Count}} () const
\item 
\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$ \mbox{\hyperlink{class_t_stage_object_tree_ac8a44eb78f07d5f7e662478b9c46b33e}{get\+Spline}} (int index) const
\item 
\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$ \mbox{\hyperlink{class_t_stage_object_tree_a13bf3fb9c8a1d9d7579c0c9358aaa2c9}{get\+Spline\+By\+Id}} (int spline\+Id) const
\item 
\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$ \mbox{\hyperlink{class_t_stage_object_tree_a28f4faf0358394e8af541a70d366baad}{create\+Spline}} ()
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_a9aa6e0ceb11a90941b988223bf4a405b}{assign\+Unique\+Spline\+Id}} (\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$spline)
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_a93c569d92f0814721d0d0b7def84434a}{remove\+Spline}} (\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$spline)
\item 
bool \mbox{\hyperlink{class_t_stage_object_tree_ad7fbf2fc5bdf3d4d009978775c90ec26}{contains\+Spline}} (\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$) const
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_a5ccbb69161f93632ce7408dfb58bb8be}{insert\+Spline}} (\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$)
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_abc52baccc119c81ebebc17f1b2445754}{create\+Grammar}} (\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$xsh)
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_a81f2ebc7adc86f9e412c89352799daa5}{set\+Grammar}} (const TDouble\+ParamP \&param)
\item 
\mbox{\hyperlink{class_t_syntax_1_1_grammar}{TSyntax\+::\+Grammar}} $\ast$ \mbox{\hyperlink{class_t_stage_object_tree_ad4c9e9f5140c4c736531a4f9d6b158a7}{get\+Grammar}} () const
\item 
int \mbox{\hyperlink{class_t_stage_object_tree_ac45400eec33276e3bfbfbe91e7cb7439}{get\+Camera\+Count}} () const
\item 
int \mbox{\hyperlink{class_t_stage_object_tree_ac4c93ea7cbeeba0e33167c41e47be371}{get\+New\+Group\+Id}} ()
\item 
\mbox{\hyperlink{class_t_camera}{TCamera}} $\ast$ \mbox{\hyperlink{class_t_stage_object_tree_a54c5b8a6c731ac95e1de444d00f6e0c9}{get\+Camera}} (const \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} \&camera\+Id)
\item 
\mbox{\hyperlink{class_t_camera}{TCamera}} $\ast$ \mbox{\hyperlink{class_t_stage_object_tree_ab6871dcf2c3c9d8f38d88c78c90e987a}{get\+Camera}} (int camera\+Index)
\item 
\mbox{\hyperlink{class_t_camera}{TCamera}} $\ast$ \mbox{\hyperlink{class_t_stage_object_tree_ada891076099087125f94f933cd49d592}{get\+Current\+Camera}} ()
\item 
\mbox{\hyperlink{class_t_camera}{TCamera}} $\ast$ \mbox{\hyperlink{class_t_stage_object_tree_aba440a1418ee112a0c8987d8069559e8}{get\+Current\+Preview\+Camera}} ()
\item 
void \mbox{\hyperlink{class_t_stage_object_tree_abef47e7e9c89a82e6eb181b825081a5e}{set\+Dag\+Grid\+Dimension}} (int dim)
\item 
int \mbox{\hyperlink{class_t_stage_object_tree_a6a704261689291f533dfe41d81a48aba}{get\+Dag\+Grid\+Dimension}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
The class \mbox{\hyperlink{class_t_stage_object_tree}{TStage\+Object\+Tree}} permits to collect a set of a stage object in a hierarchical tree structure.

Inherits {\bfseries{\mbox{\hyperlink{class_t_persist}{TPersist}}}}. ~\newline
 In each tree each index for each type of \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} is unique. ~\newline
 The class provides a collection of functions that returns stage object tree element, defined in struct {\bfseries{\mbox{\hyperlink{struct_t_stage_object_tree_1_1_t_stage_object_tree_imp}{TStage\+Object\+Tree\+Imp}}}}, and enables manipulation of these. \begin{DoxyVerb}     Same class methods allows to menage generic stage objects through
\end{DoxyVerb}
 specialization, {\bfseries{get\+Stage\+Object}}(const \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} \&id, bool create= true), or through them tree index, {\bfseries{\mbox{\hyperlink{class_t_stage_object_tree_a688e5b4f2f5730afb0cb10264f13a113}{get\+Stage\+Object()}}}}; it\textquotesingle{}s possible to remove or insert stage object in the tree, \mbox{\hyperlink{class_t_stage_object_tree_a1100b675dde5a0e995574eb4e3bb6b42}{remove\+Stage\+Object()}} and \mbox{\hyperlink{class_t_stage_object_tree_a8c4f8e8fc52db23d3b310bad3403f69e}{insert\+Stage\+Object()}} respectively.

Others methods concerns specific stage object; it\textquotesingle{}s possible to insert or remove directly TStage\+Object\+Id\+::\+Column\+Id using \mbox{\hyperlink{class_t_stage_object_tree_afa5aa5663d6fe0b0c41b7e7983d89d4a}{insert\+Column()}} or \mbox{\hyperlink{class_t_stage_object_tree_ad573114c9e935da9c7114317639edf1c}{remove\+Column()}} and swap columns through \mbox{\hyperlink{class_t_stage_object_tree_af84641011e78fd26fa22794beff4aecc}{swap\+Columns()}}. ~\newline
 The tree cameras, stage object type\+: TStage\+Object\+Id\+::\+Camera\+Id, can be manages using specialization, \mbox{\hyperlink{class_t_stage_object_tree_a54c5b8a6c731ac95e1de444d00f6e0c9}{get\+Camera(const TStage\+Object\+Id \&camera\+Id)}}, or tree index, \mbox{\hyperlink{class_t_stage_object_tree_ab6871dcf2c3c9d8f38d88c78c90e987a}{get\+Camera(int camera\+Index)}}; it\textquotesingle{}s possible to know current camera, \mbox{\hyperlink{class_t_stage_object_tree_a7d63ae5d60c3a3aacf5da58c108ac167}{get\+Current\+Camera\+Id()}} or \mbox{\hyperlink{class_t_stage_object_tree_ada891076099087125f94f933cd49d592}{get\+Current\+Camera()}}, and set the tree current camera \mbox{\hyperlink{class_t_stage_object_tree_a493dff1b6348d709f7387f05e7656e57}{set\+Current\+Camera\+Id()}}.

Tree can contains also \mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} \mbox{\hyperlink{class_t_stage_object_tree_ac8a44eb78f07d5f7e662478b9c46b33e}{get\+Spline()}}. Spline can be added in tree by using \mbox{\hyperlink{class_t_stage_object_tree_a5ccbb69161f93632ce7408dfb58bb8be}{insert\+Spline()}}, insert a given spline, or \mbox{\hyperlink{class_t_stage_object_tree_a28f4faf0358394e8af541a70d366baad}{create\+Spline()}}, insert a new spline,and remove it by using \mbox{\hyperlink{class_t_stage_object_tree_a93c569d92f0814721d0d0b7def84434a}{remove\+Spline()}}. It\textquotesingle{}s possible to know if spline is in tree using \mbox{\hyperlink{class_t_stage_object_tree_ad7fbf2fc5bdf3d4d009978775c90ec26}{contains\+Spline()}}.

The class allows to manage tree stage object handle \mbox{\hyperlink{class_t_stage_object_tree_a3ce0c9887c27434a5951f50c654537ca}{set\+Handle\+Manager()}}, and to know stage object handle position \mbox{\hyperlink{class_t_stage_object_tree_a0b0887136811c9dc74606534fa2727b6}{get\+Handle\+Pos()}}. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_stage_object_tree_a3f0d1d7171c2d602ada14ee610f65a15}\label{class_t_stage_object_tree_a3f0d1d7171c2d602ada14ee610f65a15}} 
\index{TStageObjectTree@{TStageObjectTree}!TStageObjectTree@{TStageObjectTree}}
\index{TStageObjectTree@{TStageObjectTree}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{TStageObjectTree()}{TStageObjectTree()}}
{\footnotesize\ttfamily TStage\+Object\+Tree\+::\+TStage\+Object\+Tree (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00089                                    : m\_imp(\textcolor{keyword}{new} TStageObjectTreeImp) \{}
\DoxyCodeLine{00090   \mbox{\hyperlink{class_t_stage_object_tree_a688e5b4f2f5730afb0cb10264f13a113}{getStageObject}}(TStageObjectId::CameraId(0), \textcolor{keyword}{true});}
\DoxyCodeLine{00091   \mbox{\hyperlink{class_t_stage_object_tree_a688e5b4f2f5730afb0cb10264f13a113}{getStageObject}}(TStageObjectId::TableId, \textcolor{keyword}{true});}
\DoxyCodeLine{00092 }
\DoxyCodeLine{00093 \textcolor{comment}{/*}}
\DoxyCodeLine{00094 \textcolor{comment}{  static bool firstTime = true;}}
\DoxyCodeLine{00095 \textcolor{comment}{  if(firstTime)}}
\DoxyCodeLine{00096 \textcolor{comment}{  \{}}
\DoxyCodeLine{00097 \textcolor{comment}{    firstTime = false;}}
\DoxyCodeLine{00098 \textcolor{comment}{    Grammar*grammar = ExprGrammar::instance();}}
\DoxyCodeLine{00099 \textcolor{comment}{    grammar-\/>addPattern("{}leaf"{}, new ParamReferencePattern());}}
\DoxyCodeLine{00100 \textcolor{comment}{  \}}}
\DoxyCodeLine{00101 \textcolor{comment}{*/}}
\DoxyCodeLine{00102 \textcolor{preprocessor}{\#ifndef NDEBUG}}
\DoxyCodeLine{00103   checkIntegrity();}
\DoxyCodeLine{00104 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00105 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_stage_object_tree_a2570d586a055f92e8b32db6c48fe0b6f}\label{class_t_stage_object_tree_a2570d586a055f92e8b32db6c48fe0b6f}} 
\index{TStageObjectTree@{TStageObjectTree}!````~TStageObjectTree@{$\sim$TStageObjectTree}}
\index{````~TStageObjectTree@{$\sim$TStageObjectTree}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{$\sim$TStageObjectTree()}{~TStageObjectTree()}}
{\footnotesize\ttfamily TStage\+Object\+Tree\+::$\sim$\+TStage\+Object\+Tree (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00109 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_stage_object_tree_a9aa6e0ceb11a90941b988223bf4a405b}\label{class_t_stage_object_tree_a9aa6e0ceb11a90941b988223bf4a405b}} 
\index{TStageObjectTree@{TStageObjectTree}!assignUniqueSplineId@{assignUniqueSplineId}}
\index{assignUniqueSplineId@{assignUniqueSplineId}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{assignUniqueSplineId()}{assignUniqueSplineId()}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::assign\+Unique\+Spline\+Id (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$}]{spline }\end{DoxyParamCaption})}

Assign a unique id to the passed {\bfseries{spline}} 
\begin{DoxyCode}{0}
\DoxyCodeLine{00592                                                                       \{}
\DoxyCodeLine{00593   \textcolor{keywordflow}{if} (!spline) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00594   spline-\/>setId(m\_imp-\/>m\_splineCount++);}
\DoxyCodeLine{00595 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_stage_object_tree_ad7fbf2fc5bdf3d4d009978775c90ec26}\label{class_t_stage_object_tree_ad7fbf2fc5bdf3d4d009978775c90ec26}} 
\index{TStageObjectTree@{TStageObjectTree}!containsSpline@{containsSpline}}
\index{containsSpline@{containsSpline}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{containsSpline()}{containsSpline()}}
{\footnotesize\ttfamily bool TStage\+Object\+Tree\+::contains\+Spline (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$}]{s }\end{DoxyParamCaption}) const}

\begin{DoxyVerb} Returns    \e true if \b \e spline is present in the tree,
\end{DoxyVerb}
 otherwise returns {\itshape false}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00612                                                                  \{}
\DoxyCodeLine{00613   assert(s-\/>getId() >= 0);}
\DoxyCodeLine{00614   std::map<int, TStageObjectSpline *> \&splines     = m\_imp-\/>m\_splines;}
\DoxyCodeLine{00615   std::map<int, TStageObjectSpline *>::iterator it = splines.find(s-\/>getId());}
\DoxyCodeLine{00616   \textcolor{keywordflow}{return} it != splines.end() \&\& s == it-\/>second;}
\DoxyCodeLine{00617 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00621}{insert\+Spline()}}, and \mbox{\hyperlink{l00599}{remove\+Spline()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_abc52baccc119c81ebebc17f1b2445754}\label{class_t_stage_object_tree_abc52baccc119c81ebebc17f1b2445754}} 
\index{TStageObjectTree@{TStageObjectTree}!createGrammar@{createGrammar}}
\index{createGrammar@{createGrammar}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{createGrammar()}{createGrammar()}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::create\+Grammar (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$}]{xsh }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00632                                                  \{}
\DoxyCodeLine{00633   assert(!m\_imp-\/>m\_grammar);}
\DoxyCodeLine{00634   m\_imp-\/>m\_grammar = createXsheetGrammar(xsh);}
\DoxyCodeLine{00635 }
\DoxyCodeLine{00636   std::map<TStageObjectId, TStageObject *>::iterator it;}
\DoxyCodeLine{00637   \textcolor{keywordflow}{for} (it = m\_imp-\/>m\_pegbarTable.begin(); it != m\_imp-\/>m\_pegbarTable.end();}
\DoxyCodeLine{00638        ++it) \{}
\DoxyCodeLine{00639     \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *obj = it-\/>second;}
\DoxyCodeLine{00640 }
\DoxyCodeLine{00641     \textcolor{keywordtype}{int} c, cCount = TStageObject::T\_ChannelCount;}
\DoxyCodeLine{00642     \textcolor{keywordflow}{for} (c = 0; c != cCount; ++c)}
\DoxyCodeLine{00643       obj-\/>\mbox{\hyperlink{class_t_stage_object_ae4cf64f5085310a14074ceb54d2b5177}{getParam}}((\mbox{\hyperlink{class_t_stage_object_ac7a60ddc803173dc7591f784577cb439}{TStageObject::Channel}})c)-\/>setGrammar(m\_imp-\/>m\_grammar);}
\DoxyCodeLine{00644 }
\DoxyCodeLine{00645     \textcolor{keywordflow}{if} (\textcolor{keyword}{const} \mbox{\hyperlink{class_t_smart_pointer_t}{PlasticSkeletonDeformationP}} \&sd =}
\DoxyCodeLine{00646             obj-\/>\mbox{\hyperlink{class_t_stage_object_af2c5d9f172e73e4cb09b769700df3acb}{getPlasticSkeletonDeformation}}())}
\DoxyCodeLine{00647       sd-\/>setGrammar(m\_imp-\/>m\_grammar);}
\DoxyCodeLine{00648   \}}
\DoxyCodeLine{00649 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_stage_object_tree_a28f4faf0358394e8af541a70d366baad}\label{class_t_stage_object_tree_a28f4faf0358394e8af541a70d366baad}} 
\index{TStageObjectTree@{TStageObjectTree}!createSpline@{createSpline}}
\index{createSpline@{createSpline}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{createSpline()}{createSpline()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$ TStage\+Object\+Tree\+::create\+Spline (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Create a new spline and add it in stage object tree; returns a pointer to the new spline. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_stage_object_tree_a5ccbb69161f93632ce7408dfb58bb8be}{insert\+Spline()}} and \mbox{\hyperlink{class_t_stage_object_tree_a93c569d92f0814721d0d0b7def84434a}{remove\+Spline()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00582                                                    \{}
\DoxyCodeLine{00583   \mbox{\hyperlink{class_t_stage_object_spline}{TStageObjectSpline}} *spline = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stage_object_spline}{TStageObjectSpline}}();}
\DoxyCodeLine{00584   spline-\/>setId(m\_imp-\/>m\_splineCount++);}
\DoxyCodeLine{00585   m\_imp-\/>m\_splines[spline-\/>getId()] = spline;}
\DoxyCodeLine{00586   spline-\/>addRef();}
\DoxyCodeLine{00587   \textcolor{keywordflow}{return} spline;}
\DoxyCodeLine{00588 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00327}{TColumn\+Data\+Element\+::restore\+Column()}}, and \mbox{\hyperlink{l00685}{TStage\+Object\+::set\+Status()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_a54c5b8a6c731ac95e1de444d00f6e0c9}\label{class_t_stage_object_tree_a54c5b8a6c731ac95e1de444d00f6e0c9}} 
\index{TStageObjectTree@{TStageObjectTree}!getCamera@{getCamera}}
\index{getCamera@{getCamera}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{getCamera()}{getCamera()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_camera}{TCamera}} $\ast$ TStage\+Object\+Tree\+::get\+Camera (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} \&}]{camera\+Id }\end{DoxyParamCaption})}

\begin{DoxyVerb}      Returns a pointer to stage object tree camera \b TCamera identified by
\end{DoxyVerb}
 {\bfseries{\mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}}}} {\bfseries{{\itshape camera\+Id}.}} 
\begin{DoxyCode}{0}
\DoxyCodeLine{00673                                                                    \{}
\DoxyCodeLine{00674   assert(cameraId.\mbox{\hyperlink{class_t_stage_object_id_ab597e1e86fc3b5e64d552bec77f86b4d}{isCamera}}());}
\DoxyCodeLine{00675   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *cameraPegbar = \mbox{\hyperlink{class_t_stage_object_tree_a688e5b4f2f5730afb0cb10264f13a113}{getStageObject}}(cameraId);}
\DoxyCodeLine{00676   assert(cameraPegbar);}
\DoxyCodeLine{00677   \textcolor{keywordflow}{return} cameraPegbar-\/>\mbox{\hyperlink{class_t_stage_object_aaef1416a25568ada1d79906884225d0c}{getCamera}}();}
\DoxyCodeLine{00678 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00432}{TStage\+Object\+::get\+Camera()}}, \mbox{\hyperlink{l00164}{get\+Stage\+Object()}}, and \mbox{\hyperlink{l00162}{TStage\+Object\+Id\+::is\+Camera()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_ab6871dcf2c3c9d8f38d88c78c90e987a}\label{class_t_stage_object_tree_ab6871dcf2c3c9d8f38d88c78c90e987a}} 
\index{TStageObjectTree@{TStageObjectTree}!getCamera@{getCamera}}
\index{getCamera@{getCamera}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{getCamera()}{getCamera()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_camera}{TCamera}} $\ast$ TStage\+Object\+Tree\+::get\+Camera (\begin{DoxyParamCaption}\item[{int}]{camera\+Index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\begin{DoxyVerb}      Return a pointer to stage object tree camera \b TCamera identified by
\end{DoxyVerb}
 index {\bfseries{{\itshape camera\+Index}.}} \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_stage_object_tree_ada891076099087125f94f933cd49d592}{get\+Current\+Camera()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00270                                              \{}
\DoxyCodeLine{00271     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_stage_object_tree_a54c5b8a6c731ac95e1de444d00f6e0c9}{getCamera}}(TStageObjectId::CameraId(cameraIndex));}
\DoxyCodeLine{00272   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_stage_object_tree_ac45400eec33276e3bfbfbe91e7cb7439}\label{class_t_stage_object_tree_ac45400eec33276e3bfbfbe91e7cb7439}} 
\index{TStageObjectTree@{TStageObjectTree}!getCameraCount@{getCameraCount}}
\index{getCameraCount@{getCameraCount}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{getCameraCount()}{getCameraCount()}}
{\footnotesize\ttfamily int TStage\+Object\+Tree\+::get\+Camera\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Returns the number of camera objects in the tree. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00487 \{ \textcolor{keywordflow}{return} m\_imp-\/>m\_cameraCount; \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00754}{TScene\+Properties\+::clone\+Cameras\+From()}}, \mbox{\hyperlink{l01102}{Output\+Settings\+Popup\+::on\+Camera\+Changed()}}, and \mbox{\hyperlink{l00802}{Output\+Settings\+Popup\+::update\+Field()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_ada891076099087125f94f933cd49d592}\label{class_t_stage_object_tree_ada891076099087125f94f933cd49d592}} 
\index{TStageObjectTree@{TStageObjectTree}!getCurrentCamera@{getCurrentCamera}}
\index{getCurrentCamera@{getCurrentCamera}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{getCurrentCamera()}{getCurrentCamera()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_camera}{TCamera}} $\ast$ TStage\+Object\+Tree\+::get\+Current\+Camera (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Return a pointer to current stage object tree camera {\bfseries{\mbox{\hyperlink{class_t_camera}{TCamera}}}}. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_stage_object_tree_a54c5b8a6c731ac95e1de444d00f6e0c9}{get\+Camera()}} and \mbox{\hyperlink{class_t_stage_object_tree_a7d63ae5d60c3a3aacf5da58c108ac167}{get\+Current\+Camera\+Id()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00277 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_stage_object_tree_a54c5b8a6c731ac95e1de444d00f6e0c9}{getCamera}}(\mbox{\hyperlink{class_t_stage_object_tree_a7d63ae5d60c3a3aacf5da58c108ac167}{getCurrentCameraId}}()); \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01472}{Toonz\+Scene\+::get\+Current\+Camera()}}, and \mbox{\hyperlink{l00711}{Toonz\+Scene\+::render\+Frame()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_a7d63ae5d60c3a3aacf5da58c108ac167}\label{class_t_stage_object_tree_a7d63ae5d60c3a3aacf5da58c108ac167}} 
\index{TStageObjectTree@{TStageObjectTree}!getCurrentCameraId@{getCurrentCameraId}}
\index{getCurrentCameraId@{getCurrentCameraId}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{getCurrentCameraId()}{getCurrentCameraId()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} TStage\+Object\+Tree\+::get\+Current\+Camera\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

\begin{DoxyVerb}      Returns \b TStageObjectId of stage object tree current camera.
\end{DoxyVerb}
 \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_stage_object_tree_a493dff1b6348d709f7387f05e7656e57}{set\+Current\+Camera\+Id()}} and \mbox{\hyperlink{class_t_stage_object_tree_ada891076099087125f94f933cd49d592}{get\+Current\+Camera()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00508                                                           \{}
\DoxyCodeLine{00509   \textcolor{keywordflow}{return} m\_imp-\/>m\_currentCameraId;}
\DoxyCodeLine{00510 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00330}{Stage\+Builder\+::add\+Cell()}}, \mbox{\hyperlink{l01416}{Edit\+Tool\+::draw()}}, \mbox{\hyperlink{l01627}{TXsheet\+::get\+BBox()}}, \mbox{\hyperlink{l00620}{TXsheet\+::get\+Camera\+Aff()}}, \mbox{\hyperlink{l00745}{TTool\+::get\+Column\+Matrix()}}, \mbox{\hyperlink{l00170}{texture\+\_\+utils\+::get\+Texture\+Data()}}, \mbox{\hyperlink{l01122}{Toonz\+Scene\+::load\+Level()}}, \mbox{\hyperlink{l01357}{Output\+Settings\+Popup\+::on\+Add\+Preset\+Button\+Pressed()}}, \mbox{\hyperlink{l01102}{Output\+Settings\+Popup\+::on\+Camera\+Changed()}}, \mbox{\hyperlink{l00711}{Toonz\+Scene\+::render\+Frame()}}, \mbox{\hyperlink{l00802}{Output\+Settings\+Popup\+::update\+Field()}}, and \mbox{\hyperlink{l00911}{Stage\+::visit()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_aba440a1418ee112a0c8987d8069559e8}\label{class_t_stage_object_tree_aba440a1418ee112a0c8987d8069559e8}} 
\index{TStageObjectTree@{TStageObjectTree}!getCurrentPreviewCamera@{getCurrentPreviewCamera}}
\index{getCurrentPreviewCamera@{getCurrentPreviewCamera}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{getCurrentPreviewCamera()}{getCurrentPreviewCamera()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_camera}{TCamera}} $\ast$ TStage\+Object\+Tree\+::get\+Current\+Preview\+Camera (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00278                                             \{}
\DoxyCodeLine{00279     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_stage_object_tree_a54c5b8a6c731ac95e1de444d00f6e0c9}{getCamera}}(getCurrentPreviewCameraId());}
\DoxyCodeLine{00280   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_stage_object_tree_a127c9997f42767717cc1d6eff558c4d8}\label{class_t_stage_object_tree_a127c9997f42767717cc1d6eff558c4d8}} 
\index{TStageObjectTree@{TStageObjectTree}!getCurrentPreviewCameraId@{getCurrentPreviewCameraId}}
\index{getCurrentPreviewCameraId@{getCurrentPreviewCameraId}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{getCurrentPreviewCameraId()}{getCurrentPreviewCameraId()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} TStage\+Object\+Tree\+::get\+Current\+Preview\+Camera\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00514                                                                  \{}
\DoxyCodeLine{00515   \textcolor{keywordflow}{return} m\_imp-\/>m\_currentPreviewCameraId;}
\DoxyCodeLine{00516 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_stage_object_tree_a6a704261689291f533dfe41d81a48aba}\label{class_t_stage_object_tree_a6a704261689291f533dfe41d81a48aba}} 
\index{TStageObjectTree@{TStageObjectTree}!getDagGridDimension@{getDagGridDimension}}
\index{getDagGridDimension@{getDagGridDimension}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{getDagGridDimension()}{getDagGridDimension()}}
{\footnotesize\ttfamily int TStage\+Object\+Tree\+::get\+Dag\+Grid\+Dimension (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00688                                                 \{}
\DoxyCodeLine{00689   \textcolor{keywordflow}{return} m\_imp-\/>m\_dagGridDimension;}
\DoxyCodeLine{00690 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_stage_object_tree_ad4c9e9f5140c4c736531a4f9d6b158a7}\label{class_t_stage_object_tree_ad4c9e9f5140c4c736531a4f9d6b158a7}} 
\index{TStageObjectTree@{TStageObjectTree}!getGrammar@{getGrammar}}
\index{getGrammar@{getGrammar}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{getGrammar()}{getGrammar()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_syntax_1_1_grammar}{TSyntax\+::\+Grammar}} $\ast$ TStage\+Object\+Tree\+::get\+Grammar (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00659                                                    \{}
\DoxyCodeLine{00660   \textcolor{keywordflow}{return} m\_imp-\/>m\_grammar;}
\DoxyCodeLine{00661 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_stage_object_tree_a0b0887136811c9dc74606534fa2727b6}\label{class_t_stage_object_tree_a0b0887136811c9dc74606534fa2727b6}} 
\index{TStageObjectTree@{TStageObjectTree}!getHandlePos@{getHandlePos}}
\index{getHandlePos@{getHandlePos}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{getHandlePos()}{getHandlePos()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_point_t}{TPointD}} TStage\+Object\+Tree\+::get\+Handle\+Pos (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} \&}]{id,  }\item[{std\+::string}]{handle,  }\item[{int}]{row }\end{DoxyParamCaption}) const}

\begin{DoxyVerb} Returns the point position of the handle \b \e handle.
 If an Handle Manager has not been implemented this method returns a
\end{DoxyVerb}
 point of coordinates (0,0). \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_stage_object_tree_a3ce0c9887c27434a5951f50c654537ca}{set\+Handle\+Manager()}}. 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00551                                                                         \{}
\DoxyCodeLine{00552   \textcolor{keywordflow}{if} (m\_imp-\/>m\_handleManager)}
\DoxyCodeLine{00553     \textcolor{keywordflow}{return} m\_imp-\/>m\_handleManager-\/>getHandlePos(\textcolor{keywordtype}{id}, handle, row);}
\DoxyCodeLine{00554   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00555     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_point_t}{TPointD}}();}
\DoxyCodeLine{00556 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_stage_object_tree_ac4c93ea7cbeeba0e33167c41e47be371}\label{class_t_stage_object_tree_ac4c93ea7cbeeba0e33167c41e47be371}} 
\index{TStageObjectTree@{TStageObjectTree}!getNewGroupId@{getNewGroupId}}
\index{getNewGroupId@{getNewGroupId}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{getNewGroupId()}{getNewGroupId()}}
{\footnotesize\ttfamily int TStage\+Object\+Tree\+::get\+New\+Group\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00491 \{ \textcolor{keywordflow}{return} ++m\_imp-\/>m\_groupIdCount; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_stage_object_tree_ac8a44eb78f07d5f7e662478b9c46b33e}\label{class_t_stage_object_tree_ac8a44eb78f07d5f7e662478b9c46b33e}} 
\index{TStageObjectTree@{TStageObjectTree}!getSpline@{getSpline}}
\index{getSpline@{getSpline}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{getSpline()}{getSpline()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$ TStage\+Object\+Tree\+::get\+Spline (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const}

Returns stage object tree spline {\bfseries{\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}}}} identified by tree index {\bfseries{{\itshape index}.}} \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_stage_object_tree_a5ccbb69161f93632ce7408dfb58bb8be}{insert\+Spline()}}, \mbox{\hyperlink{class_t_stage_object_tree_a28f4faf0358394e8af541a70d366baad}{create\+Spline()}} and \mbox{\hyperlink{class_t_stage_object_tree_a93c569d92f0814721d0d0b7def84434a}{remove\+Spline()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00564                                                                \{}
\DoxyCodeLine{00565   assert(0 <= index \&\& index < \mbox{\hyperlink{class_t_stage_object_tree_ac7f231290ded1ea78306e949545c9f96}{getSplineCount}}());}
\DoxyCodeLine{00566   std::map<int, TStageObjectSpline *>::iterator it = m\_imp-\/>m\_splines.begin();}
\DoxyCodeLine{00567   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < index; i++) it++;}
\DoxyCodeLine{00568   \textcolor{keywordflow}{return} it-\/>second;}
\DoxyCodeLine{00569 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00560}{get\+Spline\+Count()}}.



Referenced by \mbox{\hyperlink{l00198}{Stage\+Schematic\+Scene\+::update\+Scene()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_a13bf3fb9c8a1d9d7579c0c9358aaa2c9}\label{class_t_stage_object_tree_a13bf3fb9c8a1d9d7579c0c9358aaa2c9}} 
\index{TStageObjectTree@{TStageObjectTree}!getSplineById@{getSplineById}}
\index{getSplineById@{getSplineById}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{getSplineById()}{getSplineById()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$ TStage\+Object\+Tree\+::get\+Spline\+By\+Id (\begin{DoxyParamCaption}\item[{int}]{spline\+Id }\end{DoxyParamCaption}) const}

Returns stage object tree spline {\bfseries{\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}}}} identified {\bfseries{{\itshape spline\+Id}.}} Returns 0 if Stage\+Object\+Tree doesn\textquotesingle{}t contains the spline. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_stage_object_tree_a5ccbb69161f93632ce7408dfb58bb8be}{insert\+Spline()}}, \mbox{\hyperlink{class_t_stage_object_tree_a28f4faf0358394e8af541a70d366baad}{create\+Spline()}} and \mbox{\hyperlink{class_t_stage_object_tree_a93c569d92f0814721d0d0b7def84434a}{remove\+Spline()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00573                                                                       \{}
\DoxyCodeLine{00574   std::map<int, TStageObjectSpline *>::iterator it =}
\DoxyCodeLine{00575       m\_imp-\/>m\_splines.find(splineId);}
\DoxyCodeLine{00576   \textcolor{keywordflow}{if} (it != m\_imp-\/>m\_splines.end()) \textcolor{keywordflow}{return} it-\/>second;}
\DoxyCodeLine{00577   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00578 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00895}{Stage\+Objects\+Data\+::store\+Splines()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_ac7f231290ded1ea78306e949545c9f96}\label{class_t_stage_object_tree_ac7f231290ded1ea78306e949545c9f96}} 
\index{TStageObjectTree@{TStageObjectTree}!getSplineCount@{getSplineCount}}
\index{getSplineCount@{getSplineCount}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{getSplineCount()}{getSplineCount()}}
{\footnotesize\ttfamily int TStage\+Object\+Tree\+::get\+Spline\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Returns the number of the spline\textquotesingle{}s objects in the tree. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00560 \{ \textcolor{keywordflow}{return} m\_imp-\/>m\_splines.size(); \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00564}{get\+Spline()}}, and \mbox{\hyperlink{l00198}{Stage\+Schematic\+Scene\+::update\+Scene()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_a688e5b4f2f5730afb0cb10264f13a113}\label{class_t_stage_object_tree_a688e5b4f2f5730afb0cb10264f13a113}} 
\index{TStageObjectTree@{TStageObjectTree}!getStageObject@{getStageObject}}
\index{getStageObject@{getStageObject}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{getStageObject()}{getStageObject()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stage_object}{TStage\+Object}} $\ast$ TStage\+Object\+Tree\+::get\+Stage\+Object (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} \&}]{id,  }\item[{bool}]{create = {\ttfamily true} }\end{DoxyParamCaption})}

\begin{DoxyVerb} The method retrieves a stage object with the passed TStageObjectId \b
\end{DoxyVerb}
 {\itshape id}, if the second parameter is true it creates the stage object if it doesn\textquotesingle{}t exist in the \mbox{\hyperlink{class_t_stage_object_tree}{TStage\+Object\+Tree}} and returns a pointer to it. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00165                                                             \{}
\DoxyCodeLine{00166   std::map<TStageObjectId, TStageObject *> \&pegbars     = m\_imp-\/>m\_pegbarTable;}
\DoxyCodeLine{00167   std::map<TStageObjectId, TStageObject *>::iterator it = pegbars.find(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00168   \textcolor{keywordflow}{if} (it != pegbars.end()) \{}
\DoxyCodeLine{00169     \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *pegbar = it-\/>second;}
\DoxyCodeLine{00170     \textcolor{keywordflow}{return} pegbar;}
\DoxyCodeLine{00171   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_persist_a5af0825543bdd74860c0518859a546bc}{create}}) \{}
\DoxyCodeLine{00172     \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *pegbar = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stage_object}{TStageObject}}(\textcolor{keyword}{this}, \textcolor{keywordtype}{id});}
\DoxyCodeLine{00173     \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.isColumn()) \{}
\DoxyCodeLine{00174       \textcolor{keywordtype}{int} index = \textcolor{keywordtype}{id}.getIndex();}
\DoxyCodeLine{00175       \textcolor{comment}{// mi assicuro che esistano tutte le colonne con indici inferiori}}
\DoxyCodeLine{00176       \textcolor{keywordflow}{if} (index > 0) \mbox{\hyperlink{class_t_stage_object_tree_a688e5b4f2f5730afb0cb10264f13a113}{getStageObject}}(TStageObjectId::ColumnId(index -\/ 1));}
\DoxyCodeLine{00177       \textcolor{comment}{// assegno il parent (per una colonna dev'essere la table)}}
\DoxyCodeLine{00178       \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} parentId = TStageObjectId::TableId;}
\DoxyCodeLine{00179       pegbar-\/>\mbox{\hyperlink{class_t_stage_object_a473d8c3eac2e00ae359a7bb3a4b2dbed}{setParent}}(parentId);}
\DoxyCodeLine{00180       \textcolor{comment}{// mi assicuro che il padre esista}}
\DoxyCodeLine{00181       \mbox{\hyperlink{class_t_stage_object_tree_a688e5b4f2f5730afb0cb10264f13a113}{getStageObject}}(parentId);}
\DoxyCodeLine{00182     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.isPegbar()) \{}
\DoxyCodeLine{00183       pegbar-\/>\mbox{\hyperlink{class_t_stage_object_a473d8c3eac2e00ae359a7bb3a4b2dbed}{setParent}}(TStageObjectId::TableId);}
\DoxyCodeLine{00184     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.isCamera())}
\DoxyCodeLine{00185       m\_imp-\/>m\_cameraCount++;}
\DoxyCodeLine{00186     pegbars[id] = pegbar;}
\DoxyCodeLine{00187     pegbar-\/>addRef();}
\DoxyCodeLine{00188 }
\DoxyCodeLine{00189 \textcolor{preprocessor}{\#ifndef NDEBUG}}
\DoxyCodeLine{00190     checkIntegrity();}
\DoxyCodeLine{00191 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00192 }
\DoxyCodeLine{00193     \textcolor{keywordflow}{return} pegbar;}
\DoxyCodeLine{00194   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00195     \textcolor{keywordflow}{return} 0L;}
\DoxyCodeLine{00196 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00193}{TPersist\+::create()}}, \mbox{\hyperlink{l00164}{get\+Stage\+Object()}}, and \mbox{\hyperlink{l00570}{TStage\+Object\+::set\+Parent()}}.



Referenced by \mbox{\hyperlink{l01173}{TStage\+Object\+::clone()}}, \mbox{\hyperlink{l00754}{TScene\+Properties\+::clone\+Cameras\+From()}}, \mbox{\hyperlink{l00779}{TScene\+Properties\+::clone\+Cameras\+To()}}, \mbox{\hyperlink{l00673}{get\+Camera()}}, \mbox{\hyperlink{l00164}{get\+Stage\+Object()}}, \mbox{\hyperlink{l00200}{insert\+Column()}}, \mbox{\hyperlink{l00377}{load\+Data()}}, \mbox{\hyperlink{l01102}{Output\+Settings\+Popup\+::on\+Camera\+Changed()}}, \mbox{\hyperlink{l00441}{TCamera\+Data\+Element\+::restore\+Camera()}}, \mbox{\hyperlink{l00201}{TStage\+Object\+Data\+Element\+::restore\+Object()}}, \mbox{\hyperlink{l00570}{TStage\+Object\+::set\+Parent()}}, \mbox{\hyperlink{l00428}{TCamera\+Data\+Element\+::store\+Camera()}}, \mbox{\hyperlink{l00189}{TStage\+Object\+Data\+Element\+::store\+Object()}}, \mbox{\hyperlink{l00331}{swap\+Columns()}}, \mbox{\hyperlink{l00802}{Output\+Settings\+Popup\+::update\+Field()}}, \mbox{\hyperlink{l00198}{Stage\+Schematic\+Scene\+::update\+Scene()}}, and \mbox{\hyperlink{l00919}{Arrow\+Tool\+Options\+Box\+::update\+Stage\+Object\+Combo\+Items()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_a97cfd6375b6170ea53c5dff73f60b94a}\label{class_t_stage_object_tree_a97cfd6375b6170ea53c5dff73f60b94a}} 
\index{TStageObjectTree@{TStageObjectTree}!getStageObject@{getStageObject}}
\index{getStageObject@{getStageObject}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{getStageObject()}{getStageObject()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stage_object}{TStage\+Object}} $\ast$ TStage\+Object\+Tree\+::get\+Stage\+Object (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption}) const}

\begin{DoxyVerb} Returns a pointer to a generic stage object \b TStageObject of index
\end{DoxyVerb}
 {\bfseries{{\itshape index} in}} the stage object tree. Index must be positive and less then the number of the objects. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00495                                                               \{}
\DoxyCodeLine{00496   assert(0 <= index \&\& index < \mbox{\hyperlink{class_t_stage_object_tree_ad0f2bb7d9ffc580ba20305d40566d2a8}{getStageObjectCount}}());}
\DoxyCodeLine{00497   std::map<TStageObjectId, TStageObject *>::const\_iterator it;}
\DoxyCodeLine{00498   \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{00499   \textcolor{keywordflow}{for} (it = m\_imp-\/>m\_pegbarTable.begin();}
\DoxyCodeLine{00500        it != m\_imp-\/>m\_pegbarTable.end() \&\& i < index; ++it, ++i) \{}
\DoxyCodeLine{00501   \}}
\DoxyCodeLine{00502   assert(it != m\_imp-\/>m\_pegbarTable.end());}
\DoxyCodeLine{00503   \textcolor{keywordflow}{return} it-\/>second;}
\DoxyCodeLine{00504 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00481}{get\+Stage\+Object\+Count()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_ad0f2bb7d9ffc580ba20305d40566d2a8}\label{class_t_stage_object_tree_ad0f2bb7d9ffc580ba20305d40566d2a8}} 
\index{TStageObjectTree@{TStageObjectTree}!getStageObjectCount@{getStageObjectCount}}
\index{getStageObjectCount@{getStageObjectCount}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{getStageObjectCount()}{getStageObjectCount()}}
{\footnotesize\ttfamily int TStage\+Object\+Tree\+::get\+Stage\+Object\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Returns the numbers of the objects in the tree. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00481                                                 \{}
\DoxyCodeLine{00482   \textcolor{keywordflow}{return} m\_imp-\/>m\_pegbarTable.size();}
\DoxyCodeLine{00483 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00495}{get\+Stage\+Object()}}, and \mbox{\hyperlink{l00198}{Stage\+Schematic\+Scene\+::update\+Scene()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_afa5aa5663d6fe0b0c41b7e7983d89d4a}\label{class_t_stage_object_tree_afa5aa5663d6fe0b0c41b7e7983d89d4a}} 
\index{TStageObjectTree@{TStageObjectTree}!insertColumn@{insertColumn}}
\index{insertColumn@{insertColumn}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{insertColumn()}{insertColumn()}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::insert\+Column (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})}

\begin{DoxyVerb}      Inserts in current stage object tree a column object
\end{DoxyVerb}
 (TStage\+Object\+Id\+::\+Column\+Id()) with index {\bfseries{{\itshape index}.}} \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_stage_object_tree_ad573114c9e935da9c7114317639edf1c}{remove\+Column()}} and \mbox{\hyperlink{class_t_stage_object_tree_a8c4f8e8fc52db23d3b310bad3403f69e}{insert\+Stage\+Object()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00200                                              \{}
\DoxyCodeLine{00201   assert(0 <= index);}
\DoxyCodeLine{00202 \textcolor{preprocessor}{\#ifndef NDEBUG}}
\DoxyCodeLine{00203   checkIntegrity();}
\DoxyCodeLine{00204 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00205 }
\DoxyCodeLine{00206   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} \textcolor{keywordtype}{id}       = TStageObjectId::ColumnId(index);}
\DoxyCodeLine{00207   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *pegbar    = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stage_object}{TStageObject}}(\textcolor{keyword}{this}, \textcolor{keywordtype}{id});}
\DoxyCodeLine{00208   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} parentId = TStageObjectId::TableId;}
\DoxyCodeLine{00209   pegbar-\/>\mbox{\hyperlink{class_t_stage_object_a473d8c3eac2e00ae359a7bb3a4b2dbed}{setParent}}(parentId);}
\DoxyCodeLine{00210   \textcolor{comment}{// mi assicuro che il padre esista}}
\DoxyCodeLine{00211   \mbox{\hyperlink{class_t_stage_object_tree_a688e5b4f2f5730afb0cb10264f13a113}{getStageObject}}(parentId);}
\DoxyCodeLine{00212 }
\DoxyCodeLine{00213   \textcolor{comment}{// mi assicuro che esistano tutte le colonne di indice inferiore}}
\DoxyCodeLine{00214   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < index; k++) \mbox{\hyperlink{class_t_stage_object_tree_a688e5b4f2f5730afb0cb10264f13a113}{getStageObject}}(TStageObjectId::ColumnId(k));}
\DoxyCodeLine{00215 }
\DoxyCodeLine{00216   std::map<TStageObjectId, TStageObject *> \&pegbars = m\_imp-\/>m\_pegbarTable;}
\DoxyCodeLine{00217 }
\DoxyCodeLine{00218   std::vector<std::pair<TStageObjectId, TStageObject *>> tmp(pegbars.begin(),}
\DoxyCodeLine{00219                                                              pegbars.end());}
\DoxyCodeLine{00220   std::vector<std::pair<TStageObjectId, TStageObject *>>::iterator it;}
\DoxyCodeLine{00221 }
\DoxyCodeLine{00222   \textcolor{keywordflow}{for} (it = tmp.begin(); it != tmp.end(); ++it) \{}
\DoxyCodeLine{00223     \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} j = it-\/>first;}
\DoxyCodeLine{00224     \textcolor{keywordflow}{if} (j.isColumn() \&\& j.getIndex() >= index) \{}
\DoxyCodeLine{00225       it-\/>first = TStageObjectId::ColumnId(j.getIndex() + 1);}
\DoxyCodeLine{00226       it-\/>second-\/>setId(it-\/>first);}
\DoxyCodeLine{00227     \}}
\DoxyCodeLine{00228   \}}
\DoxyCodeLine{00229 }
\DoxyCodeLine{00230   pegbars.clear();}
\DoxyCodeLine{00231   pegbars.insert(tmp.begin(), tmp.end());}
\DoxyCodeLine{00232 }
\DoxyCodeLine{00233   pegbars[id] = pegbar;}
\DoxyCodeLine{00234   pegbar-\/>addRef();}
\DoxyCodeLine{00235 }
\DoxyCodeLine{00236 \textcolor{preprocessor}{\#ifndef NDEBUG}}
\DoxyCodeLine{00237   checkIntegrity();}
\DoxyCodeLine{00238 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00239 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00164}{get\+Stage\+Object()}}, and \mbox{\hyperlink{l00570}{TStage\+Object\+::set\+Parent()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_a5ccbb69161f93632ce7408dfb58bb8be}\label{class_t_stage_object_tree_a5ccbb69161f93632ce7408dfb58bb8be}} 
\index{TStageObjectTree@{TStageObjectTree}!insertSpline@{insertSpline}}
\index{insertSpline@{insertSpline}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{insertSpline()}{insertSpline()}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::insert\+Spline (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$}]{s }\end{DoxyParamCaption})}

Inserts in the stage object tree the spline {\bfseries{{\itshape spline}.}} If {\bfseries{{\itshape spline} is}} already present it does nothing, otherwise it gets ownership of the spline object. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_stage_object_tree_a93c569d92f0814721d0d0b7def84434a}{remove\+Spline()}} and \mbox{\hyperlink{class_t_stage_object_tree_a28f4faf0358394e8af541a70d366baad}{create\+Spline()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00621                                                          \{}
\DoxyCodeLine{00622   assert(s-\/>getId() >= 0);}
\DoxyCodeLine{00623   std::map<int, TStageObjectSpline *> \&splines = m\_imp-\/>m\_splines;}
\DoxyCodeLine{00624   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_stage_object_tree_ad7fbf2fc5bdf3d4d009978775c90ec26}{containsSpline}}(s)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00625   splines[s-\/>getId()]  = s;}
\DoxyCodeLine{00626   m\_imp-\/>m\_splineCount = std::max(m\_imp-\/>m\_splineCount, s-\/>getId() + 1);}
\DoxyCodeLine{00627   s-\/>addRef();}
\DoxyCodeLine{00628 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00612}{contains\+Spline()}}.



Referenced by \mbox{\hyperlink{l00377}{load\+Data()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_a8c4f8e8fc52db23d3b310bad3403f69e}\label{class_t_stage_object_tree_a8c4f8e8fc52db23d3b310bad3403f69e}} 
\index{TStageObjectTree@{TStageObjectTree}!insertStageObject@{insertStageObject}}
\index{insertStageObject@{insertStageObject}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{insertStageObject()}{insertStageObject()}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::insert\+Stage\+Object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stage_object}{TStage\+Object}} $\ast$}]{object }\end{DoxyParamCaption})}

\begin{DoxyVerb}      Inserts in current stage object tree the object \b \e object.
      The \b \e object must exist.
\end{DoxyVerb}
 \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_stage_object_tree_a1100b675dde5a0e995574eb4e3bb6b42}{remove\+Stage\+Object()}} and \mbox{\hyperlink{class_t_stage_object_tree_afa5aa5663d6fe0b0c41b7e7983d89d4a}{insert\+Column()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00305                                                              \{}
\DoxyCodeLine{00306   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *imp = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_stage_object}{TStageObject}} *\textcolor{keyword}{>}(pegbar);}
\DoxyCodeLine{00307   assert(imp);}
\DoxyCodeLine{00308   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} \textcolor{keywordtype}{id} = imp-\/>\mbox{\hyperlink{class_t_stage_object_a7acac7f9d2b8aabae125a81cc4ac5b10}{getId}}();}
\DoxyCodeLine{00309   std::map<TStageObjectId, TStageObject *> \&pegbars = m\_imp-\/>m\_pegbarTable;}
\DoxyCodeLine{00310   assert(pegbars.count(\textcolor{keywordtype}{id}) == 0);}
\DoxyCodeLine{00311   pegbars[id] = imp;}
\DoxyCodeLine{00312   imp-\/>addRef();}
\DoxyCodeLine{00313   imp-\/>\mbox{\hyperlink{class_t_stage_object_a473d8c3eac2e00ae359a7bb3a4b2dbed}{setParent}}(imp-\/>\mbox{\hyperlink{class_t_stage_object_afb4724a8cc2ef7eb2c6c7585834210f2}{getParent}}());}
\DoxyCodeLine{00314   \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.isCamera()) m\_imp-\/>m\_cameraCount++;}
\DoxyCodeLine{00315 \textcolor{preprocessor}{\#ifndef NDEBUG}}
\DoxyCodeLine{00316   checkIntegrity();}
\DoxyCodeLine{00317 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00318 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00520}{TStage\+Object\+::get\+Id()}}, \mbox{\hyperlink{l00632}{TStage\+Object\+::get\+Parent()}}, and \mbox{\hyperlink{l00570}{TStage\+Object\+::set\+Parent()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_aa88239ff5581af5d748d822d1f01cd9d}\label{class_t_stage_object_tree_aa88239ff5581af5d748d822d1f01cd9d}} 
\index{TStageObjectTree@{TStageObjectTree}!invalidateAll@{invalidateAll}}
\index{invalidateAll@{invalidateAll}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{invalidateAll()}{invalidateAll()}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::invalidate\+All (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Calls \mbox{\hyperlink{class_t_stage_object_add34b90eaaa8ff75b9ed098c4d9bec27}{TStage\+Object\+::invalidate()}} for all objects in the table. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00534                                      \{}
\DoxyCodeLine{00535   std::map<TStageObjectId, TStageObject *>::iterator it;}
\DoxyCodeLine{00536   \textcolor{keywordflow}{for} (it = m\_imp-\/>m\_pegbarTable.begin(); it != m\_imp-\/>m\_pegbarTable.end();}
\DoxyCodeLine{00537        ++it) \{}
\DoxyCodeLine{00538     it-\/>second-\/>invalidate();}
\DoxyCodeLine{00539   \}}
\DoxyCodeLine{00540 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_stage_object_tree_a34b3dffe15d8936c9858ad6d15111622}\label{class_t_stage_object_tree_a34b3dffe15d8936c9858ad6d15111622}} 
\index{TStageObjectTree@{TStageObjectTree}!loadData@{loadData}}
\index{loadData@{loadData}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{loadData()}{loadData()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::load\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_i_stream}{TIStream}} \&}]{is }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

\begin{DoxyVerb} This is a pure virtual function and must be overridden with a method
\end{DoxyVerb}
 that implements the object loading from a stream (i.\+e take the object\textquotesingle{}s features from a formatted data stream). For example the \mbox{\hyperlink{class_t_stage_object}{TStage\+Object}} class use his implementation to take the values of the parameters that characterizes a stage object as name, coordinates, etc... from a file. {\itshape is} is an input file stream 

Implements \mbox{\hyperlink{class_t_persist_a9e9d78431e843edb9299095af867a136}{TPersist}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00146 \{\};  \textcolor{comment}{// not used}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_stage_object_tree_a001fa3480b16ef560ccb3138d95f7583}\label{class_t_stage_object_tree_a001fa3480b16ef560ccb3138d95f7583}} 
\index{TStageObjectTree@{TStageObjectTree}!loadData@{loadData}}
\index{loadData@{loadData}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{loadData()}{loadData()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::load\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_i_stream}{TIStream}} \&}]{is,  }\item[{\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$}]{xsh }\end{DoxyParamCaption})}

\begin{DoxyVerb}    Retrieves  object's data from a tagged data stream \b \e is.
\end{DoxyVerb}
 \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_stage_object_tree_aa2a801df14bd1ae40df836bc029ae8c5}{save\+Data()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00377                                                           \{}
\DoxyCodeLine{00378   std::string tagName;}
\DoxyCodeLine{00379   \textcolor{keywordflow}{while} (is.\mbox{\hyperlink{class_t_i_stream_a5fe7ddb5560e39e0ab4ff57d24926d41}{matchTag}}(tagName)) \{}
\DoxyCodeLine{00380     \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}splines"{}}) \{}
\DoxyCodeLine{00381       \textcolor{keywordflow}{while} (!is.\mbox{\hyperlink{class_t_i_stream_af8ad0a31e14e94179bd5688f13340528}{eos}}()) \{}
\DoxyCodeLine{00382         \mbox{\hyperlink{class_t_persist}{TPersist}} *p = 0;}
\DoxyCodeLine{00383         is >> p;}
\DoxyCodeLine{00384         \mbox{\hyperlink{class_t_stage_object_spline}{TStageObjectSpline}} *spline = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_stage_object_spline}{TStageObjectSpline}} *\textcolor{keyword}{>}(p);}
\DoxyCodeLine{00385         \mbox{\hyperlink{class_t_stage_object_tree_a5ccbb69161f93632ce7408dfb58bb8be}{insertSpline}}(spline);}
\DoxyCodeLine{00386       \}}
\DoxyCodeLine{00387       is.\mbox{\hyperlink{class_t_i_stream_a84110f30d5adcc50d6000e9c99cd4708}{matchEndTag}}();}
\DoxyCodeLine{00388     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}pegbar"{}}) \{}
\DoxyCodeLine{00389       std::string idStr = is.\mbox{\hyperlink{class_t_i_stream_a03a74e5481dd5b2d328351c5c4022ab2}{getTagAttribute}}(\textcolor{stringliteral}{"{}id"{}});}
\DoxyCodeLine{00390       \textcolor{keywordflow}{if} (idStr == \textcolor{stringliteral}{"{}"{}})  \textcolor{comment}{// vecchio formato}}
\DoxyCodeLine{00391       \{}
\DoxyCodeLine{00392         is >> idStr;}
\DoxyCodeLine{00393       \}}
\DoxyCodeLine{00394       \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} \textcolor{keywordtype}{id} = toStageObjectId(idStr);}
\DoxyCodeLine{00395       \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.isCamera() \&\& is.\mbox{\hyperlink{class_t_i_stream_a03a74e5481dd5b2d328351c5c4022ab2}{getTagAttribute}}(\textcolor{stringliteral}{"{}active"{}}) == \textcolor{stringliteral}{"{}yes"{}})}
\DoxyCodeLine{00396         m\_imp-\/>m\_currentCameraId = id;}
\DoxyCodeLine{00397       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.isCamera() \&\& is.\mbox{\hyperlink{class_t_i_stream_a03a74e5481dd5b2d328351c5c4022ab2}{getTagAttribute}}(\textcolor{stringliteral}{"{}activepreview"{}}) == \textcolor{stringliteral}{"{}yes"{}})}
\DoxyCodeLine{00398         m\_imp-\/>m\_currentPreviewCameraId = id;}
\DoxyCodeLine{00399       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.isCamera() \&\& is.\mbox{\hyperlink{class_t_i_stream_a03a74e5481dd5b2d328351c5c4022ab2}{getTagAttribute}}(\textcolor{stringliteral}{"{}activeboth"{}}) == \textcolor{stringliteral}{"{}yes"{}})}
\DoxyCodeLine{00400         m\_imp-\/>m\_currentPreviewCameraId = m\_imp-\/>m\_currentCameraId = id;}
\DoxyCodeLine{00401 }
\DoxyCodeLine{00402       \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.isCamera()) \{}
\DoxyCodeLine{00403         \textcolor{keywordflow}{if} (is.\mbox{\hyperlink{class_t_i_stream_a03a74e5481dd5b2d328351c5c4022ab2}{getTagAttribute}}(\textcolor{stringliteral}{"{}columnLocked"{}}) == \textcolor{stringliteral}{"{}yes"{}})}
\DoxyCodeLine{00404           xsh-\/>setCameraColumnLocked(\textcolor{keyword}{true});}
\DoxyCodeLine{00405         \textcolor{keywordflow}{if} (is.\mbox{\hyperlink{class_t_i_stream_a03a74e5481dd5b2d328351c5c4022ab2}{getTagAttribute}}(\textcolor{stringliteral}{"{}columnFolded"{}}) == \textcolor{stringliteral}{"{}yes"{}})}
\DoxyCodeLine{00406           xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3c7f0358ee5d555df82ae864af8584d0}{getColumnFan}}(Orientations::topToBottom())-\/>\mbox{\hyperlink{class_column_fan_ac44ed24041848fc51bd51165ea136df1}{deactivate}}(-\/1);}
\DoxyCodeLine{00407       \}}
\DoxyCodeLine{00408 }
\DoxyCodeLine{00409       \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *pegbar =}
\DoxyCodeLine{00410           \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_stage_object}{TStageObject}} *\textcolor{keyword}{>}(\mbox{\hyperlink{class_t_stage_object_tree_a688e5b4f2f5730afb0cb10264f13a113}{getStageObject}}(\textcolor{keywordtype}{id}, \textcolor{keyword}{true}));}
\DoxyCodeLine{00411       \textcolor{keywordflow}{if} (!pegbar)}
\DoxyCodeLine{00412         \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}TStageObjectTree::loadData. can't create the pegbar"{}});}
\DoxyCodeLine{00413       pegbar-\/>loadData(is);}
\DoxyCodeLine{00414       \textcolor{keywordflow}{if} (pegbar-\/>isGrouped() \&\& m\_imp-\/>m\_groupIdCount < pegbar-\/>getGroupId())}
\DoxyCodeLine{00415         m\_imp-\/>m\_groupIdCount = pegbar-\/>getGroupId();}
\DoxyCodeLine{00416       is.\mbox{\hyperlink{class_t_i_stream_a84110f30d5adcc50d6000e9c99cd4708}{matchEndTag}}();}
\DoxyCodeLine{00417 }
\DoxyCodeLine{00418       std::string name = pegbar-\/>getName();}
\DoxyCodeLine{00419     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tagName == \textcolor{stringliteral}{"{}grid\_dimension"{}}) \{}
\DoxyCodeLine{00420       is >> m\_imp-\/>m\_dagGridDimension;}
\DoxyCodeLine{00421       is.\mbox{\hyperlink{class_t_i_stream_a84110f30d5adcc50d6000e9c99cd4708}{matchEndTag}}();}
\DoxyCodeLine{00422     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00423       \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}pegbartree: unexpected tag : "{}} + tagName);}
\DoxyCodeLine{00424   \}}
\DoxyCodeLine{00425 }
\DoxyCodeLine{00426 \textcolor{preprocessor}{\#ifndef NDEBUG}}
\DoxyCodeLine{00427   checkIntegrity();}
\DoxyCodeLine{00428 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00429 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00121}{Column\+Fan\+::deactivate()}}, \mbox{\hyperlink{l01169}{TIStream\+::eos()}}, \mbox{\hyperlink{l01568}{TXsheet\+::get\+Column\+Fan()}}, \mbox{\hyperlink{l00164}{get\+Stage\+Object()}}, \mbox{\hyperlink{l01190}{TIStream\+::get\+Tag\+Attribute()}}, \mbox{\hyperlink{l00621}{insert\+Spline()}}, \mbox{\hyperlink{l01156}{TIStream\+::match\+End\+Tag()}}, and \mbox{\hyperlink{l01178}{TIStream\+::match\+Tag()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_ad573114c9e935da9c7114317639edf1c}\label{class_t_stage_object_tree_ad573114c9e935da9c7114317639edf1c}} 
\index{TStageObjectTree@{TStageObjectTree}!removeColumn@{removeColumn}}
\index{removeColumn@{removeColumn}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{removeColumn()}{removeColumn()}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::remove\+Column (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})}

\begin{DoxyVerb}      Removes from the current stage object tree the stage object column
\end{DoxyVerb}
 (TStage\+Object\+Id\+::\+Column\+Id), of index {\bfseries{{\itshape index}.}} Children of the removed column are linked to the parent of the removed column. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_stage_object_tree_afa5aa5663d6fe0b0c41b7e7983d89d4a}{insert\+Column()}} and \mbox{\hyperlink{class_t_stage_object_tree_a1100b675dde5a0e995574eb4e3bb6b42}{remove\+Stage\+Object()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00243                                              \{}
\DoxyCodeLine{00244   assert(0 <= index);}
\DoxyCodeLine{00245 }
\DoxyCodeLine{00246   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} \textcolor{keywordtype}{id} = TStageObjectId::ColumnId(index);}
\DoxyCodeLine{00247   std::map<TStageObjectId, TStageObject *> \&pegbars = m\_imp-\/>m\_pegbarTable;}
\DoxyCodeLine{00248   std::map<TStageObjectId, TStageObject *>::iterator pit;}
\DoxyCodeLine{00249   pit                           = pegbars.find(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00250   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *imp             = 0;}
\DoxyCodeLine{00251   \textcolor{keywordflow}{if} (pit != pegbars.end()) imp = pit-\/>second;}
\DoxyCodeLine{00252 }
\DoxyCodeLine{00253   \textcolor{keywordflow}{if} (imp) \{}
\DoxyCodeLine{00254     \textcolor{comment}{// i figli della colonna rimossa si attaccano al "{}nonno"{}}}
\DoxyCodeLine{00255     \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} parentId = imp-\/>\mbox{\hyperlink{class_t_stage_object_afb4724a8cc2ef7eb2c6c7585834210f2}{getParent}}();}
\DoxyCodeLine{00256     imp-\/>\mbox{\hyperlink{class_t_stage_object_a474f25731dd79fb64dcd98926d17905a}{detachFromParent}}();}
\DoxyCodeLine{00257     \textcolor{comment}{/* while(! m\_children.empty())}}
\DoxyCodeLine{00258 \textcolor{comment}{\{}}
\DoxyCodeLine{00259 \textcolor{comment}{TStageObject*son = *imp-\/>m\_children.begin();}}
\DoxyCodeLine{00260 \textcolor{comment}{son-\/>setParent(parentId);}}
\DoxyCodeLine{00261 \textcolor{comment}{\}*/}}
\DoxyCodeLine{00262     imp-\/>\mbox{\hyperlink{class_t_stage_object_a6cf4d9abc73ac32ec88cd9d29e4f0a8e}{attachChildrenToParent}}(parentId);}
\DoxyCodeLine{00263     imp-\/>release();}
\DoxyCodeLine{00264   \}}
\DoxyCodeLine{00265   imp = 0;}
\DoxyCodeLine{00266 }
\DoxyCodeLine{00267   pegbars.erase(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00268   std::vector<std::pair<TStageObjectId, TStageObject *>> tmp(pegbars.begin(),}
\DoxyCodeLine{00269                                                              pegbars.end());}
\DoxyCodeLine{00270   std::vector<std::pair<TStageObjectId, TStageObject *>>::iterator it;}
\DoxyCodeLine{00271   \textcolor{keywordflow}{for} (it = tmp.begin(); it != tmp.end(); ++it) \{}
\DoxyCodeLine{00272     \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} j = it-\/>first;}
\DoxyCodeLine{00273     \textcolor{keywordflow}{if} (j.isColumn() \&\& j.getIndex() > index) \{}
\DoxyCodeLine{00274       it-\/>first = TStageObjectId::ColumnId(j.getIndex() -\/ 1);}
\DoxyCodeLine{00275       it-\/>second-\/>setId(it-\/>first);}
\DoxyCodeLine{00276     \}}
\DoxyCodeLine{00277   \}}
\DoxyCodeLine{00278 }
\DoxyCodeLine{00279   pegbars.clear();}
\DoxyCodeLine{00280   pegbars.insert(tmp.begin(), tmp.end());}
\DoxyCodeLine{00281 }
\DoxyCodeLine{00282 \textcolor{preprocessor}{\#ifndef NDEBUG}}
\DoxyCodeLine{00283   checkIntegrity();}
\DoxyCodeLine{00284 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00285 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00623}{TStage\+Object\+::attach\+Children\+To\+Parent()}}, \mbox{\hyperlink{l00615}{TStage\+Object\+::detach\+From\+Parent()}}, and \mbox{\hyperlink{l00632}{TStage\+Object\+::get\+Parent()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_a93c569d92f0814721d0d0b7def84434a}\label{class_t_stage_object_tree_a93c569d92f0814721d0d0b7def84434a}} 
\index{TStageObjectTree@{TStageObjectTree}!removeSpline@{removeSpline}}
\index{removeSpline@{removeSpline}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{removeSpline()}{removeSpline()}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::remove\+Spline (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_stage_object_spline}{TStage\+Object\+Spline}} $\ast$}]{spline }\end{DoxyParamCaption})}

Removes from stage object tree the spline {\bfseries{spline}}. It deletes the object. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_stage_object_tree_a5ccbb69161f93632ce7408dfb58bb8be}{insert\+Spline()}} and \mbox{\hyperlink{class_t_stage_object_tree_a28f4faf0358394e8af541a70d366baad}{create\+Spline()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00599                                                               \{}
\DoxyCodeLine{00600   assert(spline-\/>getId() >= 0);}
\DoxyCodeLine{00601   std::map<int, TStageObjectSpline *> \&splines = m\_imp-\/>m\_splines;}
\DoxyCodeLine{00602   std::map<int, TStageObjectSpline *>::iterator it;}
\DoxyCodeLine{00603   it = splines.find(spline-\/>getId());}
\DoxyCodeLine{00604   \textcolor{keywordflow}{if} (it == splines.end()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00605   splines.erase(it);}
\DoxyCodeLine{00606   assert(!\mbox{\hyperlink{class_t_stage_object_tree_ad7fbf2fc5bdf3d4d009978775c90ec26}{containsSpline}}(spline));}
\DoxyCodeLine{00607   spline-\/>release();}
\DoxyCodeLine{00608 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00612}{contains\+Spline()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_a1100b675dde5a0e995574eb4e3bb6b42}\label{class_t_stage_object_tree_a1100b675dde5a0e995574eb4e3bb6b42}} 
\index{TStageObjectTree@{TStageObjectTree}!removeStageObject@{removeStageObject}}
\index{removeStageObject@{removeStageObject}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{removeStageObject()}{removeStageObject()}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::remove\+Stage\+Object (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} \&}]{id }\end{DoxyParamCaption})}

\begin{DoxyVerb}      Remove from current stage object tree the stage object with \b
\end{DoxyVerb}
 \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} {\bfseries{{\itshape id}.}} ~\newline
 It doesn\textquotesingle{}t delete the stage object. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_stage_object_tree_a8c4f8e8fc52db23d3b310bad3403f69e}{insert\+Stage\+Object()}} and \mbox{\hyperlink{class_t_stage_object_tree_ad573114c9e935da9c7114317639edf1c}{remove\+Column()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00289                                                                  \{}
\DoxyCodeLine{00290   std::map<TStageObjectId, TStageObject *> \&pegbars = m\_imp-\/>m\_pegbarTable;}
\DoxyCodeLine{00291   assert(pegbars.count(\textcolor{keywordtype}{id}) > 0);}
\DoxyCodeLine{00292   \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *obj = pegbars[id];}
\DoxyCodeLine{00293   obj-\/>\mbox{\hyperlink{class_t_stage_object_a6cf4d9abc73ac32ec88cd9d29e4f0a8e}{attachChildrenToParent}}(obj-\/>\mbox{\hyperlink{class_t_stage_object_afb4724a8cc2ef7eb2c6c7585834210f2}{getParent}}());}
\DoxyCodeLine{00294   obj-\/>\mbox{\hyperlink{class_t_stage_object_a474f25731dd79fb64dcd98926d17905a}{detachFromParent}}();}
\DoxyCodeLine{00295   obj-\/>release();}
\DoxyCodeLine{00296   pegbars.erase(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00297   \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.isCamera()) m\_imp-\/>m\_cameraCount-\/-\/;}
\DoxyCodeLine{00298 \textcolor{preprocessor}{\#ifndef NDEBUG}}
\DoxyCodeLine{00299   checkIntegrity();}
\DoxyCodeLine{00300 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00301 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00623}{TStage\+Object\+::attach\+Children\+To\+Parent()}}, \mbox{\hyperlink{l00615}{TStage\+Object\+::detach\+From\+Parent()}}, and \mbox{\hyperlink{l00632}{TStage\+Object\+::get\+Parent()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_a0c95818f4ad11c0954e73945b6a9c0a8}\label{class_t_stage_object_tree_a0c95818f4ad11c0954e73945b6a9c0a8}} 
\index{TStageObjectTree@{TStageObjectTree}!saveData@{saveData}}
\index{saveData@{saveData}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{saveData()}{saveData()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::save\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_o_stream}{TOStream}} \&}]{os }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

\begin{DoxyVerb} This is a pure virtual function and must be overridden with a method
\end{DoxyVerb}
 that implements the object saving to a data stream (i.\+e put the object\textquotesingle{}s features on a formatted data stream). For example the \mbox{\hyperlink{class_t_stage_object}{TStage\+Object}} class use his implementation to save the values of the parameters that characterizes a stage object as name, coordinates, etc... on a file {\itshape os} is an output file stream. 

Implements \mbox{\hyperlink{class_t_persist_afb991f7b26f14dbee1740ef036ff4e85}{TPersist}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00154 \{\};  \textcolor{comment}{// not used}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_stage_object_tree_aa2a801df14bd1ae40df836bc029ae8c5}\label{class_t_stage_object_tree_aa2a801df14bd1ae40df836bc029ae8c5}} 
\index{TStageObjectTree@{TStageObjectTree}!saveData@{saveData}}
\index{saveData@{saveData}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{saveData()}{saveData()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::save\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_o_stream}{TOStream}} \&}]{os,  }\item[{int}]{occupied\+Column\+Count,  }\item[{\mbox{\hyperlink{class_t_xsheet}{TXsheet}} $\ast$}]{xsh }\end{DoxyParamCaption})}

\begin{DoxyVerb} Saves object's data (name, center coords, etc ) to a tagged data
\end{DoxyVerb}
 stream {\bfseries{{\itshape os} saved}} on a file. This method call iteratively all stage objects in the tree and save their data. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00434                                               \{}
\DoxyCodeLine{00435   std::map<TStageObjectId, TStageObject *>::iterator it;}
\DoxyCodeLine{00436   std::map<TStageObjectId, TStageObject *> \&pegbars = m\_imp-\/>m\_pegbarTable;}
\DoxyCodeLine{00437   \textcolor{keywordflow}{if} (!m\_imp-\/>m\_splines.empty()) \{}
\DoxyCodeLine{00438     os.\mbox{\hyperlink{class_t_o_stream_a38fe0f56d934f1c25e2b5d8156415673}{openChild}}(\textcolor{stringliteral}{"{}splines"{}});}
\DoxyCodeLine{00439     std::map<int, TStageObjectSpline *>::iterator it;}
\DoxyCodeLine{00440     \textcolor{keywordflow}{for} (it = m\_imp-\/>m\_splines.begin(); it != m\_imp-\/>m\_splines.end(); it++) \{}
\DoxyCodeLine{00441       os << it-\/>second;}
\DoxyCodeLine{00442     \}}
\DoxyCodeLine{00443     os.\mbox{\hyperlink{class_t_o_stream_ae80752da32b21a502953e151e7c4b2ee}{closeChild}}();}
\DoxyCodeLine{00444   \}}
\DoxyCodeLine{00445   \textcolor{keywordflow}{for} (it = pegbars.begin(); it != pegbars.end(); ++it) \{}
\DoxyCodeLine{00446     \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} objectId = it-\/>first;}
\DoxyCodeLine{00447     \mbox{\hyperlink{class_t_stage_object}{TStageObject}} *pegbar    = it-\/>second;}
\DoxyCodeLine{00448 }
\DoxyCodeLine{00449     \textcolor{keywordflow}{if} (objectId.\mbox{\hyperlink{class_t_stage_object_id_af6d13fcf31e7e10eef28f085855f469c}{isColumn}}() \&\& objectId.getIndex() >= occupiedColumnCount)}
\DoxyCodeLine{00450       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00451 }
\DoxyCodeLine{00452     std::map<std::string, std::string> attr;}
\DoxyCodeLine{00453     attr[\textcolor{stringliteral}{"{}id"{}}] = objectId.\mbox{\hyperlink{class_t_stage_object_id_a2a13bb363b1662a7c5e70fdafe9bed5f}{toString}}();}
\DoxyCodeLine{00454     \textcolor{keywordflow}{if} (objectId == m\_imp-\/>m\_currentCameraId \&\&}
\DoxyCodeLine{00455         objectId == m\_imp-\/>m\_currentPreviewCameraId)}
\DoxyCodeLine{00456       attr[\textcolor{stringliteral}{"{}activeboth"{}}] = \textcolor{stringliteral}{"{}yes"{}};}
\DoxyCodeLine{00457     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (objectId == m\_imp-\/>m\_currentCameraId)}
\DoxyCodeLine{00458       attr[\textcolor{stringliteral}{"{}active"{}}] = \textcolor{stringliteral}{"{}yes"{}};}
\DoxyCodeLine{00459     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (objectId == m\_imp-\/>m\_currentPreviewCameraId)}
\DoxyCodeLine{00460       attr[\textcolor{stringliteral}{"{}activepreview"{}}] = \textcolor{stringliteral}{"{}yes"{}};}
\DoxyCodeLine{00461 }
\DoxyCodeLine{00462     \textcolor{comment}{// Since we don't have a real column and we want the files to open in}}
\DoxyCodeLine{00463     \textcolor{comment}{// older versions, we'll store column settings on the camera pegbar}}
\DoxyCodeLine{00464     \textcolor{keywordflow}{if} ((objectId == m\_imp-\/>m\_currentCameraId ||}
\DoxyCodeLine{00465          objectId == m\_imp-\/>m\_currentPreviewCameraId)) \{}
\DoxyCodeLine{00466       \textcolor{keywordflow}{if} (xsh-\/>isCameraColumnLocked()) attr[\textcolor{stringliteral}{"{}columnLocked"{}}] = \textcolor{stringliteral}{"{}yes"{}};}
\DoxyCodeLine{00467       \textcolor{keywordflow}{if} (!xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3c7f0358ee5d555df82ae864af8584d0}{getColumnFan}}(Orientations::topToBottom())-\/>\mbox{\hyperlink{class_column_fan_abf77607d6d35905a31c9a4640dc0c0ef}{isActive}}(-\/1))}
\DoxyCodeLine{00468         attr[\textcolor{stringliteral}{"{}columnFolded"{}}] = \textcolor{stringliteral}{"{}yes"{}};}
\DoxyCodeLine{00469     \}}
\DoxyCodeLine{00470 }
\DoxyCodeLine{00471     os.\mbox{\hyperlink{class_t_o_stream_a38fe0f56d934f1c25e2b5d8156415673}{openChild}}(\textcolor{stringliteral}{"{}pegbar"{}}, attr);}
\DoxyCodeLine{00472 }
\DoxyCodeLine{00473     pegbar-\/>saveData(os);}
\DoxyCodeLine{00474     os.\mbox{\hyperlink{class_t_o_stream_ae80752da32b21a502953e151e7c4b2ee}{closeChild}}();}
\DoxyCodeLine{00475   \}}
\DoxyCodeLine{00476   os.\mbox{\hyperlink{class_t_o_stream_a9cd1359e6b21d85786708c7e680756d1}{child}}(\textcolor{stringliteral}{"{}grid\_dimension"{}}) << (int)m\_imp-\/>m\_dagGridDimension;}
\DoxyCodeLine{00477 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00482}{TOStream\+::child()}}, \mbox{\hyperlink{l00520}{TOStream\+::close\+Child()}}, \mbox{\hyperlink{l01568}{TXsheet\+::get\+Column\+Fan()}}, \mbox{\hyperlink{l00133}{Column\+Fan\+::is\+Active()}}, \mbox{\hyperlink{l00180}{TStage\+Object\+Id\+::is\+Column()}}, \mbox{\hyperlink{class_t_o_stream_a38fe0f56d934f1c25e2b5d8156415673}{TOStream\+::open\+Child()}}, and \mbox{\hyperlink{l00215}{TStage\+Object\+Id\+::to\+String()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_a493dff1b6348d709f7387f05e7656e57}\label{class_t_stage_object_tree_a493dff1b6348d709f7387f05e7656e57}} 
\index{TStageObjectTree@{TStageObjectTree}!setCurrentCameraId@{setCurrentCameraId}}
\index{setCurrentCameraId@{setCurrentCameraId}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{setCurrentCameraId()}{setCurrentCameraId()}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::set\+Current\+Camera\+Id (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} \&}]{id }\end{DoxyParamCaption})}

\begin{DoxyVerb}      Sets stage object tree current camera to \b TStageObjectId \b id.
\end{DoxyVerb}
 \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_t_stage_object_tree_a7d63ae5d60c3a3aacf5da58c108ac167}{get\+Current\+Camera\+Id()}} 
\end{DoxySeeAlso}

\begin{DoxyCode}{0}
\DoxyCodeLine{00520                                                                   \{}
\DoxyCodeLine{00521   assert(\textcolor{keywordtype}{id}.isCamera());}
\DoxyCodeLine{00522   m\_imp-\/>m\_currentCameraId = id;}
\DoxyCodeLine{00523 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l01102}{Output\+Settings\+Popup\+::on\+Camera\+Changed()}}.

\mbox{\Hypertarget{class_t_stage_object_tree_ae95c2352020de388bb7e928f02e5df9c}\label{class_t_stage_object_tree_ae95c2352020de388bb7e928f02e5df9c}} 
\index{TStageObjectTree@{TStageObjectTree}!setCurrentPreviewCameraId@{setCurrentPreviewCameraId}}
\index{setCurrentPreviewCameraId@{setCurrentPreviewCameraId}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{setCurrentPreviewCameraId()}{setCurrentPreviewCameraId()}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::set\+Current\+Preview\+Camera\+Id (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_stage_object_id}{TStage\+Object\+Id}} \&}]{id }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00527                                                                          \{}
\DoxyCodeLine{00528   assert(\textcolor{keywordtype}{id}.isCamera());}
\DoxyCodeLine{00529   m\_imp-\/>m\_currentPreviewCameraId = id;}
\DoxyCodeLine{00530 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_stage_object_tree_abef47e7e9c89a82e6eb181b825081a5e}\label{class_t_stage_object_tree_abef47e7e9c89a82e6eb181b825081a5e}} 
\index{TStageObjectTree@{TStageObjectTree}!setDagGridDimension@{setDagGridDimension}}
\index{setDagGridDimension@{setDagGridDimension}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{setDagGridDimension()}{setDagGridDimension()}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::set\+Dag\+Grid\+Dimension (\begin{DoxyParamCaption}\item[{int}]{dim }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00682                                                   \{}
\DoxyCodeLine{00683   m\_imp-\/>m\_dagGridDimension = dim;}
\DoxyCodeLine{00684 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_stage_object_tree_a81f2ebc7adc86f9e412c89352799daa5}\label{class_t_stage_object_tree_a81f2ebc7adc86f9e412c89352799daa5}} 
\index{TStageObjectTree@{TStageObjectTree}!setGrammar@{setGrammar}}
\index{setGrammar@{setGrammar}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{setGrammar()}{setGrammar()}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::set\+Grammar (\begin{DoxyParamCaption}\item[{const TDouble\+ParamP \&}]{param }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00653                                                             \{}
\DoxyCodeLine{00654   \textcolor{keywordflow}{if} (m\_imp-\/>m\_grammar) param-\/>setGrammar(m\_imp-\/>m\_grammar);}
\DoxyCodeLine{00655 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_stage_object_tree_a3ce0c9887c27434a5951f50c654537ca}\label{class_t_stage_object_tree_a3ce0c9887c27434a5951f50c654537ca}} 
\index{TStageObjectTree@{TStageObjectTree}!setHandleManager@{setHandleManager}}
\index{setHandleManager@{setHandleManager}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{setHandleManager()}{setHandleManager()}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::set\+Handle\+Manager (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_handle_manager}{Handle\+Manager}} $\ast$}]{hm }\end{DoxyParamCaption})}

\begin{DoxyVerb} Sets the handle manager to be \b \e hm.
 An Handle Manager is an object that implements a method to retrieve
\end{DoxyVerb}
 the point position of the handle given its id and its name. See \mbox{\hyperlink{class_t_stage_object_aebee1ac99c0341fe053f272b93586ef2}{TStage\+Object\+::get\+Handle()}} for an explanation of what a handle is. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00544                                                          \{}
\DoxyCodeLine{00545   m\_imp-\/>m\_handleManager = hm;}
\DoxyCodeLine{00546 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_stage_object_tree_af84641011e78fd26fa22794beff4aecc}\label{class_t_stage_object_tree_af84641011e78fd26fa22794beff4aecc}} 
\index{TStageObjectTree@{TStageObjectTree}!swapColumns@{swapColumns}}
\index{swapColumns@{swapColumns}!TStageObjectTree@{TStageObjectTree}}
\doxysubsubsection{\texorpdfstring{swapColumns()}{swapColumns()}}
{\footnotesize\ttfamily void TStage\+Object\+Tree\+::swap\+Columns (\begin{DoxyParamCaption}\item[{int}]{i,  }\item[{int}]{j }\end{DoxyParamCaption})}

This method swaps column {\bfseries{{\itshape i} with}} column {\bfseries{{\itshape j}.}} Columns {\bfseries{{\itshape i} and}} {\bfseries{{\itshape j} must}} exist. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00331                                                \{}
\DoxyCodeLine{00332   \textcolor{keywordflow}{if} (i == j) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00333   \textcolor{keywordflow}{if} (i > j) std::swap(i, j);}
\DoxyCodeLine{00334   std::map<TStageObjectId, TStageObject *> \&pegbars = m\_imp-\/>m\_pegbarTable;}
\DoxyCodeLine{00335   std::map<TStageObjectId, TStageObject *>::iterator iti, itj;}
\DoxyCodeLine{00336   std::map<TStageObjectId, TStageObject *>::const\_iterator end = pegbars.end();}
\DoxyCodeLine{00337   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} idi = TStageObjectId::ColumnId(i);}
\DoxyCodeLine{00338   \mbox{\hyperlink{class_t_stage_object_id}{TStageObjectId}} idj = TStageObjectId::ColumnId(j);}
\DoxyCodeLine{00339   assert(checkId(\textcolor{keyword}{this}, idi));}
\DoxyCodeLine{00340   assert(checkId(\textcolor{keyword}{this}, idj));}
\DoxyCodeLine{00341 }
\DoxyCodeLine{00342   iti = pegbars.find(idi);}
\DoxyCodeLine{00343   itj = pegbars.find(idj);}
\DoxyCodeLine{00344 }
\DoxyCodeLine{00345   \textcolor{keywordflow}{if} (iti == end \&\& itj == end) \{}
\DoxyCodeLine{00346   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (iti != end \&\& itj != end) \{}
\DoxyCodeLine{00347     assert(iti-\/>second);}
\DoxyCodeLine{00348     assert(itj-\/>second);}
\DoxyCodeLine{00349     std::swap(iti-\/>second, itj-\/>second);}
\DoxyCodeLine{00350     iti-\/>second-\/>setId(iti-\/>first);}
\DoxyCodeLine{00351     itj-\/>second-\/>setId(itj-\/>first);}
\DoxyCodeLine{00352   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (iti == end) \{}
\DoxyCodeLine{00353     \textcolor{comment}{// iti e' il minore. Se manca iti deve mancare anche itj}}
\DoxyCodeLine{00354     assert(0);}
\DoxyCodeLine{00355   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00356     \textcolor{comment}{// manca itj, ma iti c'e'. Devo crearne uno per evitare i buchi}}
\DoxyCodeLine{00357     assert(iti != end);}
\DoxyCodeLine{00358     assert(iti-\/>second);}
\DoxyCodeLine{00359     assert(itj == end);}
\DoxyCodeLine{00360     pegbars[idj] = iti-\/>second;}
\DoxyCodeLine{00361     iti-\/>second-\/>setId(idj);}
\DoxyCodeLine{00362     pegbars.erase(iti);}
\DoxyCodeLine{00363 }
\DoxyCodeLine{00364     \textcolor{comment}{// creo}}
\DoxyCodeLine{00365     \mbox{\hyperlink{class_t_stage_object_tree_a688e5b4f2f5730afb0cb10264f13a113}{getStageObject}}(idi, \textcolor{keyword}{true});}
\DoxyCodeLine{00366   \}}
\DoxyCodeLine{00367   assert(checkId(\textcolor{keyword}{this}, idi));}
\DoxyCodeLine{00368   assert(checkId(\textcolor{keyword}{this}, idj));}
\DoxyCodeLine{00369 }
\DoxyCodeLine{00370 \textcolor{preprocessor}{\#ifndef NDEBUG}}
\DoxyCodeLine{00371   checkIntegrity();}
\DoxyCodeLine{00372 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00373 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00164}{get\+Stage\+Object()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonz/tstageobjecttree.\+h\item 
E\+:/opentoonz/toonz/sources/toonzlib/tstageobjecttree.\+cpp\end{DoxyCompactItemize}
