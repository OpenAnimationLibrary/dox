\hypertarget{class_strokes_data}{}\doxysection{Strokes\+Data Class Reference}
\label{class_strokes_data}\index{StrokesData@{StrokesData}}
Inheritance diagram for Strokes\+Data\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_strokes_data}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_strokes_data_ac8216bb1359b48969228dee845f79321}{Strokes\+Data}} (const \mbox{\hyperlink{class_strokes_data}{Strokes\+Data}} $\ast$src)
\item 
\mbox{\hyperlink{class_strokes_data_a64fcd03415a7fe051718df5845f79860}{Strokes\+Data}} (\mbox{\hyperlink{class_t_vector_image}{TVector\+Image}} $\ast$image)
\item 
\mbox{\hyperlink{class_strokes_data}{Strokes\+Data}} $\ast$ \mbox{\hyperlink{class_strokes_data_a327b423846af6bb50d8f85cda70c3c84}{clone}} () const override
\item 
void \mbox{\hyperlink{class_strokes_data_a2d1de5f67559a30dc035f17ae821c84a}{set\+Image}} (\mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} image, const std\+::set$<$ int $>$ \&indices)
\item 
void \mbox{\hyperlink{class_strokes_data_ab95aa5fb517b884da32d950098becf9b}{get\+Image}} (\mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} image, std\+::set$<$ int $>$ \&indices, bool insert) const
\item 
\mbox{\hyperlink{class_toonz_image_data}{Toonz\+Image\+Data}} $\ast$ \mbox{\hyperlink{class_strokes_data_aea6e96b878e7e09d3a7fef1c731c3889}{to\+Toonz\+Image\+Data}} (const \mbox{\hyperlink{class_t_toonz_image_p}{TToonz\+ImageP}} \&image\+To\+Paste) const
\item 
\mbox{\hyperlink{class_full_color_image_data}{Full\+Color\+Image\+Data}} $\ast$ \mbox{\hyperlink{class_strokes_data_a4bb4cc6f70c5225b5e308cb19d4bae62}{to\+Full\+Color\+Image\+Data}} (const \mbox{\hyperlink{class_t_raster_image_p}{TRaster\+ImageP}} \&image\+To\+Paste) const
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \mbox{\hyperlink{class_strokes_data_a7b12b55aeac997d0933e95db07a713cf}{m\+\_\+image}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_strokes_data_a2ab49fb8f3dff0637c1b5ce6bbd54e05}\label{class_strokes_data_a2ab49fb8f3dff0637c1b5ce6bbd54e05}} 
\index{StrokesData@{StrokesData}!StrokesData@{StrokesData}}
\index{StrokesData@{StrokesData}!StrokesData@{StrokesData}}
\doxysubsubsection{\texorpdfstring{StrokesData()}{StrokesData()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily Strokes\+Data\+::\+Strokes\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00033 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_strokes_data_ac8216bb1359b48969228dee845f79321}\label{class_strokes_data_ac8216bb1359b48969228dee845f79321}} 
\index{StrokesData@{StrokesData}!StrokesData@{StrokesData}}
\index{StrokesData@{StrokesData}!StrokesData@{StrokesData}}
\doxysubsubsection{\texorpdfstring{StrokesData()}{StrokesData()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily Strokes\+Data\+::\+Strokes\+Data (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_strokes_data}{Strokes\+Data}} $\ast$}]{src }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00034 : m\_image(src-\/>m\_image) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_strokes_data_a64fcd03415a7fe051718df5845f79860}\label{class_strokes_data_a64fcd03415a7fe051718df5845f79860}} 
\index{StrokesData@{StrokesData}!StrokesData@{StrokesData}}
\index{StrokesData@{StrokesData}!StrokesData@{StrokesData}}
\doxysubsubsection{\texorpdfstring{StrokesData()}{StrokesData()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily Strokes\+Data\+::\+Strokes\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_vector_image}{TVector\+Image}} $\ast$}]{image }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00035 : m\_image(image) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{class_strokes_data_a9cef382c29c6ae11bcb4296e486ef656}\label{class_strokes_data_a9cef382c29c6ae11bcb4296e486ef656}} 
\index{StrokesData@{StrokesData}!````~StrokesData@{$\sim$StrokesData}}
\index{````~StrokesData@{$\sim$StrokesData}!StrokesData@{StrokesData}}
\doxysubsubsection{\texorpdfstring{$\sim$StrokesData()}{~StrokesData()}}
{\footnotesize\ttfamily Strokes\+Data\+::$\sim$\+Strokes\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00036 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_strokes_data_a327b423846af6bb50d8f85cda70c3c84}\label{class_strokes_data_a327b423846af6bb50d8f85cda70c3c84}} 
\index{StrokesData@{StrokesData}!clone@{clone}}
\index{clone@{clone}!StrokesData@{StrokesData}}
\doxysubsubsection{\texorpdfstring{clone()}{clone()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_strokes_data}{Strokes\+Data}} $\ast$ Strokes\+Data\+::clone (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_dv_mime_data}{Dv\+Mime\+Data}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00038                                       \{}
\DoxyCodeLine{00039     \mbox{\hyperlink{class_t_vector_image}{TVectorImage}} *vi = 0;}
\DoxyCodeLine{00040     \textcolor{keywordflow}{if} (m\_image) vi  = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_vector_image}{TVectorImage}} *\textcolor{keyword}{>}(m\_image-\/>cloneImage());}
\DoxyCodeLine{00041     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{class_strokes_data}{StrokesData}}(vi);}
\DoxyCodeLine{00042   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_strokes_data_ab95aa5fb517b884da32d950098becf9b}\label{class_strokes_data_ab95aa5fb517b884da32d950098becf9b}} 
\index{StrokesData@{StrokesData}!getImage@{getImage}}
\index{getImage@{getImage}!StrokesData@{StrokesData}}
\doxysubsubsection{\texorpdfstring{getImage()}{getImage()}}
{\footnotesize\ttfamily void Strokes\+Data\+::get\+Image (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}}}]{image,  }\item[{std\+::set$<$ int $>$ \&}]{indices,  }\item[{bool}]{insert }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00104                                               \{}
\DoxyCodeLine{00105   \textcolor{keywordflow}{if} (!m\_image) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00106 }
\DoxyCodeLine{00107   \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} srcImg = m\_image;}
\DoxyCodeLine{00108 }
\DoxyCodeLine{00109   QMutexLocker lock(image-\/>getMutex());}
\DoxyCodeLine{00110   \textcolor{keywordflow}{if} (insert) \{}
\DoxyCodeLine{00111     \mbox{\hyperlink{class_t_affine}{TAffine}} offset    = findOffset(srcImg, image);}
\DoxyCodeLine{00112     UINT oldImageSize = image-\/>getStrokeCount();}
\DoxyCodeLine{00113 }
\DoxyCodeLine{00114     \textcolor{keywordtype}{int} insertAt      = image-\/>mergeImage(srcImg, offset, \textcolor{keyword}{false});}
\DoxyCodeLine{00115     UINT newImageSize = image-\/>getStrokeCount();}
\DoxyCodeLine{00116     indices.clear();}
\DoxyCodeLine{00117 }
\DoxyCodeLine{00118     \textcolor{keywordflow}{if} (insertAt == 0)}
\DoxyCodeLine{00119       \textcolor{keywordflow}{for} (UINT sI = oldImageSize; sI < newImageSize; sI++) indices.insert(sI);}
\DoxyCodeLine{00120     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00121       \textcolor{keywordflow}{for} (UINT sI = oldImageSize; sI < newImageSize; sI++)}
\DoxyCodeLine{00122         indices.insert(sI -\/ oldImageSize + insertAt);}
\DoxyCodeLine{00123   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00124     std::vector<int> indicesToInsert(indices.begin(), indices.end());}
\DoxyCodeLine{00125     \textcolor{keywordflow}{if} (indicesToInsert.empty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00126     image-\/>insertImage(srcImg, indicesToInsert);}
\DoxyCodeLine{00127   \}}
\DoxyCodeLine{00128 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_strokes_data_a2d1de5f67559a30dc035f17ae821c84a}\label{class_strokes_data_a2d1de5f67559a30dc035f17ae821c84a}} 
\index{StrokesData@{StrokesData}!setImage@{setImage}}
\index{setImage@{setImage}!StrokesData@{StrokesData}}
\doxysubsubsection{\texorpdfstring{setImage()}{setImage()}}
{\footnotesize\ttfamily void Strokes\+Data\+::set\+Image (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}}}]{image,  }\item[{const std\+::set$<$ int $>$ \&}]{indices }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00087                                                                           \{}
\DoxyCodeLine{00088   \textcolor{keywordflow}{if} (!image) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00089   \textcolor{keywordflow}{if} (indices.empty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00090 }
\DoxyCodeLine{00091   \textcolor{comment}{// indices e' un set; splitImage si aspetta un vector}}
\DoxyCodeLine{00092   \mbox{\hyperlink{classvector}{vector<int>}} indicesV(indices.begin(), indices.end());}
\DoxyCodeLine{00093   QMutexLocker lock(image-\/>getMutex());}
\DoxyCodeLine{00094   m\_image = image-\/>splitImage(indicesV, \textcolor{keyword}{false});}
\DoxyCodeLine{00095   \textcolor{keywordflow}{if} (m\_image-\/>getPalette() == 0) \{}
\DoxyCodeLine{00096     \textcolor{comment}{// nel caso lo stroke sia un path (e quindi senza palette)}}
\DoxyCodeLine{00097     m\_image-\/>setPalette(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_palette}{TPalette}}());}
\DoxyCodeLine{00098   \}}
\DoxyCodeLine{00099 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_strokes_data_a4bb4cc6f70c5225b5e308cb19d4bae62}\label{class_strokes_data_a4bb4cc6f70c5225b5e308cb19d4bae62}} 
\index{StrokesData@{StrokesData}!toFullColorImageData@{toFullColorImageData}}
\index{toFullColorImageData@{toFullColorImageData}!StrokesData@{StrokesData}}
\doxysubsubsection{\texorpdfstring{toFullColorImageData()}{toFullColorImageData()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_full_color_image_data}{Full\+Color\+Image\+Data}} $\ast$ Strokes\+Data\+::to\+Full\+Color\+Image\+Data (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_raster_image_p}{TRaster\+ImageP}} \&}]{image\+To\+Paste }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00161                                              \{}
\DoxyCodeLine{00162   \textcolor{keywordtype}{double} dpix, dpiy;}
\DoxyCodeLine{00163   imageToPaste-\/>getDpi(dpix, dpiy);}
\DoxyCodeLine{00164   assert(dpix != 0 \&\& dpiy != 0);}
\DoxyCodeLine{00165   \mbox{\hyperlink{class_t_scale}{TScale}} sc(dpix / \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}}, dpiy / \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}});}
\DoxyCodeLine{00166 }
\DoxyCodeLine{00167   \mbox{\hyperlink{class_t_rect_t}{TRectD}} bbox = sc * m\_image-\/>getBBox();}
\DoxyCodeLine{00168   bbox.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}     = tfloor(bbox.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}});}
\DoxyCodeLine{00169   bbox.y0     = tfloor(bbox.y0);}
\DoxyCodeLine{00170   bbox.x1     = tceil(bbox.x1);}
\DoxyCodeLine{00171   bbox.y1     = tceil(bbox.y1);}
\DoxyCodeLine{00172   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} size(bbox.getLx(), bbox.getLy());}
\DoxyCodeLine{00173   \mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} app = TRasterImageUtils::vectorToFullColorImage(}
\DoxyCodeLine{00174       m\_image, sc, m\_image-\/>getPalette(), bbox.getP00(), size, 0, \textcolor{keyword}{true});}
\DoxyCodeLine{00175 }
\DoxyCodeLine{00176   vector<TRectD> rects;}
\DoxyCodeLine{00177   vector<TStroke> strokes;}
\DoxyCodeLine{00178   \mbox{\hyperlink{class_t_stroke}{TStroke}} stroke = getStrokeByRect(bbox);}
\DoxyCodeLine{00179   strokes.push\_back(stroke);}
\DoxyCodeLine{00180   \mbox{\hyperlink{class_full_color_image_data}{FullColorImageData}} *data = \textcolor{keyword}{new} \mbox{\hyperlink{class_full_color_image_data}{FullColorImageData}}();}
\DoxyCodeLine{00181   data-\/>setData(app-\/>getRaster(), m\_image-\/>getPalette(), dpix, dpiy,}
\DoxyCodeLine{00182                 \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(), rects, strokes, strokes, \mbox{\hyperlink{class_t_affine}{TAffine}}());}
\DoxyCodeLine{00183   \textcolor{keywordflow}{return} data;}
\DoxyCodeLine{00184 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_strokes_data_aea6e96b878e7e09d3a7fef1c731c3889}\label{class_strokes_data_aea6e96b878e7e09d3a7fef1c731c3889}} 
\index{StrokesData@{StrokesData}!toToonzImageData@{toToonzImageData}}
\index{toToonzImageData@{toToonzImageData}!StrokesData@{StrokesData}}
\doxysubsubsection{\texorpdfstring{toToonzImageData()}{toToonzImageData()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_toonz_image_data}{Toonz\+Image\+Data}} $\ast$ Strokes\+Data\+::to\+Toonz\+Image\+Data (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_toonz_image_p}{TToonz\+ImageP}} \&}]{image\+To\+Paste }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00133                                             \{}
\DoxyCodeLine{00134   \textcolor{keywordtype}{double} dpix, dpiy;}
\DoxyCodeLine{00135   imageToPaste-\/>getDpi(dpix, dpiy);}
\DoxyCodeLine{00136   assert(dpix != 0 \&\& dpiy != 0);}
\DoxyCodeLine{00137   \mbox{\hyperlink{class_t_scale}{TScale}} sc(dpix / \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}}, dpiy / \mbox{\hyperlink{namespace_stage_ad3e22e31e2bb6fc1d95a572facce2d5b}{Stage::inch}});}
\DoxyCodeLine{00138 }
\DoxyCodeLine{00139   \mbox{\hyperlink{class_t_rect_t}{TRectD}} bbox = sc * m\_image-\/>getBBox();}
\DoxyCodeLine{00140   bbox.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}     = tfloor(bbox.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}});}
\DoxyCodeLine{00141   bbox.y0     = tfloor(bbox.y0);}
\DoxyCodeLine{00142   bbox.x1     = tceil(bbox.x1);}
\DoxyCodeLine{00143   bbox.y1     = tceil(bbox.y1);}
\DoxyCodeLine{00144   \mbox{\hyperlink{class_t_dimension_t}{TDimension}} size(bbox.getLx(), bbox.getLy());}
\DoxyCodeLine{00145   \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} app = ToonzImageUtils::vectorToToonzImage(}
\DoxyCodeLine{00146       m\_image, sc, m\_image-\/>getPalette(), bbox.getP00(), size, 0, \textcolor{keyword}{true});}
\DoxyCodeLine{00147 }
\DoxyCodeLine{00148   vector<TRectD> rects;}
\DoxyCodeLine{00149   vector<TStroke> strokes;}
\DoxyCodeLine{00150   \mbox{\hyperlink{class_t_stroke}{TStroke}} stroke = getStrokeByRect(bbox);}
\DoxyCodeLine{00151   strokes.push\_back(stroke);}
\DoxyCodeLine{00152   \mbox{\hyperlink{class_toonz_image_data}{ToonzImageData}} *data = \textcolor{keyword}{new} \mbox{\hyperlink{class_toonz_image_data}{ToonzImageData}}();}
\DoxyCodeLine{00153   data-\/>setData(app-\/>getRaster(), m\_image-\/>getPalette(), dpix, dpiy,}
\DoxyCodeLine{00154                 \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(), rects, strokes, strokes, \mbox{\hyperlink{class_t_affine}{TAffine}}());}
\DoxyCodeLine{00155   \textcolor{keywordflow}{return} data;}
\DoxyCodeLine{00156 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_strokes_data_a7b12b55aeac997d0933e95db07a713cf}\label{class_strokes_data_a7b12b55aeac997d0933e95db07a713cf}} 
\index{StrokesData@{StrokesData}!m\_image@{m\_image}}
\index{m\_image@{m\_image}!StrokesData@{StrokesData}}
\doxysubsubsection{\texorpdfstring{m\_image}{m\_image}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} Strokes\+Data\+::m\+\_\+image}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonzqt/strokesdata.\+h\item 
E\+:/opentoonz/toonz/sources/toonzqt/strokesdata.\+cpp\end{DoxyCompactItemize}
