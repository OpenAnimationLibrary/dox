\hypertarget{class_speed_in_out_segment_page}{}\doxysection{Speed\+In\+Out\+Segment\+Page Class Reference}
\label{class_speed_in_out_segment_page}\index{SpeedInOutSegmentPage@{SpeedInOutSegmentPage}}
Inheritance diagram for Speed\+In\+Out\+Segment\+Page\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_speed_in_out_segment_page}
\end{center}
\end{figure}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_speed_in_out_segment_page_af497240ed03dd271a312c3dc7f63d1b8}{on\+First\+Handle\+XChanged}} ()
\item 
void \mbox{\hyperlink{class_speed_in_out_segment_page_aacab6e64e2d0d6c0f73524d5c4db1b8c}{on\+First\+Handle\+YChanged}} ()
\item 
void \mbox{\hyperlink{class_speed_in_out_segment_page_a8e23d6836f81b51df1e521592a136e66}{on\+Last\+Handle\+XChanged}} ()
\item 
void \mbox{\hyperlink{class_speed_in_out_segment_page_a16f223e04071ffe5075fac5a358a7ed7}{on\+Last\+Handle\+YChanged}} ()
\item 
void \mbox{\hyperlink{class_speed_in_out_segment_page_ac49e93abde87e042ba5e578d926028d6}{on\+First\+Speed\+Changed}} ()
\item 
void \mbox{\hyperlink{class_speed_in_out_segment_page_a5c11b0a85d9dab83a54f79bd5b145866}{on\+Last\+Speed\+Changed}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_speed_in_out_segment_page_a9107a25607fc769fa7fdfbb6862c1e22}{Speed\+In\+Out\+Segment\+Page}} (\mbox{\hyperlink{class_function_segment_viewer}{Function\+Segment\+Viewer}} $\ast$parent=0)
\item 
void \mbox{\hyperlink{class_speed_in_out_segment_page_aa5fe1f9625c72f11614ca9f1dc69629c}{refresh}} () override
\item 
void \mbox{\hyperlink{class_speed_in_out_segment_page_a6fd15959dbcb96a751b4de28c2cae151}{apply}} () override
\item 
void \mbox{\hyperlink{class_speed_in_out_segment_page_a0c97130ba761e0220cb9d39d72a0aefe}{get\+Gui\+Values}} (\mbox{\hyperlink{class_t_point_t}{TPointD}} \&speed\+In, \mbox{\hyperlink{class_t_point_t}{TPointD}} \&speed\+Out)
\item 
void \mbox{\hyperlink{class_speed_in_out_segment_page_af47c3fb428b797ad958da9d0635aacae}{init}} (int segment\+Length) override
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_speed_in_out_segment_page_a9107a25607fc769fa7fdfbb6862c1e22}\label{class_speed_in_out_segment_page_a9107a25607fc769fa7fdfbb6862c1e22}} 
\index{SpeedInOutSegmentPage@{SpeedInOutSegmentPage}!SpeedInOutSegmentPage@{SpeedInOutSegmentPage}}
\index{SpeedInOutSegmentPage@{SpeedInOutSegmentPage}!SpeedInOutSegmentPage@{SpeedInOutSegmentPage}}
\doxysubsubsection{\texorpdfstring{SpeedInOutSegmentPage()}{SpeedInOutSegmentPage()}}
{\footnotesize\ttfamily Speed\+In\+Out\+Segment\+Page\+::\+Speed\+In\+Out\+Segment\+Page (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_function_segment_viewer}{Function\+Segment\+Viewer}} $\ast$}]{parent = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00076     : \mbox{\hyperlink{class_function_segment_page}{FunctionSegmentPage}}(parent) \{}
\DoxyCodeLine{00077   m\_speed0xFld = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_line_edit}{LineEdit}}(\textcolor{stringliteral}{"{}0"{}});}
\DoxyCodeLine{00078   m\_speed0yFld = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_measured_double_line_edit}{DVGui::MeasuredDoubleLineEdit}}();}
\DoxyCodeLine{00079   m\_speed1xFld = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_line_edit}{LineEdit}}(\textcolor{stringliteral}{"{}0"{}});}
\DoxyCodeLine{00080   m\_speed1yFld = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_measured_double_line_edit}{DVGui::MeasuredDoubleLineEdit}}();}
\DoxyCodeLine{00081 }
\DoxyCodeLine{00082   m\_firstSpeedFld = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_measured_double_line_edit}{DVGui::MeasuredDoubleLineEdit}}();}
\DoxyCodeLine{00083   m\_lastSpeedFld  = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_measured_double_line_edit}{DVGui::MeasuredDoubleLineEdit}}();}
\DoxyCodeLine{00084 }
\DoxyCodeLine{00085   \textcolor{comment}{//-\/-\/-\/-\/layout}}
\DoxyCodeLine{00086 }
\DoxyCodeLine{00087   QGridLayout *mainLayout = \textcolor{keyword}{new} QGridLayout();}
\DoxyCodeLine{00088   mainLayout-\/>setHorizontalSpacing(5);}
\DoxyCodeLine{00089   mainLayout-\/>setVerticalSpacing(5);}
\DoxyCodeLine{00090   mainLayout-\/>setMargin(2);}
\DoxyCodeLine{00091   \{}
\DoxyCodeLine{00092     mainLayout-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}First Speed:"{}})), 0, 0,}
\DoxyCodeLine{00093                           Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00094     mainLayout-\/>addWidget(m\_firstSpeedFld, 0, 1, 1, 2);}
\DoxyCodeLine{00095 }
\DoxyCodeLine{00096     mainLayout-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Handle:"{}})), 1, 0,}
\DoxyCodeLine{00097                           Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00098     mainLayout-\/>addWidget(m\_speed0yFld, 1, 1);}
\DoxyCodeLine{00099     mainLayout-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}/"{}})), 1, 2);}
\DoxyCodeLine{00100     mainLayout-\/>addWidget(m\_speed0xFld, 1, 3);}
\DoxyCodeLine{00101 }
\DoxyCodeLine{00102     mainLayout-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Last Speed:"{}})), 2, 0,}
\DoxyCodeLine{00103                           Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00104     mainLayout-\/>addWidget(m\_lastSpeedFld, 2, 1, 1, 2);}
\DoxyCodeLine{00105 }
\DoxyCodeLine{00106     mainLayout-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Handle:"{}})), 3, 0,}
\DoxyCodeLine{00107                           Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00108     mainLayout-\/>addWidget(m\_speed1yFld, 3, 1);}
\DoxyCodeLine{00109     mainLayout-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}/"{}})), 3, 2);}
\DoxyCodeLine{00110     mainLayout-\/>addWidget(m\_speed1xFld, 3, 3);}
\DoxyCodeLine{00111   \}}
\DoxyCodeLine{00112   mainLayout-\/>setColumnStretch(0, 0);}
\DoxyCodeLine{00113   mainLayout-\/>setColumnStretch(1, 1);}
\DoxyCodeLine{00114   mainLayout-\/>setColumnStretch(2, 0);}
\DoxyCodeLine{00115   mainLayout-\/>setColumnStretch(3, 1);}
\DoxyCodeLine{00116   setLayout(mainLayout);}
\DoxyCodeLine{00117 }
\DoxyCodeLine{00118   \textcolor{keywordtype}{bool} ret = connect(m\_speed0xFld, SIGNAL(editingFinished()), \textcolor{keyword}{this},}
\DoxyCodeLine{00119                      SLOT(onFirstHandleXChanged()));}
\DoxyCodeLine{00120   ret      = ret \&\& connect(m\_speed0yFld, SIGNAL(editingFinished()), \textcolor{keyword}{this},}
\DoxyCodeLine{00121                        SLOT(onFirstHandleYChanged()));}
\DoxyCodeLine{00122   ret      = ret \&\& connect(m\_firstSpeedFld, SIGNAL(editingFinished()), \textcolor{keyword}{this},}
\DoxyCodeLine{00123                        SLOT(onFirstSpeedChanged()));}
\DoxyCodeLine{00124 }
\DoxyCodeLine{00125   ret = ret \&\& connect(m\_speed1xFld, SIGNAL(editingFinished()), \textcolor{keyword}{this},}
\DoxyCodeLine{00126                        SLOT(onLastHandleXChanged()));}
\DoxyCodeLine{00127   ret = ret \&\& connect(m\_speed1yFld, SIGNAL(editingFinished()), \textcolor{keyword}{this},}
\DoxyCodeLine{00128                        SLOT(onLastHandleYChanged()));}
\DoxyCodeLine{00129   ret = ret \&\& connect(m\_lastSpeedFld, SIGNAL(editingFinished()), \textcolor{keyword}{this},}
\DoxyCodeLine{00130                        SLOT(onLastSpeedChanged()));}
\DoxyCodeLine{00131 }
\DoxyCodeLine{00132   assert(ret);}
\DoxyCodeLine{00133 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_speed_in_out_segment_page_a6fd15959dbcb96a751b4de28c2cae151}\label{class_speed_in_out_segment_page_a6fd15959dbcb96a751b4de28c2cae151}} 
\index{SpeedInOutSegmentPage@{SpeedInOutSegmentPage}!apply@{apply}}
\index{apply@{apply}!SpeedInOutSegmentPage@{SpeedInOutSegmentPage}}
\doxysubsubsection{\texorpdfstring{apply()}{apply()}}
{\footnotesize\ttfamily void Speed\+In\+Out\+Segment\+Page\+::apply (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_function_segment_page}{Function\+Segment\+Page}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00154 \{\};}

\end{DoxyCode}
\mbox{\Hypertarget{class_speed_in_out_segment_page_a0c97130ba761e0220cb9d39d72a0aefe}\label{class_speed_in_out_segment_page_a0c97130ba761e0220cb9d39d72a0aefe}} 
\index{SpeedInOutSegmentPage@{SpeedInOutSegmentPage}!getGuiValues@{getGuiValues}}
\index{getGuiValues@{getGuiValues}!SpeedInOutSegmentPage@{SpeedInOutSegmentPage}}
\doxysubsubsection{\texorpdfstring{getGuiValues()}{getGuiValues()}}
{\footnotesize\ttfamily void Speed\+In\+Out\+Segment\+Page\+::get\+Gui\+Values (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{speed\+In,  }\item[{\mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{speed\+Out }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00349                                                                             \{}
\DoxyCodeLine{00350   speedOut.x = m\_speed0xFld-\/>text().toDouble();}
\DoxyCodeLine{00351   speedOut.y = m\_speed0yFld-\/>getValue();}
\DoxyCodeLine{00352 }
\DoxyCodeLine{00353   speedIn.x = m\_speed1xFld-\/>text().toDouble();}
\DoxyCodeLine{00354   speedIn.y = m\_speed1yFld-\/>getValue();}
\DoxyCodeLine{00355 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_speed_in_out_segment_page_af47c3fb428b797ad958da9d0635aacae}\label{class_speed_in_out_segment_page_af47c3fb428b797ad958da9d0635aacae}} 
\index{SpeedInOutSegmentPage@{SpeedInOutSegmentPage}!init@{init}}
\index{init@{init}!SpeedInOutSegmentPage@{SpeedInOutSegmentPage}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily void Speed\+In\+Out\+Segment\+Page\+::init (\begin{DoxyParamCaption}\item[{int}]{segment\+Length }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_function_segment_page}{Function\+Segment\+Page}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00328                                                   \{}
\DoxyCodeLine{00329   \mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *curve = getCurve();}
\DoxyCodeLine{00330   \textcolor{keywordflow}{if} (!curve) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00331 }
\DoxyCodeLine{00332   m\_speed0xFld-\/>setText(QString::number((\textcolor{keywordtype}{double})segmentLength / 3.0));}
\DoxyCodeLine{00333   m\_speed0yFld-\/>setMeasure(curve-\/>getMeasureName());}
\DoxyCodeLine{00334   m\_speed0yFld-\/>setValue(0);}
\DoxyCodeLine{00335 }
\DoxyCodeLine{00336   m\_firstSpeedFld-\/>setMeasure(curve-\/>getMeasureName());}
\DoxyCodeLine{00337   m\_firstSpeedFld-\/>setValue(0);}
\DoxyCodeLine{00338 }
\DoxyCodeLine{00339   m\_speed1xFld-\/>setText(QString::number(-\/(\textcolor{keywordtype}{double})segmentLength / 3.0));}
\DoxyCodeLine{00340   m\_speed1yFld-\/>setMeasure(curve-\/>getMeasureName());}
\DoxyCodeLine{00341   m\_speed1yFld-\/>setValue(0);}
\DoxyCodeLine{00342 }
\DoxyCodeLine{00343   m\_lastSpeedFld-\/>setMeasure(curve-\/>getMeasureName());}
\DoxyCodeLine{00344   m\_lastSpeedFld-\/>setValue(0);}
\DoxyCodeLine{00345 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_speed_in_out_segment_page_af497240ed03dd271a312c3dc7f63d1b8}\label{class_speed_in_out_segment_page_af497240ed03dd271a312c3dc7f63d1b8}} 
\index{SpeedInOutSegmentPage@{SpeedInOutSegmentPage}!onFirstHandleXChanged@{onFirstHandleXChanged}}
\index{onFirstHandleXChanged@{onFirstHandleXChanged}!SpeedInOutSegmentPage@{SpeedInOutSegmentPage}}
\doxysubsubsection{\texorpdfstring{onFirstHandleXChanged}{onFirstHandleXChanged}}
{\footnotesize\ttfamily void Speed\+In\+Out\+Segment\+Page\+::on\+First\+Handle\+XChanged (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00137                                                   \{}
\DoxyCodeLine{00138   \textcolor{keywordtype}{double} x = m\_speed0xFld-\/>text().toDouble();}
\DoxyCodeLine{00139 }
\DoxyCodeLine{00140   \textcolor{comment}{/*-\/-\/-\/ 前のSegmentが存在して、Linkしていて、SpeedIn/Outでない場合、}}
\DoxyCodeLine{00141 \textcolor{comment}{            Speedを保持してハンドルの長さを変える。-\/-\/-\/*/}}
\DoxyCodeLine{00142   \textcolor{keywordtype}{int} segmentIndex = getViewer()-\/>getSegmentIndex();}
\DoxyCodeLine{00143   \textcolor{keywordflow}{if} (segmentIndex > 0) \textcolor{comment}{/*-\/-\/-\/ 前のSegmentが存在している条件 -\/-\/-\/*/}}
\DoxyCodeLine{00144   \{}
\DoxyCodeLine{00145     \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} kf = getCurve()-\/>getKeyframe(segmentIndex);}
\DoxyCodeLine{00146     \textcolor{comment}{/*-\/-\/-\/ Linkしていて、SpeedIn/Outでない場合の条件 -\/-\/-\/*/}}
\DoxyCodeLine{00147     \textcolor{keywordflow}{if} (kf.m\_linkedHandles \&\& kf.m\_prevType != TDoubleKeyframe::SpeedInOut) \{}
\DoxyCodeLine{00148       \textcolor{keywordtype}{double} speed = m\_firstSpeedFld-\/>getValue();}
\DoxyCodeLine{00149       m\_speed0yFld-\/>setValue(x * speed);}
\DoxyCodeLine{00150       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00151     \}}
\DoxyCodeLine{00152   \}}
\DoxyCodeLine{00153   \textcolor{comment}{/*-\/-\/-\/ 条件から外れる場合 -\/-\/-\/*/}}
\DoxyCodeLine{00154   \textcolor{keywordtype}{double} y = m\_speed0yFld-\/>getValue();}
\DoxyCodeLine{00155 }
\DoxyCodeLine{00156   \textcolor{keywordflow}{if} (x != 0.0)}
\DoxyCodeLine{00157     m\_firstSpeedFld-\/>setValue(y / x);}
\DoxyCodeLine{00158   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00159     m\_firstSpeedFld-\/>setText(tr(\textcolor{stringliteral}{"{}-\/-\/-\/"{}}));}
\DoxyCodeLine{00160 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_speed_in_out_segment_page_aacab6e64e2d0d6c0f73524d5c4db1b8c}\label{class_speed_in_out_segment_page_aacab6e64e2d0d6c0f73524d5c4db1b8c}} 
\index{SpeedInOutSegmentPage@{SpeedInOutSegmentPage}!onFirstHandleYChanged@{onFirstHandleYChanged}}
\index{onFirstHandleYChanged@{onFirstHandleYChanged}!SpeedInOutSegmentPage@{SpeedInOutSegmentPage}}
\doxysubsubsection{\texorpdfstring{onFirstHandleYChanged}{onFirstHandleYChanged}}
{\footnotesize\ttfamily void Speed\+In\+Out\+Segment\+Page\+::on\+First\+Handle\+YChanged (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00164                                                   \{}
\DoxyCodeLine{00165   \textcolor{keywordtype}{double} y = m\_speed0yFld-\/>getValue();}
\DoxyCodeLine{00166 }
\DoxyCodeLine{00167   \textcolor{comment}{/*-\/-\/-\/ 前のSegmentが存在して、Linkしていて、SpeedIn/Outでない場合、}}
\DoxyCodeLine{00168 \textcolor{comment}{  Speedを保持してハンドルの長さを変える。-\/-\/-\/*/}}
\DoxyCodeLine{00169   \textcolor{keywordtype}{int} segmentIndex = getViewer()-\/>getSegmentIndex();}
\DoxyCodeLine{00170   \textcolor{keywordflow}{if} (segmentIndex > 0) \textcolor{comment}{/*-\/-\/-\/ 前のSegmentが存在している条件 -\/-\/-\/*/}}
\DoxyCodeLine{00171   \{}
\DoxyCodeLine{00172     \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} kf = getCurve()-\/>getKeyframe(segmentIndex);}
\DoxyCodeLine{00173     \textcolor{comment}{/*-\/-\/-\/ Linkしていて、SpeedIn/Outでない場合の条件 -\/-\/-\/*/}}
\DoxyCodeLine{00174     \textcolor{keywordflow}{if} (kf.m\_linkedHandles \&\& kf.m\_prevType != TDoubleKeyframe::SpeedInOut) \{}
\DoxyCodeLine{00175       \textcolor{keywordtype}{double} speed = m\_firstSpeedFld-\/>getValue();}
\DoxyCodeLine{00176       \textcolor{keywordflow}{if} (!areAlmostEqual(speed, 0.0, 0.001))}
\DoxyCodeLine{00177         m\_speed0xFld-\/>setText(QString::number(y / speed, \textcolor{charliteral}{'f'}, 1));}
\DoxyCodeLine{00178       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00179         m\_speed0xFld-\/>setText(QString::number(0, \textcolor{charliteral}{'f'}, 1));}
\DoxyCodeLine{00180 }
\DoxyCodeLine{00181       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00182     \}}
\DoxyCodeLine{00183   \}}
\DoxyCodeLine{00184   \textcolor{comment}{/*-\/-\/-\/ 条件から外れる場合 -\/-\/-\/*/}}
\DoxyCodeLine{00185   \textcolor{keywordtype}{double} x = m\_speed0xFld-\/>text().toDouble();}
\DoxyCodeLine{00186 }
\DoxyCodeLine{00187   \textcolor{keywordflow}{if} (x != 0.0)}
\DoxyCodeLine{00188     m\_firstSpeedFld-\/>setValue(y / x);}
\DoxyCodeLine{00189   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00190     m\_firstSpeedFld-\/>setText(tr(\textcolor{stringliteral}{"{}-\/-\/-\/"{}}));}
\DoxyCodeLine{00191 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_speed_in_out_segment_page_ac49e93abde87e042ba5e578d926028d6}\label{class_speed_in_out_segment_page_ac49e93abde87e042ba5e578d926028d6}} 
\index{SpeedInOutSegmentPage@{SpeedInOutSegmentPage}!onFirstSpeedChanged@{onFirstSpeedChanged}}
\index{onFirstSpeedChanged@{onFirstSpeedChanged}!SpeedInOutSegmentPage@{SpeedInOutSegmentPage}}
\doxysubsubsection{\texorpdfstring{onFirstSpeedChanged}{onFirstSpeedChanged}}
{\footnotesize\ttfamily void Speed\+In\+Out\+Segment\+Page\+::on\+First\+Speed\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00195                                                 \{}
\DoxyCodeLine{00196   \textcolor{comment}{/*-\/-\/-\/ Speedを変えた場合は、Valueを変える。 -\/-\/-\/*/}}
\DoxyCodeLine{00197   \textcolor{keywordtype}{double} speed = m\_firstSpeedFld-\/>getValue();}
\DoxyCodeLine{00198   \textcolor{keywordtype}{double} x     = m\_speed0xFld-\/>text().toDouble();}
\DoxyCodeLine{00199   m\_speed0yFld-\/>setValue(speed * x);}
\DoxyCodeLine{00200 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_speed_in_out_segment_page_a8e23d6836f81b51df1e521592a136e66}\label{class_speed_in_out_segment_page_a8e23d6836f81b51df1e521592a136e66}} 
\index{SpeedInOutSegmentPage@{SpeedInOutSegmentPage}!onLastHandleXChanged@{onLastHandleXChanged}}
\index{onLastHandleXChanged@{onLastHandleXChanged}!SpeedInOutSegmentPage@{SpeedInOutSegmentPage}}
\doxysubsubsection{\texorpdfstring{onLastHandleXChanged}{onLastHandleXChanged}}
{\footnotesize\ttfamily void Speed\+In\+Out\+Segment\+Page\+::on\+Last\+Handle\+XChanged (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00204                                                  \{}
\DoxyCodeLine{00205   \textcolor{keywordtype}{double} x = m\_speed1xFld-\/>text().toDouble();}
\DoxyCodeLine{00206 }
\DoxyCodeLine{00207   \textcolor{comment}{/*-\/-\/-\/ 後のSegmentが存在して、Linkしていて、SpeedIn/Outでない場合、}}
\DoxyCodeLine{00208 \textcolor{comment}{           Speedを保持してハンドルの長さを変える。 -\/-\/-\/*/}}
\DoxyCodeLine{00209   \textcolor{keywordtype}{int} segmentIndex    = getViewer()-\/>getSegmentIndex();}
\DoxyCodeLine{00210   \mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *curve = getCurve();}
\DoxyCodeLine{00211   \textcolor{keywordflow}{if} (curve \&\& curve-\/>getKeyframeCount() >= 3 \&\&}
\DoxyCodeLine{00212       segmentIndex < curve-\/>getKeyframeCount() -\/}
\DoxyCodeLine{00213                          2) \textcolor{comment}{/*-\/-\/-\/ 後のSegmentが存在している条件 -\/-\/-\/*/}}
\DoxyCodeLine{00214   \{}
\DoxyCodeLine{00215     \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} kf = getCurve()-\/>getKeyframe(segmentIndex + 1);}
\DoxyCodeLine{00216     \textcolor{comment}{/*-\/-\/-\/ Linkしていて、SpeedIn/Outでない場合の条件 -\/-\/-\/*/}}
\DoxyCodeLine{00217     \textcolor{keywordflow}{if} (kf.m\_linkedHandles \&\& kf.m\_type != TDoubleKeyframe::SpeedInOut) \{}
\DoxyCodeLine{00218       \textcolor{keywordtype}{double} speed = m\_lastSpeedFld-\/>getValue();}
\DoxyCodeLine{00219       m\_speed1yFld-\/>setValue(x * speed);}
\DoxyCodeLine{00220       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00221     \}}
\DoxyCodeLine{00222   \}}
\DoxyCodeLine{00223   \textcolor{comment}{/*-\/-\/-\/ 条件から外れる場合 -\/-\/-\/*/}}
\DoxyCodeLine{00224   \textcolor{keywordtype}{double} y = m\_speed1yFld-\/>getValue();}
\DoxyCodeLine{00225   \textcolor{keywordflow}{if} (x != 0.0)}
\DoxyCodeLine{00226     m\_lastSpeedFld-\/>setValue(y / x);}
\DoxyCodeLine{00227   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00228     m\_lastSpeedFld-\/>setText(tr(\textcolor{stringliteral}{"{}-\/-\/-\/"{}}));}
\DoxyCodeLine{00229 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_speed_in_out_segment_page_a16f223e04071ffe5075fac5a358a7ed7}\label{class_speed_in_out_segment_page_a16f223e04071ffe5075fac5a358a7ed7}} 
\index{SpeedInOutSegmentPage@{SpeedInOutSegmentPage}!onLastHandleYChanged@{onLastHandleYChanged}}
\index{onLastHandleYChanged@{onLastHandleYChanged}!SpeedInOutSegmentPage@{SpeedInOutSegmentPage}}
\doxysubsubsection{\texorpdfstring{onLastHandleYChanged}{onLastHandleYChanged}}
{\footnotesize\ttfamily void Speed\+In\+Out\+Segment\+Page\+::on\+Last\+Handle\+YChanged (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00232                                                  \{}
\DoxyCodeLine{00233   \textcolor{keywordtype}{double} y = m\_speed1yFld-\/>getValue();}
\DoxyCodeLine{00234 }
\DoxyCodeLine{00235   \textcolor{comment}{/*-\/-\/-\/ 後のSegmentが存在して、Linkしていて、SpeedIn/Outでない場合、}}
\DoxyCodeLine{00236 \textcolor{comment}{  Speedを保持してハンドルの長さを変える。 -\/-\/-\/*/}}
\DoxyCodeLine{00237   \textcolor{keywordtype}{int} segmentIndex    = getViewer()-\/>getSegmentIndex();}
\DoxyCodeLine{00238   \mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *curve = getCurve();}
\DoxyCodeLine{00239   \textcolor{keywordflow}{if} (curve \&\& curve-\/>getKeyframeCount() >= 3 \&\&}
\DoxyCodeLine{00240       segmentIndex < curve-\/>getKeyframeCount() -\/}
\DoxyCodeLine{00241                          2) \textcolor{comment}{/*-\/-\/-\/ 後のSegmentが存在している条件 -\/-\/-\/*/}}
\DoxyCodeLine{00242   \{}
\DoxyCodeLine{00243     \mbox{\hyperlink{class_t_double_keyframe}{TDoubleKeyframe}} kf = getCurve()-\/>getKeyframe(segmentIndex + 1);}
\DoxyCodeLine{00244     \textcolor{comment}{/*-\/-\/-\/ Linkしていて、SpeedIn/Outでない場合の条件 -\/-\/-\/*/}}
\DoxyCodeLine{00245     \textcolor{keywordflow}{if} (kf.m\_linkedHandles \&\& kf.m\_type != TDoubleKeyframe::SpeedInOut) \{}
\DoxyCodeLine{00246       \textcolor{keywordtype}{double} speed = m\_lastSpeedFld-\/>getValue();}
\DoxyCodeLine{00247       std::cout << \textcolor{stringliteral}{"{}speed: "{}} << speed << std::endl;}
\DoxyCodeLine{00248       \textcolor{keywordflow}{if} (!areAlmostEqual(speed, 0.0, 0.001))}
\DoxyCodeLine{00249         m\_speed1xFld-\/>setText(QString::number(y / speed, \textcolor{charliteral}{'f'}, 1));}
\DoxyCodeLine{00250       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00251         m\_speed1xFld-\/>setText(QString::number(0, \textcolor{charliteral}{'f'}, 1));}
\DoxyCodeLine{00252       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00253     \}}
\DoxyCodeLine{00254   \}}
\DoxyCodeLine{00255   \textcolor{comment}{/*-\/-\/-\/ 条件から外れる場合 -\/-\/-\/*/}}
\DoxyCodeLine{00256   \textcolor{keywordtype}{double} x = m\_speed1xFld-\/>text().toDouble();}
\DoxyCodeLine{00257   \textcolor{keywordflow}{if} (x != 0.0)}
\DoxyCodeLine{00258     m\_lastSpeedFld-\/>setValue(y / x);}
\DoxyCodeLine{00259   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00260     m\_lastSpeedFld-\/>setText(tr(\textcolor{stringliteral}{"{}-\/-\/-\/"{}}));}
\DoxyCodeLine{00261 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_speed_in_out_segment_page_a5c11b0a85d9dab83a54f79bd5b145866}\label{class_speed_in_out_segment_page_a5c11b0a85d9dab83a54f79bd5b145866}} 
\index{SpeedInOutSegmentPage@{SpeedInOutSegmentPage}!onLastSpeedChanged@{onLastSpeedChanged}}
\index{onLastSpeedChanged@{onLastSpeedChanged}!SpeedInOutSegmentPage@{SpeedInOutSegmentPage}}
\doxysubsubsection{\texorpdfstring{onLastSpeedChanged}{onLastSpeedChanged}}
{\footnotesize\ttfamily void Speed\+In\+Out\+Segment\+Page\+::on\+Last\+Speed\+Changed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00265                                                \{}
\DoxyCodeLine{00266   \textcolor{comment}{/*-\/-\/-\/ Speedを変えた場合は、Valueを変える。 -\/-\/-\/*/}}
\DoxyCodeLine{00267   \textcolor{keywordtype}{double} speed = m\_lastSpeedFld-\/>getValue();}
\DoxyCodeLine{00268   \textcolor{keywordtype}{double} x     = m\_speed1xFld-\/>text().toDouble();}
\DoxyCodeLine{00269   m\_speed1yFld-\/>setValue(speed * x);}
\DoxyCodeLine{00270 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_speed_in_out_segment_page_aa5fe1f9625c72f11614ca9f1dc69629c}\label{class_speed_in_out_segment_page_aa5fe1f9625c72f11614ca9f1dc69629c}} 
\index{SpeedInOutSegmentPage@{SpeedInOutSegmentPage}!refresh@{refresh}}
\index{refresh@{refresh}!SpeedInOutSegmentPage@{SpeedInOutSegmentPage}}
\doxysubsubsection{\texorpdfstring{refresh()}{refresh()}}
{\footnotesize\ttfamily void Speed\+In\+Out\+Segment\+Page\+::refresh (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_function_segment_page}{Function\+Segment\+Page}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00274                                     \{}
\DoxyCodeLine{00275   \mbox{\hyperlink{class_t_double_param}{TDoubleParam}} *curve = getCurve();}
\DoxyCodeLine{00276   \textcolor{keywordtype}{int} kIndex          = getViewer()-\/>getSegmentIndex();}
\DoxyCodeLine{00277   \textcolor{keywordflow}{if} (!curve || kIndex < 0 || kIndex + 1 >= curve-\/>getKeyframeCount()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00278   \textcolor{keywordflow}{if} (curve-\/>getKeyframe(kIndex).m\_type != TDoubleKeyframe::SpeedInOut) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00279 }
\DoxyCodeLine{00280   std::string measureName = curve-\/>getMeasureName();}
\DoxyCodeLine{00281   \textcolor{keywordflow}{if} (measureName == \textcolor{stringliteral}{"{}zdepth"{}})}
\DoxyCodeLine{00282     measureName = \textcolor{stringliteral}{"{}zdepth.handle"{}};}
\DoxyCodeLine{00283   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (measureName == \textcolor{stringliteral}{"{}zdepth.cam"{}})}
\DoxyCodeLine{00284     measureName = \textcolor{stringliteral}{"{}zdepth.cam.handle"{}};}
\DoxyCodeLine{00285 }
\DoxyCodeLine{00286   \mbox{\hyperlink{class_t_point_t}{TPointD}} speedOut = curve-\/>getSpeedOut(kIndex);}
\DoxyCodeLine{00287   m\_speed0xFld-\/>setText(QString::number(speedOut.x, \textcolor{charliteral}{'f'}, 1));}
\DoxyCodeLine{00288   m\_speed0yFld-\/>setMeasure(measureName);}
\DoxyCodeLine{00289   m\_speed0yFld-\/>setValue(speedOut.y);}
\DoxyCodeLine{00290 }
\DoxyCodeLine{00291   m\_firstSpeedFld-\/>setMeasure(measureName);}
\DoxyCodeLine{00292   \textcolor{keywordflow}{if} (speedOut.x != 0.0)}
\DoxyCodeLine{00293     m\_firstSpeedFld-\/>setValue(speedOut.y / speedOut.x);}
\DoxyCodeLine{00294   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00295     m\_firstSpeedFld-\/>setText(tr(\textcolor{stringliteral}{"{}-\/-\/-\/"{}}));}
\DoxyCodeLine{00296 }
\DoxyCodeLine{00297   \mbox{\hyperlink{class_t_point_t}{TPointD}} speedIn = curve-\/>getSpeedIn(kIndex + 1);}
\DoxyCodeLine{00298   m\_speed1xFld-\/>setText(QString::number(speedIn.x, \textcolor{charliteral}{'f'}, 1));}
\DoxyCodeLine{00299   m\_speed1yFld-\/>setMeasure(measureName);}
\DoxyCodeLine{00300   m\_speed1yFld-\/>setValue(speedIn.y);}
\DoxyCodeLine{00301   m\_lastSpeedFld-\/>setMeasure(measureName);}
\DoxyCodeLine{00302   \textcolor{keywordflow}{if} (speedIn.x != 0.0)}
\DoxyCodeLine{00303     m\_lastSpeedFld-\/>setValue(speedIn.y / speedIn.x);}
\DoxyCodeLine{00304   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00305     m\_lastSpeedFld-\/>setText(tr(\textcolor{stringliteral}{"{}-\/-\/-\/"{}}));}
\DoxyCodeLine{00306 }
\DoxyCodeLine{00307   \textcolor{comment}{/*-\/-\/-\/ キーフレームがリンク、かつ隣がSpeedIn/Outでないとき、}}
\DoxyCodeLine{00308 \textcolor{comment}{          Speed入力BoxをDisableする。それ以外の場合はEnableする -\/-\/-\/*/}}
\DoxyCodeLine{00309   \textcolor{comment}{// PrevKey}}
\DoxyCodeLine{00310   \textcolor{keywordflow}{if} (kIndex > 0 \&\& curve-\/>getKeyframe(kIndex).m\_linkedHandles \&\&}
\DoxyCodeLine{00311       curve-\/>getKeyframe(kIndex).m\_prevType != TDoubleKeyframe::SpeedInOut)}
\DoxyCodeLine{00312     m\_firstSpeedFld-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{00313   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00314     m\_firstSpeedFld-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{00315 }
\DoxyCodeLine{00316   \textcolor{comment}{// NextKey}}
\DoxyCodeLine{00317   \textcolor{keywordflow}{if} (curve-\/>getKeyframeCount() >= 3 \&\&}
\DoxyCodeLine{00318       kIndex < curve-\/>getKeyframeCount() -\/ 2 \&\&}
\DoxyCodeLine{00319       curve-\/>getKeyframe(kIndex + 1).m\_linkedHandles \&\&}
\DoxyCodeLine{00320       curve-\/>getKeyframe(kIndex + 1).m\_type != TDoubleKeyframe::SpeedInOut)}
\DoxyCodeLine{00321     m\_lastSpeedFld-\/>setEnabled(\textcolor{keyword}{false});}
\DoxyCodeLine{00322   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00323     m\_lastSpeedFld-\/>setEnabled(\textcolor{keyword}{true});}
\DoxyCodeLine{00324 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonzqt/functionsegmentviewer.\+h\item 
E\+:/opentoonz/toonz/sources/toonzqt/functionsegmentviewer.\+cpp\end{DoxyCompactItemize}
