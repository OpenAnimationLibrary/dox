\hypertarget{class_schematic_scene_viewer}{}\doxysection{Schematic\+Scene\+Viewer Class Reference}
\label{class_schematic_scene_viewer}\index{SchematicSceneViewer@{SchematicSceneViewer}}
Inheritance diagram for Schematic\+Scene\+Viewer\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_schematic_scene_viewer}
\end{center}
\end{figure}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_ac190e628b07e384c2fe815f194926a50}{normalize\+Scene}} ()
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_aeae40db1bf7531c5953dc2c02a5c1c8d}{fit\+Scene}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_schematic_scene_viewer_ac15a876e7d602359c89af6b43a6afbb5}{Schematic\+Scene\+Viewer}} (QWidget $\ast$parent)
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_a19f21cb3e1d187f8ec80f90b928cdf6b}{zoom\+Qt}} (bool zoomin, bool reset\+View)
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_ada1e0b68676079b1a62c0c5089ee2aed}{pan\+Qt}} (const QPointF \&delta)
\item 
QPointF \mbox{\hyperlink{class_schematic_scene_viewer_ad0faa536289fd00bb9b9dc6767f782a8}{get\+Old\+Scene\+Pos}} ()
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_a970a0a61942f52f8057e3f84371bb3c4}{set\+Cursor\+Mode}} (Cursor\+Mode mode)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_acdbc387bc301532d00d653897794109f}{center\+On\+Current}} ()
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_a2d5c575308b3d3e0d4df5d59758390ca}{reorder\+Scene}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_a10a659d2647767c1605ea7326425914c}{mouse\+Press\+Event}} (QMouse\+Event $\ast$me) override
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_a36c4698625fb04f71ad94decb79f85c6}{mouse\+Move\+Event}} (QMouse\+Event $\ast$me) override
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_a3fae2863572d4af2971c2969e1e139a5}{mouse\+Release\+Event}} (QMouse\+Event $\ast$me) override
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_a50291e3a70027171e0e64300b5315dd9}{key\+Press\+Event}} (QKey\+Event $\ast$ke) override
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_af3a738281ae3d0ddec41c32b22f72113}{wheel\+Event}} (QWheel\+Event $\ast$me) override
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_ae7f769686bb2673cf7410ad8572a723e}{show\+Event}} (QShow\+Event $\ast$se) override
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_a4076159b9caf628324c4a1dec26d2aab}{enter\+Event}} (QEvent $\ast$e) override
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_ae5479549846de93b8755038b4c70786a}{leave\+Event}} (QEvent $\ast$e) override
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_a583159b336cad2a68354b9db31d427c1}{mouse\+Double\+Click\+Event}} (QMouse\+Event $\ast$event) override
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_a10beba630958094586cfbdc5a0f89ddb}{tablet\+Event}} (QTablet\+Event $\ast$e) override
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_a5365b2a0f3eabf90de4a487756cadd9f}{touch\+Event}} (QTouch\+Event $\ast$e, int type)
\item 
void \mbox{\hyperlink{class_schematic_scene_viewer_a2994b2d7e5cdc7a0a3ff645f92e1d525}{gesture\+Event}} (QGesture\+Event $\ast$e)
\item 
bool \mbox{\hyperlink{class_schematic_scene_viewer_a417b49127c17932369740c3574df873d}{event}} (QEvent $\ast$event) override
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_schematic_scene_viewer_ac15a876e7d602359c89af6b43a6afbb5}\label{class_schematic_scene_viewer_ac15a876e7d602359c89af6b43a6afbb5}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!SchematicSceneViewer@{SchematicSceneViewer}}
\index{SchematicSceneViewer@{SchematicSceneViewer}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{SchematicSceneViewer()}{SchematicSceneViewer()}}
{\footnotesize\ttfamily Schematic\+Scene\+Viewer\+::\+Schematic\+Scene\+Viewer (\begin{DoxyParamCaption}\item[{QWidget $\ast$}]{parent }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00201     : QGraphicsView(parent)}
\DoxyCodeLine{00202     , m\_buttonState(Qt::NoButton)}
\DoxyCodeLine{00203     , m\_oldWinPos()}
\DoxyCodeLine{00204     , m\_oldScenePos()}
\DoxyCodeLine{00205     , m\_firstShowing(\textcolor{keyword}{true}) \{}
\DoxyCodeLine{00206   setObjectName(\textcolor{stringliteral}{"{}SchematicSceneViewer"{}});}
\DoxyCodeLine{00207 }
\DoxyCodeLine{00208   setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);}
\DoxyCodeLine{00209   setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);}
\DoxyCodeLine{00210   setDragMode(QGraphicsView::NoDrag);}
\DoxyCodeLine{00211   setTransformationAnchor(QGraphicsView::NoAnchor);}
\DoxyCodeLine{00212   setRenderHint(QPainter::SmoothPixmapTransform);}
\DoxyCodeLine{00213   setRenderHint(QPainter::TextAntialiasing);}
\DoxyCodeLine{00214   setRenderHint(QPainter::Antialiasing);}
\DoxyCodeLine{00215   setInteractive(\textcolor{keyword}{true});}
\DoxyCodeLine{00216   setViewportUpdateMode(QGraphicsView::SmartViewportUpdate);}
\DoxyCodeLine{00217   show();}
\DoxyCodeLine{00218 }
\DoxyCodeLine{00219   setAttribute(Qt::WA\_AcceptTouchEvents);}
\DoxyCodeLine{00220   grabGesture(Qt::SwipeGesture);}
\DoxyCodeLine{00221   grabGesture(Qt::PanGesture);}
\DoxyCodeLine{00222   grabGesture(Qt::PinchGesture);}
\DoxyCodeLine{00223 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_aa588113fc0a2b20c0a8a560bd819c2ce}\label{class_schematic_scene_viewer_aa588113fc0a2b20c0a8a560bd819c2ce}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!````~SchematicSceneViewer@{$\sim$SchematicSceneViewer}}
\index{````~SchematicSceneViewer@{$\sim$SchematicSceneViewer}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{$\sim$SchematicSceneViewer()}{~SchematicSceneViewer()}}
{\footnotesize\ttfamily Schematic\+Scene\+Viewer\+::$\sim$\+Schematic\+Scene\+Viewer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00227 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_schematic_scene_viewer_acdbc387bc301532d00d653897794109f}\label{class_schematic_scene_viewer_acdbc387bc301532d00d653897794109f}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!centerOnCurrent@{centerOnCurrent}}
\index{centerOnCurrent@{centerOnCurrent}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{centerOnCurrent}{centerOnCurrent}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::center\+On\+Current (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00465                                            \{}
\DoxyCodeLine{00466   \mbox{\hyperlink{class_schematic_scene}{SchematicScene}} *schematicScene = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_schematic_scene}{SchematicScene}} *\textcolor{keyword}{>}(scene());}
\DoxyCodeLine{00467   QGraphicsItem *node            = schematicScene-\/>getCurrentNode();}
\DoxyCodeLine{00468   \textcolor{keywordflow}{if} (node) centerOn(node);}
\DoxyCodeLine{00469 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_a4076159b9caf628324c4a1dec26d2aab}\label{class_schematic_scene_viewer_a4076159b9caf628324c4a1dec26d2aab}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!enterEvent@{enterEvent}}
\index{enterEvent@{enterEvent}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{enterEvent()}{enterEvent()}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::enter\+Event (\begin{DoxyParamCaption}\item[{QEvent $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00514                                                \{}
\DoxyCodeLine{00515   \textcolor{keywordflow}{switch} (m\_cursorMode) \{}
\DoxyCodeLine{00516   \textcolor{keywordflow}{case} CursorMode::Hand:}
\DoxyCodeLine{00517     setToolCursor(\textcolor{keyword}{this}, ToolCursor::PanCursor);}
\DoxyCodeLine{00518     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00519   \textcolor{keywordflow}{case} CursorMode::Zoom:}
\DoxyCodeLine{00520     setToolCursor(\textcolor{keyword}{this}, ToolCursor::ZoomCursor);}
\DoxyCodeLine{00521     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00522   \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00523     setToolCursor(\textcolor{keyword}{this}, ToolCursor::StrokeSelectCursor);}
\DoxyCodeLine{00524     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00525   \}}
\DoxyCodeLine{00526 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_a417b49127c17932369740c3574df873d}\label{class_schematic_scene_viewer_a417b49127c17932369740c3574df873d}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!event@{event}}
\index{event@{event}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{event()}{event()}}
{\footnotesize\ttfamily bool Schematic\+Scene\+Viewer\+::event (\begin{DoxyParamCaption}\item[{QEvent $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00653                                           \{}
\DoxyCodeLine{00654   \textcolor{comment}{/*}}
\DoxyCodeLine{00655 \textcolor{comment}{  switch (e-\/>type()) \{}}
\DoxyCodeLine{00656 \textcolor{comment}{  case QEvent::TabletPress: \{}}
\DoxyCodeLine{00657 \textcolor{comment}{    QTabletEvent *te = static\_cast<QTabletEvent *>(e);}}
\DoxyCodeLine{00658 \textcolor{comment}{    qDebug() << "{}[event] TabletPress: pointerType("{} << te-\/>pointerType()}}
\DoxyCodeLine{00659 \textcolor{comment}{             << "{}) device("{} << te-\/>device() << "{})"{};}}
\DoxyCodeLine{00660 \textcolor{comment}{  \} break;}}
\DoxyCodeLine{00661 \textcolor{comment}{  case QEvent::TabletRelease:}}
\DoxyCodeLine{00662 \textcolor{comment}{    qDebug() << "{}[event] TabletRelease"{};}}
\DoxyCodeLine{00663 \textcolor{comment}{    break;}}
\DoxyCodeLine{00664 \textcolor{comment}{  case QEvent::TouchBegin:}}
\DoxyCodeLine{00665 \textcolor{comment}{    qDebug() << "{}[event] TouchBegin"{};}}
\DoxyCodeLine{00666 \textcolor{comment}{    break;}}
\DoxyCodeLine{00667 \textcolor{comment}{  case QEvent::TouchEnd:}}
\DoxyCodeLine{00668 \textcolor{comment}{    qDebug() << "{}[event] TouchEnd"{};}}
\DoxyCodeLine{00669 \textcolor{comment}{    break;}}
\DoxyCodeLine{00670 \textcolor{comment}{  case QEvent::TouchCancel:}}
\DoxyCodeLine{00671 \textcolor{comment}{    qDebug() << "{}[event] TouchCancel"{};}}
\DoxyCodeLine{00672 \textcolor{comment}{    break;}}
\DoxyCodeLine{00673 \textcolor{comment}{  case QEvent::MouseButtonPress:}}
\DoxyCodeLine{00674 \textcolor{comment}{    qDebug() << "{}[event] MouseButtonPress"{};}}
\DoxyCodeLine{00675 \textcolor{comment}{    break;}}
\DoxyCodeLine{00676 \textcolor{comment}{  case QEvent::MouseButtonDblClick:}}
\DoxyCodeLine{00677 \textcolor{comment}{    qDebug() << "{}[event] MouseButtonDblClick"{};}}
\DoxyCodeLine{00678 \textcolor{comment}{    break;}}
\DoxyCodeLine{00679 \textcolor{comment}{  case QEvent::MouseButtonRelease:}}
\DoxyCodeLine{00680 \textcolor{comment}{    qDebug() << "{}[event] MouseButtonRelease"{};}}
\DoxyCodeLine{00681 \textcolor{comment}{    break;}}
\DoxyCodeLine{00682 \textcolor{comment}{  case QEvent::Gesture:}}
\DoxyCodeLine{00683 \textcolor{comment}{    qDebug() << "{}[event] Gesture"{};}}
\DoxyCodeLine{00684 \textcolor{comment}{    break;}}
\DoxyCodeLine{00685 \textcolor{comment}{  default:}}
\DoxyCodeLine{00686 \textcolor{comment}{    break;}}
\DoxyCodeLine{00687 \textcolor{comment}{  \}}}
\DoxyCodeLine{00688 \textcolor{comment}{  */}}
\DoxyCodeLine{00689 }
\DoxyCodeLine{00690   \textcolor{keywordflow}{if} (e-\/>type() == QEvent::Gesture \&\& CommandManager::instance()}
\DoxyCodeLine{00691                                           -\/>getAction(MI\_TouchGestureControl)}
\DoxyCodeLine{00692                                           -\/>isChecked()) \{}
\DoxyCodeLine{00693     gestureEvent(\textcolor{keyword}{static\_cast<}QGestureEvent *\textcolor{keyword}{>}(e));}
\DoxyCodeLine{00694     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00695   \}}
\DoxyCodeLine{00696   \textcolor{keywordflow}{if} ((e-\/>type() == QEvent::TouchBegin || e-\/>type() == QEvent::TouchEnd ||}
\DoxyCodeLine{00697        e-\/>type() == QEvent::TouchCancel || e-\/>type() == QEvent::TouchUpdate) \&\&}
\DoxyCodeLine{00698       CommandManager::instance()}
\DoxyCodeLine{00699           -\/>getAction(MI\_TouchGestureControl)}
\DoxyCodeLine{00700           -\/>isChecked()) \{}
\DoxyCodeLine{00701     touchEvent(\textcolor{keyword}{static\_cast<}QTouchEvent *\textcolor{keyword}{>}(e), e-\/>type());}
\DoxyCodeLine{00702     m\_gestureActive = \textcolor{keyword}{true};}
\DoxyCodeLine{00703     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00704   \}}
\DoxyCodeLine{00705   \textcolor{keywordflow}{return} QGraphicsView::event(e);}
\DoxyCodeLine{00706 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_aeae40db1bf7531c5953dc2c02a5c1c8d}\label{class_schematic_scene_viewer_aeae40db1bf7531c5953dc2c02a5c1c8d}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!fitScene@{fitScene}}
\index{fitScene@{fitScene}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{fitScene}{fitScene}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::fit\+Scene (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00456                                     \{}
\DoxyCodeLine{00457   \textcolor{keywordflow}{if} (scene()) \{}
\DoxyCodeLine{00458     QRectF rect = scene()-\/>itemsBoundingRect();}
\DoxyCodeLine{00459     fitInView(rect, Qt::KeepAspectRatio);}
\DoxyCodeLine{00460   \}}
\DoxyCodeLine{00461 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_a2994b2d7e5cdc7a0a3ff645f92e1d525}\label{class_schematic_scene_viewer_a2994b2d7e5cdc7a0a3ff645f92e1d525}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!gestureEvent@{gestureEvent}}
\index{gestureEvent@{gestureEvent}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{gestureEvent()}{gestureEvent()}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::gesture\+Event (\begin{DoxyParamCaption}\item[{QGesture\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00547                                                         \{}
\DoxyCodeLine{00548   \textcolor{comment}{// qDebug() << "{}[gestureEvent]"{};}}
\DoxyCodeLine{00549   m\_gestureActive = \textcolor{keyword}{false};}
\DoxyCodeLine{00550   \textcolor{keywordflow}{if} (QGesture *swipe = e-\/>gesture(Qt::SwipeGesture)) \{}
\DoxyCodeLine{00551     m\_gestureActive = \textcolor{keyword}{true};}
\DoxyCodeLine{00552   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (QGesture *pan = e-\/>gesture(Qt::PanGesture)) \{}
\DoxyCodeLine{00553     m\_gestureActive = \textcolor{keyword}{true};}
\DoxyCodeLine{00554   \}}
\DoxyCodeLine{00555   \textcolor{keywordflow}{if} (QGesture *pinch = e-\/>gesture(Qt::PinchGesture)) \{}
\DoxyCodeLine{00556     QPinchGesture *gesture = \textcolor{keyword}{static\_cast<}QPinchGesture *\textcolor{keyword}{>}(pinch);}
\DoxyCodeLine{00557     QPinchGesture::ChangeFlags changeFlags = gesture-\/>changeFlags();}
\DoxyCodeLine{00558     QPoint firstCenter                     = gesture-\/>centerPoint().toPoint();}
\DoxyCodeLine{00559     \textcolor{keywordflow}{if} (m\_touchDevice == QTouchDevice::TouchScreen)}
\DoxyCodeLine{00560       firstCenter = mapFromGlobal(firstCenter);}
\DoxyCodeLine{00561 }
\DoxyCodeLine{00562     \textcolor{keywordflow}{if} (gesture-\/>state() == Qt::GestureStarted) \{}
\DoxyCodeLine{00563       m\_gestureActive = \textcolor{keyword}{true};}
\DoxyCodeLine{00564     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (gesture-\/>state() == Qt::GestureFinished) \{}
\DoxyCodeLine{00565       m\_gestureActive = \textcolor{keyword}{false};}
\DoxyCodeLine{00566       m\_zooming       = \textcolor{keyword}{false};}
\DoxyCodeLine{00567       m\_scaleFactor   = 0.0;}
\DoxyCodeLine{00568     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00569       \textcolor{keywordflow}{if} (changeFlags \& QPinchGesture::ScaleFactorChanged) \{}
\DoxyCodeLine{00570         \textcolor{keywordtype}{double} scaleFactor = gesture-\/>scaleFactor();}
\DoxyCodeLine{00571         \textcolor{comment}{// the scale factor makes for too sensitive scaling}}
\DoxyCodeLine{00572         \textcolor{comment}{// divide the change in half}}
\DoxyCodeLine{00573         \textcolor{keywordflow}{if} (scaleFactor > 1) \{}
\DoxyCodeLine{00574           \textcolor{keywordtype}{double} decimalValue = scaleFactor -\/ 1;}
\DoxyCodeLine{00575           decimalValue /= 1.5;}
\DoxyCodeLine{00576           scaleFactor = 1 + decimalValue;}
\DoxyCodeLine{00577         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (scaleFactor < 1) \{}
\DoxyCodeLine{00578           \textcolor{keywordtype}{double} decimalValue = 1 -\/ scaleFactor;}
\DoxyCodeLine{00579           decimalValue /= 1.5;}
\DoxyCodeLine{00580           scaleFactor = 1 -\/ decimalValue;}
\DoxyCodeLine{00581         \}}
\DoxyCodeLine{00582         \textcolor{keywordflow}{if} (!m\_zooming) \{}
\DoxyCodeLine{00583           \textcolor{keywordtype}{double} delta = scaleFactor -\/ 1;}
\DoxyCodeLine{00584           m\_scaleFactor += delta;}
\DoxyCodeLine{00585           \textcolor{keywordflow}{if} (m\_scaleFactor > .2 || m\_scaleFactor < -\/.2) \{}
\DoxyCodeLine{00586             m\_zooming = \textcolor{keyword}{true};}
\DoxyCodeLine{00587           \}}
\DoxyCodeLine{00588         \}}
\DoxyCodeLine{00589         \textcolor{keywordflow}{if} (m\_zooming) \{}
\DoxyCodeLine{00590           changeScale(firstCenter, scaleFactor);}
\DoxyCodeLine{00591           m\_panning = \textcolor{keyword}{false};}
\DoxyCodeLine{00592         \}}
\DoxyCodeLine{00593         m\_gestureActive = \textcolor{keyword}{true};}
\DoxyCodeLine{00594       \}}
\DoxyCodeLine{00595 }
\DoxyCodeLine{00596       \textcolor{keywordflow}{if} (changeFlags \& QPinchGesture::CenterPointChanged) \{}
\DoxyCodeLine{00597         QPointF centerDelta = (gesture-\/>centerPoint() * getDevPixRatio()) -\/}
\DoxyCodeLine{00598                               (gesture-\/>lastCenterPoint() * getDevPixRatio());}
\DoxyCodeLine{00599         \textcolor{keywordflow}{if} (centerDelta.manhattanLength() > 1) \{}
\DoxyCodeLine{00600           \textcolor{comment}{// panQt(centerDelta.toPoint());}}
\DoxyCodeLine{00601         \}}
\DoxyCodeLine{00602         m\_gestureActive = \textcolor{keyword}{true};}
\DoxyCodeLine{00603       \}}
\DoxyCodeLine{00604     \}}
\DoxyCodeLine{00605   \}}
\DoxyCodeLine{00606   e-\/>accept();}
\DoxyCodeLine{00607 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_ad0faa536289fd00bb9b9dc6767f782a8}\label{class_schematic_scene_viewer_ad0faa536289fd00bb9b9dc6767f782a8}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!getOldScenePos@{getOldScenePos}}
\index{getOldScenePos@{getOldScenePos}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{getOldScenePos()}{getOldScenePos()}}
{\footnotesize\ttfamily QPointF Schematic\+Scene\+Viewer\+::get\+Old\+Scene\+Pos (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00143 \{ \textcolor{keywordflow}{return} m\_oldScenePos; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_a50291e3a70027171e0e64300b5315dd9}\label{class_schematic_scene_viewer_a50291e3a70027171e0e64300b5315dd9}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!keyPressEvent@{keyPressEvent}}
\index{keyPressEvent@{keyPressEvent}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{keyPressEvent()}{keyPressEvent()}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::key\+Press\+Event (\begin{DoxyParamCaption}\item[{QKey\+Event $\ast$}]{ke }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00352                                                       \{}
\DoxyCodeLine{00353   ke-\/>ignore();}
\DoxyCodeLine{00354   QGraphicsView::keyPressEvent(ke);}
\DoxyCodeLine{00355   \textcolor{keywordflow}{if} (!ke-\/>isAccepted()) SchematicZoomer(\textcolor{keyword}{this}).exec(ke);}
\DoxyCodeLine{00356 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_ae5479549846de93b8755038b4c70786a}\label{class_schematic_scene_viewer_ae5479549846de93b8755038b4c70786a}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!leaveEvent@{leaveEvent}}
\index{leaveEvent@{leaveEvent}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{leaveEvent()}{leaveEvent()}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::leave\+Event (\begin{DoxyParamCaption}\item[{QEvent $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00530 \{ setCursor(Qt::ArrowCursor); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_a583159b336cad2a68354b9db31d427c1}\label{class_schematic_scene_viewer_a583159b336cad2a68354b9db31d427c1}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!mouseDoubleClickEvent@{mouseDoubleClickEvent}}
\index{mouseDoubleClickEvent@{mouseDoubleClickEvent}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{mouseDoubleClickEvent()}{mouseDoubleClickEvent()}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::mouse\+Double\+Click\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00333                                                                    \{}
\DoxyCodeLine{00334   \textcolor{comment}{// qDebug() << "{}[mouseDoubleClickEvent]"{};}}
\DoxyCodeLine{00335   \textcolor{keywordflow}{if} (m\_gestureActive \&\& !m\_stylusUsed) \{}
\DoxyCodeLine{00336     m\_gestureActive = \textcolor{keyword}{false};}
\DoxyCodeLine{00337     QGraphicsItem *item =}
\DoxyCodeLine{00338         scene()-\/>itemAt(mapToScene(event-\/>pos()), QTransform());}
\DoxyCodeLine{00339     \textcolor{keywordflow}{if} (!item) \{}
\DoxyCodeLine{00340       fitScene();}
\DoxyCodeLine{00341       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00342     \}}
\DoxyCodeLine{00343 }
\DoxyCodeLine{00344     \mbox{\hyperlink{class_schematic_scene_viewer_a10a659d2647767c1605ea7326425914c}{mousePressEvent}}(event);}
\DoxyCodeLine{00345   \}}
\DoxyCodeLine{00346 }
\DoxyCodeLine{00347   QGraphicsView::mouseDoubleClickEvent(event);}
\DoxyCodeLine{00348 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_a36c4698625fb04f71ad94decb79f85c6}\label{class_schematic_scene_viewer_a36c4698625fb04f71ad94decb79f85c6}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!mouseMoveEvent@{mouseMoveEvent}}
\index{mouseMoveEvent@{mouseMoveEvent}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{mouseMoveEvent()}{mouseMoveEvent()}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::mouse\+Move\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}

Reimplemets the QGraphics\+View\+::mouse\+Move\+Event() 
\begin{DoxyCode}{0}
\DoxyCodeLine{00282                                                          \{}
\DoxyCodeLine{00283   \textcolor{keywordflow}{if} (m\_gestureActive \&\& m\_touchDevice == QTouchDevice::TouchScreen \&\&}
\DoxyCodeLine{00284       !m\_stylusUsed) \{}
\DoxyCodeLine{00285     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00286   \}}
\DoxyCodeLine{00287 }
\DoxyCodeLine{00288   QPoint currWinPos    = me-\/>pos();}
\DoxyCodeLine{00289   QPointF currScenePos = mapToScene(currWinPos);}
\DoxyCodeLine{00290   \textcolor{keywordflow}{if} ((m\_cursorMode == CursorMode::Hand \&\& m\_panning) ||}
\DoxyCodeLine{00291       m\_buttonState == Qt::MidButton) \{}
\DoxyCodeLine{00292     QPointF usePos = m\_touchDevice == QTouchDevice::TouchScreen}
\DoxyCodeLine{00293                          ? mapToScene(me-\/>pos())}
\DoxyCodeLine{00294                          : me-\/>pos() * getDevPixRatio();}
\DoxyCodeLine{00295     QPointF deltaPoint = usePos -\/ m\_mousePanPoint;}
\DoxyCodeLine{00296     panQt(deltaPoint);}
\DoxyCodeLine{00297     m\_mousePanPoint = m\_touchDevice == QTouchDevice::TouchScreen}
\DoxyCodeLine{00298                           ? mapToScene(me-\/>pos())}
\DoxyCodeLine{00299                           : me-\/>pos() * getDevPixRatio();}
\DoxyCodeLine{00300   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00301     \textcolor{keywordflow}{if} (m\_cursorMode == CursorMode::Zoom \&\& m\_zooming) \{}
\DoxyCodeLine{00302       \textcolor{keywordtype}{int} deltaY     = (m\_oldWinPos.y() -\/ me-\/>pos().y()) * 10;}
\DoxyCodeLine{00303       \textcolor{keywordtype}{double} factorY = exp(deltaY * 0.001);}
\DoxyCodeLine{00304       changeScale(m\_zoomPoint, factorY);}
\DoxyCodeLine{00305       m\_panning = \textcolor{keyword}{false};}
\DoxyCodeLine{00306     \}}
\DoxyCodeLine{00307     m\_oldWinPos   = currWinPos;}
\DoxyCodeLine{00308     m\_oldScenePos = currScenePos;}
\DoxyCodeLine{00309   \}}
\DoxyCodeLine{00310   QGraphicsView::mouseMoveEvent(me);}
\DoxyCodeLine{00311 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_a10a659d2647767c1605ea7326425914c}\label{class_schematic_scene_viewer_a10a659d2647767c1605ea7326425914c}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!mousePressEvent@{mousePressEvent}}
\index{mousePressEvent@{mousePressEvent}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{mousePressEvent()}{mousePressEvent()}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::mouse\+Press\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}

Reimplemets the QGraphics\+View\+::mouse\+Press\+Event() 
\begin{DoxyCode}{0}
\DoxyCodeLine{00233                                                           \{}
\DoxyCodeLine{00234   \textcolor{comment}{// qDebug() << "{}[mousePressEvent]"{};}}
\DoxyCodeLine{00235   \textcolor{keywordflow}{if} (m\_gestureActive \&\& m\_touchDevice == QTouchDevice::TouchScreen \&\&}
\DoxyCodeLine{00236       !m\_stylusUsed) \{}
\DoxyCodeLine{00237     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00238   \}}
\DoxyCodeLine{00239 }
\DoxyCodeLine{00240   m\_buttonState = me-\/>button();}
\DoxyCodeLine{00241   m\_oldWinPos   = me-\/>pos();}
\DoxyCodeLine{00242   m\_oldScenePos = mapToScene(m\_oldWinPos);}
\DoxyCodeLine{00243 }
\DoxyCodeLine{00244   \textcolor{keywordflow}{if} (m\_buttonState == Qt::LeftButton) \{}
\DoxyCodeLine{00245     \textcolor{keywordflow}{if} (m\_cursorMode == CursorMode::Zoom) \{}
\DoxyCodeLine{00246       m\_zoomPoint = me-\/>pos();}
\DoxyCodeLine{00247       m\_zooming   = \textcolor{keyword}{true};}
\DoxyCodeLine{00248       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00249     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_cursorMode == CursorMode::Hand) \{}
\DoxyCodeLine{00250       m\_mousePanPoint = m\_touchDevice == QTouchDevice::TouchScreen}
\DoxyCodeLine{00251                             ? mapToScene(me-\/>pos())}
\DoxyCodeLine{00252                             : me-\/>pos() * getDevPixRatio();}
\DoxyCodeLine{00253       m\_panning = \textcolor{keyword}{true};}
\DoxyCodeLine{00254       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00255     \}}
\DoxyCodeLine{00256   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_buttonState == Qt::MidButton) \{}
\DoxyCodeLine{00257     m\_mousePanPoint = m\_touchDevice == QTouchDevice::TouchScreen}
\DoxyCodeLine{00258                           ? mapToScene(me-\/>pos())}
\DoxyCodeLine{00259                           : me-\/>pos() * getDevPixRatio();}
\DoxyCodeLine{00260   \}}
\DoxyCodeLine{00261   \textcolor{keywordtype}{bool} drawRect                       = \textcolor{keyword}{true};}
\DoxyCodeLine{00262   QList<QGraphicsItem *> pointedItems = items(me-\/>pos());}
\DoxyCodeLine{00263   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00264   \textcolor{keywordflow}{for} (i = 0; i < pointedItems.size(); i++) \{}
\DoxyCodeLine{00265     \mbox{\hyperlink{class_schematic_window_editor}{SchematicWindowEditor}} *editor =}
\DoxyCodeLine{00266         \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_schematic_window_editor}{SchematicWindowEditor}} *\textcolor{keyword}{>}(pointedItems[i]);}
\DoxyCodeLine{00267     \textcolor{keywordflow}{if} (!editor) \{}
\DoxyCodeLine{00268       drawRect = \textcolor{keyword}{false};}
\DoxyCodeLine{00269       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00270     \}}
\DoxyCodeLine{00271   \}}
\DoxyCodeLine{00272 }
\DoxyCodeLine{00273   \textcolor{keywordflow}{if} (m\_buttonState == Qt::LeftButton \&\& drawRect)}
\DoxyCodeLine{00274     setDragMode(QGraphicsView::RubberBandDrag);}
\DoxyCodeLine{00275   QGraphicsView::mousePressEvent(me);}
\DoxyCodeLine{00276 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_a3fae2863572d4af2971c2969e1e139a5}\label{class_schematic_scene_viewer_a3fae2863572d4af2971c2969e1e139a5}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!mouseReleaseEvent@{mouseReleaseEvent}}
\index{mouseReleaseEvent@{mouseReleaseEvent}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{mouseReleaseEvent()}{mouseReleaseEvent()}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::mouse\+Release\+Event (\begin{DoxyParamCaption}\item[{QMouse\+Event $\ast$}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}

Reimplemets the QGraphics\+View\+::mouse\+Release\+Event() 
\begin{DoxyCode}{0}
\DoxyCodeLine{00317                                                             \{}
\DoxyCodeLine{00318   \textcolor{comment}{// qDebug() << "{}[mouseReleaseEvent]"{};}}
\DoxyCodeLine{00319   m\_gestureActive = \textcolor{keyword}{false};}
\DoxyCodeLine{00320   m\_zooming       = \textcolor{keyword}{false};}
\DoxyCodeLine{00321   m\_panning       = \textcolor{keyword}{false};}
\DoxyCodeLine{00322   m\_stylusUsed    = \textcolor{keyword}{false};}
\DoxyCodeLine{00323   m\_scaleFactor   = 0.0;}
\DoxyCodeLine{00324 }
\DoxyCodeLine{00325   m\_buttonState = Qt::NoButton;}
\DoxyCodeLine{00326   QGraphicsView::mouseReleaseEvent(me);}
\DoxyCodeLine{00327   setDragMode(QGraphicsView::NoDrag);}
\DoxyCodeLine{00328   \textcolor{comment}{// update();}}
\DoxyCodeLine{00329 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_ac190e628b07e384c2fe815f194926a50}\label{class_schematic_scene_viewer_ac190e628b07e384c2fe815f194926a50}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!normalizeScene@{normalizeScene}}
\index{normalizeScene@{normalizeScene}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{normalizeScene}{normalizeScene}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::normalize\+Scene (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00480                                           \{}
\DoxyCodeLine{00481   \textcolor{comment}{// See QGraphicsView::mapToScene()'s doc for details}}
\DoxyCodeLine{00482   QPointF sceneCenter(mapToScene(rect().center()));}
\DoxyCodeLine{00483   resetMatrix();}
\DoxyCodeLine{00484 \textcolor{preprocessor}{\#if defined(MACOSX)}}
\DoxyCodeLine{00485   scale(1.32, 1.32);}
\DoxyCodeLine{00486 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00487   centerOn(sceneCenter);}
\DoxyCodeLine{00488 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_ada1e0b68676079b1a62c0c5089ee2aed}\label{class_schematic_scene_viewer_ada1e0b68676079b1a62c0c5089ee2aed}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!panQt@{panQt}}
\index{panQt@{panQt}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{panQt()}{panQt()}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::pan\+Qt (\begin{DoxyParamCaption}\item[{const QPointF \&}]{delta }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00491                                                      \{}
\DoxyCodeLine{00492   \textcolor{keywordflow}{if} (delta == QPointF()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00493   setInteractive(\textcolor{keyword}{false});}
\DoxyCodeLine{00494   \textcolor{comment}{// I need to disable QGraphicsView event handling to avoid the generation of}}
\DoxyCodeLine{00495   \textcolor{comment}{// 'virtual' mouseMoveEvent}}
\DoxyCodeLine{00496   translate(delta.x(), delta.y());}
\DoxyCodeLine{00497   \textcolor{comment}{// translate has changed the matrix affecting the mapToScene() method. I}}
\DoxyCodeLine{00498   \textcolor{comment}{// have to recompute currScenePos}}
\DoxyCodeLine{00499   setInteractive(\textcolor{keyword}{true});}
\DoxyCodeLine{00500 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_a2d5c575308b3d3e0d4df5d59758390ca}\label{class_schematic_scene_viewer_a2d5c575308b3d3e0d4df5d59758390ca}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!reorderScene@{reorderScene}}
\index{reorderScene@{reorderScene}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{reorderScene}{reorderScene}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::reorder\+Scene (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00473                                         \{}
\DoxyCodeLine{00474   \mbox{\hyperlink{class_schematic_scene}{SchematicScene}} *schematicScene = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_schematic_scene}{SchematicScene}} *\textcolor{keyword}{>}(scene());}
\DoxyCodeLine{00475   schematicScene-\/>reorderScene();}
\DoxyCodeLine{00476 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_a970a0a61942f52f8057e3f84371bb3c4}\label{class_schematic_scene_viewer_a970a0a61942f52f8057e3f84371bb3c4}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!setCursorMode@{setCursorMode}}
\index{setCursorMode@{setCursorMode}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{setCursorMode()}{setCursorMode()}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::set\+Cursor\+Mode (\begin{DoxyParamCaption}\item[{Cursor\+Mode}]{mode }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00710                                                               \{}
\DoxyCodeLine{00711   m\_cursorMode = cursorMode;}
\DoxyCodeLine{00712 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_ae7f769686bb2673cf7410ad8572a723e}\label{class_schematic_scene_viewer_ae7f769686bb2673cf7410ad8572a723e}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!showEvent@{showEvent}}
\index{showEvent@{showEvent}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{showEvent()}{showEvent()}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::show\+Event (\begin{DoxyParamCaption}\item[{QShow\+Event $\ast$}]{se }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00502                                                    \{}
\DoxyCodeLine{00503   QGraphicsView::showEvent(se);}
\DoxyCodeLine{00504   \textcolor{keywordflow}{if} (m\_firstShowing) \{}
\DoxyCodeLine{00505     m\_firstShowing = \textcolor{keyword}{false};}
\DoxyCodeLine{00506     QRectF rect    = scene()-\/>itemsBoundingRect();}
\DoxyCodeLine{00507     resetMatrix();}
\DoxyCodeLine{00508     centerOn(rect.center());}
\DoxyCodeLine{00509   \}}
\DoxyCodeLine{00510 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_a10beba630958094586cfbdc5a0f89ddb}\label{class_schematic_scene_viewer_a10beba630958094586cfbdc5a0f89ddb}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!tabletEvent@{tabletEvent}}
\index{tabletEvent@{tabletEvent}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{tabletEvent()}{tabletEvent()}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::tablet\+Event (\begin{DoxyParamCaption}\item[{QTablet\+Event $\ast$}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00534                                                       \{}
\DoxyCodeLine{00535   \textcolor{comment}{// qDebug() << "{}[tabletEvent]"{};}}
\DoxyCodeLine{00536   \textcolor{keywordflow}{if} (e-\/>type() == QTabletEvent::TabletPress) \{}
\DoxyCodeLine{00537     m\_stylusUsed = e-\/>pointerType() ? true : \textcolor{keyword}{false};}
\DoxyCodeLine{00538   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (e-\/>type() == QTabletEvent::TabletRelease) \{}
\DoxyCodeLine{00539     m\_stylusUsed = \textcolor{keyword}{false};}
\DoxyCodeLine{00540   \}}
\DoxyCodeLine{00541 }
\DoxyCodeLine{00542   e-\/>accept();}
\DoxyCodeLine{00543 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_a5365b2a0f3eabf90de4a487756cadd9f}\label{class_schematic_scene_viewer_a5365b2a0f3eabf90de4a487756cadd9f}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!touchEvent@{touchEvent}}
\index{touchEvent@{touchEvent}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{touchEvent()}{touchEvent()}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::touch\+Event (\begin{DoxyParamCaption}\item[{QTouch\+Event $\ast$}]{e,  }\item[{int}]{type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00609                                                               \{}
\DoxyCodeLine{00610   \textcolor{comment}{// qDebug() << "{}[touchEvent]"{};}}
\DoxyCodeLine{00611   \textcolor{keywordflow}{if} (type == QEvent::TouchBegin) \{}
\DoxyCodeLine{00612     m\_touchActive   = \textcolor{keyword}{true};}
\DoxyCodeLine{00613     m\_firstPanPoint = e-\/>touchPoints().at(0).pos();}
\DoxyCodeLine{00614     \textcolor{comment}{// obtain device type}}
\DoxyCodeLine{00615     m\_touchDevice = e-\/>device()-\/>type();}
\DoxyCodeLine{00616   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_touchActive) \{}
\DoxyCodeLine{00617     \textcolor{comment}{// touchpads must have 2 finger panning for tools and navigation to be}}
\DoxyCodeLine{00618     \textcolor{comment}{// functional on other devices, 1 finger panning is preferred}}
\DoxyCodeLine{00619     \textcolor{keywordflow}{if} ((e-\/>touchPoints().count() == 2 \&\&}
\DoxyCodeLine{00620          m\_touchDevice == QTouchDevice::TouchPad) ||}
\DoxyCodeLine{00621         (e-\/>touchPoints().count() == 1 \&\&}
\DoxyCodeLine{00622          m\_touchDevice == QTouchDevice::TouchScreen)) \{}
\DoxyCodeLine{00623       QTouchEvent::TouchPoint panPoint = e-\/>touchPoints().at(0);}
\DoxyCodeLine{00624       \textcolor{keywordflow}{if} (!m\_panning) \{}
\DoxyCodeLine{00625         QPointF deltaPoint = panPoint.pos() -\/ m\_firstPanPoint;}
\DoxyCodeLine{00626         \textcolor{comment}{// minimize accidental and jerky zooming/rotating during 2 finger}}
\DoxyCodeLine{00627         \textcolor{comment}{// panning}}
\DoxyCodeLine{00628         \textcolor{keywordflow}{if} ((deltaPoint.manhattanLength() > 100) \&\& !m\_zooming) \{}
\DoxyCodeLine{00629           m\_panning = \textcolor{keyword}{true};}
\DoxyCodeLine{00630         \}}
\DoxyCodeLine{00631       \}}
\DoxyCodeLine{00632       \textcolor{keywordflow}{if} (m\_panning) \{}
\DoxyCodeLine{00633         QPointF curPos =}
\DoxyCodeLine{00634             m\_touchDevice == QTouchDevice::TouchScreen}
\DoxyCodeLine{00635                 ? mapToScene(panPoint.pos().toPoint())}
\DoxyCodeLine{00636                 : mapToScene(panPoint.pos().toPoint()) * getDevPixRatio();}
\DoxyCodeLine{00637         QPointF lastPos =}
\DoxyCodeLine{00638             m\_touchDevice == QTouchDevice::TouchScreen}
\DoxyCodeLine{00639                 ? mapToScene(panPoint.lastPos().toPoint())}
\DoxyCodeLine{00640                 : mapToScene(panPoint.lastPos().toPoint()) * getDevPixRatio();}
\DoxyCodeLine{00641         QPointF centerDelta = curPos -\/ lastPos;}
\DoxyCodeLine{00642         panQt(centerDelta);}
\DoxyCodeLine{00643       \}}
\DoxyCodeLine{00644     \}}
\DoxyCodeLine{00645   \}}
\DoxyCodeLine{00646   \textcolor{keywordflow}{if} (type == QEvent::TouchEnd || type == QEvent::TouchCancel) \{}
\DoxyCodeLine{00647     m\_touchActive = \textcolor{keyword}{false};}
\DoxyCodeLine{00648     m\_panning     = \textcolor{keyword}{false};}
\DoxyCodeLine{00649   \}}
\DoxyCodeLine{00650   e-\/>accept();}
\DoxyCodeLine{00651 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_af3a738281ae3d0ddec41c32b22f72113}\label{class_schematic_scene_viewer_af3a738281ae3d0ddec41c32b22f72113}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!wheelEvent@{wheelEvent}}
\index{wheelEvent@{wheelEvent}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{wheelEvent()}{wheelEvent()}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::wheel\+Event (\begin{DoxyParamCaption}\item[{QWheel\+Event $\ast$}]{me }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}

Reimplemets the QGraphics\+View\+::wheel\+Event() 
\begin{DoxyCode}{0}
\DoxyCodeLine{00362                                                      \{}
\DoxyCodeLine{00363   \textcolor{comment}{// qDebug() << "{}[wheelEvent]"{};}}
\DoxyCodeLine{00364 }
\DoxyCodeLine{00365   \textcolor{keywordtype}{int} delta = 0;}
\DoxyCodeLine{00366   \textcolor{keywordflow}{switch} (me-\/>source()) \{}
\DoxyCodeLine{00367   \textcolor{keywordflow}{case} Qt::MouseEventNotSynthesized: \{}
\DoxyCodeLine{00368     \textcolor{keywordflow}{if} (me-\/>modifiers() \& Qt::AltModifier)}
\DoxyCodeLine{00369       delta = me-\/>angleDelta().x();}
\DoxyCodeLine{00370     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00371       delta = me-\/>angleDelta().y();}
\DoxyCodeLine{00372     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00373   \}}
\DoxyCodeLine{00374 }
\DoxyCodeLine{00375   \textcolor{keywordflow}{case} Qt::MouseEventSynthesizedBySystem: \{}
\DoxyCodeLine{00376     QPoint numPixels  = me-\/>pixelDelta();}
\DoxyCodeLine{00377     QPoint numDegrees = me-\/>angleDelta() / 8;}
\DoxyCodeLine{00378     \textcolor{keywordflow}{if} (!numPixels.isNull()) \{}
\DoxyCodeLine{00379       delta = me-\/>pixelDelta().y();}
\DoxyCodeLine{00380     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!numDegrees.isNull()) \{}
\DoxyCodeLine{00381       QPoint numSteps = numDegrees / 15;}
\DoxyCodeLine{00382       delta           = numSteps.y();}
\DoxyCodeLine{00383     \}}
\DoxyCodeLine{00384     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00385   \}}
\DoxyCodeLine{00386 }
\DoxyCodeLine{00387   \textcolor{keywordflow}{default}:  \textcolor{comment}{// Qt::MouseEventSynthesizedByQt,}}
\DoxyCodeLine{00388             \textcolor{comment}{// Qt::MouseEventSynthesizedByApplication}}
\DoxyCodeLine{00389   \{}
\DoxyCodeLine{00390     std::cout << \textcolor{stringliteral}{"{}not supported event: Qt::MouseEventSynthesizedByQt, "{}}}
\DoxyCodeLine{00391                  \textcolor{stringliteral}{"{}Qt::MouseEventSynthesizedByApplication"{}}}
\DoxyCodeLine{00392               << std::endl;}
\DoxyCodeLine{00393     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00394   \}}
\DoxyCodeLine{00395 }
\DoxyCodeLine{00396   \}  \textcolor{comment}{// end switch}}
\DoxyCodeLine{00397 }
\DoxyCodeLine{00398   \textcolor{keywordflow}{if} (abs(delta) > 0) \{}
\DoxyCodeLine{00399     \textcolor{keywordflow}{if} ((m\_gestureActive == \textcolor{keyword}{true} \&\&}
\DoxyCodeLine{00400          m\_touchDevice == QTouchDevice::TouchScreen) ||}
\DoxyCodeLine{00401         m\_gestureActive == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{00402       \textcolor{keywordtype}{double} factor = exp(delta * 0.001);}
\DoxyCodeLine{00403       changeScale(me-\/>pos(), factor);}
\DoxyCodeLine{00404       m\_panning = \textcolor{keyword}{false};}
\DoxyCodeLine{00405     \}}
\DoxyCodeLine{00406   \}}
\DoxyCodeLine{00407   me-\/>accept();}
\DoxyCodeLine{00408 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_schematic_scene_viewer_a19f21cb3e1d187f8ec80f90b928cdf6b}\label{class_schematic_scene_viewer_a19f21cb3e1d187f8ec80f90b928cdf6b}} 
\index{SchematicSceneViewer@{SchematicSceneViewer}!zoomQt@{zoomQt}}
\index{zoomQt@{zoomQt}!SchematicSceneViewer@{SchematicSceneViewer}}
\doxysubsubsection{\texorpdfstring{zoomQt()}{zoomQt()}}
{\footnotesize\ttfamily void Schematic\+Scene\+Viewer\+::zoom\+Qt (\begin{DoxyParamCaption}\item[{bool}]{zoomin,  }\item[{bool}]{reset\+View }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00412                                                              \{}
\DoxyCodeLine{00413   \textcolor{keywordflow}{if} (resetView) \{}
\DoxyCodeLine{00414     resetMatrix();}
\DoxyCodeLine{00415     \textcolor{comment}{// resetting will set view to the center of items bounding}}
\DoxyCodeLine{00416     centerOn(scene()-\/>itemsBoundingRect().center());}
\DoxyCodeLine{00417     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00418   \}}
\DoxyCodeLine{00419 }
\DoxyCodeLine{00420 \textcolor{preprocessor}{\#if QT\_VERSION >= 0x050000}}
\DoxyCodeLine{00421   \textcolor{keywordtype}{double} scale2 = matrix().determinant();}
\DoxyCodeLine{00422 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00423   \textcolor{keywordtype}{double} scale2 = matrix().det();}
\DoxyCodeLine{00424 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00425   \textcolor{keywordflow}{if} ((scale2 < 100000 || !zoomin) \&\& (scale2 > 0.001 * 0.05 || zoomin)) \{}
\DoxyCodeLine{00426     \textcolor{keywordtype}{double} oldZoomScale = sqrt(scale2);}
\DoxyCodeLine{00427     \textcolor{keywordtype}{double} zoomScale =}
\DoxyCodeLine{00428         resetView ? 1}
\DoxyCodeLine{00429                   : ImageUtils::getQuantizedZoomFactor(oldZoomScale, zoomin);}
\DoxyCodeLine{00430     QMatrix scale =}
\DoxyCodeLine{00431         QMatrix().scale(zoomScale / oldZoomScale, zoomScale / oldZoomScale);}
\DoxyCodeLine{00432 }
\DoxyCodeLine{00433     \textcolor{comment}{// See QGraphicsView::mapToScene()'s doc for details}}
\DoxyCodeLine{00434     QPointF sceneCenter(mapToScene(rect().center()));}
\DoxyCodeLine{00435     setMatrix(scale, \textcolor{keyword}{true});}
\DoxyCodeLine{00436     centerOn(sceneCenter);}
\DoxyCodeLine{00437   \}}
\DoxyCodeLine{00438 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/toonzqt/schematicviewer.\+h\item 
E\+:/opentoonz/toonz/sources/toonzqt/schematicviewer.\+cpp\end{DoxyCompactItemize}
